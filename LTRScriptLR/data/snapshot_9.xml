<?xml version="1.0" encoding="utf-8"?>
<HTTPSnapshot xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" id="9">
  <HTTPTask id="276" hostname="dev.bluealgo.com" path="https://dev.bluealgo.com/smartformup/loadindex?opportunityId=0060o00001eSIJ0AAO&amp;customerid=cust1005&amp;accesstoken=uXCxZRKU-Mf2wiTg3_A8dPu957taLXxP" url="https://dev.bluealgo.com/smartformup/loadindex?opportunityId=0060o00001eSIJ0AAO&amp;customerid=cust1005&amp;accesstoken=uXCxZRKU-Mf2wiTg3_A8dPu957taLXxP" ip="144.126.253.3" port="443" connectionId="11" origin="Primary" frame="1" startDateTime="2024-02-15T10:57:47.839+05:30" startTime="519311062" endTime="519311078">
    <QueryString>
      <HTTPDataSet>
        <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
          <ActualData>b3Bwb3J0dW5pdHlJZD0wMDYwbzAwMDAxZVNJSjBBQU8mY3VzdG9tZXJpZD1jdXN0MTAwNSZhY2Nlc3N0b2tlbj11WEN4WlJLVS1NZjJ3aVRnM19BOGRQdTk1N3RhTFh4UA==</ActualData>
        </HTTPData>
      </HTTPDataSet>
      <IsExternalData>false</IsExternalData>
    </QueryString>
    <HTTPSplittedQueryStrings>
      <HTTPHeaderEntity name="opportunityId" index="0">
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>MDA2MG8wMDAwMWVTSUowQUFP</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </HTTPHeaderEntity>
      <HTTPHeaderEntity name="customerid" index="1">
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>Y3VzdDEwMDU=</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </HTTPHeaderEntity>
      <HTTPHeaderEntity name="accesstoken" index="2">
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>dVhDeFpSS1UtTWYyd2lUZzNfQThkUHU5NTd0YUxYeFA=</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </HTTPHeaderEntity>
    </HTTPSplittedQueryStrings>
    <HTTPRequest method="GET">
      <HTTPHeaders>
        <HTTPHeaderEntity name="sec-ch-ua" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ik5vdCBBKEJyYW5kIjt2PSI5OSIsICJHb29nbGUgQ2hyb21lIjt2PSIxMjEiLCAiQ2hyb21pdW0iO3Y9IjEyMSI=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="sec-ch-ua-mobile" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>PzA=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="sec-ch-ua-platform" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>IldpbmRvd3Mi</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Upgrade-Insecure-Requests" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="User-Agent" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEyMS4wLjAuMCBTYWZhcmkvNTM3LjM2</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>dGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksaW1hZ2UvYXZpZixpbWFnZS93ZWJwLGltYWdlL2FwbmcsKi8qO3E9MC44LGFwcGxpY2F0aW9uL3NpZ25lZC1leGNoYW5nZTt2PWIzO3E9MC43</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Sec-Fetch-Site" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bm9uZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Sec-Fetch-Mode" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bmF2aWdhdGU=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Sec-Fetch-User" index="8">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>PzE=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Sec-Fetch-Dest" index="9">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>ZG9jdW1lbnQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Encoding" index="10">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Language" index="11">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>ZW4tVVMsZW47cT0wLjk=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Host" index="12">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>ZGV2LmJsdWVhbGdvLmNvbQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Connection" index="13">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>R0VUIGh0dHBzOi8vZGV2LmJsdWVhbGdvLmNvbS9zbWFydGZvcm11cC9sb2FkaW5kZXg/b3Bwb3J0dW5pdHlJZD0wMDYwbzAwMDAxZVNJSjBBQU8mY3VzdG9tZXJpZD1jdXN0MTAwNSZhY2Nlc3N0b2tlbj11WEN4WlJLVS1NZjJ3aVRnM19BOGRQdTk1N3RhTFh4UCBIVFRQLzEuMQ0Kc2VjLWNoLXVhOiAiTm90IEEoQnJhbmQiO3Y9Ijk5IiwgIkdvb2dsZSBDaHJvbWUiO3Y9IjEyMSIsICJDaHJvbWl1bSI7dj0iMTIxIg0Kc2VjLWNoLXVhLW1vYmlsZTogPzANCnNlYy1jaC11YS1wbGF0Zm9ybTogIldpbmRvd3MiDQpVcGdyYWRlLUluc2VjdXJlLVJlcXVlc3RzOiAxDQpVc2VyLUFnZW50OiBNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvMTIxLjAuMC4wIFNhZmFyaS81MzcuMzYNCkFjY2VwdDogdGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksaW1hZ2UvYXZpZixpbWFnZS93ZWJwLGltYWdlL2FwbmcsKi8qO3E9MC44LGFwcGxpY2F0aW9uL3NpZ25lZC1leGNoYW5nZTt2PWIzO3E9MC43DQpTZWMtRmV0Y2gtU2l0ZTogbm9uZQ0KU2VjLUZldGNoLU1vZGU6IG5hdmlnYXRlDQpTZWMtRmV0Y2gtVXNlcjogPzENClNlYy1GZXRjaC1EZXN0OiBkb2N1bWVudA0KQWNjZXB0LUVuY29kaW5nOiBnemlwLCBkZWZsYXRlDQpBY2NlcHQtTGFuZ3VhZ2U6IGVuLVVTLGVuO3E9MC45DQpIb3N0OiBkZXYuYmx1ZWFsZ28uY29tDQpDb25uZWN0aW9uOiBLZWVwLUFsaXZlDQoNCg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
    </HTTPRequest>
    <HTTPResponse>
      <contentLenght>0</contentLenght>
      <HTTPHeaders>
        <HTTPHeaderEntity name="Date" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VGh1LCAxNSBGZWIgMjAyNCAwNToxODo0NyBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Type" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>dGV4dC9odG1sO2NoYXJzZXQ9VVRGLTg=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Connection" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Access-Control-Allow-Origin" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Kg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Set-Cookie" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SlNFU1NJT05JRD0zRDVFOEZFODBBNEYzNEY5QkM0OEI2RTc0ODhCOEY5MTsgUGF0aD0vc21hcnRmb3JtdXA7IEh0dHBPbmx5</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Strict-Transport-Security" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bWF4LWFnZT0xNTcyNDgwMDsgaW5jbHVkZVN1YkRvbWFpbnM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SFRUUC8xLjEgMjAwIA0KRGF0ZTogVGh1LCAxNSBGZWIgMjAyNCAwNToxODo0NyBHTVQNCkNvbnRlbnQtVHlwZTogdGV4dC9odG1sO2NoYXJzZXQ9VVRGLTgNCkNvbm5lY3Rpb246IGtlZXAtYWxpdmUNCkFjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbjogKg0KU2V0LUNvb2tpZTogSlNFU1NJT05JRD0zRDVFOEZFODBBNEYzNEY5QkM0OEI2RTc0ODhCOEY5MTsgUGF0aD0vc21hcnRmb3JtdXA7IEh0dHBPbmx5DQpTdHJpY3QtVHJhbnNwb3J0LVNlY3VyaXR5OiBtYXgtYWdlPTE1NzI0ODAwOyBpbmNsdWRlU3ViRG9tYWlucw0KDQo=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
      <HTTPBody>
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>CjwhRE9DVFlQRSBodG1sPgo8aHRtbCBsYW5nPSJlbiI+Cgo8aGVhZD4KPG1ldGEgY2hhcnNldD0iVVRGLTgiIC8+CjxtZXRhIGh0dHAtZXF1aXY9IlgtVUEtQ29tcGF0aWJsZSIgY29udGVudD0iSUU9ZWRnZSIgLz4KPG1ldGEgbmFtZT0idmlld3BvcnQiIGNvbnRlbnQ9IndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLjAiIC8+CjxsaW5rIGhyZWY9InVpL3N0eWxlcy5jc3MiIHJlbD0ic3R5bGVzaGVldCIgLz4KCjxsaW5rIHJlbD0icHJlY29ubmVjdCIgaHJlZj0iaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbSIgLz4KPGxpbmsgcmVsPSJwcmVjb25uZWN0IiBocmVmPSJodHRwczovL2ZvbnRzLmdzdGF0aWMuY29tIiBjcm9zc29yaWdpbiAvPgo8bGluawoJaHJlZj0iaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbS9jc3MyP2ZhbWlseT1Sb2JvdG86d2dodEAzMDA7NDAwOzUwMDs3MDAmZGlzcGxheT1zd2FwIgoJcmVsPSJzdHlsZXNoZWV0IiAvPgoKPGxpbmsKCWhyZWY9Imh0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb20vY3NzMj9mYW1pbHk9SUJNK1BsZXgrU2FuczppdGFsLHdnaHRAMCw0MDA7MCw2MDA7MSw0MDAmZGlzcGxheT1zd2FwIgoJcmVsPSJzdHlsZXNoZWV0IiAvPgoKCjxzY3JpcHQgc3JjPSJodHRwczovL2NvZGUuanF1ZXJ5LmNvbS9qcXVlcnktMS4xMi40LmpzIj48L3NjcmlwdD4KPHNjcmlwdAoJc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9tb21lbnQuanMvMi4yOS40L21vbWVudC5taW4uanMiPjwvc2NyaXB0Pgo8c2NyaXB0CglzcmM9Imh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2pzcGRmLzEuMy4zL2pzcGRmLm1pbi5qcyI+PC9zY3JpcHQ+CjxzY3JpcHQgc3JjPSJodHRwczovL2h0bWwyY2FudmFzLmhlcnR6ZW4uY29tL2Rpc3QvaHRtbDJjYW52YXMuanMiPjwvc2NyaXB0Pgo8c2NyaXB0CglzcmM9Imh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL3BkZi1saWIvMS4xNy4xL3BkZi1saWIubWluLmpzIj48L3NjcmlwdD4KPGxpbmsgcmVsPSJzdHlsZXNoZWV0IgoJaHJlZj0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvZm9udC1hd2Vzb21lLzYuMy4wL2Nzcy9hbGwubWluLmNzcyIKCWludGVncml0eT0ic2hhNTEyLVN6bHJ4V1VscGZ1elErcGNVQ29zeGNnbFFSTkFxL0RaalZzQzBsRTQweHNBRHNmZVFvRXlwRStlbndjT2lHamsvYlN1R0dLSEV5alNvUTF6VmlzYW5RPT0iCgljcm9zc29yaWdpbj0iYW5vbnltb3VzIiByZWZlcnJlcnBvbGljeT0ibm8tcmVmZXJyZXIiIC8+CjxzY3JpcHQKCXNyYz0iCglodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL3BkZmpzLWRpc3RAMy43LjEwNy9idWlsZC9wZGYubWluLmpzCgkiPjwvc2NyaXB0PgoKPCEtLSBDb3VudHJ5IGNvZGUgUGFja2FnZSAtLT4KPHNjcmlwdAoJc3JjPSIKaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L25wbS9pbnRsLXRlbC1pbnB1dEAxOC4yLjEvYnVpbGQvanMvaW50bFRlbElucHV0Lm1pbi5qcwoiPjwvc2NyaXB0Pgo8bGluawoJaHJlZj0iCmh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vaW50bC10ZWwtaW5wdXRAMTguMi4xL2J1aWxkL2Nzcy9pbnRsVGVsSW5wdXQubWluLmNzcwoiCglyZWw9InN0eWxlc2hlZXQiPgoKCjx0aXRsZT5Gb3JtPC90aXRsZT4KPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJ1aS9wZGZ2aWV3LmNzcyIgLz4KCjwvaGVhZD4KCjxib2R5PgoJPGRpdiBpZD0ibG9hZGVyIiBjbGFzcz0ibG9hZGluZyBoaWRlTG9hZGVyIj4KCQk8ZGl2IGNsYXNzPSJsb2FkaW5nLXdyYXBwZXIiPgoJCQk8c3Bhbj5Mb2FkaW5nLi4uPC9zcGFuPgoJCQk8ZGl2IGNsYXNzPSJsb2FkaW5nLWljb24iPjwvZGl2PgoJCTwvZGl2PgoJPC9kaXY+CgoKCTxkaXYgY2xhc3M9Im15LWRpYWxvZyBoaWRlQ29uc2VudCIgaWQ9ImNvbnNlbnQtZGlhbG9nIj4KCQk8ZGl2IGNsYXNzPSJkaWFsb2ctaW5uZXIiPgoJCQk8ZGl2IGNsYXNzPSJkaWFsb2ctY2xvc2VyIj4KCQkJCTwhLS0gPGltZyBzcmM9ImFzc2V0cy9pbWFnZXMvY2xvc2Vfc3ZnLnN2ZyIgd2lkdGg9IjIwIiBoZWlnaHQ9IjIwIiBpZD0iZGlzbWlzQ29uc2VudCI+IC0tPgoJCQk8L2Rpdj4KCgkJCTxkaXYgY2xhc3M9ImRpYWxvZy1jb250ZW50IiBpZD0iZGlhbG9nLWNvbnRlbnQiPgoKCQkJPC9kaXY+CgoKCQkJPGRpdiBjbGFzcz0iZGlhbG9nLWZvb3RlciI+CgkJCQk8cD4KCQkJCQk8aW5wdXQgdHlwZT0iY2hlY2tib3giIG5hbWU9ImFjY2VwdENvbnNlbnQiIGlkPSJjb25zZW50Q2hlY2siPgoJCQkJCTxzcGFuIGlkPSJhY2NlcHRUZXh0Ij5JIEFjY2VwdDwvc3Bhbj4KCQkJCTwvcD4KCQkJCTxidXR0b24gaWQ9ImFjY2VwdENvbnNlbnQiPk5leHQ8L2J1dHRvbj4KCQkJPC9kaXY+CgkJPC9kaXY+Cgk8L2Rpdj4KCgk8IS0tIERpYWxvZyBCb3ggZm9yIFF1b3RhdGlvbiAtLT4KCTxkaXYgY2xhc3M9Im15LWRpYWxvZyBoaWRkZW4iIGlkPSJxdW90LWNvbnNlbnQtZGlhbG9nIj4KCQk8ZGl2IGNsYXNzPSJkaWFsb2ctaW5uZXIgZnVsbC1zaXplIj4KCQkJPGRpdiBjbGFzcz0iZGlhbG9nLWNsb3NlciI+CgkJCQk8IS0tIDxpbWcgc3JjPSJhc3NldHMvaW1hZ2VzL2Nsb3NlX3N2Zy5zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgaWQ9InF1b3QtZGlzbWlzQ29uc2VudCI+IC0tPgoJCQk8L2Rpdj4KCgkJCTxkaXYgY2xhc3M9ImRpYWxvZy1jb250ZW50IiBpZD0icXVvdC1kaWFsb2ctY29udGVudCI+CgoJCQk8L2Rpdj4KCgoJCQk8ZGl2IGNsYXNzPSJkaWFsb2ctZm9vdGVyIj4KCQkJCTxwPgoJCQkJCTxpbnB1dCB0eXBlPSJjaGVja2JveCIgbmFtZT0iYWNjZXB0Q29uc2VudCIgaWQ9InF1b3QtY29uc2VudENoZWNrIj4KCQkJCQk8c3BhbiBpZD0icXVvdC1hY2NlcHRUZXh0Ij5JIEFjY2VwdDwvc3Bhbj4KCQkJCTwvcD4KCQkJCTxidXR0b24gaWQ9InF1b3QtYWNjZXB0Q29uc2VudCI+TmV4dDwvYnV0dG9uPgoJCQk8L2Rpdj4KCQk8L2Rpdj4KCTwvZGl2PgoJPGRpdiBpZD0ibGVmdC1wYW5uZWwiIGNsYXNzPSJoaWRkZW4iPgoJCTxpbWcgY3Jvc3NvcmlnaW49ImFub255bW91cyIgc3JjPSJsb2NrLWljLnBuZyIgaWQ9InBhbm5lbC1sb2dvIiAvPgoJPC9kaXY+Cgk8bm9zY3JpcHQ+UGxlYXNlIGVuYWJsZSBKYXZhc2NyaXB0Ljwvbm9zY3JpcHQ+Cgk8ZGl2IGlkPSJmb3JtLWN0biI+CgkJPGZvcm0gaWQ9ImZvcm0iIGFjdGlvbj0iZ2VuZXJpY0Zvcm0iIG1ldGhvZD0iUG9zdCIKCQkJZW5jdHlwZT0ibXVsdGlwYXJ0L2Zvcm0tZGF0YSI+CgkJCTxkaXYgaWQ9InN1Yl9hY3Rpb25zZWMiIGNsYXNzPSJoaWRkZW4iPgoJCQkJPGlucHV0IGlkPSJvcHBvcnR1bml0eXBhc3MiIG5hbWU9Im9wcG9ydHVuaXR5cGFzcyIgdHlwZT0iaGlkZGVuIgoJCQkJCXZhbHVlPSIiIC8+IDxpbnB1dCBpZD0icHJvamVjdGlkIiBuYW1lPSJwcm9qZWN0aWQiIHR5cGU9ImhpZGRlbiIKCQkJCQl2YWx1ZT0iIiAvPiA8aW5wdXQgaWQ9ImVzaWduc3RhdXMiIG5hbWU9ImVzaWduc3RhdXMiIHR5cGU9ImhpZGRlbiIKCQkJCQl2YWx1ZT0iZmFsc2UiIC8+IDxpbnB1dCBpZD0iYXBwbGljYW50Q291bnQiIG5hbWU9ImFwcGxpY2FudENvdW50IgoJCQkJCXR5cGU9ImhpZGRlbiIgdmFsdWU9IiIgLz4gPGlucHV0IGlkPSJnZW5lcmF0ZWRmb3JtUERGIgoJCQkJCW5hbWU9ImdlbmVyYXRlZGZvcm1QREYiIHR5cGU9ImhpZGRlbiIgdmFsdWU9IiIgLz4KCQkJCTx0ZXh0YXJlYSBuYW1lPSJwZGZDb250ZW50IiBpZD0icGRmQ29udGVudCIKCQkJCQlzdHlsZT0iZGlzcGxheTogbm9uZTsgd2hpdGUtc3BhY2U6IHByZS13cmFwOyI+PC90ZXh0YXJlYT4KCQkJPC9kaXY+CgoJCQk8ZGl2IGlkPSJzaWduTW9kYWwiIGNsYXNzPSJtb2RhbCI+CgkJCQk8ZGl2IGNsYXNzPSJtb2RhbC1jb250ZW50Ij4KCQkJCQk8c3BhbiBjbGFzcz0iY2xvc2UiPiZ0aW1lczs8L3NwYW4+CgkJCQkJPGgyPlNpZ25pbmcgT3JkZXI8L2gyPgoJCQkJCTxkaXYgaWQ9InNpZ25JZENvbnRlbnQiPjwvZGl2PgoJCQkJCTxkaXYgY2xhc3M9ImVzaWduX2xvYWRhY3Rpb24iPgoJCQkJCQk8YnV0dG9uIGlkPSJlc2lnbi1zYXZlIiB0eXBlPSJidXR0b24iPlN1Ym1pdDwvYnV0dG9uPgoJCQkJCTwvZGl2PgoJCQkJPC9kaXY+CgkJCTwvZGl2PgoKCQkJPGRpdiBpZD0iYnRuLWN0biI+CgkJCQk8IS0tIDxidXR0b24gaWQ9InByZXZpZXctYnRuIiB0eXBlPSJidXR0b24iIGNsYXNzPSJoaWRkZW4iPlByZXZpZXc8L2J1dHRvbj4gLS0+CgkJCQk8aSBjbGFzcz0iZmEgZmEtY2hlY2stY2lyY2xlIGhpZGRlbiIgYXJpYS1oaWRkZW49InRydWUiPjwvaT4KCQkJCTxidXR0b24gaWQ9InNhdmUtYnRuIiB0eXBlPSJidXR0b24iPlNhdmU8L2J1dHRvbj4KCQkJCTxidXR0b24gaWQ9InByZXYtYnRuIiBjbGFzcz0iaGlkZGVuIiB0eXBlPSJidXR0b24iPlByZXZpb3VzPC9idXR0b24+CgkJCQk8YnV0dG9uIGlkPSJmb3JtLWJ0biIgYXV0b2ZvY3VzIHR5cGU9ImJ1dHRvbiI+TmV4dDwvYnV0dG9uPgoJCQkJPGJ1dHRvbiBpZD0ic2lnbi1idXR0b24iIGNsYXNzPSJoaWRkZW4iIGRpc2FibGVkIHR5cGU9ImJ1dHRvbiI+CgkJCQkJPHNwYW4gY2xhc3M9ImdyZWVuIj5FLVNpZ24gYW5kIFN1Ym1pdDwvc3Bhbj4KCQkJCTwvYnV0dG9uPgoJCQk8L2Rpdj4KCQk8L2Zvcm0+Cgk8L2Rpdj4KCgk8ZGl2IGlkPSJteU1vZGFsIiBjbGFzcz0ibW9kYWwiPgoJCTxkaXYgY2xhc3M9Im1vZGFsLWNvbnRlbnQiPgoJCQk8ZGl2IGNsYXNzPSJtb2RhbF9oZWFkX2NvbnRhaW5lciI+CgkJCQk8ZGl2IGNsYXNzPSJtb2Rlci1oZWFkZXIiCgkJCQkJc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsiPgoJCQkJCTxoMiBpZD0icHJldmlld19oZWFkZXIiPlByZXZpZXc8L2gyPgoJCQkJCTxzcGFuIGNsYXNzPSJjbG9zZSI+JnRpbWVzOzwvc3Bhbj4KCQkJCTwvZGl2PgoJCQkJPGRpdiBpZD0iZXNpZ25faGx0Z2QiPgoKCgkJCQkJPGJ1dHRvbiBpZD0iaW5kaXZpZHVhbC1zaWduLWJ1dHRvbiIgdHlwZT0iYnV0dG9uIj5FIFNpZ24KCQkJCQkJTm93PC9idXR0b24+CgkJCQkJPGEgaWQ9InBkZmRvd25sb2FkX2xpbmsiPkRvd25sb2FkPC9hPgoJCQkJPC9kaXY+CgkJCTwvZGl2PgoJCQk8ZGl2IGNsYXNzPSJsb2FkZXJDb250YWllciI+CgkJCQk8ZGl2IGNsYXNzPSJteWxvYWRlciI+PC9kaXY+CgkJCTwvZGl2PgoJCQk8aWZyYW1lIGlkPSJwZGYtdmlld2VyIiBzcmM9IiIgc3R5bGU9IndpZHRoOiAxMDAlOyBoZWlnaHQ6IDgwMHB4IgoJCQkJZnJhbWVib3JkZXI9IjAiIHNjcm9sbGluZz0iYXV0byI+PC9pZnJhbWU+CgkJCTwhLS0gPGVtYmVkCiAgICAgICAgICBpZD0icGRmLXZpZXdlciIKICAgICAgICAgIHNyYz0iIgogICAgICAgICAgc3R5bGU9IndpZHRoOiAxMDAlOyBoZWlnaHQ6IDgwMHB4IgogICAgICAgICAgZnJhbWVib3JkZXI9IjAiCiAgICAgICAgICBzY3JvbGxpbmc9ImF1dG8iCiAgICAgICAgLz4gLS0+CgkJPC9kaXY+Cgk8L2Rpdj4KCgk8ZGl2IGlkPSJteVBvcHVwIiBjbGFzcz0ibXl2ZXJNb2RhbCI+CgkJPGRpdiBjbGFzcz0icG9wb3V0ZXJjb250ZW50Ij4KCQkJPGRpdiBjbGFzcz0icG9wdXAtY29udGVudCI+CgkJCQk8ZGl2IGNsYXNzPSJwb3B1cC1oZWFkZXIiPkltYWdlIGVycm9yOiBQbGVhc2UgcHJvY2VlZAoJCQkJCU1hbnVhbGx5ITwvZGl2PgoJCQkJPGRpdiBjbGFzcz0icG9wdXAtYm9keSI+CgkJCQkJPHAgY2xhc3M9InBvcHVwX3dhcm5pbmd0ZXh0Ij48L3A+CgkJCQk8L2Rpdj4KCQkJCTxkaXYgY2xhc3M9InBvcHVwLWZvb3RlciI+CgkJCQkJPGJ1dHRvbiBjbGFzcz0iZG9jX3JldXBsb2FkQnRuIj5VcGxvYWQgQWdhaW48L2J1dHRvbj4KCQkJCQk8YnV0dG9uIGNsYXNzPSJpZ25vcmVQcl9CdG4iPlByb2NlZWQgTWFudWFsbHk8L2J1dHRvbj4KCQkJCTwvZGl2PgoJCQk8L2Rpdj4KCQk8L2Rpdj4KCTwvZGl2PgoKCTxkaXYgaWQ9Im15T1RQUG9wdXAiIGNsYXNzPSJteXZlck1vZGFsIj4KCQk8ZGl2IGNsYXNzPSJwb3BvdXRlcmNvbnRlbnQiPgoJCQk8ZGl2IGNsYXNzPSJwb3B1cC1jb250ZW50Ij4KCQkJCTxkaXYgY2xhc3M9InBvcHVwLWhlYWRlciI+CgkJCQkJPGgzPlZhbGlkYXRlIE9UUChPbmUgVGltZSBQYXNzY29kZSk8L2gzPgoJCQkJCTxzcGFuIGNsYXNzPSJjYW5jZWxfQnRuIj48L3NwYW4+CgkJCQk8L2Rpdj4KCQkJCTxkaXYgY2xhc3M9InBvcHVwLWJvZHkiPgoJCQkJCTxkaXY+CgkJCQkJCTxsYWJlbCBmb3I9InBob25lX3dpdGhfY291bnRyeWNvZGUiPjwvbGFiZWw+CgkJCQkJCTwhLS0gQ3JlYXRlIGFuIGlucHV0IGZpZWxkIHdpdGggdGhlICJwaG9uZSIgaWQgLS0+CgkJCQkJCTxpbnB1dCB0eXBlPSJ0ZWwiIGlkPSJwaG9uZV93aXRoX2NvdW50cnljb2RlIgoJCQkJCQkJc3R5bGU9InBhZGRpbmctbGVmdDogNDlweDsgZm9udC1zaXplOiAxZW07IHBvaW50ZXItZXZlbnRzOiBub25lOyIKCQkJCQkJCW5hbWU9InBob25lIj4KCQkJCQkJPGJ1dHRvbiBpZD0iZ2V0X290cCIgY2xhc3M9Im5ldy1idG4iPkdldCBPVFA8L2J1dHRvbj4KCQkJCQkJPHNwYW4gaWQ9InNlbmRpbmdfb3RwIiBjbGFzcz0iaGlkZSI+U2VuZGluZyBPVFAuLi48L3NwYW4+CgoJCQkJCTwvZGl2PgoJCQkJCTxkaXYgaWQ9InNlbnRfb3RwIiBjbGFzcz0iaGlkZSBtdC0xMCI+CgkJCQkJCTxwPgoJCQkJCQkJQSBPVFAoT25lIFRpbWUgUGFzc2NvZGUpIGhhcyBiZWVuIHNlbnQgdG8gcHJpbWFyeSBhcHBsaWNhbnQgZW1haWwKCQkJCQkJCWFuZCA8c3Ryb25nPjwvc3Ryb25nPiA8c3BhbiBjbGFzcz0ib3RwX3Bob25lIj48L3NwYW4+CgkJCQkJCTwvcD4KCQkJCQkJPHA+UGxlYXNlIGVudGVyIHRoZSBPVFAgQmVsb3cgdG8gdmVyaWZ5IENoYW5uZWwgUGFydG5lcjwvcD4KCQkJCQk8L2Rpdj4KCQkJCQk8ZGl2IGlkPSJvdHBfZXJyb3IiIGNsYXNzPSJoaWRlIG10LTEwIj4KCQkJCQkJPHAgY2xhc3M9ImVycm9yLXRleHQiPlNvcnJ5LCB3ZSBjb3VsZG4ndCBzZW50IE9UUDwvcD4KCQkJCQk8L2Rpdj4KCQkJCQk8aW5wdXQgdHlwZT0ibnVtYmVyIiBpZD0idmVyaWZ5T3RwIiBwbGFjZWhvbGRlcj0iT1RQIiAvPgoJCQkJCTxwIGNsYXNzPSJ3YXJuaWctdGV4dCI+PC9wPgoJCQkJPC9kaXY+CgkJCQk8ZGl2IGNsYXNzPSJwb3B1cC1mb290ZXIiPgoJCQkJCTxidXR0b24gY2xhc3M9InZlcmlmeV9CdG4iPlZhbGlkYXRlIE9UUDwvYnV0dG9uPgoJCQkJCTxidXR0b24gY2xhc3M9Im90cHJlc2VuZF9CdG4gbmV3LWJ0biI+UmVzZW5kIE9UUDwvYnV0dG9uPgoJCQkJPC9kaXY+CgkJCTwvZGl2PgoJCTwvZGl2PgoJPC9kaXY+Cgk8ZGl2IGNsYXNzPSJjYW52YXNfZGl2X3BkZiI+CgkJPGRpdiBjbGFzcz0iY2FudmFzX2Rpdl9wZGZfaW5uZXIiPgoJCQk8ZGl2IGNsYXNzPSJtYWluLXdyYXBwZXIgcGFnZV9maXJzdGludHJvIj4KCQkJCTxkaXYgY2xhc3M9ImlubmVyX3dyYXBwZXIiPgoJCQkJCTxkaXYgY2xhc3M9InJvdyBqdXN0aWZ5LWNvbnRlbnQtYmV0d2VlbiI+CgkJCQkJCTxkaXYgY2xhc3M9ImNvbCBoZWFkZXItbG9nbyBoZWFkX2xvZ28xIj48L2Rpdj4KCQkJCQkJPGRpdiBjbGFzcz0iY29sIj4KCQkJCQkJCTxkaXYgY2xhc3M9ImNvbW1vbl9uYW1lX3dyYXBwZXIiPgoJCQkJCQkJCTxoNSBpZD0iZmlyc3RfcG5hbWUiPjwvaDU+CgkJCQkJCQkJPHAgaWQ9ImZpcnN0X3RuYW1lIj48L3A+CgkJCQkJCQk8L2Rpdj4KCQkJCQkJPC9kaXY+CgkJCQkJPC9kaXY+CgkJCQkJPGRpdiBjbGFzcz0ibWFpbl9mb3JtZGV0YWlsIj4KCQkJCQkJPGRpdiBjbGFzcz0ibWFpbi1sb2dvIGhlYWRfbG9nbzIiPjwvZGl2PgoJCQkJCTwvZGl2PgoJCQkJPC9kaXY+CgkJCTwvZGl2PgoJCQk8ZGl2IGNsYXNzPSJtYWluLXdyYXBwZXIgcGFnZV91bml0Ym9va2luZ2RldGFpbHMiPgoJCQkJPGRpdiBjbGFzcz0iaW5uZXJfd3JhcHBlciI+CgkJCQkJPGRpdiBjbGFzcz0icm93IGp1c3RpZnktY29udGVudC1iZXR3ZWVuIj4KCQkJCQkJPGRpdiBjbGFzcz0iY29sIGhlYWRlci1sb2dvIGhlYWRfbG9nbzEiPjwvZGl2PgoJCQkJCQk8ZGl2IGNsYXNzPSJjb2wgaGVhZGVyLWxvZ28gaGVhZF9sb2dvMiI+PC9kaXY+CgkJCQkJPC9kaXY+CgkJCQkJPGRpdiBjbGFzcz0ibWFpbl9mb3JtZGV0YWlsIj4KCQkJCQkJPGRpdiBjbGFzcz0ibWFpbl9ibG9jayB0YWJsZV9ib29raW5nc3JjIj4KCQkJCQkJCTxoMz5CT09LSU5HIFNPVVJDRTwvaDM+CgkJCQkJCQk8dGFibGU+CgkJCQkJCQkJPHRib2R5PgoJCQkJCQkJCQk8dHI+CgkJCQkJCQkJCQk8dGQ+U291cmNlPC90ZD4KCQkJCQkJCQkJCTx0ZCBpZD0iaW9fc291cmNlIj48L3RkPgoJCQkJCQkJCQk8L3RyPgoJCQkJCQkJCQk8dHIgaWQ9InRyX2lvX25hbSI+CgkJCQkJCQkJCQk8dGQ+TmFtZTwvdGQ+CgkJCQkJCQkJCQk8dGQgaWQ9ImlvX25hbWUiIGNvbHNwYW49IjMiPjwvdGQ+CgkJCQkJCQkJCTwvdHI+CgkJCQkJCQkJCTx0ciBpZD0idHJfaW9fcmVyYV9ubyI+CgkJCQkJCQkJCQk8dGQ+UkVSQSBSZWdpc3RyYXRpb24gTm8uPC90ZD4KCQkJCQkJCQkJCTx0ZCBpZD0iaW9fcmVyYV9ubyI+PC90ZD4KCQkJCQkJCQkJPC90cj4KCQkJCQkJCQkJPHRyIGlkPSJ0cl9pb19jcF9tb2JpbGUiPgoJCQkJCQkJCQkJPHRkPlBob25lPC90ZD4KCQkJCQkJCQkJCTx0ZCBpZD0iaW9fY3BfbW9iaWxlIj48L3RkPgoJCQkJCQkJCQk8L3RyPgoJCQkJCQkJCTwvdGJvZHk+CgkJCQkJCQk8L3RhYmxlPgoJCQkJCQk8L2Rpdj4KCQkJCQkJPGRpdiBjbGFzcz0ibWFpbl9ibG9jayB0YWJsZV91bml0ZGV0YWlscyI+CgkJCQkJCQk8aDM+VU5JVCBERVRBSUxTPC9oMz4KCQkJCQkJCTx0YWJsZT4KCQkJCQkJCQk8dGJvZHk+CgkJCQkJCQkJCTx0cj4KCQkJCQkJCQkJCTx0ZD5Qcm9qZWN0IE5hbWU6PC90ZD4KCQkJCQkJCQkJCTx0ZCBpZD0icHJvamVjdF9uYW1lIj48L3RkPgoJCQkJCQkJCQkJPHRkPlR5cGUgb2YgQXBhcnRtZW50OjwvdGQ+CgkJCQkJCQkJCQk8dGQgaWQ9InR5cGVfb2ZfYXBhcnRtZW50Ij48L3RkPgoJCQkJCQkJCQk8L3RyPgoJCQkJCQkJCQk8dHI+CgkJCQkJCQkJCQk8dGQ+VG93ZXI6PC90ZD4KCQkJCQkJCQkJCTx0ZCBpZD0idG93ZXIiPjwvdGQ+CgkJCQkJCQkJCQk8dGQ+Rmxvb3I6PC90ZD4KCQkJCQkJCQkJCTx0ZCBpZD0iZmxvb3Jfbm8iPjwvdGQ+CgkJCQkJCQkJCTwvdHI+CgkJCQkJCQkJCTx0cj4KCQkJCQkJCQkJCTx0ZD5BcGFydG1lbnQgTm86PC90ZD4KCQkJCQkJCQkJCTx0ZCBpZD0iYXBhcnRtZW50X25vIj48L3RkPgoJCQkJCQkJCQkJPHRkPlBhcmtpbmcgUmVxdWVzdGVkOjwvdGQ+CgkJCQkJCQkJCQk8dGQgaWQ9InBhcmtpbmdfcmVxdWVzdGVkIj48L3RkPgoJCQkJCQkJCQk8L3RyPgoJCQkJCQkJCQk8dHI+CgkJCQkJCQkJCQk8dGQ+Q2FycGV0IEFyZWEgKFNxIGZ0Lik6PC90ZD4KCQkJCQkJCQkJCTx0ZCBpZD0iY2FycGV0X2FyZWEiPjwvdGQ+CgkJCQkJCQkJCQk8dGQ+QW5jaWxsYXJ5IEFyZWEoU3EuIGZ0KTo8L3RkPgoJCQkJCQkJCQkJPHRkIGlkPSJhbmNpbGxhcnlfYXJlYSI+PC90ZD4KCQkJCQkJCQkJPC90cj4KCQkJCQkJCQkJPHRyPgoJCQkJCQkJCQkJPHRkPlRvdGFsIEFyZWEgKFNxLiBmdCk6PC90ZD4KCQkJCQkJCQkJCTx0ZCBpZD0idG90YWxfYXJlYSI+PC90ZD4KCQkJCQkJCQkJPC90cj4KCQkJCQkJCQkJPHRyPgoJCQkJCQkJCQkJPHRkIGNvbHNwYW49IjQiPgoJCQkJCQkJCQkJCTxkaXYgY2xhc3M9ImFncnRfdmxhdXUiPgoJCQkJCQkJCQkJCQk8aDQ+QWdyZWVtZW50IFZhbHVlKElOUik6PC9oND4KCQkJCQkJCQkJCQkJPHA+CgkJCQkJCQkJCQkJCQlScy4gPHNwYW4gaWQ9ImZsYXRfY29zdCI+IC08L3NwYW4+Ly0KCQkJCQkJCQkJCQkJPC9wPgoJCQkJCQkJCQkJCQk8cD4KCQkJCQkJCQkJCQkJCSg8c3BhbiBpZD0iYWd2YWxfd29yZHMiPi08L3NwYW4+KQoJCQkJCQkJCQkJCQk8L3A+CgkJCQkJCQkJCQkJPC9kaXY+CgkJCQkJCQkJCQk8L3RkPgoJCQkJCQkJCQk8L3RyPgoJCQkJCQkJCTwvdGJvZHk+CgkJCQkJCQk8L3RhYmxlPgoJCQkJCQk8L2Rpdj4KCQkJCQk8L2Rpdj4KCQkJCQk8ZGl2IGNsYXNzPSJjb21tb25fZm9vdGVyIHNpZ25fYmxvY2tzX3dyYXBwZXIiPjwvZGl2PgoJCQkJPC9kaXY+CgkJCTwvZGl2PgoJCQk8ZGl2IGNsYXNzPSJtYWluLXdyYXBwZXIgcGFnZV9zZWxmZGVjbGFyYXRpb24iPgoJCQkJPGRpdiBjbGFzcz0iaW5uZXJfd3JhcHBlciI+CgkJCQkJPGRpdiBjbGFzcz0icm93IGp1c3RpZnktY29udGVudC1iZXR3ZWVuIj4KCQkJCQkJPGRpdiBjbGFzcz0iY29sIGhlYWRlci1sb2dvIGhlYWRfbG9nbzEiPjwvZGl2PgoJCQkJCQk8ZGl2IGNsYXNzPSJjb2wgaGVhZGVyLWxvZ28gaGVhZF9sb2dvMiI+PC9kaXY+CgkJCQkJPC9kaXY+CgkJCQkJPGgyPlNlbGYtRGVjbGFyYXRpb24gRm9ybTwvaDI+CgkJCQkJPGRpdiBjbGFzcz0ibWFpbl9mb3JtZGV0YWlsIj48L2Rpdj4KCQkJCQk8aDM+U2lnbmF0dXJlIG9mIEFwcGxpY2FudC9zPC9oMz4KCQkJCQk8ZGl2IGNsYXNzPSJjb21tb25fZm9vdGVyIHNpZ25fYmxvY2tzX3dyYXBwZXIiPjwvZGl2PgoJCQkJCTxkaXYgY2xhc3M9ImRhdGVfd3JhcHBlciI+CgkJCQkJCTxwPgoJCQkJCQkJPHN0cm9uZz5EYXRlOjwvc3Ryb25nPjEwLjAyLjIzCgkJCQkJCTwvcD4KCQkJCQk8L2Rpdj4KCQkJCTwvZGl2PgoJCQk8L2Rpdj4KCQkJPGRpdiBjbGFzcz0ibWFpbi13cmFwcGVyIHBhZ2VfZ3RuY2RldGFpbHMiPgoJCQkJPGRpdiBjbGFzcz0iaW5uZXJfd3JhcHBlciI+CgkJCQkJPGRpdiBjbGFzcz0icm93IGp1c3RpZnktY29udGVudC1iZXR3ZWVuIj4KCQkJCQkJPGRpdiBjbGFzcz0iY29sIGhlYWRlci1sb2dvIGhlYWRfbG9nbzEiPjwvZGl2PgoJCQkJCQk8ZGl2IGNsYXNzPSJjb2wgaGVhZGVyLWxvZ28gaGVhZF9sb2dvMiI+PC9kaXY+CgkJCQkJPC9kaXY+CgkJCQkJPGRpdiBjbGFzcz0ibWFpbl9mb3JtZGV0YWlsIj4KCQkJCQkJPHA+UkVSQSBSZWdpc3RyYXRpb24gTm9zLiBQNTE4MDAwMzM5ODQsIFA1MTgwMDAzMzYxOCwKCQkJCQkJCVA1MTgwMDAzNDA1MzwvcD4KCQkJCQkJPGgyPmdlbmVyYWwgdGVybXMgYW5kIGNvbmRpdGlvbnM8L2gyPgoJCQkJCQk8ZGl2IGNsYXNzPSJndG5jZGV0YWlsc19saXN0X3dyYXBwZXIiPgoJCQkJCQkJPGg0PjEuIEFwcGxpY2F0aW9uPC9oND4KCQkJCQkJCTx1bCBjbGFzcz0iZ3RuY2RldGFpbHNfbGlzdCI+CgkJCQkJCQkJPGxpIHN0eWxlPSJmb250LXNpemU6IDlweCAhaW1wb3J0YW50OyI+KGEpIFRoaXMgaXMgYW4KCQkJCQkJCQkJYXBwbGljYXRpb24gbWFkZSBieSB0aGUgdW5kZXJzaWduZWQgYXBwbGljYW50L3MgKCJBcHBsaWNhbnQiKQoJCQkJCQkJCQlpbiByZXNwZWN0IG9mIEFwYXJ0bWVudCAoUmVzaWRlbnRpYWwpICgiQXBhcnRtZW50IikgYXMgcGVyIHRoZQoJCQkJCQkJCQlkZXRhaWxzIGluIEFubmV4dXJlIEEuIFRoaXMgYXBwbGljYXRpb24gZG9lcyBub3QgY29uZmVyIG9yCgkJCQkJCQkJCWNvbnN0aXR1dGUgYW55IHJpZ2h0IGluIHRoZSBBcGFydG1lbnQgb3IgaW4gdGhlIFByb2plY3QsIG9yIHRoZQoJCQkJCQkJCQlMYXJnZXIgTGFuZCAoYXMgZGVmaW5lZCBpbiB0aGUgZHJhZnQgYWdyZWVtZW50IHVwbG9hZGVkIGluCgkJCQkJCQkJCU1haGFSRVJBIHdlYnNpdGUpIGluIGFueSBtYW5uZXIgd2hhdHNvZXZlciwgaW4gZmF2b3VyIG9mIHRoZQoJCQkJCQkJCQlBcHBsaWNhbnQuPC9saT4KCQkJCQkJCQk8bGkgc3R5bGU9ImZvbnQtc2l6ZTogOXB4ICFpbXBvcnRhbnQ7Ij4oYikgVGhlIGRldGFpbHMgb2YKCQkJCQkJCQkJdGhlIFByb2plY3QgdW5kZXIgZGV2ZWxvcG1lbnQgYXJlIHVwbG9hZGVkIC8gYXZhaWxhYmxlIG9uIHRoZQoJCQkJCQkJCQl3ZWJzaXRlIGh0dHBzOi8vbWFoYXJlcmEubWFoYW9ubGluZS5nb3YuaW4sIGFzIHBlciB0aGUgUmVhbAoJCQkJCQkJCQlFc3RhdGUgKFJlZ3VsYXRpb24gJiBEZXZlbG9wbWVudCkgQWN0LCAyMDE2ICgiQWN0IikuPC9saT4KCQkJCQkJCQk8bGkgc3R5bGU9ImZvbnQtc2l6ZTogOXB4ICFpbXBvcnRhbnQ7Ij4oYykgVGhlIEFwcGxpY2FudAoJCQkJCQkJCQloYXMgbWFkZSB0aGlzIGFwcGxpY2F0aW9uIHdpdGggZnVsbCBLbm93bGVkZ2UgYW5kIGhhcyB2ZXJpZmllZAoJCQkJCQkJCQlhbGwgdGhlIGRldGFpbHMgb2YgdGhlIFByb2plY3QgaW5jbHVkaW5nIHRoZSB0ZXJtcyBhbmQKCQkJCQkJCQkJY29uZGl0aW9ucyBpbiB0aGUgZHJhZnQgQWdyZWVtZW50IGZvciBzYWxlIHVwbG9hZGVkIG9uIHRoZQoJCQkJCQkJCQlhZm9yZXNhaWQgd2Vic2l0ZS48L2xpPgoJCQkJCQkJCTxsaSBzdHlsZT0iZm9udC1zaXplOiA5cHggIWltcG9ydGFudDsiPihkKSBUaGUgQXBwbGljYW50CgkJCQkJCQkJCXVuZGVydGFrZXMgdG8gYWJpZGUgYnkgYWxsIGxhd3MsIHJ1bGVzLCBhbmQgcmVndWxhdGlvbnMsIGluCgkJCQkJCQkJCWZvcmNlLCBhbmQgdGhlc2UgdGVybXMgYW5kIGNvbmRpdGlvbnM8L2xpPgoJCQkJCQkJCTxsaSBzdHlsZT0iZm9udC1zaXplOiA5cHggIWltcG9ydGFudDsiPihlKVRoZSBBcHBsaWNhbnQsIG9uCgkJCQkJCQkJCWJlaW5nIGZ1bGx5IGF3YXJlIGFuZCBzYXRpc2ZpZWQgd2l0aCB0aGUgc2FtZSwgaGFzIGFncmVlZCwKCQkJCQkJCQkJY29uZmlybWVkIGFuZCBzdWJtaXR0ZWQgdGhpcyBhcHBsaWNhdGlvbiwgdG8gTGFyc2VuIGFuZCBUb3Vicm8KCQkJCQkJCQkJTGltaXRlZCAodGhlIENvbXBhbnkpLCBmb3IgYm9va2luZyB0aGUgQXBhcnRtZW50LjwvbGk+CgkJCQkJCQk8L3VsPgoJCQkJCQkJPGg0PjIuIEFwcGxpY2F0aW9uIFByb2NlZHVyZTwvaDQ+CgkJCQkJCQk8dWwgY2xhc3M9Imd0bmNkZXRhaWxzX2xpc3QiPgoJCQkJCQkJCTxsaSBzdHlsZT0iZm9udC1zaXplOiA5cHggIWltcG9ydGFudDsiPihhKSBUaGUgQXBwbGljYW50IHRvCgkJCQkJCQkJCXN1Ym1pdCB0aGUgZHVseS1maWxsZWQgQXBwbGljYXRpb24gRm9ybSB0b2dldGhlciB3aXRoIGEgRGVtYW5kCgkJCQkJCQkJCURyYWZ0IC8gUGF5IE9yZGVyIC8gQ2hlcXVlIC8gTkVGVCAvIFJUR1MsIGZvciBhbiBhbW91bnQgb2YgdGhlCgkJCQkJCQkJCUFwcGxpY2F0aW9uIE1vbmV5LCBhcyBpbmRpY2F0ZWQgaW4gUGF5bWVudCBTY2hlZHVsZSBhdCBBbm5leHVyZQoJCQkJCQkJCQlCIGhlcmV0by48L2xpPgoJCQkJCQkJCTxsaSBzdHlsZT0iZm9udC1zaXplOiA5cHggIWltcG9ydGFudDsiPihiKSBUaGUgQ29tcGFueSB3aWxsCgkJCQkJCQkJCWlzc3VlIGFuIGFja25vd2xlZGdlbWVudCBvZiByZWNlaXB0IGZvciB0aGUgc2FpZCBBcHBsaWNhdGlvbgoJCQkJCQkJCQlNb25leS48L2xpPgoJCQkJCQkJCTxsaSBzdHlsZT0iZm9udC1zaXplOiA5cHggIWltcG9ydGFudDsiPihjKSBUaGUgQXBwbGljYW50CgkJCQkJCQkJCXNoYWxsIHBheSB1cCB0byAxMCUgKHRlbiBwZXJjZW50KSBvZiB0aGUgdG90YWwgY29uc2lkZXJhdGlvbgoJCQkJCQkJCQko4oCcRWFybmVzdCBNb25leSIpLCB3aXRoaW4gMzAgZGF5cywgb2YgdGhpcyBBcHBsaWNhdGlvbiBhbmQKCQkJCQkJCQkJdGhlcmUgYWZ0ZXIgZXhlY3V0ZSBhbmQgcmVnaXN0ZXIgdGhlIEFncmVlbWVudCBmb3IgU2FsZS48L2xpPgoJCQkJCQkJCTxsaSBzdHlsZT0iZm9udC1zaXplOiA5cHggIWltcG9ydGFudDsiPihkKSBUaGUgQXBwbGljYW50CgkJCQkJCQkJCXNoYWxsIG1ha2UgYWxsIHBheW1lbnRzLCBpbiByZXNwZWN0IHRoZXJlb2YsIGJ5IERlbWFuZCBEcmFmdCAvCgkJCQkJCQkJCVBheSBPcmRlciAvIENoZXF1ZSAvIE5FRlQgLyBSVEdTLjwvbGk+CgkJCQkJCQk8L3VsPgoJCQkJCQkJPGg0PjMuIEFjY2VwdGFuY2UgLyBSZWplY3Rpb24gb2YgQXBwbGljYXRpb248L2g0PgoJCQkJCQkJPHVsIGNsYXNzPSJndG5jZGV0YWlsc19saXN0Ij4KCQkJCQkJCQk8bGkgc3R5bGU9ImZvbnQtc2l6ZTogOXB4ICFpbXBvcnRhbnQ7Ij4oYSkgQWxsIGFwcGxpY2F0aW9ucwoJCQkJCQkJCQlzaGFsbCBiZSBjb25zaWRlcmVkIGJ5IHRoZSBDb21wYW55IG9ubHkgYWZ0ZXIgdGhlIHJlYWxpc2F0aW9uCgkJCQkJCQkJCW9mIHRoZSBBcHBsaWNhdGlvbiBNb25leS48L2xpPgoJCQkJCQkJCTxsaSBzdHlsZT0iZm9udC1zaXplOiA5cHggIWltcG9ydGFudDsiPihiKSBUaGUgQ29tcGFueQoJCQkJCQkJCQlyZXNlcnZlcyBhbGwgcmlnaHRzIGFuZCBjb21wbGV0ZSBkaXNjcmV0aW9uIHRvIHJlamVjdCB0aGUKCQkJCQkJCQkJYXBwbGljYXRpb24gd2l0aG91dCBhc3NpZ25pbmcgYW55IHJlYXNvbiB3aGF0c29ldmVyLjwvbGk+CgkJCQkJCQkJPGxpIHN0eWxlPSJmb250LXNpemU6IDlweCAhaW1wb3J0YW50OyI+KGMpIEluIHRoZSBldmVudCB0aGUKCQkJCQkJCQkJQXBwbGljYW50IGZhaWxzIHRvIHBheSB0aGUgRWFybmVzdCBNb25leSwgd2l0aGluIDMwIGRheXMgYW5kIGFzCgkJCQkJCQkJCXBlciB0aGUgUGF5bWVudCBTY2hlZHVsZSBhbm5leGVkIGhlcmV0bywgdGhlIENvbXBhbnkgYXQgaXRzCgkJCQkJCQkJCWRpc2NyZXRpb24gZXhlcmNpc2UgdGhlIG9wdGlvbiB0byBjYW5jZWwgdGhlIGFwcGxhdGlvbiB3aXRob3V0CgkJCQkJCQkJCWFueSBmdXJ0aGVyIHJlZmVyZW5jZSB0byB0aGUgQXBwbGljYW50IGFuZCBmb3JmZWl0IHRoZQoJCQkJCQkJCQlBcHBsaWNhdGlvbiBNb25leS48L2xpPgoJCQkJCQkJCTxsaSBzdHlsZT0iZm9udC1zaXplOiA5cHggIWltcG9ydGFudDsiPihkKSBJbiB0aGUgZXZlbnQgdGhlCgkJCQkJCQkJCUNvbXBhbnkgZGVjaWRlcyB0byByZWplY3QgdGhlIGFwcGxpY2F0aW9uLCB3aXRoaW4gNjAuZGF5cyBmcm9tCgkJCQkJCQkJCXRoZSByZWNlaXB0IG9mIHRoZSBFYXJuZXN0IE1vbmV5LCB0aGUgQ29tcGFueSBzaGFsbCByZWZ1bmQgdGhlCgkJCQkJCQkJCWFtb3VudHMgcmVjZWl2ZWQgZnJvbSB0aGUgQXBwbGljYW50LiB3aXRob3V0IGludGVyZXN0LCB3aXRoaW4KCQkJCQkJCQkJMzAgZGF5cyBmcm9tIHRoZSBkYXRlIG9mIHRoZSByZWplY3Rpb24gb2YgdGhlIGFwcGxpY2F0aW9uLjwvbGk+CgkJCQkJCQkJPGxpIHN0eWxlPSJmb250LXNpemU6IDlweCAhaW1wb3J0YW50OyI+KGUpIE9uIGFjY2VwdGFuY2Ugb2YKCQkJCQkJCQkJdGhlIGFwcGxpY2F0aW9uLCB0aGUgQ29tcGFueSBzaGFpbCBjYWxsIHVwb24gdGhlIEFwcGxpY2FudCB0bwoJCQkJCQkJCQlleGVjdXRlIHRoZSBBZ3JlZW1lbnQgZm9yIFNhbGUsIGFzIHBlciB0aGUgcHJvdmlzaW9ucyBvZiB0aGUKCQkJCQkJCQkJQWN0LiBUaGUgQXBwbGljYW50IHVuZGVyc3RhbmRzLCBhZ3JlZXMsIHVuZGVydGFrZXMsIGFuZAoJCQkJCQkJCQljb25maXJtcyB0byBleGVjdWxlIHRoZSBzYWlkIEFncmVlbWVudCBmb3IgU2FsZSwgYXMgcGVyIHRoZQoJCQkJCQkJCQlwcm92aXNpb25zIG9mIHRoZSBBY3QuPC9saT4KCQkJCQkJCTwvdWw+CgkJCQkJCQk8aDQ+NC4gUGF5bWVudHMgYW5kIFRheGVzPC9oND4KCQkJCQkJCTx1bCBjbGFzcz0iZ3RuY2RldGFpbHNfbGlzdCI+CgkJCQkJCQkJPGxpIHN0eWxlPSJmb250LXNpemU6IDlweCAhaW1wb3J0YW50OyI+KGEpIFRoZSBBcHBsaWNhbnQKCQkJCQkJCQkJc2hhbGwgYmUgcmVzcG9uc2libGUgdG8gbWFrZSBwYXltZW50cyBhcyBwZXIgdGhlIFBheW1lbnQKCQkJCQkJCQkJU2NoZWR1bGUsIGluIHRpbWVseSBtYW5uZXIsIGluIGFjY29yZGFuY2Ugd2l0aCB0aGUgQWN0ICh0aW1lCgkJCQkJCQkJCWFuZCBwYXltZW50IGJlaW5nIG9mIGVzc2VuY2UpLjwvbGk+CgkJCQkJCQkJPGxpIHN0eWxlPSJmb250LXNpemU6IDlweCAhaW1wb3J0YW50OyI+KGIpIFRoZSBhbW91bnQKCQkJCQkJCQkJbWVudGlvbmVkIGluIEFubmV4dXJlIEEgZG9lcyBub3QgaW5jbHVkZSBHb29kcyAmIFNlcnZpY2VzIFRheAoJCQkJCQkJCQlhbmQgYW55IG90aGVyIHRheGVzL2xldmllcywgYm90aCBwcmVzZW50IGFuZCBmdXR1cmUsIGFzIG1heSBiZQoJCQkJCQkJCQlhcHBsaWNhYmxlLCBmcm9tIHRpbWUgdG8gdGltZS48L2xpPgoJCQkJCQkJCTxsaSBzdHlsZT0iZm9udC1zaXplOiA5cHggIWltcG9ydGFudDsiPihjKSAiVGhlIEFwcGxpY2FudCwKCQkJCQkJCQkJYWZ0ZXIgZXhlY3V0aW9uIG9mIHRoZSBBZ3JlZW1lbnQgZm9yIFNhbGUsIGFzIHBlciB0aGUgQWN0LAoJCQkJCQkJCQlzaGFsbCBiZSByZXNwb25zaWJsZSB0byBtYWtlIGFsbCBuZWNlc3NhcnkgcGF5bWVudHMsIGluIHRoZQoJCQkJCQkJCQltYW5uZXIgYW5kIHdpdGhpbiB0aGUgdGltZSBhcyBzcGVjaWZpZWQgaW4gdGhlIHNhaWQgQWdyZWVtZW50CgkJCQkJCQkJCWZvciBTYWxlIi48L2xpPgoJCQkJCQkJCTxsaSBzdHlsZT0iZm9udC1zaXplOiA5cHggIWltcG9ydGFudDsiPihkKSAiVGhlIG90aGVyCgkJCQkJCQkJCWNoYXJnZXMgdG93YXJkcyB0aGUgQXBhcnRtZW50IHNoYWxsIGJlIHNlcGFyYXRlbHkgY2hhcmdlZCBhcwoJCQkJCQkJCQlpbmRpY2F0ZWQgaW4gQW5uZXh1cmUgQiBoZXJldG8uIjwvbGk+CgkJCQkJCQk8L3VsPgoJCQkJCQkJPGg0PjUuIERlZmF1bHQgYW5kIENhbmNlbGxhdGlvbjwvaDQ+CgkJCQkJCQk8dWwgY2xhc3M9Imd0bmNkZXRhaWxzX2xpc3QiPgoJCQkJCQkJCTxsaSBzdHlsZT0iZm9udC1zaXplOiA5cHggIWltcG9ydGFudDsiPihhKSBUaGUgQXBwbGljYW50CgkJCQkJCQkJCXNoYWxsIGJlIGxpYWJsZSBmbyBwYXkgaW50ZXJlc3QsIGF0IHN1Y2ggcmF0ZSBhcyBtYXkgYmUKCQkJCQkJCQkJcHJlc2NyaWJlZCB1bmRlciB0aGUgQWN0IGFuZCB0aGUgUnVsZXMgJiBSZWd1bGF0aW9ucwoJCQkJCQkJCQl0aGVyZXVuZGVyLCBmb3IgYW55IGRlbGF5IGluIHBheW1lbnQgdG93YXJkcyBhbnkgYW1vdW50cyBvcgoJCQkJCQkJCQljaGFyZ2VzIG9yIHRheGVzLCBwYXlhYmxlIGluIHJlc3BlY3Qgb2YgdGhlIEFwYXJpbWVudCBmcm9tIHRoZQoJCQkJCQkJCQlkdWUgZGF0ZSwgZm8gdGhlIENvbXBhbnkuPC9saT4KCQkJCQkJCQk8bGkgc3R5bGU9ImZvbnQtc2l6ZTogOXB4ICFpbXBvcnRhbnQ7Ij4oYikgQWxsIGRlbGF5ZWQKCQkJCQkJCQkJcGF5bWVudHMgcmVjZWl2ZWQgc2hhbGwgYmUgZmlyc3QgYXBwbGllZCB0b3dhcmRzIGFwcGxpY2FibGUKCQkJCQkJCQkJaW50ZXJlc3QgcGF5YWJsZSwgc2Vjb25kIHRvd2FyZHMgdGF4ZXMgcGF5YWJsZSwgaWYgYW55LCBhbmQKCQkJCQkJCQkJbGFzdGx5IHRvd2FyZHMgdGhlIGluc3RhbG1lbnRzIHBheWFibGUgYXMgcGVyIHRoZSBQYXltZW50CgkJCQkJCQkJCVNjaGVkdWxlLjwvbGk+CgkJCQkJCQkJPGxpIHN0eWxlPSJmb250LXNpemU6IDlweCAhaW1wb3J0YW50OyI+KGMpIE5vdHdpdGhzdGFuZGluZwoJCQkJCQkJCQlhbnl0aGluZyBoZXJlaW4gY29udGFpbmVkLCB0aGUgQXBwbGljYW50IHNoYWxsIGFsd2F5cyBrZWVwIHRoZQoJCQkJCQkJCQlDb21wYW55IGluZGVtbmlmaWVkIGFnYWluc3QgcGF5bWVudCBvZiBhbGwgdGF4ZXMgYW5kIGFueSBvdGhlcgoJCQkJCQkJCQl0YXhlcyAvIGxldmllcywgYm90aCBwcmVzZW50IGFuZCBmdXR1cmUsIGFzIG1heSBiZSBhcHBsaWNhYmxlCgkJCQkJCQkJCWZyb20gdGltZSB0byB0aW1lLCBhcyBhbHNvIGZvciBpbnRlcmVzdCwgcGVuYWx0eSwgbG9zc2VzLCBjb3N0CgkJCQkJCQkJCWFuZCBjb25zZXF1ZW5jZXMsIHN1ZmZlcmVkIGJ5IGFueSB0eXBlIG9mIHJlY292ZXJ5IHByb2NlZWRpbmdzCgkJCQkJCQkJCWZvciBhbnkgZmF4ZXMuPC9saT4KCQkJCQkJCQk8bGkgc3R5bGU9ImZvbnQtc2l6ZTogOXB4ICFpbXBvcnRhbnQ7Ij4oZClBZnRlciB0aGUgcGF5bWVudAoJCQkJCQkJCQlvZiBFYXJuZXN0IE1vbmV5LCBpZiB0aGUgQXBwbGljYW50IGZhaWxzIHRvIHBheSB0aGUgYW1vdW50cyBhcwoJCQkJCQkJCQlwZXIgdGhlIFBheW1lbnQgU2NoZWR1bGUgb3IgY29tbWl0cyBhbnkgYnJlYWNoIG9mIHRoZSB0ZXJtcyBhbmQKCQkJCQkJCQkJY29uZGl0aW9ucyBoZXJlb2Ygb3IgYW55IG90aGVyIHRlcm1zIGFuZCBjb25kaXRpb25zIGFncmVlZCB1cG9uCgkJCQkJCQkJCWJ5IHRoZSBBcHBsaWNhbnQsIGluY2x1ZGluZyB0aW1lbHkgcmVnaXN0cmF0aW9uIG9mIHRoZQoJCQkJCQkJCQlhZ3JlZW1lbnQgZm9yIHNhbGUgb3IgcmVxdWVzdCBmb3IgY2FuY2VsbGF0aW9uIGZyb20gdGhlCgkJCQkJCQkJCUFwcGxpY2FudCwgdGhlbiB0aGUgY29tcGFueSBzaGFsbCBhdCBpdHMgc29sZSBkaXNjcmV0aW9uCgkJCQkJCQkJCWV4ZXJjaXNlIHRoZSBvcHRpb24gdG8gY2FuY2VsIC8gdGVybWluYXRlIHRoZSBib29raW5nCgkJCQkJCQkJCWFwcGxpY2F0aW9uIGZvcm0gYW5kIGZvcmZlaXQgdGhlIEVhcm5lc3QgbW9uZXksIGRlZHVjdAoJCQkJCQkJCQlicm9rZXJhZ2UgY2hhcmdlcyBhbmQgYW55IG90aGVyIGFtb3VudCB3aGljaCBtYXkgYmUgcGF5YWJsZSBmb3IKCQkJCQkJCQkJdGhlIGNvbXBhbnksIGlycmVzcGVjdGl2ZSB3aGV0aGVyIHRoZSBhZ3JlZW1lbnQgZm9yIHNhbGUgaXMKCQkJCQkJCQkJZXhlY3V0ZWQuIEluIGNhc2Ugb2YgYW55IGJhbGFuY2UgYW1vdW50IChhZnRlciBhcHByb3ByaWF0ZQoJCQkJCQkJCQlkZWR1Y3Rpb25zKSBpcyB0byBiZSByZWZ1bmRlZCBieSB0aGUgQ29tcGFueSBhdCBpdHMgc29sZQoJCQkJCQkJCQlkaXNjcmV0aW9uLCB0aGUgc2FtZSBtYXkgYmUgcGFpZCBmbyB0aGUgRmlyc3QgQXBwbGljYW50IGJ5IHdheQoJCQkJCQkJCQlvZiBDaGVxdWUgb3IgdGhyb3VnaCBORUZUIC8gUlRHUyAvIGluIHRoZSBCYW5rIEFjY291bnQgb2YgdGhlCgkJCQkJCQkJCUZpcnN0IEFwcGxpY2FudCBhcyBwZXIgdGhlIGJhbmsgZGV0YWlscyB1cGRhdGVkIHdpdGggdGhlCgkJCQkJCQkJCUNvbXBhbnkgb3IgdGhlIHNhbWUgbWF5IGJlIGtlcHQgaW4gRml4ZWQgRGVwb3NpdCAoRkQpLCB1bnRpbAoJCQkJCQkJCQljb21wbGV0aW9uIG9mIHRoZSBmb3JtYWxpdGllcyBvZiBjYW5jZWxsYXRpb24gKGlmIGFueSku4oCdPC9saT4KCQkJCQkJCQk8bGkgc3R5bGU9ImZvbnQtc2l6ZTogOXB4ICFpbXBvcnRhbnQ7Ij4oZSkgUG9zdAoJCQkJCQkJCQlyZWdpc3RyYXRpb24gb2YgdGhlIEFncmVlbWVudCBmb3IgU2FsZSwgdGhlIHRlcm1zIGFuZCBjb25kaXRpb24KCQkJCQkJCQkJYXMgcGVyIHRoZSByZWdpc3RlcmVkIEFncmVlbWVudCBmb3IgU2FsZSBzaGFsbCBiZSBhcHBsaWNhYmxlCgkJCQkJCQkJCSh0aGUgZm9ybWF0IG9mIEFncmVlbWVudCBmb3IgU2FsZSBoYXMgYmVlbiB1cGxvYWRlZCBvbiBNYWhhUmVyYQoJCQkJCQkJCQl3ZWJzaXRlKS48L2xpPgoJCQkJCQkJPC91bD4KCQkJCQkJCTxoND42LiBHZW5lcmFsPC9oND4KCQkJCQkJCTx1bCBjbGFzcz0iZ3RuY2RldGFpbHNfbGlzdCI+CgkJCQkJCQkJPGxpIHN0eWxlPSJmb250LXNpemU6IDlweCAhaW1wb3J0YW50OyI+KGEpIEluZnJhc3RydWN0dXJlCgkJCQkJCQkJCWxpa2Ugc2V3ZXJhZ2UsIGRyYWluYWdlLCBhcHByb2FjaCByb2FkLCBvdGhlciBjb21tb24gYW1lbml0aWVzCgkJCQkJCQkJCWFuZCBmYWNpbGl0aWVzIGluIHRoZSBQcm9qZWN0IHNoYWxsIGJlIGRldmVsb3BlZCBhbmQgaGFuZGVkCgkJCQkJCQkJCW92ZXIsIGFzIGRpc2Nsb3NlZCBieSB0aGUgQ29tcGFueSBvbiB0aGUgd2Vic2l0ZSBtZW50aW9uZWQKCQkJCQkJCQkJYWJvdmUuPC9saT4KCQkJCQkJCQk8bGkgc3R5bGU9ImZvbnQtc2l6ZTogOXB4ICFpbXBvcnRhbnQ7Ij4oYikgU3ViamVjdCB0bwoJCQkJCQkJCQlvYnRhaW5pbmcgb2YgcmVxdWlzaXRlIGFwcHJvdmFscyBmcm9tIHRoZSBjb25jZXJuZWQKCQkJCQkJCQkJYXV0aG9yaXRpZXMsIHRoZSBQcm9tb3RlcnMgc2hhbGwgaGF2ZSB0aGUgcmlnaHQgdG8gaW5jcmVhc2UgLwoJCQkJCQkJCQlkZWNyZWFzZSB0aGUgZmxvb3JzIC8gcmVzaWRlbnRpYWwgbGV2ZWxzIGFib3ZlIC8gYmVsb3cgMjYKCQkJCQkJCQkJZmxvb3JzIG9mIHRoZSBCdWlsZGluZyB2aXouIENBRkVSIEFUIEwmVCBSRUFMVFkgRUxJWElSIFJFU0VSVkUKCQkJCQkJCQkJYW5kIElPUkEgQVQgTCZUIFJFQUxUWSBFTElYSVIgUkVTRVJWRSBhbmQgYWJvdmUgLyBiZWxvdyAyNQoJCQkJCQkJCQlmbG9vcnMgb2YgdGhlIEJ1aWxkaW5nIHZpei4gQVRUSElTIEFUIEwmVCBSRUFMVFkgRUxJWElSIFIKCQkJCQkJCQkJRVNFUlZFLCBmb3Igd2hpY2ggdGhlIEFwcGxpY2FudCBoZXJlYnkgZ2l2ZXMgdGhlIGV4cGxpY2l0CgkJCQkJCQkJCWNvbnNlbnQgdG8gdGhlIFByb21vdGVycy4gaW4gY2FzZSB0aGUgUHJvbW90ZXJzIGRldmVsb3AgLwoJCQkJCQkJCQljb25zdHJ1Y3Qgc3VjaCBhZGRpdGlvbmFsIGZsb29ycyAvIHJlc2lkZW50aWFsIGxldmVscyBhYm92ZSAyNgoJCQkJCQkJCQlmbG9vcnMgb2YgdGhlIEJ1aWxkaW5nIHZpei4gQ0FGRVIgQVQgTCZUIFJFQUxUWSBFTElYSVIgUkVTRVJWRQoJCQkJCQkJCQlhbmQgSU9SQSBBVCBMJlQgUkVBTFRZIEVMSVhJUiBSRVNFUlZFIGFuZCBhYm92ZSAyNSBmbG9vcnMgb2YKCQkJCQkJCQkJdGhlIEJ1aWxkaW5nIHZpeiBBVFRISVMgQVQgTCZUIFJFQUxUWSBFTElYSVIgUkVTRVJWRSwgdGhlCgkJCQkJCQkJCVByb21vdGVycyBoYXZlIHRoZSByaWdodCB0byByZWdpc3RlciB3aXRoIFJFUkEsIHRoZSBhcGFydG1lbnRzCgkJCQkJCQkJCWFib3ZlIDI2IGZsb29ycyBvZiB0aGUgQnVpbGRpbmcsIHZpei4gQ0FGRVIgQVQgTCZUIFJFQUxUWQoJCQkJCQkJCQlFTElYSVIgUkVTRVJWRSBhbmQgSU9SQSBBVCBMJlQgUkVBTFRZIEVMSVhJUiBSRVNFUlZFIGFuZCBhYm92ZQoJCQkJCQkJCQkyNSBmbG9vcnMgb2YgdGhlIEJ1aWxkaW5nLCB2aXogQVRUSElTIEFUIEwmVCBSRUFMVFkgRUxJWElSCgkJCQkJCQkJCVJFU0VSVkUsIGVpdGhlciBhcyBhIHNlcGFyYXRlIHJlYWwgZXN0YXRlIHByb2plY3Qgb3IgYXMgcGFydCBvZgoJCQkJCQkJCQl0aGlzIFJlYWwgRXN0YXRlIFByb2plY3QsIGFuZCB0aGUgcG9zc2Vzc2lvbiAvIGNvbXBsZXRpb24gZGF0ZQoJCQkJCQkJCQlvZiBzdWNoIHNlcGFyYXRlIHJlYWwgZXN0YXRlIHByb2plY3QgbWF5IGJlIGRpZmZlcmVudCBkYXRlLiBUaGUKCQkJCQkJCQkJQXBwbGljYW50L3MgZ2l2ZSB0aGUgZXhwbGljaXQgY29uc2VudCB0byB0aGUgUHJvbW90ZXJzIGZvciB0aGUKCQkJCQkJCQkJZGV2ZWxvcG1lbnQgLyBjb25zdHJ1Y3Rpb24gb2Ygc3VjaCBhZGRpdGlvbmFsIGZsb29ycyAvCgkJCQkJCQkJCXJlc2lkZW50aWFsIGxldmVscywgYWJvdmUgMjYgZmxvb3JzIG9mIHRoZSBCdWlsZGluZywgdml6IENBRkVSCgkJCQkJCQkJCUFUIEwmVCBSRUFMVFkgRUxJWElSIFJFU0VSVkUgYW5kIElPUkEgQVQgTCZUIFJFQUxUWSBFTElYSVIKCQkJCQkJCQkJUkVTRVJWRSBhbmQgYWJvdmUgMjUgZmxvb3JzIG9mIHRoZSBCdWlsZGluZywgdml6LiBBVFRISVMgQVQgTCZUCgkJCQkJCQkJCVJFQUxUWSBFTElYSVIgUkVTRVJWRSwgZWl0aGVyIGFzIGEgc2VwYXJhdGUgLyBpbmRlcGVuZGVudCByZWFsCgkJCQkJCQkJCWVzdGF0ZSBwcm9qZWN0IC8gbmV3IHBoYXNlIG9yIGFzIHBhcnQgb2YgdGhpcyBSZWFsIEVzdGF0ZQoJCQkJCQkJCQlQcm9qZWN0IHdpdGggdGhlIHNlcGFyYXRlIHRpbWVsaW5lcyB0byBjb21wbGV0ZSB0aGUgc2FtZSBpbgoJCQkJCQkJCQl0ZXJtcyBvZiBwcm92aXNpb25zIG9mIFJFUkEgYW5kIFJFUkEgUnVsZXMsIGFuZCB0aGUgQXBwbGljYW5pL3MKCQkJCQkJCQkJYWdyZWUsIGNvbmZpcm0gYW5kIHVuZGVydGFrZSB0aGF0IHRoZSBBcHBsaWNhbnQvcyBzaGFsbCBub3QKCQkJCQkJCQkJcmFpc2UgYW55IG9iamVjdGlvbiBpbiB0aGlzIHJlZ2FyZCwgYXQgYW55IHRpbWUuPC9saT4KCQkJCQkJCQk8bGkgc3R5bGU9ImZvbnQtc2l6ZTogOXB4ICFpbXBvcnRhbnQ7Ij4oYykgVGhlIEFwcGxpY2FudAoJCQkJCQkJCQljb25maXJtcyBhbmQgdW5kZXJzdGFuZHMgbm90IHRvIHNlZWsgYW55IGFtZW5kbWVudCwKCQkJCQkJCQkJbW9kaWZpY2F0aW9uIGFuZCAvIG9yIGNoYW5nZSBpbiB0aGUgdGVybXMgYW5kIGNvbmRpdGlvbnMgb2YKCQkJCQkJCQkJdGhpcyBhcHBsaWNhdGlvbiBmb3JtLjwvbGk+CgkJCQkJCQkJPGxpIHN0eWxlPSJmb250LXNpemU6IDlweCAhaW1wb3J0YW50OyI+KGQpIFRoZSBBcHBsaWNhbnQKCQkJCQkJCQkJZGVjbGFyZXMgdGhhdC1pbiBjYXNlIHRoZSBBcHBsaWNhbnQgaXMgYW4gTlJJIG9yIE5vbi1yZXNpZGVudCAvCgkJCQkJCQkJCUZvcmVpZ24gTmF0aW9uYWwgb2YgSW5kaWFuIE9yaWdpbiAvIEZvcmVpZ24gTmF0aW9uYWwgLyBDb21wYW55LAoJCQkJCQkJCQl0aGUgQXBwbGljYW50IHNoYWxsIGJlIHNvbGVseSByZXNwb25zaWJsZSBmb3IgY29tcGx5aW5nIHdpdGgKCQkJCQkJCQkJYWxsIHJlcXVpcmVtZW50cyBvZiBsYXcgaW5jbHVkaW5nIEZvcmVpZ24gRXhjaGFuZ2UgTWFuYWdlbWVudAoJCQkJCQkJCQlBY3QsIDE5OTksIG9yIHN0YXR1dG9yeSBlbmFjdG1lbnRzIG9yIGFtZW5kbWVudHMgdGhlcmVvZiwgYWxsCgkJCQkJCQkJCWFwcGxpY2FibGUgYWN0cywgcnVsZXMgYW5kIGd1aWRlbGluZXMgaXNzdWVkIGJ5IHRoZSBSZXNlcnZlCgkJCQkJCQkJCUJhbmsgb2YgSW5kaWEuIEluIHRoZSBldmVudCBhbnkgcGVybWlzc2lvbiBpcyByZWZ1c2VkIG9yIGZvdW5kCgkJCQkJCQkJCWxhY2tpbmcgaW4gYW55IHJlc3BlY3QsIHRoZSBzYW1lIHNoYWxsIGJlIGNvbnNpZGVyZWQgYXMgYQoJCQkJCQkJCQlkZWZhdWx0IGFuZCAvIG9yIGEgYnJlYWNoIG9uIHRoZSBwYXJ0IG9mIHRoZSBBcHBsaWNhbnQgYW5kIHRoZQoJCQkJCQkJCQlBcHBsaWNhbnQgd2lsbCBiZSByZW5kZXJlZCBzb2xlbHkgbGlhYmxlIGZvciB0aGUgY29uc2VxdWVuY2VzCgkJCQkJCQkJCWFyaXNpbmcgdGhlcmVmcm9tLjwvbGk+CgkJCQkJCQkJPGxpIHN0eWxlPSJmb250LXNpemU6IDlweCAhaW1wb3J0YW50OyI+KGUpIFRoZSBBcHBsaWNhbnQKCQkJCQkJCQkJYWdyZWVzIGFuZCBjb25maXJtcyB0aGF0IGlmIGluIHRoZSBldmVudCBvZiBpbmNyZWFzZSBvcgoJCQkJCQkJCQlkZWNyZWFzZSBpbiB0aGUgQ2FycGV0IEFyZWEgdG8gdGhlIGV4dGVudCBvZiBtYXhpbXVtIG9mIDMlIHRoZW4KCQkJCQkJCQkJc3VjaCBpbmNyZWFzZSBvciBkZWNyZWFzZSBzaGFsbCBiZSBhY2NlcHRhYmxlIHRvIHRoZSBBcHBsaWNhbnRzCgkJCQkJCQkJCXdpdGhvdXQgYW55IHByaWNlIHZhcmlhdGlvbi4gSWYgdGhlcmUgaXMgYW55IGluY3JlYXNlIG9yCgkJCQkJCQkJCWRlY3JlYXNlIGluIHRoZSBDYXJwZXQgQXJlYSBvZiBtb3JlIHRoYW4gMyUgZm9yIGFueSByZWFzb24KCQkJCQkJCQkJd2hhdHNvZXZlciwgdGhlIEFwcGxpY2FudCBzaGFsbCBwYXkgdGhlIGRpZmZlcmVudGlhbCBhbW91bnQgb24KCQkJCQkJCQkJYSBwcm8gcmF0YSBiYXNpcyBmb3Igc3VjaCBpbmNyZWFzZS9kZWNyZWFzZSBvciB2aWNlIHZlcnNhLjwvbGk+CgkJCQkJCQkJPGxpIHN0eWxlPSJmb250LXNpemU6IDlweCAhaW1wb3J0YW50OyI+KGYpIFRoZSBhcHBsaWNhbnQgaXMKCQkJCQkJCQkJbm90IGVudGl0bGVkIHRvIHNlbGwsIHRyYW5zZmVyLCBhc3NpZ24sIGRlYWwgd2l0aCBvciBvdGhlcndpc2UKCQkJCQkJCQkJZGlzcG9zZSBvZiBpbiBhbnkgbWFubmVyIHdoYXRzb2V2ZXIsIHRoZSBzYWlkIGZsYXQgdW50aWwgdGhlCgkJCQkJCQkJCXBheW1lbnQgb2YgdGhlIGVudGlyZSBDb25zaWRlcmF0aW9uIGFuZCBvdGhlciBkdWVzIGFuZCBhbW91bnRzCgkJCQkJCQkJCWFuZCB0aGVyZWFmdGVyIGFueSB0cmFuc2Zlciwgc2FsZSwgYXNzaWdubWVudCBzaGFsbCBiZSB3aXRoIHRoZQoJCQkJCQkJCQlDb21wYW55J3MgTm8gT2JqZWN0aW9uIGNlcnRpZmljYXRlLjwvbGk+CgkJCQkJCQk8L3VsPgoJCQkJCQkJPGg0PjcuIERlY2xhcmF0aW9uIG9mIEZyZWUgV2lsbDwvaDQ+CgkJCQkJCQk8dWwgY2xhc3M9Imd0bmNkZXRhaWxzX2xpc3QiPgoJCQkJCQkJCTxsaSBzdHlsZT0iZm9udC1zaXplOiA5cHggIWltcG9ydGFudDsiPihhKSBUaGUgQXBwbGljYW50CgkJCQkJCQkJCXN0YXRlcyBhbmQgY29uZmlybXMgdGhhdCwgdGhlIEFwcGxpY2FudCBoYXMgcmVhZCBhbmQKCQkJCQkJCQkJdW5kZXJzdG9vZCwgY29uZmlybWVkIGFuZCBhZ3JlZWQgdG8gdGhlIHRlcm1zIGFuZCBjb25kaXRpb25zCgkJCQkJCQkJCW1lbnRpb25lZCBoZXJlaW4gYW5kIGhhcyBhZmZpeGVkIGhpcyBzaWduYXR1cmVzIGFzIGFuCgkJCQkJCQkJCWFja25vd2xlZGdlbWVudCBhbmQgYWdyZWVtZW50IG9mIHRoZSBhYm92ZSB0ZXJtcyBhbmQKCQkJCQkJCQkJY29uZGl0aW9ucy48L2xpPgoJCQkJCQkJCTxsaSBzdHlsZT0iZm9udC1zaXplOiA5cHggIWltcG9ydGFudDsiPihiKSBUaGUgYXBwbGljYW50CgkJCQkJCQkJCXN0YXRlcyBhbmQgY29uZmlybXMgdGhhdCB0aGUgYXBwbGljYW50IGhhcyByZWFkLCB1bmRlcnN0b29kIGFuZAoJCQkJCQkJCQl2ZXJpZmllZCBhbGwgdGhlIGRldGFpbHMgb2YgdGhlIHByb2plY3QgaW5jbHVkaW5nIHRoZSB0ZXJtcyBhbmQKCQkJCQkJCQkJY29uZGl0aW9ucyBvZiB0aGUgYWdyZWVtZW50IGZvciBzYWxlIHVwbG9hZGVkIG9uIHRoZSBNYWhhUmVyYQoJCQkJCQkJCQl3ZWJzaXRlIGh0dHBzOi8vbWFoYXJlcmEubWFoYW9ubGluZS5nb3YuaW4gYW5kIHRoZSBBcHBsaWNhbnQKCQkJCQkJCQkJaGFzIGFncmVlZCB0byBhYmlkZSB0aGUgdGVybXMgYW5kIGNvbmRpdGlvbnMgb2YgdGhlIEFncmVlbWVudAoJCQkJCQkJCQlmb3IgU2FsZSB3aXRob3V0IGFueSBkZW11ciBhbmQgcHJvdGVzdC48L2xpPgoJCQkJCQkJCTxsaSBzdHlsZT0iZm9udC1zaXplOiA5cHggIWltcG9ydGFudDsiPihjKSBUaGlzIGFwcGxpY2F0aW9uCgkJCQkJCQkJCXNoYWxsIGJlIGFjY29tcGFuaWVkIHdpdGggc2VsZi1hdHRlc3RlZCBwcm9vZiBvZiBpZGVudGl0eSBhbmQKCQkJCQkJCQkJcmVzaWRlbmNlLCBuYW1lbHksIERyaXZpbmcgTGljZW5jZSwgQWFkaGFhciBDYXJkLCBSYXRpb24gQ2FyZCwKCQkJCQkJCQkJUGFzc3BvcnQsIFZvdGVyIElEIENhcmQgYW5kIFBBTiBDYXJkIChtYW5kYXRvcnkpLjwvbGk+CgkJCQkJCQkJPGxpPihkKSBUaGUgaW5mb3JtYXRpb24gcHJvdmlkZWQgaGVyZWluIGlzIHRydWUgYW5kCgkJCQkJCQkJCWNvcnJlY3QuPC9saT4KCQkJCQkJCTwvdWw+CgkJCQkJCTwvZGl2PgoJCQkJCTwvZGl2PgoJCQkJCTxkaXYgY2xhc3M9ImNvbW1vbl9mb290ZXIgc2lnbl9ibG9ja3Nfd3JhcHBlciI+PC9kaXY+CgkJCQk8L2Rpdj4KCQkJPC9kaXY+CgkJCTxkaXYgY2xhc3M9Im1haW4td3JhcHBlciBwYWdlX2FsbGFib3V0Ij4KCQkJCTxkaXYgY2xhc3M9ImlubmVyX3dyYXBwZXIiPgoJCQkJCTxkaXYgY2xhc3M9InJvdyBqdXN0aWZ5LWNvbnRlbnQtYmV0d2VlbiI+CgkJCQkJCTxkaXYgY2xhc3M9ImNvbCBoZWFkZXItbG9nbyBoZWFkX2xvZ28xIj48L2Rpdj4KCQkJCQkJPGRpdiBjbGFzcz0iY29sIGhlYWRlci1sb2dvIGhlYWRfbG9nbzIiPjwvZGl2PgoJCQkJCTwvZGl2PgoJCQkJCTxkaXYgY2xhc3M9ImFsbGFib3V0X21haW5pbm5lciI+CgkJCQkJCTxoMj5JdCdzIGFsbCBhYm91dCB5b3U8L2gyPgoJCQkJCQk8ZGl2IGNsYXNzPSJtYWluX2Zvcm1kZXRhaWwiPgoJCQkJCQkJPGRpdiBjbGFzcz0iYWJvdXRfeW91X2RldGFpbHMiPgoJCQkJCQkJCTx1bCBjbGFzcz0iYWJvdXRfeW91X2RldGFpbHNfbGlzdCI+CgkJCQkJCQkJCTxsaT48c3BhbiBjbGFzcz0iYWJvdXRfeW91X2xhYmVsIj5EYXRlIG9mIEJpcnRoOjwvc3Bhbj48c3BhbgoJCQkJCQkJCQkJaWQ9ImRhdGVfb2ZfYmlydGgiPjwvc3Bhbj48L2xpPgoJCQkJCQkJCQk8bGk+PHNwYW4gY2xhc3M9ImFib3V0X3lvdV9sYWJlbCI+TW90aGVyIFRvdW5ndWU6PC9zcGFuPjxzcGFuCgkJCQkJCQkJCQlpZD0ibW90aGVyX3Rvbmd1ZSI+PC9zcGFuPjwvbGk+CgkJCQkJCQkJCTxsaT48c3BhbiBjbGFzcz0iYWJvdXRfeW91X2xhYmVsIj5NYXJpdGFsIFN0YXR1czo8L3NwYW4+PHNwYW4KCQkJCQkJCQkJCWlkPSJtYXJpdGFsX3N0YXR1cyI+PC9zcGFuPjwvbGk+CgkJCQkJCQkJCTxsaT48c3BhbiBjbGFzcz0iYWJvdXRfeW91X2xhYmVsIj5PY2N1cGF0aW9uOjwvc3Bhbj48c3BhbgoJCQkJCQkJCQkJaWQ9Im9jY3VwdGlvbnMiPjwvc3Bhbj48L2xpPgoJCQkJCQkJCQk8bGk+PHNwYW4gY2xhc3M9ImFib3V0X3lvdV9sYWJlbCI+TmFtZSBvZiBGaXJtOjwvc3Bhbj48c3BhbgoJCQkJCQkJCQkJaWQ9Im5hbWVfb2ZfZmlybSI+PC9zcGFuPjwvbGk+CgkJCQkJCQkJCTxsaT48c3BhbiBjbGFzcz0iYWJvdXRfeW91X2xhYmVsIj5EZXNpZ25hdGlvbjo8L3NwYW4+PHNwYW4KCQkJCQkJCQkJCWlkPSJteV9kZXNpbmF0aW9uIj48L3NwYW4+PC9saT4KCQkJCQkJCQkJPGxpPjxzcGFuIGNsYXNzPSJhYm91dF95b3VfbGFiZWwiPkluZHVzdHJ5IFR5cGU6PC9zcGFuPjxzcGFuCgkJCQkJCQkJCQlpZD0iaW5kX3R5cGUiPjwvc3Bhbj48L2xpPgoJCQkJCQkJCQk8bGk+PHNwYW4gY2xhc3M9ImFib3V0X3lvdV9sYWJlbCI+T2ZmaWNlIEFkZHJlc3M6PC9zcGFuPjxzcGFuCgkJCQkJCQkJCQlpZD0ib2ZmaWNlX2FkZHJlc3MiPjwvc3Bhbj48L2xpPgoJCQkJCQkJCTwvdWw+CgkJCQkJCQk8L2Rpdj4KCQkJCQkJPC9kaXY+CgkJCQkJPC9kaXY+CgkJCQkJPGRpdj4KCQkJCQkJPGRpdiBjbGFzcz0iY29tbW9uX2Zvb3RlciBzaWduX2Jsb2Nrc193cmFwcGVyIj48L2Rpdj4KCQkJCQk8L2Rpdj4KCQkJCTwvZGl2PgoJCQk8L2Rpdj4KCQkJPGRpdiBjbGFzcz0ibWFpbi13cmFwcGVyIHBhZ2VfQW5uZXh1cmVzIj4KCQkJCTxkaXYgY2xhc3M9ImlubmVyX3dyYXBwZXIiPgoJCQkJCTxoMT5Bbm5leHVyZXM8L2gxPgoJCQkJPC9kaXY+CgkJCTwvZGl2PgoJCQk8ZGl2IGNsYXNzPSJtYWluLXdyYXBwZXIgY29uY2VudF9tYWluc2VjIGhpZGRlbiI+CgoJCQkJbnVsbAoJCQk8L2Rpdj4KCQk8L2Rpdj4KCTwvZGl2PgoKCgo8L2JvZHk+CjxzY3JpcHQ+Cgl2YXIganNvbkRhdGEgPSB7fTsKCWpzb25EYXRhWydhcHBsaWNhbnRzJ10gPSBbXTsKCWpzb25EYXRhWydhcHBsaWNhbnRzS3ljJ10gPSBbXTsKCWpzb25EYXRhWydwYXltZW50U291cmNlcyddID0gW107Cgl2YXIgaWREZXRhaWxzQTE7Cgl2YXIgbXlkb2N1bWVudDsKCXZhciBteWlvanNvbjsKCgkvLyBLZWVwIHRoaXMgYXJyYXkgZW1wdHkgaWYgbm8gaW1hZ2UgaXMgdXBsb2FkaW5nCgl2YXIgaW1hZ2VVcGxvYWRpbmcgPSBbXTsKPC9zY3JpcHQ+CjxzY3JpcHQKCXNyYz0iaHR0cHM6Ly91bnBrZy5jb20vQGJwbW4taW8vZm9ybS1qc0AwLjEwLjAvZGlzdC9mb3JtLXZpZXdlci51bWQuanMiPjwvc2NyaXB0PgoKPHNjcmlwdAoJc3JjPSJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL3NpZ25hdHVyZV9wYWRANC4wLjAvZGlzdC9zaWduYXR1cmVfcGFkLnVtZC5taW4uanMiPjwvc2NyaXB0Pgo8c2NyaXB0IHNyYz0idWkvY29uZmlnLmpzIj48L3NjcmlwdD4KPHNjcmlwdCBzcmM9InVpL2xvYWRGb3JtLmpzIj48L3NjcmlwdD4KPHNjcmlwdCBzcmM9InVpL3NjcmlwdC5qcyI+PC9zY3JpcHQ+Cgo8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+CgkvLyBjb25zdCBwcmV2aWV3QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInByZXZpZXctYnRuIik7CgoJLy8gcHJldmlld0J0bi5vbmNsaWNrID0gKGUpID0+IHsKCS8vICAgZS5wcmV2ZW50RGVmYXVsdCgpOwoJLy8gICBmaWxscGRmQ29udGVudCh0cnVlKTsKCS8vICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImZvcm0tYnRuIikucmVtb3ZlQXR0cmlidXRlKCJkaXNhYmxlZCIpOwoJLy8gICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgic2lnbi1idXR0b24iKS5yZW1vdmVBdHRyaWJ1dGUoImRpc2FibGVkIik7CgkvLyAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5mYS1jaGVjay1jaXJjbGUiKS5jbGFzc0xpc3QucmVtb3ZlKCJoaWRkZW4iKTsKCS8vIH07Cjwvc2NyaXB0PgoKPC9odG1sPg==</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </HTTPBody>
      <TcpPackets>
        <PacketInfo time="519311062" offset="0" length="299" />
        <PacketInfo time="519311078" offset="299" length="27787" />
      </TcpPackets>
    </HTTPResponse>
    <HTTPTask id="281" hostname="dev.bluealgo.com" path="https://dev.bluealgo.com/smartformup/ui/styles.css" url="https://dev.bluealgo.com/smartformup/ui/styles.css" ip="144.126.253.3" port="443" connectionId="12" origin="HTML" frame="1" startDateTime="2024-02-15T10:57:48.036+05:30" startTime="519311296" endTime="519311312">
      <HTTPRequest method="GET">
        <HTTPHeaders>
          <HTTPHeaderEntity name="sec-ch-ua" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ik5vdCBBKEJyYW5kIjt2PSI5OSIsICJHb29nbGUgQ2hyb21lIjt2PSIxMjEiLCAiQ2hyb21pdW0iO3Y9IjEyMSI=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="sec-ch-ua-mobile" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>PzA=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="User-Agent" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEyMS4wLjAuMCBTYWZhcmkvNTM3LjM2</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="sec-ch-ua-platform" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>IldpbmRvd3Mi</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>dGV4dC9jc3MsKi8qO3E9MC4x</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Sec-Fetch-Site" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>c2FtZS1vcmlnaW4=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Sec-Fetch-Mode" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bm8tY29ycw==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Sec-Fetch-Dest" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>c3R5bGU=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Referer" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cHM6Ly9kZXYuYmx1ZWFsZ28uY29tL3NtYXJ0Zm9ybXVwL2xvYWRpbmRleD9vcHBvcnR1bml0eUlkPTAwNjBvMDAwMDFlU0lKMEFBTyZjdXN0b21lcmlkPWN1c3QxMDA1JmFjY2Vzc3Rva2VuPXVYQ3haUktVLU1mMndpVGczX0E4ZFB1OTU3dGFMWHhQ</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Encoding" index="9">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Language" index="10">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZW4tVVMsZW47cT0wLjk=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Cookie" index="11">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SlNFU1NJT05JRD0zRDVFOEZFODBBNEYzNEY5QkM0OEI2RTc0ODhCOEY5MQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Host" index="12">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZGV2LmJsdWVhbGdvLmNvbQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0VUIGh0dHBzOi8vZGV2LmJsdWVhbGdvLmNvbS9zbWFydGZvcm11cC91aS9zdHlsZXMuY3NzIEhUVFAvMS4xDQpzZWMtY2gtdWE6ICJOb3QgQShCcmFuZCI7dj0iOTkiLCAiR29vZ2xlIENocm9tZSI7dj0iMTIxIiwgIkNocm9taXVtIjt2PSIxMjEiDQpzZWMtY2gtdWEtbW9iaWxlOiA/MA0KVXNlci1BZ2VudDogTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEyMS4wLjAuMCBTYWZhcmkvNTM3LjM2DQpzZWMtY2gtdWEtcGxhdGZvcm06ICJXaW5kb3dzIg0KQWNjZXB0OiB0ZXh0L2NzcywqLyo7cT0wLjENClNlYy1GZXRjaC1TaXRlOiBzYW1lLW9yaWdpbg0KU2VjLUZldGNoLU1vZGU6IG5vLWNvcnMNClNlYy1GZXRjaC1EZXN0OiBzdHlsZQ0KUmVmZXJlcjogaHR0cHM6Ly9kZXYuYmx1ZWFsZ28uY29tL3NtYXJ0Zm9ybXVwL2xvYWRpbmRleD9vcHBvcnR1bml0eUlkPTAwNjBvMDAwMDFlU0lKMEFBTyZjdXN0b21lcmlkPWN1c3QxMDA1JmFjY2Vzc3Rva2VuPXVYQ3haUktVLU1mMndpVGczX0E4ZFB1OTU3dGFMWHhQDQpBY2NlcHQtRW5jb2Rpbmc6IGd6aXAsIGRlZmxhdGUNCkFjY2VwdC1MYW5ndWFnZTogZW4tVVMsZW47cT0wLjkNCkNvb2tpZTogSlNFU1NJT05JRD0zRDVFOEZFODBBNEYzNEY5QkM0OEI2RTc0ODhCOEY5MQ0KSG9zdDogZGV2LmJsdWVhbGdvLmNvbQ0KDQo=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
          <HTTPCookies>
            <HTTPHeaderEntity name="JSESSIONID" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>M0Q1RThGRTgwQTRGMzRGOUJDNDhCNkU3NDg4QjhGOTE=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
          </HTTPCookies>
        </HTTPHeaders>
      </HTTPRequest>
      <HTTPResponse>
        <contentLenght>25488</contentLenght>
        <HTTPHeaders>
          <HTTPHeaderEntity name="Date" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VGh1LCAxNSBGZWIgMjAyNCAwNToxODo0NyBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Type" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>dGV4dC9jc3M=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Length" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MjU0ODg=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Connection" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Access-Control-Allow-Origin" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Kg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Ranges" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ynl0ZXM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="ETag" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Vy8iMjU0ODgtMTcwMzU4OTA1MjAwMCI=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Last-Modified" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VHVlLCAyNiBEZWMgMjAyMyAxMToxMDo1MiBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Strict-Transport-Security" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bWF4LWFnZT0xNTcyNDgwMDsgaW5jbHVkZVN1YkRvbWFpbnM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SFRUUC8xLjEgMjAwIA0KRGF0ZTogVGh1LCAxNSBGZWIgMjAyNCAwNToxODo0NyBHTVQNCkNvbnRlbnQtVHlwZTogdGV4dC9jc3MNCkNvbnRlbnQtTGVuZ3RoOiAyNTQ4OA0KQ29ubmVjdGlvbjoga2VlcC1hbGl2ZQ0KQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luOiAqDQpBY2NlcHQtUmFuZ2VzOiBieXRlcw0KRVRhZzogVy8iMjU0ODgtMTcwMzU4OTA1MjAwMCINCkxhc3QtTW9kaWZpZWQ6IFR1ZSwgMjYgRGVjIDIwMjMgMTE6MTA6NTIgR01UDQpTdHJpY3QtVHJhbnNwb3J0LVNlY3VyaXR5OiBtYXgtYWdlPTE1NzI0ODAwOyBpbmNsdWRlU3ViRG9tYWlucw0KDQo=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPBody>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>YSwKYWJiciwKYWNyb255bSwKYWRkcmVzcywKYXBwbGV0LAphcnRpY2xlLAphc2lkZSwKYXVkaW8sCmIsCmJpZywKYmxvY2txdW90ZSwKYm9keSwKY2FudmFzLApjYXB0aW9uLApjZW50ZXIsCmNpdGUsCmNvZGUsCmRkLApkZWwsCmRldGFpbHMsCmRmbiwKZGl2LApkbCwKZHQsCmVtLAplbWJlZCwKZmllbGRzZXQsCmZpZ2NhcHRpb24sCmZpZ3VyZSwKZm9vdGVyLApmb3JtLApoMSwKaDIsCmgzLApoNCwKaDUsCmg2LApoZWFkZXIsCmhncm91cCwKaHRtbCwKaSwKaWZyYW1lLAppbWcsCmlucywKa2JkLApsYWJlbCwKbGVnZW5kLApsaSwKbWFyaywKbWVudSwKbmF2LApvYmplY3QsCm9sLApvdXRwdXQsCnAsCnByZSwKcSwKcnVieSwKcywKc2FtcCwKc2VjdGlvbiwKc21hbGwsCnNwYW4sCnN0cmlrZSwKc3Ryb25nLApzdWIsCnN1bW1hcnksCnN1cCwKdGFibGUsCnRib2R5LAp0ZCwKdGZvb3QsCnRoLAp0aGVhZCwKdGltZSwKdHIsCnR0LAp1LAp1bCwKdmFyLAp2aWRlbyB7CiAgYm94LXNpemluZzogYm9yZGVyLWJveAp9Cgpib2R5IHsKICBkaXNwbGF5OiBmbGV4OwogIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsKICBhbGlnbi1pdGVtczogY2VudGVyOwogIC13ZWJraXQtYm94LXNpemluZzogYm9yZGVyLWJveDsKICAtbW96LWJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgYm94LXNpemluZzogYm9yZGVyLWJveDsKICBwYWRkaW5nOiAxMHB4OwogIG92ZXJmbG93LXg6IGhpZGRlbgp9CgouY3RuIHsKICBkaXNwbGF5OiBmbGV4OwogIGZsZXgtd3JhcDogd3JhcDsKICBhbGlnbi1pdGVtczogZmxleC1zdGFydDsKICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtc3RhcnQKfQoKLmZsZXgtd3JhcCB7CiAgZmxleC13cmFwOiB3cmFwCn0KCmlucHV0LAp0ZXh0YXJlYSB7CiAgb3V0bGluZTogMDsKICBib3JkZXItd2lkdGg6IDFweDsKICBib3JkZXItcmFkaXVzOiAzcHg7CiAgYm9yZGVyOiBub25lOwogIGNvbG9yOiAjMmYyZjJmCn0KCiNvY2N1cGF0aW9uLWxpc3QgewogIHBhZGRpbmctbGVmdDogMDsKICBkaXNwbGF5OiBmbGV4OwogIGZsZXgtd3JhcDogd3JhcAp9CgouaW5wdXRDdG4gewogIC13ZWJraXQtYm94LXNoYWRvdzogNXB4IDVweCA5cHggNXB4IHJnYmEoMTY3LCAxNjcsIDE2NywgLjE4KTsKICBib3gtc2hhZG93OiAwIDRweCA2cHggLTFweCByZ2IoMCAwIDAgLyAuMSksIDAgMnB4IDRweCAtMnB4IHJnYigwIDAgMCAvIC4xKTsKICB3aWR0aDogYXV0bzsKICBib3JkZXItcmFkaXVzOiA0cHg7CiAgbWluLWhlaWdodDogNjVweDsKICBwYWRkaW5nLWxlZnQ6IDEzcHg7CiAgcGFkZGluZy1yaWdodDogMTBweDsKICBtYXJnaW46IDVweDsKICBkaXNwbGF5OiBpbmxpbmUtZmxleDsKICBhbGlnbi1pdGVtczogZmxleC1zdGFydDsKICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogIGp1c3RpZnktY29udGVudDogY2VudGVyOwogIGZsZXgtd3JhcDogd3JhcDsKICB3aWR0aDogY2FsYyg1MCUgLSAxMHB4KTsKICBmbGV4LWdyb3c6IGluaGVyaXQKfQoKLmlucHV0LWdyb3VwIHsKICBkaXNwbGF5OiBmbGV4OwogIGZsZXgtd3JhcDogd3JhcAp9CgouaW5saW5lLWlucHV0LWdyb3VwIHsKICBkaXNwbGF5OiBpbmxpbmUtZmxleDsKICBmbGV4LXdyYXA6IHdyYXAKfQoKLnctNTAgewogIHdpZHRoOiA1MCUKfQoKI2Jvb2tpbmctc291cmNlLXJhZGlvIHsKICBib3gtc2hhZG93OiBub25lCn0KCi5pbnB1dEN0bjpob3ZlciBpbnB1dDo6cGxhY2Vob2xkZXIsCi5pbnB1dEN0bjpob3ZlciB0ZXh0YXJlYTo6cGxhY2Vob2xkZXIgewogIGNvbG9yOiAjMDAwCn0KCi5pbnB1dEN0biBpbnB1dCwKLmlucHV0Q3RuIHRleHRhcmVhIHsKICB3aWR0aDogMTAwJTsKICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudAp9CgouaW5wdXRDdG4gbGFiZWwgewogIGNvbG9yOiAjNDk0OTQ5OwogIGZvbnQtc2l6ZTogc21hbGxlcjsKICBtYXJnaW46IDAKfQoKLmNoZWNrYm94LXJvdyB7CiAgd2lkdGg6IDEwMCU7CiAgZGlzcGxheTogZmxleDsKICBmbGV4LXdyYXA6IHdyYXA7CiAganVzdGlmeS1jb250ZW50OiBmbGV4LXN0YXJ0Cn0KCi5wLTEwIHsKICBwYWRkaW5nOiAxMHB4Cn0KCi5jaGVja2JveC1yb3cgbGFiZWwgc3BhbiB7CiAgZGlzcGxheTogZmxleDsKICBtaW4td2lkdGg6IDcwcHgKfQoKLnBhZ2UtMS1mb3JtIHsKICB3aWR0aDogMTAwJQp9CgouaW52aXNpYmxlIHsKICBvcGFjaXR5OiAwCn0KCi5zcGFjZS1iZXR3ZWVuIHsKICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW4KfQoKY2FudmFzIHsKICBib3JkZXI6IDFweCBzb2xpZCAjZDFkMWQxOwogIGJvcmRlci1yYWRpdXM6IDVweAp9CgouZmxleC1jb2wgewogIGRpc3BsYXk6IGZsZXg7CiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbgp9CgpidXR0b25bZm9yPWNsZWFyLXNpZ25dIHsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogNXB4OwogIGJvcmRlcjogMXB4IHNvbGlkICNkYWRhZGEKfQoKI2Zvcm0gewogIHdpZHRoOiAxMDAlOwogIG1heC13aWR0aDogMTAyMHB4Cn0KCiNmb3JtLWN0biB7CiAgZGlzcGxheTogZmxleDsKICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICBhbGlnbi1pdGVtczogY2VudGVyOwogIHdpZHRoOiAxMDAlOwogIG92ZXJmbG93OiBoaWRkZW4KfQoKI2Zvcm0sCnRleHRhcmVhIHsKICBmb250LWZhbWlseTogUm9ib3RvLCBzYW5zLXNlcmlmCn0KCiNmb3JtIHsKICBmb250LXdlaWdodDogbGlnaHRlcgp9Cgoudy0xMDAgewogIHdpZHRoOiAxMDAlCn0KCi5kYXRlLXNpZ24tZm9vdGVyIHsKICBkaXNwbGF5OiBmbGV4OwogIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsKICBhbGlnbi1pdGVtczogZmxleC1zdGFydDsKICB3aWR0aDogMTAwJTsKICBtYXJnaW4tdG9wOiA1MHB4OwogIG1hcmdpbi1ib3R0b206IDMwcHg7CiAgZmxleC13cmFwOiB3cmFwCn0KCi5reWMtdXBsb2FkIHsKICBjb2xvcjogZ3JleTsKICBmb250LXdlaWdodDogbGlnaHRlcgp9CgouaDMgewogIGNvbG9yOiAjMTg4MjcxOwogIGZvbnQtd2VpZ2h0OiA3MDA7CiAgZm9udC1zaXplOiBsYXJnZXI7CiAgbWFyZ2luLXRvcDogNTBweAp9CgpoMiB7CiAgY29sb3I6ICMxODgyNzE7CiAgZm9udC13ZWlnaHQ6IDQwMDsKICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlCn0KCmgzLApoNCB7CiAgY29sb3I6ICNkMzllNjcKfQoKLm5vLWJveC1zaGFkb3cgewogIGJveC1zaGFkb3c6IG5vbmUKfQoKc2VsZWN0IHsKICBtYXJnaW46IDVweAp9CgoucGwtMCB7CiAgcGFkZGluZy1sZWZ0OiAwCn0KCi5mbGV4LXdyYXAgewogIGZsZXgtd3JhcDogd3JhcAp9Cgouc2VsZWN0LWxhYmVsLW9wdGlvbiB7CiAgY29sb3I6IGdyZXkKfQoKLmlucHV0Q3RuIHNlbGVjdCB7CiAgbWluLXdpZHRoOiAyMDBweDsKICB3aWR0aDogY2FsYygxMDAlIC0gMzBweCk7CiAgYm9yZGVyOiBub25lOwogIGJhY2tncm91bmQtY29sb3I6ICNmZmY7CiAgaGVpZ2h0OiAyM3B4OwogIGJvcmRlci1yYWRpdXM6IDJweAp9CgouaW5wdXRDdG4gaW5wdXQgewogIG1pbi13aWR0aDogNDAwcHg7CiAgd2lkdGg6IGNhbGMoMTAwJSAtIDMwcHgpOwogIG1heC13aWR0aDogMTAwJQp9CgouaW5wdXRDdG4gaW5wdXRbdHlwZT1udW1iZXJdIHsKICB3aWR0aDogMTAwJQp9CgouaW5wdXRDdG4gaW5wdXRbdHlwZT1kYXRlXSB7CiAgd2lkdGg6IGNhbGMoMTAwJS0zMHB4KQp9CgouaW5wdXRDdG4gaW5wdXRbdHlwZT1yYWRpb10gewogIG1pbi13aWR0aDogdW5zZXQgIWltcG9ydGFudAp9CgouaW5wdXRDdG4gdGV4dGFyZWEgewogIHdpZHRoOiAxMDAlOwogIGRpc3BsYXk6IGJsb2NrOwogIG1pbi13aWR0aDogNDAwcHgKfQoKcHJlIHsKICBjb2xvcjogIzAwMDsKICBmb250LWZhbWlseTogUm9ib3RvLCBzYW5zLXNlcmlmCn0KCi5mbGV4IHsKICBkaXNwbGF5OiBmbGV4Cn0KCi5zcGFjZS1iZXR3ZWVuIHsKICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47CiAgYWxpZ24taXRlbXM6IGNlbnRlcgp9CgouaGlkZGVuIHsKICBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQKfQoKI2Zvcm0tYnRuIHsKICBjb2xvcjogIzAwMDsKICBwYWRkaW5nOiAxNnB4OwogIGJvcmRlci1yYWRpdXM6IDNweDsKICBib3JkZXI6IG5vbmU7CiAgbWFyZ2luOiA1cHg7CiAgYm94LXNoYWRvdzogMCA1cHggM3B4IDAgcmdiKDAgMCAwIC8gNSUpLCAwIDZweCA2cHggMCByZ2IoMCAwIDAgLyA1JSk7CiAgYmFja2dyb3VuZDogI2ZmZjsKICBmb250LXNpemU6IDE2cHg7Cn0KCiNwcmV2LWJ0biB7CiAgcGFkZGluZzogMThweDsKICBib3JkZXI6IG5vbmU7CiAgbWFyZ2luOiA1cHg7CiAgYm9yZGVyLXJhZGl1czogM3B4OwogIGZvbnQtc2l6ZTogMTZweDsKICBib3gtc2hhZG93OiAwIDVweCAzcHggMCByZ2IoMCAwIDAgLyA1JSksIDAgNnB4IDZweCAwIHJnYigwIDAgMCAvIDUlKTsKICBiYWNrZ3JvdW5kOiAjZmZmOwp9CgojcHJldmlldy1idG4gewoKICBwYWRkaW5nOiAxOHB4OwogIGJvcmRlcjogbm9uZTsKICBtYXJnaW46IDVweDsKICBib3JkZXItcmFkaXVzOiAzcHg7CiAgZm9udC1zaXplOiAxNnB4OwogIGJveC1zaGFkb3c6IDAgNXB4IDNweCAwIHJnYigwIDAgMCAvIDUlKSwgMCA2cHggNnB4IDAgcmdiKDAgMCAwIC8gNSUpOwogIGJhY2tncm91bmQ6ICNmZmY7Cn0KCiNzYXZlLWJ0biB7CiAgcGFkZGluZzogMThweDsKICBib3JkZXI6IG5vbmU7CiAgbWFyZ2luOiA1cHg7CiAgYm9yZGVyLXJhZGl1czogM3B4OwogIGZvbnQtc2l6ZTogMTZweDsKICBib3gtc2hhZG93OiAwIDVweCAzcHggMCByZ2IoMCAwIDAgLyA1JSksIDAgNnB4IDZweCAwIHJnYigwIDAgMCAvIDUlKTsKICBiYWNrZ3JvdW5kOiAjZmZmOwp9CgojZXNpZ24tc2F2ZSB7CiAgcGFkZGluZzogMTBweDsKICBib3JkZXI6IG5vbmU7CiAgbWFyZ2luOiA1cHg7CiAgYm9yZGVyLXJhZGl1czogM3B4Cn0KCiNlc2lnbi1jYW5jZWwgewogIHBhZGRpbmc6IDEwcHg7CiAgYm9yZGVyOiBub25lOwogIG1hcmdpbjogNXB4OwogIGJvcmRlci1yYWRpdXM6IDNweAp9Cgojc2lnbi1idXR0b24gewogIHBhZGRpbmc6IDE4cHg7CiAgYm9yZGVyOiBub25lOwogIG1hcmdpbjogNXB4OwogIGJvcmRlci1yYWRpdXM6IDNweDsKICBib3gtc2hhZG93OiAwIDVweCAzcHggMCByZ2IoMCAwIDAgLyA1JSksIDAgNnB4IDZweCAwIHJnYigwIDAgMCAvIDUlKTsKICBiYWNrZ3JvdW5kOiAjZmZmOwp9CgojaW5kaXZpZHVhbC1zaWduLWJ1dHRvbiB7CiAgcGFkZGluZzogMTBweDsKICBib3JkZXI6IG5vbmU7CiAgbWFyZ2luOiA1cHg7CiAgYm9yZGVyLXJhZGl1czogM3B4Cn0KCiNmb3JtLWJ0bjpmb2N1cywKI2Zvcm0tYnRuOmhvdmVyIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjNWEzYzNiOwogIGNvbG9yOiAjZmZmCn0KCiNlc2lnbi1jYW5jZWw6Zm9jdXMsCiNlc2lnbi1jYW5jZWw6aG92ZXIsCiNlc2lnbi1zYXZlOmZvY3VzLAojZXNpZ24tc2F2ZTpob3ZlciwKI2luZGl2aWR1YWwtc2lnbi1idXR0b246Zm9jdXMsCiNpbmRpdmlkdWFsLXNpZ24tYnV0dG9uOmhvdmVyLAojcHJldi1idG46Zm9jdXMsCiNwcmV2LWJ0bjpob3ZlciwKI3ByZXZpZXctYnRuOmZvY3VzLAojcHJldmlldy1idG46aG92ZXIsCiNzYXZlLWJ0bjpmb2N1cywKI3NhdmUtYnRuOmhvdmVyLAojc2lnbi1idXR0b246Zm9jdXMsCiNzaWduLWJ1dHRvbjpob3ZlciB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2JjYmNiYwp9CgojYnRuLWN0biB7CiAgZGlzcGxheTogZmxleDsKICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kOwogIG1hcmdpbi10b3A6IDVweDsKICBhbGlnbi1pdGVtczogY2VudGVyOwogIGZsZXgtd3JhcDogd3JhcAp9CgojbG9nbyB7CiAgbWF4LXdpZHRoOiA0MDBweDsKICBtYXJnaW46IGF1dG87CiAgZGlzcGxheTogYmxvY2s7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiBhdXRvCn0KCi5waG90byB7CiAgd2lkdGg6IDIyMHB4OwogIGhlaWdodDogMjIwcHg7CiAgbWFyZ2luLWJvdHRvbTogMTBweAp9CgouaWRlbnRpZmljYXRpb24tc2VjdGlvbiAubXlpZGVudGlmaWNhdGlvbnNlYyB7CiAgZGlzcGxheTogZmxleDsKICBmbGV4LXdyYXA6IHdyYXA7CiAgbWFyZ2luLWJvdHRvbTogNTBweDsKICBtYXJnaW46IDAgLTE1cHgKfQoKLmlkZW50aWZpY2F0aW9uLXNlY3Rpb24gLmNvbCB7CiAgbWluLXdpZHRoOiAzNTBweCAhaW1wb3J0YW50OwogIGRpc3BsYXk6IGZsZXg7CiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICBhbGlnbi1pdGVtczogY2VudGVyOwogIHBhZGRpbmc6IDAgMTVweDsKICBtYXJnaW4tdG9wOiAyMHB4Cn0KCi5pZGVudGlmaWNhdGlvbi1zZWN0aW9uIC5pbnB1dEN0biBpbnB1dCB7CiAgbWluLXdpZHRoOiB1bnNldDsKICB3aWR0aDogMjEwcHgKfQoKLmlkZW50aWZpY2F0aW9uLXNlY3Rpb24gaW5wdXRbdHlwZT1maWxlXSB7CiAgbWluLXdpZHRoOiB1bnNldDsKICB3aWR0aDogMjIwcHg7CiAgbWFyZ2luLWJvdHRvbTogNXB4Cn0KCi5wYWdlLTEtZm9ybS1jdG4gewogIGRpc3BsYXk6IGZsZXg7CiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICBnYXA6IDQwcHg7CiAgbWF4LXdpZHRoOiA1MCU7CiAgd2lkdGg6IDEwMCUKfQoKLmFwY3RfdHlwZV9kaXYgewogIGRpc3BsYXk6IGZsZXg7CiAgZ2FwOiA1cHg7CiAganVzdGlmeS1jb250ZW50OiBlbmQ7CiAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgbWFyZ2luLWJvdHRvbTogMTBweAp9CgoucGFnZS0xLWZvcm0tY3RuIC5pbnB1dEN0biB7CiAgd2lkdGg6IDEwMCUKfQoKLm10LTMwIHsKICBtYXJnaW4tdG9wOiAzMHB4Cn0KCi5tYi0zMCB7CiAgbWFyZ2luLWJvdHRvbTogMzBweAp9CgoubWItNTAgewogIG1hcmdpbi1ib3R0b206IDUwcHgKfQoKLm10LTIwIHsKICBtYXJnaW4tdG9wOiAyMHB4Cn0KCi5tdC0xMCB7CiAgbWFyZ2luLXRvcDogMTBweAp9CgoudGV4dC1zbWFsbCB7CiAgZm9udC1zaXplOiBzbWFsbAp9CgpAbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOjY1MHB4KSB7CiAgLmlucHV0Q3RuIGlucHV0IHsKICAgIG1pbi13aWR0aDogdW5zZXQKICB9CgogIC5jaGVja2JveC1jdG4gewogICAgZmxleC13cmFwOiB3cmFwICFpbXBvcnRhbnQKICB9CgogIC5jaGVja2JveC1yb3cgewogICAganVzdGlmeS1jb250ZW50OiBmbGV4LXN0YXJ0CiAgfQoKICAuaW5wdXRDdG4gewogICAgZGlzcGxheTogZmxleDsKICAgIHdpZHRoOiAxMDAlCiAgfQoKICAuaW5wdXRDdG4gewogICAgZGlzcGxheTogZmxleDsKICAgIHdpZHRoOiBjYWxjKDEwMCUgLSAyMHB4KQogIH0KCiAgLmlkZW50aWZpY2F0aW9uLXNlY3Rpb24gLmNvbCB7CiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAgIHdpZHRoOiAxMDAlOwogICAgbWFyZ2luLWJvdHRvbTogNTBweAogIH0KCiAgLnBhZ2UtMS1mb3JtLWN0biB7CiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcgogIH0KCiAgLmlucHV0Q3RuIHNlbGVjdCB7CiAgICB3aWR0aDogMTAwJTsKICAgIG1pbi13aWR0aDogdW5zZXQKICB9CgogIC5kYXRlLXNpZ24tZm9vdGVyIHsKICAgIHBhZGRpbmc6IDEwcHgKICB9CgogIC5ob21lX2NvbnRhaW5lciB7CiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uCiAgfQp9CgpAbWVkaWEgcHJpbnQgewogIC5oaWRkZW4gewogICAgZGlzcGxheTogaW5oZXJpdAogIH0KCiAgI2Zvcm0tYnRuLAogICNwcmV2LWJ0biwKICBwcmV2aWV3LWJ0biB7CiAgICBkaXNwbGF5OiBub25lCiAgfQoKICAjcGFnZS0xIHsKICAgIHBhZ2UtYnJlYWstYWZ0ZXI6IGFsd2F5cwogIH0KCiAgI3BhZ2UtMiB7CiAgICBwYWdlLWJyZWFrLWFmdGVyOiBhbHdheXMKICB9CgogICNwYWdlLTMgewogICAgcGFnZS1icmVhay1hZnRlcjogYWx3YXlzCiAgfQoKICAjcGFnZS00IHsKICAgIHBhZ2UtYnJlYWstYWZ0ZXI6IGFsd2F5cwogIH0KCiAgI3BhZ2UtNSB7CiAgICBwYWdlLWJyZWFrLWFmdGVyOiBhbHdheXMKICB9CgogICNwYWdlLTYgewogICAgcGFnZS1icmVhay1hZnRlcjogYWx3YXlzCiAgfQoKICAjcGFnZS03IHsKICAgIHBhZ2UtYnJlYWstYWZ0ZXI6IGFsd2F5cwogIH0KCiAgI3BhZ2UtOCB7CiAgICBwYWdlLWJyZWFrLWFmdGVyOiBhbHdheXMKICB9CgogICNwYWdlLTkgewogICAgcGFnZS1icmVhay1hZnRlcjogYWx3YXlzCiAgfQoKICAjcGFnZS0xMCB7CiAgICBwYWdlLWJyZWFrLWFmdGVyOiBhbHdheXMKICB9CgogICNwYWdlLTExIHsKICAgIHBhZ2UtYnJlYWstYWZ0ZXI6IGFsd2F5cwogIH0KfQoKc3Bhbi5ncmVlbiB7CiAgYmFja2dyb3VuZDogIzRjYWY1MDsKICBwYWRkaW5nOiA2cHg7CiAgY29sb3I6ICNmZmY7CiAgYm9yZGVyLXJhZGl1czogNXB4Owp9CgouY2hlY2tib3gtY3RuIHsKICBmbGV4LWRpcmVjdGlvbjogcm93OwogIGp1c3RpZnktY29udGVudDogZmxleC1zdGFydDsKICBhbGlnbi1pdGVtczogY2VudGVyOwogIGZsZXgtd3JhcDogbm93cmFwCn0KCi5mb3JtLXRleHQgewogIGJveC1zaGFkb3c6IG5vbmU7CiAgd2lkdGg6IDEwMCU7CiAgZm9udC13ZWlnaHQ6IDcwMDsKICBjb2xvcjogZ3JleTsKICBtaW4taGVpZ2h0OiB1bnNldDsKICBtYXJnaW4tdG9wOiAyMHB4Cn0KCmlucHV0W3R5cGU9ZmlsZV0gewogIGJhY2tncm91bmQtY29sb3I6ICNmZmY7CiAgYm9yZGVyOiBub25lCn0KCi5maWxlLXVwbG9hZCB7CiAgd2lkdGg6IDI5OHB4OwogIGRpc3BsYXk6IGZsZXg7CiAgbWFyZ2luOiA1cHg7CiAgbWFyZ2luLWJvdHRvbTogMTBweDsKICBjb2xvcjogIzQ2NDY0NjsKICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47CiAgcG9zaXRpb246IHJlbGF0aXZlCn0KCi5maWxlLXVwbG9hZCBsYWJlbCB7CiAgd2lkdGg6IDgwcHgKfQoKLmZpbGUtdXBsb2FkLmJhbmstc2xpcC11cGxvYWQgewogIHdpZHRoOiBjYWxjKDUwJSAtIDEwcHgpOwp9CgojcGFubmVsLWxvZ28gewogIG1heC13aWR0aDogMzAwcHg7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiBhdXRvCn0KCi5jaGVja2JveC1jdG4gbGFiZWwgewogIHdpZHRoOiB1bnNldDsKICBtaW4td2lkdGg6IHVuc2V0OwogIG1hcmdpbjogNXB4OwogIGRpc3BsYXk6IGZsZXg7CiAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtc3RhcnQKfQoKLnBvcHVwLWhlYWRlciB7CiAgZm9udC1zaXplOiAyMHB4OwogIGZvbnQtZmFtaWx5OiBBcmlhbCwgSGVsdmV0aWNhLCBzYW5zLXNlcmlmOwogIGxpbmUtaGVpZ2h0OiAzMHB4OwogIGZvbnQtd2VpZ2h0OiA1MDAKfQoKLnBvcHVwX3dhcm5pbmd0ZXh0IHsKICBmb250LWZhbWlseTogQXJpYWwsIEhlbHZldGljYSwgc2Fucy1zZXJpZjsKICBmb250LXNpemU6IDE0cHg7CiAgbGluZS1oZWlnaHQ6IDIwcHg7CiAgZm9udC13ZWlnaHQ6IDMwMAp9CgouZXJyb3ItdGV4dHsKICBjb2xvcjogI2ViNGE0YSAhaW1wb3J0YW50OwogIGZvbnQtc2l6ZTogMTRweDsKICBtYXJnaW46IDEwcHggMCAKfQoKLmNoZWNrYm94LXJvdyBsYWJlbCB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2Y2ZjZmNjsKICBwYWRkaW5nOiAxMHB4OwogIGJvcmRlci1yYWRpdXM6IDVweAp9CgouY2hlY2tib3gtbGFiZWwgaW5wdXQgewogIG1pbi13aWR0aDogdW5zZXQ7CiAgd2lkdGg6IHVuc2V0OwogIG1hcmdpbi1sZWZ0OiA0cHgKfQoKI2xlZnQtcGFubmVsIHsKICBhbGlnbi1zZWxmOiBmbGV4LXN0YXJ0Cn0KCkBtZWRpYSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6MTE3MHB4KSB7CiAgI2xlZnQtcGFubmVsIHsKICAgIGRpc3BsYXk6IG5vbmUKICB9Cn0KCi5hbGlnbi1lbmQgewogIGFsaWduLWl0ZW1zOiBmbGV4LWVuZAp9CgpvbCB7CiAgbWFyZ2luLXRvcDogMDsKICBsaXN0LXN0eWxlLXR5cGU6IGxvd2VyLWFscGhhCn0KCmxpIHsKICBtYXJnaW4tYm90dG9tOiAxMHB4Cn0KCi5tb2RhbCB7CiAgZGlzcGxheTogbm9uZTsKICBwb3NpdGlvbjogZml4ZWQ7CiAgei1pbmRleDogMTsKICBwYWRkaW5nLXRvcDogMTBweDsKICBsZWZ0OiAwOwogIHRvcDogMDsKICB3aWR0aDogMTAwJTsKICBoZWlnaHQ6IDEwMCU7CiAgb3ZlcmZsb3c6IGF1dG87CiAgYmFja2dyb3VuZC1jb2xvcjogIzAwMDsKICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIC40KQp9CgoubW9kYWwtY29udGVudCB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2ZlZmVmZTsKICBtYXJnaW46IGF1dG87CiAgcGFkZGluZzogMjBweDsKICBib3JkZXI6IDFweCBzb2xpZCAjODg4OwogIHdpZHRoOiA5MCU7CiAgcG9zaXRpb246IHJlbGF0aXZlCn0KCi5jbG9zZSB7CiAgY29sb3I6ICNhYWE7CiAgZmxvYXQ6IHJpZ2h0OwogIGZvbnQtc2l6ZTogMjhweDsKICBmb250LXdlaWdodDogNzAwCn0KCi5jbG9zZTpmb2N1cywKLmNsb3NlOmhvdmVyIHsKICBjb2xvcjogIzAwMDsKICB0ZXh0LWRlY29yYXRpb246IG5vbmU7CiAgY3Vyc29yOiBwb2ludGVyCn0KCi5qdXN0aWZ5LWNvbnRlbnQtc3RhcnQgewogIGp1c3RpZnktY29udGVudDogbGVmdAp9CgouaW5wdXRfYmFja2dyb3VkX25vbmUgewogIGJveC1zaGFkb3c6IG5vbmU7CiAgcGFkZGluZy1sZWZ0OiAwCn0KCi5hZGRfYXBwbGljYW50X2NvbnRpYW5lciB7CiAgbWFyZ2luLXRvcDogMTBweDsKICBwYWRkaW5nOiA0cHggMDsKICBkaXNwbGF5OiBmbGV4OwogIGFsaWduLWl0ZW1zOiBjZW50ZXIKfQoKLmFkZF9hcHBsaWNhbnRfY29udGlhbmVyIGgyIHsKICBtYXJnaW46IDAKfQoKLmFkZF9hcHBsaWNhbnRfY29udGlhbmVyIC5hZGRfYXBwbGljYW50X2J1dHRvbiB7CiAgYmFja2dyb3VuZC1jb2xvcjogIzJlOGEyMzsKICBjb2xvcjogI2ZmZjsKICBwYWRkaW5nOiA1cHggMTJweDsKICBjdXJzb3I6IHBvaW50ZXI7CiAgYm9yZGVyLXJhZGl1czogNHB4OwogIGZvbnQtd2VpZ2h0OiA1MDAKfQoKLm90aGVyX2RvY3VtZW50Y2xhc3MgewogIG1hcmdpbi10b3A6IDEwcHgKfQoKLmRvY19zZWxlY3Rpb25fY29udGFpbmVyIHsKICBkaXNwbGF5OiBmbGV4OwogIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgd2lkdGg6IDEwMCU7CiAgbWF4LXdpZHRoOiAzMzVweAp9CgouZG9jX3NlbGVjdGlvbl9jb250YWluZXIgLmlucHV0Q3RuIHsKICBtYXgtd2lkdGg6IDI0NXB4OwogIHdpZHRoOiBjYWxjKDEwMCUgLSA2NXB4KQp9CgouZG9jX3NlbGVjdGlvbl9jb250YWluZXIgLm90aGVyX2RvY3VtZW50cGx1cyB7CiAgZm9udC1zaXplOiAyMHB4OwogIGxpbmUtaGVpZ2h0OiAyNXB4OwogIGJhY2tncm91bmQtY29sb3I6ICMxODgyNzE7CiAgY3Vyc29yOiBwb2ludGVyOwogIGhlaWdodDogMjVweDsKICB3aWR0aDogMjVweDsKICBib3JkZXItcmFkaXVzOiA1MCU7CiAgdGV4dC1hbGlnbjogY2VudGVyOwogIGNvbG9yOiAjZmZmOwogIGZvbnQtd2VpZ2h0OiA0MDA7CiAgY3Vyc29yOiBwb2ludGVyOwogIG1hcmdpbi1sZWZ0OiAxMHB4Cn0KCi5kb2Nfc2VsZWN0aW9uX2NvbnRhaW5lcl9yZW1vdmUgLm90aGVyX2RvY3VtZW50bWludXMgewogIGZvbnQtc2l6ZTogMjBweDsKICBsaW5lLWhlaWdodDogMjVweDsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjMTg4MjcxOwogIGN1cnNvcjogcG9pbnRlcjsKICBoZWlnaHQ6IDI1cHg7CiAgd2lkdGg6IDI1cHg7CiAgYm9yZGVyLXJhZGl1czogNTAlOwogIHRleHQtYWxpZ246IGNlbnRlcjsKICBjb2xvcjogI2ZmZjsKICBmb250LXdlaWdodDogNDAwOwogIGN1cnNvcjogcG9pbnRlcjsKICBtYXJnaW4tbGVmdDogMTBweDsKfQoKLm1haW5VcGxvYWRfY29udGFpbmVyIHsKICBkaXNwbGF5OiBmbGV4OwogIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgYWxpZ24taXRlbXM6IHN0YXJ0OwogIG1hcmdpbi1sZWZ0OiAxMHB4OwogIGZsZXg6IDEKfQoKLm1haW5VcGxvYWRfY29udGFpbmVyIGlucHV0IHsKICBtYXgtd2lkdGg6IDE4MHB4ICFpbXBvcnRhbnQKfQoKLm1haW5VcGxvYWRfY29udGFpbmVyX3BheW1lbnQgewogIGRpc3BsYXk6IGZsZXg7CiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICBhbGlnbi1pdGVtczogc3RhcnQ7CiAgbWFyZ2luLWxlZnQ6IDEwcHg7CiAgZmxleDogMQp9CgoubWFpblVwbG9hZF9jb250YWluZXJfcGF5bWVudCBpbnB1dCB7CiAgbWF4LXdpZHRoOiAxODBweCAhaW1wb3J0YW50Cn0KCi5jbG9zZV9wcmV2aWV3aWNvbiB7CiAgcGFkZGluZzogMCA1cHg7CiAgYm9yZGVyOiAxcHggc29saWQ7CiAgYm9yZGVyLXJhZGl1czogNTAlOwogIGNvbG9yOiByZWQ7CiAgd2lkdGg6IDIxcHggIWltcG9ydGFudAp9CgoucHJldmlld19hY3Rpb25idXR0b24gewogIGRpc3BsYXk6IGZsZXg7CiAgZ2FwOiAxNXB4OwogIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgcG9zaXRpb246IHJlbGF0aXZlCn0KCi5jb3JyZWN0X3ByZXZpZXdpY29uIHsKICBwYWRkaW5nOiAwIDVweDsKICBib3JkZXI6IDFweCBzb2xpZDsKICBib3JkZXItcmFkaXVzOiA1MCU7CiAgY29sb3I6IGdyZWVuOwogIHdpZHRoOiAyMXB4ICFpbXBvcnRhbnQKfQoKLnJlbW92ZV9wcmV2aWV3X2VsZSB7CiAgcG9zaXRpb246IGFic29sdXRlOwogIGJvdHRvbTogLTFweDsKICBsZWZ0OiAtNnB4Cn0KCi5yZW1vdmVfcHJldmlld19lbGUgYnV0dG9uIHsKICBib3JkZXItcmFkaXVzOiA1MCU7CiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjsKICBib3JkZXI6IDFweCBzb2xpZDsKICBwYWRkaW5nOiAxcHggNXB4Cn0KCiNuZXdfYWRkZm9ybWxpc3QgewogIGFsaWduLWl0ZW1zOiBmbGV4LWVuZDsKICB3aWR0aDogMTAwJTsKICBib3JkZXI6IDFweCBzb2xpZDsKICBwYWRkaW5nOiAxMHB4IDUwcHggMTBweCAyNXB4OwogIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgYm9yZGVyLXJhZGl1czogN3B4OwogIHBvc2l0aW9uOiByZWxhdGl2ZQp9CgouYXBjdF90eXBlX2xhYmxlIHsKICBtYXgtd2lkdGg6IDEwMHB4OwogIHdpZHRoOiAxMDAlCn0KCi5teV90eXBlX3BsdXMgewogIHBhZGRpbmc6IDAgNHB4OwogIGJvcmRlcjogMXB4IHNvbGlkOwogIGJvcmRlci1yYWRpdXM6IDRweDsKICBjdXJzb3I6IHBvaW50ZXIKfQoKLm15X3R5cGVfbWludXMgewogIHBhZGRpbmc6IDAgNnB4OwogIGJvcmRlcjogMXB4IHNvbGlkOwogIGJvcmRlci1yYWRpdXM6IDRweDsKICBjdXJzb3I6IHBvaW50ZXIKfQoKLnByZXN1ZmNvbnRhaW5lciB7CiAgZGlzcGxheTogZmxleDsKICB3aWR0aDogMTAwJTsKICBtYXJnaW4tdG9wOiA3cHgKfQoKLnByZXN1ZmNvbnRhaW5lciBzcGFuIHsKICBmb250LXNpemU6IHNtYWxsZXIKfQoKLnByZXN1ZmNvbnRhaW5lciBpbnB1dCB7CiAgbWluLXdpZHRoOiBhdXRvOwogIGZsZXg6IDE7CiAgd2lkdGg6IDEwMCUKfQoKLnByZXN1ZmNvbnRhaW5lciBpbnB1dCB7CiAgcGFkZGluZy1sZWZ0OiAxMHB4Cn0KCi5jaGVja2JveC1yYXcgewogIGRpc3BsYXk6IGZsZXg7CiAgYWxpZ24taXRlbXM6IGNlbnRlcgp9CgouaW5wdXRfY2hlY2tsaXN0IHsKICBwYWRkaW5nOiAxMHB4IDAKfQoKLmZpdGNvbnRlbnRfY2hlY2sgewogIG1pbi13aWR0aDogMTMwcHg7CiAgZGlzcGxheTogZmxleDsKICBmbGV4LWRpcmVjdGlvbjogcm93OwogIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAganVzdGlmeS1jb250ZW50OiBmbGV4LXN0YXJ0OwogIG1heC13aWR0aDogNDklOwogIHdpZHRoOiAxMDAlCn0KCi5maXRjb250ZW50X2NoZWNrLmlucHV0Q3RuIGlucHV0IHsKICB3aWR0aDogMjBweCAhaW1wb3J0YW50OwogIG1heC13aWR0aDogMjBweDsKICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgbWluLXdpZHRoOiAyMHB4OwogIG1hcmdpbjogMCAxMHB4IDAgMAp9CgouZml0Y29udGVudF9jaGVjay5pbnB1dEN0biBsYWJlbCB7CiAgd2lkdGg6IGF1dG8KfQoKLmFwbGNfcm93Y29udGFpbmVyIHsKICBkaXNwbGF5OiBmbGV4OwogIGFsaWduLWl0ZW1zOiBzdGFydDsKICBnYXA6IDE1cHg7CiAgd2lkdGg6IDEwMCU7CiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOwogIG1hcmdpbi1ib3R0b206IDI1cHgKfQoKLmFwbGNfcm93Y29udGFpbmVyIHNwYW4gewogIHBhZGRpbmc6IDEwcHggMTVweDsKICBib3JkZXI6IDFweCBzb2xpZCAjYWFhOwogIGJvcmRlci1yYWRpdXM6IDRweAp9CgouYXBsY19yb3djb250YWluZXIgcCB7CiAgZmxleC1ncm93OiAxOwogIG1hcmdpbjogMDsKICBwYWRkaW5nOiAxMHB4OwogIGJvcmRlcjogMXB4IHNvbGlkICNhYWE7CiAgYm9yZGVyLXJhZGl1czogNHB4OwogIG1pbi13aWR0aDogMTA1cHg7CiAgd2lkdGg6IDEwMCUKfQoKLmFwbGNfcm93Y29udGFpbmVyIC5pbnB1dEN0biB7CiAgbWFyZ2luOiAwOwogIG1pbi1oZWlnaHQ6IDQwcHgKfQoKI3NpZ25Nb2RhbCAubW9kYWwtY29udGVudCB7CiAgbWF4LXdpZHRoOiA2NTBweAp9CgouZXNpZ25fbG9hZGFjdGlvbiB7CiAgd2lkdGg6IDEwMCU7CiAgdGV4dC1hbGlnbjogZW5kCn0KCi5wbG1mbGV4X2ljb24gewogIGRpc3BsYXk6IGZsZXg7CiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgcmlnaHQ6IC0zMHB4OwogIHRvcDogNTAlOwogIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKTsKICBnYXA6IDEwcHgKfQoKLm1pbnVzX3VwbG9hZGNvbnRhaW5lciB7CiAgd2lkdGg6IDI1cHg7CiAgaGVpZ2h0OiAyNXB4OwogIGJvcmRlci1yYWRpdXM6IDUwJTsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjMTg4MjcxOwogIGZvbnQtc2l6ZTogMjBweDsKICBsaW5lLWhlaWdodDogMjVweDsKICBjb2xvcjogI2ZmZjsKICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgZm9udC13ZWlnaHQ6IDQwMDsKICBjdXJzb3I6IHBvaW50ZXI7CiAgcG9zaXRpb246IGFic29sdXRlOwogIHRvcDogMDsKICByaWdodDogMAp9CgouZmlsZXVwbG9hZF9jb250aWFuZXIgewogIGNvbG9yOiByZWQ7CiAgdGV4dC1hbGlnbjogY2VudGVyOwogIHdpZHRoOiAxMDAlOwogIGZvbnQtc2l6ZTogMTRweAp9CgouaG9tZV9jb250YWluZXIgewogIGRpc3BsYXk6IGZsZXgKfQoKLmNvbl9kaXNwbGF5aW1hZ2UgewogIGZsZXg6IDE7CiAgcGFkZGluZzogMjBweDsKICB0ZXh0LWFsaWduOiBjZW50ZXIKfQoKLm1vZGFsX2hlYWRfY29udGFpbmVyIHsKICBhbGlnbi1pdGVtczogY2VudGVyOwogIHdpZHRoOiAxMDAlCn0KCiNlc2lnbl9obHRnZCB7CiAgZmxleC1ncm93OiAxOwogIGRpc3BsYXk6IGZsZXg7CiAgZmxleC13cmFwOiB3cmFwOwogIGdhcDogMTBweDsKICBhbGlnbi1pdGVtczogY2VudGVyOwogIGp1c3RpZnktY29udGVudDogZmxleC1lbmQKfQoKI2VzaWduX2hsdGdkIC5pbnB1dEN0biB7CiAgbWluLWhlaWdodDogNDBweCAhaW1wb3J0YW50OwogIG1hcmdpbi1yaWdodDogMTBweCAhaW1wb3J0YW50Cn0KCiNpbmRpdmlkdWFsLXNpZ24tYnV0dG9uIHsKICBtYXJnaW4tcmlnaHQ6IDIwcHgKfQoKaW5wdXQubm90X2VkaXRhYmxlLApzZWxlY3Qubm90X2VkaXRhYmxlLAp0ZXh0YXJlYS5ub3RfZWRpdGFibGUgewogIGJhY2tncm91bmQtaW1hZ2U6IHVybChsb2NrLWljLnBuZyk7CiAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDsKICBiYWNrZ3JvdW5kLXNpemU6IDE3cHggMTdweDsKICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAxMDAlIGNlbnRlcgp9CgouYXBwbGljYW50X2lucHV0Z3JvdXAgewogIGRpc3BsYXk6IGZsZXg7CiAgZmxleC13cmFwOiB3cmFwOwogIGZsZXgtZ3JvdzogMQp9CgouZ3JlYXRlX2NoZWNrYm94IHsKICB3aWR0aDogMTAwJQp9CgpAbWVkaWEgKG1heC13aWR0aDo5OTFweCkgewogIC5pbnB1dEN0biB7CiAgICB3aWR0aDogMTAwJQogIH0KCiAgLmZpdGNvbnRlbnRfY2hlY2sgewogICAgbWF4LXdpZHRoOiAxMDAlOwogICAgd2lkdGg6IDEwMCUKICB9CgogIC5ob21lX2NvbnRhaW5lciB7CiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uCiAgfQoKICAucGFnZS0xLWZvcm0tY3RuIHsKICAgIG1heC13aWR0aDogMTAwJTsKICAgIHdpZHRoOiAxMDAlCiAgfQoKICAuZmlsZS11cGxvYWQgbGFiZWwgewogICAgd2lkdGg6IDExMHB4CiAgfQoKICAuZmlsZS11cGxvYWQgewogICAgd2lkdGg6IDMzM3B4CiAgfQp9CgpAbWVkaWEgKG1heC13aWR0aDo0ODBweCkgewogIC5maXRjb250ZW50X2NoZWNrLmlucHV0Q3RuIGxhYmVsIHsKICAgIHdpZHRoOiBjYWxjKDEwMCUgLSAzMHB4KQogIH0KCiAgLmZpbGUtdXBsb2FkIGxhYmVsIHsKICAgIHdpZHRoOiA5OHB4CiAgfQoKICAuZmlsZS11cGxvYWQgewogICAgd2lkdGg6IDMzM3B4CiAgfQoKICAjbXlPVFBQb3B1cCAucG9wdXAtY29udGVudCB7CiAgICB3aWR0aDogdW5zZXQgIWltcG9ydGFudAogIH0KCiAgI215T1RQUG9wdXAgLnBvcHVwLWhlYWRlciBwIHsKICAgIG1hcmdpbi1sZWZ0OiAxMHB4CiAgfQoKICAjZXNpZ25faGx0Z2QgewogICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuCiAgfQoKICAjZXNpZ25faGx0Z2QgcCB7CiAgICBkaXNwbGF5OiBibG9jazsKICAgIHdpZHRoOiAxMDAlOwogICAgbWFyZ2luOiAwCiAgfQoKICAjZXNpZ25faGx0Z2QgYnV0dG9uIHsKICAgIG1hcmdpbjogMDsKICAgIG1hcmdpbi1yaWdodDogMjBweAogIH0KfQoKLm15dmVyTW9kYWwgewogIHBvc2l0aW9uOiBmaXhlZDsKICBsZWZ0OiAwOwogIHRvcDogMDsKICB3aWR0aDogMTAwJTsKICBoZWlnaHQ6IDEwMCU7CiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAuNSk7CiAgb3BhY2l0eTogMDsKICB2aXNpYmlsaXR5OiBoaWRkZW47CiAgdHJhbnNmb3JtOiBzY2FsZSgxLjEpOwogIHRyYW5zaXRpb246IHZpc2liaWxpdHkgMHMgbGluZWFyIC4yNXMsIG9wYWNpdHkgLjI1cyAwcywgdHJhbnNmb3JtIC4yNXMKfQoKLnBvcG91dGVyY29udGVudCB7CiAgbWF4LXdpZHRoOiA2MDBweDsKICB3aWR0aDogaW5oZXJpdDsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgdG9wOiA1MCU7CiAgbGVmdDogNTAlOwogIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpOwogIHBhZGRpbmc6IDFyZW0gMS41cmVtOwogIHBhZGRpbmc6IDAgMjBweAp9CgoucG9wdXAtY29udGVudCB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjsKICB3aWR0aDogMTAwJTsKICBwYWRkaW5nOiAyMHB4IDI1cHg7CiAgYm9yZGVyLXJhZGl1czogLjVyZW0KfQoKLnBvcHVwLWZvb3RlciB7CiAgd2lkdGg6IDEwMCU7CiAgdGV4dC1hbGlnbjogZW5kCn0KCi5wb3B1cC1mb290ZXIgLmlnbm9yZVByX0J0biB7CiAgY29sb3I6ICNmZmY7CiAgcGFkZGluZzogMTBweDsKICBib3JkZXItcmFkaXVzOiAzcHg7CiAgYm9yZGVyOiBub25lOwogIG1hcmdpbjogNXB4OwogIGJhY2tncm91bmQtY29sb3I6ICM2YjQ4NDY7CiAgY3Vyc29yOiBwb2ludGVyCn0KCi5wb3B1cC1mb290ZXIgLmRvY19yZXVwbG9hZEJ0biB7CiAgcGFkZGluZzogMTBweDsKICBib3JkZXI6IG5vbmU7CiAgbWFyZ2luOiA1cHg7CiAgYm9yZGVyLXJhZGl1czogM3B4OwogIGN1cnNvcjogcG9pbnRlcgp9CgoucG9wdXAtYm9keSB7CiAgbWFyZ2luLWJvdHRvbTogMjBweAp9Cgouc2hvdy1tb2RhbCB7CiAgb3BhY2l0eTogMTsKICB2aXNpYmlsaXR5OiB2aXNpYmxlOwogIHRyYW5zZm9ybTogc2NhbGUoMSk7CiAgdHJhbnNpdGlvbjogdmlzaWJpbGl0eSAwcyBsaW5lYXIgMHMsIG9wYWNpdHkgLjI1cyAwcywgdHJhbnNmb3JtIC4yNXMKfQoKLnBvcHVwLWhlYWRlciB7CiAgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsKICBmb250LXNpemU6IDE4cHg7CiAgbWFyZ2luLWJvdHRvbTogMjBweAp9CgoubXlsb2FkZXIgewogIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICB3aWR0aDogMmVtOwogIGhlaWdodDogMmVtOwogIGNvbG9yOiBpbmhlcml0OwogIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7CiAgcG9pbnRlci1ldmVudHM6IG5vbmU7CiAgYm9yZGVyOiAuMmVtIGRvdHRlZCBjdXJyZW50Y29sb3I7CiAgYm9yZGVyLXJhZGl1czogNTAlOwogIGFuaW1hdGlvbjogMXMgbWxhbG9hZGVyIGxpbmVhciBpbmZpbml0ZQp9CgpAa2V5ZnJhbWVzIG1sYWxvYWRlciB7CiAgMCUgewogICAgdHJhbnNmb3JtOiByb3RhdGUoMCkKICB9CgogIDEwMCUgewogICAgdHJhbnNmb3JtOiByb3RhdGUoMzYwZGVnKQogIH0KfQoKLmxvYWRlckNvbnRhaWVyIHsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgdG9wOiA1MCU7CiAgd2lkdGg6IDEwMCU7CiAgdGV4dC1hbGlnbjogY2VudGVyCn0KCi5wYW5jYXJkX2NoZWNrLAouYWFkaGFyX2NoZWNrIHsKICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICBtYXJnaW4tYm90dG9tOiAyMHB4Cn0KCi5hY2tub2xlZGdlLWVsZW1lbnQgewogIG1hcmdpbi10b3A6IDIwcHgKfQoKLmFja25vbGVkZ2VfY2hlY2sgbGFiZWwgewogIHdvcmQtYnJlYWs6IGJyZWFrLWFsbDsKICBtYXJnaW4tbGVmdDogMTBweAp9CgouYWNrbm9sZWRnZV9jaGVjayB7CiAgd2lkdGg6IDEwMCUgIWltcG9ydGFudDsKICBtYXgtd2lkdGg6IDEwMCU7CiAgYWxpZ24taXRlbXM6IHN0YXJ0Cn0KCiNteU9UUFBvcHVwIC5wb3B1cC1oZWFkZXIgaDMgewogIGNvbG9yOiAjNmI0ODQ2OwogIG1hcmdpbjogMDsKICBmb250LWZhbWlseTogYXJpYWw7CiAgZm9udC1zaXplOiAxOHB4Cn0KCiNteU9UUFBvcHVwIC5wb3B1cC1ib2R5IHAgewogIGNvbG9yOiAjOTlhYmI0ICFpbXBvcnRhbnQ7CiAgbWFyZ2luOiAwOwogIGZvbnQtZmFtaWx5OiBhcmlhbAp9CgojbXlPVFBQb3B1cCAucG9wdXAtYm9keSBpbnB1dCB7CiAgbWFyZ2luLXRvcDogMzBweDsKICBib3JkZXI6IDFweCBzb2xpZCAjOTlhYmI0OwogIG1pbi13aWR0aDogMzAwcHg7CiAgZGlzcGxheTogYmxvY2s7CiAgbWluLWhlaWdodDogMjBweDsKICBwYWRkaW5nOiAxMnB4OwogIGJvcmRlci1yYWRpdXM6IDZweDsKICB3aWR0aDogMTAwJTsKICBib3gtc2l6aW5nOiBib3JkZXItYm94Cn0KCiNteU9UUFBvcHVwIC5wb3B1cC1oZWFkZXIgewogIGRpc3BsYXk6IGZsZXg7CiAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2Q1ZDVkNTsKICBwYWRkaW5nLWJvdHRvbTogMTBweDsKICB3aWR0aDogMTAwJTsKICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW4KfQoKI215T1RQUG9wdXAgLmNhbmNlbF9CdG4gewogIGRpc3BsYXk6IGZsZXg7CiAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICBnYXA6IDVweDsKICBtYXJnaW46IDA7CiAgbWFyZ2luLWxlZnQ6IDUwcHg7CiAgdGV4dC10cmFuc2Zvcm06IG5vbmUKfQoKI215T1RQUG9wdXAgLmNhbmNlbF9CdG4gewogIGJhY2tncm91bmQtaW1hZ2U6IHVybCgiZGF0YTppbWFnZS9zdmcreG1sLCUzQ3N2ZyB3aWR0aD0nNDQnIGhlaWdodD0nNDcnIHZpZXdCb3g9JzAgMCA0NCA0NycgZmlsbD0nbm9uZScgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyUzRSUzQ3BhdGggZD0nTTE1LjUxNjkgMjkuNzc5NEwyOC40ODA1IDE2LjIyNTEnIHN0cm9rZT0nJTIzMzMzMzMzJyBzdHJva2Utd2lkdGg9JzEuNScgc3Ryb2tlLWxpbmVjYXA9J3JvdW5kJy8lM0UlM0NwYXRoIGQ9J00xNS41MTY5IDE2LjIyNUwyOC40ODA1IDI5Ljc3OTMnIHN0cm9rZT0nJTIzMzMzMzMzJyBzdHJva2Utd2lkdGg9JzEuNScgc3Ryb2tlLWxpbmVjYXA9J3JvdW5kJy8lM0UlM0Mvc3ZnJTNFJTBBIik7CiAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDsKICBiYWNrZ3JvdW5kLXNpemU6IDUwcHg7CiAgYmFja2dyb3VuZC1wb3NpdGlvbjogY2VudGVyOwogIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICB3aWR0aDogMzFweDsKICBoZWlnaHQ6IDE4cHg7CiAgY29sb3I6ICMwMDAKfQoKI215T1RQUG9wdXAgLnBvcHVwLWJvZHkgcCB7CiAgbWFyZ2luLWJvdHRvbTogMzBweAp9CgojbXlPVFBQb3B1cCAudmVyaWZ5X0J0biB7CiAgYmFja2dyb3VuZC1jb2xvcjogIzI0ODhjNzsKICBwYWRkaW5nOiAxMHB4IDEwcHg7CiAgYm9yZGVyOiAxcHggc29saWQgI2Q1ZDVkNTsKICBjb2xvcjogI2ZmZjsKICBmb250LXdlaWdodDogNTAwOwogIGZvbnQtc2l6ZTogMTZweDsKICBib3JkZXItcmFkaXVzOiA0cHg7CiAgbGV0dGVyLXNwYWNpbmc6IC41cHgKfQoKI215T1RQUG9wdXAgLm90cHJlc2VuZF9CdG4gewogIGJhY2tncm91bmQ6IDAgMDsKICBib3JkZXI6IG5vbmU7CiAgZm9udC1zaXplOiAxNnB4OwogIGNvbG9yOiAjODM4MzgzCn0KCiNteU9UUFBvcHVwIC5wb3B1cC1mb290ZXIgewogIHdpZHRoOiAxMDAlOwogIGRpc3BsYXk6IGZsZXg7CiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuCn0KCiNteU9UUFBvcHVwIC5vdHBfcGhvbmUgewogIGNvbG9yOiAjMDAwOwogIGZvbnQtd2VpZ2h0OiA2MDAKfQoKI215T1RQUG9wdXAgcC53YXJuaWctdGV4dCB7CiAgY29sb3I6ICNlYjRhNGEgIWltcG9ydGFudDsKICBmb250LXNpemU6IDE0cHg7CiAgbWFyZ2luOiAxMHB4IDAKfQoKLmZpdGNvbnRlbnRfY2hlY2ssCi5wYW5jYXJkX2NoZWNrLAouZml0Y29udGVudF9jaGVjaywKLmFhZGhhcl9jaGVjayB7CiAgbWF4LXdpZHRoOiAxMDAlOwogIHdpZHRoOiAxMDAlICFpbXBvcnRhbnQKfQoKLmFja25vbGVkZ2VfY2hlY2sgaW5wdXQgewogIHdpZHRoOiAyMHB4ICFpbXBvcnRhbnQ7CiAgbWF4LXdpZHRoOiAyMHB4OwogIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICBtaW4td2lkdGg6IDIwcHgKfQoKLmNoZWNrYm94LWN0biBpbnB1dCB7CiAgbWluLXdpZHRoOiAyMHB4OwogIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICB3aWR0aDogMjBweCAhaW1wb3J0YW50Cn0KCi5yZWxhdGluZV9jdG4gewogIHBvc2l0aW9uOiByZWxhdGl2ZQp9CgouaW5uZXJfaW5wdXRjdG4gewogIGRpc3BsYXk6IGZsZXg7CiAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgcmlnaHQ6IDA7CiAgd2lkdGg6IDUwJTsKICBqdXN0aWZ5LWNvbnRlbnQ6IGVuZAp9CgouaW5uZXJfaW5wdXRjdG4gaW5wdXQgewogIG1pbi13aWR0aDogMjBweDsKICB3aWR0aDogMjBweAp9CgojZXNpZ25faGx0Z2QgYSB7CiAgdGV4dC1kZWNvcmF0aW9uOiBub25lOwogIGNvbG9yOiAjMDAwOwogIHBhZGRpbmc6IDhweCAyMHB4OwogIGJvcmRlci1yYWRpdXM6IDRweDsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDA3YmZmOwogIGNvbG9yOiAjZmZmCn0KCiNteU1vZGFsIC5jbG9zZSB7CiAgcG9zaXRpb246IGFic29sdXRlOwogIHJpZ2h0OiAyMHB4Cn0KCiNlc2lnbl9obHRnZCB7CiAgcGFkZGluZzogMTBweAp9Cgojc2lnbk1vZGFsIGgyIHsKICBtYXJnaW46IDA7CiAgbWFyZ2luLWJvdHRvbTogMjBweDsKfQoKLmRvY19zZWxlY3Rpb25fY29udGFpbmVyX3JlbW92ZSB7CiAgZGlzcGxheTogZmxleDsKICBhbGlnbi1pdGVtczogY2VudGVyOwogIHdpZHRoOiAxMDAlOwogIG1heC13aWR0aDogMzM1cHg7Cn0KCmkuZmEuZmEtY2hlY2stY2lyY2xlIHsKICBjb2xvcjogIzRjYWY1MDsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgZm9udC1zaXplOiAyMnB4OwogIHRvcDogMjglOwp9CgouZ3JlZW4gewogIGNvbG9yOiAjNGNhZjUwOwp9CgojYmFja19jaGVja19pbWFnZSB7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiBhdXRvOwp9CgouaGlkZSB7CiAgZGlzcGxheTogbm9uZTsKfQoKLmJveCB7CiAgd2lkdGg6IDE1MHB4OwogIGhlaWdodDogNzBweDsKICBtYXJnaW46IGF1dG87CiAgYm9yZGVyOiAycHggZG90dGVkIGdyZXk7Cgp9CgoubXQtMTAgewogIG1hcmdpbi10b3A6IDEwcHg7Cn0KCi5hLWZsZXggewogIGRpc3BsYXk6IGZsZXg7CiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWV2ZW5seTsKfQoKI2FsbG90ZWVTaWduIHAgewogIGJvcmRlci1ib3R0b206IDJweCBkb3R0ZWQgZ3JleTsKCn0KCi5ndG5jZGV0YWlsc19saXN0IHsKICBmb250LXNpemU6IDVweCAhaW1wb3J0YW50Owp9CgoubG9hZGluZyB7CiAgcG9zaXRpb246IGFic29sdXRlOwogIHRvcDogMDsKICByaWdodDogMDsKICBib3R0b206IDA7CiAgbGVmdDogMDsKICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuMik7CgogIC8qIGJhY2tncm91bmQtY29sb3I6IHJnYigwLCAwLCAwLCAwLjIpOyAqLwp9CgouaGlkZUxvYWRlciB7CiAgZGlzcGxheTogbm9uZTsKfQoKLmxvYWRpbmctd3JhcHBlciB7CiAgcG9zaXRpb246IGFic29sdXRlOwogIHRvcDogNTAlOwogIGxlZnQ6IDUwJTsKICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTsKICBkaXNwbGF5OiBmbGV4OwogIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICBib3JkZXItcmFkaXVzOiA1cHg7CiAgcGFkZGluZzogMjBweDsKICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTsKfQoKLmxvYWRpbmctaWNvbiB7CiAgd2lkdGg6IDUwcHg7CiAgaGVpZ2h0OiA1MHB4OwogIGJvcmRlci1yYWRpdXM6IDUwJTsKICBib3JkZXItbGVmdDogNXB4IHNvbGlkIGxpZ2h0Z3JleTsKICBib3JkZXItdG9wOiA1cHggc29saWQgY3JpbXNvbjsKICBib3JkZXItcmlnaHQ6IDVweCBzb2xpZCBsaWdodGdyZXk7CiAgYm9yZGVyLWJvdHRvbTogNXB4IHNvbGlkIGNyaW1zb247CiAgYW5pbWF0aW9uOiBzcGluIDFzIGluZmluaXRlIGxpbmVhcjsKfQoKQGtleWZyYW1lcyBzcGluIHsKICBmcm9tIHsKICAgIHRyYW5zZm9ybTogcm90YXRlKDBkZWcpOwogIH0KCiAgdG8gewogICAgdHJhbnNmb3JtOiByb3RhdGUoMzYwZGVnKTsKICB9Cn0KCi5nb29nbGUtbWFwLWNvbnQgewogIHdpZHRoOiAxMDAlOwogIHBhZGRpbmc6IDEwcHggNXB4Owp9CgouY29uc2VudGZvcm0tcG9wdXAgewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICBsZWZ0OiAxMHB4OwogIHJpZ2h0OiAxMHB4OwogIGJvdHRvbTogMTBweDsKICB0b3A6IDEwcHg7CiAgei1pbmRleDogOTk5OTk7Cn0KCgoKCi8qIENvbnNlbnQgRm9ybSBQb3B1cCAqLwoubXktZGlhbG9nIHsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgdG9wOiAwOwogIGxlZnQ6IDA7CiAgYm90dG9tOiAwOwogIHJpZ2h0OiAwOwogIGJhY2tncm91bmQ6ICNmMWYxZjE7CiAgei1pbmRleDogOTk5OTk5OTsKfQoKLmRpYWxvZy1pbm5lciB7CiAgcG9zaXRpb246IGFic29sdXRlOwogIHdpZHRoOiA5MCU7CiAgaGVpZ2h0OiA4MCU7CiAgYmFja2dyb3VuZDogd2hpdGU7CiAgbGVmdDogNTAlOwogIHRvcDogNTAlOwogIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpOwogIGJvcmRlci1yYWRpdXM6IDVweDsKICBwYWRkaW5nOiAxMHB4Owp9CgouZGlhbG9nLWNsb3NlciB7CiAgaGVpZ2h0OiAyMHB4OwogIGRpc3BsYXk6IGZsZXg7CiAganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDsKfQoKLmRpYWxvZy1jb250ZW50IHsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgdG9wOiAzNXB4OwogIGJvdHRvbTogNjBweDsKICB3aWR0aDogY2FsYygxMDAlIC0gMjBweCk7CiAgb3ZlcmZsb3c6IGF1dG87Cn0KCi5kaWFsb2ctZm9vdGVyIHsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgYm90dG9tOiAxMHB4OwogIHdpZHRoOiBjYWxjKDEwMCUgLSAyMHB4KTsKICBkaXNwbGF5OiBmbGV4OwogIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsKICBhbGlnbi1pdGVtczogY2VudGVyOwp9CgouaGlkZUNvbnNlbnQgewogIGRpc3BsYXk6IG5vbmU7Cn0KCi5kaWFsb2ctZm9vdGVyIGJ1dHRvbiB7CiAgYm9yZGVyOiBub25lOwogIG91dGxpbmU6IG5vbmU7CiAgcGFkZGluZzogMTBweCAyMHB4OwogIGNvbG9yOiB3aGl0ZTsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjNWEzYzNiOwogIGJveC1zaGFkb3c6IDAgNXB4IDNweCAwIHJnYigwIDAgMCAvIDUlKSwgMCA2cHggNnB4IDAgcmdiKDAgMCAwIC8gNSUpOwoKICBib3JkZXItcmFkaXVzOiA0cHg7Cn0KCi5kaWFsb2ctZm9vdGVyIGJ1dHRvbjpob3ZlciB7CiAgY3Vyc29yOiBwb2ludGVyOwogIGNvbG9yOiB3aGl0ZTsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjNWEzYzNiOwp9CgoucmVkQWxlcnQgewogIGNvbG9yOiByZWQgIWltcG9ydGFudDsKfQoKI2Rpc21pc0NvbnNlbnQ6aG92ZXIgewogIGN1cnNvcjogcG9pbnRlcjsKfQoKI2NvbnNlbnQtZGlhbG9nIC5tYWluX2Zvcm1kZXRhaWwgewogIHBhZGRpbmctYm90dG9tOiAxNTBweDsKfQoKLnNtLWxvYWRlciB7CiAgd2lkdGg6IDMwcHg7CiAgaGVpZ2h0OiAzMHB4OwogIGJvcmRlci10b3A6IDNweCBzb2xpZCBncmVlbjsKICBib3JkZXItbGVmdDogM3B4IHNvbGlkIHRyYW5zcGFyZW50OwogIGJvcmRlci1yaWdodDogM3B4IHNvbGlkIHRyYW5zcGFyZW50OwogIGJvcmRlci1ib3R0b206IDNweCBzb2xpZCBncmVlbjsKCiAgYm9yZGVyLXJhZGl1czogNTAlOwogIGFuaW1hdGlvbjogc21Mb2FkZXJTcGluIDFzIGxpbmVhciBpbmZpbml0ZTsKfQoKQGtleWZyYW1lcyBzbUxvYWRlclNwaW4gewogIGZyb20gewogICAgdHJhbnNmb3JtOiByb3RhdGUoMGRlZyk7CiAgfQoKICB0byB7CiAgICB0cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpOwogIH0KfQoKLnNtLWxvYWRlci13cmFwcGVyIHsKICBkaXNwbGF5OiBmbGV4OwogIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICBnYXA6IDVweAp9CgoubmV3LWJ0biB7CiAgY29sb3I6ICNmZmY7CiAgYmFja2dyb3VuZC1jb2xvcjogIzQyOGJjYTsKICBib3JkZXI6IDFweCBzb2xpZCAjMzU3ZWJkOwogIGhlaWdodDogMzhweDsKICBtYXJnaW46IDA7CiAgcGFkZGluZzogNnB4IDEycHg7CiAgYm9yZGVyLXJhZGl1czogMnB4Owp9CgoubmV3LWJ0bjpob3ZlciB7CiAgYmFja2dyb3VuZC1jb2xvcjogIzMyNzZiMTsKICBib3JkZXItY29sb3I6ICMyODVlOGU7CiAgY3Vyc29yOiBwb2ludGVyOwp9Ci51c2VyLWltZy1sYWJlbHsKICBwb3NpdGlvbjogcmVsYXRpdmU7Cn0KLnVzZXItaW1nLWxhYmVsOjphZnRlcnsKICBjb250ZW50OiAiQXBwbGljYW50J3MgSW1hZ2UiOwogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICBsZWZ0OiAzMHB4OwogIHRvcDogNTBweDsKICB6LWluZGV4OiAtMTA7Cn0KCi5mdWxsLXNpemUgewogIHdpZHRoOiA5NSUgIWltcG9ydGFudDsKICBoZWlnaHQ6IDk1JTsKfQoKLmJ0bi1jb21tb24gewogIHBhZGRpbmc6IDE4cHg7CiAgYm9yZGVyOiBub25lOwogIG1hcmdpbjogNXB4OwogIGJvcmRlci1yYWRpdXM6IDNweDsKICBmb250LXNpemU6IDE2cHg7CiAgYm94LXNoYWRvdzogMCA1cHggM3B4IDAgcmdiKDAgMCAwIC8gNSUpLCAwIDZweCA2cHggMCByZ2IoMCAwIDAgLyA1JSk7CiAgYmFja2dyb3VuZDogI2ZmZjsKICBjdXJzb3I6IHBvaW50ZXI7Cn0KLmJ0bi1jb21tb246aG92ZXJ7CiAgYmFja2dyb3VuZC1jb2xvcjogI2JjYmNiYzsKICBjb2xvcjogYmxhY2s7Cn0KLmFwcGxpY2F0bl9wcmV2aWV3ewogIG1hcmdpbi10b3A6IDEwcHg7Cn0KI3ByZXZpZXctYnRuewogIGN1cnNvcjogcG9pbnRlcjsKfQouY29uc2VudC12ZXJpZmllZHsKICBwb3NpdGlvbjogcmVsYXRpdmU7Cn0KCi5jb25zZW50LXZlcmlmaWVkOjphZnRlcnsKICBjb250ZW50OiAiIjsKICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwobWFya2VkLnBuZyk7CiAgYmFja2dyb3VuZC1wb3NpdGlvbjogY2VudGVyOwogIC8qIGJhY2tncm91bmQtc2l6ZTogY292ZXI7ICovCiAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDsKICB3aWR0aDogNjBweDsKICBoZWlnaHQ6IDYwcHg7CiAgcG9zaXRpb246IGFic29sdXRlOwogIGxlZnQ6IDEwMCU7CiAgdG9wOiAwOwp9</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPBody>
        <TcpPackets>
          <PacketInfo time="519311296" offset="0" length="320" />
          <PacketInfo time="519311312" offset="320" length="25488" />
        </TcpPackets>
      </HTTPResponse>
    </HTTPTask>
    <HTTPTask id="301" hostname="cdn.jsdelivr.net" path="https://cdn.jsdelivr.net/npm/intl-tel-input@18.2.1/build/css/intlTelInput.min.css" url="https://cdn.jsdelivr.net/npm/intl-tel-input@18.2.1/build/css/intlTelInput.min.css" ip="[2a04:4e42:42:0:0:0:0:485]" port="443" connectionId="16" origin="HTML" frame="1" startDateTime="2024-02-15T10:57:48.060+05:30" startTime="519314265" endTime="519314265">
      <HTTPRequest method="GET">
        <HTTPHeaders>
          <HTTPHeaderEntity name="sec-ch-ua" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ik5vdCBBKEJyYW5kIjt2PSI5OSIsICJHb29nbGUgQ2hyb21lIjt2PSIxMjEiLCAiQ2hyb21pdW0iO3Y9IjEyMSI=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="sec-ch-ua-mobile" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>PzA=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="User-Agent" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEyMS4wLjAuMCBTYWZhcmkvNTM3LjM2</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="sec-ch-ua-platform" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>IldpbmRvd3Mi</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>dGV4dC9jc3MsKi8qO3E9MC4x</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Sec-Fetch-Site" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Y3Jvc3Mtc2l0ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Sec-Fetch-Mode" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bm8tY29ycw==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Sec-Fetch-Dest" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>c3R5bGU=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Referer" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cHM6Ly9kZXYuYmx1ZWFsZ28uY29tLw==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Encoding" index="9">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Language" index="10">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZW4tVVMsZW47cT0wLjk=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Host" index="11">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Y2RuLmpzZGVsaXZyLm5ldA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Connection" index="12">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0VUIGh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vaW50bC10ZWwtaW5wdXRAMTguMi4xL2J1aWxkL2Nzcy9pbnRsVGVsSW5wdXQubWluLmNzcyBIVFRQLzEuMQ0Kc2VjLWNoLXVhOiAiTm90IEEoQnJhbmQiO3Y9Ijk5IiwgIkdvb2dsZSBDaHJvbWUiO3Y9IjEyMSIsICJDaHJvbWl1bSI7dj0iMTIxIg0Kc2VjLWNoLXVhLW1vYmlsZTogPzANClVzZXItQWdlbnQ6IE1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS8xMjEuMC4wLjAgU2FmYXJpLzUzNy4zNg0Kc2VjLWNoLXVhLXBsYXRmb3JtOiAiV2luZG93cyINCkFjY2VwdDogdGV4dC9jc3MsKi8qO3E9MC4xDQpTZWMtRmV0Y2gtU2l0ZTogY3Jvc3Mtc2l0ZQ0KU2VjLUZldGNoLU1vZGU6IG5vLWNvcnMNClNlYy1GZXRjaC1EZXN0OiBzdHlsZQ0KUmVmZXJlcjogaHR0cHM6Ly9kZXYuYmx1ZWFsZ28uY29tLw0KQWNjZXB0LUVuY29kaW5nOiBnemlwLCBkZWZsYXRlDQpBY2NlcHQtTGFuZ3VhZ2U6IGVuLVVTLGVuO3E9MC45DQpIb3N0OiBjZG4uanNkZWxpdnIubmV0DQpDb25uZWN0aW9uOiBLZWVwLUFsaXZlDQoNCg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
      </HTTPRequest>
      <HTTPResponse>
        <contentLenght>3006</contentLenght>
        <HTTPHeaders>
          <HTTPHeaderEntity name="Connection" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Length" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MzAwNg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Access-Control-Allow-Origin" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Kg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Access-Control-Expose-Headers" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Kg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Timing-Allow-Origin" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Kg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Cache-Control" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>cHVibGljLCBtYXgtYWdlPTMxNTM2MDAwLCBzLW1heGFnZT0zMTUzNjAwMCwgaW1tdXRhYmxl</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Cross-Origin-Resource-Policy" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Y3Jvc3Mtb3JpZ2lu</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="X-Content-Type-Options" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bm9zbmlmZg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Strict-Transport-Security" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bWF4LWFnZT0zMTUzNjAwMDsgaW5jbHVkZVN1YkRvbWFpbnM7IHByZWxvYWQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Type" index="9">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>dGV4dC9jc3M7IGNoYXJzZXQ9dXRmLTg=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="X-JSD-Version" index="10">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MTguMi4x</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="X-JSD-Version-Type" index="11">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>dmVyc2lvbg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="ETag" index="12">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Vy8iNGU4MS1LY1JlZlJFaFJOY2tiWGc5ODVJdWxsbVZjak0i</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Encoding" index="13">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Ranges" index="14">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ynl0ZXM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Date" index="15">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VGh1LCAxNSBGZWIgMjAyNCAwNToxODo1MCBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Age" index="16">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MjU4MzcyMA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="X-Served-By" index="17">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Y2FjaGUtZnJhLWVkZGY4MjMwMTA2LUZSQSwgY2FjaGUtZGVsMjE3NDItREVM</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="X-Cache" index="18">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SElULCBISVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Vary" index="19">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>QWNjZXB0LUVuY29kaW5n</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="alt-svc" index="20">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aDM9Ijo0NDMiO21hPTg2NDAwLGgzLTI5PSI6NDQzIjttYT04NjQwMCxoMy0yNz0iOjQ0MyI7bWE9ODY0MDA=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SFRUUC8xLjEgMjAwIE9LDQpDb25uZWN0aW9uOiBrZWVwLWFsaXZlDQpDb250ZW50LUxlbmd0aDogMzAwNg0KQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luOiAqDQpBY2Nlc3MtQ29udHJvbC1FeHBvc2UtSGVhZGVyczogKg0KVGltaW5nLUFsbG93LU9yaWdpbjogKg0KQ2FjaGUtQ29udHJvbDogcHVibGljLCBtYXgtYWdlPTMxNTM2MDAwLCBzLW1heGFnZT0zMTUzNjAwMCwgaW1tdXRhYmxlDQpDcm9zcy1PcmlnaW4tUmVzb3VyY2UtUG9saWN5OiBjcm9zcy1vcmlnaW4NClgtQ29udGVudC1UeXBlLU9wdGlvbnM6IG5vc25pZmYNClN0cmljdC1UcmFuc3BvcnQtU2VjdXJpdHk6IG1heC1hZ2U9MzE1MzYwMDA7IGluY2x1ZGVTdWJEb21haW5zOyBwcmVsb2FkDQpDb250ZW50LVR5cGU6IHRleHQvY3NzOyBjaGFyc2V0PXV0Zi04DQpYLUpTRC1WZXJzaW9uOiAxOC4yLjENClgtSlNELVZlcnNpb24tVHlwZTogdmVyc2lvbg0KRVRhZzogVy8iNGU4MS1LY1JlZlJFaFJOY2tiWGc5ODVJdWxsbVZjak0iDQpDb250ZW50LUVuY29kaW5nOiBnemlwDQpBY2NlcHQtUmFuZ2VzOiBieXRlcw0KRGF0ZTogVGh1LCAxNSBGZWIgMjAyNCAwNToxODo1MCBHTVQNCkFnZTogMjU4MzcyMA0KWC1TZXJ2ZWQtQnk6IGNhY2hlLWZyYS1lZGRmODIzMDEwNi1GUkEsIGNhY2hlLWRlbDIxNzQyLURFTA0KWC1DYWNoZTogSElULCBISVQNClZhcnk6IEFjY2VwdC1FbmNvZGluZw0KYWx0LXN2YzogaDM9Ijo0NDMiO21hPTg2NDAwLGgzLTI5PSI6NDQzIjttYT04NjQwMCxoMy0yNz0iOjQ0MyI7bWE9ODY0MDANCg0K</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPBody>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Lml0aXtwb3NpdGlvbjpyZWxhdGl2ZTtkaXNwbGF5OmlubGluZS1ibG9ja30uaXRpICp7Ym94LXNpemluZzpib3JkZXItYm94fS5pdGlfX2hpZGV7ZGlzcGxheTpub25lfS5pdGlfX3YtaGlkZXt2aXNpYmlsaXR5OmhpZGRlbn0uaXRpIGlucHV0LC5pdGkgaW5wdXRbdHlwZT10ZWxdLC5pdGkgaW5wdXRbdHlwZT10ZXh0XXtwb3NpdGlvbjpyZWxhdGl2ZTt6LWluZGV4OjA7bWFyZ2luLXRvcDowIWltcG9ydGFudDttYXJnaW4tYm90dG9tOjAhaW1wb3J0YW50O3BhZGRpbmctcmlnaHQ6MzZweDttYXJnaW4tcmlnaHQ6MH0uaXRpX19mbGFnLWNvbnRhaW5lcntwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtib3R0b206MDtyaWdodDowO3BhZGRpbmc6MXB4fS5pdGlfX3NlbGVjdGVkLWZsYWd7ei1pbmRleDoxO3Bvc2l0aW9uOnJlbGF0aXZlO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7aGVpZ2h0OjEwMCU7cGFkZGluZzowIDZweCAwIDhweH0uaXRpX19hcnJvd3ttYXJnaW4tbGVmdDo2cHg7d2lkdGg6MDtoZWlnaHQ6MDtib3JkZXItbGVmdDozcHggc29saWQgdHJhbnNwYXJlbnQ7Ym9yZGVyLXJpZ2h0OjNweCBzb2xpZCB0cmFuc3BhcmVudDtib3JkZXItdG9wOjRweCBzb2xpZCAjNTU1fVtkaXI9cnRsXSAuaXRpX19hcnJvd3ttYXJnaW4tcmlnaHQ6NnB4O21hcmdpbi1sZWZ0OjB9Lml0aV9fYXJyb3ctLXVwe2JvcmRlci10b3A6bm9uZTtib3JkZXItYm90dG9tOjRweCBzb2xpZCAjNTU1fS5pdGlfX2NvdW50cnktbGlzdHtwb3NpdGlvbjphYnNvbHV0ZTt6LWluZGV4OjI7bGlzdC1zdHlsZTpub25lO3BhZGRpbmc6MDttYXJnaW46MCAwIDAgLTFweDtib3gtc2hhZG93OjFweCAxcHggNHB4IHJnYmEoMCwwLDAsLjIpO2JhY2tncm91bmQtY29sb3I6I2ZmZjtib3JkZXI6MXB4IHNvbGlkICNjY2M7d2hpdGUtc3BhY2U6bm93cmFwO21heC1oZWlnaHQ6MjAwcHg7b3ZlcmZsb3cteTpzY3JvbGw7LXdlYmtpdC1vdmVyZmxvdy1zY3JvbGxpbmc6dG91Y2h9Lml0aV9fY291bnRyeS1saXN0LS1kcm9wdXB7Ym90dG9tOjEwMCU7bWFyZ2luLWJvdHRvbTotMXB4fUBtZWRpYSAobWF4LXdpZHRoOjUwMHB4KXsuaXRpX19jb3VudHJ5LWxpc3R7d2hpdGUtc3BhY2U6bm9ybWFsfX0uaXRpX19mbGFnLWJveHtkaXNwbGF5OmlubGluZS1ibG9jazt3aWR0aDoyMHB4fS5pdGlfX2RpdmlkZXJ7cGFkZGluZy1ib3R0b206NXB4O21hcmdpbi1ib3R0b206NXB4O2JvcmRlci1ib3R0b206MXB4IHNvbGlkICNjY2N9Lml0aV9fY291bnRyeXtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO3BhZGRpbmc6NXB4IDEwcHg7b3V0bGluZTowfS5pdGlfX2RpYWwtY29kZXtjb2xvcjojOTk5fS5pdGlfX2NvdW50cnkuaXRpX19oaWdobGlnaHR7YmFja2dyb3VuZC1jb2xvcjpyZ2JhKDAsMCwwLC4wNSl9Lml0aV9fY291bnRyeS1uYW1lLC5pdGlfX2ZsYWctYm94e21hcmdpbi1yaWdodDo2cHh9W2Rpcj1ydGxdIC5pdGlfX2NvdW50cnktbmFtZSxbZGlyPXJ0bF0gLml0aV9fZmxhZy1ib3h7bWFyZ2luLXJpZ2h0OjA7bWFyZ2luLWxlZnQ6NnB4fS5pdGktLWFsbG93LWRyb3Bkb3duIGlucHV0LC5pdGktLWFsbG93LWRyb3Bkb3duIGlucHV0W3R5cGU9dGVsXSwuaXRpLS1hbGxvdy1kcm9wZG93biBpbnB1dFt0eXBlPXRleHRdLC5pdGktLXNlcGFyYXRlLWRpYWwtY29kZSBpbnB1dCwuaXRpLS1zZXBhcmF0ZS1kaWFsLWNvZGUgaW5wdXRbdHlwZT10ZWxdLC5pdGktLXNlcGFyYXRlLWRpYWwtY29kZSBpbnB1dFt0eXBlPXRleHRde3BhZGRpbmctcmlnaHQ6NnB4O3BhZGRpbmctbGVmdDo1MnB4O21hcmdpbi1sZWZ0OjB9W2Rpcj1ydGxdIC5pdGktLWFsbG93LWRyb3Bkb3duIGlucHV0LFtkaXI9cnRsXSAuaXRpLS1hbGxvdy1kcm9wZG93biBpbnB1dFt0eXBlPXRlbF0sW2Rpcj1ydGxdIC5pdGktLWFsbG93LWRyb3Bkb3duIGlucHV0W3R5cGU9dGV4dF0sW2Rpcj1ydGxdIC5pdGktLXNlcGFyYXRlLWRpYWwtY29kZSBpbnB1dCxbZGlyPXJ0bF0gLml0aS0tc2VwYXJhdGUtZGlhbC1jb2RlIGlucHV0W3R5cGU9dGVsXSxbZGlyPXJ0bF0gLml0aS0tc2VwYXJhdGUtZGlhbC1jb2RlIGlucHV0W3R5cGU9dGV4dF17cGFkZGluZy1yaWdodDo1MnB4O3BhZGRpbmctbGVmdDo2cHg7bWFyZ2luLXJpZ2h0OjB9Lml0aS0tYWxsb3ctZHJvcGRvd24gLml0aV9fZmxhZy1jb250YWluZXIsLml0aS0tc2VwYXJhdGUtZGlhbC1jb2RlIC5pdGlfX2ZsYWctY29udGFpbmVye3JpZ2h0OmF1dG87bGVmdDowfVtkaXI9cnRsXSAuaXRpLS1hbGxvdy1kcm9wZG93biAuaXRpX19mbGFnLWNvbnRhaW5lcixbZGlyPXJ0bF0gLml0aS0tc2VwYXJhdGUtZGlhbC1jb2RlIC5pdGlfX2ZsYWctY29udGFpbmVye3JpZ2h0OjA7bGVmdDphdXRvfS5pdGktLWFsbG93LWRyb3Bkb3duIC5pdGlfX2ZsYWctY29udGFpbmVyOmhvdmVye2N1cnNvcjpwb2ludGVyfS5pdGktLWFsbG93LWRyb3Bkb3duIC5pdGlfX2ZsYWctY29udGFpbmVyOmhvdmVyIC5pdGlfX3NlbGVjdGVkLWZsYWd7YmFja2dyb3VuZC1jb2xvcjpyZ2JhKDAsMCwwLC4wNSl9Lml0aS0tYWxsb3ctZHJvcGRvd24gaW5wdXRbZGlzYWJsZWRdKy5pdGlfX2ZsYWctY29udGFpbmVyOmhvdmVyLC5pdGktLWFsbG93LWRyb3Bkb3duIGlucHV0W3JlYWRvbmx5XSsuaXRpX19mbGFnLWNvbnRhaW5lcjpob3ZlcntjdXJzb3I6ZGVmYXVsdH0uaXRpLS1hbGxvdy1kcm9wZG93biBpbnB1dFtkaXNhYmxlZF0rLml0aV9fZmxhZy1jb250YWluZXI6aG92ZXIgLml0aV9fc2VsZWN0ZWQtZmxhZywuaXRpLS1hbGxvdy1kcm9wZG93biBpbnB1dFtyZWFkb25seV0rLml0aV9fZmxhZy1jb250YWluZXI6aG92ZXIgLml0aV9fc2VsZWN0ZWQtZmxhZ3tiYWNrZ3JvdW5kLWNvbG9yOnRyYW5zcGFyZW50fS5pdGktLXNlcGFyYXRlLWRpYWwtY29kZSAuaXRpX19zZWxlY3RlZC1mbGFne2JhY2tncm91bmQtY29sb3I6cmdiYSgwLDAsMCwuMDUpfS5pdGktLXNlcGFyYXRlLWRpYWwtY29kZS5pdGktLXNob3ctZmxhZ3MgLml0aV9fc2VsZWN0ZWQtZGlhbC1jb2Rle21hcmdpbi1sZWZ0OjZweH1bZGlyPXJ0bF0gLml0aS0tc2VwYXJhdGUtZGlhbC1jb2RlLml0aS0tc2hvdy1mbGFncyAuaXRpX19zZWxlY3RlZC1kaWFsLWNvZGV7bWFyZ2luLWxlZnQ6MDttYXJnaW4tcmlnaHQ6NnB4fS5pdGktLWNvbnRhaW5lcntwb3NpdGlvbjphYnNvbHV0ZTt0b3A6LTEwMDBweDtsZWZ0Oi0xMDAwcHg7ei1pbmRleDoxMDYwO3BhZGRpbmc6MXB4fS5pdGktLWNvbnRhaW5lcjpob3ZlcntjdXJzb3I6cG9pbnRlcn0uaXRpLW1vYmlsZSAuaXRpLS1jb250YWluZXJ7dG9wOjMwcHg7Ym90dG9tOjMwcHg7bGVmdDozMHB4O3JpZ2h0OjMwcHg7cG9zaXRpb246Zml4ZWR9Lml0aS1tb2JpbGUgLml0aV9fY291bnRyeS1saXN0e21heC1oZWlnaHQ6MTAwJTt3aWR0aDoxMDAlfS5pdGktbW9iaWxlIC5pdGlfX2NvdW50cnl7cGFkZGluZzoxMHB4IDEwcHg7bGluZS1oZWlnaHQ6MS41ZW19Lml0aV9fZmxhZ3t3aWR0aDoyMHB4fS5pdGlfX2ZsYWcuaXRpX19iZXt3aWR0aDoxOHB4fS5pdGlfX2ZsYWcuaXRpX19jaHt3aWR0aDoxNXB4fS5pdGlfX2ZsYWcuaXRpX19tY3t3aWR0aDoxOXB4fS5pdGlfX2ZsYWcuaXRpX19uZXt3aWR0aDoxOHB4fS5pdGlfX2ZsYWcuaXRpX19ucHt3aWR0aDoxM3B4fS5pdGlfX2ZsYWcuaXRpX192YXt3aWR0aDoxNXB4fUBtZWRpYSAoLXdlYmtpdC1taW4tZGV2aWNlLXBpeGVsLXJhdGlvOjIpLChtaW4tcmVzb2x1dGlvbjoxOTJkcGkpey5pdGlfX2ZsYWd7YmFja2dyb3VuZC1zaXplOjU3NjJweCAxNXB4fX0uaXRpX19mbGFnLml0aV9fYWN7aGVpZ2h0OjEwcHg7YmFja2dyb3VuZC1wb3NpdGlvbjowIDB9Lml0aV9fZmxhZy5pdGlfX2Fke2hlaWdodDoxNHB4O2JhY2tncm91bmQtcG9zaXRpb246LTIycHggMH0uaXRpX19mbGFnLml0aV9fYWV7aGVpZ2h0OjEwcHg7YmFja2dyb3VuZC1wb3NpdGlvbjotNDRweCAwfS5pdGlfX2ZsYWcuaXRpX19hZntoZWlnaHQ6MTRweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi02NnB4IDB9Lml0aV9fZmxhZy5pdGlfX2Fne2hlaWdodDoxNHB4O2JhY2tncm91bmQtcG9zaXRpb246LTg4cHggMH0uaXRpX19mbGFnLml0aV9fYWl7aGVpZ2h0OjEwcHg7YmFja2dyb3VuZC1wb3NpdGlvbjotMTEwcHggMH0uaXRpX19mbGFnLml0aV9fYWx7aGVpZ2h0OjE1cHg7YmFja2dyb3VuZC1wb3NpdGlvbjotMTMycHggMH0uaXRpX19mbGFnLml0aV9fYW17aGVpZ2h0OjEwcHg7YmFja2dyb3VuZC1wb3NpdGlvbjotMTU0cHggMH0uaXRpX19mbGFnLml0aV9fYW97aGVpZ2h0OjE0cHg7YmFja2dyb3VuZC1wb3NpdGlvbjotMTc2cHggMH0uaXRpX19mbGFnLml0aV9fYXF7aGVpZ2h0OjE0cHg7YmFja2dyb3VuZC1wb3NpdGlvbjotMTk4cHggMH0uaXRpX19mbGFnLml0aV9fYXJ7aGVpZ2h0OjEzcHg7YmFja2dyb3VuZC1wb3NpdGlvbjotMjIwcHggMH0uaXRpX19mbGFnLml0aV9fYXN7aGVpZ2h0OjEwcHg7YmFja2dyb3VuZC1wb3NpdGlvbjotMjQycHggMH0uaXRpX19mbGFnLml0aV9fYXR7aGVpZ2h0OjE0cHg7YmFja2dyb3VuZC1wb3NpdGlvbjotMjY0cHggMH0uaXRpX19mbGFnLml0aV9fYXV7aGVpZ2h0OjEwcHg7YmFja2dyb3VuZC1wb3NpdGlvbjotMjg2cHggMH0uaXRpX19mbGFnLml0aV9fYXd7aGVpZ2h0OjE0cHg7YmFja2dyb3VuZC1wb3NpdGlvbjotMzA4cHggMH0uaXRpX19mbGFnLml0aV9fYXh7aGVpZ2h0OjEzcHg7YmFja2dyb3VuZC1wb3NpdGlvbjotMzMwcHggMH0uaXRpX19mbGFnLml0aV9fYXp7aGVpZ2h0OjEwcHg7YmFja2dyb3VuZC1wb3NpdGlvbjotMzUycHggMH0uaXRpX19mbGFnLml0aV9fYmF7aGVpZ2h0OjEwcHg7YmFja2dyb3VuZC1wb3NpdGlvbjotMzc0cHggMH0uaXRpX19mbGFnLml0aV9fYmJ7aGVpZ2h0OjE0cHg7YmFja2dyb3VuZC1wb3NpdGlvbjotMzk2cHggMH0uaXRpX19mbGFnLml0aV9fYmR7aGVpZ2h0OjEycHg7YmFja2dyb3VuZC1wb3NpdGlvbjotNDE4cHggMH0uaXRpX19mbGFnLml0aV9fYmV7aGVpZ2h0OjE1cHg7YmFja2dyb3VuZC1wb3NpdGlvbjotNDQwcHggMH0uaXRpX19mbGFnLml0aV9fYmZ7aGVpZ2h0OjE0cHg7YmFja2dyb3VuZC1wb3NpdGlvbjotNDYwcHggMH0uaXRpX19mbGFnLml0aV9fYmd7aGVpZ2h0OjEycHg7YmFja2dyb3VuZC1wb3NpdGlvbjotNDgycHggMH0uaXRpX19mbGFnLml0aV9fYmh7aGVpZ2h0OjEycHg7YmFja2dyb3VuZC1wb3NpdGlvbjotNTA0cHggMH0uaXRpX19mbGFnLml0aV9fYml7aGVpZ2h0OjEycHg7YmFja2dyb3VuZC1wb3NpdGlvbjotNTI2cHggMH0uaXRpX19mbGFnLml0aV9fYmp7aGVpZ2h0OjE0cHg7YmFja2dyb3VuZC1wb3NpdGlvbjotNTQ4cHggMH0uaXRpX19mbGFnLml0aV9fYmx7aGVpZ2h0OjE0cHg7YmFja2dyb3VuZC1wb3NpdGlvbjotNTcwcHggMH0uaXRpX19mbGFnLml0aV9fYm17aGVpZ2h0OjEwcHg7YmFja2dyb3VuZC1wb3NpdGlvbjotNTkycHggMH0uaXRpX19mbGFnLml0aV9fYm57aGVpZ2h0OjEwcHg7YmFja2dyb3VuZC1wb3NpdGlvbjotNjE0cHggMH0uaXRpX19mbGFnLml0aV9fYm97aGVpZ2h0OjE0cHg7YmFja2dyb3VuZC1wb3NpdGlvbjotNjM2cHggMH0uaXRpX19mbGFnLml0aV9fYnF7aGVpZ2h0OjE0cHg7YmFja2dyb3VuZC1wb3NpdGlvbjotNjU4cHggMH0uaXRpX19mbGFnLml0aV9fYnJ7aGVpZ2h0OjE0cHg7YmFja2dyb3VuZC1wb3NpdGlvbjotNjgwcHggMH0uaXRpX19mbGFnLml0aV9fYnN7aGVpZ2h0OjEwcHg7YmFja2dyb3VuZC1wb3NpdGlvbjotNzAycHggMH0uaXRpX19mbGFnLml0aV9fYnR7aGVpZ2h0OjE0cHg7YmFja2dyb3VuZC1wb3NpdGlvbjotNzI0cHggMH0uaXRpX19mbGFnLml0aV9fYnZ7aGVpZ2h0OjE1cHg7YmFja2dyb3VuZC1wb3NpdGlvbjotNzQ2cHggMH0uaXRpX19mbGFnLml0aV9fYnd7aGVpZ2h0OjE0cHg7YmFja2dyb3VuZC1wb3NpdGlvbjotNzY4cHggMH0uaXRpX19mbGFnLml0aV9fYnl7aGVpZ2h0OjEwcHg7YmFja2dyb3VuZC1wb3NpdGlvbjotNzkwcHggMH0uaXRpX19mbGFnLml0aV9fYnp7aGVpZ2h0OjEycHg7YmFja2dyb3VuZC1wb3NpdGlvbjotODEycHggMH0uaXRpX19mbGFnLml0aV9fY2F7aGVpZ2h0OjEwcHg7YmFja2dyb3VuZC1wb3NpdGlvbjotODM0cHggMH0uaXRpX19mbGFnLml0aV9fY2N7aGVpZ2h0OjEwcHg7YmFja2dyb3VuZC1wb3NpdGlvbjotODU2cHggMH0uaXRpX19mbGFnLml0aV9fY2R7aGVpZ2h0OjE1cHg7YmFja2dyb3VuZC1wb3NpdGlvbjotODc4cHggMH0uaXRpX19mbGFnLml0aV9fY2Z7aGVpZ2h0OjE0cHg7YmFja2dyb3VuZC1wb3NpdGlvbjotOTAwcHggMH0uaXRpX19mbGFnLml0aV9fY2d7aGVpZ2h0OjE0cHg7YmFja2dyb3VuZC1wb3NpdGlvbjotOTIycHggMH0uaXRpX19mbGFnLml0aV9fY2h7aGVpZ2h0OjE1cHg7YmFja2dyb3VuZC1wb3NpdGlvbjotOTQ0cHggMH0uaXRpX19mbGFnLml0aV9fY2l7aGVpZ2h0OjE0cHg7YmFja2dyb3VuZC1wb3NpdGlvbjotOTYxcHggMH0uaXRpX19mbGFnLml0aV9fY2t7aGVpZ2h0OjEwcHg7YmFja2dyb3VuZC1wb3NpdGlvbjotOTgzcHggMH0uaXRpX19mbGFnLml0aV9fY2x7aGVpZ2h0OjE0cHg7YmFja2dyb3VuZC1wb3NpdGlvbjotMTAwNXB4IDB9Lml0aV9fZmxhZy5pdGlfX2Nte2hlaWdodDoxNHB4O2JhY2tncm91bmQtcG9zaXRpb246LTEwMjdweCAwfS5pdGlfX2ZsYWcuaXRpX19jbntoZWlnaHQ6MTRweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi0xMDQ5cHggMH0uaXRpX19mbGFnLml0aV9fY297aGVpZ2h0OjE0cHg7YmFja2dyb3VuZC1wb3NpdGlvbjotMTA3MXB4IDB9Lml0aV9fZmxhZy5pdGlfX2Nwe2hlaWdodDoxNHB4O2JhY2tncm91bmQtcG9zaXRpb246LTEwOTNweCAwfS5pdGlfX2ZsYWcuaXRpX19jcXtoZWlnaHQ6MTJweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi0xMTE1cHggMH0uaXRpX19mbGFnLml0aV9fY3J7aGVpZ2h0OjEycHg7YmFja2dyb3VuZC1wb3NpdGlvbjotMTEzN3B4IDB9Lml0aV9fZmxhZy5pdGlfX2N1e2hlaWdodDoxMHB4O2JhY2tncm91bmQtcG9zaXRpb246LTExNTlweCAwfS5pdGlfX2ZsYWcuaXRpX19jdntoZWlnaHQ6MTJweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi0xMTgxcHggMH0uaXRpX19mbGFnLml0aV9fY3d7aGVpZ2h0OjE0cHg7YmFja2dyb3VuZC1wb3NpdGlvbjotMTIwM3B4IDB9Lml0aV9fZmxhZy5pdGlfX2N4e2hlaWdodDoxMHB4O2JhY2tncm91bmQtcG9zaXRpb246LTEyMjVweCAwfS5pdGlfX2ZsYWcuaXRpX19jeXtoZWlnaHQ6MTRweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi0xMjQ3cHggMH0uaXRpX19mbGFnLml0aV9fY3p7aGVpZ2h0OjE0cHg7YmFja2dyb3VuZC1wb3NpdGlvbjotMTI2OXB4IDB9Lml0aV9fZmxhZy5pdGlfX2Rle2hlaWdodDoxMnB4O2JhY2tncm91bmQtcG9zaXRpb246LTEyOTFweCAwfS5pdGlfX2ZsYWcuaXRpX19kZ3toZWlnaHQ6MTBweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi0xMzEzcHggMH0uaXRpX19mbGFnLml0aV9fZGp7aGVpZ2h0OjE0cHg7YmFja2dyb3VuZC1wb3NpdGlvbjotMTMzNXB4IDB9Lml0aV9fZmxhZy5pdGlfX2Rre2hlaWdodDoxNXB4O2JhY2tncm91bmQtcG9zaXRpb246LTEzNTdweCAwfS5pdGlfX2ZsYWcuaXRpX19kbXtoZWlnaHQ6MTBweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi0xMzc5cHggMH0uaXRpX19mbGFnLml0aV9fZG97aGVpZ2h0OjE0cHg7YmFja2dyb3VuZC1wb3NpdGlvbjotMTQwMXB4IDB9Lml0aV9fZmxhZy5pdGlfX2R6e2hlaWdodDoxNHB4O2JhY2tncm91bmQtcG9zaXRpb246LTE0MjNweCAwfS5pdGlfX2ZsYWcuaXRpX19lYXtoZWlnaHQ6MTRweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi0xNDQ1cHggMH0uaXRpX19mbGFnLml0aV9fZWN7aGVpZ2h0OjE0cHg7YmFja2dyb3VuZC1wb3NpdGlvbjotMTQ2N3B4IDB9Lml0aV9fZmxhZy5pdGlfX2Vle2hlaWdodDoxM3B4O2JhY2tncm91bmQtcG9zaXRpb246LTE0ODlweCAwfS5pdGlfX2ZsYWcuaXRpX19lZ3toZWlnaHQ6MTRweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi0xNTExcHggMH0uaXRpX19mbGFnLml0aV9fZWh7aGVpZ2h0OjEwcHg7YmFja2dyb3VuZC1wb3NpdGlvbjotMTUzM3B4IDB9Lml0aV9fZmxhZy5pdGlfX2Vye2hlaWdodDoxMHB4O2JhY2tncm91bmQtcG9zaXRpb246LTE1NTVweCAwfS5pdGlfX2ZsYWcuaXRpX19lc3toZWlnaHQ6MTRweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi0xNTc3cHggMH0uaXRpX19mbGFnLml0aV9fZXR7aGVpZ2h0OjEwcHg7YmFja2dyb3VuZC1wb3NpdGlvbjotMTU5OXB4IDB9Lml0aV9fZmxhZy5pdGlfX2V1e2hlaWdodDoxNHB4O2JhY2tncm91bmQtcG9zaXRpb246LTE2MjFweCAwfS5pdGlfX2ZsYWcuaXRpX19lentoZWlnaHQ6MTRweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi0xNjQzcHggMH0uaXRpX19mbGFnLml0aV9fZml7aGVpZ2h0OjEycHg7YmFja2dyb3VuZC1wb3NpdGlvbjotMTY2NXB4IDB9Lml0aV9fZmxhZy5pdGlfX2Zqe2hlaWdodDoxMHB4O2JhY2tncm91bmQtcG9zaXRpb246LTE2ODdweCAwfS5pdGlfX2ZsYWcuaXRpX19ma3toZWlnaHQ6MTBweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi0xNzA5cHggMH0uaXRpX19mbGFnLml0aV9fZm17aGVpZ2h0OjExcHg7YmFja2dyb3VuZC1wb3NpdGlvbjotMTczMXB4IDB9Lml0aV9fZmxhZy5pdGlfX2Zve2hlaWdodDoxNXB4O2JhY2tncm91bmQtcG9zaXRpb246LTE3NTNweCAwfS5pdGlfX2ZsYWcuaXRpX19mcntoZWlnaHQ6MTRweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi0xNzc1cHggMH0uaXRpX19mbGFnLml0aV9fZnh7aGVpZ2h0OjE0cHg7YmFja2dyb3VuZC1wb3NpdGlvbjotMTc5N3B4IDB9Lml0aV9fZmxhZy5pdGlfX2dhe2hlaWdodDoxNXB4O2JhY2tncm91bmQtcG9zaXRpb246LTE4MTlweCAwfS5pdGlfX2ZsYWcuaXRpX19nYntoZWlnaHQ6MTBweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi0xODQxcHggMH0uaXRpX19mbGFnLml0aV9fZ2R7aGVpZ2h0OjEycHg7YmFja2dyb3VuZC1wb3NpdGlvbjotMTg2M3B4IDB9Lml0aV9fZmxhZy5pdGlfX2dle2hlaWdodDoxNHB4O2JhY2tncm91bmQtcG9zaXRpb246LTE4ODVweCAwfS5pdGlfX2ZsYWcuaXRpX19nZntoZWlnaHQ6MTRweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi0xOTA3cHggMH0uaXRpX19mbGFnLml0aV9fZ2d7aGVpZ2h0OjE0cHg7YmFja2dyb3VuZC1wb3NpdGlvbjotMTkyOXB4IDB9Lml0aV9fZmxhZy5pdGlfX2doe2hlaWdodDoxNHB4O2JhY2tncm91bmQtcG9zaXRpb246LTE5NTFweCAwfS5pdGlfX2ZsYWcuaXRpX19naXtoZWlnaHQ6MTBweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi0xOTczcHggMH0uaXRpX19mbGFnLml0aV9fZ2x7aGVpZ2h0OjE0cHg7YmFja2dyb3VuZC1wb3NpdGlvbjotMTk5NXB4IDB9Lml0aV9fZmxhZy5pdGlfX2dte2hlaWdodDoxNHB4O2JhY2tncm91bmQtcG9zaXRpb246LTIwMTdweCAwfS5pdGlfX2ZsYWcuaXRpX19nbntoZWlnaHQ6MTRweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi0yMDM5cHggMH0uaXRpX19mbGFnLml0aV9fZ3B7aGVpZ2h0OjE0cHg7YmFja2dyb3VuZC1wb3NpdGlvbjotMjA2MXB4IDB9Lml0aV9fZmxhZy5pdGlfX2dxe2hlaWdodDoxNHB4O2JhY2tncm91bmQtcG9zaXRpb246LTIwODNweCAwfS5pdGlfX2ZsYWcuaXRpX19ncntoZWlnaHQ6MTRweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi0yMTA1cHggMH0uaXRpX19mbGFnLml0aV9fZ3N7aGVpZ2h0OjEwcHg7YmFja2dyb3VuZC1wb3NpdGlvbjotMjEyN3B4IDB9Lml0aV9fZmxhZy5pdGlfX2d0e2hlaWdodDoxM3B4O2JhY2tncm91bmQtcG9zaXRpb246LTIxNDlweCAwfS5pdGlfX2ZsYWcuaXRpX19ndXtoZWlnaHQ6MTFweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi0yMTcxcHggMH0uaXRpX19mbGFnLml0aV9fZ3d7aGVpZ2h0OjEwcHg7YmFja2dyb3VuZC1wb3NpdGlvbjotMjE5M3B4IDB9Lml0aV9fZmxhZy5pdGlfX2d5e2hlaWdodDoxMnB4O2JhY2tncm91bmQtcG9zaXRpb246LTIyMTVweCAwfS5pdGlfX2ZsYWcuaXRpX19oa3toZWlnaHQ6MTRweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi0yMjM3cHggMH0uaXRpX19mbGFnLml0aV9faG17aGVpZ2h0OjEwcHg7YmFja2dyb3VuZC1wb3NpdGlvbjotMjI1OXB4IDB9Lml0aV9fZmxhZy5pdGlfX2hue2hlaWdodDoxMHB4O2JhY2tncm91bmQtcG9zaXRpb246LTIyODFweCAwfS5pdGlfX2ZsYWcuaXRpX19ocntoZWlnaHQ6MTBweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi0yMzAzcHggMH0uaXRpX19mbGFnLml0aV9faHR7aGVpZ2h0OjEycHg7YmFja2dyb3VuZC1wb3NpdGlvbjotMjMyNXB4IDB9Lml0aV9fZmxhZy5pdGlfX2h1e2hlaWdodDoxMHB4O2JhY2tncm91bmQtcG9zaXRpb246LTIzNDdweCAwfS5pdGlfX2ZsYWcuaXRpX19pY3toZWlnaHQ6MTRweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi0yMzY5cHggMH0uaXRpX19mbGFnLml0aV9faWR7aGVpZ2h0OjE0cHg7YmFja2dyb3VuZC1wb3NpdGlvbjotMjM5MXB4IDB9Lml0aV9fZmxhZy5pdGlfX2lle2hlaWdodDoxMHB4O2JhY2tncm91bmQtcG9zaXRpb246LTI0MTNweCAwfS5pdGlfX2ZsYWcuaXRpX19pbHtoZWlnaHQ6MTVweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi0yNDM1cHggMH0uaXRpX19mbGFnLml0aV9faW17aGVpZ2h0OjEwcHg7YmFja2dyb3VuZC1wb3NpdGlvbjotMjQ1N3B4IDB9Lml0aV9fZmxhZy5pdGlfX2lue2hlaWdodDoxNHB4O2JhY2tncm91bmQtcG9zaXRpb246LTI0NzlweCAwfS5pdGlfX2ZsYWcuaXRpX19pb3toZWlnaHQ6MTBweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi0yNTAxcHggMH0uaXRpX19mbGFnLml0aV9faXF7aGVpZ2h0OjE0cHg7YmFja2dyb3VuZC1wb3NpdGlvbjotMjUyM3B4IDB9Lml0aV9fZmxhZy5pdGlfX2lye2hlaWdodDoxMnB4O2JhY2tncm91bmQtcG9zaXRpb246LTI1NDVweCAwfS5pdGlfX2ZsYWcuaXRpX19pc3toZWlnaHQ6MTVweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi0yNTY3cHggMH0uaXRpX19mbGFnLml0aV9faXR7aGVpZ2h0OjE0cHg7YmFja2dyb3VuZC1wb3NpdGlvbjotMjU4OXB4IDB9Lml0aV9fZmxhZy5pdGlfX2ple2hlaWdodDoxMnB4O2JhY2tncm91bmQtcG9zaXRpb246LTI2MTFweCAwfS5pdGlfX2ZsYWcuaXRpX19qbXtoZWlnaHQ6MTBweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi0yNjMzcHggMH0uaXRpX19mbGFnLml0aV9fam97aGVpZ2h0OjEwcHg7YmFja2dyb3VuZC1wb3NpdGlvbjotMjY1NXB4IDB9Lml0aV9fZmxhZy5pdGlfX2pwe2hlaWdodDoxNHB4O2JhY2tncm91bmQtcG9zaXRpb246LTI2NzdweCAwfS5pdGlfX2ZsYWcuaXRpX19rZXtoZWlnaHQ6MTRweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi0yNjk5cHggMH0uaXRpX19mbGFnLml0aV9fa2d7aGVpZ2h0OjEycHg7YmFja2dyb3VuZC1wb3NpdGlvbjotMjcyMXB4IDB9Lml0aV9fZmxhZy5pdGlfX2toe2hlaWdodDoxM3B4O2JhY2tncm91bmQtcG9zaXRpb246LTI3NDNweCAwfS5pdGlfX2ZsYWcuaXRpX19raXtoZWlnaHQ6MTBweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi0yNzY1cHggMH0uaXRpX19mbGFnLml0aV9fa217aGVpZ2h0OjEycHg7YmFja2dyb3VuZC1wb3NpdGlvbjotMjc4N3B4IDB9Lml0aV9fZmxhZy5pdGlfX2tue2hlaWdodDoxNHB4O2JhY2tncm91bmQtcG9zaXRpb246LTI4MDlweCAwfS5pdGlfX2ZsYWcuaXRpX19rcHtoZWlnaHQ6MTBweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi0yODMxcHggMH0uaXRpX19mbGFnLml0aV9fa3J7aGVpZ2h0OjE0cHg7YmFja2dyb3VuZC1wb3NpdGlvbjotMjg1M3B4IDB9Lml0aV9fZmxhZy5pdGlfX2t3e2hlaWdodDoxMHB4O2JhY2tncm91bmQtcG9zaXRpb246LTI4NzVweCAwfS5pdGlfX2ZsYWcuaXRpX19reXtoZWlnaHQ6MTBweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi0yODk3cHggMH0uaXRpX19mbGFnLml0aV9fa3p7aGVpZ2h0OjEwcHg7YmFja2dyb3VuZC1wb3NpdGlvbjotMjkxOXB4IDB9Lml0aV9fZmxhZy5pdGlfX2xhe2hlaWdodDoxNHB4O2JhY2tncm91bmQtcG9zaXRpb246LTI5NDFweCAwfS5pdGlfX2ZsYWcuaXRpX19sYntoZWlnaHQ6MTRweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi0yOTYzcHggMH0uaXRpX19mbGFnLml0aV9fbGN7aGVpZ2h0OjEwcHg7YmFja2dyb3VuZC1wb3NpdGlvbjotMjk4NXB4IDB9Lml0aV9fZmxhZy5pdGlfX2xpe2hlaWdodDoxMnB4O2JhY2tncm91bmQtcG9zaXRpb246LTMwMDdweCAwfS5pdGlfX2ZsYWcuaXRpX19sa3toZWlnaHQ6MTBweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi0zMDI5cHggMH0uaXRpX19mbGFnLml0aV9fbHJ7aGVpZ2h0OjExcHg7YmFja2dyb3VuZC1wb3NpdGlvbjotMzA1MXB4IDB9Lml0aV9fZmxhZy5pdGlfX2xze2hlaWdodDoxNHB4O2JhY2tncm91bmQtcG9zaXRpb246LTMwNzNweCAwfS5pdGlfX2ZsYWcuaXRpX19sdHtoZWlnaHQ6MTJweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi0zMDk1cHggMH0uaXRpX19mbGFnLml0aV9fbHV7aGVpZ2h0OjEycHg7YmFja2dyb3VuZC1wb3NpdGlvbjotMzExN3B4IDB9Lml0aV9fZmxhZy5pdGlfX2x2e2hlaWdodDoxMHB4O2JhY2tncm91bmQtcG9zaXRpb246LTMxMzlweCAwfS5pdGlfX2ZsYWcuaXRpX19seXtoZWlnaHQ6MTBweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi0zMTYxcHggMH0uaXRpX19mbGFnLml0aV9fbWF7aGVpZ2h0OjE0cHg7YmFja2dyb3VuZC1wb3NpdGlvbjotMzE4M3B4IDB9Lml0aV9fZmxhZy5pdGlfX21je2hlaWdodDoxNXB4O2JhY2tncm91bmQtcG9zaXRpb246LTMyMDVweCAwfS5pdGlfX2ZsYWcuaXRpX19tZHtoZWlnaHQ6MTBweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi0zMjI2cHggMH0uaXRpX19mbGFnLml0aV9fbWV7aGVpZ2h0OjEwcHg7YmFja2dyb3VuZC1wb3NpdGlvbjotMzI0OHB4IDB9Lml0aV9fZmxhZy5pdGlfX21me2hlaWdodDoxNHB4O2JhY2tncm91bmQtcG9zaXRpb246LTMyNzBweCAwfS5pdGlfX2ZsYWcuaXRpX19tZ3toZWlnaHQ6MTRweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi0zMjkycHggMH0uaXRpX19mbGFnLml0aV9fbWh7aGVpZ2h0OjExcHg7YmFja2dyb3VuZC1wb3NpdGlvbjotMzMxNHB4IDB9Lml0aV9fZmxhZy5pdGlfX21re2hlaWdodDoxMHB4O2JhY2tncm91bmQtcG9zaXRpb246LTMzMzZweCAwfS5pdGlfX2ZsYWcuaXRpX19tbHtoZWlnaHQ6MTRweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi0zMzU4cHggMH0uaXRpX19mbGFnLml0aV9fbW17aGVpZ2h0OjE0cHg7YmFja2dyb3VuZC1wb3NpdGlvbjotMzM4MHB4IDB9Lml0aV9fZmxhZy5pdGlfX21ue2hlaWdodDoxMHB4O2JhY2tncm91bmQtcG9zaXRpb246LTM0MDJweCAwfS5pdGlfX2ZsYWcuaXRpX19tb3toZWlnaHQ6MTRweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi0zNDI0cHggMH0uaXRpX19mbGFnLml0aV9fbXB7aGVpZ2h0OjEwcHg7YmFja2dyb3VuZC1wb3NpdGlvbjotMzQ0NnB4IDB9Lml0aV9fZmxhZy5pdGlfX21xe2hlaWdodDoxNHB4O2JhY2tncm91bmQtcG9zaXRpb246LTM0NjhweCAwfS5pdGlfX2ZsYWcuaXRpX19tcntoZWlnaHQ6MTRweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi0zNDkwcHggMH0uaXRpX19mbGFnLml0aV9fbXN7aGVpZ2h0OjEwcHg7YmFja2dyb3VuZC1wb3NpdGlvbjotMzUxMnB4IDB9Lml0aV9fZmxhZy5pdGlfX210e2hlaWdodDoxNHB4O2JhY2tncm91bmQtcG9zaXRpb246LTM1MzRweCAwfS5pdGlfX2ZsYWcuaXRpX19tdXtoZWlnaHQ6MTRweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi0zNTU2cHggMH0uaXRpX19mbGFnLml0aV9fbXZ7aGVpZ2h0OjE0cHg7YmFja2dyb3VuZC1wb3NpdGlvbjotMzU3OHB4IDB9Lml0aV9fZmxhZy5pdGlfX213e2hlaWdodDoxNHB4O2JhY2tncm91bmQtcG9zaXRpb246LTM2MDBweCAwfS5pdGlfX2ZsYWcuaXRpX19teHtoZWlnaHQ6MTJweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi0zNjIycHggMH0uaXRpX19mbGFnLml0aV9fbXl7aGVpZ2h0OjEwcHg7YmFja2dyb3VuZC1wb3NpdGlvbjotMzY0NHB4IDB9Lml0aV9fZmxhZy5pdGlfX216e2hlaWdodDoxNHB4O2JhY2tncm91bmQtcG9zaXRpb246LTM2NjZweCAwfS5pdGlfX2ZsYWcuaXRpX19uYXtoZWlnaHQ6MTRweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi0zNjg4cHggMH0uaXRpX19mbGFnLml0aV9fbmN7aGVpZ2h0OjEwcHg7YmFja2dyb3VuZC1wb3NpdGlvbjotMzcxMHB4IDB9Lml0aV9fZmxhZy5pdGlfX25le2hlaWdodDoxNXB4O2JhY2tncm91bmQtcG9zaXRpb246LTM3MzJweCAwfS5pdGlfX2ZsYWcuaXRpX19uZntoZWlnaHQ6MTBweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi0zNzUycHggMH0uaXRpX19mbGFnLml0aV9fbmd7aGVpZ2h0OjEwcHg7YmFja2dyb3VuZC1wb3NpdGlvbjotMzc3NHB4IDB9Lml0aV9fZmxhZy5pdGlfX25pe2hlaWdodDoxMnB4O2JhY2tncm91bmQtcG9zaXRpb246LTM3OTZweCAwfS5pdGlfX2ZsYWcuaXRpX19ubHtoZWlnaHQ6MTRweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi0zODE4cHggMH0uaXRpX19mbGFnLml0aV9fbm97aGVpZ2h0OjE1cHg7YmFja2dyb3VuZC1wb3NpdGlvbjotMzg0MHB4IDB9Lml0aV9fZmxhZy5pdGlfX25we2hlaWdodDoxNXB4O2JhY2tncm91bmQtcG9zaXRpb246LTM4NjJweCAwfS5pdGlfX2ZsYWcuaXRpX19ucntoZWlnaHQ6MTBweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi0zODc3cHggMH0uaXRpX19mbGFnLml0aV9fbnV7aGVpZ2h0OjEwcHg7YmFja2dyb3VuZC1wb3NpdGlvbjotMzg5OXB4IDB9Lml0aV9fZmxhZy5pdGlfX256e2hlaWdodDoxMHB4O2JhY2tncm91bmQtcG9zaXRpb246LTM5MjFweCAwfS5pdGlfX2ZsYWcuaXRpX19vbXtoZWlnaHQ6MTBweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi0zOTQzcHggMH0uaXRpX19mbGFnLml0aV9fcGF7aGVpZ2h0OjE0cHg7YmFja2dyb3VuZC1wb3NpdGlvbjotMzk2NXB4IDB9Lml0aV9fZmxhZy5pdGlfX3Ble2hlaWdodDoxNHB4O2JhY2tncm91bmQtcG9zaXRpb246LTM5ODdweCAwfS5pdGlfX2ZsYWcuaXRpX19wZntoZWlnaHQ6MTRweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi00MDA5cHggMH0uaXRpX19mbGFnLml0aV9fcGd7aGVpZ2h0OjE1cHg7YmFja2dyb3VuZC1wb3NpdGlvbjotNDAzMXB4IDB9Lml0aV9fZmxhZy5pdGlfX3Boe2hlaWdodDoxMHB4O2JhY2tncm91bmQtcG9zaXRpb246LTQwNTNweCAwfS5pdGlfX2ZsYWcuaXRpX19wa3toZWlnaHQ6MTRweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi00MDc1cHggMH0uaXRpX19mbGFnLml0aV9fcGx7aGVpZ2h0OjEzcHg7YmFja2dyb3VuZC1wb3NpdGlvbjotNDA5N3B4IDB9Lml0aV9fZmxhZy5pdGlfX3Bte2hlaWdodDoxNHB4O2JhY2tncm91bmQtcG9zaXRpb246LTQxMTlweCAwfS5pdGlfX2ZsYWcuaXRpX19wbntoZWlnaHQ6MTBweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi00MTQxcHggMH0uaXRpX19mbGFnLml0aV9fcHJ7aGVpZ2h0OjE0cHg7YmFja2dyb3VuZC1wb3NpdGlvbjotNDE2M3B4IDB9Lml0aV9fZmxhZy5pdGlfX3Bze2hlaWdodDoxMHB4O2JhY2tncm91bmQtcG9zaXRpb246LTQxODVweCAwfS5pdGlfX2ZsYWcuaXRpX19wdHtoZWlnaHQ6MTRweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi00MjA3cHggMH0uaXRpX19mbGFnLml0aV9fcHd7aGVpZ2h0OjEzcHg7YmFja2dyb3VuZC1wb3NpdGlvbjotNDIyOXB4IDB9Lml0aV9fZmxhZy5pdGlfX3B5e2hlaWdodDoxMXB4O2JhY2tncm91bmQtcG9zaXRpb246LTQyNTFweCAwfS5pdGlfX2ZsYWcuaXRpX19xYXtoZWlnaHQ6OHB4O2JhY2tncm91bmQtcG9zaXRpb246LTQyNzNweCAwfS5pdGlfX2ZsYWcuaXRpX19yZXtoZWlnaHQ6MTRweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi00Mjk1cHggMH0uaXRpX19mbGFnLml0aV9fcm97aGVpZ2h0OjE0cHg7YmFja2dyb3VuZC1wb3NpdGlvbjotNDMxN3B4IDB9Lml0aV9fZmxhZy5pdGlfX3Jze2hlaWdodDoxNHB4O2JhY2tncm91bmQtcG9zaXRpb246LTQzMzlweCAwfS5pdGlfX2ZsYWcuaXRpX19ydXtoZWlnaHQ6MTRweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi00MzYxcHggMH0uaXRpX19mbGFnLml0aV9fcnd7aGVpZ2h0OjE0cHg7YmFja2dyb3VuZC1wb3NpdGlvbjotNDM4M3B4IDB9Lml0aV9fZmxhZy5pdGlfX3Nhe2hlaWdodDoxNHB4O2JhY2tncm91bmQtcG9zaXRpb246LTQ0MDVweCAwfS5pdGlfX2ZsYWcuaXRpX19zYntoZWlnaHQ6MTBweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi00NDI3cHggMH0uaXRpX19mbGFnLml0aV9fc2N7aGVpZ2h0OjEwcHg7YmFja2dyb3VuZC1wb3NpdGlvbjotNDQ0OXB4IDB9Lml0aV9fZmxhZy5pdGlfX3Nke2hlaWdodDoxMHB4O2JhY2tncm91bmQtcG9zaXRpb246LTQ0NzFweCAwfS5pdGlfX2ZsYWcuaXRpX19zZXtoZWlnaHQ6MTNweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi00NDkzcHggMH0uaXRpX19mbGFnLml0aV9fc2d7aGVpZ2h0OjE0cHg7YmFja2dyb3VuZC1wb3NpdGlvbjotNDUxNXB4IDB9Lml0aV9fZmxhZy5pdGlfX3Noe2hlaWdodDoxMHB4O2JhY2tncm91bmQtcG9zaXRpb246LTQ1MzdweCAwfS5pdGlfX2ZsYWcuaXRpX19zaXtoZWlnaHQ6MTBweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi00NTU5cHggMH0uaXRpX19mbGFnLml0aV9fc2p7aGVpZ2h0OjE1cHg7YmFja2dyb3VuZC1wb3NpdGlvbjotNDU4MXB4IDB9Lml0aV9fZmxhZy5pdGlfX3Nre2hlaWdodDoxNHB4O2JhY2tncm91bmQtcG9zaXRpb246LTQ2MDNweCAwfS5pdGlfX2ZsYWcuaXRpX19zbHtoZWlnaHQ6MTRweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi00NjI1cHggMH0uaXRpX19mbGFnLml0aV9fc217aGVpZ2h0OjE1cHg7YmFja2dyb3VuZC1wb3NpdGlvbjotNDY0N3B4IDB9Lml0aV9fZmxhZy5pdGlfX3Nue2hlaWdodDoxNHB4O2JhY2tncm91bmQtcG9zaXRpb246LTQ2NjlweCAwfS5pdGlfX2ZsYWcuaXRpX19zb3toZWlnaHQ6MTRweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi00NjkxcHggMH0uaXRpX19mbGFnLml0aV9fc3J7aGVpZ2h0OjE0cHg7YmFja2dyb3VuZC1wb3NpdGlvbjotNDcxM3B4IDB9Lml0aV9fZmxhZy5pdGlfX3Nze2hlaWdodDoxMHB4O2JhY2tncm91bmQtcG9zaXRpb246LTQ3MzVweCAwfS5pdGlfX2ZsYWcuaXRpX19zdHtoZWlnaHQ6MTBweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi00NzU3cHggMH0uaXRpX19mbGFnLml0aV9fc3V7aGVpZ2h0OjEwcHg7YmFja2dyb3VuZC1wb3NpdGlvbjotNDc3OXB4IDB9Lml0aV9fZmxhZy5pdGlfX3N2e2hlaWdodDoxMnB4O2JhY2tncm91bmQtcG9zaXRpb246LTQ4MDFweCAwfS5pdGlfX2ZsYWcuaXRpX19zeHtoZWlnaHQ6MTRweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi00ODIzcHggMH0uaXRpX19mbGFnLml0aV9fc3l7aGVpZ2h0OjE0cHg7YmFja2dyb3VuZC1wb3NpdGlvbjotNDg0NXB4IDB9Lml0aV9fZmxhZy5pdGlfX3N6e2hlaWdodDoxNHB4O2JhY2tncm91bmQtcG9zaXRpb246LTQ4NjdweCAwfS5pdGlfX2ZsYWcuaXRpX190YXtoZWlnaHQ6MTBweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi00ODg5cHggMH0uaXRpX19mbGFnLml0aV9fdGN7aGVpZ2h0OjEwcHg7YmFja2dyb3VuZC1wb3NpdGlvbjotNDkxMXB4IDB9Lml0aV9fZmxhZy5pdGlfX3Rke2hlaWdodDoxNHB4O2JhY2tncm91bmQtcG9zaXRpb246LTQ5MzNweCAwfS5pdGlfX2ZsYWcuaXRpX190ZntoZWlnaHQ6MTRweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi00OTU1cHggMH0uaXRpX19mbGFnLml0aV9fdGd7aGVpZ2h0OjEzcHg7YmFja2dyb3VuZC1wb3NpdGlvbjotNDk3N3B4IDB9Lml0aV9fZmxhZy5pdGlfX3Roe2hlaWdodDoxNHB4O2JhY2tncm91bmQtcG9zaXRpb246LTQ5OTlweCAwfS5pdGlfX2ZsYWcuaXRpX190antoZWlnaHQ6MTBweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi01MDIxcHggMH0uaXRpX19mbGFnLml0aV9fdGt7aGVpZ2h0OjEwcHg7YmFja2dyb3VuZC1wb3NpdGlvbjotNTA0M3B4IDB9Lml0aV9fZmxhZy5pdGlfX3Rse2hlaWdodDoxMHB4O2JhY2tncm91bmQtcG9zaXRpb246LTUwNjVweCAwfS5pdGlfX2ZsYWcuaXRpX190bXtoZWlnaHQ6MTRweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi01MDg3cHggMH0uaXRpX19mbGFnLml0aV9fdG57aGVpZ2h0OjE0cHg7YmFja2dyb3VuZC1wb3NpdGlvbjotNTEwOXB4IDB9Lml0aV9fZmxhZy5pdGlfX3Rve2hlaWdodDoxMHB4O2JhY2tncm91bmQtcG9zaXRpb246LTUxMzFweCAwfS5pdGlfX2ZsYWcuaXRpX190cntoZWlnaHQ6MTRweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi01MTUzcHggMH0uaXRpX19mbGFnLml0aV9fdHR7aGVpZ2h0OjEycHg7YmFja2dyb3VuZC1wb3NpdGlvbjotNTE3NXB4IDB9Lml0aV9fZmxhZy5pdGlfX3R2e2hlaWdodDoxMHB4O2JhY2tncm91bmQtcG9zaXRpb246LTUxOTdweCAwfS5pdGlfX2ZsYWcuaXRpX190d3toZWlnaHQ6MTRweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi01MjE5cHggMH0uaXRpX19mbGFnLml0aV9fdHp7aGVpZ2h0OjE0cHg7YmFja2dyb3VuZC1wb3NpdGlvbjotNTI0MXB4IDB9Lml0aV9fZmxhZy5pdGlfX3Vhe2hlaWdodDoxNHB4O2JhY2tncm91bmQtcG9zaXRpb246LTUyNjNweCAwfS5pdGlfX2ZsYWcuaXRpX191Z3toZWlnaHQ6MTRweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi01Mjg1cHggMH0uaXRpX19mbGFnLml0aV9fdWt7aGVpZ2h0OjEwcHg7YmFja2dyb3VuZC1wb3NpdGlvbjotNTMwN3B4IDB9Lml0aV9fZmxhZy5pdGlfX3Vte2hlaWdodDoxMXB4O2JhY2tncm91bmQtcG9zaXRpb246LTUzMjlweCAwfS5pdGlfX2ZsYWcuaXRpX191bntoZWlnaHQ6MTRweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi01MzUxcHggMH0uaXRpX19mbGFnLml0aV9fdXN7aGVpZ2h0OjExcHg7YmFja2dyb3VuZC1wb3NpdGlvbjotNTM3M3B4IDB9Lml0aV9fZmxhZy5pdGlfX3V5e2hlaWdodDoxNHB4O2JhY2tncm91bmQtcG9zaXRpb246LTUzOTVweCAwfS5pdGlfX2ZsYWcuaXRpX191entoZWlnaHQ6MTBweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi01NDE3cHggMH0uaXRpX19mbGFnLml0aV9fdmF7aGVpZ2h0OjE1cHg7YmFja2dyb3VuZC1wb3NpdGlvbjotNTQzOXB4IDB9Lml0aV9fZmxhZy5pdGlfX3Zje2hlaWdodDoxNHB4O2JhY2tncm91bmQtcG9zaXRpb246LTU0NTZweCAwfS5pdGlfX2ZsYWcuaXRpX192ZXtoZWlnaHQ6MTRweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi01NDc4cHggMH0uaXRpX19mbGFnLml0aV9fdmd7aGVpZ2h0OjEwcHg7YmFja2dyb3VuZC1wb3NpdGlvbjotNTUwMHB4IDB9Lml0aV9fZmxhZy5pdGlfX3Zpe2hlaWdodDoxNHB4O2JhY2tncm91bmQtcG9zaXRpb246LTU1MjJweCAwfS5pdGlfX2ZsYWcuaXRpX192bntoZWlnaHQ6MTRweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi01NTQ0cHggMH0uaXRpX19mbGFnLml0aV9fdnV7aGVpZ2h0OjEycHg7YmFja2dyb3VuZC1wb3NpdGlvbjotNTU2NnB4IDB9Lml0aV9fZmxhZy5pdGlfX3dme2hlaWdodDoxNHB4O2JhY2tncm91bmQtcG9zaXRpb246LTU1ODhweCAwfS5pdGlfX2ZsYWcuaXRpX193c3toZWlnaHQ6MTBweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi01NjEwcHggMH0uaXRpX19mbGFnLml0aV9feGt7aGVpZ2h0OjE1cHg7YmFja2dyb3VuZC1wb3NpdGlvbjotNTYzMnB4IDB9Lml0aV9fZmxhZy5pdGlfX3lle2hlaWdodDoxNHB4O2JhY2tncm91bmQtcG9zaXRpb246LTU2NTRweCAwfS5pdGlfX2ZsYWcuaXRpX195dHtoZWlnaHQ6MTRweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi01Njc2cHggMH0uaXRpX19mbGFnLml0aV9femF7aGVpZ2h0OjE0cHg7YmFja2dyb3VuZC1wb3NpdGlvbjotNTY5OHB4IDB9Lml0aV9fZmxhZy5pdGlfX3pte2hlaWdodDoxNHB4O2JhY2tncm91bmQtcG9zaXRpb246LTU3MjBweCAwfS5pdGlfX2ZsYWcuaXRpX196d3toZWlnaHQ6MTBweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOi01NzQycHggMH0uaXRpX19mbGFne2hlaWdodDoxNXB4O2JveC1zaGFkb3c6MCAwIDFweCAwICM4ODg7YmFja2dyb3VuZC1pbWFnZTp1cmwoLi4vaW1nL2ZsYWdzLnBuZz8xKTtiYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQ7YmFja2dyb3VuZC1jb2xvcjojZGJkYmRiO2JhY2tncm91bmQtcG9zaXRpb246MjBweCAwfUBtZWRpYSAoLXdlYmtpdC1taW4tZGV2aWNlLXBpeGVsLXJhdGlvOjIpLChtaW4tcmVzb2x1dGlvbjoxOTJkcGkpey5pdGlfX2ZsYWd7YmFja2dyb3VuZC1pbWFnZTp1cmwoLi4vaW1nL2ZsYWdzQDJ4LnBuZz8xKX19Lml0aV9fZmxhZy5pdGlfX25we2JhY2tncm91bmQtY29sb3I6dHJhbnNwYXJlbnR9</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPBody>
        <TcpPackets>
          <PacketInfo time="519314265" offset="0" length="783" />
          <PacketInfo time="519314265" offset="783" length="3006" />
        </TcpPackets>
      </HTTPResponse>
    </HTTPTask>
    <HTTPTask id="306" hostname="html2canvas.hertzen.com" path="https://html2canvas.hertzen.com/dist/html2canvas.js" url="https://html2canvas.hertzen.com/dist/html2canvas.js" ip="[2606:4700:3037:0:0:0:ac43:8caa]" port="443" connectionId="17" origin="HTML" frame="1" startDateTime="2024-02-15T10:57:48.074+05:30" startTime="519314296" endTime="519314312">
      <HTTPRequest method="GET">
        <HTTPHeaders>
          <HTTPHeaderEntity name="sec-ch-ua" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ik5vdCBBKEJyYW5kIjt2PSI5OSIsICJHb29nbGUgQ2hyb21lIjt2PSIxMjEiLCAiQ2hyb21pdW0iO3Y9IjEyMSI=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="sec-ch-ua-mobile" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>PzA=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="User-Agent" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEyMS4wLjAuMCBTYWZhcmkvNTM3LjM2</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="sec-ch-ua-platform" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>IldpbmRvd3Mi</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ki8q</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Sec-Fetch-Site" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Y3Jvc3Mtc2l0ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Sec-Fetch-Mode" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bm8tY29ycw==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Sec-Fetch-Dest" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>c2NyaXB0</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Referer" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cHM6Ly9kZXYuYmx1ZWFsZ28uY29tLw==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Encoding" index="9">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Language" index="10">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZW4tVVMsZW47cT0wLjk=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Host" index="11">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHRtbDJjYW52YXMuaGVydHplbi5jb20=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Connection" index="12">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0VUIGh0dHBzOi8vaHRtbDJjYW52YXMuaGVydHplbi5jb20vZGlzdC9odG1sMmNhbnZhcy5qcyBIVFRQLzEuMQ0Kc2VjLWNoLXVhOiAiTm90IEEoQnJhbmQiO3Y9Ijk5IiwgIkdvb2dsZSBDaHJvbWUiO3Y9IjEyMSIsICJDaHJvbWl1bSI7dj0iMTIxIg0Kc2VjLWNoLXVhLW1vYmlsZTogPzANClVzZXItQWdlbnQ6IE1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS8xMjEuMC4wLjAgU2FmYXJpLzUzNy4zNg0Kc2VjLWNoLXVhLXBsYXRmb3JtOiAiV2luZG93cyINCkFjY2VwdDogKi8qDQpTZWMtRmV0Y2gtU2l0ZTogY3Jvc3Mtc2l0ZQ0KU2VjLUZldGNoLU1vZGU6IG5vLWNvcnMNClNlYy1GZXRjaC1EZXN0OiBzY3JpcHQNClJlZmVyZXI6IGh0dHBzOi8vZGV2LmJsdWVhbGdvLmNvbS8NCkFjY2VwdC1FbmNvZGluZzogZ3ppcCwgZGVmbGF0ZQ0KQWNjZXB0LUxhbmd1YWdlOiBlbi1VUyxlbjtxPTAuOQ0KSG9zdDogaHRtbDJjYW52YXMuaGVydHplbi5jb20NCkNvbm5lY3Rpb246IEtlZXAtQWxpdmUNCg0K</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
      </HTTPRequest>
      <HTTPResponse>
        <contentLenght>76416</contentLenght>
        <HTTPHeaders>
          <HTTPHeaderEntity name="Date" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VGh1LCAxNSBGZWIgMjAyNCAwNToxODo1MCBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Type" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>YXBwbGljYXRpb24vamF2YXNjcmlwdDsgY2hhcnNldD11dGYtOA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Length" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>NzY0MTY=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Connection" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="x-origin-cache" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SElU</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Last-Modified" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>U2F0LCAyMiBKYW4gMjAyMiAxNjo1NjowNCBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Access-Control-Allow-Origin" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Kg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="ETag" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Vy8iNjFlYzM3MjQtNmJjYzYi</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="expires" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>V2VkLCAxNyBKYW4gMjAyNCAwNDo1NzoxOCBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Cache-Control" index="9">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bWF4LWFnZT0xNDQwMA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Encoding" index="10">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="x-proxy-cache" index="11">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SElU</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="X-GitHub-Request-Id" index="12">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>RTQ1RTpCNUMxOjY4MkRGQzo2OUI5NTM6NjUyRTE0QUM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Via" index="13">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MS4xIHZhcm5pc2g=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Age" index="14">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MzU0</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="X-Served-By" index="15">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Y2FjaGUtZnJhLWVkZGY4MjMwMDMxLUZSQQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="X-Cache" index="16">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SElU</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="X-Cache-Hits" index="17">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="X-Timer" index="18">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>UzE2OTk1NDE4NDYuNDE3OTQ4LFZTMCxWRTI=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Vary" index="19">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>QWNjZXB0LUVuY29kaW5n</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="X-Fastly-Request-ID" index="20">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MjFlMWVjZDNkZjAzZDQ4YzdjMmY2ZmY3ZDFhZGZkN2NjY2Y1ZTJkMA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="CF-Cache-Status" index="21">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SElU</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Ranges" index="22">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ynl0ZXM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Report-To" index="23">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>eyJlbmRwb2ludHMiOlt7InVybCI6Imh0dHBzOlwvXC9hLm5lbC5jbG91ZGZsYXJlLmNvbVwvcmVwb3J0XC92Mz9zPUU4QzJ5JTJCdW03MSUyRmZFODNQZVljWUkyWDMxaUU3OVpOcXd6NHpnMiUyQkJ1NndsT3M2cExrOThjSWxnY1luQXRRNjUxeWkyejd6VThoVU0waXF6aU43OHhRQU44dXZMam9VTnQ1RmZXJTJCUVIxQUo5R3RIN1hYTHA4UW43WEloUU1CaDVqendFJTJGM05qSFglMkZXU044RDJiWFVVb0FmSzR1JTJGOVElM0QlM0QifV0sImdyb3VwIjoiY2YtbmVsIiwibWF4X2FnZSI6NjA0ODAwfQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="NEL" index="24">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>eyJzdWNjZXNzX2ZyYWN0aW9uIjowLCJyZXBvcnRfdG8iOiJjZi1uZWwiLCJtYXhfYWdlIjo2MDQ4MDB9</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Server" index="25">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Y2xvdWRmbGFyZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="CF-RAY" index="26">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ODU1YjE3YWUwZWUxYmJlNS1GUkE=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="alt-svc" index="27">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aDM9Ijo0NDMiOyBtYT04NjQwMA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SFRUUC8xLjEgMjAwIE9LDQpEYXRlOiBUaHUsIDE1IEZlYiAyMDI0IDA1OjE4OjUwIEdNVA0KQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0OyBjaGFyc2V0PXV0Zi04DQpDb250ZW50LUxlbmd0aDogNzY0MTYNCkNvbm5lY3Rpb246IGtlZXAtYWxpdmUNCngtb3JpZ2luLWNhY2hlOiBISVQNCkxhc3QtTW9kaWZpZWQ6IFNhdCwgMjIgSmFuIDIwMjIgMTY6NTY6MDQgR01UDQpBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW46ICoNCkVUYWc6IFcvIjYxZWMzNzI0LTZiY2M2Ig0KZXhwaXJlczogV2VkLCAxNyBKYW4gMjAyNCAwNDo1NzoxOCBHTVQNCkNhY2hlLUNvbnRyb2w6IG1heC1hZ2U9MTQ0MDANCkNvbnRlbnQtRW5jb2Rpbmc6IGd6aXANCngtcHJveHktY2FjaGU6IEhJVA0KWC1HaXRIdWItUmVxdWVzdC1JZDogRTQ1RTpCNUMxOjY4MkRGQzo2OUI5NTM6NjUyRTE0QUMNClZpYTogMS4xIHZhcm5pc2gNCkFnZTogMzU0DQpYLVNlcnZlZC1CeTogY2FjaGUtZnJhLWVkZGY4MjMwMDMxLUZSQQ0KWC1DYWNoZTogSElUDQpYLUNhY2hlLUhpdHM6IDENClgtVGltZXI6IFMxNjk5NTQxODQ2LjQxNzk0OCxWUzAsVkUyDQpWYXJ5OiBBY2NlcHQtRW5jb2RpbmcNClgtRmFzdGx5LVJlcXVlc3QtSUQ6IDIxZTFlY2QzZGYwM2Q0OGM3YzJmNmZmN2QxYWRmZDdjY2NmNWUyZDANCkNGLUNhY2hlLVN0YXR1czogSElUDQpBY2NlcHQtUmFuZ2VzOiBieXRlcw0KUmVwb3J0LVRvOiB7ImVuZHBvaW50cyI6W3sidXJsIjoiaHR0cHM6XC9cL2EubmVsLmNsb3VkZmxhcmUuY29tXC9yZXBvcnRcL3YzP3M9RThDMnklMkJ1bTcxJTJGZkU4M1BlWWNZSTJYMzFpRTc5Wk5xd3o0emcyJTJCQnU2d2xPczZwTGs5OGNJbGdjWW5BdFE2NTF5aTJ6N3pVOGhVTTBpcXppTjc4eFFBTjh1dkxqb1VOdDVGZlclMkJRUjFBSjlHdEg3WFhMcDhRbjdYSWhRTUJoNWp6d0UlMkYzTmpIWCUyRldTTjhEMmJYVVVvQWZLNHUlMkY5USUzRCUzRCJ9XSwiZ3JvdXAiOiJjZi1uZWwiLCJtYXhfYWdlIjo2MDQ4MDB9DQpORUw6IHsic3VjY2Vzc19mcmFjdGlvbiI6MCwicmVwb3J0X3RvIjoiY2YtbmVsIiwibWF4X2FnZSI6NjA0ODAwfQ0KU2VydmVyOiBjbG91ZGZsYXJlDQpDRi1SQVk6IDg1NWIxN2FlMGVlMWJiZTUtRlJBDQphbHQtc3ZjOiBoMz0iOjQ0MyI7IG1hPTg2NDAwDQoNCg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPBody>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>LyohCiAqIGh0bWwyY2FudmFzIDEuNC4xIDxodHRwczovL2h0bWwyY2FudmFzLmhlcnR6ZW4uY29tPgogKiBDb3B5cmlnaHQgKGMpIDIwMjIgTmlrbGFzIHZvbiBIZXJ0emVuIDxodHRwczovL2hlcnR6ZW4uY29tPgogKiBSZWxlYXNlZCB1bmRlciBNSVQgTGljZW5zZQogKi8KKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHsKICAgIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpIDoKICAgIHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShmYWN0b3J5KSA6CiAgICAoZ2xvYmFsID0gdHlwZW9mIGdsb2JhbFRoaXMgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsVGhpcyA6IGdsb2JhbCB8fCBzZWxmLCBnbG9iYWwuaHRtbDJjYW52YXMgPSBmYWN0b3J5KCkpOwp9KHRoaXMsIChmdW5jdGlvbiAoKSB7ICd1c2Ugc3RyaWN0JzsKCiAgICAvKiEgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioNCiAgICBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4NCg0KICAgIFBlcm1pc3Npb24gdG8gdXNlLCBjb3B5LCBtb2RpZnksIGFuZC9vciBkaXN0cmlidXRlIHRoaXMgc29mdHdhcmUgZm9yIGFueQ0KICAgIHB1cnBvc2Ugd2l0aCBvciB3aXRob3V0IGZlZSBpcyBoZXJlYnkgZ3JhbnRlZC4NCg0KICAgIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAiQVMgSVMiIEFORCBUSEUgQVVUSE9SIERJU0NMQUlNUyBBTEwgV0FSUkFOVElFUyBXSVRIDQogICAgUkVHQVJEIFRPIFRISVMgU09GVFdBUkUgSU5DTFVESU5HIEFMTCBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZDQogICAgQU5EIEZJVE5FU1MuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1IgQkUgTElBQkxFIEZPUiBBTlkgU1BFQ0lBTCwgRElSRUNULA0KICAgIElORElSRUNULCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgT1IgQU5ZIERBTUFHRVMgV0hBVFNPRVZFUiBSRVNVTFRJTkcgRlJPTQ0KICAgIExPU1MgT0YgVVNFLCBEQVRBIE9SIFBST0ZJVFMsIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBORUdMSUdFTkNFIE9SDQogICAgT1RIRVIgVE9SVElPVVMgQUNUSU9OLCBBUklTSU5HIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFVTRSBPUg0KICAgIFBFUkZPUk1BTkNFIE9GIFRISVMgU09GVFdBUkUuDQogICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi8NCiAgICAvKiBnbG9iYWwgUmVmbGVjdCwgUHJvbWlzZSAqLw0KDQogICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbihkLCBiKSB7DQogICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwNCiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwNCiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07DQogICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOw0KICAgIH07DQoNCiAgICBmdW5jdGlvbiBfX2V4dGVuZHMoZCwgYikgew0KICAgICAgICBpZiAodHlwZW9mIGIgIT09ICJmdW5jdGlvbiIgJiYgYiAhPT0gbnVsbCkNCiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIkNsYXNzIGV4dGVuZHMgdmFsdWUgIiArIFN0cmluZyhiKSArICIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbCIpOw0KICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOw0KICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0NCiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOw0KICAgIH0NCg0KICAgIHZhciBfX2Fzc2lnbiA9IGZ1bmN0aW9uKCkgew0KICAgICAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gX19hc3NpZ24odCkgew0KICAgICAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7DQogICAgICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTsNCiAgICAgICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpIHRbcF0gPSBzW3BdOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIHQ7DQogICAgICAgIH07DQogICAgICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOw0KICAgIH07DQoNCiAgICBmdW5jdGlvbiBfX2F3YWl0ZXIodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7DQogICAgICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfQ0KICAgICAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsNCiAgICAgICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH0NCiAgICAgICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yWyJ0aHJvdyJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH0NCiAgICAgICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9DQogICAgICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7DQogICAgICAgIH0pOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIF9fZ2VuZXJhdG9yKHRoaXNBcmcsIGJvZHkpIHsNCiAgICAgICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZzsNCiAgICAgICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksICJ0aHJvdyI6IHZlcmIoMSksICJyZXR1cm4iOiB2ZXJiKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7DQogICAgICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfQ0KICAgICAgICBmdW5jdGlvbiBzdGVwKG9wKSB7DQogICAgICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcigiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLiIpOw0KICAgICAgICAgICAgd2hpbGUgKF8pIHRyeSB7DQogICAgICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVsicmV0dXJuIl0gOiBvcFswXSA/IHlbInRocm93Il0gfHwgKCh0ID0geVsicmV0dXJuIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0Ow0KICAgICAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTsNCiAgICAgICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7DQogICAgICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9Ow0KICAgICAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7DQogICAgICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTsNCiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7DQogICAgICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9DQogICAgICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIF9fc3ByZWFkQXJyYXkodG8sIGZyb20sIHBhY2spIHsNCiAgICAgICAgaWYgKHBhY2sgfHwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgZm9yICh2YXIgaSA9IDAsIGwgPSBmcm9tLmxlbmd0aCwgYXI7IGkgPCBsOyBpKyspIHsNCiAgICAgICAgICAgIGlmIChhciB8fCAhKGkgaW4gZnJvbSkpIHsNCiAgICAgICAgICAgICAgICBpZiAoIWFyKSBhciA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20sIDAsIGkpOw0KICAgICAgICAgICAgICAgIGFyW2ldID0gZnJvbVtpXTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gdG8uY29uY2F0KGFyIHx8IGZyb20pOw0KICAgIH0KCiAgICB2YXIgQm91bmRzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewogICAgICAgIGZ1bmN0aW9uIEJvdW5kcyhsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQpIHsKICAgICAgICAgICAgdGhpcy5sZWZ0ID0gbGVmdDsKICAgICAgICAgICAgdGhpcy50b3AgPSB0b3A7CiAgICAgICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDsKICAgICAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7CiAgICAgICAgfQogICAgICAgIEJvdW5kcy5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKHgsIHksIHcsIGgpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBCb3VuZHModGhpcy5sZWZ0ICsgeCwgdGhpcy50b3AgKyB5LCB0aGlzLndpZHRoICsgdywgdGhpcy5oZWlnaHQgKyBoKTsKICAgICAgICB9OwogICAgICAgIEJvdW5kcy5mcm9tQ2xpZW50UmVjdCA9IGZ1bmN0aW9uIChjb250ZXh0LCBjbGllbnRSZWN0KSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgQm91bmRzKGNsaWVudFJlY3QubGVmdCArIGNvbnRleHQud2luZG93Qm91bmRzLmxlZnQsIGNsaWVudFJlY3QudG9wICsgY29udGV4dC53aW5kb3dCb3VuZHMudG9wLCBjbGllbnRSZWN0LndpZHRoLCBjbGllbnRSZWN0LmhlaWdodCk7CiAgICAgICAgfTsKICAgICAgICBCb3VuZHMuZnJvbURPTVJlY3RMaXN0ID0gZnVuY3Rpb24gKGNvbnRleHQsIGRvbVJlY3RMaXN0KSB7CiAgICAgICAgICAgIHZhciBkb21SZWN0ID0gQXJyYXkuZnJvbShkb21SZWN0TGlzdCkuZmluZChmdW5jdGlvbiAocmVjdCkgeyByZXR1cm4gcmVjdC53aWR0aCAhPT0gMDsgfSk7CiAgICAgICAgICAgIHJldHVybiBkb21SZWN0CiAgICAgICAgICAgICAgICA/IG5ldyBCb3VuZHMoZG9tUmVjdC5sZWZ0ICsgY29udGV4dC53aW5kb3dCb3VuZHMubGVmdCwgZG9tUmVjdC50b3AgKyBjb250ZXh0LndpbmRvd0JvdW5kcy50b3AsIGRvbVJlY3Qud2lkdGgsIGRvbVJlY3QuaGVpZ2h0KQogICAgICAgICAgICAgICAgOiBCb3VuZHMuRU1QVFk7CiAgICAgICAgfTsKICAgICAgICBCb3VuZHMuRU1QVFkgPSBuZXcgQm91bmRzKDAsIDAsIDAsIDApOwogICAgICAgIHJldHVybiBCb3VuZHM7CiAgICB9KCkpOwogICAgdmFyIHBhcnNlQm91bmRzID0gZnVuY3Rpb24gKGNvbnRleHQsIG5vZGUpIHsKICAgICAgICByZXR1cm4gQm91bmRzLmZyb21DbGllbnRSZWN0KGNvbnRleHQsIG5vZGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkpOwogICAgfTsKICAgIHZhciBwYXJzZURvY3VtZW50U2l6ZSA9IGZ1bmN0aW9uIChkb2N1bWVudCkgewogICAgICAgIHZhciBib2R5ID0gZG9jdW1lbnQuYm9keTsKICAgICAgICB2YXIgZG9jdW1lbnRFbGVtZW50ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50OwogICAgICAgIGlmICghYm9keSB8fCAhZG9jdW1lbnRFbGVtZW50KSB7CiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiVW5hYmxlIHRvIGdldCBkb2N1bWVudCBzaXplIik7CiAgICAgICAgfQogICAgICAgIHZhciB3aWR0aCA9IE1hdGgubWF4KE1hdGgubWF4KGJvZHkuc2Nyb2xsV2lkdGgsIGRvY3VtZW50RWxlbWVudC5zY3JvbGxXaWR0aCksIE1hdGgubWF4KGJvZHkub2Zmc2V0V2lkdGgsIGRvY3VtZW50RWxlbWVudC5vZmZzZXRXaWR0aCksIE1hdGgubWF4KGJvZHkuY2xpZW50V2lkdGgsIGRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCkpOwogICAgICAgIHZhciBoZWlnaHQgPSBNYXRoLm1heChNYXRoLm1heChib2R5LnNjcm9sbEhlaWdodCwgZG9jdW1lbnRFbGVtZW50LnNjcm9sbEhlaWdodCksIE1hdGgubWF4KGJvZHkub2Zmc2V0SGVpZ2h0LCBkb2N1bWVudEVsZW1lbnQub2Zmc2V0SGVpZ2h0KSwgTWF0aC5tYXgoYm9keS5jbGllbnRIZWlnaHQsIGRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQpKTsKICAgICAgICByZXR1cm4gbmV3IEJvdW5kcygwLCAwLCB3aWR0aCwgaGVpZ2h0KTsKICAgIH07CgogICAgLyoKICAgICAqIGNzcy1saW5lLWJyZWFrIDIuMS4wIDxodHRwczovL2dpdGh1Yi5jb20vbmlrbGFzdmgvY3NzLWxpbmUtYnJlYWsjcmVhZG1lPgogICAgICogQ29weXJpZ2h0IChjKSAyMDIyIE5pa2xhcyB2b24gSGVydHplbiA8aHR0cHM6Ly9oZXJ0emVuLmNvbT4KICAgICAqIFJlbGVhc2VkIHVuZGVyIE1JVCBMaWNlbnNlCiAgICAgKi8KICAgIHZhciB0b0NvZGVQb2ludHMkMSA9IGZ1bmN0aW9uIChzdHIpIHsKICAgICAgICB2YXIgY29kZVBvaW50cyA9IFtdOwogICAgICAgIHZhciBpID0gMDsKICAgICAgICB2YXIgbGVuZ3RoID0gc3RyLmxlbmd0aDsKICAgICAgICB3aGlsZSAoaSA8IGxlbmd0aCkgewogICAgICAgICAgICB2YXIgdmFsdWUgPSBzdHIuY2hhckNvZGVBdChpKyspOwogICAgICAgICAgICBpZiAodmFsdWUgPj0gMHhkODAwICYmIHZhbHVlIDw9IDB4ZGJmZiAmJiBpIDwgbGVuZ3RoKSB7CiAgICAgICAgICAgICAgICB2YXIgZXh0cmEgPSBzdHIuY2hhckNvZGVBdChpKyspOwogICAgICAgICAgICAgICAgaWYgKChleHRyYSAmIDB4ZmMwMCkgPT09IDB4ZGMwMCkgewogICAgICAgICAgICAgICAgICAgIGNvZGVQb2ludHMucHVzaCgoKHZhbHVlICYgMHgzZmYpIDw8IDEwKSArIChleHRyYSAmIDB4M2ZmKSArIDB4MTAwMDApOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgY29kZVBvaW50cy5wdXNoKHZhbHVlKTsKICAgICAgICAgICAgICAgICAgICBpLS07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBjb2RlUG9pbnRzLnB1c2godmFsdWUpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBjb2RlUG9pbnRzOwogICAgfTsKICAgIHZhciBmcm9tQ29kZVBvaW50JDEgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIGNvZGVQb2ludHMgPSBbXTsKICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewogICAgICAgICAgICBjb2RlUG9pbnRzW19pXSA9IGFyZ3VtZW50c1tfaV07CiAgICAgICAgfQogICAgICAgIGlmIChTdHJpbmcuZnJvbUNvZGVQb2ludCkgewogICAgICAgICAgICByZXR1cm4gU3RyaW5nLmZyb21Db2RlUG9pbnQuYXBwbHkoU3RyaW5nLCBjb2RlUG9pbnRzKTsKICAgICAgICB9CiAgICAgICAgdmFyIGxlbmd0aCA9IGNvZGVQb2ludHMubGVuZ3RoOwogICAgICAgIGlmICghbGVuZ3RoKSB7CiAgICAgICAgICAgIHJldHVybiAnJzsKICAgICAgICB9CiAgICAgICAgdmFyIGNvZGVVbml0cyA9IFtdOwogICAgICAgIHZhciBpbmRleCA9IC0xOwogICAgICAgIHZhciByZXN1bHQgPSAnJzsKICAgICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkgewogICAgICAgICAgICB2YXIgY29kZVBvaW50ID0gY29kZVBvaW50c1tpbmRleF07CiAgICAgICAgICAgIGlmIChjb2RlUG9pbnQgPD0gMHhmZmZmKSB7CiAgICAgICAgICAgICAgICBjb2RlVW5pdHMucHVzaChjb2RlUG9pbnQpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgY29kZVBvaW50IC09IDB4MTAwMDA7CiAgICAgICAgICAgICAgICBjb2RlVW5pdHMucHVzaCgoY29kZVBvaW50ID4+IDEwKSArIDB4ZDgwMCwgKGNvZGVQb2ludCAlIDB4NDAwKSArIDB4ZGMwMCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGluZGV4ICsgMSA9PT0gbGVuZ3RoIHx8IGNvZGVVbml0cy5sZW5ndGggPiAweDQwMDApIHsKICAgICAgICAgICAgICAgIHJlc3VsdCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZywgY29kZVVuaXRzKTsKICAgICAgICAgICAgICAgIGNvZGVVbml0cy5sZW5ndGggPSAwOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9OwogICAgdmFyIGNoYXJzJDIgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyc7CiAgICAvLyBVc2UgYSBsb29rdXAgdGFibGUgdG8gZmluZCB0aGUgaW5kZXguCiAgICB2YXIgbG9va3VwJDIgPSB0eXBlb2YgVWludDhBcnJheSA9PT0gJ3VuZGVmaW5lZCcgPyBbXSA6IG5ldyBVaW50OEFycmF5KDI1Nik7CiAgICBmb3IgKHZhciBpJDIgPSAwOyBpJDIgPCBjaGFycyQyLmxlbmd0aDsgaSQyKyspIHsKICAgICAgICBsb29rdXAkMltjaGFycyQyLmNoYXJDb2RlQXQoaSQyKV0gPSBpJDI7CiAgICB9CgogICAgLyoKICAgICAqIHV0cmllIDEuMC4yIDxodHRwczovL2dpdGh1Yi5jb20vbmlrbGFzdmgvdXRyaWU+CiAgICAgKiBDb3B5cmlnaHQgKGMpIDIwMjIgTmlrbGFzIHZvbiBIZXJ0emVuIDxodHRwczovL2hlcnR6ZW4uY29tPgogICAgICogUmVsZWFzZWQgdW5kZXIgTUlUIExpY2Vuc2UKICAgICAqLwogICAgdmFyIGNoYXJzJDEkMSA9ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvJzsKICAgIC8vIFVzZSBhIGxvb2t1cCB0YWJsZSB0byBmaW5kIHRoZSBpbmRleC4KICAgIHZhciBsb29rdXAkMSQxID0gdHlwZW9mIFVpbnQ4QXJyYXkgPT09ICd1bmRlZmluZWQnID8gW10gOiBuZXcgVWludDhBcnJheSgyNTYpOwogICAgZm9yICh2YXIgaSQxJDEgPSAwOyBpJDEkMSA8IGNoYXJzJDEkMS5sZW5ndGg7IGkkMSQxKyspIHsKICAgICAgICBsb29rdXAkMSQxW2NoYXJzJDEkMS5jaGFyQ29kZUF0KGkkMSQxKV0gPSBpJDEkMTsKICAgIH0KICAgIHZhciBkZWNvZGUkMSA9IGZ1bmN0aW9uIChiYXNlNjQpIHsKICAgICAgICB2YXIgYnVmZmVyTGVuZ3RoID0gYmFzZTY0Lmxlbmd0aCAqIDAuNzUsIGxlbiA9IGJhc2U2NC5sZW5ndGgsIGksIHAgPSAwLCBlbmNvZGVkMSwgZW5jb2RlZDIsIGVuY29kZWQzLCBlbmNvZGVkNDsKICAgICAgICBpZiAoYmFzZTY0W2Jhc2U2NC5sZW5ndGggLSAxXSA9PT0gJz0nKSB7CiAgICAgICAgICAgIGJ1ZmZlckxlbmd0aC0tOwogICAgICAgICAgICBpZiAoYmFzZTY0W2Jhc2U2NC5sZW5ndGggLSAyXSA9PT0gJz0nKSB7CiAgICAgICAgICAgICAgICBidWZmZXJMZW5ndGgtLTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB2YXIgYnVmZmVyID0gdHlwZW9mIEFycmF5QnVmZmVyICE9PSAndW5kZWZpbmVkJyAmJgogICAgICAgICAgICB0eXBlb2YgVWludDhBcnJheSAhPT0gJ3VuZGVmaW5lZCcgJiYKICAgICAgICAgICAgdHlwZW9mIFVpbnQ4QXJyYXkucHJvdG90eXBlLnNsaWNlICE9PSAndW5kZWZpbmVkJwogICAgICAgICAgICA/IG5ldyBBcnJheUJ1ZmZlcihidWZmZXJMZW5ndGgpCiAgICAgICAgICAgIDogbmV3IEFycmF5KGJ1ZmZlckxlbmd0aCk7CiAgICAgICAgdmFyIGJ5dGVzID0gQXJyYXkuaXNBcnJheShidWZmZXIpID8gYnVmZmVyIDogbmV3IFVpbnQ4QXJyYXkoYnVmZmVyKTsKICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpICs9IDQpIHsKICAgICAgICAgICAgZW5jb2RlZDEgPSBsb29rdXAkMSQxW2Jhc2U2NC5jaGFyQ29kZUF0KGkpXTsKICAgICAgICAgICAgZW5jb2RlZDIgPSBsb29rdXAkMSQxW2Jhc2U2NC5jaGFyQ29kZUF0KGkgKyAxKV07CiAgICAgICAgICAgIGVuY29kZWQzID0gbG9va3VwJDEkMVtiYXNlNjQuY2hhckNvZGVBdChpICsgMildOwogICAgICAgICAgICBlbmNvZGVkNCA9IGxvb2t1cCQxJDFbYmFzZTY0LmNoYXJDb2RlQXQoaSArIDMpXTsKICAgICAgICAgICAgYnl0ZXNbcCsrXSA9IChlbmNvZGVkMSA8PCAyKSB8IChlbmNvZGVkMiA+PiA0KTsKICAgICAgICAgICAgYnl0ZXNbcCsrXSA9ICgoZW5jb2RlZDIgJiAxNSkgPDwgNCkgfCAoZW5jb2RlZDMgPj4gMik7CiAgICAgICAgICAgIGJ5dGVzW3ArK10gPSAoKGVuY29kZWQzICYgMykgPDwgNikgfCAoZW5jb2RlZDQgJiA2Myk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBidWZmZXI7CiAgICB9OwogICAgdmFyIHBvbHlVaW50MTZBcnJheSQxID0gZnVuY3Rpb24gKGJ1ZmZlcikgewogICAgICAgIHZhciBsZW5ndGggPSBidWZmZXIubGVuZ3RoOwogICAgICAgIHZhciBieXRlcyA9IFtdOwogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDIpIHsKICAgICAgICAgICAgYnl0ZXMucHVzaCgoYnVmZmVyW2kgKyAxXSA8PCA4KSB8IGJ1ZmZlcltpXSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBieXRlczsKICAgIH07CiAgICB2YXIgcG9seVVpbnQzMkFycmF5JDEgPSBmdW5jdGlvbiAoYnVmZmVyKSB7CiAgICAgICAgdmFyIGxlbmd0aCA9IGJ1ZmZlci5sZW5ndGg7CiAgICAgICAgdmFyIGJ5dGVzID0gW107CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gNCkgewogICAgICAgICAgICBieXRlcy5wdXNoKChidWZmZXJbaSArIDNdIDw8IDI0KSB8IChidWZmZXJbaSArIDJdIDw8IDE2KSB8IChidWZmZXJbaSArIDFdIDw8IDgpIHwgYnVmZmVyW2ldKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGJ5dGVzOwogICAgfTsKCiAgICAvKiogU2hpZnQgc2l6ZSBmb3IgZ2V0dGluZyB0aGUgaW5kZXgtMiB0YWJsZSBvZmZzZXQuICovCiAgICB2YXIgVVRSSUUyX1NISUZUXzIkMSA9IDU7CiAgICAvKiogU2hpZnQgc2l6ZSBmb3IgZ2V0dGluZyB0aGUgaW5kZXgtMSB0YWJsZSBvZmZzZXQuICovCiAgICB2YXIgVVRSSUUyX1NISUZUXzEkMSA9IDYgKyA1OwogICAgLyoqCiAgICAgKiBTaGlmdCBzaXplIGZvciBzaGlmdGluZyBsZWZ0IHRoZSBpbmRleCBhcnJheSB2YWx1ZXMuCiAgICAgKiBJbmNyZWFzZXMgcG9zc2libGUgZGF0YSBzaXplIHdpdGggMTYtYml0IGluZGV4IHZhbHVlcyBhdCB0aGUgY29zdAogICAgICogb2YgY29tcGFjdGFiaWxpdHkuCiAgICAgKiBUaGlzIHJlcXVpcmVzIGRhdGEgYmxvY2tzIHRvIGJlIGFsaWduZWQgYnkgVVRSSUUyX0RBVEFfR1JBTlVMQVJJVFkuCiAgICAgKi8KICAgIHZhciBVVFJJRTJfSU5ERVhfU0hJRlQkMSA9IDI7CiAgICAvKioKICAgICAqIERpZmZlcmVuY2UgYmV0d2VlbiB0aGUgdHdvIHNoaWZ0IHNpemVzLAogICAgICogZm9yIGdldHRpbmcgYW4gaW5kZXgtMSBvZmZzZXQgZnJvbSBhbiBpbmRleC0yIG9mZnNldC4gNj0xMS01CiAgICAgKi8KICAgIHZhciBVVFJJRTJfU0hJRlRfMV8yJDEgPSBVVFJJRTJfU0hJRlRfMSQxIC0gVVRSSUUyX1NISUZUXzIkMTsKICAgIC8qKgogICAgICogVGhlIHBhcnQgb2YgdGhlIGluZGV4LTIgdGFibGUgZm9yIFUrRDgwMC4uVStEQkZGIHN0b3JlcyB2YWx1ZXMgZm9yCiAgICAgKiBsZWFkIHN1cnJvZ2F0ZSBjb2RlIF91bml0c18gbm90IGNvZGUgX3BvaW50c18uCiAgICAgKiBWYWx1ZXMgZm9yIGxlYWQgc3Vycm9nYXRlIGNvZGUgX3BvaW50c18gYXJlIGluZGV4ZWQgd2l0aCB0aGlzIHBvcnRpb24gb2YgdGhlIHRhYmxlLgogICAgICogTGVuZ3RoPTMyPTB4MjA9MHg0MDA+PlVUUklFMl9TSElGVF8yLiAoVGhlcmUgYXJlIDEwMjQ9MHg0MDAgbGVhZCBzdXJyb2dhdGVzLikKICAgICAqLwogICAgdmFyIFVUUklFMl9MU0NQX0lOREVYXzJfT0ZGU0VUJDEgPSAweDEwMDAwID4+IFVUUklFMl9TSElGVF8yJDE7CiAgICAvKiogTnVtYmVyIG9mIGVudHJpZXMgaW4gYSBkYXRhIGJsb2NrLiAzMj0weDIwICovCiAgICB2YXIgVVRSSUUyX0RBVEFfQkxPQ0tfTEVOR1RIJDEgPSAxIDw8IFVUUklFMl9TSElGVF8yJDE7CiAgICAvKiogTWFzayBmb3IgZ2V0dGluZyB0aGUgbG93ZXIgYml0cyBmb3IgdGhlIGluLWRhdGEtYmxvY2sgb2Zmc2V0LiAqLwogICAgdmFyIFVUUklFMl9EQVRBX01BU0skMSA9IFVUUklFMl9EQVRBX0JMT0NLX0xFTkdUSCQxIC0gMTsKICAgIHZhciBVVFJJRTJfTFNDUF9JTkRFWF8yX0xFTkdUSCQxID0gMHg0MDAgPj4gVVRSSUUyX1NISUZUXzIkMTsKICAgIC8qKiBDb3VudCB0aGUgbGVuZ3RocyBvZiBib3RoIEJNUCBwaWVjZXMuIDIwODA9MHg4MjAgKi8KICAgIHZhciBVVFJJRTJfSU5ERVhfMl9CTVBfTEVOR1RIJDEgPSBVVFJJRTJfTFNDUF9JTkRFWF8yX09GRlNFVCQxICsgVVRSSUUyX0xTQ1BfSU5ERVhfMl9MRU5HVEgkMTsKICAgIC8qKgogICAgICogVGhlIDItYnl0ZSBVVEYtOCB2ZXJzaW9uIG9mIHRoZSBpbmRleC0yIHRhYmxlIGZvbGxvd3MgYXQgb2Zmc2V0IDIwODA9MHg4MjAuCiAgICAgKiBMZW5ndGggMzI9MHgyMCBmb3IgbGVhZCBieXRlcyBDMC4uREYsIHJlZ2FyZGxlc3Mgb2YgVVRSSUUyX1NISUZUXzIuCiAgICAgKi8KICAgIHZhciBVVFJJRTJfVVRGOF8yQl9JTkRFWF8yX09GRlNFVCQxID0gVVRSSUUyX0lOREVYXzJfQk1QX0xFTkdUSCQxOwogICAgdmFyIFVUUklFMl9VVEY4XzJCX0lOREVYXzJfTEVOR1RIJDEgPSAweDgwMCA+PiA2OyAvKiBVKzA4MDAgaXMgdGhlIGZpcnN0IGNvZGUgcG9pbnQgYWZ0ZXIgMi1ieXRlIFVURi04ICovCiAgICAvKioKICAgICAqIFRoZSBpbmRleC0xIHRhYmxlLCBvbmx5IHVzZWQgZm9yIHN1cHBsZW1lbnRhcnkgY29kZSBwb2ludHMsIGF0IG9mZnNldCAyMTEyPTB4ODQwLgogICAgICogVmFyaWFibGUgbGVuZ3RoLCBmb3IgY29kZSBwb2ludHMgdXAgdG8gaGlnaFN0YXJ0LCB3aGVyZSB0aGUgbGFzdCBzaW5nbGUtdmFsdWUgcmFuZ2Ugc3RhcnRzLgogICAgICogTWF4aW11bSBsZW5ndGggNTEyPTB4MjAwPTB4MTAwMDAwPj5VVFJJRTJfU0hJRlRfMS4KICAgICAqIChGb3IgMHgxMDAwMDAgc3VwcGxlbWVudGFyeSBjb2RlIHBvaW50cyBVKzEwMDAwLi5VKzEwZmZmZi4pCiAgICAgKgogICAgICogVGhlIHBhcnQgb2YgdGhlIGluZGV4LTIgdGFibGUgZm9yIHN1cHBsZW1lbnRhcnkgY29kZSBwb2ludHMgc3RhcnRzCiAgICAgKiBhZnRlciB0aGlzIGluZGV4LTEgdGFibGUuCiAgICAgKgogICAgICogQm90aCB0aGUgaW5kZXgtMSB0YWJsZSBhbmQgdGhlIGZvbGxvd2luZyBwYXJ0IG9mIHRoZSBpbmRleC0yIHRhYmxlCiAgICAgKiBhcmUgb21pdHRlZCBjb21wbGV0ZWx5IGlmIHRoZXJlIGlzIG9ubHkgQk1QIGRhdGEuCiAgICAgKi8KICAgIHZhciBVVFJJRTJfSU5ERVhfMV9PRkZTRVQkMSA9IFVUUklFMl9VVEY4XzJCX0lOREVYXzJfT0ZGU0VUJDEgKyBVVFJJRTJfVVRGOF8yQl9JTkRFWF8yX0xFTkdUSCQxOwogICAgLyoqCiAgICAgKiBOdW1iZXIgb2YgaW5kZXgtMSBlbnRyaWVzIGZvciB0aGUgQk1QLiAzMj0weDIwCiAgICAgKiBUaGlzIHBhcnQgb2YgdGhlIGluZGV4LTEgdGFibGUgaXMgb21pdHRlZCBmcm9tIHRoZSBzZXJpYWxpemVkIGZvcm0uCiAgICAgKi8KICAgIHZhciBVVFJJRTJfT01JVFRFRF9CTVBfSU5ERVhfMV9MRU5HVEgkMSA9IDB4MTAwMDAgPj4gVVRSSUUyX1NISUZUXzEkMTsKICAgIC8qKiBOdW1iZXIgb2YgZW50cmllcyBpbiBhbiBpbmRleC0yIGJsb2NrLiA2ND0weDQwICovCiAgICB2YXIgVVRSSUUyX0lOREVYXzJfQkxPQ0tfTEVOR1RIJDEgPSAxIDw8IFVUUklFMl9TSElGVF8xXzIkMTsKICAgIC8qKiBNYXNrIGZvciBnZXR0aW5nIHRoZSBsb3dlciBiaXRzIGZvciB0aGUgaW4taW5kZXgtMi1ibG9jayBvZmZzZXQuICovCiAgICB2YXIgVVRSSUUyX0lOREVYXzJfTUFTSyQxID0gVVRSSUUyX0lOREVYXzJfQkxPQ0tfTEVOR1RIJDEgLSAxOwogICAgdmFyIHNsaWNlMTYkMSA9IGZ1bmN0aW9uICh2aWV3LCBzdGFydCwgZW5kKSB7CiAgICAgICAgaWYgKHZpZXcuc2xpY2UpIHsKICAgICAgICAgICAgcmV0dXJuIHZpZXcuc2xpY2Uoc3RhcnQsIGVuZCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBuZXcgVWludDE2QXJyYXkoQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodmlldywgc3RhcnQsIGVuZCkpOwogICAgfTsKICAgIHZhciBzbGljZTMyJDEgPSBmdW5jdGlvbiAodmlldywgc3RhcnQsIGVuZCkgewogICAgICAgIGlmICh2aWV3LnNsaWNlKSB7CiAgICAgICAgICAgIHJldHVybiB2aWV3LnNsaWNlKHN0YXJ0LCBlbmQpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gbmV3IFVpbnQzMkFycmF5KEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHZpZXcsIHN0YXJ0LCBlbmQpKTsKICAgIH07CiAgICB2YXIgY3JlYXRlVHJpZUZyb21CYXNlNjQkMSA9IGZ1bmN0aW9uIChiYXNlNjQsIF9ieXRlTGVuZ3RoKSB7CiAgICAgICAgdmFyIGJ1ZmZlciA9IGRlY29kZSQxKGJhc2U2NCk7CiAgICAgICAgdmFyIHZpZXczMiA9IEFycmF5LmlzQXJyYXkoYnVmZmVyKSA/IHBvbHlVaW50MzJBcnJheSQxKGJ1ZmZlcikgOiBuZXcgVWludDMyQXJyYXkoYnVmZmVyKTsKICAgICAgICB2YXIgdmlldzE2ID0gQXJyYXkuaXNBcnJheShidWZmZXIpID8gcG9seVVpbnQxNkFycmF5JDEoYnVmZmVyKSA6IG5ldyBVaW50MTZBcnJheShidWZmZXIpOwogICAgICAgIHZhciBoZWFkZXJMZW5ndGggPSAyNDsKICAgICAgICB2YXIgaW5kZXggPSBzbGljZTE2JDEodmlldzE2LCBoZWFkZXJMZW5ndGggLyAyLCB2aWV3MzJbNF0gLyAyKTsKICAgICAgICB2YXIgZGF0YSA9IHZpZXczMls1XSA9PT0gMgogICAgICAgICAgICA/IHNsaWNlMTYkMSh2aWV3MTYsIChoZWFkZXJMZW5ndGggKyB2aWV3MzJbNF0pIC8gMikKICAgICAgICAgICAgOiBzbGljZTMyJDEodmlldzMyLCBNYXRoLmNlaWwoKGhlYWRlckxlbmd0aCArIHZpZXczMls0XSkgLyA0KSk7CiAgICAgICAgcmV0dXJuIG5ldyBUcmllJDEodmlldzMyWzBdLCB2aWV3MzJbMV0sIHZpZXczMlsyXSwgdmlldzMyWzNdLCBpbmRleCwgZGF0YSk7CiAgICB9OwogICAgdmFyIFRyaWUkMSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKICAgICAgICBmdW5jdGlvbiBUcmllKGluaXRpYWxWYWx1ZSwgZXJyb3JWYWx1ZSwgaGlnaFN0YXJ0LCBoaWdoVmFsdWVJbmRleCwgaW5kZXgsIGRhdGEpIHsKICAgICAgICAgICAgdGhpcy5pbml0aWFsVmFsdWUgPSBpbml0aWFsVmFsdWU7CiAgICAgICAgICAgIHRoaXMuZXJyb3JWYWx1ZSA9IGVycm9yVmFsdWU7CiAgICAgICAgICAgIHRoaXMuaGlnaFN0YXJ0ID0gaGlnaFN0YXJ0OwogICAgICAgICAgICB0aGlzLmhpZ2hWYWx1ZUluZGV4ID0gaGlnaFZhbHVlSW5kZXg7CiAgICAgICAgICAgIHRoaXMuaW5kZXggPSBpbmRleDsKICAgICAgICAgICAgdGhpcy5kYXRhID0gZGF0YTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogR2V0IHRoZSB2YWx1ZSBmb3IgYSBjb2RlIHBvaW50IGFzIHN0b3JlZCBpbiB0aGUgVHJpZS4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSBjb2RlUG9pbnQgdGhlIGNvZGUgcG9pbnQKICAgICAgICAgKiBAcmV0dXJuIHRoZSB2YWx1ZQogICAgICAgICAqLwogICAgICAgIFRyaWUucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChjb2RlUG9pbnQpIHsKICAgICAgICAgICAgdmFyIGl4OwogICAgICAgICAgICBpZiAoY29kZVBvaW50ID49IDApIHsKICAgICAgICAgICAgICAgIGlmIChjb2RlUG9pbnQgPCAweDBkODAwIHx8IChjb2RlUG9pbnQgPiAweDBkYmZmICYmIGNvZGVQb2ludCA8PSAweDBmZmZmKSkgewogICAgICAgICAgICAgICAgICAgIC8vIE9yZGluYXJ5IEJNUCBjb2RlIHBvaW50LCBleGNsdWRpbmcgbGVhZGluZyBzdXJyb2dhdGVzLgogICAgICAgICAgICAgICAgICAgIC8vIEJNUCB1c2VzIGEgc2luZ2xlIGxldmVsIGxvb2t1cC4gIEJNUCBpbmRleCBzdGFydHMgYXQgb2Zmc2V0IDAgaW4gdGhlIFRyaWUyIGluZGV4LgogICAgICAgICAgICAgICAgICAgIC8vIDE2IGJpdCBkYXRhIGlzIHN0b3JlZCBpbiB0aGUgaW5kZXggYXJyYXkgaXRzZWxmLgogICAgICAgICAgICAgICAgICAgIGl4ID0gdGhpcy5pbmRleFtjb2RlUG9pbnQgPj4gVVRSSUUyX1NISUZUXzIkMV07CiAgICAgICAgICAgICAgICAgICAgaXggPSAoaXggPDwgVVRSSUUyX0lOREVYX1NISUZUJDEpICsgKGNvZGVQb2ludCAmIFVUUklFMl9EQVRBX01BU0skMSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0YVtpeF07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoY29kZVBvaW50IDw9IDB4ZmZmZikgewogICAgICAgICAgICAgICAgICAgIC8vIExlYWQgU3Vycm9nYXRlIENvZGUgUG9pbnQuICBBIFNlcGFyYXRlIGluZGV4IHNlY3Rpb24gaXMgc3RvcmVkIGZvcgogICAgICAgICAgICAgICAgICAgIC8vIGxlYWQgc3Vycm9nYXRlIGNvZGUgdW5pdHMgYW5kIGNvZGUgcG9pbnRzLgogICAgICAgICAgICAgICAgICAgIC8vICAgVGhlIG1haW4gaW5kZXggaGFzIHRoZSBjb2RlIHVuaXQgZGF0YS4KICAgICAgICAgICAgICAgICAgICAvLyAgIEZvciB0aGlzIGZ1bmN0aW9uLCB3ZSBuZWVkIHRoZSBjb2RlIHBvaW50IGRhdGEuCiAgICAgICAgICAgICAgICAgICAgLy8gTm90ZTogdGhpcyBleHByZXNzaW9uIGNvdWxkIGJlIHJlZmFjdG9yZWQgZm9yIHNsaWdodGx5IGltcHJvdmVkIGVmZmljaWVuY3ksIGJ1dAogICAgICAgICAgICAgICAgICAgIC8vICAgICAgIHN1cnJvZ2F0ZSBjb2RlIHBvaW50cyB3aWxsIGJlIHNvIHJhcmUgaW4gcHJhY3RpY2UgdGhhdCBpdCdzIG5vdCB3b3J0aCBpdC4KICAgICAgICAgICAgICAgICAgICBpeCA9IHRoaXMuaW5kZXhbVVRSSUUyX0xTQ1BfSU5ERVhfMl9PRkZTRVQkMSArICgoY29kZVBvaW50IC0gMHhkODAwKSA+PiBVVFJJRTJfU0hJRlRfMiQxKV07CiAgICAgICAgICAgICAgICAgICAgaXggPSAoaXggPDwgVVRSSUUyX0lOREVYX1NISUZUJDEpICsgKGNvZGVQb2ludCAmIFVUUklFMl9EQVRBX01BU0skMSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0YVtpeF07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoY29kZVBvaW50IDwgdGhpcy5oaWdoU3RhcnQpIHsKICAgICAgICAgICAgICAgICAgICAvLyBTdXBwbGVtZW50YWwgY29kZSBwb2ludCwgdXNlIHR3by1sZXZlbCBsb29rdXAuCiAgICAgICAgICAgICAgICAgICAgaXggPSBVVFJJRTJfSU5ERVhfMV9PRkZTRVQkMSAtIFVUUklFMl9PTUlUVEVEX0JNUF9JTkRFWF8xX0xFTkdUSCQxICsgKGNvZGVQb2ludCA+PiBVVFJJRTJfU0hJRlRfMSQxKTsKICAgICAgICAgICAgICAgICAgICBpeCA9IHRoaXMuaW5kZXhbaXhdOwogICAgICAgICAgICAgICAgICAgIGl4ICs9IChjb2RlUG9pbnQgPj4gVVRSSUUyX1NISUZUXzIkMSkgJiBVVFJJRTJfSU5ERVhfMl9NQVNLJDE7CiAgICAgICAgICAgICAgICAgICAgaXggPSB0aGlzLmluZGV4W2l4XTsKICAgICAgICAgICAgICAgICAgICBpeCA9IChpeCA8PCBVVFJJRTJfSU5ERVhfU0hJRlQkMSkgKyAoY29kZVBvaW50ICYgVVRSSUUyX0RBVEFfTUFTSyQxKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRhW2l4XTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChjb2RlUG9pbnQgPD0gMHgxMGZmZmYpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRhW3RoaXMuaGlnaFZhbHVlSW5kZXhdOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIEZhbGwgdGhyb3VnaC4gIFRoZSBjb2RlIHBvaW50IGlzIG91dHNpZGUgb2YgdGhlIGxlZ2FsIHJhbmdlIG9mIDAuLjB4MTBmZmZmLgogICAgICAgICAgICByZXR1cm4gdGhpcy5lcnJvclZhbHVlOwogICAgICAgIH07CiAgICAgICAgcmV0dXJuIFRyaWU7CiAgICB9KCkpOwoKICAgIC8qCiAgICAgKiBiYXNlNjQtYXJyYXlidWZmZXIgMS4wLjIgPGh0dHBzOi8vZ2l0aHViLmNvbS9uaWtsYXN2aC9iYXNlNjQtYXJyYXlidWZmZXI+CiAgICAgKiBDb3B5cmlnaHQgKGMpIDIwMjIgTmlrbGFzIHZvbiBIZXJ0emVuIDxodHRwczovL2hlcnR6ZW4uY29tPgogICAgICogUmVsZWFzZWQgdW5kZXIgTUlUIExpY2Vuc2UKICAgICAqLwogICAgdmFyIGNoYXJzJDMgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyc7CiAgICAvLyBVc2UgYSBsb29rdXAgdGFibGUgdG8gZmluZCB0aGUgaW5kZXguCiAgICB2YXIgbG9va3VwJDMgPSB0eXBlb2YgVWludDhBcnJheSA9PT0gJ3VuZGVmaW5lZCcgPyBbXSA6IG5ldyBVaW50OEFycmF5KDI1Nik7CiAgICBmb3IgKHZhciBpJDMgPSAwOyBpJDMgPCBjaGFycyQzLmxlbmd0aDsgaSQzKyspIHsKICAgICAgICBsb29rdXAkM1tjaGFycyQzLmNoYXJDb2RlQXQoaSQzKV0gPSBpJDM7CiAgICB9CgogICAgdmFyIGJhc2U2NCQxID0gJ0t3QUFBQUFBQUFBQUNBNEFVRDBBQURBZ0FBQUNBQUFBQUFBSUFCQUFHQUJBQUVnQVVBQllBR0FBYUFCZ0FHZ0FZZ0JxQUY4QVp3QmdBR2dBY1FCNUFIVUFmUUNGQUkwQWxRQ2RBS0lBcWdDeUFMb0FZQUJvQUdBQWFBQmdBR2dBd2dES0FHQUFhQURHQU00QTB3RGJBT0VBNlFEeEFQa0FBUUVKQVE4QkZ3RjFBSDBBSEFFa0FTd0JOQUU2QVVJQlFRRkpBVkVCV1FGaEFXZ0JjQUY0QVRBQWdBR0dBWTRCbFFHWEFaOEJwd0d2QWJVQnZRSEZBYzBCMHdIYkFlTUI2d0h4QWZrQkFRSUpBdkVCRVFJWkFpRUNLUUl4QWpnQ1FBSkdBazRDVmdKZUFtUUNiQUowQW53Q2dRS0pBcEVDbVFLZ0FxZ0NzQUs0QXJ3Q3hBSXdBTXdDMHdMYkFqQUE0d0xyQXZNQytBSUFBd2NERHdNd0FCY0RIUU1sQXkwRE5RTjFBRDBEUVFOSkEwa0RTUU5SQTFFRFZ3TlpBMWtEZFFCMUFHRURkUUJwQTIwRGRRTjFBSHNEZFFDQkE0a0RrUU4xQUhVQW1RT2hBM1VBZFFCMUFIVUFkUUIxQUhVQWRRQjFBSFVBZFFCMUFIVUFkUUIxQUhVQWRRQjFBS1lEcmdOMUFIVUF0Z08rQThZRHpnUFdBeGNEM2dQakErc0Q4d04xQUhVQSt3TURCQWtFZFFBTkJCVUVIUVFsQkNvRUZ3TXlCRGdFWUFCQUJCY0RTQVJRQkZnRVlBUm9CREFBY0FRekFYZ0VnQVNJQkpBRWRRQ1hCSFVBbndTbkJLNEV0Z1M2Qk1JRXlBUjFBSFVBZFFCMUFIVUFkUUNWQU5BRVlBQmdBR0FBWUFCZ0FHQUFZQUJnQU5nRVlBRGNCT1FFWUFEc0JQUUUvQVFFQlF3RkZBVWNCU1FGTEFVMEJXUUVQQVZFQlVzRlV3VmJCV0FBWWdWZ0FHb0ZjZ1Y2QllJRmlnV1JCV0FBbVFXZkJhWUZZQUJnQUdBQVlBQmdBS29GWUFDeEJiQUZ1UVc2QmNFRndRWEhCY0VGd1FYUEJkTUYyd1hqQmVvRjhnWDZCUUlHQ2dZU0Job0dJZ1lxQmpJR09nWmdBRDRHUmdaTUJtQUFVd1phQm1BQVlBQmdBR0FBWUFCZ0FHQUFZQUJnQUdBQVlBQmdBR0lHWUFCcEJuQUdZQUJnQUdBQVlBQmdBR0FBWUFCZ0FHQUFZQUI0Qm44R2hRWmdBR0FBWUFCMUFIY0RGUVNMQm1BQVlBQmdBSk1HZFFBOUEzVUFtd2FqQnFzR3F3YVZBTE1HdXdiREJqQUF5d2JTQnRJRzFRYlNCdElHMGdiU0J0SUcwZ2JkQnVNRzZ3YnpCdnNHQXdjTEJ4TUhBd2NiQnlNSEp3Y3NCeXdITVFjc0I5SUdPQWRBQjBnSFRnZlNCa2dIVmdmU0J0SUcwZ2JTQnRJRzBnYlNCdElHMGdiU0Jpd0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFkZ0FHQUFMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFkYkIyTUhMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0Iya0gwZ1p3QjY0RWRRQjFBSFVBZFFCMUFIVUFkUUIxQUhVSGZRZGdBSVVIalFkMUFIVUFsUWVkQjJBQVlBQ2xCNnNIWUFDekI3WUh2Z2ZHQjNVQXpnZldCek1CM2dmbUIxRUI3Z2YxQi8wSGxRRU5BUVVJRFFoMUFCVUlIUWdsQ0JjRExRZzFDRDBJUlFoTkNFRURVd2gxQUhVQWRRQmJDR01JWkFobENHWUlad2hvQ0drSVl3aGtDR1VJWmdobkNHZ0lhUWhqQ0dRSVpRaG1DR2NJYUFocENHTUlaQWhsQ0dZSVp3aG9DR2tJWXdoa0NHVUlaZ2huQ0dnSWFRaGpDR1FJWlFobUNHY0lhQWhwQ0dNSVpBaGxDR1lJWndob0NHa0lZd2hrQ0dVSVpnaG5DR2dJYVFoakNHUUlaUWhtQ0djSWFBaHBDR01JWkFobENHWUlad2hvQ0drSVl3aGtDR1VJWmdobkNHZ0lhUWhqQ0dRSVpRaG1DR2NJYUFocENHTUlaQWhsQ0dZSVp3aG9DR2tJWXdoa0NHVUlaZ2huQ0dnSWFRaGpDR1FJWlFobUNHY0lhQWhwQ0dNSVpBaGxDR1lJWndob0NHa0lZd2hrQ0dVSVpnaG5DR2dJYVFoakNHUUlaUWhtQ0djSWFBaHBDR01JWkFobENHWUlad2hvQ0drSVl3aGtDR1VJWmdobkNHZ0lhUWhqQ0dRSVpRaG1DR2NJYUFocENHTUlaQWhsQ0dZSVp3aG9DR2tJWXdoa0NHVUlaZ2huQ0dnSWFRaGpDR1FJWlFobUNHY0lhQWhwQ0dNSVpBaGxDR1lJWndob0NHa0lZd2hrQ0dVSVpnaG5DR2dJYVFoakNHUUlaUWhtQ0djSWFBaHBDR01JWkFobENHWUlad2hvQ0drSVl3aGtDR1VJWmdobkNHZ0lhUWhqQ0dRSVpRaG1DR2NJYUFocENHTUlaQWhsQ0dZSVp3aG9DR2tJWXdoa0NHVUlaZ2huQ0dnSWFRaGpDR1FJWlFobUNHY0lhQWhwQ0dNSVpBaGxDR1lJWndob0NHa0lZd2hrQ0dVSVpnaG5DR2dJYVFoakNHUUlaUWhtQ0djSWFBaHBDR01JWkFobENHWUlad2hvQ0drSVl3aGtDR1VJWmdobkNHZ0lhUWhqQ0dRSVpRaG1DR2NJYUFocENHTUlaQWhsQ0dZSVp3aG9DR2tJWXdoa0NHVUlaZ2huQ0dnSWFRaGpDR1FJWlFobUNHY0lhQWhwQ0dNSVpBaGxDR1lJWndob0NHa0lZd2hrQ0dVSVpnaG5DR2dJYVFoakNHUUlaUWhtQ0djSWFBaHBDR01JWkFobENHWUlad2hvQ0drSVl3aGtDR1VJWmdobkNHZ0lhUWhqQ0dRSVpRaG1DR2NJYUFocENHTUlaQWhsQ0dZSVp3aG9DR2tJWXdoa0NHVUlaZ2huQ0dnSWNBaDNDSG9JTUFBd0FEQUFNQUF3QURBQU1BQXdBREFBTUFBd0FEQUFNQUF3QURBQU1BQXdBREFBTUFBd0FEQUFNQUF3QURBQU1BQXdBREFBTUFBd0FEQUFNQUF3QUlJSWdnaUNDSUlJZ2dpQ0NJSUlnZ2lDQ0lJSWdnaUNDSUlJZ2dpQ0NJSUlnZ2lDQ0lJSWdnaUNDSUlJZ2dpQ0NJSUlnZ2lDQ0lJSWdnaUNDSUlJZ2dnd0FEQUFNQUF3QURBQU1BQXdBREFBTUFBd0FEQUFNQUF3QURBQU1BQXdBREFBTUFBd0FEQUFNQUF3QURBQU1BQXdBREFBTUFBd0FEQUFNQUF3QURBQU1BQXdBREFBTUFBd0FEQUFNQUF3QURBQU1BQXdBREFBTUFBd0FEQUFNQUF3QURBQU1BQXdBREFBTUFBd0FEQUFNQUF3QURBQU1BQXdBREFBTUFBd0FEQUFNQUF3QURBQU1BQXdBREFBTUFBd0FEQUFNQUF3QURBQU1BQXdBREFBTUFBd0FEQUFNQUF3QURBQU1BQXdBREFBTUFBd0FEQUFNQUF3QURBQU1BQXdBREFBTUFBd0FEQUFNQUF3QURBQU1BQXdBREFBTUFBd0FEQUFNQUF3QURBQU1BQXdBREFBTUFBd0FEQUFNQUF3QURBQU1BQXdBREFBTUFBd0FEQUFNQUF3QURBQU1BQXdBREFBTUFBd0FEQUFNQUF3QURBQU1BQXdBREFBTUFBd0FEQUFNQUF3QURBQU1BQXdBREFBTUFBd0FEQUFNQUF3QURBQU1BQXdBREFBTUFBd0FEQUFNQUF3QURBQU1BQXdBREFBTUFBd0FEQUFNQUF3QURBQU1BQXdBREFBTUFBd0FEQUFNQUF3QURBQU1BQXdBREFBTUFBd0FEQUFNQUF3QURBQU1BQXdBREFBTUFBd0FEQUFMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQjRvSUxBY3NCNDRJMGdhV0NKNElwZ2gxQUhVQXFnaXlDSFVBZFFCMUFIVUFkUUIxQUhVQWRRQjFBSFVBdHdoOEFYVUF2d2gxQU1VSXlRalJDTmtJNEFqb0NIVUFkUUIxQU80STlnaitDQVlKRGdrVENTMEhHd2tqQ1lJSWdnaUNDSUlJZ2dpQ0NJSUlnZ2lDQ0lJSWdnaUNDSUlJZ2dpQ0NJSUlnZ2lDQ0lJSWdnaUNDSUlJZ2dpQ0NJSUlnZ2lDQ0lJSWdnaUNDSUlJZ2dpQUFJQUFBQUZBQVlBQmdBR0lBWHdCZ0FIRUFkUUJGQUpVQW9nQ3lBS0FBWUFCZ0FFSUE0QUJHQU5NQTRRRHhBTUVCRHdFMUFGd0JMQUU2QVFFQlVRRjRRa2hDbUVLb1FyaENnQUhJUXNBQjBNTEFBY0FCd0FIQUFlREM2QUJvQUhEQ3dNTUFBY0FCd0FIQUFkRERHTU1BQWNBQjZNTTR3d2pEV01Ob3czakRhQUJvQUdnQWFBQm9BR2dBYUFCb0FHZ0FhQUJvQUdnQWFBQm9BR2dBYUFCb0FHZ0FhQUJvQUVqRHFBQld3NmJEcUFCcGc2Z0FhQUJvQUhjRHZ3T1BBK2dBYUFCZkEvOER2d08vQTc4RHZ3Ty9BNzhEdndPL0E3OER2d08vQTc4RHZ3Ty9BNzhEdndPL0E3OER2d08vQTc4RHZ3Ty9BNzhEdndPL0E3OERwY1BBQWNBQndBSEFBY0FCd0FIQUFjQUJ3QUhBQWNBQndBSEFBY0FCd0FIQUFjQUJ3QUhBQWNBQndBSEFBY0FCd0FIQUFjQUJ3QUhBQWNBQndBSEFBY0FCd0FIQUFjQUJ3QUhBQWNBQndBSEFBY0FCd0FIQUFjQUJ3QUhBQWNBQndBSEFBY0FCd0FIQUFjQUJ3QUhBQWNBQndBSEFBY0FCd0FIQUFjQUJ3QUhBQWNBQndBSEFBY0FCd0FIQUFjQUJ3QUhBQWNBQndBSEFBY0FCd0FIQUFjQUJ3QUhBQWNBQndBSEFBY0FCd0FIQUFjQUJ3QUhBQWNBQndBSEFBY0FCd0FIQUFjQUJ3QUhBQWNBQndBSEFBY0FCd0FIQUFjQUJ3QUhBQWNBQndBSEFBY0FCd0FIQUFjQUJ3QUhBQWNBQndBSEFBY0FCd0FIQUFjQUJ3QUhBQWNBQndBSEFBY0FCd0FIQUFjQUJ3QUhBQWNBQndBSEFBY0FCd0FIQUFjQUJ3QUhBQWNBQndBSEFBY0FCd0FIQUFjQUJ3QUhBQWNBQndBSEFBY0FCd0FIQUFjQUJ3QUhBQWNBQndBSEFBY0FCd0FIQUFjQUJ3QUhBQWNBQndBSEFBY0FCd0FIQUFjQUJ3QUhBQWNBQndBSEFBY0FCd0FIQUFjQUJ3QUhBQWNBQndBSEFBY0FCd0FIQUFjQUJ3QUhBQWNBQndBSEFBY0FCd0FIQUFjQUJ3QUhBQWNBQndBSEFBY0FCd0FIQUFjQUJ3QUhBQWNBQndBSEFBY0FCd0FIQUFjQUJ3QUhBQWNBQndBSEFBY0FCd0FIQUFjQUJ3QUhBQWNBQndBSEFBY0FCd0FIQUFjQUJ3QUhBQWNBQndBSEFBY0FCd0FIQUFjQUJ3QUhBQWNBQndBSEFBY0FCd0FIQUFjQUJ3QUhBQWNBQndBSEFBY0FCd0FIQUFjQUJ3QUhBQWNBQndBSEFBY0FCd0FIQUFjQUJ3QUhBQWNBQndBSEFBY0FCd0FIQUFjQUJ3QUhBQWNBQndBSEFBY0FCd0FIQUFjQUJ3QUhBQWNBQndBSEFBY0FCd0FIQUFjQUJ3QUhBQWNBQndBSEFBY0FCd0FIQUFjQUJ3QUhBQWNBQndBSEFBY0FCOWNQS3dreUNUb0pNQUIxQUhVQWRRQkNDVW9KVFFsMUFGVUpYQWxqQ1djSmF3a3dBREFBTUFBd0FITUpkUUIyQ1g0SmRRQ0VDWW9KamdtV0NYVUFuZ2t3QUdBQVlBQnhBSFVBcGduM0E2NEp0QWwxQUxrSmRRREFDVEFBTUFBd0FEQUFkUUIxQUhVQWRRQjFBSFVBZFFCMUFIVUFvd1lOQk1VSU1BQXdBREFBTUFESUNjc0owd25aQ1JVRTRRa3dBT2tKOEFuNENUQUFNQUIxQUFBS3Z3aDFBQWdLRHdvWENoOEtkUUF3QUNjS0xncDFBRFlLcUFtSUNUNEtSZ293QURBQWRRQjFBRTRLTUFCMUFGWUtkUUJlQ25VQVpRb3dBREFBTUFBd0FEQUFNQUF3QURBQU1BQVZCSFVBYlFvd0FEQUFkUUM1Q1hVS01BQXdBSHdCeEFpakJvZ0VNZ0Y5Q29RS2lBU01DcFFLbWdxSUJLSUtxZ3F1Q29nRURRRzJDcjRLeGdyTENqQUFNQURUQ3RzS0NnSGpDdXNLOFFyNUNnRUxNQUF3QURBQU1BQjFBSXNFQ1FzUkMzVUFOQUVaQ3pBQU1BQXdBREFBTUFCMUFDRUxLUXN3QUhVQU5BRXhDemtMZFFCQkMwa0xNQUJSQzFrTE1BQXdBREFBTUFBd0FEQUFkUUJoQ3pBQU1BQXdBR0FBWUFCcEMzRUxkd3QvQ3pBQU1BQ0hDNHNMa3d1YkM1OExwd3QxQUs0THRndDFBUHNETUFBd0FEQUFNQUF3QURBQU1BQXdBTDRMd3d2TEM5SUwxd3ZkQ3pBQU1BRGxDK2tMOFF2NUMvOExTUXN3QURBQU1BQXdBREFBTUFBd0FEQUFNQUFIRERBQU1BQXdBREFBTUFBT0RCWU1IZ3gxQUhVQWRRQjFBSFVBZFFCMUFIVUFkUUIxQUhVQWRRQjFBSFVBZFFCMUFIVUFkUUIxQUhVQWRRQjFBSFVBZFFCMUFIVUFkUUIxQUNZTU1BQXdBREFBZFFCMUFIVUFMZ3gxQUhVQWRRQjFBSFVBZFFBMkREQUFNQUF3QURBQU1BQXdBREFBTUFBd0FEQUFNQUF3QURBQU1BQXdBREFBTUFBd0FEQUFNQUF3QUhVQWRRQjFBSFVBZFFCMUFIVUFkUUIxQUhVQWRRQjFBSFVBZFFCMUFIVUFkUUIxQUQ0TWRRQkdESFVBZFFCMUFIVUFkUUIxQUVrTWRRQjFBSFVBZFFCMUFGQU1NQUF3QURBQU1BQXdBREFBTUFBd0FEQUFNQUF3QURBQU1BQXdBREFBTUFBd0FEQUFNQUF3QURBQU1BQXdBREFBTUFBd0FEQUFNQUF3QURBQU1BQXdBSFVBZFFCMUFIVUFkUUIxQUhVQWRRQjFBSFVBZFFCMUFIVUFkUUJZREhVQWRRQjFBRjhNTUFBd0FEQUFNQUF3QURBQU1BQXdBREFBTUFBd0FEQUFNQUIxQUhVQWRRQjFBSFVBZFFCMUFIVUFkUUIxQUhVQWRRQjFBSFVBZFFCMUFIVUErd01WQkdjTU1BQXdBSHdCYnd4MUFIY01md3lIREk4TU1BQXdBREFBTUFBd0FEQUFNQUF3QURBQU1BQXdBREFBTUFBd0FEQUFNQUF3QURBQU1BQXdBREFBWUFCZ0FKY01NQUF3QURBQWRRQjFBSjhNbFFDbEREQUFNQUN0REN3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQjdVTUxBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hkUUIxQUhVQWRRQjFBSFVBZFFCMUFIVUFkUUIxQUhVQWRRQjFBQTBFTUFDOUREQUFNQUF3QURBQU1BQXdBREFBTUFBd0FEQUFNQUF3QURBQU1BQXdBREFBTUFBd0FEQUFNQUF3QURBQU1BQXNCeXdITEFjc0J5d0hMQWNzQnl3SExRY3dBTUVNeUF3c0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0h6QXd3QURBQU1BQXdBREFBTUFBd0FEQUFNQUF3QURBQU1BQXdBREFBTUFBd0FEQUFNQUF3QURBQU1BQXdBREFBTUFBd0FEQUFNQUF3QURBQU1BQXdBREFBTUFBd0FEQUFNQUF3QURBQU1BQXdBSFVBZFFCMUFOUU0yUXpoRERBQU1BQXdBREFBTUFBd0FEQUFNQUF3QURBQU1BQXdBREFBTUFBd0FEQUFNQUF3QURBQU1BQXdBREFBTUFBd0FEQUFNQUJnQUdBQVlBQmdBR0FBWUFCZ0FPa01ZQUR4REdBQStBd0FEUVlOWUFCaENXQUFZQUFPRFRBQU1BQXdBREFBRmcxZ0FHQUFIZzM3QXpBQU1BQXdBREFBWUFCZ0FDWU5ZQUFzRFRRTlBBMWdBRU1OUGcxTERXQUFZQUJnQUdBQVlBQmdBR0FBWUFCZ0FHQUFVZzFhRFlzR1ZnbGhEVjBOY1FCbkRXME5kUTE1RFdBQVlBQmdBR0FBWUFCZ0FHQUFZQUJnQUdBQVlBQmdBR0FBWUFCZ0FHQUFsUUNCRFpVQWlBMlBEWmNOTUFBd0FEQUFNQUF3QURBQU1BQXdBREFBTUFBd0FEQUFNQUF3QURBQU1BQXdBREFBTUFBd0FEQUFNQUF3QURBQU1BQXdBREFBTUFBd0FEQUFNQUF3QURBQU1BQXdBREFBTUFBd0FEQUFNQUF3QURBQW53Mm5EVEFBTUFBd0FEQUFNQUF3QUhVQXJ3MjNEVEFBTUFBd0FEQUFNQUF3QURBQU1BQXdBREFBTUFCMUFMOE5NQUF3QURBQU1BQXdBREFBTUFBd0FEQUFNQUF3QURBQU1BQXdBREFBTUFBd0FEQUFNQUF3QURBQU1BQXdBREFBTUFBd0FEQUFNQUF3QURBQU1BQXdBREFBTUFBd0FEQUFNQUF3QURBQU1BQjFBSFVBZFFCMUFIVUFkUURIRFRBQVlBQmdBTThOTUFBd0FEQUFNQUF3QURBQU1BQXdBREFBTUFBd0FEQUFNQUF3QURBQU1BQXdBREFBTUFBd0FEQUFNQUF3QURBQTF3MTFBTndOTUFBd0FEMEI1QTB3QURBQU1BQXdBREFBTUFEc0RmUU4vQTBFRGd3T0ZBNHdBQnNPTUFBd0FEQUFNQUF3QURBQU1BQXdBTklHMGdiU0J0SUcwZ2JTQnRJRzBnWWpEaWdPd1FVdURzRUZNdzdTQmpvTzBnYlNCdElHMGdiU0J0SUcwZ2JTQnRJRzBnYlNCdElHUWc1S0RsSU9WZzdTQnRJR1hnNWxEbTBPZFE3U0J0SUdmUTZFRG9vT2pRNlVEdElHbWc2aER0SUcwZ2FvRHF3TzBnYTBEcndPMGdaZ0FHQUFZQURFRG1BQVlBQWtCdElHekE1Z0FOSU9ZQURhRG9rTzBnYlNCdDhPNXc3U0J1OE8wZ2IxRHZ3TzBnWmdBR0FBeEE3U0J0SUcwZ2JTQnRJR1lBQmdBR0FBWUFBRUQyQUFzQVVNRDlJRzBnYlNCdElHMGdiU0J0SUcwZ2JTQnRJRzBnYlNCdElHMGdiU0J0SUcwZ2JTQnRJRzBnYlNCdElHMGdiU0J0SUcwZ2JTQnRJRzBnYlNCdElHRkE4c0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjY0Q5SUdMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SEpBOHNCeXdITEFjc0J5d0hMQWNjRHl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3UExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjMEQ5SUcwZ2JTQnRJRzBnYlNCdElHMGdiU0J0SUcwZ2JTQnRJRzBnYlNCdElHMGdiU0J0SUcwZ2JTQnRJRzBnYlNCdElHMGdiU0J0SUcwZ2JTQnRJRzBnYlNCdElHMGdiU0J0SUcwZ2JTQnRJRzBnYlNCdElHMGdiU0J0SUcwZ2JTQnRJRzBnYlNCdElHMGdiU0J0SUcwZ2JTQnRJRzBnYlNCdElHMGdiU0J0SUdMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjY0Q5SUcwZ2JTQnRJRzBnYlNCdElHMGdiU0J0SUcwZ2JTQnRJRzBnYlNCdElHMGdiU0J0SUcwZ2JTQnRJRzBnYlNCdElHMGdiU0J0SUcwZ2JTQnRJRzBnYlNCdElHMGdiU0J0SUcwZ2JTQnRJRzBnYlNCdElHMGdiU0J0SUdGQThzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hMQWNzQnl3SExBY3NCeXdITEFjc0J5d0hQQS9TQnRJRzBnYlNCdElHMGdiU0J0SUcwZ2JTQnRJRzBnYlNCdElHMGdiU0J0SUcwZ2JTQnRJRzBnYlNCdElHMGdiU0J0SUcwZ2JTQnRJRzBnYlNCdElHMGdiU0J0SUcwZ2JTQnRJRzBnYlNCdElHMGdiU0J0SUcwZ2JTQnRJRzBnYlNCdElHMGdiU0J0SUcwZ2JTQnRJRzBnYlNCdElHMGdiU0J0SUcwZ1lVRDBRUGxRQ1ZBSlVBTUFBd0FEQUFNQUNWQUpVQWxRQ1ZBSlVBbFFDVkFFd1BNQUF3QURBQU1BQXdBREFBTUFBd0FEQUFNQUF3QURBQU1BQXdBREFBTUFBd0FEQUFNQUF3QURBQU1BQXdBREFBTUFBd0FEQUFNQUF3QURBQU1BQXdBREFBTUFBd0FEQUFNQUF3QURBQU1BQXdBREFBTUFBd0FEQUFNQUF3QURBQS8vOEVBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQU5BQU1BQVFBQkFBSUFCQUFFQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQUVBQVFBQkFBRUFBUUFDZ0FUQUJjQUhnQWJBQm9BSGdBWEFCWUFFZ0FlQUJzQUdBQVBBQmdBSEFCTEFFc0FTd0JMQUVzQVN3QkxBRXNBU3dCTEFCZ0FHQUFlQUI0QUhnQVRBQjRBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBQllBR3dBU0FCNEFIZ0FlQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUFXQUEwQUVRQWVBQVFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFBUUFCQUFFQUFRQUJBQUZBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQUpBQllBR2dBYkFCc0FHd0FlQUIwQUhRQWVBRThBRndBZUFBMEFIZ0FlQUJvQUd3QlBBRThBRGdCUUFCMEFIUUFkQUU4QVR3QVhBRThBVHdCUEFCWUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBQjBBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FkQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUFlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBRkFBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFBZUFCNEFIZ0FlQUZBQVR3QkFBRThBVHdCUEFFQUFUd0JRQUZBQVR3QlFBQjRBSGdBZUFCNEFIZ0FlQUIwQUhRQWRBQjBBSGdBZEFCNEFEZ0JRQUZBQVVBQlFBRkFBSGdBZUFCNEFIZ0FlQUI0QUhnQlFBQjRBVUFBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBQkFBRUFBUUFCQUFFQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUFKQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQUVBQWtBQ1FBSkFBa0FDUUFKQUFrQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQUVBQVFBQkFBZUFCNEFIZ0FlQUZBQUhnQWVBQjRBS3dBckFGQUFVQUJRQUZBQUdBQlFBQ3NBS3dBckFDc0FIZ0FlQUZBQUhnQlFBRkFBVUFBckFGQUFLd0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUt3QWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFCQUFFQUFRQUJBQUVBQVFBQkFBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBckFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFBckFDc0FVQUFlQUI0QUhnQWVBQjRBSGdCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQVlBQTBBS3dBckFCNEFIZ0FiQUNzQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUFRQURRQUVBQjRBQkFBRUFCNEFCQUFFQUJNQUJBQXJBQ3NBS3dBckFDc0FLd0FyQUNzQVZnQldBRllBVmdCV0FGWUFWZ0JXQUZZQVZnQldBRllBVmdCV0FGWUFWZ0JXQUZZQVZnQldBRllBVmdCV0FGWUFWZ0JXQUZZQUt3QXJBQ3NBS3dCV0FGWUFWZ0JXQUI0QUhnQXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBR2dBYUFCb0FHQUFZQUI0QUhnQUVBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQUVBQVFBRXdBRUFDc0FFd0FUQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUFFQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQkxBRXNBU3dCTEFFc0FTd0JMQUVzQVN3QkxBQm9BR1FBWkFCNEFVQUJRQUFRQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFCTUFVQUFFQUFRQUJBQUVBQVFBQkFBRUFCNEFIZ0FFQUFRQUJBQUVBQVFBQkFCUUFGQUFCQUFFQUI0QUJBQUVBQVFBQkFCUUFGQUFTd0JMQUVzQVN3QkxBRXNBU3dCTEFFc0FTd0JRQUZBQVVBQWVBQjRBVUFBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUt3QWVBRkFBQkFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUFFQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUNzQUt3QlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQUVBRkFBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUVzQVN3QkxBRXNBU3dCTEFFc0FTd0JMQUVzQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFCQUFFQUFRQUJBQUVBQVFBQkFBRUFBUUFVQUJRQUI0QUhnQVlBQk1BVUFBckFDc0FCQUFiQUJzQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFBRUFBUUFCQUFFQUZBQUJBQUVBQVFBQkFBRUFGQUFCQUFFQUFRQVVBQUVBQVFBQkFBRUFBUUFLd0FyQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFDc0FVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFBRUFBUUFCQUFyQUNzQUhnQXJBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0JRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQXJBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFBUUFCQUFFQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQUVBQjRBQkFBRUFBUUFCQUFFQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQUVBQVFBQkFBRUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUFRQUJBQUVBRkFBQkFBRUFBUUFCQUFFQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQUVBQVFBVUFBRUFBUUFCQUFFQUFRQUJBQUVBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBQkFBRUFBMEFEUUJMQUVzQVN3QkxBRXNBU3dCTEFFc0FTd0JMQUI0QVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUFFQUFRQUJBQXJBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQXJBQ3NBVUFCUUFDc0FLd0JRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBS3dCUUFGQUFVQUJRQUZBQVVBQlFBQ3NBVUFBckFDc0FLd0JRQUZBQVVBQlFBQ3NBS3dBRUFGQUFCQUFFQUFRQUJBQUVBQVFBQkFBckFDc0FCQUFFQUNzQUt3QUVBQVFBQkFCUUFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBRUFDc0FLd0FyQUNzQVVBQlFBQ3NBVUFCUUFGQUFCQUFFQUNzQUt3QkxBRXNBU3dCTEFFc0FTd0JMQUVzQVN3QkxBRkFBVUFBYUFCb0FVQUJRQUZBQVVBQlFBRXdBSGdBYkFGQUFIZ0FFQUNzQUt3QUVBQVFBQkFBckFGQUFVQUJRQUZBQVVBQlFBQ3NBS3dBckFDc0FVQUJRQUNzQUt3QlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFLd0JRQUZBQVVBQlFBRkFBVUFCUUFDc0FVQUJRQUNzQVVBQlFBQ3NBVUFCUUFDc0FLd0FFQUNzQUJBQUVBQVFBQkFBRUFDc0FLd0FyQUNzQUJBQUVBQ3NBS3dBRUFBUUFCQUFyQUNzQUt3QUVBQ3NBS3dBckFDc0FLd0FyQUNzQVVBQlFBRkFBVUFBckFGQUFLd0FyQUNzQUt3QXJBQ3NBS3dCTEFFc0FTd0JMQUVzQVN3QkxBRXNBU3dCTEFBUUFCQUJRQUZBQVVBQUVBQjRBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBRUFBUUFCQUFyQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUNzQVVBQlFBRkFBS3dCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQUt3QlFBRkFBVUFCUUFGQUFVQUJRQUNzQVVBQlFBQ3NBVUFCUUFGQUFVQUJRQUNzQUt3QUVBRkFBQkFBRUFBUUFCQUFFQUFRQUJBQUVBQ3NBQkFBRUFBUUFLd0FFQUFRQUJBQXJBQ3NBVUFBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QlFBRkFBQkFBRUFDc0FLd0JMQUVzQVN3QkxBRXNBU3dCTEFFc0FTd0JMQUI0QUd3QXJBQ3NBS3dBckFDc0FLd0FyQUZBQUJBQUVBQVFBQkFBRUFBUUFLd0FFQUFRQUJBQXJBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQXJBQ3NBVUFCUUFDc0FLd0JRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBQVFBQkFBRUFBUUFCQUFyQUNzQUJBQUVBQ3NBS3dBRUFBUUFCQUFyQUNzQUt3QXJBQ3NBS3dBckFBUUFCQUFFQUNzQUt3QXJBQ3NBVUFCUUFDc0FVQUJRQUZBQUJBQUVBQ3NBS3dCTEFFc0FTd0JMQUVzQVN3QkxBRXNBU3dCTEFCNEFVQUJRQUZBQVVBQlFBRkFBVUFBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFBUUFVQUFyQUZBQVVBQlFBRkFBVUFCUUFDc0FLd0FyQUZBQVVBQlFBQ3NBVUFCUUFGQUFVQUFyQUNzQUt3QlFBRkFBS3dCUUFDc0FVQUJRQUNzQUt3QXJBRkFBVUFBckFDc0FLd0JRQUZBQVVBQXJBQ3NBS3dCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUFyQUNzQUt3QXJBQVFBQkFBRUFBUUFCQUFyQUNzQUt3QUVBQVFBQkFBckFBUUFCQUFFQUFRQUt3QXJBRkFBS3dBckFDc0FLd0FyQUNzQUJBQXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBRXNBU3dCTEFFc0FTd0JMQUVzQVN3QkxBRXNBVUFCUUFGQUFIZ0FlQUI0QUhnQWVBQjRBR3dBZUFDc0FLd0FyQUNzQUt3QUVBQVFBQkFBRUFBUUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFDc0FVQUJRQUZBQUt3QlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUFyQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFLd0FyQUNzQVVBQUVBQVFBQkFBRUFBUUFCQUFFQUNzQUJBQUVBQVFBS3dBRUFBUUFCQUFFQUNzQUt3QXJBQ3NBS3dBckFDc0FCQUFFQUNzQVVBQlFBRkFBS3dBckFDc0FLd0FyQUZBQVVBQUVBQVFBS3dBckFFc0FTd0JMQUVzQVN3QkxBRXNBU3dCTEFFc0FLd0FyQUNzQUt3QXJBQ3NBS3dBT0FGQUFVQUJRQUZBQVVBQlFBRkFBSGdCUUFBUUFCQUFFQUE0QVVBQlFBRkFBVUFCUUFGQUFVQUJRQUNzQVVBQlFBRkFBS3dCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQXJBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBS3dCUUFGQUFVQUJRQUZBQUt3QXJBQVFBVUFBRUFBUUFCQUFFQUFRQUJBQUVBQ3NBQkFBRUFBUUFLd0FFQUFRQUJBQUVBQ3NBS3dBckFDc0FLd0FyQUNzQUJBQUVBQ3NBS3dBckFDc0FLd0FyQUNzQVVBQXJBRkFBVUFBRUFBUUFLd0FyQUVzQVN3QkxBRXNBU3dCTEFFc0FTd0JMQUVzQUt3QlFBRkFBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FFQUFRQUJBQUVBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBQ3NBVUFCUUFGQUFLd0JRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQUJBQUVBRkFBQkFBRUFBUUFCQUFFQUFRQUJBQXJBQVFBQkFBRUFDc0FCQUFFQUFRQUJBQlFBQjRBS3dBckFDc0FLd0JRQUZBQVVBQUVBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBQkFBRUFDc0FLd0JMQUVzQVN3QkxBRXNBU3dCTEFFc0FTd0JMQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUJvQVVBQlFBRkFBVUFCUUFGQUFLd0FFQUFRQUJBQXJBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBQ3NBS3dBckFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUFyQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUNzQVVBQXJBQ3NBVUFCUUFGQUFVQUJRQUZBQVVBQXJBQ3NBS3dBRUFDc0FLd0FyQUNzQUJBQUVBQVFBQkFBRUFBUUFLd0FFQUNzQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUNzQUt3QXJBQ3NBS3dBckFFc0FTd0JMQUVzQVN3QkxBRXNBU3dCTEFFc0FLd0FyQUFRQUJBQWVBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFGd0FYQUJjQUZ3QVhBQmNBRndBWEFCY0FGd0FYQUJjQUZ3QVhBQmNBRndBWEFCY0FGd0FYQUJjQUZ3QVhBQmNBRndBWEFCY0FGd0FYQUJjQUZ3QVhBQXFBRndBWEFBcUFDb0FLZ0FxQUNvQUtnQXFBQ3NBS3dBckFDc0FHd0JjQUZ3QVhBQmNBRndBWEFCY0FDb0FLZ0FxQUNvQUtnQXFBQ29BS2dBZUFFc0FTd0JMQUVzQVN3QkxBRXNBU3dCTEFFc0FEUUFOQUNzQUt3QXJBQ3NBS3dCY0FGd0FLd0JjQUNzQVhBQmNBRndBWEFCY0FDc0FYQUJjQUZ3QVhBQmNBRndBWEFCY0FGd0FYQUJjQUZ3QVhBQmNBRndBWEFCY0FGd0FYQUJjQUNzQVhBQXJBRndBWEFCY0FGd0FYQUJjQUZ3QVhBQmNBRndBS2dCY0FGd0FLZ0FxQUNvQUtnQXFBQ29BS2dBcUFDb0FYQUFyQUNzQVhBQmNBRndBWEFCY0FDc0FYQUFyQUNvQUtnQXFBQ29BS2dBcUFDc0FLd0JMQUVzQVN3QkxBRXNBU3dCTEFFc0FTd0JMQUNzQUt3QmNBRndBWEFCY0FGQUFEZ0FPQUE0QURnQWVBQTRBRGdBSkFBNEFEZ0FOQUFrQUV3QVRBQk1BRXdBVEFBa0FIZ0FUQUI0QUhnQWVBQVFBQkFBZUFCNEFIZ0FlQUI0QUhnQkxBRXNBU3dCTEFFc0FTd0JMQUVzQVN3QkxBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBRFFBRUFCNEFCQUFlQUFRQUZnQVJBQllBRVFBRUFBUUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFDc0FVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBS3dBckFDc0FLd0FFQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQUVBQVFBRFFBRUFBUUFCQUFFQUFRQURRQUVBQVFBVUFCUUFGQUFVQUJRQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQXJBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUFyQUEwQURRQWVBQjRBSGdBZUFCNEFIZ0FFQUI0QUhnQWVBQjRBSGdBZUFDc0FIZ0FlQUE0QURnQU5BQTRBSGdBZUFCNEFIZ0FlQUFrQUNRQXJBQ3NBS3dBckFDc0FYQUJjQUZ3QVhBQmNBRndBWEFCY0FGd0FYQUJjQUZ3QVhBQmNBRndBWEFCY0FGd0FYQUJjQUZ3QVhBQmNBRndBWEFCY0FGd0FYQUJjQUZ3QVhBQmNBRndBWEFCY0FDb0FLZ0FxQUNvQUtnQXFBQ29BS2dBcUFDb0FLZ0FxQUNvQUtnQXFBQ29BS2dBcUFDb0FLZ0JjQUVzQVN3QkxBRXNBU3dCTEFFc0FTd0JMQUVzQURRQU5BQjRBSGdBZUFCNEFYQUJjQUZ3QVhBQmNBRndBS2dBcUFDb0FLZ0JjQUZ3QVhBQmNBQ29BS2dBcUFGd0FLZ0FxQUNvQVhBQmNBQ29BS2dBcUFDb0FLZ0FxQUNvQVhBQmNBRndBS2dBcUFDb0FLZ0JjQUZ3QVhBQmNBRndBWEFCY0FGd0FYQUJjQUZ3QVhBQmNBQ29BS2dBcUFDb0FLZ0FxQUNvQUtnQXFBQ29BS2dBcUFGd0FLZ0JMQUVzQVN3QkxBRXNBU3dCTEFFc0FTd0JMQUNvQUtnQXFBQ29BS2dBcUFGQUFVQUJRQUZBQVVBQlFBQ3NBVUFBckFDc0FLd0FyQUNzQVVBQXJBQ3NBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBSGdCUUFGQUFVQUJRQUZnQVdBQllBRmdBV0FCWUFGZ0FXQUJZQUZnQVdBQllBRmdBV0FCWUFGZ0FXQUJZQUZnQVdBQllBRmdBV0FCWUFGZ0FXQUJZQUZnQVdBQllBRmdBV0FCWkFGa0FXUUJaQUZrQVdRQlpBRmtBV1FCWkFGa0FXUUJaQUZrQVdRQlpBRmtBV1FCWkFGa0FXUUJaQUZrQVdRQlpBRmtBV1FCWkFGa0FXUUJaQUZrQVdnQmFBRm9BV2dCYUFGb0FXZ0JhQUZvQVdnQmFBRm9BV2dCYUFGb0FXZ0JhQUZvQVdnQmFBRm9BV2dCYUFGb0FXZ0JhQUZvQVdnQmFBRm9BV2dCYUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFDc0FVQUJRQUZBQVVBQXJBQ3NBVUFCUUFGQUFVQUJRQUZBQVVBQXJBRkFBS3dCUUFGQUFVQUJRQUNzQUt3QlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQXJBRkFBVUFCUUFGQUFLd0FyQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUFyQUZBQVVBQlFBRkFBS3dBckFGQUFVQUJRQUZBQVVBQlFBRkFBS3dCUUFDc0FVQUJRQUZBQVVBQXJBQ3NBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQUt3QlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQUt3QlFBRkFBVUFCUUFDc0FLd0JRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUFyQUNzQUJBQUVBQVFBSGdBTkFCNEFIZ0FlQUI0QUhnQWVBQjRBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFDc0FLd0FyQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FyQUNzQUt3QXJBQ3NBS3dCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUNzQUt3QlFBRkFBVUFCUUFGQUFVQUFyQUNzQURRQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFIZ0FlQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUFOQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUFXQUJFQUt3QXJBQ3NBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFBMEFEUUFOQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQXJBQ3NBS3dBckFDc0FLd0FyQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBS3dCUUFGQUFVQUJRQUFRQUJBQUVBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFBRUFBUUFCQUFOQUEwQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQUJBQUVBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQUt3QlFBRkFBVUFBckFBUUFCQUFyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QmNBRndBWEFCY0FGd0FYQUJjQUZ3QVhBQmNBRndBWEFCY0FGd0FYQUJjQUZ3QVhBQmNBRndBS2dBcUFDb0FLZ0FxQUNvQUtnQXFBQ29BS2dBcUFDb0FLZ0FxQUNvQUtnQXFBQ29BS2dBcUFBMEFEUUFWQUZ3QURRQWVBQTBBR3dCY0FDb0FLd0FyQUVzQVN3QkxBRXNBU3dCTEFFc0FTd0JMQUVzQUt3QXJBQ3NBS3dBckFDc0FVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUFyQUNzQUt3QXJBQ3NBS3dBZUFCNEFFd0FUQUEwQURRQU9BQjRBRXdBVEFCNEFCQUFFQUFRQUNRQXJBRXNBU3dCTEFFc0FTd0JMQUVzQVN3QkxBRXNBS3dBckFDc0FLd0FyQUNzQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUFyQUNzQUt3QXJBQ3NBS3dBckFGQUFVQUJRQUZBQVVBQUVBQVFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBQVFBVUFBckFDc0FLd0FyQUNzQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQUt3QUVBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQUVBQVFBQkFBckFDc0FLd0FyQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQUVBQ3NBS3dBckFDc0FIZ0FyQUNzQUt3QVRBQk1BU3dCTEFFc0FTd0JMQUVzQVN3QkxBRXNBU3dCY0FGd0FYQUJjQUZ3QVhBQmNBRndBWEFCY0FGd0FYQUJjQUZ3QVhBQmNBRndBWEFBckFDc0FYQUJjQUZ3QVhBQmNBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dCY0FGd0FYQUJjQUZ3QVhBQmNBRndBWEFCY0FGd0FYQUFyQUNzQUt3QXJBRndBWEFCY0FGd0FYQUJjQUZ3QVhBQmNBRndBWEFCY0FGd0FYQUJjQUZ3QVhBQmNBQ3NBS3dBckFDc0FLd0FyQUVzQVN3QkxBRXNBU3dCTEFFc0FTd0JMQUVzQVhBQXJBQ3NBS3dBcUFDb0FVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBQVFBQkFBRUFBUUFCQUFyQUNzQUhnQWVBRndBWEFCY0FGd0FYQUJjQUZ3QVhBQmNBRndBWEFCY0FGd0FYQUJjQUZ3QVhBQmNBRndBWEFCY0FDb0FLZ0FxQUNvQUtnQXFBQ29BS2dBcUFDb0FLd0FxQUNvQUtnQXFBQ29BS2dBcUFDb0FLZ0FxQUNvQUtnQXFBQ29BS2dBcUFDb0FLZ0FxQUNvQUtnQXFBQ29BS2dBcUFDb0FLZ0FxQUNvQUt3QXJBQVFBU3dCTEFFc0FTd0JMQUVzQVN3QkxBRXNBU3dBckFDc0FLd0FyQUNzQUt3QkxBRXNBU3dCTEFFc0FTd0JMQUVzQVN3QkxBQ3NBS3dBckFDc0FLd0FyQUNvQUtnQXFBQ29BS2dBcUFDb0FYQUFxQUNvQUtnQXFBQ29BS2dBckFDc0FCQUFFQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQUVBQVFBQkFBRUFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUJBQUVBQVFBQkFBRUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFBUUFCQUFFQUFRQUJBQlFBRkFBVUFCUUFGQUFVQUJRQUNzQUt3QXJBQ3NBU3dCTEFFc0FTd0JMQUVzQVN3QkxBRXNBU3dBTkFBMEFIZ0FOQUEwQURRQU5BQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBQkFBRUFBUUFCQUFFQUFRQUJBQUVBQVFBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBS3dBckFDc0FCQUFFQUFRQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBQkFBRUFBUUFCQUFFQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUJRQUZBQVN3QkxBRXNBU3dCTEFFc0FTd0JMQUVzQVN3QlFBRkFBVUFCUUFGQUFVQUJRQUZBQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQUVBQVFBQkFBRUFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBZUFCNEFIZ0FlQUZBQVVBQlFBRkFBQkFBRUFBUUFCQUFFQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQUVBQVFBQkFBRUFDc0FLd0FyQUEwQURRQU5BQTBBRFFCTEFFc0FTd0JMQUVzQVN3QkxBRXNBU3dCTEFDc0FLd0FyQUZBQVVBQlFBRXNBU3dCTEFFc0FTd0JMQUVzQVN3QkxBRXNBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUEwQURRQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQXJBQ3NBS3dBckFDc0FLd0FyQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUNzQUt3QlFBRkFBVUFBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBS3dBckFDc0FLd0FyQUNzQUt3QXJBQVFBQkFBRUFCNEFCQUFFQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQlFBRkFBVUFCUUFBUUFVQUJRQUZBQVVBQlFBRkFBQkFCUUFGQUFCQUFFQUFRQVVBQXJBQ3NBS3dBckFDc0FCQUFFQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQUVBQVFBQkFBRUFDc0FCQUFFQUFRQUJBQUVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFLd0FyQUZBQVVBQlFBRkFBVUFCUUFDc0FLd0JRQUZBQVVBQlFBRkFBVUFCUUFGQUFLd0JRQUNzQVVBQXJBRkFBS3dBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUNzQUt3QWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBckFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdCUUFCNEFIZ0FlQUZBQVVBQlFBQ3NBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdCUUFGQUFVQUJRQUNzQUt3QWVBQjRBSGdBZUFCNEFIZ0FyQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUt3QXJBRkFBVUFCUUFDc0FIZ0FlQUI0QUhnQWVBQjRBSGdBT0FCNEFLd0FOQUEwQURRQU5BQTBBRFFBTkFBa0FEUUFOQUEwQUNBQUVBQXNBQkFBRUFBMEFDUUFOQUEwQURBQWRBQjBBSGdBWEFCY0FGZ0FYQUJjQUZ3QVdBQmNBSFFBZEFCNEFIZ0FVQUJRQUZBQU5BQUVBQVFBRUFBUUFCQUFFQUFRQUNRQWFBQm9BR2dBYUFCb0FHZ0FhQUJvQUhnQVhBQmNBSFFBVkFCVUFIZ0FlQUI0QUhnQWVBQjRBR0FBV0FCRUFGUUFWQUJVQUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBRFFBZUFBMEFEUUFOQUEwQUhnQU5BQTBBRFFBSEFCNEFIZ0FlQUI0QUt3QUVBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQUVBRkFBVUFBckFDc0FUd0JRQUZBQVVBQlFBRkFBSGdBZUFCNEFGZ0FSQUU4QVVBQlBBRThBVHdCUEFGQUFVQUJRQUZBQVVBQWVBQjRBSGdBV0FCRUFLd0JRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBQ3NBS3dBckFCc0FHd0FiQUJzQUd3QWJBQnNBR2dBYkFCc0FHd0FiQUJzQUd3QWJBQnNBR3dBYkFCc0FHd0FiQUJzQUdnQWJBQnNBR3dBYkFCb0FHd0FiQUJvQUd3QWJBQnNBR3dBYkFCc0FHd0FiQUJzQUd3QWJBQnNBR3dBYkFCc0FHd0FiQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQUVBQVFBQkFBRUFBUUFIZ0FlQUZBQUdnQWVBQjBBSGdCUUFCNEFHZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0JQQUI0QVVBQWJBQjRBSGdCUUFGQUFVQUJRQUZBQUhnQWVBQjRBSFFBZEFCNEFVQUFlQUZBQUhnQlFBQjRBVUFCUEFGQUFVQUFlQUI0QUhnQWVBQjRBSGdBZUFGQUFVQUJRQUZBQVVBQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUZBQUhnQlFBRkFBVUFCUUFFOEFUd0JRQUZBQVVBQlFBRkFBVHdCUUFGQUFUd0JRQUU4QVR3QlBBRThBVHdCUEFFOEFUd0JQQUU4QVR3QlBBRkFBVUFCUUFGQUFUd0JQQUU4QVR3QlBBRThBVHdCUEFFOEFUd0JRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUFlQUI0QVVBQlFBRkFBVUFCUEFCNEFIZ0FyQUNzQUt3QXJBQjBBSFFBZEFCMEFIUUFkQUIwQUhRQWRBQjBBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCMEFIZ0FkQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWRBQjRBSFFBZEFCNEFIZ0FlQUIwQUhRQWVBQjRBSFFBZUFCNEFIZ0FkQUI0QUhRQWJBQnNBSGdBZEFCNEFIZ0FlQUI0QUhRQWVBQjRBSFFBZEFCMEFIUUFlQUI0QUhRQWVBQjBBSGdBZEFCMEFIUUFkQUIwQUhRQWVBQjBBSGdBZUFCNEFIZ0FlQUIwQUhRQWRBQjBBSGdBZUFCNEFIZ0FkQUIwQUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWRBQjRBSGdBZUFCMEFIZ0FlQUI0QUhnQWVBQjBBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FkQUIwQUhnQWVBQjBBSFFBZEFCMEFIZ0FlQUIwQUhRQWVBQjRBSFFBZEFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCMEFIUUFlQUI0QUhRQWRBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIUUFlQUI0QUhnQWRBQjRBSGdBZUFCNEFIZ0FlQUI0QUhRQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUIwQUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFGQUFlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCWUFFUUFXQUJFQUhnQWVBQjRBSGdBZUFCNEFIUUFlQUI0QUhnQWVBQjRBSGdBZUFDVUFKUUFlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FXQUJFQUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSlFBbEFDVUFKUUFlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBRThBVHdCUEFFOEFUd0JQQUU4QVR3QlBBRThBVHdCUEFFOEFUd0JQQUU4QVR3QlBBRThBVHdCUEFFOEFUd0JQQUU4QVR3QlBBRThBVHdCUEFFOEFUd0FkQUIwQUhRQWRBQjBBSFFBZEFCMEFIUUFkQUIwQUhRQWRBQjBBSFFBZEFCMEFIUUFkQUIwQUhRQWRBQjBBSFFBZEFCMEFIUUFkQUIwQUhRQWRBQjBBSFFBZEFFOEFUd0JQQUU4QVR3QlBBRThBVHdCUEFFOEFUd0JQQUU4QVR3QlBBRThBVHdCUEFFOEFUd0JQQUZBQUhRQWRBQjBBSFFBZEFCMEFIUUFkQUIwQUhRQWRBQjBBSGdBZUFCNEFIZ0FkQUIwQUhRQWRBQjBBSFFBZEFCMEFIUUFkQUIwQUhRQWRBQjBBSFFBZEFCMEFIUUFkQUIwQUhRQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSFFBZEFCMEFIUUFkQUIwQUhRQWRBQjBBSFFBZEFCMEFIUUFkQUIwQUhRQWVBQjRBSFFBZEFCMEFIUUFlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUIwQUhRQWVBQjBBSFFBZEFCMEFIUUFkQUIwQUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUIwQUhRQWVBQjRBSFFBZEFCNEFIZ0FlQUI0QUhRQWRBQjRBSGdBZUFCNEFIUUFkQUIwQUhnQWVBQjBBSGdBZUFCMEFIUUFkQUIwQUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FkQUIwQUhRQWRBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjBBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWxBQ1VBSlFBbEFCNEFIUUFkQUI0QUhnQWRBQjRBSGdBZUFCNEFIUUFkQUI0QUhnQWVBQjRBSlFBbEFCMEFIUUFsQUI0QUpRQWxBQ1VBSUFBbEFDVUFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBbEFDVUFKUUFlQUI0QUhnQWVBQjBBSGdBZEFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FkQUIwQUhnQWRBQjBBSFFBZUFCMEFKUUFkQUIwQUhnQWRBQjBBSGdBZEFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQ1VBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIUUFkQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWxBQ1VBSlFBbEFDVUFKUUFsQUNVQUpRQWxBQ1VBSlFBZEFCMEFIUUFkQUNVQUhnQWxBQ1VBSlFBZEFDVUFKUUFkQUIwQUhRQWxBQ1VBSFFBZEFDVUFIUUFkQUNVQUpRQWxBQjRBSFFBZUFCNEFIZ0FlQUIwQUhRQWxBQjBBSFFBZEFCMEFIUUFkQUNVQUpRQWxBQ1VBSlFBZEFDVUFKUUFnQUNVQUhRQWRBQ1VBSlFBbEFDVUFKUUFsQUNVQUpRQWVBQjRBSGdBbEFDVUFJQUFnQUNBQUlBQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUIwQUhnQWVBQjRBRndBWEFCY0FGd0FYQUJjQUhnQVRBQk1BSlFBZUFCNEFIZ0FXQUJFQUZnQVJBQllBRVFBV0FCRUFGZ0FSQUJZQUVRQVdBQkVBVHdCUEFFOEFUd0JQQUU4QVR3QlBBRThBVHdCUEFFOEFUd0JQQUU4QVR3QlBBRThBVHdCUEFFOEFUd0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQllBRVFBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBV0FCRUFGZ0FSQUJZQUVRQVdBQkVBRmdBUkFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFGZ0FSQUJZQUVRQVdBQkVBRmdBUkFCWUFFUUFXQUJFQUZnQVJBQllBRVFBV0FCRUFGZ0FSQUJZQUVRQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQVdBQkVBRmdBUkFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFGZ0FSQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZEFCMEFIUUFkQUIwQUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBckFDc0FIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBS3dBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFVQUJRQUZBQVVBQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FFQUFRQUJBQWVBQjRBS3dBckFDc0FLd0FyQUJNQURRQU5BQTBBVUFBVEFBMEFVQUJRQUZBQVVBQlFBRkFBVUFCUUFDc0FLd0FyQUNzQUt3QXJBQ3NBVUFBTkFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QUVBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUFyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0JRQUZBQVVBQlFBRkFBVUFCUUFDc0FVQUJRQUZBQVVBQlFBRkFBVUFBckFGQUFVQUJRQUZBQVVBQlFBRkFBS3dCUUFGQUFVQUJRQUZBQVVBQlFBQ3NBRndBWEFCY0FGd0FYQUJjQUZ3QVhBQmNBRndBWEFCY0FGd0FYQUEwQURRQU5BQTBBRFFBTkFBMEFEUUFlQUEwQUZnQU5BQjRBSGdBWEFCY0FIZ0FlQUJjQUZ3QVdBQkVBRmdBUkFCWUFFUUFXQUJFQURRQU5BQTBBRFFBVEFGQUFEUUFOQUI0QURRQU5BQjRBSGdBZUFCNEFIZ0FNQUF3QURRQU5BQTBBSGdBTkFBMEFGZ0FOQUEwQURRQU5BQTBBRFFBTkFBMEFIZ0FOQUI0QURRQU5BQjRBSGdBZUFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUpRQWxBQ1VBSlFBbEFDVUFKUUFsQUNVQUpRQWxBQ1VBSlFBbEFDVUFKUUFsQUNVQUpRQWxBQ1VBSlFBbEFDVUFKUUFsQUNzQUpRQWxBQ1VBSlFBbEFDVUFKUUFsQUNVQUpRQWxBQ1VBSlFBbEFDVUFKUUFsQUNVQUpRQWxBQ1VBSlFBbEFDVUFKUUFsQUNVQUpRQWxBQ1VBSlFBbEFDVUFLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUpRQWxBQ1VBSlFBbEFDVUFKUUFsQUNVQUpRQWxBQ1VBSlFBbEFDVUFKUUFsQUNVQUpRQWxBQ1VBSlFBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBbEFDVUFKUUFsQUNVQUpRQWxBQ1VBSlFBbEFDVUFKUUFyQUNzQUt3QXJBQTBBRVFBUkFDVUFKUUJIQUZjQVZ3QVdBQkVBRmdBUkFCWUFFUUFXQUJFQUZnQVJBQ1VBSlFBV0FCRUFGZ0FSQUJZQUVRQVdBQkVBRlFBV0FCRUFFUUFsQUZjQVZ3QlhBRmNBVndCWEFGY0FWd0JYQUFRQUJBQUVBQVFBQkFBRUFDVUFWd0JYQUZjQVZ3QTJBQ1VBSlFCWEFGY0FWd0JIQUVjQUpRQWxBQ1VBS3dCUkFGY0FVUUJYQUZFQVZ3QlJBRmNBVVFCWEFGY0FWd0JYQUZjQVZ3QlhBRmNBVndCWEFGY0FWd0JYQUZjQVZ3QlhBRmNBVndCWEFGY0FWd0JYQUZjQVZ3QlhBRkVBVndCWEFGY0FWd0JYQUZjQVZ3QlhBRmNBVndCWEFGY0FWd0JYQUZjQVZ3QlhBRmNBVndCWEFGY0FWd0JYQUZjQVZ3QlhBRmNBVndCWEFGY0FWd0JSQUZjQVVRQlhBRkVBVndCWEFGY0FWd0JYQUZjQVVRQlhBRmNBVndCWEFGY0FWd0JSQUZFQUt3QXJBQVFBQkFBVkFCVUFSd0JIQUZjQUZRQlJBRmNBVVFCWEFGRUFWd0JSQUZjQVVRQlhBRmNBVndCWEFGY0FWd0JYQUZjQVZ3QlhBRmNBVndCWEFGY0FWd0JYQUZjQVZ3QlhBRmNBVndCWEFGY0FWd0JYQUZFQVZ3QlJBRmNBVVFCWEFGY0FWd0JYQUZjQVZ3QlJBRmNBVndCWEFGY0FWd0JYQUZFQVVRQlhBRmNBVndCWEFCVUFVUUJIQUVjQVZ3QXJBQ3NBS3dBckFDc0FWd0JYQUZjQVZ3QlhBRmNBVndCWEFGY0FWd0JYQUZjQVZ3QlhBRmNBVndCWEFGY0FWd0JYQUZjQVZ3QlhBRmNBVndCWEFGY0FLd0JYQUZjQVZ3QlhBRmNBVndCWEFGY0FWd0JYQUZjQVZ3QlhBRmNBVndCWEFGY0FWd0JYQUZjQVZ3QlhBRmNBVndCWEFGY0FWd0JYQUZjQVZ3QlhBRmNBVndCWEFGY0FWd0JYQUZjQUt3QWxBQ1VBVndCWEFGY0FWd0FsQUNVQUpRQWxBQ1VBSlFBbEFDVUFKUUFsQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBRkVBVVFCUkFGRUFVUUJSQUZFQVVRQlJBRkVBVVFCUkFGRUFVUUJSQUZFQUpRQWxBQ1VBSlFBbEFDVUFKUUFsQUNVQUpRQWxBQ1VBSlFBbEFDVUFKUUFsQUNVQUpRQWxBQ1VBSlFBbEFDVUFKUUFsQUNVQUpRQWxBQ1VBSlFBckFGY0FWd0JYQUZjQVZ3QlhBRmNBVndCWEFGY0FKUUFsQUNVQUpRQWxBQ1VBSlFBbEFDVUFKUUFsQUNVQUpRQWxBQ1VBSlFBbEFDVUFKUUFsQUNVQUpRQlBBRThBVHdCUEFFOEFUd0JQQUU4QUpRQlhBRmNBVndCWEFGY0FWd0JYQUZjQVZ3QlhBRmNBVndCWEFGY0FWd0FsQUNVQUpRQWxBQ1VBSlFBbEFDVUFKUUFsQUNVQUpRQWxBQ1VBSlFBbEFDVUFWd0JYQUZjQVZ3QlhBRmNBVndCWEFGY0FWd0JYQUZjQVZ3QlhBRmNBVndCWEFGY0FWd0JYQUZjQVZ3QlhBRmNBVndCWEFGY0FWd0JYQUZjQVZ3QlhBQ1VBSlFBbEFGY0FWd0JYQUZjQVZ3QlhBRmNBVndCWEFGY0FWd0JYQUZjQVZ3QlhBRmNBVndCWEFGY0FWd0JYQUVjQVZ3QlhBRmNBVndCWEFGY0FWd0JYQUZjQVZ3QlhBRmNBVndCWEFGY0FLd0FyQUNzQUpRQWxBQ1VBSlFBbEFDVUFKUUFsQUNVQUpRQWxBQ1VBSlFBbEFDVUFKUUFsQUNVQUpRQXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQURRQVRBQTBBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQkxBRXNBU3dCTEFFc0FTd0JMQUVzQVN3QkxBRkFBVUFBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBRkFBQkFBRUFBUUFCQUFlQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUFRQUhnQlFBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBVUFCUUFBUUFCQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFBUUFCQUFlQUEwQURRQU5BQTBBRFFBckFDc0FLd0FyQUNzQUt3QXJBQ3NBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFVQUFlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdCUUFCNEFIZ0FlQUI0QUhnQWVBRkFBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQXJBQ3NBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FlQUI0QVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBQVFBVUFCUUFGQUFCQUJRQUZBQVVBQlFBQVFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUFRQUJBQUVBQVFBQkFBZUFCNEFIZ0FlQUFRQUt3QXJBQ3NBVUFCUUFGQUFVQUJRQUZBQUhnQWVBQm9BSGdBckFDc0FLd0FyQUNzQUt3QlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBRGdBT0FCTUFFd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FCQUFFQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBQVFBQkFBRUFBUUFCQUFFQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FOQUEwQVN3QkxBRXNBU3dCTEFFc0FTd0JMQUVzQVN3QXJBQ3NBS3dBckFDc0FLd0FFQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUJRQUZBQVVBQlFBRkFBVUFBZUFCNEFIZ0JRQUE0QVVBQlFBQVFBVUFCUUFGQUFVQUJRQUZBQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUEwQURRQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQUVBQVFBQkFBRUFBUUFLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUI0QVdBQllBRmdBV0FCWUFGZ0FXQUJZQUZnQVdBQllBRmdBV0FCWUFGZ0FXQUJZQUZnQVdBQllBRmdBV0FCWUFGZ0FXQUJZQUZnQVdBQllBQ3NBS3dBckFBUUFIZ0FlQUI0QUhnQWVBQjRBRFFBTkFBMEFIZ0FlQUI0QUhnQXJBRkFBU3dCTEFFc0FTd0JMQUVzQVN3QkxBRXNBU3dBckFDc0FLd0FyQUI0QUhnQmNBRndBWEFCY0FGd0FLZ0JjQUZ3QVhBQmNBRndBWEFCY0FGd0FYQUJjQUVzQVN3QkxBRXNBU3dCTEFFc0FTd0JMQUVzQVhBQmNBRndBWEFCY0FDc0FVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFCQUFFQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQUVBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBRkFBVUFCUUFBUUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFBUUFCQUFyQUNzQVN3QkxBRXNBU3dCTEFFc0FTd0JMQUVzQVN3QXJBQ3NBSGdBTkFBMEFEUUJjQUZ3QVhBQmNBRndBWEFCY0FGd0FYQUJjQUZ3QVhBQmNBRndBWEFCY0FGd0FYQUJjQUZ3QVhBQmNBRndBS2dBcUFDb0FYQUFxQUNvQUtnQmNBRndBWEFCY0FGd0FYQUJjQUZ3QVhBQmNBRndBWEFCY0FGd0FYQUJjQUZ3QVhBQXFBRndBS2dBcUFDb0FYQUJjQUNvQUtnQmNBRndBWEFCY0FGd0FLZ0FxQUZ3QUtnQmNBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUZ3QVhBQmNBQ29BS2dCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFCQUFFQUFRQUJBQUVBQTBBRFFCUUFGQUFVQUFFQUFRQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QlFBRkFBVUFCUUFGQUFVQUFyQUNzQVVBQlFBRkFBVUFCUUFGQUFLd0FyQUZBQVVBQlFBRkFBVUFCUUFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFGQUFVQUJRQUZBQVVBQlFBRkFBS3dCUUFGQUFVQUJRQUZBQVVBQlFBQ3NBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBSGdBZUFDc0FLd0FyQUNzQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQUVBQVFBQkFBRUFBUUFCQUFFQUFRQURRQUVBQVFBS3dBckFFc0FTd0JMQUVzQVN3QkxBRXNBU3dCTEFFc0FLd0FyQUNzQUt3QXJBQ3NBVkFCVkFGVUFWUUJWQUZVQVZRQlZBRlVBVlFCVkFGVUFWUUJWQUZVQVZRQlZBRlVBVlFCVkFGVUFWUUJWQUZVQVZRQlZBRlVBVlFCVUFGVUFWUUJWQUZVQVZRQlZBRlVBVlFCVkFGVUFWUUJWQUZVQVZRQlZBRlVBVlFCVkFGVUFWUUJWQUZVQVZRQlZBRlVBVlFCVkFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUZrQVdRQlpBRmtBV1FCWkFGa0FXUUJaQUZrQVdRQlpBRmtBV1FCWkFGa0FXUUJaQUZrQUt3QXJBQ3NBS3dCYUFGb0FXZ0JhQUZvQVdnQmFBRm9BV2dCYUFGb0FXZ0JhQUZvQVdnQmFBRm9BV2dCYUFGb0FXZ0JhQUZvQVdnQmFBRm9BV2dCYUFGb0FLd0FyQUNzQUt3QUdBQVlBQmdBR0FBWUFCZ0FHQUFZQUJnQUdBQVlBQmdBR0FBWUFCZ0FHQUFZQUJnQUdBQVlBQmdBR0FBWUFCZ0FHQUFZQUJnQUdBQVlBQmdBR0FBWUFWd0JYQUZjQVZ3QlhBRmNBVndCWEFGY0FWd0JYQUZjQVZ3QlhBQ1VBSlFCWEFGY0FWd0JYQUZjQVZ3QlhBRmNBVndCWEFGY0FWd0JYQUZjQVZ3QlhBRmNBVndCWEFGY0FWd0JYQUZjQVZ3QlhBRmNBSlFBbEFDVUFKUUFsQUNVQVVBQlFBRkFBVUFCUUFGQUFVQUFyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QlFBRkFBVUFCUUFGQUFLd0FyQUNzQUt3QXJBRllBQkFCV0FGWUFWZ0JXQUZZQVZnQldBRllBVmdCV0FCNEFWZ0JXQUZZQVZnQldBRllBVmdCV0FGWUFWZ0JXQUZZQVZnQXJBRllBVmdCV0FGWUFWZ0FyQUZZQUt3QldBRllBS3dCV0FGWUFLd0JXQUZZQVZnQldBRllBVmdCV0FGWUFWZ0JXQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQUVRQVdBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQUt3QXJBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUFyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUFhQUI0QUt3QXJBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUFRQUdBQVJBQkVBR0FBWUFCTUFFd0FXQUJFQUZBQXJBQ3NBS3dBckFDc0FLd0FFQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQUVBQVFBQkFBRUFDVUFKUUFsQUNVQUpRQVdBQkVBRmdBUkFCWUFFUUFXQUJFQUZnQVJBQllBRVFBbEFDVUFGZ0FSQUNVQUpRQWxBQ1VBSlFBbEFDVUFFUUFsQUJFQUt3QVZBQlVBRXdBVEFDVUFGZ0FSQUJZQUVRQVdBQkVBSlFBbEFDVUFKUUFsQUNVQUpRQWxBQ3NBSlFBYkFCb0FKUUFyQUNzQUt3QXJBRkFBVUFCUUFGQUFVQUFyQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBS3dBckFBY0FLd0FUQUNVQUpRQWJBQm9BSlFBbEFCWUFFUUFsQUNVQUVRQWxBQkVBSlFCWEFGY0FWd0JYQUZjQVZ3QlhBRmNBVndCWEFCVUFGUUFsQUNVQUpRQVRBQ1VBVndCWEFGY0FWd0JYQUZjQVZ3QlhBRmNBVndCWEFGY0FWd0JYQUZjQVZ3QlhBRmNBVndCWEFGY0FWd0JYQUZjQVZ3QlhBQllBSlFBUkFDVUFKUUFsQUZjQVZ3QlhBRmNBVndCWEFGY0FWd0JYQUZjQVZ3QlhBRmNBVndCWEFGY0FWd0JYQUZjQVZ3QlhBRmNBVndCWEFGY0FWd0FXQUNVQUVRQWxBQllBRVFBUkFCWUFFUUFSQUJVQVZ3QlJBRkVBVVFCUkFGRUFVUUJSQUZFQVVRQlJBRmNBVndCWEFGY0FWd0JYQUZjQVZ3QlhBRmNBVndCWEFGY0FWd0JYQUZjQVZ3QlhBRmNBVndCWEFGY0FWd0JYQUZjQVZ3QlhBRmNBVndCWEFGY0FWd0JYQUVjQVJ3QXJBQ3NBVndCWEFGY0FWd0JYQUZjQUt3QXJBRmNBVndCWEFGY0FWd0JYQUNzQUt3QlhBRmNBVndCWEFGY0FWd0FyQUNzQVZ3QlhBRmNBS3dBckFDc0FHZ0FiQUNVQUpRQWxBQnNBR3dBckFCNEFIZ0FlQUI0QUhnQWVBQjRBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBRUFBUUFCQUFRQUIwQUt3QXJBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFDc0FVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQXJBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBS3dCUUFGQUFLd0JRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFBckFDc0FVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBQ3NBS3dCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFBckFDc0FLd0FyQUNzQURRQU5BQTBBS3dBckFDc0FLd0JRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFDc0FLd0FyQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQlFBRkFBSGdBZUFCNEFLd0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUFRQUt3QXJBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QUVBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFLd0FyQUNzQUt3QXJBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFCQUFFQUFRQUJBQUVBQ3NBS3dBckFDc0FLd0JRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQXJBQTBBVUFCUUFGQUFVQUFyQUNzQUt3QXJBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQU5BRkFBVUFCUUFGQUFVQUFyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBQ3NBS3dCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFLd0FyQUNzQUt3QlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QWVBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQVVBQlFBRkFBVUFCUUFGQUFLd0FyQUZBQUt3QlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUFyQUZBQVVBQXJBQ3NBS3dCUUFDc0FLd0JRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBS3dBTkFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQWVBQjRBVUFCUUFGQUFVQUJRQUZBQVVBQXJBQ3NBS3dBckFDc0FLd0FyQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUFyQUZBQVVBQXJBQ3NBS3dBckFDc0FVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUNzQUt3QXJBQTBBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBQ3NBS3dBckFDc0FLd0FlQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFDc0FLd0FyQUNzQVVBQlFBRkFBVUFCUUFBUUFCQUFFQUNzQUJBQUVBQ3NBS3dBckFDc0FLd0FFQUFRQUJBQUVBRkFBVUFCUUFGQUFLd0JRQUZBQVVBQXJBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQUt3QXJBQVFBQkFBRUFDc0FLd0FyQUNzQUJBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQXJBQ3NBS3dBckFDc0FLd0FyQUEwQURRQU5BQTBBRFFBTkFBMEFEUUFlQUNzQUt3QXJBQ3NBS3dBckFDc0FVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQWVBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQWVBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUFRQUJBQXJBQ3NBS3dBckFGQUFVQUJRQUZBQVVBQU5BQTBBRFFBTkFBMEFEUUFVQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBS3dBckFDc0FEUUFOQUEwQURRQU5BQTBBRFFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFBckFDc0FLd0FyQUNzQUt3QXJBQjRBSGdBZUFCNEFLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQVVBQlFBRkFBVUFCUUFGQUFVQUFyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUFyQUNzQUt3QXJBQ3NBS3dBckFGQUFVQUJRQUZBQVVBQlFBQVFBQkFBRUFBUUFLd0FyQUNzQUt3QXJBQ3NBS3dBckFFc0FTd0JMQUVzQVN3QkxBRXNBU3dCTEFFc0FLd0FyQUNzQUt3QXJBQ3NBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFBckFBUUFCQUFOQUNzQUt3QlFBRkFBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUZBQVVBQlFBRkFBVUFCUUFBUUFCQUFFQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUJRQUZBQVVBQlFBQjRBSGdBZUFCNEFIZ0FyQUNzQUt3QXJBQ3NBS3dBRUFBUUFCQUFFQUFRQUJBQUVBQTBBRFFBZUFCNEFIZ0FlQUI0QUt3QXJBQ3NBS3dCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRXNBU3dCTEFFc0FTd0JMQUVzQVN3QkxBRXNBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUJBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQWVBQjRBSGdBTkFBMEFEUUFOQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QWVBQ3NBS3dCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBS3dBckFDc0FLd0FyQUNzQUt3QkxBRXNBU3dCTEFFc0FTd0JMQUVzQVN3QkxBQ3NBS3dBckFDc0FLd0FyQUZBQVVBQlFBRkFBVUFCUUFGQUFCQUFFQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQUVBQ3NBU3dCTEFFc0FTd0JMQUVzQVN3QkxBRXNBU3dBTkFBMEFEUUFOQUZBQUJBQUVBRkFBS3dBckFDc0FLd0FyQUNzQUt3QXJBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBQkFBZUFBNEFVQUFyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FFQUZBQVVBQlFBRkFBRFFBTkFCNEFEUUFFQUFRQUJBQUVBQjRBQkFBRUFFc0FTd0JMQUVzQVN3QkxBRXNBU3dCTEFFc0FVQUFPQUZBQURRQU5BQTBBS3dCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUNzQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFBRUFBUUFCQUFFQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUFOQUEwQUhnQU5BQTBBSGdBRUFDc0FVQUJRQUZBQVVBQlFBRkFBVUFBckFGQUFLd0JRQUZBQVVBQlFBQ3NBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQUt3QlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBQTBBS3dBckFDc0FLd0FyQUNzQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUFFQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUFRQUt3QXJBQ3NBS3dBckFFc0FTd0JMQUVzQVN3QkxBRXNBU3dCTEFFc0FLd0FyQUNzQUt3QXJBQ3NBQkFBRUFBUUFCQUFyQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUFyQUNzQVVBQlFBQ3NBS3dCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQUt3QlFBRkFBVUFCUUFGQUFVQUJRQUNzQVVBQlFBQ3NBVUFCUUFGQUFVQUJRQUNzQUJBQUVBRkFBQkFBRUFBUUFCQUFFQUFRQUJBQXJBQ3NBQkFBRUFDc0FLd0FFQUFRQUJBQXJBQ3NBVUFBckFDc0FLd0FyQUNzQUt3QUVBQ3NBS3dBckFDc0FLd0JRQUZBQVVBQlFBRkFBQkFBRUFDc0FLd0FFQUFRQUJBQUVBQVFBQkFBRUFDc0FLd0FyQUFRQUJBQUVBQVFBQkFBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FCQUFFQUFRQUJBQUVBQVFBQkFCUUFGQUFVQUJRQUEwQURRQU5BQTBBSGdCTEFFc0FTd0JMQUVzQVN3QkxBRXNBU3dCTEFBMEFEUUFyQUI0QUJBQlFBRkFBVUFBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FFQUFRQUJBQUVBRkFBVUFBZUFGQUFLd0FyQUNzQUt3QXJBQ3NBS3dBckFFc0FTd0JMQUVzQVN3QkxBRXNBU3dCTEFFc0FLd0FyQUNzQUt3QXJBQ3NBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQUJBQUVBQVFBQkFBRUFBUUFCQUFyQUNzQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUFRQURnQU5BQTBBRXdBVEFCNEFIZ0FlQUEwQURRQU5BQTBBRFFBTkFBMEFEUUFOQUEwQURRQU5BQTBBRFFBTkFGQUFVQUJRQUZBQUJBQUVBQ3NBS3dBRUFBMEFEUUFlQUZBQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBRXNBU3dCTEFFc0FTd0JMQUVzQVN3QkxBRXNBS3dBckFDc0FLd0FyQUNzQURnQU9BQTRBRGdBT0FBNEFEZ0FPQUE0QURnQU9BQTRBRGdBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUFFQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQUVBRkFBS3dBckFDc0FLd0FyQUNzQUt3QkxBRXNBU3dCTEFFc0FTd0JMQUVzQVN3QkxBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FYQUJjQUZ3QVhBQmNBRndBWEFCY0FGd0FYQUJjQUZ3QVhBQmNBRndBWEFCY0FGd0FYQUJjQUZ3QVhBQmNBRndBWEFCY0FGd0FLd0FyQUNvQUtnQXFBQ29BS2dBcUFDb0FLZ0FxQUNvQUtnQXFBQ29BS2dBcUFDc0FLd0FyQUNzQVN3QkxBRXNBU3dCTEFFc0FTd0JMQUVzQVN3QmNBRndBRFFBTkFBMEFLZ0JRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQUVBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUFlQUNzQUt3QXJBQ3NBU3dCTEFFc0FTd0JMQUVzQVN3QkxBRXNBU3dCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0JRQUZBQVVBQlFBRkFBVUFCUUFGQUFLd0FyQUZBQUt3QXJBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQXJBRkFBVUFBckFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBQkFBRUFBUUFCQUFFQUFRQUt3QUVBQVFBS3dBckFBUUFCQUFFQUFRQVVBQUVBRkFBQkFBRUFBMEFEUUFOQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUVzQVN3QkxBRXNBU3dCTEFFc0FTd0JMQUVzQUt3QXJBQ3NBS3dBckFDc0FVQUJRQUZBQVVBQlFBRkFBVUFCUUFDc0FLd0JRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBQkFBRUFBUUFCQUFFQUFRQUJBQXJBQ3NBQkFBRUFBUUFCQUFFQUFRQUJBQlFBQTRBVUFBRUFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFGQUFCQUFFQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFBRUFBUUFCQUFFQUFRQUJBQUVBRkFBQkFBRUFBUUFCQUFPQUI0QURRQU5BQTBBRFFBT0FCNEFCQUFyQUNzQUt3QXJBQ3NBS3dBckFDc0FVQUFFQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUFRQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQUVBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUEwQURRQU5BRkFBRGdBT0FBNEFEUUFOQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQXJBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUNzQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUZBQURRQU5BQTBBRFFBTkFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FTd0JMQUVzQVN3QkxBRXNBU3dCTEFFc0FTd0JRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFBckFDc0FLd0FPQUJNQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQUt3QXJBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUFyQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQUVBQVFBQkFBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dCUUFGQUFVQUJRQUZBQVVBQlFBQ3NBVUFCUUFDc0FVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQUVBQVFBQkFBRUFBUUFCQUFyQUNzQUt3QUVBQ3NBQkFBRUFDc0FCQUFFQUFRQUJBQUVBQVFBQkFCUUFBUUFLd0FyQUNzQUt3QXJBQ3NBS3dBckFFc0FTd0JMQUVzQVN3QkxBRXNBU3dCTEFFc0FLd0FyQUNzQUt3QXJBQ3NBVUFCUUFGQUFVQUJRQUZBQUt3QlFBRkFBS3dCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQUVBQVFBQkFBRUFBUUFLd0FFQUFRQUt3QUVBQVFBQkFBRUFBUUFVQUFyQUNzQUt3QXJBQ3NBS3dBckFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFCQUFFQUFRQUJBQWVBQjRBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dCUUFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBYUFCb0FHZ0FhQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQTBBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBQ3NBS3dBckFDc0FLd0FyQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFDc0FEUUFOQUEwQURRQU5BQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dCUUFGQUFVQUJRQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFTQUJJQUVnQVF3QkRBRU1BVUFCUUFGQUFVQUJEQUZBQVVBQlFBRWdBUXdCSUFFTUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFTQUJEQUVNQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFLd0FKQUFrQUNRQUpBQWtBQ1FBSkFCWUFFUUFyQUNzQUt3QXJBQ3NBS3dBckFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQklBRU1BVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBRXNBU3dCTEFFc0FTd0JMQUVzQVN3QkxBRXNBS3dBckFDc0FLd0FOQUEwQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0JRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBS3dBckFBUUFCQUFFQUFRQUJBQU5BQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQUVBQVFBQkFBRUFBUUFCQUFFQUEwQURRQU5BQjRBSGdBZUFCNEFIZ0FlQUZBQVVBQlFBRkFBRFFBZUFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FTd0JMQUVzQVN3QkxBRXNBU3dCTEFFc0FTd0FyQUZBQVVBQlFBRkFBVUFCUUFGQUFLd0JRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQXJBQ3NBS3dBckFDc0FVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUFyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQU5BQTBBSGdBZUFDc0FLd0FyQUNzQUt3QlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBS3dBckFDc0FLd0FFQUZBQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQUVBQVFBQkFBRUFBUUFLd0FyQUNzQUt3QXJBQ3NBS3dBRUFBUUFCQUFFQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBUndCSEFCVUFSd0FKQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QUVBQVFBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUZjQVZ3QlhBRmNBVndCWEFGY0FWd0JYQUZjQVZ3QlhBRmNBVndCWEFGY0FWd0JYQUZjQVZ3QlhBRmNBVndCWEFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dCWEFGY0FWd0JYQUZjQVZ3QlhBRmNBVndBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQVVRQlJBRkVBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0JSQUZFQVVRQlJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QlhBRmNBVndCWEFGY0FWd0JYQUZjQVZ3QlhBRmNBVndCWEFGY0FWd0JYQUZjQVZ3QlhBRmNBVndCWEFGY0FWd0JYQUZjQVZ3QlhBQ3NBS3dBckFDc0FVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUNzQUt3QXJBQ3NBS3dCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUNzQUt3QXJBQ3NBS3dBckFDc0FVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUFyQUNzQUhnQUVBQVFBRFFBRUFBUUFCQUFFQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFCNEFIZ0FlQUI0QUhnQWVBQjRBS3dBckFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQVFBQkFBRUFBUUFCQUFlQUI0QUhnQUVBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQUVBQVFBQkFBRUFCNEFIZ0FFQUFRQUJBQUVBQVFBQkFBRUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUJBQUVBQVFBQkFBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFCQUFFQUFRQUhnQXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBckFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUt3QlFBRkFBS3dBckFGQUFLd0FyQUZBQVVBQXJBQ3NBVUFCUUFGQUFVQUFyQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQ3NBVUFBckFGQUFVQUJRQUZBQVVBQlFBRkFBS3dBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFLd0JRQUZBQVVBQlFBQ3NBS3dCUUFGQUFVQUJRQUZBQVVBQlFBRkFBS3dCUUFGQUFVQUJRQUZBQVVBQlFBQ3NBSGdBZUFGQUFVQUJRQUZBQVVBQXJBRkFBS3dBckFDc0FVQUJRQUZBQVVBQlFBRkFBVUFBckFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBS3dBckFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBSGdCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0JRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0JRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFDc0FLd0JMQUVzQVN3QkxBRXNBU3dCTEFFc0FTd0JMQUVzQVN3QkxBRXNBU3dCTEFFc0FTd0JMQUVzQVN3QkxBRXNBU3dCTEFFc0FTd0JMQUVzQVN3QkxBRXNBU3dCTEFBUUFCQUFFQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQWVBQjRBSGdBZUFBUUFCQUFFQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUJBQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQVFBSGdBZUFBMEFEUUFOQUEwQUhnQXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FFQUFRQUJBQUVBQVFBS3dBRUFBUUFCQUFFQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUFRQUJBQUVBQVFBQkFBRUFBUUFLd0FFQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQUVBQVFBQkFBRUFBUUFLd0FyQUFRQUJBQUVBQVFBQkFBRUFBUUFLd0FFQUFRQUt3QUVBQVFBQkFBRUFBUUFLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFBckFDc0FLd0FFQUFRQUJBQUVBQVFBQkFBRUFGQUFVQUJRQUZBQVVBQlFBRkFBS3dBckFFc0FTd0JMQUVzQVN3QkxBRXNBU3dCTEFFc0FLd0FyQUNzQUt3QlFBQjRBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFBRUFBUUFCQUFFQUVzQVN3QkxBRXNBU3dCTEFFc0FTd0JMQUVzQUt3QXJBQ3NBS3dBckFCc0FVQUJRQUZBQVVBQlFBQ3NBS3dCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFBRUFBUUFCQUFFQUFRQUJBQUVBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQjRBSGdBZUFCNEFCQUFFQUFRQUJBQUVBQVFBQkFCUUFDc0FLd0FyQUNzQVN3QkxBRXNBU3dCTEFFc0FTd0JMQUVzQVN3QXJBQ3NBS3dBckFCWUFGZ0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBR2dCUUFGQUFVQUFhQUZBQVVBQlFBRkFBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQWVBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUNzQUt3QlFBRkFBVUFCUUFDc0FVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFLd0JRQUZBQUt3QlFBQ3NBS3dCUUFDc0FVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUFyQUZBQVVBQlFBRkFBS3dCUUFDc0FVQUFyQUNzQUt3QXJBQ3NBS3dCUUFDc0FLd0FyQUNzQVVBQXJBRkFBS3dCUUFDc0FVQUJRQUZBQUt3QlFBRkFBS3dCUUFDc0FLd0JRQUNzQVVBQXJBRkFBS3dCUUFDc0FVQUFyQUZBQVVBQXJBRkFBS3dBckFGQUFVQUJRQUZBQUt3QlFBRkFBVUFCUUFGQUFVQUJRQUNzQVVBQlFBRkFBVUFBckFGQUFVQUJRQUZBQUt3QlFBQ3NBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFBckFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFBckFDc0FLd0FyQUNzQVVBQlFBRkFBS3dCUUFGQUFVQUJRQUZBQUt3QlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FlQUI0QUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFFOEFUd0JQQUU4QVR3QlBBRThBVHdCUEFFOEFUd0JQQUU4QUpRQWxBQ1VBSFFBZEFCMEFIUUFkQUIwQUhRQWRBQjBBSFFBZEFCMEFIUUFkQUIwQUhRQWRBQjBBSGdBZUFCMEFIUUFkQUIwQUhRQWRBQjBBSFFBZEFCMEFIUUFkQUIwQUhRQWRBQjBBSFFBZEFCNEFIZ0FlQUNVQUpRQWxBQjBBSFFBZEFCMEFIUUFkQUIwQUhRQWRBQjBBSFFBZEFCMEFIUUFkQUIwQUhRQWxBQ1VBSlFBbEFDVUFKUUFsQUNVQUpRQWxBQ1VBSlFBbEFDVUFKUUFsQUNVQUpRQWxBQ1VBSlFBcEFDa0FLUUFwQUNrQUtRQXBBQ2tBS1FBcEFDa0FLUUFwQUNrQUtRQXBBQ2tBS1FBcEFDa0FLUUFwQUNrQUtRQXBBQ2tBSlFBbEFDVUFKUUFsQUNBQUpRQWxBQ1VBSlFBbEFDVUFKUUFsQUNVQUpRQWxBQ1VBSlFBbEFDVUFKUUFsQUNVQUpRQWxBQ1VBSlFBZUFCNEFKUUFsQUNVQUpRQWxBQ1VBSlFBbEFDVUFKUUFsQUNVQUpRQWxBQ1VBSlFBbEFDVUFKUUFsQUNVQUpRQWxBQjRBSGdBbEFDVUFKUUFsQUNVQUhnQWxBQ1VBSlFBbEFDVUFJQUFnQUNBQUpRQWxBQ0FBSlFBbEFDQUFJQUFnQUNVQUpRQWxBQ1VBSlFBbEFDVUFKUUFsQUNVQUpRQWxBQ1VBSlFBbEFDVUFKUUFsQUNVQUpRQWxBQ1VBSlFBbEFDVUFKUUFsQUNVQUpRQWxBQ0VBSVFBaEFDRUFJUUFsQUNVQUlBQWdBQ1VBSlFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFKUUFsQUNVQUpRQWxBQ1VBSlFBbEFDVUFKUUFsQUNVQUpRQWxBQ1VBSlFBbEFDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFKUUFsQUNVQUlBQWxBQ1VBSlFBbEFDQUFJQUFnQUNVQUlBQWdBQ0FBSlFBbEFDVUFKUUFsQUNVQUpRQWdBQ1VBSUFBbEFDVUFKUUFsQUNVQUpRQWxBQ1VBSlFBbEFDVUFKUUFsQUNVQUhnQWxBQjRBSlFBZUFDVUFKUUFsQUNVQUpRQWdBQ1VBSlFBbEFDVUFIZ0FsQUI0QUhnQWxBQ1VBSlFBbEFDVUFKUUFsQUNVQUpRQWxBQ1VBSlFBbEFCNEFIZ0FlQUI0QUhnQWVBQjRBSlFBbEFDVUFKUUFsQUNVQUpRQWxBQ1VBSlFBbEFDVUFKUUFsQUNVQUpRQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQ1VBSlFBbEFDVUFKUUFsQUNVQUpRQWxBQ1VBSlFBbEFDVUFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBbEFDVUFKUUFsQUNVQUpRQWxBQ1VBSlFBbEFDVUFKUUFsQUNVQUpRQWxBQ1VBSlFBbEFDVUFKUUFsQUNBQUlBQWxBQ1VBSlFBbEFDQUFKUUFsQUNVQUpRQWxBQ1VBSlFBbEFDVUFKUUFsQUNVQUpRQWxBQ1VBSlFBbEFDQUFKUUFsQUNVQUpRQWdBQ0FBSlFBbEFDVUFKUUFsQUNVQUpRQWxBQ1VBSlFBbEFDVUFKUUFsQUNVQUpRQWxBQ1VBSlFBbEFDVUFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFDVUFKUUFsQUNVQUpRQWxBQ1VBSlFBbEFDVUFKUUFsQUNVQUpRQWxBQ1VBSlFBbEFDVUFKUUFlQUI0QUhnQWVBQjRBSGdBbEFDVUFKUUFsQUNVQUpRQWxBQ0FBSUFBZ0FDVUFKUUFsQUNBQUlBQWdBQ0FBSUFBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUJjQUZ3QVhBQlVBRlFBVkFCNEFIZ0FlQUI0QUpRQWxBQ1VBSUFBbEFDVUFKUUFsQUNVQUpRQWxBQ1VBSlFBbEFDVUFKUUFsQUNVQUpRQWxBQ0FBSUFBZ0FDVUFKUUFsQUNVQUpRQWxBQ1VBSlFBbEFDQUFKUUFsQUNVQUpRQWxBQ1VBSlFBbEFDVUFKUUFsQUNBQUpRQWxBQ1VBSlFBbEFDVUFKUUFsQUNVQUpRQWxBQ1VBSlFBbEFDVUFKUUFsQUNVQUpRQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSlFBbEFDVUFKUUFsQUNVQUpRQWxBQ1VBSlFBbEFDVUFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUpRQWxBQ1VBSlFBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQ1VBSlFBbEFDVUFKUUFsQUNVQUpRQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQ1VBSlFBbEFDVUFKUUFsQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FsQUNVQUpRQWxBQ1VBSlFBbEFDVUFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZ0FDVUFKUUFnQUNVQUpRQWxBQ1VBSlFBbEFDVUFKUUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFKUUFsQUNVQUpRQWxBQ1VBSUFBbEFDVUFKUUFsQUNVQUpRQWxBQ1VBSlFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDVUFKUUFnQUNBQUlBQWxBQ1VBSlFBbEFDVUFKUUFsQUNVQUpRQWxBQ1VBSlFBbEFDVUFKUUFsQUNVQUpRQWxBQ1VBSlFBbEFDVUFKUUFnQUNVQUpRQWxBQ1VBSlFBbEFDVUFKUUFsQUNVQUpRQWxBQ1VBSlFBbEFDVUFKUUFsQUNVQUpRQWxBQ0FBSUFBbEFDQUFJQUFsQUNBQUpRQWxBQ1VBSlFBbEFDVUFKUUFsQUNVQUpRQWxBQ1VBSlFBZ0FDQUFJQUFsQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSlFBbEFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFLd0FlQUI0QUhnQWVBQjRBSGdBZUFCNEFIZ0FlQUI0QUhnQXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUVzQVN3QkxBRXNBU3dCTEFFc0FTd0JMQUVzQUt3QXJBQ3NBS3dBckFDc0FKUUFsQUNVQUpRQWxBQ1VBSlFBbEFDVUFKUUFsQUNVQUpRQWxBQ1VBSlFBbEFDVUFKUUFsQUNVQUpRQWxBQ1VBSlFBbEFDVUFKUUFsQUNVQUt3QXJBRmNBVndCWEFGY0FWd0JYQUZjQVZ3QlhBRmNBVndCWEFGY0FWd0JYQUZjQVZ3QlhBRmNBVndCWEFGY0FWd0JYQUZjQVZ3QlhBRmNBVndCWEFDVUFKUUJYQUZjQVZ3QlhBRmNBVndCWEFGY0FWd0JYQUZjQVZ3QlhBRmNBVndCWEFGY0FWd0JYQUZjQVZ3QWxBQ1VBSlFBbEFDVUFKUUFsQUNVQUpRQWxBQ1VBVndCWEFDVUFKUUFsQUNVQUpRQWxBQ1VBSlFBbEFDVUFKUUFsQUNVQUpRQlhBRmNBVndCWEFGY0FWd0JYQUZjQVZ3QlhBRmNBVndCWEFGY0FWd0JYQUZjQUpRQWxBQ1VBSlFBbEFDVUFKUUFsQUNVQUpRQWxBQ1VBSlFBbEFDVUFKUUFsQUNVQUpRQWxBQ1VBSlFBbEFDVUFKUUFsQUNVQUpRQWxBQ1VBSlFCWEFGY0FWd0JYQUZjQVZ3QlhBRmNBVndCWEFGY0FKUUFsQUNVQUpRQWxBQ1VBSlFBbEFDVUFKUUFsQUNVQUpRQWxBQ1VBSlFBbEFDVUFKUUFsQUNVQUt3QUVBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFBUUFCQUFFQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQUVBQVFBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFDc0FLd0FyQUNzQUt3QXJBQ3NBS3dBckFBPT0nOwoKICAgIHZhciBMRVRURVJfTlVNQkVSX01PRElGSUVSID0gNTA7CiAgICAvLyBOb24tdGFpbG9yYWJsZSBMaW5lIEJyZWFraW5nIENsYXNzZXMKICAgIHZhciBCSyA9IDE7IC8vICBDYXVzZSBhIGxpbmUgYnJlYWsgKGFmdGVyKQogICAgdmFyIENSJDEgPSAyOyAvLyAgQ2F1c2UgYSBsaW5lIGJyZWFrIChhZnRlciksIGV4Y2VwdCBiZXR3ZWVuIENSIGFuZCBMRgogICAgdmFyIExGJDEgPSAzOyAvLyAgQ2F1c2UgYSBsaW5lIGJyZWFrIChhZnRlcikKICAgIHZhciBDTSA9IDQ7IC8vICBQcm9oaWJpdCBhIGxpbmUgYnJlYWsgYmV0d2VlbiB0aGUgY2hhcmFjdGVyIGFuZCB0aGUgcHJlY2VkaW5nIGNoYXJhY3RlcgogICAgdmFyIE5MID0gNTsgLy8gIENhdXNlIGEgbGluZSBicmVhayAoYWZ0ZXIpCiAgICB2YXIgV0ogPSA3OyAvLyAgUHJvaGliaXQgbGluZSBicmVha3MgYmVmb3JlIGFuZCBhZnRlcgogICAgdmFyIFpXID0gODsgLy8gIFByb3ZpZGUgYSBicmVhayBvcHBvcnR1bml0eQogICAgdmFyIEdMID0gOTsgLy8gIFByb2hpYml0IGxpbmUgYnJlYWtzIGJlZm9yZSBhbmQgYWZ0ZXIKICAgIHZhciBTUCA9IDEwOyAvLyBFbmFibGUgaW5kaXJlY3QgbGluZSBicmVha3MKICAgIHZhciBaV0okMSA9IDExOyAvLyBQcm9oaWJpdCBsaW5lIGJyZWFrcyB3aXRoaW4gam9pbmVyIHNlcXVlbmNlcwogICAgLy8gQnJlYWsgT3Bwb3J0dW5pdGllcwogICAgdmFyIEIyID0gMTI7IC8vICBQcm92aWRlIGEgbGluZSBicmVhayBvcHBvcnR1bml0eSBiZWZvcmUgYW5kIGFmdGVyIHRoZSBjaGFyYWN0ZXIKICAgIHZhciBCQSA9IDEzOyAvLyAgR2VuZXJhbGx5IHByb3ZpZGUgYSBsaW5lIGJyZWFrIG9wcG9ydHVuaXR5IGFmdGVyIHRoZSBjaGFyYWN0ZXIKICAgIHZhciBCQiA9IDE0OyAvLyAgR2VuZXJhbGx5IHByb3ZpZGUgYSBsaW5lIGJyZWFrIG9wcG9ydHVuaXR5IGJlZm9yZSB0aGUgY2hhcmFjdGVyCiAgICB2YXIgSFkgPSAxNTsgLy8gIFByb3ZpZGUgYSBsaW5lIGJyZWFrIG9wcG9ydHVuaXR5IGFmdGVyIHRoZSBjaGFyYWN0ZXIsIGV4Y2VwdCBpbiBudW1lcmljIGNvbnRleHQKICAgIHZhciBDQiA9IDE2OyAvLyAgIFByb3ZpZGUgYSBsaW5lIGJyZWFrIG9wcG9ydHVuaXR5IGNvbnRpbmdlbnQgb24gYWRkaXRpb25hbCBpbmZvcm1hdGlvbgogICAgLy8gQ2hhcmFjdGVycyBQcm9oaWJpdGluZyBDZXJ0YWluIEJyZWFrcwogICAgdmFyIENMID0gMTc7IC8vICBQcm9oaWJpdCBsaW5lIGJyZWFrcyBiZWZvcmUKICAgIHZhciBDUCA9IDE4OyAvLyAgUHJvaGliaXQgbGluZSBicmVha3MgYmVmb3JlCiAgICB2YXIgRVggPSAxOTsgLy8gIFByb2hpYml0IGxpbmUgYnJlYWtzIGJlZm9yZQogICAgdmFyIElOID0gMjA7IC8vICBBbGxvdyBvbmx5IGluZGlyZWN0IGxpbmUgYnJlYWtzIGJldHdlZW4gcGFpcnMKICAgIHZhciBOUyA9IDIxOyAvLyAgQWxsb3cgb25seSBpbmRpcmVjdCBsaW5lIGJyZWFrcyBiZWZvcmUKICAgIHZhciBPUCA9IDIyOyAvLyAgUHJvaGliaXQgbGluZSBicmVha3MgYWZ0ZXIKICAgIHZhciBRVSA9IDIzOyAvLyAgQWN0IGxpa2UgdGhleSBhcmUgYm90aCBvcGVuaW5nIGFuZCBjbG9zaW5nCiAgICAvLyBOdW1lcmljIENvbnRleHQKICAgIHZhciBJUyA9IDI0OyAvLyAgUHJldmVudCBicmVha3MgYWZ0ZXIgYW55IGFuZCBiZWZvcmUgbnVtZXJpYwogICAgdmFyIE5VID0gMjU7IC8vICBGb3JtIG51bWVyaWMgZXhwcmVzc2lvbnMgZm9yIGxpbmUgYnJlYWtpbmcgcHVycG9zZXMKICAgIHZhciBQTyA9IDI2OyAvLyAgRG8gbm90IGJyZWFrIGZvbGxvd2luZyBhIG51bWVyaWMgZXhwcmVzc2lvbgogICAgdmFyIFBSID0gMjc7IC8vICBEbyBub3QgYnJlYWsgaW4gZnJvbnQgb2YgYSBudW1lcmljIGV4cHJlc3Npb24KICAgIHZhciBTWSA9IDI4OyAvLyAgUHJldmVudCBhIGJyZWFrIGJlZm9yZTsgYW5kIGFsbG93IGEgYnJlYWsgYWZ0ZXIKICAgIC8vIE90aGVyIENoYXJhY3RlcnMKICAgIHZhciBBSSA9IDI5OyAvLyAgQWN0IGxpa2UgQUwgd2hlbiB0aGUgcmVzb2x2ZWRFQVcgaXMgTjsgb3RoZXJ3aXNlOyBhY3QgYXMgSUQKICAgIHZhciBBTCA9IDMwOyAvLyAgQXJlIGFscGhhYmV0aWMgY2hhcmFjdGVycyBvciBzeW1ib2xzIHRoYXQgYXJlIHVzZWQgd2l0aCBhbHBoYWJldGljIGNoYXJhY3RlcnMKICAgIHZhciBDSiA9IDMxOyAvLyAgVHJlYXQgYXMgTlMgb3IgSUQgZm9yIHN0cmljdCBvciBub3JtYWwgYnJlYWtpbmcuCiAgICB2YXIgRUIgPSAzMjsgLy8gIERvIG5vdCBicmVhayBmcm9tIGZvbGxvd2luZyBFbW9qaSBNb2RpZmllcgogICAgdmFyIEVNID0gMzM7IC8vICBEbyBub3QgYnJlYWsgZnJvbSBwcmVjZWRpbmcgRW1vamkgQmFzZQogICAgdmFyIEgyID0gMzQ7IC8vICBGb3JtIEtvcmVhbiBzeWxsYWJsZSBibG9ja3MKICAgIHZhciBIMyA9IDM1OyAvLyAgRm9ybSBLb3JlYW4gc3lsbGFibGUgYmxvY2tzCiAgICB2YXIgSEwgPSAzNjsgLy8gIERvIG5vdCBicmVhayBhcm91bmQgYSBmb2xsb3dpbmcgaHlwaGVuOyBvdGhlcndpc2UgYWN0IGFzIEFscGhhYmV0aWMKICAgIHZhciBJRCA9IDM3OyAvLyAgQnJlYWsgYmVmb3JlIG9yIGFmdGVyOyBleGNlcHQgaW4gc29tZSBudW1lcmljIGNvbnRleHQKICAgIHZhciBKTCA9IDM4OyAvLyAgRm9ybSBLb3JlYW4gc3lsbGFibGUgYmxvY2tzCiAgICB2YXIgSlYgPSAzOTsgLy8gIEZvcm0gS29yZWFuIHN5bGxhYmxlIGJsb2NrcwogICAgdmFyIEpUID0gNDA7IC8vICBGb3JtIEtvcmVhbiBzeWxsYWJsZSBibG9ja3MKICAgIHZhciBSSSQxID0gNDE7IC8vICBLZWVwIHBhaXJzIHRvZ2V0aGVyLiBGb3IgcGFpcnM7IGJyZWFrIGJlZm9yZSBhbmQgYWZ0ZXIgb3RoZXIgY2xhc3NlcwogICAgdmFyIFNBID0gNDI7IC8vICBQcm92aWRlIGEgbGluZSBicmVhayBvcHBvcnR1bml0eSBjb250aW5nZW50IG9uIGFkZGl0aW9uYWwsIGxhbmd1YWdlLXNwZWNpZmljIGNvbnRleHQgYW5hbHlzaXMKICAgIHZhciBYWCA9IDQzOyAvLyAgSGF2ZSBhcyB5ZXQgdW5rbm93biBsaW5lIGJyZWFraW5nIGJlaGF2aW9yIG9yIHVuYXNzaWduZWQgY29kZSBwb3NpdGlvbnMKICAgIHZhciBlYV9PUCA9IFsweDIzMjksIDB4ZmYwOF07CiAgICB2YXIgQlJFQUtfTUFOREFUT1JZID0gJyEnOwogICAgdmFyIEJSRUFLX05PVF9BTExPV0VEJDEgPSAnw5cnOwogICAgdmFyIEJSRUFLX0FMTE9XRUQkMSA9ICfDtyc7CiAgICB2YXIgVW5pY29kZVRyaWUkMSA9IGNyZWF0ZVRyaWVGcm9tQmFzZTY0JDEoYmFzZTY0JDEpOwogICAgdmFyIEFMUEhBQkVUSUNTID0gW0FMLCBITF07CiAgICB2YXIgSEFSRF9MSU5FX0JSRUFLUyA9IFtCSywgQ1IkMSwgTEYkMSwgTkxdOwogICAgdmFyIFNQQUNFJDEgPSBbU1AsIFpXXTsKICAgIHZhciBQUkVGSVhfUE9TVEZJWCA9IFtQUiwgUE9dOwogICAgdmFyIExJTkVfQlJFQUtTID0gSEFSRF9MSU5FX0JSRUFLUy5jb25jYXQoU1BBQ0UkMSk7CiAgICB2YXIgS09SRUFOX1NZTExBQkxFX0JMT0NLID0gW0pMLCBKViwgSlQsIEgyLCBIM107CiAgICB2YXIgSFlQSEVOID0gW0hZLCBCQV07CiAgICB2YXIgY29kZVBvaW50c1RvQ2hhcmFjdGVyQ2xhc3NlcyA9IGZ1bmN0aW9uIChjb2RlUG9pbnRzLCBsaW5lQnJlYWspIHsKICAgICAgICBpZiAobGluZUJyZWFrID09PSB2b2lkIDApIHsgbGluZUJyZWFrID0gJ3N0cmljdCc7IH0KICAgICAgICB2YXIgdHlwZXMgPSBbXTsKICAgICAgICB2YXIgaW5kaWNlcyA9IFtdOwogICAgICAgIHZhciBjYXRlZ29yaWVzID0gW107CiAgICAgICAgY29kZVBvaW50cy5mb3JFYWNoKGZ1bmN0aW9uIChjb2RlUG9pbnQsIGluZGV4KSB7CiAgICAgICAgICAgIHZhciBjbGFzc1R5cGUgPSBVbmljb2RlVHJpZSQxLmdldChjb2RlUG9pbnQpOwogICAgICAgICAgICBpZiAoY2xhc3NUeXBlID4gTEVUVEVSX05VTUJFUl9NT0RJRklFUikgewogICAgICAgICAgICAgICAgY2F0ZWdvcmllcy5wdXNoKHRydWUpOwogICAgICAgICAgICAgICAgY2xhc3NUeXBlIC09IExFVFRFUl9OVU1CRVJfTU9ESUZJRVI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBjYXRlZ29yaWVzLnB1c2goZmFsc2UpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChbJ25vcm1hbCcsICdhdXRvJywgJ2xvb3NlJ10uaW5kZXhPZihsaW5lQnJlYWspICE9PSAtMSkgewogICAgICAgICAgICAgICAgLy8gVSsyMDEwLCDigJMgVSsyMDEzLCDjgJwgVSszMDFDLCDjgqAgVSszMEEwCiAgICAgICAgICAgICAgICBpZiAoWzB4MjAxMCwgMHgyMDEzLCAweDMwMWMsIDB4MzBhMF0uaW5kZXhPZihjb2RlUG9pbnQpICE9PSAtMSkgewogICAgICAgICAgICAgICAgICAgIGluZGljZXMucHVzaChpbmRleCk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHR5cGVzLnB1c2goQ0IpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChjbGFzc1R5cGUgPT09IENNIHx8IGNsYXNzVHlwZSA9PT0gWldKJDEpIHsKICAgICAgICAgICAgICAgIC8vIExCMTAgVHJlYXQgYW55IHJlbWFpbmluZyBjb21iaW5pbmcgbWFyayBvciBaV0ogYXMgQUwuCiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPT09IDApIHsKICAgICAgICAgICAgICAgICAgICBpbmRpY2VzLnB1c2goaW5kZXgpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiB0eXBlcy5wdXNoKEFMKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8vIExCOSBEbyBub3QgYnJlYWsgYSBjb21iaW5pbmcgY2hhcmFjdGVyIHNlcXVlbmNlOyB0cmVhdCBpdCBhcyBpZiBpdCBoYXMgdGhlIGxpbmUgYnJlYWtpbmcgY2xhc3Mgb2YKICAgICAgICAgICAgICAgIC8vIHRoZSBiYXNlIGNoYXJhY3RlciBpbiBhbGwgb2YgdGhlIGZvbGxvd2luZyBydWxlcy4gVHJlYXQgWldKIGFzIGlmIGl0IHdlcmUgQ00uCiAgICAgICAgICAgICAgICB2YXIgcHJldiA9IHR5cGVzW2luZGV4IC0gMV07CiAgICAgICAgICAgICAgICBpZiAoTElORV9CUkVBS1MuaW5kZXhPZihwcmV2KSA9PT0gLTEpIHsKICAgICAgICAgICAgICAgICAgICBpbmRpY2VzLnB1c2goaW5kaWNlc1tpbmRleCAtIDFdKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHlwZXMucHVzaChwcmV2KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGluZGljZXMucHVzaChpbmRleCk7CiAgICAgICAgICAgICAgICByZXR1cm4gdHlwZXMucHVzaChBTCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaW5kaWNlcy5wdXNoKGluZGV4KTsKICAgICAgICAgICAgaWYgKGNsYXNzVHlwZSA9PT0gQ0opIHsKICAgICAgICAgICAgICAgIHJldHVybiB0eXBlcy5wdXNoKGxpbmVCcmVhayA9PT0gJ3N0cmljdCcgPyBOUyA6IElEKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoY2xhc3NUeXBlID09PSBTQSkgewogICAgICAgICAgICAgICAgcmV0dXJuIHR5cGVzLnB1c2goQUwpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChjbGFzc1R5cGUgPT09IEFJKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdHlwZXMucHVzaChBTCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gRm9yIHN1cHBsZW1lbnRhcnkgY2hhcmFjdGVycywgYSB1c2VmdWwgZGVmYXVsdCBpcyB0byB0cmVhdCBjaGFyYWN0ZXJzIGluIHRoZSByYW5nZSAxMDAwMC4uMUZGRkQgYXMgQUwKICAgICAgICAgICAgLy8gYW5kIGNoYXJhY3RlcnMgaW4gdGhlIHJhbmdlcyAyMDAwMC4uMkZGRkQgYW5kIDMwMDAwLi4zRkZGRCBhcyBJRCwgdW50aWwgdGhlIGltcGxlbWVudGF0aW9uIGNhbiBiZSByZXZpc2VkCiAgICAgICAgICAgIC8vIHRvIHRha2UgaW50byBhY2NvdW50IHRoZSBhY3R1YWwgbGluZSBicmVha2luZyBwcm9wZXJ0aWVzIGZvciB0aGVzZSBjaGFyYWN0ZXJzLgogICAgICAgICAgICBpZiAoY2xhc3NUeXBlID09PSBYWCkgewogICAgICAgICAgICAgICAgaWYgKChjb2RlUG9pbnQgPj0gMHgyMDAwMCAmJiBjb2RlUG9pbnQgPD0gMHgyZmZmZCkgfHwgKGNvZGVQb2ludCA+PSAweDMwMDAwICYmIGNvZGVQb2ludCA8PSAweDNmZmZkKSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0eXBlcy5wdXNoKElEKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0eXBlcy5wdXNoKEFMKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICB0eXBlcy5wdXNoKGNsYXNzVHlwZSk7CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIFtpbmRpY2VzLCB0eXBlcywgY2F0ZWdvcmllc107CiAgICB9OwogICAgdmFyIGlzQWRqYWNlbnRXaXRoU3BhY2VJZ25vcmVkID0gZnVuY3Rpb24gKGEsIGIsIGN1cnJlbnRJbmRleCwgY2xhc3NUeXBlcykgewogICAgICAgIHZhciBjdXJyZW50ID0gY2xhc3NUeXBlc1tjdXJyZW50SW5kZXhdOwogICAgICAgIGlmIChBcnJheS5pc0FycmF5KGEpID8gYS5pbmRleE9mKGN1cnJlbnQpICE9PSAtMSA6IGEgPT09IGN1cnJlbnQpIHsKICAgICAgICAgICAgdmFyIGkgPSBjdXJyZW50SW5kZXg7CiAgICAgICAgICAgIHdoaWxlIChpIDw9IGNsYXNzVHlwZXMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICBpKys7CiAgICAgICAgICAgICAgICB2YXIgbmV4dCA9IGNsYXNzVHlwZXNbaV07CiAgICAgICAgICAgICAgICBpZiAobmV4dCA9PT0gYikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKG5leHQgIT09IFNQKSB7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKGN1cnJlbnQgPT09IFNQKSB7CiAgICAgICAgICAgIHZhciBpID0gY3VycmVudEluZGV4OwogICAgICAgICAgICB3aGlsZSAoaSA+IDApIHsKICAgICAgICAgICAgICAgIGktLTsKICAgICAgICAgICAgICAgIHZhciBwcmV2ID0gY2xhc3NUeXBlc1tpXTsKICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGEpID8gYS5pbmRleE9mKHByZXYpICE9PSAtMSA6IGEgPT09IHByZXYpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IGN1cnJlbnRJbmRleDsKICAgICAgICAgICAgICAgICAgICB3aGlsZSAobiA8PSBjbGFzc1R5cGVzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICBuKys7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuZXh0ID0gY2xhc3NUeXBlc1tuXTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5leHQgPT09IGIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXh0ICE9PSBTUCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAocHJldiAhPT0gU1ApIHsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9OwogICAgdmFyIHByZXZpb3VzTm9uU3BhY2VDbGFzc1R5cGUgPSBmdW5jdGlvbiAoY3VycmVudEluZGV4LCBjbGFzc1R5cGVzKSB7CiAgICAgICAgdmFyIGkgPSBjdXJyZW50SW5kZXg7CiAgICAgICAgd2hpbGUgKGkgPj0gMCkgewogICAgICAgICAgICB2YXIgdHlwZSA9IGNsYXNzVHlwZXNbaV07CiAgICAgICAgICAgIGlmICh0eXBlID09PSBTUCkgewogICAgICAgICAgICAgICAgaS0tOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuIHR5cGU7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIDA7CiAgICB9OwogICAgdmFyIF9saW5lQnJlYWtBdEluZGV4ID0gZnVuY3Rpb24gKGNvZGVQb2ludHMsIGNsYXNzVHlwZXMsIGluZGljaWVzLCBpbmRleCwgZm9yYmlkZGVuQnJlYWtzKSB7CiAgICAgICAgaWYgKGluZGljaWVzW2luZGV4XSA9PT0gMCkgewogICAgICAgICAgICByZXR1cm4gQlJFQUtfTk9UX0FMTE9XRUQkMTsKICAgICAgICB9CiAgICAgICAgdmFyIGN1cnJlbnRJbmRleCA9IGluZGV4IC0gMTsKICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShmb3JiaWRkZW5CcmVha3MpICYmIGZvcmJpZGRlbkJyZWFrc1tjdXJyZW50SW5kZXhdID09PSB0cnVlKSB7CiAgICAgICAgICAgIHJldHVybiBCUkVBS19OT1RfQUxMT1dFRCQxOwogICAgICAgIH0KICAgICAgICB2YXIgYmVmb3JlSW5kZXggPSBjdXJyZW50SW5kZXggLSAxOwogICAgICAgIHZhciBhZnRlckluZGV4ID0gY3VycmVudEluZGV4ICsgMTsKICAgICAgICB2YXIgY3VycmVudCA9IGNsYXNzVHlwZXNbY3VycmVudEluZGV4XTsKICAgICAgICAvLyBMQjQgQWx3YXlzIGJyZWFrIGFmdGVyIGhhcmQgbGluZSBicmVha3MuCiAgICAgICAgLy8gTEI1IFRyZWF0IENSIGZvbGxvd2VkIGJ5IExGLCBhcyB3ZWxsIGFzIENSLCBMRiwgYW5kIE5MIGFzIGhhcmQgbGluZSBicmVha3MuCiAgICAgICAgdmFyIGJlZm9yZSA9IGJlZm9yZUluZGV4ID49IDAgPyBjbGFzc1R5cGVzW2JlZm9yZUluZGV4XSA6IDA7CiAgICAgICAgdmFyIG5leHQgPSBjbGFzc1R5cGVzW2FmdGVySW5kZXhdOwogICAgICAgIGlmIChjdXJyZW50ID09PSBDUiQxICYmIG5leHQgPT09IExGJDEpIHsKICAgICAgICAgICAgcmV0dXJuIEJSRUFLX05PVF9BTExPV0VEJDE7CiAgICAgICAgfQogICAgICAgIGlmIChIQVJEX0xJTkVfQlJFQUtTLmluZGV4T2YoY3VycmVudCkgIT09IC0xKSB7CiAgICAgICAgICAgIHJldHVybiBCUkVBS19NQU5EQVRPUlk7CiAgICAgICAgfQogICAgICAgIC8vIExCNiBEbyBub3QgYnJlYWsgYmVmb3JlIGhhcmQgbGluZSBicmVha3MuCiAgICAgICAgaWYgKEhBUkRfTElORV9CUkVBS1MuaW5kZXhPZihuZXh0KSAhPT0gLTEpIHsKICAgICAgICAgICAgcmV0dXJuIEJSRUFLX05PVF9BTExPV0VEJDE7CiAgICAgICAgfQogICAgICAgIC8vIExCNyBEbyBub3QgYnJlYWsgYmVmb3JlIHNwYWNlcyBvciB6ZXJvIHdpZHRoIHNwYWNlLgogICAgICAgIGlmIChTUEFDRSQxLmluZGV4T2YobmV4dCkgIT09IC0xKSB7CiAgICAgICAgICAgIHJldHVybiBCUkVBS19OT1RfQUxMT1dFRCQxOwogICAgICAgIH0KICAgICAgICAvLyBMQjggQnJlYWsgYmVmb3JlIGFueSBjaGFyYWN0ZXIgZm9sbG93aW5nIGEgemVyby13aWR0aCBzcGFjZSwgZXZlbiBpZiBvbmUgb3IgbW9yZSBzcGFjZXMgaW50ZXJ2ZW5lLgogICAgICAgIGlmIChwcmV2aW91c05vblNwYWNlQ2xhc3NUeXBlKGN1cnJlbnRJbmRleCwgY2xhc3NUeXBlcykgPT09IFpXKSB7CiAgICAgICAgICAgIHJldHVybiBCUkVBS19BTExPV0VEJDE7CiAgICAgICAgfQogICAgICAgIC8vIExCOGEgRG8gbm90IGJyZWFrIGFmdGVyIGEgemVybyB3aWR0aCBqb2luZXIuCiAgICAgICAgaWYgKFVuaWNvZGVUcmllJDEuZ2V0KGNvZGVQb2ludHNbY3VycmVudEluZGV4XSkgPT09IFpXSiQxKSB7CiAgICAgICAgICAgIHJldHVybiBCUkVBS19OT1RfQUxMT1dFRCQxOwogICAgICAgIH0KICAgICAgICAvLyB6d2ogZW1vamlzCiAgICAgICAgaWYgKChjdXJyZW50ID09PSBFQiB8fCBjdXJyZW50ID09PSBFTSkgJiYgVW5pY29kZVRyaWUkMS5nZXQoY29kZVBvaW50c1thZnRlckluZGV4XSkgPT09IFpXSiQxKSB7CiAgICAgICAgICAgIHJldHVybiBCUkVBS19OT1RfQUxMT1dFRCQxOwogICAgICAgIH0KICAgICAgICAvLyBMQjExIERvIG5vdCBicmVhayBiZWZvcmUgb3IgYWZ0ZXIgV29yZCBqb2luZXIgYW5kIHJlbGF0ZWQgY2hhcmFjdGVycy4KICAgICAgICBpZiAoY3VycmVudCA9PT0gV0ogfHwgbmV4dCA9PT0gV0opIHsKICAgICAgICAgICAgcmV0dXJuIEJSRUFLX05PVF9BTExPV0VEJDE7CiAgICAgICAgfQogICAgICAgIC8vIExCMTIgRG8gbm90IGJyZWFrIGFmdGVyIE5CU1AgYW5kIHJlbGF0ZWQgY2hhcmFjdGVycy4KICAgICAgICBpZiAoY3VycmVudCA9PT0gR0wpIHsKICAgICAgICAgICAgcmV0dXJuIEJSRUFLX05PVF9BTExPV0VEJDE7CiAgICAgICAgfQogICAgICAgIC8vIExCMTJhIERvIG5vdCBicmVhayBiZWZvcmUgTkJTUCBhbmQgcmVsYXRlZCBjaGFyYWN0ZXJzLCBleGNlcHQgYWZ0ZXIgc3BhY2VzIGFuZCBoeXBoZW5zLgogICAgICAgIGlmIChbU1AsIEJBLCBIWV0uaW5kZXhPZihjdXJyZW50KSA9PT0gLTEgJiYgbmV4dCA9PT0gR0wpIHsKICAgICAgICAgICAgcmV0dXJuIEJSRUFLX05PVF9BTExPV0VEJDE7CiAgICAgICAgfQogICAgICAgIC8vIExCMTMgRG8gbm90IGJyZWFrIGJlZm9yZSDigJhd4oCZIG9yIOKAmCHigJkgb3Ig4oCYO+KAmSBvciDigJgv4oCZLCBldmVuIGFmdGVyIHNwYWNlcy4KICAgICAgICBpZiAoW0NMLCBDUCwgRVgsIElTLCBTWV0uaW5kZXhPZihuZXh0KSAhPT0gLTEpIHsKICAgICAgICAgICAgcmV0dXJuIEJSRUFLX05PVF9BTExPV0VEJDE7CiAgICAgICAgfQogICAgICAgIC8vIExCMTQgRG8gbm90IGJyZWFrIGFmdGVyIOKAmFvigJksIGV2ZW4gYWZ0ZXIgc3BhY2VzLgogICAgICAgIGlmIChwcmV2aW91c05vblNwYWNlQ2xhc3NUeXBlKGN1cnJlbnRJbmRleCwgY2xhc3NUeXBlcykgPT09IE9QKSB7CiAgICAgICAgICAgIHJldHVybiBCUkVBS19OT1RfQUxMT1dFRCQxOwogICAgICAgIH0KICAgICAgICAvLyBMQjE1IERvIG5vdCBicmVhayB3aXRoaW4g4oCY4oCdW+KAmSwgZXZlbiB3aXRoIGludGVydmVuaW5nIHNwYWNlcy4KICAgICAgICBpZiAoaXNBZGphY2VudFdpdGhTcGFjZUlnbm9yZWQoUVUsIE9QLCBjdXJyZW50SW5kZXgsIGNsYXNzVHlwZXMpKSB7CiAgICAgICAgICAgIHJldHVybiBCUkVBS19OT1RfQUxMT1dFRCQxOwogICAgICAgIH0KICAgICAgICAvLyBMQjE2IERvIG5vdCBicmVhayBiZXR3ZWVuIGNsb3NpbmcgcHVuY3R1YXRpb24gYW5kIGEgbm9uc3RhcnRlciAobGI9TlMpLCBldmVuIHdpdGggaW50ZXJ2ZW5pbmcgc3BhY2VzLgogICAgICAgIGlmIChpc0FkamFjZW50V2l0aFNwYWNlSWdub3JlZChbQ0wsIENQXSwgTlMsIGN1cnJlbnRJbmRleCwgY2xhc3NUeXBlcykpIHsKICAgICAgICAgICAgcmV0dXJuIEJSRUFLX05PVF9BTExPV0VEJDE7CiAgICAgICAgfQogICAgICAgIC8vIExCMTcgRG8gbm90IGJyZWFrIHdpdGhpbiDigJjigJTigJTigJksIGV2ZW4gd2l0aCBpbnRlcnZlbmluZyBzcGFjZXMuCiAgICAgICAgaWYgKGlzQWRqYWNlbnRXaXRoU3BhY2VJZ25vcmVkKEIyLCBCMiwgY3VycmVudEluZGV4LCBjbGFzc1R5cGVzKSkgewogICAgICAgICAgICByZXR1cm4gQlJFQUtfTk9UX0FMTE9XRUQkMTsKICAgICAgICB9CiAgICAgICAgLy8gTEIxOCBCcmVhayBhZnRlciBzcGFjZXMuCiAgICAgICAgaWYgKGN1cnJlbnQgPT09IFNQKSB7CiAgICAgICAgICAgIHJldHVybiBCUkVBS19BTExPV0VEJDE7CiAgICAgICAgfQogICAgICAgIC8vIExCMTkgRG8gbm90IGJyZWFrIGJlZm9yZSBvciBhZnRlciBxdW90YXRpb24gbWFya3MsIHN1Y2ggYXMg4oCYIOKAnSDigJkuCiAgICAgICAgaWYgKGN1cnJlbnQgPT09IFFVIHx8IG5leHQgPT09IFFVKSB7CiAgICAgICAgICAgIHJldHVybiBCUkVBS19OT1RfQUxMT1dFRCQxOwogICAgICAgIH0KICAgICAgICAvLyBMQjIwIEJyZWFrIGJlZm9yZSBhbmQgYWZ0ZXIgdW5yZXNvbHZlZCBDQi4KICAgICAgICBpZiAobmV4dCA9PT0gQ0IgfHwgY3VycmVudCA9PT0gQ0IpIHsKICAgICAgICAgICAgcmV0dXJuIEJSRUFLX0FMTE9XRUQkMTsKICAgICAgICB9CiAgICAgICAgLy8gTEIyMSBEbyBub3QgYnJlYWsgYmVmb3JlIGh5cGhlbi1taW51cywgb3RoZXIgaHlwaGVucywgZml4ZWQtd2lkdGggc3BhY2VzLCBzbWFsbCBrYW5hLCBhbmQgb3RoZXIgbm9uLXN0YXJ0ZXJzLCBvciBhZnRlciBhY3V0ZSBhY2NlbnRzLgogICAgICAgIGlmIChbQkEsIEhZLCBOU10uaW5kZXhPZihuZXh0KSAhPT0gLTEgfHwgY3VycmVudCA9PT0gQkIpIHsKICAgICAgICAgICAgcmV0dXJuIEJSRUFLX05PVF9BTExPV0VEJDE7CiAgICAgICAgfQogICAgICAgIC8vIExCMjFhIERvbid0IGJyZWFrIGFmdGVyIEhlYnJldyArIEh5cGhlbi4KICAgICAgICBpZiAoYmVmb3JlID09PSBITCAmJiBIWVBIRU4uaW5kZXhPZihjdXJyZW50KSAhPT0gLTEpIHsKICAgICAgICAgICAgcmV0dXJuIEJSRUFLX05PVF9BTExPV0VEJDE7CiAgICAgICAgfQogICAgICAgIC8vIExCMjFiIERvbuKAmXQgYnJlYWsgYmV0d2VlbiBTb2xpZHVzIGFuZCBIZWJyZXcgbGV0dGVycy4KICAgICAgICBpZiAoY3VycmVudCA9PT0gU1kgJiYgbmV4dCA9PT0gSEwpIHsKICAgICAgICAgICAgcmV0dXJuIEJSRUFLX05PVF9BTExPV0VEJDE7CiAgICAgICAgfQogICAgICAgIC8vIExCMjIgRG8gbm90IGJyZWFrIGJlZm9yZSBlbGxpcHNpcy4KICAgICAgICBpZiAobmV4dCA9PT0gSU4pIHsKICAgICAgICAgICAgcmV0dXJuIEJSRUFLX05PVF9BTExPV0VEJDE7CiAgICAgICAgfQogICAgICAgIC8vIExCMjMgRG8gbm90IGJyZWFrIGJldHdlZW4gZGlnaXRzIGFuZCBsZXR0ZXJzLgogICAgICAgIGlmICgoQUxQSEFCRVRJQ1MuaW5kZXhPZihuZXh0KSAhPT0gLTEgJiYgY3VycmVudCA9PT0gTlUpIHx8IChBTFBIQUJFVElDUy5pbmRleE9mKGN1cnJlbnQpICE9PSAtMSAmJiBuZXh0ID09PSBOVSkpIHsKICAgICAgICAgICAgcmV0dXJuIEJSRUFLX05PVF9BTExPV0VEJDE7CiAgICAgICAgfQogICAgICAgIC8vIExCMjNhIERvIG5vdCBicmVhayBiZXR3ZWVuIG51bWVyaWMgcHJlZml4ZXMgYW5kIGlkZW9ncmFwaHMsIG9yIGJldHdlZW4gaWRlb2dyYXBocyBhbmQgbnVtZXJpYyBwb3N0Zml4ZXMuCiAgICAgICAgaWYgKChjdXJyZW50ID09PSBQUiAmJiBbSUQsIEVCLCBFTV0uaW5kZXhPZihuZXh0KSAhPT0gLTEpIHx8CiAgICAgICAgICAgIChbSUQsIEVCLCBFTV0uaW5kZXhPZihjdXJyZW50KSAhPT0gLTEgJiYgbmV4dCA9PT0gUE8pKSB7CiAgICAgICAgICAgIHJldHVybiBCUkVBS19OT1RfQUxMT1dFRCQxOwogICAgICAgIH0KICAgICAgICAvLyBMQjI0IERvIG5vdCBicmVhayBiZXR3ZWVuIG51bWVyaWMgcHJlZml4L3Bvc3RmaXggYW5kIGxldHRlcnMsIG9yIGJldHdlZW4gbGV0dGVycyBhbmQgcHJlZml4L3Bvc3RmaXguCiAgICAgICAgaWYgKChBTFBIQUJFVElDUy5pbmRleE9mKGN1cnJlbnQpICE9PSAtMSAmJiBQUkVGSVhfUE9TVEZJWC5pbmRleE9mKG5leHQpICE9PSAtMSkgfHwKICAgICAgICAgICAgKFBSRUZJWF9QT1NURklYLmluZGV4T2YoY3VycmVudCkgIT09IC0xICYmIEFMUEhBQkVUSUNTLmluZGV4T2YobmV4dCkgIT09IC0xKSkgewogICAgICAgICAgICByZXR1cm4gQlJFQUtfTk9UX0FMTE9XRUQkMTsKICAgICAgICB9CiAgICAgICAgLy8gTEIyNSBEbyBub3QgYnJlYWsgYmV0d2VlbiB0aGUgZm9sbG93aW5nIHBhaXJzIG9mIGNsYXNzZXMgcmVsZXZhbnQgdG8gbnVtYmVyczoKICAgICAgICBpZiAoCiAgICAgICAgLy8gKFBSIHwgUE8pIMOXICggT1AgfCBIWSApPyBOVQogICAgICAgIChbUFIsIFBPXS5pbmRleE9mKGN1cnJlbnQpICE9PSAtMSAmJgogICAgICAgICAgICAobmV4dCA9PT0gTlUgfHwgKFtPUCwgSFldLmluZGV4T2YobmV4dCkgIT09IC0xICYmIGNsYXNzVHlwZXNbYWZ0ZXJJbmRleCArIDFdID09PSBOVSkpKSB8fAogICAgICAgICAgICAvLyAoIE9QIHwgSFkgKSDDlyBOVQogICAgICAgICAgICAoW09QLCBIWV0uaW5kZXhPZihjdXJyZW50KSAhPT0gLTEgJiYgbmV4dCA9PT0gTlUpIHx8CiAgICAgICAgICAgIC8vIE5VIMOXCShOVSB8IFNZIHwgSVMpCiAgICAgICAgICAgIChjdXJyZW50ID09PSBOVSAmJiBbTlUsIFNZLCBJU10uaW5kZXhPZihuZXh0KSAhPT0gLTEpKSB7CiAgICAgICAgICAgIHJldHVybiBCUkVBS19OT1RfQUxMT1dFRCQxOwogICAgICAgIH0KICAgICAgICAvLyBOVSAoTlUgfCBTWSB8IElTKSogw5cgKE5VIHwgU1kgfCBJUyB8IENMIHwgQ1ApCiAgICAgICAgaWYgKFtOVSwgU1ksIElTLCBDTCwgQ1BdLmluZGV4T2YobmV4dCkgIT09IC0xKSB7CiAgICAgICAgICAgIHZhciBwcmV2SW5kZXggPSBjdXJyZW50SW5kZXg7CiAgICAgICAgICAgIHdoaWxlIChwcmV2SW5kZXggPj0gMCkgewogICAgICAgICAgICAgICAgdmFyIHR5cGUgPSBjbGFzc1R5cGVzW3ByZXZJbmRleF07CiAgICAgICAgICAgICAgICBpZiAodHlwZSA9PT0gTlUpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gQlJFQUtfTk9UX0FMTE9XRUQkMTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKFtTWSwgSVNdLmluZGV4T2YodHlwZSkgIT09IC0xKSB7CiAgICAgICAgICAgICAgICAgICAgcHJldkluZGV4LS07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAvLyBOVSAoTlUgfCBTWSB8IElTKSogKENMIHwgQ1ApPyDDlyAoUE8gfCBQUikpCiAgICAgICAgaWYgKFtQUiwgUE9dLmluZGV4T2YobmV4dCkgIT09IC0xKSB7CiAgICAgICAgICAgIHZhciBwcmV2SW5kZXggPSBbQ0wsIENQXS5pbmRleE9mKGN1cnJlbnQpICE9PSAtMSA/IGJlZm9yZUluZGV4IDogY3VycmVudEluZGV4OwogICAgICAgICAgICB3aGlsZSAocHJldkluZGV4ID49IDApIHsKICAgICAgICAgICAgICAgIHZhciB0eXBlID0gY2xhc3NUeXBlc1twcmV2SW5kZXhdOwogICAgICAgICAgICAgICAgaWYgKHR5cGUgPT09IE5VKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEJSRUFLX05PVF9BTExPV0VEJDE7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIGlmIChbU1ksIElTXS5pbmRleE9mKHR5cGUpICE9PSAtMSkgewogICAgICAgICAgICAgICAgICAgIHByZXZJbmRleC0tOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLy8gTEIyNiBEbyBub3QgYnJlYWsgYSBLb3JlYW4gc3lsbGFibGUuCiAgICAgICAgaWYgKChKTCA9PT0gY3VycmVudCAmJiBbSkwsIEpWLCBIMiwgSDNdLmluZGV4T2YobmV4dCkgIT09IC0xKSB8fAogICAgICAgICAgICAoW0pWLCBIMl0uaW5kZXhPZihjdXJyZW50KSAhPT0gLTEgJiYgW0pWLCBKVF0uaW5kZXhPZihuZXh0KSAhPT0gLTEpIHx8CiAgICAgICAgICAgIChbSlQsIEgzXS5pbmRleE9mKGN1cnJlbnQpICE9PSAtMSAmJiBuZXh0ID09PSBKVCkpIHsKICAgICAgICAgICAgcmV0dXJuIEJSRUFLX05PVF9BTExPV0VEJDE7CiAgICAgICAgfQogICAgICAgIC8vIExCMjcgVHJlYXQgYSBLb3JlYW4gU3lsbGFibGUgQmxvY2sgdGhlIHNhbWUgYXMgSUQuCiAgICAgICAgaWYgKChLT1JFQU5fU1lMTEFCTEVfQkxPQ0suaW5kZXhPZihjdXJyZW50KSAhPT0gLTEgJiYgW0lOLCBQT10uaW5kZXhPZihuZXh0KSAhPT0gLTEpIHx8CiAgICAgICAgICAgIChLT1JFQU5fU1lMTEFCTEVfQkxPQ0suaW5kZXhPZihuZXh0KSAhPT0gLTEgJiYgY3VycmVudCA9PT0gUFIpKSB7CiAgICAgICAgICAgIHJldHVybiBCUkVBS19OT1RfQUxMT1dFRCQxOwogICAgICAgIH0KICAgICAgICAvLyBMQjI4IERvIG5vdCBicmVhayBiZXR3ZWVuIGFscGhhYmV0aWNzICjigJxhdOKAnSkuCiAgICAgICAgaWYgKEFMUEhBQkVUSUNTLmluZGV4T2YoY3VycmVudCkgIT09IC0xICYmIEFMUEhBQkVUSUNTLmluZGV4T2YobmV4dCkgIT09IC0xKSB7CiAgICAgICAgICAgIHJldHVybiBCUkVBS19OT1RfQUxMT1dFRCQxOwogICAgICAgIH0KICAgICAgICAvLyBMQjI5IERvIG5vdCBicmVhayBiZXR3ZWVuIG51bWVyaWMgcHVuY3R1YXRpb24gYW5kIGFscGhhYmV0aWNzICjigJxlLmcu4oCdKS4KICAgICAgICBpZiAoY3VycmVudCA9PT0gSVMgJiYgQUxQSEFCRVRJQ1MuaW5kZXhPZihuZXh0KSAhPT0gLTEpIHsKICAgICAgICAgICAgcmV0dXJuIEJSRUFLX05PVF9BTExPV0VEJDE7CiAgICAgICAgfQogICAgICAgIC8vIExCMzAgRG8gbm90IGJyZWFrIGJldHdlZW4gbGV0dGVycywgbnVtYmVycywgb3Igb3JkaW5hcnkgc3ltYm9scyBhbmQgb3BlbmluZyBvciBjbG9zaW5nIHBhcmVudGhlc2VzLgogICAgICAgIGlmICgoQUxQSEFCRVRJQ1MuY29uY2F0KE5VKS5pbmRleE9mKGN1cnJlbnQpICE9PSAtMSAmJgogICAgICAgICAgICBuZXh0ID09PSBPUCAmJgogICAgICAgICAgICBlYV9PUC5pbmRleE9mKGNvZGVQb2ludHNbYWZ0ZXJJbmRleF0pID09PSAtMSkgfHwKICAgICAgICAgICAgKEFMUEhBQkVUSUNTLmNvbmNhdChOVSkuaW5kZXhPZihuZXh0KSAhPT0gLTEgJiYgY3VycmVudCA9PT0gQ1ApKSB7CiAgICAgICAgICAgIHJldHVybiBCUkVBS19OT1RfQUxMT1dFRCQxOwogICAgICAgIH0KICAgICAgICAvLyBMQjMwYSBCcmVhayBiZXR3ZWVuIHR3byByZWdpb25hbCBpbmRpY2F0b3Igc3ltYm9scyBpZiBhbmQgb25seSBpZiB0aGVyZSBhcmUgYW4gZXZlbiBudW1iZXIgb2YgcmVnaW9uYWwKICAgICAgICAvLyBpbmRpY2F0b3JzIHByZWNlZGluZyB0aGUgcG9zaXRpb24gb2YgdGhlIGJyZWFrLgogICAgICAgIGlmIChjdXJyZW50ID09PSBSSSQxICYmIG5leHQgPT09IFJJJDEpIHsKICAgICAgICAgICAgdmFyIGkgPSBpbmRpY2llc1tjdXJyZW50SW5kZXhdOwogICAgICAgICAgICB2YXIgY291bnQgPSAxOwogICAgICAgICAgICB3aGlsZSAoaSA+IDApIHsKICAgICAgICAgICAgICAgIGktLTsKICAgICAgICAgICAgICAgIGlmIChjbGFzc1R5cGVzW2ldID09PSBSSSQxKSB7CiAgICAgICAgICAgICAgICAgICAgY291bnQrKzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChjb3VudCAlIDIgIT09IDApIHsKICAgICAgICAgICAgICAgIHJldHVybiBCUkVBS19OT1RfQUxMT1dFRCQxOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIC8vIExCMzBiIERvIG5vdCBicmVhayBiZXR3ZWVuIGFuIGVtb2ppIGJhc2UgYW5kIGFuIGVtb2ppIG1vZGlmaWVyLgogICAgICAgIGlmIChjdXJyZW50ID09PSBFQiAmJiBuZXh0ID09PSBFTSkgewogICAgICAgICAgICByZXR1cm4gQlJFQUtfTk9UX0FMTE9XRUQkMTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIEJSRUFLX0FMTE9XRUQkMTsKICAgIH07CiAgICB2YXIgY3NzRm9ybWF0dGVkQ2xhc3NlcyA9IGZ1bmN0aW9uIChjb2RlUG9pbnRzLCBvcHRpb25zKSB7CiAgICAgICAgaWYgKCFvcHRpb25zKSB7CiAgICAgICAgICAgIG9wdGlvbnMgPSB7IGxpbmVCcmVhazogJ25vcm1hbCcsIHdvcmRCcmVhazogJ25vcm1hbCcgfTsKICAgICAgICB9CiAgICAgICAgdmFyIF9hID0gY29kZVBvaW50c1RvQ2hhcmFjdGVyQ2xhc3Nlcyhjb2RlUG9pbnRzLCBvcHRpb25zLmxpbmVCcmVhayksIGluZGljaWVzID0gX2FbMF0sIGNsYXNzVHlwZXMgPSBfYVsxXSwgaXNMZXR0ZXJOdW1iZXIgPSBfYVsyXTsKICAgICAgICBpZiAob3B0aW9ucy53b3JkQnJlYWsgPT09ICdicmVhay1hbGwnIHx8IG9wdGlvbnMud29yZEJyZWFrID09PSAnYnJlYWstd29yZCcpIHsKICAgICAgICAgICAgY2xhc3NUeXBlcyA9IGNsYXNzVHlwZXMubWFwKGZ1bmN0aW9uICh0eXBlKSB7IHJldHVybiAoW05VLCBBTCwgU0FdLmluZGV4T2YodHlwZSkgIT09IC0xID8gSUQgOiB0eXBlKTsgfSk7CiAgICAgICAgfQogICAgICAgIHZhciBmb3JiaWRkZW5CcmVha3BvaW50cyA9IG9wdGlvbnMud29yZEJyZWFrID09PSAna2VlcC1hbGwnCiAgICAgICAgICAgID8gaXNMZXR0ZXJOdW1iZXIubWFwKGZ1bmN0aW9uIChsZXR0ZXJOdW1iZXIsIGkpIHsKICAgICAgICAgICAgICAgIHJldHVybiBsZXR0ZXJOdW1iZXIgJiYgY29kZVBvaW50c1tpXSA+PSAweDRlMDAgJiYgY29kZVBvaW50c1tpXSA8PSAweDlmZmY7CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIDogdW5kZWZpbmVkOwogICAgICAgIHJldHVybiBbaW5kaWNpZXMsIGNsYXNzVHlwZXMsIGZvcmJpZGRlbkJyZWFrcG9pbnRzXTsKICAgIH07CiAgICB2YXIgQnJlYWsgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CiAgICAgICAgZnVuY3Rpb24gQnJlYWsoY29kZVBvaW50cywgbGluZUJyZWFrLCBzdGFydCwgZW5kKSB7CiAgICAgICAgICAgIHRoaXMuY29kZVBvaW50cyA9IGNvZGVQb2ludHM7CiAgICAgICAgICAgIHRoaXMucmVxdWlyZWQgPSBsaW5lQnJlYWsgPT09IEJSRUFLX01BTkRBVE9SWTsKICAgICAgICAgICAgdGhpcy5zdGFydCA9IHN0YXJ0OwogICAgICAgICAgICB0aGlzLmVuZCA9IGVuZDsKICAgICAgICB9CiAgICAgICAgQnJlYWsucHJvdG90eXBlLnNsaWNlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gZnJvbUNvZGVQb2ludCQxLmFwcGx5KHZvaWQgMCwgdGhpcy5jb2RlUG9pbnRzLnNsaWNlKHRoaXMuc3RhcnQsIHRoaXMuZW5kKSk7CiAgICAgICAgfTsKICAgICAgICByZXR1cm4gQnJlYWs7CiAgICB9KCkpOwogICAgdmFyIExpbmVCcmVha2VyID0gZnVuY3Rpb24gKHN0ciwgb3B0aW9ucykgewogICAgICAgIHZhciBjb2RlUG9pbnRzID0gdG9Db2RlUG9pbnRzJDEoc3RyKTsKICAgICAgICB2YXIgX2EgPSBjc3NGb3JtYXR0ZWRDbGFzc2VzKGNvZGVQb2ludHMsIG9wdGlvbnMpLCBpbmRpY2llcyA9IF9hWzBdLCBjbGFzc1R5cGVzID0gX2FbMV0sIGZvcmJpZGRlbkJyZWFrcG9pbnRzID0gX2FbMl07CiAgICAgICAgdmFyIGxlbmd0aCA9IGNvZGVQb2ludHMubGVuZ3RoOwogICAgICAgIHZhciBsYXN0RW5kID0gMDsKICAgICAgICB2YXIgbmV4dEluZGV4ID0gMDsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBpZiAobmV4dEluZGV4ID49IGxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiB7IGRvbmU6IHRydWUsIHZhbHVlOiBudWxsIH07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB2YXIgbGluZUJyZWFrID0gQlJFQUtfTk9UX0FMTE9XRUQkMTsKICAgICAgICAgICAgICAgIHdoaWxlIChuZXh0SW5kZXggPCBsZW5ndGggJiYKICAgICAgICAgICAgICAgICAgICAobGluZUJyZWFrID0gX2xpbmVCcmVha0F0SW5kZXgoY29kZVBvaW50cywgY2xhc3NUeXBlcywgaW5kaWNpZXMsICsrbmV4dEluZGV4LCBmb3JiaWRkZW5CcmVha3BvaW50cykpID09PQogICAgICAgICAgICAgICAgICAgICAgICBCUkVBS19OT1RfQUxMT1dFRCQxKSB7IH0KICAgICAgICAgICAgICAgIGlmIChsaW5lQnJlYWsgIT09IEJSRUFLX05PVF9BTExPV0VEJDEgfHwgbmV4dEluZGV4ID09PSBsZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBuZXcgQnJlYWsoY29kZVBvaW50cywgbGluZUJyZWFrLCBsYXN0RW5kLCBuZXh0SW5kZXgpOwogICAgICAgICAgICAgICAgICAgIGxhc3RFbmQgPSBuZXh0SW5kZXg7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IHZhbHVlLCBkb25lOiBmYWxzZSB9OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIHsgZG9uZTogdHJ1ZSwgdmFsdWU6IG51bGwgfTsKICAgICAgICAgICAgfSwKICAgICAgICB9OwogICAgfTsKCiAgICAvLyBodHRwczovL3d3dy53My5vcmcvVFIvY3NzLXN5bnRheC0zCiAgICB2YXIgRkxBR19VTlJFU1RSSUNURUQgPSAxIDw8IDA7CiAgICB2YXIgRkxBR19JRCA9IDEgPDwgMTsKICAgIHZhciBGTEFHX0lOVEVHRVIgPSAxIDw8IDI7CiAgICB2YXIgRkxBR19OVU1CRVIgPSAxIDw8IDM7CiAgICB2YXIgTElORV9GRUVEID0gMHgwMDBhOwogICAgdmFyIFNPTElEVVMgPSAweDAwMmY7CiAgICB2YXIgUkVWRVJTRV9TT0xJRFVTID0gMHgwMDVjOwogICAgdmFyIENIQVJBQ1RFUl9UQUJVTEFUSU9OID0gMHgwMDA5OwogICAgdmFyIFNQQUNFID0gMHgwMDIwOwogICAgdmFyIFFVT1RBVElPTl9NQVJLID0gMHgwMDIyOwogICAgdmFyIEVRVUFMU19TSUdOID0gMHgwMDNkOwogICAgdmFyIE5VTUJFUl9TSUdOID0gMHgwMDIzOwogICAgdmFyIERPTExBUl9TSUdOID0gMHgwMDI0OwogICAgdmFyIFBFUkNFTlRBR0VfU0lHTiA9IDB4MDAyNTsKICAgIHZhciBBUE9TVFJPUEhFID0gMHgwMDI3OwogICAgdmFyIExFRlRfUEFSRU5USEVTSVMgPSAweDAwMjg7CiAgICB2YXIgUklHSFRfUEFSRU5USEVTSVMgPSAweDAwMjk7CiAgICB2YXIgTE9XX0xJTkUgPSAweDAwNWY7CiAgICB2YXIgSFlQSEVOX01JTlVTID0gMHgwMDJkOwogICAgdmFyIEVYQ0xBTUFUSU9OX01BUksgPSAweDAwMjE7CiAgICB2YXIgTEVTU19USEFOX1NJR04gPSAweDAwM2M7CiAgICB2YXIgR1JFQVRFUl9USEFOX1NJR04gPSAweDAwM2U7CiAgICB2YXIgQ09NTUVSQ0lBTF9BVCA9IDB4MDA0MDsKICAgIHZhciBMRUZUX1NRVUFSRV9CUkFDS0VUID0gMHgwMDViOwogICAgdmFyIFJJR0hUX1NRVUFSRV9CUkFDS0VUID0gMHgwMDVkOwogICAgdmFyIENJUkNVTUZMRVhfQUNDRU5UID0gMHgwMDNkOwogICAgdmFyIExFRlRfQ1VSTFlfQlJBQ0tFVCA9IDB4MDA3YjsKICAgIHZhciBRVUVTVElPTl9NQVJLID0gMHgwMDNmOwogICAgdmFyIFJJR0hUX0NVUkxZX0JSQUNLRVQgPSAweDAwN2Q7CiAgICB2YXIgVkVSVElDQUxfTElORSA9IDB4MDA3YzsKICAgIHZhciBUSUxERSA9IDB4MDA3ZTsKICAgIHZhciBDT05UUk9MID0gMHgwMDgwOwogICAgdmFyIFJFUExBQ0VNRU5UX0NIQVJBQ1RFUiA9IDB4ZmZmZDsKICAgIHZhciBBU1RFUklTSyA9IDB4MDAyYTsKICAgIHZhciBQTFVTX1NJR04gPSAweDAwMmI7CiAgICB2YXIgQ09NTUEgPSAweDAwMmM7CiAgICB2YXIgQ09MT04gPSAweDAwM2E7CiAgICB2YXIgU0VNSUNPTE9OID0gMHgwMDNiOwogICAgdmFyIEZVTExfU1RPUCA9IDB4MDAyZTsKICAgIHZhciBOVUxMID0gMHgwMDAwOwogICAgdmFyIEJBQ0tTUEFDRSA9IDB4MDAwODsKICAgIHZhciBMSU5FX1RBQlVMQVRJT04gPSAweDAwMGI7CiAgICB2YXIgU0hJRlRfT1VUID0gMHgwMDBlOwogICAgdmFyIElORk9STUFUSU9OX1NFUEFSQVRPUl9PTkUgPSAweDAwMWY7CiAgICB2YXIgREVMRVRFID0gMHgwMDdmOwogICAgdmFyIEVPRiA9IC0xOwogICAgdmFyIFpFUk8gPSAweDAwMzA7CiAgICB2YXIgYSA9IDB4MDA2MTsKICAgIHZhciBlID0gMHgwMDY1OwogICAgdmFyIGYgPSAweDAwNjY7CiAgICB2YXIgdSA9IDB4MDA3NTsKICAgIHZhciB6ID0gMHgwMDdhOwogICAgdmFyIEEgPSAweDAwNDE7CiAgICB2YXIgRSA9IDB4MDA0NTsKICAgIHZhciBGID0gMHgwMDQ2OwogICAgdmFyIFUgPSAweDAwNTU7CiAgICB2YXIgWiA9IDB4MDA1YTsKICAgIHZhciBpc0RpZ2l0ID0gZnVuY3Rpb24gKGNvZGVQb2ludCkgeyByZXR1cm4gY29kZVBvaW50ID49IFpFUk8gJiYgY29kZVBvaW50IDw9IDB4MDAzOTsgfTsKICAgIHZhciBpc1N1cnJvZ2F0ZUNvZGVQb2ludCA9IGZ1bmN0aW9uIChjb2RlUG9pbnQpIHsgcmV0dXJuIGNvZGVQb2ludCA+PSAweGQ4MDAgJiYgY29kZVBvaW50IDw9IDB4ZGZmZjsgfTsKICAgIHZhciBpc0hleCA9IGZ1bmN0aW9uIChjb2RlUG9pbnQpIHsKICAgICAgICByZXR1cm4gaXNEaWdpdChjb2RlUG9pbnQpIHx8IChjb2RlUG9pbnQgPj0gQSAmJiBjb2RlUG9pbnQgPD0gRikgfHwgKGNvZGVQb2ludCA+PSBhICYmIGNvZGVQb2ludCA8PSBmKTsKICAgIH07CiAgICB2YXIgaXNMb3dlckNhc2VMZXR0ZXIgPSBmdW5jdGlvbiAoY29kZVBvaW50KSB7IHJldHVybiBjb2RlUG9pbnQgPj0gYSAmJiBjb2RlUG9pbnQgPD0gejsgfTsKICAgIHZhciBpc1VwcGVyQ2FzZUxldHRlciA9IGZ1bmN0aW9uIChjb2RlUG9pbnQpIHsgcmV0dXJuIGNvZGVQb2ludCA+PSBBICYmIGNvZGVQb2ludCA8PSBaOyB9OwogICAgdmFyIGlzTGV0dGVyID0gZnVuY3Rpb24gKGNvZGVQb2ludCkgeyByZXR1cm4gaXNMb3dlckNhc2VMZXR0ZXIoY29kZVBvaW50KSB8fCBpc1VwcGVyQ2FzZUxldHRlcihjb2RlUG9pbnQpOyB9OwogICAgdmFyIGlzTm9uQVNDSUlDb2RlUG9pbnQgPSBmdW5jdGlvbiAoY29kZVBvaW50KSB7IHJldHVybiBjb2RlUG9pbnQgPj0gQ09OVFJPTDsgfTsKICAgIHZhciBpc1doaXRlU3BhY2UgPSBmdW5jdGlvbiAoY29kZVBvaW50KSB7CiAgICAgICAgcmV0dXJuIGNvZGVQb2ludCA9PT0gTElORV9GRUVEIHx8IGNvZGVQb2ludCA9PT0gQ0hBUkFDVEVSX1RBQlVMQVRJT04gfHwgY29kZVBvaW50ID09PSBTUEFDRTsKICAgIH07CiAgICB2YXIgaXNOYW1lU3RhcnRDb2RlUG9pbnQgPSBmdW5jdGlvbiAoY29kZVBvaW50KSB7CiAgICAgICAgcmV0dXJuIGlzTGV0dGVyKGNvZGVQb2ludCkgfHwgaXNOb25BU0NJSUNvZGVQb2ludChjb2RlUG9pbnQpIHx8IGNvZGVQb2ludCA9PT0gTE9XX0xJTkU7CiAgICB9OwogICAgdmFyIGlzTmFtZUNvZGVQb2ludCA9IGZ1bmN0aW9uIChjb2RlUG9pbnQpIHsKICAgICAgICByZXR1cm4gaXNOYW1lU3RhcnRDb2RlUG9pbnQoY29kZVBvaW50KSB8fCBpc0RpZ2l0KGNvZGVQb2ludCkgfHwgY29kZVBvaW50ID09PSBIWVBIRU5fTUlOVVM7CiAgICB9OwogICAgdmFyIGlzTm9uUHJpbnRhYmxlQ29kZVBvaW50ID0gZnVuY3Rpb24gKGNvZGVQb2ludCkgewogICAgICAgIHJldHVybiAoKGNvZGVQb2ludCA+PSBOVUxMICYmIGNvZGVQb2ludCA8PSBCQUNLU1BBQ0UpIHx8CiAgICAgICAgICAgIGNvZGVQb2ludCA9PT0gTElORV9UQUJVTEFUSU9OIHx8CiAgICAgICAgICAgIChjb2RlUG9pbnQgPj0gU0hJRlRfT1VUICYmIGNvZGVQb2ludCA8PSBJTkZPUk1BVElPTl9TRVBBUkFUT1JfT05FKSB8fAogICAgICAgICAgICBjb2RlUG9pbnQgPT09IERFTEVURSk7CiAgICB9OwogICAgdmFyIGlzVmFsaWRFc2NhcGUgPSBmdW5jdGlvbiAoYzEsIGMyKSB7CiAgICAgICAgaWYgKGMxICE9PSBSRVZFUlNFX1NPTElEVVMpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICByZXR1cm4gYzIgIT09IExJTkVfRkVFRDsKICAgIH07CiAgICB2YXIgaXNJZGVudGlmaWVyU3RhcnQgPSBmdW5jdGlvbiAoYzEsIGMyLCBjMykgewogICAgICAgIGlmIChjMSA9PT0gSFlQSEVOX01JTlVTKSB7CiAgICAgICAgICAgIHJldHVybiBpc05hbWVTdGFydENvZGVQb2ludChjMikgfHwgaXNWYWxpZEVzY2FwZShjMiwgYzMpOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChpc05hbWVTdGFydENvZGVQb2ludChjMSkpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKGMxID09PSBSRVZFUlNFX1NPTElEVVMgJiYgaXNWYWxpZEVzY2FwZShjMSwgYzIpKSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9OwogICAgdmFyIGlzTnVtYmVyU3RhcnQgPSBmdW5jdGlvbiAoYzEsIGMyLCBjMykgewogICAgICAgIGlmIChjMSA9PT0gUExVU19TSUdOIHx8IGMxID09PSBIWVBIRU5fTUlOVVMpIHsKICAgICAgICAgICAgaWYgKGlzRGlnaXQoYzIpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gYzIgPT09IEZVTExfU1RPUCAmJiBpc0RpZ2l0KGMzKTsKICAgICAgICB9CiAgICAgICAgaWYgKGMxID09PSBGVUxMX1NUT1ApIHsKICAgICAgICAgICAgcmV0dXJuIGlzRGlnaXQoYzIpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gaXNEaWdpdChjMSk7CiAgICB9OwogICAgdmFyIHN0cmluZ1RvTnVtYmVyID0gZnVuY3Rpb24gKGNvZGVQb2ludHMpIHsKICAgICAgICB2YXIgYyA9IDA7CiAgICAgICAgdmFyIHNpZ24gPSAxOwogICAgICAgIGlmIChjb2RlUG9pbnRzW2NdID09PSBQTFVTX1NJR04gfHwgY29kZVBvaW50c1tjXSA9PT0gSFlQSEVOX01JTlVTKSB7CiAgICAgICAgICAgIGlmIChjb2RlUG9pbnRzW2NdID09PSBIWVBIRU5fTUlOVVMpIHsKICAgICAgICAgICAgICAgIHNpZ24gPSAtMTsKICAgICAgICAgICAgfQogICAgICAgICAgICBjKys7CiAgICAgICAgfQogICAgICAgIHZhciBpbnRlZ2VycyA9IFtdOwogICAgICAgIHdoaWxlIChpc0RpZ2l0KGNvZGVQb2ludHNbY10pKSB7CiAgICAgICAgICAgIGludGVnZXJzLnB1c2goY29kZVBvaW50c1tjKytdKTsKICAgICAgICB9CiAgICAgICAgdmFyIGludCA9IGludGVnZXJzLmxlbmd0aCA/IHBhcnNlSW50KGZyb21Db2RlUG9pbnQkMS5hcHBseSh2b2lkIDAsIGludGVnZXJzKSwgMTApIDogMDsKICAgICAgICBpZiAoY29kZVBvaW50c1tjXSA9PT0gRlVMTF9TVE9QKSB7CiAgICAgICAgICAgIGMrKzsKICAgICAgICB9CiAgICAgICAgdmFyIGZyYWN0aW9uID0gW107CiAgICAgICAgd2hpbGUgKGlzRGlnaXQoY29kZVBvaW50c1tjXSkpIHsKICAgICAgICAgICAgZnJhY3Rpb24ucHVzaChjb2RlUG9pbnRzW2MrK10pOwogICAgICAgIH0KICAgICAgICB2YXIgZnJhY2QgPSBmcmFjdGlvbi5sZW5ndGg7CiAgICAgICAgdmFyIGZyYWMgPSBmcmFjZCA/IHBhcnNlSW50KGZyb21Db2RlUG9pbnQkMS5hcHBseSh2b2lkIDAsIGZyYWN0aW9uKSwgMTApIDogMDsKICAgICAgICBpZiAoY29kZVBvaW50c1tjXSA9PT0gRSB8fCBjb2RlUG9pbnRzW2NdID09PSBlKSB7CiAgICAgICAgICAgIGMrKzsKICAgICAgICB9CiAgICAgICAgdmFyIGV4cHNpZ24gPSAxOwogICAgICAgIGlmIChjb2RlUG9pbnRzW2NdID09PSBQTFVTX1NJR04gfHwgY29kZVBvaW50c1tjXSA9PT0gSFlQSEVOX01JTlVTKSB7CiAgICAgICAgICAgIGlmIChjb2RlUG9pbnRzW2NdID09PSBIWVBIRU5fTUlOVVMpIHsKICAgICAgICAgICAgICAgIGV4cHNpZ24gPSAtMTsKICAgICAgICAgICAgfQogICAgICAgICAgICBjKys7CiAgICAgICAgfQogICAgICAgIHZhciBleHBvbmVudCA9IFtdOwogICAgICAgIHdoaWxlIChpc0RpZ2l0KGNvZGVQb2ludHNbY10pKSB7CiAgICAgICAgICAgIGV4cG9uZW50LnB1c2goY29kZVBvaW50c1tjKytdKTsKICAgICAgICB9CiAgICAgICAgdmFyIGV4cCA9IGV4cG9uZW50Lmxlbmd0aCA/IHBhcnNlSW50KGZyb21Db2RlUG9pbnQkMS5hcHBseSh2b2lkIDAsIGV4cG9uZW50KSwgMTApIDogMDsKICAgICAgICByZXR1cm4gc2lnbiAqIChpbnQgKyBmcmFjICogTWF0aC5wb3coMTAsIC1mcmFjZCkpICogTWF0aC5wb3coMTAsIGV4cHNpZ24gKiBleHApOwogICAgfTsKICAgIHZhciBMRUZUX1BBUkVOVEhFU0lTX1RPS0VOID0gewogICAgICAgIHR5cGU6IDIgLyogTEVGVF9QQVJFTlRIRVNJU19UT0tFTiAqLwogICAgfTsKICAgIHZhciBSSUdIVF9QQVJFTlRIRVNJU19UT0tFTiA9IHsKICAgICAgICB0eXBlOiAzIC8qIFJJR0hUX1BBUkVOVEhFU0lTX1RPS0VOICovCiAgICB9OwogICAgdmFyIENPTU1BX1RPS0VOID0geyB0eXBlOiA0IC8qIENPTU1BX1RPS0VOICovIH07CiAgICB2YXIgU1VGRklYX01BVENIX1RPS0VOID0geyB0eXBlOiAxMyAvKiBTVUZGSVhfTUFUQ0hfVE9LRU4gKi8gfTsKICAgIHZhciBQUkVGSVhfTUFUQ0hfVE9LRU4gPSB7IHR5cGU6IDggLyogUFJFRklYX01BVENIX1RPS0VOICovIH07CiAgICB2YXIgQ09MVU1OX1RPS0VOID0geyB0eXBlOiAyMSAvKiBDT0xVTU5fVE9LRU4gKi8gfTsKICAgIHZhciBEQVNIX01BVENIX1RPS0VOID0geyB0eXBlOiA5IC8qIERBU0hfTUFUQ0hfVE9LRU4gKi8gfTsKICAgIHZhciBJTkNMVURFX01BVENIX1RPS0VOID0geyB0eXBlOiAxMCAvKiBJTkNMVURFX01BVENIX1RPS0VOICovIH07CiAgICB2YXIgTEVGVF9DVVJMWV9CUkFDS0VUX1RPS0VOID0gewogICAgICAgIHR5cGU6IDExIC8qIExFRlRfQ1VSTFlfQlJBQ0tFVF9UT0tFTiAqLwogICAgfTsKICAgIHZhciBSSUdIVF9DVVJMWV9CUkFDS0VUX1RPS0VOID0gewogICAgICAgIHR5cGU6IDEyIC8qIFJJR0hUX0NVUkxZX0JSQUNLRVRfVE9LRU4gKi8KICAgIH07CiAgICB2YXIgU1VCU1RSSU5HX01BVENIX1RPS0VOID0geyB0eXBlOiAxNCAvKiBTVUJTVFJJTkdfTUFUQ0hfVE9LRU4gKi8gfTsKICAgIHZhciBCQURfVVJMX1RPS0VOID0geyB0eXBlOiAyMyAvKiBCQURfVVJMX1RPS0VOICovIH07CiAgICB2YXIgQkFEX1NUUklOR19UT0tFTiA9IHsgdHlwZTogMSAvKiBCQURfU1RSSU5HX1RPS0VOICovIH07CiAgICB2YXIgQ0RPX1RPS0VOID0geyB0eXBlOiAyNSAvKiBDRE9fVE9LRU4gKi8gfTsKICAgIHZhciBDRENfVE9LRU4gPSB7IHR5cGU6IDI0IC8qIENEQ19UT0tFTiAqLyB9OwogICAgdmFyIENPTE9OX1RPS0VOID0geyB0eXBlOiAyNiAvKiBDT0xPTl9UT0tFTiAqLyB9OwogICAgdmFyIFNFTUlDT0xPTl9UT0tFTiA9IHsgdHlwZTogMjcgLyogU0VNSUNPTE9OX1RPS0VOICovIH07CiAgICB2YXIgTEVGVF9TUVVBUkVfQlJBQ0tFVF9UT0tFTiA9IHsKICAgICAgICB0eXBlOiAyOCAvKiBMRUZUX1NRVUFSRV9CUkFDS0VUX1RPS0VOICovCiAgICB9OwogICAgdmFyIFJJR0hUX1NRVUFSRV9CUkFDS0VUX1RPS0VOID0gewogICAgICAgIHR5cGU6IDI5IC8qIFJJR0hUX1NRVUFSRV9CUkFDS0VUX1RPS0VOICovCiAgICB9OwogICAgdmFyIFdISVRFU1BBQ0VfVE9LRU4gPSB7IHR5cGU6IDMxIC8qIFdISVRFU1BBQ0VfVE9LRU4gKi8gfTsKICAgIHZhciBFT0ZfVE9LRU4gPSB7IHR5cGU6IDMyIC8qIEVPRl9UT0tFTiAqLyB9OwogICAgdmFyIFRva2VuaXplciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKICAgICAgICBmdW5jdGlvbiBUb2tlbml6ZXIoKSB7CiAgICAgICAgICAgIHRoaXMuX3ZhbHVlID0gW107CiAgICAgICAgfQogICAgICAgIFRva2VuaXplci5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbiAoY2h1bmspIHsKICAgICAgICAgICAgdGhpcy5fdmFsdWUgPSB0aGlzLl92YWx1ZS5jb25jYXQodG9Db2RlUG9pbnRzJDEoY2h1bmspKTsKICAgICAgICB9OwogICAgICAgIFRva2VuaXplci5wcm90b3R5cGUucmVhZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIHRva2VucyA9IFtdOwogICAgICAgICAgICB2YXIgdG9rZW4gPSB0aGlzLmNvbnN1bWVUb2tlbigpOwogICAgICAgICAgICB3aGlsZSAodG9rZW4gIT09IEVPRl9UT0tFTikgewogICAgICAgICAgICAgICAgdG9rZW5zLnB1c2godG9rZW4pOwogICAgICAgICAgICAgICAgdG9rZW4gPSB0aGlzLmNvbnN1bWVUb2tlbigpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiB0b2tlbnM7CiAgICAgICAgfTsKICAgICAgICBUb2tlbml6ZXIucHJvdG90eXBlLmNvbnN1bWVUb2tlbiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIGNvZGVQb2ludCA9IHRoaXMuY29uc3VtZUNvZGVQb2ludCgpOwogICAgICAgICAgICBzd2l0Y2ggKGNvZGVQb2ludCkgewogICAgICAgICAgICAgICAgY2FzZSBRVU9UQVRJT05fTUFSSzoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb25zdW1lU3RyaW5nVG9rZW4oUVVPVEFUSU9OX01BUkspOwogICAgICAgICAgICAgICAgY2FzZSBOVU1CRVJfU0lHTjoKICAgICAgICAgICAgICAgICAgICB2YXIgYzEgPSB0aGlzLnBlZWtDb2RlUG9pbnQoMCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGMyID0gdGhpcy5wZWVrQ29kZVBvaW50KDEpOwogICAgICAgICAgICAgICAgICAgIHZhciBjMyA9IHRoaXMucGVla0NvZGVQb2ludCgyKTsKICAgICAgICAgICAgICAgICAgICBpZiAoaXNOYW1lQ29kZVBvaW50KGMxKSB8fCBpc1ZhbGlkRXNjYXBlKGMyLCBjMykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZsYWdzID0gaXNJZGVudGlmaWVyU3RhcnQoYzEsIGMyLCBjMykgPyBGTEFHX0lEIDogRkxBR19VTlJFU1RSSUNURUQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IHRoaXMuY29uc3VtZU5hbWUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgdHlwZTogNSAvKiBIQVNIX1RPS0VOICovLCB2YWx1ZTogdmFsdWUsIGZsYWdzOiBmbGFncyB9OwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgRE9MTEFSX1NJR046CiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGVla0NvZGVQb2ludCgwKSA9PT0gRVFVQUxTX1NJR04pIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25zdW1lQ29kZVBvaW50KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBTVUZGSVhfTUFUQ0hfVE9LRU47CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSBBUE9TVFJPUEhFOgogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnN1bWVTdHJpbmdUb2tlbihBUE9TVFJPUEhFKTsKICAgICAgICAgICAgICAgIGNhc2UgTEVGVF9QQVJFTlRIRVNJUzoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gTEVGVF9QQVJFTlRIRVNJU19UT0tFTjsKICAgICAgICAgICAgICAgIGNhc2UgUklHSFRfUEFSRU5USEVTSVM6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFJJR0hUX1BBUkVOVEhFU0lTX1RPS0VOOwogICAgICAgICAgICAgICAgY2FzZSBBU1RFUklTSzoKICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wZWVrQ29kZVBvaW50KDApID09PSBFUVVBTFNfU0lHTikgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnN1bWVDb2RlUG9pbnQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFNVQlNUUklOR19NQVRDSF9UT0tFTjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlIFBMVVNfU0lHTjoKICAgICAgICAgICAgICAgICAgICBpZiAoaXNOdW1iZXJTdGFydChjb2RlUG9pbnQsIHRoaXMucGVla0NvZGVQb2ludCgwKSwgdGhpcy5wZWVrQ29kZVBvaW50KDEpKSkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlY29uc3VtZUNvZGVQb2ludChjb2RlUG9pbnQpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb25zdW1lTnVtZXJpY1Rva2VuKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSBDT01NQToKICAgICAgICAgICAgICAgICAgICByZXR1cm4gQ09NTUFfVE9LRU47CiAgICAgICAgICAgICAgICBjYXNlIEhZUEhFTl9NSU5VUzoKICAgICAgICAgICAgICAgICAgICB2YXIgZTEgPSBjb2RlUG9pbnQ7CiAgICAgICAgICAgICAgICAgICAgdmFyIGUyID0gdGhpcy5wZWVrQ29kZVBvaW50KDApOwogICAgICAgICAgICAgICAgICAgIHZhciBlMyA9IHRoaXMucGVla0NvZGVQb2ludCgxKTsKICAgICAgICAgICAgICAgICAgICBpZiAoaXNOdW1iZXJTdGFydChlMSwgZTIsIGUzKSkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlY29uc3VtZUNvZGVQb2ludChjb2RlUG9pbnQpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb25zdW1lTnVtZXJpY1Rva2VuKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmIChpc0lkZW50aWZpZXJTdGFydChlMSwgZTIsIGUzKSkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlY29uc3VtZUNvZGVQb2ludChjb2RlUG9pbnQpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb25zdW1lSWRlbnRMaWtlVG9rZW4oKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKGUyID09PSBIWVBIRU5fTUlOVVMgJiYgZTMgPT09IEdSRUFURVJfVEhBTl9TSUdOKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29uc3VtZUNvZGVQb2ludCgpOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnN1bWVDb2RlUG9pbnQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIENEQ19UT0tFTjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlIEZVTExfU1RPUDoKICAgICAgICAgICAgICAgICAgICBpZiAoaXNOdW1iZXJTdGFydChjb2RlUG9pbnQsIHRoaXMucGVla0NvZGVQb2ludCgwKSwgdGhpcy5wZWVrQ29kZVBvaW50KDEpKSkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlY29uc3VtZUNvZGVQb2ludChjb2RlUG9pbnQpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb25zdW1lTnVtZXJpY1Rva2VuKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSBTT0xJRFVTOgogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBlZWtDb2RlUG9pbnQoMCkgPT09IEFTVEVSSVNLKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29uc3VtZUNvZGVQb2ludCgpOwogICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAodHJ1ZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSB0aGlzLmNvbnN1bWVDb2RlUG9pbnQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjID09PSBBU1RFUklTSykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMgPSB0aGlzLmNvbnN1bWVDb2RlUG9pbnQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYyA9PT0gU09MSURVUykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb25zdW1lVG9rZW4oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYyA9PT0gRU9GKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29uc3VtZVRva2VuKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlIENPTE9OOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBDT0xPTl9UT0tFTjsKICAgICAgICAgICAgICAgIGNhc2UgU0VNSUNPTE9OOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBTRU1JQ09MT05fVE9LRU47CiAgICAgICAgICAgICAgICBjYXNlIExFU1NfVEhBTl9TSUdOOgogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBlZWtDb2RlUG9pbnQoMCkgPT09IEVYQ0xBTUFUSU9OX01BUksgJiYKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wZWVrQ29kZVBvaW50KDEpID09PSBIWVBIRU5fTUlOVVMgJiYKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wZWVrQ29kZVBvaW50KDIpID09PSBIWVBIRU5fTUlOVVMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25zdW1lQ29kZVBvaW50KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29uc3VtZUNvZGVQb2ludCgpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQ0RPX1RPS0VOOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgQ09NTUVSQ0lBTF9BVDoKICAgICAgICAgICAgICAgICAgICB2YXIgYTEgPSB0aGlzLnBlZWtDb2RlUG9pbnQoMCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGEyID0gdGhpcy5wZWVrQ29kZVBvaW50KDEpOwogICAgICAgICAgICAgICAgICAgIHZhciBhMyA9IHRoaXMucGVla0NvZGVQb2ludCgyKTsKICAgICAgICAgICAgICAgICAgICBpZiAoaXNJZGVudGlmaWVyU3RhcnQoYTEsIGEyLCBhMykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gdGhpcy5jb25zdW1lTmFtZSgpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyB0eXBlOiA3IC8qIEFUX0tFWVdPUkRfVE9LRU4gKi8sIHZhbHVlOiB2YWx1ZSB9OwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgTEVGVF9TUVVBUkVfQlJBQ0tFVDoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gTEVGVF9TUVVBUkVfQlJBQ0tFVF9UT0tFTjsKICAgICAgICAgICAgICAgIGNhc2UgUkVWRVJTRV9TT0xJRFVTOgogICAgICAgICAgICAgICAgICAgIGlmIChpc1ZhbGlkRXNjYXBlKGNvZGVQb2ludCwgdGhpcy5wZWVrQ29kZVBvaW50KDApKSkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlY29uc3VtZUNvZGVQb2ludChjb2RlUG9pbnQpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb25zdW1lSWRlbnRMaWtlVG9rZW4oKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlIFJJR0hUX1NRVUFSRV9CUkFDS0VUOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBSSUdIVF9TUVVBUkVfQlJBQ0tFVF9UT0tFTjsKICAgICAgICAgICAgICAgIGNhc2UgQ0lSQ1VNRkxFWF9BQ0NFTlQ6CiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGVla0NvZGVQb2ludCgwKSA9PT0gRVFVQUxTX1NJR04pIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25zdW1lQ29kZVBvaW50KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQUkVGSVhfTUFUQ0hfVE9LRU47CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSBMRUZUX0NVUkxZX0JSQUNLRVQ6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIExFRlRfQ1VSTFlfQlJBQ0tFVF9UT0tFTjsKICAgICAgICAgICAgICAgIGNhc2UgUklHSFRfQ1VSTFlfQlJBQ0tFVDoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gUklHSFRfQ1VSTFlfQlJBQ0tFVF9UT0tFTjsKICAgICAgICAgICAgICAgIGNhc2UgdToKICAgICAgICAgICAgICAgIGNhc2UgVToKICAgICAgICAgICAgICAgICAgICB2YXIgdTEgPSB0aGlzLnBlZWtDb2RlUG9pbnQoMCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHUyID0gdGhpcy5wZWVrQ29kZVBvaW50KDEpOwogICAgICAgICAgICAgICAgICAgIGlmICh1MSA9PT0gUExVU19TSUdOICYmIChpc0hleCh1MikgfHwgdTIgPT09IFFVRVNUSU9OX01BUkspKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29uc3VtZUNvZGVQb2ludCgpOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnN1bWVVbmljb2RlUmFuZ2VUb2tlbigpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB0aGlzLnJlY29uc3VtZUNvZGVQb2ludChjb2RlUG9pbnQpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnN1bWVJZGVudExpa2VUb2tlbigpOwogICAgICAgICAgICAgICAgY2FzZSBWRVJUSUNBTF9MSU5FOgogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBlZWtDb2RlUG9pbnQoMCkgPT09IEVRVUFMU19TSUdOKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29uc3VtZUNvZGVQb2ludCgpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gREFTSF9NQVRDSF9UT0tFTjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGVla0NvZGVQb2ludCgwKSA9PT0gVkVSVElDQUxfTElORSkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnN1bWVDb2RlUG9pbnQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIENPTFVNTl9UT0tFTjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlIFRJTERFOgogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBlZWtDb2RlUG9pbnQoMCkgPT09IEVRVUFMU19TSUdOKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29uc3VtZUNvZGVQb2ludCgpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5DTFVERV9NQVRDSF9UT0tFTjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlIEVPRjoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gRU9GX1RPS0VOOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChpc1doaXRlU3BhY2UoY29kZVBvaW50KSkgewogICAgICAgICAgICAgICAgdGhpcy5jb25zdW1lV2hpdGVTcGFjZSgpOwogICAgICAgICAgICAgICAgcmV0dXJuIFdISVRFU1BBQ0VfVE9LRU47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGlzRGlnaXQoY29kZVBvaW50KSkgewogICAgICAgICAgICAgICAgdGhpcy5yZWNvbnN1bWVDb2RlUG9pbnQoY29kZVBvaW50KTsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnN1bWVOdW1lcmljVG9rZW4oKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoaXNOYW1lU3RhcnRDb2RlUG9pbnQoY29kZVBvaW50KSkgewogICAgICAgICAgICAgICAgdGhpcy5yZWNvbnN1bWVDb2RlUG9pbnQoY29kZVBvaW50KTsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnN1bWVJZGVudExpa2VUb2tlbigpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiB7IHR5cGU6IDYgLyogREVMSU1fVE9LRU4gKi8sIHZhbHVlOiBmcm9tQ29kZVBvaW50JDEoY29kZVBvaW50KSB9OwogICAgICAgIH07CiAgICAgICAgVG9rZW5pemVyLnByb3RvdHlwZS5jb25zdW1lQ29kZVBvaW50ID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLl92YWx1ZS5zaGlmdCgpOwogICAgICAgICAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAndW5kZWZpbmVkJyA/IC0xIDogdmFsdWU7CiAgICAgICAgfTsKICAgICAgICBUb2tlbml6ZXIucHJvdG90eXBlLnJlY29uc3VtZUNvZGVQb2ludCA9IGZ1bmN0aW9uIChjb2RlUG9pbnQpIHsKICAgICAgICAgICAgdGhpcy5fdmFsdWUudW5zaGlmdChjb2RlUG9pbnQpOwogICAgICAgIH07CiAgICAgICAgVG9rZW5pemVyLnByb3RvdHlwZS5wZWVrQ29kZVBvaW50ID0gZnVuY3Rpb24gKGRlbHRhKSB7CiAgICAgICAgICAgIGlmIChkZWx0YSA+PSB0aGlzLl92YWx1ZS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgIHJldHVybiAtMTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gdGhpcy5fdmFsdWVbZGVsdGFdOwogICAgICAgIH07CiAgICAgICAgVG9rZW5pemVyLnByb3RvdHlwZS5jb25zdW1lVW5pY29kZVJhbmdlVG9rZW4gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBkaWdpdHMgPSBbXTsKICAgICAgICAgICAgdmFyIGNvZGVQb2ludCA9IHRoaXMuY29uc3VtZUNvZGVQb2ludCgpOwogICAgICAgICAgICB3aGlsZSAoaXNIZXgoY29kZVBvaW50KSAmJiBkaWdpdHMubGVuZ3RoIDwgNikgewogICAgICAgICAgICAgICAgZGlnaXRzLnB1c2goY29kZVBvaW50KTsKICAgICAgICAgICAgICAgIGNvZGVQb2ludCA9IHRoaXMuY29uc3VtZUNvZGVQb2ludCgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciBxdWVzdGlvbk1hcmtzID0gZmFsc2U7CiAgICAgICAgICAgIHdoaWxlIChjb2RlUG9pbnQgPT09IFFVRVNUSU9OX01BUksgJiYgZGlnaXRzLmxlbmd0aCA8IDYpIHsKICAgICAgICAgICAgICAgIGRpZ2l0cy5wdXNoKGNvZGVQb2ludCk7CiAgICAgICAgICAgICAgICBjb2RlUG9pbnQgPSB0aGlzLmNvbnN1bWVDb2RlUG9pbnQoKTsKICAgICAgICAgICAgICAgIHF1ZXN0aW9uTWFya3MgPSB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChxdWVzdGlvbk1hcmtzKSB7CiAgICAgICAgICAgICAgICB2YXIgc3RhcnRfMSA9IHBhcnNlSW50KGZyb21Db2RlUG9pbnQkMS5hcHBseSh2b2lkIDAsIGRpZ2l0cy5tYXAoZnVuY3Rpb24gKGRpZ2l0KSB7IHJldHVybiAoZGlnaXQgPT09IFFVRVNUSU9OX01BUksgPyBaRVJPIDogZGlnaXQpOyB9KSksIDE2KTsKICAgICAgICAgICAgICAgIHZhciBlbmQgPSBwYXJzZUludChmcm9tQ29kZVBvaW50JDEuYXBwbHkodm9pZCAwLCBkaWdpdHMubWFwKGZ1bmN0aW9uIChkaWdpdCkgeyByZXR1cm4gKGRpZ2l0ID09PSBRVUVTVElPTl9NQVJLID8gRiA6IGRpZ2l0KTsgfSkpLCAxNik7CiAgICAgICAgICAgICAgICByZXR1cm4geyB0eXBlOiAzMCAvKiBVTklDT0RFX1JBTkdFX1RPS0VOICovLCBzdGFydDogc3RhcnRfMSwgZW5kOiBlbmQgfTsKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgc3RhcnQgPSBwYXJzZUludChmcm9tQ29kZVBvaW50JDEuYXBwbHkodm9pZCAwLCBkaWdpdHMpLCAxNik7CiAgICAgICAgICAgIGlmICh0aGlzLnBlZWtDb2RlUG9pbnQoMCkgPT09IEhZUEhFTl9NSU5VUyAmJiBpc0hleCh0aGlzLnBlZWtDb2RlUG9pbnQoMSkpKSB7CiAgICAgICAgICAgICAgICB0aGlzLmNvbnN1bWVDb2RlUG9pbnQoKTsKICAgICAgICAgICAgICAgIGNvZGVQb2ludCA9IHRoaXMuY29uc3VtZUNvZGVQb2ludCgpOwogICAgICAgICAgICAgICAgdmFyIGVuZERpZ2l0cyA9IFtdOwogICAgICAgICAgICAgICAgd2hpbGUgKGlzSGV4KGNvZGVQb2ludCkgJiYgZW5kRGlnaXRzLmxlbmd0aCA8IDYpIHsKICAgICAgICAgICAgICAgICAgICBlbmREaWdpdHMucHVzaChjb2RlUG9pbnQpOwogICAgICAgICAgICAgICAgICAgIGNvZGVQb2ludCA9IHRoaXMuY29uc3VtZUNvZGVQb2ludCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdmFyIGVuZCA9IHBhcnNlSW50KGZyb21Db2RlUG9pbnQkMS5hcHBseSh2b2lkIDAsIGVuZERpZ2l0cyksIDE2KTsKICAgICAgICAgICAgICAgIHJldHVybiB7IHR5cGU6IDMwIC8qIFVOSUNPREVfUkFOR0VfVE9LRU4gKi8sIHN0YXJ0OiBzdGFydCwgZW5kOiBlbmQgfTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiB7IHR5cGU6IDMwIC8qIFVOSUNPREVfUkFOR0VfVE9LRU4gKi8sIHN0YXJ0OiBzdGFydCwgZW5kOiBzdGFydCB9OwogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICBUb2tlbml6ZXIucHJvdG90eXBlLmNvbnN1bWVJZGVudExpa2VUb2tlbiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIHZhbHVlID0gdGhpcy5jb25zdW1lTmFtZSgpOwogICAgICAgICAgICBpZiAodmFsdWUudG9Mb3dlckNhc2UoKSA9PT0gJ3VybCcgJiYgdGhpcy5wZWVrQ29kZVBvaW50KDApID09PSBMRUZUX1BBUkVOVEhFU0lTKSB7CiAgICAgICAgICAgICAgICB0aGlzLmNvbnN1bWVDb2RlUG9pbnQoKTsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnN1bWVVcmxUb2tlbigpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMucGVla0NvZGVQb2ludCgwKSA9PT0gTEVGVF9QQVJFTlRIRVNJUykgewogICAgICAgICAgICAgICAgdGhpcy5jb25zdW1lQ29kZVBvaW50KCk7CiAgICAgICAgICAgICAgICByZXR1cm4geyB0eXBlOiAxOSAvKiBGVU5DVElPTl9UT0tFTiAqLywgdmFsdWU6IHZhbHVlIH07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHsgdHlwZTogMjAgLyogSURFTlRfVE9LRU4gKi8sIHZhbHVlOiB2YWx1ZSB9OwogICAgICAgIH07CiAgICAgICAgVG9rZW5pemVyLnByb3RvdHlwZS5jb25zdW1lVXJsVG9rZW4gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciB2YWx1ZSA9IFtdOwogICAgICAgICAgICB0aGlzLmNvbnN1bWVXaGl0ZVNwYWNlKCk7CiAgICAgICAgICAgIGlmICh0aGlzLnBlZWtDb2RlUG9pbnQoMCkgPT09IEVPRikgewogICAgICAgICAgICAgICAgcmV0dXJuIHsgdHlwZTogMjIgLyogVVJMX1RPS0VOICovLCB2YWx1ZTogJycgfTsKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgbmV4dCA9IHRoaXMucGVla0NvZGVQb2ludCgwKTsKICAgICAgICAgICAgaWYgKG5leHQgPT09IEFQT1NUUk9QSEUgfHwgbmV4dCA9PT0gUVVPVEFUSU9OX01BUkspIHsKICAgICAgICAgICAgICAgIHZhciBzdHJpbmdUb2tlbiA9IHRoaXMuY29uc3VtZVN0cmluZ1Rva2VuKHRoaXMuY29uc3VtZUNvZGVQb2ludCgpKTsKICAgICAgICAgICAgICAgIGlmIChzdHJpbmdUb2tlbi50eXBlID09PSAwIC8qIFNUUklOR19UT0tFTiAqLykgewogICAgICAgICAgICAgICAgICAgIHRoaXMuY29uc3VtZVdoaXRlU3BhY2UoKTsKICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wZWVrQ29kZVBvaW50KDApID09PSBFT0YgfHwgdGhpcy5wZWVrQ29kZVBvaW50KDApID09PSBSSUdIVF9QQVJFTlRIRVNJUykgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnN1bWVDb2RlUG9pbnQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgdHlwZTogMjIgLyogVVJMX1RPS0VOICovLCB2YWx1ZTogc3RyaW5nVG9rZW4udmFsdWUgfTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0aGlzLmNvbnN1bWVCYWRVcmxSZW1uYW50cygpOwogICAgICAgICAgICAgICAgcmV0dXJuIEJBRF9VUkxfVE9LRU47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgd2hpbGUgKHRydWUpIHsKICAgICAgICAgICAgICAgIHZhciBjb2RlUG9pbnQgPSB0aGlzLmNvbnN1bWVDb2RlUG9pbnQoKTsKICAgICAgICAgICAgICAgIGlmIChjb2RlUG9pbnQgPT09IEVPRiB8fCBjb2RlUG9pbnQgPT09IFJJR0hUX1BBUkVOVEhFU0lTKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgdHlwZTogMjIgLyogVVJMX1RPS0VOICovLCB2YWx1ZTogZnJvbUNvZGVQb2ludCQxLmFwcGx5KHZvaWQgMCwgdmFsdWUpIH07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIGlmIChpc1doaXRlU3BhY2UoY29kZVBvaW50KSkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuY29uc3VtZVdoaXRlU3BhY2UoKTsKICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wZWVrQ29kZVBvaW50KDApID09PSBFT0YgfHwgdGhpcy5wZWVrQ29kZVBvaW50KDApID09PSBSSUdIVF9QQVJFTlRIRVNJUykgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnN1bWVDb2RlUG9pbnQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgdHlwZTogMjIgLyogVVJMX1RPS0VOICovLCB2YWx1ZTogZnJvbUNvZGVQb2ludCQxLmFwcGx5KHZvaWQgMCwgdmFsdWUpIH07CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHRoaXMuY29uc3VtZUJhZFVybFJlbW5hbnRzKCk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEJBRF9VUkxfVE9LRU47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIGlmIChjb2RlUG9pbnQgPT09IFFVT1RBVElPTl9NQVJLIHx8CiAgICAgICAgICAgICAgICAgICAgY29kZVBvaW50ID09PSBBUE9TVFJPUEhFIHx8CiAgICAgICAgICAgICAgICAgICAgY29kZVBvaW50ID09PSBMRUZUX1BBUkVOVEhFU0lTIHx8CiAgICAgICAgICAgICAgICAgICAgaXNOb25QcmludGFibGVDb2RlUG9pbnQoY29kZVBvaW50KSkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuY29uc3VtZUJhZFVybFJlbW5hbnRzKCk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEJBRF9VUkxfVE9LRU47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIGlmIChjb2RlUG9pbnQgPT09IFJFVkVSU0VfU09MSURVUykgewogICAgICAgICAgICAgICAgICAgIGlmIChpc1ZhbGlkRXNjYXBlKGNvZGVQb2ludCwgdGhpcy5wZWVrQ29kZVBvaW50KDApKSkgewogICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZS5wdXNoKHRoaXMuY29uc3VtZUVzY2FwZWRDb2RlUG9pbnQoKSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnN1bWVCYWRVcmxSZW1uYW50cygpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQkFEX1VSTF9UT0tFTjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB2YWx1ZS5wdXNoKGNvZGVQb2ludCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIFRva2VuaXplci5wcm90b3R5cGUuY29uc3VtZVdoaXRlU3BhY2UgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHdoaWxlIChpc1doaXRlU3BhY2UodGhpcy5wZWVrQ29kZVBvaW50KDApKSkgewogICAgICAgICAgICAgICAgdGhpcy5jb25zdW1lQ29kZVBvaW50KCk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIFRva2VuaXplci5wcm90b3R5cGUuY29uc3VtZUJhZFVybFJlbW5hbnRzID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB3aGlsZSAodHJ1ZSkgewogICAgICAgICAgICAgICAgdmFyIGNvZGVQb2ludCA9IHRoaXMuY29uc3VtZUNvZGVQb2ludCgpOwogICAgICAgICAgICAgICAgaWYgKGNvZGVQb2ludCA9PT0gUklHSFRfUEFSRU5USEVTSVMgfHwgY29kZVBvaW50ID09PSBFT0YpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoaXNWYWxpZEVzY2FwZShjb2RlUG9pbnQsIHRoaXMucGVla0NvZGVQb2ludCgwKSkpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnN1bWVFc2NhcGVkQ29kZVBvaW50KCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIFRva2VuaXplci5wcm90b3R5cGUuY29uc3VtZVN0cmluZ1NsaWNlID0gZnVuY3Rpb24gKGNvdW50KSB7CiAgICAgICAgICAgIHZhciBTTElDRV9TVEFDS19TSVpFID0gNTAwMDA7CiAgICAgICAgICAgIHZhciB2YWx1ZSA9ICcnOwogICAgICAgICAgICB3aGlsZSAoY291bnQgPiAwKSB7CiAgICAgICAgICAgICAgICB2YXIgYW1vdW50ID0gTWF0aC5taW4oU0xJQ0VfU1RBQ0tfU0laRSwgY291bnQpOwogICAgICAgICAgICAgICAgdmFsdWUgKz0gZnJvbUNvZGVQb2ludCQxLmFwcGx5KHZvaWQgMCwgdGhpcy5fdmFsdWUuc3BsaWNlKDAsIGFtb3VudCkpOwogICAgICAgICAgICAgICAgY291bnQgLT0gYW1vdW50OwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMuX3ZhbHVlLnNoaWZ0KCk7CiAgICAgICAgICAgIHJldHVybiB2YWx1ZTsKICAgICAgICB9OwogICAgICAgIFRva2VuaXplci5wcm90b3R5cGUuY29uc3VtZVN0cmluZ1Rva2VuID0gZnVuY3Rpb24gKGVuZGluZ0NvZGVQb2ludCkgewogICAgICAgICAgICB2YXIgdmFsdWUgPSAnJzsKICAgICAgICAgICAgdmFyIGkgPSAwOwogICAgICAgICAgICBkbyB7CiAgICAgICAgICAgICAgICB2YXIgY29kZVBvaW50ID0gdGhpcy5fdmFsdWVbaV07CiAgICAgICAgICAgICAgICBpZiAoY29kZVBvaW50ID09PSBFT0YgfHwgY29kZVBvaW50ID09PSB1bmRlZmluZWQgfHwgY29kZVBvaW50ID09PSBlbmRpbmdDb2RlUG9pbnQpIHsKICAgICAgICAgICAgICAgICAgICB2YWx1ZSArPSB0aGlzLmNvbnN1bWVTdHJpbmdTbGljZShpKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4geyB0eXBlOiAwIC8qIFNUUklOR19UT0tFTiAqLywgdmFsdWU6IHZhbHVlIH07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoY29kZVBvaW50ID09PSBMSU5FX0ZFRUQpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLl92YWx1ZS5zcGxpY2UoMCwgaSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEJBRF9TVFJJTkdfVE9LRU47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoY29kZVBvaW50ID09PSBSRVZFUlNFX1NPTElEVVMpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgbmV4dCA9IHRoaXMuX3ZhbHVlW2kgKyAxXTsKICAgICAgICAgICAgICAgICAgICBpZiAobmV4dCAhPT0gRU9GICYmIG5leHQgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV4dCA9PT0gTElORV9GRUVEKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSArPSB0aGlzLmNvbnN1bWVTdHJpbmdTbGljZShpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSAtMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3ZhbHVlLnNoaWZ0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNWYWxpZEVzY2FwZShjb2RlUG9pbnQsIG5leHQpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSArPSB0aGlzLmNvbnN1bWVTdHJpbmdTbGljZShpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlICs9IGZyb21Db2RlUG9pbnQkMSh0aGlzLmNvbnN1bWVFc2NhcGVkQ29kZVBvaW50KCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IC0xOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaSsrOwogICAgICAgICAgICB9IHdoaWxlICh0cnVlKTsKICAgICAgICB9OwogICAgICAgIFRva2VuaXplci5wcm90b3R5cGUuY29uc3VtZU51bWJlciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIHJlcHIgPSBbXTsKICAgICAgICAgICAgdmFyIHR5cGUgPSBGTEFHX0lOVEVHRVI7CiAgICAgICAgICAgIHZhciBjMSA9IHRoaXMucGVla0NvZGVQb2ludCgwKTsKICAgICAgICAgICAgaWYgKGMxID09PSBQTFVTX1NJR04gfHwgYzEgPT09IEhZUEhFTl9NSU5VUykgewogICAgICAgICAgICAgICAgcmVwci5wdXNoKHRoaXMuY29uc3VtZUNvZGVQb2ludCgpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICB3aGlsZSAoaXNEaWdpdCh0aGlzLnBlZWtDb2RlUG9pbnQoMCkpKSB7CiAgICAgICAgICAgICAgICByZXByLnB1c2godGhpcy5jb25zdW1lQ29kZVBvaW50KCkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGMxID0gdGhpcy5wZWVrQ29kZVBvaW50KDApOwogICAgICAgICAgICB2YXIgYzIgPSB0aGlzLnBlZWtDb2RlUG9pbnQoMSk7CiAgICAgICAgICAgIGlmIChjMSA9PT0gRlVMTF9TVE9QICYmIGlzRGlnaXQoYzIpKSB7CiAgICAgICAgICAgICAgICByZXByLnB1c2godGhpcy5jb25zdW1lQ29kZVBvaW50KCksIHRoaXMuY29uc3VtZUNvZGVQb2ludCgpKTsKICAgICAgICAgICAgICAgIHR5cGUgPSBGTEFHX05VTUJFUjsKICAgICAgICAgICAgICAgIHdoaWxlIChpc0RpZ2l0KHRoaXMucGVla0NvZGVQb2ludCgwKSkpIHsKICAgICAgICAgICAgICAgICAgICByZXByLnB1c2godGhpcy5jb25zdW1lQ29kZVBvaW50KCkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGMxID0gdGhpcy5wZWVrQ29kZVBvaW50KDApOwogICAgICAgICAgICBjMiA9IHRoaXMucGVla0NvZGVQb2ludCgxKTsKICAgICAgICAgICAgdmFyIGMzID0gdGhpcy5wZWVrQ29kZVBvaW50KDIpOwogICAgICAgICAgICBpZiAoKGMxID09PSBFIHx8IGMxID09PSBlKSAmJiAoKChjMiA9PT0gUExVU19TSUdOIHx8IGMyID09PSBIWVBIRU5fTUlOVVMpICYmIGlzRGlnaXQoYzMpKSB8fCBpc0RpZ2l0KGMyKSkpIHsKICAgICAgICAgICAgICAgIHJlcHIucHVzaCh0aGlzLmNvbnN1bWVDb2RlUG9pbnQoKSwgdGhpcy5jb25zdW1lQ29kZVBvaW50KCkpOwogICAgICAgICAgICAgICAgdHlwZSA9IEZMQUdfTlVNQkVSOwogICAgICAgICAgICAgICAgd2hpbGUgKGlzRGlnaXQodGhpcy5wZWVrQ29kZVBvaW50KDApKSkgewogICAgICAgICAgICAgICAgICAgIHJlcHIucHVzaCh0aGlzLmNvbnN1bWVDb2RlUG9pbnQoKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIFtzdHJpbmdUb051bWJlcihyZXByKSwgdHlwZV07CiAgICAgICAgfTsKICAgICAgICBUb2tlbml6ZXIucHJvdG90eXBlLmNvbnN1bWVOdW1lcmljVG9rZW4gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBfYSA9IHRoaXMuY29uc3VtZU51bWJlcigpLCBudW1iZXIgPSBfYVswXSwgZmxhZ3MgPSBfYVsxXTsKICAgICAgICAgICAgdmFyIGMxID0gdGhpcy5wZWVrQ29kZVBvaW50KDApOwogICAgICAgICAgICB2YXIgYzIgPSB0aGlzLnBlZWtDb2RlUG9pbnQoMSk7CiAgICAgICAgICAgIHZhciBjMyA9IHRoaXMucGVla0NvZGVQb2ludCgyKTsKICAgICAgICAgICAgaWYgKGlzSWRlbnRpZmllclN0YXJ0KGMxLCBjMiwgYzMpKSB7CiAgICAgICAgICAgICAgICB2YXIgdW5pdCA9IHRoaXMuY29uc3VtZU5hbWUoKTsKICAgICAgICAgICAgICAgIHJldHVybiB7IHR5cGU6IDE1IC8qIERJTUVOU0lPTl9UT0tFTiAqLywgbnVtYmVyOiBudW1iZXIsIGZsYWdzOiBmbGFncywgdW5pdDogdW5pdCB9OwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChjMSA9PT0gUEVSQ0VOVEFHRV9TSUdOKSB7CiAgICAgICAgICAgICAgICB0aGlzLmNvbnN1bWVDb2RlUG9pbnQoKTsKICAgICAgICAgICAgICAgIHJldHVybiB7IHR5cGU6IDE2IC8qIFBFUkNFTlRBR0VfVE9LRU4gKi8sIG51bWJlcjogbnVtYmVyLCBmbGFnczogZmxhZ3MgfTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4geyB0eXBlOiAxNyAvKiBOVU1CRVJfVE9LRU4gKi8sIG51bWJlcjogbnVtYmVyLCBmbGFnczogZmxhZ3MgfTsKICAgICAgICB9OwogICAgICAgIFRva2VuaXplci5wcm90b3R5cGUuY29uc3VtZUVzY2FwZWRDb2RlUG9pbnQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBjb2RlUG9pbnQgPSB0aGlzLmNvbnN1bWVDb2RlUG9pbnQoKTsKICAgICAgICAgICAgaWYgKGlzSGV4KGNvZGVQb2ludCkpIHsKICAgICAgICAgICAgICAgIHZhciBoZXggPSBmcm9tQ29kZVBvaW50JDEoY29kZVBvaW50KTsKICAgICAgICAgICAgICAgIHdoaWxlIChpc0hleCh0aGlzLnBlZWtDb2RlUG9pbnQoMCkpICYmIGhleC5sZW5ndGggPCA2KSB7CiAgICAgICAgICAgICAgICAgICAgaGV4ICs9IGZyb21Db2RlUG9pbnQkMSh0aGlzLmNvbnN1bWVDb2RlUG9pbnQoKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoaXNXaGl0ZVNwYWNlKHRoaXMucGVla0NvZGVQb2ludCgwKSkpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnN1bWVDb2RlUG9pbnQoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHZhciBoZXhDb2RlUG9pbnQgPSBwYXJzZUludChoZXgsIDE2KTsKICAgICAgICAgICAgICAgIGlmIChoZXhDb2RlUG9pbnQgPT09IDAgfHwgaXNTdXJyb2dhdGVDb2RlUG9pbnQoaGV4Q29kZVBvaW50KSB8fCBoZXhDb2RlUG9pbnQgPiAweDEwZmZmZikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBSRVBMQUNFTUVOVF9DSEFSQUNURVI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gaGV4Q29kZVBvaW50OwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChjb2RlUG9pbnQgPT09IEVPRikgewogICAgICAgICAgICAgICAgcmV0dXJuIFJFUExBQ0VNRU5UX0NIQVJBQ1RFUjsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gY29kZVBvaW50OwogICAgICAgIH07CiAgICAgICAgVG9rZW5pemVyLnByb3RvdHlwZS5jb25zdW1lTmFtZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIHJlc3VsdCA9ICcnOwogICAgICAgICAgICB3aGlsZSAodHJ1ZSkgewogICAgICAgICAgICAgICAgdmFyIGNvZGVQb2ludCA9IHRoaXMuY29uc3VtZUNvZGVQb2ludCgpOwogICAgICAgICAgICAgICAgaWYgKGlzTmFtZUNvZGVQb2ludChjb2RlUG9pbnQpKSB7CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IGZyb21Db2RlUG9pbnQkMShjb2RlUG9pbnQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNWYWxpZEVzY2FwZShjb2RlUG9pbnQsIHRoaXMucGVla0NvZGVQb2ludCgwKSkpIHsKICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gZnJvbUNvZGVQb2ludCQxKHRoaXMuY29uc3VtZUVzY2FwZWRDb2RlUG9pbnQoKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnJlY29uc3VtZUNvZGVQb2ludChjb2RlUG9pbnQpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIHJldHVybiBUb2tlbml6ZXI7CiAgICB9KCkpOwoKICAgIHZhciBQYXJzZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CiAgICAgICAgZnVuY3Rpb24gUGFyc2VyKHRva2VucykgewogICAgICAgICAgICB0aGlzLl90b2tlbnMgPSB0b2tlbnM7CiAgICAgICAgfQogICAgICAgIFBhcnNlci5jcmVhdGUgPSBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICAgICAgdmFyIHRva2VuaXplciA9IG5ldyBUb2tlbml6ZXIoKTsKICAgICAgICAgICAgdG9rZW5pemVyLndyaXRlKHZhbHVlKTsKICAgICAgICAgICAgcmV0dXJuIG5ldyBQYXJzZXIodG9rZW5pemVyLnJlYWQoKSk7CiAgICAgICAgfTsKICAgICAgICBQYXJzZXIucGFyc2VWYWx1ZSA9IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgICAgICByZXR1cm4gUGFyc2VyLmNyZWF0ZSh2YWx1ZSkucGFyc2VDb21wb25lbnRWYWx1ZSgpOwogICAgICAgIH07CiAgICAgICAgUGFyc2VyLnBhcnNlVmFsdWVzID0gZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgICAgIHJldHVybiBQYXJzZXIuY3JlYXRlKHZhbHVlKS5wYXJzZUNvbXBvbmVudFZhbHVlcygpOwogICAgICAgIH07CiAgICAgICAgUGFyc2VyLnByb3RvdHlwZS5wYXJzZUNvbXBvbmVudFZhbHVlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgdG9rZW4gPSB0aGlzLmNvbnN1bWVUb2tlbigpOwogICAgICAgICAgICB3aGlsZSAodG9rZW4udHlwZSA9PT0gMzEgLyogV0hJVEVTUEFDRV9UT0tFTiAqLykgewogICAgICAgICAgICAgICAgdG9rZW4gPSB0aGlzLmNvbnN1bWVUb2tlbigpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICh0b2tlbi50eXBlID09PSAzMiAvKiBFT0ZfVE9LRU4gKi8pIHsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBTeW50YXhFcnJvcigiRXJyb3IgcGFyc2luZyBDU1MgY29tcG9uZW50IHZhbHVlLCB1bmV4cGVjdGVkIEVPRiIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMucmVjb25zdW1lVG9rZW4odG9rZW4pOwogICAgICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLmNvbnN1bWVDb21wb25lbnRWYWx1ZSgpOwogICAgICAgICAgICBkbyB7CiAgICAgICAgICAgICAgICB0b2tlbiA9IHRoaXMuY29uc3VtZVRva2VuKCk7CiAgICAgICAgICAgIH0gd2hpbGUgKHRva2VuLnR5cGUgPT09IDMxIC8qIFdISVRFU1BBQ0VfVE9LRU4gKi8pOwogICAgICAgICAgICBpZiAodG9rZW4udHlwZSA9PT0gMzIgLyogRU9GX1RPS0VOICovKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhyb3cgbmV3IFN5bnRheEVycm9yKCJFcnJvciBwYXJzaW5nIENTUyBjb21wb25lbnQgdmFsdWUsIG11bHRpcGxlIHZhbHVlcyBmb3VuZCB3aGVuIGV4cGVjdGluZyBvbmx5IG9uZSIpOwogICAgICAgIH07CiAgICAgICAgUGFyc2VyLnByb3RvdHlwZS5wYXJzZUNvbXBvbmVudFZhbHVlcyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIHZhbHVlcyA9IFtdOwogICAgICAgICAgICB3aGlsZSAodHJ1ZSkgewogICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gdGhpcy5jb25zdW1lQ29tcG9uZW50VmFsdWUoKTsKICAgICAgICAgICAgICAgIGlmICh2YWx1ZS50eXBlID09PSAzMiAvKiBFT0ZfVE9LRU4gKi8pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWVzOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdmFsdWVzLnB1c2godmFsdWUpOwogICAgICAgICAgICAgICAgdmFsdWVzLnB1c2goKTsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgUGFyc2VyLnByb3RvdHlwZS5jb25zdW1lQ29tcG9uZW50VmFsdWUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciB0b2tlbiA9IHRoaXMuY29uc3VtZVRva2VuKCk7CiAgICAgICAgICAgIHN3aXRjaCAodG9rZW4udHlwZSkgewogICAgICAgICAgICAgICAgY2FzZSAxMSAvKiBMRUZUX0NVUkxZX0JSQUNLRVRfVE9LRU4gKi86CiAgICAgICAgICAgICAgICBjYXNlIDI4IC8qIExFRlRfU1FVQVJFX0JSQUNLRVRfVE9LRU4gKi86CiAgICAgICAgICAgICAgICBjYXNlIDIgLyogTEVGVF9QQVJFTlRIRVNJU19UT0tFTiAqLzoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb25zdW1lU2ltcGxlQmxvY2sodG9rZW4udHlwZSk7CiAgICAgICAgICAgICAgICBjYXNlIDE5IC8qIEZVTkNUSU9OX1RPS0VOICovOgogICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnN1bWVGdW5jdGlvbih0b2tlbik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHRva2VuOwogICAgICAgIH07CiAgICAgICAgUGFyc2VyLnByb3RvdHlwZS5jb25zdW1lU2ltcGxlQmxvY2sgPSBmdW5jdGlvbiAodHlwZSkgewogICAgICAgICAgICB2YXIgYmxvY2sgPSB7IHR5cGU6IHR5cGUsIHZhbHVlczogW10gfTsKICAgICAgICAgICAgdmFyIHRva2VuID0gdGhpcy5jb25zdW1lVG9rZW4oKTsKICAgICAgICAgICAgd2hpbGUgKHRydWUpIHsKICAgICAgICAgICAgICAgIGlmICh0b2tlbi50eXBlID09PSAzMiAvKiBFT0ZfVE9LRU4gKi8gfHwgaXNFbmRpbmdUb2tlbkZvcih0b2tlbiwgdHlwZSkpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gYmxvY2s7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0aGlzLnJlY29uc3VtZVRva2VuKHRva2VuKTsKICAgICAgICAgICAgICAgIGJsb2NrLnZhbHVlcy5wdXNoKHRoaXMuY29uc3VtZUNvbXBvbmVudFZhbHVlKCkpOwogICAgICAgICAgICAgICAgdG9rZW4gPSB0aGlzLmNvbnN1bWVUb2tlbigpOwogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICBQYXJzZXIucHJvdG90eXBlLmNvbnN1bWVGdW5jdGlvbiA9IGZ1bmN0aW9uIChmdW5jdGlvblRva2VuKSB7CiAgICAgICAgICAgIHZhciBjc3NGdW5jdGlvbiA9IHsKICAgICAgICAgICAgICAgIG5hbWU6IGZ1bmN0aW9uVG9rZW4udmFsdWUsCiAgICAgICAgICAgICAgICB2YWx1ZXM6IFtdLAogICAgICAgICAgICAgICAgdHlwZTogMTggLyogRlVOQ1RJT04gKi8KICAgICAgICAgICAgfTsKICAgICAgICAgICAgd2hpbGUgKHRydWUpIHsKICAgICAgICAgICAgICAgIHZhciB0b2tlbiA9IHRoaXMuY29uc3VtZVRva2VuKCk7CiAgICAgICAgICAgICAgICBpZiAodG9rZW4udHlwZSA9PT0gMzIgLyogRU9GX1RPS0VOICovIHx8IHRva2VuLnR5cGUgPT09IDMgLyogUklHSFRfUEFSRU5USEVTSVNfVE9LRU4gKi8pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3NzRnVuY3Rpb247CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0aGlzLnJlY29uc3VtZVRva2VuKHRva2VuKTsKICAgICAgICAgICAgICAgIGNzc0Z1bmN0aW9uLnZhbHVlcy5wdXNoKHRoaXMuY29uc3VtZUNvbXBvbmVudFZhbHVlKCkpOwogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICBQYXJzZXIucHJvdG90eXBlLmNvbnN1bWVUb2tlbiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIHRva2VuID0gdGhpcy5fdG9rZW5zLnNoaWZ0KCk7CiAgICAgICAgICAgIHJldHVybiB0eXBlb2YgdG9rZW4gPT09ICd1bmRlZmluZWQnID8gRU9GX1RPS0VOIDogdG9rZW47CiAgICAgICAgfTsKICAgICAgICBQYXJzZXIucHJvdG90eXBlLnJlY29uc3VtZVRva2VuID0gZnVuY3Rpb24gKHRva2VuKSB7CiAgICAgICAgICAgIHRoaXMuX3Rva2Vucy51bnNoaWZ0KHRva2VuKTsKICAgICAgICB9OwogICAgICAgIHJldHVybiBQYXJzZXI7CiAgICB9KCkpOwogICAgdmFyIGlzRGltZW5zaW9uVG9rZW4gPSBmdW5jdGlvbiAodG9rZW4pIHsgcmV0dXJuIHRva2VuLnR5cGUgPT09IDE1IC8qIERJTUVOU0lPTl9UT0tFTiAqLzsgfTsKICAgIHZhciBpc051bWJlclRva2VuID0gZnVuY3Rpb24gKHRva2VuKSB7IHJldHVybiB0b2tlbi50eXBlID09PSAxNyAvKiBOVU1CRVJfVE9LRU4gKi87IH07CiAgICB2YXIgaXNJZGVudFRva2VuID0gZnVuY3Rpb24gKHRva2VuKSB7IHJldHVybiB0b2tlbi50eXBlID09PSAyMCAvKiBJREVOVF9UT0tFTiAqLzsgfTsKICAgIHZhciBpc1N0cmluZ1Rva2VuID0gZnVuY3Rpb24gKHRva2VuKSB7IHJldHVybiB0b2tlbi50eXBlID09PSAwIC8qIFNUUklOR19UT0tFTiAqLzsgfTsKICAgIHZhciBpc0lkZW50V2l0aFZhbHVlID0gZnVuY3Rpb24gKHRva2VuLCB2YWx1ZSkgewogICAgICAgIHJldHVybiBpc0lkZW50VG9rZW4odG9rZW4pICYmIHRva2VuLnZhbHVlID09PSB2YWx1ZTsKICAgIH07CiAgICB2YXIgbm9uV2hpdGVTcGFjZSA9IGZ1bmN0aW9uICh0b2tlbikgeyByZXR1cm4gdG9rZW4udHlwZSAhPT0gMzEgLyogV0hJVEVTUEFDRV9UT0tFTiAqLzsgfTsKICAgIHZhciBub25GdW5jdGlvbkFyZ1NlcGFyYXRvciA9IGZ1bmN0aW9uICh0b2tlbikgewogICAgICAgIHJldHVybiB0b2tlbi50eXBlICE9PSAzMSAvKiBXSElURVNQQUNFX1RPS0VOICovICYmIHRva2VuLnR5cGUgIT09IDQgLyogQ09NTUFfVE9LRU4gKi87CiAgICB9OwogICAgdmFyIHBhcnNlRnVuY3Rpb25BcmdzID0gZnVuY3Rpb24gKHRva2VucykgewogICAgICAgIHZhciBhcmdzID0gW107CiAgICAgICAgdmFyIGFyZyA9IFtdOwogICAgICAgIHRva2Vucy5mb3JFYWNoKGZ1bmN0aW9uICh0b2tlbikgewogICAgICAgICAgICBpZiAodG9rZW4udHlwZSA9PT0gNCAvKiBDT01NQV9UT0tFTiAqLykgewogICAgICAgICAgICAgICAgaWYgKGFyZy5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIkVycm9yIHBhcnNpbmcgZnVuY3Rpb24gYXJncywgemVybyB0b2tlbnMgZm9yIGFyZyIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgYXJncy5wdXNoKGFyZyk7CiAgICAgICAgICAgICAgICBhcmcgPSBbXTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAodG9rZW4udHlwZSAhPT0gMzEgLyogV0hJVEVTUEFDRV9UT0tFTiAqLykgewogICAgICAgICAgICAgICAgYXJnLnB1c2godG9rZW4pOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgaWYgKGFyZy5sZW5ndGgpIHsKICAgICAgICAgICAgYXJncy5wdXNoKGFyZyk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBhcmdzOwogICAgfTsKICAgIHZhciBpc0VuZGluZ1Rva2VuRm9yID0gZnVuY3Rpb24gKHRva2VuLCB0eXBlKSB7CiAgICAgICAgaWYgKHR5cGUgPT09IDExIC8qIExFRlRfQ1VSTFlfQlJBQ0tFVF9UT0tFTiAqLyAmJiB0b2tlbi50eXBlID09PSAxMiAvKiBSSUdIVF9DVVJMWV9CUkFDS0VUX1RPS0VOICovKSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgICBpZiAodHlwZSA9PT0gMjggLyogTEVGVF9TUVVBUkVfQlJBQ0tFVF9UT0tFTiAqLyAmJiB0b2tlbi50eXBlID09PSAyOSAvKiBSSUdIVF9TUVVBUkVfQlJBQ0tFVF9UT0tFTiAqLykgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHR5cGUgPT09IDIgLyogTEVGVF9QQVJFTlRIRVNJU19UT0tFTiAqLyAmJiB0b2tlbi50eXBlID09PSAzIC8qIFJJR0hUX1BBUkVOVEhFU0lTX1RPS0VOICovOwogICAgfTsKCiAgICB2YXIgaXNMZW5ndGggPSBmdW5jdGlvbiAodG9rZW4pIHsKICAgICAgICByZXR1cm4gdG9rZW4udHlwZSA9PT0gMTcgLyogTlVNQkVSX1RPS0VOICovIHx8IHRva2VuLnR5cGUgPT09IDE1IC8qIERJTUVOU0lPTl9UT0tFTiAqLzsKICAgIH07CgogICAgdmFyIGlzTGVuZ3RoUGVyY2VudGFnZSA9IGZ1bmN0aW9uICh0b2tlbikgewogICAgICAgIHJldHVybiB0b2tlbi50eXBlID09PSAxNiAvKiBQRVJDRU5UQUdFX1RPS0VOICovIHx8IGlzTGVuZ3RoKHRva2VuKTsKICAgIH07CiAgICB2YXIgcGFyc2VMZW5ndGhQZXJjZW50YWdlVHVwbGUgPSBmdW5jdGlvbiAodG9rZW5zKSB7CiAgICAgICAgcmV0dXJuIHRva2Vucy5sZW5ndGggPiAxID8gW3Rva2Vuc1swXSwgdG9rZW5zWzFdXSA6IFt0b2tlbnNbMF1dOwogICAgfTsKICAgIHZhciBaRVJPX0xFTkdUSCA9IHsKICAgICAgICB0eXBlOiAxNyAvKiBOVU1CRVJfVE9LRU4gKi8sCiAgICAgICAgbnVtYmVyOiAwLAogICAgICAgIGZsYWdzOiBGTEFHX0lOVEVHRVIKICAgIH07CiAgICB2YXIgRklGVFlfUEVSQ0VOVCA9IHsKICAgICAgICB0eXBlOiAxNiAvKiBQRVJDRU5UQUdFX1RPS0VOICovLAogICAgICAgIG51bWJlcjogNTAsCiAgICAgICAgZmxhZ3M6IEZMQUdfSU5URUdFUgogICAgfTsKICAgIHZhciBIVU5EUkVEX1BFUkNFTlQgPSB7CiAgICAgICAgdHlwZTogMTYgLyogUEVSQ0VOVEFHRV9UT0tFTiAqLywKICAgICAgICBudW1iZXI6IDEwMCwKICAgICAgICBmbGFnczogRkxBR19JTlRFR0VSCiAgICB9OwogICAgdmFyIGdldEFic29sdXRlVmFsdWVGb3JUdXBsZSA9IGZ1bmN0aW9uICh0dXBsZSwgd2lkdGgsIGhlaWdodCkgewogICAgICAgIHZhciB4ID0gdHVwbGVbMF0sIHkgPSB0dXBsZVsxXTsKICAgICAgICByZXR1cm4gW2dldEFic29sdXRlVmFsdWUoeCwgd2lkdGgpLCBnZXRBYnNvbHV0ZVZhbHVlKHR5cGVvZiB5ICE9PSAndW5kZWZpbmVkJyA/IHkgOiB4LCBoZWlnaHQpXTsKICAgIH07CiAgICB2YXIgZ2V0QWJzb2x1dGVWYWx1ZSA9IGZ1bmN0aW9uICh0b2tlbiwgcGFyZW50KSB7CiAgICAgICAgaWYgKHRva2VuLnR5cGUgPT09IDE2IC8qIFBFUkNFTlRBR0VfVE9LRU4gKi8pIHsKICAgICAgICAgICAgcmV0dXJuICh0b2tlbi5udW1iZXIgLyAxMDApICogcGFyZW50OwogICAgICAgIH0KICAgICAgICBpZiAoaXNEaW1lbnNpb25Ub2tlbih0b2tlbikpIHsKICAgICAgICAgICAgc3dpdGNoICh0b2tlbi51bml0KSB7CiAgICAgICAgICAgICAgICBjYXNlICdyZW0nOgogICAgICAgICAgICAgICAgY2FzZSAnZW0nOgogICAgICAgICAgICAgICAgICAgIHJldHVybiAxNiAqIHRva2VuLm51bWJlcjsgLy8gVE9ETyB1c2UgY29ycmVjdCBmb250LXNpemUKICAgICAgICAgICAgICAgIGNhc2UgJ3B4JzoKICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRva2VuLm51bWJlcjsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gdG9rZW4ubnVtYmVyOwogICAgfTsKCiAgICB2YXIgREVHID0gJ2RlZyc7CiAgICB2YXIgR1JBRCA9ICdncmFkJzsKICAgIHZhciBSQUQgPSAncmFkJzsKICAgIHZhciBUVVJOID0gJ3R1cm4nOwogICAgdmFyIGFuZ2xlID0gewogICAgICAgIG5hbWU6ICdhbmdsZScsCiAgICAgICAgcGFyc2U6IGZ1bmN0aW9uIChfY29udGV4dCwgdmFsdWUpIHsKICAgICAgICAgICAgaWYgKHZhbHVlLnR5cGUgPT09IDE1IC8qIERJTUVOU0lPTl9UT0tFTiAqLykgewogICAgICAgICAgICAgICAgc3dpdGNoICh2YWx1ZS51bml0KSB7CiAgICAgICAgICAgICAgICAgICAgY2FzZSBERUc6CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoTWF0aC5QSSAqIHZhbHVlLm51bWJlcikgLyAxODA7CiAgICAgICAgICAgICAgICAgICAgY2FzZSBHUkFEOgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKE1hdGguUEkgLyAyMDApICogdmFsdWUubnVtYmVyOwogICAgICAgICAgICAgICAgICAgIGNhc2UgUkFEOgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWUubnVtYmVyOwogICAgICAgICAgICAgICAgICAgIGNhc2UgVFVSTjoKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1hdGguUEkgKiAyICogdmFsdWUubnVtYmVyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiVW5zdXBwb3J0ZWQgYW5nbGUgdHlwZSIpOwogICAgICAgIH0KICAgIH07CiAgICB2YXIgaXNBbmdsZSA9IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgIGlmICh2YWx1ZS50eXBlID09PSAxNSAvKiBESU1FTlNJT05fVE9LRU4gKi8pIHsKICAgICAgICAgICAgaWYgKHZhbHVlLnVuaXQgPT09IERFRyB8fCB2YWx1ZS51bml0ID09PSBHUkFEIHx8IHZhbHVlLnVuaXQgPT09IFJBRCB8fCB2YWx1ZS51bml0ID09PSBUVVJOKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9OwogICAgdmFyIHBhcnNlTmFtZWRTaWRlID0gZnVuY3Rpb24gKHRva2VucykgewogICAgICAgIHZhciBzaWRlT3JDb3JuZXIgPSB0b2tlbnMKICAgICAgICAgICAgLmZpbHRlcihpc0lkZW50VG9rZW4pCiAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKGlkZW50KSB7IHJldHVybiBpZGVudC52YWx1ZTsgfSkKICAgICAgICAgICAgLmpvaW4oJyAnKTsKICAgICAgICBzd2l0Y2ggKHNpZGVPckNvcm5lcikgewogICAgICAgICAgICBjYXNlICd0byBib3R0b20gcmlnaHQnOgogICAgICAgICAgICBjYXNlICd0byByaWdodCBib3R0b20nOgogICAgICAgICAgICBjYXNlICdsZWZ0IHRvcCc6CiAgICAgICAgICAgIGNhc2UgJ3RvcCBsZWZ0JzoKICAgICAgICAgICAgICAgIHJldHVybiBbWkVST19MRU5HVEgsIFpFUk9fTEVOR1RIXTsKICAgICAgICAgICAgY2FzZSAndG8gdG9wJzoKICAgICAgICAgICAgY2FzZSAnYm90dG9tJzoKICAgICAgICAgICAgICAgIHJldHVybiBkZWcoMCk7CiAgICAgICAgICAgIGNhc2UgJ3RvIGJvdHRvbSBsZWZ0JzoKICAgICAgICAgICAgY2FzZSAndG8gbGVmdCBib3R0b20nOgogICAgICAgICAgICBjYXNlICdyaWdodCB0b3AnOgogICAgICAgICAgICBjYXNlICd0b3AgcmlnaHQnOgogICAgICAgICAgICAgICAgcmV0dXJuIFtaRVJPX0xFTkdUSCwgSFVORFJFRF9QRVJDRU5UXTsKICAgICAgICAgICAgY2FzZSAndG8gcmlnaHQnOgogICAgICAgICAgICBjYXNlICdsZWZ0JzoKICAgICAgICAgICAgICAgIHJldHVybiBkZWcoOTApOwogICAgICAgICAgICBjYXNlICd0byB0b3AgbGVmdCc6CiAgICAgICAgICAgIGNhc2UgJ3RvIGxlZnQgdG9wJzoKICAgICAgICAgICAgY2FzZSAncmlnaHQgYm90dG9tJzoKICAgICAgICAgICAgY2FzZSAnYm90dG9tIHJpZ2h0JzoKICAgICAgICAgICAgICAgIHJldHVybiBbSFVORFJFRF9QRVJDRU5ULCBIVU5EUkVEX1BFUkNFTlRdOwogICAgICAgICAgICBjYXNlICd0byBib3R0b20nOgogICAgICAgICAgICBjYXNlICd0b3AnOgogICAgICAgICAgICAgICAgcmV0dXJuIGRlZygxODApOwogICAgICAgICAgICBjYXNlICd0byB0b3AgcmlnaHQnOgogICAgICAgICAgICBjYXNlICd0byByaWdodCB0b3AnOgogICAgICAgICAgICBjYXNlICdsZWZ0IGJvdHRvbSc6CiAgICAgICAgICAgIGNhc2UgJ2JvdHRvbSBsZWZ0JzoKICAgICAgICAgICAgICAgIHJldHVybiBbSFVORFJFRF9QRVJDRU5ULCBaRVJPX0xFTkdUSF07CiAgICAgICAgICAgIGNhc2UgJ3RvIGxlZnQnOgogICAgICAgICAgICBjYXNlICdyaWdodCc6CiAgICAgICAgICAgICAgICByZXR1cm4gZGVnKDI3MCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiAwOwogICAgfTsKICAgIHZhciBkZWcgPSBmdW5jdGlvbiAoZGVnKSB7IHJldHVybiAoTWF0aC5QSSAqIGRlZykgLyAxODA7IH07CgogICAgdmFyIGNvbG9yJDEgPSB7CiAgICAgICAgbmFtZTogJ2NvbG9yJywKICAgICAgICBwYXJzZTogZnVuY3Rpb24gKGNvbnRleHQsIHZhbHVlKSB7CiAgICAgICAgICAgIGlmICh2YWx1ZS50eXBlID09PSAxOCAvKiBGVU5DVElPTiAqLykgewogICAgICAgICAgICAgICAgdmFyIGNvbG9yRnVuY3Rpb24gPSBTVVBQT1JURURfQ09MT1JfRlVOQ1RJT05TW3ZhbHVlLm5hbWVdOwogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjb2xvckZ1bmN0aW9uID09PSAndW5kZWZpbmVkJykgewogICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiQXR0ZW1wdGluZyB0byBwYXJzZSBhbiB1bnN1cHBvcnRlZCBjb2xvciBmdW5jdGlvbiBcIiIgKyB2YWx1ZS5uYW1lICsgIlwiIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gY29sb3JGdW5jdGlvbihjb250ZXh0LCB2YWx1ZS52YWx1ZXMpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICh2YWx1ZS50eXBlID09PSA1IC8qIEhBU0hfVE9LRU4gKi8pIHsKICAgICAgICAgICAgICAgIGlmICh2YWx1ZS52YWx1ZS5sZW5ndGggPT09IDMpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgciA9IHZhbHVlLnZhbHVlLnN1YnN0cmluZygwLCAxKTsKICAgICAgICAgICAgICAgICAgICB2YXIgZyA9IHZhbHVlLnZhbHVlLnN1YnN0cmluZygxLCAyKTsKICAgICAgICAgICAgICAgICAgICB2YXIgYiA9IHZhbHVlLnZhbHVlLnN1YnN0cmluZygyLCAzKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFjayhwYXJzZUludChyICsgciwgMTYpLCBwYXJzZUludChnICsgZywgMTYpLCBwYXJzZUludChiICsgYiwgMTYpLCAxKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICh2YWx1ZS52YWx1ZS5sZW5ndGggPT09IDQpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgciA9IHZhbHVlLnZhbHVlLnN1YnN0cmluZygwLCAxKTsKICAgICAgICAgICAgICAgICAgICB2YXIgZyA9IHZhbHVlLnZhbHVlLnN1YnN0cmluZygxLCAyKTsKICAgICAgICAgICAgICAgICAgICB2YXIgYiA9IHZhbHVlLnZhbHVlLnN1YnN0cmluZygyLCAzKTsKICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IHZhbHVlLnZhbHVlLnN1YnN0cmluZygzLCA0KTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFjayhwYXJzZUludChyICsgciwgMTYpLCBwYXJzZUludChnICsgZywgMTYpLCBwYXJzZUludChiICsgYiwgMTYpLCBwYXJzZUludChhICsgYSwgMTYpIC8gMjU1KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICh2YWx1ZS52YWx1ZS5sZW5ndGggPT09IDYpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgciA9IHZhbHVlLnZhbHVlLnN1YnN0cmluZygwLCAyKTsKICAgICAgICAgICAgICAgICAgICB2YXIgZyA9IHZhbHVlLnZhbHVlLnN1YnN0cmluZygyLCA0KTsKICAgICAgICAgICAgICAgICAgICB2YXIgYiA9IHZhbHVlLnZhbHVlLnN1YnN0cmluZyg0LCA2KTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFjayhwYXJzZUludChyLCAxNiksIHBhcnNlSW50KGcsIDE2KSwgcGFyc2VJbnQoYiwgMTYpLCAxKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICh2YWx1ZS52YWx1ZS5sZW5ndGggPT09IDgpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgciA9IHZhbHVlLnZhbHVlLnN1YnN0cmluZygwLCAyKTsKICAgICAgICAgICAgICAgICAgICB2YXIgZyA9IHZhbHVlLnZhbHVlLnN1YnN0cmluZygyLCA0KTsKICAgICAgICAgICAgICAgICAgICB2YXIgYiA9IHZhbHVlLnZhbHVlLnN1YnN0cmluZyg0LCA2KTsKICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IHZhbHVlLnZhbHVlLnN1YnN0cmluZyg2LCA4KTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFjayhwYXJzZUludChyLCAxNiksIHBhcnNlSW50KGcsIDE2KSwgcGFyc2VJbnQoYiwgMTYpLCBwYXJzZUludChhLCAxNikgLyAyNTUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICh2YWx1ZS50eXBlID09PSAyMCAvKiBJREVOVF9UT0tFTiAqLykgewogICAgICAgICAgICAgICAgdmFyIG5hbWVkQ29sb3IgPSBDT0xPUlNbdmFsdWUudmFsdWUudG9VcHBlckNhc2UoKV07CiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG5hbWVkQ29sb3IgIT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5hbWVkQ29sb3I7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIENPTE9SUy5UUkFOU1BBUkVOVDsKICAgICAgICB9CiAgICB9OwogICAgdmFyIGlzVHJhbnNwYXJlbnQgPSBmdW5jdGlvbiAoY29sb3IpIHsgcmV0dXJuICgweGZmICYgY29sb3IpID09PSAwOyB9OwogICAgdmFyIGFzU3RyaW5nID0gZnVuY3Rpb24gKGNvbG9yKSB7CiAgICAgICAgdmFyIGFscGhhID0gMHhmZiAmIGNvbG9yOwogICAgICAgIHZhciBibHVlID0gMHhmZiAmIChjb2xvciA+PiA4KTsKICAgICAgICB2YXIgZ3JlZW4gPSAweGZmICYgKGNvbG9yID4+IDE2KTsKICAgICAgICB2YXIgcmVkID0gMHhmZiAmIChjb2xvciA+PiAyNCk7CiAgICAgICAgcmV0dXJuIGFscGhhIDwgMjU1ID8gInJnYmEoIiArIHJlZCArICIsIiArIGdyZWVuICsgIiwiICsgYmx1ZSArICIsIiArIGFscGhhIC8gMjU1ICsgIikiIDogInJnYigiICsgcmVkICsgIiwiICsgZ3JlZW4gKyAiLCIgKyBibHVlICsgIikiOwogICAgfTsKICAgIHZhciBwYWNrID0gZnVuY3Rpb24gKHIsIGcsIGIsIGEpIHsKICAgICAgICByZXR1cm4gKChyIDw8IDI0KSB8IChnIDw8IDE2KSB8IChiIDw8IDgpIHwgKE1hdGgucm91bmQoYSAqIDI1NSkgPDwgMCkpID4+PiAwOwogICAgfTsKICAgIHZhciBnZXRUb2tlbkNvbG9yVmFsdWUgPSBmdW5jdGlvbiAodG9rZW4sIGkpIHsKICAgICAgICBpZiAodG9rZW4udHlwZSA9PT0gMTcgLyogTlVNQkVSX1RPS0VOICovKSB7CiAgICAgICAgICAgIHJldHVybiB0b2tlbi5udW1iZXI7CiAgICAgICAgfQogICAgICAgIGlmICh0b2tlbi50eXBlID09PSAxNiAvKiBQRVJDRU5UQUdFX1RPS0VOICovKSB7CiAgICAgICAgICAgIHZhciBtYXggPSBpID09PSAzID8gMSA6IDI1NTsKICAgICAgICAgICAgcmV0dXJuIGkgPT09IDMgPyAodG9rZW4ubnVtYmVyIC8gMTAwKSAqIG1heCA6IE1hdGgucm91bmQoKHRva2VuLm51bWJlciAvIDEwMCkgKiBtYXgpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gMDsKICAgIH07CiAgICB2YXIgcmdiID0gZnVuY3Rpb24gKF9jb250ZXh0LCBhcmdzKSB7CiAgICAgICAgdmFyIHRva2VucyA9IGFyZ3MuZmlsdGVyKG5vbkZ1bmN0aW9uQXJnU2VwYXJhdG9yKTsKICAgICAgICBpZiAodG9rZW5zLmxlbmd0aCA9PT0gMykgewogICAgICAgICAgICB2YXIgX2EgPSB0b2tlbnMubWFwKGdldFRva2VuQ29sb3JWYWx1ZSksIHIgPSBfYVswXSwgZyA9IF9hWzFdLCBiID0gX2FbMl07CiAgICAgICAgICAgIHJldHVybiBwYWNrKHIsIGcsIGIsIDEpOwogICAgICAgIH0KICAgICAgICBpZiAodG9rZW5zLmxlbmd0aCA9PT0gNCkgewogICAgICAgICAgICB2YXIgX2IgPSB0b2tlbnMubWFwKGdldFRva2VuQ29sb3JWYWx1ZSksIHIgPSBfYlswXSwgZyA9IF9iWzFdLCBiID0gX2JbMl0sIGEgPSBfYlszXTsKICAgICAgICAgICAgcmV0dXJuIHBhY2sociwgZywgYiwgYSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiAwOwogICAgfTsKICAgIGZ1bmN0aW9uIGh1ZTJyZ2IodDEsIHQyLCBodWUpIHsKICAgICAgICBpZiAoaHVlIDwgMCkgewogICAgICAgICAgICBodWUgKz0gMTsKICAgICAgICB9CiAgICAgICAgaWYgKGh1ZSA+PSAxKSB7CiAgICAgICAgICAgIGh1ZSAtPSAxOwogICAgICAgIH0KICAgICAgICBpZiAoaHVlIDwgMSAvIDYpIHsKICAgICAgICAgICAgcmV0dXJuICh0MiAtIHQxKSAqIGh1ZSAqIDYgKyB0MTsKICAgICAgICB9CiAgICAgICAgZWxzZSBpZiAoaHVlIDwgMSAvIDIpIHsKICAgICAgICAgICAgcmV0dXJuIHQyOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChodWUgPCAyIC8gMykgewogICAgICAgICAgICByZXR1cm4gKHQyIC0gdDEpICogNiAqICgyIC8gMyAtIGh1ZSkgKyB0MTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHJldHVybiB0MTsKICAgICAgICB9CiAgICB9CiAgICB2YXIgaHNsID0gZnVuY3Rpb24gKGNvbnRleHQsIGFyZ3MpIHsKICAgICAgICB2YXIgdG9rZW5zID0gYXJncy5maWx0ZXIobm9uRnVuY3Rpb25BcmdTZXBhcmF0b3IpOwogICAgICAgIHZhciBodWUgPSB0b2tlbnNbMF0sIHNhdHVyYXRpb24gPSB0b2tlbnNbMV0sIGxpZ2h0bmVzcyA9IHRva2Vuc1syXSwgYWxwaGEgPSB0b2tlbnNbM107CiAgICAgICAgdmFyIGggPSAoaHVlLnR5cGUgPT09IDE3IC8qIE5VTUJFUl9UT0tFTiAqLyA/IGRlZyhodWUubnVtYmVyKSA6IGFuZ2xlLnBhcnNlKGNvbnRleHQsIGh1ZSkpIC8gKE1hdGguUEkgKiAyKTsKICAgICAgICB2YXIgcyA9IGlzTGVuZ3RoUGVyY2VudGFnZShzYXR1cmF0aW9uKSA/IHNhdHVyYXRpb24ubnVtYmVyIC8gMTAwIDogMDsKICAgICAgICB2YXIgbCA9IGlzTGVuZ3RoUGVyY2VudGFnZShsaWdodG5lc3MpID8gbGlnaHRuZXNzLm51bWJlciAvIDEwMCA6IDA7CiAgICAgICAgdmFyIGEgPSB0eXBlb2YgYWxwaGEgIT09ICd1bmRlZmluZWQnICYmIGlzTGVuZ3RoUGVyY2VudGFnZShhbHBoYSkgPyBnZXRBYnNvbHV0ZVZhbHVlKGFscGhhLCAxKSA6IDE7CiAgICAgICAgaWYgKHMgPT09IDApIHsKICAgICAgICAgICAgcmV0dXJuIHBhY2sobCAqIDI1NSwgbCAqIDI1NSwgbCAqIDI1NSwgMSk7CiAgICAgICAgfQogICAgICAgIHZhciB0MiA9IGwgPD0gMC41ID8gbCAqIChzICsgMSkgOiBsICsgcyAtIGwgKiBzOwogICAgICAgIHZhciB0MSA9IGwgKiAyIC0gdDI7CiAgICAgICAgdmFyIHIgPSBodWUycmdiKHQxLCB0MiwgaCArIDEgLyAzKTsKICAgICAgICB2YXIgZyA9IGh1ZTJyZ2IodDEsIHQyLCBoKTsKICAgICAgICB2YXIgYiA9IGh1ZTJyZ2IodDEsIHQyLCBoIC0gMSAvIDMpOwogICAgICAgIHJldHVybiBwYWNrKHIgKiAyNTUsIGcgKiAyNTUsIGIgKiAyNTUsIGEpOwogICAgfTsKICAgIHZhciBTVVBQT1JURURfQ09MT1JfRlVOQ1RJT05TID0gewogICAgICAgIGhzbDogaHNsLAogICAgICAgIGhzbGE6IGhzbCwKICAgICAgICByZ2I6IHJnYiwKICAgICAgICByZ2JhOiByZ2IKICAgIH07CiAgICB2YXIgcGFyc2VDb2xvciA9IGZ1bmN0aW9uIChjb250ZXh0LCB2YWx1ZSkgewogICAgICAgIHJldHVybiBjb2xvciQxLnBhcnNlKGNvbnRleHQsIFBhcnNlci5jcmVhdGUodmFsdWUpLnBhcnNlQ29tcG9uZW50VmFsdWUoKSk7CiAgICB9OwogICAgdmFyIENPTE9SUyA9IHsKICAgICAgICBBTElDRUJMVUU6IDB4ZjBmOGZmZmYsCiAgICAgICAgQU5USVFVRVdISVRFOiAweGZhZWJkN2ZmLAogICAgICAgIEFRVUE6IDB4MDBmZmZmZmYsCiAgICAgICAgQVFVQU1BUklORTogMHg3ZmZmZDRmZiwKICAgICAgICBBWlVSRTogMHhmMGZmZmZmZiwKICAgICAgICBCRUlHRTogMHhmNWY1ZGNmZiwKICAgICAgICBCSVNRVUU6IDB4ZmZlNGM0ZmYsCiAgICAgICAgQkxBQ0s6IDB4MDAwMDAwZmYsCiAgICAgICAgQkxBTkNIRURBTE1PTkQ6IDB4ZmZlYmNkZmYsCiAgICAgICAgQkxVRTogMHgwMDAwZmZmZiwKICAgICAgICBCTFVFVklPTEVUOiAweDhhMmJlMmZmLAogICAgICAgIEJST1dOOiAweGE1MmEyYWZmLAogICAgICAgIEJVUkxZV09PRDogMHhkZWI4ODdmZiwKICAgICAgICBDQURFVEJMVUU6IDB4NWY5ZWEwZmYsCiAgICAgICAgQ0hBUlRSRVVTRTogMHg3ZmZmMDBmZiwKICAgICAgICBDSE9DT0xBVEU6IDB4ZDI2OTFlZmYsCiAgICAgICAgQ09SQUw6IDB4ZmY3ZjUwZmYsCiAgICAgICAgQ09STkZMT1dFUkJMVUU6IDB4NjQ5NWVkZmYsCiAgICAgICAgQ09STlNJTEs6IDB4ZmZmOGRjZmYsCiAgICAgICAgQ1JJTVNPTjogMHhkYzE0M2NmZiwKICAgICAgICBDWUFOOiAweDAwZmZmZmZmLAogICAgICAgIERBUktCTFVFOiAweDAwMDA4YmZmLAogICAgICAgIERBUktDWUFOOiAweDAwOGI4YmZmLAogICAgICAgIERBUktHT0xERU5ST0Q6IDB4Yjg4NmJiZmYsCiAgICAgICAgREFSS0dSQVk6IDB4YTlhOWE5ZmYsCiAgICAgICAgREFSS0dSRUVOOiAweDAwNjQwMGZmLAogICAgICAgIERBUktHUkVZOiAweGE5YTlhOWZmLAogICAgICAgIERBUktLSEFLSTogMHhiZGI3NmJmZiwKICAgICAgICBEQVJLTUFHRU5UQTogMHg4YjAwOGJmZiwKICAgICAgICBEQVJLT0xJVkVHUkVFTjogMHg1NTZiMmZmZiwKICAgICAgICBEQVJLT1JBTkdFOiAweGZmOGMwMGZmLAogICAgICAgIERBUktPUkNISUQ6IDB4OTkzMmNjZmYsCiAgICAgICAgREFSS1JFRDogMHg4YjAwMDBmZiwKICAgICAgICBEQVJLU0FMTU9OOiAweGU5OTY3YWZmLAogICAgICAgIERBUktTRUFHUkVFTjogMHg4ZmJjOGZmZiwKICAgICAgICBEQVJLU0xBVEVCTFVFOiAweDQ4M2Q4YmZmLAogICAgICAgIERBUktTTEFURUdSQVk6IDB4MmY0ZjRmZmYsCiAgICAgICAgREFSS1NMQVRFR1JFWTogMHgyZjRmNGZmZiwKICAgICAgICBEQVJLVFVSUVVPSVNFOiAweDAwY2VkMWZmLAogICAgICAgIERBUktWSU9MRVQ6IDB4OTQwMGQzZmYsCiAgICAgICAgREVFUFBJTks6IDB4ZmYxNDkzZmYsCiAgICAgICAgREVFUFNLWUJMVUU6IDB4MDBiZmZmZmYsCiAgICAgICAgRElNR1JBWTogMHg2OTY5NjlmZiwKICAgICAgICBESU1HUkVZOiAweDY5Njk2OWZmLAogICAgICAgIERPREdFUkJMVUU6IDB4MWU5MGZmZmYsCiAgICAgICAgRklSRUJSSUNLOiAweGIyMjIyMmZmLAogICAgICAgIEZMT1JBTFdISVRFOiAweGZmZmFmMGZmLAogICAgICAgIEZPUkVTVEdSRUVOOiAweDIyOGIyMmZmLAogICAgICAgIEZVQ0hTSUE6IDB4ZmYwMGZmZmYsCiAgICAgICAgR0FJTlNCT1JPOiAweGRjZGNkY2ZmLAogICAgICAgIEdIT1NUV0hJVEU6IDB4ZjhmOGZmZmYsCiAgICAgICAgR09MRDogMHhmZmQ3MDBmZiwKICAgICAgICBHT0xERU5ST0Q6IDB4ZGFhNTIwZmYsCiAgICAgICAgR1JBWTogMHg4MDgwODBmZiwKICAgICAgICBHUkVFTjogMHgwMDgwMDBmZiwKICAgICAgICBHUkVFTllFTExPVzogMHhhZGZmMmZmZiwKICAgICAgICBHUkVZOiAweDgwODA4MGZmLAogICAgICAgIEhPTkVZREVXOiAweGYwZmZmMGZmLAogICAgICAgIEhPVFBJTks6IDB4ZmY2OWI0ZmYsCiAgICAgICAgSU5ESUFOUkVEOiAweGNkNWM1Y2ZmLAogICAgICAgIElORElHTzogMHg0YjAwODJmZiwKICAgICAgICBJVk9SWTogMHhmZmZmZjBmZiwKICAgICAgICBLSEFLSTogMHhmMGU2OGNmZiwKICAgICAgICBMQVZFTkRFUjogMHhlNmU2ZmFmZiwKICAgICAgICBMQVZFTkRFUkJMVVNIOiAweGZmZjBmNWZmLAogICAgICAgIExBV05HUkVFTjogMHg3Y2ZjMDBmZiwKICAgICAgICBMRU1PTkNISUZGT046IDB4ZmZmYWNkZmYsCiAgICAgICAgTElHSFRCTFVFOiAweGFkZDhlNmZmLAogICAgICAgIExJR0hUQ09SQUw6IDB4ZjA4MDgwZmYsCiAgICAgICAgTElHSFRDWUFOOiAweGUwZmZmZmZmLAogICAgICAgIExJR0hUR09MREVOUk9EWUVMTE9XOiAweGZhZmFkMmZmLAogICAgICAgIExJR0hUR1JBWTogMHhkM2QzZDNmZiwKICAgICAgICBMSUdIVEdSRUVOOiAweDkwZWU5MGZmLAogICAgICAgIExJR0hUR1JFWTogMHhkM2QzZDNmZiwKICAgICAgICBMSUdIVFBJTks6IDB4ZmZiNmMxZmYsCiAgICAgICAgTElHSFRTQUxNT046IDB4ZmZhMDdhZmYsCiAgICAgICAgTElHSFRTRUFHUkVFTjogMHgyMGIyYWFmZiwKICAgICAgICBMSUdIVFNLWUJMVUU6IDB4ODdjZWZhZmYsCiAgICAgICAgTElHSFRTTEFURUdSQVk6IDB4Nzc4ODk5ZmYsCiAgICAgICAgTElHSFRTTEFURUdSRVk6IDB4Nzc4ODk5ZmYsCiAgICAgICAgTElHSFRTVEVFTEJMVUU6IDB4YjBjNGRlZmYsCiAgICAgICAgTElHSFRZRUxMT1c6IDB4ZmZmZmUwZmYsCiAgICAgICAgTElNRTogMHgwMGZmMDBmZiwKICAgICAgICBMSU1FR1JFRU46IDB4MzJjZDMyZmYsCiAgICAgICAgTElORU46IDB4ZmFmMGU2ZmYsCiAgICAgICAgTUFHRU5UQTogMHhmZjAwZmZmZiwKICAgICAgICBNQVJPT046IDB4ODAwMDAwZmYsCiAgICAgICAgTUVESVVNQVFVQU1BUklORTogMHg2NmNkYWFmZiwKICAgICAgICBNRURJVU1CTFVFOiAweDAwMDBjZGZmLAogICAgICAgIE1FRElVTU9SQ0hJRDogMHhiYTU1ZDNmZiwKICAgICAgICBNRURJVU1QVVJQTEU6IDB4OTM3MGRiZmYsCiAgICAgICAgTUVESVVNU0VBR1JFRU46IDB4M2NiMzcxZmYsCiAgICAgICAgTUVESVVNU0xBVEVCTFVFOiAweDdiNjhlZWZmLAogICAgICAgIE1FRElVTVNQUklOR0dSRUVOOiAweDAwZmE5YWZmLAogICAgICAgIE1FRElVTVRVUlFVT0lTRTogMHg0OGQxY2NmZiwKICAgICAgICBNRURJVU1WSU9MRVRSRUQ6IDB4YzcxNTg1ZmYsCiAgICAgICAgTUlETklHSFRCTFVFOiAweDE5MTk3MGZmLAogICAgICAgIE1JTlRDUkVBTTogMHhmNWZmZmFmZiwKICAgICAgICBNSVNUWVJPU0U6IDB4ZmZlNGUxZmYsCiAgICAgICAgTU9DQ0FTSU46IDB4ZmZlNGI1ZmYsCiAgICAgICAgTkFWQUpPV0hJVEU6IDB4ZmZkZWFkZmYsCiAgICAgICAgTkFWWTogMHgwMDAwODBmZiwKICAgICAgICBPTERMQUNFOiAweGZkZjVlNmZmLAogICAgICAgIE9MSVZFOiAweDgwODAwMGZmLAogICAgICAgIE9MSVZFRFJBQjogMHg2YjhlMjNmZiwKICAgICAgICBPUkFOR0U6IDB4ZmZhNTAwZmYsCiAgICAgICAgT1JBTkdFUkVEOiAweGZmNDUwMGZmLAogICAgICAgIE9SQ0hJRDogMHhkYTcwZDZmZiwKICAgICAgICBQQUxFR09MREVOUk9EOiAweGVlZThhYWZmLAogICAgICAgIFBBTEVHUkVFTjogMHg5OGZiOThmZiwKICAgICAgICBQQUxFVFVSUVVPSVNFOiAweGFmZWVlZWZmLAogICAgICAgIFBBTEVWSU9MRVRSRUQ6IDB4ZGI3MDkzZmYsCiAgICAgICAgUEFQQVlBV0hJUDogMHhmZmVmZDVmZiwKICAgICAgICBQRUFDSFBVRkY6IDB4ZmZkYWI5ZmYsCiAgICAgICAgUEVSVTogMHhjZDg1M2ZmZiwKICAgICAgICBQSU5LOiAweGZmYzBjYmZmLAogICAgICAgIFBMVU06IDB4ZGRhMGRkZmYsCiAgICAgICAgUE9XREVSQkxVRTogMHhiMGUwZTZmZiwKICAgICAgICBQVVJQTEU6IDB4ODAwMDgwZmYsCiAgICAgICAgUkVCRUNDQVBVUlBMRTogMHg2NjMzOTlmZiwKICAgICAgICBSRUQ6IDB4ZmYwMDAwZmYsCiAgICAgICAgUk9TWUJST1dOOiAweGJjOGY4ZmZmLAogICAgICAgIFJPWUFMQkxVRTogMHg0MTY5ZTFmZiwKICAgICAgICBTQURETEVCUk9XTjogMHg4YjQ1MTNmZiwKICAgICAgICBTQUxNT046IDB4ZmE4MDcyZmYsCiAgICAgICAgU0FORFlCUk9XTjogMHhmNGE0NjBmZiwKICAgICAgICBTRUFHUkVFTjogMHgyZThiNTdmZiwKICAgICAgICBTRUFTSEVMTDogMHhmZmY1ZWVmZiwKICAgICAgICBTSUVOTkE6IDB4YTA1MjJkZmYsCiAgICAgICAgU0lMVkVSOiAweGMwYzBjMGZmLAogICAgICAgIFNLWUJMVUU6IDB4ODdjZWViZmYsCiAgICAgICAgU0xBVEVCTFVFOiAweDZhNWFjZGZmLAogICAgICAgIFNMQVRFR1JBWTogMHg3MDgwOTBmZiwKICAgICAgICBTTEFURUdSRVk6IDB4NzA4MDkwZmYsCiAgICAgICAgU05PVzogMHhmZmZhZmFmZiwKICAgICAgICBTUFJJTkdHUkVFTjogMHgwMGZmN2ZmZiwKICAgICAgICBTVEVFTEJMVUU6IDB4NDY4MmI0ZmYsCiAgICAgICAgVEFOOiAweGQyYjQ4Y2ZmLAogICAgICAgIFRFQUw6IDB4MDA4MDgwZmYsCiAgICAgICAgVEhJU1RMRTogMHhkOGJmZDhmZiwKICAgICAgICBUT01BVE86IDB4ZmY2MzQ3ZmYsCiAgICAgICAgVFJBTlNQQVJFTlQ6IDB4MDAwMDAwMDAsCiAgICAgICAgVFVSUVVPSVNFOiAweDQwZTBkMGZmLAogICAgICAgIFZJT0xFVDogMHhlZTgyZWVmZiwKICAgICAgICBXSEVBVDogMHhmNWRlYjNmZiwKICAgICAgICBXSElURTogMHhmZmZmZmZmZiwKICAgICAgICBXSElURVNNT0tFOiAweGY1ZjVmNWZmLAogICAgICAgIFlFTExPVzogMHhmZmZmMDBmZiwKICAgICAgICBZRUxMT1dHUkVFTjogMHg5YWNkMzJmZgogICAgfTsKCiAgICB2YXIgYmFja2dyb3VuZENsaXAgPSB7CiAgICAgICAgbmFtZTogJ2JhY2tncm91bmQtY2xpcCcsCiAgICAgICAgaW5pdGlhbFZhbHVlOiAnYm9yZGVyLWJveCcsCiAgICAgICAgcHJlZml4OiBmYWxzZSwKICAgICAgICB0eXBlOiAxIC8qIExJU1QgKi8sCiAgICAgICAgcGFyc2U6IGZ1bmN0aW9uIChfY29udGV4dCwgdG9rZW5zKSB7CiAgICAgICAgICAgIHJldHVybiB0b2tlbnMubWFwKGZ1bmN0aW9uICh0b2tlbikgewogICAgICAgICAgICAgICAgaWYgKGlzSWRlbnRUb2tlbih0b2tlbikpIHsKICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRva2VuLnZhbHVlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3BhZGRpbmctYm94JzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAxIC8qIFBBRERJTkdfQk9YICovOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdjb250ZW50LWJveCc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMiAvKiBDT05URU5UX0JPWCAqLzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gMCAvKiBCT1JERVJfQk9YICovOwogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICB9OwoKICAgIHZhciBiYWNrZ3JvdW5kQ29sb3IgPSB7CiAgICAgICAgbmFtZTogImJhY2tncm91bmQtY29sb3IiLAogICAgICAgIGluaXRpYWxWYWx1ZTogJ3RyYW5zcGFyZW50JywKICAgICAgICBwcmVmaXg6IGZhbHNlLAogICAgICAgIHR5cGU6IDMgLyogVFlQRV9WQUxVRSAqLywKICAgICAgICBmb3JtYXQ6ICdjb2xvcicKICAgIH07CgogICAgdmFyIHBhcnNlQ29sb3JTdG9wID0gZnVuY3Rpb24gKGNvbnRleHQsIGFyZ3MpIHsKICAgICAgICB2YXIgY29sb3IgPSBjb2xvciQxLnBhcnNlKGNvbnRleHQsIGFyZ3NbMF0pOwogICAgICAgIHZhciBzdG9wID0gYXJnc1sxXTsKICAgICAgICByZXR1cm4gc3RvcCAmJiBpc0xlbmd0aFBlcmNlbnRhZ2Uoc3RvcCkgPyB7IGNvbG9yOiBjb2xvciwgc3RvcDogc3RvcCB9IDogeyBjb2xvcjogY29sb3IsIHN0b3A6IG51bGwgfTsKICAgIH07CiAgICB2YXIgcHJvY2Vzc0NvbG9yU3RvcHMgPSBmdW5jdGlvbiAoc3RvcHMsIGxpbmVMZW5ndGgpIHsKICAgICAgICB2YXIgZmlyc3QgPSBzdG9wc1swXTsKICAgICAgICB2YXIgbGFzdCA9IHN0b3BzW3N0b3BzLmxlbmd0aCAtIDFdOwogICAgICAgIGlmIChmaXJzdC5zdG9wID09PSBudWxsKSB7CiAgICAgICAgICAgIGZpcnN0LnN0b3AgPSBaRVJPX0xFTkdUSDsKICAgICAgICB9CiAgICAgICAgaWYgKGxhc3Quc3RvcCA9PT0gbnVsbCkgewogICAgICAgICAgICBsYXN0LnN0b3AgPSBIVU5EUkVEX1BFUkNFTlQ7CiAgICAgICAgfQogICAgICAgIHZhciBwcm9jZXNzU3RvcHMgPSBbXTsKICAgICAgICB2YXIgcHJldmlvdXMgPSAwOwogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RvcHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgdmFyIHN0b3BfMSA9IHN0b3BzW2ldLnN0b3A7CiAgICAgICAgICAgIGlmIChzdG9wXzEgIT09IG51bGwpIHsKICAgICAgICAgICAgICAgIHZhciBhYnNvbHV0ZVZhbHVlID0gZ2V0QWJzb2x1dGVWYWx1ZShzdG9wXzEsIGxpbmVMZW5ndGgpOwogICAgICAgICAgICAgICAgaWYgKGFic29sdXRlVmFsdWUgPiBwcmV2aW91cykgewogICAgICAgICAgICAgICAgICAgIHByb2Nlc3NTdG9wcy5wdXNoKGFic29sdXRlVmFsdWUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc1N0b3BzLnB1c2gocHJldmlvdXMpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcHJldmlvdXMgPSBhYnNvbHV0ZVZhbHVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgcHJvY2Vzc1N0b3BzLnB1c2gobnVsbCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgdmFyIGdhcEJlZ2luID0gbnVsbDsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb2Nlc3NTdG9wcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICB2YXIgc3RvcF8yID0gcHJvY2Vzc1N0b3BzW2ldOwogICAgICAgICAgICBpZiAoc3RvcF8yID09PSBudWxsKSB7CiAgICAgICAgICAgICAgICBpZiAoZ2FwQmVnaW4gPT09IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICBnYXBCZWdpbiA9IGk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAoZ2FwQmVnaW4gIT09IG51bGwpIHsKICAgICAgICAgICAgICAgIHZhciBnYXBMZW5ndGggPSBpIC0gZ2FwQmVnaW47CiAgICAgICAgICAgICAgICB2YXIgYmVmb3JlR2FwID0gcHJvY2Vzc1N0b3BzW2dhcEJlZ2luIC0gMV07CiAgICAgICAgICAgICAgICB2YXIgZ2FwVmFsdWUgPSAoc3RvcF8yIC0gYmVmb3JlR2FwKSAvIChnYXBMZW5ndGggKyAxKTsKICAgICAgICAgICAgICAgIGZvciAodmFyIGcgPSAxOyBnIDw9IGdhcExlbmd0aDsgZysrKSB7CiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc1N0b3BzW2dhcEJlZ2luICsgZyAtIDFdID0gZ2FwVmFsdWUgKiBnOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZ2FwQmVnaW4gPSBudWxsOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBzdG9wcy5tYXAoZnVuY3Rpb24gKF9hLCBpKSB7CiAgICAgICAgICAgIHZhciBjb2xvciA9IF9hLmNvbG9yOwogICAgICAgICAgICByZXR1cm4geyBjb2xvcjogY29sb3IsIHN0b3A6IE1hdGgubWF4KE1hdGgubWluKDEsIHByb2Nlc3NTdG9wc1tpXSAvIGxpbmVMZW5ndGgpLCAwKSB9OwogICAgICAgIH0pOwogICAgfTsKICAgIHZhciBnZXRBbmdsZUZyb21Db3JuZXIgPSBmdW5jdGlvbiAoY29ybmVyLCB3aWR0aCwgaGVpZ2h0KSB7CiAgICAgICAgdmFyIGNlbnRlclggPSB3aWR0aCAvIDI7CiAgICAgICAgdmFyIGNlbnRlclkgPSBoZWlnaHQgLyAyOwogICAgICAgIHZhciB4ID0gZ2V0QWJzb2x1dGVWYWx1ZShjb3JuZXJbMF0sIHdpZHRoKSAtIGNlbnRlclg7CiAgICAgICAgdmFyIHkgPSBjZW50ZXJZIC0gZ2V0QWJzb2x1dGVWYWx1ZShjb3JuZXJbMV0sIGhlaWdodCk7CiAgICAgICAgcmV0dXJuIChNYXRoLmF0YW4yKHksIHgpICsgTWF0aC5QSSAqIDIpICUgKE1hdGguUEkgKiAyKTsKICAgIH07CiAgICB2YXIgY2FsY3VsYXRlR3JhZGllbnREaXJlY3Rpb24gPSBmdW5jdGlvbiAoYW5nbGUsIHdpZHRoLCBoZWlnaHQpIHsKICAgICAgICB2YXIgcmFkaWFuID0gdHlwZW9mIGFuZ2xlID09PSAnbnVtYmVyJyA/IGFuZ2xlIDogZ2V0QW5nbGVGcm9tQ29ybmVyKGFuZ2xlLCB3aWR0aCwgaGVpZ2h0KTsKICAgICAgICB2YXIgbGluZUxlbmd0aCA9IE1hdGguYWJzKHdpZHRoICogTWF0aC5zaW4ocmFkaWFuKSkgKyBNYXRoLmFicyhoZWlnaHQgKiBNYXRoLmNvcyhyYWRpYW4pKTsKICAgICAgICB2YXIgaGFsZldpZHRoID0gd2lkdGggLyAyOwogICAgICAgIHZhciBoYWxmSGVpZ2h0ID0gaGVpZ2h0IC8gMjsKICAgICAgICB2YXIgaGFsZkxpbmVMZW5ndGggPSBsaW5lTGVuZ3RoIC8gMjsKICAgICAgICB2YXIgeURpZmYgPSBNYXRoLnNpbihyYWRpYW4gLSBNYXRoLlBJIC8gMikgKiBoYWxmTGluZUxlbmd0aDsKICAgICAgICB2YXIgeERpZmYgPSBNYXRoLmNvcyhyYWRpYW4gLSBNYXRoLlBJIC8gMikgKiBoYWxmTGluZUxlbmd0aDsKICAgICAgICByZXR1cm4gW2xpbmVMZW5ndGgsIGhhbGZXaWR0aCAtIHhEaWZmLCBoYWxmV2lkdGggKyB4RGlmZiwgaGFsZkhlaWdodCAtIHlEaWZmLCBoYWxmSGVpZ2h0ICsgeURpZmZdOwogICAgfTsKICAgIHZhciBkaXN0YW5jZSA9IGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiBNYXRoLnNxcnQoYSAqIGEgKyBiICogYik7IH07CiAgICB2YXIgZmluZENvcm5lciA9IGZ1bmN0aW9uICh3aWR0aCwgaGVpZ2h0LCB4LCB5LCBjbG9zZXN0KSB7CiAgICAgICAgdmFyIGNvcm5lcnMgPSBbCiAgICAgICAgICAgIFswLCAwXSwKICAgICAgICAgICAgWzAsIGhlaWdodF0sCiAgICAgICAgICAgIFt3aWR0aCwgMF0sCiAgICAgICAgICAgIFt3aWR0aCwgaGVpZ2h0XQogICAgICAgIF07CiAgICAgICAgcmV0dXJuIGNvcm5lcnMucmVkdWNlKGZ1bmN0aW9uIChzdGF0LCBjb3JuZXIpIHsKICAgICAgICAgICAgdmFyIGN4ID0gY29ybmVyWzBdLCBjeSA9IGNvcm5lclsxXTsKICAgICAgICAgICAgdmFyIGQgPSBkaXN0YW5jZSh4IC0gY3gsIHkgLSBjeSk7CiAgICAgICAgICAgIGlmIChjbG9zZXN0ID8gZCA8IHN0YXQub3B0aW11bURpc3RhbmNlIDogZCA+IHN0YXQub3B0aW11bURpc3RhbmNlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgIG9wdGltdW1Db3JuZXI6IGNvcm5lciwKICAgICAgICAgICAgICAgICAgICBvcHRpbXVtRGlzdGFuY2U6IGQKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHN0YXQ7CiAgICAgICAgfSwgewogICAgICAgICAgICBvcHRpbXVtRGlzdGFuY2U6IGNsb3Nlc3QgPyBJbmZpbml0eSA6IC1JbmZpbml0eSwKICAgICAgICAgICAgb3B0aW11bUNvcm5lcjogbnVsbAogICAgICAgIH0pLm9wdGltdW1Db3JuZXI7CiAgICB9OwogICAgdmFyIGNhbGN1bGF0ZVJhZGl1cyA9IGZ1bmN0aW9uIChncmFkaWVudCwgeCwgeSwgd2lkdGgsIGhlaWdodCkgewogICAgICAgIHZhciByeCA9IDA7CiAgICAgICAgdmFyIHJ5ID0gMDsKICAgICAgICBzd2l0Y2ggKGdyYWRpZW50LnNpemUpIHsKICAgICAgICAgICAgY2FzZSAwIC8qIENMT1NFU1RfU0lERSAqLzoKICAgICAgICAgICAgICAgIC8vIFRoZSBlbmRpbmcgc2hhcGUgaXMgc2l6ZWQgc28gdGhhdCB0aGF0IGl0IGV4YWN0bHkgbWVldHMgdGhlIHNpZGUgb2YgdGhlIGdyYWRpZW50IGJveCBjbG9zZXN0IHRvIHRoZSBncmFkaWVudOKAmXMgY2VudGVyLgogICAgICAgICAgICAgICAgLy8gSWYgdGhlIHNoYXBlIGlzIGFuIGVsbGlwc2UsIGl0IGV4YWN0bHkgbWVldHMgdGhlIGNsb3Nlc3Qgc2lkZSBpbiBlYWNoIGRpbWVuc2lvbi4KICAgICAgICAgICAgICAgIGlmIChncmFkaWVudC5zaGFwZSA9PT0gMCAvKiBDSVJDTEUgKi8pIHsKICAgICAgICAgICAgICAgICAgICByeCA9IHJ5ID0gTWF0aC5taW4oTWF0aC5hYnMoeCksIE1hdGguYWJzKHggLSB3aWR0aCksIE1hdGguYWJzKHkpLCBNYXRoLmFicyh5IC0gaGVpZ2h0KSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIGlmIChncmFkaWVudC5zaGFwZSA9PT0gMSAvKiBFTExJUFNFICovKSB7CiAgICAgICAgICAgICAgICAgICAgcnggPSBNYXRoLm1pbihNYXRoLmFicyh4KSwgTWF0aC5hYnMoeCAtIHdpZHRoKSk7CiAgICAgICAgICAgICAgICAgICAgcnkgPSBNYXRoLm1pbihNYXRoLmFicyh5KSwgTWF0aC5hYnMoeSAtIGhlaWdodCkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMiAvKiBDTE9TRVNUX0NPUk5FUiAqLzoKICAgICAgICAgICAgICAgIC8vIFRoZSBlbmRpbmcgc2hhcGUgaXMgc2l6ZWQgc28gdGhhdCB0aGF0IGl0IHBhc3NlcyB0aHJvdWdoIHRoZSBjb3JuZXIgb2YgdGhlIGdyYWRpZW50IGJveCBjbG9zZXN0IHRvIHRoZSBncmFkaWVudOKAmXMgY2VudGVyLgogICAgICAgICAgICAgICAgLy8gSWYgdGhlIHNoYXBlIGlzIGFuIGVsbGlwc2UsIHRoZSBlbmRpbmcgc2hhcGUgaXMgZ2l2ZW4gdGhlIHNhbWUgYXNwZWN0LXJhdGlvIGl0IHdvdWxkIGhhdmUgaWYgY2xvc2VzdC1zaWRlIHdlcmUgc3BlY2lmaWVkLgogICAgICAgICAgICAgICAgaWYgKGdyYWRpZW50LnNoYXBlID09PSAwIC8qIENJUkNMRSAqLykgewogICAgICAgICAgICAgICAgICAgIHJ4ID0gcnkgPSBNYXRoLm1pbihkaXN0YW5jZSh4LCB5KSwgZGlzdGFuY2UoeCwgeSAtIGhlaWdodCksIGRpc3RhbmNlKHggLSB3aWR0aCwgeSksIGRpc3RhbmNlKHggLSB3aWR0aCwgeSAtIGhlaWdodCkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSBpZiAoZ3JhZGllbnQuc2hhcGUgPT09IDEgLyogRUxMSVBTRSAqLykgewogICAgICAgICAgICAgICAgICAgIC8vIENvbXB1dGUgdGhlIHJhdGlvIHJ5L3J4ICh3aGljaCBpcyB0byBiZSB0aGUgc2FtZSBhcyBmb3IgImNsb3Nlc3Qtc2lkZSIpCiAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBNYXRoLm1pbihNYXRoLmFicyh5KSwgTWF0aC5hYnMoeSAtIGhlaWdodCkpIC8gTWF0aC5taW4oTWF0aC5hYnMoeCksIE1hdGguYWJzKHggLSB3aWR0aCkpOwogICAgICAgICAgICAgICAgICAgIHZhciBfYSA9IGZpbmRDb3JuZXIod2lkdGgsIGhlaWdodCwgeCwgeSwgdHJ1ZSksIGN4ID0gX2FbMF0sIGN5ID0gX2FbMV07CiAgICAgICAgICAgICAgICAgICAgcnggPSBkaXN0YW5jZShjeCAtIHgsIChjeSAtIHkpIC8gYyk7CiAgICAgICAgICAgICAgICAgICAgcnkgPSBjICogcng7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAxIC8qIEZBUlRIRVNUX1NJREUgKi86CiAgICAgICAgICAgICAgICAvLyBTYW1lIGFzIGNsb3Nlc3Qtc2lkZSwgZXhjZXB0IHRoZSBlbmRpbmcgc2hhcGUgaXMgc2l6ZWQgYmFzZWQgb24gdGhlIGZhcnRoZXN0IHNpZGUocykKICAgICAgICAgICAgICAgIGlmIChncmFkaWVudC5zaGFwZSA9PT0gMCAvKiBDSVJDTEUgKi8pIHsKICAgICAgICAgICAgICAgICAgICByeCA9IHJ5ID0gTWF0aC5tYXgoTWF0aC5hYnMoeCksIE1hdGguYWJzKHggLSB3aWR0aCksIE1hdGguYWJzKHkpLCBNYXRoLmFicyh5IC0gaGVpZ2h0KSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIGlmIChncmFkaWVudC5zaGFwZSA9PT0gMSAvKiBFTExJUFNFICovKSB7CiAgICAgICAgICAgICAgICAgICAgcnggPSBNYXRoLm1heChNYXRoLmFicyh4KSwgTWF0aC5hYnMoeCAtIHdpZHRoKSk7CiAgICAgICAgICAgICAgICAgICAgcnkgPSBNYXRoLm1heChNYXRoLmFicyh5KSwgTWF0aC5hYnMoeSAtIGhlaWdodCkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMyAvKiBGQVJUSEVTVF9DT1JORVIgKi86CiAgICAgICAgICAgICAgICAvLyBTYW1lIGFzIGNsb3Nlc3QtY29ybmVyLCBleGNlcHQgdGhlIGVuZGluZyBzaGFwZSBpcyBzaXplZCBiYXNlZCBvbiB0aGUgZmFydGhlc3QgY29ybmVyLgogICAgICAgICAgICAgICAgLy8gSWYgdGhlIHNoYXBlIGlzIGFuIGVsbGlwc2UsIHRoZSBlbmRpbmcgc2hhcGUgaXMgZ2l2ZW4gdGhlIHNhbWUgYXNwZWN0IHJhdGlvIGl0IHdvdWxkIGhhdmUgaWYgZmFydGhlc3Qtc2lkZSB3ZXJlIHNwZWNpZmllZC4KICAgICAgICAgICAgICAgIGlmIChncmFkaWVudC5zaGFwZSA9PT0gMCAvKiBDSVJDTEUgKi8pIHsKICAgICAgICAgICAgICAgICAgICByeCA9IHJ5ID0gTWF0aC5tYXgoZGlzdGFuY2UoeCwgeSksIGRpc3RhbmNlKHgsIHkgLSBoZWlnaHQpLCBkaXN0YW5jZSh4IC0gd2lkdGgsIHkpLCBkaXN0YW5jZSh4IC0gd2lkdGgsIHkgLSBoZWlnaHQpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKGdyYWRpZW50LnNoYXBlID09PSAxIC8qIEVMTElQU0UgKi8pIHsKICAgICAgICAgICAgICAgICAgICAvLyBDb21wdXRlIHRoZSByYXRpbyByeS9yeCAod2hpY2ggaXMgdG8gYmUgdGhlIHNhbWUgYXMgZm9yICJmYXJ0aGVzdC1zaWRlIikKICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IE1hdGgubWF4KE1hdGguYWJzKHkpLCBNYXRoLmFicyh5IC0gaGVpZ2h0KSkgLyBNYXRoLm1heChNYXRoLmFicyh4KSwgTWF0aC5hYnMoeCAtIHdpZHRoKSk7CiAgICAgICAgICAgICAgICAgICAgdmFyIF9iID0gZmluZENvcm5lcih3aWR0aCwgaGVpZ2h0LCB4LCB5LCBmYWxzZSksIGN4ID0gX2JbMF0sIGN5ID0gX2JbMV07CiAgICAgICAgICAgICAgICAgICAgcnggPSBkaXN0YW5jZShjeCAtIHgsIChjeSAtIHkpIC8gYyk7CiAgICAgICAgICAgICAgICAgICAgcnkgPSBjICogcng7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZ3JhZGllbnQuc2l6ZSkpIHsKICAgICAgICAgICAgcnggPSBnZXRBYnNvbHV0ZVZhbHVlKGdyYWRpZW50LnNpemVbMF0sIHdpZHRoKTsKICAgICAgICAgICAgcnkgPSBncmFkaWVudC5zaXplLmxlbmd0aCA9PT0gMiA/IGdldEFic29sdXRlVmFsdWUoZ3JhZGllbnQuc2l6ZVsxXSwgaGVpZ2h0KSA6IHJ4OwogICAgICAgIH0KICAgICAgICByZXR1cm4gW3J4LCByeV07CiAgICB9OwoKICAgIHZhciBsaW5lYXJHcmFkaWVudCA9IGZ1bmN0aW9uIChjb250ZXh0LCB0b2tlbnMpIHsKICAgICAgICB2YXIgYW5nbGUkMSA9IGRlZygxODApOwogICAgICAgIHZhciBzdG9wcyA9IFtdOwogICAgICAgIHBhcnNlRnVuY3Rpb25BcmdzKHRva2VucykuZm9yRWFjaChmdW5jdGlvbiAoYXJnLCBpKSB7CiAgICAgICAgICAgIGlmIChpID09PSAwKSB7CiAgICAgICAgICAgICAgICB2YXIgZmlyc3RUb2tlbiA9IGFyZ1swXTsKICAgICAgICAgICAgICAgIGlmIChmaXJzdFRva2VuLnR5cGUgPT09IDIwIC8qIElERU5UX1RPS0VOICovICYmIGZpcnN0VG9rZW4udmFsdWUgPT09ICd0bycpIHsKICAgICAgICAgICAgICAgICAgICBhbmdsZSQxID0gcGFyc2VOYW1lZFNpZGUoYXJnKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIGlmIChpc0FuZ2xlKGZpcnN0VG9rZW4pKSB7CiAgICAgICAgICAgICAgICAgICAgYW5nbGUkMSA9IGFuZ2xlLnBhcnNlKGNvbnRleHQsIGZpcnN0VG9rZW4pOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgY29sb3JTdG9wID0gcGFyc2VDb2xvclN0b3AoY29udGV4dCwgYXJnKTsKICAgICAgICAgICAgc3RvcHMucHVzaChjb2xvclN0b3ApOwogICAgICAgIH0pOwogICAgICAgIHJldHVybiB7IGFuZ2xlOiBhbmdsZSQxLCBzdG9wczogc3RvcHMsIHR5cGU6IDEgLyogTElORUFSX0dSQURJRU5UICovIH07CiAgICB9OwoKICAgIHZhciBwcmVmaXhMaW5lYXJHcmFkaWVudCA9IGZ1bmN0aW9uIChjb250ZXh0LCB0b2tlbnMpIHsKICAgICAgICB2YXIgYW5nbGUkMSA9IGRlZygxODApOwogICAgICAgIHZhciBzdG9wcyA9IFtdOwogICAgICAgIHBhcnNlRnVuY3Rpb25BcmdzKHRva2VucykuZm9yRWFjaChmdW5jdGlvbiAoYXJnLCBpKSB7CiAgICAgICAgICAgIGlmIChpID09PSAwKSB7CiAgICAgICAgICAgICAgICB2YXIgZmlyc3RUb2tlbiA9IGFyZ1swXTsKICAgICAgICAgICAgICAgIGlmIChmaXJzdFRva2VuLnR5cGUgPT09IDIwIC8qIElERU5UX1RPS0VOICovICYmCiAgICAgICAgICAgICAgICAgICAgWyd0b3AnLCAnbGVmdCcsICdyaWdodCcsICdib3R0b20nXS5pbmRleE9mKGZpcnN0VG9rZW4udmFsdWUpICE9PSAtMSkgewogICAgICAgICAgICAgICAgICAgIGFuZ2xlJDEgPSBwYXJzZU5hbWVkU2lkZShhcmcpOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzQW5nbGUoZmlyc3RUb2tlbikpIHsKICAgICAgICAgICAgICAgICAgICBhbmdsZSQxID0gKGFuZ2xlLnBhcnNlKGNvbnRleHQsIGZpcnN0VG9rZW4pICsgZGVnKDI3MCkpICUgZGVnKDM2MCk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciBjb2xvclN0b3AgPSBwYXJzZUNvbG9yU3RvcChjb250ZXh0LCBhcmcpOwogICAgICAgICAgICBzdG9wcy5wdXNoKGNvbG9yU3RvcCk7CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgYW5nbGU6IGFuZ2xlJDEsCiAgICAgICAgICAgIHN0b3BzOiBzdG9wcywKICAgICAgICAgICAgdHlwZTogMSAvKiBMSU5FQVJfR1JBRElFTlQgKi8KICAgICAgICB9OwogICAgfTsKCiAgICB2YXIgd2Via2l0R3JhZGllbnQgPSBmdW5jdGlvbiAoY29udGV4dCwgdG9rZW5zKSB7CiAgICAgICAgdmFyIGFuZ2xlID0gZGVnKDE4MCk7CiAgICAgICAgdmFyIHN0b3BzID0gW107CiAgICAgICAgdmFyIHR5cGUgPSAxIC8qIExJTkVBUl9HUkFESUVOVCAqLzsKICAgICAgICB2YXIgc2hhcGUgPSAwIC8qIENJUkNMRSAqLzsKICAgICAgICB2YXIgc2l6ZSA9IDMgLyogRkFSVEhFU1RfQ09STkVSICovOwogICAgICAgIHZhciBwb3NpdGlvbiA9IFtdOwogICAgICAgIHBhcnNlRnVuY3Rpb25BcmdzKHRva2VucykuZm9yRWFjaChmdW5jdGlvbiAoYXJnLCBpKSB7CiAgICAgICAgICAgIHZhciBmaXJzdFRva2VuID0gYXJnWzBdOwogICAgICAgICAgICBpZiAoaSA9PT0gMCkgewogICAgICAgICAgICAgICAgaWYgKGlzSWRlbnRUb2tlbihmaXJzdFRva2VuKSAmJiBmaXJzdFRva2VuLnZhbHVlID09PSAnbGluZWFyJykgewogICAgICAgICAgICAgICAgICAgIHR5cGUgPSAxIC8qIExJTkVBUl9HUkFESUVOVCAqLzsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIGlmIChpc0lkZW50VG9rZW4oZmlyc3RUb2tlbikgJiYgZmlyc3RUb2tlbi52YWx1ZSA9PT0gJ3JhZGlhbCcpIHsKICAgICAgICAgICAgICAgICAgICB0eXBlID0gMiAvKiBSQURJQUxfR1JBRElFTlQgKi87CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChmaXJzdFRva2VuLnR5cGUgPT09IDE4IC8qIEZVTkNUSU9OICovKSB7CiAgICAgICAgICAgICAgICBpZiAoZmlyc3RUb2tlbi5uYW1lID09PSAnZnJvbScpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgY29sb3IgPSBjb2xvciQxLnBhcnNlKGNvbnRleHQsIGZpcnN0VG9rZW4udmFsdWVzWzBdKTsKICAgICAgICAgICAgICAgICAgICBzdG9wcy5wdXNoKHsgc3RvcDogWkVST19MRU5HVEgsIGNvbG9yOiBjb2xvciB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKGZpcnN0VG9rZW4ubmFtZSA9PT0gJ3RvJykgewogICAgICAgICAgICAgICAgICAgIHZhciBjb2xvciA9IGNvbG9yJDEucGFyc2UoY29udGV4dCwgZmlyc3RUb2tlbi52YWx1ZXNbMF0pOwogICAgICAgICAgICAgICAgICAgIHN0b3BzLnB1c2goeyBzdG9wOiBIVU5EUkVEX1BFUkNFTlQsIGNvbG9yOiBjb2xvciB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKGZpcnN0VG9rZW4ubmFtZSA9PT0gJ2NvbG9yLXN0b3AnKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlcyA9IGZpcnN0VG9rZW4udmFsdWVzLmZpbHRlcihub25GdW5jdGlvbkFyZ1NlcGFyYXRvcik7CiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlcy5sZW5ndGggPT09IDIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbG9yID0gY29sb3IkMS5wYXJzZShjb250ZXh0LCB2YWx1ZXNbMV0pOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RvcF8xID0gdmFsdWVzWzBdOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNOdW1iZXJUb2tlbihzdG9wXzEpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdG9wcy5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdG9wOiB7IHR5cGU6IDE2IC8qIFBFUkNFTlRBR0VfVE9LRU4gKi8sIG51bWJlcjogc3RvcF8xLm51bWJlciAqIDEwMCwgZmxhZ3M6IHN0b3BfMS5mbGFncyB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBjb2xvcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICByZXR1cm4gdHlwZSA9PT0gMSAvKiBMSU5FQVJfR1JBRElFTlQgKi8KICAgICAgICAgICAgPyB7CiAgICAgICAgICAgICAgICBhbmdsZTogKGFuZ2xlICsgZGVnKDE4MCkpICUgZGVnKDM2MCksCiAgICAgICAgICAgICAgICBzdG9wczogc3RvcHMsCiAgICAgICAgICAgICAgICB0eXBlOiB0eXBlCiAgICAgICAgICAgIH0KICAgICAgICAgICAgOiB7IHNpemU6IHNpemUsIHNoYXBlOiBzaGFwZSwgc3RvcHM6IHN0b3BzLCBwb3NpdGlvbjogcG9zaXRpb24sIHR5cGU6IHR5cGUgfTsKICAgIH07CgogICAgdmFyIENMT1NFU1RfU0lERSA9ICdjbG9zZXN0LXNpZGUnOwogICAgdmFyIEZBUlRIRVNUX1NJREUgPSAnZmFydGhlc3Qtc2lkZSc7CiAgICB2YXIgQ0xPU0VTVF9DT1JORVIgPSAnY2xvc2VzdC1jb3JuZXInOwogICAgdmFyIEZBUlRIRVNUX0NPUk5FUiA9ICdmYXJ0aGVzdC1jb3JuZXInOwogICAgdmFyIENJUkNMRSA9ICdjaXJjbGUnOwogICAgdmFyIEVMTElQU0UgPSAnZWxsaXBzZSc7CiAgICB2YXIgQ09WRVIgPSAnY292ZXInOwogICAgdmFyIENPTlRBSU4gPSAnY29udGFpbic7CiAgICB2YXIgcmFkaWFsR3JhZGllbnQgPSBmdW5jdGlvbiAoY29udGV4dCwgdG9rZW5zKSB7CiAgICAgICAgdmFyIHNoYXBlID0gMCAvKiBDSVJDTEUgKi87CiAgICAgICAgdmFyIHNpemUgPSAzIC8qIEZBUlRIRVNUX0NPUk5FUiAqLzsKICAgICAgICB2YXIgc3RvcHMgPSBbXTsKICAgICAgICB2YXIgcG9zaXRpb24gPSBbXTsKICAgICAgICBwYXJzZUZ1bmN0aW9uQXJncyh0b2tlbnMpLmZvckVhY2goZnVuY3Rpb24gKGFyZywgaSkgewogICAgICAgICAgICB2YXIgaXNDb2xvclN0b3AgPSB0cnVlOwogICAgICAgICAgICBpZiAoaSA9PT0gMCkgewogICAgICAgICAgICAgICAgdmFyIGlzQXRQb3NpdGlvbl8xID0gZmFsc2U7CiAgICAgICAgICAgICAgICBpc0NvbG9yU3RvcCA9IGFyZy5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgdG9rZW4pIHsKICAgICAgICAgICAgICAgICAgICBpZiAoaXNBdFBvc2l0aW9uXzEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzSWRlbnRUb2tlbih0b2tlbikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodG9rZW4udmFsdWUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdjZW50ZXInOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbi5wdXNoKEZJRlRZX1BFUkNFTlQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWNjOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3RvcCc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnbGVmdCc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uLnB1c2goWkVST19MRU5HVEgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWNjOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3JpZ2h0JzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdib3R0b20nOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbi5wdXNoKEhVTkRSRURfUEVSQ0VOVCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhY2M7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNMZW5ndGhQZXJjZW50YWdlKHRva2VuKSB8fCBpc0xlbmd0aCh0b2tlbikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uLnB1c2godG9rZW4pOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzSWRlbnRUb2tlbih0b2tlbikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0b2tlbi52YWx1ZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBDSVJDTEU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hhcGUgPSAwIC8qIENJUkNMRSAqLzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIEVMTElQU0U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hhcGUgPSAxIC8qIEVMTElQU0UgKi87CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnYXQnOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQXRQb3NpdGlvbl8xID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIENMT1NFU1RfU0lERToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaXplID0gMCAvKiBDTE9TRVNUX1NJREUgKi87CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBDT1ZFUjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRkFSVEhFU1RfU0lERToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaXplID0gMSAvKiBGQVJUSEVTVF9TSURFICovOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgQ09OVEFJTjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgQ0xPU0VTVF9DT1JORVI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZSA9IDIgLyogQ0xPU0VTVF9DT1JORVIgKi87CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBGQVJUSEVTVF9DT1JORVI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZSA9IDMgLyogRkFSVEhFU1RfQ09STkVSICovOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChpc0xlbmd0aCh0b2tlbikgfHwgaXNMZW5ndGhQZXJjZW50YWdlKHRva2VuKSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoc2l6ZSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpemUgPSBbXTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBzaXplLnB1c2godG9rZW4pOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiBhY2M7CiAgICAgICAgICAgICAgICB9LCBpc0NvbG9yU3RvcCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGlzQ29sb3JTdG9wKSB7CiAgICAgICAgICAgICAgICB2YXIgY29sb3JTdG9wID0gcGFyc2VDb2xvclN0b3AoY29udGV4dCwgYXJnKTsKICAgICAgICAgICAgICAgIHN0b3BzLnB1c2goY29sb3JTdG9wKTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHJldHVybiB7IHNpemU6IHNpemUsIHNoYXBlOiBzaGFwZSwgc3RvcHM6IHN0b3BzLCBwb3NpdGlvbjogcG9zaXRpb24sIHR5cGU6IDIgLyogUkFESUFMX0dSQURJRU5UICovIH07CiAgICB9OwoKICAgIHZhciBwcmVmaXhSYWRpYWxHcmFkaWVudCA9IGZ1bmN0aW9uIChjb250ZXh0LCB0b2tlbnMpIHsKICAgICAgICB2YXIgc2hhcGUgPSAwIC8qIENJUkNMRSAqLzsKICAgICAgICB2YXIgc2l6ZSA9IDMgLyogRkFSVEhFU1RfQ09STkVSICovOwogICAgICAgIHZhciBzdG9wcyA9IFtdOwogICAgICAgIHZhciBwb3NpdGlvbiA9IFtdOwogICAgICAgIHBhcnNlRnVuY3Rpb25BcmdzKHRva2VucykuZm9yRWFjaChmdW5jdGlvbiAoYXJnLCBpKSB7CiAgICAgICAgICAgIHZhciBpc0NvbG9yU3RvcCA9IHRydWU7CiAgICAgICAgICAgIGlmIChpID09PSAwKSB7CiAgICAgICAgICAgICAgICBpc0NvbG9yU3RvcCA9IGFyZy5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgdG9rZW4pIHsKICAgICAgICAgICAgICAgICAgICBpZiAoaXNJZGVudFRva2VuKHRva2VuKSkgewogICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRva2VuLnZhbHVlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdjZW50ZXInOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uLnB1c2goRklGVFlfUEVSQ0VOVCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAndG9wJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2xlZnQnOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uLnB1c2goWkVST19MRU5HVEgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3JpZ2h0JzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2JvdHRvbSc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb24ucHVzaChIVU5EUkVEX1BFUkNFTlQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChpc0xlbmd0aFBlcmNlbnRhZ2UodG9rZW4pIHx8IGlzTGVuZ3RoKHRva2VuKSkgewogICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbi5wdXNoKHRva2VuKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWNjOwogICAgICAgICAgICAgICAgfSwgaXNDb2xvclN0b3ApOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYgKGkgPT09IDEpIHsKICAgICAgICAgICAgICAgIGlzQ29sb3JTdG9wID0gYXJnLnJlZHVjZShmdW5jdGlvbiAoYWNjLCB0b2tlbikgewogICAgICAgICAgICAgICAgICAgIGlmIChpc0lkZW50VG9rZW4odG9rZW4pKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodG9rZW4udmFsdWUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgQ0lSQ0xFOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoYXBlID0gMCAvKiBDSVJDTEUgKi87CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBFTExJUFNFOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoYXBlID0gMSAvKiBFTExJUFNFICovOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgQ09OVEFJTjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgQ0xPU0VTVF9TSURFOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpemUgPSAwIC8qIENMT1NFU1RfU0lERSAqLzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIEZBUlRIRVNUX1NJREU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZSA9IDEgLyogRkFSVEhFU1RfU0lERSAqLzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIENMT1NFU1RfQ09STkVSOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpemUgPSAyIC8qIENMT1NFU1RfQ09STkVSICovOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgQ09WRVI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIEZBUlRIRVNUX0NPUk5FUjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaXplID0gMyAvKiBGQVJUSEVTVF9DT1JORVIgKi87CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzTGVuZ3RoKHRva2VuKSB8fCBpc0xlbmd0aFBlcmNlbnRhZ2UodG9rZW4pKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShzaXplKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZSA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHNpemUucHVzaCh0b2tlbik7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFjYzsKICAgICAgICAgICAgICAgIH0sIGlzQ29sb3JTdG9wKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoaXNDb2xvclN0b3ApIHsKICAgICAgICAgICAgICAgIHZhciBjb2xvclN0b3AgPSBwYXJzZUNvbG9yU3RvcChjb250ZXh0LCBhcmcpOwogICAgICAgICAgICAgICAgc3RvcHMucHVzaChjb2xvclN0b3ApOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIHsgc2l6ZTogc2l6ZSwgc2hhcGU6IHNoYXBlLCBzdG9wczogc3RvcHMsIHBvc2l0aW9uOiBwb3NpdGlvbiwgdHlwZTogMiAvKiBSQURJQUxfR1JBRElFTlQgKi8gfTsKICAgIH07CgogICAgdmFyIGlzTGluZWFyR3JhZGllbnQgPSBmdW5jdGlvbiAoYmFja2dyb3VuZCkgewogICAgICAgIHJldHVybiBiYWNrZ3JvdW5kLnR5cGUgPT09IDEgLyogTElORUFSX0dSQURJRU5UICovOwogICAgfTsKICAgIHZhciBpc1JhZGlhbEdyYWRpZW50ID0gZnVuY3Rpb24gKGJhY2tncm91bmQpIHsKICAgICAgICByZXR1cm4gYmFja2dyb3VuZC50eXBlID09PSAyIC8qIFJBRElBTF9HUkFESUVOVCAqLzsKICAgIH07CiAgICB2YXIgaW1hZ2UgPSB7CiAgICAgICAgbmFtZTogJ2ltYWdlJywKICAgICAgICBwYXJzZTogZnVuY3Rpb24gKGNvbnRleHQsIHZhbHVlKSB7CiAgICAgICAgICAgIGlmICh2YWx1ZS50eXBlID09PSAyMiAvKiBVUkxfVE9LRU4gKi8pIHsKICAgICAgICAgICAgICAgIHZhciBpbWFnZV8xID0geyB1cmw6IHZhbHVlLnZhbHVlLCB0eXBlOiAwIC8qIFVSTCAqLyB9OwogICAgICAgICAgICAgICAgY29udGV4dC5jYWNoZS5hZGRJbWFnZSh2YWx1ZS52YWx1ZSk7CiAgICAgICAgICAgICAgICByZXR1cm4gaW1hZ2VfMTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAodmFsdWUudHlwZSA9PT0gMTggLyogRlVOQ1RJT04gKi8pIHsKICAgICAgICAgICAgICAgIHZhciBpbWFnZUZ1bmN0aW9uID0gU1VQUE9SVEVEX0lNQUdFX0ZVTkNUSU9OU1t2YWx1ZS5uYW1lXTsKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgaW1hZ2VGdW5jdGlvbiA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIkF0dGVtcHRpbmcgdG8gcGFyc2UgYW4gdW5zdXBwb3J0ZWQgaW1hZ2UgZnVuY3Rpb24gXCIiICsgdmFsdWUubmFtZSArICJcIiIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIGltYWdlRnVuY3Rpb24oY29udGV4dCwgdmFsdWUudmFsdWVzKTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIlVuc3VwcG9ydGVkIGltYWdlIHR5cGUgIiArIHZhbHVlLnR5cGUpOwogICAgICAgIH0KICAgIH07CiAgICBmdW5jdGlvbiBpc1N1cHBvcnRlZEltYWdlKHZhbHVlKSB7CiAgICAgICAgcmV0dXJuICghKHZhbHVlLnR5cGUgPT09IDIwIC8qIElERU5UX1RPS0VOICovICYmIHZhbHVlLnZhbHVlID09PSAnbm9uZScpICYmCiAgICAgICAgICAgICh2YWx1ZS50eXBlICE9PSAxOCAvKiBGVU5DVElPTiAqLyB8fCAhIVNVUFBPUlRFRF9JTUFHRV9GVU5DVElPTlNbdmFsdWUubmFtZV0pKTsKICAgIH0KICAgIHZhciBTVVBQT1JURURfSU1BR0VfRlVOQ1RJT05TID0gewogICAgICAgICdsaW5lYXItZ3JhZGllbnQnOiBsaW5lYXJHcmFkaWVudCwKICAgICAgICAnLW1vei1saW5lYXItZ3JhZGllbnQnOiBwcmVmaXhMaW5lYXJHcmFkaWVudCwKICAgICAgICAnLW1zLWxpbmVhci1ncmFkaWVudCc6IHByZWZpeExpbmVhckdyYWRpZW50LAogICAgICAgICctby1saW5lYXItZ3JhZGllbnQnOiBwcmVmaXhMaW5lYXJHcmFkaWVudCwKICAgICAgICAnLXdlYmtpdC1saW5lYXItZ3JhZGllbnQnOiBwcmVmaXhMaW5lYXJHcmFkaWVudCwKICAgICAgICAncmFkaWFsLWdyYWRpZW50JzogcmFkaWFsR3JhZGllbnQsCiAgICAgICAgJy1tb3otcmFkaWFsLWdyYWRpZW50JzogcHJlZml4UmFkaWFsR3JhZGllbnQsCiAgICAgICAgJy1tcy1yYWRpYWwtZ3JhZGllbnQnOiBwcmVmaXhSYWRpYWxHcmFkaWVudCwKICAgICAgICAnLW8tcmFkaWFsLWdyYWRpZW50JzogcHJlZml4UmFkaWFsR3JhZGllbnQsCiAgICAgICAgJy13ZWJraXQtcmFkaWFsLWdyYWRpZW50JzogcHJlZml4UmFkaWFsR3JhZGllbnQsCiAgICAgICAgJy13ZWJraXQtZ3JhZGllbnQnOiB3ZWJraXRHcmFkaWVudAogICAgfTsKCiAgICB2YXIgYmFja2dyb3VuZEltYWdlID0gewogICAgICAgIG5hbWU6ICdiYWNrZ3JvdW5kLWltYWdlJywKICAgICAgICBpbml0aWFsVmFsdWU6ICdub25lJywKICAgICAgICB0eXBlOiAxIC8qIExJU1QgKi8sCiAgICAgICAgcHJlZml4OiBmYWxzZSwKICAgICAgICBwYXJzZTogZnVuY3Rpb24gKGNvbnRleHQsIHRva2VucykgewogICAgICAgICAgICBpZiAodG9rZW5zLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICAgICAgcmV0dXJuIFtdOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciBmaXJzdCA9IHRva2Vuc1swXTsKICAgICAgICAgICAgaWYgKGZpcnN0LnR5cGUgPT09IDIwIC8qIElERU5UX1RPS0VOICovICYmIGZpcnN0LnZhbHVlID09PSAnbm9uZScpIHsKICAgICAgICAgICAgICAgIHJldHVybiBbXTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gdG9rZW5zCiAgICAgICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gbm9uRnVuY3Rpb25BcmdTZXBhcmF0b3IodmFsdWUpICYmIGlzU3VwcG9ydGVkSW1hZ2UodmFsdWUpOyB9KQogICAgICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIGltYWdlLnBhcnNlKGNvbnRleHQsIHZhbHVlKTsgfSk7CiAgICAgICAgfQogICAgfTsKCiAgICB2YXIgYmFja2dyb3VuZE9yaWdpbiA9IHsKICAgICAgICBuYW1lOiAnYmFja2dyb3VuZC1vcmlnaW4nLAogICAgICAgIGluaXRpYWxWYWx1ZTogJ2JvcmRlci1ib3gnLAogICAgICAgIHByZWZpeDogZmFsc2UsCiAgICAgICAgdHlwZTogMSAvKiBMSVNUICovLAogICAgICAgIHBhcnNlOiBmdW5jdGlvbiAoX2NvbnRleHQsIHRva2VucykgewogICAgICAgICAgICByZXR1cm4gdG9rZW5zLm1hcChmdW5jdGlvbiAodG9rZW4pIHsKICAgICAgICAgICAgICAgIGlmIChpc0lkZW50VG9rZW4odG9rZW4pKSB7CiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0b2tlbi52YWx1ZSkgewogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdwYWRkaW5nLWJveCc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMSAvKiBQQURESU5HX0JPWCAqLzsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnY29udGVudC1ib3gnOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDIgLyogQ09OVEVOVF9CT1ggKi87CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIDAgLyogQk9SREVSX0JPWCAqLzsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgfTsKCiAgICB2YXIgYmFja2dyb3VuZFBvc2l0aW9uID0gewogICAgICAgIG5hbWU6ICdiYWNrZ3JvdW5kLXBvc2l0aW9uJywKICAgICAgICBpbml0aWFsVmFsdWU6ICcwJSAwJScsCiAgICAgICAgdHlwZTogMSAvKiBMSVNUICovLAogICAgICAgIHByZWZpeDogZmFsc2UsCiAgICAgICAgcGFyc2U6IGZ1bmN0aW9uIChfY29udGV4dCwgdG9rZW5zKSB7CiAgICAgICAgICAgIHJldHVybiBwYXJzZUZ1bmN0aW9uQXJncyh0b2tlbnMpCiAgICAgICAgICAgICAgICAubWFwKGZ1bmN0aW9uICh2YWx1ZXMpIHsgcmV0dXJuIHZhbHVlcy5maWx0ZXIoaXNMZW5ndGhQZXJjZW50YWdlKTsgfSkKICAgICAgICAgICAgICAgIC5tYXAocGFyc2VMZW5ndGhQZXJjZW50YWdlVHVwbGUpOwogICAgICAgIH0KICAgIH07CgogICAgdmFyIGJhY2tncm91bmRSZXBlYXQgPSB7CiAgICAgICAgbmFtZTogJ2JhY2tncm91bmQtcmVwZWF0JywKICAgICAgICBpbml0aWFsVmFsdWU6ICdyZXBlYXQnLAogICAgICAgIHByZWZpeDogZmFsc2UsCiAgICAgICAgdHlwZTogMSAvKiBMSVNUICovLAogICAgICAgIHBhcnNlOiBmdW5jdGlvbiAoX2NvbnRleHQsIHRva2VucykgewogICAgICAgICAgICByZXR1cm4gcGFyc2VGdW5jdGlvbkFyZ3ModG9rZW5zKQogICAgICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAodmFsdWVzKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWVzCiAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihpc0lkZW50VG9rZW4pCiAgICAgICAgICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAodG9rZW4pIHsgcmV0dXJuIHRva2VuLnZhbHVlOyB9KQogICAgICAgICAgICAgICAgICAgIC5qb2luKCcgJyk7CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAubWFwKHBhcnNlQmFja2dyb3VuZFJlcGVhdCk7CiAgICAgICAgfQogICAgfTsKICAgIHZhciBwYXJzZUJhY2tncm91bmRSZXBlYXQgPSBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICBzd2l0Y2ggKHZhbHVlKSB7CiAgICAgICAgICAgIGNhc2UgJ25vLXJlcGVhdCc6CiAgICAgICAgICAgICAgICByZXR1cm4gMSAvKiBOT19SRVBFQVQgKi87CiAgICAgICAgICAgIGNhc2UgJ3JlcGVhdC14JzoKICAgICAgICAgICAgY2FzZSAncmVwZWF0IG5vLXJlcGVhdCc6CiAgICAgICAgICAgICAgICByZXR1cm4gMiAvKiBSRVBFQVRfWCAqLzsKICAgICAgICAgICAgY2FzZSAncmVwZWF0LXknOgogICAgICAgICAgICBjYXNlICduby1yZXBlYXQgcmVwZWF0JzoKICAgICAgICAgICAgICAgIHJldHVybiAzIC8qIFJFUEVBVF9ZICovOwogICAgICAgICAgICBjYXNlICdyZXBlYXQnOgogICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgcmV0dXJuIDAgLyogUkVQRUFUICovOwogICAgICAgIH0KICAgIH07CgogICAgdmFyIEJBQ0tHUk9VTkRfU0laRTsKICAgIChmdW5jdGlvbiAoQkFDS0dST1VORF9TSVpFKSB7CiAgICAgICAgQkFDS0dST1VORF9TSVpFWyJBVVRPIl0gPSAiYXV0byI7CiAgICAgICAgQkFDS0dST1VORF9TSVpFWyJDT05UQUlOIl0gPSAiY29udGFpbiI7CiAgICAgICAgQkFDS0dST1VORF9TSVpFWyJDT1ZFUiJdID0gImNvdmVyIjsKICAgIH0pKEJBQ0tHUk9VTkRfU0laRSB8fCAoQkFDS0dST1VORF9TSVpFID0ge30pKTsKICAgIHZhciBiYWNrZ3JvdW5kU2l6ZSA9IHsKICAgICAgICBuYW1lOiAnYmFja2dyb3VuZC1zaXplJywKICAgICAgICBpbml0aWFsVmFsdWU6ICcwJywKICAgICAgICBwcmVmaXg6IGZhbHNlLAogICAgICAgIHR5cGU6IDEgLyogTElTVCAqLywKICAgICAgICBwYXJzZTogZnVuY3Rpb24gKF9jb250ZXh0LCB0b2tlbnMpIHsKICAgICAgICAgICAgcmV0dXJuIHBhcnNlRnVuY3Rpb25BcmdzKHRva2VucykubWFwKGZ1bmN0aW9uICh2YWx1ZXMpIHsgcmV0dXJuIHZhbHVlcy5maWx0ZXIoaXNCYWNrZ3JvdW5kU2l6ZUluZm9Ub2tlbik7IH0pOwogICAgICAgIH0KICAgIH07CiAgICB2YXIgaXNCYWNrZ3JvdW5kU2l6ZUluZm9Ub2tlbiA9IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgIHJldHVybiBpc0lkZW50VG9rZW4odmFsdWUpIHx8IGlzTGVuZ3RoUGVyY2VudGFnZSh2YWx1ZSk7CiAgICB9OwoKICAgIHZhciBib3JkZXJDb2xvckZvclNpZGUgPSBmdW5jdGlvbiAoc2lkZSkgeyByZXR1cm4gKHsKICAgICAgICBuYW1lOiAiYm9yZGVyLSIgKyBzaWRlICsgIi1jb2xvciIsCiAgICAgICAgaW5pdGlhbFZhbHVlOiAndHJhbnNwYXJlbnQnLAogICAgICAgIHByZWZpeDogZmFsc2UsCiAgICAgICAgdHlwZTogMyAvKiBUWVBFX1ZBTFVFICovLAogICAgICAgIGZvcm1hdDogJ2NvbG9yJwogICAgfSk7IH07CiAgICB2YXIgYm9yZGVyVG9wQ29sb3IgPSBib3JkZXJDb2xvckZvclNpZGUoJ3RvcCcpOwogICAgdmFyIGJvcmRlclJpZ2h0Q29sb3IgPSBib3JkZXJDb2xvckZvclNpZGUoJ3JpZ2h0Jyk7CiAgICB2YXIgYm9yZGVyQm90dG9tQ29sb3IgPSBib3JkZXJDb2xvckZvclNpZGUoJ2JvdHRvbScpOwogICAgdmFyIGJvcmRlckxlZnRDb2xvciA9IGJvcmRlckNvbG9yRm9yU2lkZSgnbGVmdCcpOwoKICAgIHZhciBib3JkZXJSYWRpdXNGb3JTaWRlID0gZnVuY3Rpb24gKHNpZGUpIHsgcmV0dXJuICh7CiAgICAgICAgbmFtZTogImJvcmRlci1yYWRpdXMtIiArIHNpZGUsCiAgICAgICAgaW5pdGlhbFZhbHVlOiAnMCAwJywKICAgICAgICBwcmVmaXg6IGZhbHNlLAogICAgICAgIHR5cGU6IDEgLyogTElTVCAqLywKICAgICAgICBwYXJzZTogZnVuY3Rpb24gKF9jb250ZXh0LCB0b2tlbnMpIHsKICAgICAgICAgICAgcmV0dXJuIHBhcnNlTGVuZ3RoUGVyY2VudGFnZVR1cGxlKHRva2Vucy5maWx0ZXIoaXNMZW5ndGhQZXJjZW50YWdlKSk7CiAgICAgICAgfQogICAgfSk7IH07CiAgICB2YXIgYm9yZGVyVG9wTGVmdFJhZGl1cyA9IGJvcmRlclJhZGl1c0ZvclNpZGUoJ3RvcC1sZWZ0Jyk7CiAgICB2YXIgYm9yZGVyVG9wUmlnaHRSYWRpdXMgPSBib3JkZXJSYWRpdXNGb3JTaWRlKCd0b3AtcmlnaHQnKTsKICAgIHZhciBib3JkZXJCb3R0b21SaWdodFJhZGl1cyA9IGJvcmRlclJhZGl1c0ZvclNpZGUoJ2JvdHRvbS1yaWdodCcpOwogICAgdmFyIGJvcmRlckJvdHRvbUxlZnRSYWRpdXMgPSBib3JkZXJSYWRpdXNGb3JTaWRlKCdib3R0b20tbGVmdCcpOwoKICAgIHZhciBib3JkZXJTdHlsZUZvclNpZGUgPSBmdW5jdGlvbiAoc2lkZSkgeyByZXR1cm4gKHsKICAgICAgICBuYW1lOiAiYm9yZGVyLSIgKyBzaWRlICsgIi1zdHlsZSIsCiAgICAgICAgaW5pdGlhbFZhbHVlOiAnc29saWQnLAogICAgICAgIHByZWZpeDogZmFsc2UsCiAgICAgICAgdHlwZTogMiAvKiBJREVOVF9WQUxVRSAqLywKICAgICAgICBwYXJzZTogZnVuY3Rpb24gKF9jb250ZXh0LCBzdHlsZSkgewogICAgICAgICAgICBzd2l0Y2ggKHN0eWxlKSB7CiAgICAgICAgICAgICAgICBjYXNlICdub25lJzoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gMCAvKiBOT05FICovOwogICAgICAgICAgICAgICAgY2FzZSAnZGFzaGVkJzoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gMiAvKiBEQVNIRUQgKi87CiAgICAgICAgICAgICAgICBjYXNlICdkb3R0ZWQnOgogICAgICAgICAgICAgICAgICAgIHJldHVybiAzIC8qIERPVFRFRCAqLzsKICAgICAgICAgICAgICAgIGNhc2UgJ2RvdWJsZSc6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDQgLyogRE9VQkxFICovOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiAxIC8qIFNPTElEICovOwogICAgICAgIH0KICAgIH0pOyB9OwogICAgdmFyIGJvcmRlclRvcFN0eWxlID0gYm9yZGVyU3R5bGVGb3JTaWRlKCd0b3AnKTsKICAgIHZhciBib3JkZXJSaWdodFN0eWxlID0gYm9yZGVyU3R5bGVGb3JTaWRlKCdyaWdodCcpOwogICAgdmFyIGJvcmRlckJvdHRvbVN0eWxlID0gYm9yZGVyU3R5bGVGb3JTaWRlKCdib3R0b20nKTsKICAgIHZhciBib3JkZXJMZWZ0U3R5bGUgPSBib3JkZXJTdHlsZUZvclNpZGUoJ2xlZnQnKTsKCiAgICB2YXIgYm9yZGVyV2lkdGhGb3JTaWRlID0gZnVuY3Rpb24gKHNpZGUpIHsgcmV0dXJuICh7CiAgICAgICAgbmFtZTogImJvcmRlci0iICsgc2lkZSArICItd2lkdGgiLAogICAgICAgIGluaXRpYWxWYWx1ZTogJzAnLAogICAgICAgIHR5cGU6IDAgLyogVkFMVUUgKi8sCiAgICAgICAgcHJlZml4OiBmYWxzZSwKICAgICAgICBwYXJzZTogZnVuY3Rpb24gKF9jb250ZXh0LCB0b2tlbikgewogICAgICAgICAgICBpZiAoaXNEaW1lbnNpb25Ub2tlbih0b2tlbikpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0b2tlbi5udW1iZXI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgfQogICAgfSk7IH07CiAgICB2YXIgYm9yZGVyVG9wV2lkdGggPSBib3JkZXJXaWR0aEZvclNpZGUoJ3RvcCcpOwogICAgdmFyIGJvcmRlclJpZ2h0V2lkdGggPSBib3JkZXJXaWR0aEZvclNpZGUoJ3JpZ2h0Jyk7CiAgICB2YXIgYm9yZGVyQm90dG9tV2lkdGggPSBib3JkZXJXaWR0aEZvclNpZGUoJ2JvdHRvbScpOwogICAgdmFyIGJvcmRlckxlZnRXaWR0aCA9IGJvcmRlcldpZHRoRm9yU2lkZSgnbGVmdCcpOwoKICAgIHZhciBjb2xvciA9IHsKICAgICAgICBuYW1lOiAiY29sb3IiLAogICAgICAgIGluaXRpYWxWYWx1ZTogJ3RyYW5zcGFyZW50JywKICAgICAgICBwcmVmaXg6IGZhbHNlLAogICAgICAgIHR5cGU6IDMgLyogVFlQRV9WQUxVRSAqLywKICAgICAgICBmb3JtYXQ6ICdjb2xvcicKICAgIH07CgogICAgdmFyIGRpcmVjdGlvbiA9IHsKICAgICAgICBuYW1lOiAnZGlyZWN0aW9uJywKICAgICAgICBpbml0aWFsVmFsdWU6ICdsdHInLAogICAgICAgIHByZWZpeDogZmFsc2UsCiAgICAgICAgdHlwZTogMiAvKiBJREVOVF9WQUxVRSAqLywKICAgICAgICBwYXJzZTogZnVuY3Rpb24gKF9jb250ZXh0LCBkaXJlY3Rpb24pIHsKICAgICAgICAgICAgc3dpdGNoIChkaXJlY3Rpb24pIHsKICAgICAgICAgICAgICAgIGNhc2UgJ3J0bCc6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDEgLyogUlRMICovOwogICAgICAgICAgICAgICAgY2FzZSAnbHRyJzoKICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDAgLyogTFRSICovOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfTsKCiAgICB2YXIgZGlzcGxheSA9IHsKICAgICAgICBuYW1lOiAnZGlzcGxheScsCiAgICAgICAgaW5pdGlhbFZhbHVlOiAnaW5saW5lLWJsb2NrJywKICAgICAgICBwcmVmaXg6IGZhbHNlLAogICAgICAgIHR5cGU6IDEgLyogTElTVCAqLywKICAgICAgICBwYXJzZTogZnVuY3Rpb24gKF9jb250ZXh0LCB0b2tlbnMpIHsKICAgICAgICAgICAgcmV0dXJuIHRva2Vucy5maWx0ZXIoaXNJZGVudFRva2VuKS5yZWR1Y2UoZnVuY3Rpb24gKGJpdCwgdG9rZW4pIHsKICAgICAgICAgICAgICAgIHJldHVybiBiaXQgfCBwYXJzZURpc3BsYXlWYWx1ZSh0b2tlbi52YWx1ZSk7CiAgICAgICAgICAgIH0sIDAgLyogTk9ORSAqLyk7CiAgICAgICAgfQogICAgfTsKICAgIHZhciBwYXJzZURpc3BsYXlWYWx1ZSA9IGZ1bmN0aW9uIChkaXNwbGF5KSB7CiAgICAgICAgc3dpdGNoIChkaXNwbGF5KSB7CiAgICAgICAgICAgIGNhc2UgJ2Jsb2NrJzoKICAgICAgICAgICAgY2FzZSAnLXdlYmtpdC1ib3gnOgogICAgICAgICAgICAgICAgcmV0dXJuIDIgLyogQkxPQ0sgKi87CiAgICAgICAgICAgIGNhc2UgJ2lubGluZSc6CiAgICAgICAgICAgICAgICByZXR1cm4gNCAvKiBJTkxJTkUgKi87CiAgICAgICAgICAgIGNhc2UgJ3J1bi1pbic6CiAgICAgICAgICAgICAgICByZXR1cm4gOCAvKiBSVU5fSU4gKi87CiAgICAgICAgICAgIGNhc2UgJ2Zsb3cnOgogICAgICAgICAgICAgICAgcmV0dXJuIDE2IC8qIEZMT1cgKi87CiAgICAgICAgICAgIGNhc2UgJ2Zsb3ctcm9vdCc6CiAgICAgICAgICAgICAgICByZXR1cm4gMzIgLyogRkxPV19ST09UICovOwogICAgICAgICAgICBjYXNlICd0YWJsZSc6CiAgICAgICAgICAgICAgICByZXR1cm4gNjQgLyogVEFCTEUgKi87CiAgICAgICAgICAgIGNhc2UgJ2ZsZXgnOgogICAgICAgICAgICBjYXNlICctd2Via2l0LWZsZXgnOgogICAgICAgICAgICAgICAgcmV0dXJuIDEyOCAvKiBGTEVYICovOwogICAgICAgICAgICBjYXNlICdncmlkJzoKICAgICAgICAgICAgY2FzZSAnLW1zLWdyaWQnOgogICAgICAgICAgICAgICAgcmV0dXJuIDI1NiAvKiBHUklEICovOwogICAgICAgICAgICBjYXNlICdydWJ5JzoKICAgICAgICAgICAgICAgIHJldHVybiA1MTIgLyogUlVCWSAqLzsKICAgICAgICAgICAgY2FzZSAnc3ViZ3JpZCc6CiAgICAgICAgICAgICAgICByZXR1cm4gMTAyNCAvKiBTVUJHUklEICovOwogICAgICAgICAgICBjYXNlICdsaXN0LWl0ZW0nOgogICAgICAgICAgICAgICAgcmV0dXJuIDIwNDggLyogTElTVF9JVEVNICovOwogICAgICAgICAgICBjYXNlICd0YWJsZS1yb3ctZ3JvdXAnOgogICAgICAgICAgICAgICAgcmV0dXJuIDQwOTYgLyogVEFCTEVfUk9XX0dST1VQICovOwogICAgICAgICAgICBjYXNlICd0YWJsZS1oZWFkZXItZ3JvdXAnOgogICAgICAgICAgICAgICAgcmV0dXJuIDgxOTIgLyogVEFCTEVfSEVBREVSX0dST1VQICovOwogICAgICAgICAgICBjYXNlICd0YWJsZS1mb290ZXItZ3JvdXAnOgogICAgICAgICAgICAgICAgcmV0dXJuIDE2Mzg0IC8qIFRBQkxFX0ZPT1RFUl9HUk9VUCAqLzsKICAgICAgICAgICAgY2FzZSAndGFibGUtcm93JzoKICAgICAgICAgICAgICAgIHJldHVybiAzMjc2OCAvKiBUQUJMRV9ST1cgKi87CiAgICAgICAgICAgIGNhc2UgJ3RhYmxlLWNlbGwnOgogICAgICAgICAgICAgICAgcmV0dXJuIDY1NTM2IC8qIFRBQkxFX0NFTEwgKi87CiAgICAgICAgICAgIGNhc2UgJ3RhYmxlLWNvbHVtbi1ncm91cCc6CiAgICAgICAgICAgICAgICByZXR1cm4gMTMxMDcyIC8qIFRBQkxFX0NPTFVNTl9HUk9VUCAqLzsKICAgICAgICAgICAgY2FzZSAndGFibGUtY29sdW1uJzoKICAgICAgICAgICAgICAgIHJldHVybiAyNjIxNDQgLyogVEFCTEVfQ09MVU1OICovOwogICAgICAgICAgICBjYXNlICd0YWJsZS1jYXB0aW9uJzoKICAgICAgICAgICAgICAgIHJldHVybiA1MjQyODggLyogVEFCTEVfQ0FQVElPTiAqLzsKICAgICAgICAgICAgY2FzZSAncnVieS1iYXNlJzoKICAgICAgICAgICAgICAgIHJldHVybiAxMDQ4NTc2IC8qIFJVQllfQkFTRSAqLzsKICAgICAgICAgICAgY2FzZSAncnVieS10ZXh0JzoKICAgICAgICAgICAgICAgIHJldHVybiAyMDk3MTUyIC8qIFJVQllfVEVYVCAqLzsKICAgICAgICAgICAgY2FzZSAncnVieS1iYXNlLWNvbnRhaW5lcic6CiAgICAgICAgICAgICAgICByZXR1cm4gNDE5NDMwNCAvKiBSVUJZX0JBU0VfQ09OVEFJTkVSICovOwogICAgICAgICAgICBjYXNlICdydWJ5LXRleHQtY29udGFpbmVyJzoKICAgICAgICAgICAgICAgIHJldHVybiA4Mzg4NjA4IC8qIFJVQllfVEVYVF9DT05UQUlORVIgKi87CiAgICAgICAgICAgIGNhc2UgJ2NvbnRlbnRzJzoKICAgICAgICAgICAgICAgIHJldHVybiAxNjc3NzIxNiAvKiBDT05URU5UUyAqLzsKICAgICAgICAgICAgY2FzZSAnaW5saW5lLWJsb2NrJzoKICAgICAgICAgICAgICAgIHJldHVybiAzMzU1NDQzMiAvKiBJTkxJTkVfQkxPQ0sgKi87CiAgICAgICAgICAgIGNhc2UgJ2lubGluZS1saXN0LWl0ZW0nOgogICAgICAgICAgICAgICAgcmV0dXJuIDY3MTA4ODY0IC8qIElOTElORV9MSVNUX0lURU0gKi87CiAgICAgICAgICAgIGNhc2UgJ2lubGluZS10YWJsZSc6CiAgICAgICAgICAgICAgICByZXR1cm4gMTM0MjE3NzI4IC8qIElOTElORV9UQUJMRSAqLzsKICAgICAgICAgICAgY2FzZSAnaW5saW5lLWZsZXgnOgogICAgICAgICAgICAgICAgcmV0dXJuIDI2ODQzNTQ1NiAvKiBJTkxJTkVfRkxFWCAqLzsKICAgICAgICAgICAgY2FzZSAnaW5saW5lLWdyaWQnOgogICAgICAgICAgICAgICAgcmV0dXJuIDUzNjg3MDkxMiAvKiBJTkxJTkVfR1JJRCAqLzsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIDAgLyogTk9ORSAqLzsKICAgIH07CgogICAgdmFyIGZsb2F0ID0gewogICAgICAgIG5hbWU6ICdmbG9hdCcsCiAgICAgICAgaW5pdGlhbFZhbHVlOiAnbm9uZScsCiAgICAgICAgcHJlZml4OiBmYWxzZSwKICAgICAgICB0eXBlOiAyIC8qIElERU5UX1ZBTFVFICovLAogICAgICAgIHBhcnNlOiBmdW5jdGlvbiAoX2NvbnRleHQsIGZsb2F0KSB7CiAgICAgICAgICAgIHN3aXRjaCAoZmxvYXQpIHsKICAgICAgICAgICAgICAgIGNhc2UgJ2xlZnQnOgogICAgICAgICAgICAgICAgICAgIHJldHVybiAxIC8qIExFRlQgKi87CiAgICAgICAgICAgICAgICBjYXNlICdyaWdodCc6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDIgLyogUklHSFQgKi87CiAgICAgICAgICAgICAgICBjYXNlICdpbmxpbmUtc3RhcnQnOgogICAgICAgICAgICAgICAgICAgIHJldHVybiAzIC8qIElOTElORV9TVEFSVCAqLzsKICAgICAgICAgICAgICAgIGNhc2UgJ2lubGluZS1lbmQnOgogICAgICAgICAgICAgICAgICAgIHJldHVybiA0IC8qIElOTElORV9FTkQgKi87CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIDAgLyogTk9ORSAqLzsKICAgICAgICB9CiAgICB9OwoKICAgIHZhciBsZXR0ZXJTcGFjaW5nID0gewogICAgICAgIG5hbWU6ICdsZXR0ZXItc3BhY2luZycsCiAgICAgICAgaW5pdGlhbFZhbHVlOiAnMCcsCiAgICAgICAgcHJlZml4OiBmYWxzZSwKICAgICAgICB0eXBlOiAwIC8qIFZBTFVFICovLAogICAgICAgIHBhcnNlOiBmdW5jdGlvbiAoX2NvbnRleHQsIHRva2VuKSB7CiAgICAgICAgICAgIGlmICh0b2tlbi50eXBlID09PSAyMCAvKiBJREVOVF9UT0tFTiAqLyAmJiB0b2tlbi52YWx1ZSA9PT0gJ25vcm1hbCcpIHsKICAgICAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICh0b2tlbi50eXBlID09PSAxNyAvKiBOVU1CRVJfVE9LRU4gKi8pIHsKICAgICAgICAgICAgICAgIHJldHVybiB0b2tlbi5udW1iZXI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHRva2VuLnR5cGUgPT09IDE1IC8qIERJTUVOU0lPTl9UT0tFTiAqLykgewogICAgICAgICAgICAgICAgcmV0dXJuIHRva2VuLm51bWJlcjsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9CiAgICB9OwoKICAgIHZhciBMSU5FX0JSRUFLOwogICAgKGZ1bmN0aW9uIChMSU5FX0JSRUFLKSB7CiAgICAgICAgTElORV9CUkVBS1siTk9STUFMIl0gPSAibm9ybWFsIjsKICAgICAgICBMSU5FX0JSRUFLWyJTVFJJQ1QiXSA9ICJzdHJpY3QiOwogICAgfSkoTElORV9CUkVBSyB8fCAoTElORV9CUkVBSyA9IHt9KSk7CiAgICB2YXIgbGluZUJyZWFrID0gewogICAgICAgIG5hbWU6ICdsaW5lLWJyZWFrJywKICAgICAgICBpbml0aWFsVmFsdWU6ICdub3JtYWwnLAogICAgICAgIHByZWZpeDogZmFsc2UsCiAgICAgICAgdHlwZTogMiAvKiBJREVOVF9WQUxVRSAqLywKICAgICAgICBwYXJzZTogZnVuY3Rpb24gKF9jb250ZXh0LCBsaW5lQnJlYWspIHsKICAgICAgICAgICAgc3dpdGNoIChsaW5lQnJlYWspIHsKICAgICAgICAgICAgICAgIGNhc2UgJ3N0cmljdCc6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIExJTkVfQlJFQUsuU1RSSUNUOwogICAgICAgICAgICAgICAgY2FzZSAnbm9ybWFsJzoKICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIExJTkVfQlJFQUsuTk9STUFMOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfTsKCiAgICB2YXIgbGluZUhlaWdodCA9IHsKICAgICAgICBuYW1lOiAnbGluZS1oZWlnaHQnLAogICAgICAgIGluaXRpYWxWYWx1ZTogJ25vcm1hbCcsCiAgICAgICAgcHJlZml4OiBmYWxzZSwKICAgICAgICB0eXBlOiA0IC8qIFRPS0VOX1ZBTFVFICovCiAgICB9OwogICAgdmFyIGNvbXB1dGVMaW5lSGVpZ2h0ID0gZnVuY3Rpb24gKHRva2VuLCBmb250U2l6ZSkgewogICAgICAgIGlmIChpc0lkZW50VG9rZW4odG9rZW4pICYmIHRva2VuLnZhbHVlID09PSAnbm9ybWFsJykgewogICAgICAgICAgICByZXR1cm4gMS4yICogZm9udFNpemU7CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKHRva2VuLnR5cGUgPT09IDE3IC8qIE5VTUJFUl9UT0tFTiAqLykgewogICAgICAgICAgICByZXR1cm4gZm9udFNpemUgKiB0b2tlbi5udW1iZXI7CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKGlzTGVuZ3RoUGVyY2VudGFnZSh0b2tlbikpIHsKICAgICAgICAgICAgcmV0dXJuIGdldEFic29sdXRlVmFsdWUodG9rZW4sIGZvbnRTaXplKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGZvbnRTaXplOwogICAgfTsKCiAgICB2YXIgbGlzdFN0eWxlSW1hZ2UgPSB7CiAgICAgICAgbmFtZTogJ2xpc3Qtc3R5bGUtaW1hZ2UnLAogICAgICAgIGluaXRpYWxWYWx1ZTogJ25vbmUnLAogICAgICAgIHR5cGU6IDAgLyogVkFMVUUgKi8sCiAgICAgICAgcHJlZml4OiBmYWxzZSwKICAgICAgICBwYXJzZTogZnVuY3Rpb24gKGNvbnRleHQsIHRva2VuKSB7CiAgICAgICAgICAgIGlmICh0b2tlbi50eXBlID09PSAyMCAvKiBJREVOVF9UT0tFTiAqLyAmJiB0b2tlbi52YWx1ZSA9PT0gJ25vbmUnKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gaW1hZ2UucGFyc2UoY29udGV4dCwgdG9rZW4pOwogICAgICAgIH0KICAgIH07CgogICAgdmFyIGxpc3RTdHlsZVBvc2l0aW9uID0gewogICAgICAgIG5hbWU6ICdsaXN0LXN0eWxlLXBvc2l0aW9uJywKICAgICAgICBpbml0aWFsVmFsdWU6ICdvdXRzaWRlJywKICAgICAgICBwcmVmaXg6IGZhbHNlLAogICAgICAgIHR5cGU6IDIgLyogSURFTlRfVkFMVUUgKi8sCiAgICAgICAgcGFyc2U6IGZ1bmN0aW9uIChfY29udGV4dCwgcG9zaXRpb24pIHsKICAgICAgICAgICAgc3dpdGNoIChwb3NpdGlvbikgewogICAgICAgICAgICAgICAgY2FzZSAnaW5zaWRlJzoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gMCAvKiBJTlNJREUgKi87CiAgICAgICAgICAgICAgICBjYXNlICdvdXRzaWRlJzoKICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDEgLyogT1VUU0lERSAqLzsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH07CgogICAgdmFyIGxpc3RTdHlsZVR5cGUgPSB7CiAgICAgICAgbmFtZTogJ2xpc3Qtc3R5bGUtdHlwZScsCiAgICAgICAgaW5pdGlhbFZhbHVlOiAnbm9uZScsCiAgICAgICAgcHJlZml4OiBmYWxzZSwKICAgICAgICB0eXBlOiAyIC8qIElERU5UX1ZBTFVFICovLAogICAgICAgIHBhcnNlOiBmdW5jdGlvbiAoX2NvbnRleHQsIHR5cGUpIHsKICAgICAgICAgICAgc3dpdGNoICh0eXBlKSB7CiAgICAgICAgICAgICAgICBjYXNlICdkaXNjJzoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gMCAvKiBESVNDICovOwogICAgICAgICAgICAgICAgY2FzZSAnY2lyY2xlJzoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gMSAvKiBDSVJDTEUgKi87CiAgICAgICAgICAgICAgICBjYXNlICdzcXVhcmUnOgogICAgICAgICAgICAgICAgICAgIHJldHVybiAyIC8qIFNRVUFSRSAqLzsKICAgICAgICAgICAgICAgIGNhc2UgJ2RlY2ltYWwnOgogICAgICAgICAgICAgICAgICAgIHJldHVybiAzIC8qIERFQ0lNQUwgKi87CiAgICAgICAgICAgICAgICBjYXNlICdjamstZGVjaW1hbCc6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDQgLyogQ0pLX0RFQ0lNQUwgKi87CiAgICAgICAgICAgICAgICBjYXNlICdkZWNpbWFsLWxlYWRpbmctemVybyc6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDUgLyogREVDSU1BTF9MRUFESU5HX1pFUk8gKi87CiAgICAgICAgICAgICAgICBjYXNlICdsb3dlci1yb21hbic6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDYgLyogTE9XRVJfUk9NQU4gKi87CiAgICAgICAgICAgICAgICBjYXNlICd1cHBlci1yb21hbic6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDcgLyogVVBQRVJfUk9NQU4gKi87CiAgICAgICAgICAgICAgICBjYXNlICdsb3dlci1ncmVlayc6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDggLyogTE9XRVJfR1JFRUsgKi87CiAgICAgICAgICAgICAgICBjYXNlICdsb3dlci1hbHBoYSc6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDkgLyogTE9XRVJfQUxQSEEgKi87CiAgICAgICAgICAgICAgICBjYXNlICd1cHBlci1hbHBoYSc6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDEwIC8qIFVQUEVSX0FMUEhBICovOwogICAgICAgICAgICAgICAgY2FzZSAnYXJhYmljLWluZGljJzoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTEgLyogQVJBQklDX0lORElDICovOwogICAgICAgICAgICAgICAgY2FzZSAnYXJtZW5pYW4nOgogICAgICAgICAgICAgICAgICAgIHJldHVybiAxMiAvKiBBUk1FTklBTiAqLzsKICAgICAgICAgICAgICAgIGNhc2UgJ2JlbmdhbGknOgogICAgICAgICAgICAgICAgICAgIHJldHVybiAxMyAvKiBCRU5HQUxJICovOwogICAgICAgICAgICAgICAgY2FzZSAnY2FtYm9kaWFuJzoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTQgLyogQ0FNQk9ESUFOICovOwogICAgICAgICAgICAgICAgY2FzZSAnY2prLWVhcnRobHktYnJhbmNoJzoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTUgLyogQ0pLX0VBUlRITFlfQlJBTkNIICovOwogICAgICAgICAgICAgICAgY2FzZSAnY2prLWhlYXZlbmx5LXN0ZW0nOgogICAgICAgICAgICAgICAgICAgIHJldHVybiAxNiAvKiBDSktfSEVBVkVOTFlfU1RFTSAqLzsKICAgICAgICAgICAgICAgIGNhc2UgJ2Nqay1pZGVvZ3JhcGhpYyc6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE3IC8qIENKS19JREVPR1JBUEhJQyAqLzsKICAgICAgICAgICAgICAgIGNhc2UgJ2RldmFuYWdhcmknOgogICAgICAgICAgICAgICAgICAgIHJldHVybiAxOCAvKiBERVZBTkFHQVJJICovOwogICAgICAgICAgICAgICAgY2FzZSAnZXRoaW9waWMtbnVtZXJpYyc6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE5IC8qIEVUSElPUElDX05VTUVSSUMgKi87CiAgICAgICAgICAgICAgICBjYXNlICdnZW9yZ2lhbic6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDIwIC8qIEdFT1JHSUFOICovOwogICAgICAgICAgICAgICAgY2FzZSAnZ3VqYXJhdGknOgogICAgICAgICAgICAgICAgICAgIHJldHVybiAyMSAvKiBHVUpBUkFUSSAqLzsKICAgICAgICAgICAgICAgIGNhc2UgJ2d1cm11a2hpJzoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gMjIgLyogR1VSTVVLSEkgKi87CiAgICAgICAgICAgICAgICBjYXNlICdoZWJyZXcnOgogICAgICAgICAgICAgICAgICAgIHJldHVybiAyMiAvKiBIRUJSRVcgKi87CiAgICAgICAgICAgICAgICBjYXNlICdoaXJhZ2FuYSc6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDIzIC8qIEhJUkFHQU5BICovOwogICAgICAgICAgICAgICAgY2FzZSAnaGlyYWdhbmEtaXJvaGEnOgogICAgICAgICAgICAgICAgICAgIHJldHVybiAyNCAvKiBISVJBR0FOQV9JUk9IQSAqLzsKICAgICAgICAgICAgICAgIGNhc2UgJ2phcGFuZXNlLWZvcm1hbCc6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDI1IC8qIEpBUEFORVNFX0ZPUk1BTCAqLzsKICAgICAgICAgICAgICAgIGNhc2UgJ2phcGFuZXNlLWluZm9ybWFsJzoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gMjYgLyogSkFQQU5FU0VfSU5GT1JNQUwgKi87CiAgICAgICAgICAgICAgICBjYXNlICdrYW5uYWRhJzoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gMjcgLyogS0FOTkFEQSAqLzsKICAgICAgICAgICAgICAgIGNhc2UgJ2thdGFrYW5hJzoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gMjggLyogS0FUQUtBTkEgKi87CiAgICAgICAgICAgICAgICBjYXNlICdrYXRha2FuYS1pcm9oYSc6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDI5IC8qIEtBVEFLQU5BX0lST0hBICovOwogICAgICAgICAgICAgICAgY2FzZSAna2htZXInOgogICAgICAgICAgICAgICAgICAgIHJldHVybiAzMCAvKiBLSE1FUiAqLzsKICAgICAgICAgICAgICAgIGNhc2UgJ2tvcmVhbi1oYW5ndWwtZm9ybWFsJzoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gMzEgLyogS09SRUFOX0hBTkdVTF9GT1JNQUwgKi87CiAgICAgICAgICAgICAgICBjYXNlICdrb3JlYW4taGFuamEtZm9ybWFsJzoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gMzIgLyogS09SRUFOX0hBTkpBX0ZPUk1BTCAqLzsKICAgICAgICAgICAgICAgIGNhc2UgJ2tvcmVhbi1oYW5qYS1pbmZvcm1hbCc6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDMzIC8qIEtPUkVBTl9IQU5KQV9JTkZPUk1BTCAqLzsKICAgICAgICAgICAgICAgIGNhc2UgJ2xhbyc6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDM0IC8qIExBTyAqLzsKICAgICAgICAgICAgICAgIGNhc2UgJ2xvd2VyLWFybWVuaWFuJzoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gMzUgLyogTE9XRVJfQVJNRU5JQU4gKi87CiAgICAgICAgICAgICAgICBjYXNlICdtYWxheWFsYW0nOgogICAgICAgICAgICAgICAgICAgIHJldHVybiAzNiAvKiBNQUxBWUFMQU0gKi87CiAgICAgICAgICAgICAgICBjYXNlICdtb25nb2xpYW4nOgogICAgICAgICAgICAgICAgICAgIHJldHVybiAzNyAvKiBNT05HT0xJQU4gKi87CiAgICAgICAgICAgICAgICBjYXNlICdteWFubWFyJzoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gMzggLyogTVlBTk1BUiAqLzsKICAgICAgICAgICAgICAgIGNhc2UgJ29yaXlhJzoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gMzkgLyogT1JJWUEgKi87CiAgICAgICAgICAgICAgICBjYXNlICdwZXJzaWFuJzoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gNDAgLyogUEVSU0lBTiAqLzsKICAgICAgICAgICAgICAgIGNhc2UgJ3NpbXAtY2hpbmVzZS1mb3JtYWwnOgogICAgICAgICAgICAgICAgICAgIHJldHVybiA0MSAvKiBTSU1QX0NISU5FU0VfRk9STUFMICovOwogICAgICAgICAgICAgICAgY2FzZSAnc2ltcC1jaGluZXNlLWluZm9ybWFsJzoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gNDIgLyogU0lNUF9DSElORVNFX0lORk9STUFMICovOwogICAgICAgICAgICAgICAgY2FzZSAndGFtaWwnOgogICAgICAgICAgICAgICAgICAgIHJldHVybiA0MyAvKiBUQU1JTCAqLzsKICAgICAgICAgICAgICAgIGNhc2UgJ3RlbHVndSc6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDQ0IC8qIFRFTFVHVSAqLzsKICAgICAgICAgICAgICAgIGNhc2UgJ3RoYWknOgogICAgICAgICAgICAgICAgICAgIHJldHVybiA0NSAvKiBUSEFJICovOwogICAgICAgICAgICAgICAgY2FzZSAndGliZXRhbic6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDQ2IC8qIFRJQkVUQU4gKi87CiAgICAgICAgICAgICAgICBjYXNlICd0cmFkLWNoaW5lc2UtZm9ybWFsJzoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gNDcgLyogVFJBRF9DSElORVNFX0ZPUk1BTCAqLzsKICAgICAgICAgICAgICAgIGNhc2UgJ3RyYWQtY2hpbmVzZS1pbmZvcm1hbCc6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDQ4IC8qIFRSQURfQ0hJTkVTRV9JTkZPUk1BTCAqLzsKICAgICAgICAgICAgICAgIGNhc2UgJ3VwcGVyLWFybWVuaWFuJzoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gNDkgLyogVVBQRVJfQVJNRU5JQU4gKi87CiAgICAgICAgICAgICAgICBjYXNlICdkaXNjbG9zdXJlLW9wZW4nOgogICAgICAgICAgICAgICAgICAgIHJldHVybiA1MCAvKiBESVNDTE9TVVJFX09QRU4gKi87CiAgICAgICAgICAgICAgICBjYXNlICdkaXNjbG9zdXJlLWNsb3NlZCc6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDUxIC8qIERJU0NMT1NVUkVfQ0xPU0VEICovOwogICAgICAgICAgICAgICAgY2FzZSAnbm9uZSc6CiAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgIHJldHVybiAtMSAvKiBOT05FICovOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfTsKCiAgICB2YXIgbWFyZ2luRm9yU2lkZSA9IGZ1bmN0aW9uIChzaWRlKSB7IHJldHVybiAoewogICAgICAgIG5hbWU6ICJtYXJnaW4tIiArIHNpZGUsCiAgICAgICAgaW5pdGlhbFZhbHVlOiAnMCcsCiAgICAgICAgcHJlZml4OiBmYWxzZSwKICAgICAgICB0eXBlOiA0IC8qIFRPS0VOX1ZBTFVFICovCiAgICB9KTsgfTsKICAgIHZhciBtYXJnaW5Ub3AgPSBtYXJnaW5Gb3JTaWRlKCd0b3AnKTsKICAgIHZhciBtYXJnaW5SaWdodCA9IG1hcmdpbkZvclNpZGUoJ3JpZ2h0Jyk7CiAgICB2YXIgbWFyZ2luQm90dG9tID0gbWFyZ2luRm9yU2lkZSgnYm90dG9tJyk7CiAgICB2YXIgbWFyZ2luTGVmdCA9IG1hcmdpbkZvclNpZGUoJ2xlZnQnKTsKCiAgICB2YXIgb3ZlcmZsb3cgPSB7CiAgICAgICAgbmFtZTogJ292ZXJmbG93JywKICAgICAgICBpbml0aWFsVmFsdWU6ICd2aXNpYmxlJywKICAgICAgICBwcmVmaXg6IGZhbHNlLAogICAgICAgIHR5cGU6IDEgLyogTElTVCAqLywKICAgICAgICBwYXJzZTogZnVuY3Rpb24gKF9jb250ZXh0LCB0b2tlbnMpIHsKICAgICAgICAgICAgcmV0dXJuIHRva2Vucy5maWx0ZXIoaXNJZGVudFRva2VuKS5tYXAoZnVuY3Rpb24gKG92ZXJmbG93KSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKG92ZXJmbG93LnZhbHVlKSB7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAnaGlkZGVuJzoKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDEgLyogSElEREVOICovOwogICAgICAgICAgICAgICAgICAgIGNhc2UgJ3Njcm9sbCc6CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAyIC8qIFNDUk9MTCAqLzsKICAgICAgICAgICAgICAgICAgICBjYXNlICdjbGlwJzoKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDMgLyogQ0xJUCAqLzsKICAgICAgICAgICAgICAgICAgICBjYXNlICdhdXRvJzoKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDQgLyogQVVUTyAqLzsKICAgICAgICAgICAgICAgICAgICBjYXNlICd2aXNpYmxlJzoKICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMCAvKiBWSVNJQkxFICovOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICB9OwoKICAgIHZhciBvdmVyZmxvd1dyYXAgPSB7CiAgICAgICAgbmFtZTogJ292ZXJmbG93LXdyYXAnLAogICAgICAgIGluaXRpYWxWYWx1ZTogJ25vcm1hbCcsCiAgICAgICAgcHJlZml4OiBmYWxzZSwKICAgICAgICB0eXBlOiAyIC8qIElERU5UX1ZBTFVFICovLAogICAgICAgIHBhcnNlOiBmdW5jdGlvbiAoX2NvbnRleHQsIG92ZXJmbG93KSB7CiAgICAgICAgICAgIHN3aXRjaCAob3ZlcmZsb3cpIHsKICAgICAgICAgICAgICAgIGNhc2UgJ2JyZWFrLXdvcmQnOgogICAgICAgICAgICAgICAgICAgIHJldHVybiAiYnJlYWstd29yZCIgLyogQlJFQUtfV09SRCAqLzsKICAgICAgICAgICAgICAgIGNhc2UgJ25vcm1hbCc6CiAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgIHJldHVybiAibm9ybWFsIiAvKiBOT1JNQUwgKi87CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9OwoKICAgIHZhciBwYWRkaW5nRm9yU2lkZSA9IGZ1bmN0aW9uIChzaWRlKSB7IHJldHVybiAoewogICAgICAgIG5hbWU6ICJwYWRkaW5nLSIgKyBzaWRlLAogICAgICAgIGluaXRpYWxWYWx1ZTogJzAnLAogICAgICAgIHByZWZpeDogZmFsc2UsCiAgICAgICAgdHlwZTogMyAvKiBUWVBFX1ZBTFVFICovLAogICAgICAgIGZvcm1hdDogJ2xlbmd0aC1wZXJjZW50YWdlJwogICAgfSk7IH07CiAgICB2YXIgcGFkZGluZ1RvcCA9IHBhZGRpbmdGb3JTaWRlKCd0b3AnKTsKICAgIHZhciBwYWRkaW5nUmlnaHQgPSBwYWRkaW5nRm9yU2lkZSgncmlnaHQnKTsKICAgIHZhciBwYWRkaW5nQm90dG9tID0gcGFkZGluZ0ZvclNpZGUoJ2JvdHRvbScpOwogICAgdmFyIHBhZGRpbmdMZWZ0ID0gcGFkZGluZ0ZvclNpZGUoJ2xlZnQnKTsKCiAgICB2YXIgdGV4dEFsaWduID0gewogICAgICAgIG5hbWU6ICd0ZXh0LWFsaWduJywKICAgICAgICBpbml0aWFsVmFsdWU6ICdsZWZ0JywKICAgICAgICBwcmVmaXg6IGZhbHNlLAogICAgICAgIHR5cGU6IDIgLyogSURFTlRfVkFMVUUgKi8sCiAgICAgICAgcGFyc2U6IGZ1bmN0aW9uIChfY29udGV4dCwgdGV4dEFsaWduKSB7CiAgICAgICAgICAgIHN3aXRjaCAodGV4dEFsaWduKSB7CiAgICAgICAgICAgICAgICBjYXNlICdyaWdodCc6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDIgLyogUklHSFQgKi87CiAgICAgICAgICAgICAgICBjYXNlICdjZW50ZXInOgogICAgICAgICAgICAgICAgY2FzZSAnanVzdGlmeSc6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDEgLyogQ0VOVEVSICovOwogICAgICAgICAgICAgICAgY2FzZSAnbGVmdCc6CiAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgIHJldHVybiAwIC8qIExFRlQgKi87CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9OwoKICAgIHZhciBwb3NpdGlvbiA9IHsKICAgICAgICBuYW1lOiAncG9zaXRpb24nLAogICAgICAgIGluaXRpYWxWYWx1ZTogJ3N0YXRpYycsCiAgICAgICAgcHJlZml4OiBmYWxzZSwKICAgICAgICB0eXBlOiAyIC8qIElERU5UX1ZBTFVFICovLAogICAgICAgIHBhcnNlOiBmdW5jdGlvbiAoX2NvbnRleHQsIHBvc2l0aW9uKSB7CiAgICAgICAgICAgIHN3aXRjaCAocG9zaXRpb24pIHsKICAgICAgICAgICAgICAgIGNhc2UgJ3JlbGF0aXZlJzoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gMSAvKiBSRUxBVElWRSAqLzsKICAgICAgICAgICAgICAgIGNhc2UgJ2Fic29sdXRlJzoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gMiAvKiBBQlNPTFVURSAqLzsKICAgICAgICAgICAgICAgIGNhc2UgJ2ZpeGVkJzoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gMyAvKiBGSVhFRCAqLzsKICAgICAgICAgICAgICAgIGNhc2UgJ3N0aWNreSc6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDQgLyogU1RJQ0tZICovOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiAwIC8qIFNUQVRJQyAqLzsKICAgICAgICB9CiAgICB9OwoKICAgIHZhciB0ZXh0U2hhZG93ID0gewogICAgICAgIG5hbWU6ICd0ZXh0LXNoYWRvdycsCiAgICAgICAgaW5pdGlhbFZhbHVlOiAnbm9uZScsCiAgICAgICAgdHlwZTogMSAvKiBMSVNUICovLAogICAgICAgIHByZWZpeDogZmFsc2UsCiAgICAgICAgcGFyc2U6IGZ1bmN0aW9uIChjb250ZXh0LCB0b2tlbnMpIHsKICAgICAgICAgICAgaWYgKHRva2Vucy5sZW5ndGggPT09IDEgJiYgaXNJZGVudFdpdGhWYWx1ZSh0b2tlbnNbMF0sICdub25lJykpIHsKICAgICAgICAgICAgICAgIHJldHVybiBbXTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gcGFyc2VGdW5jdGlvbkFyZ3ModG9rZW5zKS5tYXAoZnVuY3Rpb24gKHZhbHVlcykgewogICAgICAgICAgICAgICAgdmFyIHNoYWRvdyA9IHsKICAgICAgICAgICAgICAgICAgICBjb2xvcjogQ09MT1JTLlRSQU5TUEFSRU5ULAogICAgICAgICAgICAgICAgICAgIG9mZnNldFg6IFpFUk9fTEVOR1RILAogICAgICAgICAgICAgICAgICAgIG9mZnNldFk6IFpFUk9fTEVOR1RILAogICAgICAgICAgICAgICAgICAgIGJsdXI6IFpFUk9fTEVOR1RICiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgdmFyIGMgPSAwOwogICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2YWx1ZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdG9rZW4gPSB2YWx1ZXNbaV07CiAgICAgICAgICAgICAgICAgICAgaWYgKGlzTGVuZ3RoKHRva2VuKSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoYyA9PT0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hhZG93Lm9mZnNldFggPSB0b2tlbjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChjID09PSAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGFkb3cub2Zmc2V0WSA9IHRva2VuOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hhZG93LmJsdXIgPSB0b2tlbjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBjKys7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBzaGFkb3cuY29sb3IgPSBjb2xvciQxLnBhcnNlKGNvbnRleHQsIHRva2VuKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gc2hhZG93OwogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICB9OwoKICAgIHZhciB0ZXh0VHJhbnNmb3JtID0gewogICAgICAgIG5hbWU6ICd0ZXh0LXRyYW5zZm9ybScsCiAgICAgICAgaW5pdGlhbFZhbHVlOiAnbm9uZScsCiAgICAgICAgcHJlZml4OiBmYWxzZSwKICAgICAgICB0eXBlOiAyIC8qIElERU5UX1ZBTFVFICovLAogICAgICAgIHBhcnNlOiBmdW5jdGlvbiAoX2NvbnRleHQsIHRleHRUcmFuc2Zvcm0pIHsKICAgICAgICAgICAgc3dpdGNoICh0ZXh0VHJhbnNmb3JtKSB7CiAgICAgICAgICAgICAgICBjYXNlICd1cHBlcmNhc2UnOgogICAgICAgICAgICAgICAgICAgIHJldHVybiAyIC8qIFVQUEVSQ0FTRSAqLzsKICAgICAgICAgICAgICAgIGNhc2UgJ2xvd2VyY2FzZSc6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDEgLyogTE9XRVJDQVNFICovOwogICAgICAgICAgICAgICAgY2FzZSAnY2FwaXRhbGl6ZSc6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDMgLyogQ0FQSVRBTElaRSAqLzsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gMCAvKiBOT05FICovOwogICAgICAgIH0KICAgIH07CgogICAgdmFyIHRyYW5zZm9ybSQxID0gewogICAgICAgIG5hbWU6ICd0cmFuc2Zvcm0nLAogICAgICAgIGluaXRpYWxWYWx1ZTogJ25vbmUnLAogICAgICAgIHByZWZpeDogdHJ1ZSwKICAgICAgICB0eXBlOiAwIC8qIFZBTFVFICovLAogICAgICAgIHBhcnNlOiBmdW5jdGlvbiAoX2NvbnRleHQsIHRva2VuKSB7CiAgICAgICAgICAgIGlmICh0b2tlbi50eXBlID09PSAyMCAvKiBJREVOVF9UT0tFTiAqLyAmJiB0b2tlbi52YWx1ZSA9PT0gJ25vbmUnKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAodG9rZW4udHlwZSA9PT0gMTggLyogRlVOQ1RJT04gKi8pIHsKICAgICAgICAgICAgICAgIHZhciB0cmFuc2Zvcm1GdW5jdGlvbiA9IFNVUFBPUlRFRF9UUkFOU0ZPUk1fRlVOQ1RJT05TW3Rva2VuLm5hbWVdOwogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0cmFuc2Zvcm1GdW5jdGlvbiA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIkF0dGVtcHRpbmcgdG8gcGFyc2UgYW4gdW5zdXBwb3J0ZWQgdHJhbnNmb3JtIGZ1bmN0aW9uIFwiIiArIHRva2VuLm5hbWUgKyAiXCIiKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiB0cmFuc2Zvcm1GdW5jdGlvbih0b2tlbi52YWx1ZXMpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KICAgIH07CiAgICB2YXIgbWF0cml4ID0gZnVuY3Rpb24gKGFyZ3MpIHsKICAgICAgICB2YXIgdmFsdWVzID0gYXJncy5maWx0ZXIoZnVuY3Rpb24gKGFyZykgeyByZXR1cm4gYXJnLnR5cGUgPT09IDE3IC8qIE5VTUJFUl9UT0tFTiAqLzsgfSkubWFwKGZ1bmN0aW9uIChhcmcpIHsgcmV0dXJuIGFyZy5udW1iZXI7IH0pOwogICAgICAgIHJldHVybiB2YWx1ZXMubGVuZ3RoID09PSA2ID8gdmFsdWVzIDogbnVsbDsKICAgIH07CiAgICAvLyBkb2Vzbid0IHN1cHBvcnQgM0QgdHJhbnNmb3JtcyBhdCB0aGUgbW9tZW50CiAgICB2YXIgbWF0cml4M2QgPSBmdW5jdGlvbiAoYXJncykgewogICAgICAgIHZhciB2YWx1ZXMgPSBhcmdzLmZpbHRlcihmdW5jdGlvbiAoYXJnKSB7IHJldHVybiBhcmcudHlwZSA9PT0gMTcgLyogTlVNQkVSX1RPS0VOICovOyB9KS5tYXAoZnVuY3Rpb24gKGFyZykgeyByZXR1cm4gYXJnLm51bWJlcjsgfSk7CiAgICAgICAgdmFyIGExID0gdmFsdWVzWzBdLCBiMSA9IHZhbHVlc1sxXTsgdmFsdWVzWzJdOyB2YWx1ZXNbM107IHZhciBhMiA9IHZhbHVlc1s0XSwgYjIgPSB2YWx1ZXNbNV07IHZhbHVlc1s2XTsgdmFsdWVzWzddOyB2YWx1ZXNbOF07IHZhbHVlc1s5XTsgdmFsdWVzWzEwXTsgdmFsdWVzWzExXTsgdmFyIGE0ID0gdmFsdWVzWzEyXSwgYjQgPSB2YWx1ZXNbMTNdOyB2YWx1ZXNbMTRdOyB2YWx1ZXNbMTVdOwogICAgICAgIHJldHVybiB2YWx1ZXMubGVuZ3RoID09PSAxNiA/IFthMSwgYjEsIGEyLCBiMiwgYTQsIGI0XSA6IG51bGw7CiAgICB9OwogICAgdmFyIFNVUFBPUlRFRF9UUkFOU0ZPUk1fRlVOQ1RJT05TID0gewogICAgICAgIG1hdHJpeDogbWF0cml4LAogICAgICAgIG1hdHJpeDNkOiBtYXRyaXgzZAogICAgfTsKCiAgICB2YXIgREVGQVVMVF9WQUxVRSA9IHsKICAgICAgICB0eXBlOiAxNiAvKiBQRVJDRU5UQUdFX1RPS0VOICovLAogICAgICAgIG51bWJlcjogNTAsCiAgICAgICAgZmxhZ3M6IEZMQUdfSU5URUdFUgogICAgfTsKICAgIHZhciBERUZBVUxUID0gW0RFRkFVTFRfVkFMVUUsIERFRkFVTFRfVkFMVUVdOwogICAgdmFyIHRyYW5zZm9ybU9yaWdpbiA9IHsKICAgICAgICBuYW1lOiAndHJhbnNmb3JtLW9yaWdpbicsCiAgICAgICAgaW5pdGlhbFZhbHVlOiAnNTAlIDUwJScsCiAgICAgICAgcHJlZml4OiB0cnVlLAogICAgICAgIHR5cGU6IDEgLyogTElTVCAqLywKICAgICAgICBwYXJzZTogZnVuY3Rpb24gKF9jb250ZXh0LCB0b2tlbnMpIHsKICAgICAgICAgICAgdmFyIG9yaWdpbnMgPSB0b2tlbnMuZmlsdGVyKGlzTGVuZ3RoUGVyY2VudGFnZSk7CiAgICAgICAgICAgIGlmIChvcmlnaW5zLmxlbmd0aCAhPT0gMikgewogICAgICAgICAgICAgICAgcmV0dXJuIERFRkFVTFQ7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIFtvcmlnaW5zWzBdLCBvcmlnaW5zWzFdXTsKICAgICAgICB9CiAgICB9OwoKICAgIHZhciB2aXNpYmlsaXR5ID0gewogICAgICAgIG5hbWU6ICd2aXNpYmxlJywKICAgICAgICBpbml0aWFsVmFsdWU6ICdub25lJywKICAgICAgICBwcmVmaXg6IGZhbHNlLAogICAgICAgIHR5cGU6IDIgLyogSURFTlRfVkFMVUUgKi8sCiAgICAgICAgcGFyc2U6IGZ1bmN0aW9uIChfY29udGV4dCwgdmlzaWJpbGl0eSkgewogICAgICAgICAgICBzd2l0Y2ggKHZpc2liaWxpdHkpIHsKICAgICAgICAgICAgICAgIGNhc2UgJ2hpZGRlbic6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDEgLyogSElEREVOICovOwogICAgICAgICAgICAgICAgY2FzZSAnY29sbGFwc2UnOgogICAgICAgICAgICAgICAgICAgIHJldHVybiAyIC8qIENPTExBUFNFICovOwogICAgICAgICAgICAgICAgY2FzZSAndmlzaWJsZSc6CiAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgIHJldHVybiAwIC8qIFZJU0lCTEUgKi87CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9OwoKICAgIHZhciBXT1JEX0JSRUFLOwogICAgKGZ1bmN0aW9uIChXT1JEX0JSRUFLKSB7CiAgICAgICAgV09SRF9CUkVBS1siTk9STUFMIl0gPSAibm9ybWFsIjsKICAgICAgICBXT1JEX0JSRUFLWyJCUkVBS19BTEwiXSA9ICJicmVhay1hbGwiOwogICAgICAgIFdPUkRfQlJFQUtbIktFRVBfQUxMIl0gPSAia2VlcC1hbGwiOwogICAgfSkoV09SRF9CUkVBSyB8fCAoV09SRF9CUkVBSyA9IHt9KSk7CiAgICB2YXIgd29yZEJyZWFrID0gewogICAgICAgIG5hbWU6ICd3b3JkLWJyZWFrJywKICAgICAgICBpbml0aWFsVmFsdWU6ICdub3JtYWwnLAogICAgICAgIHByZWZpeDogZmFsc2UsCiAgICAgICAgdHlwZTogMiAvKiBJREVOVF9WQUxVRSAqLywKICAgICAgICBwYXJzZTogZnVuY3Rpb24gKF9jb250ZXh0LCB3b3JkQnJlYWspIHsKICAgICAgICAgICAgc3dpdGNoICh3b3JkQnJlYWspIHsKICAgICAgICAgICAgICAgIGNhc2UgJ2JyZWFrLWFsbCc6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFdPUkRfQlJFQUsuQlJFQUtfQUxMOwogICAgICAgICAgICAgICAgY2FzZSAna2VlcC1hbGwnOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBXT1JEX0JSRUFLLktFRVBfQUxMOwogICAgICAgICAgICAgICAgY2FzZSAnbm9ybWFsJzoKICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFdPUkRfQlJFQUsuTk9STUFMOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfTsKCiAgICB2YXIgekluZGV4ID0gewogICAgICAgIG5hbWU6ICd6LWluZGV4JywKICAgICAgICBpbml0aWFsVmFsdWU6ICdhdXRvJywKICAgICAgICBwcmVmaXg6IGZhbHNlLAogICAgICAgIHR5cGU6IDAgLyogVkFMVUUgKi8sCiAgICAgICAgcGFyc2U6IGZ1bmN0aW9uIChfY29udGV4dCwgdG9rZW4pIHsKICAgICAgICAgICAgaWYgKHRva2VuLnR5cGUgPT09IDIwIC8qIElERU5UX1RPS0VOICovKSB7CiAgICAgICAgICAgICAgICByZXR1cm4geyBhdXRvOiB0cnVlLCBvcmRlcjogMCB9OwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChpc051bWJlclRva2VuKHRva2VuKSkgewogICAgICAgICAgICAgICAgcmV0dXJuIHsgYXV0bzogZmFsc2UsIG9yZGVyOiB0b2tlbi5udW1iZXIgfTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgei1pbmRleCBudW1iZXIgcGFyc2VkIik7CiAgICAgICAgfQogICAgfTsKCiAgICB2YXIgdGltZSA9IHsKICAgICAgICBuYW1lOiAndGltZScsCiAgICAgICAgcGFyc2U6IGZ1bmN0aW9uIChfY29udGV4dCwgdmFsdWUpIHsKICAgICAgICAgICAgaWYgKHZhbHVlLnR5cGUgPT09IDE1IC8qIERJTUVOU0lPTl9UT0tFTiAqLykgewogICAgICAgICAgICAgICAgc3dpdGNoICh2YWx1ZS51bml0LnRvTG93ZXJDYXNlKCkpIHsKICAgICAgICAgICAgICAgICAgICBjYXNlICdzJzoKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDEwMDAgKiB2YWx1ZS5udW1iZXI7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAnbXMnOgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWUubnVtYmVyOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiVW5zdXBwb3J0ZWQgdGltZSB0eXBlIik7CiAgICAgICAgfQogICAgfTsKCiAgICB2YXIgb3BhY2l0eSA9IHsKICAgICAgICBuYW1lOiAnb3BhY2l0eScsCiAgICAgICAgaW5pdGlhbFZhbHVlOiAnMScsCiAgICAgICAgdHlwZTogMCAvKiBWQUxVRSAqLywKICAgICAgICBwcmVmaXg6IGZhbHNlLAogICAgICAgIHBhcnNlOiBmdW5jdGlvbiAoX2NvbnRleHQsIHRva2VuKSB7CiAgICAgICAgICAgIGlmIChpc051bWJlclRva2VuKHRva2VuKSkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRva2VuLm51bWJlcjsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gMTsKICAgICAgICB9CiAgICB9OwoKICAgIHZhciB0ZXh0RGVjb3JhdGlvbkNvbG9yID0gewogICAgICAgIG5hbWU6ICJ0ZXh0LWRlY29yYXRpb24tY29sb3IiLAogICAgICAgIGluaXRpYWxWYWx1ZTogJ3RyYW5zcGFyZW50JywKICAgICAgICBwcmVmaXg6IGZhbHNlLAogICAgICAgIHR5cGU6IDMgLyogVFlQRV9WQUxVRSAqLywKICAgICAgICBmb3JtYXQ6ICdjb2xvcicKICAgIH07CgogICAgdmFyIHRleHREZWNvcmF0aW9uTGluZSA9IHsKICAgICAgICBuYW1lOiAndGV4dC1kZWNvcmF0aW9uLWxpbmUnLAogICAgICAgIGluaXRpYWxWYWx1ZTogJ25vbmUnLAogICAgICAgIHByZWZpeDogZmFsc2UsCiAgICAgICAgdHlwZTogMSAvKiBMSVNUICovLAogICAgICAgIHBhcnNlOiBmdW5jdGlvbiAoX2NvbnRleHQsIHRva2VucykgewogICAgICAgICAgICByZXR1cm4gdG9rZW5zCiAgICAgICAgICAgICAgICAuZmlsdGVyKGlzSWRlbnRUb2tlbikKICAgICAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKHRva2VuKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKHRva2VuLnZhbHVlKSB7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAndW5kZXJsaW5lJzoKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDEgLyogVU5ERVJMSU5FICovOwogICAgICAgICAgICAgICAgICAgIGNhc2UgJ292ZXJsaW5lJzoKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDIgLyogT1ZFUkxJTkUgKi87CiAgICAgICAgICAgICAgICAgICAgY2FzZSAnbGluZS10aHJvdWdoJzoKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDMgLyogTElORV9USFJPVUdIICovOwogICAgICAgICAgICAgICAgICAgIGNhc2UgJ25vbmUnOgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gNCAvKiBCTElOSyAqLzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiAwIC8qIE5PTkUgKi87CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChsaW5lKSB7IHJldHVybiBsaW5lICE9PSAwIC8qIE5PTkUgKi87IH0pOwogICAgICAgIH0KICAgIH07CgogICAgdmFyIGZvbnRGYW1pbHkgPSB7CiAgICAgICAgbmFtZTogImZvbnQtZmFtaWx5IiwKICAgICAgICBpbml0aWFsVmFsdWU6ICcnLAogICAgICAgIHByZWZpeDogZmFsc2UsCiAgICAgICAgdHlwZTogMSAvKiBMSVNUICovLAogICAgICAgIHBhcnNlOiBmdW5jdGlvbiAoX2NvbnRleHQsIHRva2VucykgewogICAgICAgICAgICB2YXIgYWNjdW11bGF0b3IgPSBbXTsKICAgICAgICAgICAgdmFyIHJlc3VsdHMgPSBbXTsKICAgICAgICAgICAgdG9rZW5zLmZvckVhY2goZnVuY3Rpb24gKHRva2VuKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKHRva2VuLnR5cGUpIHsKICAgICAgICAgICAgICAgICAgICBjYXNlIDIwIC8qIElERU5UX1RPS0VOICovOgogICAgICAgICAgICAgICAgICAgIGNhc2UgMCAvKiBTVFJJTkdfVE9LRU4gKi86CiAgICAgICAgICAgICAgICAgICAgICAgIGFjY3VtdWxhdG9yLnB1c2godG9rZW4udmFsdWUpOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlIDE3IC8qIE5VTUJFUl9UT0tFTiAqLzoKICAgICAgICAgICAgICAgICAgICAgICAgYWNjdW11bGF0b3IucHVzaCh0b2tlbi5udW1iZXIudG9TdHJpbmcoKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgNCAvKiBDT01NQV9UT0tFTiAqLzoKICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKGFjY3VtdWxhdG9yLmpvaW4oJyAnKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGFjY3VtdWxhdG9yLmxlbmd0aCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgaWYgKGFjY3VtdWxhdG9yLmxlbmd0aCkgewogICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKGFjY3VtdWxhdG9yLmpvaW4oJyAnKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHMubWFwKGZ1bmN0aW9uIChyZXN1bHQpIHsgcmV0dXJuIChyZXN1bHQuaW5kZXhPZignICcpID09PSAtMSA/IHJlc3VsdCA6ICInIiArIHJlc3VsdCArICInIik7IH0pOwogICAgICAgIH0KICAgIH07CgogICAgdmFyIGZvbnRTaXplID0gewogICAgICAgIG5hbWU6ICJmb250LXNpemUiLAogICAgICAgIGluaXRpYWxWYWx1ZTogJzAnLAogICAgICAgIHByZWZpeDogZmFsc2UsCiAgICAgICAgdHlwZTogMyAvKiBUWVBFX1ZBTFVFICovLAogICAgICAgIGZvcm1hdDogJ2xlbmd0aCcKICAgIH07CgogICAgdmFyIGZvbnRXZWlnaHQgPSB7CiAgICAgICAgbmFtZTogJ2ZvbnQtd2VpZ2h0JywKICAgICAgICBpbml0aWFsVmFsdWU6ICdub3JtYWwnLAogICAgICAgIHR5cGU6IDAgLyogVkFMVUUgKi8sCiAgICAgICAgcHJlZml4OiBmYWxzZSwKICAgICAgICBwYXJzZTogZnVuY3Rpb24gKF9jb250ZXh0LCB0b2tlbikgewogICAgICAgICAgICBpZiAoaXNOdW1iZXJUb2tlbih0b2tlbikpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0b2tlbi5udW1iZXI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGlzSWRlbnRUb2tlbih0b2tlbikpIHsKICAgICAgICAgICAgICAgIHN3aXRjaCAodG9rZW4udmFsdWUpIHsKICAgICAgICAgICAgICAgICAgICBjYXNlICdib2xkJzoKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDcwMDsKICAgICAgICAgICAgICAgICAgICBjYXNlICdub3JtYWwnOgogICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiA0MDA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIDQwMDsKICAgICAgICB9CiAgICB9OwoKICAgIHZhciBmb250VmFyaWFudCA9IHsKICAgICAgICBuYW1lOiAnZm9udC12YXJpYW50JywKICAgICAgICBpbml0aWFsVmFsdWU6ICdub25lJywKICAgICAgICB0eXBlOiAxIC8qIExJU1QgKi8sCiAgICAgICAgcHJlZml4OiBmYWxzZSwKICAgICAgICBwYXJzZTogZnVuY3Rpb24gKF9jb250ZXh0LCB0b2tlbnMpIHsKICAgICAgICAgICAgcmV0dXJuIHRva2Vucy5maWx0ZXIoaXNJZGVudFRva2VuKS5tYXAoZnVuY3Rpb24gKHRva2VuKSB7IHJldHVybiB0b2tlbi52YWx1ZTsgfSk7CiAgICAgICAgfQogICAgfTsKCiAgICB2YXIgZm9udFN0eWxlID0gewogICAgICAgIG5hbWU6ICdmb250LXN0eWxlJywKICAgICAgICBpbml0aWFsVmFsdWU6ICdub3JtYWwnLAogICAgICAgIHByZWZpeDogZmFsc2UsCiAgICAgICAgdHlwZTogMiAvKiBJREVOVF9WQUxVRSAqLywKICAgICAgICBwYXJzZTogZnVuY3Rpb24gKF9jb250ZXh0LCBvdmVyZmxvdykgewogICAgICAgICAgICBzd2l0Y2ggKG92ZXJmbG93KSB7CiAgICAgICAgICAgICAgICBjYXNlICdvYmxpcXVlJzoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gIm9ibGlxdWUiIC8qIE9CTElRVUUgKi87CiAgICAgICAgICAgICAgICBjYXNlICdpdGFsaWMnOgogICAgICAgICAgICAgICAgICAgIHJldHVybiAiaXRhbGljIiAvKiBJVEFMSUMgKi87CiAgICAgICAgICAgICAgICBjYXNlICdub3JtYWwnOgogICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gIm5vcm1hbCIgLyogTk9STUFMICovOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfTsKCiAgICB2YXIgY29udGFpbnMgPSBmdW5jdGlvbiAoYml0LCB2YWx1ZSkgeyByZXR1cm4gKGJpdCAmIHZhbHVlKSAhPT0gMDsgfTsKCiAgICB2YXIgY29udGVudCA9IHsKICAgICAgICBuYW1lOiAnY29udGVudCcsCiAgICAgICAgaW5pdGlhbFZhbHVlOiAnbm9uZScsCiAgICAgICAgdHlwZTogMSAvKiBMSVNUICovLAogICAgICAgIHByZWZpeDogZmFsc2UsCiAgICAgICAgcGFyc2U6IGZ1bmN0aW9uIChfY29udGV4dCwgdG9rZW5zKSB7CiAgICAgICAgICAgIGlmICh0b2tlbnMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gW107CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIGZpcnN0ID0gdG9rZW5zWzBdOwogICAgICAgICAgICBpZiAoZmlyc3QudHlwZSA9PT0gMjAgLyogSURFTlRfVE9LRU4gKi8gJiYgZmlyc3QudmFsdWUgPT09ICdub25lJykgewogICAgICAgICAgICAgICAgcmV0dXJuIFtdOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiB0b2tlbnM7CiAgICAgICAgfQogICAgfTsKCiAgICB2YXIgY291bnRlckluY3JlbWVudCA9IHsKICAgICAgICBuYW1lOiAnY291bnRlci1pbmNyZW1lbnQnLAogICAgICAgIGluaXRpYWxWYWx1ZTogJ25vbmUnLAogICAgICAgIHByZWZpeDogdHJ1ZSwKICAgICAgICB0eXBlOiAxIC8qIExJU1QgKi8sCiAgICAgICAgcGFyc2U6IGZ1bmN0aW9uIChfY29udGV4dCwgdG9rZW5zKSB7CiAgICAgICAgICAgIGlmICh0b2tlbnMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgZmlyc3QgPSB0b2tlbnNbMF07CiAgICAgICAgICAgIGlmIChmaXJzdC50eXBlID09PSAyMCAvKiBJREVOVF9UT0tFTiAqLyAmJiBmaXJzdC52YWx1ZSA9PT0gJ25vbmUnKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgaW5jcmVtZW50cyA9IFtdOwogICAgICAgICAgICB2YXIgZmlsdGVyZWQgPSB0b2tlbnMuZmlsdGVyKG5vbldoaXRlU3BhY2UpOwogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZpbHRlcmVkLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICB2YXIgY291bnRlciA9IGZpbHRlcmVkW2ldOwogICAgICAgICAgICAgICAgdmFyIG5leHQgPSBmaWx0ZXJlZFtpICsgMV07CiAgICAgICAgICAgICAgICBpZiAoY291bnRlci50eXBlID09PSAyMCAvKiBJREVOVF9UT0tFTiAqLykgewogICAgICAgICAgICAgICAgICAgIHZhciBpbmNyZW1lbnQgPSBuZXh0ICYmIGlzTnVtYmVyVG9rZW4obmV4dCkgPyBuZXh0Lm51bWJlciA6IDE7CiAgICAgICAgICAgICAgICAgICAgaW5jcmVtZW50cy5wdXNoKHsgY291bnRlcjogY291bnRlci52YWx1ZSwgaW5jcmVtZW50OiBpbmNyZW1lbnQgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGluY3JlbWVudHM7CiAgICAgICAgfQogICAgfTsKCiAgICB2YXIgY291bnRlclJlc2V0ID0gewogICAgICAgIG5hbWU6ICdjb3VudGVyLXJlc2V0JywKICAgICAgICBpbml0aWFsVmFsdWU6ICdub25lJywKICAgICAgICBwcmVmaXg6IHRydWUsCiAgICAgICAgdHlwZTogMSAvKiBMSVNUICovLAogICAgICAgIHBhcnNlOiBmdW5jdGlvbiAoX2NvbnRleHQsIHRva2VucykgewogICAgICAgICAgICBpZiAodG9rZW5zLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICAgICAgcmV0dXJuIFtdOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciByZXNldHMgPSBbXTsKICAgICAgICAgICAgdmFyIGZpbHRlcmVkID0gdG9rZW5zLmZpbHRlcihub25XaGl0ZVNwYWNlKTsKICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmaWx0ZXJlZC5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgdmFyIGNvdW50ZXIgPSBmaWx0ZXJlZFtpXTsKICAgICAgICAgICAgICAgIHZhciBuZXh0ID0gZmlsdGVyZWRbaSArIDFdOwogICAgICAgICAgICAgICAgaWYgKGlzSWRlbnRUb2tlbihjb3VudGVyKSAmJiBjb3VudGVyLnZhbHVlICE9PSAnbm9uZScpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgcmVzZXQgPSBuZXh0ICYmIGlzTnVtYmVyVG9rZW4obmV4dCkgPyBuZXh0Lm51bWJlciA6IDA7CiAgICAgICAgICAgICAgICAgICAgcmVzZXRzLnB1c2goeyBjb3VudGVyOiBjb3VudGVyLnZhbHVlLCByZXNldDogcmVzZXQgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHJlc2V0czsKICAgICAgICB9CiAgICB9OwoKICAgIHZhciBkdXJhdGlvbiA9IHsKICAgICAgICBuYW1lOiAnZHVyYXRpb24nLAogICAgICAgIGluaXRpYWxWYWx1ZTogJzBzJywKICAgICAgICBwcmVmaXg6IGZhbHNlLAogICAgICAgIHR5cGU6IDEgLyogTElTVCAqLywKICAgICAgICBwYXJzZTogZnVuY3Rpb24gKGNvbnRleHQsIHRva2VucykgewogICAgICAgICAgICByZXR1cm4gdG9rZW5zLmZpbHRlcihpc0RpbWVuc2lvblRva2VuKS5tYXAoZnVuY3Rpb24gKHRva2VuKSB7IHJldHVybiB0aW1lLnBhcnNlKGNvbnRleHQsIHRva2VuKTsgfSk7CiAgICAgICAgfQogICAgfTsKCiAgICB2YXIgcXVvdGVzID0gewogICAgICAgIG5hbWU6ICdxdW90ZXMnLAogICAgICAgIGluaXRpYWxWYWx1ZTogJ25vbmUnLAogICAgICAgIHByZWZpeDogdHJ1ZSwKICAgICAgICB0eXBlOiAxIC8qIExJU1QgKi8sCiAgICAgICAgcGFyc2U6IGZ1bmN0aW9uIChfY29udGV4dCwgdG9rZW5zKSB7CiAgICAgICAgICAgIGlmICh0b2tlbnMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgZmlyc3QgPSB0b2tlbnNbMF07CiAgICAgICAgICAgIGlmIChmaXJzdC50eXBlID09PSAyMCAvKiBJREVOVF9UT0tFTiAqLyAmJiBmaXJzdC52YWx1ZSA9PT0gJ25vbmUnKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgcXVvdGVzID0gW107CiAgICAgICAgICAgIHZhciBmaWx0ZXJlZCA9IHRva2Vucy5maWx0ZXIoaXNTdHJpbmdUb2tlbik7CiAgICAgICAgICAgIGlmIChmaWx0ZXJlZC5sZW5ndGggJSAyICE9PSAwKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgfQogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZpbHRlcmVkLmxlbmd0aDsgaSArPSAyKSB7CiAgICAgICAgICAgICAgICB2YXIgb3Blbl8xID0gZmlsdGVyZWRbaV0udmFsdWU7CiAgICAgICAgICAgICAgICB2YXIgY2xvc2VfMSA9IGZpbHRlcmVkW2kgKyAxXS52YWx1ZTsKICAgICAgICAgICAgICAgIHF1b3Rlcy5wdXNoKHsgb3Blbjogb3Blbl8xLCBjbG9zZTogY2xvc2VfMSB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gcXVvdGVzOwogICAgICAgIH0KICAgIH07CiAgICB2YXIgZ2V0UXVvdGUgPSBmdW5jdGlvbiAocXVvdGVzLCBkZXB0aCwgb3BlbikgewogICAgICAgIGlmICghcXVvdGVzKSB7CiAgICAgICAgICAgIHJldHVybiAnJzsKICAgICAgICB9CiAgICAgICAgdmFyIHF1b3RlID0gcXVvdGVzW01hdGgubWluKGRlcHRoLCBxdW90ZXMubGVuZ3RoIC0gMSldOwogICAgICAgIGlmICghcXVvdGUpIHsKICAgICAgICAgICAgcmV0dXJuICcnOwogICAgICAgIH0KICAgICAgICByZXR1cm4gb3BlbiA/IHF1b3RlLm9wZW4gOiBxdW90ZS5jbG9zZTsKICAgIH07CgogICAgdmFyIGJveFNoYWRvdyA9IHsKICAgICAgICBuYW1lOiAnYm94LXNoYWRvdycsCiAgICAgICAgaW5pdGlhbFZhbHVlOiAnbm9uZScsCiAgICAgICAgdHlwZTogMSAvKiBMSVNUICovLAogICAgICAgIHByZWZpeDogZmFsc2UsCiAgICAgICAgcGFyc2U6IGZ1bmN0aW9uIChjb250ZXh0LCB0b2tlbnMpIHsKICAgICAgICAgICAgaWYgKHRva2Vucy5sZW5ndGggPT09IDEgJiYgaXNJZGVudFdpdGhWYWx1ZSh0b2tlbnNbMF0sICdub25lJykpIHsKICAgICAgICAgICAgICAgIHJldHVybiBbXTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gcGFyc2VGdW5jdGlvbkFyZ3ModG9rZW5zKS5tYXAoZnVuY3Rpb24gKHZhbHVlcykgewogICAgICAgICAgICAgICAgdmFyIHNoYWRvdyA9IHsKICAgICAgICAgICAgICAgICAgICBjb2xvcjogMHgwMDAwMDBmZiwKICAgICAgICAgICAgICAgICAgICBvZmZzZXRYOiBaRVJPX0xFTkdUSCwKICAgICAgICAgICAgICAgICAgICBvZmZzZXRZOiBaRVJPX0xFTkdUSCwKICAgICAgICAgICAgICAgICAgICBibHVyOiBaRVJPX0xFTkdUSCwKICAgICAgICAgICAgICAgICAgICBzcHJlYWQ6IFpFUk9fTEVOR1RILAogICAgICAgICAgICAgICAgICAgIGluc2V0OiBmYWxzZQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHZhciBjID0gMDsKICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmFsdWVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHRva2VuID0gdmFsdWVzW2ldOwogICAgICAgICAgICAgICAgICAgIGlmIChpc0lkZW50V2l0aFZhbHVlKHRva2VuLCAnaW5zZXQnKSkgewogICAgICAgICAgICAgICAgICAgICAgICBzaGFkb3cuaW5zZXQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChpc0xlbmd0aCh0b2tlbikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGMgPT09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoYWRvdy5vZmZzZXRYID0gdG9rZW47CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoYyA9PT0gMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hhZG93Lm9mZnNldFkgPSB0b2tlbjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChjID09PSAyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaGFkb3cuYmx1ciA9IHRva2VuOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hhZG93LnNwcmVhZCA9IHRva2VuOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGMrKzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNoYWRvdy5jb2xvciA9IGNvbG9yJDEucGFyc2UoY29udGV4dCwgdG9rZW4pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBzaGFkb3c7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgIH07CgogICAgdmFyIHBhaW50T3JkZXIgPSB7CiAgICAgICAgbmFtZTogJ3BhaW50LW9yZGVyJywKICAgICAgICBpbml0aWFsVmFsdWU6ICdub3JtYWwnLAogICAgICAgIHByZWZpeDogZmFsc2UsCiAgICAgICAgdHlwZTogMSAvKiBMSVNUICovLAogICAgICAgIHBhcnNlOiBmdW5jdGlvbiAoX2NvbnRleHQsIHRva2VucykgewogICAgICAgICAgICB2YXIgREVGQVVMVF9WQUxVRSA9IFswIC8qIEZJTEwgKi8sIDEgLyogU1RST0tFICovLCAyIC8qIE1BUktFUlMgKi9dOwogICAgICAgICAgICB2YXIgbGF5ZXJzID0gW107CiAgICAgICAgICAgIHRva2Vucy5maWx0ZXIoaXNJZGVudFRva2VuKS5mb3JFYWNoKGZ1bmN0aW9uICh0b2tlbikgewogICAgICAgICAgICAgICAgc3dpdGNoICh0b2tlbi52YWx1ZSkgewogICAgICAgICAgICAgICAgICAgIGNhc2UgJ3N0cm9rZSc6CiAgICAgICAgICAgICAgICAgICAgICAgIGxheWVycy5wdXNoKDEgLyogU1RST0tFICovKTsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZmlsbCc6CiAgICAgICAgICAgICAgICAgICAgICAgIGxheWVycy5wdXNoKDAgLyogRklMTCAqLyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgJ21hcmtlcnMnOgogICAgICAgICAgICAgICAgICAgICAgICBsYXllcnMucHVzaCgyIC8qIE1BUktFUlMgKi8pOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIERFRkFVTFRfVkFMVUUuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICAgICAgICAgIGlmIChsYXllcnMuaW5kZXhPZih2YWx1ZSkgPT09IC0xKSB7CiAgICAgICAgICAgICAgICAgICAgbGF5ZXJzLnB1c2godmFsdWUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIGxheWVyczsKICAgICAgICB9CiAgICB9OwoKICAgIHZhciB3ZWJraXRUZXh0U3Ryb2tlQ29sb3IgPSB7CiAgICAgICAgbmFtZTogIi13ZWJraXQtdGV4dC1zdHJva2UtY29sb3IiLAogICAgICAgIGluaXRpYWxWYWx1ZTogJ2N1cnJlbnRjb2xvcicsCiAgICAgICAgcHJlZml4OiBmYWxzZSwKICAgICAgICB0eXBlOiAzIC8qIFRZUEVfVkFMVUUgKi8sCiAgICAgICAgZm9ybWF0OiAnY29sb3InCiAgICB9OwoKICAgIHZhciB3ZWJraXRUZXh0U3Ryb2tlV2lkdGggPSB7CiAgICAgICAgbmFtZTogIi13ZWJraXQtdGV4dC1zdHJva2Utd2lkdGgiLAogICAgICAgIGluaXRpYWxWYWx1ZTogJzAnLAogICAgICAgIHR5cGU6IDAgLyogVkFMVUUgKi8sCiAgICAgICAgcHJlZml4OiBmYWxzZSwKICAgICAgICBwYXJzZTogZnVuY3Rpb24gKF9jb250ZXh0LCB0b2tlbikgewogICAgICAgICAgICBpZiAoaXNEaW1lbnNpb25Ub2tlbih0b2tlbikpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0b2tlbi5udW1iZXI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgfQogICAgfTsKCiAgICB2YXIgQ1NTUGFyc2VkRGVjbGFyYXRpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CiAgICAgICAgZnVuY3Rpb24gQ1NTUGFyc2VkRGVjbGFyYXRpb24oY29udGV4dCwgZGVjbGFyYXRpb24pIHsKICAgICAgICAgICAgdmFyIF9hLCBfYjsKICAgICAgICAgICAgdGhpcy5hbmltYXRpb25EdXJhdGlvbiA9IHBhcnNlKGNvbnRleHQsIGR1cmF0aW9uLCBkZWNsYXJhdGlvbi5hbmltYXRpb25EdXJhdGlvbik7CiAgICAgICAgICAgIHRoaXMuYmFja2dyb3VuZENsaXAgPSBwYXJzZShjb250ZXh0LCBiYWNrZ3JvdW5kQ2xpcCwgZGVjbGFyYXRpb24uYmFja2dyb3VuZENsaXApOwogICAgICAgICAgICB0aGlzLmJhY2tncm91bmRDb2xvciA9IHBhcnNlKGNvbnRleHQsIGJhY2tncm91bmRDb2xvciwgZGVjbGFyYXRpb24uYmFja2dyb3VuZENvbG9yKTsKICAgICAgICAgICAgdGhpcy5iYWNrZ3JvdW5kSW1hZ2UgPSBwYXJzZShjb250ZXh0LCBiYWNrZ3JvdW5kSW1hZ2UsIGRlY2xhcmF0aW9uLmJhY2tncm91bmRJbWFnZSk7CiAgICAgICAgICAgIHRoaXMuYmFja2dyb3VuZE9yaWdpbiA9IHBhcnNlKGNvbnRleHQsIGJhY2tncm91bmRPcmlnaW4sIGRlY2xhcmF0aW9uLmJhY2tncm91bmRPcmlnaW4pOwogICAgICAgICAgICB0aGlzLmJhY2tncm91bmRQb3NpdGlvbiA9IHBhcnNlKGNvbnRleHQsIGJhY2tncm91bmRQb3NpdGlvbiwgZGVjbGFyYXRpb24uYmFja2dyb3VuZFBvc2l0aW9uKTsKICAgICAgICAgICAgdGhpcy5iYWNrZ3JvdW5kUmVwZWF0ID0gcGFyc2UoY29udGV4dCwgYmFja2dyb3VuZFJlcGVhdCwgZGVjbGFyYXRpb24uYmFja2dyb3VuZFJlcGVhdCk7CiAgICAgICAgICAgIHRoaXMuYmFja2dyb3VuZFNpemUgPSBwYXJzZShjb250ZXh0LCBiYWNrZ3JvdW5kU2l6ZSwgZGVjbGFyYXRpb24uYmFja2dyb3VuZFNpemUpOwogICAgICAgICAgICB0aGlzLmJvcmRlclRvcENvbG9yID0gcGFyc2UoY29udGV4dCwgYm9yZGVyVG9wQ29sb3IsIGRlY2xhcmF0aW9uLmJvcmRlclRvcENvbG9yKTsKICAgICAgICAgICAgdGhpcy5ib3JkZXJSaWdodENvbG9yID0gcGFyc2UoY29udGV4dCwgYm9yZGVyUmlnaHRDb2xvciwgZGVjbGFyYXRpb24uYm9yZGVyUmlnaHRDb2xvcik7CiAgICAgICAgICAgIHRoaXMuYm9yZGVyQm90dG9tQ29sb3IgPSBwYXJzZShjb250ZXh0LCBib3JkZXJCb3R0b21Db2xvciwgZGVjbGFyYXRpb24uYm9yZGVyQm90dG9tQ29sb3IpOwogICAgICAgICAgICB0aGlzLmJvcmRlckxlZnRDb2xvciA9IHBhcnNlKGNvbnRleHQsIGJvcmRlckxlZnRDb2xvciwgZGVjbGFyYXRpb24uYm9yZGVyTGVmdENvbG9yKTsKICAgICAgICAgICAgdGhpcy5ib3JkZXJUb3BMZWZ0UmFkaXVzID0gcGFyc2UoY29udGV4dCwgYm9yZGVyVG9wTGVmdFJhZGl1cywgZGVjbGFyYXRpb24uYm9yZGVyVG9wTGVmdFJhZGl1cyk7CiAgICAgICAgICAgIHRoaXMuYm9yZGVyVG9wUmlnaHRSYWRpdXMgPSBwYXJzZShjb250ZXh0LCBib3JkZXJUb3BSaWdodFJhZGl1cywgZGVjbGFyYXRpb24uYm9yZGVyVG9wUmlnaHRSYWRpdXMpOwogICAgICAgICAgICB0aGlzLmJvcmRlckJvdHRvbVJpZ2h0UmFkaXVzID0gcGFyc2UoY29udGV4dCwgYm9yZGVyQm90dG9tUmlnaHRSYWRpdXMsIGRlY2xhcmF0aW9uLmJvcmRlckJvdHRvbVJpZ2h0UmFkaXVzKTsKICAgICAgICAgICAgdGhpcy5ib3JkZXJCb3R0b21MZWZ0UmFkaXVzID0gcGFyc2UoY29udGV4dCwgYm9yZGVyQm90dG9tTGVmdFJhZGl1cywgZGVjbGFyYXRpb24uYm9yZGVyQm90dG9tTGVmdFJhZGl1cyk7CiAgICAgICAgICAgIHRoaXMuYm9yZGVyVG9wU3R5bGUgPSBwYXJzZShjb250ZXh0LCBib3JkZXJUb3BTdHlsZSwgZGVjbGFyYXRpb24uYm9yZGVyVG9wU3R5bGUpOwogICAgICAgICAgICB0aGlzLmJvcmRlclJpZ2h0U3R5bGUgPSBwYXJzZShjb250ZXh0LCBib3JkZXJSaWdodFN0eWxlLCBkZWNsYXJhdGlvbi5ib3JkZXJSaWdodFN0eWxlKTsKICAgICAgICAgICAgdGhpcy5ib3JkZXJCb3R0b21TdHlsZSA9IHBhcnNlKGNvbnRleHQsIGJvcmRlckJvdHRvbVN0eWxlLCBkZWNsYXJhdGlvbi5ib3JkZXJCb3R0b21TdHlsZSk7CiAgICAgICAgICAgIHRoaXMuYm9yZGVyTGVmdFN0eWxlID0gcGFyc2UoY29udGV4dCwgYm9yZGVyTGVmdFN0eWxlLCBkZWNsYXJhdGlvbi5ib3JkZXJMZWZ0U3R5bGUpOwogICAgICAgICAgICB0aGlzLmJvcmRlclRvcFdpZHRoID0gcGFyc2UoY29udGV4dCwgYm9yZGVyVG9wV2lkdGgsIGRlY2xhcmF0aW9uLmJvcmRlclRvcFdpZHRoKTsKICAgICAgICAgICAgdGhpcy5ib3JkZXJSaWdodFdpZHRoID0gcGFyc2UoY29udGV4dCwgYm9yZGVyUmlnaHRXaWR0aCwgZGVjbGFyYXRpb24uYm9yZGVyUmlnaHRXaWR0aCk7CiAgICAgICAgICAgIHRoaXMuYm9yZGVyQm90dG9tV2lkdGggPSBwYXJzZShjb250ZXh0LCBib3JkZXJCb3R0b21XaWR0aCwgZGVjbGFyYXRpb24uYm9yZGVyQm90dG9tV2lkdGgpOwogICAgICAgICAgICB0aGlzLmJvcmRlckxlZnRXaWR0aCA9IHBhcnNlKGNvbnRleHQsIGJvcmRlckxlZnRXaWR0aCwgZGVjbGFyYXRpb24uYm9yZGVyTGVmdFdpZHRoKTsKICAgICAgICAgICAgdGhpcy5ib3hTaGFkb3cgPSBwYXJzZShjb250ZXh0LCBib3hTaGFkb3csIGRlY2xhcmF0aW9uLmJveFNoYWRvdyk7CiAgICAgICAgICAgIHRoaXMuY29sb3IgPSBwYXJzZShjb250ZXh0LCBjb2xvciwgZGVjbGFyYXRpb24uY29sb3IpOwogICAgICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IHBhcnNlKGNvbnRleHQsIGRpcmVjdGlvbiwgZGVjbGFyYXRpb24uZGlyZWN0aW9uKTsKICAgICAgICAgICAgdGhpcy5kaXNwbGF5ID0gcGFyc2UoY29udGV4dCwgZGlzcGxheSwgZGVjbGFyYXRpb24uZGlzcGxheSk7CiAgICAgICAgICAgIHRoaXMuZmxvYXQgPSBwYXJzZShjb250ZXh0LCBmbG9hdCwgZGVjbGFyYXRpb24uY3NzRmxvYXQpOwogICAgICAgICAgICB0aGlzLmZvbnRGYW1pbHkgPSBwYXJzZShjb250ZXh0LCBmb250RmFtaWx5LCBkZWNsYXJhdGlvbi5mb250RmFtaWx5KTsKICAgICAgICAgICAgdGhpcy5mb250U2l6ZSA9IHBhcnNlKGNvbnRleHQsIGZvbnRTaXplLCBkZWNsYXJhdGlvbi5mb250U2l6ZSk7CiAgICAgICAgICAgIHRoaXMuZm9udFN0eWxlID0gcGFyc2UoY29udGV4dCwgZm9udFN0eWxlLCBkZWNsYXJhdGlvbi5mb250U3R5bGUpOwogICAgICAgICAgICB0aGlzLmZvbnRWYXJpYW50ID0gcGFyc2UoY29udGV4dCwgZm9udFZhcmlhbnQsIGRlY2xhcmF0aW9uLmZvbnRWYXJpYW50KTsKICAgICAgICAgICAgdGhpcy5mb250V2VpZ2h0ID0gcGFyc2UoY29udGV4dCwgZm9udFdlaWdodCwgZGVjbGFyYXRpb24uZm9udFdlaWdodCk7CiAgICAgICAgICAgIHRoaXMubGV0dGVyU3BhY2luZyA9IHBhcnNlKGNvbnRleHQsIGxldHRlclNwYWNpbmcsIGRlY2xhcmF0aW9uLmxldHRlclNwYWNpbmcpOwogICAgICAgICAgICB0aGlzLmxpbmVCcmVhayA9IHBhcnNlKGNvbnRleHQsIGxpbmVCcmVhaywgZGVjbGFyYXRpb24ubGluZUJyZWFrKTsKICAgICAgICAgICAgdGhpcy5saW5lSGVpZ2h0ID0gcGFyc2UoY29udGV4dCwgbGluZUhlaWdodCwgZGVjbGFyYXRpb24ubGluZUhlaWdodCk7CiAgICAgICAgICAgIHRoaXMubGlzdFN0eWxlSW1hZ2UgPSBwYXJzZShjb250ZXh0LCBsaXN0U3R5bGVJbWFnZSwgZGVjbGFyYXRpb24ubGlzdFN0eWxlSW1hZ2UpOwogICAgICAgICAgICB0aGlzLmxpc3RTdHlsZVBvc2l0aW9uID0gcGFyc2UoY29udGV4dCwgbGlzdFN0eWxlUG9zaXRpb24sIGRlY2xhcmF0aW9uLmxpc3RTdHlsZVBvc2l0aW9uKTsKICAgICAgICAgICAgdGhpcy5saXN0U3R5bGVUeXBlID0gcGFyc2UoY29udGV4dCwgbGlzdFN0eWxlVHlwZSwgZGVjbGFyYXRpb24ubGlzdFN0eWxlVHlwZSk7CiAgICAgICAgICAgIHRoaXMubWFyZ2luVG9wID0gcGFyc2UoY29udGV4dCwgbWFyZ2luVG9wLCBkZWNsYXJhdGlvbi5tYXJnaW5Ub3ApOwogICAgICAgICAgICB0aGlzLm1hcmdpblJpZ2h0ID0gcGFyc2UoY29udGV4dCwgbWFyZ2luUmlnaHQsIGRlY2xhcmF0aW9uLm1hcmdpblJpZ2h0KTsKICAgICAgICAgICAgdGhpcy5tYXJnaW5Cb3R0b20gPSBwYXJzZShjb250ZXh0LCBtYXJnaW5Cb3R0b20sIGRlY2xhcmF0aW9uLm1hcmdpbkJvdHRvbSk7CiAgICAgICAgICAgIHRoaXMubWFyZ2luTGVmdCA9IHBhcnNlKGNvbnRleHQsIG1hcmdpbkxlZnQsIGRlY2xhcmF0aW9uLm1hcmdpbkxlZnQpOwogICAgICAgICAgICB0aGlzLm9wYWNpdHkgPSBwYXJzZShjb250ZXh0LCBvcGFjaXR5LCBkZWNsYXJhdGlvbi5vcGFjaXR5KTsKICAgICAgICAgICAgdmFyIG92ZXJmbG93VHVwbGUgPSBwYXJzZShjb250ZXh0LCBvdmVyZmxvdywgZGVjbGFyYXRpb24ub3ZlcmZsb3cpOwogICAgICAgICAgICB0aGlzLm92ZXJmbG93WCA9IG92ZXJmbG93VHVwbGVbMF07CiAgICAgICAgICAgIHRoaXMub3ZlcmZsb3dZID0gb3ZlcmZsb3dUdXBsZVtvdmVyZmxvd1R1cGxlLmxlbmd0aCA+IDEgPyAxIDogMF07CiAgICAgICAgICAgIHRoaXMub3ZlcmZsb3dXcmFwID0gcGFyc2UoY29udGV4dCwgb3ZlcmZsb3dXcmFwLCBkZWNsYXJhdGlvbi5vdmVyZmxvd1dyYXApOwogICAgICAgICAgICB0aGlzLnBhZGRpbmdUb3AgPSBwYXJzZShjb250ZXh0LCBwYWRkaW5nVG9wLCBkZWNsYXJhdGlvbi5wYWRkaW5nVG9wKTsKICAgICAgICAgICAgdGhpcy5wYWRkaW5nUmlnaHQgPSBwYXJzZShjb250ZXh0LCBwYWRkaW5nUmlnaHQsIGRlY2xhcmF0aW9uLnBhZGRpbmdSaWdodCk7CiAgICAgICAgICAgIHRoaXMucGFkZGluZ0JvdHRvbSA9IHBhcnNlKGNvbnRleHQsIHBhZGRpbmdCb3R0b20sIGRlY2xhcmF0aW9uLnBhZGRpbmdCb3R0b20pOwogICAgICAgICAgICB0aGlzLnBhZGRpbmdMZWZ0ID0gcGFyc2UoY29udGV4dCwgcGFkZGluZ0xlZnQsIGRlY2xhcmF0aW9uLnBhZGRpbmdMZWZ0KTsKICAgICAgICAgICAgdGhpcy5wYWludE9yZGVyID0gcGFyc2UoY29udGV4dCwgcGFpbnRPcmRlciwgZGVjbGFyYXRpb24ucGFpbnRPcmRlcik7CiAgICAgICAgICAgIHRoaXMucG9zaXRpb24gPSBwYXJzZShjb250ZXh0LCBwb3NpdGlvbiwgZGVjbGFyYXRpb24ucG9zaXRpb24pOwogICAgICAgICAgICB0aGlzLnRleHRBbGlnbiA9IHBhcnNlKGNvbnRleHQsIHRleHRBbGlnbiwgZGVjbGFyYXRpb24udGV4dEFsaWduKTsKICAgICAgICAgICAgdGhpcy50ZXh0RGVjb3JhdGlvbkNvbG9yID0gcGFyc2UoY29udGV4dCwgdGV4dERlY29yYXRpb25Db2xvciwgKF9hID0gZGVjbGFyYXRpb24udGV4dERlY29yYXRpb25Db2xvcikgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogZGVjbGFyYXRpb24uY29sb3IpOwogICAgICAgICAgICB0aGlzLnRleHREZWNvcmF0aW9uTGluZSA9IHBhcnNlKGNvbnRleHQsIHRleHREZWNvcmF0aW9uTGluZSwgKF9iID0gZGVjbGFyYXRpb24udGV4dERlY29yYXRpb25MaW5lKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBkZWNsYXJhdGlvbi50ZXh0RGVjb3JhdGlvbik7CiAgICAgICAgICAgIHRoaXMudGV4dFNoYWRvdyA9IHBhcnNlKGNvbnRleHQsIHRleHRTaGFkb3csIGRlY2xhcmF0aW9uLnRleHRTaGFkb3cpOwogICAgICAgICAgICB0aGlzLnRleHRUcmFuc2Zvcm0gPSBwYXJzZShjb250ZXh0LCB0ZXh0VHJhbnNmb3JtLCBkZWNsYXJhdGlvbi50ZXh0VHJhbnNmb3JtKTsKICAgICAgICAgICAgdGhpcy50cmFuc2Zvcm0gPSBwYXJzZShjb250ZXh0LCB0cmFuc2Zvcm0kMSwgZGVjbGFyYXRpb24udHJhbnNmb3JtKTsKICAgICAgICAgICAgdGhpcy50cmFuc2Zvcm1PcmlnaW4gPSBwYXJzZShjb250ZXh0LCB0cmFuc2Zvcm1PcmlnaW4sIGRlY2xhcmF0aW9uLnRyYW5zZm9ybU9yaWdpbik7CiAgICAgICAgICAgIHRoaXMudmlzaWJpbGl0eSA9IHBhcnNlKGNvbnRleHQsIHZpc2liaWxpdHksIGRlY2xhcmF0aW9uLnZpc2liaWxpdHkpOwogICAgICAgICAgICB0aGlzLndlYmtpdFRleHRTdHJva2VDb2xvciA9IHBhcnNlKGNvbnRleHQsIHdlYmtpdFRleHRTdHJva2VDb2xvciwgZGVjbGFyYXRpb24ud2Via2l0VGV4dFN0cm9rZUNvbG9yKTsKICAgICAgICAgICAgdGhpcy53ZWJraXRUZXh0U3Ryb2tlV2lkdGggPSBwYXJzZShjb250ZXh0LCB3ZWJraXRUZXh0U3Ryb2tlV2lkdGgsIGRlY2xhcmF0aW9uLndlYmtpdFRleHRTdHJva2VXaWR0aCk7CiAgICAgICAgICAgIHRoaXMud29yZEJyZWFrID0gcGFyc2UoY29udGV4dCwgd29yZEJyZWFrLCBkZWNsYXJhdGlvbi53b3JkQnJlYWspOwogICAgICAgICAgICB0aGlzLnpJbmRleCA9IHBhcnNlKGNvbnRleHQsIHpJbmRleCwgZGVjbGFyYXRpb24uekluZGV4KTsKICAgICAgICB9CiAgICAgICAgQ1NTUGFyc2VkRGVjbGFyYXRpb24ucHJvdG90eXBlLmlzVmlzaWJsZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGlzcGxheSA+IDAgJiYgdGhpcy5vcGFjaXR5ID4gMCAmJiB0aGlzLnZpc2liaWxpdHkgPT09IDAgLyogVklTSUJMRSAqLzsKICAgICAgICB9OwogICAgICAgIENTU1BhcnNlZERlY2xhcmF0aW9uLnByb3RvdHlwZS5pc1RyYW5zcGFyZW50ID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gaXNUcmFuc3BhcmVudCh0aGlzLmJhY2tncm91bmRDb2xvcik7CiAgICAgICAgfTsKICAgICAgICBDU1NQYXJzZWREZWNsYXJhdGlvbi5wcm90b3R5cGUuaXNUcmFuc2Zvcm1lZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMudHJhbnNmb3JtICE9PSBudWxsOwogICAgICAgIH07CiAgICAgICAgQ1NTUGFyc2VkRGVjbGFyYXRpb24ucHJvdG90eXBlLmlzUG9zaXRpb25lZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMucG9zaXRpb24gIT09IDAgLyogU1RBVElDICovOwogICAgICAgIH07CiAgICAgICAgQ1NTUGFyc2VkRGVjbGFyYXRpb24ucHJvdG90eXBlLmlzUG9zaXRpb25lZFdpdGhaSW5kZXggPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmlzUG9zaXRpb25lZCgpICYmICF0aGlzLnpJbmRleC5hdXRvOwogICAgICAgIH07CiAgICAgICAgQ1NTUGFyc2VkRGVjbGFyYXRpb24ucHJvdG90eXBlLmlzRmxvYXRpbmcgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmZsb2F0ICE9PSAwIC8qIE5PTkUgKi87CiAgICAgICAgfTsKICAgICAgICBDU1NQYXJzZWREZWNsYXJhdGlvbi5wcm90b3R5cGUuaXNJbmxpbmVMZXZlbCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIChjb250YWlucyh0aGlzLmRpc3BsYXksIDQgLyogSU5MSU5FICovKSB8fAogICAgICAgICAgICAgICAgY29udGFpbnModGhpcy5kaXNwbGF5LCAzMzU1NDQzMiAvKiBJTkxJTkVfQkxPQ0sgKi8pIHx8CiAgICAgICAgICAgICAgICBjb250YWlucyh0aGlzLmRpc3BsYXksIDI2ODQzNTQ1NiAvKiBJTkxJTkVfRkxFWCAqLykgfHwKICAgICAgICAgICAgICAgIGNvbnRhaW5zKHRoaXMuZGlzcGxheSwgNTM2ODcwOTEyIC8qIElOTElORV9HUklEICovKSB8fAogICAgICAgICAgICAgICAgY29udGFpbnModGhpcy5kaXNwbGF5LCA2NzEwODg2NCAvKiBJTkxJTkVfTElTVF9JVEVNICovKSB8fAogICAgICAgICAgICAgICAgY29udGFpbnModGhpcy5kaXNwbGF5LCAxMzQyMTc3MjggLyogSU5MSU5FX1RBQkxFICovKSk7CiAgICAgICAgfTsKICAgICAgICByZXR1cm4gQ1NTUGFyc2VkRGVjbGFyYXRpb247CiAgICB9KCkpOwogICAgdmFyIENTU1BhcnNlZFBzZXVkb0RlY2xhcmF0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewogICAgICAgIGZ1bmN0aW9uIENTU1BhcnNlZFBzZXVkb0RlY2xhcmF0aW9uKGNvbnRleHQsIGRlY2xhcmF0aW9uKSB7CiAgICAgICAgICAgIHRoaXMuY29udGVudCA9IHBhcnNlKGNvbnRleHQsIGNvbnRlbnQsIGRlY2xhcmF0aW9uLmNvbnRlbnQpOwogICAgICAgICAgICB0aGlzLnF1b3RlcyA9IHBhcnNlKGNvbnRleHQsIHF1b3RlcywgZGVjbGFyYXRpb24ucXVvdGVzKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIENTU1BhcnNlZFBzZXVkb0RlY2xhcmF0aW9uOwogICAgfSgpKTsKICAgIHZhciBDU1NQYXJzZWRDb3VudGVyRGVjbGFyYXRpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CiAgICAgICAgZnVuY3Rpb24gQ1NTUGFyc2VkQ291bnRlckRlY2xhcmF0aW9uKGNvbnRleHQsIGRlY2xhcmF0aW9uKSB7CiAgICAgICAgICAgIHRoaXMuY291bnRlckluY3JlbWVudCA9IHBhcnNlKGNvbnRleHQsIGNvdW50ZXJJbmNyZW1lbnQsIGRlY2xhcmF0aW9uLmNvdW50ZXJJbmNyZW1lbnQpOwogICAgICAgICAgICB0aGlzLmNvdW50ZXJSZXNldCA9IHBhcnNlKGNvbnRleHQsIGNvdW50ZXJSZXNldCwgZGVjbGFyYXRpb24uY291bnRlclJlc2V0KTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIENTU1BhcnNlZENvdW50ZXJEZWNsYXJhdGlvbjsKICAgIH0oKSk7CiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueQogICAgdmFyIHBhcnNlID0gZnVuY3Rpb24gKGNvbnRleHQsIGRlc2NyaXB0b3IsIHN0eWxlKSB7CiAgICAgICAgdmFyIHRva2VuaXplciA9IG5ldyBUb2tlbml6ZXIoKTsKICAgICAgICB2YXIgdmFsdWUgPSBzdHlsZSAhPT0gbnVsbCAmJiB0eXBlb2Ygc3R5bGUgIT09ICd1bmRlZmluZWQnID8gc3R5bGUudG9TdHJpbmcoKSA6IGRlc2NyaXB0b3IuaW5pdGlhbFZhbHVlOwogICAgICAgIHRva2VuaXplci53cml0ZSh2YWx1ZSk7CiAgICAgICAgdmFyIHBhcnNlciA9IG5ldyBQYXJzZXIodG9rZW5pemVyLnJlYWQoKSk7CiAgICAgICAgc3dpdGNoIChkZXNjcmlwdG9yLnR5cGUpIHsKICAgICAgICAgICAgY2FzZSAyIC8qIElERU5UX1ZBTFVFICovOgogICAgICAgICAgICAgICAgdmFyIHRva2VuID0gcGFyc2VyLnBhcnNlQ29tcG9uZW50VmFsdWUoKTsKICAgICAgICAgICAgICAgIHJldHVybiBkZXNjcmlwdG9yLnBhcnNlKGNvbnRleHQsIGlzSWRlbnRUb2tlbih0b2tlbikgPyB0b2tlbi52YWx1ZSA6IGRlc2NyaXB0b3IuaW5pdGlhbFZhbHVlKTsKICAgICAgICAgICAgY2FzZSAwIC8qIFZBTFVFICovOgogICAgICAgICAgICAgICAgcmV0dXJuIGRlc2NyaXB0b3IucGFyc2UoY29udGV4dCwgcGFyc2VyLnBhcnNlQ29tcG9uZW50VmFsdWUoKSk7CiAgICAgICAgICAgIGNhc2UgMSAvKiBMSVNUICovOgogICAgICAgICAgICAgICAgcmV0dXJuIGRlc2NyaXB0b3IucGFyc2UoY29udGV4dCwgcGFyc2VyLnBhcnNlQ29tcG9uZW50VmFsdWVzKCkpOwogICAgICAgICAgICBjYXNlIDQgLyogVE9LRU5fVkFMVUUgKi86CiAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VyLnBhcnNlQ29tcG9uZW50VmFsdWUoKTsKICAgICAgICAgICAgY2FzZSAzIC8qIFRZUEVfVkFMVUUgKi86CiAgICAgICAgICAgICAgICBzd2l0Y2ggKGRlc2NyaXB0b3IuZm9ybWF0KSB7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAnYW5nbGUnOgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYW5nbGUucGFyc2UoY29udGV4dCwgcGFyc2VyLnBhcnNlQ29tcG9uZW50VmFsdWUoKSk7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAnY29sb3InOgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29sb3IkMS5wYXJzZShjb250ZXh0LCBwYXJzZXIucGFyc2VDb21wb25lbnRWYWx1ZSgpKTsKICAgICAgICAgICAgICAgICAgICBjYXNlICdpbWFnZSc6CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpbWFnZS5wYXJzZShjb250ZXh0LCBwYXJzZXIucGFyc2VDb21wb25lbnRWYWx1ZSgpKTsKICAgICAgICAgICAgICAgICAgICBjYXNlICdsZW5ndGgnOgogICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGVuZ3RoXzEgPSBwYXJzZXIucGFyc2VDb21wb25lbnRWYWx1ZSgpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXNMZW5ndGgobGVuZ3RoXzEpID8gbGVuZ3RoXzEgOiBaRVJPX0xFTkdUSDsKICAgICAgICAgICAgICAgICAgICBjYXNlICdsZW5ndGgtcGVyY2VudGFnZSc6CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZV8xID0gcGFyc2VyLnBhcnNlQ29tcG9uZW50VmFsdWUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlzTGVuZ3RoUGVyY2VudGFnZSh2YWx1ZV8xKSA/IHZhbHVlXzEgOiBaRVJPX0xFTkdUSDsKICAgICAgICAgICAgICAgICAgICBjYXNlICd0aW1lJzoKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRpbWUucGFyc2UoY29udGV4dCwgcGFyc2VyLnBhcnNlQ29tcG9uZW50VmFsdWUoKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICB9OwoKICAgIHZhciBlbGVtZW50RGVidWdnZXJBdHRyaWJ1dGUgPSAnZGF0YS1odG1sMmNhbnZhcy1kZWJ1Zyc7CiAgICB2YXIgZ2V0RWxlbWVudERlYnVnVHlwZSA9IGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgdmFyIGF0dHJpYnV0ZSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKGVsZW1lbnREZWJ1Z2dlckF0dHJpYnV0ZSk7CiAgICAgICAgc3dpdGNoIChhdHRyaWJ1dGUpIHsKICAgICAgICAgICAgY2FzZSAnYWxsJzoKICAgICAgICAgICAgICAgIHJldHVybiAxIC8qIEFMTCAqLzsKICAgICAgICAgICAgY2FzZSAnY2xvbmUnOgogICAgICAgICAgICAgICAgcmV0dXJuIDIgLyogQ0xPTkUgKi87CiAgICAgICAgICAgIGNhc2UgJ3BhcnNlJzoKICAgICAgICAgICAgICAgIHJldHVybiAzIC8qIFBBUlNFICovOwogICAgICAgICAgICBjYXNlICdyZW5kZXInOgogICAgICAgICAgICAgICAgcmV0dXJuIDQgLyogUkVOREVSICovOwogICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgcmV0dXJuIDAgLyogTk9ORSAqLzsKICAgICAgICB9CiAgICB9OwogICAgdmFyIGlzRGVidWdnaW5nID0gZnVuY3Rpb24gKGVsZW1lbnQsIHR5cGUpIHsKICAgICAgICB2YXIgZWxlbWVudFR5cGUgPSBnZXRFbGVtZW50RGVidWdUeXBlKGVsZW1lbnQpOwogICAgICAgIHJldHVybiBlbGVtZW50VHlwZSA9PT0gMSAvKiBBTEwgKi8gfHwgdHlwZSA9PT0gZWxlbWVudFR5cGU7CiAgICB9OwoKICAgIHZhciBFbGVtZW50Q29udGFpbmVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewogICAgICAgIGZ1bmN0aW9uIEVsZW1lbnRDb250YWluZXIoY29udGV4dCwgZWxlbWVudCkgewogICAgICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0OwogICAgICAgICAgICB0aGlzLnRleHROb2RlcyA9IFtdOwogICAgICAgICAgICB0aGlzLmVsZW1lbnRzID0gW107CiAgICAgICAgICAgIHRoaXMuZmxhZ3MgPSAwOwogICAgICAgICAgICBpZiAoaXNEZWJ1Z2dpbmcoZWxlbWVudCwgMyAvKiBQQVJTRSAqLykpIHsKICAgICAgICAgICAgICAgIGRlYnVnZ2VyOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMuc3R5bGVzID0gbmV3IENTU1BhcnNlZERlY2xhcmF0aW9uKGNvbnRleHQsIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQsIG51bGwpKTsKICAgICAgICAgICAgaWYgKGlzSFRNTEVsZW1lbnROb2RlKGVsZW1lbnQpKSB7CiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdHlsZXMuYW5pbWF0aW9uRHVyYXRpb24uc29tZShmdW5jdGlvbiAoZHVyYXRpb24pIHsgcmV0dXJuIGR1cmF0aW9uID4gMDsgfSkpIHsKICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLmFuaW1hdGlvbkR1cmF0aW9uID0gJzBzJzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICh0aGlzLnN0eWxlcy50cmFuc2Zvcm0gIT09IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICAvLyBnZXRCb3VuZGluZ0NsaWVudFJlY3QgdGFrZXMgdHJhbnNmb3JtcyBpbnRvIGFjY291bnQKICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLnRyYW5zZm9ybSA9ICdub25lJzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLmJvdW5kcyA9IHBhcnNlQm91bmRzKHRoaXMuY29udGV4dCwgZWxlbWVudCk7CiAgICAgICAgICAgIGlmIChpc0RlYnVnZ2luZyhlbGVtZW50LCA0IC8qIFJFTkRFUiAqLykpIHsKICAgICAgICAgICAgICAgIHRoaXMuZmxhZ3MgfD0gMTYgLyogREVCVUdfUkVOREVSICovOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBFbGVtZW50Q29udGFpbmVyOwogICAgfSgpKTsKCiAgICAvKgogICAgICogdGV4dC1zZWdtZW50YXRpb24gMS4wLjMgPGh0dHBzOi8vZ2l0aHViLmNvbS9uaWtsYXN2aC90ZXh0LXNlZ21lbnRhdGlvbj4KICAgICAqIENvcHlyaWdodCAoYykgMjAyMiBOaWtsYXMgdm9uIEhlcnR6ZW4gPGh0dHBzOi8vaGVydHplbi5jb20+CiAgICAgKiBSZWxlYXNlZCB1bmRlciBNSVQgTGljZW5zZQogICAgICovCiAgICB2YXIgYmFzZTY0ID0gJ0FBQUFBQUFBQUFBQUVBNEFHQmtBQUZBYUFBQUNBQUFBQUFBSUFCQUFHQUF3QURnQUNBQVFBQWdBRUFBSUFCQUFDQUFRQUFnQUVBQUlBQkFBQ0FBUUFBZ0FFQUFJQUJBQVFBQklBRVFBVEFBSUFCQUFDQUFRQUFnQUVBQUlBQkFBVkFCY0FBZ0FFQUFJQUJBQUNBQVFBR0FBYUFCd0FIZ0FnQUNJQUk0QWxnQUlBQkFBbXdDakFLZ0FzQUMyQUw0QXZRREZBTW9BMGdCUEFWWUJXZ0VJQUFnQUNBQ01BTm9BWWdGa0FXd0JkQUY4QVgwQmhRR05BWlVCbGdHZUFhTUJsUUdXQWFzQnN3RjhBYnNCd3dGMEFjc0JZd0hUQVFnQTJ3Ry9BT01CZEFGOEFla0I4UUYwQWZrQit3SGlBSFFCZkFFSUFBTUM1Z1FJQUFzQ0VnSUlBQWdBRmdJZUFnZ0FJZ0lwQWdnQU1RSTVBa0FDeWdFSUFBZ0FTQUpRQWxnQ1lBSUlBQWdBQ0FBS0JRb0ZDZ1VUQlJNRkdRVXJCU3NGQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FCZEFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUJvQW1nQ3J3R3ZBUWdBYmdKMkFnZ0FIZ0VJQUFnQUNBRG5BWHNDQ0FBSUFBZ0Fnd0lJQUFnQUNBQUlBQWdBQ0FDS0FnZ0FrUUtaQWdnQVBBREpBQWdBb1FLa0Fxd0NzZ0s2QXNJQ0NBREpBZ2dBMEFJSUFBZ0FDQUFJQU5ZQzNnSUlBQWdBQ0FBSUFBZ0FDQUJBQU9ZQ0NBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFrQVNvQitRSUVBQWdBQ0FBOEFFTUNDQUJDQlFnQUNBQkpCVkFGQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FCVEJWb0ZDQUFJQUZvRkNBQmZCV1VGQ0FBSUFBZ0FDQUFJQUFnQWJRVUlBQWdBQ0FBSUFBZ0FDQUJ6QlhzRmZRV0ZCWW9GaWdXS0JaRUZpZ1dLQllvRm1BV2ZCYVlGcmdXeEJia0ZDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQU1FRkNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFNZ0ZDQURRQlFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBTzRDQ0FBSUFBZ0FpUUFJQUFnQUNBQkFBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBRDBBZ2dBQ0FEOEFnZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBTllGQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQU1EdndBSUFBZ0FKQUlJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDd01UQXdnQUNBQjlCT3NFR3dNakF3Z0FLd015QXdzRllnRTNBL01FUHdNSUFFVURUUU5SQXdnQVdRT3NBR0VEQ0FBSUFBZ0FDQUFJQUFnQUNBQnBBelFGTlFVMkJUY0ZPQVU1QlRvRk5BVTFCVFlGTndVNEJUa0ZPZ1UwQlRVRk5nVTNCVGdGT1FVNkJUUUZOUVUyQlRjRk9BVTVCVG9GTkFVMUJUWUZOd1U0QlRrRk9nVTBCVFVGTmdVM0JUZ0ZPUVU2QlRRRk5RVTJCVGNGT0FVNUJUb0ZOQVUxQlRZRk53VTRCVGtGT2dVMEJUVUZOZ1UzQlRnRk9RVTZCVFFGTlFVMkJUY0ZPQVU1QlRvRk5BVTFCVFlGTndVNEJUa0ZPZ1UwQlRVRk5nVTNCVGdGT1FVNkJUUUZOUVUyQlRjRk9BVTVCVG9GTkFVMUJUWUZOd1U0QlRrRk9nVTBCVFVGTmdVM0JUZ0ZPUVU2QlRRRk5RVTJCVGNGT0FVNUJUb0ZOQVUxQlRZRk53VTRCVGtGT2dVMEJUVUZOZ1UzQlRnRk9RVTZCVFFGTlFVMkJUY0ZPQVU1QlRvRk5BVTFCVFlGTndVNEJUa0ZPZ1UwQlRVRk5nVTNCVGdGT1FVNkJUUUZOUVUyQlRjRk9BVTVCVG9GTkFVMUJUWUZOd1U0QlRrRk9nVTBCVFVGTmdVM0JUZ0ZPUVU2QlRRRk5RVTJCVGNGT0FVNUJUb0ZOQVUxQlRZRk53VTRCVGtGT2dVMEJUVUZOZ1UzQlRnRk9RVTZCVFFGTlFVMkJUY0ZPQVU1QlRvRk5BVTFCVFlGTndVNEJUa0ZPZ1UwQlRVRk5nVTNCVGdGT1FVNkJUUUZOUVUyQlRjRk9BVTVCVG9GTkFVMUJUWUZOd1U0QlRrRk9nVTBCVFVGTmdVM0JUZ0ZPUVU2QlRRRk5RVTJCVGNGT0FVNUJUb0ZOQVUxQlRZRk53VTRCVGtGT2dVMEJUVUZOZ1UzQlRnRk9RVTZCVFFGTlFVMkJUY0ZPQVU1QlRvRk5BVTFCVFlGTndVNEJUa0ZPZ1UwQlRVRk5nVTNCVGdGT1FVNkJUUUZOUVUyQlRjRk9BVTVCVG9GTkFVMUJUWUZOd1U0QlRrRk9nVTBCVFVGTmdVM0JUZ0ZPUVU2QlRRRk5RVTJCVGNGT0FVNUJUb0ZOQVUxQlRZRk53VTRCVGtGT2dVMEJUVUZOZ1UzQlRnRk9RVTZCVFFGTlFVMkJUY0ZPQVU1QlRvRk5BVTFCVFlGTndVNEJUa0ZPZ1UwQlRVRk5nVTNCVGdGT1FVNkJUUUZOUVUyQlRjRk9BVTVCVG9GTkFVMUJUWUZOd1U0QlRrRklRVW9CU3dGQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FCdEF3Z0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQk1BRXdBQ0FBSUFBZ0FDQUFJQUJnQUNBQUlBQWdBQ0FDL0FBZ0FDQUF5QVFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FDQUFJQUF3QUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFBQVJBQklBQWdBQ0FBSUFCUUFTQUFJQUFnQUlBQndBRUFBamdDSUFCc0FxQUMyQUwwQWlnRFFBdHdDK0lKSVFxVkFaVUJXUXFWQVpVQmxRR1ZBWlVCbFFHckM1VUJsUUdWQVpVQmxRR1ZBWlVCbFFHVkFYc0tsUUdWQWJBSzZ3c3JER1VNcFF6bERKVUJsUUdWQVpVQmxRR1ZBWlVCbFFHVkFaVUJsUUdWQVpVQmxRR1ZBWlVCbFFHVkFaVUJsUUdWQVpVQmxRR1ZBWlVCbFFHVkFaVUJsUUdWQVpVQmxRR1ZBWlVCbFFHVkFaVUJsUUdWQVpVQmxRR1ZBWlVCbFFHVkFaVUJsUUdWQVpVQmxRR1ZBWlVCbFFHVkFaVUJsUUdWQVpVQmxRR1ZBWlVCbFFHVkFaVUJsUUdWQVpVQmxRR1ZBWlVCbFFHVkFaVUJsUUdWQVpVQmxRR1ZBWlVCbFFHVkFaVUJsUUdWQVpVQmxRR1ZBWlVCbFFHVkFaVUJsUUdWQVpVQmxRR1ZBWlVCbFFHVkFaVUJsUUdWQVpVQmxRR1ZBWlVCbFFHVkFaVUJsUUdWQVpVQmxRR1ZBWlVCbFFHVkFaVUJsUUdWQVpVQmxRR1ZBWlVCbFFHVkFaVUJsUUdWQVpVQmxRR1ZBWlVCbFFHVkFaVUJsUUdWQVpVQmxRR1ZBWlVCbFFHVkFaVUJsUUdWQVpVQmxRR1ZBWlVCbFFHVkFaVUJsUUdWQVpVQmxRR1ZBWlVCbFFHVkFaVUJsUUdWQVpVQmxRR1ZBWlVCbFFHVkFaVUJsUUdWQVpVQmxRR1ZBWlVCbFFHVkFaVUJsUUdWQVpVQmxRR1ZBWlVCbFFHVkFaVUJsUUdWQVpVQmxRR1ZBWlVCbFFHVkFaVUJsUUdWQVpVQmxRR1ZBWlVCbFFHVkFaVUJsUUdWQVpVQmxRR1ZBWlVCbFFHVkFaVUJsUUdWQVpVQmxRR1ZBWlVCbFFHVkFaVUJsUUdWQVpVQmxRR1ZBWlVCbFFHVkFaVUJsUUdWQVpVQmxRR1ZBWlVCbFFHVkFaVUJsUUdWQVpVQmxRR1ZBWlVCbFFHVkFaVUJsUUdWQVpVQmxRR1ZBWlVCbFFHVkFaVUJsUUdWQVpVQmxRR1ZBWlVCbFFHVkFaVUJsUUdWQVpVQmxRR1ZBWlVCbFFHVkFaVUJsUUdWQVpVQmxRR1ZBWlVCbFFHVkFaVUJsUUdWQVpVQmxRR1ZBWlVCbFFHVkFaVUJsUUdWQVpVQmxRR1ZBWlVCbFFHVkFaVUJsUUdWQVpVQmxRR1ZBWlVCbFFHVkFaVUJsUUdWQVpVQmxRR1ZBWlVCbFFHVkFaVUJsUUdWQVpVQmxRR1ZBWlVCbFFHVkFaVUJsUUdWQVpVQmxRR1ZBWlVCbFFHVkFaVUJsUUdWQVpVQmxRR1ZBWlVCbFFHVkFaVUJsUUdWQVpVQmxRR1ZBWlVCbFFHVkFaVUJsUUdWQVpVQmxRR1ZBWlVCbFFHVkFaVUJsUUdWQVpVQmxRR1ZBWlVCbFFHVkFaVUJsUUdWQVpVQmxRR1ZBZkFLQUF1WkE2NEF0d0NKQUxvQzZBRHdBQWdBdUFDZ0Evb0VwZ082QXFzRCtBQUlBQWdBc3dNSUFBZ0FDQUFJQUlrQXV3UDVBZnNCd3dQTEF3Z0FDQUFJQUFnQUNBRFJBOWtEQ0FBSUFPRUQ2UU1JQUFnQUNBQUlBQWdBQ0FEdUEvWURDQUFJQVA0RHlRQUlBQWdBQmdRSUFBZ0FYUUFPQkFnQUNBQUlBQWdBQ0FBSUFCTUVDQUFJQUFnQUNBQUlBQWdBQ0FEOEFBUUJDQUFJQUFnQUdnUWlCQ29FQ0FFeEJBZ0FFQUVJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQTRCQWdBQ0FCQUJFWUVDQUFJQUFnQVRBUVlBUWdBVkFRSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFGb0VDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBT1FFSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FCK0JBY0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFFQUJoZ1NNQkFnQUNBQUlBQWdBbEFRSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBd0FFQUFRQUJBQURBQU1BQXdBREFBUUFCQUFFQUFRQUJBQUVBQVFBQkhBVEFBTUFBd0FEQUFNQUF3QURBQU1BQXdBREFBTUFBd0FEQUFNQUF3QURBQU1BQXdBREFBTUFBd0FEQUFNQUF3QURBQU1BQXdBREFBTUFBd0FEQUFNQUF3QURBQU1BQXdBREFBTUFBd0FEQUFNQUF3QURBQU1BQXdBREFBTUFBd0FEQUFNQUF3QURBQU1BQXdBREFBTUFBd0FEQUFNQUF3QURBQU1BQXdBREFBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQWRRTUlBQWdBQ0FBSUFBZ0FDQUFJQU1rQUNBQUlBQWdBZlFNSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FDRkE0a0RDQUFJQUFnQUNBQUlBT2NCQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBSWNEQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFKRURDQUFJQUFnQUNBREZBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUJnQkFnQVpnUUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FiQVFDQlhJRUNBQUlBSGtFQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQkFBSndFUUFDakJLb0VzZ1FJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FDNkJNSUVDQUFJQUFnQUNBQUlBQWdBQ0FCbUJBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQXh3UUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFHWUVDQUFJQUFnQXpnUUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQWlnV0tCWW9GaWdXS0JZb0ZpZ1dLQmQwRlh3VUlBT0lGNmdYeEJZb0YzZ1Q1QlFBR0NBYUtCWW9GaWdXS0JZb0ZpZ1dLQllvRmlnV0tCWW9GaWdYV0JJb0ZpZ1dLQllvRmlnV0tCWW9GaWdXS0JZc0ZFQWFLQllvRmlnV0tCWW9GaWdXS0JSUUdDQUNLQllvRmlnV0tCUWdBQ0FBSUFORUVDQUFJQUJnR2lnVWdCZ2dBSmdZSUFDNEdNd2FLQllvRjB3UTNCajRHaWdXS0JZb0ZpZ1dLQllvRmlnV0tCWW9GaWdXS0JZb0ZpZ1VJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FpZ1dLQllvRmlnV0tCWW9GaWdXS0JZb0ZpZ1dLQllvRmlnV0tCWW9GaWdXS0JZb0ZpZ1dLQllvRmlnV0tCWW9GaWdXS0JZb0ZpZ1dLQllvRmlnV0xCZi8vLy8vLy93UUFCQUFFQUFRQUJBQUVBQVFBQkFBRUFBUUFBd0FFQUFRQUFnQUVBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFCQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQUVBQVFBQkFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT0FBQUFBQUFBQUFRQURnQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQVVBQlFBRkFBVUFCUUFGQUFVQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUFBQVVBQUFBRkFBVUFBQUFGQUFVQUFBQUZBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQkFBRUFBUUFCQUFFQUFRQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBQUFBUUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUJRQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFVQUJRQUZBQVVBQlFBRkFBVUFBUUFBQUFVQUJRQUZBQVVBQlFBRkFBQUFBQUFGQUFVQUFBQUZBQVVBQlFBRkFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFFQUFBQUZBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUZBQUFBQUFBRkFBVUFBUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJ3QUZBQVVBQlFBRkFBQUFCd0FIQUFjQUFBQUhBQWNBQndBRkFBRUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBVUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBSEFBY0FCd0FGQUFVQUJRQUZBQWNBQndBRkFBVUFBQUFBQUFFQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBUUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFIQUFBQUFRQUJBQUFBQUFBQUFBQUFBQUFGQUFVQUJRQUZBQUFBQndBRkFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQlFBSEFBY0FCd0FIQUFjQUFBQUhBQWNBQUFBQUFBVUFCUUFIQUFVQUFRQUhBQUVBQndBRkFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUJRQUZBQVVBQlFBRkFBVUFCd0FCQUFVQUJRQUZBQVVBQUFBQUFBQUFBQUFBQUFFQUFRQUJBQUVBQVFBQkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJ3QUZBQVVBQUFBQUFBQUFBQUFBQUFBQUJRQUZBQVVBQlFBRkFBVUFBUUFGQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFVQUJRQUZBQVFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBUUFCUUFOQUFRQUJBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFRQUJBQUVBQVFBQkFBRUFBUUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQU9BQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQkFBRUFBUUFCQUFFQUFRQUJBQUVBQVFBQkFBRUFBUUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBRUFBUUFCQUFFQUFRQUJBQUVBQVFBQkFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQlFBSEFBVUFCUUFGQUFBQUFBQUFBQWNBQlFBRkFBVUFCUUFGQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCQUFFQUFRQUJBQUVBQVFBQkFBRUFBUUFCQUFFQUFRQUJBQUVBQVFBQkFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFVQUJRQUZBQVVBQUFBRkFBVUFCUUFGQUFVQUFBQUZBQVVBQlFBQUFBVUFCUUFGQUFVQUJRQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUZBQVVBQlFBQUFBQUFBQUFBQUFVQUJRQUZBQWNBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFCUUFIQUFVQUFBQUhBQWNBQndBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQndBSEFBY0FCd0FGQUFjQUJ3QUFBQVVBQlFBRkFBVUFCUUFGQUFVQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUZBQVVBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBVUFCd0FIQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUJRQUFBQVVBQndBSEFBVUFCUUFGQUFVQUFBQUFBQWNBQndBQUFBQUFCd0FIQUFVQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUJRQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQVVBQlFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQlFBQUFBQUFCUUFGQUFjQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUZBQUFBQndBSEFBY0FCUUFGQUFBQUFBQUFBQUFBQlFBRkFBQUFBQUFGQUFVQUJRQUFBQUFBQUFBRkFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBVUFCUUFBQUFBQUFBQUZBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQndBRkFBVUFCUUFGQUFVQUFBQUZBQVVBQndBQUFBY0FCd0FGQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUZBQVVBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFGQUFVQUJRQUZBQVVBQlFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBVUFBQUFGQUFVQUJ3QUZBQVVBQlFBRkFBQUFBQUFIQUFjQUFBQUFBQWNBQndBRkFBQUFBQUFBQUFBQUFBQUFBQUFBQlFBRkFBVUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFGQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUZBQWNBQndBQUFBQUFBQUFIQUFjQUJ3QUFBQWNBQndBSEFBVUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFCUUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFCUUFIQUFjQUJ3QUZBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQVVBQndBSEFBY0FCd0FBQUFVQUJRQUZBQUFBQlFBRkFBVUFCUUFBQUFBQUFBQUFBQUFBQUFBQUFBVUFCUUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUJRQUFBQWNBQlFBSEFBY0FCUUFIQUFjQUFBQUZBQWNBQndBQUFBY0FCd0FGQUFVQUFBQUFBQUFBQUFBQUFBQUFBQUFGQUFVQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUJRQUZBQWNBQndBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFVQUJRQUFBQVVBQndBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBVUFBQUFBQUFBQUFBQUZBQWNBQndBRkFBVUFCUUFBQUFVQUFBQUhBQWNBQndBSEFBY0FCd0FIQUFVQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFVQUFBQUhBQVVBQlFBRkFBVUFCUUFGQUFVQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFGQUFBQUJ3QUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQlFBRkFBVUFCUUFGQUFVQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFVQUJRQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFCUUFBQUFVQUFBQUZBQUFBQUFBQUFBQUFCd0FIQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQndBRkFBVUFCUUFGQUFVQUFBQUZBQVVBQUFBQUFBQUFBQUFBQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUFBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBVUFCUUFGQUFVQUJ3QUZBQVVBQlFBRkFBVUFCUUFBQUFVQUJRQUhBQWNBQlFBRkFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUhBQWNBQlFBRkFBQUFBQUFBQUFBQUJRQUZBQVVBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUZBQVVBQlFBRkFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUJRQUFBQWNBQlFBRkFBQUFBQUFBQUFBQUFBQUFBQVVBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUJRQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQlFBRkFBVUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQVVBQlFBSEFBVUFCUUFGQUFVQUJRQUZBQVVBQndBSEFBY0FCd0FIQUFjQUJ3QUhBQVVBQndBSEFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFGQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQlFBRkFBVUFCd0FIQUFjQUJ3QUZBQVVBQndBSEFBY0FBQUFBQUFBQUFBQUhBQWNBQlFBSEFBY0FCd0FIQUFjQUJ3QUZBQVVBQlFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUJRQUZBQWNBQndBRkFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFjQUJRQUhBQVVBQlFBRkFBVUFCUUFGQUFVQUFBQUZBQUFBQlFBQUFBQUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBY0FCd0FIQUFjQUJ3QUhBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQUFBQUFBVUFCUUFGQUFVQUJRQUhBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQVVBQlFBRkFBVUFCUUFGQUFVQUJ3QUZBQWNBQndBSEFBY0FCd0FGQUFjQUJ3QUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFGQUFVQUJ3QUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBSEFBVUFCUUFGQUFVQUJ3QUhBQVVBQlFBSEFBVUFCUUFGQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUZBQWNBQlFBRkFBY0FCd0FIQUFVQUJ3QUZBQVVBQlFBSEFBY0FBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUJ3QUhBQWNBQndBSEFBY0FCd0FIQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFIQUFjQUJRQUZBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUJRQUZBQVVBQUFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFjQUJRQUZBQVVBQlFBRkFBVUFCUUFBQUFBQUFBQUFBQVVBQUFBQUFBQUFBQUFBQUFBQUJRQUFBQUFBQndBRkFBVUFBQUFBQUFBQUFBQUFBQUFBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQUFBQlFBRkFBVUFCUUFGQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBVUFCUUFGQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFCUUFGQUFVQUJRQUZBQVVBRGdBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFPQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFVQUJRQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFVQUJRQUZBQVVBQUFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBQUFBQUFBQUFBQUJRQUFBQUFBQUFBRkFBQUFBQUFBQUFBQUJRQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFCd0FIQUFVQUJRQUhBQUFBQUFBQUFBQUFCUUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFjQUJ3QUhBQWNBQlFBRkFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFVQUFBQUFBQUFBQUFBQUFBQUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUhBQWNBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBRkFBY0FCd0FGQUFVQUJRQUZBQWNBQndBRkFBVUFCd0FIQUFBQUFBQUFBQUFBQUFBRkFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBVUFCUUFGQUFVQUJRQUZBQWNBQndBRkFBVUFCd0FIQUFVQUJRQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBRkFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBRkFBY0FBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUJRQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQVVBQUFBRkFBVUFCUUFBQUFBQUJRQUZBQUFBQUFBQUFBQUFBQUFGQUFVQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQWNBQlFBRkFBY0FCd0FBQUFBQUFBQUFBQUFBQndBRkFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFjQUJ3QUZBQWNBQndBRkFBY0FCd0FBQUFjQUJRQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFCUUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUZBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFVQUJRQUZBQVVBQlFBQUFBQUFBQUFBQUFBQUFBQUZBQVVBQlFBQUFBVUFCUUFBQUFBQUFBQUFBQUFBQlFBRkFBVUFCUUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBRkFBVUFCUUFBQUFBQUFBQUFBQVVBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBVUFCUUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFjQUJRQUhBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFGQUFVQUJRQUZBQVVBQndBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFGQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUJ3QUhBQWNBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQndBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFIQUFjQUJ3QUZBQVVBQlFBSEFBY0FCUUFIQUFVQUJRQUFBQUFBQUFBQUFBQUFBQUFGQUFBQUJ3QUhBQWNBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBVUFCd0FIQUFjQUJ3QUFBQUFBQndBSEFBQUFBQUFIQUFjQUJ3QUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUZBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQndBSEFBQUFBQUFGQUFVQUJRQUZBQVVBQlFBRkFBQUFBQUFBQUFVQUJRQUZBQVVBQlFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUhBQWNBQndBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQndBSEFBVUFCUUFGQUFjQUJRQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFCUUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFCUUFIQUFjQUJRQUZBQVVBQlFBRkFBVUFCd0FGQUFjQUJ3QUZBQWNBQlFBRkFBY0FCUUFGQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQlFBSEFBY0FCUUFGQUFVQUJRQUFBQUFBQndBSEFBY0FCd0FGQUFVQUJ3QUZBQVVBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQlFBRkFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBY0FCd0FIQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFIQUFjQUJRQUhBQVVBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBVUFCd0FGQUFjQUJ3QUZBQVVBQlFBRkFBVUFCUUFIQUFVQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFjQUJ3QUZBQVVBQlFBRkFBY0FCUUFGQUFVQUJRQUZBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBSEFBY0FCd0FGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFIQUFVQUJRQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUhBQWNBQndBRkFBVUFCUUFGQUFBQUFBQUZBQVVBQndBSEFBY0FCd0FGQUFBQUFBQUFBQWNBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQVVBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQlFBRkFBVUFCUUFGQUFVQUJ3QUhBQVVBQlFBRkFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQWNBQlFBRkFBVUFCUUFGQUFVQUJRQUFBQVVBQlFBRkFBVUFCUUFGQUFjQUJRQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFBQUFIQUFVQUJRQUZBQVVBQlFBRkFBVUFCd0FGQUFVQUJ3QUZBQVVBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQlFBRkFBVUFCUUFGQUFVQUFBQUFBQUFBQlFBQUFBVUFCUUFBQUFVQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUhBQWNBQndBSEFBY0FBQUFGQUFVQUFBQUhBQWNBQlFBSEFBVUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFGQUFVQUJ3QUhBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUZBQVVBQlFBRkFBVUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFGQUFVQUJRQUZBQVVBQlFBRkFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQlFBQUFBY0FCd0FIQUFjQUJ3QUhBQWNBQndBSEFBY0FCd0FIQUFjQUJ3QUhBQUFBQUFBQUFBQUFBQUFBQUFBQUJRQUZBQVVBQlFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFVQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQWNBQndBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFVQUJRQUFBQVVBQlFBRkFBQUFBQUFGQUFVQUJRQUZBQVVBQlFBRkFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUJRQUZBQVVBQlFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFCUUFGQUFVQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBQUFBQUFBQUFBQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBRkFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFCUUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQVVBQlFBRkFBVUFCUUFBQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQlFBRkFBVUFCUUFGQUFVQUJRQUFBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUZBQVVBQlFBRkFBVUFCUUFGQUFVQUJRQUFBQUFBQlFBRkFBVUFCUUFGQUFVQUJRQUFBQVVBQlFBQUFBVUFCUUFGQUFVQUJRQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBRkFBVUFCUUFGQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFCUUFGQUFVQUJRQUZBQVVBQlFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFPQUE0QURnQU9BQTRBRGdBT0FBNEFEZ0FPQUE0QURnQU9BQTRBRGdBT0FBNEFEZ0FPQUE0QURnQU9BQTRBRGdBT0FBNEFEZ0FGQUFVQUJRQUZBQVVBRGdBT0FBNEFEZ0FPQUE0QUR3QVBBQThBRHdBUEFBOEFEd0FQQUE4QUR3QVBBQThBRHdBUEFBOEFEd0FQQUE4QUR3QVBBQThBRHdBUEFBOEFEd0FQQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFjQUJ3QUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQndBSEFBY0FCd0FIQUFjQUJ3QUhBQWNBQndBSEFBY0FCd0FBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQndBSEFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQndBSEFBY0FCd0FIQUFjQUJ3QUhBQWNBQndBSEFBY0FCd0FIQUFjQUJ3QUhBQWNBQndBSEFBY0FCd0FIQUFjQUJ3QUhBQWNBQndBSEFBY0FCd0FIQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBZ0FDQUFJQUFnQUNBQUlBQWdBQ0FBSUFBQUFBQUFBQUFrQUNRQUpBQWtBQ1FBSkFBa0FDUUFKQUFrQUNRQUpBQWtBQ1FBSkFBa0FDUUFKQUFrQUNRQUpBQWtBQ1FBSkFBa0FDUUFKQUFrQUNRQUpBQWtBQ1FBS0FBb0FDZ0FLQUFvQUNnQUtBQW9BQ2dBS0FBb0FDZ0FLQUFvQUNnQUtBQW9BQ2dBS0FBb0FDZ0FLQUFvQUNnQU1BQXdBREFBTUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFrQUNRQUpBQWtBQ1FBSkFBa0FDUUFKQUFrQUNRQUpBQWtBQ1FBSkFBa0FDUUFKQUFrQUFBQUFBQUFBQUFBS0FBb0FDZ0FLQUFvQUNnQUtBQW9BQ2dBS0FBb0FDZ0FLQUFvQUNnQUtBQW9BQ2dBS0FBb0FDZ0FLQUFvQUNnQUtBQW9BQ2dBS0FBb0FDZ0FLQUFvQUNnQUFBQUFBQUFBQUFBc0FEQUFNQUF3QURBQU1BQXdBREFBTUFBd0FEQUFNQUF3QURBQU1BQXdBREFBTUFBd0FEQUFNQUF3QURBQU1BQXdBREFBTUFBd0FDd0FNQUF3QURBQU1BQXdBREFBTUFBd0FEQUFNQUF3QURBQU1BQXdBREFBTUFBd0FEQUFNQUF3QURBQU1BQXdBREFBTUFBd0FEQUFBQUFBQURnQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBNEFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQU9BQTRBRGdBT0FBNEFEZ0FBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQURnQU9BQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQTRBRGdBQUFBQUFBQUFBQUFBQUFBQUFBQUFBRGdBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBRGdBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBRGdBT0FBNEFEZ0FPQUE0QURnQU9BQTRBRGdBT0FBQUFBQUFBQUFBQURnQU9BQTRBQUFBQUFBQUFBQUFBQUFBQUFBQU9BQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFEZ0FPQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQURnQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQU9BQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQURnQU9BQTRBRGdBQUFBNEFEZ0FPQUE0QURnQU9BQUFBRGdBT0FBNEFEZ0FPQUE0QURnQU9BQTRBRGdBT0FBNEFBQUFPQUE0QURnQU9BQTRBRGdBT0FBNEFEZ0FPQUE0QURnQU9BQTRBRGdBT0FBNEFEZ0FPQUE0QURnQU9BQTRBRGdBT0FBNEFEZ0FPQUE0QURnQU9BQTRBRGdBT0FBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFEZ0FPQUE0QURnQU9BQTRBRGdBT0FBNEFEZ0FPQUE0QURnQU9BQTRBRGdBT0FBNEFBQUFBQUE0QURnQU9BQTRBRGdBT0FBNEFEZ0FPQUE0QURnQUFBQTRBQUFBT0FBQUFBQUFBQUFBQUFBQUFBQTRBQUFBQUFBQUFBQUFBQUFBQURnQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQTRBRGdBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFEZ0FBQUFBQURnQUFBQUFBQUFBQUFBNEFBQUFPQUFBQUFBQUFBQUFBRGdBT0FBNEFBQUFPQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQU9BQTRBRGdBT0FBNEFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT0FBNEFEZ0FBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFPQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT0FBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQU9BQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT0FBNEFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUE0QURnQU9BQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBRGdBT0FBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFEZ0FBQUFBQUFBQUFBQTRBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQU9BQUFBRGdBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQU9BQTRBRGdBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQTRBRGdBT0FBNEFEZ0FPQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQTRBRGdBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQURnQUFBQUFBRGdBT0FBNEFEZ0FPQUE0QURnQU9BQTRBRGdBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQURnQU9BQTRBRGdBT0FBNEFEZ0FPQUE0QURnQU9BQTRBRGdBT0FBNEFEZ0FPQUE0QURnQUFBQTRBRGdBT0FBNEFEZ0FPQUE0QURnQU9BQTRBRGdBT0FBNEFEZ0FPQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQURnQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUE0QUFBQUFBQTRBRGdBT0FBNEFEZ0FPQUE0QURnQU9BQUFBRGdBT0FBNEFEZ0FBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFPQUE0QURnQU9BQTRBRGdBT0FBNEFEZ0FPQUE0QURnQU9BQTRBRGdBT0FBNEFEZ0FPQUE0QURnQU9BQTRBQUFBQUFBQUFBQUFBQUFBQURnQU9BQTRBRGdBT0FBNEFEZ0FPQUE0QURnQU9BQTRBRGdBT0FBNEFEZ0FPQUE0QURnQU9BQTRBRGdBT0FBNEFEZ0FPQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQTRBRGdBT0FBNEFEZ0FPQUE0QURnQU9BQTRBRGdBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFPQUE0QURnQU9BQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQURnQU9BQTRBRGdBT0FBNEFEZ0FPQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQURnQU9BQTRBRGdBT0FBNEFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBNEFEZ0FPQUE0QURnQU9BQTRBRGdBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT0FBNEFEZ0FPQUE0QURnQU9BQTRBRGdBT0FBNEFEZ0FPQUE0QURnQU9BQTRBRGdBT0FBNEFEZ0FPQUE0QURnQU9BQTRBRGdBT0FBNEFBQUFPQUE0QURnQU9BQTRBRGdBQUFBNEFEZ0FPQUE0QURnQU9BQTRBRGdBT0FBNEFEZ0FPQUE0QURnQU9BQTRBRGdBT0FBNEFEZ0FPQUE0QURnQU9BQTRBQUFBQUFBQUFBQUE9JzsKCiAgICAvKgogICAgICogdXRyaWUgMS4wLjIgPGh0dHBzOi8vZ2l0aHViLmNvbS9uaWtsYXN2aC91dHJpZT4KICAgICAqIENvcHlyaWdodCAoYykgMjAyMiBOaWtsYXMgdm9uIEhlcnR6ZW4gPGh0dHBzOi8vaGVydHplbi5jb20+CiAgICAgKiBSZWxlYXNlZCB1bmRlciBNSVQgTGljZW5zZQogICAgICovCiAgICB2YXIgY2hhcnMkMSA9ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvJzsKICAgIC8vIFVzZSBhIGxvb2t1cCB0YWJsZSB0byBmaW5kIHRoZSBpbmRleC4KICAgIHZhciBsb29rdXAkMSA9IHR5cGVvZiBVaW50OEFycmF5ID09PSAndW5kZWZpbmVkJyA/IFtdIDogbmV3IFVpbnQ4QXJyYXkoMjU2KTsKICAgIGZvciAodmFyIGkkMSA9IDA7IGkkMSA8IGNoYXJzJDEubGVuZ3RoOyBpJDErKykgewogICAgICAgIGxvb2t1cCQxW2NoYXJzJDEuY2hhckNvZGVBdChpJDEpXSA9IGkkMTsKICAgIH0KICAgIHZhciBkZWNvZGUgPSBmdW5jdGlvbiAoYmFzZTY0KSB7CiAgICAgICAgdmFyIGJ1ZmZlckxlbmd0aCA9IGJhc2U2NC5sZW5ndGggKiAwLjc1LCBsZW4gPSBiYXNlNjQubGVuZ3RoLCBpLCBwID0gMCwgZW5jb2RlZDEsIGVuY29kZWQyLCBlbmNvZGVkMywgZW5jb2RlZDQ7CiAgICAgICAgaWYgKGJhc2U2NFtiYXNlNjQubGVuZ3RoIC0gMV0gPT09ICc9JykgewogICAgICAgICAgICBidWZmZXJMZW5ndGgtLTsKICAgICAgICAgICAgaWYgKGJhc2U2NFtiYXNlNjQubGVuZ3RoIC0gMl0gPT09ICc9JykgewogICAgICAgICAgICAgICAgYnVmZmVyTGVuZ3RoLS07CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgdmFyIGJ1ZmZlciA9IHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcgJiYKICAgICAgICAgICAgdHlwZW9mIFVpbnQ4QXJyYXkgIT09ICd1bmRlZmluZWQnICYmCiAgICAgICAgICAgIHR5cGVvZiBVaW50OEFycmF5LnByb3RvdHlwZS5zbGljZSAhPT0gJ3VuZGVmaW5lZCcKICAgICAgICAgICAgPyBuZXcgQXJyYXlCdWZmZXIoYnVmZmVyTGVuZ3RoKQogICAgICAgICAgICA6IG5ldyBBcnJheShidWZmZXJMZW5ndGgpOwogICAgICAgIHZhciBieXRlcyA9IEFycmF5LmlzQXJyYXkoYnVmZmVyKSA/IGJ1ZmZlciA6IG5ldyBVaW50OEFycmF5KGJ1ZmZlcik7CiAgICAgICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSArPSA0KSB7CiAgICAgICAgICAgIGVuY29kZWQxID0gbG9va3VwJDFbYmFzZTY0LmNoYXJDb2RlQXQoaSldOwogICAgICAgICAgICBlbmNvZGVkMiA9IGxvb2t1cCQxW2Jhc2U2NC5jaGFyQ29kZUF0KGkgKyAxKV07CiAgICAgICAgICAgIGVuY29kZWQzID0gbG9va3VwJDFbYmFzZTY0LmNoYXJDb2RlQXQoaSArIDIpXTsKICAgICAgICAgICAgZW5jb2RlZDQgPSBsb29rdXAkMVtiYXNlNjQuY2hhckNvZGVBdChpICsgMyldOwogICAgICAgICAgICBieXRlc1twKytdID0gKGVuY29kZWQxIDw8IDIpIHwgKGVuY29kZWQyID4+IDQpOwogICAgICAgICAgICBieXRlc1twKytdID0gKChlbmNvZGVkMiAmIDE1KSA8PCA0KSB8IChlbmNvZGVkMyA+PiAyKTsKICAgICAgICAgICAgYnl0ZXNbcCsrXSA9ICgoZW5jb2RlZDMgJiAzKSA8PCA2KSB8IChlbmNvZGVkNCAmIDYzKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGJ1ZmZlcjsKICAgIH07CiAgICB2YXIgcG9seVVpbnQxNkFycmF5ID0gZnVuY3Rpb24gKGJ1ZmZlcikgewogICAgICAgIHZhciBsZW5ndGggPSBidWZmZXIubGVuZ3RoOwogICAgICAgIHZhciBieXRlcyA9IFtdOwogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDIpIHsKICAgICAgICAgICAgYnl0ZXMucHVzaCgoYnVmZmVyW2kgKyAxXSA8PCA4KSB8IGJ1ZmZlcltpXSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBieXRlczsKICAgIH07CiAgICB2YXIgcG9seVVpbnQzMkFycmF5ID0gZnVuY3Rpb24gKGJ1ZmZlcikgewogICAgICAgIHZhciBsZW5ndGggPSBidWZmZXIubGVuZ3RoOwogICAgICAgIHZhciBieXRlcyA9IFtdOwogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDQpIHsKICAgICAgICAgICAgYnl0ZXMucHVzaCgoYnVmZmVyW2kgKyAzXSA8PCAyNCkgfCAoYnVmZmVyW2kgKyAyXSA8PCAxNikgfCAoYnVmZmVyW2kgKyAxXSA8PCA4KSB8IGJ1ZmZlcltpXSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBieXRlczsKICAgIH07CgogICAgLyoqIFNoaWZ0IHNpemUgZm9yIGdldHRpbmcgdGhlIGluZGV4LTIgdGFibGUgb2Zmc2V0LiAqLwogICAgdmFyIFVUUklFMl9TSElGVF8yID0gNTsKICAgIC8qKiBTaGlmdCBzaXplIGZvciBnZXR0aW5nIHRoZSBpbmRleC0xIHRhYmxlIG9mZnNldC4gKi8KICAgIHZhciBVVFJJRTJfU0hJRlRfMSA9IDYgKyA1OwogICAgLyoqCiAgICAgKiBTaGlmdCBzaXplIGZvciBzaGlmdGluZyBsZWZ0IHRoZSBpbmRleCBhcnJheSB2YWx1ZXMuCiAgICAgKiBJbmNyZWFzZXMgcG9zc2libGUgZGF0YSBzaXplIHdpdGggMTYtYml0IGluZGV4IHZhbHVlcyBhdCB0aGUgY29zdAogICAgICogb2YgY29tcGFjdGFiaWxpdHkuCiAgICAgKiBUaGlzIHJlcXVpcmVzIGRhdGEgYmxvY2tzIHRvIGJlIGFsaWduZWQgYnkgVVRSSUUyX0RBVEFfR1JBTlVMQVJJVFkuCiAgICAgKi8KICAgIHZhciBVVFJJRTJfSU5ERVhfU0hJRlQgPSAyOwogICAgLyoqCiAgICAgKiBEaWZmZXJlbmNlIGJldHdlZW4gdGhlIHR3byBzaGlmdCBzaXplcywKICAgICAqIGZvciBnZXR0aW5nIGFuIGluZGV4LTEgb2Zmc2V0IGZyb20gYW4gaW5kZXgtMiBvZmZzZXQuIDY9MTEtNQogICAgICovCiAgICB2YXIgVVRSSUUyX1NISUZUXzFfMiA9IFVUUklFMl9TSElGVF8xIC0gVVRSSUUyX1NISUZUXzI7CiAgICAvKioKICAgICAqIFRoZSBwYXJ0IG9mIHRoZSBpbmRleC0yIHRhYmxlIGZvciBVK0Q4MDAuLlUrREJGRiBzdG9yZXMgdmFsdWVzIGZvcgogICAgICogbGVhZCBzdXJyb2dhdGUgY29kZSBfdW5pdHNfIG5vdCBjb2RlIF9wb2ludHNfLgogICAgICogVmFsdWVzIGZvciBsZWFkIHN1cnJvZ2F0ZSBjb2RlIF9wb2ludHNfIGFyZSBpbmRleGVkIHdpdGggdGhpcyBwb3J0aW9uIG9mIHRoZSB0YWJsZS4KICAgICAqIExlbmd0aD0zMj0weDIwPTB4NDAwPj5VVFJJRTJfU0hJRlRfMi4gKFRoZXJlIGFyZSAxMDI0PTB4NDAwIGxlYWQgc3Vycm9nYXRlcy4pCiAgICAgKi8KICAgIHZhciBVVFJJRTJfTFNDUF9JTkRFWF8yX09GRlNFVCA9IDB4MTAwMDAgPj4gVVRSSUUyX1NISUZUXzI7CiAgICAvKiogTnVtYmVyIG9mIGVudHJpZXMgaW4gYSBkYXRhIGJsb2NrLiAzMj0weDIwICovCiAgICB2YXIgVVRSSUUyX0RBVEFfQkxPQ0tfTEVOR1RIID0gMSA8PCBVVFJJRTJfU0hJRlRfMjsKICAgIC8qKiBNYXNrIGZvciBnZXR0aW5nIHRoZSBsb3dlciBiaXRzIGZvciB0aGUgaW4tZGF0YS1ibG9jayBvZmZzZXQuICovCiAgICB2YXIgVVRSSUUyX0RBVEFfTUFTSyA9IFVUUklFMl9EQVRBX0JMT0NLX0xFTkdUSCAtIDE7CiAgICB2YXIgVVRSSUUyX0xTQ1BfSU5ERVhfMl9MRU5HVEggPSAweDQwMCA+PiBVVFJJRTJfU0hJRlRfMjsKICAgIC8qKiBDb3VudCB0aGUgbGVuZ3RocyBvZiBib3RoIEJNUCBwaWVjZXMuIDIwODA9MHg4MjAgKi8KICAgIHZhciBVVFJJRTJfSU5ERVhfMl9CTVBfTEVOR1RIID0gVVRSSUUyX0xTQ1BfSU5ERVhfMl9PRkZTRVQgKyBVVFJJRTJfTFNDUF9JTkRFWF8yX0xFTkdUSDsKICAgIC8qKgogICAgICogVGhlIDItYnl0ZSBVVEYtOCB2ZXJzaW9uIG9mIHRoZSBpbmRleC0yIHRhYmxlIGZvbGxvd3MgYXQgb2Zmc2V0IDIwODA9MHg4MjAuCiAgICAgKiBMZW5ndGggMzI9MHgyMCBmb3IgbGVhZCBieXRlcyBDMC4uREYsIHJlZ2FyZGxlc3Mgb2YgVVRSSUUyX1NISUZUXzIuCiAgICAgKi8KICAgIHZhciBVVFJJRTJfVVRGOF8yQl9JTkRFWF8yX09GRlNFVCA9IFVUUklFMl9JTkRFWF8yX0JNUF9MRU5HVEg7CiAgICB2YXIgVVRSSUUyX1VURjhfMkJfSU5ERVhfMl9MRU5HVEggPSAweDgwMCA+PiA2OyAvKiBVKzA4MDAgaXMgdGhlIGZpcnN0IGNvZGUgcG9pbnQgYWZ0ZXIgMi1ieXRlIFVURi04ICovCiAgICAvKioKICAgICAqIFRoZSBpbmRleC0xIHRhYmxlLCBvbmx5IHVzZWQgZm9yIHN1cHBsZW1lbnRhcnkgY29kZSBwb2ludHMsIGF0IG9mZnNldCAyMTEyPTB4ODQwLgogICAgICogVmFyaWFibGUgbGVuZ3RoLCBmb3IgY29kZSBwb2ludHMgdXAgdG8gaGlnaFN0YXJ0LCB3aGVyZSB0aGUgbGFzdCBzaW5nbGUtdmFsdWUgcmFuZ2Ugc3RhcnRzLgogICAgICogTWF4aW11bSBsZW5ndGggNTEyPTB4MjAwPTB4MTAwMDAwPj5VVFJJRTJfU0hJRlRfMS4KICAgICAqIChGb3IgMHgxMDAwMDAgc3VwcGxlbWVudGFyeSBjb2RlIHBvaW50cyBVKzEwMDAwLi5VKzEwZmZmZi4pCiAgICAgKgogICAgICogVGhlIHBhcnQgb2YgdGhlIGluZGV4LTIgdGFibGUgZm9yIHN1cHBsZW1lbnRhcnkgY29kZSBwb2ludHMgc3RhcnRzCiAgICAgKiBhZnRlciB0aGlzIGluZGV4LTEgdGFibGUuCiAgICAgKgogICAgICogQm90aCB0aGUgaW5kZXgtMSB0YWJsZSBhbmQgdGhlIGZvbGxvd2luZyBwYXJ0IG9mIHRoZSBpbmRleC0yIHRhYmxlCiAgICAgKiBhcmUgb21pdHRlZCBjb21wbGV0ZWx5IGlmIHRoZXJlIGlzIG9ubHkgQk1QIGRhdGEuCiAgICAgKi8KICAgIHZhciBVVFJJRTJfSU5ERVhfMV9PRkZTRVQgPSBVVFJJRTJfVVRGOF8yQl9JTkRFWF8yX09GRlNFVCArIFVUUklFMl9VVEY4XzJCX0lOREVYXzJfTEVOR1RIOwogICAgLyoqCiAgICAgKiBOdW1iZXIgb2YgaW5kZXgtMSBlbnRyaWVzIGZvciB0aGUgQk1QLiAzMj0weDIwCiAgICAgKiBUaGlzIHBhcnQgb2YgdGhlIGluZGV4LTEgdGFibGUgaXMgb21pdHRlZCBmcm9tIHRoZSBzZXJpYWxpemVkIGZvcm0uCiAgICAgKi8KICAgIHZhciBVVFJJRTJfT01JVFRFRF9CTVBfSU5ERVhfMV9MRU5HVEggPSAweDEwMDAwID4+IFVUUklFMl9TSElGVF8xOwogICAgLyoqIE51bWJlciBvZiBlbnRyaWVzIGluIGFuIGluZGV4LTIgYmxvY2suIDY0PTB4NDAgKi8KICAgIHZhciBVVFJJRTJfSU5ERVhfMl9CTE9DS19MRU5HVEggPSAxIDw8IFVUUklFMl9TSElGVF8xXzI7CiAgICAvKiogTWFzayBmb3IgZ2V0dGluZyB0aGUgbG93ZXIgYml0cyBmb3IgdGhlIGluLWluZGV4LTItYmxvY2sgb2Zmc2V0LiAqLwogICAgdmFyIFVUUklFMl9JTkRFWF8yX01BU0sgPSBVVFJJRTJfSU5ERVhfMl9CTE9DS19MRU5HVEggLSAxOwogICAgdmFyIHNsaWNlMTYgPSBmdW5jdGlvbiAodmlldywgc3RhcnQsIGVuZCkgewogICAgICAgIGlmICh2aWV3LnNsaWNlKSB7CiAgICAgICAgICAgIHJldHVybiB2aWV3LnNsaWNlKHN0YXJ0LCBlbmQpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gbmV3IFVpbnQxNkFycmF5KEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHZpZXcsIHN0YXJ0LCBlbmQpKTsKICAgIH07CiAgICB2YXIgc2xpY2UzMiA9IGZ1bmN0aW9uICh2aWV3LCBzdGFydCwgZW5kKSB7CiAgICAgICAgaWYgKHZpZXcuc2xpY2UpIHsKICAgICAgICAgICAgcmV0dXJuIHZpZXcuc2xpY2Uoc3RhcnQsIGVuZCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBuZXcgVWludDMyQXJyYXkoQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodmlldywgc3RhcnQsIGVuZCkpOwogICAgfTsKICAgIHZhciBjcmVhdGVUcmllRnJvbUJhc2U2NCA9IGZ1bmN0aW9uIChiYXNlNjQsIF9ieXRlTGVuZ3RoKSB7CiAgICAgICAgdmFyIGJ1ZmZlciA9IGRlY29kZShiYXNlNjQpOwogICAgICAgIHZhciB2aWV3MzIgPSBBcnJheS5pc0FycmF5KGJ1ZmZlcikgPyBwb2x5VWludDMyQXJyYXkoYnVmZmVyKSA6IG5ldyBVaW50MzJBcnJheShidWZmZXIpOwogICAgICAgIHZhciB2aWV3MTYgPSBBcnJheS5pc0FycmF5KGJ1ZmZlcikgPyBwb2x5VWludDE2QXJyYXkoYnVmZmVyKSA6IG5ldyBVaW50MTZBcnJheShidWZmZXIpOwogICAgICAgIHZhciBoZWFkZXJMZW5ndGggPSAyNDsKICAgICAgICB2YXIgaW5kZXggPSBzbGljZTE2KHZpZXcxNiwgaGVhZGVyTGVuZ3RoIC8gMiwgdmlldzMyWzRdIC8gMik7CiAgICAgICAgdmFyIGRhdGEgPSB2aWV3MzJbNV0gPT09IDIKICAgICAgICAgICAgPyBzbGljZTE2KHZpZXcxNiwgKGhlYWRlckxlbmd0aCArIHZpZXczMls0XSkgLyAyKQogICAgICAgICAgICA6IHNsaWNlMzIodmlldzMyLCBNYXRoLmNlaWwoKGhlYWRlckxlbmd0aCArIHZpZXczMls0XSkgLyA0KSk7CiAgICAgICAgcmV0dXJuIG5ldyBUcmllKHZpZXczMlswXSwgdmlldzMyWzFdLCB2aWV3MzJbMl0sIHZpZXczMlszXSwgaW5kZXgsIGRhdGEpOwogICAgfTsKICAgIHZhciBUcmllID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewogICAgICAgIGZ1bmN0aW9uIFRyaWUoaW5pdGlhbFZhbHVlLCBlcnJvclZhbHVlLCBoaWdoU3RhcnQsIGhpZ2hWYWx1ZUluZGV4LCBpbmRleCwgZGF0YSkgewogICAgICAgICAgICB0aGlzLmluaXRpYWxWYWx1ZSA9IGluaXRpYWxWYWx1ZTsKICAgICAgICAgICAgdGhpcy5lcnJvclZhbHVlID0gZXJyb3JWYWx1ZTsKICAgICAgICAgICAgdGhpcy5oaWdoU3RhcnQgPSBoaWdoU3RhcnQ7CiAgICAgICAgICAgIHRoaXMuaGlnaFZhbHVlSW5kZXggPSBoaWdoVmFsdWVJbmRleDsKICAgICAgICAgICAgdGhpcy5pbmRleCA9IGluZGV4OwogICAgICAgICAgICB0aGlzLmRhdGEgPSBkYXRhOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBHZXQgdGhlIHZhbHVlIGZvciBhIGNvZGUgcG9pbnQgYXMgc3RvcmVkIGluIHRoZSBUcmllLgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIGNvZGVQb2ludCB0aGUgY29kZSBwb2ludAogICAgICAgICAqIEByZXR1cm4gdGhlIHZhbHVlCiAgICAgICAgICovCiAgICAgICAgVHJpZS5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKGNvZGVQb2ludCkgewogICAgICAgICAgICB2YXIgaXg7CiAgICAgICAgICAgIGlmIChjb2RlUG9pbnQgPj0gMCkgewogICAgICAgICAgICAgICAgaWYgKGNvZGVQb2ludCA8IDB4MGQ4MDAgfHwgKGNvZGVQb2ludCA+IDB4MGRiZmYgJiYgY29kZVBvaW50IDw9IDB4MGZmZmYpKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gT3JkaW5hcnkgQk1QIGNvZGUgcG9pbnQsIGV4Y2x1ZGluZyBsZWFkaW5nIHN1cnJvZ2F0ZXMuCiAgICAgICAgICAgICAgICAgICAgLy8gQk1QIHVzZXMgYSBzaW5nbGUgbGV2ZWwgbG9va3VwLiAgQk1QIGluZGV4IHN0YXJ0cyBhdCBvZmZzZXQgMCBpbiB0aGUgVHJpZTIgaW5kZXguCiAgICAgICAgICAgICAgICAgICAgLy8gMTYgYml0IGRhdGEgaXMgc3RvcmVkIGluIHRoZSBpbmRleCBhcnJheSBpdHNlbGYuCiAgICAgICAgICAgICAgICAgICAgaXggPSB0aGlzLmluZGV4W2NvZGVQb2ludCA+PiBVVFJJRTJfU0hJRlRfMl07CiAgICAgICAgICAgICAgICAgICAgaXggPSAoaXggPDwgVVRSSUUyX0lOREVYX1NISUZUKSArIChjb2RlUG9pbnQgJiBVVFJJRTJfREFUQV9NQVNLKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRhW2l4XTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChjb2RlUG9pbnQgPD0gMHhmZmZmKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gTGVhZCBTdXJyb2dhdGUgQ29kZSBQb2ludC4gIEEgU2VwYXJhdGUgaW5kZXggc2VjdGlvbiBpcyBzdG9yZWQgZm9yCiAgICAgICAgICAgICAgICAgICAgLy8gbGVhZCBzdXJyb2dhdGUgY29kZSB1bml0cyBhbmQgY29kZSBwb2ludHMuCiAgICAgICAgICAgICAgICAgICAgLy8gICBUaGUgbWFpbiBpbmRleCBoYXMgdGhlIGNvZGUgdW5pdCBkYXRhLgogICAgICAgICAgICAgICAgICAgIC8vICAgRm9yIHRoaXMgZnVuY3Rpb24sIHdlIG5lZWQgdGhlIGNvZGUgcG9pbnQgZGF0YS4KICAgICAgICAgICAgICAgICAgICAvLyBOb3RlOiB0aGlzIGV4cHJlc3Npb24gY291bGQgYmUgcmVmYWN0b3JlZCBmb3Igc2xpZ2h0bHkgaW1wcm92ZWQgZWZmaWNpZW5jeSwgYnV0CiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgc3Vycm9nYXRlIGNvZGUgcG9pbnRzIHdpbGwgYmUgc28gcmFyZSBpbiBwcmFjdGljZSB0aGF0IGl0J3Mgbm90IHdvcnRoIGl0LgogICAgICAgICAgICAgICAgICAgIGl4ID0gdGhpcy5pbmRleFtVVFJJRTJfTFNDUF9JTkRFWF8yX09GRlNFVCArICgoY29kZVBvaW50IC0gMHhkODAwKSA+PiBVVFJJRTJfU0hJRlRfMildOwogICAgICAgICAgICAgICAgICAgIGl4ID0gKGl4IDw8IFVUUklFMl9JTkRFWF9TSElGVCkgKyAoY29kZVBvaW50ICYgVVRSSUUyX0RBVEFfTUFTSyk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0YVtpeF07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoY29kZVBvaW50IDwgdGhpcy5oaWdoU3RhcnQpIHsKICAgICAgICAgICAgICAgICAgICAvLyBTdXBwbGVtZW50YWwgY29kZSBwb2ludCwgdXNlIHR3by1sZXZlbCBsb29rdXAuCiAgICAgICAgICAgICAgICAgICAgaXggPSBVVFJJRTJfSU5ERVhfMV9PRkZTRVQgLSBVVFJJRTJfT01JVFRFRF9CTVBfSU5ERVhfMV9MRU5HVEggKyAoY29kZVBvaW50ID4+IFVUUklFMl9TSElGVF8xKTsKICAgICAgICAgICAgICAgICAgICBpeCA9IHRoaXMuaW5kZXhbaXhdOwogICAgICAgICAgICAgICAgICAgIGl4ICs9IChjb2RlUG9pbnQgPj4gVVRSSUUyX1NISUZUXzIpICYgVVRSSUUyX0lOREVYXzJfTUFTSzsKICAgICAgICAgICAgICAgICAgICBpeCA9IHRoaXMuaW5kZXhbaXhdOwogICAgICAgICAgICAgICAgICAgIGl4ID0gKGl4IDw8IFVUUklFMl9JTkRFWF9TSElGVCkgKyAoY29kZVBvaW50ICYgVVRSSUUyX0RBVEFfTUFTSyk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0YVtpeF07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoY29kZVBvaW50IDw9IDB4MTBmZmZmKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0YVt0aGlzLmhpZ2hWYWx1ZUluZGV4XTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICAvLyBGYWxsIHRocm91Z2guICBUaGUgY29kZSBwb2ludCBpcyBvdXRzaWRlIG9mIHRoZSBsZWdhbCByYW5nZSBvZiAwLi4weDEwZmZmZi4KICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3JWYWx1ZTsKICAgICAgICB9OwogICAgICAgIHJldHVybiBUcmllOwogICAgfSgpKTsKCiAgICAvKgogICAgICogYmFzZTY0LWFycmF5YnVmZmVyIDEuMC4yIDxodHRwczovL2dpdGh1Yi5jb20vbmlrbGFzdmgvYmFzZTY0LWFycmF5YnVmZmVyPgogICAgICogQ29weXJpZ2h0IChjKSAyMDIyIE5pa2xhcyB2b24gSGVydHplbiA8aHR0cHM6Ly9oZXJ0emVuLmNvbT4KICAgICAqIFJlbGVhc2VkIHVuZGVyIE1JVCBMaWNlbnNlCiAgICAgKi8KICAgIHZhciBjaGFycyA9ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvJzsKICAgIC8vIFVzZSBhIGxvb2t1cCB0YWJsZSB0byBmaW5kIHRoZSBpbmRleC4KICAgIHZhciBsb29rdXAgPSB0eXBlb2YgVWludDhBcnJheSA9PT0gJ3VuZGVmaW5lZCcgPyBbXSA6IG5ldyBVaW50OEFycmF5KDI1Nik7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYXJzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgbG9va3VwW2NoYXJzLmNoYXJDb2RlQXQoaSldID0gaTsKICAgIH0KCiAgICB2YXIgUHJlcGVuZCA9IDE7CiAgICB2YXIgQ1IgPSAyOwogICAgdmFyIExGID0gMzsKICAgIHZhciBDb250cm9sID0gNDsKICAgIHZhciBFeHRlbmQgPSA1OwogICAgdmFyIFNwYWNpbmdNYXJrID0gNzsKICAgIHZhciBMID0gODsKICAgIHZhciBWID0gOTsKICAgIHZhciBUID0gMTA7CiAgICB2YXIgTFYgPSAxMTsKICAgIHZhciBMVlQgPSAxMjsKICAgIHZhciBaV0ogPSAxMzsKICAgIHZhciBFeHRlbmRlZF9QaWN0b2dyYXBoaWMgPSAxNDsKICAgIHZhciBSSSA9IDE1OwogICAgdmFyIHRvQ29kZVBvaW50cyA9IGZ1bmN0aW9uIChzdHIpIHsKICAgICAgICB2YXIgY29kZVBvaW50cyA9IFtdOwogICAgICAgIHZhciBpID0gMDsKICAgICAgICB2YXIgbGVuZ3RoID0gc3RyLmxlbmd0aDsKICAgICAgICB3aGlsZSAoaSA8IGxlbmd0aCkgewogICAgICAgICAgICB2YXIgdmFsdWUgPSBzdHIuY2hhckNvZGVBdChpKyspOwogICAgICAgICAgICBpZiAodmFsdWUgPj0gMHhkODAwICYmIHZhbHVlIDw9IDB4ZGJmZiAmJiBpIDwgbGVuZ3RoKSB7CiAgICAgICAgICAgICAgICB2YXIgZXh0cmEgPSBzdHIuY2hhckNvZGVBdChpKyspOwogICAgICAgICAgICAgICAgaWYgKChleHRyYSAmIDB4ZmMwMCkgPT09IDB4ZGMwMCkgewogICAgICAgICAgICAgICAgICAgIGNvZGVQb2ludHMucHVzaCgoKHZhbHVlICYgMHgzZmYpIDw8IDEwKSArIChleHRyYSAmIDB4M2ZmKSArIDB4MTAwMDApOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgY29kZVBvaW50cy5wdXNoKHZhbHVlKTsKICAgICAgICAgICAgICAgICAgICBpLS07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBjb2RlUG9pbnRzLnB1c2godmFsdWUpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBjb2RlUG9pbnRzOwogICAgfTsKICAgIHZhciBmcm9tQ29kZVBvaW50ID0gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBjb2RlUG9pbnRzID0gW107CiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKICAgICAgICAgICAgY29kZVBvaW50c1tfaV0gPSBhcmd1bWVudHNbX2ldOwogICAgICAgIH0KICAgICAgICBpZiAoU3RyaW5nLmZyb21Db2RlUG9pbnQpIHsKICAgICAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ29kZVBvaW50LmFwcGx5KFN0cmluZywgY29kZVBvaW50cyk7CiAgICAgICAgfQogICAgICAgIHZhciBsZW5ndGggPSBjb2RlUG9pbnRzLmxlbmd0aDsKICAgICAgICBpZiAoIWxlbmd0aCkgewogICAgICAgICAgICByZXR1cm4gJyc7CiAgICAgICAgfQogICAgICAgIHZhciBjb2RlVW5pdHMgPSBbXTsKICAgICAgICB2YXIgaW5kZXggPSAtMTsKICAgICAgICB2YXIgcmVzdWx0ID0gJyc7CiAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHsKICAgICAgICAgICAgdmFyIGNvZGVQb2ludCA9IGNvZGVQb2ludHNbaW5kZXhdOwogICAgICAgICAgICBpZiAoY29kZVBvaW50IDw9IDB4ZmZmZikgewogICAgICAgICAgICAgICAgY29kZVVuaXRzLnB1c2goY29kZVBvaW50KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIGNvZGVQb2ludCAtPSAweDEwMDAwOwogICAgICAgICAgICAgICAgY29kZVVuaXRzLnB1c2goKGNvZGVQb2ludCA+PiAxMCkgKyAweGQ4MDAsIChjb2RlUG9pbnQgJSAweDQwMCkgKyAweGRjMDApOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChpbmRleCArIDEgPT09IGxlbmd0aCB8fCBjb2RlVW5pdHMubGVuZ3RoID4gMHg0MDAwKSB7CiAgICAgICAgICAgICAgICByZXN1bHQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsIGNvZGVVbml0cyk7CiAgICAgICAgICAgICAgICBjb2RlVW5pdHMubGVuZ3RoID0gMDsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgfTsKICAgIHZhciBVbmljb2RlVHJpZSA9IGNyZWF0ZVRyaWVGcm9tQmFzZTY0KGJhc2U2NCk7CiAgICB2YXIgQlJFQUtfTk9UX0FMTE9XRUQgPSAnw5cnOwogICAgdmFyIEJSRUFLX0FMTE9XRUQgPSAnw7cnOwogICAgdmFyIGNvZGVQb2ludFRvQ2xhc3MgPSBmdW5jdGlvbiAoY29kZVBvaW50KSB7IHJldHVybiBVbmljb2RlVHJpZS5nZXQoY29kZVBvaW50KTsgfTsKICAgIHZhciBfZ3JhcGhlbWVCcmVha0F0SW5kZXggPSBmdW5jdGlvbiAoX2NvZGVQb2ludHMsIGNsYXNzVHlwZXMsIGluZGV4KSB7CiAgICAgICAgdmFyIHByZXZJbmRleCA9IGluZGV4IC0gMjsKICAgICAgICB2YXIgcHJldiA9IGNsYXNzVHlwZXNbcHJldkluZGV4XTsKICAgICAgICB2YXIgY3VycmVudCA9IGNsYXNzVHlwZXNbaW5kZXggLSAxXTsKICAgICAgICB2YXIgbmV4dCA9IGNsYXNzVHlwZXNbaW5kZXhdOwogICAgICAgIC8vIEdCMyBEbyBub3QgYnJlYWsgYmV0d2VlbiBhIENSIGFuZCBMRgogICAgICAgIGlmIChjdXJyZW50ID09PSBDUiAmJiBuZXh0ID09PSBMRikgewogICAgICAgICAgICByZXR1cm4gQlJFQUtfTk9UX0FMTE9XRUQ7CiAgICAgICAgfQogICAgICAgIC8vIEdCNCBPdGhlcndpc2UsIGJyZWFrIGJlZm9yZSBhbmQgYWZ0ZXIgY29udHJvbHMuCiAgICAgICAgaWYgKGN1cnJlbnQgPT09IENSIHx8IGN1cnJlbnQgPT09IExGIHx8IGN1cnJlbnQgPT09IENvbnRyb2wpIHsKICAgICAgICAgICAgcmV0dXJuIEJSRUFLX0FMTE9XRUQ7CiAgICAgICAgfQogICAgICAgIC8vIEdCNQogICAgICAgIGlmIChuZXh0ID09PSBDUiB8fCBuZXh0ID09PSBMRiB8fCBuZXh0ID09PSBDb250cm9sKSB7CiAgICAgICAgICAgIHJldHVybiBCUkVBS19BTExPV0VEOwogICAgICAgIH0KICAgICAgICAvLyBEbyBub3QgYnJlYWsgSGFuZ3VsIHN5bGxhYmxlIHNlcXVlbmNlcy4KICAgICAgICAvLyBHQjYKICAgICAgICBpZiAoY3VycmVudCA9PT0gTCAmJiBbTCwgViwgTFYsIExWVF0uaW5kZXhPZihuZXh0KSAhPT0gLTEpIHsKICAgICAgICAgICAgcmV0dXJuIEJSRUFLX05PVF9BTExPV0VEOwogICAgICAgIH0KICAgICAgICAvLyBHQjcKICAgICAgICBpZiAoKGN1cnJlbnQgPT09IExWIHx8IGN1cnJlbnQgPT09IFYpICYmIChuZXh0ID09PSBWIHx8IG5leHQgPT09IFQpKSB7CiAgICAgICAgICAgIHJldHVybiBCUkVBS19OT1RfQUxMT1dFRDsKICAgICAgICB9CiAgICAgICAgLy8gR0I4CiAgICAgICAgaWYgKChjdXJyZW50ID09PSBMVlQgfHwgY3VycmVudCA9PT0gVCkgJiYgbmV4dCA9PT0gVCkgewogICAgICAgICAgICByZXR1cm4gQlJFQUtfTk9UX0FMTE9XRUQ7CiAgICAgICAgfQogICAgICAgIC8vIEdCOSBEbyBub3QgYnJlYWsgYmVmb3JlIGV4dGVuZGluZyBjaGFyYWN0ZXJzIG9yIFpXSi4KICAgICAgICBpZiAobmV4dCA9PT0gWldKIHx8IG5leHQgPT09IEV4dGVuZCkgewogICAgICAgICAgICByZXR1cm4gQlJFQUtfTk9UX0FMTE9XRUQ7CiAgICAgICAgfQogICAgICAgIC8vIERvIG5vdCBicmVhayBiZWZvcmUgU3BhY2luZ01hcmtzLCBvciBhZnRlciBQcmVwZW5kIGNoYXJhY3RlcnMuCiAgICAgICAgLy8gR0I5YQogICAgICAgIGlmIChuZXh0ID09PSBTcGFjaW5nTWFyaykgewogICAgICAgICAgICByZXR1cm4gQlJFQUtfTk9UX0FMTE9XRUQ7CiAgICAgICAgfQogICAgICAgIC8vIEdCOWEKICAgICAgICBpZiAoY3VycmVudCA9PT0gUHJlcGVuZCkgewogICAgICAgICAgICByZXR1cm4gQlJFQUtfTk9UX0FMTE9XRUQ7CiAgICAgICAgfQogICAgICAgIC8vIEdCMTEgRG8gbm90IGJyZWFrIHdpdGhpbiBlbW9qaSBtb2RpZmllciBzZXF1ZW5jZXMgb3IgZW1vamkgendqIHNlcXVlbmNlcy4KICAgICAgICBpZiAoY3VycmVudCA9PT0gWldKICYmIG5leHQgPT09IEV4dGVuZGVkX1BpY3RvZ3JhcGhpYykgewogICAgICAgICAgICB3aGlsZSAocHJldiA9PT0gRXh0ZW5kKSB7CiAgICAgICAgICAgICAgICBwcmV2ID0gY2xhc3NUeXBlc1stLXByZXZJbmRleF07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHByZXYgPT09IEV4dGVuZGVkX1BpY3RvZ3JhcGhpYykgewogICAgICAgICAgICAgICAgcmV0dXJuIEJSRUFLX05PVF9BTExPV0VEOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIC8vIEdCMTIgRG8gbm90IGJyZWFrIHdpdGhpbiBlbW9qaSBmbGFnIHNlcXVlbmNlcy4KICAgICAgICAvLyBUaGF0IGlzLCBkbyBub3QgYnJlYWsgYmV0d2VlbiByZWdpb25hbCBpbmRpY2F0b3IgKFJJKSBzeW1ib2xzCiAgICAgICAgLy8gaWYgdGhlcmUgaXMgYW4gb2RkIG51bWJlciBvZiBSSSBjaGFyYWN0ZXJzIGJlZm9yZSB0aGUgYnJlYWsgcG9pbnQuCiAgICAgICAgaWYgKGN1cnJlbnQgPT09IFJJICYmIG5leHQgPT09IFJJKSB7CiAgICAgICAgICAgIHZhciBjb3VudFJJID0gMDsKICAgICAgICAgICAgd2hpbGUgKHByZXYgPT09IFJJKSB7CiAgICAgICAgICAgICAgICBjb3VudFJJKys7CiAgICAgICAgICAgICAgICBwcmV2ID0gY2xhc3NUeXBlc1stLXByZXZJbmRleF07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGNvdW50UkkgJSAyID09PSAwKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gQlJFQUtfTk9UX0FMTE9XRUQ7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIEJSRUFLX0FMTE9XRUQ7CiAgICB9OwogICAgdmFyIEdyYXBoZW1lQnJlYWtlciA9IGZ1bmN0aW9uIChzdHIpIHsKICAgICAgICB2YXIgY29kZVBvaW50cyA9IHRvQ29kZVBvaW50cyhzdHIpOwogICAgICAgIHZhciBsZW5ndGggPSBjb2RlUG9pbnRzLmxlbmd0aDsKICAgICAgICB2YXIgaW5kZXggPSAwOwogICAgICAgIHZhciBsYXN0RW5kID0gMDsKICAgICAgICB2YXIgY2xhc3NUeXBlcyA9IGNvZGVQb2ludHMubWFwKGNvZGVQb2ludFRvQ2xhc3MpOwogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIGlmIChpbmRleCA+PSBsZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBkb25lOiB0cnVlLCB2YWx1ZTogbnVsbCB9OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdmFyIGdyYXBoZW1lQnJlYWsgPSBCUkVBS19OT1RfQUxMT1dFRDsKICAgICAgICAgICAgICAgIHdoaWxlIChpbmRleCA8IGxlbmd0aCAmJgogICAgICAgICAgICAgICAgICAgIChncmFwaGVtZUJyZWFrID0gX2dyYXBoZW1lQnJlYWtBdEluZGV4KGNvZGVQb2ludHMsIGNsYXNzVHlwZXMsICsraW5kZXgpKSA9PT0gQlJFQUtfTk9UX0FMTE9XRUQpIHsgfQogICAgICAgICAgICAgICAgaWYgKGdyYXBoZW1lQnJlYWsgIT09IEJSRUFLX05PVF9BTExPV0VEIHx8IGluZGV4ID09PSBsZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBmcm9tQ29kZVBvaW50LmFwcGx5KG51bGwsIGNvZGVQb2ludHMuc2xpY2UobGFzdEVuZCwgaW5kZXgpKTsKICAgICAgICAgICAgICAgICAgICBsYXN0RW5kID0gaW5kZXg7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IHZhbHVlLCBkb25lOiBmYWxzZSB9OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIHsgZG9uZTogdHJ1ZSwgdmFsdWU6IG51bGwgfTsKICAgICAgICAgICAgfSwKICAgICAgICB9OwogICAgfTsKICAgIHZhciBzcGxpdEdyYXBoZW1lcyA9IGZ1bmN0aW9uIChzdHIpIHsKICAgICAgICB2YXIgYnJlYWtlciA9IEdyYXBoZW1lQnJlYWtlcihzdHIpOwogICAgICAgIHZhciBncmFwaGVtZXMgPSBbXTsKICAgICAgICB2YXIgYms7CiAgICAgICAgd2hpbGUgKCEoYmsgPSBicmVha2VyLm5leHQoKSkuZG9uZSkgewogICAgICAgICAgICBpZiAoYmsudmFsdWUpIHsKICAgICAgICAgICAgICAgIGdyYXBoZW1lcy5wdXNoKGJrLnZhbHVlLnNsaWNlKCkpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBncmFwaGVtZXM7CiAgICB9OwoKICAgIHZhciB0ZXN0UmFuZ2VCb3VuZHMgPSBmdW5jdGlvbiAoZG9jdW1lbnQpIHsKICAgICAgICB2YXIgVEVTVF9IRUlHSFQgPSAxMjM7CiAgICAgICAgaWYgKGRvY3VtZW50LmNyZWF0ZVJhbmdlKSB7CiAgICAgICAgICAgIHZhciByYW5nZSA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7CiAgICAgICAgICAgIGlmIChyYW5nZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QpIHsKICAgICAgICAgICAgICAgIHZhciB0ZXN0RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2JvdW5kdGVzdCcpOwogICAgICAgICAgICAgICAgdGVzdEVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gVEVTVF9IRUlHSFQgKyAicHgiOwogICAgICAgICAgICAgICAgdGVzdEVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRlc3RFbGVtZW50KTsKICAgICAgICAgICAgICAgIHJhbmdlLnNlbGVjdE5vZGUodGVzdEVsZW1lbnQpOwogICAgICAgICAgICAgICAgdmFyIHJhbmdlQm91bmRzID0gcmFuZ2UuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICAgICAgICAgICAgICB2YXIgcmFuZ2VIZWlnaHQgPSBNYXRoLnJvdW5kKHJhbmdlQm91bmRzLmhlaWdodCk7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHRlc3RFbGVtZW50KTsKICAgICAgICAgICAgICAgIGlmIChyYW5nZUhlaWdodCA9PT0gVEVTVF9IRUlHSFQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9OwogICAgdmFyIHRlc3RJT1NMaW5lQnJlYWsgPSBmdW5jdGlvbiAoZG9jdW1lbnQpIHsKICAgICAgICB2YXIgdGVzdEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdib3VuZHRlc3QnKTsKICAgICAgICB0ZXN0RWxlbWVudC5zdHlsZS53aWR0aCA9ICc1MHB4JzsKICAgICAgICB0ZXN0RWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICAgICAgICB0ZXN0RWxlbWVudC5zdHlsZS5mb250U2l6ZSA9ICcxMnB4JzsKICAgICAgICB0ZXN0RWxlbWVudC5zdHlsZS5sZXR0ZXJTcGFjaW5nID0gJzBweCc7CiAgICAgICAgdGVzdEVsZW1lbnQuc3R5bGUud29yZFNwYWNpbmcgPSAnMHB4JzsKICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRlc3RFbGVtZW50KTsKICAgICAgICB2YXIgcmFuZ2UgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpOwogICAgICAgIHRlc3RFbGVtZW50LmlubmVySFRNTCA9IHR5cGVvZiAnJy5yZXBlYXQgPT09ICdmdW5jdGlvbicgPyAnJiMxMjgxMDQ7Jy5yZXBlYXQoMTApIDogJyc7CiAgICAgICAgdmFyIG5vZGUgPSB0ZXN0RWxlbWVudC5maXJzdENoaWxkOwogICAgICAgIHZhciB0ZXh0TGlzdCA9IHRvQ29kZVBvaW50cyQxKG5vZGUuZGF0YSkubWFwKGZ1bmN0aW9uIChpKSB7IHJldHVybiBmcm9tQ29kZVBvaW50JDEoaSk7IH0pOwogICAgICAgIHZhciBvZmZzZXQgPSAwOwogICAgICAgIHZhciBwcmV2ID0ge307CiAgICAgICAgLy8gaW9zIDEzIGRvZXMgbm90IGhhbmRsZSByYW5nZSBnZXRCb3VuZGluZ0NsaWVudFJlY3QgbGluZSBjaGFuZ2VzIGNvcnJlY3RseSAjMjE3NwogICAgICAgIHZhciBzdXBwb3J0cyA9IHRleHRMaXN0LmV2ZXJ5KGZ1bmN0aW9uICh0ZXh0LCBpKSB7CiAgICAgICAgICAgIHJhbmdlLnNldFN0YXJ0KG5vZGUsIG9mZnNldCk7CiAgICAgICAgICAgIHJhbmdlLnNldEVuZChub2RlLCBvZmZzZXQgKyB0ZXh0Lmxlbmd0aCk7CiAgICAgICAgICAgIHZhciByZWN0ID0gcmFuZ2UuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICAgICAgICAgIG9mZnNldCArPSB0ZXh0Lmxlbmd0aDsKICAgICAgICAgICAgdmFyIGJvdW5kQWhlYWQgPSByZWN0LnggPiBwcmV2LnggfHwgcmVjdC55ID4gcHJldi55OwogICAgICAgICAgICBwcmV2ID0gcmVjdDsKICAgICAgICAgICAgaWYgKGkgPT09IDApIHsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBib3VuZEFoZWFkOwogICAgICAgIH0pOwogICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQodGVzdEVsZW1lbnQpOwogICAgICAgIHJldHVybiBzdXBwb3J0czsKICAgIH07CiAgICB2YXIgdGVzdENPUlMgPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0eXBlb2YgbmV3IEltYWdlKCkuY3Jvc3NPcmlnaW4gIT09ICd1bmRlZmluZWQnOyB9OwogICAgdmFyIHRlc3RSZXNwb25zZVR5cGUgPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0eXBlb2YgbmV3IFhNTEh0dHBSZXF1ZXN0KCkucmVzcG9uc2VUeXBlID09PSAnc3RyaW5nJzsgfTsKICAgIHZhciB0ZXN0U1ZHID0gZnVuY3Rpb24gKGRvY3VtZW50KSB7CiAgICAgICAgdmFyIGltZyA9IG5ldyBJbWFnZSgpOwogICAgICAgIHZhciBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTsKICAgICAgICB2YXIgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7CiAgICAgICAgaWYgKCFjdHgpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICBpbWcuc3JjID0gImRhdGE6aW1hZ2Uvc3ZnK3htbCw8c3ZnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zyc+PC9zdmc+IjsKICAgICAgICB0cnkgewogICAgICAgICAgICBjdHguZHJhd0ltYWdlKGltZywgMCwgMCk7CiAgICAgICAgICAgIGNhbnZhcy50b0RhdGFVUkwoKTsKICAgICAgICB9CiAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH07CiAgICB2YXIgaXNHcmVlblBpeGVsID0gZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICByZXR1cm4gZGF0YVswXSA9PT0gMCAmJiBkYXRhWzFdID09PSAyNTUgJiYgZGF0YVsyXSA9PT0gMCAmJiBkYXRhWzNdID09PSAyNTU7CiAgICB9OwogICAgdmFyIHRlc3RGb3JlaWduT2JqZWN0ID0gZnVuY3Rpb24gKGRvY3VtZW50KSB7CiAgICAgICAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpOwogICAgICAgIHZhciBzaXplID0gMTAwOwogICAgICAgIGNhbnZhcy53aWR0aCA9IHNpemU7CiAgICAgICAgY2FudmFzLmhlaWdodCA9IHNpemU7CiAgICAgICAgdmFyIGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpOwogICAgICAgIGlmICghY3R4KSB7CiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChmYWxzZSk7CiAgICAgICAgfQogICAgICAgIGN0eC5maWxsU3R5bGUgPSAncmdiKDAsIDI1NSwgMCknOwogICAgICAgIGN0eC5maWxsUmVjdCgwLCAwLCBzaXplLCBzaXplKTsKICAgICAgICB2YXIgaW1nID0gbmV3IEltYWdlKCk7CiAgICAgICAgdmFyIGdyZWVuSW1hZ2VTcmMgPSBjYW52YXMudG9EYXRhVVJMKCk7CiAgICAgICAgaW1nLnNyYyA9IGdyZWVuSW1hZ2VTcmM7CiAgICAgICAgdmFyIHN2ZyA9IGNyZWF0ZUZvcmVpZ25PYmplY3RTVkcoc2l6ZSwgc2l6ZSwgMCwgMCwgaW1nKTsKICAgICAgICBjdHguZmlsbFN0eWxlID0gJ3JlZCc7CiAgICAgICAgY3R4LmZpbGxSZWN0KDAsIDAsIHNpemUsIHNpemUpOwogICAgICAgIHJldHVybiBsb2FkU2VyaWFsaXplZFNWRyQxKHN2ZykKICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGltZykgewogICAgICAgICAgICBjdHguZHJhd0ltYWdlKGltZywgMCwgMCk7CiAgICAgICAgICAgIHZhciBkYXRhID0gY3R4LmdldEltYWdlRGF0YSgwLCAwLCBzaXplLCBzaXplKS5kYXRhOwogICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJ3JlZCc7CiAgICAgICAgICAgIGN0eC5maWxsUmVjdCgwLCAwLCBzaXplLCBzaXplKTsKICAgICAgICAgICAgdmFyIG5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgICAgbm9kZS5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSAidXJsKCIgKyBncmVlbkltYWdlU3JjICsgIikiOwogICAgICAgICAgICBub2RlLnN0eWxlLmhlaWdodCA9IHNpemUgKyAicHgiOwogICAgICAgICAgICAvLyBGaXJlZm94IDU1IGRvZXMgbm90IHJlbmRlciBpbmxpbmUgPGltZyAvPiB0YWdzCiAgICAgICAgICAgIHJldHVybiBpc0dyZWVuUGl4ZWwoZGF0YSkKICAgICAgICAgICAgICAgID8gbG9hZFNlcmlhbGl6ZWRTVkckMShjcmVhdGVGb3JlaWduT2JqZWN0U1ZHKHNpemUsIHNpemUsIDAsIDAsIG5vZGUpKQogICAgICAgICAgICAgICAgOiBQcm9taXNlLnJlamVjdChmYWxzZSk7CiAgICAgICAgfSkKICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGltZykgewogICAgICAgICAgICBjdHguZHJhd0ltYWdlKGltZywgMCwgMCk7CiAgICAgICAgICAgIC8vIEVkZ2UgZG9lcyBub3QgcmVuZGVyIGJhY2tncm91bmQtaW1hZ2VzCiAgICAgICAgICAgIHJldHVybiBpc0dyZWVuUGl4ZWwoY3R4LmdldEltYWdlRGF0YSgwLCAwLCBzaXplLCBzaXplKS5kYXRhKTsKICAgICAgICB9KQogICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKCkgeyByZXR1cm4gZmFsc2U7IH0pOwogICAgfTsKICAgIHZhciBjcmVhdGVGb3JlaWduT2JqZWN0U1ZHID0gZnVuY3Rpb24gKHdpZHRoLCBoZWlnaHQsIHgsIHksIG5vZGUpIHsKICAgICAgICB2YXIgeG1sbnMgPSAnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnOwogICAgICAgIHZhciBzdmcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoeG1sbnMsICdzdmcnKTsKICAgICAgICB2YXIgZm9yZWlnbk9iamVjdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyh4bWxucywgJ2ZvcmVpZ25PYmplY3QnKTsKICAgICAgICBzdmcuc2V0QXR0cmlidXRlTlMobnVsbCwgJ3dpZHRoJywgd2lkdGgudG9TdHJpbmcoKSk7CiAgICAgICAgc3ZnLnNldEF0dHJpYnV0ZU5TKG51bGwsICdoZWlnaHQnLCBoZWlnaHQudG9TdHJpbmcoKSk7CiAgICAgICAgZm9yZWlnbk9iamVjdC5zZXRBdHRyaWJ1dGVOUyhudWxsLCAnd2lkdGgnLCAnMTAwJScpOwogICAgICAgIGZvcmVpZ25PYmplY3Quc2V0QXR0cmlidXRlTlMobnVsbCwgJ2hlaWdodCcsICcxMDAlJyk7CiAgICAgICAgZm9yZWlnbk9iamVjdC5zZXRBdHRyaWJ1dGVOUyhudWxsLCAneCcsIHgudG9TdHJpbmcoKSk7CiAgICAgICAgZm9yZWlnbk9iamVjdC5zZXRBdHRyaWJ1dGVOUyhudWxsLCAneScsIHkudG9TdHJpbmcoKSk7CiAgICAgICAgZm9yZWlnbk9iamVjdC5zZXRBdHRyaWJ1dGVOUyhudWxsLCAnZXh0ZXJuYWxSZXNvdXJjZXNSZXF1aXJlZCcsICd0cnVlJyk7CiAgICAgICAgc3ZnLmFwcGVuZENoaWxkKGZvcmVpZ25PYmplY3QpOwogICAgICAgIGZvcmVpZ25PYmplY3QuYXBwZW5kQ2hpbGQobm9kZSk7CiAgICAgICAgcmV0dXJuIHN2ZzsKICAgIH07CiAgICB2YXIgbG9hZFNlcmlhbGl6ZWRTVkckMSA9IGZ1bmN0aW9uIChzdmcpIHsKICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgICAgICB2YXIgaW1nID0gbmV3IEltYWdlKCk7CiAgICAgICAgICAgIGltZy5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiByZXNvbHZlKGltZyk7IH07CiAgICAgICAgICAgIGltZy5vbmVycm9yID0gcmVqZWN0OwogICAgICAgICAgICBpbWcuc3JjID0gImRhdGE6aW1hZ2Uvc3ZnK3htbDtjaGFyc2V0PXV0Zi04LCIgKyBlbmNvZGVVUklDb21wb25lbnQobmV3IFhNTFNlcmlhbGl6ZXIoKS5zZXJpYWxpemVUb1N0cmluZyhzdmcpKTsKICAgICAgICB9KTsKICAgIH07CiAgICB2YXIgRkVBVFVSRVMgPSB7CiAgICAgICAgZ2V0IFNVUFBPUlRfUkFOR0VfQk9VTkRTKCkgewogICAgICAgICAgICB2YXIgdmFsdWUgPSB0ZXN0UmFuZ2VCb3VuZHMoZG9jdW1lbnQpOwogICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRkVBVFVSRVMsICdTVVBQT1JUX1JBTkdFX0JPVU5EUycsIHsgdmFsdWU6IHZhbHVlIH0pOwogICAgICAgICAgICByZXR1cm4gdmFsdWU7CiAgICAgICAgfSwKICAgICAgICBnZXQgU1VQUE9SVF9XT1JEX0JSRUFLSU5HKCkgewogICAgICAgICAgICB2YXIgdmFsdWUgPSBGRUFUVVJFUy5TVVBQT1JUX1JBTkdFX0JPVU5EUyAmJiB0ZXN0SU9TTGluZUJyZWFrKGRvY3VtZW50KTsKICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEZFQVRVUkVTLCAnU1VQUE9SVF9XT1JEX0JSRUFLSU5HJywgeyB2YWx1ZTogdmFsdWUgfSk7CiAgICAgICAgICAgIHJldHVybiB2YWx1ZTsKICAgICAgICB9LAogICAgICAgIGdldCBTVVBQT1JUX1NWR19EUkFXSU5HKCkgewogICAgICAgICAgICB2YXIgdmFsdWUgPSB0ZXN0U1ZHKGRvY3VtZW50KTsKICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEZFQVRVUkVTLCAnU1VQUE9SVF9TVkdfRFJBV0lORycsIHsgdmFsdWU6IHZhbHVlIH0pOwogICAgICAgICAgICByZXR1cm4gdmFsdWU7CiAgICAgICAgfSwKICAgICAgICBnZXQgU1VQUE9SVF9GT1JFSUdOT0JKRUNUX0RSQVdJTkcoKSB7CiAgICAgICAgICAgIHZhciB2YWx1ZSA9IHR5cGVvZiBBcnJheS5mcm9tID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiB3aW5kb3cuZmV0Y2ggPT09ICdmdW5jdGlvbicKICAgICAgICAgICAgICAgID8gdGVzdEZvcmVpZ25PYmplY3QoZG9jdW1lbnQpCiAgICAgICAgICAgICAgICA6IFByb21pc2UucmVzb2x2ZShmYWxzZSk7CiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShGRUFUVVJFUywgJ1NVUFBPUlRfRk9SRUlHTk9CSkVDVF9EUkFXSU5HJywgeyB2YWx1ZTogdmFsdWUgfSk7CiAgICAgICAgICAgIHJldHVybiB2YWx1ZTsKICAgICAgICB9LAogICAgICAgIGdldCBTVVBQT1JUX0NPUlNfSU1BR0VTKCkgewogICAgICAgICAgICB2YXIgdmFsdWUgPSB0ZXN0Q09SUygpOwogICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRkVBVFVSRVMsICdTVVBQT1JUX0NPUlNfSU1BR0VTJywgeyB2YWx1ZTogdmFsdWUgfSk7CiAgICAgICAgICAgIHJldHVybiB2YWx1ZTsKICAgICAgICB9LAogICAgICAgIGdldCBTVVBQT1JUX1JFU1BPTlNFX1RZUEUoKSB7CiAgICAgICAgICAgIHZhciB2YWx1ZSA9IHRlc3RSZXNwb25zZVR5cGUoKTsKICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEZFQVRVUkVTLCAnU1VQUE9SVF9SRVNQT05TRV9UWVBFJywgeyB2YWx1ZTogdmFsdWUgfSk7CiAgICAgICAgICAgIHJldHVybiB2YWx1ZTsKICAgICAgICB9LAogICAgICAgIGdldCBTVVBQT1JUX0NPUlNfWEhSKCkgewogICAgICAgICAgICB2YXIgdmFsdWUgPSAnd2l0aENyZWRlbnRpYWxzJyBpbiBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEZFQVRVUkVTLCAnU1VQUE9SVF9DT1JTX1hIUicsIHsgdmFsdWU6IHZhbHVlIH0pOwogICAgICAgICAgICByZXR1cm4gdmFsdWU7CiAgICAgICAgfSwKICAgICAgICBnZXQgU1VQUE9SVF9OQVRJVkVfVEVYVF9TRUdNRU5UQVRJT04oKSB7CiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55CiAgICAgICAgICAgIHZhciB2YWx1ZSA9ICEhKHR5cGVvZiBJbnRsICE9PSAndW5kZWZpbmVkJyAmJiBJbnRsLlNlZ21lbnRlcik7CiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShGRUFUVVJFUywgJ1NVUFBPUlRfTkFUSVZFX1RFWFRfU0VHTUVOVEFUSU9OJywgeyB2YWx1ZTogdmFsdWUgfSk7CiAgICAgICAgICAgIHJldHVybiB2YWx1ZTsKICAgICAgICB9CiAgICB9OwoKICAgIHZhciBUZXh0Qm91bmRzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewogICAgICAgIGZ1bmN0aW9uIFRleHRCb3VuZHModGV4dCwgYm91bmRzKSB7CiAgICAgICAgICAgIHRoaXMudGV4dCA9IHRleHQ7CiAgICAgICAgICAgIHRoaXMuYm91bmRzID0gYm91bmRzOwogICAgICAgIH0KICAgICAgICByZXR1cm4gVGV4dEJvdW5kczsKICAgIH0oKSk7CiAgICB2YXIgcGFyc2VUZXh0Qm91bmRzID0gZnVuY3Rpb24gKGNvbnRleHQsIHZhbHVlLCBzdHlsZXMsIG5vZGUpIHsKICAgICAgICB2YXIgdGV4dExpc3QgPSBicmVha1RleHQodmFsdWUsIHN0eWxlcyk7CiAgICAgICAgdmFyIHRleHRCb3VuZHMgPSBbXTsKICAgICAgICB2YXIgb2Zmc2V0ID0gMDsKICAgICAgICB0ZXh0TGlzdC5mb3JFYWNoKGZ1bmN0aW9uICh0ZXh0KSB7CiAgICAgICAgICAgIGlmIChzdHlsZXMudGV4dERlY29yYXRpb25MaW5lLmxlbmd0aCB8fCB0ZXh0LnRyaW0oKS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICBpZiAoRkVBVFVSRVMuU1VQUE9SVF9SQU5HRV9CT1VORFMpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgY2xpZW50UmVjdHMgPSBjcmVhdGVSYW5nZShub2RlLCBvZmZzZXQsIHRleHQubGVuZ3RoKS5nZXRDbGllbnRSZWN0cygpOwogICAgICAgICAgICAgICAgICAgIGlmIChjbGllbnRSZWN0cy5sZW5ndGggPiAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdWJTZWdtZW50cyA9IHNlZ21lbnRHcmFwaGVtZXModGV4dCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdWJPZmZzZXRfMSA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIHN1YlNlZ21lbnRzLmZvckVhY2goZnVuY3Rpb24gKHN1YlNlZ21lbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRCb3VuZHMucHVzaChuZXcgVGV4dEJvdW5kcyhzdWJTZWdtZW50LCBCb3VuZHMuZnJvbURPTVJlY3RMaXN0KGNvbnRleHQsIGNyZWF0ZVJhbmdlKG5vZGUsIHN1Yk9mZnNldF8xICsgb2Zmc2V0LCBzdWJTZWdtZW50Lmxlbmd0aCkuZ2V0Q2xpZW50UmVjdHMoKSkpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Yk9mZnNldF8xICs9IHN1YlNlZ21lbnQubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRleHRCb3VuZHMucHVzaChuZXcgVGV4dEJvdW5kcyh0ZXh0LCBCb3VuZHMuZnJvbURPTVJlY3RMaXN0KGNvbnRleHQsIGNsaWVudFJlY3RzKSkpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIHZhciByZXBsYWNlbWVudE5vZGUgPSBub2RlLnNwbGl0VGV4dCh0ZXh0Lmxlbmd0aCk7CiAgICAgICAgICAgICAgICAgICAgdGV4dEJvdW5kcy5wdXNoKG5ldyBUZXh0Qm91bmRzKHRleHQsIGdldFdyYXBwZXJCb3VuZHMoY29udGV4dCwgbm9kZSkpKTsKICAgICAgICAgICAgICAgICAgICBub2RlID0gcmVwbGFjZW1lbnROb2RlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYgKCFGRUFUVVJFUy5TVVBQT1JUX1JBTkdFX0JPVU5EUykgewogICAgICAgICAgICAgICAgbm9kZSA9IG5vZGUuc3BsaXRUZXh0KHRleHQubGVuZ3RoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBvZmZzZXQgKz0gdGV4dC5sZW5ndGg7CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIHRleHRCb3VuZHM7CiAgICB9OwogICAgdmFyIGdldFdyYXBwZXJCb3VuZHMgPSBmdW5jdGlvbiAoY29udGV4dCwgbm9kZSkgewogICAgICAgIHZhciBvd25lckRvY3VtZW50ID0gbm9kZS5vd25lckRvY3VtZW50OwogICAgICAgIGlmIChvd25lckRvY3VtZW50KSB7CiAgICAgICAgICAgIHZhciB3cmFwcGVyID0gb3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KCdodG1sMmNhbnZhc3dyYXBwZXInKTsKICAgICAgICAgICAgd3JhcHBlci5hcHBlbmRDaGlsZChub2RlLmNsb25lTm9kZSh0cnVlKSk7CiAgICAgICAgICAgIHZhciBwYXJlbnROb2RlID0gbm9kZS5wYXJlbnROb2RlOwogICAgICAgICAgICBpZiAocGFyZW50Tm9kZSkgewogICAgICAgICAgICAgICAgcGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQod3JhcHBlciwgbm9kZSk7CiAgICAgICAgICAgICAgICB2YXIgYm91bmRzID0gcGFyc2VCb3VuZHMoY29udGV4dCwgd3JhcHBlcik7CiAgICAgICAgICAgICAgICBpZiAod3JhcHBlci5maXJzdENoaWxkKSB7CiAgICAgICAgICAgICAgICAgICAgcGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQod3JhcHBlci5maXJzdENoaWxkLCB3cmFwcGVyKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBib3VuZHM7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIEJvdW5kcy5FTVBUWTsKICAgIH07CiAgICB2YXIgY3JlYXRlUmFuZ2UgPSBmdW5jdGlvbiAobm9kZSwgb2Zmc2V0LCBsZW5ndGgpIHsKICAgICAgICB2YXIgb3duZXJEb2N1bWVudCA9IG5vZGUub3duZXJEb2N1bWVudDsKICAgICAgICBpZiAoIW93bmVyRG9jdW1lbnQpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdOb2RlIGhhcyBubyBvd25lciBkb2N1bWVudCcpOwogICAgICAgIH0KICAgICAgICB2YXIgcmFuZ2UgPSBvd25lckRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7CiAgICAgICAgcmFuZ2Uuc2V0U3RhcnQobm9kZSwgb2Zmc2V0KTsKICAgICAgICByYW5nZS5zZXRFbmQobm9kZSwgb2Zmc2V0ICsgbGVuZ3RoKTsKICAgICAgICByZXR1cm4gcmFuZ2U7CiAgICB9OwogICAgdmFyIHNlZ21lbnRHcmFwaGVtZXMgPSBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICBpZiAoRkVBVFVSRVMuU1VQUE9SVF9OQVRJVkVfVEVYVF9TRUdNRU5UQVRJT04pIHsKICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnkKICAgICAgICAgICAgdmFyIHNlZ21lbnRlciA9IG5ldyBJbnRsLlNlZ21lbnRlcih2b2lkIDAsIHsgZ3JhbnVsYXJpdHk6ICdncmFwaGVtZScgfSk7CiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55CiAgICAgICAgICAgIHJldHVybiBBcnJheS5mcm9tKHNlZ21lbnRlci5zZWdtZW50KHZhbHVlKSkubWFwKGZ1bmN0aW9uIChzZWdtZW50KSB7IHJldHVybiBzZWdtZW50LnNlZ21lbnQ7IH0pOwogICAgICAgIH0KICAgICAgICByZXR1cm4gc3BsaXRHcmFwaGVtZXModmFsdWUpOwogICAgfTsKICAgIHZhciBzZWdtZW50V29yZHMgPSBmdW5jdGlvbiAodmFsdWUsIHN0eWxlcykgewogICAgICAgIGlmIChGRUFUVVJFUy5TVVBQT1JUX05BVElWRV9URVhUX1NFR01FTlRBVElPTikgewogICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueQogICAgICAgICAgICB2YXIgc2VnbWVudGVyID0gbmV3IEludGwuU2VnbWVudGVyKHZvaWQgMCwgewogICAgICAgICAgICAgICAgZ3JhbnVsYXJpdHk6ICd3b3JkJwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnkKICAgICAgICAgICAgcmV0dXJuIEFycmF5LmZyb20oc2VnbWVudGVyLnNlZ21lbnQodmFsdWUpKS5tYXAoZnVuY3Rpb24gKHNlZ21lbnQpIHsgcmV0dXJuIHNlZ21lbnQuc2VnbWVudDsgfSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBicmVha1dvcmRzKHZhbHVlLCBzdHlsZXMpOwogICAgfTsKICAgIHZhciBicmVha1RleHQgPSBmdW5jdGlvbiAodmFsdWUsIHN0eWxlcykgewogICAgICAgIHJldHVybiBzdHlsZXMubGV0dGVyU3BhY2luZyAhPT0gMCA/IHNlZ21lbnRHcmFwaGVtZXModmFsdWUpIDogc2VnbWVudFdvcmRzKHZhbHVlLCBzdHlsZXMpOwogICAgfTsKICAgIC8vIGh0dHBzOi8vZHJhZnRzLmNzc3dnLm9yZy9jc3MtdGV4dC8jd29yZC1zZXBhcmF0b3IKICAgIHZhciB3b3JkU2VwYXJhdG9ycyA9IFsweDAwMjAsIDB4MDBhMCwgMHgxMzYxLCAweDEwMTAwLCAweDEwMTAxLCAweDEwMzksIDB4MTA5MV07CiAgICB2YXIgYnJlYWtXb3JkcyA9IGZ1bmN0aW9uIChzdHIsIHN0eWxlcykgewogICAgICAgIHZhciBicmVha2VyID0gTGluZUJyZWFrZXIoc3RyLCB7CiAgICAgICAgICAgIGxpbmVCcmVhazogc3R5bGVzLmxpbmVCcmVhaywKICAgICAgICAgICAgd29yZEJyZWFrOiBzdHlsZXMub3ZlcmZsb3dXcmFwID09PSAiYnJlYWstd29yZCIgLyogQlJFQUtfV09SRCAqLyA/ICdicmVhay13b3JkJyA6IHN0eWxlcy53b3JkQnJlYWsKICAgICAgICB9KTsKICAgICAgICB2YXIgd29yZHMgPSBbXTsKICAgICAgICB2YXIgYms7CiAgICAgICAgdmFyIF9sb29wXzEgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmIChiay52YWx1ZSkgewogICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gYmsudmFsdWUuc2xpY2UoKTsKICAgICAgICAgICAgICAgIHZhciBjb2RlUG9pbnRzID0gdG9Db2RlUG9pbnRzJDEodmFsdWUpOwogICAgICAgICAgICAgICAgdmFyIHdvcmRfMSA9ICcnOwogICAgICAgICAgICAgICAgY29kZVBvaW50cy5mb3JFYWNoKGZ1bmN0aW9uIChjb2RlUG9pbnQpIHsKICAgICAgICAgICAgICAgICAgICBpZiAod29yZFNlcGFyYXRvcnMuaW5kZXhPZihjb2RlUG9pbnQpID09PSAtMSkgewogICAgICAgICAgICAgICAgICAgICAgICB3b3JkXzEgKz0gZnJvbUNvZGVQb2ludCQxKGNvZGVQb2ludCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAod29yZF8xLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgd29yZHMucHVzaCh3b3JkXzEpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHdvcmRzLnB1c2goZnJvbUNvZGVQb2ludCQxKGNvZGVQb2ludCkpOwogICAgICAgICAgICAgICAgICAgICAgICB3b3JkXzEgPSAnJzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGlmICh3b3JkXzEubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgd29yZHMucHVzaCh3b3JkXzEpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICB3aGlsZSAoIShiayA9IGJyZWFrZXIubmV4dCgpKS5kb25lKSB7CiAgICAgICAgICAgIF9sb29wXzEoKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHdvcmRzOwogICAgfTsKCiAgICB2YXIgVGV4dENvbnRhaW5lciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKICAgICAgICBmdW5jdGlvbiBUZXh0Q29udGFpbmVyKGNvbnRleHQsIG5vZGUsIHN0eWxlcykgewogICAgICAgICAgICB0aGlzLnRleHQgPSB0cmFuc2Zvcm0obm9kZS5kYXRhLCBzdHlsZXMudGV4dFRyYW5zZm9ybSk7CiAgICAgICAgICAgIHRoaXMudGV4dEJvdW5kcyA9IHBhcnNlVGV4dEJvdW5kcyhjb250ZXh0LCB0aGlzLnRleHQsIHN0eWxlcywgbm9kZSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBUZXh0Q29udGFpbmVyOwogICAgfSgpKTsKICAgIHZhciB0cmFuc2Zvcm0gPSBmdW5jdGlvbiAodGV4dCwgdHJhbnNmb3JtKSB7CiAgICAgICAgc3dpdGNoICh0cmFuc2Zvcm0pIHsKICAgICAgICAgICAgY2FzZSAxIC8qIExPV0VSQ0FTRSAqLzoKICAgICAgICAgICAgICAgIHJldHVybiB0ZXh0LnRvTG93ZXJDYXNlKCk7CiAgICAgICAgICAgIGNhc2UgMyAvKiBDQVBJVEFMSVpFICovOgogICAgICAgICAgICAgICAgcmV0dXJuIHRleHQucmVwbGFjZShDQVBJVEFMSVpFLCBjYXBpdGFsaXplKTsKICAgICAgICAgICAgY2FzZSAyIC8qIFVQUEVSQ0FTRSAqLzoKICAgICAgICAgICAgICAgIHJldHVybiB0ZXh0LnRvVXBwZXJDYXNlKCk7CiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICByZXR1cm4gdGV4dDsKICAgICAgICB9CiAgICB9OwogICAgdmFyIENBUElUQUxJWkUgPSAvKF58XHN8OnwtfFwofFwpKShbYS16XSkvZzsKICAgIHZhciBjYXBpdGFsaXplID0gZnVuY3Rpb24gKG0sIHAxLCBwMikgewogICAgICAgIGlmIChtLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgcmV0dXJuIHAxICsgcDIudG9VcHBlckNhc2UoKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIG07CiAgICB9OwoKICAgIHZhciBJbWFnZUVsZW1lbnRDb250YWluZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CiAgICAgICAgX19leHRlbmRzKEltYWdlRWxlbWVudENvbnRhaW5lciwgX3N1cGVyKTsKICAgICAgICBmdW5jdGlvbiBJbWFnZUVsZW1lbnRDb250YWluZXIoY29udGV4dCwgaW1nKSB7CiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGNvbnRleHQsIGltZykgfHwgdGhpczsKICAgICAgICAgICAgX3RoaXMuc3JjID0gaW1nLmN1cnJlbnRTcmMgfHwgaW1nLnNyYzsKICAgICAgICAgICAgX3RoaXMuaW50cmluc2ljV2lkdGggPSBpbWcubmF0dXJhbFdpZHRoOwogICAgICAgICAgICBfdGhpcy5pbnRyaW5zaWNIZWlnaHQgPSBpbWcubmF0dXJhbEhlaWdodDsKICAgICAgICAgICAgX3RoaXMuY29udGV4dC5jYWNoZS5hZGRJbWFnZShfdGhpcy5zcmMpOwogICAgICAgICAgICByZXR1cm4gX3RoaXM7CiAgICAgICAgfQogICAgICAgIHJldHVybiBJbWFnZUVsZW1lbnRDb250YWluZXI7CiAgICB9KEVsZW1lbnRDb250YWluZXIpKTsKCiAgICB2YXIgQ2FudmFzRWxlbWVudENvbnRhaW5lciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKICAgICAgICBfX2V4dGVuZHMoQ2FudmFzRWxlbWVudENvbnRhaW5lciwgX3N1cGVyKTsKICAgICAgICBmdW5jdGlvbiBDYW52YXNFbGVtZW50Q29udGFpbmVyKGNvbnRleHQsIGNhbnZhcykgewogICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBjb250ZXh0LCBjYW52YXMpIHx8IHRoaXM7CiAgICAgICAgICAgIF90aGlzLmNhbnZhcyA9IGNhbnZhczsKICAgICAgICAgICAgX3RoaXMuaW50cmluc2ljV2lkdGggPSBjYW52YXMud2lkdGg7CiAgICAgICAgICAgIF90aGlzLmludHJpbnNpY0hlaWdodCA9IGNhbnZhcy5oZWlnaHQ7CiAgICAgICAgICAgIHJldHVybiBfdGhpczsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIENhbnZhc0VsZW1lbnRDb250YWluZXI7CiAgICB9KEVsZW1lbnRDb250YWluZXIpKTsKCiAgICB2YXIgU1ZHRWxlbWVudENvbnRhaW5lciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKICAgICAgICBfX2V4dGVuZHMoU1ZHRWxlbWVudENvbnRhaW5lciwgX3N1cGVyKTsKICAgICAgICBmdW5jdGlvbiBTVkdFbGVtZW50Q29udGFpbmVyKGNvbnRleHQsIGltZykgewogICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBjb250ZXh0LCBpbWcpIHx8IHRoaXM7CiAgICAgICAgICAgIHZhciBzID0gbmV3IFhNTFNlcmlhbGl6ZXIoKTsKICAgICAgICAgICAgdmFyIGJvdW5kcyA9IHBhcnNlQm91bmRzKGNvbnRleHQsIGltZyk7CiAgICAgICAgICAgIGltZy5zZXRBdHRyaWJ1dGUoJ3dpZHRoJywgYm91bmRzLndpZHRoICsgInB4Iik7CiAgICAgICAgICAgIGltZy5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsIGJvdW5kcy5oZWlnaHQgKyAicHgiKTsKICAgICAgICAgICAgX3RoaXMuc3ZnID0gImRhdGE6aW1hZ2Uvc3ZnK3htbCwiICsgZW5jb2RlVVJJQ29tcG9uZW50KHMuc2VyaWFsaXplVG9TdHJpbmcoaW1nKSk7CiAgICAgICAgICAgIF90aGlzLmludHJpbnNpY1dpZHRoID0gaW1nLndpZHRoLmJhc2VWYWwudmFsdWU7CiAgICAgICAgICAgIF90aGlzLmludHJpbnNpY0hlaWdodCA9IGltZy5oZWlnaHQuYmFzZVZhbC52YWx1ZTsKICAgICAgICAgICAgX3RoaXMuY29udGV4dC5jYWNoZS5hZGRJbWFnZShfdGhpcy5zdmcpOwogICAgICAgICAgICByZXR1cm4gX3RoaXM7CiAgICAgICAgfQogICAgICAgIHJldHVybiBTVkdFbGVtZW50Q29udGFpbmVyOwogICAgfShFbGVtZW50Q29udGFpbmVyKSk7CgogICAgdmFyIExJRWxlbWVudENvbnRhaW5lciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKICAgICAgICBfX2V4dGVuZHMoTElFbGVtZW50Q29udGFpbmVyLCBfc3VwZXIpOwogICAgICAgIGZ1bmN0aW9uIExJRWxlbWVudENvbnRhaW5lcihjb250ZXh0LCBlbGVtZW50KSB7CiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGNvbnRleHQsIGVsZW1lbnQpIHx8IHRoaXM7CiAgICAgICAgICAgIF90aGlzLnZhbHVlID0gZWxlbWVudC52YWx1ZTsKICAgICAgICAgICAgcmV0dXJuIF90aGlzOwogICAgICAgIH0KICAgICAgICByZXR1cm4gTElFbGVtZW50Q29udGFpbmVyOwogICAgfShFbGVtZW50Q29udGFpbmVyKSk7CgogICAgdmFyIE9MRWxlbWVudENvbnRhaW5lciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKICAgICAgICBfX2V4dGVuZHMoT0xFbGVtZW50Q29udGFpbmVyLCBfc3VwZXIpOwogICAgICAgIGZ1bmN0aW9uIE9MRWxlbWVudENvbnRhaW5lcihjb250ZXh0LCBlbGVtZW50KSB7CiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGNvbnRleHQsIGVsZW1lbnQpIHx8IHRoaXM7CiAgICAgICAgICAgIF90aGlzLnN0YXJ0ID0gZWxlbWVudC5zdGFydDsKICAgICAgICAgICAgX3RoaXMucmV2ZXJzZWQgPSB0eXBlb2YgZWxlbWVudC5yZXZlcnNlZCA9PT0gJ2Jvb2xlYW4nICYmIGVsZW1lbnQucmV2ZXJzZWQgPT09IHRydWU7CiAgICAgICAgICAgIHJldHVybiBfdGhpczsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIE9MRWxlbWVudENvbnRhaW5lcjsKICAgIH0oRWxlbWVudENvbnRhaW5lcikpOwoKICAgIHZhciBDSEVDS0JPWF9CT1JERVJfUkFESVVTID0gWwogICAgICAgIHsKICAgICAgICAgICAgdHlwZTogMTUgLyogRElNRU5TSU9OX1RPS0VOICovLAogICAgICAgICAgICBmbGFnczogMCwKICAgICAgICAgICAgdW5pdDogJ3B4JywKICAgICAgICAgICAgbnVtYmVyOiAzCiAgICAgICAgfQogICAgXTsKICAgIHZhciBSQURJT19CT1JERVJfUkFESVVTID0gWwogICAgICAgIHsKICAgICAgICAgICAgdHlwZTogMTYgLyogUEVSQ0VOVEFHRV9UT0tFTiAqLywKICAgICAgICAgICAgZmxhZ3M6IDAsCiAgICAgICAgICAgIG51bWJlcjogNTAKICAgICAgICB9CiAgICBdOwogICAgdmFyIHJlZm9ybWF0SW5wdXRCb3VuZHMgPSBmdW5jdGlvbiAoYm91bmRzKSB7CiAgICAgICAgaWYgKGJvdW5kcy53aWR0aCA+IGJvdW5kcy5oZWlnaHQpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBCb3VuZHMoYm91bmRzLmxlZnQgKyAoYm91bmRzLndpZHRoIC0gYm91bmRzLmhlaWdodCkgLyAyLCBib3VuZHMudG9wLCBib3VuZHMuaGVpZ2h0LCBib3VuZHMuaGVpZ2h0KTsKICAgICAgICB9CiAgICAgICAgZWxzZSBpZiAoYm91bmRzLndpZHRoIDwgYm91bmRzLmhlaWdodCkgewogICAgICAgICAgICByZXR1cm4gbmV3IEJvdW5kcyhib3VuZHMubGVmdCwgYm91bmRzLnRvcCArIChib3VuZHMuaGVpZ2h0IC0gYm91bmRzLndpZHRoKSAvIDIsIGJvdW5kcy53aWR0aCwgYm91bmRzLndpZHRoKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGJvdW5kczsKICAgIH07CiAgICB2YXIgZ2V0SW5wdXRWYWx1ZSA9IGZ1bmN0aW9uIChub2RlKSB7CiAgICAgICAgdmFyIHZhbHVlID0gbm9kZS50eXBlID09PSBQQVNTV09SRCA/IG5ldyBBcnJheShub2RlLnZhbHVlLmxlbmd0aCArIDEpLmpvaW4oJ1x1MjAyMicpIDogbm9kZS52YWx1ZTsKICAgICAgICByZXR1cm4gdmFsdWUubGVuZ3RoID09PSAwID8gbm9kZS5wbGFjZWhvbGRlciB8fCAnJyA6IHZhbHVlOwogICAgfTsKICAgIHZhciBDSEVDS0JPWCA9ICdjaGVja2JveCc7CiAgICB2YXIgUkFESU8gPSAncmFkaW8nOwogICAgdmFyIFBBU1NXT1JEID0gJ3Bhc3N3b3JkJzsKICAgIHZhciBJTlBVVF9DT0xPUiA9IDB4MmEyYTJhZmY7CiAgICB2YXIgSW5wdXRFbGVtZW50Q29udGFpbmVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewogICAgICAgIF9fZXh0ZW5kcyhJbnB1dEVsZW1lbnRDb250YWluZXIsIF9zdXBlcik7CiAgICAgICAgZnVuY3Rpb24gSW5wdXRFbGVtZW50Q29udGFpbmVyKGNvbnRleHQsIGlucHV0KSB7CiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGNvbnRleHQsIGlucHV0KSB8fCB0aGlzOwogICAgICAgICAgICBfdGhpcy50eXBlID0gaW5wdXQudHlwZS50b0xvd2VyQ2FzZSgpOwogICAgICAgICAgICBfdGhpcy5jaGVja2VkID0gaW5wdXQuY2hlY2tlZDsKICAgICAgICAgICAgX3RoaXMudmFsdWUgPSBnZXRJbnB1dFZhbHVlKGlucHV0KTsKICAgICAgICAgICAgaWYgKF90aGlzLnR5cGUgPT09IENIRUNLQk9YIHx8IF90aGlzLnR5cGUgPT09IFJBRElPKSB7CiAgICAgICAgICAgICAgICBfdGhpcy5zdHlsZXMuYmFja2dyb3VuZENvbG9yID0gMHhkZWRlZGVmZjsKICAgICAgICAgICAgICAgIF90aGlzLnN0eWxlcy5ib3JkZXJUb3BDb2xvciA9CiAgICAgICAgICAgICAgICAgICAgX3RoaXMuc3R5bGVzLmJvcmRlclJpZ2h0Q29sb3IgPQogICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zdHlsZXMuYm9yZGVyQm90dG9tQ29sb3IgPQogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc3R5bGVzLmJvcmRlckxlZnRDb2xvciA9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHhhNWE1YTVmZjsKICAgICAgICAgICAgICAgIF90aGlzLnN0eWxlcy5ib3JkZXJUb3BXaWR0aCA9CiAgICAgICAgICAgICAgICAgICAgX3RoaXMuc3R5bGVzLmJvcmRlclJpZ2h0V2lkdGggPQogICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zdHlsZXMuYm9yZGVyQm90dG9tV2lkdGggPQogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc3R5bGVzLmJvcmRlckxlZnRXaWR0aCA9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMTsKICAgICAgICAgICAgICAgIF90aGlzLnN0eWxlcy5ib3JkZXJUb3BTdHlsZSA9CiAgICAgICAgICAgICAgICAgICAgX3RoaXMuc3R5bGVzLmJvcmRlclJpZ2h0U3R5bGUgPQogICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zdHlsZXMuYm9yZGVyQm90dG9tU3R5bGUgPQogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc3R5bGVzLmJvcmRlckxlZnRTdHlsZSA9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMSAvKiBTT0xJRCAqLzsKICAgICAgICAgICAgICAgIF90aGlzLnN0eWxlcy5iYWNrZ3JvdW5kQ2xpcCA9IFswIC8qIEJPUkRFUl9CT1ggKi9dOwogICAgICAgICAgICAgICAgX3RoaXMuc3R5bGVzLmJhY2tncm91bmRPcmlnaW4gPSBbMCAvKiBCT1JERVJfQk9YICovXTsKICAgICAgICAgICAgICAgIF90aGlzLmJvdW5kcyA9IHJlZm9ybWF0SW5wdXRCb3VuZHMoX3RoaXMuYm91bmRzKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBzd2l0Y2ggKF90aGlzLnR5cGUpIHsKICAgICAgICAgICAgICAgIGNhc2UgQ0hFQ0tCT1g6CiAgICAgICAgICAgICAgICAgICAgX3RoaXMuc3R5bGVzLmJvcmRlclRvcFJpZ2h0UmFkaXVzID0KICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc3R5bGVzLmJvcmRlclRvcExlZnRSYWRpdXMgPQogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc3R5bGVzLmJvcmRlckJvdHRvbVJpZ2h0UmFkaXVzID0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zdHlsZXMuYm9yZGVyQm90dG9tTGVmdFJhZGl1cyA9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENIRUNLQk9YX0JPUkRFUl9SQURJVVM7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlIFJBRElPOgogICAgICAgICAgICAgICAgICAgIF90aGlzLnN0eWxlcy5ib3JkZXJUb3BSaWdodFJhZGl1cyA9CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnN0eWxlcy5ib3JkZXJUb3BMZWZ0UmFkaXVzID0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnN0eWxlcy5ib3JkZXJCb3R0b21SaWdodFJhZGl1cyA9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc3R5bGVzLmJvcmRlckJvdHRvbUxlZnRSYWRpdXMgPQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSQURJT19CT1JERVJfUkFESVVTOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBfdGhpczsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIElucHV0RWxlbWVudENvbnRhaW5lcjsKICAgIH0oRWxlbWVudENvbnRhaW5lcikpOwoKICAgIHZhciBTZWxlY3RFbGVtZW50Q29udGFpbmVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewogICAgICAgIF9fZXh0ZW5kcyhTZWxlY3RFbGVtZW50Q29udGFpbmVyLCBfc3VwZXIpOwogICAgICAgIGZ1bmN0aW9uIFNlbGVjdEVsZW1lbnRDb250YWluZXIoY29udGV4dCwgZWxlbWVudCkgewogICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBjb250ZXh0LCBlbGVtZW50KSB8fCB0aGlzOwogICAgICAgICAgICB2YXIgb3B0aW9uID0gZWxlbWVudC5vcHRpb25zW2VsZW1lbnQuc2VsZWN0ZWRJbmRleCB8fCAwXTsKICAgICAgICAgICAgX3RoaXMudmFsdWUgPSBvcHRpb24gPyBvcHRpb24udGV4dCB8fCAnJyA6ICcnOwogICAgICAgICAgICByZXR1cm4gX3RoaXM7CiAgICAgICAgfQogICAgICAgIHJldHVybiBTZWxlY3RFbGVtZW50Q29udGFpbmVyOwogICAgfShFbGVtZW50Q29udGFpbmVyKSk7CgogICAgdmFyIFRleHRhcmVhRWxlbWVudENvbnRhaW5lciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKICAgICAgICBfX2V4dGVuZHMoVGV4dGFyZWFFbGVtZW50Q29udGFpbmVyLCBfc3VwZXIpOwogICAgICAgIGZ1bmN0aW9uIFRleHRhcmVhRWxlbWVudENvbnRhaW5lcihjb250ZXh0LCBlbGVtZW50KSB7CiAgICAgICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGNvbnRleHQsIGVsZW1lbnQpIHx8IHRoaXM7CiAgICAgICAgICAgIF90aGlzLnZhbHVlID0gZWxlbWVudC52YWx1ZTsKICAgICAgICAgICAgcmV0dXJuIF90aGlzOwogICAgICAgIH0KICAgICAgICByZXR1cm4gVGV4dGFyZWFFbGVtZW50Q29udGFpbmVyOwogICAgfShFbGVtZW50Q29udGFpbmVyKSk7CgogICAgdmFyIElGcmFtZUVsZW1lbnRDb250YWluZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CiAgICAgICAgX19leHRlbmRzKElGcmFtZUVsZW1lbnRDb250YWluZXIsIF9zdXBlcik7CiAgICAgICAgZnVuY3Rpb24gSUZyYW1lRWxlbWVudENvbnRhaW5lcihjb250ZXh0LCBpZnJhbWUpIHsKICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgY29udGV4dCwgaWZyYW1lKSB8fCB0aGlzOwogICAgICAgICAgICBfdGhpcy5zcmMgPSBpZnJhbWUuc3JjOwogICAgICAgICAgICBfdGhpcy53aWR0aCA9IHBhcnNlSW50KGlmcmFtZS53aWR0aCwgMTApIHx8IDA7CiAgICAgICAgICAgIF90aGlzLmhlaWdodCA9IHBhcnNlSW50KGlmcmFtZS5oZWlnaHQsIDEwKSB8fCAwOwogICAgICAgICAgICBfdGhpcy5iYWNrZ3JvdW5kQ29sb3IgPSBfdGhpcy5zdHlsZXMuYmFja2dyb3VuZENvbG9yOwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgaWYgKGlmcmFtZS5jb250ZW50V2luZG93ICYmCiAgICAgICAgICAgICAgICAgICAgaWZyYW1lLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQgJiYKICAgICAgICAgICAgICAgICAgICBpZnJhbWUuY29udGVudFdpbmRvdy5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpIHsKICAgICAgICAgICAgICAgICAgICBfdGhpcy50cmVlID0gcGFyc2VUcmVlKGNvbnRleHQsIGlmcmFtZS5jb250ZW50V2luZG93LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudCk7CiAgICAgICAgICAgICAgICAgICAgLy8gaHR0cDovL3d3dy53My5vcmcvVFIvY3NzMy1iYWNrZ3JvdW5kLyNzcGVjaWFsLWJhY2tncm91bmRzCiAgICAgICAgICAgICAgICAgICAgdmFyIGRvY3VtZW50QmFja2dyb3VuZENvbG9yID0gaWZyYW1lLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50CiAgICAgICAgICAgICAgICAgICAgICAgID8gcGFyc2VDb2xvcihjb250ZXh0LCBnZXRDb21wdXRlZFN0eWxlKGlmcmFtZS5jb250ZW50V2luZG93LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkuYmFja2dyb3VuZENvbG9yKQogICAgICAgICAgICAgICAgICAgICAgICA6IENPTE9SUy5UUkFOU1BBUkVOVDsKICAgICAgICAgICAgICAgICAgICB2YXIgYm9keUJhY2tncm91bmRDb2xvciA9IGlmcmFtZS5jb250ZW50V2luZG93LmRvY3VtZW50LmJvZHkKICAgICAgICAgICAgICAgICAgICAgICAgPyBwYXJzZUNvbG9yKGNvbnRleHQsIGdldENvbXB1dGVkU3R5bGUoaWZyYW1lLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQuYm9keSkuYmFja2dyb3VuZENvbG9yKQogICAgICAgICAgICAgICAgICAgICAgICA6IENPTE9SUy5UUkFOU1BBUkVOVDsKICAgICAgICAgICAgICAgICAgICBfdGhpcy5iYWNrZ3JvdW5kQ29sb3IgPSBpc1RyYW5zcGFyZW50KGRvY3VtZW50QmFja2dyb3VuZENvbG9yKQogICAgICAgICAgICAgICAgICAgICAgICA/IGlzVHJhbnNwYXJlbnQoYm9keUJhY2tncm91bmRDb2xvcikKICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gX3RoaXMuc3R5bGVzLmJhY2tncm91bmRDb2xvcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBib2R5QmFja2dyb3VuZENvbG9yCiAgICAgICAgICAgICAgICAgICAgICAgIDogZG9jdW1lbnRCYWNrZ3JvdW5kQ29sb3I7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY2F0Y2ggKGUpIHsgfQogICAgICAgICAgICByZXR1cm4gX3RoaXM7CiAgICAgICAgfQogICAgICAgIHJldHVybiBJRnJhbWVFbGVtZW50Q29udGFpbmVyOwogICAgfShFbGVtZW50Q29udGFpbmVyKSk7CgogICAgdmFyIExJU1RfT1dORVJTID0gWydPTCcsICdVTCcsICdNRU5VJ107CiAgICB2YXIgcGFyc2VOb2RlVHJlZSA9IGZ1bmN0aW9uIChjb250ZXh0LCBub2RlLCBwYXJlbnQsIHJvb3QpIHsKICAgICAgICBmb3IgKHZhciBjaGlsZE5vZGUgPSBub2RlLmZpcnN0Q2hpbGQsIG5leHROb2RlID0gdm9pZCAwOyBjaGlsZE5vZGU7IGNoaWxkTm9kZSA9IG5leHROb2RlKSB7CiAgICAgICAgICAgIG5leHROb2RlID0gY2hpbGROb2RlLm5leHRTaWJsaW5nOwogICAgICAgICAgICBpZiAoaXNUZXh0Tm9kZShjaGlsZE5vZGUpICYmIGNoaWxkTm9kZS5kYXRhLnRyaW0oKS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICBwYXJlbnQudGV4dE5vZGVzLnB1c2gobmV3IFRleHRDb250YWluZXIoY29udGV4dCwgY2hpbGROb2RlLCBwYXJlbnQuc3R5bGVzKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAoaXNFbGVtZW50Tm9kZShjaGlsZE5vZGUpKSB7CiAgICAgICAgICAgICAgICBpZiAoaXNTbG90RWxlbWVudChjaGlsZE5vZGUpICYmIGNoaWxkTm9kZS5hc3NpZ25lZE5vZGVzKSB7CiAgICAgICAgICAgICAgICAgICAgY2hpbGROb2RlLmFzc2lnbmVkTm9kZXMoKS5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZE5vZGUpIHsgcmV0dXJuIHBhcnNlTm9kZVRyZWUoY29udGV4dCwgY2hpbGROb2RlLCBwYXJlbnQsIHJvb3QpOyB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIHZhciBjb250YWluZXIgPSBjcmVhdGVDb250YWluZXIoY29udGV4dCwgY2hpbGROb2RlKTsKICAgICAgICAgICAgICAgICAgICBpZiAoY29udGFpbmVyLnN0eWxlcy5pc1Zpc2libGUoKSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3JlYXRlc1JlYWxTdGFja2luZ0NvbnRleHQoY2hpbGROb2RlLCBjb250YWluZXIsIHJvb3QpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXIuZmxhZ3MgfD0gNCAvKiBDUkVBVEVTX1JFQUxfU1RBQ0tJTkdfQ09OVEVYVCAqLzsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChjcmVhdGVzU3RhY2tpbmdDb250ZXh0KGNvbnRhaW5lci5zdHlsZXMpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXIuZmxhZ3MgfD0gMiAvKiBDUkVBVEVTX1NUQUNLSU5HX0NPTlRFWFQgKi87CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKExJU1RfT1dORVJTLmluZGV4T2YoY2hpbGROb2RlLnRhZ05hbWUpICE9PSAtMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLmZsYWdzIHw9IDggLyogSVNfTElTVF9PV05FUiAqLzsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQuZWxlbWVudHMucHVzaChjb250YWluZXIpOwogICAgICAgICAgICAgICAgICAgICAgICBjaGlsZE5vZGUuc2xvdDsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoaWxkTm9kZS5zaGFkb3dSb290KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZU5vZGVUcmVlKGNvbnRleHQsIGNoaWxkTm9kZS5zaGFkb3dSb290LCBjb250YWluZXIsIHJvb3QpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFpc1RleHRhcmVhRWxlbWVudChjaGlsZE5vZGUpICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAhaXNTVkdFbGVtZW50KGNoaWxkTm9kZSkgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICFpc1NlbGVjdEVsZW1lbnQoY2hpbGROb2RlKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VOb2RlVHJlZShjb250ZXh0LCBjaGlsZE5vZGUsIGNvbnRhaW5lciwgcm9vdCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9OwogICAgdmFyIGNyZWF0ZUNvbnRhaW5lciA9IGZ1bmN0aW9uIChjb250ZXh0LCBlbGVtZW50KSB7CiAgICAgICAgaWYgKGlzSW1hZ2VFbGVtZW50KGVsZW1lbnQpKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgSW1hZ2VFbGVtZW50Q29udGFpbmVyKGNvbnRleHQsIGVsZW1lbnQpOwogICAgICAgIH0KICAgICAgICBpZiAoaXNDYW52YXNFbGVtZW50KGVsZW1lbnQpKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgQ2FudmFzRWxlbWVudENvbnRhaW5lcihjb250ZXh0LCBlbGVtZW50KTsKICAgICAgICB9CiAgICAgICAgaWYgKGlzU1ZHRWxlbWVudChlbGVtZW50KSkgewogICAgICAgICAgICByZXR1cm4gbmV3IFNWR0VsZW1lbnRDb250YWluZXIoY29udGV4dCwgZWxlbWVudCk7CiAgICAgICAgfQogICAgICAgIGlmIChpc0xJRWxlbWVudChlbGVtZW50KSkgewogICAgICAgICAgICByZXR1cm4gbmV3IExJRWxlbWVudENvbnRhaW5lcihjb250ZXh0LCBlbGVtZW50KTsKICAgICAgICB9CiAgICAgICAgaWYgKGlzT0xFbGVtZW50KGVsZW1lbnQpKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgT0xFbGVtZW50Q29udGFpbmVyKGNvbnRleHQsIGVsZW1lbnQpOwogICAgICAgIH0KICAgICAgICBpZiAoaXNJbnB1dEVsZW1lbnQoZWxlbWVudCkpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBJbnB1dEVsZW1lbnRDb250YWluZXIoY29udGV4dCwgZWxlbWVudCk7CiAgICAgICAgfQogICAgICAgIGlmIChpc1NlbGVjdEVsZW1lbnQoZWxlbWVudCkpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBTZWxlY3RFbGVtZW50Q29udGFpbmVyKGNvbnRleHQsIGVsZW1lbnQpOwogICAgICAgIH0KICAgICAgICBpZiAoaXNUZXh0YXJlYUVsZW1lbnQoZWxlbWVudCkpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBUZXh0YXJlYUVsZW1lbnRDb250YWluZXIoY29udGV4dCwgZWxlbWVudCk7CiAgICAgICAgfQogICAgICAgIGlmIChpc0lGcmFtZUVsZW1lbnQoZWxlbWVudCkpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBJRnJhbWVFbGVtZW50Q29udGFpbmVyKGNvbnRleHQsIGVsZW1lbnQpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gbmV3IEVsZW1lbnRDb250YWluZXIoY29udGV4dCwgZWxlbWVudCk7CiAgICB9OwogICAgdmFyIHBhcnNlVHJlZSA9IGZ1bmN0aW9uIChjb250ZXh0LCBlbGVtZW50KSB7CiAgICAgICAgdmFyIGNvbnRhaW5lciA9IGNyZWF0ZUNvbnRhaW5lcihjb250ZXh0LCBlbGVtZW50KTsKICAgICAgICBjb250YWluZXIuZmxhZ3MgfD0gNCAvKiBDUkVBVEVTX1JFQUxfU1RBQ0tJTkdfQ09OVEVYVCAqLzsKICAgICAgICBwYXJzZU5vZGVUcmVlKGNvbnRleHQsIGVsZW1lbnQsIGNvbnRhaW5lciwgY29udGFpbmVyKTsKICAgICAgICByZXR1cm4gY29udGFpbmVyOwogICAgfTsKICAgIHZhciBjcmVhdGVzUmVhbFN0YWNraW5nQ29udGV4dCA9IGZ1bmN0aW9uIChub2RlLCBjb250YWluZXIsIHJvb3QpIHsKICAgICAgICByZXR1cm4gKGNvbnRhaW5lci5zdHlsZXMuaXNQb3NpdGlvbmVkV2l0aFpJbmRleCgpIHx8CiAgICAgICAgICAgIGNvbnRhaW5lci5zdHlsZXMub3BhY2l0eSA8IDEgfHwKICAgICAgICAgICAgY29udGFpbmVyLnN0eWxlcy5pc1RyYW5zZm9ybWVkKCkgfHwKICAgICAgICAgICAgKGlzQm9keUVsZW1lbnQobm9kZSkgJiYgcm9vdC5zdHlsZXMuaXNUcmFuc3BhcmVudCgpKSk7CiAgICB9OwogICAgdmFyIGNyZWF0ZXNTdGFja2luZ0NvbnRleHQgPSBmdW5jdGlvbiAoc3R5bGVzKSB7IHJldHVybiBzdHlsZXMuaXNQb3NpdGlvbmVkKCkgfHwgc3R5bGVzLmlzRmxvYXRpbmcoKTsgfTsKICAgIHZhciBpc1RleHROb2RlID0gZnVuY3Rpb24gKG5vZGUpIHsgcmV0dXJuIG5vZGUubm9kZVR5cGUgPT09IE5vZGUuVEVYVF9OT0RFOyB9OwogICAgdmFyIGlzRWxlbWVudE5vZGUgPSBmdW5jdGlvbiAobm9kZSkgeyByZXR1cm4gbm9kZS5ub2RlVHlwZSA9PT0gTm9kZS5FTEVNRU5UX05PREU7IH07CiAgICB2YXIgaXNIVE1MRWxlbWVudE5vZGUgPSBmdW5jdGlvbiAobm9kZSkgewogICAgICAgIHJldHVybiBpc0VsZW1lbnROb2RlKG5vZGUpICYmIHR5cGVvZiBub2RlLnN0eWxlICE9PSAndW5kZWZpbmVkJyAmJiAhaXNTVkdFbGVtZW50Tm9kZShub2RlKTsKICAgIH07CiAgICB2YXIgaXNTVkdFbGVtZW50Tm9kZSA9IGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgcmV0dXJuIHR5cGVvZiBlbGVtZW50LmNsYXNzTmFtZSA9PT0gJ29iamVjdCc7CiAgICB9OwogICAgdmFyIGlzTElFbGVtZW50ID0gZnVuY3Rpb24gKG5vZGUpIHsgcmV0dXJuIG5vZGUudGFnTmFtZSA9PT0gJ0xJJzsgfTsKICAgIHZhciBpc09MRWxlbWVudCA9IGZ1bmN0aW9uIChub2RlKSB7IHJldHVybiBub2RlLnRhZ05hbWUgPT09ICdPTCc7IH07CiAgICB2YXIgaXNJbnB1dEVsZW1lbnQgPSBmdW5jdGlvbiAobm9kZSkgeyByZXR1cm4gbm9kZS50YWdOYW1lID09PSAnSU5QVVQnOyB9OwogICAgdmFyIGlzSFRNTEVsZW1lbnQgPSBmdW5jdGlvbiAobm9kZSkgeyByZXR1cm4gbm9kZS50YWdOYW1lID09PSAnSFRNTCc7IH07CiAgICB2YXIgaXNTVkdFbGVtZW50ID0gZnVuY3Rpb24gKG5vZGUpIHsgcmV0dXJuIG5vZGUudGFnTmFtZSA9PT0gJ3N2Zyc7IH07CiAgICB2YXIgaXNCb2R5RWxlbWVudCA9IGZ1bmN0aW9uIChub2RlKSB7IHJldHVybiBub2RlLnRhZ05hbWUgPT09ICdCT0RZJzsgfTsKICAgIHZhciBpc0NhbnZhc0VsZW1lbnQgPSBmdW5jdGlvbiAobm9kZSkgeyByZXR1cm4gbm9kZS50YWdOYW1lID09PSAnQ0FOVkFTJzsgfTsKICAgIHZhciBpc1ZpZGVvRWxlbWVudCA9IGZ1bmN0aW9uIChub2RlKSB7IHJldHVybiBub2RlLnRhZ05hbWUgPT09ICdWSURFTyc7IH07CiAgICB2YXIgaXNJbWFnZUVsZW1lbnQgPSBmdW5jdGlvbiAobm9kZSkgeyByZXR1cm4gbm9kZS50YWdOYW1lID09PSAnSU1HJzsgfTsKICAgIHZhciBpc0lGcmFtZUVsZW1lbnQgPSBmdW5jdGlvbiAobm9kZSkgeyByZXR1cm4gbm9kZS50YWdOYW1lID09PSAnSUZSQU1FJzsgfTsKICAgIHZhciBpc1N0eWxlRWxlbWVudCA9IGZ1bmN0aW9uIChub2RlKSB7IHJldHVybiBub2RlLnRhZ05hbWUgPT09ICdTVFlMRSc7IH07CiAgICB2YXIgaXNTY3JpcHRFbGVtZW50ID0gZnVuY3Rpb24gKG5vZGUpIHsgcmV0dXJuIG5vZGUudGFnTmFtZSA9PT0gJ1NDUklQVCc7IH07CiAgICB2YXIgaXNUZXh0YXJlYUVsZW1lbnQgPSBmdW5jdGlvbiAobm9kZSkgeyByZXR1cm4gbm9kZS50YWdOYW1lID09PSAnVEVYVEFSRUEnOyB9OwogICAgdmFyIGlzU2VsZWN0RWxlbWVudCA9IGZ1bmN0aW9uIChub2RlKSB7IHJldHVybiBub2RlLnRhZ05hbWUgPT09ICdTRUxFQ1QnOyB9OwogICAgdmFyIGlzU2xvdEVsZW1lbnQgPSBmdW5jdGlvbiAobm9kZSkgeyByZXR1cm4gbm9kZS50YWdOYW1lID09PSAnU0xPVCc7IH07CiAgICAvLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9jdXN0b20tZWxlbWVudHMuaHRtbCN2YWxpZC1jdXN0b20tZWxlbWVudC1uYW1lCiAgICB2YXIgaXNDdXN0b21FbGVtZW50ID0gZnVuY3Rpb24gKG5vZGUpIHsgcmV0dXJuIG5vZGUudGFnTmFtZS5pbmRleE9mKCctJykgPiAwOyB9OwoKICAgIHZhciBDb3VudGVyU3RhdGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CiAgICAgICAgZnVuY3Rpb24gQ291bnRlclN0YXRlKCkgewogICAgICAgICAgICB0aGlzLmNvdW50ZXJzID0ge307CiAgICAgICAgfQogICAgICAgIENvdW50ZXJTdGF0ZS5wcm90b3R5cGUuZ2V0Q291bnRlclZhbHVlID0gZnVuY3Rpb24gKG5hbWUpIHsKICAgICAgICAgICAgdmFyIGNvdW50ZXIgPSB0aGlzLmNvdW50ZXJzW25hbWVdOwogICAgICAgICAgICBpZiAoY291bnRlciAmJiBjb3VudGVyLmxlbmd0aCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGNvdW50ZXJbY291bnRlci5sZW5ndGggLSAxXTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gMTsKICAgICAgICB9OwogICAgICAgIENvdW50ZXJTdGF0ZS5wcm90b3R5cGUuZ2V0Q291bnRlclZhbHVlcyA9IGZ1bmN0aW9uIChuYW1lKSB7CiAgICAgICAgICAgIHZhciBjb3VudGVyID0gdGhpcy5jb3VudGVyc1tuYW1lXTsKICAgICAgICAgICAgcmV0dXJuIGNvdW50ZXIgPyBjb3VudGVyIDogW107CiAgICAgICAgfTsKICAgICAgICBDb3VudGVyU3RhdGUucHJvdG90eXBlLnBvcCA9IGZ1bmN0aW9uIChjb3VudGVycykgewogICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICAgICAgICBjb3VudGVycy5mb3JFYWNoKGZ1bmN0aW9uIChjb3VudGVyKSB7IHJldHVybiBfdGhpcy5jb3VudGVyc1tjb3VudGVyXS5wb3AoKTsgfSk7CiAgICAgICAgfTsKICAgICAgICBDb3VudGVyU3RhdGUucHJvdG90eXBlLnBhcnNlID0gZnVuY3Rpb24gKHN0eWxlKSB7CiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgICAgICAgIHZhciBjb3VudGVySW5jcmVtZW50ID0gc3R5bGUuY291bnRlckluY3JlbWVudDsKICAgICAgICAgICAgdmFyIGNvdW50ZXJSZXNldCA9IHN0eWxlLmNvdW50ZXJSZXNldDsKICAgICAgICAgICAgdmFyIGNhblJlc2V0ID0gdHJ1ZTsKICAgICAgICAgICAgaWYgKGNvdW50ZXJJbmNyZW1lbnQgIT09IG51bGwpIHsKICAgICAgICAgICAgICAgIGNvdW50ZXJJbmNyZW1lbnQuZm9yRWFjaChmdW5jdGlvbiAoZW50cnkpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgY291bnRlciA9IF90aGlzLmNvdW50ZXJzW2VudHJ5LmNvdW50ZXJdOwogICAgICAgICAgICAgICAgICAgIGlmIChjb3VudGVyICYmIGVudHJ5LmluY3JlbWVudCAhPT0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICBjYW5SZXNldCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNvdW50ZXIubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudGVyLnB1c2goMSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgY291bnRlcltNYXRoLm1heCgwLCBjb3VudGVyLmxlbmd0aCAtIDEpXSArPSBlbnRyeS5pbmNyZW1lbnQ7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIGNvdW50ZXJOYW1lcyA9IFtdOwogICAgICAgICAgICBpZiAoY2FuUmVzZXQpIHsKICAgICAgICAgICAgICAgIGNvdW50ZXJSZXNldC5mb3JFYWNoKGZ1bmN0aW9uIChlbnRyeSkgewogICAgICAgICAgICAgICAgICAgIHZhciBjb3VudGVyID0gX3RoaXMuY291bnRlcnNbZW50cnkuY291bnRlcl07CiAgICAgICAgICAgICAgICAgICAgY291bnRlck5hbWVzLnB1c2goZW50cnkuY291bnRlcik7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFjb3VudGVyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50ZXIgPSBfdGhpcy5jb3VudGVyc1tlbnRyeS5jb3VudGVyXSA9IFtdOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBjb3VudGVyLnB1c2goZW50cnkucmVzZXQpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGNvdW50ZXJOYW1lczsKICAgICAgICB9OwogICAgICAgIHJldHVybiBDb3VudGVyU3RhdGU7CiAgICB9KCkpOwogICAgdmFyIFJPTUFOX1VQUEVSID0gewogICAgICAgIGludGVnZXJzOiBbMTAwMCwgOTAwLCA1MDAsIDQwMCwgMTAwLCA5MCwgNTAsIDQwLCAxMCwgOSwgNSwgNCwgMV0sCiAgICAgICAgdmFsdWVzOiBbJ00nLCAnQ00nLCAnRCcsICdDRCcsICdDJywgJ1hDJywgJ0wnLCAnWEwnLCAnWCcsICdJWCcsICdWJywgJ0lWJywgJ0knXQogICAgfTsKICAgIHZhciBBUk1FTklBTiA9IHsKICAgICAgICBpbnRlZ2VyczogWwogICAgICAgICAgICA5MDAwLCA4MDAwLCA3MDAwLCA2MDAwLCA1MDAwLCA0MDAwLCAzMDAwLCAyMDAwLCAxMDAwLCA5MDAsIDgwMCwgNzAwLCA2MDAsIDUwMCwgNDAwLCAzMDAsIDIwMCwgMTAwLCA5MCwgODAsIDcwLAogICAgICAgICAgICA2MCwgNTAsIDQwLCAzMCwgMjAsIDEwLCA5LCA4LCA3LCA2LCA1LCA0LCAzLCAyLCAxCiAgICAgICAgXSwKICAgICAgICB2YWx1ZXM6IFsKICAgICAgICAgICAgJ9WUJywKICAgICAgICAgICAgJ9WTJywKICAgICAgICAgICAgJ9WSJywKICAgICAgICAgICAgJ9WRJywKICAgICAgICAgICAgJ9WQJywKICAgICAgICAgICAgJ9WPJywKICAgICAgICAgICAgJ9WOJywKICAgICAgICAgICAgJ9WNJywKICAgICAgICAgICAgJ9WMJywKICAgICAgICAgICAgJ9WLJywKICAgICAgICAgICAgJ9WKJywKICAgICAgICAgICAgJ9WJJywKICAgICAgICAgICAgJ9WIJywKICAgICAgICAgICAgJ9WHJywKICAgICAgICAgICAgJ9WGJywKICAgICAgICAgICAgJ9WFJywKICAgICAgICAgICAgJ9WEJywKICAgICAgICAgICAgJ9WDJywKICAgICAgICAgICAgJ9WCJywKICAgICAgICAgICAgJ9WBJywKICAgICAgICAgICAgJ9WAJywKICAgICAgICAgICAgJ9S/JywKICAgICAgICAgICAgJ9S+JywKICAgICAgICAgICAgJ9S9JywKICAgICAgICAgICAgJ9S8JywKICAgICAgICAgICAgJ9S7JywKICAgICAgICAgICAgJ9S6JywKICAgICAgICAgICAgJ9S5JywKICAgICAgICAgICAgJ9S4JywKICAgICAgICAgICAgJ9S3JywKICAgICAgICAgICAgJ9S2JywKICAgICAgICAgICAgJ9S1JywKICAgICAgICAgICAgJ9S0JywKICAgICAgICAgICAgJ9SzJywKICAgICAgICAgICAgJ9SyJywKICAgICAgICAgICAgJ9SxJwogICAgICAgIF0KICAgIH07CiAgICB2YXIgSEVCUkVXID0gewogICAgICAgIGludGVnZXJzOiBbCiAgICAgICAgICAgIDEwMDAwLCA5MDAwLCA4MDAwLCA3MDAwLCA2MDAwLCA1MDAwLCA0MDAwLCAzMDAwLCAyMDAwLCAxMDAwLCA0MDAsIDMwMCwgMjAwLCAxMDAsIDkwLCA4MCwgNzAsIDYwLCA1MCwgNDAsIDMwLCAyMCwKICAgICAgICAgICAgMTksIDE4LCAxNywgMTYsIDE1LCAxMCwgOSwgOCwgNywgNiwgNSwgNCwgMywgMiwgMQogICAgICAgIF0sCiAgICAgICAgdmFsdWVzOiBbCiAgICAgICAgICAgICfXmdezJywKICAgICAgICAgICAgJ9eY17MnLAogICAgICAgICAgICAn15fXsycsCiAgICAgICAgICAgICfXltezJywKICAgICAgICAgICAgJ9eV17MnLAogICAgICAgICAgICAn15TXsycsCiAgICAgICAgICAgICfXk9ezJywKICAgICAgICAgICAgJ9eS17MnLAogICAgICAgICAgICAn15HXsycsCiAgICAgICAgICAgICfXkNezJywKICAgICAgICAgICAgJ9eqJywKICAgICAgICAgICAgJ9epJywKICAgICAgICAgICAgJ9eoJywKICAgICAgICAgICAgJ9enJywKICAgICAgICAgICAgJ9emJywKICAgICAgICAgICAgJ9ekJywKICAgICAgICAgICAgJ9eiJywKICAgICAgICAgICAgJ9ehJywKICAgICAgICAgICAgJ9egJywKICAgICAgICAgICAgJ9eeJywKICAgICAgICAgICAgJ9ecJywKICAgICAgICAgICAgJ9ebJywKICAgICAgICAgICAgJ9eZ15gnLAogICAgICAgICAgICAn15nXlycsCiAgICAgICAgICAgICfXmdeWJywKICAgICAgICAgICAgJ9eY15YnLAogICAgICAgICAgICAn15jXlScsCiAgICAgICAgICAgICfXmScsCiAgICAgICAgICAgICfXmCcsCiAgICAgICAgICAgICfXlycsCiAgICAgICAgICAgICfXlicsCiAgICAgICAgICAgICfXlScsCiAgICAgICAgICAgICfXlCcsCiAgICAgICAgICAgICfXkycsCiAgICAgICAgICAgICfXkicsCiAgICAgICAgICAgICfXkScsCiAgICAgICAgICAgICfXkCcKICAgICAgICBdCiAgICB9OwogICAgdmFyIEdFT1JHSUFOID0gewogICAgICAgIGludGVnZXJzOiBbCiAgICAgICAgICAgIDEwMDAwLCA5MDAwLCA4MDAwLCA3MDAwLCA2MDAwLCA1MDAwLCA0MDAwLCAzMDAwLCAyMDAwLCAxMDAwLCA5MDAsIDgwMCwgNzAwLCA2MDAsIDUwMCwgNDAwLCAzMDAsIDIwMCwgMTAwLCA5MCwKICAgICAgICAgICAgODAsIDcwLCA2MCwgNTAsIDQwLCAzMCwgMjAsIDEwLCA5LCA4LCA3LCA2LCA1LCA0LCAzLCAyLCAxCiAgICAgICAgXSwKICAgICAgICB2YWx1ZXM6IFsKICAgICAgICAgICAgJ+GDtScsCiAgICAgICAgICAgICfhg7AnLAogICAgICAgICAgICAn4YOvJywKICAgICAgICAgICAgJ+GDtCcsCiAgICAgICAgICAgICfhg64nLAogICAgICAgICAgICAn4YOtJywKICAgICAgICAgICAgJ+GDrCcsCiAgICAgICAgICAgICfhg6snLAogICAgICAgICAgICAn4YOqJywKICAgICAgICAgICAgJ+GDqScsCiAgICAgICAgICAgICfhg6gnLAogICAgICAgICAgICAn4YOnJywKICAgICAgICAgICAgJ+GDpicsCiAgICAgICAgICAgICfhg6UnLAogICAgICAgICAgICAn4YOkJywKICAgICAgICAgICAgJ+GDsycsCiAgICAgICAgICAgICfhg6InLAogICAgICAgICAgICAn4YOhJywKICAgICAgICAgICAgJ+GDoCcsCiAgICAgICAgICAgICfhg58nLAogICAgICAgICAgICAn4YOeJywKICAgICAgICAgICAgJ+GDnScsCiAgICAgICAgICAgICfhg7InLAogICAgICAgICAgICAn4YOcJywKICAgICAgICAgICAgJ+GDmycsCiAgICAgICAgICAgICfhg5onLAogICAgICAgICAgICAn4YOZJywKICAgICAgICAgICAgJ+GDmCcsCiAgICAgICAgICAgICfhg5cnLAogICAgICAgICAgICAn4YOxJywKICAgICAgICAgICAgJ+GDlicsCiAgICAgICAgICAgICfhg5UnLAogICAgICAgICAgICAn4YOUJywKICAgICAgICAgICAgJ+GDkycsCiAgICAgICAgICAgICfhg5InLAogICAgICAgICAgICAn4YORJywKICAgICAgICAgICAgJ+GDkCcKICAgICAgICBdCiAgICB9OwogICAgdmFyIGNyZWF0ZUFkZGl0aXZlQ291bnRlciA9IGZ1bmN0aW9uICh2YWx1ZSwgbWluLCBtYXgsIHN5bWJvbHMsIGZhbGxiYWNrLCBzdWZmaXgpIHsKICAgICAgICBpZiAodmFsdWUgPCBtaW4gfHwgdmFsdWUgPiBtYXgpIHsKICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZUNvdW50ZXJUZXh0KHZhbHVlLCBmYWxsYmFjaywgc3VmZml4Lmxlbmd0aCA+IDApOwogICAgICAgIH0KICAgICAgICByZXR1cm4gKHN5bWJvbHMuaW50ZWdlcnMucmVkdWNlKGZ1bmN0aW9uIChzdHJpbmcsIGludGVnZXIsIGluZGV4KSB7CiAgICAgICAgICAgIHdoaWxlICh2YWx1ZSA+PSBpbnRlZ2VyKSB7CiAgICAgICAgICAgICAgICB2YWx1ZSAtPSBpbnRlZ2VyOwogICAgICAgICAgICAgICAgc3RyaW5nICs9IHN5bWJvbHMudmFsdWVzW2luZGV4XTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gc3RyaW5nOwogICAgICAgIH0sICcnKSArIHN1ZmZpeCk7CiAgICB9OwogICAgdmFyIGNyZWF0ZUNvdW50ZXJTdHlsZVdpdGhTeW1ib2xSZXNvbHZlciA9IGZ1bmN0aW9uICh2YWx1ZSwgY29kZVBvaW50UmFuZ2VMZW5ndGgsIGlzTnVtZXJpYywgcmVzb2x2ZXIpIHsKICAgICAgICB2YXIgc3RyaW5nID0gJyc7CiAgICAgICAgZG8gewogICAgICAgICAgICBpZiAoIWlzTnVtZXJpYykgewogICAgICAgICAgICAgICAgdmFsdWUtLTsKICAgICAgICAgICAgfQogICAgICAgICAgICBzdHJpbmcgPSByZXNvbHZlcih2YWx1ZSkgKyBzdHJpbmc7CiAgICAgICAgICAgIHZhbHVlIC89IGNvZGVQb2ludFJhbmdlTGVuZ3RoOwogICAgICAgIH0gd2hpbGUgKHZhbHVlICogY29kZVBvaW50UmFuZ2VMZW5ndGggPj0gY29kZVBvaW50UmFuZ2VMZW5ndGgpOwogICAgICAgIHJldHVybiBzdHJpbmc7CiAgICB9OwogICAgdmFyIGNyZWF0ZUNvdW50ZXJTdHlsZUZyb21SYW5nZSA9IGZ1bmN0aW9uICh2YWx1ZSwgY29kZVBvaW50UmFuZ2VTdGFydCwgY29kZVBvaW50UmFuZ2VFbmQsIGlzTnVtZXJpYywgc3VmZml4KSB7CiAgICAgICAgdmFyIGNvZGVQb2ludFJhbmdlTGVuZ3RoID0gY29kZVBvaW50UmFuZ2VFbmQgLSBjb2RlUG9pbnRSYW5nZVN0YXJ0ICsgMTsKICAgICAgICByZXR1cm4gKCh2YWx1ZSA8IDAgPyAnLScgOiAnJykgKwogICAgICAgICAgICAoY3JlYXRlQ291bnRlclN0eWxlV2l0aFN5bWJvbFJlc29sdmVyKE1hdGguYWJzKHZhbHVlKSwgY29kZVBvaW50UmFuZ2VMZW5ndGgsIGlzTnVtZXJpYywgZnVuY3Rpb24gKGNvZGVQb2ludCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGZyb21Db2RlUG9pbnQkMShNYXRoLmZsb29yKGNvZGVQb2ludCAlIGNvZGVQb2ludFJhbmdlTGVuZ3RoKSArIGNvZGVQb2ludFJhbmdlU3RhcnQpOwogICAgICAgICAgICB9KSArCiAgICAgICAgICAgICAgICBzdWZmaXgpKTsKICAgIH07CiAgICB2YXIgY3JlYXRlQ291bnRlclN0eWxlRnJvbVN5bWJvbHMgPSBmdW5jdGlvbiAodmFsdWUsIHN5bWJvbHMsIHN1ZmZpeCkgewogICAgICAgIGlmIChzdWZmaXggPT09IHZvaWQgMCkgeyBzdWZmaXggPSAnLiAnOyB9CiAgICAgICAgdmFyIGNvZGVQb2ludFJhbmdlTGVuZ3RoID0gc3ltYm9scy5sZW5ndGg7CiAgICAgICAgcmV0dXJuIChjcmVhdGVDb3VudGVyU3R5bGVXaXRoU3ltYm9sUmVzb2x2ZXIoTWF0aC5hYnModmFsdWUpLCBjb2RlUG9pbnRSYW5nZUxlbmd0aCwgZmFsc2UsIGZ1bmN0aW9uIChjb2RlUG9pbnQpIHsgcmV0dXJuIHN5bWJvbHNbTWF0aC5mbG9vcihjb2RlUG9pbnQgJSBjb2RlUG9pbnRSYW5nZUxlbmd0aCldOyB9KSArIHN1ZmZpeCk7CiAgICB9OwogICAgdmFyIENKS19aRVJPUyA9IDEgPDwgMDsKICAgIHZhciBDSktfVEVOX0NPRUZGSUNJRU5UUyA9IDEgPDwgMTsKICAgIHZhciBDSktfVEVOX0hJR0hfQ09FRkZJQ0lFTlRTID0gMSA8PCAyOwogICAgdmFyIENKS19IVU5EUkVEX0NPRUZGSUNJRU5UUyA9IDEgPDwgMzsKICAgIHZhciBjcmVhdGVDSktDb3VudGVyID0gZnVuY3Rpb24gKHZhbHVlLCBudW1iZXJzLCBtdWx0aXBsaWVycywgbmVnYXRpdmVTaWduLCBzdWZmaXgsIGZsYWdzKSB7CiAgICAgICAgaWYgKHZhbHVlIDwgLTk5OTkgfHwgdmFsdWUgPiA5OTk5KSB7CiAgICAgICAgICAgIHJldHVybiBjcmVhdGVDb3VudGVyVGV4dCh2YWx1ZSwgNCAvKiBDSktfREVDSU1BTCAqLywgc3VmZml4Lmxlbmd0aCA+IDApOwogICAgICAgIH0KICAgICAgICB2YXIgdG1wID0gTWF0aC5hYnModmFsdWUpOwogICAgICAgIHZhciBzdHJpbmcgPSBzdWZmaXg7CiAgICAgICAgaWYgKHRtcCA9PT0gMCkgewogICAgICAgICAgICByZXR1cm4gbnVtYmVyc1swXSArIHN0cmluZzsKICAgICAgICB9CiAgICAgICAgZm9yICh2YXIgZGlnaXQgPSAwOyB0bXAgPiAwICYmIGRpZ2l0IDw9IDQ7IGRpZ2l0KyspIHsKICAgICAgICAgICAgdmFyIGNvZWZmaWNpZW50ID0gdG1wICUgMTA7CiAgICAgICAgICAgIGlmIChjb2VmZmljaWVudCA9PT0gMCAmJiBjb250YWlucyhmbGFncywgQ0pLX1pFUk9TKSAmJiBzdHJpbmcgIT09ICcnKSB7CiAgICAgICAgICAgICAgICBzdHJpbmcgPSBudW1iZXJzW2NvZWZmaWNpZW50XSArIHN0cmluZzsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmIChjb2VmZmljaWVudCA+IDEgfHwKICAgICAgICAgICAgICAgIChjb2VmZmljaWVudCA9PT0gMSAmJiBkaWdpdCA9PT0gMCkgfHwKICAgICAgICAgICAgICAgIChjb2VmZmljaWVudCA9PT0gMSAmJiBkaWdpdCA9PT0gMSAmJiBjb250YWlucyhmbGFncywgQ0pLX1RFTl9DT0VGRklDSUVOVFMpKSB8fAogICAgICAgICAgICAgICAgKGNvZWZmaWNpZW50ID09PSAxICYmIGRpZ2l0ID09PSAxICYmIGNvbnRhaW5zKGZsYWdzLCBDSktfVEVOX0hJR0hfQ09FRkZJQ0lFTlRTKSAmJiB2YWx1ZSA+IDEwMCkgfHwKICAgICAgICAgICAgICAgIChjb2VmZmljaWVudCA9PT0gMSAmJiBkaWdpdCA+IDEgJiYgY29udGFpbnMoZmxhZ3MsIENKS19IVU5EUkVEX0NPRUZGSUNJRU5UUykpKSB7CiAgICAgICAgICAgICAgICBzdHJpbmcgPSBudW1iZXJzW2NvZWZmaWNpZW50XSArIChkaWdpdCA+IDAgPyBtdWx0aXBsaWVyc1tkaWdpdCAtIDFdIDogJycpICsgc3RyaW5nOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYgKGNvZWZmaWNpZW50ID09PSAxICYmIGRpZ2l0ID4gMCkgewogICAgICAgICAgICAgICAgc3RyaW5nID0gbXVsdGlwbGllcnNbZGlnaXQgLSAxXSArIHN0cmluZzsKICAgICAgICAgICAgfQogICAgICAgICAgICB0bXAgPSBNYXRoLmZsb29yKHRtcCAvIDEwKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuICh2YWx1ZSA8IDAgPyBuZWdhdGl2ZVNpZ24gOiAnJykgKyBzdHJpbmc7CiAgICB9OwogICAgdmFyIENISU5FU0VfSU5GT1JNQUxfTVVMVElQTElFUlMgPSAn5Y2B55m+5Y2D6JCsJzsKICAgIHZhciBDSElORVNFX0ZPUk1BTF9NVUxUSVBMSUVSUyA9ICfmi77kvbDku5/okKwnOwogICAgdmFyIEpBUEFORVNFX05FR0FUSVZFID0gJ+ODnuOCpOODiuOCuSc7CiAgICB2YXIgS09SRUFOX05FR0FUSVZFID0gJ+uniOydtOuEiOyKpCc7CiAgICB2YXIgY3JlYXRlQ291bnRlclRleHQgPSBmdW5jdGlvbiAodmFsdWUsIHR5cGUsIGFwcGVuZFN1ZmZpeCkgewogICAgICAgIHZhciBkZWZhdWx0U3VmZml4ID0gYXBwZW5kU3VmZml4ID8gJy4gJyA6ICcnOwogICAgICAgIHZhciBjamtTdWZmaXggPSBhcHBlbmRTdWZmaXggPyAn44CBJyA6ICcnOwogICAgICAgIHZhciBrb3JlYW5TdWZmaXggPSBhcHBlbmRTdWZmaXggPyAnLCAnIDogJyc7CiAgICAgICAgdmFyIHNwYWNlU3VmZml4ID0gYXBwZW5kU3VmZml4ID8gJyAnIDogJyc7CiAgICAgICAgc3dpdGNoICh0eXBlKSB7CiAgICAgICAgICAgIGNhc2UgMCAvKiBESVNDICovOgogICAgICAgICAgICAgICAgcmV0dXJuICfigKInICsgc3BhY2VTdWZmaXg7CiAgICAgICAgICAgIGNhc2UgMSAvKiBDSVJDTEUgKi86CiAgICAgICAgICAgICAgICByZXR1cm4gJ+KXpicgKyBzcGFjZVN1ZmZpeDsKICAgICAgICAgICAgY2FzZSAyIC8qIFNRVUFSRSAqLzoKICAgICAgICAgICAgICAgIHJldHVybiAn4pe+JyArIHNwYWNlU3VmZml4OwogICAgICAgICAgICBjYXNlIDUgLyogREVDSU1BTF9MRUFESU5HX1pFUk8gKi86CiAgICAgICAgICAgICAgICB2YXIgc3RyaW5nID0gY3JlYXRlQ291bnRlclN0eWxlRnJvbVJhbmdlKHZhbHVlLCA0OCwgNTcsIHRydWUsIGRlZmF1bHRTdWZmaXgpOwogICAgICAgICAgICAgICAgcmV0dXJuIHN0cmluZy5sZW5ndGggPCA0ID8gIjAiICsgc3RyaW5nIDogc3RyaW5nOwogICAgICAgICAgICBjYXNlIDQgLyogQ0pLX0RFQ0lNQUwgKi86CiAgICAgICAgICAgICAgICByZXR1cm4gY3JlYXRlQ291bnRlclN0eWxlRnJvbVN5bWJvbHModmFsdWUsICfjgIfkuIDkuozkuInlm5vkupTlha3kuIPlhavkuZ0nLCBjamtTdWZmaXgpOwogICAgICAgICAgICBjYXNlIDYgLyogTE9XRVJfUk9NQU4gKi86CiAgICAgICAgICAgICAgICByZXR1cm4gY3JlYXRlQWRkaXRpdmVDb3VudGVyKHZhbHVlLCAxLCAzOTk5LCBST01BTl9VUFBFUiwgMyAvKiBERUNJTUFMICovLCBkZWZhdWx0U3VmZml4KS50b0xvd2VyQ2FzZSgpOwogICAgICAgICAgICBjYXNlIDcgLyogVVBQRVJfUk9NQU4gKi86CiAgICAgICAgICAgICAgICByZXR1cm4gY3JlYXRlQWRkaXRpdmVDb3VudGVyKHZhbHVlLCAxLCAzOTk5LCBST01BTl9VUFBFUiwgMyAvKiBERUNJTUFMICovLCBkZWZhdWx0U3VmZml4KTsKICAgICAgICAgICAgY2FzZSA4IC8qIExPV0VSX0dSRUVLICovOgogICAgICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZUNvdW50ZXJTdHlsZUZyb21SYW5nZSh2YWx1ZSwgOTQ1LCA5NjksIGZhbHNlLCBkZWZhdWx0U3VmZml4KTsKICAgICAgICAgICAgY2FzZSA5IC8qIExPV0VSX0FMUEhBICovOgogICAgICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZUNvdW50ZXJTdHlsZUZyb21SYW5nZSh2YWx1ZSwgOTcsIDEyMiwgZmFsc2UsIGRlZmF1bHRTdWZmaXgpOwogICAgICAgICAgICBjYXNlIDEwIC8qIFVQUEVSX0FMUEhBICovOgogICAgICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZUNvdW50ZXJTdHlsZUZyb21SYW5nZSh2YWx1ZSwgNjUsIDkwLCBmYWxzZSwgZGVmYXVsdFN1ZmZpeCk7CiAgICAgICAgICAgIGNhc2UgMTEgLyogQVJBQklDX0lORElDICovOgogICAgICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZUNvdW50ZXJTdHlsZUZyb21SYW5nZSh2YWx1ZSwgMTYzMiwgMTY0MSwgdHJ1ZSwgZGVmYXVsdFN1ZmZpeCk7CiAgICAgICAgICAgIGNhc2UgMTIgLyogQVJNRU5JQU4gKi86CiAgICAgICAgICAgIGNhc2UgNDkgLyogVVBQRVJfQVJNRU5JQU4gKi86CiAgICAgICAgICAgICAgICByZXR1cm4gY3JlYXRlQWRkaXRpdmVDb3VudGVyKHZhbHVlLCAxLCA5OTk5LCBBUk1FTklBTiwgMyAvKiBERUNJTUFMICovLCBkZWZhdWx0U3VmZml4KTsKICAgICAgICAgICAgY2FzZSAzNSAvKiBMT1dFUl9BUk1FTklBTiAqLzoKICAgICAgICAgICAgICAgIHJldHVybiBjcmVhdGVBZGRpdGl2ZUNvdW50ZXIodmFsdWUsIDEsIDk5OTksIEFSTUVOSUFOLCAzIC8qIERFQ0lNQUwgKi8sIGRlZmF1bHRTdWZmaXgpLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgICAgIGNhc2UgMTMgLyogQkVOR0FMSSAqLzoKICAgICAgICAgICAgICAgIHJldHVybiBjcmVhdGVDb3VudGVyU3R5bGVGcm9tUmFuZ2UodmFsdWUsIDI1MzQsIDI1NDMsIHRydWUsIGRlZmF1bHRTdWZmaXgpOwogICAgICAgICAgICBjYXNlIDE0IC8qIENBTUJPRElBTiAqLzoKICAgICAgICAgICAgY2FzZSAzMCAvKiBLSE1FUiAqLzoKICAgICAgICAgICAgICAgIHJldHVybiBjcmVhdGVDb3VudGVyU3R5bGVGcm9tUmFuZ2UodmFsdWUsIDYxMTIsIDYxMjEsIHRydWUsIGRlZmF1bHRTdWZmaXgpOwogICAgICAgICAgICBjYXNlIDE1IC8qIENKS19FQVJUSExZX0JSQU5DSCAqLzoKICAgICAgICAgICAgICAgIHJldHVybiBjcmVhdGVDb3VudGVyU3R5bGVGcm9tU3ltYm9scyh2YWx1ZSwgJ+WtkOS4keWvheWNr+i+sOW3s+WNiOacqueUs+mFieaIjOS6pScsIGNqa1N1ZmZpeCk7CiAgICAgICAgICAgIGNhc2UgMTYgLyogQ0pLX0hFQVZFTkxZX1NURU0gKi86CiAgICAgICAgICAgICAgICByZXR1cm4gY3JlYXRlQ291bnRlclN0eWxlRnJvbVN5bWJvbHModmFsdWUsICfnlLLkuZnkuJnkuIHmiIrlt7Hluprovpvlo6znmbgnLCBjamtTdWZmaXgpOwogICAgICAgICAgICBjYXNlIDE3IC8qIENKS19JREVPR1JBUEhJQyAqLzoKICAgICAgICAgICAgY2FzZSA0OCAvKiBUUkFEX0NISU5FU0VfSU5GT1JNQUwgKi86CiAgICAgICAgICAgICAgICByZXR1cm4gY3JlYXRlQ0pLQ291bnRlcih2YWx1ZSwgJ+mbtuS4gOS6jOS4ieWbm+S6lOWFreS4g+WFq+S5nScsIENISU5FU0VfSU5GT1JNQUxfTVVMVElQTElFUlMsICfosqAnLCBjamtTdWZmaXgsIENKS19URU5fQ09FRkZJQ0lFTlRTIHwgQ0pLX1RFTl9ISUdIX0NPRUZGSUNJRU5UUyB8IENKS19IVU5EUkVEX0NPRUZGSUNJRU5UUyk7CiAgICAgICAgICAgIGNhc2UgNDcgLyogVFJBRF9DSElORVNFX0ZPUk1BTCAqLzoKICAgICAgICAgICAgICAgIHJldHVybiBjcmVhdGVDSktDb3VudGVyKHZhbHVlLCAn6Zu25aO56LKz5Y+D6IKG5LyN6Zm45p+S5o2M546WJywgQ0hJTkVTRV9GT1JNQUxfTVVMVElQTElFUlMsICfosqAnLCBjamtTdWZmaXgsIENKS19aRVJPUyB8IENKS19URU5fQ09FRkZJQ0lFTlRTIHwgQ0pLX1RFTl9ISUdIX0NPRUZGSUNJRU5UUyB8IENKS19IVU5EUkVEX0NPRUZGSUNJRU5UUyk7CiAgICAgICAgICAgIGNhc2UgNDIgLyogU0lNUF9DSElORVNFX0lORk9STUFMICovOgogICAgICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZUNKS0NvdW50ZXIodmFsdWUsICfpm7bkuIDkuozkuInlm5vkupTlha3kuIPlhavkuZ0nLCBDSElORVNFX0lORk9STUFMX01VTFRJUExJRVJTLCAn6LSfJywgY2prU3VmZml4LCBDSktfVEVOX0NPRUZGSUNJRU5UUyB8IENKS19URU5fSElHSF9DT0VGRklDSUVOVFMgfCBDSktfSFVORFJFRF9DT0VGRklDSUVOVFMpOwogICAgICAgICAgICBjYXNlIDQxIC8qIFNJTVBfQ0hJTkVTRV9GT1JNQUwgKi86CiAgICAgICAgICAgICAgICByZXR1cm4gY3JlYXRlQ0pLQ291bnRlcih2YWx1ZSwgJ+mbtuWjuei0sOWPgeiChuS8jemZhuafkuaNjOeOlicsIENISU5FU0VfRk9STUFMX01VTFRJUExJRVJTLCAn6LSfJywgY2prU3VmZml4LCBDSktfWkVST1MgfCBDSktfVEVOX0NPRUZGSUNJRU5UUyB8IENKS19URU5fSElHSF9DT0VGRklDSUVOVFMgfCBDSktfSFVORFJFRF9DT0VGRklDSUVOVFMpOwogICAgICAgICAgICBjYXNlIDI2IC8qIEpBUEFORVNFX0lORk9STUFMICovOgogICAgICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZUNKS0NvdW50ZXIodmFsdWUsICfjgIfkuIDkuozkuInlm5vkupTlha3kuIPlhavkuZ0nLCAn5Y2B55m+5Y2D5LiHJywgSkFQQU5FU0VfTkVHQVRJVkUsIGNqa1N1ZmZpeCwgMCk7CiAgICAgICAgICAgIGNhc2UgMjUgLyogSkFQQU5FU0VfRk9STUFMICovOgogICAgICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZUNKS0NvdW50ZXIodmFsdWUsICfpm7blo7HlvJDlj4Llm5vkvI3lha3kuIPlhavkuZ0nLCAn5ou+55m+5Y2D5LiHJywgSkFQQU5FU0VfTkVHQVRJVkUsIGNqa1N1ZmZpeCwgQ0pLX1pFUk9TIHwgQ0pLX1RFTl9DT0VGRklDSUVOVFMgfCBDSktfVEVOX0hJR0hfQ09FRkZJQ0lFTlRTKTsKICAgICAgICAgICAgY2FzZSAzMSAvKiBLT1JFQU5fSEFOR1VMX0ZPUk1BTCAqLzoKICAgICAgICAgICAgICAgIHJldHVybiBjcmVhdGVDSktDb3VudGVyKHZhbHVlLCAn7JiB7J287J207IK87IKs7Jik7Jyh7Lmg7YyU6rWsJywgJ+yLreuwseyynOunjCcsIEtPUkVBTl9ORUdBVElWRSwga29yZWFuU3VmZml4LCBDSktfWkVST1MgfCBDSktfVEVOX0NPRUZGSUNJRU5UUyB8IENKS19URU5fSElHSF9DT0VGRklDSUVOVFMpOwogICAgICAgICAgICBjYXNlIDMzIC8qIEtPUkVBTl9IQU5KQV9JTkZPUk1BTCAqLzoKICAgICAgICAgICAgICAgIHJldHVybiBjcmVhdGVDSktDb3VudGVyKHZhbHVlLCAn6Zu25LiA5LqM5LiJ5Zub5LqU5YWt5LiD5YWr5LmdJywgJ+WNgeeZvuWNg+iQrCcsIEtPUkVBTl9ORUdBVElWRSwga29yZWFuU3VmZml4LCAwKTsKICAgICAgICAgICAgY2FzZSAzMiAvKiBLT1JFQU5fSEFOSkFfRk9STUFMICovOgogICAgICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZUNKS0NvdW50ZXIodmFsdWUsICfpm7blo7nosrPlj4Plm5vkupTlha3kuIPlhavkuZ0nLCAn5ou+55m+5Y2DJywgS09SRUFOX05FR0FUSVZFLCBrb3JlYW5TdWZmaXgsIENKS19aRVJPUyB8IENKS19URU5fQ09FRkZJQ0lFTlRTIHwgQ0pLX1RFTl9ISUdIX0NPRUZGSUNJRU5UUyk7CiAgICAgICAgICAgIGNhc2UgMTggLyogREVWQU5BR0FSSSAqLzoKICAgICAgICAgICAgICAgIHJldHVybiBjcmVhdGVDb3VudGVyU3R5bGVGcm9tUmFuZ2UodmFsdWUsIDB4OTY2LCAweDk2ZiwgdHJ1ZSwgZGVmYXVsdFN1ZmZpeCk7CiAgICAgICAgICAgIGNhc2UgMjAgLyogR0VPUkdJQU4gKi86CiAgICAgICAgICAgICAgICByZXR1cm4gY3JlYXRlQWRkaXRpdmVDb3VudGVyKHZhbHVlLCAxLCAxOTk5OSwgR0VPUkdJQU4sIDMgLyogREVDSU1BTCAqLywgZGVmYXVsdFN1ZmZpeCk7CiAgICAgICAgICAgIGNhc2UgMjEgLyogR1VKQVJBVEkgKi86CiAgICAgICAgICAgICAgICByZXR1cm4gY3JlYXRlQ291bnRlclN0eWxlRnJvbVJhbmdlKHZhbHVlLCAweGFlNiwgMHhhZWYsIHRydWUsIGRlZmF1bHRTdWZmaXgpOwogICAgICAgICAgICBjYXNlIDIyIC8qIEdVUk1VS0hJICovOgogICAgICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZUNvdW50ZXJTdHlsZUZyb21SYW5nZSh2YWx1ZSwgMHhhNjYsIDB4YTZmLCB0cnVlLCBkZWZhdWx0U3VmZml4KTsKICAgICAgICAgICAgY2FzZSAyMiAvKiBIRUJSRVcgKi86CiAgICAgICAgICAgICAgICByZXR1cm4gY3JlYXRlQWRkaXRpdmVDb3VudGVyKHZhbHVlLCAxLCAxMDk5OSwgSEVCUkVXLCAzIC8qIERFQ0lNQUwgKi8sIGRlZmF1bHRTdWZmaXgpOwogICAgICAgICAgICBjYXNlIDIzIC8qIEhJUkFHQU5BICovOgogICAgICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZUNvdW50ZXJTdHlsZUZyb21TeW1ib2xzKHZhbHVlLCAn44GC44GE44GG44GI44GK44GL44GN44GP44GR44GT44GV44GX44GZ44Gb44Gd44Gf44Gh44Gk44Gm44Go44Gq44Gr44Gs44Gt44Gu44Gv44Gy44G144G444G744G+44G/44KA44KB44KC44KE44KG44KI44KJ44KK44KL44KM44KN44KP44KQ44KR44KS44KTJyk7CiAgICAgICAgICAgIGNhc2UgMjQgLyogSElSQUdBTkFfSVJPSEEgKi86CiAgICAgICAgICAgICAgICByZXR1cm4gY3JlYXRlQ291bnRlclN0eWxlRnJvbVN5bWJvbHModmFsdWUsICfjgYTjgo3jga/jgavjgbvjgbjjgajjgaHjgorjgazjgovjgpLjgo/jgYvjgojjgZ/jgozjgZ3jgaTjga3jgarjgonjgoDjgYbjgpDjga7jgYrjgY/jgoTjgb7jgZHjgbXjgZPjgYjjgabjgYLjgZXjgY3jgobjgoHjgb/jgZfjgpHjgbLjgoLjgZvjgZknKTsKICAgICAgICAgICAgY2FzZSAyNyAvKiBLQU5OQURBICovOgogICAgICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZUNvdW50ZXJTdHlsZUZyb21SYW5nZSh2YWx1ZSwgMHhjZTYsIDB4Y2VmLCB0cnVlLCBkZWZhdWx0U3VmZml4KTsKICAgICAgICAgICAgY2FzZSAyOCAvKiBLQVRBS0FOQSAqLzoKICAgICAgICAgICAgICAgIHJldHVybiBjcmVhdGVDb3VudGVyU3R5bGVGcm9tU3ltYm9scyh2YWx1ZSwgJ+OCouOCpOOCpuOCqOOCquOCq+OCreOCr+OCseOCs+OCteOCt+OCueOCu+OCveOCv+ODgeODhOODhuODiOODiuODi+ODjOODjeODjuODj+ODkuODleODmOODm+ODnuODn+ODoOODoeODouODpOODpuODqOODqeODquODq+ODrOODreODr+ODsOODseODsuODsycsIGNqa1N1ZmZpeCk7CiAgICAgICAgICAgIGNhc2UgMjkgLyogS0FUQUtBTkFfSVJPSEEgKi86CiAgICAgICAgICAgICAgICByZXR1cm4gY3JlYXRlQ291bnRlclN0eWxlRnJvbVN5bWJvbHModmFsdWUsICfjgqTjg63jg4/jg4vjg5vjg5jjg4jjg4Hjg6rjg4zjg6vjg7Ljg6/jgqvjg6jjgr/jg6zjgr3jg4Tjg43jg4rjg6njg6Djgqbjg7Djg47jgqrjgq/jg6Tjg57jgrHjg5XjgrPjgqjjg4bjgqLjgrXjgq3jg6bjg6Hjg5/jgrfjg7Hjg5Ljg6LjgrvjgrknLCBjamtTdWZmaXgpOwogICAgICAgICAgICBjYXNlIDM0IC8qIExBTyAqLzoKICAgICAgICAgICAgICAgIHJldHVybiBjcmVhdGVDb3VudGVyU3R5bGVGcm9tUmFuZ2UodmFsdWUsIDB4ZWQwLCAweGVkOSwgdHJ1ZSwgZGVmYXVsdFN1ZmZpeCk7CiAgICAgICAgICAgIGNhc2UgMzcgLyogTU9OR09MSUFOICovOgogICAgICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZUNvdW50ZXJTdHlsZUZyb21SYW5nZSh2YWx1ZSwgMHgxODEwLCAweDE4MTksIHRydWUsIGRlZmF1bHRTdWZmaXgpOwogICAgICAgICAgICBjYXNlIDM4IC8qIE1ZQU5NQVIgKi86CiAgICAgICAgICAgICAgICByZXR1cm4gY3JlYXRlQ291bnRlclN0eWxlRnJvbVJhbmdlKHZhbHVlLCAweDEwNDAsIDB4MTA0OSwgdHJ1ZSwgZGVmYXVsdFN1ZmZpeCk7CiAgICAgICAgICAgIGNhc2UgMzkgLyogT1JJWUEgKi86CiAgICAgICAgICAgICAgICByZXR1cm4gY3JlYXRlQ291bnRlclN0eWxlRnJvbVJhbmdlKHZhbHVlLCAweGI2NiwgMHhiNmYsIHRydWUsIGRlZmF1bHRTdWZmaXgpOwogICAgICAgICAgICBjYXNlIDQwIC8qIFBFUlNJQU4gKi86CiAgICAgICAgICAgICAgICByZXR1cm4gY3JlYXRlQ291bnRlclN0eWxlRnJvbVJhbmdlKHZhbHVlLCAweDZmMCwgMHg2ZjksIHRydWUsIGRlZmF1bHRTdWZmaXgpOwogICAgICAgICAgICBjYXNlIDQzIC8qIFRBTUlMICovOgogICAgICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZUNvdW50ZXJTdHlsZUZyb21SYW5nZSh2YWx1ZSwgMHhiZTYsIDB4YmVmLCB0cnVlLCBkZWZhdWx0U3VmZml4KTsKICAgICAgICAgICAgY2FzZSA0NCAvKiBURUxVR1UgKi86CiAgICAgICAgICAgICAgICByZXR1cm4gY3JlYXRlQ291bnRlclN0eWxlRnJvbVJhbmdlKHZhbHVlLCAweGM2NiwgMHhjNmYsIHRydWUsIGRlZmF1bHRTdWZmaXgpOwogICAgICAgICAgICBjYXNlIDQ1IC8qIFRIQUkgKi86CiAgICAgICAgICAgICAgICByZXR1cm4gY3JlYXRlQ291bnRlclN0eWxlRnJvbVJhbmdlKHZhbHVlLCAweGU1MCwgMHhlNTksIHRydWUsIGRlZmF1bHRTdWZmaXgpOwogICAgICAgICAgICBjYXNlIDQ2IC8qIFRJQkVUQU4gKi86CiAgICAgICAgICAgICAgICByZXR1cm4gY3JlYXRlQ291bnRlclN0eWxlRnJvbVJhbmdlKHZhbHVlLCAweGYyMCwgMHhmMjksIHRydWUsIGRlZmF1bHRTdWZmaXgpOwogICAgICAgICAgICBjYXNlIDMgLyogREVDSU1BTCAqLzoKICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgIHJldHVybiBjcmVhdGVDb3VudGVyU3R5bGVGcm9tUmFuZ2UodmFsdWUsIDQ4LCA1NywgdHJ1ZSwgZGVmYXVsdFN1ZmZpeCk7CiAgICAgICAgfQogICAgfTsKCiAgICB2YXIgSUdOT1JFX0FUVFJJQlVURSA9ICdkYXRhLWh0bWwyY2FudmFzLWlnbm9yZSc7CiAgICB2YXIgRG9jdW1lbnRDbG9uZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CiAgICAgICAgZnVuY3Rpb24gRG9jdW1lbnRDbG9uZXIoY29udGV4dCwgZWxlbWVudCwgb3B0aW9ucykgewogICAgICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0OwogICAgICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zOwogICAgICAgICAgICB0aGlzLnNjcm9sbGVkRWxlbWVudHMgPSBbXTsKICAgICAgICAgICAgdGhpcy5yZWZlcmVuY2VFbGVtZW50ID0gZWxlbWVudDsKICAgICAgICAgICAgdGhpcy5jb3VudGVycyA9IG5ldyBDb3VudGVyU3RhdGUoKTsKICAgICAgICAgICAgdGhpcy5xdW90ZURlcHRoID0gMDsKICAgICAgICAgICAgaWYgKCFlbGVtZW50Lm93bmVyRG9jdW1lbnQpIHsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ2xvbmVkIGVsZW1lbnQgZG9lcyBub3QgaGF2ZSBhbiBvd25lciBkb2N1bWVudCcpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMuZG9jdW1lbnRFbGVtZW50ID0gdGhpcy5jbG9uZU5vZGUoZWxlbWVudC5vd25lckRvY3VtZW50LmRvY3VtZW50RWxlbWVudCwgZmFsc2UpOwogICAgICAgIH0KICAgICAgICBEb2N1bWVudENsb25lci5wcm90b3R5cGUudG9JRnJhbWUgPSBmdW5jdGlvbiAob3duZXJEb2N1bWVudCwgd2luZG93U2l6ZSkgewogICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICAgICAgICB2YXIgaWZyYW1lID0gY3JlYXRlSUZyYW1lQ29udGFpbmVyKG93bmVyRG9jdW1lbnQsIHdpbmRvd1NpemUpOwogICAgICAgICAgICBpZiAoIWlmcmFtZS5jb250ZW50V2luZG93KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoIlVuYWJsZSB0byBmaW5kIGlmcmFtZSB3aW5kb3ciKTsKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgc2Nyb2xsWCA9IG93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcucGFnZVhPZmZzZXQ7CiAgICAgICAgICAgIHZhciBzY3JvbGxZID0gb3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldy5wYWdlWU9mZnNldDsKICAgICAgICAgICAgdmFyIGNsb25lV2luZG93ID0gaWZyYW1lLmNvbnRlbnRXaW5kb3c7CiAgICAgICAgICAgIHZhciBkb2N1bWVudENsb25lID0gY2xvbmVXaW5kb3cuZG9jdW1lbnQ7CiAgICAgICAgICAgIC8qIENocm9tZSBkb2Vzbid0IGRldGVjdCByZWxhdGl2ZSBiYWNrZ3JvdW5kLWltYWdlcyBhc3NpZ25lZCBpbiBpbmxpbmUgPHN0eWxlPiBzaGVldHMgd2hlbiBmZXRjaGVkIHRocm91Z2ggZ2V0Q29tcHV0ZWRTdHlsZQogICAgICAgICAgICAgaWYgd2luZG93IHVybCBpcyBhYm91dDpibGFuaywgd2UgY2FuIGFzc2lnbiB0aGUgdXJsIHRvIGN1cnJlbnQgYnkgd3JpdGluZyBvbnRvIHRoZSBkb2N1bWVudAogICAgICAgICAgICAgKi8KICAgICAgICAgICAgdmFyIGlmcmFtZUxvYWQgPSBpZnJhbWVMb2FkZXIoaWZyYW1lKS50aGVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIF9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciBvbmNsb25lLCByZWZlcmVuY2VFbGVtZW50OwogICAgICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkgewogICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxlZEVsZW1lbnRzLmZvckVhY2gocmVzdG9yZU5vZGVTY3JvbGwpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNsb25lV2luZG93KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xvbmVXaW5kb3cuc2Nyb2xsVG8od2luZG93U2l6ZS5sZWZ0LCB3aW5kb3dTaXplLnRvcCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKC8oaVBhZHxpUGhvbmV8aVBvZCkvZy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChjbG9uZVdpbmRvdy5zY3JvbGxZICE9PSB3aW5kb3dTaXplLnRvcCB8fCBjbG9uZVdpbmRvdy5zY3JvbGxYICE9PSB3aW5kb3dTaXplLmxlZnQpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dC5sb2dnZXIud2FybignVW5hYmxlIHRvIHJlc3RvcmUgc2Nyb2xsIHBvc2l0aW9uIGZvciBjbG9uZWQgZG9jdW1lbnQnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250ZXh0LndpbmRvd0JvdW5kcyA9IHRoaXMuY29udGV4dC53aW5kb3dCb3VuZHMuYWRkKGNsb25lV2luZG93LnNjcm9sbFggLSB3aW5kb3dTaXplLmxlZnQsIGNsb25lV2luZG93LnNjcm9sbFkgLSB3aW5kb3dTaXplLnRvcCwgMCwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgb25jbG9uZSA9IHRoaXMub3B0aW9ucy5vbmNsb25lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmZXJlbmNlRWxlbWVudCA9IHRoaXMuY2xvbmVkUmVmZXJlbmNlRWxlbWVudDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVmZXJlbmNlRWxlbWVudCA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgUHJvbWlzZS5yZWplY3QoIkVycm9yIGZpbmRpbmcgdGhlICIgKyB0aGlzLnJlZmVyZW5jZUVsZW1lbnQubm9kZU5hbWUgKyAiIGluIHRoZSBjbG9uZWQgZG9jdW1lbnQiKV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShkb2N1bWVudENsb25lLmZvbnRzICYmIGRvY3VtZW50Q2xvbmUuZm9udHMucmVhZHkpKSByZXR1cm4gWzMgLypicmVhayovLCAyXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGRvY3VtZW50Q2xvbmUuZm9udHMucmVhZHldOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDI7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghLyhBcHBsZVdlYktpdCkvZy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKSByZXR1cm4gWzMgLypicmVhayovLCA0XTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGltYWdlc1JlYWR5KGRvY3VtZW50Q2xvbmUpXTsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSA0OwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9uY2xvbmUgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgUHJvbWlzZS5yZXNvbHZlKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIG9uY2xvbmUoZG9jdW1lbnRDbG9uZSwgcmVmZXJlbmNlRWxlbWVudCk7IH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7IHJldHVybiBpZnJhbWU7IH0pXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBpZnJhbWVdOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsgfSk7CiAgICAgICAgICAgIGRvY3VtZW50Q2xvbmUub3BlbigpOwogICAgICAgICAgICBkb2N1bWVudENsb25lLndyaXRlKHNlcmlhbGl6ZURvY3R5cGUoZG9jdW1lbnQuZG9jdHlwZSkgKyAiPGh0bWw+PC9odG1sPiIpOwogICAgICAgICAgICAvLyBDaHJvbWUgc2Nyb2xscyB0aGUgcGFyZW50IGRvY3VtZW50IGZvciBzb21lIHJlYXNvbiBhZnRlciB0aGUgd3JpdGUgdG8gdGhlIGNsb25lZCB3aW5kb3c/Pz8KICAgICAgICAgICAgcmVzdG9yZU93bmVyU2Nyb2xsKHRoaXMucmVmZXJlbmNlRWxlbWVudC5vd25lckRvY3VtZW50LCBzY3JvbGxYLCBzY3JvbGxZKTsKICAgICAgICAgICAgZG9jdW1lbnRDbG9uZS5yZXBsYWNlQ2hpbGQoZG9jdW1lbnRDbG9uZS5hZG9wdE5vZGUodGhpcy5kb2N1bWVudEVsZW1lbnQpLCBkb2N1bWVudENsb25lLmRvY3VtZW50RWxlbWVudCk7CiAgICAgICAgICAgIGRvY3VtZW50Q2xvbmUuY2xvc2UoKTsKICAgICAgICAgICAgcmV0dXJuIGlmcmFtZUxvYWQ7CiAgICAgICAgfTsKICAgICAgICBEb2N1bWVudENsb25lci5wcm90b3R5cGUuY3JlYXRlRWxlbWVudENsb25lID0gZnVuY3Rpb24gKG5vZGUpIHsKICAgICAgICAgICAgaWYgKGlzRGVidWdnaW5nKG5vZGUsIDIgLyogQ0xPTkUgKi8pKSB7CiAgICAgICAgICAgICAgICBkZWJ1Z2dlcjsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoaXNDYW52YXNFbGVtZW50KG5vZGUpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVDYW52YXNDbG9uZShub2RlKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoaXNWaWRlb0VsZW1lbnQobm9kZSkpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZVZpZGVvQ2xvbmUobm9kZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGlzU3R5bGVFbGVtZW50KG5vZGUpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVTdHlsZUNsb25lKG5vZGUpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciBjbG9uZSA9IG5vZGUuY2xvbmVOb2RlKGZhbHNlKTsKICAgICAgICAgICAgaWYgKGlzSW1hZ2VFbGVtZW50KGNsb25lKSkgewogICAgICAgICAgICAgICAgaWYgKGlzSW1hZ2VFbGVtZW50KG5vZGUpICYmIG5vZGUuY3VycmVudFNyYyAmJiBub2RlLmN1cnJlbnRTcmMgIT09IG5vZGUuc3JjKSB7CiAgICAgICAgICAgICAgICAgICAgY2xvbmUuc3JjID0gbm9kZS5jdXJyZW50U3JjOwogICAgICAgICAgICAgICAgICAgIGNsb25lLnNyY3NldCA9ICcnOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKGNsb25lLmxvYWRpbmcgPT09ICdsYXp5JykgewogICAgICAgICAgICAgICAgICAgIGNsb25lLmxvYWRpbmcgPSAnZWFnZXInOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChpc0N1c3RvbUVsZW1lbnQoY2xvbmUpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVDdXN0b21FbGVtZW50Q2xvbmUoY2xvbmUpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBjbG9uZTsKICAgICAgICB9OwogICAgICAgIERvY3VtZW50Q2xvbmVyLnByb3RvdHlwZS5jcmVhdGVDdXN0b21FbGVtZW50Q2xvbmUgPSBmdW5jdGlvbiAobm9kZSkgewogICAgICAgICAgICB2YXIgY2xvbmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdodG1sMmNhbnZhc2N1c3RvbWVsZW1lbnQnKTsKICAgICAgICAgICAgY29weUNTU1N0eWxlcyhub2RlLnN0eWxlLCBjbG9uZSk7CiAgICAgICAgICAgIHJldHVybiBjbG9uZTsKICAgICAgICB9OwogICAgICAgIERvY3VtZW50Q2xvbmVyLnByb3RvdHlwZS5jcmVhdGVTdHlsZUNsb25lID0gZnVuY3Rpb24gKG5vZGUpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHZhciBzaGVldCA9IG5vZGUuc2hlZXQ7CiAgICAgICAgICAgICAgICBpZiAoc2hlZXQgJiYgc2hlZXQuY3NzUnVsZXMpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgY3NzID0gW10uc2xpY2UuY2FsbChzaGVldC5jc3NSdWxlcywgMCkucmVkdWNlKGZ1bmN0aW9uIChjc3MsIHJ1bGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJ1bGUgJiYgdHlwZW9mIHJ1bGUuY3NzVGV4dCA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjc3MgKyBydWxlLmNzc1RleHQ7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNzczsKICAgICAgICAgICAgICAgICAgICB9LCAnJyk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHN0eWxlID0gbm9kZS5jbG9uZU5vZGUoZmFsc2UpOwogICAgICAgICAgICAgICAgICAgIHN0eWxlLnRleHRDb250ZW50ID0gY3NzOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBzdHlsZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgLy8gYWNjZXNzaW5nIG5vZGUuc2hlZXQuY3NzUnVsZXMgdGhyb3dzIGEgRE9NRXhjZXB0aW9uCiAgICAgICAgICAgICAgICB0aGlzLmNvbnRleHQubG9nZ2VyLmVycm9yKCdVbmFibGUgdG8gYWNjZXNzIGNzc1J1bGVzIHByb3BlcnR5JywgZSk7CiAgICAgICAgICAgICAgICBpZiAoZS5uYW1lICE9PSAnU2VjdXJpdHlFcnJvcicpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBub2RlLmNsb25lTm9kZShmYWxzZSk7CiAgICAgICAgfTsKICAgICAgICBEb2N1bWVudENsb25lci5wcm90b3R5cGUuY3JlYXRlQ2FudmFzQ2xvbmUgPSBmdW5jdGlvbiAoY2FudmFzKSB7CiAgICAgICAgICAgIHZhciBfYTsKICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5pbmxpbmVJbWFnZXMgJiYgY2FudmFzLm93bmVyRG9jdW1lbnQpIHsKICAgICAgICAgICAgICAgIHZhciBpbWcgPSBjYW52YXMub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgaW1nLnNyYyA9IGNhbnZhcy50b0RhdGFVUkwoKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW1nOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRleHQubG9nZ2VyLmluZm8oIlVuYWJsZSB0byBpbmxpbmUgY2FudmFzIGNvbnRlbnRzLCBjYW52YXMgaXMgdGFpbnRlZCIsIGNhbnZhcyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIGNsb25lZENhbnZhcyA9IGNhbnZhcy5jbG9uZU5vZGUoZmFsc2UpOwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgY2xvbmVkQ2FudmFzLndpZHRoID0gY2FudmFzLndpZHRoOwogICAgICAgICAgICAgICAgY2xvbmVkQ2FudmFzLmhlaWdodCA9IGNhbnZhcy5oZWlnaHQ7CiAgICAgICAgICAgICAgICB2YXIgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7CiAgICAgICAgICAgICAgICB2YXIgY2xvbmVkQ3R4ID0gY2xvbmVkQ2FudmFzLmdldENvbnRleHQoJzJkJyk7CiAgICAgICAgICAgICAgICBpZiAoY2xvbmVkQ3R4KSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLm9wdGlvbnMuYWxsb3dUYWludCAmJiBjdHgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2xvbmVkQ3R4LnB1dEltYWdlRGF0YShjdHguZ2V0SW1hZ2VEYXRhKDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCksIDAsIDApOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGdsID0gKF9hID0gY2FudmFzLmdldENvbnRleHQoJ3dlYmdsMicpKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBjYW52YXMuZ2V0Q29udGV4dCgnd2ViZ2wnKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXR0cmlicyA9IGdsLmdldENvbnRleHRBdHRyaWJ1dGVzKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKGF0dHJpYnMgPT09IG51bGwgfHwgYXR0cmlicyA9PT0gdm9pZCAwID8gdm9pZCAwIDogYXR0cmlicy5wcmVzZXJ2ZURyYXdpbmdCdWZmZXIpID09PSBmYWxzZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dC5sb2dnZXIud2FybignVW5hYmxlIHRvIGNsb25lIFdlYkdMIGNvbnRleHQgYXMgaXQgaGFzIHByZXNlcnZlRHJhd2luZ0J1ZmZlcj1mYWxzZScsIGNhbnZhcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgY2xvbmVkQ3R4LmRyYXdJbWFnZShjYW52YXMsIDAsIDApOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBjbG9uZWRDYW52YXM7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dC5sb2dnZXIuaW5mbygiVW5hYmxlIHRvIGNsb25lIGNhbnZhcyBhcyBpdCBpcyB0YWludGVkIiwgY2FudmFzKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gY2xvbmVkQ2FudmFzOwogICAgICAgIH07CiAgICAgICAgRG9jdW1lbnRDbG9uZXIucHJvdG90eXBlLmNyZWF0ZVZpZGVvQ2xvbmUgPSBmdW5jdGlvbiAodmlkZW8pIHsKICAgICAgICAgICAgdmFyIGNhbnZhcyA9IHZpZGVvLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7CiAgICAgICAgICAgIGNhbnZhcy53aWR0aCA9IHZpZGVvLm9mZnNldFdpZHRoOwogICAgICAgICAgICBjYW52YXMuaGVpZ2h0ID0gdmlkZW8ub2Zmc2V0SGVpZ2h0OwogICAgICAgICAgICB2YXIgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBpZiAoY3R4KSB7CiAgICAgICAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZSh2aWRlbywgMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTsKICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMub3B0aW9ucy5hbGxvd1RhaW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5nZXRJbWFnZURhdGEoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gY2FudmFzOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICB0aGlzLmNvbnRleHQubG9nZ2VyLmluZm8oIlVuYWJsZSB0byBjbG9uZSB2aWRlbyBhcyBpdCBpcyB0YWludGVkIiwgdmlkZW8pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciBibGFua0NhbnZhcyA9IHZpZGVvLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7CiAgICAgICAgICAgIGJsYW5rQ2FudmFzLndpZHRoID0gdmlkZW8ub2Zmc2V0V2lkdGg7CiAgICAgICAgICAgIGJsYW5rQ2FudmFzLmhlaWdodCA9IHZpZGVvLm9mZnNldEhlaWdodDsKICAgICAgICAgICAgcmV0dXJuIGJsYW5rQ2FudmFzOwogICAgICAgIH07CiAgICAgICAgRG9jdW1lbnRDbG9uZXIucHJvdG90eXBlLmFwcGVuZENoaWxkTm9kZSA9IGZ1bmN0aW9uIChjbG9uZSwgY2hpbGQsIGNvcHlTdHlsZXMpIHsKICAgICAgICAgICAgaWYgKCFpc0VsZW1lbnROb2RlKGNoaWxkKSB8fAogICAgICAgICAgICAgICAgKCFpc1NjcmlwdEVsZW1lbnQoY2hpbGQpICYmCiAgICAgICAgICAgICAgICAgICAgIWNoaWxkLmhhc0F0dHJpYnV0ZShJR05PUkVfQVRUUklCVVRFKSAmJgogICAgICAgICAgICAgICAgICAgICh0eXBlb2YgdGhpcy5vcHRpb25zLmlnbm9yZUVsZW1lbnRzICE9PSAnZnVuY3Rpb24nIHx8ICF0aGlzLm9wdGlvbnMuaWdub3JlRWxlbWVudHMoY2hpbGQpKSkpIHsKICAgICAgICAgICAgICAgIGlmICghdGhpcy5vcHRpb25zLmNvcHlTdHlsZXMgfHwgIWlzRWxlbWVudE5vZGUoY2hpbGQpIHx8ICFpc1N0eWxlRWxlbWVudChjaGlsZCkpIHsKICAgICAgICAgICAgICAgICAgICBjbG9uZS5hcHBlbmRDaGlsZCh0aGlzLmNsb25lTm9kZShjaGlsZCwgY29weVN0eWxlcykpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICBEb2N1bWVudENsb25lci5wcm90b3R5cGUuY2xvbmVDaGlsZE5vZGVzID0gZnVuY3Rpb24gKG5vZGUsIGNsb25lLCBjb3B5U3R5bGVzKSB7CiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgICAgICAgIGZvciAodmFyIGNoaWxkID0gbm9kZS5zaGFkb3dSb290ID8gbm9kZS5zaGFkb3dSb290LmZpcnN0Q2hpbGQgOiBub2RlLmZpcnN0Q2hpbGQ7IGNoaWxkOyBjaGlsZCA9IGNoaWxkLm5leHRTaWJsaW5nKSB7CiAgICAgICAgICAgICAgICBpZiAoaXNFbGVtZW50Tm9kZShjaGlsZCkgJiYgaXNTbG90RWxlbWVudChjaGlsZCkgJiYgdHlwZW9mIGNoaWxkLmFzc2lnbmVkTm9kZXMgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgYXNzaWduZWROb2RlcyA9IGNoaWxkLmFzc2lnbmVkTm9kZXMoKTsKICAgICAgICAgICAgICAgICAgICBpZiAoYXNzaWduZWROb2Rlcy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgYXNzaWduZWROb2Rlcy5mb3JFYWNoKGZ1bmN0aW9uIChhc3NpZ25lZE5vZGUpIHsgcmV0dXJuIF90aGlzLmFwcGVuZENoaWxkTm9kZShjbG9uZSwgYXNzaWduZWROb2RlLCBjb3B5U3R5bGVzKTsgfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBlbmRDaGlsZE5vZGUoY2xvbmUsIGNoaWxkLCBjb3B5U3R5bGVzKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgRG9jdW1lbnRDbG9uZXIucHJvdG90eXBlLmNsb25lTm9kZSA9IGZ1bmN0aW9uIChub2RlLCBjb3B5U3R5bGVzKSB7CiAgICAgICAgICAgIGlmIChpc1RleHROb2RlKG5vZGUpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUobm9kZS5kYXRhKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoIW5vZGUub3duZXJEb2N1bWVudCkgewogICAgICAgICAgICAgICAgcmV0dXJuIG5vZGUuY2xvbmVOb2RlKGZhbHNlKTsKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgd2luZG93ID0gbm9kZS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3OwogICAgICAgICAgICBpZiAod2luZG93ICYmIGlzRWxlbWVudE5vZGUobm9kZSkgJiYgKGlzSFRNTEVsZW1lbnROb2RlKG5vZGUpIHx8IGlzU1ZHRWxlbWVudE5vZGUobm9kZSkpKSB7CiAgICAgICAgICAgICAgICB2YXIgY2xvbmUgPSB0aGlzLmNyZWF0ZUVsZW1lbnRDbG9uZShub2RlKTsKICAgICAgICAgICAgICAgIGNsb25lLnN0eWxlLnRyYW5zaXRpb25Qcm9wZXJ0eSA9ICdub25lJzsKICAgICAgICAgICAgICAgIHZhciBzdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKG5vZGUpOwogICAgICAgICAgICAgICAgdmFyIHN0eWxlQmVmb3JlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUobm9kZSwgJzpiZWZvcmUnKTsKICAgICAgICAgICAgICAgIHZhciBzdHlsZUFmdGVyID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUobm9kZSwgJzphZnRlcicpOwogICAgICAgICAgICAgICAgaWYgKHRoaXMucmVmZXJlbmNlRWxlbWVudCA9PT0gbm9kZSAmJiBpc0hUTUxFbGVtZW50Tm9kZShjbG9uZSkpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb25lZFJlZmVyZW5jZUVsZW1lbnQgPSBjbG9uZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChpc0JvZHlFbGVtZW50KGNsb25lKSkgewogICAgICAgICAgICAgICAgICAgIGNyZWF0ZVBzZXVkb0hpZGVTdHlsZXMoY2xvbmUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdmFyIGNvdW50ZXJzID0gdGhpcy5jb3VudGVycy5wYXJzZShuZXcgQ1NTUGFyc2VkQ291bnRlckRlY2xhcmF0aW9uKHRoaXMuY29udGV4dCwgc3R5bGUpKTsKICAgICAgICAgICAgICAgIHZhciBiZWZvcmUgPSB0aGlzLnJlc29sdmVQc2V1ZG9Db250ZW50KG5vZGUsIGNsb25lLCBzdHlsZUJlZm9yZSwgUHNldWRvRWxlbWVudFR5cGUuQkVGT1JFKTsKICAgICAgICAgICAgICAgIGlmIChpc0N1c3RvbUVsZW1lbnQobm9kZSkpIHsKICAgICAgICAgICAgICAgICAgICBjb3B5U3R5bGVzID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICghaXNWaWRlb0VsZW1lbnQobm9kZSkpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb25lQ2hpbGROb2Rlcyhub2RlLCBjbG9uZSwgY29weVN0eWxlcyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoYmVmb3JlKSB7CiAgICAgICAgICAgICAgICAgICAgY2xvbmUuaW5zZXJ0QmVmb3JlKGJlZm9yZSwgY2xvbmUuZmlyc3RDaGlsZCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB2YXIgYWZ0ZXIgPSB0aGlzLnJlc29sdmVQc2V1ZG9Db250ZW50KG5vZGUsIGNsb25lLCBzdHlsZUFmdGVyLCBQc2V1ZG9FbGVtZW50VHlwZS5BRlRFUik7CiAgICAgICAgICAgICAgICBpZiAoYWZ0ZXIpIHsKICAgICAgICAgICAgICAgICAgICBjbG9uZS5hcHBlbmRDaGlsZChhZnRlcik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0aGlzLmNvdW50ZXJzLnBvcChjb3VudGVycyk7CiAgICAgICAgICAgICAgICBpZiAoKHN0eWxlICYmICh0aGlzLm9wdGlvbnMuY29weVN0eWxlcyB8fCBpc1NWR0VsZW1lbnROb2RlKG5vZGUpKSAmJiAhaXNJRnJhbWVFbGVtZW50KG5vZGUpKSB8fAogICAgICAgICAgICAgICAgICAgIGNvcHlTdHlsZXMpIHsKICAgICAgICAgICAgICAgICAgICBjb3B5Q1NTU3R5bGVzKHN0eWxlLCBjbG9uZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAobm9kZS5zY3JvbGxUb3AgIT09IDAgfHwgbm9kZS5zY3JvbGxMZWZ0ICE9PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxlZEVsZW1lbnRzLnB1c2goW2Nsb25lLCBub2RlLnNjcm9sbExlZnQsIG5vZGUuc2Nyb2xsVG9wXSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoKGlzVGV4dGFyZWFFbGVtZW50KG5vZGUpIHx8IGlzU2VsZWN0RWxlbWVudChub2RlKSkgJiYKICAgICAgICAgICAgICAgICAgICAoaXNUZXh0YXJlYUVsZW1lbnQoY2xvbmUpIHx8IGlzU2VsZWN0RWxlbWVudChjbG9uZSkpKSB7CiAgICAgICAgICAgICAgICAgICAgY2xvbmUudmFsdWUgPSBub2RlLnZhbHVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIGNsb25lOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBub2RlLmNsb25lTm9kZShmYWxzZSk7CiAgICAgICAgfTsKICAgICAgICBEb2N1bWVudENsb25lci5wcm90b3R5cGUucmVzb2x2ZVBzZXVkb0NvbnRlbnQgPSBmdW5jdGlvbiAobm9kZSwgY2xvbmUsIHN0eWxlLCBwc2V1ZG9FbHQpIHsKICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgICAgICAgaWYgKCFzdHlsZSkgewogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciB2YWx1ZSA9IHN0eWxlLmNvbnRlbnQ7CiAgICAgICAgICAgIHZhciBkb2N1bWVudCA9IGNsb25lLm93bmVyRG9jdW1lbnQ7CiAgICAgICAgICAgIGlmICghZG9jdW1lbnQgfHwgIXZhbHVlIHx8IHZhbHVlID09PSAnbm9uZScgfHwgdmFsdWUgPT09ICctbW96LWFsdC1jb250ZW50JyB8fCBzdHlsZS5kaXNwbGF5ID09PSAnbm9uZScpIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLmNvdW50ZXJzLnBhcnNlKG5ldyBDU1NQYXJzZWRDb3VudGVyRGVjbGFyYXRpb24odGhpcy5jb250ZXh0LCBzdHlsZSkpOwogICAgICAgICAgICB2YXIgZGVjbGFyYXRpb24gPSBuZXcgQ1NTUGFyc2VkUHNldWRvRGVjbGFyYXRpb24odGhpcy5jb250ZXh0LCBzdHlsZSk7CiAgICAgICAgICAgIHZhciBhbm9ueW1vdXNSZXBsYWNlZEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdodG1sMmNhbnZhc3BzZXVkb2VsZW1lbnQnKTsKICAgICAgICAgICAgY29weUNTU1N0eWxlcyhzdHlsZSwgYW5vbnltb3VzUmVwbGFjZWRFbGVtZW50KTsKICAgICAgICAgICAgZGVjbGFyYXRpb24uY29udGVudC5mb3JFYWNoKGZ1bmN0aW9uICh0b2tlbikgewogICAgICAgICAgICAgICAgaWYgKHRva2VuLnR5cGUgPT09IDAgLyogU1RSSU5HX1RPS0VOICovKSB7CiAgICAgICAgICAgICAgICAgICAgYW5vbnltb3VzUmVwbGFjZWRFbGVtZW50LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRva2VuLnZhbHVlKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIGlmICh0b2tlbi50eXBlID09PSAyMiAvKiBVUkxfVE9LRU4gKi8pIHsKICAgICAgICAgICAgICAgICAgICB2YXIgaW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7CiAgICAgICAgICAgICAgICAgICAgaW1nLnNyYyA9IHRva2VuLnZhbHVlOwogICAgICAgICAgICAgICAgICAgIGltZy5zdHlsZS5vcGFjaXR5ID0gJzEnOwogICAgICAgICAgICAgICAgICAgIGFub255bW91c1JlcGxhY2VkRWxlbWVudC5hcHBlbmRDaGlsZChpbWcpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSBpZiAodG9rZW4udHlwZSA9PT0gMTggLyogRlVOQ1RJT04gKi8pIHsKICAgICAgICAgICAgICAgICAgICBpZiAodG9rZW4ubmFtZSA9PT0gJ2F0dHInKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhdHRyID0gdG9rZW4udmFsdWVzLmZpbHRlcihpc0lkZW50VG9rZW4pOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXR0ci5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFub255bW91c1JlcGxhY2VkRWxlbWVudC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShub2RlLmdldEF0dHJpYnV0ZShhdHRyWzBdLnZhbHVlKSB8fCAnJykpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRva2VuLm5hbWUgPT09ICdjb3VudGVyJykgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgX2EgPSB0b2tlbi52YWx1ZXMuZmlsdGVyKG5vbkZ1bmN0aW9uQXJnU2VwYXJhdG9yKSwgY291bnRlciA9IF9hWzBdLCBjb3VudGVyU3R5bGUgPSBfYVsxXTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvdW50ZXIgJiYgaXNJZGVudFRva2VuKGNvdW50ZXIpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY291bnRlclN0YXRlID0gX3RoaXMuY291bnRlcnMuZ2V0Q291bnRlclZhbHVlKGNvdW50ZXIudmFsdWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvdW50ZXJUeXBlID0gY291bnRlclN0eWxlICYmIGlzSWRlbnRUb2tlbihjb3VudGVyU3R5bGUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBsaXN0U3R5bGVUeXBlLnBhcnNlKF90aGlzLmNvbnRleHQsIGNvdW50ZXJTdHlsZS52YWx1ZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IDMgLyogREVDSU1BTCAqLzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFub255bW91c1JlcGxhY2VkRWxlbWVudC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjcmVhdGVDb3VudGVyVGV4dChjb3VudGVyU3RhdGUsIGNvdW50ZXJUeXBlLCBmYWxzZSkpKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0b2tlbi5uYW1lID09PSAnY291bnRlcnMnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfYiA9IHRva2VuLnZhbHVlcy5maWx0ZXIobm9uRnVuY3Rpb25BcmdTZXBhcmF0b3IpLCBjb3VudGVyID0gX2JbMF0sIGRlbGltID0gX2JbMV0sIGNvdW50ZXJTdHlsZSA9IF9iWzJdOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoY291bnRlciAmJiBpc0lkZW50VG9rZW4oY291bnRlcikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb3VudGVyU3RhdGVzID0gX3RoaXMuY291bnRlcnMuZ2V0Q291bnRlclZhbHVlcyhjb3VudGVyLnZhbHVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb3VudGVyVHlwZV8xID0gY291bnRlclN0eWxlICYmIGlzSWRlbnRUb2tlbihjb3VudGVyU3R5bGUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBsaXN0U3R5bGVUeXBlLnBhcnNlKF90aGlzLmNvbnRleHQsIGNvdW50ZXJTdHlsZS52YWx1ZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IDMgLyogREVDSU1BTCAqLzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzZXBhcmF0b3IgPSBkZWxpbSAmJiBkZWxpbS50eXBlID09PSAwIC8qIFNUUklOR19UT0tFTiAqLyA/IGRlbGltLnZhbHVlIDogJyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGV4dCA9IGNvdW50ZXJTdGF0ZXMKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gY3JlYXRlQ291bnRlclRleHQodmFsdWUsIGNvdW50ZXJUeXBlXzEsIGZhbHNlKTsgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuam9pbihzZXBhcmF0b3IpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5vbnltb3VzUmVwbGFjZWRFbGVtZW50LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRleHQpKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRva2VuLnR5cGUgPT09IDIwIC8qIElERU5UX1RPS0VOICovKSB7CiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0b2tlbi52YWx1ZSkgewogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdvcGVuLXF1b3RlJzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFub255bW91c1JlcGxhY2VkRWxlbWVudC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShnZXRRdW90ZShkZWNsYXJhdGlvbi5xdW90ZXMsIF90aGlzLnF1b3RlRGVwdGgrKywgdHJ1ZSkpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdjbG9zZS1xdW90ZSc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbm9ueW1vdXNSZXBsYWNlZEVsZW1lbnQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoZ2V0UXVvdGUoZGVjbGFyYXRpb24ucXVvdGVzLCAtLV90aGlzLnF1b3RlRGVwdGgsIGZhbHNlKSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzYWZhcmkgZG9lc24ndCBwYXJzZSBzdHJpbmcgdG9rZW5zIGNvcnJlY3RseSBiZWNhdXNlIG9mIGxhY2sgb2YgcXVvdGVzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbm9ueW1vdXNSZXBsYWNlZEVsZW1lbnQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodG9rZW4udmFsdWUpKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBhbm9ueW1vdXNSZXBsYWNlZEVsZW1lbnQuY2xhc3NOYW1lID0gUFNFVURPX0hJREVfRUxFTUVOVF9DTEFTU19CRUZPUkUgKyAiICIgKyBQU0VVRE9fSElERV9FTEVNRU5UX0NMQVNTX0FGVEVSOwogICAgICAgICAgICB2YXIgbmV3Q2xhc3NOYW1lID0gcHNldWRvRWx0ID09PSBQc2V1ZG9FbGVtZW50VHlwZS5CRUZPUkUKICAgICAgICAgICAgICAgID8gIiAiICsgUFNFVURPX0hJREVfRUxFTUVOVF9DTEFTU19CRUZPUkUKICAgICAgICAgICAgICAgIDogIiAiICsgUFNFVURPX0hJREVfRUxFTUVOVF9DTEFTU19BRlRFUjsKICAgICAgICAgICAgaWYgKGlzU1ZHRWxlbWVudE5vZGUoY2xvbmUpKSB7CiAgICAgICAgICAgICAgICBjbG9uZS5jbGFzc05hbWUuYmFzZVZhbHVlICs9IG5ld0NsYXNzTmFtZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIGNsb25lLmNsYXNzTmFtZSArPSBuZXdDbGFzc05hbWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGFub255bW91c1JlcGxhY2VkRWxlbWVudDsKICAgICAgICB9OwogICAgICAgIERvY3VtZW50Q2xvbmVyLmRlc3Ryb3kgPSBmdW5jdGlvbiAoY29udGFpbmVyKSB7CiAgICAgICAgICAgIGlmIChjb250YWluZXIucGFyZW50Tm9kZSkgewogICAgICAgICAgICAgICAgY29udGFpbmVyLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoY29udGFpbmVyKTsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9OwogICAgICAgIHJldHVybiBEb2N1bWVudENsb25lcjsKICAgIH0oKSk7CiAgICB2YXIgUHNldWRvRWxlbWVudFR5cGU7CiAgICAoZnVuY3Rpb24gKFBzZXVkb0VsZW1lbnRUeXBlKSB7CiAgICAgICAgUHNldWRvRWxlbWVudFR5cGVbUHNldWRvRWxlbWVudFR5cGVbIkJFRk9SRSJdID0gMF0gPSAiQkVGT1JFIjsKICAgICAgICBQc2V1ZG9FbGVtZW50VHlwZVtQc2V1ZG9FbGVtZW50VHlwZVsiQUZURVIiXSA9IDFdID0gIkFGVEVSIjsKICAgIH0pKFBzZXVkb0VsZW1lbnRUeXBlIHx8IChQc2V1ZG9FbGVtZW50VHlwZSA9IHt9KSk7CiAgICB2YXIgY3JlYXRlSUZyYW1lQ29udGFpbmVyID0gZnVuY3Rpb24gKG93bmVyRG9jdW1lbnQsIGJvdW5kcykgewogICAgICAgIHZhciBjbG9uZUlmcmFtZUNvbnRhaW5lciA9IG93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaWZyYW1lJyk7CiAgICAgICAgY2xvbmVJZnJhbWVDb250YWluZXIuY2xhc3NOYW1lID0gJ2h0bWwyY2FudmFzLWNvbnRhaW5lcic7CiAgICAgICAgY2xvbmVJZnJhbWVDb250YWluZXIuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nOwogICAgICAgIGNsb25lSWZyYW1lQ29udGFpbmVyLnN0eWxlLnBvc2l0aW9uID0gJ2ZpeGVkJzsKICAgICAgICBjbG9uZUlmcmFtZUNvbnRhaW5lci5zdHlsZS5sZWZ0ID0gJy0xMDAwMHB4JzsKICAgICAgICBjbG9uZUlmcmFtZUNvbnRhaW5lci5zdHlsZS50b3AgPSAnMHB4JzsKICAgICAgICBjbG9uZUlmcmFtZUNvbnRhaW5lci5zdHlsZS5ib3JkZXIgPSAnMCc7CiAgICAgICAgY2xvbmVJZnJhbWVDb250YWluZXIud2lkdGggPSBib3VuZHMud2lkdGgudG9TdHJpbmcoKTsKICAgICAgICBjbG9uZUlmcmFtZUNvbnRhaW5lci5oZWlnaHQgPSBib3VuZHMuaGVpZ2h0LnRvU3RyaW5nKCk7CiAgICAgICAgY2xvbmVJZnJhbWVDb250YWluZXIuc2Nyb2xsaW5nID0gJ25vJzsgLy8gaW9zIHdvbid0IHNjcm9sbCB3aXRob3V0IGl0CiAgICAgICAgY2xvbmVJZnJhbWVDb250YWluZXIuc2V0QXR0cmlidXRlKElHTk9SRV9BVFRSSUJVVEUsICd0cnVlJyk7CiAgICAgICAgb3duZXJEb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNsb25lSWZyYW1lQ29udGFpbmVyKTsKICAgICAgICByZXR1cm4gY2xvbmVJZnJhbWVDb250YWluZXI7CiAgICB9OwogICAgdmFyIGltYWdlUmVhZHkgPSBmdW5jdGlvbiAoaW1nKSB7CiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgICAgICAgIGlmIChpbWcuY29tcGxldGUpIHsKICAgICAgICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoIWltZy5zcmMpIHsKICAgICAgICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICBpbWcub25sb2FkID0gcmVzb2x2ZTsKICAgICAgICAgICAgaW1nLm9uZXJyb3IgPSByZXNvbHZlOwogICAgICAgIH0pOwogICAgfTsKICAgIHZhciBpbWFnZXNSZWFkeSA9IGZ1bmN0aW9uIChkb2N1bWVudCkgewogICAgICAgIHJldHVybiBQcm9taXNlLmFsbChbXS5zbGljZS5jYWxsKGRvY3VtZW50LmltYWdlcywgMCkubWFwKGltYWdlUmVhZHkpKTsKICAgIH07CiAgICB2YXIgaWZyYW1lTG9hZGVyID0gZnVuY3Rpb24gKGlmcmFtZSkgewogICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgICAgIHZhciBjbG9uZVdpbmRvdyA9IGlmcmFtZS5jb250ZW50V2luZG93OwogICAgICAgICAgICBpZiAoIWNsb25lV2luZG93KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KCJObyB3aW5kb3cgYXNzaWduZWQgZm9yIGlmcmFtZSIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciBkb2N1bWVudENsb25lID0gY2xvbmVXaW5kb3cuZG9jdW1lbnQ7CiAgICAgICAgICAgIGNsb25lV2luZG93Lm9ubG9hZCA9IGlmcmFtZS5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBjbG9uZVdpbmRvdy5vbmxvYWQgPSBpZnJhbWUub25sb2FkID0gbnVsbDsKICAgICAgICAgICAgICAgIHZhciBpbnRlcnZhbCA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnRDbG9uZS5ib2R5LmNoaWxkTm9kZXMubGVuZ3RoID4gMCAmJiBkb2N1bWVudENsb25lLnJlYWR5U3RhdGUgPT09ICdjb21wbGV0ZScpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoaWZyYW1lKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LCA1MCk7CiAgICAgICAgICAgIH07CiAgICAgICAgfSk7CiAgICB9OwogICAgdmFyIGlnbm9yZWRTdHlsZVByb3BlcnRpZXMgPSBbCiAgICAgICAgJ2FsbCcsCiAgICAgICAgJ2QnLAogICAgICAgICdjb250ZW50JyAvLyBTYWZhcmkgc2hvd3MgcHNldWRvZWxlbWVudHMgaWYgY29udGVudCBpcyBzZXQKICAgIF07CiAgICB2YXIgY29weUNTU1N0eWxlcyA9IGZ1bmN0aW9uIChzdHlsZSwgdGFyZ2V0KSB7CiAgICAgICAgLy8gRWRnZSBkb2VzIG5vdCBwcm92aWRlIHZhbHVlIGZvciBjc3NUZXh0CiAgICAgICAgZm9yICh2YXIgaSA9IHN0eWxlLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7CiAgICAgICAgICAgIHZhciBwcm9wZXJ0eSA9IHN0eWxlLml0ZW0oaSk7CiAgICAgICAgICAgIGlmIChpZ25vcmVkU3R5bGVQcm9wZXJ0aWVzLmluZGV4T2YocHJvcGVydHkpID09PSAtMSkgewogICAgICAgICAgICAgICAgdGFyZ2V0LnN0eWxlLnNldFByb3BlcnR5KHByb3BlcnR5LCBzdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKHByb3BlcnR5KSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH07CiAgICB2YXIgc2VyaWFsaXplRG9jdHlwZSA9IGZ1bmN0aW9uIChkb2N0eXBlKSB7CiAgICAgICAgdmFyIHN0ciA9ICcnOwogICAgICAgIGlmIChkb2N0eXBlKSB7CiAgICAgICAgICAgIHN0ciArPSAnPCFET0NUWVBFICc7CiAgICAgICAgICAgIGlmIChkb2N0eXBlLm5hbWUpIHsKICAgICAgICAgICAgICAgIHN0ciArPSBkb2N0eXBlLm5hbWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGRvY3R5cGUuaW50ZXJuYWxTdWJzZXQpIHsKICAgICAgICAgICAgICAgIHN0ciArPSBkb2N0eXBlLmludGVybmFsU3Vic2V0OwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChkb2N0eXBlLnB1YmxpY0lkKSB7CiAgICAgICAgICAgICAgICBzdHIgKz0gIlwiIiArIGRvY3R5cGUucHVibGljSWQgKyAiXCIiOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChkb2N0eXBlLnN5c3RlbUlkKSB7CiAgICAgICAgICAgICAgICBzdHIgKz0gIlwiIiArIGRvY3R5cGUuc3lzdGVtSWQgKyAiXCIiOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHN0ciArPSAnPic7CiAgICAgICAgfQogICAgICAgIHJldHVybiBzdHI7CiAgICB9OwogICAgdmFyIHJlc3RvcmVPd25lclNjcm9sbCA9IGZ1bmN0aW9uIChvd25lckRvY3VtZW50LCB4LCB5KSB7CiAgICAgICAgaWYgKG93bmVyRG9jdW1lbnQgJiYKICAgICAgICAgICAgb3duZXJEb2N1bWVudC5kZWZhdWx0VmlldyAmJgogICAgICAgICAgICAoeCAhPT0gb3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldy5wYWdlWE9mZnNldCB8fCB5ICE9PSBvd25lckRvY3VtZW50LmRlZmF1bHRWaWV3LnBhZ2VZT2Zmc2V0KSkgewogICAgICAgICAgICBvd25lckRvY3VtZW50LmRlZmF1bHRWaWV3LnNjcm9sbFRvKHgsIHkpOwogICAgICAgIH0KICAgIH07CiAgICB2YXIgcmVzdG9yZU5vZGVTY3JvbGwgPSBmdW5jdGlvbiAoX2EpIHsKICAgICAgICB2YXIgZWxlbWVudCA9IF9hWzBdLCB4ID0gX2FbMV0sIHkgPSBfYVsyXTsKICAgICAgICBlbGVtZW50LnNjcm9sbExlZnQgPSB4OwogICAgICAgIGVsZW1lbnQuc2Nyb2xsVG9wID0geTsKICAgIH07CiAgICB2YXIgUFNFVURPX0JFRk9SRSA9ICc6YmVmb3JlJzsKICAgIHZhciBQU0VVRE9fQUZURVIgPSAnOmFmdGVyJzsKICAgIHZhciBQU0VVRE9fSElERV9FTEVNRU5UX0NMQVNTX0JFRk9SRSA9ICdfX19odG1sMmNhbnZhc19fX3BzZXVkb2VsZW1lbnRfYmVmb3JlJzsKICAgIHZhciBQU0VVRE9fSElERV9FTEVNRU5UX0NMQVNTX0FGVEVSID0gJ19fX2h0bWwyY2FudmFzX19fcHNldWRvZWxlbWVudF9hZnRlcic7CiAgICB2YXIgUFNFVURPX0hJREVfRUxFTUVOVF9TVFlMRSA9ICJ7XG4gICAgY29udGVudDogXCJcIiAhaW1wb3J0YW50O1xuICAgIGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDtcbn0iOwogICAgdmFyIGNyZWF0ZVBzZXVkb0hpZGVTdHlsZXMgPSBmdW5jdGlvbiAoYm9keSkgewogICAgICAgIGNyZWF0ZVN0eWxlcyhib2R5LCAiLiIgKyBQU0VVRE9fSElERV9FTEVNRU5UX0NMQVNTX0JFRk9SRSArIFBTRVVET19CRUZPUkUgKyBQU0VVRE9fSElERV9FTEVNRU5UX1NUWUxFICsgIlxuICAgICAgICAgLiIgKyBQU0VVRE9fSElERV9FTEVNRU5UX0NMQVNTX0FGVEVSICsgUFNFVURPX0FGVEVSICsgUFNFVURPX0hJREVfRUxFTUVOVF9TVFlMRSk7CiAgICB9OwogICAgdmFyIGNyZWF0ZVN0eWxlcyA9IGZ1bmN0aW9uIChib2R5LCBzdHlsZXMpIHsKICAgICAgICB2YXIgZG9jdW1lbnQgPSBib2R5Lm93bmVyRG9jdW1lbnQ7CiAgICAgICAgaWYgKGRvY3VtZW50KSB7CiAgICAgICAgICAgIHZhciBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7CiAgICAgICAgICAgIHN0eWxlLnRleHRDb250ZW50ID0gc3R5bGVzOwogICAgICAgICAgICBib2R5LmFwcGVuZENoaWxkKHN0eWxlKTsKICAgICAgICB9CiAgICB9OwoKICAgIHZhciBDYWNoZVN0b3JhZ2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CiAgICAgICAgZnVuY3Rpb24gQ2FjaGVTdG9yYWdlKCkgewogICAgICAgIH0KICAgICAgICBDYWNoZVN0b3JhZ2UuZ2V0T3JpZ2luID0gZnVuY3Rpb24gKHVybCkgewogICAgICAgICAgICB2YXIgbGluayA9IENhY2hlU3RvcmFnZS5fbGluazsKICAgICAgICAgICAgaWYgKCFsaW5rKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gJ2Fib3V0OmJsYW5rJzsKICAgICAgICAgICAgfQogICAgICAgICAgICBsaW5rLmhyZWYgPSB1cmw7CiAgICAgICAgICAgIGxpbmsuaHJlZiA9IGxpbmsuaHJlZjsgLy8gSUU5LCBMT0whIC0gaHR0cDovL2pzZmlkZGxlLm5ldC9uaWtsYXN2aC8yZTQ4Yi8KICAgICAgICAgICAgcmV0dXJuIGxpbmsucHJvdG9jb2wgKyBsaW5rLmhvc3RuYW1lICsgbGluay5wb3J0OwogICAgICAgIH07CiAgICAgICAgQ2FjaGVTdG9yYWdlLmlzU2FtZU9yaWdpbiA9IGZ1bmN0aW9uIChzcmMpIHsKICAgICAgICAgICAgcmV0dXJuIENhY2hlU3RvcmFnZS5nZXRPcmlnaW4oc3JjKSA9PT0gQ2FjaGVTdG9yYWdlLl9vcmlnaW47CiAgICAgICAgfTsKICAgICAgICBDYWNoZVN0b3JhZ2Uuc2V0Q29udGV4dCA9IGZ1bmN0aW9uICh3aW5kb3cpIHsKICAgICAgICAgICAgQ2FjaGVTdG9yYWdlLl9saW5rID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgICAgICAgQ2FjaGVTdG9yYWdlLl9vcmlnaW4gPSBDYWNoZVN0b3JhZ2UuZ2V0T3JpZ2luKHdpbmRvdy5sb2NhdGlvbi5ocmVmKTsKICAgICAgICB9OwogICAgICAgIENhY2hlU3RvcmFnZS5fb3JpZ2luID0gJ2Fib3V0OmJsYW5rJzsKICAgICAgICByZXR1cm4gQ2FjaGVTdG9yYWdlOwogICAgfSgpKTsKICAgIHZhciBDYWNoZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKICAgICAgICBmdW5jdGlvbiBDYWNoZShjb250ZXh0LCBfb3B0aW9ucykgewogICAgICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0OwogICAgICAgICAgICB0aGlzLl9vcHRpb25zID0gX29wdGlvbnM7CiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55CiAgICAgICAgICAgIHRoaXMuX2NhY2hlID0ge307CiAgICAgICAgfQogICAgICAgIENhY2hlLnByb3RvdHlwZS5hZGRJbWFnZSA9IGZ1bmN0aW9uIChzcmMpIHsKICAgICAgICAgICAgdmFyIHJlc3VsdCA9IFByb21pc2UucmVzb2x2ZSgpOwogICAgICAgICAgICBpZiAodGhpcy5oYXMoc3JjKSkgewogICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoaXNCbG9iSW1hZ2Uoc3JjKSB8fCBpc1JlbmRlcmFibGUoc3JjKSkgewogICAgICAgICAgICAgICAgKHRoaXMuX2NhY2hlW3NyY10gPSB0aGlzLmxvYWRJbWFnZShzcmMpKS5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gcHJldmVudCB1bmhhbmRsZWQgcmVqZWN0aW9uCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgICB9OwogICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55CiAgICAgICAgQ2FjaGUucHJvdG90eXBlLm1hdGNoID0gZnVuY3Rpb24gKHNyYykgewogICAgICAgICAgICByZXR1cm4gdGhpcy5fY2FjaGVbc3JjXTsKICAgICAgICB9OwogICAgICAgIENhY2hlLnByb3RvdHlwZS5sb2FkSW1hZ2UgPSBmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciBpc1NhbWVPcmlnaW4sIHVzZUNPUlMsIHVzZVByb3h5LCBzcmM7CiAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkgewogICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNTYW1lT3JpZ2luID0gQ2FjaGVTdG9yYWdlLmlzU2FtZU9yaWdpbihrZXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlQ09SUyA9ICFpc0lubGluZUltYWdlKGtleSkgJiYgdGhpcy5fb3B0aW9ucy51c2VDT1JTID09PSB0cnVlICYmIEZFQVRVUkVTLlNVUFBPUlRfQ09SU19JTUFHRVMgJiYgIWlzU2FtZU9yaWdpbjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZVByb3h5ID0gIWlzSW5saW5lSW1hZ2Uoa2V5KSAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICFpc1NhbWVPcmlnaW4gJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhaXNCbG9iSW1hZ2Uoa2V5KSAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVvZiB0aGlzLl9vcHRpb25zLnByb3h5ID09PSAnc3RyaW5nJyAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZFQVRVUkVTLlNVUFBPUlRfQ09SU19YSFIgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhdXNlQ09SUzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNTYW1lT3JpZ2luICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fb3B0aW9ucy5hbGxvd1RhaW50ID09PSBmYWxzZSAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICFpc0lubGluZUltYWdlKGtleSkgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhaXNCbG9iSW1hZ2Uoa2V5KSAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICF1c2VQcm94eSAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICF1c2VDT1JTKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjID0ga2V5OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF1c2VQcm94eSkgcmV0dXJuIFszIC8qYnJlYWsqLywgMl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnByb3h5KHNyYyldOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmMgPSBfYS5zZW50KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDI7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dC5sb2dnZXIuZGVidWcoIkFkZGVkIGltYWdlICIgKyBrZXkuc3Vic3RyaW5nKDAsIDI1NikpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW1nID0gbmV3IEltYWdlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltZy5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiByZXNvbHZlKGltZyk7IH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltZy5vbmVycm9yID0gcmVqZWN0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2lvcyBzYWZhcmkgMTAuMyB0YWludHMgY2FudmFzIHdpdGggZGF0YSB1cmxzIHVubGVzcyBjcm9zc09yaWdpbiBpcyBzZXQgdG8gYW5vbnltb3VzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0lubGluZUJhc2U2NEltYWdlKHNyYykgfHwgdXNlQ09SUykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nLmNyb3NzT3JpZ2luID0gJ2Fub255bW91cyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nLnNyYyA9IHNyYzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGltZy5jb21wbGV0ZSA9PT0gdHJ1ZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW5saW5lIFhNTCBpbWFnZXMgbWF5IGZhaWwgdG8gcGFyc2UsIHRocm93aW5nIGFuIEVycm9yIGxhdGVyIG9uCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJlc29sdmUoaW1nKTsgfSwgNTAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuX29wdGlvbnMuaW1hZ2VUaW1lb3V0ID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IHJldHVybiByZWplY3QoIlRpbWVkIG91dCAoIiArIF90aGlzLl9vcHRpb25zLmltYWdlVGltZW91dCArICJtcykgbG9hZGluZyBpbWFnZSIpOyB9LCBfdGhpcy5fb3B0aW9ucy5pbWFnZVRpbWVvdXQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSldOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbMiAvKnJldHVybiovLCBfYS5zZW50KCldOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICB9OwogICAgICAgIENhY2hlLnByb3RvdHlwZS5oYXMgPSBmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgICAgIHJldHVybiB0eXBlb2YgdGhpcy5fY2FjaGVba2V5XSAhPT0gJ3VuZGVmaW5lZCc7CiAgICAgICAgfTsKICAgICAgICBDYWNoZS5wcm90b3R5cGUua2V5cyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShPYmplY3Qua2V5cyh0aGlzLl9jYWNoZSkpOwogICAgICAgIH07CiAgICAgICAgQ2FjaGUucHJvdG90eXBlLnByb3h5ID0gZnVuY3Rpb24gKHNyYykgewogICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICAgICAgICB2YXIgcHJveHkgPSB0aGlzLl9vcHRpb25zLnByb3h5OwogICAgICAgICAgICBpZiAoIXByb3h5KSB7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHByb3h5IGRlZmluZWQnKTsKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIga2V5ID0gc3JjLnN1YnN0cmluZygwLCAyNTYpOwogICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgICAgICAgICAgdmFyIHJlc3BvbnNlVHlwZSA9IEZFQVRVUkVTLlNVUFBPUlRfUkVTUE9OU0VfVFlQRSA/ICdibG9iJyA6ICd0ZXh0JzsKICAgICAgICAgICAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKICAgICAgICAgICAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHhoci5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2VUeXBlID09PSAndGV4dCcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoeGhyLnJlc3BvbnNlKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZWFkZXJfMSA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkZXJfMS5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgZnVuY3Rpb24gKCkgeyByZXR1cm4gcmVzb2x2ZShyZWFkZXJfMS5yZXN1bHQpOyB9LCBmYWxzZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkZXJfMS5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIGZ1bmN0aW9uIChlKSB7IHJldHVybiByZWplY3QoZSk7IH0sIGZhbHNlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlcl8xLnJlYWRBc0RhdGFVUkwoeGhyLnJlc3BvbnNlKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KCJGYWlsZWQgdG8gcHJveHkgcmVzb3VyY2UgIiArIGtleSArICIgd2l0aCBzdGF0dXMgY29kZSAiICsgeGhyLnN0YXR1cyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHhoci5vbmVycm9yID0gcmVqZWN0OwogICAgICAgICAgICAgICAgdmFyIHF1ZXJ5U3RyaW5nID0gcHJveHkuaW5kZXhPZignPycpID4gLTEgPyAnJicgOiAnPyc7CiAgICAgICAgICAgICAgICB4aHIub3BlbignR0VUJywgIiIgKyBwcm94eSArIHF1ZXJ5U3RyaW5nICsgInVybD0iICsgZW5jb2RlVVJJQ29tcG9uZW50KHNyYykgKyAiJnJlc3BvbnNlVHlwZT0iICsgcmVzcG9uc2VUeXBlKTsKICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZVR5cGUgIT09ICd0ZXh0JyAmJiB4aHIgaW5zdGFuY2VvZiBYTUxIdHRwUmVxdWVzdCkgewogICAgICAgICAgICAgICAgICAgIHhoci5yZXNwb25zZVR5cGUgPSByZXNwb25zZVR5cGU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoX3RoaXMuX29wdGlvbnMuaW1hZ2VUaW1lb3V0KSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHRpbWVvdXRfMSA9IF90aGlzLl9vcHRpb25zLmltYWdlVGltZW91dDsKICAgICAgICAgICAgICAgICAgICB4aHIudGltZW91dCA9IHRpbWVvdXRfMTsKICAgICAgICAgICAgICAgICAgICB4aHIub250aW1lb3V0ID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gcmVqZWN0KCJUaW1lZCBvdXQgKCIgKyB0aW1lb3V0XzEgKyAibXMpIHByb3h5aW5nICIgKyBrZXkpOyB9OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgeGhyLnNlbmQoKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKICAgICAgICByZXR1cm4gQ2FjaGU7CiAgICB9KCkpOwogICAgdmFyIElOTElORV9TVkcgPSAvXmRhdGE6aW1hZ2VcL3N2Z1wreG1sL2k7CiAgICB2YXIgSU5MSU5FX0JBU0U2NCA9IC9eZGF0YTppbWFnZVwvLio7YmFzZTY0LC9pOwogICAgdmFyIElOTElORV9JTUcgPSAvXmRhdGE6aW1hZ2VcLy4qL2k7CiAgICB2YXIgaXNSZW5kZXJhYmxlID0gZnVuY3Rpb24gKHNyYykgeyByZXR1cm4gRkVBVFVSRVMuU1VQUE9SVF9TVkdfRFJBV0lORyB8fCAhaXNTVkcoc3JjKTsgfTsKICAgIHZhciBpc0lubGluZUltYWdlID0gZnVuY3Rpb24gKHNyYykgeyByZXR1cm4gSU5MSU5FX0lNRy50ZXN0KHNyYyk7IH07CiAgICB2YXIgaXNJbmxpbmVCYXNlNjRJbWFnZSA9IGZ1bmN0aW9uIChzcmMpIHsgcmV0dXJuIElOTElORV9CQVNFNjQudGVzdChzcmMpOyB9OwogICAgdmFyIGlzQmxvYkltYWdlID0gZnVuY3Rpb24gKHNyYykgeyByZXR1cm4gc3JjLnN1YnN0cigwLCA0KSA9PT0gJ2Jsb2InOyB9OwogICAgdmFyIGlzU1ZHID0gZnVuY3Rpb24gKHNyYykgeyByZXR1cm4gc3JjLnN1YnN0cigtMykudG9Mb3dlckNhc2UoKSA9PT0gJ3N2ZycgfHwgSU5MSU5FX1NWRy50ZXN0KHNyYyk7IH07CgogICAgdmFyIFZlY3RvciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKICAgICAgICBmdW5jdGlvbiBWZWN0b3IoeCwgeSkgewogICAgICAgICAgICB0aGlzLnR5cGUgPSAwIC8qIFZFQ1RPUiAqLzsKICAgICAgICAgICAgdGhpcy54ID0geDsKICAgICAgICAgICAgdGhpcy55ID0geTsKICAgICAgICB9CiAgICAgICAgVmVjdG9yLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAoZGVsdGFYLCBkZWx0YVkpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IodGhpcy54ICsgZGVsdGFYLCB0aGlzLnkgKyBkZWx0YVkpOwogICAgICAgIH07CiAgICAgICAgcmV0dXJuIFZlY3RvcjsKICAgIH0oKSk7CgogICAgdmFyIGxlcnAgPSBmdW5jdGlvbiAoYSwgYiwgdCkgewogICAgICAgIHJldHVybiBuZXcgVmVjdG9yKGEueCArIChiLnggLSBhLngpICogdCwgYS55ICsgKGIueSAtIGEueSkgKiB0KTsKICAgIH07CiAgICB2YXIgQmV6aWVyQ3VydmUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CiAgICAgICAgZnVuY3Rpb24gQmV6aWVyQ3VydmUoc3RhcnQsIHN0YXJ0Q29udHJvbCwgZW5kQ29udHJvbCwgZW5kKSB7CiAgICAgICAgICAgIHRoaXMudHlwZSA9IDEgLyogQkVaSUVSX0NVUlZFICovOwogICAgICAgICAgICB0aGlzLnN0YXJ0ID0gc3RhcnQ7CiAgICAgICAgICAgIHRoaXMuc3RhcnRDb250cm9sID0gc3RhcnRDb250cm9sOwogICAgICAgICAgICB0aGlzLmVuZENvbnRyb2wgPSBlbmRDb250cm9sOwogICAgICAgICAgICB0aGlzLmVuZCA9IGVuZDsKICAgICAgICB9CiAgICAgICAgQmV6aWVyQ3VydmUucHJvdG90eXBlLnN1YmRpdmlkZSA9IGZ1bmN0aW9uICh0LCBmaXJzdEhhbGYpIHsKICAgICAgICAgICAgdmFyIGFiID0gbGVycCh0aGlzLnN0YXJ0LCB0aGlzLnN0YXJ0Q29udHJvbCwgdCk7CiAgICAgICAgICAgIHZhciBiYyA9IGxlcnAodGhpcy5zdGFydENvbnRyb2wsIHRoaXMuZW5kQ29udHJvbCwgdCk7CiAgICAgICAgICAgIHZhciBjZCA9IGxlcnAodGhpcy5lbmRDb250cm9sLCB0aGlzLmVuZCwgdCk7CiAgICAgICAgICAgIHZhciBhYmJjID0gbGVycChhYiwgYmMsIHQpOwogICAgICAgICAgICB2YXIgYmNjZCA9IGxlcnAoYmMsIGNkLCB0KTsKICAgICAgICAgICAgdmFyIGRlc3QgPSBsZXJwKGFiYmMsIGJjY2QsIHQpOwogICAgICAgICAgICByZXR1cm4gZmlyc3RIYWxmID8gbmV3IEJlemllckN1cnZlKHRoaXMuc3RhcnQsIGFiLCBhYmJjLCBkZXN0KSA6IG5ldyBCZXppZXJDdXJ2ZShkZXN0LCBiY2NkLCBjZCwgdGhpcy5lbmQpOwogICAgICAgIH07CiAgICAgICAgQmV6aWVyQ3VydmUucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIChkZWx0YVgsIGRlbHRhWSkgewogICAgICAgICAgICByZXR1cm4gbmV3IEJlemllckN1cnZlKHRoaXMuc3RhcnQuYWRkKGRlbHRhWCwgZGVsdGFZKSwgdGhpcy5zdGFydENvbnRyb2wuYWRkKGRlbHRhWCwgZGVsdGFZKSwgdGhpcy5lbmRDb250cm9sLmFkZChkZWx0YVgsIGRlbHRhWSksIHRoaXMuZW5kLmFkZChkZWx0YVgsIGRlbHRhWSkpOwogICAgICAgIH07CiAgICAgICAgQmV6aWVyQ3VydmUucHJvdG90eXBlLnJldmVyc2UgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgQmV6aWVyQ3VydmUodGhpcy5lbmQsIHRoaXMuZW5kQ29udHJvbCwgdGhpcy5zdGFydENvbnRyb2wsIHRoaXMuc3RhcnQpOwogICAgICAgIH07CiAgICAgICAgcmV0dXJuIEJlemllckN1cnZlOwogICAgfSgpKTsKICAgIHZhciBpc0JlemllckN1cnZlID0gZnVuY3Rpb24gKHBhdGgpIHsgcmV0dXJuIHBhdGgudHlwZSA9PT0gMSAvKiBCRVpJRVJfQ1VSVkUgKi87IH07CgogICAgdmFyIEJvdW5kQ3VydmVzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewogICAgICAgIGZ1bmN0aW9uIEJvdW5kQ3VydmVzKGVsZW1lbnQpIHsKICAgICAgICAgICAgdmFyIHN0eWxlcyA9IGVsZW1lbnQuc3R5bGVzOwogICAgICAgICAgICB2YXIgYm91bmRzID0gZWxlbWVudC5ib3VuZHM7CiAgICAgICAgICAgIHZhciBfYSA9IGdldEFic29sdXRlVmFsdWVGb3JUdXBsZShzdHlsZXMuYm9yZGVyVG9wTGVmdFJhZGl1cywgYm91bmRzLndpZHRoLCBib3VuZHMuaGVpZ2h0KSwgdGxoID0gX2FbMF0sIHRsdiA9IF9hWzFdOwogICAgICAgICAgICB2YXIgX2IgPSBnZXRBYnNvbHV0ZVZhbHVlRm9yVHVwbGUoc3R5bGVzLmJvcmRlclRvcFJpZ2h0UmFkaXVzLCBib3VuZHMud2lkdGgsIGJvdW5kcy5oZWlnaHQpLCB0cmggPSBfYlswXSwgdHJ2ID0gX2JbMV07CiAgICAgICAgICAgIHZhciBfYyA9IGdldEFic29sdXRlVmFsdWVGb3JUdXBsZShzdHlsZXMuYm9yZGVyQm90dG9tUmlnaHRSYWRpdXMsIGJvdW5kcy53aWR0aCwgYm91bmRzLmhlaWdodCksIGJyaCA9IF9jWzBdLCBicnYgPSBfY1sxXTsKICAgICAgICAgICAgdmFyIF9kID0gZ2V0QWJzb2x1dGVWYWx1ZUZvclR1cGxlKHN0eWxlcy5ib3JkZXJCb3R0b21MZWZ0UmFkaXVzLCBib3VuZHMud2lkdGgsIGJvdW5kcy5oZWlnaHQpLCBibGggPSBfZFswXSwgYmx2ID0gX2RbMV07CiAgICAgICAgICAgIHZhciBmYWN0b3JzID0gW107CiAgICAgICAgICAgIGZhY3RvcnMucHVzaCgodGxoICsgdHJoKSAvIGJvdW5kcy53aWR0aCk7CiAgICAgICAgICAgIGZhY3RvcnMucHVzaCgoYmxoICsgYnJoKSAvIGJvdW5kcy53aWR0aCk7CiAgICAgICAgICAgIGZhY3RvcnMucHVzaCgodGx2ICsgYmx2KSAvIGJvdW5kcy5oZWlnaHQpOwogICAgICAgICAgICBmYWN0b3JzLnB1c2goKHRydiArIGJydikgLyBib3VuZHMuaGVpZ2h0KTsKICAgICAgICAgICAgdmFyIG1heEZhY3RvciA9IE1hdGgubWF4LmFwcGx5KE1hdGgsIGZhY3RvcnMpOwogICAgICAgICAgICBpZiAobWF4RmFjdG9yID4gMSkgewogICAgICAgICAgICAgICAgdGxoIC89IG1heEZhY3RvcjsKICAgICAgICAgICAgICAgIHRsdiAvPSBtYXhGYWN0b3I7CiAgICAgICAgICAgICAgICB0cmggLz0gbWF4RmFjdG9yOwogICAgICAgICAgICAgICAgdHJ2IC89IG1heEZhY3RvcjsKICAgICAgICAgICAgICAgIGJyaCAvPSBtYXhGYWN0b3I7CiAgICAgICAgICAgICAgICBicnYgLz0gbWF4RmFjdG9yOwogICAgICAgICAgICAgICAgYmxoIC89IG1heEZhY3RvcjsKICAgICAgICAgICAgICAgIGJsdiAvPSBtYXhGYWN0b3I7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIHRvcFdpZHRoID0gYm91bmRzLndpZHRoIC0gdHJoOwogICAgICAgICAgICB2YXIgcmlnaHRIZWlnaHQgPSBib3VuZHMuaGVpZ2h0IC0gYnJ2OwogICAgICAgICAgICB2YXIgYm90dG9tV2lkdGggPSBib3VuZHMud2lkdGggLSBicmg7CiAgICAgICAgICAgIHZhciBsZWZ0SGVpZ2h0ID0gYm91bmRzLmhlaWdodCAtIGJsdjsKICAgICAgICAgICAgdmFyIGJvcmRlclRvcFdpZHRoID0gc3R5bGVzLmJvcmRlclRvcFdpZHRoOwogICAgICAgICAgICB2YXIgYm9yZGVyUmlnaHRXaWR0aCA9IHN0eWxlcy5ib3JkZXJSaWdodFdpZHRoOwogICAgICAgICAgICB2YXIgYm9yZGVyQm90dG9tV2lkdGggPSBzdHlsZXMuYm9yZGVyQm90dG9tV2lkdGg7CiAgICAgICAgICAgIHZhciBib3JkZXJMZWZ0V2lkdGggPSBzdHlsZXMuYm9yZGVyTGVmdFdpZHRoOwogICAgICAgICAgICB2YXIgcGFkZGluZ1RvcCA9IGdldEFic29sdXRlVmFsdWUoc3R5bGVzLnBhZGRpbmdUb3AsIGVsZW1lbnQuYm91bmRzLndpZHRoKTsKICAgICAgICAgICAgdmFyIHBhZGRpbmdSaWdodCA9IGdldEFic29sdXRlVmFsdWUoc3R5bGVzLnBhZGRpbmdSaWdodCwgZWxlbWVudC5ib3VuZHMud2lkdGgpOwogICAgICAgICAgICB2YXIgcGFkZGluZ0JvdHRvbSA9IGdldEFic29sdXRlVmFsdWUoc3R5bGVzLnBhZGRpbmdCb3R0b20sIGVsZW1lbnQuYm91bmRzLndpZHRoKTsKICAgICAgICAgICAgdmFyIHBhZGRpbmdMZWZ0ID0gZ2V0QWJzb2x1dGVWYWx1ZShzdHlsZXMucGFkZGluZ0xlZnQsIGVsZW1lbnQuYm91bmRzLndpZHRoKTsKICAgICAgICAgICAgdGhpcy50b3BMZWZ0Qm9yZGVyRG91YmxlT3V0ZXJCb3ggPQogICAgICAgICAgICAgICAgdGxoID4gMCB8fCB0bHYgPiAwCiAgICAgICAgICAgICAgICAgICAgPyBnZXRDdXJ2ZVBvaW50cyhib3VuZHMubGVmdCArIGJvcmRlckxlZnRXaWR0aCAvIDMsIGJvdW5kcy50b3AgKyBib3JkZXJUb3BXaWR0aCAvIDMsIHRsaCAtIGJvcmRlckxlZnRXaWR0aCAvIDMsIHRsdiAtIGJvcmRlclRvcFdpZHRoIC8gMywgQ09STkVSLlRPUF9MRUZUKQogICAgICAgICAgICAgICAgICAgIDogbmV3IFZlY3Rvcihib3VuZHMubGVmdCArIGJvcmRlckxlZnRXaWR0aCAvIDMsIGJvdW5kcy50b3AgKyBib3JkZXJUb3BXaWR0aCAvIDMpOwogICAgICAgICAgICB0aGlzLnRvcFJpZ2h0Qm9yZGVyRG91YmxlT3V0ZXJCb3ggPQogICAgICAgICAgICAgICAgdGxoID4gMCB8fCB0bHYgPiAwCiAgICAgICAgICAgICAgICAgICAgPyBnZXRDdXJ2ZVBvaW50cyhib3VuZHMubGVmdCArIHRvcFdpZHRoLCBib3VuZHMudG9wICsgYm9yZGVyVG9wV2lkdGggLyAzLCB0cmggLSBib3JkZXJSaWdodFdpZHRoIC8gMywgdHJ2IC0gYm9yZGVyVG9wV2lkdGggLyAzLCBDT1JORVIuVE9QX1JJR0hUKQogICAgICAgICAgICAgICAgICAgIDogbmV3IFZlY3Rvcihib3VuZHMubGVmdCArIGJvdW5kcy53aWR0aCAtIGJvcmRlclJpZ2h0V2lkdGggLyAzLCBib3VuZHMudG9wICsgYm9yZGVyVG9wV2lkdGggLyAzKTsKICAgICAgICAgICAgdGhpcy5ib3R0b21SaWdodEJvcmRlckRvdWJsZU91dGVyQm94ID0KICAgICAgICAgICAgICAgIGJyaCA+IDAgfHwgYnJ2ID4gMAogICAgICAgICAgICAgICAgICAgID8gZ2V0Q3VydmVQb2ludHMoYm91bmRzLmxlZnQgKyBib3R0b21XaWR0aCwgYm91bmRzLnRvcCArIHJpZ2h0SGVpZ2h0LCBicmggLSBib3JkZXJSaWdodFdpZHRoIC8gMywgYnJ2IC0gYm9yZGVyQm90dG9tV2lkdGggLyAzLCBDT1JORVIuQk9UVE9NX1JJR0hUKQogICAgICAgICAgICAgICAgICAgIDogbmV3IFZlY3Rvcihib3VuZHMubGVmdCArIGJvdW5kcy53aWR0aCAtIGJvcmRlclJpZ2h0V2lkdGggLyAzLCBib3VuZHMudG9wICsgYm91bmRzLmhlaWdodCAtIGJvcmRlckJvdHRvbVdpZHRoIC8gMyk7CiAgICAgICAgICAgIHRoaXMuYm90dG9tTGVmdEJvcmRlckRvdWJsZU91dGVyQm94ID0KICAgICAgICAgICAgICAgIGJsaCA+IDAgfHwgYmx2ID4gMAogICAgICAgICAgICAgICAgICAgID8gZ2V0Q3VydmVQb2ludHMoYm91bmRzLmxlZnQgKyBib3JkZXJMZWZ0V2lkdGggLyAzLCBib3VuZHMudG9wICsgbGVmdEhlaWdodCwgYmxoIC0gYm9yZGVyTGVmdFdpZHRoIC8gMywgYmx2IC0gYm9yZGVyQm90dG9tV2lkdGggLyAzLCBDT1JORVIuQk9UVE9NX0xFRlQpCiAgICAgICAgICAgICAgICAgICAgOiBuZXcgVmVjdG9yKGJvdW5kcy5sZWZ0ICsgYm9yZGVyTGVmdFdpZHRoIC8gMywgYm91bmRzLnRvcCArIGJvdW5kcy5oZWlnaHQgLSBib3JkZXJCb3R0b21XaWR0aCAvIDMpOwogICAgICAgICAgICB0aGlzLnRvcExlZnRCb3JkZXJEb3VibGVJbm5lckJveCA9CiAgICAgICAgICAgICAgICB0bGggPiAwIHx8IHRsdiA+IDAKICAgICAgICAgICAgICAgICAgICA/IGdldEN1cnZlUG9pbnRzKGJvdW5kcy5sZWZ0ICsgKGJvcmRlckxlZnRXaWR0aCAqIDIpIC8gMywgYm91bmRzLnRvcCArIChib3JkZXJUb3BXaWR0aCAqIDIpIC8gMywgdGxoIC0gKGJvcmRlckxlZnRXaWR0aCAqIDIpIC8gMywgdGx2IC0gKGJvcmRlclRvcFdpZHRoICogMikgLyAzLCBDT1JORVIuVE9QX0xFRlQpCiAgICAgICAgICAgICAgICAgICAgOiBuZXcgVmVjdG9yKGJvdW5kcy5sZWZ0ICsgKGJvcmRlckxlZnRXaWR0aCAqIDIpIC8gMywgYm91bmRzLnRvcCArIChib3JkZXJUb3BXaWR0aCAqIDIpIC8gMyk7CiAgICAgICAgICAgIHRoaXMudG9wUmlnaHRCb3JkZXJEb3VibGVJbm5lckJveCA9CiAgICAgICAgICAgICAgICB0bGggPiAwIHx8IHRsdiA+IDAKICAgICAgICAgICAgICAgICAgICA/IGdldEN1cnZlUG9pbnRzKGJvdW5kcy5sZWZ0ICsgdG9wV2lkdGgsIGJvdW5kcy50b3AgKyAoYm9yZGVyVG9wV2lkdGggKiAyKSAvIDMsIHRyaCAtIChib3JkZXJSaWdodFdpZHRoICogMikgLyAzLCB0cnYgLSAoYm9yZGVyVG9wV2lkdGggKiAyKSAvIDMsIENPUk5FUi5UT1BfUklHSFQpCiAgICAgICAgICAgICAgICAgICAgOiBuZXcgVmVjdG9yKGJvdW5kcy5sZWZ0ICsgYm91bmRzLndpZHRoIC0gKGJvcmRlclJpZ2h0V2lkdGggKiAyKSAvIDMsIGJvdW5kcy50b3AgKyAoYm9yZGVyVG9wV2lkdGggKiAyKSAvIDMpOwogICAgICAgICAgICB0aGlzLmJvdHRvbVJpZ2h0Qm9yZGVyRG91YmxlSW5uZXJCb3ggPQogICAgICAgICAgICAgICAgYnJoID4gMCB8fCBicnYgPiAwCiAgICAgICAgICAgICAgICAgICAgPyBnZXRDdXJ2ZVBvaW50cyhib3VuZHMubGVmdCArIGJvdHRvbVdpZHRoLCBib3VuZHMudG9wICsgcmlnaHRIZWlnaHQsIGJyaCAtIChib3JkZXJSaWdodFdpZHRoICogMikgLyAzLCBicnYgLSAoYm9yZGVyQm90dG9tV2lkdGggKiAyKSAvIDMsIENPUk5FUi5CT1RUT01fUklHSFQpCiAgICAgICAgICAgICAgICAgICAgOiBuZXcgVmVjdG9yKGJvdW5kcy5sZWZ0ICsgYm91bmRzLndpZHRoIC0gKGJvcmRlclJpZ2h0V2lkdGggKiAyKSAvIDMsIGJvdW5kcy50b3AgKyBib3VuZHMuaGVpZ2h0IC0gKGJvcmRlckJvdHRvbVdpZHRoICogMikgLyAzKTsKICAgICAgICAgICAgdGhpcy5ib3R0b21MZWZ0Qm9yZGVyRG91YmxlSW5uZXJCb3ggPQogICAgICAgICAgICAgICAgYmxoID4gMCB8fCBibHYgPiAwCiAgICAgICAgICAgICAgICAgICAgPyBnZXRDdXJ2ZVBvaW50cyhib3VuZHMubGVmdCArIChib3JkZXJMZWZ0V2lkdGggKiAyKSAvIDMsIGJvdW5kcy50b3AgKyBsZWZ0SGVpZ2h0LCBibGggLSAoYm9yZGVyTGVmdFdpZHRoICogMikgLyAzLCBibHYgLSAoYm9yZGVyQm90dG9tV2lkdGggKiAyKSAvIDMsIENPUk5FUi5CT1RUT01fTEVGVCkKICAgICAgICAgICAgICAgICAgICA6IG5ldyBWZWN0b3IoYm91bmRzLmxlZnQgKyAoYm9yZGVyTGVmdFdpZHRoICogMikgLyAzLCBib3VuZHMudG9wICsgYm91bmRzLmhlaWdodCAtIChib3JkZXJCb3R0b21XaWR0aCAqIDIpIC8gMyk7CiAgICAgICAgICAgIHRoaXMudG9wTGVmdEJvcmRlclN0cm9rZSA9CiAgICAgICAgICAgICAgICB0bGggPiAwIHx8IHRsdiA+IDAKICAgICAgICAgICAgICAgICAgICA/IGdldEN1cnZlUG9pbnRzKGJvdW5kcy5sZWZ0ICsgYm9yZGVyTGVmdFdpZHRoIC8gMiwgYm91bmRzLnRvcCArIGJvcmRlclRvcFdpZHRoIC8gMiwgdGxoIC0gYm9yZGVyTGVmdFdpZHRoIC8gMiwgdGx2IC0gYm9yZGVyVG9wV2lkdGggLyAyLCBDT1JORVIuVE9QX0xFRlQpCiAgICAgICAgICAgICAgICAgICAgOiBuZXcgVmVjdG9yKGJvdW5kcy5sZWZ0ICsgYm9yZGVyTGVmdFdpZHRoIC8gMiwgYm91bmRzLnRvcCArIGJvcmRlclRvcFdpZHRoIC8gMik7CiAgICAgICAgICAgIHRoaXMudG9wUmlnaHRCb3JkZXJTdHJva2UgPQogICAgICAgICAgICAgICAgdGxoID4gMCB8fCB0bHYgPiAwCiAgICAgICAgICAgICAgICAgICAgPyBnZXRDdXJ2ZVBvaW50cyhib3VuZHMubGVmdCArIHRvcFdpZHRoLCBib3VuZHMudG9wICsgYm9yZGVyVG9wV2lkdGggLyAyLCB0cmggLSBib3JkZXJSaWdodFdpZHRoIC8gMiwgdHJ2IC0gYm9yZGVyVG9wV2lkdGggLyAyLCBDT1JORVIuVE9QX1JJR0hUKQogICAgICAgICAgICAgICAgICAgIDogbmV3IFZlY3Rvcihib3VuZHMubGVmdCArIGJvdW5kcy53aWR0aCAtIGJvcmRlclJpZ2h0V2lkdGggLyAyLCBib3VuZHMudG9wICsgYm9yZGVyVG9wV2lkdGggLyAyKTsKICAgICAgICAgICAgdGhpcy5ib3R0b21SaWdodEJvcmRlclN0cm9rZSA9CiAgICAgICAgICAgICAgICBicmggPiAwIHx8IGJydiA+IDAKICAgICAgICAgICAgICAgICAgICA/IGdldEN1cnZlUG9pbnRzKGJvdW5kcy5sZWZ0ICsgYm90dG9tV2lkdGgsIGJvdW5kcy50b3AgKyByaWdodEhlaWdodCwgYnJoIC0gYm9yZGVyUmlnaHRXaWR0aCAvIDIsIGJydiAtIGJvcmRlckJvdHRvbVdpZHRoIC8gMiwgQ09STkVSLkJPVFRPTV9SSUdIVCkKICAgICAgICAgICAgICAgICAgICA6IG5ldyBWZWN0b3IoYm91bmRzLmxlZnQgKyBib3VuZHMud2lkdGggLSBib3JkZXJSaWdodFdpZHRoIC8gMiwgYm91bmRzLnRvcCArIGJvdW5kcy5oZWlnaHQgLSBib3JkZXJCb3R0b21XaWR0aCAvIDIpOwogICAgICAgICAgICB0aGlzLmJvdHRvbUxlZnRCb3JkZXJTdHJva2UgPQogICAgICAgICAgICAgICAgYmxoID4gMCB8fCBibHYgPiAwCiAgICAgICAgICAgICAgICAgICAgPyBnZXRDdXJ2ZVBvaW50cyhib3VuZHMubGVmdCArIGJvcmRlckxlZnRXaWR0aCAvIDIsIGJvdW5kcy50b3AgKyBsZWZ0SGVpZ2h0LCBibGggLSBib3JkZXJMZWZ0V2lkdGggLyAyLCBibHYgLSBib3JkZXJCb3R0b21XaWR0aCAvIDIsIENPUk5FUi5CT1RUT01fTEVGVCkKICAgICAgICAgICAgICAgICAgICA6IG5ldyBWZWN0b3IoYm91bmRzLmxlZnQgKyBib3JkZXJMZWZ0V2lkdGggLyAyLCBib3VuZHMudG9wICsgYm91bmRzLmhlaWdodCAtIGJvcmRlckJvdHRvbVdpZHRoIC8gMik7CiAgICAgICAgICAgIHRoaXMudG9wTGVmdEJvcmRlckJveCA9CiAgICAgICAgICAgICAgICB0bGggPiAwIHx8IHRsdiA+IDAKICAgICAgICAgICAgICAgICAgICA/IGdldEN1cnZlUG9pbnRzKGJvdW5kcy5sZWZ0LCBib3VuZHMudG9wLCB0bGgsIHRsdiwgQ09STkVSLlRPUF9MRUZUKQogICAgICAgICAgICAgICAgICAgIDogbmV3IFZlY3Rvcihib3VuZHMubGVmdCwgYm91bmRzLnRvcCk7CiAgICAgICAgICAgIHRoaXMudG9wUmlnaHRCb3JkZXJCb3ggPQogICAgICAgICAgICAgICAgdHJoID4gMCB8fCB0cnYgPiAwCiAgICAgICAgICAgICAgICAgICAgPyBnZXRDdXJ2ZVBvaW50cyhib3VuZHMubGVmdCArIHRvcFdpZHRoLCBib3VuZHMudG9wLCB0cmgsIHRydiwgQ09STkVSLlRPUF9SSUdIVCkKICAgICAgICAgICAgICAgICAgICA6IG5ldyBWZWN0b3IoYm91bmRzLmxlZnQgKyBib3VuZHMud2lkdGgsIGJvdW5kcy50b3ApOwogICAgICAgICAgICB0aGlzLmJvdHRvbVJpZ2h0Qm9yZGVyQm94ID0KICAgICAgICAgICAgICAgIGJyaCA+IDAgfHwgYnJ2ID4gMAogICAgICAgICAgICAgICAgICAgID8gZ2V0Q3VydmVQb2ludHMoYm91bmRzLmxlZnQgKyBib3R0b21XaWR0aCwgYm91bmRzLnRvcCArIHJpZ2h0SGVpZ2h0LCBicmgsIGJydiwgQ09STkVSLkJPVFRPTV9SSUdIVCkKICAgICAgICAgICAgICAgICAgICA6IG5ldyBWZWN0b3IoYm91bmRzLmxlZnQgKyBib3VuZHMud2lkdGgsIGJvdW5kcy50b3AgKyBib3VuZHMuaGVpZ2h0KTsKICAgICAgICAgICAgdGhpcy5ib3R0b21MZWZ0Qm9yZGVyQm94ID0KICAgICAgICAgICAgICAgIGJsaCA+IDAgfHwgYmx2ID4gMAogICAgICAgICAgICAgICAgICAgID8gZ2V0Q3VydmVQb2ludHMoYm91bmRzLmxlZnQsIGJvdW5kcy50b3AgKyBsZWZ0SGVpZ2h0LCBibGgsIGJsdiwgQ09STkVSLkJPVFRPTV9MRUZUKQogICAgICAgICAgICAgICAgICAgIDogbmV3IFZlY3Rvcihib3VuZHMubGVmdCwgYm91bmRzLnRvcCArIGJvdW5kcy5oZWlnaHQpOwogICAgICAgICAgICB0aGlzLnRvcExlZnRQYWRkaW5nQm94ID0KICAgICAgICAgICAgICAgIHRsaCA+IDAgfHwgdGx2ID4gMAogICAgICAgICAgICAgICAgICAgID8gZ2V0Q3VydmVQb2ludHMoYm91bmRzLmxlZnQgKyBib3JkZXJMZWZ0V2lkdGgsIGJvdW5kcy50b3AgKyBib3JkZXJUb3BXaWR0aCwgTWF0aC5tYXgoMCwgdGxoIC0gYm9yZGVyTGVmdFdpZHRoKSwgTWF0aC5tYXgoMCwgdGx2IC0gYm9yZGVyVG9wV2lkdGgpLCBDT1JORVIuVE9QX0xFRlQpCiAgICAgICAgICAgICAgICAgICAgOiBuZXcgVmVjdG9yKGJvdW5kcy5sZWZ0ICsgYm9yZGVyTGVmdFdpZHRoLCBib3VuZHMudG9wICsgYm9yZGVyVG9wV2lkdGgpOwogICAgICAgICAgICB0aGlzLnRvcFJpZ2h0UGFkZGluZ0JveCA9CiAgICAgICAgICAgICAgICB0cmggPiAwIHx8IHRydiA+IDAKICAgICAgICAgICAgICAgICAgICA/IGdldEN1cnZlUG9pbnRzKGJvdW5kcy5sZWZ0ICsgTWF0aC5taW4odG9wV2lkdGgsIGJvdW5kcy53aWR0aCAtIGJvcmRlclJpZ2h0V2lkdGgpLCBib3VuZHMudG9wICsgYm9yZGVyVG9wV2lkdGgsIHRvcFdpZHRoID4gYm91bmRzLndpZHRoICsgYm9yZGVyUmlnaHRXaWR0aCA/IDAgOiBNYXRoLm1heCgwLCB0cmggLSBib3JkZXJSaWdodFdpZHRoKSwgTWF0aC5tYXgoMCwgdHJ2IC0gYm9yZGVyVG9wV2lkdGgpLCBDT1JORVIuVE9QX1JJR0hUKQogICAgICAgICAgICAgICAgICAgIDogbmV3IFZlY3Rvcihib3VuZHMubGVmdCArIGJvdW5kcy53aWR0aCAtIGJvcmRlclJpZ2h0V2lkdGgsIGJvdW5kcy50b3AgKyBib3JkZXJUb3BXaWR0aCk7CiAgICAgICAgICAgIHRoaXMuYm90dG9tUmlnaHRQYWRkaW5nQm94ID0KICAgICAgICAgICAgICAgIGJyaCA+IDAgfHwgYnJ2ID4gMAogICAgICAgICAgICAgICAgICAgID8gZ2V0Q3VydmVQb2ludHMoYm91bmRzLmxlZnQgKyBNYXRoLm1pbihib3R0b21XaWR0aCwgYm91bmRzLndpZHRoIC0gYm9yZGVyTGVmdFdpZHRoKSwgYm91bmRzLnRvcCArIE1hdGgubWluKHJpZ2h0SGVpZ2h0LCBib3VuZHMuaGVpZ2h0IC0gYm9yZGVyQm90dG9tV2lkdGgpLCBNYXRoLm1heCgwLCBicmggLSBib3JkZXJSaWdodFdpZHRoKSwgTWF0aC5tYXgoMCwgYnJ2IC0gYm9yZGVyQm90dG9tV2lkdGgpLCBDT1JORVIuQk9UVE9NX1JJR0hUKQogICAgICAgICAgICAgICAgICAgIDogbmV3IFZlY3Rvcihib3VuZHMubGVmdCArIGJvdW5kcy53aWR0aCAtIGJvcmRlclJpZ2h0V2lkdGgsIGJvdW5kcy50b3AgKyBib3VuZHMuaGVpZ2h0IC0gYm9yZGVyQm90dG9tV2lkdGgpOwogICAgICAgICAgICB0aGlzLmJvdHRvbUxlZnRQYWRkaW5nQm94ID0KICAgICAgICAgICAgICAgIGJsaCA+IDAgfHwgYmx2ID4gMAogICAgICAgICAgICAgICAgICAgID8gZ2V0Q3VydmVQb2ludHMoYm91bmRzLmxlZnQgKyBib3JkZXJMZWZ0V2lkdGgsIGJvdW5kcy50b3AgKyBNYXRoLm1pbihsZWZ0SGVpZ2h0LCBib3VuZHMuaGVpZ2h0IC0gYm9yZGVyQm90dG9tV2lkdGgpLCBNYXRoLm1heCgwLCBibGggLSBib3JkZXJMZWZ0V2lkdGgpLCBNYXRoLm1heCgwLCBibHYgLSBib3JkZXJCb3R0b21XaWR0aCksIENPUk5FUi5CT1RUT01fTEVGVCkKICAgICAgICAgICAgICAgICAgICA6IG5ldyBWZWN0b3IoYm91bmRzLmxlZnQgKyBib3JkZXJMZWZ0V2lkdGgsIGJvdW5kcy50b3AgKyBib3VuZHMuaGVpZ2h0IC0gYm9yZGVyQm90dG9tV2lkdGgpOwogICAgICAgICAgICB0aGlzLnRvcExlZnRDb250ZW50Qm94ID0KICAgICAgICAgICAgICAgIHRsaCA+IDAgfHwgdGx2ID4gMAogICAgICAgICAgICAgICAgICAgID8gZ2V0Q3VydmVQb2ludHMoYm91bmRzLmxlZnQgKyBib3JkZXJMZWZ0V2lkdGggKyBwYWRkaW5nTGVmdCwgYm91bmRzLnRvcCArIGJvcmRlclRvcFdpZHRoICsgcGFkZGluZ1RvcCwgTWF0aC5tYXgoMCwgdGxoIC0gKGJvcmRlckxlZnRXaWR0aCArIHBhZGRpbmdMZWZ0KSksIE1hdGgubWF4KDAsIHRsdiAtIChib3JkZXJUb3BXaWR0aCArIHBhZGRpbmdUb3ApKSwgQ09STkVSLlRPUF9MRUZUKQogICAgICAgICAgICAgICAgICAgIDogbmV3IFZlY3Rvcihib3VuZHMubGVmdCArIGJvcmRlckxlZnRXaWR0aCArIHBhZGRpbmdMZWZ0LCBib3VuZHMudG9wICsgYm9yZGVyVG9wV2lkdGggKyBwYWRkaW5nVG9wKTsKICAgICAgICAgICAgdGhpcy50b3BSaWdodENvbnRlbnRCb3ggPQogICAgICAgICAgICAgICAgdHJoID4gMCB8fCB0cnYgPiAwCiAgICAgICAgICAgICAgICAgICAgPyBnZXRDdXJ2ZVBvaW50cyhib3VuZHMubGVmdCArIE1hdGgubWluKHRvcFdpZHRoLCBib3VuZHMud2lkdGggKyBib3JkZXJMZWZ0V2lkdGggKyBwYWRkaW5nTGVmdCksIGJvdW5kcy50b3AgKyBib3JkZXJUb3BXaWR0aCArIHBhZGRpbmdUb3AsIHRvcFdpZHRoID4gYm91bmRzLndpZHRoICsgYm9yZGVyTGVmdFdpZHRoICsgcGFkZGluZ0xlZnQgPyAwIDogdHJoIC0gYm9yZGVyTGVmdFdpZHRoICsgcGFkZGluZ0xlZnQsIHRydiAtIChib3JkZXJUb3BXaWR0aCArIHBhZGRpbmdUb3ApLCBDT1JORVIuVE9QX1JJR0hUKQogICAgICAgICAgICAgICAgICAgIDogbmV3IFZlY3Rvcihib3VuZHMubGVmdCArIGJvdW5kcy53aWR0aCAtIChib3JkZXJSaWdodFdpZHRoICsgcGFkZGluZ1JpZ2h0KSwgYm91bmRzLnRvcCArIGJvcmRlclRvcFdpZHRoICsgcGFkZGluZ1RvcCk7CiAgICAgICAgICAgIHRoaXMuYm90dG9tUmlnaHRDb250ZW50Qm94ID0KICAgICAgICAgICAgICAgIGJyaCA+IDAgfHwgYnJ2ID4gMAogICAgICAgICAgICAgICAgICAgID8gZ2V0Q3VydmVQb2ludHMoYm91bmRzLmxlZnQgKyBNYXRoLm1pbihib3R0b21XaWR0aCwgYm91bmRzLndpZHRoIC0gKGJvcmRlckxlZnRXaWR0aCArIHBhZGRpbmdMZWZ0KSksIGJvdW5kcy50b3AgKyBNYXRoLm1pbihyaWdodEhlaWdodCwgYm91bmRzLmhlaWdodCArIGJvcmRlclRvcFdpZHRoICsgcGFkZGluZ1RvcCksIE1hdGgubWF4KDAsIGJyaCAtIChib3JkZXJSaWdodFdpZHRoICsgcGFkZGluZ1JpZ2h0KSksIGJydiAtIChib3JkZXJCb3R0b21XaWR0aCArIHBhZGRpbmdCb3R0b20pLCBDT1JORVIuQk9UVE9NX1JJR0hUKQogICAgICAgICAgICAgICAgICAgIDogbmV3IFZlY3Rvcihib3VuZHMubGVmdCArIGJvdW5kcy53aWR0aCAtIChib3JkZXJSaWdodFdpZHRoICsgcGFkZGluZ1JpZ2h0KSwgYm91bmRzLnRvcCArIGJvdW5kcy5oZWlnaHQgLSAoYm9yZGVyQm90dG9tV2lkdGggKyBwYWRkaW5nQm90dG9tKSk7CiAgICAgICAgICAgIHRoaXMuYm90dG9tTGVmdENvbnRlbnRCb3ggPQogICAgICAgICAgICAgICAgYmxoID4gMCB8fCBibHYgPiAwCiAgICAgICAgICAgICAgICAgICAgPyBnZXRDdXJ2ZVBvaW50cyhib3VuZHMubGVmdCArIGJvcmRlckxlZnRXaWR0aCArIHBhZGRpbmdMZWZ0LCBib3VuZHMudG9wICsgbGVmdEhlaWdodCwgTWF0aC5tYXgoMCwgYmxoIC0gKGJvcmRlckxlZnRXaWR0aCArIHBhZGRpbmdMZWZ0KSksIGJsdiAtIChib3JkZXJCb3R0b21XaWR0aCArIHBhZGRpbmdCb3R0b20pLCBDT1JORVIuQk9UVE9NX0xFRlQpCiAgICAgICAgICAgICAgICAgICAgOiBuZXcgVmVjdG9yKGJvdW5kcy5sZWZ0ICsgYm9yZGVyTGVmdFdpZHRoICsgcGFkZGluZ0xlZnQsIGJvdW5kcy50b3AgKyBib3VuZHMuaGVpZ2h0IC0gKGJvcmRlckJvdHRvbVdpZHRoICsgcGFkZGluZ0JvdHRvbSkpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gQm91bmRDdXJ2ZXM7CiAgICB9KCkpOwogICAgdmFyIENPUk5FUjsKICAgIChmdW5jdGlvbiAoQ09STkVSKSB7CiAgICAgICAgQ09STkVSW0NPUk5FUlsiVE9QX0xFRlQiXSA9IDBdID0gIlRPUF9MRUZUIjsKICAgICAgICBDT1JORVJbQ09STkVSWyJUT1BfUklHSFQiXSA9IDFdID0gIlRPUF9SSUdIVCI7CiAgICAgICAgQ09STkVSW0NPUk5FUlsiQk9UVE9NX1JJR0hUIl0gPSAyXSA9ICJCT1RUT01fUklHSFQiOwogICAgICAgIENPUk5FUltDT1JORVJbIkJPVFRPTV9MRUZUIl0gPSAzXSA9ICJCT1RUT01fTEVGVCI7CiAgICB9KShDT1JORVIgfHwgKENPUk5FUiA9IHt9KSk7CiAgICB2YXIgZ2V0Q3VydmVQb2ludHMgPSBmdW5jdGlvbiAoeCwgeSwgcjEsIHIyLCBwb3NpdGlvbikgewogICAgICAgIHZhciBrYXBwYSA9IDQgKiAoKE1hdGguc3FydCgyKSAtIDEpIC8gMyk7CiAgICAgICAgdmFyIG94ID0gcjEgKiBrYXBwYTsgLy8gY29udHJvbCBwb2ludCBvZmZzZXQgaG9yaXpvbnRhbAogICAgICAgIHZhciBveSA9IHIyICoga2FwcGE7IC8vIGNvbnRyb2wgcG9pbnQgb2Zmc2V0IHZlcnRpY2FsCiAgICAgICAgdmFyIHhtID0geCArIHIxOyAvLyB4LW1pZGRsZQogICAgICAgIHZhciB5bSA9IHkgKyByMjsgLy8geS1taWRkbGUKICAgICAgICBzd2l0Y2ggKHBvc2l0aW9uKSB7CiAgICAgICAgICAgIGNhc2UgQ09STkVSLlRPUF9MRUZUOgogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBCZXppZXJDdXJ2ZShuZXcgVmVjdG9yKHgsIHltKSwgbmV3IFZlY3Rvcih4LCB5bSAtIG95KSwgbmV3IFZlY3Rvcih4bSAtIG94LCB5KSwgbmV3IFZlY3Rvcih4bSwgeSkpOwogICAgICAgICAgICBjYXNlIENPUk5FUi5UT1BfUklHSFQ6CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEJlemllckN1cnZlKG5ldyBWZWN0b3IoeCwgeSksIG5ldyBWZWN0b3IoeCArIG94LCB5KSwgbmV3IFZlY3Rvcih4bSwgeW0gLSBveSksIG5ldyBWZWN0b3IoeG0sIHltKSk7CiAgICAgICAgICAgIGNhc2UgQ09STkVSLkJPVFRPTV9SSUdIVDoKICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQmV6aWVyQ3VydmUobmV3IFZlY3Rvcih4bSwgeSksIG5ldyBWZWN0b3IoeG0sIHkgKyBveSksIG5ldyBWZWN0b3IoeCArIG94LCB5bSksIG5ldyBWZWN0b3IoeCwgeW0pKTsKICAgICAgICAgICAgY2FzZSBDT1JORVIuQk9UVE9NX0xFRlQ6CiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEJlemllckN1cnZlKG5ldyBWZWN0b3IoeG0sIHltKSwgbmV3IFZlY3Rvcih4bSAtIG94LCB5bSksIG5ldyBWZWN0b3IoeCwgeSArIG95KSwgbmV3IFZlY3Rvcih4LCB5KSk7CiAgICAgICAgfQogICAgfTsKICAgIHZhciBjYWxjdWxhdGVCb3JkZXJCb3hQYXRoID0gZnVuY3Rpb24gKGN1cnZlcykgewogICAgICAgIHJldHVybiBbY3VydmVzLnRvcExlZnRCb3JkZXJCb3gsIGN1cnZlcy50b3BSaWdodEJvcmRlckJveCwgY3VydmVzLmJvdHRvbVJpZ2h0Qm9yZGVyQm94LCBjdXJ2ZXMuYm90dG9tTGVmdEJvcmRlckJveF07CiAgICB9OwogICAgdmFyIGNhbGN1bGF0ZUNvbnRlbnRCb3hQYXRoID0gZnVuY3Rpb24gKGN1cnZlcykgewogICAgICAgIHJldHVybiBbCiAgICAgICAgICAgIGN1cnZlcy50b3BMZWZ0Q29udGVudEJveCwKICAgICAgICAgICAgY3VydmVzLnRvcFJpZ2h0Q29udGVudEJveCwKICAgICAgICAgICAgY3VydmVzLmJvdHRvbVJpZ2h0Q29udGVudEJveCwKICAgICAgICAgICAgY3VydmVzLmJvdHRvbUxlZnRDb250ZW50Qm94CiAgICAgICAgXTsKICAgIH07CiAgICB2YXIgY2FsY3VsYXRlUGFkZGluZ0JveFBhdGggPSBmdW5jdGlvbiAoY3VydmVzKSB7CiAgICAgICAgcmV0dXJuIFsKICAgICAgICAgICAgY3VydmVzLnRvcExlZnRQYWRkaW5nQm94LAogICAgICAgICAgICBjdXJ2ZXMudG9wUmlnaHRQYWRkaW5nQm94LAogICAgICAgICAgICBjdXJ2ZXMuYm90dG9tUmlnaHRQYWRkaW5nQm94LAogICAgICAgICAgICBjdXJ2ZXMuYm90dG9tTGVmdFBhZGRpbmdCb3gKICAgICAgICBdOwogICAgfTsKCiAgICB2YXIgVHJhbnNmb3JtRWZmZWN0ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewogICAgICAgIGZ1bmN0aW9uIFRyYW5zZm9ybUVmZmVjdChvZmZzZXRYLCBvZmZzZXRZLCBtYXRyaXgpIHsKICAgICAgICAgICAgdGhpcy5vZmZzZXRYID0gb2Zmc2V0WDsKICAgICAgICAgICAgdGhpcy5vZmZzZXRZID0gb2Zmc2V0WTsKICAgICAgICAgICAgdGhpcy5tYXRyaXggPSBtYXRyaXg7CiAgICAgICAgICAgIHRoaXMudHlwZSA9IDAgLyogVFJBTlNGT1JNICovOwogICAgICAgICAgICB0aGlzLnRhcmdldCA9IDIgLyogQkFDS0dST1VORF9CT1JERVJTICovIHwgNCAvKiBDT05URU5UICovOwogICAgICAgIH0KICAgICAgICByZXR1cm4gVHJhbnNmb3JtRWZmZWN0OwogICAgfSgpKTsKICAgIHZhciBDbGlwRWZmZWN0ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewogICAgICAgIGZ1bmN0aW9uIENsaXBFZmZlY3QocGF0aCwgdGFyZ2V0KSB7CiAgICAgICAgICAgIHRoaXMucGF0aCA9IHBhdGg7CiAgICAgICAgICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0OwogICAgICAgICAgICB0aGlzLnR5cGUgPSAxIC8qIENMSVAgKi87CiAgICAgICAgfQogICAgICAgIHJldHVybiBDbGlwRWZmZWN0OwogICAgfSgpKTsKICAgIHZhciBPcGFjaXR5RWZmZWN0ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewogICAgICAgIGZ1bmN0aW9uIE9wYWNpdHlFZmZlY3Qob3BhY2l0eSkgewogICAgICAgICAgICB0aGlzLm9wYWNpdHkgPSBvcGFjaXR5OwogICAgICAgICAgICB0aGlzLnR5cGUgPSAyIC8qIE9QQUNJVFkgKi87CiAgICAgICAgICAgIHRoaXMudGFyZ2V0ID0gMiAvKiBCQUNLR1JPVU5EX0JPUkRFUlMgKi8gfCA0IC8qIENPTlRFTlQgKi87CiAgICAgICAgfQogICAgICAgIHJldHVybiBPcGFjaXR5RWZmZWN0OwogICAgfSgpKTsKICAgIHZhciBpc1RyYW5zZm9ybUVmZmVjdCA9IGZ1bmN0aW9uIChlZmZlY3QpIHsKICAgICAgICByZXR1cm4gZWZmZWN0LnR5cGUgPT09IDAgLyogVFJBTlNGT1JNICovOwogICAgfTsKICAgIHZhciBpc0NsaXBFZmZlY3QgPSBmdW5jdGlvbiAoZWZmZWN0KSB7IHJldHVybiBlZmZlY3QudHlwZSA9PT0gMSAvKiBDTElQICovOyB9OwogICAgdmFyIGlzT3BhY2l0eUVmZmVjdCA9IGZ1bmN0aW9uIChlZmZlY3QpIHsgcmV0dXJuIGVmZmVjdC50eXBlID09PSAyIC8qIE9QQUNJVFkgKi87IH07CgogICAgdmFyIGVxdWFsUGF0aCA9IGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgaWYgKGEubGVuZ3RoID09PSBiLmxlbmd0aCkgewogICAgICAgICAgICByZXR1cm4gYS5zb21lKGZ1bmN0aW9uICh2LCBpKSB7IHJldHVybiB2ID09PSBiW2ldOyB9KTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfTsKICAgIHZhciB0cmFuc2Zvcm1QYXRoID0gZnVuY3Rpb24gKHBhdGgsIGRlbHRhWCwgZGVsdGFZLCBkZWx0YVcsIGRlbHRhSCkgewogICAgICAgIHJldHVybiBwYXRoLm1hcChmdW5jdGlvbiAocG9pbnQsIGluZGV4KSB7CiAgICAgICAgICAgIHN3aXRjaCAoaW5kZXgpIHsKICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcG9pbnQuYWRkKGRlbHRhWCwgZGVsdGFZKTsKICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcG9pbnQuYWRkKGRlbHRhWCArIGRlbHRhVywgZGVsdGFZKTsKICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcG9pbnQuYWRkKGRlbHRhWCArIGRlbHRhVywgZGVsdGFZICsgZGVsdGFIKTsKICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcG9pbnQuYWRkKGRlbHRhWCwgZGVsdGFZICsgZGVsdGFIKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gcG9pbnQ7CiAgICAgICAgfSk7CiAgICB9OwoKICAgIHZhciBTdGFja2luZ0NvbnRleHQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CiAgICAgICAgZnVuY3Rpb24gU3RhY2tpbmdDb250ZXh0KGNvbnRhaW5lcikgewogICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSBjb250YWluZXI7CiAgICAgICAgICAgIHRoaXMuaW5saW5lTGV2ZWwgPSBbXTsKICAgICAgICAgICAgdGhpcy5ub25JbmxpbmVMZXZlbCA9IFtdOwogICAgICAgICAgICB0aGlzLm5lZ2F0aXZlWkluZGV4ID0gW107CiAgICAgICAgICAgIHRoaXMuemVyb09yQXV0b1pJbmRleE9yVHJhbnNmb3JtZWRPck9wYWNpdHkgPSBbXTsKICAgICAgICAgICAgdGhpcy5wb3NpdGl2ZVpJbmRleCA9IFtdOwogICAgICAgICAgICB0aGlzLm5vblBvc2l0aW9uZWRGbG9hdHMgPSBbXTsKICAgICAgICAgICAgdGhpcy5ub25Qb3NpdGlvbmVkSW5saW5lTGV2ZWwgPSBbXTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIFN0YWNraW5nQ29udGV4dDsKICAgIH0oKSk7CiAgICB2YXIgRWxlbWVudFBhaW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewogICAgICAgIGZ1bmN0aW9uIEVsZW1lbnRQYWludChjb250YWluZXIsIHBhcmVudCkgewogICAgICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjsKICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7CiAgICAgICAgICAgIHRoaXMuZWZmZWN0cyA9IFtdOwogICAgICAgICAgICB0aGlzLmN1cnZlcyA9IG5ldyBCb3VuZEN1cnZlcyh0aGlzLmNvbnRhaW5lcik7CiAgICAgICAgICAgIGlmICh0aGlzLmNvbnRhaW5lci5zdHlsZXMub3BhY2l0eSA8IDEpIHsKICAgICAgICAgICAgICAgIHRoaXMuZWZmZWN0cy5wdXNoKG5ldyBPcGFjaXR5RWZmZWN0KHRoaXMuY29udGFpbmVyLnN0eWxlcy5vcGFjaXR5KSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHRoaXMuY29udGFpbmVyLnN0eWxlcy50cmFuc2Zvcm0gIT09IG51bGwpIHsKICAgICAgICAgICAgICAgIHZhciBvZmZzZXRYID0gdGhpcy5jb250YWluZXIuYm91bmRzLmxlZnQgKyB0aGlzLmNvbnRhaW5lci5zdHlsZXMudHJhbnNmb3JtT3JpZ2luWzBdLm51bWJlcjsKICAgICAgICAgICAgICAgIHZhciBvZmZzZXRZID0gdGhpcy5jb250YWluZXIuYm91bmRzLnRvcCArIHRoaXMuY29udGFpbmVyLnN0eWxlcy50cmFuc2Zvcm1PcmlnaW5bMV0ubnVtYmVyOwogICAgICAgICAgICAgICAgdmFyIG1hdHJpeCA9IHRoaXMuY29udGFpbmVyLnN0eWxlcy50cmFuc2Zvcm07CiAgICAgICAgICAgICAgICB0aGlzLmVmZmVjdHMucHVzaChuZXcgVHJhbnNmb3JtRWZmZWN0KG9mZnNldFgsIG9mZnNldFksIG1hdHJpeCkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICh0aGlzLmNvbnRhaW5lci5zdHlsZXMub3ZlcmZsb3dYICE9PSAwIC8qIFZJU0lCTEUgKi8pIHsKICAgICAgICAgICAgICAgIHZhciBib3JkZXJCb3ggPSBjYWxjdWxhdGVCb3JkZXJCb3hQYXRoKHRoaXMuY3VydmVzKTsKICAgICAgICAgICAgICAgIHZhciBwYWRkaW5nQm94ID0gY2FsY3VsYXRlUGFkZGluZ0JveFBhdGgodGhpcy5jdXJ2ZXMpOwogICAgICAgICAgICAgICAgaWYgKGVxdWFsUGF0aChib3JkZXJCb3gsIHBhZGRpbmdCb3gpKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5lZmZlY3RzLnB1c2gobmV3IENsaXBFZmZlY3QoYm9yZGVyQm94LCAyIC8qIEJBQ0tHUk9VTkRfQk9SREVSUyAqLyB8IDQgLyogQ09OVEVOVCAqLykpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5lZmZlY3RzLnB1c2gobmV3IENsaXBFZmZlY3QoYm9yZGVyQm94LCAyIC8qIEJBQ0tHUk9VTkRfQk9SREVSUyAqLykpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZWZmZWN0cy5wdXNoKG5ldyBDbGlwRWZmZWN0KHBhZGRpbmdCb3gsIDQgLyogQ09OVEVOVCAqLykpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIEVsZW1lbnRQYWludC5wcm90b3R5cGUuZ2V0RWZmZWN0cyA9IGZ1bmN0aW9uICh0YXJnZXQpIHsKICAgICAgICAgICAgdmFyIGluRmxvdyA9IFsyIC8qIEFCU09MVVRFICovLCAzIC8qIEZJWEVEICovXS5pbmRleE9mKHRoaXMuY29udGFpbmVyLnN0eWxlcy5wb3NpdGlvbikgPT09IC0xOwogICAgICAgICAgICB2YXIgcGFyZW50ID0gdGhpcy5wYXJlbnQ7CiAgICAgICAgICAgIHZhciBlZmZlY3RzID0gdGhpcy5lZmZlY3RzLnNsaWNlKDApOwogICAgICAgICAgICB3aGlsZSAocGFyZW50KSB7CiAgICAgICAgICAgICAgICB2YXIgY3JvcGxlc3NFZmZlY3RzID0gcGFyZW50LmVmZmVjdHMuZmlsdGVyKGZ1bmN0aW9uIChlZmZlY3QpIHsgcmV0dXJuICFpc0NsaXBFZmZlY3QoZWZmZWN0KTsgfSk7CiAgICAgICAgICAgICAgICBpZiAoaW5GbG93IHx8IHBhcmVudC5jb250YWluZXIuc3R5bGVzLnBvc2l0aW9uICE9PSAwIC8qIFNUQVRJQyAqLyB8fCAhcGFyZW50LnBhcmVudCkgewogICAgICAgICAgICAgICAgICAgIGVmZmVjdHMudW5zaGlmdC5hcHBseShlZmZlY3RzLCBjcm9wbGVzc0VmZmVjdHMpOwogICAgICAgICAgICAgICAgICAgIGluRmxvdyA9IFsyIC8qIEFCU09MVVRFICovLCAzIC8qIEZJWEVEICovXS5pbmRleE9mKHBhcmVudC5jb250YWluZXIuc3R5bGVzLnBvc2l0aW9uKSA9PT0gLTE7CiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmVudC5jb250YWluZXIuc3R5bGVzLm92ZXJmbG93WCAhPT0gMCAvKiBWSVNJQkxFICovKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBib3JkZXJCb3ggPSBjYWxjdWxhdGVCb3JkZXJCb3hQYXRoKHBhcmVudC5jdXJ2ZXMpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGFkZGluZ0JveCA9IGNhbGN1bGF0ZVBhZGRpbmdCb3hQYXRoKHBhcmVudC5jdXJ2ZXMpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWVxdWFsUGF0aChib3JkZXJCb3gsIHBhZGRpbmdCb3gpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZmZlY3RzLnVuc2hpZnQobmV3IENsaXBFZmZlY3QocGFkZGluZ0JveCwgMiAvKiBCQUNLR1JPVU5EX0JPUkRFUlMgKi8gfCA0IC8qIENPTlRFTlQgKi8pKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIGVmZmVjdHMudW5zaGlmdC5hcHBseShlZmZlY3RzLCBjcm9wbGVzc0VmZmVjdHMpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcGFyZW50ID0gcGFyZW50LnBhcmVudDsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gZWZmZWN0cy5maWx0ZXIoZnVuY3Rpb24gKGVmZmVjdCkgeyByZXR1cm4gY29udGFpbnMoZWZmZWN0LnRhcmdldCwgdGFyZ2V0KTsgfSk7CiAgICAgICAgfTsKICAgICAgICByZXR1cm4gRWxlbWVudFBhaW50OwogICAgfSgpKTsKICAgIHZhciBwYXJzZVN0YWNrVHJlZSA9IGZ1bmN0aW9uIChwYXJlbnQsIHN0YWNraW5nQ29udGV4dCwgcmVhbFN0YWNraW5nQ29udGV4dCwgbGlzdEl0ZW1zKSB7CiAgICAgICAgcGFyZW50LmNvbnRhaW5lci5lbGVtZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZCkgewogICAgICAgICAgICB2YXIgdHJlYXRBc1JlYWxTdGFja2luZ0NvbnRleHQgPSBjb250YWlucyhjaGlsZC5mbGFncywgNCAvKiBDUkVBVEVTX1JFQUxfU1RBQ0tJTkdfQ09OVEVYVCAqLyk7CiAgICAgICAgICAgIHZhciBjcmVhdGVzU3RhY2tpbmdDb250ZXh0ID0gY29udGFpbnMoY2hpbGQuZmxhZ3MsIDIgLyogQ1JFQVRFU19TVEFDS0lOR19DT05URVhUICovKTsKICAgICAgICAgICAgdmFyIHBhaW50Q29udGFpbmVyID0gbmV3IEVsZW1lbnRQYWludChjaGlsZCwgcGFyZW50KTsKICAgICAgICAgICAgaWYgKGNvbnRhaW5zKGNoaWxkLnN0eWxlcy5kaXNwbGF5LCAyMDQ4IC8qIExJU1RfSVRFTSAqLykpIHsKICAgICAgICAgICAgICAgIGxpc3RJdGVtcy5wdXNoKHBhaW50Q29udGFpbmVyKTsKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgbGlzdE93bmVySXRlbXMgPSBjb250YWlucyhjaGlsZC5mbGFncywgOCAvKiBJU19MSVNUX09XTkVSICovKSA/IFtdIDogbGlzdEl0ZW1zOwogICAgICAgICAgICBpZiAodHJlYXRBc1JlYWxTdGFja2luZ0NvbnRleHQgfHwgY3JlYXRlc1N0YWNraW5nQ29udGV4dCkgewogICAgICAgICAgICAgICAgdmFyIHBhcmVudFN0YWNrID0gdHJlYXRBc1JlYWxTdGFja2luZ0NvbnRleHQgfHwgY2hpbGQuc3R5bGVzLmlzUG9zaXRpb25lZCgpID8gcmVhbFN0YWNraW5nQ29udGV4dCA6IHN0YWNraW5nQ29udGV4dDsKICAgICAgICAgICAgICAgIHZhciBzdGFjayA9IG5ldyBTdGFja2luZ0NvbnRleHQocGFpbnRDb250YWluZXIpOwogICAgICAgICAgICAgICAgaWYgKGNoaWxkLnN0eWxlcy5pc1Bvc2l0aW9uZWQoKSB8fCBjaGlsZC5zdHlsZXMub3BhY2l0eSA8IDEgfHwgY2hpbGQuc3R5bGVzLmlzVHJhbnNmb3JtZWQoKSkgewogICAgICAgICAgICAgICAgICAgIHZhciBvcmRlcl8xID0gY2hpbGQuc3R5bGVzLnpJbmRleC5vcmRlcjsKICAgICAgICAgICAgICAgICAgICBpZiAob3JkZXJfMSA8IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4XzEgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRTdGFjay5uZWdhdGl2ZVpJbmRleC5zb21lKGZ1bmN0aW9uIChjdXJyZW50LCBpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob3JkZXJfMSA+IGN1cnJlbnQuZWxlbWVudC5jb250YWluZXIuc3R5bGVzLnpJbmRleC5vcmRlcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4XzEgPSBpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGluZGV4XzEgPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRTdGFjay5uZWdhdGl2ZVpJbmRleC5zcGxpY2UoaW5kZXhfMSwgMCwgc3RhY2spOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChvcmRlcl8xID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXhfMiA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudFN0YWNrLnBvc2l0aXZlWkluZGV4LnNvbWUoZnVuY3Rpb24gKGN1cnJlbnQsIGkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcmRlcl8xID49IGN1cnJlbnQuZWxlbWVudC5jb250YWluZXIuc3R5bGVzLnpJbmRleC5vcmRlcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4XzIgPSBpICsgMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChpbmRleF8yID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50U3RhY2sucG9zaXRpdmVaSW5kZXguc3BsaWNlKGluZGV4XzIsIDAsIHN0YWNrKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudFN0YWNrLnplcm9PckF1dG9aSW5kZXhPclRyYW5zZm9ybWVkT3JPcGFjaXR5LnB1c2goc3RhY2spOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIGlmIChjaGlsZC5zdHlsZXMuaXNGbG9hdGluZygpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudFN0YWNrLm5vblBvc2l0aW9uZWRGbG9hdHMucHVzaChzdGFjayk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRTdGFjay5ub25Qb3NpdGlvbmVkSW5saW5lTGV2ZWwucHVzaChzdGFjayk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcGFyc2VTdGFja1RyZWUocGFpbnRDb250YWluZXIsIHN0YWNrLCB0cmVhdEFzUmVhbFN0YWNraW5nQ29udGV4dCA/IHN0YWNrIDogcmVhbFN0YWNraW5nQ29udGV4dCwgbGlzdE93bmVySXRlbXMpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgaWYgKGNoaWxkLnN0eWxlcy5pc0lubGluZUxldmVsKCkpIHsKICAgICAgICAgICAgICAgICAgICBzdGFja2luZ0NvbnRleHQuaW5saW5lTGV2ZWwucHVzaChwYWludENvbnRhaW5lcik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBzdGFja2luZ0NvbnRleHQubm9uSW5saW5lTGV2ZWwucHVzaChwYWludENvbnRhaW5lcik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBwYXJzZVN0YWNrVHJlZShwYWludENvbnRhaW5lciwgc3RhY2tpbmdDb250ZXh0LCByZWFsU3RhY2tpbmdDb250ZXh0LCBsaXN0T3duZXJJdGVtcyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGNvbnRhaW5zKGNoaWxkLmZsYWdzLCA4IC8qIElTX0xJU1RfT1dORVIgKi8pKSB7CiAgICAgICAgICAgICAgICBwcm9jZXNzTGlzdEl0ZW1zKGNoaWxkLCBsaXN0T3duZXJJdGVtcyk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH07CiAgICB2YXIgcHJvY2Vzc0xpc3RJdGVtcyA9IGZ1bmN0aW9uIChvd25lciwgZWxlbWVudHMpIHsKICAgICAgICB2YXIgbnVtYmVyaW5nID0gb3duZXIgaW5zdGFuY2VvZiBPTEVsZW1lbnRDb250YWluZXIgPyBvd25lci5zdGFydCA6IDE7CiAgICAgICAgdmFyIHJldmVyc2VkID0gb3duZXIgaW5zdGFuY2VvZiBPTEVsZW1lbnRDb250YWluZXIgPyBvd25lci5yZXZlcnNlZCA6IGZhbHNlOwogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbWVudHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgdmFyIGl0ZW0gPSBlbGVtZW50c1tpXTsKICAgICAgICAgICAgaWYgKGl0ZW0uY29udGFpbmVyIGluc3RhbmNlb2YgTElFbGVtZW50Q29udGFpbmVyICYmCiAgICAgICAgICAgICAgICB0eXBlb2YgaXRlbS5jb250YWluZXIudmFsdWUgPT09ICdudW1iZXInICYmCiAgICAgICAgICAgICAgICBpdGVtLmNvbnRhaW5lci52YWx1ZSAhPT0gMCkgewogICAgICAgICAgICAgICAgbnVtYmVyaW5nID0gaXRlbS5jb250YWluZXIudmFsdWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaXRlbS5saXN0VmFsdWUgPSBjcmVhdGVDb3VudGVyVGV4dChudW1iZXJpbmcsIGl0ZW0uY29udGFpbmVyLnN0eWxlcy5saXN0U3R5bGVUeXBlLCB0cnVlKTsKICAgICAgICAgICAgbnVtYmVyaW5nICs9IHJldmVyc2VkID8gLTEgOiAxOwogICAgICAgIH0KICAgIH07CiAgICB2YXIgcGFyc2VTdGFja2luZ0NvbnRleHRzID0gZnVuY3Rpb24gKGNvbnRhaW5lcikgewogICAgICAgIHZhciBwYWludENvbnRhaW5lciA9IG5ldyBFbGVtZW50UGFpbnQoY29udGFpbmVyLCBudWxsKTsKICAgICAgICB2YXIgcm9vdCA9IG5ldyBTdGFja2luZ0NvbnRleHQocGFpbnRDb250YWluZXIpOwogICAgICAgIHZhciBsaXN0SXRlbXMgPSBbXTsKICAgICAgICBwYXJzZVN0YWNrVHJlZShwYWludENvbnRhaW5lciwgcm9vdCwgcm9vdCwgbGlzdEl0ZW1zKTsKICAgICAgICBwcm9jZXNzTGlzdEl0ZW1zKHBhaW50Q29udGFpbmVyLmNvbnRhaW5lciwgbGlzdEl0ZW1zKTsKICAgICAgICByZXR1cm4gcm9vdDsKICAgIH07CgogICAgdmFyIHBhcnNlUGF0aEZvckJvcmRlciA9IGZ1bmN0aW9uIChjdXJ2ZXMsIGJvcmRlclNpZGUpIHsKICAgICAgICBzd2l0Y2ggKGJvcmRlclNpZGUpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZVBhdGhGcm9tQ3VydmVzKGN1cnZlcy50b3BMZWZ0Qm9yZGVyQm94LCBjdXJ2ZXMudG9wTGVmdFBhZGRpbmdCb3gsIGN1cnZlcy50b3BSaWdodEJvcmRlckJveCwgY3VydmVzLnRvcFJpZ2h0UGFkZGluZ0JveCk7CiAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgIHJldHVybiBjcmVhdGVQYXRoRnJvbUN1cnZlcyhjdXJ2ZXMudG9wUmlnaHRCb3JkZXJCb3gsIGN1cnZlcy50b3BSaWdodFBhZGRpbmdCb3gsIGN1cnZlcy5ib3R0b21SaWdodEJvcmRlckJveCwgY3VydmVzLmJvdHRvbVJpZ2h0UGFkZGluZ0JveCk7CiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIHJldHVybiBjcmVhdGVQYXRoRnJvbUN1cnZlcyhjdXJ2ZXMuYm90dG9tUmlnaHRCb3JkZXJCb3gsIGN1cnZlcy5ib3R0b21SaWdodFBhZGRpbmdCb3gsIGN1cnZlcy5ib3R0b21MZWZ0Qm9yZGVyQm94LCBjdXJ2ZXMuYm90dG9tTGVmdFBhZGRpbmdCb3gpOwogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICByZXR1cm4gY3JlYXRlUGF0aEZyb21DdXJ2ZXMoY3VydmVzLmJvdHRvbUxlZnRCb3JkZXJCb3gsIGN1cnZlcy5ib3R0b21MZWZ0UGFkZGluZ0JveCwgY3VydmVzLnRvcExlZnRCb3JkZXJCb3gsIGN1cnZlcy50b3BMZWZ0UGFkZGluZ0JveCk7CiAgICAgICAgfQogICAgfTsKICAgIHZhciBwYXJzZVBhdGhGb3JCb3JkZXJEb3VibGVPdXRlciA9IGZ1bmN0aW9uIChjdXJ2ZXMsIGJvcmRlclNpZGUpIHsKICAgICAgICBzd2l0Y2ggKGJvcmRlclNpZGUpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZVBhdGhGcm9tQ3VydmVzKGN1cnZlcy50b3BMZWZ0Qm9yZGVyQm94LCBjdXJ2ZXMudG9wTGVmdEJvcmRlckRvdWJsZU91dGVyQm94LCBjdXJ2ZXMudG9wUmlnaHRCb3JkZXJCb3gsIGN1cnZlcy50b3BSaWdodEJvcmRlckRvdWJsZU91dGVyQm94KTsKICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZVBhdGhGcm9tQ3VydmVzKGN1cnZlcy50b3BSaWdodEJvcmRlckJveCwgY3VydmVzLnRvcFJpZ2h0Qm9yZGVyRG91YmxlT3V0ZXJCb3gsIGN1cnZlcy5ib3R0b21SaWdodEJvcmRlckJveCwgY3VydmVzLmJvdHRvbVJpZ2h0Qm9yZGVyRG91YmxlT3V0ZXJCb3gpOwogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICByZXR1cm4gY3JlYXRlUGF0aEZyb21DdXJ2ZXMoY3VydmVzLmJvdHRvbVJpZ2h0Qm9yZGVyQm94LCBjdXJ2ZXMuYm90dG9tUmlnaHRCb3JkZXJEb3VibGVPdXRlckJveCwgY3VydmVzLmJvdHRvbUxlZnRCb3JkZXJCb3gsIGN1cnZlcy5ib3R0b21MZWZ0Qm9yZGVyRG91YmxlT3V0ZXJCb3gpOwogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICByZXR1cm4gY3JlYXRlUGF0aEZyb21DdXJ2ZXMoY3VydmVzLmJvdHRvbUxlZnRCb3JkZXJCb3gsIGN1cnZlcy5ib3R0b21MZWZ0Qm9yZGVyRG91YmxlT3V0ZXJCb3gsIGN1cnZlcy50b3BMZWZ0Qm9yZGVyQm94LCBjdXJ2ZXMudG9wTGVmdEJvcmRlckRvdWJsZU91dGVyQm94KTsKICAgICAgICB9CiAgICB9OwogICAgdmFyIHBhcnNlUGF0aEZvckJvcmRlckRvdWJsZUlubmVyID0gZnVuY3Rpb24gKGN1cnZlcywgYm9yZGVyU2lkZSkgewogICAgICAgIHN3aXRjaCAoYm9yZGVyU2lkZSkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICByZXR1cm4gY3JlYXRlUGF0aEZyb21DdXJ2ZXMoY3VydmVzLnRvcExlZnRCb3JkZXJEb3VibGVJbm5lckJveCwgY3VydmVzLnRvcExlZnRQYWRkaW5nQm94LCBjdXJ2ZXMudG9wUmlnaHRCb3JkZXJEb3VibGVJbm5lckJveCwgY3VydmVzLnRvcFJpZ2h0UGFkZGluZ0JveCk7CiAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgIHJldHVybiBjcmVhdGVQYXRoRnJvbUN1cnZlcyhjdXJ2ZXMudG9wUmlnaHRCb3JkZXJEb3VibGVJbm5lckJveCwgY3VydmVzLnRvcFJpZ2h0UGFkZGluZ0JveCwgY3VydmVzLmJvdHRvbVJpZ2h0Qm9yZGVyRG91YmxlSW5uZXJCb3gsIGN1cnZlcy5ib3R0b21SaWdodFBhZGRpbmdCb3gpOwogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICByZXR1cm4gY3JlYXRlUGF0aEZyb21DdXJ2ZXMoY3VydmVzLmJvdHRvbVJpZ2h0Qm9yZGVyRG91YmxlSW5uZXJCb3gsIGN1cnZlcy5ib3R0b21SaWdodFBhZGRpbmdCb3gsIGN1cnZlcy5ib3R0b21MZWZ0Qm9yZGVyRG91YmxlSW5uZXJCb3gsIGN1cnZlcy5ib3R0b21MZWZ0UGFkZGluZ0JveCk7CiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgIHJldHVybiBjcmVhdGVQYXRoRnJvbUN1cnZlcyhjdXJ2ZXMuYm90dG9tTGVmdEJvcmRlckRvdWJsZUlubmVyQm94LCBjdXJ2ZXMuYm90dG9tTGVmdFBhZGRpbmdCb3gsIGN1cnZlcy50b3BMZWZ0Qm9yZGVyRG91YmxlSW5uZXJCb3gsIGN1cnZlcy50b3BMZWZ0UGFkZGluZ0JveCk7CiAgICAgICAgfQogICAgfTsKICAgIHZhciBwYXJzZVBhdGhGb3JCb3JkZXJTdHJva2UgPSBmdW5jdGlvbiAoY3VydmVzLCBib3JkZXJTaWRlKSB7CiAgICAgICAgc3dpdGNoIChib3JkZXJTaWRlKSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHJldHVybiBjcmVhdGVTdHJva2VQYXRoRnJvbUN1cnZlcyhjdXJ2ZXMudG9wTGVmdEJvcmRlclN0cm9rZSwgY3VydmVzLnRvcFJpZ2h0Qm9yZGVyU3Ryb2tlKTsKICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZVN0cm9rZVBhdGhGcm9tQ3VydmVzKGN1cnZlcy50b3BSaWdodEJvcmRlclN0cm9rZSwgY3VydmVzLmJvdHRvbVJpZ2h0Qm9yZGVyU3Ryb2tlKTsKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZVN0cm9rZVBhdGhGcm9tQ3VydmVzKGN1cnZlcy5ib3R0b21SaWdodEJvcmRlclN0cm9rZSwgY3VydmVzLmJvdHRvbUxlZnRCb3JkZXJTdHJva2UpOwogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICByZXR1cm4gY3JlYXRlU3Ryb2tlUGF0aEZyb21DdXJ2ZXMoY3VydmVzLmJvdHRvbUxlZnRCb3JkZXJTdHJva2UsIGN1cnZlcy50b3BMZWZ0Qm9yZGVyU3Ryb2tlKTsKICAgICAgICB9CiAgICB9OwogICAgdmFyIGNyZWF0ZVN0cm9rZVBhdGhGcm9tQ3VydmVzID0gZnVuY3Rpb24gKG91dGVyMSwgb3V0ZXIyKSB7CiAgICAgICAgdmFyIHBhdGggPSBbXTsKICAgICAgICBpZiAoaXNCZXppZXJDdXJ2ZShvdXRlcjEpKSB7CiAgICAgICAgICAgIHBhdGgucHVzaChvdXRlcjEuc3ViZGl2aWRlKDAuNSwgZmFsc2UpKTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHBhdGgucHVzaChvdXRlcjEpOwogICAgICAgIH0KICAgICAgICBpZiAoaXNCZXppZXJDdXJ2ZShvdXRlcjIpKSB7CiAgICAgICAgICAgIHBhdGgucHVzaChvdXRlcjIuc3ViZGl2aWRlKDAuNSwgdHJ1ZSkpOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgcGF0aC5wdXNoKG91dGVyMik7CiAgICAgICAgfQogICAgICAgIHJldHVybiBwYXRoOwogICAgfTsKICAgIHZhciBjcmVhdGVQYXRoRnJvbUN1cnZlcyA9IGZ1bmN0aW9uIChvdXRlcjEsIGlubmVyMSwgb3V0ZXIyLCBpbm5lcjIpIHsKICAgICAgICB2YXIgcGF0aCA9IFtdOwogICAgICAgIGlmIChpc0JlemllckN1cnZlKG91dGVyMSkpIHsKICAgICAgICAgICAgcGF0aC5wdXNoKG91dGVyMS5zdWJkaXZpZGUoMC41LCBmYWxzZSkpOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgcGF0aC5wdXNoKG91dGVyMSk7CiAgICAgICAgfQogICAgICAgIGlmIChpc0JlemllckN1cnZlKG91dGVyMikpIHsKICAgICAgICAgICAgcGF0aC5wdXNoKG91dGVyMi5zdWJkaXZpZGUoMC41LCB0cnVlKSk7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICBwYXRoLnB1c2gob3V0ZXIyKTsKICAgICAgICB9CiAgICAgICAgaWYgKGlzQmV6aWVyQ3VydmUoaW5uZXIyKSkgewogICAgICAgICAgICBwYXRoLnB1c2goaW5uZXIyLnN1YmRpdmlkZSgwLjUsIHRydWUpLnJldmVyc2UoKSk7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICBwYXRoLnB1c2goaW5uZXIyKTsKICAgICAgICB9CiAgICAgICAgaWYgKGlzQmV6aWVyQ3VydmUoaW5uZXIxKSkgewogICAgICAgICAgICBwYXRoLnB1c2goaW5uZXIxLnN1YmRpdmlkZSgwLjUsIGZhbHNlKS5yZXZlcnNlKCkpOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgcGF0aC5wdXNoKGlubmVyMSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBwYXRoOwogICAgfTsKCiAgICB2YXIgcGFkZGluZ0JveCA9IGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgdmFyIGJvdW5kcyA9IGVsZW1lbnQuYm91bmRzOwogICAgICAgIHZhciBzdHlsZXMgPSBlbGVtZW50LnN0eWxlczsKICAgICAgICByZXR1cm4gYm91bmRzLmFkZChzdHlsZXMuYm9yZGVyTGVmdFdpZHRoLCBzdHlsZXMuYm9yZGVyVG9wV2lkdGgsIC0oc3R5bGVzLmJvcmRlclJpZ2h0V2lkdGggKyBzdHlsZXMuYm9yZGVyTGVmdFdpZHRoKSwgLShzdHlsZXMuYm9yZGVyVG9wV2lkdGggKyBzdHlsZXMuYm9yZGVyQm90dG9tV2lkdGgpKTsKICAgIH07CiAgICB2YXIgY29udGVudEJveCA9IGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgdmFyIHN0eWxlcyA9IGVsZW1lbnQuc3R5bGVzOwogICAgICAgIHZhciBib3VuZHMgPSBlbGVtZW50LmJvdW5kczsKICAgICAgICB2YXIgcGFkZGluZ0xlZnQgPSBnZXRBYnNvbHV0ZVZhbHVlKHN0eWxlcy5wYWRkaW5nTGVmdCwgYm91bmRzLndpZHRoKTsKICAgICAgICB2YXIgcGFkZGluZ1JpZ2h0ID0gZ2V0QWJzb2x1dGVWYWx1ZShzdHlsZXMucGFkZGluZ1JpZ2h0LCBib3VuZHMud2lkdGgpOwogICAgICAgIHZhciBwYWRkaW5nVG9wID0gZ2V0QWJzb2x1dGVWYWx1ZShzdHlsZXMucGFkZGluZ1RvcCwgYm91bmRzLndpZHRoKTsKICAgICAgICB2YXIgcGFkZGluZ0JvdHRvbSA9IGdldEFic29sdXRlVmFsdWUoc3R5bGVzLnBhZGRpbmdCb3R0b20sIGJvdW5kcy53aWR0aCk7CiAgICAgICAgcmV0dXJuIGJvdW5kcy5hZGQocGFkZGluZ0xlZnQgKyBzdHlsZXMuYm9yZGVyTGVmdFdpZHRoLCBwYWRkaW5nVG9wICsgc3R5bGVzLmJvcmRlclRvcFdpZHRoLCAtKHN0eWxlcy5ib3JkZXJSaWdodFdpZHRoICsgc3R5bGVzLmJvcmRlckxlZnRXaWR0aCArIHBhZGRpbmdMZWZ0ICsgcGFkZGluZ1JpZ2h0KSwgLShzdHlsZXMuYm9yZGVyVG9wV2lkdGggKyBzdHlsZXMuYm9yZGVyQm90dG9tV2lkdGggKyBwYWRkaW5nVG9wICsgcGFkZGluZ0JvdHRvbSkpOwogICAgfTsKCiAgICB2YXIgY2FsY3VsYXRlQmFja2dyb3VuZFBvc2l0aW9uaW5nQXJlYSA9IGZ1bmN0aW9uIChiYWNrZ3JvdW5kT3JpZ2luLCBlbGVtZW50KSB7CiAgICAgICAgaWYgKGJhY2tncm91bmRPcmlnaW4gPT09IDAgLyogQk9SREVSX0JPWCAqLykgewogICAgICAgICAgICByZXR1cm4gZWxlbWVudC5ib3VuZHM7CiAgICAgICAgfQogICAgICAgIGlmIChiYWNrZ3JvdW5kT3JpZ2luID09PSAyIC8qIENPTlRFTlRfQk9YICovKSB7CiAgICAgICAgICAgIHJldHVybiBjb250ZW50Qm94KGVsZW1lbnQpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gcGFkZGluZ0JveChlbGVtZW50KTsKICAgIH07CiAgICB2YXIgY2FsY3VsYXRlQmFja2dyb3VuZFBhaW50aW5nQXJlYSA9IGZ1bmN0aW9uIChiYWNrZ3JvdW5kQ2xpcCwgZWxlbWVudCkgewogICAgICAgIGlmIChiYWNrZ3JvdW5kQ2xpcCA9PT0gMCAvKiBCT1JERVJfQk9YICovKSB7CiAgICAgICAgICAgIHJldHVybiBlbGVtZW50LmJvdW5kczsKICAgICAgICB9CiAgICAgICAgaWYgKGJhY2tncm91bmRDbGlwID09PSAyIC8qIENPTlRFTlRfQk9YICovKSB7CiAgICAgICAgICAgIHJldHVybiBjb250ZW50Qm94KGVsZW1lbnQpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gcGFkZGluZ0JveChlbGVtZW50KTsKICAgIH07CiAgICB2YXIgY2FsY3VsYXRlQmFja2dyb3VuZFJlbmRlcmluZyA9IGZ1bmN0aW9uIChjb250YWluZXIsIGluZGV4LCBpbnRyaW5zaWNTaXplKSB7CiAgICAgICAgdmFyIGJhY2tncm91bmRQb3NpdGlvbmluZ0FyZWEgPSBjYWxjdWxhdGVCYWNrZ3JvdW5kUG9zaXRpb25pbmdBcmVhKGdldEJhY2tncm91bmRWYWx1ZUZvckluZGV4KGNvbnRhaW5lci5zdHlsZXMuYmFja2dyb3VuZE9yaWdpbiwgaW5kZXgpLCBjb250YWluZXIpOwogICAgICAgIHZhciBiYWNrZ3JvdW5kUGFpbnRpbmdBcmVhID0gY2FsY3VsYXRlQmFja2dyb3VuZFBhaW50aW5nQXJlYShnZXRCYWNrZ3JvdW5kVmFsdWVGb3JJbmRleChjb250YWluZXIuc3R5bGVzLmJhY2tncm91bmRDbGlwLCBpbmRleCksIGNvbnRhaW5lcik7CiAgICAgICAgdmFyIGJhY2tncm91bmRJbWFnZVNpemUgPSBjYWxjdWxhdGVCYWNrZ3JvdW5kU2l6ZShnZXRCYWNrZ3JvdW5kVmFsdWVGb3JJbmRleChjb250YWluZXIuc3R5bGVzLmJhY2tncm91bmRTaXplLCBpbmRleCksIGludHJpbnNpY1NpemUsIGJhY2tncm91bmRQb3NpdGlvbmluZ0FyZWEpOwogICAgICAgIHZhciBzaXplV2lkdGggPSBiYWNrZ3JvdW5kSW1hZ2VTaXplWzBdLCBzaXplSGVpZ2h0ID0gYmFja2dyb3VuZEltYWdlU2l6ZVsxXTsKICAgICAgICB2YXIgcG9zaXRpb24gPSBnZXRBYnNvbHV0ZVZhbHVlRm9yVHVwbGUoZ2V0QmFja2dyb3VuZFZhbHVlRm9ySW5kZXgoY29udGFpbmVyLnN0eWxlcy5iYWNrZ3JvdW5kUG9zaXRpb24sIGluZGV4KSwgYmFja2dyb3VuZFBvc2l0aW9uaW5nQXJlYS53aWR0aCAtIHNpemVXaWR0aCwgYmFja2dyb3VuZFBvc2l0aW9uaW5nQXJlYS5oZWlnaHQgLSBzaXplSGVpZ2h0KTsKICAgICAgICB2YXIgcGF0aCA9IGNhbGN1bGF0ZUJhY2tncm91bmRSZXBlYXRQYXRoKGdldEJhY2tncm91bmRWYWx1ZUZvckluZGV4KGNvbnRhaW5lci5zdHlsZXMuYmFja2dyb3VuZFJlcGVhdCwgaW5kZXgpLCBwb3NpdGlvbiwgYmFja2dyb3VuZEltYWdlU2l6ZSwgYmFja2dyb3VuZFBvc2l0aW9uaW5nQXJlYSwgYmFja2dyb3VuZFBhaW50aW5nQXJlYSk7CiAgICAgICAgdmFyIG9mZnNldFggPSBNYXRoLnJvdW5kKGJhY2tncm91bmRQb3NpdGlvbmluZ0FyZWEubGVmdCArIHBvc2l0aW9uWzBdKTsKICAgICAgICB2YXIgb2Zmc2V0WSA9IE1hdGgucm91bmQoYmFja2dyb3VuZFBvc2l0aW9uaW5nQXJlYS50b3AgKyBwb3NpdGlvblsxXSk7CiAgICAgICAgcmV0dXJuIFtwYXRoLCBvZmZzZXRYLCBvZmZzZXRZLCBzaXplV2lkdGgsIHNpemVIZWlnaHRdOwogICAgfTsKICAgIHZhciBpc0F1dG8gPSBmdW5jdGlvbiAodG9rZW4pIHsgcmV0dXJuIGlzSWRlbnRUb2tlbih0b2tlbikgJiYgdG9rZW4udmFsdWUgPT09IEJBQ0tHUk9VTkRfU0laRS5BVVRPOyB9OwogICAgdmFyIGhhc0ludHJpbnNpY1ZhbHVlID0gZnVuY3Rpb24gKHZhbHVlKSB7IHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInOyB9OwogICAgdmFyIGNhbGN1bGF0ZUJhY2tncm91bmRTaXplID0gZnVuY3Rpb24gKHNpemUsIF9hLCBib3VuZHMpIHsKICAgICAgICB2YXIgaW50cmluc2ljV2lkdGggPSBfYVswXSwgaW50cmluc2ljSGVpZ2h0ID0gX2FbMV0sIGludHJpbnNpY1Byb3BvcnRpb24gPSBfYVsyXTsKICAgICAgICB2YXIgZmlyc3QgPSBzaXplWzBdLCBzZWNvbmQgPSBzaXplWzFdOwogICAgICAgIGlmICghZmlyc3QpIHsKICAgICAgICAgICAgcmV0dXJuIFswLCAwXTsKICAgICAgICB9CiAgICAgICAgaWYgKGlzTGVuZ3RoUGVyY2VudGFnZShmaXJzdCkgJiYgc2Vjb25kICYmIGlzTGVuZ3RoUGVyY2VudGFnZShzZWNvbmQpKSB7CiAgICAgICAgICAgIHJldHVybiBbZ2V0QWJzb2x1dGVWYWx1ZShmaXJzdCwgYm91bmRzLndpZHRoKSwgZ2V0QWJzb2x1dGVWYWx1ZShzZWNvbmQsIGJvdW5kcy5oZWlnaHQpXTsKICAgICAgICB9CiAgICAgICAgdmFyIGhhc0ludHJpbnNpY1Byb3BvcnRpb24gPSBoYXNJbnRyaW5zaWNWYWx1ZShpbnRyaW5zaWNQcm9wb3J0aW9uKTsKICAgICAgICBpZiAoaXNJZGVudFRva2VuKGZpcnN0KSAmJiAoZmlyc3QudmFsdWUgPT09IEJBQ0tHUk9VTkRfU0laRS5DT05UQUlOIHx8IGZpcnN0LnZhbHVlID09PSBCQUNLR1JPVU5EX1NJWkUuQ09WRVIpKSB7CiAgICAgICAgICAgIGlmIChoYXNJbnRyaW5zaWNWYWx1ZShpbnRyaW5zaWNQcm9wb3J0aW9uKSkgewogICAgICAgICAgICAgICAgdmFyIHRhcmdldFJhdGlvID0gYm91bmRzLndpZHRoIC8gYm91bmRzLmhlaWdodDsKICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXRSYXRpbyA8IGludHJpbnNpY1Byb3BvcnRpb24gIT09IChmaXJzdC52YWx1ZSA9PT0gQkFDS0dST1VORF9TSVpFLkNPVkVSKQogICAgICAgICAgICAgICAgICAgID8gW2JvdW5kcy53aWR0aCwgYm91bmRzLndpZHRoIC8gaW50cmluc2ljUHJvcG9ydGlvbl0KICAgICAgICAgICAgICAgICAgICA6IFtib3VuZHMuaGVpZ2h0ICogaW50cmluc2ljUHJvcG9ydGlvbiwgYm91bmRzLmhlaWdodF07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIFtib3VuZHMud2lkdGgsIGJvdW5kcy5oZWlnaHRdOwogICAgICAgIH0KICAgICAgICB2YXIgaGFzSW50cmluc2ljV2lkdGggPSBoYXNJbnRyaW5zaWNWYWx1ZShpbnRyaW5zaWNXaWR0aCk7CiAgICAgICAgdmFyIGhhc0ludHJpbnNpY0hlaWdodCA9IGhhc0ludHJpbnNpY1ZhbHVlKGludHJpbnNpY0hlaWdodCk7CiAgICAgICAgdmFyIGhhc0ludHJpbnNpY0RpbWVuc2lvbnMgPSBoYXNJbnRyaW5zaWNXaWR0aCB8fCBoYXNJbnRyaW5zaWNIZWlnaHQ7CiAgICAgICAgLy8gSWYgdGhlIGJhY2tncm91bmQtc2l6ZSBpcyBhdXRvIG9yIGF1dG8gYXV0bzoKICAgICAgICBpZiAoaXNBdXRvKGZpcnN0KSAmJiAoIXNlY29uZCB8fCBpc0F1dG8oc2Vjb25kKSkpIHsKICAgICAgICAgICAgLy8gSWYgdGhlIGltYWdlIGhhcyBib3RoIGhvcml6b250YWwgYW5kIHZlcnRpY2FsIGludHJpbnNpYyBkaW1lbnNpb25zLCBpdCdzIHJlbmRlcmVkIGF0IHRoYXQgc2l6ZS4KICAgICAgICAgICAgaWYgKGhhc0ludHJpbnNpY1dpZHRoICYmIGhhc0ludHJpbnNpY0hlaWdodCkgewogICAgICAgICAgICAgICAgcmV0dXJuIFtpbnRyaW5zaWNXaWR0aCwgaW50cmluc2ljSGVpZ2h0XTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyBJZiB0aGUgaW1hZ2UgaGFzIG5vIGludHJpbnNpYyBkaW1lbnNpb25zIGFuZCBoYXMgbm8gaW50cmluc2ljIHByb3BvcnRpb25zLAogICAgICAgICAgICAvLyBpdCdzIHJlbmRlcmVkIGF0IHRoZSBzaXplIG9mIHRoZSBiYWNrZ3JvdW5kIHBvc2l0aW9uaW5nIGFyZWEuCiAgICAgICAgICAgIGlmICghaGFzSW50cmluc2ljUHJvcG9ydGlvbiAmJiAhaGFzSW50cmluc2ljRGltZW5zaW9ucykgewogICAgICAgICAgICAgICAgcmV0dXJuIFtib3VuZHMud2lkdGgsIGJvdW5kcy5oZWlnaHRdOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIFRPRE8gSWYgdGhlIGltYWdlIGhhcyBubyBpbnRyaW5zaWMgZGltZW5zaW9ucyBidXQgaGFzIGludHJpbnNpYyBwcm9wb3J0aW9ucywgaXQncyByZW5kZXJlZCBhcyBpZiBjb250YWluIGhhZCBiZWVuIHNwZWNpZmllZCBpbnN0ZWFkLgogICAgICAgICAgICAvLyBJZiB0aGUgaW1hZ2UgaGFzIG9ubHkgb25lIGludHJpbnNpYyBkaW1lbnNpb24gYW5kIGhhcyBpbnRyaW5zaWMgcHJvcG9ydGlvbnMsIGl0J3MgcmVuZGVyZWQgYXQgdGhlIHNpemUgY29ycmVzcG9uZGluZyB0byB0aGF0IG9uZSBkaW1lbnNpb24uCiAgICAgICAgICAgIC8vIFRoZSBvdGhlciBkaW1lbnNpb24gaXMgY29tcHV0ZWQgdXNpbmcgdGhlIHNwZWNpZmllZCBkaW1lbnNpb24gYW5kIHRoZSBpbnRyaW5zaWMgcHJvcG9ydGlvbnMuCiAgICAgICAgICAgIGlmIChoYXNJbnRyaW5zaWNEaW1lbnNpb25zICYmIGhhc0ludHJpbnNpY1Byb3BvcnRpb24pIHsKICAgICAgICAgICAgICAgIHZhciB3aWR0aF8xID0gaGFzSW50cmluc2ljV2lkdGgKICAgICAgICAgICAgICAgICAgICA/IGludHJpbnNpY1dpZHRoCiAgICAgICAgICAgICAgICAgICAgOiBpbnRyaW5zaWNIZWlnaHQgKiBpbnRyaW5zaWNQcm9wb3J0aW9uOwogICAgICAgICAgICAgICAgdmFyIGhlaWdodF8xID0gaGFzSW50cmluc2ljSGVpZ2h0CiAgICAgICAgICAgICAgICAgICAgPyBpbnRyaW5zaWNIZWlnaHQKICAgICAgICAgICAgICAgICAgICA6IGludHJpbnNpY1dpZHRoIC8gaW50cmluc2ljUHJvcG9ydGlvbjsKICAgICAgICAgICAgICAgIHJldHVybiBbd2lkdGhfMSwgaGVpZ2h0XzFdOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIElmIHRoZSBpbWFnZSBoYXMgb25seSBvbmUgaW50cmluc2ljIGRpbWVuc2lvbiBidXQgaGFzIG5vIGludHJpbnNpYyBwcm9wb3J0aW9ucywKICAgICAgICAgICAgLy8gaXQncyByZW5kZXJlZCB1c2luZyB0aGUgc3BlY2lmaWVkIGRpbWVuc2lvbiBhbmQgdGhlIG90aGVyIGRpbWVuc2lvbiBvZiB0aGUgYmFja2dyb3VuZCBwb3NpdGlvbmluZyBhcmVhLgogICAgICAgICAgICB2YXIgd2lkdGhfMiA9IGhhc0ludHJpbnNpY1dpZHRoID8gaW50cmluc2ljV2lkdGggOiBib3VuZHMud2lkdGg7CiAgICAgICAgICAgIHZhciBoZWlnaHRfMiA9IGhhc0ludHJpbnNpY0hlaWdodCA/IGludHJpbnNpY0hlaWdodCA6IGJvdW5kcy5oZWlnaHQ7CiAgICAgICAgICAgIHJldHVybiBbd2lkdGhfMiwgaGVpZ2h0XzJdOwogICAgICAgIH0KICAgICAgICAvLyBJZiB0aGUgaW1hZ2UgaGFzIGludHJpbnNpYyBwcm9wb3J0aW9ucywgaXQncyBzdHJldGNoZWQgdG8gdGhlIHNwZWNpZmllZCBkaW1lbnNpb24uCiAgICAgICAgLy8gVGhlIHVuc3BlY2lmaWVkIGRpbWVuc2lvbiBpcyBjb21wdXRlZCB1c2luZyB0aGUgc3BlY2lmaWVkIGRpbWVuc2lvbiBhbmQgdGhlIGludHJpbnNpYyBwcm9wb3J0aW9ucy4KICAgICAgICBpZiAoaGFzSW50cmluc2ljUHJvcG9ydGlvbikgewogICAgICAgICAgICB2YXIgd2lkdGhfMyA9IDA7CiAgICAgICAgICAgIHZhciBoZWlnaHRfMyA9IDA7CiAgICAgICAgICAgIGlmIChpc0xlbmd0aFBlcmNlbnRhZ2UoZmlyc3QpKSB7CiAgICAgICAgICAgICAgICB3aWR0aF8zID0gZ2V0QWJzb2x1dGVWYWx1ZShmaXJzdCwgYm91bmRzLndpZHRoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmIChpc0xlbmd0aFBlcmNlbnRhZ2Uoc2Vjb25kKSkgewogICAgICAgICAgICAgICAgaGVpZ2h0XzMgPSBnZXRBYnNvbHV0ZVZhbHVlKHNlY29uZCwgYm91bmRzLmhlaWdodCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGlzQXV0byhmaXJzdCkpIHsKICAgICAgICAgICAgICAgIHdpZHRoXzMgPSBoZWlnaHRfMyAqIGludHJpbnNpY1Byb3BvcnRpb247CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAoIXNlY29uZCB8fCBpc0F1dG8oc2Vjb25kKSkgewogICAgICAgICAgICAgICAgaGVpZ2h0XzMgPSB3aWR0aF8zIC8gaW50cmluc2ljUHJvcG9ydGlvbjsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gW3dpZHRoXzMsIGhlaWdodF8zXTsKICAgICAgICB9CiAgICAgICAgLy8gSWYgdGhlIGltYWdlIGhhcyBubyBpbnRyaW5zaWMgcHJvcG9ydGlvbnMsIGl0J3Mgc3RyZXRjaGVkIHRvIHRoZSBzcGVjaWZpZWQgZGltZW5zaW9uLgogICAgICAgIC8vIFRoZSB1bnNwZWNpZmllZCBkaW1lbnNpb24gaXMgY29tcHV0ZWQgdXNpbmcgdGhlIGltYWdlJ3MgY29ycmVzcG9uZGluZyBpbnRyaW5zaWMgZGltZW5zaW9uLAogICAgICAgIC8vIGlmIHRoZXJlIGlzIG9uZS4gSWYgdGhlcmUgaXMgbm8gc3VjaCBpbnRyaW5zaWMgZGltZW5zaW9uLAogICAgICAgIC8vIGl0IGJlY29tZXMgdGhlIGNvcnJlc3BvbmRpbmcgZGltZW5zaW9uIG9mIHRoZSBiYWNrZ3JvdW5kIHBvc2l0aW9uaW5nIGFyZWEuCiAgICAgICAgdmFyIHdpZHRoID0gbnVsbDsKICAgICAgICB2YXIgaGVpZ2h0ID0gbnVsbDsKICAgICAgICBpZiAoaXNMZW5ndGhQZXJjZW50YWdlKGZpcnN0KSkgewogICAgICAgICAgICB3aWR0aCA9IGdldEFic29sdXRlVmFsdWUoZmlyc3QsIGJvdW5kcy53aWR0aCk7CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKHNlY29uZCAmJiBpc0xlbmd0aFBlcmNlbnRhZ2Uoc2Vjb25kKSkgewogICAgICAgICAgICBoZWlnaHQgPSBnZXRBYnNvbHV0ZVZhbHVlKHNlY29uZCwgYm91bmRzLmhlaWdodCk7CiAgICAgICAgfQogICAgICAgIGlmICh3aWR0aCAhPT0gbnVsbCAmJiAoIXNlY29uZCB8fCBpc0F1dG8oc2Vjb25kKSkpIHsKICAgICAgICAgICAgaGVpZ2h0ID0KICAgICAgICAgICAgICAgIGhhc0ludHJpbnNpY1dpZHRoICYmIGhhc0ludHJpbnNpY0hlaWdodAogICAgICAgICAgICAgICAgICAgID8gKHdpZHRoIC8gaW50cmluc2ljV2lkdGgpICogaW50cmluc2ljSGVpZ2h0CiAgICAgICAgICAgICAgICAgICAgOiBib3VuZHMuaGVpZ2h0OwogICAgICAgIH0KICAgICAgICBpZiAoaGVpZ2h0ICE9PSBudWxsICYmIGlzQXV0byhmaXJzdCkpIHsKICAgICAgICAgICAgd2lkdGggPQogICAgICAgICAgICAgICAgaGFzSW50cmluc2ljV2lkdGggJiYgaGFzSW50cmluc2ljSGVpZ2h0CiAgICAgICAgICAgICAgICAgICAgPyAoaGVpZ2h0IC8gaW50cmluc2ljSGVpZ2h0KSAqIGludHJpbnNpY1dpZHRoCiAgICAgICAgICAgICAgICAgICAgOiBib3VuZHMud2lkdGg7CiAgICAgICAgfQogICAgICAgIGlmICh3aWR0aCAhPT0gbnVsbCAmJiBoZWlnaHQgIT09IG51bGwpIHsKICAgICAgICAgICAgcmV0dXJuIFt3aWR0aCwgaGVpZ2h0XTsKICAgICAgICB9CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJVbmFibGUgdG8gY2FsY3VsYXRlIGJhY2tncm91bmQtc2l6ZSBmb3IgZWxlbWVudCIpOwogICAgfTsKICAgIHZhciBnZXRCYWNrZ3JvdW5kVmFsdWVGb3JJbmRleCA9IGZ1bmN0aW9uICh2YWx1ZXMsIGluZGV4KSB7CiAgICAgICAgdmFyIHZhbHVlID0gdmFsdWVzW2luZGV4XTsKICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAndW5kZWZpbmVkJykgewogICAgICAgICAgICByZXR1cm4gdmFsdWVzWzBdOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdmFsdWU7CiAgICB9OwogICAgdmFyIGNhbGN1bGF0ZUJhY2tncm91bmRSZXBlYXRQYXRoID0gZnVuY3Rpb24gKHJlcGVhdCwgX2EsIF9iLCBiYWNrZ3JvdW5kUG9zaXRpb25pbmdBcmVhLCBiYWNrZ3JvdW5kUGFpbnRpbmdBcmVhKSB7CiAgICAgICAgdmFyIHggPSBfYVswXSwgeSA9IF9hWzFdOwogICAgICAgIHZhciB3aWR0aCA9IF9iWzBdLCBoZWlnaHQgPSBfYlsxXTsKICAgICAgICBzd2l0Y2ggKHJlcGVhdCkgewogICAgICAgICAgICBjYXNlIDIgLyogUkVQRUFUX1ggKi86CiAgICAgICAgICAgICAgICByZXR1cm4gWwogICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IoTWF0aC5yb3VuZChiYWNrZ3JvdW5kUG9zaXRpb25pbmdBcmVhLmxlZnQpLCBNYXRoLnJvdW5kKGJhY2tncm91bmRQb3NpdGlvbmluZ0FyZWEudG9wICsgeSkpLAogICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IoTWF0aC5yb3VuZChiYWNrZ3JvdW5kUG9zaXRpb25pbmdBcmVhLmxlZnQgKyBiYWNrZ3JvdW5kUG9zaXRpb25pbmdBcmVhLndpZHRoKSwgTWF0aC5yb3VuZChiYWNrZ3JvdW5kUG9zaXRpb25pbmdBcmVhLnRvcCArIHkpKSwKICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yKE1hdGgucm91bmQoYmFja2dyb3VuZFBvc2l0aW9uaW5nQXJlYS5sZWZ0ICsgYmFja2dyb3VuZFBvc2l0aW9uaW5nQXJlYS53aWR0aCksIE1hdGgucm91bmQoaGVpZ2h0ICsgYmFja2dyb3VuZFBvc2l0aW9uaW5nQXJlYS50b3AgKyB5KSksCiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcihNYXRoLnJvdW5kKGJhY2tncm91bmRQb3NpdGlvbmluZ0FyZWEubGVmdCksIE1hdGgucm91bmQoaGVpZ2h0ICsgYmFja2dyb3VuZFBvc2l0aW9uaW5nQXJlYS50b3AgKyB5KSkKICAgICAgICAgICAgICAgIF07CiAgICAgICAgICAgIGNhc2UgMyAvKiBSRVBFQVRfWSAqLzoKICAgICAgICAgICAgICAgIHJldHVybiBbCiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcihNYXRoLnJvdW5kKGJhY2tncm91bmRQb3NpdGlvbmluZ0FyZWEubGVmdCArIHgpLCBNYXRoLnJvdW5kKGJhY2tncm91bmRQb3NpdGlvbmluZ0FyZWEudG9wKSksCiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcihNYXRoLnJvdW5kKGJhY2tncm91bmRQb3NpdGlvbmluZ0FyZWEubGVmdCArIHggKyB3aWR0aCksIE1hdGgucm91bmQoYmFja2dyb3VuZFBvc2l0aW9uaW5nQXJlYS50b3ApKSwKICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yKE1hdGgucm91bmQoYmFja2dyb3VuZFBvc2l0aW9uaW5nQXJlYS5sZWZ0ICsgeCArIHdpZHRoKSwgTWF0aC5yb3VuZChiYWNrZ3JvdW5kUG9zaXRpb25pbmdBcmVhLmhlaWdodCArIGJhY2tncm91bmRQb3NpdGlvbmluZ0FyZWEudG9wKSksCiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcihNYXRoLnJvdW5kKGJhY2tncm91bmRQb3NpdGlvbmluZ0FyZWEubGVmdCArIHgpLCBNYXRoLnJvdW5kKGJhY2tncm91bmRQb3NpdGlvbmluZ0FyZWEuaGVpZ2h0ICsgYmFja2dyb3VuZFBvc2l0aW9uaW5nQXJlYS50b3ApKQogICAgICAgICAgICAgICAgXTsKICAgICAgICAgICAgY2FzZSAxIC8qIE5PX1JFUEVBVCAqLzoKICAgICAgICAgICAgICAgIHJldHVybiBbCiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcihNYXRoLnJvdW5kKGJhY2tncm91bmRQb3NpdGlvbmluZ0FyZWEubGVmdCArIHgpLCBNYXRoLnJvdW5kKGJhY2tncm91bmRQb3NpdGlvbmluZ0FyZWEudG9wICsgeSkpLAogICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IoTWF0aC5yb3VuZChiYWNrZ3JvdW5kUG9zaXRpb25pbmdBcmVhLmxlZnQgKyB4ICsgd2lkdGgpLCBNYXRoLnJvdW5kKGJhY2tncm91bmRQb3NpdGlvbmluZ0FyZWEudG9wICsgeSkpLAogICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IoTWF0aC5yb3VuZChiYWNrZ3JvdW5kUG9zaXRpb25pbmdBcmVhLmxlZnQgKyB4ICsgd2lkdGgpLCBNYXRoLnJvdW5kKGJhY2tncm91bmRQb3NpdGlvbmluZ0FyZWEudG9wICsgeSArIGhlaWdodCkpLAogICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IoTWF0aC5yb3VuZChiYWNrZ3JvdW5kUG9zaXRpb25pbmdBcmVhLmxlZnQgKyB4KSwgTWF0aC5yb3VuZChiYWNrZ3JvdW5kUG9zaXRpb25pbmdBcmVhLnRvcCArIHkgKyBoZWlnaHQpKQogICAgICAgICAgICAgICAgXTsKICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgIHJldHVybiBbCiAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3RvcihNYXRoLnJvdW5kKGJhY2tncm91bmRQYWludGluZ0FyZWEubGVmdCksIE1hdGgucm91bmQoYmFja2dyb3VuZFBhaW50aW5nQXJlYS50b3ApKSwKICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yKE1hdGgucm91bmQoYmFja2dyb3VuZFBhaW50aW5nQXJlYS5sZWZ0ICsgYmFja2dyb3VuZFBhaW50aW5nQXJlYS53aWR0aCksIE1hdGgucm91bmQoYmFja2dyb3VuZFBhaW50aW5nQXJlYS50b3ApKSwKICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yKE1hdGgucm91bmQoYmFja2dyb3VuZFBhaW50aW5nQXJlYS5sZWZ0ICsgYmFja2dyb3VuZFBhaW50aW5nQXJlYS53aWR0aCksIE1hdGgucm91bmQoYmFja2dyb3VuZFBhaW50aW5nQXJlYS5oZWlnaHQgKyBiYWNrZ3JvdW5kUGFpbnRpbmdBcmVhLnRvcCkpLAogICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IoTWF0aC5yb3VuZChiYWNrZ3JvdW5kUGFpbnRpbmdBcmVhLmxlZnQpLCBNYXRoLnJvdW5kKGJhY2tncm91bmRQYWludGluZ0FyZWEuaGVpZ2h0ICsgYmFja2dyb3VuZFBhaW50aW5nQXJlYS50b3ApKQogICAgICAgICAgICAgICAgXTsKICAgICAgICB9CiAgICB9OwoKICAgIHZhciBTTUFMTF9JTUFHRSA9ICdkYXRhOmltYWdlL2dpZjtiYXNlNjQsUjBsR09EbGhBUUFCQUlBQUFBQUFBUC8vL3lINUJBRUFBQUFBTEFBQUFBQUJBQUVBQUFJQlJBQTcnOwoKICAgIHZhciBTQU1QTEVfVEVYVCA9ICdIaWRkZW4gVGV4dCc7CiAgICB2YXIgRm9udE1ldHJpY3MgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CiAgICAgICAgZnVuY3Rpb24gRm9udE1ldHJpY3MoZG9jdW1lbnQpIHsKICAgICAgICAgICAgdGhpcy5fZGF0YSA9IHt9OwogICAgICAgICAgICB0aGlzLl9kb2N1bWVudCA9IGRvY3VtZW50OwogICAgICAgIH0KICAgICAgICBGb250TWV0cmljcy5wcm90b3R5cGUucGFyc2VNZXRyaWNzID0gZnVuY3Rpb24gKGZvbnRGYW1pbHksIGZvbnRTaXplKSB7CiAgICAgICAgICAgIHZhciBjb250YWluZXIgPSB0aGlzLl9kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgICAgdmFyIGltZyA9IHRoaXMuX2RvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpOwogICAgICAgICAgICB2YXIgc3BhbiA9IHRoaXMuX2RvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsKICAgICAgICAgICAgdmFyIGJvZHkgPSB0aGlzLl9kb2N1bWVudC5ib2R5OwogICAgICAgICAgICBjb250YWluZXIuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nOwogICAgICAgICAgICBjb250YWluZXIuc3R5bGUuZm9udEZhbWlseSA9IGZvbnRGYW1pbHk7CiAgICAgICAgICAgIGNvbnRhaW5lci5zdHlsZS5mb250U2l6ZSA9IGZvbnRTaXplOwogICAgICAgICAgICBjb250YWluZXIuc3R5bGUubWFyZ2luID0gJzAnOwogICAgICAgICAgICBjb250YWluZXIuc3R5bGUucGFkZGluZyA9ICcwJzsKICAgICAgICAgICAgY29udGFpbmVyLnN0eWxlLndoaXRlU3BhY2UgPSAnbm93cmFwJzsKICAgICAgICAgICAgYm9keS5hcHBlbmRDaGlsZChjb250YWluZXIpOwogICAgICAgICAgICBpbWcuc3JjID0gU01BTExfSU1BR0U7CiAgICAgICAgICAgIGltZy53aWR0aCA9IDE7CiAgICAgICAgICAgIGltZy5oZWlnaHQgPSAxOwogICAgICAgICAgICBpbWcuc3R5bGUubWFyZ2luID0gJzAnOwogICAgICAgICAgICBpbWcuc3R5bGUucGFkZGluZyA9ICcwJzsKICAgICAgICAgICAgaW1nLnN0eWxlLnZlcnRpY2FsQWxpZ24gPSAnYmFzZWxpbmUnOwogICAgICAgICAgICBzcGFuLnN0eWxlLmZvbnRGYW1pbHkgPSBmb250RmFtaWx5OwogICAgICAgICAgICBzcGFuLnN0eWxlLmZvbnRTaXplID0gZm9udFNpemU7CiAgICAgICAgICAgIHNwYW4uc3R5bGUubWFyZ2luID0gJzAnOwogICAgICAgICAgICBzcGFuLnN0eWxlLnBhZGRpbmcgPSAnMCc7CiAgICAgICAgICAgIHNwYW4uYXBwZW5kQ2hpbGQodGhpcy5fZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoU0FNUExFX1RFWFQpKTsKICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHNwYW4pOwogICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoaW1nKTsKICAgICAgICAgICAgdmFyIGJhc2VsaW5lID0gaW1nLm9mZnNldFRvcCAtIHNwYW4ub2Zmc2V0VG9wICsgMjsKICAgICAgICAgICAgY29udGFpbmVyLnJlbW92ZUNoaWxkKHNwYW4pOwogICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5fZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoU0FNUExFX1RFWFQpKTsKICAgICAgICAgICAgY29udGFpbmVyLnN0eWxlLmxpbmVIZWlnaHQgPSAnbm9ybWFsJzsKICAgICAgICAgICAgaW1nLnN0eWxlLnZlcnRpY2FsQWxpZ24gPSAnc3VwZXInOwogICAgICAgICAgICB2YXIgbWlkZGxlID0gaW1nLm9mZnNldFRvcCAtIGNvbnRhaW5lci5vZmZzZXRUb3AgKyAyOwogICAgICAgICAgICBib2R5LnJlbW92ZUNoaWxkKGNvbnRhaW5lcik7CiAgICAgICAgICAgIHJldHVybiB7IGJhc2VsaW5lOiBiYXNlbGluZSwgbWlkZGxlOiBtaWRkbGUgfTsKICAgICAgICB9OwogICAgICAgIEZvbnRNZXRyaWNzLnByb3RvdHlwZS5nZXRNZXRyaWNzID0gZnVuY3Rpb24gKGZvbnRGYW1pbHksIGZvbnRTaXplKSB7CiAgICAgICAgICAgIHZhciBrZXkgPSBmb250RmFtaWx5ICsgIiAiICsgZm9udFNpemU7CiAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5fZGF0YVtrZXldID09PSAndW5kZWZpbmVkJykgewogICAgICAgICAgICAgICAgdGhpcy5fZGF0YVtrZXldID0gdGhpcy5wYXJzZU1ldHJpY3MoZm9udEZhbWlseSwgZm9udFNpemUpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiB0aGlzLl9kYXRhW2tleV07CiAgICAgICAgfTsKICAgICAgICByZXR1cm4gRm9udE1ldHJpY3M7CiAgICB9KCkpOwoKICAgIHZhciBSZW5kZXJlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKICAgICAgICBmdW5jdGlvbiBSZW5kZXJlcihjb250ZXh0LCBvcHRpb25zKSB7CiAgICAgICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7CiAgICAgICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7CiAgICAgICAgfQogICAgICAgIHJldHVybiBSZW5kZXJlcjsKICAgIH0oKSk7CgogICAgdmFyIE1BU0tfT0ZGU0VUID0gMTAwMDA7CiAgICB2YXIgQ2FudmFzUmVuZGVyZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CiAgICAgICAgX19leHRlbmRzKENhbnZhc1JlbmRlcmVyLCBfc3VwZXIpOwogICAgICAgIGZ1bmN0aW9uIENhbnZhc1JlbmRlcmVyKGNvbnRleHQsIG9wdGlvbnMpIHsKICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgY29udGV4dCwgb3B0aW9ucykgfHwgdGhpczsKICAgICAgICAgICAgX3RoaXMuX2FjdGl2ZUVmZmVjdHMgPSBbXTsKICAgICAgICAgICAgX3RoaXMuY2FudmFzID0gb3B0aW9ucy5jYW52YXMgPyBvcHRpb25zLmNhbnZhcyA6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpOwogICAgICAgICAgICBfdGhpcy5jdHggPSBfdGhpcy5jYW52YXMuZ2V0Q29udGV4dCgnMmQnKTsKICAgICAgICAgICAgaWYgKCFvcHRpb25zLmNhbnZhcykgewogICAgICAgICAgICAgICAgX3RoaXMuY2FudmFzLndpZHRoID0gTWF0aC5mbG9vcihvcHRpb25zLndpZHRoICogb3B0aW9ucy5zY2FsZSk7CiAgICAgICAgICAgICAgICBfdGhpcy5jYW52YXMuaGVpZ2h0ID0gTWF0aC5mbG9vcihvcHRpb25zLmhlaWdodCAqIG9wdGlvbnMuc2NhbGUpOwogICAgICAgICAgICAgICAgX3RoaXMuY2FudmFzLnN0eWxlLndpZHRoID0gb3B0aW9ucy53aWR0aCArICJweCI7CiAgICAgICAgICAgICAgICBfdGhpcy5jYW52YXMuc3R5bGUuaGVpZ2h0ID0gb3B0aW9ucy5oZWlnaHQgKyAicHgiOwogICAgICAgICAgICB9CiAgICAgICAgICAgIF90aGlzLmZvbnRNZXRyaWNzID0gbmV3IEZvbnRNZXRyaWNzKGRvY3VtZW50KTsKICAgICAgICAgICAgX3RoaXMuY3R4LnNjYWxlKF90aGlzLm9wdGlvbnMuc2NhbGUsIF90aGlzLm9wdGlvbnMuc2NhbGUpOwogICAgICAgICAgICBfdGhpcy5jdHgudHJhbnNsYXRlKC1vcHRpb25zLngsIC1vcHRpb25zLnkpOwogICAgICAgICAgICBfdGhpcy5jdHgudGV4dEJhc2VsaW5lID0gJ2JvdHRvbSc7CiAgICAgICAgICAgIF90aGlzLl9hY3RpdmVFZmZlY3RzID0gW107CiAgICAgICAgICAgIF90aGlzLmNvbnRleHQubG9nZ2VyLmRlYnVnKCJDYW52YXMgcmVuZGVyZXIgaW5pdGlhbGl6ZWQgKCIgKyBvcHRpb25zLndpZHRoICsgIngiICsgb3B0aW9ucy5oZWlnaHQgKyAiKSB3aXRoIHNjYWxlICIgKyBvcHRpb25zLnNjYWxlKTsKICAgICAgICAgICAgcmV0dXJuIF90aGlzOwogICAgICAgIH0KICAgICAgICBDYW52YXNSZW5kZXJlci5wcm90b3R5cGUuYXBwbHlFZmZlY3RzID0gZnVuY3Rpb24gKGVmZmVjdHMpIHsKICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgICAgICAgd2hpbGUgKHRoaXMuX2FjdGl2ZUVmZmVjdHMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICB0aGlzLnBvcEVmZmVjdCgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVmZmVjdHMuZm9yRWFjaChmdW5jdGlvbiAoZWZmZWN0KSB7IHJldHVybiBfdGhpcy5hcHBseUVmZmVjdChlZmZlY3QpOyB9KTsKICAgICAgICB9OwogICAgICAgIENhbnZhc1JlbmRlcmVyLnByb3RvdHlwZS5hcHBseUVmZmVjdCA9IGZ1bmN0aW9uIChlZmZlY3QpIHsKICAgICAgICAgICAgdGhpcy5jdHguc2F2ZSgpOwogICAgICAgICAgICBpZiAoaXNPcGFjaXR5RWZmZWN0KGVmZmVjdCkpIHsKICAgICAgICAgICAgICAgIHRoaXMuY3R4Lmdsb2JhbEFscGhhID0gZWZmZWN0Lm9wYWNpdHk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGlzVHJhbnNmb3JtRWZmZWN0KGVmZmVjdCkpIHsKICAgICAgICAgICAgICAgIHRoaXMuY3R4LnRyYW5zbGF0ZShlZmZlY3Qub2Zmc2V0WCwgZWZmZWN0Lm9mZnNldFkpOwogICAgICAgICAgICAgICAgdGhpcy5jdHgudHJhbnNmb3JtKGVmZmVjdC5tYXRyaXhbMF0sIGVmZmVjdC5tYXRyaXhbMV0sIGVmZmVjdC5tYXRyaXhbMl0sIGVmZmVjdC5tYXRyaXhbM10sIGVmZmVjdC5tYXRyaXhbNF0sIGVmZmVjdC5tYXRyaXhbNV0pOwogICAgICAgICAgICAgICAgdGhpcy5jdHgudHJhbnNsYXRlKC1lZmZlY3Qub2Zmc2V0WCwgLWVmZmVjdC5vZmZzZXRZKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoaXNDbGlwRWZmZWN0KGVmZmVjdCkpIHsKICAgICAgICAgICAgICAgIHRoaXMucGF0aChlZmZlY3QucGF0aCk7CiAgICAgICAgICAgICAgICB0aGlzLmN0eC5jbGlwKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5fYWN0aXZlRWZmZWN0cy5wdXNoKGVmZmVjdCk7CiAgICAgICAgfTsKICAgICAgICBDYW52YXNSZW5kZXJlci5wcm90b3R5cGUucG9wRWZmZWN0ID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB0aGlzLl9hY3RpdmVFZmZlY3RzLnBvcCgpOwogICAgICAgICAgICB0aGlzLmN0eC5yZXN0b3JlKCk7CiAgICAgICAgfTsKICAgICAgICBDYW52YXNSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyU3RhY2sgPSBmdW5jdGlvbiAoc3RhY2spIHsKICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdmFyIHN0eWxlczsKICAgICAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHsKICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlcyA9IHN0YWNrLmVsZW1lbnQuY29udGFpbmVyLnN0eWxlczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc3R5bGVzLmlzVmlzaWJsZSgpKSByZXR1cm4gWzMgLypicmVhayovLCAyXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMucmVuZGVyU3RhY2tDb250ZW50KHN0YWNrKV07CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMjsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOiByZXR1cm4gWzIgLypyZXR1cm4qL107CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH07CiAgICAgICAgQ2FudmFzUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlck5vZGUgPSBmdW5jdGlvbiAocGFpbnQpIHsKICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkgewogICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRhaW5zKHBhaW50LmNvbnRhaW5lci5mbGFncywgMTYgLyogREVCVUdfUkVOREVSICovKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnZ2VyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwYWludC5jb250YWluZXIuc3R5bGVzLmlzVmlzaWJsZSgpKSByZXR1cm4gWzMgLypicmVhayovLCAzXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMucmVuZGVyTm9kZUJhY2tncm91bmRBbmRCb3JkZXJzKHBhaW50KV07CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMucmVuZGVyTm9kZUNvbnRlbnQocGFpbnQpXTsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAzOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbMiAvKnJldHVybiovXTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKICAgICAgICBDYW52YXNSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyVGV4dFdpdGhMZXR0ZXJTcGFjaW5nID0gZnVuY3Rpb24gKHRleHQsIGxldHRlclNwYWNpbmcsIGJhc2VsaW5lKSB7CiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgICAgICAgIGlmIChsZXR0ZXJTcGFjaW5nID09PSAwKSB7CiAgICAgICAgICAgICAgICB0aGlzLmN0eC5maWxsVGV4dCh0ZXh0LnRleHQsIHRleHQuYm91bmRzLmxlZnQsIHRleHQuYm91bmRzLnRvcCArIGJhc2VsaW5lKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHZhciBsZXR0ZXJzID0gc2VnbWVudEdyYXBoZW1lcyh0ZXh0LnRleHQpOwogICAgICAgICAgICAgICAgbGV0dGVycy5yZWR1Y2UoZnVuY3Rpb24gKGxlZnQsIGxldHRlcikgewogICAgICAgICAgICAgICAgICAgIF90aGlzLmN0eC5maWxsVGV4dChsZXR0ZXIsIGxlZnQsIHRleHQuYm91bmRzLnRvcCArIGJhc2VsaW5lKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbGVmdCArIF90aGlzLmN0eC5tZWFzdXJlVGV4dChsZXR0ZXIpLndpZHRoOwogICAgICAgICAgICAgICAgfSwgdGV4dC5ib3VuZHMubGVmdCk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIENhbnZhc1JlbmRlcmVyLnByb3RvdHlwZS5jcmVhdGVGb250U3R5bGUgPSBmdW5jdGlvbiAoc3R5bGVzKSB7CiAgICAgICAgICAgIHZhciBmb250VmFyaWFudCA9IHN0eWxlcy5mb250VmFyaWFudAogICAgICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAodmFyaWFudCkgeyByZXR1cm4gdmFyaWFudCA9PT0gJ25vcm1hbCcgfHwgdmFyaWFudCA9PT0gJ3NtYWxsLWNhcHMnOyB9KQogICAgICAgICAgICAgICAgLmpvaW4oJycpOwogICAgICAgICAgICB2YXIgZm9udEZhbWlseSA9IGZpeElPU1N5c3RlbUZvbnRzKHN0eWxlcy5mb250RmFtaWx5KS5qb2luKCcsICcpOwogICAgICAgICAgICB2YXIgZm9udFNpemUgPSBpc0RpbWVuc2lvblRva2VuKHN0eWxlcy5mb250U2l6ZSkKICAgICAgICAgICAgICAgID8gIiIgKyBzdHlsZXMuZm9udFNpemUubnVtYmVyICsgc3R5bGVzLmZvbnRTaXplLnVuaXQKICAgICAgICAgICAgICAgIDogc3R5bGVzLmZvbnRTaXplLm51bWJlciArICJweCI7CiAgICAgICAgICAgIHJldHVybiBbCiAgICAgICAgICAgICAgICBbc3R5bGVzLmZvbnRTdHlsZSwgZm9udFZhcmlhbnQsIHN0eWxlcy5mb250V2VpZ2h0LCBmb250U2l6ZSwgZm9udEZhbWlseV0uam9pbignICcpLAogICAgICAgICAgICAgICAgZm9udEZhbWlseSwKICAgICAgICAgICAgICAgIGZvbnRTaXplCiAgICAgICAgICAgIF07CiAgICAgICAgfTsKICAgICAgICBDYW52YXNSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyVGV4dE5vZGUgPSBmdW5jdGlvbiAodGV4dCwgc3R5bGVzKSB7CiAgICAgICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciBfYSwgZm9udCwgZm9udEZhbWlseSwgZm9udFNpemUsIF9iLCBiYXNlbGluZSwgbWlkZGxlLCBwYWludE9yZGVyOwogICAgICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2MpIHsKICAgICAgICAgICAgICAgICAgICBfYSA9IHRoaXMuY3JlYXRlRm9udFN0eWxlKHN0eWxlcyksIGZvbnQgPSBfYVswXSwgZm9udEZhbWlseSA9IF9hWzFdLCBmb250U2l6ZSA9IF9hWzJdOwogICAgICAgICAgICAgICAgICAgIHRoaXMuY3R4LmZvbnQgPSBmb250OwogICAgICAgICAgICAgICAgICAgIHRoaXMuY3R4LmRpcmVjdGlvbiA9IHN0eWxlcy5kaXJlY3Rpb24gPT09IDEgLyogUlRMICovID8gJ3J0bCcgOiAnbHRyJzsKICAgICAgICAgICAgICAgICAgICB0aGlzLmN0eC50ZXh0QWxpZ24gPSAnbGVmdCc7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdHgudGV4dEJhc2VsaW5lID0gJ2FscGhhYmV0aWMnOwogICAgICAgICAgICAgICAgICAgIF9iID0gdGhpcy5mb250TWV0cmljcy5nZXRNZXRyaWNzKGZvbnRGYW1pbHksIGZvbnRTaXplKSwgYmFzZWxpbmUgPSBfYi5iYXNlbGluZSwgbWlkZGxlID0gX2IubWlkZGxlOwogICAgICAgICAgICAgICAgICAgIHBhaW50T3JkZXIgPSBzdHlsZXMucGFpbnRPcmRlcjsKICAgICAgICAgICAgICAgICAgICB0ZXh0LnRleHRCb3VuZHMuZm9yRWFjaChmdW5jdGlvbiAodGV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICBwYWludE9yZGVyLmZvckVhY2goZnVuY3Rpb24gKHBhaW50T3JkZXJMYXllcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChwYWludE9yZGVyTGF5ZXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDAgLyogRklMTCAqLzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuY3R4LmZpbGxTdHlsZSA9IGFzU3RyaW5nKHN0eWxlcy5jb2xvcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnJlbmRlclRleHRXaXRoTGV0dGVyU3BhY2luZyh0ZXh0LCBzdHlsZXMubGV0dGVyU3BhY2luZywgYmFzZWxpbmUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGV4dFNoYWRvd3MgPSBzdHlsZXMudGV4dFNoYWRvdzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRleHRTaGFkb3dzLmxlbmd0aCAmJiB0ZXh0LnRleHQudHJpbSgpLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dFNoYWRvd3MKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2xpY2UoMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmV2ZXJzZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvckVhY2goZnVuY3Rpb24gKHRleHRTaGFkb3cpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5jdHguc2hhZG93Q29sb3IgPSBhc1N0cmluZyh0ZXh0U2hhZG93LmNvbG9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5jdHguc2hhZG93T2Zmc2V0WCA9IHRleHRTaGFkb3cub2Zmc2V0WC5udW1iZXIgKiBfdGhpcy5vcHRpb25zLnNjYWxlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmN0eC5zaGFkb3dPZmZzZXRZID0gdGV4dFNoYWRvdy5vZmZzZXRZLm51bWJlciAqIF90aGlzLm9wdGlvbnMuc2NhbGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuY3R4LnNoYWRvd0JsdXIgPSB0ZXh0U2hhZG93LmJsdXIubnVtYmVyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnJlbmRlclRleHRXaXRoTGV0dGVyU3BhY2luZyh0ZXh0LCBzdHlsZXMubGV0dGVyU3BhY2luZywgYmFzZWxpbmUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5jdHguc2hhZG93Q29sb3IgPSAnJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmN0eC5zaGFkb3dPZmZzZXRYID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmN0eC5zaGFkb3dPZmZzZXRZID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmN0eC5zaGFkb3dCbHVyID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3R5bGVzLnRleHREZWNvcmF0aW9uTGluZS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmN0eC5maWxsU3R5bGUgPSBhc1N0cmluZyhzdHlsZXMudGV4dERlY29yYXRpb25Db2xvciB8fCBzdHlsZXMuY29sb3IpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGVzLnRleHREZWNvcmF0aW9uTGluZS5mb3JFYWNoKGZ1bmN0aW9uICh0ZXh0RGVjb3JhdGlvbkxpbmUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRleHREZWNvcmF0aW9uTGluZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEgLyogVU5ERVJMSU5FICovOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRHJhd3MgYSBsaW5lIGF0IHRoZSBiYXNlbGluZSBvZiB0aGUgZm9udAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVE9ETyBBcyBzb21lIGJyb3dzZXJzIGRpc3BsYXkgdGhlIGxpbmUgYXMgbW9yZSB0aGFuIDFweCBpZiB0aGUgZm9udC1zaXplIGlzIGJpZywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5lZWQgdG8gdGFrZSB0aGF0IGludG8gYWNjb3VudCBib3RoIGluIHBvc2l0aW9uIGFuZCBzaXplCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5jdHguZmlsbFJlY3QodGV4dC5ib3VuZHMubGVmdCwgTWF0aC5yb3VuZCh0ZXh0LmJvdW5kcy50b3AgKyBiYXNlbGluZSksIHRleHQuYm91bmRzLndpZHRoLCAxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDIgLyogT1ZFUkxJTkUgKi86CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5jdHguZmlsbFJlY3QodGV4dC5ib3VuZHMubGVmdCwgTWF0aC5yb3VuZCh0ZXh0LmJvdW5kcy50b3ApLCB0ZXh0LmJvdW5kcy53aWR0aCwgMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzIC8qIExJTkVfVEhST1VHSCAqLzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRPRE8gdHJ5IGFuZCBmaW5kIGV4YWN0IHBvc2l0aW9uIGZvciBsaW5lLXRocm91Z2gKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmN0eC5maWxsUmVjdCh0ZXh0LmJvdW5kcy5sZWZ0LCBNYXRoLmNlaWwodGV4dC5ib3VuZHMudG9wICsgbWlkZGxlKSwgdGV4dC5ib3VuZHMud2lkdGgsIDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxIC8qIFNUUk9LRSAqLzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0eWxlcy53ZWJraXRUZXh0U3Ryb2tlV2lkdGggJiYgdGV4dC50ZXh0LnRyaW0oKS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmN0eC5zdHJva2VTdHlsZSA9IGFzU3RyaW5nKHN0eWxlcy53ZWJraXRUZXh0U3Ryb2tlQ29sb3IpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuY3R4LmxpbmVXaWR0aCA9IHN0eWxlcy53ZWJraXRUZXh0U3Ryb2tlV2lkdGg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuY3R4LmxpbmVKb2luID0gISF3aW5kb3cuY2hyb21lID8gJ21pdGVyJyA6ICdyb3VuZCc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5jdHguc3Ryb2tlVGV4dCh0ZXh0LnRleHQsIHRleHQuYm91bmRzLmxlZnQsIHRleHQuYm91bmRzLnRvcCArIGJhc2VsaW5lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5jdHguc3Ryb2tlU3R5bGUgPSAnJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuY3R4LmxpbmVXaWR0aCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmN0eC5saW5lSm9pbiA9ICdtaXRlcic7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKICAgICAgICBDYW52YXNSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyUmVwbGFjZWRFbGVtZW50ID0gZnVuY3Rpb24gKGNvbnRhaW5lciwgY3VydmVzLCBpbWFnZSkgewogICAgICAgICAgICBpZiAoaW1hZ2UgJiYgY29udGFpbmVyLmludHJpbnNpY1dpZHRoID4gMCAmJiBjb250YWluZXIuaW50cmluc2ljSGVpZ2h0ID4gMCkgewogICAgICAgICAgICAgICAgdmFyIGJveCA9IGNvbnRlbnRCb3goY29udGFpbmVyKTsKICAgICAgICAgICAgICAgIHZhciBwYXRoID0gY2FsY3VsYXRlUGFkZGluZ0JveFBhdGgoY3VydmVzKTsKICAgICAgICAgICAgICAgIHRoaXMucGF0aChwYXRoKTsKICAgICAgICAgICAgICAgIHRoaXMuY3R4LnNhdmUoKTsKICAgICAgICAgICAgICAgIHRoaXMuY3R4LmNsaXAoKTsKICAgICAgICAgICAgICAgIHRoaXMuY3R4LmRyYXdJbWFnZShpbWFnZSwgMCwgMCwgY29udGFpbmVyLmludHJpbnNpY1dpZHRoLCBjb250YWluZXIuaW50cmluc2ljSGVpZ2h0LCBib3gubGVmdCwgYm94LnRvcCwgYm94LndpZHRoLCBib3guaGVpZ2h0KTsKICAgICAgICAgICAgICAgIHRoaXMuY3R4LnJlc3RvcmUoKTsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgQ2FudmFzUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlck5vZGVDb250ZW50ID0gZnVuY3Rpb24gKHBhaW50KSB7CiAgICAgICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciBjb250YWluZXIsIGN1cnZlcywgc3R5bGVzLCBfaSwgX2EsIGNoaWxkLCBpbWFnZSwgaW1hZ2UsIGlmcmFtZVJlbmRlcmVyLCBjYW52YXMsIHNpemUsIF9iLCBmb250RmFtaWx5LCBmb250U2l6ZSwgYmFzZWxpbmUsIGJvdW5kcywgeCwgdGV4dEJvdW5kcywgaW1nLCBpbWFnZSwgdXJsLCBmb250RmFtaWx5LCBib3VuZHM7CiAgICAgICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9jKSB7CiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfYy5sYWJlbCkgewogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcGx5RWZmZWN0cyhwYWludC5nZXRFZmZlY3RzKDQgLyogQ09OVEVOVCAqLykpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyID0gcGFpbnQuY29udGFpbmVyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VydmVzID0gcGFpbnQuY3VydmVzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGVzID0gY29udGFpbmVyLnN0eWxlczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9pID0gMCwgX2EgPSBjb250YWluZXIudGV4dE5vZGVzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2MubGFiZWwgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShfaSA8IF9hLmxlbmd0aCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGQgPSBfYVtfaV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnJlbmRlclRleHROb2RlKGNoaWxkLCBzdHlsZXMpXTsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2Muc2VudCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2MubGFiZWwgPSAzOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfaSsrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgMV07CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKGNvbnRhaW5lciBpbnN0YW5jZW9mIEltYWdlRWxlbWVudENvbnRhaW5lcikpIHJldHVybiBbMyAvKmJyZWFrKi8sIDhdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2MubGFiZWwgPSA1OwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYy50cnlzLnB1c2goWzUsIDcsICwgOF0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5jb250ZXh0LmNhY2hlLm1hdGNoKGNvbnRhaW5lci5zcmMpXTsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2UgPSBfYy5zZW50KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclJlcGxhY2VkRWxlbWVudChjb250YWluZXIsIGN1cnZlcywgaW1hZ2UpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgOF07CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jLnNlbnQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dC5sb2dnZXIuZXJyb3IoIkVycm9yIGxvYWRpbmcgaW1hZ2UgIiArIGNvbnRhaW5lci5zcmMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgOF07CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250YWluZXIgaW5zdGFuY2VvZiBDYW52YXNFbGVtZW50Q29udGFpbmVyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJSZXBsYWNlZEVsZW1lbnQoY29udGFpbmVyLCBjdXJ2ZXMsIGNvbnRhaW5lci5jYW52YXMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoY29udGFpbmVyIGluc3RhbmNlb2YgU1ZHRWxlbWVudENvbnRhaW5lcikpIHJldHVybiBbMyAvKmJyZWFrKi8sIDEyXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jLmxhYmVsID0gOTsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2MudHJ5cy5wdXNoKFs5LCAxMSwgLCAxMl0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5jb250ZXh0LmNhY2hlLm1hdGNoKGNvbnRhaW5lci5zdmcpXTsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlID0gX2Muc2VudCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJSZXBsYWNlZEVsZW1lbnQoY29udGFpbmVyLCBjdXJ2ZXMsIGltYWdlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDEyXTsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jLnNlbnQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dC5sb2dnZXIuZXJyb3IoIkVycm9yIGxvYWRpbmcgc3ZnICIgKyBjb250YWluZXIuc3ZnLnN1YnN0cmluZygwLCAyNTUpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDEyXTsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKGNvbnRhaW5lciBpbnN0YW5jZW9mIElGcmFtZUVsZW1lbnRDb250YWluZXIgJiYgY29udGFpbmVyLnRyZWUpKSByZXR1cm4gWzMgLypicmVhayovLCAxNF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZnJhbWVSZW5kZXJlciA9IG5ldyBDYW52YXNSZW5kZXJlcih0aGlzLmNvbnRleHQsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2FsZTogdGhpcy5vcHRpb25zLnNjYWxlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogY29udGFpbmVyLmJhY2tncm91bmRDb2xvciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4OiAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IGNvbnRhaW5lci53aWR0aCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IGNvbnRhaW5lci5oZWlnaHQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgaWZyYW1lUmVuZGVyZXIucmVuZGVyKGNvbnRhaW5lci50cmVlKV07CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW52YXMgPSBfYy5zZW50KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29udGFpbmVyLndpZHRoICYmIGNvbnRhaW5lci5oZWlnaHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN0eC5kcmF3SW1hZ2UoY2FudmFzLCAwLCAwLCBjb250YWluZXIud2lkdGgsIGNvbnRhaW5lci5oZWlnaHQsIGNvbnRhaW5lci5ib3VuZHMubGVmdCwgY29udGFpbmVyLmJvdW5kcy50b3AsIGNvbnRhaW5lci5ib3VuZHMud2lkdGgsIGNvbnRhaW5lci5ib3VuZHMuaGVpZ2h0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jLmxhYmVsID0gMTQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29udGFpbmVyIGluc3RhbmNlb2YgSW5wdXRFbGVtZW50Q29udGFpbmVyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZSA9IE1hdGgubWluKGNvbnRhaW5lci5ib3VuZHMud2lkdGgsIGNvbnRhaW5lci5ib3VuZHMuaGVpZ2h0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29udGFpbmVyLnR5cGUgPT09IENIRUNLQk9YKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250YWluZXIuY2hlY2tlZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdHguc2F2ZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXRoKFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yKGNvbnRhaW5lci5ib3VuZHMubGVmdCArIHNpemUgKiAwLjM5MzYzLCBjb250YWluZXIuYm91bmRzLnRvcCArIHNpemUgKiAwLjc5KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yKGNvbnRhaW5lci5ib3VuZHMubGVmdCArIHNpemUgKiAwLjE2LCBjb250YWluZXIuYm91bmRzLnRvcCArIHNpemUgKiAwLjU1NDkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IoY29udGFpbmVyLmJvdW5kcy5sZWZ0ICsgc2l6ZSAqIDAuMjczNDcsIGNvbnRhaW5lci5ib3VuZHMudG9wICsgc2l6ZSAqIDAuNDQwNzEpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IoY29udGFpbmVyLmJvdW5kcy5sZWZ0ICsgc2l6ZSAqIDAuMzk2OTQsIGNvbnRhaW5lci5ib3VuZHMudG9wICsgc2l6ZSAqIDAuNTY0OSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3Rvcihjb250YWluZXIuYm91bmRzLmxlZnQgKyBzaXplICogMC43Mjk4MywgY29udGFpbmVyLmJvdW5kcy50b3AgKyBzaXplICogMC4yMyksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3Rvcihjb250YWluZXIuYm91bmRzLmxlZnQgKyBzaXplICogMC44NCwgY29udGFpbmVyLmJvdW5kcy50b3AgKyBzaXplICogMC4zNDA4NSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3Rvcihjb250YWluZXIuYm91bmRzLmxlZnQgKyBzaXplICogMC4zOTM2MywgY29udGFpbmVyLmJvdW5kcy50b3AgKyBzaXplICogMC43OSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdHguZmlsbFN0eWxlID0gYXNTdHJpbmcoSU5QVVRfQ09MT1IpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdHguZmlsbCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdHgucmVzdG9yZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNvbnRhaW5lci50eXBlID09PSBSQURJTykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29udGFpbmVyLmNoZWNrZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3R4LnNhdmUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3R4LmJlZ2luUGF0aCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdHguYXJjKGNvbnRhaW5lci5ib3VuZHMubGVmdCArIHNpemUgLyAyLCBjb250YWluZXIuYm91bmRzLnRvcCArIHNpemUgLyAyLCBzaXplIC8gNCwgMCwgTWF0aC5QSSAqIDIsIHRydWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdHguZmlsbFN0eWxlID0gYXNTdHJpbmcoSU5QVVRfQ09MT1IpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdHguZmlsbCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdHgucmVzdG9yZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzVGV4dElucHV0RWxlbWVudChjb250YWluZXIpICYmIGNvbnRhaW5lci52YWx1ZS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYiA9IHRoaXMuY3JlYXRlRm9udFN0eWxlKHN0eWxlcyksIGZvbnRGYW1pbHkgPSBfYlswXSwgZm9udFNpemUgPSBfYlsxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlbGluZSA9IHRoaXMuZm9udE1ldHJpY3MuZ2V0TWV0cmljcyhmb250RmFtaWx5LCBmb250U2l6ZSkuYmFzZWxpbmU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdHguZm9udCA9IGZvbnRGYW1pbHk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdHguZmlsbFN0eWxlID0gYXNTdHJpbmcoc3R5bGVzLmNvbG9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN0eC50ZXh0QmFzZWxpbmUgPSAnYWxwaGFiZXRpYyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdHgudGV4dEFsaWduID0gY2FudmFzVGV4dEFsaWduKGNvbnRhaW5lci5zdHlsZXMudGV4dEFsaWduKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3VuZHMgPSBjb250ZW50Qm94KGNvbnRhaW5lcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChjb250YWluZXIuc3R5bGVzLnRleHRBbGlnbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEgLyogQ0VOVEVSICovOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeCArPSBib3VuZHMud2lkdGggLyAyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMiAvKiBSSUdIVCAqLzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHggKz0gYm91bmRzLndpZHRoOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRCb3VuZHMgPSBib3VuZHMuYWRkKHgsIDAsIDAsIC1ib3VuZHMuaGVpZ2h0IC8gMiArIDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3R4LnNhdmUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhdGgoWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgVmVjdG9yKGJvdW5kcy5sZWZ0LCBib3VuZHMudG9wKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3Rvcihib3VuZHMubGVmdCArIGJvdW5kcy53aWR0aCwgYm91bmRzLnRvcCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBWZWN0b3IoYm91bmRzLmxlZnQgKyBib3VuZHMud2lkdGgsIGJvdW5kcy50b3AgKyBib3VuZHMuaGVpZ2h0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFZlY3Rvcihib3VuZHMubGVmdCwgYm91bmRzLnRvcCArIGJvdW5kcy5oZWlnaHQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdHguY2xpcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyVGV4dFdpdGhMZXR0ZXJTcGFjaW5nKG5ldyBUZXh0Qm91bmRzKGNvbnRhaW5lci52YWx1ZSwgdGV4dEJvdW5kcyksIHN0eWxlcy5sZXR0ZXJTcGFjaW5nLCBiYXNlbGluZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdHgucmVzdG9yZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3R4LnRleHRCYXNlbGluZSA9ICdhbHBoYWJldGljJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN0eC50ZXh0QWxpZ24gPSAnbGVmdCc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbnRhaW5zKGNvbnRhaW5lci5zdHlsZXMuZGlzcGxheSwgMjA0OCAvKiBMSVNUX0lURU0gKi8pKSByZXR1cm4gWzMgLypicmVhayovLCAyMF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShjb250YWluZXIuc3R5bGVzLmxpc3RTdHlsZUltYWdlICE9PSBudWxsKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgMTldOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nID0gY29udGFpbmVyLnN0eWxlcy5saXN0U3R5bGVJbWFnZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKGltZy50eXBlID09PSAwIC8qIFVSTCAqLykpIHJldHVybiBbMyAvKmJyZWFrKi8sIDE4XTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlID0gdm9pZCAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsID0gaW1nLnVybDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jLmxhYmVsID0gMTU7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYy50cnlzLnB1c2goWzE1LCAxNywgLCAxOF0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5jb250ZXh0LmNhY2hlLm1hdGNoKHVybCldOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2UgPSBfYy5zZW50KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN0eC5kcmF3SW1hZ2UoaW1hZ2UsIGNvbnRhaW5lci5ib3VuZHMubGVmdCAtIChpbWFnZS53aWR0aCArIDEwKSwgY29udGFpbmVyLmJvdW5kcy50b3ApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgMThdOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE3OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2Muc2VudCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250ZXh0LmxvZ2dlci5lcnJvcigiRXJyb3IgbG9hZGluZyBsaXN0LXN0eWxlLWltYWdlICIgKyB1cmwpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgMThdOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE4OiByZXR1cm4gWzMgLypicmVhayovLCAyMF07CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFpbnQubGlzdFZhbHVlICYmIGNvbnRhaW5lci5zdHlsZXMubGlzdFN0eWxlVHlwZSAhPT0gLTEgLyogTk9ORSAqLykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRGYW1pbHkgPSB0aGlzLmNyZWF0ZUZvbnRTdHlsZShzdHlsZXMpWzBdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3R4LmZvbnQgPSBmb250RmFtaWx5OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3R4LmZpbGxTdHlsZSA9IGFzU3RyaW5nKHN0eWxlcy5jb2xvcik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdHgudGV4dEJhc2VsaW5lID0gJ21pZGRsZSc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdHgudGV4dEFsaWduID0gJ3JpZ2h0JzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3VuZHMgPSBuZXcgQm91bmRzKGNvbnRhaW5lci5ib3VuZHMubGVmdCwgY29udGFpbmVyLmJvdW5kcy50b3AgKyBnZXRBYnNvbHV0ZVZhbHVlKGNvbnRhaW5lci5zdHlsZXMucGFkZGluZ1RvcCwgY29udGFpbmVyLmJvdW5kcy53aWR0aCksIGNvbnRhaW5lci5ib3VuZHMud2lkdGgsIGNvbXB1dGVMaW5lSGVpZ2h0KHN0eWxlcy5saW5lSGVpZ2h0LCBzdHlsZXMuZm9udFNpemUubnVtYmVyKSAvIDIgKyAxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclRleHRXaXRoTGV0dGVyU3BhY2luZyhuZXcgVGV4dEJvdW5kcyhwYWludC5saXN0VmFsdWUsIGJvdW5kcyksIHN0eWxlcy5sZXR0ZXJTcGFjaW5nLCBjb21wdXRlTGluZUhlaWdodChzdHlsZXMubGluZUhlaWdodCwgc3R5bGVzLmZvbnRTaXplLm51bWJlcikgLyAyICsgMik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdHgudGV4dEJhc2VsaW5lID0gJ2JvdHRvbSc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdHgudGV4dEFsaWduID0gJ2xlZnQnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2MubGFiZWwgPSAyMDsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyMDogcmV0dXJuIFsyIC8qcmV0dXJuKi9dOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICB9OwogICAgICAgIENhbnZhc1JlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXJTdGFja0NvbnRlbnQgPSBmdW5jdGlvbiAoc3RhY2spIHsKICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdmFyIF9pLCBfYSwgY2hpbGQsIF9iLCBfYywgY2hpbGQsIF9kLCBfZSwgY2hpbGQsIF9mLCBfZywgY2hpbGQsIF9oLCBfaiwgY2hpbGQsIF9rLCBfbCwgY2hpbGQsIF9tLCBfbywgY2hpbGQ7CiAgICAgICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9wKSB7CiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfcC5sYWJlbCkgewogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29udGFpbnMoc3RhY2suZWxlbWVudC5jb250YWluZXIuZmxhZ3MsIDE2IC8qIERFQlVHX1JFTkRFUiAqLykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Z2dlcjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9jc3MtcG9zaXRpb24tMy8jcGFpbnRpbmctb3JkZXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIDEuIHRoZSBiYWNrZ3JvdW5kIGFuZCBib3JkZXJzIG9mIHRoZSBlbGVtZW50IGZvcm1pbmcgdGhlIHN0YWNraW5nIGNvbnRleHQuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnJlbmRlck5vZGVCYWNrZ3JvdW5kQW5kQm9yZGVycyhzdGFjay5lbGVtZW50KV07CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9jc3MtcG9zaXRpb24tMy8jcGFpbnRpbmctb3JkZXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIDEuIHRoZSBiYWNrZ3JvdW5kIGFuZCBib3JkZXJzIG9mIHRoZSBlbGVtZW50IGZvcm1pbmcgdGhlIHN0YWNraW5nIGNvbnRleHQuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcC5zZW50KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfaSA9IDAsIF9hID0gc3RhY2submVnYXRpdmVaSW5kZXg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcC5sYWJlbCA9IDI7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKF9pIDwgX2EubGVuZ3RoKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgNV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZCA9IF9hW19pXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMucmVuZGVyU3RhY2soY2hpbGQpXTsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3Auc2VudCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3AubGFiZWwgPSA0OwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfaSsrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgMl07CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNTogCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIDMuIEZvciBhbGwgaXRzIGluLWZsb3csIG5vbi1wb3NpdGlvbmVkLCBibG9jay1sZXZlbCBkZXNjZW5kYW50cyBpbiB0cmVlIG9yZGVyOgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnJlbmRlck5vZGVDb250ZW50KHN0YWNrLmVsZW1lbnQpXTsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gMy4gRm9yIGFsbCBpdHMgaW4tZmxvdywgbm9uLXBvc2l0aW9uZWQsIGJsb2NrLWxldmVsIGRlc2NlbmRhbnRzIGluIHRyZWUgb3JkZXI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcC5zZW50KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYiA9IDAsIF9jID0gc3RhY2subm9uSW5saW5lTGV2ZWw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcC5sYWJlbCA9IDc7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKF9iIDwgX2MubGVuZ3RoKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgMTBdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGQgPSBfY1tfYl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnJlbmRlck5vZGUoY2hpbGQpXTsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3Auc2VudCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3AubGFiZWwgPSA5OwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYisrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgN107CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZCA9IDAsIF9lID0gc3RhY2subm9uUG9zaXRpb25lZEZsb2F0czsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9wLmxhYmVsID0gMTE7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShfZCA8IF9lLmxlbmd0aCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDE0XTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkID0gX2VbX2RdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5yZW5kZXJTdGFjayhjaGlsZCldOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3Auc2VudCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3AubGFiZWwgPSAxMzsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9kKys7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCAxMV07CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZiA9IDAsIF9nID0gc3RhY2subm9uUG9zaXRpb25lZElubGluZUxldmVsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3AubGFiZWwgPSAxNTsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKF9mIDwgX2cubGVuZ3RoKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgMThdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGQgPSBfZ1tfZl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnJlbmRlclN0YWNrKGNoaWxkKV07CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcC5zZW50KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcC5sYWJlbCA9IDE3OwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE3OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2YrKzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDE1XTsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9oID0gMCwgX2ogPSBzdGFjay5pbmxpbmVMZXZlbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9wLmxhYmVsID0gMTk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShfaCA8IF9qLmxlbmd0aCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDIyXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkID0gX2pbX2hdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5yZW5kZXJOb2RlKGNoaWxkKV07CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcC5zZW50KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcC5sYWJlbCA9IDIxOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDIxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2grKzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDE5XTsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyMjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9rID0gMCwgX2wgPSBzdGFjay56ZXJvT3JBdXRvWkluZGV4T3JUcmFuc2Zvcm1lZE9yT3BhY2l0eTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9wLmxhYmVsID0gMjM7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShfayA8IF9sLmxlbmd0aCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDI2XTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkID0gX2xbX2tdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5yZW5kZXJTdGFjayhjaGlsZCldOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3Auc2VudCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3AubGFiZWwgPSAyNTsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyNToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9rKys7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCAyM107CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfbSA9IDAsIF9vID0gc3RhY2sucG9zaXRpdmVaSW5kZXg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcC5sYWJlbCA9IDI3OwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI3OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoX20gPCBfby5sZW5ndGgpKSByZXR1cm4gWzMgLypicmVhayovLCAzMF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZCA9IF9vW19tXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMucmVuZGVyU3RhY2soY2hpbGQpXTsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyODoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9wLnNlbnQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9wLmxhYmVsID0gMjk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfbSsrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgMjddOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDMwOiByZXR1cm4gWzIgLypyZXR1cm4qL107CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH07CiAgICAgICAgQ2FudmFzUmVuZGVyZXIucHJvdG90eXBlLm1hc2sgPSBmdW5jdGlvbiAocGF0aHMpIHsKICAgICAgICAgICAgdGhpcy5jdHguYmVnaW5QYXRoKCk7CiAgICAgICAgICAgIHRoaXMuY3R4Lm1vdmVUbygwLCAwKTsKICAgICAgICAgICAgdGhpcy5jdHgubGluZVRvKHRoaXMuY2FudmFzLndpZHRoLCAwKTsKICAgICAgICAgICAgdGhpcy5jdHgubGluZVRvKHRoaXMuY2FudmFzLndpZHRoLCB0aGlzLmNhbnZhcy5oZWlnaHQpOwogICAgICAgICAgICB0aGlzLmN0eC5saW5lVG8oMCwgdGhpcy5jYW52YXMuaGVpZ2h0KTsKICAgICAgICAgICAgdGhpcy5jdHgubGluZVRvKDAsIDApOwogICAgICAgICAgICB0aGlzLmZvcm1hdFBhdGgocGF0aHMuc2xpY2UoMCkucmV2ZXJzZSgpKTsKICAgICAgICAgICAgdGhpcy5jdHguY2xvc2VQYXRoKCk7CiAgICAgICAgfTsKICAgICAgICBDYW52YXNSZW5kZXJlci5wcm90b3R5cGUucGF0aCA9IGZ1bmN0aW9uIChwYXRocykgewogICAgICAgICAgICB0aGlzLmN0eC5iZWdpblBhdGgoKTsKICAgICAgICAgICAgdGhpcy5mb3JtYXRQYXRoKHBhdGhzKTsKICAgICAgICAgICAgdGhpcy5jdHguY2xvc2VQYXRoKCk7CiAgICAgICAgfTsKICAgICAgICBDYW52YXNSZW5kZXJlci5wcm90b3R5cGUuZm9ybWF0UGF0aCA9IGZ1bmN0aW9uIChwYXRocykgewogICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICAgICAgICBwYXRocy5mb3JFYWNoKGZ1bmN0aW9uIChwb2ludCwgaW5kZXgpIHsKICAgICAgICAgICAgICAgIHZhciBzdGFydCA9IGlzQmV6aWVyQ3VydmUocG9pbnQpID8gcG9pbnQuc3RhcnQgOiBwb2ludDsKICAgICAgICAgICAgICAgIGlmIChpbmRleCA9PT0gMCkgewogICAgICAgICAgICAgICAgICAgIF90aGlzLmN0eC5tb3ZlVG8oc3RhcnQueCwgc3RhcnQueSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBfdGhpcy5jdHgubGluZVRvKHN0YXJ0LngsIHN0YXJ0LnkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKGlzQmV6aWVyQ3VydmUocG9pbnQpKSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMuY3R4LmJlemllckN1cnZlVG8ocG9pbnQuc3RhcnRDb250cm9sLngsIHBvaW50LnN0YXJ0Q29udHJvbC55LCBwb2ludC5lbmRDb250cm9sLngsIHBvaW50LmVuZENvbnRyb2wueSwgcG9pbnQuZW5kLngsIHBvaW50LmVuZC55KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKICAgICAgICBDYW52YXNSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyUmVwZWF0ID0gZnVuY3Rpb24gKHBhdGgsIHBhdHRlcm4sIG9mZnNldFgsIG9mZnNldFkpIHsKICAgICAgICAgICAgdGhpcy5wYXRoKHBhdGgpOwogICAgICAgICAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSBwYXR0ZXJuOwogICAgICAgICAgICB0aGlzLmN0eC50cmFuc2xhdGUob2Zmc2V0WCwgb2Zmc2V0WSk7CiAgICAgICAgICAgIHRoaXMuY3R4LmZpbGwoKTsKICAgICAgICAgICAgdGhpcy5jdHgudHJhbnNsYXRlKC1vZmZzZXRYLCAtb2Zmc2V0WSk7CiAgICAgICAgfTsKICAgICAgICBDYW52YXNSZW5kZXJlci5wcm90b3R5cGUucmVzaXplSW1hZ2UgPSBmdW5jdGlvbiAoaW1hZ2UsIHdpZHRoLCBoZWlnaHQpIHsKICAgICAgICAgICAgdmFyIF9hOwogICAgICAgICAgICBpZiAoaW1hZ2Uud2lkdGggPT09IHdpZHRoICYmIGltYWdlLmhlaWdodCA9PT0gaGVpZ2h0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gaW1hZ2U7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIG93bmVyRG9jdW1lbnQgPSAoX2EgPSB0aGlzLmNhbnZhcy5vd25lckRvY3VtZW50KSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBkb2N1bWVudDsKICAgICAgICAgICAgdmFyIGNhbnZhcyA9IG93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7CiAgICAgICAgICAgIGNhbnZhcy53aWR0aCA9IE1hdGgubWF4KDEsIHdpZHRoKTsKICAgICAgICAgICAgY2FudmFzLmhlaWdodCA9IE1hdGgubWF4KDEsIGhlaWdodCk7CiAgICAgICAgICAgIHZhciBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTsKICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShpbWFnZSwgMCwgMCwgaW1hZ2Uud2lkdGgsIGltYWdlLmhlaWdodCwgMCwgMCwgd2lkdGgsIGhlaWdodCk7CiAgICAgICAgICAgIHJldHVybiBjYW52YXM7CiAgICAgICAgfTsKICAgICAgICBDYW52YXNSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyQmFja2dyb3VuZEltYWdlID0gZnVuY3Rpb24gKGNvbnRhaW5lcikgewogICAgICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICB2YXIgaW5kZXgsIF9sb29wXzEsIHRoaXNfMSwgX2ksIF9hLCBiYWNrZ3JvdW5kSW1hZ2U7CiAgICAgICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7CiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkgewogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleCA9IGNvbnRhaW5lci5zdHlsZXMuYmFja2dyb3VuZEltYWdlLmxlbmd0aCAtIDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfbG9vcF8xID0gZnVuY3Rpb24gKGJhY2tncm91bmRJbWFnZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbWFnZSwgdXJsLCBfYywgcGF0aCwgeCwgeSwgd2lkdGgsIGhlaWdodCwgcGF0dGVybiwgX2QsIHBhdGgsIHgsIHksIHdpZHRoLCBoZWlnaHQsIF9lLCBsaW5lTGVuZ3RoLCB4MCwgeDEsIHkwLCB5MSwgY2FudmFzLCBjdHgsIGdyYWRpZW50XzEsIHBhdHRlcm4sIF9mLCBwYXRoLCBsZWZ0LCB0b3BfMSwgd2lkdGgsIGhlaWdodCwgcG9zaXRpb24sIHgsIHksIF9nLCByeCwgcnksIHJhZGlhbEdyYWRpZW50XzEsIG1pZFgsIG1pZFksIGYsIGludkY7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfaCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9oLmxhYmVsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoYmFja2dyb3VuZEltYWdlLnR5cGUgPT09IDAgLyogVVJMICovKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgNV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2UgPSB2b2lkIDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsID0gYmFja2dyb3VuZEltYWdlLnVybDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfaC5sYWJlbCA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2gudHJ5cy5wdXNoKFsxLCAzLCAsIDRdKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzXzEuY29udGV4dC5jYWNoZS5tYXRjaCh1cmwpXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWFnZSA9IF9oLnNlbnQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA0XTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfaC5zZW50KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc18xLmNvbnRleHQubG9nZ2VyLmVycm9yKCJFcnJvciBsb2FkaW5nIGJhY2tncm91bmQtaW1hZ2UgIiArIHVybCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGltYWdlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jID0gY2FsY3VsYXRlQmFja2dyb3VuZFJlbmRlcmluZyhjb250YWluZXIsIGluZGV4LCBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWFnZS53aWR0aCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlLmhlaWdodCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlLndpZHRoIC8gaW1hZ2UuaGVpZ2h0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pLCBwYXRoID0gX2NbMF0sIHggPSBfY1sxXSwgeSA9IF9jWzJdLCB3aWR0aCA9IF9jWzNdLCBoZWlnaHQgPSBfY1s0XTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0dGVybiA9IHRoaXNfMS5jdHguY3JlYXRlUGF0dGVybih0aGlzXzEucmVzaXplSW1hZ2UoaW1hZ2UsIHdpZHRoLCBoZWlnaHQpLCAncmVwZWF0Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNfMS5yZW5kZXJSZXBlYXQocGF0aCwgcGF0dGVybiwgeCwgeSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDZdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0xpbmVhckdyYWRpZW50KGJhY2tncm91bmRJbWFnZSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2QgPSBjYWxjdWxhdGVCYWNrZ3JvdW5kUmVuZGVyaW5nKGNvbnRhaW5lciwgaW5kZXgsIFtudWxsLCBudWxsLCBudWxsXSksIHBhdGggPSBfZFswXSwgeCA9IF9kWzFdLCB5ID0gX2RbMl0sIHdpZHRoID0gX2RbM10sIGhlaWdodCA9IF9kWzRdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZSA9IGNhbGN1bGF0ZUdyYWRpZW50RGlyZWN0aW9uKGJhY2tncm91bmRJbWFnZS5hbmdsZSwgd2lkdGgsIGhlaWdodCksIGxpbmVMZW5ndGggPSBfZVswXSwgeDAgPSBfZVsxXSwgeDEgPSBfZVsyXSwgeTAgPSBfZVszXSwgeTEgPSBfZVs0XTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbnZhcy53aWR0aCA9IHdpZHRoOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW52YXMuaGVpZ2h0ID0gaGVpZ2h0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JhZGllbnRfMSA9IGN0eC5jcmVhdGVMaW5lYXJHcmFkaWVudCh4MCwgeTAsIHgxLCB5MSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2Nlc3NDb2xvclN0b3BzKGJhY2tncm91bmRJbWFnZS5zdG9wcywgbGluZUxlbmd0aCkuZm9yRWFjaChmdW5jdGlvbiAoY29sb3JTdG9wKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ3JhZGllbnRfMS5hZGRDb2xvclN0b3AoY29sb3JTdG9wLnN0b3AsIGFzU3RyaW5nKGNvbG9yU3RvcC5jb2xvcikpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IGdyYWRpZW50XzE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdCgwLCAwLCB3aWR0aCwgaGVpZ2h0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdpZHRoID4gMCAmJiBoZWlnaHQgPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXR0ZXJuID0gdGhpc18xLmN0eC5jcmVhdGVQYXR0ZXJuKGNhbnZhcywgJ3JlcGVhdCcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc18xLnJlbmRlclJlcGVhdChwYXRoLCBwYXR0ZXJuLCB4LCB5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChpc1JhZGlhbEdyYWRpZW50KGJhY2tncm91bmRJbWFnZSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2YgPSBjYWxjdWxhdGVCYWNrZ3JvdW5kUmVuZGVyaW5nKGNvbnRhaW5lciwgaW5kZXgsIFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKSwgcGF0aCA9IF9mWzBdLCBsZWZ0ID0gX2ZbMV0sIHRvcF8xID0gX2ZbMl0sIHdpZHRoID0gX2ZbM10sIGhlaWdodCA9IF9mWzRdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbiA9IGJhY2tncm91bmRJbWFnZS5wb3NpdGlvbi5sZW5ndGggPT09IDAgPyBbRklGVFlfUEVSQ0VOVF0gOiBiYWNrZ3JvdW5kSW1hZ2UucG9zaXRpb247CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHggPSBnZXRBYnNvbHV0ZVZhbHVlKHBvc2l0aW9uWzBdLCB3aWR0aCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkgPSBnZXRBYnNvbHV0ZVZhbHVlKHBvc2l0aW9uW3Bvc2l0aW9uLmxlbmd0aCAtIDFdLCBoZWlnaHQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZyA9IGNhbGN1bGF0ZVJhZGl1cyhiYWNrZ3JvdW5kSW1hZ2UsIHgsIHksIHdpZHRoLCBoZWlnaHQpLCByeCA9IF9nWzBdLCByeSA9IF9nWzFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocnggPiAwICYmIHJ5ID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFkaWFsR3JhZGllbnRfMSA9IHRoaXNfMS5jdHguY3JlYXRlUmFkaWFsR3JhZGllbnQobGVmdCArIHgsIHRvcF8xICsgeSwgMCwgbGVmdCArIHgsIHRvcF8xICsgeSwgcngpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc0NvbG9yU3RvcHMoYmFja2dyb3VuZEltYWdlLnN0b3BzLCByeCAqIDIpLmZvckVhY2goZnVuY3Rpb24gKGNvbG9yU3RvcCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByYWRpYWxHcmFkaWVudF8xLmFkZENvbG9yU3RvcChjb2xvclN0b3Auc3RvcCwgYXNTdHJpbmcoY29sb3JTdG9wLmNvbG9yKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNfMS5wYXRoKHBhdGgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc18xLmN0eC5maWxsU3R5bGUgPSByYWRpYWxHcmFkaWVudF8xOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJ4ICE9PSByeSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pZFggPSBjb250YWluZXIuYm91bmRzLmxlZnQgKyAwLjUgKiBjb250YWluZXIuYm91bmRzLndpZHRoOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pZFkgPSBjb250YWluZXIuYm91bmRzLnRvcCArIDAuNSAqIGNvbnRhaW5lci5ib3VuZHMuaGVpZ2h0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYgPSByeSAvIHJ4OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludkYgPSAxIC8gZjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXzEuY3R4LnNhdmUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXzEuY3R4LnRyYW5zbGF0ZShtaWRYLCBtaWRZKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXzEuY3R4LnRyYW5zZm9ybSgxLCAwLCAwLCBmLCAwLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXzEuY3R4LnRyYW5zbGF0ZSgtbWlkWCwgLW1pZFkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNfMS5jdHguZmlsbFJlY3QobGVmdCwgaW52RiAqICh0b3BfMSAtIG1pZFkpICsgbWlkWSwgd2lkdGgsIGhlaWdodCAqIGludkYpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNfMS5jdHgucmVzdG9yZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc18xLmN0eC5maWxsKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2gubGFiZWwgPSA2OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4LS07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc18xID0gdGhpczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9pID0gMCwgX2EgPSBjb250YWluZXIuc3R5bGVzLmJhY2tncm91bmRJbWFnZS5zbGljZSgwKS5yZXZlcnNlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYi5sYWJlbCA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKF9pIDwgX2EubGVuZ3RoKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kSW1hZ2UgPSBfYVtfaV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzUgLyp5aWVsZCoqLywgX2xvb3BfMShiYWNrZ3JvdW5kSW1hZ2UpXTsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2Iuc2VudCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2IubGFiZWwgPSAzOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfaSsrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgMV07CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDogcmV0dXJuIFsyIC8qcmV0dXJuKi9dOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICB9OwogICAgICAgIENhbnZhc1JlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXJTb2xpZEJvcmRlciA9IGZ1bmN0aW9uIChjb2xvciwgc2lkZSwgY3VydmVQb2ludHMpIHsKICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkgewogICAgICAgICAgICAgICAgICAgIHRoaXMucGF0aChwYXJzZVBhdGhGb3JCb3JkZXIoY3VydmVQb2ludHMsIHNpZGUpKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSBhc1N0cmluZyhjb2xvcik7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdHguZmlsbCgpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICB9OwogICAgICAgIENhbnZhc1JlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXJEb3VibGVCb3JkZXIgPSBmdW5jdGlvbiAoY29sb3IsIHdpZHRoLCBzaWRlLCBjdXJ2ZVBvaW50cykgewogICAgICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICB2YXIgb3V0ZXJQYXRocywgaW5uZXJQYXRoczsKICAgICAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHsKICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHdpZHRoIDwgMykpIHJldHVybiBbMyAvKmJyZWFrKi8sIDJdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5yZW5kZXJTb2xpZEJvcmRlcihjb2xvciwgc2lkZSwgY3VydmVQb2ludHMpXTsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRlclBhdGhzID0gcGFyc2VQYXRoRm9yQm9yZGVyRG91YmxlT3V0ZXIoY3VydmVQb2ludHMsIHNpZGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXRoKG91dGVyUGF0aHMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdHguZmlsbFN0eWxlID0gYXNTdHJpbmcoY29sb3IpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdHguZmlsbCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5uZXJQYXRocyA9IHBhcnNlUGF0aEZvckJvcmRlckRvdWJsZUlubmVyKGN1cnZlUG9pbnRzLCBzaWRlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGF0aChpbm5lclBhdGhzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3R4LmZpbGwoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKICAgICAgICBDYW52YXNSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyTm9kZUJhY2tncm91bmRBbmRCb3JkZXJzID0gZnVuY3Rpb24gKHBhaW50KSB7CiAgICAgICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciBzdHlsZXMsIGhhc0JhY2tncm91bmQsIGJvcmRlcnMsIGJhY2tncm91bmRQYWludGluZ0FyZWEsIHNpZGUsIF9pLCBib3JkZXJzXzEsIGJvcmRlcjsKICAgICAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7CiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkgewogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcGx5RWZmZWN0cyhwYWludC5nZXRFZmZlY3RzKDIgLyogQkFDS0dST1VORF9CT1JERVJTICovKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZXMgPSBwYWludC5jb250YWluZXIuc3R5bGVzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzQmFja2dyb3VuZCA9ICFpc1RyYW5zcGFyZW50KHN0eWxlcy5iYWNrZ3JvdW5kQ29sb3IpIHx8IHN0eWxlcy5iYWNrZ3JvdW5kSW1hZ2UubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVycyA9IFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuYm9yZGVyVG9wU3R5bGUsIGNvbG9yOiBzdHlsZXMuYm9yZGVyVG9wQ29sb3IsIHdpZHRoOiBzdHlsZXMuYm9yZGVyVG9wV2lkdGggfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuYm9yZGVyUmlnaHRTdHlsZSwgY29sb3I6IHN0eWxlcy5ib3JkZXJSaWdodENvbG9yLCB3aWR0aDogc3R5bGVzLmJvcmRlclJpZ2h0V2lkdGggfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuYm9yZGVyQm90dG9tU3R5bGUsIGNvbG9yOiBzdHlsZXMuYm9yZGVyQm90dG9tQ29sb3IsIHdpZHRoOiBzdHlsZXMuYm9yZGVyQm90dG9tV2lkdGggfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiBzdHlsZXMuYm9yZGVyTGVmdFN0eWxlLCBjb2xvcjogc3R5bGVzLmJvcmRlckxlZnRDb2xvciwgd2lkdGg6IHN0eWxlcy5ib3JkZXJMZWZ0V2lkdGggfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRQYWludGluZ0FyZWEgPSBjYWxjdWxhdGVCYWNrZ3JvdW5kQ3VydmVkUGFpbnRpbmdBcmVhKGdldEJhY2tncm91bmRWYWx1ZUZvckluZGV4KHN0eWxlcy5iYWNrZ3JvdW5kQ2xpcCwgMCksIHBhaW50LmN1cnZlcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShoYXNCYWNrZ3JvdW5kIHx8IHN0eWxlcy5ib3hTaGFkb3cubGVuZ3RoKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgMl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN0eC5zYXZlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhdGgoYmFja2dyb3VuZFBhaW50aW5nQXJlYSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN0eC5jbGlwKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzVHJhbnNwYXJlbnQoc3R5bGVzLmJhY2tncm91bmRDb2xvcikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSBhc1N0cmluZyhzdHlsZXMuYmFja2dyb3VuZENvbG9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN0eC5maWxsKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnJlbmRlckJhY2tncm91bmRJbWFnZShwYWludC5jb250YWluZXIpXTsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdHgucmVzdG9yZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGVzLmJveFNoYWRvdwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zbGljZSgwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXZlcnNlKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9yRWFjaChmdW5jdGlvbiAoc2hhZG93KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuY3R4LnNhdmUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYm9yZGVyQm94QXJlYSA9IGNhbGN1bGF0ZUJvcmRlckJveFBhdGgocGFpbnQuY3VydmVzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWFza09mZnNldCA9IHNoYWRvdy5pbnNldCA/IDAgOiBNQVNLX09GRlNFVDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2hhZG93UGFpbnRpbmdBcmVhID0gdHJhbnNmb3JtUGF0aChib3JkZXJCb3hBcmVhLCAtbWFza09mZnNldCArIChzaGFkb3cuaW5zZXQgPyAxIDogLTEpICogc2hhZG93LnNwcmVhZC5udW1iZXIsIChzaGFkb3cuaW5zZXQgPyAxIDogLTEpICogc2hhZG93LnNwcmVhZC5udW1iZXIsIHNoYWRvdy5zcHJlYWQubnVtYmVyICogKHNoYWRvdy5pbnNldCA/IC0yIDogMiksIHNoYWRvdy5zcHJlYWQubnVtYmVyICogKHNoYWRvdy5pbnNldCA/IC0yIDogMikpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzaGFkb3cuaW5zZXQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucGF0aChib3JkZXJCb3hBcmVhKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuY3R4LmNsaXAoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMubWFzayhzaGFkb3dQYWludGluZ0FyZWEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMubWFzayhib3JkZXJCb3hBcmVhKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuY3R4LmNsaXAoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucGF0aChzaGFkb3dQYWludGluZ0FyZWEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5jdHguc2hhZG93T2Zmc2V0WCA9IHNoYWRvdy5vZmZzZXRYLm51bWJlciArIG1hc2tPZmZzZXQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuY3R4LnNoYWRvd09mZnNldFkgPSBzaGFkb3cub2Zmc2V0WS5udW1iZXI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuY3R4LnNoYWRvd0NvbG9yID0gYXNTdHJpbmcoc2hhZG93LmNvbG9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5jdHguc2hhZG93Qmx1ciA9IHNoYWRvdy5ibHVyLm51bWJlcjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5jdHguZmlsbFN0eWxlID0gc2hhZG93Lmluc2V0ID8gYXNTdHJpbmcoc2hhZG93LmNvbG9yKSA6ICdyZ2JhKDAsMCwwLDEpJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5jdHguZmlsbCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmN0eC5yZXN0b3JlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMjsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2lkZSA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfaSA9IDAsIGJvcmRlcnNfMSA9IGJvcmRlcnM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDM7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKF9pIDwgYm9yZGVyc18xLmxlbmd0aCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDEzXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlciA9IGJvcmRlcnNfMVtfaV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShib3JkZXIuc3R5bGUgIT09IDAgLyogTk9ORSAqLyAmJiAhaXNUcmFuc3BhcmVudChib3JkZXIuY29sb3IpICYmIGJvcmRlci53aWR0aCA+IDApKSByZXR1cm4gWzMgLypicmVhayovLCAxMV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShib3JkZXIuc3R5bGUgPT09IDIgLyogREFTSEVEICovKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgNV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnJlbmRlckRhc2hlZERvdHRlZEJvcmRlcihib3JkZXIuY29sb3IsIGJvcmRlci53aWR0aCwgc2lkZSwgcGFpbnQuY3VydmVzLCAyIC8qIERBU0hFRCAqLyldOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCAxMV07CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKGJvcmRlci5zdHlsZSA9PT0gMyAvKiBET1RURUQgKi8pKSByZXR1cm4gWzMgLypicmVhayovLCA3XTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMucmVuZGVyRGFzaGVkRG90dGVkQm9yZGVyKGJvcmRlci5jb2xvciwgYm9yZGVyLndpZHRoLCBzaWRlLCBwYWludC5jdXJ2ZXMsIDMgLyogRE9UVEVEICovKV07CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDExXTsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoYm9yZGVyLnN0eWxlID09PSA0IC8qIERPVUJMRSAqLykpIHJldHVybiBbMyAvKmJyZWFrKi8sIDldOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5yZW5kZXJEb3VibGVCb3JkZXIoYm9yZGVyLmNvbG9yLCBib3JkZXIud2lkdGgsIHNpZGUsIHBhaW50LmN1cnZlcyldOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCAxMV07CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgOTogcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5yZW5kZXJTb2xpZEJvcmRlcihib3JkZXIuY29sb3IsIHNpZGUsIHBhaW50LmN1cnZlcyldOwogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAxMTsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpZGUrKzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMTI7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfaSsrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgM107CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTM6IHJldHVybiBbMiAvKnJldHVybiovXTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKICAgICAgICBDYW52YXNSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyRGFzaGVkRG90dGVkQm9yZGVyID0gZnVuY3Rpb24gKGNvbG9yLCB3aWR0aCwgc2lkZSwgY3VydmVQb2ludHMsIHN0eWxlKSB7CiAgICAgICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciBzdHJva2VQYXRocywgYm94UGF0aHMsIHN0YXJ0WCwgc3RhcnRZLCBlbmRYLCBlbmRZLCBsZW5ndGgsIGRhc2hMZW5ndGgsIHNwYWNlTGVuZ3RoLCB1c2VMaW5lRGFzaCwgbXVsdGlwbGllciwgbnVtYmVyT2ZEYXNoZXMsIG1pblNwYWNlLCBtYXhTcGFjZSwgcGF0aDEsIHBhdGgyLCBwYXRoMSwgcGF0aDI7CiAgICAgICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdHguc2F2ZSgpOwogICAgICAgICAgICAgICAgICAgIHN0cm9rZVBhdGhzID0gcGFyc2VQYXRoRm9yQm9yZGVyU3Ryb2tlKGN1cnZlUG9pbnRzLCBzaWRlKTsKICAgICAgICAgICAgICAgICAgICBib3hQYXRocyA9IHBhcnNlUGF0aEZvckJvcmRlcihjdXJ2ZVBvaW50cywgc2lkZSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKHN0eWxlID09PSAyIC8qIERBU0hFRCAqLykgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhdGgoYm94UGF0aHMpOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN0eC5jbGlwKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmIChpc0JlemllckN1cnZlKGJveFBhdGhzWzBdKSkgewogICAgICAgICAgICAgICAgICAgICAgICBzdGFydFggPSBib3hQYXRoc1swXS5zdGFydC54OwogICAgICAgICAgICAgICAgICAgICAgICBzdGFydFkgPSBib3hQYXRoc1swXS5zdGFydC55OwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRYID0gYm94UGF0aHNbMF0ueDsKICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRZID0gYm94UGF0aHNbMF0ueTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKGlzQmV6aWVyQ3VydmUoYm94UGF0aHNbMV0pKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZFggPSBib3hQYXRoc1sxXS5lbmQueDsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kWSA9IGJveFBhdGhzWzFdLmVuZC55OwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgZW5kWCA9IGJveFBhdGhzWzFdLng7CiAgICAgICAgICAgICAgICAgICAgICAgIGVuZFkgPSBib3hQYXRoc1sxXS55OwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAoc2lkZSA9PT0gMCB8fCBzaWRlID09PSAyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxlbmd0aCA9IE1hdGguYWJzKHN0YXJ0WCAtIGVuZFgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgbGVuZ3RoID0gTWF0aC5hYnMoc3RhcnRZIC0gZW5kWSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHRoaXMuY3R4LmJlZ2luUGF0aCgpOwogICAgICAgICAgICAgICAgICAgIGlmIChzdHlsZSA9PT0gMyAvKiBET1RURUQgKi8pIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mb3JtYXRQYXRoKHN0cm9rZVBhdGhzKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZm9ybWF0UGF0aChib3hQYXRocy5zbGljZSgwLCAyKSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGRhc2hMZW5ndGggPSB3aWR0aCA8IDMgPyB3aWR0aCAqIDMgOiB3aWR0aCAqIDI7CiAgICAgICAgICAgICAgICAgICAgc3BhY2VMZW5ndGggPSB3aWR0aCA8IDMgPyB3aWR0aCAqIDIgOiB3aWR0aDsKICAgICAgICAgICAgICAgICAgICBpZiAoc3R5bGUgPT09IDMgLyogRE9UVEVEICovKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRhc2hMZW5ndGggPSB3aWR0aDsKICAgICAgICAgICAgICAgICAgICAgICAgc3BhY2VMZW5ndGggPSB3aWR0aDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdXNlTGluZURhc2ggPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIGlmIChsZW5ndGggPD0gZGFzaExlbmd0aCAqIDIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdXNlTGluZURhc2ggPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAobGVuZ3RoIDw9IGRhc2hMZW5ndGggKiAyICsgc3BhY2VMZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbXVsdGlwbGllciA9IGxlbmd0aCAvICgyICogZGFzaExlbmd0aCArIHNwYWNlTGVuZ3RoKTsKICAgICAgICAgICAgICAgICAgICAgICAgZGFzaExlbmd0aCAqPSBtdWx0aXBsaWVyOwogICAgICAgICAgICAgICAgICAgICAgICBzcGFjZUxlbmd0aCAqPSBtdWx0aXBsaWVyOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgbnVtYmVyT2ZEYXNoZXMgPSBNYXRoLmZsb29yKChsZW5ndGggKyBzcGFjZUxlbmd0aCkgLyAoZGFzaExlbmd0aCArIHNwYWNlTGVuZ3RoKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIG1pblNwYWNlID0gKGxlbmd0aCAtIG51bWJlck9mRGFzaGVzICogZGFzaExlbmd0aCkgLyAobnVtYmVyT2ZEYXNoZXMgLSAxKTsKICAgICAgICAgICAgICAgICAgICAgICAgbWF4U3BhY2UgPSAobGVuZ3RoIC0gKG51bWJlck9mRGFzaGVzICsgMSkgKiBkYXNoTGVuZ3RoKSAvIG51bWJlck9mRGFzaGVzOwogICAgICAgICAgICAgICAgICAgICAgICBzcGFjZUxlbmd0aCA9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhTcGFjZSA8PSAwIHx8IE1hdGguYWJzKHNwYWNlTGVuZ3RoIC0gbWluU3BhY2UpIDwgTWF0aC5hYnMoc3BhY2VMZW5ndGggLSBtYXhTcGFjZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IG1pblNwYWNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBtYXhTcGFjZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKHVzZUxpbmVEYXNoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdHlsZSA9PT0gMyAvKiBET1RURUQgKi8pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3R4LnNldExpbmVEYXNoKFswLCBkYXNoTGVuZ3RoICsgc3BhY2VMZW5ndGhdKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3R4LnNldExpbmVEYXNoKFtkYXNoTGVuZ3RoLCBzcGFjZUxlbmd0aF0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmIChzdHlsZSA9PT0gMyAvKiBET1RURUQgKi8pIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdHgubGluZUNhcCA9ICdyb3VuZCc7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3R4LmxpbmVXaWR0aCA9IHdpZHRoOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdHgubGluZVdpZHRoID0gd2lkdGggKiAyICsgMS4xOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB0aGlzLmN0eC5zdHJva2VTdHlsZSA9IGFzU3RyaW5nKGNvbG9yKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmN0eC5zdHJva2UoKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmN0eC5zZXRMaW5lRGFzaChbXSk7CiAgICAgICAgICAgICAgICAgICAgLy8gZGFzaGVkIHJvdW5kIGVkZ2UgZ2FwCiAgICAgICAgICAgICAgICAgICAgaWYgKHN0eWxlID09PSAyIC8qIERBU0hFRCAqLykgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNCZXppZXJDdXJ2ZShib3hQYXRoc1swXSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGgxID0gYm94UGF0aHNbM107CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoMiA9IGJveFBhdGhzWzBdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdHguYmVnaW5QYXRoKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcm1hdFBhdGgoW25ldyBWZWN0b3IocGF0aDEuZW5kLngsIHBhdGgxLmVuZC55KSwgbmV3IFZlY3RvcihwYXRoMi5zdGFydC54LCBwYXRoMi5zdGFydC55KV0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdHguc3Ryb2tlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzQmV6aWVyQ3VydmUoYm94UGF0aHNbMV0pKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoMSA9IGJveFBhdGhzWzFdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDIgPSBib3hQYXRoc1syXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3R4LmJlZ2luUGF0aCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mb3JtYXRQYXRoKFtuZXcgVmVjdG9yKHBhdGgxLmVuZC54LCBwYXRoMS5lbmQueSksIG5ldyBWZWN0b3IocGF0aDIuc3RhcnQueCwgcGF0aDIuc3RhcnQueSldKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3R4LnN0cm9rZSgpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHRoaXMuY3R4LnJlc3RvcmUoKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKICAgICAgICBDYW52YXNSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdmFyIHN0YWNrOwogICAgICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkgewogICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5iYWNrZ3JvdW5kQ29sb3IpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSBhc1N0cmluZyh0aGlzLm9wdGlvbnMuYmFja2dyb3VuZENvbG9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN0eC5maWxsUmVjdCh0aGlzLm9wdGlvbnMueCwgdGhpcy5vcHRpb25zLnksIHRoaXMub3B0aW9ucy53aWR0aCwgdGhpcy5vcHRpb25zLmhlaWdodCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFjayA9IHBhcnNlU3RhY2tpbmdDb250ZXh0cyhlbGVtZW50KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMucmVuZGVyU3RhY2soc3RhY2spXTsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBseUVmZmVjdHMoW10pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuY2FudmFzXTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKICAgICAgICByZXR1cm4gQ2FudmFzUmVuZGVyZXI7CiAgICB9KFJlbmRlcmVyKSk7CiAgICB2YXIgaXNUZXh0SW5wdXRFbGVtZW50ID0gZnVuY3Rpb24gKGNvbnRhaW5lcikgewogICAgICAgIGlmIChjb250YWluZXIgaW5zdGFuY2VvZiBUZXh0YXJlYUVsZW1lbnRDb250YWluZXIpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKGNvbnRhaW5lciBpbnN0YW5jZW9mIFNlbGVjdEVsZW1lbnRDb250YWluZXIpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKGNvbnRhaW5lciBpbnN0YW5jZW9mIElucHV0RWxlbWVudENvbnRhaW5lciAmJiBjb250YWluZXIudHlwZSAhPT0gUkFESU8gJiYgY29udGFpbmVyLnR5cGUgIT09IENIRUNLQk9YKSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9OwogICAgdmFyIGNhbGN1bGF0ZUJhY2tncm91bmRDdXJ2ZWRQYWludGluZ0FyZWEgPSBmdW5jdGlvbiAoY2xpcCwgY3VydmVzKSB7CiAgICAgICAgc3dpdGNoIChjbGlwKSB7CiAgICAgICAgICAgIGNhc2UgMCAvKiBCT1JERVJfQk9YICovOgogICAgICAgICAgICAgICAgcmV0dXJuIGNhbGN1bGF0ZUJvcmRlckJveFBhdGgoY3VydmVzKTsKICAgICAgICAgICAgY2FzZSAyIC8qIENPTlRFTlRfQk9YICovOgogICAgICAgICAgICAgICAgcmV0dXJuIGNhbGN1bGF0ZUNvbnRlbnRCb3hQYXRoKGN1cnZlcyk7CiAgICAgICAgICAgIGNhc2UgMSAvKiBQQURESU5HX0JPWCAqLzoKICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgIHJldHVybiBjYWxjdWxhdGVQYWRkaW5nQm94UGF0aChjdXJ2ZXMpOwogICAgICAgIH0KICAgIH07CiAgICB2YXIgY2FudmFzVGV4dEFsaWduID0gZnVuY3Rpb24gKHRleHRBbGlnbikgewogICAgICAgIHN3aXRjaCAodGV4dEFsaWduKSB7CiAgICAgICAgICAgIGNhc2UgMSAvKiBDRU5URVIgKi86CiAgICAgICAgICAgICAgICByZXR1cm4gJ2NlbnRlcic7CiAgICAgICAgICAgIGNhc2UgMiAvKiBSSUdIVCAqLzoKICAgICAgICAgICAgICAgIHJldHVybiAncmlnaHQnOwogICAgICAgICAgICBjYXNlIDAgLyogTEVGVCAqLzoKICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgIHJldHVybiAnbGVmdCc7CiAgICAgICAgfQogICAgfTsKICAgIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vbmlrbGFzdmgvaHRtbDJjYW52YXMvcHVsbC8yNjQ1CiAgICB2YXIgaU9TQnJva2VuRm9udHMgPSBbJy1hcHBsZS1zeXN0ZW0nLCAnc3lzdGVtLXVpJ107CiAgICB2YXIgZml4SU9TU3lzdGVtRm9udHMgPSBmdW5jdGlvbiAoZm9udEZhbWlsaWVzKSB7CiAgICAgICAgcmV0dXJuIC9pUGhvbmUgT1MgMTVfKDB8MSkvLnRlc3Qod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQpCiAgICAgICAgICAgID8gZm9udEZhbWlsaWVzLmZpbHRlcihmdW5jdGlvbiAoZm9udEZhbWlseSkgeyByZXR1cm4gaU9TQnJva2VuRm9udHMuaW5kZXhPZihmb250RmFtaWx5KSA9PT0gLTE7IH0pCiAgICAgICAgICAgIDogZm9udEZhbWlsaWVzOwogICAgfTsKCiAgICB2YXIgRm9yZWlnbk9iamVjdFJlbmRlcmVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewogICAgICAgIF9fZXh0ZW5kcyhGb3JlaWduT2JqZWN0UmVuZGVyZXIsIF9zdXBlcik7CiAgICAgICAgZnVuY3Rpb24gRm9yZWlnbk9iamVjdFJlbmRlcmVyKGNvbnRleHQsIG9wdGlvbnMpIHsKICAgICAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgY29udGV4dCwgb3B0aW9ucykgfHwgdGhpczsKICAgICAgICAgICAgX3RoaXMuY2FudmFzID0gb3B0aW9ucy5jYW52YXMgPyBvcHRpb25zLmNhbnZhcyA6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpOwogICAgICAgICAgICBfdGhpcy5jdHggPSBfdGhpcy5jYW52YXMuZ2V0Q29udGV4dCgnMmQnKTsKICAgICAgICAgICAgX3RoaXMub3B0aW9ucyA9IG9wdGlvbnM7CiAgICAgICAgICAgIF90aGlzLmNhbnZhcy53aWR0aCA9IE1hdGguZmxvb3Iob3B0aW9ucy53aWR0aCAqIG9wdGlvbnMuc2NhbGUpOwogICAgICAgICAgICBfdGhpcy5jYW52YXMuaGVpZ2h0ID0gTWF0aC5mbG9vcihvcHRpb25zLmhlaWdodCAqIG9wdGlvbnMuc2NhbGUpOwogICAgICAgICAgICBfdGhpcy5jYW52YXMuc3R5bGUud2lkdGggPSBvcHRpb25zLndpZHRoICsgInB4IjsKICAgICAgICAgICAgX3RoaXMuY2FudmFzLnN0eWxlLmhlaWdodCA9IG9wdGlvbnMuaGVpZ2h0ICsgInB4IjsKICAgICAgICAgICAgX3RoaXMuY3R4LnNjYWxlKF90aGlzLm9wdGlvbnMuc2NhbGUsIF90aGlzLm9wdGlvbnMuc2NhbGUpOwogICAgICAgICAgICBfdGhpcy5jdHgudHJhbnNsYXRlKC1vcHRpb25zLngsIC1vcHRpb25zLnkpOwogICAgICAgICAgICBfdGhpcy5jb250ZXh0LmxvZ2dlci5kZWJ1ZygiRVhQRVJJTUVOVEFMIEZvcmVpZ25PYmplY3QgcmVuZGVyZXIgaW5pdGlhbGl6ZWQgKCIgKyBvcHRpb25zLndpZHRoICsgIngiICsgb3B0aW9ucy5oZWlnaHQgKyAiIGF0ICIgKyBvcHRpb25zLnggKyAiLCIgKyBvcHRpb25zLnkgKyAiKSB3aXRoIHNjYWxlICIgKyBvcHRpb25zLnNjYWxlKTsKICAgICAgICAgICAgcmV0dXJuIF90aGlzOwogICAgICAgIH0KICAgICAgICBGb3JlaWduT2JqZWN0UmVuZGVyZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHZhciBzdmcsIGltZzsKICAgICAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHsKICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN2ZyA9IGNyZWF0ZUZvcmVpZ25PYmplY3RTVkcodGhpcy5vcHRpb25zLndpZHRoICogdGhpcy5vcHRpb25zLnNjYWxlLCB0aGlzLm9wdGlvbnMuaGVpZ2h0ICogdGhpcy5vcHRpb25zLnNjYWxlLCB0aGlzLm9wdGlvbnMuc2NhbGUsIHRoaXMub3B0aW9ucy5zY2FsZSwgZWxlbWVudCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBsb2FkU2VyaWFsaXplZFNWRyhzdmcpXTsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nID0gX2Euc2VudCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5iYWNrZ3JvdW5kQ29sb3IpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSBhc1N0cmluZyh0aGlzLm9wdGlvbnMuYmFja2dyb3VuZENvbG9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN0eC5maWxsUmVjdCgwLCAwLCB0aGlzLm9wdGlvbnMud2lkdGggKiB0aGlzLm9wdGlvbnMuc2NhbGUsIHRoaXMub3B0aW9ucy5oZWlnaHQgKiB0aGlzLm9wdGlvbnMuc2NhbGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdHguZHJhd0ltYWdlKGltZywgLXRoaXMub3B0aW9ucy54ICogdGhpcy5vcHRpb25zLnNjYWxlLCAtdGhpcy5vcHRpb25zLnkgKiB0aGlzLm9wdGlvbnMuc2NhbGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuY2FudmFzXTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKICAgICAgICByZXR1cm4gRm9yZWlnbk9iamVjdFJlbmRlcmVyOwogICAgfShSZW5kZXJlcikpOwogICAgdmFyIGxvYWRTZXJpYWxpemVkU1ZHID0gZnVuY3Rpb24gKHN2ZykgewogICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgICAgIHZhciBpbWcgPSBuZXcgSW1hZ2UoKTsKICAgICAgICAgICAgaW1nLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHJlc29sdmUoaW1nKTsKICAgICAgICAgICAgfTsKICAgICAgICAgICAgaW1nLm9uZXJyb3IgPSByZWplY3Q7CiAgICAgICAgICAgIGltZy5zcmMgPSAiZGF0YTppbWFnZS9zdmcreG1sO2NoYXJzZXQ9dXRmLTgsIiArIGVuY29kZVVSSUNvbXBvbmVudChuZXcgWE1MU2VyaWFsaXplcigpLnNlcmlhbGl6ZVRvU3RyaW5nKHN2ZykpOwogICAgICAgIH0pOwogICAgfTsKCiAgICB2YXIgTG9nZ2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewogICAgICAgIGZ1bmN0aW9uIExvZ2dlcihfYSkgewogICAgICAgICAgICB2YXIgaWQgPSBfYS5pZCwgZW5hYmxlZCA9IF9hLmVuYWJsZWQ7CiAgICAgICAgICAgIHRoaXMuaWQgPSBpZDsKICAgICAgICAgICAgdGhpcy5lbmFibGVkID0gZW5hYmxlZDsKICAgICAgICAgICAgdGhpcy5zdGFydCA9IERhdGUubm93KCk7CiAgICAgICAgfQogICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55CiAgICAgICAgTG9nZ2VyLnByb3RvdHlwZS5kZWJ1ZyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIGFyZ3MgPSBbXTsKICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKICAgICAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAodGhpcy5lbmFibGVkKSB7CiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZQogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5jb25zb2xlICYmIHR5cGVvZiBjb25zb2xlLmRlYnVnID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGUKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmRlYnVnLmFwcGx5KGNvbnNvbGUsIF9fc3ByZWFkQXJyYXkoW3RoaXMuaWQsIHRoaXMuZ2V0VGltZSgpICsgIm1zIl0sIGFyZ3MpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIHRoaXMuaW5mby5hcHBseSh0aGlzLCBhcmdzKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgTG9nZ2VyLnByb3RvdHlwZS5nZXRUaW1lID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXR1cm4gRGF0ZS5ub3coKSAtIHRoaXMuc3RhcnQ7CiAgICAgICAgfTsKICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueQogICAgICAgIExvZ2dlci5wcm90b3R5cGUuaW5mbyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIGFyZ3MgPSBbXTsKICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKICAgICAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAodGhpcy5lbmFibGVkKSB7CiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZQogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5jb25zb2xlICYmIHR5cGVvZiBjb25zb2xlLmluZm8gPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuaW5mby5hcHBseShjb25zb2xlLCBfX3NwcmVhZEFycmF5KFt0aGlzLmlkLCB0aGlzLmdldFRpbWUoKSArICJtcyJdLCBhcmdzKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55CiAgICAgICAgTG9nZ2VyLnByb3RvdHlwZS53YXJuID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgYXJncyA9IFtdOwogICAgICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewogICAgICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICh0aGlzLmVuYWJsZWQpIHsKICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LmNvbnNvbGUgJiYgdHlwZW9mIGNvbnNvbGUud2FybiA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuLmFwcGx5KGNvbnNvbGUsIF9fc3ByZWFkQXJyYXkoW3RoaXMuaWQsIHRoaXMuZ2V0VGltZSgpICsgIm1zIl0sIGFyZ3MpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIHRoaXMuaW5mby5hcHBseSh0aGlzLCBhcmdzKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnkKICAgICAgICBMb2dnZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgYXJncyA9IFtdOwogICAgICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewogICAgICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICh0aGlzLmVuYWJsZWQpIHsKICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LmNvbnNvbGUgJiYgdHlwZW9mIGNvbnNvbGUuZXJyb3IgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IuYXBwbHkoY29uc29sZSwgX19zcHJlYWRBcnJheShbdGhpcy5pZCwgdGhpcy5nZXRUaW1lKCkgKyAibXMiXSwgYXJncykpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmZvLmFwcGx5KHRoaXMsIGFyZ3MpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgICBMb2dnZXIuaW5zdGFuY2VzID0ge307CiAgICAgICAgcmV0dXJuIExvZ2dlcjsKICAgIH0oKSk7CgogICAgdmFyIENvbnRleHQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CiAgICAgICAgZnVuY3Rpb24gQ29udGV4dChvcHRpb25zLCB3aW5kb3dCb3VuZHMpIHsKICAgICAgICAgICAgdmFyIF9hOwogICAgICAgICAgICB0aGlzLndpbmRvd0JvdW5kcyA9IHdpbmRvd0JvdW5kczsKICAgICAgICAgICAgdGhpcy5pbnN0YW5jZU5hbWUgPSAiIyIgKyBDb250ZXh0Lmluc3RhbmNlQ291bnQrKzsKICAgICAgICAgICAgdGhpcy5sb2dnZXIgPSBuZXcgTG9nZ2VyKHsgaWQ6IHRoaXMuaW5zdGFuY2VOYW1lLCBlbmFibGVkOiBvcHRpb25zLmxvZ2dpbmcgfSk7CiAgICAgICAgICAgIHRoaXMuY2FjaGUgPSAoX2EgPSBvcHRpb25zLmNhY2hlKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBuZXcgQ2FjaGUodGhpcywgb3B0aW9ucyk7CiAgICAgICAgfQogICAgICAgIENvbnRleHQuaW5zdGFuY2VDb3VudCA9IDE7CiAgICAgICAgcmV0dXJuIENvbnRleHQ7CiAgICB9KCkpOwoKICAgIHZhciBodG1sMmNhbnZhcyA9IGZ1bmN0aW9uIChlbGVtZW50LCBvcHRpb25zKSB7CiAgICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgeyBvcHRpb25zID0ge307IH0KICAgICAgICByZXR1cm4gcmVuZGVyRWxlbWVudChlbGVtZW50LCBvcHRpb25zKTsKICAgIH07CiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICBDYWNoZVN0b3JhZ2Uuc2V0Q29udGV4dCh3aW5kb3cpOwogICAgfQogICAgdmFyIHJlbmRlckVsZW1lbnQgPSBmdW5jdGlvbiAoZWxlbWVudCwgb3B0cykgeyByZXR1cm4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgb3duZXJEb2N1bWVudCwgZGVmYXVsdFZpZXcsIHJlc291cmNlT3B0aW9ucywgY29udGV4dE9wdGlvbnMsIHdpbmRvd09wdGlvbnMsIHdpbmRvd0JvdW5kcywgY29udGV4dCwgZm9yZWlnbk9iamVjdFJlbmRlcmluZywgY2xvbmVPcHRpb25zLCBkb2N1bWVudENsb25lciwgY2xvbmVkRWxlbWVudCwgY29udGFpbmVyLCBfYSwgd2lkdGgsIGhlaWdodCwgbGVmdCwgdG9wLCBiYWNrZ3JvdW5kQ29sb3IsIHJlbmRlck9wdGlvbnMsIGNhbnZhcywgcmVuZGVyZXIsIHJvb3QsIHJlbmRlcmVyOwogICAgICAgIHZhciBfYiwgX2MsIF9kLCBfZSwgX2YsIF9nLCBfaCwgX2osIF9rLCBfbCwgX20sIF9vLCBfcCwgX3EsIF9yLCBfcywgX3Q7CiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfdSkgewogICAgICAgICAgICBzd2l0Y2ggKF91LmxhYmVsKSB7CiAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgaWYgKCFlbGVtZW50IHx8IHR5cGVvZiBlbGVtZW50ICE9PSAnb2JqZWN0JykgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgUHJvbWlzZS5yZWplY3QoJ0ludmFsaWQgZWxlbWVudCBwcm92aWRlZCBhcyBmaXJzdCBhcmd1bWVudCcpXTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgb3duZXJEb2N1bWVudCA9IGVsZW1lbnQub3duZXJEb2N1bWVudDsKICAgICAgICAgICAgICAgICAgICBpZiAoIW93bmVyRG9jdW1lbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJFbGVtZW50IGlzIG5vdCBhdHRhY2hlZCB0byBhIERvY3VtZW50Iik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWaWV3ID0gb3duZXJEb2N1bWVudC5kZWZhdWx0VmlldzsKICAgICAgICAgICAgICAgICAgICBpZiAoIWRlZmF1bHRWaWV3KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiRG9jdW1lbnQgaXMgbm90IGF0dGFjaGVkIHRvIGEgV2luZG93Iik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJlc291cmNlT3B0aW9ucyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgYWxsb3dUYWludDogKF9iID0gb3B0cy5hbGxvd1RhaW50KSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2VUaW1lb3V0OiAoX2MgPSBvcHRzLmltYWdlVGltZW91dCkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogMTUwMDAsCiAgICAgICAgICAgICAgICAgICAgICAgIHByb3h5OiBvcHRzLnByb3h5LAogICAgICAgICAgICAgICAgICAgICAgICB1c2VDT1JTOiAoX2QgPSBvcHRzLnVzZUNPUlMpICE9PSBudWxsICYmIF9kICE9PSB2b2lkIDAgPyBfZCA6IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBjb250ZXh0T3B0aW9ucyA9IF9fYXNzaWduKHsgbG9nZ2luZzogKF9lID0gb3B0cy5sb2dnaW5nKSAhPT0gbnVsbCAmJiBfZSAhPT0gdm9pZCAwID8gX2UgOiB0cnVlLCBjYWNoZTogb3B0cy5jYWNoZSB9LCByZXNvdXJjZU9wdGlvbnMpOwogICAgICAgICAgICAgICAgICAgIHdpbmRvd09wdGlvbnMgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvd1dpZHRoOiAoX2YgPSBvcHRzLndpbmRvd1dpZHRoKSAhPT0gbnVsbCAmJiBfZiAhPT0gdm9pZCAwID8gX2YgOiBkZWZhdWx0Vmlldy5pbm5lcldpZHRoLAogICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3dIZWlnaHQ6IChfZyA9IG9wdHMud2luZG93SGVpZ2h0KSAhPT0gbnVsbCAmJiBfZyAhPT0gdm9pZCAwID8gX2cgOiBkZWZhdWx0Vmlldy5pbm5lckhlaWdodCwKICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsWDogKF9oID0gb3B0cy5zY3JvbGxYKSAhPT0gbnVsbCAmJiBfaCAhPT0gdm9pZCAwID8gX2ggOiBkZWZhdWx0Vmlldy5wYWdlWE9mZnNldCwKICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsWTogKF9qID0gb3B0cy5zY3JvbGxZKSAhPT0gbnVsbCAmJiBfaiAhPT0gdm9pZCAwID8gX2ogOiBkZWZhdWx0Vmlldy5wYWdlWU9mZnNldAogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgd2luZG93Qm91bmRzID0gbmV3IEJvdW5kcyh3aW5kb3dPcHRpb25zLnNjcm9sbFgsIHdpbmRvd09wdGlvbnMuc2Nyb2xsWSwgd2luZG93T3B0aW9ucy53aW5kb3dXaWR0aCwgd2luZG93T3B0aW9ucy53aW5kb3dIZWlnaHQpOwogICAgICAgICAgICAgICAgICAgIGNvbnRleHQgPSBuZXcgQ29udGV4dChjb250ZXh0T3B0aW9ucywgd2luZG93Qm91bmRzKTsKICAgICAgICAgICAgICAgICAgICBmb3JlaWduT2JqZWN0UmVuZGVyaW5nID0gKF9rID0gb3B0cy5mb3JlaWduT2JqZWN0UmVuZGVyaW5nKSAhPT0gbnVsbCAmJiBfayAhPT0gdm9pZCAwID8gX2sgOiBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBjbG9uZU9wdGlvbnMgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGFsbG93VGFpbnQ6IChfbCA9IG9wdHMuYWxsb3dUYWludCkgIT09IG51bGwgJiYgX2wgIT09IHZvaWQgMCA/IF9sIDogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgIG9uY2xvbmU6IG9wdHMub25jbG9uZSwKICAgICAgICAgICAgICAgICAgICAgICAgaWdub3JlRWxlbWVudHM6IG9wdHMuaWdub3JlRWxlbWVudHMsCiAgICAgICAgICAgICAgICAgICAgICAgIGlubGluZUltYWdlczogZm9yZWlnbk9iamVjdFJlbmRlcmluZywKICAgICAgICAgICAgICAgICAgICAgICAgY29weVN0eWxlczogZm9yZWlnbk9iamVjdFJlbmRlcmluZwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5sb2dnZXIuZGVidWcoIlN0YXJ0aW5nIGRvY3VtZW50IGNsb25lIHdpdGggc2l6ZSAiICsgd2luZG93Qm91bmRzLndpZHRoICsgIngiICsgd2luZG93Qm91bmRzLmhlaWdodCArICIgc2Nyb2xsZWQgdG8gIiArIC13aW5kb3dCb3VuZHMubGVmdCArICIsIiArIC13aW5kb3dCb3VuZHMudG9wKTsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudENsb25lciA9IG5ldyBEb2N1bWVudENsb25lcihjb250ZXh0LCBlbGVtZW50LCBjbG9uZU9wdGlvbnMpOwogICAgICAgICAgICAgICAgICAgIGNsb25lZEVsZW1lbnQgPSBkb2N1bWVudENsb25lci5jbG9uZWRSZWZlcmVuY2VFbGVtZW50OwogICAgICAgICAgICAgICAgICAgIGlmICghY2xvbmVkRWxlbWVudCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgUHJvbWlzZS5yZWplY3QoIlVuYWJsZSB0byBmaW5kIGVsZW1lbnQgaW4gY2xvbmVkIGlmcmFtZSIpXTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgZG9jdW1lbnRDbG9uZXIudG9JRnJhbWUob3duZXJEb2N1bWVudCwgd2luZG93Qm91bmRzKV07CiAgICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyID0gX3Uuc2VudCgpOwogICAgICAgICAgICAgICAgICAgIF9hID0gaXNCb2R5RWxlbWVudChjbG9uZWRFbGVtZW50KSB8fCBpc0hUTUxFbGVtZW50KGNsb25lZEVsZW1lbnQpCiAgICAgICAgICAgICAgICAgICAgICAgID8gcGFyc2VEb2N1bWVudFNpemUoY2xvbmVkRWxlbWVudC5vd25lckRvY3VtZW50KQogICAgICAgICAgICAgICAgICAgICAgICA6IHBhcnNlQm91bmRzKGNvbnRleHQsIGNsb25lZEVsZW1lbnQpLCB3aWR0aCA9IF9hLndpZHRoLCBoZWlnaHQgPSBfYS5oZWlnaHQsIGxlZnQgPSBfYS5sZWZ0LCB0b3AgPSBfYS50b3A7CiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yID0gcGFyc2VCYWNrZ3JvdW5kQ29sb3IoY29udGV4dCwgY2xvbmVkRWxlbWVudCwgb3B0cy5iYWNrZ3JvdW5kQ29sb3IpOwogICAgICAgICAgICAgICAgICAgIHJlbmRlck9wdGlvbnMgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhbnZhczogb3B0cy5jYW52YXMsCiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogYmFja2dyb3VuZENvbG9yLAogICAgICAgICAgICAgICAgICAgICAgICBzY2FsZTogKF9vID0gKF9tID0gb3B0cy5zY2FsZSkgIT09IG51bGwgJiYgX20gIT09IHZvaWQgMCA/IF9tIDogZGVmYXVsdFZpZXcuZGV2aWNlUGl4ZWxSYXRpbykgIT09IG51bGwgJiYgX28gIT09IHZvaWQgMCA/IF9vIDogMSwKICAgICAgICAgICAgICAgICAgICAgICAgeDogKChfcCA9IG9wdHMueCkgIT09IG51bGwgJiYgX3AgIT09IHZvaWQgMCA/IF9wIDogMCkgKyBsZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICB5OiAoKF9xID0gb3B0cy55KSAhPT0gbnVsbCAmJiBfcSAhPT0gdm9pZCAwID8gX3EgOiAwKSArIHRvcCwKICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IChfciA9IG9wdHMud2lkdGgpICE9PSBudWxsICYmIF9yICE9PSB2b2lkIDAgPyBfciA6IE1hdGguY2VpbCh3aWR0aCksCiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogKF9zID0gb3B0cy5oZWlnaHQpICE9PSBudWxsICYmIF9zICE9PSB2b2lkIDAgPyBfcyA6IE1hdGguY2VpbChoZWlnaHQpCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBpZiAoIWZvcmVpZ25PYmplY3RSZW5kZXJpbmcpIHJldHVybiBbMyAvKmJyZWFrKi8sIDNdOwogICAgICAgICAgICAgICAgICAgIGNvbnRleHQubG9nZ2VyLmRlYnVnKCJEb2N1bWVudCBjbG9uZWQsIHVzaW5nIGZvcmVpZ24gb2JqZWN0IHJlbmRlcmluZyIpOwogICAgICAgICAgICAgICAgICAgIHJlbmRlcmVyID0gbmV3IEZvcmVpZ25PYmplY3RSZW5kZXJlcihjb250ZXh0LCByZW5kZXJPcHRpb25zKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCByZW5kZXJlci5yZW5kZXIoY2xvbmVkRWxlbWVudCldOwogICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgIGNhbnZhcyA9IF91LnNlbnQoKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA1XTsKICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmxvZ2dlci5kZWJ1ZygiRG9jdW1lbnQgY2xvbmVkLCBlbGVtZW50IGxvY2F0ZWQgYXQgIiArIGxlZnQgKyAiLCIgKyB0b3AgKyAiIHdpdGggc2l6ZSAiICsgd2lkdGggKyAieCIgKyBoZWlnaHQgKyAiIHVzaW5nIGNvbXB1dGVkIHJlbmRlcmluZyIpOwogICAgICAgICAgICAgICAgICAgIGNvbnRleHQubG9nZ2VyLmRlYnVnKCJTdGFydGluZyBET00gcGFyc2luZyIpOwogICAgICAgICAgICAgICAgICAgIHJvb3QgPSBwYXJzZVRyZWUoY29udGV4dCwgY2xvbmVkRWxlbWVudCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKGJhY2tncm91bmRDb2xvciA9PT0gcm9vdC5zdHlsZXMuYmFja2dyb3VuZENvbG9yKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJvb3Quc3R5bGVzLmJhY2tncm91bmRDb2xvciA9IENPTE9SUy5UUkFOU1BBUkVOVDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5sb2dnZXIuZGVidWcoIlN0YXJ0aW5nIHJlbmRlcmVyIGZvciBlbGVtZW50IGF0ICIgKyByZW5kZXJPcHRpb25zLnggKyAiLCIgKyByZW5kZXJPcHRpb25zLnkgKyAiIHdpdGggc2l6ZSAiICsgcmVuZGVyT3B0aW9ucy53aWR0aCArICJ4IiArIHJlbmRlck9wdGlvbnMuaGVpZ2h0KTsKICAgICAgICAgICAgICAgICAgICByZW5kZXJlciA9IG5ldyBDYW52YXNSZW5kZXJlcihjb250ZXh0LCByZW5kZXJPcHRpb25zKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCByZW5kZXJlci5yZW5kZXIocm9vdCldOwogICAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgICAgIGNhbnZhcyA9IF91LnNlbnQoKTsKICAgICAgICAgICAgICAgICAgICBfdS5sYWJlbCA9IDU7CiAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICAgICAgaWYgKChfdCA9IG9wdHMucmVtb3ZlQ29udGFpbmVyKSAhPT0gbnVsbCAmJiBfdCAhPT0gdm9pZCAwID8gX3QgOiB0cnVlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghRG9jdW1lbnRDbG9uZXIuZGVzdHJveShjb250YWluZXIpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmxvZ2dlci5lcnJvcigiQ2Fubm90IGRldGFjaCBjbG9uZWQgaWZyYW1lIGFzIGl0IGlzIG5vdCBpbiB0aGUgRE9NIGFueW1vcmUiKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmxvZ2dlci5kZWJ1ZygiRmluaXNoZWQgcmVuZGVyaW5nIik7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGNhbnZhc107CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0pOyB9OwogICAgdmFyIHBhcnNlQmFja2dyb3VuZENvbG9yID0gZnVuY3Rpb24gKGNvbnRleHQsIGVsZW1lbnQsIGJhY2tncm91bmRDb2xvck92ZXJyaWRlKSB7CiAgICAgICAgdmFyIG93bmVyRG9jdW1lbnQgPSBlbGVtZW50Lm93bmVyRG9jdW1lbnQ7CiAgICAgICAgLy8gaHR0cDovL3d3dy53My5vcmcvVFIvY3NzMy1iYWNrZ3JvdW5kLyNzcGVjaWFsLWJhY2tncm91bmRzCiAgICAgICAgdmFyIGRvY3VtZW50QmFja2dyb3VuZENvbG9yID0gb3duZXJEb2N1bWVudC5kb2N1bWVudEVsZW1lbnQKICAgICAgICAgICAgPyBwYXJzZUNvbG9yKGNvbnRleHQsIGdldENvbXB1dGVkU3R5bGUob3duZXJEb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpLmJhY2tncm91bmRDb2xvcikKICAgICAgICAgICAgOiBDT0xPUlMuVFJBTlNQQVJFTlQ7CiAgICAgICAgdmFyIGJvZHlCYWNrZ3JvdW5kQ29sb3IgPSBvd25lckRvY3VtZW50LmJvZHkKICAgICAgICAgICAgPyBwYXJzZUNvbG9yKGNvbnRleHQsIGdldENvbXB1dGVkU3R5bGUob3duZXJEb2N1bWVudC5ib2R5KS5iYWNrZ3JvdW5kQ29sb3IpCiAgICAgICAgICAgIDogQ09MT1JTLlRSQU5TUEFSRU5UOwogICAgICAgIHZhciBkZWZhdWx0QmFja2dyb3VuZENvbG9yID0gdHlwZW9mIGJhY2tncm91bmRDb2xvck92ZXJyaWRlID09PSAnc3RyaW5nJwogICAgICAgICAgICA/IHBhcnNlQ29sb3IoY29udGV4dCwgYmFja2dyb3VuZENvbG9yT3ZlcnJpZGUpCiAgICAgICAgICAgIDogYmFja2dyb3VuZENvbG9yT3ZlcnJpZGUgPT09IG51bGwKICAgICAgICAgICAgICAgID8gQ09MT1JTLlRSQU5TUEFSRU5UCiAgICAgICAgICAgICAgICA6IDB4ZmZmZmZmZmY7CiAgICAgICAgcmV0dXJuIGVsZW1lbnQgPT09IG93bmVyRG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50CiAgICAgICAgICAgID8gaXNUcmFuc3BhcmVudChkb2N1bWVudEJhY2tncm91bmRDb2xvcikKICAgICAgICAgICAgICAgID8gaXNUcmFuc3BhcmVudChib2R5QmFja2dyb3VuZENvbG9yKQogICAgICAgICAgICAgICAgICAgID8gZGVmYXVsdEJhY2tncm91bmRDb2xvcgogICAgICAgICAgICAgICAgICAgIDogYm9keUJhY2tncm91bmRDb2xvcgogICAgICAgICAgICAgICAgOiBkb2N1bWVudEJhY2tncm91bmRDb2xvcgogICAgICAgICAgICA6IGRlZmF1bHRCYWNrZ3JvdW5kQ29sb3I7CiAgICB9OwoKICAgIHJldHVybiBodG1sMmNhbnZhczsKCn0pKSk7Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPWh0bWwyY2FudmFzLmpzLm1hcAo=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPBody>
        <TcpPackets>
          <PacketInfo time="519314312" offset="0" length="1159" />
          <PacketInfo time="519314312" offset="1159" length="76416" />
        </TcpPackets>
      </HTTPResponse>
    </HTTPTask>
    <HTTPTask id="311" hostname="dev.bluealgo.com" path="https://dev.bluealgo.com/smartformup/ui/pdfview.css" url="https://dev.bluealgo.com/smartformup/ui/pdfview.css" ip="144.126.253.3" port="443" connectionId="18" origin="HTML" frame="1" startDateTime="2024-02-15T10:57:48.094+05:30" startTime="519314406" endTime="519314406">
      <HTTPRequest method="GET">
        <HTTPHeaders>
          <HTTPHeaderEntity name="sec-ch-ua" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ik5vdCBBKEJyYW5kIjt2PSI5OSIsICJHb29nbGUgQ2hyb21lIjt2PSIxMjEiLCAiQ2hyb21pdW0iO3Y9IjEyMSI=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="sec-ch-ua-mobile" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>PzA=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="User-Agent" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEyMS4wLjAuMCBTYWZhcmkvNTM3LjM2</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="sec-ch-ua-platform" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>IldpbmRvd3Mi</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>dGV4dC9jc3MsKi8qO3E9MC4x</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Sec-Fetch-Site" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>c2FtZS1vcmlnaW4=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Sec-Fetch-Mode" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bm8tY29ycw==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Sec-Fetch-Dest" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>c3R5bGU=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Referer" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cHM6Ly9kZXYuYmx1ZWFsZ28uY29tL3NtYXJ0Zm9ybXVwL2xvYWRpbmRleD9vcHBvcnR1bml0eUlkPTAwNjBvMDAwMDFlU0lKMEFBTyZjdXN0b21lcmlkPWN1c3QxMDA1JmFjY2Vzc3Rva2VuPXVYQ3haUktVLU1mMndpVGczX0E4ZFB1OTU3dGFMWHhQ</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Encoding" index="9">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Language" index="10">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZW4tVVMsZW47cT0wLjk=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Cookie" index="11">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SlNFU1NJT05JRD0zRDVFOEZFODBBNEYzNEY5QkM0OEI2RTc0ODhCOEY5MQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Host" index="12">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZGV2LmJsdWVhbGdvLmNvbQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0VUIGh0dHBzOi8vZGV2LmJsdWVhbGdvLmNvbS9zbWFydGZvcm11cC91aS9wZGZ2aWV3LmNzcyBIVFRQLzEuMQ0Kc2VjLWNoLXVhOiAiTm90IEEoQnJhbmQiO3Y9Ijk5IiwgIkdvb2dsZSBDaHJvbWUiO3Y9IjEyMSIsICJDaHJvbWl1bSI7dj0iMTIxIg0Kc2VjLWNoLXVhLW1vYmlsZTogPzANClVzZXItQWdlbnQ6IE1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS8xMjEuMC4wLjAgU2FmYXJpLzUzNy4zNg0Kc2VjLWNoLXVhLXBsYXRmb3JtOiAiV2luZG93cyINCkFjY2VwdDogdGV4dC9jc3MsKi8qO3E9MC4xDQpTZWMtRmV0Y2gtU2l0ZTogc2FtZS1vcmlnaW4NClNlYy1GZXRjaC1Nb2RlOiBuby1jb3JzDQpTZWMtRmV0Y2gtRGVzdDogc3R5bGUNClJlZmVyZXI6IGh0dHBzOi8vZGV2LmJsdWVhbGdvLmNvbS9zbWFydGZvcm11cC9sb2FkaW5kZXg/b3Bwb3J0dW5pdHlJZD0wMDYwbzAwMDAxZVNJSjBBQU8mY3VzdG9tZXJpZD1jdXN0MTAwNSZhY2Nlc3N0b2tlbj11WEN4WlJLVS1NZjJ3aVRnM19BOGRQdTk1N3RhTFh4UA0KQWNjZXB0LUVuY29kaW5nOiBnemlwLCBkZWZsYXRlDQpBY2NlcHQtTGFuZ3VhZ2U6IGVuLVVTLGVuO3E9MC45DQpDb29raWU6IEpTRVNTSU9OSUQ9M0Q1RThGRTgwQTRGMzRGOUJDNDhCNkU3NDg4QjhGOTENCkhvc3Q6IGRldi5ibHVlYWxnby5jb20NCg0K</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
          <HTTPCookies>
            <HTTPHeaderEntity name="JSESSIONID" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>M0Q1RThGRTgwQTRGMzRGOUJDNDhCNkU3NDg4QjhGOTE=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
          </HTTPCookies>
        </HTTPHeaders>
      </HTTPRequest>
      <HTTPResponse>
        <contentLenght>31565</contentLenght>
        <HTTPHeaders>
          <HTTPHeaderEntity name="Date" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VGh1LCAxNSBGZWIgMjAyNCAwNToxODo1MCBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Type" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>dGV4dC9jc3M=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Length" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MzE1NjU=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Connection" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Access-Control-Allow-Origin" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Kg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Ranges" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ynl0ZXM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="ETag" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Vy8iMzE1NjUtMTcwMzU4OTA1MjAwMCI=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Last-Modified" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VHVlLCAyNiBEZWMgMjAyMyAxMToxMDo1MiBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Strict-Transport-Security" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bWF4LWFnZT0xNTcyNDgwMDsgaW5jbHVkZVN1YkRvbWFpbnM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SFRUUC8xLjEgMjAwIA0KRGF0ZTogVGh1LCAxNSBGZWIgMjAyNCAwNToxODo1MCBHTVQNCkNvbnRlbnQtVHlwZTogdGV4dC9jc3MNCkNvbnRlbnQtTGVuZ3RoOiAzMTU2NQ0KQ29ubmVjdGlvbjoga2VlcC1hbGl2ZQ0KQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luOiAqDQpBY2NlcHQtUmFuZ2VzOiBieXRlcw0KRVRhZzogVy8iMzE1NjUtMTcwMzU4OTA1MjAwMCINCkxhc3QtTW9kaWZpZWQ6IFR1ZSwgMjYgRGVjIDIwMjMgMTE6MTA6NTIgR01UDQpTdHJpY3QtVHJhbnNwb3J0LVNlY3VyaXR5OiBtYXgtYWdlPTE1NzI0ODAwOyBpbmNsdWRlU3ViRG9tYWlucw0KDQo=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPBody>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>YSxhYmJyLGFjcm9ueW0sYWRkcmVzcyxhcHBsZXQsYmlnLGJsb2NrcXVvdGUsYm9keSxjYXB0aW9uLGNpdGUsY29kZSxkZCxkZWwsZGZuLGRpdixkbCxkdCxlbSxmaWVsZHNldCxmb250LGZvcm0saDEsaDIsaDMsaDQsaDUsaDYsaHRtbCxpZnJhbWUsaW1nLGlucyxrYmQsbGFiZWwsbGVnZW5kLGxpLG9iamVjdCxvbCxwLHByZSxxLHMsc2FtcCxzbWFsbCxzcGFuLHN0cmlrZSxzdHJvbmcsc3ViLHN1cCx0YWJsZSx0Ym9keSx0ZCx0Zm9vdCx0aCx0aGVhZCx0cix0dCx1bCx2YXJ7Ym94LXNpemluZzpib3JkZXItYm94O2ZvbnQtZmFtaWx5OlBvcHBpbnMsc2Fucy1zZXJpZjt2ZXJ0aWNhbC1hbGlnbjpiYXNlbGluZX0KLmNhbnZhc19kaXZfcGRme2Rpc3BsYXk6YmxvY2s7cG9zaXRpb246YWJzb2x1dGU7bGVmdDotMTAwMHB4O3RvcDowfQouaW1nLWZsdWlke21heC13aWR0aDoxMDAlO2hlaWdodDphdXRvfQouY2FudmFzX2Rpdl9wZGZfaW5uZXJ7bWF4LXdpZHRoOjg0MnB4O3dpZHRoOjEwMCU7bWFyZ2luOjAgYXV0b30KLmNvbW1vbl9uYW1lX3dyYXBwZXIgaDUsLmNvbW1vbl9uYW1lX3dyYXBwZXIgcHttYXJnaW46MDtwYWRkaW5nOjB9Ci5hYm91dF95b3VfZGV0YWlsc19saXN0e3BhZGRpbmctbGVmdDowfQoudGFibGVfdW5pdGRldGFpbHMgaDQsLnRhYmxlX3VuaXRkZXRhaWxzIHB7bWFyZ2luOjA7cGFkZGluZzowfQoubWFpbi13cmFwcGVye3dpZHRoOjEwMCU7aGVpZ2h0OjExOTFweDtwYWRkaW5nOjIwcHh9Ci5pbm5lcl93cmFwcGVye3BhZGRpbmc6MTVweDtib3JkZXI6M3B4IHNvbGlkICNmY2NjMGM7cG9zaXRpb246cmVsYXRpdmV9Cgoucm93e2Rpc3BsYXk6ZmxleDttYXJnaW46MCAtMTVweDtmbGV4LXdyYXA6d3JhcH0KLmNvbHtwYWRkaW5nOjE1cHh9Ci5qdXN0aWZ5LWNvbnRlbnQtYmV0d2VlbntqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2Vlbn0KLmNvbW1vbl9uYW1lX3dyYXBwZXJ7d2lkdGg6MTAwJTt0ZXh0LWFsaWduOmVuZH0KLmNvbW1vbl9uYW1lX3dyYXBwZXIgaDV7Zm9udC13ZWlnaHQ6NjAwO2ZvbnQtc2l6ZToxOHB4O2xpbmUtaGVpZ2h0OjI0cHh9Ci5jb21tb25fbmFtZV93cmFwcGVyIHB7Zm9udC1zaXplOjE2cHg7Zm9udC13ZWlnaHQ6NDAwO2xpbmUtaGVpZ2h0OjI0cHg7Y29sb3I6I2E0YTRhNH0KLm1haW4tbG9nb3ttYXgtd2lkdGg6MzAwcHg7d2lkdGg6MTAwJTttYXJnaW46MCBhdXRvO3Bvc2l0aW9uOmFic29sdXRlO2xlZnQ6NTAlO3RvcDo1MCU7dHJhbnNmb3JtOnRyYW5zbGF0ZSgtNTAlLC01MCUpO3RleHQtYWxpZ246Y2VudGVyfQoucGFnZV9udW1iZXJ7d2lkdGg6MTAwJTtkaXNwbGF5OmJsb2NrO3RleHQtYWxpZ246Y2VudGVyO3BhZGRpbmctdG9wOjEwcHh9Ci5jYXJkLWNvbnRlbnR7ZGlzcGxheTpmbGV4O2dhcDo1JX0KLmhlYWRlci1sb2dve21heC13aWR0aDoxNTBweDt3aWR0aDoxMDAlfQouaGVhZGVyLWxvZ28gaW1ne2Rpc3BsYXk6YmxvY2s7aGVpZ2h0OjQwcHg7bWFyZ2luLWxlZnQ6YXV0b30KLmhlYWRlci1sb2dvOmZpcnN0LWNoaWxkIGltZ3ttYXJnaW4tcmlnaHQ6YXV0b30KLnBhZ2VfYXBjZGV0YWlscyAubWFpbl9mb3JtZGV0YWlse2hlaWdodDpjYWxjKDEwMCUgLSAxNjBweCk7ZmxleC1ncm93OjE7d2lkdGg6MTAwJX0KLmRhdGVfd3JhcHBlcnthbGlnbi1zZWxmOmZsZXgtZW5kfQouYXBwbGljYW50LWNhcmQtd3JhcHBlcntwYWRkaW5nOjE1cHg7Ym9yZGVyOjFweCBzb2xpZCAjZGVkZWRlOGM7Ym9yZGVyLXJhZGl1czo1cHg7d2lkdGg6MTAwJTtoZWlnaHQ6Y2FsYygxMDAlIC8gMyk7ZGlzcGxheTpmbGV4O2p1c3RpZnktY29udGVudDpjZW50ZXI7YWxpZ24taXRlbXM6Y2VudGVyO3dpZHRoOjEwMCU7bWFyZ2luLWJvdHRvbTozMHB4fQouYXBwbGljYW50LWNhcmQtd3JhcHBlcjpsYXN0LWNoaWxke21hcmdpbi1ib3R0b206MH0KLkFwcGxpY2FudF90eXBlIHRke2NvbG9yOiMwMDgwMDBjMjtmb250LXdlaWdodDo3MDA7Zm9udC1zaXplOjIycHg7cG9zaXRpb246cmVsYXRpdmU7bGluZS1oZWlnaHQ6MTtwYWRkaW5nLWJvdHRvbToxNnB4IWltcG9ydGFudH0KLkFwcGxpY2FudF90eXBlIHRkOmJlZm9yZXtjb250ZW50OiIiO3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO2xlZnQ6MDt3aWR0aDoxMHB4O2hlaWdodDoyMnB4O2JhY2tncm91bmQ6I2Y5MH0KLmNhcmQtbGVmdHt3aWR0aDo2NSV9Ci5jYXJkLXJpZ2h0e3dpZHRoOjMwJX0KLmNhcmQtbGVmdCB0ciB0ZHtwYWRkaW5nLWJvdHRvbToxMnB4IWltcG9ydGFudDtwYWRkaW5nLWxlZnQ6MThweH0KLmNhcmQtbGVmdCB0ciAuY29sLWhlYWQsLmNhcmQtcmlnaHQgdHIgLmNvbC1oZWFke2ZvbnQtd2VpZ2h0OjcwMH0KLmNhcmQtbGVmdCB0ciB0ZDpub3QoLmNvbC1oZWFkKXtwYWRkaW5nLWxlZnQ6MH0KLm1haW5fZm9ybWRldGFpbCAuYXBwbGljYW50LWNhcmQtd3JhcHBlcjpsYXN0LWNoaWxke21hcmdpbi1ib3R0b206MH0KLkFwcGxpY2FudF90eXBlIC5jb2xfbWFpbl9oZWFke3BhZGRpbmctbGVmdDoxOHB4IWltcG9ydGFudH0KLmFwcGxpY2FudC1pbWcgaW1ne3dpZHRoOjEwMHB4O2hlaWdodDoxMjBweDtvYmplY3QtZml0OmNvdmVyO29iamVjdC1wb3NpdGlvbjpjZW50ZXI7bWFyZ2luOjAgMCAxMnB4fQouYXBwbGljYW50LWltZ3t0ZXh0LWFsaWduOmNlbnRlcn0KLmFwcGxpY2FudC1zaWd7d2lkdGg6MTAwJTtoZWlnaHQ6NzBweDtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXI7bWFyZ2luOjAgMCAxMnB4O3RleHQtYWxpZ246Y2VudGVyO2JvcmRlcjoxcHggZG90dGVkO3BhZGRpbmc6MjRweDtwb3NpdGlvbjpyZWxhdGl2ZX0KLmFwcGxpY2FudC1zaWc6YmVmb3Jle2NvbnRlbnQ6IiI7cG9zaXRpb246YWJzb2x1dGU7d2lkdGg6OHB4O2hlaWdodDoyMnB4O2JhY2tncm91bmQ6I2Y5MDt0b3A6MDtsZWZ0Oi0yMHB4fQouY2FyZC1yaWdodCB0YWJsZXt3aWR0aDoxMDAlfQouY2FyZC1yaWdodCB0YWJsZSB0ciB0ZHtwYWRkaW5nLWJvdHRvbToxNXB4fQouY2FyZC1yaWdodCB0YWJsZSB0cjpsYXN0LWNoaWxkIHRke3BhZGRpbmctYm90dG9tOjB9Ci5jYXJkLXJpZ2h0IHRhYmxlIC5mYS1jaXJjbGUtY2hlY2s6YmVmb3Jle2NvbG9yOiMwMDgwMDBjMn0KLmNhcmQtcmlnaHQgdGFibGUgLmZhLWNpcmNsZS14bWFyazpiZWZvcmV7Y29sb3I6I2Y1MzAzMGMyfQouY2FyZC1yaWdodCB0YWJsZSB0ciB0ZC5jb2wtaGVhZHt0ZXh0LWFsaWduOnJpZ2h0fQoucGFnZV9hcGNkZXRhaWxzIC5pbm5lcl93cmFwcGVye2Rpc3BsYXk6ZmxleDtmbGV4LXdyYXA6d3JhcDt3aWR0aDoxMDAlfQoucGFnZV9hcGNkZXRhaWxzIC5pbm5lcl93cmFwcGVyPi5yb3d7ZmxleC1ncm93OjE7d2lkdGg6MTAwJX0KLmRhdGVfd3JhcHBlciBzdHJvbmd7Zm9udC13ZWlnaHQ6NzAwfQoKLnBhZ2VfYm9va2luZ2Ftb3VudCAubWFpbl9ibG9jazpub3QoOmxhc3QtY2hpbGQpe21hcmdpbi1ib3R0b206NDJweH0KLnBhZ2VfYm9va2luZ2Ftb3VudCAubWFpbl9ibG9jayB0YWJsZXt3aWR0aDoxMDAlO3BhZGRpbmc6MjBweDtib3JkZXI6MXB4IHNvbGlkICNkZWRlZGU4Yztib3JkZXItcmFkaXVzOjVweH0KLnBhZ2VfYm9va2luZ2Ftb3VudCB0YWJsZSB0ZHtwYWRkaW5nLWJvdHRvbTo2cHh9Ci5wYWdlX2Jvb2tpbmdhbW91bnQgdGFibGUgdHIgdGQ6bnRoLWNoaWxkKG9kZCl7Zm9udC13ZWlnaHQ6NzAwfQoucGFnZV9ib29raW5nYW1vdW50IC5tYWluX2Zvcm1kZXRhaWx7bWFyZ2luOjIwcHggMCAwfQoucGFnZV9ib29raW5nYW1vdW50IC5pbm5lcl93cmFwcGVye2Rpc3BsYXk6ZmxleDtmbGV4LXdyYXA6d3JhcDtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2Vlbn0KLnBhZ2VfYm9va2luZ2Ftb3VudCAuaW5uZXJfd3JhcHBlcj4ucm93e3dpZHRoOjEwMCV9Ci5wYWdlX2Jvb2tpbmdhbW91bnQgLmlubmVyX3dyYXBwZXIgLm1haW5fZm9ybWRldGFpbHt3aWR0aDoxMDAlO2ZsZXgtZ3JvdzoxfQoKLnBhZ2VfdW5pdGJvb2tpbmdkZXRhaWxzIC5tYWluX2Jsb2NrOm5vdCg6bGFzdC1jaGlsZCl7bWFyZ2luLWJvdHRvbTo0MnB4fQoucGFnZV91bml0Ym9va2luZ2RldGFpbHMgLm1haW5fYmxvY2sgdGFibGV7d2lkdGg6MTAwJTtwYWRkaW5nOjIwcHg7Ym9yZGVyOjFweCBzb2xpZCAjZGVkZWRlOGM7Ym9yZGVyLXJhZGl1czo1cHh9Ci5QYWdlX2t5YyBoMiwucGFnZV9hbGxhYm91dCBoMiwucGFnZV9ndG5jZGV0YWlscyBoMiwucGFnZV9zZWxmZGVjbGFyYXRpb24gaDIsLnBhZ2VfdW5pdGJvb2tpbmdkZXRhaWxzIGgzLCAucGFnZV9ib29raW5nYW1vdW50IGgze3BhZGRpbmctbGVmdDoxOHB4IWltcG9ydGFudDtwb3NpdGlvbjpyZWxhdGl2ZTtjb2xvcjojMDA4MDAwYzI7Zm9udC13ZWlnaHQ6NzAwO2ZvbnQtc2l6ZToyMnB4O3Bvc2l0aW9uOnJlbGF0aXZlO2xpbmUtaGVpZ2h0OjE7bWFyZ2luOjAgMCAyOHB4fQouUGFnZV9reWMgaDI6YmVmb3JlLC5wYWdlX2FsbGFib3V0IGgyOmJlZm9yZSwucGFnZV9ndG5jZGV0YWlscyBoMjo6YmVmb3JlLC5wYWdlX3NlbGZkZWNsYXJhdGlvbiBoMjpiZWZvcmUsLnBhZ2VfdW5pdGJvb2tpbmdkZXRhaWxzIGgzOmJlZm9yZSwucGFnZV9ib29raW5nYW1vdW50IGgzOmJlZm9yZXtjb250ZW50OiIiO3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO2xlZnQ6MDt3aWR0aDoxMHB4O2hlaWdodDoyMnB4O2JhY2tncm91bmQ6I2Y5MH0KLnBhZ2VfdW5pdGJvb2tpbmdkZXRhaWxzIHRhYmxlIHRke3BhZGRpbmctYm90dG9tOjZweH0KLnBhZ2VfdW5pdGJvb2tpbmdkZXRhaWxzIHRhYmxlIHRyIHRkOm50aC1jaGlsZChvZGQpe2ZvbnQtd2VpZ2h0OjcwMH0KLnNpZ25fYmxvY2tzX3dyYXBwZXJ7ZGlzcGxheTpmbGV4O2ZsZXgtd3JhcDp3cmFwO3dpZHRoOjEwMCU7YWxpZ24tc2VsZjpmbGV4LWVuZH0KLnNpZ25fYmxvY2tfd3JhcHBlcntwYWRkaW5nOjAgMzBweDt3aWR0aDpjYWxjKDEwMCUgLyAzKX0KLnNpZ25fYmxvY2t7Ym9yZGVyOjFweCBkb3R0ZWQgIzAwMDtoZWlnaHQ6MTAwcHg7dGV4dC1hbGlnbjpjZW50ZXI7Y29sb3I6IzY4Njg2ODtwYWRkaW5nLXRvcDoxMHB4fQoucGFnZV91bml0Ym9va2luZ2RldGFpbHMgLm1haW5fZm9ybWRldGFpbHttYXJnaW46MjBweCAwIDB9Ci5wYWdlX3VuaXRib29raW5nZGV0YWlscyAuaW5uZXJfd3JhcHBlcntkaXNwbGF5OmZsZXg7ZmxleC13cmFwOndyYXA7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW59Ci5wYWdlX3VuaXRib29raW5nZGV0YWlscyAuaW5uZXJfd3JhcHBlcj4ucm93e3dpZHRoOjEwMCV9Ci5pbm5lcl93cmFwcGVyPi5yb3d7ZmxleC1ncm93OjF9Ci5wYWdlX3VuaXRib29raW5nZGV0YWlscyAuaW5uZXJfd3JhcHBlciAubWFpbl9mb3JtZGV0YWlse3dpZHRoOjEwMCU7ZmxleC1ncm93OjF9Ci5wYWdlX3NlbGZkZWNsYXJhdGlvbiBoMnttYXJnaW46MTJweCAwIDIwcHggMThweH0KLnBhZ2Vfc2VsZmRlY2xhcmF0aW9uIC5tYWluX2Zvcm1kZXRhaWwgcHtmb250LXNpemU6MThweDtsaW5lLWhlaWdodDozMHB4fQoucGFnZV9zZWxmZGVjbGFyYXRpb24gLnNpZ25fYmxvY2tzX3dyYXBwZXJ7bWFyZ2luOjE2cHggLTEycHggMDt3aWR0aDppbml0aWFsfQoucGFnZV9zZWxmZGVjbGFyYXRpb24gLm1haW5fZm9ybWRldGFpbHtwYWRkaW5nOjAgMjBweDttYXJnaW46MCAwIDI2cHh9Ci5wYWdlX3NlbGZkZWNsYXJhdGlvbiBoM3tmb250LXdlaWdodDo1MDA7Zm9udC1zaXplOjIwcHg7bGluZS1oZWlnaHQ6MTtwYWRkaW5nOjAgMjBweH0KLnBhZ2Vfc2VsZmRlY2xhcmF0aW9uIC5kYXRlX3dyYXBwZXJ7cGFkZGluZzowIDIwcHg7bWFyZ2luOjIycHggMCAwfQoucGFnZV9zZWxmZGVjbGFyYXRpb24gLmlubmVyX3dyYXBwZXJ7ZGlzcGxheTpmbGV4O2ZsZXgtd3JhcDp3cmFwO2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVufQoucGFnZV9zZWxmZGVjbGFyYXRpb24gLmlubmVyX3dyYXBwZXI+Knt3aWR0aDoxMDAlfQoucGFnZV9ndG5jZGV0YWlscyAubWFpbl9mb3JtZGV0YWlse3BhZGRpbmc6MCAyMHB4fQoucGFnZV9ndG5jZGV0YWlscyAubWFpbl9mb3JtZGV0YWlsIHB7Zm9udC1zaXplOjEwcHg7bWFyZ2luOjAgMCAyMHB4fQoucGFnZV9ndG5jZGV0YWlscyBoMnt0ZXh0LXRyYW5zZm9ybTp1cHBlcmNhc2V9Ci5wYWdlX2d0bmNkZXRhaWxzIC5tYWluX2Zvcm1kZXRhaWwgaDR7Y29sb3I6I2Y5MDtmb250LXNpemU6MTBweH0KLnBhZ2VfZ3RuY2RldGFpbHMgLm1haW5fZm9ybWRldGFpbCAuZ3RuY2RldGFpbHNfbGlzdHtsaXN0LXN0eWxlOm5vbmV9Ci5ndG5jZGV0YWlsc19saXN0IGxpe2ZvbnQtc2l6ZToxMXB4fQouZ3RuY2RldGFpbHNfbGlzdF93cmFwcGVye2Rpc3BsYXk6YmxvY2s7Y29sdW1uLWNvdW50OjJ9Ci5wYWdlX2d0bmNkZXRhaWxzIC5pbm5lcl93cmFwcGVye2Rpc3BsYXk6ZmxleDtmbGV4LXdyYXA6d3JhcDtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2Vlbn0KLnBhZ2VfZ3RuY2RldGFpbHMgLmlubmVyX3dyYXBwZXI+Knt3aWR0aDoxMDAlfQouYWdydF92bGF1dXttYXJnaW4tdG9wOjIwcHg7ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjtnYXA6NXB4fQouYWdydF92bGF1dSBwe2ZvbnQtd2VpZ2h0OjQwMH0KLmFib3V0X3lvdV9kZXRhaWxzX2xpc3R7bGlzdC1zdHlsZTpub25lfQouYWJvdXRfeW91X2RldGFpbHNfbGlzdCBsaXtkaXNwbGF5OmZsZXg7ZmxleC13cmFwOndyYXA7bWFyZ2luOjAgMCAzMHB4fQouYWJvdXRfeW91X2RldGFpbHNfbGlzdCBsaTpsYXN0LWNoaWxke21hcmdpbjowfQouYWJvdXRfeW91X2RldGFpbHNfbGlzdCBsaSBzcGFue2Rpc3BsYXk6YmxvY2s7d2lkdGg6NTAlO2ZvbnQtc2l6ZToyNXB4fQouYWJvdXRfeW91X2RldGFpbHNfbGlzdCBsaSAuYWJvdXRfeW91X2xhYmVse2ZvbnQtd2VpZ2h0OjcwMH0KLnBhZ2VfYWxsYWJvdXQgLmlubmVyX3dyYXBwZXJ7cGFkZGluZzowIDIwcHg7ZGlzcGxheTpmbGV4O2ZsZXgtd3JhcDp3cmFwO2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2Vlbn0KLnBhZ2VfYWxsYWJvdXQgLnNpZ25fYmxvY2tzX3dyYXBwZXJ7cGFkZGluZy1ib3R0b206MTVweH0KLnBhZ2VfYWxsYWJvdXQgLm1haW5fZm9ybWRldGFpbHtwYWRkaW5nOjAgMjBweH0KLmFib3V0X3lvdV9kZXRhaWxzX2xpc3QgbGkgLmFib3V0X3lvdV9sYWJlbHt3aWR0aDo3MCV9Ci5hYm91dF95b3VfZGV0YWlsc19saXN0IGxpIHNwYW46bm90KC5hYm91dF95b3VfbGFiZWwpe3dpZHRoOjMwJX0KLnBhZ2VfYWxsYWJvdXQgaDJ7bWFyZ2luOjI4cHggMCA1MHB4fQoucGFnZV9Bbm5leHVyZXMgLmlubmVyX3dyYXBwZXJ7ZGlzcGxheTpmbGV4O2ZsZXgtd3JhcDp3cmFwO2p1c3RpZnktY29udGVudDpjZW50ZXI7YWxpZ24taXRlbXM6Y2VudGVyfQoucGFnZV9Bbm5leHVyZXMgLmlubmVyX3dyYXBwZXIgaDF7Zm9udC1zaXplOjYycHg7Zm9udC13ZWlnaHQ6NzAwfQouUGFnZV9reWMgLm1haW5fZm9ybWRldGFpbCBoM3tmb250LXNpemU6MjJweDtjb2xvcjojMDAwO2ZvbnQtd2VpZ2h0OjcwMDttYXJnaW46MCAwIDI4cHg7cGFkZGluZy1sZWZ0OjE4cHghaW1wb3J0YW50fQouUGFnZV9reWMgLm1haW5fZm9ybWRldGFpbHtwYWRkaW5nOjAgMjBweH0KLkFwcGxpY2FudF9ibG9ja3tkaXNwbGF5OmZsZXg7ZmxleC13cmFwOndyYXA7cGFkZGluZzoxNXB4O2JvcmRlcjoxcHggc29saWQgI2RlZGVkZThjO2JvcmRlci1yYWRpdXM6NXB4O21hcmdpbi1ib3R0b206MTZweH0KLkFwcGxpY2FudF9ibG9jayAuaW1nX2Jsb2NrIGltZ3t3aWR0aDoyMDBweDtoZWlnaHQ6MTIwcHg7b2JqZWN0LWZpdDpjb3ZlcjtvYmplY3QtcG9zaXRpb246Y2VudGVyfQouQXBwbGljYW50X2Jsb2NrIC5pbWdfYmxvY2ssLkFwcGxpY2FudF9ibG9jayBwe3dpZHRoOjUwJX0KLkFwcGxpY2FudF9ibG9jayAuaW1nX2Jsb2Nre3RleHQtYWxpZ246cmlnaHR9Ci5BcHBsaWNhbnRfYmxvY2s6bGFzdC1jaGlsZHttYXJnaW4tYm90dG9tOjB9Ci5QYWdlX2t5YyAuaW5uZXJfd3JhcHBlcntkaXNwbGF5OmZsZXg7ZmxleC13cmFwOndyYXA7ZmxleC1kaXJlY3Rpb246Y29sdW1uO2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVufQouTF9UX2xpbWl0ZWQgLm1haW5fZm9ybWRldGFpbHtwYWRkaW5nOjAgMjBweCA0MHB4fQouTF9UX2xpbWl0ZWQgLm1haW5fZm9ybWRldGFpbCBwIHN0cm9uZ3tmb250LXdlaWdodDo3MDB9Ci5MX1RfbGltaXRlZCAubWFpbl9mb3JtZGV0YWlsIHB7bWFyZ2luOjAgMCAxMHB4fQouTF9UX2xpbWl0ZWQgLmlubmVyX3dyYXBwZXJ7ZGlzcGxheTpmbGV4O2ZsZXgtd3JhcDp3cmFwO2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2Vlbn0KLnBhZ2Vfc2VsZmRlY2xhcmF0aW9uIHB7bWFyZ2luOjAhaW1wb3J0YW50fQouZ3RuY2RldGFpbHNfbGlzdF93cmFwcGVyIGg0LC5ndG5jZGV0YWlsc19saXN0X3dyYXBwZXIgbGksLmd0bmNkZXRhaWxzX2xpc3Rfd3JhcHBlciBwLC5ndG5jZGV0YWlsc19saXN0X3dyYXBwZXIgdWx7bWFyZ2luOjA7cGFkZGluZzowfQoubWFpbl9mb3JtZGV0YWlsIHB7Zm9udC13ZWlnaHQ6NDAwO2ZvbnQtc2l6ZToxNnB4O2xpbmUtaGVpZ2h0OjI0cHg7Y29sb3I6IzIxMjEyMX0KLmhlYWRlcl9jb25zZXQgcCwuaGVhZGVyX3N1YmNvbnNldCBwe3RleHQtYWxpZ246Y2VudGVyO2ZvbnQtc2l6ZToxNHB4O2ZvbnQtd2VpZ2h0OjYwMDtsaW5lLWhlaWdodDoyMHB4O2ZvbnQtZmFtaWx5OnNhbnMtc2VyaWY7Y29sb3I6IzAwMH0KLmhlYWRlcl9zdWJjb25zZXQgcHt0ZXh0LWFsaWduOmxlZnR9Ci5oZWFkZXJfc3ViY29uc2V0IHA6bGFzdC1jaGlsZHt0ZXh0LWFsaWduOnJpZ2h0fQouY29uY2VudF9mdHRiIHRhYmxle3RhYmxlLWxheW91dDpmaXhlZDtib3JkZXI6MXB4IHNvbGlkIGdyZXk7Ym9yZGVyLWJvdHRvbTowO3dpZHRoOjEwMCV9Ci5jb25jZW50X2Z0dGIgdGFibGUgdGQsLmNvbmNlbnRfZnR0YiB0YWJsZSB0aHtib3JkZXItYm90dG9tOjFweCBzb2xpZCBncmV5O2JvcmRlci1yaWdodDoxcHggc29saWQgZ3JleTtwYWRkaW5nOjEwcHh9Ci5jb25jZW50X2Z0dGIgdGFibGUgdGQ6bGFzdC1jaGlsZCwuY29uY2VudF9mdHRiIHRhYmxlIHRoOmxhc3QtY2hpbGR7Ym9yZGVyLXJpZ2h0OjB9Ci5jb25jZW50X2Z0dGIgdGFibGUgcCwuY29uY2VudF9mdHRiIHRhYmxlIHNwYW4sLmNvbmNlbnRfZnR0YiB0YWJsZSB0ZHtmb250LXNpemU6MTJweDtsaW5lLWhlaWdodDoxNHB4fQouY29uY2VudF9mdHRiIHRhYmxlIHRoZWFkIHRyIHRke2ZvbnQtd2VpZ2h0OjYwMH0KLmNvbmNlbnRfZnR0YiB0YWJsZSB0Ym9keSB0ciB0ZDpudGgtY2hpbGQoMm4pe2ZvbnQtd2VpZ2h0OjYwMH0KLmFwcGxpY2F0aW9uLWJnLC5hcHBsaWNhdGlvbi1mb290ZXJ7bWF4LXdpZHRoOjk2JTt3aWR0aDoxMDAlO3Bvc2l0aW9uOmFic29sdXRlO2xlZnQ6MTVweDt0b3A6MTVweDtiYWNrZ3JvdW5kLXBvc2l0aW9uOmNlbnRlcjtiYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQ7YmFja2dyb3VuZC1zaXplOmNvdmVyfQouYXBwbGljYXRpb24tYmcuaGVhZGVyLWxvZ28gaW1ne21hcmdpbi1sZWZ0OjB9Ci5oZWFkZXItbG9nbzpsYXN0LWNoaWxke21hcmdpbi1sZWZ0OmF1dG99Ci5jb25jZW50X2Z0dGIgdGFibGU6bGFzdC1jaGlsZHttaW4taGVpZ2h0OjE4MHB4O21hcmdpbi10b3A6MjBweDttYXJnaW4tYm90dG9tOjIwcHh9Ci5hcHBsaWNpZW50LWJveHttYXJnaW4tdG9wOjMwcHg7d2lkdGg6NzAlO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpmbGV4LXN0YXJ0O3otaW5kZXg6MTtwb3NpdGlvbjpyZWxhdGl2ZX0KLmFwcGxpY2llbnQtYm94IGg2LC5hcHBsaWNpZW50LWJveCBwe2ZvbnQtc2l6ZToxMnB4O2ZvbnQtd2VpZ2h0OjQwMDtsaW5lLWhlaWdodDoxOHB4O2NvbG9yOiMyMTIxMjF9Ci5hcHBsaWNpZW50LWJveCBoNntmb250LXdlaWdodDo2MDB9Ci5sZWZ0LWJveHtib3JkZXItcmlnaHQ6MXB4IHNvbGlkfQoubGVmdC1ib3gsLnJpZ2h0LWJveHt3aWR0aDo0OCU7cGFkZGluZzowIDEwcHh9Ci5sZWZ0LWJveCBoNnttYXJnaW4tdG9wOjA7bWFyZ2luLWJvdHRvbTowfQoucmlnaHQtYm94IHB7bWFyZ2luLXRvcDowfQouYXBwbGljYXRpb24tZm9vdGVye21heC13aWR0aDo5NiU7bWluLWhlaWdodDoxNTBweDtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6YXV0bztib3R0b206MTVweDtyaWdodDoxNXB4O2xlZnQ6YXV0bztkaXNwbGF5OmZsZXg7anVzdGlmeS1jb250ZW50OmVuZDthbGlnbi1pdGVtczplbmR9Ci5yaWdodGhkX21haW5mb290ZXJ7dGV4dC1hbGlnbjplbmQ7cGFkZGluZy10b3A6YXV0bztwYWRkaW5nOjdweCA1cHh9Ci5yaWdodGhkX21haW5mb290ZXIgcHttYXJnaW46MDtwYWRkaW5nOjA7Zm9udC1zaXplOjEycHg7bGluZS1oZWlnaHQ6MTZweH0KLnJpZ2h0aGRfbWFpbmZvb3RlciBoNXttYXJnaW46MDtwYWRkaW5nOjA7Zm9udC1zaXplOjE0cHh9Ci5oaWRkZW57ZGlzcGxheTpub25lfQouYXBwbGljYW50LWRldGFpbC13cmFwcGVye2Rpc3BsYXk6ZmxleDtmbGV4LXdyYXA6d3JhcDthbGlnbi1pdGVtczpjZW50ZXI7ZmxleC1kaXJlY3Rpb246cm93LXJldmVyc2U7ZmxleC1ncm93OjF9Ci5hcHBsaWNhbnQtZGV0YWlsLXdyYXBwZXIgLmFwcGxpY2FudC1kZXRhaWwgdWwsLmFwcGxpY2FudC1pbmZvIHVse3BhZGRpbmc6MDttYXJnaW4tYm90dG9tOjB9Ci5hcHBsaWNhbnQtaW5mbyBsaSwuYXBwbGljYW50LWxpc3R7bGlzdC1zdHlsZTpub25lO21hcmdpbi1ib3R0b206NXB4O3dpZHRoOjEwMCV9Ci5hcHBsaWNhbnQtaW5mbyBsaTpsYXN0LWNoaWxkLC5hcHBsaWNhbnQtbGlzdDpsYXN0LWNoaWxke21hcmdpbi1ib3R0b206MH0KLmFwcGxpY2FudC1pbmZvIGxpIHAsLmFwcGxpY2FudC1saXN0IHB7ZGlzcGxheTppbmxpbmUtYmxvY2s7bWFyZ2luOjA7d2lkdGg6NjAlO3BhZGRpbmc6MCAxMHB4O3dvcmQtd3JhcDpicmVhay13b3JkO3dvcmQtYnJlYWs6YnJlYWstYWxsfQouYXBwbGljYW50LWluZm8gbGl7cG9zaXRpb246cmVsYXRpdmU7bWFyZ2luLXJpZ2h0OjE1cHh9Ci5hcHBsaWNhbnQtaW5mbyBsaTo6YWZ0ZXJ7Y29udGVudDoiIjt3aWR0aDoxOHB4O2hlaWdodDoxOHB4O2JhY2tncm91bmQtc2l6ZToxOHB4O3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO3JpZ2h0Oi01cHg7YmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0O2JhY2tncm91bmQtcG9zaXRpb246Y2VudGVyfQouYXBwbGljYW50LWluZm8gbGkueE1hcms6OmFmdGVye2JhY2tncm91bmQtaW1hZ2U6dXJsKCJkYXRhOmltYWdlL3N2Zyt4bWwsJTNDc3ZnIHdpZHRoPScyMCcgaGVpZ2h0PScyMCcgdmlld0JveD0nMCAwIDIwIDIwJyBmaWxsPSdub25lJyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnJTNFJTNDZyBjbGlwLXBhdGg9J3VybCglMjNjbGlwMF8xMDFfMTgzKSclM0UlM0NwYXRoIGQ9J00yMCAxMEMyMCAxMi42NTIyIDE4Ljk0NjQgMTUuMTk1NyAxNy4wNzExIDE3LjA3MTFDMTUuMTk1NyAxOC45NDY0IDEyLjY1MjIgMjAgMTAgMjBDNy4zNDc4NCAyMCA0LjgwNDMgMTguOTQ2NCAyLjkyODkzIDE3LjA3MTFDMS4wNTM1NyAxNS4xOTU3IDAgMTIuNjUyMiAwIDEwQzAgNy4zNDc4NCAxLjA1MzU3IDQuODA0MyAyLjkyODkzIDIuOTI4OTNDNC44MDQzIDEuMDUzNTcgNy4zNDc4NCAwIDEwIDBDMTIuNjUyMiAwIDE1LjE5NTcgMS4wNTM1NyAxNy4wNzExIDIuOTI4OTNDMTguOTQ2NCA0LjgwNDMgMjAgNy4zNDc4NCAyMCAxMFpNNi42OTI1IDUuODA3NUM2LjU3NTE0IDUuNjkwMTQgNi40MTU5NyA1LjYyNDIxIDYuMjUgNS42MjQyMUM2LjA4NDAzIDUuNjI0MjEgNS45MjQ4NiA1LjY5MDE0IDUuODA3NSA1LjgwNzVDNS42OTAxNCA1LjkyNDg2IDUuNjI0MjEgNi4wODQwMyA1LjYyNDIxIDYuMjVDNS42MjQyMSA2LjQxNTk3IDUuNjkwMTQgNi41NzUxNCA1LjgwNzUgNi42OTI1TDkuMTE2MjUgMTBMNS44MDc1IDEzLjMwNzVDNS43NDkzOSAxMy4zNjU2IDUuNzAzMjkgMTMuNDM0NiA1LjY3MTg1IDEzLjUxMDVDNS42NDA0IDEzLjU4NjQgNS42MjQyMSAxMy42Njc4IDUuNjI0MjEgMTMuNzVDNS42MjQyMSAxMy44MzIyIDUuNjQwNCAxMy45MTM2IDUuNjcxODUgMTMuOTg5NUM1LjcwMzI5IDE0LjA2NTQgNS43NDkzOSAxNC4xMzQ0IDUuODA3NSAxNC4xOTI1QzUuOTI0ODYgMTQuMzA5OSA2LjA4NDAzIDE0LjM3NTggNi4yNSAxNC4zNzU4QzYuMzMyMTggMTQuMzc1OCA2LjQxMzU2IDE0LjM1OTYgNi40ODk0OCAxNC4zMjgyQzYuNTY1NCAxNC4yOTY3IDYuNjM0MzkgMTQuMjUwNiA2LjY5MjUgMTQuMTkyNUwxMCAxMC44ODM3TDEzLjMwNzUgMTQuMTkyNUMxMy4zNjU2IDE0LjI1MDYgMTMuNDM0NiAxNC4yOTY3IDEzLjUxMDUgMTQuMzI4MkMxMy41ODY0IDE0LjM1OTYgMTMuNjY3OCAxNC4zNzU4IDEzLjc1IDE0LjM3NThDMTMuODMyMiAxNC4zNzU4IDEzLjkxMzYgMTQuMzU5NiAxMy45ODk1IDE0LjMyODJDMTQuMDY1NCAxNC4yOTY3IDE0LjEzNDQgMTQuMjUwNiAxNC4xOTI1IDE0LjE5MjVDMTQuMjUwNiAxNC4xMzQ0IDE0LjI5NjcgMTQuMDY1NCAxNC4zMjgyIDEzLjk4OTVDMTQuMzU5NiAxMy45MTM2IDE0LjM3NTggMTMuODMyMiAxNC4zNzU4IDEzLjc1QzE0LjM3NTggMTMuNjY3OCAxNC4zNTk2IDEzLjU4NjQgMTQuMzI4MiAxMy41MTA1QzE0LjI5NjcgMTMuNDM0NiAxNC4yNTA2IDEzLjM2NTYgMTQuMTkyNSAxMy4zMDc1TDEwLjg4MzcgMTBMMTQuMTkyNSA2LjY5MjVDMTQuMjUwNiA2LjYzNDM5IDE0LjI5NjcgNi41NjU0IDE0LjMyODIgNi40ODk0OEMxNC4zNTk2IDYuNDEzNTYgMTQuMzc1OCA2LjMzMjE4IDE0LjM3NTggNi4yNUMxNC4zNzU4IDYuMTY3ODIgMTQuMzU5NiA2LjA4NjQ0IDE0LjMyODIgNi4wMTA1MkMxNC4yOTY3IDUuOTM0NiAxNC4yNTA2IDUuODY1NjEgMTQuMTkyNSA1LjgwNzVDMTQuMTM0NCA1Ljc0OTM5IDE0LjA2NTQgNS43MDMyOSAxMy45ODk1IDUuNjcxODVDMTMuOTEzNiA1LjY0MDQgMTMuODMyMiA1LjYyNDIxIDEzLjc1IDUuNjI0MjFDMTMuNjY3OCA1LjYyNDIxIDEzLjU4NjQgNS42NDA0IDEzLjUxMDUgNS42NzE4NUMxMy40MzQ2IDUuNzAzMjkgMTMuMzY1NiA1Ljc0OTM5IDEzLjMwNzUgNS44MDc1TDEwIDkuMTE2MjVMNi42OTI1IDUuODA3NVonIGZpbGw9JyUyM0RDMzU0NScvJTNFJTNDL2clM0UlM0NkZWZzJTNFJTNDY2xpcFBhdGggaWQ9J2NsaXAwXzEwMV8xODMnJTNFJTNDcmVjdCB3aWR0aD0nMjAnIGhlaWdodD0nMjAnIGZpbGw9J3doaXRlJy8lM0UlM0MvY2xpcFBhdGglM0UlM0MvZGVmcyUzRSUzQy9zdmclM0UlMEEiKX0KLmFwcGxpY2FudC1pbmZvIGxpLmNoZWNrOjphZnRlcntiYWNrZ3JvdW5kLWltYWdlOnVybCgiZGF0YTppbWFnZS9zdmcreG1sLCUzQ3N2ZyB3aWR0aD0nMjAnIGhlaWdodD0nMjAnIHZpZXdCb3g9JzAgMCAyMCAyMCcgZmlsbD0nbm9uZScgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyUzRSUzQ2cgY2xpcC1wYXRoPSd1cmwoJTIzY2xpcDBfMTAxXzE4NSknJTNFJTNDcGF0aCBkPSdNMjAgMTBDMjAgMTIuNjUyMiAxOC45NDY0IDE1LjE5NTcgMTcuMDcxMSAxNy4wNzExQzE1LjE5NTcgMTguOTQ2NCAxMi42NTIyIDIwIDEwIDIwQzcuMzQ3ODQgMjAgNC44MDQzIDE4Ljk0NjQgMi45Mjg5MyAxNy4wNzExQzEuMDUzNTcgMTUuMTk1NyAwIDEyLjY1MjIgMCAxMEMwIDcuMzQ3ODQgMS4wNTM1NyA0LjgwNDMgMi45Mjg5MyAyLjkyODkzQzQuODA0MyAxLjA1MzU3IDcuMzQ3ODQgMCAxMCAwQzEyLjY1MjIgMCAxNS4xOTU3IDEuMDUzNTcgMTcuMDcxMSAyLjkyODkzQzE4Ljk0NjQgNC44MDQzIDIwIDcuMzQ3ODQgMjAgMTBaTTE1LjAzNzUgNi4yMTI1QzE0Ljk0ODIgNi4xMjM1MiAxNC44NDE5IDYuMDUzNDcgMTQuNzI0OSA2LjAwNjUyQzE0LjYwNzkgNS45NTk1NyAxNC40ODI3IDUuOTM2NyAxNC4zNTY3IDUuOTM5MjZDMTQuMjMwNiA1Ljk0MTgzIDE0LjEwNjQgNS45Njk3OSAxMy45OTE0IDYuMDIxNDZDMTMuODc2NSA2LjA3MzEzIDEzLjc3MzEgNi4xNDc0NiAxMy42ODc1IDYuMjRMOS4zNDYyNSAxMS43NzEyTDYuNzMgOS4xNTM3NUM2LjU1MjI4IDguOTg4MTUgNi4zMTcyMiA4Ljg5OCA2LjA3NDM1IDguOTAyMjhDNS44MzE0NyA4LjkwNjU3IDUuNTk5NzQgOS4wMDQ5NiA1LjQyNzk3IDkuMTc2NzJDNS4yNTYyMSA5LjM0ODQ5IDUuMTU3ODIgOS41ODAyMiA1LjE1MzUzIDkuODIzMUM1LjE0OTI1IDEwLjA2NiA1LjIzOTQgMTAuMzAxIDUuNDA1IDEwLjQ3ODhMOC43MTI1IDEzLjc4NzVDOC44MDE2IDEzLjg3NjQgOC45MDc3MSAxMy45NDY1IDkuMDI0NDggMTMuOTkzNkM5LjE0MTI1IDE0LjA0MDYgOS4yNjYzMSAxNC4wNjM3IDkuMzkyMTggMTQuMDYxM0M5LjUxODA2IDE0LjA1OSA5LjY0MjE3IDE0LjAzMTMgOS43NTcxMiAxMy45OEM5Ljg3MjA3IDEzLjkyODYgOS45NzU1IDEzLjg1NDcgMTAuMDYxMiAxMy43NjI1TDE1LjA1MTMgNy41MjVDMTUuMjIxNCA3LjM0ODEyIDE1LjMxNTMgNy4xMTE1OSAxNS4zMTMgNi44NjYyQzE1LjMxMDcgNi42MjA4IDE1LjIxMjIgNi4zODYxIDE1LjAzODggNi4yMTI1SDE1LjAzNzVaJyBmaWxsPSclMjMxOTg3NTQnLyUzRSUzQy9nJTNFJTNDZGVmcyUzRSUzQ2NsaXBQYXRoIGlkPSdjbGlwMF8xMDFfMTg1JyUzRSUzQ3JlY3Qgd2lkdGg9JzIwJyBoZWlnaHQ9JzIwJyBmaWxsPSd3aGl0ZScvJTNFJTNDL2NsaXBQYXRoJTNFJTNDL2RlZnMlM0UlM0Mvc3ZnJTNFJTBBIil9Ci5hcHBsaWNhbnQtaW5mbyBsaSBsYWJlbCwuYXBwbGljYW50LWxpc3QgbGFiZWx7Zm9udC1mYW1pbHk6UG9wcGlucyxzYW5zLXNlcmlmO2ZvbnQtc2l6ZToxNnB4O2xpbmUtaGVpZ2h0OjI0cHg7Zm9udC13ZWlnaHQ6NjAwO2Rpc3BsYXk6aW5saW5lLWJsb2NrO3dpZHRoOjM1JTt2ZXJ0aWNhbC1hbGlnbjp0b3B9Ci5hcHBsaWNhbnQtZGV0YWlsLXdyYXBwZXIgaDN7ZGlzcGxheTpub25lO3BhZGRpbmctbGVmdDoyMnB4O3Bvc2l0aW9uOnJlbGF0aXZlO2NvbG9yOiMwMDgwMDBjMjtmb250LXdlaWdodDo3MDA7Zm9udC1zaXplOjIycHg7cG9zaXRpb246cmVsYXRpdmU7bGluZS1oZWlnaHQ6MTttYXJnaW46MCAwIDI4cHh9Ci5hcHBsaWNhbnQtZGV0YWlsLXdyYXBwZXIgaDM6OmJlZm9yZXtjb250ZW50OiIiO3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO2xlZnQ6MDt3aWR0aDoxMHB4O2hlaWdodDoyMnB4O2JhY2tncm91bmQ6I2Y5MH0KLmFwcGxpY2FudC1kZXRhaWwgaDN7ZGlzcGxheTpibG9ja30KLmFwcGxpY2FudC1kZXRhaWwgaDM6OmJlZm9yZXtjb250ZW50OiIiO3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO2xlZnQ6MDt3aWR0aDoxMHB4O2hlaWdodDoyMnB4O2JhY2tncm91bmQ6I2Y5MH0KLmFwcGxpY2FudC1pbWd7Ym9yZGVyOjFweCBzb2xpZCAjMjEyMTIxO2JvcmRlci1yYWRpdXM6NHB4O21heC13aWR0aDoxMjBweDt3aWR0aDoxMDAlO21hcmdpbjowIGF1dG87bWFyZ2luLWJvdHRvbToxMHB4O3Bvc2l0aW9uOnJlbGF0aXZlfQouYXBwbGljYW50LWltZzo6YmVmb3Jle2NvbnRlbnQ6IiI7cGFkZGluZy10b3A6MTIwJTtkaXNwbGF5OmJsb2NrfQouYXBwbGljYW50LWltZyBpbWd7bWF4LXdpZHRoOjEwMCU7cG9zaXRpb246YWJzb2x1dGU7b2JqZWN0LWZpdDpjb3ZlcjtvYmplY3QtcG9zaXRpb246Y2VudGVyO3RvcDowO2xlZnQ6MDt3aWR0aDoxMDAlO2hlaWdodDoxMDAlfQouYXBwbGljYW50LWNhcmR7bWF4LXdpZHRoOjIyMHB4O3dpZHRoOjEwMCU7bWFyZ2luLWxlZnQ6YXV0b30KLmFwcGxpY2FudC1kZXRhaWx7d2lkdGg6Y2FsYygxMDAlIC0gMjUwcHgpfQouYWJvdXRfeW91X2RldGFpbHNfbGlzdCBsaSAuYWJvdXRfeW91X2xhYmVsLC5hYm91dF95b3VfZGV0YWlsc19saXN0IGxpIHNwYW57Zm9udC1zaXplOjE2cHg7bGlzdC1zdHlsZToyNHB4fQoucGFnZV9hbGxhYm91dCAuaW5uZXJfd3JhcHBlcntqdXN0aWZ5LWNvbnRlbnQ6ZmxleC1zdGFydH0KLnBhZ2VfYWxsYWJvdXQgLmlubmVyX3dyYXBwZXI+LnJvd3tmbGV4LWdyb3c6dW5zZXR9Ci5wYWdlX2FsbGFib3V0IC5pbm5lcl93cmFwcGVyIC5hbGxhYm91dF9tYWluaW5uZXJ7ZmxleC1ncm93OjF9Ci5iYWNrX2NoZWNrX2ltYWdleyB3aWR0aDogMjAwcHg7IGhlaWdodDogMTUwcHg7fQouYmFja19jaGVja19pbWFnZS5jaGVxdWV7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDE1MHB4O30KCi5iYWNrX2NoZWNrX2ltYWdlIGltZyB7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwMCU7fQouaGVhZF9sb2dvMXtiYWNrZ3JvdW5kLXBvc2l0aW9uOjE1cHggY2VudGVyO2JhY2tncm91bmQtc2l6ZToxMjBweDtiYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQ7bWF4LXdpZHRoOjE2MHB4O3dpZHRoOjEwMCU7aGVpZ2h0OjcwcHg7ZGlzcGxheTppbmxpbmUtYmxvY2s7bWFyZ2luLWJvdHRvbTo1cHg7YmFja2dyb3VuZC1pbWFnZTp1cmwoImRhdGE6aW1hZ2Uvc3ZnK3htbCwlM0Nzdmcgd2lkdGg9JzIyNScgaGVpZ2h0PScyMjUnIHZpZXdCb3g9JzAgMCAyMjUgMjI1JyBmaWxsPSdub25lJyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHhtbG5zOnhsaW5rPSdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rJyUzRSUzQ3JlY3QgeT0nNzYnIHdpZHRoPScyMjUnIGhlaWdodD0nNzInIGZpbGw9J3VybCglMjNwYXR0ZXJuMCknLyUzRSUzQ2RlZnMlM0UlM0NwYXR0ZXJuIGlkPSdwYXR0ZXJuMCcgcGF0dGVybkNvbnRlbnRVbml0cz0nb2JqZWN0Qm91bmRpbmdCb3gnIHdpZHRoPScxJyBoZWlnaHQ9JzEnJTNFJTNDdXNlIHhsaW5rOmhyZWY9JyUyM2ltYWdlMF8xXzQnIHRyYW5zZm9ybT0nc2NhbGUoMC4wMDQ0NDQ0NCAwLjAxMzg4ODkpJy8lM0UlM0MvcGF0dGVybiUzRSUzQ2ltYWdlIGlkPSdpbWFnZTBfMV80JyB3aWR0aD0nMjI1JyBoZWlnaHQ9JzcyJyB4bGluazpocmVmPSdkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQU9FQUFBQklDQVlBQUFBQW9KSmNBQUFRSkVsRVFWUjRuTzFkVDJoVVNSNys3U1puTVJBUTBSQVpFZnJnUVFiSlFWcG9WcndFUlVVWUpveUt5REFuSTRPelRKakRET0llWkdTVTJkR1RMSU9NaW9Qc29LTGtJaTRCR3c4aUlRY1BEYUlZRXBGQUlDSEhKV0gzOEp1UCt1clhWYS8vcER2dkpkWUhUZjk1OWVyVnExZGYvZjVXdFVoQ1FrS3UrSXVJeUgrbjVIK3JyV2grd2YvZTM3ZmFHaE1TUGc3MGRxcWlSTHFFaFBidzE3d2JrSkR3c1NPUk1DRWhaeVFTSmlUa2pFVENoSVNjc1dGSXVMelNtVElKQ1d1TkRVUEMzcDdPbEVsSVdHdDBMRVNSTjVaWHdpU3owaThSTWFGbzJEQWtaSEl4SVJQcEVvcU9EYU9PTHEvNFVpLzBtY3NrK3pDaEtOaVFrdEJLdjVCVVRCSXlvU2hZOXlSY1hoRlpYQktabmRQdjc5N1hsOW14VFdUN0ZwSE5teEw1RW9xSFFwS1FiVHA4dHIrOWVxMkVlL1pTNU0yTXlIZzF1ODdTb01qQmZTSURXMFVxUXlLN2Q4WHR5SkNxbXNpYjBDMTBiQlZGTjJBOW5zc3JJbzhubEhoUG5vdlVwdHV2ZTdpc1pEeHgyQ1dmTjdJVEV4RVR1b0hDa2hDRWdCUjhQQ0Z5ODM2MnhCc3VpNXcrVnYvN3UvY2lNeC9DeE1VNWh5cGh5V2pia1lpWTBHa1Vrb1E4Mk9jWFJDN2RFTGwyMXk4ek9xS3E1YmRYOWZ0d1dlVENXWkU5cFhCZFdPOVluVlJKYXV1ejU0ZFU0b1NFYnFCd0lRb2U4Rk0xa1MrLzl3a3pYQlo1OGJ2SWxUSC92TXFRVHlBQUVxeS9UMTlIRDRqOCtIZXRZM1JFYlVVUmxiQ254a1FlUEhYbmNYdFNTQ09oV3lpY0pNU2dmL0JVNUxOdjNPOVdiZVRqdzJXUmYvMURTZGFLVXdVT25ndlhmVFgzOG5tUnMxL1VxNk1KQ2QxQXJwSXdGRGdQRVhCMFJFbDI5SUFqeHMzNzd2anBZODY1MHR2VFdyYk1ucExXZmZtOGs0cmZYaFVaKzZuOSswcElhQVdGVUVkWjRsZ0NYajZ2NmlOTHVjY1RUbktOanFoMEROWEo3ekZBVlQzN2hjakZjNDZJMSs2Sy9QeGJkdGdpSWFFVHlKMkVyTzVOMVVSKytNVWRZN1VRWmVZWG5CUXNEWXFjUE5LK3FtaWw1dEVEUGhHL3ZhcVRRbEpGRTdxSjNFa0l6QytvYllZUVFzZ3VFeEc1L2NoSndZUDdOT2plTGtLNXBJY3FTa1RnaDE5MGNraEVUT2dXQ2tOQ0p0Zm9pQWJSN2NDZnFvbjgrb2QrWmluWWpxcG80MzhBSk9MbDgvcTlOaTF5NjJGU1J4TzZoMXhKeUxGQVN5NjJBVUdVV3crZHBMeDRyajRtMk02MTdUWHdPbkZZdmE0aWFoOCtubWovV2drSldjaGRFdmIyYUREZWtzdkc1eDVQdUhqaGNGbWsvR2xucmgzenB2YjNhZkFlOXVFUHY3aUFmNmVrNGthUXJxdTVCN3Y4TE0rMjVJbmNTVGhWMDNReWtUQzVza0lTc2ZXRHF3RVRjZmN1dFR0RmRKS29UcTZ1N3F4Vi90WStiVFJBYlpsTzNIOHIxN2ZYakozRHY3ZmJ4dGphMFBrRjk0clYzYTZwc3BhRXpuMFZ4Y1FMSndWRDVCSVJ1WDRuSEpMb1ZqQ2RKZVBKSXk3bjlPWjlQOGUwMlhRMmV6Lzhsd0diTjRXdno0T04xZmJadWZDeUxENW5jY212SDkvNU14L24rN1g5aWFWaUZ2MTkyZUdia00wZFc3V1NkYTZ0QTBDU3hkc1prVFBIZlM4Nkk1YnpHeU1aYTBaWmJlb2tjaVhoL0lLU1VFVFZ2dktuOWJQZTRsTFlHY1BvUnNlZ0hYdEtLZzFyMC9yQVg3MzJiZEZHUkF3OXZPcWtrK3cyWHpVa0xhZHFhZzlEWXhEUk5wMDg0bFIzNFBvZDE2Zk5nRE9ON0gwZ2IvZk5UUGpjeWxBOFhkRGVRK3kzMFAyR1NHZnJtSGpoSnVZZDI4TEo5cGc4WW4vUkVHcERMRTJ4bTk3eFhFazRPK2VIR3pBcmMwZmNmdVFrNVpuamZrZ2l0TmF3azBDZCsvZXFQVnFiMW9lUFFkZU1aNVlkUHZqODdLVzc3d3RuNCtlQWdLZkdYQjl3TXNHVDV5Sy8vZWphQXdkWHMwdThVQmNRbWpDeWxveU5WN1VPYm9PRjlUemIzK3oxc240TG9UU29KT1R6NWhkMDNQejZoL29Zamg2b1Q4anYxUFU3Z1Z4SnlETTJTemk4djNydFMwRWJ0b2lwRGF2dFFQdVEyRTZkK2VCZm85VnJMUzQ1eVRKY1Z0VVNDQkVXSHVIU29BNm84cWM2ZVNIZjlkWkRmNEV5eHpoRi9PVmZsOC83QTNiSE5xY09XeFZZeE8xV2dMWmltZGk3OTQ3c0NPRndHeHFwYnJaY0k5VTBsRXcvODhHVjRUNWNYbkdyYnBpZ29YRVRhMmRNZmM2NnA5VWdOeExHT2pJMEFFVjBjTEZhRVNOQ0p6ckoxckY1a3c3Qzhhb1NhSEdwdFgraDR2cFkrdThjMExwajBwUUorOG1BenVnaWV1M1R4K3JiczNtVEt5T2lFZ0VaU0pqRVFqWTMrdElPZG11dmM5MDd0cm4wUW02REpRM2JrN0hueCsxRkgyM2Y0dXhPUzRCWHIvMStBU0FGY1l5VE9heEVEdG0rRmx5bTNYaDBNOGlGaExnWmxnZ1dvWkJFekVrUUFxdTJJczJmRjZ0cjU1OFArKzJNRGhKZWpkL0lKdVRqdkFmT3dOWnNkZG82YlZDT1UvZVl5TGFPMlRsSElxajdJbzBuS2h6SEpHbFZQcEg2NzN6dThvcS9BNEtJa29WM01yQXE5NjJIT2g3ZUVybDJEamk3bC9IdXZadklLa05hSDllQlkwK2VpOGlmaWZnbmoraDVOKzlydmQ5OVZmOE1VWWVJbWlCd3duVlRDb3JrUkVJTUpIUTRCaEpnUXhKdlozUmRZYk9vREttM1RFVEpsK1ZjeUFKNzN0Z3U1SFkyZ3JWeG1ZU3NLbG1uQW1iZnlwQU9xdkdxU3hpQWlobHlWSEU5ck80UGJQWGIxV2p5WUlraVVxL3ljZDJWSWZmODdDSnNYcTg1WHRYejRBekM5Vzg5REpjWDhlM2VVSnZSaHhNdjZoZHFRMTFHUDNHOSsvYzZ5YzZhRityWXY3ZDlrNk5WNUNvSlF3Wi9iNDhtVGZQNlBuUm1NeWdOcXJNREhWZWRySDg0clFDZU44YTc5NzV6cGxrc0xtVkxsMUJkbFNFdFc1dFc5UStmZVNlQWtQTkR4RmYzN1gwMGF2ZnNuSnNrOFgxMnptMnVoVDdsRkVPMngwVFVCcTBNS1lHcms5cis4YW82VFRndmVQOWVmV0ZYUEZ6bnMyK2N6Ym1uNU5vY21zZ3FReUwzcnZnVDFKbmo3dmp1WGVHZCtFRHNWNi85ZXdxdHpPa1djcE9FREo2bDdVcUtWbkhtdU84dFpJbmFLa1pIZkR2SW9sa0NXbStqaUtwYmJBZmpIUktRUFh4MkFycDNSZFZ6VnNORTZsVXNTTElRNFJ1QkIyeHRXbVRvYy8vNDZJZ1NCKzBROFFmeXZTdCszeDA5b09kY3U2dFNDNXFLU1AzK1B2MTkrZ3paRG1kVkhGS1lIVnQ3U3ZwNjlsSy9mekxnYitJbG9uMkFTUXozeDFJUWZjWGFSYmRWVVpHY0pXRUk3SXhwRmNObDdYaGNnNVBDV3dXck1ERzA0b2xkWHZHOWpkWXB3eXJwL0lLcTMyZzdiT2J4cXZiTmptMXVjRUVOS3cwcUNZRlhyOTM1SWNMam1qRzhlMThmRnVIbnd1b2Myb3lCTEtKdFJISUJ3T290SERtNGI1Ujk5OTRSaE0wVklPVFk0amJ3TmF5SnMzMkw5a1Z0MnZkeXMvK0JKM0ZnUTZxanVDbk1Tak1mbkJxNkd0V1JWOWh6ZUtNZGhCNkdSVE5HTzBzM0h0anNsTEgxOGVSeCtieWJXRURNVTJNaS83bXBnd3hTNGN4eGY5Wm5TZGJJQ3h0cU02dXlDSTFVSjFWTFFmWVFTMEVSUDVuZ2xOa0RTTVRkTzVQbndkUEdlOGV5ZmNhd2ppMVdvWm00QUR2WTROSGR2TWxwUzNZU3QzMGlzc0ZDRkNKdVZoSnhOems2b3U4RFcvMkJZSCt6eHdlMnVuZ2VIQ0FIOStuZ3RPZXdFd0FiQXR1NlRod09TN3BRY0xnUlVBOVVwZEtnMmpCOFBzcHdoaEFHQlFiNmhiTk9HbDY2b1lPVHZZUmNUOGdMYTl2RTd6YXN3S29zeUhiMGdONERzb2ZnSllhVXg3TWNMdXRnZnpQamt3RjV1Q0FWVEE4NFR6aU95WFluZm9zNXRnQU9xZUFhUEFreXNVQlczcVhCYnBOaXcyQWJLa1FoNHFzS21KVU9WZG8zaU8xZ0R0WFYyNk5iVmdBSDkrbldHYUVPdHNGcnRqVnNUTE5SdTZCdWNXekwxb0Y2ck1yS2ttYjNMaDJvMzE3VkFjcU9CTVREY0QzMlh0ckJtdFZ1SzFFNHRDSGk3SGZPSHJKMVZZWkV2ajdsaDVSUUI2UVBMK0lPYlZjSnNwVUdmYzhzVDJRMkVCOXplbkVmcy85aGRzNlhncUh4a3ZXOVU4aHRGUVhjN3lJNkU4M08rWU1SbjV0OWhlcTN4MjJ1Nm5kZjFYc01lZGJFc2NVbFg5V3l0a1lXUXFxU1BSZFpNaUwrZ0h2eVhLVUY0OFJoUDkxc3VPenVBL1VzTHJsclFaSmxJZVQ5dFdvejJvbG5KbEtmYkFIYmRlS0Y5blZ2ajl0cUVuVnd3ampiZGt4QVhyek40T2RnSnpMN0hIQXNGdEtBMTVYVEI3c3A3YktRK3lvS0FHNS9xeWFKdERZRFpYVWsyMXJXaHJLU2xEK3pxclZ6b0Y1RmFTUlpjSCtvNCsyTXFwTVdjSGFjT2E3U3JqYXQwdUwwTVIwOENBOVl4NVVOd25ON1B6RzJFY2NzUTRpcGZIeVBzT1hmekNqWmtLM0RNYzFMTjN6SEZod3VyRjZqbmlmUDFUYkVQZDY4SDA0eXNNOGhsSElub21WdVA5TDZkbXp6Q2M0ZVVnNmxyR2FCK0dxUkt3azVCdmJzWmIycnVoVlkyNGJyV1Y3eEhUV3d0ZXlBREJGUnhCK1UrL2Y2MTIzVVhtc1Bpc1RqbmxDVlRoeDJxd1R3WXBRR2xWdzRkdjJPYy9uMzl0U3Zvb2o5MTBhbzdZdExZVlVXWmRuRHlIWmhiNCsyR3pZM1h1eFpSZXFjaUJMbzRqa1hDK1FZS0xZV0dhLzZUcGxZdGhIYWg0UUtFYmN6T3dpRzU4RHRSMSt5UFowSGNpWGg3bDJ1UTY3ZFZiV3EyZFNxTE5oekY1ZjhUYVRZQUVmNW1PVGw3QjFXN1pyMWxxSHUvWHZyczFZc01CajYrelNycERycC9rY0RUZzc4cTlUMkxUcmI4ejJpNzNac2N3UFpEakE3U1lYdTQvUXhQUS9CYzhibVRlNjRSWCtmUHNQOWU1M0hVMFRiZmVhNHk2eGh1LzNlRlZkMjU0QVM4MUJGcjEwWjhsWHAwSDB4UXZYWmNqWVZrSGR5c1Ayd1ZzaDlCKzZmZi9ObnJhOVA2ZWRXWW5DTnl2TmVwcU1qOWM2WXJGQ0RQZmZLbUM5Qm0yMWpWdG1ZUk1ZeGRtNkU2b2pkUjB6Q2gxTGt1SjdZK2JIN2lOMGJFckpERTZ1OUxpYVJSblpaTS8xdTY3TnRRcWhudUN6eTczLzZkZWVCM0J3ejZHaDJOUHo2aDcvcW5Ndmhjek9PRUg2M1dUTzhRNXQxeW9UcXN1Y3lXclZWR3gwTE9abEN6bzFRSDRUcXNQWEZ5dkR4MkxFc3hNcHh1N004amJqSFpweHlzZXZaQ2NUMkZ6elU3QmZnOU1ZOGtaczZDaUwwOS9tT2lOdVBWQm95VVVLemV3aE1RSFN1M1VveEs5ZlNnbU5JdzJWVm4vT3lHNENRRkdna1lWZURJZ3pTMVFERWcwclBZNEVYaU1mOEFXdUIzTlZSRWUyb3Y1MTJOdHVMMzhOa2FhYURtTEM4S3QydUFNK0tDL2IyWkxkcHZRL01qd24yT1lvb0FUdmxmK2dFQ2hHaTZPOXpuaklSbDViRkMxQ2JqY2Z4akJiYXB6U1dCY0cvWXprTzd3YmV6cXFKaEh5QlozdnhuUE9zOGwrbFcxT0hzWmJQT1ZkSmFOWE1zWi84TEJDc0NtakhBVEpWYzVuLy9OZHB6WngvL1k3LzU2T2hjNU5FTEQ1aXpyYVl3d20vcmZXekxjUU8zTGpwNzc3eWQ3MitkTU5sWHFDY0JZeHVxMHBldU83SzJKQ0VQWWQvWndKaWJXS0l2Rmx0U2xoN2hKNWxxRXlXZjZGVmgxU25rUHZtdjZ4Q2J0N2s3M3JOUkVUWlp0U0c2bVI0bjlJczcrcjhnazlBa2ZoVysvWmhKaFFML0d4aTN1RWlhVEs1a3hCQXgrMHBxUU9GaWZqbDk2cGV4bUphSXE1all5RUpsT0h5K0Q1VlU3SXpBYkVvbFFuSEtXcEZlWUFKaXRpempaVnIxc084RmlnTUNabGNJQ0l2WmgzNlhDVVZTMFdVNXpwc1NBSmhoZERzT0wrZ3dmaFRZLzd5SmlhZ2JXTWlYM0ZoblhqcnhWUW9SSWlDWVcwNzNyTkVSSWxwZDM0R3NrSVNqUGtGdHdzMjUyV09qb1IzOTBLN0VnRVR1b0hDa1RDRUIwL3JDWU1GdWRqblJNUW5MTzl4Z2pTbTZtUjRGVGMyQllydHl5bFNQRHNpWWVPZ2tDUU1CZWtYbCtJYkgvR3FBbnpuRmZQWXp6SzBjZ0U3Z25FUVArYlNSbnNTRWpxSlFwTXdOT0JqcW1RcmdPVGp3RzNXdFpNbk5LR2JLQ1FKc3dCSnhidHozYnhmdjJyZEFqdEFZeGxRSzl2WUp5UjBFK3VLaEkwa0pJQjlXbmd0WENKZFFsR3hya2pZQ05hZWEyWU5YMEpDM2loRUFuY25rTFhHTHNYN0VvcU1kVWZDUnF1OVE1N00yQ0xRUk1TRUltRGRrUkJvbEIrWWtMQmVzTzVJbUVpV3NORlFtTnpSdFVZaWMwSlI4TkdTTUNHaEtFZ2tURWpJR1ltRUNRazVJNUV3SVNGbkpCSW1KT1NNL3dQQVZEMElwN0JIdXdBQUFBQkpSVTVFcmtKZ2dnPT0nLyUzRSUzQy9kZWZzJTNFJTNDL3N2ZyUzRSUwQSIpfQouaGVhZF9sb2dvMntiYWNrZ3JvdW5kLXBvc2l0aW9uOjU1cHggY2VudGVyO2JhY2tncm91bmQtc2l6ZTo4OHB4O2JhY2tncm91bmQtcmVwZWF0Om5vLXJlcGVhdDttYXgtd2lkdGg6MTYwcHg7d2lkdGg6MTAwJTtoZWlnaHQ6NzBweDtkaXNwbGF5OmlubGluZS1ibG9jazttYXJnaW4tYm90dG9tOjVweDtiYWNrZ3JvdW5kLWltYWdlOnVybCgiZGF0YTppbWFnZS9zdmcreG1sLCUzQ3N2ZyB3aWR0aD0nMTM2JyBoZWlnaHQ9JzEzNicgdmlld0JveD0nMCAwIDEzNiAxMzYnIGZpbGw9J25vbmUnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycgeG1sbnM6eGxpbms9J2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsnJTNFJTNDcmVjdCB5PSczNCcgd2lkdGg9JzEzNicgaGVpZ2h0PSc2NycgZmlsbD0ndXJsKCUyM3BhdHRlcm4wKScvJTNFJTNDZGVmcyUzRSUzQ3BhdHRlcm4gaWQ9J3BhdHRlcm4wJyBwYXR0ZXJuQ29udGVudFVuaXRzPSdvYmplY3RCb3VuZGluZ0JveCcgd2lkdGg9JzEnIGhlaWdodD0nMSclM0UlM0N1c2UgeGxpbms6aHJlZj0nJTIzaW1hZ2UwXzNfMTEnIHRyYW5zZm9ybT0nc2NhbGUoMC4wMDczNTI5NCAwLjAxNDkyNTQpJy8lM0UlM0MvcGF0dGVybiUzRSUzQ2ltYWdlIGlkPSdpbWFnZTBfM18xMScgd2lkdGg9JzEzNicgaGVpZ2h0PSc2NycgeGxpbms6aHJlZj0nZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFJZ0FBQUJEQ0FJQUFBREk5OXB5QUFBWVRVbEVRVlI0bk8xY2VWeVVWZmYvbnZzOE13TUlJaWppYm9CYjRwcTVwcVpacm0vV201RzVMNW5tOXJybGJscW1tWm1pVXFtWldocWFabVpacVpXV2FZdHBwbGtxcmlnaUtJSW95amJ6M1BQNzQ1a1pCcGdOaFY3Zlg1N1BmUGd3ODl6bDNIdnVPZmZjN3puUEpXYkdYVUE2RStUd2xWeVcvVWVRK0c4ellDTm1BZ05nUURMSUpxcC9MS24vYlFZQWdJRVA5bngyS2lVUmtBMnIxb3BxM2hHZ2Y3akczQldDQWZEKzNzOS9qUDhEb0Y1Tk8wYTE2SFRQbE4wMXBveUlRU0RTSmZJUGx3cnVIc0ZJdXc5eVR5WUE3SUs1ODUyV25YMWxaNC8rNTRoTGNBZ3VHeFlNTUlQdXVHY3E5SlZ0L1hxcEEzb3hWVkc4NzFSNlg5UVQvVzJyaC9OSm1sd05RU1VnUFRzajE1S3JhdzhSYWJKQVlRWVJtQVFSQUhhd092cFRYNk1wd01kZk1KanlIVVRNRm5ONlZvYUFZTEMvajcrdmF2Qk9SRjRWMHFXKzkvaHZacmJvZFlqUm9sWURQNE52MFl3aGMxcm05VlBKQ1EycTFQUXgrVGl0ZXZaeVFyWWxseUhMQlFTSEJwUXQ3Qzh5WU5Zc1p5OWZ0UDFnbTBBU1JFU2dNdjZsaGEwYUVSa05CaitEU2VpYnFndjNVMlh3K0RVTFlnL3VCRXNpZ0lraEhaeFZCc2gyL0NPdzdTQklzQnVxTWUzN3ZONW5ESVFvME1QZXVFUGQzaHpOeE1UMDNuT3orcmJ1NXMxRWVVbTZSbTQ4c1BPOTd6K0JJR1lJMEtTdUExNTVlcVFvaW1TeXBYbmdzaG5IRXMvdG54UHJhL0lwWE1Bc0xWRkxKdng1T1I2UWt6c1BuQjAxTXQ4Q0JBQXcrSytFTXkxbjkyTUNNNE9JbUJpc00wa01Bak9SOVN0eGtHL3ArdFZxdGFyUnNHZkxUclVyM2xld09RQ0FDcEJHVWhNU0VBcXdZc0MweWtHaHJ1WUNoVlNlZ09vaFZRdUxuUUFHYXdJQVFUQjc3V1FJcTZLVHgrTS9BUzgvUFh6Zlg3L0ZYYjBBZ2lSYXZHTkRoL3F0SHE3VjJOVXlMRUNTNVlwdk51MDZkbURqbUlYQmZnRk95ekJnWnBiRXhFSUtkc0VVZ1ZqVEo0ZW9mVVNqS1U4T0lVZ0J4VDRPSFdIUkpCK0pQLzcxOFY5L09ubjQreE1IRm01ZjI3MVJ1NmxQUFg5L2hlb0s1WnNqNnptR0dBUVlTR2tmMmJ4NmNBVnZScFdQZTRZc05nL1A2L1ZPQ1BFTFd2bkNLeDFmSDU0cHM4Q1VqWnpSYStaK04yTlZPZjh5SG1zenNQL01IN08yTGgvWnNXZlhCcTNJOVZLd28xYUNoRGNTTHg4YzJyNXVNeXFzV1FDQVJ5S2JqKzNhNzNoeS9JUVAzOXg5OHVESHYzMzk1Ujk3WXZwTzd0djZjVGdzS0p0WFJtQUNTTkp0UVdkRVRxUnllMzZ2b2hSQnZrUm9HaFk1dmxNZndRcEFnSWhMU1pqOXlYS05QYmdGREtUY3ZENWl6Wno2bFNKZWVuSVlFYkh0Q0ZXNHFMUzF4dXpWd1ZkQUN0ZXpTQVNGUkdTRjhFL0hSWTlwOXl4SVpKbHpocTJidS9MN1R4eHhTK3Nza0w3cUdSNkg1RDBwUXJIMnhPeTlrSnl1TWpja2lDWjJIOVF5ckQ1Z0FTQUpxL1ordHUzUTkrN0JXVTFxRXo5Y2NESDE2anREWmdiNGxDSzNDSkI5UHpXcEJtK2Nad0hCNUhJZ0JJQ0lCUGthZk9iMUh0T21aaU1HekZLYnRIN3h3WE4vTVRPRHVZRDVZVVlKZ2MyQ1N1b2t5NEN2YW54bnlMUVEzMkFRQkNNSDJyallOeFBUTDdzYWltVCs4S2N2UGoyNDYvWGVZK3RWRFBmWXZyMFpSUlRCbGZkSUJCaUUrdnF6LzFIWkFCYTNPT2ZsemNzdExBa2c1TitVaVVpSTRwdEJ6ak95WHU3R3QwRUVFRkdkMExDWGU3eWc2a3VWY2ZIR2xmSHJGdWllZEVHbWdCTkpaeWR0V0J6VnRHTy8xbzk3QTViYTdaY210V0pFSm5TUk42NStmOFA3YW9OQVRQdE9INzUwN2JLK0R2SUxCbFJVUytLR2hDSnNWb0J1WldVV1Y3Tk9pWWdHdHUzZUxmSWg2S2FZeFdkSDltMzQ4U3VKZkdyRGpOU005RUVyWmxZS0RIbWo3M2lqVUx5Skx3amIrVHZYYk5aN0t4NmVBUUlVaVBhMUd1dXhqaXd0OS9mNEV3UUNxSUJnaWhkOXlJTWpMVklydm1hZDkyUlFEREhQVFEwUHFnUXdBUnBwRTJNWG5icDh3WEU4a3JRM3RxMDVmU1ZoeFpDWlFYNmw4N2gwUzV4M1R2ZUtHYTBvZ3lXaWh1RjFiTWdMWDdseFRSZEIvajNHKy9hS1NNVnJuWjBTQVJWTGw1M2ZaNEpScUpJZ21LNmJidzEvYjI2T0pSdUFCbWJtenc5Ky85WjNIODM2OS9CbVlaRmVXbGV5L3lreFVraXhlUmg4TXp0VC83L0FqdUxDWmJ3RDBuVXdzNFJObVkyb2U2TTJROXM4UlF3R0pJbDlaMzlidW4yRFpCYU1zNm1YUnExZDBMVitxeGNlZVpyeWtBc1BwTHVWUlVONWlsZ3lWOHUxN1N2a1k3U2lEd1ZNV1VrRURva0laczNKUGx6c3hJQ0FlT21aRWZWQ3d3Z0FKQ0RlK1BMOXd3bHgyYms1LzNsL1hvRFJGTjEzc2xFMW9JaTdhZEZzU1pGS013NmMvdE9HZDFHMTRGQzJEcVFnL1kvSFF3akJQcVhlR3pyTDMrQkhMQm5paHZubXNKV3pYOXJ5OWc4bkQ4VU1uRlFscUdpNHhtMU1oK0lkUUs0N2U5a3k5NXUvOWpQQXpLVU1QZytHMTlVN3pTOFljdGpvL2t0a3VRUGRzazlpNCtwMUpuYnRMd0JBQTVRamwwNHUzYjErL0tOOTJrZTJ2STBJaHplNjViaGpzWGVIZE4waDNIVjAvNmtyRndnTW9vNTFtNWN0SGF4anhyYVlQd09BUldwSDR1TlNiNlJiZnlQV3BEU2JMVVpWVllUQ1lOMlJGMElJb3JxVmE1Z1V0ZVFPS0hkQ1JHSjh0LzQveEIzYWRlSUFFOEFDRWcwajdsZW9JQVR1WFhQMitKSzN2WHRPd0dJd09DMHJZOHI2YUVrQVNUL0ZaOG9UZ3cwMlA5a3FHUDFjSmlGN0w1dXFRckhWQlFCbXRya0VaTk1uRXFBOUw2MkpyQlpSWE01V2NZdVhUY0lRTTNCcSs5bURrN1BTQVREeCtOZzNtNFhWclJ4VW9XaHJpWW9NVzNqU0dHWW1KazY1ZVgzUU85UGpVaE5Zd0NBTmIvUWMzNmhhSFh1aFBIU1pBUVcwYmR5UzJwWENyRDg2cEVVVVNNZ0RFRlFxOExhV24zTXFkczJUNENwQjVjTkNxMXcrbHk0Qk1GMjZmdVhGOVl2V0RwOXJWQXpGMjFjQjBqUVBBRUdPWnQ1ei9NRFVqeFlmVFQ1SElCOG9zLzQ5OUxsMlR6cmFURWVOWVlDcWxhdFlxVXhJc2ZGWWhEUWtBa2xBWVdzMTNJa1c2U3ZxclowYkRpZkUxYXNZZmpUcERBQkFiUDE5ejdvOW53MXEzOE1yK041R01rOER5QnZla205YzNYMzhvQUlwSWNDc0wzREpuSjJUOWZQcFArSlRMNTI2ZVA1STBoa0pDNEVhVktyeFJ1OXhiZXMwVVF2SFk4Z2FtaXp1RXd5ejkwMHlkUFNFTFZMZStYR0ttWDQ1Kzhmc3oxWk82RFJnV0tjZXJXYjBUN2g1R1V3V2tsTTJ2ZDBrb2w2amFyVzlQUm5vc1hUcmVtRnZkcHQ5Wnc1MVd6Q2FvQWttU2RLMlRvU213L2VDd1BCUlRWM3F0KzdackZPWEJ4NzJWWndFM1VzdzRVOXEzaUlURE5ha25qTkFRck12c3R1bmxNejA1OStiM1Nxcy9vVHUvWDFVVTh6Z0tjL0VUTTVsaTJCS045OGM5Y0c4cnlhLzQyOHM1WTBwWmpCTGFZM0k2cEM4cDFxZElsdEg5NTFJQWtTS2xCS0FJRktGK0dEdmwzTzJ2YXRIbk52VWVDQjI1SHlESHVKMFJpVW9HTTNyQ0lJQVJmZDU4ZHF0ZElCQ0E4c1Z5YzQ0RWdQRWJHRis4WU1GYWJmU1B4Ky9wSlJxQXFoenZWYkRIbjdxcmU4MlNsSkFsdjNuajcyNmVjWDhYdU84bEQrUk5ldEJrUHZBalpXQy9FcEhoRlN4VjdNYUk2Wkpqdy9ZZi9Md3poUDdJZVN1dUY4My9ieXpkOHN1cm56eEVrejRLOUorM2pRaXNtT0Roem8yYU5Xd2VxM2I3eEZnOE1ydk5tLzUvYnZvdnBQdksxZFJuMGxCWWxiVThIcWhZWUkxSVFVQnkvZHMzbjFpdjVldEZ0VXhJVDM3eGNxUlhwMklZSVE2KzVsUnBWUWpKQ1I0eHVaM2tqUFNYQzNlRWhTTUxSYjN0eEV6K01pbE15OS9zbXg0dTZlam1qNUtKT3dCdzlLbVVpdUh2ZUpuTURIQWhCeEx6dWcxcnlkbnBIcVJtc2JNZHdxNjY0SWxRWTJxMXg3K2FFK0FpSkY0L2ZMMGo1WktGNzcxM1pJaVd4eEVON016aDczN1NuaElsWmxSd3dYc2FWY0FBT1lIcXQwLzQxL1BDWUFrbU1TWnRFdVRZcVBOOEF3ME1EdFBxN2dORXFBSlhmclhMRmROUDh4cy9QWHJiNDd0ZHlwemE1SmZTWUNYd2xWNlEzR1RQakRKY3RiR3R5K2tYWHAzNkt3QW95L3k5MDVFUkJqWnVYZUgyazBKWUNJQUh4LzRadTNlTDd4QlVEekhiQnhzZzN2bEN2WXIvWHJQMFlvZ01PWENQT21EaGRlemJ4YUd3Z1JLek9ZSUlmNjJ6RlBKY3R1UkgxYnUvZXpWSHFQcVZZcHdXb1lCWDlVVU0yaHFTRUNRWU1tQUJqbGo4OXVuTGljVUx6UHU4eVpJVUxkR2JaOW8zRjcvZWp6MS9KTHRzVm9oazFxeXB1enZFUXNCNTlPU3hxeVovMlRqaC91MzZlNnFVMzNWaDRkVW52ZjBhSVZVQUF5Nm1wazJjdlc4Ykl2NVRubncydVFRU0pDWS9mVEljajZCeEFLZzZPM3JqbHlJSzFCTVFGL2FKV0J5MkpvV2lzSjZlaHVVbnBteDU5akJ3cjlMY0pZNWQrVHF1UUUrZm04T25HaFVWRS9lTnZWczFTV3F5YU8yL0dkbHorbERpNy84ME5VbURJQThaYThUSUlzeVJDS3FGVnB0Yk9mZURDbFkzSlNaRTlkRjUyaG14M215bXpMdm0vV1dpakhoUmdKSDRrK01lSDllWVRhSmFmSDJ0ZnRPSDRrWk5MVzhYeUFBOTRwS2dFRW8wUU1uMVN4WG1Ra0NZTUxjTDFjZWpEL3VvcHBYRy9CdHBIMk42dGlyVWVWYVVtakU2Zy9uRHEzWjg2a2o0d1hqTWNWSWVkcE5JTHFqRnoxMEdJUUx0U0hCUDhRZG12L0ZxcWxkQjdXdDNjU1dXK0pwR0VSbGZRSVc5WnZzQjFWdk1WdkxIYkY2VG5wMlJ1SHBwUkxMdmZJMStyelpaNkxDMXJqeEsxdFdITDEwMnE0aUtzQ0NpY0FFbHBJbmIxcGloQnBjdW94S2dxME11ZEFuRzd1WldiZmVHanpOcUJnZDJkZVJDOEZTRWdDcy9tSEw2YXNYZElXM3QrclFsQ1BjU1pRL0Y1VUJ3VGg3TGRteGMvMTUwdldVa1d2bXRJeG9OTFpiUCsvUGdmclJwbU85Rm1NNjk1My8xUm9Xa29FalNYSFRZeGZIREo2dUZGcXNDcEdBeHJCNjJnWHN2ZzQzTUlOc0JvK0p2WUdWaUtoTnJVWURIM3A4MVkrZk15ZzE4M3JVb2dtYnhpNnNYNlVHaUZTQUlrS3J0d2h2UkdEQnVKcWVKb2t2WHI5c0g0Skg4aVVmSzh6blVKd0lma2EvMWpXYldDRUp4dW5raXdBeFMxMTdIRThHdHQySWJSRWdnRURNUk1RTUNDdkcydlMrdWc3VHhReXMzN085ZkdESU8wTmU4bFZOM3JEcVNBSTB1ZnZBazhubms2NmxFQkVSeHlWZE9CcC9zbEZZSGNkaUtpbEQydlZJdXBZaUNVMnIxcVZDWUs5K3dnLzA4WCtrVmpPaENBRDFLa1I0QXduclh2dWNxRkhKMTFLdlpXY0FKSWluYjF3NnNjdkF0bldiNk1MbXZLTDJ2b3BBQmM5ZlZtU2N3YVJINEJ4LzlzeHV3WGJ5UWUzaytGUXlnL2xPMGtmMXQ3Q3N5NExkR1M3dlF4SDJjWHZXR3JZbjRGaWIxNTBsQnRHZEp5c1hmOENnQ0oxYXdkN2JZOEFPNGpzYTE4Sk4zY1lBMllvNzNDWmZ4U09ZZTFRUzlQOEpLL3QvUmZjRWM1ZlNQY0hjcFhSUE1IY3AzUlBNWFVwM2tXQ0ttSXA5cDJWdXl4bjEvZ1dCT3kyaldrczVPTnhGVGVxeTkwR0ZmZ0dzVHJublFKUERZWUs5eUYvS2Yrb3NqS0Y1QmM4NGdVUTkxQ0RZams1dWdwb2VrODkwS01UcFl6dExLZ0F6YTRCUUtOOHpzbjY4QUZZbFcxZ2pZaUxCRE1DR3J6QVRrVmxqSDBWMVAxSE1iSkhtOU14YklGS0ZLTzFiU2tCNG1GdG1zMmF4c0FiWU0wWWRZb2pNUnNXZ0NKYzVRSkpaZ2dzSENOd2YvblV5UzB1MnhlSnJNQnBjQUE2U1pXWnVqcS9ScUlEZ05MMldPVmRLUlRpQjl4aVFVa3FwcVFEZS9lYmpOWHMvVXhVQkZnQUxFREdFcWtSV3JkRy96YjlhMUdnbzNBcm82ejkvbWh3YnJRaEZWUlQ5UFJoVlVabFpTcWtvNm1QM041L2JlNVRUNWFFbmFxWGN2QmF6STNiSGtYMlgwOUpZSVFIVXJSejJkUE5PVVMwN0JacjhYSWxIRXJiczN6VnR5MUlEcXlESk92VEQxa3RYR0dKczV6NGpIK3ZwaXVmRTlDdFJpMTVVQkVNbzBERmNaaENGQnBkOXFzbWpUelI3eEU4MU9aMDFBTCtmK2F2dk96Tm1SZzN0MStweEhYc3BVQ3orYW1LMythTmVldUw1M20yYzM5SkNoSGUvL1hqTjNpMEdHRmpvZ0tBTm1TR1dVdlp1MFVVRmtITHJHa011ZSs1bGxWUUNTNVpTb2Ywbi92ank4TjVPQzBZc2ZIYjhrUFk5M0lUU3NzdzVjVmZPZnpSbWdjT3IyWG1GQTN4OFhlazBNV1hrM0hwMjZjVHJtYmRlZTNiY2cyRjFCSW0wekl6WS9WL04yYnI4ZE9MNU9YM0d1bHJ6QXNpVjV1VDBxMXZHTGEwU0dBTGJuU0JnSmtVaDVncGx5cmxpR0VDdXhYdzgrZHo3dzE5dFZLMjJmaWRHcm1hNWVpdDk5OUZmSm42MCtLUDkyemVNWGxES1VQQnFHVDFpOWtETmV1VUNneFordFM2cVdVZVRhaXF3Q3hDd1pNZjYxRnZwYlJzMGM4UEF0ZXdieDVNdmZEWHg3UW9CWmUyR25BQ05XRWdFKzVjQk04L2FzcXo5cTRNdExEay9aVmx5aHE5K09mU0Y5bGR1cExGcjJucmdPK1BBcHNjU3o3b3FvTG11dS92UC9RRkRtditaZUlwWjVuVXZaV0phU3NyTkd6cEhCZG15RlZxNzUzUC81NW9ucGwxeDhzejJjVVZuVWk0R0RXbVRrSnJrMkw1a3FVbTVOKzczb0dGdFYrMysxSG12ekN6NWt3TzdUSU9hZnZMckxrM202MFJqZVQ0MXFlS29SMGV0ZWEzQW93TE56TjY2d25kSXM2UnJoWm1YK2xRSU9FS2MrY2tvREwwZjZwNldrL0hqeWNOdWhBOXJDTXNsNk9iSzgyUHdwZlFVUlJpQ1N3WHBPNFUxZjR1b1lwbXlaVXNGdUFFQzlRMVlDdUhxOVVpQysxZVU5Q2hEdmoxWUQxVzJxTm1neVgyMXZ6bjJzOU53TWdFZzd0cTRkZjNLTlJmdmpIVjhHMXZ2N2NPOTIyNW1aWTdxM0ZOM0ZOeHdBSkN6aStLc2NUT2hQNWNPc25Fc2V2SGFaWk5RSTBJcXUybGVrajBmamgwK25vbVltdGRvSUlDSnNRc3ZYVTloNjZVUVFGNFF6cDN2d1dCRjZnYTY4TWRUWlhzYkJWZ0M1WnB6THQ5SXZiOVNPTGtjQlJtRk9yWno3NFB4Zis0K1prL25aQUxTc3pKV2ZMdTUxME5kSWtLckMwK3VKYkY5bFBrNDEzdFZyVTBTU1pzSHFJZG5KUFBSaTJkbWJWbldwWDZiT2xXZEp3VHBwQ3ZFZTN1MlZnMEtkVmg5MElEcVpTczgxYlNEYTlZUUhscDE5ZEJYSm40VVhXZjhFMTBmYkZ1dlVvMDJkUjU0OEw3N2ZZMCtIak8rbVNnSDVrWGJZOHNIMk85YXNtcHRzeG9OMnRkdUFyZE5NR0J4aU0wU0lNR1psdXpKRzVkY1RrL3QyYUt6RzRlSGlKNTg4SkY1MjFZdDNyRytRMlJ6VmFnRVNNaTFlN1plTjk4YzlWZ3ZCWXBIMEYrRDl2YXVqWUcrQVFwRDJpOS9ZdFN2VXVQUkJpMnQ1NWdqQ1hFRGxrMDNDQU1CVERJbk4vZHNTdEtscTFkNk5HczM4NW5SQnJldlZESEFoTGhMOFdrWjE2eXA4TVFrbVVsSWk4VU5mL3FqeHg5bzE3NWVpOTFIZjk1NzZ2QVBmeDFZOU9XYVFOK0F6ZzFhejM1bVJJaC9zSnZCRWNBczQ1TGprOUw5SEp0a29FSmdPYTdUeFAyOFdLQ05XRFdyYXRuS0FQUTdEQlBUVWk2bEpGY0pyckJ0WWt6TkN0WGMxQ1hBMStRN3FtUHZDZXVqZjRzLzNqeThQalBkTkdjdCszYno0NDBlanF3UzdrMHdoc0Z4aWVkODdMZlhXZU8yS0JjWXhDQlY3eWJRTjZCSmVLUkpNUUtjWmM2TzNoNGJWcmJpYndzK0t1Y1RTSjdDZ3lRRU1iL1JhMXhkMjZ0b1hwSXR4aTlLbS95ZWZMRERFdzkyTUV1WmFjN2NkdkQ3Nlp0amppYkU3WnoycnAvUjErbjRkUGtiaExwODBQVEtRZVdMMUsrMUJhYjdLMGRFVkF4VEFEQjJITjIzSys3WG5WT1d0UWl2YnhJR1Q3YVlCTkN2N2I4V2ZiRjIyZGVibWc2TFZFaDhlZkQ3UzlkVFh1dzIwTXRrTUlXVXhmMG5WU3JqbkhrOTd3MWg1U3FONmRSSFlkTDl6b2JWYXZkYyt1THEzVnNuZFIzZytkQXVpNG9WT05SbDIvMkVSQVFZaFZCTi92MWFkcXRRSnVUSmhXUGlVeTVGVmc1M0Y2QXRjaVorSGlra1JuVHNYU09rQ2dBRytqelV0Y2ZDc2RNK1hQTHBpOUVoL2tGZXJIZjRLcWF4WGZ0TjI3VDRlT0tBaU5DcU1WK3Y3OVN3ZGYwcU5iM253UTMzdG92a09DL1lUNkFPZFp2TjZENWs3dGFWNi9mdjhLSjV2US92K2NtajVJejB4UFRVQWd5eG9BcWxnL1NNUlZtMFN5bUtRQVNZRk5XMnB0amZWR3JWeUxtcHQ5SkhyWjZYWThuMTZMN29YdDh6clRxVjlTLzk3dTVQdmo2NjcwakN5VEVkZXhkZityblZ3anE0RUFRaThaOHUvWjV2OTlTRXRRdjNuL3VUM1NmakVoUXBjaXpaWnBZV2g0K1pwWm1sUlVwWDZZUVdxYzFZRi8zWS9LRWJmdG1SbG5sRGdoa3NXU2FtWDVtNEx2cStrRXBWeW9hNnVzQkNnc0VnS1hPa1ZxQmZDMHN6YS9xeHpDWFBnTU5yUmREWGJ0VXk1VGVNbXYvVHFTT3ZiRjZtZ3ozdWlRU1Y5UXQ0cmwzVStsKzJ2N3hsUlp2YVRWcEdOUEJPTGtTQUlwR3RtVFZtclNEL21rVktWYy9hS3FDNUJDZ2tYbnYyUHdtcFNmMWlwdTZZdGp5OG5FdVAyV3pXUU5RclpwcS95U1RJbmtwZ1BjcytVcWY1YTczR09HVlhGVXIwa0NucjluNCs4K09ZNlp0aTZsV0pDUElQdkpHZCtldnBJN1hMVjlzd2FwNi8wYzh4V1NJZmgweE1aR2F0Mi93UkpzVUJIOUNoR1lnMkVZMFdENTdpYXBZa21DUXljN0lML042d2VwM2xnNmNQV0Q2emVuQ2xZUjJmOFdLU2FXajdmeS9idFNrdU9YNUJyM0dpMEZXNlRrbGZxVG5JZldMQmFLTnFJdVJ0QmpvOEZQVkFCMkxtNVBTckdkbTNhbFNvVm1CMVN1YU03RnZ4bHk5V0wxK3BqTzBTcWNLVW5wbHg1a3FDWk03TXp2VDM5Yy9Jdk1tQXFxZ21nOEdncWdhaFJsYU9jR1ZNSlVDTW0rYXNjMWNTdmozNlUwWnVwcS93NmRMNG9ab1Z3MDNDd1BrVXVjRGcrTUxWcEQ4dW5oWkNFQkV4RktHcXFwS1puVVdBQmJKQzZlQ21FZlVLNjVzdTVoeXorVmppbVRxVncwd0dvN0RPaWZXNVpENTk1YUlpRVZhaHFzZVhEbldkKytyd3Z1UnJLZjNiUFdIdzdwSXBacHhNaWo5ejVhS3FLQWFoQW16V0xHQUlJUmhRaElnSXJhcm5sYmxDb1cwWlVsNzBCWkFkUVhCTUEvTWlrVWZIdUt6N216MHZDWG5WbmRaaE8yZ0orem1lck1QMjZCS3dEY0huL0VWdFF5QWJUMTZlVWRucXdIZ3NuVmVON1QzWi9KOTh6TjFMWDdwTDZmOEFhRnpJK3U0bTNiQUFBQUFBU1VWT1JLNUNZSUk9Jy8lM0UlM0MvZGVmcyUzRSUzQy9zdmclM0UlMEEiKX0=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPBody>
        <TcpPackets>
          <PacketInfo time="519314406" offset="0" length="320" />
          <PacketInfo time="519314406" offset="320" length="31565" />
        </TcpPackets>
      </HTTPResponse>
    </HTTPTask>
    <HTTPTask id="316" hostname="cdn.jsdelivr.net" path="https://cdn.jsdelivr.net/npm/pdfjs-dist@3.7.107/build/pdf.min.js" url="https://cdn.jsdelivr.net/npm/pdfjs-dist@3.7.107/build/pdf.min.js" ip="[2a04:4e42:42:0:0:0:0:485]" port="443" connectionId="19" origin="HTML" frame="1" startDateTime="2024-02-15T10:57:48.102+05:30" startTime="519314437" endTime="519314453">
      <HTTPRequest method="GET">
        <HTTPHeaders>
          <HTTPHeaderEntity name="sec-ch-ua" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ik5vdCBBKEJyYW5kIjt2PSI5OSIsICJHb29nbGUgQ2hyb21lIjt2PSIxMjEiLCAiQ2hyb21pdW0iO3Y9IjEyMSI=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="sec-ch-ua-mobile" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>PzA=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="User-Agent" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEyMS4wLjAuMCBTYWZhcmkvNTM3LjM2</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="sec-ch-ua-platform" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>IldpbmRvd3Mi</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ki8q</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Sec-Fetch-Site" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Y3Jvc3Mtc2l0ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Sec-Fetch-Mode" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bm8tY29ycw==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Sec-Fetch-Dest" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>c2NyaXB0</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Referer" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cHM6Ly9kZXYuYmx1ZWFsZ28uY29tLw==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Encoding" index="9">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Language" index="10">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZW4tVVMsZW47cT0wLjk=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Host" index="11">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Y2RuLmpzZGVsaXZyLm5ldA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Connection" index="12">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0VUIGh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vcGRmanMtZGlzdEAzLjcuMTA3L2J1aWxkL3BkZi5taW4uanMgSFRUUC8xLjENCnNlYy1jaC11YTogIk5vdCBBKEJyYW5kIjt2PSI5OSIsICJHb29nbGUgQ2hyb21lIjt2PSIxMjEiLCAiQ2hyb21pdW0iO3Y9IjEyMSINCnNlYy1jaC11YS1tb2JpbGU6ID8wDQpVc2VyLUFnZW50OiBNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvMTIxLjAuMC4wIFNhZmFyaS81MzcuMzYNCnNlYy1jaC11YS1wbGF0Zm9ybTogIldpbmRvd3MiDQpBY2NlcHQ6ICovKg0KU2VjLUZldGNoLVNpdGU6IGNyb3NzLXNpdGUNClNlYy1GZXRjaC1Nb2RlOiBuby1jb3JzDQpTZWMtRmV0Y2gtRGVzdDogc2NyaXB0DQpSZWZlcmVyOiBodHRwczovL2Rldi5ibHVlYWxnby5jb20vDQpBY2NlcHQtRW5jb2Rpbmc6IGd6aXAsIGRlZmxhdGUNCkFjY2VwdC1MYW5ndWFnZTogZW4tVVMsZW47cT0wLjkNCkhvc3Q6IGNkbi5qc2RlbGl2ci5uZXQNCkNvbm5lY3Rpb246IEtlZXAtQWxpdmUNCg0K</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
      </HTTPRequest>
      <HTTPResponse>
        <contentLenght>77407</contentLenght>
        <HTTPHeaders>
          <HTTPHeaderEntity name="Connection" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Length" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Nzc0MDc=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Access-Control-Allow-Origin" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Kg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Access-Control-Expose-Headers" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Kg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Timing-Allow-Origin" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Kg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Cache-Control" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>cHVibGljLCBtYXgtYWdlPTMxNTM2MDAwLCBzLW1heGFnZT0zMTUzNjAwMCwgaW1tdXRhYmxl</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Cross-Origin-Resource-Policy" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Y3Jvc3Mtb3JpZ2lu</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="X-Content-Type-Options" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bm9zbmlmZg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Strict-Transport-Security" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bWF4LWFnZT0zMTUzNjAwMDsgaW5jbHVkZVN1YkRvbWFpbnM7IHByZWxvYWQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Type" index="9">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>YXBwbGljYXRpb24vamF2YXNjcmlwdDsgY2hhcnNldD11dGYtOA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="X-JSD-Version" index="10">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>My43LjEwNw==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="X-JSD-Version-Type" index="11">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>dmVyc2lvbg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="ETag" index="12">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Vy8iNDUwY2EtdVRvdjYxVUVUa0F1N3psbFdxS3ZiaHhxZnlVIg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Encoding" index="13">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Ranges" index="14">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ynl0ZXM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Date" index="15">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VGh1LCAxNSBGZWIgMjAyNCAwNToxODo1MCBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Age" index="16">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MTY3MjMw</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="X-Served-By" index="17">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Y2FjaGUtZnJhLWVkZGY4MjMwMTE1LUZSQSwgY2FjaGUtZGVsMjE3NTAtREVM</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="X-Cache" index="18">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SElULCBNSVNT</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Vary" index="19">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>QWNjZXB0LUVuY29kaW5n</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="alt-svc" index="20">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aDM9Ijo0NDMiO21hPTg2NDAwLGgzLTI5PSI6NDQzIjttYT04NjQwMCxoMy0yNz0iOjQ0MyI7bWE9ODY0MDA=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SFRUUC8xLjEgMjAwIE9LDQpDb25uZWN0aW9uOiBrZWVwLWFsaXZlDQpDb250ZW50LUxlbmd0aDogNzc0MDcNCkFjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbjogKg0KQWNjZXNzLUNvbnRyb2wtRXhwb3NlLUhlYWRlcnM6ICoNClRpbWluZy1BbGxvdy1PcmlnaW46ICoNCkNhY2hlLUNvbnRyb2w6IHB1YmxpYywgbWF4LWFnZT0zMTUzNjAwMCwgcy1tYXhhZ2U9MzE1MzYwMDAsIGltbXV0YWJsZQ0KQ3Jvc3MtT3JpZ2luLVJlc291cmNlLVBvbGljeTogY3Jvc3Mtb3JpZ2luDQpYLUNvbnRlbnQtVHlwZS1PcHRpb25zOiBub3NuaWZmDQpTdHJpY3QtVHJhbnNwb3J0LVNlY3VyaXR5OiBtYXgtYWdlPTMxNTM2MDAwOyBpbmNsdWRlU3ViRG9tYWluczsgcHJlbG9hZA0KQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0OyBjaGFyc2V0PXV0Zi04DQpYLUpTRC1WZXJzaW9uOiAzLjcuMTA3DQpYLUpTRC1WZXJzaW9uLVR5cGU6IHZlcnNpb24NCkVUYWc6IFcvIjQ1MGNhLXVUb3Y2MVVFVGtBdTd6bGxXcUt2Ymh4cWZ5VSINCkNvbnRlbnQtRW5jb2Rpbmc6IGd6aXANCkFjY2VwdC1SYW5nZXM6IGJ5dGVzDQpEYXRlOiBUaHUsIDE1IEZlYiAyMDI0IDA1OjE4OjUwIEdNVA0KQWdlOiAxNjcyMzANClgtU2VydmVkLUJ5OiBjYWNoZS1mcmEtZWRkZjgyMzAxMTUtRlJBLCBjYWNoZS1kZWwyMTc1MC1ERUwNClgtQ2FjaGU6IEhJVCwgTUlTUw0KVmFyeTogQWNjZXB0LUVuY29kaW5nDQphbHQtc3ZjOiBoMz0iOjQ0MyI7bWE9ODY0MDAsaDMtMjk9Ijo0NDMiO21hPTg2NDAwLGgzLTI3PSI6NDQzIjttYT04NjQwMA0KDQo=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPBody>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>LyoqCiAqIEBsaWNzdGFydCBUaGUgZm9sbG93aW5nIGlzIHRoZSBlbnRpcmUgbGljZW5zZSBub3RpY2UgZm9yIHRoZQogKiBKYXZhU2NyaXB0IGNvZGUgaW4gdGhpcyBwYWdlCiAqCiAqIENvcHlyaWdodCAyMDIzIE1vemlsbGEgRm91bmRhdGlvbgogKgogKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICoKICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKgogKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgogKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKgogKiBAbGljZW5kIFRoZSBhYm92ZSBpcyB0aGUgZW50aXJlIGxpY2Vuc2Ugbm90aWNlIGZvciB0aGUKICogSmF2YVNjcmlwdCBjb2RlIGluIHRoaXMgcGFnZQogKi8KIWZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHQsZSl7Im9iamVjdCI9PXR5cGVvZiBleHBvcnRzJiYib2JqZWN0Ij09dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz1lKCk6ImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoInBkZmpzLWRpc3QvYnVpbGQvcGRmIixbXSxlKToib2JqZWN0Ij09dHlwZW9mIGV4cG9ydHM/ZXhwb3J0c1sicGRmanMtZGlzdC9idWlsZC9wZGYiXT1lKCk6dFsicGRmanMtZGlzdC9idWlsZC9wZGYiXT10LnBkZmpzTGliPWUoKX0oZ2xvYmFsVGhpcywoKCk9PigoKT0+eyJ1c2Ugc3RyaWN0Ijt2YXIgX193ZWJwYWNrX21vZHVsZXNfXz1bLCh0LGUpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO2UuVmVyYm9zaXR5TGV2ZWw9ZS5VdGlsPWUuVW5rbm93bkVycm9yRXhjZXB0aW9uPWUuVW5leHBlY3RlZFJlc3BvbnNlRXhjZXB0aW9uPWUuVGV4dFJlbmRlcmluZ01vZGU9ZS5SZW5kZXJpbmdJbnRlbnRGbGFnPWUuUHJvbWlzZUNhcGFiaWxpdHk9ZS5QZXJtaXNzaW9uRmxhZz1lLlBhc3N3b3JkUmVzcG9uc2VzPWUuUGFzc3dvcmRFeGNlcHRpb249ZS5QYWdlQWN0aW9uRXZlbnRUeXBlPWUuT1BTPWUuTWlzc2luZ1BERkV4Y2VwdGlvbj1lLk1BWF9JTUFHRV9TSVpFX1RPX0NBQ0hFPWUuTElORV9GQUNUT1I9ZS5MSU5FX0RFU0NFTlRfRkFDVE9SPWUuSW52YWxpZFBERkV4Y2VwdGlvbj1lLkltYWdlS2luZD1lLklERU5USVRZX01BVFJJWD1lLkZvcm1hdEVycm9yPWUuRmVhdHVyZVRlc3Q9ZS5GT05UX0lERU5USVRZX01BVFJJWD1lLkRvY3VtZW50QWN0aW9uRXZlbnRUeXBlPWUuQ01hcENvbXByZXNzaW9uVHlwZT1lLkJhc2VFeGNlcHRpb249ZS5CQVNFTElORV9GQUNUT1I9ZS5Bbm5vdGF0aW9uVHlwZT1lLkFubm90YXRpb25TdGF0ZU1vZGVsVHlwZT1lLkFubm90YXRpb25SZXZpZXdTdGF0ZT1lLkFubm90YXRpb25SZXBseVR5cGU9ZS5Bbm5vdGF0aW9uTW9kZT1lLkFubm90YXRpb25NYXJrZWRTdGF0ZT1lLkFubm90YXRpb25GbGFnPWUuQW5ub3RhdGlvbkZpZWxkRmxhZz1lLkFubm90YXRpb25FZGl0b3JUeXBlPWUuQW5ub3RhdGlvbkVkaXRvclByZWZpeD1lLkFubm90YXRpb25FZGl0b3JQYXJhbXNUeXBlPWUuQW5ub3RhdGlvbkJvcmRlclN0eWxlVHlwZT1lLkFubm90YXRpb25BY3Rpb25FdmVudFR5cGU9ZS5BYm9ydEV4Y2VwdGlvbj12b2lkIDA7ZS5hc3NlcnQ9ZnVuY3Rpb24gYXNzZXJ0KHQsZSl7dHx8dW5yZWFjaGFibGUoZSl9O2UuYnl0ZXNUb1N0cmluZz1mdW5jdGlvbiBieXRlc1RvU3RyaW5nKHQpeyJvYmplY3QiPT10eXBlb2YgdCYmdm9pZCAwIT09dD8ubGVuZ3RofHx1bnJlYWNoYWJsZSgiSW52YWxpZCBhcmd1bWVudCBmb3IgYnl0ZXNUb1N0cmluZyIpO2NvbnN0IGU9dC5sZW5ndGgscz04MTkyO2lmKGU8cylyZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLHQpO2NvbnN0IGk9W107Zm9yKGxldCBuPTA7bjxlO24rPXMpe2NvbnN0IGE9TWF0aC5taW4obitzLGUpLHI9dC5zdWJhcnJheShuLGEpO2kucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwscikpfXJldHVybiBpLmpvaW4oIiIpfTtlLmNyZWF0ZVZhbGlkQWJzb2x1dGVVcmw9ZnVuY3Rpb24gY3JlYXRlVmFsaWRBYnNvbHV0ZVVybCh0LGU9bnVsbCxzPW51bGwpe2lmKCF0KXJldHVybiBudWxsO3RyeXtpZihzJiYic3RyaW5nIj09dHlwZW9mIHQpe2lmKHMuYWRkRGVmYXVsdFByb3RvY29sJiZ0LnN0YXJ0c1dpdGgoInd3dy4iKSl7Y29uc3QgZT10Lm1hdGNoKC9cLi9nKTtlPy5sZW5ndGg+PTImJih0PWBodHRwOi8vJHt0fWApfWlmKHMudHJ5Q29udmVydEVuY29kaW5nKXRyeXt0PXN0cmluZ1RvVVRGOFN0cmluZyh0KX1jYXRjaCh0KXt9fWNvbnN0IGk9ZT9uZXcgVVJMKHQsZSk6bmV3IFVSTCh0KTtpZihmdW5jdGlvbiBfaXNWYWxpZFByb3RvY29sKHQpe3N3aXRjaCh0Py5wcm90b2NvbCl7Y2FzZSJodHRwOiI6Y2FzZSJodHRwczoiOmNhc2UiZnRwOiI6Y2FzZSJtYWlsdG86IjpjYXNlInRlbDoiOnJldHVybiEwO2RlZmF1bHQ6cmV0dXJuITF9fShpKSlyZXR1cm4gaX1jYXRjaCh0KXt9cmV0dXJuIG51bGx9O2UuZ2V0TW9kaWZpY2F0aW9uRGF0ZT1mdW5jdGlvbiBnZXRNb2RpZmljYXRpb25EYXRlKHQ9bmV3IERhdGUpe3JldHVyblt0LmdldFVUQ0Z1bGxZZWFyKCkudG9TdHJpbmcoKSwodC5nZXRVVENNb250aCgpKzEpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwiMCIpLHQuZ2V0VVRDRGF0ZSgpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwiMCIpLHQuZ2V0VVRDSG91cnMoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsIjAiKSx0LmdldFVUQ01pbnV0ZXMoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsIjAiKSx0LmdldFVUQ1NlY29uZHMoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsIjAiKV0uam9pbigiIil9O2UuZ2V0VmVyYm9zaXR5TGV2ZWw9ZnVuY3Rpb24gZ2V0VmVyYm9zaXR5TGV2ZWwoKXtyZXR1cm4gaX07ZS5pbmZvPWZ1bmN0aW9uIGluZm8odCl7aT49cy5JTkZPUyYmY29uc29sZS5sb2coYEluZm86ICR7dH1gKX07ZS5pc0FycmF5QnVmZmVyPWZ1bmN0aW9uIGlzQXJyYXlCdWZmZXIodCl7cmV0dXJuIm9iamVjdCI9PXR5cGVvZiB0JiZ2b2lkIDAhPT10Py5ieXRlTGVuZ3RofTtlLmlzQXJyYXlFcXVhbD1mdW5jdGlvbiBpc0FycmF5RXF1YWwodCxlKXtpZih0Lmxlbmd0aCE9PWUubGVuZ3RoKXJldHVybiExO2ZvcihsZXQgcz0wLGk9dC5sZW5ndGg7czxpO3MrKylpZih0W3NdIT09ZVtzXSlyZXR1cm4hMTtyZXR1cm4hMH07ZS5ub3JtYWxpemVVbmljb2RlPWZ1bmN0aW9uIG5vcm1hbGl6ZVVuaWNvZGUodCl7aWYoIW8pe289LyhbXHUwMGEwXHUwMGI1XHUwMzdlXHUwZWIzXHUyMDAwLVx1MjAwYVx1MjAyZlx1MjEyNlx1ZmIwMC1cdWZiMDRcdWZiMDZcdWZiMjAtXHVmYjM2XHVmYjM4LVx1ZmIzY1x1ZmIzZVx1ZmI0MC1cdWZiNDFcdWZiNDMtXHVmYjQ0XHVmYjQ2LVx1ZmJhMVx1ZmJhNC1cdWZiYTlcdWZiYWUtXHVmYmIxXHVmYmQzLVx1ZmJkY1x1ZmJkZS1cdWZiZTdcdWZiZWEtXHVmYmY4XHVmYmZjLVx1ZmJmZFx1ZmMwMC1cdWZjNWRcdWZjNjQtXHVmY2YxXHVmY2Y1LVx1ZmQzZFx1ZmQ4OFx1ZmRmNFx1ZmRmYS1cdWZkZmJcdWZlNzFcdWZlNzdcdWZlNzlcdWZlN2JcdWZlN2RdKyl8KFx1ZmIwNSspL2d1O2w9bmV3IE1hcChbWyLvrIUiLCLFv3QiXV0pfXJldHVybiB0LnJlcGxhY2VBbGwobywoKHQsZSxzKT0+ZT9lLm5vcm1hbGl6ZSgiTkZLQyIpOmwuZ2V0KHMpKSl9O2Uub2JqZWN0RnJvbU1hcD1mdW5jdGlvbiBvYmplY3RGcm9tTWFwKHQpe2NvbnN0IGU9T2JqZWN0LmNyZWF0ZShudWxsKTtmb3IoY29uc3RbcyxpXW9mIHQpZVtzXT1pO3JldHVybiBlfTtlLm9iamVjdFNpemU9ZnVuY3Rpb24gb2JqZWN0U2l6ZSh0KXtyZXR1cm4gT2JqZWN0LmtleXModCkubGVuZ3RofTtlLnNldFZlcmJvc2l0eUxldmVsPWZ1bmN0aW9uIHNldFZlcmJvc2l0eUxldmVsKHQpe051bWJlci5pc0ludGVnZXIodCkmJihpPXQpfTtlLnNoYWRvdz1zaGFkb3c7ZS5zdHJpbmczMj1mdW5jdGlvbiBzdHJpbmczMih0KXtyZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZSh0Pj4yNCYyNTUsdD4+MTYmMjU1LHQ+PjgmMjU1LDI1NSZ0KX07ZS5zdHJpbmdUb0J5dGVzPXN0cmluZ1RvQnl0ZXM7ZS5zdHJpbmdUb1BERlN0cmluZz1mdW5jdGlvbiBzdHJpbmdUb1BERlN0cmluZyh0KXtpZih0WzBdPj0iw68iKXtsZXQgZTsiw74iPT09dFswXSYmIsO/Ij09PXRbMV0/ZT0idXRmLTE2YmUiOiLDvyI9PT10WzBdJiYiw74iPT09dFsxXT9lPSJ1dGYtMTZsZSI6IsOvIj09PXRbMF0mJiLCuyI9PT10WzFdJiYiwr8iPT09dFsyXSYmKGU9InV0Zi04Iik7aWYoZSl0cnl7Y29uc3Qgcz1uZXcgVGV4dERlY29kZXIoZSx7ZmF0YWw6ITB9KSxpPXN0cmluZ1RvQnl0ZXModCk7cmV0dXJuIHMuZGVjb2RlKGkpfWNhdGNoKHQpe3dhcm4oYHN0cmluZ1RvUERGU3RyaW5nOiAiJHt0fSIuYCl9fWNvbnN0IGU9W107Zm9yKGxldCBzPTAsaT10Lmxlbmd0aDtzPGk7cysrKXtjb25zdCBpPXJbdC5jaGFyQ29kZUF0KHMpXTtlLnB1c2goaT9TdHJpbmcuZnJvbUNoYXJDb2RlKGkpOnQuY2hhckF0KHMpKX1yZXR1cm4gZS5qb2luKCIiKX07ZS5zdHJpbmdUb1VURjhTdHJpbmc9c3RyaW5nVG9VVEY4U3RyaW5nO2UudW5yZWFjaGFibGU9dW5yZWFjaGFibGU7ZS51dGY4U3RyaW5nVG9TdHJpbmc9ZnVuY3Rpb24gdXRmOFN0cmluZ1RvU3RyaW5nKHQpe3JldHVybiB1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQodCkpfTtlLndhcm49d2FybjtlLklERU5USVRZX01BVFJJWD1bMSwwLDAsMSwwLDBdO2UuRk9OVF9JREVOVElUWV9NQVRSSVg9Wy4wMDEsMCwwLC4wMDEsMCwwXTtlLk1BWF9JTUFHRV9TSVpFX1RPX0NBQ0hFPTFlNztlLkxJTkVfRkFDVE9SPTEuMzU7ZS5MSU5FX0RFU0NFTlRfRkFDVE9SPS4zNTtlLkJBU0VMSU5FX0ZBQ1RPUj0uMjU5MjU5MjU5MjU5MjU5MjQ7ZS5SZW5kZXJpbmdJbnRlbnRGbGFnPXtBTlk6MSxESVNQTEFZOjIsUFJJTlQ6NCxTQVZFOjgsQU5OT1RBVElPTlNfRk9STVM6MTYsQU5OT1RBVElPTlNfU1RPUkFHRTozMixBTk5PVEFUSU9OU19ESVNBQkxFOjY0LE9QTElTVDoyNTZ9O2UuQW5ub3RhdGlvbk1vZGU9e0RJU0FCTEU6MCxFTkFCTEU6MSxFTkFCTEVfRk9STVM6MixFTkFCTEVfU1RPUkFHRTozfTtlLkFubm90YXRpb25FZGl0b3JQcmVmaXg9InBkZmpzX2ludGVybmFsX2VkaXRvcl8iO2UuQW5ub3RhdGlvbkVkaXRvclR5cGU9e0RJU0FCTEU6LTEsTk9ORTowLEZSRUVURVhUOjMsSU5LOjE1fTtlLkFubm90YXRpb25FZGl0b3JQYXJhbXNUeXBlPXtGUkVFVEVYVF9TSVpFOjEsRlJFRVRFWFRfQ09MT1I6MixGUkVFVEVYVF9PUEFDSVRZOjMsSU5LX0NPTE9SOjExLElOS19USElDS05FU1M6MTIsSU5LX09QQUNJVFk6MTN9O2UuUGVybWlzc2lvbkZsYWc9e1BSSU5UOjQsTU9ESUZZX0NPTlRFTlRTOjgsQ09QWToxNixNT0RJRllfQU5OT1RBVElPTlM6MzIsRklMTF9JTlRFUkFDVElWRV9GT1JNUzoyNTYsQ09QWV9GT1JfQUNDRVNTSUJJTElUWTo1MTIsQVNTRU1CTEU6MTAyNCxQUklOVF9ISUdIX1FVQUxJVFk6MjA0OH07ZS5UZXh0UmVuZGVyaW5nTW9kZT17RklMTDowLFNUUk9LRToxLEZJTExfU1RST0tFOjIsSU5WSVNJQkxFOjMsRklMTF9BRERfVE9fUEFUSDo0LFNUUk9LRV9BRERfVE9fUEFUSDo1LEZJTExfU1RST0tFX0FERF9UT19QQVRIOjYsQUREX1RPX1BBVEg6NyxGSUxMX1NUUk9LRV9NQVNLOjMsQUREX1RPX1BBVEhfRkxBRzo0fTtlLkltYWdlS2luZD17R1JBWVNDQUxFXzFCUFA6MSxSR0JfMjRCUFA6MixSR0JBXzMyQlBQOjN9O2UuQW5ub3RhdGlvblR5cGU9e1RFWFQ6MSxMSU5LOjIsRlJFRVRFWFQ6MyxMSU5FOjQsU1FVQVJFOjUsQ0lSQ0xFOjYsUE9MWUdPTjo3LFBPTFlMSU5FOjgsSElHSExJR0hUOjksVU5ERVJMSU5FOjEwLFNRVUlHR0xZOjExLFNUUklLRU9VVDoxMixTVEFNUDoxMyxDQVJFVDoxNCxJTks6MTUsUE9QVVA6MTYsRklMRUFUVEFDSE1FTlQ6MTcsU09VTkQ6MTgsTU9WSUU6MTksV0lER0VUOjIwLFNDUkVFTjoyMSxQUklOVEVSTUFSSzoyMixUUkFQTkVUOjIzLFdBVEVSTUFSSzoyNCxUSFJFRUQ6MjUsUkVEQUNUOjI2fTtlLkFubm90YXRpb25TdGF0ZU1vZGVsVHlwZT17TUFSS0VEOiJNYXJrZWQiLFJFVklFVzoiUmV2aWV3In07ZS5Bbm5vdGF0aW9uTWFya2VkU3RhdGU9e01BUktFRDoiTWFya2VkIixVTk1BUktFRDoiVW5tYXJrZWQifTtlLkFubm90YXRpb25SZXZpZXdTdGF0ZT17QUNDRVBURUQ6IkFjY2VwdGVkIixSRUpFQ1RFRDoiUmVqZWN0ZWQiLENBTkNFTExFRDoiQ2FuY2VsbGVkIixDT01QTEVURUQ6IkNvbXBsZXRlZCIsTk9ORToiTm9uZSJ9O2UuQW5ub3RhdGlvblJlcGx5VHlwZT17R1JPVVA6Ikdyb3VwIixSRVBMWToiUiJ9O2UuQW5ub3RhdGlvbkZsYWc9e0lOVklTSUJMRToxLEhJRERFTjoyLFBSSU5UOjQsTk9aT09NOjgsTk9ST1RBVEU6MTYsTk9WSUVXOjMyLFJFQURPTkxZOjY0LExPQ0tFRDoxMjgsVE9HR0xFTk9WSUVXOjI1NixMT0NLRURDT05URU5UUzo1MTJ9O2UuQW5ub3RhdGlvbkZpZWxkRmxhZz17UkVBRE9OTFk6MSxSRVFVSVJFRDoyLE5PRVhQT1JUOjQsTVVMVElMSU5FOjQwOTYsUEFTU1dPUkQ6ODE5MixOT1RPR0dMRVRPT0ZGOjE2Mzg0LFJBRElPOjMyNzY4LFBVU0hCVVRUT046NjU1MzYsQ09NQk86MTMxMDcyLEVESVQ6MjYyMTQ0LFNPUlQ6NTI0Mjg4LEZJTEVTRUxFQ1Q6MTA0ODU3NixNVUxUSVNFTEVDVDoyMDk3MTUyLERPTk9UU1BFTExDSEVDSzo0MTk0MzA0LERPTk9UU0NST0xMOjgzODg2MDgsQ09NQjoxNjc3NzIxNixSSUNIVEVYVDozMzU1NDQzMixSQURJT1NJTlVOSVNPTjozMzU1NDQzMixDT01NSVRPTlNFTENIQU5HRTo2NzEwODg2NH07ZS5Bbm5vdGF0aW9uQm9yZGVyU3R5bGVUeXBlPXtTT0xJRDoxLERBU0hFRDoyLEJFVkVMRUQ6MyxJTlNFVDo0LFVOREVSTElORTo1fTtlLkFubm90YXRpb25BY3Rpb25FdmVudFR5cGU9e0U6Ik1vdXNlIEVudGVyIixYOiJNb3VzZSBFeGl0IixEOiJNb3VzZSBEb3duIixVOiJNb3VzZSBVcCIsRm86IkZvY3VzIixCbDoiQmx1ciIsUE86IlBhZ2VPcGVuIixQQzoiUGFnZUNsb3NlIixQVjoiUGFnZVZpc2libGUiLFBJOiJQYWdlSW52aXNpYmxlIixLOiJLZXlzdHJva2UiLEY6IkZvcm1hdCIsVjoiVmFsaWRhdGUiLEM6IkNhbGN1bGF0ZSJ9O2UuRG9jdW1lbnRBY3Rpb25FdmVudFR5cGU9e1dDOiJXaWxsQ2xvc2UiLFdTOiJXaWxsU2F2ZSIsRFM6IkRpZFNhdmUiLFdQOiJXaWxsUHJpbnQiLERQOiJEaWRQcmludCJ9O2UuUGFnZUFjdGlvbkV2ZW50VHlwZT17TzoiUGFnZU9wZW4iLEM6IlBhZ2VDbG9zZSJ9O2NvbnN0IHM9e0VSUk9SUzowLFdBUk5JTkdTOjEsSU5GT1M6NX07ZS5WZXJib3NpdHlMZXZlbD1zO2UuQ01hcENvbXByZXNzaW9uVHlwZT17Tk9ORTowLEJJTkFSWToxfTtlLk9QUz17ZGVwZW5kZW5jeToxLHNldExpbmVXaWR0aDoyLHNldExpbmVDYXA6MyxzZXRMaW5lSm9pbjo0LHNldE1pdGVyTGltaXQ6NSxzZXREYXNoOjYsc2V0UmVuZGVyaW5nSW50ZW50Ojcsc2V0RmxhdG5lc3M6OCxzZXRHU3RhdGU6OSxzYXZlOjEwLHJlc3RvcmU6MTEsdHJhbnNmb3JtOjEyLG1vdmVUbzoxMyxsaW5lVG86MTQsY3VydmVUbzoxNSxjdXJ2ZVRvMjoxNixjdXJ2ZVRvMzoxNyxjbG9zZVBhdGg6MTgscmVjdGFuZ2xlOjE5LHN0cm9rZToyMCxjbG9zZVN0cm9rZToyMSxmaWxsOjIyLGVvRmlsbDoyMyxmaWxsU3Ryb2tlOjI0LGVvRmlsbFN0cm9rZToyNSxjbG9zZUZpbGxTdHJva2U6MjYsY2xvc2VFT0ZpbGxTdHJva2U6MjcsZW5kUGF0aDoyOCxjbGlwOjI5LGVvQ2xpcDozMCxiZWdpblRleHQ6MzEsZW5kVGV4dDozMixzZXRDaGFyU3BhY2luZzozMyxzZXRXb3JkU3BhY2luZzozNCxzZXRIU2NhbGU6MzUsc2V0TGVhZGluZzozNixzZXRGb250OjM3LHNldFRleHRSZW5kZXJpbmdNb2RlOjM4LHNldFRleHRSaXNlOjM5LG1vdmVUZXh0OjQwLHNldExlYWRpbmdNb3ZlVGV4dDo0MSxzZXRUZXh0TWF0cml4OjQyLG5leHRMaW5lOjQzLHNob3dUZXh0OjQ0LHNob3dTcGFjZWRUZXh0OjQ1LG5leHRMaW5lU2hvd1RleHQ6NDYsbmV4dExpbmVTZXRTcGFjaW5nU2hvd1RleHQ6NDcsc2V0Q2hhcldpZHRoOjQ4LHNldENoYXJXaWR0aEFuZEJvdW5kczo0OSxzZXRTdHJva2VDb2xvclNwYWNlOjUwLHNldEZpbGxDb2xvclNwYWNlOjUxLHNldFN0cm9rZUNvbG9yOjUyLHNldFN0cm9rZUNvbG9yTjo1MyxzZXRGaWxsQ29sb3I6NTQsc2V0RmlsbENvbG9yTjo1NSxzZXRTdHJva2VHcmF5OjU2LHNldEZpbGxHcmF5OjU3LHNldFN0cm9rZVJHQkNvbG9yOjU4LHNldEZpbGxSR0JDb2xvcjo1OSxzZXRTdHJva2VDTVlLQ29sb3I6NjAsc2V0RmlsbENNWUtDb2xvcjo2MSxzaGFkaW5nRmlsbDo2MixiZWdpbklubGluZUltYWdlOjYzLGJlZ2luSW1hZ2VEYXRhOjY0LGVuZElubGluZUltYWdlOjY1LHBhaW50WE9iamVjdDo2NixtYXJrUG9pbnQ6NjcsbWFya1BvaW50UHJvcHM6NjgsYmVnaW5NYXJrZWRDb250ZW50OjY5LGJlZ2luTWFya2VkQ29udGVudFByb3BzOjcwLGVuZE1hcmtlZENvbnRlbnQ6NzEsYmVnaW5Db21wYXQ6NzIsZW5kQ29tcGF0OjczLHBhaW50Rm9ybVhPYmplY3RCZWdpbjo3NCxwYWludEZvcm1YT2JqZWN0RW5kOjc1LGJlZ2luR3JvdXA6NzYsZW5kR3JvdXA6NzcsYmVnaW5Bbm5vdGF0aW9uOjgwLGVuZEFubm90YXRpb246ODEscGFpbnRJbWFnZU1hc2tYT2JqZWN0OjgzLHBhaW50SW1hZ2VNYXNrWE9iamVjdEdyb3VwOjg0LHBhaW50SW1hZ2VYT2JqZWN0Ojg1LHBhaW50SW5saW5lSW1hZ2VYT2JqZWN0Ojg2LHBhaW50SW5saW5lSW1hZ2VYT2JqZWN0R3JvdXA6ODcscGFpbnRJbWFnZVhPYmplY3RSZXBlYXQ6ODgscGFpbnRJbWFnZU1hc2tYT2JqZWN0UmVwZWF0Ojg5LHBhaW50U29saWRDb2xvckltYWdlTWFzazo5MCxjb25zdHJ1Y3RQYXRoOjkxfTtlLlBhc3N3b3JkUmVzcG9uc2VzPXtORUVEX1BBU1NXT1JEOjEsSU5DT1JSRUNUX1BBU1NXT1JEOjJ9O2xldCBpPXMuV0FSTklOR1M7ZnVuY3Rpb24gd2Fybih0KXtpPj1zLldBUk5JTkdTJiZjb25zb2xlLmxvZyhgV2FybmluZzogJHt0fWApfWZ1bmN0aW9uIHVucmVhY2hhYmxlKHQpe3Rocm93IG5ldyBFcnJvcih0KX1mdW5jdGlvbiBzaGFkb3codCxlLHMsaT0hMSl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsZSx7dmFsdWU6cyxlbnVtZXJhYmxlOiFpLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMX0pO3JldHVybiBzfWNvbnN0IG49ZnVuY3Rpb24gQmFzZUV4Y2VwdGlvbkNsb3N1cmUoKXtmdW5jdGlvbiBCYXNlRXhjZXB0aW9uKHQsZSl7dGhpcy5jb25zdHJ1Y3Rvcj09PUJhc2VFeGNlcHRpb24mJnVucmVhY2hhYmxlKCJDYW5ub3QgaW5pdGlhbGl6ZSBCYXNlRXhjZXB0aW9uLiIpO3RoaXMubWVzc2FnZT10O3RoaXMubmFtZT1lfUJhc2VFeGNlcHRpb24ucHJvdG90eXBlPW5ldyBFcnJvcjtCYXNlRXhjZXB0aW9uLmNvbnN0cnVjdG9yPUJhc2VFeGNlcHRpb247cmV0dXJuIEJhc2VFeGNlcHRpb259KCk7ZS5CYXNlRXhjZXB0aW9uPW47ZS5QYXNzd29yZEV4Y2VwdGlvbj1jbGFzcyBQYXNzd29yZEV4Y2VwdGlvbiBleHRlbmRzIG57Y29uc3RydWN0b3IodCxlKXtzdXBlcih0LCJQYXNzd29yZEV4Y2VwdGlvbiIpO3RoaXMuY29kZT1lfX07ZS5Vbmtub3duRXJyb3JFeGNlcHRpb249Y2xhc3MgVW5rbm93bkVycm9yRXhjZXB0aW9uIGV4dGVuZHMgbntjb25zdHJ1Y3Rvcih0LGUpe3N1cGVyKHQsIlVua25vd25FcnJvckV4Y2VwdGlvbiIpO3RoaXMuZGV0YWlscz1lfX07ZS5JbnZhbGlkUERGRXhjZXB0aW9uPWNsYXNzIEludmFsaWRQREZFeGNlcHRpb24gZXh0ZW5kcyBue2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQsIkludmFsaWRQREZFeGNlcHRpb24iKX19O2UuTWlzc2luZ1BERkV4Y2VwdGlvbj1jbGFzcyBNaXNzaW5nUERGRXhjZXB0aW9uIGV4dGVuZHMgbntjb25zdHJ1Y3Rvcih0KXtzdXBlcih0LCJNaXNzaW5nUERGRXhjZXB0aW9uIil9fTtlLlVuZXhwZWN0ZWRSZXNwb25zZUV4Y2VwdGlvbj1jbGFzcyBVbmV4cGVjdGVkUmVzcG9uc2VFeGNlcHRpb24gZXh0ZW5kcyBue2NvbnN0cnVjdG9yKHQsZSl7c3VwZXIodCwiVW5leHBlY3RlZFJlc3BvbnNlRXhjZXB0aW9uIik7dGhpcy5zdGF0dXM9ZX19O2UuRm9ybWF0RXJyb3I9Y2xhc3MgRm9ybWF0RXJyb3IgZXh0ZW5kcyBue2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQsIkZvcm1hdEVycm9yIil9fTtlLkFib3J0RXhjZXB0aW9uPWNsYXNzIEFib3J0RXhjZXB0aW9uIGV4dGVuZHMgbntjb25zdHJ1Y3Rvcih0KXtzdXBlcih0LCJBYm9ydEV4Y2VwdGlvbiIpfX07ZnVuY3Rpb24gc3RyaW5nVG9CeXRlcyh0KXsic3RyaW5nIiE9dHlwZW9mIHQmJnVucmVhY2hhYmxlKCJJbnZhbGlkIGFyZ3VtZW50IGZvciBzdHJpbmdUb0J5dGVzIik7Y29uc3QgZT10Lmxlbmd0aCxzPW5ldyBVaW50OEFycmF5KGUpO2ZvcihsZXQgaT0wO2k8ZTsrK2kpc1tpXT0yNTUmdC5jaGFyQ29kZUF0KGkpO3JldHVybiBzfWUuRmVhdHVyZVRlc3Q9Y2xhc3MgRmVhdHVyZVRlc3R7c3RhdGljIGdldCBpc0xpdHRsZUVuZGlhbigpe3JldHVybiBzaGFkb3codGhpcywiaXNMaXR0bGVFbmRpYW4iLGZ1bmN0aW9uIGlzTGl0dGxlRW5kaWFuKCl7Y29uc3QgdD1uZXcgVWludDhBcnJheSg0KTt0WzBdPTE7cmV0dXJuIDE9PT1uZXcgVWludDMyQXJyYXkodC5idWZmZXIsMCwxKVswXX0oKSl9c3RhdGljIGdldCBpc0V2YWxTdXBwb3J0ZWQoKXtyZXR1cm4gc2hhZG93KHRoaXMsImlzRXZhbFN1cHBvcnRlZCIsZnVuY3Rpb24gaXNFdmFsU3VwcG9ydGVkKCl7dHJ5e25ldyBGdW5jdGlvbigiIik7cmV0dXJuITB9Y2F0Y2godCl7cmV0dXJuITF9fSgpKX1zdGF0aWMgZ2V0IGlzT2Zmc2NyZWVuQ2FudmFzU3VwcG9ydGVkKCl7cmV0dXJuIHNoYWRvdyh0aGlzLCJpc09mZnNjcmVlbkNhbnZhc1N1cHBvcnRlZCIsInVuZGVmaW5lZCIhPXR5cGVvZiBPZmZzY3JlZW5DYW52YXMpfXN0YXRpYyBnZXQgcGxhdGZvcm0oKXtyZXR1cm4idW5kZWZpbmVkIj09dHlwZW9mIG5hdmlnYXRvcj9zaGFkb3codGhpcywicGxhdGZvcm0iLHtpc1dpbjohMSxpc01hYzohMX0pOnNoYWRvdyh0aGlzLCJwbGF0Zm9ybSIse2lzV2luOm5hdmlnYXRvci5wbGF0Zm9ybS5pbmNsdWRlcygiV2luIiksaXNNYWM6bmF2aWdhdG9yLnBsYXRmb3JtLmluY2x1ZGVzKCJNYWMiKX0pfX07Y29uc3QgYT1bLi4uQXJyYXkoMjU2KS5rZXlzKCldLm1hcCgodD0+dC50b1N0cmluZygxNikucGFkU3RhcnQoMiwiMCIpKSk7Y2xhc3MgVXRpbHtzdGF0aWMgbWFrZUhleENvbG9yKHQsZSxzKXtyZXR1cm5gIyR7YVt0XX0ke2FbZV19JHthW3NdfWB9c3RhdGljIHNjYWxlTWluTWF4KHQsZSl7bGV0IHM7aWYodFswXSl7aWYodFswXTwwKXtzPWVbMF07ZVswXT1lWzFdO2VbMV09c31lWzBdKj10WzBdO2VbMV0qPXRbMF07aWYodFszXTwwKXtzPWVbMl07ZVsyXT1lWzNdO2VbM109c31lWzJdKj10WzNdO2VbM10qPXRbM119ZWxzZXtzPWVbMF07ZVswXT1lWzJdO2VbMl09cztzPWVbMV07ZVsxXT1lWzNdO2VbM109cztpZih0WzFdPDApe3M9ZVsyXTtlWzJdPWVbM107ZVszXT1zfWVbMl0qPXRbMV07ZVszXSo9dFsxXTtpZih0WzJdPDApe3M9ZVswXTtlWzBdPWVbMV07ZVsxXT1zfWVbMF0qPXRbMl07ZVsxXSo9dFsyXX1lWzBdKz10WzRdO2VbMV0rPXRbNF07ZVsyXSs9dFs1XTtlWzNdKz10WzVdfXN0YXRpYyB0cmFuc2Zvcm0odCxlKXtyZXR1cm5bdFswXSplWzBdK3RbMl0qZVsxXSx0WzFdKmVbMF0rdFszXSplWzFdLHRbMF0qZVsyXSt0WzJdKmVbM10sdFsxXSplWzJdK3RbM10qZVszXSx0WzBdKmVbNF0rdFsyXSplWzVdK3RbNF0sdFsxXSplWzRdK3RbM10qZVs1XSt0WzVdXX1zdGF0aWMgYXBwbHlUcmFuc2Zvcm0odCxlKXtyZXR1cm5bdFswXSplWzBdK3RbMV0qZVsyXStlWzRdLHRbMF0qZVsxXSt0WzFdKmVbM10rZVs1XV19c3RhdGljIGFwcGx5SW52ZXJzZVRyYW5zZm9ybSh0LGUpe2NvbnN0IHM9ZVswXSplWzNdLWVbMV0qZVsyXTtyZXR1cm5bKHRbMF0qZVszXS10WzFdKmVbMl0rZVsyXSplWzVdLWVbNF0qZVszXSkvcywoLXRbMF0qZVsxXSt0WzFdKmVbMF0rZVs0XSplWzFdLWVbNV0qZVswXSkvc119c3RhdGljIGdldEF4aWFsQWxpZ25lZEJvdW5kaW5nQm94KHQsZSl7Y29uc3Qgcz1VdGlsLmFwcGx5VHJhbnNmb3JtKHQsZSksaT1VdGlsLmFwcGx5VHJhbnNmb3JtKHQuc2xpY2UoMiw0KSxlKSxuPVV0aWwuYXBwbHlUcmFuc2Zvcm0oW3RbMF0sdFszXV0sZSksYT1VdGlsLmFwcGx5VHJhbnNmb3JtKFt0WzJdLHRbMV1dLGUpO3JldHVybltNYXRoLm1pbihzWzBdLGlbMF0sblswXSxhWzBdKSxNYXRoLm1pbihzWzFdLGlbMV0sblsxXSxhWzFdKSxNYXRoLm1heChzWzBdLGlbMF0sblswXSxhWzBdKSxNYXRoLm1heChzWzFdLGlbMV0sblsxXSxhWzFdKV19c3RhdGljIGludmVyc2VUcmFuc2Zvcm0odCl7Y29uc3QgZT10WzBdKnRbM10tdFsxXSp0WzJdO3JldHVyblt0WzNdL2UsLXRbMV0vZSwtdFsyXS9lLHRbMF0vZSwodFsyXSp0WzVdLXRbNF0qdFszXSkvZSwodFs0XSp0WzFdLXRbNV0qdFswXSkvZV19c3RhdGljIHNpbmd1bGFyVmFsdWVEZWNvbXBvc2UyZFNjYWxlKHQpe2NvbnN0IGU9W3RbMF0sdFsyXSx0WzFdLHRbM11dLHM9dFswXSplWzBdK3RbMV0qZVsyXSxpPXRbMF0qZVsxXSt0WzFdKmVbM10sbj10WzJdKmVbMF0rdFszXSplWzJdLGE9dFsyXSplWzFdK3RbM10qZVszXSxyPShzK2EpLzIsbz1NYXRoLnNxcnQoKHMrYSkqKjItNCoocyphLW4qaSkpLzIsbD1yK298fDEsYz1yLW98fDE7cmV0dXJuW01hdGguc3FydChsKSxNYXRoLnNxcnQoYyldfXN0YXRpYyBub3JtYWxpemVSZWN0KHQpe2NvbnN0IGU9dC5zbGljZSgwKTtpZih0WzBdPnRbMl0pe2VbMF09dFsyXTtlWzJdPXRbMF19aWYodFsxXT50WzNdKXtlWzFdPXRbM107ZVszXT10WzFdfXJldHVybiBlfXN0YXRpYyBpbnRlcnNlY3QodCxlKXtjb25zdCBzPU1hdGgubWF4KE1hdGgubWluKHRbMF0sdFsyXSksTWF0aC5taW4oZVswXSxlWzJdKSksaT1NYXRoLm1pbihNYXRoLm1heCh0WzBdLHRbMl0pLE1hdGgubWF4KGVbMF0sZVsyXSkpO2lmKHM+aSlyZXR1cm4gbnVsbDtjb25zdCBuPU1hdGgubWF4KE1hdGgubWluKHRbMV0sdFszXSksTWF0aC5taW4oZVsxXSxlWzNdKSksYT1NYXRoLm1pbihNYXRoLm1heCh0WzFdLHRbM10pLE1hdGgubWF4KGVbMV0sZVszXSkpO3JldHVybiBuPmE/bnVsbDpbcyxuLGksYV19c3RhdGljIGJlemllckJvdW5kaW5nQm94KHQsZSxzLGksbixhLHIsbyl7Y29uc3QgbD1bXSxjPVtbXSxbXV07bGV0IGgsZCx1LHAsZixnLG0sYjtmb3IobGV0IGM9MDtjPDI7KytjKXtpZigwPT09Yyl7ZD02KnQtMTIqcys2Km47aD0tMyp0Kzkqcy05Km4rMypyO3U9MypzLTMqdH1lbHNle2Q9NiplLTEyKmkrNiphO2g9LTMqZSs5KmktOSphKzMqbzt1PTMqaS0zKmV9aWYoTWF0aC5hYnMoaCk8MWUtMTIpe2lmKE1hdGguYWJzKGQpPDFlLTEyKWNvbnRpbnVlO3A9LXUvZDswPHAmJnA8MSYmbC5wdXNoKHApfWVsc2V7bT1kKmQtNCp1Kmg7Yj1NYXRoLnNxcnQobSk7aWYoIShtPDApKXtmPSgtZCtiKS8oMipoKTswPGYmJmY8MSYmbC5wdXNoKGYpO2c9KC1kLWIpLygyKmgpOzA8ZyYmZzwxJiZsLnB1c2goZyl9fX1sZXQgQSxfPWwubGVuZ3RoO2NvbnN0IHk9Xztmb3IoO18tLTspe3A9bFtfXTtBPTEtcDtjWzBdW19dPUEqQSpBKnQrMypBKkEqcCpzKzMqQSpwKnAqbitwKnAqcCpyO2NbMV1bX109QSpBKkEqZSszKkEqQSpwKmkrMypBKnAqcCphK3AqcCpwKm99Y1swXVt5XT10O2NbMV1beV09ZTtjWzBdW3krMV09cjtjWzFdW3krMV09bztjWzBdLmxlbmd0aD1jWzFdLmxlbmd0aD15KzI7cmV0dXJuW01hdGgubWluKC4uLmNbMF0pLE1hdGgubWluKC4uLmNbMV0pLE1hdGgubWF4KC4uLmNbMF0pLE1hdGgubWF4KC4uLmNbMV0pXX19ZS5VdGlsPVV0aWw7Y29uc3Qgcj1bMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsNzI4LDcxMSw3MTAsNzI5LDczMyw3MzEsNzMwLDczMiwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCw4MjI2LDgyMjQsODIyNSw4MjMwLDgyMTIsODIxMSw0MDIsODI2MCw4MjQ5LDgyNTAsODcyMiw4MjQwLDgyMjIsODIyMCw4MjIxLDgyMTYsODIxNyw4MjE4LDg0ODIsNjQyNTcsNjQyNTgsMzIxLDMzOCwzNTIsMzc2LDM4MSwzMDUsMzIyLDMzOSwzNTMsMzgyLDAsODM2NF07ZnVuY3Rpb24gc3RyaW5nVG9VVEY4U3RyaW5nKHQpe3JldHVybiBkZWNvZGVVUklDb21wb25lbnQoZXNjYXBlKHQpKX1lLlByb21pc2VDYXBhYmlsaXR5PWNsYXNzIFByb21pc2VDYXBhYmlsaXR5eyN0PSExO2NvbnN0cnVjdG9yKCl7dGhpcy5wcm9taXNlPW5ldyBQcm9taXNlKCgodCxlKT0+e3RoaXMucmVzb2x2ZT1lPT57dGhpcy4jdD0hMDt0KGUpfTt0aGlzLnJlamVjdD10PT57dGhpcy4jdD0hMDtlKHQpfX0pKX1nZXQgc2V0dGxlZCgpe3JldHVybiB0aGlzLiN0fX07bGV0IG89bnVsbCxsPW51bGx9LChfX3VudXNlZF93ZWJwYWNrX21vZHVsZSxleHBvcnRzLF9fd19wZGZqc19yZXF1aXJlX18pPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO2V4cG9ydHMuYnVpbGQ9ZXhwb3J0cy5SZW5kZXJUYXNrPWV4cG9ydHMuUERGV29ya2VyVXRpbD1leHBvcnRzLlBERldvcmtlcj1leHBvcnRzLlBERlBhZ2VQcm94eT1leHBvcnRzLlBERkRvY3VtZW50UHJveHk9ZXhwb3J0cy5QREZEb2N1bWVudExvYWRpbmdUYXNrPWV4cG9ydHMuUERGRGF0YVJhbmdlVHJhbnNwb3J0PWV4cG9ydHMuTG9vcGJhY2tQb3J0PWV4cG9ydHMuRGVmYXVsdFN0YW5kYXJkRm9udERhdGFGYWN0b3J5PWV4cG9ydHMuRGVmYXVsdEZpbHRlckZhY3Rvcnk9ZXhwb3J0cy5EZWZhdWx0Q2FudmFzRmFjdG9yeT1leHBvcnRzLkRlZmF1bHRDTWFwUmVhZGVyRmFjdG9yeT12b2lkIDA7ZXhwb3J0cy5nZXREb2N1bWVudD1nZXREb2N1bWVudDtleHBvcnRzLnZlcnNpb249dm9pZCAwO3ZhciBfdXRpbD1fX3dfcGRmanNfcmVxdWlyZV9fKDEpLF9hbm5vdGF0aW9uX3N0b3JhZ2U9X193X3BkZmpzX3JlcXVpcmVfXygzKSxfZGlzcGxheV91dGlscz1fX3dfcGRmanNfcmVxdWlyZV9fKDYpLF9mb250X2xvYWRlcj1fX3dfcGRmanNfcmVxdWlyZV9fKDkpLF9jYW52YXM9X193X3BkZmpzX3JlcXVpcmVfXygxMSksX3dvcmtlcl9vcHRpb25zPV9fd19wZGZqc19yZXF1aXJlX18oMTQpLF9pc19ub2RlPV9fd19wZGZqc19yZXF1aXJlX18oMTApLF9tZXNzYWdlX2hhbmRsZXI9X193X3BkZmpzX3JlcXVpcmVfXygxNSksX21ldGFkYXRhPV9fd19wZGZqc19yZXF1aXJlX18oMTYpLF9vcHRpb25hbF9jb250ZW50X2NvbmZpZz1fX3dfcGRmanNfcmVxdWlyZV9fKDE3KSxfdHJhbnNwb3J0X3N0cmVhbT1fX3dfcGRmanNfcmVxdWlyZV9fKDE4KSxfeGZhX3RleHQ9X193X3BkZmpzX3JlcXVpcmVfXygxOSk7Y29uc3QgREVGQVVMVF9SQU5HRV9DSFVOS19TSVpFPTY1NTM2LFJFTkRFUklOR19DQU5DRUxMRURfVElNRU9VVD0xMDAsREVMQVlFRF9DTEVBTlVQX1RJTUVPVVQ9NWUzO2xldCBEZWZhdWx0Q2FudmFzRmFjdG9yeT1fZGlzcGxheV91dGlscy5ET01DYW52YXNGYWN0b3J5O2V4cG9ydHMuRGVmYXVsdENhbnZhc0ZhY3Rvcnk9RGVmYXVsdENhbnZhc0ZhY3Rvcnk7bGV0IERlZmF1bHRDTWFwUmVhZGVyRmFjdG9yeT1fZGlzcGxheV91dGlscy5ET01DTWFwUmVhZGVyRmFjdG9yeTtleHBvcnRzLkRlZmF1bHRDTWFwUmVhZGVyRmFjdG9yeT1EZWZhdWx0Q01hcFJlYWRlckZhY3Rvcnk7bGV0IERlZmF1bHRGaWx0ZXJGYWN0b3J5PV9kaXNwbGF5X3V0aWxzLkRPTUZpbHRlckZhY3Rvcnk7ZXhwb3J0cy5EZWZhdWx0RmlsdGVyRmFjdG9yeT1EZWZhdWx0RmlsdGVyRmFjdG9yeTtsZXQgRGVmYXVsdFN0YW5kYXJkRm9udERhdGFGYWN0b3J5PV9kaXNwbGF5X3V0aWxzLkRPTVN0YW5kYXJkRm9udERhdGFGYWN0b3J5LGNyZWF0ZVBERk5ldHdvcmtTdHJlYW07ZXhwb3J0cy5EZWZhdWx0U3RhbmRhcmRGb250RGF0YUZhY3Rvcnk9RGVmYXVsdFN0YW5kYXJkRm9udERhdGFGYWN0b3J5O2lmKF9pc19ub2RlLmlzTm9kZUpTKXtjb25zdHtOb2RlQ2FudmFzRmFjdG9yeTp0LE5vZGVDTWFwUmVhZGVyRmFjdG9yeTplLE5vZGVGaWx0ZXJGYWN0b3J5OnMsTm9kZVN0YW5kYXJkRm9udERhdGFGYWN0b3J5Oml9PV9fd19wZGZqc19yZXF1aXJlX18oMjApO2V4cG9ydHMuRGVmYXVsdENhbnZhc0ZhY3Rvcnk9RGVmYXVsdENhbnZhc0ZhY3Rvcnk9dDtleHBvcnRzLkRlZmF1bHRDTWFwUmVhZGVyRmFjdG9yeT1EZWZhdWx0Q01hcFJlYWRlckZhY3Rvcnk9ZTtleHBvcnRzLkRlZmF1bHRGaWx0ZXJGYWN0b3J5PURlZmF1bHRGaWx0ZXJGYWN0b3J5PXM7ZXhwb3J0cy5EZWZhdWx0U3RhbmRhcmRGb250RGF0YUZhY3Rvcnk9RGVmYXVsdFN0YW5kYXJkRm9udERhdGFGYWN0b3J5PWl9aWYoX2lzX25vZGUuaXNOb2RlSlMpe2NvbnN0e1BERk5vZGVTdHJlYW06dH09X193X3BkZmpzX3JlcXVpcmVfXygyMSk7Y3JlYXRlUERGTmV0d29ya1N0cmVhbT1lPT5uZXcgdChlKX1lbHNle2NvbnN0e1BERk5ldHdvcmtTdHJlYW06dH09X193X3BkZmpzX3JlcXVpcmVfXygyNCkse1BERkZldGNoU3RyZWFtOmV9PV9fd19wZGZqc19yZXF1aXJlX18oMjUpO2NyZWF0ZVBERk5ldHdvcmtTdHJlYW09cz0+KDAsX2Rpc3BsYXlfdXRpbHMuaXNWYWxpZEZldGNoVXJsKShzLnVybCk/bmV3IGUocyk6bmV3IHQocyl9ZnVuY3Rpb24gZ2V0RG9jdW1lbnQodCl7InN0cmluZyI9PXR5cGVvZiB0fHx0IGluc3RhbmNlb2YgVVJMP3Q9e3VybDp0fTooMCxfdXRpbC5pc0FycmF5QnVmZmVyKSh0KSYmKHQ9e2RhdGE6dH0pO2lmKCJvYmplY3QiIT10eXBlb2YgdCl0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgcGFyYW1ldGVyIGluIGdldERvY3VtZW50LCBuZWVkIHBhcmFtZXRlciBvYmplY3QuIik7aWYoIXQudXJsJiYhdC5kYXRhJiYhdC5yYW5nZSl0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgcGFyYW1ldGVyIG9iamVjdDogbmVlZCBlaXRoZXIgLmRhdGEsIC5yYW5nZSBvciAudXJsIik7Y29uc3QgZT1uZXcgUERGRG9jdW1lbnRMb2FkaW5nVGFzayx7ZG9jSWQ6c309ZSxpPXQudXJsP2dldFVybFByb3AodC51cmwpOm51bGwsbj10LmRhdGE/Z2V0RGF0YVByb3AodC5kYXRhKTpudWxsLGE9dC5odHRwSGVhZGVyc3x8bnVsbCxyPSEwPT09dC53aXRoQ3JlZGVudGlhbHMsbz10LnBhc3N3b3JkPz9udWxsLGw9dC5yYW5nZSBpbnN0YW5jZW9mIFBERkRhdGFSYW5nZVRyYW5zcG9ydD90LnJhbmdlOm51bGwsYz1OdW1iZXIuaXNJbnRlZ2VyKHQucmFuZ2VDaHVua1NpemUpJiZ0LnJhbmdlQ2h1bmtTaXplPjA/dC5yYW5nZUNodW5rU2l6ZTpERUZBVUxUX1JBTkdFX0NIVU5LX1NJWkU7bGV0IGg9dC53b3JrZXIgaW5zdGFuY2VvZiBQREZXb3JrZXI/dC53b3JrZXI6bnVsbDtjb25zdCBkPXQudmVyYm9zaXR5LHU9InN0cmluZyIhPXR5cGVvZiB0LmRvY0Jhc2VVcmx8fCgwLF9kaXNwbGF5X3V0aWxzLmlzRGF0YVNjaGVtZSkodC5kb2NCYXNlVXJsKT9udWxsOnQuZG9jQmFzZVVybCxwPSJzdHJpbmciPT10eXBlb2YgdC5jTWFwVXJsP3QuY01hcFVybDpudWxsLGY9ITEhPT10LmNNYXBQYWNrZWQsZz10LkNNYXBSZWFkZXJGYWN0b3J5fHxEZWZhdWx0Q01hcFJlYWRlckZhY3RvcnksbT0ic3RyaW5nIj09dHlwZW9mIHQuc3RhbmRhcmRGb250RGF0YVVybD90LnN0YW5kYXJkRm9udERhdGFVcmw6bnVsbCxiPXQuU3RhbmRhcmRGb250RGF0YUZhY3Rvcnl8fERlZmF1bHRTdGFuZGFyZEZvbnREYXRhRmFjdG9yeSxBPSEwIT09dC5zdG9wQXRFcnJvcnMsXz1OdW1iZXIuaXNJbnRlZ2VyKHQubWF4SW1hZ2VTaXplKSYmdC5tYXhJbWFnZVNpemU+LTE/dC5tYXhJbWFnZVNpemU6LTEseT0hMSE9PXQuaXNFdmFsU3VwcG9ydGVkLHY9ImJvb2xlYW4iPT10eXBlb2YgdC5pc09mZnNjcmVlbkNhbnZhc1N1cHBvcnRlZD90LmlzT2Zmc2NyZWVuQ2FudmFzU3VwcG9ydGVkOiFfaXNfbm9kZS5pc05vZGVKUyxTPU51bWJlci5pc0ludGVnZXIodC5jYW52YXNNYXhBcmVhSW5CeXRlcyk/dC5jYW52YXNNYXhBcmVhSW5CeXRlczotMSx4PSJib29sZWFuIj09dHlwZW9mIHQuZGlzYWJsZUZvbnRGYWNlP3QuZGlzYWJsZUZvbnRGYWNlOl9pc19ub2RlLmlzTm9kZUpTLEM9ITA9PT10LmZvbnRFeHRyYVByb3BlcnRpZXMsRT0hMD09PXQuZW5hYmxlWGZhLHc9dC5vd25lckRvY3VtZW50fHxnbG9iYWxUaGlzLmRvY3VtZW50LFA9ITA9PT10LmRpc2FibGVSYW5nZSxUPSEwPT09dC5kaXNhYmxlU3RyZWFtLEY9ITA9PT10LmRpc2FibGVBdXRvRmV0Y2gsaz0hMD09PXQucGRmQnVnLE09bD9sLmxlbmd0aDp0Lmxlbmd0aD8/TmFOLFI9ImJvb2xlYW4iPT10eXBlb2YgdC51c2VTeXN0ZW1Gb250cz90LnVzZVN5c3RlbUZvbnRzOiFfaXNfbm9kZS5pc05vZGVKUyYmIXgsRD0iYm9vbGVhbiI9PXR5cGVvZiB0LnVzZVdvcmtlckZldGNoP3QudXNlV29ya2VyRmV0Y2g6Zz09PV9kaXNwbGF5X3V0aWxzLkRPTUNNYXBSZWFkZXJGYWN0b3J5JiZiPT09X2Rpc3BsYXlfdXRpbHMuRE9NU3RhbmRhcmRGb250RGF0YUZhY3RvcnkmJigwLF9kaXNwbGF5X3V0aWxzLmlzVmFsaWRGZXRjaFVybCkocCxkb2N1bWVudC5iYXNlVVJJKSYmKDAsX2Rpc3BsYXlfdXRpbHMuaXNWYWxpZEZldGNoVXJsKShtLGRvY3VtZW50LmJhc2VVUkkpLEk9dC5jYW52YXNGYWN0b3J5fHxuZXcgRGVmYXVsdENhbnZhc0ZhY3Rvcnkoe293bmVyRG9jdW1lbnQ6d30pLE89dC5maWx0ZXJGYWN0b3J5fHxuZXcgRGVmYXVsdEZpbHRlckZhY3Rvcnkoe2RvY0lkOnMsb3duZXJEb2N1bWVudDp3fSk7KDAsX3V0aWwuc2V0VmVyYm9zaXR5TGV2ZWwpKGQpO2NvbnN0IEw9e2NhbnZhc0ZhY3Rvcnk6SSxmaWx0ZXJGYWN0b3J5Ok99O2lmKCFEKXtMLmNNYXBSZWFkZXJGYWN0b3J5PW5ldyBnKHtiYXNlVXJsOnAsaXNDb21wcmVzc2VkOmZ9KTtMLnN0YW5kYXJkRm9udERhdGFGYWN0b3J5PW5ldyBiKHtiYXNlVXJsOm19KX1pZighaCl7Y29uc3QgdD17dmVyYm9zaXR5OmQscG9ydDpfd29ya2VyX29wdGlvbnMuR2xvYmFsV29ya2VyT3B0aW9ucy53b3JrZXJQb3J0fTtoPXQucG9ydD9QREZXb3JrZXIuZnJvbVBvcnQodCk6bmV3IFBERldvcmtlcih0KTtlLl93b3JrZXI9aH1jb25zdCBOPXtkb2NJZDpzLGFwaVZlcnNpb246IjMuNy4xMDciLGRhdGE6bixwYXNzd29yZDpvLGRpc2FibGVBdXRvRmV0Y2g6RixyYW5nZUNodW5rU2l6ZTpjLGxlbmd0aDpNLGRvY0Jhc2VVcmw6dSxlbmFibGVYZmE6RSxldmFsdWF0b3JPcHRpb25zOnttYXhJbWFnZVNpemU6XyxkaXNhYmxlRm9udEZhY2U6eCxpZ25vcmVFcnJvcnM6QSxpc0V2YWxTdXBwb3J0ZWQ6eSxpc09mZnNjcmVlbkNhbnZhc1N1cHBvcnRlZDp2LGNhbnZhc01heEFyZWFJbkJ5dGVzOlMsZm9udEV4dHJhUHJvcGVydGllczpDLHVzZVN5c3RlbUZvbnRzOlIsY01hcFVybDpEP3A6bnVsbCxzdGFuZGFyZEZvbnREYXRhVXJsOkQ/bTpudWxsfX0sQj17aWdub3JlRXJyb3JzOkEsaXNFdmFsU3VwcG9ydGVkOnksZGlzYWJsZUZvbnRGYWNlOngsZm9udEV4dHJhUHJvcGVydGllczpDLGVuYWJsZVhmYTpFLG93bmVyRG9jdW1lbnQ6dyxkaXNhYmxlQXV0b0ZldGNoOkYscGRmQnVnOmssc3R5bGVFbGVtZW50Om51bGx9O2gucHJvbWlzZS50aGVuKChmdW5jdGlvbigpe2lmKGUuZGVzdHJveWVkKXRocm93IG5ldyBFcnJvcigiTG9hZGluZyBhYm9ydGVkIik7Y29uc3QgdD1fZmV0Y2hEb2N1bWVudChoLE4pLG89bmV3IFByb21pc2UoKGZ1bmN0aW9uKHQpe2xldCBlO2w/ZT1uZXcgX3RyYW5zcG9ydF9zdHJlYW0uUERGRGF0YVRyYW5zcG9ydFN0cmVhbSh7bGVuZ3RoOk0saW5pdGlhbERhdGE6bC5pbml0aWFsRGF0YSxwcm9ncmVzc2l2ZURvbmU6bC5wcm9ncmVzc2l2ZURvbmUsY29udGVudERpc3Bvc2l0aW9uRmlsZW5hbWU6bC5jb250ZW50RGlzcG9zaXRpb25GaWxlbmFtZSxkaXNhYmxlUmFuZ2U6UCxkaXNhYmxlU3RyZWFtOlR9LGwpOm58fChlPWNyZWF0ZVBERk5ldHdvcmtTdHJlYW0oe3VybDppLGxlbmd0aDpNLGh0dHBIZWFkZXJzOmEsd2l0aENyZWRlbnRpYWxzOnIscmFuZ2VDaHVua1NpemU6YyxkaXNhYmxlUmFuZ2U6UCxkaXNhYmxlU3RyZWFtOlR9KSk7dChlKX0pKTtyZXR1cm4gUHJvbWlzZS5hbGwoW3Qsb10pLnRoZW4oKGZ1bmN0aW9uKFt0LGldKXtpZihlLmRlc3Ryb3llZCl0aHJvdyBuZXcgRXJyb3IoIkxvYWRpbmcgYWJvcnRlZCIpO2NvbnN0IG49bmV3IF9tZXNzYWdlX2hhbmRsZXIuTWVzc2FnZUhhbmRsZXIocyx0LGgucG9ydCksYT1uZXcgV29ya2VyVHJhbnNwb3J0KG4sZSxpLEIsTCk7ZS5fdHJhbnNwb3J0PWE7bi5zZW5kKCJSZWFkeSIsbnVsbCl9KSl9KSkuY2F0Y2goZS5fY2FwYWJpbGl0eS5yZWplY3QpO3JldHVybiBlfWFzeW5jIGZ1bmN0aW9uIF9mZXRjaERvY3VtZW50KHQsZSl7aWYodC5kZXN0cm95ZWQpdGhyb3cgbmV3IEVycm9yKCJXb3JrZXIgd2FzIGRlc3Ryb3llZCIpO2NvbnN0IHM9YXdhaXQgdC5tZXNzYWdlSGFuZGxlci5zZW5kV2l0aFByb21pc2UoIkdldERvY1JlcXVlc3QiLGUsZS5kYXRhP1tlLmRhdGEuYnVmZmVyXTpudWxsKTtpZih0LmRlc3Ryb3llZCl0aHJvdyBuZXcgRXJyb3IoIldvcmtlciB3YXMgZGVzdHJveWVkIik7cmV0dXJuIHN9ZnVuY3Rpb24gZ2V0VXJsUHJvcCh0KXtpZih0IGluc3RhbmNlb2YgVVJMKXJldHVybiB0LmhyZWY7dHJ5e3JldHVybiBuZXcgVVJMKHQsd2luZG93LmxvY2F0aW9uKS5ocmVmfWNhdGNoKGUpe2lmKF9pc19ub2RlLmlzTm9kZUpTJiYic3RyaW5nIj09dHlwZW9mIHQpcmV0dXJuIHR9dGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIFBERiB1cmwgZGF0YTogZWl0aGVyIHN0cmluZyBvciBVUkwtb2JqZWN0IGlzIGV4cGVjdGVkIGluIHRoZSB1cmwgcHJvcGVydHkuIil9ZnVuY3Rpb24gZ2V0RGF0YVByb3AodCl7aWYoX2lzX25vZGUuaXNOb2RlSlMmJiJ1bmRlZmluZWQiIT10eXBlb2YgQnVmZmVyJiZ0IGluc3RhbmNlb2YgQnVmZmVyKXsoMCxfZGlzcGxheV91dGlscy5kZXByZWNhdGVkKSgiUGxlYXNlIHByb3ZpZGUgYmluYXJ5IGRhdGEgYXMgYFVpbnQ4QXJyYXlgLCByYXRoZXIgdGhhbiBgQnVmZmVyYC4iKTtyZXR1cm4gbmV3IFVpbnQ4QXJyYXkodCl9aWYodCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkmJnQuYnl0ZUxlbmd0aD09PXQuYnVmZmVyLmJ5dGVMZW5ndGgpcmV0dXJuIHQ7aWYoInN0cmluZyI9PXR5cGVvZiB0KXJldHVybigwLF91dGlsLnN0cmluZ1RvQnl0ZXMpKHQpO2lmKCJvYmplY3QiPT10eXBlb2YgdCYmIWlzTmFOKHQ/Lmxlbmd0aCl8fCgwLF91dGlsLmlzQXJyYXlCdWZmZXIpKHQpKXJldHVybiBuZXcgVWludDhBcnJheSh0KTt0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgUERGIGJpbmFyeSBkYXRhOiBlaXRoZXIgVHlwZWRBcnJheSwgc3RyaW5nLCBvciBhcnJheS1saWtlIG9iamVjdCBpcyBleHBlY3RlZCBpbiB0aGUgZGF0YSBwcm9wZXJ0eS4iKX1jbGFzcyBQREZEb2N1bWVudExvYWRpbmdUYXNre3N0YXRpYyNlPTA7Y29uc3RydWN0b3IoKXt0aGlzLl9jYXBhYmlsaXR5PW5ldyBfdXRpbC5Qcm9taXNlQ2FwYWJpbGl0eTt0aGlzLl90cmFuc3BvcnQ9bnVsbDt0aGlzLl93b3JrZXI9bnVsbDt0aGlzLmRvY0lkPSJkIitQREZEb2N1bWVudExvYWRpbmdUYXNrLiNlKys7dGhpcy5kZXN0cm95ZWQ9ITE7dGhpcy5vblBhc3N3b3JkPW51bGw7dGhpcy5vblByb2dyZXNzPW51bGx9Z2V0IHByb21pc2UoKXtyZXR1cm4gdGhpcy5fY2FwYWJpbGl0eS5wcm9taXNlfWFzeW5jIGRlc3Ryb3koKXt0aGlzLmRlc3Ryb3llZD0hMDthd2FpdCh0aGlzLl90cmFuc3BvcnQ/LmRlc3Ryb3koKSk7dGhpcy5fdHJhbnNwb3J0PW51bGw7aWYodGhpcy5fd29ya2VyKXt0aGlzLl93b3JrZXIuZGVzdHJveSgpO3RoaXMuX3dvcmtlcj1udWxsfX19ZXhwb3J0cy5QREZEb2N1bWVudExvYWRpbmdUYXNrPVBERkRvY3VtZW50TG9hZGluZ1Rhc2s7Y2xhc3MgUERGRGF0YVJhbmdlVHJhbnNwb3J0e2NvbnN0cnVjdG9yKHQsZSxzPSExLGk9bnVsbCl7dGhpcy5sZW5ndGg9dDt0aGlzLmluaXRpYWxEYXRhPWU7dGhpcy5wcm9ncmVzc2l2ZURvbmU9czt0aGlzLmNvbnRlbnREaXNwb3NpdGlvbkZpbGVuYW1lPWk7dGhpcy5fcmFuZ2VMaXN0ZW5lcnM9W107dGhpcy5fcHJvZ3Jlc3NMaXN0ZW5lcnM9W107dGhpcy5fcHJvZ3Jlc3NpdmVSZWFkTGlzdGVuZXJzPVtdO3RoaXMuX3Byb2dyZXNzaXZlRG9uZUxpc3RlbmVycz1bXTt0aGlzLl9yZWFkeUNhcGFiaWxpdHk9bmV3IF91dGlsLlByb21pc2VDYXBhYmlsaXR5fWFkZFJhbmdlTGlzdGVuZXIodCl7dGhpcy5fcmFuZ2VMaXN0ZW5lcnMucHVzaCh0KX1hZGRQcm9ncmVzc0xpc3RlbmVyKHQpe3RoaXMuX3Byb2dyZXNzTGlzdGVuZXJzLnB1c2godCl9YWRkUHJvZ3Jlc3NpdmVSZWFkTGlzdGVuZXIodCl7dGhpcy5fcHJvZ3Jlc3NpdmVSZWFkTGlzdGVuZXJzLnB1c2godCl9YWRkUHJvZ3Jlc3NpdmVEb25lTGlzdGVuZXIodCl7dGhpcy5fcHJvZ3Jlc3NpdmVEb25lTGlzdGVuZXJzLnB1c2godCl9b25EYXRhUmFuZ2UodCxlKXtmb3IoY29uc3QgcyBvZiB0aGlzLl9yYW5nZUxpc3RlbmVycylzKHQsZSl9b25EYXRhUHJvZ3Jlc3ModCxlKXt0aGlzLl9yZWFkeUNhcGFiaWxpdHkucHJvbWlzZS50aGVuKCgoKT0+e2Zvcihjb25zdCBzIG9mIHRoaXMuX3Byb2dyZXNzTGlzdGVuZXJzKXModCxlKX0pKX1vbkRhdGFQcm9ncmVzc2l2ZVJlYWQodCl7dGhpcy5fcmVhZHlDYXBhYmlsaXR5LnByb21pc2UudGhlbigoKCk9Pntmb3IoY29uc3QgZSBvZiB0aGlzLl9wcm9ncmVzc2l2ZVJlYWRMaXN0ZW5lcnMpZSh0KX0pKX1vbkRhdGFQcm9ncmVzc2l2ZURvbmUoKXt0aGlzLl9yZWFkeUNhcGFiaWxpdHkucHJvbWlzZS50aGVuKCgoKT0+e2Zvcihjb25zdCB0IG9mIHRoaXMuX3Byb2dyZXNzaXZlRG9uZUxpc3RlbmVycyl0KCl9KSl9dHJhbnNwb3J0UmVhZHkoKXt0aGlzLl9yZWFkeUNhcGFiaWxpdHkucmVzb2x2ZSgpfXJlcXVlc3REYXRhUmFuZ2UodCxlKXsoMCxfdXRpbC51bnJlYWNoYWJsZSkoIkFic3RyYWN0IG1ldGhvZCBQREZEYXRhUmFuZ2VUcmFuc3BvcnQucmVxdWVzdERhdGFSYW5nZSIpfWFib3J0KCl7fX1leHBvcnRzLlBERkRhdGFSYW5nZVRyYW5zcG9ydD1QREZEYXRhUmFuZ2VUcmFuc3BvcnQ7Y2xhc3MgUERGRG9jdW1lbnRQcm94eXtjb25zdHJ1Y3Rvcih0LGUpe3RoaXMuX3BkZkluZm89dDt0aGlzLl90cmFuc3BvcnQ9ZX1nZXQgYW5ub3RhdGlvblN0b3JhZ2UoKXtyZXR1cm4gdGhpcy5fdHJhbnNwb3J0LmFubm90YXRpb25TdG9yYWdlfWdldCBmaWx0ZXJGYWN0b3J5KCl7cmV0dXJuIHRoaXMuX3RyYW5zcG9ydC5maWx0ZXJGYWN0b3J5fWdldCBudW1QYWdlcygpe3JldHVybiB0aGlzLl9wZGZJbmZvLm51bVBhZ2VzfWdldCBmaW5nZXJwcmludHMoKXtyZXR1cm4gdGhpcy5fcGRmSW5mby5maW5nZXJwcmludHN9Z2V0IGlzUHVyZVhmYSgpe3JldHVybigwLF91dGlsLnNoYWRvdykodGhpcywiaXNQdXJlWGZhIiwhIXRoaXMuX3RyYW5zcG9ydC5faHRtbEZvclhmYSl9Z2V0IGFsbFhmYUh0bWwoKXtyZXR1cm4gdGhpcy5fdHJhbnNwb3J0Ll9odG1sRm9yWGZhfWdldFBhZ2UodCl7cmV0dXJuIHRoaXMuX3RyYW5zcG9ydC5nZXRQYWdlKHQpfWdldFBhZ2VJbmRleCh0KXtyZXR1cm4gdGhpcy5fdHJhbnNwb3J0LmdldFBhZ2VJbmRleCh0KX1nZXREZXN0aW5hdGlvbnMoKXtyZXR1cm4gdGhpcy5fdHJhbnNwb3J0LmdldERlc3RpbmF0aW9ucygpfWdldERlc3RpbmF0aW9uKHQpe3JldHVybiB0aGlzLl90cmFuc3BvcnQuZ2V0RGVzdGluYXRpb24odCl9Z2V0UGFnZUxhYmVscygpe3JldHVybiB0aGlzLl90cmFuc3BvcnQuZ2V0UGFnZUxhYmVscygpfWdldFBhZ2VMYXlvdXQoKXtyZXR1cm4gdGhpcy5fdHJhbnNwb3J0LmdldFBhZ2VMYXlvdXQoKX1nZXRQYWdlTW9kZSgpe3JldHVybiB0aGlzLl90cmFuc3BvcnQuZ2V0UGFnZU1vZGUoKX1nZXRWaWV3ZXJQcmVmZXJlbmNlcygpe3JldHVybiB0aGlzLl90cmFuc3BvcnQuZ2V0Vmlld2VyUHJlZmVyZW5jZXMoKX1nZXRPcGVuQWN0aW9uKCl7cmV0dXJuIHRoaXMuX3RyYW5zcG9ydC5nZXRPcGVuQWN0aW9uKCl9Z2V0QXR0YWNobWVudHMoKXtyZXR1cm4gdGhpcy5fdHJhbnNwb3J0LmdldEF0dGFjaG1lbnRzKCl9Z2V0SmF2YVNjcmlwdCgpe3JldHVybiB0aGlzLl90cmFuc3BvcnQuZ2V0SmF2YVNjcmlwdCgpfWdldEpTQWN0aW9ucygpe3JldHVybiB0aGlzLl90cmFuc3BvcnQuZ2V0RG9jSlNBY3Rpb25zKCl9Z2V0T3V0bGluZSgpe3JldHVybiB0aGlzLl90cmFuc3BvcnQuZ2V0T3V0bGluZSgpfWdldE9wdGlvbmFsQ29udGVudENvbmZpZygpe3JldHVybiB0aGlzLl90cmFuc3BvcnQuZ2V0T3B0aW9uYWxDb250ZW50Q29uZmlnKCl9Z2V0UGVybWlzc2lvbnMoKXtyZXR1cm4gdGhpcy5fdHJhbnNwb3J0LmdldFBlcm1pc3Npb25zKCl9Z2V0TWV0YWRhdGEoKXtyZXR1cm4gdGhpcy5fdHJhbnNwb3J0LmdldE1ldGFkYXRhKCl9Z2V0TWFya0luZm8oKXtyZXR1cm4gdGhpcy5fdHJhbnNwb3J0LmdldE1hcmtJbmZvKCl9Z2V0RGF0YSgpe3JldHVybiB0aGlzLl90cmFuc3BvcnQuZ2V0RGF0YSgpfXNhdmVEb2N1bWVudCgpe3JldHVybiB0aGlzLl90cmFuc3BvcnQuc2F2ZURvY3VtZW50KCl9Z2V0RG93bmxvYWRJbmZvKCl7cmV0dXJuIHRoaXMuX3RyYW5zcG9ydC5kb3dubG9hZEluZm9DYXBhYmlsaXR5LnByb21pc2V9Y2xlYW51cCh0PSExKXtyZXR1cm4gdGhpcy5fdHJhbnNwb3J0LnN0YXJ0Q2xlYW51cCh0fHx0aGlzLmlzUHVyZVhmYSl9ZGVzdHJveSgpe3JldHVybiB0aGlzLmxvYWRpbmdUYXNrLmRlc3Ryb3koKX1nZXQgbG9hZGluZ1BhcmFtcygpe3JldHVybiB0aGlzLl90cmFuc3BvcnQubG9hZGluZ1BhcmFtc31nZXQgbG9hZGluZ1Rhc2soKXtyZXR1cm4gdGhpcy5fdHJhbnNwb3J0LmxvYWRpbmdUYXNrfWdldEZpZWxkT2JqZWN0cygpe3JldHVybiB0aGlzLl90cmFuc3BvcnQuZ2V0RmllbGRPYmplY3RzKCl9aGFzSlNBY3Rpb25zKCl7cmV0dXJuIHRoaXMuX3RyYW5zcG9ydC5oYXNKU0FjdGlvbnMoKX1nZXRDYWxjdWxhdGlvbk9yZGVySWRzKCl7cmV0dXJuIHRoaXMuX3RyYW5zcG9ydC5nZXRDYWxjdWxhdGlvbk9yZGVySWRzKCl9fWV4cG9ydHMuUERGRG9jdW1lbnRQcm94eT1QREZEb2N1bWVudFByb3h5O2NsYXNzIFBERlBhZ2VQcm94eXsjcz1udWxsOyNpPSExO2NvbnN0cnVjdG9yKHQsZSxzLGk9ITEpe3RoaXMuX3BhZ2VJbmRleD10O3RoaXMuX3BhZ2VJbmZvPWU7dGhpcy5fdHJhbnNwb3J0PXM7dGhpcy5fc3RhdHM9aT9uZXcgX2Rpc3BsYXlfdXRpbHMuU3RhdFRpbWVyOm51bGw7dGhpcy5fcGRmQnVnPWk7dGhpcy5jb21tb25PYmpzPXMuY29tbW9uT2Jqczt0aGlzLm9ianM9bmV3IFBERk9iamVjdHM7dGhpcy5fbWF5YmVDbGVhbnVwQWZ0ZXJSZW5kZXI9ITE7dGhpcy5faW50ZW50U3RhdGVzPW5ldyBNYXA7dGhpcy5kZXN0cm95ZWQ9ITF9Z2V0IHBhZ2VOdW1iZXIoKXtyZXR1cm4gdGhpcy5fcGFnZUluZGV4KzF9Z2V0IHJvdGF0ZSgpe3JldHVybiB0aGlzLl9wYWdlSW5mby5yb3RhdGV9Z2V0IHJlZigpe3JldHVybiB0aGlzLl9wYWdlSW5mby5yZWZ9Z2V0IHVzZXJVbml0KCl7cmV0dXJuIHRoaXMuX3BhZ2VJbmZvLnVzZXJVbml0fWdldCB2aWV3KCl7cmV0dXJuIHRoaXMuX3BhZ2VJbmZvLnZpZXd9Z2V0Vmlld3BvcnQoe3NjYWxlOnQscm90YXRpb246ZT10aGlzLnJvdGF0ZSxvZmZzZXRYOnM9MCxvZmZzZXRZOmk9MCxkb250RmxpcDpuPSExfT17fSl7cmV0dXJuIG5ldyBfZGlzcGxheV91dGlscy5QYWdlVmlld3BvcnQoe3ZpZXdCb3g6dGhpcy52aWV3LHNjYWxlOnQscm90YXRpb246ZSxvZmZzZXRYOnMsb2Zmc2V0WTppLGRvbnRGbGlwOm59KX1nZXRBbm5vdGF0aW9ucyh7aW50ZW50OnQ9ImRpc3BsYXkifT17fSl7Y29uc3QgZT10aGlzLl90cmFuc3BvcnQuZ2V0UmVuZGVyaW5nSW50ZW50KHQpO3JldHVybiB0aGlzLl90cmFuc3BvcnQuZ2V0QW5ub3RhdGlvbnModGhpcy5fcGFnZUluZGV4LGUucmVuZGVyaW5nSW50ZW50KX1nZXRKU0FjdGlvbnMoKXtyZXR1cm4gdGhpcy5fdHJhbnNwb3J0LmdldFBhZ2VKU0FjdGlvbnModGhpcy5fcGFnZUluZGV4KX1nZXQgaXNQdXJlWGZhKCl7cmV0dXJuKDAsX3V0aWwuc2hhZG93KSh0aGlzLCJpc1B1cmVYZmEiLCEhdGhpcy5fdHJhbnNwb3J0Ll9odG1sRm9yWGZhKX1hc3luYyBnZXRYZmEoKXtyZXR1cm4gdGhpcy5fdHJhbnNwb3J0Ll9odG1sRm9yWGZhPy5jaGlsZHJlblt0aGlzLl9wYWdlSW5kZXhdfHxudWxsfXJlbmRlcih7Y2FudmFzQ29udGV4dDp0LHZpZXdwb3J0OmUsaW50ZW50OnM9ImRpc3BsYXkiLGFubm90YXRpb25Nb2RlOmk9X3V0aWwuQW5ub3RhdGlvbk1vZGUuRU5BQkxFLHRyYW5zZm9ybTpuPW51bGwsYmFja2dyb3VuZDphPW51bGwsb3B0aW9uYWxDb250ZW50Q29uZmlnUHJvbWlzZTpyPW51bGwsYW5ub3RhdGlvbkNhbnZhc01hcDpvPW51bGwscGFnZUNvbG9yczpsPW51bGwscHJpbnRBbm5vdGF0aW9uU3RvcmFnZTpjPW51bGx9KXtpZihhcmd1bWVudHNbMF0/LmNhbnZhc0ZhY3RvcnkpdGhyb3cgbmV3IEVycm9yKCJyZW5kZXIgbm8gbG9uZ2VyIGFjY2VwdHMgdGhlIGBjYW52YXNGYWN0b3J5YC1vcHRpb24sIHBsZWFzZSBwYXNzIGl0IHRvIHRoZSBgZ2V0RG9jdW1lbnRgLWZ1bmN0aW9uIGluc3RlYWQuIik7dGhpcy5fc3RhdHM/LnRpbWUoIk92ZXJhbGwiKTtjb25zdCBoPXRoaXMuX3RyYW5zcG9ydC5nZXRSZW5kZXJpbmdJbnRlbnQocyxpLGMpO3RoaXMuI2k9ITE7dGhpcy4jbigpO3J8fChyPXRoaXMuX3RyYW5zcG9ydC5nZXRPcHRpb25hbENvbnRlbnRDb25maWcoKSk7bGV0IGQ9dGhpcy5faW50ZW50U3RhdGVzLmdldChoLmNhY2hlS2V5KTtpZighZCl7ZD1PYmplY3QuY3JlYXRlKG51bGwpO3RoaXMuX2ludGVudFN0YXRlcy5zZXQoaC5jYWNoZUtleSxkKX1pZihkLnN0cmVhbVJlYWRlckNhbmNlbFRpbWVvdXQpe2NsZWFyVGltZW91dChkLnN0cmVhbVJlYWRlckNhbmNlbFRpbWVvdXQpO2Quc3RyZWFtUmVhZGVyQ2FuY2VsVGltZW91dD1udWxsfWNvbnN0IHU9ISEoaC5yZW5kZXJpbmdJbnRlbnQmX3V0aWwuUmVuZGVyaW5nSW50ZW50RmxhZy5QUklOVCk7aWYoIWQuZGlzcGxheVJlYWR5Q2FwYWJpbGl0eSl7ZC5kaXNwbGF5UmVhZHlDYXBhYmlsaXR5PW5ldyBfdXRpbC5Qcm9taXNlQ2FwYWJpbGl0eTtkLm9wZXJhdG9yTGlzdD17Zm5BcnJheTpbXSxhcmdzQXJyYXk6W10sbGFzdENodW5rOiExLHNlcGFyYXRlQW5ub3RzOm51bGx9O3RoaXMuX3N0YXRzPy50aW1lKCJQYWdlIFJlcXVlc3QiKTt0aGlzLl9wdW1wT3BlcmF0b3JMaXN0KGgpfWNvbnN0IGNvbXBsZXRlPXQ9PntkLnJlbmRlclRhc2tzLmRlbGV0ZShwKTsodGhpcy5fbWF5YmVDbGVhbnVwQWZ0ZXJSZW5kZXJ8fHUpJiYodGhpcy4jaT0hMCk7dGhpcy4jYSghdSk7aWYodCl7cC5jYXBhYmlsaXR5LnJlamVjdCh0KTt0aGlzLl9hYm9ydE9wZXJhdG9yTGlzdCh7aW50ZW50U3RhdGU6ZCxyZWFzb246dCBpbnN0YW5jZW9mIEVycm9yP3Q6bmV3IEVycm9yKHQpfSl9ZWxzZSBwLmNhcGFiaWxpdHkucmVzb2x2ZSgpO3RoaXMuX3N0YXRzPy50aW1lRW5kKCJSZW5kZXJpbmciKTt0aGlzLl9zdGF0cz8udGltZUVuZCgiT3ZlcmFsbCIpfSxwPW5ldyBJbnRlcm5hbFJlbmRlclRhc2soe2NhbGxiYWNrOmNvbXBsZXRlLHBhcmFtczp7Y2FudmFzQ29udGV4dDp0LHZpZXdwb3J0OmUsdHJhbnNmb3JtOm4sYmFja2dyb3VuZDphfSxvYmpzOnRoaXMub2Jqcyxjb21tb25PYmpzOnRoaXMuY29tbW9uT2Jqcyxhbm5vdGF0aW9uQ2FudmFzTWFwOm8sb3BlcmF0b3JMaXN0OmQub3BlcmF0b3JMaXN0LHBhZ2VJbmRleDp0aGlzLl9wYWdlSW5kZXgsY2FudmFzRmFjdG9yeTp0aGlzLl90cmFuc3BvcnQuY2FudmFzRmFjdG9yeSxmaWx0ZXJGYWN0b3J5OnRoaXMuX3RyYW5zcG9ydC5maWx0ZXJGYWN0b3J5LHVzZVJlcXVlc3RBbmltYXRpb25GcmFtZTohdSxwZGZCdWc6dGhpcy5fcGRmQnVnLHBhZ2VDb2xvcnM6bH0pOyhkLnJlbmRlclRhc2tzfHw9bmV3IFNldCkuYWRkKHApO2NvbnN0IGY9cC50YXNrO1Byb21pc2UuYWxsKFtkLmRpc3BsYXlSZWFkeUNhcGFiaWxpdHkucHJvbWlzZSxyXSkudGhlbigoKFt0LGVdKT0+e2lmKHRoaXMuI2kpY29tcGxldGUoKTtlbHNle3RoaXMuX3N0YXRzPy50aW1lKCJSZW5kZXJpbmciKTtwLmluaXRpYWxpemVHcmFwaGljcyh7dHJhbnNwYXJlbmN5OnQsb3B0aW9uYWxDb250ZW50Q29uZmlnOmV9KTtwLm9wZXJhdG9yTGlzdENoYW5nZWQoKX19KSkuY2F0Y2goY29tcGxldGUpO3JldHVybiBmfWdldE9wZXJhdG9yTGlzdCh7aW50ZW50OnQ9ImRpc3BsYXkiLGFubm90YXRpb25Nb2RlOmU9X3V0aWwuQW5ub3RhdGlvbk1vZGUuRU5BQkxFLHByaW50QW5ub3RhdGlvblN0b3JhZ2U6cz1udWxsfT17fSl7Y29uc3QgaT10aGlzLl90cmFuc3BvcnQuZ2V0UmVuZGVyaW5nSW50ZW50KHQsZSxzLCEwKTtsZXQgbixhPXRoaXMuX2ludGVudFN0YXRlcy5nZXQoaS5jYWNoZUtleSk7aWYoIWEpe2E9T2JqZWN0LmNyZWF0ZShudWxsKTt0aGlzLl9pbnRlbnRTdGF0ZXMuc2V0KGkuY2FjaGVLZXksYSl9aWYoIWEub3BMaXN0UmVhZENhcGFiaWxpdHkpe249T2JqZWN0LmNyZWF0ZShudWxsKTtuLm9wZXJhdG9yTGlzdENoYW5nZWQ9ZnVuY3Rpb24gb3BlcmF0b3JMaXN0Q2hhbmdlZCgpe2lmKGEub3BlcmF0b3JMaXN0Lmxhc3RDaHVuayl7YS5vcExpc3RSZWFkQ2FwYWJpbGl0eS5yZXNvbHZlKGEub3BlcmF0b3JMaXN0KTthLnJlbmRlclRhc2tzLmRlbGV0ZShuKX19O2Eub3BMaXN0UmVhZENhcGFiaWxpdHk9bmV3IF91dGlsLlByb21pc2VDYXBhYmlsaXR5OyhhLnJlbmRlclRhc2tzfHw9bmV3IFNldCkuYWRkKG4pO2Eub3BlcmF0b3JMaXN0PXtmbkFycmF5OltdLGFyZ3NBcnJheTpbXSxsYXN0Q2h1bms6ITEsc2VwYXJhdGVBbm5vdHM6bnVsbH07dGhpcy5fc3RhdHM/LnRpbWUoIlBhZ2UgUmVxdWVzdCIpO3RoaXMuX3B1bXBPcGVyYXRvckxpc3QoaSl9cmV0dXJuIGEub3BMaXN0UmVhZENhcGFiaWxpdHkucHJvbWlzZX1zdHJlYW1UZXh0Q29udGVudCh7aW5jbHVkZU1hcmtlZENvbnRlbnQ6dD0hMSxkaXNhYmxlTm9ybWFsaXphdGlvbjplPSExfT17fSl7cmV0dXJuIHRoaXMuX3RyYW5zcG9ydC5tZXNzYWdlSGFuZGxlci5zZW5kV2l0aFN0cmVhbSgiR2V0VGV4dENvbnRlbnQiLHtwYWdlSW5kZXg6dGhpcy5fcGFnZUluZGV4LGluY2x1ZGVNYXJrZWRDb250ZW50OiEwPT09dCxkaXNhYmxlTm9ybWFsaXphdGlvbjohMD09PWV9LHtoaWdoV2F0ZXJNYXJrOjEwMCxzaXplOnQ9PnQuaXRlbXMubGVuZ3RofSl9Z2V0VGV4dENvbnRlbnQodD17fSl7aWYodGhpcy5fdHJhbnNwb3J0Ll9odG1sRm9yWGZhKXJldHVybiB0aGlzLmdldFhmYSgpLnRoZW4oKHQ9Pl94ZmFfdGV4dC5YZmFUZXh0LnRleHRDb250ZW50KHQpKSk7Y29uc3QgZT10aGlzLnN0cmVhbVRleHRDb250ZW50KHQpO3JldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24odCxzKXtjb25zdCBpPWUuZ2V0UmVhZGVyKCksbj17aXRlbXM6W10sc3R5bGVzOk9iamVjdC5jcmVhdGUobnVsbCl9OyFmdW5jdGlvbiBwdW1wKCl7aS5yZWFkKCkudGhlbigoZnVuY3Rpb24oe3ZhbHVlOmUsZG9uZTpzfSl7aWYocyl0KG4pO2Vsc2V7T2JqZWN0LmFzc2lnbihuLnN0eWxlcyxlLnN0eWxlcyk7bi5pdGVtcy5wdXNoKC4uLmUuaXRlbXMpO3B1bXAoKX19KSxzKX0oKX0pKX1nZXRTdHJ1Y3RUcmVlKCl7cmV0dXJuIHRoaXMuX3RyYW5zcG9ydC5nZXRTdHJ1Y3RUcmVlKHRoaXMuX3BhZ2VJbmRleCl9X2Rlc3Ryb3koKXt0aGlzLmRlc3Ryb3llZD0hMDtjb25zdCB0PVtdO2Zvcihjb25zdCBlIG9mIHRoaXMuX2ludGVudFN0YXRlcy52YWx1ZXMoKSl7dGhpcy5fYWJvcnRPcGVyYXRvckxpc3Qoe2ludGVudFN0YXRlOmUscmVhc29uOm5ldyBFcnJvcigiUGFnZSB3YXMgZGVzdHJveWVkLiIpLGZvcmNlOiEwfSk7aWYoIWUub3BMaXN0UmVhZENhcGFiaWxpdHkpZm9yKGNvbnN0IHMgb2YgZS5yZW5kZXJUYXNrcyl7dC5wdXNoKHMuY29tcGxldGVkKTtzLmNhbmNlbCgpfX10aGlzLm9ianMuY2xlYXIoKTt0aGlzLiNpPSExO3RoaXMuI24oKTtyZXR1cm4gUHJvbWlzZS5hbGwodCl9Y2xlYW51cCh0PSExKXt0aGlzLiNpPSEwO2NvbnN0IGU9dGhpcy4jYSghMSk7dCYmZSYmKHRoaXMuX3N0YXRzJiY9bmV3IF9kaXNwbGF5X3V0aWxzLlN0YXRUaW1lcik7cmV0dXJuIGV9I2EodD0hMSl7dGhpcy4jbigpO2lmKCF0aGlzLiNpKXJldHVybiExO2lmKHQpe3RoaXMuI3M9c2V0VGltZW91dCgoKCk9Pnt0aGlzLiNzPW51bGw7dGhpcy4jYSghMSl9KSxERUxBWUVEX0NMRUFOVVBfVElNRU9VVCk7cmV0dXJuITF9Zm9yKGNvbnN0e3JlbmRlclRhc2tzOnQsb3BlcmF0b3JMaXN0OmV9b2YgdGhpcy5faW50ZW50U3RhdGVzLnZhbHVlcygpKWlmKHQuc2l6ZT4wfHwhZS5sYXN0Q2h1bmspcmV0dXJuITE7dGhpcy5faW50ZW50U3RhdGVzLmNsZWFyKCk7dGhpcy5vYmpzLmNsZWFyKCk7dGhpcy4jaT0hMTtyZXR1cm4hMH0jbigpe2lmKHRoaXMuI3Mpe2NsZWFyVGltZW91dCh0aGlzLiNzKTt0aGlzLiNzPW51bGx9fV9zdGFydFJlbmRlclBhZ2UodCxlKXtjb25zdCBzPXRoaXMuX2ludGVudFN0YXRlcy5nZXQoZSk7aWYocyl7dGhpcy5fc3RhdHM/LnRpbWVFbmQoIlBhZ2UgUmVxdWVzdCIpO3MuZGlzcGxheVJlYWR5Q2FwYWJpbGl0eT8ucmVzb2x2ZSh0KX19X3JlbmRlclBhZ2VDaHVuayh0LGUpe2ZvcihsZXQgcz0wLGk9dC5sZW5ndGg7czxpO3MrKyl7ZS5vcGVyYXRvckxpc3QuZm5BcnJheS5wdXNoKHQuZm5BcnJheVtzXSk7ZS5vcGVyYXRvckxpc3QuYXJnc0FycmF5LnB1c2godC5hcmdzQXJyYXlbc10pfWUub3BlcmF0b3JMaXN0Lmxhc3RDaHVuaz10Lmxhc3RDaHVuaztlLm9wZXJhdG9yTGlzdC5zZXBhcmF0ZUFubm90cz10LnNlcGFyYXRlQW5ub3RzO2Zvcihjb25zdCB0IG9mIGUucmVuZGVyVGFza3MpdC5vcGVyYXRvckxpc3RDaGFuZ2VkKCk7dC5sYXN0Q2h1bmsmJnRoaXMuI2EoITApfV9wdW1wT3BlcmF0b3JMaXN0KHtyZW5kZXJpbmdJbnRlbnQ6dCxjYWNoZUtleTplLGFubm90YXRpb25TdG9yYWdlTWFwOnN9KXtjb25zdCBpPXRoaXMuX3RyYW5zcG9ydC5tZXNzYWdlSGFuZGxlci5zZW5kV2l0aFN0cmVhbSgiR2V0T3BlcmF0b3JMaXN0Iix7cGFnZUluZGV4OnRoaXMuX3BhZ2VJbmRleCxpbnRlbnQ6dCxjYWNoZUtleTplLGFubm90YXRpb25TdG9yYWdlOnN9KS5nZXRSZWFkZXIoKSxuPXRoaXMuX2ludGVudFN0YXRlcy5nZXQoZSk7bi5zdHJlYW1SZWFkZXI9aTtjb25zdCBwdW1wPSgpPT57aS5yZWFkKCkudGhlbigoKHt2YWx1ZTp0LGRvbmU6ZX0pPT57aWYoZSluLnN0cmVhbVJlYWRlcj1udWxsO2Vsc2UgaWYoIXRoaXMuX3RyYW5zcG9ydC5kZXN0cm95ZWQpe3RoaXMuX3JlbmRlclBhZ2VDaHVuayh0LG4pO3B1bXAoKX19KSwodD0+e24uc3RyZWFtUmVhZGVyPW51bGw7aWYoIXRoaXMuX3RyYW5zcG9ydC5kZXN0cm95ZWQpe2lmKG4ub3BlcmF0b3JMaXN0KXtuLm9wZXJhdG9yTGlzdC5sYXN0Q2h1bms9ITA7Zm9yKGNvbnN0IHQgb2Ygbi5yZW5kZXJUYXNrcyl0Lm9wZXJhdG9yTGlzdENoYW5nZWQoKTt0aGlzLiNhKCEwKX1pZihuLmRpc3BsYXlSZWFkeUNhcGFiaWxpdHkpbi5kaXNwbGF5UmVhZHlDYXBhYmlsaXR5LnJlamVjdCh0KTtlbHNle2lmKCFuLm9wTGlzdFJlYWRDYXBhYmlsaXR5KXRocm93IHQ7bi5vcExpc3RSZWFkQ2FwYWJpbGl0eS5yZWplY3QodCl9fX0pKX07cHVtcCgpfV9hYm9ydE9wZXJhdG9yTGlzdCh7aW50ZW50U3RhdGU6dCxyZWFzb246ZSxmb3JjZTpzPSExfSl7aWYodC5zdHJlYW1SZWFkZXIpe2lmKHQuc3RyZWFtUmVhZGVyQ2FuY2VsVGltZW91dCl7Y2xlYXJUaW1lb3V0KHQuc3RyZWFtUmVhZGVyQ2FuY2VsVGltZW91dCk7dC5zdHJlYW1SZWFkZXJDYW5jZWxUaW1lb3V0PW51bGx9aWYoIXMpe2lmKHQucmVuZGVyVGFza3Muc2l6ZT4wKXJldHVybjtpZihlIGluc3RhbmNlb2YgX2Rpc3BsYXlfdXRpbHMuUmVuZGVyaW5nQ2FuY2VsbGVkRXhjZXB0aW9uKXtsZXQgcz1SRU5ERVJJTkdfQ0FOQ0VMTEVEX1RJTUVPVVQ7ZS5leHRyYURlbGF5PjAmJmUuZXh0cmFEZWxheTwxZTMmJihzKz1lLmV4dHJhRGVsYXkpO3Quc3RyZWFtUmVhZGVyQ2FuY2VsVGltZW91dD1zZXRUaW1lb3V0KCgoKT0+e3Quc3RyZWFtUmVhZGVyQ2FuY2VsVGltZW91dD1udWxsO3RoaXMuX2Fib3J0T3BlcmF0b3JMaXN0KHtpbnRlbnRTdGF0ZTp0LHJlYXNvbjplLGZvcmNlOiEwfSl9KSxzKTtyZXR1cm59fXQuc3RyZWFtUmVhZGVyLmNhbmNlbChuZXcgX3V0aWwuQWJvcnRFeGNlcHRpb24oZS5tZXNzYWdlKSkuY2F0Y2goKCgpPT57fSkpO3Quc3RyZWFtUmVhZGVyPW51bGw7aWYoIXRoaXMuX3RyYW5zcG9ydC5kZXN0cm95ZWQpe2Zvcihjb25zdFtlLHNdb2YgdGhpcy5faW50ZW50U3RhdGVzKWlmKHM9PT10KXt0aGlzLl9pbnRlbnRTdGF0ZXMuZGVsZXRlKGUpO2JyZWFrfXRoaXMuY2xlYW51cCgpfX19Z2V0IHN0YXRzKCl7cmV0dXJuIHRoaXMuX3N0YXRzfX1leHBvcnRzLlBERlBhZ2VQcm94eT1QREZQYWdlUHJveHk7Y2xhc3MgTG9vcGJhY2tQb3J0eyNyPW5ldyBTZXQ7I289UHJvbWlzZS5yZXNvbHZlKCk7cG9zdE1lc3NhZ2UodCxlKXtjb25zdCBzPXtkYXRhOnN0cnVjdHVyZWRDbG9uZSh0LGU/e3RyYW5zZmVyOmV9Om51bGwpfTt0aGlzLiNvLnRoZW4oKCgpPT57Zm9yKGNvbnN0IHQgb2YgdGhpcy4jcil0LmNhbGwodGhpcyxzKX0pKX1hZGRFdmVudExpc3RlbmVyKHQsZSl7dGhpcy4jci5hZGQoZSl9cmVtb3ZlRXZlbnRMaXN0ZW5lcih0LGUpe3RoaXMuI3IuZGVsZXRlKGUpfXRlcm1pbmF0ZSgpe3RoaXMuI3IuY2xlYXIoKX19ZXhwb3J0cy5Mb29wYmFja1BvcnQ9TG9vcGJhY2tQb3J0O2NvbnN0IFBERldvcmtlclV0aWw9e2lzV29ya2VyRGlzYWJsZWQ6ITEsZmFsbGJhY2tXb3JrZXJTcmM6bnVsbCxmYWtlV29ya2VySWQ6MH07ZXhwb3J0cy5QREZXb3JrZXJVdGlsPVBERldvcmtlclV0aWw7aWYoX2lzX25vZGUuaXNOb2RlSlMmJiJmdW5jdGlvbiI9PXR5cGVvZiByZXF1aXJlKXtQREZXb3JrZXJVdGlsLmlzV29ya2VyRGlzYWJsZWQ9ITA7UERGV29ya2VyVXRpbC5mYWxsYmFja1dvcmtlclNyYz0iLi9wZGYud29ya2VyLmpzIn1lbHNlIGlmKCJvYmplY3QiPT10eXBlb2YgZG9jdW1lbnQpe2NvbnN0IHQ9ZG9jdW1lbnQ/LmN1cnJlbnRTY3JpcHQ/LnNyYzt0JiYoUERGV29ya2VyVXRpbC5mYWxsYmFja1dvcmtlclNyYz10LnJlcGxhY2UoLyhcLig/Om1pblwuKT9qcykoXD8uKik/JC9pLCIud29ya2VyJDEkMiIpKX1QREZXb3JrZXJVdGlsLmlzU2FtZU9yaWdpbj1mdW5jdGlvbih0LGUpe2xldCBzO3RyeXtzPW5ldyBVUkwodCk7aWYoIXMub3JpZ2lufHwibnVsbCI9PT1zLm9yaWdpbilyZXR1cm4hMX1jYXRjaCh0KXtyZXR1cm4hMX1jb25zdCBpPW5ldyBVUkwoZSxzKTtyZXR1cm4gcy5vcmlnaW49PT1pLm9yaWdpbn07UERGV29ya2VyVXRpbC5jcmVhdGVDRE5XcmFwcGVyPWZ1bmN0aW9uKHQpe2NvbnN0IGU9YGltcG9ydFNjcmlwdHMoIiR7dH0iKTtgO3JldHVybiBVUkwuY3JlYXRlT2JqZWN0VVJMKG5ldyBCbG9iKFtlXSkpfTtjbGFzcyBQREZXb3JrZXJ7c3RhdGljI2w9bmV3IFdlYWtNYXA7Y29uc3RydWN0b3Ioe25hbWU6dD1udWxsLHBvcnQ6ZT1udWxsLHZlcmJvc2l0eTpzPSgwLF91dGlsLmdldFZlcmJvc2l0eUxldmVsKSgpfT17fSl7aWYoZSYmUERGV29ya2VyLiNsLmhhcyhlKSl0aHJvdyBuZXcgRXJyb3IoIkNhbm5vdCB1c2UgbW9yZSB0aGFuIG9uZSBQREZXb3JrZXIgcGVyIHBvcnQuIik7dGhpcy5uYW1lPXQ7dGhpcy5kZXN0cm95ZWQ9ITE7dGhpcy52ZXJib3NpdHk9czt0aGlzLl9yZWFkeUNhcGFiaWxpdHk9bmV3IF91dGlsLlByb21pc2VDYXBhYmlsaXR5O3RoaXMuX3BvcnQ9bnVsbDt0aGlzLl93ZWJXb3JrZXI9bnVsbDt0aGlzLl9tZXNzYWdlSGFuZGxlcj1udWxsO2lmKGUpe1BERldvcmtlci4jbC5zZXQoZSx0aGlzKTt0aGlzLl9pbml0aWFsaXplRnJvbVBvcnQoZSl9ZWxzZSB0aGlzLl9pbml0aWFsaXplKCl9Z2V0IHByb21pc2UoKXtyZXR1cm4gdGhpcy5fcmVhZHlDYXBhYmlsaXR5LnByb21pc2V9Z2V0IHBvcnQoKXtyZXR1cm4gdGhpcy5fcG9ydH1nZXQgbWVzc2FnZUhhbmRsZXIoKXtyZXR1cm4gdGhpcy5fbWVzc2FnZUhhbmRsZXJ9X2luaXRpYWxpemVGcm9tUG9ydCh0KXt0aGlzLl9wb3J0PXQ7dGhpcy5fbWVzc2FnZUhhbmRsZXI9bmV3IF9tZXNzYWdlX2hhbmRsZXIuTWVzc2FnZUhhbmRsZXIoIm1haW4iLCJ3b3JrZXIiLHQpO3RoaXMuX21lc3NhZ2VIYW5kbGVyLm9uKCJyZWFkeSIsKGZ1bmN0aW9uKCl7fSkpO3RoaXMuX3JlYWR5Q2FwYWJpbGl0eS5yZXNvbHZlKCk7dGhpcy5fbWVzc2FnZUhhbmRsZXIuc2VuZCgiY29uZmlndXJlIix7dmVyYm9zaXR5OnRoaXMudmVyYm9zaXR5fSl9X2luaXRpYWxpemUoKXtpZighUERGV29ya2VyVXRpbC5pc1dvcmtlckRpc2FibGVkJiYhUERGV29ya2VyLl9tYWluVGhyZWFkV29ya2VyTWVzc2FnZUhhbmRsZXIpe2xldHt3b3JrZXJTcmM6dH09UERGV29ya2VyO3RyeXtQREZXb3JrZXJVdGlsLmlzU2FtZU9yaWdpbih3aW5kb3cubG9jYXRpb24uaHJlZix0KXx8KHQ9UERGV29ya2VyVXRpbC5jcmVhdGVDRE5XcmFwcGVyKG5ldyBVUkwodCx3aW5kb3cubG9jYXRpb24pLmhyZWYpKTtjb25zdCBlPW5ldyBXb3JrZXIodCkscz1uZXcgX21lc3NhZ2VfaGFuZGxlci5NZXNzYWdlSGFuZGxlcigibWFpbiIsIndvcmtlciIsZSksdGVybWluYXRlRWFybHk9KCk9PntlLnJlbW92ZUV2ZW50TGlzdGVuZXIoImVycm9yIixvbldvcmtlckVycm9yKTtzLmRlc3Ryb3koKTtlLnRlcm1pbmF0ZSgpO3RoaXMuZGVzdHJveWVkP3RoaXMuX3JlYWR5Q2FwYWJpbGl0eS5yZWplY3QobmV3IEVycm9yKCJXb3JrZXIgd2FzIGRlc3Ryb3llZCIpKTp0aGlzLl9zZXR1cEZha2VXb3JrZXIoKX0sb25Xb3JrZXJFcnJvcj0oKT0+e3RoaXMuX3dlYldvcmtlcnx8dGVybWluYXRlRWFybHkoKX07ZS5hZGRFdmVudExpc3RlbmVyKCJlcnJvciIsb25Xb3JrZXJFcnJvcik7cy5vbigidGVzdCIsKHQ9PntlLnJlbW92ZUV2ZW50TGlzdGVuZXIoImVycm9yIixvbldvcmtlckVycm9yKTtpZih0aGlzLmRlc3Ryb3llZCl0ZXJtaW5hdGVFYXJseSgpO2Vsc2UgaWYodCl7dGhpcy5fbWVzc2FnZUhhbmRsZXI9czt0aGlzLl9wb3J0PWU7dGhpcy5fd2ViV29ya2VyPWU7dGhpcy5fcmVhZHlDYXBhYmlsaXR5LnJlc29sdmUoKTtzLnNlbmQoImNvbmZpZ3VyZSIse3ZlcmJvc2l0eTp0aGlzLnZlcmJvc2l0eX0pfWVsc2V7dGhpcy5fc2V0dXBGYWtlV29ya2VyKCk7cy5kZXN0cm95KCk7ZS50ZXJtaW5hdGUoKX19KSk7cy5vbigicmVhZHkiLCh0PT57ZS5yZW1vdmVFdmVudExpc3RlbmVyKCJlcnJvciIsb25Xb3JrZXJFcnJvcik7aWYodGhpcy5kZXN0cm95ZWQpdGVybWluYXRlRWFybHkoKTtlbHNlIHRyeXtzZW5kVGVzdCgpfWNhdGNoKHQpe3RoaXMuX3NldHVwRmFrZVdvcmtlcigpfX0pKTtjb25zdCBzZW5kVGVzdD0oKT0+e2NvbnN0IHQ9bmV3IFVpbnQ4QXJyYXk7cy5zZW5kKCJ0ZXN0Iix0LFt0LmJ1ZmZlcl0pfTtzZW5kVGVzdCgpO3JldHVybn1jYXRjaCh0KXsoMCxfdXRpbC5pbmZvKSgiVGhlIHdvcmtlciBoYXMgYmVlbiBkaXNhYmxlZC4iKX19dGhpcy5fc2V0dXBGYWtlV29ya2VyKCl9X3NldHVwRmFrZVdvcmtlcigpe2lmKCFQREZXb3JrZXJVdGlsLmlzV29ya2VyRGlzYWJsZWQpeygwLF91dGlsLndhcm4pKCJTZXR0aW5nIHVwIGZha2Ugd29ya2VyLiIpO1BERldvcmtlclV0aWwuaXNXb3JrZXJEaXNhYmxlZD0hMH1QREZXb3JrZXIuX3NldHVwRmFrZVdvcmtlckdsb2JhbC50aGVuKCh0PT57aWYodGhpcy5kZXN0cm95ZWQpe3RoaXMuX3JlYWR5Q2FwYWJpbGl0eS5yZWplY3QobmV3IEVycm9yKCJXb3JrZXIgd2FzIGRlc3Ryb3llZCIpKTtyZXR1cm59Y29uc3QgZT1uZXcgTG9vcGJhY2tQb3J0O3RoaXMuX3BvcnQ9ZTtjb25zdCBzPSJmYWtlIitQREZXb3JrZXJVdGlsLmZha2VXb3JrZXJJZCsrLGk9bmV3IF9tZXNzYWdlX2hhbmRsZXIuTWVzc2FnZUhhbmRsZXIocysiX3dvcmtlciIscyxlKTt0LnNldHVwKGksZSk7Y29uc3Qgbj1uZXcgX21lc3NhZ2VfaGFuZGxlci5NZXNzYWdlSGFuZGxlcihzLHMrIl93b3JrZXIiLGUpO3RoaXMuX21lc3NhZ2VIYW5kbGVyPW47dGhpcy5fcmVhZHlDYXBhYmlsaXR5LnJlc29sdmUoKTtuLnNlbmQoImNvbmZpZ3VyZSIse3ZlcmJvc2l0eTp0aGlzLnZlcmJvc2l0eX0pfSkpLmNhdGNoKCh0PT57dGhpcy5fcmVhZHlDYXBhYmlsaXR5LnJlamVjdChuZXcgRXJyb3IoYFNldHRpbmcgdXAgZmFrZSB3b3JrZXIgZmFpbGVkOiAiJHt0Lm1lc3NhZ2V9Ii5gKSl9KSl9ZGVzdHJveSgpe3RoaXMuZGVzdHJveWVkPSEwO2lmKHRoaXMuX3dlYldvcmtlcil7dGhpcy5fd2ViV29ya2VyLnRlcm1pbmF0ZSgpO3RoaXMuX3dlYldvcmtlcj1udWxsfVBERldvcmtlci4jbC5kZWxldGUodGhpcy5fcG9ydCk7dGhpcy5fcG9ydD1udWxsO2lmKHRoaXMuX21lc3NhZ2VIYW5kbGVyKXt0aGlzLl9tZXNzYWdlSGFuZGxlci5kZXN0cm95KCk7dGhpcy5fbWVzc2FnZUhhbmRsZXI9bnVsbH19c3RhdGljIGZyb21Qb3J0KHQpe2lmKCF0Py5wb3J0KXRocm93IG5ldyBFcnJvcigiUERGV29ya2VyLmZyb21Qb3J0IC0gaW52YWxpZCBtZXRob2Qgc2lnbmF0dXJlLiIpO3JldHVybiB0aGlzLiNsLmhhcyh0LnBvcnQpP3RoaXMuI2wuZ2V0KHQucG9ydCk6bmV3IFBERldvcmtlcih0KX1zdGF0aWMgZ2V0IHdvcmtlclNyYygpe2lmKF93b3JrZXJfb3B0aW9ucy5HbG9iYWxXb3JrZXJPcHRpb25zLndvcmtlclNyYylyZXR1cm4gX3dvcmtlcl9vcHRpb25zLkdsb2JhbFdvcmtlck9wdGlvbnMud29ya2VyU3JjO2lmKG51bGwhPT1QREZXb3JrZXJVdGlsLmZhbGxiYWNrV29ya2VyU3JjKXtfaXNfbm9kZS5pc05vZGVKU3x8KDAsX2Rpc3BsYXlfdXRpbHMuZGVwcmVjYXRlZCkoJ05vICJHbG9iYWxXb3JrZXJPcHRpb25zLndvcmtlclNyYyIgc3BlY2lmaWVkLicpO3JldHVybiBQREZXb3JrZXJVdGlsLmZhbGxiYWNrV29ya2VyU3JjfXRocm93IG5ldyBFcnJvcignTm8gIkdsb2JhbFdvcmtlck9wdGlvbnMud29ya2VyU3JjIiBzcGVjaWZpZWQuJyl9c3RhdGljIGdldCBfbWFpblRocmVhZFdvcmtlck1lc3NhZ2VIYW5kbGVyKCl7dHJ5e3JldHVybiBnbG9iYWxUaGlzLnBkZmpzV29ya2VyPy5Xb3JrZXJNZXNzYWdlSGFuZGxlcnx8bnVsbH1jYXRjaCh0KXtyZXR1cm4gbnVsbH19c3RhdGljIGdldCBfc2V0dXBGYWtlV29ya2VyR2xvYmFsKCl7Y29uc3QgbG9hZGVyPWFzeW5jKCk9Pntjb25zdCBtYWluV29ya2VyTWVzc2FnZUhhbmRsZXI9dGhpcy5fbWFpblRocmVhZFdvcmtlck1lc3NhZ2VIYW5kbGVyO2lmKG1haW5Xb3JrZXJNZXNzYWdlSGFuZGxlcilyZXR1cm4gbWFpbldvcmtlck1lc3NhZ2VIYW5kbGVyO2lmKF9pc19ub2RlLmlzTm9kZUpTJiYiZnVuY3Rpb24iPT10eXBlb2YgcmVxdWlyZSl7Y29uc3Qgd29ya2VyPWV2YWwoInJlcXVpcmUiKSh0aGlzLndvcmtlclNyYyk7cmV0dXJuIHdvcmtlci5Xb3JrZXJNZXNzYWdlSGFuZGxlcn1hd2FpdCgwLF9kaXNwbGF5X3V0aWxzLmxvYWRTY3JpcHQpKHRoaXMud29ya2VyU3JjKTtyZXR1cm4gd2luZG93LnBkZmpzV29ya2VyLldvcmtlck1lc3NhZ2VIYW5kbGVyfTtyZXR1cm4oMCxfdXRpbC5zaGFkb3cpKHRoaXMsIl9zZXR1cEZha2VXb3JrZXJHbG9iYWwiLGxvYWRlcigpKX19ZXhwb3J0cy5QREZXb3JrZXI9UERGV29ya2VyO2NsYXNzIFdvcmtlclRyYW5zcG9ydHsjYz1uZXcgTWFwOyNoPW5ldyBNYXA7I2Q9bmV3IE1hcDtjb25zdHJ1Y3Rvcih0LGUscyxpLG4pe3RoaXMubWVzc2FnZUhhbmRsZXI9dDt0aGlzLmxvYWRpbmdUYXNrPWU7dGhpcy5jb21tb25PYmpzPW5ldyBQREZPYmplY3RzO3RoaXMuZm9udExvYWRlcj1uZXcgX2ZvbnRfbG9hZGVyLkZvbnRMb2FkZXIoe293bmVyRG9jdW1lbnQ6aS5vd25lckRvY3VtZW50LHN0eWxlRWxlbWVudDppLnN0eWxlRWxlbWVudH0pO3RoaXMuX3BhcmFtcz1pO3RoaXMuY2FudmFzRmFjdG9yeT1uLmNhbnZhc0ZhY3Rvcnk7dGhpcy5maWx0ZXJGYWN0b3J5PW4uZmlsdGVyRmFjdG9yeTt0aGlzLmNNYXBSZWFkZXJGYWN0b3J5PW4uY01hcFJlYWRlckZhY3Rvcnk7dGhpcy5zdGFuZGFyZEZvbnREYXRhRmFjdG9yeT1uLnN0YW5kYXJkRm9udERhdGFGYWN0b3J5O3RoaXMuZGVzdHJveWVkPSExO3RoaXMuZGVzdHJveUNhcGFiaWxpdHk9bnVsbDt0aGlzLl9wYXNzd29yZENhcGFiaWxpdHk9bnVsbDt0aGlzLl9uZXR3b3JrU3RyZWFtPXM7dGhpcy5fZnVsbFJlYWRlcj1udWxsO3RoaXMuX2xhc3RQcm9ncmVzcz1udWxsO3RoaXMuZG93bmxvYWRJbmZvQ2FwYWJpbGl0eT1uZXcgX3V0aWwuUHJvbWlzZUNhcGFiaWxpdHk7dGhpcy5zZXR1cE1lc3NhZ2VIYW5kbGVyKCl9I3UodCxlPW51bGwpe2NvbnN0IHM9dGhpcy4jYy5nZXQodCk7aWYocylyZXR1cm4gcztjb25zdCBpPXRoaXMubWVzc2FnZUhhbmRsZXIuc2VuZFdpdGhQcm9taXNlKHQsZSk7dGhpcy4jYy5zZXQodCxpKTtyZXR1cm4gaX1nZXQgYW5ub3RhdGlvblN0b3JhZ2UoKXtyZXR1cm4oMCxfdXRpbC5zaGFkb3cpKHRoaXMsImFubm90YXRpb25TdG9yYWdlIixuZXcgX2Fubm90YXRpb25fc3RvcmFnZS5Bbm5vdGF0aW9uU3RvcmFnZSl9Z2V0UmVuZGVyaW5nSW50ZW50KHQsZT1fdXRpbC5Bbm5vdGF0aW9uTW9kZS5FTkFCTEUscz1udWxsLGk9ITEpe2xldCBuPV91dGlsLlJlbmRlcmluZ0ludGVudEZsYWcuRElTUExBWSxhPW51bGw7c3dpdGNoKHQpe2Nhc2UiYW55IjpuPV91dGlsLlJlbmRlcmluZ0ludGVudEZsYWcuQU5ZO2JyZWFrO2Nhc2UiZGlzcGxheSI6YnJlYWs7Y2FzZSJwcmludCI6bj1fdXRpbC5SZW5kZXJpbmdJbnRlbnRGbGFnLlBSSU5UO2JyZWFrO2RlZmF1bHQ6KDAsX3V0aWwud2FybikoYGdldFJlbmRlcmluZ0ludGVudCAtIGludmFsaWQgaW50ZW50OiAke3R9YCl9c3dpdGNoKGUpe2Nhc2UgX3V0aWwuQW5ub3RhdGlvbk1vZGUuRElTQUJMRTpuKz1fdXRpbC5SZW5kZXJpbmdJbnRlbnRGbGFnLkFOTk9UQVRJT05TX0RJU0FCTEU7YnJlYWs7Y2FzZSBfdXRpbC5Bbm5vdGF0aW9uTW9kZS5FTkFCTEU6YnJlYWs7Y2FzZSBfdXRpbC5Bbm5vdGF0aW9uTW9kZS5FTkFCTEVfRk9STVM6bis9X3V0aWwuUmVuZGVyaW5nSW50ZW50RmxhZy5BTk5PVEFUSU9OU19GT1JNUzticmVhaztjYXNlIF91dGlsLkFubm90YXRpb25Nb2RlLkVOQUJMRV9TVE9SQUdFOm4rPV91dGlsLlJlbmRlcmluZ0ludGVudEZsYWcuQU5OT1RBVElPTlNfU1RPUkFHRTthPShuJl91dGlsLlJlbmRlcmluZ0ludGVudEZsYWcuUFJJTlQmJnMgaW5zdGFuY2VvZiBfYW5ub3RhdGlvbl9zdG9yYWdlLlByaW50QW5ub3RhdGlvblN0b3JhZ2U/czp0aGlzLmFubm90YXRpb25TdG9yYWdlKS5zZXJpYWxpemFibGU7YnJlYWs7ZGVmYXVsdDooMCxfdXRpbC53YXJuKShgZ2V0UmVuZGVyaW5nSW50ZW50IC0gaW52YWxpZCBhbm5vdGF0aW9uTW9kZTogJHtlfWApfWkmJihuKz1fdXRpbC5SZW5kZXJpbmdJbnRlbnRGbGFnLk9QTElTVCk7cmV0dXJue3JlbmRlcmluZ0ludGVudDpuLGNhY2hlS2V5OmAke259XyR7X2Fubm90YXRpb25fc3RvcmFnZS5Bbm5vdGF0aW9uU3RvcmFnZS5nZXRIYXNoKGEpfWAsYW5ub3RhdGlvblN0b3JhZ2VNYXA6YX19ZGVzdHJveSgpe2lmKHRoaXMuZGVzdHJveUNhcGFiaWxpdHkpcmV0dXJuIHRoaXMuZGVzdHJveUNhcGFiaWxpdHkucHJvbWlzZTt0aGlzLmRlc3Ryb3llZD0hMDt0aGlzLmRlc3Ryb3lDYXBhYmlsaXR5PW5ldyBfdXRpbC5Qcm9taXNlQ2FwYWJpbGl0eTt0aGlzLl9wYXNzd29yZENhcGFiaWxpdHkmJnRoaXMuX3Bhc3N3b3JkQ2FwYWJpbGl0eS5yZWplY3QobmV3IEVycm9yKCJXb3JrZXIgd2FzIGRlc3Ryb3llZCBkdXJpbmcgb25QYXNzd29yZCBjYWxsYmFjayIpKTtjb25zdCB0PVtdO2Zvcihjb25zdCBlIG9mIHRoaXMuI2gudmFsdWVzKCkpdC5wdXNoKGUuX2Rlc3Ryb3koKSk7dGhpcy4jaC5jbGVhcigpO3RoaXMuI2QuY2xlYXIoKTt0aGlzLmhhc093blByb3BlcnR5KCJhbm5vdGF0aW9uU3RvcmFnZSIpJiZ0aGlzLmFubm90YXRpb25TdG9yYWdlLnJlc2V0TW9kaWZpZWQoKTtjb25zdCBlPXRoaXMubWVzc2FnZUhhbmRsZXIuc2VuZFdpdGhQcm9taXNlKCJUZXJtaW5hdGUiLG51bGwpO3QucHVzaChlKTtQcm9taXNlLmFsbCh0KS50aGVuKCgoKT0+e3RoaXMuY29tbW9uT2Jqcy5jbGVhcigpO3RoaXMuZm9udExvYWRlci5jbGVhcigpO3RoaXMuI2MuY2xlYXIoKTt0aGlzLmZpbHRlckZhY3RvcnkuZGVzdHJveSgpO3RoaXMuX25ldHdvcmtTdHJlYW0mJnRoaXMuX25ldHdvcmtTdHJlYW0uY2FuY2VsQWxsUmVxdWVzdHMobmV3IF91dGlsLkFib3J0RXhjZXB0aW9uKCJXb3JrZXIgd2FzIHRlcm1pbmF0ZWQuIikpO2lmKHRoaXMubWVzc2FnZUhhbmRsZXIpe3RoaXMubWVzc2FnZUhhbmRsZXIuZGVzdHJveSgpO3RoaXMubWVzc2FnZUhhbmRsZXI9bnVsbH10aGlzLmRlc3Ryb3lDYXBhYmlsaXR5LnJlc29sdmUoKX0pLHRoaXMuZGVzdHJveUNhcGFiaWxpdHkucmVqZWN0KTtyZXR1cm4gdGhpcy5kZXN0cm95Q2FwYWJpbGl0eS5wcm9taXNlfXNldHVwTWVzc2FnZUhhbmRsZXIoKXtjb25zdHttZXNzYWdlSGFuZGxlcjp0LGxvYWRpbmdUYXNrOmV9PXRoaXM7dC5vbigiR2V0UmVhZGVyIiwoKHQsZSk9PnsoMCxfdXRpbC5hc3NlcnQpKHRoaXMuX25ldHdvcmtTdHJlYW0sIkdldFJlYWRlciAtIG5vIGBJUERGU3RyZWFtYCBpbnN0YW5jZSBhdmFpbGFibGUuIik7dGhpcy5fZnVsbFJlYWRlcj10aGlzLl9uZXR3b3JrU3RyZWFtLmdldEZ1bGxSZWFkZXIoKTt0aGlzLl9mdWxsUmVhZGVyLm9uUHJvZ3Jlc3M9dD0+e3RoaXMuX2xhc3RQcm9ncmVzcz17bG9hZGVkOnQubG9hZGVkLHRvdGFsOnQudG90YWx9fTtlLm9uUHVsbD0oKT0+e3RoaXMuX2Z1bGxSZWFkZXIucmVhZCgpLnRoZW4oKGZ1bmN0aW9uKHt2YWx1ZTp0LGRvbmU6c30pe2lmKHMpZS5jbG9zZSgpO2Vsc2V7KDAsX3V0aWwuYXNzZXJ0KSh0IGluc3RhbmNlb2YgQXJyYXlCdWZmZXIsIkdldFJlYWRlciAtIGV4cGVjdGVkIGFuIEFycmF5QnVmZmVyLiIpO2UuZW5xdWV1ZShuZXcgVWludDhBcnJheSh0KSwxLFt0XSl9fSkpLmNhdGNoKCh0PT57ZS5lcnJvcih0KX0pKX07ZS5vbkNhbmNlbD10PT57dGhpcy5fZnVsbFJlYWRlci5jYW5jZWwodCk7ZS5yZWFkeS5jYXRjaCgodD0+e2lmKCF0aGlzLmRlc3Ryb3llZCl0aHJvdyB0fSkpfX0pKTt0Lm9uKCJSZWFkZXJIZWFkZXJzUmVhZHkiLCh0PT57Y29uc3Qgcz1uZXcgX3V0aWwuUHJvbWlzZUNhcGFiaWxpdHksaT10aGlzLl9mdWxsUmVhZGVyO2kuaGVhZGVyc1JlYWR5LnRoZW4oKCgpPT57aWYoIWkuaXNTdHJlYW1pbmdTdXBwb3J0ZWR8fCFpLmlzUmFuZ2VTdXBwb3J0ZWQpe3RoaXMuX2xhc3RQcm9ncmVzcyYmZS5vblByb2dyZXNzPy4odGhpcy5fbGFzdFByb2dyZXNzKTtpLm9uUHJvZ3Jlc3M9dD0+e2Uub25Qcm9ncmVzcz8uKHtsb2FkZWQ6dC5sb2FkZWQsdG90YWw6dC50b3RhbH0pfX1zLnJlc29sdmUoe2lzU3RyZWFtaW5nU3VwcG9ydGVkOmkuaXNTdHJlYW1pbmdTdXBwb3J0ZWQsaXNSYW5nZVN1cHBvcnRlZDppLmlzUmFuZ2VTdXBwb3J0ZWQsY29udGVudExlbmd0aDppLmNvbnRlbnRMZW5ndGh9KX0pLHMucmVqZWN0KTtyZXR1cm4gcy5wcm9taXNlfSkpO3Qub24oIkdldFJhbmdlUmVhZGVyIiwoKHQsZSk9PnsoMCxfdXRpbC5hc3NlcnQpKHRoaXMuX25ldHdvcmtTdHJlYW0sIkdldFJhbmdlUmVhZGVyIC0gbm8gYElQREZTdHJlYW1gIGluc3RhbmNlIGF2YWlsYWJsZS4iKTtjb25zdCBzPXRoaXMuX25ldHdvcmtTdHJlYW0uZ2V0UmFuZ2VSZWFkZXIodC5iZWdpbix0LmVuZCk7aWYocyl7ZS5vblB1bGw9KCk9PntzLnJlYWQoKS50aGVuKChmdW5jdGlvbih7dmFsdWU6dCxkb25lOnN9KXtpZihzKWUuY2xvc2UoKTtlbHNleygwLF91dGlsLmFzc2VydCkodCBpbnN0YW5jZW9mIEFycmF5QnVmZmVyLCJHZXRSYW5nZVJlYWRlciAtIGV4cGVjdGVkIGFuIEFycmF5QnVmZmVyLiIpO2UuZW5xdWV1ZShuZXcgVWludDhBcnJheSh0KSwxLFt0XSl9fSkpLmNhdGNoKCh0PT57ZS5lcnJvcih0KX0pKX07ZS5vbkNhbmNlbD10PT57cy5jYW5jZWwodCk7ZS5yZWFkeS5jYXRjaCgodD0+e2lmKCF0aGlzLmRlc3Ryb3llZCl0aHJvdyB0fSkpfX1lbHNlIGUuY2xvc2UoKX0pKTt0Lm9uKCJHZXREb2MiLCgoe3BkZkluZm86dH0pPT57dGhpcy5fbnVtUGFnZXM9dC5udW1QYWdlczt0aGlzLl9odG1sRm9yWGZhPXQuaHRtbEZvclhmYTtkZWxldGUgdC5odG1sRm9yWGZhO2UuX2NhcGFiaWxpdHkucmVzb2x2ZShuZXcgUERGRG9jdW1lbnRQcm94eSh0LHRoaXMpKX0pKTt0Lm9uKCJEb2NFeGNlcHRpb24iLChmdW5jdGlvbih0KXtsZXQgcztzd2l0Y2godC5uYW1lKXtjYXNlIlBhc3N3b3JkRXhjZXB0aW9uIjpzPW5ldyBfdXRpbC5QYXNzd29yZEV4Y2VwdGlvbih0Lm1lc3NhZ2UsdC5jb2RlKTticmVhaztjYXNlIkludmFsaWRQREZFeGNlcHRpb24iOnM9bmV3IF91dGlsLkludmFsaWRQREZFeGNlcHRpb24odC5tZXNzYWdlKTticmVhaztjYXNlIk1pc3NpbmdQREZFeGNlcHRpb24iOnM9bmV3IF91dGlsLk1pc3NpbmdQREZFeGNlcHRpb24odC5tZXNzYWdlKTticmVhaztjYXNlIlVuZXhwZWN0ZWRSZXNwb25zZUV4Y2VwdGlvbiI6cz1uZXcgX3V0aWwuVW5leHBlY3RlZFJlc3BvbnNlRXhjZXB0aW9uKHQubWVzc2FnZSx0LnN0YXR1cyk7YnJlYWs7Y2FzZSJVbmtub3duRXJyb3JFeGNlcHRpb24iOnM9bmV3IF91dGlsLlVua25vd25FcnJvckV4Y2VwdGlvbih0Lm1lc3NhZ2UsdC5kZXRhaWxzKTticmVhaztkZWZhdWx0OigwLF91dGlsLnVucmVhY2hhYmxlKSgiRG9jRXhjZXB0aW9uIC0gZXhwZWN0ZWQgYSB2YWxpZCBFcnJvci4iKX1lLl9jYXBhYmlsaXR5LnJlamVjdChzKX0pKTt0Lm9uKCJQYXNzd29yZFJlcXVlc3QiLCh0PT57dGhpcy5fcGFzc3dvcmRDYXBhYmlsaXR5PW5ldyBfdXRpbC5Qcm9taXNlQ2FwYWJpbGl0eTtpZihlLm9uUGFzc3dvcmQpe2NvbnN0IHVwZGF0ZVBhc3N3b3JkPXQ9Pnt0IGluc3RhbmNlb2YgRXJyb3I/dGhpcy5fcGFzc3dvcmRDYXBhYmlsaXR5LnJlamVjdCh0KTp0aGlzLl9wYXNzd29yZENhcGFiaWxpdHkucmVzb2x2ZSh7cGFzc3dvcmQ6dH0pfTt0cnl7ZS5vblBhc3N3b3JkKHVwZGF0ZVBhc3N3b3JkLHQuY29kZSl9Y2F0Y2godCl7dGhpcy5fcGFzc3dvcmRDYXBhYmlsaXR5LnJlamVjdCh0KX19ZWxzZSB0aGlzLl9wYXNzd29yZENhcGFiaWxpdHkucmVqZWN0KG5ldyBfdXRpbC5QYXNzd29yZEV4Y2VwdGlvbih0Lm1lc3NhZ2UsdC5jb2RlKSk7cmV0dXJuIHRoaXMuX3Bhc3N3b3JkQ2FwYWJpbGl0eS5wcm9taXNlfSkpO3Qub24oIkRhdGFMb2FkZWQiLCh0PT57ZS5vblByb2dyZXNzPy4oe2xvYWRlZDp0Lmxlbmd0aCx0b3RhbDp0Lmxlbmd0aH0pO3RoaXMuZG93bmxvYWRJbmZvQ2FwYWJpbGl0eS5yZXNvbHZlKHQpfSkpO3Qub24oIlN0YXJ0UmVuZGVyUGFnZSIsKHQ9PntpZih0aGlzLmRlc3Ryb3llZClyZXR1cm47dGhpcy4jaC5nZXQodC5wYWdlSW5kZXgpLl9zdGFydFJlbmRlclBhZ2UodC50cmFuc3BhcmVuY3ksdC5jYWNoZUtleSl9KSk7dC5vbigiY29tbW9ub2JqIiwoKFtlLHMsaV0pPT57aWYoIXRoaXMuZGVzdHJveWVkJiYhdGhpcy5jb21tb25PYmpzLmhhcyhlKSlzd2l0Y2gocyl7Y2FzZSJGb250Ijpjb25zdCBuPXRoaXMuX3BhcmFtcztpZigiZXJyb3IiaW4gaSl7Y29uc3QgdD1pLmVycm9yOygwLF91dGlsLndhcm4pKGBFcnJvciBkdXJpbmcgZm9udCBsb2FkaW5nOiAke3R9YCk7dGhpcy5jb21tb25PYmpzLnJlc29sdmUoZSx0KTticmVha31jb25zdCBhPW4ucGRmQnVnJiZnbG9iYWxUaGlzLkZvbnRJbnNwZWN0b3I/LmVuYWJsZWQ/KHQsZSk9Pmdsb2JhbFRoaXMuRm9udEluc3BlY3Rvci5mb250QWRkZWQodCxlKTpudWxsLHI9bmV3IF9mb250X2xvYWRlci5Gb250RmFjZU9iamVjdChpLHtpc0V2YWxTdXBwb3J0ZWQ6bi5pc0V2YWxTdXBwb3J0ZWQsZGlzYWJsZUZvbnRGYWNlOm4uZGlzYWJsZUZvbnRGYWNlLGlnbm9yZUVycm9yczpuLmlnbm9yZUVycm9ycyxpbnNwZWN0Rm9udDphfSk7dGhpcy5mb250TG9hZGVyLmJpbmQocikuY2F0Y2goKHM9PnQuc2VuZFdpdGhQcm9taXNlKCJGb250RmFsbGJhY2siLHtpZDplfSkpKS5maW5hbGx5KCgoKT0+eyFuLmZvbnRFeHRyYVByb3BlcnRpZXMmJnIuZGF0YSYmKHIuZGF0YT1udWxsKTt0aGlzLmNvbW1vbk9ianMucmVzb2x2ZShlLHIpfSkpO2JyZWFrO2Nhc2UiRm9udFBhdGgiOmNhc2UiSW1hZ2UiOmNhc2UiUGF0dGVybiI6dGhpcy5jb21tb25PYmpzLnJlc29sdmUoZSxpKTticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcihgR290IHVua25vd24gY29tbW9uIG9iamVjdCB0eXBlICR7c31gKX19KSk7dC5vbigib2JqIiwoKFt0LGUscyxpXSk9PntpZih0aGlzLmRlc3Ryb3llZClyZXR1cm47Y29uc3Qgbj10aGlzLiNoLmdldChlKTtpZighbi5vYmpzLmhhcyh0KSlzd2l0Y2gocyl7Y2FzZSJJbWFnZSI6bi5vYmpzLnJlc29sdmUodCxpKTtpZihpKXtsZXQgdDtpZihpLmJpdG1hcCl7Y29uc3R7d2lkdGg6ZSxoZWlnaHQ6c309aTt0PWUqcyo0fWVsc2UgdD1pLmRhdGE/Lmxlbmd0aHx8MDt0Pl91dGlsLk1BWF9JTUFHRV9TSVpFX1RPX0NBQ0hFJiYobi5fbWF5YmVDbGVhbnVwQWZ0ZXJSZW5kZXI9ITApfWJyZWFrO2Nhc2UiUGF0dGVybiI6bi5vYmpzLnJlc29sdmUodCxpKTticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcihgR290IHVua25vd24gb2JqZWN0IHR5cGUgJHtzfWApfX0pKTt0Lm9uKCJEb2NQcm9ncmVzcyIsKHQ9Pnt0aGlzLmRlc3Ryb3llZHx8ZS5vblByb2dyZXNzPy4oe2xvYWRlZDp0LmxvYWRlZCx0b3RhbDp0LnRvdGFsfSl9KSk7dC5vbigiRmV0Y2hCdWlsdEluQ01hcCIsKHQ9PnRoaXMuZGVzdHJveWVkP1Byb21pc2UucmVqZWN0KG5ldyBFcnJvcigiV29ya2VyIHdhcyBkZXN0cm95ZWQuIikpOnRoaXMuY01hcFJlYWRlckZhY3Rvcnk/dGhpcy5jTWFwUmVhZGVyRmFjdG9yeS5mZXRjaCh0KTpQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoIkNNYXBSZWFkZXJGYWN0b3J5IG5vdCBpbml0aWFsaXplZCwgc2VlIHRoZSBgdXNlV29ya2VyRmV0Y2hgIHBhcmFtZXRlci4iKSkpKTt0Lm9uKCJGZXRjaFN0YW5kYXJkRm9udERhdGEiLCh0PT50aGlzLmRlc3Ryb3llZD9Qcm9taXNlLnJlamVjdChuZXcgRXJyb3IoIldvcmtlciB3YXMgZGVzdHJveWVkLiIpKTp0aGlzLnN0YW5kYXJkRm9udERhdGFGYWN0b3J5P3RoaXMuc3RhbmRhcmRGb250RGF0YUZhY3RvcnkuZmV0Y2godCk6UHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCJTdGFuZGFyZEZvbnREYXRhRmFjdG9yeSBub3QgaW5pdGlhbGl6ZWQsIHNlZSB0aGUgYHVzZVdvcmtlckZldGNoYCBwYXJhbWV0ZXIuIikpKSl9Z2V0RGF0YSgpe3JldHVybiB0aGlzLm1lc3NhZ2VIYW5kbGVyLnNlbmRXaXRoUHJvbWlzZSgiR2V0RGF0YSIsbnVsbCl9c2F2ZURvY3VtZW50KCl7dGhpcy5hbm5vdGF0aW9uU3RvcmFnZS5zaXplPD0wJiYoMCxfdXRpbC53YXJuKSgic2F2ZURvY3VtZW50IGNhbGxlZCB3aGlsZSBgYW5ub3RhdGlvblN0b3JhZ2VgIGlzIGVtcHR5LCBwbGVhc2UgdXNlIHRoZSBnZXREYXRhLW1ldGhvZCBpbnN0ZWFkLiIpO3JldHVybiB0aGlzLm1lc3NhZ2VIYW5kbGVyLnNlbmRXaXRoUHJvbWlzZSgiU2F2ZURvY3VtZW50Iix7aXNQdXJlWGZhOiEhdGhpcy5faHRtbEZvclhmYSxudW1QYWdlczp0aGlzLl9udW1QYWdlcyxhbm5vdGF0aW9uU3RvcmFnZTp0aGlzLmFubm90YXRpb25TdG9yYWdlLnNlcmlhbGl6YWJsZSxmaWxlbmFtZTp0aGlzLl9mdWxsUmVhZGVyPy5maWxlbmFtZT8/bnVsbH0pLmZpbmFsbHkoKCgpPT57dGhpcy5hbm5vdGF0aW9uU3RvcmFnZS5yZXNldE1vZGlmaWVkKCl9KSl9Z2V0UGFnZSh0KXtpZighTnVtYmVyLmlzSW50ZWdlcih0KXx8dDw9MHx8dD50aGlzLl9udW1QYWdlcylyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCJJbnZhbGlkIHBhZ2UgcmVxdWVzdC4iKSk7Y29uc3QgZT10LTEscz10aGlzLiNkLmdldChlKTtpZihzKXJldHVybiBzO2NvbnN0IGk9dGhpcy5tZXNzYWdlSGFuZGxlci5zZW5kV2l0aFByb21pc2UoIkdldFBhZ2UiLHtwYWdlSW5kZXg6ZX0pLnRoZW4oKHQ9PntpZih0aGlzLmRlc3Ryb3llZCl0aHJvdyBuZXcgRXJyb3IoIlRyYW5zcG9ydCBkZXN0cm95ZWQiKTtjb25zdCBzPW5ldyBQREZQYWdlUHJveHkoZSx0LHRoaXMsdGhpcy5fcGFyYW1zLnBkZkJ1Zyk7dGhpcy4jaC5zZXQoZSxzKTtyZXR1cm4gc30pKTt0aGlzLiNkLnNldChlLGkpO3JldHVybiBpfWdldFBhZ2VJbmRleCh0KXtyZXR1cm4ib2JqZWN0IiE9dHlwZW9mIHR8fG51bGw9PT10fHwhTnVtYmVyLmlzSW50ZWdlcih0Lm51bSl8fHQubnVtPDB8fCFOdW1iZXIuaXNJbnRlZ2VyKHQuZ2VuKXx8dC5nZW48MD9Qcm9taXNlLnJlamVjdChuZXcgRXJyb3IoIkludmFsaWQgcGFnZUluZGV4IHJlcXVlc3QuIikpOnRoaXMubWVzc2FnZUhhbmRsZXIuc2VuZFdpdGhQcm9taXNlKCJHZXRQYWdlSW5kZXgiLHtudW06dC5udW0sZ2VuOnQuZ2VufSl9Z2V0QW5ub3RhdGlvbnModCxlKXtyZXR1cm4gdGhpcy5tZXNzYWdlSGFuZGxlci5zZW5kV2l0aFByb21pc2UoIkdldEFubm90YXRpb25zIix7cGFnZUluZGV4OnQsaW50ZW50OmV9KX1nZXRGaWVsZE9iamVjdHMoKXtyZXR1cm4gdGhpcy4jdSgiR2V0RmllbGRPYmplY3RzIil9aGFzSlNBY3Rpb25zKCl7cmV0dXJuIHRoaXMuI3UoIkhhc0pTQWN0aW9ucyIpfWdldENhbGN1bGF0aW9uT3JkZXJJZHMoKXtyZXR1cm4gdGhpcy5tZXNzYWdlSGFuZGxlci5zZW5kV2l0aFByb21pc2UoIkdldENhbGN1bGF0aW9uT3JkZXJJZHMiLG51bGwpfWdldERlc3RpbmF0aW9ucygpe3JldHVybiB0aGlzLm1lc3NhZ2VIYW5kbGVyLnNlbmRXaXRoUHJvbWlzZSgiR2V0RGVzdGluYXRpb25zIixudWxsKX1nZXREZXN0aW5hdGlvbih0KXtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIHQ/UHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCJJbnZhbGlkIGRlc3RpbmF0aW9uIHJlcXVlc3QuIikpOnRoaXMubWVzc2FnZUhhbmRsZXIuc2VuZFdpdGhQcm9taXNlKCJHZXREZXN0aW5hdGlvbiIse2lkOnR9KX1nZXRQYWdlTGFiZWxzKCl7cmV0dXJuIHRoaXMubWVzc2FnZUhhbmRsZXIuc2VuZFdpdGhQcm9taXNlKCJHZXRQYWdlTGFiZWxzIixudWxsKX1nZXRQYWdlTGF5b3V0KCl7cmV0dXJuIHRoaXMubWVzc2FnZUhhbmRsZXIuc2VuZFdpdGhQcm9taXNlKCJHZXRQYWdlTGF5b3V0IixudWxsKX1nZXRQYWdlTW9kZSgpe3JldHVybiB0aGlzLm1lc3NhZ2VIYW5kbGVyLnNlbmRXaXRoUHJvbWlzZSgiR2V0UGFnZU1vZGUiLG51bGwpfWdldFZpZXdlclByZWZlcmVuY2VzKCl7cmV0dXJuIHRoaXMubWVzc2FnZUhhbmRsZXIuc2VuZFdpdGhQcm9taXNlKCJHZXRWaWV3ZXJQcmVmZXJlbmNlcyIsbnVsbCl9Z2V0T3BlbkFjdGlvbigpe3JldHVybiB0aGlzLm1lc3NhZ2VIYW5kbGVyLnNlbmRXaXRoUHJvbWlzZSgiR2V0T3BlbkFjdGlvbiIsbnVsbCl9Z2V0QXR0YWNobWVudHMoKXtyZXR1cm4gdGhpcy5tZXNzYWdlSGFuZGxlci5zZW5kV2l0aFByb21pc2UoIkdldEF0dGFjaG1lbnRzIixudWxsKX1nZXRKYXZhU2NyaXB0KCl7cmV0dXJuIHRoaXMubWVzc2FnZUhhbmRsZXIuc2VuZFdpdGhQcm9taXNlKCJHZXRKYXZhU2NyaXB0IixudWxsKX1nZXREb2NKU0FjdGlvbnMoKXtyZXR1cm4gdGhpcy5tZXNzYWdlSGFuZGxlci5zZW5kV2l0aFByb21pc2UoIkdldERvY0pTQWN0aW9ucyIsbnVsbCl9Z2V0UGFnZUpTQWN0aW9ucyh0KXtyZXR1cm4gdGhpcy5tZXNzYWdlSGFuZGxlci5zZW5kV2l0aFByb21pc2UoIkdldFBhZ2VKU0FjdGlvbnMiLHtwYWdlSW5kZXg6dH0pfWdldFN0cnVjdFRyZWUodCl7cmV0dXJuIHRoaXMubWVzc2FnZUhhbmRsZXIuc2VuZFdpdGhQcm9taXNlKCJHZXRTdHJ1Y3RUcmVlIix7cGFnZUluZGV4OnR9KX1nZXRPdXRsaW5lKCl7cmV0dXJuIHRoaXMubWVzc2FnZUhhbmRsZXIuc2VuZFdpdGhQcm9taXNlKCJHZXRPdXRsaW5lIixudWxsKX1nZXRPcHRpb25hbENvbnRlbnRDb25maWcoKXtyZXR1cm4gdGhpcy5tZXNzYWdlSGFuZGxlci5zZW5kV2l0aFByb21pc2UoIkdldE9wdGlvbmFsQ29udGVudENvbmZpZyIsbnVsbCkudGhlbigodD0+bmV3IF9vcHRpb25hbF9jb250ZW50X2NvbmZpZy5PcHRpb25hbENvbnRlbnRDb25maWcodCkpKX1nZXRQZXJtaXNzaW9ucygpe3JldHVybiB0aGlzLm1lc3NhZ2VIYW5kbGVyLnNlbmRXaXRoUHJvbWlzZSgiR2V0UGVybWlzc2lvbnMiLG51bGwpfWdldE1ldGFkYXRhKCl7Y29uc3QgdD0iR2V0TWV0YWRhdGEiLGU9dGhpcy4jYy5nZXQodCk7aWYoZSlyZXR1cm4gZTtjb25zdCBzPXRoaXMubWVzc2FnZUhhbmRsZXIuc2VuZFdpdGhQcm9taXNlKHQsbnVsbCkudGhlbigodD0+KHtpbmZvOnRbMF0sbWV0YWRhdGE6dFsxXT9uZXcgX21ldGFkYXRhLk1ldGFkYXRhKHRbMV0pOm51bGwsY29udGVudERpc3Bvc2l0aW9uRmlsZW5hbWU6dGhpcy5fZnVsbFJlYWRlcj8uZmlsZW5hbWU/P251bGwsY29udGVudExlbmd0aDp0aGlzLl9mdWxsUmVhZGVyPy5jb250ZW50TGVuZ3RoPz9udWxsfSkpKTt0aGlzLiNjLnNldCh0LHMpO3JldHVybiBzfWdldE1hcmtJbmZvKCl7cmV0dXJuIHRoaXMubWVzc2FnZUhhbmRsZXIuc2VuZFdpdGhQcm9taXNlKCJHZXRNYXJrSW5mbyIsbnVsbCl9YXN5bmMgc3RhcnRDbGVhbnVwKHQ9ITEpe2lmKCF0aGlzLmRlc3Ryb3llZCl7YXdhaXQgdGhpcy5tZXNzYWdlSGFuZGxlci5zZW5kV2l0aFByb21pc2UoIkNsZWFudXAiLG51bGwpO2Zvcihjb25zdCB0IG9mIHRoaXMuI2gudmFsdWVzKCkpe2lmKCF0LmNsZWFudXAoKSl0aHJvdyBuZXcgRXJyb3IoYHN0YXJ0Q2xlYW51cDogUGFnZSAke3QucGFnZU51bWJlcn0gaXMgY3VycmVudGx5IHJlbmRlcmluZy5gKX10aGlzLmNvbW1vbk9ianMuY2xlYXIoKTt0fHx0aGlzLmZvbnRMb2FkZXIuY2xlYXIoKTt0aGlzLiNjLmNsZWFyKCk7dGhpcy5maWx0ZXJGYWN0b3J5LmRlc3Ryb3koITApfX1nZXQgbG9hZGluZ1BhcmFtcygpe2NvbnN0e2Rpc2FibGVBdXRvRmV0Y2g6dCxlbmFibGVYZmE6ZX09dGhpcy5fcGFyYW1zO3JldHVybigwLF91dGlsLnNoYWRvdykodGhpcywibG9hZGluZ1BhcmFtcyIse2Rpc2FibGVBdXRvRmV0Y2g6dCxlbmFibGVYZmE6ZX0pfX1jbGFzcyBQREZPYmplY3RzeyNwPU9iamVjdC5jcmVhdGUobnVsbCk7I2YodCl7Y29uc3QgZT10aGlzLiNwW3RdO3JldHVybiBlfHwodGhpcy4jcFt0XT17Y2FwYWJpbGl0eTpuZXcgX3V0aWwuUHJvbWlzZUNhcGFiaWxpdHksZGF0YTpudWxsfSl9Z2V0KHQsZT1udWxsKXtpZihlKXtjb25zdCBzPXRoaXMuI2YodCk7cy5jYXBhYmlsaXR5LnByb21pc2UudGhlbigoKCk9PmUocy5kYXRhKSkpO3JldHVybiBudWxsfWNvbnN0IHM9dGhpcy4jcFt0XTtpZighcz8uY2FwYWJpbGl0eS5zZXR0bGVkKXRocm93IG5ldyBFcnJvcihgUmVxdWVzdGluZyBvYmplY3QgdGhhdCBpc24ndCByZXNvbHZlZCB5ZXQgJHt0fS5gKTtyZXR1cm4gcy5kYXRhfWhhcyh0KXtjb25zdCBlPXRoaXMuI3BbdF07cmV0dXJuIGU/LmNhcGFiaWxpdHkuc2V0dGxlZHx8ITF9cmVzb2x2ZSh0LGU9bnVsbCl7Y29uc3Qgcz10aGlzLiNmKHQpO3MuZGF0YT1lO3MuY2FwYWJpbGl0eS5yZXNvbHZlKCl9Y2xlYXIoKXtmb3IoY29uc3QgdCBpbiB0aGlzLiNwKXtjb25zdHtkYXRhOmV9PXRoaXMuI3BbdF07ZT8uYml0bWFwPy5jbG9zZSgpfXRoaXMuI3A9T2JqZWN0LmNyZWF0ZShudWxsKX19Y2xhc3MgUmVuZGVyVGFza3sjZz1udWxsO2NvbnN0cnVjdG9yKHQpe3RoaXMuI2c9dDt0aGlzLm9uQ29udGludWU9bnVsbH1nZXQgcHJvbWlzZSgpe3JldHVybiB0aGlzLiNnLmNhcGFiaWxpdHkucHJvbWlzZX1jYW5jZWwodD0wKXt0aGlzLiNnLmNhbmNlbChudWxsLHQpfWdldCBzZXBhcmF0ZUFubm90cygpe2NvbnN0e3NlcGFyYXRlQW5ub3RzOnR9PXRoaXMuI2cub3BlcmF0b3JMaXN0O2lmKCF0KXJldHVybiExO2NvbnN0e2Fubm90YXRpb25DYW52YXNNYXA6ZX09dGhpcy4jZztyZXR1cm4gdC5mb3JtfHx0LmNhbnZhcyYmZT8uc2l6ZT4wfX1leHBvcnRzLlJlbmRlclRhc2s9UmVuZGVyVGFzaztjbGFzcyBJbnRlcm5hbFJlbmRlclRhc2t7c3RhdGljI209bmV3IFdlYWtTZXQ7Y29uc3RydWN0b3Ioe2NhbGxiYWNrOnQscGFyYW1zOmUsb2JqczpzLGNvbW1vbk9ianM6aSxhbm5vdGF0aW9uQ2FudmFzTWFwOm4sb3BlcmF0b3JMaXN0OmEscGFnZUluZGV4OnIsY2FudmFzRmFjdG9yeTpvLGZpbHRlckZhY3Rvcnk6bCx1c2VSZXF1ZXN0QW5pbWF0aW9uRnJhbWU6Yz0hMSxwZGZCdWc6aD0hMSxwYWdlQ29sb3JzOmQ9bnVsbH0pe3RoaXMuY2FsbGJhY2s9dDt0aGlzLnBhcmFtcz1lO3RoaXMub2Jqcz1zO3RoaXMuY29tbW9uT2Jqcz1pO3RoaXMuYW5ub3RhdGlvbkNhbnZhc01hcD1uO3RoaXMub3BlcmF0b3JMaXN0SWR4PW51bGw7dGhpcy5vcGVyYXRvckxpc3Q9YTt0aGlzLl9wYWdlSW5kZXg9cjt0aGlzLmNhbnZhc0ZhY3Rvcnk9bzt0aGlzLmZpbHRlckZhY3Rvcnk9bDt0aGlzLl9wZGZCdWc9aDt0aGlzLnBhZ2VDb2xvcnM9ZDt0aGlzLnJ1bm5pbmc9ITE7dGhpcy5ncmFwaGljc1JlYWR5Q2FsbGJhY2s9bnVsbDt0aGlzLmdyYXBoaWNzUmVhZHk9ITE7dGhpcy5fdXNlUmVxdWVzdEFuaW1hdGlvbkZyYW1lPSEwPT09YyYmInVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3c7dGhpcy5jYW5jZWxsZWQ9ITE7dGhpcy5jYXBhYmlsaXR5PW5ldyBfdXRpbC5Qcm9taXNlQ2FwYWJpbGl0eTt0aGlzLnRhc2s9bmV3IFJlbmRlclRhc2sodGhpcyk7dGhpcy5fY2FuY2VsQm91bmQ9dGhpcy5jYW5jZWwuYmluZCh0aGlzKTt0aGlzLl9jb250aW51ZUJvdW5kPXRoaXMuX2NvbnRpbnVlLmJpbmQodGhpcyk7dGhpcy5fc2NoZWR1bGVOZXh0Qm91bmQ9dGhpcy5fc2NoZWR1bGVOZXh0LmJpbmQodGhpcyk7dGhpcy5fbmV4dEJvdW5kPXRoaXMuX25leHQuYmluZCh0aGlzKTt0aGlzLl9jYW52YXM9ZS5jYW52YXNDb250ZXh0LmNhbnZhc31nZXQgY29tcGxldGVkKCl7cmV0dXJuIHRoaXMuY2FwYWJpbGl0eS5wcm9taXNlLmNhdGNoKChmdW5jdGlvbigpe30pKX1pbml0aWFsaXplR3JhcGhpY3Moe3RyYW5zcGFyZW5jeTp0PSExLG9wdGlvbmFsQ29udGVudENvbmZpZzplfSl7aWYodGhpcy5jYW5jZWxsZWQpcmV0dXJuO2lmKHRoaXMuX2NhbnZhcyl7aWYoSW50ZXJuYWxSZW5kZXJUYXNrLiNtLmhhcyh0aGlzLl9jYW52YXMpKXRocm93IG5ldyBFcnJvcigiQ2Fubm90IHVzZSB0aGUgc2FtZSBjYW52YXMgZHVyaW5nIG11bHRpcGxlIHJlbmRlcigpIG9wZXJhdGlvbnMuIFVzZSBkaWZmZXJlbnQgY2FudmFzIG9yIGVuc3VyZSBwcmV2aW91cyBvcGVyYXRpb25zIHdlcmUgY2FuY2VsbGVkIG9yIGNvbXBsZXRlZC4iKTtJbnRlcm5hbFJlbmRlclRhc2suI20uYWRkKHRoaXMuX2NhbnZhcyl9aWYodGhpcy5fcGRmQnVnJiZnbG9iYWxUaGlzLlN0ZXBwZXJNYW5hZ2VyPy5lbmFibGVkKXt0aGlzLnN0ZXBwZXI9Z2xvYmFsVGhpcy5TdGVwcGVyTWFuYWdlci5jcmVhdGUodGhpcy5fcGFnZUluZGV4KTt0aGlzLnN0ZXBwZXIuaW5pdCh0aGlzLm9wZXJhdG9yTGlzdCk7dGhpcy5zdGVwcGVyLm5leHRCcmVha1BvaW50PXRoaXMuc3RlcHBlci5nZXROZXh0QnJlYWtQb2ludCgpfWNvbnN0e2NhbnZhc0NvbnRleHQ6cyx2aWV3cG9ydDppLHRyYW5zZm9ybTpuLGJhY2tncm91bmQ6YX09dGhpcy5wYXJhbXM7dGhpcy5nZng9bmV3IF9jYW52YXMuQ2FudmFzR3JhcGhpY3Mocyx0aGlzLmNvbW1vbk9ianMsdGhpcy5vYmpzLHRoaXMuY2FudmFzRmFjdG9yeSx0aGlzLmZpbHRlckZhY3Rvcnkse29wdGlvbmFsQ29udGVudENvbmZpZzplfSx0aGlzLmFubm90YXRpb25DYW52YXNNYXAsdGhpcy5wYWdlQ29sb3JzKTt0aGlzLmdmeC5iZWdpbkRyYXdpbmcoe3RyYW5zZm9ybTpuLHZpZXdwb3J0OmksdHJhbnNwYXJlbmN5OnQsYmFja2dyb3VuZDphfSk7dGhpcy5vcGVyYXRvckxpc3RJZHg9MDt0aGlzLmdyYXBoaWNzUmVhZHk9ITA7dGhpcy5ncmFwaGljc1JlYWR5Q2FsbGJhY2s/LigpfWNhbmNlbCh0PW51bGwsZT0wKXt0aGlzLnJ1bm5pbmc9ITE7dGhpcy5jYW5jZWxsZWQ9ITA7dGhpcy5nZng/LmVuZERyYXdpbmcoKTt0aGlzLl9jYW52YXMmJkludGVybmFsUmVuZGVyVGFzay4jbS5kZWxldGUodGhpcy5fY2FudmFzKTt0aGlzLmNhbGxiYWNrKHR8fG5ldyBfZGlzcGxheV91dGlscy5SZW5kZXJpbmdDYW5jZWxsZWRFeGNlcHRpb24oYFJlbmRlcmluZyBjYW5jZWxsZWQsIHBhZ2UgJHt0aGlzLl9wYWdlSW5kZXgrMX1gLCJjYW52YXMiLGUpKX1vcGVyYXRvckxpc3RDaGFuZ2VkKCl7aWYodGhpcy5ncmFwaGljc1JlYWR5KXt0aGlzLnN0ZXBwZXI/LnVwZGF0ZU9wZXJhdG9yTGlzdCh0aGlzLm9wZXJhdG9yTGlzdCk7dGhpcy5ydW5uaW5nfHx0aGlzLl9jb250aW51ZSgpfWVsc2UgdGhpcy5ncmFwaGljc1JlYWR5Q2FsbGJhY2t8fD10aGlzLl9jb250aW51ZUJvdW5kfV9jb250aW51ZSgpe3RoaXMucnVubmluZz0hMDt0aGlzLmNhbmNlbGxlZHx8KHRoaXMudGFzay5vbkNvbnRpbnVlP3RoaXMudGFzay5vbkNvbnRpbnVlKHRoaXMuX3NjaGVkdWxlTmV4dEJvdW5kKTp0aGlzLl9zY2hlZHVsZU5leHQoKSl9X3NjaGVkdWxlTmV4dCgpe3RoaXMuX3VzZVJlcXVlc3RBbmltYXRpb25GcmFtZT93aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgoKT0+e3RoaXMuX25leHRCb3VuZCgpLmNhdGNoKHRoaXMuX2NhbmNlbEJvdW5kKX0pKTpQcm9taXNlLnJlc29sdmUoKS50aGVuKHRoaXMuX25leHRCb3VuZCkuY2F0Y2godGhpcy5fY2FuY2VsQm91bmQpfWFzeW5jIF9uZXh0KCl7aWYoIXRoaXMuY2FuY2VsbGVkKXt0aGlzLm9wZXJhdG9yTGlzdElkeD10aGlzLmdmeC5leGVjdXRlT3BlcmF0b3JMaXN0KHRoaXMub3BlcmF0b3JMaXN0LHRoaXMub3BlcmF0b3JMaXN0SWR4LHRoaXMuX2NvbnRpbnVlQm91bmQsdGhpcy5zdGVwcGVyKTtpZih0aGlzLm9wZXJhdG9yTGlzdElkeD09PXRoaXMub3BlcmF0b3JMaXN0LmFyZ3NBcnJheS5sZW5ndGgpe3RoaXMucnVubmluZz0hMTtpZih0aGlzLm9wZXJhdG9yTGlzdC5sYXN0Q2h1bmspe3RoaXMuZ2Z4LmVuZERyYXdpbmcodGhpcy5wYWdlQ29sb3JzKTt0aGlzLl9jYW52YXMmJkludGVybmFsUmVuZGVyVGFzay4jbS5kZWxldGUodGhpcy5fY2FudmFzKTt0aGlzLmNhbGxiYWNrKCl9fX19fWNvbnN0IHZlcnNpb249IjMuNy4xMDciO2V4cG9ydHMudmVyc2lvbj12ZXJzaW9uO2NvbnN0IGJ1aWxkPSIwMzZmODU1ZGMiO2V4cG9ydHMuYnVpbGQ9YnVpbGR9LCh0LGUscyk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7ZS5QcmludEFubm90YXRpb25TdG9yYWdlPWUuQW5ub3RhdGlvblN0b3JhZ2U9dm9pZCAwO3ZhciBpPXMoMSksbj1zKDQpLGE9cyg4KTtjbGFzcyBBbm5vdGF0aW9uU3RvcmFnZXsjYj0hMTsjQT1uZXcgTWFwO2NvbnN0cnVjdG9yKCl7dGhpcy5vblNldE1vZGlmaWVkPW51bGw7dGhpcy5vblJlc2V0TW9kaWZpZWQ9bnVsbDt0aGlzLm9uQW5ub3RhdGlvbkVkaXRvcj1udWxsfWdldFZhbHVlKHQsZSl7Y29uc3Qgcz10aGlzLiNBLmdldCh0KTtyZXR1cm4gdm9pZCAwPT09cz9lOk9iamVjdC5hc3NpZ24oZSxzKX1nZXRSYXdWYWx1ZSh0KXtyZXR1cm4gdGhpcy4jQS5nZXQodCl9cmVtb3ZlKHQpe3RoaXMuI0EuZGVsZXRlKHQpOzA9PT10aGlzLiNBLnNpemUmJnRoaXMucmVzZXRNb2RpZmllZCgpO2lmKCJmdW5jdGlvbiI9PXR5cGVvZiB0aGlzLm9uQW5ub3RhdGlvbkVkaXRvcil7Zm9yKGNvbnN0IHQgb2YgdGhpcy4jQS52YWx1ZXMoKSlpZih0IGluc3RhbmNlb2Ygbi5Bbm5vdGF0aW9uRWRpdG9yKXJldHVybjt0aGlzLm9uQW5ub3RhdGlvbkVkaXRvcihudWxsKX19c2V0VmFsdWUodCxlKXtjb25zdCBzPXRoaXMuI0EuZ2V0KHQpO2xldCBpPSExO2lmKHZvaWQgMCE9PXMpe2Zvcihjb25zdFt0LG5db2YgT2JqZWN0LmVudHJpZXMoZSkpaWYoc1t0XSE9PW4pe2k9ITA7c1t0XT1ufX1lbHNle2k9ITA7dGhpcy4jQS5zZXQodCxlKX1pJiZ0aGlzLiNfKCk7ZSBpbnN0YW5jZW9mIG4uQW5ub3RhdGlvbkVkaXRvciYmImZ1bmN0aW9uIj09dHlwZW9mIHRoaXMub25Bbm5vdGF0aW9uRWRpdG9yJiZ0aGlzLm9uQW5ub3RhdGlvbkVkaXRvcihlLmNvbnN0cnVjdG9yLl90eXBlKX1oYXModCl7cmV0dXJuIHRoaXMuI0EuaGFzKHQpfWdldEFsbCgpe3JldHVybiB0aGlzLiNBLnNpemU+MD8oMCxpLm9iamVjdEZyb21NYXApKHRoaXMuI0EpOm51bGx9c2V0QWxsKHQpe2Zvcihjb25zdFtlLHNdb2YgT2JqZWN0LmVudHJpZXModCkpdGhpcy5zZXRWYWx1ZShlLHMpfWdldCBzaXplKCl7cmV0dXJuIHRoaXMuI0Euc2l6ZX0jXygpe2lmKCF0aGlzLiNiKXt0aGlzLiNiPSEwOyJmdW5jdGlvbiI9PXR5cGVvZiB0aGlzLm9uU2V0TW9kaWZpZWQmJnRoaXMub25TZXRNb2RpZmllZCgpfX1yZXNldE1vZGlmaWVkKCl7aWYodGhpcy4jYil7dGhpcy4jYj0hMTsiZnVuY3Rpb24iPT10eXBlb2YgdGhpcy5vblJlc2V0TW9kaWZpZWQmJnRoaXMub25SZXNldE1vZGlmaWVkKCl9fWdldCBwcmludCgpe3JldHVybiBuZXcgUHJpbnRBbm5vdGF0aW9uU3RvcmFnZSh0aGlzKX1nZXQgc2VyaWFsaXphYmxlKCl7aWYoMD09PXRoaXMuI0Euc2l6ZSlyZXR1cm4gbnVsbDtjb25zdCB0PW5ldyBNYXA7Zm9yKGNvbnN0W2Usc11vZiB0aGlzLiNBKXtjb25zdCBpPXMgaW5zdGFuY2VvZiBuLkFubm90YXRpb25FZGl0b3I/cy5zZXJpYWxpemUoKTpzO2kmJnQuc2V0KGUsaSl9cmV0dXJuIHR9c3RhdGljIGdldEhhc2godCl7aWYoIXQpcmV0dXJuIiI7Y29uc3QgZT1uZXcgYS5NdXJtdXJIYXNoM182NDtmb3IoY29uc3RbcyxpXW9mIHQpZS51cGRhdGUoYCR7c306JHtKU09OLnN0cmluZ2lmeShpKX1gKTtyZXR1cm4gZS5oZXhkaWdlc3QoKX19ZS5Bbm5vdGF0aW9uU3RvcmFnZT1Bbm5vdGF0aW9uU3RvcmFnZTtjbGFzcyBQcmludEFubm90YXRpb25TdG9yYWdlIGV4dGVuZHMgQW5ub3RhdGlvblN0b3JhZ2V7I3k9bnVsbDtjb25zdHJ1Y3Rvcih0KXtzdXBlcigpO3RoaXMuI3k9c3RydWN0dXJlZENsb25lKHQuc2VyaWFsaXphYmxlKX1nZXQgcHJpbnQoKXsoMCxpLnVucmVhY2hhYmxlKSgiU2hvdWxkIG5vdCBjYWxsIFByaW50QW5ub3RhdGlvblN0b3JhZ2UucHJpbnQiKX1nZXQgc2VyaWFsaXphYmxlKCl7cmV0dXJuIHRoaXMuI3l9fWUuUHJpbnRBbm5vdGF0aW9uU3RvcmFnZT1QcmludEFubm90YXRpb25TdG9yYWdlfSwodCxlLHMpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO2UuQW5ub3RhdGlvbkVkaXRvcj12b2lkIDA7dmFyIGk9cyg1KSxuPXMoMSk7Y2xhc3MgQW5ub3RhdGlvbkVkaXRvcnsjdj10aGlzLmZvY3VzaW4uYmluZCh0aGlzKTsjUz10aGlzLmZvY3Vzb3V0LmJpbmQodGhpcyk7I3g9ITE7I0M9ITE7I0U9ITE7X3VpTWFuYWdlcj1udWxsOyN3PUFubm90YXRpb25FZGl0b3IuX3pJbmRleCsrO3N0YXRpYyBfY29sb3JNYW5hZ2VyPW5ldyBpLkNvbG9yTWFuYWdlcjtzdGF0aWMgX3pJbmRleD0xO2NvbnN0cnVjdG9yKHQpe3RoaXMuY29uc3RydWN0b3I9PT1Bbm5vdGF0aW9uRWRpdG9yJiYoMCxuLnVucmVhY2hhYmxlKSgiQ2Fubm90IGluaXRpYWxpemUgQW5ub3RhdGlvbkVkaXRvci4iKTt0aGlzLnBhcmVudD10LnBhcmVudDt0aGlzLmlkPXQuaWQ7dGhpcy53aWR0aD10aGlzLmhlaWdodD1udWxsO3RoaXMucGFnZUluZGV4PXQucGFyZW50LnBhZ2VJbmRleDt0aGlzLm5hbWU9dC5uYW1lO3RoaXMuZGl2PW51bGw7dGhpcy5fdWlNYW5hZ2VyPXQudWlNYW5hZ2VyO2NvbnN0e3JvdGF0aW9uOmUscmF3RGltczp7cGFnZVdpZHRoOnMscGFnZUhlaWdodDppLHBhZ2VYOmEscGFnZVk6cn19PXRoaXMucGFyZW50LnZpZXdwb3J0O3RoaXMucm90YXRpb249ZTt0aGlzLnBhZ2VSb3RhdGlvbj0oMzYwK2UtdGhpcy5fdWlNYW5hZ2VyLnZpZXdQYXJhbWV0ZXJzLnJvdGF0aW9uKSUzNjA7dGhpcy5wYWdlRGltZW5zaW9ucz1bcyxpXTt0aGlzLnBhZ2VUcmFuc2xhdGlvbj1bYSxyXTtjb25zdFtvLGxdPXRoaXMucGFyZW50RGltZW5zaW9uczt0aGlzLng9dC54L287dGhpcy55PXQueS9sO3RoaXMuaXNBdHRhY2hlZFRvRE9NPSExfXN0YXRpYyBnZXQgX2RlZmF1bHRMaW5lQ29sb3IoKXtyZXR1cm4oMCxuLnNoYWRvdykodGhpcywiX2RlZmF1bHRMaW5lQ29sb3IiLHRoaXMuX2NvbG9yTWFuYWdlci5nZXRIZXhDb2RlKCJDYW52YXNUZXh0IikpfWFkZENvbW1hbmRzKHQpe3RoaXMuX3VpTWFuYWdlci5hZGRDb21tYW5kcyh0KX1nZXQgY3VycmVudExheWVyKCl7cmV0dXJuIHRoaXMuX3VpTWFuYWdlci5jdXJyZW50TGF5ZXJ9c2V0SW5CYWNrZ3JvdW5kKCl7dGhpcy5kaXYuc3R5bGUuekluZGV4PTB9c2V0SW5Gb3JlZ3JvdW5kKCl7dGhpcy5kaXYuc3R5bGUuekluZGV4PXRoaXMuI3d9c2V0UGFyZW50KHQpe2lmKG51bGwhPT10KXt0aGlzLnBhZ2VJbmRleD10LnBhZ2VJbmRleDt0aGlzLnBhZ2VEaW1lbnNpb25zPXQucGFnZURpbWVuc2lvbnN9dGhpcy5wYXJlbnQ9dH1mb2N1c2luKHQpe3RoaXMuI3g/dGhpcy4jeD0hMTp0aGlzLnBhcmVudC5zZXRTZWxlY3RlZCh0aGlzKX1mb2N1c291dCh0KXtpZighdGhpcy5pc0F0dGFjaGVkVG9ET00pcmV0dXJuO2NvbnN0IGU9dC5yZWxhdGVkVGFyZ2V0O2lmKCFlPy5jbG9zZXN0KGAjJHt0aGlzLmlkfWApKXt0LnByZXZlbnREZWZhdWx0KCk7dGhpcy5wYXJlbnQ/LmlzTXVsdGlwbGVTZWxlY3Rpb258fHRoaXMuY29tbWl0T3JSZW1vdmUoKX19Y29tbWl0T3JSZW1vdmUoKXt0aGlzLmlzRW1wdHkoKT90aGlzLnJlbW92ZSgpOnRoaXMuY29tbWl0KCl9Y29tbWl0KCl7dGhpcy5hZGRUb0Fubm90YXRpb25TdG9yYWdlKCl9YWRkVG9Bbm5vdGF0aW9uU3RvcmFnZSgpe3RoaXMuX3VpTWFuYWdlci5hZGRUb0Fubm90YXRpb25TdG9yYWdlKHRoaXMpfWRyYWdzdGFydCh0KXtjb25zdCBlPXRoaXMucGFyZW50LmRpdi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTt0aGlzLnN0YXJ0WD10LmNsaWVudFgtZS54O3RoaXMuc3RhcnRZPXQuY2xpZW50WS1lLnk7dC5kYXRhVHJhbnNmZXIuc2V0RGF0YSgidGV4dC9wbGFpbiIsdGhpcy5pZCk7dC5kYXRhVHJhbnNmZXIuZWZmZWN0QWxsb3dlZD0ibW92ZSJ9c2V0QXQodCxlLHMsaSl7Y29uc3RbbixhXT10aGlzLnBhcmVudERpbWVuc2lvbnM7W3MsaV09dGhpcy5zY3JlZW5Ub1BhZ2VUcmFuc2xhdGlvbihzLGkpO3RoaXMueD0odCtzKS9uO3RoaXMueT0oZStpKS9hO3RoaXMuZGl2LnN0eWxlLmxlZnQ9MTAwKnRoaXMueCsiJSI7dGhpcy5kaXYuc3R5bGUudG9wPTEwMCp0aGlzLnkrIiUifXRyYW5zbGF0ZSh0LGUpe2NvbnN0W3MsaV09dGhpcy5wYXJlbnREaW1lbnNpb25zO1t0LGVdPXRoaXMuc2NyZWVuVG9QYWdlVHJhbnNsYXRpb24odCxlKTt0aGlzLngrPXQvczt0aGlzLnkrPWUvaTt0aGlzLmRpdi5zdHlsZS5sZWZ0PTEwMCp0aGlzLngrIiUiO3RoaXMuZGl2LnN0eWxlLnRvcD0xMDAqdGhpcy55KyIlIn1zY3JlZW5Ub1BhZ2VUcmFuc2xhdGlvbih0LGUpe3N3aXRjaCh0aGlzLnBhcmVudFJvdGF0aW9uKXtjYXNlIDkwOnJldHVybltlLC10XTtjYXNlIDE4MDpyZXR1cm5bLXQsLWVdO2Nhc2UgMjcwOnJldHVyblstZSx0XTtkZWZhdWx0OnJldHVyblt0LGVdfX1nZXQgcGFyZW50U2NhbGUoKXtyZXR1cm4gdGhpcy5fdWlNYW5hZ2VyLnZpZXdQYXJhbWV0ZXJzLnJlYWxTY2FsZX1nZXQgcGFyZW50Um90YXRpb24oKXtyZXR1cm4odGhpcy5fdWlNYW5hZ2VyLnZpZXdQYXJhbWV0ZXJzLnJvdGF0aW9uK3RoaXMucGFnZVJvdGF0aW9uKSUzNjB9Z2V0IHBhcmVudERpbWVuc2lvbnMoKXtjb25zdHtyZWFsU2NhbGU6dH09dGhpcy5fdWlNYW5hZ2VyLnZpZXdQYXJhbWV0ZXJzLFtlLHNdPXRoaXMucGFnZURpbWVuc2lvbnM7cmV0dXJuW2UqdCxzKnRdfXNldERpbXModCxlKXtjb25zdFtzLGldPXRoaXMucGFyZW50RGltZW5zaW9uczt0aGlzLmRpdi5zdHlsZS53aWR0aD0xMDAqdC9zKyIlIjt0aGlzLmRpdi5zdHlsZS5oZWlnaHQ9MTAwKmUvaSsiJSJ9Zml4RGltcygpe2NvbnN0e3N0eWxlOnR9PXRoaXMuZGl2LHtoZWlnaHQ6ZSx3aWR0aDpzfT10LGk9cy5lbmRzV2l0aCgiJSIpLG49ZS5lbmRzV2l0aCgiJSIpO2lmKGkmJm4pcmV0dXJuO2NvbnN0W2Escl09dGhpcy5wYXJlbnREaW1lbnNpb25zO2l8fCh0LndpZHRoPTEwMCpwYXJzZUZsb2F0KHMpL2ErIiUiKTtufHwodC5oZWlnaHQ9MTAwKnBhcnNlRmxvYXQoZSkvcisiJSIpfWdldEluaXRpYWxUcmFuc2xhdGlvbigpe3JldHVyblswLDBdfXJlbmRlcigpe3RoaXMuZGl2PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3RoaXMuZGl2LnNldEF0dHJpYnV0ZSgiZGF0YS1lZGl0b3Itcm90YXRpb24iLCgzNjAtdGhpcy5yb3RhdGlvbiklMzYwKTt0aGlzLmRpdi5jbGFzc05hbWU9dGhpcy5uYW1lO3RoaXMuZGl2LnNldEF0dHJpYnV0ZSgiaWQiLHRoaXMuaWQpO3RoaXMuZGl2LnNldEF0dHJpYnV0ZSgidGFiSW5kZXgiLDApO3RoaXMuc2V0SW5Gb3JlZ3JvdW5kKCk7dGhpcy5kaXYuYWRkRXZlbnRMaXN0ZW5lcigiZm9jdXNpbiIsdGhpcy4jdik7dGhpcy5kaXYuYWRkRXZlbnRMaXN0ZW5lcigiZm9jdXNvdXQiLHRoaXMuI1MpO2NvbnN0W3QsZV09dGhpcy5nZXRJbml0aWFsVHJhbnNsYXRpb24oKTt0aGlzLnRyYW5zbGF0ZSh0LGUpOygwLGkuYmluZEV2ZW50cykodGhpcyx0aGlzLmRpdixbImRyYWdzdGFydCIsInBvaW50ZXJkb3duIl0pO3JldHVybiB0aGlzLmRpdn1wb2ludGVyZG93bih0KXtjb25zdHtpc01hYzplfT1uLkZlYXR1cmVUZXN0LnBsYXRmb3JtO2lmKDAhPT10LmJ1dHRvbnx8dC5jdHJsS2V5JiZlKXQucHJldmVudERlZmF1bHQoKTtlbHNle3QuY3RybEtleSYmIWV8fHQuc2hpZnRLZXl8fHQubWV0YUtleSYmZT90aGlzLnBhcmVudC50b2dnbGVTZWxlY3RlZCh0aGlzKTp0aGlzLnBhcmVudC5zZXRTZWxlY3RlZCh0aGlzKTt0aGlzLiN4PSEwfX1nZXRSZWN0KHQsZSl7Y29uc3Qgcz10aGlzLnBhcmVudFNjYWxlLFtpLG5dPXRoaXMucGFnZURpbWVuc2lvbnMsW2Escl09dGhpcy5wYWdlVHJhbnNsYXRpb24sbz10L3MsbD1lL3MsYz10aGlzLngqaSxoPXRoaXMueSpuLGQ9dGhpcy53aWR0aCppLHU9dGhpcy5oZWlnaHQqbjtzd2l0Y2godGhpcy5yb3RhdGlvbil7Y2FzZSAwOnJldHVybltjK28rYSxuLWgtbC11K3IsYytvK2QrYSxuLWgtbCtyXTtjYXNlIDkwOnJldHVybltjK2wrYSxuLWgrbytyLGMrbCt1K2Esbi1oK28rZCtyXTtjYXNlIDE4MDpyZXR1cm5bYy1vLWQrYSxuLWgrbCtyLGMtbythLG4taCtsK3Urcl07Y2FzZSAyNzA6cmV0dXJuW2MtbC11K2Esbi1oLW8tZCtyLGMtbCthLG4taC1vK3JdO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIHJvdGF0aW9uIil9fWdldFJlY3RJbkN1cnJlbnRDb29yZHModCxlKXtjb25zdFtzLGksbixhXT10LHI9bi1zLG89YS1pO3N3aXRjaCh0aGlzLnJvdGF0aW9uKXtjYXNlIDA6cmV0dXJuW3MsZS1hLHIsb107Y2FzZSA5MDpyZXR1cm5bcyxlLWksbyxyXTtjYXNlIDE4MDpyZXR1cm5bbixlLWkscixvXTtjYXNlIDI3MDpyZXR1cm5bbixlLWEsbyxyXTtkZWZhdWx0OnRocm93IG5ldyBFcnJvcigiSW52YWxpZCByb3RhdGlvbiIpfX1vbmNlQWRkZWQoKXt9aXNFbXB0eSgpe3JldHVybiExfWVuYWJsZUVkaXRNb2RlKCl7dGhpcy4jRT0hMH1kaXNhYmxlRWRpdE1vZGUoKXt0aGlzLiNFPSExfWlzSW5FZGl0TW9kZSgpe3JldHVybiB0aGlzLiNFfXNob3VsZEdldEtleWJvYXJkRXZlbnRzKCl7cmV0dXJuITF9bmVlZHNUb0JlUmVidWlsdCgpe3JldHVybiB0aGlzLmRpdiYmIXRoaXMuaXNBdHRhY2hlZFRvRE9NfXJlYnVpbGQoKXt0aGlzLmRpdj8uYWRkRXZlbnRMaXN0ZW5lcigiZm9jdXNpbiIsdGhpcy4jdil9c2VyaWFsaXplKCl7KDAsbi51bnJlYWNoYWJsZSkoIkFuIGVkaXRvciBtdXN0IGJlIHNlcmlhbGl6YWJsZSIpfXN0YXRpYyBkZXNlcmlhbGl6ZSh0LGUscyl7Y29uc3QgaT1uZXcgdGhpcy5wcm90b3R5cGUuY29uc3RydWN0b3Ioe3BhcmVudDplLGlkOmUuZ2V0TmV4dElkKCksdWlNYW5hZ2VyOnN9KTtpLnJvdGF0aW9uPXQucm90YXRpb247Y29uc3RbbixhXT1pLnBhZ2VEaW1lbnNpb25zLFtyLG8sbCxjXT1pLmdldFJlY3RJbkN1cnJlbnRDb29yZHModC5yZWN0LGEpO2kueD1yL247aS55PW8vYTtpLndpZHRoPWwvbjtpLmhlaWdodD1jL2E7cmV0dXJuIGl9cmVtb3ZlKCl7dGhpcy5kaXYucmVtb3ZlRXZlbnRMaXN0ZW5lcigiZm9jdXNpbiIsdGhpcy4jdik7dGhpcy5kaXYucmVtb3ZlRXZlbnRMaXN0ZW5lcigiZm9jdXNvdXQiLHRoaXMuI1MpO3RoaXMuaXNFbXB0eSgpfHx0aGlzLmNvbW1pdCgpO3RoaXMucGFyZW50LnJlbW92ZSh0aGlzKX1zZWxlY3QoKXt0aGlzLmRpdj8uY2xhc3NMaXN0LmFkZCgic2VsZWN0ZWRFZGl0b3IiKX11bnNlbGVjdCgpe3RoaXMuZGl2Py5jbGFzc0xpc3QucmVtb3ZlKCJzZWxlY3RlZEVkaXRvciIpfXVwZGF0ZVBhcmFtcyh0LGUpe31kaXNhYmxlRWRpdGluZygpe31lbmFibGVFZGl0aW5nKCl7fWdldCBwcm9wZXJ0aWVzVG9VcGRhdGUoKXtyZXR1cm57fX1nZXQgY29udGVudERpdigpe3JldHVybiB0aGlzLmRpdn1nZXQgaXNFZGl0aW5nKCl7cmV0dXJuIHRoaXMuI0N9c2V0IGlzRWRpdGluZyh0KXt0aGlzLiNDPXQ7aWYodCl7dGhpcy5wYXJlbnQuc2V0U2VsZWN0ZWQodGhpcyk7dGhpcy5wYXJlbnQuc2V0QWN0aXZlRWRpdG9yKHRoaXMpfWVsc2UgdGhpcy5wYXJlbnQuc2V0QWN0aXZlRWRpdG9yKG51bGwpfX1lLkFubm90YXRpb25FZGl0b3I9QW5ub3RhdGlvbkVkaXRvcn0sKHQsZSxzKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTtlLktleWJvYXJkTWFuYWdlcj1lLkNvbW1hbmRNYW5hZ2VyPWUuQ29sb3JNYW5hZ2VyPWUuQW5ub3RhdGlvbkVkaXRvclVJTWFuYWdlcj12b2lkIDA7ZS5iaW5kRXZlbnRzPWZ1bmN0aW9uIGJpbmRFdmVudHModCxlLHMpe2Zvcihjb25zdCBpIG9mIHMpZS5hZGRFdmVudExpc3RlbmVyKGksdFtpXS5iaW5kKHQpKX07ZS5vcGFjaXR5VG9IZXg9ZnVuY3Rpb24gb3BhY2l0eVRvSGV4KHQpe3JldHVybiBNYXRoLnJvdW5kKE1hdGgubWluKDI1NSxNYXRoLm1heCgxLDI1NSp0KSkpLnRvU3RyaW5nKDE2KS5wYWRTdGFydCgyLCIwIil9O3ZhciBpPXMoMSksbj1zKDYpO2NsYXNzIElkTWFuYWdlcnsjUD0wO2dldElkKCl7cmV0dXJuYCR7aS5Bbm5vdGF0aW9uRWRpdG9yUHJlZml4fSR7dGhpcy4jUCsrfWB9fWNsYXNzIENvbW1hbmRNYW5hZ2VyeyNUPVtdOyNGPSExOyNrOyNNPS0xO2NvbnN0cnVjdG9yKHQ9MTI4KXt0aGlzLiNrPXR9YWRkKHtjbWQ6dCx1bmRvOmUsbXVzdEV4ZWM6cyx0eXBlOmk9TmFOLG92ZXJ3cml0ZUlmU2FtZVR5cGU6bj0hMSxrZWVwVW5kbzphPSExfSl7cyYmdCgpO2lmKHRoaXMuI0YpcmV0dXJuO2NvbnN0IHI9e2NtZDp0LHVuZG86ZSx0eXBlOml9O2lmKC0xPT09dGhpcy4jTSl7dGhpcy4jVC5sZW5ndGg+MCYmKHRoaXMuI1QubGVuZ3RoPTApO3RoaXMuI009MDt0aGlzLiNULnB1c2gocik7cmV0dXJufWlmKG4mJnRoaXMuI1RbdGhpcy4jTV0udHlwZT09PWkpe2EmJihyLnVuZG89dGhpcy4jVFt0aGlzLiNNXS51bmRvKTt0aGlzLiNUW3RoaXMuI01dPXI7cmV0dXJufWNvbnN0IG89dGhpcy4jTSsxO2lmKG89PT10aGlzLiNrKXRoaXMuI1Quc3BsaWNlKDAsMSk7ZWxzZXt0aGlzLiNNPW87bzx0aGlzLiNULmxlbmd0aCYmdGhpcy4jVC5zcGxpY2Uobyl9dGhpcy4jVC5wdXNoKHIpfXVuZG8oKXtpZigtMSE9PXRoaXMuI00pe3RoaXMuI0Y9ITA7dGhpcy4jVFt0aGlzLiNNXS51bmRvKCk7dGhpcy4jRj0hMTt0aGlzLiNNLT0xfX1yZWRvKCl7aWYodGhpcy4jTTx0aGlzLiNULmxlbmd0aC0xKXt0aGlzLiNNKz0xO3RoaXMuI0Y9ITA7dGhpcy4jVFt0aGlzLiNNXS5jbWQoKTt0aGlzLiNGPSExfX1oYXNTb21ldGhpbmdUb1VuZG8oKXtyZXR1cm4tMSE9PXRoaXMuI019aGFzU29tZXRoaW5nVG9SZWRvKCl7cmV0dXJuIHRoaXMuI008dGhpcy4jVC5sZW5ndGgtMX1kZXN0cm95KCl7dGhpcy4jVD1udWxsfX1lLkNvbW1hbmRNYW5hZ2VyPUNvbW1hbmRNYW5hZ2VyO2NsYXNzIEtleWJvYXJkTWFuYWdlcntjb25zdHJ1Y3Rvcih0KXt0aGlzLmJ1ZmZlcj1bXTt0aGlzLmNhbGxiYWNrcz1uZXcgTWFwO3RoaXMuYWxsS2V5cz1uZXcgU2V0O2NvbnN0e2lzTWFjOmV9PWkuRmVhdHVyZVRlc3QucGxhdGZvcm07Zm9yKGNvbnN0W3MsaV1vZiB0KWZvcihjb25zdCB0IG9mIHMpe2NvbnN0IHM9dC5zdGFydHNXaXRoKCJtYWMrIik7aWYoZSYmcyl7dGhpcy5jYWxsYmFja3Muc2V0KHQuc2xpY2UoNCksaSk7dGhpcy5hbGxLZXlzLmFkZCh0LnNwbGl0KCIrIikuYXQoLTEpKX1lbHNlIGlmKCFlJiYhcyl7dGhpcy5jYWxsYmFja3Muc2V0KHQsaSk7dGhpcy5hbGxLZXlzLmFkZCh0LnNwbGl0KCIrIikuYXQoLTEpKX19fSNSKHQpe3QuYWx0S2V5JiZ0aGlzLmJ1ZmZlci5wdXNoKCJhbHQiKTt0LmN0cmxLZXkmJnRoaXMuYnVmZmVyLnB1c2goImN0cmwiKTt0Lm1ldGFLZXkmJnRoaXMuYnVmZmVyLnB1c2goIm1ldGEiKTt0LnNoaWZ0S2V5JiZ0aGlzLmJ1ZmZlci5wdXNoKCJzaGlmdCIpO3RoaXMuYnVmZmVyLnB1c2godC5rZXkpO2NvbnN0IGU9dGhpcy5idWZmZXIuam9pbigiKyIpO3RoaXMuYnVmZmVyLmxlbmd0aD0wO3JldHVybiBlfWV4ZWModCxlKXtpZighdGhpcy5hbGxLZXlzLmhhcyhlLmtleSkpcmV0dXJuO2NvbnN0IHM9dGhpcy5jYWxsYmFja3MuZ2V0KHRoaXMuI1IoZSkpO2lmKHMpe3MuYmluZCh0KSgpO2Uuc3RvcFByb3BhZ2F0aW9uKCk7ZS5wcmV2ZW50RGVmYXVsdCgpfX19ZS5LZXlib2FyZE1hbmFnZXI9S2V5Ym9hcmRNYW5hZ2VyO2NsYXNzIENvbG9yTWFuYWdlcntzdGF0aWMgX2NvbG9yc01hcHBpbmc9bmV3IE1hcChbWyJDYW52YXNUZXh0IixbMCwwLDBdXSxbIkNhbnZhcyIsWzI1NSwyNTUsMjU1XV1dKTtnZXQgX2NvbG9ycygpe2NvbnN0IHQ9bmV3IE1hcChbWyJDYW52YXNUZXh0IixudWxsXSxbIkNhbnZhcyIsbnVsbF1dKTsoMCxuLmdldENvbG9yVmFsdWVzKSh0KTtyZXR1cm4oMCxpLnNoYWRvdykodGhpcywiX2NvbG9ycyIsdCl9Y29udmVydCh0KXtjb25zdCBlPSgwLG4uZ2V0UkdCKSh0KTtpZighd2luZG93Lm1hdGNoTWVkaWEoIihmb3JjZWQtY29sb3JzOiBhY3RpdmUpIikubWF0Y2hlcylyZXR1cm4gZTtmb3IoY29uc3RbdCxzXW9mIHRoaXMuX2NvbG9ycylpZihzLmV2ZXJ5KCgodCxzKT0+dD09PWVbc10pKSlyZXR1cm4gQ29sb3JNYW5hZ2VyLl9jb2xvcnNNYXBwaW5nLmdldCh0KTtyZXR1cm4gZX1nZXRIZXhDb2RlKHQpe2NvbnN0IGU9dGhpcy5fY29sb3JzLmdldCh0KTtyZXR1cm4gZT9pLlV0aWwubWFrZUhleENvbG9yKC4uLmUpOnR9fWUuQ29sb3JNYW5hZ2VyPUNvbG9yTWFuYWdlcjtjbGFzcyBBbm5vdGF0aW9uRWRpdG9yVUlNYW5hZ2VyeyNEPW51bGw7I0k9bmV3IE1hcDsjTz1uZXcgTWFwOyNMPW51bGw7I049bmV3IENvbW1hbmRNYW5hZ2VyOyNCPTA7I2o9bnVsbDsjVT1uZXcgU2V0OyNxPW51bGw7I1c9bmV3IElkTWFuYWdlcjsjRz0hMTsjSD1pLkFubm90YXRpb25FZGl0b3JUeXBlLk5PTkU7I1Y9bmV3IFNldDsjej10aGlzLmNvcHkuYmluZCh0aGlzKTsjWD10aGlzLmN1dC5iaW5kKHRoaXMpOyMkPXRoaXMucGFzdGUuYmluZCh0aGlzKTsjSz10aGlzLmtleWRvd24uYmluZCh0aGlzKTsjWT10aGlzLm9uRWRpdGluZ0FjdGlvbi5iaW5kKHRoaXMpOyNKPXRoaXMub25QYWdlQ2hhbmdpbmcuYmluZCh0aGlzKTsjUT10aGlzLm9uU2NhbGVDaGFuZ2luZy5iaW5kKHRoaXMpOyNaPXRoaXMub25Sb3RhdGlvbkNoYW5naW5nLmJpbmQodGhpcyk7I3R0PXtpc0VkaXRpbmc6ITEsaXNFbXB0eTohMCxoYXNTb21ldGhpbmdUb1VuZG86ITEsaGFzU29tZXRoaW5nVG9SZWRvOiExLGhhc1NlbGVjdGVkRWRpdG9yOiExfTsjZXQ9bnVsbDtzdGF0aWMgX2tleWJvYXJkTWFuYWdlcj1uZXcgS2V5Ym9hcmRNYW5hZ2VyKFtbWyJjdHJsK2EiLCJtYWMrbWV0YSthIl0sQW5ub3RhdGlvbkVkaXRvclVJTWFuYWdlci5wcm90b3R5cGUuc2VsZWN0QWxsXSxbWyJjdHJsK3oiLCJtYWMrbWV0YSt6Il0sQW5ub3RhdGlvbkVkaXRvclVJTWFuYWdlci5wcm90b3R5cGUudW5kb10sW1siY3RybCt5IiwiY3RybCtzaGlmdCtaIiwibWFjK21ldGErc2hpZnQrWiJdLEFubm90YXRpb25FZGl0b3JVSU1hbmFnZXIucHJvdG90eXBlLnJlZG9dLFtbIkJhY2tzcGFjZSIsImFsdCtCYWNrc3BhY2UiLCJjdHJsK0JhY2tzcGFjZSIsInNoaWZ0K0JhY2tzcGFjZSIsIm1hYytCYWNrc3BhY2UiLCJtYWMrYWx0K0JhY2tzcGFjZSIsIm1hYytjdHJsK0JhY2tzcGFjZSIsIkRlbGV0ZSIsImN0cmwrRGVsZXRlIiwic2hpZnQrRGVsZXRlIl0sQW5ub3RhdGlvbkVkaXRvclVJTWFuYWdlci5wcm90b3R5cGUuZGVsZXRlXSxbWyJFc2NhcGUiLCJtYWMrRXNjYXBlIl0sQW5ub3RhdGlvbkVkaXRvclVJTWFuYWdlci5wcm90b3R5cGUudW5zZWxlY3RBbGxdXSk7Y29uc3RydWN0b3IodCxlLHMpe3RoaXMuI2V0PXQ7dGhpcy4jcT1lO3RoaXMuI3EuX29uKCJlZGl0aW5nYWN0aW9uIix0aGlzLiNZKTt0aGlzLiNxLl9vbigicGFnZWNoYW5naW5nIix0aGlzLiNKKTt0aGlzLiNxLl9vbigic2NhbGVjaGFuZ2luZyIsdGhpcy4jUSk7dGhpcy4jcS5fb24oInJvdGF0aW9uY2hhbmdpbmciLHRoaXMuI1opO3RoaXMuI0w9czt0aGlzLnZpZXdQYXJhbWV0ZXJzPXtyZWFsU2NhbGU6bi5QaXhlbHNQZXJJbmNoLlBERl9UT19DU1NfVU5JVFMscm90YXRpb246MH19ZGVzdHJveSgpe3RoaXMuI3N0KCk7dGhpcy4jcS5fb2ZmKCJlZGl0aW5nYWN0aW9uIix0aGlzLiNZKTt0aGlzLiNxLl9vZmYoInBhZ2VjaGFuZ2luZyIsdGhpcy4jSik7dGhpcy4jcS5fb2ZmKCJzY2FsZWNoYW5naW5nIix0aGlzLiNRKTt0aGlzLiNxLl9vZmYoInJvdGF0aW9uY2hhbmdpbmciLHRoaXMuI1opO2Zvcihjb25zdCB0IG9mIHRoaXMuI08udmFsdWVzKCkpdC5kZXN0cm95KCk7dGhpcy4jTy5jbGVhcigpO3RoaXMuI0kuY2xlYXIoKTt0aGlzLiNVLmNsZWFyKCk7dGhpcy4jRD1udWxsO3RoaXMuI1YuY2xlYXIoKTt0aGlzLiNOLmRlc3Ryb3koKX1vblBhZ2VDaGFuZ2luZyh7cGFnZU51bWJlcjp0fSl7dGhpcy4jQj10LTF9Zm9jdXNNYWluQ29udGFpbmVyKCl7dGhpcy4jZXQuZm9jdXMoKX1hZGRTaG91bGRSZXNjYWxlKHQpe3RoaXMuI1UuYWRkKHQpfXJlbW92ZVNob3VsZFJlc2NhbGUodCl7dGhpcy4jVS5kZWxldGUodCl9b25TY2FsZUNoYW5naW5nKHtzY2FsZTp0fSl7dGhpcy5jb21taXRPclJlbW92ZSgpO3RoaXMudmlld1BhcmFtZXRlcnMucmVhbFNjYWxlPXQqbi5QaXhlbHNQZXJJbmNoLlBERl9UT19DU1NfVU5JVFM7Zm9yKGNvbnN0IHQgb2YgdGhpcy4jVSl0Lm9uU2NhbGVDaGFuZ2luZygpfW9uUm90YXRpb25DaGFuZ2luZyh7cGFnZXNSb3RhdGlvbjp0fSl7dGhpcy5jb21taXRPclJlbW92ZSgpO3RoaXMudmlld1BhcmFtZXRlcnMucm90YXRpb249dH1hZGRUb0Fubm90YXRpb25TdG9yYWdlKHQpe3QuaXNFbXB0eSgpfHwhdGhpcy4jTHx8dGhpcy4jTC5oYXModC5pZCl8fHRoaXMuI0wuc2V0VmFsdWUodC5pZCx0KX0jaXQoKXt0aGlzLiNldC5hZGRFdmVudExpc3RlbmVyKCJrZXlkb3duIix0aGlzLiNLKX0jc3QoKXt0aGlzLiNldC5yZW1vdmVFdmVudExpc3RlbmVyKCJrZXlkb3duIix0aGlzLiNLKX0jbnQoKXtkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJjb3B5Iix0aGlzLiN6KTtkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJjdXQiLHRoaXMuI1gpO2RvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoInBhc3RlIix0aGlzLiMkKX0jYXQoKXtkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJjb3B5Iix0aGlzLiN6KTtkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJjdXQiLHRoaXMuI1gpO2RvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoInBhc3RlIix0aGlzLiMkKX1jb3B5KHQpe3QucHJldmVudERlZmF1bHQoKTt0aGlzLiNEJiZ0aGlzLiNELmNvbW1pdE9yUmVtb3ZlKCk7aWYoIXRoaXMuaGFzU2VsZWN0aW9uKXJldHVybjtjb25zdCBlPVtdO2Zvcihjb25zdCB0IG9mIHRoaXMuI1YpdC5pc0VtcHR5KCl8fGUucHVzaCh0LnNlcmlhbGl6ZSgpKTswIT09ZS5sZW5ndGgmJnQuY2xpcGJvYXJkRGF0YS5zZXREYXRhKCJhcHBsaWNhdGlvbi9wZGZqcyIsSlNPTi5zdHJpbmdpZnkoZSkpfWN1dCh0KXt0aGlzLmNvcHkodCk7dGhpcy5kZWxldGUoKX1wYXN0ZSh0KXt0LnByZXZlbnREZWZhdWx0KCk7bGV0IGU9dC5jbGlwYm9hcmREYXRhLmdldERhdGEoImFwcGxpY2F0aW9uL3BkZmpzIik7aWYoIWUpcmV0dXJuO3RyeXtlPUpTT04ucGFyc2UoZSl9Y2F0Y2godCl7KDAsaS53YXJuKShgcGFzdGU6ICIke3QubWVzc2FnZX0iLmApO3JldHVybn1pZighQXJyYXkuaXNBcnJheShlKSlyZXR1cm47dGhpcy51bnNlbGVjdEFsbCgpO2NvbnN0IHM9dGhpcy4jTy5nZXQodGhpcy4jQik7dHJ5e2NvbnN0IHQ9W107Zm9yKGNvbnN0IGkgb2YgZSl7Y29uc3QgZT1zLmRlc2VyaWFsaXplKGkpO2lmKCFlKXJldHVybjt0LnB1c2goZSl9Y29uc3QgY21kPSgpPT57Zm9yKGNvbnN0IGUgb2YgdCl0aGlzLiNydChlKTt0aGlzLiNvdCh0KX0sdW5kbz0oKT0+e2Zvcihjb25zdCBlIG9mIHQpZS5yZW1vdmUoKX07dGhpcy5hZGRDb21tYW5kcyh7Y21kOmNtZCx1bmRvOnVuZG8sbXVzdEV4ZWM6ITB9KX1jYXRjaCh0KXsoMCxpLndhcm4pKGBwYXN0ZTogIiR7dC5tZXNzYWdlfSIuYCl9fWtleWRvd24odCl7dGhpcy5nZXRBY3RpdmUoKT8uc2hvdWxkR2V0S2V5Ym9hcmRFdmVudHMoKXx8QW5ub3RhdGlvbkVkaXRvclVJTWFuYWdlci5fa2V5Ym9hcmRNYW5hZ2VyLmV4ZWModGhpcyx0KX1vbkVkaXRpbmdBY3Rpb24odCl7WyJ1bmRvIiwicmVkbyIsImRlbGV0ZSIsInNlbGVjdEFsbCJdLmluY2x1ZGVzKHQubmFtZSkmJnRoaXNbdC5uYW1lXSgpfSNsdCh0KXtPYmplY3QuZW50cmllcyh0KS5zb21lKCgoW3QsZV0pPT50aGlzLiN0dFt0XSE9PWUpKSYmdGhpcy4jcS5kaXNwYXRjaCgiYW5ub3RhdGlvbmVkaXRvcnN0YXRlc2NoYW5nZWQiLHtzb3VyY2U6dGhpcyxkZXRhaWxzOk9iamVjdC5hc3NpZ24odGhpcy4jdHQsdCl9KX0jY3QodCl7dGhpcy4jcS5kaXNwYXRjaCgiYW5ub3RhdGlvbmVkaXRvcnBhcmFtc2NoYW5nZWQiLHtzb3VyY2U6dGhpcyxkZXRhaWxzOnR9KX1zZXRFZGl0aW5nU3RhdGUodCl7aWYodCl7dGhpcy4jaXQoKTt0aGlzLiNudCgpO3RoaXMuI2x0KHtpc0VkaXRpbmc6dGhpcy4jSCE9PWkuQW5ub3RhdGlvbkVkaXRvclR5cGUuTk9ORSxpc0VtcHR5OnRoaXMuI2h0KCksaGFzU29tZXRoaW5nVG9VbmRvOnRoaXMuI04uaGFzU29tZXRoaW5nVG9VbmRvKCksaGFzU29tZXRoaW5nVG9SZWRvOnRoaXMuI04uaGFzU29tZXRoaW5nVG9SZWRvKCksaGFzU2VsZWN0ZWRFZGl0b3I6ITF9KX1lbHNle3RoaXMuI3N0KCk7dGhpcy4jYXQoKTt0aGlzLiNsdCh7aXNFZGl0aW5nOiExfSl9fXJlZ2lzdGVyRWRpdG9yVHlwZXModCl7aWYoIXRoaXMuI2ope3RoaXMuI2o9dDtmb3IoY29uc3QgdCBvZiB0aGlzLiNqKXRoaXMuI2N0KHQuZGVmYXVsdFByb3BlcnRpZXNUb1VwZGF0ZSl9fWdldElkKCl7cmV0dXJuIHRoaXMuI1cuZ2V0SWQoKX1nZXQgY3VycmVudExheWVyKCl7cmV0dXJuIHRoaXMuI08uZ2V0KHRoaXMuI0IpfWdldCBjdXJyZW50UGFnZUluZGV4KCl7cmV0dXJuIHRoaXMuI0J9YWRkTGF5ZXIodCl7dGhpcy4jTy5zZXQodC5wYWdlSW5kZXgsdCk7dGhpcy4jRz90LmVuYWJsZSgpOnQuZGlzYWJsZSgpfXJlbW92ZUxheWVyKHQpe3RoaXMuI08uZGVsZXRlKHQucGFnZUluZGV4KX11cGRhdGVNb2RlKHQpe3RoaXMuI0g9dDtpZih0PT09aS5Bbm5vdGF0aW9uRWRpdG9yVHlwZS5OT05FKXt0aGlzLnNldEVkaXRpbmdTdGF0ZSghMSk7dGhpcy4jZHQoKX1lbHNle3RoaXMuc2V0RWRpdGluZ1N0YXRlKCEwKTt0aGlzLiN1dCgpO2Zvcihjb25zdCBlIG9mIHRoaXMuI08udmFsdWVzKCkpZS51cGRhdGVNb2RlKHQpfX11cGRhdGVUb29sYmFyKHQpe3QhPT10aGlzLiNIJiZ0aGlzLiNxLmRpc3BhdGNoKCJzd2l0Y2hhbm5vdGF0aW9uZWRpdG9ybW9kZSIse3NvdXJjZTp0aGlzLG1vZGU6dH0pfXVwZGF0ZVBhcmFtcyh0LGUpe2lmKHRoaXMuI2ope2Zvcihjb25zdCBzIG9mIHRoaXMuI1Ypcy51cGRhdGVQYXJhbXModCxlKTtmb3IoY29uc3QgcyBvZiB0aGlzLiNqKXMudXBkYXRlRGVmYXVsdFBhcmFtcyh0LGUpfX0jdXQoKXtpZighdGhpcy4jRyl7dGhpcy4jRz0hMDtmb3IoY29uc3QgdCBvZiB0aGlzLiNPLnZhbHVlcygpKXQuZW5hYmxlKCl9fSNkdCgpe3RoaXMudW5zZWxlY3RBbGwoKTtpZih0aGlzLiNHKXt0aGlzLiNHPSExO2Zvcihjb25zdCB0IG9mIHRoaXMuI08udmFsdWVzKCkpdC5kaXNhYmxlKCl9fWdldEVkaXRvcnModCl7Y29uc3QgZT1bXTtmb3IoY29uc3QgcyBvZiB0aGlzLiNJLnZhbHVlcygpKXMucGFnZUluZGV4PT09dCYmZS5wdXNoKHMpO3JldHVybiBlfWdldEVkaXRvcih0KXtyZXR1cm4gdGhpcy4jSS5nZXQodCl9YWRkRWRpdG9yKHQpe3RoaXMuI0kuc2V0KHQuaWQsdCl9cmVtb3ZlRWRpdG9yKHQpe3RoaXMuI0kuZGVsZXRlKHQuaWQpO3RoaXMudW5zZWxlY3QodCk7dGhpcy4jTD8ucmVtb3ZlKHQuaWQpfSNydCh0KXtjb25zdCBlPXRoaXMuI08uZ2V0KHQucGFnZUluZGV4KTtlP2UuYWRkT3JSZWJ1aWxkKHQpOnRoaXMuYWRkRWRpdG9yKHQpfXNldEFjdGl2ZUVkaXRvcih0KXtpZih0aGlzLiNEIT09dCl7dGhpcy4jRD10O3QmJnRoaXMuI2N0KHQucHJvcGVydGllc1RvVXBkYXRlKX19dG9nZ2xlU2VsZWN0ZWQodCl7aWYodGhpcy4jVi5oYXModCkpe3RoaXMuI1YuZGVsZXRlKHQpO3QudW5zZWxlY3QoKTt0aGlzLiNsdCh7aGFzU2VsZWN0ZWRFZGl0b3I6dGhpcy5oYXNTZWxlY3Rpb259KX1lbHNle3RoaXMuI1YuYWRkKHQpO3Quc2VsZWN0KCk7dGhpcy4jY3QodC5wcm9wZXJ0aWVzVG9VcGRhdGUpO3RoaXMuI2x0KHtoYXNTZWxlY3RlZEVkaXRvcjohMH0pfX1zZXRTZWxlY3RlZCh0KXtmb3IoY29uc3QgZSBvZiB0aGlzLiNWKWUhPT10JiZlLnVuc2VsZWN0KCk7dGhpcy4jVi5jbGVhcigpO3RoaXMuI1YuYWRkKHQpO3Quc2VsZWN0KCk7dGhpcy4jY3QodC5wcm9wZXJ0aWVzVG9VcGRhdGUpO3RoaXMuI2x0KHtoYXNTZWxlY3RlZEVkaXRvcjohMH0pfWlzU2VsZWN0ZWQodCl7cmV0dXJuIHRoaXMuI1YuaGFzKHQpfXVuc2VsZWN0KHQpe3QudW5zZWxlY3QoKTt0aGlzLiNWLmRlbGV0ZSh0KTt0aGlzLiNsdCh7aGFzU2VsZWN0ZWRFZGl0b3I6dGhpcy5oYXNTZWxlY3Rpb259KX1nZXQgaGFzU2VsZWN0aW9uKCl7cmV0dXJuIDAhPT10aGlzLiNWLnNpemV9dW5kbygpe3RoaXMuI04udW5kbygpO3RoaXMuI2x0KHtoYXNTb21ldGhpbmdUb1VuZG86dGhpcy4jTi5oYXNTb21ldGhpbmdUb1VuZG8oKSxoYXNTb21ldGhpbmdUb1JlZG86ITAsaXNFbXB0eTp0aGlzLiNodCgpfSl9cmVkbygpe3RoaXMuI04ucmVkbygpO3RoaXMuI2x0KHtoYXNTb21ldGhpbmdUb1VuZG86ITAsaGFzU29tZXRoaW5nVG9SZWRvOnRoaXMuI04uaGFzU29tZXRoaW5nVG9SZWRvKCksaXNFbXB0eTp0aGlzLiNodCgpfSl9YWRkQ29tbWFuZHModCl7dGhpcy4jTi5hZGQodCk7dGhpcy4jbHQoe2hhc1NvbWV0aGluZ1RvVW5kbzohMCxoYXNTb21ldGhpbmdUb1JlZG86ITEsaXNFbXB0eTp0aGlzLiNodCgpfSl9I2h0KCl7aWYoMD09PXRoaXMuI0kuc2l6ZSlyZXR1cm4hMDtpZigxPT09dGhpcy4jSS5zaXplKWZvcihjb25zdCB0IG9mIHRoaXMuI0kudmFsdWVzKCkpcmV0dXJuIHQuaXNFbXB0eSgpO3JldHVybiExfWRlbGV0ZSgpe3RoaXMuY29tbWl0T3JSZW1vdmUoKTtpZighdGhpcy5oYXNTZWxlY3Rpb24pcmV0dXJuO2NvbnN0IHQ9Wy4uLnRoaXMuI1ZdO3RoaXMuYWRkQ29tbWFuZHMoe2NtZDooKT0+e2Zvcihjb25zdCBlIG9mIHQpZS5yZW1vdmUoKX0sdW5kbzooKT0+e2Zvcihjb25zdCBlIG9mIHQpdGhpcy4jcnQoZSl9LG11c3RFeGVjOiEwfSl9Y29tbWl0T3JSZW1vdmUoKXt0aGlzLiNEPy5jb21taXRPclJlbW92ZSgpfSNvdCh0KXt0aGlzLiNWLmNsZWFyKCk7Zm9yKGNvbnN0IGUgb2YgdClpZighZS5pc0VtcHR5KCkpe3RoaXMuI1YuYWRkKGUpO2Uuc2VsZWN0KCl9dGhpcy4jbHQoe2hhc1NlbGVjdGVkRWRpdG9yOiEwfSl9c2VsZWN0QWxsKCl7Zm9yKGNvbnN0IHQgb2YgdGhpcy4jVil0LmNvbW1pdCgpO3RoaXMuI290KHRoaXMuI0kudmFsdWVzKCkpfXVuc2VsZWN0QWxsKCl7aWYodGhpcy4jRCl0aGlzLiNELmNvbW1pdE9yUmVtb3ZlKCk7ZWxzZSBpZigwIT09dGhpcy4jVi5zaXplKXtmb3IoY29uc3QgdCBvZiB0aGlzLiNWKXQudW5zZWxlY3QoKTt0aGlzLiNWLmNsZWFyKCk7dGhpcy4jbHQoe2hhc1NlbGVjdGVkRWRpdG9yOiExfSl9fWlzQWN0aXZlKHQpe3JldHVybiB0aGlzLiNEPT09dH1nZXRBY3RpdmUoKXtyZXR1cm4gdGhpcy4jRH1nZXRNb2RlKCl7cmV0dXJuIHRoaXMuI0h9fWUuQW5ub3RhdGlvbkVkaXRvclVJTWFuYWdlcj1Bbm5vdGF0aW9uRWRpdG9yVUlNYW5hZ2VyfSwodCxlLHMpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO2UuU3RhdFRpbWVyPWUuUmVuZGVyaW5nQ2FuY2VsbGVkRXhjZXB0aW9uPWUuUGl4ZWxzUGVySW5jaD1lLlBhZ2VWaWV3cG9ydD1lLlBERkRhdGVTdHJpbmc9ZS5ET01TdGFuZGFyZEZvbnREYXRhRmFjdG9yeT1lLkRPTVNWR0ZhY3Rvcnk9ZS5ET01GaWx0ZXJGYWN0b3J5PWUuRE9NQ2FudmFzRmFjdG9yeT1lLkRPTUNNYXBSZWFkZXJGYWN0b3J5PWUuQW5ub3RhdGlvblByZWZpeD12b2lkIDA7ZS5kZXByZWNhdGVkPWZ1bmN0aW9uIGRlcHJlY2F0ZWQodCl7Y29uc29sZS5sb2coIkRlcHJlY2F0ZWQgQVBJIHVzYWdlOiAiK3QpfTtlLmdldENvbG9yVmFsdWVzPWZ1bmN0aW9uIGdldENvbG9yVmFsdWVzKHQpe2NvbnN0IGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpO2Uuc3R5bGUudmlzaWJpbGl0eT0iaGlkZGVuIjtkb2N1bWVudC5ib2R5LmFwcGVuZChlKTtmb3IoY29uc3QgcyBvZiB0LmtleXMoKSl7ZS5zdHlsZS5jb2xvcj1zO2NvbnN0IGk9d2luZG93LmdldENvbXB1dGVkU3R5bGUoZSkuY29sb3I7dC5zZXQocyxnZXRSR0IoaSkpfWUucmVtb3ZlKCl9O2UuZ2V0Q3VycmVudFRyYW5zZm9ybT1mdW5jdGlvbiBnZXRDdXJyZW50VHJhbnNmb3JtKHQpe2NvbnN0e2E6ZSxiOnMsYzppLGQ6bixlOmEsZjpyfT10LmdldFRyYW5zZm9ybSgpO3JldHVybltlLHMsaSxuLGEscl19O2UuZ2V0Q3VycmVudFRyYW5zZm9ybUludmVyc2U9ZnVuY3Rpb24gZ2V0Q3VycmVudFRyYW5zZm9ybUludmVyc2UodCl7Y29uc3R7YTplLGI6cyxjOmksZDpuLGU6YSxmOnJ9PXQuZ2V0VHJhbnNmb3JtKCkuaW52ZXJ0U2VsZigpO3JldHVybltlLHMsaSxuLGEscl19O2UuZ2V0RmlsZW5hbWVGcm9tVXJsPWZ1bmN0aW9uIGdldEZpbGVuYW1lRnJvbVVybCh0LGU9ITEpe2V8fChbdF09dC5zcGxpdCgvWyM/XS8sMSkpO3JldHVybiB0LnN1YnN0cmluZyh0Lmxhc3RJbmRleE9mKCIvIikrMSl9O2UuZ2V0UGRmRmlsZW5hbWVGcm9tVXJsPWZ1bmN0aW9uIGdldFBkZkZpbGVuYW1lRnJvbVVybCh0LGU9ImRvY3VtZW50LnBkZiIpe2lmKCJzdHJpbmciIT10eXBlb2YgdClyZXR1cm4gZTtpZihpc0RhdGFTY2hlbWUodCkpeygwLG4ud2FybikoJ2dldFBkZkZpbGVuYW1lRnJvbVVybDogaWdub3JlICJkYXRhOiItVVJMIGZvciBwZXJmb3JtYW5jZSByZWFzb25zLicpO3JldHVybiBlfWNvbnN0IHM9L1teLz8jPV0rXC5wZGZcYig/IS4qXC5wZGZcYikvaSxpPS9eKD86KD86W146XSs6KT9cL1wvW14vXSspPyhbXj8jXSopKFw/W14jXSopPygjLiopPyQvLmV4ZWModCk7bGV0IGE9cy5leGVjKGlbMV0pfHxzLmV4ZWMoaVsyXSl8fHMuZXhlYyhpWzNdKTtpZihhKXthPWFbMF07aWYoYS5pbmNsdWRlcygiJSIpKXRyeXthPXMuZXhlYyhkZWNvZGVVUklDb21wb25lbnQoYSkpWzBdfWNhdGNoKHQpe319cmV0dXJuIGF8fGV9O2UuZ2V0UkdCPWdldFJHQjtlLmdldFhmYVBhZ2VWaWV3cG9ydD1mdW5jdGlvbiBnZXRYZmFQYWdlVmlld3BvcnQodCx7c2NhbGU6ZT0xLHJvdGF0aW9uOnM9MH0pe2NvbnN0e3dpZHRoOmksaGVpZ2h0Om59PXQuYXR0cmlidXRlcy5zdHlsZSxhPVswLDAscGFyc2VJbnQoaSkscGFyc2VJbnQobildO3JldHVybiBuZXcgUGFnZVZpZXdwb3J0KHt2aWV3Qm94OmEsc2NhbGU6ZSxyb3RhdGlvbjpzfSl9O2UuaXNEYXRhU2NoZW1lPWlzRGF0YVNjaGVtZTtlLmlzUGRmRmlsZT1mdW5jdGlvbiBpc1BkZkZpbGUodCl7cmV0dXJuInN0cmluZyI9PXR5cGVvZiB0JiYvXC5wZGYkL2kudGVzdCh0KX07ZS5pc1ZhbGlkRmV0Y2hVcmw9aXNWYWxpZEZldGNoVXJsO2UubG9hZFNjcmlwdD1mdW5jdGlvbiBsb2FkU2NyaXB0KHQsZT0hMSl7cmV0dXJuIG5ldyBQcm9taXNlKCgocyxpKT0+e2NvbnN0IG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic2NyaXB0Iik7bi5zcmM9dDtuLm9ubG9hZD1mdW5jdGlvbih0KXtlJiZuLnJlbW92ZSgpO3ModCl9O24ub25lcnJvcj1mdW5jdGlvbigpe2kobmV3IEVycm9yKGBDYW5ub3QgbG9hZCBzY3JpcHQgYXQ6ICR7bi5zcmN9YCkpfTsoZG9jdW1lbnQuaGVhZHx8ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KS5hcHBlbmQobil9KSl9O2Uuc2V0TGF5ZXJEaW1lbnNpb25zPWZ1bmN0aW9uIHNldExheWVyRGltZW5zaW9ucyh0LGUscz0hMSxpPSEwKXtpZihlIGluc3RhbmNlb2YgUGFnZVZpZXdwb3J0KXtjb25zdHtwYWdlV2lkdGg6aSxwYWdlSGVpZ2h0Om59PWUucmF3RGltcyx7c3R5bGU6YX09dCxyPWBjYWxjKHZhcigtLXNjYWxlLWZhY3RvcikgKiAke2l9cHgpYCxvPWBjYWxjKHZhcigtLXNjYWxlLWZhY3RvcikgKiAke259cHgpYDtpZihzJiZlLnJvdGF0aW9uJTE4MCE9MCl7YS53aWR0aD1vO2EuaGVpZ2h0PXJ9ZWxzZXthLndpZHRoPXI7YS5oZWlnaHQ9b319aSYmdC5zZXRBdHRyaWJ1dGUoImRhdGEtbWFpbi1yb3RhdGlvbiIsZS5yb3RhdGlvbil9O3ZhciBpPXMoNyksbj1zKDEpO2NvbnN0IGE9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIjtlLkFubm90YXRpb25QcmVmaXg9InBkZmpzX2ludGVybmFsX2lkXyI7Y2xhc3MgUGl4ZWxzUGVySW5jaHtzdGF0aWMgQ1NTPTk2O3N0YXRpYyBQREY9NzI7c3RhdGljIFBERl9UT19DU1NfVU5JVFM9dGhpcy5DU1MvdGhpcy5QREZ9ZS5QaXhlbHNQZXJJbmNoPVBpeGVsc1BlckluY2g7Y2xhc3MgRE9NRmlsdGVyRmFjdG9yeSBleHRlbmRzIGkuQmFzZUZpbHRlckZhY3Rvcnl7I3B0OyNmdDsjZTsjZ3Q7I210OyNidDsjQXQ7I1A9MDtjb25zdHJ1Y3Rvcih7ZG9jSWQ6dCxvd25lckRvY3VtZW50OmU9Z2xvYmFsVGhpcy5kb2N1bWVudH09e30pe3N1cGVyKCk7dGhpcy4jZT10O3RoaXMuI2d0PWV9Z2V0I190KCl7cmV0dXJuIHRoaXMuI3B0fHw9bmV3IE1hcH1nZXQjeXQoKXtpZighdGhpcy4jZnQpe2NvbnN0IHQ9dGhpcy4jZ3QuY3JlYXRlRWxlbWVudCgiZGl2Iikse3N0eWxlOmV9PXQ7ZS52aXNpYmlsaXR5PSJoaWRkZW4iO2UuY29udGFpbj0ic3RyaWN0IjtlLndpZHRoPWUuaGVpZ2h0PTA7ZS5wb3NpdGlvbj0iYWJzb2x1dGUiO2UudG9wPWUubGVmdD0wO2UuekluZGV4PS0xO2NvbnN0IHM9dGhpcy4jZ3QuY3JlYXRlRWxlbWVudE5TKGEsInN2ZyIpO3Muc2V0QXR0cmlidXRlKCJ3aWR0aCIsMCk7cy5zZXRBdHRyaWJ1dGUoImhlaWdodCIsMCk7dGhpcy4jZnQ9dGhpcy4jZ3QuY3JlYXRlRWxlbWVudE5TKGEsImRlZnMiKTt0LmFwcGVuZChzKTtzLmFwcGVuZCh0aGlzLiNmdCk7dGhpcy4jZ3QuYm9keS5hcHBlbmQodCl9cmV0dXJuIHRoaXMuI2Z0fSN2dCh0LGUscyl7Y29uc3QgaT10aGlzLiNndC5jcmVhdGVFbGVtZW50TlMoYSxlKTtpLnNldEF0dHJpYnV0ZSgidHlwZSIsImRpc2NyZXRlIik7aS5zZXRBdHRyaWJ1dGUoInRhYmxlVmFsdWVzIixzKTt0LmFwcGVuZChpKX1hZGRGaWx0ZXIodCl7aWYoIXQpcmV0dXJuIm5vbmUiO2xldCBlLHMsaSxuLHI9dGhpcy4jX3QuZ2V0KHQpO2lmKHIpcmV0dXJuIHI7aWYoMT09PXQubGVuZ3RoKXtjb25zdCBhPXRbMF0scj1uZXcgQXJyYXkoMjU2KTtmb3IobGV0IHQ9MDt0PDI1Njt0Kyspclt0XT1hW3RdLzI1NTtuPWU9cz1pPXIuam9pbigiLCIpfWVsc2V7Y29uc3RbYSxyLG9dPXQsbD1uZXcgQXJyYXkoMjU2KSxjPW5ldyBBcnJheSgyNTYpLGg9bmV3IEFycmF5KDI1Nik7Zm9yKGxldCB0PTA7dDwyNTY7dCsrKXtsW3RdPWFbdF0vMjU1O2NbdF09clt0XS8yNTU7aFt0XT1vW3RdLzI1NX1lPWwuam9pbigiLCIpO3M9Yy5qb2luKCIsIik7aT1oLmpvaW4oIiwiKTtuPWAke2V9JHtzfSR7aX1gfXI9dGhpcy4jX3QuZ2V0KG4pO2lmKHIpe3RoaXMuI190LnNldCh0LHIpO3JldHVybiByfWNvbnN0IG89YGdfJHt0aGlzLiNlfV90cmFuc2Zlcl9tYXBfJHt0aGlzLiNQKyt9YCxsPWB1cmwoIyR7b30pYDt0aGlzLiNfdC5zZXQodCxsKTt0aGlzLiNfdC5zZXQobixsKTtjb25zdCBjPXRoaXMuI2d0LmNyZWF0ZUVsZW1lbnROUyhhLCJmaWx0ZXIiLGEpO2Muc2V0QXR0cmlidXRlKCJpZCIsbyk7Yy5zZXRBdHRyaWJ1dGUoImNvbG9yLWludGVycG9sYXRpb24tZmlsdGVycyIsInNSR0IiKTtjb25zdCBoPXRoaXMuI2d0LmNyZWF0ZUVsZW1lbnROUyhhLCJmZUNvbXBvbmVudFRyYW5zZmVyIik7Yy5hcHBlbmQoaCk7dGhpcy4jdnQoaCwiZmVGdW5jUiIsZSk7dGhpcy4jdnQoaCwiZmVGdW5jRyIscyk7dGhpcy4jdnQoaCwiZmVGdW5jQiIsaSk7dGhpcy4jeXQuYXBwZW5kKGMpO3JldHVybiBsfWFkZEhDTUZpbHRlcih0LGUpe2NvbnN0IHM9YCR7dH0tJHtlfWA7aWYodGhpcy4jYnQ9PT1zKXJldHVybiB0aGlzLiNBdDt0aGlzLiNidD1zO3RoaXMuI0F0PSJub25lIjt0aGlzLiNtdD8ucmVtb3ZlKCk7aWYoIXR8fCFlKXJldHVybiB0aGlzLiNBdDt0aGlzLiN5dC5zdHlsZS5jb2xvcj10O2NvbnN0IGk9Z2V0UkdCKHQ9Z2V0Q29tcHV0ZWRTdHlsZSh0aGlzLiN5dCkuZ2V0UHJvcGVydHlWYWx1ZSgiY29sb3IiKSk7dD1uLlV0aWwubWFrZUhleENvbG9yKC4uLmkpO3RoaXMuI3l0LnN0eWxlLmNvbG9yPWU7Y29uc3Qgcj1nZXRSR0IoZT1nZXRDb21wdXRlZFN0eWxlKHRoaXMuI3l0KS5nZXRQcm9wZXJ0eVZhbHVlKCJjb2xvciIpKTtlPW4uVXRpbC5tYWtlSGV4Q29sb3IoLi4ucik7dGhpcy4jeXQuc3R5bGUuY29sb3I9IiI7aWYoIiMwMDAwMDAiPT09dCYmIiNmZmZmZmYiPT09ZXx8dD09PWUpcmV0dXJuIHRoaXMuI0F0O2NvbnN0IG89bmV3IEFycmF5KDI1Nik7Zm9yKGxldCB0PTA7dDw9MjU1O3QrKyl7Y29uc3QgZT10LzI1NTtvW3RdPWU8PS4wMzkyOD9lLzEyLjkyOigoZSsuMDU1KS8xLjA1NSkqKjIuNH1jb25zdCBsPW8uam9pbigiLCIpLGM9YGdfJHt0aGlzLiNlfV9oY21fZmlsdGVyYCxoPXRoaXMuI210PXRoaXMuI2d0LmNyZWF0ZUVsZW1lbnROUyhhLCJmaWx0ZXIiLGEpO2guc2V0QXR0cmlidXRlKCJpZCIsYyk7aC5zZXRBdHRyaWJ1dGUoImNvbG9yLWludGVycG9sYXRpb24tZmlsdGVycyIsInNSR0IiKTtsZXQgZD10aGlzLiNndC5jcmVhdGVFbGVtZW50TlMoYSwiZmVDb21wb25lbnRUcmFuc2ZlciIpO2guYXBwZW5kKGQpO3RoaXMuI3Z0KGQsImZlRnVuY1IiLGwpO3RoaXMuI3Z0KGQsImZlRnVuY0ciLGwpO3RoaXMuI3Z0KGQsImZlRnVuY0IiLGwpO2NvbnN0IHU9dGhpcy4jZ3QuY3JlYXRlRWxlbWVudE5TKGEsImZlQ29sb3JNYXRyaXgiKTt1LnNldEF0dHJpYnV0ZSgidHlwZSIsIm1hdHJpeCIpO3Uuc2V0QXR0cmlidXRlKCJ2YWx1ZXMiLCIwLjIxMjYgMC43MTUyIDAuMDcyMiAwIDAgMC4yMTI2IDAuNzE1MiAwLjA3MjIgMCAwIDAuMjEyNiAwLjcxNTIgMC4wNzIyIDAgMCAwIDAgMCAxIDAiKTtoLmFwcGVuZCh1KTtkPXRoaXMuI2d0LmNyZWF0ZUVsZW1lbnROUyhhLCJmZUNvbXBvbmVudFRyYW5zZmVyIik7aC5hcHBlbmQoZCk7Y29uc3QgZ2V0U3RlcHM9KHQsZSk9Pntjb25zdCBzPWlbdF0vMjU1LG49clt0XS8yNTUsYT1uZXcgQXJyYXkoZSsxKTtmb3IobGV0IHQ9MDt0PD1lO3QrKylhW3RdPXMrdC9lKihuLXMpO3JldHVybiBhLmpvaW4oIiwiKX07dGhpcy4jdnQoZCwiZmVGdW5jUiIsZ2V0U3RlcHMoMCw1KSk7dGhpcy4jdnQoZCwiZmVGdW5jRyIsZ2V0U3RlcHMoMSw1KSk7dGhpcy4jdnQoZCwiZmVGdW5jQiIsZ2V0U3RlcHMoMiw1KSk7dGhpcy4jeXQuYXBwZW5kKGgpO3RoaXMuI0F0PWB1cmwoIyR7Y30pYDtyZXR1cm4gdGhpcy4jQXR9ZGVzdHJveSh0PSExKXtpZighdHx8IXRoaXMuI0F0KXtpZih0aGlzLiNmdCl7dGhpcy4jZnQucGFyZW50Tm9kZS5wYXJlbnROb2RlLnJlbW92ZSgpO3RoaXMuI2Z0PW51bGx9aWYodGhpcy4jcHQpe3RoaXMuI3B0LmNsZWFyKCk7dGhpcy4jcHQ9bnVsbH10aGlzLiNQPTB9fX1lLkRPTUZpbHRlckZhY3Rvcnk9RE9NRmlsdGVyRmFjdG9yeTtjbGFzcyBET01DYW52YXNGYWN0b3J5IGV4dGVuZHMgaS5CYXNlQ2FudmFzRmFjdG9yeXtjb25zdHJ1Y3Rvcih7b3duZXJEb2N1bWVudDp0PWdsb2JhbFRoaXMuZG9jdW1lbnR9PXt9KXtzdXBlcigpO3RoaXMuX2RvY3VtZW50PXR9X2NyZWF0ZUNhbnZhcyh0LGUpe2NvbnN0IHM9dGhpcy5fZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIik7cy53aWR0aD10O3MuaGVpZ2h0PWU7cmV0dXJuIHN9fWUuRE9NQ2FudmFzRmFjdG9yeT1ET01DYW52YXNGYWN0b3J5O2FzeW5jIGZ1bmN0aW9uIGZldGNoRGF0YSh0LGU9ITEpe2lmKGlzVmFsaWRGZXRjaFVybCh0LGRvY3VtZW50LmJhc2VVUkkpKXtjb25zdCBzPWF3YWl0IGZldGNoKHQpO2lmKCFzLm9rKXRocm93IG5ldyBFcnJvcihzLnN0YXR1c1RleHQpO3JldHVybiBlP25ldyBVaW50OEFycmF5KGF3YWl0IHMuYXJyYXlCdWZmZXIoKSk6KDAsbi5zdHJpbmdUb0J5dGVzKShhd2FpdCBzLnRleHQoKSl9cmV0dXJuIG5ldyBQcm9taXNlKCgocyxpKT0+e2NvbnN0IGE9bmV3IFhNTEh0dHBSZXF1ZXN0O2Eub3BlbigiR0VUIix0LCEwKTtlJiYoYS5yZXNwb25zZVR5cGU9ImFycmF5YnVmZmVyIik7YS5vbnJlYWR5c3RhdGVjaGFuZ2U9KCk9PntpZihhLnJlYWR5U3RhdGU9PT1YTUxIdHRwUmVxdWVzdC5ET05FKXtpZigyMDA9PT1hLnN0YXR1c3x8MD09PWEuc3RhdHVzKXtsZXQgdDtlJiZhLnJlc3BvbnNlP3Q9bmV3IFVpbnQ4QXJyYXkoYS5yZXNwb25zZSk6IWUmJmEucmVzcG9uc2VUZXh0JiYodD0oMCxuLnN0cmluZ1RvQnl0ZXMpKGEucmVzcG9uc2VUZXh0KSk7aWYodCl7cyh0KTtyZXR1cm59fWkobmV3IEVycm9yKGEuc3RhdHVzVGV4dCkpfX07YS5zZW5kKG51bGwpfSkpfWNsYXNzIERPTUNNYXBSZWFkZXJGYWN0b3J5IGV4dGVuZHMgaS5CYXNlQ01hcFJlYWRlckZhY3Rvcnl7X2ZldGNoRGF0YSh0LGUpe3JldHVybiBmZXRjaERhdGEodCx0aGlzLmlzQ29tcHJlc3NlZCkudGhlbigodD0+KHtjTWFwRGF0YTp0LGNvbXByZXNzaW9uVHlwZTplfSkpKX19ZS5ET01DTWFwUmVhZGVyRmFjdG9yeT1ET01DTWFwUmVhZGVyRmFjdG9yeTtjbGFzcyBET01TdGFuZGFyZEZvbnREYXRhRmFjdG9yeSBleHRlbmRzIGkuQmFzZVN0YW5kYXJkRm9udERhdGFGYWN0b3J5e19mZXRjaERhdGEodCl7cmV0dXJuIGZldGNoRGF0YSh0LCEwKX19ZS5ET01TdGFuZGFyZEZvbnREYXRhRmFjdG9yeT1ET01TdGFuZGFyZEZvbnREYXRhRmFjdG9yeTtjbGFzcyBET01TVkdGYWN0b3J5IGV4dGVuZHMgaS5CYXNlU1ZHRmFjdG9yeXtfY3JlYXRlU1ZHKHQpe3JldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoYSx0KX19ZS5ET01TVkdGYWN0b3J5PURPTVNWR0ZhY3Rvcnk7Y2xhc3MgUGFnZVZpZXdwb3J0e2NvbnN0cnVjdG9yKHt2aWV3Qm94OnQsc2NhbGU6ZSxyb3RhdGlvbjpzLG9mZnNldFg6aT0wLG9mZnNldFk6bj0wLGRvbnRGbGlwOmE9ITF9KXt0aGlzLnZpZXdCb3g9dDt0aGlzLnNjYWxlPWU7dGhpcy5yb3RhdGlvbj1zO3RoaXMub2Zmc2V0WD1pO3RoaXMub2Zmc2V0WT1uO2NvbnN0IHI9KHRbMl0rdFswXSkvMixvPSh0WzNdK3RbMV0pLzI7bGV0IGwsYyxoLGQsdSxwLGYsZzsocyU9MzYwKTwwJiYocys9MzYwKTtzd2l0Y2gocyl7Y2FzZSAxODA6bD0tMTtjPTA7aD0wO2Q9MTticmVhaztjYXNlIDkwOmw9MDtjPTE7aD0xO2Q9MDticmVhaztjYXNlIDI3MDpsPTA7Yz0tMTtoPS0xO2Q9MDticmVhaztjYXNlIDA6bD0xO2M9MDtoPTA7ZD0tMTticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcigiUGFnZVZpZXdwb3J0OiBJbnZhbGlkIHJvdGF0aW9uLCBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgOTAgZGVncmVlcy4iKX1pZihhKXtoPS1oO2Q9LWR9aWYoMD09PWwpe3U9TWF0aC5hYnMoby10WzFdKSplK2k7cD1NYXRoLmFicyhyLXRbMF0pKmUrbjtmPSh0WzNdLXRbMV0pKmU7Zz0odFsyXS10WzBdKSplfWVsc2V7dT1NYXRoLmFicyhyLXRbMF0pKmUraTtwPU1hdGguYWJzKG8tdFsxXSkqZStuO2Y9KHRbMl0tdFswXSkqZTtnPSh0WzNdLXRbMV0pKmV9dGhpcy50cmFuc2Zvcm09W2wqZSxjKmUsaCplLGQqZSx1LWwqZSpyLWgqZSpvLHAtYyplKnItZCplKm9dO3RoaXMud2lkdGg9Zjt0aGlzLmhlaWdodD1nfWdldCByYXdEaW1zKCl7Y29uc3R7dmlld0JveDp0fT10aGlzO3JldHVybigwLG4uc2hhZG93KSh0aGlzLCJyYXdEaW1zIix7cGFnZVdpZHRoOnRbMl0tdFswXSxwYWdlSGVpZ2h0OnRbM10tdFsxXSxwYWdlWDp0WzBdLHBhZ2VZOnRbMV19KX1jbG9uZSh7c2NhbGU6dD10aGlzLnNjYWxlLHJvdGF0aW9uOmU9dGhpcy5yb3RhdGlvbixvZmZzZXRYOnM9dGhpcy5vZmZzZXRYLG9mZnNldFk6aT10aGlzLm9mZnNldFksZG9udEZsaXA6bj0hMX09e30pe3JldHVybiBuZXcgUGFnZVZpZXdwb3J0KHt2aWV3Qm94OnRoaXMudmlld0JveC5zbGljZSgpLHNjYWxlOnQscm90YXRpb246ZSxvZmZzZXRYOnMsb2Zmc2V0WTppLGRvbnRGbGlwOm59KX1jb252ZXJ0VG9WaWV3cG9ydFBvaW50KHQsZSl7cmV0dXJuIG4uVXRpbC5hcHBseVRyYW5zZm9ybShbdCxlXSx0aGlzLnRyYW5zZm9ybSl9Y29udmVydFRvVmlld3BvcnRSZWN0YW5nbGUodCl7Y29uc3QgZT1uLlV0aWwuYXBwbHlUcmFuc2Zvcm0oW3RbMF0sdFsxXV0sdGhpcy50cmFuc2Zvcm0pLHM9bi5VdGlsLmFwcGx5VHJhbnNmb3JtKFt0WzJdLHRbM11dLHRoaXMudHJhbnNmb3JtKTtyZXR1cm5bZVswXSxlWzFdLHNbMF0sc1sxXV19Y29udmVydFRvUGRmUG9pbnQodCxlKXtyZXR1cm4gbi5VdGlsLmFwcGx5SW52ZXJzZVRyYW5zZm9ybShbdCxlXSx0aGlzLnRyYW5zZm9ybSl9fWUuUGFnZVZpZXdwb3J0PVBhZ2VWaWV3cG9ydDtjbGFzcyBSZW5kZXJpbmdDYW5jZWxsZWRFeGNlcHRpb24gZXh0ZW5kcyBuLkJhc2VFeGNlcHRpb257Y29uc3RydWN0b3IodCxlLHM9MCl7c3VwZXIodCwiUmVuZGVyaW5nQ2FuY2VsbGVkRXhjZXB0aW9uIik7dGhpcy50eXBlPWU7dGhpcy5leHRyYURlbGF5PXN9fWUuUmVuZGVyaW5nQ2FuY2VsbGVkRXhjZXB0aW9uPVJlbmRlcmluZ0NhbmNlbGxlZEV4Y2VwdGlvbjtmdW5jdGlvbiBpc0RhdGFTY2hlbWUodCl7Y29uc3QgZT10Lmxlbmd0aDtsZXQgcz0wO2Zvcig7czxlJiYiIj09PXRbc10udHJpbSgpOylzKys7cmV0dXJuImRhdGE6Ij09PXQuc3Vic3RyaW5nKHMscys1KS50b0xvd2VyQ2FzZSgpfWUuU3RhdFRpbWVyPWNsYXNzIFN0YXRUaW1lcntzdGFydGVkPU9iamVjdC5jcmVhdGUobnVsbCk7dGltZXM9W107dGltZSh0KXt0IGluIHRoaXMuc3RhcnRlZCYmKDAsbi53YXJuKShgVGltZXIgaXMgYWxyZWFkeSBydW5uaW5nIGZvciAke3R9YCk7dGhpcy5zdGFydGVkW3RdPURhdGUubm93KCl9dGltZUVuZCh0KXt0IGluIHRoaXMuc3RhcnRlZHx8KDAsbi53YXJuKShgVGltZXIgaGFzIG5vdCBiZWVuIHN0YXJ0ZWQgZm9yICR7dH1gKTt0aGlzLnRpbWVzLnB1c2goe25hbWU6dCxzdGFydDp0aGlzLnN0YXJ0ZWRbdF0sZW5kOkRhdGUubm93KCl9KTtkZWxldGUgdGhpcy5zdGFydGVkW3RdfXRvU3RyaW5nKCl7Y29uc3QgdD1bXTtsZXQgZT0wO2Zvcihjb25zdHtuYW1lOnR9b2YgdGhpcy50aW1lcyllPU1hdGgubWF4KHQubGVuZ3RoLGUpO2Zvcihjb25zdHtuYW1lOnMsc3RhcnQ6aSxlbmQ6bn1vZiB0aGlzLnRpbWVzKXQucHVzaChgJHtzLnBhZEVuZChlKX0gJHtuLWl9bXNcbmApO3JldHVybiB0LmpvaW4oIiIpfX07ZnVuY3Rpb24gaXNWYWxpZEZldGNoVXJsKHQsZSl7dHJ5e2NvbnN0e3Byb3RvY29sOnN9PWU/bmV3IFVSTCh0LGUpOm5ldyBVUkwodCk7cmV0dXJuImh0dHA6Ij09PXN8fCJodHRwczoiPT09c31jYXRjaCh0KXtyZXR1cm4hMX19bGV0IHI7ZS5QREZEYXRlU3RyaW5nPWNsYXNzIFBERkRhdGVTdHJpbmd7c3RhdGljIHRvRGF0ZU9iamVjdCh0KXtpZighdHx8InN0cmluZyIhPXR5cGVvZiB0KXJldHVybiBudWxsO3J8fD1uZXcgUmVnRXhwKCJeRDooXFxkezR9KShcXGR7Mn0pPyhcXGR7Mn0pPyhcXGR7Mn0pPyhcXGR7Mn0pPyhcXGR7Mn0pPyhbWnwrfC1dKT8oXFxkezJ9KT8nPyhcXGR7Mn0pPyc/Iik7Y29uc3QgZT1yLmV4ZWModCk7aWYoIWUpcmV0dXJuIG51bGw7Y29uc3Qgcz1wYXJzZUludChlWzFdLDEwKTtsZXQgaT1wYXJzZUludChlWzJdLDEwKTtpPWk+PTEmJmk8PTEyP2ktMTowO2xldCBuPXBhcnNlSW50KGVbM10sMTApO249bj49MSYmbjw9MzE/bjoxO2xldCBhPXBhcnNlSW50KGVbNF0sMTApO2E9YT49MCYmYTw9MjM/YTowO2xldCBvPXBhcnNlSW50KGVbNV0sMTApO289bz49MCYmbzw9NTk/bzowO2xldCBsPXBhcnNlSW50KGVbNl0sMTApO2w9bD49MCYmbDw9NTk/bDowO2NvbnN0IGM9ZVs3XXx8IloiO2xldCBoPXBhcnNlSW50KGVbOF0sMTApO2g9aD49MCYmaDw9MjM/aDowO2xldCBkPXBhcnNlSW50KGVbOV0sMTApfHwwO2Q9ZD49MCYmZDw9NTk/ZDowO2lmKCItIj09PWMpe2ErPWg7bys9ZH1lbHNlIGlmKCIrIj09PWMpe2EtPWg7by09ZH1yZXR1cm4gbmV3IERhdGUoRGF0ZS5VVEMocyxpLG4sYSxvLGwpKX19O2Z1bmN0aW9uIGdldFJHQih0KXtpZih0LnN0YXJ0c1dpdGgoIiMiKSl7Y29uc3QgZT1wYXJzZUludCh0LnNsaWNlKDEpLDE2KTtyZXR1cm5bKDE2NzExNjgwJmUpPj4xNiwoNjUyODAmZSk+PjgsMjU1JmVdfWlmKHQuc3RhcnRzV2l0aCgicmdiKCIpKXJldHVybiB0LnNsaWNlKDQsLTEpLnNwbGl0KCIsIikubWFwKCh0PT5wYXJzZUludCh0KSkpO2lmKHQuc3RhcnRzV2l0aCgicmdiYSgiKSlyZXR1cm4gdC5zbGljZSg1LC0xKS5zcGxpdCgiLCIpLm1hcCgodD0+cGFyc2VJbnQodCkpKS5zbGljZSgwLDMpOygwLG4ud2FybikoYE5vdCBhIHZhbGlkIGNvbG9yIGZvcm1hdDogIiR7dH0iYCk7cmV0dXJuWzAsMCwwXX19LCh0LGUscyk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7ZS5CYXNlU3RhbmRhcmRGb250RGF0YUZhY3Rvcnk9ZS5CYXNlU1ZHRmFjdG9yeT1lLkJhc2VGaWx0ZXJGYWN0b3J5PWUuQmFzZUNhbnZhc0ZhY3Rvcnk9ZS5CYXNlQ01hcFJlYWRlckZhY3Rvcnk9dm9pZCAwO3ZhciBpPXMoMSk7Y2xhc3MgQmFzZUZpbHRlckZhY3Rvcnl7Y29uc3RydWN0b3IoKXt0aGlzLmNvbnN0cnVjdG9yPT09QmFzZUZpbHRlckZhY3RvcnkmJigwLGkudW5yZWFjaGFibGUpKCJDYW5ub3QgaW5pdGlhbGl6ZSBCYXNlRmlsdGVyRmFjdG9yeS4iKX1hZGRGaWx0ZXIodCl7cmV0dXJuIm5vbmUifWFkZEhDTUZpbHRlcih0LGUpe3JldHVybiJub25lIn1kZXN0cm95KHQ9ITEpe319ZS5CYXNlRmlsdGVyRmFjdG9yeT1CYXNlRmlsdGVyRmFjdG9yeTtjbGFzcyBCYXNlQ2FudmFzRmFjdG9yeXtjb25zdHJ1Y3Rvcigpe3RoaXMuY29uc3RydWN0b3I9PT1CYXNlQ2FudmFzRmFjdG9yeSYmKDAsaS51bnJlYWNoYWJsZSkoIkNhbm5vdCBpbml0aWFsaXplIEJhc2VDYW52YXNGYWN0b3J5LiIpfWNyZWF0ZSh0LGUpe2lmKHQ8PTB8fGU8PTApdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIGNhbnZhcyBzaXplIik7Y29uc3Qgcz10aGlzLl9jcmVhdGVDYW52YXModCxlKTtyZXR1cm57Y2FudmFzOnMsY29udGV4dDpzLmdldENvbnRleHQoIjJkIil9fXJlc2V0KHQsZSxzKXtpZighdC5jYW52YXMpdGhyb3cgbmV3IEVycm9yKCJDYW52YXMgaXMgbm90IHNwZWNpZmllZCIpO2lmKGU8PTB8fHM8PTApdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIGNhbnZhcyBzaXplIik7dC5jYW52YXMud2lkdGg9ZTt0LmNhbnZhcy5oZWlnaHQ9c31kZXN0cm95KHQpe2lmKCF0LmNhbnZhcyl0aHJvdyBuZXcgRXJyb3IoIkNhbnZhcyBpcyBub3Qgc3BlY2lmaWVkIik7dC5jYW52YXMud2lkdGg9MDt0LmNhbnZhcy5oZWlnaHQ9MDt0LmNhbnZhcz1udWxsO3QuY29udGV4dD1udWxsfV9jcmVhdGVDYW52YXModCxlKXsoMCxpLnVucmVhY2hhYmxlKSgiQWJzdHJhY3QgbWV0aG9kIGBfY3JlYXRlQ2FudmFzYCBjYWxsZWQuIil9fWUuQmFzZUNhbnZhc0ZhY3Rvcnk9QmFzZUNhbnZhc0ZhY3Rvcnk7Y2xhc3MgQmFzZUNNYXBSZWFkZXJGYWN0b3J5e2NvbnN0cnVjdG9yKHtiYXNlVXJsOnQ9bnVsbCxpc0NvbXByZXNzZWQ6ZT0hMH0pe3RoaXMuY29uc3RydWN0b3I9PT1CYXNlQ01hcFJlYWRlckZhY3RvcnkmJigwLGkudW5yZWFjaGFibGUpKCJDYW5ub3QgaW5pdGlhbGl6ZSBCYXNlQ01hcFJlYWRlckZhY3RvcnkuIik7dGhpcy5iYXNlVXJsPXQ7dGhpcy5pc0NvbXByZXNzZWQ9ZX1hc3luYyBmZXRjaCh7bmFtZTp0fSl7aWYoIXRoaXMuYmFzZVVybCl0aHJvdyBuZXcgRXJyb3IoJ1RoZSBDTWFwICJiYXNlVXJsIiBwYXJhbWV0ZXIgbXVzdCBiZSBzcGVjaWZpZWQsIGVuc3VyZSB0aGF0IHRoZSAiY01hcFVybCIgYW5kICJjTWFwUGFja2VkIiBBUEkgcGFyYW1ldGVycyBhcmUgcHJvdmlkZWQuJyk7aWYoIXQpdGhyb3cgbmV3IEVycm9yKCJDTWFwIG5hbWUgbXVzdCBiZSBzcGVjaWZpZWQuIik7Y29uc3QgZT10aGlzLmJhc2VVcmwrdCsodGhpcy5pc0NvbXByZXNzZWQ/Ii5iY21hcCI6IiIpLHM9dGhpcy5pc0NvbXByZXNzZWQ/aS5DTWFwQ29tcHJlc3Npb25UeXBlLkJJTkFSWTppLkNNYXBDb21wcmVzc2lvblR5cGUuTk9ORTtyZXR1cm4gdGhpcy5fZmV0Y2hEYXRhKGUscykuY2F0Y2goKHQ9Pnt0aHJvdyBuZXcgRXJyb3IoYFVuYWJsZSB0byBsb2FkICR7dGhpcy5pc0NvbXByZXNzZWQ/ImJpbmFyeSAiOiIifUNNYXAgYXQ6ICR7ZX1gKX0pKX1fZmV0Y2hEYXRhKHQsZSl7KDAsaS51bnJlYWNoYWJsZSkoIkFic3RyYWN0IG1ldGhvZCBgX2ZldGNoRGF0YWAgY2FsbGVkLiIpfX1lLkJhc2VDTWFwUmVhZGVyRmFjdG9yeT1CYXNlQ01hcFJlYWRlckZhY3Rvcnk7Y2xhc3MgQmFzZVN0YW5kYXJkRm9udERhdGFGYWN0b3J5e2NvbnN0cnVjdG9yKHtiYXNlVXJsOnQ9bnVsbH0pe3RoaXMuY29uc3RydWN0b3I9PT1CYXNlU3RhbmRhcmRGb250RGF0YUZhY3RvcnkmJigwLGkudW5yZWFjaGFibGUpKCJDYW5ub3QgaW5pdGlhbGl6ZSBCYXNlU3RhbmRhcmRGb250RGF0YUZhY3RvcnkuIik7dGhpcy5iYXNlVXJsPXR9YXN5bmMgZmV0Y2goe2ZpbGVuYW1lOnR9KXtpZighdGhpcy5iYXNlVXJsKXRocm93IG5ldyBFcnJvcignVGhlIHN0YW5kYXJkIGZvbnQgImJhc2VVcmwiIHBhcmFtZXRlciBtdXN0IGJlIHNwZWNpZmllZCwgZW5zdXJlIHRoYXQgdGhlICJzdGFuZGFyZEZvbnREYXRhVXJsIiBBUEkgcGFyYW1ldGVyIGlzIHByb3ZpZGVkLicpO2lmKCF0KXRocm93IG5ldyBFcnJvcigiRm9udCBmaWxlbmFtZSBtdXN0IGJlIHNwZWNpZmllZC4iKTtjb25zdCBlPWAke3RoaXMuYmFzZVVybH0ke3R9YDtyZXR1cm4gdGhpcy5fZmV0Y2hEYXRhKGUpLmNhdGNoKCh0PT57dGhyb3cgbmV3IEVycm9yKGBVbmFibGUgdG8gbG9hZCBmb250IGRhdGEgYXQ6ICR7ZX1gKX0pKX1fZmV0Y2hEYXRhKHQpeygwLGkudW5yZWFjaGFibGUpKCJBYnN0cmFjdCBtZXRob2QgYF9mZXRjaERhdGFgIGNhbGxlZC4iKX19ZS5CYXNlU3RhbmRhcmRGb250RGF0YUZhY3Rvcnk9QmFzZVN0YW5kYXJkRm9udERhdGFGYWN0b3J5O2NsYXNzIEJhc2VTVkdGYWN0b3J5e2NvbnN0cnVjdG9yKCl7dGhpcy5jb25zdHJ1Y3Rvcj09PUJhc2VTVkdGYWN0b3J5JiYoMCxpLnVucmVhY2hhYmxlKSgiQ2Fubm90IGluaXRpYWxpemUgQmFzZVNWR0ZhY3RvcnkuIil9Y3JlYXRlKHQsZSxzPSExKXtpZih0PD0wfHxlPD0wKXRocm93IG5ldyBFcnJvcigiSW52YWxpZCBTVkcgZGltZW5zaW9ucyIpO2NvbnN0IGk9dGhpcy5fY3JlYXRlU1ZHKCJzdmc6c3ZnIik7aS5zZXRBdHRyaWJ1dGUoInZlcnNpb24iLCIxLjEiKTtpZighcyl7aS5zZXRBdHRyaWJ1dGUoIndpZHRoIixgJHt0fXB4YCk7aS5zZXRBdHRyaWJ1dGUoImhlaWdodCIsYCR7ZX1weGApfWkuc2V0QXR0cmlidXRlKCJwcmVzZXJ2ZUFzcGVjdFJhdGlvIiwibm9uZSIpO2kuc2V0QXR0cmlidXRlKCJ2aWV3Qm94IixgMCAwICR7dH0gJHtlfWApO3JldHVybiBpfWNyZWF0ZUVsZW1lbnQodCl7aWYoInN0cmluZyIhPXR5cGVvZiB0KXRocm93IG5ldyBFcnJvcigiSW52YWxpZCBTVkcgZWxlbWVudCB0eXBlIik7cmV0dXJuIHRoaXMuX2NyZWF0ZVNWRyh0KX1fY3JlYXRlU1ZHKHQpeygwLGkudW5yZWFjaGFibGUpKCJBYnN0cmFjdCBtZXRob2QgYF9jcmVhdGVTVkdgIGNhbGxlZC4iKX19ZS5CYXNlU1ZHRmFjdG9yeT1CYXNlU1ZHRmFjdG9yeX0sKHQsZSxzKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTtlLk11cm11ckhhc2gzXzY0PXZvaWQgMDt2YXIgaT1zKDEpO2NvbnN0IG49MzI4NTM3NzUyMCxhPTQyOTQ5MDE3NjAscj02NTUzNTtlLk11cm11ckhhc2gzXzY0PWNsYXNzIE11cm11ckhhc2gzXzY0e2NvbnN0cnVjdG9yKHQpe3RoaXMuaDE9dD80Mjk0OTY3Mjk1JnQ6bjt0aGlzLmgyPXQ/NDI5NDk2NzI5NSZ0Om59dXBkYXRlKHQpe2xldCBlLHM7aWYoInN0cmluZyI9PXR5cGVvZiB0KXtlPW5ldyBVaW50OEFycmF5KDIqdC5sZW5ndGgpO3M9MDtmb3IobGV0IGk9MCxuPXQubGVuZ3RoO2k8bjtpKyspe2NvbnN0IG49dC5jaGFyQ29kZUF0KGkpO2lmKG48PTI1NSllW3MrK109bjtlbHNle2VbcysrXT1uPj4+ODtlW3MrK109MjU1Jm59fX1lbHNle2lmKCEoMCxpLmlzQXJyYXlCdWZmZXIpKHQpKXRocm93IG5ldyBFcnJvcigiV3JvbmcgZGF0YSBmb3JtYXQgaW4gTXVybXVySGFzaDNfNjRfdXBkYXRlLiBJbnB1dCBtdXN0IGJlIGEgc3RyaW5nIG9yIGFycmF5LiIpO2U9dC5zbGljZSgpO3M9ZS5ieXRlTGVuZ3RofWNvbnN0IG49cz4+MixvPXMtNCpuLGw9bmV3IFVpbnQzMkFycmF5KGUuYnVmZmVyLDAsbik7bGV0IGM9MCxoPTAsZD10aGlzLmgxLHU9dGhpcy5oMjtjb25zdCBwPTM0MzI5MTgzNTMsZj00NjE4NDU5MDcsZz0xMTYwMSxtPTEzNzE1O2ZvcihsZXQgdD0wO3Q8bjt0KyspaWYoMSZ0KXtjPWxbdF07Yz1jKnAmYXxjKmcmcjtjPWM8PDE1fGM+Pj4xNztjPWMqZiZhfGMqbSZyO2RePWM7ZD1kPDwxM3xkPj4+MTk7ZD01KmQrMzg2NDI5MjE5Nn1lbHNle2g9bFt0XTtoPWgqcCZhfGgqZyZyO2g9aDw8MTV8aD4+PjE3O2g9aCpmJmF8aCptJnI7dV49aDt1PXU8PDEzfHU+Pj4xOTt1PTUqdSszODY0MjkyMTk2fWM9MDtzd2l0Y2gobyl7Y2FzZSAzOmNePWVbNCpuKzJdPDwxNjtjYXNlIDI6Y149ZVs0Km4rMV08PDg7Y2FzZSAxOmNePWVbNCpuXTtjPWMqcCZhfGMqZyZyO2M9Yzw8MTV8Yz4+PjE3O2M9YypmJmF8YyptJnI7MSZuP2RePWM6dV49Y310aGlzLmgxPWQ7dGhpcy5oMj11fWhleGRpZ2VzdCgpe2xldCB0PXRoaXMuaDEsZT10aGlzLmgyO3RePWU+Pj4xO3Q9Mzk4MTgwNjc5Nyp0JmF8MzYwNDUqdCZyO2U9NDI4MzU0MzUxMSplJmF8KDI5NTAxNjM3OTcqKGU8PDE2fHQ+Pj4xNikmYSk+Pj4xNjt0Xj1lPj4+MTt0PTQ0NDk4NDQwMyp0JmF8NjA0OTkqdCZyO2U9MzMwMTg4MjM2NiplJmF8KDMxMjA0Mzc4OTMqKGU8PDE2fHQ+Pj4xNikmYSk+Pj4xNjt0Xj1lPj4+MTtyZXR1cm4odD4+PjApLnRvU3RyaW5nKDE2KS5wYWRTdGFydCg4LCIwIikrKGU+Pj4wKS50b1N0cmluZygxNikucGFkU3RhcnQoOCwiMCIpfX19LCh0LGUscyk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7ZS5Gb250TG9hZGVyPWUuRm9udEZhY2VPYmplY3Q9dm9pZCAwO3ZhciBpPXMoMSksbj1zKDEwKTtlLkZvbnRMb2FkZXI9Y2xhc3MgRm9udExvYWRlcnsjU3Q9bmV3IFNldDtjb25zdHJ1Y3Rvcih7b3duZXJEb2N1bWVudDp0PWdsb2JhbFRoaXMuZG9jdW1lbnQsc3R5bGVFbGVtZW50OmU9bnVsbH0pe3RoaXMuX2RvY3VtZW50PXQ7dGhpcy5uYXRpdmVGb250RmFjZXM9bmV3IFNldDt0aGlzLnN0eWxlRWxlbWVudD1udWxsO3RoaXMubG9hZGluZ1JlcXVlc3RzPVtdO3RoaXMubG9hZFRlc3RGb250SWQ9MH1hZGROYXRpdmVGb250RmFjZSh0KXt0aGlzLm5hdGl2ZUZvbnRGYWNlcy5hZGQodCk7dGhpcy5fZG9jdW1lbnQuZm9udHMuYWRkKHQpfXJlbW92ZU5hdGl2ZUZvbnRGYWNlKHQpe3RoaXMubmF0aXZlRm9udEZhY2VzLmRlbGV0ZSh0KTt0aGlzLl9kb2N1bWVudC5mb250cy5kZWxldGUodCl9aW5zZXJ0UnVsZSh0KXtpZighdGhpcy5zdHlsZUVsZW1lbnQpe3RoaXMuc3R5bGVFbGVtZW50PXRoaXMuX2RvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIik7dGhpcy5fZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJoZWFkIilbMF0uYXBwZW5kKHRoaXMuc3R5bGVFbGVtZW50KX1jb25zdCBlPXRoaXMuc3R5bGVFbGVtZW50LnNoZWV0O2UuaW5zZXJ0UnVsZSh0LGUuY3NzUnVsZXMubGVuZ3RoKX1jbGVhcigpe2Zvcihjb25zdCB0IG9mIHRoaXMubmF0aXZlRm9udEZhY2VzKXRoaXMuX2RvY3VtZW50LmZvbnRzLmRlbGV0ZSh0KTt0aGlzLm5hdGl2ZUZvbnRGYWNlcy5jbGVhcigpO3RoaXMuI1N0LmNsZWFyKCk7aWYodGhpcy5zdHlsZUVsZW1lbnQpe3RoaXMuc3R5bGVFbGVtZW50LnJlbW92ZSgpO3RoaXMuc3R5bGVFbGVtZW50PW51bGx9fWFzeW5jIGxvYWRTeXN0ZW1Gb250KHQpe2lmKHQmJiF0aGlzLiNTdC5oYXModC5sb2FkZWROYW1lKSl7KDAsaS5hc3NlcnQpKCF0aGlzLmRpc2FibGVGb250RmFjZSwibG9hZFN5c3RlbUZvbnQgc2hvdWxkbid0IGJlIGNhbGxlZCB3aGVuIGBkaXNhYmxlRm9udEZhY2VgIGlzIHNldC4iKTtpZih0aGlzLmlzRm9udExvYWRpbmdBUElTdXBwb3J0ZWQpe2NvbnN0e2xvYWRlZE5hbWU6ZSxzcmM6cyxzdHlsZTpufT10LGE9bmV3IEZvbnRGYWNlKGUscyxuKTt0aGlzLmFkZE5hdGl2ZUZvbnRGYWNlKGEpO3RyeXthd2FpdCBhLmxvYWQoKTt0aGlzLiNTdC5hZGQoZSl9Y2F0Y2h7KDAsaS53YXJuKShgQ2Fubm90IGxvYWQgc3lzdGVtIGZvbnQ6ICR7dC5iYXNlRm9udE5hbWV9LCBpbnN0YWxsaW5nIGl0IGNvdWxkIGhlbHAgdG8gaW1wcm92ZSBQREYgcmVuZGVyaW5nLmApO3RoaXMucmVtb3ZlTmF0aXZlRm9udEZhY2UoYSl9fWVsc2UoMCxpLnVucmVhY2hhYmxlKSgiTm90IGltcGxlbWVudGVkOiBsb2FkU3lzdGVtRm9udCB3aXRob3V0IHRoZSBGb250IExvYWRpbmcgQVBJLiIpfX1hc3luYyBiaW5kKHQpe2lmKHQuYXR0YWNoZWR8fHQubWlzc2luZ0ZpbGUmJiF0LnN5c3RlbUZvbnRJbmZvKXJldHVybjt0LmF0dGFjaGVkPSEwO2lmKHQuc3lzdGVtRm9udEluZm8pe2F3YWl0IHRoaXMubG9hZFN5c3RlbUZvbnQodC5zeXN0ZW1Gb250SW5mbyk7cmV0dXJufWlmKHRoaXMuaXNGb250TG9hZGluZ0FQSVN1cHBvcnRlZCl7Y29uc3QgZT10LmNyZWF0ZU5hdGl2ZUZvbnRGYWNlKCk7aWYoZSl7dGhpcy5hZGROYXRpdmVGb250RmFjZShlKTt0cnl7YXdhaXQgZS5sb2FkZWR9Y2F0Y2gocyl7KDAsaS53YXJuKShgRmFpbGVkIHRvIGxvYWQgZm9udCAnJHtlLmZhbWlseX0nOiAnJHtzfScuYCk7dC5kaXNhYmxlRm9udEZhY2U9ITA7dGhyb3cgc319cmV0dXJufWNvbnN0IGU9dC5jcmVhdGVGb250RmFjZVJ1bGUoKTtpZihlKXt0aGlzLmluc2VydFJ1bGUoZSk7aWYodGhpcy5pc1N5bmNGb250TG9hZGluZ1N1cHBvcnRlZClyZXR1cm47YXdhaXQgbmV3IFByb21pc2UoKGU9Pntjb25zdCBzPXRoaXMuX3F1ZXVlTG9hZGluZ0NhbGxiYWNrKGUpO3RoaXMuX3ByZXBhcmVGb250TG9hZEV2ZW50KHQscyl9KSl9fWdldCBpc0ZvbnRMb2FkaW5nQVBJU3VwcG9ydGVkKCl7Y29uc3QgdD0hIXRoaXMuX2RvY3VtZW50Py5mb250cztyZXR1cm4oMCxpLnNoYWRvdykodGhpcywiaXNGb250TG9hZGluZ0FQSVN1cHBvcnRlZCIsdCl9Z2V0IGlzU3luY0ZvbnRMb2FkaW5nU3VwcG9ydGVkKCl7bGV0IHQ9ITE7KG4uaXNOb2RlSlN8fCJ1bmRlZmluZWQiIT10eXBlb2YgbmF2aWdhdG9yJiYvTW96aWxsYVwvNS4wLio/cnY6XGQrLio/IEdlY2tvLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKSYmKHQ9ITApO3JldHVybigwLGkuc2hhZG93KSh0aGlzLCJpc1N5bmNGb250TG9hZGluZ1N1cHBvcnRlZCIsdCl9X3F1ZXVlTG9hZGluZ0NhbGxiYWNrKHQpe2NvbnN0e2xvYWRpbmdSZXF1ZXN0czplfT10aGlzLHM9e2RvbmU6ITEsY29tcGxldGU6ZnVuY3Rpb24gY29tcGxldGVSZXF1ZXN0KCl7KDAsaS5hc3NlcnQpKCFzLmRvbmUsImNvbXBsZXRlUmVxdWVzdCgpIGNhbm5vdCBiZSBjYWxsZWQgdHdpY2UuIik7cy5kb25lPSEwO2Zvcig7ZS5sZW5ndGg+MCYmZVswXS5kb25lOyl7Y29uc3QgdD1lLnNoaWZ0KCk7c2V0VGltZW91dCh0LmNhbGxiYWNrLDApfX0sY2FsbGJhY2s6dH07ZS5wdXNoKHMpO3JldHVybiBzfWdldCBfbG9hZFRlc3RGb250KCl7Y29uc3QgdD1hdG9iKCJUMVJVVHdBTEFJQUFBd0F3UTBaR0lESHRaZzRBQUFPWUFBQUFnVVpHVkUxbGt6WndBQUFFSEFBQUFCeEhSRVZHQUJRQUZRQUFCRGdBQUFBZVQxTXZNbFlOWXdrQUFBRWdBQUFBWUdOdFlYQUJEUUxVQUFBQ05BQUFBVUpvWldGay94VkZEUUFBQUx3QUFBQTJhR2hsWVFka0Erb0FBQUQwQUFBQUpHaHRkSGdENkFBQUFBQUVXQUFBQUFadFlYaHdBQUpRQUFBQUFSZ0FBQUFHYm1GdFpWam1kSDRBQUFHQUFBQUFzWEJ2YzNUL2hnQXpBQUFEZUFBQUFDQUFBUUFBQUFFQUFMWlJGc1JmRHp6MUFBc0Q2QUFBQUFET0JPVExBQUFBQU00S0hEd0FBQUFBQStnRElRQUFBQWdBQWdBQUFBQUFBQUFCQUFBRElRQUFBRm9ENkFBQUFBQUQ2QUFCQUFBQUFBQUFBQUFBQUFBQUFBQUFBUUFBVUFBQUFnQUFBQVFENkFIMEFBVUFBQUtLQXJ3QUFBQ01Bb29DdkFBQUFlQUFNUUVDQUFBQ0FBWUpBQUFBQUFBQUFBQUFBUUFBQUFBQUFBQUFBQUFBQUZCbVJXUUF3QUF1QUM0RElQODRBRm9ESVFBQUFBQUFBUUFBQUFBQUFBQUFBQ0FBSUFBQkFBQUFEZ0N1QUFFQUFBQUFBQUFBQVFBQUFBRUFBQUFBQUFFQUFRQUFBQUVBQUFBQUFBSUFBUUFBQUFFQUFBQUFBQU1BQVFBQUFBRUFBQUFBQUFRQUFRQUFBQUVBQUFBQUFBVUFBUUFBQUFFQUFBQUFBQVlBQVFBQUFBTUFBUVFKQUFBQUFnQUJBQU1BQVFRSkFBRUFBZ0FCQUFNQUFRUUpBQUlBQWdBQkFBTUFBUVFKQUFNQUFnQUJBQU1BQVFRSkFBUUFBZ0FCQUFNQUFRUUpBQVVBQWdBQkFBTUFBUVFKQUFZQUFnQUJXQUJZQUFBQUFBQUFBd0FBQUFNQUFBQWNBQUVBQUFBQUFEd0FBd0FCQUFBQUhBQUVBQ0FBQUFBRUFBUUFBUUFBQUM3Ly93QUFBQzcvLy8vVEFBRUFBQUFBQUFBQkJnQUFBUUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUVBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBTUFBQUFBQUFEL2d3QXlBQUFBQVFBQUFBQUFBQUFBQUFBQUFBQUFBQUFCQUFRRUFBRUJBUUpZQUFFQkFTSDREd0Q0R3dIRUF2Z2NBL2dYQkl3TUFZdUwrbno1dFFYa0Q1ajNDQkxuRVFBQ0FRRUJJVmhZV0ZoWVdGaFlXRmhZV0ZoWVdGaFlXRmhZV0ZoWVdGaFlXRmhZV0ZoWUFBQUJBUUFBRHdBQ0FRRUVFL3QzRG92NmZBSDZmQVQrZlBwOCtud0hEb3NNQ3ZtMUN2bTFEQXo2ZkJRQUFBQUFBQUFCQUFBQUFNbUpiekVBQUFBQXpnVGpGUUFBQUFET0JPUXBBQUVBQUFBQUFBQUFEQUFVQUFRQUFBQUJBQUFBQWdBQkFBQUFBQUFBQUFBRDZBQUFBQUFBQUE9PSIpO3JldHVybigwLGkuc2hhZG93KSh0aGlzLCJfbG9hZFRlc3RGb250Iix0KX1fcHJlcGFyZUZvbnRMb2FkRXZlbnQodCxlKXtmdW5jdGlvbiBpbnQzMih0LGUpe3JldHVybiB0LmNoYXJDb2RlQXQoZSk8PDI0fHQuY2hhckNvZGVBdChlKzEpPDwxNnx0LmNoYXJDb2RlQXQoZSsyKTw8OHwyNTUmdC5jaGFyQ29kZUF0KGUrMyl9ZnVuY3Rpb24gc3BsaWNlU3RyaW5nKHQsZSxzLGkpe3JldHVybiB0LnN1YnN0cmluZygwLGUpK2krdC5zdWJzdHJpbmcoZStzKX1sZXQgcyxuO2NvbnN0IGE9dGhpcy5fZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIik7YS53aWR0aD0xO2EuaGVpZ2h0PTE7Y29uc3Qgcj1hLmdldENvbnRleHQoIjJkIik7bGV0IG89MDtjb25zdCBsPWBsdCR7RGF0ZS5ub3coKX0ke3RoaXMubG9hZFRlc3RGb250SWQrK31gO2xldCBjPXRoaXMuX2xvYWRUZXN0Rm9udDtjPXNwbGljZVN0cmluZyhjLDk3NixsLmxlbmd0aCxsKTtjb25zdCBoPTE0ODIxODQ3OTI7bGV0IGQ9aW50MzIoYywxNik7Zm9yKHM9MCxuPWwubGVuZ3RoLTM7czxuO3MrPTQpZD1kLWgraW50MzIobCxzKXwwO3M8bC5sZW5ndGgmJihkPWQtaCtpbnQzMihsKyJYWFgiLHMpfDApO2M9c3BsaWNlU3RyaW5nKGMsMTYsNCwoMCxpLnN0cmluZzMyKShkKSk7Y29uc3QgdT1gQGZvbnQtZmFjZSB7Zm9udC1mYW1pbHk6IiR7bH0iO3NyYzoke2B1cmwoZGF0YTpmb250L29wZW50eXBlO2Jhc2U2NCwke2J0b2EoYyl9KTtgfX1gO3RoaXMuaW5zZXJ0UnVsZSh1KTtjb25zdCBwPXRoaXMuX2RvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3Auc3R5bGUudmlzaWJpbGl0eT0iaGlkZGVuIjtwLnN0eWxlLndpZHRoPXAuc3R5bGUuaGVpZ2h0PSIxMHB4IjtwLnN0eWxlLnBvc2l0aW9uPSJhYnNvbHV0ZSI7cC5zdHlsZS50b3A9cC5zdHlsZS5sZWZ0PSIwcHgiO2Zvcihjb25zdCBlIG9mW3QubG9hZGVkTmFtZSxsXSl7Y29uc3QgdD10aGlzLl9kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIik7dC50ZXh0Q29udGVudD0iSGkiO3Quc3R5bGUuZm9udEZhbWlseT1lO3AuYXBwZW5kKHQpfXRoaXMuX2RvY3VtZW50LmJvZHkuYXBwZW5kKHApOyFmdW5jdGlvbiBpc0ZvbnRSZWFkeSh0LGUpe2lmKCsrbz4zMCl7KDAsaS53YXJuKSgiTG9hZCB0ZXN0IGZvbnQgbmV2ZXIgbG9hZGVkLiIpO2UoKTtyZXR1cm59ci5mb250PSIzMHB4ICIrdDtyLmZpbGxUZXh0KCIuIiwwLDIwKTtyLmdldEltYWdlRGF0YSgwLDAsMSwxKS5kYXRhWzNdPjA/ZSgpOnNldFRpbWVvdXQoaXNGb250UmVhZHkuYmluZChudWxsLHQsZSkpfShsLCgoKT0+e3AucmVtb3ZlKCk7ZS5jb21wbGV0ZSgpfSkpfX07ZS5Gb250RmFjZU9iamVjdD1jbGFzcyBGb250RmFjZU9iamVjdHtjb25zdHJ1Y3Rvcih0LHtpc0V2YWxTdXBwb3J0ZWQ6ZT0hMCxkaXNhYmxlRm9udEZhY2U6cz0hMSxpZ25vcmVFcnJvcnM6aT0hMSxpbnNwZWN0Rm9udDpuPW51bGx9KXt0aGlzLmNvbXBpbGVkR2x5cGhzPU9iamVjdC5jcmVhdGUobnVsbCk7Zm9yKGNvbnN0IGUgaW4gdCl0aGlzW2VdPXRbZV07dGhpcy5pc0V2YWxTdXBwb3J0ZWQ9ITEhPT1lO3RoaXMuZGlzYWJsZUZvbnRGYWNlPSEwPT09czt0aGlzLmlnbm9yZUVycm9ycz0hMD09PWk7dGhpcy5faW5zcGVjdEZvbnQ9bn1jcmVhdGVOYXRpdmVGb250RmFjZSgpe2lmKCF0aGlzLmRhdGF8fHRoaXMuZGlzYWJsZUZvbnRGYWNlKXJldHVybiBudWxsO2xldCB0O2lmKHRoaXMuY3NzRm9udEluZm8pe2NvbnN0IGU9e3dlaWdodDp0aGlzLmNzc0ZvbnRJbmZvLmZvbnRXZWlnaHR9O3RoaXMuY3NzRm9udEluZm8uaXRhbGljQW5nbGUmJihlLnN0eWxlPWBvYmxpcXVlICR7dGhpcy5jc3NGb250SW5mby5pdGFsaWNBbmdsZX1kZWdgKTt0PW5ldyBGb250RmFjZSh0aGlzLmNzc0ZvbnRJbmZvLmZvbnRGYW1pbHksdGhpcy5kYXRhLGUpfWVsc2UgdD1uZXcgRm9udEZhY2UodGhpcy5sb2FkZWROYW1lLHRoaXMuZGF0YSx7fSk7dGhpcy5faW5zcGVjdEZvbnQ/Lih0aGlzKTtyZXR1cm4gdH1jcmVhdGVGb250RmFjZVJ1bGUoKXtpZighdGhpcy5kYXRhfHx0aGlzLmRpc2FibGVGb250RmFjZSlyZXR1cm4gbnVsbDtjb25zdCB0PSgwLGkuYnl0ZXNUb1N0cmluZykodGhpcy5kYXRhKSxlPWB1cmwoZGF0YToke3RoaXMubWltZXR5cGV9O2Jhc2U2NCwke2J0b2EodCl9KTtgO2xldCBzO2lmKHRoaXMuY3NzRm9udEluZm8pe2xldCB0PWBmb250LXdlaWdodDogJHt0aGlzLmNzc0ZvbnRJbmZvLmZvbnRXZWlnaHR9O2A7dGhpcy5jc3NGb250SW5mby5pdGFsaWNBbmdsZSYmKHQrPWBmb250LXN0eWxlOiBvYmxpcXVlICR7dGhpcy5jc3NGb250SW5mby5pdGFsaWNBbmdsZX1kZWc7YCk7cz1gQGZvbnQtZmFjZSB7Zm9udC1mYW1pbHk6IiR7dGhpcy5jc3NGb250SW5mby5mb250RmFtaWx5fSI7JHt0fXNyYzoke2V9fWB9ZWxzZSBzPWBAZm9udC1mYWNlIHtmb250LWZhbWlseToiJHt0aGlzLmxvYWRlZE5hbWV9IjtzcmM6JHtlfX1gO3RoaXMuX2luc3BlY3RGb250Py4odGhpcyxlKTtyZXR1cm4gc31nZXRQYXRoR2VuZXJhdG9yKHQsZSl7aWYodm9pZCAwIT09dGhpcy5jb21waWxlZEdseXBoc1tlXSlyZXR1cm4gdGhpcy5jb21waWxlZEdseXBoc1tlXTtsZXQgczt0cnl7cz10LmdldCh0aGlzLmxvYWRlZE5hbWUrIl9wYXRoXyIrZSl9Y2F0Y2godCl7aWYoIXRoaXMuaWdub3JlRXJyb3JzKXRocm93IHQ7KDAsaS53YXJuKShgZ2V0UGF0aEdlbmVyYXRvciAtIGlnbm9yaW5nIGNoYXJhY3RlcjogIiR7dH0iLmApO3JldHVybiB0aGlzLmNvbXBpbGVkR2x5cGhzW2VdPWZ1bmN0aW9uKHQsZSl7fX1pZih0aGlzLmlzRXZhbFN1cHBvcnRlZCYmaS5GZWF0dXJlVGVzdC5pc0V2YWxTdXBwb3J0ZWQpe2NvbnN0IHQ9W107Zm9yKGNvbnN0IGUgb2Ygcyl7Y29uc3Qgcz12b2lkIDAhPT1lLmFyZ3M/ZS5hcmdzLmpvaW4oIiwiKToiIjt0LnB1c2goImMuIixlLmNtZCwiKCIscywiKTtcbiIpfXJldHVybiB0aGlzLmNvbXBpbGVkR2x5cGhzW2VdPW5ldyBGdW5jdGlvbigiYyIsInNpemUiLHQuam9pbigiIikpfXJldHVybiB0aGlzLmNvbXBpbGVkR2x5cGhzW2VdPWZ1bmN0aW9uKHQsZSl7Zm9yKGNvbnN0IGkgb2Ygcyl7InNjYWxlIj09PWkuY21kJiYoaS5hcmdzPVtlLC1lXSk7dFtpLmNtZF0uYXBwbHkodCxpLmFyZ3MpfX19fX0sKHQsZSk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7ZS5pc05vZGVKUz12b2lkIDA7Y29uc3Qgcz0hKCJvYmplY3QiIT10eXBlb2YgcHJvY2Vzc3x8cHJvY2VzcysiIiE9IltvYmplY3QgcHJvY2Vzc10ifHxwcm9jZXNzLnZlcnNpb25zLm53fHxwcm9jZXNzLnZlcnNpb25zLmVsZWN0cm9uJiZwcm9jZXNzLnR5cGUmJiJicm93c2VyIiE9PXByb2Nlc3MudHlwZSk7ZS5pc05vZGVKUz1zfSwodCxlLHMpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO2UuQ2FudmFzR3JhcGhpY3M9dm9pZCAwO3ZhciBpPXMoMSksbj1zKDYpLGE9cygxMikscj1zKDEzKSxvPXMoMTApO2NvbnN0IGw9NDA5NixjPTE2O2NsYXNzIENhY2hlZENhbnZhc2Vze2NvbnN0cnVjdG9yKHQpe3RoaXMuY2FudmFzRmFjdG9yeT10O3RoaXMuY2FjaGU9T2JqZWN0LmNyZWF0ZShudWxsKX1nZXRDYW52YXModCxlLHMpe2xldCBpO2lmKHZvaWQgMCE9PXRoaXMuY2FjaGVbdF0pe2k9dGhpcy5jYWNoZVt0XTt0aGlzLmNhbnZhc0ZhY3RvcnkucmVzZXQoaSxlLHMpfWVsc2V7aT10aGlzLmNhbnZhc0ZhY3RvcnkuY3JlYXRlKGUscyk7dGhpcy5jYWNoZVt0XT1pfXJldHVybiBpfWRlbGV0ZSh0KXtkZWxldGUgdGhpcy5jYWNoZVt0XX1jbGVhcigpe2Zvcihjb25zdCB0IGluIHRoaXMuY2FjaGUpe2NvbnN0IGU9dGhpcy5jYWNoZVt0XTt0aGlzLmNhbnZhc0ZhY3RvcnkuZGVzdHJveShlKTtkZWxldGUgdGhpcy5jYWNoZVt0XX19fWZ1bmN0aW9uIGRyYXdJbWFnZUF0SW50ZWdlckNvb3Jkcyh0LGUscyxpLGEscixvLGwsYyxoKXtjb25zdFtkLHUscCxmLGcsbV09KDAsbi5nZXRDdXJyZW50VHJhbnNmb3JtKSh0KTtpZigwPT09dSYmMD09PXApe2NvbnN0IG49bypkK2csYj1NYXRoLnJvdW5kKG4pLEE9bCpmK20sXz1NYXRoLnJvdW5kKEEpLHk9KG8rYykqZCtnLHY9TWF0aC5hYnMoTWF0aC5yb3VuZCh5KS1iKXx8MSxTPShsK2gpKmYrbSx4PU1hdGguYWJzKE1hdGgucm91bmQoUyktXyl8fDE7dC5zZXRUcmFuc2Zvcm0oTWF0aC5zaWduKGQpLDAsMCxNYXRoLnNpZ24oZiksYixfKTt0LmRyYXdJbWFnZShlLHMsaSxhLHIsMCwwLHYseCk7dC5zZXRUcmFuc2Zvcm0oZCx1LHAsZixnLG0pO3JldHVyblt2LHhdfWlmKDA9PT1kJiYwPT09Zil7Y29uc3Qgbj1sKnArZyxiPU1hdGgucm91bmQobiksQT1vKnUrbSxfPU1hdGgucm91bmQoQSkseT0obCtoKSpwK2csdj1NYXRoLmFicyhNYXRoLnJvdW5kKHkpLWIpfHwxLFM9KG8rYykqdSttLHg9TWF0aC5hYnMoTWF0aC5yb3VuZChTKS1fKXx8MTt0LnNldFRyYW5zZm9ybSgwLE1hdGguc2lnbih1KSxNYXRoLnNpZ24ocCksMCxiLF8pO3QuZHJhd0ltYWdlKGUscyxpLGEsciwwLDAseCx2KTt0LnNldFRyYW5zZm9ybShkLHUscCxmLGcsbSk7cmV0dXJuW3gsdl19dC5kcmF3SW1hZ2UoZSxzLGksYSxyLG8sbCxjLGgpO3JldHVybltNYXRoLmh5cG90KGQsdSkqYyxNYXRoLmh5cG90KHAsZikqaF19Y2xhc3MgQ2FudmFzRXh0cmFTdGF0ZXtjb25zdHJ1Y3Rvcih0LGUpe3RoaXMuYWxwaGFJc1NoYXBlPSExO3RoaXMuZm9udFNpemU9MDt0aGlzLmZvbnRTaXplU2NhbGU9MTt0aGlzLnRleHRNYXRyaXg9aS5JREVOVElUWV9NQVRSSVg7dGhpcy50ZXh0TWF0cml4U2NhbGU9MTt0aGlzLmZvbnRNYXRyaXg9aS5GT05UX0lERU5USVRZX01BVFJJWDt0aGlzLmxlYWRpbmc9MDt0aGlzLng9MDt0aGlzLnk9MDt0aGlzLmxpbmVYPTA7dGhpcy5saW5lWT0wO3RoaXMuY2hhclNwYWNpbmc9MDt0aGlzLndvcmRTcGFjaW5nPTA7dGhpcy50ZXh0SFNjYWxlPTE7dGhpcy50ZXh0UmVuZGVyaW5nTW9kZT1pLlRleHRSZW5kZXJpbmdNb2RlLkZJTEw7dGhpcy50ZXh0UmlzZT0wO3RoaXMuZmlsbENvbG9yPSIjMDAwMDAwIjt0aGlzLnN0cm9rZUNvbG9yPSIjMDAwMDAwIjt0aGlzLnBhdHRlcm5GaWxsPSExO3RoaXMuZmlsbEFscGhhPTE7dGhpcy5zdHJva2VBbHBoYT0xO3RoaXMubGluZVdpZHRoPTE7dGhpcy5hY3RpdmVTTWFzaz1udWxsO3RoaXMudHJhbnNmZXJNYXBzPSJub25lIjt0aGlzLnN0YXJ0TmV3UGF0aEFuZENsaXBCb3goWzAsMCx0LGVdKX1jbG9uZSgpe2NvbnN0IHQ9T2JqZWN0LmNyZWF0ZSh0aGlzKTt0LmNsaXBCb3g9dGhpcy5jbGlwQm94LnNsaWNlKCk7cmV0dXJuIHR9c2V0Q3VycmVudFBvaW50KHQsZSl7dGhpcy54PXQ7dGhpcy55PWV9dXBkYXRlUGF0aE1pbk1heCh0LGUscyl7W2Usc109aS5VdGlsLmFwcGx5VHJhbnNmb3JtKFtlLHNdLHQpO3RoaXMubWluWD1NYXRoLm1pbih0aGlzLm1pblgsZSk7dGhpcy5taW5ZPU1hdGgubWluKHRoaXMubWluWSxzKTt0aGlzLm1heFg9TWF0aC5tYXgodGhpcy5tYXhYLGUpO3RoaXMubWF4WT1NYXRoLm1heCh0aGlzLm1heFkscyl9dXBkYXRlUmVjdE1pbk1heCh0LGUpe2NvbnN0IHM9aS5VdGlsLmFwcGx5VHJhbnNmb3JtKGUsdCksbj1pLlV0aWwuYXBwbHlUcmFuc2Zvcm0oZS5zbGljZSgyKSx0KTt0aGlzLm1pblg9TWF0aC5taW4odGhpcy5taW5YLHNbMF0sblswXSk7dGhpcy5taW5ZPU1hdGgubWluKHRoaXMubWluWSxzWzFdLG5bMV0pO3RoaXMubWF4WD1NYXRoLm1heCh0aGlzLm1heFgsc1swXSxuWzBdKTt0aGlzLm1heFk9TWF0aC5tYXgodGhpcy5tYXhZLHNbMV0sblsxXSl9dXBkYXRlU2NhbGluZ1BhdGhNaW5NYXgodCxlKXtpLlV0aWwuc2NhbGVNaW5NYXgodCxlKTt0aGlzLm1pblg9TWF0aC5taW4odGhpcy5taW5YLGVbMF0pO3RoaXMubWF4WD1NYXRoLm1heCh0aGlzLm1heFgsZVsxXSk7dGhpcy5taW5ZPU1hdGgubWluKHRoaXMubWluWSxlWzJdKTt0aGlzLm1heFk9TWF0aC5tYXgodGhpcy5tYXhZLGVbM10pfXVwZGF0ZUN1cnZlUGF0aE1pbk1heCh0LGUscyxuLGEscixvLGwsYyxoKXtjb25zdCBkPWkuVXRpbC5iZXppZXJCb3VuZGluZ0JveChlLHMsbixhLHIsbyxsLGMpO2lmKGgpe2hbMF09TWF0aC5taW4oaFswXSxkWzBdLGRbMl0pO2hbMV09TWF0aC5tYXgoaFsxXSxkWzBdLGRbMl0pO2hbMl09TWF0aC5taW4oaFsyXSxkWzFdLGRbM10pO2hbM109TWF0aC5tYXgoaFszXSxkWzFdLGRbM10pfWVsc2UgdGhpcy51cGRhdGVSZWN0TWluTWF4KHQsZCl9Z2V0UGF0aEJvdW5kaW5nQm94KHQ9YS5QYXRoVHlwZS5GSUxMLGU9bnVsbCl7Y29uc3Qgcz1bdGhpcy5taW5YLHRoaXMubWluWSx0aGlzLm1heFgsdGhpcy5tYXhZXTtpZih0PT09YS5QYXRoVHlwZS5TVFJPS0Upe2V8fCgwLGkudW5yZWFjaGFibGUpKCJTdHJva2UgYm91bmRpbmcgYm94IG11c3QgaW5jbHVkZSB0cmFuc2Zvcm0uIik7Y29uc3QgdD1pLlV0aWwuc2luZ3VsYXJWYWx1ZURlY29tcG9zZTJkU2NhbGUoZSksbj10WzBdKnRoaXMubGluZVdpZHRoLzIsYT10WzFdKnRoaXMubGluZVdpZHRoLzI7c1swXS09bjtzWzFdLT1hO3NbMl0rPW47c1szXSs9YX1yZXR1cm4gc311cGRhdGVDbGlwRnJvbVBhdGgoKXtjb25zdCB0PWkuVXRpbC5pbnRlcnNlY3QodGhpcy5jbGlwQm94LHRoaXMuZ2V0UGF0aEJvdW5kaW5nQm94KCkpO3RoaXMuc3RhcnROZXdQYXRoQW5kQ2xpcEJveCh0fHxbMCwwLDAsMF0pfWlzRW1wdHlDbGlwKCl7cmV0dXJuIHRoaXMubWluWD09PTEvMH1zdGFydE5ld1BhdGhBbmRDbGlwQm94KHQpe3RoaXMuY2xpcEJveD10O3RoaXMubWluWD0xLzA7dGhpcy5taW5ZPTEvMDt0aGlzLm1heFg9MDt0aGlzLm1heFk9MH1nZXRDbGlwcGVkUGF0aEJvdW5kaW5nQm94KHQ9YS5QYXRoVHlwZS5GSUxMLGU9bnVsbCl7cmV0dXJuIGkuVXRpbC5pbnRlcnNlY3QodGhpcy5jbGlwQm94LHRoaXMuZ2V0UGF0aEJvdW5kaW5nQm94KHQsZSkpfX1mdW5jdGlvbiBwdXRCaW5hcnlJbWFnZURhdGEodCxlKXtpZigidW5kZWZpbmVkIiE9dHlwZW9mIEltYWdlRGF0YSYmZSBpbnN0YW5jZW9mIEltYWdlRGF0YSl7dC5wdXRJbWFnZURhdGEoZSwwLDApO3JldHVybn1jb25zdCBzPWUuaGVpZ2h0LG49ZS53aWR0aCxhPXMlYyxyPShzLWEpL2Msbz0wPT09YT9yOnIrMSxsPXQuY3JlYXRlSW1hZ2VEYXRhKG4sYyk7bGV0IGgsZD0wO2NvbnN0IHU9ZS5kYXRhLHA9bC5kYXRhO2xldCBmLGcsbSxiO2lmKGUua2luZD09PWkuSW1hZ2VLaW5kLkdSQVlTQ0FMRV8xQlBQKXtjb25zdCBlPXUuYnl0ZUxlbmd0aCxzPW5ldyBVaW50MzJBcnJheShwLmJ1ZmZlciwwLHAuYnl0ZUxlbmd0aD4+MiksYj1zLmxlbmd0aCxBPW4rNz4+MyxfPTQyOTQ5NjcyOTUseT1pLkZlYXR1cmVUZXN0LmlzTGl0dGxlRW5kaWFuPzQyNzgxOTAwODA6MjU1O2ZvcihmPTA7ZjxvO2YrKyl7bT1mPHI/YzphO2g9MDtmb3IoZz0wO2c8bTtnKyspe2NvbnN0IHQ9ZS1kO2xldCBpPTA7Y29uc3QgYT10PkE/bjo4KnQtNyxyPS04JmE7bGV0IG89MCxsPTA7Zm9yKDtpPHI7aSs9OCl7bD11W2QrK107c1toKytdPTEyOCZsP186eTtzW2grK109NjQmbD9fOnk7c1toKytdPTMyJmw/Xzp5O3NbaCsrXT0xNiZsP186eTtzW2grK109OCZsP186eTtzW2grK109NCZsP186eTtzW2grK109MiZsP186eTtzW2grK109MSZsP186eX1mb3IoO2k8YTtpKyspe2lmKDA9PT1vKXtsPXVbZCsrXTtvPTEyOH1zW2grK109bCZvP186eTtvPj49MX19Zm9yKDtoPGI7KXNbaCsrXT0wO3QucHV0SW1hZ2VEYXRhKGwsMCxmKmMpfX1lbHNlIGlmKGUua2luZD09PWkuSW1hZ2VLaW5kLlJHQkFfMzJCUFApe2c9MDtiPW4qYyo0O2ZvcihmPTA7ZjxyO2YrKyl7cC5zZXQodS5zdWJhcnJheShkLGQrYikpO2QrPWI7dC5wdXRJbWFnZURhdGEobCwwLGcpO2crPWN9aWYoZjxvKXtiPW4qYSo0O3Auc2V0KHUuc3ViYXJyYXkoZCxkK2IpKTt0LnB1dEltYWdlRGF0YShsLDAsZyl9fWVsc2V7aWYoZS5raW5kIT09aS5JbWFnZUtpbmQuUkdCXzI0QlBQKXRocm93IG5ldyBFcnJvcihgYmFkIGltYWdlIGtpbmQ6ICR7ZS5raW5kfWApO209YztiPW4qbTtmb3IoZj0wO2Y8bztmKyspe2lmKGY+PXIpe209YTtiPW4qbX1oPTA7Zm9yKGc9YjtnLS07KXtwW2grK109dVtkKytdO3BbaCsrXT11W2QrK107cFtoKytdPXVbZCsrXTtwW2grK109MjU1fXQucHV0SW1hZ2VEYXRhKGwsMCxmKmMpfX19ZnVuY3Rpb24gcHV0QmluYXJ5SW1hZ2VNYXNrKHQsZSl7aWYoZS5iaXRtYXApe3QuZHJhd0ltYWdlKGUuYml0bWFwLDAsMCk7cmV0dXJufWNvbnN0IHM9ZS5oZWlnaHQsaT1lLndpZHRoLG49cyVjLGE9KHMtbikvYyxvPTA9PT1uP2E6YSsxLGw9dC5jcmVhdGVJbWFnZURhdGEoaSxjKTtsZXQgaD0wO2NvbnN0IGQ9ZS5kYXRhLHU9bC5kYXRhO2ZvcihsZXQgZT0wO2U8bztlKyspe2NvbnN0IHM9ZTxhP2M6bjsoe3NyY1BvczpofT0oMCxyLmNvbnZlcnRCbGFja0FuZFdoaXRlVG9SR0JBKSh7c3JjOmQsc3JjUG9zOmgsZGVzdDp1LHdpZHRoOmksaGVpZ2h0OnMsbm9uQmxhY2tDb2xvcjowfSkpO3QucHV0SW1hZ2VEYXRhKGwsMCxlKmMpfX1mdW5jdGlvbiBjb3B5Q3R4U3RhdGUodCxlKXtjb25zdCBzPVsic3Ryb2tlU3R5bGUiLCJmaWxsU3R5bGUiLCJmaWxsUnVsZSIsImdsb2JhbEFscGhhIiwibGluZVdpZHRoIiwibGluZUNhcCIsImxpbmVKb2luIiwibWl0ZXJMaW1pdCIsImdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiIsImZvbnQiLCJmaWx0ZXIiXTtmb3IoY29uc3QgaSBvZiBzKXZvaWQgMCE9PXRbaV0mJihlW2ldPXRbaV0pO2lmKHZvaWQgMCE9PXQuc2V0TGluZURhc2gpe2Uuc2V0TGluZURhc2godC5nZXRMaW5lRGFzaCgpKTtlLmxpbmVEYXNoT2Zmc2V0PXQubGluZURhc2hPZmZzZXR9fWZ1bmN0aW9uIHJlc2V0Q3R4VG9EZWZhdWx0KHQpe3Quc3Ryb2tlU3R5bGU9dC5maWxsU3R5bGU9IiMwMDAwMDAiO3QuZmlsbFJ1bGU9Im5vbnplcm8iO3QuZ2xvYmFsQWxwaGE9MTt0LmxpbmVXaWR0aD0xO3QubGluZUNhcD0iYnV0dCI7dC5saW5lSm9pbj0ibWl0ZXIiO3QubWl0ZXJMaW1pdD0xMDt0Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbj0ic291cmNlLW92ZXIiO3QuZm9udD0iMTBweCBzYW5zLXNlcmlmIjtpZih2b2lkIDAhPT10LnNldExpbmVEYXNoKXt0LnNldExpbmVEYXNoKFtdKTt0LmxpbmVEYXNoT2Zmc2V0PTB9by5pc05vZGVKU3x8KHQuZmlsdGVyPSJub25lIil9ZnVuY3Rpb24gY29tcG9zZVNNYXNrQmFja2Ryb3AodCxlLHMsaSl7Y29uc3Qgbj10Lmxlbmd0aDtmb3IobGV0IGE9MzthPG47YSs9NCl7Y29uc3Qgbj10W2FdO2lmKDA9PT1uKXt0W2EtM109ZTt0W2EtMl09czt0W2EtMV09aX1lbHNlIGlmKG48MjU1KXtjb25zdCByPTI1NS1uO3RbYS0zXT10W2EtM10qbitlKnI+Pjg7dFthLTJdPXRbYS0yXSpuK3Mqcj4+ODt0W2EtMV09dFthLTFdKm4raSpyPj44fX19ZnVuY3Rpb24gY29tcG9zZVNNYXNrQWxwaGEodCxlLHMpe2NvbnN0IGk9dC5sZW5ndGg7Zm9yKGxldCBuPTM7bjxpO24rPTQpe2NvbnN0IGk9cz9zW3Rbbl1dOnRbbl07ZVtuXT1lW25dKmkqLjAwMzkyMTU2ODYyNzQ1MDk4fDB9fWZ1bmN0aW9uIGNvbXBvc2VTTWFza0x1bWlub3NpdHkodCxlLHMpe2NvbnN0IGk9dC5sZW5ndGg7Zm9yKGxldCBuPTM7bjxpO24rPTQpe2NvbnN0IGk9NzcqdFtuLTNdKzE1Mip0W24tMl0rMjgqdFtuLTFdO2Vbbl09cz9lW25dKnNbaT4+OF0+Pjg6ZVtuXSppPj4xNn19ZnVuY3Rpb24gY29tcG9zZVNNYXNrKHQsZSxzLGkpe2NvbnN0IG49aVswXSxhPWlbMV0scj1pWzJdLW4sbz1pWzNdLWE7aWYoMCE9PXImJjAhPT1vKXshZnVuY3Rpb24gZ2VuZXJpY0NvbXBvc2VTTWFzayh0LGUscyxpLG4sYSxyLG8sbCxjLGgpe2NvbnN0IGQ9ISFhLHU9ZD9hWzBdOjAscD1kP2FbMV06MCxmPWQ/YVsyXTowO2xldCBnO2c9Ikx1bWlub3NpdHkiPT09bj9jb21wb3NlU01hc2tMdW1pbm9zaXR5OmNvbXBvc2VTTWFza0FscGhhO2NvbnN0IG09TWF0aC5taW4oaSxNYXRoLmNlaWwoMTA0ODU3Ni9zKSk7Zm9yKGxldCBuPTA7bjxpO24rPW0pe2NvbnN0IGE9TWF0aC5taW4obSxpLW4pLGI9dC5nZXRJbWFnZURhdGEoby1jLG4rKGwtaCkscyxhKSxBPWUuZ2V0SW1hZ2VEYXRhKG8sbitsLHMsYSk7ZCYmY29tcG9zZVNNYXNrQmFja2Ryb3AoYi5kYXRhLHUscCxmKTtnKGIuZGF0YSxBLmRhdGEscik7ZS5wdXRJbWFnZURhdGEoQSxvLG4rbCl9fShlLmNvbnRleHQscyxyLG8sZS5zdWJ0eXBlLGUuYmFja2Ryb3AsZS50cmFuc2Zlck1hcCxuLGEsZS5vZmZzZXRYLGUub2Zmc2V0WSk7dC5zYXZlKCk7dC5nbG9iYWxBbHBoYT0xO3QuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uPSJzb3VyY2Utb3ZlciI7dC5zZXRUcmFuc2Zvcm0oMSwwLDAsMSwwLDApO3QuZHJhd0ltYWdlKHMuY2FudmFzLDAsMCk7dC5yZXN0b3JlKCl9fWZ1bmN0aW9uIGdldEltYWdlU21vb3RoaW5nRW5hYmxlZCh0LGUpe2NvbnN0IHM9aS5VdGlsLnNpbmd1bGFyVmFsdWVEZWNvbXBvc2UyZFNjYWxlKHQpO3NbMF09TWF0aC5mcm91bmQoc1swXSk7c1sxXT1NYXRoLmZyb3VuZChzWzFdKTtjb25zdCBhPU1hdGguZnJvdW5kKChnbG9iYWxUaGlzLmRldmljZVBpeGVsUmF0aW98fDEpKm4uUGl4ZWxzUGVySW5jaC5QREZfVE9fQ1NTX1VOSVRTKTtyZXR1cm4gdm9pZCAwIT09ZT9lOnNbMF08PWF8fHNbMV08PWF9Y29uc3QgaD1bImJ1dHQiLCJyb3VuZCIsInNxdWFyZSJdLGQ9WyJtaXRlciIsInJvdW5kIiwiYmV2ZWwiXSx1PXt9LHA9e307Y2xhc3MgQ2FudmFzR3JhcGhpY3N7Y29uc3RydWN0b3IodCxlLHMsaSxuLHtvcHRpb25hbENvbnRlbnRDb25maWc6YSxtYXJrZWRDb250ZW50U3RhY2s6cj1udWxsfSxvLGwpe3RoaXMuY3R4PXQ7dGhpcy5jdXJyZW50PW5ldyBDYW52YXNFeHRyYVN0YXRlKHRoaXMuY3R4LmNhbnZhcy53aWR0aCx0aGlzLmN0eC5jYW52YXMuaGVpZ2h0KTt0aGlzLnN0YXRlU3RhY2s9W107dGhpcy5wZW5kaW5nQ2xpcD1udWxsO3RoaXMucGVuZGluZ0VPRmlsbD0hMTt0aGlzLnJlcz1udWxsO3RoaXMueG9ianM9bnVsbDt0aGlzLmNvbW1vbk9ianM9ZTt0aGlzLm9ianM9czt0aGlzLmNhbnZhc0ZhY3Rvcnk9aTt0aGlzLmZpbHRlckZhY3Rvcnk9bjt0aGlzLmdyb3VwU3RhY2s9W107dGhpcy5wcm9jZXNzaW5nVHlwZTM9bnVsbDt0aGlzLmJhc2VUcmFuc2Zvcm09bnVsbDt0aGlzLmJhc2VUcmFuc2Zvcm1TdGFjaz1bXTt0aGlzLmdyb3VwTGV2ZWw9MDt0aGlzLnNtYXNrU3RhY2s9W107dGhpcy5zbWFza0NvdW50ZXI9MDt0aGlzLnRlbXBTTWFzaz1udWxsO3RoaXMuc3VzcGVuZGVkQ3R4PW51bGw7dGhpcy5jb250ZW50VmlzaWJsZT0hMDt0aGlzLm1hcmtlZENvbnRlbnRTdGFjaz1yfHxbXTt0aGlzLm9wdGlvbmFsQ29udGVudENvbmZpZz1hO3RoaXMuY2FjaGVkQ2FudmFzZXM9bmV3IENhY2hlZENhbnZhc2VzKHRoaXMuY2FudmFzRmFjdG9yeSk7dGhpcy5jYWNoZWRQYXR0ZXJucz1uZXcgTWFwO3RoaXMuYW5ub3RhdGlvbkNhbnZhc01hcD1vO3RoaXMudmlld3BvcnRTY2FsZT0xO3RoaXMub3V0cHV0U2NhbGVYPTE7dGhpcy5vdXRwdXRTY2FsZVk9MTt0aGlzLnBhZ2VDb2xvcnM9bDt0aGlzLl9jYWNoZWRTY2FsZUZvclN0cm9raW5nPVstMSwwXTt0aGlzLl9jYWNoZWRHZXRTaW5nbGVQaXhlbFdpZHRoPW51bGw7dGhpcy5fY2FjaGVkQml0bWFwc01hcD1uZXcgTWFwfWdldE9iamVjdCh0LGU9bnVsbCl7cmV0dXJuInN0cmluZyI9PXR5cGVvZiB0P3Quc3RhcnRzV2l0aCgiZ18iKT90aGlzLmNvbW1vbk9ianMuZ2V0KHQpOnRoaXMub2Jqcy5nZXQodCk6ZX1iZWdpbkRyYXdpbmcoe3RyYW5zZm9ybTp0LHZpZXdwb3J0OmUsdHJhbnNwYXJlbmN5OnM9ITEsYmFja2dyb3VuZDppPW51bGx9KXtjb25zdCBhPXRoaXMuY3R4LmNhbnZhcy53aWR0aCxyPXRoaXMuY3R4LmNhbnZhcy5oZWlnaHQsbz10aGlzLmN0eC5maWxsU3R5bGU7dGhpcy5jdHguZmlsbFN0eWxlPWl8fCIjZmZmZmZmIjt0aGlzLmN0eC5maWxsUmVjdCgwLDAsYSxyKTt0aGlzLmN0eC5maWxsU3R5bGU9bztpZihzKXtjb25zdCB0PXRoaXMuY2FjaGVkQ2FudmFzZXMuZ2V0Q2FudmFzKCJ0cmFuc3BhcmVudCIsYSxyKTt0aGlzLmNvbXBvc2l0ZUN0eD10aGlzLmN0eDt0aGlzLnRyYW5zcGFyZW50Q2FudmFzPXQuY2FudmFzO3RoaXMuY3R4PXQuY29udGV4dDt0aGlzLmN0eC5zYXZlKCk7dGhpcy5jdHgudHJhbnNmb3JtKC4uLigwLG4uZ2V0Q3VycmVudFRyYW5zZm9ybSkodGhpcy5jb21wb3NpdGVDdHgpKX10aGlzLmN0eC5zYXZlKCk7cmVzZXRDdHhUb0RlZmF1bHQodGhpcy5jdHgpO2lmKHQpe3RoaXMuY3R4LnRyYW5zZm9ybSguLi50KTt0aGlzLm91dHB1dFNjYWxlWD10WzBdO3RoaXMub3V0cHV0U2NhbGVZPXRbMF19dGhpcy5jdHgudHJhbnNmb3JtKC4uLmUudHJhbnNmb3JtKTt0aGlzLnZpZXdwb3J0U2NhbGU9ZS5zY2FsZTt0aGlzLmJhc2VUcmFuc2Zvcm09KDAsbi5nZXRDdXJyZW50VHJhbnNmb3JtKSh0aGlzLmN0eCl9ZXhlY3V0ZU9wZXJhdG9yTGlzdCh0LGUscyxuKXtjb25zdCBhPXQuYXJnc0FycmF5LHI9dC5mbkFycmF5O2xldCBvPWV8fDA7Y29uc3QgbD1hLmxlbmd0aDtpZihsPT09bylyZXR1cm4gbztjb25zdCBjPWwtbz4xMCYmImZ1bmN0aW9uIj09dHlwZW9mIHMsaD1jP0RhdGUubm93KCkrMTU6MDtsZXQgZD0wO2NvbnN0IHU9dGhpcy5jb21tb25PYmpzLHA9dGhpcy5vYmpzO2xldCBmO2Zvcig7Oyl7aWYodm9pZCAwIT09biYmbz09PW4ubmV4dEJyZWFrUG9pbnQpe24uYnJlYWtJdChvLHMpO3JldHVybiBvfWY9cltvXTtpZihmIT09aS5PUFMuZGVwZW5kZW5jeSl0aGlzW2ZdLmFwcGx5KHRoaXMsYVtvXSk7ZWxzZSBmb3IoY29uc3QgdCBvZiBhW29dKXtjb25zdCBlPXQuc3RhcnRzV2l0aCgiZ18iKT91OnA7aWYoIWUuaGFzKHQpKXtlLmdldCh0LHMpO3JldHVybiBvfX1vKys7aWYobz09PWwpcmV0dXJuIG87aWYoYyYmKytkPjEwKXtpZihEYXRlLm5vdygpPmgpe3MoKTtyZXR1cm4gb31kPTB9fX0jeHQoKXtmb3IoO3RoaXMuc3RhdGVTdGFjay5sZW5ndGh8fHRoaXMuaW5TTWFza01vZGU7KXRoaXMucmVzdG9yZSgpO3RoaXMuY3R4LnJlc3RvcmUoKTtpZih0aGlzLnRyYW5zcGFyZW50Q2FudmFzKXt0aGlzLmN0eD10aGlzLmNvbXBvc2l0ZUN0eDt0aGlzLmN0eC5zYXZlKCk7dGhpcy5jdHguc2V0VHJhbnNmb3JtKDEsMCwwLDEsMCwwKTt0aGlzLmN0eC5kcmF3SW1hZ2UodGhpcy50cmFuc3BhcmVudENhbnZhcywwLDApO3RoaXMuY3R4LnJlc3RvcmUoKTt0aGlzLnRyYW5zcGFyZW50Q2FudmFzPW51bGx9fWVuZERyYXdpbmcoKXt0aGlzLiN4dCgpO3RoaXMuY2FjaGVkQ2FudmFzZXMuY2xlYXIoKTt0aGlzLmNhY2hlZFBhdHRlcm5zLmNsZWFyKCk7Zm9yKGNvbnN0IHQgb2YgdGhpcy5fY2FjaGVkQml0bWFwc01hcC52YWx1ZXMoKSl7Zm9yKGNvbnN0IGUgb2YgdC52YWx1ZXMoKSkidW5kZWZpbmVkIiE9dHlwZW9mIEhUTUxDYW52YXNFbGVtZW50JiZlIGluc3RhbmNlb2YgSFRNTENhbnZhc0VsZW1lbnQmJihlLndpZHRoPWUuaGVpZ2h0PTApO3QuY2xlYXIoKX10aGlzLl9jYWNoZWRCaXRtYXBzTWFwLmNsZWFyKCk7dGhpcy4jQ3QoKX0jQ3QoKXtpZih0aGlzLnBhZ2VDb2xvcnMpe2NvbnN0IHQ9dGhpcy5maWx0ZXJGYWN0b3J5LmFkZEhDTUZpbHRlcih0aGlzLnBhZ2VDb2xvcnMuZm9yZWdyb3VuZCx0aGlzLnBhZ2VDb2xvcnMuYmFja2dyb3VuZCk7aWYoIm5vbmUiIT09dCl7Y29uc3QgZT10aGlzLmN0eC5maWx0ZXI7dGhpcy5jdHguZmlsdGVyPXQ7dGhpcy5jdHguZHJhd0ltYWdlKHRoaXMuY3R4LmNhbnZhcywwLDApO3RoaXMuY3R4LmZpbHRlcj1lfX19X3NjYWxlSW1hZ2UodCxlKXtjb25zdCBzPXQud2lkdGgsaT10LmhlaWdodDtsZXQgbixhLHI9TWF0aC5tYXgoTWF0aC5oeXBvdChlWzBdLGVbMV0pLDEpLG89TWF0aC5tYXgoTWF0aC5oeXBvdChlWzJdLGVbM10pLDEpLGw9cyxjPWksaD0icHJlc2NhbGUxIjtmb3IoO3I+MiYmbD4xfHxvPjImJmM+MTspe2xldCBlPWwscz1jO2lmKHI+MiYmbD4xKXtlPWw+PTE2Mzg0P01hdGguZmxvb3IobC8yKS0xfHwxOk1hdGguY2VpbChsLzIpO3IvPWwvZX1pZihvPjImJmM+MSl7cz1jPj0xNjM4ND9NYXRoLmZsb29yKGMvMiktMXx8MTpNYXRoLmNlaWwoYykvMjtvLz1jL3N9bj10aGlzLmNhY2hlZENhbnZhc2VzLmdldENhbnZhcyhoLGUscyk7YT1uLmNvbnRleHQ7YS5jbGVhclJlY3QoMCwwLGUscyk7YS5kcmF3SW1hZ2UodCwwLDAsbCxjLDAsMCxlLHMpO3Q9bi5jYW52YXM7bD1lO2M9cztoPSJwcmVzY2FsZTEiPT09aD8icHJlc2NhbGUyIjoicHJlc2NhbGUxIn1yZXR1cm57aW1nOnQscGFpbnRXaWR0aDpsLHBhaW50SGVpZ2h0OmN9fV9jcmVhdGVNYXNrQ2FudmFzKHQpe2NvbnN0IGU9dGhpcy5jdHgse3dpZHRoOnMsaGVpZ2h0OnJ9PXQsbz10aGlzLmN1cnJlbnQuZmlsbENvbG9yLGw9dGhpcy5jdXJyZW50LnBhdHRlcm5GaWxsLGM9KDAsbi5nZXRDdXJyZW50VHJhbnNmb3JtKShlKTtsZXQgaCxkLHUscDtpZigodC5iaXRtYXB8fHQuZGF0YSkmJnQuY291bnQ+MSl7Y29uc3QgZT10LmJpdG1hcHx8dC5kYXRhLmJ1ZmZlcjtkPUpTT04uc3RyaW5naWZ5KGw/YzpbYy5zbGljZSgwLDQpLG9dKTtoPXRoaXMuX2NhY2hlZEJpdG1hcHNNYXAuZ2V0KGUpO2lmKCFoKXtoPW5ldyBNYXA7dGhpcy5fY2FjaGVkQml0bWFwc01hcC5zZXQoZSxoKX1jb25zdCBzPWguZ2V0KGQpO2lmKHMmJiFsKXtyZXR1cm57Y2FudmFzOnMsb2Zmc2V0WDpNYXRoLnJvdW5kKE1hdGgubWluKGNbMF0sY1syXSkrY1s0XSksb2Zmc2V0WTpNYXRoLnJvdW5kKE1hdGgubWluKGNbMV0sY1szXSkrY1s1XSl9fXU9c31pZighdSl7cD10aGlzLmNhY2hlZENhbnZhc2VzLmdldENhbnZhcygibWFza0NhbnZhcyIscyxyKTtwdXRCaW5hcnlJbWFnZU1hc2socC5jb250ZXh0LHQpfWxldCBmPWkuVXRpbC50cmFuc2Zvcm0oYyxbMS9zLDAsMCwtMS9yLDAsMF0pO2Y9aS5VdGlsLnRyYW5zZm9ybShmLFsxLDAsMCwxLDAsLXJdKTtjb25zdCBnPWkuVXRpbC5hcHBseVRyYW5zZm9ybShbMCwwXSxmKSxtPWkuVXRpbC5hcHBseVRyYW5zZm9ybShbcyxyXSxmKSxiPWkuVXRpbC5ub3JtYWxpemVSZWN0KFtnWzBdLGdbMV0sbVswXSxtWzFdXSksQT1NYXRoLnJvdW5kKGJbMl0tYlswXSl8fDEsXz1NYXRoLnJvdW5kKGJbM10tYlsxXSl8fDEseT10aGlzLmNhY2hlZENhbnZhc2VzLmdldENhbnZhcygiZmlsbENhbnZhcyIsQSxfKSx2PXkuY29udGV4dCxTPU1hdGgubWluKGdbMF0sbVswXSkseD1NYXRoLm1pbihnWzFdLG1bMV0pO3YudHJhbnNsYXRlKC1TLC14KTt2LnRyYW5zZm9ybSguLi5mKTtpZighdSl7dT10aGlzLl9zY2FsZUltYWdlKHAuY2FudmFzLCgwLG4uZ2V0Q3VycmVudFRyYW5zZm9ybUludmVyc2UpKHYpKTt1PXUuaW1nO2gmJmwmJmguc2V0KGQsdSl9di5pbWFnZVNtb290aGluZ0VuYWJsZWQ9Z2V0SW1hZ2VTbW9vdGhpbmdFbmFibGVkKCgwLG4uZ2V0Q3VycmVudFRyYW5zZm9ybSkodiksdC5pbnRlcnBvbGF0ZSk7ZHJhd0ltYWdlQXRJbnRlZ2VyQ29vcmRzKHYsdSwwLDAsdS53aWR0aCx1LmhlaWdodCwwLDAscyxyKTt2Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbj0ic291cmNlLWluIjtjb25zdCBDPWkuVXRpbC50cmFuc2Zvcm0oKDAsbi5nZXRDdXJyZW50VHJhbnNmb3JtSW52ZXJzZSkodiksWzEsMCwwLDEsLVMsLXhdKTt2LmZpbGxTdHlsZT1sP28uZ2V0UGF0dGVybihlLHRoaXMsQyxhLlBhdGhUeXBlLkZJTEwpOm87di5maWxsUmVjdCgwLDAscyxyKTtpZihoJiYhbCl7dGhpcy5jYWNoZWRDYW52YXNlcy5kZWxldGUoImZpbGxDYW52YXMiKTtoLnNldChkLHkuY2FudmFzKX1yZXR1cm57Y2FudmFzOnkuY2FudmFzLG9mZnNldFg6TWF0aC5yb3VuZChTKSxvZmZzZXRZOk1hdGgucm91bmQoeCl9fXNldExpbmVXaWR0aCh0KXt0IT09dGhpcy5jdXJyZW50LmxpbmVXaWR0aCYmKHRoaXMuX2NhY2hlZFNjYWxlRm9yU3Ryb2tpbmdbMF09LTEpO3RoaXMuY3VycmVudC5saW5lV2lkdGg9dDt0aGlzLmN0eC5saW5lV2lkdGg9dH1zZXRMaW5lQ2FwKHQpe3RoaXMuY3R4LmxpbmVDYXA9aFt0XX1zZXRMaW5lSm9pbih0KXt0aGlzLmN0eC5saW5lSm9pbj1kW3RdfXNldE1pdGVyTGltaXQodCl7dGhpcy5jdHgubWl0ZXJMaW1pdD10fXNldERhc2godCxlKXtjb25zdCBzPXRoaXMuY3R4O2lmKHZvaWQgMCE9PXMuc2V0TGluZURhc2gpe3Muc2V0TGluZURhc2godCk7cy5saW5lRGFzaE9mZnNldD1lfX1zZXRSZW5kZXJpbmdJbnRlbnQodCl7fXNldEZsYXRuZXNzKHQpe31zZXRHU3RhdGUodCl7Zm9yKGNvbnN0W2Usc11vZiB0KXN3aXRjaChlKXtjYXNlIkxXIjp0aGlzLnNldExpbmVXaWR0aChzKTticmVhaztjYXNlIkxDIjp0aGlzLnNldExpbmVDYXAocyk7YnJlYWs7Y2FzZSJMSiI6dGhpcy5zZXRMaW5lSm9pbihzKTticmVhaztjYXNlIk1MIjp0aGlzLnNldE1pdGVyTGltaXQocyk7YnJlYWs7Y2FzZSJEIjp0aGlzLnNldERhc2goc1swXSxzWzFdKTticmVhaztjYXNlIlJJIjp0aGlzLnNldFJlbmRlcmluZ0ludGVudChzKTticmVhaztjYXNlIkZMIjp0aGlzLnNldEZsYXRuZXNzKHMpO2JyZWFrO2Nhc2UiRm9udCI6dGhpcy5zZXRGb250KHNbMF0sc1sxXSk7YnJlYWs7Y2FzZSJDQSI6dGhpcy5jdXJyZW50LnN0cm9rZUFscGhhPXM7YnJlYWs7Y2FzZSJjYSI6dGhpcy5jdXJyZW50LmZpbGxBbHBoYT1zO3RoaXMuY3R4Lmdsb2JhbEFscGhhPXM7YnJlYWs7Y2FzZSJCTSI6dGhpcy5jdHguZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uPXM7YnJlYWs7Y2FzZSJTTWFzayI6dGhpcy5jdXJyZW50LmFjdGl2ZVNNYXNrPXM/dGhpcy50ZW1wU01hc2s6bnVsbDt0aGlzLnRlbXBTTWFzaz1udWxsO3RoaXMuY2hlY2tTTWFza1N0YXRlKCk7YnJlYWs7Y2FzZSJUUiI6dGhpcy5jdHguZmlsdGVyPXRoaXMuY3VycmVudC50cmFuc2Zlck1hcHM9dGhpcy5maWx0ZXJGYWN0b3J5LmFkZEZpbHRlcihzKX19Z2V0IGluU01hc2tNb2RlKCl7cmV0dXJuISF0aGlzLnN1c3BlbmRlZEN0eH1jaGVja1NNYXNrU3RhdGUoKXtjb25zdCB0PXRoaXMuaW5TTWFza01vZGU7dGhpcy5jdXJyZW50LmFjdGl2ZVNNYXNrJiYhdD90aGlzLmJlZ2luU01hc2tNb2RlKCk6IXRoaXMuY3VycmVudC5hY3RpdmVTTWFzayYmdCYmdGhpcy5lbmRTTWFza01vZGUoKX1iZWdpblNNYXNrTW9kZSgpe2lmKHRoaXMuaW5TTWFza01vZGUpdGhyb3cgbmV3IEVycm9yKCJiZWdpblNNYXNrTW9kZSBjYWxsZWQgd2hpbGUgYWxyZWFkeSBpbiBzbWFzayBtb2RlIik7Y29uc3QgdD10aGlzLmN0eC5jYW52YXMud2lkdGgsZT10aGlzLmN0eC5jYW52YXMuaGVpZ2h0LHM9InNtYXNrR3JvdXBBdCIrdGhpcy5ncm91cExldmVsLGk9dGhpcy5jYWNoZWRDYW52YXNlcy5nZXRDYW52YXMocyx0LGUpO3RoaXMuc3VzcGVuZGVkQ3R4PXRoaXMuY3R4O3RoaXMuY3R4PWkuY29udGV4dDtjb25zdCBhPXRoaXMuY3R4O2Euc2V0VHJhbnNmb3JtKC4uLigwLG4uZ2V0Q3VycmVudFRyYW5zZm9ybSkodGhpcy5zdXNwZW5kZWRDdHgpKTtjb3B5Q3R4U3RhdGUodGhpcy5zdXNwZW5kZWRDdHgsYSk7IWZ1bmN0aW9uIG1pcnJvckNvbnRleHRPcGVyYXRpb25zKHQsZSl7aWYodC5fcmVtb3ZlTWlycm9yaW5nKXRocm93IG5ldyBFcnJvcigiQ29udGV4dCBpcyBhbHJlYWR5IGZvcndhcmRpbmcgb3BlcmF0aW9ucy4iKTt0Ll9fb3JpZ2luYWxTYXZlPXQuc2F2ZTt0Ll9fb3JpZ2luYWxSZXN0b3JlPXQucmVzdG9yZTt0Ll9fb3JpZ2luYWxSb3RhdGU9dC5yb3RhdGU7dC5fX29yaWdpbmFsU2NhbGU9dC5zY2FsZTt0Ll9fb3JpZ2luYWxUcmFuc2xhdGU9dC50cmFuc2xhdGU7dC5fX29yaWdpbmFsVHJhbnNmb3JtPXQudHJhbnNmb3JtO3QuX19vcmlnaW5hbFNldFRyYW5zZm9ybT10LnNldFRyYW5zZm9ybTt0Ll9fb3JpZ2luYWxSZXNldFRyYW5zZm9ybT10LnJlc2V0VHJhbnNmb3JtO3QuX19vcmlnaW5hbENsaXA9dC5jbGlwO3QuX19vcmlnaW5hbE1vdmVUbz10Lm1vdmVUbzt0Ll9fb3JpZ2luYWxMaW5lVG89dC5saW5lVG87dC5fX29yaWdpbmFsQmV6aWVyQ3VydmVUbz10LmJlemllckN1cnZlVG87dC5fX29yaWdpbmFsUmVjdD10LnJlY3Q7dC5fX29yaWdpbmFsQ2xvc2VQYXRoPXQuY2xvc2VQYXRoO3QuX19vcmlnaW5hbEJlZ2luUGF0aD10LmJlZ2luUGF0aDt0Ll9yZW1vdmVNaXJyb3Jpbmc9KCk9Pnt0LnNhdmU9dC5fX29yaWdpbmFsU2F2ZTt0LnJlc3RvcmU9dC5fX29yaWdpbmFsUmVzdG9yZTt0LnJvdGF0ZT10Ll9fb3JpZ2luYWxSb3RhdGU7dC5zY2FsZT10Ll9fb3JpZ2luYWxTY2FsZTt0LnRyYW5zbGF0ZT10Ll9fb3JpZ2luYWxUcmFuc2xhdGU7dC50cmFuc2Zvcm09dC5fX29yaWdpbmFsVHJhbnNmb3JtO3Quc2V0VHJhbnNmb3JtPXQuX19vcmlnaW5hbFNldFRyYW5zZm9ybTt0LnJlc2V0VHJhbnNmb3JtPXQuX19vcmlnaW5hbFJlc2V0VHJhbnNmb3JtO3QuY2xpcD10Ll9fb3JpZ2luYWxDbGlwO3QubW92ZVRvPXQuX19vcmlnaW5hbE1vdmVUbzt0LmxpbmVUbz10Ll9fb3JpZ2luYWxMaW5lVG87dC5iZXppZXJDdXJ2ZVRvPXQuX19vcmlnaW5hbEJlemllckN1cnZlVG87dC5yZWN0PXQuX19vcmlnaW5hbFJlY3Q7dC5jbG9zZVBhdGg9dC5fX29yaWdpbmFsQ2xvc2VQYXRoO3QuYmVnaW5QYXRoPXQuX19vcmlnaW5hbEJlZ2luUGF0aDtkZWxldGUgdC5fcmVtb3ZlTWlycm9yaW5nfTt0LnNhdmU9ZnVuY3Rpb24gY3R4U2F2ZSgpe2Uuc2F2ZSgpO3RoaXMuX19vcmlnaW5hbFNhdmUoKX07dC5yZXN0b3JlPWZ1bmN0aW9uIGN0eFJlc3RvcmUoKXtlLnJlc3RvcmUoKTt0aGlzLl9fb3JpZ2luYWxSZXN0b3JlKCl9O3QudHJhbnNsYXRlPWZ1bmN0aW9uIGN0eFRyYW5zbGF0ZSh0LHMpe2UudHJhbnNsYXRlKHQscyk7dGhpcy5fX29yaWdpbmFsVHJhbnNsYXRlKHQscyl9O3Quc2NhbGU9ZnVuY3Rpb24gY3R4U2NhbGUodCxzKXtlLnNjYWxlKHQscyk7dGhpcy5fX29yaWdpbmFsU2NhbGUodCxzKX07dC50cmFuc2Zvcm09ZnVuY3Rpb24gY3R4VHJhbnNmb3JtKHQscyxpLG4sYSxyKXtlLnRyYW5zZm9ybSh0LHMsaSxuLGEscik7dGhpcy5fX29yaWdpbmFsVHJhbnNmb3JtKHQscyxpLG4sYSxyKX07dC5zZXRUcmFuc2Zvcm09ZnVuY3Rpb24gY3R4U2V0VHJhbnNmb3JtKHQscyxpLG4sYSxyKXtlLnNldFRyYW5zZm9ybSh0LHMsaSxuLGEscik7dGhpcy5fX29yaWdpbmFsU2V0VHJhbnNmb3JtKHQscyxpLG4sYSxyKX07dC5yZXNldFRyYW5zZm9ybT1mdW5jdGlvbiBjdHhSZXNldFRyYW5zZm9ybSgpe2UucmVzZXRUcmFuc2Zvcm0oKTt0aGlzLl9fb3JpZ2luYWxSZXNldFRyYW5zZm9ybSgpfTt0LnJvdGF0ZT1mdW5jdGlvbiBjdHhSb3RhdGUodCl7ZS5yb3RhdGUodCk7dGhpcy5fX29yaWdpbmFsUm90YXRlKHQpfTt0LmNsaXA9ZnVuY3Rpb24gY3R4Um90YXRlKHQpe2UuY2xpcCh0KTt0aGlzLl9fb3JpZ2luYWxDbGlwKHQpfTt0Lm1vdmVUbz1mdW5jdGlvbih0LHMpe2UubW92ZVRvKHQscyk7dGhpcy5fX29yaWdpbmFsTW92ZVRvKHQscyl9O3QubGluZVRvPWZ1bmN0aW9uKHQscyl7ZS5saW5lVG8odCxzKTt0aGlzLl9fb3JpZ2luYWxMaW5lVG8odCxzKX07dC5iZXppZXJDdXJ2ZVRvPWZ1bmN0aW9uKHQscyxpLG4sYSxyKXtlLmJlemllckN1cnZlVG8odCxzLGksbixhLHIpO3RoaXMuX19vcmlnaW5hbEJlemllckN1cnZlVG8odCxzLGksbixhLHIpfTt0LnJlY3Q9ZnVuY3Rpb24odCxzLGksbil7ZS5yZWN0KHQscyxpLG4pO3RoaXMuX19vcmlnaW5hbFJlY3QodCxzLGksbil9O3QuY2xvc2VQYXRoPWZ1bmN0aW9uKCl7ZS5jbG9zZVBhdGgoKTt0aGlzLl9fb3JpZ2luYWxDbG9zZVBhdGgoKX07dC5iZWdpblBhdGg9ZnVuY3Rpb24oKXtlLmJlZ2luUGF0aCgpO3RoaXMuX19vcmlnaW5hbEJlZ2luUGF0aCgpfX0oYSx0aGlzLnN1c3BlbmRlZEN0eCk7dGhpcy5zZXRHU3RhdGUoW1siQk0iLCJzb3VyY2Utb3ZlciJdLFsiY2EiLDFdLFsiQ0EiLDFdXSl9ZW5kU01hc2tNb2RlKCl7aWYoIXRoaXMuaW5TTWFza01vZGUpdGhyb3cgbmV3IEVycm9yKCJlbmRTTWFza01vZGUgY2FsbGVkIHdoaWxlIG5vdCBpbiBzbWFzayBtb2RlIik7dGhpcy5jdHguX3JlbW92ZU1pcnJvcmluZygpO2NvcHlDdHhTdGF0ZSh0aGlzLmN0eCx0aGlzLnN1c3BlbmRlZEN0eCk7dGhpcy5jdHg9dGhpcy5zdXNwZW5kZWRDdHg7dGhpcy5zdXNwZW5kZWRDdHg9bnVsbH1jb21wb3NlKHQpe2lmKCF0aGlzLmN1cnJlbnQuYWN0aXZlU01hc2spcmV0dXJuO2lmKHQpe3RbMF09TWF0aC5mbG9vcih0WzBdKTt0WzFdPU1hdGguZmxvb3IodFsxXSk7dFsyXT1NYXRoLmNlaWwodFsyXSk7dFszXT1NYXRoLmNlaWwodFszXSl9ZWxzZSB0PVswLDAsdGhpcy5jdHguY2FudmFzLndpZHRoLHRoaXMuY3R4LmNhbnZhcy5oZWlnaHRdO2NvbnN0IGU9dGhpcy5jdXJyZW50LmFjdGl2ZVNNYXNrO2NvbXBvc2VTTWFzayh0aGlzLnN1c3BlbmRlZEN0eCxlLHRoaXMuY3R4LHQpO3RoaXMuY3R4LnNhdmUoKTt0aGlzLmN0eC5zZXRUcmFuc2Zvcm0oMSwwLDAsMSwwLDApO3RoaXMuY3R4LmNsZWFyUmVjdCgwLDAsdGhpcy5jdHguY2FudmFzLndpZHRoLHRoaXMuY3R4LmNhbnZhcy5oZWlnaHQpO3RoaXMuY3R4LnJlc3RvcmUoKX1zYXZlKCl7aWYodGhpcy5pblNNYXNrTW9kZSl7Y29weUN0eFN0YXRlKHRoaXMuY3R4LHRoaXMuc3VzcGVuZGVkQ3R4KTt0aGlzLnN1c3BlbmRlZEN0eC5zYXZlKCl9ZWxzZSB0aGlzLmN0eC5zYXZlKCk7Y29uc3QgdD10aGlzLmN1cnJlbnQ7dGhpcy5zdGF0ZVN0YWNrLnB1c2godCk7dGhpcy5jdXJyZW50PXQuY2xvbmUoKX1yZXN0b3JlKCl7MD09PXRoaXMuc3RhdGVTdGFjay5sZW5ndGgmJnRoaXMuaW5TTWFza01vZGUmJnRoaXMuZW5kU01hc2tNb2RlKCk7aWYoMCE9PXRoaXMuc3RhdGVTdGFjay5sZW5ndGgpe3RoaXMuY3VycmVudD10aGlzLnN0YXRlU3RhY2sucG9wKCk7aWYodGhpcy5pblNNYXNrTW9kZSl7dGhpcy5zdXNwZW5kZWRDdHgucmVzdG9yZSgpO2NvcHlDdHhTdGF0ZSh0aGlzLnN1c3BlbmRlZEN0eCx0aGlzLmN0eCl9ZWxzZSB0aGlzLmN0eC5yZXN0b3JlKCk7dGhpcy5jaGVja1NNYXNrU3RhdGUoKTt0aGlzLnBlbmRpbmdDbGlwPW51bGw7dGhpcy5fY2FjaGVkU2NhbGVGb3JTdHJva2luZ1swXT0tMTt0aGlzLl9jYWNoZWRHZXRTaW5nbGVQaXhlbFdpZHRoPW51bGx9fXRyYW5zZm9ybSh0LGUscyxpLG4sYSl7dGhpcy5jdHgudHJhbnNmb3JtKHQsZSxzLGksbixhKTt0aGlzLl9jYWNoZWRTY2FsZUZvclN0cm9raW5nWzBdPS0xO3RoaXMuX2NhY2hlZEdldFNpbmdsZVBpeGVsV2lkdGg9bnVsbH1jb25zdHJ1Y3RQYXRoKHQsZSxzKXtjb25zdCBhPXRoaXMuY3R4LHI9dGhpcy5jdXJyZW50O2xldCBvLGwsYz1yLngsaD1yLnk7Y29uc3QgZD0oMCxuLmdldEN1cnJlbnRUcmFuc2Zvcm0pKGEpLHU9MD09PWRbMF0mJjA9PT1kWzNdfHwwPT09ZFsxXSYmMD09PWRbMl0scD11P3Muc2xpY2UoMCk6bnVsbDtmb3IobGV0IHM9MCxuPTAsZj10Lmxlbmd0aDtzPGY7cysrKXN3aXRjaCgwfHRbc10pe2Nhc2UgaS5PUFMucmVjdGFuZ2xlOmM9ZVtuKytdO2g9ZVtuKytdO2NvbnN0IHQ9ZVtuKytdLHM9ZVtuKytdLGY9Yyt0LGc9aCtzO2EubW92ZVRvKGMsaCk7aWYoMD09PXR8fDA9PT1zKWEubGluZVRvKGYsZyk7ZWxzZXthLmxpbmVUbyhmLGgpO2EubGluZVRvKGYsZyk7YS5saW5lVG8oYyxnKX11fHxyLnVwZGF0ZVJlY3RNaW5NYXgoZCxbYyxoLGYsZ10pO2EuY2xvc2VQYXRoKCk7YnJlYWs7Y2FzZSBpLk9QUy5tb3ZlVG86Yz1lW24rK107aD1lW24rK107YS5tb3ZlVG8oYyxoKTt1fHxyLnVwZGF0ZVBhdGhNaW5NYXgoZCxjLGgpO2JyZWFrO2Nhc2UgaS5PUFMubGluZVRvOmM9ZVtuKytdO2g9ZVtuKytdO2EubGluZVRvKGMsaCk7dXx8ci51cGRhdGVQYXRoTWluTWF4KGQsYyxoKTticmVhaztjYXNlIGkuT1BTLmN1cnZlVG86bz1jO2w9aDtjPWVbbis0XTtoPWVbbis1XTthLmJlemllckN1cnZlVG8oZVtuXSxlW24rMV0sZVtuKzJdLGVbbiszXSxjLGgpO3IudXBkYXRlQ3VydmVQYXRoTWluTWF4KGQsbyxsLGVbbl0sZVtuKzFdLGVbbisyXSxlW24rM10sYyxoLHApO24rPTY7YnJlYWs7Y2FzZSBpLk9QUy5jdXJ2ZVRvMjpvPWM7bD1oO2EuYmV6aWVyQ3VydmVUbyhjLGgsZVtuXSxlW24rMV0sZVtuKzJdLGVbbiszXSk7ci51cGRhdGVDdXJ2ZVBhdGhNaW5NYXgoZCxvLGwsYyxoLGVbbl0sZVtuKzFdLGVbbisyXSxlW24rM10scCk7Yz1lW24rMl07aD1lW24rM107bis9NDticmVhaztjYXNlIGkuT1BTLmN1cnZlVG8zOm89YztsPWg7Yz1lW24rMl07aD1lW24rM107YS5iZXppZXJDdXJ2ZVRvKGVbbl0sZVtuKzFdLGMsaCxjLGgpO3IudXBkYXRlQ3VydmVQYXRoTWluTWF4KGQsbyxsLGVbbl0sZVtuKzFdLGMsaCxjLGgscCk7bis9NDticmVhaztjYXNlIGkuT1BTLmNsb3NlUGF0aDphLmNsb3NlUGF0aCgpfXUmJnIudXBkYXRlU2NhbGluZ1BhdGhNaW5NYXgoZCxwKTtyLnNldEN1cnJlbnRQb2ludChjLGgpfWNsb3NlUGF0aCgpe3RoaXMuY3R4LmNsb3NlUGF0aCgpfXN0cm9rZSh0PSEwKXtjb25zdCBlPXRoaXMuY3R4LHM9dGhpcy5jdXJyZW50LnN0cm9rZUNvbG9yO2UuZ2xvYmFsQWxwaGE9dGhpcy5jdXJyZW50LnN0cm9rZUFscGhhO2lmKHRoaXMuY29udGVudFZpc2libGUpaWYoIm9iamVjdCI9PXR5cGVvZiBzJiZzPy5nZXRQYXR0ZXJuKXtlLnNhdmUoKTtlLnN0cm9rZVN0eWxlPXMuZ2V0UGF0dGVybihlLHRoaXMsKDAsbi5nZXRDdXJyZW50VHJhbnNmb3JtSW52ZXJzZSkoZSksYS5QYXRoVHlwZS5TVFJPS0UpO3RoaXMucmVzY2FsZUFuZFN0cm9rZSghMSk7ZS5yZXN0b3JlKCl9ZWxzZSB0aGlzLnJlc2NhbGVBbmRTdHJva2UoITApO3QmJnRoaXMuY29uc3VtZVBhdGgodGhpcy5jdXJyZW50LmdldENsaXBwZWRQYXRoQm91bmRpbmdCb3goKSk7ZS5nbG9iYWxBbHBoYT10aGlzLmN1cnJlbnQuZmlsbEFscGhhfWNsb3NlU3Ryb2tlKCl7dGhpcy5jbG9zZVBhdGgoKTt0aGlzLnN0cm9rZSgpfWZpbGwodD0hMCl7Y29uc3QgZT10aGlzLmN0eCxzPXRoaXMuY3VycmVudC5maWxsQ29sb3I7bGV0IGk9ITE7aWYodGhpcy5jdXJyZW50LnBhdHRlcm5GaWxsKXtlLnNhdmUoKTtlLmZpbGxTdHlsZT1zLmdldFBhdHRlcm4oZSx0aGlzLCgwLG4uZ2V0Q3VycmVudFRyYW5zZm9ybUludmVyc2UpKGUpLGEuUGF0aFR5cGUuRklMTCk7aT0hMH1jb25zdCByPXRoaXMuY3VycmVudC5nZXRDbGlwcGVkUGF0aEJvdW5kaW5nQm94KCk7aWYodGhpcy5jb250ZW50VmlzaWJsZSYmbnVsbCE9PXIpaWYodGhpcy5wZW5kaW5nRU9GaWxsKXtlLmZpbGwoImV2ZW5vZGQiKTt0aGlzLnBlbmRpbmdFT0ZpbGw9ITF9ZWxzZSBlLmZpbGwoKTtpJiZlLnJlc3RvcmUoKTt0JiZ0aGlzLmNvbnN1bWVQYXRoKHIpfWVvRmlsbCgpe3RoaXMucGVuZGluZ0VPRmlsbD0hMDt0aGlzLmZpbGwoKX1maWxsU3Ryb2tlKCl7dGhpcy5maWxsKCExKTt0aGlzLnN0cm9rZSghMSk7dGhpcy5jb25zdW1lUGF0aCgpfWVvRmlsbFN0cm9rZSgpe3RoaXMucGVuZGluZ0VPRmlsbD0hMDt0aGlzLmZpbGxTdHJva2UoKX1jbG9zZUZpbGxTdHJva2UoKXt0aGlzLmNsb3NlUGF0aCgpO3RoaXMuZmlsbFN0cm9rZSgpfWNsb3NlRU9GaWxsU3Ryb2tlKCl7dGhpcy5wZW5kaW5nRU9GaWxsPSEwO3RoaXMuY2xvc2VQYXRoKCk7dGhpcy5maWxsU3Ryb2tlKCl9ZW5kUGF0aCgpe3RoaXMuY29uc3VtZVBhdGgoKX1jbGlwKCl7dGhpcy5wZW5kaW5nQ2xpcD11fWVvQ2xpcCgpe3RoaXMucGVuZGluZ0NsaXA9cH1iZWdpblRleHQoKXt0aGlzLmN1cnJlbnQudGV4dE1hdHJpeD1pLklERU5USVRZX01BVFJJWDt0aGlzLmN1cnJlbnQudGV4dE1hdHJpeFNjYWxlPTE7dGhpcy5jdXJyZW50Lng9dGhpcy5jdXJyZW50LmxpbmVYPTA7dGhpcy5jdXJyZW50Lnk9dGhpcy5jdXJyZW50LmxpbmVZPTB9ZW5kVGV4dCgpe2NvbnN0IHQ9dGhpcy5wZW5kaW5nVGV4dFBhdGhzLGU9dGhpcy5jdHg7aWYodm9pZCAwIT09dCl7ZS5zYXZlKCk7ZS5iZWdpblBhdGgoKTtmb3IoY29uc3QgcyBvZiB0KXtlLnNldFRyYW5zZm9ybSguLi5zLnRyYW5zZm9ybSk7ZS50cmFuc2xhdGUocy54LHMueSk7cy5hZGRUb1BhdGgoZSxzLmZvbnRTaXplKX1lLnJlc3RvcmUoKTtlLmNsaXAoKTtlLmJlZ2luUGF0aCgpO2RlbGV0ZSB0aGlzLnBlbmRpbmdUZXh0UGF0aHN9ZWxzZSBlLmJlZ2luUGF0aCgpfXNldENoYXJTcGFjaW5nKHQpe3RoaXMuY3VycmVudC5jaGFyU3BhY2luZz10fXNldFdvcmRTcGFjaW5nKHQpe3RoaXMuY3VycmVudC53b3JkU3BhY2luZz10fXNldEhTY2FsZSh0KXt0aGlzLmN1cnJlbnQudGV4dEhTY2FsZT10LzEwMH1zZXRMZWFkaW5nKHQpe3RoaXMuY3VycmVudC5sZWFkaW5nPS10fXNldEZvbnQodCxlKXtjb25zdCBzPXRoaXMuY29tbW9uT2Jqcy5nZXQodCksbj10aGlzLmN1cnJlbnQ7aWYoIXMpdGhyb3cgbmV3IEVycm9yKGBDYW4ndCBmaW5kIGZvbnQgZm9yICR7dH1gKTtuLmZvbnRNYXRyaXg9cy5mb250TWF0cml4fHxpLkZPTlRfSURFTlRJVFlfTUFUUklYOzAhPT1uLmZvbnRNYXRyaXhbMF0mJjAhPT1uLmZvbnRNYXRyaXhbM118fCgwLGkud2FybikoIkludmFsaWQgZm9udCBtYXRyaXggZm9yIGZvbnQgIit0KTtpZihlPDApe2U9LWU7bi5mb250RGlyZWN0aW9uPS0xfWVsc2Ugbi5mb250RGlyZWN0aW9uPTE7dGhpcy5jdXJyZW50LmZvbnQ9czt0aGlzLmN1cnJlbnQuZm9udFNpemU9ZTtpZihzLmlzVHlwZTNGb250KXJldHVybjtjb25zdCBhPXMubG9hZGVkTmFtZXx8InNhbnMtc2VyaWYiLHI9cy5zeXN0ZW1Gb250SW5mbz8uY3NzfHxgIiR7YX0iLCAke3MuZmFsbGJhY2tOYW1lfWA7bGV0IG89Im5vcm1hbCI7cy5ibGFjaz9vPSI5MDAiOnMuYm9sZCYmKG89ImJvbGQiKTtjb25zdCBsPXMuaXRhbGljPyJpdGFsaWMiOiJub3JtYWwiO2xldCBjPWU7ZTwxNj9jPTE2OmU+MTAwJiYoYz0xMDApO3RoaXMuY3VycmVudC5mb250U2l6ZVNjYWxlPWUvYzt0aGlzLmN0eC5mb250PWAke2x9ICR7b30gJHtjfXB4ICR7cn1gfXNldFRleHRSZW5kZXJpbmdNb2RlKHQpe3RoaXMuY3VycmVudC50ZXh0UmVuZGVyaW5nTW9kZT10fXNldFRleHRSaXNlKHQpe3RoaXMuY3VycmVudC50ZXh0UmlzZT10fW1vdmVUZXh0KHQsZSl7dGhpcy5jdXJyZW50Lng9dGhpcy5jdXJyZW50LmxpbmVYKz10O3RoaXMuY3VycmVudC55PXRoaXMuY3VycmVudC5saW5lWSs9ZX1zZXRMZWFkaW5nTW92ZVRleHQodCxlKXt0aGlzLnNldExlYWRpbmcoLWUpO3RoaXMubW92ZVRleHQodCxlKX1zZXRUZXh0TWF0cml4KHQsZSxzLGksbixhKXt0aGlzLmN1cnJlbnQudGV4dE1hdHJpeD1bdCxlLHMsaSxuLGFdO3RoaXMuY3VycmVudC50ZXh0TWF0cml4U2NhbGU9TWF0aC5oeXBvdCh0LGUpO3RoaXMuY3VycmVudC54PXRoaXMuY3VycmVudC5saW5lWD0wO3RoaXMuY3VycmVudC55PXRoaXMuY3VycmVudC5saW5lWT0wfW5leHRMaW5lKCl7dGhpcy5tb3ZlVGV4dCgwLHRoaXMuY3VycmVudC5sZWFkaW5nKX1wYWludENoYXIodCxlLHMsYSl7Y29uc3Qgcj10aGlzLmN0eCxvPXRoaXMuY3VycmVudCxsPW8uZm9udCxjPW8udGV4dFJlbmRlcmluZ01vZGUsaD1vLmZvbnRTaXplL28uZm9udFNpemVTY2FsZSxkPWMmaS5UZXh0UmVuZGVyaW5nTW9kZS5GSUxMX1NUUk9LRV9NQVNLLHU9ISEoYyZpLlRleHRSZW5kZXJpbmdNb2RlLkFERF9UT19QQVRIX0ZMQUcpLHA9by5wYXR0ZXJuRmlsbCYmIWwubWlzc2luZ0ZpbGU7bGV0IGY7KGwuZGlzYWJsZUZvbnRGYWNlfHx1fHxwKSYmKGY9bC5nZXRQYXRoR2VuZXJhdG9yKHRoaXMuY29tbW9uT2Jqcyx0KSk7aWYobC5kaXNhYmxlRm9udEZhY2V8fHApe3Iuc2F2ZSgpO3IudHJhbnNsYXRlKGUscyk7ci5iZWdpblBhdGgoKTtmKHIsaCk7YSYmci5zZXRUcmFuc2Zvcm0oLi4uYSk7ZCE9PWkuVGV4dFJlbmRlcmluZ01vZGUuRklMTCYmZCE9PWkuVGV4dFJlbmRlcmluZ01vZGUuRklMTF9TVFJPS0V8fHIuZmlsbCgpO2QhPT1pLlRleHRSZW5kZXJpbmdNb2RlLlNUUk9LRSYmZCE9PWkuVGV4dFJlbmRlcmluZ01vZGUuRklMTF9TVFJPS0V8fHIuc3Ryb2tlKCk7ci5yZXN0b3JlKCl9ZWxzZXtkIT09aS5UZXh0UmVuZGVyaW5nTW9kZS5GSUxMJiZkIT09aS5UZXh0UmVuZGVyaW5nTW9kZS5GSUxMX1NUUk9LRXx8ci5maWxsVGV4dCh0LGUscyk7ZCE9PWkuVGV4dFJlbmRlcmluZ01vZGUuU1RST0tFJiZkIT09aS5UZXh0UmVuZGVyaW5nTW9kZS5GSUxMX1NUUk9LRXx8ci5zdHJva2VUZXh0KHQsZSxzKX1pZih1KXsodGhpcy5wZW5kaW5nVGV4dFBhdGhzfHw9W10pLnB1c2goe3RyYW5zZm9ybTooMCxuLmdldEN1cnJlbnRUcmFuc2Zvcm0pKHIpLHg6ZSx5OnMsZm9udFNpemU6aCxhZGRUb1BhdGg6Zn0pfX1nZXQgaXNGb250U3VicGl4ZWxBQUVuYWJsZWQoKXtjb25zdHtjb250ZXh0OnR9PXRoaXMuY2FjaGVkQ2FudmFzZXMuZ2V0Q2FudmFzKCJpc0ZvbnRTdWJwaXhlbEFBRW5hYmxlZCIsMTAsMTApO3Quc2NhbGUoMS41LDEpO3QuZmlsbFRleHQoIkkiLDAsMTApO2NvbnN0IGU9dC5nZXRJbWFnZURhdGEoMCwwLDEwLDEwKS5kYXRhO2xldCBzPSExO2ZvcihsZXQgdD0zO3Q8ZS5sZW5ndGg7dCs9NClpZihlW3RdPjAmJmVbdF08MjU1KXtzPSEwO2JyZWFrfXJldHVybigwLGkuc2hhZG93KSh0aGlzLCJpc0ZvbnRTdWJwaXhlbEFBRW5hYmxlZCIscyl9c2hvd1RleHQodCl7Y29uc3QgZT10aGlzLmN1cnJlbnQscz1lLmZvbnQ7aWYocy5pc1R5cGUzRm9udClyZXR1cm4gdGhpcy5zaG93VHlwZTNUZXh0KHQpO2NvbnN0IHI9ZS5mb250U2l6ZTtpZigwPT09cilyZXR1cm47Y29uc3Qgbz10aGlzLmN0eCxsPWUuZm9udFNpemVTY2FsZSxjPWUuY2hhclNwYWNpbmcsaD1lLndvcmRTcGFjaW5nLGQ9ZS5mb250RGlyZWN0aW9uLHU9ZS50ZXh0SFNjYWxlKmQscD10Lmxlbmd0aCxmPXMudmVydGljYWwsZz1mPzE6LTEsbT1zLmRlZmF1bHRWTWV0cmljcyxiPXIqZS5mb250TWF0cml4WzBdLEE9ZS50ZXh0UmVuZGVyaW5nTW9kZT09PWkuVGV4dFJlbmRlcmluZ01vZGUuRklMTCYmIXMuZGlzYWJsZUZvbnRGYWNlJiYhZS5wYXR0ZXJuRmlsbDtvLnNhdmUoKTtvLnRyYW5zZm9ybSguLi5lLnRleHRNYXRyaXgpO28udHJhbnNsYXRlKGUueCxlLnkrZS50ZXh0UmlzZSk7ZD4wP28uc2NhbGUodSwtMSk6by5zY2FsZSh1LDEpO2xldCBfO2lmKGUucGF0dGVybkZpbGwpe28uc2F2ZSgpO2NvbnN0IHQ9ZS5maWxsQ29sb3IuZ2V0UGF0dGVybihvLHRoaXMsKDAsbi5nZXRDdXJyZW50VHJhbnNmb3JtSW52ZXJzZSkobyksYS5QYXRoVHlwZS5GSUxMKTtfPSgwLG4uZ2V0Q3VycmVudFRyYW5zZm9ybSkobyk7by5yZXN0b3JlKCk7by5maWxsU3R5bGU9dH1sZXQgeT1lLmxpbmVXaWR0aDtjb25zdCB2PWUudGV4dE1hdHJpeFNjYWxlO2lmKDA9PT12fHwwPT09eSl7Y29uc3QgdD1lLnRleHRSZW5kZXJpbmdNb2RlJmkuVGV4dFJlbmRlcmluZ01vZGUuRklMTF9TVFJPS0VfTUFTSzt0IT09aS5UZXh0UmVuZGVyaW5nTW9kZS5TVFJPS0UmJnQhPT1pLlRleHRSZW5kZXJpbmdNb2RlLkZJTExfU1RST0tFfHwoeT10aGlzLmdldFNpbmdsZVBpeGVsV2lkdGgoKSl9ZWxzZSB5Lz12O2lmKDEhPT1sKXtvLnNjYWxlKGwsbCk7eS89bH1vLmxpbmVXaWR0aD15O2lmKHMuaXNJbnZhbGlkUERGanNGb250KXtjb25zdCBzPVtdO2xldCBpPTA7Zm9yKGNvbnN0IGUgb2YgdCl7cy5wdXNoKGUudW5pY29kZSk7aSs9ZS53aWR0aH1vLmZpbGxUZXh0KHMuam9pbigiIiksMCwwKTtlLngrPWkqYip1O28ucmVzdG9yZSgpO3RoaXMuY29tcG9zZSgpO3JldHVybn1sZXQgUyx4PTA7Zm9yKFM9MDtTPHA7KytTKXtjb25zdCBlPXRbU107aWYoIm51bWJlciI9PXR5cGVvZiBlKXt4Kz1nKmUqci8xZTM7Y29udGludWV9bGV0IGk9ITE7Y29uc3Qgbj0oZS5pc1NwYWNlP2g6MCkrYyxhPWUuZm9udENoYXIsdT1lLmFjY2VudDtsZXQgcCx5LHYsQz1lLndpZHRoO2lmKGYpe2NvbnN0IHQ9ZS52bWV0cmljfHxtLHM9LShlLnZtZXRyaWM/dFsxXTouNSpDKSpiLGk9dFsyXSpiO0M9dD8tdFswXTpDO3A9cy9sO3k9KHgraSkvbH1lbHNle3A9eC9sO3k9MH1pZihzLnJlbWVhc3VyZSYmQz4wKXtjb25zdCB0PTFlMypvLm1lYXN1cmVUZXh0KGEpLndpZHRoL3IqbDtpZihDPHQmJnRoaXMuaXNGb250U3VicGl4ZWxBQUVuYWJsZWQpe2NvbnN0IGU9Qy90O2k9ITA7by5zYXZlKCk7by5zY2FsZShlLDEpO3AvPWV9ZWxzZSBDIT09dCYmKHArPShDLXQpLzJlMypyL2wpfWlmKHRoaXMuY29udGVudFZpc2libGUmJihlLmlzSW5Gb250fHxzLm1pc3NpbmdGaWxlKSlpZihBJiYhdSlvLmZpbGxUZXh0KGEscCx5KTtlbHNle3RoaXMucGFpbnRDaGFyKGEscCx5LF8pO2lmKHUpe2NvbnN0IHQ9cCtyKnUub2Zmc2V0LngvbCxlPXktcip1Lm9mZnNldC55L2w7dGhpcy5wYWludENoYXIodS5mb250Q2hhcix0LGUsXyl9fXY9Zj9DKmItbipkOkMqYituKmQ7eCs9djtpJiZvLnJlc3RvcmUoKX1mP2UueS09eDplLngrPXgqdTtvLnJlc3RvcmUoKTt0aGlzLmNvbXBvc2UoKX1zaG93VHlwZTNUZXh0KHQpe2NvbnN0IGU9dGhpcy5jdHgscz10aGlzLmN1cnJlbnQsbj1zLmZvbnQsYT1zLmZvbnRTaXplLHI9cy5mb250RGlyZWN0aW9uLG89bi52ZXJ0aWNhbD8xOi0xLGw9cy5jaGFyU3BhY2luZyxjPXMud29yZFNwYWNpbmcsaD1zLnRleHRIU2NhbGUqcixkPXMuZm9udE1hdHJpeHx8aS5GT05UX0lERU5USVRZX01BVFJJWCx1PXQubGVuZ3RoO2xldCBwLGYsZyxtO2lmKCEocy50ZXh0UmVuZGVyaW5nTW9kZT09PWkuVGV4dFJlbmRlcmluZ01vZGUuSU5WSVNJQkxFKSYmMCE9PWEpe3RoaXMuX2NhY2hlZFNjYWxlRm9yU3Ryb2tpbmdbMF09LTE7dGhpcy5fY2FjaGVkR2V0U2luZ2xlUGl4ZWxXaWR0aD1udWxsO2Uuc2F2ZSgpO2UudHJhbnNmb3JtKC4uLnMudGV4dE1hdHJpeCk7ZS50cmFuc2xhdGUocy54LHMueSk7ZS5zY2FsZShoLHIpO2ZvcihwPTA7cDx1OysrcCl7Zj10W3BdO2lmKCJudW1iZXIiPT10eXBlb2YgZil7bT1vKmYqYS8xZTM7dGhpcy5jdHgudHJhbnNsYXRlKG0sMCk7cy54Kz1tKmg7Y29udGludWV9Y29uc3Qgcj0oZi5pc1NwYWNlP2M6MCkrbCx1PW4uY2hhclByb2NPcGVyYXRvckxpc3RbZi5vcGVyYXRvckxpc3RJZF07aWYoIXUpeygwLGkud2FybikoYFR5cGUzIGNoYXJhY3RlciAiJHtmLm9wZXJhdG9yTGlzdElkfSIgaXMgbm90IGF2YWlsYWJsZS5gKTtjb250aW51ZX1pZih0aGlzLmNvbnRlbnRWaXNpYmxlKXt0aGlzLnByb2Nlc3NpbmdUeXBlMz1mO3RoaXMuc2F2ZSgpO2Uuc2NhbGUoYSxhKTtlLnRyYW5zZm9ybSguLi5kKTt0aGlzLmV4ZWN1dGVPcGVyYXRvckxpc3QodSk7dGhpcy5yZXN0b3JlKCl9Zz1pLlV0aWwuYXBwbHlUcmFuc2Zvcm0oW2Yud2lkdGgsMF0sZClbMF0qYStyO2UudHJhbnNsYXRlKGcsMCk7cy54Kz1nKmh9ZS5yZXN0b3JlKCk7dGhpcy5wcm9jZXNzaW5nVHlwZTM9bnVsbH19c2V0Q2hhcldpZHRoKHQsZSl7fXNldENoYXJXaWR0aEFuZEJvdW5kcyh0LGUscyxpLG4sYSl7dGhpcy5jdHgucmVjdChzLGksbi1zLGEtaSk7dGhpcy5jdHguY2xpcCgpO3RoaXMuZW5kUGF0aCgpfWdldENvbG9yTl9QYXR0ZXJuKHQpe2xldCBlO2lmKCJUaWxpbmdQYXR0ZXJuIj09PXRbMF0pe2NvbnN0IHM9dFsxXSxpPXRoaXMuYmFzZVRyYW5zZm9ybXx8KDAsbi5nZXRDdXJyZW50VHJhbnNmb3JtKSh0aGlzLmN0eCkscj17Y3JlYXRlQ2FudmFzR3JhcGhpY3M6dD0+bmV3IENhbnZhc0dyYXBoaWNzKHQsdGhpcy5jb21tb25PYmpzLHRoaXMub2Jqcyx0aGlzLmNhbnZhc0ZhY3RvcnksdGhpcy5maWx0ZXJGYWN0b3J5LHtvcHRpb25hbENvbnRlbnRDb25maWc6dGhpcy5vcHRpb25hbENvbnRlbnRDb25maWcsbWFya2VkQ29udGVudFN0YWNrOnRoaXMubWFya2VkQ29udGVudFN0YWNrfSl9O2U9bmV3IGEuVGlsaW5nUGF0dGVybih0LHMsdGhpcy5jdHgscixpKX1lbHNlIGU9dGhpcy5fZ2V0UGF0dGVybih0WzFdLHRbMl0pO3JldHVybiBlfXNldFN0cm9rZUNvbG9yTigpe3RoaXMuY3VycmVudC5zdHJva2VDb2xvcj10aGlzLmdldENvbG9yTl9QYXR0ZXJuKGFyZ3VtZW50cyl9c2V0RmlsbENvbG9yTigpe3RoaXMuY3VycmVudC5maWxsQ29sb3I9dGhpcy5nZXRDb2xvck5fUGF0dGVybihhcmd1bWVudHMpO3RoaXMuY3VycmVudC5wYXR0ZXJuRmlsbD0hMH1zZXRTdHJva2VSR0JDb2xvcih0LGUscyl7Y29uc3Qgbj1pLlV0aWwubWFrZUhleENvbG9yKHQsZSxzKTt0aGlzLmN0eC5zdHJva2VTdHlsZT1uO3RoaXMuY3VycmVudC5zdHJva2VDb2xvcj1ufXNldEZpbGxSR0JDb2xvcih0LGUscyl7Y29uc3Qgbj1pLlV0aWwubWFrZUhleENvbG9yKHQsZSxzKTt0aGlzLmN0eC5maWxsU3R5bGU9bjt0aGlzLmN1cnJlbnQuZmlsbENvbG9yPW47dGhpcy5jdXJyZW50LnBhdHRlcm5GaWxsPSExfV9nZXRQYXR0ZXJuKHQsZT1udWxsKXtsZXQgcztpZih0aGlzLmNhY2hlZFBhdHRlcm5zLmhhcyh0KSlzPXRoaXMuY2FjaGVkUGF0dGVybnMuZ2V0KHQpO2Vsc2V7cz0oMCxhLmdldFNoYWRpbmdQYXR0ZXJuKSh0aGlzLmdldE9iamVjdCh0KSk7dGhpcy5jYWNoZWRQYXR0ZXJucy5zZXQodCxzKX1lJiYocy5tYXRyaXg9ZSk7cmV0dXJuIHN9c2hhZGluZ0ZpbGwodCl7aWYoIXRoaXMuY29udGVudFZpc2libGUpcmV0dXJuO2NvbnN0IGU9dGhpcy5jdHg7dGhpcy5zYXZlKCk7Y29uc3Qgcz10aGlzLl9nZXRQYXR0ZXJuKHQpO2UuZmlsbFN0eWxlPXMuZ2V0UGF0dGVybihlLHRoaXMsKDAsbi5nZXRDdXJyZW50VHJhbnNmb3JtSW52ZXJzZSkoZSksYS5QYXRoVHlwZS5TSEFESU5HKTtjb25zdCByPSgwLG4uZ2V0Q3VycmVudFRyYW5zZm9ybUludmVyc2UpKGUpO2lmKHIpe2NvbnN0IHQ9ZS5jYW52YXMscz10LndpZHRoLG49dC5oZWlnaHQsYT1pLlV0aWwuYXBwbHlUcmFuc2Zvcm0oWzAsMF0sciksbz1pLlV0aWwuYXBwbHlUcmFuc2Zvcm0oWzAsbl0sciksbD1pLlV0aWwuYXBwbHlUcmFuc2Zvcm0oW3MsMF0sciksYz1pLlV0aWwuYXBwbHlUcmFuc2Zvcm0oW3Msbl0sciksaD1NYXRoLm1pbihhWzBdLG9bMF0sbFswXSxjWzBdKSxkPU1hdGgubWluKGFbMV0sb1sxXSxsWzFdLGNbMV0pLHU9TWF0aC5tYXgoYVswXSxvWzBdLGxbMF0sY1swXSkscD1NYXRoLm1heChhWzFdLG9bMV0sbFsxXSxjWzFdKTt0aGlzLmN0eC5maWxsUmVjdChoLGQsdS1oLHAtZCl9ZWxzZSB0aGlzLmN0eC5maWxsUmVjdCgtMWUxMCwtMWUxMCwyZTEwLDJlMTApO3RoaXMuY29tcG9zZSh0aGlzLmN1cnJlbnQuZ2V0Q2xpcHBlZFBhdGhCb3VuZGluZ0JveCgpKTt0aGlzLnJlc3RvcmUoKX1iZWdpbklubGluZUltYWdlKCl7KDAsaS51bnJlYWNoYWJsZSkoIlNob3VsZCBub3QgY2FsbCBiZWdpbklubGluZUltYWdlIil9YmVnaW5JbWFnZURhdGEoKXsoMCxpLnVucmVhY2hhYmxlKSgiU2hvdWxkIG5vdCBjYWxsIGJlZ2luSW1hZ2VEYXRhIil9cGFpbnRGb3JtWE9iamVjdEJlZ2luKHQsZSl7aWYodGhpcy5jb250ZW50VmlzaWJsZSl7dGhpcy5zYXZlKCk7dGhpcy5iYXNlVHJhbnNmb3JtU3RhY2sucHVzaCh0aGlzLmJhc2VUcmFuc2Zvcm0pO0FycmF5LmlzQXJyYXkodCkmJjY9PT10Lmxlbmd0aCYmdGhpcy50cmFuc2Zvcm0oLi4udCk7dGhpcy5iYXNlVHJhbnNmb3JtPSgwLG4uZ2V0Q3VycmVudFRyYW5zZm9ybSkodGhpcy5jdHgpO2lmKGUpe2NvbnN0IHQ9ZVsyXS1lWzBdLHM9ZVszXS1lWzFdO3RoaXMuY3R4LnJlY3QoZVswXSxlWzFdLHQscyk7dGhpcy5jdXJyZW50LnVwZGF0ZVJlY3RNaW5NYXgoKDAsbi5nZXRDdXJyZW50VHJhbnNmb3JtKSh0aGlzLmN0eCksZSk7dGhpcy5jbGlwKCk7dGhpcy5lbmRQYXRoKCl9fX1wYWludEZvcm1YT2JqZWN0RW5kKCl7aWYodGhpcy5jb250ZW50VmlzaWJsZSl7dGhpcy5yZXN0b3JlKCk7dGhpcy5iYXNlVHJhbnNmb3JtPXRoaXMuYmFzZVRyYW5zZm9ybVN0YWNrLnBvcCgpfX1iZWdpbkdyb3VwKHQpe2lmKCF0aGlzLmNvbnRlbnRWaXNpYmxlKXJldHVybjt0aGlzLnNhdmUoKTtpZih0aGlzLmluU01hc2tNb2RlKXt0aGlzLmVuZFNNYXNrTW9kZSgpO3RoaXMuY3VycmVudC5hY3RpdmVTTWFzaz1udWxsfWNvbnN0IGU9dGhpcy5jdHg7dC5pc29sYXRlZHx8KDAsaS5pbmZvKSgiVE9ETzogU3VwcG9ydCBub24taXNvbGF0ZWQgZ3JvdXBzLiIpO3Qua25vY2tvdXQmJigwLGkud2FybikoIktub2Nrb3V0IGdyb3VwcyBub3Qgc3VwcG9ydGVkLiIpO2NvbnN0IHM9KDAsbi5nZXRDdXJyZW50VHJhbnNmb3JtKShlKTt0Lm1hdHJpeCYmZS50cmFuc2Zvcm0oLi4udC5tYXRyaXgpO2lmKCF0LmJib3gpdGhyb3cgbmV3IEVycm9yKCJCb3VuZGluZyBib3ggaXMgcmVxdWlyZWQuIik7bGV0IGE9aS5VdGlsLmdldEF4aWFsQWxpZ25lZEJvdW5kaW5nQm94KHQuYmJveCwoMCxuLmdldEN1cnJlbnRUcmFuc2Zvcm0pKGUpKTtjb25zdCByPVswLDAsZS5jYW52YXMud2lkdGgsZS5jYW52YXMuaGVpZ2h0XTthPWkuVXRpbC5pbnRlcnNlY3QoYSxyKXx8WzAsMCwwLDBdO2NvbnN0IG89TWF0aC5mbG9vcihhWzBdKSxjPU1hdGguZmxvb3IoYVsxXSk7bGV0IGg9TWF0aC5tYXgoTWF0aC5jZWlsKGFbMl0pLW8sMSksZD1NYXRoLm1heChNYXRoLmNlaWwoYVszXSktYywxKSx1PTEscD0xO2lmKGg+bCl7dT1oL2w7aD1sfWlmKGQ+bCl7cD1kL2w7ZD1sfXRoaXMuY3VycmVudC5zdGFydE5ld1BhdGhBbmRDbGlwQm94KFswLDAsaCxkXSk7bGV0IGY9Imdyb3VwQXQiK3RoaXMuZ3JvdXBMZXZlbDt0LnNtYXNrJiYoZis9Il9zbWFza18iK3RoaXMuc21hc2tDb3VudGVyKyslMik7Y29uc3QgZz10aGlzLmNhY2hlZENhbnZhc2VzLmdldENhbnZhcyhmLGgsZCksbT1nLmNvbnRleHQ7bS5zY2FsZSgxL3UsMS9wKTttLnRyYW5zbGF0ZSgtbywtYyk7bS50cmFuc2Zvcm0oLi4ucyk7aWYodC5zbWFzayl0aGlzLnNtYXNrU3RhY2sucHVzaCh7Y2FudmFzOmcuY2FudmFzLGNvbnRleHQ6bSxvZmZzZXRYOm8sb2Zmc2V0WTpjLHNjYWxlWDp1LHNjYWxlWTpwLHN1YnR5cGU6dC5zbWFzay5zdWJ0eXBlLGJhY2tkcm9wOnQuc21hc2suYmFja2Ryb3AsdHJhbnNmZXJNYXA6dC5zbWFzay50cmFuc2Zlck1hcHx8bnVsbCxzdGFydFRyYW5zZm9ybUludmVyc2U6bnVsbH0pO2Vsc2V7ZS5zZXRUcmFuc2Zvcm0oMSwwLDAsMSwwLDApO2UudHJhbnNsYXRlKG8sYyk7ZS5zY2FsZSh1LHApO2Uuc2F2ZSgpfWNvcHlDdHhTdGF0ZShlLG0pO3RoaXMuY3R4PW07dGhpcy5zZXRHU3RhdGUoW1siQk0iLCJzb3VyY2Utb3ZlciJdLFsiY2EiLDFdLFsiQ0EiLDFdXSk7dGhpcy5ncm91cFN0YWNrLnB1c2goZSk7dGhpcy5ncm91cExldmVsKyt9ZW5kR3JvdXAodCl7aWYoIXRoaXMuY29udGVudFZpc2libGUpcmV0dXJuO3RoaXMuZ3JvdXBMZXZlbC0tO2NvbnN0IGU9dGhpcy5jdHgscz10aGlzLmdyb3VwU3RhY2sucG9wKCk7dGhpcy5jdHg9czt0aGlzLmN0eC5pbWFnZVNtb290aGluZ0VuYWJsZWQ9ITE7aWYodC5zbWFzayl7dGhpcy50ZW1wU01hc2s9dGhpcy5zbWFza1N0YWNrLnBvcCgpO3RoaXMucmVzdG9yZSgpfWVsc2V7dGhpcy5jdHgucmVzdG9yZSgpO2NvbnN0IHQ9KDAsbi5nZXRDdXJyZW50VHJhbnNmb3JtKSh0aGlzLmN0eCk7dGhpcy5yZXN0b3JlKCk7dGhpcy5jdHguc2F2ZSgpO3RoaXMuY3R4LnNldFRyYW5zZm9ybSguLi50KTtjb25zdCBzPWkuVXRpbC5nZXRBeGlhbEFsaWduZWRCb3VuZGluZ0JveChbMCwwLGUuY2FudmFzLndpZHRoLGUuY2FudmFzLmhlaWdodF0sdCk7dGhpcy5jdHguZHJhd0ltYWdlKGUuY2FudmFzLDAsMCk7dGhpcy5jdHgucmVzdG9yZSgpO3RoaXMuY29tcG9zZShzKX19YmVnaW5Bbm5vdGF0aW9uKHQsZSxzLGEscil7dGhpcy4jeHQoKTtyZXNldEN0eFRvRGVmYXVsdCh0aGlzLmN0eCk7dGhpcy5jdHguc2F2ZSgpO3RoaXMuc2F2ZSgpO3RoaXMuYmFzZVRyYW5zZm9ybSYmdGhpcy5jdHguc2V0VHJhbnNmb3JtKC4uLnRoaXMuYmFzZVRyYW5zZm9ybSk7aWYoQXJyYXkuaXNBcnJheShlKSYmND09PWUubGVuZ3RoKXtjb25zdCBhPWVbMl0tZVswXSxvPWVbM10tZVsxXTtpZihyJiZ0aGlzLmFubm90YXRpb25DYW52YXNNYXApeyhzPXMuc2xpY2UoKSlbNF0tPWVbMF07c1s1XS09ZVsxXTsoZT1lLnNsaWNlKCkpWzBdPWVbMV09MDtlWzJdPWE7ZVszXT1vO2NvbnN0W3IsbF09aS5VdGlsLnNpbmd1bGFyVmFsdWVEZWNvbXBvc2UyZFNjYWxlKCgwLG4uZ2V0Q3VycmVudFRyYW5zZm9ybSkodGhpcy5jdHgpKSx7dmlld3BvcnRTY2FsZTpjfT10aGlzLGg9TWF0aC5jZWlsKGEqdGhpcy5vdXRwdXRTY2FsZVgqYyksZD1NYXRoLmNlaWwobyp0aGlzLm91dHB1dFNjYWxlWSpjKTt0aGlzLmFubm90YXRpb25DYW52YXM9dGhpcy5jYW52YXNGYWN0b3J5LmNyZWF0ZShoLGQpO2NvbnN0e2NhbnZhczp1LGNvbnRleHQ6cH09dGhpcy5hbm5vdGF0aW9uQ2FudmFzO3RoaXMuYW5ub3RhdGlvbkNhbnZhc01hcC5zZXQodCx1KTt0aGlzLmFubm90YXRpb25DYW52YXMuc2F2ZWRDdHg9dGhpcy5jdHg7dGhpcy5jdHg9cDt0aGlzLmN0eC5zYXZlKCk7dGhpcy5jdHguc2V0VHJhbnNmb3JtKHIsMCwwLC1sLDAsbypsKTtyZXNldEN0eFRvRGVmYXVsdCh0aGlzLmN0eCl9ZWxzZXtyZXNldEN0eFRvRGVmYXVsdCh0aGlzLmN0eCk7dGhpcy5jdHgucmVjdChlWzBdLGVbMV0sYSxvKTt0aGlzLmN0eC5jbGlwKCk7dGhpcy5lbmRQYXRoKCl9fXRoaXMuY3VycmVudD1uZXcgQ2FudmFzRXh0cmFTdGF0ZSh0aGlzLmN0eC5jYW52YXMud2lkdGgsdGhpcy5jdHguY2FudmFzLmhlaWdodCk7dGhpcy50cmFuc2Zvcm0oLi4ucyk7dGhpcy50cmFuc2Zvcm0oLi4uYSl9ZW5kQW5ub3RhdGlvbigpe2lmKHRoaXMuYW5ub3RhdGlvbkNhbnZhcyl7dGhpcy5jdHgucmVzdG9yZSgpO3RoaXMuI0N0KCk7dGhpcy5jdHg9dGhpcy5hbm5vdGF0aW9uQ2FudmFzLnNhdmVkQ3R4O2RlbGV0ZSB0aGlzLmFubm90YXRpb25DYW52YXMuc2F2ZWRDdHg7ZGVsZXRlIHRoaXMuYW5ub3RhdGlvbkNhbnZhc319cGFpbnRJbWFnZU1hc2tYT2JqZWN0KHQpe2lmKCF0aGlzLmNvbnRlbnRWaXNpYmxlKXJldHVybjtjb25zdCBlPXQuY291bnQ7KHQ9dGhpcy5nZXRPYmplY3QodC5kYXRhLHQpKS5jb3VudD1lO2NvbnN0IHM9dGhpcy5jdHgsaT10aGlzLnByb2Nlc3NpbmdUeXBlMztpZihpKXt2b2lkIDA9PT1pLmNvbXBpbGVkJiYoaS5jb21waWxlZD1mdW5jdGlvbiBjb21waWxlVHlwZTNHbHlwaCh0KXtjb25zdHt3aWR0aDplLGhlaWdodDpzfT10O2lmKGU+MWUzfHxzPjFlMylyZXR1cm4gbnVsbDtjb25zdCBpPW5ldyBVaW50OEFycmF5KFswLDIsNCwwLDEsMCw1LDQsOCwxMCwwLDgsMCwyLDEsMF0pLG49ZSsxO2xldCBhLHIsbyxsPW5ldyBVaW50OEFycmF5KG4qKHMrMSkpO2NvbnN0IGM9ZSs3Ji04O2xldCBoPW5ldyBVaW50OEFycmF5KGMqcyksZD0wO2Zvcihjb25zdCBlIG9mIHQuZGF0YSl7bGV0IHQ9MTI4O2Zvcig7dD4wOyl7aFtkKytdPWUmdD8wOjI1NTt0Pj49MX19bGV0IHU9MDtkPTA7aWYoMCE9PWhbZF0pe2xbMF09MTsrK3V9Zm9yKHI9MTtyPGU7cisrKXtpZihoW2RdIT09aFtkKzFdKXtsW3JdPWhbZF0/MjoxOysrdX1kKyt9aWYoMCE9PWhbZF0pe2xbcl09MjsrK3V9Zm9yKGE9MTthPHM7YSsrKXtkPWEqYztvPWEqbjtpZihoW2QtY10hPT1oW2RdKXtsW29dPWhbZF0/MTo4OysrdX1sZXQgdD0oaFtkXT80OjApKyhoW2QtY10/ODowKTtmb3Iocj0xO3I8ZTtyKyspe3Q9KHQ+PjIpKyhoW2QrMV0/NDowKSsoaFtkLWMrMV0/ODowKTtpZihpW3RdKXtsW28rcl09aVt0XTsrK3V9ZCsrfWlmKGhbZC1jXSE9PWhbZF0pe2xbbytyXT1oW2RdPzI6NDsrK3V9aWYodT4xZTMpcmV0dXJuIG51bGx9ZD1jKihzLTEpO289YSpuO2lmKDAhPT1oW2RdKXtsW29dPTg7Kyt1fWZvcihyPTE7cjxlO3IrKyl7aWYoaFtkXSE9PWhbZCsxXSl7bFtvK3JdPWhbZF0/NDo4OysrdX1kKyt9aWYoMCE9PWhbZF0pe2xbbytyXT00OysrdX1pZih1PjFlMylyZXR1cm4gbnVsbDtjb25zdCBwPW5ldyBJbnQzMkFycmF5KFswLG4sLTEsMCwtbiwwLDAsMCwxXSksZj1uZXcgUGF0aDJEO2ZvcihhPTA7dSYmYTw9czthKyspe2xldCB0PWEqbjtjb25zdCBzPXQrZTtmb3IoO3Q8cyYmIWxbdF07KXQrKztpZih0PT09cyljb250aW51ZTtmLm1vdmVUbyh0JW4sYSk7Y29uc3QgaT10O2xldCByPWxbdF07ZG97Y29uc3QgZT1wW3JdO2Rve3QrPWV9d2hpbGUoIWxbdF0pO2NvbnN0IHM9bFt0XTtpZig1IT09cyYmMTAhPT1zKXtyPXM7bFt0XT0wfWVsc2V7cj1zJjUxKnI+PjQ7bFt0XSY9cj4+MnxyPDwyfWYubGluZVRvKHQlbix0L258MCk7bFt0XXx8LS11fXdoaWxlKGkhPT10KTstLWF9aD1udWxsO2w9bnVsbDtyZXR1cm4gZnVuY3Rpb24odCl7dC5zYXZlKCk7dC5zY2FsZSgxL2UsLTEvcyk7dC50cmFuc2xhdGUoMCwtcyk7dC5maWxsKGYpO3QuYmVnaW5QYXRoKCk7dC5yZXN0b3JlKCl9fSh0KSk7aWYoaS5jb21waWxlZCl7aS5jb21waWxlZChzKTtyZXR1cm59fWNvbnN0IG49dGhpcy5fY3JlYXRlTWFza0NhbnZhcyh0KSxhPW4uY2FudmFzO3Muc2F2ZSgpO3Muc2V0VHJhbnNmb3JtKDEsMCwwLDEsMCwwKTtzLmRyYXdJbWFnZShhLG4ub2Zmc2V0WCxuLm9mZnNldFkpO3MucmVzdG9yZSgpO3RoaXMuY29tcG9zZSgpfXBhaW50SW1hZ2VNYXNrWE9iamVjdFJlcGVhdCh0LGUscz0wLGE9MCxyLG8pe2lmKCF0aGlzLmNvbnRlbnRWaXNpYmxlKXJldHVybjt0PXRoaXMuZ2V0T2JqZWN0KHQuZGF0YSx0KTtjb25zdCBsPXRoaXMuY3R4O2wuc2F2ZSgpO2NvbnN0IGM9KDAsbi5nZXRDdXJyZW50VHJhbnNmb3JtKShsKTtsLnRyYW5zZm9ybShlLHMsYSxyLDAsMCk7Y29uc3QgaD10aGlzLl9jcmVhdGVNYXNrQ2FudmFzKHQpO2wuc2V0VHJhbnNmb3JtKDEsMCwwLDEsaC5vZmZzZXRYLWNbNF0saC5vZmZzZXRZLWNbNV0pO2ZvcihsZXQgdD0wLG49by5sZW5ndGg7dDxuO3QrPTIpe2NvbnN0IG49aS5VdGlsLnRyYW5zZm9ybShjLFtlLHMsYSxyLG9bdF0sb1t0KzFdXSksW2QsdV09aS5VdGlsLmFwcGx5VHJhbnNmb3JtKFswLDBdLG4pO2wuZHJhd0ltYWdlKGguY2FudmFzLGQsdSl9bC5yZXN0b3JlKCk7dGhpcy5jb21wb3NlKCl9cGFpbnRJbWFnZU1hc2tYT2JqZWN0R3JvdXAodCl7aWYoIXRoaXMuY29udGVudFZpc2libGUpcmV0dXJuO2NvbnN0IGU9dGhpcy5jdHgscz10aGlzLmN1cnJlbnQuZmlsbENvbG9yLGk9dGhpcy5jdXJyZW50LnBhdHRlcm5GaWxsO2Zvcihjb25zdCByIG9mIHQpe2NvbnN0e2RhdGE6dCx3aWR0aDpvLGhlaWdodDpsLHRyYW5zZm9ybTpjfT1yLGg9dGhpcy5jYWNoZWRDYW52YXNlcy5nZXRDYW52YXMoIm1hc2tDYW52YXMiLG8sbCksZD1oLmNvbnRleHQ7ZC5zYXZlKCk7cHV0QmluYXJ5SW1hZ2VNYXNrKGQsdGhpcy5nZXRPYmplY3QodCxyKSk7ZC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb249InNvdXJjZS1pbiI7ZC5maWxsU3R5bGU9aT9zLmdldFBhdHRlcm4oZCx0aGlzLCgwLG4uZ2V0Q3VycmVudFRyYW5zZm9ybUludmVyc2UpKGUpLGEuUGF0aFR5cGUuRklMTCk6cztkLmZpbGxSZWN0KDAsMCxvLGwpO2QucmVzdG9yZSgpO2Uuc2F2ZSgpO2UudHJhbnNmb3JtKC4uLmMpO2Uuc2NhbGUoMSwtMSk7ZHJhd0ltYWdlQXRJbnRlZ2VyQ29vcmRzKGUsaC5jYW52YXMsMCwwLG8sbCwwLC0xLDEsMSk7ZS5yZXN0b3JlKCl9dGhpcy5jb21wb3NlKCl9cGFpbnRJbWFnZVhPYmplY3QodCl7aWYoIXRoaXMuY29udGVudFZpc2libGUpcmV0dXJuO2NvbnN0IGU9dGhpcy5nZXRPYmplY3QodCk7ZT90aGlzLnBhaW50SW5saW5lSW1hZ2VYT2JqZWN0KGUpOigwLGkud2FybikoIkRlcGVuZGVudCBpbWFnZSBpc24ndCByZWFkeSB5ZXQiKX1wYWludEltYWdlWE9iamVjdFJlcGVhdCh0LGUscyxuKXtpZighdGhpcy5jb250ZW50VmlzaWJsZSlyZXR1cm47Y29uc3QgYT10aGlzLmdldE9iamVjdCh0KTtpZighYSl7KDAsaS53YXJuKSgiRGVwZW5kZW50IGltYWdlIGlzbid0IHJlYWR5IHlldCIpO3JldHVybn1jb25zdCByPWEud2lkdGgsbz1hLmhlaWdodCxsPVtdO2ZvcihsZXQgdD0wLGk9bi5sZW5ndGg7dDxpO3QrPTIpbC5wdXNoKHt0cmFuc2Zvcm06W2UsMCwwLHMsblt0XSxuW3QrMV1dLHg6MCx5OjAsdzpyLGg6b30pO3RoaXMucGFpbnRJbmxpbmVJbWFnZVhPYmplY3RHcm91cChhLGwpfWFwcGx5VHJhbnNmZXJNYXBzVG9DYW52YXModCl7aWYoIm5vbmUiIT09dGhpcy5jdXJyZW50LnRyYW5zZmVyTWFwcyl7dC5maWx0ZXI9dGhpcy5jdXJyZW50LnRyYW5zZmVyTWFwczt0LmRyYXdJbWFnZSh0LmNhbnZhcywwLDApO3QuZmlsdGVyPSJub25lIn1yZXR1cm4gdC5jYW52YXN9YXBwbHlUcmFuc2Zlck1hcHNUb0JpdG1hcCh0KXtpZigibm9uZSI9PT10aGlzLmN1cnJlbnQudHJhbnNmZXJNYXBzKXJldHVybiB0LmJpdG1hcDtjb25zdHtiaXRtYXA6ZSx3aWR0aDpzLGhlaWdodDppfT10LG49dGhpcy5jYWNoZWRDYW52YXNlcy5nZXRDYW52YXMoImlubGluZUltYWdlIixzLGkpLGE9bi5jb250ZXh0O2EuZmlsdGVyPXRoaXMuY3VycmVudC50cmFuc2Zlck1hcHM7YS5kcmF3SW1hZ2UoZSwwLDApO2EuZmlsdGVyPSJub25lIjtyZXR1cm4gbi5jYW52YXN9cGFpbnRJbmxpbmVJbWFnZVhPYmplY3QodCl7aWYoIXRoaXMuY29udGVudFZpc2libGUpcmV0dXJuO2NvbnN0IGU9dC53aWR0aCxzPXQuaGVpZ2h0LGk9dGhpcy5jdHg7dGhpcy5zYXZlKCk7by5pc05vZGVKU3x8KGkuZmlsdGVyPSJub25lIik7aS5zY2FsZSgxL2UsLTEvcyk7bGV0IGE7aWYodC5iaXRtYXApYT10aGlzLmFwcGx5VHJhbnNmZXJNYXBzVG9CaXRtYXAodCk7ZWxzZSBpZigiZnVuY3Rpb24iPT10eXBlb2YgSFRNTEVsZW1lbnQmJnQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudHx8IXQuZGF0YSlhPXQ7ZWxzZXtjb25zdCBpPXRoaXMuY2FjaGVkQ2FudmFzZXMuZ2V0Q2FudmFzKCJpbmxpbmVJbWFnZSIsZSxzKS5jb250ZXh0O3B1dEJpbmFyeUltYWdlRGF0YShpLHQpO2E9dGhpcy5hcHBseVRyYW5zZmVyTWFwc1RvQ2FudmFzKGkpfWNvbnN0IHI9dGhpcy5fc2NhbGVJbWFnZShhLCgwLG4uZ2V0Q3VycmVudFRyYW5zZm9ybUludmVyc2UpKGkpKTtpLmltYWdlU21vb3RoaW5nRW5hYmxlZD1nZXRJbWFnZVNtb290aGluZ0VuYWJsZWQoKDAsbi5nZXRDdXJyZW50VHJhbnNmb3JtKShpKSx0LmludGVycG9sYXRlKTtkcmF3SW1hZ2VBdEludGVnZXJDb29yZHMoaSxyLmltZywwLDAsci5wYWludFdpZHRoLHIucGFpbnRIZWlnaHQsMCwtcyxlLHMpO3RoaXMuY29tcG9zZSgpO3RoaXMucmVzdG9yZSgpfXBhaW50SW5saW5lSW1hZ2VYT2JqZWN0R3JvdXAodCxlKXtpZighdGhpcy5jb250ZW50VmlzaWJsZSlyZXR1cm47Y29uc3Qgcz10aGlzLmN0eDtsZXQgaTtpZih0LmJpdG1hcClpPXQuYml0bWFwO2Vsc2V7Y29uc3QgZT10LndpZHRoLHM9dC5oZWlnaHQsbj10aGlzLmNhY2hlZENhbnZhc2VzLmdldENhbnZhcygiaW5saW5lSW1hZ2UiLGUscykuY29udGV4dDtwdXRCaW5hcnlJbWFnZURhdGEobix0KTtpPXRoaXMuYXBwbHlUcmFuc2Zlck1hcHNUb0NhbnZhcyhuKX1mb3IoY29uc3QgdCBvZiBlKXtzLnNhdmUoKTtzLnRyYW5zZm9ybSguLi50LnRyYW5zZm9ybSk7cy5zY2FsZSgxLC0xKTtkcmF3SW1hZ2VBdEludGVnZXJDb29yZHMocyxpLHQueCx0LnksdC53LHQuaCwwLC0xLDEsMSk7cy5yZXN0b3JlKCl9dGhpcy5jb21wb3NlKCl9cGFpbnRTb2xpZENvbG9ySW1hZ2VNYXNrKCl7aWYodGhpcy5jb250ZW50VmlzaWJsZSl7dGhpcy5jdHguZmlsbFJlY3QoMCwwLDEsMSk7dGhpcy5jb21wb3NlKCl9fW1hcmtQb2ludCh0KXt9bWFya1BvaW50UHJvcHModCxlKXt9YmVnaW5NYXJrZWRDb250ZW50KHQpe3RoaXMubWFya2VkQ29udGVudFN0YWNrLnB1c2goe3Zpc2libGU6ITB9KX1iZWdpbk1hcmtlZENvbnRlbnRQcm9wcyh0LGUpeyJPQyI9PT10P3RoaXMubWFya2VkQ29udGVudFN0YWNrLnB1c2goe3Zpc2libGU6dGhpcy5vcHRpb25hbENvbnRlbnRDb25maWcuaXNWaXNpYmxlKGUpfSk6dGhpcy5tYXJrZWRDb250ZW50U3RhY2sucHVzaCh7dmlzaWJsZTohMH0pO3RoaXMuY29udGVudFZpc2libGU9dGhpcy5pc0NvbnRlbnRWaXNpYmxlKCl9ZW5kTWFya2VkQ29udGVudCgpe3RoaXMubWFya2VkQ29udGVudFN0YWNrLnBvcCgpO3RoaXMuY29udGVudFZpc2libGU9dGhpcy5pc0NvbnRlbnRWaXNpYmxlKCl9YmVnaW5Db21wYXQoKXt9ZW5kQ29tcGF0KCl7fWNvbnN1bWVQYXRoKHQpe2NvbnN0IGU9dGhpcy5jdXJyZW50LmlzRW1wdHlDbGlwKCk7dGhpcy5wZW5kaW5nQ2xpcCYmdGhpcy5jdXJyZW50LnVwZGF0ZUNsaXBGcm9tUGF0aCgpO3RoaXMucGVuZGluZ0NsaXB8fHRoaXMuY29tcG9zZSh0KTtjb25zdCBzPXRoaXMuY3R4O2lmKHRoaXMucGVuZGluZ0NsaXApe2V8fCh0aGlzLnBlbmRpbmdDbGlwPT09cD9zLmNsaXAoImV2ZW5vZGQiKTpzLmNsaXAoKSk7dGhpcy5wZW5kaW5nQ2xpcD1udWxsfXRoaXMuY3VycmVudC5zdGFydE5ld1BhdGhBbmRDbGlwQm94KHRoaXMuY3VycmVudC5jbGlwQm94KTtzLmJlZ2luUGF0aCgpfWdldFNpbmdsZVBpeGVsV2lkdGgoKXtpZighdGhpcy5fY2FjaGVkR2V0U2luZ2xlUGl4ZWxXaWR0aCl7Y29uc3QgdD0oMCxuLmdldEN1cnJlbnRUcmFuc2Zvcm0pKHRoaXMuY3R4KTtpZigwPT09dFsxXSYmMD09PXRbMl0pdGhpcy5fY2FjaGVkR2V0U2luZ2xlUGl4ZWxXaWR0aD0xL01hdGgubWluKE1hdGguYWJzKHRbMF0pLE1hdGguYWJzKHRbM10pKTtlbHNle2NvbnN0IGU9TWF0aC5hYnModFswXSp0WzNdLXRbMl0qdFsxXSkscz1NYXRoLmh5cG90KHRbMF0sdFsyXSksaT1NYXRoLmh5cG90KHRbMV0sdFszXSk7dGhpcy5fY2FjaGVkR2V0U2luZ2xlUGl4ZWxXaWR0aD1NYXRoLm1heChzLGkpL2V9fXJldHVybiB0aGlzLl9jYWNoZWRHZXRTaW5nbGVQaXhlbFdpZHRofWdldFNjYWxlRm9yU3Ryb2tpbmcoKXtpZigtMT09PXRoaXMuX2NhY2hlZFNjYWxlRm9yU3Ryb2tpbmdbMF0pe2NvbnN0e2xpbmVXaWR0aDp0fT10aGlzLmN1cnJlbnQse2E6ZSxiOnMsYzppLGQ6bn09dGhpcy5jdHguZ2V0VHJhbnNmb3JtKCk7bGV0IGEscjtpZigwPT09cyYmMD09PWkpe2NvbnN0IHM9TWF0aC5hYnMoZSksaT1NYXRoLmFicyhuKTtpZihzPT09aSlpZigwPT09dClhPXI9MS9zO2Vsc2V7Y29uc3QgZT1zKnQ7YT1yPWU8MT8xL2U6MX1lbHNlIGlmKDA9PT10KXthPTEvcztyPTEvaX1lbHNle2NvbnN0IGU9cyp0LG49aSp0O2E9ZTwxPzEvZToxO3I9bjwxPzEvbjoxfX1lbHNle2NvbnN0IG89TWF0aC5hYnMoZSpuLXMqaSksbD1NYXRoLmh5cG90KGUscyksYz1NYXRoLmh5cG90KGksbik7aWYoMD09PXQpe2E9Yy9vO3I9bC9vfWVsc2V7Y29uc3QgZT10Km87YT1jPmU/Yy9lOjE7cj1sPmU/bC9lOjF9fXRoaXMuX2NhY2hlZFNjYWxlRm9yU3Ryb2tpbmdbMF09YTt0aGlzLl9jYWNoZWRTY2FsZUZvclN0cm9raW5nWzFdPXJ9cmV0dXJuIHRoaXMuX2NhY2hlZFNjYWxlRm9yU3Ryb2tpbmd9cmVzY2FsZUFuZFN0cm9rZSh0KXtjb25zdHtjdHg6ZX09dGhpcyx7bGluZVdpZHRoOnN9PXRoaXMuY3VycmVudCxbaSxuXT10aGlzLmdldFNjYWxlRm9yU3Ryb2tpbmcoKTtlLmxpbmVXaWR0aD1zfHwxO2lmKDE9PT1pJiYxPT09bil7ZS5zdHJva2UoKTtyZXR1cm59Y29uc3QgYT1lLmdldExpbmVEYXNoKCk7dCYmZS5zYXZlKCk7ZS5zY2FsZShpLG4pO2lmKGEubGVuZ3RoPjApe2NvbnN0IHQ9TWF0aC5tYXgoaSxuKTtlLnNldExpbmVEYXNoKGEubWFwKChlPT5lL3QpKSk7ZS5saW5lRGFzaE9mZnNldC89dH1lLnN0cm9rZSgpO3QmJmUucmVzdG9yZSgpfWlzQ29udGVudFZpc2libGUoKXtmb3IobGV0IHQ9dGhpcy5tYXJrZWRDb250ZW50U3RhY2subGVuZ3RoLTE7dD49MDt0LS0paWYoIXRoaXMubWFya2VkQ29udGVudFN0YWNrW3RdLnZpc2libGUpcmV0dXJuITE7cmV0dXJuITB9fWUuQ2FudmFzR3JhcGhpY3M9Q2FudmFzR3JhcGhpY3M7Zm9yKGNvbnN0IHQgaW4gaS5PUFMpdm9pZCAwIT09Q2FudmFzR3JhcGhpY3MucHJvdG90eXBlW3RdJiYoQ2FudmFzR3JhcGhpY3MucHJvdG90eXBlW2kuT1BTW3RdXT1DYW52YXNHcmFwaGljcy5wcm90b3R5cGVbdF0pfSwodCxlLHMpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO2UuVGlsaW5nUGF0dGVybj1lLlBhdGhUeXBlPXZvaWQgMDtlLmdldFNoYWRpbmdQYXR0ZXJuPWZ1bmN0aW9uIGdldFNoYWRpbmdQYXR0ZXJuKHQpe3N3aXRjaCh0WzBdKXtjYXNlIlJhZGlhbEF4aWFsIjpyZXR1cm4gbmV3IFJhZGlhbEF4aWFsU2hhZGluZ1BhdHRlcm4odCk7Y2FzZSJNZXNoIjpyZXR1cm4gbmV3IE1lc2hTaGFkaW5nUGF0dGVybih0KTtjYXNlIkR1bW15IjpyZXR1cm4gbmV3IER1bW15U2hhZGluZ1BhdHRlcm59dGhyb3cgbmV3IEVycm9yKGBVbmtub3duIElSIHR5cGU6ICR7dFswXX1gKX07dmFyIGk9cygxKSxuPXMoNik7Y29uc3QgYT17RklMTDoiRmlsbCIsU1RST0tFOiJTdHJva2UiLFNIQURJTkc6IlNoYWRpbmcifTtlLlBhdGhUeXBlPWE7ZnVuY3Rpb24gYXBwbHlCb3VuZGluZ0JveCh0LGUpe2lmKCFlKXJldHVybjtjb25zdCBzPWVbMl0tZVswXSxpPWVbM10tZVsxXSxuPW5ldyBQYXRoMkQ7bi5yZWN0KGVbMF0sZVsxXSxzLGkpO3QuY2xpcChuKX1jbGFzcyBCYXNlU2hhZGluZ1BhdHRlcm57Y29uc3RydWN0b3IoKXt0aGlzLmNvbnN0cnVjdG9yPT09QmFzZVNoYWRpbmdQYXR0ZXJuJiYoMCxpLnVucmVhY2hhYmxlKSgiQ2Fubm90IGluaXRpYWxpemUgQmFzZVNoYWRpbmdQYXR0ZXJuLiIpfWdldFBhdHRlcm4oKXsoMCxpLnVucmVhY2hhYmxlKSgiQWJzdHJhY3QgbWV0aG9kIGBnZXRQYXR0ZXJuYCBjYWxsZWQuIil9fWNsYXNzIFJhZGlhbEF4aWFsU2hhZGluZ1BhdHRlcm4gZXh0ZW5kcyBCYXNlU2hhZGluZ1BhdHRlcm57Y29uc3RydWN0b3IodCl7c3VwZXIoKTt0aGlzLl90eXBlPXRbMV07dGhpcy5fYmJveD10WzJdO3RoaXMuX2NvbG9yU3RvcHM9dFszXTt0aGlzLl9wMD10WzRdO3RoaXMuX3AxPXRbNV07dGhpcy5fcjA9dFs2XTt0aGlzLl9yMT10WzddO3RoaXMubWF0cml4PW51bGx9X2NyZWF0ZUdyYWRpZW50KHQpe2xldCBlOyJheGlhbCI9PT10aGlzLl90eXBlP2U9dC5jcmVhdGVMaW5lYXJHcmFkaWVudCh0aGlzLl9wMFswXSx0aGlzLl9wMFsxXSx0aGlzLl9wMVswXSx0aGlzLl9wMVsxXSk6InJhZGlhbCI9PT10aGlzLl90eXBlJiYoZT10LmNyZWF0ZVJhZGlhbEdyYWRpZW50KHRoaXMuX3AwWzBdLHRoaXMuX3AwWzFdLHRoaXMuX3IwLHRoaXMuX3AxWzBdLHRoaXMuX3AxWzFdLHRoaXMuX3IxKSk7Zm9yKGNvbnN0IHQgb2YgdGhpcy5fY29sb3JTdG9wcyllLmFkZENvbG9yU3RvcCh0WzBdLHRbMV0pO3JldHVybiBlfWdldFBhdHRlcm4odCxlLHMscil7bGV0IG87aWYocj09PWEuU1RST0tFfHxyPT09YS5GSUxMKXtjb25zdCBhPWUuY3VycmVudC5nZXRDbGlwcGVkUGF0aEJvdW5kaW5nQm94KHIsKDAsbi5nZXRDdXJyZW50VHJhbnNmb3JtKSh0KSl8fFswLDAsMCwwXSxsPU1hdGguY2VpbChhWzJdLWFbMF0pfHwxLGM9TWF0aC5jZWlsKGFbM10tYVsxXSl8fDEsaD1lLmNhY2hlZENhbnZhc2VzLmdldENhbnZhcygicGF0dGVybiIsbCxjLCEwKSxkPWguY29udGV4dDtkLmNsZWFyUmVjdCgwLDAsZC5jYW52YXMud2lkdGgsZC5jYW52YXMuaGVpZ2h0KTtkLmJlZ2luUGF0aCgpO2QucmVjdCgwLDAsZC5jYW52YXMud2lkdGgsZC5jYW52YXMuaGVpZ2h0KTtkLnRyYW5zbGF0ZSgtYVswXSwtYVsxXSk7cz1pLlV0aWwudHJhbnNmb3JtKHMsWzEsMCwwLDEsYVswXSxhWzFdXSk7ZC50cmFuc2Zvcm0oLi4uZS5iYXNlVHJhbnNmb3JtKTt0aGlzLm1hdHJpeCYmZC50cmFuc2Zvcm0oLi4udGhpcy5tYXRyaXgpO2FwcGx5Qm91bmRpbmdCb3goZCx0aGlzLl9iYm94KTtkLmZpbGxTdHlsZT10aGlzLl9jcmVhdGVHcmFkaWVudChkKTtkLmZpbGwoKTtvPXQuY3JlYXRlUGF0dGVybihoLmNhbnZhcywibm8tcmVwZWF0Iik7Y29uc3QgdT1uZXcgRE9NTWF0cml4KHMpO28uc2V0VHJhbnNmb3JtKHUpfWVsc2V7YXBwbHlCb3VuZGluZ0JveCh0LHRoaXMuX2Jib3gpO289dGhpcy5fY3JlYXRlR3JhZGllbnQodCl9cmV0dXJuIG99fWZ1bmN0aW9uIGRyYXdUcmlhbmdsZSh0LGUscyxpLG4sYSxyLG8pe2NvbnN0IGw9ZS5jb29yZHMsYz1lLmNvbG9ycyxoPXQuZGF0YSxkPTQqdC53aWR0aDtsZXQgdTtpZihsW3MrMV0+bFtpKzFdKXt1PXM7cz1pO2k9dTt1PWE7YT1yO3I9dX1pZihsW2krMV0+bFtuKzFdKXt1PWk7aT1uO249dTt1PXI7cj1vO289dX1pZihsW3MrMV0+bFtpKzFdKXt1PXM7cz1pO2k9dTt1PWE7YT1yO3I9dX1jb25zdCBwPShsW3NdK2Uub2Zmc2V0WCkqZS5zY2FsZVgsZj0obFtzKzFdK2Uub2Zmc2V0WSkqZS5zY2FsZVksZz0obFtpXStlLm9mZnNldFgpKmUuc2NhbGVYLG09KGxbaSsxXStlLm9mZnNldFkpKmUuc2NhbGVZLGI9KGxbbl0rZS5vZmZzZXRYKSplLnNjYWxlWCxBPShsW24rMV0rZS5vZmZzZXRZKSplLnNjYWxlWTtpZihmPj1BKXJldHVybjtjb25zdCBfPWNbYV0seT1jW2ErMV0sdj1jW2ErMl0sUz1jW3JdLHg9Y1tyKzFdLEM9Y1tyKzJdLEU9Y1tvXSx3PWNbbysxXSxQPWNbbysyXSxUPU1hdGgucm91bmQoZiksRj1NYXRoLnJvdW5kKEEpO2xldCBrLE0sUixELEksTyxMLE47Zm9yKGxldCB0PVQ7dDw9Rjt0Kyspe2lmKHQ8bSl7bGV0IGU7ZT10PGY/MDooZi10KS8oZi1tKTtrPXAtKHAtZykqZTtNPV8tKF8tUykqZTtSPXktKHkteCkqZTtEPXYtKHYtQykqZX1lbHNle2xldCBlO2U9dD5BPzE6bT09PUE/MDoobS10KS8obS1BKTtrPWctKGctYikqZTtNPVMtKFMtRSkqZTtSPXgtKHgtdykqZTtEPUMtKEMtUCkqZX1sZXQgZTtlPXQ8Zj8wOnQ+QT8xOihmLXQpLyhmLUEpO0k9cC0ocC1iKSplO089Xy0oXy1FKSplO0w9eS0oeS13KSplO049di0odi1QKSplO2NvbnN0IHM9TWF0aC5yb3VuZChNYXRoLm1pbihrLEkpKSxpPU1hdGgucm91bmQoTWF0aC5tYXgoayxJKSk7bGV0IG49ZCp0KzQqcztmb3IobGV0IHQ9czt0PD1pO3QrKyl7ZT0oay10KS8oay1JKTtlPDA/ZT0wOmU+MSYmKGU9MSk7aFtuKytdPU0tKE0tTykqZXwwO2hbbisrXT1SLShSLUwpKmV8MDtoW24rK109RC0oRC1OKSplfDA7aFtuKytdPTI1NX19fWZ1bmN0aW9uIGRyYXdGaWd1cmUodCxlLHMpe2NvbnN0IGk9ZS5jb29yZHMsbj1lLmNvbG9ycztsZXQgYSxyO3N3aXRjaChlLnR5cGUpe2Nhc2UibGF0dGljZSI6Y29uc3Qgbz1lLnZlcnRpY2VzUGVyUm93LGw9TWF0aC5mbG9vcihpLmxlbmd0aC9vKS0xLGM9by0xO2ZvcihhPTA7YTxsO2ErKyl7bGV0IGU9YSpvO2ZvcihsZXQgYT0wO2E8YzthKyssZSsrKXtkcmF3VHJpYW5nbGUodCxzLGlbZV0saVtlKzFdLGlbZStvXSxuW2VdLG5bZSsxXSxuW2Urb10pO2RyYXdUcmlhbmdsZSh0LHMsaVtlK28rMV0saVtlKzFdLGlbZStvXSxuW2UrbysxXSxuW2UrMV0sbltlK29dKX19YnJlYWs7Y2FzZSJ0cmlhbmdsZXMiOmZvcihhPTAscj1pLmxlbmd0aDthPHI7YSs9MylkcmF3VHJpYW5nbGUodCxzLGlbYV0saVthKzFdLGlbYSsyXSxuW2FdLG5bYSsxXSxuW2ErMl0pO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKCJpbGxlZ2FsIGZpZ3VyZSIpfX1jbGFzcyBNZXNoU2hhZGluZ1BhdHRlcm4gZXh0ZW5kcyBCYXNlU2hhZGluZ1BhdHRlcm57Y29uc3RydWN0b3IodCl7c3VwZXIoKTt0aGlzLl9jb29yZHM9dFsyXTt0aGlzLl9jb2xvcnM9dFszXTt0aGlzLl9maWd1cmVzPXRbNF07dGhpcy5fYm91bmRzPXRbNV07dGhpcy5fYmJveD10WzddO3RoaXMuX2JhY2tncm91bmQ9dFs4XTt0aGlzLm1hdHJpeD1udWxsfV9jcmVhdGVNZXNoQ2FudmFzKHQsZSxzKXtjb25zdCBpPU1hdGguZmxvb3IodGhpcy5fYm91bmRzWzBdKSxuPU1hdGguZmxvb3IodGhpcy5fYm91bmRzWzFdKSxhPU1hdGguY2VpbCh0aGlzLl9ib3VuZHNbMl0pLWkscj1NYXRoLmNlaWwodGhpcy5fYm91bmRzWzNdKS1uLG89TWF0aC5taW4oTWF0aC5jZWlsKE1hdGguYWJzKGEqdFswXSoxLjEpKSwzZTMpLGw9TWF0aC5taW4oTWF0aC5jZWlsKE1hdGguYWJzKHIqdFsxXSoxLjEpKSwzZTMpLGM9YS9vLGg9ci9sLGQ9e2Nvb3Jkczp0aGlzLl9jb29yZHMsY29sb3JzOnRoaXMuX2NvbG9ycyxvZmZzZXRYOi1pLG9mZnNldFk6LW4sc2NhbGVYOjEvYyxzY2FsZVk6MS9ofSx1PW8rNCxwPWwrNCxmPXMuZ2V0Q2FudmFzKCJtZXNoIix1LHAsITEpLGc9Zi5jb250ZXh0LG09Zy5jcmVhdGVJbWFnZURhdGEobyxsKTtpZihlKXtjb25zdCB0PW0uZGF0YTtmb3IobGV0IHM9MCxpPXQubGVuZ3RoO3M8aTtzKz00KXt0W3NdPWVbMF07dFtzKzFdPWVbMV07dFtzKzJdPWVbMl07dFtzKzNdPTI1NX19Zm9yKGNvbnN0IHQgb2YgdGhpcy5fZmlndXJlcylkcmF3RmlndXJlKG0sdCxkKTtnLnB1dEltYWdlRGF0YShtLDIsMik7cmV0dXJue2NhbnZhczpmLmNhbnZhcyxvZmZzZXRYOmktMipjLG9mZnNldFk6bi0yKmgsc2NhbGVYOmMsc2NhbGVZOmh9fWdldFBhdHRlcm4odCxlLHMscil7YXBwbHlCb3VuZGluZ0JveCh0LHRoaXMuX2Jib3gpO2xldCBvO2lmKHI9PT1hLlNIQURJTkcpbz1pLlV0aWwuc2luZ3VsYXJWYWx1ZURlY29tcG9zZTJkU2NhbGUoKDAsbi5nZXRDdXJyZW50VHJhbnNmb3JtKSh0KSk7ZWxzZXtvPWkuVXRpbC5zaW5ndWxhclZhbHVlRGVjb21wb3NlMmRTY2FsZShlLmJhc2VUcmFuc2Zvcm0pO2lmKHRoaXMubWF0cml4KXtjb25zdCB0PWkuVXRpbC5zaW5ndWxhclZhbHVlRGVjb21wb3NlMmRTY2FsZSh0aGlzLm1hdHJpeCk7bz1bb1swXSp0WzBdLG9bMV0qdFsxXV19fWNvbnN0IGw9dGhpcy5fY3JlYXRlTWVzaENhbnZhcyhvLHI9PT1hLlNIQURJTkc/bnVsbDp0aGlzLl9iYWNrZ3JvdW5kLGUuY2FjaGVkQ2FudmFzZXMpO2lmKHIhPT1hLlNIQURJTkcpe3Quc2V0VHJhbnNmb3JtKC4uLmUuYmFzZVRyYW5zZm9ybSk7dGhpcy5tYXRyaXgmJnQudHJhbnNmb3JtKC4uLnRoaXMubWF0cml4KX10LnRyYW5zbGF0ZShsLm9mZnNldFgsbC5vZmZzZXRZKTt0LnNjYWxlKGwuc2NhbGVYLGwuc2NhbGVZKTtyZXR1cm4gdC5jcmVhdGVQYXR0ZXJuKGwuY2FudmFzLCJuby1yZXBlYXQiKX19Y2xhc3MgRHVtbXlTaGFkaW5nUGF0dGVybiBleHRlbmRzIEJhc2VTaGFkaW5nUGF0dGVybntnZXRQYXR0ZXJuKCl7cmV0dXJuImhvdHBpbmsifX1jb25zdCByPTEsbz0yO2NsYXNzIFRpbGluZ1BhdHRlcm57c3RhdGljIE1BWF9QQVRURVJOX1NJWkU9M2UzO2NvbnN0cnVjdG9yKHQsZSxzLGksbil7dGhpcy5vcGVyYXRvckxpc3Q9dFsyXTt0aGlzLm1hdHJpeD10WzNdfHxbMSwwLDAsMSwwLDBdO3RoaXMuYmJveD10WzRdO3RoaXMueHN0ZXA9dFs1XTt0aGlzLnlzdGVwPXRbNl07dGhpcy5wYWludFR5cGU9dFs3XTt0aGlzLnRpbGluZ1R5cGU9dFs4XTt0aGlzLmNvbG9yPWU7dGhpcy5jdHg9czt0aGlzLmNhbnZhc0dyYXBoaWNzRmFjdG9yeT1pO3RoaXMuYmFzZVRyYW5zZm9ybT1ufWNyZWF0ZVBhdHRlcm5DYW52YXModCl7Y29uc3QgZT10aGlzLm9wZXJhdG9yTGlzdCxzPXRoaXMuYmJveCxhPXRoaXMueHN0ZXAscj10aGlzLnlzdGVwLG89dGhpcy5wYWludFR5cGUsbD10aGlzLnRpbGluZ1R5cGUsYz10aGlzLmNvbG9yLGg9dGhpcy5jYW52YXNHcmFwaGljc0ZhY3Rvcnk7KDAsaS5pbmZvKSgiVGlsaW5nVHlwZTogIitsKTtjb25zdCBkPXNbMF0sdT1zWzFdLHA9c1syXSxmPXNbM10sZz1pLlV0aWwuc2luZ3VsYXJWYWx1ZURlY29tcG9zZTJkU2NhbGUodGhpcy5tYXRyaXgpLG09aS5VdGlsLnNpbmd1bGFyVmFsdWVEZWNvbXBvc2UyZFNjYWxlKHRoaXMuYmFzZVRyYW5zZm9ybSksYj1bZ1swXSptWzBdLGdbMV0qbVsxXV0sQT10aGlzLmdldFNpemVBbmRTY2FsZShhLHRoaXMuY3R4LmNhbnZhcy53aWR0aCxiWzBdKSxfPXRoaXMuZ2V0U2l6ZUFuZFNjYWxlKHIsdGhpcy5jdHguY2FudmFzLmhlaWdodCxiWzFdKSx5PXQuY2FjaGVkQ2FudmFzZXMuZ2V0Q2FudmFzKCJwYXR0ZXJuIixBLnNpemUsXy5zaXplLCEwKSx2PXkuY29udGV4dCxTPWguY3JlYXRlQ2FudmFzR3JhcGhpY3Modik7Uy5ncm91cExldmVsPXQuZ3JvdXBMZXZlbDt0aGlzLnNldEZpbGxBbmRTdHJva2VTdHlsZVRvQ29udGV4dChTLG8sYyk7bGV0IHg9ZCxDPXUsRT1wLHc9ZjtpZihkPDApe3g9MDtFKz1NYXRoLmFicyhkKX1pZih1PDApe0M9MDt3Kz1NYXRoLmFicyh1KX12LnRyYW5zbGF0ZSgtQS5zY2FsZSp4LC1fLnNjYWxlKkMpO1MudHJhbnNmb3JtKEEuc2NhbGUsMCwwLF8uc2NhbGUsMCwwKTt2LnNhdmUoKTt0aGlzLmNsaXBCYm94KFMseCxDLEUsdyk7Uy5iYXNlVHJhbnNmb3JtPSgwLG4uZ2V0Q3VycmVudFRyYW5zZm9ybSkoUy5jdHgpO1MuZXhlY3V0ZU9wZXJhdG9yTGlzdChlKTtTLmVuZERyYXdpbmcoKTtyZXR1cm57Y2FudmFzOnkuY2FudmFzLHNjYWxlWDpBLnNjYWxlLHNjYWxlWTpfLnNjYWxlLG9mZnNldFg6eCxvZmZzZXRZOkN9fWdldFNpemVBbmRTY2FsZSh0LGUscyl7dD1NYXRoLmFicyh0KTtjb25zdCBpPU1hdGgubWF4KFRpbGluZ1BhdHRlcm4uTUFYX1BBVFRFUk5fU0laRSxlKTtsZXQgbj1NYXRoLmNlaWwodCpzKTtuPj1pP249aTpzPW4vdDtyZXR1cm57c2NhbGU6cyxzaXplOm59fWNsaXBCYm94KHQsZSxzLGksYSl7Y29uc3Qgcj1pLWUsbz1hLXM7dC5jdHgucmVjdChlLHMscixvKTt0LmN1cnJlbnQudXBkYXRlUmVjdE1pbk1heCgoMCxuLmdldEN1cnJlbnRUcmFuc2Zvcm0pKHQuY3R4KSxbZSxzLGksYV0pO3QuY2xpcCgpO3QuZW5kUGF0aCgpfXNldEZpbGxBbmRTdHJva2VTdHlsZVRvQ29udGV4dCh0LGUscyl7Y29uc3Qgbj10LmN0eCxhPXQuY3VycmVudDtzd2l0Y2goZSl7Y2FzZSByOmNvbnN0IHQ9dGhpcy5jdHg7bi5maWxsU3R5bGU9dC5maWxsU3R5bGU7bi5zdHJva2VTdHlsZT10LnN0cm9rZVN0eWxlO2EuZmlsbENvbG9yPXQuZmlsbFN0eWxlO2Euc3Ryb2tlQ29sb3I9dC5zdHJva2VTdHlsZTticmVhaztjYXNlIG86Y29uc3QgbD1pLlV0aWwubWFrZUhleENvbG9yKHNbMF0sc1sxXSxzWzJdKTtuLmZpbGxTdHlsZT1sO24uc3Ryb2tlU3R5bGU9bDthLmZpbGxDb2xvcj1sO2Euc3Ryb2tlQ29sb3I9bDticmVhaztkZWZhdWx0OnRocm93IG5ldyBpLkZvcm1hdEVycm9yKGBVbnN1cHBvcnRlZCBwYWludCB0eXBlOiAke2V9YCl9fWdldFBhdHRlcm4odCxlLHMsbil7bGV0IHI9cztpZihuIT09YS5TSEFESU5HKXtyPWkuVXRpbC50cmFuc2Zvcm0ocixlLmJhc2VUcmFuc2Zvcm0pO3RoaXMubWF0cml4JiYocj1pLlV0aWwudHJhbnNmb3JtKHIsdGhpcy5tYXRyaXgpKX1jb25zdCBvPXRoaXMuY3JlYXRlUGF0dGVybkNhbnZhcyhlKTtsZXQgbD1uZXcgRE9NTWF0cml4KHIpO2w9bC50cmFuc2xhdGUoby5vZmZzZXRYLG8ub2Zmc2V0WSk7bD1sLnNjYWxlKDEvby5zY2FsZVgsMS9vLnNjYWxlWSk7Y29uc3QgYz10LmNyZWF0ZVBhdHRlcm4oby5jYW52YXMsInJlcGVhdCIpO2Muc2V0VHJhbnNmb3JtKGwpO3JldHVybiBjfX1lLlRpbGluZ1BhdHRlcm49VGlsaW5nUGF0dGVybn0sKHQsZSxzKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTtlLmNvbnZlcnRCbGFja0FuZFdoaXRlVG9SR0JBPWNvbnZlcnRCbGFja0FuZFdoaXRlVG9SR0JBO2UuY29udmVydFRvUkdCQT1mdW5jdGlvbiBjb252ZXJ0VG9SR0JBKHQpe3N3aXRjaCh0LmtpbmQpe2Nhc2UgaS5JbWFnZUtpbmQuR1JBWVNDQUxFXzFCUFA6cmV0dXJuIGNvbnZlcnRCbGFja0FuZFdoaXRlVG9SR0JBKHQpO2Nhc2UgaS5JbWFnZUtpbmQuUkdCXzI0QlBQOnJldHVybiBmdW5jdGlvbiBjb252ZXJ0UkdCVG9SR0JBKHtzcmM6dCxzcmNQb3M6ZT0wLGRlc3Q6cyxkZXN0UG9zOm49MCx3aWR0aDphLGhlaWdodDpyfSl7bGV0IG89MDtjb25zdCBsPXQubGVuZ3RoPj4yLGM9bmV3IFVpbnQzMkFycmF5KHQuYnVmZmVyLGUsbCk7aWYoaS5GZWF0dXJlVGVzdC5pc0xpdHRsZUVuZGlhbil7Zm9yKDtvPGwtMjtvKz0zLG4rPTQpe2NvbnN0IHQ9Y1tvXSxlPWNbbysxXSxpPWNbbysyXTtzW25dPTQyNzgxOTAwODB8dDtzW24rMV09dD4+PjI0fGU8PDh8NDI3ODE5MDA4MDtzW24rMl09ZT4+PjE2fGk8PDE2fDQyNzgxOTAwODA7c1tuKzNdPWk+Pj44fDQyNzgxOTAwODB9Zm9yKGxldCBlPTQqbyxpPXQubGVuZ3RoO2U8aTtlKz0zKXNbbisrXT10W2VdfHRbZSsxXTw8OHx0W2UrMl08PDE2fDQyNzgxOTAwODB9ZWxzZXtmb3IoO288bC0yO28rPTMsbis9NCl7Y29uc3QgdD1jW29dLGU9Y1tvKzFdLGk9Y1tvKzJdO3Nbbl09MjU1fHQ7c1tuKzFdPXQ8PDI0fGU+Pj44fDI1NTtzW24rMl09ZTw8MTZ8aT4+PjE2fDI1NTtzW24rM109aTw8OHwyNTV9Zm9yKGxldCBlPTQqbyxpPXQubGVuZ3RoO2U8aTtlKz0zKXNbbisrXT10W2VdPDwyNHx0W2UrMV08PDE2fHRbZSsyXTw8OHwyNTV9cmV0dXJue3NyY1BvczplLGRlc3RQb3M6bn19KHQpfXJldHVybiBudWxsfTtlLmdyYXlUb1JHQkE9ZnVuY3Rpb24gZ3JheVRvUkdCQSh0LGUpe2lmKGkuRmVhdHVyZVRlc3QuaXNMaXR0bGVFbmRpYW4pZm9yKGxldCBzPTAsaT10Lmxlbmd0aDtzPGk7cysrKWVbc109NjU3OTMqdFtzXXw0Mjc4MTkwMDgwO2Vsc2UgZm9yKGxldCBzPTAsaT10Lmxlbmd0aDtzPGk7cysrKWVbc109MTY4NDMwMDgqdFtzXXwyNTV9O3ZhciBpPXMoMSk7ZnVuY3Rpb24gY29udmVydEJsYWNrQW5kV2hpdGVUb1JHQkEoe3NyYzp0LHNyY1BvczplPTAsZGVzdDpzLHdpZHRoOm4saGVpZ2h0OmEsbm9uQmxhY2tDb2xvcjpyPTQyOTQ5NjcyOTUsaW52ZXJzZURlY29kZTpvPSExfSl7Y29uc3QgbD1pLkZlYXR1cmVUZXN0LmlzTGl0dGxlRW5kaWFuPzQyNzgxOTAwODA6MjU1LFtjLGhdPW8/W3IsbF06W2wscl0sZD1uPj4zLHU9NyZuLHA9dC5sZW5ndGg7cz1uZXcgVWludDMyQXJyYXkocy5idWZmZXIpO2xldCBmPTA7Zm9yKGxldCBpPTA7aTxhO2krKyl7Zm9yKGNvbnN0IGk9ZStkO2U8aTtlKyspe2NvbnN0IGk9ZTxwP3RbZV06MjU1O3NbZisrXT0xMjgmaT9oOmM7c1tmKytdPTY0Jmk/aDpjO3NbZisrXT0zMiZpP2g6YztzW2YrK109MTYmaT9oOmM7c1tmKytdPTgmaT9oOmM7c1tmKytdPTQmaT9oOmM7c1tmKytdPTImaT9oOmM7c1tmKytdPTEmaT9oOmN9aWYoMD09PXUpY29udGludWU7Y29uc3QgaT1lPHA/dFtlKytdOjI1NTtmb3IobGV0IHQ9MDt0PHU7dCsrKXNbZisrXT1pJjE8PDctdD9oOmN9cmV0dXJue3NyY1BvczplLGRlc3RQb3M6Zn19fSwodCxlKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTtlLkdsb2JhbFdvcmtlck9wdGlvbnM9dm9pZCAwO2NvbnN0IHM9T2JqZWN0LmNyZWF0ZShudWxsKTtlLkdsb2JhbFdvcmtlck9wdGlvbnM9cztzLndvcmtlclBvcnQ9bnVsbDtzLndvcmtlclNyYz0iIn0sKHQsZSxzKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTtlLk1lc3NhZ2VIYW5kbGVyPXZvaWQgMDt2YXIgaT1zKDEpO2NvbnN0IG49MSxhPTIscj0xLG89MixsPTMsYz00LGg9NSxkPTYsdT03LHA9ODtmdW5jdGlvbiB3cmFwUmVhc29uKHQpe3QgaW5zdGFuY2VvZiBFcnJvcnx8Im9iamVjdCI9PXR5cGVvZiB0JiZudWxsIT09dHx8KDAsaS51bnJlYWNoYWJsZSkoJ3dyYXBSZWFzb246IEV4cGVjdGVkICJyZWFzb24iIHRvIGJlIGEgKHBvc3NpYmx5IGNsb25lZCkgRXJyb3IuJyk7c3dpdGNoKHQubmFtZSl7Y2FzZSJBYm9ydEV4Y2VwdGlvbiI6cmV0dXJuIG5ldyBpLkFib3J0RXhjZXB0aW9uKHQubWVzc2FnZSk7Y2FzZSJNaXNzaW5nUERGRXhjZXB0aW9uIjpyZXR1cm4gbmV3IGkuTWlzc2luZ1BERkV4Y2VwdGlvbih0Lm1lc3NhZ2UpO2Nhc2UiUGFzc3dvcmRFeGNlcHRpb24iOnJldHVybiBuZXcgaS5QYXNzd29yZEV4Y2VwdGlvbih0Lm1lc3NhZ2UsdC5jb2RlKTtjYXNlIlVuZXhwZWN0ZWRSZXNwb25zZUV4Y2VwdGlvbiI6cmV0dXJuIG5ldyBpLlVuZXhwZWN0ZWRSZXNwb25zZUV4Y2VwdGlvbih0Lm1lc3NhZ2UsdC5zdGF0dXMpO2Nhc2UiVW5rbm93bkVycm9yRXhjZXB0aW9uIjpyZXR1cm4gbmV3IGkuVW5rbm93bkVycm9yRXhjZXB0aW9uKHQubWVzc2FnZSx0LmRldGFpbHMpO2RlZmF1bHQ6cmV0dXJuIG5ldyBpLlVua25vd25FcnJvckV4Y2VwdGlvbih0Lm1lc3NhZ2UsdC50b1N0cmluZygpKX19ZS5NZXNzYWdlSGFuZGxlcj1jbGFzcyBNZXNzYWdlSGFuZGxlcntjb25zdHJ1Y3Rvcih0LGUscyl7dGhpcy5zb3VyY2VOYW1lPXQ7dGhpcy50YXJnZXROYW1lPWU7dGhpcy5jb21PYmo9czt0aGlzLmNhbGxiYWNrSWQ9MTt0aGlzLnN0cmVhbUlkPTE7dGhpcy5zdHJlYW1TaW5rcz1PYmplY3QuY3JlYXRlKG51bGwpO3RoaXMuc3RyZWFtQ29udHJvbGxlcnM9T2JqZWN0LmNyZWF0ZShudWxsKTt0aGlzLmNhbGxiYWNrQ2FwYWJpbGl0aWVzPU9iamVjdC5jcmVhdGUobnVsbCk7dGhpcy5hY3Rpb25IYW5kbGVyPU9iamVjdC5jcmVhdGUobnVsbCk7dGhpcy5fb25Db21PYmpPbk1lc3NhZ2U9dD0+e2NvbnN0IGU9dC5kYXRhO2lmKGUudGFyZ2V0TmFtZSE9PXRoaXMuc291cmNlTmFtZSlyZXR1cm47aWYoZS5zdHJlYW0pe3RoaXMuI0V0KGUpO3JldHVybn1pZihlLmNhbGxiYWNrKXtjb25zdCB0PWUuY2FsbGJhY2tJZCxzPXRoaXMuY2FsbGJhY2tDYXBhYmlsaXRpZXNbdF07aWYoIXMpdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgcmVzb2x2ZSBjYWxsYmFjayAke3R9YCk7ZGVsZXRlIHRoaXMuY2FsbGJhY2tDYXBhYmlsaXRpZXNbdF07aWYoZS5jYWxsYmFjaz09PW4pcy5yZXNvbHZlKGUuZGF0YSk7ZWxzZXtpZihlLmNhbGxiYWNrIT09YSl0aHJvdyBuZXcgRXJyb3IoIlVuZXhwZWN0ZWQgY2FsbGJhY2sgY2FzZSIpO3MucmVqZWN0KHdyYXBSZWFzb24oZS5yZWFzb24pKX1yZXR1cm59Y29uc3QgaT10aGlzLmFjdGlvbkhhbmRsZXJbZS5hY3Rpb25dO2lmKCFpKXRocm93IG5ldyBFcnJvcihgVW5rbm93biBhY3Rpb24gZnJvbSB3b3JrZXI6ICR7ZS5hY3Rpb259YCk7aWYoZS5jYWxsYmFja0lkKXtjb25zdCB0PXRoaXMuc291cmNlTmFtZSxyPWUuc291cmNlTmFtZTtuZXcgUHJvbWlzZSgoZnVuY3Rpb24odCl7dChpKGUuZGF0YSkpfSkpLnRoZW4oKGZ1bmN0aW9uKGkpe3MucG9zdE1lc3NhZ2Uoe3NvdXJjZU5hbWU6dCx0YXJnZXROYW1lOnIsY2FsbGJhY2s6bixjYWxsYmFja0lkOmUuY2FsbGJhY2tJZCxkYXRhOml9KX0pLChmdW5jdGlvbihpKXtzLnBvc3RNZXNzYWdlKHtzb3VyY2VOYW1lOnQsdGFyZ2V0TmFtZTpyLGNhbGxiYWNrOmEsY2FsbGJhY2tJZDplLmNhbGxiYWNrSWQscmVhc29uOndyYXBSZWFzb24oaSl9KX0pKX1lbHNlIGUuc3RyZWFtSWQ/dGhpcy4jd3QoZSk6aShlLmRhdGEpfTtzLmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLHRoaXMuX29uQ29tT2JqT25NZXNzYWdlKX1vbih0LGUpe2NvbnN0IHM9dGhpcy5hY3Rpb25IYW5kbGVyO2lmKHNbdF0pdGhyb3cgbmV3IEVycm9yKGBUaGVyZSBpcyBhbHJlYWR5IGFuIGFjdGlvbk5hbWUgY2FsbGVkICIke3R9ImApO3NbdF09ZX1zZW5kKHQsZSxzKXt0aGlzLmNvbU9iai5wb3N0TWVzc2FnZSh7c291cmNlTmFtZTp0aGlzLnNvdXJjZU5hbWUsdGFyZ2V0TmFtZTp0aGlzLnRhcmdldE5hbWUsYWN0aW9uOnQsZGF0YTplfSxzKX1zZW5kV2l0aFByb21pc2UodCxlLHMpe2NvbnN0IG49dGhpcy5jYWxsYmFja0lkKyssYT1uZXcgaS5Qcm9taXNlQ2FwYWJpbGl0eTt0aGlzLmNhbGxiYWNrQ2FwYWJpbGl0aWVzW25dPWE7dHJ5e3RoaXMuY29tT2JqLnBvc3RNZXNzYWdlKHtzb3VyY2VOYW1lOnRoaXMuc291cmNlTmFtZSx0YXJnZXROYW1lOnRoaXMudGFyZ2V0TmFtZSxhY3Rpb246dCxjYWxsYmFja0lkOm4sZGF0YTplfSxzKX1jYXRjaCh0KXthLnJlamVjdCh0KX1yZXR1cm4gYS5wcm9taXNlfXNlbmRXaXRoU3RyZWFtKHQsZSxzLG4pe2NvbnN0IGE9dGhpcy5zdHJlYW1JZCsrLG89dGhpcy5zb3VyY2VOYW1lLGw9dGhpcy50YXJnZXROYW1lLGM9dGhpcy5jb21PYmo7cmV0dXJuIG5ldyBSZWFkYWJsZVN0cmVhbSh7c3RhcnQ6cz0+e2NvbnN0IHI9bmV3IGkuUHJvbWlzZUNhcGFiaWxpdHk7dGhpcy5zdHJlYW1Db250cm9sbGVyc1thXT17Y29udHJvbGxlcjpzLHN0YXJ0Q2FsbDpyLHB1bGxDYWxsOm51bGwsY2FuY2VsQ2FsbDpudWxsLGlzQ2xvc2VkOiExfTtjLnBvc3RNZXNzYWdlKHtzb3VyY2VOYW1lOm8sdGFyZ2V0TmFtZTpsLGFjdGlvbjp0LHN0cmVhbUlkOmEsZGF0YTplLGRlc2lyZWRTaXplOnMuZGVzaXJlZFNpemV9LG4pO3JldHVybiByLnByb21pc2V9LHB1bGw6dD0+e2NvbnN0IGU9bmV3IGkuUHJvbWlzZUNhcGFiaWxpdHk7dGhpcy5zdHJlYW1Db250cm9sbGVyc1thXS5wdWxsQ2FsbD1lO2MucG9zdE1lc3NhZ2Uoe3NvdXJjZU5hbWU6byx0YXJnZXROYW1lOmwsc3RyZWFtOmQsc3RyZWFtSWQ6YSxkZXNpcmVkU2l6ZTp0LmRlc2lyZWRTaXplfSk7cmV0dXJuIGUucHJvbWlzZX0sY2FuY2VsOnQ9PnsoMCxpLmFzc2VydCkodCBpbnN0YW5jZW9mIEVycm9yLCJjYW5jZWwgbXVzdCBoYXZlIGEgdmFsaWQgcmVhc29uIik7Y29uc3QgZT1uZXcgaS5Qcm9taXNlQ2FwYWJpbGl0eTt0aGlzLnN0cmVhbUNvbnRyb2xsZXJzW2FdLmNhbmNlbENhbGw9ZTt0aGlzLnN0cmVhbUNvbnRyb2xsZXJzW2FdLmlzQ2xvc2VkPSEwO2MucG9zdE1lc3NhZ2Uoe3NvdXJjZU5hbWU6byx0YXJnZXROYW1lOmwsc3RyZWFtOnIsc3RyZWFtSWQ6YSxyZWFzb246d3JhcFJlYXNvbih0KX0pO3JldHVybiBlLnByb21pc2V9fSxzKX0jd3QodCl7Y29uc3QgZT10LnN0cmVhbUlkLHM9dGhpcy5zb3VyY2VOYW1lLG49dC5zb3VyY2VOYW1lLGE9dGhpcy5jb21PYmoscj10aGlzLG89dGhpcy5hY3Rpb25IYW5kbGVyW3QuYWN0aW9uXSxkPXtlbnF1ZXVlKHQscj0xLG8pe2lmKHRoaXMuaXNDYW5jZWxsZWQpcmV0dXJuO2NvbnN0IGw9dGhpcy5kZXNpcmVkU2l6ZTt0aGlzLmRlc2lyZWRTaXplLT1yO2lmKGw+MCYmdGhpcy5kZXNpcmVkU2l6ZTw9MCl7dGhpcy5zaW5rQ2FwYWJpbGl0eT1uZXcgaS5Qcm9taXNlQ2FwYWJpbGl0eTt0aGlzLnJlYWR5PXRoaXMuc2lua0NhcGFiaWxpdHkucHJvbWlzZX1hLnBvc3RNZXNzYWdlKHtzb3VyY2VOYW1lOnMsdGFyZ2V0TmFtZTpuLHN0cmVhbTpjLHN0cmVhbUlkOmUsY2h1bms6dH0sbyl9LGNsb3NlKCl7aWYoIXRoaXMuaXNDYW5jZWxsZWQpe3RoaXMuaXNDYW5jZWxsZWQ9ITA7YS5wb3N0TWVzc2FnZSh7c291cmNlTmFtZTpzLHRhcmdldE5hbWU6bixzdHJlYW06bCxzdHJlYW1JZDplfSk7ZGVsZXRlIHIuc3RyZWFtU2lua3NbZV19fSxlcnJvcih0KXsoMCxpLmFzc2VydCkodCBpbnN0YW5jZW9mIEVycm9yLCJlcnJvciBtdXN0IGhhdmUgYSB2YWxpZCByZWFzb24iKTtpZighdGhpcy5pc0NhbmNlbGxlZCl7dGhpcy5pc0NhbmNlbGxlZD0hMDthLnBvc3RNZXNzYWdlKHtzb3VyY2VOYW1lOnMsdGFyZ2V0TmFtZTpuLHN0cmVhbTpoLHN0cmVhbUlkOmUscmVhc29uOndyYXBSZWFzb24odCl9KX19LHNpbmtDYXBhYmlsaXR5Om5ldyBpLlByb21pc2VDYXBhYmlsaXR5LG9uUHVsbDpudWxsLG9uQ2FuY2VsOm51bGwsaXNDYW5jZWxsZWQ6ITEsZGVzaXJlZFNpemU6dC5kZXNpcmVkU2l6ZSxyZWFkeTpudWxsfTtkLnNpbmtDYXBhYmlsaXR5LnJlc29sdmUoKTtkLnJlYWR5PWQuc2lua0NhcGFiaWxpdHkucHJvbWlzZTt0aGlzLnN0cmVhbVNpbmtzW2VdPWQ7bmV3IFByb21pc2UoKGZ1bmN0aW9uKGUpe2Uobyh0LmRhdGEsZCkpfSkpLnRoZW4oKGZ1bmN0aW9uKCl7YS5wb3N0TWVzc2FnZSh7c291cmNlTmFtZTpzLHRhcmdldE5hbWU6bixzdHJlYW06cCxzdHJlYW1JZDplLHN1Y2Nlc3M6ITB9KX0pLChmdW5jdGlvbih0KXthLnBvc3RNZXNzYWdlKHtzb3VyY2VOYW1lOnMsdGFyZ2V0TmFtZTpuLHN0cmVhbTpwLHN0cmVhbUlkOmUscmVhc29uOndyYXBSZWFzb24odCl9KX0pKX0jRXQodCl7Y29uc3QgZT10LnN0cmVhbUlkLHM9dGhpcy5zb3VyY2VOYW1lLG49dC5zb3VyY2VOYW1lLGE9dGhpcy5jb21PYmosZj10aGlzLnN0cmVhbUNvbnRyb2xsZXJzW2VdLGc9dGhpcy5zdHJlYW1TaW5rc1tlXTtzd2l0Y2godC5zdHJlYW0pe2Nhc2UgcDp0LnN1Y2Nlc3M/Zi5zdGFydENhbGwucmVzb2x2ZSgpOmYuc3RhcnRDYWxsLnJlamVjdCh3cmFwUmVhc29uKHQucmVhc29uKSk7YnJlYWs7Y2FzZSB1OnQuc3VjY2Vzcz9mLnB1bGxDYWxsLnJlc29sdmUoKTpmLnB1bGxDYWxsLnJlamVjdCh3cmFwUmVhc29uKHQucmVhc29uKSk7YnJlYWs7Y2FzZSBkOmlmKCFnKXthLnBvc3RNZXNzYWdlKHtzb3VyY2VOYW1lOnMsdGFyZ2V0TmFtZTpuLHN0cmVhbTp1LHN0cmVhbUlkOmUsc3VjY2VzczohMH0pO2JyZWFrfWcuZGVzaXJlZFNpemU8PTAmJnQuZGVzaXJlZFNpemU+MCYmZy5zaW5rQ2FwYWJpbGl0eS5yZXNvbHZlKCk7Zy5kZXNpcmVkU2l6ZT10LmRlc2lyZWRTaXplO25ldyBQcm9taXNlKChmdW5jdGlvbih0KXt0KGcub25QdWxsPy4oKSl9KSkudGhlbigoZnVuY3Rpb24oKXthLnBvc3RNZXNzYWdlKHtzb3VyY2VOYW1lOnMsdGFyZ2V0TmFtZTpuLHN0cmVhbTp1LHN0cmVhbUlkOmUsc3VjY2VzczohMH0pfSksKGZ1bmN0aW9uKHQpe2EucG9zdE1lc3NhZ2Uoe3NvdXJjZU5hbWU6cyx0YXJnZXROYW1lOm4sc3RyZWFtOnUsc3RyZWFtSWQ6ZSxyZWFzb246d3JhcFJlYXNvbih0KX0pfSkpO2JyZWFrO2Nhc2UgYzooMCxpLmFzc2VydCkoZiwiZW5xdWV1ZSBzaG91bGQgaGF2ZSBzdHJlYW0gY29udHJvbGxlciIpO2lmKGYuaXNDbG9zZWQpYnJlYWs7Zi5jb250cm9sbGVyLmVucXVldWUodC5jaHVuayk7YnJlYWs7Y2FzZSBsOigwLGkuYXNzZXJ0KShmLCJjbG9zZSBzaG91bGQgaGF2ZSBzdHJlYW0gY29udHJvbGxlciIpO2lmKGYuaXNDbG9zZWQpYnJlYWs7Zi5pc0Nsb3NlZD0hMDtmLmNvbnRyb2xsZXIuY2xvc2UoKTt0aGlzLiNQdChmLGUpO2JyZWFrO2Nhc2UgaDooMCxpLmFzc2VydCkoZiwiZXJyb3Igc2hvdWxkIGhhdmUgc3RyZWFtIGNvbnRyb2xsZXIiKTtmLmNvbnRyb2xsZXIuZXJyb3Iod3JhcFJlYXNvbih0LnJlYXNvbikpO3RoaXMuI1B0KGYsZSk7YnJlYWs7Y2FzZSBvOnQuc3VjY2Vzcz9mLmNhbmNlbENhbGwucmVzb2x2ZSgpOmYuY2FuY2VsQ2FsbC5yZWplY3Qod3JhcFJlYXNvbih0LnJlYXNvbikpO3RoaXMuI1B0KGYsZSk7YnJlYWs7Y2FzZSByOmlmKCFnKWJyZWFrO25ldyBQcm9taXNlKChmdW5jdGlvbihlKXtlKGcub25DYW5jZWw/Lih3cmFwUmVhc29uKHQucmVhc29uKSkpfSkpLnRoZW4oKGZ1bmN0aW9uKCl7YS5wb3N0TWVzc2FnZSh7c291cmNlTmFtZTpzLHRhcmdldE5hbWU6bixzdHJlYW06byxzdHJlYW1JZDplLHN1Y2Nlc3M6ITB9KX0pLChmdW5jdGlvbih0KXthLnBvc3RNZXNzYWdlKHtzb3VyY2VOYW1lOnMsdGFyZ2V0TmFtZTpuLHN0cmVhbTpvLHN0cmVhbUlkOmUscmVhc29uOndyYXBSZWFzb24odCl9KX0pKTtnLnNpbmtDYXBhYmlsaXR5LnJlamVjdCh3cmFwUmVhc29uKHQucmVhc29uKSk7Zy5pc0NhbmNlbGxlZD0hMDtkZWxldGUgdGhpcy5zdHJlYW1TaW5rc1tlXTticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcigiVW5leHBlY3RlZCBzdHJlYW0gY2FzZSIpfX1hc3luYyNQdCh0LGUpe2F3YWl0IFByb21pc2UuYWxsU2V0dGxlZChbdC5zdGFydENhbGw/LnByb21pc2UsdC5wdWxsQ2FsbD8ucHJvbWlzZSx0LmNhbmNlbENhbGw/LnByb21pc2VdKTtkZWxldGUgdGhpcy5zdHJlYW1Db250cm9sbGVyc1tlXX1kZXN0cm95KCl7dGhpcy5jb21PYmoucmVtb3ZlRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsdGhpcy5fb25Db21PYmpPbk1lc3NhZ2UpfX19LCh0LGUscyk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7ZS5NZXRhZGF0YT12b2lkIDA7dmFyIGk9cygxKTtlLk1ldGFkYXRhPWNsYXNzIE1ldGFkYXRheyNUdDsjRnQ7Y29uc3RydWN0b3Ioe3BhcnNlZERhdGE6dCxyYXdEYXRhOmV9KXt0aGlzLiNUdD10O3RoaXMuI0Z0PWV9Z2V0UmF3KCl7cmV0dXJuIHRoaXMuI0Z0fWdldCh0KXtyZXR1cm4gdGhpcy4jVHQuZ2V0KHQpPz9udWxsfWdldEFsbCgpe3JldHVybigwLGkub2JqZWN0RnJvbU1hcCkodGhpcy4jVHQpfWhhcyh0KXtyZXR1cm4gdGhpcy4jVHQuaGFzKHQpfX19LCh0LGUscyk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7ZS5PcHRpb25hbENvbnRlbnRDb25maWc9dm9pZCAwO3ZhciBpPXMoMSksbj1zKDgpO2NvbnN0IGE9U3ltYm9sKCJJTlRFUk5BTCIpO2NsYXNzIE9wdGlvbmFsQ29udGVudEdyb3VweyNrdD0hMDtjb25zdHJ1Y3Rvcih0LGUpe3RoaXMubmFtZT10O3RoaXMuaW50ZW50PWV9Z2V0IHZpc2libGUoKXtyZXR1cm4gdGhpcy4ja3R9X3NldFZpc2libGUodCxlKXt0IT09YSYmKDAsaS51bnJlYWNoYWJsZSkoIkludGVybmFsIG1ldGhvZCBgX3NldFZpc2libGVgIGNhbGxlZC4iKTt0aGlzLiNrdD1lfX1lLk9wdGlvbmFsQ29udGVudENvbmZpZz1jbGFzcyBPcHRpb25hbENvbnRlbnRDb25maWd7I010PW51bGw7I1J0PW5ldyBNYXA7I0R0PW51bGw7I0l0PW51bGw7Y29uc3RydWN0b3IodCl7dGhpcy5uYW1lPW51bGw7dGhpcy5jcmVhdG9yPW51bGw7aWYobnVsbCE9PXQpe3RoaXMubmFtZT10Lm5hbWU7dGhpcy5jcmVhdG9yPXQuY3JlYXRvcjt0aGlzLiNJdD10Lm9yZGVyO2Zvcihjb25zdCBlIG9mIHQuZ3JvdXBzKXRoaXMuI1J0LnNldChlLmlkLG5ldyBPcHRpb25hbENvbnRlbnRHcm91cChlLm5hbWUsZS5pbnRlbnQpKTtpZigiT0ZGIj09PXQuYmFzZVN0YXRlKWZvcihjb25zdCB0IG9mIHRoaXMuI1J0LnZhbHVlcygpKXQuX3NldFZpc2libGUoYSwhMSk7Zm9yKGNvbnN0IGUgb2YgdC5vbil0aGlzLiNSdC5nZXQoZSkuX3NldFZpc2libGUoYSwhMCk7Zm9yKGNvbnN0IGUgb2YgdC5vZmYpdGhpcy4jUnQuZ2V0KGUpLl9zZXRWaXNpYmxlKGEsITEpO3RoaXMuI0R0PXRoaXMuZ2V0SGFzaCgpfX0jT3QodCl7Y29uc3QgZT10Lmxlbmd0aDtpZihlPDIpcmV0dXJuITA7Y29uc3Qgcz10WzBdO2ZvcihsZXQgbj0xO248ZTtuKyspe2NvbnN0IGU9dFtuXTtsZXQgYTtpZihBcnJheS5pc0FycmF5KGUpKWE9dGhpcy4jT3QoZSk7ZWxzZXtpZighdGhpcy4jUnQuaGFzKGUpKXsoMCxpLndhcm4pKGBPcHRpb25hbCBjb250ZW50IGdyb3VwIG5vdCBmb3VuZDogJHtlfWApO3JldHVybiEwfWE9dGhpcy4jUnQuZ2V0KGUpLnZpc2libGV9c3dpdGNoKHMpe2Nhc2UiQW5kIjppZighYSlyZXR1cm4hMTticmVhaztjYXNlIk9yIjppZihhKXJldHVybiEwO2JyZWFrO2Nhc2UiTm90IjpyZXR1cm4hYTtkZWZhdWx0OnJldHVybiEwfX1yZXR1cm4iQW5kIj09PXN9aXNWaXNpYmxlKHQpe2lmKDA9PT10aGlzLiNSdC5zaXplKXJldHVybiEwO2lmKCF0KXsoMCxpLndhcm4pKCJPcHRpb25hbCBjb250ZW50IGdyb3VwIG5vdCBkZWZpbmVkLiIpO3JldHVybiEwfWlmKCJPQ0ciPT09dC50eXBlKXtpZighdGhpcy4jUnQuaGFzKHQuaWQpKXsoMCxpLndhcm4pKGBPcHRpb25hbCBjb250ZW50IGdyb3VwIG5vdCBmb3VuZDogJHt0LmlkfWApO3JldHVybiEwfXJldHVybiB0aGlzLiNSdC5nZXQodC5pZCkudmlzaWJsZX1pZigiT0NNRCI9PT10LnR5cGUpe2lmKHQuZXhwcmVzc2lvbilyZXR1cm4gdGhpcy4jT3QodC5leHByZXNzaW9uKTtpZighdC5wb2xpY3l8fCJBbnlPbiI9PT10LnBvbGljeSl7Zm9yKGNvbnN0IGUgb2YgdC5pZHMpe2lmKCF0aGlzLiNSdC5oYXMoZSkpeygwLGkud2FybikoYE9wdGlvbmFsIGNvbnRlbnQgZ3JvdXAgbm90IGZvdW5kOiAke2V9YCk7cmV0dXJuITB9aWYodGhpcy4jUnQuZ2V0KGUpLnZpc2libGUpcmV0dXJuITB9cmV0dXJuITF9aWYoIkFsbE9uIj09PXQucG9saWN5KXtmb3IoY29uc3QgZSBvZiB0Lmlkcyl7aWYoIXRoaXMuI1J0LmhhcyhlKSl7KDAsaS53YXJuKShgT3B0aW9uYWwgY29udGVudCBncm91cCBub3QgZm91bmQ6ICR7ZX1gKTtyZXR1cm4hMH1pZighdGhpcy4jUnQuZ2V0KGUpLnZpc2libGUpcmV0dXJuITF9cmV0dXJuITB9aWYoIkFueU9mZiI9PT10LnBvbGljeSl7Zm9yKGNvbnN0IGUgb2YgdC5pZHMpe2lmKCF0aGlzLiNSdC5oYXMoZSkpeygwLGkud2FybikoYE9wdGlvbmFsIGNvbnRlbnQgZ3JvdXAgbm90IGZvdW5kOiAke2V9YCk7cmV0dXJuITB9aWYoIXRoaXMuI1J0LmdldChlKS52aXNpYmxlKXJldHVybiEwfXJldHVybiExfWlmKCJBbGxPZmYiPT09dC5wb2xpY3kpe2Zvcihjb25zdCBlIG9mIHQuaWRzKXtpZighdGhpcy4jUnQuaGFzKGUpKXsoMCxpLndhcm4pKGBPcHRpb25hbCBjb250ZW50IGdyb3VwIG5vdCBmb3VuZDogJHtlfWApO3JldHVybiEwfWlmKHRoaXMuI1J0LmdldChlKS52aXNpYmxlKXJldHVybiExfXJldHVybiEwfSgwLGkud2FybikoYFVua25vd24gb3B0aW9uYWwgY29udGVudCBwb2xpY3kgJHt0LnBvbGljeX0uYCk7cmV0dXJuITB9KDAsaS53YXJuKShgVW5rbm93biBncm91cCB0eXBlICR7dC50eXBlfS5gKTtyZXR1cm4hMH1zZXRWaXNpYmlsaXR5KHQsZT0hMCl7aWYodGhpcy4jUnQuaGFzKHQpKXt0aGlzLiNSdC5nZXQodCkuX3NldFZpc2libGUoYSwhIWUpO3RoaXMuI010PW51bGx9ZWxzZSgwLGkud2FybikoYE9wdGlvbmFsIGNvbnRlbnQgZ3JvdXAgbm90IGZvdW5kOiAke3R9YCl9Z2V0IGhhc0luaXRpYWxWaXNpYmlsaXR5KCl7cmV0dXJuIHRoaXMuZ2V0SGFzaCgpPT09dGhpcy4jRHR9Z2V0T3JkZXIoKXtyZXR1cm4gdGhpcy4jUnQuc2l6ZT90aGlzLiNJdD90aGlzLiNJdC5zbGljZSgpOlsuLi50aGlzLiNSdC5rZXlzKCldOm51bGx9Z2V0R3JvdXBzKCl7cmV0dXJuIHRoaXMuI1J0LnNpemU+MD8oMCxpLm9iamVjdEZyb21NYXApKHRoaXMuI1J0KTpudWxsfWdldEdyb3VwKHQpe3JldHVybiB0aGlzLiNSdC5nZXQodCl8fG51bGx9Z2V0SGFzaCgpe2lmKG51bGwhPT10aGlzLiNNdClyZXR1cm4gdGhpcy4jTXQ7Y29uc3QgdD1uZXcgbi5NdXJtdXJIYXNoM182NDtmb3IoY29uc3RbZSxzXW9mIHRoaXMuI1J0KXQudXBkYXRlKGAke2V9OiR7cy52aXNpYmxlfWApO3JldHVybiB0aGlzLiNNdD10LmhleGRpZ2VzdCgpfX19LCh0LGUscyk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7ZS5QREZEYXRhVHJhbnNwb3J0U3RyZWFtPXZvaWQgMDt2YXIgaT1zKDEpLG49cyg2KTtlLlBERkRhdGFUcmFuc3BvcnRTdHJlYW09Y2xhc3MgUERGRGF0YVRyYW5zcG9ydFN0cmVhbXtjb25zdHJ1Y3Rvcih7bGVuZ3RoOnQsaW5pdGlhbERhdGE6ZSxwcm9ncmVzc2l2ZURvbmU6cz0hMSxjb250ZW50RGlzcG9zaXRpb25GaWxlbmFtZTpuPW51bGwsZGlzYWJsZVJhbmdlOmE9ITEsZGlzYWJsZVN0cmVhbTpyPSExfSxvKXsoMCxpLmFzc2VydCkobywnUERGRGF0YVRyYW5zcG9ydFN0cmVhbSAtIG1pc3NpbmcgcmVxdWlyZWQgInBkZkRhdGFSYW5nZVRyYW5zcG9ydCIgYXJndW1lbnQuJyk7dGhpcy5fcXVldWVkQ2h1bmtzPVtdO3RoaXMuX3Byb2dyZXNzaXZlRG9uZT1zO3RoaXMuX2NvbnRlbnREaXNwb3NpdGlvbkZpbGVuYW1lPW47aWYoZT8ubGVuZ3RoPjApe2NvbnN0IHQ9ZSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkmJmUuYnl0ZUxlbmd0aD09PWUuYnVmZmVyLmJ5dGVMZW5ndGg/ZS5idWZmZXI6bmV3IFVpbnQ4QXJyYXkoZSkuYnVmZmVyO3RoaXMuX3F1ZXVlZENodW5rcy5wdXNoKHQpfXRoaXMuX3BkZkRhdGFSYW5nZVRyYW5zcG9ydD1vO3RoaXMuX2lzU3RyZWFtaW5nU3VwcG9ydGVkPSFyO3RoaXMuX2lzUmFuZ2VTdXBwb3J0ZWQ9IWE7dGhpcy5fY29udGVudExlbmd0aD10O3RoaXMuX2Z1bGxSZXF1ZXN0UmVhZGVyPW51bGw7dGhpcy5fcmFuZ2VSZWFkZXJzPVtdO3RoaXMuX3BkZkRhdGFSYW5nZVRyYW5zcG9ydC5hZGRSYW5nZUxpc3RlbmVyKCgodCxlKT0+e3RoaXMuX29uUmVjZWl2ZURhdGEoe2JlZ2luOnQsY2h1bms6ZX0pfSkpO3RoaXMuX3BkZkRhdGFSYW5nZVRyYW5zcG9ydC5hZGRQcm9ncmVzc0xpc3RlbmVyKCgodCxlKT0+e3RoaXMuX29uUHJvZ3Jlc3Moe2xvYWRlZDp0LHRvdGFsOmV9KX0pKTt0aGlzLl9wZGZEYXRhUmFuZ2VUcmFuc3BvcnQuYWRkUHJvZ3Jlc3NpdmVSZWFkTGlzdGVuZXIoKHQ9Pnt0aGlzLl9vblJlY2VpdmVEYXRhKHtjaHVuazp0fSl9KSk7dGhpcy5fcGRmRGF0YVJhbmdlVHJhbnNwb3J0LmFkZFByb2dyZXNzaXZlRG9uZUxpc3RlbmVyKCgoKT0+e3RoaXMuX29uUHJvZ3Jlc3NpdmVEb25lKCl9KSk7dGhpcy5fcGRmRGF0YVJhbmdlVHJhbnNwb3J0LnRyYW5zcG9ydFJlYWR5KCl9X29uUmVjZWl2ZURhdGEoe2JlZ2luOnQsY2h1bms6ZX0pe2NvbnN0IHM9ZSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkmJmUuYnl0ZUxlbmd0aD09PWUuYnVmZmVyLmJ5dGVMZW5ndGg/ZS5idWZmZXI6bmV3IFVpbnQ4QXJyYXkoZSkuYnVmZmVyO2lmKHZvaWQgMD09PXQpdGhpcy5fZnVsbFJlcXVlc3RSZWFkZXI/dGhpcy5fZnVsbFJlcXVlc3RSZWFkZXIuX2VucXVldWUocyk6dGhpcy5fcXVldWVkQ2h1bmtzLnB1c2gocyk7ZWxzZXtjb25zdCBlPXRoaXMuX3JhbmdlUmVhZGVycy5zb21lKChmdW5jdGlvbihlKXtpZihlLl9iZWdpbiE9PXQpcmV0dXJuITE7ZS5fZW5xdWV1ZShzKTtyZXR1cm4hMH0pKTsoMCxpLmFzc2VydCkoZSwiX29uUmVjZWl2ZURhdGEgLSBubyBgUERGRGF0YVRyYW5zcG9ydFN0cmVhbVJhbmdlUmVhZGVyYCBpbnN0YW5jZSBmb3VuZC4iKX19Z2V0IF9wcm9ncmVzc2l2ZURhdGFMZW5ndGgoKXtyZXR1cm4gdGhpcy5fZnVsbFJlcXVlc3RSZWFkZXI/Ll9sb2FkZWQ/PzB9X29uUHJvZ3Jlc3ModCl7dm9pZCAwPT09dC50b3RhbD90aGlzLl9yYW5nZVJlYWRlcnNbMF0/Lm9uUHJvZ3Jlc3M/Lih7bG9hZGVkOnQubG9hZGVkfSk6dGhpcy5fZnVsbFJlcXVlc3RSZWFkZXI/Lm9uUHJvZ3Jlc3M/Lih7bG9hZGVkOnQubG9hZGVkLHRvdGFsOnQudG90YWx9KX1fb25Qcm9ncmVzc2l2ZURvbmUoKXt0aGlzLl9mdWxsUmVxdWVzdFJlYWRlcj8ucHJvZ3Jlc3NpdmVEb25lKCk7dGhpcy5fcHJvZ3Jlc3NpdmVEb25lPSEwfV9yZW1vdmVSYW5nZVJlYWRlcih0KXtjb25zdCBlPXRoaXMuX3JhbmdlUmVhZGVycy5pbmRleE9mKHQpO2U+PTAmJnRoaXMuX3JhbmdlUmVhZGVycy5zcGxpY2UoZSwxKX1nZXRGdWxsUmVhZGVyKCl7KDAsaS5hc3NlcnQpKCF0aGlzLl9mdWxsUmVxdWVzdFJlYWRlciwiUERGRGF0YVRyYW5zcG9ydFN0cmVhbS5nZXRGdWxsUmVhZGVyIGNhbiBvbmx5IGJlIGNhbGxlZCBvbmNlLiIpO2NvbnN0IHQ9dGhpcy5fcXVldWVkQ2h1bmtzO3RoaXMuX3F1ZXVlZENodW5rcz1udWxsO3JldHVybiBuZXcgUERGRGF0YVRyYW5zcG9ydFN0cmVhbVJlYWRlcih0aGlzLHQsdGhpcy5fcHJvZ3Jlc3NpdmVEb25lLHRoaXMuX2NvbnRlbnREaXNwb3NpdGlvbkZpbGVuYW1lKX1nZXRSYW5nZVJlYWRlcih0LGUpe2lmKGU8PXRoaXMuX3Byb2dyZXNzaXZlRGF0YUxlbmd0aClyZXR1cm4gbnVsbDtjb25zdCBzPW5ldyBQREZEYXRhVHJhbnNwb3J0U3RyZWFtUmFuZ2VSZWFkZXIodGhpcyx0LGUpO3RoaXMuX3BkZkRhdGFSYW5nZVRyYW5zcG9ydC5yZXF1ZXN0RGF0YVJhbmdlKHQsZSk7dGhpcy5fcmFuZ2VSZWFkZXJzLnB1c2gocyk7cmV0dXJuIHN9Y2FuY2VsQWxsUmVxdWVzdHModCl7dGhpcy5fZnVsbFJlcXVlc3RSZWFkZXI/LmNhbmNlbCh0KTtmb3IoY29uc3QgZSBvZiB0aGlzLl9yYW5nZVJlYWRlcnMuc2xpY2UoMCkpZS5jYW5jZWwodCk7dGhpcy5fcGRmRGF0YVJhbmdlVHJhbnNwb3J0LmFib3J0KCl9fTtjbGFzcyBQREZEYXRhVHJhbnNwb3J0U3RyZWFtUmVhZGVye2NvbnN0cnVjdG9yKHQsZSxzPSExLGk9bnVsbCl7dGhpcy5fc3RyZWFtPXQ7dGhpcy5fZG9uZT1zfHwhMTt0aGlzLl9maWxlbmFtZT0oMCxuLmlzUGRmRmlsZSkoaSk/aTpudWxsO3RoaXMuX3F1ZXVlZENodW5rcz1lfHxbXTt0aGlzLl9sb2FkZWQ9MDtmb3IoY29uc3QgdCBvZiB0aGlzLl9xdWV1ZWRDaHVua3MpdGhpcy5fbG9hZGVkKz10LmJ5dGVMZW5ndGg7dGhpcy5fcmVxdWVzdHM9W107dGhpcy5faGVhZGVyc1JlYWR5PVByb21pc2UucmVzb2x2ZSgpO3QuX2Z1bGxSZXF1ZXN0UmVhZGVyPXRoaXM7dGhpcy5vblByb2dyZXNzPW51bGx9X2VucXVldWUodCl7aWYoIXRoaXMuX2RvbmUpe2lmKHRoaXMuX3JlcXVlc3RzLmxlbmd0aD4wKXt0aGlzLl9yZXF1ZXN0cy5zaGlmdCgpLnJlc29sdmUoe3ZhbHVlOnQsZG9uZTohMX0pfWVsc2UgdGhpcy5fcXVldWVkQ2h1bmtzLnB1c2godCk7dGhpcy5fbG9hZGVkKz10LmJ5dGVMZW5ndGh9fWdldCBoZWFkZXJzUmVhZHkoKXtyZXR1cm4gdGhpcy5faGVhZGVyc1JlYWR5fWdldCBmaWxlbmFtZSgpe3JldHVybiB0aGlzLl9maWxlbmFtZX1nZXQgaXNSYW5nZVN1cHBvcnRlZCgpe3JldHVybiB0aGlzLl9zdHJlYW0uX2lzUmFuZ2VTdXBwb3J0ZWR9Z2V0IGlzU3RyZWFtaW5nU3VwcG9ydGVkKCl7cmV0dXJuIHRoaXMuX3N0cmVhbS5faXNTdHJlYW1pbmdTdXBwb3J0ZWR9Z2V0IGNvbnRlbnRMZW5ndGgoKXtyZXR1cm4gdGhpcy5fc3RyZWFtLl9jb250ZW50TGVuZ3RofWFzeW5jIHJlYWQoKXtpZih0aGlzLl9xdWV1ZWRDaHVua3MubGVuZ3RoPjApe3JldHVybnt2YWx1ZTp0aGlzLl9xdWV1ZWRDaHVua3Muc2hpZnQoKSxkb25lOiExfX1pZih0aGlzLl9kb25lKXJldHVybnt2YWx1ZTp2b2lkIDAsZG9uZTohMH07Y29uc3QgdD1uZXcgaS5Qcm9taXNlQ2FwYWJpbGl0eTt0aGlzLl9yZXF1ZXN0cy5wdXNoKHQpO3JldHVybiB0LnByb21pc2V9Y2FuY2VsKHQpe3RoaXMuX2RvbmU9ITA7Zm9yKGNvbnN0IHQgb2YgdGhpcy5fcmVxdWVzdHMpdC5yZXNvbHZlKHt2YWx1ZTp2b2lkIDAsZG9uZTohMH0pO3RoaXMuX3JlcXVlc3RzLmxlbmd0aD0wfXByb2dyZXNzaXZlRG9uZSgpe3RoaXMuX2RvbmV8fCh0aGlzLl9kb25lPSEwKX19Y2xhc3MgUERGRGF0YVRyYW5zcG9ydFN0cmVhbVJhbmdlUmVhZGVye2NvbnN0cnVjdG9yKHQsZSxzKXt0aGlzLl9zdHJlYW09dDt0aGlzLl9iZWdpbj1lO3RoaXMuX2VuZD1zO3RoaXMuX3F1ZXVlZENodW5rPW51bGw7dGhpcy5fcmVxdWVzdHM9W107dGhpcy5fZG9uZT0hMTt0aGlzLm9uUHJvZ3Jlc3M9bnVsbH1fZW5xdWV1ZSh0KXtpZighdGhpcy5fZG9uZSl7aWYoMD09PXRoaXMuX3JlcXVlc3RzLmxlbmd0aCl0aGlzLl9xdWV1ZWRDaHVuaz10O2Vsc2V7dGhpcy5fcmVxdWVzdHMuc2hpZnQoKS5yZXNvbHZlKHt2YWx1ZTp0LGRvbmU6ITF9KTtmb3IoY29uc3QgdCBvZiB0aGlzLl9yZXF1ZXN0cyl0LnJlc29sdmUoe3ZhbHVlOnZvaWQgMCxkb25lOiEwfSk7dGhpcy5fcmVxdWVzdHMubGVuZ3RoPTB9dGhpcy5fZG9uZT0hMDt0aGlzLl9zdHJlYW0uX3JlbW92ZVJhbmdlUmVhZGVyKHRoaXMpfX1nZXQgaXNTdHJlYW1pbmdTdXBwb3J0ZWQoKXtyZXR1cm4hMX1hc3luYyByZWFkKCl7aWYodGhpcy5fcXVldWVkQ2h1bmspe2NvbnN0IHQ9dGhpcy5fcXVldWVkQ2h1bms7dGhpcy5fcXVldWVkQ2h1bms9bnVsbDtyZXR1cm57dmFsdWU6dCxkb25lOiExfX1pZih0aGlzLl9kb25lKXJldHVybnt2YWx1ZTp2b2lkIDAsZG9uZTohMH07Y29uc3QgdD1uZXcgaS5Qcm9taXNlQ2FwYWJpbGl0eTt0aGlzLl9yZXF1ZXN0cy5wdXNoKHQpO3JldHVybiB0LnByb21pc2V9Y2FuY2VsKHQpe3RoaXMuX2RvbmU9ITA7Zm9yKGNvbnN0IHQgb2YgdGhpcy5fcmVxdWVzdHMpdC5yZXNvbHZlKHt2YWx1ZTp2b2lkIDAsZG9uZTohMH0pO3RoaXMuX3JlcXVlc3RzLmxlbmd0aD0wO3RoaXMuX3N0cmVhbS5fcmVtb3ZlUmFuZ2VSZWFkZXIodGhpcyl9fX0sKHQsZSk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7ZS5YZmFUZXh0PXZvaWQgMDtjbGFzcyBYZmFUZXh0e3N0YXRpYyB0ZXh0Q29udGVudCh0KXtjb25zdCBlPVtdLHM9e2l0ZW1zOmUsc3R5bGVzOk9iamVjdC5jcmVhdGUobnVsbCl9OyFmdW5jdGlvbiB3YWxrKHQpe2lmKCF0KXJldHVybjtsZXQgcz1udWxsO2NvbnN0IGk9dC5uYW1lO2lmKCIjdGV4dCI9PT1pKXM9dC52YWx1ZTtlbHNle2lmKCFYZmFUZXh0LnNob3VsZEJ1aWxkVGV4dChpKSlyZXR1cm47dD8uYXR0cmlidXRlcz8udGV4dENvbnRlbnQ/cz10LmF0dHJpYnV0ZXMudGV4dENvbnRlbnQ6dC52YWx1ZSYmKHM9dC52YWx1ZSl9bnVsbCE9PXMmJmUucHVzaCh7c3RyOnN9KTtpZih0LmNoaWxkcmVuKWZvcihjb25zdCBlIG9mIHQuY2hpbGRyZW4pd2FsayhlKX0odCk7cmV0dXJuIHN9c3RhdGljIHNob3VsZEJ1aWxkVGV4dCh0KXtyZXR1cm4hKCJ0ZXh0YXJlYSI9PT10fHwiaW5wdXQiPT09dHx8Im9wdGlvbiI9PT10fHwic2VsZWN0Ij09PXQpfX1lLlhmYVRleHQ9WGZhVGV4dH0sKHQsZSxzKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTtlLk5vZGVTdGFuZGFyZEZvbnREYXRhRmFjdG9yeT1lLk5vZGVGaWx0ZXJGYWN0b3J5PWUuTm9kZUNhbnZhc0ZhY3Rvcnk9ZS5Ob2RlQ01hcFJlYWRlckZhY3Rvcnk9dm9pZCAwO3ZhciBpPXMoNyk7Y29uc3QgZmV0Y2hEYXRhPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgUHJvbWlzZSgoKGUscyk9PntyZXF1aXJlKCJmcyIpLnJlYWRGaWxlKHQsKCh0LGkpPT57IXQmJmk/ZShuZXcgVWludDhBcnJheShpKSk6cyhuZXcgRXJyb3IodCkpfSkpfSkpfTtjbGFzcyBOb2RlRmlsdGVyRmFjdG9yeSBleHRlbmRzIGkuQmFzZUZpbHRlckZhY3Rvcnl7fWUuTm9kZUZpbHRlckZhY3Rvcnk9Tm9kZUZpbHRlckZhY3Rvcnk7Y2xhc3MgTm9kZUNhbnZhc0ZhY3RvcnkgZXh0ZW5kcyBpLkJhc2VDYW52YXNGYWN0b3J5e19jcmVhdGVDYW52YXModCxlKXtyZXR1cm4gcmVxdWlyZSgiY2FudmFzIikuY3JlYXRlQ2FudmFzKHQsZSl9fWUuTm9kZUNhbnZhc0ZhY3Rvcnk9Tm9kZUNhbnZhc0ZhY3Rvcnk7Y2xhc3MgTm9kZUNNYXBSZWFkZXJGYWN0b3J5IGV4dGVuZHMgaS5CYXNlQ01hcFJlYWRlckZhY3Rvcnl7X2ZldGNoRGF0YSh0LGUpe3JldHVybiBmZXRjaERhdGEodCkudGhlbigodD0+KHtjTWFwRGF0YTp0LGNvbXByZXNzaW9uVHlwZTplfSkpKX19ZS5Ob2RlQ01hcFJlYWRlckZhY3Rvcnk9Tm9kZUNNYXBSZWFkZXJGYWN0b3J5O2NsYXNzIE5vZGVTdGFuZGFyZEZvbnREYXRhRmFjdG9yeSBleHRlbmRzIGkuQmFzZVN0YW5kYXJkRm9udERhdGFGYWN0b3J5e19mZXRjaERhdGEodCl7cmV0dXJuIGZldGNoRGF0YSh0KX19ZS5Ob2RlU3RhbmRhcmRGb250RGF0YUZhY3Rvcnk9Tm9kZVN0YW5kYXJkRm9udERhdGFGYWN0b3J5fSwodCxlLHMpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO2UuUERGTm9kZVN0cmVhbT12b2lkIDA7dmFyIGk9cygxKSxuPXMoMjIpO2NvbnN0IGE9cmVxdWlyZSgiZnMiKSxyPXJlcXVpcmUoImh0dHAiKSxvPXJlcXVpcmUoImh0dHBzIiksbD1yZXF1aXJlKCJ1cmwiKSxjPS9eZmlsZTpcL1wvXC9bYS16QS1aXTpcLy87ZS5QREZOb2RlU3RyZWFtPWNsYXNzIFBERk5vZGVTdHJlYW17Y29uc3RydWN0b3IodCl7dGhpcy5zb3VyY2U9dDt0aGlzLnVybD1mdW5jdGlvbiBwYXJzZVVybCh0KXtjb25zdCBlPWwucGFyc2UodCk7aWYoImZpbGU6Ij09PWUucHJvdG9jb2x8fGUuaG9zdClyZXR1cm4gZTtpZigvXlthLXpdOlsvXFxdL2kudGVzdCh0KSlyZXR1cm4gbC5wYXJzZShgZmlsZTovLy8ke3R9YCk7ZS5ob3N0fHwoZS5wcm90b2NvbD0iZmlsZToiKTtyZXR1cm4gZX0odC51cmwpO3RoaXMuaXNIdHRwPSJodHRwOiI9PT10aGlzLnVybC5wcm90b2NvbHx8Imh0dHBzOiI9PT10aGlzLnVybC5wcm90b2NvbDt0aGlzLmlzRnNVcmw9ImZpbGU6Ij09PXRoaXMudXJsLnByb3RvY29sO3RoaXMuaHR0cEhlYWRlcnM9dGhpcy5pc0h0dHAmJnQuaHR0cEhlYWRlcnN8fHt9O3RoaXMuX2Z1bGxSZXF1ZXN0UmVhZGVyPW51bGw7dGhpcy5fcmFuZ2VSZXF1ZXN0UmVhZGVycz1bXX1nZXQgX3Byb2dyZXNzaXZlRGF0YUxlbmd0aCgpe3JldHVybiB0aGlzLl9mdWxsUmVxdWVzdFJlYWRlcj8uX2xvYWRlZD8/MH1nZXRGdWxsUmVhZGVyKCl7KDAsaS5hc3NlcnQpKCF0aGlzLl9mdWxsUmVxdWVzdFJlYWRlciwiUERGTm9kZVN0cmVhbS5nZXRGdWxsUmVhZGVyIGNhbiBvbmx5IGJlIGNhbGxlZCBvbmNlLiIpO3RoaXMuX2Z1bGxSZXF1ZXN0UmVhZGVyPXRoaXMuaXNGc1VybD9uZXcgUERGTm9kZVN0cmVhbUZzRnVsbFJlYWRlcih0aGlzKTpuZXcgUERGTm9kZVN0cmVhbUZ1bGxSZWFkZXIodGhpcyk7cmV0dXJuIHRoaXMuX2Z1bGxSZXF1ZXN0UmVhZGVyfWdldFJhbmdlUmVhZGVyKHQsZSl7aWYoZTw9dGhpcy5fcHJvZ3Jlc3NpdmVEYXRhTGVuZ3RoKXJldHVybiBudWxsO2NvbnN0IHM9dGhpcy5pc0ZzVXJsP25ldyBQREZOb2RlU3RyZWFtRnNSYW5nZVJlYWRlcih0aGlzLHQsZSk6bmV3IFBERk5vZGVTdHJlYW1SYW5nZVJlYWRlcih0aGlzLHQsZSk7dGhpcy5fcmFuZ2VSZXF1ZXN0UmVhZGVycy5wdXNoKHMpO3JldHVybiBzfWNhbmNlbEFsbFJlcXVlc3RzKHQpe3RoaXMuX2Z1bGxSZXF1ZXN0UmVhZGVyPy5jYW5jZWwodCk7Zm9yKGNvbnN0IGUgb2YgdGhpcy5fcmFuZ2VSZXF1ZXN0UmVhZGVycy5zbGljZSgwKSllLmNhbmNlbCh0KX19O2NsYXNzIEJhc2VGdWxsUmVhZGVye2NvbnN0cnVjdG9yKHQpe3RoaXMuX3VybD10LnVybDt0aGlzLl9kb25lPSExO3RoaXMuX3N0b3JlZEVycm9yPW51bGw7dGhpcy5vblByb2dyZXNzPW51bGw7Y29uc3QgZT10LnNvdXJjZTt0aGlzLl9jb250ZW50TGVuZ3RoPWUubGVuZ3RoO3RoaXMuX2xvYWRlZD0wO3RoaXMuX2ZpbGVuYW1lPW51bGw7dGhpcy5fZGlzYWJsZVJhbmdlPWUuZGlzYWJsZVJhbmdlfHwhMTt0aGlzLl9yYW5nZUNodW5rU2l6ZT1lLnJhbmdlQ2h1bmtTaXplO3RoaXMuX3JhbmdlQ2h1bmtTaXplfHx0aGlzLl9kaXNhYmxlUmFuZ2V8fCh0aGlzLl9kaXNhYmxlUmFuZ2U9ITApO3RoaXMuX2lzU3RyZWFtaW5nU3VwcG9ydGVkPSFlLmRpc2FibGVTdHJlYW07dGhpcy5faXNSYW5nZVN1cHBvcnRlZD0hZS5kaXNhYmxlUmFuZ2U7dGhpcy5fcmVhZGFibGVTdHJlYW09bnVsbDt0aGlzLl9yZWFkQ2FwYWJpbGl0eT1uZXcgaS5Qcm9taXNlQ2FwYWJpbGl0eTt0aGlzLl9oZWFkZXJzQ2FwYWJpbGl0eT1uZXcgaS5Qcm9taXNlQ2FwYWJpbGl0eX1nZXQgaGVhZGVyc1JlYWR5KCl7cmV0dXJuIHRoaXMuX2hlYWRlcnNDYXBhYmlsaXR5LnByb21pc2V9Z2V0IGZpbGVuYW1lKCl7cmV0dXJuIHRoaXMuX2ZpbGVuYW1lfWdldCBjb250ZW50TGVuZ3RoKCl7cmV0dXJuIHRoaXMuX2NvbnRlbnRMZW5ndGh9Z2V0IGlzUmFuZ2VTdXBwb3J0ZWQoKXtyZXR1cm4gdGhpcy5faXNSYW5nZVN1cHBvcnRlZH1nZXQgaXNTdHJlYW1pbmdTdXBwb3J0ZWQoKXtyZXR1cm4gdGhpcy5faXNTdHJlYW1pbmdTdXBwb3J0ZWR9YXN5bmMgcmVhZCgpe2F3YWl0IHRoaXMuX3JlYWRDYXBhYmlsaXR5LnByb21pc2U7aWYodGhpcy5fZG9uZSlyZXR1cm57dmFsdWU6dm9pZCAwLGRvbmU6ITB9O2lmKHRoaXMuX3N0b3JlZEVycm9yKXRocm93IHRoaXMuX3N0b3JlZEVycm9yO2NvbnN0IHQ9dGhpcy5fcmVhZGFibGVTdHJlYW0ucmVhZCgpO2lmKG51bGw9PT10KXt0aGlzLl9yZWFkQ2FwYWJpbGl0eT1uZXcgaS5Qcm9taXNlQ2FwYWJpbGl0eTtyZXR1cm4gdGhpcy5yZWFkKCl9dGhpcy5fbG9hZGVkKz10Lmxlbmd0aDt0aGlzLm9uUHJvZ3Jlc3M/Lih7bG9hZGVkOnRoaXMuX2xvYWRlZCx0b3RhbDp0aGlzLl9jb250ZW50TGVuZ3RofSk7cmV0dXJue3ZhbHVlOm5ldyBVaW50OEFycmF5KHQpLmJ1ZmZlcixkb25lOiExfX1jYW5jZWwodCl7dGhpcy5fcmVhZGFibGVTdHJlYW0/dGhpcy5fcmVhZGFibGVTdHJlYW0uZGVzdHJveSh0KTp0aGlzLl9lcnJvcih0KX1fZXJyb3IodCl7dGhpcy5fc3RvcmVkRXJyb3I9dDt0aGlzLl9yZWFkQ2FwYWJpbGl0eS5yZXNvbHZlKCl9X3NldFJlYWRhYmxlU3RyZWFtKHQpe3RoaXMuX3JlYWRhYmxlU3RyZWFtPXQ7dC5vbigicmVhZGFibGUiLCgoKT0+e3RoaXMuX3JlYWRDYXBhYmlsaXR5LnJlc29sdmUoKX0pKTt0Lm9uKCJlbmQiLCgoKT0+e3QuZGVzdHJveSgpO3RoaXMuX2RvbmU9ITA7dGhpcy5fcmVhZENhcGFiaWxpdHkucmVzb2x2ZSgpfSkpO3Qub24oImVycm9yIiwodD0+e3RoaXMuX2Vycm9yKHQpfSkpOyF0aGlzLl9pc1N0cmVhbWluZ1N1cHBvcnRlZCYmdGhpcy5faXNSYW5nZVN1cHBvcnRlZCYmdGhpcy5fZXJyb3IobmV3IGkuQWJvcnRFeGNlcHRpb24oInN0cmVhbWluZyBpcyBkaXNhYmxlZCIpKTt0aGlzLl9zdG9yZWRFcnJvciYmdGhpcy5fcmVhZGFibGVTdHJlYW0uZGVzdHJveSh0aGlzLl9zdG9yZWRFcnJvcil9fWNsYXNzIEJhc2VSYW5nZVJlYWRlcntjb25zdHJ1Y3Rvcih0KXt0aGlzLl91cmw9dC51cmw7dGhpcy5fZG9uZT0hMTt0aGlzLl9zdG9yZWRFcnJvcj1udWxsO3RoaXMub25Qcm9ncmVzcz1udWxsO3RoaXMuX2xvYWRlZD0wO3RoaXMuX3JlYWRhYmxlU3RyZWFtPW51bGw7dGhpcy5fcmVhZENhcGFiaWxpdHk9bmV3IGkuUHJvbWlzZUNhcGFiaWxpdHk7Y29uc3QgZT10LnNvdXJjZTt0aGlzLl9pc1N0cmVhbWluZ1N1cHBvcnRlZD0hZS5kaXNhYmxlU3RyZWFtfWdldCBpc1N0cmVhbWluZ1N1cHBvcnRlZCgpe3JldHVybiB0aGlzLl9pc1N0cmVhbWluZ1N1cHBvcnRlZH1hc3luYyByZWFkKCl7YXdhaXQgdGhpcy5fcmVhZENhcGFiaWxpdHkucHJvbWlzZTtpZih0aGlzLl9kb25lKXJldHVybnt2YWx1ZTp2b2lkIDAsZG9uZTohMH07aWYodGhpcy5fc3RvcmVkRXJyb3IpdGhyb3cgdGhpcy5fc3RvcmVkRXJyb3I7Y29uc3QgdD10aGlzLl9yZWFkYWJsZVN0cmVhbS5yZWFkKCk7aWYobnVsbD09PXQpe3RoaXMuX3JlYWRDYXBhYmlsaXR5PW5ldyBpLlByb21pc2VDYXBhYmlsaXR5O3JldHVybiB0aGlzLnJlYWQoKX10aGlzLl9sb2FkZWQrPXQubGVuZ3RoO3RoaXMub25Qcm9ncmVzcz8uKHtsb2FkZWQ6dGhpcy5fbG9hZGVkfSk7cmV0dXJue3ZhbHVlOm5ldyBVaW50OEFycmF5KHQpLmJ1ZmZlcixkb25lOiExfX1jYW5jZWwodCl7dGhpcy5fcmVhZGFibGVTdHJlYW0/dGhpcy5fcmVhZGFibGVTdHJlYW0uZGVzdHJveSh0KTp0aGlzLl9lcnJvcih0KX1fZXJyb3IodCl7dGhpcy5fc3RvcmVkRXJyb3I9dDt0aGlzLl9yZWFkQ2FwYWJpbGl0eS5yZXNvbHZlKCl9X3NldFJlYWRhYmxlU3RyZWFtKHQpe3RoaXMuX3JlYWRhYmxlU3RyZWFtPXQ7dC5vbigicmVhZGFibGUiLCgoKT0+e3RoaXMuX3JlYWRDYXBhYmlsaXR5LnJlc29sdmUoKX0pKTt0Lm9uKCJlbmQiLCgoKT0+e3QuZGVzdHJveSgpO3RoaXMuX2RvbmU9ITA7dGhpcy5fcmVhZENhcGFiaWxpdHkucmVzb2x2ZSgpfSkpO3Qub24oImVycm9yIiwodD0+e3RoaXMuX2Vycm9yKHQpfSkpO3RoaXMuX3N0b3JlZEVycm9yJiZ0aGlzLl9yZWFkYWJsZVN0cmVhbS5kZXN0cm95KHRoaXMuX3N0b3JlZEVycm9yKX19ZnVuY3Rpb24gY3JlYXRlUmVxdWVzdE9wdGlvbnModCxlKXtyZXR1cm57cHJvdG9jb2w6dC5wcm90b2NvbCxhdXRoOnQuYXV0aCxob3N0OnQuaG9zdG5hbWUscG9ydDp0LnBvcnQscGF0aDp0LnBhdGgsbWV0aG9kOiJHRVQiLGhlYWRlcnM6ZX19Y2xhc3MgUERGTm9kZVN0cmVhbUZ1bGxSZWFkZXIgZXh0ZW5kcyBCYXNlRnVsbFJlYWRlcntjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KTtjb25zdCBoYW5kbGVSZXNwb25zZT1lPT57aWYoNDA0PT09ZS5zdGF0dXNDb2RlKXtjb25zdCB0PW5ldyBpLk1pc3NpbmdQREZFeGNlcHRpb24oYE1pc3NpbmcgUERGICIke3RoaXMuX3VybH0iLmApO3RoaXMuX3N0b3JlZEVycm9yPXQ7dGhpcy5faGVhZGVyc0NhcGFiaWxpdHkucmVqZWN0KHQpO3JldHVybn10aGlzLl9oZWFkZXJzQ2FwYWJpbGl0eS5yZXNvbHZlKCk7dGhpcy5fc2V0UmVhZGFibGVTdHJlYW0oZSk7Y29uc3QgZ2V0UmVzcG9uc2VIZWFkZXI9dD0+dGhpcy5fcmVhZGFibGVTdHJlYW0uaGVhZGVyc1t0LnRvTG93ZXJDYXNlKCldLHthbGxvd1JhbmdlUmVxdWVzdHM6cyxzdWdnZXN0ZWRMZW5ndGg6YX09KDAsbi52YWxpZGF0ZVJhbmdlUmVxdWVzdENhcGFiaWxpdGllcykoe2dldFJlc3BvbnNlSGVhZGVyOmdldFJlc3BvbnNlSGVhZGVyLGlzSHR0cDp0LmlzSHR0cCxyYW5nZUNodW5rU2l6ZTp0aGlzLl9yYW5nZUNodW5rU2l6ZSxkaXNhYmxlUmFuZ2U6dGhpcy5fZGlzYWJsZVJhbmdlfSk7dGhpcy5faXNSYW5nZVN1cHBvcnRlZD1zO3RoaXMuX2NvbnRlbnRMZW5ndGg9YXx8dGhpcy5fY29udGVudExlbmd0aDt0aGlzLl9maWxlbmFtZT0oMCxuLmV4dHJhY3RGaWxlbmFtZUZyb21IZWFkZXIpKGdldFJlc3BvbnNlSGVhZGVyKX07dGhpcy5fcmVxdWVzdD1udWxsOyJodHRwOiI9PT10aGlzLl91cmwucHJvdG9jb2w/dGhpcy5fcmVxdWVzdD1yLnJlcXVlc3QoY3JlYXRlUmVxdWVzdE9wdGlvbnModGhpcy5fdXJsLHQuaHR0cEhlYWRlcnMpLGhhbmRsZVJlc3BvbnNlKTp0aGlzLl9yZXF1ZXN0PW8ucmVxdWVzdChjcmVhdGVSZXF1ZXN0T3B0aW9ucyh0aGlzLl91cmwsdC5odHRwSGVhZGVycyksaGFuZGxlUmVzcG9uc2UpO3RoaXMuX3JlcXVlc3Qub24oImVycm9yIiwodD0+e3RoaXMuX3N0b3JlZEVycm9yPXQ7dGhpcy5faGVhZGVyc0NhcGFiaWxpdHkucmVqZWN0KHQpfSkpO3RoaXMuX3JlcXVlc3QuZW5kKCl9fWNsYXNzIFBERk5vZGVTdHJlYW1SYW5nZVJlYWRlciBleHRlbmRzIEJhc2VSYW5nZVJlYWRlcntjb25zdHJ1Y3Rvcih0LGUscyl7c3VwZXIodCk7dGhpcy5faHR0cEhlYWRlcnM9e307Zm9yKGNvbnN0IGUgaW4gdC5odHRwSGVhZGVycyl7Y29uc3Qgcz10Lmh0dHBIZWFkZXJzW2VdO3ZvaWQgMCE9PXMmJih0aGlzLl9odHRwSGVhZGVyc1tlXT1zKX10aGlzLl9odHRwSGVhZGVycy5SYW5nZT1gYnl0ZXM9JHtlfS0ke3MtMX1gO2NvbnN0IGhhbmRsZVJlc3BvbnNlPXQ9PntpZig0MDQhPT10LnN0YXR1c0NvZGUpdGhpcy5fc2V0UmVhZGFibGVTdHJlYW0odCk7ZWxzZXtjb25zdCB0PW5ldyBpLk1pc3NpbmdQREZFeGNlcHRpb24oYE1pc3NpbmcgUERGICIke3RoaXMuX3VybH0iLmApO3RoaXMuX3N0b3JlZEVycm9yPXR9fTt0aGlzLl9yZXF1ZXN0PW51bGw7Imh0dHA6Ij09PXRoaXMuX3VybC5wcm90b2NvbD90aGlzLl9yZXF1ZXN0PXIucmVxdWVzdChjcmVhdGVSZXF1ZXN0T3B0aW9ucyh0aGlzLl91cmwsdGhpcy5faHR0cEhlYWRlcnMpLGhhbmRsZVJlc3BvbnNlKTp0aGlzLl9yZXF1ZXN0PW8ucmVxdWVzdChjcmVhdGVSZXF1ZXN0T3B0aW9ucyh0aGlzLl91cmwsdGhpcy5faHR0cEhlYWRlcnMpLGhhbmRsZVJlc3BvbnNlKTt0aGlzLl9yZXF1ZXN0Lm9uKCJlcnJvciIsKHQ9Pnt0aGlzLl9zdG9yZWRFcnJvcj10fSkpO3RoaXMuX3JlcXVlc3QuZW5kKCl9fWNsYXNzIFBERk5vZGVTdHJlYW1Gc0Z1bGxSZWFkZXIgZXh0ZW5kcyBCYXNlRnVsbFJlYWRlcntjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KTtsZXQgZT1kZWNvZGVVUklDb21wb25lbnQodGhpcy5fdXJsLnBhdGgpO2MudGVzdCh0aGlzLl91cmwuaHJlZikmJihlPWUucmVwbGFjZSgvXlwvLywiIikpO2EubHN0YXQoZSwoKHQscyk9PntpZih0KXsiRU5PRU5UIj09PXQuY29kZSYmKHQ9bmV3IGkuTWlzc2luZ1BERkV4Y2VwdGlvbihgTWlzc2luZyBQREYgIiR7ZX0iLmApKTt0aGlzLl9zdG9yZWRFcnJvcj10O3RoaXMuX2hlYWRlcnNDYXBhYmlsaXR5LnJlamVjdCh0KX1lbHNle3RoaXMuX2NvbnRlbnRMZW5ndGg9cy5zaXplO3RoaXMuX3NldFJlYWRhYmxlU3RyZWFtKGEuY3JlYXRlUmVhZFN0cmVhbShlKSk7dGhpcy5faGVhZGVyc0NhcGFiaWxpdHkucmVzb2x2ZSgpfX0pKX19Y2xhc3MgUERGTm9kZVN0cmVhbUZzUmFuZ2VSZWFkZXIgZXh0ZW5kcyBCYXNlUmFuZ2VSZWFkZXJ7Y29uc3RydWN0b3IodCxlLHMpe3N1cGVyKHQpO2xldCBpPWRlY29kZVVSSUNvbXBvbmVudCh0aGlzLl91cmwucGF0aCk7Yy50ZXN0KHRoaXMuX3VybC5ocmVmKSYmKGk9aS5yZXBsYWNlKC9eXC8vLCIiKSk7dGhpcy5fc2V0UmVhZGFibGVTdHJlYW0oYS5jcmVhdGVSZWFkU3RyZWFtKGkse3N0YXJ0OmUsZW5kOnMtMX0pKX19fSwodCxlLHMpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO2UuY3JlYXRlUmVzcG9uc2VTdGF0dXNFcnJvcj1mdW5jdGlvbiBjcmVhdGVSZXNwb25zZVN0YXR1c0Vycm9yKHQsZSl7aWYoNDA0PT09dHx8MD09PXQmJmUuc3RhcnRzV2l0aCgiZmlsZToiKSlyZXR1cm4gbmV3IGkuTWlzc2luZ1BERkV4Y2VwdGlvbignTWlzc2luZyBQREYgIicrZSsnIi4nKTtyZXR1cm4gbmV3IGkuVW5leHBlY3RlZFJlc3BvbnNlRXhjZXB0aW9uKGBVbmV4cGVjdGVkIHNlcnZlciByZXNwb25zZSAoJHt0fSkgd2hpbGUgcmV0cmlldmluZyBQREYgIiR7ZX0iLmAsdCl9O2UuZXh0cmFjdEZpbGVuYW1lRnJvbUhlYWRlcj1mdW5jdGlvbiBleHRyYWN0RmlsZW5hbWVGcm9tSGVhZGVyKHQpe2NvbnN0IGU9dCgiQ29udGVudC1EaXNwb3NpdGlvbiIpO2lmKGUpe2xldCB0PSgwLG4uZ2V0RmlsZW5hbWVGcm9tQ29udGVudERpc3Bvc2l0aW9uSGVhZGVyKShlKTtpZih0LmluY2x1ZGVzKCIlIikpdHJ5e3Q9ZGVjb2RlVVJJQ29tcG9uZW50KHQpfWNhdGNoKHQpe31pZigoMCxhLmlzUGRmRmlsZSkodCkpcmV0dXJuIHR9cmV0dXJuIG51bGx9O2UudmFsaWRhdGVSYW5nZVJlcXVlc3RDYXBhYmlsaXRpZXM9ZnVuY3Rpb24gdmFsaWRhdGVSYW5nZVJlcXVlc3RDYXBhYmlsaXRpZXMoe2dldFJlc3BvbnNlSGVhZGVyOnQsaXNIdHRwOmUscmFuZ2VDaHVua1NpemU6cyxkaXNhYmxlUmFuZ2U6aX0pe2NvbnN0IG49e2FsbG93UmFuZ2VSZXF1ZXN0czohMSxzdWdnZXN0ZWRMZW5ndGg6dm9pZCAwfSxhPXBhcnNlSW50KHQoIkNvbnRlbnQtTGVuZ3RoIiksMTApO2lmKCFOdW1iZXIuaXNJbnRlZ2VyKGEpKXJldHVybiBuO24uc3VnZ2VzdGVkTGVuZ3RoPWE7aWYoYTw9MipzKXJldHVybiBuO2lmKGl8fCFlKXJldHVybiBuO2lmKCJieXRlcyIhPT10KCJBY2NlcHQtUmFuZ2VzIikpcmV0dXJuIG47aWYoImlkZW50aXR5IiE9PSh0KCJDb250ZW50LUVuY29kaW5nIil8fCJpZGVudGl0eSIpKXJldHVybiBuO24uYWxsb3dSYW5nZVJlcXVlc3RzPSEwO3JldHVybiBufTtlLnZhbGlkYXRlUmVzcG9uc2VTdGF0dXM9ZnVuY3Rpb24gdmFsaWRhdGVSZXNwb25zZVN0YXR1cyh0KXtyZXR1cm4gMjAwPT09dHx8MjA2PT09dH07dmFyIGk9cygxKSxuPXMoMjMpLGE9cyg2KX0sKHQsZSxzKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTtlLmdldEZpbGVuYW1lRnJvbUNvbnRlbnREaXNwb3NpdGlvbkhlYWRlcj1mdW5jdGlvbiBnZXRGaWxlbmFtZUZyb21Db250ZW50RGlzcG9zaXRpb25IZWFkZXIodCl7bGV0IGU9ITAscz10b1BhcmFtUmVnRXhwKCJmaWxlbmFtZVxcKiIsImkiKS5leGVjKHQpO2lmKHMpe3M9c1sxXTtsZXQgdD1yZmMyNjE2dW5xdW90ZShzKTt0PXVuZXNjYXBlKHQpO3Q9cmZjNTk4N2RlY29kZSh0KTt0PXJmYzIwNDdkZWNvZGUodCk7cmV0dXJuIGZpeHVwRW5jb2RpbmcodCl9cz1mdW5jdGlvbiByZmMyMjMxZ2V0cGFyYW0odCl7Y29uc3QgZT1bXTtsZXQgcztjb25zdCBpPXRvUGFyYW1SZWdFeHAoImZpbGVuYW1lXFwqKCg/ITBcXGQpXFxkKykoXFwqPykiLCJpZyIpO2Zvcig7bnVsbCE9PShzPWkuZXhlYyh0KSk7KXtsZXRbLHQsaSxuXT1zO3Q9cGFyc2VJbnQodCwxMCk7aWYodCBpbiBlKXtpZigwPT09dClicmVha31lbHNlIGVbdF09W2ksbl19Y29uc3Qgbj1bXTtmb3IobGV0IHQ9MDt0PGUubGVuZ3RoJiZ0IGluIGU7Kyt0KXtsZXRbcyxpXT1lW3RdO2k9cmZjMjYxNnVucXVvdGUoaSk7aWYocyl7aT11bmVzY2FwZShpKTswPT09dCYmKGk9cmZjNTk4N2RlY29kZShpKSl9bi5wdXNoKGkpfXJldHVybiBuLmpvaW4oIiIpfSh0KTtpZihzKXtyZXR1cm4gZml4dXBFbmNvZGluZyhyZmMyMDQ3ZGVjb2RlKHMpKX1zPXRvUGFyYW1SZWdFeHAoImZpbGVuYW1lIiwiaSIpLmV4ZWModCk7aWYocyl7cz1zWzFdO2xldCB0PXJmYzI2MTZ1bnF1b3RlKHMpO3Q9cmZjMjA0N2RlY29kZSh0KTtyZXR1cm4gZml4dXBFbmNvZGluZyh0KX1mdW5jdGlvbiB0b1BhcmFtUmVnRXhwKHQsZSl7cmV0dXJuIG5ldyBSZWdFeHAoIig/Ol58OylcXHMqIit0KydcXHMqPVxccyooW14iO1xcc11bXjtcXHNdKnwiKD86W14iXFxcXF18XFxcXCI/KSsiPyknLGUpfWZ1bmN0aW9uIHRleHRkZWNvZGUodCxzKXtpZih0KXtpZighL15bXHgwMC1ceEZGXSskLy50ZXN0KHMpKXJldHVybiBzO3RyeXtjb25zdCBuPW5ldyBUZXh0RGVjb2Rlcih0LHtmYXRhbDohMH0pLGE9KDAsaS5zdHJpbmdUb0J5dGVzKShzKTtzPW4uZGVjb2RlKGEpO2U9ITF9Y2F0Y2godCl7fX1yZXR1cm4gc31mdW5jdGlvbiBmaXh1cEVuY29kaW5nKHQpe2lmKGUmJi9bXHg4MC1ceGZmXS8udGVzdCh0KSl7dD10ZXh0ZGVjb2RlKCJ1dGYtOCIsdCk7ZSYmKHQ9dGV4dGRlY29kZSgiaXNvLTg4NTktMSIsdCkpfXJldHVybiB0fWZ1bmN0aW9uIHJmYzI2MTZ1bnF1b3RlKHQpe2lmKHQuc3RhcnRzV2l0aCgnIicpKXtjb25zdCBlPXQuc2xpY2UoMSkuc3BsaXQoJ1xcIicpO2ZvcihsZXQgdD0wO3Q8ZS5sZW5ndGg7Kyt0KXtjb25zdCBzPWVbdF0uaW5kZXhPZignIicpO2lmKC0xIT09cyl7ZVt0XT1lW3RdLnNsaWNlKDAscyk7ZS5sZW5ndGg9dCsxfWVbdF09ZVt0XS5yZXBsYWNlQWxsKC9cXCguKS9nLCIkMSIpfXQ9ZS5qb2luKCciJyl9cmV0dXJuIHR9ZnVuY3Rpb24gcmZjNTk4N2RlY29kZSh0KXtjb25zdCBlPXQuaW5kZXhPZigiJyIpO2lmKC0xPT09ZSlyZXR1cm4gdDtyZXR1cm4gdGV4dGRlY29kZSh0LnNsaWNlKDAsZSksdC5zbGljZShlKzEpLnJlcGxhY2UoL15bXiddKicvLCIiKSl9ZnVuY3Rpb24gcmZjMjA0N2RlY29kZSh0KXtyZXR1cm4hdC5zdGFydHNXaXRoKCI9PyIpfHwvW1x4MDAtXHgxOVx4ODAtXHhmZl0vLnRlc3QodCk/dDp0LnJlcGxhY2VBbGwoLz1cPyhbXHctXSopXD8oW1FxQmJdKVw/KCg/OlteP118XD8oPyE9KSkqKVw/PS9nLChmdW5jdGlvbih0LGUscyxpKXtpZigicSI9PT1zfHwiUSI9PT1zKXJldHVybiB0ZXh0ZGVjb2RlKGUsaT0oaT1pLnJlcGxhY2VBbGwoIl8iLCIgIikpLnJlcGxhY2VBbGwoLz0oWzAtOWEtZkEtRl17Mn0pL2csKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUocGFyc2VJbnQoZSwxNikpfSkpKTt0cnl7aT1hdG9iKGkpfWNhdGNoKHQpe31yZXR1cm4gdGV4dGRlY29kZShlLGkpfSkpfXJldHVybiIifTt2YXIgaT1zKDEpfSwodCxlLHMpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO2UuUERGTmV0d29ya1N0cmVhbT12b2lkIDA7dmFyIGk9cygxKSxuPXMoMjIpO2NsYXNzIE5ldHdvcmtNYW5hZ2Vye2NvbnN0cnVjdG9yKHQsZT17fSl7dGhpcy51cmw9dDt0aGlzLmlzSHR0cD0vXmh0dHBzPzovaS50ZXN0KHQpO3RoaXMuaHR0cEhlYWRlcnM9dGhpcy5pc0h0dHAmJmUuaHR0cEhlYWRlcnN8fE9iamVjdC5jcmVhdGUobnVsbCk7dGhpcy53aXRoQ3JlZGVudGlhbHM9ZS53aXRoQ3JlZGVudGlhbHN8fCExO3RoaXMuY3VyclhocklkPTA7dGhpcy5wZW5kaW5nUmVxdWVzdHM9T2JqZWN0LmNyZWF0ZShudWxsKX1yZXF1ZXN0UmFuZ2UodCxlLHMpe2NvbnN0IGk9e2JlZ2luOnQsZW5kOmV9O2Zvcihjb25zdCB0IGluIHMpaVt0XT1zW3RdO3JldHVybiB0aGlzLnJlcXVlc3QoaSl9cmVxdWVzdEZ1bGwodCl7cmV0dXJuIHRoaXMucmVxdWVzdCh0KX1yZXF1ZXN0KHQpe2NvbnN0IGU9bmV3IFhNTEh0dHBSZXF1ZXN0LHM9dGhpcy5jdXJyWGhySWQrKyxpPXRoaXMucGVuZGluZ1JlcXVlc3RzW3NdPXt4aHI6ZX07ZS5vcGVuKCJHRVQiLHRoaXMudXJsKTtlLndpdGhDcmVkZW50aWFscz10aGlzLndpdGhDcmVkZW50aWFscztmb3IoY29uc3QgdCBpbiB0aGlzLmh0dHBIZWFkZXJzKXtjb25zdCBzPXRoaXMuaHR0cEhlYWRlcnNbdF07dm9pZCAwIT09cyYmZS5zZXRSZXF1ZXN0SGVhZGVyKHQscyl9aWYodGhpcy5pc0h0dHAmJiJiZWdpbiJpbiB0JiYiZW5kImluIHQpe2Uuc2V0UmVxdWVzdEhlYWRlcigiUmFuZ2UiLGBieXRlcz0ke3QuYmVnaW59LSR7dC5lbmQtMX1gKTtpLmV4cGVjdGVkU3RhdHVzPTIwNn1lbHNlIGkuZXhwZWN0ZWRTdGF0dXM9MjAwO2UucmVzcG9uc2VUeXBlPSJhcnJheWJ1ZmZlciI7dC5vbkVycm9yJiYoZS5vbmVycm9yPWZ1bmN0aW9uKHMpe3Qub25FcnJvcihlLnN0YXR1cyl9KTtlLm9ucmVhZHlzdGF0ZWNoYW5nZT10aGlzLm9uU3RhdGVDaGFuZ2UuYmluZCh0aGlzLHMpO2Uub25wcm9ncmVzcz10aGlzLm9uUHJvZ3Jlc3MuYmluZCh0aGlzLHMpO2kub25IZWFkZXJzUmVjZWl2ZWQ9dC5vbkhlYWRlcnNSZWNlaXZlZDtpLm9uRG9uZT10Lm9uRG9uZTtpLm9uRXJyb3I9dC5vbkVycm9yO2kub25Qcm9ncmVzcz10Lm9uUHJvZ3Jlc3M7ZS5zZW5kKG51bGwpO3JldHVybiBzfW9uUHJvZ3Jlc3ModCxlKXtjb25zdCBzPXRoaXMucGVuZGluZ1JlcXVlc3RzW3RdO3MmJnMub25Qcm9ncmVzcz8uKGUpfW9uU3RhdGVDaGFuZ2UodCxlKXtjb25zdCBzPXRoaXMucGVuZGluZ1JlcXVlc3RzW3RdO2lmKCFzKXJldHVybjtjb25zdCBuPXMueGhyO2lmKG4ucmVhZHlTdGF0ZT49MiYmcy5vbkhlYWRlcnNSZWNlaXZlZCl7cy5vbkhlYWRlcnNSZWNlaXZlZCgpO2RlbGV0ZSBzLm9uSGVhZGVyc1JlY2VpdmVkfWlmKDQhPT1uLnJlYWR5U3RhdGUpcmV0dXJuO2lmKCEodCBpbiB0aGlzLnBlbmRpbmdSZXF1ZXN0cykpcmV0dXJuO2RlbGV0ZSB0aGlzLnBlbmRpbmdSZXF1ZXN0c1t0XTtpZigwPT09bi5zdGF0dXMmJnRoaXMuaXNIdHRwKXtzLm9uRXJyb3I/LihuLnN0YXR1cyk7cmV0dXJufWNvbnN0IGE9bi5zdGF0dXN8fDIwMDtpZighKDIwMD09PWEmJjIwNj09PXMuZXhwZWN0ZWRTdGF0dXMpJiZhIT09cy5leHBlY3RlZFN0YXR1cyl7cy5vbkVycm9yPy4obi5zdGF0dXMpO3JldHVybn1jb25zdCByPWZ1bmN0aW9uIGdldEFycmF5QnVmZmVyKHQpe2NvbnN0IGU9dC5yZXNwb25zZTtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIGU/ZTooMCxpLnN0cmluZ1RvQnl0ZXMpKGUpLmJ1ZmZlcn0obik7aWYoMjA2PT09YSl7Y29uc3QgdD1uLmdldFJlc3BvbnNlSGVhZGVyKCJDb250ZW50LVJhbmdlIiksZT0vYnl0ZXMgKFxkKyktKFxkKylcLyhcZCspLy5leGVjKHQpO3Mub25Eb25lKHtiZWdpbjpwYXJzZUludChlWzFdLDEwKSxjaHVuazpyfSl9ZWxzZSByP3Mub25Eb25lKHtiZWdpbjowLGNodW5rOnJ9KTpzLm9uRXJyb3I/LihuLnN0YXR1cyl9Z2V0UmVxdWVzdFhocih0KXtyZXR1cm4gdGhpcy5wZW5kaW5nUmVxdWVzdHNbdF0ueGhyfWlzUGVuZGluZ1JlcXVlc3QodCl7cmV0dXJuIHQgaW4gdGhpcy5wZW5kaW5nUmVxdWVzdHN9YWJvcnRSZXF1ZXN0KHQpe2NvbnN0IGU9dGhpcy5wZW5kaW5nUmVxdWVzdHNbdF0ueGhyO2RlbGV0ZSB0aGlzLnBlbmRpbmdSZXF1ZXN0c1t0XTtlLmFib3J0KCl9fWUuUERGTmV0d29ya1N0cmVhbT1jbGFzcyBQREZOZXR3b3JrU3RyZWFte2NvbnN0cnVjdG9yKHQpe3RoaXMuX3NvdXJjZT10O3RoaXMuX21hbmFnZXI9bmV3IE5ldHdvcmtNYW5hZ2VyKHQudXJsLHtodHRwSGVhZGVyczp0Lmh0dHBIZWFkZXJzLHdpdGhDcmVkZW50aWFsczp0LndpdGhDcmVkZW50aWFsc30pO3RoaXMuX3JhbmdlQ2h1bmtTaXplPXQucmFuZ2VDaHVua1NpemU7dGhpcy5fZnVsbFJlcXVlc3RSZWFkZXI9bnVsbDt0aGlzLl9yYW5nZVJlcXVlc3RSZWFkZXJzPVtdfV9vblJhbmdlUmVxdWVzdFJlYWRlckNsb3NlZCh0KXtjb25zdCBlPXRoaXMuX3JhbmdlUmVxdWVzdFJlYWRlcnMuaW5kZXhPZih0KTtlPj0wJiZ0aGlzLl9yYW5nZVJlcXVlc3RSZWFkZXJzLnNwbGljZShlLDEpfWdldEZ1bGxSZWFkZXIoKXsoMCxpLmFzc2VydCkoIXRoaXMuX2Z1bGxSZXF1ZXN0UmVhZGVyLCJQREZOZXR3b3JrU3RyZWFtLmdldEZ1bGxSZWFkZXIgY2FuIG9ubHkgYmUgY2FsbGVkIG9uY2UuIik7dGhpcy5fZnVsbFJlcXVlc3RSZWFkZXI9bmV3IFBERk5ldHdvcmtTdHJlYW1GdWxsUmVxdWVzdFJlYWRlcih0aGlzLl9tYW5hZ2VyLHRoaXMuX3NvdXJjZSk7cmV0dXJuIHRoaXMuX2Z1bGxSZXF1ZXN0UmVhZGVyfWdldFJhbmdlUmVhZGVyKHQsZSl7Y29uc3Qgcz1uZXcgUERGTmV0d29ya1N0cmVhbVJhbmdlUmVxdWVzdFJlYWRlcih0aGlzLl9tYW5hZ2VyLHQsZSk7cy5vbkNsb3NlZD10aGlzLl9vblJhbmdlUmVxdWVzdFJlYWRlckNsb3NlZC5iaW5kKHRoaXMpO3RoaXMuX3JhbmdlUmVxdWVzdFJlYWRlcnMucHVzaChzKTtyZXR1cm4gc31jYW5jZWxBbGxSZXF1ZXN0cyh0KXt0aGlzLl9mdWxsUmVxdWVzdFJlYWRlcj8uY2FuY2VsKHQpO2Zvcihjb25zdCBlIG9mIHRoaXMuX3JhbmdlUmVxdWVzdFJlYWRlcnMuc2xpY2UoMCkpZS5jYW5jZWwodCl9fTtjbGFzcyBQREZOZXR3b3JrU3RyZWFtRnVsbFJlcXVlc3RSZWFkZXJ7Y29uc3RydWN0b3IodCxlKXt0aGlzLl9tYW5hZ2VyPXQ7Y29uc3Qgcz17b25IZWFkZXJzUmVjZWl2ZWQ6dGhpcy5fb25IZWFkZXJzUmVjZWl2ZWQuYmluZCh0aGlzKSxvbkRvbmU6dGhpcy5fb25Eb25lLmJpbmQodGhpcyksb25FcnJvcjp0aGlzLl9vbkVycm9yLmJpbmQodGhpcyksb25Qcm9ncmVzczp0aGlzLl9vblByb2dyZXNzLmJpbmQodGhpcyl9O3RoaXMuX3VybD1lLnVybDt0aGlzLl9mdWxsUmVxdWVzdElkPXQucmVxdWVzdEZ1bGwocyk7dGhpcy5faGVhZGVyc1JlY2VpdmVkQ2FwYWJpbGl0eT1uZXcgaS5Qcm9taXNlQ2FwYWJpbGl0eTt0aGlzLl9kaXNhYmxlUmFuZ2U9ZS5kaXNhYmxlUmFuZ2V8fCExO3RoaXMuX2NvbnRlbnRMZW5ndGg9ZS5sZW5ndGg7dGhpcy5fcmFuZ2VDaHVua1NpemU9ZS5yYW5nZUNodW5rU2l6ZTt0aGlzLl9yYW5nZUNodW5rU2l6ZXx8dGhpcy5fZGlzYWJsZVJhbmdlfHwodGhpcy5fZGlzYWJsZVJhbmdlPSEwKTt0aGlzLl9pc1N0cmVhbWluZ1N1cHBvcnRlZD0hMTt0aGlzLl9pc1JhbmdlU3VwcG9ydGVkPSExO3RoaXMuX2NhY2hlZENodW5rcz1bXTt0aGlzLl9yZXF1ZXN0cz1bXTt0aGlzLl9kb25lPSExO3RoaXMuX3N0b3JlZEVycm9yPXZvaWQgMDt0aGlzLl9maWxlbmFtZT1udWxsO3RoaXMub25Qcm9ncmVzcz1udWxsfV9vbkhlYWRlcnNSZWNlaXZlZCgpe2NvbnN0IHQ9dGhpcy5fZnVsbFJlcXVlc3RJZCxlPXRoaXMuX21hbmFnZXIuZ2V0UmVxdWVzdFhocih0KSxnZXRSZXNwb25zZUhlYWRlcj10PT5lLmdldFJlc3BvbnNlSGVhZGVyKHQpLHthbGxvd1JhbmdlUmVxdWVzdHM6cyxzdWdnZXN0ZWRMZW5ndGg6aX09KDAsbi52YWxpZGF0ZVJhbmdlUmVxdWVzdENhcGFiaWxpdGllcykoe2dldFJlc3BvbnNlSGVhZGVyOmdldFJlc3BvbnNlSGVhZGVyLGlzSHR0cDp0aGlzLl9tYW5hZ2VyLmlzSHR0cCxyYW5nZUNodW5rU2l6ZTp0aGlzLl9yYW5nZUNodW5rU2l6ZSxkaXNhYmxlUmFuZ2U6dGhpcy5fZGlzYWJsZVJhbmdlfSk7cyYmKHRoaXMuX2lzUmFuZ2VTdXBwb3J0ZWQ9ITApO3RoaXMuX2NvbnRlbnRMZW5ndGg9aXx8dGhpcy5fY29udGVudExlbmd0aDt0aGlzLl9maWxlbmFtZT0oMCxuLmV4dHJhY3RGaWxlbmFtZUZyb21IZWFkZXIpKGdldFJlc3BvbnNlSGVhZGVyKTt0aGlzLl9pc1JhbmdlU3VwcG9ydGVkJiZ0aGlzLl9tYW5hZ2VyLmFib3J0UmVxdWVzdCh0KTt0aGlzLl9oZWFkZXJzUmVjZWl2ZWRDYXBhYmlsaXR5LnJlc29sdmUoKX1fb25Eb25lKHQpe2lmKHQpaWYodGhpcy5fcmVxdWVzdHMubGVuZ3RoPjApe3RoaXMuX3JlcXVlc3RzLnNoaWZ0KCkucmVzb2x2ZSh7dmFsdWU6dC5jaHVuayxkb25lOiExfSl9ZWxzZSB0aGlzLl9jYWNoZWRDaHVua3MucHVzaCh0LmNodW5rKTt0aGlzLl9kb25lPSEwO2lmKCEodGhpcy5fY2FjaGVkQ2h1bmtzLmxlbmd0aD4wKSl7Zm9yKGNvbnN0IHQgb2YgdGhpcy5fcmVxdWVzdHMpdC5yZXNvbHZlKHt2YWx1ZTp2b2lkIDAsZG9uZTohMH0pO3RoaXMuX3JlcXVlc3RzLmxlbmd0aD0wfX1fb25FcnJvcih0KXt0aGlzLl9zdG9yZWRFcnJvcj0oMCxuLmNyZWF0ZVJlc3BvbnNlU3RhdHVzRXJyb3IpKHQsdGhpcy5fdXJsKTt0aGlzLl9oZWFkZXJzUmVjZWl2ZWRDYXBhYmlsaXR5LnJlamVjdCh0aGlzLl9zdG9yZWRFcnJvcik7Zm9yKGNvbnN0IHQgb2YgdGhpcy5fcmVxdWVzdHMpdC5yZWplY3QodGhpcy5fc3RvcmVkRXJyb3IpO3RoaXMuX3JlcXVlc3RzLmxlbmd0aD0wO3RoaXMuX2NhY2hlZENodW5rcy5sZW5ndGg9MH1fb25Qcm9ncmVzcyh0KXt0aGlzLm9uUHJvZ3Jlc3M/Lih7bG9hZGVkOnQubG9hZGVkLHRvdGFsOnQubGVuZ3RoQ29tcHV0YWJsZT90LnRvdGFsOnRoaXMuX2NvbnRlbnRMZW5ndGh9KX1nZXQgZmlsZW5hbWUoKXtyZXR1cm4gdGhpcy5fZmlsZW5hbWV9Z2V0IGlzUmFuZ2VTdXBwb3J0ZWQoKXtyZXR1cm4gdGhpcy5faXNSYW5nZVN1cHBvcnRlZH1nZXQgaXNTdHJlYW1pbmdTdXBwb3J0ZWQoKXtyZXR1cm4gdGhpcy5faXNTdHJlYW1pbmdTdXBwb3J0ZWR9Z2V0IGNvbnRlbnRMZW5ndGgoKXtyZXR1cm4gdGhpcy5fY29udGVudExlbmd0aH1nZXQgaGVhZGVyc1JlYWR5KCl7cmV0dXJuIHRoaXMuX2hlYWRlcnNSZWNlaXZlZENhcGFiaWxpdHkucHJvbWlzZX1hc3luYyByZWFkKCl7aWYodGhpcy5fc3RvcmVkRXJyb3IpdGhyb3cgdGhpcy5fc3RvcmVkRXJyb3I7aWYodGhpcy5fY2FjaGVkQ2h1bmtzLmxlbmd0aD4wKXtyZXR1cm57dmFsdWU6dGhpcy5fY2FjaGVkQ2h1bmtzLnNoaWZ0KCksZG9uZTohMX19aWYodGhpcy5fZG9uZSlyZXR1cm57dmFsdWU6dm9pZCAwLGRvbmU6ITB9O2NvbnN0IHQ9bmV3IGkuUHJvbWlzZUNhcGFiaWxpdHk7dGhpcy5fcmVxdWVzdHMucHVzaCh0KTtyZXR1cm4gdC5wcm9taXNlfWNhbmNlbCh0KXt0aGlzLl9kb25lPSEwO3RoaXMuX2hlYWRlcnNSZWNlaXZlZENhcGFiaWxpdHkucmVqZWN0KHQpO2Zvcihjb25zdCB0IG9mIHRoaXMuX3JlcXVlc3RzKXQucmVzb2x2ZSh7dmFsdWU6dm9pZCAwLGRvbmU6ITB9KTt0aGlzLl9yZXF1ZXN0cy5sZW5ndGg9MDt0aGlzLl9tYW5hZ2VyLmlzUGVuZGluZ1JlcXVlc3QodGhpcy5fZnVsbFJlcXVlc3RJZCkmJnRoaXMuX21hbmFnZXIuYWJvcnRSZXF1ZXN0KHRoaXMuX2Z1bGxSZXF1ZXN0SWQpO3RoaXMuX2Z1bGxSZXF1ZXN0UmVhZGVyPW51bGx9fWNsYXNzIFBERk5ldHdvcmtTdHJlYW1SYW5nZVJlcXVlc3RSZWFkZXJ7Y29uc3RydWN0b3IodCxlLHMpe3RoaXMuX21hbmFnZXI9dDtjb25zdCBpPXtvbkRvbmU6dGhpcy5fb25Eb25lLmJpbmQodGhpcyksb25FcnJvcjp0aGlzLl9vbkVycm9yLmJpbmQodGhpcyksb25Qcm9ncmVzczp0aGlzLl9vblByb2dyZXNzLmJpbmQodGhpcyl9O3RoaXMuX3VybD10LnVybDt0aGlzLl9yZXF1ZXN0SWQ9dC5yZXF1ZXN0UmFuZ2UoZSxzLGkpO3RoaXMuX3JlcXVlc3RzPVtdO3RoaXMuX3F1ZXVlZENodW5rPW51bGw7dGhpcy5fZG9uZT0hMTt0aGlzLl9zdG9yZWRFcnJvcj12b2lkIDA7dGhpcy5vblByb2dyZXNzPW51bGw7dGhpcy5vbkNsb3NlZD1udWxsfV9jbG9zZSgpe3RoaXMub25DbG9zZWQ/Lih0aGlzKX1fb25Eb25lKHQpe2NvbnN0IGU9dC5jaHVuaztpZih0aGlzLl9yZXF1ZXN0cy5sZW5ndGg+MCl7dGhpcy5fcmVxdWVzdHMuc2hpZnQoKS5yZXNvbHZlKHt2YWx1ZTplLGRvbmU6ITF9KX1lbHNlIHRoaXMuX3F1ZXVlZENodW5rPWU7dGhpcy5fZG9uZT0hMDtmb3IoY29uc3QgdCBvZiB0aGlzLl9yZXF1ZXN0cyl0LnJlc29sdmUoe3ZhbHVlOnZvaWQgMCxkb25lOiEwfSk7dGhpcy5fcmVxdWVzdHMubGVuZ3RoPTA7dGhpcy5fY2xvc2UoKX1fb25FcnJvcih0KXt0aGlzLl9zdG9yZWRFcnJvcj0oMCxuLmNyZWF0ZVJlc3BvbnNlU3RhdHVzRXJyb3IpKHQsdGhpcy5fdXJsKTtmb3IoY29uc3QgdCBvZiB0aGlzLl9yZXF1ZXN0cyl0LnJlamVjdCh0aGlzLl9zdG9yZWRFcnJvcik7dGhpcy5fcmVxdWVzdHMubGVuZ3RoPTA7dGhpcy5fcXVldWVkQ2h1bms9bnVsbH1fb25Qcm9ncmVzcyh0KXt0aGlzLmlzU3RyZWFtaW5nU3VwcG9ydGVkfHx0aGlzLm9uUHJvZ3Jlc3M/Lih7bG9hZGVkOnQubG9hZGVkfSl9Z2V0IGlzU3RyZWFtaW5nU3VwcG9ydGVkKCl7cmV0dXJuITF9YXN5bmMgcmVhZCgpe2lmKHRoaXMuX3N0b3JlZEVycm9yKXRocm93IHRoaXMuX3N0b3JlZEVycm9yO2lmKG51bGwhPT10aGlzLl9xdWV1ZWRDaHVuayl7Y29uc3QgdD10aGlzLl9xdWV1ZWRDaHVuazt0aGlzLl9xdWV1ZWRDaHVuaz1udWxsO3JldHVybnt2YWx1ZTp0LGRvbmU6ITF9fWlmKHRoaXMuX2RvbmUpcmV0dXJue3ZhbHVlOnZvaWQgMCxkb25lOiEwfTtjb25zdCB0PW5ldyBpLlByb21pc2VDYXBhYmlsaXR5O3RoaXMuX3JlcXVlc3RzLnB1c2godCk7cmV0dXJuIHQucHJvbWlzZX1jYW5jZWwodCl7dGhpcy5fZG9uZT0hMDtmb3IoY29uc3QgdCBvZiB0aGlzLl9yZXF1ZXN0cyl0LnJlc29sdmUoe3ZhbHVlOnZvaWQgMCxkb25lOiEwfSk7dGhpcy5fcmVxdWVzdHMubGVuZ3RoPTA7dGhpcy5fbWFuYWdlci5pc1BlbmRpbmdSZXF1ZXN0KHRoaXMuX3JlcXVlc3RJZCkmJnRoaXMuX21hbmFnZXIuYWJvcnRSZXF1ZXN0KHRoaXMuX3JlcXVlc3RJZCk7dGhpcy5fY2xvc2UoKX19fSwodCxlLHMpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO2UuUERGRmV0Y2hTdHJlYW09dm9pZCAwO3ZhciBpPXMoMSksbj1zKDIyKTtmdW5jdGlvbiBjcmVhdGVGZXRjaE9wdGlvbnModCxlLHMpe3JldHVybnttZXRob2Q6IkdFVCIsaGVhZGVyczp0LHNpZ25hbDpzLnNpZ25hbCxtb2RlOiJjb3JzIixjcmVkZW50aWFsczplPyJpbmNsdWRlIjoic2FtZS1vcmlnaW4iLHJlZGlyZWN0OiJmb2xsb3cifX1mdW5jdGlvbiBjcmVhdGVIZWFkZXJzKHQpe2NvbnN0IGU9bmV3IEhlYWRlcnM7Zm9yKGNvbnN0IHMgaW4gdCl7Y29uc3QgaT10W3NdO3ZvaWQgMCE9PWkmJmUuYXBwZW5kKHMsaSl9cmV0dXJuIGV9ZnVuY3Rpb24gZ2V0QXJyYXlCdWZmZXIodCl7aWYodCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpcmV0dXJuIHQuYnVmZmVyO2lmKHQgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcilyZXR1cm4gdDsoMCxpLndhcm4pKGBnZXRBcnJheUJ1ZmZlciAtIHVuZXhwZWN0ZWQgZGF0YSBmb3JtYXQ6ICR7dH1gKTtyZXR1cm4gbmV3IFVpbnQ4QXJyYXkodCkuYnVmZmVyfWUuUERGRmV0Y2hTdHJlYW09Y2xhc3MgUERGRmV0Y2hTdHJlYW17Y29uc3RydWN0b3IodCl7dGhpcy5zb3VyY2U9dDt0aGlzLmlzSHR0cD0vXmh0dHBzPzovaS50ZXN0KHQudXJsKTt0aGlzLmh0dHBIZWFkZXJzPXRoaXMuaXNIdHRwJiZ0Lmh0dHBIZWFkZXJzfHx7fTt0aGlzLl9mdWxsUmVxdWVzdFJlYWRlcj1udWxsO3RoaXMuX3JhbmdlUmVxdWVzdFJlYWRlcnM9W119Z2V0IF9wcm9ncmVzc2l2ZURhdGFMZW5ndGgoKXtyZXR1cm4gdGhpcy5fZnVsbFJlcXVlc3RSZWFkZXI/Ll9sb2FkZWQ/PzB9Z2V0RnVsbFJlYWRlcigpeygwLGkuYXNzZXJ0KSghdGhpcy5fZnVsbFJlcXVlc3RSZWFkZXIsIlBERkZldGNoU3RyZWFtLmdldEZ1bGxSZWFkZXIgY2FuIG9ubHkgYmUgY2FsbGVkIG9uY2UuIik7dGhpcy5fZnVsbFJlcXVlc3RSZWFkZXI9bmV3IFBERkZldGNoU3RyZWFtUmVhZGVyKHRoaXMpO3JldHVybiB0aGlzLl9mdWxsUmVxdWVzdFJlYWRlcn1nZXRSYW5nZVJlYWRlcih0LGUpe2lmKGU8PXRoaXMuX3Byb2dyZXNzaXZlRGF0YUxlbmd0aClyZXR1cm4gbnVsbDtjb25zdCBzPW5ldyBQREZGZXRjaFN0cmVhbVJhbmdlUmVhZGVyKHRoaXMsdCxlKTt0aGlzLl9yYW5nZVJlcXVlc3RSZWFkZXJzLnB1c2gocyk7cmV0dXJuIHN9Y2FuY2VsQWxsUmVxdWVzdHModCl7dGhpcy5fZnVsbFJlcXVlc3RSZWFkZXI/LmNhbmNlbCh0KTtmb3IoY29uc3QgZSBvZiB0aGlzLl9yYW5nZVJlcXVlc3RSZWFkZXJzLnNsaWNlKDApKWUuY2FuY2VsKHQpfX07Y2xhc3MgUERGRmV0Y2hTdHJlYW1SZWFkZXJ7Y29uc3RydWN0b3IodCl7dGhpcy5fc3RyZWFtPXQ7dGhpcy5fcmVhZGVyPW51bGw7dGhpcy5fbG9hZGVkPTA7dGhpcy5fZmlsZW5hbWU9bnVsbDtjb25zdCBlPXQuc291cmNlO3RoaXMuX3dpdGhDcmVkZW50aWFscz1lLndpdGhDcmVkZW50aWFsc3x8ITE7dGhpcy5fY29udGVudExlbmd0aD1lLmxlbmd0aDt0aGlzLl9oZWFkZXJzQ2FwYWJpbGl0eT1uZXcgaS5Qcm9taXNlQ2FwYWJpbGl0eTt0aGlzLl9kaXNhYmxlUmFuZ2U9ZS5kaXNhYmxlUmFuZ2V8fCExO3RoaXMuX3JhbmdlQ2h1bmtTaXplPWUucmFuZ2VDaHVua1NpemU7dGhpcy5fcmFuZ2VDaHVua1NpemV8fHRoaXMuX2Rpc2FibGVSYW5nZXx8KHRoaXMuX2Rpc2FibGVSYW5nZT0hMCk7dGhpcy5fYWJvcnRDb250cm9sbGVyPW5ldyBBYm9ydENvbnRyb2xsZXI7dGhpcy5faXNTdHJlYW1pbmdTdXBwb3J0ZWQ9IWUuZGlzYWJsZVN0cmVhbTt0aGlzLl9pc1JhbmdlU3VwcG9ydGVkPSFlLmRpc2FibGVSYW5nZTt0aGlzLl9oZWFkZXJzPWNyZWF0ZUhlYWRlcnModGhpcy5fc3RyZWFtLmh0dHBIZWFkZXJzKTtjb25zdCBzPWUudXJsO2ZldGNoKHMsY3JlYXRlRmV0Y2hPcHRpb25zKHRoaXMuX2hlYWRlcnMsdGhpcy5fd2l0aENyZWRlbnRpYWxzLHRoaXMuX2Fib3J0Q29udHJvbGxlcikpLnRoZW4oKHQ9PntpZighKDAsbi52YWxpZGF0ZVJlc3BvbnNlU3RhdHVzKSh0LnN0YXR1cykpdGhyb3coMCxuLmNyZWF0ZVJlc3BvbnNlU3RhdHVzRXJyb3IpKHQuc3RhdHVzLHMpO3RoaXMuX3JlYWRlcj10LmJvZHkuZ2V0UmVhZGVyKCk7dGhpcy5faGVhZGVyc0NhcGFiaWxpdHkucmVzb2x2ZSgpO2NvbnN0IGdldFJlc3BvbnNlSGVhZGVyPWU9PnQuaGVhZGVycy5nZXQoZSkse2FsbG93UmFuZ2VSZXF1ZXN0czplLHN1Z2dlc3RlZExlbmd0aDphfT0oMCxuLnZhbGlkYXRlUmFuZ2VSZXF1ZXN0Q2FwYWJpbGl0aWVzKSh7Z2V0UmVzcG9uc2VIZWFkZXI6Z2V0UmVzcG9uc2VIZWFkZXIsaXNIdHRwOnRoaXMuX3N0cmVhbS5pc0h0dHAscmFuZ2VDaHVua1NpemU6dGhpcy5fcmFuZ2VDaHVua1NpemUsZGlzYWJsZVJhbmdlOnRoaXMuX2Rpc2FibGVSYW5nZX0pO3RoaXMuX2lzUmFuZ2VTdXBwb3J0ZWQ9ZTt0aGlzLl9jb250ZW50TGVuZ3RoPWF8fHRoaXMuX2NvbnRlbnRMZW5ndGg7dGhpcy5fZmlsZW5hbWU9KDAsbi5leHRyYWN0RmlsZW5hbWVGcm9tSGVhZGVyKShnZXRSZXNwb25zZUhlYWRlcik7IXRoaXMuX2lzU3RyZWFtaW5nU3VwcG9ydGVkJiZ0aGlzLl9pc1JhbmdlU3VwcG9ydGVkJiZ0aGlzLmNhbmNlbChuZXcgaS5BYm9ydEV4Y2VwdGlvbigiU3RyZWFtaW5nIGlzIGRpc2FibGVkLiIpKX0pKS5jYXRjaCh0aGlzLl9oZWFkZXJzQ2FwYWJpbGl0eS5yZWplY3QpO3RoaXMub25Qcm9ncmVzcz1udWxsfWdldCBoZWFkZXJzUmVhZHkoKXtyZXR1cm4gdGhpcy5faGVhZGVyc0NhcGFiaWxpdHkucHJvbWlzZX1nZXQgZmlsZW5hbWUoKXtyZXR1cm4gdGhpcy5fZmlsZW5hbWV9Z2V0IGNvbnRlbnRMZW5ndGgoKXtyZXR1cm4gdGhpcy5fY29udGVudExlbmd0aH1nZXQgaXNSYW5nZVN1cHBvcnRlZCgpe3JldHVybiB0aGlzLl9pc1JhbmdlU3VwcG9ydGVkfWdldCBpc1N0cmVhbWluZ1N1cHBvcnRlZCgpe3JldHVybiB0aGlzLl9pc1N0cmVhbWluZ1N1cHBvcnRlZH1hc3luYyByZWFkKCl7YXdhaXQgdGhpcy5faGVhZGVyc0NhcGFiaWxpdHkucHJvbWlzZTtjb25zdHt2YWx1ZTp0LGRvbmU6ZX09YXdhaXQgdGhpcy5fcmVhZGVyLnJlYWQoKTtpZihlKXJldHVybnt2YWx1ZTp0LGRvbmU6ZX07dGhpcy5fbG9hZGVkKz10LmJ5dGVMZW5ndGg7dGhpcy5vblByb2dyZXNzPy4oe2xvYWRlZDp0aGlzLl9sb2FkZWQsdG90YWw6dGhpcy5fY29udGVudExlbmd0aH0pO3JldHVybnt2YWx1ZTpnZXRBcnJheUJ1ZmZlcih0KSxkb25lOiExfX1jYW5jZWwodCl7dGhpcy5fcmVhZGVyPy5jYW5jZWwodCk7dGhpcy5fYWJvcnRDb250cm9sbGVyLmFib3J0KCl9fWNsYXNzIFBERkZldGNoU3RyZWFtUmFuZ2VSZWFkZXJ7Y29uc3RydWN0b3IodCxlLHMpe3RoaXMuX3N0cmVhbT10O3RoaXMuX3JlYWRlcj1udWxsO3RoaXMuX2xvYWRlZD0wO2NvbnN0IGE9dC5zb3VyY2U7dGhpcy5fd2l0aENyZWRlbnRpYWxzPWEud2l0aENyZWRlbnRpYWxzfHwhMTt0aGlzLl9yZWFkQ2FwYWJpbGl0eT1uZXcgaS5Qcm9taXNlQ2FwYWJpbGl0eTt0aGlzLl9pc1N0cmVhbWluZ1N1cHBvcnRlZD0hYS5kaXNhYmxlU3RyZWFtO3RoaXMuX2Fib3J0Q29udHJvbGxlcj1uZXcgQWJvcnRDb250cm9sbGVyO3RoaXMuX2hlYWRlcnM9Y3JlYXRlSGVhZGVycyh0aGlzLl9zdHJlYW0uaHR0cEhlYWRlcnMpO3RoaXMuX2hlYWRlcnMuYXBwZW5kKCJSYW5nZSIsYGJ5dGVzPSR7ZX0tJHtzLTF9YCk7Y29uc3Qgcj1hLnVybDtmZXRjaChyLGNyZWF0ZUZldGNoT3B0aW9ucyh0aGlzLl9oZWFkZXJzLHRoaXMuX3dpdGhDcmVkZW50aWFscyx0aGlzLl9hYm9ydENvbnRyb2xsZXIpKS50aGVuKCh0PT57aWYoISgwLG4udmFsaWRhdGVSZXNwb25zZVN0YXR1cykodC5zdGF0dXMpKXRocm93KDAsbi5jcmVhdGVSZXNwb25zZVN0YXR1c0Vycm9yKSh0LnN0YXR1cyxyKTt0aGlzLl9yZWFkQ2FwYWJpbGl0eS5yZXNvbHZlKCk7dGhpcy5fcmVhZGVyPXQuYm9keS5nZXRSZWFkZXIoKX0pKS5jYXRjaCh0aGlzLl9yZWFkQ2FwYWJpbGl0eS5yZWplY3QpO3RoaXMub25Qcm9ncmVzcz1udWxsfWdldCBpc1N0cmVhbWluZ1N1cHBvcnRlZCgpe3JldHVybiB0aGlzLl9pc1N0cmVhbWluZ1N1cHBvcnRlZH1hc3luYyByZWFkKCl7YXdhaXQgdGhpcy5fcmVhZENhcGFiaWxpdHkucHJvbWlzZTtjb25zdHt2YWx1ZTp0LGRvbmU6ZX09YXdhaXQgdGhpcy5fcmVhZGVyLnJlYWQoKTtpZihlKXJldHVybnt2YWx1ZTp0LGRvbmU6ZX07dGhpcy5fbG9hZGVkKz10LmJ5dGVMZW5ndGg7dGhpcy5vblByb2dyZXNzPy4oe2xvYWRlZDp0aGlzLl9sb2FkZWR9KTtyZXR1cm57dmFsdWU6Z2V0QXJyYXlCdWZmZXIodCksZG9uZTohMX19Y2FuY2VsKHQpe3RoaXMuX3JlYWRlcj8uY2FuY2VsKHQpO3RoaXMuX2Fib3J0Q29udHJvbGxlci5hYm9ydCgpfX19LCh0LGUscyk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7ZS5UZXh0TGF5ZXJSZW5kZXJUYXNrPXZvaWQgMDtlLnJlbmRlclRleHRMYXllcj1mdW5jdGlvbiByZW5kZXJUZXh0TGF5ZXIodCl7aWYoIXQudGV4dENvbnRlbnRTb3VyY2UmJih0LnRleHRDb250ZW50fHx0LnRleHRDb250ZW50U3RyZWFtKSl7KDAsbi5kZXByZWNhdGVkKSgiVGhlIFRleHRMYXllclJlbmRlciBgdGV4dENvbnRlbnRgL2B0ZXh0Q29udGVudFN0cmVhbWAgcGFyYW1ldGVycyB3aWxsIGJlIHJlbW92ZWQgaW4gdGhlIGZ1dHVyZSwgcGxlYXNlIHVzZSBgdGV4dENvbnRlbnRTb3VyY2VgIGluc3RlYWQuIik7dC50ZXh0Q29udGVudFNvdXJjZT10LnRleHRDb250ZW50fHx0LnRleHRDb250ZW50U3RyZWFtfWNvbnN0e2NvbnRhaW5lcjplLHZpZXdwb3J0OnN9PXQsaT1nZXRDb21wdXRlZFN0eWxlKGUpLGE9aS5nZXRQcm9wZXJ0eVZhbHVlKCJ2aXNpYmlsaXR5Iikscj1wYXJzZUZsb2F0KGkuZ2V0UHJvcGVydHlWYWx1ZSgiLS1zY2FsZS1mYWN0b3IiKSk7InZpc2libGUiPT09YSYmKCFyfHxNYXRoLmFicyhyLXMuc2NhbGUpPjFlLTUpJiZjb25zb2xlLmVycm9yKCJUaGUgYC0tc2NhbGUtZmFjdG9yYCBDU1MtdmFyaWFibGUgbXVzdCBiZSBzZXQsIHRvIHRoZSBzYW1lIHZhbHVlIGFzIGB2aWV3cG9ydC5zY2FsZWAsIGVpdGhlciBvbiB0aGUgYGNvbnRhaW5lcmAtZWxlbWVudCBpdHNlbGYgb3IgaGlnaGVyIHVwIGluIHRoZSBET00uIik7Y29uc3Qgbz1uZXcgVGV4dExheWVyUmVuZGVyVGFzayh0KTtvLl9yZW5kZXIoKTtyZXR1cm4gb307ZS51cGRhdGVUZXh0TGF5ZXI9ZnVuY3Rpb24gdXBkYXRlVGV4dExheWVyKHtjb250YWluZXI6dCx2aWV3cG9ydDplLHRleHREaXZzOnMsdGV4dERpdlByb3BlcnRpZXM6aSxpc09mZnNjcmVlbkNhbnZhc1N1cHBvcnRlZDphLG11c3RSb3RhdGU6cj0hMCxtdXN0UmVzY2FsZTpvPSEwfSl7ciYmKDAsbi5zZXRMYXllckRpbWVuc2lvbnMpKHQse3JvdGF0aW9uOmUucm90YXRpb259KTtpZihvKXtjb25zdCB0PWdldEN0eCgwLGEpLG49e3ByZXZGb250U2l6ZTpudWxsLHByZXZGb250RmFtaWx5Om51bGwsZGl2Om51bGwsc2NhbGU6ZS5zY2FsZSooZ2xvYmFsVGhpcy5kZXZpY2VQaXhlbFJhdGlvfHwxKSxwcm9wZXJ0aWVzOm51bGwsY3R4OnR9O2Zvcihjb25zdCB0IG9mIHMpe24ucHJvcGVydGllcz1pLmdldCh0KTtuLmRpdj10O2xheW91dChuKX19fTt2YXIgaT1zKDEpLG49cyg2KTtjb25zdCBhPTMwLHI9Ljgsbz1uZXcgTWFwO2Z1bmN0aW9uIGdldEN0eCh0LGUpe2xldCBzO2lmKGUmJmkuRmVhdHVyZVRlc3QuaXNPZmZzY3JlZW5DYW52YXNTdXBwb3J0ZWQpcz1uZXcgT2Zmc2NyZWVuQ2FudmFzKHQsdCkuZ2V0Q29udGV4dCgiMmQiLHthbHBoYTohMX0pO2Vsc2V7Y29uc3QgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJjYW52YXMiKTtlLndpZHRoPWUuaGVpZ2h0PXQ7cz1lLmdldENvbnRleHQoIjJkIix7YWxwaGE6ITF9KX1yZXR1cm4gc31mdW5jdGlvbiBhcHBlbmRUZXh0KHQsZSxzKXtjb25zdCBuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKSxsPXthbmdsZTowLGNhbnZhc1dpZHRoOjAsaGFzVGV4dDoiIiE9PWUuc3RyLGhhc0VPTDplLmhhc0VPTCxmb250U2l6ZTowfTt0Ll90ZXh0RGl2cy5wdXNoKG4pO2NvbnN0IGM9aS5VdGlsLnRyYW5zZm9ybSh0Ll90cmFuc2Zvcm0sZS50cmFuc2Zvcm0pO2xldCBoPU1hdGguYXRhbjIoY1sxXSxjWzBdKTtjb25zdCBkPXNbZS5mb250TmFtZV07ZC52ZXJ0aWNhbCYmKGgrPU1hdGguUEkvMik7Y29uc3QgdT1NYXRoLmh5cG90KGNbMl0sY1szXSkscD11KmZ1bmN0aW9uIGdldEFzY2VudCh0LGUpe2NvbnN0IHM9by5nZXQodCk7aWYocylyZXR1cm4gcztjb25zdCBpPWdldEN0eChhLGUpO2kuZm9udD1gJHthfXB4ICR7dH1gO2NvbnN0IG49aS5tZWFzdXJlVGV4dCgiIik7bGV0IGw9bi5mb250Qm91bmRpbmdCb3hBc2NlbnQsYz1NYXRoLmFicyhuLmZvbnRCb3VuZGluZ0JveERlc2NlbnQpO2lmKGwpe2NvbnN0IGU9bC8obCtjKTtvLnNldCh0LGUpO2kuY2FudmFzLndpZHRoPWkuY2FudmFzLmhlaWdodD0wO3JldHVybiBlfWkuc3Ryb2tlU3R5bGU9InJlZCI7aS5jbGVhclJlY3QoMCwwLGEsYSk7aS5zdHJva2VUZXh0KCJnIiwwLDApO2xldCBoPWkuZ2V0SW1hZ2VEYXRhKDAsMCxhLGEpLmRhdGE7Yz0wO2ZvcihsZXQgdD1oLmxlbmd0aC0xLTM7dD49MDt0LT00KWlmKGhbdF0+MCl7Yz1NYXRoLmNlaWwodC80L2EpO2JyZWFrfWkuY2xlYXJSZWN0KDAsMCxhLGEpO2kuc3Ryb2tlVGV4dCgiQSIsMCxhKTtoPWkuZ2V0SW1hZ2VEYXRhKDAsMCxhLGEpLmRhdGE7bD0wO2ZvcihsZXQgdD0wLGU9aC5sZW5ndGg7dDxlO3QrPTQpaWYoaFt0XT4wKXtsPWEtTWF0aC5mbG9vcih0LzQvYSk7YnJlYWt9aS5jYW52YXMud2lkdGg9aS5jYW52YXMuaGVpZ2h0PTA7aWYobCl7Y29uc3QgZT1sLyhsK2MpO28uc2V0KHQsZSk7cmV0dXJuIGV9by5zZXQodCxyKTtyZXR1cm4gcn0oZC5mb250RmFtaWx5LHQuX2lzT2Zmc2NyZWVuQ2FudmFzU3VwcG9ydGVkKTtsZXQgZixnO2lmKDA9PT1oKXtmPWNbNF07Zz1jWzVdLXB9ZWxzZXtmPWNbNF0rcCpNYXRoLnNpbihoKTtnPWNbNV0tcCpNYXRoLmNvcyhoKX1jb25zdCBtPSJjYWxjKHZhcigtLXNjYWxlLWZhY3RvcikqIixiPW4uc3R5bGU7aWYodC5fY29udGFpbmVyPT09dC5fcm9vdENvbnRhaW5lcil7Yi5sZWZ0PWAkeygxMDAqZi90Ll9wYWdlV2lkdGgpLnRvRml4ZWQoMil9JWA7Yi50b3A9YCR7KDEwMCpnL3QuX3BhZ2VIZWlnaHQpLnRvRml4ZWQoMil9JWB9ZWxzZXtiLmxlZnQ9YCR7bX0ke2YudG9GaXhlZCgyKX1weClgO2IudG9wPWAke219JHtnLnRvRml4ZWQoMil9cHgpYH1iLmZvbnRTaXplPWAke219JHt1LnRvRml4ZWQoMil9cHgpYDtiLmZvbnRGYW1pbHk9ZC5mb250RmFtaWx5O2wuZm9udFNpemU9dTtuLnNldEF0dHJpYnV0ZSgicm9sZSIsInByZXNlbnRhdGlvbiIpO24udGV4dENvbnRlbnQ9ZS5zdHI7bi5kaXI9ZS5kaXI7dC5fZm9udEluc3BlY3RvckVuYWJsZWQmJihuLmRhdGFzZXQuZm9udE5hbWU9ZS5mb250TmFtZSk7MCE9PWgmJihsLmFuZ2xlPWgqKDE4MC9NYXRoLlBJKSk7bGV0IEE9ITE7aWYoZS5zdHIubGVuZ3RoPjEpQT0hMDtlbHNlIGlmKCIgIiE9PWUuc3RyJiZlLnRyYW5zZm9ybVswXSE9PWUudHJhbnNmb3JtWzNdKXtjb25zdCB0PU1hdGguYWJzKGUudHJhbnNmb3JtWzBdKSxzPU1hdGguYWJzKGUudHJhbnNmb3JtWzNdKTt0IT09cyYmTWF0aC5tYXgodCxzKS9NYXRoLm1pbih0LHMpPjEuNSYmKEE9ITApfUEmJihsLmNhbnZhc1dpZHRoPWQudmVydGljYWw/ZS5oZWlnaHQ6ZS53aWR0aCk7dC5fdGV4dERpdlByb3BlcnRpZXMuc2V0KG4sbCk7dC5faXNSZWFkYWJsZVN0cmVhbSYmdC5fbGF5b3V0VGV4dChuKX1mdW5jdGlvbiBsYXlvdXQodCl7Y29uc3R7ZGl2OmUsc2NhbGU6cyxwcm9wZXJ0aWVzOmksY3R4Om4scHJldkZvbnRTaXplOmEscHJldkZvbnRGYW1pbHk6cn09dCx7c3R5bGU6b309ZTtsZXQgbD0iIjtpZigwIT09aS5jYW52YXNXaWR0aCYmaS5oYXNUZXh0KXtjb25zdHtmb250RmFtaWx5OmN9PW8se2NhbnZhc1dpZHRoOmgsZm9udFNpemU6ZH09aTtpZihhIT09ZHx8ciE9PWMpe24uZm9udD1gJHtkKnN9cHggJHtjfWA7dC5wcmV2Rm9udFNpemU9ZDt0LnByZXZGb250RmFtaWx5PWN9Y29uc3R7d2lkdGg6dX09bi5tZWFzdXJlVGV4dChlLnRleHRDb250ZW50KTt1PjAmJihsPWBzY2FsZVgoJHtoKnMvdX0pYCl9MCE9PWkuYW5nbGUmJihsPWByb3RhdGUoJHtpLmFuZ2xlfWRlZykgJHtsfWApO2wubGVuZ3RoPjAmJihvLnRyYW5zZm9ybT1sKX1jbGFzcyBUZXh0TGF5ZXJSZW5kZXJUYXNre2NvbnN0cnVjdG9yKHt0ZXh0Q29udGVudFNvdXJjZTp0LGNvbnRhaW5lcjplLHZpZXdwb3J0OnMsdGV4dERpdnM6YSx0ZXh0RGl2UHJvcGVydGllczpyLHRleHRDb250ZW50SXRlbXNTdHI6byxpc09mZnNjcmVlbkNhbnZhc1N1cHBvcnRlZDpsfSl7dGhpcy5fdGV4dENvbnRlbnRTb3VyY2U9dDt0aGlzLl9pc1JlYWRhYmxlU3RyZWFtPXQgaW5zdGFuY2VvZiBSZWFkYWJsZVN0cmVhbTt0aGlzLl9jb250YWluZXI9dGhpcy5fcm9vdENvbnRhaW5lcj1lO3RoaXMuX3RleHREaXZzPWF8fFtdO3RoaXMuX3RleHRDb250ZW50SXRlbXNTdHI9b3x8W107dGhpcy5faXNPZmZzY3JlZW5DYW52YXNTdXBwb3J0ZWQ9bDt0aGlzLl9mb250SW5zcGVjdG9yRW5hYmxlZD0hIWdsb2JhbFRoaXMuRm9udEluc3BlY3Rvcj8uZW5hYmxlZDt0aGlzLl9yZWFkZXI9bnVsbDt0aGlzLl90ZXh0RGl2UHJvcGVydGllcz1yfHxuZXcgV2Vha01hcDt0aGlzLl9jYW5jZWxlZD0hMTt0aGlzLl9jYXBhYmlsaXR5PW5ldyBpLlByb21pc2VDYXBhYmlsaXR5O3RoaXMuX2xheW91dFRleHRQYXJhbXM9e3ByZXZGb250U2l6ZTpudWxsLHByZXZGb250RmFtaWx5Om51bGwsZGl2Om51bGwsc2NhbGU6cy5zY2FsZSooZ2xvYmFsVGhpcy5kZXZpY2VQaXhlbFJhdGlvfHwxKSxwcm9wZXJ0aWVzOm51bGwsY3R4OmdldEN0eCgwLGwpfTtjb25zdHtwYWdlV2lkdGg6YyxwYWdlSGVpZ2h0OmgscGFnZVg6ZCxwYWdlWTp1fT1zLnJhd0RpbXM7dGhpcy5fdHJhbnNmb3JtPVsxLDAsMCwtMSwtZCx1K2hdO3RoaXMuX3BhZ2VXaWR0aD1jO3RoaXMuX3BhZ2VIZWlnaHQ9aDsoMCxuLnNldExheWVyRGltZW5zaW9ucykoZSxzKTt0aGlzLl9jYXBhYmlsaXR5LnByb21pc2UuZmluYWxseSgoKCk9Pnt0aGlzLl9sYXlvdXRUZXh0UGFyYW1zPW51bGx9KSkuY2F0Y2goKCgpPT57fSkpfWdldCBwcm9taXNlKCl7cmV0dXJuIHRoaXMuX2NhcGFiaWxpdHkucHJvbWlzZX1jYW5jZWwoKXt0aGlzLl9jYW5jZWxlZD0hMDtpZih0aGlzLl9yZWFkZXIpe3RoaXMuX3JlYWRlci5jYW5jZWwobmV3IGkuQWJvcnRFeGNlcHRpb24oIlRleHRMYXllciB0YXNrIGNhbmNlbGxlZC4iKSkuY2F0Y2goKCgpPT57fSkpO3RoaXMuX3JlYWRlcj1udWxsfXRoaXMuX2NhcGFiaWxpdHkucmVqZWN0KG5ldyBpLkFib3J0RXhjZXB0aW9uKCJUZXh0TGF5ZXIgdGFzayBjYW5jZWxsZWQuIikpfV9wcm9jZXNzSXRlbXModCxlKXtmb3IoY29uc3QgcyBvZiB0KWlmKHZvaWQgMCE9PXMuc3RyKXt0aGlzLl90ZXh0Q29udGVudEl0ZW1zU3RyLnB1c2gocy5zdHIpO2FwcGVuZFRleHQodGhpcyxzLGUpfWVsc2UgaWYoImJlZ2luTWFya2VkQ29udGVudFByb3BzIj09PXMudHlwZXx8ImJlZ2luTWFya2VkQ29udGVudCI9PT1zLnR5cGUpe2NvbnN0IHQ9dGhpcy5fY29udGFpbmVyO3RoaXMuX2NvbnRhaW5lcj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIik7dGhpcy5fY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoIm1hcmtlZENvbnRlbnQiKTtudWxsIT09cy5pZCYmdGhpcy5fY29udGFpbmVyLnNldEF0dHJpYnV0ZSgiaWQiLGAke3MuaWR9YCk7dC5hcHBlbmQodGhpcy5fY29udGFpbmVyKX1lbHNlImVuZE1hcmtlZENvbnRlbnQiPT09cy50eXBlJiYodGhpcy5fY29udGFpbmVyPXRoaXMuX2NvbnRhaW5lci5wYXJlbnROb2RlKX1fbGF5b3V0VGV4dCh0KXtjb25zdCBlPXRoaXMuX2xheW91dFRleHRQYXJhbXMucHJvcGVydGllcz10aGlzLl90ZXh0RGl2UHJvcGVydGllcy5nZXQodCk7dGhpcy5fbGF5b3V0VGV4dFBhcmFtcy5kaXY9dDtsYXlvdXQodGhpcy5fbGF5b3V0VGV4dFBhcmFtcyk7ZS5oYXNUZXh0JiZ0aGlzLl9jb250YWluZXIuYXBwZW5kKHQpO2lmKGUuaGFzRU9MKXtjb25zdCB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImJyIik7dC5zZXRBdHRyaWJ1dGUoInJvbGUiLCJwcmVzZW50YXRpb24iKTt0aGlzLl9jb250YWluZXIuYXBwZW5kKHQpfX1fcmVuZGVyKCl7Y29uc3QgdD1uZXcgaS5Qcm9taXNlQ2FwYWJpbGl0eTtsZXQgZT1PYmplY3QuY3JlYXRlKG51bGwpO2lmKHRoaXMuX2lzUmVhZGFibGVTdHJlYW0pe2NvbnN0IHB1bXA9KCk9Pnt0aGlzLl9yZWFkZXIucmVhZCgpLnRoZW4oKCh7dmFsdWU6cyxkb25lOml9KT0+e2lmKGkpdC5yZXNvbHZlKCk7ZWxzZXtPYmplY3QuYXNzaWduKGUscy5zdHlsZXMpO3RoaXMuX3Byb2Nlc3NJdGVtcyhzLml0ZW1zLGUpO3B1bXAoKX19KSx0LnJlamVjdCl9O3RoaXMuX3JlYWRlcj10aGlzLl90ZXh0Q29udGVudFNvdXJjZS5nZXRSZWFkZXIoKTtwdW1wKCl9ZWxzZXtpZighdGhpcy5fdGV4dENvbnRlbnRTb3VyY2UpdGhyb3cgbmV3IEVycm9yKCdObyAidGV4dENvbnRlbnRTb3VyY2UiIHBhcmFtZXRlciBzcGVjaWZpZWQuJyk7e2NvbnN0e2l0ZW1zOmUsc3R5bGVzOnN9PXRoaXMuX3RleHRDb250ZW50U291cmNlO3RoaXMuX3Byb2Nlc3NJdGVtcyhlLHMpO3QucmVzb2x2ZSgpfX10LnByb21pc2UudGhlbigoKCk9PntlPW51bGw7IWZ1bmN0aW9uIHJlbmRlcih0KXtpZih0Ll9jYW5jZWxlZClyZXR1cm47Y29uc3QgZT10Ll90ZXh0RGl2cyxzPXQuX2NhcGFiaWxpdHk7aWYoZS5sZW5ndGg+MWU1KXMucmVzb2x2ZSgpO2Vsc2V7aWYoIXQuX2lzUmVhZGFibGVTdHJlYW0pZm9yKGNvbnN0IHMgb2YgZSl0Ll9sYXlvdXRUZXh0KHMpO3MucmVzb2x2ZSgpfX0odGhpcyl9KSx0aGlzLl9jYXBhYmlsaXR5LnJlamVjdCl9fWUuVGV4dExheWVyUmVuZGVyVGFzaz1UZXh0TGF5ZXJSZW5kZXJUYXNrfSwodCxlLHMpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO2UuQW5ub3RhdGlvbkVkaXRvckxheWVyPXZvaWQgMDt2YXIgaT1zKDEpLG49cyg1KSxhPXMoMjgpLHI9cygyOSksbz1zKDYpO2NsYXNzIEFubm90YXRpb25FZGl0b3JMYXllcnsjTHQ7I050PSExOyNCdD10aGlzLnBvaW50ZXJ1cC5iaW5kKHRoaXMpOyNqdD10aGlzLnBvaW50ZXJkb3duLmJpbmQodGhpcyk7I1V0PW5ldyBNYXA7I3F0PSExOyNXdD0hMTsjR3Q7c3RhdGljIF9pbml0aWFsaXplZD0hMTtjb25zdHJ1Y3Rvcih0KXtpZighQW5ub3RhdGlvbkVkaXRvckxheWVyLl9pbml0aWFsaXplZCl7QW5ub3RhdGlvbkVkaXRvckxheWVyLl9pbml0aWFsaXplZD0hMDthLkZyZWVUZXh0RWRpdG9yLmluaXRpYWxpemUodC5sMTBuKTtyLklua0VkaXRvci5pbml0aWFsaXplKHQubDEwbil9dC51aU1hbmFnZXIucmVnaXN0ZXJFZGl0b3JUeXBlcyhbYS5GcmVlVGV4dEVkaXRvcixyLklua0VkaXRvcl0pO3RoaXMuI0d0PXQudWlNYW5hZ2VyO3RoaXMucGFnZUluZGV4PXQucGFnZUluZGV4O3RoaXMuZGl2PXQuZGl2O3RoaXMuI0x0PXQuYWNjZXNzaWJpbGl0eU1hbmFnZXI7dGhpcy4jR3QuYWRkTGF5ZXIodGhpcyl9Z2V0IGlzRW1wdHkoKXtyZXR1cm4gMD09PXRoaXMuI1V0LnNpemV9dXBkYXRlVG9vbGJhcih0KXt0aGlzLiNHdC51cGRhdGVUb29sYmFyKHQpfXVwZGF0ZU1vZGUodD10aGlzLiNHdC5nZXRNb2RlKCkpe3RoaXMuI0h0KCk7aWYodD09PWkuQW5ub3RhdGlvbkVkaXRvclR5cGUuSU5LKXt0aGlzLmFkZElua0VkaXRvcklmTmVlZGVkKCExKTt0aGlzLmRpc2FibGVDbGljaygpfWVsc2UgdGhpcy5lbmFibGVDbGljaygpO3RoaXMuI0d0LnVuc2VsZWN0QWxsKCk7aWYodCE9PWkuQW5ub3RhdGlvbkVkaXRvclR5cGUuTk9ORSl7dGhpcy5kaXYuY2xhc3NMaXN0LnRvZ2dsZSgiZnJlZVRleHRFZGl0aW5nIix0PT09aS5Bbm5vdGF0aW9uRWRpdG9yVHlwZS5GUkVFVEVYVCk7dGhpcy5kaXYuY2xhc3NMaXN0LnRvZ2dsZSgiaW5rRWRpdGluZyIsdD09PWkuQW5ub3RhdGlvbkVkaXRvclR5cGUuSU5LKTt0aGlzLmRpdi5oaWRkZW49ITF9fWFkZElua0VkaXRvcklmTmVlZGVkKHQpe2lmKCF0JiZ0aGlzLiNHdC5nZXRNb2RlKCkhPT1pLkFubm90YXRpb25FZGl0b3JUeXBlLklOSylyZXR1cm47aWYoIXQpZm9yKGNvbnN0IHQgb2YgdGhpcy4jVXQudmFsdWVzKCkpaWYodC5pc0VtcHR5KCkpe3Quc2V0SW5CYWNrZ3JvdW5kKCk7cmV0dXJufXRoaXMuI1Z0KHtvZmZzZXRYOjAsb2Zmc2V0WTowfSkuc2V0SW5CYWNrZ3JvdW5kKCl9c2V0RWRpdGluZ1N0YXRlKHQpe3RoaXMuI0d0LnNldEVkaXRpbmdTdGF0ZSh0KX1hZGRDb21tYW5kcyh0KXt0aGlzLiNHdC5hZGRDb21tYW5kcyh0KX1lbmFibGUoKXt0aGlzLmRpdi5zdHlsZS5wb2ludGVyRXZlbnRzPSJhdXRvIjtmb3IoY29uc3QgdCBvZiB0aGlzLiNVdC52YWx1ZXMoKSl0LmVuYWJsZUVkaXRpbmcoKX1kaXNhYmxlKCl7dGhpcy5kaXYuc3R5bGUucG9pbnRlckV2ZW50cz0ibm9uZSI7Zm9yKGNvbnN0IHQgb2YgdGhpcy4jVXQudmFsdWVzKCkpdC5kaXNhYmxlRWRpdGluZygpO3RoaXMuI0h0KCk7dGhpcy5pc0VtcHR5JiYodGhpcy5kaXYuaGlkZGVuPSEwKX1zZXRBY3RpdmVFZGl0b3IodCl7dGhpcy4jR3QuZ2V0QWN0aXZlKCkhPT10JiZ0aGlzLiNHdC5zZXRBY3RpdmVFZGl0b3IodCl9ZW5hYmxlQ2xpY2soKXt0aGlzLmRpdi5hZGRFdmVudExpc3RlbmVyKCJwb2ludGVyZG93biIsdGhpcy4janQpO3RoaXMuZGl2LmFkZEV2ZW50TGlzdGVuZXIoInBvaW50ZXJ1cCIsdGhpcy4jQnQpfWRpc2FibGVDbGljaygpe3RoaXMuZGl2LnJlbW92ZUV2ZW50TGlzdGVuZXIoInBvaW50ZXJkb3duIix0aGlzLiNqdCk7dGhpcy5kaXYucmVtb3ZlRXZlbnRMaXN0ZW5lcigicG9pbnRlcnVwIix0aGlzLiNCdCl9YXR0YWNoKHQpe3RoaXMuI1V0LnNldCh0LmlkLHQpfWRldGFjaCh0KXt0aGlzLiNVdC5kZWxldGUodC5pZCk7dGhpcy4jTHQ/LnJlbW92ZVBvaW50ZXJJblRleHRMYXllcih0LmNvbnRlbnREaXYpfXJlbW92ZSh0KXt0aGlzLiNHdC5yZW1vdmVFZGl0b3IodCk7dGhpcy5kZXRhY2godCk7dC5kaXYuc3R5bGUuZGlzcGxheT0ibm9uZSI7c2V0VGltZW91dCgoKCk9Pnt0LmRpdi5zdHlsZS5kaXNwbGF5PSIiO3QuZGl2LnJlbW92ZSgpO3QuaXNBdHRhY2hlZFRvRE9NPSExO2RvY3VtZW50LmFjdGl2ZUVsZW1lbnQ9PT1kb2N1bWVudC5ib2R5JiZ0aGlzLiNHdC5mb2N1c01haW5Db250YWluZXIoKX0pLDApO3RoaXMuI1d0fHx0aGlzLmFkZElua0VkaXRvcklmTmVlZGVkKCExKX0jenQodCl7aWYodC5wYXJlbnQhPT10aGlzKXt0aGlzLmF0dGFjaCh0KTt0LnBhcmVudD8uZGV0YWNoKHQpO3Quc2V0UGFyZW50KHRoaXMpO2lmKHQuZGl2JiZ0LmlzQXR0YWNoZWRUb0RPTSl7dC5kaXYucmVtb3ZlKCk7dGhpcy5kaXYuYXBwZW5kKHQuZGl2KX19fWFkZCh0KXt0aGlzLiN6dCh0KTt0aGlzLiNHdC5hZGRFZGl0b3IodCk7dGhpcy5hdHRhY2godCk7aWYoIXQuaXNBdHRhY2hlZFRvRE9NKXtjb25zdCBlPXQucmVuZGVyKCk7dGhpcy5kaXYuYXBwZW5kKGUpO3QuaXNBdHRhY2hlZFRvRE9NPSEwfXRoaXMubW92ZUVkaXRvckluRE9NKHQpO3Qub25jZUFkZGVkKCk7dGhpcy4jR3QuYWRkVG9Bbm5vdGF0aW9uU3RvcmFnZSh0KX1tb3ZlRWRpdG9ySW5ET00odCl7dGhpcy4jTHQ/Lm1vdmVFbGVtZW50SW5ET00odGhpcy5kaXYsdC5kaXYsdC5jb250ZW50RGl2LCEwKX1hZGRPclJlYnVpbGQodCl7dC5uZWVkc1RvQmVSZWJ1aWx0KCk/dC5yZWJ1aWxkKCk6dGhpcy5hZGQodCl9YWRkQU5ld0VkaXRvcih0KXt0aGlzLmFkZENvbW1hbmRzKHtjbWQ6KCk9Pnt0aGlzLmFkZE9yUmVidWlsZCh0KX0sdW5kbzooKT0+e3QucmVtb3ZlKCl9LG11c3RFeGVjOiEwfSl9YWRkVW5kb2FibGVFZGl0b3IodCl7dGhpcy5hZGRDb21tYW5kcyh7Y21kOigpPT57dGhpcy5hZGRPclJlYnVpbGQodCl9LHVuZG86KCk9Pnt0LnJlbW92ZSgpfSxtdXN0RXhlYzohMX0pfWdldE5leHRJZCgpe3JldHVybiB0aGlzLiNHdC5nZXRJZCgpfSNYdCh0KXtzd2l0Y2godGhpcy4jR3QuZ2V0TW9kZSgpKXtjYXNlIGkuQW5ub3RhdGlvbkVkaXRvclR5cGUuRlJFRVRFWFQ6cmV0dXJuIG5ldyBhLkZyZWVUZXh0RWRpdG9yKHQpO2Nhc2UgaS5Bbm5vdGF0aW9uRWRpdG9yVHlwZS5JTks6cmV0dXJuIG5ldyByLklua0VkaXRvcih0KX1yZXR1cm4gbnVsbH1kZXNlcmlhbGl6ZSh0KXtzd2l0Y2godC5hbm5vdGF0aW9uVHlwZSl7Y2FzZSBpLkFubm90YXRpb25FZGl0b3JUeXBlLkZSRUVURVhUOnJldHVybiBhLkZyZWVUZXh0RWRpdG9yLmRlc2VyaWFsaXplKHQsdGhpcyx0aGlzLiNHdCk7Y2FzZSBpLkFubm90YXRpb25FZGl0b3JUeXBlLklOSzpyZXR1cm4gci5JbmtFZGl0b3IuZGVzZXJpYWxpemUodCx0aGlzLHRoaXMuI0d0KX1yZXR1cm4gbnVsbH0jVnQodCl7Y29uc3QgZT10aGlzLmdldE5leHRJZCgpLHM9dGhpcy4jWHQoe3BhcmVudDp0aGlzLGlkOmUseDp0Lm9mZnNldFgseTp0Lm9mZnNldFksdWlNYW5hZ2VyOnRoaXMuI0d0fSk7cyYmdGhpcy5hZGQocyk7cmV0dXJuIHN9c2V0U2VsZWN0ZWQodCl7dGhpcy4jR3Quc2V0U2VsZWN0ZWQodCl9dG9nZ2xlU2VsZWN0ZWQodCl7dGhpcy4jR3QudG9nZ2xlU2VsZWN0ZWQodCl9aXNTZWxlY3RlZCh0KXtyZXR1cm4gdGhpcy4jR3QuaXNTZWxlY3RlZCh0KX11bnNlbGVjdCh0KXt0aGlzLiNHdC51bnNlbGVjdCh0KX1wb2ludGVydXAodCl7Y29uc3R7aXNNYWM6ZX09aS5GZWF0dXJlVGVzdC5wbGF0Zm9ybTtpZighKDAhPT10LmJ1dHRvbnx8dC5jdHJsS2V5JiZlKSYmdC50YXJnZXQ9PT10aGlzLmRpdiYmdGhpcy4jcXQpe3RoaXMuI3F0PSExO3RoaXMuI050P3RoaXMuI1Z0KHQpOnRoaXMuI050PSEwfX1wb2ludGVyZG93bih0KXtjb25zdHtpc01hYzplfT1pLkZlYXR1cmVUZXN0LnBsYXRmb3JtO2lmKDAhPT10LmJ1dHRvbnx8dC5jdHJsS2V5JiZlKXJldHVybjtpZih0LnRhcmdldCE9PXRoaXMuZGl2KXJldHVybjt0aGlzLiNxdD0hMDtjb25zdCBzPXRoaXMuI0d0LmdldEFjdGl2ZSgpO3RoaXMuI050PSFzfHxzLmlzRW1wdHkoKX1kcm9wKHQpe2NvbnN0IGU9dC5kYXRhVHJhbnNmZXIuZ2V0RGF0YSgidGV4dC9wbGFpbiIpLHM9dGhpcy4jR3QuZ2V0RWRpdG9yKGUpO2lmKCFzKXJldHVybjt0LnByZXZlbnREZWZhdWx0KCk7dC5kYXRhVHJhbnNmZXIuZHJvcEVmZmVjdD0ibW92ZSI7dGhpcy4jenQocyk7Y29uc3QgaT10aGlzLmRpdi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxuPXQuY2xpZW50WC1pLngsYT10LmNsaWVudFktaS55O3MudHJhbnNsYXRlKG4tcy5zdGFydFgsYS1zLnN0YXJ0WSk7dGhpcy5tb3ZlRWRpdG9ySW5ET00ocyk7cy5kaXYuZm9jdXMoKX1kcmFnb3Zlcih0KXt0LnByZXZlbnREZWZhdWx0KCl9ZGVzdHJveSgpe3RoaXMuI0d0LmdldEFjdGl2ZSgpPy5wYXJlbnQ9PT10aGlzJiZ0aGlzLiNHdC5zZXRBY3RpdmVFZGl0b3IobnVsbCk7Zm9yKGNvbnN0IHQgb2YgdGhpcy4jVXQudmFsdWVzKCkpe3RoaXMuI0x0Py5yZW1vdmVQb2ludGVySW5UZXh0TGF5ZXIodC5jb250ZW50RGl2KTt0LnNldFBhcmVudChudWxsKTt0LmlzQXR0YWNoZWRUb0RPTT0hMTt0LmRpdi5yZW1vdmUoKX10aGlzLmRpdj1udWxsO3RoaXMuI1V0LmNsZWFyKCk7dGhpcy4jR3QucmVtb3ZlTGF5ZXIodGhpcyl9I0h0KCl7dGhpcy4jV3Q9ITA7Zm9yKGNvbnN0IHQgb2YgdGhpcy4jVXQudmFsdWVzKCkpdC5pc0VtcHR5KCkmJnQucmVtb3ZlKCk7dGhpcy4jV3Q9ITF9cmVuZGVyKHt2aWV3cG9ydDp0fSl7dGhpcy52aWV3cG9ydD10OygwLG8uc2V0TGF5ZXJEaW1lbnNpb25zKSh0aGlzLmRpdix0KTsoMCxuLmJpbmRFdmVudHMpKHRoaXMsdGhpcy5kaXYsWyJkcmFnb3ZlciIsImRyb3AiXSk7Zm9yKGNvbnN0IHQgb2YgdGhpcy4jR3QuZ2V0RWRpdG9ycyh0aGlzLnBhZ2VJbmRleCkpdGhpcy5hZGQodCk7dGhpcy51cGRhdGVNb2RlKCl9dXBkYXRlKHt2aWV3cG9ydDp0fSl7dGhpcy4jR3QuY29tbWl0T3JSZW1vdmUoKTt0aGlzLnZpZXdwb3J0PXQ7KDAsby5zZXRMYXllckRpbWVuc2lvbnMpKHRoaXMuZGl2LHtyb3RhdGlvbjp0LnJvdGF0aW9ufSk7dGhpcy51cGRhdGVNb2RlKCl9Z2V0IHBhZ2VEaW1lbnNpb25zKCl7Y29uc3R7cGFnZVdpZHRoOnQscGFnZUhlaWdodDplfT10aGlzLnZpZXdwb3J0LnJhd0RpbXM7cmV0dXJuW3QsZV19fWUuQW5ub3RhdGlvbkVkaXRvckxheWVyPUFubm90YXRpb25FZGl0b3JMYXllcn0sKHQsZSxzKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTtlLkZyZWVUZXh0RWRpdG9yPXZvaWQgMDt2YXIgaT1zKDEpLG49cyg1KSxhPXMoNCk7Y2xhc3MgRnJlZVRleHRFZGl0b3IgZXh0ZW5kcyBhLkFubm90YXRpb25FZGl0b3J7IyR0PXRoaXMuZWRpdG9yRGl2Qmx1ci5iaW5kKHRoaXMpOyNLdD10aGlzLmVkaXRvckRpdkZvY3VzLmJpbmQodGhpcyk7I1l0PXRoaXMuZWRpdG9yRGl2SW5wdXQuYmluZCh0aGlzKTsjSnQ9dGhpcy5lZGl0b3JEaXZLZXlkb3duLmJpbmQodGhpcyk7I1F0OyNadD0iIjsjdGU9YCR7dGhpcy5pZH0tZWRpdG9yYDsjZWU9ITE7I3NlO3N0YXRpYyBfZnJlZVRleHREZWZhdWx0Q29udGVudD0iIjtzdGF0aWMgX2wxMG5Qcm9taXNlO3N0YXRpYyBfaW50ZXJuYWxQYWRkaW5nPTA7c3RhdGljIF9kZWZhdWx0Q29sb3I9bnVsbDtzdGF0aWMgX2RlZmF1bHRGb250U2l6ZT0xMDtzdGF0aWMgX2tleWJvYXJkTWFuYWdlcj1uZXcgbi5LZXlib2FyZE1hbmFnZXIoW1tbImN0cmwrRW50ZXIiLCJtYWMrbWV0YStFbnRlciIsIkVzY2FwZSIsIm1hYytFc2NhcGUiXSxGcmVlVGV4dEVkaXRvci5wcm90b3R5cGUuY29tbWl0T3JSZW1vdmVdXSk7c3RhdGljIF90eXBlPSJmcmVldGV4dCI7Y29uc3RydWN0b3IodCl7c3VwZXIoey4uLnQsbmFtZToiZnJlZVRleHRFZGl0b3IifSk7dGhpcy4jUXQ9dC5jb2xvcnx8RnJlZVRleHRFZGl0b3IuX2RlZmF1bHRDb2xvcnx8YS5Bbm5vdGF0aW9uRWRpdG9yLl9kZWZhdWx0TGluZUNvbG9yO3RoaXMuI3NlPXQuZm9udFNpemV8fEZyZWVUZXh0RWRpdG9yLl9kZWZhdWx0Rm9udFNpemV9c3RhdGljIGluaXRpYWxpemUodCl7dGhpcy5fbDEwblByb21pc2U9bmV3IE1hcChbImZyZWVfdGV4dDJfZGVmYXVsdF9jb250ZW50IiwiZWRpdG9yX2ZyZWVfdGV4dDJfYXJpYV9sYWJlbCJdLm1hcCgoZT0+W2UsdC5nZXQoZSldKSkpO2NvbnN0IGU9Z2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpO3RoaXMuX2ludGVybmFsUGFkZGluZz1wYXJzZUZsb2F0KGUuZ2V0UHJvcGVydHlWYWx1ZSgiLS1mcmVldGV4dC1wYWRkaW5nIikpfXN0YXRpYyB1cGRhdGVEZWZhdWx0UGFyYW1zKHQsZSl7c3dpdGNoKHQpe2Nhc2UgaS5Bbm5vdGF0aW9uRWRpdG9yUGFyYW1zVHlwZS5GUkVFVEVYVF9TSVpFOkZyZWVUZXh0RWRpdG9yLl9kZWZhdWx0Rm9udFNpemU9ZTticmVhaztjYXNlIGkuQW5ub3RhdGlvbkVkaXRvclBhcmFtc1R5cGUuRlJFRVRFWFRfQ09MT1I6RnJlZVRleHRFZGl0b3IuX2RlZmF1bHRDb2xvcj1lfX11cGRhdGVQYXJhbXModCxlKXtzd2l0Y2godCl7Y2FzZSBpLkFubm90YXRpb25FZGl0b3JQYXJhbXNUeXBlLkZSRUVURVhUX1NJWkU6dGhpcy4jaWUoZSk7YnJlYWs7Y2FzZSBpLkFubm90YXRpb25FZGl0b3JQYXJhbXNUeXBlLkZSRUVURVhUX0NPTE9SOnRoaXMuI25lKGUpfX1zdGF0aWMgZ2V0IGRlZmF1bHRQcm9wZXJ0aWVzVG9VcGRhdGUoKXtyZXR1cm5bW2kuQW5ub3RhdGlvbkVkaXRvclBhcmFtc1R5cGUuRlJFRVRFWFRfU0laRSxGcmVlVGV4dEVkaXRvci5fZGVmYXVsdEZvbnRTaXplXSxbaS5Bbm5vdGF0aW9uRWRpdG9yUGFyYW1zVHlwZS5GUkVFVEVYVF9DT0xPUixGcmVlVGV4dEVkaXRvci5fZGVmYXVsdENvbG9yfHxhLkFubm90YXRpb25FZGl0b3IuX2RlZmF1bHRMaW5lQ29sb3JdXX1nZXQgcHJvcGVydGllc1RvVXBkYXRlKCl7cmV0dXJuW1tpLkFubm90YXRpb25FZGl0b3JQYXJhbXNUeXBlLkZSRUVURVhUX1NJWkUsdGhpcy4jc2VdLFtpLkFubm90YXRpb25FZGl0b3JQYXJhbXNUeXBlLkZSRUVURVhUX0NPTE9SLHRoaXMuI1F0XV19I2llKHQpe2NvbnN0IHNldEZvbnRzaXplPXQ9Pnt0aGlzLmVkaXRvckRpdi5zdHlsZS5mb250U2l6ZT1gY2FsYygke3R9cHggKiB2YXIoLS1zY2FsZS1mYWN0b3IpKWA7dGhpcy50cmFuc2xhdGUoMCwtKHQtdGhpcy4jc2UpKnRoaXMucGFyZW50U2NhbGUpO3RoaXMuI3NlPXQ7dGhpcy4jYWUoKX0sZT10aGlzLiNzZTt0aGlzLmFkZENvbW1hbmRzKHtjbWQ6KCk9PntzZXRGb250c2l6ZSh0KX0sdW5kbzooKT0+e3NldEZvbnRzaXplKGUpfSxtdXN0RXhlYzohMCx0eXBlOmkuQW5ub3RhdGlvbkVkaXRvclBhcmFtc1R5cGUuRlJFRVRFWFRfU0laRSxvdmVyd3JpdGVJZlNhbWVUeXBlOiEwLGtlZXBVbmRvOiEwfSl9I25lKHQpe2NvbnN0IGU9dGhpcy4jUXQ7dGhpcy5hZGRDb21tYW5kcyh7Y21kOigpPT57dGhpcy4jUXQ9dGhpcy5lZGl0b3JEaXYuc3R5bGUuY29sb3I9dH0sdW5kbzooKT0+e3RoaXMuI1F0PXRoaXMuZWRpdG9yRGl2LnN0eWxlLmNvbG9yPWV9LG11c3RFeGVjOiEwLHR5cGU6aS5Bbm5vdGF0aW9uRWRpdG9yUGFyYW1zVHlwZS5GUkVFVEVYVF9DT0xPUixvdmVyd3JpdGVJZlNhbWVUeXBlOiEwLGtlZXBVbmRvOiEwfSl9Z2V0SW5pdGlhbFRyYW5zbGF0aW9uKCl7Y29uc3QgdD10aGlzLnBhcmVudFNjYWxlO3JldHVyblstRnJlZVRleHRFZGl0b3IuX2ludGVybmFsUGFkZGluZyp0LC0oRnJlZVRleHRFZGl0b3IuX2ludGVybmFsUGFkZGluZyt0aGlzLiNzZSkqdF19cmVidWlsZCgpe3N1cGVyLnJlYnVpbGQoKTtudWxsIT09dGhpcy5kaXYmJih0aGlzLmlzQXR0YWNoZWRUb0RPTXx8dGhpcy5wYXJlbnQuYWRkKHRoaXMpKX1lbmFibGVFZGl0TW9kZSgpe2lmKCF0aGlzLmlzSW5FZGl0TW9kZSgpKXt0aGlzLnBhcmVudC5zZXRFZGl0aW5nU3RhdGUoITEpO3RoaXMucGFyZW50LnVwZGF0ZVRvb2xiYXIoaS5Bbm5vdGF0aW9uRWRpdG9yVHlwZS5GUkVFVEVYVCk7c3VwZXIuZW5hYmxlRWRpdE1vZGUoKTt0aGlzLm92ZXJsYXlEaXYuY2xhc3NMaXN0LnJlbW92ZSgiZW5hYmxlZCIpO3RoaXMuZWRpdG9yRGl2LmNvbnRlbnRFZGl0YWJsZT0hMDt0aGlzLmRpdi5kcmFnZ2FibGU9ITE7dGhpcy5kaXYucmVtb3ZlQXR0cmlidXRlKCJhcmlhLWFjdGl2ZWRlc2NlbmRhbnQiKTt0aGlzLmVkaXRvckRpdi5hZGRFdmVudExpc3RlbmVyKCJrZXlkb3duIix0aGlzLiNKdCk7dGhpcy5lZGl0b3JEaXYuYWRkRXZlbnRMaXN0ZW5lcigiZm9jdXMiLHRoaXMuI0t0KTt0aGlzLmVkaXRvckRpdi5hZGRFdmVudExpc3RlbmVyKCJibHVyIix0aGlzLiMkdCk7dGhpcy5lZGl0b3JEaXYuYWRkRXZlbnRMaXN0ZW5lcigiaW5wdXQiLHRoaXMuI1l0KX19ZGlzYWJsZUVkaXRNb2RlKCl7aWYodGhpcy5pc0luRWRpdE1vZGUoKSl7dGhpcy5wYXJlbnQuc2V0RWRpdGluZ1N0YXRlKCEwKTtzdXBlci5kaXNhYmxlRWRpdE1vZGUoKTt0aGlzLm92ZXJsYXlEaXYuY2xhc3NMaXN0LmFkZCgiZW5hYmxlZCIpO3RoaXMuZWRpdG9yRGl2LmNvbnRlbnRFZGl0YWJsZT0hMTt0aGlzLmRpdi5zZXRBdHRyaWJ1dGUoImFyaWEtYWN0aXZlZGVzY2VuZGFudCIsdGhpcy4jdGUpO3RoaXMuZGl2LmRyYWdnYWJsZT0hMDt0aGlzLmVkaXRvckRpdi5yZW1vdmVFdmVudExpc3RlbmVyKCJrZXlkb3duIix0aGlzLiNKdCk7dGhpcy5lZGl0b3JEaXYucmVtb3ZlRXZlbnRMaXN0ZW5lcigiZm9jdXMiLHRoaXMuI0t0KTt0aGlzLmVkaXRvckRpdi5yZW1vdmVFdmVudExpc3RlbmVyKCJibHVyIix0aGlzLiMkdCk7dGhpcy5lZGl0b3JEaXYucmVtb3ZlRXZlbnRMaXN0ZW5lcigiaW5wdXQiLHRoaXMuI1l0KTt0aGlzLmRpdi5mb2N1cyh7cHJldmVudFNjcm9sbDohMH0pO3RoaXMuaXNFZGl0aW5nPSExO3RoaXMucGFyZW50LmRpdi5jbGFzc0xpc3QuYWRkKCJmcmVlVGV4dEVkaXRpbmciKX19Zm9jdXNpbih0KXtzdXBlci5mb2N1c2luKHQpO3QudGFyZ2V0IT09dGhpcy5lZGl0b3JEaXYmJnRoaXMuZWRpdG9yRGl2LmZvY3VzKCl9b25jZUFkZGVkKCl7aWYoIXRoaXMud2lkdGgpe3RoaXMuZW5hYmxlRWRpdE1vZGUoKTt0aGlzLmVkaXRvckRpdi5mb2N1cygpfX1pc0VtcHR5KCl7cmV0dXJuIXRoaXMuZWRpdG9yRGl2fHwiIj09PXRoaXMuZWRpdG9yRGl2LmlubmVyVGV4dC50cmltKCl9cmVtb3ZlKCl7dGhpcy5pc0VkaXRpbmc9ITE7dGhpcy5wYXJlbnQuc2V0RWRpdGluZ1N0YXRlKCEwKTt0aGlzLnBhcmVudC5kaXYuY2xhc3NMaXN0LmFkZCgiZnJlZVRleHRFZGl0aW5nIik7c3VwZXIucmVtb3ZlKCl9I3JlKCl7Y29uc3QgdD10aGlzLmVkaXRvckRpdi5nZXRFbGVtZW50c0J5VGFnTmFtZSgiZGl2Iik7aWYoMD09PXQubGVuZ3RoKXJldHVybiB0aGlzLmVkaXRvckRpdi5pbm5lclRleHQ7Y29uc3QgZT1bXTtmb3IoY29uc3QgcyBvZiB0KWUucHVzaChzLmlubmVyVGV4dC5yZXBsYWNlKC9cclxuP3xcbi8sIiIpKTtyZXR1cm4gZS5qb2luKCJcbiIpfSNhZSgpe2NvbnN0W3QsZV09dGhpcy5wYXJlbnREaW1lbnNpb25zO2xldCBzO2lmKHRoaXMuaXNBdHRhY2hlZFRvRE9NKXM9dGhpcy5kaXYuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7ZWxzZXtjb25zdHtjdXJyZW50TGF5ZXI6dCxkaXY6ZX09dGhpcyxpPWUuc3R5bGUuZGlzcGxheTtlLnN0eWxlLmRpc3BsYXk9ImhpZGRlbiI7dC5kaXYuYXBwZW5kKHRoaXMuZGl2KTtzPWUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7ZS5yZW1vdmUoKTtlLnN0eWxlLmRpc3BsYXk9aX10aGlzLndpZHRoPXMud2lkdGgvdDt0aGlzLmhlaWdodD1zLmhlaWdodC9lfWNvbW1pdCgpe2lmKHRoaXMuaXNJbkVkaXRNb2RlKCkpe3N1cGVyLmNvbW1pdCgpO2lmKCF0aGlzLiNlZSl7dGhpcy4jZWU9ITA7dGhpcy5wYXJlbnQuYWRkVW5kb2FibGVFZGl0b3IodGhpcyl9dGhpcy5kaXNhYmxlRWRpdE1vZGUoKTt0aGlzLiNadD10aGlzLiNyZSgpLnRyaW1FbmQoKTt0aGlzLiNhZSgpfX1zaG91bGRHZXRLZXlib2FyZEV2ZW50cygpe3JldHVybiB0aGlzLmlzSW5FZGl0TW9kZSgpfWRibGNsaWNrKHQpe3RoaXMuZW5hYmxlRWRpdE1vZGUoKTt0aGlzLmVkaXRvckRpdi5mb2N1cygpfWtleWRvd24odCl7aWYodC50YXJnZXQ9PT10aGlzLmRpdiYmIkVudGVyIj09PXQua2V5KXt0aGlzLmVuYWJsZUVkaXRNb2RlKCk7dGhpcy5lZGl0b3JEaXYuZm9jdXMoKX19ZWRpdG9yRGl2S2V5ZG93bih0KXtGcmVlVGV4dEVkaXRvci5fa2V5Ym9hcmRNYW5hZ2VyLmV4ZWModGhpcyx0KX1lZGl0b3JEaXZGb2N1cyh0KXt0aGlzLmlzRWRpdGluZz0hMH1lZGl0b3JEaXZCbHVyKHQpe3RoaXMuaXNFZGl0aW5nPSExfWVkaXRvckRpdklucHV0KHQpe3RoaXMucGFyZW50LmRpdi5jbGFzc0xpc3QudG9nZ2xlKCJmcmVlVGV4dEVkaXRpbmciLHRoaXMuaXNFbXB0eSgpKX1kaXNhYmxlRWRpdGluZygpe3RoaXMuZWRpdG9yRGl2LnNldEF0dHJpYnV0ZSgicm9sZSIsImNvbW1lbnQiKTt0aGlzLmVkaXRvckRpdi5yZW1vdmVBdHRyaWJ1dGUoImFyaWEtbXVsdGlsaW5lIil9ZW5hYmxlRWRpdGluZygpe3RoaXMuZWRpdG9yRGl2LnNldEF0dHJpYnV0ZSgicm9sZSIsInRleHRib3giKTt0aGlzLmVkaXRvckRpdi5zZXRBdHRyaWJ1dGUoImFyaWEtbXVsdGlsaW5lIiwhMCl9cmVuZGVyKCl7aWYodGhpcy5kaXYpcmV0dXJuIHRoaXMuZGl2O2xldCB0LGU7aWYodGhpcy53aWR0aCl7dD10aGlzLng7ZT10aGlzLnl9c3VwZXIucmVuZGVyKCk7dGhpcy5lZGl0b3JEaXY9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7dGhpcy5lZGl0b3JEaXYuY2xhc3NOYW1lPSJpbnRlcm5hbCI7dGhpcy5lZGl0b3JEaXYuc2V0QXR0cmlidXRlKCJpZCIsdGhpcy4jdGUpO3RoaXMuZW5hYmxlRWRpdGluZygpO0ZyZWVUZXh0RWRpdG9yLl9sMTBuUHJvbWlzZS5nZXQoImVkaXRvcl9mcmVlX3RleHQyX2FyaWFfbGFiZWwiKS50aGVuKCh0PT50aGlzLmVkaXRvckRpdj8uc2V0QXR0cmlidXRlKCJhcmlhLWxhYmVsIix0KSkpO0ZyZWVUZXh0RWRpdG9yLl9sMTBuUHJvbWlzZS5nZXQoImZyZWVfdGV4dDJfZGVmYXVsdF9jb250ZW50IikudGhlbigodD0+dGhpcy5lZGl0b3JEaXY/LnNldEF0dHJpYnV0ZSgiZGVmYXVsdC1jb250ZW50Iix0KSkpO3RoaXMuZWRpdG9yRGl2LmNvbnRlbnRFZGl0YWJsZT0hMDtjb25zdHtzdHlsZTpzfT10aGlzLmVkaXRvckRpdjtzLmZvbnRTaXplPWBjYWxjKCR7dGhpcy4jc2V9cHggKiB2YXIoLS1zY2FsZS1mYWN0b3IpKWA7cy5jb2xvcj10aGlzLiNRdDt0aGlzLmRpdi5hcHBlbmQodGhpcy5lZGl0b3JEaXYpO3RoaXMub3ZlcmxheURpdj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTt0aGlzLm92ZXJsYXlEaXYuY2xhc3NMaXN0LmFkZCgib3ZlcmxheSIsImVuYWJsZWQiKTt0aGlzLmRpdi5hcHBlbmQodGhpcy5vdmVybGF5RGl2KTsoMCxuLmJpbmRFdmVudHMpKHRoaXMsdGhpcy5kaXYsWyJkYmxjbGljayIsImtleWRvd24iXSk7aWYodGhpcy53aWR0aCl7Y29uc3RbcyxpXT10aGlzLnBhcmVudERpbWVuc2lvbnM7dGhpcy5zZXRBdCh0KnMsZSppLHRoaXMud2lkdGgqcyx0aGlzLmhlaWdodCppKTtmb3IoY29uc3QgdCBvZiB0aGlzLiNadC5zcGxpdCgiXG4iKSl7Y29uc3QgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtlLmFwcGVuZCh0P2RvY3VtZW50LmNyZWF0ZVRleHROb2RlKHQpOmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImJyIikpO3RoaXMuZWRpdG9yRGl2LmFwcGVuZChlKX10aGlzLmRpdi5kcmFnZ2FibGU9ITA7dGhpcy5lZGl0b3JEaXYuY29udGVudEVkaXRhYmxlPSExfWVsc2V7dGhpcy5kaXYuZHJhZ2dhYmxlPSExO3RoaXMuZWRpdG9yRGl2LmNvbnRlbnRFZGl0YWJsZT0hMH1yZXR1cm4gdGhpcy5kaXZ9Z2V0IGNvbnRlbnREaXYoKXtyZXR1cm4gdGhpcy5lZGl0b3JEaXZ9c3RhdGljIGRlc2VyaWFsaXplKHQsZSxzKXtjb25zdCBuPXN1cGVyLmRlc2VyaWFsaXplKHQsZSxzKTtuLiNzZT10LmZvbnRTaXplO24uI1F0PWkuVXRpbC5tYWtlSGV4Q29sb3IoLi4udC5jb2xvcik7bi4jWnQ9dC52YWx1ZTtyZXR1cm4gbn1zZXJpYWxpemUoKXtpZih0aGlzLmlzRW1wdHkoKSlyZXR1cm4gbnVsbDtjb25zdCB0PUZyZWVUZXh0RWRpdG9yLl9pbnRlcm5hbFBhZGRpbmcqdGhpcy5wYXJlbnRTY2FsZSxlPXRoaXMuZ2V0UmVjdCh0LHQpLHM9YS5Bbm5vdGF0aW9uRWRpdG9yLl9jb2xvck1hbmFnZXIuY29udmVydCh0aGlzLmlzQXR0YWNoZWRUb0RPTT9nZXRDb21wdXRlZFN0eWxlKHRoaXMuZWRpdG9yRGl2KS5jb2xvcjp0aGlzLiNRdCk7cmV0dXJue2Fubm90YXRpb25UeXBlOmkuQW5ub3RhdGlvbkVkaXRvclR5cGUuRlJFRVRFWFQsY29sb3I6cyxmb250U2l6ZTp0aGlzLiNzZSx2YWx1ZTp0aGlzLiNadCxwYWdlSW5kZXg6dGhpcy5wYWdlSW5kZXgscmVjdDplLHJvdGF0aW9uOnRoaXMucm90YXRpb259fX1lLkZyZWVUZXh0RWRpdG9yPUZyZWVUZXh0RWRpdG9yfSwodCxlLHMpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO2UuSW5rRWRpdG9yPXZvaWQgMDt2YXIgaT1zKDEpLG49cyg0KSxhPXMoNSk7Y29uc3Qgcj0xNjtjbGFzcyBJbmtFZGl0b3IgZXh0ZW5kcyBuLkFubm90YXRpb25FZGl0b3J7I29lPTA7I2xlPTA7I2NlPTA7I2hlPXRoaXMuY2FudmFzQ29udGV4dE1lbnUuYmluZCh0aGlzKTsjZGU9dGhpcy5jYW52YXNQb2ludGVybW92ZS5iaW5kKHRoaXMpOyN1ZT10aGlzLmNhbnZhc1BvaW50ZXJsZWF2ZS5iaW5kKHRoaXMpOyNwZT10aGlzLmNhbnZhc1BvaW50ZXJ1cC5iaW5kKHRoaXMpOyNmZT10aGlzLmNhbnZhc1BvaW50ZXJkb3duLmJpbmQodGhpcyk7I2dlPW5ldyBQYXRoMkQ7I21lPSExOyNiZT0hMTsjQWU9ITE7I19lPW51bGw7I3llPTA7I3ZlPTA7I1NlPW51bGw7c3RhdGljIF9kZWZhdWx0Q29sb3I9bnVsbDtzdGF0aWMgX2RlZmF1bHRPcGFjaXR5PTE7c3RhdGljIF9kZWZhdWx0VGhpY2tuZXNzPTE7c3RhdGljIF9sMTBuUHJvbWlzZTtzdGF0aWMgX3R5cGU9ImluayI7Y29uc3RydWN0b3IodCl7c3VwZXIoey4uLnQsbmFtZToiaW5rRWRpdG9yIn0pO3RoaXMuY29sb3I9dC5jb2xvcnx8bnVsbDt0aGlzLnRoaWNrbmVzcz10LnRoaWNrbmVzc3x8bnVsbDt0aGlzLm9wYWNpdHk9dC5vcGFjaXR5fHxudWxsO3RoaXMucGF0aHM9W107dGhpcy5iZXppZXJQYXRoMkQ9W107dGhpcy5hbGxSYXdQYXRocz1bXTt0aGlzLmN1cnJlbnRQYXRoPVtdO3RoaXMuc2NhbGVGYWN0b3I9MTt0aGlzLnRyYW5zbGF0aW9uWD10aGlzLnRyYW5zbGF0aW9uWT0wO3RoaXMueD0wO3RoaXMueT0wfXN0YXRpYyBpbml0aWFsaXplKHQpe3RoaXMuX2wxMG5Qcm9taXNlPW5ldyBNYXAoWyJlZGl0b3JfaW5rX2NhbnZhc19hcmlhX2xhYmVsIiwiZWRpdG9yX2luazJfYXJpYV9sYWJlbCJdLm1hcCgoZT0+W2UsdC5nZXQoZSldKSkpfXN0YXRpYyB1cGRhdGVEZWZhdWx0UGFyYW1zKHQsZSl7c3dpdGNoKHQpe2Nhc2UgaS5Bbm5vdGF0aW9uRWRpdG9yUGFyYW1zVHlwZS5JTktfVEhJQ0tORVNTOklua0VkaXRvci5fZGVmYXVsdFRoaWNrbmVzcz1lO2JyZWFrO2Nhc2UgaS5Bbm5vdGF0aW9uRWRpdG9yUGFyYW1zVHlwZS5JTktfQ09MT1I6SW5rRWRpdG9yLl9kZWZhdWx0Q29sb3I9ZTticmVhaztjYXNlIGkuQW5ub3RhdGlvbkVkaXRvclBhcmFtc1R5cGUuSU5LX09QQUNJVFk6SW5rRWRpdG9yLl9kZWZhdWx0T3BhY2l0eT1lLzEwMH19dXBkYXRlUGFyYW1zKHQsZSl7c3dpdGNoKHQpe2Nhc2UgaS5Bbm5vdGF0aW9uRWRpdG9yUGFyYW1zVHlwZS5JTktfVEhJQ0tORVNTOnRoaXMuI3hlKGUpO2JyZWFrO2Nhc2UgaS5Bbm5vdGF0aW9uRWRpdG9yUGFyYW1zVHlwZS5JTktfQ09MT1I6dGhpcy4jbmUoZSk7YnJlYWs7Y2FzZSBpLkFubm90YXRpb25FZGl0b3JQYXJhbXNUeXBlLklOS19PUEFDSVRZOnRoaXMuI0NlKGUpfX1zdGF0aWMgZ2V0IGRlZmF1bHRQcm9wZXJ0aWVzVG9VcGRhdGUoKXtyZXR1cm5bW2kuQW5ub3RhdGlvbkVkaXRvclBhcmFtc1R5cGUuSU5LX1RISUNLTkVTUyxJbmtFZGl0b3IuX2RlZmF1bHRUaGlja25lc3NdLFtpLkFubm90YXRpb25FZGl0b3JQYXJhbXNUeXBlLklOS19DT0xPUixJbmtFZGl0b3IuX2RlZmF1bHRDb2xvcnx8bi5Bbm5vdGF0aW9uRWRpdG9yLl9kZWZhdWx0TGluZUNvbG9yXSxbaS5Bbm5vdGF0aW9uRWRpdG9yUGFyYW1zVHlwZS5JTktfT1BBQ0lUWSxNYXRoLnJvdW5kKDEwMCpJbmtFZGl0b3IuX2RlZmF1bHRPcGFjaXR5KV1dfWdldCBwcm9wZXJ0aWVzVG9VcGRhdGUoKXtyZXR1cm5bW2kuQW5ub3RhdGlvbkVkaXRvclBhcmFtc1R5cGUuSU5LX1RISUNLTkVTUyx0aGlzLnRoaWNrbmVzc3x8SW5rRWRpdG9yLl9kZWZhdWx0VGhpY2tuZXNzXSxbaS5Bbm5vdGF0aW9uRWRpdG9yUGFyYW1zVHlwZS5JTktfQ09MT1IsdGhpcy5jb2xvcnx8SW5rRWRpdG9yLl9kZWZhdWx0Q29sb3J8fG4uQW5ub3RhdGlvbkVkaXRvci5fZGVmYXVsdExpbmVDb2xvcl0sW2kuQW5ub3RhdGlvbkVkaXRvclBhcmFtc1R5cGUuSU5LX09QQUNJVFksTWF0aC5yb3VuZCgxMDAqKHRoaXMub3BhY2l0eT8/SW5rRWRpdG9yLl9kZWZhdWx0T3BhY2l0eSkpXV19I3hlKHQpe2NvbnN0IGU9dGhpcy50aGlja25lc3M7dGhpcy5hZGRDb21tYW5kcyh7Y21kOigpPT57dGhpcy50aGlja25lc3M9dDt0aGlzLiNFZSgpfSx1bmRvOigpPT57dGhpcy50aGlja25lc3M9ZTt0aGlzLiNFZSgpfSxtdXN0RXhlYzohMCx0eXBlOmkuQW5ub3RhdGlvbkVkaXRvclBhcmFtc1R5cGUuSU5LX1RISUNLTkVTUyxvdmVyd3JpdGVJZlNhbWVUeXBlOiEwLGtlZXBVbmRvOiEwfSl9I25lKHQpe2NvbnN0IGU9dGhpcy5jb2xvcjt0aGlzLmFkZENvbW1hbmRzKHtjbWQ6KCk9Pnt0aGlzLmNvbG9yPXQ7dGhpcy4jd2UoKX0sdW5kbzooKT0+e3RoaXMuY29sb3I9ZTt0aGlzLiN3ZSgpfSxtdXN0RXhlYzohMCx0eXBlOmkuQW5ub3RhdGlvbkVkaXRvclBhcmFtc1R5cGUuSU5LX0NPTE9SLG92ZXJ3cml0ZUlmU2FtZVR5cGU6ITAsa2VlcFVuZG86ITB9KX0jQ2UodCl7dC89MTAwO2NvbnN0IGU9dGhpcy5vcGFjaXR5O3RoaXMuYWRkQ29tbWFuZHMoe2NtZDooKT0+e3RoaXMub3BhY2l0eT10O3RoaXMuI3dlKCl9LHVuZG86KCk9Pnt0aGlzLm9wYWNpdHk9ZTt0aGlzLiN3ZSgpfSxtdXN0RXhlYzohMCx0eXBlOmkuQW5ub3RhdGlvbkVkaXRvclBhcmFtc1R5cGUuSU5LX09QQUNJVFksb3ZlcndyaXRlSWZTYW1lVHlwZTohMCxrZWVwVW5kbzohMH0pfXJlYnVpbGQoKXtzdXBlci5yZWJ1aWxkKCk7aWYobnVsbCE9PXRoaXMuZGl2KXtpZighdGhpcy5jYW52YXMpe3RoaXMuI1BlKCk7dGhpcy4jVGUoKX1pZighdGhpcy5pc0F0dGFjaGVkVG9ET00pe3RoaXMucGFyZW50LmFkZCh0aGlzKTt0aGlzLiNGZSgpfXRoaXMuI0VlKCl9fXJlbW92ZSgpe2lmKG51bGwhPT10aGlzLmNhbnZhcyl7dGhpcy5pc0VtcHR5KCl8fHRoaXMuY29tbWl0KCk7dGhpcy5jYW52YXMud2lkdGg9dGhpcy5jYW52YXMuaGVpZ2h0PTA7dGhpcy5jYW52YXMucmVtb3ZlKCk7dGhpcy5jYW52YXM9bnVsbDt0aGlzLiNfZS5kaXNjb25uZWN0KCk7dGhpcy4jX2U9bnVsbDtzdXBlci5yZW1vdmUoKX19c2V0UGFyZW50KHQpeyF0aGlzLnBhcmVudCYmdD90aGlzLl91aU1hbmFnZXIucmVtb3ZlU2hvdWxkUmVzY2FsZSh0aGlzKTp0aGlzLnBhcmVudCYmbnVsbD09PXQmJnRoaXMuX3VpTWFuYWdlci5hZGRTaG91bGRSZXNjYWxlKHRoaXMpO3N1cGVyLnNldFBhcmVudCh0KX1vblNjYWxlQ2hhbmdpbmcoKXtjb25zdFt0LGVdPXRoaXMucGFyZW50RGltZW5zaW9ucyxzPXRoaXMud2lkdGgqdCxpPXRoaXMuaGVpZ2h0KmU7dGhpcy5zZXREaW1lbnNpb25zKHMsaSl9ZW5hYmxlRWRpdE1vZGUoKXtpZighdGhpcy4jbWUmJm51bGwhPT10aGlzLmNhbnZhcyl7c3VwZXIuZW5hYmxlRWRpdE1vZGUoKTt0aGlzLmRpdi5kcmFnZ2FibGU9ITE7dGhpcy5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcigicG9pbnRlcmRvd24iLHRoaXMuI2ZlKX19ZGlzYWJsZUVkaXRNb2RlKCl7aWYodGhpcy5pc0luRWRpdE1vZGUoKSYmbnVsbCE9PXRoaXMuY2FudmFzKXtzdXBlci5kaXNhYmxlRWRpdE1vZGUoKTt0aGlzLmRpdi5kcmFnZ2FibGU9IXRoaXMuaXNFbXB0eSgpO3RoaXMuZGl2LmNsYXNzTGlzdC5yZW1vdmUoImVkaXRpbmciKTt0aGlzLmNhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKCJwb2ludGVyZG93biIsdGhpcy4jZmUpfX1vbmNlQWRkZWQoKXt0aGlzLmRpdi5kcmFnZ2FibGU9IXRoaXMuaXNFbXB0eSgpfWlzRW1wdHkoKXtyZXR1cm4gMD09PXRoaXMucGF0aHMubGVuZ3RofHwxPT09dGhpcy5wYXRocy5sZW5ndGgmJjA9PT10aGlzLnBhdGhzWzBdLmxlbmd0aH0ja2UoKXtjb25zdHtwYXJlbnRSb3RhdGlvbjp0LHBhcmVudERpbWVuc2lvbnM6W2Usc119PXRoaXM7c3dpdGNoKHQpe2Nhc2UgOTA6cmV0dXJuWzAscyxzLGVdO2Nhc2UgMTgwOnJldHVybltlLHMsZSxzXTtjYXNlIDI3MDpyZXR1cm5bZSwwLHMsZV07ZGVmYXVsdDpyZXR1cm5bMCwwLGUsc119fSNNZSgpe2NvbnN0e2N0eDp0LGNvbG9yOmUsb3BhY2l0eTpzLHRoaWNrbmVzczppLHBhcmVudFNjYWxlOm4sc2NhbGVGYWN0b3I6cn09dGhpczt0LmxpbmVXaWR0aD1pKm4vcjt0LmxpbmVDYXA9InJvdW5kIjt0LmxpbmVKb2luPSJyb3VuZCI7dC5taXRlckxpbWl0PTEwO3Quc3Ryb2tlU3R5bGU9YCR7ZX0keygwLGEub3BhY2l0eVRvSGV4KShzKX1gfSNSZSh0LGUpe3RoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoImNvbnRleHRtZW51Iix0aGlzLiNoZSk7dGhpcy5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcigicG9pbnRlcmxlYXZlIix0aGlzLiN1ZSk7dGhpcy5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcigicG9pbnRlcm1vdmUiLHRoaXMuI2RlKTt0aGlzLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCJwb2ludGVydXAiLHRoaXMuI3BlKTt0aGlzLmNhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKCJwb2ludGVyZG93biIsdGhpcy4jZmUpO3RoaXMuaXNFZGl0aW5nPSEwO2lmKCF0aGlzLiNBZSl7dGhpcy4jQWU9ITA7dGhpcy4jRmUoKTt0aGlzLnRoaWNrbmVzc3x8PUlua0VkaXRvci5fZGVmYXVsdFRoaWNrbmVzczt0aGlzLmNvbG9yfHw9SW5rRWRpdG9yLl9kZWZhdWx0Q29sb3J8fG4uQW5ub3RhdGlvbkVkaXRvci5fZGVmYXVsdExpbmVDb2xvcjt0aGlzLm9wYWNpdHk/Pz1JbmtFZGl0b3IuX2RlZmF1bHRPcGFjaXR5fXRoaXMuY3VycmVudFBhdGgucHVzaChbdCxlXSk7dGhpcy4jYmU9ITE7dGhpcy4jTWUoKTt0aGlzLiNTZT0oKT0+e3RoaXMuI0RlKCk7dGhpcy4jU2UmJndpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy4jU2UpfTt3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMuI1NlKX0jSWUodCxlKXtjb25zdFtzLGldPXRoaXMuY3VycmVudFBhdGguYXQoLTEpO2lmKHRoaXMuY3VycmVudFBhdGgubGVuZ3RoPjEmJnQ9PT1zJiZlPT09aSlyZXR1cm47Y29uc3Qgbj10aGlzLmN1cnJlbnRQYXRoO2xldCBhPXRoaXMuI2dlO24ucHVzaChbdCxlXSk7dGhpcy4jYmU9ITA7aWYobi5sZW5ndGg8PTIpe2EubW92ZVRvKC4uLm5bMF0pO2EubGluZVRvKHQsZSl9ZWxzZXtpZigzPT09bi5sZW5ndGgpe3RoaXMuI2dlPWE9bmV3IFBhdGgyRDthLm1vdmVUbyguLi5uWzBdKX10aGlzLiNPZShhLC4uLm4uYXQoLTMpLC4uLm4uYXQoLTIpLHQsZSl9fSNMZSgpe2lmKDA9PT10aGlzLmN1cnJlbnRQYXRoLmxlbmd0aClyZXR1cm47Y29uc3QgdD10aGlzLmN1cnJlbnRQYXRoLmF0KC0xKTt0aGlzLiNnZS5saW5lVG8oLi4udCl9I05lKHQsZSl7dGhpcy4jU2U9bnVsbDt0PU1hdGgubWluKE1hdGgubWF4KHQsMCksdGhpcy5jYW52YXMud2lkdGgpO2U9TWF0aC5taW4oTWF0aC5tYXgoZSwwKSx0aGlzLmNhbnZhcy5oZWlnaHQpO3RoaXMuI0llKHQsZSk7dGhpcy4jTGUoKTtsZXQgcztpZigxIT09dGhpcy5jdXJyZW50UGF0aC5sZW5ndGgpcz10aGlzLiNCZSgpO2Vsc2V7Y29uc3QgaT1bdCxlXTtzPVtbaSxpLnNsaWNlKCksaS5zbGljZSgpLGldXX1jb25zdCBpPXRoaXMuI2dlLG49dGhpcy5jdXJyZW50UGF0aDt0aGlzLmN1cnJlbnRQYXRoPVtdO3RoaXMuI2dlPW5ldyBQYXRoMkQ7dGhpcy5hZGRDb21tYW5kcyh7Y21kOigpPT57dGhpcy5hbGxSYXdQYXRocy5wdXNoKG4pO3RoaXMucGF0aHMucHVzaChzKTt0aGlzLmJlemllclBhdGgyRC5wdXNoKGkpO3RoaXMucmVidWlsZCgpfSx1bmRvOigpPT57dGhpcy5hbGxSYXdQYXRocy5wb3AoKTt0aGlzLnBhdGhzLnBvcCgpO3RoaXMuYmV6aWVyUGF0aDJELnBvcCgpO2lmKDA9PT10aGlzLnBhdGhzLmxlbmd0aCl0aGlzLnJlbW92ZSgpO2Vsc2V7aWYoIXRoaXMuY2FudmFzKXt0aGlzLiNQZSgpO3RoaXMuI1RlKCl9dGhpcy4jRWUoKX19LG11c3RFeGVjOiEwfSl9I0RlKCl7aWYoIXRoaXMuI2JlKXJldHVybjt0aGlzLiNiZT0hMTtjb25zdCB0PU1hdGguY2VpbCh0aGlzLnRoaWNrbmVzcyp0aGlzLnBhcmVudFNjYWxlKSxlPXRoaXMuY3VycmVudFBhdGguc2xpY2UoLTMpLHM9ZS5tYXAoKHQ9PnRbMF0pKSxpPWUubWFwKCh0PT50WzFdKSkse2N0eDpufT0oTWF0aC5taW4oLi4ucyksTWF0aC5tYXgoLi4ucyksTWF0aC5taW4oLi4uaSksTWF0aC5tYXgoLi4uaSksdGhpcyk7bi5zYXZlKCk7bi5jbGVhclJlY3QoMCwwLHRoaXMuY2FudmFzLndpZHRoLHRoaXMuY2FudmFzLmhlaWdodCk7Zm9yKGNvbnN0IHQgb2YgdGhpcy5iZXppZXJQYXRoMkQpbi5zdHJva2UodCk7bi5zdHJva2UodGhpcy4jZ2UpO24ucmVzdG9yZSgpfSNPZSh0LGUscyxpLG4sYSxyKXtjb25zdCBvPShlK2kpLzIsbD0ocytuKS8yLGM9KGkrYSkvMixoPShuK3IpLzI7dC5iZXppZXJDdXJ2ZVRvKG8rMiooaS1vKS8zLGwrMioobi1sKS8zLGMrMiooaS1jKS8zLGgrMioobi1oKS8zLGMsaCl9I0JlKCl7Y29uc3QgdD10aGlzLmN1cnJlbnRQYXRoO2lmKHQubGVuZ3RoPD0yKXJldHVybltbdFswXSx0WzBdLHQuYXQoLTEpLHQuYXQoLTEpXV07Y29uc3QgZT1bXTtsZXQgcyxbaSxuXT10WzBdO2ZvcihzPTE7czx0Lmxlbmd0aC0yO3MrKyl7Y29uc3RbYSxyXT10W3NdLFtvLGxdPXRbcysxXSxjPShhK28pLzIsaD0ocitsKS8yLGQ9W2krMiooYS1pKS8zLG4rMiooci1uKS8zXSx1PVtjKzIqKGEtYykvMyxoKzIqKHItaCkvM107ZS5wdXNoKFtbaSxuXSxkLHUsW2MsaF1dKTtbaSxuXT1bYyxoXX1jb25zdFthLHJdPXRbc10sW28sbF09dFtzKzFdLGM9W2krMiooYS1pKS8zLG4rMiooci1uKS8zXSxoPVtvKzIqKGEtbykvMyxsKzIqKHItbCkvM107ZS5wdXNoKFtbaSxuXSxjLGgsW28sbF1dKTtyZXR1cm4gZX0jd2UoKXtpZih0aGlzLmlzRW1wdHkoKSl7dGhpcy4jamUoKTtyZXR1cm59dGhpcy4jTWUoKTtjb25zdHtjYW52YXM6dCxjdHg6ZX09dGhpcztlLnNldFRyYW5zZm9ybSgxLDAsMCwxLDAsMCk7ZS5jbGVhclJlY3QoMCwwLHQud2lkdGgsdC5oZWlnaHQpO3RoaXMuI2plKCk7Zm9yKGNvbnN0IHQgb2YgdGhpcy5iZXppZXJQYXRoMkQpZS5zdHJva2UodCl9Y29tbWl0KCl7aWYoIXRoaXMuI21lKXtzdXBlci5jb21taXQoKTt0aGlzLmlzRWRpdGluZz0hMTt0aGlzLmRpc2FibGVFZGl0TW9kZSgpO3RoaXMuc2V0SW5Gb3JlZ3JvdW5kKCk7dGhpcy4jbWU9ITA7dGhpcy5kaXYuY2xhc3NMaXN0LmFkZCgiZGlzYWJsZWQiKTt0aGlzLiNFZSghMCk7dGhpcy5wYXJlbnQuYWRkSW5rRWRpdG9ySWZOZWVkZWQoITApO3RoaXMucGFyZW50Lm1vdmVFZGl0b3JJbkRPTSh0aGlzKTt0aGlzLmRpdi5mb2N1cyh7cHJldmVudFNjcm9sbDohMH0pfX1mb2N1c2luKHQpe3N1cGVyLmZvY3VzaW4odCk7dGhpcy5lbmFibGVFZGl0TW9kZSgpfWNhbnZhc1BvaW50ZXJkb3duKHQpe2lmKDA9PT10LmJ1dHRvbiYmdGhpcy5pc0luRWRpdE1vZGUoKSYmIXRoaXMuI21lKXt0aGlzLnNldEluRm9yZWdyb3VuZCgpO3QucHJldmVudERlZmF1bHQoKTsibW91c2UiIT09dC50eXBlJiZ0aGlzLmRpdi5mb2N1cygpO3RoaXMuI1JlKHQub2Zmc2V0WCx0Lm9mZnNldFkpfX1jYW52YXNDb250ZXh0TWVudSh0KXt0LnByZXZlbnREZWZhdWx0KCl9Y2FudmFzUG9pbnRlcm1vdmUodCl7dC5wcmV2ZW50RGVmYXVsdCgpO3RoaXMuI0llKHQub2Zmc2V0WCx0Lm9mZnNldFkpfWNhbnZhc1BvaW50ZXJ1cCh0KXt0LnByZXZlbnREZWZhdWx0KCk7dGhpcy4jVWUodCl9Y2FudmFzUG9pbnRlcmxlYXZlKHQpe3RoaXMuI1VlKHQpfSNVZSh0KXt0aGlzLmNhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKCJwb2ludGVybGVhdmUiLHRoaXMuI3VlKTt0aGlzLmNhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKCJwb2ludGVybW92ZSIsdGhpcy4jZGUpO3RoaXMuY2FudmFzLnJlbW92ZUV2ZW50TGlzdGVuZXIoInBvaW50ZXJ1cCIsdGhpcy4jcGUpO3RoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoInBvaW50ZXJkb3duIix0aGlzLiNmZSk7c2V0VGltZW91dCgoKCk9Pnt0aGlzLmNhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKCJjb250ZXh0bWVudSIsdGhpcy4jaGUpfSksMTApO3RoaXMuI05lKHQub2Zmc2V0WCx0Lm9mZnNldFkpO3RoaXMuYWRkVG9Bbm5vdGF0aW9uU3RvcmFnZSgpO3RoaXMuc2V0SW5CYWNrZ3JvdW5kKCl9I1BlKCl7dGhpcy5jYW52YXM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIik7dGhpcy5jYW52YXMud2lkdGg9dGhpcy5jYW52YXMuaGVpZ2h0PTA7dGhpcy5jYW52YXMuY2xhc3NOYW1lPSJpbmtFZGl0b3JDYW52YXMiO0lua0VkaXRvci5fbDEwblByb21pc2UuZ2V0KCJlZGl0b3JfaW5rX2NhbnZhc19hcmlhX2xhYmVsIikudGhlbigodD0+dGhpcy5jYW52YXM/LnNldEF0dHJpYnV0ZSgiYXJpYS1sYWJlbCIsdCkpKTt0aGlzLmRpdi5hcHBlbmQodGhpcy5jYW52YXMpO3RoaXMuY3R4PXRoaXMuY2FudmFzLmdldENvbnRleHQoIjJkIil9I1RlKCl7dGhpcy4jX2U9bmV3IFJlc2l6ZU9ic2VydmVyKCh0PT57Y29uc3QgZT10WzBdLmNvbnRlbnRSZWN0O2Uud2lkdGgmJmUuaGVpZ2h0JiZ0aGlzLnNldERpbWVuc2lvbnMoZS53aWR0aCxlLmhlaWdodCl9KSk7dGhpcy4jX2Uub2JzZXJ2ZSh0aGlzLmRpdil9cmVuZGVyKCl7aWYodGhpcy5kaXYpcmV0dXJuIHRoaXMuZGl2O2xldCB0LGU7aWYodGhpcy53aWR0aCl7dD10aGlzLng7ZT10aGlzLnl9c3VwZXIucmVuZGVyKCk7SW5rRWRpdG9yLl9sMTBuUHJvbWlzZS5nZXQoImVkaXRvcl9pbmsyX2FyaWFfbGFiZWwiKS50aGVuKCh0PT50aGlzLmRpdj8uc2V0QXR0cmlidXRlKCJhcmlhLWxhYmVsIix0KSkpO2NvbnN0W3MsaSxuLGFdPXRoaXMuI2tlKCk7dGhpcy5zZXRBdChzLGksMCwwKTt0aGlzLnNldERpbXMobixhKTt0aGlzLiNQZSgpO2lmKHRoaXMud2lkdGgpe2NvbnN0W3MsaV09dGhpcy5wYXJlbnREaW1lbnNpb25zO3RoaXMuc2V0QXQodCpzLGUqaSx0aGlzLndpZHRoKnMsdGhpcy5oZWlnaHQqaSk7dGhpcy4jQWU9ITA7dGhpcy4jRmUoKTt0aGlzLnNldERpbXModGhpcy53aWR0aCpzLHRoaXMuaGVpZ2h0KmkpO3RoaXMuI3dlKCk7dGhpcy4jcWUoKTt0aGlzLmRpdi5jbGFzc0xpc3QuYWRkKCJkaXNhYmxlZCIpfWVsc2V7dGhpcy5kaXYuY2xhc3NMaXN0LmFkZCgiZWRpdGluZyIpO3RoaXMuZW5hYmxlRWRpdE1vZGUoKX10aGlzLiNUZSgpO3JldHVybiB0aGlzLmRpdn0jRmUoKXtpZighdGhpcy4jQWUpcmV0dXJuO2NvbnN0W3QsZV09dGhpcy5wYXJlbnREaW1lbnNpb25zO3RoaXMuY2FudmFzLndpZHRoPU1hdGguY2VpbCh0aGlzLndpZHRoKnQpO3RoaXMuY2FudmFzLmhlaWdodD1NYXRoLmNlaWwodGhpcy5oZWlnaHQqZSk7dGhpcy4jamUoKX1zZXREaW1lbnNpb25zKHQsZSl7Y29uc3Qgcz1NYXRoLnJvdW5kKHQpLGk9TWF0aC5yb3VuZChlKTtpZih0aGlzLiN5ZT09PXMmJnRoaXMuI3ZlPT09aSlyZXR1cm47dGhpcy4jeWU9czt0aGlzLiN2ZT1pO3RoaXMuY2FudmFzLnN0eWxlLnZpc2liaWxpdHk9ImhpZGRlbiI7aWYodGhpcy4jb2UmJk1hdGguYWJzKHRoaXMuI29lLXQvZSk+LjAxKXtlPU1hdGguY2VpbCh0L3RoaXMuI29lKTt0aGlzLnNldERpbXModCxlKX1jb25zdFtuLGFdPXRoaXMucGFyZW50RGltZW5zaW9uczt0aGlzLndpZHRoPXQvbjt0aGlzLmhlaWdodD1lL2E7dGhpcy4jbWUmJnRoaXMuI1dlKHQsZSk7dGhpcy4jRmUoKTt0aGlzLiN3ZSgpO3RoaXMuY2FudmFzLnN0eWxlLnZpc2liaWxpdHk9InZpc2libGUiO3RoaXMuZml4RGltcygpfSNXZSh0LGUpe2NvbnN0IHM9dGhpcy4jR2UoKSxpPSh0LXMpL3RoaXMuI2NlLG49KGUtcykvdGhpcy4jbGU7dGhpcy5zY2FsZUZhY3Rvcj1NYXRoLm1pbihpLG4pfSNqZSgpe2NvbnN0IHQ9dGhpcy4jR2UoKS8yO3RoaXMuY3R4LnNldFRyYW5zZm9ybSh0aGlzLnNjYWxlRmFjdG9yLDAsMCx0aGlzLnNjYWxlRmFjdG9yLHRoaXMudHJhbnNsYXRpb25YKnRoaXMuc2NhbGVGYWN0b3IrdCx0aGlzLnRyYW5zbGF0aW9uWSp0aGlzLnNjYWxlRmFjdG9yK3QpfXN0YXRpYyNIZSh0KXtjb25zdCBlPW5ldyBQYXRoMkQ7Zm9yKGxldCBzPTAsaT10Lmxlbmd0aDtzPGk7cysrKXtjb25zdFtpLG4sYSxyXT10W3NdOzA9PT1zJiZlLm1vdmVUbyguLi5pKTtlLmJlemllckN1cnZlVG8oblswXSxuWzFdLGFbMF0sYVsxXSxyWzBdLHJbMV0pfXJldHVybiBlfSNWZSh0LGUscyxpKXtjb25zdCBuPVtdLGE9dGhpcy50aGlja25lc3MvMjtsZXQgcixvO2Zvcihjb25zdCBsIG9mIHRoaXMucGF0aHMpe3I9W107bz1bXTtmb3IobGV0IG49MCxjPWwubGVuZ3RoO248YztuKyspe2NvbnN0W2MsaCxkLHVdPWxbbl0scD10KihjWzBdK2UpK2EsZj1pLXQqKGNbMV0rcyktYSxnPXQqKGhbMF0rZSkrYSxtPWktdCooaFsxXStzKS1hLGI9dCooZFswXStlKSthLEE9aS10KihkWzFdK3MpLWEsXz10Kih1WzBdK2UpK2EseT1pLXQqKHVbMV0rcyktYTtpZigwPT09bil7ci5wdXNoKHAsZik7by5wdXNoKHAsZil9ci5wdXNoKGcsbSxiLEEsXyx5KTt0aGlzLiN6ZShwLGYsZyxtLGIsQSxfLHksNCxvKX1uLnB1c2goe2JlemllcjpyLHBvaW50czpvfSl9cmV0dXJuIG59I3plKHQsZSxzLGksbixhLHIsbyxsLGMpe2lmKHRoaXMuI1hlKHQsZSxzLGksbixhLHIsbykpYy5wdXNoKHIsbyk7ZWxzZXtmb3IobGV0IGg9MTtoPGwtMTtoKyspe2NvbnN0IGQ9aC9sLHU9MS1kO2xldCBwPWQqdCt1KnMsZj1kKmUrdSppLGc9ZCpzK3UqbixtPWQqaSt1KmE7cD1kKnArdSpnO2Y9ZCpmK3UqbTtnPWQqZyt1KihkKm4rdSpyKTttPWQqbSt1KihkKmErdSpvKTtwPWQqcCt1Kmc7Zj1kKmYrdSptO2MucHVzaChwLGYpfWMucHVzaChyLG8pfX0jWGUodCxlLHMsaSxuLGEscixvKXtjb25zdCBsPSgzKnMtMip0LXIpKioyLGM9KDMqaS0yKmUtbykqKjIsaD0oMypuLXQtMipyKSoqMixkPSgzKmEtZS0yKm8pKioyO3JldHVybiBNYXRoLm1heChsLGgpK01hdGgubWF4KGMsZCk8PTEwfSMkZSgpe2xldCB0PTEvMCxlPS0xLzAscz0xLzAsbj0tMS8wO2Zvcihjb25zdCBhIG9mIHRoaXMucGF0aHMpZm9yKGNvbnN0W3IsbyxsLGNdb2YgYSl7Y29uc3QgYT1pLlV0aWwuYmV6aWVyQm91bmRpbmdCb3goLi4uciwuLi5vLC4uLmwsLi4uYyk7dD1NYXRoLm1pbih0LGFbMF0pO3M9TWF0aC5taW4ocyxhWzFdKTtlPU1hdGgubWF4KGUsYVsyXSk7bj1NYXRoLm1heChuLGFbM10pfXJldHVyblt0LHMsZSxuXX0jR2UoKXtyZXR1cm4gdGhpcy4jbWU/TWF0aC5jZWlsKHRoaXMudGhpY2tuZXNzKnRoaXMucGFyZW50U2NhbGUpOjB9I0VlKHQ9ITEpe2lmKHRoaXMuaXNFbXB0eSgpKXJldHVybjtpZighdGhpcy4jbWUpe3RoaXMuI3dlKCk7cmV0dXJufWNvbnN0IGU9dGhpcy4jJGUoKSxzPXRoaXMuI0dlKCk7dGhpcy4jY2U9TWF0aC5tYXgocixlWzJdLWVbMF0pO3RoaXMuI2xlPU1hdGgubWF4KHIsZVszXS1lWzFdKTtjb25zdCBpPU1hdGguY2VpbChzK3RoaXMuI2NlKnRoaXMuc2NhbGVGYWN0b3IpLG49TWF0aC5jZWlsKHMrdGhpcy4jbGUqdGhpcy5zY2FsZUZhY3RvciksW2Esb109dGhpcy5wYXJlbnREaW1lbnNpb25zO3RoaXMud2lkdGg9aS9hO3RoaXMuaGVpZ2h0PW4vbzt0aGlzLiNvZT1pL247dGhpcy4jcWUoKTtjb25zdCBsPXRoaXMudHJhbnNsYXRpb25YLGM9dGhpcy50cmFuc2xhdGlvblk7dGhpcy50cmFuc2xhdGlvblg9LWVbMF07dGhpcy50cmFuc2xhdGlvblk9LWVbMV07dGhpcy4jRmUoKTt0aGlzLiN3ZSgpO3RoaXMuI3llPWk7dGhpcy4jdmU9bjt0aGlzLnNldERpbXMoaSxuKTtjb25zdCBoPXQ/cy90aGlzLnNjYWxlRmFjdG9yLzI6MDt0aGlzLnRyYW5zbGF0ZShsLXRoaXMudHJhbnNsYXRpb25YLWgsYy10aGlzLnRyYW5zbGF0aW9uWS1oKX0jcWUoKXtjb25zdHtzdHlsZTp0fT10aGlzLmRpdjtpZih0aGlzLiNvZT49MSl7dC5taW5IZWlnaHQ9IjE2cHgiO3QubWluV2lkdGg9YCR7TWF0aC5yb3VuZCh0aGlzLiNvZSpyKX1weGB9ZWxzZXt0Lm1pbldpZHRoPSIxNnB4Ijt0Lm1pbkhlaWdodD1gJHtNYXRoLnJvdW5kKHIvdGhpcy4jb2UpfXB4YH19c3RhdGljIGRlc2VyaWFsaXplKHQsZSxzKXtjb25zdCBuPXN1cGVyLmRlc2VyaWFsaXplKHQsZSxzKTtuLnRoaWNrbmVzcz10LnRoaWNrbmVzcztuLmNvbG9yPWkuVXRpbC5tYWtlSGV4Q29sb3IoLi4udC5jb2xvcik7bi5vcGFjaXR5PXQub3BhY2l0eTtjb25zdFthLG9dPW4ucGFnZURpbWVuc2lvbnMsbD1uLndpZHRoKmEsYz1uLmhlaWdodCpvLGg9bi5wYXJlbnRTY2FsZSxkPXQudGhpY2tuZXNzLzI7bi4jb2U9bC9jO24uI21lPSEwO24uI3llPU1hdGgucm91bmQobCk7bi4jdmU9TWF0aC5yb3VuZChjKTtmb3IoY29uc3R7YmV6aWVyOmV9b2YgdC5wYXRocyl7Y29uc3QgdD1bXTtuLnBhdGhzLnB1c2godCk7bGV0IHM9aCooZVswXS1kKSxpPWgqKGMtZVsxXS1kKTtmb3IobGV0IG49MixhPWUubGVuZ3RoO248YTtuKz02KXtjb25zdCBhPWgqKGVbbl0tZCkscj1oKihjLWVbbisxXS1kKSxvPWgqKGVbbisyXS1kKSxsPWgqKGMtZVtuKzNdLWQpLHU9aCooZVtuKzRdLWQpLHA9aCooYy1lW24rNV0tZCk7dC5wdXNoKFtbcyxpXSxbYSxyXSxbbyxsXSxbdSxwXV0pO3M9dTtpPXB9Y29uc3QgYT10aGlzLiNIZSh0KTtuLmJlemllclBhdGgyRC5wdXNoKGEpfWNvbnN0IHU9bi4jJGUoKTtuLiNjZT1NYXRoLm1heChyLHVbMl0tdVswXSk7bi4jbGU9TWF0aC5tYXgocix1WzNdLXVbMV0pO24uI1dlKGwsYyk7cmV0dXJuIG59c2VyaWFsaXplKCl7aWYodGhpcy5pc0VtcHR5KCkpcmV0dXJuIG51bGw7Y29uc3QgdD10aGlzLmdldFJlY3QoMCwwKSxlPXRoaXMucm90YXRpb24lMTgwPT0wP3RbM10tdFsxXTp0WzJdLXRbMF0scz1uLkFubm90YXRpb25FZGl0b3IuX2NvbG9yTWFuYWdlci5jb252ZXJ0KHRoaXMuY3R4LnN0cm9rZVN0eWxlKTtyZXR1cm57YW5ub3RhdGlvblR5cGU6aS5Bbm5vdGF0aW9uRWRpdG9yVHlwZS5JTkssY29sb3I6cyx0aGlja25lc3M6dGhpcy50aGlja25lc3Msb3BhY2l0eTp0aGlzLm9wYWNpdHkscGF0aHM6dGhpcy4jVmUodGhpcy5zY2FsZUZhY3Rvci90aGlzLnBhcmVudFNjYWxlLHRoaXMudHJhbnNsYXRpb25YLHRoaXMudHJhbnNsYXRpb25ZLGUpLHBhZ2VJbmRleDp0aGlzLnBhZ2VJbmRleCxyZWN0OnQscm90YXRpb246dGhpcy5yb3RhdGlvbn19fWUuSW5rRWRpdG9yPUlua0VkaXRvcn0sKHQsZSxzKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTtlLkFubm90YXRpb25MYXllcj12b2lkIDA7dmFyIGk9cygxKSxuPXMoNiksYT1zKDMpLHI9cygzMSksbz1zKDMyKTtjb25zdCBsPTFlMyxjPW5ldyBXZWFrU2V0O2Z1bmN0aW9uIGdldFJlY3REaW1zKHQpe3JldHVybnt3aWR0aDp0WzJdLXRbMF0saGVpZ2h0OnRbM10tdFsxXX19Y2xhc3MgQW5ub3RhdGlvbkVsZW1lbnRGYWN0b3J5e3N0YXRpYyBjcmVhdGUodCl7c3dpdGNoKHQuZGF0YS5hbm5vdGF0aW9uVHlwZSl7Y2FzZSBpLkFubm90YXRpb25UeXBlLkxJTks6cmV0dXJuIG5ldyBMaW5rQW5ub3RhdGlvbkVsZW1lbnQodCk7Y2FzZSBpLkFubm90YXRpb25UeXBlLlRFWFQ6cmV0dXJuIG5ldyBUZXh0QW5ub3RhdGlvbkVsZW1lbnQodCk7Y2FzZSBpLkFubm90YXRpb25UeXBlLldJREdFVDpzd2l0Y2godC5kYXRhLmZpZWxkVHlwZSl7Y2FzZSJUeCI6cmV0dXJuIG5ldyBUZXh0V2lkZ2V0QW5ub3RhdGlvbkVsZW1lbnQodCk7Y2FzZSJCdG4iOnJldHVybiB0LmRhdGEucmFkaW9CdXR0b24/bmV3IFJhZGlvQnV0dG9uV2lkZ2V0QW5ub3RhdGlvbkVsZW1lbnQodCk6dC5kYXRhLmNoZWNrQm94P25ldyBDaGVja2JveFdpZGdldEFubm90YXRpb25FbGVtZW50KHQpOm5ldyBQdXNoQnV0dG9uV2lkZ2V0QW5ub3RhdGlvbkVsZW1lbnQodCk7Y2FzZSJDaCI6cmV0dXJuIG5ldyBDaG9pY2VXaWRnZXRBbm5vdGF0aW9uRWxlbWVudCh0KX1yZXR1cm4gbmV3IFdpZGdldEFubm90YXRpb25FbGVtZW50KHQpO2Nhc2UgaS5Bbm5vdGF0aW9uVHlwZS5QT1BVUDpyZXR1cm4gbmV3IFBvcHVwQW5ub3RhdGlvbkVsZW1lbnQodCk7Y2FzZSBpLkFubm90YXRpb25UeXBlLkZSRUVURVhUOnJldHVybiBuZXcgRnJlZVRleHRBbm5vdGF0aW9uRWxlbWVudCh0KTtjYXNlIGkuQW5ub3RhdGlvblR5cGUuTElORTpyZXR1cm4gbmV3IExpbmVBbm5vdGF0aW9uRWxlbWVudCh0KTtjYXNlIGkuQW5ub3RhdGlvblR5cGUuU1FVQVJFOnJldHVybiBuZXcgU3F1YXJlQW5ub3RhdGlvbkVsZW1lbnQodCk7Y2FzZSBpLkFubm90YXRpb25UeXBlLkNJUkNMRTpyZXR1cm4gbmV3IENpcmNsZUFubm90YXRpb25FbGVtZW50KHQpO2Nhc2UgaS5Bbm5vdGF0aW9uVHlwZS5QT0xZTElORTpyZXR1cm4gbmV3IFBvbHlsaW5lQW5ub3RhdGlvbkVsZW1lbnQodCk7Y2FzZSBpLkFubm90YXRpb25UeXBlLkNBUkVUOnJldHVybiBuZXcgQ2FyZXRBbm5vdGF0aW9uRWxlbWVudCh0KTtjYXNlIGkuQW5ub3RhdGlvblR5cGUuSU5LOnJldHVybiBuZXcgSW5rQW5ub3RhdGlvbkVsZW1lbnQodCk7Y2FzZSBpLkFubm90YXRpb25UeXBlLlBPTFlHT046cmV0dXJuIG5ldyBQb2x5Z29uQW5ub3RhdGlvbkVsZW1lbnQodCk7Y2FzZSBpLkFubm90YXRpb25UeXBlLkhJR0hMSUdIVDpyZXR1cm4gbmV3IEhpZ2hsaWdodEFubm90YXRpb25FbGVtZW50KHQpO2Nhc2UgaS5Bbm5vdGF0aW9uVHlwZS5VTkRFUkxJTkU6cmV0dXJuIG5ldyBVbmRlcmxpbmVBbm5vdGF0aW9uRWxlbWVudCh0KTtjYXNlIGkuQW5ub3RhdGlvblR5cGUuU1FVSUdHTFk6cmV0dXJuIG5ldyBTcXVpZ2dseUFubm90YXRpb25FbGVtZW50KHQpO2Nhc2UgaS5Bbm5vdGF0aW9uVHlwZS5TVFJJS0VPVVQ6cmV0dXJuIG5ldyBTdHJpa2VPdXRBbm5vdGF0aW9uRWxlbWVudCh0KTtjYXNlIGkuQW5ub3RhdGlvblR5cGUuU1RBTVA6cmV0dXJuIG5ldyBTdGFtcEFubm90YXRpb25FbGVtZW50KHQpO2Nhc2UgaS5Bbm5vdGF0aW9uVHlwZS5GSUxFQVRUQUNITUVOVDpyZXR1cm4gbmV3IEZpbGVBdHRhY2htZW50QW5ub3RhdGlvbkVsZW1lbnQodCk7ZGVmYXVsdDpyZXR1cm4gbmV3IEFubm90YXRpb25FbGVtZW50KHQpfX19Y2xhc3MgQW5ub3RhdGlvbkVsZW1lbnR7Y29uc3RydWN0b3IodCx7aXNSZW5kZXJhYmxlOmU9ITEsaWdub3JlQm9yZGVyOnM9ITEsY3JlYXRlUXVhZHJpbGF0ZXJhbHM6aT0hMX09e30pe3RoaXMuaXNSZW5kZXJhYmxlPWU7dGhpcy5kYXRhPXQuZGF0YTt0aGlzLmxheWVyPXQubGF5ZXI7dGhpcy5wYWdlPXQucGFnZTt0aGlzLnZpZXdwb3J0PXQudmlld3BvcnQ7dGhpcy5saW5rU2VydmljZT10LmxpbmtTZXJ2aWNlO3RoaXMuZG93bmxvYWRNYW5hZ2VyPXQuZG93bmxvYWRNYW5hZ2VyO3RoaXMuaW1hZ2VSZXNvdXJjZXNQYXRoPXQuaW1hZ2VSZXNvdXJjZXNQYXRoO3RoaXMucmVuZGVyRm9ybXM9dC5yZW5kZXJGb3Jtczt0aGlzLnN2Z0ZhY3Rvcnk9dC5zdmdGYWN0b3J5O3RoaXMuYW5ub3RhdGlvblN0b3JhZ2U9dC5hbm5vdGF0aW9uU3RvcmFnZTt0aGlzLmVuYWJsZVNjcmlwdGluZz10LmVuYWJsZVNjcmlwdGluZzt0aGlzLmhhc0pTQWN0aW9ucz10Lmhhc0pTQWN0aW9uczt0aGlzLl9maWVsZE9iamVjdHM9dC5maWVsZE9iamVjdHM7ZSYmKHRoaXMuY29udGFpbmVyPXRoaXMuX2NyZWF0ZUNvbnRhaW5lcihzKSk7aSYmKHRoaXMucXVhZHJpbGF0ZXJhbHM9dGhpcy5fY3JlYXRlUXVhZHJpbGF0ZXJhbHMocykpfV9jcmVhdGVDb250YWluZXIodD0hMSl7Y29uc3R7ZGF0YTplLHBhZ2U6cyx2aWV3cG9ydDpufT10aGlzLGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic2VjdGlvbiIpO2Euc2V0QXR0cmlidXRlKCJkYXRhLWFubm90YXRpb24taWQiLGUuaWQpO2Uubm9Sb3RhdGUmJmEuY2xhc3NMaXN0LmFkZCgibm9yb3RhdGUiKTtjb25zdHtwYWdlV2lkdGg6cixwYWdlSGVpZ2h0Om8scGFnZVg6bCxwYWdlWTpjfT1uLnJhd0RpbXMse3dpZHRoOmgsaGVpZ2h0OmR9PWdldFJlY3REaW1zKGUucmVjdCksdT1pLlV0aWwubm9ybWFsaXplUmVjdChbZS5yZWN0WzBdLHMudmlld1szXS1lLnJlY3RbMV0rcy52aWV3WzFdLGUucmVjdFsyXSxzLnZpZXdbM10tZS5yZWN0WzNdK3Mudmlld1sxXV0pO2lmKCF0JiZlLmJvcmRlclN0eWxlLndpZHRoPjApe2Euc3R5bGUuYm9yZGVyV2lkdGg9YCR7ZS5ib3JkZXJTdHlsZS53aWR0aH1weGA7Y29uc3QgdD1lLmJvcmRlclN0eWxlLmhvcml6b250YWxDb3JuZXJSYWRpdXMscz1lLmJvcmRlclN0eWxlLnZlcnRpY2FsQ29ybmVyUmFkaXVzO2lmKHQ+MHx8cz4wKXtjb25zdCBlPWBjYWxjKCR7dH1weCAqIHZhcigtLXNjYWxlLWZhY3RvcikpIC8gY2FsYygke3N9cHggKiB2YXIoLS1zY2FsZS1mYWN0b3IpKWA7YS5zdHlsZS5ib3JkZXJSYWRpdXM9ZX1lbHNlIGlmKHRoaXMgaW5zdGFuY2VvZiBSYWRpb0J1dHRvbldpZGdldEFubm90YXRpb25FbGVtZW50KXtjb25zdCB0PWBjYWxjKCR7aH1weCAqIHZhcigtLXNjYWxlLWZhY3RvcikpIC8gY2FsYygke2R9cHggKiB2YXIoLS1zY2FsZS1mYWN0b3IpKWA7YS5zdHlsZS5ib3JkZXJSYWRpdXM9dH1zd2l0Y2goZS5ib3JkZXJTdHlsZS5zdHlsZSl7Y2FzZSBpLkFubm90YXRpb25Cb3JkZXJTdHlsZVR5cGUuU09MSUQ6YS5zdHlsZS5ib3JkZXJTdHlsZT0ic29saWQiO2JyZWFrO2Nhc2UgaS5Bbm5vdGF0aW9uQm9yZGVyU3R5bGVUeXBlLkRBU0hFRDphLnN0eWxlLmJvcmRlclN0eWxlPSJkYXNoZWQiO2JyZWFrO2Nhc2UgaS5Bbm5vdGF0aW9uQm9yZGVyU3R5bGVUeXBlLkJFVkVMRUQ6KDAsaS53YXJuKSgiVW5pbXBsZW1lbnRlZCBib3JkZXIgc3R5bGU6IGJldmVsZWQiKTticmVhaztjYXNlIGkuQW5ub3RhdGlvbkJvcmRlclN0eWxlVHlwZS5JTlNFVDooMCxpLndhcm4pKCJVbmltcGxlbWVudGVkIGJvcmRlciBzdHlsZTogaW5zZXQiKTticmVhaztjYXNlIGkuQW5ub3RhdGlvbkJvcmRlclN0eWxlVHlwZS5VTkRFUkxJTkU6YS5zdHlsZS5ib3JkZXJCb3R0b21TdHlsZT0ic29saWQifWNvbnN0IG49ZS5ib3JkZXJDb2xvcnx8bnVsbDtuP2Euc3R5bGUuYm9yZGVyQ29sb3I9aS5VdGlsLm1ha2VIZXhDb2xvcigwfG5bMF0sMHxuWzFdLDB8blsyXSk6YS5zdHlsZS5ib3JkZXJXaWR0aD0wfWEuc3R5bGUubGVmdD0xMDAqKHVbMF0tbCkvcisiJSI7YS5zdHlsZS50b3A9MTAwKih1WzFdLWMpL28rIiUiO2NvbnN0e3JvdGF0aW9uOnB9PWU7aWYoZS5oYXNPd25DYW52YXN8fDA9PT1wKXthLnN0eWxlLndpZHRoPTEwMCpoL3IrIiUiO2Euc3R5bGUuaGVpZ2h0PTEwMCpkL28rIiUifWVsc2UgdGhpcy5zZXRSb3RhdGlvbihwLGEpO3JldHVybiBhfXNldFJvdGF0aW9uKHQsZT10aGlzLmNvbnRhaW5lcil7Y29uc3R7cGFnZVdpZHRoOnMscGFnZUhlaWdodDppfT10aGlzLnZpZXdwb3J0LnJhd0RpbXMse3dpZHRoOm4saGVpZ2h0OmF9PWdldFJlY3REaW1zKHRoaXMuZGF0YS5yZWN0KTtsZXQgcixvO2lmKHQlMTgwPT0wKXtyPTEwMCpuL3M7bz0xMDAqYS9pfWVsc2V7cj0xMDAqYS9zO289MTAwKm4vaX1lLnN0eWxlLndpZHRoPWAke3J9JWA7ZS5zdHlsZS5oZWlnaHQ9YCR7b30lYDtlLnNldEF0dHJpYnV0ZSgiZGF0YS1tYWluLXJvdGF0aW9uIiwoMzYwLXQpJTM2MCl9Z2V0IF9jb21tb25BY3Rpb25zKCl7Y29uc3Qgc2V0Q29sb3I9KHQsZSxzKT0+e2NvbnN0IGk9cy5kZXRhaWxbdF07cy50YXJnZXQuc3R5bGVbZV09ci5Db2xvckNvbnZlcnRlcnNbYCR7aVswXX1fSFRNTGBdKGkuc2xpY2UoMSkpfTtyZXR1cm4oMCxpLnNoYWRvdykodGhpcywiX2NvbW1vbkFjdGlvbnMiLHtkaXNwbGF5OnQ9Pntjb25zdCBlPXQuZGV0YWlsLmRpc3BsYXklMj09MTt0aGlzLmNvbnRhaW5lci5zdHlsZS52aXNpYmlsaXR5PWU/ImhpZGRlbiI6InZpc2libGUiO3RoaXMuYW5ub3RhdGlvblN0b3JhZ2Uuc2V0VmFsdWUodGhpcy5kYXRhLmlkLHtoaWRkZW46ZSxwcmludDowPT09dC5kZXRhaWwuZGlzcGxheXx8Mz09PXQuZGV0YWlsLmRpc3BsYXl9KX0scHJpbnQ6dD0+e3RoaXMuYW5ub3RhdGlvblN0b3JhZ2Uuc2V0VmFsdWUodGhpcy5kYXRhLmlkLHtwcmludDp0LmRldGFpbC5wcmludH0pfSxoaWRkZW46dD0+e3RoaXMuY29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHk9dC5kZXRhaWwuaGlkZGVuPyJoaWRkZW4iOiJ2aXNpYmxlIjt0aGlzLmFubm90YXRpb25TdG9yYWdlLnNldFZhbHVlKHRoaXMuZGF0YS5pZCx7aGlkZGVuOnQuZGV0YWlsLmhpZGRlbn0pfSxmb2N1czp0PT57c2V0VGltZW91dCgoKCk9PnQudGFyZ2V0LmZvY3VzKHtwcmV2ZW50U2Nyb2xsOiExfSkpLDApfSx1c2VyTmFtZTp0PT57dC50YXJnZXQudGl0bGU9dC5kZXRhaWwudXNlck5hbWV9LHJlYWRvbmx5OnQ9Pnt0LmRldGFpbC5yZWFkb25seT90LnRhcmdldC5zZXRBdHRyaWJ1dGUoInJlYWRvbmx5IiwiIik6dC50YXJnZXQucmVtb3ZlQXR0cmlidXRlKCJyZWFkb25seSIpfSxyZXF1aXJlZDp0PT57dGhpcy5fc2V0UmVxdWlyZWQodC50YXJnZXQsdC5kZXRhaWwucmVxdWlyZWQpfSxiZ0NvbG9yOnQ9PntzZXRDb2xvcigiYmdDb2xvciIsImJhY2tncm91bmRDb2xvciIsdCl9LGZpbGxDb2xvcjp0PT57c2V0Q29sb3IoImZpbGxDb2xvciIsImJhY2tncm91bmRDb2xvciIsdCl9LGZnQ29sb3I6dD0+e3NldENvbG9yKCJmZ0NvbG9yIiwiY29sb3IiLHQpfSx0ZXh0Q29sb3I6dD0+e3NldENvbG9yKCJ0ZXh0Q29sb3IiLCJjb2xvciIsdCl9LGJvcmRlckNvbG9yOnQ9PntzZXRDb2xvcigiYm9yZGVyQ29sb3IiLCJib3JkZXJDb2xvciIsdCl9LHN0cm9rZUNvbG9yOnQ9PntzZXRDb2xvcigic3Ryb2tlQ29sb3IiLCJib3JkZXJDb2xvciIsdCl9LHJvdGF0aW9uOnQ9Pntjb25zdCBlPXQuZGV0YWlsLnJvdGF0aW9uO3RoaXMuc2V0Um90YXRpb24oZSk7dGhpcy5hbm5vdGF0aW9uU3RvcmFnZS5zZXRWYWx1ZSh0aGlzLmRhdGEuaWQse3JvdGF0aW9uOmV9KX19KX1fZGlzcGF0Y2hFdmVudEZyb21TYW5kYm94KHQsZSl7Y29uc3Qgcz10aGlzLl9jb21tb25BY3Rpb25zO2Zvcihjb25zdCBpIG9mIE9iamVjdC5rZXlzKGUuZGV0YWlsKSl7Y29uc3Qgbj10W2ldfHxzW2ldO24/LihlKX19X3NldERlZmF1bHRQcm9wZXJ0aWVzRnJvbUpTKHQpe2lmKCF0aGlzLmVuYWJsZVNjcmlwdGluZylyZXR1cm47Y29uc3QgZT10aGlzLmFubm90YXRpb25TdG9yYWdlLmdldFJhd1ZhbHVlKHRoaXMuZGF0YS5pZCk7aWYoIWUpcmV0dXJuO2NvbnN0IHM9dGhpcy5fY29tbW9uQWN0aW9ucztmb3IoY29uc3RbaSxuXW9mIE9iamVjdC5lbnRyaWVzKGUpKXtjb25zdCBhPXNbaV07aWYoYSl7YSh7ZGV0YWlsOntbaV06bn0sdGFyZ2V0OnR9KTtkZWxldGUgZVtpXX19fV9jcmVhdGVRdWFkcmlsYXRlcmFscyh0PSExKXtpZighdGhpcy5kYXRhLnF1YWRQb2ludHMpcmV0dXJuIG51bGw7Y29uc3QgZT1bXSxzPXRoaXMuZGF0YS5yZWN0O2Zvcihjb25zdCBzIG9mIHRoaXMuZGF0YS5xdWFkUG9pbnRzKXt0aGlzLmRhdGEucmVjdD1bc1syXS54LHNbMl0ueSxzWzFdLngsc1sxXS55XTtlLnB1c2godGhpcy5fY3JlYXRlQ29udGFpbmVyKHQpKX10aGlzLmRhdGEucmVjdD1zO3JldHVybiBlfV9jcmVhdGVQb3B1cCh0LGUpe2xldCBzPXRoaXMuY29udGFpbmVyO2lmKHRoaXMucXVhZHJpbGF0ZXJhbHMpe3R8fD10aGlzLnF1YWRyaWxhdGVyYWxzO3M9dGhpcy5xdWFkcmlsYXRlcmFsc1swXX1pZighdCl7KHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IikpLmNsYXNzTGlzdC5hZGQoInBvcHVwVHJpZ2dlckFyZWEiKTtzLmFwcGVuZCh0KX1jb25zdCBpPW5ldyBQb3B1cEVsZW1lbnQoe2NvbnRhaW5lcjpzLHRyaWdnZXI6dCxjb2xvcjplLmNvbG9yLHRpdGxlT2JqOmUudGl0bGVPYmosbW9kaWZpY2F0aW9uRGF0ZTplLm1vZGlmaWNhdGlvbkRhdGUsY29udGVudHNPYmo6ZS5jb250ZW50c09iaixyaWNoVGV4dDplLnJpY2hUZXh0LGhpZGVXcmFwcGVyOiEwfSkucmVuZGVyKCk7aS5zdHlsZS5sZWZ0PSIxMDAlIjtzLmFwcGVuZChpKX1fcmVuZGVyUXVhZHJpbGF0ZXJhbHModCl7Zm9yKGNvbnN0IGUgb2YgdGhpcy5xdWFkcmlsYXRlcmFscyllLmNsYXNzTGlzdC5hZGQodCk7cmV0dXJuIHRoaXMucXVhZHJpbGF0ZXJhbHN9cmVuZGVyKCl7KDAsaS51bnJlYWNoYWJsZSkoIkFic3RyYWN0IG1ldGhvZCBgQW5ub3RhdGlvbkVsZW1lbnQucmVuZGVyYCBjYWxsZWQiKX1fZ2V0RWxlbWVudHNCeU5hbWUodCxlPW51bGwpe2NvbnN0IHM9W107aWYodGhpcy5fZmllbGRPYmplY3RzKXtjb25zdCBuPXRoaXMuX2ZpZWxkT2JqZWN0c1t0XTtpZihuKWZvcihjb25zdHtwYWdlOnQsaWQ6YSxleHBvcnRWYWx1ZXM6cn1vZiBuKXtpZigtMT09PXQpY29udGludWU7aWYoYT09PWUpY29udGludWU7Y29uc3Qgbj0ic3RyaW5nIj09dHlwZW9mIHI/cjpudWxsLG89ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgW2RhdGEtZWxlbWVudC1pZD0iJHthfSJdYCk7IW98fGMuaGFzKG8pP3MucHVzaCh7aWQ6YSxleHBvcnRWYWx1ZTpuLGRvbUVsZW1lbnQ6b30pOigwLGkud2FybikoYF9nZXRFbGVtZW50c0J5TmFtZSAtIGVsZW1lbnQgbm90IGFsbG93ZWQ6ICR7YX1gKX1yZXR1cm4gc31mb3IoY29uc3QgaSBvZiBkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZSh0KSl7Y29uc3R7ZXhwb3J0VmFsdWU6dH09aSxuPWkuZ2V0QXR0cmlidXRlKCJkYXRhLWVsZW1lbnQtaWQiKTtuIT09ZSYmKGMuaGFzKGkpJiZzLnB1c2goe2lkOm4sZXhwb3J0VmFsdWU6dCxkb21FbGVtZW50Oml9KSl9cmV0dXJuIHN9fWNsYXNzIExpbmtBbm5vdGF0aW9uRWxlbWVudCBleHRlbmRzIEFubm90YXRpb25FbGVtZW50e2NvbnN0cnVjdG9yKHQsZT1udWxsKXtzdXBlcih0LHtpc1JlbmRlcmFibGU6ITAsaWdub3JlQm9yZGVyOiEhZT8uaWdub3JlQm9yZGVyLGNyZWF0ZVF1YWRyaWxhdGVyYWxzOiEwfSk7dGhpcy5pc1Rvb2x0aXBPbmx5PXQuZGF0YS5pc1Rvb2x0aXBPbmx5fXJlbmRlcigpe2NvbnN0e2RhdGE6dCxsaW5rU2VydmljZTplfT10aGlzLHM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpO3Muc2V0QXR0cmlidXRlKCJkYXRhLWVsZW1lbnQtaWQiLHQuaWQpO2xldCBpPSExO2lmKHQudXJsKXtlLmFkZExpbmtBdHRyaWJ1dGVzKHMsdC51cmwsdC5uZXdXaW5kb3cpO2k9ITB9ZWxzZSBpZih0LmFjdGlvbil7dGhpcy5fYmluZE5hbWVkQWN0aW9uKHMsdC5hY3Rpb24pO2k9ITB9ZWxzZSBpZih0LmF0dGFjaG1lbnQpe3RoaXMuX2JpbmRBdHRhY2htZW50KHMsdC5hdHRhY2htZW50KTtpPSEwfWVsc2UgaWYodC5zZXRPQ0dTdGF0ZSl7dGhpcy4jS2Uocyx0LnNldE9DR1N0YXRlKTtpPSEwfWVsc2UgaWYodC5kZXN0KXt0aGlzLl9iaW5kTGluayhzLHQuZGVzdCk7aT0hMH1lbHNle2lmKHQuYWN0aW9ucyYmKHQuYWN0aW9ucy5BY3Rpb258fHQuYWN0aW9uc1siTW91c2UgVXAiXXx8dC5hY3Rpb25zWyJNb3VzZSBEb3duIl0pJiZ0aGlzLmVuYWJsZVNjcmlwdGluZyYmdGhpcy5oYXNKU0FjdGlvbnMpe3RoaXMuX2JpbmRKU0FjdGlvbihzLHQpO2k9ITB9aWYodC5yZXNldEZvcm0pe3RoaXMuX2JpbmRSZXNldEZvcm1BY3Rpb24ocyx0LnJlc2V0Rm9ybSk7aT0hMH1lbHNlIGlmKHRoaXMuaXNUb29sdGlwT25seSYmIWkpe3RoaXMuX2JpbmRMaW5rKHMsIiIpO2k9ITB9fWlmKHRoaXMucXVhZHJpbGF0ZXJhbHMpcmV0dXJuIHRoaXMuX3JlbmRlclF1YWRyaWxhdGVyYWxzKCJsaW5rQW5ub3RhdGlvbiIpLm1hcCgoKHQsZSk9Pntjb25zdCBpPTA9PT1lP3M6cy5jbG9uZU5vZGUoKTt0LmFwcGVuZChpKTtyZXR1cm4gdH0pKTt0aGlzLmNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCJsaW5rQW5ub3RhdGlvbiIpO2kmJnRoaXMuY29udGFpbmVyLmFwcGVuZChzKTtyZXR1cm4gdGhpcy5jb250YWluZXJ9I1llKCl7dGhpcy5jb250YWluZXIuc2V0QXR0cmlidXRlKCJkYXRhLWludGVybmFsLWxpbmsiLCIiKX1fYmluZExpbmsodCxlKXt0LmhyZWY9dGhpcy5saW5rU2VydmljZS5nZXREZXN0aW5hdGlvbkhhc2goZSk7dC5vbmNsaWNrPSgpPT57ZSYmdGhpcy5saW5rU2VydmljZS5nb1RvRGVzdGluYXRpb24oZSk7cmV0dXJuITF9OyhlfHwiIj09PWUpJiZ0aGlzLiNZZSgpfV9iaW5kTmFtZWRBY3Rpb24odCxlKXt0LmhyZWY9dGhpcy5saW5rU2VydmljZS5nZXRBbmNob3JVcmwoIiIpO3Qub25jbGljaz0oKT0+e3RoaXMubGlua1NlcnZpY2UuZXhlY3V0ZU5hbWVkQWN0aW9uKGUpO3JldHVybiExfTt0aGlzLiNZZSgpfV9iaW5kQXR0YWNobWVudCh0LGUpe3QuaHJlZj10aGlzLmxpbmtTZXJ2aWNlLmdldEFuY2hvclVybCgiIik7dC5vbmNsaWNrPSgpPT57dGhpcy5kb3dubG9hZE1hbmFnZXI/Lm9wZW5PckRvd25sb2FkRGF0YSh0aGlzLmNvbnRhaW5lcixlLmNvbnRlbnQsZS5maWxlbmFtZSk7cmV0dXJuITF9O3RoaXMuI1llKCl9I0tlKHQsZSl7dC5ocmVmPXRoaXMubGlua1NlcnZpY2UuZ2V0QW5jaG9yVXJsKCIiKTt0Lm9uY2xpY2s9KCk9Pnt0aGlzLmxpbmtTZXJ2aWNlLmV4ZWN1dGVTZXRPQ0dTdGF0ZShlKTtyZXR1cm4hMX07dGhpcy4jWWUoKX1fYmluZEpTQWN0aW9uKHQsZSl7dC5ocmVmPXRoaXMubGlua1NlcnZpY2UuZ2V0QW5jaG9yVXJsKCIiKTtjb25zdCBzPW5ldyBNYXAoW1siQWN0aW9uIiwib25jbGljayJdLFsiTW91c2UgVXAiLCJvbm1vdXNldXAiXSxbIk1vdXNlIERvd24iLCJvbm1vdXNlZG93biJdXSk7Zm9yKGNvbnN0IGkgb2YgT2JqZWN0LmtleXMoZS5hY3Rpb25zKSl7Y29uc3Qgbj1zLmdldChpKTtuJiYodFtuXT0oKT0+e3RoaXMubGlua1NlcnZpY2UuZXZlbnRCdXM/LmRpc3BhdGNoKCJkaXNwYXRjaGV2ZW50aW5zYW5kYm94Iix7c291cmNlOnRoaXMsZGV0YWlsOntpZDplLmlkLG5hbWU6aX19KTtyZXR1cm4hMX0pfXQub25jbGlja3x8KHQub25jbGljaz0oKT0+ITEpO3RoaXMuI1llKCl9X2JpbmRSZXNldEZvcm1BY3Rpb24odCxlKXtjb25zdCBzPXQub25jbGljaztzfHwodC5ocmVmPXRoaXMubGlua1NlcnZpY2UuZ2V0QW5jaG9yVXJsKCIiKSk7dGhpcy4jWWUoKTtpZih0aGlzLl9maWVsZE9iamVjdHMpdC5vbmNsaWNrPSgpPT57cz8uKCk7Y29uc3R7ZmllbGRzOnQscmVmczpuLGluY2x1ZGU6YX09ZSxyPVtdO2lmKDAhPT10Lmxlbmd0aHx8MCE9PW4ubGVuZ3RoKXtjb25zdCBlPW5ldyBTZXQobik7Zm9yKGNvbnN0IHMgb2YgdCl7Y29uc3QgdD10aGlzLl9maWVsZE9iamVjdHNbc118fFtdO2Zvcihjb25zdHtpZDpzfW9mIHQpZS5hZGQocyl9Zm9yKGNvbnN0IHQgb2YgT2JqZWN0LnZhbHVlcyh0aGlzLl9maWVsZE9iamVjdHMpKWZvcihjb25zdCBzIG9mIHQpZS5oYXMocy5pZCk9PT1hJiZyLnB1c2gocyl9ZWxzZSBmb3IoY29uc3QgdCBvZiBPYmplY3QudmFsdWVzKHRoaXMuX2ZpZWxkT2JqZWN0cykpci5wdXNoKC4uLnQpO2NvbnN0IG89dGhpcy5hbm5vdGF0aW9uU3RvcmFnZSxsPVtdO2Zvcihjb25zdCB0IG9mIHIpe2NvbnN0e2lkOmV9PXQ7bC5wdXNoKGUpO3N3aXRjaCh0LnR5cGUpe2Nhc2UidGV4dCI6e2NvbnN0IHM9dC5kZWZhdWx0VmFsdWV8fCIiO28uc2V0VmFsdWUoZSx7dmFsdWU6c30pO2JyZWFrfWNhc2UiY2hlY2tib3giOmNhc2UicmFkaW9idXR0b24iOntjb25zdCBzPXQuZGVmYXVsdFZhbHVlPT09dC5leHBvcnRWYWx1ZXM7by5zZXRWYWx1ZShlLHt2YWx1ZTpzfSk7YnJlYWt9Y2FzZSJjb21ib2JveCI6Y2FzZSJsaXN0Ym94Ijp7Y29uc3Qgcz10LmRlZmF1bHRWYWx1ZXx8IiI7by5zZXRWYWx1ZShlLHt2YWx1ZTpzfSk7YnJlYWt9ZGVmYXVsdDpjb250aW51ZX1jb25zdCBzPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLWVsZW1lbnQtaWQ9IiR7ZX0iXWApO3MmJihjLmhhcyhzKT9zLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCJyZXNldGZvcm0iKSk6KDAsaS53YXJuKShgX2JpbmRSZXNldEZvcm1BY3Rpb24gLSBlbGVtZW50IG5vdCBhbGxvd2VkOiAke2V9YCkpfXRoaXMuZW5hYmxlU2NyaXB0aW5nJiZ0aGlzLmxpbmtTZXJ2aWNlLmV2ZW50QnVzPy5kaXNwYXRjaCgiZGlzcGF0Y2hldmVudGluc2FuZGJveCIse3NvdXJjZTp0aGlzLGRldGFpbDp7aWQ6ImFwcCIsaWRzOmwsbmFtZToiUmVzZXRGb3JtIn19KTtyZXR1cm4hMX07ZWxzZXsoMCxpLndhcm4pKCdfYmluZFJlc2V0Rm9ybUFjdGlvbiAtICJyZXNldEZvcm0iIGFjdGlvbiBub3Qgc3VwcG9ydGVkLCBlbnN1cmUgdGhhdCB0aGUgYGZpZWxkT2JqZWN0c2AgcGFyYW1ldGVyIGlzIHByb3ZpZGVkLicpO3N8fCh0Lm9uY2xpY2s9KCk9PiExKX19fWNsYXNzIFRleHRBbm5vdGF0aW9uRWxlbWVudCBleHRlbmRzIEFubm90YXRpb25FbGVtZW50e2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQse2lzUmVuZGVyYWJsZTohISh0LmRhdGEuaGFzUG9wdXB8fHQuZGF0YS50aXRsZU9iaj8uc3RyfHx0LmRhdGEuY29udGVudHNPYmo/LnN0cnx8dC5kYXRhLnJpY2hUZXh0Py5zdHIpfSl9cmVuZGVyKCl7dGhpcy5jb250YWluZXIuY2xhc3NMaXN0LmFkZCgidGV4dEFubm90YXRpb24iKTtjb25zdCB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImltZyIpO3Quc3JjPXRoaXMuaW1hZ2VSZXNvdXJjZXNQYXRoKyJhbm5vdGF0aW9uLSIrdGhpcy5kYXRhLm5hbWUudG9Mb3dlckNhc2UoKSsiLnN2ZyI7dC5hbHQ9Ilt7e3R5cGV9fSBBbm5vdGF0aW9uXSI7dC5kYXRhc2V0LmwxMG5JZD0idGV4dF9hbm5vdGF0aW9uX3R5cGUiO3QuZGF0YXNldC5sMTBuQXJncz1KU09OLnN0cmluZ2lmeSh7dHlwZTp0aGlzLmRhdGEubmFtZX0pO3RoaXMuZGF0YS5oYXNQb3B1cHx8dGhpcy5fY3JlYXRlUG9wdXAodCx0aGlzLmRhdGEpO3RoaXMuY29udGFpbmVyLmFwcGVuZCh0KTtyZXR1cm4gdGhpcy5jb250YWluZXJ9fWNsYXNzIFdpZGdldEFubm90YXRpb25FbGVtZW50IGV4dGVuZHMgQW5ub3RhdGlvbkVsZW1lbnR7cmVuZGVyKCl7dGhpcy5kYXRhLmFsdGVybmF0aXZlVGV4dCYmKHRoaXMuY29udGFpbmVyLnRpdGxlPXRoaXMuZGF0YS5hbHRlcm5hdGl2ZVRleHQpO3JldHVybiB0aGlzLmNvbnRhaW5lcn1zaG93RWxlbWVudEFuZEhpZGVDYW52YXModCl7aWYodGhpcy5kYXRhLmhhc093bkNhbnZhcyl7IkNBTlZBUyI9PT10LnByZXZpb3VzU2libGluZz8ubm9kZU5hbWUmJih0LnByZXZpb3VzU2libGluZy5oaWRkZW49ITApO3QuaGlkZGVuPSExfX1fZ2V0S2V5TW9kaWZpZXIodCl7Y29uc3R7aXNXaW46ZSxpc01hYzpzfT1pLkZlYXR1cmVUZXN0LnBsYXRmb3JtO3JldHVybiBlJiZ0LmN0cmxLZXl8fHMmJnQubWV0YUtleX1fc2V0RXZlbnRMaXN0ZW5lcih0LGUscyxpKXtlLmluY2x1ZGVzKCJtb3VzZSIpP3QuYWRkRXZlbnRMaXN0ZW5lcihlLCh0PT57dGhpcy5saW5rU2VydmljZS5ldmVudEJ1cz8uZGlzcGF0Y2goImRpc3BhdGNoZXZlbnRpbnNhbmRib3giLHtzb3VyY2U6dGhpcyxkZXRhaWw6e2lkOnRoaXMuZGF0YS5pZCxuYW1lOnMsdmFsdWU6aSh0KSxzaGlmdDp0LnNoaWZ0S2V5LG1vZGlmaWVyOnRoaXMuX2dldEtleU1vZGlmaWVyKHQpfX0pfSkpOnQuYWRkRXZlbnRMaXN0ZW5lcihlLCh0PT57dGhpcy5saW5rU2VydmljZS5ldmVudEJ1cz8uZGlzcGF0Y2goImRpc3BhdGNoZXZlbnRpbnNhbmRib3giLHtzb3VyY2U6dGhpcyxkZXRhaWw6e2lkOnRoaXMuZGF0YS5pZCxuYW1lOnMsdmFsdWU6aSh0KX19KX0pKX1fc2V0RXZlbnRMaXN0ZW5lcnModCxlLHMpe2Zvcihjb25zdFtpLG5db2YgZSkoIkFjdGlvbiI9PT1ufHx0aGlzLmRhdGEuYWN0aW9ucz8uW25dKSYmdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcih0LGksbixzKX1fc2V0QmFja2dyb3VuZENvbG9yKHQpe2NvbnN0IGU9dGhpcy5kYXRhLmJhY2tncm91bmRDb2xvcnx8bnVsbDt0LnN0eWxlLmJhY2tncm91bmRDb2xvcj1udWxsPT09ZT8idHJhbnNwYXJlbnQiOmkuVXRpbC5tYWtlSGV4Q29sb3IoZVswXSxlWzFdLGVbMl0pfV9zZXRUZXh0U3R5bGUodCl7Y29uc3QgZT1bImxlZnQiLCJjZW50ZXIiLCJyaWdodCJdLHtmb250Q29sb3I6c309dGhpcy5kYXRhLmRlZmF1bHRBcHBlYXJhbmNlRGF0YSxuPXRoaXMuZGF0YS5kZWZhdWx0QXBwZWFyYW5jZURhdGEuZm9udFNpemV8fDksYT10LnN0eWxlO2xldCByO2NvbnN0IHJvdW5kVG9PbmVEZWNpbWFsPXQ9Pk1hdGgucm91bmQoMTAqdCkvMTA7aWYodGhpcy5kYXRhLm11bHRpTGluZSl7Y29uc3QgdD1NYXRoLmFicyh0aGlzLmRhdGEucmVjdFszXS10aGlzLmRhdGEucmVjdFsxXS0yKSxlPXQvKE1hdGgucm91bmQodC8oaS5MSU5FX0ZBQ1RPUipuKSl8fDEpO3I9TWF0aC5taW4obixyb3VuZFRvT25lRGVjaW1hbChlL2kuTElORV9GQUNUT1IpKX1lbHNle2NvbnN0IHQ9TWF0aC5hYnModGhpcy5kYXRhLnJlY3RbM10tdGhpcy5kYXRhLnJlY3RbMV0tMik7cj1NYXRoLm1pbihuLHJvdW5kVG9PbmVEZWNpbWFsKHQvaS5MSU5FX0ZBQ1RPUikpfWEuZm9udFNpemU9YGNhbGMoJHtyfXB4ICogdmFyKC0tc2NhbGUtZmFjdG9yKSlgO2EuY29sb3I9aS5VdGlsLm1ha2VIZXhDb2xvcihzWzBdLHNbMV0sc1syXSk7bnVsbCE9PXRoaXMuZGF0YS50ZXh0QWxpZ25tZW50JiYoYS50ZXh0QWxpZ249ZVt0aGlzLmRhdGEudGV4dEFsaWdubWVudF0pfV9zZXRSZXF1aXJlZCh0LGUpe2U/dC5zZXRBdHRyaWJ1dGUoInJlcXVpcmVkIiwhMCk6dC5yZW1vdmVBdHRyaWJ1dGUoInJlcXVpcmVkIik7dC5zZXRBdHRyaWJ1dGUoImFyaWEtcmVxdWlyZWQiLGUpfX1jbGFzcyBUZXh0V2lkZ2V0QW5ub3RhdGlvbkVsZW1lbnQgZXh0ZW5kcyBXaWRnZXRBbm5vdGF0aW9uRWxlbWVudHtjb25zdHJ1Y3Rvcih0KXtzdXBlcih0LHtpc1JlbmRlcmFibGU6dC5yZW5kZXJGb3Jtc3x8IXQuZGF0YS5oYXNBcHBlYXJhbmNlJiYhIXQuZGF0YS5maWVsZFZhbHVlfSl9c2V0UHJvcGVydHlPblNpYmxpbmdzKHQsZSxzLGkpe2NvbnN0IG49dGhpcy5hbm5vdGF0aW9uU3RvcmFnZTtmb3IoY29uc3QgYSBvZiB0aGlzLl9nZXRFbGVtZW50c0J5TmFtZSh0Lm5hbWUsdC5pZCkpe2EuZG9tRWxlbWVudCYmKGEuZG9tRWxlbWVudFtlXT1zKTtuLnNldFZhbHVlKGEuaWQse1tpXTpzfSl9fXJlbmRlcigpe2NvbnN0IHQ9dGhpcy5hbm5vdGF0aW9uU3RvcmFnZSxlPXRoaXMuZGF0YS5pZDt0aGlzLmNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCJ0ZXh0V2lkZ2V0QW5ub3RhdGlvbiIpO2xldCBzPW51bGw7aWYodGhpcy5yZW5kZXJGb3Jtcyl7Y29uc3QgaT10LmdldFZhbHVlKGUse3ZhbHVlOnRoaXMuZGF0YS5maWVsZFZhbHVlfSk7bGV0IG49aS52YWx1ZXx8IiI7Y29uc3QgYT10LmdldFZhbHVlKGUse2NoYXJMaW1pdDp0aGlzLmRhdGEubWF4TGVufSkuY2hhckxpbWl0O2EmJm4ubGVuZ3RoPmEmJihuPW4uc2xpY2UoMCxhKSk7bGV0IHI9aS5mb3JtYXR0ZWRWYWx1ZXx8dGhpcy5kYXRhLnRleHRDb250ZW50Py5qb2luKCJcbiIpfHxudWxsO3ImJnRoaXMuZGF0YS5jb21iJiYocj1yLnJlcGxhY2VBbGwoL1xzKy9nLCIiKSk7Y29uc3Qgbz17dXNlclZhbHVlOm4sZm9ybWF0dGVkVmFsdWU6cixsYXN0Q29tbWl0dGVkVmFsdWU6bnVsbCxjb21taXRLZXk6MX07aWYodGhpcy5kYXRhLm11bHRpTGluZSl7cz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ZXh0YXJlYSIpO3MudGV4dENvbnRlbnQ9cj8/bjt0aGlzLmRhdGEuZG9Ob3RTY3JvbGwmJihzLnN0eWxlLm92ZXJmbG93WT0iaGlkZGVuIil9ZWxzZXtzPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7cy50eXBlPSJ0ZXh0IjtzLnNldEF0dHJpYnV0ZSgidmFsdWUiLHI/P24pO3RoaXMuZGF0YS5kb05vdFNjcm9sbCYmKHMuc3R5bGUub3ZlcmZsb3dYPSJoaWRkZW4iKX10aGlzLmRhdGEuaGFzT3duQ2FudmFzJiYocy5oaWRkZW49ITApO2MuYWRkKHMpO3Muc2V0QXR0cmlidXRlKCJkYXRhLWVsZW1lbnQtaWQiLGUpO3MuZGlzYWJsZWQ9dGhpcy5kYXRhLnJlYWRPbmx5O3MubmFtZT10aGlzLmRhdGEuZmllbGROYW1lO3MudGFiSW5kZXg9bDt0aGlzLl9zZXRSZXF1aXJlZChzLHRoaXMuZGF0YS5yZXF1aXJlZCk7YSYmKHMubWF4TGVuZ3RoPWEpO3MuYWRkRXZlbnRMaXN0ZW5lcigiaW5wdXQiLChpPT57dC5zZXRWYWx1ZShlLHt2YWx1ZTppLnRhcmdldC52YWx1ZX0pO3RoaXMuc2V0UHJvcGVydHlPblNpYmxpbmdzKHMsInZhbHVlIixpLnRhcmdldC52YWx1ZSwidmFsdWUiKTtvLmZvcm1hdHRlZFZhbHVlPW51bGx9KSk7cy5hZGRFdmVudExpc3RlbmVyKCJyZXNldGZvcm0iLCh0PT57Y29uc3QgZT10aGlzLmRhdGEuZGVmYXVsdEZpZWxkVmFsdWU/PyIiO3MudmFsdWU9by51c2VyVmFsdWU9ZTtvLmZvcm1hdHRlZFZhbHVlPW51bGx9KSk7bGV0IGJsdXJMaXN0ZW5lcj10PT57Y29uc3R7Zm9ybWF0dGVkVmFsdWU6ZX09bztudWxsIT1lJiYodC50YXJnZXQudmFsdWU9ZSk7dC50YXJnZXQuc2Nyb2xsTGVmdD0wfTtpZih0aGlzLmVuYWJsZVNjcmlwdGluZyYmdGhpcy5oYXNKU0FjdGlvbnMpe3MuYWRkRXZlbnRMaXN0ZW5lcigiZm9jdXMiLCh0PT57Y29uc3R7dGFyZ2V0OmV9PXQ7by51c2VyVmFsdWUmJihlLnZhbHVlPW8udXNlclZhbHVlKTtvLmxhc3RDb21taXR0ZWRWYWx1ZT1lLnZhbHVlO28uY29tbWl0S2V5PTF9KSk7cy5hZGRFdmVudExpc3RlbmVyKCJ1cGRhdGVmcm9tc2FuZGJveCIsKHM9Pnt0aGlzLnNob3dFbGVtZW50QW5kSGlkZUNhbnZhcyhzLnRhcmdldCk7Y29uc3QgaT17dmFsdWUocyl7by51c2VyVmFsdWU9cy5kZXRhaWwudmFsdWU/PyIiO3Quc2V0VmFsdWUoZSx7dmFsdWU6by51c2VyVmFsdWUudG9TdHJpbmcoKX0pO3MudGFyZ2V0LnZhbHVlPW8udXNlclZhbHVlfSxmb3JtYXR0ZWRWYWx1ZShzKXtjb25zdHtmb3JtYXR0ZWRWYWx1ZTppfT1zLmRldGFpbDtvLmZvcm1hdHRlZFZhbHVlPWk7bnVsbCE9aSYmcy50YXJnZXQhPT1kb2N1bWVudC5hY3RpdmVFbGVtZW50JiYocy50YXJnZXQudmFsdWU9aSk7dC5zZXRWYWx1ZShlLHtmb3JtYXR0ZWRWYWx1ZTppfSl9LHNlbFJhbmdlKHQpe3QudGFyZ2V0LnNldFNlbGVjdGlvblJhbmdlKC4uLnQuZGV0YWlsLnNlbFJhbmdlKX0sY2hhckxpbWl0OnM9Pntjb25zdHtjaGFyTGltaXQ6aX09cy5kZXRhaWwse3RhcmdldDpufT1zO2lmKDA9PT1pKXtuLnJlbW92ZUF0dHJpYnV0ZSgibWF4TGVuZ3RoIik7cmV0dXJufW4uc2V0QXR0cmlidXRlKCJtYXhMZW5ndGgiLGkpO2xldCBhPW8udXNlclZhbHVlO2lmKGEmJiEoYS5sZW5ndGg8PWkpKXthPWEuc2xpY2UoMCxpKTtuLnZhbHVlPW8udXNlclZhbHVlPWE7dC5zZXRWYWx1ZShlLHt2YWx1ZTphfSk7dGhpcy5saW5rU2VydmljZS5ldmVudEJ1cz8uZGlzcGF0Y2goImRpc3BhdGNoZXZlbnRpbnNhbmRib3giLHtzb3VyY2U6dGhpcyxkZXRhaWw6e2lkOmUsbmFtZToiS2V5c3Ryb2tlIix2YWx1ZTphLHdpbGxDb21taXQ6ITAsY29tbWl0S2V5OjEsc2VsU3RhcnQ6bi5zZWxlY3Rpb25TdGFydCxzZWxFbmQ6bi5zZWxlY3Rpb25FbmR9fSl9fX07dGhpcy5fZGlzcGF0Y2hFdmVudEZyb21TYW5kYm94KGkscyl9KSk7cy5hZGRFdmVudExpc3RlbmVyKCJrZXlkb3duIiwodD0+e28uY29tbWl0S2V5PTE7bGV0IHM9LTE7IkVzY2FwZSI9PT10LmtleT9zPTA6IkVudGVyIiE9PXQua2V5fHx0aGlzLmRhdGEubXVsdGlMaW5lPyJUYWIiPT09dC5rZXkmJihvLmNvbW1pdEtleT0zKTpzPTI7aWYoLTE9PT1zKXJldHVybjtjb25zdHt2YWx1ZTppfT10LnRhcmdldDtpZihvLmxhc3RDb21taXR0ZWRWYWx1ZSE9PWkpe28ubGFzdENvbW1pdHRlZFZhbHVlPWk7by51c2VyVmFsdWU9aTt0aGlzLmxpbmtTZXJ2aWNlLmV2ZW50QnVzPy5kaXNwYXRjaCgiZGlzcGF0Y2hldmVudGluc2FuZGJveCIse3NvdXJjZTp0aGlzLGRldGFpbDp7aWQ6ZSxuYW1lOiJLZXlzdHJva2UiLHZhbHVlOmksd2lsbENvbW1pdDohMCxjb21taXRLZXk6cyxzZWxTdGFydDp0LnRhcmdldC5zZWxlY3Rpb25TdGFydCxzZWxFbmQ6dC50YXJnZXQuc2VsZWN0aW9uRW5kfX0pfX0pKTtjb25zdCBpPWJsdXJMaXN0ZW5lcjtibHVyTGlzdGVuZXI9bnVsbDtzLmFkZEV2ZW50TGlzdGVuZXIoImJsdXIiLCh0PT57aWYoIXQucmVsYXRlZFRhcmdldClyZXR1cm47Y29uc3R7dmFsdWU6c309dC50YXJnZXQ7by51c2VyVmFsdWU9cztvLmxhc3RDb21taXR0ZWRWYWx1ZSE9PXMmJnRoaXMubGlua1NlcnZpY2UuZXZlbnRCdXM/LmRpc3BhdGNoKCJkaXNwYXRjaGV2ZW50aW5zYW5kYm94Iix7c291cmNlOnRoaXMsZGV0YWlsOntpZDplLG5hbWU6IktleXN0cm9rZSIsdmFsdWU6cyx3aWxsQ29tbWl0OiEwLGNvbW1pdEtleTpvLmNvbW1pdEtleSxzZWxTdGFydDp0LnRhcmdldC5zZWxlY3Rpb25TdGFydCxzZWxFbmQ6dC50YXJnZXQuc2VsZWN0aW9uRW5kfX0pO2kodCl9KSk7dGhpcy5kYXRhLmFjdGlvbnM/LktleXN0cm9rZSYmcy5hZGRFdmVudExpc3RlbmVyKCJiZWZvcmVpbnB1dCIsKHQ9PntvLmxhc3RDb21taXR0ZWRWYWx1ZT1udWxsO2NvbnN0e2RhdGE6cyx0YXJnZXQ6aX09dCx7dmFsdWU6bixzZWxlY3Rpb25TdGFydDphLHNlbGVjdGlvbkVuZDpyfT1pO2xldCBsPWEsYz1yO3N3aXRjaCh0LmlucHV0VHlwZSl7Y2FzZSJkZWxldGVXb3JkQmFja3dhcmQiOntjb25zdCB0PW4uc3Vic3RyaW5nKDAsYSkubWF0Y2goL1x3KlteXHddKiQvKTt0JiYobC09dFswXS5sZW5ndGgpO2JyZWFrfWNhc2UiZGVsZXRlV29yZEZvcndhcmQiOntjb25zdCB0PW4uc3Vic3RyaW5nKGEpLm1hdGNoKC9eW15cd10qXHcqLyk7dCYmKGMrPXRbMF0ubGVuZ3RoKTticmVha31jYXNlImRlbGV0ZUNvbnRlbnRCYWNrd2FyZCI6YT09PXImJihsLT0xKTticmVhaztjYXNlImRlbGV0ZUNvbnRlbnRGb3J3YXJkIjphPT09ciYmKGMrPTEpfXQucHJldmVudERlZmF1bHQoKTt0aGlzLmxpbmtTZXJ2aWNlLmV2ZW50QnVzPy5kaXNwYXRjaCgiZGlzcGF0Y2hldmVudGluc2FuZGJveCIse3NvdXJjZTp0aGlzLGRldGFpbDp7aWQ6ZSxuYW1lOiJLZXlzdHJva2UiLHZhbHVlOm4sY2hhbmdlOnN8fCIiLHdpbGxDb21taXQ6ITEsc2VsU3RhcnQ6bCxzZWxFbmQ6Y319KX0pKTt0aGlzLl9zZXRFdmVudExpc3RlbmVycyhzLFtbImZvY3VzIiwiRm9jdXMiXSxbImJsdXIiLCJCbHVyIl0sWyJtb3VzZWRvd24iLCJNb3VzZSBEb3duIl0sWyJtb3VzZWVudGVyIiwiTW91c2UgRW50ZXIiXSxbIm1vdXNlbGVhdmUiLCJNb3VzZSBFeGl0Il0sWyJtb3VzZXVwIiwiTW91c2UgVXAiXV0sKHQ9PnQudGFyZ2V0LnZhbHVlKSl9Ymx1ckxpc3RlbmVyJiZzLmFkZEV2ZW50TGlzdGVuZXIoImJsdXIiLGJsdXJMaXN0ZW5lcik7aWYodGhpcy5kYXRhLmNvbWIpe2NvbnN0IHQ9KHRoaXMuZGF0YS5yZWN0WzJdLXRoaXMuZGF0YS5yZWN0WzBdKS9hO3MuY2xhc3NMaXN0LmFkZCgiY29tYiIpO3Muc3R5bGUubGV0dGVyU3BhY2luZz1gY2FsYygke3R9cHggKiB2YXIoLS1zY2FsZS1mYWN0b3IpIC0gMWNoKWB9fWVsc2V7cz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtzLnRleHRDb250ZW50PXRoaXMuZGF0YS5maWVsZFZhbHVlO3Muc3R5bGUudmVydGljYWxBbGlnbj0ibWlkZGxlIjtzLnN0eWxlLmRpc3BsYXk9InRhYmxlLWNlbGwifXRoaXMuX3NldFRleHRTdHlsZShzKTt0aGlzLl9zZXRCYWNrZ3JvdW5kQ29sb3Iocyk7dGhpcy5fc2V0RGVmYXVsdFByb3BlcnRpZXNGcm9tSlMocyk7dGhpcy5jb250YWluZXIuYXBwZW5kKHMpO3JldHVybiB0aGlzLmNvbnRhaW5lcn19Y2xhc3MgQ2hlY2tib3hXaWRnZXRBbm5vdGF0aW9uRWxlbWVudCBleHRlbmRzIFdpZGdldEFubm90YXRpb25FbGVtZW50e2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQse2lzUmVuZGVyYWJsZTp0LnJlbmRlckZvcm1zfSl9cmVuZGVyKCl7Y29uc3QgdD10aGlzLmFubm90YXRpb25TdG9yYWdlLGU9dGhpcy5kYXRhLHM9ZS5pZDtsZXQgaT10LmdldFZhbHVlKHMse3ZhbHVlOmUuZXhwb3J0VmFsdWU9PT1lLmZpZWxkVmFsdWV9KS52YWx1ZTtpZigic3RyaW5nIj09dHlwZW9mIGkpe2k9Ik9mZiIhPT1pO3Quc2V0VmFsdWUocyx7dmFsdWU6aX0pfXRoaXMuY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoImJ1dHRvbldpZGdldEFubm90YXRpb24iLCJjaGVja0JveCIpO2NvbnN0IG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKTtjLmFkZChuKTtuLnNldEF0dHJpYnV0ZSgiZGF0YS1lbGVtZW50LWlkIixzKTtuLmRpc2FibGVkPWUucmVhZE9ubHk7dGhpcy5fc2V0UmVxdWlyZWQobix0aGlzLmRhdGEucmVxdWlyZWQpO24udHlwZT0iY2hlY2tib3giO24ubmFtZT1lLmZpZWxkTmFtZTtpJiZuLnNldEF0dHJpYnV0ZSgiY2hlY2tlZCIsITApO24uc2V0QXR0cmlidXRlKCJleHBvcnRWYWx1ZSIsZS5leHBvcnRWYWx1ZSk7bi50YWJJbmRleD1sO24uYWRkRXZlbnRMaXN0ZW5lcigiY2hhbmdlIiwoaT0+e2NvbnN0e25hbWU6bixjaGVja2VkOmF9PWkudGFyZ2V0O2Zvcihjb25zdCBpIG9mIHRoaXMuX2dldEVsZW1lbnRzQnlOYW1lKG4scykpe2NvbnN0IHM9YSYmaS5leHBvcnRWYWx1ZT09PWUuZXhwb3J0VmFsdWU7aS5kb21FbGVtZW50JiYoaS5kb21FbGVtZW50LmNoZWNrZWQ9cyk7dC5zZXRWYWx1ZShpLmlkLHt2YWx1ZTpzfSl9dC5zZXRWYWx1ZShzLHt2YWx1ZTphfSl9KSk7bi5hZGRFdmVudExpc3RlbmVyKCJyZXNldGZvcm0iLCh0PT57Y29uc3Qgcz1lLmRlZmF1bHRGaWVsZFZhbHVlfHwiT2ZmIjt0LnRhcmdldC5jaGVja2VkPXM9PT1lLmV4cG9ydFZhbHVlfSkpO2lmKHRoaXMuZW5hYmxlU2NyaXB0aW5nJiZ0aGlzLmhhc0pTQWN0aW9ucyl7bi5hZGRFdmVudExpc3RlbmVyKCJ1cGRhdGVmcm9tc2FuZGJveCIsKGU9Pntjb25zdCBpPXt2YWx1ZShlKXtlLnRhcmdldC5jaGVja2VkPSJPZmYiIT09ZS5kZXRhaWwudmFsdWU7dC5zZXRWYWx1ZShzLHt2YWx1ZTplLnRhcmdldC5jaGVja2VkfSl9fTt0aGlzLl9kaXNwYXRjaEV2ZW50RnJvbVNhbmRib3goaSxlKX0pKTt0aGlzLl9zZXRFdmVudExpc3RlbmVycyhuLFtbImNoYW5nZSIsIlZhbGlkYXRlIl0sWyJjaGFuZ2UiLCJBY3Rpb24iXSxbImZvY3VzIiwiRm9jdXMiXSxbImJsdXIiLCJCbHVyIl0sWyJtb3VzZWRvd24iLCJNb3VzZSBEb3duIl0sWyJtb3VzZWVudGVyIiwiTW91c2UgRW50ZXIiXSxbIm1vdXNlbGVhdmUiLCJNb3VzZSBFeGl0Il0sWyJtb3VzZXVwIiwiTW91c2UgVXAiXV0sKHQ9PnQudGFyZ2V0LmNoZWNrZWQpKX10aGlzLl9zZXRCYWNrZ3JvdW5kQ29sb3Iobik7dGhpcy5fc2V0RGVmYXVsdFByb3BlcnRpZXNGcm9tSlMobik7dGhpcy5jb250YWluZXIuYXBwZW5kKG4pO3JldHVybiB0aGlzLmNvbnRhaW5lcn19Y2xhc3MgUmFkaW9CdXR0b25XaWRnZXRBbm5vdGF0aW9uRWxlbWVudCBleHRlbmRzIFdpZGdldEFubm90YXRpb25FbGVtZW50e2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQse2lzUmVuZGVyYWJsZTp0LnJlbmRlckZvcm1zfSl9cmVuZGVyKCl7dGhpcy5jb250YWluZXIuY2xhc3NMaXN0LmFkZCgiYnV0dG9uV2lkZ2V0QW5ub3RhdGlvbiIsInJhZGlvQnV0dG9uIik7Y29uc3QgdD10aGlzLmFubm90YXRpb25TdG9yYWdlLGU9dGhpcy5kYXRhLHM9ZS5pZDtsZXQgaT10LmdldFZhbHVlKHMse3ZhbHVlOmUuZmllbGRWYWx1ZT09PWUuYnV0dG9uVmFsdWV9KS52YWx1ZTtpZigic3RyaW5nIj09dHlwZW9mIGkpe2k9aSE9PWUuYnV0dG9uVmFsdWU7dC5zZXRWYWx1ZShzLHt2YWx1ZTppfSl9Y29uc3Qgbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpO2MuYWRkKG4pO24uc2V0QXR0cmlidXRlKCJkYXRhLWVsZW1lbnQtaWQiLHMpO24uZGlzYWJsZWQ9ZS5yZWFkT25seTt0aGlzLl9zZXRSZXF1aXJlZChuLHRoaXMuZGF0YS5yZXF1aXJlZCk7bi50eXBlPSJyYWRpbyI7bi5uYW1lPWUuZmllbGROYW1lO2kmJm4uc2V0QXR0cmlidXRlKCJjaGVja2VkIiwhMCk7bi50YWJJbmRleD1sO24uYWRkRXZlbnRMaXN0ZW5lcigiY2hhbmdlIiwoZT0+e2NvbnN0e25hbWU6aSxjaGVja2VkOm59PWUudGFyZ2V0O2Zvcihjb25zdCBlIG9mIHRoaXMuX2dldEVsZW1lbnRzQnlOYW1lKGkscykpdC5zZXRWYWx1ZShlLmlkLHt2YWx1ZTohMX0pO3Quc2V0VmFsdWUocyx7dmFsdWU6bn0pfSkpO24uYWRkRXZlbnRMaXN0ZW5lcigicmVzZXRmb3JtIiwodD0+e2NvbnN0IHM9ZS5kZWZhdWx0RmllbGRWYWx1ZTt0LnRhcmdldC5jaGVja2VkPW51bGwhPXMmJnM9PT1lLmJ1dHRvblZhbHVlfSkpO2lmKHRoaXMuZW5hYmxlU2NyaXB0aW5nJiZ0aGlzLmhhc0pTQWN0aW9ucyl7Y29uc3QgaT1lLmJ1dHRvblZhbHVlO24uYWRkRXZlbnRMaXN0ZW5lcigidXBkYXRlZnJvbXNhbmRib3giLChlPT57Y29uc3Qgbj17dmFsdWU6ZT0+e2NvbnN0IG49aT09PWUuZGV0YWlsLnZhbHVlO2Zvcihjb25zdCBpIG9mIHRoaXMuX2dldEVsZW1lbnRzQnlOYW1lKGUudGFyZ2V0Lm5hbWUpKXtjb25zdCBlPW4mJmkuaWQ9PT1zO2kuZG9tRWxlbWVudCYmKGkuZG9tRWxlbWVudC5jaGVja2VkPWUpO3Quc2V0VmFsdWUoaS5pZCx7dmFsdWU6ZX0pfX19O3RoaXMuX2Rpc3BhdGNoRXZlbnRGcm9tU2FuZGJveChuLGUpfSkpO3RoaXMuX3NldEV2ZW50TGlzdGVuZXJzKG4sW1siY2hhbmdlIiwiVmFsaWRhdGUiXSxbImNoYW5nZSIsIkFjdGlvbiJdLFsiZm9jdXMiLCJGb2N1cyJdLFsiYmx1ciIsIkJsdXIiXSxbIm1vdXNlZG93biIsIk1vdXNlIERvd24iXSxbIm1vdXNlZW50ZXIiLCJNb3VzZSBFbnRlciJdLFsibW91c2VsZWF2ZSIsIk1vdXNlIEV4aXQiXSxbIm1vdXNldXAiLCJNb3VzZSBVcCJdXSwodD0+dC50YXJnZXQuY2hlY2tlZCkpfXRoaXMuX3NldEJhY2tncm91bmRDb2xvcihuKTt0aGlzLl9zZXREZWZhdWx0UHJvcGVydGllc0Zyb21KUyhuKTt0aGlzLmNvbnRhaW5lci5hcHBlbmQobik7cmV0dXJuIHRoaXMuY29udGFpbmVyfX1jbGFzcyBQdXNoQnV0dG9uV2lkZ2V0QW5ub3RhdGlvbkVsZW1lbnQgZXh0ZW5kcyBMaW5rQW5ub3RhdGlvbkVsZW1lbnR7Y29uc3RydWN0b3IodCl7c3VwZXIodCx7aWdub3JlQm9yZGVyOnQuZGF0YS5oYXNBcHBlYXJhbmNlfSl9cmVuZGVyKCl7Y29uc3QgdD1zdXBlci5yZW5kZXIoKTt0LmNsYXNzTGlzdC5hZGQoImJ1dHRvbldpZGdldEFubm90YXRpb24iLCJwdXNoQnV0dG9uIik7dGhpcy5kYXRhLmFsdGVybmF0aXZlVGV4dCYmKHQudGl0bGU9dGhpcy5kYXRhLmFsdGVybmF0aXZlVGV4dCk7Y29uc3QgZT10Lmxhc3RDaGlsZDtpZih0aGlzLmVuYWJsZVNjcmlwdGluZyYmdGhpcy5oYXNKU0FjdGlvbnMmJmUpe3RoaXMuX3NldERlZmF1bHRQcm9wZXJ0aWVzRnJvbUpTKGUpO2UuYWRkRXZlbnRMaXN0ZW5lcigidXBkYXRlZnJvbXNhbmRib3giLCh0PT57dGhpcy5fZGlzcGF0Y2hFdmVudEZyb21TYW5kYm94KHt9LHQpfSkpfXJldHVybiB0fX1jbGFzcyBDaG9pY2VXaWRnZXRBbm5vdGF0aW9uRWxlbWVudCBleHRlbmRzIFdpZGdldEFubm90YXRpb25FbGVtZW50e2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQse2lzUmVuZGVyYWJsZTp0LnJlbmRlckZvcm1zfSl9cmVuZGVyKCl7dGhpcy5jb250YWluZXIuY2xhc3NMaXN0LmFkZCgiY2hvaWNlV2lkZ2V0QW5ub3RhdGlvbiIpO2NvbnN0IHQ9dGhpcy5hbm5vdGF0aW9uU3RvcmFnZSxlPXRoaXMuZGF0YS5pZCxzPXQuZ2V0VmFsdWUoZSx7dmFsdWU6dGhpcy5kYXRhLmZpZWxkVmFsdWV9KSxpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNlbGVjdCIpO2MuYWRkKGkpO2kuc2V0QXR0cmlidXRlKCJkYXRhLWVsZW1lbnQtaWQiLGUpO2kuZGlzYWJsZWQ9dGhpcy5kYXRhLnJlYWRPbmx5O3RoaXMuX3NldFJlcXVpcmVkKGksdGhpcy5kYXRhLnJlcXVpcmVkKTtpLm5hbWU9dGhpcy5kYXRhLmZpZWxkTmFtZTtpLnRhYkluZGV4PWw7bGV0IG49dGhpcy5kYXRhLmNvbWJvJiZ0aGlzLmRhdGEub3B0aW9ucy5sZW5ndGg+MDtpZighdGhpcy5kYXRhLmNvbWJvKXtpLnNpemU9dGhpcy5kYXRhLm9wdGlvbnMubGVuZ3RoO3RoaXMuZGF0YS5tdWx0aVNlbGVjdCYmKGkubXVsdGlwbGU9ITApfWkuYWRkRXZlbnRMaXN0ZW5lcigicmVzZXRmb3JtIiwodD0+e2NvbnN0IGU9dGhpcy5kYXRhLmRlZmF1bHRGaWVsZFZhbHVlO2Zvcihjb25zdCB0IG9mIGkub3B0aW9ucyl0LnNlbGVjdGVkPXQudmFsdWU9PT1lfSkpO2Zvcihjb25zdCB0IG9mIHRoaXMuZGF0YS5vcHRpb25zKXtjb25zdCBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpO2UudGV4dENvbnRlbnQ9dC5kaXNwbGF5VmFsdWU7ZS52YWx1ZT10LmV4cG9ydFZhbHVlO2lmKHMudmFsdWUuaW5jbHVkZXModC5leHBvcnRWYWx1ZSkpe2Uuc2V0QXR0cmlidXRlKCJzZWxlY3RlZCIsITApO249ITF9aS5hcHBlbmQoZSl9bGV0IGE9bnVsbDtpZihuKXtjb25zdCB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpO3QudmFsdWU9IiAiO3Quc2V0QXR0cmlidXRlKCJoaWRkZW4iLCEwKTt0LnNldEF0dHJpYnV0ZSgic2VsZWN0ZWQiLCEwKTtpLnByZXBlbmQodCk7YT0oKT0+e3QucmVtb3ZlKCk7aS5yZW1vdmVFdmVudExpc3RlbmVyKCJpbnB1dCIsYSk7YT1udWxsfTtpLmFkZEV2ZW50TGlzdGVuZXIoImlucHV0IixhKX1jb25zdCBnZXRWYWx1ZT10PT57Y29uc3QgZT10PyJ2YWx1ZSI6InRleHRDb250ZW50Iix7b3B0aW9uczpzLG11bHRpcGxlOm59PWk7cmV0dXJuIG4/QXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsKHMsKHQ9PnQuc2VsZWN0ZWQpKS5tYXAoKHQ9PnRbZV0pKTotMT09PXMuc2VsZWN0ZWRJbmRleD9udWxsOnNbcy5zZWxlY3RlZEluZGV4XVtlXX07bGV0IHI9Z2V0VmFsdWUoITEpO2NvbnN0IGdldEl0ZW1zPXQ9Pntjb25zdCBlPXQudGFyZ2V0Lm9wdGlvbnM7cmV0dXJuIEFycmF5LnByb3RvdHlwZS5tYXAuY2FsbChlLCh0PT4oe2Rpc3BsYXlWYWx1ZTp0LnRleHRDb250ZW50LGV4cG9ydFZhbHVlOnQudmFsdWV9KSkpfTtpZih0aGlzLmVuYWJsZVNjcmlwdGluZyYmdGhpcy5oYXNKU0FjdGlvbnMpe2kuYWRkRXZlbnRMaXN0ZW5lcigidXBkYXRlZnJvbXNhbmRib3giLChzPT57Y29uc3Qgbj17dmFsdWUocyl7YT8uKCk7Y29uc3Qgbj1zLmRldGFpbC52YWx1ZSxvPW5ldyBTZXQoQXJyYXkuaXNBcnJheShuKT9uOltuXSk7Zm9yKGNvbnN0IHQgb2YgaS5vcHRpb25zKXQuc2VsZWN0ZWQ9by5oYXModC52YWx1ZSk7dC5zZXRWYWx1ZShlLHt2YWx1ZTpnZXRWYWx1ZSghMCl9KTtyPWdldFZhbHVlKCExKX0sbXVsdGlwbGVTZWxlY3Rpb24odCl7aS5tdWx0aXBsZT0hMH0scmVtb3ZlKHMpe2NvbnN0IG49aS5vcHRpb25zLGE9cy5kZXRhaWwucmVtb3ZlO25bYV0uc2VsZWN0ZWQ9ITE7aS5yZW1vdmUoYSk7aWYobi5sZW5ndGg+MCl7LTE9PT1BcnJheS5wcm90b3R5cGUuZmluZEluZGV4LmNhbGwobiwodD0+dC5zZWxlY3RlZCkpJiYoblswXS5zZWxlY3RlZD0hMCl9dC5zZXRWYWx1ZShlLHt2YWx1ZTpnZXRWYWx1ZSghMCksaXRlbXM6Z2V0SXRlbXMocyl9KTtyPWdldFZhbHVlKCExKX0sY2xlYXIocyl7Zm9yKDswIT09aS5sZW5ndGg7KWkucmVtb3ZlKDApO3Quc2V0VmFsdWUoZSx7dmFsdWU6bnVsbCxpdGVtczpbXX0pO3I9Z2V0VmFsdWUoITEpfSxpbnNlcnQocyl7Y29uc3R7aW5kZXg6bixkaXNwbGF5VmFsdWU6YSxleHBvcnRWYWx1ZTpvfT1zLmRldGFpbC5pbnNlcnQsbD1pLmNoaWxkcmVuW25dLGM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgib3B0aW9uIik7Yy50ZXh0Q29udGVudD1hO2MudmFsdWU9bztsP2wuYmVmb3JlKGMpOmkuYXBwZW5kKGMpO3Quc2V0VmFsdWUoZSx7dmFsdWU6Z2V0VmFsdWUoITApLGl0ZW1zOmdldEl0ZW1zKHMpfSk7cj1nZXRWYWx1ZSghMSl9LGl0ZW1zKHMpe2NvbnN0e2l0ZW1zOm59PXMuZGV0YWlsO2Zvcig7MCE9PWkubGVuZ3RoOylpLnJlbW92ZSgwKTtmb3IoY29uc3QgdCBvZiBuKXtjb25zdHtkaXNwbGF5VmFsdWU6ZSxleHBvcnRWYWx1ZTpzfT10LG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgib3B0aW9uIik7bi50ZXh0Q29udGVudD1lO24udmFsdWU9cztpLmFwcGVuZChuKX1pLm9wdGlvbnMubGVuZ3RoPjAmJihpLm9wdGlvbnNbMF0uc2VsZWN0ZWQ9ITApO3Quc2V0VmFsdWUoZSx7dmFsdWU6Z2V0VmFsdWUoITApLGl0ZW1zOmdldEl0ZW1zKHMpfSk7cj1nZXRWYWx1ZSghMSl9LGluZGljZXMocyl7Y29uc3QgaT1uZXcgU2V0KHMuZGV0YWlsLmluZGljZXMpO2Zvcihjb25zdCB0IG9mIHMudGFyZ2V0Lm9wdGlvbnMpdC5zZWxlY3RlZD1pLmhhcyh0LmluZGV4KTt0LnNldFZhbHVlKGUse3ZhbHVlOmdldFZhbHVlKCEwKX0pO3I9Z2V0VmFsdWUoITEpfSxlZGl0YWJsZSh0KXt0LnRhcmdldC5kaXNhYmxlZD0hdC5kZXRhaWwuZWRpdGFibGV9fTt0aGlzLl9kaXNwYXRjaEV2ZW50RnJvbVNhbmRib3gobixzKX0pKTtpLmFkZEV2ZW50TGlzdGVuZXIoImlucHV0Iiwocz0+e2NvbnN0IGk9Z2V0VmFsdWUoITApO3Quc2V0VmFsdWUoZSx7dmFsdWU6aX0pO3MucHJldmVudERlZmF1bHQoKTt0aGlzLmxpbmtTZXJ2aWNlLmV2ZW50QnVzPy5kaXNwYXRjaCgiZGlzcGF0Y2hldmVudGluc2FuZGJveCIse3NvdXJjZTp0aGlzLGRldGFpbDp7aWQ6ZSxuYW1lOiJLZXlzdHJva2UiLHZhbHVlOnIsY2hhbmdlRXg6aSx3aWxsQ29tbWl0OiExLGNvbW1pdEtleToxLGtleURvd246ITF9fSl9KSk7dGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoaSxbWyJmb2N1cyIsIkZvY3VzIl0sWyJibHVyIiwiQmx1ciJdLFsibW91c2Vkb3duIiwiTW91c2UgRG93biJdLFsibW91c2VlbnRlciIsIk1vdXNlIEVudGVyIl0sWyJtb3VzZWxlYXZlIiwiTW91c2UgRXhpdCJdLFsibW91c2V1cCIsIk1vdXNlIFVwIl0sWyJpbnB1dCIsIkFjdGlvbiJdLFsiaW5wdXQiLCJWYWxpZGF0ZSJdXSwodD0+dC50YXJnZXQudmFsdWUpKX1lbHNlIGkuYWRkRXZlbnRMaXN0ZW5lcigiaW5wdXQiLChmdW5jdGlvbihzKXt0LnNldFZhbHVlKGUse3ZhbHVlOmdldFZhbHVlKCEwKX0pfSkpO3RoaXMuZGF0YS5jb21ibyYmdGhpcy5fc2V0VGV4dFN0eWxlKGkpO3RoaXMuX3NldEJhY2tncm91bmRDb2xvcihpKTt0aGlzLl9zZXREZWZhdWx0UHJvcGVydGllc0Zyb21KUyhpKTt0aGlzLmNvbnRhaW5lci5hcHBlbmQoaSk7cmV0dXJuIHRoaXMuY29udGFpbmVyfX1jbGFzcyBQb3B1cEFubm90YXRpb25FbGVtZW50IGV4dGVuZHMgQW5ub3RhdGlvbkVsZW1lbnR7c3RhdGljIElHTk9SRV9UWVBFUz1uZXcgU2V0KFsiTGluZSIsIlNxdWFyZSIsIkNpcmNsZSIsIlBvbHlMaW5lIiwiUG9seWdvbiIsIkluayJdKTtjb25zdHJ1Y3Rvcih0KXtjb25zdHtkYXRhOmV9PXQ7c3VwZXIodCx7aXNSZW5kZXJhYmxlOiFQb3B1cEFubm90YXRpb25FbGVtZW50LklHTk9SRV9UWVBFUy5oYXMoZS5wYXJlbnRUeXBlKSYmISEoZS50aXRsZU9iaj8uc3RyfHxlLmNvbnRlbnRzT2JqPy5zdHJ8fGUucmljaFRleHQ/LnN0cil9KX1yZW5kZXIoKXt0aGlzLmNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCJwb3B1cEFubm90YXRpb24iKTtjb25zdCB0PXRoaXMubGF5ZXIucXVlcnlTZWxlY3RvckFsbChgW2RhdGEtYW5ub3RhdGlvbi1pZD0iJHt0aGlzLmRhdGEucGFyZW50SWR9Il1gKTtpZigwPT09dC5sZW5ndGgpcmV0dXJuIHRoaXMuY29udGFpbmVyO2NvbnN0IGU9bmV3IFBvcHVwRWxlbWVudCh7Y29udGFpbmVyOnRoaXMuY29udGFpbmVyLHRyaWdnZXI6QXJyYXkuZnJvbSh0KSxjb2xvcjp0aGlzLmRhdGEuY29sb3IsdGl0bGVPYmo6dGhpcy5kYXRhLnRpdGxlT2JqLG1vZGlmaWNhdGlvbkRhdGU6dGhpcy5kYXRhLm1vZGlmaWNhdGlvbkRhdGUsY29udGVudHNPYmo6dGhpcy5kYXRhLmNvbnRlbnRzT2JqLHJpY2hUZXh0OnRoaXMuZGF0YS5yaWNoVGV4dH0pLHM9dGhpcy5wYWdlLG49aS5VdGlsLm5vcm1hbGl6ZVJlY3QoW3RoaXMuZGF0YS5wYXJlbnRSZWN0WzBdLHMudmlld1szXS10aGlzLmRhdGEucGFyZW50UmVjdFsxXStzLnZpZXdbMV0sdGhpcy5kYXRhLnBhcmVudFJlY3RbMl0scy52aWV3WzNdLXRoaXMuZGF0YS5wYXJlbnRSZWN0WzNdK3Mudmlld1sxXV0pLGE9blswXSt0aGlzLmRhdGEucGFyZW50UmVjdFsyXS10aGlzLmRhdGEucGFyZW50UmVjdFswXSxyPW5bMV0se3BhZ2VXaWR0aDpvLHBhZ2VIZWlnaHQ6bCxwYWdlWDpjLHBhZ2VZOmh9PXRoaXMudmlld3BvcnQucmF3RGltczt0aGlzLmNvbnRhaW5lci5zdHlsZS5sZWZ0PTEwMCooYS1jKS9vKyIlIjt0aGlzLmNvbnRhaW5lci5zdHlsZS50b3A9MTAwKihyLWgpL2wrIiUiO3RoaXMuY29udGFpbmVyLmFwcGVuZChlLnJlbmRlcigpKTtyZXR1cm4gdGhpcy5jb250YWluZXJ9fWNsYXNzIFBvcHVwRWxlbWVudHtjb25zdHJ1Y3Rvcih0KXt0aGlzLmNvbnRhaW5lcj10LmNvbnRhaW5lcjt0aGlzLnRyaWdnZXI9dC50cmlnZ2VyO3RoaXMuY29sb3I9dC5jb2xvcjt0aGlzLnRpdGxlT2JqPXQudGl0bGVPYmo7dGhpcy5tb2RpZmljYXRpb25EYXRlPXQubW9kaWZpY2F0aW9uRGF0ZTt0aGlzLmNvbnRlbnRzT2JqPXQuY29udGVudHNPYmo7dGhpcy5yaWNoVGV4dD10LnJpY2hUZXh0O3RoaXMuaGlkZVdyYXBwZXI9dC5oaWRlV3JhcHBlcnx8ITE7dGhpcy5waW5uZWQ9ITF9cmVuZGVyKCl7Y29uc3QgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTt0LmNsYXNzTGlzdC5hZGQoInBvcHVwV3JhcHBlciIpO3RoaXMuaGlkZUVsZW1lbnQ9dGhpcy5oaWRlV3JhcHBlcj90OnRoaXMuY29udGFpbmVyO3RoaXMuaGlkZUVsZW1lbnQuaGlkZGVuPSEwO2NvbnN0IGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7ZS5jbGFzc0xpc3QuYWRkKCJwb3B1cCIpO2NvbnN0IHM9dGhpcy5jb2xvcjtpZihzKXtjb25zdCB0PS43KigyNTUtc1swXSkrc1swXSxuPS43KigyNTUtc1sxXSkrc1sxXSxhPS43KigyNTUtc1syXSkrc1syXTtlLnN0eWxlLmJhY2tncm91bmRDb2xvcj1pLlV0aWwubWFrZUhleENvbG9yKDB8dCwwfG4sMHxhKX1jb25zdCBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImgxIik7YS5kaXI9dGhpcy50aXRsZU9iai5kaXI7YS50ZXh0Q29udGVudD10aGlzLnRpdGxlT2JqLnN0cjtlLmFwcGVuZChhKTtjb25zdCByPW4uUERGRGF0ZVN0cmluZy50b0RhdGVPYmplY3QodGhpcy5tb2RpZmljYXRpb25EYXRlKTtpZihyKXtjb25zdCB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKTt0LmNsYXNzTGlzdC5hZGQoInBvcHVwRGF0ZSIpO3QudGV4dENvbnRlbnQ9Int7ZGF0ZX19LCB7e3RpbWV9fSI7dC5kYXRhc2V0LmwxMG5JZD0iYW5ub3RhdGlvbl9kYXRlX3N0cmluZyI7dC5kYXRhc2V0LmwxMG5BcmdzPUpTT04uc3RyaW5naWZ5KHtkYXRlOnIudG9Mb2NhbGVEYXRlU3RyaW5nKCksdGltZTpyLnRvTG9jYWxlVGltZVN0cmluZygpfSk7ZS5hcHBlbmQodCl9aWYoIXRoaXMucmljaFRleHQ/LnN0cnx8dGhpcy5jb250ZW50c09iaj8uc3RyJiZ0aGlzLmNvbnRlbnRzT2JqLnN0ciE9PXRoaXMucmljaFRleHQuc3RyKXtjb25zdCB0PXRoaXMuX2Zvcm1hdENvbnRlbnRzKHRoaXMuY29udGVudHNPYmopO2UuYXBwZW5kKHQpfWVsc2V7by5YZmFMYXllci5yZW5kZXIoe3hmYUh0bWw6dGhpcy5yaWNoVGV4dC5odG1sLGludGVudDoicmljaFRleHQiLGRpdjplfSk7ZS5sYXN0Q2hpbGQuY2xhc3NMaXN0LmFkZCgicmljaFRleHQiLCJwb3B1cENvbnRlbnQiKX1BcnJheS5pc0FycmF5KHRoaXMudHJpZ2dlcil8fCh0aGlzLnRyaWdnZXI9W3RoaXMudHJpZ2dlcl0pO2Zvcihjb25zdCB0IG9mIHRoaXMudHJpZ2dlcil7dC5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsdGhpcy5fdG9nZ2xlLmJpbmQodGhpcykpO3QuYWRkRXZlbnRMaXN0ZW5lcigibW91c2VvdmVyIix0aGlzLl9zaG93LmJpbmQodGhpcywhMSkpO3QuYWRkRXZlbnRMaXN0ZW5lcigibW91c2VvdXQiLHRoaXMuX2hpZGUuYmluZCh0aGlzLCExKSl9ZS5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsdGhpcy5faGlkZS5iaW5kKHRoaXMsITApKTt0LmFwcGVuZChlKTtyZXR1cm4gdH1fZm9ybWF0Q29udGVudHMoe3N0cjp0LGRpcjplfSl7Y29uc3Qgcz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJwIik7cy5jbGFzc0xpc3QuYWRkKCJwb3B1cENvbnRlbnQiKTtzLmRpcj1lO2NvbnN0IGk9dC5zcGxpdCgvKD86XHJcbj98XG4pLyk7Zm9yKGxldCB0PTAsZT1pLmxlbmd0aDt0PGU7Kyt0KXtjb25zdCBuPWlbdF07cy5hcHBlbmQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUobikpO3Q8ZS0xJiZzLmFwcGVuZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJiciIpKX1yZXR1cm4gc31fdG9nZ2xlKCl7dGhpcy5waW5uZWQ/dGhpcy5faGlkZSghMCk6dGhpcy5fc2hvdyghMCl9X3Nob3codD0hMSl7dCYmKHRoaXMucGlubmVkPSEwKTtpZih0aGlzLmhpZGVFbGVtZW50LmhpZGRlbil7dGhpcy5oaWRlRWxlbWVudC5oaWRkZW49ITE7dGhpcy5jb250YWluZXIuc3R5bGUuekluZGV4PXBhcnNlSW50KHRoaXMuY29udGFpbmVyLnN0eWxlLnpJbmRleCkrMWUzfX1faGlkZSh0PSEwKXt0JiYodGhpcy5waW5uZWQ9ITEpO2lmKCF0aGlzLmhpZGVFbGVtZW50LmhpZGRlbiYmIXRoaXMucGlubmVkKXt0aGlzLmhpZGVFbGVtZW50LmhpZGRlbj0hMDt0aGlzLmNvbnRhaW5lci5zdHlsZS56SW5kZXg9cGFyc2VJbnQodGhpcy5jb250YWluZXIuc3R5bGUuekluZGV4KS0xZTN9fX1jbGFzcyBGcmVlVGV4dEFubm90YXRpb25FbGVtZW50IGV4dGVuZHMgQW5ub3RhdGlvbkVsZW1lbnR7Y29uc3RydWN0b3IodCl7c3VwZXIodCx7aXNSZW5kZXJhYmxlOiEhKHQuZGF0YS5oYXNQb3B1cHx8dC5kYXRhLnRpdGxlT2JqPy5zdHJ8fHQuZGF0YS5jb250ZW50c09iaj8uc3RyfHx0LmRhdGEucmljaFRleHQ/LnN0ciksaWdub3JlQm9yZGVyOiEwfSk7dGhpcy50ZXh0Q29udGVudD10LmRhdGEudGV4dENvbnRlbnR9cmVuZGVyKCl7dGhpcy5jb250YWluZXIuY2xhc3NMaXN0LmFkZCgiZnJlZVRleHRBbm5vdGF0aW9uIik7aWYodGhpcy50ZXh0Q29udGVudCl7Y29uc3QgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTt0LmNsYXNzTGlzdC5hZGQoImFubm90YXRpb25UZXh0Q29udGVudCIpO3Quc2V0QXR0cmlidXRlKCJyb2xlIiwiY29tbWVudCIpO2Zvcihjb25zdCBlIG9mIHRoaXMudGV4dENvbnRlbnQpe2NvbnN0IHM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpO3MudGV4dENvbnRlbnQ9ZTt0LmFwcGVuZChzKX10aGlzLmNvbnRhaW5lci5hcHBlbmQodCl9dGhpcy5kYXRhLmhhc1BvcHVwfHx0aGlzLl9jcmVhdGVQb3B1cChudWxsLHRoaXMuZGF0YSk7cmV0dXJuIHRoaXMuY29udGFpbmVyfX1jbGFzcyBMaW5lQW5ub3RhdGlvbkVsZW1lbnQgZXh0ZW5kcyBBbm5vdGF0aW9uRWxlbWVudHtjb25zdHJ1Y3Rvcih0KXtzdXBlcih0LHtpc1JlbmRlcmFibGU6ISEodC5kYXRhLmhhc1BvcHVwfHx0LmRhdGEudGl0bGVPYmo/LnN0cnx8dC5kYXRhLmNvbnRlbnRzT2JqPy5zdHJ8fHQuZGF0YS5yaWNoVGV4dD8uc3RyKSxpZ25vcmVCb3JkZXI6ITB9KX1yZW5kZXIoKXt0aGlzLmNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCJsaW5lQW5ub3RhdGlvbiIpO2NvbnN0IHQ9dGhpcy5kYXRhLHt3aWR0aDplLGhlaWdodDpzfT1nZXRSZWN0RGltcyh0LnJlY3QpLGk9dGhpcy5zdmdGYWN0b3J5LmNyZWF0ZShlLHMsITApLG49dGhpcy5zdmdGYWN0b3J5LmNyZWF0ZUVsZW1lbnQoInN2ZzpsaW5lIik7bi5zZXRBdHRyaWJ1dGUoIngxIix0LnJlY3RbMl0tdC5saW5lQ29vcmRpbmF0ZXNbMF0pO24uc2V0QXR0cmlidXRlKCJ5MSIsdC5yZWN0WzNdLXQubGluZUNvb3JkaW5hdGVzWzFdKTtuLnNldEF0dHJpYnV0ZSgieDIiLHQucmVjdFsyXS10LmxpbmVDb29yZGluYXRlc1syXSk7bi5zZXRBdHRyaWJ1dGUoInkyIix0LnJlY3RbM10tdC5saW5lQ29vcmRpbmF0ZXNbM10pO24uc2V0QXR0cmlidXRlKCJzdHJva2Utd2lkdGgiLHQuYm9yZGVyU3R5bGUud2lkdGh8fDEpO24uc2V0QXR0cmlidXRlKCJzdHJva2UiLCJ0cmFuc3BhcmVudCIpO24uc2V0QXR0cmlidXRlKCJmaWxsIiwidHJhbnNwYXJlbnQiKTtpLmFwcGVuZChuKTt0aGlzLmNvbnRhaW5lci5hcHBlbmQoaSk7dGhpcy5fY3JlYXRlUG9wdXAobix0KTtyZXR1cm4gdGhpcy5jb250YWluZXJ9fWNsYXNzIFNxdWFyZUFubm90YXRpb25FbGVtZW50IGV4dGVuZHMgQW5ub3RhdGlvbkVsZW1lbnR7Y29uc3RydWN0b3IodCl7c3VwZXIodCx7aXNSZW5kZXJhYmxlOiEhKHQuZGF0YS5oYXNQb3B1cHx8dC5kYXRhLnRpdGxlT2JqPy5zdHJ8fHQuZGF0YS5jb250ZW50c09iaj8uc3RyfHx0LmRhdGEucmljaFRleHQ/LnN0ciksaWdub3JlQm9yZGVyOiEwfSl9cmVuZGVyKCl7dGhpcy5jb250YWluZXIuY2xhc3NMaXN0LmFkZCgic3F1YXJlQW5ub3RhdGlvbiIpO2NvbnN0IHQ9dGhpcy5kYXRhLHt3aWR0aDplLGhlaWdodDpzfT1nZXRSZWN0RGltcyh0LnJlY3QpLGk9dGhpcy5zdmdGYWN0b3J5LmNyZWF0ZShlLHMsITApLG49dC5ib3JkZXJTdHlsZS53aWR0aCxhPXRoaXMuc3ZnRmFjdG9yeS5jcmVhdGVFbGVtZW50KCJzdmc6cmVjdCIpO2Euc2V0QXR0cmlidXRlKCJ4IixuLzIpO2Euc2V0QXR0cmlidXRlKCJ5IixuLzIpO2Euc2V0QXR0cmlidXRlKCJ3aWR0aCIsZS1uKTthLnNldEF0dHJpYnV0ZSgiaGVpZ2h0IixzLW4pO2Euc2V0QXR0cmlidXRlKCJzdHJva2Utd2lkdGgiLG58fDEpO2Euc2V0QXR0cmlidXRlKCJzdHJva2UiLCJ0cmFuc3BhcmVudCIpO2Euc2V0QXR0cmlidXRlKCJmaWxsIiwidHJhbnNwYXJlbnQiKTtpLmFwcGVuZChhKTt0aGlzLmNvbnRhaW5lci5hcHBlbmQoaSk7dGhpcy5fY3JlYXRlUG9wdXAoYSx0KTtyZXR1cm4gdGhpcy5jb250YWluZXJ9fWNsYXNzIENpcmNsZUFubm90YXRpb25FbGVtZW50IGV4dGVuZHMgQW5ub3RhdGlvbkVsZW1lbnR7Y29uc3RydWN0b3IodCl7c3VwZXIodCx7aXNSZW5kZXJhYmxlOiEhKHQuZGF0YS5oYXNQb3B1cHx8dC5kYXRhLnRpdGxlT2JqPy5zdHJ8fHQuZGF0YS5jb250ZW50c09iaj8uc3RyfHx0LmRhdGEucmljaFRleHQ/LnN0ciksaWdub3JlQm9yZGVyOiEwfSl9cmVuZGVyKCl7dGhpcy5jb250YWluZXIuY2xhc3NMaXN0LmFkZCgiY2lyY2xlQW5ub3RhdGlvbiIpO2NvbnN0IHQ9dGhpcy5kYXRhLHt3aWR0aDplLGhlaWdodDpzfT1nZXRSZWN0RGltcyh0LnJlY3QpLGk9dGhpcy5zdmdGYWN0b3J5LmNyZWF0ZShlLHMsITApLG49dC5ib3JkZXJTdHlsZS53aWR0aCxhPXRoaXMuc3ZnRmFjdG9yeS5jcmVhdGVFbGVtZW50KCJzdmc6ZWxsaXBzZSIpO2Euc2V0QXR0cmlidXRlKCJjeCIsZS8yKTthLnNldEF0dHJpYnV0ZSgiY3kiLHMvMik7YS5zZXRBdHRyaWJ1dGUoInJ4IixlLzItbi8yKTthLnNldEF0dHJpYnV0ZSgicnkiLHMvMi1uLzIpO2Euc2V0QXR0cmlidXRlKCJzdHJva2Utd2lkdGgiLG58fDEpO2Euc2V0QXR0cmlidXRlKCJzdHJva2UiLCJ0cmFuc3BhcmVudCIpO2Euc2V0QXR0cmlidXRlKCJmaWxsIiwidHJhbnNwYXJlbnQiKTtpLmFwcGVuZChhKTt0aGlzLmNvbnRhaW5lci5hcHBlbmQoaSk7dGhpcy5fY3JlYXRlUG9wdXAoYSx0KTtyZXR1cm4gdGhpcy5jb250YWluZXJ9fWNsYXNzIFBvbHlsaW5lQW5ub3RhdGlvbkVsZW1lbnQgZXh0ZW5kcyBBbm5vdGF0aW9uRWxlbWVudHtjb25zdHJ1Y3Rvcih0KXtzdXBlcih0LHtpc1JlbmRlcmFibGU6ISEodC5kYXRhLmhhc1BvcHVwfHx0LmRhdGEudGl0bGVPYmo/LnN0cnx8dC5kYXRhLmNvbnRlbnRzT2JqPy5zdHJ8fHQuZGF0YS5yaWNoVGV4dD8uc3RyKSxpZ25vcmVCb3JkZXI6ITB9KTt0aGlzLmNvbnRhaW5lckNsYXNzTmFtZT0icG9seWxpbmVBbm5vdGF0aW9uIjt0aGlzLnN2Z0VsZW1lbnROYW1lPSJzdmc6cG9seWxpbmUifXJlbmRlcigpe3RoaXMuY29udGFpbmVyLmNsYXNzTGlzdC5hZGQodGhpcy5jb250YWluZXJDbGFzc05hbWUpO2NvbnN0IHQ9dGhpcy5kYXRhLHt3aWR0aDplLGhlaWdodDpzfT1nZXRSZWN0RGltcyh0LnJlY3QpLGk9dGhpcy5zdmdGYWN0b3J5LmNyZWF0ZShlLHMsITApO2xldCBuPVtdO2Zvcihjb25zdCBlIG9mIHQudmVydGljZXMpe2NvbnN0IHM9ZS54LXQucmVjdFswXSxpPXQucmVjdFszXS1lLnk7bi5wdXNoKHMrIiwiK2kpfW49bi5qb2luKCIgIik7Y29uc3QgYT10aGlzLnN2Z0ZhY3RvcnkuY3JlYXRlRWxlbWVudCh0aGlzLnN2Z0VsZW1lbnROYW1lKTthLnNldEF0dHJpYnV0ZSgicG9pbnRzIixuKTthLnNldEF0dHJpYnV0ZSgic3Ryb2tlLXdpZHRoIix0LmJvcmRlclN0eWxlLndpZHRofHwxKTthLnNldEF0dHJpYnV0ZSgic3Ryb2tlIiwidHJhbnNwYXJlbnQiKTthLnNldEF0dHJpYnV0ZSgiZmlsbCIsInRyYW5zcGFyZW50Iik7aS5hcHBlbmQoYSk7dGhpcy5jb250YWluZXIuYXBwZW5kKGkpO3RoaXMuX2NyZWF0ZVBvcHVwKGEsdCk7cmV0dXJuIHRoaXMuY29udGFpbmVyfX1jbGFzcyBQb2x5Z29uQW5ub3RhdGlvbkVsZW1lbnQgZXh0ZW5kcyBQb2x5bGluZUFubm90YXRpb25FbGVtZW50e2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQpO3RoaXMuY29udGFpbmVyQ2xhc3NOYW1lPSJwb2x5Z29uQW5ub3RhdGlvbiI7dGhpcy5zdmdFbGVtZW50TmFtZT0ic3ZnOnBvbHlnb24ifX1jbGFzcyBDYXJldEFubm90YXRpb25FbGVtZW50IGV4dGVuZHMgQW5ub3RhdGlvbkVsZW1lbnR7Y29uc3RydWN0b3IodCl7c3VwZXIodCx7aXNSZW5kZXJhYmxlOiEhKHQuZGF0YS5oYXNQb3B1cHx8dC5kYXRhLnRpdGxlT2JqPy5zdHJ8fHQuZGF0YS5jb250ZW50c09iaj8uc3RyfHx0LmRhdGEucmljaFRleHQ/LnN0ciksaWdub3JlQm9yZGVyOiEwfSl9cmVuZGVyKCl7dGhpcy5jb250YWluZXIuY2xhc3NMaXN0LmFkZCgiY2FyZXRBbm5vdGF0aW9uIik7dGhpcy5kYXRhLmhhc1BvcHVwfHx0aGlzLl9jcmVhdGVQb3B1cChudWxsLHRoaXMuZGF0YSk7cmV0dXJuIHRoaXMuY29udGFpbmVyfX1jbGFzcyBJbmtBbm5vdGF0aW9uRWxlbWVudCBleHRlbmRzIEFubm90YXRpb25FbGVtZW50e2NvbnN0cnVjdG9yKHQpe3N1cGVyKHQse2lzUmVuZGVyYWJsZTohISh0LmRhdGEuaGFzUG9wdXB8fHQuZGF0YS50aXRsZU9iaj8uc3RyfHx0LmRhdGEuY29udGVudHNPYmo/LnN0cnx8dC5kYXRhLnJpY2hUZXh0Py5zdHIpLGlnbm9yZUJvcmRlcjohMH0pO3RoaXMuY29udGFpbmVyQ2xhc3NOYW1lPSJpbmtBbm5vdGF0aW9uIjt0aGlzLnN2Z0VsZW1lbnROYW1lPSJzdmc6cG9seWxpbmUifXJlbmRlcigpe3RoaXMuY29udGFpbmVyLmNsYXNzTGlzdC5hZGQodGhpcy5jb250YWluZXJDbGFzc05hbWUpO2NvbnN0IHQ9dGhpcy5kYXRhLHt3aWR0aDplLGhlaWdodDpzfT1nZXRSZWN0RGltcyh0LnJlY3QpLGk9dGhpcy5zdmdGYWN0b3J5LmNyZWF0ZShlLHMsITApO2Zvcihjb25zdCBlIG9mIHQuaW5rTGlzdHMpe2xldCBzPVtdO2Zvcihjb25zdCBpIG9mIGUpe2NvbnN0IGU9aS54LXQucmVjdFswXSxuPXQucmVjdFszXS1pLnk7cy5wdXNoKGAke2V9LCR7bn1gKX1zPXMuam9pbigiICIpO2NvbnN0IG49dGhpcy5zdmdGYWN0b3J5LmNyZWF0ZUVsZW1lbnQodGhpcy5zdmdFbGVtZW50TmFtZSk7bi5zZXRBdHRyaWJ1dGUoInBvaW50cyIscyk7bi5zZXRBdHRyaWJ1dGUoInN0cm9rZS13aWR0aCIsdC5ib3JkZXJTdHlsZS53aWR0aHx8MSk7bi5zZXRBdHRyaWJ1dGUoInN0cm9rZSIsInRyYW5zcGFyZW50Iik7bi5zZXRBdHRyaWJ1dGUoImZpbGwiLCJ0cmFuc3BhcmVudCIpO3RoaXMuX2NyZWF0ZVBvcHVwKG4sdCk7aS5hcHBlbmQobil9dGhpcy5jb250YWluZXIuYXBwZW5kKGkpO3JldHVybiB0aGlzLmNvbnRhaW5lcn19Y2xhc3MgSGlnaGxpZ2h0QW5ub3RhdGlvbkVsZW1lbnQgZXh0ZW5kcyBBbm5vdGF0aW9uRWxlbWVudHtjb25zdHJ1Y3Rvcih0KXtzdXBlcih0LHtpc1JlbmRlcmFibGU6ISEodC5kYXRhLmhhc1BvcHVwfHx0LmRhdGEudGl0bGVPYmo/LnN0cnx8dC5kYXRhLmNvbnRlbnRzT2JqPy5zdHJ8fHQuZGF0YS5yaWNoVGV4dD8uc3RyKSxpZ25vcmVCb3JkZXI6ITAsY3JlYXRlUXVhZHJpbGF0ZXJhbHM6ITB9KX1yZW5kZXIoKXt0aGlzLmRhdGEuaGFzUG9wdXB8fHRoaXMuX2NyZWF0ZVBvcHVwKG51bGwsdGhpcy5kYXRhKTtpZih0aGlzLnF1YWRyaWxhdGVyYWxzKXJldHVybiB0aGlzLl9yZW5kZXJRdWFkcmlsYXRlcmFscygiaGlnaGxpZ2h0QW5ub3RhdGlvbiIpO3RoaXMuY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoImhpZ2hsaWdodEFubm90YXRpb24iKTtyZXR1cm4gdGhpcy5jb250YWluZXJ9fWNsYXNzIFVuZGVybGluZUFubm90YXRpb25FbGVtZW50IGV4dGVuZHMgQW5ub3RhdGlvbkVsZW1lbnR7Y29uc3RydWN0b3IodCl7c3VwZXIodCx7aXNSZW5kZXJhYmxlOiEhKHQuZGF0YS5oYXNQb3B1cHx8dC5kYXRhLnRpdGxlT2JqPy5zdHJ8fHQuZGF0YS5jb250ZW50c09iaj8uc3RyfHx0LmRhdGEucmljaFRleHQ/LnN0ciksaWdub3JlQm9yZGVyOiEwLGNyZWF0ZVF1YWRyaWxhdGVyYWxzOiEwfSl9cmVuZGVyKCl7dGhpcy5kYXRhLmhhc1BvcHVwfHx0aGlzLl9jcmVhdGVQb3B1cChudWxsLHRoaXMuZGF0YSk7aWYodGhpcy5xdWFkcmlsYXRlcmFscylyZXR1cm4gdGhpcy5fcmVuZGVyUXVhZHJpbGF0ZXJhbHMoInVuZGVybGluZUFubm90YXRpb24iKTt0aGlzLmNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCJ1bmRlcmxpbmVBbm5vdGF0aW9uIik7cmV0dXJuIHRoaXMuY29udGFpbmVyfX1jbGFzcyBTcXVpZ2dseUFubm90YXRpb25FbGVtZW50IGV4dGVuZHMgQW5ub3RhdGlvbkVsZW1lbnR7Y29uc3RydWN0b3IodCl7c3VwZXIodCx7aXNSZW5kZXJhYmxlOiEhKHQuZGF0YS5oYXNQb3B1cHx8dC5kYXRhLnRpdGxlT2JqPy5zdHJ8fHQuZGF0YS5jb250ZW50c09iaj8uc3RyfHx0LmRhdGEucmljaFRleHQ/LnN0ciksaWdub3JlQm9yZGVyOiEwLGNyZWF0ZVF1YWRyaWxhdGVyYWxzOiEwfSl9cmVuZGVyKCl7dGhpcy5kYXRhLmhhc1BvcHVwfHx0aGlzLl9jcmVhdGVQb3B1cChudWxsLHRoaXMuZGF0YSk7aWYodGhpcy5xdWFkcmlsYXRlcmFscylyZXR1cm4gdGhpcy5fcmVuZGVyUXVhZHJpbGF0ZXJhbHMoInNxdWlnZ2x5QW5ub3RhdGlvbiIpO3RoaXMuY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoInNxdWlnZ2x5QW5ub3RhdGlvbiIpO3JldHVybiB0aGlzLmNvbnRhaW5lcn19Y2xhc3MgU3RyaWtlT3V0QW5ub3RhdGlvbkVsZW1lbnQgZXh0ZW5kcyBBbm5vdGF0aW9uRWxlbWVudHtjb25zdHJ1Y3Rvcih0KXtzdXBlcih0LHtpc1JlbmRlcmFibGU6ISEodC5kYXRhLmhhc1BvcHVwfHx0LmRhdGEudGl0bGVPYmo/LnN0cnx8dC5kYXRhLmNvbnRlbnRzT2JqPy5zdHJ8fHQuZGF0YS5yaWNoVGV4dD8uc3RyKSxpZ25vcmVCb3JkZXI6ITAsY3JlYXRlUXVhZHJpbGF0ZXJhbHM6ITB9KX1yZW5kZXIoKXt0aGlzLmRhdGEuaGFzUG9wdXB8fHRoaXMuX2NyZWF0ZVBvcHVwKG51bGwsdGhpcy5kYXRhKTtpZih0aGlzLnF1YWRyaWxhdGVyYWxzKXJldHVybiB0aGlzLl9yZW5kZXJRdWFkcmlsYXRlcmFscygic3RyaWtlb3V0QW5ub3RhdGlvbiIpO3RoaXMuY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoInN0cmlrZW91dEFubm90YXRpb24iKTtyZXR1cm4gdGhpcy5jb250YWluZXJ9fWNsYXNzIFN0YW1wQW5ub3RhdGlvbkVsZW1lbnQgZXh0ZW5kcyBBbm5vdGF0aW9uRWxlbWVudHtjb25zdHJ1Y3Rvcih0KXtzdXBlcih0LHtpc1JlbmRlcmFibGU6ISEodC5kYXRhLmhhc1BvcHVwfHx0LmRhdGEudGl0bGVPYmo/LnN0cnx8dC5kYXRhLmNvbnRlbnRzT2JqPy5zdHJ8fHQuZGF0YS5yaWNoVGV4dD8uc3RyKSxpZ25vcmVCb3JkZXI6ITB9KX1yZW5kZXIoKXt0aGlzLmNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCJzdGFtcEFubm90YXRpb24iKTt0aGlzLmRhdGEuaGFzUG9wdXB8fHRoaXMuX2NyZWF0ZVBvcHVwKG51bGwsdGhpcy5kYXRhKTtyZXR1cm4gdGhpcy5jb250YWluZXJ9fWNsYXNzIEZpbGVBdHRhY2htZW50QW5ub3RhdGlvbkVsZW1lbnQgZXh0ZW5kcyBBbm5vdGF0aW9uRWxlbWVudHtjb25zdHJ1Y3Rvcih0KXtzdXBlcih0LHtpc1JlbmRlcmFibGU6ITB9KTtjb25zdHtmaWxlbmFtZTplLGNvbnRlbnQ6c309dGhpcy5kYXRhLmZpbGU7dGhpcy5maWxlbmFtZT0oMCxuLmdldEZpbGVuYW1lRnJvbVVybCkoZSwhMCk7dGhpcy5jb250ZW50PXM7dGhpcy5saW5rU2VydmljZS5ldmVudEJ1cz8uZGlzcGF0Y2goImZpbGVhdHRhY2htZW50YW5ub3RhdGlvbiIse3NvdXJjZTp0aGlzLGZpbGVuYW1lOmUsY29udGVudDpzfSl9cmVuZGVyKCl7dGhpcy5jb250YWluZXIuY2xhc3NMaXN0LmFkZCgiZmlsZUF0dGFjaG1lbnRBbm5vdGF0aW9uIik7bGV0IHQ7aWYodGhpcy5kYXRhLmhhc0FwcGVhcmFuY2UpdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtlbHNle3Q9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW1nIik7dC5zcmM9YCR7dGhpcy5pbWFnZVJlc291cmNlc1BhdGh9YW5ub3RhdGlvbi0key9wYXBlcmNsaXAvaS50ZXN0KHRoaXMuZGF0YS5uYW1lKT8icGFwZXJjbGlwIjoicHVzaHBpbiJ9LnN2Z2B9dC5jbGFzc0xpc3QuYWRkKCJwb3B1cFRyaWdnZXJBcmVhIik7dC5hZGRFdmVudExpc3RlbmVyKCJkYmxjbGljayIsdGhpcy5fZG93bmxvYWQuYmluZCh0aGlzKSk7IXRoaXMuZGF0YS5oYXNQb3B1cCYmKHRoaXMuZGF0YS50aXRsZU9iaj8uc3RyfHx0aGlzLmRhdGEuY29udGVudHNPYmo/LnN0cnx8dGhpcy5kYXRhLnJpY2hUZXh0KSYmdGhpcy5fY3JlYXRlUG9wdXAodCx0aGlzLmRhdGEpO3RoaXMuY29udGFpbmVyLmFwcGVuZCh0KTtyZXR1cm4gdGhpcy5jb250YWluZXJ9X2Rvd25sb2FkKCl7dGhpcy5kb3dubG9hZE1hbmFnZXI/Lm9wZW5PckRvd25sb2FkRGF0YSh0aGlzLmNvbnRhaW5lcix0aGlzLmNvbnRlbnQsdGhpcy5maWxlbmFtZSl9fWNsYXNzIEFubm90YXRpb25MYXllcntzdGF0aWMjSmUodCxlLHMsaSl7Y29uc3QgYT10LmZpcnN0Q2hpbGR8fHQ7YS5pZD1gJHtuLkFubm90YXRpb25QcmVmaXh9JHtlfWA7cy5hcHBlbmQodCk7aT8ubW92ZUVsZW1lbnRJbkRPTShzLHQsYSwhMSl9c3RhdGljIHJlbmRlcih0KXtjb25zdHthbm5vdGF0aW9uczplLGRpdjpzLHZpZXdwb3J0OnIsYWNjZXNzaWJpbGl0eU1hbmFnZXI6b309dDsoMCxuLnNldExheWVyRGltZW5zaW9ucykocyxyKTtjb25zdCBsPXtkYXRhOm51bGwsbGF5ZXI6cyxwYWdlOnQucGFnZSx2aWV3cG9ydDpyLGxpbmtTZXJ2aWNlOnQubGlua1NlcnZpY2UsZG93bmxvYWRNYW5hZ2VyOnQuZG93bmxvYWRNYW5hZ2VyLGltYWdlUmVzb3VyY2VzUGF0aDp0LmltYWdlUmVzb3VyY2VzUGF0aHx8IiIscmVuZGVyRm9ybXM6ITEhPT10LnJlbmRlckZvcm1zLHN2Z0ZhY3Rvcnk6bmV3IG4uRE9NU1ZHRmFjdG9yeSxhbm5vdGF0aW9uU3RvcmFnZTp0LmFubm90YXRpb25TdG9yYWdlfHxuZXcgYS5Bbm5vdGF0aW9uU3RvcmFnZSxlbmFibGVTY3JpcHRpbmc6ITA9PT10LmVuYWJsZVNjcmlwdGluZyxoYXNKU0FjdGlvbnM6dC5oYXNKU0FjdGlvbnMsZmllbGRPYmplY3RzOnQuZmllbGRPYmplY3RzfTtsZXQgYz0wO2Zvcihjb25zdCB0IG9mIGUpe2lmKHQubm9IVE1MKWNvbnRpbnVlO2lmKHQuYW5ub3RhdGlvblR5cGUhPT1pLkFubm90YXRpb25UeXBlLlBPUFVQKXtjb25zdHt3aWR0aDplLGhlaWdodDpzfT1nZXRSZWN0RGltcyh0LnJlY3QpO2lmKGU8PTB8fHM8PTApY29udGludWV9bC5kYXRhPXQ7Y29uc3QgZT1Bbm5vdGF0aW9uRWxlbWVudEZhY3RvcnkuY3JlYXRlKGwpO2lmKCFlLmlzUmVuZGVyYWJsZSljb250aW51ZTtjb25zdCBuPWUucmVuZGVyKCk7dC5oaWRkZW4mJihuLnN0eWxlLnZpc2liaWxpdHk9ImhpZGRlbiIpO2lmKEFycmF5LmlzQXJyYXkobikpZm9yKGNvbnN0IGUgb2Ygbil7ZS5zdHlsZS56SW5kZXg9YysrO0Fubm90YXRpb25MYXllci4jSmUoZSx0LmlkLHMsbyl9ZWxzZXtuLnN0eWxlLnpJbmRleD1jKys7ZSBpbnN0YW5jZW9mIFBvcHVwQW5ub3RhdGlvbkVsZW1lbnQ/cy5wcmVwZW5kKG4pOkFubm90YXRpb25MYXllci4jSmUobix0LmlkLHMsbyl9fXRoaXMuI1FlKHMsdC5hbm5vdGF0aW9uQ2FudmFzTWFwKX1zdGF0aWMgdXBkYXRlKHQpe2NvbnN0e2Fubm90YXRpb25DYW52YXNNYXA6ZSxkaXY6cyx2aWV3cG9ydDppfT10OygwLG4uc2V0TGF5ZXJEaW1lbnNpb25zKShzLHtyb3RhdGlvbjppLnJvdGF0aW9ufSk7dGhpcy4jUWUocyxlKTtzLmhpZGRlbj0hMX1zdGF0aWMjUWUodCxlKXtpZihlKXtmb3IoY29uc3RbcyxpXW9mIGUpe2NvbnN0IGU9dC5xdWVyeVNlbGVjdG9yKGBbZGF0YS1hbm5vdGF0aW9uLWlkPSIke3N9Il1gKTtpZighZSljb250aW51ZTtjb25zdHtmaXJzdENoaWxkOm59PWU7bj8iQ0FOVkFTIj09PW4ubm9kZU5hbWU/bi5yZXBsYWNlV2l0aChpKTpuLmJlZm9yZShpKTplLmFwcGVuZChpKX1lLmNsZWFyKCl9fX1lLkFubm90YXRpb25MYXllcj1Bbm5vdGF0aW9uTGF5ZXJ9LCh0LGUpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO2UuQ29sb3JDb252ZXJ0ZXJzPXZvaWQgMDtmdW5jdGlvbiBtYWtlQ29sb3JDb21wKHQpe3JldHVybiBNYXRoLmZsb29yKDI1NSpNYXRoLm1heCgwLE1hdGgubWluKDEsdCkpKS50b1N0cmluZygxNikucGFkU3RhcnQoMiwiMCIpfWUuQ29sb3JDb252ZXJ0ZXJzPWNsYXNzIENvbG9yQ29udmVydGVyc3tzdGF0aWMgQ01ZS19HKFt0LGUscyxpXSl7cmV0dXJuWyJHIiwxLU1hdGgubWluKDEsLjMqdCsuNTkqcysuMTEqZStpKV19c3RhdGljIEdfQ01ZSyhbdF0pe3JldHVyblsiQ01ZSyIsMCwwLDAsMS10XX1zdGF0aWMgR19SR0IoW3RdKXtyZXR1cm5bIlJHQiIsdCx0LHRdfXN0YXRpYyBHX0hUTUwoW3RdKXtjb25zdCBlPW1ha2VDb2xvckNvbXAodCk7cmV0dXJuYCMke2V9JHtlfSR7ZX1gfXN0YXRpYyBSR0JfRyhbdCxlLHNdKXtyZXR1cm5bIkciLC4zKnQrLjU5KmUrLjExKnNdfXN0YXRpYyBSR0JfSFRNTChbdCxlLHNdKXtyZXR1cm5gIyR7bWFrZUNvbG9yQ29tcCh0KX0ke21ha2VDb2xvckNvbXAoZSl9JHttYWtlQ29sb3JDb21wKHMpfWB9c3RhdGljIFRfSFRNTCgpe3JldHVybiIjMDAwMDAwMDAifXN0YXRpYyBDTVlLX1JHQihbdCxlLHMsaV0pe3JldHVyblsiUkdCIiwxLU1hdGgubWluKDEsdCtpKSwxLU1hdGgubWluKDEscytpKSwxLU1hdGgubWluKDEsZStpKV19c3RhdGljIENNWUtfSFRNTCh0KXtjb25zdCBlPXRoaXMuQ01ZS19SR0IodCkuc2xpY2UoMSk7cmV0dXJuIHRoaXMuUkdCX0hUTUwoZSl9c3RhdGljIFJHQl9DTVlLKFt0LGUsc10pe2NvbnN0IGk9MS10LG49MS1lLGE9MS1zO3JldHVyblsiQ01ZSyIsaSxuLGEsTWF0aC5taW4oaSxuLGEpXX19fSwodCxlLHMpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO2UuWGZhTGF5ZXI9dm9pZCAwO3ZhciBpPXMoMTkpO2UuWGZhTGF5ZXI9Y2xhc3MgWGZhTGF5ZXJ7c3RhdGljIHNldHVwU3RvcmFnZSh0LGUscyxpLG4pe2NvbnN0IGE9aS5nZXRWYWx1ZShlLHt2YWx1ZTpudWxsfSk7c3dpdGNoKHMubmFtZSl7Y2FzZSJ0ZXh0YXJlYSI6bnVsbCE9PWEudmFsdWUmJih0LnRleHRDb250ZW50PWEudmFsdWUpO2lmKCJwcmludCI9PT1uKWJyZWFrO3QuYWRkRXZlbnRMaXN0ZW5lcigiaW5wdXQiLCh0PT57aS5zZXRWYWx1ZShlLHt2YWx1ZTp0LnRhcmdldC52YWx1ZX0pfSkpO2JyZWFrO2Nhc2UiaW5wdXQiOmlmKCJyYWRpbyI9PT1zLmF0dHJpYnV0ZXMudHlwZXx8ImNoZWNrYm94Ij09PXMuYXR0cmlidXRlcy50eXBlKXthLnZhbHVlPT09cy5hdHRyaWJ1dGVzLnhmYU9uP3Quc2V0QXR0cmlidXRlKCJjaGVja2VkIiwhMCk6YS52YWx1ZT09PXMuYXR0cmlidXRlcy54ZmFPZmYmJnQucmVtb3ZlQXR0cmlidXRlKCJjaGVja2VkIik7aWYoInByaW50Ij09PW4pYnJlYWs7dC5hZGRFdmVudExpc3RlbmVyKCJjaGFuZ2UiLCh0PT57aS5zZXRWYWx1ZShlLHt2YWx1ZTp0LnRhcmdldC5jaGVja2VkP3QudGFyZ2V0LmdldEF0dHJpYnV0ZSgieGZhT24iKTp0LnRhcmdldC5nZXRBdHRyaWJ1dGUoInhmYU9mZiIpfSl9KSl9ZWxzZXtudWxsIT09YS52YWx1ZSYmdC5zZXRBdHRyaWJ1dGUoInZhbHVlIixhLnZhbHVlKTtpZigicHJpbnQiPT09bilicmVhazt0LmFkZEV2ZW50TGlzdGVuZXIoImlucHV0IiwodD0+e2kuc2V0VmFsdWUoZSx7dmFsdWU6dC50YXJnZXQudmFsdWV9KX0pKX1icmVhaztjYXNlInNlbGVjdCI6aWYobnVsbCE9PWEudmFsdWUpZm9yKGNvbnN0IHQgb2Ygcy5jaGlsZHJlbil0LmF0dHJpYnV0ZXMudmFsdWU9PT1hLnZhbHVlJiYodC5hdHRyaWJ1dGVzLnNlbGVjdGVkPSEwKTt0LmFkZEV2ZW50TGlzdGVuZXIoImlucHV0IiwodD0+e2NvbnN0IHM9dC50YXJnZXQub3B0aW9ucyxuPS0xPT09cy5zZWxlY3RlZEluZGV4PyIiOnNbcy5zZWxlY3RlZEluZGV4XS52YWx1ZTtpLnNldFZhbHVlKGUse3ZhbHVlOm59KX0pKX19c3RhdGljIHNldEF0dHJpYnV0ZXMoe2h0bWw6dCxlbGVtZW50OmUsc3RvcmFnZTpzPW51bGwsaW50ZW50OmksbGlua1NlcnZpY2U6bn0pe2NvbnN0e2F0dHJpYnV0ZXM6YX09ZSxyPXQgaW5zdGFuY2VvZiBIVE1MQW5jaG9yRWxlbWVudDsicmFkaW8iPT09YS50eXBlJiYoYS5uYW1lPWAke2EubmFtZX0tJHtpfWApO2Zvcihjb25zdFtlLHNdb2YgT2JqZWN0LmVudHJpZXMoYSkpaWYobnVsbCE9cylzd2l0Y2goZSl7Y2FzZSJjbGFzcyI6cy5sZW5ndGgmJnQuc2V0QXR0cmlidXRlKGUscy5qb2luKCIgIikpO2JyZWFrO2Nhc2UiZGF0YUlkIjpicmVhaztjYXNlImlkIjp0LnNldEF0dHJpYnV0ZSgiZGF0YS1lbGVtZW50LWlkIixzKTticmVhaztjYXNlInN0eWxlIjpPYmplY3QuYXNzaWduKHQuc3R5bGUscyk7YnJlYWs7Y2FzZSJ0ZXh0Q29udGVudCI6dC50ZXh0Q29udGVudD1zO2JyZWFrO2RlZmF1bHQ6KCFyfHwiaHJlZiIhPT1lJiYibmV3V2luZG93IiE9PWUpJiZ0LnNldEF0dHJpYnV0ZShlLHMpfXImJm4uYWRkTGlua0F0dHJpYnV0ZXModCxhLmhyZWYsYS5uZXdXaW5kb3cpO3MmJmEuZGF0YUlkJiZ0aGlzLnNldHVwU3RvcmFnZSh0LGEuZGF0YUlkLGUscyl9c3RhdGljIHJlbmRlcih0KXtjb25zdCBlPXQuYW5ub3RhdGlvblN0b3JhZ2Uscz10LmxpbmtTZXJ2aWNlLG49dC54ZmFIdG1sLGE9dC5pbnRlbnR8fCJkaXNwbGF5IixyPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQobi5uYW1lKTtuLmF0dHJpYnV0ZXMmJnRoaXMuc2V0QXR0cmlidXRlcyh7aHRtbDpyLGVsZW1lbnQ6bixpbnRlbnQ6YSxsaW5rU2VydmljZTpzfSk7Y29uc3Qgbz1bW24sLTEscl1dLGw9dC5kaXY7bC5hcHBlbmQocik7aWYodC52aWV3cG9ydCl7Y29uc3QgZT1gbWF0cml4KCR7dC52aWV3cG9ydC50cmFuc2Zvcm0uam9pbigiLCIpfSlgO2wuc3R5bGUudHJhbnNmb3JtPWV9InJpY2hUZXh0IiE9PWEmJmwuc2V0QXR0cmlidXRlKCJjbGFzcyIsInhmYUxheWVyIHhmYUZvbnQiKTtjb25zdCBjPVtdO2Zvcig7by5sZW5ndGg+MDspe2NvbnN0W3QsbixyXT1vLmF0KC0xKTtpZihuKzE9PT10LmNoaWxkcmVuLmxlbmd0aCl7by5wb3AoKTtjb250aW51ZX1jb25zdCBsPXQuY2hpbGRyZW5bKytvLmF0KC0xKVsxXV07aWYobnVsbD09PWwpY29udGludWU7Y29uc3R7bmFtZTpofT1sO2lmKCIjdGV4dCI9PT1oKXtjb25zdCB0PWRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGwudmFsdWUpO2MucHVzaCh0KTtyLmFwcGVuZCh0KTtjb250aW51ZX1sZXQgZDtkPWw/LmF0dHJpYnV0ZXM/LnhtbG5zP2RvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhsLmF0dHJpYnV0ZXMueG1sbnMsaCk6ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChoKTtyLmFwcGVuZChkKTtsLmF0dHJpYnV0ZXMmJnRoaXMuc2V0QXR0cmlidXRlcyh7aHRtbDpkLGVsZW1lbnQ6bCxzdG9yYWdlOmUsaW50ZW50OmEsbGlua1NlcnZpY2U6c30pO2lmKGwuY2hpbGRyZW4mJmwuY2hpbGRyZW4ubGVuZ3RoPjApby5wdXNoKFtsLC0xLGRdKTtlbHNlIGlmKGwudmFsdWUpe2NvbnN0IHQ9ZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUobC52YWx1ZSk7aS5YZmFUZXh0LnNob3VsZEJ1aWxkVGV4dChoKSYmYy5wdXNoKHQpO2QuYXBwZW5kKHQpfX1mb3IoY29uc3QgdCBvZiBsLnF1ZXJ5U2VsZWN0b3JBbGwoIi54ZmFOb25JbnRlcmFjdGl2ZSBpbnB1dCwgLnhmYU5vbkludGVyYWN0aXZlIHRleHRhcmVhIikpdC5zZXRBdHRyaWJ1dGUoInJlYWRPbmx5IiwhMCk7cmV0dXJue3RleHREaXZzOmN9fXN0YXRpYyB1cGRhdGUodCl7Y29uc3QgZT1gbWF0cml4KCR7dC52aWV3cG9ydC50cmFuc2Zvcm0uam9pbigiLCIpfSlgO3QuZGl2LnN0eWxlLnRyYW5zZm9ybT1lO3QuZGl2LmhpZGRlbj0hMX19fSwodCxlLHMpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO2UuU1ZHR3JhcGhpY3M9dm9pZCAwO3ZhciBpPXMoNiksbj1zKDEpLGE9cygxMCk7bGV0IHI9Y2xhc3N7Y29uc3RydWN0b3IoKXsoMCxuLnVucmVhY2hhYmxlKSgiTm90IGltcGxlbWVudGVkOiBTVkdHcmFwaGljcyIpfX07ZS5TVkdHcmFwaGljcz1yO3tjb25zdCBvPXtmb250U3R5bGU6Im5vcm1hbCIsZm9udFdlaWdodDoibm9ybWFsIixmaWxsQ29sb3I6IiMwMDAwMDAifSxsPSJodHRwOi8vd3d3LnczLm9yZy9YTUwvMTk5OC9uYW1lc3BhY2UiLGM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiLGg9WyJidXR0Iiwicm91bmQiLCJzcXVhcmUiXSxkPVsibWl0ZXIiLCJyb3VuZCIsImJldmVsIl0sY3JlYXRlT2JqZWN0VVJMPWZ1bmN0aW9uKHQsZT0iIixzPSExKXtpZihVUkwuY3JlYXRlT2JqZWN0VVJMJiYidW5kZWZpbmVkIiE9dHlwZW9mIEJsb2ImJiFzKXJldHVybiBVUkwuY3JlYXRlT2JqZWN0VVJMKG5ldyBCbG9iKFt0XSx7dHlwZTplfSkpO2NvbnN0IGk9IkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89IjtsZXQgbj1gZGF0YToke2V9O2Jhc2U2NCxgO2ZvcihsZXQgZT0wLHM9dC5sZW5ndGg7ZTxzO2UrPTMpe2NvbnN0IGE9MjU1JnRbZV0scj0yNTUmdFtlKzFdLG89MjU1JnRbZSsyXTtuKz1pW2E+PjJdK2lbKDMmYSk8PDR8cj4+NF0raVtlKzE8cz8oMTUmcik8PDJ8bz4+Njo2NF0raVtlKzI8cz82MyZvOjY0XX1yZXR1cm4gbn0sdT1mdW5jdGlvbigpe2NvbnN0IHQ9bmV3IFVpbnQ4QXJyYXkoWzEzNyw4MCw3OCw3MSwxMywxMCwyNiwxMF0pLGU9bmV3IEludDMyQXJyYXkoMjU2KTtmb3IobGV0IHQ9MDt0PDI1Njt0Kyspe2xldCBzPXQ7Zm9yKGxldCB0PTA7dDw4O3QrKylzPTEmcz8zOTg4MjkyMzg0XnM+PjEmMjE0NzQ4MzY0NzpzPj4xJjIxNDc0ODM2NDc7ZVt0XT1zfWZ1bmN0aW9uIHdyaXRlUG5nQ2h1bmsodCxzLGksbil7bGV0IGE9bjtjb25zdCByPXMubGVuZ3RoO2lbYV09cj4+MjQmMjU1O2lbYSsxXT1yPj4xNiYyNTU7aVthKzJdPXI+PjgmMjU1O2lbYSszXT0yNTUmcjthKz00O2lbYV09MjU1JnQuY2hhckNvZGVBdCgwKTtpW2ErMV09MjU1JnQuY2hhckNvZGVBdCgxKTtpW2ErMl09MjU1JnQuY2hhckNvZGVBdCgyKTtpW2ErM109MjU1JnQuY2hhckNvZGVBdCgzKTthKz00O2kuc2V0KHMsYSk7YSs9cy5sZW5ndGg7Y29uc3Qgbz1mdW5jdGlvbiBjcmMzMih0LHMsaSl7bGV0IG49LTE7Zm9yKGxldCBhPXM7YTxpO2ErKyl7Y29uc3Qgcz0yNTUmKG5edFthXSk7bj1uPj4+OF5lW3NdfXJldHVybi0xXm59KGksbis0LGEpO2lbYV09bz4+MjQmMjU1O2lbYSsxXT1vPj4xNiYyNTU7aVthKzJdPW8+PjgmMjU1O2lbYSszXT0yNTUmb31mdW5jdGlvbiBkZWZsYXRlU3luY1VuY29tcHJlc3NlZCh0KXtsZXQgZT10Lmxlbmd0aDtjb25zdCBzPTY1NTM1LGk9TWF0aC5jZWlsKGUvcyksbj1uZXcgVWludDhBcnJheSgyK2UrNSppKzQpO2xldCBhPTA7blthKytdPTEyMDtuW2ErK109MTU2O2xldCByPTA7Zm9yKDtlPnM7KXtuW2ErK109MDtuW2ErK109MjU1O25bYSsrXT0yNTU7blthKytdPTA7blthKytdPTA7bi5zZXQodC5zdWJhcnJheShyLHIrcyksYSk7YSs9cztyKz1zO2UtPXN9blthKytdPTE7blthKytdPTI1NSZlO25bYSsrXT1lPj44JjI1NTtuW2ErK109MjU1Jn5lO25bYSsrXT0oNjU1MzUmfmUpPj44JjI1NTtuLnNldCh0LnN1YmFycmF5KHIpLGEpO2ErPXQubGVuZ3RoLXI7Y29uc3Qgbz1mdW5jdGlvbiBhZGxlcjMyKHQsZSxzKXtsZXQgaT0xLG49MDtmb3IobGV0IGE9ZTthPHM7KythKXtpPShpKygyNTUmdFthXSkpJTY1NTIxO249KG4raSklNjU1MjF9cmV0dXJuIG48PDE2fGl9KHQsMCx0Lmxlbmd0aCk7blthKytdPW8+PjI0JjI1NTtuW2ErK109bz4+MTYmMjU1O25bYSsrXT1vPj44JjI1NTtuW2ErK109MjU1Jm87cmV0dXJuIG59ZnVuY3Rpb24gZW5jb2RlKGUscyxpLHIpe2NvbnN0IG89ZS53aWR0aCxsPWUuaGVpZ2h0O2xldCBjLGgsZDtjb25zdCB1PWUuZGF0YTtzd2l0Y2gocyl7Y2FzZSBuLkltYWdlS2luZC5HUkFZU0NBTEVfMUJQUDpoPTA7Yz0xO2Q9bys3Pj4zO2JyZWFrO2Nhc2Ugbi5JbWFnZUtpbmQuUkdCXzI0QlBQOmg9MjtjPTg7ZD0zKm87YnJlYWs7Y2FzZSBuLkltYWdlS2luZC5SR0JBXzMyQlBQOmg9NjtjPTg7ZD00Km87YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoImludmFsaWQgZm9ybWF0Iil9Y29uc3QgcD1uZXcgVWludDhBcnJheSgoMStkKSpsKTtsZXQgZj0wLGc9MDtmb3IobGV0IHQ9MDt0PGw7Kyt0KXtwW2YrK109MDtwLnNldCh1LnN1YmFycmF5KGcsZytkKSxmKTtnKz1kO2YrPWR9aWYocz09PW4uSW1hZ2VLaW5kLkdSQVlTQ0FMRV8xQlBQJiZyKXtmPTA7Zm9yKGxldCB0PTA7dDxsO3QrKyl7ZisrO2ZvcihsZXQgdD0wO3Q8ZDt0KyspcFtmKytdXj0yNTV9fWNvbnN0IG09bmV3IFVpbnQ4QXJyYXkoW28+PjI0JjI1NSxvPj4xNiYyNTUsbz4+OCYyNTUsMjU1Jm8sbD4+MjQmMjU1LGw+PjE2JjI1NSxsPj44JjI1NSwyNTUmbCxjLGgsMCwwLDBdKSxiPWZ1bmN0aW9uIGRlZmxhdGVTeW5jKHQpe2lmKCFhLmlzTm9kZUpTKXJldHVybiBkZWZsYXRlU3luY1VuY29tcHJlc3NlZCh0KTt0cnl7bGV0IGU7ZT1wYXJzZUludChwcm9jZXNzLnZlcnNpb25zLm5vZGUpPj04P3Q6QnVmZmVyLmZyb20odCk7Y29uc3Qgcz1yZXF1aXJlKCJ6bGliIikuZGVmbGF0ZVN5bmMoZSx7bGV2ZWw6OX0pO3JldHVybiBzIGluc3RhbmNlb2YgVWludDhBcnJheT9zOm5ldyBVaW50OEFycmF5KHMpfWNhdGNoKHQpeygwLG4ud2FybikoIk5vdCBjb21wcmVzc2luZyBQTkcgYmVjYXVzZSB6bGliLmRlZmxhdGVTeW5jIGlzIHVuYXZhaWxhYmxlOiAiK3QpfXJldHVybiBkZWZsYXRlU3luY1VuY29tcHJlc3NlZCh0KX0ocCksQT10Lmxlbmd0aCszNittLmxlbmd0aCtiLmxlbmd0aCxfPW5ldyBVaW50OEFycmF5KEEpO2xldCB5PTA7Xy5zZXQodCx5KTt5Kz10Lmxlbmd0aDt3cml0ZVBuZ0NodW5rKCJJSERSIixtLF8seSk7eSs9MTIrbS5sZW5ndGg7d3JpdGVQbmdDaHVuaygiSURBVEEiLGIsXyx5KTt5Kz0xMitiLmxlbmd0aDt3cml0ZVBuZ0NodW5rKCJJRU5EIixuZXcgVWludDhBcnJheSgwKSxfLHkpO3JldHVybiBjcmVhdGVPYmplY3RVUkwoXywiaW1hZ2UvcG5nIixpKX1yZXR1cm4gZnVuY3Rpb24gY29udmVydEltZ0RhdGFUb1BuZyh0LGUscyl7cmV0dXJuIGVuY29kZSh0LHZvaWQgMD09PXQua2luZD9uLkltYWdlS2luZC5HUkFZU0NBTEVfMUJQUDp0LmtpbmQsZSxzKX19KCk7Y2xhc3MgU1ZHRXh0cmFTdGF0ZXtjb25zdHJ1Y3Rvcigpe3RoaXMuZm9udFNpemVTY2FsZT0xO3RoaXMuZm9udFdlaWdodD1vLmZvbnRXZWlnaHQ7dGhpcy5mb250U2l6ZT0wO3RoaXMudGV4dE1hdHJpeD1uLklERU5USVRZX01BVFJJWDt0aGlzLmZvbnRNYXRyaXg9bi5GT05UX0lERU5USVRZX01BVFJJWDt0aGlzLmxlYWRpbmc9MDt0aGlzLnRleHRSZW5kZXJpbmdNb2RlPW4uVGV4dFJlbmRlcmluZ01vZGUuRklMTDt0aGlzLnRleHRNYXRyaXhTY2FsZT0xO3RoaXMueD0wO3RoaXMueT0wO3RoaXMubGluZVg9MDt0aGlzLmxpbmVZPTA7dGhpcy5jaGFyU3BhY2luZz0wO3RoaXMud29yZFNwYWNpbmc9MDt0aGlzLnRleHRIU2NhbGU9MTt0aGlzLnRleHRSaXNlPTA7dGhpcy5maWxsQ29sb3I9by5maWxsQ29sb3I7dGhpcy5zdHJva2VDb2xvcj0iIzAwMDAwMCI7dGhpcy5maWxsQWxwaGE9MTt0aGlzLnN0cm9rZUFscGhhPTE7dGhpcy5saW5lV2lkdGg9MTt0aGlzLmxpbmVKb2luPSIiO3RoaXMubGluZUNhcD0iIjt0aGlzLm1pdGVyTGltaXQ9MDt0aGlzLmRhc2hBcnJheT1bXTt0aGlzLmRhc2hQaGFzZT0wO3RoaXMuZGVwZW5kZW5jaWVzPVtdO3RoaXMuYWN0aXZlQ2xpcFVybD1udWxsO3RoaXMuY2xpcEdyb3VwPW51bGw7dGhpcy5tYXNrSWQ9IiJ9Y2xvbmUoKXtyZXR1cm4gT2JqZWN0LmNyZWF0ZSh0aGlzKX1zZXRDdXJyZW50UG9pbnQodCxlKXt0aGlzLng9dDt0aGlzLnk9ZX19ZnVuY3Rpb24gb3BMaXN0VG9UcmVlKHQpe2xldCBlPVtdO2NvbnN0IHM9W107Zm9yKGNvbnN0IGkgb2YgdClpZigic2F2ZSIhPT1pLmZuKSJyZXN0b3JlIj09PWkuZm4/ZT1zLnBvcCgpOmUucHVzaChpKTtlbHNle2UucHVzaCh7Zm5JZDo5MixmbjoiZ3JvdXAiLGl0ZW1zOltdfSk7cy5wdXNoKGUpO2U9ZS5hdCgtMSkuaXRlbXN9cmV0dXJuIGV9ZnVuY3Rpb24gcGYodCl7aWYoTnVtYmVyLmlzSW50ZWdlcih0KSlyZXR1cm4gdC50b1N0cmluZygpO2NvbnN0IGU9dC50b0ZpeGVkKDEwKTtsZXQgcz1lLmxlbmd0aC0xO2lmKCIwIiE9PWVbc10pcmV0dXJuIGU7ZG97cy0tfXdoaWxlKCIwIj09PWVbc10pO3JldHVybiBlLnN1YnN0cmluZygwLCIuIj09PWVbc10/czpzKzEpfWZ1bmN0aW9uIHBtKHQpe2lmKDA9PT10WzRdJiYwPT09dFs1XSl7aWYoMD09PXRbMV0mJjA9PT10WzJdKXJldHVybiAxPT09dFswXSYmMT09PXRbM10/IiI6YHNjYWxlKCR7cGYodFswXSl9ICR7cGYodFszXSl9KWA7aWYodFswXT09PXRbM10mJnRbMV09PT0tdFsyXSl7cmV0dXJuYHJvdGF0ZSgke3BmKDE4MCpNYXRoLmFjb3ModFswXSkvTWF0aC5QSSl9KWB9fWVsc2UgaWYoMT09PXRbMF0mJjA9PT10WzFdJiYwPT09dFsyXSYmMT09PXRbM10pcmV0dXJuYHRyYW5zbGF0ZSgke3BmKHRbNF0pfSAke3BmKHRbNV0pfSlgO3JldHVybmBtYXRyaXgoJHtwZih0WzBdKX0gJHtwZih0WzFdKX0gJHtwZih0WzJdKX0gJHtwZih0WzNdKX0gJHtwZih0WzRdKX0gJHtwZih0WzVdKX0pYH1sZXQgcD0wLGY9MCxnPTA7ZS5TVkdHcmFwaGljcz1yPWNsYXNze2NvbnN0cnVjdG9yKHQsZSxzPSExKXsoMCxpLmRlcHJlY2F0ZWQpKCJUaGUgU1ZHIGJhY2stZW5kIGlzIG5vIGxvbmdlciBtYWludGFpbmVkIGFuZCAqbWF5KiBiZSByZW1vdmVkIGluIHRoZSBmdXR1cmUuIik7dGhpcy5zdmdGYWN0b3J5PW5ldyBpLkRPTVNWR0ZhY3Rvcnk7dGhpcy5jdXJyZW50PW5ldyBTVkdFeHRyYVN0YXRlO3RoaXMudHJhbnNmb3JtTWF0cml4PW4uSURFTlRJVFlfTUFUUklYO3RoaXMudHJhbnNmb3JtU3RhY2s9W107dGhpcy5leHRyYVN0YWNrPVtdO3RoaXMuY29tbW9uT2Jqcz10O3RoaXMub2Jqcz1lO3RoaXMucGVuZGluZ0NsaXA9bnVsbDt0aGlzLnBlbmRpbmdFT0ZpbGw9ITE7dGhpcy5lbWJlZEZvbnRzPSExO3RoaXMuZW1iZWRkZWRGb250cz1PYmplY3QuY3JlYXRlKG51bGwpO3RoaXMuY3NzU3R5bGU9bnVsbDt0aGlzLmZvcmNlRGF0YVNjaGVtYT0hIXM7dGhpcy5fb3BlcmF0b3JJZE1hcHBpbmc9W107Zm9yKGNvbnN0IHQgaW4gbi5PUFMpdGhpcy5fb3BlcmF0b3JJZE1hcHBpbmdbbi5PUFNbdF1dPXR9Z2V0T2JqZWN0KHQsZT1udWxsKXtyZXR1cm4ic3RyaW5nIj09dHlwZW9mIHQ/dC5zdGFydHNXaXRoKCJnXyIpP3RoaXMuY29tbW9uT2Jqcy5nZXQodCk6dGhpcy5vYmpzLmdldCh0KTplfXNhdmUoKXt0aGlzLnRyYW5zZm9ybVN0YWNrLnB1c2godGhpcy50cmFuc2Zvcm1NYXRyaXgpO2NvbnN0IHQ9dGhpcy5jdXJyZW50O3RoaXMuZXh0cmFTdGFjay5wdXNoKHQpO3RoaXMuY3VycmVudD10LmNsb25lKCl9cmVzdG9yZSgpe3RoaXMudHJhbnNmb3JtTWF0cml4PXRoaXMudHJhbnNmb3JtU3RhY2sucG9wKCk7dGhpcy5jdXJyZW50PXRoaXMuZXh0cmFTdGFjay5wb3AoKTt0aGlzLnBlbmRpbmdDbGlwPW51bGw7dGhpcy50Z3JwPW51bGx9Z3JvdXAodCl7dGhpcy5zYXZlKCk7dGhpcy5leGVjdXRlT3BUcmVlKHQpO3RoaXMucmVzdG9yZSgpfWxvYWREZXBlbmRlbmNpZXModCl7Y29uc3QgZT10LmZuQXJyYXkscz10LmFyZ3NBcnJheTtmb3IobGV0IHQ9MCxpPWUubGVuZ3RoO3Q8aTt0KyspaWYoZVt0XT09PW4uT1BTLmRlcGVuZGVuY3kpZm9yKGNvbnN0IGUgb2Ygc1t0XSl7Y29uc3QgdD1lLnN0YXJ0c1dpdGgoImdfIik/dGhpcy5jb21tb25PYmpzOnRoaXMub2JqcyxzPW5ldyBQcm9taXNlKChzPT57dC5nZXQoZSxzKX0pKTt0aGlzLmN1cnJlbnQuZGVwZW5kZW5jaWVzLnB1c2gocyl9cmV0dXJuIFByb21pc2UuYWxsKHRoaXMuY3VycmVudC5kZXBlbmRlbmNpZXMpfXRyYW5zZm9ybSh0LGUscyxpLGEscil7Y29uc3Qgbz1bdCxlLHMsaSxhLHJdO3RoaXMudHJhbnNmb3JtTWF0cml4PW4uVXRpbC50cmFuc2Zvcm0odGhpcy50cmFuc2Zvcm1NYXRyaXgsbyk7dGhpcy50Z3JwPW51bGx9Z2V0U1ZHKHQsZSl7dGhpcy52aWV3cG9ydD1lO2NvbnN0IHM9dGhpcy5faW5pdGlhbGl6ZShlKTtyZXR1cm4gdGhpcy5sb2FkRGVwZW5kZW5jaWVzKHQpLnRoZW4oKCgpPT57dGhpcy50cmFuc2Zvcm1NYXRyaXg9bi5JREVOVElUWV9NQVRSSVg7dGhpcy5leGVjdXRlT3BUcmVlKHRoaXMuY29udmVydE9wTGlzdCh0KSk7cmV0dXJuIHN9KSl9Y29udmVydE9wTGlzdCh0KXtjb25zdCBlPXRoaXMuX29wZXJhdG9ySWRNYXBwaW5nLHM9dC5hcmdzQXJyYXksaT10LmZuQXJyYXksbj1bXTtmb3IobGV0IHQ9MCxhPWkubGVuZ3RoO3Q8YTt0Kyspe2NvbnN0IGE9aVt0XTtuLnB1c2goe2ZuSWQ6YSxmbjplW2FdLGFyZ3M6c1t0XX0pfXJldHVybiBvcExpc3RUb1RyZWUobil9ZXhlY3V0ZU9wVHJlZSh0KXtmb3IoY29uc3QgZSBvZiB0KXtjb25zdCB0PWUuZm4scz1lLmZuSWQsaT1lLmFyZ3M7c3dpdGNoKDB8cyl7Y2FzZSBuLk9QUy5iZWdpblRleHQ6dGhpcy5iZWdpblRleHQoKTticmVhaztjYXNlIG4uT1BTLmRlcGVuZGVuY3k6YnJlYWs7Y2FzZSBuLk9QUy5zZXRMZWFkaW5nOnRoaXMuc2V0TGVhZGluZyhpKTticmVhaztjYXNlIG4uT1BTLnNldExlYWRpbmdNb3ZlVGV4dDp0aGlzLnNldExlYWRpbmdNb3ZlVGV4dChpWzBdLGlbMV0pO2JyZWFrO2Nhc2Ugbi5PUFMuc2V0Rm9udDp0aGlzLnNldEZvbnQoaSk7YnJlYWs7Y2FzZSBuLk9QUy5zaG93VGV4dDpjYXNlIG4uT1BTLnNob3dTcGFjZWRUZXh0OnRoaXMuc2hvd1RleHQoaVswXSk7YnJlYWs7Y2FzZSBuLk9QUy5lbmRUZXh0OnRoaXMuZW5kVGV4dCgpO2JyZWFrO2Nhc2Ugbi5PUFMubW92ZVRleHQ6dGhpcy5tb3ZlVGV4dChpWzBdLGlbMV0pO2JyZWFrO2Nhc2Ugbi5PUFMuc2V0Q2hhclNwYWNpbmc6dGhpcy5zZXRDaGFyU3BhY2luZyhpWzBdKTticmVhaztjYXNlIG4uT1BTLnNldFdvcmRTcGFjaW5nOnRoaXMuc2V0V29yZFNwYWNpbmcoaVswXSk7YnJlYWs7Y2FzZSBuLk9QUy5zZXRIU2NhbGU6dGhpcy5zZXRIU2NhbGUoaVswXSk7YnJlYWs7Y2FzZSBuLk9QUy5zZXRUZXh0TWF0cml4OnRoaXMuc2V0VGV4dE1hdHJpeChpWzBdLGlbMV0saVsyXSxpWzNdLGlbNF0saVs1XSk7YnJlYWs7Y2FzZSBuLk9QUy5zZXRUZXh0UmlzZTp0aGlzLnNldFRleHRSaXNlKGlbMF0pO2JyZWFrO2Nhc2Ugbi5PUFMuc2V0VGV4dFJlbmRlcmluZ01vZGU6dGhpcy5zZXRUZXh0UmVuZGVyaW5nTW9kZShpWzBdKTticmVhaztjYXNlIG4uT1BTLnNldExpbmVXaWR0aDp0aGlzLnNldExpbmVXaWR0aChpWzBdKTticmVhaztjYXNlIG4uT1BTLnNldExpbmVKb2luOnRoaXMuc2V0TGluZUpvaW4oaVswXSk7YnJlYWs7Y2FzZSBuLk9QUy5zZXRMaW5lQ2FwOnRoaXMuc2V0TGluZUNhcChpWzBdKTticmVhaztjYXNlIG4uT1BTLnNldE1pdGVyTGltaXQ6dGhpcy5zZXRNaXRlckxpbWl0KGlbMF0pO2JyZWFrO2Nhc2Ugbi5PUFMuc2V0RmlsbFJHQkNvbG9yOnRoaXMuc2V0RmlsbFJHQkNvbG9yKGlbMF0saVsxXSxpWzJdKTticmVhaztjYXNlIG4uT1BTLnNldFN0cm9rZVJHQkNvbG9yOnRoaXMuc2V0U3Ryb2tlUkdCQ29sb3IoaVswXSxpWzFdLGlbMl0pO2JyZWFrO2Nhc2Ugbi5PUFMuc2V0U3Ryb2tlQ29sb3JOOnRoaXMuc2V0U3Ryb2tlQ29sb3JOKGkpO2JyZWFrO2Nhc2Ugbi5PUFMuc2V0RmlsbENvbG9yTjp0aGlzLnNldEZpbGxDb2xvck4oaSk7YnJlYWs7Y2FzZSBuLk9QUy5zaGFkaW5nRmlsbDp0aGlzLnNoYWRpbmdGaWxsKGlbMF0pO2JyZWFrO2Nhc2Ugbi5PUFMuc2V0RGFzaDp0aGlzLnNldERhc2goaVswXSxpWzFdKTticmVhaztjYXNlIG4uT1BTLnNldFJlbmRlcmluZ0ludGVudDp0aGlzLnNldFJlbmRlcmluZ0ludGVudChpWzBdKTticmVhaztjYXNlIG4uT1BTLnNldEZsYXRuZXNzOnRoaXMuc2V0RmxhdG5lc3MoaVswXSk7YnJlYWs7Y2FzZSBuLk9QUy5zZXRHU3RhdGU6dGhpcy5zZXRHU3RhdGUoaVswXSk7YnJlYWs7Y2FzZSBuLk9QUy5maWxsOnRoaXMuZmlsbCgpO2JyZWFrO2Nhc2Ugbi5PUFMuZW9GaWxsOnRoaXMuZW9GaWxsKCk7YnJlYWs7Y2FzZSBuLk9QUy5zdHJva2U6dGhpcy5zdHJva2UoKTticmVhaztjYXNlIG4uT1BTLmZpbGxTdHJva2U6dGhpcy5maWxsU3Ryb2tlKCk7YnJlYWs7Y2FzZSBuLk9QUy5lb0ZpbGxTdHJva2U6dGhpcy5lb0ZpbGxTdHJva2UoKTticmVhaztjYXNlIG4uT1BTLmNsaXA6dGhpcy5jbGlwKCJub256ZXJvIik7YnJlYWs7Y2FzZSBuLk9QUy5lb0NsaXA6dGhpcy5jbGlwKCJldmVub2RkIik7YnJlYWs7Y2FzZSBuLk9QUy5wYWludFNvbGlkQ29sb3JJbWFnZU1hc2s6dGhpcy5wYWludFNvbGlkQ29sb3JJbWFnZU1hc2soKTticmVhaztjYXNlIG4uT1BTLnBhaW50SW1hZ2VYT2JqZWN0OnRoaXMucGFpbnRJbWFnZVhPYmplY3QoaVswXSk7YnJlYWs7Y2FzZSBuLk9QUy5wYWludElubGluZUltYWdlWE9iamVjdDp0aGlzLnBhaW50SW5saW5lSW1hZ2VYT2JqZWN0KGlbMF0pO2JyZWFrO2Nhc2Ugbi5PUFMucGFpbnRJbWFnZU1hc2tYT2JqZWN0OnRoaXMucGFpbnRJbWFnZU1hc2tYT2JqZWN0KGlbMF0pO2JyZWFrO2Nhc2Ugbi5PUFMucGFpbnRGb3JtWE9iamVjdEJlZ2luOnRoaXMucGFpbnRGb3JtWE9iamVjdEJlZ2luKGlbMF0saVsxXSk7YnJlYWs7Y2FzZSBuLk9QUy5wYWludEZvcm1YT2JqZWN0RW5kOnRoaXMucGFpbnRGb3JtWE9iamVjdEVuZCgpO2JyZWFrO2Nhc2Ugbi5PUFMuY2xvc2VQYXRoOnRoaXMuY2xvc2VQYXRoKCk7YnJlYWs7Y2FzZSBuLk9QUy5jbG9zZVN0cm9rZTp0aGlzLmNsb3NlU3Ryb2tlKCk7YnJlYWs7Y2FzZSBuLk9QUy5jbG9zZUZpbGxTdHJva2U6dGhpcy5jbG9zZUZpbGxTdHJva2UoKTticmVhaztjYXNlIG4uT1BTLmNsb3NlRU9GaWxsU3Ryb2tlOnRoaXMuY2xvc2VFT0ZpbGxTdHJva2UoKTticmVhaztjYXNlIG4uT1BTLm5leHRMaW5lOnRoaXMubmV4dExpbmUoKTticmVhaztjYXNlIG4uT1BTLnRyYW5zZm9ybTp0aGlzLnRyYW5zZm9ybShpWzBdLGlbMV0saVsyXSxpWzNdLGlbNF0saVs1XSk7YnJlYWs7Y2FzZSBuLk9QUy5jb25zdHJ1Y3RQYXRoOnRoaXMuY29uc3RydWN0UGF0aChpWzBdLGlbMV0pO2JyZWFrO2Nhc2Ugbi5PUFMuZW5kUGF0aDp0aGlzLmVuZFBhdGgoKTticmVhaztjYXNlIDkyOnRoaXMuZ3JvdXAoZS5pdGVtcyk7YnJlYWs7ZGVmYXVsdDooMCxuLndhcm4pKGBVbmltcGxlbWVudGVkIG9wZXJhdG9yICR7dH1gKX19fXNldFdvcmRTcGFjaW5nKHQpe3RoaXMuY3VycmVudC53b3JkU3BhY2luZz10fXNldENoYXJTcGFjaW5nKHQpe3RoaXMuY3VycmVudC5jaGFyU3BhY2luZz10fW5leHRMaW5lKCl7dGhpcy5tb3ZlVGV4dCgwLHRoaXMuY3VycmVudC5sZWFkaW5nKX1zZXRUZXh0TWF0cml4KHQsZSxzLGksbixhKXtjb25zdCByPXRoaXMuY3VycmVudDtyLnRleHRNYXRyaXg9ci5saW5lTWF0cml4PVt0LGUscyxpLG4sYV07ci50ZXh0TWF0cml4U2NhbGU9TWF0aC5oeXBvdCh0LGUpO3IueD1yLmxpbmVYPTA7ci55PXIubGluZVk9MDtyLnhjb29yZHM9W107ci55Y29vcmRzPVtdO3IudHNwYW49dGhpcy5zdmdGYWN0b3J5LmNyZWF0ZUVsZW1lbnQoInN2Zzp0c3BhbiIpO3IudHNwYW4uc2V0QXR0cmlidXRlTlMobnVsbCwiZm9udC1mYW1pbHkiLHIuZm9udEZhbWlseSk7ci50c3Bhbi5zZXRBdHRyaWJ1dGVOUyhudWxsLCJmb250LXNpemUiLGAke3BmKHIuZm9udFNpemUpfXB4YCk7ci50c3Bhbi5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ5IixwZigtci55KSk7ci50eHRFbGVtZW50PXRoaXMuc3ZnRmFjdG9yeS5jcmVhdGVFbGVtZW50KCJzdmc6dGV4dCIpO3IudHh0RWxlbWVudC5hcHBlbmQoci50c3Bhbil9YmVnaW5UZXh0KCl7Y29uc3QgdD10aGlzLmN1cnJlbnQ7dC54PXQubGluZVg9MDt0Lnk9dC5saW5lWT0wO3QudGV4dE1hdHJpeD1uLklERU5USVRZX01BVFJJWDt0LmxpbmVNYXRyaXg9bi5JREVOVElUWV9NQVRSSVg7dC50ZXh0TWF0cml4U2NhbGU9MTt0LnRzcGFuPXRoaXMuc3ZnRmFjdG9yeS5jcmVhdGVFbGVtZW50KCJzdmc6dHNwYW4iKTt0LnR4dEVsZW1lbnQ9dGhpcy5zdmdGYWN0b3J5LmNyZWF0ZUVsZW1lbnQoInN2Zzp0ZXh0Iik7dC50eHRncnA9dGhpcy5zdmdGYWN0b3J5LmNyZWF0ZUVsZW1lbnQoInN2ZzpnIik7dC54Y29vcmRzPVtdO3QueWNvb3Jkcz1bXX1tb3ZlVGV4dCh0LGUpe2NvbnN0IHM9dGhpcy5jdXJyZW50O3MueD1zLmxpbmVYKz10O3MueT1zLmxpbmVZKz1lO3MueGNvb3Jkcz1bXTtzLnljb29yZHM9W107cy50c3Bhbj10aGlzLnN2Z0ZhY3RvcnkuY3JlYXRlRWxlbWVudCgic3ZnOnRzcGFuIik7cy50c3Bhbi5zZXRBdHRyaWJ1dGVOUyhudWxsLCJmb250LWZhbWlseSIscy5mb250RmFtaWx5KTtzLnRzcGFuLnNldEF0dHJpYnV0ZU5TKG51bGwsImZvbnQtc2l6ZSIsYCR7cGYocy5mb250U2l6ZSl9cHhgKTtzLnRzcGFuLnNldEF0dHJpYnV0ZU5TKG51bGwsInkiLHBmKC1zLnkpKX1zaG93VGV4dCh0KXtjb25zdCBlPXRoaXMuY3VycmVudCxzPWUuZm9udCxpPWUuZm9udFNpemU7aWYoMD09PWkpcmV0dXJuO2NvbnN0IGE9ZS5mb250U2l6ZVNjYWxlLHI9ZS5jaGFyU3BhY2luZyxjPWUud29yZFNwYWNpbmcsaD1lLmZvbnREaXJlY3Rpb24sZD1lLnRleHRIU2NhbGUqaCx1PXMudmVydGljYWwscD11PzE6LTEsZj1zLmRlZmF1bHRWTWV0cmljcyxnPWkqZS5mb250TWF0cml4WzBdO2xldCBtPTA7Zm9yKGNvbnN0IG4gb2YgdCl7aWYobnVsbD09PW4pe20rPWgqYztjb250aW51ZX1pZigibnVtYmVyIj09dHlwZW9mIG4pe20rPXAqbippLzFlMztjb250aW51ZX1jb25zdCB0PShuLmlzU3BhY2U/YzowKStyLG89bi5mb250Q2hhcjtsZXQgbCxkLGIsQT1uLndpZHRoO2lmKHUpe2xldCB0O2NvbnN0IGU9bi52bWV0cmljfHxmO3Q9bi52bWV0cmljP2VbMV06LjUqQTt0PS10Kmc7Y29uc3Qgcz1lWzJdKmc7QT1lPy1lWzBdOkE7bD10L2E7ZD0obStzKS9hfWVsc2V7bD1tL2E7ZD0wfWlmKG4uaXNJbkZvbnR8fHMubWlzc2luZ0ZpbGUpe2UueGNvb3Jkcy5wdXNoKGUueCtsKTt1JiZlLnljb29yZHMucHVzaCgtZS55K2QpO2UudHNwYW4udGV4dENvbnRlbnQrPW99Yj11P0EqZy10Kmg6QSpnK3QqaDttKz1ifWUudHNwYW4uc2V0QXR0cmlidXRlTlMobnVsbCwieCIsZS54Y29vcmRzLm1hcChwZikuam9pbigiICIpKTt1P2UudHNwYW4uc2V0QXR0cmlidXRlTlMobnVsbCwieSIsZS55Y29vcmRzLm1hcChwZikuam9pbigiICIpKTplLnRzcGFuLnNldEF0dHJpYnV0ZU5TKG51bGwsInkiLHBmKC1lLnkpKTt1P2UueS09bTplLngrPW0qZDtlLnRzcGFuLnNldEF0dHJpYnV0ZU5TKG51bGwsImZvbnQtZmFtaWx5IixlLmZvbnRGYW1pbHkpO2UudHNwYW4uc2V0QXR0cmlidXRlTlMobnVsbCwiZm9udC1zaXplIixgJHtwZihlLmZvbnRTaXplKX1weGApO2UuZm9udFN0eWxlIT09by5mb250U3R5bGUmJmUudHNwYW4uc2V0QXR0cmlidXRlTlMobnVsbCwiZm9udC1zdHlsZSIsZS5mb250U3R5bGUpO2UuZm9udFdlaWdodCE9PW8uZm9udFdlaWdodCYmZS50c3Bhbi5zZXRBdHRyaWJ1dGVOUyhudWxsLCJmb250LXdlaWdodCIsZS5mb250V2VpZ2h0KTtjb25zdCBiPWUudGV4dFJlbmRlcmluZ01vZGUmbi5UZXh0UmVuZGVyaW5nTW9kZS5GSUxMX1NUUk9LRV9NQVNLO2lmKGI9PT1uLlRleHRSZW5kZXJpbmdNb2RlLkZJTEx8fGI9PT1uLlRleHRSZW5kZXJpbmdNb2RlLkZJTExfU1RST0tFKXtlLmZpbGxDb2xvciE9PW8uZmlsbENvbG9yJiZlLnRzcGFuLnNldEF0dHJpYnV0ZU5TKG51bGwsImZpbGwiLGUuZmlsbENvbG9yKTtlLmZpbGxBbHBoYTwxJiZlLnRzcGFuLnNldEF0dHJpYnV0ZU5TKG51bGwsImZpbGwtb3BhY2l0eSIsZS5maWxsQWxwaGEpfWVsc2UgZS50ZXh0UmVuZGVyaW5nTW9kZT09PW4uVGV4dFJlbmRlcmluZ01vZGUuQUREX1RPX1BBVEg/ZS50c3Bhbi5zZXRBdHRyaWJ1dGVOUyhudWxsLCJmaWxsIiwidHJhbnNwYXJlbnQiKTplLnRzcGFuLnNldEF0dHJpYnV0ZU5TKG51bGwsImZpbGwiLCJub25lIik7aWYoYj09PW4uVGV4dFJlbmRlcmluZ01vZGUuU1RST0tFfHxiPT09bi5UZXh0UmVuZGVyaW5nTW9kZS5GSUxMX1NUUk9LRSl7Y29uc3QgdD0xLyhlLnRleHRNYXRyaXhTY2FsZXx8MSk7dGhpcy5fc2V0U3Ryb2tlQXR0cmlidXRlcyhlLnRzcGFuLHQpfWxldCBBPWUudGV4dE1hdHJpeDtpZigwIT09ZS50ZXh0UmlzZSl7QT1BLnNsaWNlKCk7QVs1XSs9ZS50ZXh0UmlzZX1lLnR4dEVsZW1lbnQuc2V0QXR0cmlidXRlTlMobnVsbCwidHJhbnNmb3JtIixgJHtwbShBKX0gc2NhbGUoJHtwZihkKX0sIC0xKWApO2UudHh0RWxlbWVudC5zZXRBdHRyaWJ1dGVOUyhsLCJ4bWw6c3BhY2UiLCJwcmVzZXJ2ZSIpO2UudHh0RWxlbWVudC5hcHBlbmQoZS50c3Bhbik7ZS50eHRncnAuYXBwZW5kKGUudHh0RWxlbWVudCk7dGhpcy5fZW5zdXJlVHJhbnNmb3JtR3JvdXAoKS5hcHBlbmQoZS50eHRFbGVtZW50KX1zZXRMZWFkaW5nTW92ZVRleHQodCxlKXt0aGlzLnNldExlYWRpbmcoLWUpO3RoaXMubW92ZVRleHQodCxlKX1hZGRGb250U3R5bGUodCl7aWYoIXQuZGF0YSl0aHJvdyBuZXcgRXJyb3IoJ2FkZEZvbnRTdHlsZTogTm8gZm9udCBkYXRhIGF2YWlsYWJsZSwgZW5zdXJlIHRoYXQgdGhlICJmb250RXh0cmFQcm9wZXJ0aWVzIiBBUEkgcGFyYW1ldGVyIGlzIHNldC4nKTtpZighdGhpcy5jc3NTdHlsZSl7dGhpcy5jc3NTdHlsZT10aGlzLnN2Z0ZhY3RvcnkuY3JlYXRlRWxlbWVudCgic3ZnOnN0eWxlIik7dGhpcy5jc3NTdHlsZS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ0eXBlIiwidGV4dC9jc3MiKTt0aGlzLmRlZnMuYXBwZW5kKHRoaXMuY3NzU3R5bGUpfWNvbnN0IGU9Y3JlYXRlT2JqZWN0VVJMKHQuZGF0YSx0Lm1pbWV0eXBlLHRoaXMuZm9yY2VEYXRhU2NoZW1hKTt0aGlzLmNzc1N0eWxlLnRleHRDb250ZW50Kz1gQGZvbnQtZmFjZSB7IGZvbnQtZmFtaWx5OiAiJHt0LmxvYWRlZE5hbWV9Ijsgc3JjOiB1cmwoJHtlfSk7IH1cbmB9c2V0Rm9udCh0KXtjb25zdCBlPXRoaXMuY3VycmVudCxzPXRoaXMuY29tbW9uT2Jqcy5nZXQodFswXSk7bGV0IGk9dFsxXTtlLmZvbnQ9cztpZih0aGlzLmVtYmVkRm9udHMmJiFzLm1pc3NpbmdGaWxlJiYhdGhpcy5lbWJlZGRlZEZvbnRzW3MubG9hZGVkTmFtZV0pe3RoaXMuYWRkRm9udFN0eWxlKHMpO3RoaXMuZW1iZWRkZWRGb250c1tzLmxvYWRlZE5hbWVdPXN9ZS5mb250TWF0cml4PXMuZm9udE1hdHJpeHx8bi5GT05UX0lERU5USVRZX01BVFJJWDtsZXQgYT0ibm9ybWFsIjtzLmJsYWNrP2E9IjkwMCI6cy5ib2xkJiYoYT0iYm9sZCIpO2NvbnN0IHI9cy5pdGFsaWM/Iml0YWxpYyI6Im5vcm1hbCI7aWYoaTwwKXtpPS1pO2UuZm9udERpcmVjdGlvbj0tMX1lbHNlIGUuZm9udERpcmVjdGlvbj0xO2UuZm9udFNpemU9aTtlLmZvbnRGYW1pbHk9cy5sb2FkZWROYW1lO2UuZm9udFdlaWdodD1hO2UuZm9udFN0eWxlPXI7ZS50c3Bhbj10aGlzLnN2Z0ZhY3RvcnkuY3JlYXRlRWxlbWVudCgic3ZnOnRzcGFuIik7ZS50c3Bhbi5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ5IixwZigtZS55KSk7ZS54Y29vcmRzPVtdO2UueWNvb3Jkcz1bXX1lbmRUZXh0KCl7Y29uc3QgdD10aGlzLmN1cnJlbnQ7aWYodC50ZXh0UmVuZGVyaW5nTW9kZSZuLlRleHRSZW5kZXJpbmdNb2RlLkFERF9UT19QQVRIX0ZMQUcmJnQudHh0RWxlbWVudD8uaGFzQ2hpbGROb2RlcygpKXt0LmVsZW1lbnQ9dC50eHRFbGVtZW50O3RoaXMuY2xpcCgibm9uemVybyIpO3RoaXMuZW5kUGF0aCgpfX1zZXRMaW5lV2lkdGgodCl7dD4wJiYodGhpcy5jdXJyZW50LmxpbmVXaWR0aD10KX1zZXRMaW5lQ2FwKHQpe3RoaXMuY3VycmVudC5saW5lQ2FwPWhbdF19c2V0TGluZUpvaW4odCl7dGhpcy5jdXJyZW50LmxpbmVKb2luPWRbdF19c2V0TWl0ZXJMaW1pdCh0KXt0aGlzLmN1cnJlbnQubWl0ZXJMaW1pdD10fXNldFN0cm9rZUFscGhhKHQpe3RoaXMuY3VycmVudC5zdHJva2VBbHBoYT10fXNldFN0cm9rZVJHQkNvbG9yKHQsZSxzKXt0aGlzLmN1cnJlbnQuc3Ryb2tlQ29sb3I9bi5VdGlsLm1ha2VIZXhDb2xvcih0LGUscyl9c2V0RmlsbEFscGhhKHQpe3RoaXMuY3VycmVudC5maWxsQWxwaGE9dH1zZXRGaWxsUkdCQ29sb3IodCxlLHMpe3RoaXMuY3VycmVudC5maWxsQ29sb3I9bi5VdGlsLm1ha2VIZXhDb2xvcih0LGUscyk7dGhpcy5jdXJyZW50LnRzcGFuPXRoaXMuc3ZnRmFjdG9yeS5jcmVhdGVFbGVtZW50KCJzdmc6dHNwYW4iKTt0aGlzLmN1cnJlbnQueGNvb3Jkcz1bXTt0aGlzLmN1cnJlbnQueWNvb3Jkcz1bXX1zZXRTdHJva2VDb2xvck4odCl7dGhpcy5jdXJyZW50LnN0cm9rZUNvbG9yPXRoaXMuX21ha2VDb2xvck5fUGF0dGVybih0KX1zZXRGaWxsQ29sb3JOKHQpe3RoaXMuY3VycmVudC5maWxsQ29sb3I9dGhpcy5fbWFrZUNvbG9yTl9QYXR0ZXJuKHQpfXNoYWRpbmdGaWxsKHQpe2NvbnN0IGU9dGhpcy52aWV3cG9ydC53aWR0aCxzPXRoaXMudmlld3BvcnQuaGVpZ2h0LGk9bi5VdGlsLmludmVyc2VUcmFuc2Zvcm0odGhpcy50cmFuc2Zvcm1NYXRyaXgpLGE9bi5VdGlsLmFwcGx5VHJhbnNmb3JtKFswLDBdLGkpLHI9bi5VdGlsLmFwcGx5VHJhbnNmb3JtKFswLHNdLGkpLG89bi5VdGlsLmFwcGx5VHJhbnNmb3JtKFtlLDBdLGkpLGw9bi5VdGlsLmFwcGx5VHJhbnNmb3JtKFtlLHNdLGkpLGM9TWF0aC5taW4oYVswXSxyWzBdLG9bMF0sbFswXSksaD1NYXRoLm1pbihhWzFdLHJbMV0sb1sxXSxsWzFdKSxkPU1hdGgubWF4KGFbMF0sclswXSxvWzBdLGxbMF0pLHU9TWF0aC5tYXgoYVsxXSxyWzFdLG9bMV0sbFsxXSkscD10aGlzLnN2Z0ZhY3RvcnkuY3JlYXRlRWxlbWVudCgic3ZnOnJlY3QiKTtwLnNldEF0dHJpYnV0ZU5TKG51bGwsIngiLGMpO3Auc2V0QXR0cmlidXRlTlMobnVsbCwieSIsaCk7cC5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ3aWR0aCIsZC1jKTtwLnNldEF0dHJpYnV0ZU5TKG51bGwsImhlaWdodCIsdS1oKTtwLnNldEF0dHJpYnV0ZU5TKG51bGwsImZpbGwiLHRoaXMuX21ha2VTaGFkaW5nUGF0dGVybih0KSk7dGhpcy5jdXJyZW50LmZpbGxBbHBoYTwxJiZwLnNldEF0dHJpYnV0ZU5TKG51bGwsImZpbGwtb3BhY2l0eSIsdGhpcy5jdXJyZW50LmZpbGxBbHBoYSk7dGhpcy5fZW5zdXJlVHJhbnNmb3JtR3JvdXAoKS5hcHBlbmQocCl9X21ha2VDb2xvck5fUGF0dGVybih0KXtyZXR1cm4iVGlsaW5nUGF0dGVybiI9PT10WzBdP3RoaXMuX21ha2VUaWxpbmdQYXR0ZXJuKHQpOnRoaXMuX21ha2VTaGFkaW5nUGF0dGVybih0KX1fbWFrZVRpbGluZ1BhdHRlcm4odCl7Y29uc3QgZT10WzFdLHM9dFsyXSxpPXRbM118fG4uSURFTlRJVFlfTUFUUklYLFthLHIsbyxsXT10WzRdLGM9dFs1XSxoPXRbNl0sZD10WzddLHU9InNoYWRpbmciK2crKyxbcCxmLG0sYl09bi5VdGlsLm5vcm1hbGl6ZVJlY3QoWy4uLm4uVXRpbC5hcHBseVRyYW5zZm9ybShbYSxyXSxpKSwuLi5uLlV0aWwuYXBwbHlUcmFuc2Zvcm0oW28sbF0saSldKSxbQSxfXT1uLlV0aWwuc2luZ3VsYXJWYWx1ZURlY29tcG9zZTJkU2NhbGUoaSkseT1jKkEsdj1oKl8sUz10aGlzLnN2Z0ZhY3RvcnkuY3JlYXRlRWxlbWVudCgic3ZnOnBhdHRlcm4iKTtTLnNldEF0dHJpYnV0ZU5TKG51bGwsImlkIix1KTtTLnNldEF0dHJpYnV0ZU5TKG51bGwsInBhdHRlcm5Vbml0cyIsInVzZXJTcGFjZU9uVXNlIik7Uy5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ3aWR0aCIseSk7Uy5zZXRBdHRyaWJ1dGVOUyhudWxsLCJoZWlnaHQiLHYpO1Muc2V0QXR0cmlidXRlTlMobnVsbCwieCIsYCR7cH1gKTtTLnNldEF0dHJpYnV0ZU5TKG51bGwsInkiLGAke2Z9YCk7Y29uc3QgeD10aGlzLnN2ZyxDPXRoaXMudHJhbnNmb3JtTWF0cml4LEU9dGhpcy5jdXJyZW50LmZpbGxDb2xvcix3PXRoaXMuY3VycmVudC5zdHJva2VDb2xvcixQPXRoaXMuc3ZnRmFjdG9yeS5jcmVhdGUobS1wLGItZik7dGhpcy5zdmc9UDt0aGlzLnRyYW5zZm9ybU1hdHJpeD1pO2lmKDI9PT1kKXtjb25zdCB0PW4uVXRpbC5tYWtlSGV4Q29sb3IoLi4uZSk7dGhpcy5jdXJyZW50LmZpbGxDb2xvcj10O3RoaXMuY3VycmVudC5zdHJva2VDb2xvcj10fXRoaXMuZXhlY3V0ZU9wVHJlZSh0aGlzLmNvbnZlcnRPcExpc3QocykpO3RoaXMuc3ZnPXg7dGhpcy50cmFuc2Zvcm1NYXRyaXg9Qzt0aGlzLmN1cnJlbnQuZmlsbENvbG9yPUU7dGhpcy5jdXJyZW50LnN0cm9rZUNvbG9yPXc7Uy5hcHBlbmQoUC5jaGlsZE5vZGVzWzBdKTt0aGlzLmRlZnMuYXBwZW5kKFMpO3JldHVybmB1cmwoIyR7dX0pYH1fbWFrZVNoYWRpbmdQYXR0ZXJuKHQpeyJzdHJpbmciPT10eXBlb2YgdCYmKHQ9dGhpcy5vYmpzLmdldCh0KSk7c3dpdGNoKHRbMF0pe2Nhc2UiUmFkaWFsQXhpYWwiOmNvbnN0IGU9InNoYWRpbmciK2crKyxzPXRbM107bGV0IGk7c3dpdGNoKHRbMV0pe2Nhc2UiYXhpYWwiOmNvbnN0IHM9dFs0XSxuPXRbNV07aT10aGlzLnN2Z0ZhY3RvcnkuY3JlYXRlRWxlbWVudCgic3ZnOmxpbmVhckdyYWRpZW50Iik7aS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJpZCIsZSk7aS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJncmFkaWVudFVuaXRzIiwidXNlclNwYWNlT25Vc2UiKTtpLnNldEF0dHJpYnV0ZU5TKG51bGwsIngxIixzWzBdKTtpLnNldEF0dHJpYnV0ZU5TKG51bGwsInkxIixzWzFdKTtpLnNldEF0dHJpYnV0ZU5TKG51bGwsIngyIixuWzBdKTtpLnNldEF0dHJpYnV0ZU5TKG51bGwsInkyIixuWzFdKTticmVhaztjYXNlInJhZGlhbCI6Y29uc3QgYT10WzRdLHI9dFs1XSxvPXRbNl0sbD10WzddO2k9dGhpcy5zdmdGYWN0b3J5LmNyZWF0ZUVsZW1lbnQoInN2ZzpyYWRpYWxHcmFkaWVudCIpO2kuc2V0QXR0cmlidXRlTlMobnVsbCwiaWQiLGUpO2kuc2V0QXR0cmlidXRlTlMobnVsbCwiZ3JhZGllbnRVbml0cyIsInVzZXJTcGFjZU9uVXNlIik7aS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJjeCIsclswXSk7aS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJjeSIsclsxXSk7aS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJyIixsKTtpLnNldEF0dHJpYnV0ZU5TKG51bGwsImZ4IixhWzBdKTtpLnNldEF0dHJpYnV0ZU5TKG51bGwsImZ5IixhWzFdKTtpLnNldEF0dHJpYnV0ZU5TKG51bGwsImZyIixvKTticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcihgVW5rbm93biBSYWRpYWxBeGlhbCB0eXBlOiAke3RbMV19YCl9Zm9yKGNvbnN0IHQgb2Ygcyl7Y29uc3QgZT10aGlzLnN2Z0ZhY3RvcnkuY3JlYXRlRWxlbWVudCgic3ZnOnN0b3AiKTtlLnNldEF0dHJpYnV0ZU5TKG51bGwsIm9mZnNldCIsdFswXSk7ZS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJzdG9wLWNvbG9yIix0WzFdKTtpLmFwcGVuZChlKX10aGlzLmRlZnMuYXBwZW5kKGkpO3JldHVybmB1cmwoIyR7ZX0pYDtjYXNlIk1lc2giOigwLG4ud2FybikoIlVuaW1wbGVtZW50ZWQgcGF0dGVybiBNZXNoIik7cmV0dXJuIG51bGw7Y2FzZSJEdW1teSI6cmV0dXJuImhvdHBpbmsiO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKGBVbmtub3duIElSIHR5cGU6ICR7dFswXX1gKX19c2V0RGFzaCh0LGUpe3RoaXMuY3VycmVudC5kYXNoQXJyYXk9dDt0aGlzLmN1cnJlbnQuZGFzaFBoYXNlPWV9Y29uc3RydWN0UGF0aCh0LGUpe2NvbnN0IHM9dGhpcy5jdXJyZW50O2xldCBpPXMueCxhPXMueSxyPVtdLG89MDtmb3IoY29uc3QgcyBvZiB0KXN3aXRjaCgwfHMpe2Nhc2Ugbi5PUFMucmVjdGFuZ2xlOmk9ZVtvKytdO2E9ZVtvKytdO2NvbnN0IHQ9aStlW28rK10scz1hK2VbbysrXTtyLnB1c2goIk0iLHBmKGkpLHBmKGEpLCJMIixwZih0KSxwZihhKSwiTCIscGYodCkscGYocyksIkwiLHBmKGkpLHBmKHMpLCJaIik7YnJlYWs7Y2FzZSBuLk9QUy5tb3ZlVG86aT1lW28rK107YT1lW28rK107ci5wdXNoKCJNIixwZihpKSxwZihhKSk7YnJlYWs7Y2FzZSBuLk9QUy5saW5lVG86aT1lW28rK107YT1lW28rK107ci5wdXNoKCJMIixwZihpKSxwZihhKSk7YnJlYWs7Y2FzZSBuLk9QUy5jdXJ2ZVRvOmk9ZVtvKzRdO2E9ZVtvKzVdO3IucHVzaCgiQyIscGYoZVtvXSkscGYoZVtvKzFdKSxwZihlW28rMl0pLHBmKGVbbyszXSkscGYoaSkscGYoYSkpO28rPTY7YnJlYWs7Y2FzZSBuLk9QUy5jdXJ2ZVRvMjpyLnB1c2goIkMiLHBmKGkpLHBmKGEpLHBmKGVbb10pLHBmKGVbbysxXSkscGYoZVtvKzJdKSxwZihlW28rM10pKTtpPWVbbysyXTthPWVbbyszXTtvKz00O2JyZWFrO2Nhc2Ugbi5PUFMuY3VydmVUbzM6aT1lW28rMl07YT1lW28rM107ci5wdXNoKCJDIixwZihlW29dKSxwZihlW28rMV0pLHBmKGkpLHBmKGEpLHBmKGkpLHBmKGEpKTtvKz00O2JyZWFrO2Nhc2Ugbi5PUFMuY2xvc2VQYXRoOnIucHVzaCgiWiIpfXI9ci5qb2luKCIgIik7aWYocy5wYXRoJiZ0Lmxlbmd0aD4wJiZ0WzBdIT09bi5PUFMucmVjdGFuZ2xlJiZ0WzBdIT09bi5PUFMubW92ZVRvKXI9cy5wYXRoLmdldEF0dHJpYnV0ZU5TKG51bGwsImQiKStyO2Vsc2V7cy5wYXRoPXRoaXMuc3ZnRmFjdG9yeS5jcmVhdGVFbGVtZW50KCJzdmc6cGF0aCIpO3RoaXMuX2Vuc3VyZVRyYW5zZm9ybUdyb3VwKCkuYXBwZW5kKHMucGF0aCl9cy5wYXRoLnNldEF0dHJpYnV0ZU5TKG51bGwsImQiLHIpO3MucGF0aC5zZXRBdHRyaWJ1dGVOUyhudWxsLCJmaWxsIiwibm9uZSIpO3MuZWxlbWVudD1zLnBhdGg7cy5zZXRDdXJyZW50UG9pbnQoaSxhKX1lbmRQYXRoKCl7Y29uc3QgdD10aGlzLmN1cnJlbnQ7dC5wYXRoPW51bGw7aWYoIXRoaXMucGVuZGluZ0NsaXApcmV0dXJuO2lmKCF0LmVsZW1lbnQpe3RoaXMucGVuZGluZ0NsaXA9bnVsbDtyZXR1cm59Y29uc3QgZT0iY2xpcHBhdGgiK3ArKyxzPXRoaXMuc3ZnRmFjdG9yeS5jcmVhdGVFbGVtZW50KCJzdmc6Y2xpcFBhdGgiKTtzLnNldEF0dHJpYnV0ZU5TKG51bGwsImlkIixlKTtzLnNldEF0dHJpYnV0ZU5TKG51bGwsInRyYW5zZm9ybSIscG0odGhpcy50cmFuc2Zvcm1NYXRyaXgpKTtjb25zdCBpPXQuZWxlbWVudC5jbG9uZU5vZGUoITApOyJldmVub2RkIj09PXRoaXMucGVuZGluZ0NsaXA/aS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJjbGlwLXJ1bGUiLCJldmVub2RkIik6aS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJjbGlwLXJ1bGUiLCJub256ZXJvIik7dGhpcy5wZW5kaW5nQ2xpcD1udWxsO3MuYXBwZW5kKGkpO3RoaXMuZGVmcy5hcHBlbmQocyk7aWYodC5hY3RpdmVDbGlwVXJsKXt0LmNsaXBHcm91cD1udWxsO2Zvcihjb25zdCB0IG9mIHRoaXMuZXh0cmFTdGFjayl0LmNsaXBHcm91cD1udWxsO3Muc2V0QXR0cmlidXRlTlMobnVsbCwiY2xpcC1wYXRoIix0LmFjdGl2ZUNsaXBVcmwpfXQuYWN0aXZlQ2xpcFVybD1gdXJsKCMke2V9KWA7dGhpcy50Z3JwPW51bGx9Y2xpcCh0KXt0aGlzLnBlbmRpbmdDbGlwPXR9Y2xvc2VQYXRoKCl7Y29uc3QgdD10aGlzLmN1cnJlbnQ7aWYodC5wYXRoKXtjb25zdCBlPWAke3QucGF0aC5nZXRBdHRyaWJ1dGVOUyhudWxsLCJkIil9WmA7dC5wYXRoLnNldEF0dHJpYnV0ZU5TKG51bGwsImQiLGUpfX1zZXRMZWFkaW5nKHQpe3RoaXMuY3VycmVudC5sZWFkaW5nPS10fXNldFRleHRSaXNlKHQpe3RoaXMuY3VycmVudC50ZXh0UmlzZT10fXNldFRleHRSZW5kZXJpbmdNb2RlKHQpe3RoaXMuY3VycmVudC50ZXh0UmVuZGVyaW5nTW9kZT10fXNldEhTY2FsZSh0KXt0aGlzLmN1cnJlbnQudGV4dEhTY2FsZT10LzEwMH1zZXRSZW5kZXJpbmdJbnRlbnQodCl7fXNldEZsYXRuZXNzKHQpe31zZXRHU3RhdGUodCl7Zm9yKGNvbnN0W2Usc11vZiB0KXN3aXRjaChlKXtjYXNlIkxXIjp0aGlzLnNldExpbmVXaWR0aChzKTticmVhaztjYXNlIkxDIjp0aGlzLnNldExpbmVDYXAocyk7YnJlYWs7Y2FzZSJMSiI6dGhpcy5zZXRMaW5lSm9pbihzKTticmVhaztjYXNlIk1MIjp0aGlzLnNldE1pdGVyTGltaXQocyk7YnJlYWs7Y2FzZSJEIjp0aGlzLnNldERhc2goc1swXSxzWzFdKTticmVhaztjYXNlIlJJIjp0aGlzLnNldFJlbmRlcmluZ0ludGVudChzKTticmVhaztjYXNlIkZMIjp0aGlzLnNldEZsYXRuZXNzKHMpO2JyZWFrO2Nhc2UiRm9udCI6dGhpcy5zZXRGb250KHMpO2JyZWFrO2Nhc2UiQ0EiOnRoaXMuc2V0U3Ryb2tlQWxwaGEocyk7YnJlYWs7Y2FzZSJjYSI6dGhpcy5zZXRGaWxsQWxwaGEocyk7YnJlYWs7ZGVmYXVsdDooMCxuLndhcm4pKGBVbmltcGxlbWVudGVkIGdyYXBoaWMgc3RhdGUgb3BlcmF0b3IgJHtlfWApfX1maWxsKCl7Y29uc3QgdD10aGlzLmN1cnJlbnQ7aWYodC5lbGVtZW50KXt0LmVsZW1lbnQuc2V0QXR0cmlidXRlTlMobnVsbCwiZmlsbCIsdC5maWxsQ29sb3IpO3QuZWxlbWVudC5zZXRBdHRyaWJ1dGVOUyhudWxsLCJmaWxsLW9wYWNpdHkiLHQuZmlsbEFscGhhKTt0aGlzLmVuZFBhdGgoKX19c3Ryb2tlKCl7Y29uc3QgdD10aGlzLmN1cnJlbnQ7aWYodC5lbGVtZW50KXt0aGlzLl9zZXRTdHJva2VBdHRyaWJ1dGVzKHQuZWxlbWVudCk7dC5lbGVtZW50LnNldEF0dHJpYnV0ZU5TKG51bGwsImZpbGwiLCJub25lIik7dGhpcy5lbmRQYXRoKCl9fV9zZXRTdHJva2VBdHRyaWJ1dGVzKHQsZT0xKXtjb25zdCBzPXRoaXMuY3VycmVudDtsZXQgaT1zLmRhc2hBcnJheTsxIT09ZSYmaS5sZW5ndGg+MCYmKGk9aS5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiBlKnR9KSkpO3Quc2V0QXR0cmlidXRlTlMobnVsbCwic3Ryb2tlIixzLnN0cm9rZUNvbG9yKTt0LnNldEF0dHJpYnV0ZU5TKG51bGwsInN0cm9rZS1vcGFjaXR5IixzLnN0cm9rZUFscGhhKTt0LnNldEF0dHJpYnV0ZU5TKG51bGwsInN0cm9rZS1taXRlcmxpbWl0IixwZihzLm1pdGVyTGltaXQpKTt0LnNldEF0dHJpYnV0ZU5TKG51bGwsInN0cm9rZS1saW5lY2FwIixzLmxpbmVDYXApO3Quc2V0QXR0cmlidXRlTlMobnVsbCwic3Ryb2tlLWxpbmVqb2luIixzLmxpbmVKb2luKTt0LnNldEF0dHJpYnV0ZU5TKG51bGwsInN0cm9rZS13aWR0aCIscGYoZSpzLmxpbmVXaWR0aCkrInB4Iik7dC5zZXRBdHRyaWJ1dGVOUyhudWxsLCJzdHJva2UtZGFzaGFycmF5IixpLm1hcChwZikuam9pbigiICIpKTt0LnNldEF0dHJpYnV0ZU5TKG51bGwsInN0cm9rZS1kYXNob2Zmc2V0IixwZihlKnMuZGFzaFBoYXNlKSsicHgiKX1lb0ZpbGwoKXt0aGlzLmN1cnJlbnQuZWxlbWVudD8uc2V0QXR0cmlidXRlTlMobnVsbCwiZmlsbC1ydWxlIiwiZXZlbm9kZCIpO3RoaXMuZmlsbCgpfWZpbGxTdHJva2UoKXt0aGlzLnN0cm9rZSgpO3RoaXMuZmlsbCgpfWVvRmlsbFN0cm9rZSgpe3RoaXMuY3VycmVudC5lbGVtZW50Py5zZXRBdHRyaWJ1dGVOUyhudWxsLCJmaWxsLXJ1bGUiLCJldmVub2RkIik7dGhpcy5maWxsU3Ryb2tlKCl9Y2xvc2VTdHJva2UoKXt0aGlzLmNsb3NlUGF0aCgpO3RoaXMuc3Ryb2tlKCl9Y2xvc2VGaWxsU3Ryb2tlKCl7dGhpcy5jbG9zZVBhdGgoKTt0aGlzLmZpbGxTdHJva2UoKX1jbG9zZUVPRmlsbFN0cm9rZSgpe3RoaXMuY2xvc2VQYXRoKCk7dGhpcy5lb0ZpbGxTdHJva2UoKX1wYWludFNvbGlkQ29sb3JJbWFnZU1hc2soKXtjb25zdCB0PXRoaXMuc3ZnRmFjdG9yeS5jcmVhdGVFbGVtZW50KCJzdmc6cmVjdCIpO3Quc2V0QXR0cmlidXRlTlMobnVsbCwieCIsIjAiKTt0LnNldEF0dHJpYnV0ZU5TKG51bGwsInkiLCIwIik7dC5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ3aWR0aCIsIjFweCIpO3Quc2V0QXR0cmlidXRlTlMobnVsbCwiaGVpZ2h0IiwiMXB4Iik7dC5zZXRBdHRyaWJ1dGVOUyhudWxsLCJmaWxsIix0aGlzLmN1cnJlbnQuZmlsbENvbG9yKTt0aGlzLl9lbnN1cmVUcmFuc2Zvcm1Hcm91cCgpLmFwcGVuZCh0KX1wYWludEltYWdlWE9iamVjdCh0KXtjb25zdCBlPXRoaXMuZ2V0T2JqZWN0KHQpO2U/dGhpcy5wYWludElubGluZUltYWdlWE9iamVjdChlKTooMCxuLndhcm4pKGBEZXBlbmRlbnQgaW1hZ2Ugd2l0aCBvYmplY3QgSUQgJHt0fSBpcyBub3QgcmVhZHkgeWV0YCl9cGFpbnRJbmxpbmVJbWFnZVhPYmplY3QodCxlKXtjb25zdCBzPXQud2lkdGgsaT10LmhlaWdodCxuPXUodCx0aGlzLmZvcmNlRGF0YVNjaGVtYSwhIWUpLGE9dGhpcy5zdmdGYWN0b3J5LmNyZWF0ZUVsZW1lbnQoInN2ZzpyZWN0Iik7YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ4IiwiMCIpO2Euc2V0QXR0cmlidXRlTlMobnVsbCwieSIsIjAiKTthLnNldEF0dHJpYnV0ZU5TKG51bGwsIndpZHRoIixwZihzKSk7YS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJoZWlnaHQiLHBmKGkpKTt0aGlzLmN1cnJlbnQuZWxlbWVudD1hO3RoaXMuY2xpcCgibm9uemVybyIpO2NvbnN0IHI9dGhpcy5zdmdGYWN0b3J5LmNyZWF0ZUVsZW1lbnQoInN2ZzppbWFnZSIpO3Iuc2V0QXR0cmlidXRlTlMoYywieGxpbms6aHJlZiIsbik7ci5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ4IiwiMCIpO3Iuc2V0QXR0cmlidXRlTlMobnVsbCwieSIscGYoLWkpKTtyLnNldEF0dHJpYnV0ZU5TKG51bGwsIndpZHRoIixwZihzKSsicHgiKTtyLnNldEF0dHJpYnV0ZU5TKG51bGwsImhlaWdodCIscGYoaSkrInB4Iik7ci5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ0cmFuc2Zvcm0iLGBzY2FsZSgke3BmKDEvcyl9ICR7cGYoLTEvaSl9KWApO2U/ZS5hcHBlbmQocik6dGhpcy5fZW5zdXJlVHJhbnNmb3JtR3JvdXAoKS5hcHBlbmQocil9cGFpbnRJbWFnZU1hc2tYT2JqZWN0KHQpe2NvbnN0IGU9dGhpcy5nZXRPYmplY3QodC5kYXRhLHQpO2lmKGUuYml0bWFwKXsoMCxuLndhcm4pKCJwYWludEltYWdlTWFza1hPYmplY3Q6IEltYWdlQml0bWFwIHN1cHBvcnQgaXMgbm90IGltcGxlbWVudGVkLCBlbnN1cmUgdGhhdCB0aGUgYGlzT2Zmc2NyZWVuQ2FudmFzU3VwcG9ydGVkYCBBUEkgcGFyYW1ldGVyIGlzIGRpc2FibGVkLiIpO3JldHVybn1jb25zdCBzPXRoaXMuY3VycmVudCxpPWUud2lkdGgsYT1lLmhlaWdodCxyPXMuZmlsbENvbG9yO3MubWFza0lkPSJtYXNrIitmKys7Y29uc3Qgbz10aGlzLnN2Z0ZhY3RvcnkuY3JlYXRlRWxlbWVudCgic3ZnOm1hc2siKTtvLnNldEF0dHJpYnV0ZU5TKG51bGwsImlkIixzLm1hc2tJZCk7Y29uc3QgbD10aGlzLnN2Z0ZhY3RvcnkuY3JlYXRlRWxlbWVudCgic3ZnOnJlY3QiKTtsLnNldEF0dHJpYnV0ZU5TKG51bGwsIngiLCIwIik7bC5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ5IiwiMCIpO2wuc2V0QXR0cmlidXRlTlMobnVsbCwid2lkdGgiLHBmKGkpKTtsLnNldEF0dHJpYnV0ZU5TKG51bGwsImhlaWdodCIscGYoYSkpO2wuc2V0QXR0cmlidXRlTlMobnVsbCwiZmlsbCIscik7bC5zZXRBdHRyaWJ1dGVOUyhudWxsLCJtYXNrIixgdXJsKCMke3MubWFza0lkfSlgKTt0aGlzLmRlZnMuYXBwZW5kKG8pO3RoaXMuX2Vuc3VyZVRyYW5zZm9ybUdyb3VwKCkuYXBwZW5kKGwpO3RoaXMucGFpbnRJbmxpbmVJbWFnZVhPYmplY3QoZSxvKX1wYWludEZvcm1YT2JqZWN0QmVnaW4odCxlKXtBcnJheS5pc0FycmF5KHQpJiY2PT09dC5sZW5ndGgmJnRoaXMudHJhbnNmb3JtKHRbMF0sdFsxXSx0WzJdLHRbM10sdFs0XSx0WzVdKTtpZihlKXtjb25zdCB0PWVbMl0tZVswXSxzPWVbM10tZVsxXSxpPXRoaXMuc3ZnRmFjdG9yeS5jcmVhdGVFbGVtZW50KCJzdmc6cmVjdCIpO2kuc2V0QXR0cmlidXRlTlMobnVsbCwieCIsZVswXSk7aS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ5IixlWzFdKTtpLnNldEF0dHJpYnV0ZU5TKG51bGwsIndpZHRoIixwZih0KSk7aS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJoZWlnaHQiLHBmKHMpKTt0aGlzLmN1cnJlbnQuZWxlbWVudD1pO3RoaXMuY2xpcCgibm9uemVybyIpO3RoaXMuZW5kUGF0aCgpfX1wYWludEZvcm1YT2JqZWN0RW5kKCl7fV9pbml0aWFsaXplKHQpe2NvbnN0IGU9dGhpcy5zdmdGYWN0b3J5LmNyZWF0ZSh0LndpZHRoLHQuaGVpZ2h0KSxzPXRoaXMuc3ZnRmFjdG9yeS5jcmVhdGVFbGVtZW50KCJzdmc6ZGVmcyIpO2UuYXBwZW5kKHMpO3RoaXMuZGVmcz1zO2NvbnN0IGk9dGhpcy5zdmdGYWN0b3J5LmNyZWF0ZUVsZW1lbnQoInN2ZzpnIik7aS5zZXRBdHRyaWJ1dGVOUyhudWxsLCJ0cmFuc2Zvcm0iLHBtKHQudHJhbnNmb3JtKSk7ZS5hcHBlbmQoaSk7dGhpcy5zdmc9aTtyZXR1cm4gZX1fZW5zdXJlQ2xpcEdyb3VwKCl7aWYoIXRoaXMuY3VycmVudC5jbGlwR3JvdXApe2NvbnN0IHQ9dGhpcy5zdmdGYWN0b3J5LmNyZWF0ZUVsZW1lbnQoInN2ZzpnIik7dC5zZXRBdHRyaWJ1dGVOUyhudWxsLCJjbGlwLXBhdGgiLHRoaXMuY3VycmVudC5hY3RpdmVDbGlwVXJsKTt0aGlzLnN2Zy5hcHBlbmQodCk7dGhpcy5jdXJyZW50LmNsaXBHcm91cD10fXJldHVybiB0aGlzLmN1cnJlbnQuY2xpcEdyb3VwfV9lbnN1cmVUcmFuc2Zvcm1Hcm91cCgpe2lmKCF0aGlzLnRncnApe3RoaXMudGdycD10aGlzLnN2Z0ZhY3RvcnkuY3JlYXRlRWxlbWVudCgic3ZnOmciKTt0aGlzLnRncnAuc2V0QXR0cmlidXRlTlMobnVsbCwidHJhbnNmb3JtIixwbSh0aGlzLnRyYW5zZm9ybU1hdHJpeCkpO3RoaXMuY3VycmVudC5hY3RpdmVDbGlwVXJsP3RoaXMuX2Vuc3VyZUNsaXBHcm91cCgpLmFwcGVuZCh0aGlzLnRncnApOnRoaXMuc3ZnLmFwcGVuZCh0aGlzLnRncnApfXJldHVybiB0aGlzLnRncnB9fX19XSxfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX189e307ZnVuY3Rpb24gX193X3BkZmpzX3JlcXVpcmVfXyh0KXt2YXIgZT1fX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bdF07aWYodm9pZCAwIT09ZSlyZXR1cm4gZS5leHBvcnRzO3ZhciBzPV9fd2VicGFja19tb2R1bGVfY2FjaGVfX1t0XT17ZXhwb3J0czp7fX07X193ZWJwYWNrX21vZHVsZXNfX1t0XShzLHMuZXhwb3J0cyxfX3dfcGRmanNfcmVxdWlyZV9fKTtyZXR1cm4gcy5leHBvcnRzfXZhciBfX3dlYnBhY2tfZXhwb3J0c19fPXt9OygoKT0+e3ZhciB0PV9fd2VicGFja19leHBvcnRzX187T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJBYm9ydEV4Y2VwdGlvbiIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGUuQWJvcnRFeGNlcHRpb259fSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIkFubm90YXRpb25FZGl0b3JMYXllciIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGEuQW5ub3RhdGlvbkVkaXRvckxheWVyfX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJBbm5vdGF0aW9uRWRpdG9yUGFyYW1zVHlwZSIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGUuQW5ub3RhdGlvbkVkaXRvclBhcmFtc1R5cGV9fSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIkFubm90YXRpb25FZGl0b3JUeXBlIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZS5Bbm5vdGF0aW9uRWRpdG9yVHlwZX19KTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiQW5ub3RhdGlvbkVkaXRvclVJTWFuYWdlciIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHIuQW5ub3RhdGlvbkVkaXRvclVJTWFuYWdlcn19KTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiQW5ub3RhdGlvbkxheWVyIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gby5Bbm5vdGF0aW9uTGF5ZXJ9fSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIkFubm90YXRpb25Nb2RlIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZS5Bbm5vdGF0aW9uTW9kZX19KTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiQ01hcENvbXByZXNzaW9uVHlwZSIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGUuQ01hcENvbXByZXNzaW9uVHlwZX19KTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiRmVhdHVyZVRlc3QiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBlLkZlYXR1cmVUZXN0fX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJHbG9iYWxXb3JrZXJPcHRpb25zIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbC5HbG9iYWxXb3JrZXJPcHRpb25zfX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJJbnZhbGlkUERGRXhjZXB0aW9uIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZS5JbnZhbGlkUERGRXhjZXB0aW9ufX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJNaXNzaW5nUERGRXhjZXB0aW9uIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZS5NaXNzaW5nUERGRXhjZXB0aW9ufX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJPUFMiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBlLk9QU319KTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiUERGRGF0YVJhbmdlVHJhbnNwb3J0Iix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gcy5QREZEYXRhUmFuZ2VUcmFuc3BvcnR9fSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIlBERkRhdGVTdHJpbmciLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBpLlBERkRhdGVTdHJpbmd9fSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIlBERldvcmtlciIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHMuUERGV29ya2VyfX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJQYXNzd29yZFJlc3BvbnNlcyIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGUuUGFzc3dvcmRSZXNwb25zZXN9fSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIlBlcm1pc3Npb25GbGFnIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZS5QZXJtaXNzaW9uRmxhZ319KTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiUGl4ZWxzUGVySW5jaCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGkuUGl4ZWxzUGVySW5jaH19KTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiUHJvbWlzZUNhcGFiaWxpdHkiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBlLlByb21pc2VDYXBhYmlsaXR5fX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJSZW5kZXJpbmdDYW5jZWxsZWRFeGNlcHRpb24iLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBpLlJlbmRlcmluZ0NhbmNlbGxlZEV4Y2VwdGlvbn19KTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiU1ZHR3JhcGhpY3MiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBjLlNWR0dyYXBoaWNzfX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJVbmV4cGVjdGVkUmVzcG9uc2VFeGNlcHRpb24iLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBlLlVuZXhwZWN0ZWRSZXNwb25zZUV4Y2VwdGlvbn19KTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiVXRpbCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGUuVXRpbH19KTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiVmVyYm9zaXR5TGV2ZWwiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBlLlZlcmJvc2l0eUxldmVsfX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJYZmFMYXllciIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGguWGZhTGF5ZXJ9fSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsImJ1aWxkIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gcy5idWlsZH19KTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiY3JlYXRlVmFsaWRBYnNvbHV0ZVVybCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGUuY3JlYXRlVmFsaWRBYnNvbHV0ZVVybH19KTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiZ2V0RG9jdW1lbnQiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBzLmdldERvY3VtZW50fX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJnZXRGaWxlbmFtZUZyb21VcmwiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBpLmdldEZpbGVuYW1lRnJvbVVybH19KTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiZ2V0UGRmRmlsZW5hbWVGcm9tVXJsIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gaS5nZXRQZGZGaWxlbmFtZUZyb21Vcmx9fSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsImdldFhmYVBhZ2VWaWV3cG9ydCIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGkuZ2V0WGZhUGFnZVZpZXdwb3J0fX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJpc0RhdGFTY2hlbWUiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBpLmlzRGF0YVNjaGVtZX19KTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiaXNQZGZGaWxlIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gaS5pc1BkZkZpbGV9fSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsImxvYWRTY3JpcHQiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBpLmxvYWRTY3JpcHR9fSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIm5vcm1hbGl6ZVVuaWNvZGUiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBlLm5vcm1hbGl6ZVVuaWNvZGV9fSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsInJlbmRlclRleHRMYXllciIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG4ucmVuZGVyVGV4dExheWVyfX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJzZXRMYXllckRpbWVuc2lvbnMiLHtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBpLnNldExheWVyRGltZW5zaW9uc319KTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwic2hhZG93Iix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZS5zaGFkb3d9fSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsInVwZGF0ZVRleHRMYXllciIse2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG4udXBkYXRlVGV4dExheWVyfX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJ2ZXJzaW9uIix7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gcy52ZXJzaW9ufX0pO3ZhciBlPV9fd19wZGZqc19yZXF1aXJlX18oMSkscz1fX3dfcGRmanNfcmVxdWlyZV9fKDIpLGk9X193X3BkZmpzX3JlcXVpcmVfXyg2KSxuPV9fd19wZGZqc19yZXF1aXJlX18oMjYpLGE9X193X3BkZmpzX3JlcXVpcmVfXygyNykscj1fX3dfcGRmanNfcmVxdWlyZV9fKDUpLG89X193X3BkZmpzX3JlcXVpcmVfXygzMCksbD1fX3dfcGRmanNfcmVxdWlyZV9fKDE0KSxjPV9fd19wZGZqc19yZXF1aXJlX18oMzMpLGg9X193X3BkZmpzX3JlcXVpcmVfXygzMil9KSgpO3JldHVybiBfX3dlYnBhY2tfZXhwb3J0c19ffSkoKSkpOw==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPBody>
        <TcpPackets>
          <PacketInfo time="519314437" offset="0" length="800" />
          <PacketInfo time="519314453" offset="800" length="77407" />
        </TcpPackets>
      </HTTPResponse>
    </HTTPTask>
    <HTTPTask id="321" hostname="cdn.jsdelivr.net" path="https://cdn.jsdelivr.net/npm/intl-tel-input@18.2.1/build/js/intlTelInput.min.js" url="https://cdn.jsdelivr.net/npm/intl-tel-input@18.2.1/build/js/intlTelInput.min.js" ip="[2a04:4e42:42:0:0:0:0:485]" port="443" connectionId="20" origin="HTML" frame="1" startDateTime="2024-02-15T10:57:48.110+05:30" startTime="519314593" endTime="519314593">
      <HTTPRequest method="GET">
        <HTTPHeaders>
          <HTTPHeaderEntity name="sec-ch-ua" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ik5vdCBBKEJyYW5kIjt2PSI5OSIsICJHb29nbGUgQ2hyb21lIjt2PSIxMjEiLCAiQ2hyb21pdW0iO3Y9IjEyMSI=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="sec-ch-ua-mobile" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>PzA=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="User-Agent" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEyMS4wLjAuMCBTYWZhcmkvNTM3LjM2</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="sec-ch-ua-platform" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>IldpbmRvd3Mi</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ki8q</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Sec-Fetch-Site" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Y3Jvc3Mtc2l0ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Sec-Fetch-Mode" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bm8tY29ycw==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Sec-Fetch-Dest" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>c2NyaXB0</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Referer" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cHM6Ly9kZXYuYmx1ZWFsZ28uY29tLw==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Encoding" index="9">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Language" index="10">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZW4tVVMsZW47cT0wLjk=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Host" index="11">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Y2RuLmpzZGVsaXZyLm5ldA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0VUIGh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vaW50bC10ZWwtaW5wdXRAMTguMi4xL2J1aWxkL2pzL2ludGxUZWxJbnB1dC5taW4uanMgSFRUUC8xLjENCnNlYy1jaC11YTogIk5vdCBBKEJyYW5kIjt2PSI5OSIsICJHb29nbGUgQ2hyb21lIjt2PSIxMjEiLCAiQ2hyb21pdW0iO3Y9IjEyMSINCnNlYy1jaC11YS1tb2JpbGU6ID8wDQpVc2VyLUFnZW50OiBNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvMTIxLjAuMC4wIFNhZmFyaS81MzcuMzYNCnNlYy1jaC11YS1wbGF0Zm9ybTogIldpbmRvd3MiDQpBY2NlcHQ6ICovKg0KU2VjLUZldGNoLVNpdGU6IGNyb3NzLXNpdGUNClNlYy1GZXRjaC1Nb2RlOiBuby1jb3JzDQpTZWMtRmV0Y2gtRGVzdDogc2NyaXB0DQpSZWZlcmVyOiBodHRwczovL2Rldi5ibHVlYWxnby5jb20vDQpBY2NlcHQtRW5jb2Rpbmc6IGd6aXAsIGRlZmxhdGUNCkFjY2VwdC1MYW5ndWFnZTogZW4tVVMsZW47cT0wLjkNCkhvc3Q6IGNkbi5qc2RlbGl2ci5uZXQNCg0K</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
      </HTTPRequest>
      <HTTPResponse>
        <contentLenght>11398</contentLenght>
        <HTTPHeaders>
          <HTTPHeaderEntity name="Connection" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Length" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MTEzOTg=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Access-Control-Allow-Origin" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Kg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Access-Control-Expose-Headers" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Kg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Timing-Allow-Origin" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Kg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Cache-Control" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>cHVibGljLCBtYXgtYWdlPTMxNTM2MDAwLCBzLW1heGFnZT0zMTUzNjAwMCwgaW1tdXRhYmxl</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Cross-Origin-Resource-Policy" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Y3Jvc3Mtb3JpZ2lu</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="X-Content-Type-Options" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bm9zbmlmZg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Strict-Transport-Security" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bWF4LWFnZT0zMTUzNjAwMDsgaW5jbHVkZVN1YkRvbWFpbnM7IHByZWxvYWQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Type" index="9">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>YXBwbGljYXRpb24vamF2YXNjcmlwdDsgY2hhcnNldD11dGYtOA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="X-JSD-Version" index="10">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MTguMi4x</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="X-JSD-Version-Type" index="11">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>dmVyc2lvbg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="ETag" index="12">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Vy8iNzkxZS14TUtJTy93V0ZGUU5DVldWZi9iUDAvaHpFbTgi</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Encoding" index="13">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Ranges" index="14">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ynl0ZXM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Date" index="15">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VGh1LCAxNSBGZWIgMjAyNCAwNToxODo1MCBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Age" index="16">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>NjczNDAyNw==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="X-Served-By" index="17">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Y2FjaGUtZnJhLWV0b3U4MjIwMDc2LUZSQSwgY2FjaGUtZGVsMjE3NTAtREVM</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="X-Cache" index="18">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SElULCBISVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Vary" index="19">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>QWNjZXB0LUVuY29kaW5n</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="alt-svc" index="20">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aDM9Ijo0NDMiO21hPTg2NDAwLGgzLTI5PSI6NDQzIjttYT04NjQwMCxoMy0yNz0iOjQ0MyI7bWE9ODY0MDA=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SFRUUC8xLjEgMjAwIE9LDQpDb25uZWN0aW9uOiBrZWVwLWFsaXZlDQpDb250ZW50LUxlbmd0aDogMTEzOTgNCkFjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbjogKg0KQWNjZXNzLUNvbnRyb2wtRXhwb3NlLUhlYWRlcnM6ICoNClRpbWluZy1BbGxvdy1PcmlnaW46ICoNCkNhY2hlLUNvbnRyb2w6IHB1YmxpYywgbWF4LWFnZT0zMTUzNjAwMCwgcy1tYXhhZ2U9MzE1MzYwMDAsIGltbXV0YWJsZQ0KQ3Jvc3MtT3JpZ2luLVJlc291cmNlLVBvbGljeTogY3Jvc3Mtb3JpZ2luDQpYLUNvbnRlbnQtVHlwZS1PcHRpb25zOiBub3NuaWZmDQpTdHJpY3QtVHJhbnNwb3J0LVNlY3VyaXR5OiBtYXgtYWdlPTMxNTM2MDAwOyBpbmNsdWRlU3ViRG9tYWluczsgcHJlbG9hZA0KQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0OyBjaGFyc2V0PXV0Zi04DQpYLUpTRC1WZXJzaW9uOiAxOC4yLjENClgtSlNELVZlcnNpb24tVHlwZTogdmVyc2lvbg0KRVRhZzogVy8iNzkxZS14TUtJTy93V0ZGUU5DVldWZi9iUDAvaHpFbTgiDQpDb250ZW50LUVuY29kaW5nOiBnemlwDQpBY2NlcHQtUmFuZ2VzOiBieXRlcw0KRGF0ZTogVGh1LCAxNSBGZWIgMjAyNCAwNToxODo1MCBHTVQNCkFnZTogNjczNDAyNw0KWC1TZXJ2ZWQtQnk6IGNhY2hlLWZyYS1ldG91ODIyMDA3Ni1GUkEsIGNhY2hlLWRlbDIxNzUwLURFTA0KWC1DYWNoZTogSElULCBISVQNClZhcnk6IEFjY2VwdC1FbmNvZGluZw0KYWx0LXN2YzogaDM9Ijo0NDMiO21hPTg2NDAwLGgzLTI5PSI6NDQzIjttYT04NjQwMCxoMy0yNz0iOjQ0MyI7bWE9ODY0MDANCg0K</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPBody>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>LyoKICogSW50ZXJuYXRpb25hbCBUZWxlcGhvbmUgSW5wdXQgdjE4LjIuMQogKiBodHRwczovL2dpdGh1Yi5jb20vamFja29jbnIvaW50bC10ZWwtaW5wdXQuZ2l0CiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZQogKi8KCiFmdW5jdGlvbihhKXsib2JqZWN0Ij09dHlwZW9mIG1vZHVsZSYmbW9kdWxlLmV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9YSgpOndpbmRvdy5pbnRsVGVsSW5wdXQ9YSgpfShmdW5jdGlvbihhKXsidXNlIHN0cmljdCI7cmV0dXJuIGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYihhKXtmb3IodmFyIGI9MTtiPGFyZ3VtZW50cy5sZW5ndGg7YisrKXt2YXIgZD1udWxsIT1hcmd1bWVudHNbYl0/T2JqZWN0KGFyZ3VtZW50c1tiXSk6e30sZT1PYmplY3Qua2V5cyhkKTsiZnVuY3Rpb24iPT10eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyYmZS5wdXNoLmFwcGx5KGUsT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhkKS5maWx0ZXIoZnVuY3Rpb24oYSl7cmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZCxhKS5lbnVtZXJhYmxlfSkpLGUuZm9yRWFjaChmdW5jdGlvbihiKXtjKGEsYixkW2JdKX0pfXJldHVybiBhfWZ1bmN0aW9uIGMoYSxiLGMpe3JldHVybiBiPWcoYiksYiBpbiBhP09iamVjdC5kZWZpbmVQcm9wZXJ0eShhLGIse3ZhbHVlOmMsZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITB9KTphW2JdPWMsYX1mdW5jdGlvbiBkKGEsYil7aWYoIShhIGluc3RhbmNlb2YgYikpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIil9ZnVuY3Rpb24gZShhLGIpe2Zvcih2YXIgYz0wO2M8Yi5sZW5ndGg7YysrKXt2YXIgZD1iW2NdO2QuZW51bWVyYWJsZT1kLmVudW1lcmFibGV8fCExLGQuY29uZmlndXJhYmxlPSEwLCJ2YWx1ZSJpbiBkJiYoZC53cml0YWJsZT0hMCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGEsZyhkLmtleSksZCl9fWZ1bmN0aW9uIGYoYSxiLGMpe3JldHVybiBiJiZlKGEucHJvdG90eXBlLGIpLGMmJmUoYSxjKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoYSwicHJvdG90eXBlIix7d3JpdGFibGU6ITF9KSxhfWZ1bmN0aW9uIGcoYSl7dmFyIGI9aChhLCJzdHJpbmciKTtyZXR1cm4ic3ltYm9sIj09dHlwZW9mIGI/YjpTdHJpbmcoYil9ZnVuY3Rpb24gaChiLGMpe2lmKCJvYmplY3QiIT10eXBlb2YgYnx8bnVsbD09PWIpcmV0dXJuIGI7dmFyIGQ9YltTeW1ib2wudG9QcmltaXRpdmVdO2lmKGQhPT1hKXt2YXIgZT1kLmNhbGwoYixjfHwiZGVmYXVsdCIpO2lmKCJvYmplY3QiIT10eXBlb2YgZSlyZXR1cm4gZTt0aHJvdyBuZXcgVHlwZUVycm9yKCJAQHRvUHJpbWl0aXZlIG11c3QgcmV0dXJuIGEgcHJpbWl0aXZlIHZhbHVlLiIpfXJldHVybigic3RyaW5nIj09PWM/U3RyaW5nOk51bWJlcikoYil9Zm9yKHZhciBpPVtbIkFmZ2hhbmlzdGFuICjigKvYp9mB2LrYp9mG2LPYqtin2YbigKzigI4pIiwiYWYiLCI5MyJdLFsiQWxiYW5pYSAoU2hxaXDDq3JpKSIsImFsIiwiMzU1Il0sWyJBbGdlcmlhICjigKvYp9mE2KzYstin2KbYseKArOKAjikiLCJkeiIsIjIxMyJdLFsiQW1lcmljYW4gU2Ftb2EiLCJhcyIsIjEiLDUsWyI2ODQiXV0sWyJBbmRvcnJhIiwiYWQiLCIzNzYiXSxbIkFuZ29sYSIsImFvIiwiMjQ0Il0sWyJBbmd1aWxsYSIsImFpIiwiMSIsNixbIjI2NCJdXSxbIkFudGlndWEgYW5kIEJhcmJ1ZGEiLCJhZyIsIjEiLDcsWyIyNjgiXV0sWyJBcmdlbnRpbmEiLCJhciIsIjU0Il0sWyJBcm1lbmlhICjVgNWh1bXVodW91b/VodW2KSIsImFtIiwiMzc0Il0sWyJBcnViYSIsImF3IiwiMjk3Il0sWyJBc2NlbnNpb24gSXNsYW5kIiwiYWMiLCIyNDciXSxbIkF1c3RyYWxpYSIsImF1IiwiNjEiLDBdLFsiQXVzdHJpYSAow5ZzdGVycmVpY2gpIiwiYXQiLCI0MyJdLFsiQXplcmJhaWphbiAoQXrJmXJiYXljYW4pIiwiYXoiLCI5OTQiXSxbIkJhaGFtYXMiLCJicyIsIjEiLDgsWyIyNDIiXV0sWyJCYWhyYWluICjigKvYp9mE2KjYrdix2YrZhuKArOKAjikiLCJiaCIsIjk3MyJdLFsiQmFuZ2xhZGVzaCAo4Kas4Ka+4KaC4Kay4Ka+4Kam4KeH4Ka2KSIsImJkIiwiODgwIl0sWyJCYXJiYWRvcyIsImJiIiwiMSIsOSxbIjI0NiJdXSxbIkJlbGFydXMgKNCR0LXQu9Cw0YDRg9GB0YwpIiwiYnkiLCIzNzUiXSxbIkJlbGdpdW0gKEJlbGdpw6spIiwiYmUiLCIzMiJdLFsiQmVsaXplIiwiYnoiLCI1MDEiXSxbIkJlbmluIChCw6luaW4pIiwiYmoiLCIyMjkiXSxbIkJlcm11ZGEiLCJibSIsIjEiLDEwLFsiNDQxIl1dLFsiQmh1dGFuICjgvaDgvZbgvrLgvbTgvYIpIiwiYnQiLCI5NzUiXSxbIkJvbGl2aWEiLCJibyIsIjU5MSJdLFsiQm9zbmlhIGFuZCBIZXJ6ZWdvdmluYSAo0JHQvtGB0L3QsCDQuCDQpdC10YDRhtC10LPQvtCy0LjQvdCwKSIsImJhIiwiMzg3Il0sWyJCb3Rzd2FuYSIsImJ3IiwiMjY3Il0sWyJCcmF6aWwgKEJyYXNpbCkiLCJiciIsIjU1Il0sWyJCcml0aXNoIEluZGlhbiBPY2VhbiBUZXJyaXRvcnkiLCJpbyIsIjI0NiJdLFsiQnJpdGlzaCBWaXJnaW4gSXNsYW5kcyIsInZnIiwiMSIsMTEsWyIyODQiXV0sWyJCcnVuZWkiLCJibiIsIjY3MyJdLFsiQnVsZ2FyaWEgKNCR0YrQu9Cz0LDRgNC40Y8pIiwiYmciLCIzNTkiXSxbIkJ1cmtpbmEgRmFzbyIsImJmIiwiMjI2Il0sWyJCdXJ1bmRpIChVYnVydW5kaSkiLCJiaSIsIjI1NyJdLFsiQ2FtYm9kaWEgKOGegOGemOGfkuGeluGeu+Geh+GetikiLCJraCIsIjg1NSJdLFsiQ2FtZXJvb24gKENhbWVyb3VuKSIsImNtIiwiMjM3Il0sWyJDYW5hZGEiLCJjYSIsIjEiLDEsWyIyMDQiLCIyMjYiLCIyMzYiLCIyNDkiLCIyNTAiLCIyNjMiLCIyODkiLCIzMDYiLCIzNDMiLCIzNTQiLCIzNjUiLCIzNjciLCIzNjgiLCIzODIiLCIzODciLCI0MDMiLCI0MTYiLCI0MTgiLCI0MjgiLCI0MzEiLCI0MzciLCI0MzgiLCI0NTAiLCI1ODQiLCI0NjgiLCI0NzQiLCI1MDYiLCI1MTQiLCI1MTkiLCI1NDgiLCI1NzkiLCI1ODEiLCI1ODQiLCI1ODciLCI2MDQiLCI2MTMiLCI2MzkiLCI2NDciLCI2NzIiLCI2ODMiLCI3MDUiLCI3MDkiLCI3NDIiLCI3NTMiLCI3NzgiLCI3ODAiLCI3ODIiLCI4MDciLCI4MTkiLCI4MjUiLCI4NjciLCI4NzMiLCI5MDIiLCI5MDUiXV0sWyJDYXBlIFZlcmRlIChLYWJ1IFZlcmRpKSIsImN2IiwiMjM4Il0sWyJDYXJpYmJlYW4gTmV0aGVybGFuZHMiLCJicSIsIjU5OSIsMSxbIjMiLCI0IiwiNyJdXSxbIkNheW1hbiBJc2xhbmRzIiwia3kiLCIxIiwxMixbIjM0NSJdXSxbIkNlbnRyYWwgQWZyaWNhbiBSZXB1YmxpYyAoUsOpcHVibGlxdWUgY2VudHJhZnJpY2FpbmUpIiwiY2YiLCIyMzYiXSxbIkNoYWQgKFRjaGFkKSIsInRkIiwiMjM1Il0sWyJDaGlsZSIsImNsIiwiNTYiXSxbIkNoaW5hICjkuK3lm70pIiwiY24iLCI4NiJdLFsiQ2hyaXN0bWFzIElzbGFuZCIsImN4IiwiNjEiLDIsWyI4OTE2NCJdXSxbIkNvY29zIChLZWVsaW5nKSBJc2xhbmRzIiwiY2MiLCI2MSIsMSxbIjg5MTYyIl1dLFsiQ29sb21iaWEiLCJjbyIsIjU3Il0sWyJDb21vcm9zICjigKvYrNiy2LEg2KfZhNmC2YXYseKArOKAjikiLCJrbSIsIjI2OSJdLFsiQ29uZ28gKERSQykgKEphbWh1cmkgeWEgS2lkZW1va3Jhc2lhIHlhIEtvbmdvKSIsImNkIiwiMjQzIl0sWyJDb25nbyAoUmVwdWJsaWMpIChDb25nby1CcmF6emF2aWxsZSkiLCJjZyIsIjI0MiJdLFsiQ29vayBJc2xhbmRzIiwiY2siLCI2ODIiXSxbIkNvc3RhIFJpY2EiLCJjciIsIjUwNiJdLFsiQ8O0dGUgZOKAmUl2b2lyZSIsImNpIiwiMjI1Il0sWyJDcm9hdGlhIChIcnZhdHNrYSkiLCJociIsIjM4NSJdLFsiQ3ViYSIsImN1IiwiNTMiXSxbIkN1cmHDp2FvIiwiY3ciLCI1OTkiLDBdLFsiQ3lwcnVzICjOms+Nz4DPgc6/z4IpIiwiY3kiLCIzNTciXSxbIkN6ZWNoIFJlcHVibGljICjEjGVza8OhIHJlcHVibGlrYSkiLCJjeiIsIjQyMCJdLFsiRGVubWFyayAoRGFubWFyaykiLCJkayIsIjQ1Il0sWyJEamlib3V0aSIsImRqIiwiMjUzIl0sWyJEb21pbmljYSIsImRtIiwiMSIsMTMsWyI3NjciXV0sWyJEb21pbmljYW4gUmVwdWJsaWMgKFJlcMO6YmxpY2EgRG9taW5pY2FuYSkiLCJkbyIsIjEiLDIsWyI4MDkiLCI4MjkiLCI4NDkiXV0sWyJFY3VhZG9yIiwiZWMiLCI1OTMiXSxbIkVneXB0ICjigKvZhdi12LHigKzigI4pIiwiZWciLCIyMCJdLFsiRWwgU2FsdmFkb3IiLCJzdiIsIjUwMyJdLFsiRXF1YXRvcmlhbCBHdWluZWEgKEd1aW5lYSBFY3VhdG9yaWFsKSIsImdxIiwiMjQwIl0sWyJFcml0cmVhIiwiZXIiLCIyOTEiXSxbIkVzdG9uaWEgKEVlc3RpKSIsImVlIiwiMzcyIl0sWyJFc3dhdGluaSIsInN6IiwiMjY4Il0sWyJFdGhpb3BpYSIsImV0IiwiMjUxIl0sWyJGYWxrbGFuZCBJc2xhbmRzIChJc2xhcyBNYWx2aW5hcykiLCJmayIsIjUwMCJdLFsiRmFyb2UgSXNsYW5kcyAoRsO4cm95YXIpIiwiZm8iLCIyOTgiXSxbIkZpamkiLCJmaiIsIjY3OSJdLFsiRmlubGFuZCAoU3VvbWkpIiwiZmkiLCIzNTgiLDBdLFsiRnJhbmNlIiwiZnIiLCIzMyJdLFsiRnJlbmNoIEd1aWFuYSAoR3V5YW5lIGZyYW7Dp2Fpc2UpIiwiZ2YiLCI1OTQiXSxbIkZyZW5jaCBQb2x5bmVzaWEgKFBvbHluw6lzaWUgZnJhbsOnYWlzZSkiLCJwZiIsIjY4OSJdLFsiR2Fib24iLCJnYSIsIjI0MSJdLFsiR2FtYmlhIiwiZ20iLCIyMjAiXSxbIkdlb3JnaWEgKOGDoeGDkOGDpeGDkOGDoOGDl+GDleGDlOGDmuGDnSkiLCJnZSIsIjk5NSJdLFsiR2VybWFueSAoRGV1dHNjaGxhbmQpIiwiZGUiLCI0OSJdLFsiR2hhbmEgKEdhYW5hKSIsImdoIiwiMjMzIl0sWyJHaWJyYWx0YXIiLCJnaSIsIjM1MCJdLFsiR3JlZWNlICjOlc67zrvOrM60zrEpIiwiZ3IiLCIzMCJdLFsiR3JlZW5sYW5kIChLYWxhYWxsaXQgTnVuYWF0KSIsImdsIiwiMjk5Il0sWyJHcmVuYWRhIiwiZ2QiLCIxIiwxNCxbIjQ3MyJdXSxbIkd1YWRlbG91cGUiLCJncCIsIjU5MCIsMF0sWyJHdWFtIiwiZ3UiLCIxIiwxNSxbIjY3MSJdXSxbIkd1YXRlbWFsYSIsImd0IiwiNTAyIl0sWyJHdWVybnNleSIsImdnIiwiNDQiLDEsWyIxNDgxIiwiNzc4MSIsIjc4MzkiLCI3OTExIl1dLFsiR3VpbmVhIChHdWluw6llKSIsImduIiwiMjI0Il0sWyJHdWluZWEtQmlzc2F1IChHdWluw6kgQmlzc2F1KSIsImd3IiwiMjQ1Il0sWyJHdXlhbmEiLCJneSIsIjU5MiJdLFsiSGFpdGkiLCJodCIsIjUwOSJdLFsiSG9uZHVyYXMiLCJobiIsIjUwNCJdLFsiSG9uZyBLb25nICjpppnmuK8pIiwiaGsiLCI4NTIiXSxbIkh1bmdhcnkgKE1hZ3lhcm9yc3rDoWcpIiwiaHUiLCIzNiJdLFsiSWNlbGFuZCAow41zbGFuZCkiLCJpcyIsIjM1NCJdLFsiSW5kaWEgKOCkreCkvuCksOCkpCkiLCJpbiIsIjkxIl0sWyJJbmRvbmVzaWEiLCJpZCIsIjYyIl0sWyJJcmFuICjigKvYp9uM2LHYp9mG4oCs4oCOKSIsImlyIiwiOTgiXSxbIklyYXEgKOKAq9in2YTYudix2KfZguKArOKAjikiLCJpcSIsIjk2NCJdLFsiSXJlbGFuZCIsImllIiwiMzUzIl0sWyJJc2xlIG9mIE1hbiIsImltIiwiNDQiLDIsWyIxNjI0IiwiNzQ1NzYiLCI3NTI0IiwiNzkyNCIsIjc2MjQiXV0sWyJJc3JhZWwgKOKAq9eZ16nXqNeQ15zigKzigI4pIiwiaWwiLCI5NzIiXSxbIkl0YWx5IChJdGFsaWEpIiwiaXQiLCIzOSIsMF0sWyJKYW1haWNhIiwiam0iLCIxIiw0LFsiODc2IiwiNjU4Il1dLFsiSmFwYW4gKOaXpeacrCkiLCJqcCIsIjgxIl0sWyJKZXJzZXkiLCJqZSIsIjQ0IiwzLFsiMTUzNCIsIjc1MDkiLCI3NzAwIiwiNzc5NyIsIjc4MjkiLCI3OTM3Il1dLFsiSm9yZGFuICjigKvYp9mE2KPYsdiv2YbigKzigI4pIiwiam8iLCI5NjIiXSxbIkthemFraHN0YW4gKNCa0LDQt9Cw0YXRgdGC0LDQvSkiLCJreiIsIjciLDEsWyIzMyIsIjciXV0sWyJLZW55YSIsImtlIiwiMjU0Il0sWyJLaXJpYmF0aSIsImtpIiwiNjg2Il0sWyJLb3Nvdm8iLCJ4ayIsIjM4MyJdLFsiS3V3YWl0ICjigKvYp9mE2YPZiNmK2KrigKzigI4pIiwia3ciLCI5NjUiXSxbIkt5cmd5enN0YW4gKNCa0YvRgNCz0YvQt9GB0YLQsNC9KSIsImtnIiwiOTk2Il0sWyJMYW9zICjguqXgurLguqcpIiwibGEiLCI4NTYiXSxbIkxhdHZpYSAoTGF0dmlqYSkiLCJsdiIsIjM3MSJdLFsiTGViYW5vbiAo4oCr2YTYqNmG2KfZhuKArOKAjikiLCJsYiIsIjk2MSJdLFsiTGVzb3RobyIsImxzIiwiMjY2Il0sWyJMaWJlcmlhIiwibHIiLCIyMzEiXSxbIkxpYnlhICjigKvZhNmK2KjZitin4oCs4oCOKSIsImx5IiwiMjE4Il0sWyJMaWVjaHRlbnN0ZWluIiwibGkiLCI0MjMiXSxbIkxpdGh1YW5pYSAoTGlldHV2YSkiLCJsdCIsIjM3MCJdLFsiTHV4ZW1ib3VyZyIsImx1IiwiMzUyIl0sWyJNYWNhdSAo5r6z6ZaAKSIsIm1vIiwiODUzIl0sWyJNYWRhZ2FzY2FyIChNYWRhZ2FzaWthcmEpIiwibWciLCIyNjEiXSxbIk1hbGF3aSIsIm13IiwiMjY1Il0sWyJNYWxheXNpYSIsIm15IiwiNjAiXSxbIk1hbGRpdmVzIiwibXYiLCI5NjAiXSxbIk1hbGkiLCJtbCIsIjIyMyJdLFsiTWFsdGEiLCJtdCIsIjM1NiJdLFsiTWFyc2hhbGwgSXNsYW5kcyIsIm1oIiwiNjkyIl0sWyJNYXJ0aW5pcXVlIiwibXEiLCI1OTYiXSxbIk1hdXJpdGFuaWEgKOKAq9mF2YjYsdmK2KrYp9mG2YrYp+KArOKAjikiLCJtciIsIjIyMiJdLFsiTWF1cml0aXVzIChNb3JpcykiLCJtdSIsIjIzMCJdLFsiTWF5b3R0ZSIsInl0IiwiMjYyIiwxLFsiMjY5IiwiNjM5Il1dLFsiTWV4aWNvIChNw6l4aWNvKSIsIm14IiwiNTIiXSxbIk1pY3JvbmVzaWEiLCJmbSIsIjY5MSJdLFsiTW9sZG92YSAoUmVwdWJsaWNhIE1vbGRvdmEpIiwibWQiLCIzNzMiXSxbIk1vbmFjbyIsIm1jIiwiMzc3Il0sWyJNb25nb2xpYSAo0JzQvtC90LPQvtC7KSIsIm1uIiwiOTc2Il0sWyJNb250ZW5lZ3JvIChDcm5hIEdvcmEpIiwibWUiLCIzODIiXSxbIk1vbnRzZXJyYXQiLCJtcyIsIjEiLDE2LFsiNjY0Il1dLFsiTW9yb2NjbyAo4oCr2KfZhNmF2LrYsdio4oCs4oCOKSIsIm1hIiwiMjEyIiwwXSxbIk1vemFtYmlxdWUgKE1vw6dhbWJpcXVlKSIsIm16IiwiMjU4Il0sWyJNeWFubWFyIChCdXJtYSkgKOGAmeGAvOGAlOGAuuGAmeGArCkiLCJtbSIsIjk1Il0sWyJOYW1pYmlhIChOYW1pYmnDqykiLCJuYSIsIjI2NCJdLFsiTmF1cnUiLCJuciIsIjY3NCJdLFsiTmVwYWwgKOCkqOClh+CkquCkvuCksikiLCJucCIsIjk3NyJdLFsiTmV0aGVybGFuZHMgKE5lZGVybGFuZCkiLCJubCIsIjMxIl0sWyJOZXcgQ2FsZWRvbmlhIChOb3V2ZWxsZS1DYWzDqWRvbmllKSIsIm5jIiwiNjg3Il0sWyJOZXcgWmVhbGFuZCIsIm56IiwiNjQiXSxbIk5pY2FyYWd1YSIsIm5pIiwiNTA1Il0sWyJOaWdlciAoTmlqYXIpIiwibmUiLCIyMjciXSxbIk5pZ2VyaWEiLCJuZyIsIjIzNCJdLFsiTml1ZSIsIm51IiwiNjgzIl0sWyJOb3Jmb2xrIElzbGFuZCIsIm5mIiwiNjcyIl0sWyJOb3J0aCBLb3JlYSAo7KGw7ISgIOuvvOyjvOyjvOydmCDsnbjrr7wg6rO17ZmU6rWtKSIsImtwIiwiODUwIl0sWyJOb3J0aCBNYWNlZG9uaWEgKNCh0LXQstC10YDQvdCwINCc0LDQutC10LTQvtC90LjRmNCwKSIsIm1rIiwiMzg5Il0sWyJOb3J0aGVybiBNYXJpYW5hIElzbGFuZHMiLCJtcCIsIjEiLDE3LFsiNjcwIl1dLFsiTm9yd2F5IChOb3JnZSkiLCJubyIsIjQ3IiwwXSxbIk9tYW4gKOKAq9i52Y/Zhdin2YbigKzigI4pIiwib20iLCI5NjgiXSxbIlBha2lzdGFuICjigKvZvtin2qnYs9iq2KfZhuKArOKAjikiLCJwayIsIjkyIl0sWyJQYWxhdSIsInB3IiwiNjgwIl0sWyJQYWxlc3RpbmUgKOKAq9mB2YTYs9i32YrZhuKArOKAjikiLCJwcyIsIjk3MCJdLFsiUGFuYW1hIChQYW5hbcOhKSIsInBhIiwiNTA3Il0sWyJQYXB1YSBOZXcgR3VpbmVhIiwicGciLCI2NzUiXSxbIlBhcmFndWF5IiwicHkiLCI1OTUiXSxbIlBlcnUgKFBlcsO6KSIsInBlIiwiNTEiXSxbIlBoaWxpcHBpbmVzIiwicGgiLCI2MyJdLFsiUG9sYW5kIChQb2xza2EpIiwicGwiLCI0OCJdLFsiUG9ydHVnYWwiLCJwdCIsIjM1MSJdLFsiUHVlcnRvIFJpY28iLCJwciIsIjEiLDMsWyI3ODciLCI5MzkiXV0sWyJRYXRhciAo4oCr2YLYt9ix4oCs4oCOKSIsInFhIiwiOTc0Il0sWyJSw6l1bmlvbiAoTGEgUsOpdW5pb24pIiwicmUiLCIyNjIiLDBdLFsiUm9tYW5pYSAoUm9tw6JuaWEpIiwicm8iLCI0MCJdLFsiUnVzc2lhICjQoNC+0YHRgdC40Y8pIiwicnUiLCI3IiwwXSxbIlJ3YW5kYSIsInJ3IiwiMjUwIl0sWyJTYWludCBCYXJ0aMOpbGVteSIsImJsIiwiNTkwIiwxXSxbIlNhaW50IEhlbGVuYSIsInNoIiwiMjkwIl0sWyJTYWludCBLaXR0cyBhbmQgTmV2aXMiLCJrbiIsIjEiLDE4LFsiODY5Il1dLFsiU2FpbnQgTHVjaWEiLCJsYyIsIjEiLDE5LFsiNzU4Il1dLFsiU2FpbnQgTWFydGluIChTYWludC1NYXJ0aW4gKHBhcnRpZSBmcmFuw6dhaXNlKSkiLCJtZiIsIjU5MCIsMl0sWyJTYWludCBQaWVycmUgYW5kIE1pcXVlbG9uIChTYWludC1QaWVycmUtZXQtTWlxdWVsb24pIiwicG0iLCI1MDgiXSxbIlNhaW50IFZpbmNlbnQgYW5kIHRoZSBHcmVuYWRpbmVzIiwidmMiLCIxIiwyMCxbIjc4NCJdXSxbIlNhbW9hIiwid3MiLCI2ODUiXSxbIlNhbiBNYXJpbm8iLCJzbSIsIjM3OCJdLFsiU8OjbyBUb23DqSBhbmQgUHLDrW5jaXBlIChTw6NvIFRvbcOpIGUgUHLDrW5jaXBlKSIsInN0IiwiMjM5Il0sWyJTYXVkaSBBcmFiaWEgKOKAq9in2YTZhdmF2YTZg9ipINin2YTYudix2KjZitipINin2YTYs9i52YjYr9mK2KnigKzigI4pIiwic2EiLCI5NjYiXSxbIlNlbmVnYWwgKFPDqW7DqWdhbCkiLCJzbiIsIjIyMSJdLFsiU2VyYmlhICjQodGA0LHQuNGY0LApIiwicnMiLCIzODEiXSxbIlNleWNoZWxsZXMiLCJzYyIsIjI0OCJdLFsiU2llcnJhIExlb25lIiwic2wiLCIyMzIiXSxbIlNpbmdhcG9yZSIsInNnIiwiNjUiXSxbIlNpbnQgTWFhcnRlbiIsInN4IiwiMSIsMjEsWyI3MjEiXV0sWyJTbG92YWtpYSAoU2xvdmVuc2tvKSIsInNrIiwiNDIxIl0sWyJTbG92ZW5pYSAoU2xvdmVuaWphKSIsInNpIiwiMzg2Il0sWyJTb2xvbW9uIElzbGFuZHMiLCJzYiIsIjY3NyJdLFsiU29tYWxpYSAoU29vbWFhbGl5YSkiLCJzbyIsIjI1MiJdLFsiU291dGggQWZyaWNhIiwiemEiLCIyNyJdLFsiU291dGggS29yZWEgKOuMgO2VnOuvvOq1rSkiLCJrciIsIjgyIl0sWyJTb3V0aCBTdWRhbiAo4oCr2KzZhtmI2Kgg2KfZhNiz2YjYr9in2YbigKzigI4pIiwic3MiLCIyMTEiXSxbIlNwYWluIChFc3Bhw7FhKSIsImVzIiwiMzQiXSxbIlNyaSBMYW5rYSAo4LeB4LeK4oCN4La74LeTIOC2veC2guC2muC3j+C3gCkiLCJsayIsIjk0Il0sWyJTdWRhbiAo4oCr2KfZhNiz2YjYr9in2YbigKzigI4pIiwic2QiLCIyNDkiXSxbIlN1cmluYW1lIiwic3IiLCI1OTciXSxbIlN2YWxiYXJkIGFuZCBKYW4gTWF5ZW4iLCJzaiIsIjQ3IiwxLFsiNzkiXV0sWyJTd2VkZW4gKFN2ZXJpZ2UpIiwic2UiLCI0NiJdLFsiU3dpdHplcmxhbmQgKFNjaHdlaXopIiwiY2giLCI0MSJdLFsiU3lyaWEgKOKAq9iz2YjYsdmK2KfigKzigI4pIiwic3kiLCI5NjMiXSxbIlRhaXdhbiAo5Y+w54GjKSIsInR3IiwiODg2Il0sWyJUYWppa2lzdGFuIiwidGoiLCI5OTIiXSxbIlRhbnphbmlhIiwidHoiLCIyNTUiXSxbIlRoYWlsYW5kICjguYTguJfguKIpIiwidGgiLCI2NiJdLFsiVGltb3ItTGVzdGUiLCJ0bCIsIjY3MCJdLFsiVG9nbyIsInRnIiwiMjI4Il0sWyJUb2tlbGF1IiwidGsiLCI2OTAiXSxbIlRvbmdhIiwidG8iLCI2NzYiXSxbIlRyaW5pZGFkIGFuZCBUb2JhZ28iLCJ0dCIsIjEiLDIyLFsiODY4Il1dLFsiVHVuaXNpYSAo4oCr2KrZiNmG2LPigKzigI4pIiwidG4iLCIyMTYiXSxbIlR1cmtleSAoVMO8cmtpeWUpIiwidHIiLCI5MCJdLFsiVHVya21lbmlzdGFuIiwidG0iLCI5OTMiXSxbIlR1cmtzIGFuZCBDYWljb3MgSXNsYW5kcyIsInRjIiwiMSIsMjMsWyI2NDkiXV0sWyJUdXZhbHUiLCJ0diIsIjY4OCJdLFsiVS5TLiBWaXJnaW4gSXNsYW5kcyIsInZpIiwiMSIsMjQsWyIzNDAiXV0sWyJVZ2FuZGEiLCJ1ZyIsIjI1NiJdLFsiVWtyYWluZSAo0KPQutGA0LDRl9C90LApIiwidWEiLCIzODAiXSxbIlVuaXRlZCBBcmFiIEVtaXJhdGVzICjigKvYp9mE2KXZhdin2LHYp9iqINin2YTYudix2KjZitipINin2YTZhdiq2K3Yr9ip4oCs4oCOKSIsImFlIiwiOTcxIl0sWyJVbml0ZWQgS2luZ2RvbSIsImdiIiwiNDQiLDBdLFsiVW5pdGVkIFN0YXRlcyIsInVzIiwiMSIsMF0sWyJVcnVndWF5IiwidXkiLCI1OTgiXSxbIlV6YmVraXN0YW4gKE/Ku3piZWtpc3RvbikiLCJ1eiIsIjk5OCJdLFsiVmFudWF0dSIsInZ1IiwiNjc4Il0sWyJWYXRpY2FuIENpdHkgKENpdHTDoCBkZWwgVmF0aWNhbm8pIiwidmEiLCIzOSIsMSxbIjA2Njk4Il1dLFsiVmVuZXp1ZWxhIiwidmUiLCI1OCJdLFsiVmlldG5hbSAoVmnhu4d0IE5hbSkiLCJ2biIsIjg0Il0sWyJXYWxsaXMgYW5kIEZ1dHVuYSAoV2FsbGlzLWV0LUZ1dHVuYSkiLCJ3ZiIsIjY4MSJdLFsiV2VzdGVybiBTYWhhcmEgKOKAq9in2YTYtdit2LHYp9ihINin2YTYutix2KjZitip4oCs4oCOKSIsImVoIiwiMjEyIiwxLFsiNTI4OCIsIjUyODkiXV0sWyJZZW1lbiAo4oCr2KfZhNmK2YXZhuKArOKAjikiLCJ5ZSIsIjk2NyJdLFsiWmFtYmlhIiwiem0iLCIyNjAiXSxbIlppbWJhYndlIiwienciLCIyNjMiXSxbIsOFbGFuZCBJc2xhbmRzIiwiYXgiLCIzNTgiLDEsWyIxOCJdXV0saj0wO2o8aS5sZW5ndGg7aisrKXt2YXIgaz1pW2pdO2lbal09e25hbWU6a1swXSxpc28yOmtbMV0sZGlhbENvZGU6a1syXSxwcmlvcml0eTprWzNdfHwwLGFyZWFDb2RlczprWzRdfHxudWxsfX12YXIgbD17Z2V0SW5zdGFuY2U6ZnVuY3Rpb24oYSl7dmFyIGI9YS5nZXRBdHRyaWJ1dGUoImRhdGEtaW50bC10ZWwtaW5wdXQtaWQiKTtyZXR1cm4gd2luZG93LmludGxUZWxJbnB1dEdsb2JhbHMuaW5zdGFuY2VzW2JdfSxpbnN0YW5jZXM6e30sZG9jdW1lbnRSZWFkeTpmdW5jdGlvbigpe3JldHVybiJjb21wbGV0ZSI9PT1kb2N1bWVudC5yZWFkeVN0YXRlfX07Im9iamVjdCI9PXR5cGVvZiB3aW5kb3cmJih3aW5kb3cuaW50bFRlbElucHV0R2xvYmFscz1sKTt2YXIgbT0wLG49e2FsbG93RHJvcGRvd246ITAsYXV0b0luc2VydERpYWxDb2RlOiExLGF1dG9QbGFjZWhvbGRlcjoicG9saXRlIixjdXN0b21Db250YWluZXI6IiIsY3VzdG9tUGxhY2Vob2xkZXI6bnVsbCxkcm9wZG93bkNvbnRhaW5lcjpudWxsLGV4Y2x1ZGVDb3VudHJpZXM6W10sZm9ybWF0T25EaXNwbGF5OiEwLGdlb0lwTG9va3VwOm51bGwsaGlkZGVuSW5wdXQ6IiIsaW5pdGlhbENvdW50cnk6IiIsbG9jYWxpemVkQ291bnRyaWVzOm51bGwsbmF0aW9uYWxNb2RlOiEwLG9ubHlDb3VudHJpZXM6W10scGxhY2Vob2xkZXJOdW1iZXJUeXBlOiJNT0JJTEUiLHByZWZlcnJlZENvdW50cmllczpbInVzIiwiZ2IiXSxzZXBhcmF0ZURpYWxDb2RlOiExLHNob3dGbGFnczohMCx1dGlsc1NjcmlwdDoiIn0sbz1bIjgwMCIsIjgyMiIsIjgzMyIsIjg0NCIsIjg1NSIsIjg2NiIsIjg3NyIsIjg4MCIsIjg4MSIsIjg4MiIsIjg4MyIsIjg4NCIsIjg4NSIsIjg4NiIsIjg4NyIsIjg4OCIsIjg4OSJdLHA9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9T2JqZWN0LmtleXMoYSksZD0wO2Q8Yy5sZW5ndGg7ZCsrKWIoY1tkXSxhW2NbZF1dKX0scT1mdW5jdGlvbihhKXtwKHdpbmRvdy5pbnRsVGVsSW5wdXRHbG9iYWxzLmluc3RhbmNlcyxmdW5jdGlvbihiKXt3aW5kb3cuaW50bFRlbElucHV0R2xvYmFscy5pbnN0YW5jZXNbYl1bYV0oKX0pfSxyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYyhhLGIpe3ZhciBlPXRoaXM7ZCh0aGlzLGMpLHRoaXMuaWQ9bSsrLHRoaXMuYT1hLHRoaXMuYj1udWxsLHRoaXMuYz1udWxsO3ZhciBmPWJ8fHt9O3RoaXMuZD17fSxwKG4sZnVuY3Rpb24oYSxiKXtlLmRbYV09Zi5oYXNPd25Qcm9wZXJ0eShhKT9mW2FdOmJ9KSx0aGlzLmU9Qm9vbGVhbihhLmdldEF0dHJpYnV0ZSgicGxhY2Vob2xkZXIiKSl9cmV0dXJuIGYoYyxbe2tleToiX2luaXQiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpczt0aGlzLmQubmF0aW9uYWxNb2RlJiYodGhpcy5kLmF1dG9JbnNlcnREaWFsQ29kZT0hMSksdGhpcy5kLnNlcGFyYXRlRGlhbENvZGUmJih0aGlzLmQuYXV0b0luc2VydERpYWxDb2RlPSExKTt2YXIgYj10aGlzLmQuYWxsb3dEcm9wZG93biYmIXRoaXMuZC5zZXBhcmF0ZURpYWxDb2RlO2lmKCF0aGlzLmQuc2hvd0ZsYWdzJiZiJiYodGhpcy5kLnNob3dGbGFncz0hMCksdGhpcy5nPS9BbmRyb2lkLitNb2JpbGV8d2ViT1N8aVBob25lfGlQb2R8QmxhY2tCZXJyeXxJRU1vYmlsZXxPcGVyYSBNaW5pL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSx0aGlzLmcmJihkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoIml0aS1tb2JpbGUiKSx0aGlzLmQuZHJvcGRvd25Db250YWluZXJ8fCh0aGlzLmQuZHJvcGRvd25Db250YWluZXI9ZG9jdW1lbnQuYm9keSkpLHRoaXMuaXNSVEw9ISF0aGlzLmEuY2xvc2VzdCgiW2Rpcj1ydGxdIiksInVuZGVmaW5lZCIhPXR5cGVvZiBQcm9taXNlKXt2YXIgYz1uZXcgUHJvbWlzZShmdW5jdGlvbihiLGMpe2EuaD1iLGEuaT1jfSksZD1uZXcgUHJvbWlzZShmdW5jdGlvbihiLGMpe2EuaTA9YixhLmkxPWN9KTt0aGlzLnByb21pc2U9UHJvbWlzZS5hbGwoW2MsZF0pfWVsc2UgdGhpcy5oPXRoaXMuaT1mdW5jdGlvbigpe30sdGhpcy5pMD10aGlzLmkxPWZ1bmN0aW9uKCl7fTt0aGlzLnM9e30sdGhpcy5fYigpLHRoaXMuX2YoKSx0aGlzLl9oKCksdGhpcy5faSgpLHRoaXMuX2kzKCl9fSx7a2V5OiJfYiIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9kKCksdGhpcy5fZDIoKSx0aGlzLl9lKCksdGhpcy5kLmxvY2FsaXplZENvdW50cmllcyYmdGhpcy5fZDAoKSwodGhpcy5kLm9ubHlDb3VudHJpZXMubGVuZ3RofHx0aGlzLmQubG9jYWxpemVkQ291bnRyaWVzKSYmdGhpcy5wLnNvcnQodGhpcy5fZDEpfX0se2tleToiX2MiLHZhbHVlOmZ1bmN0aW9uKGIsYyxkKXtjLmxlbmd0aD50aGlzLmNvdW50cnlDb2RlTWF4TGVuJiYodGhpcy5jb3VudHJ5Q29kZU1heExlbj1jLmxlbmd0aCksdGhpcy5xLmhhc093blByb3BlcnR5KGMpfHwodGhpcy5xW2NdPVtdKTtmb3IodmFyIGU9MDtlPHRoaXMucVtjXS5sZW5ndGg7ZSsrKWlmKHRoaXMucVtjXVtlXT09PWIpcmV0dXJuO3ZhciBmPWQhPT1hP2Q6dGhpcy5xW2NdLmxlbmd0aDt0aGlzLnFbY11bZl09Yn19LHtrZXk6Il9kIix2YWx1ZTpmdW5jdGlvbigpe2lmKHRoaXMuZC5vbmx5Q291bnRyaWVzLmxlbmd0aCl7dmFyIGE9dGhpcy5kLm9ubHlDb3VudHJpZXMubWFwKGZ1bmN0aW9uKGEpe3JldHVybiBhLnRvTG93ZXJDYXNlKCl9KTt0aGlzLnA9aS5maWx0ZXIoZnVuY3Rpb24oYil7cmV0dXJuIGEuaW5kZXhPZihiLmlzbzIpPi0xfSl9ZWxzZSBpZih0aGlzLmQuZXhjbHVkZUNvdW50cmllcy5sZW5ndGgpe3ZhciBiPXRoaXMuZC5leGNsdWRlQ291bnRyaWVzLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gYS50b0xvd2VyQ2FzZSgpfSk7dGhpcy5wPWkuZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVybi0xPT09Yi5pbmRleE9mKGEuaXNvMil9KX1lbHNlIHRoaXMucD1pfX0se2tleToiX2QwIix2YWx1ZTpmdW5jdGlvbigpe2Zvcih2YXIgYT0wO2E8dGhpcy5wLmxlbmd0aDthKyspe3ZhciBiPXRoaXMucFthXS5pc28yLnRvTG93ZXJDYXNlKCk7dGhpcy5kLmxvY2FsaXplZENvdW50cmllcy5oYXNPd25Qcm9wZXJ0eShiKSYmKHRoaXMucFthXS5uYW1lPXRoaXMuZC5sb2NhbGl6ZWRDb3VudHJpZXNbYl0pfX19LHtrZXk6Il9kMSIsdmFsdWU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS5uYW1lPGIubmFtZT8tMTphLm5hbWU+Yi5uYW1lPzE6MH19LHtrZXk6Il9kMiIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmNvdW50cnlDb2RlTWF4TGVuPTAsdGhpcy5kaWFsQ29kZXM9e30sdGhpcy5xPXt9O2Zvcih2YXIgYT0wO2E8dGhpcy5wLmxlbmd0aDthKyspe3ZhciBiPXRoaXMucFthXTt0aGlzLmRpYWxDb2Rlc1tiLmRpYWxDb2RlXXx8KHRoaXMuZGlhbENvZGVzW2IuZGlhbENvZGVdPSEwKSx0aGlzLl9jKGIuaXNvMixiLmRpYWxDb2RlLGIucHJpb3JpdHkpfWZvcih2YXIgYz0wO2M8dGhpcy5wLmxlbmd0aDtjKyspe3ZhciBkPXRoaXMucFtjXTtpZihkLmFyZWFDb2Rlcylmb3IodmFyIGU9dGhpcy5xW2QuZGlhbENvZGVdWzBdLGY9MDtmPGQuYXJlYUNvZGVzLmxlbmd0aDtmKyspe2Zvcih2YXIgZz1kLmFyZWFDb2Rlc1tmXSxoPTE7aDxnLmxlbmd0aDtoKyspe3ZhciBpPWQuZGlhbENvZGUrZy5zdWJzdHIoMCxoKTt0aGlzLl9jKGUsaSksdGhpcy5fYyhkLmlzbzIsaSl9dGhpcy5fYyhkLmlzbzIsZC5kaWFsQ29kZStnKX19fX0se2tleToiX2UiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5wcmVmZXJyZWRDb3VudHJpZXM9W107Zm9yKHZhciBhPTA7YTx0aGlzLmQucHJlZmVycmVkQ291bnRyaWVzLmxlbmd0aDthKyspe3ZhciBiPXRoaXMuZC5wcmVmZXJyZWRDb3VudHJpZXNbYV0udG9Mb3dlckNhc2UoKSxjPXRoaXMuX3koYiwhMSwhMCk7YyYmdGhpcy5wcmVmZXJyZWRDb3VudHJpZXMucHVzaChjKX19fSx7a2V5OiJfZTIiLHZhbHVlOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KGEpO3JldHVybiBiJiZwKGIsZnVuY3Rpb24oYSxiKXtyZXR1cm4gZC5zZXRBdHRyaWJ1dGUoYSxiKX0pLGMmJmMuYXBwZW5kQ2hpbGQoZCksZH19LHtrZXk6Il9mIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuYS5oYXNBdHRyaWJ1dGUoImF1dG9jb21wbGV0ZSIpfHx0aGlzLmEuZm9ybSYmdGhpcy5hLmZvcm0uaGFzQXR0cmlidXRlKCJhdXRvY29tcGxldGUiKXx8dGhpcy5hLnNldEF0dHJpYnV0ZSgiYXV0b2NvbXBsZXRlIiwib2ZmIik7dmFyIGE9dGhpcy5kLGM9YS5hbGxvd0Ryb3Bkb3duLGQ9YS5zZXBhcmF0ZURpYWxDb2RlLGU9YS5zaG93RmxhZ3MsZj1hLmN1c3RvbUNvbnRhaW5lcixnPWEuaGlkZGVuSW5wdXQsaD1hLmRyb3Bkb3duQ29udGFpbmVyLGk9Iml0aSI7YyYmKGkrPSIgaXRpLS1hbGxvdy1kcm9wZG93biIpLGQmJihpKz0iIGl0aS0tc2VwYXJhdGUtZGlhbC1jb2RlIiksZSYmKGkrPSIgaXRpLS1zaG93LWZsYWdzIiksZiYmKGkrPSIgIi5jb25jYXQoZikpO3ZhciBqPXRoaXMuX2UyKCJkaXYiLHsiY2xhc3MiOml9KTt0aGlzLmEucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoaix0aGlzLmEpO3ZhciBrPWN8fGV8fGQ7aWYoayYmKHRoaXMuaz10aGlzLl9lMigiZGl2Iix7ImNsYXNzIjoiaXRpX19mbGFnLWNvbnRhaW5lciJ9LGopKSxqLmFwcGVuZENoaWxkKHRoaXMuYSksayYmKHRoaXMuc2VsZWN0ZWRGbGFnPXRoaXMuX2UyKCJkaXYiLGIoeyJjbGFzcyI6Iml0aV9fc2VsZWN0ZWQtZmxhZyJ9LGMmJntyb2xlOiJjb21ib2JveCIsImFyaWEtaGFzcG9wdXAiOiJsaXN0Ym94IiwiYXJpYS1jb250cm9scyI6Iml0aS0iLmNvbmNhdCh0aGlzLmlkLCJfX2NvdW50cnktbGlzdGJveCIpLCJhcmlhLWV4cGFuZGVkIjoiZmFsc2UiLCJhcmlhLWxhYmVsIjoiVGVsZXBob25lIGNvdW50cnkgY29kZSJ9KSx0aGlzLmspKSxlJiYodGhpcy5sPXRoaXMuX2UyKCJkaXYiLHsiY2xhc3MiOiJpdGlfX2ZsYWcifSx0aGlzLnNlbGVjdGVkRmxhZykpLHRoaXMuc2VsZWN0ZWRGbGFnJiZ0aGlzLmEuZGlzYWJsZWQmJnRoaXMuc2VsZWN0ZWRGbGFnLnNldEF0dHJpYnV0ZSgiYXJpYS1kaXNhYmxlZCIsInRydWUiKSxkJiYodGhpcy50PXRoaXMuX2UyKCJkaXYiLHsiY2xhc3MiOiJpdGlfX3NlbGVjdGVkLWRpYWwtY29kZSJ9LHRoaXMuc2VsZWN0ZWRGbGFnKSksYyYmKHRoaXMuYS5kaXNhYmxlZHx8dGhpcy5zZWxlY3RlZEZsYWcuc2V0QXR0cmlidXRlKCJ0YWJpbmRleCIsIjAiKSx0aGlzLnU9dGhpcy5fZTIoImRpdiIseyJjbGFzcyI6Iml0aV9fYXJyb3cifSx0aGlzLnNlbGVjdGVkRmxhZyksdGhpcy5tPXRoaXMuX2UyKCJ1bCIseyJjbGFzcyI6Iml0aV9fY291bnRyeS1saXN0IGl0aV9faGlkZSIsaWQ6Iml0aS0iLmNvbmNhdCh0aGlzLmlkLCJfX2NvdW50cnktbGlzdGJveCIpLHJvbGU6Imxpc3Rib3giLCJhcmlhLWxhYmVsIjoiTGlzdCBvZiBjb3VudHJpZXMifSksdGhpcy5wcmVmZXJyZWRDb3VudHJpZXMubGVuZ3RoJiYodGhpcy5fZyh0aGlzLnByZWZlcnJlZENvdW50cmllcywiaXRpX19wcmVmZXJyZWQiLCEwKSx0aGlzLl9lMigibGkiLHsiY2xhc3MiOiJpdGlfX2RpdmlkZXIiLHJvbGU6InNlcGFyYXRvciIsImFyaWEtZGlzYWJsZWQiOiJ0cnVlIn0sdGhpcy5tKSksdGhpcy5fZyh0aGlzLnAsIml0aV9fc3RhbmRhcmQiKSxoPyh0aGlzLmRyb3Bkb3duPXRoaXMuX2UyKCJkaXYiLHsiY2xhc3MiOiJpdGkgaXRpLS1jb250YWluZXIifSksdGhpcy5kcm9wZG93bi5hcHBlbmRDaGlsZCh0aGlzLm0pKTp0aGlzLmsuYXBwZW5kQ2hpbGQodGhpcy5tKSksZyl7dmFyIGw9ZyxtPXRoaXMuYS5nZXRBdHRyaWJ1dGUoIm5hbWUiKTtpZihtKXt2YXIgbj1tLmxhc3RJbmRleE9mKCJbIik7LTEhPT1uJiYobD0iIi5jb25jYXQobS5zdWJzdHIoMCxuKSwiWyIpLmNvbmNhdChsLCJdIikpfXRoaXMuaGlkZGVuSW5wdXQ9dGhpcy5fZTIoImlucHV0Iix7dHlwZToiaGlkZGVuIixuYW1lOmx9KSxqLmFwcGVuZENoaWxkKHRoaXMuaGlkZGVuSW5wdXQpfX19LHtrZXk6Il9nIix2YWx1ZTpmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPSIiLGU9MDtlPGEubGVuZ3RoO2UrKyl7dmFyIGY9YVtlXSxnPWM/Ii1wcmVmZXJyZWQiOiIiO2QrPSI8bGkgY2xhc3M9J2l0aV9fY291bnRyeSAiLmNvbmNhdChiLCInIHRhYkluZGV4PSctMScgaWQ9J2l0aS0iKS5jb25jYXQodGhpcy5pZCwiX19pdGVtLSIpLmNvbmNhdChmLmlzbzIpLmNvbmNhdChnLCInIHJvbGU9J29wdGlvbicgZGF0YS1kaWFsLWNvZGU9JyIpLmNvbmNhdChmLmRpYWxDb2RlLCInIGRhdGEtY291bnRyeS1jb2RlPSciKS5jb25jYXQoZi5pc28yLCInIGFyaWEtc2VsZWN0ZWQ9J2ZhbHNlJz4iKSx0aGlzLmQuc2hvd0ZsYWdzJiYoZCs9IjxkaXYgY2xhc3M9J2l0aV9fZmxhZy1ib3gnPjxkaXYgY2xhc3M9J2l0aV9fZmxhZyBpdGlfXyIuY29uY2F0KGYuaXNvMiwiJz48L2Rpdj48L2Rpdj4iKSksZCs9IjxzcGFuIGNsYXNzPSdpdGlfX2NvdW50cnktbmFtZSc+Ii5jb25jYXQoZi5uYW1lLCI8L3NwYW4+IiksZCs9IjxzcGFuIGNsYXNzPSdpdGlfX2RpYWwtY29kZSc+KyIuY29uY2F0KGYuZGlhbENvZGUsIjwvc3Bhbj4iKSxkKz0iPC9saT4ifXRoaXMubS5pbnNlcnRBZGphY2VudEhUTUwoImJlZm9yZWVuZCIsZCl9fSx7a2V5OiJfaCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmEuZ2V0QXR0cmlidXRlKCJ2YWx1ZSIpLGI9dGhpcy5hLnZhbHVlLGM9YSYmIisiPT09YS5jaGFyQXQoMCkmJighYnx8IisiIT09Yi5jaGFyQXQoMCkpLGQ9Yz9hOmIsZT10aGlzLl81KGQpLGY9dGhpcy5fdyhkKSxnPXRoaXMuZCxoPWcuaW5pdGlhbENvdW50cnksaT1nLmF1dG9JbnNlcnREaWFsQ29kZTtlJiYhZj90aGlzLl92KGQpOiJhdXRvIiE9PWgmJihoP3RoaXMuX3ooaC50b0xvd2VyQ2FzZSgpKTplJiZmP3RoaXMuX3ooInVzIik6KHRoaXMuaj10aGlzLnByZWZlcnJlZENvdW50cmllcy5sZW5ndGg/dGhpcy5wcmVmZXJyZWRDb3VudHJpZXNbMF0uaXNvMjp0aGlzLnBbMF0uaXNvMixkfHx0aGlzLl96KHRoaXMuaikpLCFkJiZpJiYodGhpcy5hLnZhbHVlPSIrIi5jb25jYXQodGhpcy5zLmRpYWxDb2RlKSkpLGQmJnRoaXMuX3UoZCl9fSx7a2V5OiJfaSIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9qKCksdGhpcy5kLmF1dG9JbnNlcnREaWFsQ29kZSYmdGhpcy5fbCgpLHRoaXMuZC5hbGxvd0Ryb3Bkb3duJiZ0aGlzLl9pMigpLHRoaXMuaGlkZGVuSW5wdXQmJnRoaXMuX2kwKCl9fSx7a2V5OiJfaTAiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpczt0aGlzLl9hMTQ9ZnVuY3Rpb24oKXthLmhpZGRlbklucHV0LnZhbHVlPWEuZ2V0TnVtYmVyKCl9LHRoaXMuYS5mb3JtJiZ0aGlzLmEuZm9ybS5hZGRFdmVudExpc3RlbmVyKCJzdWJtaXQiLHRoaXMuX2ExNCl9fSx7a2V5OiJfaTEiLHZhbHVlOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMuYTthJiYiTEFCRUwiIT09YS50YWdOYW1lOylhPWEucGFyZW50Tm9kZTtyZXR1cm4gYX19LHtrZXk6Il9pMiIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO3RoaXMuX2E5PWZ1bmN0aW9uKGIpe2EubS5jbGFzc0xpc3QuY29udGFpbnMoIml0aV9faGlkZSIpP2EuYS5mb2N1cygpOmIucHJldmVudERlZmF1bHQoKX07dmFyIGI9dGhpcy5faTEoKTtiJiZiLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIix0aGlzLl9hOSksdGhpcy5fYTEwPWZ1bmN0aW9uKCl7IWEubS5jbGFzc0xpc3QuY29udGFpbnMoIml0aV9faGlkZSIpfHxhLmEuZGlzYWJsZWR8fGEuYS5yZWFkT25seXx8YS5fbigpfSx0aGlzLnNlbGVjdGVkRmxhZy5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsdGhpcy5fYTEwKSx0aGlzLl9hMTE9ZnVuY3Rpb24oYil7YS5tLmNsYXNzTGlzdC5jb250YWlucygiaXRpX19oaWRlIikmJi0xIT09WyJBcnJvd1VwIiwiVXAiLCJBcnJvd0Rvd24iLCJEb3duIiwiICIsIkVudGVyIl0uaW5kZXhPZihiLmtleSkmJihiLnByZXZlbnREZWZhdWx0KCksYi5zdG9wUHJvcGFnYXRpb24oKSxhLl9uKCkpLCJUYWIiPT09Yi5rZXkmJmEuXzIoKX0sdGhpcy5rLmFkZEV2ZW50TGlzdGVuZXIoImtleWRvd24iLHRoaXMuX2ExMSl9fSx7a2V5OiJfaTMiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpczt0aGlzLmQudXRpbHNTY3JpcHQmJiF3aW5kb3cuaW50bFRlbElucHV0VXRpbHM/d2luZG93LmludGxUZWxJbnB1dEdsb2JhbHMuZG9jdW1lbnRSZWFkeSgpP3dpbmRvdy5pbnRsVGVsSW5wdXRHbG9iYWxzLmxvYWRVdGlscyh0aGlzLmQudXRpbHNTY3JpcHQpOndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJsb2FkIixmdW5jdGlvbigpe3dpbmRvdy5pbnRsVGVsSW5wdXRHbG9iYWxzLmxvYWRVdGlscyhhLmQudXRpbHNTY3JpcHQpfSk6dGhpcy5pMCgpLCJhdXRvIj09PXRoaXMuZC5pbml0aWFsQ291bnRyeT90aGlzLl9pNCgpOnRoaXMuaCgpfX0se2tleToiX2k0Iix2YWx1ZTpmdW5jdGlvbigpe3dpbmRvdy5pbnRsVGVsSW5wdXRHbG9iYWxzLmF1dG9Db3VudHJ5P3RoaXMuaGFuZGxlQXV0b0NvdW50cnkoKTp3aW5kb3cuaW50bFRlbElucHV0R2xvYmFscy5zdGFydGVkTG9hZGluZ0F1dG9Db3VudHJ5fHwod2luZG93LmludGxUZWxJbnB1dEdsb2JhbHMuc3RhcnRlZExvYWRpbmdBdXRvQ291bnRyeT0hMCwiZnVuY3Rpb24iPT10eXBlb2YgdGhpcy5kLmdlb0lwTG9va3VwJiZ0aGlzLmQuZ2VvSXBMb29rdXAoZnVuY3Rpb24oYSl7d2luZG93LmludGxUZWxJbnB1dEdsb2JhbHMuYXV0b0NvdW50cnk9YS50b0xvd2VyQ2FzZSgpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtyZXR1cm4gcSgiaGFuZGxlQXV0b0NvdW50cnkiKX0pfSxmdW5jdGlvbigpe3JldHVybiBxKCJyZWplY3RBdXRvQ291bnRyeVByb21pc2UiKX0pKX19LHtrZXk6Il9qIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXM7dGhpcy5fYTEyPWZ1bmN0aW9uKCl7YS5fdihhLmEudmFsdWUpJiZhLl9tMkNvdW50cnlDaGFuZ2UoKX0sdGhpcy5hLmFkZEV2ZW50TGlzdGVuZXIoImtleXVwIix0aGlzLl9hMTIpLHRoaXMuX2ExMz1mdW5jdGlvbigpe3NldFRpbWVvdXQoYS5fYTEyKX0sdGhpcy5hLmFkZEV2ZW50TGlzdGVuZXIoImN1dCIsdGhpcy5fYTEzKSx0aGlzLmEuYWRkRXZlbnRMaXN0ZW5lcigicGFzdGUiLHRoaXMuX2ExMyl9fSx7a2V5OiJfajIiLHZhbHVlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuYS5nZXRBdHRyaWJ1dGUoIm1heGxlbmd0aCIpO3JldHVybiBiJiZhLmxlbmd0aD5iP2Euc3Vic3RyKDAsYik6YX19LHtrZXk6Il9sIix2YWx1ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXM7dGhpcy5fYTg9ZnVuY3Rpb24oKXthLl9sMigpfSx0aGlzLmEuZm9ybSYmdGhpcy5hLmZvcm0uYWRkRXZlbnRMaXN0ZW5lcigic3VibWl0Iix0aGlzLl9hOCksdGhpcy5hLmFkZEV2ZW50TGlzdGVuZXIoImJsdXIiLHRoaXMuX2E4KX19LHtrZXk6Il9sMiIsdmFsdWU6ZnVuY3Rpb24oKXtpZigiKyI9PT10aGlzLmEudmFsdWUuY2hhckF0KDApKXt2YXIgYT10aGlzLl9tKHRoaXMuYS52YWx1ZSk7YSYmdGhpcy5zLmRpYWxDb2RlIT09YXx8KHRoaXMuYS52YWx1ZT0iIil9fX0se2tleToiX20iLHZhbHVlOmZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UoL1xEL2csIiIpfX0se2tleToiX20yIix2YWx1ZTpmdW5jdGlvbihhKXt2YXIgYj1kb2N1bWVudC5jcmVhdGVFdmVudCgiRXZlbnQiKTtiLmluaXRFdmVudChhLCEwLCEwKSx0aGlzLmEuZGlzcGF0Y2hFdmVudChiKX19LHtrZXk6Il9uIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMubS5jbGFzc0xpc3QucmVtb3ZlKCJpdGlfX2hpZGUiKSx0aGlzLnNlbGVjdGVkRmxhZy5zZXRBdHRyaWJ1dGUoImFyaWEtZXhwYW5kZWQiLCJ0cnVlIiksdGhpcy5fbygpLHRoaXMuYiYmKHRoaXMuX3godGhpcy5iLCExKSx0aGlzLl8zKHRoaXMuYiwhMCkpLHRoaXMuX3AoKSx0aGlzLnUuY2xhc3NMaXN0LmFkZCgiaXRpX19hcnJvdy0tdXAiKSx0aGlzLl9tMigib3Blbjpjb3VudHJ5ZHJvcGRvd24iKX19LHtrZXk6Il9uMiIsdmFsdWU6ZnVuY3Rpb24oYSxiLGMpe2MmJiFhLmNsYXNzTGlzdC5jb250YWlucyhiKT9hLmNsYXNzTGlzdC5hZGQoYik6IWMmJmEuY2xhc3NMaXN0LmNvbnRhaW5zKGIpJiZhLmNsYXNzTGlzdC5yZW1vdmUoYil9fSx7a2V5OiJfbyIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2lmKHRoaXMuZC5kcm9wZG93bkNvbnRhaW5lciYmdGhpcy5kLmRyb3Bkb3duQ29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuZHJvcGRvd24pLCF0aGlzLmcpe3ZhciBiPXRoaXMuYS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxjPXdpbmRvdy5wYWdlWU9mZnNldHx8ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCxkPWIudG9wK2MsZT10aGlzLm0ub2Zmc2V0SGVpZ2h0LGY9ZCt0aGlzLmEub2Zmc2V0SGVpZ2h0K2U8Yyt3aW5kb3cuaW5uZXJIZWlnaHQsZz1kLWU+YztpZih0aGlzLl9uMih0aGlzLm0sIml0aV9fY291bnRyeS1saXN0LS1kcm9wdXAiLCFmJiZnKSx0aGlzLmQuZHJvcGRvd25Db250YWluZXIpe3ZhciBoPSFmJiZnPzA6dGhpcy5hLm9mZnNldEhlaWdodDt0aGlzLmRyb3Bkb3duLnN0eWxlLnRvcD0iIi5jb25jYXQoZCtoLCJweCIpLHRoaXMuZHJvcGRvd24uc3R5bGUubGVmdD0iIi5jb25jYXQoYi5sZWZ0K2RvY3VtZW50LmJvZHkuc2Nyb2xsTGVmdCwicHgiKSx0aGlzLl9hND1mdW5jdGlvbigpe3JldHVybiBhLl8yKCl9LHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJzY3JvbGwiLHRoaXMuX2E0KX19fX0se2tleToiX28yIix2YWx1ZTpmdW5jdGlvbihhKXtmb3IodmFyIGI9YTtiJiZiIT09dGhpcy5tJiYhYi5jbGFzc0xpc3QuY29udGFpbnMoIml0aV9fY291bnRyeSIpOyliPWIucGFyZW50Tm9kZTtyZXR1cm4gYj09PXRoaXMubT9udWxsOmJ9fSx7a2V5OiJfcCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO3RoaXMuX2EwPWZ1bmN0aW9uKGIpe3ZhciBjPWEuX28yKGIudGFyZ2V0KTtjJiZhLl94KGMsITEpfSx0aGlzLm0uYWRkRXZlbnRMaXN0ZW5lcigibW91c2VvdmVyIix0aGlzLl9hMCksdGhpcy5fYTE9ZnVuY3Rpb24oYil7dmFyIGM9YS5fbzIoYi50YXJnZXQpO2MmJmEuXzEoYyl9LHRoaXMubS5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsdGhpcy5fYTEpO3ZhciBiPSEwO3RoaXMuX2EyPWZ1bmN0aW9uKCl7Ynx8YS5fMigpLGI9ITF9LGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsdGhpcy5fYTIpO3ZhciBjPSIiLGQ9bnVsbDt0aGlzLl9hMz1mdW5jdGlvbihiKXtiLnByZXZlbnREZWZhdWx0KCksIkFycm93VXAiPT09Yi5rZXl8fCJVcCI9PT1iLmtleXx8IkFycm93RG93biI9PT1iLmtleXx8IkRvd24iPT09Yi5rZXk/YS5fcShiLmtleSk6IkVudGVyIj09PWIua2V5P2EuX3IoKToiRXNjYXBlIj09PWIua2V5P2EuXzIoKTovXlthLXpBLVrDgC3Dv9CwLdGP0JAt0K8gXSQvLnRlc3QoYi5rZXkpJiYoZCYmY2xlYXJUaW1lb3V0KGQpLGMrPWIua2V5LnRvTG93ZXJDYXNlKCksYS5fcyhjKSxkPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtjPSIifSwxZTMpKX0sZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigia2V5ZG93biIsdGhpcy5fYTMpfX0se2tleToiX3EiLHZhbHVlOmZ1bmN0aW9uKGEpe3ZhciBiPSJBcnJvd1VwIj09PWF8fCJVcCI9PT1hP3RoaXMuYy5wcmV2aW91c0VsZW1lbnRTaWJsaW5nOnRoaXMuYy5uZXh0RWxlbWVudFNpYmxpbmc7YiYmKGIuY2xhc3NMaXN0LmNvbnRhaW5zKCJpdGlfX2RpdmlkZXIiKSYmKGI9IkFycm93VXAiPT09YXx8IlVwIj09PWE/Yi5wcmV2aW91c0VsZW1lbnRTaWJsaW5nOmIubmV4dEVsZW1lbnRTaWJsaW5nKSx0aGlzLl94KGIsITApKX19LHtrZXk6Il9yIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuYyYmdGhpcy5fMSh0aGlzLmMpfX0se2tleToiX3MiLHZhbHVlOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wO2I8dGhpcy5wLmxlbmd0aDtiKyspaWYodGhpcy5fdCh0aGlzLnBbYl0ubmFtZSxhKSl7dmFyIGM9dGhpcy5tLnF1ZXJ5U2VsZWN0b3IoIiNpdGktIi5jb25jYXQodGhpcy5pZCwiX19pdGVtLSIpLmNvbmNhdCh0aGlzLnBbYl0uaXNvMikpO3RoaXMuX3goYywhMSksdGhpcy5fMyhjLCEwKTticmVha319fSx7a2V5OiJfdCIsdmFsdWU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS5zdWJzdHIoMCxiLmxlbmd0aCkudG9Mb3dlckNhc2UoKT09PWJ9fSx7a2V5OiJfdSIsdmFsdWU6ZnVuY3Rpb24oYSl7dmFyIGI9YTtpZih0aGlzLmQuZm9ybWF0T25EaXNwbGF5JiZ3aW5kb3cuaW50bFRlbElucHV0VXRpbHMmJnRoaXMucyl7dmFyIGM9dGhpcy5kLm5hdGlvbmFsTW9kZXx8IisiIT09Yi5jaGFyQXQoMCkmJiF0aGlzLmQuc2VwYXJhdGVEaWFsQ29kZSxkPWludGxUZWxJbnB1dFV0aWxzLm51bWJlckZvcm1hdCxlPWQuTkFUSU9OQUwsZj1kLklOVEVSTkFUSU9OQUwsZz1jP2U6ZjtiPWludGxUZWxJbnB1dFV0aWxzLmZvcm1hdE51bWJlcihiLHRoaXMucy5pc28yLGcpfWI9dGhpcy5fNyhiKSx0aGlzLmEudmFsdWU9Yn19LHtrZXk6Il92Iix2YWx1ZTpmdW5jdGlvbihhKXt2YXIgYj1hLGM9dGhpcy5zLmRpYWxDb2RlLGQ9IjEiPT09YztiJiZkJiYiKyIhPT1iLmNoYXJBdCgwKSYmKCIxIiE9PWIuY2hhckF0KDApJiYoYj0iMSIuY29uY2F0KGIpKSxiPSIrIi5jb25jYXQoYikpLHRoaXMuZC5zZXBhcmF0ZURpYWxDb2RlJiZjJiYiKyIhPT1iLmNoYXJBdCgwKSYmKGI9IisiLmNvbmNhdChjKS5jb25jYXQoYikpO3ZhciBlPXRoaXMuXzUoYiwhMCksZj10aGlzLl9tKGIpLGc9bnVsbDtpZihlKXt2YXIgaD10aGlzLnFbdGhpcy5fbShlKV0saT0tMSE9PWguaW5kZXhPZih0aGlzLnMuaXNvMikmJmYubGVuZ3RoPD1lLmxlbmd0aC0xO2lmKCEoIjEiPT09YyYmdGhpcy5fdyhmKSkmJiFpKWZvcih2YXIgaj0wO2o8aC5sZW5ndGg7aisrKWlmKGhbal0pe2c9aFtqXTticmVha319ZWxzZSIrIj09PWIuY2hhckF0KDApJiZmLmxlbmd0aD9nPSIiOmImJiIrIiE9PWJ8fChnPXRoaXMuaik7cmV0dXJuIG51bGwhPT1nJiZ0aGlzLl96KGcpfX0se2tleToiX3ciLHZhbHVlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuX20oYSk7aWYoIjEiPT09Yi5jaGFyQXQoMCkpe3ZhciBjPWIuc3Vic3RyKDEsMyk7cmV0dXJuLTEhPT1vLmluZGV4T2YoYyl9cmV0dXJuITF9fSx7a2V5OiJfeCIsdmFsdWU6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmM7YyYmYy5jbGFzc0xpc3QucmVtb3ZlKCJpdGlfX2hpZ2hsaWdodCIpLHRoaXMuYz1hLHRoaXMuYy5jbGFzc0xpc3QuYWRkKCJpdGlfX2hpZ2hsaWdodCIpLHRoaXMuc2VsZWN0ZWRGbGFnLnNldEF0dHJpYnV0ZSgiYXJpYS1hY3RpdmVkZXNjZW5kYW50IixhLmdldEF0dHJpYnV0ZSgiaWQiKSksYiYmdGhpcy5jLmZvY3VzKCl9fSx7a2V5OiJfeSIsdmFsdWU6ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD1iP2k6dGhpcy5wLGU9MDtlPGQubGVuZ3RoO2UrKylpZihkW2VdLmlzbzI9PT1hKXJldHVybiBkW2VdO2lmKGMpcmV0dXJuIG51bGw7dGhyb3cgbmV3IEVycm9yKCJObyBjb3VudHJ5IGRhdGEgZm9yICciLmNvbmNhdChhLCInIikpfX0se2tleToiX3oiLHZhbHVlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZCxjPWIuYWxsb3dEcm9wZG93bixkPWIuc2VwYXJhdGVEaWFsQ29kZSxlPWIuc2hvd0ZsYWdzLGY9dGhpcy5zLmlzbzI/dGhpcy5zOnt9O2lmKHRoaXMucz1hP3RoaXMuX3koYSwhMSwhMSk6e30sdGhpcy5zLmlzbzImJih0aGlzLmo9dGhpcy5zLmlzbzIpLGUmJnRoaXMubC5zZXRBdHRyaWJ1dGUoImNsYXNzIiwiaXRpX19mbGFnIGl0aV9fIi5jb25jYXQoYSkpLHRoaXMuX3NldFNlbGVjdGVkQ291bnRyeUZsYWdUaXRsZUF0dHJpYnV0ZShhLGQpLGQpe3ZhciBnPXRoaXMucy5kaWFsQ29kZT8iKyIuY29uY2F0KHRoaXMucy5kaWFsQ29kZSk6IiI7dGhpcy50LmlubmVySFRNTD1nO3ZhciBoPXRoaXMuc2VsZWN0ZWRGbGFnLm9mZnNldFdpZHRofHx0aGlzLl96MigpO3RoaXMuaXNSVEw/dGhpcy5hLnN0eWxlLnBhZGRpbmdSaWdodD0iIi5jb25jYXQoaCs2LCJweCIpOnRoaXMuYS5zdHlsZS5wYWRkaW5nTGVmdD0iIi5jb25jYXQoaCs2LCJweCIpfWlmKHRoaXMuXzAoKSxjKXt2YXIgaT10aGlzLmI7aWYoaSYmKGkuY2xhc3NMaXN0LnJlbW92ZSgiaXRpX19hY3RpdmUiKSxpLnNldEF0dHJpYnV0ZSgiYXJpYS1zZWxlY3RlZCIsImZhbHNlIikpLGEpe3ZhciBqPXRoaXMubS5xdWVyeVNlbGVjdG9yKCIjaXRpLSIuY29uY2F0KHRoaXMuaWQsIl9faXRlbS0iKS5jb25jYXQoYSwiLXByZWZlcnJlZCIpKXx8dGhpcy5tLnF1ZXJ5U2VsZWN0b3IoIiNpdGktIi5jb25jYXQodGhpcy5pZCwiX19pdGVtLSIpLmNvbmNhdChhKSk7ai5zZXRBdHRyaWJ1dGUoImFyaWEtc2VsZWN0ZWQiLCJ0cnVlIiksai5jbGFzc0xpc3QuYWRkKCJpdGlfX2FjdGl2ZSIpLHRoaXMuYj1qfX1yZXR1cm4gZi5pc28yIT09YX19LHtrZXk6Il9zZXRTZWxlY3RlZENvdW50cnlGbGFnVGl0bGVBdHRyaWJ1dGUiLHZhbHVlOmZ1bmN0aW9uKGEsYil7aWYodGhpcy5zZWxlY3RlZEZsYWcpe3ZhciBjO2M9YSYmIWI/IiIuY29uY2F0KHRoaXMucy5uYW1lLCI6ICsiKS5jb25jYXQodGhpcy5zLmRpYWxDb2RlKTphP3RoaXMucy5uYW1lOiJVbmtub3duIix0aGlzLnNlbGVjdGVkRmxhZy5zZXRBdHRyaWJ1dGUoInRpdGxlIixjKX19fSx7a2V5OiJfejIiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5hLnBhcmVudE5vZGUuY2xvbmVOb2RlKCk7YS5zdHlsZS52aXNpYmlsaXR5PSJoaWRkZW4iLGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYSk7dmFyIGI9dGhpcy5rLmNsb25lTm9kZSgpO2EuYXBwZW5kQ2hpbGQoYik7dmFyIGM9dGhpcy5zZWxlY3RlZEZsYWcuY2xvbmVOb2RlKCEwKTtiLmFwcGVuZENoaWxkKGMpO3ZhciBkPWMub2Zmc2V0V2lkdGg7cmV0dXJuIGEucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChhKSxkfX0se2tleToiXzAiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGE9ImFnZ3Jlc3NpdmUiPT09dGhpcy5kLmF1dG9QbGFjZWhvbGRlcnx8IXRoaXMuZSYmInBvbGl0ZSI9PT10aGlzLmQuYXV0b1BsYWNlaG9sZGVyO2lmKHdpbmRvdy5pbnRsVGVsSW5wdXRVdGlscyYmYSl7dmFyIGI9aW50bFRlbElucHV0VXRpbHMubnVtYmVyVHlwZVt0aGlzLmQucGxhY2Vob2xkZXJOdW1iZXJUeXBlXSxjPXRoaXMucy5pc28yP2ludGxUZWxJbnB1dFV0aWxzLmdldEV4YW1wbGVOdW1iZXIodGhpcy5zLmlzbzIsdGhpcy5kLm5hdGlvbmFsTW9kZSxiKToiIjtjPXRoaXMuXzcoYyksImZ1bmN0aW9uIj09dHlwZW9mIHRoaXMuZC5jdXN0b21QbGFjZWhvbGRlciYmKGM9dGhpcy5kLmN1c3RvbVBsYWNlaG9sZGVyKGMsdGhpcy5zKSksdGhpcy5hLnNldEF0dHJpYnV0ZSgicGxhY2Vob2xkZXIiLGMpfX19LHtrZXk6Il8xIix2YWx1ZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLl96KGEuZ2V0QXR0cmlidXRlKCJkYXRhLWNvdW50cnktY29kZSIpKTt0aGlzLl8yKCksdGhpcy5fNChhLmdldEF0dHJpYnV0ZSgiZGF0YS1kaWFsLWNvZGUiKSksdGhpcy5hLmZvY3VzKCk7dmFyIGM9dGhpcy5hLnZhbHVlLmxlbmd0aDt0aGlzLmEuc2V0U2VsZWN0aW9uUmFuZ2UoYyxjKSxiJiZ0aGlzLl9tMkNvdW50cnlDaGFuZ2UoKX19LHtrZXk6Il8yIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMubS5jbGFzc0xpc3QuYWRkKCJpdGlfX2hpZGUiKSx0aGlzLnNlbGVjdGVkRmxhZy5zZXRBdHRyaWJ1dGUoImFyaWEtZXhwYW5kZWQiLCJmYWxzZSIpLHRoaXMuc2VsZWN0ZWRGbGFnLnJlbW92ZUF0dHJpYnV0ZSgiYXJpYS1hY3RpdmVkZXNjZW5kYW50IiksdGhpcy51LmNsYXNzTGlzdC5yZW1vdmUoIml0aV9fYXJyb3ctLXVwIiksZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigia2V5ZG93biIsdGhpcy5fYTMpLGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJjbGljayIsdGhpcy5fYTIpLHRoaXMubS5yZW1vdmVFdmVudExpc3RlbmVyKCJtb3VzZW92ZXIiLHRoaXMuX2EwKSx0aGlzLm0ucmVtb3ZlRXZlbnRMaXN0ZW5lcigiY2xpY2siLHRoaXMuX2ExKSx0aGlzLmQuZHJvcGRvd25Db250YWluZXImJih0aGlzLmd8fHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCJzY3JvbGwiLHRoaXMuX2E0KSx0aGlzLmRyb3Bkb3duLnBhcmVudE5vZGUmJnRoaXMuZHJvcGRvd24ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLmRyb3Bkb3duKSksdGhpcy5fbTIoImNsb3NlOmNvdW50cnlkcm9wZG93biIpfX0se2tleToiXzMiLHZhbHVlOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5tLGQ9d2luZG93LnBhZ2VZT2Zmc2V0fHxkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wLGU9Yy5vZmZzZXRIZWlnaHQsZj1jLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCtkLGc9ZitlLGg9YS5vZmZzZXRIZWlnaHQsaT1hLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCtkLGo9aStoLGs9aS1mK2Muc2Nyb2xsVG9wLGw9ZS8yLWgvMjtpZihpPGYpYiYmKGstPWwpLGMuc2Nyb2xsVG9wPWs7ZWxzZSBpZihqPmcpe2ImJihrKz1sKTt2YXIgbT1lLWg7Yy5zY3JvbGxUb3A9ay1tfX19LHtrZXk6Il80Iix2YWx1ZTpmdW5jdGlvbihhKXt2YXIgYixjPXRoaXMuYS52YWx1ZSxkPSIrIi5jb25jYXQoYSk7aWYoIisiPT09Yy5jaGFyQXQoMCkpe3ZhciBlPXRoaXMuXzUoYyk7Yj1lP2MucmVwbGFjZShlLGQpOmQsdGhpcy5hLnZhbHVlPWJ9ZWxzZSB0aGlzLmQuYXV0b0luc2VydERpYWxDb2RlJiYoYj1jP2QrYzpkLHRoaXMuYS52YWx1ZT1iKX19LHtrZXk6Il81Iix2YWx1ZTpmdW5jdGlvbihhLGIpe3ZhciBjPSIiO2lmKCIrIj09PWEuY2hhckF0KDApKWZvcih2YXIgZD0iIixlPTA7ZTxhLmxlbmd0aDtlKyspe3ZhciBmPWEuY2hhckF0KGUpO2lmKCFpc05hTihwYXJzZUludChmLDEwKSkpe2lmKGQrPWYsYil0aGlzLnFbZF0mJihjPWEuc3Vic3RyKDAsZSsxKSk7ZWxzZSBpZih0aGlzLmRpYWxDb2Rlc1tkXSl7Yz1hLnN1YnN0cigwLGUrMSk7YnJlYWt9aWYoZC5sZW5ndGg9PT10aGlzLmNvdW50cnlDb2RlTWF4TGVuKWJyZWFrfX1yZXR1cm4gY319LHtrZXk6Il82Iix2YWx1ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuYS52YWx1ZS50cmltKCksYj10aGlzLnMuZGlhbENvZGUsYz10aGlzLl9tKGEpO3JldHVybih0aGlzLmQuc2VwYXJhdGVEaWFsQ29kZSYmIisiIT09YS5jaGFyQXQoMCkmJmImJmM/IisiLmNvbmNhdChiKToiIikrYX19LHtrZXk6Il83Iix2YWx1ZTpmdW5jdGlvbihhKXt2YXIgYj1hO2lmKHRoaXMuZC5zZXBhcmF0ZURpYWxDb2RlKXt2YXIgYz10aGlzLl81KGIpO2lmKGMpe2M9IisiLmNvbmNhdCh0aGlzLnMuZGlhbENvZGUpO3ZhciBkPSIgIj09PWJbYy5sZW5ndGhdfHwiLSI9PT1iW2MubGVuZ3RoXT9jLmxlbmd0aCsxOmMubGVuZ3RoO2I9Yi5zdWJzdHIoZCl9fXJldHVybiB0aGlzLl9qMihiKX19LHtrZXk6Il9tMkNvdW50cnlDaGFuZ2UiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fbTIoImNvdW50cnljaGFuZ2UiKX19LHtrZXk6ImhhbmRsZUF1dG9Db3VudHJ5Iix2YWx1ZTpmdW5jdGlvbigpeyJhdXRvIj09PXRoaXMuZC5pbml0aWFsQ291bnRyeSYmKHRoaXMuaj13aW5kb3cuaW50bFRlbElucHV0R2xvYmFscy5hdXRvQ291bnRyeSx0aGlzLmEudmFsdWV8fHRoaXMuc2V0Q291bnRyeSh0aGlzLmopLHRoaXMuaCgpKX19LHtrZXk6ImhhbmRsZVV0aWxzIix2YWx1ZTpmdW5jdGlvbigpewp3aW5kb3cuaW50bFRlbElucHV0VXRpbHMmJih0aGlzLmEudmFsdWUmJnRoaXMuX3UodGhpcy5hLnZhbHVlKSx0aGlzLl8wKCkpLHRoaXMuaTAoKX19LHtrZXk6ImRlc3Ryb3kiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5hLmZvcm07aWYodGhpcy5kLmFsbG93RHJvcGRvd24pe3RoaXMuXzIoKSx0aGlzLnNlbGVjdGVkRmxhZy5yZW1vdmVFdmVudExpc3RlbmVyKCJjbGljayIsdGhpcy5fYTEwKSx0aGlzLmsucmVtb3ZlRXZlbnRMaXN0ZW5lcigia2V5ZG93biIsdGhpcy5fYTExKTt2YXIgYj10aGlzLl9pMSgpO2ImJmIucmVtb3ZlRXZlbnRMaXN0ZW5lcigiY2xpY2siLHRoaXMuX2E5KX10aGlzLmhpZGRlbklucHV0JiZhJiZhLnJlbW92ZUV2ZW50TGlzdGVuZXIoInN1Ym1pdCIsdGhpcy5fYTE0KSx0aGlzLmQuYXV0b0luc2VydERpYWxDb2RlJiYoYSYmYS5yZW1vdmVFdmVudExpc3RlbmVyKCJzdWJtaXQiLHRoaXMuX2E4KSx0aGlzLmEucmVtb3ZlRXZlbnRMaXN0ZW5lcigiYmx1ciIsdGhpcy5fYTgpKSx0aGlzLmEucmVtb3ZlRXZlbnRMaXN0ZW5lcigia2V5dXAiLHRoaXMuX2ExMiksdGhpcy5hLnJlbW92ZUV2ZW50TGlzdGVuZXIoImN1dCIsdGhpcy5fYTEzKSx0aGlzLmEucmVtb3ZlRXZlbnRMaXN0ZW5lcigicGFzdGUiLHRoaXMuX2ExMyksdGhpcy5hLnJlbW92ZUF0dHJpYnV0ZSgiZGF0YS1pbnRsLXRlbC1pbnB1dC1pZCIpO3ZhciBjPXRoaXMuYS5wYXJlbnROb2RlO2MucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGhpcy5hLGMpLGMucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChjKSxkZWxldGUgd2luZG93LmludGxUZWxJbnB1dEdsb2JhbHMuaW5zdGFuY2VzW3RoaXMuaWRdfX0se2tleToiZ2V0RXh0ZW5zaW9uIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB3aW5kb3cuaW50bFRlbElucHV0VXRpbHM/aW50bFRlbElucHV0VXRpbHMuZ2V0RXh0ZW5zaW9uKHRoaXMuXzYoKSx0aGlzLnMuaXNvMik6IiJ9fSx7a2V5OiJnZXROdW1iZXIiLHZhbHVlOmZ1bmN0aW9uKGEpe2lmKHdpbmRvdy5pbnRsVGVsSW5wdXRVdGlscyl7dmFyIGI9dGhpcy5zLmlzbzI7cmV0dXJuIGludGxUZWxJbnB1dFV0aWxzLmZvcm1hdE51bWJlcih0aGlzLl82KCksYixhKX1yZXR1cm4iIn19LHtrZXk6ImdldE51bWJlclR5cGUiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHdpbmRvdy5pbnRsVGVsSW5wdXRVdGlscz9pbnRsVGVsSW5wdXRVdGlscy5nZXROdW1iZXJUeXBlKHRoaXMuXzYoKSx0aGlzLnMuaXNvMik6LTk5fX0se2tleToiZ2V0U2VsZWN0ZWRDb3VudHJ5RGF0YSIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zfX0se2tleToiZ2V0VmFsaWRhdGlvbkVycm9yIix2YWx1ZTpmdW5jdGlvbigpe2lmKHdpbmRvdy5pbnRsVGVsSW5wdXRVdGlscyl7dmFyIGE9dGhpcy5zLmlzbzI7cmV0dXJuIGludGxUZWxJbnB1dFV0aWxzLmdldFZhbGlkYXRpb25FcnJvcih0aGlzLl82KCksYSl9cmV0dXJuLTk5fX0se2tleToiaXNWYWxpZE51bWJlciIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLl82KCkudHJpbSgpO3JldHVybiB3aW5kb3cuaW50bFRlbElucHV0VXRpbHM/aW50bFRlbElucHV0VXRpbHMuaXNWYWxpZE51bWJlcihhLHRoaXMucy5pc28yKTpudWxsfX0se2tleToiaXNQb3NzaWJsZU51bWJlciIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLl82KCkudHJpbSgpO3JldHVybiB3aW5kb3cuaW50bFRlbElucHV0VXRpbHM/aW50bFRlbElucHV0VXRpbHMuaXNQb3NzaWJsZU51bWJlcihhLHRoaXMucy5pc28yKTpudWxsfX0se2tleToic2V0Q291bnRyeSIsdmFsdWU6ZnVuY3Rpb24oYSl7dmFyIGI9YS50b0xvd2VyQ2FzZSgpO3RoaXMucy5pc28yIT09YiYmKHRoaXMuX3ooYiksdGhpcy5fNCh0aGlzLnMuZGlhbENvZGUpLHRoaXMuX20yQ291bnRyeUNoYW5nZSgpKX19LHtrZXk6InNldE51bWJlciIsdmFsdWU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5fdihhKTt0aGlzLl91KGEpLGImJnRoaXMuX20yQ291bnRyeUNoYW5nZSgpfX0se2tleToic2V0UGxhY2Vob2xkZXJOdW1iZXJUeXBlIix2YWx1ZTpmdW5jdGlvbihhKXt0aGlzLmQucGxhY2Vob2xkZXJOdW1iZXJUeXBlPWEsdGhpcy5fMCgpfX1dKSxjfSgpO2wuZ2V0Q291bnRyeURhdGE9ZnVuY3Rpb24oKXtyZXR1cm4gaX07dmFyIHM9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpO2Qub25sb2FkPWZ1bmN0aW9uKCl7cSgiaGFuZGxlVXRpbHMiKSxiJiZiKCl9LGQub25lcnJvcj1mdW5jdGlvbigpe3EoInJlamVjdFV0aWxzU2NyaXB0UHJvbWlzZSIpLGMmJmMoKX0sZC5jbGFzc05hbWU9Iml0aS1sb2FkLXV0aWxzIixkLmFzeW5jPSEwLGQuc3JjPWEsZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChkKX07cmV0dXJuIGwubG9hZFV0aWxzPWZ1bmN0aW9uKGEpe2lmKCF3aW5kb3cuaW50bFRlbElucHV0VXRpbHMmJiF3aW5kb3cuaW50bFRlbElucHV0R2xvYmFscy5zdGFydGVkTG9hZGluZ1V0aWxzU2NyaXB0KXtpZih3aW5kb3cuaW50bFRlbElucHV0R2xvYmFscy5zdGFydGVkTG9hZGluZ1V0aWxzU2NyaXB0PSEwLCJ1bmRlZmluZWQiIT10eXBlb2YgUHJvbWlzZSlyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24oYixjKXtyZXR1cm4gcyhhLGIsYyl9KTtzKGEpfXJldHVybiBudWxsfSxsLmRlZmF1bHRzPW4sbC52ZXJzaW9uPSIxOC4yLjEiLGZ1bmN0aW9uKGEsYil7dmFyIGM9bmV3IHIoYSxiKTtyZXR1cm4gYy5faW5pdCgpLGEuc2V0QXR0cmlidXRlKCJkYXRhLWludGwtdGVsLWlucHV0LWlkIixjLmlkKSx3aW5kb3cuaW50bFRlbElucHV0R2xvYmFscy5pbnN0YW5jZXNbYy5pZF09YyxjfX0oKX0pOw==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPBody>
        <TcpPackets>
          <PacketInfo time="519314593" offset="0" length="798" />
          <PacketInfo time="519314593" offset="798" length="11398" />
        </TcpPackets>
      </HTTPResponse>
    </HTTPTask>
    <HTTPTask id="326" hostname="code.jquery.com" path="https://code.jquery.com/jquery-1.12.4.js" url="https://code.jquery.com/jquery-1.12.4.js" ip="[2a04:4e42:0:0:0:0:0:649]" port="443" connectionId="21" origin="HTML" frame="1" startDateTime="2024-02-15T10:57:48.115+05:30" startTime="519314625" endTime="519314640">
      <HTTPRequest method="GET">
        <HTTPHeaders>
          <HTTPHeaderEntity name="sec-ch-ua" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ik5vdCBBKEJyYW5kIjt2PSI5OSIsICJHb29nbGUgQ2hyb21lIjt2PSIxMjEiLCAiQ2hyb21pdW0iO3Y9IjEyMSI=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="sec-ch-ua-mobile" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>PzA=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="User-Agent" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEyMS4wLjAuMCBTYWZhcmkvNTM3LjM2</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="sec-ch-ua-platform" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>IldpbmRvd3Mi</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ki8q</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Sec-Fetch-Site" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Y3Jvc3Mtc2l0ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Sec-Fetch-Mode" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bm8tY29ycw==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Sec-Fetch-Dest" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>c2NyaXB0</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Referer" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cHM6Ly9kZXYuYmx1ZWFsZ28uY29tLw==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Encoding" index="9">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Language" index="10">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZW4tVVMsZW47cT0wLjk=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Host" index="11">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Y29kZS5qcXVlcnkuY29t</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Connection" index="12">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0VUIGh0dHBzOi8vY29kZS5qcXVlcnkuY29tL2pxdWVyeS0xLjEyLjQuanMgSFRUUC8xLjENCnNlYy1jaC11YTogIk5vdCBBKEJyYW5kIjt2PSI5OSIsICJHb29nbGUgQ2hyb21lIjt2PSIxMjEiLCAiQ2hyb21pdW0iO3Y9IjEyMSINCnNlYy1jaC11YS1tb2JpbGU6ID8wDQpVc2VyLUFnZW50OiBNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvMTIxLjAuMC4wIFNhZmFyaS81MzcuMzYNCnNlYy1jaC11YS1wbGF0Zm9ybTogIldpbmRvd3MiDQpBY2NlcHQ6ICovKg0KU2VjLUZldGNoLVNpdGU6IGNyb3NzLXNpdGUNClNlYy1GZXRjaC1Nb2RlOiBuby1jb3JzDQpTZWMtRmV0Y2gtRGVzdDogc2NyaXB0DQpSZWZlcmVyOiBodHRwczovL2Rldi5ibHVlYWxnby5jb20vDQpBY2NlcHQtRW5jb2Rpbmc6IGd6aXAsIGRlZmxhdGUNCkFjY2VwdC1MYW5ndWFnZTogZW4tVVMsZW47cT0wLjkNCkhvc3Q6IGNvZGUuanF1ZXJ5LmNvbQ0KQ29ubmVjdGlvbjogS2VlcC1BbGl2ZQ0KDQo=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
      </HTTPRequest>
      <HTTPResponse>
        <contentLenght>87176</contentLenght>
        <HTTPHeaders>
          <HTTPHeaderEntity name="Connection" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Length" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ODcxNzY=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Server" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bmdpbng=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Type" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>YXBwbGljYXRpb24vamF2YXNjcmlwdDsgY2hhcnNldD11dGYtOA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Last-Modified" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>RnJpLCAxOCBPY3QgMTk5MSAxMjowMDowMCBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="ETag" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Vy8iMjhmZWNjYzAtNDdhMzYi</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Cache-Control" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>cHVibGljLCBtYXgtYWdlPTMxNTM2MDAwLCBzdGFsZS13aGlsZS1yZXZhbGlkYXRlPTYwNDgwMA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Access-Control-Allow-Origin" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Kg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Encoding" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Via" index="9">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MS4xIHZhcm5pc2gsIDEuMSB2YXJuaXNo</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Ranges" index="10">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ynl0ZXM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Date" index="11">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VGh1LCAxNSBGZWIgMjAyNCAwNToxODo1MCBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Age" index="12">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MTMxNzIxMzE=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="X-Served-By" index="13">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Y2FjaGUtbGdhMjE5NzAtTEdBLCBjYWNoZS1kZWwyMTc0MC1ERUw=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="X-Cache" index="14">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SElULCBISVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="X-Cache-Hits" index="15">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>NSwgMTY5MTM5</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="X-Timer" index="16">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>UzE3MDc5NzQzMzEuOTc0MjgxLFZTMCxWRTA=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Vary" index="17">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>QWNjZXB0LUVuY29kaW5n</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SFRUUC8xLjEgMjAwIE9LDQpDb25uZWN0aW9uOiBrZWVwLWFsaXZlDQpDb250ZW50LUxlbmd0aDogODcxNzYNClNlcnZlcjogbmdpbngNCkNvbnRlbnQtVHlwZTogYXBwbGljYXRpb24vamF2YXNjcmlwdDsgY2hhcnNldD11dGYtOA0KTGFzdC1Nb2RpZmllZDogRnJpLCAxOCBPY3QgMTk5MSAxMjowMDowMCBHTVQNCkVUYWc6IFcvIjI4ZmVjY2MwLTQ3YTM2Ig0KQ2FjaGUtQ29udHJvbDogcHVibGljLCBtYXgtYWdlPTMxNTM2MDAwLCBzdGFsZS13aGlsZS1yZXZhbGlkYXRlPTYwNDgwMA0KQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luOiAqDQpDb250ZW50LUVuY29kaW5nOiBnemlwDQpWaWE6IDEuMSB2YXJuaXNoLCAxLjEgdmFybmlzaA0KQWNjZXB0LVJhbmdlczogYnl0ZXMNCkRhdGU6IFRodSwgMTUgRmViIDIwMjQgMDU6MTg6NTAgR01UDQpBZ2U6IDEzMTcyMTMxDQpYLVNlcnZlZC1CeTogY2FjaGUtbGdhMjE5NzAtTEdBLCBjYWNoZS1kZWwyMTc0MC1ERUwNClgtQ2FjaGU6IEhJVCwgSElUDQpYLUNhY2hlLUhpdHM6IDUsIDE2OTEzOQ0KWC1UaW1lcjogUzE3MDc5NzQzMzEuOTc0MjgxLFZTMCxWRTANClZhcnk6IEFjY2VwdC1FbmNvZGluZw0KDQo=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPBody>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>LyohCiAqIGpRdWVyeSBKYXZhU2NyaXB0IExpYnJhcnkgdjEuMTIuNAogKiBodHRwOi8vanF1ZXJ5LmNvbS8KICoKICogSW5jbHVkZXMgU2l6emxlLmpzCiAqIGh0dHA6Ly9zaXp6bGVqcy5jb20vCiAqCiAqIENvcHlyaWdodCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzCiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZQogKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlCiAqCiAqIERhdGU6IDIwMTYtMDUtMjBUMTc6MTdaCiAqLwoKKGZ1bmN0aW9uKCBnbG9iYWwsIGZhY3RvcnkgKSB7CgoJaWYgKCB0eXBlb2YgbW9kdWxlID09PSAib2JqZWN0IiAmJiB0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09ICJvYmplY3QiICkgewoJCS8vIEZvciBDb21tb25KUyBhbmQgQ29tbW9uSlMtbGlrZSBlbnZpcm9ubWVudHMgd2hlcmUgYSBwcm9wZXIgYHdpbmRvd2AKCQkvLyBpcyBwcmVzZW50LCBleGVjdXRlIHRoZSBmYWN0b3J5IGFuZCBnZXQgalF1ZXJ5LgoJCS8vIEZvciBlbnZpcm9ubWVudHMgdGhhdCBkbyBub3QgaGF2ZSBhIGB3aW5kb3dgIHdpdGggYSBgZG9jdW1lbnRgCgkJLy8gKHN1Y2ggYXMgTm9kZS5qcyksIGV4cG9zZSBhIGZhY3RvcnkgYXMgbW9kdWxlLmV4cG9ydHMuCgkJLy8gVGhpcyBhY2NlbnR1YXRlcyB0aGUgbmVlZCBmb3IgdGhlIGNyZWF0aW9uIG9mIGEgcmVhbCBgd2luZG93YC4KCQkvLyBlLmcuIHZhciBqUXVlcnkgPSByZXF1aXJlKCJqcXVlcnkiKSh3aW5kb3cpOwoJCS8vIFNlZSB0aWNrZXQgIzE0NTQ5IGZvciBtb3JlIGluZm8uCgkJbW9kdWxlLmV4cG9ydHMgPSBnbG9iYWwuZG9jdW1lbnQgPwoJCQlmYWN0b3J5KCBnbG9iYWwsIHRydWUgKSA6CgkJCWZ1bmN0aW9uKCB3ICkgewoJCQkJaWYgKCAhdy5kb2N1bWVudCApIHsKCQkJCQl0aHJvdyBuZXcgRXJyb3IoICJqUXVlcnkgcmVxdWlyZXMgYSB3aW5kb3cgd2l0aCBhIGRvY3VtZW50IiApOwoJCQkJfQoJCQkJcmV0dXJuIGZhY3RvcnkoIHcgKTsKCQkJfTsKCX0gZWxzZSB7CgkJZmFjdG9yeSggZ2xvYmFsICk7Cgl9CgovLyBQYXNzIHRoaXMgaWYgd2luZG93IGlzIG5vdCBkZWZpbmVkIHlldAp9KHR5cGVvZiB3aW5kb3cgIT09ICJ1bmRlZmluZWQiID8gd2luZG93IDogdGhpcywgZnVuY3Rpb24oIHdpbmRvdywgbm9HbG9iYWwgKSB7CgovLyBTdXBwb3J0OiBGaXJlZm94IDE4KwovLyBDYW4ndCBiZSBpbiBzdHJpY3QgbW9kZSwgc2V2ZXJhbCBsaWJzIGluY2x1ZGluZyBBU1AuTkVUIHRyYWNlCi8vIHRoZSBzdGFjayB2aWEgYXJndW1lbnRzLmNhbGxlci5jYWxsZWUgYW5kIEZpcmVmb3ggZGllcyBpZgovLyB5b3UgdHJ5IHRvIHRyYWNlIHRocm91Z2ggInVzZSBzdHJpY3QiIGNhbGwgY2hhaW5zLiAoIzEzMzM1KQovLyJ1c2Ugc3RyaWN0IjsKdmFyIGRlbGV0ZWRJZHMgPSBbXTsKCnZhciBkb2N1bWVudCA9IHdpbmRvdy5kb2N1bWVudDsKCnZhciBzbGljZSA9IGRlbGV0ZWRJZHMuc2xpY2U7Cgp2YXIgY29uY2F0ID0gZGVsZXRlZElkcy5jb25jYXQ7Cgp2YXIgcHVzaCA9IGRlbGV0ZWRJZHMucHVzaDsKCnZhciBpbmRleE9mID0gZGVsZXRlZElkcy5pbmRleE9mOwoKdmFyIGNsYXNzMnR5cGUgPSB7fTsKCnZhciB0b1N0cmluZyA9IGNsYXNzMnR5cGUudG9TdHJpbmc7Cgp2YXIgaGFzT3duID0gY2xhc3MydHlwZS5oYXNPd25Qcm9wZXJ0eTsKCnZhciBzdXBwb3J0ID0ge307CgoKCnZhcgoJdmVyc2lvbiA9ICIxLjEyLjQiLAoKCS8vIERlZmluZSBhIGxvY2FsIGNvcHkgb2YgalF1ZXJ5CglqUXVlcnkgPSBmdW5jdGlvbiggc2VsZWN0b3IsIGNvbnRleHQgKSB7CgoJCS8vIFRoZSBqUXVlcnkgb2JqZWN0IGlzIGFjdHVhbGx5IGp1c3QgdGhlIGluaXQgY29uc3RydWN0b3IgJ2VuaGFuY2VkJwoJCS8vIE5lZWQgaW5pdCBpZiBqUXVlcnkgaXMgY2FsbGVkIChqdXN0IGFsbG93IGVycm9yIHRvIGJlIHRocm93biBpZiBub3QgaW5jbHVkZWQpCgkJcmV0dXJuIG5ldyBqUXVlcnkuZm4uaW5pdCggc2VsZWN0b3IsIGNvbnRleHQgKTsKCX0sCgoJLy8gU3VwcG9ydDogQW5kcm9pZDw0LjEsIElFPDkKCS8vIE1ha2Ugc3VyZSB3ZSB0cmltIEJPTSBhbmQgTkJTUAoJcnRyaW0gPSAvXltcc1x1RkVGRlx4QTBdK3xbXHNcdUZFRkZceEEwXSskL2csCgoJLy8gTWF0Y2hlcyBkYXNoZWQgc3RyaW5nIGZvciBjYW1lbGl6aW5nCglybXNQcmVmaXggPSAvXi1tcy0vLAoJcmRhc2hBbHBoYSA9IC8tKFtcZGEtel0pL2dpLAoKCS8vIFVzZWQgYnkgalF1ZXJ5LmNhbWVsQ2FzZSBhcyBjYWxsYmFjayB0byByZXBsYWNlKCkKCWZjYW1lbENhc2UgPSBmdW5jdGlvbiggYWxsLCBsZXR0ZXIgKSB7CgkJcmV0dXJuIGxldHRlci50b1VwcGVyQ2FzZSgpOwoJfTsKCmpRdWVyeS5mbiA9IGpRdWVyeS5wcm90b3R5cGUgPSB7CgoJLy8gVGhlIGN1cnJlbnQgdmVyc2lvbiBvZiBqUXVlcnkgYmVpbmcgdXNlZAoJanF1ZXJ5OiB2ZXJzaW9uLAoKCWNvbnN0cnVjdG9yOiBqUXVlcnksCgoJLy8gU3RhcnQgd2l0aCBhbiBlbXB0eSBzZWxlY3RvcgoJc2VsZWN0b3I6ICIiLAoKCS8vIFRoZSBkZWZhdWx0IGxlbmd0aCBvZiBhIGpRdWVyeSBvYmplY3QgaXMgMAoJbGVuZ3RoOiAwLAoKCXRvQXJyYXk6IGZ1bmN0aW9uKCkgewoJCXJldHVybiBzbGljZS5jYWxsKCB0aGlzICk7Cgl9LAoKCS8vIEdldCB0aGUgTnRoIGVsZW1lbnQgaW4gdGhlIG1hdGNoZWQgZWxlbWVudCBzZXQgT1IKCS8vIEdldCB0aGUgd2hvbGUgbWF0Y2hlZCBlbGVtZW50IHNldCBhcyBhIGNsZWFuIGFycmF5CglnZXQ6IGZ1bmN0aW9uKCBudW0gKSB7CgkJcmV0dXJuIG51bSAhPSBudWxsID8KCgkJCS8vIFJldHVybiBqdXN0IHRoZSBvbmUgZWxlbWVudCBmcm9tIHRoZSBzZXQKCQkJKCBudW0gPCAwID8gdGhpc1sgbnVtICsgdGhpcy5sZW5ndGggXSA6IHRoaXNbIG51bSBdICkgOgoKCQkJLy8gUmV0dXJuIGFsbCB0aGUgZWxlbWVudHMgaW4gYSBjbGVhbiBhcnJheQoJCQlzbGljZS5jYWxsKCB0aGlzICk7Cgl9LAoKCS8vIFRha2UgYW4gYXJyYXkgb2YgZWxlbWVudHMgYW5kIHB1c2ggaXQgb250byB0aGUgc3RhY2sKCS8vIChyZXR1cm5pbmcgdGhlIG5ldyBtYXRjaGVkIGVsZW1lbnQgc2V0KQoJcHVzaFN0YWNrOiBmdW5jdGlvbiggZWxlbXMgKSB7CgoJCS8vIEJ1aWxkIGEgbmV3IGpRdWVyeSBtYXRjaGVkIGVsZW1lbnQgc2V0CgkJdmFyIHJldCA9IGpRdWVyeS5tZXJnZSggdGhpcy5jb25zdHJ1Y3RvcigpLCBlbGVtcyApOwoKCQkvLyBBZGQgdGhlIG9sZCBvYmplY3Qgb250byB0aGUgc3RhY2sgKGFzIGEgcmVmZXJlbmNlKQoJCXJldC5wcmV2T2JqZWN0ID0gdGhpczsKCQlyZXQuY29udGV4dCA9IHRoaXMuY29udGV4dDsKCgkJLy8gUmV0dXJuIHRoZSBuZXdseS1mb3JtZWQgZWxlbWVudCBzZXQKCQlyZXR1cm4gcmV0OwoJfSwKCgkvLyBFeGVjdXRlIGEgY2FsbGJhY2sgZm9yIGV2ZXJ5IGVsZW1lbnQgaW4gdGhlIG1hdGNoZWQgc2V0LgoJZWFjaDogZnVuY3Rpb24oIGNhbGxiYWNrICkgewoJCXJldHVybiBqUXVlcnkuZWFjaCggdGhpcywgY2FsbGJhY2sgKTsKCX0sCgoJbWFwOiBmdW5jdGlvbiggY2FsbGJhY2sgKSB7CgkJcmV0dXJuIHRoaXMucHVzaFN0YWNrKCBqUXVlcnkubWFwKCB0aGlzLCBmdW5jdGlvbiggZWxlbSwgaSApIHsKCQkJcmV0dXJuIGNhbGxiYWNrLmNhbGwoIGVsZW0sIGksIGVsZW0gKTsKCQl9ICkgKTsKCX0sCgoJc2xpY2U6IGZ1bmN0aW9uKCkgewoJCXJldHVybiB0aGlzLnB1c2hTdGFjayggc2xpY2UuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApICk7Cgl9LAoKCWZpcnN0OiBmdW5jdGlvbigpIHsKCQlyZXR1cm4gdGhpcy5lcSggMCApOwoJfSwKCglsYXN0OiBmdW5jdGlvbigpIHsKCQlyZXR1cm4gdGhpcy5lcSggLTEgKTsKCX0sCgoJZXE6IGZ1bmN0aW9uKCBpICkgewoJCXZhciBsZW4gPSB0aGlzLmxlbmd0aCwKCQkJaiA9ICtpICsgKCBpIDwgMCA/IGxlbiA6IDAgKTsKCQlyZXR1cm4gdGhpcy5wdXNoU3RhY2soIGogPj0gMCAmJiBqIDwgbGVuID8gWyB0aGlzWyBqIF0gXSA6IFtdICk7Cgl9LAoKCWVuZDogZnVuY3Rpb24oKSB7CgkJcmV0dXJuIHRoaXMucHJldk9iamVjdCB8fCB0aGlzLmNvbnN0cnVjdG9yKCk7Cgl9LAoKCS8vIEZvciBpbnRlcm5hbCB1c2Ugb25seS4KCS8vIEJlaGF2ZXMgbGlrZSBhbiBBcnJheSdzIG1ldGhvZCwgbm90IGxpa2UgYSBqUXVlcnkgbWV0aG9kLgoJcHVzaDogcHVzaCwKCXNvcnQ6IGRlbGV0ZWRJZHMuc29ydCwKCXNwbGljZTogZGVsZXRlZElkcy5zcGxpY2UKfTsKCmpRdWVyeS5leHRlbmQgPSBqUXVlcnkuZm4uZXh0ZW5kID0gZnVuY3Rpb24oKSB7Cgl2YXIgc3JjLCBjb3B5SXNBcnJheSwgY29weSwgbmFtZSwgb3B0aW9ucywgY2xvbmUsCgkJdGFyZ2V0ID0gYXJndW1lbnRzWyAwIF0gfHwge30sCgkJaSA9IDEsCgkJbGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aCwKCQlkZWVwID0gZmFsc2U7CgoJLy8gSGFuZGxlIGEgZGVlcCBjb3B5IHNpdHVhdGlvbgoJaWYgKCB0eXBlb2YgdGFyZ2V0ID09PSAiYm9vbGVhbiIgKSB7CgkJZGVlcCA9IHRhcmdldDsKCgkJLy8gc2tpcCB0aGUgYm9vbGVhbiBhbmQgdGhlIHRhcmdldAoJCXRhcmdldCA9IGFyZ3VtZW50c1sgaSBdIHx8IHt9OwoJCWkrKzsKCX0KCgkvLyBIYW5kbGUgY2FzZSB3aGVuIHRhcmdldCBpcyBhIHN0cmluZyBvciBzb21ldGhpbmcgKHBvc3NpYmxlIGluIGRlZXAgY29weSkKCWlmICggdHlwZW9mIHRhcmdldCAhPT0gIm9iamVjdCIgJiYgIWpRdWVyeS5pc0Z1bmN0aW9uKCB0YXJnZXQgKSApIHsKCQl0YXJnZXQgPSB7fTsKCX0KCgkvLyBleHRlbmQgalF1ZXJ5IGl0c2VsZiBpZiBvbmx5IG9uZSBhcmd1bWVudCBpcyBwYXNzZWQKCWlmICggaSA9PT0gbGVuZ3RoICkgewoJCXRhcmdldCA9IHRoaXM7CgkJaS0tOwoJfQoKCWZvciAoIDsgaSA8IGxlbmd0aDsgaSsrICkgewoKCQkvLyBPbmx5IGRlYWwgd2l0aCBub24tbnVsbC91bmRlZmluZWQgdmFsdWVzCgkJaWYgKCAoIG9wdGlvbnMgPSBhcmd1bWVudHNbIGkgXSApICE9IG51bGwgKSB7CgoJCQkvLyBFeHRlbmQgdGhlIGJhc2Ugb2JqZWN0CgkJCWZvciAoIG5hbWUgaW4gb3B0aW9ucyApIHsKCQkJCXNyYyA9IHRhcmdldFsgbmFtZSBdOwoJCQkJY29weSA9IG9wdGlvbnNbIG5hbWUgXTsKCgkJCQkvLyBQcmV2ZW50IG5ldmVyLWVuZGluZyBsb29wCgkJCQlpZiAoIHRhcmdldCA9PT0gY29weSApIHsKCQkJCQljb250aW51ZTsKCQkJCX0KCgkJCQkvLyBSZWN1cnNlIGlmIHdlJ3JlIG1lcmdpbmcgcGxhaW4gb2JqZWN0cyBvciBhcnJheXMKCQkJCWlmICggZGVlcCAmJiBjb3B5ICYmICggalF1ZXJ5LmlzUGxhaW5PYmplY3QoIGNvcHkgKSB8fAoJCQkJCSggY29weUlzQXJyYXkgPSBqUXVlcnkuaXNBcnJheSggY29weSApICkgKSApIHsKCgkJCQkJaWYgKCBjb3B5SXNBcnJheSApIHsKCQkJCQkJY29weUlzQXJyYXkgPSBmYWxzZTsKCQkJCQkJY2xvbmUgPSBzcmMgJiYgalF1ZXJ5LmlzQXJyYXkoIHNyYyApID8gc3JjIDogW107CgoJCQkJCX0gZWxzZSB7CgkJCQkJCWNsb25lID0gc3JjICYmIGpRdWVyeS5pc1BsYWluT2JqZWN0KCBzcmMgKSA/IHNyYyA6IHt9OwoJCQkJCX0KCgkJCQkJLy8gTmV2ZXIgbW92ZSBvcmlnaW5hbCBvYmplY3RzLCBjbG9uZSB0aGVtCgkJCQkJdGFyZ2V0WyBuYW1lIF0gPSBqUXVlcnkuZXh0ZW5kKCBkZWVwLCBjbG9uZSwgY29weSApOwoKCQkJCS8vIERvbid0IGJyaW5nIGluIHVuZGVmaW5lZCB2YWx1ZXMKCQkJCX0gZWxzZSBpZiAoIGNvcHkgIT09IHVuZGVmaW5lZCApIHsKCQkJCQl0YXJnZXRbIG5hbWUgXSA9IGNvcHk7CgkJCQl9CgkJCX0KCQl9Cgl9CgoJLy8gUmV0dXJuIHRoZSBtb2RpZmllZCBvYmplY3QKCXJldHVybiB0YXJnZXQ7Cn07CgpqUXVlcnkuZXh0ZW5kKCB7CgoJLy8gVW5pcXVlIGZvciBlYWNoIGNvcHkgb2YgalF1ZXJ5IG9uIHRoZSBwYWdlCglleHBhbmRvOiAialF1ZXJ5IiArICggdmVyc2lvbiArIE1hdGgucmFuZG9tKCkgKS5yZXBsYWNlKCAvXEQvZywgIiIgKSwKCgkvLyBBc3N1bWUgalF1ZXJ5IGlzIHJlYWR5IHdpdGhvdXQgdGhlIHJlYWR5IG1vZHVsZQoJaXNSZWFkeTogdHJ1ZSwKCgllcnJvcjogZnVuY3Rpb24oIG1zZyApIHsKCQl0aHJvdyBuZXcgRXJyb3IoIG1zZyApOwoJfSwKCglub29wOiBmdW5jdGlvbigpIHt9LAoKCS8vIFNlZSB0ZXN0L3VuaXQvY29yZS5qcyBmb3IgZGV0YWlscyBjb25jZXJuaW5nIGlzRnVuY3Rpb24uCgkvLyBTaW5jZSB2ZXJzaW9uIDEuMywgRE9NIG1ldGhvZHMgYW5kIGZ1bmN0aW9ucyBsaWtlIGFsZXJ0CgkvLyBhcmVuJ3Qgc3VwcG9ydGVkLiBUaGV5IHJldHVybiBmYWxzZSBvbiBJRSAoIzI5NjgpLgoJaXNGdW5jdGlvbjogZnVuY3Rpb24oIG9iaiApIHsKCQlyZXR1cm4galF1ZXJ5LnR5cGUoIG9iaiApID09PSAiZnVuY3Rpb24iOwoJfSwKCglpc0FycmF5OiBBcnJheS5pc0FycmF5IHx8IGZ1bmN0aW9uKCBvYmogKSB7CgkJcmV0dXJuIGpRdWVyeS50eXBlKCBvYmogKSA9PT0gImFycmF5IjsKCX0sCgoJaXNXaW5kb3c6IGZ1bmN0aW9uKCBvYmogKSB7CgkJLyoganNoaW50IGVxZXFlcTogZmFsc2UgKi8KCQlyZXR1cm4gb2JqICE9IG51bGwgJiYgb2JqID09IG9iai53aW5kb3c7Cgl9LAoKCWlzTnVtZXJpYzogZnVuY3Rpb24oIG9iaiApIHsKCgkJLy8gcGFyc2VGbG9hdCBOYU5zIG51bWVyaWMtY2FzdCBmYWxzZSBwb3NpdGl2ZXMgKG51bGx8dHJ1ZXxmYWxzZXwiIikKCQkvLyAuLi5idXQgbWlzaW50ZXJwcmV0cyBsZWFkaW5nLW51bWJlciBzdHJpbmdzLCBwYXJ0aWN1bGFybHkgaGV4IGxpdGVyYWxzICgiMHguLi4iKQoJCS8vIHN1YnRyYWN0aW9uIGZvcmNlcyBpbmZpbml0aWVzIHRvIE5hTgoJCS8vIGFkZGluZyAxIGNvcnJlY3RzIGxvc3Mgb2YgcHJlY2lzaW9uIGZyb20gcGFyc2VGbG9hdCAoIzE1MTAwKQoJCXZhciByZWFsU3RyaW5nT2JqID0gb2JqICYmIG9iai50b1N0cmluZygpOwoJCXJldHVybiAhalF1ZXJ5LmlzQXJyYXkoIG9iaiApICYmICggcmVhbFN0cmluZ09iaiAtIHBhcnNlRmxvYXQoIHJlYWxTdHJpbmdPYmogKSArIDEgKSA+PSAwOwoJfSwKCglpc0VtcHR5T2JqZWN0OiBmdW5jdGlvbiggb2JqICkgewoJCXZhciBuYW1lOwoJCWZvciAoIG5hbWUgaW4gb2JqICkgewoJCQlyZXR1cm4gZmFsc2U7CgkJfQoJCXJldHVybiB0cnVlOwoJfSwKCglpc1BsYWluT2JqZWN0OiBmdW5jdGlvbiggb2JqICkgewoJCXZhciBrZXk7CgoJCS8vIE11c3QgYmUgYW4gT2JqZWN0LgoJCS8vIEJlY2F1c2Ugb2YgSUUsIHdlIGFsc28gaGF2ZSB0byBjaGVjayB0aGUgcHJlc2VuY2Ugb2YgdGhlIGNvbnN0cnVjdG9yIHByb3BlcnR5LgoJCS8vIE1ha2Ugc3VyZSB0aGF0IERPTSBub2RlcyBhbmQgd2luZG93IG9iamVjdHMgZG9uJ3QgcGFzcyB0aHJvdWdoLCBhcyB3ZWxsCgkJaWYgKCAhb2JqIHx8IGpRdWVyeS50eXBlKCBvYmogKSAhPT0gIm9iamVjdCIgfHwgb2JqLm5vZGVUeXBlIHx8IGpRdWVyeS5pc1dpbmRvdyggb2JqICkgKSB7CgkJCXJldHVybiBmYWxzZTsKCQl9CgoJCXRyeSB7CgoJCQkvLyBOb3Qgb3duIGNvbnN0cnVjdG9yIHByb3BlcnR5IG11c3QgYmUgT2JqZWN0CgkJCWlmICggb2JqLmNvbnN0cnVjdG9yICYmCgkJCQkhaGFzT3duLmNhbGwoIG9iaiwgImNvbnN0cnVjdG9yIiApICYmCgkJCQkhaGFzT3duLmNhbGwoIG9iai5jb25zdHJ1Y3Rvci5wcm90b3R5cGUsICJpc1Byb3RvdHlwZU9mIiApICkgewoJCQkJcmV0dXJuIGZhbHNlOwoJCQl9CgkJfSBjYXRjaCAoIGUgKSB7CgoJCQkvLyBJRTgsOSBXaWxsIHRocm93IGV4Y2VwdGlvbnMgb24gY2VydGFpbiBob3N0IG9iamVjdHMgIzk4OTcKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCgkJLy8gU3VwcG9ydDogSUU8OQoJCS8vIEhhbmRsZSBpdGVyYXRpb24gb3ZlciBpbmhlcml0ZWQgcHJvcGVydGllcyBiZWZvcmUgb3duIHByb3BlcnRpZXMuCgkJaWYgKCAhc3VwcG9ydC5vd25GaXJzdCApIHsKCQkJZm9yICgga2V5IGluIG9iaiApIHsKCQkJCXJldHVybiBoYXNPd24uY2FsbCggb2JqLCBrZXkgKTsKCQkJfQoJCX0KCgkJLy8gT3duIHByb3BlcnRpZXMgYXJlIGVudW1lcmF0ZWQgZmlyc3RseSwgc28gdG8gc3BlZWQgdXAsCgkJLy8gaWYgbGFzdCBvbmUgaXMgb3duLCB0aGVuIGFsbCBwcm9wZXJ0aWVzIGFyZSBvd24uCgkJZm9yICgga2V5IGluIG9iaiApIHt9CgoJCXJldHVybiBrZXkgPT09IHVuZGVmaW5lZCB8fCBoYXNPd24uY2FsbCggb2JqLCBrZXkgKTsKCX0sCgoJdHlwZTogZnVuY3Rpb24oIG9iaiApIHsKCQlpZiAoIG9iaiA9PSBudWxsICkgewoJCQlyZXR1cm4gb2JqICsgIiI7CgkJfQoJCXJldHVybiB0eXBlb2Ygb2JqID09PSAib2JqZWN0IiB8fCB0eXBlb2Ygb2JqID09PSAiZnVuY3Rpb24iID8KCQkJY2xhc3MydHlwZVsgdG9TdHJpbmcuY2FsbCggb2JqICkgXSB8fCAib2JqZWN0IiA6CgkJCXR5cGVvZiBvYmo7Cgl9LAoKCS8vIFdvcmthcm91bmRzIGJhc2VkIG9uIGZpbmRpbmdzIGJ5IEppbSBEcmlzY29sbAoJLy8gaHR0cDovL3dlYmxvZ3MuamF2YS5uZXQvYmxvZy9kcmlzY29sbC9hcmNoaXZlLzIwMDkvMDkvMDgvZXZhbC1qYXZhc2NyaXB0LWdsb2JhbC1jb250ZXh0CglnbG9iYWxFdmFsOiBmdW5jdGlvbiggZGF0YSApIHsKCQlpZiAoIGRhdGEgJiYgalF1ZXJ5LnRyaW0oIGRhdGEgKSApIHsKCgkJCS8vIFdlIHVzZSBleGVjU2NyaXB0IG9uIEludGVybmV0IEV4cGxvcmVyCgkJCS8vIFdlIHVzZSBhbiBhbm9ueW1vdXMgZnVuY3Rpb24gc28gdGhhdCBjb250ZXh0IGlzIHdpbmRvdwoJCQkvLyByYXRoZXIgdGhhbiBqUXVlcnkgaW4gRmlyZWZveAoJCQkoIHdpbmRvdy5leGVjU2NyaXB0IHx8IGZ1bmN0aW9uKCBkYXRhICkgewoJCQkJd2luZG93WyAiZXZhbCIgXS5jYWxsKCB3aW5kb3csIGRhdGEgKTsgLy8ganNjczppZ25vcmUgcmVxdWlyZURvdE5vdGF0aW9uCgkJCX0gKSggZGF0YSApOwoJCX0KCX0sCgoJLy8gQ29udmVydCBkYXNoZWQgdG8gY2FtZWxDYXNlOyB1c2VkIGJ5IHRoZSBjc3MgYW5kIGRhdGEgbW9kdWxlcwoJLy8gTWljcm9zb2Z0IGZvcmdvdCB0byBodW1wIHRoZWlyIHZlbmRvciBwcmVmaXggKCM5NTcyKQoJY2FtZWxDYXNlOiBmdW5jdGlvbiggc3RyaW5nICkgewoJCXJldHVybiBzdHJpbmcucmVwbGFjZSggcm1zUHJlZml4LCAibXMtIiApLnJlcGxhY2UoIHJkYXNoQWxwaGEsIGZjYW1lbENhc2UgKTsKCX0sCgoJbm9kZU5hbWU6IGZ1bmN0aW9uKCBlbGVtLCBuYW1lICkgewoJCXJldHVybiBlbGVtLm5vZGVOYW1lICYmIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbmFtZS50b0xvd2VyQ2FzZSgpOwoJfSwKCgllYWNoOiBmdW5jdGlvbiggb2JqLCBjYWxsYmFjayApIHsKCQl2YXIgbGVuZ3RoLCBpID0gMDsKCgkJaWYgKCBpc0FycmF5TGlrZSggb2JqICkgKSB7CgkJCWxlbmd0aCA9IG9iai5sZW5ndGg7CgkJCWZvciAoIDsgaSA8IGxlbmd0aDsgaSsrICkgewoJCQkJaWYgKCBjYWxsYmFjay5jYWxsKCBvYmpbIGkgXSwgaSwgb2JqWyBpIF0gKSA9PT0gZmFsc2UgKSB7CgkJCQkJYnJlYWs7CgkJCQl9CgkJCX0KCQl9IGVsc2UgewoJCQlmb3IgKCBpIGluIG9iaiApIHsKCQkJCWlmICggY2FsbGJhY2suY2FsbCggb2JqWyBpIF0sIGksIG9ialsgaSBdICkgPT09IGZhbHNlICkgewoJCQkJCWJyZWFrOwoJCQkJfQoJCQl9CgkJfQoKCQlyZXR1cm4gb2JqOwoJfSwKCgkvLyBTdXBwb3J0OiBBbmRyb2lkPDQuMSwgSUU8OQoJdHJpbTogZnVuY3Rpb24oIHRleHQgKSB7CgkJcmV0dXJuIHRleHQgPT0gbnVsbCA/CgkJCSIiIDoKCQkJKCB0ZXh0ICsgIiIgKS5yZXBsYWNlKCBydHJpbSwgIiIgKTsKCX0sCgoJLy8gcmVzdWx0cyBpcyBmb3IgaW50ZXJuYWwgdXNhZ2Ugb25seQoJbWFrZUFycmF5OiBmdW5jdGlvbiggYXJyLCByZXN1bHRzICkgewoJCXZhciByZXQgPSByZXN1bHRzIHx8IFtdOwoKCQlpZiAoIGFyciAhPSBudWxsICkgewoJCQlpZiAoIGlzQXJyYXlMaWtlKCBPYmplY3QoIGFyciApICkgKSB7CgkJCQlqUXVlcnkubWVyZ2UoIHJldCwKCQkJCQl0eXBlb2YgYXJyID09PSAic3RyaW5nIiA/CgkJCQkJWyBhcnIgXSA6IGFycgoJCQkJKTsKCQkJfSBlbHNlIHsKCQkJCXB1c2guY2FsbCggcmV0LCBhcnIgKTsKCQkJfQoJCX0KCgkJcmV0dXJuIHJldDsKCX0sCgoJaW5BcnJheTogZnVuY3Rpb24oIGVsZW0sIGFyciwgaSApIHsKCQl2YXIgbGVuOwoKCQlpZiAoIGFyciApIHsKCQkJaWYgKCBpbmRleE9mICkgewoJCQkJcmV0dXJuIGluZGV4T2YuY2FsbCggYXJyLCBlbGVtLCBpICk7CgkJCX0KCgkJCWxlbiA9IGFyci5sZW5ndGg7CgkJCWkgPSBpID8gaSA8IDAgPyBNYXRoLm1heCggMCwgbGVuICsgaSApIDogaSA6IDA7CgoJCQlmb3IgKCA7IGkgPCBsZW47IGkrKyApIHsKCgkJCQkvLyBTa2lwIGFjY2Vzc2luZyBpbiBzcGFyc2UgYXJyYXlzCgkJCQlpZiAoIGkgaW4gYXJyICYmIGFyclsgaSBdID09PSBlbGVtICkgewoJCQkJCXJldHVybiBpOwoJCQkJfQoJCQl9CgkJfQoKCQlyZXR1cm4gLTE7Cgl9LAoKCW1lcmdlOiBmdW5jdGlvbiggZmlyc3QsIHNlY29uZCApIHsKCQl2YXIgbGVuID0gK3NlY29uZC5sZW5ndGgsCgkJCWogPSAwLAoJCQlpID0gZmlyc3QubGVuZ3RoOwoKCQl3aGlsZSAoIGogPCBsZW4gKSB7CgkJCWZpcnN0WyBpKysgXSA9IHNlY29uZFsgaisrIF07CgkJfQoKCQkvLyBTdXBwb3J0OiBJRTw5CgkJLy8gV29ya2Fyb3VuZCBjYXN0aW5nIG9mIC5sZW5ndGggdG8gTmFOIG9uIG90aGVyd2lzZSBhcnJheWxpa2Ugb2JqZWN0cyAoZS5nLiwgTm9kZUxpc3RzKQoJCWlmICggbGVuICE9PSBsZW4gKSB7CgkJCXdoaWxlICggc2Vjb25kWyBqIF0gIT09IHVuZGVmaW5lZCApIHsKCQkJCWZpcnN0WyBpKysgXSA9IHNlY29uZFsgaisrIF07CgkJCX0KCQl9CgoJCWZpcnN0Lmxlbmd0aCA9IGk7CgoJCXJldHVybiBmaXJzdDsKCX0sCgoJZ3JlcDogZnVuY3Rpb24oIGVsZW1zLCBjYWxsYmFjaywgaW52ZXJ0ICkgewoJCXZhciBjYWxsYmFja0ludmVyc2UsCgkJCW1hdGNoZXMgPSBbXSwKCQkJaSA9IDAsCgkJCWxlbmd0aCA9IGVsZW1zLmxlbmd0aCwKCQkJY2FsbGJhY2tFeHBlY3QgPSAhaW52ZXJ0OwoKCQkvLyBHbyB0aHJvdWdoIHRoZSBhcnJheSwgb25seSBzYXZpbmcgdGhlIGl0ZW1zCgkJLy8gdGhhdCBwYXNzIHRoZSB2YWxpZGF0b3IgZnVuY3Rpb24KCQlmb3IgKCA7IGkgPCBsZW5ndGg7IGkrKyApIHsKCQkJY2FsbGJhY2tJbnZlcnNlID0gIWNhbGxiYWNrKCBlbGVtc1sgaSBdLCBpICk7CgkJCWlmICggY2FsbGJhY2tJbnZlcnNlICE9PSBjYWxsYmFja0V4cGVjdCApIHsKCQkJCW1hdGNoZXMucHVzaCggZWxlbXNbIGkgXSApOwoJCQl9CgkJfQoKCQlyZXR1cm4gbWF0Y2hlczsKCX0sCgoJLy8gYXJnIGlzIGZvciBpbnRlcm5hbCB1c2FnZSBvbmx5CgltYXA6IGZ1bmN0aW9uKCBlbGVtcywgY2FsbGJhY2ssIGFyZyApIHsKCQl2YXIgbGVuZ3RoLCB2YWx1ZSwKCQkJaSA9IDAsCgkJCXJldCA9IFtdOwoKCQkvLyBHbyB0aHJvdWdoIHRoZSBhcnJheSwgdHJhbnNsYXRpbmcgZWFjaCBvZiB0aGUgaXRlbXMgdG8gdGhlaXIgbmV3IHZhbHVlcwoJCWlmICggaXNBcnJheUxpa2UoIGVsZW1zICkgKSB7CgkJCWxlbmd0aCA9IGVsZW1zLmxlbmd0aDsKCQkJZm9yICggOyBpIDwgbGVuZ3RoOyBpKysgKSB7CgkJCQl2YWx1ZSA9IGNhbGxiYWNrKCBlbGVtc1sgaSBdLCBpLCBhcmcgKTsKCgkJCQlpZiAoIHZhbHVlICE9IG51bGwgKSB7CgkJCQkJcmV0LnB1c2goIHZhbHVlICk7CgkJCQl9CgkJCX0KCgkJLy8gR28gdGhyb3VnaCBldmVyeSBrZXkgb24gdGhlIG9iamVjdCwKCQl9IGVsc2UgewoJCQlmb3IgKCBpIGluIGVsZW1zICkgewoJCQkJdmFsdWUgPSBjYWxsYmFjayggZWxlbXNbIGkgXSwgaSwgYXJnICk7CgoJCQkJaWYgKCB2YWx1ZSAhPSBudWxsICkgewoJCQkJCXJldC5wdXNoKCB2YWx1ZSApOwoJCQkJfQoJCQl9CgkJfQoKCQkvLyBGbGF0dGVuIGFueSBuZXN0ZWQgYXJyYXlzCgkJcmV0dXJuIGNvbmNhdC5hcHBseSggW10sIHJldCApOwoJfSwKCgkvLyBBIGdsb2JhbCBHVUlEIGNvdW50ZXIgZm9yIG9iamVjdHMKCWd1aWQ6IDEsCgoJLy8gQmluZCBhIGZ1bmN0aW9uIHRvIGEgY29udGV4dCwgb3B0aW9uYWxseSBwYXJ0aWFsbHkgYXBwbHlpbmcgYW55CgkvLyBhcmd1bWVudHMuCglwcm94eTogZnVuY3Rpb24oIGZuLCBjb250ZXh0ICkgewoJCXZhciBhcmdzLCBwcm94eSwgdG1wOwoKCQlpZiAoIHR5cGVvZiBjb250ZXh0ID09PSAic3RyaW5nIiApIHsKCQkJdG1wID0gZm5bIGNvbnRleHQgXTsKCQkJY29udGV4dCA9IGZuOwoJCQlmbiA9IHRtcDsKCQl9CgoJCS8vIFF1aWNrIGNoZWNrIHRvIGRldGVybWluZSBpZiB0YXJnZXQgaXMgY2FsbGFibGUsIGluIHRoZSBzcGVjCgkJLy8gdGhpcyB0aHJvd3MgYSBUeXBlRXJyb3IsIGJ1dCB3ZSB3aWxsIGp1c3QgcmV0dXJuIHVuZGVmaW5lZC4KCQlpZiAoICFqUXVlcnkuaXNGdW5jdGlvbiggZm4gKSApIHsKCQkJcmV0dXJuIHVuZGVmaW5lZDsKCQl9CgoJCS8vIFNpbXVsYXRlZCBiaW5kCgkJYXJncyA9IHNsaWNlLmNhbGwoIGFyZ3VtZW50cywgMiApOwoJCXByb3h5ID0gZnVuY3Rpb24oKSB7CgkJCXJldHVybiBmbi5hcHBseSggY29udGV4dCB8fCB0aGlzLCBhcmdzLmNvbmNhdCggc2xpY2UuY2FsbCggYXJndW1lbnRzICkgKSApOwoJCX07CgoJCS8vIFNldCB0aGUgZ3VpZCBvZiB1bmlxdWUgaGFuZGxlciB0byB0aGUgc2FtZSBvZiBvcmlnaW5hbCBoYW5kbGVyLCBzbyBpdCBjYW4gYmUgcmVtb3ZlZAoJCXByb3h5Lmd1aWQgPSBmbi5ndWlkID0gZm4uZ3VpZCB8fCBqUXVlcnkuZ3VpZCsrOwoKCQlyZXR1cm4gcHJveHk7Cgl9LAoKCW5vdzogZnVuY3Rpb24oKSB7CgkJcmV0dXJuICsoIG5ldyBEYXRlKCkgKTsKCX0sCgoJLy8galF1ZXJ5LnN1cHBvcnQgaXMgbm90IHVzZWQgaW4gQ29yZSBidXQgb3RoZXIgcHJvamVjdHMgYXR0YWNoIHRoZWlyCgkvLyBwcm9wZXJ0aWVzIHRvIGl0IHNvIGl0IG5lZWRzIHRvIGV4aXN0LgoJc3VwcG9ydDogc3VwcG9ydAp9ICk7CgovLyBKU0hpbnQgd291bGQgZXJyb3Igb24gdGhpcyBjb2RlIGR1ZSB0byB0aGUgU3ltYm9sIG5vdCBiZWluZyBkZWZpbmVkIGluIEVTNS4KLy8gRGVmaW5pbmcgdGhpcyBnbG9iYWwgaW4gLmpzaGludHJjIHdvdWxkIGNyZWF0ZSBhIGRhbmdlciBvZiB1c2luZyB0aGUgZ2xvYmFsCi8vIHVuZ3VhcmRlZCBpbiBhbm90aGVyIHBsYWNlLCBpdCBzZWVtcyBzYWZlciB0byBqdXN0IGRpc2FibGUgSlNIaW50IGZvciB0aGVzZQovLyB0aHJlZSBsaW5lcy4KLyoganNoaW50IGlnbm9yZTogc3RhcnQgKi8KaWYgKCB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICkgewoJalF1ZXJ5LmZuWyBTeW1ib2wuaXRlcmF0b3IgXSA9IGRlbGV0ZWRJZHNbIFN5bWJvbC5pdGVyYXRvciBdOwp9Ci8qIGpzaGludCBpZ25vcmU6IGVuZCAqLwoKLy8gUG9wdWxhdGUgdGhlIGNsYXNzMnR5cGUgbWFwCmpRdWVyeS5lYWNoKCAiQm9vbGVhbiBOdW1iZXIgU3RyaW5nIEZ1bmN0aW9uIEFycmF5IERhdGUgUmVnRXhwIE9iamVjdCBFcnJvciBTeW1ib2wiLnNwbGl0KCAiICIgKSwKZnVuY3Rpb24oIGksIG5hbWUgKSB7CgljbGFzczJ0eXBlWyAiW29iamVjdCAiICsgbmFtZSArICJdIiBdID0gbmFtZS50b0xvd2VyQ2FzZSgpOwp9ICk7CgpmdW5jdGlvbiBpc0FycmF5TGlrZSggb2JqICkgewoKCS8vIFN1cHBvcnQ6IGlPUyA4LjIgKG5vdCByZXByb2R1Y2libGUgaW4gc2ltdWxhdG9yKQoJLy8gYGluYCBjaGVjayB1c2VkIHRvIHByZXZlbnQgSklUIGVycm9yIChnaC0yMTQ1KQoJLy8gaGFzT3duIGlzbid0IHVzZWQgaGVyZSBkdWUgdG8gZmFsc2UgbmVnYXRpdmVzCgkvLyByZWdhcmRpbmcgTm9kZWxpc3QgbGVuZ3RoIGluIElFCgl2YXIgbGVuZ3RoID0gISFvYmogJiYgImxlbmd0aCIgaW4gb2JqICYmIG9iai5sZW5ndGgsCgkJdHlwZSA9IGpRdWVyeS50eXBlKCBvYmogKTsKCglpZiAoIHR5cGUgPT09ICJmdW5jdGlvbiIgfHwgalF1ZXJ5LmlzV2luZG93KCBvYmogKSApIHsKCQlyZXR1cm4gZmFsc2U7Cgl9CgoJcmV0dXJuIHR5cGUgPT09ICJhcnJheSIgfHwgbGVuZ3RoID09PSAwIHx8CgkJdHlwZW9mIGxlbmd0aCA9PT0gIm51bWJlciIgJiYgbGVuZ3RoID4gMCAmJiAoIGxlbmd0aCAtIDEgKSBpbiBvYmo7Cn0KdmFyIFNpenpsZSA9Ci8qIQogKiBTaXp6bGUgQ1NTIFNlbGVjdG9yIEVuZ2luZSB2Mi4yLjEKICogaHR0cDovL3NpenpsZWpzLmNvbS8KICoKICogQ29weXJpZ2h0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMKICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlCiAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2UKICoKICogRGF0ZTogMjAxNS0xMC0xNwogKi8KKGZ1bmN0aW9uKCB3aW5kb3cgKSB7Cgp2YXIgaSwKCXN1cHBvcnQsCglFeHByLAoJZ2V0VGV4dCwKCWlzWE1MLAoJdG9rZW5pemUsCgljb21waWxlLAoJc2VsZWN0LAoJb3V0ZXJtb3N0Q29udGV4dCwKCXNvcnRJbnB1dCwKCWhhc0R1cGxpY2F0ZSwKCgkvLyBMb2NhbCBkb2N1bWVudCB2YXJzCglzZXREb2N1bWVudCwKCWRvY3VtZW50LAoJZG9jRWxlbSwKCWRvY3VtZW50SXNIVE1MLAoJcmJ1Z2d5UVNBLAoJcmJ1Z2d5TWF0Y2hlcywKCW1hdGNoZXMsCgljb250YWlucywKCgkvLyBJbnN0YW5jZS1zcGVjaWZpYyBkYXRhCglleHBhbmRvID0gInNpenpsZSIgKyAxICogbmV3IERhdGUoKSwKCXByZWZlcnJlZERvYyA9IHdpbmRvdy5kb2N1bWVudCwKCWRpcnJ1bnMgPSAwLAoJZG9uZSA9IDAsCgljbGFzc0NhY2hlID0gY3JlYXRlQ2FjaGUoKSwKCXRva2VuQ2FjaGUgPSBjcmVhdGVDYWNoZSgpLAoJY29tcGlsZXJDYWNoZSA9IGNyZWF0ZUNhY2hlKCksCglzb3J0T3JkZXIgPSBmdW5jdGlvbiggYSwgYiApIHsKCQlpZiAoIGEgPT09IGIgKSB7CgkJCWhhc0R1cGxpY2F0ZSA9IHRydWU7CgkJfQoJCXJldHVybiAwOwoJfSwKCgkvLyBHZW5lcmFsLXB1cnBvc2UgY29uc3RhbnRzCglNQVhfTkVHQVRJVkUgPSAxIDw8IDMxLAoKCS8vIEluc3RhbmNlIG1ldGhvZHMKCWhhc093biA9ICh7fSkuaGFzT3duUHJvcGVydHksCglhcnIgPSBbXSwKCXBvcCA9IGFyci5wb3AsCglwdXNoX25hdGl2ZSA9IGFyci5wdXNoLAoJcHVzaCA9IGFyci5wdXNoLAoJc2xpY2UgPSBhcnIuc2xpY2UsCgkvLyBVc2UgYSBzdHJpcHBlZC1kb3duIGluZGV4T2YgYXMgaXQncyBmYXN0ZXIgdGhhbiBuYXRpdmUKCS8vIGh0dHA6Ly9qc3BlcmYuY29tL3Rob3ItaW5kZXhvZi12cy1mb3IvNQoJaW5kZXhPZiA9IGZ1bmN0aW9uKCBsaXN0LCBlbGVtICkgewoJCXZhciBpID0gMCwKCQkJbGVuID0gbGlzdC5sZW5ndGg7CgkJZm9yICggOyBpIDwgbGVuOyBpKysgKSB7CgkJCWlmICggbGlzdFtpXSA9PT0gZWxlbSApIHsKCQkJCXJldHVybiBpOwoJCQl9CgkJfQoJCXJldHVybiAtMTsKCX0sCgoJYm9vbGVhbnMgPSAiY2hlY2tlZHxzZWxlY3RlZHxhc3luY3xhdXRvZm9jdXN8YXV0b3BsYXl8Y29udHJvbHN8ZGVmZXJ8ZGlzYWJsZWR8aGlkZGVufGlzbWFwfGxvb3B8bXVsdGlwbGV8b3BlbnxyZWFkb25seXxyZXF1aXJlZHxzY29wZWQiLAoKCS8vIFJlZ3VsYXIgZXhwcmVzc2lvbnMKCgkvLyBodHRwOi8vd3d3LnczLm9yZy9UUi9jc3MzLXNlbGVjdG9ycy8jd2hpdGVzcGFjZQoJd2hpdGVzcGFjZSA9ICJbXFx4MjBcXHRcXHJcXG5cXGZdIiwKCgkvLyBodHRwOi8vd3d3LnczLm9yZy9UUi9DU1MyMS9zeW5kYXRhLmh0bWwjdmFsdWUtZGVmLWlkZW50aWZpZXIKCWlkZW50aWZpZXIgPSAiKD86XFxcXC58W1xcdy1dfFteXFx4MDAtXFx4YTBdKSsiLAoKCS8vIEF0dHJpYnV0ZSBzZWxlY3RvcnM6IGh0dHA6Ly93d3cudzMub3JnL1RSL3NlbGVjdG9ycy8jYXR0cmlidXRlLXNlbGVjdG9ycwoJYXR0cmlidXRlcyA9ICJcXFsiICsgd2hpdGVzcGFjZSArICIqKCIgKyBpZGVudGlmaWVyICsgIikoPzoiICsgd2hpdGVzcGFjZSArCgkJLy8gT3BlcmF0b3IgKGNhcHR1cmUgMikKCQkiKihbKl4kfCF+XT89KSIgKyB3aGl0ZXNwYWNlICsKCQkvLyAiQXR0cmlidXRlIHZhbHVlcyBtdXN0IGJlIENTUyBpZGVudGlmaWVycyBbY2FwdHVyZSA1XSBvciBzdHJpbmdzIFtjYXB0dXJlIDMgb3IgY2FwdHVyZSA0XSIKCQkiKig/OicoKD86XFxcXC58W15cXFxcJ10pKiknfFwiKCg/OlxcXFwufFteXFxcXFwiXSkqKVwifCgiICsgaWRlbnRpZmllciArICIpKXwpIiArIHdoaXRlc3BhY2UgKwoJCSIqXFxdIiwKCglwc2V1ZG9zID0gIjooIiArIGlkZW50aWZpZXIgKyAiKSg/OlxcKCgiICsKCQkvLyBUbyByZWR1Y2UgdGhlIG51bWJlciBvZiBzZWxlY3RvcnMgbmVlZGluZyB0b2tlbml6ZSBpbiB0aGUgcHJlRmlsdGVyLCBwcmVmZXIgYXJndW1lbnRzOgoJCS8vIDEuIHF1b3RlZCAoY2FwdHVyZSAzOyBjYXB0dXJlIDQgb3IgY2FwdHVyZSA1KQoJCSIoJygoPzpcXFxcLnxbXlxcXFwnXSkqKSd8XCIoKD86XFxcXC58W15cXFxcXCJdKSopXCIpfCIgKwoJCS8vIDIuIHNpbXBsZSAoY2FwdHVyZSA2KQoJCSIoKD86XFxcXC58W15cXFxcKClbXFxdXXwiICsgYXR0cmlidXRlcyArICIpKil8IiArCgkJLy8gMy4gYW55dGhpbmcgZWxzZSAoY2FwdHVyZSAyKQoJCSIuKiIgKwoJCSIpXFwpfCkiLAoKCS8vIExlYWRpbmcgYW5kIG5vbi1lc2NhcGVkIHRyYWlsaW5nIHdoaXRlc3BhY2UsIGNhcHR1cmluZyBzb21lIG5vbi13aGl0ZXNwYWNlIGNoYXJhY3RlcnMgcHJlY2VkaW5nIHRoZSBsYXR0ZXIKCXJ3aGl0ZXNwYWNlID0gbmV3IFJlZ0V4cCggd2hpdGVzcGFjZSArICIrIiwgImciICksCglydHJpbSA9IG5ldyBSZWdFeHAoICJeIiArIHdoaXRlc3BhY2UgKyAiK3woKD86XnxbXlxcXFxdKSg/OlxcXFwuKSopIiArIHdoaXRlc3BhY2UgKyAiKyQiLCAiZyIgKSwKCglyY29tbWEgPSBuZXcgUmVnRXhwKCAiXiIgKyB3aGl0ZXNwYWNlICsgIiosIiArIHdoaXRlc3BhY2UgKyAiKiIgKSwKCXJjb21iaW5hdG9ycyA9IG5ldyBSZWdFeHAoICJeIiArIHdoaXRlc3BhY2UgKyAiKihbPit+XXwiICsgd2hpdGVzcGFjZSArICIpIiArIHdoaXRlc3BhY2UgKyAiKiIgKSwKCglyYXR0cmlidXRlUXVvdGVzID0gbmV3IFJlZ0V4cCggIj0iICsgd2hpdGVzcGFjZSArICIqKFteXFxdJ1wiXSo/KSIgKyB3aGl0ZXNwYWNlICsgIipcXF0iLCAiZyIgKSwKCglycHNldWRvID0gbmV3IFJlZ0V4cCggcHNldWRvcyApLAoJcmlkZW50aWZpZXIgPSBuZXcgUmVnRXhwKCAiXiIgKyBpZGVudGlmaWVyICsgIiQiICksCgoJbWF0Y2hFeHByID0gewoJCSJJRCI6IG5ldyBSZWdFeHAoICJeIygiICsgaWRlbnRpZmllciArICIpIiApLAoJCSJDTEFTUyI6IG5ldyBSZWdFeHAoICJeXFwuKCIgKyBpZGVudGlmaWVyICsgIikiICksCgkJIlRBRyI6IG5ldyBSZWdFeHAoICJeKCIgKyBpZGVudGlmaWVyICsgInxbKl0pIiApLAoJCSJBVFRSIjogbmV3IFJlZ0V4cCggIl4iICsgYXR0cmlidXRlcyApLAoJCSJQU0VVRE8iOiBuZXcgUmVnRXhwKCAiXiIgKyBwc2V1ZG9zICksCgkJIkNISUxEIjogbmV3IFJlZ0V4cCggIl46KG9ubHl8Zmlyc3R8bGFzdHxudGh8bnRoLWxhc3QpLShjaGlsZHxvZi10eXBlKSg/OlxcKCIgKyB3aGl0ZXNwYWNlICsKCQkJIiooZXZlbnxvZGR8KChbKy1dfCkoXFxkKilufCkiICsgd2hpdGVzcGFjZSArICIqKD86KFsrLV18KSIgKyB3aGl0ZXNwYWNlICsKCQkJIiooXFxkKyl8KSkiICsgd2hpdGVzcGFjZSArICIqXFwpfCkiLCAiaSIgKSwKCQkiYm9vbCI6IG5ldyBSZWdFeHAoICJeKD86IiArIGJvb2xlYW5zICsgIikkIiwgImkiICksCgkJLy8gRm9yIHVzZSBpbiBsaWJyYXJpZXMgaW1wbGVtZW50aW5nIC5pcygpCgkJLy8gV2UgdXNlIHRoaXMgZm9yIFBPUyBtYXRjaGluZyBpbiBgc2VsZWN0YAoJCSJuZWVkc0NvbnRleHQiOiBuZXcgUmVnRXhwKCAiXiIgKyB3aGl0ZXNwYWNlICsgIipbPit+XXw6KGV2ZW58b2RkfGVxfGd0fGx0fG50aHxmaXJzdHxsYXN0KSg/OlxcKCIgKwoJCQl3aGl0ZXNwYWNlICsgIiooKD86LVxcZCk/XFxkKikiICsgd2hpdGVzcGFjZSArICIqXFwpfCkoPz1bXi1dfCQpIiwgImkiICkKCX0sCgoJcmlucHV0cyA9IC9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2ksCglyaGVhZGVyID0gL15oXGQkL2ksCgoJcm5hdGl2ZSA9IC9eW157XStce1xzKlxbbmF0aXZlIFx3LywKCgkvLyBFYXNpbHktcGFyc2VhYmxlL3JldHJpZXZhYmxlIElEIG9yIFRBRyBvciBDTEFTUyBzZWxlY3RvcnMKCXJxdWlja0V4cHIgPSAvXig/OiMoW1x3LV0rKXwoXHcrKXxcLihbXHctXSspKSQvLAoKCXJzaWJsaW5nID0gL1srfl0vLAoJcmVzY2FwZSA9IC8nfFxcL2csCgoJLy8gQ1NTIGVzY2FwZXMgaHR0cDovL3d3dy53My5vcmcvVFIvQ1NTMjEvc3luZGF0YS5odG1sI2VzY2FwZWQtY2hhcmFjdGVycwoJcnVuZXNjYXBlID0gbmV3IFJlZ0V4cCggIlxcXFwoW1xcZGEtZl17MSw2fSIgKyB3aGl0ZXNwYWNlICsgIj98KCIgKyB3aGl0ZXNwYWNlICsgIil8LikiLCAiaWciICksCglmdW5lc2NhcGUgPSBmdW5jdGlvbiggXywgZXNjYXBlZCwgZXNjYXBlZFdoaXRlc3BhY2UgKSB7CgkJdmFyIGhpZ2ggPSAiMHgiICsgZXNjYXBlZCAtIDB4MTAwMDA7CgkJLy8gTmFOIG1lYW5zIG5vbi1jb2RlcG9pbnQKCQkvLyBTdXBwb3J0OiBGaXJlZm94PDI0CgkJLy8gV29ya2Fyb3VuZCBlcnJvbmVvdXMgbnVtZXJpYyBpbnRlcnByZXRhdGlvbiBvZiArIjB4IgoJCXJldHVybiBoaWdoICE9PSBoaWdoIHx8IGVzY2FwZWRXaGl0ZXNwYWNlID8KCQkJZXNjYXBlZCA6CgkJCWhpZ2ggPCAwID8KCQkJCS8vIEJNUCBjb2RlcG9pbnQKCQkJCVN0cmluZy5mcm9tQ2hhckNvZGUoIGhpZ2ggKyAweDEwMDAwICkgOgoJCQkJLy8gU3VwcGxlbWVudGFsIFBsYW5lIGNvZGVwb2ludCAoc3Vycm9nYXRlIHBhaXIpCgkJCQlTdHJpbmcuZnJvbUNoYXJDb2RlKCBoaWdoID4+IDEwIHwgMHhEODAwLCBoaWdoICYgMHgzRkYgfCAweERDMDAgKTsKCX0sCgoJLy8gVXNlZCBmb3IgaWZyYW1lcwoJLy8gU2VlIHNldERvY3VtZW50KCkKCS8vIFJlbW92aW5nIHRoZSBmdW5jdGlvbiB3cmFwcGVyIGNhdXNlcyBhICJQZXJtaXNzaW9uIERlbmllZCIKCS8vIGVycm9yIGluIElFCgl1bmxvYWRIYW5kbGVyID0gZnVuY3Rpb24oKSB7CgkJc2V0RG9jdW1lbnQoKTsKCX07CgovLyBPcHRpbWl6ZSBmb3IgcHVzaC5hcHBseSggXywgTm9kZUxpc3QgKQp0cnkgewoJcHVzaC5hcHBseSgKCQkoYXJyID0gc2xpY2UuY2FsbCggcHJlZmVycmVkRG9jLmNoaWxkTm9kZXMgKSksCgkJcHJlZmVycmVkRG9jLmNoaWxkTm9kZXMKCSk7CgkvLyBTdXBwb3J0OiBBbmRyb2lkPDQuMAoJLy8gRGV0ZWN0IHNpbGVudGx5IGZhaWxpbmcgcHVzaC5hcHBseQoJYXJyWyBwcmVmZXJyZWREb2MuY2hpbGROb2Rlcy5sZW5ndGggXS5ub2RlVHlwZTsKfSBjYXRjaCAoIGUgKSB7CglwdXNoID0geyBhcHBseTogYXJyLmxlbmd0aCA/CgoJCS8vIExldmVyYWdlIHNsaWNlIGlmIHBvc3NpYmxlCgkJZnVuY3Rpb24oIHRhcmdldCwgZWxzICkgewoJCQlwdXNoX25hdGl2ZS5hcHBseSggdGFyZ2V0LCBzbGljZS5jYWxsKGVscykgKTsKCQl9IDoKCgkJLy8gU3VwcG9ydDogSUU8OQoJCS8vIE90aGVyd2lzZSBhcHBlbmQgZGlyZWN0bHkKCQlmdW5jdGlvbiggdGFyZ2V0LCBlbHMgKSB7CgkJCXZhciBqID0gdGFyZ2V0Lmxlbmd0aCwKCQkJCWkgPSAwOwoJCQkvLyBDYW4ndCB0cnVzdCBOb2RlTGlzdC5sZW5ndGgKCQkJd2hpbGUgKCAodGFyZ2V0W2orK10gPSBlbHNbaSsrXSkgKSB7fQoJCQl0YXJnZXQubGVuZ3RoID0gaiAtIDE7CgkJfQoJfTsKfQoKZnVuY3Rpb24gU2l6emxlKCBzZWxlY3RvciwgY29udGV4dCwgcmVzdWx0cywgc2VlZCApIHsKCXZhciBtLCBpLCBlbGVtLCBuaWQsIG5pZHNlbGVjdCwgbWF0Y2gsIGdyb3VwcywgbmV3U2VsZWN0b3IsCgkJbmV3Q29udGV4dCA9IGNvbnRleHQgJiYgY29udGV4dC5vd25lckRvY3VtZW50LAoKCQkvLyBub2RlVHlwZSBkZWZhdWx0cyB0byA5LCBzaW5jZSBjb250ZXh0IGRlZmF1bHRzIHRvIGRvY3VtZW50CgkJbm9kZVR5cGUgPSBjb250ZXh0ID8gY29udGV4dC5ub2RlVHlwZSA6IDk7CgoJcmVzdWx0cyA9IHJlc3VsdHMgfHwgW107CgoJLy8gUmV0dXJuIGVhcmx5IGZyb20gY2FsbHMgd2l0aCBpbnZhbGlkIHNlbGVjdG9yIG9yIGNvbnRleHQKCWlmICggdHlwZW9mIHNlbGVjdG9yICE9PSAic3RyaW5nIiB8fCAhc2VsZWN0b3IgfHwKCQlub2RlVHlwZSAhPT0gMSAmJiBub2RlVHlwZSAhPT0gOSAmJiBub2RlVHlwZSAhPT0gMTEgKSB7CgoJCXJldHVybiByZXN1bHRzOwoJfQoKCS8vIFRyeSB0byBzaG9ydGN1dCBmaW5kIG9wZXJhdGlvbnMgKGFzIG9wcG9zZWQgdG8gZmlsdGVycykgaW4gSFRNTCBkb2N1bWVudHMKCWlmICggIXNlZWQgKSB7CgoJCWlmICggKCBjb250ZXh0ID8gY29udGV4dC5vd25lckRvY3VtZW50IHx8IGNvbnRleHQgOiBwcmVmZXJyZWREb2MgKSAhPT0gZG9jdW1lbnQgKSB7CgkJCXNldERvY3VtZW50KCBjb250ZXh0ICk7CgkJfQoJCWNvbnRleHQgPSBjb250ZXh0IHx8IGRvY3VtZW50OwoKCQlpZiAoIGRvY3VtZW50SXNIVE1MICkgewoKCQkJLy8gSWYgdGhlIHNlbGVjdG9yIGlzIHN1ZmZpY2llbnRseSBzaW1wbGUsIHRyeSB1c2luZyBhICJnZXQqQnkqIiBET00gbWV0aG9kCgkJCS8vIChleGNlcHRpbmcgRG9jdW1lbnRGcmFnbWVudCBjb250ZXh0LCB3aGVyZSB0aGUgbWV0aG9kcyBkb24ndCBleGlzdCkKCQkJaWYgKCBub2RlVHlwZSAhPT0gMTEgJiYgKG1hdGNoID0gcnF1aWNrRXhwci5leGVjKCBzZWxlY3RvciApKSApIHsKCgkJCQkvLyBJRCBzZWxlY3RvcgoJCQkJaWYgKCAobSA9IG1hdGNoWzFdKSApIHsKCgkJCQkJLy8gRG9jdW1lbnQgY29udGV4dAoJCQkJCWlmICggbm9kZVR5cGUgPT09IDkgKSB7CgkJCQkJCWlmICggKGVsZW0gPSBjb250ZXh0LmdldEVsZW1lbnRCeUlkKCBtICkpICkgewoKCQkJCQkJCS8vIFN1cHBvcnQ6IElFLCBPcGVyYSwgV2Via2l0CgkJCQkJCQkvLyBUT0RPOiBpZGVudGlmeSB2ZXJzaW9ucwoJCQkJCQkJLy8gZ2V0RWxlbWVudEJ5SWQgY2FuIG1hdGNoIGVsZW1lbnRzIGJ5IG5hbWUgaW5zdGVhZCBvZiBJRAoJCQkJCQkJaWYgKCBlbGVtLmlkID09PSBtICkgewoJCQkJCQkJCXJlc3VsdHMucHVzaCggZWxlbSApOwoJCQkJCQkJCXJldHVybiByZXN1bHRzOwoJCQkJCQkJfQoJCQkJCQl9IGVsc2UgewoJCQkJCQkJcmV0dXJuIHJlc3VsdHM7CgkJCQkJCX0KCgkJCQkJLy8gRWxlbWVudCBjb250ZXh0CgkJCQkJfSBlbHNlIHsKCgkJCQkJCS8vIFN1cHBvcnQ6IElFLCBPcGVyYSwgV2Via2l0CgkJCQkJCS8vIFRPRE86IGlkZW50aWZ5IHZlcnNpb25zCgkJCQkJCS8vIGdldEVsZW1lbnRCeUlkIGNhbiBtYXRjaCBlbGVtZW50cyBieSBuYW1lIGluc3RlYWQgb2YgSUQKCQkJCQkJaWYgKCBuZXdDb250ZXh0ICYmIChlbGVtID0gbmV3Q29udGV4dC5nZXRFbGVtZW50QnlJZCggbSApKSAmJgoJCQkJCQkJY29udGFpbnMoIGNvbnRleHQsIGVsZW0gKSAmJgoJCQkJCQkJZWxlbS5pZCA9PT0gbSApIHsKCgkJCQkJCQlyZXN1bHRzLnB1c2goIGVsZW0gKTsKCQkJCQkJCXJldHVybiByZXN1bHRzOwoJCQkJCQl9CgkJCQkJfQoKCQkJCS8vIFR5cGUgc2VsZWN0b3IKCQkJCX0gZWxzZSBpZiAoIG1hdGNoWzJdICkgewoJCQkJCXB1c2guYXBwbHkoIHJlc3VsdHMsIGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIHNlbGVjdG9yICkgKTsKCQkJCQlyZXR1cm4gcmVzdWx0czsKCgkJCQkvLyBDbGFzcyBzZWxlY3RvcgoJCQkJfSBlbHNlIGlmICggKG0gPSBtYXRjaFszXSkgJiYgc3VwcG9ydC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lICYmCgkJCQkJY29udGV4dC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lICkgewoKCQkJCQlwdXNoLmFwcGx5KCByZXN1bHRzLCBjb250ZXh0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoIG0gKSApOwoJCQkJCXJldHVybiByZXN1bHRzOwoJCQkJfQoJCQl9CgoJCQkvLyBUYWtlIGFkdmFudGFnZSBvZiBxdWVyeVNlbGVjdG9yQWxsCgkJCWlmICggc3VwcG9ydC5xc2EgJiYKCQkJCSFjb21waWxlckNhY2hlWyBzZWxlY3RvciArICIgIiBdICYmCgkJCQkoIXJidWdneVFTQSB8fCAhcmJ1Z2d5UVNBLnRlc3QoIHNlbGVjdG9yICkpICkgewoKCQkJCWlmICggbm9kZVR5cGUgIT09IDEgKSB7CgkJCQkJbmV3Q29udGV4dCA9IGNvbnRleHQ7CgkJCQkJbmV3U2VsZWN0b3IgPSBzZWxlY3RvcjsKCgkJCQkvLyBxU0EgbG9va3Mgb3V0c2lkZSBFbGVtZW50IGNvbnRleHQsIHdoaWNoIGlzIG5vdCB3aGF0IHdlIHdhbnQKCQkJCS8vIFRoYW5rcyB0byBBbmRyZXcgRHVwb250IGZvciB0aGlzIHdvcmthcm91bmQgdGVjaG5pcXVlCgkJCQkvLyBTdXBwb3J0OiBJRSA8PTgKCQkJCS8vIEV4Y2x1ZGUgb2JqZWN0IGVsZW1lbnRzCgkJCQl9IGVsc2UgaWYgKCBjb250ZXh0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgIT09ICJvYmplY3QiICkgewoKCQkJCQkvLyBDYXB0dXJlIHRoZSBjb250ZXh0IElELCBzZXR0aW5nIGl0IGZpcnN0IGlmIG5lY2Vzc2FyeQoJCQkJCWlmICggKG5pZCA9IGNvbnRleHQuZ2V0QXR0cmlidXRlKCAiaWQiICkpICkgewoJCQkJCQluaWQgPSBuaWQucmVwbGFjZSggcmVzY2FwZSwgIlxcJCYiICk7CgkJCQkJfSBlbHNlIHsKCQkJCQkJY29udGV4dC5zZXRBdHRyaWJ1dGUoICJpZCIsIChuaWQgPSBleHBhbmRvKSApOwoJCQkJCX0KCgkJCQkJLy8gUHJlZml4IGV2ZXJ5IHNlbGVjdG9yIGluIHRoZSBsaXN0CgkJCQkJZ3JvdXBzID0gdG9rZW5pemUoIHNlbGVjdG9yICk7CgkJCQkJaSA9IGdyb3Vwcy5sZW5ndGg7CgkJCQkJbmlkc2VsZWN0ID0gcmlkZW50aWZpZXIudGVzdCggbmlkICkgPyAiIyIgKyBuaWQgOiAiW2lkPSciICsgbmlkICsgIiddIjsKCQkJCQl3aGlsZSAoIGktLSApIHsKCQkJCQkJZ3JvdXBzW2ldID0gbmlkc2VsZWN0ICsgIiAiICsgdG9TZWxlY3RvciggZ3JvdXBzW2ldICk7CgkJCQkJfQoJCQkJCW5ld1NlbGVjdG9yID0gZ3JvdXBzLmpvaW4oICIsIiApOwoKCQkJCQkvLyBFeHBhbmQgY29udGV4dCBmb3Igc2libGluZyBzZWxlY3RvcnMKCQkJCQluZXdDb250ZXh0ID0gcnNpYmxpbmcudGVzdCggc2VsZWN0b3IgKSAmJiB0ZXN0Q29udGV4dCggY29udGV4dC5wYXJlbnROb2RlICkgfHwKCQkJCQkJY29udGV4dDsKCQkJCX0KCgkJCQlpZiAoIG5ld1NlbGVjdG9yICkgewoJCQkJCXRyeSB7CgkJCQkJCXB1c2guYXBwbHkoIHJlc3VsdHMsCgkJCQkJCQluZXdDb250ZXh0LnF1ZXJ5U2VsZWN0b3JBbGwoIG5ld1NlbGVjdG9yICkKCQkJCQkJKTsKCQkJCQkJcmV0dXJuIHJlc3VsdHM7CgkJCQkJfSBjYXRjaCAoIHFzYUVycm9yICkgewoJCQkJCX0gZmluYWxseSB7CgkJCQkJCWlmICggbmlkID09PSBleHBhbmRvICkgewoJCQkJCQkJY29udGV4dC5yZW1vdmVBdHRyaWJ1dGUoICJpZCIgKTsKCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJfQoJCX0KCX0KCgkvLyBBbGwgb3RoZXJzCglyZXR1cm4gc2VsZWN0KCBzZWxlY3Rvci5yZXBsYWNlKCBydHJpbSwgIiQxIiApLCBjb250ZXh0LCByZXN1bHRzLCBzZWVkICk7Cn0KCi8qKgogKiBDcmVhdGUga2V5LXZhbHVlIGNhY2hlcyBvZiBsaW1pdGVkIHNpemUKICogQHJldHVybnMge2Z1bmN0aW9uKHN0cmluZywgb2JqZWN0KX0gUmV0dXJucyB0aGUgT2JqZWN0IGRhdGEgYWZ0ZXIgc3RvcmluZyBpdCBvbiBpdHNlbGYgd2l0aAogKglwcm9wZXJ0eSBuYW1lIHRoZSAoc3BhY2Utc3VmZml4ZWQpIHN0cmluZyBhbmQgKGlmIHRoZSBjYWNoZSBpcyBsYXJnZXIgdGhhbiBFeHByLmNhY2hlTGVuZ3RoKQogKglkZWxldGluZyB0aGUgb2xkZXN0IGVudHJ5CiAqLwpmdW5jdGlvbiBjcmVhdGVDYWNoZSgpIHsKCXZhciBrZXlzID0gW107CgoJZnVuY3Rpb24gY2FjaGUoIGtleSwgdmFsdWUgKSB7CgkJLy8gVXNlIChrZXkgKyAiICIpIHRvIGF2b2lkIGNvbGxpc2lvbiB3aXRoIG5hdGl2ZSBwcm90b3R5cGUgcHJvcGVydGllcyAoc2VlIElzc3VlICMxNTcpCgkJaWYgKCBrZXlzLnB1c2goIGtleSArICIgIiApID4gRXhwci5jYWNoZUxlbmd0aCApIHsKCQkJLy8gT25seSBrZWVwIHRoZSBtb3N0IHJlY2VudCBlbnRyaWVzCgkJCWRlbGV0ZSBjYWNoZVsga2V5cy5zaGlmdCgpIF07CgkJfQoJCXJldHVybiAoY2FjaGVbIGtleSArICIgIiBdID0gdmFsdWUpOwoJfQoJcmV0dXJuIGNhY2hlOwp9CgovKioKICogTWFyayBhIGZ1bmN0aW9uIGZvciBzcGVjaWFsIHVzZSBieSBTaXp6bGUKICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIHRvIG1hcmsKICovCmZ1bmN0aW9uIG1hcmtGdW5jdGlvbiggZm4gKSB7CglmblsgZXhwYW5kbyBdID0gdHJ1ZTsKCXJldHVybiBmbjsKfQoKLyoqCiAqIFN1cHBvcnQgdGVzdGluZyB1c2luZyBhbiBlbGVtZW50CiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFBhc3NlZCB0aGUgY3JlYXRlZCBkaXYgYW5kIGV4cGVjdHMgYSBib29sZWFuIHJlc3VsdAogKi8KZnVuY3Rpb24gYXNzZXJ0KCBmbiApIHsKCXZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCgl0cnkgewoJCXJldHVybiAhIWZuKCBkaXYgKTsKCX0gY2F0Y2ggKGUpIHsKCQlyZXR1cm4gZmFsc2U7Cgl9IGZpbmFsbHkgewoJCS8vIFJlbW92ZSBmcm9tIGl0cyBwYXJlbnQgYnkgZGVmYXVsdAoJCWlmICggZGl2LnBhcmVudE5vZGUgKSB7CgkJCWRpdi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKCBkaXYgKTsKCQl9CgkJLy8gcmVsZWFzZSBtZW1vcnkgaW4gSUUKCQlkaXYgPSBudWxsOwoJfQp9CgovKioKICogQWRkcyB0aGUgc2FtZSBoYW5kbGVyIGZvciBhbGwgb2YgdGhlIHNwZWNpZmllZCBhdHRycwogKiBAcGFyYW0ge1N0cmluZ30gYXR0cnMgUGlwZS1zZXBhcmF0ZWQgbGlzdCBvZiBhdHRyaWJ1dGVzCiAqIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZXIgVGhlIG1ldGhvZCB0aGF0IHdpbGwgYmUgYXBwbGllZAogKi8KZnVuY3Rpb24gYWRkSGFuZGxlKCBhdHRycywgaGFuZGxlciApIHsKCXZhciBhcnIgPSBhdHRycy5zcGxpdCgifCIpLAoJCWkgPSBhcnIubGVuZ3RoOwoKCXdoaWxlICggaS0tICkgewoJCUV4cHIuYXR0ckhhbmRsZVsgYXJyW2ldIF0gPSBoYW5kbGVyOwoJfQp9CgovKioKICogQ2hlY2tzIGRvY3VtZW50IG9yZGVyIG9mIHR3byBzaWJsaW5ncwogKiBAcGFyYW0ge0VsZW1lbnR9IGEKICogQHBhcmFtIHtFbGVtZW50fSBiCiAqIEByZXR1cm5zIHtOdW1iZXJ9IFJldHVybnMgbGVzcyB0aGFuIDAgaWYgYSBwcmVjZWRlcyBiLCBncmVhdGVyIHRoYW4gMCBpZiBhIGZvbGxvd3MgYgogKi8KZnVuY3Rpb24gc2libGluZ0NoZWNrKCBhLCBiICkgewoJdmFyIGN1ciA9IGIgJiYgYSwKCQlkaWZmID0gY3VyICYmIGEubm9kZVR5cGUgPT09IDEgJiYgYi5ub2RlVHlwZSA9PT0gMSAmJgoJCQkoIH5iLnNvdXJjZUluZGV4IHx8IE1BWF9ORUdBVElWRSApIC0KCQkJKCB+YS5zb3VyY2VJbmRleCB8fCBNQVhfTkVHQVRJVkUgKTsKCgkvLyBVc2UgSUUgc291cmNlSW5kZXggaWYgYXZhaWxhYmxlIG9uIGJvdGggbm9kZXMKCWlmICggZGlmZiApIHsKCQlyZXR1cm4gZGlmZjsKCX0KCgkvLyBDaGVjayBpZiBiIGZvbGxvd3MgYQoJaWYgKCBjdXIgKSB7CgkJd2hpbGUgKCAoY3VyID0gY3VyLm5leHRTaWJsaW5nKSApIHsKCQkJaWYgKCBjdXIgPT09IGIgKSB7CgkJCQlyZXR1cm4gLTE7CgkJCX0KCQl9Cgl9CgoJcmV0dXJuIGEgPyAxIDogLTE7Cn0KCi8qKgogKiBSZXR1cm5zIGEgZnVuY3Rpb24gdG8gdXNlIGluIHBzZXVkb3MgZm9yIGlucHV0IHR5cGVzCiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlCiAqLwpmdW5jdGlvbiBjcmVhdGVJbnB1dFBzZXVkbyggdHlwZSApIHsKCXJldHVybiBmdW5jdGlvbiggZWxlbSApIHsKCQl2YXIgbmFtZSA9IGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTsKCQlyZXR1cm4gbmFtZSA9PT0gImlucHV0IiAmJiBlbGVtLnR5cGUgPT09IHR5cGU7Cgl9Owp9CgovKioKICogUmV0dXJucyBhIGZ1bmN0aW9uIHRvIHVzZSBpbiBwc2V1ZG9zIGZvciBidXR0b25zCiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlCiAqLwpmdW5jdGlvbiBjcmVhdGVCdXR0b25Qc2V1ZG8oIHR5cGUgKSB7CglyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7CgkJdmFyIG5hbWUgPSBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7CgkJcmV0dXJuIChuYW1lID09PSAiaW5wdXQiIHx8IG5hbWUgPT09ICJidXR0b24iKSAmJiBlbGVtLnR5cGUgPT09IHR5cGU7Cgl9Owp9CgovKioKICogUmV0dXJucyBhIGZ1bmN0aW9uIHRvIHVzZSBpbiBwc2V1ZG9zIGZvciBwb3NpdGlvbmFscwogKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbgogKi8KZnVuY3Rpb24gY3JlYXRlUG9zaXRpb25hbFBzZXVkbyggZm4gKSB7CglyZXR1cm4gbWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCBhcmd1bWVudCApIHsKCQlhcmd1bWVudCA9ICthcmd1bWVudDsKCQlyZXR1cm4gbWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCBzZWVkLCBtYXRjaGVzICkgewoJCQl2YXIgaiwKCQkJCW1hdGNoSW5kZXhlcyA9IGZuKCBbXSwgc2VlZC5sZW5ndGgsIGFyZ3VtZW50ICksCgkJCQlpID0gbWF0Y2hJbmRleGVzLmxlbmd0aDsKCgkJCS8vIE1hdGNoIGVsZW1lbnRzIGZvdW5kIGF0IHRoZSBzcGVjaWZpZWQgaW5kZXhlcwoJCQl3aGlsZSAoIGktLSApIHsKCQkJCWlmICggc2VlZFsgKGogPSBtYXRjaEluZGV4ZXNbaV0pIF0gKSB7CgkJCQkJc2VlZFtqXSA9ICEobWF0Y2hlc1tqXSA9IHNlZWRbal0pOwoJCQkJfQoJCQl9CgkJfSk7Cgl9KTsKfQoKLyoqCiAqIENoZWNrcyBhIG5vZGUgZm9yIHZhbGlkaXR5IGFzIGEgU2l6emxlIGNvbnRleHQKICogQHBhcmFtIHtFbGVtZW50fE9iamVjdD19IGNvbnRleHQKICogQHJldHVybnMge0VsZW1lbnR8T2JqZWN0fEJvb2xlYW59IFRoZSBpbnB1dCBub2RlIGlmIGFjY2VwdGFibGUsIG90aGVyd2lzZSBhIGZhbHN5IHZhbHVlCiAqLwpmdW5jdGlvbiB0ZXN0Q29udGV4dCggY29udGV4dCApIHsKCXJldHVybiBjb250ZXh0ICYmIHR5cGVvZiBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lICE9PSAidW5kZWZpbmVkIiAmJiBjb250ZXh0Owp9CgovLyBFeHBvc2Ugc3VwcG9ydCB2YXJzIGZvciBjb252ZW5pZW5jZQpzdXBwb3J0ID0gU2l6emxlLnN1cHBvcnQgPSB7fTsKCi8qKgogKiBEZXRlY3RzIFhNTCBub2RlcwogKiBAcGFyYW0ge0VsZW1lbnR8T2JqZWN0fSBlbGVtIEFuIGVsZW1lbnQgb3IgYSBkb2N1bWVudAogKiBAcmV0dXJucyB7Qm9vbGVhbn0gVHJ1ZSBpZmYgZWxlbSBpcyBhIG5vbi1IVE1MIFhNTCBub2RlCiAqLwppc1hNTCA9IFNpenpsZS5pc1hNTCA9IGZ1bmN0aW9uKCBlbGVtICkgewoJLy8gZG9jdW1lbnRFbGVtZW50IGlzIHZlcmlmaWVkIGZvciBjYXNlcyB3aGVyZSBpdCBkb2Vzbid0IHlldCBleGlzdAoJLy8gKHN1Y2ggYXMgbG9hZGluZyBpZnJhbWVzIGluIElFIC0gIzQ4MzMpCgl2YXIgZG9jdW1lbnRFbGVtZW50ID0gZWxlbSAmJiAoZWxlbS5vd25lckRvY3VtZW50IHx8IGVsZW0pLmRvY3VtZW50RWxlbWVudDsKCXJldHVybiBkb2N1bWVudEVsZW1lbnQgPyBkb2N1bWVudEVsZW1lbnQubm9kZU5hbWUgIT09ICJIVE1MIiA6IGZhbHNlOwp9OwoKLyoqCiAqIFNldHMgZG9jdW1lbnQtcmVsYXRlZCB2YXJpYWJsZXMgb25jZSBiYXNlZCBvbiB0aGUgY3VycmVudCBkb2N1bWVudAogKiBAcGFyYW0ge0VsZW1lbnR8T2JqZWN0fSBbZG9jXSBBbiBlbGVtZW50IG9yIGRvY3VtZW50IG9iamVjdCB0byB1c2UgdG8gc2V0IHRoZSBkb2N1bWVudAogKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBjdXJyZW50IGRvY3VtZW50CiAqLwpzZXREb2N1bWVudCA9IFNpenpsZS5zZXREb2N1bWVudCA9IGZ1bmN0aW9uKCBub2RlICkgewoJdmFyIGhhc0NvbXBhcmUsIHBhcmVudCwKCQlkb2MgPSBub2RlID8gbm9kZS5vd25lckRvY3VtZW50IHx8IG5vZGUgOiBwcmVmZXJyZWREb2M7CgoJLy8gUmV0dXJuIGVhcmx5IGlmIGRvYyBpcyBpbnZhbGlkIG9yIGFscmVhZHkgc2VsZWN0ZWQKCWlmICggZG9jID09PSBkb2N1bWVudCB8fCBkb2Mubm9kZVR5cGUgIT09IDkgfHwgIWRvYy5kb2N1bWVudEVsZW1lbnQgKSB7CgkJcmV0dXJuIGRvY3VtZW50OwoJfQoKCS8vIFVwZGF0ZSBnbG9iYWwgdmFyaWFibGVzCglkb2N1bWVudCA9IGRvYzsKCWRvY0VsZW0gPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7Cglkb2N1bWVudElzSFRNTCA9ICFpc1hNTCggZG9jdW1lbnQgKTsKCgkvLyBTdXBwb3J0OiBJRSA5LTExLCBFZGdlCgkvLyBBY2Nlc3NpbmcgaWZyYW1lIGRvY3VtZW50cyBhZnRlciB1bmxvYWQgdGhyb3dzICJwZXJtaXNzaW9uIGRlbmllZCIgZXJyb3JzIChqUXVlcnkgIzEzOTM2KQoJaWYgKCAocGFyZW50ID0gZG9jdW1lbnQuZGVmYXVsdFZpZXcpICYmIHBhcmVudC50b3AgIT09IHBhcmVudCApIHsKCQkvLyBTdXBwb3J0OiBJRSAxMQoJCWlmICggcGFyZW50LmFkZEV2ZW50TGlzdGVuZXIgKSB7CgkJCXBhcmVudC5hZGRFdmVudExpc3RlbmVyKCAidW5sb2FkIiwgdW5sb2FkSGFuZGxlciwgZmFsc2UgKTsKCgkJLy8gU3VwcG9ydDogSUUgOSAtIDEwIG9ubHkKCQl9IGVsc2UgaWYgKCBwYXJlbnQuYXR0YWNoRXZlbnQgKSB7CgkJCXBhcmVudC5hdHRhY2hFdmVudCggIm9udW5sb2FkIiwgdW5sb2FkSGFuZGxlciApOwoJCX0KCX0KCgkvKiBBdHRyaWJ1dGVzCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovCgoJLy8gU3VwcG9ydDogSUU8OAoJLy8gVmVyaWZ5IHRoYXQgZ2V0QXR0cmlidXRlIHJlYWxseSByZXR1cm5zIGF0dHJpYnV0ZXMgYW5kIG5vdCBwcm9wZXJ0aWVzCgkvLyAoZXhjZXB0aW5nIElFOCBib29sZWFucykKCXN1cHBvcnQuYXR0cmlidXRlcyA9IGFzc2VydChmdW5jdGlvbiggZGl2ICkgewoJCWRpdi5jbGFzc05hbWUgPSAiaSI7CgkJcmV0dXJuICFkaXYuZ2V0QXR0cmlidXRlKCJjbGFzc05hbWUiKTsKCX0pOwoKCS8qIGdldEVsZW1lbnQocylCeSoKCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi8KCgkvLyBDaGVjayBpZiBnZXRFbGVtZW50c0J5VGFnTmFtZSgiKiIpIHJldHVybnMgb25seSBlbGVtZW50cwoJc3VwcG9ydC5nZXRFbGVtZW50c0J5VGFnTmFtZSA9IGFzc2VydChmdW5jdGlvbiggZGl2ICkgewoJCWRpdi5hcHBlbmRDaGlsZCggZG9jdW1lbnQuY3JlYXRlQ29tbWVudCgiIikgKTsKCQlyZXR1cm4gIWRpdi5nZXRFbGVtZW50c0J5VGFnTmFtZSgiKiIpLmxlbmd0aDsKCX0pOwoKCS8vIFN1cHBvcnQ6IElFPDkKCXN1cHBvcnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSA9IHJuYXRpdmUudGVzdCggZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSApOwoKCS8vIFN1cHBvcnQ6IElFPDEwCgkvLyBDaGVjayBpZiBnZXRFbGVtZW50QnlJZCByZXR1cm5zIGVsZW1lbnRzIGJ5IG5hbWUKCS8vIFRoZSBicm9rZW4gZ2V0RWxlbWVudEJ5SWQgbWV0aG9kcyBkb24ndCBwaWNrIHVwIHByb2dyYW1hdGljYWxseS1zZXQgbmFtZXMsCgkvLyBzbyB1c2UgYSByb3VuZGFib3V0IGdldEVsZW1lbnRzQnlOYW1lIHRlc3QKCXN1cHBvcnQuZ2V0QnlJZCA9IGFzc2VydChmdW5jdGlvbiggZGl2ICkgewoJCWRvY0VsZW0uYXBwZW5kQ2hpbGQoIGRpdiApLmlkID0gZXhwYW5kbzsKCQlyZXR1cm4gIWRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lIHx8ICFkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZSggZXhwYW5kbyApLmxlbmd0aDsKCX0pOwoKCS8vIElEIGZpbmQgYW5kIGZpbHRlcgoJaWYgKCBzdXBwb3J0LmdldEJ5SWQgKSB7CgkJRXhwci5maW5kWyJJRCJdID0gZnVuY3Rpb24oIGlkLCBjb250ZXh0ICkgewoJCQlpZiAoIHR5cGVvZiBjb250ZXh0LmdldEVsZW1lbnRCeUlkICE9PSAidW5kZWZpbmVkIiAmJiBkb2N1bWVudElzSFRNTCApIHsKCQkJCXZhciBtID0gY29udGV4dC5nZXRFbGVtZW50QnlJZCggaWQgKTsKCQkJCXJldHVybiBtID8gWyBtIF0gOiBbXTsKCQkJfQoJCX07CgkJRXhwci5maWx0ZXJbIklEIl0gPSBmdW5jdGlvbiggaWQgKSB7CgkJCXZhciBhdHRySWQgPSBpZC5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApOwoJCQlyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7CgkJCQlyZXR1cm4gZWxlbS5nZXRBdHRyaWJ1dGUoImlkIikgPT09IGF0dHJJZDsKCQkJfTsKCQl9OwoJfSBlbHNlIHsKCQkvLyBTdXBwb3J0OiBJRTYvNwoJCS8vIGdldEVsZW1lbnRCeUlkIGlzIG5vdCByZWxpYWJsZSBhcyBhIGZpbmQgc2hvcnRjdXQKCQlkZWxldGUgRXhwci5maW5kWyJJRCJdOwoKCQlFeHByLmZpbHRlclsiSUQiXSA9ICBmdW5jdGlvbiggaWQgKSB7CgkJCXZhciBhdHRySWQgPSBpZC5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApOwoJCQlyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7CgkJCQl2YXIgbm9kZSA9IHR5cGVvZiBlbGVtLmdldEF0dHJpYnV0ZU5vZGUgIT09ICJ1bmRlZmluZWQiICYmCgkJCQkJZWxlbS5nZXRBdHRyaWJ1dGVOb2RlKCJpZCIpOwoJCQkJcmV0dXJuIG5vZGUgJiYgbm9kZS52YWx1ZSA9PT0gYXR0cklkOwoJCQl9OwoJCX07Cgl9CgoJLy8gVGFnCglFeHByLmZpbmRbIlRBRyJdID0gc3VwcG9ydC5nZXRFbGVtZW50c0J5VGFnTmFtZSA/CgkJZnVuY3Rpb24oIHRhZywgY29udGV4dCApIHsKCQkJaWYgKCB0eXBlb2YgY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSAhPT0gInVuZGVmaW5lZCIgKSB7CgkJCQlyZXR1cm4gY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSggdGFnICk7CgoJCQkvLyBEb2N1bWVudEZyYWdtZW50IG5vZGVzIGRvbid0IGhhdmUgZ0VCVE4KCQkJfSBlbHNlIGlmICggc3VwcG9ydC5xc2EgKSB7CgkJCQlyZXR1cm4gY29udGV4dC5xdWVyeVNlbGVjdG9yQWxsKCB0YWcgKTsKCQkJfQoJCX0gOgoKCQlmdW5jdGlvbiggdGFnLCBjb250ZXh0ICkgewoJCQl2YXIgZWxlbSwKCQkJCXRtcCA9IFtdLAoJCQkJaSA9IDAsCgkJCQkvLyBCeSBoYXBweSBjb2luY2lkZW5jZSwgYSAoYnJva2VuKSBnRUJUTiBhcHBlYXJzIG9uIERvY3VtZW50RnJhZ21lbnQgbm9kZXMgdG9vCgkJCQlyZXN1bHRzID0gY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSggdGFnICk7CgoJCQkvLyBGaWx0ZXIgb3V0IHBvc3NpYmxlIGNvbW1lbnRzCgkJCWlmICggdGFnID09PSAiKiIgKSB7CgkJCQl3aGlsZSAoIChlbGVtID0gcmVzdWx0c1tpKytdKSApIHsKCQkJCQlpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7CgkJCQkJCXRtcC5wdXNoKCBlbGVtICk7CgkJCQkJfQoJCQkJfQoKCQkJCXJldHVybiB0bXA7CgkJCX0KCQkJcmV0dXJuIHJlc3VsdHM7CgkJfTsKCgkvLyBDbGFzcwoJRXhwci5maW5kWyJDTEFTUyJdID0gc3VwcG9ydC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lICYmIGZ1bmN0aW9uKCBjbGFzc05hbWUsIGNvbnRleHQgKSB7CgkJaWYgKCB0eXBlb2YgY29udGV4dC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lICE9PSAidW5kZWZpbmVkIiAmJiBkb2N1bWVudElzSFRNTCApIHsKCQkJcmV0dXJuIGNvbnRleHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSggY2xhc3NOYW1lICk7CgkJfQoJfTsKCgkvKiBRU0EvbWF0Y2hlc1NlbGVjdG9yCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovCgoJLy8gUVNBIGFuZCBtYXRjaGVzU2VsZWN0b3Igc3VwcG9ydAoKCS8vIG1hdGNoZXNTZWxlY3Rvcig6YWN0aXZlKSByZXBvcnRzIGZhbHNlIHdoZW4gdHJ1ZSAoSUU5L09wZXJhIDExLjUpCglyYnVnZ3lNYXRjaGVzID0gW107CgoJLy8gcVNhKDpmb2N1cykgcmVwb3J0cyBmYWxzZSB3aGVuIHRydWUgKENocm9tZSAyMSkKCS8vIFdlIGFsbG93IHRoaXMgYmVjYXVzZSBvZiBhIGJ1ZyBpbiBJRTgvOSB0aGF0IHRocm93cyBhbiBlcnJvcgoJLy8gd2hlbmV2ZXIgYGRvY3VtZW50LmFjdGl2ZUVsZW1lbnRgIGlzIGFjY2Vzc2VkIG9uIGFuIGlmcmFtZQoJLy8gU28sIHdlIGFsbG93IDpmb2N1cyB0byBwYXNzIHRocm91Z2ggUVNBIGFsbCB0aGUgdGltZSB0byBhdm9pZCB0aGUgSUUgZXJyb3IKCS8vIFNlZSBodHRwOi8vYnVncy5qcXVlcnkuY29tL3RpY2tldC8xMzM3OAoJcmJ1Z2d5UVNBID0gW107CgoJaWYgKCAoc3VwcG9ydC5xc2EgPSBybmF0aXZlLnRlc3QoIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwgKSkgKSB7CgkJLy8gQnVpbGQgUVNBIHJlZ2V4CgkJLy8gUmVnZXggc3RyYXRlZ3kgYWRvcHRlZCBmcm9tIERpZWdvIFBlcmluaQoJCWFzc2VydChmdW5jdGlvbiggZGl2ICkgewoJCQkvLyBTZWxlY3QgaXMgc2V0IHRvIGVtcHR5IHN0cmluZyBvbiBwdXJwb3NlCgkJCS8vIFRoaXMgaXMgdG8gdGVzdCBJRSdzIHRyZWF0bWVudCBvZiBub3QgZXhwbGljaXRseQoJCQkvLyBzZXR0aW5nIGEgYm9vbGVhbiBjb250ZW50IGF0dHJpYnV0ZSwKCQkJLy8gc2luY2UgaXRzIHByZXNlbmNlIHNob3VsZCBiZSBlbm91Z2gKCQkJLy8gaHR0cDovL2J1Z3MuanF1ZXJ5LmNvbS90aWNrZXQvMTIzNTkKCQkJZG9jRWxlbS5hcHBlbmRDaGlsZCggZGl2ICkuaW5uZXJIVE1MID0gIjxhIGlkPSciICsgZXhwYW5kbyArICInPjwvYT4iICsKCQkJCSI8c2VsZWN0IGlkPSciICsgZXhwYW5kbyArICItXHJcXCcgbXNhbGxvd2NhcHR1cmU9Jyc+IiArCgkJCQkiPG9wdGlvbiBzZWxlY3RlZD0nJz48L29wdGlvbj48L3NlbGVjdD4iOwoKCQkJLy8gU3VwcG9ydDogSUU4LCBPcGVyYSAxMS0xMi4xNgoJCQkvLyBOb3RoaW5nIHNob3VsZCBiZSBzZWxlY3RlZCB3aGVuIGVtcHR5IHN0cmluZ3MgZm9sbG93IF49IG9yICQ9IG9yICo9CgkJCS8vIFRoZSB0ZXN0IGF0dHJpYnV0ZSBtdXN0IGJlIHVua25vd24gaW4gT3BlcmEgYnV0ICJzYWZlIiBmb3IgV2luUlQKCQkJLy8gaHR0cDovL21zZG4ubWljcm9zb2Z0LmNvbS9lbi11cy9saWJyYXJ5L2llL2hoNDY1Mzg4LmFzcHgjYXR0cmlidXRlX3NlY3Rpb24KCQkJaWYgKCBkaXYucXVlcnlTZWxlY3RvckFsbCgiW21zYWxsb3djYXB0dXJlXj0nJ10iKS5sZW5ndGggKSB7CgkJCQlyYnVnZ3lRU0EucHVzaCggIlsqXiRdPSIgKyB3aGl0ZXNwYWNlICsgIiooPzonJ3xcIlwiKSIgKTsKCQkJfQoKCQkJLy8gU3VwcG9ydDogSUU4CgkJCS8vIEJvb2xlYW4gYXR0cmlidXRlcyBhbmQgInZhbHVlIiBhcmUgbm90IHRyZWF0ZWQgY29ycmVjdGx5CgkJCWlmICggIWRpdi5xdWVyeVNlbGVjdG9yQWxsKCJbc2VsZWN0ZWRdIikubGVuZ3RoICkgewoJCQkJcmJ1Z2d5UVNBLnB1c2goICJcXFsiICsgd2hpdGVzcGFjZSArICIqKD86dmFsdWV8IiArIGJvb2xlYW5zICsgIikiICk7CgkJCX0KCgkJCS8vIFN1cHBvcnQ6IENocm9tZTwyOSwgQW5kcm9pZDw0LjQsIFNhZmFyaTw3LjArLCBpT1M8Ny4wKywgUGhhbnRvbUpTPDEuOS44KwoJCQlpZiAoICFkaXYucXVlcnlTZWxlY3RvckFsbCggIltpZH49IiArIGV4cGFuZG8gKyAiLV0iICkubGVuZ3RoICkgewoJCQkJcmJ1Z2d5UVNBLnB1c2goIn49Iik7CgkJCX0KCgkJCS8vIFdlYmtpdC9PcGVyYSAtIDpjaGVja2VkIHNob3VsZCByZXR1cm4gc2VsZWN0ZWQgb3B0aW9uIGVsZW1lbnRzCgkJCS8vIGh0dHA6Ly93d3cudzMub3JnL1RSLzIwMTEvUkVDLWNzczMtc2VsZWN0b3JzLTIwMTEwOTI5LyNjaGVja2VkCgkJCS8vIElFOCB0aHJvd3MgZXJyb3IgaGVyZSBhbmQgd2lsbCBub3Qgc2VlIGxhdGVyIHRlc3RzCgkJCWlmICggIWRpdi5xdWVyeVNlbGVjdG9yQWxsKCI6Y2hlY2tlZCIpLmxlbmd0aCApIHsKCQkJCXJidWdneVFTQS5wdXNoKCI6Y2hlY2tlZCIpOwoJCQl9CgoJCQkvLyBTdXBwb3J0OiBTYWZhcmkgOCssIGlPUyA4KwoJCQkvLyBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTM2ODUxCgkJCS8vIEluLXBhZ2UgYHNlbGVjdG9yI2lkIHNpYmluZy1jb21iaW5hdG9yIHNlbGVjdG9yYCBmYWlscwoJCQlpZiAoICFkaXYucXVlcnlTZWxlY3RvckFsbCggImEjIiArIGV4cGFuZG8gKyAiKyoiICkubGVuZ3RoICkgewoJCQkJcmJ1Z2d5UVNBLnB1c2goIi4jLitbK35dIik7CgkJCX0KCQl9KTsKCgkJYXNzZXJ0KGZ1bmN0aW9uKCBkaXYgKSB7CgkJCS8vIFN1cHBvcnQ6IFdpbmRvd3MgOCBOYXRpdmUgQXBwcwoJCQkvLyBUaGUgdHlwZSBhbmQgbmFtZSBhdHRyaWJ1dGVzIGFyZSByZXN0cmljdGVkIGR1cmluZyAuaW5uZXJIVE1MIGFzc2lnbm1lbnQKCQkJdmFyIGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKTsKCQkJaW5wdXQuc2V0QXR0cmlidXRlKCAidHlwZSIsICJoaWRkZW4iICk7CgkJCWRpdi5hcHBlbmRDaGlsZCggaW5wdXQgKS5zZXRBdHRyaWJ1dGUoICJuYW1lIiwgIkQiICk7CgoJCQkvLyBTdXBwb3J0OiBJRTgKCQkJLy8gRW5mb3JjZSBjYXNlLXNlbnNpdGl2aXR5IG9mIG5hbWUgYXR0cmlidXRlCgkJCWlmICggZGl2LnF1ZXJ5U2VsZWN0b3JBbGwoIltuYW1lPWRdIikubGVuZ3RoICkgewoJCQkJcmJ1Z2d5UVNBLnB1c2goICJuYW1lIiArIHdoaXRlc3BhY2UgKyAiKlsqXiR8IX5dPz0iICk7CgkJCX0KCgkJCS8vIEZGIDMuNSAtIDplbmFibGVkLzpkaXNhYmxlZCBhbmQgaGlkZGVuIGVsZW1lbnRzIChoaWRkZW4gZWxlbWVudHMgYXJlIHN0aWxsIGVuYWJsZWQpCgkJCS8vIElFOCB0aHJvd3MgZXJyb3IgaGVyZSBhbmQgd2lsbCBub3Qgc2VlIGxhdGVyIHRlc3RzCgkJCWlmICggIWRpdi5xdWVyeVNlbGVjdG9yQWxsKCI6ZW5hYmxlZCIpLmxlbmd0aCApIHsKCQkJCXJidWdneVFTQS5wdXNoKCAiOmVuYWJsZWQiLCAiOmRpc2FibGVkIiApOwoJCQl9CgoJCQkvLyBPcGVyYSAxMC0xMSBkb2VzIG5vdCB0aHJvdyBvbiBwb3N0LWNvbW1hIGludmFsaWQgcHNldWRvcwoJCQlkaXYucXVlcnlTZWxlY3RvckFsbCgiKiw6eCIpOwoJCQlyYnVnZ3lRU0EucHVzaCgiLC4qOiIpOwoJCX0pOwoJfQoKCWlmICggKHN1cHBvcnQubWF0Y2hlc1NlbGVjdG9yID0gcm5hdGl2ZS50ZXN0KCAobWF0Y2hlcyA9IGRvY0VsZW0ubWF0Y2hlcyB8fAoJCWRvY0VsZW0ud2Via2l0TWF0Y2hlc1NlbGVjdG9yIHx8CgkJZG9jRWxlbS5tb3pNYXRjaGVzU2VsZWN0b3IgfHwKCQlkb2NFbGVtLm9NYXRjaGVzU2VsZWN0b3IgfHwKCQlkb2NFbGVtLm1zTWF0Y2hlc1NlbGVjdG9yKSApKSApIHsKCgkJYXNzZXJ0KGZ1bmN0aW9uKCBkaXYgKSB7CgkJCS8vIENoZWNrIHRvIHNlZSBpZiBpdCdzIHBvc3NpYmxlIHRvIGRvIG1hdGNoZXNTZWxlY3RvcgoJCQkvLyBvbiBhIGRpc2Nvbm5lY3RlZCBub2RlIChJRSA5KQoJCQlzdXBwb3J0LmRpc2Nvbm5lY3RlZE1hdGNoID0gbWF0Y2hlcy5jYWxsKCBkaXYsICJkaXYiICk7CgoJCQkvLyBUaGlzIHNob3VsZCBmYWlsIHdpdGggYW4gZXhjZXB0aW9uCgkJCS8vIEdlY2tvIGRvZXMgbm90IGVycm9yLCByZXR1cm5zIGZhbHNlIGluc3RlYWQKCQkJbWF0Y2hlcy5jYWxsKCBkaXYsICJbcyE9JyddOngiICk7CgkJCXJidWdneU1hdGNoZXMucHVzaCggIiE9IiwgcHNldWRvcyApOwoJCX0pOwoJfQoKCXJidWdneVFTQSA9IHJidWdneVFTQS5sZW5ndGggJiYgbmV3IFJlZ0V4cCggcmJ1Z2d5UVNBLmpvaW4oInwiKSApOwoJcmJ1Z2d5TWF0Y2hlcyA9IHJidWdneU1hdGNoZXMubGVuZ3RoICYmIG5ldyBSZWdFeHAoIHJidWdneU1hdGNoZXMuam9pbigifCIpICk7CgoJLyogQ29udGFpbnMKCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi8KCWhhc0NvbXBhcmUgPSBybmF0aXZlLnRlc3QoIGRvY0VsZW0uY29tcGFyZURvY3VtZW50UG9zaXRpb24gKTsKCgkvLyBFbGVtZW50IGNvbnRhaW5zIGFub3RoZXIKCS8vIFB1cnBvc2VmdWxseSBzZWxmLWV4Y2x1c2l2ZQoJLy8gQXMgaW4sIGFuIGVsZW1lbnQgZG9lcyBub3QgY29udGFpbiBpdHNlbGYKCWNvbnRhaW5zID0gaGFzQ29tcGFyZSB8fCBybmF0aXZlLnRlc3QoIGRvY0VsZW0uY29udGFpbnMgKSA/CgkJZnVuY3Rpb24oIGEsIGIgKSB7CgkJCXZhciBhZG93biA9IGEubm9kZVR5cGUgPT09IDkgPyBhLmRvY3VtZW50RWxlbWVudCA6IGEsCgkJCQlidXAgPSBiICYmIGIucGFyZW50Tm9kZTsKCQkJcmV0dXJuIGEgPT09IGJ1cCB8fCAhISggYnVwICYmIGJ1cC5ub2RlVHlwZSA9PT0gMSAmJiAoCgkJCQlhZG93bi5jb250YWlucyA/CgkJCQkJYWRvd24uY29udGFpbnMoIGJ1cCApIDoKCQkJCQlhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uICYmIGEuY29tcGFyZURvY3VtZW50UG9zaXRpb24oIGJ1cCApICYgMTYKCQkJKSk7CgkJfSA6CgkJZnVuY3Rpb24oIGEsIGIgKSB7CgkJCWlmICggYiApIHsKCQkJCXdoaWxlICggKGIgPSBiLnBhcmVudE5vZGUpICkgewoJCQkJCWlmICggYiA9PT0gYSApIHsKCQkJCQkJcmV0dXJuIHRydWU7CgkJCQkJfQoJCQkJfQoJCQl9CgkJCXJldHVybiBmYWxzZTsKCQl9OwoKCS8qIFNvcnRpbmcKCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi8KCgkvLyBEb2N1bWVudCBvcmRlciBzb3J0aW5nCglzb3J0T3JkZXIgPSBoYXNDb21wYXJlID8KCWZ1bmN0aW9uKCBhLCBiICkgewoKCQkvLyBGbGFnIGZvciBkdXBsaWNhdGUgcmVtb3ZhbAoJCWlmICggYSA9PT0gYiApIHsKCQkJaGFzRHVwbGljYXRlID0gdHJ1ZTsKCQkJcmV0dXJuIDA7CgkJfQoKCQkvLyBTb3J0IG9uIG1ldGhvZCBleGlzdGVuY2UgaWYgb25seSBvbmUgaW5wdXQgaGFzIGNvbXBhcmVEb2N1bWVudFBvc2l0aW9uCgkJdmFyIGNvbXBhcmUgPSAhYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiAtICFiLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uOwoJCWlmICggY29tcGFyZSApIHsKCQkJcmV0dXJuIGNvbXBhcmU7CgkJfQoKCQkvLyBDYWxjdWxhdGUgcG9zaXRpb24gaWYgYm90aCBpbnB1dHMgYmVsb25nIHRvIHRoZSBzYW1lIGRvY3VtZW50CgkJY29tcGFyZSA9ICggYS5vd25lckRvY3VtZW50IHx8IGEgKSA9PT0gKCBiLm93bmVyRG9jdW1lbnQgfHwgYiApID8KCQkJYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiggYiApIDoKCgkJCS8vIE90aGVyd2lzZSB3ZSBrbm93IHRoZXkgYXJlIGRpc2Nvbm5lY3RlZAoJCQkxOwoKCQkvLyBEaXNjb25uZWN0ZWQgbm9kZXMKCQlpZiAoIGNvbXBhcmUgJiAxIHx8CgkJCSghc3VwcG9ydC5zb3J0RGV0YWNoZWQgJiYgYi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiggYSApID09PSBjb21wYXJlKSApIHsKCgkJCS8vIENob29zZSB0aGUgZmlyc3QgZWxlbWVudCB0aGF0IGlzIHJlbGF0ZWQgdG8gb3VyIHByZWZlcnJlZCBkb2N1bWVudAoJCQlpZiAoIGEgPT09IGRvY3VtZW50IHx8IGEub3duZXJEb2N1bWVudCA9PT0gcHJlZmVycmVkRG9jICYmIGNvbnRhaW5zKHByZWZlcnJlZERvYywgYSkgKSB7CgkJCQlyZXR1cm4gLTE7CgkJCX0KCQkJaWYgKCBiID09PSBkb2N1bWVudCB8fCBiLm93bmVyRG9jdW1lbnQgPT09IHByZWZlcnJlZERvYyAmJiBjb250YWlucyhwcmVmZXJyZWREb2MsIGIpICkgewoJCQkJcmV0dXJuIDE7CgkJCX0KCgkJCS8vIE1haW50YWluIG9yaWdpbmFsIG9yZGVyCgkJCXJldHVybiBzb3J0SW5wdXQgPwoJCQkJKCBpbmRleE9mKCBzb3J0SW5wdXQsIGEgKSAtIGluZGV4T2YoIHNvcnRJbnB1dCwgYiApICkgOgoJCQkJMDsKCQl9CgoJCXJldHVybiBjb21wYXJlICYgNCA/IC0xIDogMTsKCX0gOgoJZnVuY3Rpb24oIGEsIGIgKSB7CgkJLy8gRXhpdCBlYXJseSBpZiB0aGUgbm9kZXMgYXJlIGlkZW50aWNhbAoJCWlmICggYSA9PT0gYiApIHsKCQkJaGFzRHVwbGljYXRlID0gdHJ1ZTsKCQkJcmV0dXJuIDA7CgkJfQoKCQl2YXIgY3VyLAoJCQlpID0gMCwKCQkJYXVwID0gYS5wYXJlbnROb2RlLAoJCQlidXAgPSBiLnBhcmVudE5vZGUsCgkJCWFwID0gWyBhIF0sCgkJCWJwID0gWyBiIF07CgoJCS8vIFBhcmVudGxlc3Mgbm9kZXMgYXJlIGVpdGhlciBkb2N1bWVudHMgb3IgZGlzY29ubmVjdGVkCgkJaWYgKCAhYXVwIHx8ICFidXAgKSB7CgkJCXJldHVybiBhID09PSBkb2N1bWVudCA/IC0xIDoKCQkJCWIgPT09IGRvY3VtZW50ID8gMSA6CgkJCQlhdXAgPyAtMSA6CgkJCQlidXAgPyAxIDoKCQkJCXNvcnRJbnB1dCA/CgkJCQkoIGluZGV4T2YoIHNvcnRJbnB1dCwgYSApIC0gaW5kZXhPZiggc29ydElucHV0LCBiICkgKSA6CgkJCQkwOwoKCQkvLyBJZiB0aGUgbm9kZXMgYXJlIHNpYmxpbmdzLCB3ZSBjYW4gZG8gYSBxdWljayBjaGVjawoJCX0gZWxzZSBpZiAoIGF1cCA9PT0gYnVwICkgewoJCQlyZXR1cm4gc2libGluZ0NoZWNrKCBhLCBiICk7CgkJfQoKCQkvLyBPdGhlcndpc2Ugd2UgbmVlZCBmdWxsIGxpc3RzIG9mIHRoZWlyIGFuY2VzdG9ycyBmb3IgY29tcGFyaXNvbgoJCWN1ciA9IGE7CgkJd2hpbGUgKCAoY3VyID0gY3VyLnBhcmVudE5vZGUpICkgewoJCQlhcC51bnNoaWZ0KCBjdXIgKTsKCQl9CgkJY3VyID0gYjsKCQl3aGlsZSAoIChjdXIgPSBjdXIucGFyZW50Tm9kZSkgKSB7CgkJCWJwLnVuc2hpZnQoIGN1ciApOwoJCX0KCgkJLy8gV2FsayBkb3duIHRoZSB0cmVlIGxvb2tpbmcgZm9yIGEgZGlzY3JlcGFuY3kKCQl3aGlsZSAoIGFwW2ldID09PSBicFtpXSApIHsKCQkJaSsrOwoJCX0KCgkJcmV0dXJuIGkgPwoJCQkvLyBEbyBhIHNpYmxpbmcgY2hlY2sgaWYgdGhlIG5vZGVzIGhhdmUgYSBjb21tb24gYW5jZXN0b3IKCQkJc2libGluZ0NoZWNrKCBhcFtpXSwgYnBbaV0gKSA6CgoJCQkvLyBPdGhlcndpc2Ugbm9kZXMgaW4gb3VyIGRvY3VtZW50IHNvcnQgZmlyc3QKCQkJYXBbaV0gPT09IHByZWZlcnJlZERvYyA/IC0xIDoKCQkJYnBbaV0gPT09IHByZWZlcnJlZERvYyA/IDEgOgoJCQkwOwoJfTsKCglyZXR1cm4gZG9jdW1lbnQ7Cn07CgpTaXp6bGUubWF0Y2hlcyA9IGZ1bmN0aW9uKCBleHByLCBlbGVtZW50cyApIHsKCXJldHVybiBTaXp6bGUoIGV4cHIsIG51bGwsIG51bGwsIGVsZW1lbnRzICk7Cn07CgpTaXp6bGUubWF0Y2hlc1NlbGVjdG9yID0gZnVuY3Rpb24oIGVsZW0sIGV4cHIgKSB7CgkvLyBTZXQgZG9jdW1lbnQgdmFycyBpZiBuZWVkZWQKCWlmICggKCBlbGVtLm93bmVyRG9jdW1lbnQgfHwgZWxlbSApICE9PSBkb2N1bWVudCApIHsKCQlzZXREb2N1bWVudCggZWxlbSApOwoJfQoKCS8vIE1ha2Ugc3VyZSB0aGF0IGF0dHJpYnV0ZSBzZWxlY3RvcnMgYXJlIHF1b3RlZAoJZXhwciA9IGV4cHIucmVwbGFjZSggcmF0dHJpYnV0ZVF1b3RlcywgIj0nJDEnXSIgKTsKCglpZiAoIHN1cHBvcnQubWF0Y2hlc1NlbGVjdG9yICYmIGRvY3VtZW50SXNIVE1MICYmCgkJIWNvbXBpbGVyQ2FjaGVbIGV4cHIgKyAiICIgXSAmJgoJCSggIXJidWdneU1hdGNoZXMgfHwgIXJidWdneU1hdGNoZXMudGVzdCggZXhwciApICkgJiYKCQkoICFyYnVnZ3lRU0EgICAgIHx8ICFyYnVnZ3lRU0EudGVzdCggZXhwciApICkgKSB7CgoJCXRyeSB7CgkJCXZhciByZXQgPSBtYXRjaGVzLmNhbGwoIGVsZW0sIGV4cHIgKTsKCgkJCS8vIElFIDkncyBtYXRjaGVzU2VsZWN0b3IgcmV0dXJucyBmYWxzZSBvbiBkaXNjb25uZWN0ZWQgbm9kZXMKCQkJaWYgKCByZXQgfHwgc3VwcG9ydC5kaXNjb25uZWN0ZWRNYXRjaCB8fAoJCQkJCS8vIEFzIHdlbGwsIGRpc2Nvbm5lY3RlZCBub2RlcyBhcmUgc2FpZCB0byBiZSBpbiBhIGRvY3VtZW50CgkJCQkJLy8gZnJhZ21lbnQgaW4gSUUgOQoJCQkJCWVsZW0uZG9jdW1lbnQgJiYgZWxlbS5kb2N1bWVudC5ub2RlVHlwZSAhPT0gMTEgKSB7CgkJCQlyZXR1cm4gcmV0OwoJCQl9CgkJfSBjYXRjaCAoZSkge30KCX0KCglyZXR1cm4gU2l6emxlKCBleHByLCBkb2N1bWVudCwgbnVsbCwgWyBlbGVtIF0gKS5sZW5ndGggPiAwOwp9OwoKU2l6emxlLmNvbnRhaW5zID0gZnVuY3Rpb24oIGNvbnRleHQsIGVsZW0gKSB7CgkvLyBTZXQgZG9jdW1lbnQgdmFycyBpZiBuZWVkZWQKCWlmICggKCBjb250ZXh0Lm93bmVyRG9jdW1lbnQgfHwgY29udGV4dCApICE9PSBkb2N1bWVudCApIHsKCQlzZXREb2N1bWVudCggY29udGV4dCApOwoJfQoJcmV0dXJuIGNvbnRhaW5zKCBjb250ZXh0LCBlbGVtICk7Cn07CgpTaXp6bGUuYXR0ciA9IGZ1bmN0aW9uKCBlbGVtLCBuYW1lICkgewoJLy8gU2V0IGRvY3VtZW50IHZhcnMgaWYgbmVlZGVkCglpZiAoICggZWxlbS5vd25lckRvY3VtZW50IHx8IGVsZW0gKSAhPT0gZG9jdW1lbnQgKSB7CgkJc2V0RG9jdW1lbnQoIGVsZW0gKTsKCX0KCgl2YXIgZm4gPSBFeHByLmF0dHJIYW5kbGVbIG5hbWUudG9Mb3dlckNhc2UoKSBdLAoJCS8vIERvbid0IGdldCBmb29sZWQgYnkgT2JqZWN0LnByb3RvdHlwZSBwcm9wZXJ0aWVzIChqUXVlcnkgIzEzODA3KQoJCXZhbCA9IGZuICYmIGhhc093bi5jYWxsKCBFeHByLmF0dHJIYW5kbGUsIG5hbWUudG9Mb3dlckNhc2UoKSApID8KCQkJZm4oIGVsZW0sIG5hbWUsICFkb2N1bWVudElzSFRNTCApIDoKCQkJdW5kZWZpbmVkOwoKCXJldHVybiB2YWwgIT09IHVuZGVmaW5lZCA/CgkJdmFsIDoKCQlzdXBwb3J0LmF0dHJpYnV0ZXMgfHwgIWRvY3VtZW50SXNIVE1MID8KCQkJZWxlbS5nZXRBdHRyaWJ1dGUoIG5hbWUgKSA6CgkJCSh2YWwgPSBlbGVtLmdldEF0dHJpYnV0ZU5vZGUobmFtZSkpICYmIHZhbC5zcGVjaWZpZWQgPwoJCQkJdmFsLnZhbHVlIDoKCQkJCW51bGw7Cn07CgpTaXp6bGUuZXJyb3IgPSBmdW5jdGlvbiggbXNnICkgewoJdGhyb3cgbmV3IEVycm9yKCAiU3ludGF4IGVycm9yLCB1bnJlY29nbml6ZWQgZXhwcmVzc2lvbjogIiArIG1zZyApOwp9OwoKLyoqCiAqIERvY3VtZW50IHNvcnRpbmcgYW5kIHJlbW92aW5nIGR1cGxpY2F0ZXMKICogQHBhcmFtIHtBcnJheUxpa2V9IHJlc3VsdHMKICovClNpenpsZS51bmlxdWVTb3J0ID0gZnVuY3Rpb24oIHJlc3VsdHMgKSB7Cgl2YXIgZWxlbSwKCQlkdXBsaWNhdGVzID0gW10sCgkJaiA9IDAsCgkJaSA9IDA7CgoJLy8gVW5sZXNzIHdlICprbm93KiB3ZSBjYW4gZGV0ZWN0IGR1cGxpY2F0ZXMsIGFzc3VtZSB0aGVpciBwcmVzZW5jZQoJaGFzRHVwbGljYXRlID0gIXN1cHBvcnQuZGV0ZWN0RHVwbGljYXRlczsKCXNvcnRJbnB1dCA9ICFzdXBwb3J0LnNvcnRTdGFibGUgJiYgcmVzdWx0cy5zbGljZSggMCApOwoJcmVzdWx0cy5zb3J0KCBzb3J0T3JkZXIgKTsKCglpZiAoIGhhc0R1cGxpY2F0ZSApIHsKCQl3aGlsZSAoIChlbGVtID0gcmVzdWx0c1tpKytdKSApIHsKCQkJaWYgKCBlbGVtID09PSByZXN1bHRzWyBpIF0gKSB7CgkJCQlqID0gZHVwbGljYXRlcy5wdXNoKCBpICk7CgkJCX0KCQl9CgkJd2hpbGUgKCBqLS0gKSB7CgkJCXJlc3VsdHMuc3BsaWNlKCBkdXBsaWNhdGVzWyBqIF0sIDEgKTsKCQl9Cgl9CgoJLy8gQ2xlYXIgaW5wdXQgYWZ0ZXIgc29ydGluZyB0byByZWxlYXNlIG9iamVjdHMKCS8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vanF1ZXJ5L3NpenpsZS9wdWxsLzIyNQoJc29ydElucHV0ID0gbnVsbDsKCglyZXR1cm4gcmVzdWx0czsKfTsKCi8qKgogKiBVdGlsaXR5IGZ1bmN0aW9uIGZvciByZXRyaWV2aW5nIHRoZSB0ZXh0IHZhbHVlIG9mIGFuIGFycmF5IG9mIERPTSBub2RlcwogKiBAcGFyYW0ge0FycmF5fEVsZW1lbnR9IGVsZW0KICovCmdldFRleHQgPSBTaXp6bGUuZ2V0VGV4dCA9IGZ1bmN0aW9uKCBlbGVtICkgewoJdmFyIG5vZGUsCgkJcmV0ID0gIiIsCgkJaSA9IDAsCgkJbm9kZVR5cGUgPSBlbGVtLm5vZGVUeXBlOwoKCWlmICggIW5vZGVUeXBlICkgewoJCS8vIElmIG5vIG5vZGVUeXBlLCB0aGlzIGlzIGV4cGVjdGVkIHRvIGJlIGFuIGFycmF5CgkJd2hpbGUgKCAobm9kZSA9IGVsZW1baSsrXSkgKSB7CgkJCS8vIERvIG5vdCB0cmF2ZXJzZSBjb21tZW50IG5vZGVzCgkJCXJldCArPSBnZXRUZXh0KCBub2RlICk7CgkJfQoJfSBlbHNlIGlmICggbm9kZVR5cGUgPT09IDEgfHwgbm9kZVR5cGUgPT09IDkgfHwgbm9kZVR5cGUgPT09IDExICkgewoJCS8vIFVzZSB0ZXh0Q29udGVudCBmb3IgZWxlbWVudHMKCQkvLyBpbm5lclRleHQgdXNhZ2UgcmVtb3ZlZCBmb3IgY29uc2lzdGVuY3kgb2YgbmV3IGxpbmVzIChqUXVlcnkgIzExMTUzKQoJCWlmICggdHlwZW9mIGVsZW0udGV4dENvbnRlbnQgPT09ICJzdHJpbmciICkgewoJCQlyZXR1cm4gZWxlbS50ZXh0Q29udGVudDsKCQl9IGVsc2UgewoJCQkvLyBUcmF2ZXJzZSBpdHMgY2hpbGRyZW4KCQkJZm9yICggZWxlbSA9IGVsZW0uZmlyc3RDaGlsZDsgZWxlbTsgZWxlbSA9IGVsZW0ubmV4dFNpYmxpbmcgKSB7CgkJCQlyZXQgKz0gZ2V0VGV4dCggZWxlbSApOwoJCQl9CgkJfQoJfSBlbHNlIGlmICggbm9kZVR5cGUgPT09IDMgfHwgbm9kZVR5cGUgPT09IDQgKSB7CgkJcmV0dXJuIGVsZW0ubm9kZVZhbHVlOwoJfQoJLy8gRG8gbm90IGluY2x1ZGUgY29tbWVudCBvciBwcm9jZXNzaW5nIGluc3RydWN0aW9uIG5vZGVzCgoJcmV0dXJuIHJldDsKfTsKCkV4cHIgPSBTaXp6bGUuc2VsZWN0b3JzID0gewoKCS8vIENhbiBiZSBhZGp1c3RlZCBieSB0aGUgdXNlcgoJY2FjaGVMZW5ndGg6IDUwLAoKCWNyZWF0ZVBzZXVkbzogbWFya0Z1bmN0aW9uLAoKCW1hdGNoOiBtYXRjaEV4cHIsCgoJYXR0ckhhbmRsZToge30sCgoJZmluZDoge30sCgoJcmVsYXRpdmU6IHsKCQkiPiI6IHsgZGlyOiAicGFyZW50Tm9kZSIsIGZpcnN0OiB0cnVlIH0sCgkJIiAiOiB7IGRpcjogInBhcmVudE5vZGUiIH0sCgkJIisiOiB7IGRpcjogInByZXZpb3VzU2libGluZyIsIGZpcnN0OiB0cnVlIH0sCgkJIn4iOiB7IGRpcjogInByZXZpb3VzU2libGluZyIgfQoJfSwKCglwcmVGaWx0ZXI6IHsKCQkiQVRUUiI6IGZ1bmN0aW9uKCBtYXRjaCApIHsKCQkJbWF0Y2hbMV0gPSBtYXRjaFsxXS5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApOwoKCQkJLy8gTW92ZSB0aGUgZ2l2ZW4gdmFsdWUgdG8gbWF0Y2hbM10gd2hldGhlciBxdW90ZWQgb3IgdW5xdW90ZWQKCQkJbWF0Y2hbM10gPSAoIG1hdGNoWzNdIHx8IG1hdGNoWzRdIHx8IG1hdGNoWzVdIHx8ICIiICkucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKTsKCgkJCWlmICggbWF0Y2hbMl0gPT09ICJ+PSIgKSB7CgkJCQltYXRjaFszXSA9ICIgIiArIG1hdGNoWzNdICsgIiAiOwoJCQl9CgoJCQlyZXR1cm4gbWF0Y2guc2xpY2UoIDAsIDQgKTsKCQl9LAoKCQkiQ0hJTEQiOiBmdW5jdGlvbiggbWF0Y2ggKSB7CgkJCS8qIG1hdGNoZXMgZnJvbSBtYXRjaEV4cHJbIkNISUxEIl0KCQkJCTEgdHlwZSAob25seXxudGh8Li4uKQoJCQkJMiB3aGF0IChjaGlsZHxvZi10eXBlKQoJCQkJMyBhcmd1bWVudCAoZXZlbnxvZGR8XGQqfFxkKm4oWystXVxkKyk/fC4uLikKCQkJCTQgeG4tY29tcG9uZW50IG9mIHhuK3kgYXJndW1lbnQgKFsrLV0/XGQqbnwpCgkJCQk1IHNpZ24gb2YgeG4tY29tcG9uZW50CgkJCQk2IHggb2YgeG4tY29tcG9uZW50CgkJCQk3IHNpZ24gb2YgeS1jb21wb25lbnQKCQkJCTggeSBvZiB5LWNvbXBvbmVudAoJCQkqLwoJCQltYXRjaFsxXSA9IG1hdGNoWzFdLnRvTG93ZXJDYXNlKCk7CgoJCQlpZiAoIG1hdGNoWzFdLnNsaWNlKCAwLCAzICkgPT09ICJudGgiICkgewoJCQkJLy8gbnRoLSogcmVxdWlyZXMgYXJndW1lbnQKCQkJCWlmICggIW1hdGNoWzNdICkgewoJCQkJCVNpenpsZS5lcnJvciggbWF0Y2hbMF0gKTsKCQkJCX0KCgkJCQkvLyBudW1lcmljIHggYW5kIHkgcGFyYW1ldGVycyBmb3IgRXhwci5maWx0ZXIuQ0hJTEQKCQkJCS8vIHJlbWVtYmVyIHRoYXQgZmFsc2UvdHJ1ZSBjYXN0IHJlc3BlY3RpdmVseSB0byAwLzEKCQkJCW1hdGNoWzRdID0gKyggbWF0Y2hbNF0gPyBtYXRjaFs1XSArIChtYXRjaFs2XSB8fCAxKSA6IDIgKiAoIG1hdGNoWzNdID09PSAiZXZlbiIgfHwgbWF0Y2hbM10gPT09ICJvZGQiICkgKTsKCQkJCW1hdGNoWzVdID0gKyggKCBtYXRjaFs3XSArIG1hdGNoWzhdICkgfHwgbWF0Y2hbM10gPT09ICJvZGQiICk7CgoJCQkvLyBvdGhlciB0eXBlcyBwcm9oaWJpdCBhcmd1bWVudHMKCQkJfSBlbHNlIGlmICggbWF0Y2hbM10gKSB7CgkJCQlTaXp6bGUuZXJyb3IoIG1hdGNoWzBdICk7CgkJCX0KCgkJCXJldHVybiBtYXRjaDsKCQl9LAoKCQkiUFNFVURPIjogZnVuY3Rpb24oIG1hdGNoICkgewoJCQl2YXIgZXhjZXNzLAoJCQkJdW5xdW90ZWQgPSAhbWF0Y2hbNl0gJiYgbWF0Y2hbMl07CgoJCQlpZiAoIG1hdGNoRXhwclsiQ0hJTEQiXS50ZXN0KCBtYXRjaFswXSApICkgewoJCQkJcmV0dXJuIG51bGw7CgkJCX0KCgkJCS8vIEFjY2VwdCBxdW90ZWQgYXJndW1lbnRzIGFzLWlzCgkJCWlmICggbWF0Y2hbM10gKSB7CgkJCQltYXRjaFsyXSA9IG1hdGNoWzRdIHx8IG1hdGNoWzVdIHx8ICIiOwoKCQkJLy8gU3RyaXAgZXhjZXNzIGNoYXJhY3RlcnMgZnJvbSB1bnF1b3RlZCBhcmd1bWVudHMKCQkJfSBlbHNlIGlmICggdW5xdW90ZWQgJiYgcnBzZXVkby50ZXN0KCB1bnF1b3RlZCApICYmCgkJCQkvLyBHZXQgZXhjZXNzIGZyb20gdG9rZW5pemUgKHJlY3Vyc2l2ZWx5KQoJCQkJKGV4Y2VzcyA9IHRva2VuaXplKCB1bnF1b3RlZCwgdHJ1ZSApKSAmJgoJCQkJLy8gYWR2YW5jZSB0byB0aGUgbmV4dCBjbG9zaW5nIHBhcmVudGhlc2lzCgkJCQkoZXhjZXNzID0gdW5xdW90ZWQuaW5kZXhPZiggIikiLCB1bnF1b3RlZC5sZW5ndGggLSBleGNlc3MgKSAtIHVucXVvdGVkLmxlbmd0aCkgKSB7CgoJCQkJLy8gZXhjZXNzIGlzIGEgbmVnYXRpdmUgaW5kZXgKCQkJCW1hdGNoWzBdID0gbWF0Y2hbMF0uc2xpY2UoIDAsIGV4Y2VzcyApOwoJCQkJbWF0Y2hbMl0gPSB1bnF1b3RlZC5zbGljZSggMCwgZXhjZXNzICk7CgkJCX0KCgkJCS8vIFJldHVybiBvbmx5IGNhcHR1cmVzIG5lZWRlZCBieSB0aGUgcHNldWRvIGZpbHRlciBtZXRob2QgKHR5cGUgYW5kIGFyZ3VtZW50KQoJCQlyZXR1cm4gbWF0Y2guc2xpY2UoIDAsIDMgKTsKCQl9Cgl9LAoKCWZpbHRlcjogewoKCQkiVEFHIjogZnVuY3Rpb24oIG5vZGVOYW1lU2VsZWN0b3IgKSB7CgkJCXZhciBub2RlTmFtZSA9IG5vZGVOYW1lU2VsZWN0b3IucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKS50b0xvd2VyQ2FzZSgpOwoJCQlyZXR1cm4gbm9kZU5hbWVTZWxlY3RvciA9PT0gIioiID8KCQkJCWZ1bmN0aW9uKCkgeyByZXR1cm4gdHJ1ZTsgfSA6CgkJCQlmdW5jdGlvbiggZWxlbSApIHsKCQkJCQlyZXR1cm4gZWxlbS5ub2RlTmFtZSAmJiBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IG5vZGVOYW1lOwoJCQkJfTsKCQl9LAoKCQkiQ0xBU1MiOiBmdW5jdGlvbiggY2xhc3NOYW1lICkgewoJCQl2YXIgcGF0dGVybiA9IGNsYXNzQ2FjaGVbIGNsYXNzTmFtZSArICIgIiBdOwoKCQkJcmV0dXJuIHBhdHRlcm4gfHwKCQkJCShwYXR0ZXJuID0gbmV3IFJlZ0V4cCggIihefCIgKyB3aGl0ZXNwYWNlICsgIikiICsgY2xhc3NOYW1lICsgIigiICsgd2hpdGVzcGFjZSArICJ8JCkiICkpICYmCgkJCQljbGFzc0NhY2hlKCBjbGFzc05hbWUsIGZ1bmN0aW9uKCBlbGVtICkgewoJCQkJCXJldHVybiBwYXR0ZXJuLnRlc3QoIHR5cGVvZiBlbGVtLmNsYXNzTmFtZSA9PT0gInN0cmluZyIgJiYgZWxlbS5jbGFzc05hbWUgfHwgdHlwZW9mIGVsZW0uZ2V0QXR0cmlidXRlICE9PSAidW5kZWZpbmVkIiAmJiBlbGVtLmdldEF0dHJpYnV0ZSgiY2xhc3MiKSB8fCAiIiApOwoJCQkJfSk7CgkJfSwKCgkJIkFUVFIiOiBmdW5jdGlvbiggbmFtZSwgb3BlcmF0b3IsIGNoZWNrICkgewoJCQlyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7CgkJCQl2YXIgcmVzdWx0ID0gU2l6emxlLmF0dHIoIGVsZW0sIG5hbWUgKTsKCgkJCQlpZiAoIHJlc3VsdCA9PSBudWxsICkgewoJCQkJCXJldHVybiBvcGVyYXRvciA9PT0gIiE9IjsKCQkJCX0KCQkJCWlmICggIW9wZXJhdG9yICkgewoJCQkJCXJldHVybiB0cnVlOwoJCQkJfQoKCQkJCXJlc3VsdCArPSAiIjsKCgkJCQlyZXR1cm4gb3BlcmF0b3IgPT09ICI9IiA/IHJlc3VsdCA9PT0gY2hlY2sgOgoJCQkJCW9wZXJhdG9yID09PSAiIT0iID8gcmVzdWx0ICE9PSBjaGVjayA6CgkJCQkJb3BlcmF0b3IgPT09ICJePSIgPyBjaGVjayAmJiByZXN1bHQuaW5kZXhPZiggY2hlY2sgKSA9PT0gMCA6CgkJCQkJb3BlcmF0b3IgPT09ICIqPSIgPyBjaGVjayAmJiByZXN1bHQuaW5kZXhPZiggY2hlY2sgKSA+IC0xIDoKCQkJCQlvcGVyYXRvciA9PT0gIiQ9IiA/IGNoZWNrICYmIHJlc3VsdC5zbGljZSggLWNoZWNrLmxlbmd0aCApID09PSBjaGVjayA6CgkJCQkJb3BlcmF0b3IgPT09ICJ+PSIgPyAoICIgIiArIHJlc3VsdC5yZXBsYWNlKCByd2hpdGVzcGFjZSwgIiAiICkgKyAiICIgKS5pbmRleE9mKCBjaGVjayApID4gLTEgOgoJCQkJCW9wZXJhdG9yID09PSAifD0iID8gcmVzdWx0ID09PSBjaGVjayB8fCByZXN1bHQuc2xpY2UoIDAsIGNoZWNrLmxlbmd0aCArIDEgKSA9PT0gY2hlY2sgKyAiLSIgOgoJCQkJCWZhbHNlOwoJCQl9OwoJCX0sCgoJCSJDSElMRCI6IGZ1bmN0aW9uKCB0eXBlLCB3aGF0LCBhcmd1bWVudCwgZmlyc3QsIGxhc3QgKSB7CgkJCXZhciBzaW1wbGUgPSB0eXBlLnNsaWNlKCAwLCAzICkgIT09ICJudGgiLAoJCQkJZm9yd2FyZCA9IHR5cGUuc2xpY2UoIC00ICkgIT09ICJsYXN0IiwKCQkJCW9mVHlwZSA9IHdoYXQgPT09ICJvZi10eXBlIjsKCgkJCXJldHVybiBmaXJzdCA9PT0gMSAmJiBsYXN0ID09PSAwID8KCgkJCQkvLyBTaG9ydGN1dCBmb3IgOm50aC0qKG4pCgkJCQlmdW5jdGlvbiggZWxlbSApIHsKCQkJCQlyZXR1cm4gISFlbGVtLnBhcmVudE5vZGU7CgkJCQl9IDoKCgkJCQlmdW5jdGlvbiggZWxlbSwgY29udGV4dCwgeG1sICkgewoJCQkJCXZhciBjYWNoZSwgdW5pcXVlQ2FjaGUsIG91dGVyQ2FjaGUsIG5vZGUsIG5vZGVJbmRleCwgc3RhcnQsCgkJCQkJCWRpciA9IHNpbXBsZSAhPT0gZm9yd2FyZCA/ICJuZXh0U2libGluZyIgOiAicHJldmlvdXNTaWJsaW5nIiwKCQkJCQkJcGFyZW50ID0gZWxlbS5wYXJlbnROb2RlLAoJCQkJCQluYW1lID0gb2ZUeXBlICYmIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSwKCQkJCQkJdXNlQ2FjaGUgPSAheG1sICYmICFvZlR5cGUsCgkJCQkJCWRpZmYgPSBmYWxzZTsKCgkJCQkJaWYgKCBwYXJlbnQgKSB7CgoJCQkJCQkvLyA6KGZpcnN0fGxhc3R8b25seSktKGNoaWxkfG9mLXR5cGUpCgkJCQkJCWlmICggc2ltcGxlICkgewoJCQkJCQkJd2hpbGUgKCBkaXIgKSB7CgkJCQkJCQkJbm9kZSA9IGVsZW07CgkJCQkJCQkJd2hpbGUgKCAobm9kZSA9IG5vZGVbIGRpciBdKSApIHsKCQkJCQkJCQkJaWYgKCBvZlR5cGUgPwoJCQkJCQkJCQkJbm9kZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSBuYW1lIDoKCQkJCQkJCQkJCW5vZGUubm9kZVR5cGUgPT09IDEgKSB7CgoJCQkJCQkJCQkJcmV0dXJuIGZhbHNlOwoJCQkJCQkJCQl9CgkJCQkJCQkJfQoJCQkJCQkJCS8vIFJldmVyc2UgZGlyZWN0aW9uIGZvciA6b25seS0qIChpZiB3ZSBoYXZlbid0IHlldCBkb25lIHNvKQoJCQkJCQkJCXN0YXJ0ID0gZGlyID0gdHlwZSA9PT0gIm9ubHkiICYmICFzdGFydCAmJiAibmV4dFNpYmxpbmciOwoJCQkJCQkJfQoJCQkJCQkJcmV0dXJuIHRydWU7CgkJCQkJCX0KCgkJCQkJCXN0YXJ0ID0gWyBmb3J3YXJkID8gcGFyZW50LmZpcnN0Q2hpbGQgOiBwYXJlbnQubGFzdENoaWxkIF07CgoJCQkJCQkvLyBub24teG1sIDpudGgtY2hpbGQoLi4uKSBzdG9yZXMgY2FjaGUgZGF0YSBvbiBgcGFyZW50YAoJCQkJCQlpZiAoIGZvcndhcmQgJiYgdXNlQ2FjaGUgKSB7CgoJCQkJCQkJLy8gU2VlayBgZWxlbWAgZnJvbSBhIHByZXZpb3VzbHktY2FjaGVkIGluZGV4CgoJCQkJCQkJLy8gLi4uaW4gYSBnemlwLWZyaWVuZGx5IHdheQoJCQkJCQkJbm9kZSA9IHBhcmVudDsKCQkJCQkJCW91dGVyQ2FjaGUgPSBub2RlWyBleHBhbmRvIF0gfHwgKG5vZGVbIGV4cGFuZG8gXSA9IHt9KTsKCgkJCQkJCQkvLyBTdXBwb3J0OiBJRSA8OSBvbmx5CgkJCQkJCQkvLyBEZWZlbmQgYWdhaW5zdCBjbG9uZWQgYXR0cm9wZXJ0aWVzIChqUXVlcnkgZ2gtMTcwOSkKCQkJCQkJCXVuaXF1ZUNhY2hlID0gb3V0ZXJDYWNoZVsgbm9kZS51bmlxdWVJRCBdIHx8CgkJCQkJCQkJKG91dGVyQ2FjaGVbIG5vZGUudW5pcXVlSUQgXSA9IHt9KTsKCgkJCQkJCQljYWNoZSA9IHVuaXF1ZUNhY2hlWyB0eXBlIF0gfHwgW107CgkJCQkJCQlub2RlSW5kZXggPSBjYWNoZVsgMCBdID09PSBkaXJydW5zICYmIGNhY2hlWyAxIF07CgkJCQkJCQlkaWZmID0gbm9kZUluZGV4ICYmIGNhY2hlWyAyIF07CgkJCQkJCQlub2RlID0gbm9kZUluZGV4ICYmIHBhcmVudC5jaGlsZE5vZGVzWyBub2RlSW5kZXggXTsKCgkJCQkJCQl3aGlsZSAoIChub2RlID0gKytub2RlSW5kZXggJiYgbm9kZSAmJiBub2RlWyBkaXIgXSB8fAoKCQkJCQkJCQkvLyBGYWxsYmFjayB0byBzZWVraW5nIGBlbGVtYCBmcm9tIHRoZSBzdGFydAoJCQkJCQkJCShkaWZmID0gbm9kZUluZGV4ID0gMCkgfHwgc3RhcnQucG9wKCkpICkgewoKCQkJCQkJCQkvLyBXaGVuIGZvdW5kLCBjYWNoZSBpbmRleGVzIG9uIGBwYXJlbnRgIGFuZCBicmVhawoJCQkJCQkJCWlmICggbm9kZS5ub2RlVHlwZSA9PT0gMSAmJiArK2RpZmYgJiYgbm9kZSA9PT0gZWxlbSApIHsKCQkJCQkJCQkJdW5pcXVlQ2FjaGVbIHR5cGUgXSA9IFsgZGlycnVucywgbm9kZUluZGV4LCBkaWZmIF07CgkJCQkJCQkJCWJyZWFrOwoJCQkJCQkJCX0KCQkJCQkJCX0KCgkJCQkJCX0gZWxzZSB7CgkJCQkJCQkvLyBVc2UgcHJldmlvdXNseS1jYWNoZWQgZWxlbWVudCBpbmRleCBpZiBhdmFpbGFibGUKCQkJCQkJCWlmICggdXNlQ2FjaGUgKSB7CgkJCQkJCQkJLy8gLi4uaW4gYSBnemlwLWZyaWVuZGx5IHdheQoJCQkJCQkJCW5vZGUgPSBlbGVtOwoJCQkJCQkJCW91dGVyQ2FjaGUgPSBub2RlWyBleHBhbmRvIF0gfHwgKG5vZGVbIGV4cGFuZG8gXSA9IHt9KTsKCgkJCQkJCQkJLy8gU3VwcG9ydDogSUUgPDkgb25seQoJCQkJCQkJCS8vIERlZmVuZCBhZ2FpbnN0IGNsb25lZCBhdHRyb3BlcnRpZXMgKGpRdWVyeSBnaC0xNzA5KQoJCQkJCQkJCXVuaXF1ZUNhY2hlID0gb3V0ZXJDYWNoZVsgbm9kZS51bmlxdWVJRCBdIHx8CgkJCQkJCQkJCShvdXRlckNhY2hlWyBub2RlLnVuaXF1ZUlEIF0gPSB7fSk7CgoJCQkJCQkJCWNhY2hlID0gdW5pcXVlQ2FjaGVbIHR5cGUgXSB8fCBbXTsKCQkJCQkJCQlub2RlSW5kZXggPSBjYWNoZVsgMCBdID09PSBkaXJydW5zICYmIGNhY2hlWyAxIF07CgkJCQkJCQkJZGlmZiA9IG5vZGVJbmRleDsKCQkJCQkJCX0KCgkJCQkJCQkvLyB4bWwgOm50aC1jaGlsZCguLi4pCgkJCQkJCQkvLyBvciA6bnRoLWxhc3QtY2hpbGQoLi4uKSBvciA6bnRoKC1sYXN0KT8tb2YtdHlwZSguLi4pCgkJCQkJCQlpZiAoIGRpZmYgPT09IGZhbHNlICkgewoJCQkJCQkJCS8vIFVzZSB0aGUgc2FtZSBsb29wIGFzIGFib3ZlIHRvIHNlZWsgYGVsZW1gIGZyb20gdGhlIHN0YXJ0CgkJCQkJCQkJd2hpbGUgKCAobm9kZSA9ICsrbm9kZUluZGV4ICYmIG5vZGUgJiYgbm9kZVsgZGlyIF0gfHwKCQkJCQkJCQkJKGRpZmYgPSBub2RlSW5kZXggPSAwKSB8fCBzdGFydC5wb3AoKSkgKSB7CgoJCQkJCQkJCQlpZiAoICggb2ZUeXBlID8KCQkJCQkJCQkJCW5vZGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbmFtZSA6CgkJCQkJCQkJCQlub2RlLm5vZGVUeXBlID09PSAxICkgJiYKCQkJCQkJCQkJCSsrZGlmZiApIHsKCgkJCQkJCQkJCQkvLyBDYWNoZSB0aGUgaW5kZXggb2YgZWFjaCBlbmNvdW50ZXJlZCBlbGVtZW50CgkJCQkJCQkJCQlpZiAoIHVzZUNhY2hlICkgewoJCQkJCQkJCQkJCW91dGVyQ2FjaGUgPSBub2RlWyBleHBhbmRvIF0gfHwgKG5vZGVbIGV4cGFuZG8gXSA9IHt9KTsKCgkJCQkJCQkJCQkJLy8gU3VwcG9ydDogSUUgPDkgb25seQoJCQkJCQkJCQkJCS8vIERlZmVuZCBhZ2FpbnN0IGNsb25lZCBhdHRyb3BlcnRpZXMgKGpRdWVyeSBnaC0xNzA5KQoJCQkJCQkJCQkJCXVuaXF1ZUNhY2hlID0gb3V0ZXJDYWNoZVsgbm9kZS51bmlxdWVJRCBdIHx8CgkJCQkJCQkJCQkJCShvdXRlckNhY2hlWyBub2RlLnVuaXF1ZUlEIF0gPSB7fSk7CgoJCQkJCQkJCQkJCXVuaXF1ZUNhY2hlWyB0eXBlIF0gPSBbIGRpcnJ1bnMsIGRpZmYgXTsKCQkJCQkJCQkJCX0KCgkJCQkJCQkJCQlpZiAoIG5vZGUgPT09IGVsZW0gKSB7CgkJCQkJCQkJCQkJYnJlYWs7CgkJCQkJCQkJCQl9CgkJCQkJCQkJCX0KCQkJCQkJCQl9CgkJCQkJCQl9CgkJCQkJCX0KCgkJCQkJCS8vIEluY29ycG9yYXRlIHRoZSBvZmZzZXQsIHRoZW4gY2hlY2sgYWdhaW5zdCBjeWNsZSBzaXplCgkJCQkJCWRpZmYgLT0gbGFzdDsKCQkJCQkJcmV0dXJuIGRpZmYgPT09IGZpcnN0IHx8ICggZGlmZiAlIGZpcnN0ID09PSAwICYmIGRpZmYgLyBmaXJzdCA+PSAwICk7CgkJCQkJfQoJCQkJfTsKCQl9LAoKCQkiUFNFVURPIjogZnVuY3Rpb24oIHBzZXVkbywgYXJndW1lbnQgKSB7CgkJCS8vIHBzZXVkby1jbGFzcyBuYW1lcyBhcmUgY2FzZS1pbnNlbnNpdGl2ZQoJCQkvLyBodHRwOi8vd3d3LnczLm9yZy9UUi9zZWxlY3RvcnMvI3BzZXVkby1jbGFzc2VzCgkJCS8vIFByaW9yaXRpemUgYnkgY2FzZSBzZW5zaXRpdml0eSBpbiBjYXNlIGN1c3RvbSBwc2V1ZG9zIGFyZSBhZGRlZCB3aXRoIHVwcGVyY2FzZSBsZXR0ZXJzCgkJCS8vIFJlbWVtYmVyIHRoYXQgc2V0RmlsdGVycyBpbmhlcml0cyBmcm9tIHBzZXVkb3MKCQkJdmFyIGFyZ3MsCgkJCQlmbiA9IEV4cHIucHNldWRvc1sgcHNldWRvIF0gfHwgRXhwci5zZXRGaWx0ZXJzWyBwc2V1ZG8udG9Mb3dlckNhc2UoKSBdIHx8CgkJCQkJU2l6emxlLmVycm9yKCAidW5zdXBwb3J0ZWQgcHNldWRvOiAiICsgcHNldWRvICk7CgoJCQkvLyBUaGUgdXNlciBtYXkgdXNlIGNyZWF0ZVBzZXVkbyB0byBpbmRpY2F0ZSB0aGF0CgkJCS8vIGFyZ3VtZW50cyBhcmUgbmVlZGVkIHRvIGNyZWF0ZSB0aGUgZmlsdGVyIGZ1bmN0aW9uCgkJCS8vIGp1c3QgYXMgU2l6emxlIGRvZXMKCQkJaWYgKCBmblsgZXhwYW5kbyBdICkgewoJCQkJcmV0dXJuIGZuKCBhcmd1bWVudCApOwoJCQl9CgoJCQkvLyBCdXQgbWFpbnRhaW4gc3VwcG9ydCBmb3Igb2xkIHNpZ25hdHVyZXMKCQkJaWYgKCBmbi5sZW5ndGggPiAxICkgewoJCQkJYXJncyA9IFsgcHNldWRvLCBwc2V1ZG8sICIiLCBhcmd1bWVudCBdOwoJCQkJcmV0dXJuIEV4cHIuc2V0RmlsdGVycy5oYXNPd25Qcm9wZXJ0eSggcHNldWRvLnRvTG93ZXJDYXNlKCkgKSA/CgkJCQkJbWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCBzZWVkLCBtYXRjaGVzICkgewoJCQkJCQl2YXIgaWR4LAoJCQkJCQkJbWF0Y2hlZCA9IGZuKCBzZWVkLCBhcmd1bWVudCApLAoJCQkJCQkJaSA9IG1hdGNoZWQubGVuZ3RoOwoJCQkJCQl3aGlsZSAoIGktLSApIHsKCQkJCQkJCWlkeCA9IGluZGV4T2YoIHNlZWQsIG1hdGNoZWRbaV0gKTsKCQkJCQkJCXNlZWRbIGlkeCBdID0gISggbWF0Y2hlc1sgaWR4IF0gPSBtYXRjaGVkW2ldICk7CgkJCQkJCX0KCQkJCQl9KSA6CgkJCQkJZnVuY3Rpb24oIGVsZW0gKSB7CgkJCQkJCXJldHVybiBmbiggZWxlbSwgMCwgYXJncyApOwoJCQkJCX07CgkJCX0KCgkJCXJldHVybiBmbjsKCQl9Cgl9LAoKCXBzZXVkb3M6IHsKCQkvLyBQb3RlbnRpYWxseSBjb21wbGV4IHBzZXVkb3MKCQkibm90IjogbWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCBzZWxlY3RvciApIHsKCQkJLy8gVHJpbSB0aGUgc2VsZWN0b3IgcGFzc2VkIHRvIGNvbXBpbGUKCQkJLy8gdG8gYXZvaWQgdHJlYXRpbmcgbGVhZGluZyBhbmQgdHJhaWxpbmcKCQkJLy8gc3BhY2VzIGFzIGNvbWJpbmF0b3JzCgkJCXZhciBpbnB1dCA9IFtdLAoJCQkJcmVzdWx0cyA9IFtdLAoJCQkJbWF0Y2hlciA9IGNvbXBpbGUoIHNlbGVjdG9yLnJlcGxhY2UoIHJ0cmltLCAiJDEiICkgKTsKCgkJCXJldHVybiBtYXRjaGVyWyBleHBhbmRvIF0gPwoJCQkJbWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCBzZWVkLCBtYXRjaGVzLCBjb250ZXh0LCB4bWwgKSB7CgkJCQkJdmFyIGVsZW0sCgkJCQkJCXVubWF0Y2hlZCA9IG1hdGNoZXIoIHNlZWQsIG51bGwsIHhtbCwgW10gKSwKCQkJCQkJaSA9IHNlZWQubGVuZ3RoOwoKCQkJCQkvLyBNYXRjaCBlbGVtZW50cyB1bm1hdGNoZWQgYnkgYG1hdGNoZXJgCgkJCQkJd2hpbGUgKCBpLS0gKSB7CgkJCQkJCWlmICggKGVsZW0gPSB1bm1hdGNoZWRbaV0pICkgewoJCQkJCQkJc2VlZFtpXSA9ICEobWF0Y2hlc1tpXSA9IGVsZW0pOwoJCQkJCQl9CgkJCQkJfQoJCQkJfSkgOgoJCQkJZnVuY3Rpb24oIGVsZW0sIGNvbnRleHQsIHhtbCApIHsKCQkJCQlpbnB1dFswXSA9IGVsZW07CgkJCQkJbWF0Y2hlciggaW5wdXQsIG51bGwsIHhtbCwgcmVzdWx0cyApOwoJCQkJCS8vIERvbid0IGtlZXAgdGhlIGVsZW1lbnQgKGlzc3VlICMyOTkpCgkJCQkJaW5wdXRbMF0gPSBudWxsOwoJCQkJCXJldHVybiAhcmVzdWx0cy5wb3AoKTsKCQkJCX07CgkJfSksCgoJCSJoYXMiOiBtYXJrRnVuY3Rpb24oZnVuY3Rpb24oIHNlbGVjdG9yICkgewoJCQlyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7CgkJCQlyZXR1cm4gU2l6emxlKCBzZWxlY3RvciwgZWxlbSApLmxlbmd0aCA+IDA7CgkJCX07CgkJfSksCgoJCSJjb250YWlucyI6IG1hcmtGdW5jdGlvbihmdW5jdGlvbiggdGV4dCApIHsKCQkJdGV4dCA9IHRleHQucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKTsKCQkJcmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkgewoJCQkJcmV0dXJuICggZWxlbS50ZXh0Q29udGVudCB8fCBlbGVtLmlubmVyVGV4dCB8fCBnZXRUZXh0KCBlbGVtICkgKS5pbmRleE9mKCB0ZXh0ICkgPiAtMTsKCQkJfTsKCQl9KSwKCgkJLy8gIldoZXRoZXIgYW4gZWxlbWVudCBpcyByZXByZXNlbnRlZCBieSBhIDpsYW5nKCkgc2VsZWN0b3IKCQkvLyBpcyBiYXNlZCBzb2xlbHkgb24gdGhlIGVsZW1lbnQncyBsYW5ndWFnZSB2YWx1ZQoJCS8vIGJlaW5nIGVxdWFsIHRvIHRoZSBpZGVudGlmaWVyIEMsCgkJLy8gb3IgYmVnaW5uaW5nIHdpdGggdGhlIGlkZW50aWZpZXIgQyBpbW1lZGlhdGVseSBmb2xsb3dlZCBieSAiLSIuCgkJLy8gVGhlIG1hdGNoaW5nIG9mIEMgYWdhaW5zdCB0aGUgZWxlbWVudCdzIGxhbmd1YWdlIHZhbHVlIGlzIHBlcmZvcm1lZCBjYXNlLWluc2Vuc2l0aXZlbHkuCgkJLy8gVGhlIGlkZW50aWZpZXIgQyBkb2VzIG5vdCBoYXZlIHRvIGJlIGEgdmFsaWQgbGFuZ3VhZ2UgbmFtZS4iCgkJLy8gaHR0cDovL3d3dy53My5vcmcvVFIvc2VsZWN0b3JzLyNsYW5nLXBzZXVkbwoJCSJsYW5nIjogbWFya0Z1bmN0aW9uKCBmdW5jdGlvbiggbGFuZyApIHsKCQkJLy8gbGFuZyB2YWx1ZSBtdXN0IGJlIGEgdmFsaWQgaWRlbnRpZmllcgoJCQlpZiAoICFyaWRlbnRpZmllci50ZXN0KGxhbmcgfHwgIiIpICkgewoJCQkJU2l6emxlLmVycm9yKCAidW5zdXBwb3J0ZWQgbGFuZzogIiArIGxhbmcgKTsKCQkJfQoJCQlsYW5nID0gbGFuZy5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApLnRvTG93ZXJDYXNlKCk7CgkJCXJldHVybiBmdW5jdGlvbiggZWxlbSApIHsKCQkJCXZhciBlbGVtTGFuZzsKCQkJCWRvIHsKCQkJCQlpZiAoIChlbGVtTGFuZyA9IGRvY3VtZW50SXNIVE1MID8KCQkJCQkJZWxlbS5sYW5nIDoKCQkJCQkJZWxlbS5nZXRBdHRyaWJ1dGUoInhtbDpsYW5nIikgfHwgZWxlbS5nZXRBdHRyaWJ1dGUoImxhbmciKSkgKSB7CgoJCQkJCQllbGVtTGFuZyA9IGVsZW1MYW5nLnRvTG93ZXJDYXNlKCk7CgkJCQkJCXJldHVybiBlbGVtTGFuZyA9PT0gbGFuZyB8fCBlbGVtTGFuZy5pbmRleE9mKCBsYW5nICsgIi0iICkgPT09IDA7CgkJCQkJfQoJCQkJfSB3aGlsZSAoIChlbGVtID0gZWxlbS5wYXJlbnROb2RlKSAmJiBlbGVtLm5vZGVUeXBlID09PSAxICk7CgkJCQlyZXR1cm4gZmFsc2U7CgkJCX07CgkJfSksCgoJCS8vIE1pc2NlbGxhbmVvdXMKCQkidGFyZ2V0IjogZnVuY3Rpb24oIGVsZW0gKSB7CgkJCXZhciBoYXNoID0gd2luZG93LmxvY2F0aW9uICYmIHdpbmRvdy5sb2NhdGlvbi5oYXNoOwoJCQlyZXR1cm4gaGFzaCAmJiBoYXNoLnNsaWNlKCAxICkgPT09IGVsZW0uaWQ7CgkJfSwKCgkJInJvb3QiOiBmdW5jdGlvbiggZWxlbSApIHsKCQkJcmV0dXJuIGVsZW0gPT09IGRvY0VsZW07CgkJfSwKCgkJImZvY3VzIjogZnVuY3Rpb24oIGVsZW0gKSB7CgkJCXJldHVybiBlbGVtID09PSBkb2N1bWVudC5hY3RpdmVFbGVtZW50ICYmICghZG9jdW1lbnQuaGFzRm9jdXMgfHwgZG9jdW1lbnQuaGFzRm9jdXMoKSkgJiYgISEoZWxlbS50eXBlIHx8IGVsZW0uaHJlZiB8fCB+ZWxlbS50YWJJbmRleCk7CgkJfSwKCgkJLy8gQm9vbGVhbiBwcm9wZXJ0aWVzCgkJImVuYWJsZWQiOiBmdW5jdGlvbiggZWxlbSApIHsKCQkJcmV0dXJuIGVsZW0uZGlzYWJsZWQgPT09IGZhbHNlOwoJCX0sCgoJCSJkaXNhYmxlZCI6IGZ1bmN0aW9uKCBlbGVtICkgewoJCQlyZXR1cm4gZWxlbS5kaXNhYmxlZCA9PT0gdHJ1ZTsKCQl9LAoKCQkiY2hlY2tlZCI6IGZ1bmN0aW9uKCBlbGVtICkgewoJCQkvLyBJbiBDU1MzLCA6Y2hlY2tlZCBzaG91bGQgcmV0dXJuIGJvdGggY2hlY2tlZCBhbmQgc2VsZWN0ZWQgZWxlbWVudHMKCQkJLy8gaHR0cDovL3d3dy53My5vcmcvVFIvMjAxMS9SRUMtY3NzMy1zZWxlY3RvcnMtMjAxMTA5MjkvI2NoZWNrZWQKCQkJdmFyIG5vZGVOYW1lID0gZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpOwoJCQlyZXR1cm4gKG5vZGVOYW1lID09PSAiaW5wdXQiICYmICEhZWxlbS5jaGVja2VkKSB8fCAobm9kZU5hbWUgPT09ICJvcHRpb24iICYmICEhZWxlbS5zZWxlY3RlZCk7CgkJfSwKCgkJInNlbGVjdGVkIjogZnVuY3Rpb24oIGVsZW0gKSB7CgkJCS8vIEFjY2Vzc2luZyB0aGlzIHByb3BlcnR5IG1ha2VzIHNlbGVjdGVkLWJ5LWRlZmF1bHQKCQkJLy8gb3B0aW9ucyBpbiBTYWZhcmkgd29yayBwcm9wZXJseQoJCQlpZiAoIGVsZW0ucGFyZW50Tm9kZSApIHsKCQkJCWVsZW0ucGFyZW50Tm9kZS5zZWxlY3RlZEluZGV4OwoJCQl9CgoJCQlyZXR1cm4gZWxlbS5zZWxlY3RlZCA9PT0gdHJ1ZTsKCQl9LAoKCQkvLyBDb250ZW50cwoJCSJlbXB0eSI6IGZ1bmN0aW9uKCBlbGVtICkgewoJCQkvLyBodHRwOi8vd3d3LnczLm9yZy9UUi9zZWxlY3RvcnMvI2VtcHR5LXBzZXVkbwoJCQkvLyA6ZW1wdHkgaXMgbmVnYXRlZCBieSBlbGVtZW50ICgxKSBvciBjb250ZW50IG5vZGVzICh0ZXh0OiAzOyBjZGF0YTogNDsgZW50aXR5IHJlZjogNSksCgkJCS8vICAgYnV0IG5vdCBieSBvdGhlcnMgKGNvbW1lbnQ6IDg7IHByb2Nlc3NpbmcgaW5zdHJ1Y3Rpb246IDc7IGV0Yy4pCgkJCS8vIG5vZGVUeXBlIDwgNiB3b3JrcyBiZWNhdXNlIGF0dHJpYnV0ZXMgKDIpIGRvIG5vdCBhcHBlYXIgYXMgY2hpbGRyZW4KCQkJZm9yICggZWxlbSA9IGVsZW0uZmlyc3RDaGlsZDsgZWxlbTsgZWxlbSA9IGVsZW0ubmV4dFNpYmxpbmcgKSB7CgkJCQlpZiAoIGVsZW0ubm9kZVR5cGUgPCA2ICkgewoJCQkJCXJldHVybiBmYWxzZTsKCQkJCX0KCQkJfQoJCQlyZXR1cm4gdHJ1ZTsKCQl9LAoKCQkicGFyZW50IjogZnVuY3Rpb24oIGVsZW0gKSB7CgkJCXJldHVybiAhRXhwci5wc2V1ZG9zWyJlbXB0eSJdKCBlbGVtICk7CgkJfSwKCgkJLy8gRWxlbWVudC9pbnB1dCB0eXBlcwoJCSJoZWFkZXIiOiBmdW5jdGlvbiggZWxlbSApIHsKCQkJcmV0dXJuIHJoZWFkZXIudGVzdCggZWxlbS5ub2RlTmFtZSApOwoJCX0sCgoJCSJpbnB1dCI6IGZ1bmN0aW9uKCBlbGVtICkgewoJCQlyZXR1cm4gcmlucHV0cy50ZXN0KCBlbGVtLm5vZGVOYW1lICk7CgkJfSwKCgkJImJ1dHRvbiI6IGZ1bmN0aW9uKCBlbGVtICkgewoJCQl2YXIgbmFtZSA9IGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTsKCQkJcmV0dXJuIG5hbWUgPT09ICJpbnB1dCIgJiYgZWxlbS50eXBlID09PSAiYnV0dG9uIiB8fCBuYW1lID09PSAiYnV0dG9uIjsKCQl9LAoKCQkidGV4dCI6IGZ1bmN0aW9uKCBlbGVtICkgewoJCQl2YXIgYXR0cjsKCQkJcmV0dXJuIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gImlucHV0IiAmJgoJCQkJZWxlbS50eXBlID09PSAidGV4dCIgJiYKCgkJCQkvLyBTdXBwb3J0OiBJRTw4CgkJCQkvLyBOZXcgSFRNTDUgYXR0cmlidXRlIHZhbHVlcyAoZS5nLiwgInNlYXJjaCIpIGFwcGVhciB3aXRoIGVsZW0udHlwZSA9PT0gInRleHQiCgkJCQkoIChhdHRyID0gZWxlbS5nZXRBdHRyaWJ1dGUoInR5cGUiKSkgPT0gbnVsbCB8fCBhdHRyLnRvTG93ZXJDYXNlKCkgPT09ICJ0ZXh0IiApOwoJCX0sCgoJCS8vIFBvc2l0aW9uLWluLWNvbGxlY3Rpb24KCQkiZmlyc3QiOiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKCkgewoJCQlyZXR1cm4gWyAwIF07CgkJfSksCgoJCSJsYXN0IjogY3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbiggbWF0Y2hJbmRleGVzLCBsZW5ndGggKSB7CgkJCXJldHVybiBbIGxlbmd0aCAtIDEgXTsKCQl9KSwKCgkJImVxIjogY3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbiggbWF0Y2hJbmRleGVzLCBsZW5ndGgsIGFyZ3VtZW50ICkgewoJCQlyZXR1cm4gWyBhcmd1bWVudCA8IDAgPyBhcmd1bWVudCArIGxlbmd0aCA6IGFyZ3VtZW50IF07CgkJfSksCgoJCSJldmVuIjogY3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbiggbWF0Y2hJbmRleGVzLCBsZW5ndGggKSB7CgkJCXZhciBpID0gMDsKCQkJZm9yICggOyBpIDwgbGVuZ3RoOyBpICs9IDIgKSB7CgkJCQltYXRjaEluZGV4ZXMucHVzaCggaSApOwoJCQl9CgkJCXJldHVybiBtYXRjaEluZGV4ZXM7CgkJfSksCgoJCSJvZGQiOiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKCBtYXRjaEluZGV4ZXMsIGxlbmd0aCApIHsKCQkJdmFyIGkgPSAxOwoJCQlmb3IgKCA7IGkgPCBsZW5ndGg7IGkgKz0gMiApIHsKCQkJCW1hdGNoSW5kZXhlcy5wdXNoKCBpICk7CgkJCX0KCQkJcmV0dXJuIG1hdGNoSW5kZXhlczsKCQl9KSwKCgkJImx0IjogY3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbiggbWF0Y2hJbmRleGVzLCBsZW5ndGgsIGFyZ3VtZW50ICkgewoJCQl2YXIgaSA9IGFyZ3VtZW50IDwgMCA/IGFyZ3VtZW50ICsgbGVuZ3RoIDogYXJndW1lbnQ7CgkJCWZvciAoIDsgLS1pID49IDA7ICkgewoJCQkJbWF0Y2hJbmRleGVzLnB1c2goIGkgKTsKCQkJfQoJCQlyZXR1cm4gbWF0Y2hJbmRleGVzOwoJCX0pLAoKCQkiZ3QiOiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKCBtYXRjaEluZGV4ZXMsIGxlbmd0aCwgYXJndW1lbnQgKSB7CgkJCXZhciBpID0gYXJndW1lbnQgPCAwID8gYXJndW1lbnQgKyBsZW5ndGggOiBhcmd1bWVudDsKCQkJZm9yICggOyArK2kgPCBsZW5ndGg7ICkgewoJCQkJbWF0Y2hJbmRleGVzLnB1c2goIGkgKTsKCQkJfQoJCQlyZXR1cm4gbWF0Y2hJbmRleGVzOwoJCX0pCgl9Cn07CgpFeHByLnBzZXVkb3NbIm50aCJdID0gRXhwci5wc2V1ZG9zWyJlcSJdOwoKLy8gQWRkIGJ1dHRvbi9pbnB1dCB0eXBlIHBzZXVkb3MKZm9yICggaSBpbiB7IHJhZGlvOiB0cnVlLCBjaGVja2JveDogdHJ1ZSwgZmlsZTogdHJ1ZSwgcGFzc3dvcmQ6IHRydWUsIGltYWdlOiB0cnVlIH0gKSB7CglFeHByLnBzZXVkb3NbIGkgXSA9IGNyZWF0ZUlucHV0UHNldWRvKCBpICk7Cn0KZm9yICggaSBpbiB7IHN1Ym1pdDogdHJ1ZSwgcmVzZXQ6IHRydWUgfSApIHsKCUV4cHIucHNldWRvc1sgaSBdID0gY3JlYXRlQnV0dG9uUHNldWRvKCBpICk7Cn0KCi8vIEVhc3kgQVBJIGZvciBjcmVhdGluZyBuZXcgc2V0RmlsdGVycwpmdW5jdGlvbiBzZXRGaWx0ZXJzKCkge30Kc2V0RmlsdGVycy5wcm90b3R5cGUgPSBFeHByLmZpbHRlcnMgPSBFeHByLnBzZXVkb3M7CkV4cHIuc2V0RmlsdGVycyA9IG5ldyBzZXRGaWx0ZXJzKCk7Cgp0b2tlbml6ZSA9IFNpenpsZS50b2tlbml6ZSA9IGZ1bmN0aW9uKCBzZWxlY3RvciwgcGFyc2VPbmx5ICkgewoJdmFyIG1hdGNoZWQsIG1hdGNoLCB0b2tlbnMsIHR5cGUsCgkJc29GYXIsIGdyb3VwcywgcHJlRmlsdGVycywKCQljYWNoZWQgPSB0b2tlbkNhY2hlWyBzZWxlY3RvciArICIgIiBdOwoKCWlmICggY2FjaGVkICkgewoJCXJldHVybiBwYXJzZU9ubHkgPyAwIDogY2FjaGVkLnNsaWNlKCAwICk7Cgl9CgoJc29GYXIgPSBzZWxlY3RvcjsKCWdyb3VwcyA9IFtdOwoJcHJlRmlsdGVycyA9IEV4cHIucHJlRmlsdGVyOwoKCXdoaWxlICggc29GYXIgKSB7CgoJCS8vIENvbW1hIGFuZCBmaXJzdCBydW4KCQlpZiAoICFtYXRjaGVkIHx8IChtYXRjaCA9IHJjb21tYS5leGVjKCBzb0ZhciApKSApIHsKCQkJaWYgKCBtYXRjaCApIHsKCQkJCS8vIERvbid0IGNvbnN1bWUgdHJhaWxpbmcgY29tbWFzIGFzIHZhbGlkCgkJCQlzb0ZhciA9IHNvRmFyLnNsaWNlKCBtYXRjaFswXS5sZW5ndGggKSB8fCBzb0ZhcjsKCQkJfQoJCQlncm91cHMucHVzaCggKHRva2VucyA9IFtdKSApOwoJCX0KCgkJbWF0Y2hlZCA9IGZhbHNlOwoKCQkvLyBDb21iaW5hdG9ycwoJCWlmICggKG1hdGNoID0gcmNvbWJpbmF0b3JzLmV4ZWMoIHNvRmFyICkpICkgewoJCQltYXRjaGVkID0gbWF0Y2guc2hpZnQoKTsKCQkJdG9rZW5zLnB1c2goewoJCQkJdmFsdWU6IG1hdGNoZWQsCgkJCQkvLyBDYXN0IGRlc2NlbmRhbnQgY29tYmluYXRvcnMgdG8gc3BhY2UKCQkJCXR5cGU6IG1hdGNoWzBdLnJlcGxhY2UoIHJ0cmltLCAiICIgKQoJCQl9KTsKCQkJc29GYXIgPSBzb0Zhci5zbGljZSggbWF0Y2hlZC5sZW5ndGggKTsKCQl9CgoJCS8vIEZpbHRlcnMKCQlmb3IgKCB0eXBlIGluIEV4cHIuZmlsdGVyICkgewoJCQlpZiAoIChtYXRjaCA9IG1hdGNoRXhwclsgdHlwZSBdLmV4ZWMoIHNvRmFyICkpICYmICghcHJlRmlsdGVyc1sgdHlwZSBdIHx8CgkJCQkobWF0Y2ggPSBwcmVGaWx0ZXJzWyB0eXBlIF0oIG1hdGNoICkpKSApIHsKCQkJCW1hdGNoZWQgPSBtYXRjaC5zaGlmdCgpOwoJCQkJdG9rZW5zLnB1c2goewoJCQkJCXZhbHVlOiBtYXRjaGVkLAoJCQkJCXR5cGU6IHR5cGUsCgkJCQkJbWF0Y2hlczogbWF0Y2gKCQkJCX0pOwoJCQkJc29GYXIgPSBzb0Zhci5zbGljZSggbWF0Y2hlZC5sZW5ndGggKTsKCQkJfQoJCX0KCgkJaWYgKCAhbWF0Y2hlZCApIHsKCQkJYnJlYWs7CgkJfQoJfQoKCS8vIFJldHVybiB0aGUgbGVuZ3RoIG9mIHRoZSBpbnZhbGlkIGV4Y2VzcwoJLy8gaWYgd2UncmUganVzdCBwYXJzaW5nCgkvLyBPdGhlcndpc2UsIHRocm93IGFuIGVycm9yIG9yIHJldHVybiB0b2tlbnMKCXJldHVybiBwYXJzZU9ubHkgPwoJCXNvRmFyLmxlbmd0aCA6CgkJc29GYXIgPwoJCQlTaXp6bGUuZXJyb3IoIHNlbGVjdG9yICkgOgoJCQkvLyBDYWNoZSB0aGUgdG9rZW5zCgkJCXRva2VuQ2FjaGUoIHNlbGVjdG9yLCBncm91cHMgKS5zbGljZSggMCApOwp9OwoKZnVuY3Rpb24gdG9TZWxlY3RvciggdG9rZW5zICkgewoJdmFyIGkgPSAwLAoJCWxlbiA9IHRva2Vucy5sZW5ndGgsCgkJc2VsZWN0b3IgPSAiIjsKCWZvciAoIDsgaSA8IGxlbjsgaSsrICkgewoJCXNlbGVjdG9yICs9IHRva2Vuc1tpXS52YWx1ZTsKCX0KCXJldHVybiBzZWxlY3RvcjsKfQoKZnVuY3Rpb24gYWRkQ29tYmluYXRvciggbWF0Y2hlciwgY29tYmluYXRvciwgYmFzZSApIHsKCXZhciBkaXIgPSBjb21iaW5hdG9yLmRpciwKCQljaGVja05vbkVsZW1lbnRzID0gYmFzZSAmJiBkaXIgPT09ICJwYXJlbnROb2RlIiwKCQlkb25lTmFtZSA9IGRvbmUrKzsKCglyZXR1cm4gY29tYmluYXRvci5maXJzdCA/CgkJLy8gQ2hlY2sgYWdhaW5zdCBjbG9zZXN0IGFuY2VzdG9yL3ByZWNlZGluZyBlbGVtZW50CgkJZnVuY3Rpb24oIGVsZW0sIGNvbnRleHQsIHhtbCApIHsKCQkJd2hpbGUgKCAoZWxlbSA9IGVsZW1bIGRpciBdKSApIHsKCQkJCWlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSB8fCBjaGVja05vbkVsZW1lbnRzICkgewoJCQkJCXJldHVybiBtYXRjaGVyKCBlbGVtLCBjb250ZXh0LCB4bWwgKTsKCQkJCX0KCQkJfQoJCX0gOgoKCQkvLyBDaGVjayBhZ2FpbnN0IGFsbCBhbmNlc3Rvci9wcmVjZWRpbmcgZWxlbWVudHMKCQlmdW5jdGlvbiggZWxlbSwgY29udGV4dCwgeG1sICkgewoJCQl2YXIgb2xkQ2FjaGUsIHVuaXF1ZUNhY2hlLCBvdXRlckNhY2hlLAoJCQkJbmV3Q2FjaGUgPSBbIGRpcnJ1bnMsIGRvbmVOYW1lIF07CgoJCQkvLyBXZSBjYW4ndCBzZXQgYXJiaXRyYXJ5IGRhdGEgb24gWE1MIG5vZGVzLCBzbyB0aGV5IGRvbid0IGJlbmVmaXQgZnJvbSBjb21iaW5hdG9yIGNhY2hpbmcKCQkJaWYgKCB4bWwgKSB7CgkJCQl3aGlsZSAoIChlbGVtID0gZWxlbVsgZGlyIF0pICkgewoJCQkJCWlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSB8fCBjaGVja05vbkVsZW1lbnRzICkgewoJCQkJCQlpZiAoIG1hdGNoZXIoIGVsZW0sIGNvbnRleHQsIHhtbCApICkgewoJCQkJCQkJcmV0dXJuIHRydWU7CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCX0gZWxzZSB7CgkJCQl3aGlsZSAoIChlbGVtID0gZWxlbVsgZGlyIF0pICkgewoJCQkJCWlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSB8fCBjaGVja05vbkVsZW1lbnRzICkgewoJCQkJCQlvdXRlckNhY2hlID0gZWxlbVsgZXhwYW5kbyBdIHx8IChlbGVtWyBleHBhbmRvIF0gPSB7fSk7CgoJCQkJCQkvLyBTdXBwb3J0OiBJRSA8OSBvbmx5CgkJCQkJCS8vIERlZmVuZCBhZ2FpbnN0IGNsb25lZCBhdHRyb3BlcnRpZXMgKGpRdWVyeSBnaC0xNzA5KQoJCQkJCQl1bmlxdWVDYWNoZSA9IG91dGVyQ2FjaGVbIGVsZW0udW5pcXVlSUQgXSB8fCAob3V0ZXJDYWNoZVsgZWxlbS51bmlxdWVJRCBdID0ge30pOwoKCQkJCQkJaWYgKCAob2xkQ2FjaGUgPSB1bmlxdWVDYWNoZVsgZGlyIF0pICYmCgkJCQkJCQlvbGRDYWNoZVsgMCBdID09PSBkaXJydW5zICYmIG9sZENhY2hlWyAxIF0gPT09IGRvbmVOYW1lICkgewoKCQkJCQkJCS8vIEFzc2lnbiB0byBuZXdDYWNoZSBzbyByZXN1bHRzIGJhY2stcHJvcGFnYXRlIHRvIHByZXZpb3VzIGVsZW1lbnRzCgkJCQkJCQlyZXR1cm4gKG5ld0NhY2hlWyAyIF0gPSBvbGRDYWNoZVsgMiBdKTsKCQkJCQkJfSBlbHNlIHsKCQkJCQkJCS8vIFJldXNlIG5ld2NhY2hlIHNvIHJlc3VsdHMgYmFjay1wcm9wYWdhdGUgdG8gcHJldmlvdXMgZWxlbWVudHMKCQkJCQkJCXVuaXF1ZUNhY2hlWyBkaXIgXSA9IG5ld0NhY2hlOwoKCQkJCQkJCS8vIEEgbWF0Y2ggbWVhbnMgd2UncmUgZG9uZTsgYSBmYWlsIG1lYW5zIHdlIGhhdmUgdG8ga2VlcCBjaGVja2luZwoJCQkJCQkJaWYgKCAobmV3Q2FjaGVbIDIgXSA9IG1hdGNoZXIoIGVsZW0sIGNvbnRleHQsIHhtbCApKSApIHsKCQkJCQkJCQlyZXR1cm4gdHJ1ZTsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJfQoJCX07Cn0KCmZ1bmN0aW9uIGVsZW1lbnRNYXRjaGVyKCBtYXRjaGVycyApIHsKCXJldHVybiBtYXRjaGVycy5sZW5ndGggPiAxID8KCQlmdW5jdGlvbiggZWxlbSwgY29udGV4dCwgeG1sICkgewoJCQl2YXIgaSA9IG1hdGNoZXJzLmxlbmd0aDsKCQkJd2hpbGUgKCBpLS0gKSB7CgkJCQlpZiAoICFtYXRjaGVyc1tpXSggZWxlbSwgY29udGV4dCwgeG1sICkgKSB7CgkJCQkJcmV0dXJuIGZhbHNlOwoJCQkJfQoJCQl9CgkJCXJldHVybiB0cnVlOwoJCX0gOgoJCW1hdGNoZXJzWzBdOwp9CgpmdW5jdGlvbiBtdWx0aXBsZUNvbnRleHRzKCBzZWxlY3RvciwgY29udGV4dHMsIHJlc3VsdHMgKSB7Cgl2YXIgaSA9IDAsCgkJbGVuID0gY29udGV4dHMubGVuZ3RoOwoJZm9yICggOyBpIDwgbGVuOyBpKysgKSB7CgkJU2l6emxlKCBzZWxlY3RvciwgY29udGV4dHNbaV0sIHJlc3VsdHMgKTsKCX0KCXJldHVybiByZXN1bHRzOwp9CgpmdW5jdGlvbiBjb25kZW5zZSggdW5tYXRjaGVkLCBtYXAsIGZpbHRlciwgY29udGV4dCwgeG1sICkgewoJdmFyIGVsZW0sCgkJbmV3VW5tYXRjaGVkID0gW10sCgkJaSA9IDAsCgkJbGVuID0gdW5tYXRjaGVkLmxlbmd0aCwKCQltYXBwZWQgPSBtYXAgIT0gbnVsbDsKCglmb3IgKCA7IGkgPCBsZW47IGkrKyApIHsKCQlpZiAoIChlbGVtID0gdW5tYXRjaGVkW2ldKSApIHsKCQkJaWYgKCAhZmlsdGVyIHx8IGZpbHRlciggZWxlbSwgY29udGV4dCwgeG1sICkgKSB7CgkJCQluZXdVbm1hdGNoZWQucHVzaCggZWxlbSApOwoJCQkJaWYgKCBtYXBwZWQgKSB7CgkJCQkJbWFwLnB1c2goIGkgKTsKCQkJCX0KCQkJfQoJCX0KCX0KCglyZXR1cm4gbmV3VW5tYXRjaGVkOwp9CgpmdW5jdGlvbiBzZXRNYXRjaGVyKCBwcmVGaWx0ZXIsIHNlbGVjdG9yLCBtYXRjaGVyLCBwb3N0RmlsdGVyLCBwb3N0RmluZGVyLCBwb3N0U2VsZWN0b3IgKSB7CglpZiAoIHBvc3RGaWx0ZXIgJiYgIXBvc3RGaWx0ZXJbIGV4cGFuZG8gXSApIHsKCQlwb3N0RmlsdGVyID0gc2V0TWF0Y2hlciggcG9zdEZpbHRlciApOwoJfQoJaWYgKCBwb3N0RmluZGVyICYmICFwb3N0RmluZGVyWyBleHBhbmRvIF0gKSB7CgkJcG9zdEZpbmRlciA9IHNldE1hdGNoZXIoIHBvc3RGaW5kZXIsIHBvc3RTZWxlY3RvciApOwoJfQoJcmV0dXJuIG1hcmtGdW5jdGlvbihmdW5jdGlvbiggc2VlZCwgcmVzdWx0cywgY29udGV4dCwgeG1sICkgewoJCXZhciB0ZW1wLCBpLCBlbGVtLAoJCQlwcmVNYXAgPSBbXSwKCQkJcG9zdE1hcCA9IFtdLAoJCQlwcmVleGlzdGluZyA9IHJlc3VsdHMubGVuZ3RoLAoKCQkJLy8gR2V0IGluaXRpYWwgZWxlbWVudHMgZnJvbSBzZWVkIG9yIGNvbnRleHQKCQkJZWxlbXMgPSBzZWVkIHx8IG11bHRpcGxlQ29udGV4dHMoIHNlbGVjdG9yIHx8ICIqIiwgY29udGV4dC5ub2RlVHlwZSA/IFsgY29udGV4dCBdIDogY29udGV4dCwgW10gKSwKCgkJCS8vIFByZWZpbHRlciB0byBnZXQgbWF0Y2hlciBpbnB1dCwgcHJlc2VydmluZyBhIG1hcCBmb3Igc2VlZC1yZXN1bHRzIHN5bmNocm9uaXphdGlvbgoJCQltYXRjaGVySW4gPSBwcmVGaWx0ZXIgJiYgKCBzZWVkIHx8ICFzZWxlY3RvciApID8KCQkJCWNvbmRlbnNlKCBlbGVtcywgcHJlTWFwLCBwcmVGaWx0ZXIsIGNvbnRleHQsIHhtbCApIDoKCQkJCWVsZW1zLAoKCQkJbWF0Y2hlck91dCA9IG1hdGNoZXIgPwoJCQkJLy8gSWYgd2UgaGF2ZSBhIHBvc3RGaW5kZXIsIG9yIGZpbHRlcmVkIHNlZWQsIG9yIG5vbi1zZWVkIHBvc3RGaWx0ZXIgb3IgcHJlZXhpc3RpbmcgcmVzdWx0cywKCQkJCXBvc3RGaW5kZXIgfHwgKCBzZWVkID8gcHJlRmlsdGVyIDogcHJlZXhpc3RpbmcgfHwgcG9zdEZpbHRlciApID8KCgkJCQkJLy8gLi4uaW50ZXJtZWRpYXRlIHByb2Nlc3NpbmcgaXMgbmVjZXNzYXJ5CgkJCQkJW10gOgoKCQkJCQkvLyAuLi5vdGhlcndpc2UgdXNlIHJlc3VsdHMgZGlyZWN0bHkKCQkJCQlyZXN1bHRzIDoKCQkJCW1hdGNoZXJJbjsKCgkJLy8gRmluZCBwcmltYXJ5IG1hdGNoZXMKCQlpZiAoIG1hdGNoZXIgKSB7CgkJCW1hdGNoZXIoIG1hdGNoZXJJbiwgbWF0Y2hlck91dCwgY29udGV4dCwgeG1sICk7CgkJfQoKCQkvLyBBcHBseSBwb3N0RmlsdGVyCgkJaWYgKCBwb3N0RmlsdGVyICkgewoJCQl0ZW1wID0gY29uZGVuc2UoIG1hdGNoZXJPdXQsIHBvc3RNYXAgKTsKCQkJcG9zdEZpbHRlciggdGVtcCwgW10sIGNvbnRleHQsIHhtbCApOwoKCQkJLy8gVW4tbWF0Y2ggZmFpbGluZyBlbGVtZW50cyBieSBtb3ZpbmcgdGhlbSBiYWNrIHRvIG1hdGNoZXJJbgoJCQlpID0gdGVtcC5sZW5ndGg7CgkJCXdoaWxlICggaS0tICkgewoJCQkJaWYgKCAoZWxlbSA9IHRlbXBbaV0pICkgewoJCQkJCW1hdGNoZXJPdXRbIHBvc3RNYXBbaV0gXSA9ICEobWF0Y2hlckluWyBwb3N0TWFwW2ldIF0gPSBlbGVtKTsKCQkJCX0KCQkJfQoJCX0KCgkJaWYgKCBzZWVkICkgewoJCQlpZiAoIHBvc3RGaW5kZXIgfHwgcHJlRmlsdGVyICkgewoJCQkJaWYgKCBwb3N0RmluZGVyICkgewoJCQkJCS8vIEdldCB0aGUgZmluYWwgbWF0Y2hlck91dCBieSBjb25kZW5zaW5nIHRoaXMgaW50ZXJtZWRpYXRlIGludG8gcG9zdEZpbmRlciBjb250ZXh0cwoJCQkJCXRlbXAgPSBbXTsKCQkJCQlpID0gbWF0Y2hlck91dC5sZW5ndGg7CgkJCQkJd2hpbGUgKCBpLS0gKSB7CgkJCQkJCWlmICggKGVsZW0gPSBtYXRjaGVyT3V0W2ldKSApIHsKCQkJCQkJCS8vIFJlc3RvcmUgbWF0Y2hlckluIHNpbmNlIGVsZW0gaXMgbm90IHlldCBhIGZpbmFsIG1hdGNoCgkJCQkJCQl0ZW1wLnB1c2goIChtYXRjaGVySW5baV0gPSBlbGVtKSApOwoJCQkJCQl9CgkJCQkJfQoJCQkJCXBvc3RGaW5kZXIoIG51bGwsIChtYXRjaGVyT3V0ID0gW10pLCB0ZW1wLCB4bWwgKTsKCQkJCX0KCgkJCQkvLyBNb3ZlIG1hdGNoZWQgZWxlbWVudHMgZnJvbSBzZWVkIHRvIHJlc3VsdHMgdG8ga2VlcCB0aGVtIHN5bmNocm9uaXplZAoJCQkJaSA9IG1hdGNoZXJPdXQubGVuZ3RoOwoJCQkJd2hpbGUgKCBpLS0gKSB7CgkJCQkJaWYgKCAoZWxlbSA9IG1hdGNoZXJPdXRbaV0pICYmCgkJCQkJCSh0ZW1wID0gcG9zdEZpbmRlciA/IGluZGV4T2YoIHNlZWQsIGVsZW0gKSA6IHByZU1hcFtpXSkgPiAtMSApIHsKCgkJCQkJCXNlZWRbdGVtcF0gPSAhKHJlc3VsdHNbdGVtcF0gPSBlbGVtKTsKCQkJCQl9CgkJCQl9CgkJCX0KCgkJLy8gQWRkIGVsZW1lbnRzIHRvIHJlc3VsdHMsIHRocm91Z2ggcG9zdEZpbmRlciBpZiBkZWZpbmVkCgkJfSBlbHNlIHsKCQkJbWF0Y2hlck91dCA9IGNvbmRlbnNlKAoJCQkJbWF0Y2hlck91dCA9PT0gcmVzdWx0cyA/CgkJCQkJbWF0Y2hlck91dC5zcGxpY2UoIHByZWV4aXN0aW5nLCBtYXRjaGVyT3V0Lmxlbmd0aCApIDoKCQkJCQltYXRjaGVyT3V0CgkJCSk7CgkJCWlmICggcG9zdEZpbmRlciApIHsKCQkJCXBvc3RGaW5kZXIoIG51bGwsIHJlc3VsdHMsIG1hdGNoZXJPdXQsIHhtbCApOwoJCQl9IGVsc2UgewoJCQkJcHVzaC5hcHBseSggcmVzdWx0cywgbWF0Y2hlck91dCApOwoJCQl9CgkJfQoJfSk7Cn0KCmZ1bmN0aW9uIG1hdGNoZXJGcm9tVG9rZW5zKCB0b2tlbnMgKSB7Cgl2YXIgY2hlY2tDb250ZXh0LCBtYXRjaGVyLCBqLAoJCWxlbiA9IHRva2Vucy5sZW5ndGgsCgkJbGVhZGluZ1JlbGF0aXZlID0gRXhwci5yZWxhdGl2ZVsgdG9rZW5zWzBdLnR5cGUgXSwKCQlpbXBsaWNpdFJlbGF0aXZlID0gbGVhZGluZ1JlbGF0aXZlIHx8IEV4cHIucmVsYXRpdmVbIiAiXSwKCQlpID0gbGVhZGluZ1JlbGF0aXZlID8gMSA6IDAsCgoJCS8vIFRoZSBmb3VuZGF0aW9uYWwgbWF0Y2hlciBlbnN1cmVzIHRoYXQgZWxlbWVudHMgYXJlIHJlYWNoYWJsZSBmcm9tIHRvcC1sZXZlbCBjb250ZXh0KHMpCgkJbWF0Y2hDb250ZXh0ID0gYWRkQ29tYmluYXRvciggZnVuY3Rpb24oIGVsZW0gKSB7CgkJCXJldHVybiBlbGVtID09PSBjaGVja0NvbnRleHQ7CgkJfSwgaW1wbGljaXRSZWxhdGl2ZSwgdHJ1ZSApLAoJCW1hdGNoQW55Q29udGV4dCA9IGFkZENvbWJpbmF0b3IoIGZ1bmN0aW9uKCBlbGVtICkgewoJCQlyZXR1cm4gaW5kZXhPZiggY2hlY2tDb250ZXh0LCBlbGVtICkgPiAtMTsKCQl9LCBpbXBsaWNpdFJlbGF0aXZlLCB0cnVlICksCgkJbWF0Y2hlcnMgPSBbIGZ1bmN0aW9uKCBlbGVtLCBjb250ZXh0LCB4bWwgKSB7CgkJCXZhciByZXQgPSAoICFsZWFkaW5nUmVsYXRpdmUgJiYgKCB4bWwgfHwgY29udGV4dCAhPT0gb3V0ZXJtb3N0Q29udGV4dCApICkgfHwgKAoJCQkJKGNoZWNrQ29udGV4dCA9IGNvbnRleHQpLm5vZGVUeXBlID8KCQkJCQltYXRjaENvbnRleHQoIGVsZW0sIGNvbnRleHQsIHhtbCApIDoKCQkJCQltYXRjaEFueUNvbnRleHQoIGVsZW0sIGNvbnRleHQsIHhtbCApICk7CgkJCS8vIEF2b2lkIGhhbmdpbmcgb250byBlbGVtZW50IChpc3N1ZSAjMjk5KQoJCQljaGVja0NvbnRleHQgPSBudWxsOwoJCQlyZXR1cm4gcmV0OwoJCX0gXTsKCglmb3IgKCA7IGkgPCBsZW47IGkrKyApIHsKCQlpZiAoIChtYXRjaGVyID0gRXhwci5yZWxhdGl2ZVsgdG9rZW5zW2ldLnR5cGUgXSkgKSB7CgkJCW1hdGNoZXJzID0gWyBhZGRDb21iaW5hdG9yKGVsZW1lbnRNYXRjaGVyKCBtYXRjaGVycyApLCBtYXRjaGVyKSBdOwoJCX0gZWxzZSB7CgkJCW1hdGNoZXIgPSBFeHByLmZpbHRlclsgdG9rZW5zW2ldLnR5cGUgXS5hcHBseSggbnVsbCwgdG9rZW5zW2ldLm1hdGNoZXMgKTsKCgkJCS8vIFJldHVybiBzcGVjaWFsIHVwb24gc2VlaW5nIGEgcG9zaXRpb25hbCBtYXRjaGVyCgkJCWlmICggbWF0Y2hlclsgZXhwYW5kbyBdICkgewoJCQkJLy8gRmluZCB0aGUgbmV4dCByZWxhdGl2ZSBvcGVyYXRvciAoaWYgYW55KSBmb3IgcHJvcGVyIGhhbmRsaW5nCgkJCQlqID0gKytpOwoJCQkJZm9yICggOyBqIDwgbGVuOyBqKysgKSB7CgkJCQkJaWYgKCBFeHByLnJlbGF0aXZlWyB0b2tlbnNbal0udHlwZSBdICkgewoJCQkJCQlicmVhazsKCQkJCQl9CgkJCQl9CgkJCQlyZXR1cm4gc2V0TWF0Y2hlcigKCQkJCQlpID4gMSAmJiBlbGVtZW50TWF0Y2hlciggbWF0Y2hlcnMgKSwKCQkJCQlpID4gMSAmJiB0b1NlbGVjdG9yKAoJCQkJCQkvLyBJZiB0aGUgcHJlY2VkaW5nIHRva2VuIHdhcyBhIGRlc2NlbmRhbnQgY29tYmluYXRvciwgaW5zZXJ0IGFuIGltcGxpY2l0IGFueS1lbGVtZW50IGAqYAoJCQkJCQl0b2tlbnMuc2xpY2UoIDAsIGkgLSAxICkuY29uY2F0KHsgdmFsdWU6IHRva2Vuc1sgaSAtIDIgXS50eXBlID09PSAiICIgPyAiKiIgOiAiIiB9KQoJCQkJCSkucmVwbGFjZSggcnRyaW0sICIkMSIgKSwKCQkJCQltYXRjaGVyLAoJCQkJCWkgPCBqICYmIG1hdGNoZXJGcm9tVG9rZW5zKCB0b2tlbnMuc2xpY2UoIGksIGogKSApLAoJCQkJCWogPCBsZW4gJiYgbWF0Y2hlckZyb21Ub2tlbnMoICh0b2tlbnMgPSB0b2tlbnMuc2xpY2UoIGogKSkgKSwKCQkJCQlqIDwgbGVuICYmIHRvU2VsZWN0b3IoIHRva2VucyApCgkJCQkpOwoJCQl9CgkJCW1hdGNoZXJzLnB1c2goIG1hdGNoZXIgKTsKCQl9Cgl9CgoJcmV0dXJuIGVsZW1lbnRNYXRjaGVyKCBtYXRjaGVycyApOwp9CgpmdW5jdGlvbiBtYXRjaGVyRnJvbUdyb3VwTWF0Y2hlcnMoIGVsZW1lbnRNYXRjaGVycywgc2V0TWF0Y2hlcnMgKSB7Cgl2YXIgYnlTZXQgPSBzZXRNYXRjaGVycy5sZW5ndGggPiAwLAoJCWJ5RWxlbWVudCA9IGVsZW1lbnRNYXRjaGVycy5sZW5ndGggPiAwLAoJCXN1cGVyTWF0Y2hlciA9IGZ1bmN0aW9uKCBzZWVkLCBjb250ZXh0LCB4bWwsIHJlc3VsdHMsIG91dGVybW9zdCApIHsKCQkJdmFyIGVsZW0sIGosIG1hdGNoZXIsCgkJCQltYXRjaGVkQ291bnQgPSAwLAoJCQkJaSA9ICIwIiwKCQkJCXVubWF0Y2hlZCA9IHNlZWQgJiYgW10sCgkJCQlzZXRNYXRjaGVkID0gW10sCgkJCQljb250ZXh0QmFja3VwID0gb3V0ZXJtb3N0Q29udGV4dCwKCQkJCS8vIFdlIG11c3QgYWx3YXlzIGhhdmUgZWl0aGVyIHNlZWQgZWxlbWVudHMgb3Igb3V0ZXJtb3N0IGNvbnRleHQKCQkJCWVsZW1zID0gc2VlZCB8fCBieUVsZW1lbnQgJiYgRXhwci5maW5kWyJUQUciXSggIioiLCBvdXRlcm1vc3QgKSwKCQkJCS8vIFVzZSBpbnRlZ2VyIGRpcnJ1bnMgaWZmIHRoaXMgaXMgdGhlIG91dGVybW9zdCBtYXRjaGVyCgkJCQlkaXJydW5zVW5pcXVlID0gKGRpcnJ1bnMgKz0gY29udGV4dEJhY2t1cCA9PSBudWxsID8gMSA6IE1hdGgucmFuZG9tKCkgfHwgMC4xKSwKCQkJCWxlbiA9IGVsZW1zLmxlbmd0aDsKCgkJCWlmICggb3V0ZXJtb3N0ICkgewoJCQkJb3V0ZXJtb3N0Q29udGV4dCA9IGNvbnRleHQgPT09IGRvY3VtZW50IHx8IGNvbnRleHQgfHwgb3V0ZXJtb3N0OwoJCQl9CgoJCQkvLyBBZGQgZWxlbWVudHMgcGFzc2luZyBlbGVtZW50TWF0Y2hlcnMgZGlyZWN0bHkgdG8gcmVzdWx0cwoJCQkvLyBTdXBwb3J0OiBJRTw5LCBTYWZhcmkKCQkJLy8gVG9sZXJhdGUgTm9kZUxpc3QgcHJvcGVydGllcyAoSUU6ICJsZW5ndGgiOyBTYWZhcmk6IDxudW1iZXI+KSBtYXRjaGluZyBlbGVtZW50cyBieSBpZAoJCQlmb3IgKCA7IGkgIT09IGxlbiAmJiAoZWxlbSA9IGVsZW1zW2ldKSAhPSBudWxsOyBpKysgKSB7CgkJCQlpZiAoIGJ5RWxlbWVudCAmJiBlbGVtICkgewoJCQkJCWogPSAwOwoJCQkJCWlmICggIWNvbnRleHQgJiYgZWxlbS5vd25lckRvY3VtZW50ICE9PSBkb2N1bWVudCApIHsKCQkJCQkJc2V0RG9jdW1lbnQoIGVsZW0gKTsKCQkJCQkJeG1sID0gIWRvY3VtZW50SXNIVE1MOwoJCQkJCX0KCQkJCQl3aGlsZSAoIChtYXRjaGVyID0gZWxlbWVudE1hdGNoZXJzW2orK10pICkgewoJCQkJCQlpZiAoIG1hdGNoZXIoIGVsZW0sIGNvbnRleHQgfHwgZG9jdW1lbnQsIHhtbCkgKSB7CgkJCQkJCQlyZXN1bHRzLnB1c2goIGVsZW0gKTsKCQkJCQkJCWJyZWFrOwoJCQkJCQl9CgkJCQkJfQoJCQkJCWlmICggb3V0ZXJtb3N0ICkgewoJCQkJCQlkaXJydW5zID0gZGlycnVuc1VuaXF1ZTsKCQkJCQl9CgkJCQl9CgoJCQkJLy8gVHJhY2sgdW5tYXRjaGVkIGVsZW1lbnRzIGZvciBzZXQgZmlsdGVycwoJCQkJaWYgKCBieVNldCApIHsKCQkJCQkvLyBUaGV5IHdpbGwgaGF2ZSBnb25lIHRocm91Z2ggYWxsIHBvc3NpYmxlIG1hdGNoZXJzCgkJCQkJaWYgKCAoZWxlbSA9ICFtYXRjaGVyICYmIGVsZW0pICkgewoJCQkJCQltYXRjaGVkQ291bnQtLTsKCQkJCQl9CgoJCQkJCS8vIExlbmd0aGVuIHRoZSBhcnJheSBmb3IgZXZlcnkgZWxlbWVudCwgbWF0Y2hlZCBvciBub3QKCQkJCQlpZiAoIHNlZWQgKSB7CgkJCQkJCXVubWF0Y2hlZC5wdXNoKCBlbGVtICk7CgkJCQkJfQoJCQkJfQoJCQl9CgoJCQkvLyBgaWAgaXMgbm93IHRoZSBjb3VudCBvZiBlbGVtZW50cyB2aXNpdGVkIGFib3ZlLCBhbmQgYWRkaW5nIGl0IHRvIGBtYXRjaGVkQ291bnRgCgkJCS8vIG1ha2VzIHRoZSBsYXR0ZXIgbm9ubmVnYXRpdmUuCgkJCW1hdGNoZWRDb3VudCArPSBpOwoKCQkJLy8gQXBwbHkgc2V0IGZpbHRlcnMgdG8gdW5tYXRjaGVkIGVsZW1lbnRzCgkJCS8vIE5PVEU6IFRoaXMgY2FuIGJlIHNraXBwZWQgaWYgdGhlcmUgYXJlIG5vIHVubWF0Y2hlZCBlbGVtZW50cyAoaS5lLiwgYG1hdGNoZWRDb3VudGAKCQkJLy8gZXF1YWxzIGBpYCksIHVubGVzcyB3ZSBkaWRuJ3QgdmlzaXQgX2FueV8gZWxlbWVudHMgaW4gdGhlIGFib3ZlIGxvb3AgYmVjYXVzZSB3ZSBoYXZlCgkJCS8vIG5vIGVsZW1lbnQgbWF0Y2hlcnMgYW5kIG5vIHNlZWQuCgkJCS8vIEluY3JlbWVudGluZyBhbiBpbml0aWFsbHktc3RyaW5nICIwIiBgaWAgYWxsb3dzIGBpYCB0byByZW1haW4gYSBzdHJpbmcgb25seSBpbiB0aGF0CgkJCS8vIGNhc2UsIHdoaWNoIHdpbGwgcmVzdWx0IGluIGEgIjAwIiBgbWF0Y2hlZENvdW50YCB0aGF0IGRpZmZlcnMgZnJvbSBgaWAgYnV0IGlzIGFsc28KCQkJLy8gbnVtZXJpY2FsbHkgemVyby4KCQkJaWYgKCBieVNldCAmJiBpICE9PSBtYXRjaGVkQ291bnQgKSB7CgkJCQlqID0gMDsKCQkJCXdoaWxlICggKG1hdGNoZXIgPSBzZXRNYXRjaGVyc1tqKytdKSApIHsKCQkJCQltYXRjaGVyKCB1bm1hdGNoZWQsIHNldE1hdGNoZWQsIGNvbnRleHQsIHhtbCApOwoJCQkJfQoKCQkJCWlmICggc2VlZCApIHsKCQkJCQkvLyBSZWludGVncmF0ZSBlbGVtZW50IG1hdGNoZXMgdG8gZWxpbWluYXRlIHRoZSBuZWVkIGZvciBzb3J0aW5nCgkJCQkJaWYgKCBtYXRjaGVkQ291bnQgPiAwICkgewoJCQkJCQl3aGlsZSAoIGktLSApIHsKCQkJCQkJCWlmICggISh1bm1hdGNoZWRbaV0gfHwgc2V0TWF0Y2hlZFtpXSkgKSB7CgkJCQkJCQkJc2V0TWF0Y2hlZFtpXSA9IHBvcC5jYWxsKCByZXN1bHRzICk7CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQl9CgoJCQkJCS8vIERpc2NhcmQgaW5kZXggcGxhY2Vob2xkZXIgdmFsdWVzIHRvIGdldCBvbmx5IGFjdHVhbCBtYXRjaGVzCgkJCQkJc2V0TWF0Y2hlZCA9IGNvbmRlbnNlKCBzZXRNYXRjaGVkICk7CgkJCQl9CgoJCQkJLy8gQWRkIG1hdGNoZXMgdG8gcmVzdWx0cwoJCQkJcHVzaC5hcHBseSggcmVzdWx0cywgc2V0TWF0Y2hlZCApOwoKCQkJCS8vIFNlZWRsZXNzIHNldCBtYXRjaGVzIHN1Y2NlZWRpbmcgbXVsdGlwbGUgc3VjY2Vzc2Z1bCBtYXRjaGVycyBzdGlwdWxhdGUgc29ydGluZwoJCQkJaWYgKCBvdXRlcm1vc3QgJiYgIXNlZWQgJiYgc2V0TWF0Y2hlZC5sZW5ndGggPiAwICYmCgkJCQkJKCBtYXRjaGVkQ291bnQgKyBzZXRNYXRjaGVycy5sZW5ndGggKSA+IDEgKSB7CgoJCQkJCVNpenpsZS51bmlxdWVTb3J0KCByZXN1bHRzICk7CgkJCQl9CgkJCX0KCgkJCS8vIE92ZXJyaWRlIG1hbmlwdWxhdGlvbiBvZiBnbG9iYWxzIGJ5IG5lc3RlZCBtYXRjaGVycwoJCQlpZiAoIG91dGVybW9zdCApIHsKCQkJCWRpcnJ1bnMgPSBkaXJydW5zVW5pcXVlOwoJCQkJb3V0ZXJtb3N0Q29udGV4dCA9IGNvbnRleHRCYWNrdXA7CgkJCX0KCgkJCXJldHVybiB1bm1hdGNoZWQ7CgkJfTsKCglyZXR1cm4gYnlTZXQgPwoJCW1hcmtGdW5jdGlvbiggc3VwZXJNYXRjaGVyICkgOgoJCXN1cGVyTWF0Y2hlcjsKfQoKY29tcGlsZSA9IFNpenpsZS5jb21waWxlID0gZnVuY3Rpb24oIHNlbGVjdG9yLCBtYXRjaCAvKiBJbnRlcm5hbCBVc2UgT25seSAqLyApIHsKCXZhciBpLAoJCXNldE1hdGNoZXJzID0gW10sCgkJZWxlbWVudE1hdGNoZXJzID0gW10sCgkJY2FjaGVkID0gY29tcGlsZXJDYWNoZVsgc2VsZWN0b3IgKyAiICIgXTsKCglpZiAoICFjYWNoZWQgKSB7CgkJLy8gR2VuZXJhdGUgYSBmdW5jdGlvbiBvZiByZWN1cnNpdmUgZnVuY3Rpb25zIHRoYXQgY2FuIGJlIHVzZWQgdG8gY2hlY2sgZWFjaCBlbGVtZW50CgkJaWYgKCAhbWF0Y2ggKSB7CgkJCW1hdGNoID0gdG9rZW5pemUoIHNlbGVjdG9yICk7CgkJfQoJCWkgPSBtYXRjaC5sZW5ndGg7CgkJd2hpbGUgKCBpLS0gKSB7CgkJCWNhY2hlZCA9IG1hdGNoZXJGcm9tVG9rZW5zKCBtYXRjaFtpXSApOwoJCQlpZiAoIGNhY2hlZFsgZXhwYW5kbyBdICkgewoJCQkJc2V0TWF0Y2hlcnMucHVzaCggY2FjaGVkICk7CgkJCX0gZWxzZSB7CgkJCQllbGVtZW50TWF0Y2hlcnMucHVzaCggY2FjaGVkICk7CgkJCX0KCQl9CgoJCS8vIENhY2hlIHRoZSBjb21waWxlZCBmdW5jdGlvbgoJCWNhY2hlZCA9IGNvbXBpbGVyQ2FjaGUoIHNlbGVjdG9yLCBtYXRjaGVyRnJvbUdyb3VwTWF0Y2hlcnMoIGVsZW1lbnRNYXRjaGVycywgc2V0TWF0Y2hlcnMgKSApOwoKCQkvLyBTYXZlIHNlbGVjdG9yIGFuZCB0b2tlbml6YXRpb24KCQljYWNoZWQuc2VsZWN0b3IgPSBzZWxlY3RvcjsKCX0KCXJldHVybiBjYWNoZWQ7Cn07CgovKioKICogQSBsb3ctbGV2ZWwgc2VsZWN0aW9uIGZ1bmN0aW9uIHRoYXQgd29ya3Mgd2l0aCBTaXp6bGUncyBjb21waWxlZAogKiAgc2VsZWN0b3IgZnVuY3Rpb25zCiAqIEBwYXJhbSB7U3RyaW5nfEZ1bmN0aW9ufSBzZWxlY3RvciBBIHNlbGVjdG9yIG9yIGEgcHJlLWNvbXBpbGVkCiAqICBzZWxlY3RvciBmdW5jdGlvbiBidWlsdCB3aXRoIFNpenpsZS5jb21waWxlCiAqIEBwYXJhbSB7RWxlbWVudH0gY29udGV4dAogKiBAcGFyYW0ge0FycmF5fSBbcmVzdWx0c10KICogQHBhcmFtIHtBcnJheX0gW3NlZWRdIEEgc2V0IG9mIGVsZW1lbnRzIHRvIG1hdGNoIGFnYWluc3QKICovCnNlbGVjdCA9IFNpenpsZS5zZWxlY3QgPSBmdW5jdGlvbiggc2VsZWN0b3IsIGNvbnRleHQsIHJlc3VsdHMsIHNlZWQgKSB7Cgl2YXIgaSwgdG9rZW5zLCB0b2tlbiwgdHlwZSwgZmluZCwKCQljb21waWxlZCA9IHR5cGVvZiBzZWxlY3RvciA9PT0gImZ1bmN0aW9uIiAmJiBzZWxlY3RvciwKCQltYXRjaCA9ICFzZWVkICYmIHRva2VuaXplKCAoc2VsZWN0b3IgPSBjb21waWxlZC5zZWxlY3RvciB8fCBzZWxlY3RvcikgKTsKCglyZXN1bHRzID0gcmVzdWx0cyB8fCBbXTsKCgkvLyBUcnkgdG8gbWluaW1pemUgb3BlcmF0aW9ucyBpZiB0aGVyZSBpcyBvbmx5IG9uZSBzZWxlY3RvciBpbiB0aGUgbGlzdCBhbmQgbm8gc2VlZAoJLy8gKHRoZSBsYXR0ZXIgb2Ygd2hpY2ggZ3VhcmFudGVlcyB1cyBjb250ZXh0KQoJaWYgKCBtYXRjaC5sZW5ndGggPT09IDEgKSB7CgoJCS8vIFJlZHVjZSBjb250ZXh0IGlmIHRoZSBsZWFkaW5nIGNvbXBvdW5kIHNlbGVjdG9yIGlzIGFuIElECgkJdG9rZW5zID0gbWF0Y2hbMF0gPSBtYXRjaFswXS5zbGljZSggMCApOwoJCWlmICggdG9rZW5zLmxlbmd0aCA+IDIgJiYgKHRva2VuID0gdG9rZW5zWzBdKS50eXBlID09PSAiSUQiICYmCgkJCQlzdXBwb3J0LmdldEJ5SWQgJiYgY29udGV4dC5ub2RlVHlwZSA9PT0gOSAmJiBkb2N1bWVudElzSFRNTCAmJgoJCQkJRXhwci5yZWxhdGl2ZVsgdG9rZW5zWzFdLnR5cGUgXSApIHsKCgkJCWNvbnRleHQgPSAoIEV4cHIuZmluZFsiSUQiXSggdG9rZW4ubWF0Y2hlc1swXS5yZXBsYWNlKHJ1bmVzY2FwZSwgZnVuZXNjYXBlKSwgY29udGV4dCApIHx8IFtdIClbMF07CgkJCWlmICggIWNvbnRleHQgKSB7CgkJCQlyZXR1cm4gcmVzdWx0czsKCgkJCS8vIFByZWNvbXBpbGVkIG1hdGNoZXJzIHdpbGwgc3RpbGwgdmVyaWZ5IGFuY2VzdHJ5LCBzbyBzdGVwIHVwIGEgbGV2ZWwKCQkJfSBlbHNlIGlmICggY29tcGlsZWQgKSB7CgkJCQljb250ZXh0ID0gY29udGV4dC5wYXJlbnROb2RlOwoJCQl9CgoJCQlzZWxlY3RvciA9IHNlbGVjdG9yLnNsaWNlKCB0b2tlbnMuc2hpZnQoKS52YWx1ZS5sZW5ndGggKTsKCQl9CgoJCS8vIEZldGNoIGEgc2VlZCBzZXQgZm9yIHJpZ2h0LXRvLWxlZnQgbWF0Y2hpbmcKCQlpID0gbWF0Y2hFeHByWyJuZWVkc0NvbnRleHQiXS50ZXN0KCBzZWxlY3RvciApID8gMCA6IHRva2Vucy5sZW5ndGg7CgkJd2hpbGUgKCBpLS0gKSB7CgkJCXRva2VuID0gdG9rZW5zW2ldOwoKCQkJLy8gQWJvcnQgaWYgd2UgaGl0IGEgY29tYmluYXRvcgoJCQlpZiAoIEV4cHIucmVsYXRpdmVbICh0eXBlID0gdG9rZW4udHlwZSkgXSApIHsKCQkJCWJyZWFrOwoJCQl9CgkJCWlmICggKGZpbmQgPSBFeHByLmZpbmRbIHR5cGUgXSkgKSB7CgkJCQkvLyBTZWFyY2gsIGV4cGFuZGluZyBjb250ZXh0IGZvciBsZWFkaW5nIHNpYmxpbmcgY29tYmluYXRvcnMKCQkJCWlmICggKHNlZWQgPSBmaW5kKAoJCQkJCXRva2VuLm1hdGNoZXNbMF0ucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKSwKCQkJCQlyc2libGluZy50ZXN0KCB0b2tlbnNbMF0udHlwZSApICYmIHRlc3RDb250ZXh0KCBjb250ZXh0LnBhcmVudE5vZGUgKSB8fCBjb250ZXh0CgkJCQkpKSApIHsKCgkJCQkJLy8gSWYgc2VlZCBpcyBlbXB0eSBvciBubyB0b2tlbnMgcmVtYWluLCB3ZSBjYW4gcmV0dXJuIGVhcmx5CgkJCQkJdG9rZW5zLnNwbGljZSggaSwgMSApOwoJCQkJCXNlbGVjdG9yID0gc2VlZC5sZW5ndGggJiYgdG9TZWxlY3RvciggdG9rZW5zICk7CgkJCQkJaWYgKCAhc2VsZWN0b3IgKSB7CgkJCQkJCXB1c2guYXBwbHkoIHJlc3VsdHMsIHNlZWQgKTsKCQkJCQkJcmV0dXJuIHJlc3VsdHM7CgkJCQkJfQoKCQkJCQlicmVhazsKCQkJCX0KCQkJfQoJCX0KCX0KCgkvLyBDb21waWxlIGFuZCBleGVjdXRlIGEgZmlsdGVyaW5nIGZ1bmN0aW9uIGlmIG9uZSBpcyBub3QgcHJvdmlkZWQKCS8vIFByb3ZpZGUgYG1hdGNoYCB0byBhdm9pZCByZXRva2VuaXphdGlvbiBpZiB3ZSBtb2RpZmllZCB0aGUgc2VsZWN0b3IgYWJvdmUKCSggY29tcGlsZWQgfHwgY29tcGlsZSggc2VsZWN0b3IsIG1hdGNoICkgKSgKCQlzZWVkLAoJCWNvbnRleHQsCgkJIWRvY3VtZW50SXNIVE1MLAoJCXJlc3VsdHMsCgkJIWNvbnRleHQgfHwgcnNpYmxpbmcudGVzdCggc2VsZWN0b3IgKSAmJiB0ZXN0Q29udGV4dCggY29udGV4dC5wYXJlbnROb2RlICkgfHwgY29udGV4dAoJKTsKCXJldHVybiByZXN1bHRzOwp9OwoKLy8gT25lLXRpbWUgYXNzaWdubWVudHMKCi8vIFNvcnQgc3RhYmlsaXR5CnN1cHBvcnQuc29ydFN0YWJsZSA9IGV4cGFuZG8uc3BsaXQoIiIpLnNvcnQoIHNvcnRPcmRlciApLmpvaW4oIiIpID09PSBleHBhbmRvOwoKLy8gU3VwcG9ydDogQ2hyb21lIDE0LTM1KwovLyBBbHdheXMgYXNzdW1lIGR1cGxpY2F0ZXMgaWYgdGhleSBhcmVuJ3QgcGFzc2VkIHRvIHRoZSBjb21wYXJpc29uIGZ1bmN0aW9uCnN1cHBvcnQuZGV0ZWN0RHVwbGljYXRlcyA9ICEhaGFzRHVwbGljYXRlOwoKLy8gSW5pdGlhbGl6ZSBhZ2FpbnN0IHRoZSBkZWZhdWx0IGRvY3VtZW50CnNldERvY3VtZW50KCk7CgovLyBTdXBwb3J0OiBXZWJraXQ8NTM3LjMyIC0gU2FmYXJpIDYuMC4zL0Nocm9tZSAyNSAoZml4ZWQgaW4gQ2hyb21lIDI3KQovLyBEZXRhY2hlZCBub2RlcyBjb25mb3VuZGluZ2x5IGZvbGxvdyAqZWFjaCBvdGhlcioKc3VwcG9ydC5zb3J0RGV0YWNoZWQgPSBhc3NlcnQoZnVuY3Rpb24oIGRpdjEgKSB7CgkvLyBTaG91bGQgcmV0dXJuIDEsIGJ1dCByZXR1cm5zIDQgKGZvbGxvd2luZykKCXJldHVybiBkaXYxLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSApICYgMTsKfSk7CgovLyBTdXBwb3J0OiBJRTw4Ci8vIFByZXZlbnQgYXR0cmlidXRlL3Byb3BlcnR5ICJpbnRlcnBvbGF0aW9uIgovLyBodHRwOi8vbXNkbi5taWNyb3NvZnQuY29tL2VuLXVzL2xpYnJhcnkvbXM1MzY0MjklMjhWUy44NSUyOS5hc3B4CmlmICggIWFzc2VydChmdW5jdGlvbiggZGl2ICkgewoJZGl2LmlubmVySFRNTCA9ICI8YSBocmVmPScjJz48L2E+IjsKCXJldHVybiBkaXYuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoImhyZWYiKSA9PT0gIiMiIDsKfSkgKSB7CglhZGRIYW5kbGUoICJ0eXBlfGhyZWZ8aGVpZ2h0fHdpZHRoIiwgZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGlzWE1MICkgewoJCWlmICggIWlzWE1MICkgewoJCQlyZXR1cm4gZWxlbS5nZXRBdHRyaWJ1dGUoIG5hbWUsIG5hbWUudG9Mb3dlckNhc2UoKSA9PT0gInR5cGUiID8gMSA6IDIgKTsKCQl9Cgl9KTsKfQoKLy8gU3VwcG9ydDogSUU8OQovLyBVc2UgZGVmYXVsdFZhbHVlIGluIHBsYWNlIG9mIGdldEF0dHJpYnV0ZSgidmFsdWUiKQppZiAoICFzdXBwb3J0LmF0dHJpYnV0ZXMgfHwgIWFzc2VydChmdW5jdGlvbiggZGl2ICkgewoJZGl2LmlubmVySFRNTCA9ICI8aW5wdXQvPiI7CglkaXYuZmlyc3RDaGlsZC5zZXRBdHRyaWJ1dGUoICJ2YWx1ZSIsICIiICk7CglyZXR1cm4gZGl2LmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCAidmFsdWUiICkgPT09ICIiOwp9KSApIHsKCWFkZEhhbmRsZSggInZhbHVlIiwgZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGlzWE1MICkgewoJCWlmICggIWlzWE1MICYmIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gImlucHV0IiApIHsKCQkJcmV0dXJuIGVsZW0uZGVmYXVsdFZhbHVlOwoJCX0KCX0pOwp9CgovLyBTdXBwb3J0OiBJRTw5Ci8vIFVzZSBnZXRBdHRyaWJ1dGVOb2RlIHRvIGZldGNoIGJvb2xlYW5zIHdoZW4gZ2V0QXR0cmlidXRlIGxpZXMKaWYgKCAhYXNzZXJ0KGZ1bmN0aW9uKCBkaXYgKSB7CglyZXR1cm4gZGl2LmdldEF0dHJpYnV0ZSgiZGlzYWJsZWQiKSA9PSBudWxsOwp9KSApIHsKCWFkZEhhbmRsZSggYm9vbGVhbnMsIGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCBpc1hNTCApIHsKCQl2YXIgdmFsOwoJCWlmICggIWlzWE1MICkgewoJCQlyZXR1cm4gZWxlbVsgbmFtZSBdID09PSB0cnVlID8gbmFtZS50b0xvd2VyQ2FzZSgpIDoKCQkJCQkodmFsID0gZWxlbS5nZXRBdHRyaWJ1dGVOb2RlKCBuYW1lICkpICYmIHZhbC5zcGVjaWZpZWQgPwoJCQkJCXZhbC52YWx1ZSA6CgkJCQludWxsOwoJCX0KCX0pOwp9CgpyZXR1cm4gU2l6emxlOwoKfSkoIHdpbmRvdyApOwoKCgpqUXVlcnkuZmluZCA9IFNpenpsZTsKalF1ZXJ5LmV4cHIgPSBTaXp6bGUuc2VsZWN0b3JzOwpqUXVlcnkuZXhwclsgIjoiIF0gPSBqUXVlcnkuZXhwci5wc2V1ZG9zOwpqUXVlcnkudW5pcXVlU29ydCA9IGpRdWVyeS51bmlxdWUgPSBTaXp6bGUudW5pcXVlU29ydDsKalF1ZXJ5LnRleHQgPSBTaXp6bGUuZ2V0VGV4dDsKalF1ZXJ5LmlzWE1MRG9jID0gU2l6emxlLmlzWE1MOwpqUXVlcnkuY29udGFpbnMgPSBTaXp6bGUuY29udGFpbnM7CgoKCnZhciBkaXIgPSBmdW5jdGlvbiggZWxlbSwgZGlyLCB1bnRpbCApIHsKCXZhciBtYXRjaGVkID0gW10sCgkJdHJ1bmNhdGUgPSB1bnRpbCAhPT0gdW5kZWZpbmVkOwoKCXdoaWxlICggKCBlbGVtID0gZWxlbVsgZGlyIF0gKSAmJiBlbGVtLm5vZGVUeXBlICE9PSA5ICkgewoJCWlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSApIHsKCQkJaWYgKCB0cnVuY2F0ZSAmJiBqUXVlcnkoIGVsZW0gKS5pcyggdW50aWwgKSApIHsKCQkJCWJyZWFrOwoJCQl9CgkJCW1hdGNoZWQucHVzaCggZWxlbSApOwoJCX0KCX0KCXJldHVybiBtYXRjaGVkOwp9OwoKCnZhciBzaWJsaW5ncyA9IGZ1bmN0aW9uKCBuLCBlbGVtICkgewoJdmFyIG1hdGNoZWQgPSBbXTsKCglmb3IgKCA7IG47IG4gPSBuLm5leHRTaWJsaW5nICkgewoJCWlmICggbi5ub2RlVHlwZSA9PT0gMSAmJiBuICE9PSBlbGVtICkgewoJCQltYXRjaGVkLnB1c2goIG4gKTsKCQl9Cgl9CgoJcmV0dXJuIG1hdGNoZWQ7Cn07CgoKdmFyIHJuZWVkc0NvbnRleHQgPSBqUXVlcnkuZXhwci5tYXRjaC5uZWVkc0NvbnRleHQ7Cgp2YXIgcnNpbmdsZVRhZyA9ICggL148KFtcdy1dKylccypcLz8+KD86PFwvXDE+fCkkLyApOwoKCgp2YXIgcmlzU2ltcGxlID0gL14uW146I1xbXC4sXSokLzsKCi8vIEltcGxlbWVudCB0aGUgaWRlbnRpY2FsIGZ1bmN0aW9uYWxpdHkgZm9yIGZpbHRlciBhbmQgbm90CmZ1bmN0aW9uIHdpbm5vdyggZWxlbWVudHMsIHF1YWxpZmllciwgbm90ICkgewoJaWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggcXVhbGlmaWVyICkgKSB7CgkJcmV0dXJuIGpRdWVyeS5ncmVwKCBlbGVtZW50cywgZnVuY3Rpb24oIGVsZW0sIGkgKSB7CgkJCS8qIGpzaGludCAtVzAxOCAqLwoJCQlyZXR1cm4gISFxdWFsaWZpZXIuY2FsbCggZWxlbSwgaSwgZWxlbSApICE9PSBub3Q7CgkJfSApOwoKCX0KCglpZiAoIHF1YWxpZmllci5ub2RlVHlwZSApIHsKCQlyZXR1cm4galF1ZXJ5LmdyZXAoIGVsZW1lbnRzLCBmdW5jdGlvbiggZWxlbSApIHsKCQkJcmV0dXJuICggZWxlbSA9PT0gcXVhbGlmaWVyICkgIT09IG5vdDsKCQl9ICk7CgoJfQoKCWlmICggdHlwZW9mIHF1YWxpZmllciA9PT0gInN0cmluZyIgKSB7CgkJaWYgKCByaXNTaW1wbGUudGVzdCggcXVhbGlmaWVyICkgKSB7CgkJCXJldHVybiBqUXVlcnkuZmlsdGVyKCBxdWFsaWZpZXIsIGVsZW1lbnRzLCBub3QgKTsKCQl9CgoJCXF1YWxpZmllciA9IGpRdWVyeS5maWx0ZXIoIHF1YWxpZmllciwgZWxlbWVudHMgKTsKCX0KCglyZXR1cm4galF1ZXJ5LmdyZXAoIGVsZW1lbnRzLCBmdW5jdGlvbiggZWxlbSApIHsKCQlyZXR1cm4gKCBqUXVlcnkuaW5BcnJheSggZWxlbSwgcXVhbGlmaWVyICkgPiAtMSApICE9PSBub3Q7Cgl9ICk7Cn0KCmpRdWVyeS5maWx0ZXIgPSBmdW5jdGlvbiggZXhwciwgZWxlbXMsIG5vdCApIHsKCXZhciBlbGVtID0gZWxlbXNbIDAgXTsKCglpZiAoIG5vdCApIHsKCQlleHByID0gIjpub3QoIiArIGV4cHIgKyAiKSI7Cgl9CgoJcmV0dXJuIGVsZW1zLmxlbmd0aCA9PT0gMSAmJiBlbGVtLm5vZGVUeXBlID09PSAxID8KCQlqUXVlcnkuZmluZC5tYXRjaGVzU2VsZWN0b3IoIGVsZW0sIGV4cHIgKSA/IFsgZWxlbSBdIDogW10gOgoJCWpRdWVyeS5maW5kLm1hdGNoZXMoIGV4cHIsIGpRdWVyeS5ncmVwKCBlbGVtcywgZnVuY3Rpb24oIGVsZW0gKSB7CgkJCXJldHVybiBlbGVtLm5vZGVUeXBlID09PSAxOwoJCX0gKSApOwp9OwoKalF1ZXJ5LmZuLmV4dGVuZCggewoJZmluZDogZnVuY3Rpb24oIHNlbGVjdG9yICkgewoJCXZhciBpLAoJCQlyZXQgPSBbXSwKCQkJc2VsZiA9IHRoaXMsCgkJCWxlbiA9IHNlbGYubGVuZ3RoOwoKCQlpZiAoIHR5cGVvZiBzZWxlY3RvciAhPT0gInN0cmluZyIgKSB7CgkJCXJldHVybiB0aGlzLnB1c2hTdGFjayggalF1ZXJ5KCBzZWxlY3RvciApLmZpbHRlciggZnVuY3Rpb24oKSB7CgkJCQlmb3IgKCBpID0gMDsgaSA8IGxlbjsgaSsrICkgewoJCQkJCWlmICggalF1ZXJ5LmNvbnRhaW5zKCBzZWxmWyBpIF0sIHRoaXMgKSApIHsKCQkJCQkJcmV0dXJuIHRydWU7CgkJCQkJfQoJCQkJfQoJCQl9ICkgKTsKCQl9CgoJCWZvciAoIGkgPSAwOyBpIDwgbGVuOyBpKysgKSB7CgkJCWpRdWVyeS5maW5kKCBzZWxlY3Rvciwgc2VsZlsgaSBdLCByZXQgKTsKCQl9CgoJCS8vIE5lZWRlZCBiZWNhdXNlICQoIHNlbGVjdG9yLCBjb250ZXh0ICkgYmVjb21lcyAkKCBjb250ZXh0ICkuZmluZCggc2VsZWN0b3IgKQoJCXJldCA9IHRoaXMucHVzaFN0YWNrKCBsZW4gPiAxID8galF1ZXJ5LnVuaXF1ZSggcmV0ICkgOiByZXQgKTsKCQlyZXQuc2VsZWN0b3IgPSB0aGlzLnNlbGVjdG9yID8gdGhpcy5zZWxlY3RvciArICIgIiArIHNlbGVjdG9yIDogc2VsZWN0b3I7CgkJcmV0dXJuIHJldDsKCX0sCglmaWx0ZXI6IGZ1bmN0aW9uKCBzZWxlY3RvciApIHsKCQlyZXR1cm4gdGhpcy5wdXNoU3RhY2soIHdpbm5vdyggdGhpcywgc2VsZWN0b3IgfHwgW10sIGZhbHNlICkgKTsKCX0sCglub3Q6IGZ1bmN0aW9uKCBzZWxlY3RvciApIHsKCQlyZXR1cm4gdGhpcy5wdXNoU3RhY2soIHdpbm5vdyggdGhpcywgc2VsZWN0b3IgfHwgW10sIHRydWUgKSApOwoJfSwKCWlzOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7CgkJcmV0dXJuICEhd2lubm93KAoJCQl0aGlzLAoKCQkJLy8gSWYgdGhpcyBpcyBhIHBvc2l0aW9uYWwvcmVsYXRpdmUgc2VsZWN0b3IsIGNoZWNrIG1lbWJlcnNoaXAgaW4gdGhlIHJldHVybmVkIHNldAoJCQkvLyBzbyAkKCJwOmZpcnN0IikuaXMoInA6bGFzdCIpIHdvbid0IHJldHVybiB0cnVlIGZvciBhIGRvYyB3aXRoIHR3byAicCIuCgkJCXR5cGVvZiBzZWxlY3RvciA9PT0gInN0cmluZyIgJiYgcm5lZWRzQ29udGV4dC50ZXN0KCBzZWxlY3RvciApID8KCQkJCWpRdWVyeSggc2VsZWN0b3IgKSA6CgkJCQlzZWxlY3RvciB8fCBbXSwKCQkJZmFsc2UKCQkpLmxlbmd0aDsKCX0KfSApOwoKCi8vIEluaXRpYWxpemUgYSBqUXVlcnkgb2JqZWN0CgoKLy8gQSBjZW50cmFsIHJlZmVyZW5jZSB0byB0aGUgcm9vdCBqUXVlcnkoZG9jdW1lbnQpCnZhciByb290alF1ZXJ5LAoKCS8vIEEgc2ltcGxlIHdheSB0byBjaGVjayBmb3IgSFRNTCBzdHJpbmdzCgkvLyBQcmlvcml0aXplICNpZCBvdmVyIDx0YWc+IHRvIGF2b2lkIFhTUyB2aWEgbG9jYXRpb24uaGFzaCAoIzk1MjEpCgkvLyBTdHJpY3QgSFRNTCByZWNvZ25pdGlvbiAoIzExMjkwOiBtdXN0IHN0YXJ0IHdpdGggPCkKCXJxdWlja0V4cHIgPSAvXig/OlxzKig8W1x3XFddKz4pW14+XSp8IyhbXHctXSopKSQvLAoKCWluaXQgPSBqUXVlcnkuZm4uaW5pdCA9IGZ1bmN0aW9uKCBzZWxlY3RvciwgY29udGV4dCwgcm9vdCApIHsKCQl2YXIgbWF0Y2gsIGVsZW07CgoJCS8vIEhBTkRMRTogJCgiIiksICQobnVsbCksICQodW5kZWZpbmVkKSwgJChmYWxzZSkKCQlpZiAoICFzZWxlY3RvciApIHsKCQkJcmV0dXJuIHRoaXM7CgkJfQoKCQkvLyBpbml0IGFjY2VwdHMgYW4gYWx0ZXJuYXRlIHJvb3RqUXVlcnkKCQkvLyBzbyBtaWdyYXRlIGNhbiBzdXBwb3J0IGpRdWVyeS5zdWIgKGdoLTIxMDEpCgkJcm9vdCA9IHJvb3QgfHwgcm9vdGpRdWVyeTsKCgkJLy8gSGFuZGxlIEhUTUwgc3RyaW5ncwoJCWlmICggdHlwZW9mIHNlbGVjdG9yID09PSAic3RyaW5nIiApIHsKCQkJaWYgKCBzZWxlY3Rvci5jaGFyQXQoIDAgKSA9PT0gIjwiICYmCgkJCQlzZWxlY3Rvci5jaGFyQXQoIHNlbGVjdG9yLmxlbmd0aCAtIDEgKSA9PT0gIj4iICYmCgkJCQlzZWxlY3Rvci5sZW5ndGggPj0gMyApIHsKCgkJCQkvLyBBc3N1bWUgdGhhdCBzdHJpbmdzIHRoYXQgc3RhcnQgYW5kIGVuZCB3aXRoIDw+IGFyZSBIVE1MIGFuZCBza2lwIHRoZSByZWdleCBjaGVjawoJCQkJbWF0Y2ggPSBbIG51bGwsIHNlbGVjdG9yLCBudWxsIF07CgoJCQl9IGVsc2UgewoJCQkJbWF0Y2ggPSBycXVpY2tFeHByLmV4ZWMoIHNlbGVjdG9yICk7CgkJCX0KCgkJCS8vIE1hdGNoIGh0bWwgb3IgbWFrZSBzdXJlIG5vIGNvbnRleHQgaXMgc3BlY2lmaWVkIGZvciAjaWQKCQkJaWYgKCBtYXRjaCAmJiAoIG1hdGNoWyAxIF0gfHwgIWNvbnRleHQgKSApIHsKCgkJCQkvLyBIQU5ETEU6ICQoaHRtbCkgLT4gJChhcnJheSkKCQkJCWlmICggbWF0Y2hbIDEgXSApIHsKCQkJCQljb250ZXh0ID0gY29udGV4dCBpbnN0YW5jZW9mIGpRdWVyeSA/IGNvbnRleHRbIDAgXSA6IGNvbnRleHQ7CgoJCQkJCS8vIHNjcmlwdHMgaXMgdHJ1ZSBmb3IgYmFjay1jb21wYXQKCQkJCQkvLyBJbnRlbnRpb25hbGx5IGxldCB0aGUgZXJyb3IgYmUgdGhyb3duIGlmIHBhcnNlSFRNTCBpcyBub3QgcHJlc2VudAoJCQkJCWpRdWVyeS5tZXJnZSggdGhpcywgalF1ZXJ5LnBhcnNlSFRNTCgKCQkJCQkJbWF0Y2hbIDEgXSwKCQkJCQkJY29udGV4dCAmJiBjb250ZXh0Lm5vZGVUeXBlID8gY29udGV4dC5vd25lckRvY3VtZW50IHx8IGNvbnRleHQgOiBkb2N1bWVudCwKCQkJCQkJdHJ1ZQoJCQkJCSkgKTsKCgkJCQkJLy8gSEFORExFOiAkKGh0bWwsIHByb3BzKQoJCQkJCWlmICggcnNpbmdsZVRhZy50ZXN0KCBtYXRjaFsgMSBdICkgJiYgalF1ZXJ5LmlzUGxhaW5PYmplY3QoIGNvbnRleHQgKSApIHsKCQkJCQkJZm9yICggbWF0Y2ggaW4gY29udGV4dCApIHsKCgkJCQkJCQkvLyBQcm9wZXJ0aWVzIG9mIGNvbnRleHQgYXJlIGNhbGxlZCBhcyBtZXRob2RzIGlmIHBvc3NpYmxlCgkJCQkJCQlpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCB0aGlzWyBtYXRjaCBdICkgKSB7CgkJCQkJCQkJdGhpc1sgbWF0Y2ggXSggY29udGV4dFsgbWF0Y2ggXSApOwoKCQkJCQkJCS8vIC4uLmFuZCBvdGhlcndpc2Ugc2V0IGFzIGF0dHJpYnV0ZXMKCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJdGhpcy5hdHRyKCBtYXRjaCwgY29udGV4dFsgbWF0Y2ggXSApOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfQoKCQkJCQlyZXR1cm4gdGhpczsKCgkJCQkvLyBIQU5ETEU6ICQoI2lkKQoJCQkJfSBlbHNlIHsKCQkJCQllbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIG1hdGNoWyAyIF0gKTsKCgkJCQkJLy8gQ2hlY2sgcGFyZW50Tm9kZSB0byBjYXRjaCB3aGVuIEJsYWNrYmVycnkgNC42IHJldHVybnMKCQkJCQkvLyBub2RlcyB0aGF0IGFyZSBubyBsb25nZXIgaW4gdGhlIGRvY3VtZW50ICM2OTYzCgkJCQkJaWYgKCBlbGVtICYmIGVsZW0ucGFyZW50Tm9kZSApIHsKCgkJCQkJCS8vIEhhbmRsZSB0aGUgY2FzZSB3aGVyZSBJRSBhbmQgT3BlcmEgcmV0dXJuIGl0ZW1zCgkJCQkJCS8vIGJ5IG5hbWUgaW5zdGVhZCBvZiBJRAoJCQkJCQlpZiAoIGVsZW0uaWQgIT09IG1hdGNoWyAyIF0gKSB7CgkJCQkJCQlyZXR1cm4gcm9vdGpRdWVyeS5maW5kKCBzZWxlY3RvciApOwoJCQkJCQl9CgoJCQkJCQkvLyBPdGhlcndpc2UsIHdlIGluamVjdCB0aGUgZWxlbWVudCBkaXJlY3RseSBpbnRvIHRoZSBqUXVlcnkgb2JqZWN0CgkJCQkJCXRoaXMubGVuZ3RoID0gMTsKCQkJCQkJdGhpc1sgMCBdID0gZWxlbTsKCQkJCQl9CgoJCQkJCXRoaXMuY29udGV4dCA9IGRvY3VtZW50OwoJCQkJCXRoaXMuc2VsZWN0b3IgPSBzZWxlY3RvcjsKCQkJCQlyZXR1cm4gdGhpczsKCQkJCX0KCgkJCS8vIEhBTkRMRTogJChleHByLCAkKC4uLikpCgkJCX0gZWxzZSBpZiAoICFjb250ZXh0IHx8IGNvbnRleHQuanF1ZXJ5ICkgewoJCQkJcmV0dXJuICggY29udGV4dCB8fCByb290ICkuZmluZCggc2VsZWN0b3IgKTsKCgkJCS8vIEhBTkRMRTogJChleHByLCBjb250ZXh0KQoJCQkvLyAod2hpY2ggaXMganVzdCBlcXVpdmFsZW50IHRvOiAkKGNvbnRleHQpLmZpbmQoZXhwcikKCQkJfSBlbHNlIHsKCQkJCXJldHVybiB0aGlzLmNvbnN0cnVjdG9yKCBjb250ZXh0ICkuZmluZCggc2VsZWN0b3IgKTsKCQkJfQoKCQkvLyBIQU5ETEU6ICQoRE9NRWxlbWVudCkKCQl9IGVsc2UgaWYgKCBzZWxlY3Rvci5ub2RlVHlwZSApIHsKCQkJdGhpcy5jb250ZXh0ID0gdGhpc1sgMCBdID0gc2VsZWN0b3I7CgkJCXRoaXMubGVuZ3RoID0gMTsKCQkJcmV0dXJuIHRoaXM7CgoJCS8vIEhBTkRMRTogJChmdW5jdGlvbikKCQkvLyBTaG9ydGN1dCBmb3IgZG9jdW1lbnQgcmVhZHkKCQl9IGVsc2UgaWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggc2VsZWN0b3IgKSApIHsKCQkJcmV0dXJuIHR5cGVvZiByb290LnJlYWR5ICE9PSAidW5kZWZpbmVkIiA/CgkJCQlyb290LnJlYWR5KCBzZWxlY3RvciApIDoKCgkJCQkvLyBFeGVjdXRlIGltbWVkaWF0ZWx5IGlmIHJlYWR5IGlzIG5vdCBwcmVzZW50CgkJCQlzZWxlY3RvciggalF1ZXJ5ICk7CgkJfQoKCQlpZiAoIHNlbGVjdG9yLnNlbGVjdG9yICE9PSB1bmRlZmluZWQgKSB7CgkJCXRoaXMuc2VsZWN0b3IgPSBzZWxlY3Rvci5zZWxlY3RvcjsKCQkJdGhpcy5jb250ZXh0ID0gc2VsZWN0b3IuY29udGV4dDsKCQl9CgoJCXJldHVybiBqUXVlcnkubWFrZUFycmF5KCBzZWxlY3RvciwgdGhpcyApOwoJfTsKCi8vIEdpdmUgdGhlIGluaXQgZnVuY3Rpb24gdGhlIGpRdWVyeSBwcm90b3R5cGUgZm9yIGxhdGVyIGluc3RhbnRpYXRpb24KaW5pdC5wcm90b3R5cGUgPSBqUXVlcnkuZm47CgovLyBJbml0aWFsaXplIGNlbnRyYWwgcmVmZXJlbmNlCnJvb3RqUXVlcnkgPSBqUXVlcnkoIGRvY3VtZW50ICk7CgoKdmFyIHJwYXJlbnRzcHJldiA9IC9eKD86cGFyZW50c3xwcmV2KD86VW50aWx8QWxsKSkvLAoKCS8vIG1ldGhvZHMgZ3VhcmFudGVlZCB0byBwcm9kdWNlIGEgdW5pcXVlIHNldCB3aGVuIHN0YXJ0aW5nIGZyb20gYSB1bmlxdWUgc2V0CglndWFyYW50ZWVkVW5pcXVlID0gewoJCWNoaWxkcmVuOiB0cnVlLAoJCWNvbnRlbnRzOiB0cnVlLAoJCW5leHQ6IHRydWUsCgkJcHJldjogdHJ1ZQoJfTsKCmpRdWVyeS5mbi5leHRlbmQoIHsKCWhhczogZnVuY3Rpb24oIHRhcmdldCApIHsKCQl2YXIgaSwKCQkJdGFyZ2V0cyA9IGpRdWVyeSggdGFyZ2V0LCB0aGlzICksCgkJCWxlbiA9IHRhcmdldHMubGVuZ3RoOwoKCQlyZXR1cm4gdGhpcy5maWx0ZXIoIGZ1bmN0aW9uKCkgewoJCQlmb3IgKCBpID0gMDsgaSA8IGxlbjsgaSsrICkgewoJCQkJaWYgKCBqUXVlcnkuY29udGFpbnMoIHRoaXMsIHRhcmdldHNbIGkgXSApICkgewoJCQkJCXJldHVybiB0cnVlOwoJCQkJfQoJCQl9CgkJfSApOwoJfSwKCgljbG9zZXN0OiBmdW5jdGlvbiggc2VsZWN0b3JzLCBjb250ZXh0ICkgewoJCXZhciBjdXIsCgkJCWkgPSAwLAoJCQlsID0gdGhpcy5sZW5ndGgsCgkJCW1hdGNoZWQgPSBbXSwKCQkJcG9zID0gcm5lZWRzQ29udGV4dC50ZXN0KCBzZWxlY3RvcnMgKSB8fCB0eXBlb2Ygc2VsZWN0b3JzICE9PSAic3RyaW5nIiA/CgkJCQlqUXVlcnkoIHNlbGVjdG9ycywgY29udGV4dCB8fCB0aGlzLmNvbnRleHQgKSA6CgkJCQkwOwoKCQlmb3IgKCA7IGkgPCBsOyBpKysgKSB7CgkJCWZvciAoIGN1ciA9IHRoaXNbIGkgXTsgY3VyICYmIGN1ciAhPT0gY29udGV4dDsgY3VyID0gY3VyLnBhcmVudE5vZGUgKSB7CgoJCQkJLy8gQWx3YXlzIHNraXAgZG9jdW1lbnQgZnJhZ21lbnRzCgkJCQlpZiAoIGN1ci5ub2RlVHlwZSA8IDExICYmICggcG9zID8KCQkJCQlwb3MuaW5kZXgoIGN1ciApID4gLTEgOgoKCQkJCQkvLyBEb24ndCBwYXNzIG5vbi1lbGVtZW50cyB0byBTaXp6bGUKCQkJCQljdXIubm9kZVR5cGUgPT09IDEgJiYKCQkJCQkJalF1ZXJ5LmZpbmQubWF0Y2hlc1NlbGVjdG9yKCBjdXIsIHNlbGVjdG9ycyApICkgKSB7CgoJCQkJCW1hdGNoZWQucHVzaCggY3VyICk7CgkJCQkJYnJlYWs7CgkJCQl9CgkJCX0KCQl9CgoJCXJldHVybiB0aGlzLnB1c2hTdGFjayggbWF0Y2hlZC5sZW5ndGggPiAxID8galF1ZXJ5LnVuaXF1ZVNvcnQoIG1hdGNoZWQgKSA6IG1hdGNoZWQgKTsKCX0sCgoJLy8gRGV0ZXJtaW5lIHRoZSBwb3NpdGlvbiBvZiBhbiBlbGVtZW50IHdpdGhpbgoJLy8gdGhlIG1hdGNoZWQgc2V0IG9mIGVsZW1lbnRzCglpbmRleDogZnVuY3Rpb24oIGVsZW0gKSB7CgoJCS8vIE5vIGFyZ3VtZW50LCByZXR1cm4gaW5kZXggaW4gcGFyZW50CgkJaWYgKCAhZWxlbSApIHsKCQkJcmV0dXJuICggdGhpc1sgMCBdICYmIHRoaXNbIDAgXS5wYXJlbnROb2RlICkgPyB0aGlzLmZpcnN0KCkucHJldkFsbCgpLmxlbmd0aCA6IC0xOwoJCX0KCgkJLy8gaW5kZXggaW4gc2VsZWN0b3IKCQlpZiAoIHR5cGVvZiBlbGVtID09PSAic3RyaW5nIiApIHsKCQkJcmV0dXJuIGpRdWVyeS5pbkFycmF5KCB0aGlzWyAwIF0sIGpRdWVyeSggZWxlbSApICk7CgkJfQoKCQkvLyBMb2NhdGUgdGhlIHBvc2l0aW9uIG9mIHRoZSBkZXNpcmVkIGVsZW1lbnQKCQlyZXR1cm4galF1ZXJ5LmluQXJyYXkoCgoJCQkvLyBJZiBpdCByZWNlaXZlcyBhIGpRdWVyeSBvYmplY3QsIHRoZSBmaXJzdCBlbGVtZW50IGlzIHVzZWQKCQkJZWxlbS5qcXVlcnkgPyBlbGVtWyAwIF0gOiBlbGVtLCB0aGlzICk7Cgl9LAoKCWFkZDogZnVuY3Rpb24oIHNlbGVjdG9yLCBjb250ZXh0ICkgewoJCXJldHVybiB0aGlzLnB1c2hTdGFjaygKCQkJalF1ZXJ5LnVuaXF1ZVNvcnQoCgkJCQlqUXVlcnkubWVyZ2UoIHRoaXMuZ2V0KCksIGpRdWVyeSggc2VsZWN0b3IsIGNvbnRleHQgKSApCgkJCSkKCQkpOwoJfSwKCglhZGRCYWNrOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7CgkJcmV0dXJuIHRoaXMuYWRkKCBzZWxlY3RvciA9PSBudWxsID8KCQkJdGhpcy5wcmV2T2JqZWN0IDogdGhpcy5wcmV2T2JqZWN0LmZpbHRlciggc2VsZWN0b3IgKQoJCSk7Cgl9Cn0gKTsKCmZ1bmN0aW9uIHNpYmxpbmcoIGN1ciwgZGlyICkgewoJZG8gewoJCWN1ciA9IGN1clsgZGlyIF07Cgl9IHdoaWxlICggY3VyICYmIGN1ci5ub2RlVHlwZSAhPT0gMSApOwoKCXJldHVybiBjdXI7Cn0KCmpRdWVyeS5lYWNoKCB7CglwYXJlbnQ6IGZ1bmN0aW9uKCBlbGVtICkgewoJCXZhciBwYXJlbnQgPSBlbGVtLnBhcmVudE5vZGU7CgkJcmV0dXJuIHBhcmVudCAmJiBwYXJlbnQubm9kZVR5cGUgIT09IDExID8gcGFyZW50IDogbnVsbDsKCX0sCglwYXJlbnRzOiBmdW5jdGlvbiggZWxlbSApIHsKCQlyZXR1cm4gZGlyKCBlbGVtLCAicGFyZW50Tm9kZSIgKTsKCX0sCglwYXJlbnRzVW50aWw6IGZ1bmN0aW9uKCBlbGVtLCBpLCB1bnRpbCApIHsKCQlyZXR1cm4gZGlyKCBlbGVtLCAicGFyZW50Tm9kZSIsIHVudGlsICk7Cgl9LAoJbmV4dDogZnVuY3Rpb24oIGVsZW0gKSB7CgkJcmV0dXJuIHNpYmxpbmcoIGVsZW0sICJuZXh0U2libGluZyIgKTsKCX0sCglwcmV2OiBmdW5jdGlvbiggZWxlbSApIHsKCQlyZXR1cm4gc2libGluZyggZWxlbSwgInByZXZpb3VzU2libGluZyIgKTsKCX0sCgluZXh0QWxsOiBmdW5jdGlvbiggZWxlbSApIHsKCQlyZXR1cm4gZGlyKCBlbGVtLCAibmV4dFNpYmxpbmciICk7Cgl9LAoJcHJldkFsbDogZnVuY3Rpb24oIGVsZW0gKSB7CgkJcmV0dXJuIGRpciggZWxlbSwgInByZXZpb3VzU2libGluZyIgKTsKCX0sCgluZXh0VW50aWw6IGZ1bmN0aW9uKCBlbGVtLCBpLCB1bnRpbCApIHsKCQlyZXR1cm4gZGlyKCBlbGVtLCAibmV4dFNpYmxpbmciLCB1bnRpbCApOwoJfSwKCXByZXZVbnRpbDogZnVuY3Rpb24oIGVsZW0sIGksIHVudGlsICkgewoJCXJldHVybiBkaXIoIGVsZW0sICJwcmV2aW91c1NpYmxpbmciLCB1bnRpbCApOwoJfSwKCXNpYmxpbmdzOiBmdW5jdGlvbiggZWxlbSApIHsKCQlyZXR1cm4gc2libGluZ3MoICggZWxlbS5wYXJlbnROb2RlIHx8IHt9ICkuZmlyc3RDaGlsZCwgZWxlbSApOwoJfSwKCWNoaWxkcmVuOiBmdW5jdGlvbiggZWxlbSApIHsKCQlyZXR1cm4gc2libGluZ3MoIGVsZW0uZmlyc3RDaGlsZCApOwoJfSwKCWNvbnRlbnRzOiBmdW5jdGlvbiggZWxlbSApIHsKCQlyZXR1cm4galF1ZXJ5Lm5vZGVOYW1lKCBlbGVtLCAiaWZyYW1lIiApID8KCQkJZWxlbS5jb250ZW50RG9jdW1lbnQgfHwgZWxlbS5jb250ZW50V2luZG93LmRvY3VtZW50IDoKCQkJalF1ZXJ5Lm1lcmdlKCBbXSwgZWxlbS5jaGlsZE5vZGVzICk7Cgl9Cn0sIGZ1bmN0aW9uKCBuYW1lLCBmbiApIHsKCWpRdWVyeS5mblsgbmFtZSBdID0gZnVuY3Rpb24oIHVudGlsLCBzZWxlY3RvciApIHsKCQl2YXIgcmV0ID0galF1ZXJ5Lm1hcCggdGhpcywgZm4sIHVudGlsICk7CgoJCWlmICggbmFtZS5zbGljZSggLTUgKSAhPT0gIlVudGlsIiApIHsKCQkJc2VsZWN0b3IgPSB1bnRpbDsKCQl9CgoJCWlmICggc2VsZWN0b3IgJiYgdHlwZW9mIHNlbGVjdG9yID09PSAic3RyaW5nIiApIHsKCQkJcmV0ID0galF1ZXJ5LmZpbHRlciggc2VsZWN0b3IsIHJldCApOwoJCX0KCgkJaWYgKCB0aGlzLmxlbmd0aCA+IDEgKSB7CgoJCQkvLyBSZW1vdmUgZHVwbGljYXRlcwoJCQlpZiAoICFndWFyYW50ZWVkVW5pcXVlWyBuYW1lIF0gKSB7CgkJCQlyZXQgPSBqUXVlcnkudW5pcXVlU29ydCggcmV0ICk7CgkJCX0KCgkJCS8vIFJldmVyc2Ugb3JkZXIgZm9yIHBhcmVudHMqIGFuZCBwcmV2LWRlcml2YXRpdmVzCgkJCWlmICggcnBhcmVudHNwcmV2LnRlc3QoIG5hbWUgKSApIHsKCQkJCXJldCA9IHJldC5yZXZlcnNlKCk7CgkJCX0KCQl9CgoJCXJldHVybiB0aGlzLnB1c2hTdGFjayggcmV0ICk7Cgl9Owp9ICk7CnZhciBybm90d2hpdGUgPSAoIC9cUysvZyApOwoKCgovLyBDb252ZXJ0IFN0cmluZy1mb3JtYXR0ZWQgb3B0aW9ucyBpbnRvIE9iamVjdC1mb3JtYXR0ZWQgb25lcwpmdW5jdGlvbiBjcmVhdGVPcHRpb25zKCBvcHRpb25zICkgewoJdmFyIG9iamVjdCA9IHt9OwoJalF1ZXJ5LmVhY2goIG9wdGlvbnMubWF0Y2goIHJub3R3aGl0ZSApIHx8IFtdLCBmdW5jdGlvbiggXywgZmxhZyApIHsKCQlvYmplY3RbIGZsYWcgXSA9IHRydWU7Cgl9ICk7CglyZXR1cm4gb2JqZWN0Owp9CgovKgogKiBDcmVhdGUgYSBjYWxsYmFjayBsaXN0IHVzaW5nIHRoZSBmb2xsb3dpbmcgcGFyYW1ldGVyczoKICoKICoJb3B0aW9uczogYW4gb3B0aW9uYWwgbGlzdCBvZiBzcGFjZS1zZXBhcmF0ZWQgb3B0aW9ucyB0aGF0IHdpbGwgY2hhbmdlIGhvdwogKgkJCXRoZSBjYWxsYmFjayBsaXN0IGJlaGF2ZXMgb3IgYSBtb3JlIHRyYWRpdGlvbmFsIG9wdGlvbiBvYmplY3QKICoKICogQnkgZGVmYXVsdCBhIGNhbGxiYWNrIGxpc3Qgd2lsbCBhY3QgbGlrZSBhbiBldmVudCBjYWxsYmFjayBsaXN0IGFuZCBjYW4gYmUKICogImZpcmVkIiBtdWx0aXBsZSB0aW1lcy4KICoKICogUG9zc2libGUgb3B0aW9uczoKICoKICoJb25jZToJCQl3aWxsIGVuc3VyZSB0aGUgY2FsbGJhY2sgbGlzdCBjYW4gb25seSBiZSBmaXJlZCBvbmNlIChsaWtlIGEgRGVmZXJyZWQpCiAqCiAqCW1lbW9yeToJCQl3aWxsIGtlZXAgdHJhY2sgb2YgcHJldmlvdXMgdmFsdWVzIGFuZCB3aWxsIGNhbGwgYW55IGNhbGxiYWNrIGFkZGVkCiAqCQkJCQlhZnRlciB0aGUgbGlzdCBoYXMgYmVlbiBmaXJlZCByaWdodCBhd2F5IHdpdGggdGhlIGxhdGVzdCAibWVtb3JpemVkIgogKgkJCQkJdmFsdWVzIChsaWtlIGEgRGVmZXJyZWQpCiAqCiAqCXVuaXF1ZToJCQl3aWxsIGVuc3VyZSBhIGNhbGxiYWNrIGNhbiBvbmx5IGJlIGFkZGVkIG9uY2UgKG5vIGR1cGxpY2F0ZSBpbiB0aGUgbGlzdCkKICoKICoJc3RvcE9uRmFsc2U6CWludGVycnVwdCBjYWxsaW5ncyB3aGVuIGEgY2FsbGJhY2sgcmV0dXJucyBmYWxzZQogKgogKi8KalF1ZXJ5LkNhbGxiYWNrcyA9IGZ1bmN0aW9uKCBvcHRpb25zICkgewoKCS8vIENvbnZlcnQgb3B0aW9ucyBmcm9tIFN0cmluZy1mb3JtYXR0ZWQgdG8gT2JqZWN0LWZvcm1hdHRlZCBpZiBuZWVkZWQKCS8vICh3ZSBjaGVjayBpbiBjYWNoZSBmaXJzdCkKCW9wdGlvbnMgPSB0eXBlb2Ygb3B0aW9ucyA9PT0gInN0cmluZyIgPwoJCWNyZWF0ZU9wdGlvbnMoIG9wdGlvbnMgKSA6CgkJalF1ZXJ5LmV4dGVuZCgge30sIG9wdGlvbnMgKTsKCgl2YXIgLy8gRmxhZyB0byBrbm93IGlmIGxpc3QgaXMgY3VycmVudGx5IGZpcmluZwoJCWZpcmluZywKCgkJLy8gTGFzdCBmaXJlIHZhbHVlIGZvciBub24tZm9yZ2V0dGFibGUgbGlzdHMKCQltZW1vcnksCgoJCS8vIEZsYWcgdG8ga25vdyBpZiBsaXN0IHdhcyBhbHJlYWR5IGZpcmVkCgkJZmlyZWQsCgoJCS8vIEZsYWcgdG8gcHJldmVudCBmaXJpbmcKCQlsb2NrZWQsCgoJCS8vIEFjdHVhbCBjYWxsYmFjayBsaXN0CgkJbGlzdCA9IFtdLAoKCQkvLyBRdWV1ZSBvZiBleGVjdXRpb24gZGF0YSBmb3IgcmVwZWF0YWJsZSBsaXN0cwoJCXF1ZXVlID0gW10sCgoJCS8vIEluZGV4IG9mIGN1cnJlbnRseSBmaXJpbmcgY2FsbGJhY2sgKG1vZGlmaWVkIGJ5IGFkZC9yZW1vdmUgYXMgbmVlZGVkKQoJCWZpcmluZ0luZGV4ID0gLTEsCgoJCS8vIEZpcmUgY2FsbGJhY2tzCgkJZmlyZSA9IGZ1bmN0aW9uKCkgewoKCQkJLy8gRW5mb3JjZSBzaW5nbGUtZmlyaW5nCgkJCWxvY2tlZCA9IG9wdGlvbnMub25jZTsKCgkJCS8vIEV4ZWN1dGUgY2FsbGJhY2tzIGZvciBhbGwgcGVuZGluZyBleGVjdXRpb25zLAoJCQkvLyByZXNwZWN0aW5nIGZpcmluZ0luZGV4IG92ZXJyaWRlcyBhbmQgcnVudGltZSBjaGFuZ2VzCgkJCWZpcmVkID0gZmlyaW5nID0gdHJ1ZTsKCQkJZm9yICggOyBxdWV1ZS5sZW5ndGg7IGZpcmluZ0luZGV4ID0gLTEgKSB7CgkJCQltZW1vcnkgPSBxdWV1ZS5zaGlmdCgpOwoJCQkJd2hpbGUgKCArK2ZpcmluZ0luZGV4IDwgbGlzdC5sZW5ndGggKSB7CgoJCQkJCS8vIFJ1biBjYWxsYmFjayBhbmQgY2hlY2sgZm9yIGVhcmx5IHRlcm1pbmF0aW9uCgkJCQkJaWYgKCBsaXN0WyBmaXJpbmdJbmRleCBdLmFwcGx5KCBtZW1vcnlbIDAgXSwgbWVtb3J5WyAxIF0gKSA9PT0gZmFsc2UgJiYKCQkJCQkJb3B0aW9ucy5zdG9wT25GYWxzZSApIHsKCgkJCQkJCS8vIEp1bXAgdG8gZW5kIGFuZCBmb3JnZXQgdGhlIGRhdGEgc28gLmFkZCBkb2Vzbid0IHJlLWZpcmUKCQkJCQkJZmlyaW5nSW5kZXggPSBsaXN0Lmxlbmd0aDsKCQkJCQkJbWVtb3J5ID0gZmFsc2U7CgkJCQkJfQoJCQkJfQoJCQl9CgoJCQkvLyBGb3JnZXQgdGhlIGRhdGEgaWYgd2UncmUgZG9uZSB3aXRoIGl0CgkJCWlmICggIW9wdGlvbnMubWVtb3J5ICkgewoJCQkJbWVtb3J5ID0gZmFsc2U7CgkJCX0KCgkJCWZpcmluZyA9IGZhbHNlOwoKCQkJLy8gQ2xlYW4gdXAgaWYgd2UncmUgZG9uZSBmaXJpbmcgZm9yIGdvb2QKCQkJaWYgKCBsb2NrZWQgKSB7CgoJCQkJLy8gS2VlcCBhbiBlbXB0eSBsaXN0IGlmIHdlIGhhdmUgZGF0YSBmb3IgZnV0dXJlIGFkZCBjYWxscwoJCQkJaWYgKCBtZW1vcnkgKSB7CgkJCQkJbGlzdCA9IFtdOwoKCQkJCS8vIE90aGVyd2lzZSwgdGhpcyBvYmplY3QgaXMgc3BlbnQKCQkJCX0gZWxzZSB7CgkJCQkJbGlzdCA9ICIiOwoJCQkJfQoJCQl9CgkJfSwKCgkJLy8gQWN0dWFsIENhbGxiYWNrcyBvYmplY3QKCQlzZWxmID0gewoKCQkJLy8gQWRkIGEgY2FsbGJhY2sgb3IgYSBjb2xsZWN0aW9uIG9mIGNhbGxiYWNrcyB0byB0aGUgbGlzdAoJCQlhZGQ6IGZ1bmN0aW9uKCkgewoJCQkJaWYgKCBsaXN0ICkgewoKCQkJCQkvLyBJZiB3ZSBoYXZlIG1lbW9yeSBmcm9tIGEgcGFzdCBydW4sIHdlIHNob3VsZCBmaXJlIGFmdGVyIGFkZGluZwoJCQkJCWlmICggbWVtb3J5ICYmICFmaXJpbmcgKSB7CgkJCQkJCWZpcmluZ0luZGV4ID0gbGlzdC5sZW5ndGggLSAxOwoJCQkJCQlxdWV1ZS5wdXNoKCBtZW1vcnkgKTsKCQkJCQl9CgoJCQkJCSggZnVuY3Rpb24gYWRkKCBhcmdzICkgewoJCQkJCQlqUXVlcnkuZWFjaCggYXJncywgZnVuY3Rpb24oIF8sIGFyZyApIHsKCQkJCQkJCWlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIGFyZyApICkgewoJCQkJCQkJCWlmICggIW9wdGlvbnMudW5pcXVlIHx8ICFzZWxmLmhhcyggYXJnICkgKSB7CgkJCQkJCQkJCWxpc3QucHVzaCggYXJnICk7CgkJCQkJCQkJfQoJCQkJCQkJfSBlbHNlIGlmICggYXJnICYmIGFyZy5sZW5ndGggJiYgalF1ZXJ5LnR5cGUoIGFyZyApICE9PSAic3RyaW5nIiApIHsKCgkJCQkJCQkJLy8gSW5zcGVjdCByZWN1cnNpdmVseQoJCQkJCQkJCWFkZCggYXJnICk7CgkJCQkJCQl9CgkJCQkJCX0gKTsKCQkJCQl9ICkoIGFyZ3VtZW50cyApOwoKCQkJCQlpZiAoIG1lbW9yeSAmJiAhZmlyaW5nICkgewoJCQkJCQlmaXJlKCk7CgkJCQkJfQoJCQkJfQoJCQkJcmV0dXJuIHRoaXM7CgkJCX0sCgoJCQkvLyBSZW1vdmUgYSBjYWxsYmFjayBmcm9tIHRoZSBsaXN0CgkJCXJlbW92ZTogZnVuY3Rpb24oKSB7CgkJCQlqUXVlcnkuZWFjaCggYXJndW1lbnRzLCBmdW5jdGlvbiggXywgYXJnICkgewoJCQkJCXZhciBpbmRleDsKCQkJCQl3aGlsZSAoICggaW5kZXggPSBqUXVlcnkuaW5BcnJheSggYXJnLCBsaXN0LCBpbmRleCApICkgPiAtMSApIHsKCQkJCQkJbGlzdC5zcGxpY2UoIGluZGV4LCAxICk7CgoJCQkJCQkvLyBIYW5kbGUgZmlyaW5nIGluZGV4ZXMKCQkJCQkJaWYgKCBpbmRleCA8PSBmaXJpbmdJbmRleCApIHsKCQkJCQkJCWZpcmluZ0luZGV4LS07CgkJCQkJCX0KCQkJCQl9CgkJCQl9ICk7CgkJCQlyZXR1cm4gdGhpczsKCQkJfSwKCgkJCS8vIENoZWNrIGlmIGEgZ2l2ZW4gY2FsbGJhY2sgaXMgaW4gdGhlIGxpc3QuCgkJCS8vIElmIG5vIGFyZ3VtZW50IGlzIGdpdmVuLCByZXR1cm4gd2hldGhlciBvciBub3QgbGlzdCBoYXMgY2FsbGJhY2tzIGF0dGFjaGVkLgoJCQloYXM6IGZ1bmN0aW9uKCBmbiApIHsKCQkJCXJldHVybiBmbiA/CgkJCQkJalF1ZXJ5LmluQXJyYXkoIGZuLCBsaXN0ICkgPiAtMSA6CgkJCQkJbGlzdC5sZW5ndGggPiAwOwoJCQl9LAoKCQkJLy8gUmVtb3ZlIGFsbCBjYWxsYmFja3MgZnJvbSB0aGUgbGlzdAoJCQllbXB0eTogZnVuY3Rpb24oKSB7CgkJCQlpZiAoIGxpc3QgKSB7CgkJCQkJbGlzdCA9IFtdOwoJCQkJfQoJCQkJcmV0dXJuIHRoaXM7CgkJCX0sCgoJCQkvLyBEaXNhYmxlIC5maXJlIGFuZCAuYWRkCgkJCS8vIEFib3J0IGFueSBjdXJyZW50L3BlbmRpbmcgZXhlY3V0aW9ucwoJCQkvLyBDbGVhciBhbGwgY2FsbGJhY2tzIGFuZCB2YWx1ZXMKCQkJZGlzYWJsZTogZnVuY3Rpb24oKSB7CgkJCQlsb2NrZWQgPSBxdWV1ZSA9IFtdOwoJCQkJbGlzdCA9IG1lbW9yeSA9ICIiOwoJCQkJcmV0dXJuIHRoaXM7CgkJCX0sCgkJCWRpc2FibGVkOiBmdW5jdGlvbigpIHsKCQkJCXJldHVybiAhbGlzdDsKCQkJfSwKCgkJCS8vIERpc2FibGUgLmZpcmUKCQkJLy8gQWxzbyBkaXNhYmxlIC5hZGQgdW5sZXNzIHdlIGhhdmUgbWVtb3J5IChzaW5jZSBpdCB3b3VsZCBoYXZlIG5vIGVmZmVjdCkKCQkJLy8gQWJvcnQgYW55IHBlbmRpbmcgZXhlY3V0aW9ucwoJCQlsb2NrOiBmdW5jdGlvbigpIHsKCQkJCWxvY2tlZCA9IHRydWU7CgkJCQlpZiAoICFtZW1vcnkgKSB7CgkJCQkJc2VsZi5kaXNhYmxlKCk7CgkJCQl9CgkJCQlyZXR1cm4gdGhpczsKCQkJfSwKCQkJbG9ja2VkOiBmdW5jdGlvbigpIHsKCQkJCXJldHVybiAhIWxvY2tlZDsKCQkJfSwKCgkJCS8vIENhbGwgYWxsIGNhbGxiYWNrcyB3aXRoIHRoZSBnaXZlbiBjb250ZXh0IGFuZCBhcmd1bWVudHMKCQkJZmlyZVdpdGg6IGZ1bmN0aW9uKCBjb250ZXh0LCBhcmdzICkgewoJCQkJaWYgKCAhbG9ja2VkICkgewoJCQkJCWFyZ3MgPSBhcmdzIHx8IFtdOwoJCQkJCWFyZ3MgPSBbIGNvbnRleHQsIGFyZ3Muc2xpY2UgPyBhcmdzLnNsaWNlKCkgOiBhcmdzIF07CgkJCQkJcXVldWUucHVzaCggYXJncyApOwoJCQkJCWlmICggIWZpcmluZyApIHsKCQkJCQkJZmlyZSgpOwoJCQkJCX0KCQkJCX0KCQkJCXJldHVybiB0aGlzOwoJCQl9LAoKCQkJLy8gQ2FsbCBhbGwgdGhlIGNhbGxiYWNrcyB3aXRoIHRoZSBnaXZlbiBhcmd1bWVudHMKCQkJZmlyZTogZnVuY3Rpb24oKSB7CgkJCQlzZWxmLmZpcmVXaXRoKCB0aGlzLCBhcmd1bWVudHMgKTsKCQkJCXJldHVybiB0aGlzOwoJCQl9LAoKCQkJLy8gVG8ga25vdyBpZiB0aGUgY2FsbGJhY2tzIGhhdmUgYWxyZWFkeSBiZWVuIGNhbGxlZCBhdCBsZWFzdCBvbmNlCgkJCWZpcmVkOiBmdW5jdGlvbigpIHsKCQkJCXJldHVybiAhIWZpcmVkOwoJCQl9CgkJfTsKCglyZXR1cm4gc2VsZjsKfTsKCgpqUXVlcnkuZXh0ZW5kKCB7CgoJRGVmZXJyZWQ6IGZ1bmN0aW9uKCBmdW5jICkgewoJCXZhciB0dXBsZXMgPSBbCgoJCQkJLy8gYWN0aW9uLCBhZGQgbGlzdGVuZXIsIGxpc3RlbmVyIGxpc3QsIGZpbmFsIHN0YXRlCgkJCQlbICJyZXNvbHZlIiwgImRvbmUiLCBqUXVlcnkuQ2FsbGJhY2tzKCAib25jZSBtZW1vcnkiICksICJyZXNvbHZlZCIgXSwKCQkJCVsgInJlamVjdCIsICJmYWlsIiwgalF1ZXJ5LkNhbGxiYWNrcyggIm9uY2UgbWVtb3J5IiApLCAicmVqZWN0ZWQiIF0sCgkJCQlbICJub3RpZnkiLCAicHJvZ3Jlc3MiLCBqUXVlcnkuQ2FsbGJhY2tzKCAibWVtb3J5IiApIF0KCQkJXSwKCQkJc3RhdGUgPSAicGVuZGluZyIsCgkJCXByb21pc2UgPSB7CgkJCQlzdGF0ZTogZnVuY3Rpb24oKSB7CgkJCQkJcmV0dXJuIHN0YXRlOwoJCQkJfSwKCQkJCWFsd2F5czogZnVuY3Rpb24oKSB7CgkJCQkJZGVmZXJyZWQuZG9uZSggYXJndW1lbnRzICkuZmFpbCggYXJndW1lbnRzICk7CgkJCQkJcmV0dXJuIHRoaXM7CgkJCQl9LAoJCQkJdGhlbjogZnVuY3Rpb24oIC8qIGZuRG9uZSwgZm5GYWlsLCBmblByb2dyZXNzICovICkgewoJCQkJCXZhciBmbnMgPSBhcmd1bWVudHM7CgkJCQkJcmV0dXJuIGpRdWVyeS5EZWZlcnJlZCggZnVuY3Rpb24oIG5ld0RlZmVyICkgewoJCQkJCQlqUXVlcnkuZWFjaCggdHVwbGVzLCBmdW5jdGlvbiggaSwgdHVwbGUgKSB7CgkJCQkJCQl2YXIgZm4gPSBqUXVlcnkuaXNGdW5jdGlvbiggZm5zWyBpIF0gKSAmJiBmbnNbIGkgXTsKCgkJCQkJCQkvLyBkZWZlcnJlZFsgZG9uZSB8IGZhaWwgfCBwcm9ncmVzcyBdIGZvciBmb3J3YXJkaW5nIGFjdGlvbnMgdG8gbmV3RGVmZXIKCQkJCQkJCWRlZmVycmVkWyB0dXBsZVsgMSBdIF0oIGZ1bmN0aW9uKCkgewoJCQkJCQkJCXZhciByZXR1cm5lZCA9IGZuICYmIGZuLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTsKCQkJCQkJCQlpZiAoIHJldHVybmVkICYmIGpRdWVyeS5pc0Z1bmN0aW9uKCByZXR1cm5lZC5wcm9taXNlICkgKSB7CgkJCQkJCQkJCXJldHVybmVkLnByb21pc2UoKQoJCQkJCQkJCQkJLnByb2dyZXNzKCBuZXdEZWZlci5ub3RpZnkgKQoJCQkJCQkJCQkJLmRvbmUoIG5ld0RlZmVyLnJlc29sdmUgKQoJCQkJCQkJCQkJLmZhaWwoIG5ld0RlZmVyLnJlamVjdCApOwoJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCW5ld0RlZmVyWyB0dXBsZVsgMCBdICsgIldpdGgiIF0oCgkJCQkJCQkJCQl0aGlzID09PSBwcm9taXNlID8gbmV3RGVmZXIucHJvbWlzZSgpIDogdGhpcywKCQkJCQkJCQkJCWZuID8gWyByZXR1cm5lZCBdIDogYXJndW1lbnRzCgkJCQkJCQkJCSk7CgkJCQkJCQkJfQoJCQkJCQkJfSApOwoJCQkJCQl9ICk7CgkJCQkJCWZucyA9IG51bGw7CgkJCQkJfSApLnByb21pc2UoKTsKCQkJCX0sCgoJCQkJLy8gR2V0IGEgcHJvbWlzZSBmb3IgdGhpcyBkZWZlcnJlZAoJCQkJLy8gSWYgb2JqIGlzIHByb3ZpZGVkLCB0aGUgcHJvbWlzZSBhc3BlY3QgaXMgYWRkZWQgdG8gdGhlIG9iamVjdAoJCQkJcHJvbWlzZTogZnVuY3Rpb24oIG9iaiApIHsKCQkJCQlyZXR1cm4gb2JqICE9IG51bGwgPyBqUXVlcnkuZXh0ZW5kKCBvYmosIHByb21pc2UgKSA6IHByb21pc2U7CgkJCQl9CgkJCX0sCgkJCWRlZmVycmVkID0ge307CgoJCS8vIEtlZXAgcGlwZSBmb3IgYmFjay1jb21wYXQKCQlwcm9taXNlLnBpcGUgPSBwcm9taXNlLnRoZW47CgoJCS8vIEFkZCBsaXN0LXNwZWNpZmljIG1ldGhvZHMKCQlqUXVlcnkuZWFjaCggdHVwbGVzLCBmdW5jdGlvbiggaSwgdHVwbGUgKSB7CgkJCXZhciBsaXN0ID0gdHVwbGVbIDIgXSwKCQkJCXN0YXRlU3RyaW5nID0gdHVwbGVbIDMgXTsKCgkJCS8vIHByb21pc2VbIGRvbmUgfCBmYWlsIHwgcHJvZ3Jlc3MgXSA9IGxpc3QuYWRkCgkJCXByb21pc2VbIHR1cGxlWyAxIF0gXSA9IGxpc3QuYWRkOwoKCQkJLy8gSGFuZGxlIHN0YXRlCgkJCWlmICggc3RhdGVTdHJpbmcgKSB7CgkJCQlsaXN0LmFkZCggZnVuY3Rpb24oKSB7CgoJCQkJCS8vIHN0YXRlID0gWyByZXNvbHZlZCB8IHJlamVjdGVkIF0KCQkJCQlzdGF0ZSA9IHN0YXRlU3RyaW5nOwoKCQkJCS8vIFsgcmVqZWN0X2xpc3QgfCByZXNvbHZlX2xpc3QgXS5kaXNhYmxlOyBwcm9ncmVzc19saXN0LmxvY2sKCQkJCX0sIHR1cGxlc1sgaSBeIDEgXVsgMiBdLmRpc2FibGUsIHR1cGxlc1sgMiBdWyAyIF0ubG9jayApOwoJCQl9CgoJCQkvLyBkZWZlcnJlZFsgcmVzb2x2ZSB8IHJlamVjdCB8IG5vdGlmeSBdCgkJCWRlZmVycmVkWyB0dXBsZVsgMCBdIF0gPSBmdW5jdGlvbigpIHsKCQkJCWRlZmVycmVkWyB0dXBsZVsgMCBdICsgIldpdGgiIF0oIHRoaXMgPT09IGRlZmVycmVkID8gcHJvbWlzZSA6IHRoaXMsIGFyZ3VtZW50cyApOwoJCQkJcmV0dXJuIHRoaXM7CgkJCX07CgkJCWRlZmVycmVkWyB0dXBsZVsgMCBdICsgIldpdGgiIF0gPSBsaXN0LmZpcmVXaXRoOwoJCX0gKTsKCgkJLy8gTWFrZSB0aGUgZGVmZXJyZWQgYSBwcm9taXNlCgkJcHJvbWlzZS5wcm9taXNlKCBkZWZlcnJlZCApOwoKCQkvLyBDYWxsIGdpdmVuIGZ1bmMgaWYgYW55CgkJaWYgKCBmdW5jICkgewoJCQlmdW5jLmNhbGwoIGRlZmVycmVkLCBkZWZlcnJlZCApOwoJCX0KCgkJLy8gQWxsIGRvbmUhCgkJcmV0dXJuIGRlZmVycmVkOwoJfSwKCgkvLyBEZWZlcnJlZCBoZWxwZXIKCXdoZW46IGZ1bmN0aW9uKCBzdWJvcmRpbmF0ZSAvKiAsIC4uLiwgc3Vib3JkaW5hdGVOICovICkgewoJCXZhciBpID0gMCwKCQkJcmVzb2x2ZVZhbHVlcyA9IHNsaWNlLmNhbGwoIGFyZ3VtZW50cyApLAoJCQlsZW5ndGggPSByZXNvbHZlVmFsdWVzLmxlbmd0aCwKCgkJCS8vIHRoZSBjb3VudCBvZiB1bmNvbXBsZXRlZCBzdWJvcmRpbmF0ZXMKCQkJcmVtYWluaW5nID0gbGVuZ3RoICE9PSAxIHx8CgkJCQkoIHN1Ym9yZGluYXRlICYmIGpRdWVyeS5pc0Z1bmN0aW9uKCBzdWJvcmRpbmF0ZS5wcm9taXNlICkgKSA/IGxlbmd0aCA6IDAsCgoJCQkvLyB0aGUgbWFzdGVyIERlZmVycmVkLgoJCQkvLyBJZiByZXNvbHZlVmFsdWVzIGNvbnNpc3Qgb2Ygb25seSBhIHNpbmdsZSBEZWZlcnJlZCwganVzdCB1c2UgdGhhdC4KCQkJZGVmZXJyZWQgPSByZW1haW5pbmcgPT09IDEgPyBzdWJvcmRpbmF0ZSA6IGpRdWVyeS5EZWZlcnJlZCgpLAoKCQkJLy8gVXBkYXRlIGZ1bmN0aW9uIGZvciBib3RoIHJlc29sdmUgYW5kIHByb2dyZXNzIHZhbHVlcwoJCQl1cGRhdGVGdW5jID0gZnVuY3Rpb24oIGksIGNvbnRleHRzLCB2YWx1ZXMgKSB7CgkJCQlyZXR1cm4gZnVuY3Rpb24oIHZhbHVlICkgewoJCQkJCWNvbnRleHRzWyBpIF0gPSB0aGlzOwoJCQkJCXZhbHVlc1sgaSBdID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBzbGljZS5jYWxsKCBhcmd1bWVudHMgKSA6IHZhbHVlOwoJCQkJCWlmICggdmFsdWVzID09PSBwcm9ncmVzc1ZhbHVlcyApIHsKCQkJCQkJZGVmZXJyZWQubm90aWZ5V2l0aCggY29udGV4dHMsIHZhbHVlcyApOwoKCQkJCQl9IGVsc2UgaWYgKCAhKCAtLXJlbWFpbmluZyApICkgewoJCQkJCQlkZWZlcnJlZC5yZXNvbHZlV2l0aCggY29udGV4dHMsIHZhbHVlcyApOwoJCQkJCX0KCQkJCX07CgkJCX0sCgoJCQlwcm9ncmVzc1ZhbHVlcywgcHJvZ3Jlc3NDb250ZXh0cywgcmVzb2x2ZUNvbnRleHRzOwoKCQkvLyBhZGQgbGlzdGVuZXJzIHRvIERlZmVycmVkIHN1Ym9yZGluYXRlczsgdHJlYXQgb3RoZXJzIGFzIHJlc29sdmVkCgkJaWYgKCBsZW5ndGggPiAxICkgewoJCQlwcm9ncmVzc1ZhbHVlcyA9IG5ldyBBcnJheSggbGVuZ3RoICk7CgkJCXByb2dyZXNzQ29udGV4dHMgPSBuZXcgQXJyYXkoIGxlbmd0aCApOwoJCQlyZXNvbHZlQ29udGV4dHMgPSBuZXcgQXJyYXkoIGxlbmd0aCApOwoJCQlmb3IgKCA7IGkgPCBsZW5ndGg7IGkrKyApIHsKCQkJCWlmICggcmVzb2x2ZVZhbHVlc1sgaSBdICYmIGpRdWVyeS5pc0Z1bmN0aW9uKCByZXNvbHZlVmFsdWVzWyBpIF0ucHJvbWlzZSApICkgewoJCQkJCXJlc29sdmVWYWx1ZXNbIGkgXS5wcm9taXNlKCkKCQkJCQkJLnByb2dyZXNzKCB1cGRhdGVGdW5jKCBpLCBwcm9ncmVzc0NvbnRleHRzLCBwcm9ncmVzc1ZhbHVlcyApICkKCQkJCQkJLmRvbmUoIHVwZGF0ZUZ1bmMoIGksIHJlc29sdmVDb250ZXh0cywgcmVzb2x2ZVZhbHVlcyApICkKCQkJCQkJLmZhaWwoIGRlZmVycmVkLnJlamVjdCApOwoJCQkJfSBlbHNlIHsKCQkJCQktLXJlbWFpbmluZzsKCQkJCX0KCQkJfQoJCX0KCgkJLy8gaWYgd2UncmUgbm90IHdhaXRpbmcgb24gYW55dGhpbmcsIHJlc29sdmUgdGhlIG1hc3RlcgoJCWlmICggIXJlbWFpbmluZyApIHsKCQkJZGVmZXJyZWQucmVzb2x2ZVdpdGgoIHJlc29sdmVDb250ZXh0cywgcmVzb2x2ZVZhbHVlcyApOwoJCX0KCgkJcmV0dXJuIGRlZmVycmVkLnByb21pc2UoKTsKCX0KfSApOwoKCi8vIFRoZSBkZWZlcnJlZCB1c2VkIG9uIERPTSByZWFkeQp2YXIgcmVhZHlMaXN0OwoKalF1ZXJ5LmZuLnJlYWR5ID0gZnVuY3Rpb24oIGZuICkgewoKCS8vIEFkZCB0aGUgY2FsbGJhY2sKCWpRdWVyeS5yZWFkeS5wcm9taXNlKCkuZG9uZSggZm4gKTsKCglyZXR1cm4gdGhpczsKfTsKCmpRdWVyeS5leHRlbmQoIHsKCgkvLyBJcyB0aGUgRE9NIHJlYWR5IHRvIGJlIHVzZWQ/IFNldCB0byB0cnVlIG9uY2UgaXQgb2NjdXJzLgoJaXNSZWFkeTogZmFsc2UsCgoJLy8gQSBjb3VudGVyIHRvIHRyYWNrIGhvdyBtYW55IGl0ZW1zIHRvIHdhaXQgZm9yIGJlZm9yZQoJLy8gdGhlIHJlYWR5IGV2ZW50IGZpcmVzLiBTZWUgIzY3ODEKCXJlYWR5V2FpdDogMSwKCgkvLyBIb2xkIChvciByZWxlYXNlKSB0aGUgcmVhZHkgZXZlbnQKCWhvbGRSZWFkeTogZnVuY3Rpb24oIGhvbGQgKSB7CgkJaWYgKCBob2xkICkgewoJCQlqUXVlcnkucmVhZHlXYWl0Kys7CgkJfSBlbHNlIHsKCQkJalF1ZXJ5LnJlYWR5KCB0cnVlICk7CgkJfQoJfSwKCgkvLyBIYW5kbGUgd2hlbiB0aGUgRE9NIGlzIHJlYWR5CglyZWFkeTogZnVuY3Rpb24oIHdhaXQgKSB7CgoJCS8vIEFib3J0IGlmIHRoZXJlIGFyZSBwZW5kaW5nIGhvbGRzIG9yIHdlJ3JlIGFscmVhZHkgcmVhZHkKCQlpZiAoIHdhaXQgPT09IHRydWUgPyAtLWpRdWVyeS5yZWFkeVdhaXQgOiBqUXVlcnkuaXNSZWFkeSApIHsKCQkJcmV0dXJuOwoJCX0KCgkJLy8gUmVtZW1iZXIgdGhhdCB0aGUgRE9NIGlzIHJlYWR5CgkJalF1ZXJ5LmlzUmVhZHkgPSB0cnVlOwoKCQkvLyBJZiBhIG5vcm1hbCBET00gUmVhZHkgZXZlbnQgZmlyZWQsIGRlY3JlbWVudCwgYW5kIHdhaXQgaWYgbmVlZCBiZQoJCWlmICggd2FpdCAhPT0gdHJ1ZSAmJiAtLWpRdWVyeS5yZWFkeVdhaXQgPiAwICkgewoJCQlyZXR1cm47CgkJfQoKCQkvLyBJZiB0aGVyZSBhcmUgZnVuY3Rpb25zIGJvdW5kLCB0byBleGVjdXRlCgkJcmVhZHlMaXN0LnJlc29sdmVXaXRoKCBkb2N1bWVudCwgWyBqUXVlcnkgXSApOwoKCQkvLyBUcmlnZ2VyIGFueSBib3VuZCByZWFkeSBldmVudHMKCQlpZiAoIGpRdWVyeS5mbi50cmlnZ2VySGFuZGxlciApIHsKCQkJalF1ZXJ5KCBkb2N1bWVudCApLnRyaWdnZXJIYW5kbGVyKCAicmVhZHkiICk7CgkJCWpRdWVyeSggZG9jdW1lbnQgKS5vZmYoICJyZWFkeSIgKTsKCQl9Cgl9Cn0gKTsKCi8qKgogKiBDbGVhbi11cCBtZXRob2QgZm9yIGRvbSByZWFkeSBldmVudHMKICovCmZ1bmN0aW9uIGRldGFjaCgpIHsKCWlmICggZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciApIHsKCQlkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCAiRE9NQ29udGVudExvYWRlZCIsIGNvbXBsZXRlZCApOwoJCXdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCAibG9hZCIsIGNvbXBsZXRlZCApOwoKCX0gZWxzZSB7CgkJZG9jdW1lbnQuZGV0YWNoRXZlbnQoICJvbnJlYWR5c3RhdGVjaGFuZ2UiLCBjb21wbGV0ZWQgKTsKCQl3aW5kb3cuZGV0YWNoRXZlbnQoICJvbmxvYWQiLCBjb21wbGV0ZWQgKTsKCX0KfQoKLyoqCiAqIFRoZSByZWFkeSBldmVudCBoYW5kbGVyIGFuZCBzZWxmIGNsZWFudXAgbWV0aG9kCiAqLwpmdW5jdGlvbiBjb21wbGV0ZWQoKSB7CgoJLy8gcmVhZHlTdGF0ZSA9PT0gImNvbXBsZXRlIiBpcyBnb29kIGVub3VnaCBmb3IgdXMgdG8gY2FsbCB0aGUgZG9tIHJlYWR5IGluIG9sZElFCglpZiAoIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIgfHwKCQl3aW5kb3cuZXZlbnQudHlwZSA9PT0gImxvYWQiIHx8CgkJZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gImNvbXBsZXRlIiApIHsKCgkJZGV0YWNoKCk7CgkJalF1ZXJ5LnJlYWR5KCk7Cgl9Cn0KCmpRdWVyeS5yZWFkeS5wcm9taXNlID0gZnVuY3Rpb24oIG9iaiApIHsKCWlmICggIXJlYWR5TGlzdCApIHsKCgkJcmVhZHlMaXN0ID0galF1ZXJ5LkRlZmVycmVkKCk7CgoJCS8vIENhdGNoIGNhc2VzIHdoZXJlICQoZG9jdW1lbnQpLnJlYWR5KCkgaXMgY2FsbGVkCgkJLy8gYWZ0ZXIgdGhlIGJyb3dzZXIgZXZlbnQgaGFzIGFscmVhZHkgb2NjdXJyZWQuCgkJLy8gU3VwcG9ydDogSUU2LTEwCgkJLy8gT2xkZXIgSUUgc29tZXRpbWVzIHNpZ25hbHMgImludGVyYWN0aXZlIiB0b28gc29vbgoJCWlmICggZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gImNvbXBsZXRlIiB8fAoJCQkoIGRvY3VtZW50LnJlYWR5U3RhdGUgIT09ICJsb2FkaW5nIiAmJiAhZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmRvU2Nyb2xsICkgKSB7CgoJCQkvLyBIYW5kbGUgaXQgYXN5bmNocm9ub3VzbHkgdG8gYWxsb3cgc2NyaXB0cyB0aGUgb3Bwb3J0dW5pdHkgdG8gZGVsYXkgcmVhZHkKCQkJd2luZG93LnNldFRpbWVvdXQoIGpRdWVyeS5yZWFkeSApOwoKCQkvLyBTdGFuZGFyZHMtYmFzZWQgYnJvd3NlcnMgc3VwcG9ydCBET01Db250ZW50TG9hZGVkCgkJfSBlbHNlIGlmICggZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciApIHsKCgkJCS8vIFVzZSB0aGUgaGFuZHkgZXZlbnQgY2FsbGJhY2sKCQkJZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggIkRPTUNvbnRlbnRMb2FkZWQiLCBjb21wbGV0ZWQgKTsKCgkJCS8vIEEgZmFsbGJhY2sgdG8gd2luZG93Lm9ubG9hZCwgdGhhdCB3aWxsIGFsd2F5cyB3b3JrCgkJCXdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCAibG9hZCIsIGNvbXBsZXRlZCApOwoKCQkvLyBJZiBJRSBldmVudCBtb2RlbCBpcyB1c2VkCgkJfSBlbHNlIHsKCgkJCS8vIEVuc3VyZSBmaXJpbmcgYmVmb3JlIG9ubG9hZCwgbWF5YmUgbGF0ZSBidXQgc2FmZSBhbHNvIGZvciBpZnJhbWVzCgkJCWRvY3VtZW50LmF0dGFjaEV2ZW50KCAib25yZWFkeXN0YXRlY2hhbmdlIiwgY29tcGxldGVkICk7CgoJCQkvLyBBIGZhbGxiYWNrIHRvIHdpbmRvdy5vbmxvYWQsIHRoYXQgd2lsbCBhbHdheXMgd29yawoJCQl3aW5kb3cuYXR0YWNoRXZlbnQoICJvbmxvYWQiLCBjb21wbGV0ZWQgKTsKCgkJCS8vIElmIElFIGFuZCBub3QgYSBmcmFtZQoJCQkvLyBjb250aW51YWxseSBjaGVjayB0byBzZWUgaWYgdGhlIGRvY3VtZW50IGlzIHJlYWR5CgkJCXZhciB0b3AgPSBmYWxzZTsKCgkJCXRyeSB7CgkJCQl0b3AgPSB3aW5kb3cuZnJhbWVFbGVtZW50ID09IG51bGwgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50OwoJCQl9IGNhdGNoICggZSApIHt9CgoJCQlpZiAoIHRvcCAmJiB0b3AuZG9TY3JvbGwgKSB7CgkJCQkoIGZ1bmN0aW9uIGRvU2Nyb2xsQ2hlY2soKSB7CgkJCQkJaWYgKCAhalF1ZXJ5LmlzUmVhZHkgKSB7CgoJCQkJCQl0cnkgewoKCQkJCQkJCS8vIFVzZSB0aGUgdHJpY2sgYnkgRGllZ28gUGVyaW5pCgkJCQkJCQkvLyBodHRwOi8vamF2YXNjcmlwdC5ud2JveC5jb20vSUVDb250ZW50TG9hZGVkLwoJCQkJCQkJdG9wLmRvU2Nyb2xsKCAibGVmdCIgKTsKCQkJCQkJfSBjYXRjaCAoIGUgKSB7CgkJCQkJCQlyZXR1cm4gd2luZG93LnNldFRpbWVvdXQoIGRvU2Nyb2xsQ2hlY2ssIDUwICk7CgkJCQkJCX0KCgkJCQkJCS8vIGRldGFjaCBhbGwgZG9tIHJlYWR5IGV2ZW50cwoJCQkJCQlkZXRhY2goKTsKCgkJCQkJCS8vIGFuZCBleGVjdXRlIGFueSB3YWl0aW5nIGZ1bmN0aW9ucwoJCQkJCQlqUXVlcnkucmVhZHkoKTsKCQkJCQl9CgkJCQl9ICkoKTsKCQkJfQoJCX0KCX0KCXJldHVybiByZWFkeUxpc3QucHJvbWlzZSggb2JqICk7Cn07CgovLyBLaWNrIG9mZiB0aGUgRE9NIHJlYWR5IGNoZWNrIGV2ZW4gaWYgdGhlIHVzZXIgZG9lcyBub3QKalF1ZXJ5LnJlYWR5LnByb21pc2UoKTsKCgoKCi8vIFN1cHBvcnQ6IElFPDkKLy8gSXRlcmF0aW9uIG92ZXIgb2JqZWN0J3MgaW5oZXJpdGVkIHByb3BlcnRpZXMgYmVmb3JlIGl0cyBvd24KdmFyIGk7CmZvciAoIGkgaW4galF1ZXJ5KCBzdXBwb3J0ICkgKSB7CglicmVhazsKfQpzdXBwb3J0Lm93bkZpcnN0ID0gaSA9PT0gIjAiOwoKLy8gTm90ZTogbW9zdCBzdXBwb3J0IHRlc3RzIGFyZSBkZWZpbmVkIGluIHRoZWlyIHJlc3BlY3RpdmUgbW9kdWxlcy4KLy8gZmFsc2UgdW50aWwgdGhlIHRlc3QgaXMgcnVuCnN1cHBvcnQuaW5saW5lQmxvY2tOZWVkc0xheW91dCA9IGZhbHNlOwoKLy8gRXhlY3V0ZSBBU0FQIGluIGNhc2Ugd2UgbmVlZCB0byBzZXQgYm9keS5zdHlsZS56b29tCmpRdWVyeSggZnVuY3Rpb24oKSB7CgoJLy8gTWluaWZpZWQ6IHZhciBhLGIsYyxkCgl2YXIgdmFsLCBkaXYsIGJvZHksIGNvbnRhaW5lcjsKCglib2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoICJib2R5IiApWyAwIF07CglpZiAoICFib2R5IHx8ICFib2R5LnN0eWxlICkgewoKCQkvLyBSZXR1cm4gZm9yIGZyYW1lc2V0IGRvY3MgdGhhdCBkb24ndCBoYXZlIGEgYm9keQoJCXJldHVybjsKCX0KCgkvLyBTZXR1cAoJZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggImRpdiIgKTsKCWNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICJkaXYiICk7Cgljb250YWluZXIuc3R5bGUuY3NzVGV4dCA9ICJwb3NpdGlvbjphYnNvbHV0ZTtib3JkZXI6MDt3aWR0aDowO2hlaWdodDowO3RvcDowO2xlZnQ6LTk5OTlweCI7Cglib2R5LmFwcGVuZENoaWxkKCBjb250YWluZXIgKS5hcHBlbmRDaGlsZCggZGl2ICk7CgoJaWYgKCB0eXBlb2YgZGl2LnN0eWxlLnpvb20gIT09ICJ1bmRlZmluZWQiICkgewoKCQkvLyBTdXBwb3J0OiBJRTw4CgkJLy8gQ2hlY2sgaWYgbmF0aXZlbHkgYmxvY2stbGV2ZWwgZWxlbWVudHMgYWN0IGxpa2UgaW5saW5lLWJsb2NrCgkJLy8gZWxlbWVudHMgd2hlbiBzZXR0aW5nIHRoZWlyIGRpc3BsYXkgdG8gJ2lubGluZScgYW5kIGdpdmluZwoJCS8vIHRoZW0gbGF5b3V0CgkJZGl2LnN0eWxlLmNzc1RleHQgPSAiZGlzcGxheTppbmxpbmU7bWFyZ2luOjA7Ym9yZGVyOjA7cGFkZGluZzoxcHg7d2lkdGg6MXB4O3pvb206MSI7CgoJCXN1cHBvcnQuaW5saW5lQmxvY2tOZWVkc0xheW91dCA9IHZhbCA9IGRpdi5vZmZzZXRXaWR0aCA9PT0gMzsKCQlpZiAoIHZhbCApIHsKCgkJCS8vIFByZXZlbnQgSUUgNiBmcm9tIGFmZmVjdGluZyBsYXlvdXQgZm9yIHBvc2l0aW9uZWQgZWxlbWVudHMgIzExMDQ4CgkJCS8vIFByZXZlbnQgSUUgZnJvbSBzaHJpbmtpbmcgdGhlIGJvZHkgaW4gSUUgNyBtb2RlICMxMjg2OQoJCQkvLyBTdXBwb3J0OiBJRTw4CgkJCWJvZHkuc3R5bGUuem9vbSA9IDE7CgkJfQoJfQoKCWJvZHkucmVtb3ZlQ2hpbGQoIGNvbnRhaW5lciApOwp9ICk7CgoKKCBmdW5jdGlvbigpIHsKCXZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAiZGl2IiApOwoKCS8vIFN1cHBvcnQ6IElFPDkKCXN1cHBvcnQuZGVsZXRlRXhwYW5kbyA9IHRydWU7Cgl0cnkgewoJCWRlbGV0ZSBkaXYudGVzdDsKCX0gY2F0Y2ggKCBlICkgewoJCXN1cHBvcnQuZGVsZXRlRXhwYW5kbyA9IGZhbHNlOwoJfQoKCS8vIE51bGwgZWxlbWVudHMgdG8gYXZvaWQgbGVha3MgaW4gSUUuCglkaXYgPSBudWxsOwp9ICkoKTsKdmFyIGFjY2VwdERhdGEgPSBmdW5jdGlvbiggZWxlbSApIHsKCXZhciBub0RhdGEgPSBqUXVlcnkubm9EYXRhWyAoIGVsZW0ubm9kZU5hbWUgKyAiICIgKS50b0xvd2VyQ2FzZSgpIF0sCgkJbm9kZVR5cGUgPSArZWxlbS5ub2RlVHlwZSB8fCAxOwoKCS8vIERvIG5vdCBzZXQgZGF0YSBvbiBub24tZWxlbWVudCBET00gbm9kZXMgYmVjYXVzZSBpdCB3aWxsIG5vdCBiZSBjbGVhcmVkICgjODMzNSkuCglyZXR1cm4gbm9kZVR5cGUgIT09IDEgJiYgbm9kZVR5cGUgIT09IDkgPwoJCWZhbHNlIDoKCgkJLy8gTm9kZXMgYWNjZXB0IGRhdGEgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQ7IHJlamVjdGlvbiBjYW4gYmUgY29uZGl0aW9uYWwKCQkhbm9EYXRhIHx8IG5vRGF0YSAhPT0gdHJ1ZSAmJiBlbGVtLmdldEF0dHJpYnV0ZSggImNsYXNzaWQiICkgPT09IG5vRGF0YTsKfTsKCgoKCnZhciByYnJhY2UgPSAvXig/Olx7W1x3XFddKlx9fFxbW1x3XFddKlxdKSQvLAoJcm11bHRpRGFzaCA9IC8oW0EtWl0pL2c7CgpmdW5jdGlvbiBkYXRhQXR0ciggZWxlbSwga2V5LCBkYXRhICkgewoKCS8vIElmIG5vdGhpbmcgd2FzIGZvdW5kIGludGVybmFsbHksIHRyeSB0byBmZXRjaCBhbnkKCS8vIGRhdGEgZnJvbSB0aGUgSFRNTDUgZGF0YS0qIGF0dHJpYnV0ZQoJaWYgKCBkYXRhID09PSB1bmRlZmluZWQgJiYgZWxlbS5ub2RlVHlwZSA9PT0gMSApIHsKCgkJdmFyIG5hbWUgPSAiZGF0YS0iICsga2V5LnJlcGxhY2UoIHJtdWx0aURhc2gsICItJDEiICkudG9Mb3dlckNhc2UoKTsKCgkJZGF0YSA9IGVsZW0uZ2V0QXR0cmlidXRlKCBuYW1lICk7CgoJCWlmICggdHlwZW9mIGRhdGEgPT09ICJzdHJpbmciICkgewoJCQl0cnkgewoJCQkJZGF0YSA9IGRhdGEgPT09ICJ0cnVlIiA/IHRydWUgOgoJCQkJCWRhdGEgPT09ICJmYWxzZSIgPyBmYWxzZSA6CgkJCQkJZGF0YSA9PT0gIm51bGwiID8gbnVsbCA6CgoJCQkJCS8vIE9ubHkgY29udmVydCB0byBhIG51bWJlciBpZiBpdCBkb2Vzbid0IGNoYW5nZSB0aGUgc3RyaW5nCgkJCQkJK2RhdGEgKyAiIiA9PT0gZGF0YSA/ICtkYXRhIDoKCQkJCQlyYnJhY2UudGVzdCggZGF0YSApID8galF1ZXJ5LnBhcnNlSlNPTiggZGF0YSApIDoKCQkJCQlkYXRhOwoJCQl9IGNhdGNoICggZSApIHt9CgoJCQkvLyBNYWtlIHN1cmUgd2Ugc2V0IHRoZSBkYXRhIHNvIGl0IGlzbid0IGNoYW5nZWQgbGF0ZXIKCQkJalF1ZXJ5LmRhdGEoIGVsZW0sIGtleSwgZGF0YSApOwoKCQl9IGVsc2UgewoJCQlkYXRhID0gdW5kZWZpbmVkOwoJCX0KCX0KCglyZXR1cm4gZGF0YTsKfQoKLy8gY2hlY2tzIGEgY2FjaGUgb2JqZWN0IGZvciBlbXB0aW5lc3MKZnVuY3Rpb24gaXNFbXB0eURhdGFPYmplY3QoIG9iaiApIHsKCXZhciBuYW1lOwoJZm9yICggbmFtZSBpbiBvYmogKSB7CgoJCS8vIGlmIHRoZSBwdWJsaWMgZGF0YSBvYmplY3QgaXMgZW1wdHksIHRoZSBwcml2YXRlIGlzIHN0aWxsIGVtcHR5CgkJaWYgKCBuYW1lID09PSAiZGF0YSIgJiYgalF1ZXJ5LmlzRW1wdHlPYmplY3QoIG9ialsgbmFtZSBdICkgKSB7CgkJCWNvbnRpbnVlOwoJCX0KCQlpZiAoIG5hbWUgIT09ICJ0b0pTT04iICkgewoJCQlyZXR1cm4gZmFsc2U7CgkJfQoJfQoKCXJldHVybiB0cnVlOwp9CgpmdW5jdGlvbiBpbnRlcm5hbERhdGEoIGVsZW0sIG5hbWUsIGRhdGEsIHB2dCAvKiBJbnRlcm5hbCBVc2UgT25seSAqLyApIHsKCWlmICggIWFjY2VwdERhdGEoIGVsZW0gKSApIHsKCQlyZXR1cm47Cgl9CgoJdmFyIHJldCwgdGhpc0NhY2hlLAoJCWludGVybmFsS2V5ID0galF1ZXJ5LmV4cGFuZG8sCgoJCS8vIFdlIGhhdmUgdG8gaGFuZGxlIERPTSBub2RlcyBhbmQgSlMgb2JqZWN0cyBkaWZmZXJlbnRseSBiZWNhdXNlIElFNi03CgkJLy8gY2FuJ3QgR0Mgb2JqZWN0IHJlZmVyZW5jZXMgcHJvcGVybHkgYWNyb3NzIHRoZSBET00tSlMgYm91bmRhcnkKCQlpc05vZGUgPSBlbGVtLm5vZGVUeXBlLAoKCQkvLyBPbmx5IERPTSBub2RlcyBuZWVkIHRoZSBnbG9iYWwgalF1ZXJ5IGNhY2hlOyBKUyBvYmplY3QgZGF0YSBpcwoJCS8vIGF0dGFjaGVkIGRpcmVjdGx5IHRvIHRoZSBvYmplY3Qgc28gR0MgY2FuIG9jY3VyIGF1dG9tYXRpY2FsbHkKCQljYWNoZSA9IGlzTm9kZSA/IGpRdWVyeS5jYWNoZSA6IGVsZW0sCgoJCS8vIE9ubHkgZGVmaW5pbmcgYW4gSUQgZm9yIEpTIG9iamVjdHMgaWYgaXRzIGNhY2hlIGFscmVhZHkgZXhpc3RzIGFsbG93cwoJCS8vIHRoZSBjb2RlIHRvIHNob3J0Y3V0IG9uIHRoZSBzYW1lIHBhdGggYXMgYSBET00gbm9kZSB3aXRoIG5vIGNhY2hlCgkJaWQgPSBpc05vZGUgPyBlbGVtWyBpbnRlcm5hbEtleSBdIDogZWxlbVsgaW50ZXJuYWxLZXkgXSAmJiBpbnRlcm5hbEtleTsKCgkvLyBBdm9pZCBkb2luZyBhbnkgbW9yZSB3b3JrIHRoYW4gd2UgbmVlZCB0byB3aGVuIHRyeWluZyB0byBnZXQgZGF0YSBvbiBhbgoJLy8gb2JqZWN0IHRoYXQgaGFzIG5vIGRhdGEgYXQgYWxsCglpZiAoICggIWlkIHx8ICFjYWNoZVsgaWQgXSB8fCAoICFwdnQgJiYgIWNhY2hlWyBpZCBdLmRhdGEgKSApICYmCgkJZGF0YSA9PT0gdW5kZWZpbmVkICYmIHR5cGVvZiBuYW1lID09PSAic3RyaW5nIiApIHsKCQlyZXR1cm47Cgl9CgoJaWYgKCAhaWQgKSB7CgoJCS8vIE9ubHkgRE9NIG5vZGVzIG5lZWQgYSBuZXcgdW5pcXVlIElEIGZvciBlYWNoIGVsZW1lbnQgc2luY2UgdGhlaXIgZGF0YQoJCS8vIGVuZHMgdXAgaW4gdGhlIGdsb2JhbCBjYWNoZQoJCWlmICggaXNOb2RlICkgewoJCQlpZCA9IGVsZW1bIGludGVybmFsS2V5IF0gPSBkZWxldGVkSWRzLnBvcCgpIHx8IGpRdWVyeS5ndWlkKys7CgkJfSBlbHNlIHsKCQkJaWQgPSBpbnRlcm5hbEtleTsKCQl9Cgl9CgoJaWYgKCAhY2FjaGVbIGlkIF0gKSB7CgoJCS8vIEF2b2lkIGV4cG9zaW5nIGpRdWVyeSBtZXRhZGF0YSBvbiBwbGFpbiBKUyBvYmplY3RzIHdoZW4gdGhlIG9iamVjdAoJCS8vIGlzIHNlcmlhbGl6ZWQgdXNpbmcgSlNPTi5zdHJpbmdpZnkKCQljYWNoZVsgaWQgXSA9IGlzTm9kZSA/IHt9IDogeyB0b0pTT046IGpRdWVyeS5ub29wIH07Cgl9CgoJLy8gQW4gb2JqZWN0IGNhbiBiZSBwYXNzZWQgdG8galF1ZXJ5LmRhdGEgaW5zdGVhZCBvZiBhIGtleS92YWx1ZSBwYWlyOyB0aGlzIGdldHMKCS8vIHNoYWxsb3cgY29waWVkIG92ZXIgb250byB0aGUgZXhpc3RpbmcgY2FjaGUKCWlmICggdHlwZW9mIG5hbWUgPT09ICJvYmplY3QiIHx8IHR5cGVvZiBuYW1lID09PSAiZnVuY3Rpb24iICkgewoJCWlmICggcHZ0ICkgewoJCQljYWNoZVsgaWQgXSA9IGpRdWVyeS5leHRlbmQoIGNhY2hlWyBpZCBdLCBuYW1lICk7CgkJfSBlbHNlIHsKCQkJY2FjaGVbIGlkIF0uZGF0YSA9IGpRdWVyeS5leHRlbmQoIGNhY2hlWyBpZCBdLmRhdGEsIG5hbWUgKTsKCQl9Cgl9CgoJdGhpc0NhY2hlID0gY2FjaGVbIGlkIF07CgoJLy8galF1ZXJ5IGRhdGEoKSBpcyBzdG9yZWQgaW4gYSBzZXBhcmF0ZSBvYmplY3QgaW5zaWRlIHRoZSBvYmplY3QncyBpbnRlcm5hbCBkYXRhCgkvLyBjYWNoZSBpbiBvcmRlciB0byBhdm9pZCBrZXkgY29sbGlzaW9ucyBiZXR3ZWVuIGludGVybmFsIGRhdGEgYW5kIHVzZXItZGVmaW5lZAoJLy8gZGF0YS4KCWlmICggIXB2dCApIHsKCQlpZiAoICF0aGlzQ2FjaGUuZGF0YSApIHsKCQkJdGhpc0NhY2hlLmRhdGEgPSB7fTsKCQl9CgoJCXRoaXNDYWNoZSA9IHRoaXNDYWNoZS5kYXRhOwoJfQoKCWlmICggZGF0YSAhPT0gdW5kZWZpbmVkICkgewoJCXRoaXNDYWNoZVsgalF1ZXJ5LmNhbWVsQ2FzZSggbmFtZSApIF0gPSBkYXRhOwoJfQoKCS8vIENoZWNrIGZvciBib3RoIGNvbnZlcnRlZC10by1jYW1lbCBhbmQgbm9uLWNvbnZlcnRlZCBkYXRhIHByb3BlcnR5IG5hbWVzCgkvLyBJZiBhIGRhdGEgcHJvcGVydHkgd2FzIHNwZWNpZmllZAoJaWYgKCB0eXBlb2YgbmFtZSA9PT0gInN0cmluZyIgKSB7CgoJCS8vIEZpcnN0IFRyeSB0byBmaW5kIGFzLWlzIHByb3BlcnR5IGRhdGEKCQlyZXQgPSB0aGlzQ2FjaGVbIG5hbWUgXTsKCgkJLy8gVGVzdCBmb3IgbnVsbHx1bmRlZmluZWQgcHJvcGVydHkgZGF0YQoJCWlmICggcmV0ID09IG51bGwgKSB7CgoJCQkvLyBUcnkgdG8gZmluZCB0aGUgY2FtZWxDYXNlZCBwcm9wZXJ0eQoJCQlyZXQgPSB0aGlzQ2FjaGVbIGpRdWVyeS5jYW1lbENhc2UoIG5hbWUgKSBdOwoJCX0KCX0gZWxzZSB7CgkJcmV0ID0gdGhpc0NhY2hlOwoJfQoKCXJldHVybiByZXQ7Cn0KCmZ1bmN0aW9uIGludGVybmFsUmVtb3ZlRGF0YSggZWxlbSwgbmFtZSwgcHZ0ICkgewoJaWYgKCAhYWNjZXB0RGF0YSggZWxlbSApICkgewoJCXJldHVybjsKCX0KCgl2YXIgdGhpc0NhY2hlLCBpLAoJCWlzTm9kZSA9IGVsZW0ubm9kZVR5cGUsCgoJCS8vIFNlZSBqUXVlcnkuZGF0YSBmb3IgbW9yZSBpbmZvcm1hdGlvbgoJCWNhY2hlID0gaXNOb2RlID8galF1ZXJ5LmNhY2hlIDogZWxlbSwKCQlpZCA9IGlzTm9kZSA/IGVsZW1bIGpRdWVyeS5leHBhbmRvIF0gOiBqUXVlcnkuZXhwYW5kbzsKCgkvLyBJZiB0aGVyZSBpcyBhbHJlYWR5IG5vIGNhY2hlIGVudHJ5IGZvciB0aGlzIG9iamVjdCwgdGhlcmUgaXMgbm8KCS8vIHB1cnBvc2UgaW4gY29udGludWluZwoJaWYgKCAhY2FjaGVbIGlkIF0gKSB7CgkJcmV0dXJuOwoJfQoKCWlmICggbmFtZSApIHsKCgkJdGhpc0NhY2hlID0gcHZ0ID8gY2FjaGVbIGlkIF0gOiBjYWNoZVsgaWQgXS5kYXRhOwoKCQlpZiAoIHRoaXNDYWNoZSApIHsKCgkJCS8vIFN1cHBvcnQgYXJyYXkgb3Igc3BhY2Ugc2VwYXJhdGVkIHN0cmluZyBuYW1lcyBmb3IgZGF0YSBrZXlzCgkJCWlmICggIWpRdWVyeS5pc0FycmF5KCBuYW1lICkgKSB7CgoJCQkJLy8gdHJ5IHRoZSBzdHJpbmcgYXMgYSBrZXkgYmVmb3JlIGFueSBtYW5pcHVsYXRpb24KCQkJCWlmICggbmFtZSBpbiB0aGlzQ2FjaGUgKSB7CgkJCQkJbmFtZSA9IFsgbmFtZSBdOwoJCQkJfSBlbHNlIHsKCgkJCQkJLy8gc3BsaXQgdGhlIGNhbWVsIGNhc2VkIHZlcnNpb24gYnkgc3BhY2VzIHVubGVzcyBhIGtleSB3aXRoIHRoZSBzcGFjZXMgZXhpc3RzCgkJCQkJbmFtZSA9IGpRdWVyeS5jYW1lbENhc2UoIG5hbWUgKTsKCQkJCQlpZiAoIG5hbWUgaW4gdGhpc0NhY2hlICkgewoJCQkJCQluYW1lID0gWyBuYW1lIF07CgkJCQkJfSBlbHNlIHsKCQkJCQkJbmFtZSA9IG5hbWUuc3BsaXQoICIgIiApOwoJCQkJCX0KCQkJCX0KCQkJfSBlbHNlIHsKCgkJCQkvLyBJZiAibmFtZSIgaXMgYW4gYXJyYXkgb2Yga2V5cy4uLgoJCQkJLy8gV2hlbiBkYXRhIGlzIGluaXRpYWxseSBjcmVhdGVkLCB2aWEgKCJrZXkiLCAidmFsIikgc2lnbmF0dXJlLAoJCQkJLy8ga2V5cyB3aWxsIGJlIGNvbnZlcnRlZCB0byBjYW1lbENhc2UuCgkJCQkvLyBTaW5jZSB0aGVyZSBpcyBubyB3YXkgdG8gdGVsbCBfaG93XyBhIGtleSB3YXMgYWRkZWQsIHJlbW92ZQoJCQkJLy8gYm90aCBwbGFpbiBrZXkgYW5kIGNhbWVsQ2FzZSBrZXkuICMxMjc4NgoJCQkJLy8gVGhpcyB3aWxsIG9ubHkgcGVuYWxpemUgdGhlIGFycmF5IGFyZ3VtZW50IHBhdGguCgkJCQluYW1lID0gbmFtZS5jb25jYXQoIGpRdWVyeS5tYXAoIG5hbWUsIGpRdWVyeS5jYW1lbENhc2UgKSApOwoJCQl9CgoJCQlpID0gbmFtZS5sZW5ndGg7CgkJCXdoaWxlICggaS0tICkgewoJCQkJZGVsZXRlIHRoaXNDYWNoZVsgbmFtZVsgaSBdIF07CgkJCX0KCgkJCS8vIElmIHRoZXJlIGlzIG5vIGRhdGEgbGVmdCBpbiB0aGUgY2FjaGUsIHdlIHdhbnQgdG8gY29udGludWUKCQkJLy8gYW5kIGxldCB0aGUgY2FjaGUgb2JqZWN0IGl0c2VsZiBnZXQgZGVzdHJveWVkCgkJCWlmICggcHZ0ID8gIWlzRW1wdHlEYXRhT2JqZWN0KCB0aGlzQ2FjaGUgKSA6ICFqUXVlcnkuaXNFbXB0eU9iamVjdCggdGhpc0NhY2hlICkgKSB7CgkJCQlyZXR1cm47CgkJCX0KCQl9Cgl9CgoJLy8gU2VlIGpRdWVyeS5kYXRhIGZvciBtb3JlIGluZm9ybWF0aW9uCglpZiAoICFwdnQgKSB7CgkJZGVsZXRlIGNhY2hlWyBpZCBdLmRhdGE7CgoJCS8vIERvbid0IGRlc3Ryb3kgdGhlIHBhcmVudCBjYWNoZSB1bmxlc3MgdGhlIGludGVybmFsIGRhdGEgb2JqZWN0CgkJLy8gaGFkIGJlZW4gdGhlIG9ubHkgdGhpbmcgbGVmdCBpbiBpdAoJCWlmICggIWlzRW1wdHlEYXRhT2JqZWN0KCBjYWNoZVsgaWQgXSApICkgewoJCQlyZXR1cm47CgkJfQoJfQoKCS8vIERlc3Ryb3kgdGhlIGNhY2hlCglpZiAoIGlzTm9kZSApIHsKCQlqUXVlcnkuY2xlYW5EYXRhKCBbIGVsZW0gXSwgdHJ1ZSApOwoKCS8vIFVzZSBkZWxldGUgd2hlbiBzdXBwb3J0ZWQgZm9yIGV4cGFuZG9zIG9yIGBjYWNoZWAgaXMgbm90IGEgd2luZG93IHBlciBpc1dpbmRvdyAoIzEwMDgwKQoJLyoganNoaW50IGVxZXFlcTogZmFsc2UgKi8KCX0gZWxzZSBpZiAoIHN1cHBvcnQuZGVsZXRlRXhwYW5kbyB8fCBjYWNoZSAhPSBjYWNoZS53aW5kb3cgKSB7CgkJLyoganNoaW50IGVxZXFlcTogdHJ1ZSAqLwoJCWRlbGV0ZSBjYWNoZVsgaWQgXTsKCgkvLyBXaGVuIGFsbCBlbHNlIGZhaWxzLCB1bmRlZmluZWQKCX0gZWxzZSB7CgkJY2FjaGVbIGlkIF0gPSB1bmRlZmluZWQ7Cgl9Cn0KCmpRdWVyeS5leHRlbmQoIHsKCWNhY2hlOiB7fSwKCgkvLyBUaGUgZm9sbG93aW5nIGVsZW1lbnRzIChzcGFjZS1zdWZmaXhlZCB0byBhdm9pZCBPYmplY3QucHJvdG90eXBlIGNvbGxpc2lvbnMpCgkvLyB0aHJvdyB1bmNhdGNoYWJsZSBleGNlcHRpb25zIGlmIHlvdSBhdHRlbXB0IHRvIHNldCBleHBhbmRvIHByb3BlcnRpZXMKCW5vRGF0YTogewoJCSJhcHBsZXQgIjogdHJ1ZSwKCQkiZW1iZWQgIjogdHJ1ZSwKCgkJLy8gLi4uYnV0IEZsYXNoIG9iamVjdHMgKHdoaWNoIGhhdmUgdGhpcyBjbGFzc2lkKSAqY2FuKiBoYW5kbGUgZXhwYW5kb3MKCQkib2JqZWN0ICI6ICJjbHNpZDpEMjdDREI2RS1BRTZELTExY2YtOTZCOC00NDQ1NTM1NDAwMDAiCgl9LAoKCWhhc0RhdGE6IGZ1bmN0aW9uKCBlbGVtICkgewoJCWVsZW0gPSBlbGVtLm5vZGVUeXBlID8galF1ZXJ5LmNhY2hlWyBlbGVtWyBqUXVlcnkuZXhwYW5kbyBdIF0gOiBlbGVtWyBqUXVlcnkuZXhwYW5kbyBdOwoJCXJldHVybiAhIWVsZW0gJiYgIWlzRW1wdHlEYXRhT2JqZWN0KCBlbGVtICk7Cgl9LAoKCWRhdGE6IGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCBkYXRhICkgewoJCXJldHVybiBpbnRlcm5hbERhdGEoIGVsZW0sIG5hbWUsIGRhdGEgKTsKCX0sCgoJcmVtb3ZlRGF0YTogZnVuY3Rpb24oIGVsZW0sIG5hbWUgKSB7CgkJcmV0dXJuIGludGVybmFsUmVtb3ZlRGF0YSggZWxlbSwgbmFtZSApOwoJfSwKCgkvLyBGb3IgaW50ZXJuYWwgdXNlIG9ubHkuCglfZGF0YTogZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGRhdGEgKSB7CgkJcmV0dXJuIGludGVybmFsRGF0YSggZWxlbSwgbmFtZSwgZGF0YSwgdHJ1ZSApOwoJfSwKCglfcmVtb3ZlRGF0YTogZnVuY3Rpb24oIGVsZW0sIG5hbWUgKSB7CgkJcmV0dXJuIGludGVybmFsUmVtb3ZlRGF0YSggZWxlbSwgbmFtZSwgdHJ1ZSApOwoJfQp9ICk7CgpqUXVlcnkuZm4uZXh0ZW5kKCB7CglkYXRhOiBmdW5jdGlvbigga2V5LCB2YWx1ZSApIHsKCQl2YXIgaSwgbmFtZSwgZGF0YSwKCQkJZWxlbSA9IHRoaXNbIDAgXSwKCQkJYXR0cnMgPSBlbGVtICYmIGVsZW0uYXR0cmlidXRlczsKCgkJLy8gU3BlY2lhbCBleHBlY3Rpb25zIG9mIC5kYXRhIGJhc2ljYWxseSB0aHdhcnQgalF1ZXJ5LmFjY2VzcywKCQkvLyBzbyBpbXBsZW1lbnQgdGhlIHJlbGV2YW50IGJlaGF2aW9yIG91cnNlbHZlcwoKCQkvLyBHZXRzIGFsbCB2YWx1ZXMKCQlpZiAoIGtleSA9PT0gdW5kZWZpbmVkICkgewoJCQlpZiAoIHRoaXMubGVuZ3RoICkgewoJCQkJZGF0YSA9IGpRdWVyeS5kYXRhKCBlbGVtICk7CgoJCQkJaWYgKCBlbGVtLm5vZGVUeXBlID09PSAxICYmICFqUXVlcnkuX2RhdGEoIGVsZW0sICJwYXJzZWRBdHRycyIgKSApIHsKCQkJCQlpID0gYXR0cnMubGVuZ3RoOwoJCQkJCXdoaWxlICggaS0tICkgewoKCQkJCQkJLy8gU3VwcG9ydDogSUUxMSsKCQkJCQkJLy8gVGhlIGF0dHJzIGVsZW1lbnRzIGNhbiBiZSBudWxsICgjMTQ4OTQpCgkJCQkJCWlmICggYXR0cnNbIGkgXSApIHsKCQkJCQkJCW5hbWUgPSBhdHRyc1sgaSBdLm5hbWU7CgkJCQkJCQlpZiAoIG5hbWUuaW5kZXhPZiggImRhdGEtIiApID09PSAwICkgewoJCQkJCQkJCW5hbWUgPSBqUXVlcnkuY2FtZWxDYXNlKCBuYW1lLnNsaWNlKCA1ICkgKTsKCQkJCQkJCQlkYXRhQXR0ciggZWxlbSwgbmFtZSwgZGF0YVsgbmFtZSBdICk7CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQl9CgkJCQkJalF1ZXJ5Ll9kYXRhKCBlbGVtLCAicGFyc2VkQXR0cnMiLCB0cnVlICk7CgkJCQl9CgkJCX0KCgkJCXJldHVybiBkYXRhOwoJCX0KCgkJLy8gU2V0cyBtdWx0aXBsZSB2YWx1ZXMKCQlpZiAoIHR5cGVvZiBrZXkgPT09ICJvYmplY3QiICkgewoJCQlyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHsKCQkJCWpRdWVyeS5kYXRhKCB0aGlzLCBrZXkgKTsKCQkJfSApOwoJCX0KCgkJcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPiAxID8KCgkJCS8vIFNldHMgb25lIHZhbHVlCgkJCXRoaXMuZWFjaCggZnVuY3Rpb24oKSB7CgkJCQlqUXVlcnkuZGF0YSggdGhpcywga2V5LCB2YWx1ZSApOwoJCQl9ICkgOgoKCQkJLy8gR2V0cyBvbmUgdmFsdWUKCQkJLy8gVHJ5IHRvIGZldGNoIGFueSBpbnRlcm5hbGx5IHN0b3JlZCBkYXRhIGZpcnN0CgkJCWVsZW0gPyBkYXRhQXR0ciggZWxlbSwga2V5LCBqUXVlcnkuZGF0YSggZWxlbSwga2V5ICkgKSA6IHVuZGVmaW5lZDsKCX0sCgoJcmVtb3ZlRGF0YTogZnVuY3Rpb24oIGtleSApIHsKCQlyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHsKCQkJalF1ZXJ5LnJlbW92ZURhdGEoIHRoaXMsIGtleSApOwoJCX0gKTsKCX0KfSApOwoKCmpRdWVyeS5leHRlbmQoIHsKCXF1ZXVlOiBmdW5jdGlvbiggZWxlbSwgdHlwZSwgZGF0YSApIHsKCQl2YXIgcXVldWU7CgoJCWlmICggZWxlbSApIHsKCQkJdHlwZSA9ICggdHlwZSB8fCAiZngiICkgKyAicXVldWUiOwoJCQlxdWV1ZSA9IGpRdWVyeS5fZGF0YSggZWxlbSwgdHlwZSApOwoKCQkJLy8gU3BlZWQgdXAgZGVxdWV1ZSBieSBnZXR0aW5nIG91dCBxdWlja2x5IGlmIHRoaXMgaXMganVzdCBhIGxvb2t1cAoJCQlpZiAoIGRhdGEgKSB7CgkJCQlpZiAoICFxdWV1ZSB8fCBqUXVlcnkuaXNBcnJheSggZGF0YSApICkgewoJCQkJCXF1ZXVlID0galF1ZXJ5Ll9kYXRhKCBlbGVtLCB0eXBlLCBqUXVlcnkubWFrZUFycmF5KCBkYXRhICkgKTsKCQkJCX0gZWxzZSB7CgkJCQkJcXVldWUucHVzaCggZGF0YSApOwoJCQkJfQoJCQl9CgkJCXJldHVybiBxdWV1ZSB8fCBbXTsKCQl9Cgl9LAoKCWRlcXVldWU6IGZ1bmN0aW9uKCBlbGVtLCB0eXBlICkgewoJCXR5cGUgPSB0eXBlIHx8ICJmeCI7CgoJCXZhciBxdWV1ZSA9IGpRdWVyeS5xdWV1ZSggZWxlbSwgdHlwZSApLAoJCQlzdGFydExlbmd0aCA9IHF1ZXVlLmxlbmd0aCwKCQkJZm4gPSBxdWV1ZS5zaGlmdCgpLAoJCQlob29rcyA9IGpRdWVyeS5fcXVldWVIb29rcyggZWxlbSwgdHlwZSApLAoJCQluZXh0ID0gZnVuY3Rpb24oKSB7CgkJCQlqUXVlcnkuZGVxdWV1ZSggZWxlbSwgdHlwZSApOwoJCQl9OwoKCQkvLyBJZiB0aGUgZnggcXVldWUgaXMgZGVxdWV1ZWQsIGFsd2F5cyByZW1vdmUgdGhlIHByb2dyZXNzIHNlbnRpbmVsCgkJaWYgKCBmbiA9PT0gImlucHJvZ3Jlc3MiICkgewoJCQlmbiA9IHF1ZXVlLnNoaWZ0KCk7CgkJCXN0YXJ0TGVuZ3RoLS07CgkJfQoKCQlpZiAoIGZuICkgewoKCQkJLy8gQWRkIGEgcHJvZ3Jlc3Mgc2VudGluZWwgdG8gcHJldmVudCB0aGUgZnggcXVldWUgZnJvbSBiZWluZwoJCQkvLyBhdXRvbWF0aWNhbGx5IGRlcXVldWVkCgkJCWlmICggdHlwZSA9PT0gImZ4IiApIHsKCQkJCXF1ZXVlLnVuc2hpZnQoICJpbnByb2dyZXNzIiApOwoJCQl9CgoJCQkvLyBjbGVhciB1cCB0aGUgbGFzdCBxdWV1ZSBzdG9wIGZ1bmN0aW9uCgkJCWRlbGV0ZSBob29rcy5zdG9wOwoJCQlmbi5jYWxsKCBlbGVtLCBuZXh0LCBob29rcyApOwoJCX0KCgkJaWYgKCAhc3RhcnRMZW5ndGggJiYgaG9va3MgKSB7CgkJCWhvb2tzLmVtcHR5LmZpcmUoKTsKCQl9Cgl9LAoKCS8vIG5vdCBpbnRlbmRlZCBmb3IgcHVibGljIGNvbnN1bXB0aW9uIC0gZ2VuZXJhdGVzIGEgcXVldWVIb29rcyBvYmplY3QsCgkvLyBvciByZXR1cm5zIHRoZSBjdXJyZW50IG9uZQoJX3F1ZXVlSG9va3M6IGZ1bmN0aW9uKCBlbGVtLCB0eXBlICkgewoJCXZhciBrZXkgPSB0eXBlICsgInF1ZXVlSG9va3MiOwoJCXJldHVybiBqUXVlcnkuX2RhdGEoIGVsZW0sIGtleSApIHx8IGpRdWVyeS5fZGF0YSggZWxlbSwga2V5LCB7CgkJCWVtcHR5OiBqUXVlcnkuQ2FsbGJhY2tzKCAib25jZSBtZW1vcnkiICkuYWRkKCBmdW5jdGlvbigpIHsKCQkJCWpRdWVyeS5fcmVtb3ZlRGF0YSggZWxlbSwgdHlwZSArICJxdWV1ZSIgKTsKCQkJCWpRdWVyeS5fcmVtb3ZlRGF0YSggZWxlbSwga2V5ICk7CgkJCX0gKQoJCX0gKTsKCX0KfSApOwoKalF1ZXJ5LmZuLmV4dGVuZCggewoJcXVldWU6IGZ1bmN0aW9uKCB0eXBlLCBkYXRhICkgewoJCXZhciBzZXR0ZXIgPSAyOwoKCQlpZiAoIHR5cGVvZiB0eXBlICE9PSAic3RyaW5nIiApIHsKCQkJZGF0YSA9IHR5cGU7CgkJCXR5cGUgPSAiZngiOwoJCQlzZXR0ZXItLTsKCQl9CgoJCWlmICggYXJndW1lbnRzLmxlbmd0aCA8IHNldHRlciApIHsKCQkJcmV0dXJuIGpRdWVyeS5xdWV1ZSggdGhpc1sgMCBdLCB0eXBlICk7CgkJfQoKCQlyZXR1cm4gZGF0YSA9PT0gdW5kZWZpbmVkID8KCQkJdGhpcyA6CgkJCXRoaXMuZWFjaCggZnVuY3Rpb24oKSB7CgkJCQl2YXIgcXVldWUgPSBqUXVlcnkucXVldWUoIHRoaXMsIHR5cGUsIGRhdGEgKTsKCgkJCQkvLyBlbnN1cmUgYSBob29rcyBmb3IgdGhpcyBxdWV1ZQoJCQkJalF1ZXJ5Ll9xdWV1ZUhvb2tzKCB0aGlzLCB0eXBlICk7CgoJCQkJaWYgKCB0eXBlID09PSAiZngiICYmIHF1ZXVlWyAwIF0gIT09ICJpbnByb2dyZXNzIiApIHsKCQkJCQlqUXVlcnkuZGVxdWV1ZSggdGhpcywgdHlwZSApOwoJCQkJfQoJCQl9ICk7Cgl9LAoJZGVxdWV1ZTogZnVuY3Rpb24oIHR5cGUgKSB7CgkJcmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7CgkJCWpRdWVyeS5kZXF1ZXVlKCB0aGlzLCB0eXBlICk7CgkJfSApOwoJfSwKCWNsZWFyUXVldWU6IGZ1bmN0aW9uKCB0eXBlICkgewoJCXJldHVybiB0aGlzLnF1ZXVlKCB0eXBlIHx8ICJmeCIsIFtdICk7Cgl9LAoKCS8vIEdldCBhIHByb21pc2UgcmVzb2x2ZWQgd2hlbiBxdWV1ZXMgb2YgYSBjZXJ0YWluIHR5cGUKCS8vIGFyZSBlbXB0aWVkIChmeCBpcyB0aGUgdHlwZSBieSBkZWZhdWx0KQoJcHJvbWlzZTogZnVuY3Rpb24oIHR5cGUsIG9iaiApIHsKCQl2YXIgdG1wLAoJCQljb3VudCA9IDEsCgkJCWRlZmVyID0galF1ZXJ5LkRlZmVycmVkKCksCgkJCWVsZW1lbnRzID0gdGhpcywKCQkJaSA9IHRoaXMubGVuZ3RoLAoJCQlyZXNvbHZlID0gZnVuY3Rpb24oKSB7CgkJCQlpZiAoICEoIC0tY291bnQgKSApIHsKCQkJCQlkZWZlci5yZXNvbHZlV2l0aCggZWxlbWVudHMsIFsgZWxlbWVudHMgXSApOwoJCQkJfQoJCQl9OwoKCQlpZiAoIHR5cGVvZiB0eXBlICE9PSAic3RyaW5nIiApIHsKCQkJb2JqID0gdHlwZTsKCQkJdHlwZSA9IHVuZGVmaW5lZDsKCQl9CgkJdHlwZSA9IHR5cGUgfHwgImZ4IjsKCgkJd2hpbGUgKCBpLS0gKSB7CgkJCXRtcCA9IGpRdWVyeS5fZGF0YSggZWxlbWVudHNbIGkgXSwgdHlwZSArICJxdWV1ZUhvb2tzIiApOwoJCQlpZiAoIHRtcCAmJiB0bXAuZW1wdHkgKSB7CgkJCQljb3VudCsrOwoJCQkJdG1wLmVtcHR5LmFkZCggcmVzb2x2ZSApOwoJCQl9CgkJfQoJCXJlc29sdmUoKTsKCQlyZXR1cm4gZGVmZXIucHJvbWlzZSggb2JqICk7Cgl9Cn0gKTsKCgooIGZ1bmN0aW9uKCkgewoJdmFyIHNocmlua1dyYXBCbG9ja3NWYWw7CgoJc3VwcG9ydC5zaHJpbmtXcmFwQmxvY2tzID0gZnVuY3Rpb24oKSB7CgkJaWYgKCBzaHJpbmtXcmFwQmxvY2tzVmFsICE9IG51bGwgKSB7CgkJCXJldHVybiBzaHJpbmtXcmFwQmxvY2tzVmFsOwoJCX0KCgkJLy8gV2lsbCBiZSBjaGFuZ2VkIGxhdGVyIGlmIG5lZWRlZC4KCQlzaHJpbmtXcmFwQmxvY2tzVmFsID0gZmFsc2U7CgoJCS8vIE1pbmlmaWVkOiB2YXIgYixjLGQKCQl2YXIgZGl2LCBib2R5LCBjb250YWluZXI7CgoJCWJvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSggImJvZHkiIClbIDAgXTsKCQlpZiAoICFib2R5IHx8ICFib2R5LnN0eWxlICkgewoKCQkJLy8gVGVzdCBmaXJlZCB0b28gZWFybHkgb3IgaW4gYW4gdW5zdXBwb3J0ZWQgZW52aXJvbm1lbnQsIGV4aXQuCgkJCXJldHVybjsKCQl9CgoJCS8vIFNldHVwCgkJZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggImRpdiIgKTsKCQljb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAiZGl2IiApOwoJCWNvbnRhaW5lci5zdHlsZS5jc3NUZXh0ID0gInBvc2l0aW9uOmFic29sdXRlO2JvcmRlcjowO3dpZHRoOjA7aGVpZ2h0OjA7dG9wOjA7bGVmdDotOTk5OXB4IjsKCQlib2R5LmFwcGVuZENoaWxkKCBjb250YWluZXIgKS5hcHBlbmRDaGlsZCggZGl2ICk7CgoJCS8vIFN1cHBvcnQ6IElFNgoJCS8vIENoZWNrIGlmIGVsZW1lbnRzIHdpdGggbGF5b3V0IHNocmluay13cmFwIHRoZWlyIGNoaWxkcmVuCgkJaWYgKCB0eXBlb2YgZGl2LnN0eWxlLnpvb20gIT09ICJ1bmRlZmluZWQiICkgewoKCQkJLy8gUmVzZXQgQ1NTOiBib3gtc2l6aW5nOyBkaXNwbGF5OyBtYXJnaW47IGJvcmRlcgoJCQlkaXYuc3R5bGUuY3NzVGV4dCA9CgoJCQkJLy8gU3VwcG9ydDogRmlyZWZveDwyOSwgQW5kcm9pZCAyLjMKCQkJCS8vIFZlbmRvci1wcmVmaXggYm94LXNpemluZwoJCQkJIi13ZWJraXQtYm94LXNpemluZzpjb250ZW50LWJveDstbW96LWJveC1zaXppbmc6Y29udGVudC1ib3g7IiArCgkJCQkiYm94LXNpemluZzpjb250ZW50LWJveDtkaXNwbGF5OmJsb2NrO21hcmdpbjowO2JvcmRlcjowOyIgKwoJCQkJInBhZGRpbmc6MXB4O3dpZHRoOjFweDt6b29tOjEiOwoJCQlkaXYuYXBwZW5kQ2hpbGQoIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICJkaXYiICkgKS5zdHlsZS53aWR0aCA9ICI1cHgiOwoJCQlzaHJpbmtXcmFwQmxvY2tzVmFsID0gZGl2Lm9mZnNldFdpZHRoICE9PSAzOwoJCX0KCgkJYm9keS5yZW1vdmVDaGlsZCggY29udGFpbmVyICk7CgoJCXJldHVybiBzaHJpbmtXcmFwQmxvY2tzVmFsOwoJfTsKCn0gKSgpOwp2YXIgcG51bSA9ICggL1srLV0/KD86XGQqXC58KVxkKyg/OltlRV1bKy1dP1xkK3wpLyApLnNvdXJjZTsKCnZhciByY3NzTnVtID0gbmV3IFJlZ0V4cCggIl4oPzooWystXSk9fCkoIiArIHBudW0gKyAiKShbYS16JV0qKSQiLCAiaSIgKTsKCgp2YXIgY3NzRXhwYW5kID0gWyAiVG9wIiwgIlJpZ2h0IiwgIkJvdHRvbSIsICJMZWZ0IiBdOwoKdmFyIGlzSGlkZGVuID0gZnVuY3Rpb24oIGVsZW0sIGVsICkgewoKCQkvLyBpc0hpZGRlbiBtaWdodCBiZSBjYWxsZWQgZnJvbSBqUXVlcnkjZmlsdGVyIGZ1bmN0aW9uOwoJCS8vIGluIHRoYXQgY2FzZSwgZWxlbWVudCB3aWxsIGJlIHNlY29uZCBhcmd1bWVudAoJCWVsZW0gPSBlbCB8fCBlbGVtOwoJCXJldHVybiBqUXVlcnkuY3NzKCBlbGVtLCAiZGlzcGxheSIgKSA9PT0gIm5vbmUiIHx8CgkJCSFqUXVlcnkuY29udGFpbnMoIGVsZW0ub3duZXJEb2N1bWVudCwgZWxlbSApOwoJfTsKCgoKZnVuY3Rpb24gYWRqdXN0Q1NTKCBlbGVtLCBwcm9wLCB2YWx1ZVBhcnRzLCB0d2VlbiApIHsKCXZhciBhZGp1c3RlZCwKCQlzY2FsZSA9IDEsCgkJbWF4SXRlcmF0aW9ucyA9IDIwLAoJCWN1cnJlbnRWYWx1ZSA9IHR3ZWVuID8KCQkJZnVuY3Rpb24oKSB7IHJldHVybiB0d2Vlbi5jdXIoKTsgfSA6CgkJCWZ1bmN0aW9uKCkgeyByZXR1cm4galF1ZXJ5LmNzcyggZWxlbSwgcHJvcCwgIiIgKTsgfSwKCQlpbml0aWFsID0gY3VycmVudFZhbHVlKCksCgkJdW5pdCA9IHZhbHVlUGFydHMgJiYgdmFsdWVQYXJ0c1sgMyBdIHx8ICggalF1ZXJ5LmNzc051bWJlclsgcHJvcCBdID8gIiIgOiAicHgiICksCgoJCS8vIFN0YXJ0aW5nIHZhbHVlIGNvbXB1dGF0aW9uIGlzIHJlcXVpcmVkIGZvciBwb3RlbnRpYWwgdW5pdCBtaXNtYXRjaGVzCgkJaW5pdGlhbEluVW5pdCA9ICggalF1ZXJ5LmNzc051bWJlclsgcHJvcCBdIHx8IHVuaXQgIT09ICJweCIgJiYgK2luaXRpYWwgKSAmJgoJCQlyY3NzTnVtLmV4ZWMoIGpRdWVyeS5jc3MoIGVsZW0sIHByb3AgKSApOwoKCWlmICggaW5pdGlhbEluVW5pdCAmJiBpbml0aWFsSW5Vbml0WyAzIF0gIT09IHVuaXQgKSB7CgoJCS8vIFRydXN0IHVuaXRzIHJlcG9ydGVkIGJ5IGpRdWVyeS5jc3MKCQl1bml0ID0gdW5pdCB8fCBpbml0aWFsSW5Vbml0WyAzIF07CgoJCS8vIE1ha2Ugc3VyZSB3ZSB1cGRhdGUgdGhlIHR3ZWVuIHByb3BlcnRpZXMgbGF0ZXIgb24KCQl2YWx1ZVBhcnRzID0gdmFsdWVQYXJ0cyB8fCBbXTsKCgkJLy8gSXRlcmF0aXZlbHkgYXBwcm94aW1hdGUgZnJvbSBhIG5vbnplcm8gc3RhcnRpbmcgcG9pbnQKCQlpbml0aWFsSW5Vbml0ID0gK2luaXRpYWwgfHwgMTsKCgkJZG8gewoKCQkJLy8gSWYgcHJldmlvdXMgaXRlcmF0aW9uIHplcm9lZCBvdXQsIGRvdWJsZSB1bnRpbCB3ZSBnZXQgKnNvbWV0aGluZyouCgkJCS8vIFVzZSBzdHJpbmcgZm9yIGRvdWJsaW5nIHNvIHdlIGRvbid0IGFjY2lkZW50YWxseSBzZWUgc2NhbGUgYXMgdW5jaGFuZ2VkIGJlbG93CgkJCXNjYWxlID0gc2NhbGUgfHwgIi41IjsKCgkJCS8vIEFkanVzdCBhbmQgYXBwbHkKCQkJaW5pdGlhbEluVW5pdCA9IGluaXRpYWxJblVuaXQgLyBzY2FsZTsKCQkJalF1ZXJ5LnN0eWxlKCBlbGVtLCBwcm9wLCBpbml0aWFsSW5Vbml0ICsgdW5pdCApOwoKCQkvLyBVcGRhdGUgc2NhbGUsIHRvbGVyYXRpbmcgemVybyBvciBOYU4gZnJvbSB0d2Vlbi5jdXIoKQoJCS8vIEJyZWFrIHRoZSBsb29wIGlmIHNjYWxlIGlzIHVuY2hhbmdlZCBvciBwZXJmZWN0LCBvciBpZiB3ZSd2ZSBqdXN0IGhhZCBlbm91Z2guCgkJfSB3aGlsZSAoCgkJCXNjYWxlICE9PSAoIHNjYWxlID0gY3VycmVudFZhbHVlKCkgLyBpbml0aWFsICkgJiYgc2NhbGUgIT09IDEgJiYgLS1tYXhJdGVyYXRpb25zCgkJKTsKCX0KCglpZiAoIHZhbHVlUGFydHMgKSB7CgkJaW5pdGlhbEluVW5pdCA9ICtpbml0aWFsSW5Vbml0IHx8ICtpbml0aWFsIHx8IDA7CgoJCS8vIEFwcGx5IHJlbGF0aXZlIG9mZnNldCAoKz0vLT0pIGlmIHNwZWNpZmllZAoJCWFkanVzdGVkID0gdmFsdWVQYXJ0c1sgMSBdID8KCQkJaW5pdGlhbEluVW5pdCArICggdmFsdWVQYXJ0c1sgMSBdICsgMSApICogdmFsdWVQYXJ0c1sgMiBdIDoKCQkJK3ZhbHVlUGFydHNbIDIgXTsKCQlpZiAoIHR3ZWVuICkgewoJCQl0d2Vlbi51bml0ID0gdW5pdDsKCQkJdHdlZW4uc3RhcnQgPSBpbml0aWFsSW5Vbml0OwoJCQl0d2Vlbi5lbmQgPSBhZGp1c3RlZDsKCQl9Cgl9CglyZXR1cm4gYWRqdXN0ZWQ7Cn0KCgovLyBNdWx0aWZ1bmN0aW9uYWwgbWV0aG9kIHRvIGdldCBhbmQgc2V0IHZhbHVlcyBvZiBhIGNvbGxlY3Rpb24KLy8gVGhlIHZhbHVlL3MgY2FuIG9wdGlvbmFsbHkgYmUgZXhlY3V0ZWQgaWYgaXQncyBhIGZ1bmN0aW9uCnZhciBhY2Nlc3MgPSBmdW5jdGlvbiggZWxlbXMsIGZuLCBrZXksIHZhbHVlLCBjaGFpbmFibGUsIGVtcHR5R2V0LCByYXcgKSB7Cgl2YXIgaSA9IDAsCgkJbGVuZ3RoID0gZWxlbXMubGVuZ3RoLAoJCWJ1bGsgPSBrZXkgPT0gbnVsbDsKCgkvLyBTZXRzIG1hbnkgdmFsdWVzCglpZiAoIGpRdWVyeS50eXBlKCBrZXkgKSA9PT0gIm9iamVjdCIgKSB7CgkJY2hhaW5hYmxlID0gdHJ1ZTsKCQlmb3IgKCBpIGluIGtleSApIHsKCQkJYWNjZXNzKCBlbGVtcywgZm4sIGksIGtleVsgaSBdLCB0cnVlLCBlbXB0eUdldCwgcmF3ICk7CgkJfQoKCS8vIFNldHMgb25lIHZhbHVlCgl9IGVsc2UgaWYgKCB2YWx1ZSAhPT0gdW5kZWZpbmVkICkgewoJCWNoYWluYWJsZSA9IHRydWU7CgoJCWlmICggIWpRdWVyeS5pc0Z1bmN0aW9uKCB2YWx1ZSApICkgewoJCQlyYXcgPSB0cnVlOwoJCX0KCgkJaWYgKCBidWxrICkgewoKCQkJLy8gQnVsayBvcGVyYXRpb25zIHJ1biBhZ2FpbnN0IHRoZSBlbnRpcmUgc2V0CgkJCWlmICggcmF3ICkgewoJCQkJZm4uY2FsbCggZWxlbXMsIHZhbHVlICk7CgkJCQlmbiA9IG51bGw7CgoJCQkvLyAuLi5leGNlcHQgd2hlbiBleGVjdXRpbmcgZnVuY3Rpb24gdmFsdWVzCgkJCX0gZWxzZSB7CgkJCQlidWxrID0gZm47CgkJCQlmbiA9IGZ1bmN0aW9uKCBlbGVtLCBrZXksIHZhbHVlICkgewoJCQkJCXJldHVybiBidWxrLmNhbGwoIGpRdWVyeSggZWxlbSApLCB2YWx1ZSApOwoJCQkJfTsKCQkJfQoJCX0KCgkJaWYgKCBmbiApIHsKCQkJZm9yICggOyBpIDwgbGVuZ3RoOyBpKysgKSB7CgkJCQlmbigKCQkJCQllbGVtc1sgaSBdLAoJCQkJCWtleSwKCQkJCQlyYXcgPyB2YWx1ZSA6IHZhbHVlLmNhbGwoIGVsZW1zWyBpIF0sIGksIGZuKCBlbGVtc1sgaSBdLCBrZXkgKSApCgkJCQkpOwoJCQl9CgkJfQoJfQoKCXJldHVybiBjaGFpbmFibGUgPwoJCWVsZW1zIDoKCgkJLy8gR2V0cwoJCWJ1bGsgPwoJCQlmbi5jYWxsKCBlbGVtcyApIDoKCQkJbGVuZ3RoID8gZm4oIGVsZW1zWyAwIF0sIGtleSApIDogZW1wdHlHZXQ7Cn07CnZhciByY2hlY2thYmxlVHlwZSA9ICggL14oPzpjaGVja2JveHxyYWRpbykkL2kgKTsKCnZhciBydGFnTmFtZSA9ICggLzwoW1x3Oi1dKykvICk7Cgp2YXIgcnNjcmlwdFR5cGUgPSAoIC9eJHxcLyg/OmphdmF8ZWNtYSlzY3JpcHQvaSApOwoKdmFyIHJsZWFkaW5nV2hpdGVzcGFjZSA9ICggL15ccysvICk7Cgp2YXIgbm9kZU5hbWVzID0gImFiYnJ8YXJ0aWNsZXxhc2lkZXxhdWRpb3xiZGl8Y2FudmFzfGRhdGF8ZGF0YWxpc3R8IiArCgkJImRldGFpbHN8ZGlhbG9nfGZpZ2NhcHRpb258ZmlndXJlfGZvb3RlcnxoZWFkZXJ8aGdyb3VwfG1haW58IiArCgkJIm1hcmt8bWV0ZXJ8bmF2fG91dHB1dHxwaWN0dXJlfHByb2dyZXNzfHNlY3Rpb258c3VtbWFyeXx0ZW1wbGF0ZXx0aW1lfHZpZGVvIjsKCgoKZnVuY3Rpb24gY3JlYXRlU2FmZUZyYWdtZW50KCBkb2N1bWVudCApIHsKCXZhciBsaXN0ID0gbm9kZU5hbWVzLnNwbGl0KCAifCIgKSwKCQlzYWZlRnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTsKCglpZiAoIHNhZmVGcmFnLmNyZWF0ZUVsZW1lbnQgKSB7CgkJd2hpbGUgKCBsaXN0Lmxlbmd0aCApIHsKCQkJc2FmZUZyYWcuY3JlYXRlRWxlbWVudCgKCQkJCWxpc3QucG9wKCkKCQkJKTsKCQl9Cgl9CglyZXR1cm4gc2FmZUZyYWc7Cn0KCgooIGZ1bmN0aW9uKCkgewoJdmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICJkaXYiICksCgkJZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksCgkJaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAiaW5wdXQiICk7CgoJLy8gU2V0dXAKCWRpdi5pbm5lckhUTUwgPSAiICA8bGluay8+PHRhYmxlPjwvdGFibGU+PGEgaHJlZj0nL2EnPmE8L2E+PGlucHV0IHR5cGU9J2NoZWNrYm94Jy8+IjsKCgkvLyBJRSBzdHJpcHMgbGVhZGluZyB3aGl0ZXNwYWNlIHdoZW4gLmlubmVySFRNTCBpcyB1c2VkCglzdXBwb3J0LmxlYWRpbmdXaGl0ZXNwYWNlID0gZGl2LmZpcnN0Q2hpbGQubm9kZVR5cGUgPT09IDM7CgoJLy8gTWFrZSBzdXJlIHRoYXQgdGJvZHkgZWxlbWVudHMgYXJlbid0IGF1dG9tYXRpY2FsbHkgaW5zZXJ0ZWQKCS8vIElFIHdpbGwgaW5zZXJ0IHRoZW0gaW50byBlbXB0eSB0YWJsZXMKCXN1cHBvcnQudGJvZHkgPSAhZGl2LmdldEVsZW1lbnRzQnlUYWdOYW1lKCAidGJvZHkiICkubGVuZ3RoOwoKCS8vIE1ha2Ugc3VyZSB0aGF0IGxpbmsgZWxlbWVudHMgZ2V0IHNlcmlhbGl6ZWQgY29ycmVjdGx5IGJ5IGlubmVySFRNTAoJLy8gVGhpcyByZXF1aXJlcyBhIHdyYXBwZXIgZWxlbWVudCBpbiBJRQoJc3VwcG9ydC5odG1sU2VyaWFsaXplID0gISFkaXYuZ2V0RWxlbWVudHNCeVRhZ05hbWUoICJsaW5rIiApLmxlbmd0aDsKCgkvLyBNYWtlcyBzdXJlIGNsb25pbmcgYW4gaHRtbDUgZWxlbWVudCBkb2VzIG5vdCBjYXVzZSBwcm9ibGVtcwoJLy8gV2hlcmUgb3V0ZXJIVE1MIGlzIHVuZGVmaW5lZCwgdGhpcyBzdGlsbCB3b3JrcwoJc3VwcG9ydC5odG1sNUNsb25lID0KCQlkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAibmF2IiApLmNsb25lTm9kZSggdHJ1ZSApLm91dGVySFRNTCAhPT0gIjw6bmF2PjwvOm5hdj4iOwoKCS8vIENoZWNrIGlmIGEgZGlzY29ubmVjdGVkIGNoZWNrYm94IHdpbGwgcmV0YWluIGl0cyBjaGVja2VkCgkvLyB2YWx1ZSBvZiB0cnVlIGFmdGVyIGFwcGVuZGVkIHRvIHRoZSBET00gKElFNi83KQoJaW5wdXQudHlwZSA9ICJjaGVja2JveCI7CglpbnB1dC5jaGVja2VkID0gdHJ1ZTsKCWZyYWdtZW50LmFwcGVuZENoaWxkKCBpbnB1dCApOwoJc3VwcG9ydC5hcHBlbmRDaGVja2VkID0gaW5wdXQuY2hlY2tlZDsKCgkvLyBNYWtlIHN1cmUgdGV4dGFyZWEgKGFuZCBjaGVja2JveCkgZGVmYXVsdFZhbHVlIGlzIHByb3Blcmx5IGNsb25lZAoJLy8gU3VwcG9ydDogSUU2LUlFMTErCglkaXYuaW5uZXJIVE1MID0gIjx0ZXh0YXJlYT54PC90ZXh0YXJlYT4iOwoJc3VwcG9ydC5ub0Nsb25lQ2hlY2tlZCA9ICEhZGl2LmNsb25lTm9kZSggdHJ1ZSApLmxhc3RDaGlsZC5kZWZhdWx0VmFsdWU7CgoJLy8gIzExMjE3IC0gV2ViS2l0IGxvc2VzIGNoZWNrIHdoZW4gdGhlIG5hbWUgaXMgYWZ0ZXIgdGhlIGNoZWNrZWQgYXR0cmlidXRlCglmcmFnbWVudC5hcHBlbmRDaGlsZCggZGl2ICk7CgoJLy8gU3VwcG9ydDogV2luZG93cyBXZWIgQXBwcyAoV1dBKQoJLy8gYG5hbWVgIGFuZCBgdHlwZWAgbXVzdCB1c2UgLnNldEF0dHJpYnV0ZSBmb3IgV1dBICgjMTQ5MDEpCglpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICJpbnB1dCIgKTsKCWlucHV0LnNldEF0dHJpYnV0ZSggInR5cGUiLCAicmFkaW8iICk7CglpbnB1dC5zZXRBdHRyaWJ1dGUoICJjaGVja2VkIiwgImNoZWNrZWQiICk7CglpbnB1dC5zZXRBdHRyaWJ1dGUoICJuYW1lIiwgInQiICk7CgoJZGl2LmFwcGVuZENoaWxkKCBpbnB1dCApOwoKCS8vIFN1cHBvcnQ6IFNhZmFyaSA1LjEsIGlPUyA1LjEsIEFuZHJvaWQgNC54LCBBbmRyb2lkIDIuMwoJLy8gb2xkIFdlYktpdCBkb2Vzbid0IGNsb25lIGNoZWNrZWQgc3RhdGUgY29ycmVjdGx5IGluIGZyYWdtZW50cwoJc3VwcG9ydC5jaGVja0Nsb25lID0gZGl2LmNsb25lTm9kZSggdHJ1ZSApLmNsb25lTm9kZSggdHJ1ZSApLmxhc3RDaGlsZC5jaGVja2VkOwoKCS8vIFN1cHBvcnQ6IElFPDkKCS8vIENsb25lZCBlbGVtZW50cyBrZWVwIGF0dGFjaEV2ZW50IGhhbmRsZXJzLCB3ZSB1c2UgYWRkRXZlbnRMaXN0ZW5lciBvbiBJRTkrCglzdXBwb3J0Lm5vQ2xvbmVFdmVudCA9ICEhZGl2LmFkZEV2ZW50TGlzdGVuZXI7CgoJLy8gU3VwcG9ydDogSUU8OQoJLy8gU2luY2UgYXR0cmlidXRlcyBhbmQgcHJvcGVydGllcyBhcmUgdGhlIHNhbWUgaW4gSUUsCgkvLyBjbGVhbkRhdGEgbXVzdCBzZXQgcHJvcGVydGllcyB0byB1bmRlZmluZWQgcmF0aGVyIHRoYW4gdXNlIHJlbW92ZUF0dHJpYnV0ZQoJZGl2WyBqUXVlcnkuZXhwYW5kbyBdID0gMTsKCXN1cHBvcnQuYXR0cmlidXRlcyA9ICFkaXYuZ2V0QXR0cmlidXRlKCBqUXVlcnkuZXhwYW5kbyApOwp9ICkoKTsKCgovLyBXZSBoYXZlIHRvIGNsb3NlIHRoZXNlIHRhZ3MgdG8gc3VwcG9ydCBYSFRNTCAoIzEzMjAwKQp2YXIgd3JhcE1hcCA9IHsKCW9wdGlvbjogWyAxLCAiPHNlbGVjdCBtdWx0aXBsZT0nbXVsdGlwbGUnPiIsICI8L3NlbGVjdD4iIF0sCglsZWdlbmQ6IFsgMSwgIjxmaWVsZHNldD4iLCAiPC9maWVsZHNldD4iIF0sCglhcmVhOiBbIDEsICI8bWFwPiIsICI8L21hcD4iIF0sCgoJLy8gU3VwcG9ydDogSUU4CglwYXJhbTogWyAxLCAiPG9iamVjdD4iLCAiPC9vYmplY3Q+IiBdLAoJdGhlYWQ6IFsgMSwgIjx0YWJsZT4iLCAiPC90YWJsZT4iIF0sCgl0cjogWyAyLCAiPHRhYmxlPjx0Ym9keT4iLCAiPC90Ym9keT48L3RhYmxlPiIgXSwKCWNvbDogWyAyLCAiPHRhYmxlPjx0Ym9keT48L3Rib2R5Pjxjb2xncm91cD4iLCAiPC9jb2xncm91cD48L3RhYmxlPiIgXSwKCXRkOiBbIDMsICI8dGFibGU+PHRib2R5Pjx0cj4iLCAiPC90cj48L3Rib2R5PjwvdGFibGU+IiBdLAoKCS8vIElFNi04IGNhbid0IHNlcmlhbGl6ZSBsaW5rLCBzY3JpcHQsIHN0eWxlLCBvciBhbnkgaHRtbDUgKE5vU2NvcGUpIHRhZ3MsCgkvLyB1bmxlc3Mgd3JhcHBlZCBpbiBhIGRpdiB3aXRoIG5vbi1icmVha2luZyBjaGFyYWN0ZXJzIGluIGZyb250IG9mIGl0LgoJX2RlZmF1bHQ6IHN1cHBvcnQuaHRtbFNlcmlhbGl6ZSA/IFsgMCwgIiIsICIiIF0gOiBbIDEsICJYPGRpdj4iLCAiPC9kaXY+IiBdCn07CgovLyBTdXBwb3J0OiBJRTgtSUU5CndyYXBNYXAub3B0Z3JvdXAgPSB3cmFwTWFwLm9wdGlvbjsKCndyYXBNYXAudGJvZHkgPSB3cmFwTWFwLnRmb290ID0gd3JhcE1hcC5jb2xncm91cCA9IHdyYXBNYXAuY2FwdGlvbiA9IHdyYXBNYXAudGhlYWQ7CndyYXBNYXAudGggPSB3cmFwTWFwLnRkOwoKCmZ1bmN0aW9uIGdldEFsbCggY29udGV4dCwgdGFnICkgewoJdmFyIGVsZW1zLCBlbGVtLAoJCWkgPSAwLAoJCWZvdW5kID0gdHlwZW9mIGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUgIT09ICJ1bmRlZmluZWQiID8KCQkJY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSggdGFnIHx8ICIqIiApIDoKCQkJdHlwZW9mIGNvbnRleHQucXVlcnlTZWxlY3RvckFsbCAhPT0gInVuZGVmaW5lZCIgPwoJCQkJY29udGV4dC5xdWVyeVNlbGVjdG9yQWxsKCB0YWcgfHwgIioiICkgOgoJCQkJdW5kZWZpbmVkOwoKCWlmICggIWZvdW5kICkgewoJCWZvciAoIGZvdW5kID0gW10sIGVsZW1zID0gY29udGV4dC5jaGlsZE5vZGVzIHx8IGNvbnRleHQ7CgkJCSggZWxlbSA9IGVsZW1zWyBpIF0gKSAhPSBudWxsOwoJCQlpKysKCQkpIHsKCQkJaWYgKCAhdGFnIHx8IGpRdWVyeS5ub2RlTmFtZSggZWxlbSwgdGFnICkgKSB7CgkJCQlmb3VuZC5wdXNoKCBlbGVtICk7CgkJCX0gZWxzZSB7CgkJCQlqUXVlcnkubWVyZ2UoIGZvdW5kLCBnZXRBbGwoIGVsZW0sIHRhZyApICk7CgkJCX0KCQl9Cgl9CgoJcmV0dXJuIHRhZyA9PT0gdW5kZWZpbmVkIHx8IHRhZyAmJiBqUXVlcnkubm9kZU5hbWUoIGNvbnRleHQsIHRhZyApID8KCQlqUXVlcnkubWVyZ2UoIFsgY29udGV4dCBdLCBmb3VuZCApIDoKCQlmb3VuZDsKfQoKCi8vIE1hcmsgc2NyaXB0cyBhcyBoYXZpbmcgYWxyZWFkeSBiZWVuIGV2YWx1YXRlZApmdW5jdGlvbiBzZXRHbG9iYWxFdmFsKCBlbGVtcywgcmVmRWxlbWVudHMgKSB7Cgl2YXIgZWxlbSwKCQlpID0gMDsKCWZvciAoIDsgKCBlbGVtID0gZWxlbXNbIGkgXSApICE9IG51bGw7IGkrKyApIHsKCQlqUXVlcnkuX2RhdGEoCgkJCWVsZW0sCgkJCSJnbG9iYWxFdmFsIiwKCQkJIXJlZkVsZW1lbnRzIHx8IGpRdWVyeS5fZGF0YSggcmVmRWxlbWVudHNbIGkgXSwgImdsb2JhbEV2YWwiICkKCQkpOwoJfQp9CgoKdmFyIHJodG1sID0gLzx8JiM/XHcrOy8sCglydGJvZHkgPSAvPHRib2R5L2k7CgpmdW5jdGlvbiBmaXhEZWZhdWx0Q2hlY2tlZCggZWxlbSApIHsKCWlmICggcmNoZWNrYWJsZVR5cGUudGVzdCggZWxlbS50eXBlICkgKSB7CgkJZWxlbS5kZWZhdWx0Q2hlY2tlZCA9IGVsZW0uY2hlY2tlZDsKCX0KfQoKZnVuY3Rpb24gYnVpbGRGcmFnbWVudCggZWxlbXMsIGNvbnRleHQsIHNjcmlwdHMsIHNlbGVjdGlvbiwgaWdub3JlZCApIHsKCXZhciBqLCBlbGVtLCBjb250YWlucywKCQl0bXAsIHRhZywgdGJvZHksIHdyYXAsCgkJbCA9IGVsZW1zLmxlbmd0aCwKCgkJLy8gRW5zdXJlIGEgc2FmZSBmcmFnbWVudAoJCXNhZmUgPSBjcmVhdGVTYWZlRnJhZ21lbnQoIGNvbnRleHQgKSwKCgkJbm9kZXMgPSBbXSwKCQlpID0gMDsKCglmb3IgKCA7IGkgPCBsOyBpKysgKSB7CgkJZWxlbSA9IGVsZW1zWyBpIF07CgoJCWlmICggZWxlbSB8fCBlbGVtID09PSAwICkgewoKCQkJLy8gQWRkIG5vZGVzIGRpcmVjdGx5CgkJCWlmICggalF1ZXJ5LnR5cGUoIGVsZW0gKSA9PT0gIm9iamVjdCIgKSB7CgkJCQlqUXVlcnkubWVyZ2UoIG5vZGVzLCBlbGVtLm5vZGVUeXBlID8gWyBlbGVtIF0gOiBlbGVtICk7CgoJCQkvLyBDb252ZXJ0IG5vbi1odG1sIGludG8gYSB0ZXh0IG5vZGUKCQkJfSBlbHNlIGlmICggIXJodG1sLnRlc3QoIGVsZW0gKSApIHsKCQkJCW5vZGVzLnB1c2goIGNvbnRleHQuY3JlYXRlVGV4dE5vZGUoIGVsZW0gKSApOwoKCQkJLy8gQ29udmVydCBodG1sIGludG8gRE9NIG5vZGVzCgkJCX0gZWxzZSB7CgkJCQl0bXAgPSB0bXAgfHwgc2FmZS5hcHBlbmRDaGlsZCggY29udGV4dC5jcmVhdGVFbGVtZW50KCAiZGl2IiApICk7CgoJCQkJLy8gRGVzZXJpYWxpemUgYSBzdGFuZGFyZCByZXByZXNlbnRhdGlvbgoJCQkJdGFnID0gKCBydGFnTmFtZS5leGVjKCBlbGVtICkgfHwgWyAiIiwgIiIgXSApWyAxIF0udG9Mb3dlckNhc2UoKTsKCQkJCXdyYXAgPSB3cmFwTWFwWyB0YWcgXSB8fCB3cmFwTWFwLl9kZWZhdWx0OwoKCQkJCXRtcC5pbm5lckhUTUwgPSB3cmFwWyAxIF0gKyBqUXVlcnkuaHRtbFByZWZpbHRlciggZWxlbSApICsgd3JhcFsgMiBdOwoKCQkJCS8vIERlc2NlbmQgdGhyb3VnaCB3cmFwcGVycyB0byB0aGUgcmlnaHQgY29udGVudAoJCQkJaiA9IHdyYXBbIDAgXTsKCQkJCXdoaWxlICggai0tICkgewoJCQkJCXRtcCA9IHRtcC5sYXN0Q2hpbGQ7CgkJCQl9CgoJCQkJLy8gTWFudWFsbHkgYWRkIGxlYWRpbmcgd2hpdGVzcGFjZSByZW1vdmVkIGJ5IElFCgkJCQlpZiAoICFzdXBwb3J0LmxlYWRpbmdXaGl0ZXNwYWNlICYmIHJsZWFkaW5nV2hpdGVzcGFjZS50ZXN0KCBlbGVtICkgKSB7CgkJCQkJbm9kZXMucHVzaCggY29udGV4dC5jcmVhdGVUZXh0Tm9kZSggcmxlYWRpbmdXaGl0ZXNwYWNlLmV4ZWMoIGVsZW0gKVsgMCBdICkgKTsKCQkJCX0KCgkJCQkvLyBSZW1vdmUgSUUncyBhdXRvaW5zZXJ0ZWQgPHRib2R5PiBmcm9tIHRhYmxlIGZyYWdtZW50cwoJCQkJaWYgKCAhc3VwcG9ydC50Ym9keSApIHsKCgkJCQkJLy8gU3RyaW5nIHdhcyBhIDx0YWJsZT4sICptYXkqIGhhdmUgc3B1cmlvdXMgPHRib2R5PgoJCQkJCWVsZW0gPSB0YWcgPT09ICJ0YWJsZSIgJiYgIXJ0Ym9keS50ZXN0KCBlbGVtICkgPwoJCQkJCQl0bXAuZmlyc3RDaGlsZCA6CgoJCQkJCQkvLyBTdHJpbmcgd2FzIGEgYmFyZSA8dGhlYWQ+IG9yIDx0Zm9vdD4KCQkJCQkJd3JhcFsgMSBdID09PSAiPHRhYmxlPiIgJiYgIXJ0Ym9keS50ZXN0KCBlbGVtICkgPwoJCQkJCQkJdG1wIDoKCQkJCQkJCTA7CgoJCQkJCWogPSBlbGVtICYmIGVsZW0uY2hpbGROb2Rlcy5sZW5ndGg7CgkJCQkJd2hpbGUgKCBqLS0gKSB7CgkJCQkJCWlmICggalF1ZXJ5Lm5vZGVOYW1lKCAoIHRib2R5ID0gZWxlbS5jaGlsZE5vZGVzWyBqIF0gKSwgInRib2R5IiApICYmCgkJCQkJCQkhdGJvZHkuY2hpbGROb2Rlcy5sZW5ndGggKSB7CgoJCQkJCQkJZWxlbS5yZW1vdmVDaGlsZCggdGJvZHkgKTsKCQkJCQkJfQoJCQkJCX0KCQkJCX0KCgkJCQlqUXVlcnkubWVyZ2UoIG5vZGVzLCB0bXAuY2hpbGROb2RlcyApOwoKCQkJCS8vIEZpeCAjMTIzOTIgZm9yIFdlYktpdCBhbmQgSUUgPiA5CgkJCQl0bXAudGV4dENvbnRlbnQgPSAiIjsKCgkJCQkvLyBGaXggIzEyMzkyIGZvciBvbGRJRQoJCQkJd2hpbGUgKCB0bXAuZmlyc3RDaGlsZCApIHsKCQkJCQl0bXAucmVtb3ZlQ2hpbGQoIHRtcC5maXJzdENoaWxkICk7CgkJCQl9CgoJCQkJLy8gUmVtZW1iZXIgdGhlIHRvcC1sZXZlbCBjb250YWluZXIgZm9yIHByb3BlciBjbGVhbnVwCgkJCQl0bXAgPSBzYWZlLmxhc3RDaGlsZDsKCQkJfQoJCX0KCX0KCgkvLyBGaXggIzExMzU2OiBDbGVhciBlbGVtZW50cyBmcm9tIGZyYWdtZW50CglpZiAoIHRtcCApIHsKCQlzYWZlLnJlbW92ZUNoaWxkKCB0bXAgKTsKCX0KCgkvLyBSZXNldCBkZWZhdWx0Q2hlY2tlZCBmb3IgYW55IHJhZGlvcyBhbmQgY2hlY2tib3hlcwoJLy8gYWJvdXQgdG8gYmUgYXBwZW5kZWQgdG8gdGhlIERPTSBpbiBJRSA2LzcgKCM4MDYwKQoJaWYgKCAhc3VwcG9ydC5hcHBlbmRDaGVja2VkICkgewoJCWpRdWVyeS5ncmVwKCBnZXRBbGwoIG5vZGVzLCAiaW5wdXQiICksIGZpeERlZmF1bHRDaGVja2VkICk7Cgl9CgoJaSA9IDA7Cgl3aGlsZSAoICggZWxlbSA9IG5vZGVzWyBpKysgXSApICkgewoKCQkvLyBTa2lwIGVsZW1lbnRzIGFscmVhZHkgaW4gdGhlIGNvbnRleHQgY29sbGVjdGlvbiAodHJhYy00MDg3KQoJCWlmICggc2VsZWN0aW9uICYmIGpRdWVyeS5pbkFycmF5KCBlbGVtLCBzZWxlY3Rpb24gKSA+IC0xICkgewoJCQlpZiAoIGlnbm9yZWQgKSB7CgkJCQlpZ25vcmVkLnB1c2goIGVsZW0gKTsKCQkJfQoKCQkJY29udGludWU7CgkJfQoKCQljb250YWlucyA9IGpRdWVyeS5jb250YWlucyggZWxlbS5vd25lckRvY3VtZW50LCBlbGVtICk7CgoJCS8vIEFwcGVuZCB0byBmcmFnbWVudAoJCXRtcCA9IGdldEFsbCggc2FmZS5hcHBlbmRDaGlsZCggZWxlbSApLCAic2NyaXB0IiApOwoKCQkvLyBQcmVzZXJ2ZSBzY3JpcHQgZXZhbHVhdGlvbiBoaXN0b3J5CgkJaWYgKCBjb250YWlucyApIHsKCQkJc2V0R2xvYmFsRXZhbCggdG1wICk7CgkJfQoKCQkvLyBDYXB0dXJlIGV4ZWN1dGFibGVzCgkJaWYgKCBzY3JpcHRzICkgewoJCQlqID0gMDsKCQkJd2hpbGUgKCAoIGVsZW0gPSB0bXBbIGorKyBdICkgKSB7CgkJCQlpZiAoIHJzY3JpcHRUeXBlLnRlc3QoIGVsZW0udHlwZSB8fCAiIiApICkgewoJCQkJCXNjcmlwdHMucHVzaCggZWxlbSApOwoJCQkJfQoJCQl9CgkJfQoJfQoKCXRtcCA9IG51bGw7CgoJcmV0dXJuIHNhZmU7Cn0KCgooIGZ1bmN0aW9uKCkgewoJdmFyIGksIGV2ZW50TmFtZSwKCQlkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAiZGl2IiApOwoKCS8vIFN1cHBvcnQ6IElFPDkgKGxhY2sgc3VibWl0L2NoYW5nZSBidWJibGUpLCBGaXJlZm94IChsYWNrIGZvY3VzKGluIHwgb3V0KSBldmVudHMpCglmb3IgKCBpIGluIHsgc3VibWl0OiB0cnVlLCBjaGFuZ2U6IHRydWUsIGZvY3VzaW46IHRydWUgfSApIHsKCQlldmVudE5hbWUgPSAib24iICsgaTsKCgkJaWYgKCAhKCBzdXBwb3J0WyBpIF0gPSBldmVudE5hbWUgaW4gd2luZG93ICkgKSB7CgoJCQkvLyBCZXdhcmUgb2YgQ1NQIHJlc3RyaWN0aW9ucyAoaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vU2VjdXJpdHkvQ1NQKQoJCQlkaXYuc2V0QXR0cmlidXRlKCBldmVudE5hbWUsICJ0IiApOwoJCQlzdXBwb3J0WyBpIF0gPSBkaXYuYXR0cmlidXRlc1sgZXZlbnROYW1lIF0uZXhwYW5kbyA9PT0gZmFsc2U7CgkJfQoJfQoKCS8vIE51bGwgZWxlbWVudHMgdG8gYXZvaWQgbGVha3MgaW4gSUUuCglkaXYgPSBudWxsOwp9ICkoKTsKCgp2YXIgcmZvcm1FbGVtcyA9IC9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhKSQvaSwKCXJrZXlFdmVudCA9IC9ea2V5LywKCXJtb3VzZUV2ZW50ID0gL14oPzptb3VzZXxwb2ludGVyfGNvbnRleHRtZW51fGRyYWd8ZHJvcCl8Y2xpY2svLAoJcmZvY3VzTW9ycGggPSAvXig/OmZvY3VzaW5mb2N1c3xmb2N1c291dGJsdXIpJC8sCglydHlwZW5hbWVzcGFjZSA9IC9eKFteLl0qKSg/OlwuKC4rKXwpLzsKCmZ1bmN0aW9uIHJldHVyblRydWUoKSB7CglyZXR1cm4gdHJ1ZTsKfQoKZnVuY3Rpb24gcmV0dXJuRmFsc2UoKSB7CglyZXR1cm4gZmFsc2U7Cn0KCi8vIFN1cHBvcnQ6IElFOQovLyBTZWUgIzEzMzkzIGZvciBtb3JlIGluZm8KZnVuY3Rpb24gc2FmZUFjdGl2ZUVsZW1lbnQoKSB7Cgl0cnkgewoJCXJldHVybiBkb2N1bWVudC5hY3RpdmVFbGVtZW50OwoJfSBjYXRjaCAoIGVyciApIHsgfQp9CgpmdW5jdGlvbiBvbiggZWxlbSwgdHlwZXMsIHNlbGVjdG9yLCBkYXRhLCBmbiwgb25lICkgewoJdmFyIG9yaWdGbiwgdHlwZTsKCgkvLyBUeXBlcyBjYW4gYmUgYSBtYXAgb2YgdHlwZXMvaGFuZGxlcnMKCWlmICggdHlwZW9mIHR5cGVzID09PSAib2JqZWN0IiApIHsKCgkJLy8gKCB0eXBlcy1PYmplY3QsIHNlbGVjdG9yLCBkYXRhICkKCQlpZiAoIHR5cGVvZiBzZWxlY3RvciAhPT0gInN0cmluZyIgKSB7CgoJCQkvLyAoIHR5cGVzLU9iamVjdCwgZGF0YSApCgkJCWRhdGEgPSBkYXRhIHx8IHNlbGVjdG9yOwoJCQlzZWxlY3RvciA9IHVuZGVmaW5lZDsKCQl9CgkJZm9yICggdHlwZSBpbiB0eXBlcyApIHsKCQkJb24oIGVsZW0sIHR5cGUsIHNlbGVjdG9yLCBkYXRhLCB0eXBlc1sgdHlwZSBdLCBvbmUgKTsKCQl9CgkJcmV0dXJuIGVsZW07Cgl9CgoJaWYgKCBkYXRhID09IG51bGwgJiYgZm4gPT0gbnVsbCApIHsKCgkJLy8gKCB0eXBlcywgZm4gKQoJCWZuID0gc2VsZWN0b3I7CgkJZGF0YSA9IHNlbGVjdG9yID0gdW5kZWZpbmVkOwoJfSBlbHNlIGlmICggZm4gPT0gbnVsbCApIHsKCQlpZiAoIHR5cGVvZiBzZWxlY3RvciA9PT0gInN0cmluZyIgKSB7CgoJCQkvLyAoIHR5cGVzLCBzZWxlY3RvciwgZm4gKQoJCQlmbiA9IGRhdGE7CgkJCWRhdGEgPSB1bmRlZmluZWQ7CgkJfSBlbHNlIHsKCgkJCS8vICggdHlwZXMsIGRhdGEsIGZuICkKCQkJZm4gPSBkYXRhOwoJCQlkYXRhID0gc2VsZWN0b3I7CgkJCXNlbGVjdG9yID0gdW5kZWZpbmVkOwoJCX0KCX0KCWlmICggZm4gPT09IGZhbHNlICkgewoJCWZuID0gcmV0dXJuRmFsc2U7Cgl9IGVsc2UgaWYgKCAhZm4gKSB7CgkJcmV0dXJuIGVsZW07Cgl9CgoJaWYgKCBvbmUgPT09IDEgKSB7CgkJb3JpZ0ZuID0gZm47CgkJZm4gPSBmdW5jdGlvbiggZXZlbnQgKSB7CgoJCQkvLyBDYW4gdXNlIGFuIGVtcHR5IHNldCwgc2luY2UgZXZlbnQgY29udGFpbnMgdGhlIGluZm8KCQkJalF1ZXJ5KCkub2ZmKCBldmVudCApOwoJCQlyZXR1cm4gb3JpZ0ZuLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTsKCQl9OwoKCQkvLyBVc2Ugc2FtZSBndWlkIHNvIGNhbGxlciBjYW4gcmVtb3ZlIHVzaW5nIG9yaWdGbgoJCWZuLmd1aWQgPSBvcmlnRm4uZ3VpZCB8fCAoIG9yaWdGbi5ndWlkID0galF1ZXJ5Lmd1aWQrKyApOwoJfQoJcmV0dXJuIGVsZW0uZWFjaCggZnVuY3Rpb24oKSB7CgkJalF1ZXJ5LmV2ZW50LmFkZCggdGhpcywgdHlwZXMsIGZuLCBkYXRhLCBzZWxlY3RvciApOwoJfSApOwp9CgovKgogKiBIZWxwZXIgZnVuY3Rpb25zIGZvciBtYW5hZ2luZyBldmVudHMgLS0gbm90IHBhcnQgb2YgdGhlIHB1YmxpYyBpbnRlcmZhY2UuCiAqIFByb3BzIHRvIERlYW4gRWR3YXJkcycgYWRkRXZlbnQgbGlicmFyeSBmb3IgbWFueSBvZiB0aGUgaWRlYXMuCiAqLwpqUXVlcnkuZXZlbnQgPSB7CgoJZ2xvYmFsOiB7fSwKCglhZGQ6IGZ1bmN0aW9uKCBlbGVtLCB0eXBlcywgaGFuZGxlciwgZGF0YSwgc2VsZWN0b3IgKSB7CgkJdmFyIHRtcCwgZXZlbnRzLCB0LCBoYW5kbGVPYmpJbiwKCQkJc3BlY2lhbCwgZXZlbnRIYW5kbGUsIGhhbmRsZU9iaiwKCQkJaGFuZGxlcnMsIHR5cGUsIG5hbWVzcGFjZXMsIG9yaWdUeXBlLAoJCQllbGVtRGF0YSA9IGpRdWVyeS5fZGF0YSggZWxlbSApOwoKCQkvLyBEb24ndCBhdHRhY2ggZXZlbnRzIHRvIG5vRGF0YSBvciB0ZXh0L2NvbW1lbnQgbm9kZXMgKGJ1dCBhbGxvdyBwbGFpbiBvYmplY3RzKQoJCWlmICggIWVsZW1EYXRhICkgewoJCQlyZXR1cm47CgkJfQoKCQkvLyBDYWxsZXIgY2FuIHBhc3MgaW4gYW4gb2JqZWN0IG9mIGN1c3RvbSBkYXRhIGluIGxpZXUgb2YgdGhlIGhhbmRsZXIKCQlpZiAoIGhhbmRsZXIuaGFuZGxlciApIHsKCQkJaGFuZGxlT2JqSW4gPSBoYW5kbGVyOwoJCQloYW5kbGVyID0gaGFuZGxlT2JqSW4uaGFuZGxlcjsKCQkJc2VsZWN0b3IgPSBoYW5kbGVPYmpJbi5zZWxlY3RvcjsKCQl9CgoJCS8vIE1ha2Ugc3VyZSB0aGF0IHRoZSBoYW5kbGVyIGhhcyBhIHVuaXF1ZSBJRCwgdXNlZCB0byBmaW5kL3JlbW92ZSBpdCBsYXRlcgoJCWlmICggIWhhbmRsZXIuZ3VpZCApIHsKCQkJaGFuZGxlci5ndWlkID0galF1ZXJ5Lmd1aWQrKzsKCQl9CgoJCS8vIEluaXQgdGhlIGVsZW1lbnQncyBldmVudCBzdHJ1Y3R1cmUgYW5kIG1haW4gaGFuZGxlciwgaWYgdGhpcyBpcyB0aGUgZmlyc3QKCQlpZiAoICEoIGV2ZW50cyA9IGVsZW1EYXRhLmV2ZW50cyApICkgewoJCQlldmVudHMgPSBlbGVtRGF0YS5ldmVudHMgPSB7fTsKCQl9CgkJaWYgKCAhKCBldmVudEhhbmRsZSA9IGVsZW1EYXRhLmhhbmRsZSApICkgewoJCQlldmVudEhhbmRsZSA9IGVsZW1EYXRhLmhhbmRsZSA9IGZ1bmN0aW9uKCBlICkgewoKCQkJCS8vIERpc2NhcmQgdGhlIHNlY29uZCBldmVudCBvZiBhIGpRdWVyeS5ldmVudC50cmlnZ2VyKCkgYW5kCgkJCQkvLyB3aGVuIGFuIGV2ZW50IGlzIGNhbGxlZCBhZnRlciBhIHBhZ2UgaGFzIHVubG9hZGVkCgkJCQlyZXR1cm4gdHlwZW9mIGpRdWVyeSAhPT0gInVuZGVmaW5lZCIgJiYKCQkJCQkoICFlIHx8IGpRdWVyeS5ldmVudC50cmlnZ2VyZWQgIT09IGUudHlwZSApID8KCQkJCQlqUXVlcnkuZXZlbnQuZGlzcGF0Y2guYXBwbHkoIGV2ZW50SGFuZGxlLmVsZW0sIGFyZ3VtZW50cyApIDoKCQkJCQl1bmRlZmluZWQ7CgkJCX07CgoJCQkvLyBBZGQgZWxlbSBhcyBhIHByb3BlcnR5IG9mIHRoZSBoYW5kbGUgZm4gdG8gcHJldmVudCBhIG1lbW9yeSBsZWFrCgkJCS8vIHdpdGggSUUgbm9uLW5hdGl2ZSBldmVudHMKCQkJZXZlbnRIYW5kbGUuZWxlbSA9IGVsZW07CgkJfQoKCQkvLyBIYW5kbGUgbXVsdGlwbGUgZXZlbnRzIHNlcGFyYXRlZCBieSBhIHNwYWNlCgkJdHlwZXMgPSAoIHR5cGVzIHx8ICIiICkubWF0Y2goIHJub3R3aGl0ZSApIHx8IFsgIiIgXTsKCQl0ID0gdHlwZXMubGVuZ3RoOwoJCXdoaWxlICggdC0tICkgewoJCQl0bXAgPSBydHlwZW5hbWVzcGFjZS5leGVjKCB0eXBlc1sgdCBdICkgfHwgW107CgkJCXR5cGUgPSBvcmlnVHlwZSA9IHRtcFsgMSBdOwoJCQluYW1lc3BhY2VzID0gKCB0bXBbIDIgXSB8fCAiIiApLnNwbGl0KCAiLiIgKS5zb3J0KCk7CgoJCQkvLyBUaGVyZSAqbXVzdCogYmUgYSB0eXBlLCBubyBhdHRhY2hpbmcgbmFtZXNwYWNlLW9ubHkgaGFuZGxlcnMKCQkJaWYgKCAhdHlwZSApIHsKCQkJCWNvbnRpbnVlOwoJCQl9CgoJCQkvLyBJZiBldmVudCBjaGFuZ2VzIGl0cyB0eXBlLCB1c2UgdGhlIHNwZWNpYWwgZXZlbnQgaGFuZGxlcnMgZm9yIHRoZSBjaGFuZ2VkIHR5cGUKCQkJc3BlY2lhbCA9IGpRdWVyeS5ldmVudC5zcGVjaWFsWyB0eXBlIF0gfHwge307CgoJCQkvLyBJZiBzZWxlY3RvciBkZWZpbmVkLCBkZXRlcm1pbmUgc3BlY2lhbCBldmVudCBhcGkgdHlwZSwgb3RoZXJ3aXNlIGdpdmVuIHR5cGUKCQkJdHlwZSA9ICggc2VsZWN0b3IgPyBzcGVjaWFsLmRlbGVnYXRlVHlwZSA6IHNwZWNpYWwuYmluZFR5cGUgKSB8fCB0eXBlOwoKCQkJLy8gVXBkYXRlIHNwZWNpYWwgYmFzZWQgb24gbmV3bHkgcmVzZXQgdHlwZQoJCQlzcGVjaWFsID0galF1ZXJ5LmV2ZW50LnNwZWNpYWxbIHR5cGUgXSB8fCB7fTsKCgkJCS8vIGhhbmRsZU9iaiBpcyBwYXNzZWQgdG8gYWxsIGV2ZW50IGhhbmRsZXJzCgkJCWhhbmRsZU9iaiA9IGpRdWVyeS5leHRlbmQoIHsKCQkJCXR5cGU6IHR5cGUsCgkJCQlvcmlnVHlwZTogb3JpZ1R5cGUsCgkJCQlkYXRhOiBkYXRhLAoJCQkJaGFuZGxlcjogaGFuZGxlciwKCQkJCWd1aWQ6IGhhbmRsZXIuZ3VpZCwKCQkJCXNlbGVjdG9yOiBzZWxlY3RvciwKCQkJCW5lZWRzQ29udGV4dDogc2VsZWN0b3IgJiYgalF1ZXJ5LmV4cHIubWF0Y2gubmVlZHNDb250ZXh0LnRlc3QoIHNlbGVjdG9yICksCgkJCQluYW1lc3BhY2U6IG5hbWVzcGFjZXMuam9pbiggIi4iICkKCQkJfSwgaGFuZGxlT2JqSW4gKTsKCgkJCS8vIEluaXQgdGhlIGV2ZW50IGhhbmRsZXIgcXVldWUgaWYgd2UncmUgdGhlIGZpcnN0CgkJCWlmICggISggaGFuZGxlcnMgPSBldmVudHNbIHR5cGUgXSApICkgewoJCQkJaGFuZGxlcnMgPSBldmVudHNbIHR5cGUgXSA9IFtdOwoJCQkJaGFuZGxlcnMuZGVsZWdhdGVDb3VudCA9IDA7CgoJCQkJLy8gT25seSB1c2UgYWRkRXZlbnRMaXN0ZW5lci9hdHRhY2hFdmVudCBpZiB0aGUgc3BlY2lhbCBldmVudHMgaGFuZGxlciByZXR1cm5zIGZhbHNlCgkJCQlpZiAoICFzcGVjaWFsLnNldHVwIHx8CgkJCQkJc3BlY2lhbC5zZXR1cC5jYWxsKCBlbGVtLCBkYXRhLCBuYW1lc3BhY2VzLCBldmVudEhhbmRsZSApID09PSBmYWxzZSApIHsKCgkJCQkJLy8gQmluZCB0aGUgZ2xvYmFsIGV2ZW50IGhhbmRsZXIgdG8gdGhlIGVsZW1lbnQKCQkJCQlpZiAoIGVsZW0uYWRkRXZlbnRMaXN0ZW5lciApIHsKCQkJCQkJZWxlbS5hZGRFdmVudExpc3RlbmVyKCB0eXBlLCBldmVudEhhbmRsZSwgZmFsc2UgKTsKCgkJCQkJfSBlbHNlIGlmICggZWxlbS5hdHRhY2hFdmVudCApIHsKCQkJCQkJZWxlbS5hdHRhY2hFdmVudCggIm9uIiArIHR5cGUsIGV2ZW50SGFuZGxlICk7CgkJCQkJfQoJCQkJfQoJCQl9CgoJCQlpZiAoIHNwZWNpYWwuYWRkICkgewoJCQkJc3BlY2lhbC5hZGQuY2FsbCggZWxlbSwgaGFuZGxlT2JqICk7CgoJCQkJaWYgKCAhaGFuZGxlT2JqLmhhbmRsZXIuZ3VpZCApIHsKCQkJCQloYW5kbGVPYmouaGFuZGxlci5ndWlkID0gaGFuZGxlci5ndWlkOwoJCQkJfQoJCQl9CgoJCQkvLyBBZGQgdG8gdGhlIGVsZW1lbnQncyBoYW5kbGVyIGxpc3QsIGRlbGVnYXRlcyBpbiBmcm9udAoJCQlpZiAoIHNlbGVjdG9yICkgewoJCQkJaGFuZGxlcnMuc3BsaWNlKCBoYW5kbGVycy5kZWxlZ2F0ZUNvdW50KyssIDAsIGhhbmRsZU9iaiApOwoJCQl9IGVsc2UgewoJCQkJaGFuZGxlcnMucHVzaCggaGFuZGxlT2JqICk7CgkJCX0KCgkJCS8vIEtlZXAgdHJhY2sgb2Ygd2hpY2ggZXZlbnRzIGhhdmUgZXZlciBiZWVuIHVzZWQsIGZvciBldmVudCBvcHRpbWl6YXRpb24KCQkJalF1ZXJ5LmV2ZW50Lmdsb2JhbFsgdHlwZSBdID0gdHJ1ZTsKCQl9CgoJCS8vIE51bGxpZnkgZWxlbSB0byBwcmV2ZW50IG1lbW9yeSBsZWFrcyBpbiBJRQoJCWVsZW0gPSBudWxsOwoJfSwKCgkvLyBEZXRhY2ggYW4gZXZlbnQgb3Igc2V0IG9mIGV2ZW50cyBmcm9tIGFuIGVsZW1lbnQKCXJlbW92ZTogZnVuY3Rpb24oIGVsZW0sIHR5cGVzLCBoYW5kbGVyLCBzZWxlY3RvciwgbWFwcGVkVHlwZXMgKSB7CgkJdmFyIGosIGhhbmRsZU9iaiwgdG1wLAoJCQlvcmlnQ291bnQsIHQsIGV2ZW50cywKCQkJc3BlY2lhbCwgaGFuZGxlcnMsIHR5cGUsCgkJCW5hbWVzcGFjZXMsIG9yaWdUeXBlLAoJCQllbGVtRGF0YSA9IGpRdWVyeS5oYXNEYXRhKCBlbGVtICkgJiYgalF1ZXJ5Ll9kYXRhKCBlbGVtICk7CgoJCWlmICggIWVsZW1EYXRhIHx8ICEoIGV2ZW50cyA9IGVsZW1EYXRhLmV2ZW50cyApICkgewoJCQlyZXR1cm47CgkJfQoKCQkvLyBPbmNlIGZvciBlYWNoIHR5cGUubmFtZXNwYWNlIGluIHR5cGVzOyB0eXBlIG1heSBiZSBvbWl0dGVkCgkJdHlwZXMgPSAoIHR5cGVzIHx8ICIiICkubWF0Y2goIHJub3R3aGl0ZSApIHx8IFsgIiIgXTsKCQl0ID0gdHlwZXMubGVuZ3RoOwoJCXdoaWxlICggdC0tICkgewoJCQl0bXAgPSBydHlwZW5hbWVzcGFjZS5leGVjKCB0eXBlc1sgdCBdICkgfHwgW107CgkJCXR5cGUgPSBvcmlnVHlwZSA9IHRtcFsgMSBdOwoJCQluYW1lc3BhY2VzID0gKCB0bXBbIDIgXSB8fCAiIiApLnNwbGl0KCAiLiIgKS5zb3J0KCk7CgoJCQkvLyBVbmJpbmQgYWxsIGV2ZW50cyAob24gdGhpcyBuYW1lc3BhY2UsIGlmIHByb3ZpZGVkKSBmb3IgdGhlIGVsZW1lbnQKCQkJaWYgKCAhdHlwZSApIHsKCQkJCWZvciAoIHR5cGUgaW4gZXZlbnRzICkgewoJCQkJCWpRdWVyeS5ldmVudC5yZW1vdmUoIGVsZW0sIHR5cGUgKyB0eXBlc1sgdCBdLCBoYW5kbGVyLCBzZWxlY3RvciwgdHJ1ZSApOwoJCQkJfQoJCQkJY29udGludWU7CgkJCX0KCgkJCXNwZWNpYWwgPSBqUXVlcnkuZXZlbnQuc3BlY2lhbFsgdHlwZSBdIHx8IHt9OwoJCQl0eXBlID0gKCBzZWxlY3RvciA/IHNwZWNpYWwuZGVsZWdhdGVUeXBlIDogc3BlY2lhbC5iaW5kVHlwZSApIHx8IHR5cGU7CgkJCWhhbmRsZXJzID0gZXZlbnRzWyB0eXBlIF0gfHwgW107CgkJCXRtcCA9IHRtcFsgMiBdICYmCgkJCQluZXcgUmVnRXhwKCAiKF58XFwuKSIgKyBuYW1lc3BhY2VzLmpvaW4oICJcXC4oPzouKlxcLnwpIiApICsgIihcXC58JCkiICk7CgoJCQkvLyBSZW1vdmUgbWF0Y2hpbmcgZXZlbnRzCgkJCW9yaWdDb3VudCA9IGogPSBoYW5kbGVycy5sZW5ndGg7CgkJCXdoaWxlICggai0tICkgewoJCQkJaGFuZGxlT2JqID0gaGFuZGxlcnNbIGogXTsKCgkJCQlpZiAoICggbWFwcGVkVHlwZXMgfHwgb3JpZ1R5cGUgPT09IGhhbmRsZU9iai5vcmlnVHlwZSApICYmCgkJCQkJKCAhaGFuZGxlciB8fCBoYW5kbGVyLmd1aWQgPT09IGhhbmRsZU9iai5ndWlkICkgJiYKCQkJCQkoICF0bXAgfHwgdG1wLnRlc3QoIGhhbmRsZU9iai5uYW1lc3BhY2UgKSApICYmCgkJCQkJKCAhc2VsZWN0b3IgfHwgc2VsZWN0b3IgPT09IGhhbmRsZU9iai5zZWxlY3RvciB8fAoJCQkJCQlzZWxlY3RvciA9PT0gIioqIiAmJiBoYW5kbGVPYmouc2VsZWN0b3IgKSApIHsKCQkJCQloYW5kbGVycy5zcGxpY2UoIGosIDEgKTsKCgkJCQkJaWYgKCBoYW5kbGVPYmouc2VsZWN0b3IgKSB7CgkJCQkJCWhhbmRsZXJzLmRlbGVnYXRlQ291bnQtLTsKCQkJCQl9CgkJCQkJaWYgKCBzcGVjaWFsLnJlbW92ZSApIHsKCQkJCQkJc3BlY2lhbC5yZW1vdmUuY2FsbCggZWxlbSwgaGFuZGxlT2JqICk7CgkJCQkJfQoJCQkJfQoJCQl9CgoJCQkvLyBSZW1vdmUgZ2VuZXJpYyBldmVudCBoYW5kbGVyIGlmIHdlIHJlbW92ZWQgc29tZXRoaW5nIGFuZCBubyBtb3JlIGhhbmRsZXJzIGV4aXN0CgkJCS8vIChhdm9pZHMgcG90ZW50aWFsIGZvciBlbmRsZXNzIHJlY3Vyc2lvbiBkdXJpbmcgcmVtb3ZhbCBvZiBzcGVjaWFsIGV2ZW50IGhhbmRsZXJzKQoJCQlpZiAoIG9yaWdDb3VudCAmJiAhaGFuZGxlcnMubGVuZ3RoICkgewoJCQkJaWYgKCAhc3BlY2lhbC50ZWFyZG93biB8fAoJCQkJCXNwZWNpYWwudGVhcmRvd24uY2FsbCggZWxlbSwgbmFtZXNwYWNlcywgZWxlbURhdGEuaGFuZGxlICkgPT09IGZhbHNlICkgewoKCQkJCQlqUXVlcnkucmVtb3ZlRXZlbnQoIGVsZW0sIHR5cGUsIGVsZW1EYXRhLmhhbmRsZSApOwoJCQkJfQoKCQkJCWRlbGV0ZSBldmVudHNbIHR5cGUgXTsKCQkJfQoJCX0KCgkJLy8gUmVtb3ZlIHRoZSBleHBhbmRvIGlmIGl0J3Mgbm8gbG9uZ2VyIHVzZWQKCQlpZiAoIGpRdWVyeS5pc0VtcHR5T2JqZWN0KCBldmVudHMgKSApIHsKCQkJZGVsZXRlIGVsZW1EYXRhLmhhbmRsZTsKCgkJCS8vIHJlbW92ZURhdGEgYWxzbyBjaGVja3MgZm9yIGVtcHRpbmVzcyBhbmQgY2xlYXJzIHRoZSBleHBhbmRvIGlmIGVtcHR5CgkJCS8vIHNvIHVzZSBpdCBpbnN0ZWFkIG9mIGRlbGV0ZQoJCQlqUXVlcnkuX3JlbW92ZURhdGEoIGVsZW0sICJldmVudHMiICk7CgkJfQoJfSwKCgl0cmlnZ2VyOiBmdW5jdGlvbiggZXZlbnQsIGRhdGEsIGVsZW0sIG9ubHlIYW5kbGVycyApIHsKCQl2YXIgaGFuZGxlLCBvbnR5cGUsIGN1ciwKCQkJYnViYmxlVHlwZSwgc3BlY2lhbCwgdG1wLCBpLAoJCQlldmVudFBhdGggPSBbIGVsZW0gfHwgZG9jdW1lbnQgXSwKCQkJdHlwZSA9IGhhc093bi5jYWxsKCBldmVudCwgInR5cGUiICkgPyBldmVudC50eXBlIDogZXZlbnQsCgkJCW5hbWVzcGFjZXMgPSBoYXNPd24uY2FsbCggZXZlbnQsICJuYW1lc3BhY2UiICkgPyBldmVudC5uYW1lc3BhY2Uuc3BsaXQoICIuIiApIDogW107CgoJCWN1ciA9IHRtcCA9IGVsZW0gPSBlbGVtIHx8IGRvY3VtZW50OwoKCQkvLyBEb24ndCBkbyBldmVudHMgb24gdGV4dCBhbmQgY29tbWVudCBub2RlcwoJCWlmICggZWxlbS5ub2RlVHlwZSA9PT0gMyB8fCBlbGVtLm5vZGVUeXBlID09PSA4ICkgewoJCQlyZXR1cm47CgkJfQoKCQkvLyBmb2N1cy9ibHVyIG1vcnBocyB0byBmb2N1c2luL291dDsgZW5zdXJlIHdlJ3JlIG5vdCBmaXJpbmcgdGhlbSByaWdodCBub3cKCQlpZiAoIHJmb2N1c01vcnBoLnRlc3QoIHR5cGUgKyBqUXVlcnkuZXZlbnQudHJpZ2dlcmVkICkgKSB7CgkJCXJldHVybjsKCQl9CgoJCWlmICggdHlwZS5pbmRleE9mKCAiLiIgKSA+IC0xICkgewoKCQkJLy8gTmFtZXNwYWNlZCB0cmlnZ2VyOyBjcmVhdGUgYSByZWdleHAgdG8gbWF0Y2ggZXZlbnQgdHlwZSBpbiBoYW5kbGUoKQoJCQluYW1lc3BhY2VzID0gdHlwZS5zcGxpdCggIi4iICk7CgkJCXR5cGUgPSBuYW1lc3BhY2VzLnNoaWZ0KCk7CgkJCW5hbWVzcGFjZXMuc29ydCgpOwoJCX0KCQlvbnR5cGUgPSB0eXBlLmluZGV4T2YoICI6IiApIDwgMCAmJiAib24iICsgdHlwZTsKCgkJLy8gQ2FsbGVyIGNhbiBwYXNzIGluIGEgalF1ZXJ5LkV2ZW50IG9iamVjdCwgT2JqZWN0LCBvciBqdXN0IGFuIGV2ZW50IHR5cGUgc3RyaW5nCgkJZXZlbnQgPSBldmVudFsgalF1ZXJ5LmV4cGFuZG8gXSA/CgkJCWV2ZW50IDoKCQkJbmV3IGpRdWVyeS5FdmVudCggdHlwZSwgdHlwZW9mIGV2ZW50ID09PSAib2JqZWN0IiAmJiBldmVudCApOwoKCQkvLyBUcmlnZ2VyIGJpdG1hc2s6ICYgMSBmb3IgbmF0aXZlIGhhbmRsZXJzOyAmIDIgZm9yIGpRdWVyeSAoYWx3YXlzIHRydWUpCgkJZXZlbnQuaXNUcmlnZ2VyID0gb25seUhhbmRsZXJzID8gMiA6IDM7CgkJZXZlbnQubmFtZXNwYWNlID0gbmFtZXNwYWNlcy5qb2luKCAiLiIgKTsKCQlldmVudC5ybmFtZXNwYWNlID0gZXZlbnQubmFtZXNwYWNlID8KCQkJbmV3IFJlZ0V4cCggIihefFxcLikiICsgbmFtZXNwYWNlcy5qb2luKCAiXFwuKD86LipcXC58KSIgKSArICIoXFwufCQpIiApIDoKCQkJbnVsbDsKCgkJLy8gQ2xlYW4gdXAgdGhlIGV2ZW50IGluIGNhc2UgaXQgaXMgYmVpbmcgcmV1c2VkCgkJZXZlbnQucmVzdWx0ID0gdW5kZWZpbmVkOwoJCWlmICggIWV2ZW50LnRhcmdldCApIHsKCQkJZXZlbnQudGFyZ2V0ID0gZWxlbTsKCQl9CgoJCS8vIENsb25lIGFueSBpbmNvbWluZyBkYXRhIGFuZCBwcmVwZW5kIHRoZSBldmVudCwgY3JlYXRpbmcgdGhlIGhhbmRsZXIgYXJnIGxpc3QKCQlkYXRhID0gZGF0YSA9PSBudWxsID8KCQkJWyBldmVudCBdIDoKCQkJalF1ZXJ5Lm1ha2VBcnJheSggZGF0YSwgWyBldmVudCBdICk7CgoJCS8vIEFsbG93IHNwZWNpYWwgZXZlbnRzIHRvIGRyYXcgb3V0c2lkZSB0aGUgbGluZXMKCQlzcGVjaWFsID0galF1ZXJ5LmV2ZW50LnNwZWNpYWxbIHR5cGUgXSB8fCB7fTsKCQlpZiAoICFvbmx5SGFuZGxlcnMgJiYgc3BlY2lhbC50cmlnZ2VyICYmIHNwZWNpYWwudHJpZ2dlci5hcHBseSggZWxlbSwgZGF0YSApID09PSBmYWxzZSApIHsKCQkJcmV0dXJuOwoJCX0KCgkJLy8gRGV0ZXJtaW5lIGV2ZW50IHByb3BhZ2F0aW9uIHBhdGggaW4gYWR2YW5jZSwgcGVyIFczQyBldmVudHMgc3BlYyAoIzk5NTEpCgkJLy8gQnViYmxlIHVwIHRvIGRvY3VtZW50LCB0aGVuIHRvIHdpbmRvdzsgd2F0Y2ggZm9yIGEgZ2xvYmFsIG93bmVyRG9jdW1lbnQgdmFyICgjOTcyNCkKCQlpZiAoICFvbmx5SGFuZGxlcnMgJiYgIXNwZWNpYWwubm9CdWJibGUgJiYgIWpRdWVyeS5pc1dpbmRvdyggZWxlbSApICkgewoKCQkJYnViYmxlVHlwZSA9IHNwZWNpYWwuZGVsZWdhdGVUeXBlIHx8IHR5cGU7CgkJCWlmICggIXJmb2N1c01vcnBoLnRlc3QoIGJ1YmJsZVR5cGUgKyB0eXBlICkgKSB7CgkJCQljdXIgPSBjdXIucGFyZW50Tm9kZTsKCQkJfQoJCQlmb3IgKCA7IGN1cjsgY3VyID0gY3VyLnBhcmVudE5vZGUgKSB7CgkJCQlldmVudFBhdGgucHVzaCggY3VyICk7CgkJCQl0bXAgPSBjdXI7CgkJCX0KCgkJCS8vIE9ubHkgYWRkIHdpbmRvdyBpZiB3ZSBnb3QgdG8gZG9jdW1lbnQgKGUuZy4sIG5vdCBwbGFpbiBvYmogb3IgZGV0YWNoZWQgRE9NKQoJCQlpZiAoIHRtcCA9PT0gKCBlbGVtLm93bmVyRG9jdW1lbnQgfHwgZG9jdW1lbnQgKSApIHsKCQkJCWV2ZW50UGF0aC5wdXNoKCB0bXAuZGVmYXVsdFZpZXcgfHwgdG1wLnBhcmVudFdpbmRvdyB8fCB3aW5kb3cgKTsKCQkJfQoJCX0KCgkJLy8gRmlyZSBoYW5kbGVycyBvbiB0aGUgZXZlbnQgcGF0aAoJCWkgPSAwOwoJCXdoaWxlICggKCBjdXIgPSBldmVudFBhdGhbIGkrKyBdICkgJiYgIWV2ZW50LmlzUHJvcGFnYXRpb25TdG9wcGVkKCkgKSB7CgoJCQlldmVudC50eXBlID0gaSA+IDEgPwoJCQkJYnViYmxlVHlwZSA6CgkJCQlzcGVjaWFsLmJpbmRUeXBlIHx8IHR5cGU7CgoJCQkvLyBqUXVlcnkgaGFuZGxlcgoJCQloYW5kbGUgPSAoIGpRdWVyeS5fZGF0YSggY3VyLCAiZXZlbnRzIiApIHx8IHt9IClbIGV2ZW50LnR5cGUgXSAmJgoJCQkJalF1ZXJ5Ll9kYXRhKCBjdXIsICJoYW5kbGUiICk7CgoJCQlpZiAoIGhhbmRsZSApIHsKCQkJCWhhbmRsZS5hcHBseSggY3VyLCBkYXRhICk7CgkJCX0KCgkJCS8vIE5hdGl2ZSBoYW5kbGVyCgkJCWhhbmRsZSA9IG9udHlwZSAmJiBjdXJbIG9udHlwZSBdOwoJCQlpZiAoIGhhbmRsZSAmJiBoYW5kbGUuYXBwbHkgJiYgYWNjZXB0RGF0YSggY3VyICkgKSB7CgkJCQlldmVudC5yZXN1bHQgPSBoYW5kbGUuYXBwbHkoIGN1ciwgZGF0YSApOwoJCQkJaWYgKCBldmVudC5yZXN1bHQgPT09IGZhbHNlICkgewoJCQkJCWV2ZW50LnByZXZlbnREZWZhdWx0KCk7CgkJCQl9CgkJCX0KCQl9CgkJZXZlbnQudHlwZSA9IHR5cGU7CgoJCS8vIElmIG5vYm9keSBwcmV2ZW50ZWQgdGhlIGRlZmF1bHQgYWN0aW9uLCBkbyBpdCBub3cKCQlpZiAoICFvbmx5SGFuZGxlcnMgJiYgIWV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpICkgewoKCQkJaWYgKAoJCQkJKCAhc3BlY2lhbC5fZGVmYXVsdCB8fAoJCQkJIHNwZWNpYWwuX2RlZmF1bHQuYXBwbHkoIGV2ZW50UGF0aC5wb3AoKSwgZGF0YSApID09PSBmYWxzZQoJCQkJKSAmJiBhY2NlcHREYXRhKCBlbGVtICkKCQkJKSB7CgoJCQkJLy8gQ2FsbCBhIG5hdGl2ZSBET00gbWV0aG9kIG9uIHRoZSB0YXJnZXQgd2l0aCB0aGUgc2FtZSBuYW1lIG5hbWUgYXMgdGhlIGV2ZW50LgoJCQkJLy8gQ2FuJ3QgdXNlIGFuIC5pc0Z1bmN0aW9uKCkgY2hlY2sgaGVyZSBiZWNhdXNlIElFNi83IGZhaWxzIHRoYXQgdGVzdC4KCQkJCS8vIERvbid0IGRvIGRlZmF1bHQgYWN0aW9ucyBvbiB3aW5kb3csIHRoYXQncyB3aGVyZSBnbG9iYWwgdmFyaWFibGVzIGJlICgjNjE3MCkKCQkJCWlmICggb250eXBlICYmIGVsZW1bIHR5cGUgXSAmJiAhalF1ZXJ5LmlzV2luZG93KCBlbGVtICkgKSB7CgoJCQkJCS8vIERvbid0IHJlLXRyaWdnZXIgYW4gb25GT08gZXZlbnQgd2hlbiB3ZSBjYWxsIGl0cyBGT08oKSBtZXRob2QKCQkJCQl0bXAgPSBlbGVtWyBvbnR5cGUgXTsKCgkJCQkJaWYgKCB0bXAgKSB7CgkJCQkJCWVsZW1bIG9udHlwZSBdID0gbnVsbDsKCQkJCQl9CgoJCQkJCS8vIFByZXZlbnQgcmUtdHJpZ2dlcmluZyBvZiB0aGUgc2FtZSBldmVudCwgc2luY2Ugd2UgYWxyZWFkeSBidWJibGVkIGl0IGFib3ZlCgkJCQkJalF1ZXJ5LmV2ZW50LnRyaWdnZXJlZCA9IHR5cGU7CgkJCQkJdHJ5IHsKCQkJCQkJZWxlbVsgdHlwZSBdKCk7CgkJCQkJfSBjYXRjaCAoIGUgKSB7CgoJCQkJCQkvLyBJRTw5IGRpZXMgb24gZm9jdXMvYmx1ciB0byBoaWRkZW4gZWxlbWVudCAoIzE0ODYsIzEyNTE4KQoJCQkJCQkvLyBvbmx5IHJlcHJvZHVjaWJsZSBvbiB3aW5YUCBJRTggbmF0aXZlLCBub3QgSUU5IGluIElFOCBtb2RlCgkJCQkJfQoJCQkJCWpRdWVyeS5ldmVudC50cmlnZ2VyZWQgPSB1bmRlZmluZWQ7CgoJCQkJCWlmICggdG1wICkgewoJCQkJCQllbGVtWyBvbnR5cGUgXSA9IHRtcDsKCQkJCQl9CgkJCQl9CgkJCX0KCQl9CgoJCXJldHVybiBldmVudC5yZXN1bHQ7Cgl9LAoKCWRpc3BhdGNoOiBmdW5jdGlvbiggZXZlbnQgKSB7CgoJCS8vIE1ha2UgYSB3cml0YWJsZSBqUXVlcnkuRXZlbnQgZnJvbSB0aGUgbmF0aXZlIGV2ZW50IG9iamVjdAoJCWV2ZW50ID0galF1ZXJ5LmV2ZW50LmZpeCggZXZlbnQgKTsKCgkJdmFyIGksIGosIHJldCwgbWF0Y2hlZCwgaGFuZGxlT2JqLAoJCQloYW5kbGVyUXVldWUgPSBbXSwKCQkJYXJncyA9IHNsaWNlLmNhbGwoIGFyZ3VtZW50cyApLAoJCQloYW5kbGVycyA9ICggalF1ZXJ5Ll9kYXRhKCB0aGlzLCAiZXZlbnRzIiApIHx8IHt9IClbIGV2ZW50LnR5cGUgXSB8fCBbXSwKCQkJc3BlY2lhbCA9IGpRdWVyeS5ldmVudC5zcGVjaWFsWyBldmVudC50eXBlIF0gfHwge307CgoJCS8vIFVzZSB0aGUgZml4LWVkIGpRdWVyeS5FdmVudCByYXRoZXIgdGhhbiB0aGUgKHJlYWQtb25seSkgbmF0aXZlIGV2ZW50CgkJYXJnc1sgMCBdID0gZXZlbnQ7CgkJZXZlbnQuZGVsZWdhdGVUYXJnZXQgPSB0aGlzOwoKCQkvLyBDYWxsIHRoZSBwcmVEaXNwYXRjaCBob29rIGZvciB0aGUgbWFwcGVkIHR5cGUsIGFuZCBsZXQgaXQgYmFpbCBpZiBkZXNpcmVkCgkJaWYgKCBzcGVjaWFsLnByZURpc3BhdGNoICYmIHNwZWNpYWwucHJlRGlzcGF0Y2guY2FsbCggdGhpcywgZXZlbnQgKSA9PT0gZmFsc2UgKSB7CgkJCXJldHVybjsKCQl9CgoJCS8vIERldGVybWluZSBoYW5kbGVycwoJCWhhbmRsZXJRdWV1ZSA9IGpRdWVyeS5ldmVudC5oYW5kbGVycy5jYWxsKCB0aGlzLCBldmVudCwgaGFuZGxlcnMgKTsKCgkJLy8gUnVuIGRlbGVnYXRlcyBmaXJzdDsgdGhleSBtYXkgd2FudCB0byBzdG9wIHByb3BhZ2F0aW9uIGJlbmVhdGggdXMKCQlpID0gMDsKCQl3aGlsZSAoICggbWF0Y2hlZCA9IGhhbmRsZXJRdWV1ZVsgaSsrIF0gKSAmJiAhZXZlbnQuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSApIHsKCQkJZXZlbnQuY3VycmVudFRhcmdldCA9IG1hdGNoZWQuZWxlbTsKCgkJCWogPSAwOwoJCQl3aGlsZSAoICggaGFuZGxlT2JqID0gbWF0Y2hlZC5oYW5kbGVyc1sgaisrIF0gKSAmJgoJCQkJIWV2ZW50LmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKCkgKSB7CgoJCQkJLy8gVHJpZ2dlcmVkIGV2ZW50IG11c3QgZWl0aGVyIDEpIGhhdmUgbm8gbmFtZXNwYWNlLCBvciAyKSBoYXZlIG5hbWVzcGFjZShzKQoJCQkJLy8gYSBzdWJzZXQgb3IgZXF1YWwgdG8gdGhvc2UgaW4gdGhlIGJvdW5kIGV2ZW50IChib3RoIGNhbiBoYXZlIG5vIG5hbWVzcGFjZSkuCgkJCQlpZiAoICFldmVudC5ybmFtZXNwYWNlIHx8IGV2ZW50LnJuYW1lc3BhY2UudGVzdCggaGFuZGxlT2JqLm5hbWVzcGFjZSApICkgewoKCQkJCQlldmVudC5oYW5kbGVPYmogPSBoYW5kbGVPYmo7CgkJCQkJZXZlbnQuZGF0YSA9IGhhbmRsZU9iai5kYXRhOwoKCQkJCQlyZXQgPSAoICggalF1ZXJ5LmV2ZW50LnNwZWNpYWxbIGhhbmRsZU9iai5vcmlnVHlwZSBdIHx8IHt9ICkuaGFuZGxlIHx8CgkJCQkJCWhhbmRsZU9iai5oYW5kbGVyICkuYXBwbHkoIG1hdGNoZWQuZWxlbSwgYXJncyApOwoKCQkJCQlpZiAoIHJldCAhPT0gdW5kZWZpbmVkICkgewoJCQkJCQlpZiAoICggZXZlbnQucmVzdWx0ID0gcmV0ICkgPT09IGZhbHNlICkgewoJCQkJCQkJZXZlbnQucHJldmVudERlZmF1bHQoKTsKCQkJCQkJCWV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwoJCQkJCQl9CgkJCQkJfQoJCQkJfQoJCQl9CgkJfQoKCQkvLyBDYWxsIHRoZSBwb3N0RGlzcGF0Y2ggaG9vayBmb3IgdGhlIG1hcHBlZCB0eXBlCgkJaWYgKCBzcGVjaWFsLnBvc3REaXNwYXRjaCApIHsKCQkJc3BlY2lhbC5wb3N0RGlzcGF0Y2guY2FsbCggdGhpcywgZXZlbnQgKTsKCQl9CgoJCXJldHVybiBldmVudC5yZXN1bHQ7Cgl9LAoKCWhhbmRsZXJzOiBmdW5jdGlvbiggZXZlbnQsIGhhbmRsZXJzICkgewoJCXZhciBpLCBtYXRjaGVzLCBzZWwsIGhhbmRsZU9iaiwKCQkJaGFuZGxlclF1ZXVlID0gW10sCgkJCWRlbGVnYXRlQ291bnQgPSBoYW5kbGVycy5kZWxlZ2F0ZUNvdW50LAoJCQljdXIgPSBldmVudC50YXJnZXQ7CgoJCS8vIFN1cHBvcnQgKGF0IGxlYXN0KTogQ2hyb21lLCBJRTkKCQkvLyBGaW5kIGRlbGVnYXRlIGhhbmRsZXJzCgkJLy8gQmxhY2staG9sZSBTVkcgPHVzZT4gaW5zdGFuY2UgdHJlZXMgKCMxMzE4MCkKCQkvLwoJCS8vIFN1cHBvcnQ6IEZpcmVmb3g8PTQyKwoJCS8vIEF2b2lkIG5vbi1sZWZ0LWNsaWNrIGluIEZGIGJ1dCBkb24ndCBibG9jayBJRSByYWRpbyBldmVudHMgKCMzODYxLCBnaC0yMzQzKQoJCWlmICggZGVsZWdhdGVDb3VudCAmJiBjdXIubm9kZVR5cGUgJiYKCQkJKCBldmVudC50eXBlICE9PSAiY2xpY2siIHx8IGlzTmFOKCBldmVudC5idXR0b24gKSB8fCBldmVudC5idXR0b24gPCAxICkgKSB7CgoJCQkvKiBqc2hpbnQgZXFlcWVxOiBmYWxzZSAqLwoJCQlmb3IgKCA7IGN1ciAhPSB0aGlzOyBjdXIgPSBjdXIucGFyZW50Tm9kZSB8fCB0aGlzICkgewoJCQkJLyoganNoaW50IGVxZXFlcTogdHJ1ZSAqLwoKCQkJCS8vIERvbid0IGNoZWNrIG5vbi1lbGVtZW50cyAoIzEzMjA4KQoJCQkJLy8gRG9uJ3QgcHJvY2VzcyBjbGlja3Mgb24gZGlzYWJsZWQgZWxlbWVudHMgKCM2OTExLCAjODE2NSwgIzExMzgyLCAjMTE3NjQpCgkJCQlpZiAoIGN1ci5ub2RlVHlwZSA9PT0gMSAmJiAoIGN1ci5kaXNhYmxlZCAhPT0gdHJ1ZSB8fCBldmVudC50eXBlICE9PSAiY2xpY2siICkgKSB7CgkJCQkJbWF0Y2hlcyA9IFtdOwoJCQkJCWZvciAoIGkgPSAwOyBpIDwgZGVsZWdhdGVDb3VudDsgaSsrICkgewoJCQkJCQloYW5kbGVPYmogPSBoYW5kbGVyc1sgaSBdOwoKCQkJCQkJLy8gRG9uJ3QgY29uZmxpY3Qgd2l0aCBPYmplY3QucHJvdG90eXBlIHByb3BlcnRpZXMgKCMxMzIwMykKCQkJCQkJc2VsID0gaGFuZGxlT2JqLnNlbGVjdG9yICsgIiAiOwoKCQkJCQkJaWYgKCBtYXRjaGVzWyBzZWwgXSA9PT0gdW5kZWZpbmVkICkgewoJCQkJCQkJbWF0Y2hlc1sgc2VsIF0gPSBoYW5kbGVPYmoubmVlZHNDb250ZXh0ID8KCQkJCQkJCQlqUXVlcnkoIHNlbCwgdGhpcyApLmluZGV4KCBjdXIgKSA+IC0xIDoKCQkJCQkJCQlqUXVlcnkuZmluZCggc2VsLCB0aGlzLCBudWxsLCBbIGN1ciBdICkubGVuZ3RoOwoJCQkJCQl9CgkJCQkJCWlmICggbWF0Y2hlc1sgc2VsIF0gKSB7CgkJCQkJCQltYXRjaGVzLnB1c2goIGhhbmRsZU9iaiApOwoJCQkJCQl9CgkJCQkJfQoJCQkJCWlmICggbWF0Y2hlcy5sZW5ndGggKSB7CgkJCQkJCWhhbmRsZXJRdWV1ZS5wdXNoKCB7IGVsZW06IGN1ciwgaGFuZGxlcnM6IG1hdGNoZXMgfSApOwoJCQkJCX0KCQkJCX0KCQkJfQoJCX0KCgkJLy8gQWRkIHRoZSByZW1haW5pbmcgKGRpcmVjdGx5LWJvdW5kKSBoYW5kbGVycwoJCWlmICggZGVsZWdhdGVDb3VudCA8IGhhbmRsZXJzLmxlbmd0aCApIHsKCQkJaGFuZGxlclF1ZXVlLnB1c2goIHsgZWxlbTogdGhpcywgaGFuZGxlcnM6IGhhbmRsZXJzLnNsaWNlKCBkZWxlZ2F0ZUNvdW50ICkgfSApOwoJCX0KCgkJcmV0dXJuIGhhbmRsZXJRdWV1ZTsKCX0sCgoJZml4OiBmdW5jdGlvbiggZXZlbnQgKSB7CgkJaWYgKCBldmVudFsgalF1ZXJ5LmV4cGFuZG8gXSApIHsKCQkJcmV0dXJuIGV2ZW50OwoJCX0KCgkJLy8gQ3JlYXRlIGEgd3JpdGFibGUgY29weSBvZiB0aGUgZXZlbnQgb2JqZWN0IGFuZCBub3JtYWxpemUgc29tZSBwcm9wZXJ0aWVzCgkJdmFyIGksIHByb3AsIGNvcHksCgkJCXR5cGUgPSBldmVudC50eXBlLAoJCQlvcmlnaW5hbEV2ZW50ID0gZXZlbnQsCgkJCWZpeEhvb2sgPSB0aGlzLmZpeEhvb2tzWyB0eXBlIF07CgoJCWlmICggIWZpeEhvb2sgKSB7CgkJCXRoaXMuZml4SG9va3NbIHR5cGUgXSA9IGZpeEhvb2sgPQoJCQkJcm1vdXNlRXZlbnQudGVzdCggdHlwZSApID8gdGhpcy5tb3VzZUhvb2tzIDoKCQkJCXJrZXlFdmVudC50ZXN0KCB0eXBlICkgPyB0aGlzLmtleUhvb2tzIDoKCQkJCXt9OwoJCX0KCQljb3B5ID0gZml4SG9vay5wcm9wcyA/IHRoaXMucHJvcHMuY29uY2F0KCBmaXhIb29rLnByb3BzICkgOiB0aGlzLnByb3BzOwoKCQlldmVudCA9IG5ldyBqUXVlcnkuRXZlbnQoIG9yaWdpbmFsRXZlbnQgKTsKCgkJaSA9IGNvcHkubGVuZ3RoOwoJCXdoaWxlICggaS0tICkgewoJCQlwcm9wID0gY29weVsgaSBdOwoJCQlldmVudFsgcHJvcCBdID0gb3JpZ2luYWxFdmVudFsgcHJvcCBdOwoJCX0KCgkJLy8gU3VwcG9ydDogSUU8OQoJCS8vIEZpeCB0YXJnZXQgcHJvcGVydHkgKCMxOTI1KQoJCWlmICggIWV2ZW50LnRhcmdldCApIHsKCQkJZXZlbnQudGFyZ2V0ID0gb3JpZ2luYWxFdmVudC5zcmNFbGVtZW50IHx8IGRvY3VtZW50OwoJCX0KCgkJLy8gU3VwcG9ydDogU2FmYXJpIDYtOCsKCQkvLyBUYXJnZXQgc2hvdWxkIG5vdCBiZSBhIHRleHQgbm9kZSAoIzUwNCwgIzEzMTQzKQoJCWlmICggZXZlbnQudGFyZ2V0Lm5vZGVUeXBlID09PSAzICkgewoJCQlldmVudC50YXJnZXQgPSBldmVudC50YXJnZXQucGFyZW50Tm9kZTsKCQl9CgoJCS8vIFN1cHBvcnQ6IElFPDkKCQkvLyBGb3IgbW91c2Uva2V5IGV2ZW50cywgbWV0YUtleT09ZmFsc2UgaWYgaXQncyB1bmRlZmluZWQgKCMzMzY4LCAjMTEzMjgpCgkJZXZlbnQubWV0YUtleSA9ICEhZXZlbnQubWV0YUtleTsKCgkJcmV0dXJuIGZpeEhvb2suZmlsdGVyID8gZml4SG9vay5maWx0ZXIoIGV2ZW50LCBvcmlnaW5hbEV2ZW50ICkgOiBldmVudDsKCX0sCgoJLy8gSW5jbHVkZXMgc29tZSBldmVudCBwcm9wcyBzaGFyZWQgYnkgS2V5RXZlbnQgYW5kIE1vdXNlRXZlbnQKCXByb3BzOiAoICJhbHRLZXkgYnViYmxlcyBjYW5jZWxhYmxlIGN0cmxLZXkgY3VycmVudFRhcmdldCBkZXRhaWwgZXZlbnRQaGFzZSAiICsKCQkibWV0YUtleSByZWxhdGVkVGFyZ2V0IHNoaWZ0S2V5IHRhcmdldCB0aW1lU3RhbXAgdmlldyB3aGljaCIgKS5zcGxpdCggIiAiICksCgoJZml4SG9va3M6IHt9LAoKCWtleUhvb2tzOiB7CgkJcHJvcHM6ICJjaGFyIGNoYXJDb2RlIGtleSBrZXlDb2RlIi5zcGxpdCggIiAiICksCgkJZmlsdGVyOiBmdW5jdGlvbiggZXZlbnQsIG9yaWdpbmFsICkgewoKCQkJLy8gQWRkIHdoaWNoIGZvciBrZXkgZXZlbnRzCgkJCWlmICggZXZlbnQud2hpY2ggPT0gbnVsbCApIHsKCQkJCWV2ZW50LndoaWNoID0gb3JpZ2luYWwuY2hhckNvZGUgIT0gbnVsbCA/IG9yaWdpbmFsLmNoYXJDb2RlIDogb3JpZ2luYWwua2V5Q29kZTsKCQkJfQoKCQkJcmV0dXJuIGV2ZW50OwoJCX0KCX0sCgoJbW91c2VIb29rczogewoJCXByb3BzOiAoICJidXR0b24gYnV0dG9ucyBjbGllbnRYIGNsaWVudFkgZnJvbUVsZW1lbnQgb2Zmc2V0WCBvZmZzZXRZICIgKwoJCQkicGFnZVggcGFnZVkgc2NyZWVuWCBzY3JlZW5ZIHRvRWxlbWVudCIgKS5zcGxpdCggIiAiICksCgkJZmlsdGVyOiBmdW5jdGlvbiggZXZlbnQsIG9yaWdpbmFsICkgewoJCQl2YXIgYm9keSwgZXZlbnREb2MsIGRvYywKCQkJCWJ1dHRvbiA9IG9yaWdpbmFsLmJ1dHRvbiwKCQkJCWZyb21FbGVtZW50ID0gb3JpZ2luYWwuZnJvbUVsZW1lbnQ7CgoJCQkvLyBDYWxjdWxhdGUgcGFnZVgvWSBpZiBtaXNzaW5nIGFuZCBjbGllbnRYL1kgYXZhaWxhYmxlCgkJCWlmICggZXZlbnQucGFnZVggPT0gbnVsbCAmJiBvcmlnaW5hbC5jbGllbnRYICE9IG51bGwgKSB7CgkJCQlldmVudERvYyA9IGV2ZW50LnRhcmdldC5vd25lckRvY3VtZW50IHx8IGRvY3VtZW50OwoJCQkJZG9jID0gZXZlbnREb2MuZG9jdW1lbnRFbGVtZW50OwoJCQkJYm9keSA9IGV2ZW50RG9jLmJvZHk7CgoJCQkJZXZlbnQucGFnZVggPSBvcmlnaW5hbC5jbGllbnRYICsKCQkJCQkoIGRvYyAmJiBkb2Muc2Nyb2xsTGVmdCB8fCBib2R5ICYmIGJvZHkuc2Nyb2xsTGVmdCB8fCAwICkgLQoJCQkJCSggZG9jICYmIGRvYy5jbGllbnRMZWZ0IHx8IGJvZHkgJiYgYm9keS5jbGllbnRMZWZ0IHx8IDAgKTsKCQkJCWV2ZW50LnBhZ2VZID0gb3JpZ2luYWwuY2xpZW50WSArCgkJCQkJKCBkb2MgJiYgZG9jLnNjcm9sbFRvcCAgfHwgYm9keSAmJiBib2R5LnNjcm9sbFRvcCAgfHwgMCApIC0KCQkJCQkoIGRvYyAmJiBkb2MuY2xpZW50VG9wICB8fCBib2R5ICYmIGJvZHkuY2xpZW50VG9wICB8fCAwICk7CgkJCX0KCgkJCS8vIEFkZCByZWxhdGVkVGFyZ2V0LCBpZiBuZWNlc3NhcnkKCQkJaWYgKCAhZXZlbnQucmVsYXRlZFRhcmdldCAmJiBmcm9tRWxlbWVudCApIHsKCQkJCWV2ZW50LnJlbGF0ZWRUYXJnZXQgPSBmcm9tRWxlbWVudCA9PT0gZXZlbnQudGFyZ2V0ID8KCQkJCQlvcmlnaW5hbC50b0VsZW1lbnQgOgoJCQkJCWZyb21FbGVtZW50OwoJCQl9CgoJCQkvLyBBZGQgd2hpY2ggZm9yIGNsaWNrOiAxID09PSBsZWZ0OyAyID09PSBtaWRkbGU7IDMgPT09IHJpZ2h0CgkJCS8vIE5vdGU6IGJ1dHRvbiBpcyBub3Qgbm9ybWFsaXplZCwgc28gZG9uJ3QgdXNlIGl0CgkJCWlmICggIWV2ZW50LndoaWNoICYmIGJ1dHRvbiAhPT0gdW5kZWZpbmVkICkgewoJCQkJZXZlbnQud2hpY2ggPSAoIGJ1dHRvbiAmIDEgPyAxIDogKCBidXR0b24gJiAyID8gMyA6ICggYnV0dG9uICYgNCA/IDIgOiAwICkgKSApOwoJCQl9CgoJCQlyZXR1cm4gZXZlbnQ7CgkJfQoJfSwKCglzcGVjaWFsOiB7CgkJbG9hZDogewoKCQkJLy8gUHJldmVudCB0cmlnZ2VyZWQgaW1hZ2UubG9hZCBldmVudHMgZnJvbSBidWJibGluZyB0byB3aW5kb3cubG9hZAoJCQlub0J1YmJsZTogdHJ1ZQoJCX0sCgkJZm9jdXM6IHsKCgkJCS8vIEZpcmUgbmF0aXZlIGV2ZW50IGlmIHBvc3NpYmxlIHNvIGJsdXIvZm9jdXMgc2VxdWVuY2UgaXMgY29ycmVjdAoJCQl0cmlnZ2VyOiBmdW5jdGlvbigpIHsKCQkJCWlmICggdGhpcyAhPT0gc2FmZUFjdGl2ZUVsZW1lbnQoKSAmJiB0aGlzLmZvY3VzICkgewoJCQkJCXRyeSB7CgkJCQkJCXRoaXMuZm9jdXMoKTsKCQkJCQkJcmV0dXJuIGZhbHNlOwoJCQkJCX0gY2F0Y2ggKCBlICkgewoKCQkJCQkJLy8gU3VwcG9ydDogSUU8OQoJCQkJCQkvLyBJZiB3ZSBlcnJvciBvbiBmb2N1cyB0byBoaWRkZW4gZWxlbWVudCAoIzE0ODYsICMxMjUxOCksCgkJCQkJCS8vIGxldCAudHJpZ2dlcigpIHJ1biB0aGUgaGFuZGxlcnMKCQkJCQl9CgkJCQl9CgkJCX0sCgkJCWRlbGVnYXRlVHlwZTogImZvY3VzaW4iCgkJfSwKCQlibHVyOiB7CgkJCXRyaWdnZXI6IGZ1bmN0aW9uKCkgewoJCQkJaWYgKCB0aGlzID09PSBzYWZlQWN0aXZlRWxlbWVudCgpICYmIHRoaXMuYmx1ciApIHsKCQkJCQl0aGlzLmJsdXIoKTsKCQkJCQlyZXR1cm4gZmFsc2U7CgkJCQl9CgkJCX0sCgkJCWRlbGVnYXRlVHlwZTogImZvY3Vzb3V0IgoJCX0sCgkJY2xpY2s6IHsKCgkJCS8vIEZvciBjaGVja2JveCwgZmlyZSBuYXRpdmUgZXZlbnQgc28gY2hlY2tlZCBzdGF0ZSB3aWxsIGJlIHJpZ2h0CgkJCXRyaWdnZXI6IGZ1bmN0aW9uKCkgewoJCQkJaWYgKCBqUXVlcnkubm9kZU5hbWUoIHRoaXMsICJpbnB1dCIgKSAmJiB0aGlzLnR5cGUgPT09ICJjaGVja2JveCIgJiYgdGhpcy5jbGljayApIHsKCQkJCQl0aGlzLmNsaWNrKCk7CgkJCQkJcmV0dXJuIGZhbHNlOwoJCQkJfQoJCQl9LAoKCQkJLy8gRm9yIGNyb3NzLWJyb3dzZXIgY29uc2lzdGVuY3ksIGRvbid0IGZpcmUgbmF0aXZlIC5jbGljaygpIG9uIGxpbmtzCgkJCV9kZWZhdWx0OiBmdW5jdGlvbiggZXZlbnQgKSB7CgkJCQlyZXR1cm4galF1ZXJ5Lm5vZGVOYW1lKCBldmVudC50YXJnZXQsICJhIiApOwoJCQl9CgkJfSwKCgkJYmVmb3JldW5sb2FkOiB7CgkJCXBvc3REaXNwYXRjaDogZnVuY3Rpb24oIGV2ZW50ICkgewoKCQkJCS8vIFN1cHBvcnQ6IEZpcmVmb3ggMjArCgkJCQkvLyBGaXJlZm94IGRvZXNuJ3QgYWxlcnQgaWYgdGhlIHJldHVyblZhbHVlIGZpZWxkIGlzIG5vdCBzZXQuCgkJCQlpZiAoIGV2ZW50LnJlc3VsdCAhPT0gdW5kZWZpbmVkICYmIGV2ZW50Lm9yaWdpbmFsRXZlbnQgKSB7CgkJCQkJZXZlbnQub3JpZ2luYWxFdmVudC5yZXR1cm5WYWx1ZSA9IGV2ZW50LnJlc3VsdDsKCQkJCX0KCQkJfQoJCX0KCX0sCgoJLy8gUGlnZ3liYWNrIG9uIGEgZG9ub3IgZXZlbnQgdG8gc2ltdWxhdGUgYSBkaWZmZXJlbnQgb25lCglzaW11bGF0ZTogZnVuY3Rpb24oIHR5cGUsIGVsZW0sIGV2ZW50ICkgewoJCXZhciBlID0galF1ZXJ5LmV4dGVuZCgKCQkJbmV3IGpRdWVyeS5FdmVudCgpLAoJCQlldmVudCwKCQkJewoJCQkJdHlwZTogdHlwZSwKCQkJCWlzU2ltdWxhdGVkOiB0cnVlCgoJCQkJLy8gUHJldmlvdXNseSwgYG9yaWdpbmFsRXZlbnQ6IHt9YCB3YXMgc2V0IGhlcmUsIHNvIHN0b3BQcm9wYWdhdGlvbiBjYWxsCgkJCQkvLyB3b3VsZCBub3QgYmUgdHJpZ2dlcmVkIG9uIGRvbm9yIGV2ZW50LCBzaW5jZSBpbiBvdXIgb3duCgkJCQkvLyBqUXVlcnkuZXZlbnQuc3RvcFByb3BhZ2F0aW9uIGZ1bmN0aW9uIHdlIGhhZCBhIGNoZWNrIGZvciBleGlzdGVuY2Ugb2YKCQkJCS8vIG9yaWdpbmFsRXZlbnQuc3RvcFByb3BhZ2F0aW9uIG1ldGhvZCwgc28sIGNvbnNlcXVlbnRseSBpdCB3b3VsZCBiZSBhIG5vb3AuCgkJCQkvLwoJCQkJLy8gR3VhcmQgZm9yIHNpbXVsYXRlZCBldmVudHMgd2FzIG1vdmVkIHRvIGpRdWVyeS5ldmVudC5zdG9wUHJvcGFnYXRpb24gZnVuY3Rpb24KCQkJCS8vIHNpbmNlIGBvcmlnaW5hbEV2ZW50YCBzaG91bGQgcG9pbnQgdG8gdGhlIG9yaWdpbmFsIGV2ZW50IGZvciB0aGUKCQkJCS8vIGNvbnN0YW5jeSB3aXRoIG90aGVyIGV2ZW50cyBhbmQgZm9yIG1vcmUgZm9jdXNlZCBsb2dpYwoJCQl9CgkJKTsKCgkJalF1ZXJ5LmV2ZW50LnRyaWdnZXIoIGUsIG51bGwsIGVsZW0gKTsKCgkJaWYgKCBlLmlzRGVmYXVsdFByZXZlbnRlZCgpICkgewoJCQlldmVudC5wcmV2ZW50RGVmYXVsdCgpOwoJCX0KCX0KfTsKCmpRdWVyeS5yZW1vdmVFdmVudCA9IGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIgPwoJZnVuY3Rpb24oIGVsZW0sIHR5cGUsIGhhbmRsZSApIHsKCgkJLy8gVGhpcyAiaWYiIGlzIG5lZWRlZCBmb3IgcGxhaW4gb2JqZWN0cwoJCWlmICggZWxlbS5yZW1vdmVFdmVudExpc3RlbmVyICkgewoJCQllbGVtLnJlbW92ZUV2ZW50TGlzdGVuZXIoIHR5cGUsIGhhbmRsZSApOwoJCX0KCX0gOgoJZnVuY3Rpb24oIGVsZW0sIHR5cGUsIGhhbmRsZSApIHsKCQl2YXIgbmFtZSA9ICJvbiIgKyB0eXBlOwoKCQlpZiAoIGVsZW0uZGV0YWNoRXZlbnQgKSB7CgoJCQkvLyAjODU0NSwgIzcwNTQsIHByZXZlbnRpbmcgbWVtb3J5IGxlYWtzIGZvciBjdXN0b20gZXZlbnRzIGluIElFNi04CgkJCS8vIGRldGFjaEV2ZW50IG5lZWRlZCBwcm9wZXJ0eSBvbiBlbGVtZW50LCBieSBuYW1lIG9mIHRoYXQgZXZlbnQsCgkJCS8vIHRvIHByb3Blcmx5IGV4cG9zZSBpdCB0byBHQwoJCQlpZiAoIHR5cGVvZiBlbGVtWyBuYW1lIF0gPT09ICJ1bmRlZmluZWQiICkgewoJCQkJZWxlbVsgbmFtZSBdID0gbnVsbDsKCQkJfQoKCQkJZWxlbS5kZXRhY2hFdmVudCggbmFtZSwgaGFuZGxlICk7CgkJfQoJfTsKCmpRdWVyeS5FdmVudCA9IGZ1bmN0aW9uKCBzcmMsIHByb3BzICkgewoKCS8vIEFsbG93IGluc3RhbnRpYXRpb24gd2l0aG91dCB0aGUgJ25ldycga2V5d29yZAoJaWYgKCAhKCB0aGlzIGluc3RhbmNlb2YgalF1ZXJ5LkV2ZW50ICkgKSB7CgkJcmV0dXJuIG5ldyBqUXVlcnkuRXZlbnQoIHNyYywgcHJvcHMgKTsKCX0KCgkvLyBFdmVudCBvYmplY3QKCWlmICggc3JjICYmIHNyYy50eXBlICkgewoJCXRoaXMub3JpZ2luYWxFdmVudCA9IHNyYzsKCQl0aGlzLnR5cGUgPSBzcmMudHlwZTsKCgkJLy8gRXZlbnRzIGJ1YmJsaW5nIHVwIHRoZSBkb2N1bWVudCBtYXkgaGF2ZSBiZWVuIG1hcmtlZCBhcyBwcmV2ZW50ZWQKCQkvLyBieSBhIGhhbmRsZXIgbG93ZXIgZG93biB0aGUgdHJlZTsgcmVmbGVjdCB0aGUgY29ycmVjdCB2YWx1ZS4KCQl0aGlzLmlzRGVmYXVsdFByZXZlbnRlZCA9IHNyYy5kZWZhdWx0UHJldmVudGVkIHx8CgkJCQlzcmMuZGVmYXVsdFByZXZlbnRlZCA9PT0gdW5kZWZpbmVkICYmCgoJCQkJLy8gU3VwcG9ydDogSUUgPCA5LCBBbmRyb2lkIDwgNC4wCgkJCQlzcmMucmV0dXJuVmFsdWUgPT09IGZhbHNlID8KCQkJcmV0dXJuVHJ1ZSA6CgkJCXJldHVybkZhbHNlOwoKCS8vIEV2ZW50IHR5cGUKCX0gZWxzZSB7CgkJdGhpcy50eXBlID0gc3JjOwoJfQoKCS8vIFB1dCBleHBsaWNpdGx5IHByb3ZpZGVkIHByb3BlcnRpZXMgb250byB0aGUgZXZlbnQgb2JqZWN0CglpZiAoIHByb3BzICkgewoJCWpRdWVyeS5leHRlbmQoIHRoaXMsIHByb3BzICk7Cgl9CgoJLy8gQ3JlYXRlIGEgdGltZXN0YW1wIGlmIGluY29taW5nIGV2ZW50IGRvZXNuJ3QgaGF2ZSBvbmUKCXRoaXMudGltZVN0YW1wID0gc3JjICYmIHNyYy50aW1lU3RhbXAgfHwgalF1ZXJ5Lm5vdygpOwoKCS8vIE1hcmsgaXQgYXMgZml4ZWQKCXRoaXNbIGpRdWVyeS5leHBhbmRvIF0gPSB0cnVlOwp9OwoKLy8galF1ZXJ5LkV2ZW50IGlzIGJhc2VkIG9uIERPTTMgRXZlbnRzIGFzIHNwZWNpZmllZCBieSB0aGUgRUNNQVNjcmlwdCBMYW5ndWFnZSBCaW5kaW5nCi8vIGh0dHA6Ly93d3cudzMub3JnL1RSLzIwMDMvV0QtRE9NLUxldmVsLTMtRXZlbnRzLTIwMDMwMzMxL2VjbWEtc2NyaXB0LWJpbmRpbmcuaHRtbApqUXVlcnkuRXZlbnQucHJvdG90eXBlID0gewoJY29uc3RydWN0b3I6IGpRdWVyeS5FdmVudCwKCWlzRGVmYXVsdFByZXZlbnRlZDogcmV0dXJuRmFsc2UsCglpc1Byb3BhZ2F0aW9uU3RvcHBlZDogcmV0dXJuRmFsc2UsCglpc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZDogcmV0dXJuRmFsc2UsCgoJcHJldmVudERlZmF1bHQ6IGZ1bmN0aW9uKCkgewoJCXZhciBlID0gdGhpcy5vcmlnaW5hbEV2ZW50OwoKCQl0aGlzLmlzRGVmYXVsdFByZXZlbnRlZCA9IHJldHVyblRydWU7CgkJaWYgKCAhZSApIHsKCQkJcmV0dXJuOwoJCX0KCgkJLy8gSWYgcHJldmVudERlZmF1bHQgZXhpc3RzLCBydW4gaXQgb24gdGhlIG9yaWdpbmFsIGV2ZW50CgkJaWYgKCBlLnByZXZlbnREZWZhdWx0ICkgewoJCQllLnByZXZlbnREZWZhdWx0KCk7CgoJCS8vIFN1cHBvcnQ6IElFCgkJLy8gT3RoZXJ3aXNlIHNldCB0aGUgcmV0dXJuVmFsdWUgcHJvcGVydHkgb2YgdGhlIG9yaWdpbmFsIGV2ZW50IHRvIGZhbHNlCgkJfSBlbHNlIHsKCQkJZS5yZXR1cm5WYWx1ZSA9IGZhbHNlOwoJCX0KCX0sCglzdG9wUHJvcGFnYXRpb246IGZ1bmN0aW9uKCkgewoJCXZhciBlID0gdGhpcy5vcmlnaW5hbEV2ZW50OwoKCQl0aGlzLmlzUHJvcGFnYXRpb25TdG9wcGVkID0gcmV0dXJuVHJ1ZTsKCgkJaWYgKCAhZSB8fCB0aGlzLmlzU2ltdWxhdGVkICkgewoJCQlyZXR1cm47CgkJfQoKCQkvLyBJZiBzdG9wUHJvcGFnYXRpb24gZXhpc3RzLCBydW4gaXQgb24gdGhlIG9yaWdpbmFsIGV2ZW50CgkJaWYgKCBlLnN0b3BQcm9wYWdhdGlvbiApIHsKCQkJZS5zdG9wUHJvcGFnYXRpb24oKTsKCQl9CgoJCS8vIFN1cHBvcnQ6IElFCgkJLy8gU2V0IHRoZSBjYW5jZWxCdWJibGUgcHJvcGVydHkgb2YgdGhlIG9yaWdpbmFsIGV2ZW50IHRvIHRydWUKCQllLmNhbmNlbEJ1YmJsZSA9IHRydWU7Cgl9LAoJc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uOiBmdW5jdGlvbigpIHsKCQl2YXIgZSA9IHRoaXMub3JpZ2luYWxFdmVudDsKCgkJdGhpcy5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCA9IHJldHVyblRydWU7CgoJCWlmICggZSAmJiBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbiApIHsKCQkJZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTsKCQl9CgoJCXRoaXMuc3RvcFByb3BhZ2F0aW9uKCk7Cgl9Cn07CgovLyBDcmVhdGUgbW91c2VlbnRlci9sZWF2ZSBldmVudHMgdXNpbmcgbW91c2VvdmVyL291dCBhbmQgZXZlbnQtdGltZSBjaGVja3MKLy8gc28gdGhhdCBldmVudCBkZWxlZ2F0aW9uIHdvcmtzIGluIGpRdWVyeS4KLy8gRG8gdGhlIHNhbWUgZm9yIHBvaW50ZXJlbnRlci9wb2ludGVybGVhdmUgYW5kIHBvaW50ZXJvdmVyL3BvaW50ZXJvdXQKLy8KLy8gU3VwcG9ydDogU2FmYXJpIDcgb25seQovLyBTYWZhcmkgc2VuZHMgbW91c2VlbnRlciB0b28gb2Z0ZW47IHNlZToKLy8gaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTQ3MDI1OAovLyBmb3IgdGhlIGRlc2NyaXB0aW9uIG9mIHRoZSBidWcgKGl0IGV4aXN0ZWQgaW4gb2xkZXIgQ2hyb21lIHZlcnNpb25zIGFzIHdlbGwpLgpqUXVlcnkuZWFjaCggewoJbW91c2VlbnRlcjogIm1vdXNlb3ZlciIsCgltb3VzZWxlYXZlOiAibW91c2VvdXQiLAoJcG9pbnRlcmVudGVyOiAicG9pbnRlcm92ZXIiLAoJcG9pbnRlcmxlYXZlOiAicG9pbnRlcm91dCIKfSwgZnVuY3Rpb24oIG9yaWcsIGZpeCApIHsKCWpRdWVyeS5ldmVudC5zcGVjaWFsWyBvcmlnIF0gPSB7CgkJZGVsZWdhdGVUeXBlOiBmaXgsCgkJYmluZFR5cGU6IGZpeCwKCgkJaGFuZGxlOiBmdW5jdGlvbiggZXZlbnQgKSB7CgkJCXZhciByZXQsCgkJCQl0YXJnZXQgPSB0aGlzLAoJCQkJcmVsYXRlZCA9IGV2ZW50LnJlbGF0ZWRUYXJnZXQsCgkJCQloYW5kbGVPYmogPSBldmVudC5oYW5kbGVPYmo7CgoJCQkvLyBGb3IgbW91c2VlbnRlci9sZWF2ZSBjYWxsIHRoZSBoYW5kbGVyIGlmIHJlbGF0ZWQgaXMgb3V0c2lkZSB0aGUgdGFyZ2V0LgoJCQkvLyBOQjogTm8gcmVsYXRlZFRhcmdldCBpZiB0aGUgbW91c2UgbGVmdC9lbnRlcmVkIHRoZSBicm93c2VyIHdpbmRvdwoJCQlpZiAoICFyZWxhdGVkIHx8ICggcmVsYXRlZCAhPT0gdGFyZ2V0ICYmICFqUXVlcnkuY29udGFpbnMoIHRhcmdldCwgcmVsYXRlZCApICkgKSB7CgkJCQlldmVudC50eXBlID0gaGFuZGxlT2JqLm9yaWdUeXBlOwoJCQkJcmV0ID0gaGFuZGxlT2JqLmhhbmRsZXIuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApOwoJCQkJZXZlbnQudHlwZSA9IGZpeDsKCQkJfQoJCQlyZXR1cm4gcmV0OwoJCX0KCX07Cn0gKTsKCi8vIElFIHN1Ym1pdCBkZWxlZ2F0aW9uCmlmICggIXN1cHBvcnQuc3VibWl0ICkgewoKCWpRdWVyeS5ldmVudC5zcGVjaWFsLnN1Ym1pdCA9IHsKCQlzZXR1cDogZnVuY3Rpb24oKSB7CgoJCQkvLyBPbmx5IG5lZWQgdGhpcyBmb3IgZGVsZWdhdGVkIGZvcm0gc3VibWl0IGV2ZW50cwoJCQlpZiAoIGpRdWVyeS5ub2RlTmFtZSggdGhpcywgImZvcm0iICkgKSB7CgkJCQlyZXR1cm4gZmFsc2U7CgkJCX0KCgkJCS8vIExhenktYWRkIGEgc3VibWl0IGhhbmRsZXIgd2hlbiBhIGRlc2NlbmRhbnQgZm9ybSBtYXkgcG90ZW50aWFsbHkgYmUgc3VibWl0dGVkCgkJCWpRdWVyeS5ldmVudC5hZGQoIHRoaXMsICJjbGljay5fc3VibWl0IGtleXByZXNzLl9zdWJtaXQiLCBmdW5jdGlvbiggZSApIHsKCgkJCQkvLyBOb2RlIG5hbWUgY2hlY2sgYXZvaWRzIGEgVk1MLXJlbGF0ZWQgY3Jhc2ggaW4gSUUgKCM5ODA3KQoJCQkJdmFyIGVsZW0gPSBlLnRhcmdldCwKCQkJCQlmb3JtID0galF1ZXJ5Lm5vZGVOYW1lKCBlbGVtLCAiaW5wdXQiICkgfHwgalF1ZXJ5Lm5vZGVOYW1lKCBlbGVtLCAiYnV0dG9uIiApID8KCgkJCQkJCS8vIFN1cHBvcnQ6IElFIDw9OAoJCQkJCQkvLyBXZSB1c2UgalF1ZXJ5LnByb3AgaW5zdGVhZCBvZiBlbGVtLmZvcm0KCQkJCQkJLy8gdG8gYWxsb3cgZml4aW5nIHRoZSBJRTggZGVsZWdhdGVkIHN1Ym1pdCBpc3N1ZSAoZ2gtMjMzMikKCQkJCQkJLy8gYnkgM3JkIHBhcnR5IHBvbHlmaWxscy93b3JrYXJvdW5kcy4KCQkJCQkJalF1ZXJ5LnByb3AoIGVsZW0sICJmb3JtIiApIDoKCQkJCQkJdW5kZWZpbmVkOwoKCQkJCWlmICggZm9ybSAmJiAhalF1ZXJ5Ll9kYXRhKCBmb3JtLCAic3VibWl0IiApICkgewoJCQkJCWpRdWVyeS5ldmVudC5hZGQoIGZvcm0sICJzdWJtaXQuX3N1Ym1pdCIsIGZ1bmN0aW9uKCBldmVudCApIHsKCQkJCQkJZXZlbnQuX3N1Ym1pdEJ1YmJsZSA9IHRydWU7CgkJCQkJfSApOwoJCQkJCWpRdWVyeS5fZGF0YSggZm9ybSwgInN1Ym1pdCIsIHRydWUgKTsKCQkJCX0KCQkJfSApOwoKCQkJLy8gcmV0dXJuIHVuZGVmaW5lZCBzaW5jZSB3ZSBkb24ndCBuZWVkIGFuIGV2ZW50IGxpc3RlbmVyCgkJfSwKCgkJcG9zdERpc3BhdGNoOiBmdW5jdGlvbiggZXZlbnQgKSB7CgoJCQkvLyBJZiBmb3JtIHdhcyBzdWJtaXR0ZWQgYnkgdGhlIHVzZXIsIGJ1YmJsZSB0aGUgZXZlbnQgdXAgdGhlIHRyZWUKCQkJaWYgKCBldmVudC5fc3VibWl0QnViYmxlICkgewoJCQkJZGVsZXRlIGV2ZW50Ll9zdWJtaXRCdWJibGU7CgkJCQlpZiAoIHRoaXMucGFyZW50Tm9kZSAmJiAhZXZlbnQuaXNUcmlnZ2VyICkgewoJCQkJCWpRdWVyeS5ldmVudC5zaW11bGF0ZSggInN1Ym1pdCIsIHRoaXMucGFyZW50Tm9kZSwgZXZlbnQgKTsKCQkJCX0KCQkJfQoJCX0sCgoJCXRlYXJkb3duOiBmdW5jdGlvbigpIHsKCgkJCS8vIE9ubHkgbmVlZCB0aGlzIGZvciBkZWxlZ2F0ZWQgZm9ybSBzdWJtaXQgZXZlbnRzCgkJCWlmICggalF1ZXJ5Lm5vZGVOYW1lKCB0aGlzLCAiZm9ybSIgKSApIHsKCQkJCXJldHVybiBmYWxzZTsKCQkJfQoKCQkJLy8gUmVtb3ZlIGRlbGVnYXRlZCBoYW5kbGVyczsgY2xlYW5EYXRhIGV2ZW50dWFsbHkgcmVhcHMgc3VibWl0IGhhbmRsZXJzIGF0dGFjaGVkIGFib3ZlCgkJCWpRdWVyeS5ldmVudC5yZW1vdmUoIHRoaXMsICIuX3N1Ym1pdCIgKTsKCQl9Cgl9Owp9CgovLyBJRSBjaGFuZ2UgZGVsZWdhdGlvbiBhbmQgY2hlY2tib3gvcmFkaW8gZml4CmlmICggIXN1cHBvcnQuY2hhbmdlICkgewoKCWpRdWVyeS5ldmVudC5zcGVjaWFsLmNoYW5nZSA9IHsKCgkJc2V0dXA6IGZ1bmN0aW9uKCkgewoKCQkJaWYgKCByZm9ybUVsZW1zLnRlc3QoIHRoaXMubm9kZU5hbWUgKSApIHsKCgkJCQkvLyBJRSBkb2Vzbid0IGZpcmUgY2hhbmdlIG9uIGEgY2hlY2svcmFkaW8gdW50aWwgYmx1cjsgdHJpZ2dlciBpdCBvbiBjbGljawoJCQkJLy8gYWZ0ZXIgYSBwcm9wZXJ0eWNoYW5nZS4gRWF0IHRoZSBibHVyLWNoYW5nZSBpbiBzcGVjaWFsLmNoYW5nZS5oYW5kbGUuCgkJCQkvLyBUaGlzIHN0aWxsIGZpcmVzIG9uY2hhbmdlIGEgc2Vjb25kIHRpbWUgZm9yIGNoZWNrL3JhZGlvIGFmdGVyIGJsdXIuCgkJCQlpZiAoIHRoaXMudHlwZSA9PT0gImNoZWNrYm94IiB8fCB0aGlzLnR5cGUgPT09ICJyYWRpbyIgKSB7CgkJCQkJalF1ZXJ5LmV2ZW50LmFkZCggdGhpcywgInByb3BlcnR5Y2hhbmdlLl9jaGFuZ2UiLCBmdW5jdGlvbiggZXZlbnQgKSB7CgkJCQkJCWlmICggZXZlbnQub3JpZ2luYWxFdmVudC5wcm9wZXJ0eU5hbWUgPT09ICJjaGVja2VkIiApIHsKCQkJCQkJCXRoaXMuX2p1c3RDaGFuZ2VkID0gdHJ1ZTsKCQkJCQkJfQoJCQkJCX0gKTsKCQkJCQlqUXVlcnkuZXZlbnQuYWRkKCB0aGlzLCAiY2xpY2suX2NoYW5nZSIsIGZ1bmN0aW9uKCBldmVudCApIHsKCQkJCQkJaWYgKCB0aGlzLl9qdXN0Q2hhbmdlZCAmJiAhZXZlbnQuaXNUcmlnZ2VyICkgewoJCQkJCQkJdGhpcy5fanVzdENoYW5nZWQgPSBmYWxzZTsKCQkJCQkJfQoKCQkJCQkJLy8gQWxsb3cgdHJpZ2dlcmVkLCBzaW11bGF0ZWQgY2hhbmdlIGV2ZW50cyAoIzExNTAwKQoJCQkJCQlqUXVlcnkuZXZlbnQuc2ltdWxhdGUoICJjaGFuZ2UiLCB0aGlzLCBldmVudCApOwoJCQkJCX0gKTsKCQkJCX0KCQkJCXJldHVybiBmYWxzZTsKCQkJfQoKCQkJLy8gRGVsZWdhdGVkIGV2ZW50OyBsYXp5LWFkZCBhIGNoYW5nZSBoYW5kbGVyIG9uIGRlc2NlbmRhbnQgaW5wdXRzCgkJCWpRdWVyeS5ldmVudC5hZGQoIHRoaXMsICJiZWZvcmVhY3RpdmF0ZS5fY2hhbmdlIiwgZnVuY3Rpb24oIGUgKSB7CgkJCQl2YXIgZWxlbSA9IGUudGFyZ2V0OwoKCQkJCWlmICggcmZvcm1FbGVtcy50ZXN0KCBlbGVtLm5vZGVOYW1lICkgJiYgIWpRdWVyeS5fZGF0YSggZWxlbSwgImNoYW5nZSIgKSApIHsKCQkJCQlqUXVlcnkuZXZlbnQuYWRkKCBlbGVtLCAiY2hhbmdlLl9jaGFuZ2UiLCBmdW5jdGlvbiggZXZlbnQgKSB7CgkJCQkJCWlmICggdGhpcy5wYXJlbnROb2RlICYmICFldmVudC5pc1NpbXVsYXRlZCAmJiAhZXZlbnQuaXNUcmlnZ2VyICkgewoJCQkJCQkJalF1ZXJ5LmV2ZW50LnNpbXVsYXRlKCAiY2hhbmdlIiwgdGhpcy5wYXJlbnROb2RlLCBldmVudCApOwoJCQkJCQl9CgkJCQkJfSApOwoJCQkJCWpRdWVyeS5fZGF0YSggZWxlbSwgImNoYW5nZSIsIHRydWUgKTsKCQkJCX0KCQkJfSApOwoJCX0sCgoJCWhhbmRsZTogZnVuY3Rpb24oIGV2ZW50ICkgewoJCQl2YXIgZWxlbSA9IGV2ZW50LnRhcmdldDsKCgkJCS8vIFN3YWxsb3cgbmF0aXZlIGNoYW5nZSBldmVudHMgZnJvbSBjaGVja2JveC9yYWRpbywgd2UgYWxyZWFkeSB0cmlnZ2VyZWQgdGhlbSBhYm92ZQoJCQlpZiAoIHRoaXMgIT09IGVsZW0gfHwgZXZlbnQuaXNTaW11bGF0ZWQgfHwgZXZlbnQuaXNUcmlnZ2VyIHx8CgkJCQkoIGVsZW0udHlwZSAhPT0gInJhZGlvIiAmJiBlbGVtLnR5cGUgIT09ICJjaGVja2JveCIgKSApIHsKCgkJCQlyZXR1cm4gZXZlbnQuaGFuZGxlT2JqLmhhbmRsZXIuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApOwoJCQl9CgkJfSwKCgkJdGVhcmRvd246IGZ1bmN0aW9uKCkgewoJCQlqUXVlcnkuZXZlbnQucmVtb3ZlKCB0aGlzLCAiLl9jaGFuZ2UiICk7CgoJCQlyZXR1cm4gIXJmb3JtRWxlbXMudGVzdCggdGhpcy5ub2RlTmFtZSApOwoJCX0KCX07Cn0KCi8vIFN1cHBvcnQ6IEZpcmVmb3gKLy8gRmlyZWZveCBkb2Vzbid0IGhhdmUgZm9jdXMoaW4gfCBvdXQpIGV2ZW50cwovLyBSZWxhdGVkIHRpY2tldCAtIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTY4Nzc4NwovLwovLyBTdXBwb3J0OiBDaHJvbWUsIFNhZmFyaQovLyBmb2N1cyhpbiB8IG91dCkgZXZlbnRzIGZpcmUgYWZ0ZXIgZm9jdXMgJiBibHVyIGV2ZW50cywKLy8gd2hpY2ggaXMgc3BlYyB2aW9sYXRpb24gLSBodHRwOi8vd3d3LnczLm9yZy9UUi9ET00tTGV2ZWwtMy1FdmVudHMvI2V2ZW50cy1mb2N1c2V2ZW50LWV2ZW50LW9yZGVyCi8vIFJlbGF0ZWQgdGlja2V0IC0gaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTQ0OTg1NwppZiAoICFzdXBwb3J0LmZvY3VzaW4gKSB7CglqUXVlcnkuZWFjaCggeyBmb2N1czogImZvY3VzaW4iLCBibHVyOiAiZm9jdXNvdXQiIH0sIGZ1bmN0aW9uKCBvcmlnLCBmaXggKSB7CgoJCS8vIEF0dGFjaCBhIHNpbmdsZSBjYXB0dXJpbmcgaGFuZGxlciBvbiB0aGUgZG9jdW1lbnQgd2hpbGUgc29tZW9uZSB3YW50cyBmb2N1c2luL2ZvY3Vzb3V0CgkJdmFyIGhhbmRsZXIgPSBmdW5jdGlvbiggZXZlbnQgKSB7CgkJCWpRdWVyeS5ldmVudC5zaW11bGF0ZSggZml4LCBldmVudC50YXJnZXQsIGpRdWVyeS5ldmVudC5maXgoIGV2ZW50ICkgKTsKCQl9OwoKCQlqUXVlcnkuZXZlbnQuc3BlY2lhbFsgZml4IF0gPSB7CgkJCXNldHVwOiBmdW5jdGlvbigpIHsKCQkJCXZhciBkb2MgPSB0aGlzLm93bmVyRG9jdW1lbnQgfHwgdGhpcywKCQkJCQlhdHRhY2hlcyA9IGpRdWVyeS5fZGF0YSggZG9jLCBmaXggKTsKCgkJCQlpZiAoICFhdHRhY2hlcyApIHsKCQkJCQlkb2MuYWRkRXZlbnRMaXN0ZW5lciggb3JpZywgaGFuZGxlciwgdHJ1ZSApOwoJCQkJfQoJCQkJalF1ZXJ5Ll9kYXRhKCBkb2MsIGZpeCwgKCBhdHRhY2hlcyB8fCAwICkgKyAxICk7CgkJCX0sCgkJCXRlYXJkb3duOiBmdW5jdGlvbigpIHsKCQkJCXZhciBkb2MgPSB0aGlzLm93bmVyRG9jdW1lbnQgfHwgdGhpcywKCQkJCQlhdHRhY2hlcyA9IGpRdWVyeS5fZGF0YSggZG9jLCBmaXggKSAtIDE7CgoJCQkJaWYgKCAhYXR0YWNoZXMgKSB7CgkJCQkJZG9jLnJlbW92ZUV2ZW50TGlzdGVuZXIoIG9yaWcsIGhhbmRsZXIsIHRydWUgKTsKCQkJCQlqUXVlcnkuX3JlbW92ZURhdGEoIGRvYywgZml4ICk7CgkJCQl9IGVsc2UgewoJCQkJCWpRdWVyeS5fZGF0YSggZG9jLCBmaXgsIGF0dGFjaGVzICk7CgkJCQl9CgkJCX0KCQl9OwoJfSApOwp9CgpqUXVlcnkuZm4uZXh0ZW5kKCB7CgoJb246IGZ1bmN0aW9uKCB0eXBlcywgc2VsZWN0b3IsIGRhdGEsIGZuICkgewoJCXJldHVybiBvbiggdGhpcywgdHlwZXMsIHNlbGVjdG9yLCBkYXRhLCBmbiApOwoJfSwKCW9uZTogZnVuY3Rpb24oIHR5cGVzLCBzZWxlY3RvciwgZGF0YSwgZm4gKSB7CgkJcmV0dXJuIG9uKCB0aGlzLCB0eXBlcywgc2VsZWN0b3IsIGRhdGEsIGZuLCAxICk7Cgl9LAoJb2ZmOiBmdW5jdGlvbiggdHlwZXMsIHNlbGVjdG9yLCBmbiApIHsKCQl2YXIgaGFuZGxlT2JqLCB0eXBlOwoJCWlmICggdHlwZXMgJiYgdHlwZXMucHJldmVudERlZmF1bHQgJiYgdHlwZXMuaGFuZGxlT2JqICkgewoKCQkJLy8gKCBldmVudCApICBkaXNwYXRjaGVkIGpRdWVyeS5FdmVudAoJCQloYW5kbGVPYmogPSB0eXBlcy5oYW5kbGVPYmo7CgkJCWpRdWVyeSggdHlwZXMuZGVsZWdhdGVUYXJnZXQgKS5vZmYoCgkJCQloYW5kbGVPYmoubmFtZXNwYWNlID8KCQkJCQloYW5kbGVPYmoub3JpZ1R5cGUgKyAiLiIgKyBoYW5kbGVPYmoubmFtZXNwYWNlIDoKCQkJCQloYW5kbGVPYmoub3JpZ1R5cGUsCgkJCQloYW5kbGVPYmouc2VsZWN0b3IsCgkJCQloYW5kbGVPYmouaGFuZGxlcgoJCQkpOwoJCQlyZXR1cm4gdGhpczsKCQl9CgkJaWYgKCB0eXBlb2YgdHlwZXMgPT09ICJvYmplY3QiICkgewoKCQkJLy8gKCB0eXBlcy1vYmplY3QgWywgc2VsZWN0b3JdICkKCQkJZm9yICggdHlwZSBpbiB0eXBlcyApIHsKCQkJCXRoaXMub2ZmKCB0eXBlLCBzZWxlY3RvciwgdHlwZXNbIHR5cGUgXSApOwoJCQl9CgkJCXJldHVybiB0aGlzOwoJCX0KCQlpZiAoIHNlbGVjdG9yID09PSBmYWxzZSB8fCB0eXBlb2Ygc2VsZWN0b3IgPT09ICJmdW5jdGlvbiIgKSB7CgoJCQkvLyAoIHR5cGVzIFssIGZuXSApCgkJCWZuID0gc2VsZWN0b3I7CgkJCXNlbGVjdG9yID0gdW5kZWZpbmVkOwoJCX0KCQlpZiAoIGZuID09PSBmYWxzZSApIHsKCQkJZm4gPSByZXR1cm5GYWxzZTsKCQl9CgkJcmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7CgkJCWpRdWVyeS5ldmVudC5yZW1vdmUoIHRoaXMsIHR5cGVzLCBmbiwgc2VsZWN0b3IgKTsKCQl9ICk7Cgl9LAoKCXRyaWdnZXI6IGZ1bmN0aW9uKCB0eXBlLCBkYXRhICkgewoJCXJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkgewoJCQlqUXVlcnkuZXZlbnQudHJpZ2dlciggdHlwZSwgZGF0YSwgdGhpcyApOwoJCX0gKTsKCX0sCgl0cmlnZ2VySGFuZGxlcjogZnVuY3Rpb24oIHR5cGUsIGRhdGEgKSB7CgkJdmFyIGVsZW0gPSB0aGlzWyAwIF07CgkJaWYgKCBlbGVtICkgewoJCQlyZXR1cm4galF1ZXJ5LmV2ZW50LnRyaWdnZXIoIHR5cGUsIGRhdGEsIGVsZW0sIHRydWUgKTsKCQl9Cgl9Cn0gKTsKCgp2YXIgcmlubGluZWpRdWVyeSA9IC8galF1ZXJ5XGQrPSIoPzpudWxsfFxkKykiL2csCglybm9zaGltY2FjaGUgPSBuZXcgUmVnRXhwKCAiPCg/OiIgKyBub2RlTmFtZXMgKyAiKVtcXHMvPl0iLCAiaSIgKSwKCXJ4aHRtbFRhZyA9IC88KD8hYXJlYXxicnxjb2x8ZW1iZWR8aHJ8aW1nfGlucHV0fGxpbmt8bWV0YXxwYXJhbSkoKFtcdzotXSspW14+XSopXC8+L2dpLAoKCS8vIFN1cHBvcnQ6IElFIDEwLTExLCBFZGdlIDEwMjQwKwoJLy8gSW4gSUUvRWRnZSB1c2luZyByZWdleCBncm91cHMgaGVyZSBjYXVzZXMgc2V2ZXJlIHNsb3dkb3ducy4KCS8vIFNlZSBodHRwczovL2Nvbm5lY3QubWljcm9zb2Z0LmNvbS9JRS9mZWVkYmFjay9kZXRhaWxzLzE3MzY1MTIvCglybm9Jbm5lcmh0bWwgPSAvPHNjcmlwdHw8c3R5bGV8PGxpbmsvaSwKCgkvLyBjaGVja2VkPSJjaGVja2VkIiBvciBjaGVja2VkCglyY2hlY2tlZCA9IC9jaGVja2VkXHMqKD86W149XXw9XHMqLmNoZWNrZWQuKS9pLAoJcnNjcmlwdFR5cGVNYXNrZWQgPSAvXnRydWVcLyguKikvLAoJcmNsZWFuU2NyaXB0ID0gL15ccyo8ISg/OlxbQ0RBVEFcW3wtLSl8KD86XF1cXXwtLSk+XHMqJC9nLAoJc2FmZUZyYWdtZW50ID0gY3JlYXRlU2FmZUZyYWdtZW50KCBkb2N1bWVudCApLAoJZnJhZ21lbnREaXYgPSBzYWZlRnJhZ21lbnQuYXBwZW5kQ2hpbGQoIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICJkaXYiICkgKTsKCi8vIFN1cHBvcnQ6IElFPDgKLy8gTWFuaXB1bGF0aW5nIHRhYmxlcyByZXF1aXJlcyBhIHRib2R5CmZ1bmN0aW9uIG1hbmlwdWxhdGlvblRhcmdldCggZWxlbSwgY29udGVudCApIHsKCXJldHVybiBqUXVlcnkubm9kZU5hbWUoIGVsZW0sICJ0YWJsZSIgKSAmJgoJCWpRdWVyeS5ub2RlTmFtZSggY29udGVudC5ub2RlVHlwZSAhPT0gMTEgPyBjb250ZW50IDogY29udGVudC5maXJzdENoaWxkLCAidHIiICkgPwoKCQllbGVtLmdldEVsZW1lbnRzQnlUYWdOYW1lKCAidGJvZHkiIClbIDAgXSB8fAoJCQllbGVtLmFwcGVuZENoaWxkKCBlbGVtLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCggInRib2R5IiApICkgOgoJCWVsZW07Cn0KCi8vIFJlcGxhY2UvcmVzdG9yZSB0aGUgdHlwZSBhdHRyaWJ1dGUgb2Ygc2NyaXB0IGVsZW1lbnRzIGZvciBzYWZlIERPTSBtYW5pcHVsYXRpb24KZnVuY3Rpb24gZGlzYWJsZVNjcmlwdCggZWxlbSApIHsKCWVsZW0udHlwZSA9ICggalF1ZXJ5LmZpbmQuYXR0ciggZWxlbSwgInR5cGUiICkgIT09IG51bGwgKSArICIvIiArIGVsZW0udHlwZTsKCXJldHVybiBlbGVtOwp9CmZ1bmN0aW9uIHJlc3RvcmVTY3JpcHQoIGVsZW0gKSB7Cgl2YXIgbWF0Y2ggPSByc2NyaXB0VHlwZU1hc2tlZC5leGVjKCBlbGVtLnR5cGUgKTsKCWlmICggbWF0Y2ggKSB7CgkJZWxlbS50eXBlID0gbWF0Y2hbIDEgXTsKCX0gZWxzZSB7CgkJZWxlbS5yZW1vdmVBdHRyaWJ1dGUoICJ0eXBlIiApOwoJfQoJcmV0dXJuIGVsZW07Cn0KCmZ1bmN0aW9uIGNsb25lQ29weUV2ZW50KCBzcmMsIGRlc3QgKSB7CglpZiAoIGRlc3Qubm9kZVR5cGUgIT09IDEgfHwgIWpRdWVyeS5oYXNEYXRhKCBzcmMgKSApIHsKCQlyZXR1cm47Cgl9CgoJdmFyIHR5cGUsIGksIGwsCgkJb2xkRGF0YSA9IGpRdWVyeS5fZGF0YSggc3JjICksCgkJY3VyRGF0YSA9IGpRdWVyeS5fZGF0YSggZGVzdCwgb2xkRGF0YSApLAoJCWV2ZW50cyA9IG9sZERhdGEuZXZlbnRzOwoKCWlmICggZXZlbnRzICkgewoJCWRlbGV0ZSBjdXJEYXRhLmhhbmRsZTsKCQljdXJEYXRhLmV2ZW50cyA9IHt9OwoKCQlmb3IgKCB0eXBlIGluIGV2ZW50cyApIHsKCQkJZm9yICggaSA9IDAsIGwgPSBldmVudHNbIHR5cGUgXS5sZW5ndGg7IGkgPCBsOyBpKysgKSB7CgkJCQlqUXVlcnkuZXZlbnQuYWRkKCBkZXN0LCB0eXBlLCBldmVudHNbIHR5cGUgXVsgaSBdICk7CgkJCX0KCQl9Cgl9CgoJLy8gbWFrZSB0aGUgY2xvbmVkIHB1YmxpYyBkYXRhIG9iamVjdCBhIGNvcHkgZnJvbSB0aGUgb3JpZ2luYWwKCWlmICggY3VyRGF0YS5kYXRhICkgewoJCWN1ckRhdGEuZGF0YSA9IGpRdWVyeS5leHRlbmQoIHt9LCBjdXJEYXRhLmRhdGEgKTsKCX0KfQoKZnVuY3Rpb24gZml4Q2xvbmVOb2RlSXNzdWVzKCBzcmMsIGRlc3QgKSB7Cgl2YXIgbm9kZU5hbWUsIGUsIGRhdGE7CgoJLy8gV2UgZG8gbm90IG5lZWQgdG8gZG8gYW55dGhpbmcgZm9yIG5vbi1FbGVtZW50cwoJaWYgKCBkZXN0Lm5vZGVUeXBlICE9PSAxICkgewoJCXJldHVybjsKCX0KCglub2RlTmFtZSA9IGRlc3Qubm9kZU5hbWUudG9Mb3dlckNhc2UoKTsKCgkvLyBJRTYtOCBjb3BpZXMgZXZlbnRzIGJvdW5kIHZpYSBhdHRhY2hFdmVudCB3aGVuIHVzaW5nIGNsb25lTm9kZS4KCWlmICggIXN1cHBvcnQubm9DbG9uZUV2ZW50ICYmIGRlc3RbIGpRdWVyeS5leHBhbmRvIF0gKSB7CgkJZGF0YSA9IGpRdWVyeS5fZGF0YSggZGVzdCApOwoKCQlmb3IgKCBlIGluIGRhdGEuZXZlbnRzICkgewoJCQlqUXVlcnkucmVtb3ZlRXZlbnQoIGRlc3QsIGUsIGRhdGEuaGFuZGxlICk7CgkJfQoKCQkvLyBFdmVudCBkYXRhIGdldHMgcmVmZXJlbmNlZCBpbnN0ZWFkIG9mIGNvcGllZCBpZiB0aGUgZXhwYW5kbyBnZXRzIGNvcGllZCB0b28KCQlkZXN0LnJlbW92ZUF0dHJpYnV0ZSggalF1ZXJ5LmV4cGFuZG8gKTsKCX0KCgkvLyBJRSBibGFua3MgY29udGVudHMgd2hlbiBjbG9uaW5nIHNjcmlwdHMsIGFuZCB0cmllcyB0byBldmFsdWF0ZSBuZXdseS1zZXQgdGV4dAoJaWYgKCBub2RlTmFtZSA9PT0gInNjcmlwdCIgJiYgZGVzdC50ZXh0ICE9PSBzcmMudGV4dCApIHsKCQlkaXNhYmxlU2NyaXB0KCBkZXN0ICkudGV4dCA9IHNyYy50ZXh0OwoJCXJlc3RvcmVTY3JpcHQoIGRlc3QgKTsKCgkvLyBJRTYtMTAgaW1wcm9wZXJseSBjbG9uZXMgY2hpbGRyZW4gb2Ygb2JqZWN0IGVsZW1lbnRzIHVzaW5nIGNsYXNzaWQuCgkvLyBJRTEwIHRocm93cyBOb01vZGlmaWNhdGlvbkFsbG93ZWRFcnJvciBpZiBwYXJlbnQgaXMgbnVsbCwgIzEyMTMyLgoJfSBlbHNlIGlmICggbm9kZU5hbWUgPT09ICJvYmplY3QiICkgewoJCWlmICggZGVzdC5wYXJlbnROb2RlICkgewoJCQlkZXN0Lm91dGVySFRNTCA9IHNyYy5vdXRlckhUTUw7CgkJfQoKCQkvLyBUaGlzIHBhdGggYXBwZWFycyB1bmF2b2lkYWJsZSBmb3IgSUU5LiBXaGVuIGNsb25pbmcgYW4gb2JqZWN0CgkJLy8gZWxlbWVudCBpbiBJRTksIHRoZSBvdXRlckhUTUwgc3RyYXRlZ3kgYWJvdmUgaXMgbm90IHN1ZmZpY2llbnQuCgkJLy8gSWYgdGhlIHNyYyBoYXMgaW5uZXJIVE1MIGFuZCB0aGUgZGVzdGluYXRpb24gZG9lcyBub3QsCgkJLy8gY29weSB0aGUgc3JjLmlubmVySFRNTCBpbnRvIHRoZSBkZXN0LmlubmVySFRNTC4gIzEwMzI0CgkJaWYgKCBzdXBwb3J0Lmh0bWw1Q2xvbmUgJiYgKCBzcmMuaW5uZXJIVE1MICYmICFqUXVlcnkudHJpbSggZGVzdC5pbm5lckhUTUwgKSApICkgewoJCQlkZXN0LmlubmVySFRNTCA9IHNyYy5pbm5lckhUTUw7CgkJfQoKCX0gZWxzZSBpZiAoIG5vZGVOYW1lID09PSAiaW5wdXQiICYmIHJjaGVja2FibGVUeXBlLnRlc3QoIHNyYy50eXBlICkgKSB7CgoJCS8vIElFNi04IGZhaWxzIHRvIHBlcnNpc3QgdGhlIGNoZWNrZWQgc3RhdGUgb2YgYSBjbG9uZWQgY2hlY2tib3gKCQkvLyBvciByYWRpbyBidXR0b24uIFdvcnNlLCBJRTYtNyBmYWlsIHRvIGdpdmUgdGhlIGNsb25lZCBlbGVtZW50CgkJLy8gYSBjaGVja2VkIGFwcGVhcmFuY2UgaWYgdGhlIGRlZmF1bHRDaGVja2VkIHZhbHVlIGlzbid0IGFsc28gc2V0CgoJCWRlc3QuZGVmYXVsdENoZWNrZWQgPSBkZXN0LmNoZWNrZWQgPSBzcmMuY2hlY2tlZDsKCgkJLy8gSUU2LTcgZ2V0IGNvbmZ1c2VkIGFuZCBlbmQgdXAgc2V0dGluZyB0aGUgdmFsdWUgb2YgYSBjbG9uZWQKCQkvLyBjaGVja2JveC9yYWRpbyBidXR0b24gdG8gYW4gZW1wdHkgc3RyaW5nIGluc3RlYWQgb2YgIm9uIgoJCWlmICggZGVzdC52YWx1ZSAhPT0gc3JjLnZhbHVlICkgewoJCQlkZXN0LnZhbHVlID0gc3JjLnZhbHVlOwoJCX0KCgkvLyBJRTYtOCBmYWlscyB0byByZXR1cm4gdGhlIHNlbGVjdGVkIG9wdGlvbiB0byB0aGUgZGVmYXVsdCBzZWxlY3RlZAoJLy8gc3RhdGUgd2hlbiBjbG9uaW5nIG9wdGlvbnMKCX0gZWxzZSBpZiAoIG5vZGVOYW1lID09PSAib3B0aW9uIiApIHsKCQlkZXN0LmRlZmF1bHRTZWxlY3RlZCA9IGRlc3Quc2VsZWN0ZWQgPSBzcmMuZGVmYXVsdFNlbGVjdGVkOwoKCS8vIElFNi04IGZhaWxzIHRvIHNldCB0aGUgZGVmYXVsdFZhbHVlIHRvIHRoZSBjb3JyZWN0IHZhbHVlIHdoZW4KCS8vIGNsb25pbmcgb3RoZXIgdHlwZXMgb2YgaW5wdXQgZmllbGRzCgl9IGVsc2UgaWYgKCBub2RlTmFtZSA9PT0gImlucHV0IiB8fCBub2RlTmFtZSA9PT0gInRleHRhcmVhIiApIHsKCQlkZXN0LmRlZmF1bHRWYWx1ZSA9IHNyYy5kZWZhdWx0VmFsdWU7Cgl9Cn0KCmZ1bmN0aW9uIGRvbU1hbmlwKCBjb2xsZWN0aW9uLCBhcmdzLCBjYWxsYmFjaywgaWdub3JlZCApIHsKCgkvLyBGbGF0dGVuIGFueSBuZXN0ZWQgYXJyYXlzCglhcmdzID0gY29uY2F0LmFwcGx5KCBbXSwgYXJncyApOwoKCXZhciBmaXJzdCwgbm9kZSwgaGFzU2NyaXB0cywKCQlzY3JpcHRzLCBkb2MsIGZyYWdtZW50LAoJCWkgPSAwLAoJCWwgPSBjb2xsZWN0aW9uLmxlbmd0aCwKCQlpTm9DbG9uZSA9IGwgLSAxLAoJCXZhbHVlID0gYXJnc1sgMCBdLAoJCWlzRnVuY3Rpb24gPSBqUXVlcnkuaXNGdW5jdGlvbiggdmFsdWUgKTsKCgkvLyBXZSBjYW4ndCBjbG9uZU5vZGUgZnJhZ21lbnRzIHRoYXQgY29udGFpbiBjaGVja2VkLCBpbiBXZWJLaXQKCWlmICggaXNGdW5jdGlvbiB8fAoJCQkoIGwgPiAxICYmIHR5cGVvZiB2YWx1ZSA9PT0gInN0cmluZyIgJiYKCQkJCSFzdXBwb3J0LmNoZWNrQ2xvbmUgJiYgcmNoZWNrZWQudGVzdCggdmFsdWUgKSApICkgewoJCXJldHVybiBjb2xsZWN0aW9uLmVhY2goIGZ1bmN0aW9uKCBpbmRleCApIHsKCQkJdmFyIHNlbGYgPSBjb2xsZWN0aW9uLmVxKCBpbmRleCApOwoJCQlpZiAoIGlzRnVuY3Rpb24gKSB7CgkJCQlhcmdzWyAwIF0gPSB2YWx1ZS5jYWxsKCB0aGlzLCBpbmRleCwgc2VsZi5odG1sKCkgKTsKCQkJfQoJCQlkb21NYW5pcCggc2VsZiwgYXJncywgY2FsbGJhY2ssIGlnbm9yZWQgKTsKCQl9ICk7Cgl9CgoJaWYgKCBsICkgewoJCWZyYWdtZW50ID0gYnVpbGRGcmFnbWVudCggYXJncywgY29sbGVjdGlvblsgMCBdLm93bmVyRG9jdW1lbnQsIGZhbHNlLCBjb2xsZWN0aW9uLCBpZ25vcmVkICk7CgkJZmlyc3QgPSBmcmFnbWVudC5maXJzdENoaWxkOwoKCQlpZiAoIGZyYWdtZW50LmNoaWxkTm9kZXMubGVuZ3RoID09PSAxICkgewoJCQlmcmFnbWVudCA9IGZpcnN0OwoJCX0KCgkJLy8gUmVxdWlyZSBlaXRoZXIgbmV3IGNvbnRlbnQgb3IgYW4gaW50ZXJlc3QgaW4gaWdub3JlZCBlbGVtZW50cyB0byBpbnZva2UgdGhlIGNhbGxiYWNrCgkJaWYgKCBmaXJzdCB8fCBpZ25vcmVkICkgewoJCQlzY3JpcHRzID0galF1ZXJ5Lm1hcCggZ2V0QWxsKCBmcmFnbWVudCwgInNjcmlwdCIgKSwgZGlzYWJsZVNjcmlwdCApOwoJCQloYXNTY3JpcHRzID0gc2NyaXB0cy5sZW5ndGg7CgoJCQkvLyBVc2UgdGhlIG9yaWdpbmFsIGZyYWdtZW50IGZvciB0aGUgbGFzdCBpdGVtCgkJCS8vIGluc3RlYWQgb2YgdGhlIGZpcnN0IGJlY2F1c2UgaXQgY2FuIGVuZCB1cAoJCQkvLyBiZWluZyBlbXB0aWVkIGluY29ycmVjdGx5IGluIGNlcnRhaW4gc2l0dWF0aW9ucyAoIzgwNzApLgoJCQlmb3IgKCA7IGkgPCBsOyBpKysgKSB7CgkJCQlub2RlID0gZnJhZ21lbnQ7CgoJCQkJaWYgKCBpICE9PSBpTm9DbG9uZSApIHsKCQkJCQlub2RlID0galF1ZXJ5LmNsb25lKCBub2RlLCB0cnVlLCB0cnVlICk7CgoJCQkJCS8vIEtlZXAgcmVmZXJlbmNlcyB0byBjbG9uZWQgc2NyaXB0cyBmb3IgbGF0ZXIgcmVzdG9yYXRpb24KCQkJCQlpZiAoIGhhc1NjcmlwdHMgKSB7CgoJCQkJCQkvLyBTdXBwb3J0OiBBbmRyb2lkPDQuMSwgUGhhbnRvbUpTPDIKCQkJCQkJLy8gcHVzaC5hcHBseShfLCBhcnJheWxpa2UpIHRocm93cyBvbiBhbmNpZW50IFdlYktpdAoJCQkJCQlqUXVlcnkubWVyZ2UoIHNjcmlwdHMsIGdldEFsbCggbm9kZSwgInNjcmlwdCIgKSApOwoJCQkJCX0KCQkJCX0KCgkJCQljYWxsYmFjay5jYWxsKCBjb2xsZWN0aW9uWyBpIF0sIG5vZGUsIGkgKTsKCQkJfQoKCQkJaWYgKCBoYXNTY3JpcHRzICkgewoJCQkJZG9jID0gc2NyaXB0c1sgc2NyaXB0cy5sZW5ndGggLSAxIF0ub3duZXJEb2N1bWVudDsKCgkJCQkvLyBSZWVuYWJsZSBzY3JpcHRzCgkJCQlqUXVlcnkubWFwKCBzY3JpcHRzLCByZXN0b3JlU2NyaXB0ICk7CgoJCQkJLy8gRXZhbHVhdGUgZXhlY3V0YWJsZSBzY3JpcHRzIG9uIGZpcnN0IGRvY3VtZW50IGluc2VydGlvbgoJCQkJZm9yICggaSA9IDA7IGkgPCBoYXNTY3JpcHRzOyBpKysgKSB7CgkJCQkJbm9kZSA9IHNjcmlwdHNbIGkgXTsKCQkJCQlpZiAoIHJzY3JpcHRUeXBlLnRlc3QoIG5vZGUudHlwZSB8fCAiIiApICYmCgkJCQkJCSFqUXVlcnkuX2RhdGEoIG5vZGUsICJnbG9iYWxFdmFsIiApICYmCgkJCQkJCWpRdWVyeS5jb250YWlucyggZG9jLCBub2RlICkgKSB7CgoJCQkJCQlpZiAoIG5vZGUuc3JjICkgewoKCQkJCQkJCS8vIE9wdGlvbmFsIEFKQVggZGVwZW5kZW5jeSwgYnV0IHdvbid0IHJ1biBzY3JpcHRzIGlmIG5vdCBwcmVzZW50CgkJCQkJCQlpZiAoIGpRdWVyeS5fZXZhbFVybCApIHsKCQkJCQkJCQlqUXVlcnkuX2V2YWxVcmwoIG5vZGUuc3JjICk7CgkJCQkJCQl9CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQlqUXVlcnkuZ2xvYmFsRXZhbCgKCQkJCQkJCQkoIG5vZGUudGV4dCB8fCBub2RlLnRleHRDb250ZW50IHx8IG5vZGUuaW5uZXJIVE1MIHx8ICIiICkKCQkJCQkJCQkJLnJlcGxhY2UoIHJjbGVhblNjcmlwdCwgIiIgKQoJCQkJCQkJKTsKCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJfQoKCQkJLy8gRml4ICMxMTgwOTogQXZvaWQgbGVha2luZyBtZW1vcnkKCQkJZnJhZ21lbnQgPSBmaXJzdCA9IG51bGw7CgkJfQoJfQoKCXJldHVybiBjb2xsZWN0aW9uOwp9CgpmdW5jdGlvbiByZW1vdmUoIGVsZW0sIHNlbGVjdG9yLCBrZWVwRGF0YSApIHsKCXZhciBub2RlLAoJCWVsZW1zID0gc2VsZWN0b3IgPyBqUXVlcnkuZmlsdGVyKCBzZWxlY3RvciwgZWxlbSApIDogZWxlbSwKCQlpID0gMDsKCglmb3IgKCA7ICggbm9kZSA9IGVsZW1zWyBpIF0gKSAhPSBudWxsOyBpKysgKSB7CgoJCWlmICggIWtlZXBEYXRhICYmIG5vZGUubm9kZVR5cGUgPT09IDEgKSB7CgkJCWpRdWVyeS5jbGVhbkRhdGEoIGdldEFsbCggbm9kZSApICk7CgkJfQoKCQlpZiAoIG5vZGUucGFyZW50Tm9kZSApIHsKCQkJaWYgKCBrZWVwRGF0YSAmJiBqUXVlcnkuY29udGFpbnMoIG5vZGUub3duZXJEb2N1bWVudCwgbm9kZSApICkgewoJCQkJc2V0R2xvYmFsRXZhbCggZ2V0QWxsKCBub2RlLCAic2NyaXB0IiApICk7CgkJCX0KCQkJbm9kZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKCBub2RlICk7CgkJfQoJfQoKCXJldHVybiBlbGVtOwp9CgpqUXVlcnkuZXh0ZW5kKCB7CglodG1sUHJlZmlsdGVyOiBmdW5jdGlvbiggaHRtbCApIHsKCQlyZXR1cm4gaHRtbC5yZXBsYWNlKCByeGh0bWxUYWcsICI8JDE+PC8kMj4iICk7Cgl9LAoKCWNsb25lOiBmdW5jdGlvbiggZWxlbSwgZGF0YUFuZEV2ZW50cywgZGVlcERhdGFBbmRFdmVudHMgKSB7CgkJdmFyIGRlc3RFbGVtZW50cywgbm9kZSwgY2xvbmUsIGksIHNyY0VsZW1lbnRzLAoJCQlpblBhZ2UgPSBqUXVlcnkuY29udGFpbnMoIGVsZW0ub3duZXJEb2N1bWVudCwgZWxlbSApOwoKCQlpZiAoIHN1cHBvcnQuaHRtbDVDbG9uZSB8fCBqUXVlcnkuaXNYTUxEb2MoIGVsZW0gKSB8fAoJCQkhcm5vc2hpbWNhY2hlLnRlc3QoICI8IiArIGVsZW0ubm9kZU5hbWUgKyAiPiIgKSApIHsKCgkJCWNsb25lID0gZWxlbS5jbG9uZU5vZGUoIHRydWUgKTsKCgkJLy8gSUU8PTggZG9lcyBub3QgcHJvcGVybHkgY2xvbmUgZGV0YWNoZWQsIHVua25vd24gZWxlbWVudCBub2RlcwoJCX0gZWxzZSB7CgkJCWZyYWdtZW50RGl2LmlubmVySFRNTCA9IGVsZW0ub3V0ZXJIVE1MOwoJCQlmcmFnbWVudERpdi5yZW1vdmVDaGlsZCggY2xvbmUgPSBmcmFnbWVudERpdi5maXJzdENoaWxkICk7CgkJfQoKCQlpZiAoICggIXN1cHBvcnQubm9DbG9uZUV2ZW50IHx8ICFzdXBwb3J0Lm5vQ2xvbmVDaGVja2VkICkgJiYKCQkJCSggZWxlbS5ub2RlVHlwZSA9PT0gMSB8fCBlbGVtLm5vZGVUeXBlID09PSAxMSApICYmICFqUXVlcnkuaXNYTUxEb2MoIGVsZW0gKSApIHsKCgkJCS8vIFdlIGVzY2hldyBTaXp6bGUgaGVyZSBmb3IgcGVyZm9ybWFuY2UgcmVhc29uczogaHR0cDovL2pzcGVyZi5jb20vZ2V0YWxsLXZzLXNpenpsZS8yCgkJCWRlc3RFbGVtZW50cyA9IGdldEFsbCggY2xvbmUgKTsKCQkJc3JjRWxlbWVudHMgPSBnZXRBbGwoIGVsZW0gKTsKCgkJCS8vIEZpeCBhbGwgSUUgY2xvbmluZyBpc3N1ZXMKCQkJZm9yICggaSA9IDA7ICggbm9kZSA9IHNyY0VsZW1lbnRzWyBpIF0gKSAhPSBudWxsOyArK2kgKSB7CgoJCQkJLy8gRW5zdXJlIHRoYXQgdGhlIGRlc3RpbmF0aW9uIG5vZGUgaXMgbm90IG51bGw7IEZpeGVzICM5NTg3CgkJCQlpZiAoIGRlc3RFbGVtZW50c1sgaSBdICkgewoJCQkJCWZpeENsb25lTm9kZUlzc3Vlcyggbm9kZSwgZGVzdEVsZW1lbnRzWyBpIF0gKTsKCQkJCX0KCQkJfQoJCX0KCgkJLy8gQ29weSB0aGUgZXZlbnRzIGZyb20gdGhlIG9yaWdpbmFsIHRvIHRoZSBjbG9uZQoJCWlmICggZGF0YUFuZEV2ZW50cyApIHsKCQkJaWYgKCBkZWVwRGF0YUFuZEV2ZW50cyApIHsKCQkJCXNyY0VsZW1lbnRzID0gc3JjRWxlbWVudHMgfHwgZ2V0QWxsKCBlbGVtICk7CgkJCQlkZXN0RWxlbWVudHMgPSBkZXN0RWxlbWVudHMgfHwgZ2V0QWxsKCBjbG9uZSApOwoKCQkJCWZvciAoIGkgPSAwOyAoIG5vZGUgPSBzcmNFbGVtZW50c1sgaSBdICkgIT0gbnVsbDsgaSsrICkgewoJCQkJCWNsb25lQ29weUV2ZW50KCBub2RlLCBkZXN0RWxlbWVudHNbIGkgXSApOwoJCQkJfQoJCQl9IGVsc2UgewoJCQkJY2xvbmVDb3B5RXZlbnQoIGVsZW0sIGNsb25lICk7CgkJCX0KCQl9CgoJCS8vIFByZXNlcnZlIHNjcmlwdCBldmFsdWF0aW9uIGhpc3RvcnkKCQlkZXN0RWxlbWVudHMgPSBnZXRBbGwoIGNsb25lLCAic2NyaXB0IiApOwoJCWlmICggZGVzdEVsZW1lbnRzLmxlbmd0aCA+IDAgKSB7CgkJCXNldEdsb2JhbEV2YWwoIGRlc3RFbGVtZW50cywgIWluUGFnZSAmJiBnZXRBbGwoIGVsZW0sICJzY3JpcHQiICkgKTsKCQl9CgoJCWRlc3RFbGVtZW50cyA9IHNyY0VsZW1lbnRzID0gbm9kZSA9IG51bGw7CgoJCS8vIFJldHVybiB0aGUgY2xvbmVkIHNldAoJCXJldHVybiBjbG9uZTsKCX0sCgoJY2xlYW5EYXRhOiBmdW5jdGlvbiggZWxlbXMsIC8qIGludGVybmFsICovIGZvcmNlQWNjZXB0RGF0YSApIHsKCQl2YXIgZWxlbSwgdHlwZSwgaWQsIGRhdGEsCgkJCWkgPSAwLAoJCQlpbnRlcm5hbEtleSA9IGpRdWVyeS5leHBhbmRvLAoJCQljYWNoZSA9IGpRdWVyeS5jYWNoZSwKCQkJYXR0cmlidXRlcyA9IHN1cHBvcnQuYXR0cmlidXRlcywKCQkJc3BlY2lhbCA9IGpRdWVyeS5ldmVudC5zcGVjaWFsOwoKCQlmb3IgKCA7ICggZWxlbSA9IGVsZW1zWyBpIF0gKSAhPSBudWxsOyBpKysgKSB7CgkJCWlmICggZm9yY2VBY2NlcHREYXRhIHx8IGFjY2VwdERhdGEoIGVsZW0gKSApIHsKCgkJCQlpZCA9IGVsZW1bIGludGVybmFsS2V5IF07CgkJCQlkYXRhID0gaWQgJiYgY2FjaGVbIGlkIF07CgoJCQkJaWYgKCBkYXRhICkgewoJCQkJCWlmICggZGF0YS5ldmVudHMgKSB7CgkJCQkJCWZvciAoIHR5cGUgaW4gZGF0YS5ldmVudHMgKSB7CgkJCQkJCQlpZiAoIHNwZWNpYWxbIHR5cGUgXSApIHsKCQkJCQkJCQlqUXVlcnkuZXZlbnQucmVtb3ZlKCBlbGVtLCB0eXBlICk7CgoJCQkJCQkJLy8gVGhpcyBpcyBhIHNob3J0Y3V0IHRvIGF2b2lkIGpRdWVyeS5ldmVudC5yZW1vdmUncyBvdmVyaGVhZAoJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQlqUXVlcnkucmVtb3ZlRXZlbnQoIGVsZW0sIHR5cGUsIGRhdGEuaGFuZGxlICk7CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQl9CgoJCQkJCS8vIFJlbW92ZSBjYWNoZSBvbmx5IGlmIGl0IHdhcyBub3QgYWxyZWFkeSByZW1vdmVkIGJ5IGpRdWVyeS5ldmVudC5yZW1vdmUKCQkJCQlpZiAoIGNhY2hlWyBpZCBdICkgewoKCQkJCQkJZGVsZXRlIGNhY2hlWyBpZCBdOwoKCQkJCQkJLy8gU3VwcG9ydDogSUU8OQoJCQkJCQkvLyBJRSBkb2VzIG5vdCBhbGxvdyB1cyB0byBkZWxldGUgZXhwYW5kbyBwcm9wZXJ0aWVzIGZyb20gbm9kZXMKCQkJCQkJLy8gSUUgY3JlYXRlcyBleHBhbmRvIGF0dHJpYnV0ZXMgYWxvbmcgd2l0aCB0aGUgcHJvcGVydHkKCQkJCQkJLy8gSUUgZG9lcyBub3QgaGF2ZSBhIHJlbW92ZUF0dHJpYnV0ZSBmdW5jdGlvbiBvbiBEb2N1bWVudCBub2RlcwoJCQkJCQlpZiAoICFhdHRyaWJ1dGVzICYmIHR5cGVvZiBlbGVtLnJlbW92ZUF0dHJpYnV0ZSAhPT0gInVuZGVmaW5lZCIgKSB7CgkJCQkJCQllbGVtLnJlbW92ZUF0dHJpYnV0ZSggaW50ZXJuYWxLZXkgKTsKCgkJCQkJCS8vIFdlYmtpdCAmIEJsaW5rIHBlcmZvcm1hbmNlIHN1ZmZlcnMgd2hlbiBkZWxldGluZyBwcm9wZXJ0aWVzCgkJCQkJCS8vIGZyb20gRE9NIG5vZGVzLCBzbyBzZXQgdG8gdW5kZWZpbmVkIGluc3RlYWQKCQkJCQkJLy8gaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTM3ODYwNwoJCQkJCQl9IGVsc2UgewoJCQkJCQkJZWxlbVsgaW50ZXJuYWxLZXkgXSA9IHVuZGVmaW5lZDsKCQkJCQkJfQoKCQkJCQkJZGVsZXRlZElkcy5wdXNoKCBpZCApOwoJCQkJCX0KCQkJCX0KCQkJfQoJCX0KCX0KfSApOwoKalF1ZXJ5LmZuLmV4dGVuZCggewoKCS8vIEtlZXAgZG9tTWFuaXAgZXhwb3NlZCB1bnRpbCAzLjAgKGdoLTIyMjUpCglkb21NYW5pcDogZG9tTWFuaXAsCgoJZGV0YWNoOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7CgkJcmV0dXJuIHJlbW92ZSggdGhpcywgc2VsZWN0b3IsIHRydWUgKTsKCX0sCgoJcmVtb3ZlOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7CgkJcmV0dXJuIHJlbW92ZSggdGhpcywgc2VsZWN0b3IgKTsKCX0sCgoJdGV4dDogZnVuY3Rpb24oIHZhbHVlICkgewoJCXJldHVybiBhY2Nlc3MoIHRoaXMsIGZ1bmN0aW9uKCB2YWx1ZSApIHsKCQkJcmV0dXJuIHZhbHVlID09PSB1bmRlZmluZWQgPwoJCQkJalF1ZXJ5LnRleHQoIHRoaXMgKSA6CgkJCQl0aGlzLmVtcHR5KCkuYXBwZW5kKAoJCQkJCSggdGhpc1sgMCBdICYmIHRoaXNbIDAgXS5vd25lckRvY3VtZW50IHx8IGRvY3VtZW50ICkuY3JlYXRlVGV4dE5vZGUoIHZhbHVlICkKCQkJCSk7CgkJfSwgbnVsbCwgdmFsdWUsIGFyZ3VtZW50cy5sZW5ndGggKTsKCX0sCgoJYXBwZW5kOiBmdW5jdGlvbigpIHsKCQlyZXR1cm4gZG9tTWFuaXAoIHRoaXMsIGFyZ3VtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7CgkJCWlmICggdGhpcy5ub2RlVHlwZSA9PT0gMSB8fCB0aGlzLm5vZGVUeXBlID09PSAxMSB8fCB0aGlzLm5vZGVUeXBlID09PSA5ICkgewoJCQkJdmFyIHRhcmdldCA9IG1hbmlwdWxhdGlvblRhcmdldCggdGhpcywgZWxlbSApOwoJCQkJdGFyZ2V0LmFwcGVuZENoaWxkKCBlbGVtICk7CgkJCX0KCQl9ICk7Cgl9LAoKCXByZXBlbmQ6IGZ1bmN0aW9uKCkgewoJCXJldHVybiBkb21NYW5pcCggdGhpcywgYXJndW1lbnRzLCBmdW5jdGlvbiggZWxlbSApIHsKCQkJaWYgKCB0aGlzLm5vZGVUeXBlID09PSAxIHx8IHRoaXMubm9kZVR5cGUgPT09IDExIHx8IHRoaXMubm9kZVR5cGUgPT09IDkgKSB7CgkJCQl2YXIgdGFyZ2V0ID0gbWFuaXB1bGF0aW9uVGFyZ2V0KCB0aGlzLCBlbGVtICk7CgkJCQl0YXJnZXQuaW5zZXJ0QmVmb3JlKCBlbGVtLCB0YXJnZXQuZmlyc3RDaGlsZCApOwoJCQl9CgkJfSApOwoJfSwKCgliZWZvcmU6IGZ1bmN0aW9uKCkgewoJCXJldHVybiBkb21NYW5pcCggdGhpcywgYXJndW1lbnRzLCBmdW5jdGlvbiggZWxlbSApIHsKCQkJaWYgKCB0aGlzLnBhcmVudE5vZGUgKSB7CgkJCQl0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKCBlbGVtLCB0aGlzICk7CgkJCX0KCQl9ICk7Cgl9LAoKCWFmdGVyOiBmdW5jdGlvbigpIHsKCQlyZXR1cm4gZG9tTWFuaXAoIHRoaXMsIGFyZ3VtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7CgkJCWlmICggdGhpcy5wYXJlbnROb2RlICkgewoJCQkJdGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZSggZWxlbSwgdGhpcy5uZXh0U2libGluZyApOwoJCQl9CgkJfSApOwoJfSwKCgllbXB0eTogZnVuY3Rpb24oKSB7CgkJdmFyIGVsZW0sCgkJCWkgPSAwOwoKCQlmb3IgKCA7ICggZWxlbSA9IHRoaXNbIGkgXSApICE9IG51bGw7IGkrKyApIHsKCgkJCS8vIFJlbW92ZSBlbGVtZW50IG5vZGVzIGFuZCBwcmV2ZW50IG1lbW9yeSBsZWFrcwoJCQlpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7CgkJCQlqUXVlcnkuY2xlYW5EYXRhKCBnZXRBbGwoIGVsZW0sIGZhbHNlICkgKTsKCQkJfQoKCQkJLy8gUmVtb3ZlIGFueSByZW1haW5pbmcgbm9kZXMKCQkJd2hpbGUgKCBlbGVtLmZpcnN0Q2hpbGQgKSB7CgkJCQllbGVtLnJlbW92ZUNoaWxkKCBlbGVtLmZpcnN0Q2hpbGQgKTsKCQkJfQoKCQkJLy8gSWYgdGhpcyBpcyBhIHNlbGVjdCwgZW5zdXJlIHRoYXQgaXQgZGlzcGxheXMgZW1wdHkgKCMxMjMzNikKCQkJLy8gU3VwcG9ydDogSUU8OQoJCQlpZiAoIGVsZW0ub3B0aW9ucyAmJiBqUXVlcnkubm9kZU5hbWUoIGVsZW0sICJzZWxlY3QiICkgKSB7CgkJCQllbGVtLm9wdGlvbnMubGVuZ3RoID0gMDsKCQkJfQoJCX0KCgkJcmV0dXJuIHRoaXM7Cgl9LAoKCWNsb25lOiBmdW5jdGlvbiggZGF0YUFuZEV2ZW50cywgZGVlcERhdGFBbmRFdmVudHMgKSB7CgkJZGF0YUFuZEV2ZW50cyA9IGRhdGFBbmRFdmVudHMgPT0gbnVsbCA/IGZhbHNlIDogZGF0YUFuZEV2ZW50czsKCQlkZWVwRGF0YUFuZEV2ZW50cyA9IGRlZXBEYXRhQW5kRXZlbnRzID09IG51bGwgPyBkYXRhQW5kRXZlbnRzIDogZGVlcERhdGFBbmRFdmVudHM7CgoJCXJldHVybiB0aGlzLm1hcCggZnVuY3Rpb24oKSB7CgkJCXJldHVybiBqUXVlcnkuY2xvbmUoIHRoaXMsIGRhdGFBbmRFdmVudHMsIGRlZXBEYXRhQW5kRXZlbnRzICk7CgkJfSApOwoJfSwKCglodG1sOiBmdW5jdGlvbiggdmFsdWUgKSB7CgkJcmV0dXJuIGFjY2VzcyggdGhpcywgZnVuY3Rpb24oIHZhbHVlICkgewoJCQl2YXIgZWxlbSA9IHRoaXNbIDAgXSB8fCB7fSwKCQkJCWkgPSAwLAoJCQkJbCA9IHRoaXMubGVuZ3RoOwoKCQkJaWYgKCB2YWx1ZSA9PT0gdW5kZWZpbmVkICkgewoJCQkJcmV0dXJuIGVsZW0ubm9kZVR5cGUgPT09IDEgPwoJCQkJCWVsZW0uaW5uZXJIVE1MLnJlcGxhY2UoIHJpbmxpbmVqUXVlcnksICIiICkgOgoJCQkJCXVuZGVmaW5lZDsKCQkJfQoKCQkJLy8gU2VlIGlmIHdlIGNhbiB0YWtlIGEgc2hvcnRjdXQgYW5kIGp1c3QgdXNlIGlubmVySFRNTAoJCQlpZiAoIHR5cGVvZiB2YWx1ZSA9PT0gInN0cmluZyIgJiYgIXJub0lubmVyaHRtbC50ZXN0KCB2YWx1ZSApICYmCgkJCQkoIHN1cHBvcnQuaHRtbFNlcmlhbGl6ZSB8fCAhcm5vc2hpbWNhY2hlLnRlc3QoIHZhbHVlICkgICkgJiYKCQkJCSggc3VwcG9ydC5sZWFkaW5nV2hpdGVzcGFjZSB8fCAhcmxlYWRpbmdXaGl0ZXNwYWNlLnRlc3QoIHZhbHVlICkgKSAmJgoJCQkJIXdyYXBNYXBbICggcnRhZ05hbWUuZXhlYyggdmFsdWUgKSB8fCBbICIiLCAiIiBdIClbIDEgXS50b0xvd2VyQ2FzZSgpIF0gKSB7CgoJCQkJdmFsdWUgPSBqUXVlcnkuaHRtbFByZWZpbHRlciggdmFsdWUgKTsKCgkJCQl0cnkgewoJCQkJCWZvciAoIDsgaSA8IGw7IGkrKyApIHsKCgkJCQkJCS8vIFJlbW92ZSBlbGVtZW50IG5vZGVzIGFuZCBwcmV2ZW50IG1lbW9yeSBsZWFrcwoJCQkJCQllbGVtID0gdGhpc1sgaSBdIHx8IHt9OwoJCQkJCQlpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7CgkJCQkJCQlqUXVlcnkuY2xlYW5EYXRhKCBnZXRBbGwoIGVsZW0sIGZhbHNlICkgKTsKCQkJCQkJCWVsZW0uaW5uZXJIVE1MID0gdmFsdWU7CgkJCQkJCX0KCQkJCQl9CgoJCQkJCWVsZW0gPSAwOwoKCQkJCS8vIElmIHVzaW5nIGlubmVySFRNTCB0aHJvd3MgYW4gZXhjZXB0aW9uLCB1c2UgdGhlIGZhbGxiYWNrIG1ldGhvZAoJCQkJfSBjYXRjaCAoIGUgKSB7fQoJCQl9CgoJCQlpZiAoIGVsZW0gKSB7CgkJCQl0aGlzLmVtcHR5KCkuYXBwZW5kKCB2YWx1ZSApOwoJCQl9CgkJfSwgbnVsbCwgdmFsdWUsIGFyZ3VtZW50cy5sZW5ndGggKTsKCX0sCgoJcmVwbGFjZVdpdGg6IGZ1bmN0aW9uKCkgewoJCXZhciBpZ25vcmVkID0gW107CgoJCS8vIE1ha2UgdGhlIGNoYW5nZXMsIHJlcGxhY2luZyBlYWNoIG5vbi1pZ25vcmVkIGNvbnRleHQgZWxlbWVudCB3aXRoIHRoZSBuZXcgY29udGVudAoJCXJldHVybiBkb21NYW5pcCggdGhpcywgYXJndW1lbnRzLCBmdW5jdGlvbiggZWxlbSApIHsKCQkJdmFyIHBhcmVudCA9IHRoaXMucGFyZW50Tm9kZTsKCgkJCWlmICggalF1ZXJ5LmluQXJyYXkoIHRoaXMsIGlnbm9yZWQgKSA8IDAgKSB7CgkJCQlqUXVlcnkuY2xlYW5EYXRhKCBnZXRBbGwoIHRoaXMgKSApOwoJCQkJaWYgKCBwYXJlbnQgKSB7CgkJCQkJcGFyZW50LnJlcGxhY2VDaGlsZCggZWxlbSwgdGhpcyApOwoJCQkJfQoJCQl9CgoJCS8vIEZvcmNlIGNhbGxiYWNrIGludm9jYXRpb24KCQl9LCBpZ25vcmVkICk7Cgl9Cn0gKTsKCmpRdWVyeS5lYWNoKCB7CglhcHBlbmRUbzogImFwcGVuZCIsCglwcmVwZW5kVG86ICJwcmVwZW5kIiwKCWluc2VydEJlZm9yZTogImJlZm9yZSIsCglpbnNlcnRBZnRlcjogImFmdGVyIiwKCXJlcGxhY2VBbGw6ICJyZXBsYWNlV2l0aCIKfSwgZnVuY3Rpb24oIG5hbWUsIG9yaWdpbmFsICkgewoJalF1ZXJ5LmZuWyBuYW1lIF0gPSBmdW5jdGlvbiggc2VsZWN0b3IgKSB7CgkJdmFyIGVsZW1zLAoJCQlpID0gMCwKCQkJcmV0ID0gW10sCgkJCWluc2VydCA9IGpRdWVyeSggc2VsZWN0b3IgKSwKCQkJbGFzdCA9IGluc2VydC5sZW5ndGggLSAxOwoKCQlmb3IgKCA7IGkgPD0gbGFzdDsgaSsrICkgewoJCQllbGVtcyA9IGkgPT09IGxhc3QgPyB0aGlzIDogdGhpcy5jbG9uZSggdHJ1ZSApOwoJCQlqUXVlcnkoIGluc2VydFsgaSBdIClbIG9yaWdpbmFsIF0oIGVsZW1zICk7CgoJCQkvLyBNb2Rlcm4gYnJvd3NlcnMgY2FuIGFwcGx5IGpRdWVyeSBjb2xsZWN0aW9ucyBhcyBhcnJheXMsIGJ1dCBvbGRJRSBuZWVkcyBhIC5nZXQoKQoJCQlwdXNoLmFwcGx5KCByZXQsIGVsZW1zLmdldCgpICk7CgkJfQoKCQlyZXR1cm4gdGhpcy5wdXNoU3RhY2soIHJldCApOwoJfTsKfSApOwoKCnZhciBpZnJhbWUsCgllbGVtZGlzcGxheSA9IHsKCgkJLy8gU3VwcG9ydDogRmlyZWZveAoJCS8vIFdlIGhhdmUgdG8gcHJlLWRlZmluZSB0aGVzZSB2YWx1ZXMgZm9yIEZGICgjMTAyMjcpCgkJSFRNTDogImJsb2NrIiwKCQlCT0RZOiAiYmxvY2siCgl9OwoKLyoqCiAqIFJldHJpZXZlIHRoZSBhY3R1YWwgZGlzcGxheSBvZiBhIGVsZW1lbnQKICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgbm9kZU5hbWUgb2YgdGhlIGVsZW1lbnQKICogQHBhcmFtIHtPYmplY3R9IGRvYyBEb2N1bWVudCBvYmplY3QKICovCgovLyBDYWxsZWQgb25seSBmcm9tIHdpdGhpbiBkZWZhdWx0RGlzcGxheQpmdW5jdGlvbiBhY3R1YWxEaXNwbGF5KCBuYW1lLCBkb2MgKSB7Cgl2YXIgZWxlbSA9IGpRdWVyeSggZG9jLmNyZWF0ZUVsZW1lbnQoIG5hbWUgKSApLmFwcGVuZFRvKCBkb2MuYm9keSApLAoKCQlkaXNwbGF5ID0galF1ZXJ5LmNzcyggZWxlbVsgMCBdLCAiZGlzcGxheSIgKTsKCgkvLyBXZSBkb24ndCBoYXZlIGFueSBkYXRhIHN0b3JlZCBvbiB0aGUgZWxlbWVudCwKCS8vIHNvIHVzZSAiZGV0YWNoIiBtZXRob2QgYXMgZmFzdCB3YXkgdG8gZ2V0IHJpZCBvZiB0aGUgZWxlbWVudAoJZWxlbS5kZXRhY2goKTsKCglyZXR1cm4gZGlzcGxheTsKfQoKLyoqCiAqIFRyeSB0byBkZXRlcm1pbmUgdGhlIGRlZmF1bHQgZGlzcGxheSB2YWx1ZSBvZiBhbiBlbGVtZW50CiAqIEBwYXJhbSB7U3RyaW5nfSBub2RlTmFtZQogKi8KZnVuY3Rpb24gZGVmYXVsdERpc3BsYXkoIG5vZGVOYW1lICkgewoJdmFyIGRvYyA9IGRvY3VtZW50LAoJCWRpc3BsYXkgPSBlbGVtZGlzcGxheVsgbm9kZU5hbWUgXTsKCglpZiAoICFkaXNwbGF5ICkgewoJCWRpc3BsYXkgPSBhY3R1YWxEaXNwbGF5KCBub2RlTmFtZSwgZG9jICk7CgoJCS8vIElmIHRoZSBzaW1wbGUgd2F5IGZhaWxzLCByZWFkIGZyb20gaW5zaWRlIGFuIGlmcmFtZQoJCWlmICggZGlzcGxheSA9PT0gIm5vbmUiIHx8ICFkaXNwbGF5ICkgewoKCQkJLy8gVXNlIHRoZSBhbHJlYWR5LWNyZWF0ZWQgaWZyYW1lIGlmIHBvc3NpYmxlCgkJCWlmcmFtZSA9ICggaWZyYW1lIHx8IGpRdWVyeSggIjxpZnJhbWUgZnJhbWVib3JkZXI9JzAnIHdpZHRoPScwJyBoZWlnaHQ9JzAnLz4iICkgKQoJCQkJLmFwcGVuZFRvKCBkb2MuZG9jdW1lbnRFbGVtZW50ICk7CgoJCQkvLyBBbHdheXMgd3JpdGUgYSBuZXcgSFRNTCBza2VsZXRvbiBzbyBXZWJraXQgYW5kIEZpcmVmb3ggZG9uJ3QgY2hva2Ugb24gcmV1c2UKCQkJZG9jID0gKCBpZnJhbWVbIDAgXS5jb250ZW50V2luZG93IHx8IGlmcmFtZVsgMCBdLmNvbnRlbnREb2N1bWVudCApLmRvY3VtZW50OwoKCQkJLy8gU3VwcG9ydDogSUUKCQkJZG9jLndyaXRlKCk7CgkJCWRvYy5jbG9zZSgpOwoKCQkJZGlzcGxheSA9IGFjdHVhbERpc3BsYXkoIG5vZGVOYW1lLCBkb2MgKTsKCQkJaWZyYW1lLmRldGFjaCgpOwoJCX0KCgkJLy8gU3RvcmUgdGhlIGNvcnJlY3QgZGVmYXVsdCBkaXNwbGF5CgkJZWxlbWRpc3BsYXlbIG5vZGVOYW1lIF0gPSBkaXNwbGF5OwoJfQoKCXJldHVybiBkaXNwbGF5Owp9CnZhciBybWFyZ2luID0gKCAvXm1hcmdpbi8gKTsKCnZhciBybnVtbm9ucHggPSBuZXcgUmVnRXhwKCAiXigiICsgcG51bSArICIpKD8hcHgpW2EteiVdKyQiLCAiaSIgKTsKCnZhciBzd2FwID0gZnVuY3Rpb24oIGVsZW0sIG9wdGlvbnMsIGNhbGxiYWNrLCBhcmdzICkgewoJdmFyIHJldCwgbmFtZSwKCQlvbGQgPSB7fTsKCgkvLyBSZW1lbWJlciB0aGUgb2xkIHZhbHVlcywgYW5kIGluc2VydCB0aGUgbmV3IG9uZXMKCWZvciAoIG5hbWUgaW4gb3B0aW9ucyApIHsKCQlvbGRbIG5hbWUgXSA9IGVsZW0uc3R5bGVbIG5hbWUgXTsKCQllbGVtLnN0eWxlWyBuYW1lIF0gPSBvcHRpb25zWyBuYW1lIF07Cgl9CgoJcmV0ID0gY2FsbGJhY2suYXBwbHkoIGVsZW0sIGFyZ3MgfHwgW10gKTsKCgkvLyBSZXZlcnQgdGhlIG9sZCB2YWx1ZXMKCWZvciAoIG5hbWUgaW4gb3B0aW9ucyApIHsKCQllbGVtLnN0eWxlWyBuYW1lIF0gPSBvbGRbIG5hbWUgXTsKCX0KCglyZXR1cm4gcmV0Owp9OwoKCnZhciBkb2N1bWVudEVsZW1lbnQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7CgoKCiggZnVuY3Rpb24oKSB7Cgl2YXIgcGl4ZWxQb3NpdGlvblZhbCwgcGl4ZWxNYXJnaW5SaWdodFZhbCwgYm94U2l6aW5nUmVsaWFibGVWYWwsCgkJcmVsaWFibGVIaWRkZW5PZmZzZXRzVmFsLCByZWxpYWJsZU1hcmdpblJpZ2h0VmFsLCByZWxpYWJsZU1hcmdpbkxlZnRWYWwsCgkJY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggImRpdiIgKSwKCQlkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAiZGl2IiApOwoKCS8vIEZpbmlzaCBlYXJseSBpbiBsaW1pdGVkIChub24tYnJvd3NlcikgZW52aXJvbm1lbnRzCglpZiAoICFkaXYuc3R5bGUgKSB7CgkJcmV0dXJuOwoJfQoKCWRpdi5zdHlsZS5jc3NUZXh0ID0gImZsb2F0OmxlZnQ7b3BhY2l0eTouNSI7CgoJLy8gU3VwcG9ydDogSUU8OQoJLy8gTWFrZSBzdXJlIHRoYXQgZWxlbWVudCBvcGFjaXR5IGV4aXN0cyAoYXMgb3Bwb3NlZCB0byBmaWx0ZXIpCglzdXBwb3J0Lm9wYWNpdHkgPSBkaXYuc3R5bGUub3BhY2l0eSA9PT0gIjAuNSI7CgoJLy8gVmVyaWZ5IHN0eWxlIGZsb2F0IGV4aXN0ZW5jZQoJLy8gKElFIHVzZXMgc3R5bGVGbG9hdCBpbnN0ZWFkIG9mIGNzc0Zsb2F0KQoJc3VwcG9ydC5jc3NGbG9hdCA9ICEhZGl2LnN0eWxlLmNzc0Zsb2F0OwoKCWRpdi5zdHlsZS5iYWNrZ3JvdW5kQ2xpcCA9ICJjb250ZW50LWJveCI7CglkaXYuY2xvbmVOb2RlKCB0cnVlICkuc3R5bGUuYmFja2dyb3VuZENsaXAgPSAiIjsKCXN1cHBvcnQuY2xlYXJDbG9uZVN0eWxlID0gZGl2LnN0eWxlLmJhY2tncm91bmRDbGlwID09PSAiY29udGVudC1ib3giOwoKCWNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICJkaXYiICk7Cgljb250YWluZXIuc3R5bGUuY3NzVGV4dCA9ICJib3JkZXI6MDt3aWR0aDo4cHg7aGVpZ2h0OjA7dG9wOjA7bGVmdDotOTk5OXB4OyIgKwoJCSJwYWRkaW5nOjA7bWFyZ2luLXRvcDoxcHg7cG9zaXRpb246YWJzb2x1dGUiOwoJZGl2LmlubmVySFRNTCA9ICIiOwoJY29udGFpbmVyLmFwcGVuZENoaWxkKCBkaXYgKTsKCgkvLyBTdXBwb3J0OiBGaXJlZm94PDI5LCBBbmRyb2lkIDIuMwoJLy8gVmVuZG9yLXByZWZpeCBib3gtc2l6aW5nCglzdXBwb3J0LmJveFNpemluZyA9IGRpdi5zdHlsZS5ib3hTaXppbmcgPT09ICIiIHx8IGRpdi5zdHlsZS5Nb3pCb3hTaXppbmcgPT09ICIiIHx8CgkJZGl2LnN0eWxlLldlYmtpdEJveFNpemluZyA9PT0gIiI7CgoJalF1ZXJ5LmV4dGVuZCggc3VwcG9ydCwgewoJCXJlbGlhYmxlSGlkZGVuT2Zmc2V0czogZnVuY3Rpb24oKSB7CgkJCWlmICggcGl4ZWxQb3NpdGlvblZhbCA9PSBudWxsICkgewoJCQkJY29tcHV0ZVN0eWxlVGVzdHMoKTsKCQkJfQoJCQlyZXR1cm4gcmVsaWFibGVIaWRkZW5PZmZzZXRzVmFsOwoJCX0sCgoJCWJveFNpemluZ1JlbGlhYmxlOiBmdW5jdGlvbigpIHsKCgkJCS8vIFdlJ3JlIGNoZWNraW5nIGZvciBwaXhlbFBvc2l0aW9uVmFsIGhlcmUgaW5zdGVhZCBvZiBib3hTaXppbmdSZWxpYWJsZVZhbAoJCQkvLyBzaW5jZSB0aGF0IGNvbXByZXNzZXMgYmV0dGVyIGFuZCB0aGV5J3JlIGNvbXB1dGVkIHRvZ2V0aGVyIGFueXdheS4KCQkJaWYgKCBwaXhlbFBvc2l0aW9uVmFsID09IG51bGwgKSB7CgkJCQljb21wdXRlU3R5bGVUZXN0cygpOwoJCQl9CgkJCXJldHVybiBib3hTaXppbmdSZWxpYWJsZVZhbDsKCQl9LAoKCQlwaXhlbE1hcmdpblJpZ2h0OiBmdW5jdGlvbigpIHsKCgkJCS8vIFN1cHBvcnQ6IEFuZHJvaWQgNC4wLTQuMwoJCQlpZiAoIHBpeGVsUG9zaXRpb25WYWwgPT0gbnVsbCApIHsKCQkJCWNvbXB1dGVTdHlsZVRlc3RzKCk7CgkJCX0KCQkJcmV0dXJuIHBpeGVsTWFyZ2luUmlnaHRWYWw7CgkJfSwKCgkJcGl4ZWxQb3NpdGlvbjogZnVuY3Rpb24oKSB7CgkJCWlmICggcGl4ZWxQb3NpdGlvblZhbCA9PSBudWxsICkgewoJCQkJY29tcHV0ZVN0eWxlVGVzdHMoKTsKCQkJfQoJCQlyZXR1cm4gcGl4ZWxQb3NpdGlvblZhbDsKCQl9LAoKCQlyZWxpYWJsZU1hcmdpblJpZ2h0OiBmdW5jdGlvbigpIHsKCgkJCS8vIFN1cHBvcnQ6IEFuZHJvaWQgMi4zCgkJCWlmICggcGl4ZWxQb3NpdGlvblZhbCA9PSBudWxsICkgewoJCQkJY29tcHV0ZVN0eWxlVGVzdHMoKTsKCQkJfQoJCQlyZXR1cm4gcmVsaWFibGVNYXJnaW5SaWdodFZhbDsKCQl9LAoKCQlyZWxpYWJsZU1hcmdpbkxlZnQ6IGZ1bmN0aW9uKCkgewoKCQkJLy8gU3VwcG9ydDogSUUgPD04IG9ubHksIEFuZHJvaWQgNC4wIC0gNC4zIG9ubHksIEZpcmVmb3ggPD0zIC0gMzcKCQkJaWYgKCBwaXhlbFBvc2l0aW9uVmFsID09IG51bGwgKSB7CgkJCQljb21wdXRlU3R5bGVUZXN0cygpOwoJCQl9CgkJCXJldHVybiByZWxpYWJsZU1hcmdpbkxlZnRWYWw7CgkJfQoJfSApOwoKCWZ1bmN0aW9uIGNvbXB1dGVTdHlsZVRlc3RzKCkgewoJCXZhciBjb250ZW50cywgZGl2U3R5bGUsCgkJCWRvY3VtZW50RWxlbWVudCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDsKCgkJLy8gU2V0dXAKCQlkb2N1bWVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoIGNvbnRhaW5lciApOwoKCQlkaXYuc3R5bGUuY3NzVGV4dCA9CgoJCQkvLyBTdXBwb3J0OiBBbmRyb2lkIDIuMwoJCQkvLyBWZW5kb3ItcHJlZml4IGJveC1zaXppbmcKCQkJIi13ZWJraXQtYm94LXNpemluZzpib3JkZXItYm94O2JveC1zaXppbmc6Ym9yZGVyLWJveDsiICsKCQkJInBvc2l0aW9uOnJlbGF0aXZlO2Rpc3BsYXk6YmxvY2s7IiArCgkJCSJtYXJnaW46YXV0bztib3JkZXI6MXB4O3BhZGRpbmc6MXB4OyIgKwoJCQkidG9wOjElO3dpZHRoOjUwJSI7CgoJCS8vIFN1cHBvcnQ6IElFPDkKCQkvLyBBc3N1bWUgcmVhc29uYWJsZSB2YWx1ZXMgaW4gdGhlIGFic2VuY2Ugb2YgZ2V0Q29tcHV0ZWRTdHlsZQoJCXBpeGVsUG9zaXRpb25WYWwgPSBib3hTaXppbmdSZWxpYWJsZVZhbCA9IHJlbGlhYmxlTWFyZ2luTGVmdFZhbCA9IGZhbHNlOwoJCXBpeGVsTWFyZ2luUmlnaHRWYWwgPSByZWxpYWJsZU1hcmdpblJpZ2h0VmFsID0gdHJ1ZTsKCgkJLy8gQ2hlY2sgZm9yIGdldENvbXB1dGVkU3R5bGUgc28gdGhhdCB0aGlzIGNvZGUgaXMgbm90IHJ1biBpbiBJRTw5LgoJCWlmICggd2luZG93LmdldENvbXB1dGVkU3R5bGUgKSB7CgkJCWRpdlN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoIGRpdiApOwoJCQlwaXhlbFBvc2l0aW9uVmFsID0gKCBkaXZTdHlsZSB8fCB7fSApLnRvcCAhPT0gIjElIjsKCQkJcmVsaWFibGVNYXJnaW5MZWZ0VmFsID0gKCBkaXZTdHlsZSB8fCB7fSApLm1hcmdpbkxlZnQgPT09ICIycHgiOwoJCQlib3hTaXppbmdSZWxpYWJsZVZhbCA9ICggZGl2U3R5bGUgfHwgeyB3aWR0aDogIjRweCIgfSApLndpZHRoID09PSAiNHB4IjsKCgkJCS8vIFN1cHBvcnQ6IEFuZHJvaWQgNC4wIC0gNC4zIG9ubHkKCQkJLy8gU29tZSBzdHlsZXMgY29tZSBiYWNrIHdpdGggcGVyY2VudGFnZSB2YWx1ZXMsIGV2ZW4gdGhvdWdoIHRoZXkgc2hvdWxkbid0CgkJCWRpdi5zdHlsZS5tYXJnaW5SaWdodCA9ICI1MCUiOwoJCQlwaXhlbE1hcmdpblJpZ2h0VmFsID0gKCBkaXZTdHlsZSB8fCB7IG1hcmdpblJpZ2h0OiAiNHB4IiB9ICkubWFyZ2luUmlnaHQgPT09ICI0cHgiOwoKCQkJLy8gU3VwcG9ydDogQW5kcm9pZCAyLjMgb25seQoJCQkvLyBEaXYgd2l0aCBleHBsaWNpdCB3aWR0aCBhbmQgbm8gbWFyZ2luLXJpZ2h0IGluY29ycmVjdGx5CgkJCS8vIGdldHMgY29tcHV0ZWQgbWFyZ2luLXJpZ2h0IGJhc2VkIG9uIHdpZHRoIG9mIGNvbnRhaW5lciAoIzMzMzMpCgkJCS8vIFdlYktpdCBCdWcgMTMzNDMgLSBnZXRDb21wdXRlZFN0eWxlIHJldHVybnMgd3JvbmcgdmFsdWUgZm9yIG1hcmdpbi1yaWdodAoJCQljb250ZW50cyA9IGRpdi5hcHBlbmRDaGlsZCggZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggImRpdiIgKSApOwoKCQkJLy8gUmVzZXQgQ1NTOiBib3gtc2l6aW5nOyBkaXNwbGF5OyBtYXJnaW47IGJvcmRlcjsgcGFkZGluZwoJCQljb250ZW50cy5zdHlsZS5jc3NUZXh0ID0gZGl2LnN0eWxlLmNzc1RleHQgPQoKCQkJCS8vIFN1cHBvcnQ6IEFuZHJvaWQgMi4zCgkJCQkvLyBWZW5kb3ItcHJlZml4IGJveC1zaXppbmcKCQkJCSItd2Via2l0LWJveC1zaXppbmc6Y29udGVudC1ib3g7LW1vei1ib3gtc2l6aW5nOmNvbnRlbnQtYm94OyIgKwoJCQkJImJveC1zaXppbmc6Y29udGVudC1ib3g7ZGlzcGxheTpibG9jazttYXJnaW46MDtib3JkZXI6MDtwYWRkaW5nOjAiOwoJCQljb250ZW50cy5zdHlsZS5tYXJnaW5SaWdodCA9IGNvbnRlbnRzLnN0eWxlLndpZHRoID0gIjAiOwoJCQlkaXYuc3R5bGUud2lkdGggPSAiMXB4IjsKCgkJCXJlbGlhYmxlTWFyZ2luUmlnaHRWYWwgPQoJCQkJIXBhcnNlRmxvYXQoICggd2luZG93LmdldENvbXB1dGVkU3R5bGUoIGNvbnRlbnRzICkgfHwge30gKS5tYXJnaW5SaWdodCApOwoKCQkJZGl2LnJlbW92ZUNoaWxkKCBjb250ZW50cyApOwoJCX0KCgkJLy8gU3VwcG9ydDogSUU2LTgKCQkvLyBGaXJzdCBjaGVjayB0aGF0IGdldENsaWVudFJlY3RzIHdvcmtzIGFzIGV4cGVjdGVkCgkJLy8gQ2hlY2sgaWYgdGFibGUgY2VsbHMgc3RpbGwgaGF2ZSBvZmZzZXRXaWR0aC9IZWlnaHQgd2hlbiB0aGV5IGFyZSBzZXQKCQkvLyB0byBkaXNwbGF5Om5vbmUgYW5kIHRoZXJlIGFyZSBzdGlsbCBvdGhlciB2aXNpYmxlIHRhYmxlIGNlbGxzIGluIGEKCQkvLyB0YWJsZSByb3c7IGlmIHNvLCBvZmZzZXRXaWR0aC9IZWlnaHQgYXJlIG5vdCByZWxpYWJsZSBmb3IgdXNlIHdoZW4KCQkvLyBkZXRlcm1pbmluZyBpZiBhbiBlbGVtZW50IGhhcyBiZWVuIGhpZGRlbiBkaXJlY3RseSB1c2luZwoJCS8vIGRpc3BsYXk6bm9uZSAoaXQgaXMgc3RpbGwgc2FmZSB0byB1c2Ugb2Zmc2V0cyBpZiBhIHBhcmVudCBlbGVtZW50IGlzCgkJLy8gaGlkZGVuOyBkb24gc2FmZXR5IGdvZ2dsZXMgYW5kIHNlZSBidWcgIzQ1MTIgZm9yIG1vcmUgaW5mb3JtYXRpb24pLgoJCWRpdi5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwoJCXJlbGlhYmxlSGlkZGVuT2Zmc2V0c1ZhbCA9IGRpdi5nZXRDbGllbnRSZWN0cygpLmxlbmd0aCA9PT0gMDsKCQlpZiAoIHJlbGlhYmxlSGlkZGVuT2Zmc2V0c1ZhbCApIHsKCQkJZGl2LnN0eWxlLmRpc3BsYXkgPSAiIjsKCQkJZGl2LmlubmVySFRNTCA9ICI8dGFibGU+PHRyPjx0ZD48L3RkPjx0ZD50PC90ZD48L3RyPjwvdGFibGU+IjsKCQkJZGl2LmNoaWxkTm9kZXNbIDAgXS5zdHlsZS5ib3JkZXJDb2xsYXBzZSA9ICJzZXBhcmF0ZSI7CgkJCWNvbnRlbnRzID0gZGl2LmdldEVsZW1lbnRzQnlUYWdOYW1lKCAidGQiICk7CgkJCWNvbnRlbnRzWyAwIF0uc3R5bGUuY3NzVGV4dCA9ICJtYXJnaW46MDtib3JkZXI6MDtwYWRkaW5nOjA7ZGlzcGxheTpub25lIjsKCQkJcmVsaWFibGVIaWRkZW5PZmZzZXRzVmFsID0gY29udGVudHNbIDAgXS5vZmZzZXRIZWlnaHQgPT09IDA7CgkJCWlmICggcmVsaWFibGVIaWRkZW5PZmZzZXRzVmFsICkgewoJCQkJY29udGVudHNbIDAgXS5zdHlsZS5kaXNwbGF5ID0gIiI7CgkJCQljb250ZW50c1sgMSBdLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CgkJCQlyZWxpYWJsZUhpZGRlbk9mZnNldHNWYWwgPSBjb250ZW50c1sgMCBdLm9mZnNldEhlaWdodCA9PT0gMDsKCQkJfQoJCX0KCgkJLy8gVGVhcmRvd24KCQlkb2N1bWVudEVsZW1lbnQucmVtb3ZlQ2hpbGQoIGNvbnRhaW5lciApOwoJfQoKfSApKCk7CgoKdmFyIGdldFN0eWxlcywgY3VyQ1NTLAoJcnBvc2l0aW9uID0gL14odG9wfHJpZ2h0fGJvdHRvbXxsZWZ0KSQvOwoKaWYgKCB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSApIHsKCWdldFN0eWxlcyA9IGZ1bmN0aW9uKCBlbGVtICkgewoKCQkvLyBTdXBwb3J0OiBJRTw9MTErLCBGaXJlZm94PD0zMCsgKCMxNTA5OCwgIzE0MTUwKQoJCS8vIElFIHRocm93cyBvbiBlbGVtZW50cyBjcmVhdGVkIGluIHBvcHVwcwoJCS8vIEZGIG1lYW53aGlsZSB0aHJvd3Mgb24gZnJhbWUgZWxlbWVudHMgdGhyb3VnaCAiZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZSIKCQl2YXIgdmlldyA9IGVsZW0ub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldzsKCgkJaWYgKCAhdmlldyB8fCAhdmlldy5vcGVuZXIgKSB7CgkJCXZpZXcgPSB3aW5kb3c7CgkJfQoKCQlyZXR1cm4gdmlldy5nZXRDb21wdXRlZFN0eWxlKCBlbGVtICk7Cgl9OwoKCWN1ckNTUyA9IGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCBjb21wdXRlZCApIHsKCQl2YXIgd2lkdGgsIG1pbldpZHRoLCBtYXhXaWR0aCwgcmV0LAoJCQlzdHlsZSA9IGVsZW0uc3R5bGU7CgoJCWNvbXB1dGVkID0gY29tcHV0ZWQgfHwgZ2V0U3R5bGVzKCBlbGVtICk7CgoJCS8vIGdldFByb3BlcnR5VmFsdWUgaXMgb25seSBuZWVkZWQgZm9yIC5jc3MoJ2ZpbHRlcicpIGluIElFOSwgc2VlICMxMjUzNwoJCXJldCA9IGNvbXB1dGVkID8gY29tcHV0ZWQuZ2V0UHJvcGVydHlWYWx1ZSggbmFtZSApIHx8IGNvbXB1dGVkWyBuYW1lIF0gOiB1bmRlZmluZWQ7CgoJCS8vIFN1cHBvcnQ6IE9wZXJhIDEyLjF4IG9ubHkKCQkvLyBGYWxsIGJhY2sgdG8gc3R5bGUgZXZlbiB3aXRob3V0IGNvbXB1dGVkCgkJLy8gY29tcHV0ZWQgaXMgdW5kZWZpbmVkIGZvciBlbGVtcyBvbiBkb2N1bWVudCBmcmFnbWVudHMKCQlpZiAoICggcmV0ID09PSAiIiB8fCByZXQgPT09IHVuZGVmaW5lZCApICYmICFqUXVlcnkuY29udGFpbnMoIGVsZW0ub3duZXJEb2N1bWVudCwgZWxlbSApICkgewoJCQlyZXQgPSBqUXVlcnkuc3R5bGUoIGVsZW0sIG5hbWUgKTsKCQl9CgoJCWlmICggY29tcHV0ZWQgKSB7CgoJCQkvLyBBIHRyaWJ1dGUgdG8gdGhlICJhd2Vzb21lIGhhY2sgYnkgRGVhbiBFZHdhcmRzIgoJCQkvLyBDaHJvbWUgPCAxNyBhbmQgU2FmYXJpIDUuMCB1c2VzICJjb21wdXRlZCB2YWx1ZSIKCQkJLy8gaW5zdGVhZCBvZiAidXNlZCB2YWx1ZSIgZm9yIG1hcmdpbi1yaWdodAoJCQkvLyBTYWZhcmkgNS4xLjcgKGF0IGxlYXN0KSByZXR1cm5zIHBlcmNlbnRhZ2UgZm9yIGEgbGFyZ2VyIHNldCBvZiB2YWx1ZXMsCgkJCS8vIGJ1dCB3aWR0aCBzZWVtcyB0byBiZSByZWxpYWJseSBwaXhlbHMKCQkJLy8gdGhpcyBpcyBhZ2FpbnN0IHRoZSBDU1NPTSBkcmFmdCBzcGVjOgoJCQkvLyBodHRwOi8vZGV2LnczLm9yZy9jc3N3Zy9jc3NvbS8jcmVzb2x2ZWQtdmFsdWVzCgkJCWlmICggIXN1cHBvcnQucGl4ZWxNYXJnaW5SaWdodCgpICYmIHJudW1ub25weC50ZXN0KCByZXQgKSAmJiBybWFyZ2luLnRlc3QoIG5hbWUgKSApIHsKCgkJCQkvLyBSZW1lbWJlciB0aGUgb3JpZ2luYWwgdmFsdWVzCgkJCQl3aWR0aCA9IHN0eWxlLndpZHRoOwoJCQkJbWluV2lkdGggPSBzdHlsZS5taW5XaWR0aDsKCQkJCW1heFdpZHRoID0gc3R5bGUubWF4V2lkdGg7CgoJCQkJLy8gUHV0IGluIHRoZSBuZXcgdmFsdWVzIHRvIGdldCBhIGNvbXB1dGVkIHZhbHVlIG91dAoJCQkJc3R5bGUubWluV2lkdGggPSBzdHlsZS5tYXhXaWR0aCA9IHN0eWxlLndpZHRoID0gcmV0OwoJCQkJcmV0ID0gY29tcHV0ZWQud2lkdGg7CgoJCQkJLy8gUmV2ZXJ0IHRoZSBjaGFuZ2VkIHZhbHVlcwoJCQkJc3R5bGUud2lkdGggPSB3aWR0aDsKCQkJCXN0eWxlLm1pbldpZHRoID0gbWluV2lkdGg7CgkJCQlzdHlsZS5tYXhXaWR0aCA9IG1heFdpZHRoOwoJCQl9CgkJfQoKCQkvLyBTdXBwb3J0OiBJRQoJCS8vIElFIHJldHVybnMgekluZGV4IHZhbHVlIGFzIGFuIGludGVnZXIuCgkJcmV0dXJuIHJldCA9PT0gdW5kZWZpbmVkID8KCQkJcmV0IDoKCQkJcmV0ICsgIiI7Cgl9Owp9IGVsc2UgaWYgKCBkb2N1bWVudEVsZW1lbnQuY3VycmVudFN0eWxlICkgewoJZ2V0U3R5bGVzID0gZnVuY3Rpb24oIGVsZW0gKSB7CgkJcmV0dXJuIGVsZW0uY3VycmVudFN0eWxlOwoJfTsKCgljdXJDU1MgPSBmdW5jdGlvbiggZWxlbSwgbmFtZSwgY29tcHV0ZWQgKSB7CgkJdmFyIGxlZnQsIHJzLCByc0xlZnQsIHJldCwKCQkJc3R5bGUgPSBlbGVtLnN0eWxlOwoKCQljb21wdXRlZCA9IGNvbXB1dGVkIHx8IGdldFN0eWxlcyggZWxlbSApOwoJCXJldCA9IGNvbXB1dGVkID8gY29tcHV0ZWRbIG5hbWUgXSA6IHVuZGVmaW5lZDsKCgkJLy8gQXZvaWQgc2V0dGluZyByZXQgdG8gZW1wdHkgc3RyaW5nIGhlcmUKCQkvLyBzbyB3ZSBkb24ndCBkZWZhdWx0IHRvIGF1dG8KCQlpZiAoIHJldCA9PSBudWxsICYmIHN0eWxlICYmIHN0eWxlWyBuYW1lIF0gKSB7CgkJCXJldCA9IHN0eWxlWyBuYW1lIF07CgkJfQoKCQkvLyBGcm9tIHRoZSBhd2Vzb21lIGhhY2sgYnkgRGVhbiBFZHdhcmRzCgkJLy8gaHR0cDovL2VyaWsuZWFlLm5ldC9hcmNoaXZlcy8yMDA3LzA3LzI3LzE4LjU0LjE1LyNjb21tZW50LTEwMjI5MQoKCQkvLyBJZiB3ZSdyZSBub3QgZGVhbGluZyB3aXRoIGEgcmVndWxhciBwaXhlbCBudW1iZXIKCQkvLyBidXQgYSBudW1iZXIgdGhhdCBoYXMgYSB3ZWlyZCBlbmRpbmcsIHdlIG5lZWQgdG8gY29udmVydCBpdCB0byBwaXhlbHMKCQkvLyBidXQgbm90IHBvc2l0aW9uIGNzcyBhdHRyaWJ1dGVzLCBhcyB0aG9zZSBhcmUKCQkvLyBwcm9wb3J0aW9uYWwgdG8gdGhlIHBhcmVudCBlbGVtZW50IGluc3RlYWQKCQkvLyBhbmQgd2UgY2FuJ3QgbWVhc3VyZSB0aGUgcGFyZW50IGluc3RlYWQgYmVjYXVzZSBpdAoJCS8vIG1pZ2h0IHRyaWdnZXIgYSAic3RhY2tpbmcgZG9sbHMiIHByb2JsZW0KCQlpZiAoIHJudW1ub25weC50ZXN0KCByZXQgKSAmJiAhcnBvc2l0aW9uLnRlc3QoIG5hbWUgKSApIHsKCgkJCS8vIFJlbWVtYmVyIHRoZSBvcmlnaW5hbCB2YWx1ZXMKCQkJbGVmdCA9IHN0eWxlLmxlZnQ7CgkJCXJzID0gZWxlbS5ydW50aW1lU3R5bGU7CgkJCXJzTGVmdCA9IHJzICYmIHJzLmxlZnQ7CgoJCQkvLyBQdXQgaW4gdGhlIG5ldyB2YWx1ZXMgdG8gZ2V0IGEgY29tcHV0ZWQgdmFsdWUgb3V0CgkJCWlmICggcnNMZWZ0ICkgewoJCQkJcnMubGVmdCA9IGVsZW0uY3VycmVudFN0eWxlLmxlZnQ7CgkJCX0KCQkJc3R5bGUubGVmdCA9IG5hbWUgPT09ICJmb250U2l6ZSIgPyAiMWVtIiA6IHJldDsKCQkJcmV0ID0gc3R5bGUucGl4ZWxMZWZ0ICsgInB4IjsKCgkJCS8vIFJldmVydCB0aGUgY2hhbmdlZCB2YWx1ZXMKCQkJc3R5bGUubGVmdCA9IGxlZnQ7CgkJCWlmICggcnNMZWZ0ICkgewoJCQkJcnMubGVmdCA9IHJzTGVmdDsKCQkJfQoJCX0KCgkJLy8gU3VwcG9ydDogSUUKCQkvLyBJRSByZXR1cm5zIHpJbmRleCB2YWx1ZSBhcyBhbiBpbnRlZ2VyLgoJCXJldHVybiByZXQgPT09IHVuZGVmaW5lZCA/CgkJCXJldCA6CgkJCXJldCArICIiIHx8ICJhdXRvIjsKCX07Cn0KCgoKCmZ1bmN0aW9uIGFkZEdldEhvb2tJZiggY29uZGl0aW9uRm4sIGhvb2tGbiApIHsKCgkvLyBEZWZpbmUgdGhlIGhvb2ssIHdlJ2xsIGNoZWNrIG9uIHRoZSBmaXJzdCBydW4gaWYgaXQncyByZWFsbHkgbmVlZGVkLgoJcmV0dXJuIHsKCQlnZXQ6IGZ1bmN0aW9uKCkgewoJCQlpZiAoIGNvbmRpdGlvbkZuKCkgKSB7CgoJCQkJLy8gSG9vayBub3QgbmVlZGVkIChvciBpdCdzIG5vdCBwb3NzaWJsZSB0byB1c2UgaXQgZHVlCgkJCQkvLyB0byBtaXNzaW5nIGRlcGVuZGVuY3kpLCByZW1vdmUgaXQuCgkJCQlkZWxldGUgdGhpcy5nZXQ7CgkJCQlyZXR1cm47CgkJCX0KCgkJCS8vIEhvb2sgbmVlZGVkOyByZWRlZmluZSBpdCBzbyB0aGF0IHRoZSBzdXBwb3J0IHRlc3QgaXMgbm90IGV4ZWN1dGVkIGFnYWluLgoJCQlyZXR1cm4gKCB0aGlzLmdldCA9IGhvb2tGbiApLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTsKCQl9Cgl9Owp9CgoKdmFyCgoJCXJhbHBoYSA9IC9hbHBoYVwoW14pXSpcKS9pLAoJcm9wYWNpdHkgPSAvb3BhY2l0eVxzKj1ccyooW14pXSopL2ksCgoJLy8gc3dhcHBhYmxlIGlmIGRpc3BsYXkgaXMgbm9uZSBvciBzdGFydHMgd2l0aCB0YWJsZSBleGNlcHQKCS8vICJ0YWJsZSIsICJ0YWJsZS1jZWxsIiwgb3IgInRhYmxlLWNhcHRpb24iCgkvLyBzZWUgaGVyZSBmb3IgZGlzcGxheSB2YWx1ZXM6CgkvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL0NTUy9kaXNwbGF5CglyZGlzcGxheXN3YXAgPSAvXihub25lfHRhYmxlKD8hLWNbZWFdKS4rKS8sCglybnVtc3BsaXQgPSBuZXcgUmVnRXhwKCAiXigiICsgcG51bSArICIpKC4qKSQiLCAiaSIgKSwKCgljc3NTaG93ID0geyBwb3NpdGlvbjogImFic29sdXRlIiwgdmlzaWJpbGl0eTogImhpZGRlbiIsIGRpc3BsYXk6ICJibG9jayIgfSwKCWNzc05vcm1hbFRyYW5zZm9ybSA9IHsKCQlsZXR0ZXJTcGFjaW5nOiAiMCIsCgkJZm9udFdlaWdodDogIjQwMCIKCX0sCgoJY3NzUHJlZml4ZXMgPSBbICJXZWJraXQiLCAiTyIsICJNb3oiLCAibXMiIF0sCgllbXB0eVN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggImRpdiIgKS5zdHlsZTsKCgovLyByZXR1cm4gYSBjc3MgcHJvcGVydHkgbWFwcGVkIHRvIGEgcG90ZW50aWFsbHkgdmVuZG9yIHByZWZpeGVkIHByb3BlcnR5CmZ1bmN0aW9uIHZlbmRvclByb3BOYW1lKCBuYW1lICkgewoKCS8vIHNob3J0Y3V0IGZvciBuYW1lcyB0aGF0IGFyZSBub3QgdmVuZG9yIHByZWZpeGVkCglpZiAoIG5hbWUgaW4gZW1wdHlTdHlsZSApIHsKCQlyZXR1cm4gbmFtZTsKCX0KCgkvLyBjaGVjayBmb3IgdmVuZG9yIHByZWZpeGVkIG5hbWVzCgl2YXIgY2FwTmFtZSA9IG5hbWUuY2hhckF0KCAwICkudG9VcHBlckNhc2UoKSArIG5hbWUuc2xpY2UoIDEgKSwKCQlpID0gY3NzUHJlZml4ZXMubGVuZ3RoOwoKCXdoaWxlICggaS0tICkgewoJCW5hbWUgPSBjc3NQcmVmaXhlc1sgaSBdICsgY2FwTmFtZTsKCQlpZiAoIG5hbWUgaW4gZW1wdHlTdHlsZSApIHsKCQkJcmV0dXJuIG5hbWU7CgkJfQoJfQp9CgpmdW5jdGlvbiBzaG93SGlkZSggZWxlbWVudHMsIHNob3cgKSB7Cgl2YXIgZGlzcGxheSwgZWxlbSwgaGlkZGVuLAoJCXZhbHVlcyA9IFtdLAoJCWluZGV4ID0gMCwKCQlsZW5ndGggPSBlbGVtZW50cy5sZW5ndGg7CgoJZm9yICggOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKyApIHsKCQllbGVtID0gZWxlbWVudHNbIGluZGV4IF07CgkJaWYgKCAhZWxlbS5zdHlsZSApIHsKCQkJY29udGludWU7CgkJfQoKCQl2YWx1ZXNbIGluZGV4IF0gPSBqUXVlcnkuX2RhdGEoIGVsZW0sICJvbGRkaXNwbGF5IiApOwoJCWRpc3BsYXkgPSBlbGVtLnN0eWxlLmRpc3BsYXk7CgkJaWYgKCBzaG93ICkgewoKCQkJLy8gUmVzZXQgdGhlIGlubGluZSBkaXNwbGF5IG9mIHRoaXMgZWxlbWVudCB0byBsZWFybiBpZiBpdCBpcwoJCQkvLyBiZWluZyBoaWRkZW4gYnkgY2FzY2FkZWQgcnVsZXMgb3Igbm90CgkJCWlmICggIXZhbHVlc1sgaW5kZXggXSAmJiBkaXNwbGF5ID09PSAibm9uZSIgKSB7CgkJCQllbGVtLnN0eWxlLmRpc3BsYXkgPSAiIjsKCQkJfQoKCQkJLy8gU2V0IGVsZW1lbnRzIHdoaWNoIGhhdmUgYmVlbiBvdmVycmlkZGVuIHdpdGggZGlzcGxheTogbm9uZQoJCQkvLyBpbiBhIHN0eWxlc2hlZXQgdG8gd2hhdGV2ZXIgdGhlIGRlZmF1bHQgYnJvd3NlciBzdHlsZSBpcwoJCQkvLyBmb3Igc3VjaCBhbiBlbGVtZW50CgkJCWlmICggZWxlbS5zdHlsZS5kaXNwbGF5ID09PSAiIiAmJiBpc0hpZGRlbiggZWxlbSApICkgewoJCQkJdmFsdWVzWyBpbmRleCBdID0KCQkJCQlqUXVlcnkuX2RhdGEoIGVsZW0sICJvbGRkaXNwbGF5IiwgZGVmYXVsdERpc3BsYXkoIGVsZW0ubm9kZU5hbWUgKSApOwoJCQl9CgkJfSBlbHNlIHsKCQkJaGlkZGVuID0gaXNIaWRkZW4oIGVsZW0gKTsKCgkJCWlmICggZGlzcGxheSAmJiBkaXNwbGF5ICE9PSAibm9uZSIgfHwgIWhpZGRlbiApIHsKCQkJCWpRdWVyeS5fZGF0YSgKCQkJCQllbGVtLAoJCQkJCSJvbGRkaXNwbGF5IiwKCQkJCQloaWRkZW4gPyBkaXNwbGF5IDogalF1ZXJ5LmNzcyggZWxlbSwgImRpc3BsYXkiICkKCQkJCSk7CgkJCX0KCQl9Cgl9CgoJLy8gU2V0IHRoZSBkaXNwbGF5IG9mIG1vc3Qgb2YgdGhlIGVsZW1lbnRzIGluIGEgc2Vjb25kIGxvb3AKCS8vIHRvIGF2b2lkIHRoZSBjb25zdGFudCByZWZsb3cKCWZvciAoIGluZGV4ID0gMDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KysgKSB7CgkJZWxlbSA9IGVsZW1lbnRzWyBpbmRleCBdOwoJCWlmICggIWVsZW0uc3R5bGUgKSB7CgkJCWNvbnRpbnVlOwoJCX0KCQlpZiAoICFzaG93IHx8IGVsZW0uc3R5bGUuZGlzcGxheSA9PT0gIm5vbmUiIHx8IGVsZW0uc3R5bGUuZGlzcGxheSA9PT0gIiIgKSB7CgkJCWVsZW0uc3R5bGUuZGlzcGxheSA9IHNob3cgPyB2YWx1ZXNbIGluZGV4IF0gfHwgIiIgOiAibm9uZSI7CgkJfQoJfQoKCXJldHVybiBlbGVtZW50czsKfQoKZnVuY3Rpb24gc2V0UG9zaXRpdmVOdW1iZXIoIGVsZW0sIHZhbHVlLCBzdWJ0cmFjdCApIHsKCXZhciBtYXRjaGVzID0gcm51bXNwbGl0LmV4ZWMoIHZhbHVlICk7CglyZXR1cm4gbWF0Y2hlcyA/CgoJCS8vIEd1YXJkIGFnYWluc3QgdW5kZWZpbmVkICJzdWJ0cmFjdCIsIGUuZy4sIHdoZW4gdXNlZCBhcyBpbiBjc3NIb29rcwoJCU1hdGgubWF4KCAwLCBtYXRjaGVzWyAxIF0gLSAoIHN1YnRyYWN0IHx8IDAgKSApICsgKCBtYXRjaGVzWyAyIF0gfHwgInB4IiApIDoKCQl2YWx1ZTsKfQoKZnVuY3Rpb24gYXVnbWVudFdpZHRoT3JIZWlnaHQoIGVsZW0sIG5hbWUsIGV4dHJhLCBpc0JvcmRlckJveCwgc3R5bGVzICkgewoJdmFyIGkgPSBleHRyYSA9PT0gKCBpc0JvcmRlckJveCA/ICJib3JkZXIiIDogImNvbnRlbnQiICkgPwoKCQkvLyBJZiB3ZSBhbHJlYWR5IGhhdmUgdGhlIHJpZ2h0IG1lYXN1cmVtZW50LCBhdm9pZCBhdWdtZW50YXRpb24KCQk0IDoKCgkJLy8gT3RoZXJ3aXNlIGluaXRpYWxpemUgZm9yIGhvcml6b250YWwgb3IgdmVydGljYWwgcHJvcGVydGllcwoJCW5hbWUgPT09ICJ3aWR0aCIgPyAxIDogMCwKCgkJdmFsID0gMDsKCglmb3IgKCA7IGkgPCA0OyBpICs9IDIgKSB7CgoJCS8vIGJvdGggYm94IG1vZGVscyBleGNsdWRlIG1hcmdpbiwgc28gYWRkIGl0IGlmIHdlIHdhbnQgaXQKCQlpZiAoIGV4dHJhID09PSAibWFyZ2luIiApIHsKCQkJdmFsICs9IGpRdWVyeS5jc3MoIGVsZW0sIGV4dHJhICsgY3NzRXhwYW5kWyBpIF0sIHRydWUsIHN0eWxlcyApOwoJCX0KCgkJaWYgKCBpc0JvcmRlckJveCApIHsKCgkJCS8vIGJvcmRlci1ib3ggaW5jbHVkZXMgcGFkZGluZywgc28gcmVtb3ZlIGl0IGlmIHdlIHdhbnQgY29udGVudAoJCQlpZiAoIGV4dHJhID09PSAiY29udGVudCIgKSB7CgkJCQl2YWwgLT0galF1ZXJ5LmNzcyggZWxlbSwgInBhZGRpbmciICsgY3NzRXhwYW5kWyBpIF0sIHRydWUsIHN0eWxlcyApOwoJCQl9CgoJCQkvLyBhdCB0aGlzIHBvaW50LCBleHRyYSBpc24ndCBib3JkZXIgbm9yIG1hcmdpbiwgc28gcmVtb3ZlIGJvcmRlcgoJCQlpZiAoIGV4dHJhICE9PSAibWFyZ2luIiApIHsKCQkJCXZhbCAtPSBqUXVlcnkuY3NzKCBlbGVtLCAiYm9yZGVyIiArIGNzc0V4cGFuZFsgaSBdICsgIldpZHRoIiwgdHJ1ZSwgc3R5bGVzICk7CgkJCX0KCQl9IGVsc2UgewoKCQkJLy8gYXQgdGhpcyBwb2ludCwgZXh0cmEgaXNuJ3QgY29udGVudCwgc28gYWRkIHBhZGRpbmcKCQkJdmFsICs9IGpRdWVyeS5jc3MoIGVsZW0sICJwYWRkaW5nIiArIGNzc0V4cGFuZFsgaSBdLCB0cnVlLCBzdHlsZXMgKTsKCgkJCS8vIGF0IHRoaXMgcG9pbnQsIGV4dHJhIGlzbid0IGNvbnRlbnQgbm9yIHBhZGRpbmcsIHNvIGFkZCBib3JkZXIKCQkJaWYgKCBleHRyYSAhPT0gInBhZGRpbmciICkgewoJCQkJdmFsICs9IGpRdWVyeS5jc3MoIGVsZW0sICJib3JkZXIiICsgY3NzRXhwYW5kWyBpIF0gKyAiV2lkdGgiLCB0cnVlLCBzdHlsZXMgKTsKCQkJfQoJCX0KCX0KCglyZXR1cm4gdmFsOwp9CgpmdW5jdGlvbiBnZXRXaWR0aE9ySGVpZ2h0KCBlbGVtLCBuYW1lLCBleHRyYSApIHsKCgkvLyBTdGFydCB3aXRoIG9mZnNldCBwcm9wZXJ0eSwgd2hpY2ggaXMgZXF1aXZhbGVudCB0byB0aGUgYm9yZGVyLWJveCB2YWx1ZQoJdmFyIHZhbHVlSXNCb3JkZXJCb3ggPSB0cnVlLAoJCXZhbCA9IG5hbWUgPT09ICJ3aWR0aCIgPyBlbGVtLm9mZnNldFdpZHRoIDogZWxlbS5vZmZzZXRIZWlnaHQsCgkJc3R5bGVzID0gZ2V0U3R5bGVzKCBlbGVtICksCgkJaXNCb3JkZXJCb3ggPSBzdXBwb3J0LmJveFNpemluZyAmJgoJCQlqUXVlcnkuY3NzKCBlbGVtLCAiYm94U2l6aW5nIiwgZmFsc2UsIHN0eWxlcyApID09PSAiYm9yZGVyLWJveCI7CgoJLy8gc29tZSBub24taHRtbCBlbGVtZW50cyByZXR1cm4gdW5kZWZpbmVkIGZvciBvZmZzZXRXaWR0aCwgc28gY2hlY2sgZm9yIG51bGwvdW5kZWZpbmVkCgkvLyBzdmcgLSBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD02NDkyODUKCS8vIE1hdGhNTCAtIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTQ5MTY2OAoJaWYgKCB2YWwgPD0gMCB8fCB2YWwgPT0gbnVsbCApIHsKCgkJLy8gRmFsbCBiYWNrIHRvIGNvbXB1dGVkIHRoZW4gdW5jb21wdXRlZCBjc3MgaWYgbmVjZXNzYXJ5CgkJdmFsID0gY3VyQ1NTKCBlbGVtLCBuYW1lLCBzdHlsZXMgKTsKCQlpZiAoIHZhbCA8IDAgfHwgdmFsID09IG51bGwgKSB7CgkJCXZhbCA9IGVsZW0uc3R5bGVbIG5hbWUgXTsKCQl9CgoJCS8vIENvbXB1dGVkIHVuaXQgaXMgbm90IHBpeGVscy4gU3RvcCBoZXJlIGFuZCByZXR1cm4uCgkJaWYgKCBybnVtbm9ucHgudGVzdCggdmFsICkgKSB7CgkJCXJldHVybiB2YWw7CgkJfQoKCQkvLyB3ZSBuZWVkIHRoZSBjaGVjayBmb3Igc3R5bGUgaW4gY2FzZSBhIGJyb3dzZXIgd2hpY2ggcmV0dXJucyB1bnJlbGlhYmxlIHZhbHVlcwoJCS8vIGZvciBnZXRDb21wdXRlZFN0eWxlIHNpbGVudGx5IGZhbGxzIGJhY2sgdG8gdGhlIHJlbGlhYmxlIGVsZW0uc3R5bGUKCQl2YWx1ZUlzQm9yZGVyQm94ID0gaXNCb3JkZXJCb3ggJiYKCQkJKCBzdXBwb3J0LmJveFNpemluZ1JlbGlhYmxlKCkgfHwgdmFsID09PSBlbGVtLnN0eWxlWyBuYW1lIF0gKTsKCgkJLy8gTm9ybWFsaXplICIiLCBhdXRvLCBhbmQgcHJlcGFyZSBmb3IgZXh0cmEKCQl2YWwgPSBwYXJzZUZsb2F0KCB2YWwgKSB8fCAwOwoJfQoKCS8vIHVzZSB0aGUgYWN0aXZlIGJveC1zaXppbmcgbW9kZWwgdG8gYWRkL3N1YnRyYWN0IGlycmVsZXZhbnQgc3R5bGVzCglyZXR1cm4gKCB2YWwgKwoJCWF1Z21lbnRXaWR0aE9ySGVpZ2h0KAoJCQllbGVtLAoJCQluYW1lLAoJCQlleHRyYSB8fCAoIGlzQm9yZGVyQm94ID8gImJvcmRlciIgOiAiY29udGVudCIgKSwKCQkJdmFsdWVJc0JvcmRlckJveCwKCQkJc3R5bGVzCgkJKQoJKSArICJweCI7Cn0KCmpRdWVyeS5leHRlbmQoIHsKCgkvLyBBZGQgaW4gc3R5bGUgcHJvcGVydHkgaG9va3MgZm9yIG92ZXJyaWRpbmcgdGhlIGRlZmF1bHQKCS8vIGJlaGF2aW9yIG9mIGdldHRpbmcgYW5kIHNldHRpbmcgYSBzdHlsZSBwcm9wZXJ0eQoJY3NzSG9va3M6IHsKCQlvcGFjaXR5OiB7CgkJCWdldDogZnVuY3Rpb24oIGVsZW0sIGNvbXB1dGVkICkgewoJCQkJaWYgKCBjb21wdXRlZCApIHsKCgkJCQkJLy8gV2Ugc2hvdWxkIGFsd2F5cyBnZXQgYSBudW1iZXIgYmFjayBmcm9tIG9wYWNpdHkKCQkJCQl2YXIgcmV0ID0gY3VyQ1NTKCBlbGVtLCAib3BhY2l0eSIgKTsKCQkJCQlyZXR1cm4gcmV0ID09PSAiIiA/ICIxIiA6IHJldDsKCQkJCX0KCQkJfQoJCX0KCX0sCgoJLy8gRG9uJ3QgYXV0b21hdGljYWxseSBhZGQgInB4IiB0byB0aGVzZSBwb3NzaWJseS11bml0bGVzcyBwcm9wZXJ0aWVzCgljc3NOdW1iZXI6IHsKCQkiYW5pbWF0aW9uSXRlcmF0aW9uQ291bnQiOiB0cnVlLAoJCSJjb2x1bW5Db3VudCI6IHRydWUsCgkJImZpbGxPcGFjaXR5IjogdHJ1ZSwKCQkiZmxleEdyb3ciOiB0cnVlLAoJCSJmbGV4U2hyaW5rIjogdHJ1ZSwKCQkiZm9udFdlaWdodCI6IHRydWUsCgkJImxpbmVIZWlnaHQiOiB0cnVlLAoJCSJvcGFjaXR5IjogdHJ1ZSwKCQkib3JkZXIiOiB0cnVlLAoJCSJvcnBoYW5zIjogdHJ1ZSwKCQkid2lkb3dzIjogdHJ1ZSwKCQkiekluZGV4IjogdHJ1ZSwKCQkiem9vbSI6IHRydWUKCX0sCgoJLy8gQWRkIGluIHByb3BlcnRpZXMgd2hvc2UgbmFtZXMgeW91IHdpc2ggdG8gZml4IGJlZm9yZQoJLy8gc2V0dGluZyBvciBnZXR0aW5nIHRoZSB2YWx1ZQoJY3NzUHJvcHM6IHsKCgkJLy8gbm9ybWFsaXplIGZsb2F0IGNzcyBwcm9wZXJ0eQoJCSJmbG9hdCI6IHN1cHBvcnQuY3NzRmxvYXQgPyAiY3NzRmxvYXQiIDogInN0eWxlRmxvYXQiCgl9LAoKCS8vIEdldCBhbmQgc2V0IHRoZSBzdHlsZSBwcm9wZXJ0eSBvbiBhIERPTSBOb2RlCglzdHlsZTogZnVuY3Rpb24oIGVsZW0sIG5hbWUsIHZhbHVlLCBleHRyYSApIHsKCgkJLy8gRG9uJ3Qgc2V0IHN0eWxlcyBvbiB0ZXh0IGFuZCBjb21tZW50IG5vZGVzCgkJaWYgKCAhZWxlbSB8fCBlbGVtLm5vZGVUeXBlID09PSAzIHx8IGVsZW0ubm9kZVR5cGUgPT09IDggfHwgIWVsZW0uc3R5bGUgKSB7CgkJCXJldHVybjsKCQl9CgoJCS8vIE1ha2Ugc3VyZSB0aGF0IHdlJ3JlIHdvcmtpbmcgd2l0aCB0aGUgcmlnaHQgbmFtZQoJCXZhciByZXQsIHR5cGUsIGhvb2tzLAoJCQlvcmlnTmFtZSA9IGpRdWVyeS5jYW1lbENhc2UoIG5hbWUgKSwKCQkJc3R5bGUgPSBlbGVtLnN0eWxlOwoKCQluYW1lID0galF1ZXJ5LmNzc1Byb3BzWyBvcmlnTmFtZSBdIHx8CgkJCSggalF1ZXJ5LmNzc1Byb3BzWyBvcmlnTmFtZSBdID0gdmVuZG9yUHJvcE5hbWUoIG9yaWdOYW1lICkgfHwgb3JpZ05hbWUgKTsKCgkJLy8gZ2V0cyBob29rIGZvciB0aGUgcHJlZml4ZWQgdmVyc2lvbgoJCS8vIGZvbGxvd2VkIGJ5IHRoZSB1bnByZWZpeGVkIHZlcnNpb24KCQlob29rcyA9IGpRdWVyeS5jc3NIb29rc1sgbmFtZSBdIHx8IGpRdWVyeS5jc3NIb29rc1sgb3JpZ05hbWUgXTsKCgkJLy8gQ2hlY2sgaWYgd2UncmUgc2V0dGluZyBhIHZhbHVlCgkJaWYgKCB2YWx1ZSAhPT0gdW5kZWZpbmVkICkgewoJCQl0eXBlID0gdHlwZW9mIHZhbHVlOwoKCQkJLy8gQ29udmVydCAiKz0iIG9yICItPSIgdG8gcmVsYXRpdmUgbnVtYmVycyAoIzczNDUpCgkJCWlmICggdHlwZSA9PT0gInN0cmluZyIgJiYgKCByZXQgPSByY3NzTnVtLmV4ZWMoIHZhbHVlICkgKSAmJiByZXRbIDEgXSApIHsKCQkJCXZhbHVlID0gYWRqdXN0Q1NTKCBlbGVtLCBuYW1lLCByZXQgKTsKCgkJCQkvLyBGaXhlcyBidWcgIzkyMzcKCQkJCXR5cGUgPSAibnVtYmVyIjsKCQkJfQoKCQkJLy8gTWFrZSBzdXJlIHRoYXQgbnVsbCBhbmQgTmFOIHZhbHVlcyBhcmVuJ3Qgc2V0LiBTZWU6ICM3MTE2CgkJCWlmICggdmFsdWUgPT0gbnVsbCB8fCB2YWx1ZSAhPT0gdmFsdWUgKSB7CgkJCQlyZXR1cm47CgkJCX0KCgkJCS8vIElmIGEgbnVtYmVyIHdhcyBwYXNzZWQgaW4sIGFkZCB0aGUgdW5pdCAoZXhjZXB0IGZvciBjZXJ0YWluIENTUyBwcm9wZXJ0aWVzKQoJCQlpZiAoIHR5cGUgPT09ICJudW1iZXIiICkgewoJCQkJdmFsdWUgKz0gcmV0ICYmIHJldFsgMyBdIHx8ICggalF1ZXJ5LmNzc051bWJlclsgb3JpZ05hbWUgXSA/ICIiIDogInB4IiApOwoJCQl9CgoJCQkvLyBGaXhlcyAjODkwOCwgaXQgY2FuIGJlIGRvbmUgbW9yZSBjb3JyZWN0bHkgYnkgc3BlY2lmaW5nIHNldHRlcnMgaW4gY3NzSG9va3MsCgkJCS8vIGJ1dCBpdCB3b3VsZCBtZWFuIHRvIGRlZmluZSBlaWdodAoJCQkvLyAoZm9yIGV2ZXJ5IHByb2JsZW1hdGljIHByb3BlcnR5KSBpZGVudGljYWwgZnVuY3Rpb25zCgkJCWlmICggIXN1cHBvcnQuY2xlYXJDbG9uZVN0eWxlICYmIHZhbHVlID09PSAiIiAmJiBuYW1lLmluZGV4T2YoICJiYWNrZ3JvdW5kIiApID09PSAwICkgewoJCQkJc3R5bGVbIG5hbWUgXSA9ICJpbmhlcml0IjsKCQkJfQoKCQkJLy8gSWYgYSBob29rIHdhcyBwcm92aWRlZCwgdXNlIHRoYXQgdmFsdWUsIG90aGVyd2lzZSBqdXN0IHNldCB0aGUgc3BlY2lmaWVkIHZhbHVlCgkJCWlmICggIWhvb2tzIHx8ICEoICJzZXQiIGluIGhvb2tzICkgfHwKCQkJCSggdmFsdWUgPSBob29rcy5zZXQoIGVsZW0sIHZhbHVlLCBleHRyYSApICkgIT09IHVuZGVmaW5lZCApIHsKCgkJCQkvLyBTdXBwb3J0OiBJRQoJCQkJLy8gU3dhbGxvdyBlcnJvcnMgZnJvbSAnaW52YWxpZCcgQ1NTIHZhbHVlcyAoIzU1MDkpCgkJCQl0cnkgewoJCQkJCXN0eWxlWyBuYW1lIF0gPSB2YWx1ZTsKCQkJCX0gY2F0Y2ggKCBlICkge30KCQkJfQoKCQl9IGVsc2UgewoKCQkJLy8gSWYgYSBob29rIHdhcyBwcm92aWRlZCBnZXQgdGhlIG5vbi1jb21wdXRlZCB2YWx1ZSBmcm9tIHRoZXJlCgkJCWlmICggaG9va3MgJiYgImdldCIgaW4gaG9va3MgJiYKCQkJCSggcmV0ID0gaG9va3MuZ2V0KCBlbGVtLCBmYWxzZSwgZXh0cmEgKSApICE9PSB1bmRlZmluZWQgKSB7CgoJCQkJcmV0dXJuIHJldDsKCQkJfQoKCQkJLy8gT3RoZXJ3aXNlIGp1c3QgZ2V0IHRoZSB2YWx1ZSBmcm9tIHRoZSBzdHlsZSBvYmplY3QKCQkJcmV0dXJuIHN0eWxlWyBuYW1lIF07CgkJfQoJfSwKCgljc3M6IGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCBleHRyYSwgc3R5bGVzICkgewoJCXZhciBudW0sIHZhbCwgaG9va3MsCgkJCW9yaWdOYW1lID0galF1ZXJ5LmNhbWVsQ2FzZSggbmFtZSApOwoKCQkvLyBNYWtlIHN1cmUgdGhhdCB3ZSdyZSB3b3JraW5nIHdpdGggdGhlIHJpZ2h0IG5hbWUKCQluYW1lID0galF1ZXJ5LmNzc1Byb3BzWyBvcmlnTmFtZSBdIHx8CgkJCSggalF1ZXJ5LmNzc1Byb3BzWyBvcmlnTmFtZSBdID0gdmVuZG9yUHJvcE5hbWUoIG9yaWdOYW1lICkgfHwgb3JpZ05hbWUgKTsKCgkJLy8gZ2V0cyBob29rIGZvciB0aGUgcHJlZml4ZWQgdmVyc2lvbgoJCS8vIGZvbGxvd2VkIGJ5IHRoZSB1bnByZWZpeGVkIHZlcnNpb24KCQlob29rcyA9IGpRdWVyeS5jc3NIb29rc1sgbmFtZSBdIHx8IGpRdWVyeS5jc3NIb29rc1sgb3JpZ05hbWUgXTsKCgkJLy8gSWYgYSBob29rIHdhcyBwcm92aWRlZCBnZXQgdGhlIGNvbXB1dGVkIHZhbHVlIGZyb20gdGhlcmUKCQlpZiAoIGhvb2tzICYmICJnZXQiIGluIGhvb2tzICkgewoJCQl2YWwgPSBob29rcy5nZXQoIGVsZW0sIHRydWUsIGV4dHJhICk7CgkJfQoKCQkvLyBPdGhlcndpc2UsIGlmIGEgd2F5IHRvIGdldCB0aGUgY29tcHV0ZWQgdmFsdWUgZXhpc3RzLCB1c2UgdGhhdAoJCWlmICggdmFsID09PSB1bmRlZmluZWQgKSB7CgkJCXZhbCA9IGN1ckNTUyggZWxlbSwgbmFtZSwgc3R5bGVzICk7CgkJfQoKCQkvL2NvbnZlcnQgIm5vcm1hbCIgdG8gY29tcHV0ZWQgdmFsdWUKCQlpZiAoIHZhbCA9PT0gIm5vcm1hbCIgJiYgbmFtZSBpbiBjc3NOb3JtYWxUcmFuc2Zvcm0gKSB7CgkJCXZhbCA9IGNzc05vcm1hbFRyYW5zZm9ybVsgbmFtZSBdOwoJCX0KCgkJLy8gUmV0dXJuLCBjb252ZXJ0aW5nIHRvIG51bWJlciBpZiBmb3JjZWQgb3IgYSBxdWFsaWZpZXIgd2FzIHByb3ZpZGVkIGFuZCB2YWwgbG9va3MgbnVtZXJpYwoJCWlmICggZXh0cmEgPT09ICIiIHx8IGV4dHJhICkgewoJCQludW0gPSBwYXJzZUZsb2F0KCB2YWwgKTsKCQkJcmV0dXJuIGV4dHJhID09PSB0cnVlIHx8IGlzRmluaXRlKCBudW0gKSA/IG51bSB8fCAwIDogdmFsOwoJCX0KCQlyZXR1cm4gdmFsOwoJfQp9ICk7CgpqUXVlcnkuZWFjaCggWyAiaGVpZ2h0IiwgIndpZHRoIiBdLCBmdW5jdGlvbiggaSwgbmFtZSApIHsKCWpRdWVyeS5jc3NIb29rc1sgbmFtZSBdID0gewoJCWdldDogZnVuY3Rpb24oIGVsZW0sIGNvbXB1dGVkLCBleHRyYSApIHsKCQkJaWYgKCBjb21wdXRlZCApIHsKCgkJCQkvLyBjZXJ0YWluIGVsZW1lbnRzIGNhbiBoYXZlIGRpbWVuc2lvbiBpbmZvIGlmIHdlIGludmlzaWJseSBzaG93IHRoZW0KCQkJCS8vIGhvd2V2ZXIsIGl0IG11c3QgaGF2ZSBhIGN1cnJlbnQgZGlzcGxheSBzdHlsZSB0aGF0IHdvdWxkIGJlbmVmaXQgZnJvbSB0aGlzCgkJCQlyZXR1cm4gcmRpc3BsYXlzd2FwLnRlc3QoIGpRdWVyeS5jc3MoIGVsZW0sICJkaXNwbGF5IiApICkgJiYKCQkJCQllbGVtLm9mZnNldFdpZHRoID09PSAwID8KCQkJCQkJc3dhcCggZWxlbSwgY3NzU2hvdywgZnVuY3Rpb24oKSB7CgkJCQkJCQlyZXR1cm4gZ2V0V2lkdGhPckhlaWdodCggZWxlbSwgbmFtZSwgZXh0cmEgKTsKCQkJCQkJfSApIDoKCQkJCQkJZ2V0V2lkdGhPckhlaWdodCggZWxlbSwgbmFtZSwgZXh0cmEgKTsKCQkJfQoJCX0sCgoJCXNldDogZnVuY3Rpb24oIGVsZW0sIHZhbHVlLCBleHRyYSApIHsKCQkJdmFyIHN0eWxlcyA9IGV4dHJhICYmIGdldFN0eWxlcyggZWxlbSApOwoJCQlyZXR1cm4gc2V0UG9zaXRpdmVOdW1iZXIoIGVsZW0sIHZhbHVlLCBleHRyYSA/CgkJCQlhdWdtZW50V2lkdGhPckhlaWdodCgKCQkJCQllbGVtLAoJCQkJCW5hbWUsCgkJCQkJZXh0cmEsCgkJCQkJc3VwcG9ydC5ib3hTaXppbmcgJiYKCQkJCQkJalF1ZXJ5LmNzcyggZWxlbSwgImJveFNpemluZyIsIGZhbHNlLCBzdHlsZXMgKSA9PT0gImJvcmRlci1ib3giLAoJCQkJCXN0eWxlcwoJCQkJKSA6IDAKCQkJKTsKCQl9Cgl9Owp9ICk7CgppZiAoICFzdXBwb3J0Lm9wYWNpdHkgKSB7CglqUXVlcnkuY3NzSG9va3Mub3BhY2l0eSA9IHsKCQlnZXQ6IGZ1bmN0aW9uKCBlbGVtLCBjb21wdXRlZCApIHsKCgkJCS8vIElFIHVzZXMgZmlsdGVycyBmb3Igb3BhY2l0eQoJCQlyZXR1cm4gcm9wYWNpdHkudGVzdCggKCBjb21wdXRlZCAmJiBlbGVtLmN1cnJlbnRTdHlsZSA/CgkJCQllbGVtLmN1cnJlbnRTdHlsZS5maWx0ZXIgOgoJCQkJZWxlbS5zdHlsZS5maWx0ZXIgKSB8fCAiIiApID8KCQkJCQkoIDAuMDEgKiBwYXJzZUZsb2F0KCBSZWdFeHAuJDEgKSApICsgIiIgOgoJCQkJCWNvbXB1dGVkID8gIjEiIDogIiI7CgkJfSwKCgkJc2V0OiBmdW5jdGlvbiggZWxlbSwgdmFsdWUgKSB7CgkJCXZhciBzdHlsZSA9IGVsZW0uc3R5bGUsCgkJCQljdXJyZW50U3R5bGUgPSBlbGVtLmN1cnJlbnRTdHlsZSwKCQkJCW9wYWNpdHkgPSBqUXVlcnkuaXNOdW1lcmljKCB2YWx1ZSApID8gImFscGhhKG9wYWNpdHk9IiArIHZhbHVlICogMTAwICsgIikiIDogIiIsCgkJCQlmaWx0ZXIgPSBjdXJyZW50U3R5bGUgJiYgY3VycmVudFN0eWxlLmZpbHRlciB8fCBzdHlsZS5maWx0ZXIgfHwgIiI7CgoJCQkvLyBJRSBoYXMgdHJvdWJsZSB3aXRoIG9wYWNpdHkgaWYgaXQgZG9lcyBub3QgaGF2ZSBsYXlvdXQKCQkJLy8gRm9yY2UgaXQgYnkgc2V0dGluZyB0aGUgem9vbSBsZXZlbAoJCQlzdHlsZS56b29tID0gMTsKCgkJCS8vIGlmIHNldHRpbmcgb3BhY2l0eSB0byAxLCBhbmQgbm8gb3RoZXIgZmlsdGVycyBleGlzdCAtCgkJCS8vIGF0dGVtcHQgdG8gcmVtb3ZlIGZpbHRlciBhdHRyaWJ1dGUgIzY2NTIKCQkJLy8gaWYgdmFsdWUgPT09ICIiLCB0aGVuIHJlbW92ZSBpbmxpbmUgb3BhY2l0eSAjMTI2ODUKCQkJaWYgKCAoIHZhbHVlID49IDEgfHwgdmFsdWUgPT09ICIiICkgJiYKCQkJCQlqUXVlcnkudHJpbSggZmlsdGVyLnJlcGxhY2UoIHJhbHBoYSwgIiIgKSApID09PSAiIiAmJgoJCQkJCXN0eWxlLnJlbW92ZUF0dHJpYnV0ZSApIHsKCgkJCQkvLyBTZXR0aW5nIHN0eWxlLmZpbHRlciB0byBudWxsLCAiIiAmICIgIiBzdGlsbCBsZWF2ZSAiZmlsdGVyOiIgaW4gdGhlIGNzc1RleHQKCQkJCS8vIGlmICJmaWx0ZXI6IiBpcyBwcmVzZW50IGF0IGFsbCwgY2xlYXJUeXBlIGlzIGRpc2FibGVkLCB3ZSB3YW50IHRvIGF2b2lkIHRoaXMKCQkJCS8vIHN0eWxlLnJlbW92ZUF0dHJpYnV0ZSBpcyBJRSBPbmx5LCBidXQgc28gYXBwYXJlbnRseSBpcyB0aGlzIGNvZGUgcGF0aC4uLgoJCQkJc3R5bGUucmVtb3ZlQXR0cmlidXRlKCAiZmlsdGVyIiApOwoKCQkJCS8vIGlmIHRoZXJlIGlzIG5vIGZpbHRlciBzdHlsZSBhcHBsaWVkIGluIGEgY3NzIHJ1bGUKCQkJCS8vIG9yIHVuc2V0IGlubGluZSBvcGFjaXR5LCB3ZSBhcmUgZG9uZQoJCQkJaWYgKCB2YWx1ZSA9PT0gIiIgfHwgY3VycmVudFN0eWxlICYmICFjdXJyZW50U3R5bGUuZmlsdGVyICkgewoJCQkJCXJldHVybjsKCQkJCX0KCQkJfQoKCQkJLy8gb3RoZXJ3aXNlLCBzZXQgbmV3IGZpbHRlciB2YWx1ZXMKCQkJc3R5bGUuZmlsdGVyID0gcmFscGhhLnRlc3QoIGZpbHRlciApID8KCQkJCWZpbHRlci5yZXBsYWNlKCByYWxwaGEsIG9wYWNpdHkgKSA6CgkJCQlmaWx0ZXIgKyAiICIgKyBvcGFjaXR5OwoJCX0KCX07Cn0KCmpRdWVyeS5jc3NIb29rcy5tYXJnaW5SaWdodCA9IGFkZEdldEhvb2tJZiggc3VwcG9ydC5yZWxpYWJsZU1hcmdpblJpZ2h0LAoJZnVuY3Rpb24oIGVsZW0sIGNvbXB1dGVkICkgewoJCWlmICggY29tcHV0ZWQgKSB7CgkJCXJldHVybiBzd2FwKCBlbGVtLCB7ICJkaXNwbGF5IjogImlubGluZS1ibG9jayIgfSwKCQkJCWN1ckNTUywgWyBlbGVtLCAibWFyZ2luUmlnaHQiIF0gKTsKCQl9Cgl9Cik7CgpqUXVlcnkuY3NzSG9va3MubWFyZ2luTGVmdCA9IGFkZEdldEhvb2tJZiggc3VwcG9ydC5yZWxpYWJsZU1hcmdpbkxlZnQsCglmdW5jdGlvbiggZWxlbSwgY29tcHV0ZWQgKSB7CgkJaWYgKCBjb21wdXRlZCApIHsKCQkJcmV0dXJuICgKCQkJCXBhcnNlRmxvYXQoIGN1ckNTUyggZWxlbSwgIm1hcmdpbkxlZnQiICkgKSB8fAoKCQkJCS8vIFN1cHBvcnQ6IElFPD0xMSsKCQkJCS8vIFJ1bm5pbmcgZ2V0Qm91bmRpbmdDbGllbnRSZWN0IG9uIGEgZGlzY29ubmVjdGVkIG5vZGUgaW4gSUUgdGhyb3dzIGFuIGVycm9yCgkJCQkvLyBTdXBwb3J0OiBJRTggb25seQoJCQkJLy8gZ2V0Q2xpZW50UmVjdHMoKSBlcnJvcnMgb24gZGlzY29ubmVjdGVkIGVsZW1zCgkJCQkoIGpRdWVyeS5jb250YWlucyggZWxlbS5vd25lckRvY3VtZW50LCBlbGVtICkgPwoJCQkJCWVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCAtCgkJCQkJCXN3YXAoIGVsZW0sIHsgbWFyZ2luTGVmdDogMCB9LCBmdW5jdGlvbigpIHsKCQkJCQkJCXJldHVybiBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQ7CgkJCQkJCX0gKSA6CgkJCQkJMAoJCQkJKQoJCQkpICsgInB4IjsKCQl9Cgl9Cik7CgovLyBUaGVzZSBob29rcyBhcmUgdXNlZCBieSBhbmltYXRlIHRvIGV4cGFuZCBwcm9wZXJ0aWVzCmpRdWVyeS5lYWNoKCB7CgltYXJnaW46ICIiLAoJcGFkZGluZzogIiIsCglib3JkZXI6ICJXaWR0aCIKfSwgZnVuY3Rpb24oIHByZWZpeCwgc3VmZml4ICkgewoJalF1ZXJ5LmNzc0hvb2tzWyBwcmVmaXggKyBzdWZmaXggXSA9IHsKCQlleHBhbmQ6IGZ1bmN0aW9uKCB2YWx1ZSApIHsKCQkJdmFyIGkgPSAwLAoJCQkJZXhwYW5kZWQgPSB7fSwKCgkJCQkvLyBhc3N1bWVzIGEgc2luZ2xlIG51bWJlciBpZiBub3QgYSBzdHJpbmcKCQkJCXBhcnRzID0gdHlwZW9mIHZhbHVlID09PSAic3RyaW5nIiA/IHZhbHVlLnNwbGl0KCAiICIgKSA6IFsgdmFsdWUgXTsKCgkJCWZvciAoIDsgaSA8IDQ7IGkrKyApIHsKCQkJCWV4cGFuZGVkWyBwcmVmaXggKyBjc3NFeHBhbmRbIGkgXSArIHN1ZmZpeCBdID0KCQkJCQlwYXJ0c1sgaSBdIHx8IHBhcnRzWyBpIC0gMiBdIHx8IHBhcnRzWyAwIF07CgkJCX0KCgkJCXJldHVybiBleHBhbmRlZDsKCQl9Cgl9OwoKCWlmICggIXJtYXJnaW4udGVzdCggcHJlZml4ICkgKSB7CgkJalF1ZXJ5LmNzc0hvb2tzWyBwcmVmaXggKyBzdWZmaXggXS5zZXQgPSBzZXRQb3NpdGl2ZU51bWJlcjsKCX0KfSApOwoKalF1ZXJ5LmZuLmV4dGVuZCggewoJY3NzOiBmdW5jdGlvbiggbmFtZSwgdmFsdWUgKSB7CgkJcmV0dXJuIGFjY2VzcyggdGhpcywgZnVuY3Rpb24oIGVsZW0sIG5hbWUsIHZhbHVlICkgewoJCQl2YXIgc3R5bGVzLCBsZW4sCgkJCQltYXAgPSB7fSwKCQkJCWkgPSAwOwoKCQkJaWYgKCBqUXVlcnkuaXNBcnJheSggbmFtZSApICkgewoJCQkJc3R5bGVzID0gZ2V0U3R5bGVzKCBlbGVtICk7CgkJCQlsZW4gPSBuYW1lLmxlbmd0aDsKCgkJCQlmb3IgKCA7IGkgPCBsZW47IGkrKyApIHsKCQkJCQltYXBbIG5hbWVbIGkgXSBdID0galF1ZXJ5LmNzcyggZWxlbSwgbmFtZVsgaSBdLCBmYWxzZSwgc3R5bGVzICk7CgkJCQl9CgoJCQkJcmV0dXJuIG1hcDsKCQkJfQoKCQkJcmV0dXJuIHZhbHVlICE9PSB1bmRlZmluZWQgPwoJCQkJalF1ZXJ5LnN0eWxlKCBlbGVtLCBuYW1lLCB2YWx1ZSApIDoKCQkJCWpRdWVyeS5jc3MoIGVsZW0sIG5hbWUgKTsKCQl9LCBuYW1lLCB2YWx1ZSwgYXJndW1lbnRzLmxlbmd0aCA+IDEgKTsKCX0sCglzaG93OiBmdW5jdGlvbigpIHsKCQlyZXR1cm4gc2hvd0hpZGUoIHRoaXMsIHRydWUgKTsKCX0sCgloaWRlOiBmdW5jdGlvbigpIHsKCQlyZXR1cm4gc2hvd0hpZGUoIHRoaXMgKTsKCX0sCgl0b2dnbGU6IGZ1bmN0aW9uKCBzdGF0ZSApIHsKCQlpZiAoIHR5cGVvZiBzdGF0ZSA9PT0gImJvb2xlYW4iICkgewoJCQlyZXR1cm4gc3RhdGUgPyB0aGlzLnNob3coKSA6IHRoaXMuaGlkZSgpOwoJCX0KCgkJcmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7CgkJCWlmICggaXNIaWRkZW4oIHRoaXMgKSApIHsKCQkJCWpRdWVyeSggdGhpcyApLnNob3coKTsKCQkJfSBlbHNlIHsKCQkJCWpRdWVyeSggdGhpcyApLmhpZGUoKTsKCQkJfQoJCX0gKTsKCX0KfSApOwoKCmZ1bmN0aW9uIFR3ZWVuKCBlbGVtLCBvcHRpb25zLCBwcm9wLCBlbmQsIGVhc2luZyApIHsKCXJldHVybiBuZXcgVHdlZW4ucHJvdG90eXBlLmluaXQoIGVsZW0sIG9wdGlvbnMsIHByb3AsIGVuZCwgZWFzaW5nICk7Cn0KalF1ZXJ5LlR3ZWVuID0gVHdlZW47CgpUd2Vlbi5wcm90b3R5cGUgPSB7Cgljb25zdHJ1Y3RvcjogVHdlZW4sCglpbml0OiBmdW5jdGlvbiggZWxlbSwgb3B0aW9ucywgcHJvcCwgZW5kLCBlYXNpbmcsIHVuaXQgKSB7CgkJdGhpcy5lbGVtID0gZWxlbTsKCQl0aGlzLnByb3AgPSBwcm9wOwoJCXRoaXMuZWFzaW5nID0gZWFzaW5nIHx8IGpRdWVyeS5lYXNpbmcuX2RlZmF1bHQ7CgkJdGhpcy5vcHRpb25zID0gb3B0aW9uczsKCQl0aGlzLnN0YXJ0ID0gdGhpcy5ub3cgPSB0aGlzLmN1cigpOwoJCXRoaXMuZW5kID0gZW5kOwoJCXRoaXMudW5pdCA9IHVuaXQgfHwgKCBqUXVlcnkuY3NzTnVtYmVyWyBwcm9wIF0gPyAiIiA6ICJweCIgKTsKCX0sCgljdXI6IGZ1bmN0aW9uKCkgewoJCXZhciBob29rcyA9IFR3ZWVuLnByb3BIb29rc1sgdGhpcy5wcm9wIF07CgoJCXJldHVybiBob29rcyAmJiBob29rcy5nZXQgPwoJCQlob29rcy5nZXQoIHRoaXMgKSA6CgkJCVR3ZWVuLnByb3BIb29rcy5fZGVmYXVsdC5nZXQoIHRoaXMgKTsKCX0sCglydW46IGZ1bmN0aW9uKCBwZXJjZW50ICkgewoJCXZhciBlYXNlZCwKCQkJaG9va3MgPSBUd2Vlbi5wcm9wSG9va3NbIHRoaXMucHJvcCBdOwoKCQlpZiAoIHRoaXMub3B0aW9ucy5kdXJhdGlvbiApIHsKCQkJdGhpcy5wb3MgPSBlYXNlZCA9IGpRdWVyeS5lYXNpbmdbIHRoaXMuZWFzaW5nIF0oCgkJCQlwZXJjZW50LCB0aGlzLm9wdGlvbnMuZHVyYXRpb24gKiBwZXJjZW50LCAwLCAxLCB0aGlzLm9wdGlvbnMuZHVyYXRpb24KCQkJKTsKCQl9IGVsc2UgewoJCQl0aGlzLnBvcyA9IGVhc2VkID0gcGVyY2VudDsKCQl9CgkJdGhpcy5ub3cgPSAoIHRoaXMuZW5kIC0gdGhpcy5zdGFydCApICogZWFzZWQgKyB0aGlzLnN0YXJ0OwoKCQlpZiAoIHRoaXMub3B0aW9ucy5zdGVwICkgewoJCQl0aGlzLm9wdGlvbnMuc3RlcC5jYWxsKCB0aGlzLmVsZW0sIHRoaXMubm93LCB0aGlzICk7CgkJfQoKCQlpZiAoIGhvb2tzICYmIGhvb2tzLnNldCApIHsKCQkJaG9va3Muc2V0KCB0aGlzICk7CgkJfSBlbHNlIHsKCQkJVHdlZW4ucHJvcEhvb2tzLl9kZWZhdWx0LnNldCggdGhpcyApOwoJCX0KCQlyZXR1cm4gdGhpczsKCX0KfTsKClR3ZWVuLnByb3RvdHlwZS5pbml0LnByb3RvdHlwZSA9IFR3ZWVuLnByb3RvdHlwZTsKClR3ZWVuLnByb3BIb29rcyA9IHsKCV9kZWZhdWx0OiB7CgkJZ2V0OiBmdW5jdGlvbiggdHdlZW4gKSB7CgkJCXZhciByZXN1bHQ7CgoJCQkvLyBVc2UgYSBwcm9wZXJ0eSBvbiB0aGUgZWxlbWVudCBkaXJlY3RseSB3aGVuIGl0IGlzIG5vdCBhIERPTSBlbGVtZW50LAoJCQkvLyBvciB3aGVuIHRoZXJlIGlzIG5vIG1hdGNoaW5nIHN0eWxlIHByb3BlcnR5IHRoYXQgZXhpc3RzLgoJCQlpZiAoIHR3ZWVuLmVsZW0ubm9kZVR5cGUgIT09IDEgfHwKCQkJCXR3ZWVuLmVsZW1bIHR3ZWVuLnByb3AgXSAhPSBudWxsICYmIHR3ZWVuLmVsZW0uc3R5bGVbIHR3ZWVuLnByb3AgXSA9PSBudWxsICkgewoJCQkJcmV0dXJuIHR3ZWVuLmVsZW1bIHR3ZWVuLnByb3AgXTsKCQkJfQoKCQkJLy8gcGFzc2luZyBhbiBlbXB0eSBzdHJpbmcgYXMgYSAzcmQgcGFyYW1ldGVyIHRvIC5jc3Mgd2lsbCBhdXRvbWF0aWNhbGx5CgkJCS8vIGF0dGVtcHQgYSBwYXJzZUZsb2F0IGFuZCBmYWxsYmFjayB0byBhIHN0cmluZyBpZiB0aGUgcGFyc2UgZmFpbHMKCQkJLy8gc28sIHNpbXBsZSB2YWx1ZXMgc3VjaCBhcyAiMTBweCIgYXJlIHBhcnNlZCB0byBGbG9hdC4KCQkJLy8gY29tcGxleCB2YWx1ZXMgc3VjaCBhcyAicm90YXRlKDFyYWQpIiBhcmUgcmV0dXJuZWQgYXMgaXMuCgkJCXJlc3VsdCA9IGpRdWVyeS5jc3MoIHR3ZWVuLmVsZW0sIHR3ZWVuLnByb3AsICIiICk7CgoJCQkvLyBFbXB0eSBzdHJpbmdzLCBudWxsLCB1bmRlZmluZWQgYW5kICJhdXRvIiBhcmUgY29udmVydGVkIHRvIDAuCgkJCXJldHVybiAhcmVzdWx0IHx8IHJlc3VsdCA9PT0gImF1dG8iID8gMCA6IHJlc3VsdDsKCQl9LAoJCXNldDogZnVuY3Rpb24oIHR3ZWVuICkgewoKCQkJLy8gdXNlIHN0ZXAgaG9vayBmb3IgYmFjayBjb21wYXQgLSB1c2UgY3NzSG9vayBpZiBpdHMgdGhlcmUgLSB1c2UgLnN0eWxlIGlmIGl0cwoJCQkvLyBhdmFpbGFibGUgYW5kIHVzZSBwbGFpbiBwcm9wZXJ0aWVzIHdoZXJlIGF2YWlsYWJsZQoJCQlpZiAoIGpRdWVyeS5meC5zdGVwWyB0d2Vlbi5wcm9wIF0gKSB7CgkJCQlqUXVlcnkuZnguc3RlcFsgdHdlZW4ucHJvcCBdKCB0d2VlbiApOwoJCQl9IGVsc2UgaWYgKCB0d2Vlbi5lbGVtLm5vZGVUeXBlID09PSAxICYmCgkJCQkoIHR3ZWVuLmVsZW0uc3R5bGVbIGpRdWVyeS5jc3NQcm9wc1sgdHdlZW4ucHJvcCBdIF0gIT0gbnVsbCB8fAoJCQkJCWpRdWVyeS5jc3NIb29rc1sgdHdlZW4ucHJvcCBdICkgKSB7CgkJCQlqUXVlcnkuc3R5bGUoIHR3ZWVuLmVsZW0sIHR3ZWVuLnByb3AsIHR3ZWVuLm5vdyArIHR3ZWVuLnVuaXQgKTsKCQkJfSBlbHNlIHsKCQkJCXR3ZWVuLmVsZW1bIHR3ZWVuLnByb3AgXSA9IHR3ZWVuLm5vdzsKCQkJfQoJCX0KCX0KfTsKCi8vIFN1cHBvcnQ6IElFIDw9OQovLyBQYW5pYyBiYXNlZCBhcHByb2FjaCB0byBzZXR0aW5nIHRoaW5ncyBvbiBkaXNjb25uZWN0ZWQgbm9kZXMKClR3ZWVuLnByb3BIb29rcy5zY3JvbGxUb3AgPSBUd2Vlbi5wcm9wSG9va3Muc2Nyb2xsTGVmdCA9IHsKCXNldDogZnVuY3Rpb24oIHR3ZWVuICkgewoJCWlmICggdHdlZW4uZWxlbS5ub2RlVHlwZSAmJiB0d2Vlbi5lbGVtLnBhcmVudE5vZGUgKSB7CgkJCXR3ZWVuLmVsZW1bIHR3ZWVuLnByb3AgXSA9IHR3ZWVuLm5vdzsKCQl9Cgl9Cn07CgpqUXVlcnkuZWFzaW5nID0gewoJbGluZWFyOiBmdW5jdGlvbiggcCApIHsKCQlyZXR1cm4gcDsKCX0sCglzd2luZzogZnVuY3Rpb24oIHAgKSB7CgkJcmV0dXJuIDAuNSAtIE1hdGguY29zKCBwICogTWF0aC5QSSApIC8gMjsKCX0sCglfZGVmYXVsdDogInN3aW5nIgp9OwoKalF1ZXJ5LmZ4ID0gVHdlZW4ucHJvdG90eXBlLmluaXQ7CgovLyBCYWNrIENvbXBhdCA8MS44IGV4dGVuc2lvbiBwb2ludApqUXVlcnkuZnguc3RlcCA9IHt9OwoKCgoKdmFyCglmeE5vdywgdGltZXJJZCwKCXJmeHR5cGVzID0gL14oPzp0b2dnbGV8c2hvd3xoaWRlKSQvLAoJcnJ1biA9IC9xdWV1ZUhvb2tzJC87CgovLyBBbmltYXRpb25zIGNyZWF0ZWQgc3luY2hyb25vdXNseSB3aWxsIHJ1biBzeW5jaHJvbm91c2x5CmZ1bmN0aW9uIGNyZWF0ZUZ4Tm93KCkgewoJd2luZG93LnNldFRpbWVvdXQoIGZ1bmN0aW9uKCkgewoJCWZ4Tm93ID0gdW5kZWZpbmVkOwoJfSApOwoJcmV0dXJuICggZnhOb3cgPSBqUXVlcnkubm93KCkgKTsKfQoKLy8gR2VuZXJhdGUgcGFyYW1ldGVycyB0byBjcmVhdGUgYSBzdGFuZGFyZCBhbmltYXRpb24KZnVuY3Rpb24gZ2VuRngoIHR5cGUsIGluY2x1ZGVXaWR0aCApIHsKCXZhciB3aGljaCwKCQlhdHRycyA9IHsgaGVpZ2h0OiB0eXBlIH0sCgkJaSA9IDA7CgoJLy8gaWYgd2UgaW5jbHVkZSB3aWR0aCwgc3RlcCB2YWx1ZSBpcyAxIHRvIGRvIGFsbCBjc3NFeHBhbmQgdmFsdWVzLAoJLy8gaWYgd2UgZG9uJ3QgaW5jbHVkZSB3aWR0aCwgc3RlcCB2YWx1ZSBpcyAyIHRvIHNraXAgb3ZlciBMZWZ0IGFuZCBSaWdodAoJaW5jbHVkZVdpZHRoID0gaW5jbHVkZVdpZHRoID8gMSA6IDA7Cglmb3IgKCA7IGkgPCA0IDsgaSArPSAyIC0gaW5jbHVkZVdpZHRoICkgewoJCXdoaWNoID0gY3NzRXhwYW5kWyBpIF07CgkJYXR0cnNbICJtYXJnaW4iICsgd2hpY2ggXSA9IGF0dHJzWyAicGFkZGluZyIgKyB3aGljaCBdID0gdHlwZTsKCX0KCglpZiAoIGluY2x1ZGVXaWR0aCApIHsKCQlhdHRycy5vcGFjaXR5ID0gYXR0cnMud2lkdGggPSB0eXBlOwoJfQoKCXJldHVybiBhdHRyczsKfQoKZnVuY3Rpb24gY3JlYXRlVHdlZW4oIHZhbHVlLCBwcm9wLCBhbmltYXRpb24gKSB7Cgl2YXIgdHdlZW4sCgkJY29sbGVjdGlvbiA9ICggQW5pbWF0aW9uLnR3ZWVuZXJzWyBwcm9wIF0gfHwgW10gKS5jb25jYXQoIEFuaW1hdGlvbi50d2VlbmVyc1sgIioiIF0gKSwKCQlpbmRleCA9IDAsCgkJbGVuZ3RoID0gY29sbGVjdGlvbi5sZW5ndGg7Cglmb3IgKCA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrICkgewoJCWlmICggKCB0d2VlbiA9IGNvbGxlY3Rpb25bIGluZGV4IF0uY2FsbCggYW5pbWF0aW9uLCBwcm9wLCB2YWx1ZSApICkgKSB7CgoJCQkvLyB3ZSdyZSBkb25lIHdpdGggdGhpcyBwcm9wZXJ0eQoJCQlyZXR1cm4gdHdlZW47CgkJfQoJfQp9CgpmdW5jdGlvbiBkZWZhdWx0UHJlZmlsdGVyKCBlbGVtLCBwcm9wcywgb3B0cyApIHsKCS8qIGpzaGludCB2YWxpZHRoaXM6IHRydWUgKi8KCXZhciBwcm9wLCB2YWx1ZSwgdG9nZ2xlLCB0d2VlbiwgaG9va3MsIG9sZGZpcmUsIGRpc3BsYXksIGNoZWNrRGlzcGxheSwKCQlhbmltID0gdGhpcywKCQlvcmlnID0ge30sCgkJc3R5bGUgPSBlbGVtLnN0eWxlLAoJCWhpZGRlbiA9IGVsZW0ubm9kZVR5cGUgJiYgaXNIaWRkZW4oIGVsZW0gKSwKCQlkYXRhU2hvdyA9IGpRdWVyeS5fZGF0YSggZWxlbSwgImZ4c2hvdyIgKTsKCgkvLyBoYW5kbGUgcXVldWU6IGZhbHNlIHByb21pc2VzCglpZiAoICFvcHRzLnF1ZXVlICkgewoJCWhvb2tzID0galF1ZXJ5Ll9xdWV1ZUhvb2tzKCBlbGVtLCAiZngiICk7CgkJaWYgKCBob29rcy51bnF1ZXVlZCA9PSBudWxsICkgewoJCQlob29rcy51bnF1ZXVlZCA9IDA7CgkJCW9sZGZpcmUgPSBob29rcy5lbXB0eS5maXJlOwoJCQlob29rcy5lbXB0eS5maXJlID0gZnVuY3Rpb24oKSB7CgkJCQlpZiAoICFob29rcy51bnF1ZXVlZCApIHsKCQkJCQlvbGRmaXJlKCk7CgkJCQl9CgkJCX07CgkJfQoJCWhvb2tzLnVucXVldWVkKys7CgoJCWFuaW0uYWx3YXlzKCBmdW5jdGlvbigpIHsKCgkJCS8vIGRvaW5nIHRoaXMgbWFrZXMgc3VyZSB0aGF0IHRoZSBjb21wbGV0ZSBoYW5kbGVyIHdpbGwgYmUgY2FsbGVkCgkJCS8vIGJlZm9yZSB0aGlzIGNvbXBsZXRlcwoJCQlhbmltLmFsd2F5cyggZnVuY3Rpb24oKSB7CgkJCQlob29rcy51bnF1ZXVlZC0tOwoJCQkJaWYgKCAhalF1ZXJ5LnF1ZXVlKCBlbGVtLCAiZngiICkubGVuZ3RoICkgewoJCQkJCWhvb2tzLmVtcHR5LmZpcmUoKTsKCQkJCX0KCQkJfSApOwoJCX0gKTsKCX0KCgkvLyBoZWlnaHQvd2lkdGggb3ZlcmZsb3cgcGFzcwoJaWYgKCBlbGVtLm5vZGVUeXBlID09PSAxICYmICggImhlaWdodCIgaW4gcHJvcHMgfHwgIndpZHRoIiBpbiBwcm9wcyApICkgewoKCQkvLyBNYWtlIHN1cmUgdGhhdCBub3RoaW5nIHNuZWFrcyBvdXQKCQkvLyBSZWNvcmQgYWxsIDMgb3ZlcmZsb3cgYXR0cmlidXRlcyBiZWNhdXNlIElFIGRvZXMgbm90CgkJLy8gY2hhbmdlIHRoZSBvdmVyZmxvdyBhdHRyaWJ1dGUgd2hlbiBvdmVyZmxvd1ggYW5kCgkJLy8gb3ZlcmZsb3dZIGFyZSBzZXQgdG8gdGhlIHNhbWUgdmFsdWUKCQlvcHRzLm92ZXJmbG93ID0gWyBzdHlsZS5vdmVyZmxvdywgc3R5bGUub3ZlcmZsb3dYLCBzdHlsZS5vdmVyZmxvd1kgXTsKCgkJLy8gU2V0IGRpc3BsYXkgcHJvcGVydHkgdG8gaW5saW5lLWJsb2NrIGZvciBoZWlnaHQvd2lkdGgKCQkvLyBhbmltYXRpb25zIG9uIGlubGluZSBlbGVtZW50cyB0aGF0IGFyZSBoYXZpbmcgd2lkdGgvaGVpZ2h0IGFuaW1hdGVkCgkJZGlzcGxheSA9IGpRdWVyeS5jc3MoIGVsZW0sICJkaXNwbGF5IiApOwoKCQkvLyBUZXN0IGRlZmF1bHQgZGlzcGxheSBpZiBkaXNwbGF5IGlzIGN1cnJlbnRseSAibm9uZSIKCQljaGVja0Rpc3BsYXkgPSBkaXNwbGF5ID09PSAibm9uZSIgPwoJCQlqUXVlcnkuX2RhdGEoIGVsZW0sICJvbGRkaXNwbGF5IiApIHx8IGRlZmF1bHREaXNwbGF5KCBlbGVtLm5vZGVOYW1lICkgOiBkaXNwbGF5OwoKCQlpZiAoIGNoZWNrRGlzcGxheSA9PT0gImlubGluZSIgJiYgalF1ZXJ5LmNzcyggZWxlbSwgImZsb2F0IiApID09PSAibm9uZSIgKSB7CgoJCQkvLyBpbmxpbmUtbGV2ZWwgZWxlbWVudHMgYWNjZXB0IGlubGluZS1ibG9jazsKCQkJLy8gYmxvY2stbGV2ZWwgZWxlbWVudHMgbmVlZCB0byBiZSBpbmxpbmUgd2l0aCBsYXlvdXQKCQkJaWYgKCAhc3VwcG9ydC5pbmxpbmVCbG9ja05lZWRzTGF5b3V0IHx8IGRlZmF1bHREaXNwbGF5KCBlbGVtLm5vZGVOYW1lICkgPT09ICJpbmxpbmUiICkgewoJCQkJc3R5bGUuZGlzcGxheSA9ICJpbmxpbmUtYmxvY2siOwoJCQl9IGVsc2UgewoJCQkJc3R5bGUuem9vbSA9IDE7CgkJCX0KCQl9Cgl9CgoJaWYgKCBvcHRzLm92ZXJmbG93ICkgewoJCXN0eWxlLm92ZXJmbG93ID0gImhpZGRlbiI7CgkJaWYgKCAhc3VwcG9ydC5zaHJpbmtXcmFwQmxvY2tzKCkgKSB7CgkJCWFuaW0uYWx3YXlzKCBmdW5jdGlvbigpIHsKCQkJCXN0eWxlLm92ZXJmbG93ID0gb3B0cy5vdmVyZmxvd1sgMCBdOwoJCQkJc3R5bGUub3ZlcmZsb3dYID0gb3B0cy5vdmVyZmxvd1sgMSBdOwoJCQkJc3R5bGUub3ZlcmZsb3dZID0gb3B0cy5vdmVyZmxvd1sgMiBdOwoJCQl9ICk7CgkJfQoJfQoKCS8vIHNob3cvaGlkZSBwYXNzCglmb3IgKCBwcm9wIGluIHByb3BzICkgewoJCXZhbHVlID0gcHJvcHNbIHByb3AgXTsKCQlpZiAoIHJmeHR5cGVzLmV4ZWMoIHZhbHVlICkgKSB7CgkJCWRlbGV0ZSBwcm9wc1sgcHJvcCBdOwoJCQl0b2dnbGUgPSB0b2dnbGUgfHwgdmFsdWUgPT09ICJ0b2dnbGUiOwoJCQlpZiAoIHZhbHVlID09PSAoIGhpZGRlbiA/ICJoaWRlIiA6ICJzaG93IiApICkgewoKCQkJCS8vIElmIHRoZXJlIGlzIGRhdGFTaG93IGxlZnQgb3ZlciBmcm9tIGEgc3RvcHBlZCBoaWRlIG9yIHNob3cKCQkJCS8vIGFuZCB3ZSBhcmUgZ29pbmcgdG8gcHJvY2VlZCB3aXRoIHNob3csIHdlIHNob3VsZCBwcmV0ZW5kIHRvIGJlIGhpZGRlbgoJCQkJaWYgKCB2YWx1ZSA9PT0gInNob3ciICYmIGRhdGFTaG93ICYmIGRhdGFTaG93WyBwcm9wIF0gIT09IHVuZGVmaW5lZCApIHsKCQkJCQloaWRkZW4gPSB0cnVlOwoJCQkJfSBlbHNlIHsKCQkJCQljb250aW51ZTsKCQkJCX0KCQkJfQoJCQlvcmlnWyBwcm9wIF0gPSBkYXRhU2hvdyAmJiBkYXRhU2hvd1sgcHJvcCBdIHx8IGpRdWVyeS5zdHlsZSggZWxlbSwgcHJvcCApOwoKCQkvLyBBbnkgbm9uLWZ4IHZhbHVlIHN0b3BzIHVzIGZyb20gcmVzdG9yaW5nIHRoZSBvcmlnaW5hbCBkaXNwbGF5IHZhbHVlCgkJfSBlbHNlIHsKCQkJZGlzcGxheSA9IHVuZGVmaW5lZDsKCQl9Cgl9CgoJaWYgKCAhalF1ZXJ5LmlzRW1wdHlPYmplY3QoIG9yaWcgKSApIHsKCQlpZiAoIGRhdGFTaG93ICkgewoJCQlpZiAoICJoaWRkZW4iIGluIGRhdGFTaG93ICkgewoJCQkJaGlkZGVuID0gZGF0YVNob3cuaGlkZGVuOwoJCQl9CgkJfSBlbHNlIHsKCQkJZGF0YVNob3cgPSBqUXVlcnkuX2RhdGEoIGVsZW0sICJmeHNob3ciLCB7fSApOwoJCX0KCgkJLy8gc3RvcmUgc3RhdGUgaWYgaXRzIHRvZ2dsZSAtIGVuYWJsZXMgLnN0b3AoKS50b2dnbGUoKSB0byAicmV2ZXJzZSIKCQlpZiAoIHRvZ2dsZSApIHsKCQkJZGF0YVNob3cuaGlkZGVuID0gIWhpZGRlbjsKCQl9CgkJaWYgKCBoaWRkZW4gKSB7CgkJCWpRdWVyeSggZWxlbSApLnNob3coKTsKCQl9IGVsc2UgewoJCQlhbmltLmRvbmUoIGZ1bmN0aW9uKCkgewoJCQkJalF1ZXJ5KCBlbGVtICkuaGlkZSgpOwoJCQl9ICk7CgkJfQoJCWFuaW0uZG9uZSggZnVuY3Rpb24oKSB7CgkJCXZhciBwcm9wOwoJCQlqUXVlcnkuX3JlbW92ZURhdGEoIGVsZW0sICJmeHNob3ciICk7CgkJCWZvciAoIHByb3AgaW4gb3JpZyApIHsKCQkJCWpRdWVyeS5zdHlsZSggZWxlbSwgcHJvcCwgb3JpZ1sgcHJvcCBdICk7CgkJCX0KCQl9ICk7CgkJZm9yICggcHJvcCBpbiBvcmlnICkgewoJCQl0d2VlbiA9IGNyZWF0ZVR3ZWVuKCBoaWRkZW4gPyBkYXRhU2hvd1sgcHJvcCBdIDogMCwgcHJvcCwgYW5pbSApOwoKCQkJaWYgKCAhKCBwcm9wIGluIGRhdGFTaG93ICkgKSB7CgkJCQlkYXRhU2hvd1sgcHJvcCBdID0gdHdlZW4uc3RhcnQ7CgkJCQlpZiAoIGhpZGRlbiApIHsKCQkJCQl0d2Vlbi5lbmQgPSB0d2Vlbi5zdGFydDsKCQkJCQl0d2Vlbi5zdGFydCA9IHByb3AgPT09ICJ3aWR0aCIgfHwgcHJvcCA9PT0gImhlaWdodCIgPyAxIDogMDsKCQkJCX0KCQkJfQoJCX0KCgkvLyBJZiB0aGlzIGlzIGEgbm9vcCBsaWtlIC5oaWRlKCkuaGlkZSgpLCByZXN0b3JlIGFuIG92ZXJ3cml0dGVuIGRpc3BsYXkgdmFsdWUKCX0gZWxzZSBpZiAoICggZGlzcGxheSA9PT0gIm5vbmUiID8gZGVmYXVsdERpc3BsYXkoIGVsZW0ubm9kZU5hbWUgKSA6IGRpc3BsYXkgKSA9PT0gImlubGluZSIgKSB7CgkJc3R5bGUuZGlzcGxheSA9IGRpc3BsYXk7Cgl9Cn0KCmZ1bmN0aW9uIHByb3BGaWx0ZXIoIHByb3BzLCBzcGVjaWFsRWFzaW5nICkgewoJdmFyIGluZGV4LCBuYW1lLCBlYXNpbmcsIHZhbHVlLCBob29rczsKCgkvLyBjYW1lbENhc2UsIHNwZWNpYWxFYXNpbmcgYW5kIGV4cGFuZCBjc3NIb29rIHBhc3MKCWZvciAoIGluZGV4IGluIHByb3BzICkgewoJCW5hbWUgPSBqUXVlcnkuY2FtZWxDYXNlKCBpbmRleCApOwoJCWVhc2luZyA9IHNwZWNpYWxFYXNpbmdbIG5hbWUgXTsKCQl2YWx1ZSA9IHByb3BzWyBpbmRleCBdOwoJCWlmICggalF1ZXJ5LmlzQXJyYXkoIHZhbHVlICkgKSB7CgkJCWVhc2luZyA9IHZhbHVlWyAxIF07CgkJCXZhbHVlID0gcHJvcHNbIGluZGV4IF0gPSB2YWx1ZVsgMCBdOwoJCX0KCgkJaWYgKCBpbmRleCAhPT0gbmFtZSApIHsKCQkJcHJvcHNbIG5hbWUgXSA9IHZhbHVlOwoJCQlkZWxldGUgcHJvcHNbIGluZGV4IF07CgkJfQoKCQlob29rcyA9IGpRdWVyeS5jc3NIb29rc1sgbmFtZSBdOwoJCWlmICggaG9va3MgJiYgImV4cGFuZCIgaW4gaG9va3MgKSB7CgkJCXZhbHVlID0gaG9va3MuZXhwYW5kKCB2YWx1ZSApOwoJCQlkZWxldGUgcHJvcHNbIG5hbWUgXTsKCgkJCS8vIG5vdCBxdWl0ZSAkLmV4dGVuZCwgdGhpcyB3b250IG92ZXJ3cml0ZSBrZXlzIGFscmVhZHkgcHJlc2VudC4KCQkJLy8gYWxzbyAtIHJldXNpbmcgJ2luZGV4JyBmcm9tIGFib3ZlIGJlY2F1c2Ugd2UgaGF2ZSB0aGUgY29ycmVjdCAibmFtZSIKCQkJZm9yICggaW5kZXggaW4gdmFsdWUgKSB7CgkJCQlpZiAoICEoIGluZGV4IGluIHByb3BzICkgKSB7CgkJCQkJcHJvcHNbIGluZGV4IF0gPSB2YWx1ZVsgaW5kZXggXTsKCQkJCQlzcGVjaWFsRWFzaW5nWyBpbmRleCBdID0gZWFzaW5nOwoJCQkJfQoJCQl9CgkJfSBlbHNlIHsKCQkJc3BlY2lhbEVhc2luZ1sgbmFtZSBdID0gZWFzaW5nOwoJCX0KCX0KfQoKZnVuY3Rpb24gQW5pbWF0aW9uKCBlbGVtLCBwcm9wZXJ0aWVzLCBvcHRpb25zICkgewoJdmFyIHJlc3VsdCwKCQlzdG9wcGVkLAoJCWluZGV4ID0gMCwKCQlsZW5ndGggPSBBbmltYXRpb24ucHJlZmlsdGVycy5sZW5ndGgsCgkJZGVmZXJyZWQgPSBqUXVlcnkuRGVmZXJyZWQoKS5hbHdheXMoIGZ1bmN0aW9uKCkgewoKCQkJLy8gZG9uJ3QgbWF0Y2ggZWxlbSBpbiB0aGUgOmFuaW1hdGVkIHNlbGVjdG9yCgkJCWRlbGV0ZSB0aWNrLmVsZW07CgkJfSApLAoJCXRpY2sgPSBmdW5jdGlvbigpIHsKCQkJaWYgKCBzdG9wcGVkICkgewoJCQkJcmV0dXJuIGZhbHNlOwoJCQl9CgkJCXZhciBjdXJyZW50VGltZSA9IGZ4Tm93IHx8IGNyZWF0ZUZ4Tm93KCksCgkJCQlyZW1haW5pbmcgPSBNYXRoLm1heCggMCwgYW5pbWF0aW9uLnN0YXJ0VGltZSArIGFuaW1hdGlvbi5kdXJhdGlvbiAtIGN1cnJlbnRUaW1lICksCgoJCQkJLy8gU3VwcG9ydDogQW5kcm9pZCAyLjMKCQkJCS8vIEFyY2hhaWMgY3Jhc2ggYnVnIHdvbid0IGFsbG93IHVzIHRvIHVzZSBgMSAtICggMC41IHx8IDAgKWAgKCMxMjQ5NykKCQkJCXRlbXAgPSByZW1haW5pbmcgLyBhbmltYXRpb24uZHVyYXRpb24gfHwgMCwKCQkJCXBlcmNlbnQgPSAxIC0gdGVtcCwKCQkJCWluZGV4ID0gMCwKCQkJCWxlbmd0aCA9IGFuaW1hdGlvbi50d2VlbnMubGVuZ3RoOwoKCQkJZm9yICggOyBpbmRleCA8IGxlbmd0aCA7IGluZGV4KysgKSB7CgkJCQlhbmltYXRpb24udHdlZW5zWyBpbmRleCBdLnJ1biggcGVyY2VudCApOwoJCQl9CgoJCQlkZWZlcnJlZC5ub3RpZnlXaXRoKCBlbGVtLCBbIGFuaW1hdGlvbiwgcGVyY2VudCwgcmVtYWluaW5nIF0gKTsKCgkJCWlmICggcGVyY2VudCA8IDEgJiYgbGVuZ3RoICkgewoJCQkJcmV0dXJuIHJlbWFpbmluZzsKCQkJfSBlbHNlIHsKCQkJCWRlZmVycmVkLnJlc29sdmVXaXRoKCBlbGVtLCBbIGFuaW1hdGlvbiBdICk7CgkJCQlyZXR1cm4gZmFsc2U7CgkJCX0KCQl9LAoJCWFuaW1hdGlvbiA9IGRlZmVycmVkLnByb21pc2UoIHsKCQkJZWxlbTogZWxlbSwKCQkJcHJvcHM6IGpRdWVyeS5leHRlbmQoIHt9LCBwcm9wZXJ0aWVzICksCgkJCW9wdHM6IGpRdWVyeS5leHRlbmQoIHRydWUsIHsKCQkJCXNwZWNpYWxFYXNpbmc6IHt9LAoJCQkJZWFzaW5nOiBqUXVlcnkuZWFzaW5nLl9kZWZhdWx0CgkJCX0sIG9wdGlvbnMgKSwKCQkJb3JpZ2luYWxQcm9wZXJ0aWVzOiBwcm9wZXJ0aWVzLAoJCQlvcmlnaW5hbE9wdGlvbnM6IG9wdGlvbnMsCgkJCXN0YXJ0VGltZTogZnhOb3cgfHwgY3JlYXRlRnhOb3coKSwKCQkJZHVyYXRpb246IG9wdGlvbnMuZHVyYXRpb24sCgkJCXR3ZWVuczogW10sCgkJCWNyZWF0ZVR3ZWVuOiBmdW5jdGlvbiggcHJvcCwgZW5kICkgewoJCQkJdmFyIHR3ZWVuID0galF1ZXJ5LlR3ZWVuKCBlbGVtLCBhbmltYXRpb24ub3B0cywgcHJvcCwgZW5kLAoJCQkJCQlhbmltYXRpb24ub3B0cy5zcGVjaWFsRWFzaW5nWyBwcm9wIF0gfHwgYW5pbWF0aW9uLm9wdHMuZWFzaW5nICk7CgkJCQlhbmltYXRpb24udHdlZW5zLnB1c2goIHR3ZWVuICk7CgkJCQlyZXR1cm4gdHdlZW47CgkJCX0sCgkJCXN0b3A6IGZ1bmN0aW9uKCBnb3RvRW5kICkgewoJCQkJdmFyIGluZGV4ID0gMCwKCgkJCQkJLy8gaWYgd2UgYXJlIGdvaW5nIHRvIHRoZSBlbmQsIHdlIHdhbnQgdG8gcnVuIGFsbCB0aGUgdHdlZW5zCgkJCQkJLy8gb3RoZXJ3aXNlIHdlIHNraXAgdGhpcyBwYXJ0CgkJCQkJbGVuZ3RoID0gZ290b0VuZCA/IGFuaW1hdGlvbi50d2VlbnMubGVuZ3RoIDogMDsKCQkJCWlmICggc3RvcHBlZCApIHsKCQkJCQlyZXR1cm4gdGhpczsKCQkJCX0KCQkJCXN0b3BwZWQgPSB0cnVlOwoJCQkJZm9yICggOyBpbmRleCA8IGxlbmd0aCA7IGluZGV4KysgKSB7CgkJCQkJYW5pbWF0aW9uLnR3ZWVuc1sgaW5kZXggXS5ydW4oIDEgKTsKCQkJCX0KCgkJCQkvLyByZXNvbHZlIHdoZW4gd2UgcGxheWVkIHRoZSBsYXN0IGZyYW1lCgkJCQkvLyBvdGhlcndpc2UsIHJlamVjdAoJCQkJaWYgKCBnb3RvRW5kICkgewoJCQkJCWRlZmVycmVkLm5vdGlmeVdpdGgoIGVsZW0sIFsgYW5pbWF0aW9uLCAxLCAwIF0gKTsKCQkJCQlkZWZlcnJlZC5yZXNvbHZlV2l0aCggZWxlbSwgWyBhbmltYXRpb24sIGdvdG9FbmQgXSApOwoJCQkJfSBlbHNlIHsKCQkJCQlkZWZlcnJlZC5yZWplY3RXaXRoKCBlbGVtLCBbIGFuaW1hdGlvbiwgZ290b0VuZCBdICk7CgkJCQl9CgkJCQlyZXR1cm4gdGhpczsKCQkJfQoJCX0gKSwKCQlwcm9wcyA9IGFuaW1hdGlvbi5wcm9wczsKCglwcm9wRmlsdGVyKCBwcm9wcywgYW5pbWF0aW9uLm9wdHMuc3BlY2lhbEVhc2luZyApOwoKCWZvciAoIDsgaW5kZXggPCBsZW5ndGggOyBpbmRleCsrICkgewoJCXJlc3VsdCA9IEFuaW1hdGlvbi5wcmVmaWx0ZXJzWyBpbmRleCBdLmNhbGwoIGFuaW1hdGlvbiwgZWxlbSwgcHJvcHMsIGFuaW1hdGlvbi5vcHRzICk7CgkJaWYgKCByZXN1bHQgKSB7CgkJCWlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIHJlc3VsdC5zdG9wICkgKSB7CgkJCQlqUXVlcnkuX3F1ZXVlSG9va3MoIGFuaW1hdGlvbi5lbGVtLCBhbmltYXRpb24ub3B0cy5xdWV1ZSApLnN0b3AgPQoJCQkJCWpRdWVyeS5wcm94eSggcmVzdWx0LnN0b3AsIHJlc3VsdCApOwoJCQl9CgkJCXJldHVybiByZXN1bHQ7CgkJfQoJfQoKCWpRdWVyeS5tYXAoIHByb3BzLCBjcmVhdGVUd2VlbiwgYW5pbWF0aW9uICk7CgoJaWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggYW5pbWF0aW9uLm9wdHMuc3RhcnQgKSApIHsKCQlhbmltYXRpb24ub3B0cy5zdGFydC5jYWxsKCBlbGVtLCBhbmltYXRpb24gKTsKCX0KCglqUXVlcnkuZngudGltZXIoCgkJalF1ZXJ5LmV4dGVuZCggdGljaywgewoJCQllbGVtOiBlbGVtLAoJCQlhbmltOiBhbmltYXRpb24sCgkJCXF1ZXVlOiBhbmltYXRpb24ub3B0cy5xdWV1ZQoJCX0gKQoJKTsKCgkvLyBhdHRhY2ggY2FsbGJhY2tzIGZyb20gb3B0aW9ucwoJcmV0dXJuIGFuaW1hdGlvbi5wcm9ncmVzcyggYW5pbWF0aW9uLm9wdHMucHJvZ3Jlc3MgKQoJCS5kb25lKCBhbmltYXRpb24ub3B0cy5kb25lLCBhbmltYXRpb24ub3B0cy5jb21wbGV0ZSApCgkJLmZhaWwoIGFuaW1hdGlvbi5vcHRzLmZhaWwgKQoJCS5hbHdheXMoIGFuaW1hdGlvbi5vcHRzLmFsd2F5cyApOwp9CgpqUXVlcnkuQW5pbWF0aW9uID0galF1ZXJ5LmV4dGVuZCggQW5pbWF0aW9uLCB7CgoJdHdlZW5lcnM6IHsKCQkiKiI6IFsgZnVuY3Rpb24oIHByb3AsIHZhbHVlICkgewoJCQl2YXIgdHdlZW4gPSB0aGlzLmNyZWF0ZVR3ZWVuKCBwcm9wLCB2YWx1ZSApOwoJCQlhZGp1c3RDU1MoIHR3ZWVuLmVsZW0sIHByb3AsIHJjc3NOdW0uZXhlYyggdmFsdWUgKSwgdHdlZW4gKTsKCQkJcmV0dXJuIHR3ZWVuOwoJCX0gXQoJfSwKCgl0d2VlbmVyOiBmdW5jdGlvbiggcHJvcHMsIGNhbGxiYWNrICkgewoJCWlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIHByb3BzICkgKSB7CgkJCWNhbGxiYWNrID0gcHJvcHM7CgkJCXByb3BzID0gWyAiKiIgXTsKCQl9IGVsc2UgewoJCQlwcm9wcyA9IHByb3BzLm1hdGNoKCBybm90d2hpdGUgKTsKCQl9CgoJCXZhciBwcm9wLAoJCQlpbmRleCA9IDAsCgkJCWxlbmd0aCA9IHByb3BzLmxlbmd0aDsKCgkJZm9yICggOyBpbmRleCA8IGxlbmd0aCA7IGluZGV4KysgKSB7CgkJCXByb3AgPSBwcm9wc1sgaW5kZXggXTsKCQkJQW5pbWF0aW9uLnR3ZWVuZXJzWyBwcm9wIF0gPSBBbmltYXRpb24udHdlZW5lcnNbIHByb3AgXSB8fCBbXTsKCQkJQW5pbWF0aW9uLnR3ZWVuZXJzWyBwcm9wIF0udW5zaGlmdCggY2FsbGJhY2sgKTsKCQl9Cgl9LAoKCXByZWZpbHRlcnM6IFsgZGVmYXVsdFByZWZpbHRlciBdLAoKCXByZWZpbHRlcjogZnVuY3Rpb24oIGNhbGxiYWNrLCBwcmVwZW5kICkgewoJCWlmICggcHJlcGVuZCApIHsKCQkJQW5pbWF0aW9uLnByZWZpbHRlcnMudW5zaGlmdCggY2FsbGJhY2sgKTsKCQl9IGVsc2UgewoJCQlBbmltYXRpb24ucHJlZmlsdGVycy5wdXNoKCBjYWxsYmFjayApOwoJCX0KCX0KfSApOwoKalF1ZXJ5LnNwZWVkID0gZnVuY3Rpb24oIHNwZWVkLCBlYXNpbmcsIGZuICkgewoJdmFyIG9wdCA9IHNwZWVkICYmIHR5cGVvZiBzcGVlZCA9PT0gIm9iamVjdCIgPyBqUXVlcnkuZXh0ZW5kKCB7fSwgc3BlZWQgKSA6IHsKCQljb21wbGV0ZTogZm4gfHwgIWZuICYmIGVhc2luZyB8fAoJCQlqUXVlcnkuaXNGdW5jdGlvbiggc3BlZWQgKSAmJiBzcGVlZCwKCQlkdXJhdGlvbjogc3BlZWQsCgkJZWFzaW5nOiBmbiAmJiBlYXNpbmcgfHwgZWFzaW5nICYmICFqUXVlcnkuaXNGdW5jdGlvbiggZWFzaW5nICkgJiYgZWFzaW5nCgl9OwoKCW9wdC5kdXJhdGlvbiA9IGpRdWVyeS5meC5vZmYgPyAwIDogdHlwZW9mIG9wdC5kdXJhdGlvbiA9PT0gIm51bWJlciIgPyBvcHQuZHVyYXRpb24gOgoJCW9wdC5kdXJhdGlvbiBpbiBqUXVlcnkuZnguc3BlZWRzID8KCQkJalF1ZXJ5LmZ4LnNwZWVkc1sgb3B0LmR1cmF0aW9uIF0gOiBqUXVlcnkuZnguc3BlZWRzLl9kZWZhdWx0OwoKCS8vIG5vcm1hbGl6ZSBvcHQucXVldWUgLSB0cnVlL3VuZGVmaW5lZC9udWxsIC0+ICJmeCIKCWlmICggb3B0LnF1ZXVlID09IG51bGwgfHwgb3B0LnF1ZXVlID09PSB0cnVlICkgewoJCW9wdC5xdWV1ZSA9ICJmeCI7Cgl9CgoJLy8gUXVldWVpbmcKCW9wdC5vbGQgPSBvcHQuY29tcGxldGU7CgoJb3B0LmNvbXBsZXRlID0gZnVuY3Rpb24oKSB7CgkJaWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggb3B0Lm9sZCApICkgewoJCQlvcHQub2xkLmNhbGwoIHRoaXMgKTsKCQl9CgoJCWlmICggb3B0LnF1ZXVlICkgewoJCQlqUXVlcnkuZGVxdWV1ZSggdGhpcywgb3B0LnF1ZXVlICk7CgkJfQoJfTsKCglyZXR1cm4gb3B0Owp9OwoKalF1ZXJ5LmZuLmV4dGVuZCggewoJZmFkZVRvOiBmdW5jdGlvbiggc3BlZWQsIHRvLCBlYXNpbmcsIGNhbGxiYWNrICkgewoKCQkvLyBzaG93IGFueSBoaWRkZW4gZWxlbWVudHMgYWZ0ZXIgc2V0dGluZyBvcGFjaXR5IHRvIDAKCQlyZXR1cm4gdGhpcy5maWx0ZXIoIGlzSGlkZGVuICkuY3NzKCAib3BhY2l0eSIsIDAgKS5zaG93KCkKCgkJCS8vIGFuaW1hdGUgdG8gdGhlIHZhbHVlIHNwZWNpZmllZAoJCQkuZW5kKCkuYW5pbWF0ZSggeyBvcGFjaXR5OiB0byB9LCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApOwoJfSwKCWFuaW1hdGU6IGZ1bmN0aW9uKCBwcm9wLCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApIHsKCQl2YXIgZW1wdHkgPSBqUXVlcnkuaXNFbXB0eU9iamVjdCggcHJvcCApLAoJCQlvcHRhbGwgPSBqUXVlcnkuc3BlZWQoIHNwZWVkLCBlYXNpbmcsIGNhbGxiYWNrICksCgkJCWRvQW5pbWF0aW9uID0gZnVuY3Rpb24oKSB7CgoJCQkJLy8gT3BlcmF0ZSBvbiBhIGNvcHkgb2YgcHJvcCBzbyBwZXItcHJvcGVydHkgZWFzaW5nIHdvbid0IGJlIGxvc3QKCQkJCXZhciBhbmltID0gQW5pbWF0aW9uKCB0aGlzLCBqUXVlcnkuZXh0ZW5kKCB7fSwgcHJvcCApLCBvcHRhbGwgKTsKCgkJCQkvLyBFbXB0eSBhbmltYXRpb25zLCBvciBmaW5pc2hpbmcgcmVzb2x2ZXMgaW1tZWRpYXRlbHkKCQkJCWlmICggZW1wdHkgfHwgalF1ZXJ5Ll9kYXRhKCB0aGlzLCAiZmluaXNoIiApICkgewoJCQkJCWFuaW0uc3RvcCggdHJ1ZSApOwoJCQkJfQoJCQl9OwoJCQlkb0FuaW1hdGlvbi5maW5pc2ggPSBkb0FuaW1hdGlvbjsKCgkJcmV0dXJuIGVtcHR5IHx8IG9wdGFsbC5xdWV1ZSA9PT0gZmFsc2UgPwoJCQl0aGlzLmVhY2goIGRvQW5pbWF0aW9uICkgOgoJCQl0aGlzLnF1ZXVlKCBvcHRhbGwucXVldWUsIGRvQW5pbWF0aW9uICk7Cgl9LAoJc3RvcDogZnVuY3Rpb24oIHR5cGUsIGNsZWFyUXVldWUsIGdvdG9FbmQgKSB7CgkJdmFyIHN0b3BRdWV1ZSA9IGZ1bmN0aW9uKCBob29rcyApIHsKCQkJdmFyIHN0b3AgPSBob29rcy5zdG9wOwoJCQlkZWxldGUgaG9va3Muc3RvcDsKCQkJc3RvcCggZ290b0VuZCApOwoJCX07CgoJCWlmICggdHlwZW9mIHR5cGUgIT09ICJzdHJpbmciICkgewoJCQlnb3RvRW5kID0gY2xlYXJRdWV1ZTsKCQkJY2xlYXJRdWV1ZSA9IHR5cGU7CgkJCXR5cGUgPSB1bmRlZmluZWQ7CgkJfQoJCWlmICggY2xlYXJRdWV1ZSAmJiB0eXBlICE9PSBmYWxzZSApIHsKCQkJdGhpcy5xdWV1ZSggdHlwZSB8fCAiZngiLCBbXSApOwoJCX0KCgkJcmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7CgkJCXZhciBkZXF1ZXVlID0gdHJ1ZSwKCQkJCWluZGV4ID0gdHlwZSAhPSBudWxsICYmIHR5cGUgKyAicXVldWVIb29rcyIsCgkJCQl0aW1lcnMgPSBqUXVlcnkudGltZXJzLAoJCQkJZGF0YSA9IGpRdWVyeS5fZGF0YSggdGhpcyApOwoKCQkJaWYgKCBpbmRleCApIHsKCQkJCWlmICggZGF0YVsgaW5kZXggXSAmJiBkYXRhWyBpbmRleCBdLnN0b3AgKSB7CgkJCQkJc3RvcFF1ZXVlKCBkYXRhWyBpbmRleCBdICk7CgkJCQl9CgkJCX0gZWxzZSB7CgkJCQlmb3IgKCBpbmRleCBpbiBkYXRhICkgewoJCQkJCWlmICggZGF0YVsgaW5kZXggXSAmJiBkYXRhWyBpbmRleCBdLnN0b3AgJiYgcnJ1bi50ZXN0KCBpbmRleCApICkgewoJCQkJCQlzdG9wUXVldWUoIGRhdGFbIGluZGV4IF0gKTsKCQkJCQl9CgkJCQl9CgkJCX0KCgkJCWZvciAoIGluZGV4ID0gdGltZXJzLmxlbmd0aDsgaW5kZXgtLTsgKSB7CgkJCQlpZiAoIHRpbWVyc1sgaW5kZXggXS5lbGVtID09PSB0aGlzICYmCgkJCQkJKCB0eXBlID09IG51bGwgfHwgdGltZXJzWyBpbmRleCBdLnF1ZXVlID09PSB0eXBlICkgKSB7CgoJCQkJCXRpbWVyc1sgaW5kZXggXS5hbmltLnN0b3AoIGdvdG9FbmQgKTsKCQkJCQlkZXF1ZXVlID0gZmFsc2U7CgkJCQkJdGltZXJzLnNwbGljZSggaW5kZXgsIDEgKTsKCQkJCX0KCQkJfQoKCQkJLy8gc3RhcnQgdGhlIG5leHQgaW4gdGhlIHF1ZXVlIGlmIHRoZSBsYXN0IHN0ZXAgd2Fzbid0IGZvcmNlZAoJCQkvLyB0aW1lcnMgY3VycmVudGx5IHdpbGwgY2FsbCB0aGVpciBjb21wbGV0ZSBjYWxsYmFja3MsIHdoaWNoIHdpbGwgZGVxdWV1ZQoJCQkvLyBidXQgb25seSBpZiB0aGV5IHdlcmUgZ290b0VuZAoJCQlpZiAoIGRlcXVldWUgfHwgIWdvdG9FbmQgKSB7CgkJCQlqUXVlcnkuZGVxdWV1ZSggdGhpcywgdHlwZSApOwoJCQl9CgkJfSApOwoJfSwKCWZpbmlzaDogZnVuY3Rpb24oIHR5cGUgKSB7CgkJaWYgKCB0eXBlICE9PSBmYWxzZSApIHsKCQkJdHlwZSA9IHR5cGUgfHwgImZ4IjsKCQl9CgkJcmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7CgkJCXZhciBpbmRleCwKCQkJCWRhdGEgPSBqUXVlcnkuX2RhdGEoIHRoaXMgKSwKCQkJCXF1ZXVlID0gZGF0YVsgdHlwZSArICJxdWV1ZSIgXSwKCQkJCWhvb2tzID0gZGF0YVsgdHlwZSArICJxdWV1ZUhvb2tzIiBdLAoJCQkJdGltZXJzID0galF1ZXJ5LnRpbWVycywKCQkJCWxlbmd0aCA9IHF1ZXVlID8gcXVldWUubGVuZ3RoIDogMDsKCgkJCS8vIGVuYWJsZSBmaW5pc2hpbmcgZmxhZyBvbiBwcml2YXRlIGRhdGEKCQkJZGF0YS5maW5pc2ggPSB0cnVlOwoKCQkJLy8gZW1wdHkgdGhlIHF1ZXVlIGZpcnN0CgkJCWpRdWVyeS5xdWV1ZSggdGhpcywgdHlwZSwgW10gKTsKCgkJCWlmICggaG9va3MgJiYgaG9va3Muc3RvcCApIHsKCQkJCWhvb2tzLnN0b3AuY2FsbCggdGhpcywgdHJ1ZSApOwoJCQl9CgoJCQkvLyBsb29rIGZvciBhbnkgYWN0aXZlIGFuaW1hdGlvbnMsIGFuZCBmaW5pc2ggdGhlbQoJCQlmb3IgKCBpbmRleCA9IHRpbWVycy5sZW5ndGg7IGluZGV4LS07ICkgewoJCQkJaWYgKCB0aW1lcnNbIGluZGV4IF0uZWxlbSA9PT0gdGhpcyAmJiB0aW1lcnNbIGluZGV4IF0ucXVldWUgPT09IHR5cGUgKSB7CgkJCQkJdGltZXJzWyBpbmRleCBdLmFuaW0uc3RvcCggdHJ1ZSApOwoJCQkJCXRpbWVycy5zcGxpY2UoIGluZGV4LCAxICk7CgkJCQl9CgkJCX0KCgkJCS8vIGxvb2sgZm9yIGFueSBhbmltYXRpb25zIGluIHRoZSBvbGQgcXVldWUgYW5kIGZpbmlzaCB0aGVtCgkJCWZvciAoIGluZGV4ID0gMDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KysgKSB7CgkJCQlpZiAoIHF1ZXVlWyBpbmRleCBdICYmIHF1ZXVlWyBpbmRleCBdLmZpbmlzaCApIHsKCQkJCQlxdWV1ZVsgaW5kZXggXS5maW5pc2guY2FsbCggdGhpcyApOwoJCQkJfQoJCQl9CgoJCQkvLyB0dXJuIG9mZiBmaW5pc2hpbmcgZmxhZwoJCQlkZWxldGUgZGF0YS5maW5pc2g7CgkJfSApOwoJfQp9ICk7CgpqUXVlcnkuZWFjaCggWyAidG9nZ2xlIiwgInNob3ciLCAiaGlkZSIgXSwgZnVuY3Rpb24oIGksIG5hbWUgKSB7Cgl2YXIgY3NzRm4gPSBqUXVlcnkuZm5bIG5hbWUgXTsKCWpRdWVyeS5mblsgbmFtZSBdID0gZnVuY3Rpb24oIHNwZWVkLCBlYXNpbmcsIGNhbGxiYWNrICkgewoJCXJldHVybiBzcGVlZCA9PSBudWxsIHx8IHR5cGVvZiBzcGVlZCA9PT0gImJvb2xlYW4iID8KCQkJY3NzRm4uYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApIDoKCQkJdGhpcy5hbmltYXRlKCBnZW5GeCggbmFtZSwgdHJ1ZSApLCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApOwoJfTsKfSApOwoKLy8gR2VuZXJhdGUgc2hvcnRjdXRzIGZvciBjdXN0b20gYW5pbWF0aW9ucwpqUXVlcnkuZWFjaCggewoJc2xpZGVEb3duOiBnZW5GeCggInNob3ciICksCglzbGlkZVVwOiBnZW5GeCggImhpZGUiICksCglzbGlkZVRvZ2dsZTogZ2VuRngoICJ0b2dnbGUiICksCglmYWRlSW46IHsgb3BhY2l0eTogInNob3ciIH0sCglmYWRlT3V0OiB7IG9wYWNpdHk6ICJoaWRlIiB9LAoJZmFkZVRvZ2dsZTogeyBvcGFjaXR5OiAidG9nZ2xlIiB9Cn0sIGZ1bmN0aW9uKCBuYW1lLCBwcm9wcyApIHsKCWpRdWVyeS5mblsgbmFtZSBdID0gZnVuY3Rpb24oIHNwZWVkLCBlYXNpbmcsIGNhbGxiYWNrICkgewoJCXJldHVybiB0aGlzLmFuaW1hdGUoIHByb3BzLCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApOwoJfTsKfSApOwoKalF1ZXJ5LnRpbWVycyA9IFtdOwpqUXVlcnkuZngudGljayA9IGZ1bmN0aW9uKCkgewoJdmFyIHRpbWVyLAoJCXRpbWVycyA9IGpRdWVyeS50aW1lcnMsCgkJaSA9IDA7CgoJZnhOb3cgPSBqUXVlcnkubm93KCk7CgoJZm9yICggOyBpIDwgdGltZXJzLmxlbmd0aDsgaSsrICkgewoJCXRpbWVyID0gdGltZXJzWyBpIF07CgoJCS8vIENoZWNrcyB0aGUgdGltZXIgaGFzIG5vdCBhbHJlYWR5IGJlZW4gcmVtb3ZlZAoJCWlmICggIXRpbWVyKCkgJiYgdGltZXJzWyBpIF0gPT09IHRpbWVyICkgewoJCQl0aW1lcnMuc3BsaWNlKCBpLS0sIDEgKTsKCQl9Cgl9CgoJaWYgKCAhdGltZXJzLmxlbmd0aCApIHsKCQlqUXVlcnkuZnguc3RvcCgpOwoJfQoJZnhOb3cgPSB1bmRlZmluZWQ7Cn07CgpqUXVlcnkuZngudGltZXIgPSBmdW5jdGlvbiggdGltZXIgKSB7CglqUXVlcnkudGltZXJzLnB1c2goIHRpbWVyICk7CglpZiAoIHRpbWVyKCkgKSB7CgkJalF1ZXJ5LmZ4LnN0YXJ0KCk7Cgl9IGVsc2UgewoJCWpRdWVyeS50aW1lcnMucG9wKCk7Cgl9Cn07CgpqUXVlcnkuZnguaW50ZXJ2YWwgPSAxMzsKCmpRdWVyeS5meC5zdGFydCA9IGZ1bmN0aW9uKCkgewoJaWYgKCAhdGltZXJJZCApIHsKCQl0aW1lcklkID0gd2luZG93LnNldEludGVydmFsKCBqUXVlcnkuZngudGljaywgalF1ZXJ5LmZ4LmludGVydmFsICk7Cgl9Cn07CgpqUXVlcnkuZnguc3RvcCA9IGZ1bmN0aW9uKCkgewoJd2luZG93LmNsZWFySW50ZXJ2YWwoIHRpbWVySWQgKTsKCXRpbWVySWQgPSBudWxsOwp9OwoKalF1ZXJ5LmZ4LnNwZWVkcyA9IHsKCXNsb3c6IDYwMCwKCWZhc3Q6IDIwMCwKCgkvLyBEZWZhdWx0IHNwZWVkCglfZGVmYXVsdDogNDAwCn07CgoKLy8gQmFzZWQgb2ZmIG9mIHRoZSBwbHVnaW4gYnkgQ2xpbnQgSGVsZmVycywgd2l0aCBwZXJtaXNzaW9uLgovLyBodHRwOi8vd2ViLmFyY2hpdmUub3JnL3dlYi8yMDEwMDMyNDAxNDc0Ny9odHRwOi8vYmxpbmRzaWduYWxzLmNvbS9pbmRleC5waHAvMjAwOS8wNy9qcXVlcnktZGVsYXkvCmpRdWVyeS5mbi5kZWxheSA9IGZ1bmN0aW9uKCB0aW1lLCB0eXBlICkgewoJdGltZSA9IGpRdWVyeS5meCA/IGpRdWVyeS5meC5zcGVlZHNbIHRpbWUgXSB8fCB0aW1lIDogdGltZTsKCXR5cGUgPSB0eXBlIHx8ICJmeCI7CgoJcmV0dXJuIHRoaXMucXVldWUoIHR5cGUsIGZ1bmN0aW9uKCBuZXh0LCBob29rcyApIHsKCQl2YXIgdGltZW91dCA9IHdpbmRvdy5zZXRUaW1lb3V0KCBuZXh0LCB0aW1lICk7CgkJaG9va3Muc3RvcCA9IGZ1bmN0aW9uKCkgewoJCQl3aW5kb3cuY2xlYXJUaW1lb3V0KCB0aW1lb3V0ICk7CgkJfTsKCX0gKTsKfTsKCgooIGZ1bmN0aW9uKCkgewoJdmFyIGEsCgkJaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAiaW5wdXQiICksCgkJZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggImRpdiIgKSwKCQlzZWxlY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAic2VsZWN0IiApLAoJCW9wdCA9IHNlbGVjdC5hcHBlbmRDaGlsZCggZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggIm9wdGlvbiIgKSApOwoKCS8vIFNldHVwCglkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAiZGl2IiApOwoJZGl2LnNldEF0dHJpYnV0ZSggImNsYXNzTmFtZSIsICJ0IiApOwoJZGl2LmlubmVySFRNTCA9ICIgIDxsaW5rLz48dGFibGU+PC90YWJsZT48YSBocmVmPScvYSc+YTwvYT48aW5wdXQgdHlwZT0nY2hlY2tib3gnLz4iOwoJYSA9IGRpdi5nZXRFbGVtZW50c0J5VGFnTmFtZSggImEiIClbIDAgXTsKCgkvLyBTdXBwb3J0OiBXaW5kb3dzIFdlYiBBcHBzIChXV0EpCgkvLyBgdHlwZWAgbXVzdCB1c2UgLnNldEF0dHJpYnV0ZSBmb3IgV1dBICgjMTQ5MDEpCglpbnB1dC5zZXRBdHRyaWJ1dGUoICJ0eXBlIiwgImNoZWNrYm94IiApOwoJZGl2LmFwcGVuZENoaWxkKCBpbnB1dCApOwoKCWEgPSBkaXYuZ2V0RWxlbWVudHNCeVRhZ05hbWUoICJhIiApWyAwIF07CgoJLy8gRmlyc3QgYmF0Y2ggb2YgdGVzdHMuCglhLnN0eWxlLmNzc1RleHQgPSAidG9wOjFweCI7CgoJLy8gVGVzdCBzZXRBdHRyaWJ1dGUgb24gY2FtZWxDYXNlIGNsYXNzLgoJLy8gSWYgaXQgd29ya3MsIHdlIG5lZWQgYXR0ckZpeGVzIHdoZW4gZG9pbmcgZ2V0L3NldEF0dHJpYnV0ZSAoaWU2LzcpCglzdXBwb3J0LmdldFNldEF0dHJpYnV0ZSA9IGRpdi5jbGFzc05hbWUgIT09ICJ0IjsKCgkvLyBHZXQgdGhlIHN0eWxlIGluZm9ybWF0aW9uIGZyb20gZ2V0QXR0cmlidXRlCgkvLyAoSUUgdXNlcyAuY3NzVGV4dCBpbnN0ZWFkKQoJc3VwcG9ydC5zdHlsZSA9IC90b3AvLnRlc3QoIGEuZ2V0QXR0cmlidXRlKCAic3R5bGUiICkgKTsKCgkvLyBNYWtlIHN1cmUgdGhhdCBVUkxzIGFyZW4ndCBtYW5pcHVsYXRlZAoJLy8gKElFIG5vcm1hbGl6ZXMgaXQgYnkgZGVmYXVsdCkKCXN1cHBvcnQuaHJlZk5vcm1hbGl6ZWQgPSBhLmdldEF0dHJpYnV0ZSggImhyZWYiICkgPT09ICIvYSI7CgoJLy8gQ2hlY2sgdGhlIGRlZmF1bHQgY2hlY2tib3gvcmFkaW8gdmFsdWUgKCIiIG9uIFdlYktpdDsgIm9uIiBlbHNld2hlcmUpCglzdXBwb3J0LmNoZWNrT24gPSAhIWlucHV0LnZhbHVlOwoKCS8vIE1ha2Ugc3VyZSB0aGF0IGEgc2VsZWN0ZWQtYnktZGVmYXVsdCBvcHRpb24gaGFzIGEgd29ya2luZyBzZWxlY3RlZCBwcm9wZXJ0eS4KCS8vIChXZWJLaXQgZGVmYXVsdHMgdG8gZmFsc2UgaW5zdGVhZCBvZiB0cnVlLCBJRSB0b28sIGlmIGl0J3MgaW4gYW4gb3B0Z3JvdXApCglzdXBwb3J0Lm9wdFNlbGVjdGVkID0gb3B0LnNlbGVjdGVkOwoKCS8vIFRlc3RzIGZvciBlbmN0eXBlIHN1cHBvcnQgb24gYSBmb3JtICgjNjc0MykKCXN1cHBvcnQuZW5jdHlwZSA9ICEhZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggImZvcm0iICkuZW5jdHlwZTsKCgkvLyBNYWtlIHN1cmUgdGhhdCB0aGUgb3B0aW9ucyBpbnNpZGUgZGlzYWJsZWQgc2VsZWN0cyBhcmVuJ3QgbWFya2VkIGFzIGRpc2FibGVkCgkvLyAoV2ViS2l0IG1hcmtzIHRoZW0gYXMgZGlzYWJsZWQpCglzZWxlY3QuZGlzYWJsZWQgPSB0cnVlOwoJc3VwcG9ydC5vcHREaXNhYmxlZCA9ICFvcHQuZGlzYWJsZWQ7CgoJLy8gU3VwcG9ydDogSUU4IG9ubHkKCS8vIENoZWNrIGlmIHdlIGNhbiB0cnVzdCBnZXRBdHRyaWJ1dGUoInZhbHVlIikKCWlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggImlucHV0IiApOwoJaW5wdXQuc2V0QXR0cmlidXRlKCAidmFsdWUiLCAiIiApOwoJc3VwcG9ydC5pbnB1dCA9IGlucHV0LmdldEF0dHJpYnV0ZSggInZhbHVlIiApID09PSAiIjsKCgkvLyBDaGVjayBpZiBhbiBpbnB1dCBtYWludGFpbnMgaXRzIHZhbHVlIGFmdGVyIGJlY29taW5nIGEgcmFkaW8KCWlucHV0LnZhbHVlID0gInQiOwoJaW5wdXQuc2V0QXR0cmlidXRlKCAidHlwZSIsICJyYWRpbyIgKTsKCXN1cHBvcnQucmFkaW9WYWx1ZSA9IGlucHV0LnZhbHVlID09PSAidCI7Cn0gKSgpOwoKCnZhciBycmV0dXJuID0gL1xyL2csCglyc3BhY2VzID0gL1tceDIwXHRcclxuXGZdKy9nOwoKalF1ZXJ5LmZuLmV4dGVuZCggewoJdmFsOiBmdW5jdGlvbiggdmFsdWUgKSB7CgkJdmFyIGhvb2tzLCByZXQsIGlzRnVuY3Rpb24sCgkJCWVsZW0gPSB0aGlzWyAwIF07CgoJCWlmICggIWFyZ3VtZW50cy5sZW5ndGggKSB7CgkJCWlmICggZWxlbSApIHsKCQkJCWhvb2tzID0galF1ZXJ5LnZhbEhvb2tzWyBlbGVtLnR5cGUgXSB8fAoJCQkJCWpRdWVyeS52YWxIb29rc1sgZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpIF07CgoJCQkJaWYgKAoJCQkJCWhvb2tzICYmCgkJCQkJImdldCIgaW4gaG9va3MgJiYKCQkJCQkoIHJldCA9IGhvb2tzLmdldCggZWxlbSwgInZhbHVlIiApICkgIT09IHVuZGVmaW5lZAoJCQkJKSB7CgkJCQkJcmV0dXJuIHJldDsKCQkJCX0KCgkJCQlyZXQgPSBlbGVtLnZhbHVlOwoKCQkJCXJldHVybiB0eXBlb2YgcmV0ID09PSAic3RyaW5nIiA/CgoJCQkJCS8vIGhhbmRsZSBtb3N0IGNvbW1vbiBzdHJpbmcgY2FzZXMKCQkJCQlyZXQucmVwbGFjZSggcnJldHVybiwgIiIgKSA6CgoJCQkJCS8vIGhhbmRsZSBjYXNlcyB3aGVyZSB2YWx1ZSBpcyBudWxsL3VuZGVmIG9yIG51bWJlcgoJCQkJCXJldCA9PSBudWxsID8gIiIgOiByZXQ7CgkJCX0KCgkJCXJldHVybjsKCQl9CgoJCWlzRnVuY3Rpb24gPSBqUXVlcnkuaXNGdW5jdGlvbiggdmFsdWUgKTsKCgkJcmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oIGkgKSB7CgkJCXZhciB2YWw7CgoJCQlpZiAoIHRoaXMubm9kZVR5cGUgIT09IDEgKSB7CgkJCQlyZXR1cm47CgkJCX0KCgkJCWlmICggaXNGdW5jdGlvbiApIHsKCQkJCXZhbCA9IHZhbHVlLmNhbGwoIHRoaXMsIGksIGpRdWVyeSggdGhpcyApLnZhbCgpICk7CgkJCX0gZWxzZSB7CgkJCQl2YWwgPSB2YWx1ZTsKCQkJfQoKCQkJLy8gVHJlYXQgbnVsbC91bmRlZmluZWQgYXMgIiI7IGNvbnZlcnQgbnVtYmVycyB0byBzdHJpbmcKCQkJaWYgKCB2YWwgPT0gbnVsbCApIHsKCQkJCXZhbCA9ICIiOwoJCQl9IGVsc2UgaWYgKCB0eXBlb2YgdmFsID09PSAibnVtYmVyIiApIHsKCQkJCXZhbCArPSAiIjsKCQkJfSBlbHNlIGlmICggalF1ZXJ5LmlzQXJyYXkoIHZhbCApICkgewoJCQkJdmFsID0galF1ZXJ5Lm1hcCggdmFsLCBmdW5jdGlvbiggdmFsdWUgKSB7CgkJCQkJcmV0dXJuIHZhbHVlID09IG51bGwgPyAiIiA6IHZhbHVlICsgIiI7CgkJCQl9ICk7CgkJCX0KCgkJCWhvb2tzID0galF1ZXJ5LnZhbEhvb2tzWyB0aGlzLnR5cGUgXSB8fCBqUXVlcnkudmFsSG9va3NbIHRoaXMubm9kZU5hbWUudG9Mb3dlckNhc2UoKSBdOwoKCQkJLy8gSWYgc2V0IHJldHVybnMgdW5kZWZpbmVkLCBmYWxsIGJhY2sgdG8gbm9ybWFsIHNldHRpbmcKCQkJaWYgKCAhaG9va3MgfHwgISggInNldCIgaW4gaG9va3MgKSB8fCBob29rcy5zZXQoIHRoaXMsIHZhbCwgInZhbHVlIiApID09PSB1bmRlZmluZWQgKSB7CgkJCQl0aGlzLnZhbHVlID0gdmFsOwoJCQl9CgkJfSApOwoJfQp9ICk7CgpqUXVlcnkuZXh0ZW5kKCB7Cgl2YWxIb29rczogewoJCW9wdGlvbjogewoJCQlnZXQ6IGZ1bmN0aW9uKCBlbGVtICkgewoJCQkJdmFyIHZhbCA9IGpRdWVyeS5maW5kLmF0dHIoIGVsZW0sICJ2YWx1ZSIgKTsKCQkJCXJldHVybiB2YWwgIT0gbnVsbCA/CgkJCQkJdmFsIDoKCgkJCQkJLy8gU3VwcG9ydDogSUUxMC0xMSsKCQkJCQkvLyBvcHRpb24udGV4dCB0aHJvd3MgZXhjZXB0aW9ucyAoIzE0Njg2LCAjMTQ4NTgpCgkJCQkJLy8gU3RyaXAgYW5kIGNvbGxhcHNlIHdoaXRlc3BhY2UKCQkJCQkvLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnLyNzdHJpcC1hbmQtY29sbGFwc2Utd2hpdGVzcGFjZQoJCQkJCWpRdWVyeS50cmltKCBqUXVlcnkudGV4dCggZWxlbSApICkucmVwbGFjZSggcnNwYWNlcywgIiAiICk7CgkJCX0KCQl9LAoJCXNlbGVjdDogewoJCQlnZXQ6IGZ1bmN0aW9uKCBlbGVtICkgewoJCQkJdmFyIHZhbHVlLCBvcHRpb24sCgkJCQkJb3B0aW9ucyA9IGVsZW0ub3B0aW9ucywKCQkJCQlpbmRleCA9IGVsZW0uc2VsZWN0ZWRJbmRleCwKCQkJCQlvbmUgPSBlbGVtLnR5cGUgPT09ICJzZWxlY3Qtb25lIiB8fCBpbmRleCA8IDAsCgkJCQkJdmFsdWVzID0gb25lID8gbnVsbCA6IFtdLAoJCQkJCW1heCA9IG9uZSA/IGluZGV4ICsgMSA6IG9wdGlvbnMubGVuZ3RoLAoJCQkJCWkgPSBpbmRleCA8IDAgPwoJCQkJCQltYXggOgoJCQkJCQlvbmUgPyBpbmRleCA6IDA7CgoJCQkJLy8gTG9vcCB0aHJvdWdoIGFsbCB0aGUgc2VsZWN0ZWQgb3B0aW9ucwoJCQkJZm9yICggOyBpIDwgbWF4OyBpKysgKSB7CgkJCQkJb3B0aW9uID0gb3B0aW9uc1sgaSBdOwoKCQkJCQkvLyBvbGRJRSBkb2Vzbid0IHVwZGF0ZSBzZWxlY3RlZCBhZnRlciBmb3JtIHJlc2V0ICgjMjU1MSkKCQkJCQlpZiAoICggb3B0aW9uLnNlbGVjdGVkIHx8IGkgPT09IGluZGV4ICkgJiYKCgkJCQkJCQkvLyBEb24ndCByZXR1cm4gb3B0aW9ucyB0aGF0IGFyZSBkaXNhYmxlZCBvciBpbiBhIGRpc2FibGVkIG9wdGdyb3VwCgkJCQkJCQkoIHN1cHBvcnQub3B0RGlzYWJsZWQgPwoJCQkJCQkJCSFvcHRpb24uZGlzYWJsZWQgOgoJCQkJCQkJCW9wdGlvbi5nZXRBdHRyaWJ1dGUoICJkaXNhYmxlZCIgKSA9PT0gbnVsbCApICYmCgkJCQkJCQkoICFvcHRpb24ucGFyZW50Tm9kZS5kaXNhYmxlZCB8fAoJCQkJCQkJCSFqUXVlcnkubm9kZU5hbWUoIG9wdGlvbi5wYXJlbnROb2RlLCAib3B0Z3JvdXAiICkgKSApIHsKCgkJCQkJCS8vIEdldCB0aGUgc3BlY2lmaWMgdmFsdWUgZm9yIHRoZSBvcHRpb24KCQkJCQkJdmFsdWUgPSBqUXVlcnkoIG9wdGlvbiApLnZhbCgpOwoKCQkJCQkJLy8gV2UgZG9uJ3QgbmVlZCBhbiBhcnJheSBmb3Igb25lIHNlbGVjdHMKCQkJCQkJaWYgKCBvbmUgKSB7CgkJCQkJCQlyZXR1cm4gdmFsdWU7CgkJCQkJCX0KCgkJCQkJCS8vIE11bHRpLVNlbGVjdHMgcmV0dXJuIGFuIGFycmF5CgkJCQkJCXZhbHVlcy5wdXNoKCB2YWx1ZSApOwoJCQkJCX0KCQkJCX0KCgkJCQlyZXR1cm4gdmFsdWVzOwoJCQl9LAoKCQkJc2V0OiBmdW5jdGlvbiggZWxlbSwgdmFsdWUgKSB7CgkJCQl2YXIgb3B0aW9uU2V0LCBvcHRpb24sCgkJCQkJb3B0aW9ucyA9IGVsZW0ub3B0aW9ucywKCQkJCQl2YWx1ZXMgPSBqUXVlcnkubWFrZUFycmF5KCB2YWx1ZSApLAoJCQkJCWkgPSBvcHRpb25zLmxlbmd0aDsKCgkJCQl3aGlsZSAoIGktLSApIHsKCQkJCQlvcHRpb24gPSBvcHRpb25zWyBpIF07CgoJCQkJCWlmICggalF1ZXJ5LmluQXJyYXkoIGpRdWVyeS52YWxIb29rcy5vcHRpb24uZ2V0KCBvcHRpb24gKSwgdmFsdWVzICkgPiAtMSApIHsKCgkJCQkJCS8vIFN1cHBvcnQ6IElFNgoJCQkJCQkvLyBXaGVuIG5ldyBvcHRpb24gZWxlbWVudCBpcyBhZGRlZCB0byBzZWxlY3QgYm94IHdlIG5lZWQgdG8KCQkJCQkJLy8gZm9yY2UgcmVmbG93IG9mIG5ld2x5IGFkZGVkIG5vZGUgaW4gb3JkZXIgdG8gd29ya2Fyb3VuZCBkZWxheQoJCQkJCQkvLyBvZiBpbml0aWFsaXphdGlvbiBwcm9wZXJ0aWVzCgkJCQkJCXRyeSB7CgkJCQkJCQlvcHRpb24uc2VsZWN0ZWQgPSBvcHRpb25TZXQgPSB0cnVlOwoKCQkJCQkJfSBjYXRjaCAoIF8gKSB7CgoJCQkJCQkJLy8gV2lsbCBiZSBleGVjdXRlZCBvbmx5IGluIElFNgoJCQkJCQkJb3B0aW9uLnNjcm9sbEhlaWdodDsKCQkJCQkJfQoKCQkJCQl9IGVsc2UgewoJCQkJCQlvcHRpb24uc2VsZWN0ZWQgPSBmYWxzZTsKCQkJCQl9CgkJCQl9CgoJCQkJLy8gRm9yY2UgYnJvd3NlcnMgdG8gYmVoYXZlIGNvbnNpc3RlbnRseSB3aGVuIG5vbi1tYXRjaGluZyB2YWx1ZSBpcyBzZXQKCQkJCWlmICggIW9wdGlvblNldCApIHsKCQkJCQllbGVtLnNlbGVjdGVkSW5kZXggPSAtMTsKCQkJCX0KCgkJCQlyZXR1cm4gb3B0aW9uczsKCQkJfQoJCX0KCX0KfSApOwoKLy8gUmFkaW9zIGFuZCBjaGVja2JveGVzIGdldHRlci9zZXR0ZXIKalF1ZXJ5LmVhY2goIFsgInJhZGlvIiwgImNoZWNrYm94IiBdLCBmdW5jdGlvbigpIHsKCWpRdWVyeS52YWxIb29rc1sgdGhpcyBdID0gewoJCXNldDogZnVuY3Rpb24oIGVsZW0sIHZhbHVlICkgewoJCQlpZiAoIGpRdWVyeS5pc0FycmF5KCB2YWx1ZSApICkgewoJCQkJcmV0dXJuICggZWxlbS5jaGVja2VkID0galF1ZXJ5LmluQXJyYXkoIGpRdWVyeSggZWxlbSApLnZhbCgpLCB2YWx1ZSApID4gLTEgKTsKCQkJfQoJCX0KCX07CglpZiAoICFzdXBwb3J0LmNoZWNrT24gKSB7CgkJalF1ZXJ5LnZhbEhvb2tzWyB0aGlzIF0uZ2V0ID0gZnVuY3Rpb24oIGVsZW0gKSB7CgkJCXJldHVybiBlbGVtLmdldEF0dHJpYnV0ZSggInZhbHVlIiApID09PSBudWxsID8gIm9uIiA6IGVsZW0udmFsdWU7CgkJfTsKCX0KfSApOwoKCgoKdmFyIG5vZGVIb29rLCBib29sSG9vaywKCWF0dHJIYW5kbGUgPSBqUXVlcnkuZXhwci5hdHRySGFuZGxlLAoJcnVzZURlZmF1bHQgPSAvXig/OmNoZWNrZWR8c2VsZWN0ZWQpJC9pLAoJZ2V0U2V0QXR0cmlidXRlID0gc3VwcG9ydC5nZXRTZXRBdHRyaWJ1dGUsCglnZXRTZXRJbnB1dCA9IHN1cHBvcnQuaW5wdXQ7CgpqUXVlcnkuZm4uZXh0ZW5kKCB7CglhdHRyOiBmdW5jdGlvbiggbmFtZSwgdmFsdWUgKSB7CgkJcmV0dXJuIGFjY2VzcyggdGhpcywgalF1ZXJ5LmF0dHIsIG5hbWUsIHZhbHVlLCBhcmd1bWVudHMubGVuZ3RoID4gMSApOwoJfSwKCglyZW1vdmVBdHRyOiBmdW5jdGlvbiggbmFtZSApIHsKCQlyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHsKCQkJalF1ZXJ5LnJlbW92ZUF0dHIoIHRoaXMsIG5hbWUgKTsKCQl9ICk7Cgl9Cn0gKTsKCmpRdWVyeS5leHRlbmQoIHsKCWF0dHI6IGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCB2YWx1ZSApIHsKCQl2YXIgcmV0LCBob29rcywKCQkJblR5cGUgPSBlbGVtLm5vZGVUeXBlOwoKCQkvLyBEb24ndCBnZXQvc2V0IGF0dHJpYnV0ZXMgb24gdGV4dCwgY29tbWVudCBhbmQgYXR0cmlidXRlIG5vZGVzCgkJaWYgKCBuVHlwZSA9PT0gMyB8fCBuVHlwZSA9PT0gOCB8fCBuVHlwZSA9PT0gMiApIHsKCQkJcmV0dXJuOwoJCX0KCgkJLy8gRmFsbGJhY2sgdG8gcHJvcCB3aGVuIGF0dHJpYnV0ZXMgYXJlIG5vdCBzdXBwb3J0ZWQKCQlpZiAoIHR5cGVvZiBlbGVtLmdldEF0dHJpYnV0ZSA9PT0gInVuZGVmaW5lZCIgKSB7CgkJCXJldHVybiBqUXVlcnkucHJvcCggZWxlbSwgbmFtZSwgdmFsdWUgKTsKCQl9CgoJCS8vIEFsbCBhdHRyaWJ1dGVzIGFyZSBsb3dlcmNhc2UKCQkvLyBHcmFiIG5lY2Vzc2FyeSBob29rIGlmIG9uZSBpcyBkZWZpbmVkCgkJaWYgKCBuVHlwZSAhPT0gMSB8fCAhalF1ZXJ5LmlzWE1MRG9jKCBlbGVtICkgKSB7CgkJCW5hbWUgPSBuYW1lLnRvTG93ZXJDYXNlKCk7CgkJCWhvb2tzID0galF1ZXJ5LmF0dHJIb29rc1sgbmFtZSBdIHx8CgkJCQkoIGpRdWVyeS5leHByLm1hdGNoLmJvb2wudGVzdCggbmFtZSApID8gYm9vbEhvb2sgOiBub2RlSG9vayApOwoJCX0KCgkJaWYgKCB2YWx1ZSAhPT0gdW5kZWZpbmVkICkgewoJCQlpZiAoIHZhbHVlID09PSBudWxsICkgewoJCQkJalF1ZXJ5LnJlbW92ZUF0dHIoIGVsZW0sIG5hbWUgKTsKCQkJCXJldHVybjsKCQkJfQoKCQkJaWYgKCBob29rcyAmJiAic2V0IiBpbiBob29rcyAmJgoJCQkJKCByZXQgPSBob29rcy5zZXQoIGVsZW0sIHZhbHVlLCBuYW1lICkgKSAhPT0gdW5kZWZpbmVkICkgewoJCQkJcmV0dXJuIHJldDsKCQkJfQoKCQkJZWxlbS5zZXRBdHRyaWJ1dGUoIG5hbWUsIHZhbHVlICsgIiIgKTsKCQkJcmV0dXJuIHZhbHVlOwoJCX0KCgkJaWYgKCBob29rcyAmJiAiZ2V0IiBpbiBob29rcyAmJiAoIHJldCA9IGhvb2tzLmdldCggZWxlbSwgbmFtZSApICkgIT09IG51bGwgKSB7CgkJCXJldHVybiByZXQ7CgkJfQoKCQlyZXQgPSBqUXVlcnkuZmluZC5hdHRyKCBlbGVtLCBuYW1lICk7CgoJCS8vIE5vbi1leGlzdGVudCBhdHRyaWJ1dGVzIHJldHVybiBudWxsLCB3ZSBub3JtYWxpemUgdG8gdW5kZWZpbmVkCgkJcmV0dXJuIHJldCA9PSBudWxsID8gdW5kZWZpbmVkIDogcmV0OwoJfSwKCglhdHRySG9va3M6IHsKCQl0eXBlOiB7CgkJCXNldDogZnVuY3Rpb24oIGVsZW0sIHZhbHVlICkgewoJCQkJaWYgKCAhc3VwcG9ydC5yYWRpb1ZhbHVlICYmIHZhbHVlID09PSAicmFkaW8iICYmCgkJCQkJalF1ZXJ5Lm5vZGVOYW1lKCBlbGVtLCAiaW5wdXQiICkgKSB7CgoJCQkJCS8vIFNldHRpbmcgdGhlIHR5cGUgb24gYSByYWRpbyBidXR0b24gYWZ0ZXIgdGhlIHZhbHVlIHJlc2V0cyB0aGUgdmFsdWUgaW4gSUU4LTkKCQkJCQkvLyBSZXNldCB2YWx1ZSB0byBkZWZhdWx0IGluIGNhc2UgdHlwZSBpcyBzZXQgYWZ0ZXIgdmFsdWUgZHVyaW5nIGNyZWF0aW9uCgkJCQkJdmFyIHZhbCA9IGVsZW0udmFsdWU7CgkJCQkJZWxlbS5zZXRBdHRyaWJ1dGUoICJ0eXBlIiwgdmFsdWUgKTsKCQkJCQlpZiAoIHZhbCApIHsKCQkJCQkJZWxlbS52YWx1ZSA9IHZhbDsKCQkJCQl9CgkJCQkJcmV0dXJuIHZhbHVlOwoJCQkJfQoJCQl9CgkJfQoJfSwKCglyZW1vdmVBdHRyOiBmdW5jdGlvbiggZWxlbSwgdmFsdWUgKSB7CgkJdmFyIG5hbWUsIHByb3BOYW1lLAoJCQlpID0gMCwKCQkJYXR0ck5hbWVzID0gdmFsdWUgJiYgdmFsdWUubWF0Y2goIHJub3R3aGl0ZSApOwoKCQlpZiAoIGF0dHJOYW1lcyAmJiBlbGVtLm5vZGVUeXBlID09PSAxICkgewoJCQl3aGlsZSAoICggbmFtZSA9IGF0dHJOYW1lc1sgaSsrIF0gKSApIHsKCQkJCXByb3BOYW1lID0galF1ZXJ5LnByb3BGaXhbIG5hbWUgXSB8fCBuYW1lOwoKCQkJCS8vIEJvb2xlYW4gYXR0cmlidXRlcyBnZXQgc3BlY2lhbCB0cmVhdG1lbnQgKCMxMDg3MCkKCQkJCWlmICggalF1ZXJ5LmV4cHIubWF0Y2guYm9vbC50ZXN0KCBuYW1lICkgKSB7CgoJCQkJCS8vIFNldCBjb3JyZXNwb25kaW5nIHByb3BlcnR5IHRvIGZhbHNlCgkJCQkJaWYgKCBnZXRTZXRJbnB1dCAmJiBnZXRTZXRBdHRyaWJ1dGUgfHwgIXJ1c2VEZWZhdWx0LnRlc3QoIG5hbWUgKSApIHsKCQkJCQkJZWxlbVsgcHJvcE5hbWUgXSA9IGZhbHNlOwoKCQkJCQkvLyBTdXBwb3J0OiBJRTw5CgkJCQkJLy8gQWxzbyBjbGVhciBkZWZhdWx0Q2hlY2tlZC9kZWZhdWx0U2VsZWN0ZWQgKGlmIGFwcHJvcHJpYXRlKQoJCQkJCX0gZWxzZSB7CgkJCQkJCWVsZW1bIGpRdWVyeS5jYW1lbENhc2UoICJkZWZhdWx0LSIgKyBuYW1lICkgXSA9CgkJCQkJCQllbGVtWyBwcm9wTmFtZSBdID0gZmFsc2U7CgkJCQkJfQoKCQkJCS8vIFNlZSAjOTY5OSBmb3IgZXhwbGFuYXRpb24gb2YgdGhpcyBhcHByb2FjaCAoc2V0dGluZyBmaXJzdCwgdGhlbiByZW1vdmFsKQoJCQkJfSBlbHNlIHsKCQkJCQlqUXVlcnkuYXR0ciggZWxlbSwgbmFtZSwgIiIgKTsKCQkJCX0KCgkJCQllbGVtLnJlbW92ZUF0dHJpYnV0ZSggZ2V0U2V0QXR0cmlidXRlID8gbmFtZSA6IHByb3BOYW1lICk7CgkJCX0KCQl9Cgl9Cn0gKTsKCi8vIEhvb2tzIGZvciBib29sZWFuIGF0dHJpYnV0ZXMKYm9vbEhvb2sgPSB7CglzZXQ6IGZ1bmN0aW9uKCBlbGVtLCB2YWx1ZSwgbmFtZSApIHsKCQlpZiAoIHZhbHVlID09PSBmYWxzZSApIHsKCgkJCS8vIFJlbW92ZSBib29sZWFuIGF0dHJpYnV0ZXMgd2hlbiBzZXQgdG8gZmFsc2UKCQkJalF1ZXJ5LnJlbW92ZUF0dHIoIGVsZW0sIG5hbWUgKTsKCQl9IGVsc2UgaWYgKCBnZXRTZXRJbnB1dCAmJiBnZXRTZXRBdHRyaWJ1dGUgfHwgIXJ1c2VEZWZhdWx0LnRlc3QoIG5hbWUgKSApIHsKCgkJCS8vIElFPDggbmVlZHMgdGhlICpwcm9wZXJ0eSogbmFtZQoJCQllbGVtLnNldEF0dHJpYnV0ZSggIWdldFNldEF0dHJpYnV0ZSAmJiBqUXVlcnkucHJvcEZpeFsgbmFtZSBdIHx8IG5hbWUsIG5hbWUgKTsKCgkJfSBlbHNlIHsKCgkJCS8vIFN1cHBvcnQ6IElFPDkKCQkJLy8gVXNlIGRlZmF1bHRDaGVja2VkIGFuZCBkZWZhdWx0U2VsZWN0ZWQgZm9yIG9sZElFCgkJCWVsZW1bIGpRdWVyeS5jYW1lbENhc2UoICJkZWZhdWx0LSIgKyBuYW1lICkgXSA9IGVsZW1bIG5hbWUgXSA9IHRydWU7CgkJfQoJCXJldHVybiBuYW1lOwoJfQp9OwoKalF1ZXJ5LmVhY2goIGpRdWVyeS5leHByLm1hdGNoLmJvb2wuc291cmNlLm1hdGNoKCAvXHcrL2cgKSwgZnVuY3Rpb24oIGksIG5hbWUgKSB7Cgl2YXIgZ2V0dGVyID0gYXR0ckhhbmRsZVsgbmFtZSBdIHx8IGpRdWVyeS5maW5kLmF0dHI7CgoJaWYgKCBnZXRTZXRJbnB1dCAmJiBnZXRTZXRBdHRyaWJ1dGUgfHwgIXJ1c2VEZWZhdWx0LnRlc3QoIG5hbWUgKSApIHsKCQlhdHRySGFuZGxlWyBuYW1lIF0gPSBmdW5jdGlvbiggZWxlbSwgbmFtZSwgaXNYTUwgKSB7CgkJCXZhciByZXQsIGhhbmRsZTsKCQkJaWYgKCAhaXNYTUwgKSB7CgoJCQkJLy8gQXZvaWQgYW4gaW5maW5pdGUgbG9vcCBieSB0ZW1wb3JhcmlseSByZW1vdmluZyB0aGlzIGZ1bmN0aW9uIGZyb20gdGhlIGdldHRlcgoJCQkJaGFuZGxlID0gYXR0ckhhbmRsZVsgbmFtZSBdOwoJCQkJYXR0ckhhbmRsZVsgbmFtZSBdID0gcmV0OwoJCQkJcmV0ID0gZ2V0dGVyKCBlbGVtLCBuYW1lLCBpc1hNTCApICE9IG51bGwgPwoJCQkJCW5hbWUudG9Mb3dlckNhc2UoKSA6CgkJCQkJbnVsbDsKCQkJCWF0dHJIYW5kbGVbIG5hbWUgXSA9IGhhbmRsZTsKCQkJfQoJCQlyZXR1cm4gcmV0OwoJCX07Cgl9IGVsc2UgewoJCWF0dHJIYW5kbGVbIG5hbWUgXSA9IGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCBpc1hNTCApIHsKCQkJaWYgKCAhaXNYTUwgKSB7CgkJCQlyZXR1cm4gZWxlbVsgalF1ZXJ5LmNhbWVsQ2FzZSggImRlZmF1bHQtIiArIG5hbWUgKSBdID8KCQkJCQluYW1lLnRvTG93ZXJDYXNlKCkgOgoJCQkJCW51bGw7CgkJCX0KCQl9OwoJfQp9ICk7CgovLyBmaXggb2xkSUUgYXR0cm9wZXJ0aWVzCmlmICggIWdldFNldElucHV0IHx8ICFnZXRTZXRBdHRyaWJ1dGUgKSB7CglqUXVlcnkuYXR0ckhvb2tzLnZhbHVlID0gewoJCXNldDogZnVuY3Rpb24oIGVsZW0sIHZhbHVlLCBuYW1lICkgewoJCQlpZiAoIGpRdWVyeS5ub2RlTmFtZSggZWxlbSwgImlucHV0IiApICkgewoKCQkJCS8vIERvZXMgbm90IHJldHVybiBzbyB0aGF0IHNldEF0dHJpYnV0ZSBpcyBhbHNvIHVzZWQKCQkJCWVsZW0uZGVmYXVsdFZhbHVlID0gdmFsdWU7CgkJCX0gZWxzZSB7CgoJCQkJLy8gVXNlIG5vZGVIb29rIGlmIGRlZmluZWQgKCMxOTU0KTsgb3RoZXJ3aXNlIHNldEF0dHJpYnV0ZSBpcyBmaW5lCgkJCQlyZXR1cm4gbm9kZUhvb2sgJiYgbm9kZUhvb2suc2V0KCBlbGVtLCB2YWx1ZSwgbmFtZSApOwoJCQl9CgkJfQoJfTsKfQoKLy8gSUU2LzcgZG8gbm90IHN1cHBvcnQgZ2V0dGluZy9zZXR0aW5nIHNvbWUgYXR0cmlidXRlcyB3aXRoIGdldC9zZXRBdHRyaWJ1dGUKaWYgKCAhZ2V0U2V0QXR0cmlidXRlICkgewoKCS8vIFVzZSB0aGlzIGZvciBhbnkgYXR0cmlidXRlIGluIElFNi83CgkvLyBUaGlzIGZpeGVzIGFsbW9zdCBldmVyeSBJRTYvNyBpc3N1ZQoJbm9kZUhvb2sgPSB7CgkJc2V0OiBmdW5jdGlvbiggZWxlbSwgdmFsdWUsIG5hbWUgKSB7CgoJCQkvLyBTZXQgdGhlIGV4aXN0aW5nIG9yIGNyZWF0ZSBhIG5ldyBhdHRyaWJ1dGUgbm9kZQoJCQl2YXIgcmV0ID0gZWxlbS5nZXRBdHRyaWJ1dGVOb2RlKCBuYW1lICk7CgkJCWlmICggIXJldCApIHsKCQkJCWVsZW0uc2V0QXR0cmlidXRlTm9kZSgKCQkJCQkoIHJldCA9IGVsZW0ub3duZXJEb2N1bWVudC5jcmVhdGVBdHRyaWJ1dGUoIG5hbWUgKSApCgkJCQkpOwoJCQl9CgoJCQlyZXQudmFsdWUgPSB2YWx1ZSArPSAiIjsKCgkJCS8vIEJyZWFrIGFzc29jaWF0aW9uIHdpdGggY2xvbmVkIGVsZW1lbnRzIGJ5IGFsc28gdXNpbmcgc2V0QXR0cmlidXRlICgjOTY0NikKCQkJaWYgKCBuYW1lID09PSAidmFsdWUiIHx8IHZhbHVlID09PSBlbGVtLmdldEF0dHJpYnV0ZSggbmFtZSApICkgewoJCQkJcmV0dXJuIHZhbHVlOwoJCQl9CgkJfQoJfTsKCgkvLyBTb21lIGF0dHJpYnV0ZXMgYXJlIGNvbnN0cnVjdGVkIHdpdGggZW1wdHktc3RyaW5nIHZhbHVlcyB3aGVuIG5vdCBkZWZpbmVkCglhdHRySGFuZGxlLmlkID0gYXR0ckhhbmRsZS5uYW1lID0gYXR0ckhhbmRsZS5jb29yZHMgPQoJCWZ1bmN0aW9uKCBlbGVtLCBuYW1lLCBpc1hNTCApIHsKCQkJdmFyIHJldDsKCQkJaWYgKCAhaXNYTUwgKSB7CgkJCQlyZXR1cm4gKCByZXQgPSBlbGVtLmdldEF0dHJpYnV0ZU5vZGUoIG5hbWUgKSApICYmIHJldC52YWx1ZSAhPT0gIiIgPwoJCQkJCXJldC52YWx1ZSA6CgkJCQkJbnVsbDsKCQkJfQoJCX07CgoJLy8gRml4aW5nIHZhbHVlIHJldHJpZXZhbCBvbiBhIGJ1dHRvbiByZXF1aXJlcyB0aGlzIG1vZHVsZQoJalF1ZXJ5LnZhbEhvb2tzLmJ1dHRvbiA9IHsKCQlnZXQ6IGZ1bmN0aW9uKCBlbGVtLCBuYW1lICkgewoJCQl2YXIgcmV0ID0gZWxlbS5nZXRBdHRyaWJ1dGVOb2RlKCBuYW1lICk7CgkJCWlmICggcmV0ICYmIHJldC5zcGVjaWZpZWQgKSB7CgkJCQlyZXR1cm4gcmV0LnZhbHVlOwoJCQl9CgkJfSwKCQlzZXQ6IG5vZGVIb29rLnNldAoJfTsKCgkvLyBTZXQgY29udGVudGVkaXRhYmxlIHRvIGZhbHNlIG9uIHJlbW92YWxzKCMxMDQyOSkKCS8vIFNldHRpbmcgdG8gZW1wdHkgc3RyaW5nIHRocm93cyBhbiBlcnJvciBhcyBhbiBpbnZhbGlkIHZhbHVlCglqUXVlcnkuYXR0ckhvb2tzLmNvbnRlbnRlZGl0YWJsZSA9IHsKCQlzZXQ6IGZ1bmN0aW9uKCBlbGVtLCB2YWx1ZSwgbmFtZSApIHsKCQkJbm9kZUhvb2suc2V0KCBlbGVtLCB2YWx1ZSA9PT0gIiIgPyBmYWxzZSA6IHZhbHVlLCBuYW1lICk7CgkJfQoJfTsKCgkvLyBTZXQgd2lkdGggYW5kIGhlaWdodCB0byBhdXRvIGluc3RlYWQgb2YgMCBvbiBlbXB0eSBzdHJpbmcoIEJ1ZyAjODE1MCApCgkvLyBUaGlzIGlzIGZvciByZW1vdmFscwoJalF1ZXJ5LmVhY2goIFsgIndpZHRoIiwgImhlaWdodCIgXSwgZnVuY3Rpb24oIGksIG5hbWUgKSB7CgkJalF1ZXJ5LmF0dHJIb29rc1sgbmFtZSBdID0gewoJCQlzZXQ6IGZ1bmN0aW9uKCBlbGVtLCB2YWx1ZSApIHsKCQkJCWlmICggdmFsdWUgPT09ICIiICkgewoJCQkJCWVsZW0uc2V0QXR0cmlidXRlKCBuYW1lLCAiYXV0byIgKTsKCQkJCQlyZXR1cm4gdmFsdWU7CgkJCQl9CgkJCX0KCQl9OwoJfSApOwp9CgppZiAoICFzdXBwb3J0LnN0eWxlICkgewoJalF1ZXJ5LmF0dHJIb29rcy5zdHlsZSA9IHsKCQlnZXQ6IGZ1bmN0aW9uKCBlbGVtICkgewoKCQkJLy8gUmV0dXJuIHVuZGVmaW5lZCBpbiB0aGUgY2FzZSBvZiBlbXB0eSBzdHJpbmcKCQkJLy8gTm90ZTogSUUgdXBwZXJjYXNlcyBjc3MgcHJvcGVydHkgbmFtZXMsIGJ1dCBpZiB3ZSB3ZXJlIHRvIC50b0xvd2VyQ2FzZSgpCgkJCS8vIC5jc3NUZXh0LCB0aGF0IHdvdWxkIGRlc3Ryb3kgY2FzZSBzZW5zaXRpdml0eSBpbiBVUkwncywgbGlrZSBpbiAiYmFja2dyb3VuZCIKCQkJcmV0dXJuIGVsZW0uc3R5bGUuY3NzVGV4dCB8fCB1bmRlZmluZWQ7CgkJfSwKCQlzZXQ6IGZ1bmN0aW9uKCBlbGVtLCB2YWx1ZSApIHsKCQkJcmV0dXJuICggZWxlbS5zdHlsZS5jc3NUZXh0ID0gdmFsdWUgKyAiIiApOwoJCX0KCX07Cn0KCgoKCnZhciByZm9jdXNhYmxlID0gL14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9ufG9iamVjdCkkL2ksCglyY2xpY2thYmxlID0gL14oPzphfGFyZWEpJC9pOwoKalF1ZXJ5LmZuLmV4dGVuZCggewoJcHJvcDogZnVuY3Rpb24oIG5hbWUsIHZhbHVlICkgewoJCXJldHVybiBhY2Nlc3MoIHRoaXMsIGpRdWVyeS5wcm9wLCBuYW1lLCB2YWx1ZSwgYXJndW1lbnRzLmxlbmd0aCA+IDEgKTsKCX0sCgoJcmVtb3ZlUHJvcDogZnVuY3Rpb24oIG5hbWUgKSB7CgkJbmFtZSA9IGpRdWVyeS5wcm9wRml4WyBuYW1lIF0gfHwgbmFtZTsKCQlyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHsKCgkJCS8vIHRyeS9jYXRjaCBoYW5kbGVzIGNhc2VzIHdoZXJlIElFIGJhbGtzIChzdWNoIGFzIHJlbW92aW5nIGEgcHJvcGVydHkgb24gd2luZG93KQoJCQl0cnkgewoJCQkJdGhpc1sgbmFtZSBdID0gdW5kZWZpbmVkOwoJCQkJZGVsZXRlIHRoaXNbIG5hbWUgXTsKCQkJfSBjYXRjaCAoIGUgKSB7fQoJCX0gKTsKCX0KfSApOwoKalF1ZXJ5LmV4dGVuZCggewoJcHJvcDogZnVuY3Rpb24oIGVsZW0sIG5hbWUsIHZhbHVlICkgewoJCXZhciByZXQsIGhvb2tzLAoJCQluVHlwZSA9IGVsZW0ubm9kZVR5cGU7CgoJCS8vIERvbid0IGdldC9zZXQgcHJvcGVydGllcyBvbiB0ZXh0LCBjb21tZW50IGFuZCBhdHRyaWJ1dGUgbm9kZXMKCQlpZiAoIG5UeXBlID09PSAzIHx8IG5UeXBlID09PSA4IHx8IG5UeXBlID09PSAyICkgewoJCQlyZXR1cm47CgkJfQoKCQlpZiAoIG5UeXBlICE9PSAxIHx8ICFqUXVlcnkuaXNYTUxEb2MoIGVsZW0gKSApIHsKCgkJCS8vIEZpeCBuYW1lIGFuZCBhdHRhY2ggaG9va3MKCQkJbmFtZSA9IGpRdWVyeS5wcm9wRml4WyBuYW1lIF0gfHwgbmFtZTsKCQkJaG9va3MgPSBqUXVlcnkucHJvcEhvb2tzWyBuYW1lIF07CgkJfQoKCQlpZiAoIHZhbHVlICE9PSB1bmRlZmluZWQgKSB7CgkJCWlmICggaG9va3MgJiYgInNldCIgaW4gaG9va3MgJiYKCQkJCSggcmV0ID0gaG9va3Muc2V0KCBlbGVtLCB2YWx1ZSwgbmFtZSApICkgIT09IHVuZGVmaW5lZCApIHsKCQkJCXJldHVybiByZXQ7CgkJCX0KCgkJCXJldHVybiAoIGVsZW1bIG5hbWUgXSA9IHZhbHVlICk7CgkJfQoKCQlpZiAoIGhvb2tzICYmICJnZXQiIGluIGhvb2tzICYmICggcmV0ID0gaG9va3MuZ2V0KCBlbGVtLCBuYW1lICkgKSAhPT0gbnVsbCApIHsKCQkJcmV0dXJuIHJldDsKCQl9CgoJCXJldHVybiBlbGVtWyBuYW1lIF07Cgl9LAoKCXByb3BIb29rczogewoJCXRhYkluZGV4OiB7CgkJCWdldDogZnVuY3Rpb24oIGVsZW0gKSB7CgoJCQkJLy8gZWxlbS50YWJJbmRleCBkb2Vzbid0IGFsd2F5cyByZXR1cm4gdGhlCgkJCQkvLyBjb3JyZWN0IHZhbHVlIHdoZW4gaXQgaGFzbid0IGJlZW4gZXhwbGljaXRseSBzZXQKCQkJCS8vIGh0dHA6Ly9mbHVpZHByb2plY3Qub3JnL2Jsb2cvMjAwOC8wMS8wOS9nZXR0aW5nLXNldHRpbmctYW5kLXJlbW92aW5nLXRhYmluZGV4LXZhbHVlcy13aXRoLWphdmFzY3JpcHQvCgkJCQkvLyBVc2UgcHJvcGVyIGF0dHJpYnV0ZSByZXRyaWV2YWwoIzEyMDcyKQoJCQkJdmFyIHRhYmluZGV4ID0galF1ZXJ5LmZpbmQuYXR0ciggZWxlbSwgInRhYmluZGV4IiApOwoKCQkJCXJldHVybiB0YWJpbmRleCA/CgkJCQkJcGFyc2VJbnQoIHRhYmluZGV4LCAxMCApIDoKCQkJCQlyZm9jdXNhYmxlLnRlc3QoIGVsZW0ubm9kZU5hbWUgKSB8fAoJCQkJCQlyY2xpY2thYmxlLnRlc3QoIGVsZW0ubm9kZU5hbWUgKSAmJiBlbGVtLmhyZWYgPwoJCQkJCQkJMCA6CgkJCQkJCQktMTsKCQkJfQoJCX0KCX0sCgoJcHJvcEZpeDogewoJCSJmb3IiOiAiaHRtbEZvciIsCgkJImNsYXNzIjogImNsYXNzTmFtZSIKCX0KfSApOwoKLy8gU29tZSBhdHRyaWJ1dGVzIHJlcXVpcmUgYSBzcGVjaWFsIGNhbGwgb24gSUUKLy8gaHR0cDovL21zZG4ubWljcm9zb2Z0LmNvbS9lbi11cy9saWJyYXJ5L21zNTM2NDI5JTI4VlMuODUlMjkuYXNweAppZiAoICFzdXBwb3J0LmhyZWZOb3JtYWxpemVkICkgewoKCS8vIGhyZWYvc3JjIHByb3BlcnR5IHNob3VsZCBnZXQgdGhlIGZ1bGwgbm9ybWFsaXplZCBVUkwgKCMxMDI5OS8jMTI5MTUpCglqUXVlcnkuZWFjaCggWyAiaHJlZiIsICJzcmMiIF0sIGZ1bmN0aW9uKCBpLCBuYW1lICkgewoJCWpRdWVyeS5wcm9wSG9va3NbIG5hbWUgXSA9IHsKCQkJZ2V0OiBmdW5jdGlvbiggZWxlbSApIHsKCQkJCXJldHVybiBlbGVtLmdldEF0dHJpYnV0ZSggbmFtZSwgNCApOwoJCQl9CgkJfTsKCX0gKTsKfQoKLy8gU3VwcG9ydDogU2FmYXJpLCBJRTkrCi8vIEFjY2Vzc2luZyB0aGUgc2VsZWN0ZWRJbmRleCBwcm9wZXJ0eQovLyBmb3JjZXMgdGhlIGJyb3dzZXIgdG8gcmVzcGVjdCBzZXR0aW5nIHNlbGVjdGVkCi8vIG9uIHRoZSBvcHRpb24KLy8gVGhlIGdldHRlciBlbnN1cmVzIGEgZGVmYXVsdCBvcHRpb24gaXMgc2VsZWN0ZWQKLy8gd2hlbiBpbiBhbiBvcHRncm91cAppZiAoICFzdXBwb3J0Lm9wdFNlbGVjdGVkICkgewoJalF1ZXJ5LnByb3BIb29rcy5zZWxlY3RlZCA9IHsKCQlnZXQ6IGZ1bmN0aW9uKCBlbGVtICkgewoJCQl2YXIgcGFyZW50ID0gZWxlbS5wYXJlbnROb2RlOwoKCQkJaWYgKCBwYXJlbnQgKSB7CgkJCQlwYXJlbnQuc2VsZWN0ZWRJbmRleDsKCgkJCQkvLyBNYWtlIHN1cmUgdGhhdCBpdCBhbHNvIHdvcmtzIHdpdGggb3B0Z3JvdXBzLCBzZWUgIzU3MDEKCQkJCWlmICggcGFyZW50LnBhcmVudE5vZGUgKSB7CgkJCQkJcGFyZW50LnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleDsKCQkJCX0KCQkJfQoJCQlyZXR1cm4gbnVsbDsKCQl9LAoJCXNldDogZnVuY3Rpb24oIGVsZW0gKSB7CgkJCXZhciBwYXJlbnQgPSBlbGVtLnBhcmVudE5vZGU7CgkJCWlmICggcGFyZW50ICkgewoJCQkJcGFyZW50LnNlbGVjdGVkSW5kZXg7CgoJCQkJaWYgKCBwYXJlbnQucGFyZW50Tm9kZSApIHsKCQkJCQlwYXJlbnQucGFyZW50Tm9kZS5zZWxlY3RlZEluZGV4OwoJCQkJfQoJCQl9CgkJfQoJfTsKfQoKalF1ZXJ5LmVhY2goIFsKCSJ0YWJJbmRleCIsCgkicmVhZE9ubHkiLAoJIm1heExlbmd0aCIsCgkiY2VsbFNwYWNpbmciLAoJImNlbGxQYWRkaW5nIiwKCSJyb3dTcGFuIiwKCSJjb2xTcGFuIiwKCSJ1c2VNYXAiLAoJImZyYW1lQm9yZGVyIiwKCSJjb250ZW50RWRpdGFibGUiCl0sIGZ1bmN0aW9uKCkgewoJalF1ZXJ5LnByb3BGaXhbIHRoaXMudG9Mb3dlckNhc2UoKSBdID0gdGhpczsKfSApOwoKLy8gSUU2LzcgY2FsbCBlbmN0eXBlIGVuY29kaW5nCmlmICggIXN1cHBvcnQuZW5jdHlwZSApIHsKCWpRdWVyeS5wcm9wRml4LmVuY3R5cGUgPSAiZW5jb2RpbmciOwp9CgoKCgp2YXIgcmNsYXNzID0gL1tcdFxyXG5cZl0vZzsKCmZ1bmN0aW9uIGdldENsYXNzKCBlbGVtICkgewoJcmV0dXJuIGpRdWVyeS5hdHRyKCBlbGVtLCAiY2xhc3MiICkgfHwgIiI7Cn0KCmpRdWVyeS5mbi5leHRlbmQoIHsKCWFkZENsYXNzOiBmdW5jdGlvbiggdmFsdWUgKSB7CgkJdmFyIGNsYXNzZXMsIGVsZW0sIGN1ciwgY3VyVmFsdWUsIGNsYXp6LCBqLCBmaW5hbFZhbHVlLAoJCQlpID0gMDsKCgkJaWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggdmFsdWUgKSApIHsKCQkJcmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oIGogKSB7CgkJCQlqUXVlcnkoIHRoaXMgKS5hZGRDbGFzcyggdmFsdWUuY2FsbCggdGhpcywgaiwgZ2V0Q2xhc3MoIHRoaXMgKSApICk7CgkJCX0gKTsKCQl9CgoJCWlmICggdHlwZW9mIHZhbHVlID09PSAic3RyaW5nIiAmJiB2YWx1ZSApIHsKCQkJY2xhc3NlcyA9IHZhbHVlLm1hdGNoKCBybm90d2hpdGUgKSB8fCBbXTsKCgkJCXdoaWxlICggKCBlbGVtID0gdGhpc1sgaSsrIF0gKSApIHsKCQkJCWN1clZhbHVlID0gZ2V0Q2xhc3MoIGVsZW0gKTsKCQkJCWN1ciA9IGVsZW0ubm9kZVR5cGUgPT09IDEgJiYKCQkJCQkoICIgIiArIGN1clZhbHVlICsgIiAiICkucmVwbGFjZSggcmNsYXNzLCAiICIgKTsKCgkJCQlpZiAoIGN1ciApIHsKCQkJCQlqID0gMDsKCQkJCQl3aGlsZSAoICggY2xhenogPSBjbGFzc2VzWyBqKysgXSApICkgewoJCQkJCQlpZiAoIGN1ci5pbmRleE9mKCAiICIgKyBjbGF6eiArICIgIiApIDwgMCApIHsKCQkJCQkJCWN1ciArPSBjbGF6eiArICIgIjsKCQkJCQkJfQoJCQkJCX0KCgkJCQkJLy8gb25seSBhc3NpZ24gaWYgZGlmZmVyZW50IHRvIGF2b2lkIHVubmVlZGVkIHJlbmRlcmluZy4KCQkJCQlmaW5hbFZhbHVlID0galF1ZXJ5LnRyaW0oIGN1ciApOwoJCQkJCWlmICggY3VyVmFsdWUgIT09IGZpbmFsVmFsdWUgKSB7CgkJCQkJCWpRdWVyeS5hdHRyKCBlbGVtLCAiY2xhc3MiLCBmaW5hbFZhbHVlICk7CgkJCQkJfQoJCQkJfQoJCQl9CgkJfQoKCQlyZXR1cm4gdGhpczsKCX0sCgoJcmVtb3ZlQ2xhc3M6IGZ1bmN0aW9uKCB2YWx1ZSApIHsKCQl2YXIgY2xhc3NlcywgZWxlbSwgY3VyLCBjdXJWYWx1ZSwgY2xhenosIGosIGZpbmFsVmFsdWUsCgkJCWkgPSAwOwoKCQlpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCB2YWx1ZSApICkgewoJCQlyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbiggaiApIHsKCQkJCWpRdWVyeSggdGhpcyApLnJlbW92ZUNsYXNzKCB2YWx1ZS5jYWxsKCB0aGlzLCBqLCBnZXRDbGFzcyggdGhpcyApICkgKTsKCQkJfSApOwoJCX0KCgkJaWYgKCAhYXJndW1lbnRzLmxlbmd0aCApIHsKCQkJcmV0dXJuIHRoaXMuYXR0ciggImNsYXNzIiwgIiIgKTsKCQl9CgoJCWlmICggdHlwZW9mIHZhbHVlID09PSAic3RyaW5nIiAmJiB2YWx1ZSApIHsKCQkJY2xhc3NlcyA9IHZhbHVlLm1hdGNoKCBybm90d2hpdGUgKSB8fCBbXTsKCgkJCXdoaWxlICggKCBlbGVtID0gdGhpc1sgaSsrIF0gKSApIHsKCQkJCWN1clZhbHVlID0gZ2V0Q2xhc3MoIGVsZW0gKTsKCgkJCQkvLyBUaGlzIGV4cHJlc3Npb24gaXMgaGVyZSBmb3IgYmV0dGVyIGNvbXByZXNzaWJpbGl0eSAoc2VlIGFkZENsYXNzKQoJCQkJY3VyID0gZWxlbS5ub2RlVHlwZSA9PT0gMSAmJgoJCQkJCSggIiAiICsgY3VyVmFsdWUgKyAiICIgKS5yZXBsYWNlKCByY2xhc3MsICIgIiApOwoKCQkJCWlmICggY3VyICkgewoJCQkJCWogPSAwOwoJCQkJCXdoaWxlICggKCBjbGF6eiA9IGNsYXNzZXNbIGorKyBdICkgKSB7CgoJCQkJCQkvLyBSZW1vdmUgKmFsbCogaW5zdGFuY2VzCgkJCQkJCXdoaWxlICggY3VyLmluZGV4T2YoICIgIiArIGNsYXp6ICsgIiAiICkgPiAtMSApIHsKCQkJCQkJCWN1ciA9IGN1ci5yZXBsYWNlKCAiICIgKyBjbGF6eiArICIgIiwgIiAiICk7CgkJCQkJCX0KCQkJCQl9CgoJCQkJCS8vIE9ubHkgYXNzaWduIGlmIGRpZmZlcmVudCB0byBhdm9pZCB1bm5lZWRlZCByZW5kZXJpbmcuCgkJCQkJZmluYWxWYWx1ZSA9IGpRdWVyeS50cmltKCBjdXIgKTsKCQkJCQlpZiAoIGN1clZhbHVlICE9PSBmaW5hbFZhbHVlICkgewoJCQkJCQlqUXVlcnkuYXR0ciggZWxlbSwgImNsYXNzIiwgZmluYWxWYWx1ZSApOwoJCQkJCX0KCQkJCX0KCQkJfQoJCX0KCgkJcmV0dXJuIHRoaXM7Cgl9LAoKCXRvZ2dsZUNsYXNzOiBmdW5jdGlvbiggdmFsdWUsIHN0YXRlVmFsICkgewoJCXZhciB0eXBlID0gdHlwZW9mIHZhbHVlOwoKCQlpZiAoIHR5cGVvZiBzdGF0ZVZhbCA9PT0gImJvb2xlYW4iICYmIHR5cGUgPT09ICJzdHJpbmciICkgewoJCQlyZXR1cm4gc3RhdGVWYWwgPyB0aGlzLmFkZENsYXNzKCB2YWx1ZSApIDogdGhpcy5yZW1vdmVDbGFzcyggdmFsdWUgKTsKCQl9CgoJCWlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIHZhbHVlICkgKSB7CgkJCXJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCBpICkgewoJCQkJalF1ZXJ5KCB0aGlzICkudG9nZ2xlQ2xhc3MoCgkJCQkJdmFsdWUuY2FsbCggdGhpcywgaSwgZ2V0Q2xhc3MoIHRoaXMgKSwgc3RhdGVWYWwgKSwKCQkJCQlzdGF0ZVZhbAoJCQkJKTsKCQkJfSApOwoJCX0KCgkJcmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7CgkJCXZhciBjbGFzc05hbWUsIGksIHNlbGYsIGNsYXNzTmFtZXM7CgoJCQlpZiAoIHR5cGUgPT09ICJzdHJpbmciICkgewoKCQkJCS8vIFRvZ2dsZSBpbmRpdmlkdWFsIGNsYXNzIG5hbWVzCgkJCQlpID0gMDsKCQkJCXNlbGYgPSBqUXVlcnkoIHRoaXMgKTsKCQkJCWNsYXNzTmFtZXMgPSB2YWx1ZS5tYXRjaCggcm5vdHdoaXRlICkgfHwgW107CgoJCQkJd2hpbGUgKCAoIGNsYXNzTmFtZSA9IGNsYXNzTmFtZXNbIGkrKyBdICkgKSB7CgoJCQkJCS8vIENoZWNrIGVhY2ggY2xhc3NOYW1lIGdpdmVuLCBzcGFjZSBzZXBhcmF0ZWQgbGlzdAoJCQkJCWlmICggc2VsZi5oYXNDbGFzcyggY2xhc3NOYW1lICkgKSB7CgkJCQkJCXNlbGYucmVtb3ZlQ2xhc3MoIGNsYXNzTmFtZSApOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXNlbGYuYWRkQ2xhc3MoIGNsYXNzTmFtZSApOwoJCQkJCX0KCQkJCX0KCgkJCS8vIFRvZ2dsZSB3aG9sZSBjbGFzcyBuYW1lCgkJCX0gZWxzZSBpZiAoIHZhbHVlID09PSB1bmRlZmluZWQgfHwgdHlwZSA9PT0gImJvb2xlYW4iICkgewoJCQkJY2xhc3NOYW1lID0gZ2V0Q2xhc3MoIHRoaXMgKTsKCQkJCWlmICggY2xhc3NOYW1lICkgewoKCQkJCQkvLyBzdG9yZSBjbGFzc05hbWUgaWYgc2V0CgkJCQkJalF1ZXJ5Ll9kYXRhKCB0aGlzLCAiX19jbGFzc05hbWVfXyIsIGNsYXNzTmFtZSApOwoJCQkJfQoKCQkJCS8vIElmIHRoZSBlbGVtZW50IGhhcyBhIGNsYXNzIG5hbWUgb3IgaWYgd2UncmUgcGFzc2VkICJmYWxzZSIsCgkJCQkvLyB0aGVuIHJlbW92ZSB0aGUgd2hvbGUgY2xhc3NuYW1lIChpZiB0aGVyZSB3YXMgb25lLCB0aGUgYWJvdmUgc2F2ZWQgaXQpLgoJCQkJLy8gT3RoZXJ3aXNlIGJyaW5nIGJhY2sgd2hhdGV2ZXIgd2FzIHByZXZpb3VzbHkgc2F2ZWQgKGlmIGFueXRoaW5nKSwKCQkJCS8vIGZhbGxpbmcgYmFjayB0byB0aGUgZW1wdHkgc3RyaW5nIGlmIG5vdGhpbmcgd2FzIHN0b3JlZC4KCQkJCWpRdWVyeS5hdHRyKCB0aGlzLCAiY2xhc3MiLAoJCQkJCWNsYXNzTmFtZSB8fCB2YWx1ZSA9PT0gZmFsc2UgPwoJCQkJCSIiIDoKCQkJCQlqUXVlcnkuX2RhdGEoIHRoaXMsICJfX2NsYXNzTmFtZV9fIiApIHx8ICIiCgkJCQkpOwoJCQl9CgkJfSApOwoJfSwKCgloYXNDbGFzczogZnVuY3Rpb24oIHNlbGVjdG9yICkgewoJCXZhciBjbGFzc05hbWUsIGVsZW0sCgkJCWkgPSAwOwoKCQljbGFzc05hbWUgPSAiICIgKyBzZWxlY3RvciArICIgIjsKCQl3aGlsZSAoICggZWxlbSA9IHRoaXNbIGkrKyBdICkgKSB7CgkJCWlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSAmJgoJCQkJKCAiICIgKyBnZXRDbGFzcyggZWxlbSApICsgIiAiICkucmVwbGFjZSggcmNsYXNzLCAiICIgKQoJCQkJCS5pbmRleE9mKCBjbGFzc05hbWUgKSA+IC0xCgkJCSkgewoJCQkJcmV0dXJuIHRydWU7CgkJCX0KCQl9CgoJCXJldHVybiBmYWxzZTsKCX0KfSApOwoKCgoKLy8gUmV0dXJuIGpRdWVyeSBmb3IgYXR0cmlidXRlcy1vbmx5IGluY2x1c2lvbgoKCmpRdWVyeS5lYWNoKCAoICJibHVyIGZvY3VzIGZvY3VzaW4gZm9jdXNvdXQgbG9hZCByZXNpemUgc2Nyb2xsIHVubG9hZCBjbGljayBkYmxjbGljayAiICsKCSJtb3VzZWRvd24gbW91c2V1cCBtb3VzZW1vdmUgbW91c2VvdmVyIG1vdXNlb3V0IG1vdXNlZW50ZXIgbW91c2VsZWF2ZSAiICsKCSJjaGFuZ2Ugc2VsZWN0IHN1Ym1pdCBrZXlkb3duIGtleXByZXNzIGtleXVwIGVycm9yIGNvbnRleHRtZW51IiApLnNwbGl0KCAiICIgKSwKCWZ1bmN0aW9uKCBpLCBuYW1lICkgewoKCS8vIEhhbmRsZSBldmVudCBiaW5kaW5nCglqUXVlcnkuZm5bIG5hbWUgXSA9IGZ1bmN0aW9uKCBkYXRhLCBmbiApIHsKCQlyZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA+IDAgPwoJCQl0aGlzLm9uKCBuYW1lLCBudWxsLCBkYXRhLCBmbiApIDoKCQkJdGhpcy50cmlnZ2VyKCBuYW1lICk7Cgl9Owp9ICk7CgpqUXVlcnkuZm4uZXh0ZW5kKCB7Cglob3ZlcjogZnVuY3Rpb24oIGZuT3ZlciwgZm5PdXQgKSB7CgkJcmV0dXJuIHRoaXMubW91c2VlbnRlciggZm5PdmVyICkubW91c2VsZWF2ZSggZm5PdXQgfHwgZm5PdmVyICk7Cgl9Cn0gKTsKCgp2YXIgbG9jYXRpb24gPSB3aW5kb3cubG9jYXRpb247Cgp2YXIgbm9uY2UgPSBqUXVlcnkubm93KCk7Cgp2YXIgcnF1ZXJ5ID0gKCAvXD8vICk7CgoKCnZhciBydmFsaWR0b2tlbnMgPSAvKCwpfChcW3x7KXwofXxdKXwiKD86W14iXFxcclxuXXxcXFsiXFxcL2JmbnJ0XXxcXHVbXGRhLWZBLUZdezR9KSoiXHMqOj98dHJ1ZXxmYWxzZXxudWxsfC0/KD8hMFxkKVxkKyg/OlwuXGQrfCkoPzpbZUVdWystXT9cZCt8KS9nOwoKalF1ZXJ5LnBhcnNlSlNPTiA9IGZ1bmN0aW9uKCBkYXRhICkgewoKCS8vIEF0dGVtcHQgdG8gcGFyc2UgdXNpbmcgdGhlIG5hdGl2ZSBKU09OIHBhcnNlciBmaXJzdAoJaWYgKCB3aW5kb3cuSlNPTiAmJiB3aW5kb3cuSlNPTi5wYXJzZSApIHsKCgkJLy8gU3VwcG9ydDogQW5kcm9pZCAyLjMKCQkvLyBXb3JrYXJvdW5kIGZhaWx1cmUgdG8gc3RyaW5nLWNhc3QgbnVsbCBpbnB1dAoJCXJldHVybiB3aW5kb3cuSlNPTi5wYXJzZSggZGF0YSArICIiICk7Cgl9CgoJdmFyIHJlcXVpcmVOb25Db21tYSwKCQlkZXB0aCA9IG51bGwsCgkJc3RyID0galF1ZXJ5LnRyaW0oIGRhdGEgKyAiIiApOwoKCS8vIEd1YXJkIGFnYWluc3QgaW52YWxpZCAoYW5kIHBvc3NpYmx5IGRhbmdlcm91cykgaW5wdXQgYnkgZW5zdXJpbmcgdGhhdCBub3RoaW5nIHJlbWFpbnMKCS8vIGFmdGVyIHJlbW92aW5nIHZhbGlkIHRva2VucwoJcmV0dXJuIHN0ciAmJiAhalF1ZXJ5LnRyaW0oIHN0ci5yZXBsYWNlKCBydmFsaWR0b2tlbnMsIGZ1bmN0aW9uKCB0b2tlbiwgY29tbWEsIG9wZW4sIGNsb3NlICkgewoKCQkvLyBGb3JjZSB0ZXJtaW5hdGlvbiBpZiB3ZSBzZWUgYSBtaXNwbGFjZWQgY29tbWEKCQlpZiAoIHJlcXVpcmVOb25Db21tYSAmJiBjb21tYSApIHsKCQkJZGVwdGggPSAwOwoJCX0KCgkJLy8gUGVyZm9ybSBubyBtb3JlIHJlcGxhY2VtZW50cyBhZnRlciByZXR1cm5pbmcgdG8gb3V0ZXJtb3N0IGRlcHRoCgkJaWYgKCBkZXB0aCA9PT0gMCApIHsKCQkJcmV0dXJuIHRva2VuOwoJCX0KCgkJLy8gQ29tbWFzIG11c3Qgbm90IGZvbGxvdyAiWyIsICJ7Iiwgb3IgIiwiCgkJcmVxdWlyZU5vbkNvbW1hID0gb3BlbiB8fCBjb21tYTsKCgkJLy8gRGV0ZXJtaW5lIG5ldyBkZXB0aAoJCS8vIGFycmF5L29iamVjdCBvcGVuICgiWyIgb3IgInsiKTogZGVwdGggKz0gdHJ1ZSAtIGZhbHNlIChpbmNyZW1lbnQpCgkJLy8gYXJyYXkvb2JqZWN0IGNsb3NlICgiXSIgb3IgIn0iKTogZGVwdGggKz0gZmFsc2UgLSB0cnVlIChkZWNyZW1lbnQpCgkJLy8gb3RoZXIgY2FzZXMgKCIsIiBvciBwcmltaXRpdmUpOiBkZXB0aCArPSB0cnVlIC0gdHJ1ZSAobnVtZXJpYyBjYXN0KQoJCWRlcHRoICs9ICFjbG9zZSAtICFvcGVuOwoKCQkvLyBSZW1vdmUgdGhpcyB0b2tlbgoJCXJldHVybiAiIjsKCX0gKSApID8KCQkoIEZ1bmN0aW9uKCAicmV0dXJuICIgKyBzdHIgKSApKCkgOgoJCWpRdWVyeS5lcnJvciggIkludmFsaWQgSlNPTjogIiArIGRhdGEgKTsKfTsKCgovLyBDcm9zcy1icm93c2VyIHhtbCBwYXJzaW5nCmpRdWVyeS5wYXJzZVhNTCA9IGZ1bmN0aW9uKCBkYXRhICkgewoJdmFyIHhtbCwgdG1wOwoJaWYgKCAhZGF0YSB8fCB0eXBlb2YgZGF0YSAhPT0gInN0cmluZyIgKSB7CgkJcmV0dXJuIG51bGw7Cgl9Cgl0cnkgewoJCWlmICggd2luZG93LkRPTVBhcnNlciApIHsgLy8gU3RhbmRhcmQKCQkJdG1wID0gbmV3IHdpbmRvdy5ET01QYXJzZXIoKTsKCQkJeG1sID0gdG1wLnBhcnNlRnJvbVN0cmluZyggZGF0YSwgInRleHQveG1sIiApOwoJCX0gZWxzZSB7IC8vIElFCgkJCXhtbCA9IG5ldyB3aW5kb3cuQWN0aXZlWE9iamVjdCggIk1pY3Jvc29mdC5YTUxET00iICk7CgkJCXhtbC5hc3luYyA9ICJmYWxzZSI7CgkJCXhtbC5sb2FkWE1MKCBkYXRhICk7CgkJfQoJfSBjYXRjaCAoIGUgKSB7CgkJeG1sID0gdW5kZWZpbmVkOwoJfQoJaWYgKCAheG1sIHx8ICF4bWwuZG9jdW1lbnRFbGVtZW50IHx8IHhtbC5nZXRFbGVtZW50c0J5VGFnTmFtZSggInBhcnNlcmVycm9yIiApLmxlbmd0aCApIHsKCQlqUXVlcnkuZXJyb3IoICJJbnZhbGlkIFhNTDogIiArIGRhdGEgKTsKCX0KCXJldHVybiB4bWw7Cn07CgoKdmFyCglyaGFzaCA9IC8jLiokLywKCXJ0cyA9IC8oWz8mXSlfPVteJl0qLywKCgkvLyBJRSBsZWF2ZXMgYW4gXHIgY2hhcmFjdGVyIGF0IEVPTAoJcmhlYWRlcnMgPSAvXiguKj8pOlsgXHRdKihbXlxyXG5dKilccj8kL21nLAoKCS8vICM3NjUzLCAjODEyNSwgIzgxNTI6IGxvY2FsIHByb3RvY29sIGRldGVjdGlvbgoJcmxvY2FsUHJvdG9jb2wgPSAvXig/OmFib3V0fGFwcHxhcHAtc3RvcmFnZXwuKy1leHRlbnNpb258ZmlsZXxyZXN8d2lkZ2V0KTokLywKCXJub0NvbnRlbnQgPSAvXig/OkdFVHxIRUFEKSQvLAoJcnByb3RvY29sID0gL15cL1wvLywKCXJ1cmwgPSAvXihbXHcuKy1dKzopKD86XC9cLyg/OlteXC8/I10qQHwpKFteXC8/IzpdKikoPzo6KFxkKyl8KXwpLywKCgkvKiBQcmVmaWx0ZXJzCgkgKiAxKSBUaGV5IGFyZSB1c2VmdWwgdG8gaW50cm9kdWNlIGN1c3RvbSBkYXRhVHlwZXMgKHNlZSBhamF4L2pzb25wLmpzIGZvciBhbiBleGFtcGxlKQoJICogMikgVGhlc2UgYXJlIGNhbGxlZDoKCSAqICAgIC0gQkVGT1JFIGFza2luZyBmb3IgYSB0cmFuc3BvcnQKCSAqICAgIC0gQUZURVIgcGFyYW0gc2VyaWFsaXphdGlvbiAocy5kYXRhIGlzIGEgc3RyaW5nIGlmIHMucHJvY2Vzc0RhdGEgaXMgdHJ1ZSkKCSAqIDMpIGtleSBpcyB0aGUgZGF0YVR5cGUKCSAqIDQpIHRoZSBjYXRjaGFsbCBzeW1ib2wgIioiIGNhbiBiZSB1c2VkCgkgKiA1KSBleGVjdXRpb24gd2lsbCBzdGFydCB3aXRoIHRyYW5zcG9ydCBkYXRhVHlwZSBhbmQgVEhFTiBjb250aW51ZSBkb3duIHRvICIqIiBpZiBuZWVkZWQKCSAqLwoJcHJlZmlsdGVycyA9IHt9LAoKCS8qIFRyYW5zcG9ydHMgYmluZGluZ3MKCSAqIDEpIGtleSBpcyB0aGUgZGF0YVR5cGUKCSAqIDIpIHRoZSBjYXRjaGFsbCBzeW1ib2wgIioiIGNhbiBiZSB1c2VkCgkgKiAzKSBzZWxlY3Rpb24gd2lsbCBzdGFydCB3aXRoIHRyYW5zcG9ydCBkYXRhVHlwZSBhbmQgVEhFTiBnbyB0byAiKiIgaWYgbmVlZGVkCgkgKi8KCXRyYW5zcG9ydHMgPSB7fSwKCgkvLyBBdm9pZCBjb21tZW50LXByb2xvZyBjaGFyIHNlcXVlbmNlICgjMTAwOTgpOyBtdXN0IGFwcGVhc2UgbGludCBhbmQgZXZhZGUgY29tcHJlc3Npb24KCWFsbFR5cGVzID0gIiovIi5jb25jYXQoICIqIiApLAoKCS8vIERvY3VtZW50IGxvY2F0aW9uCglhamF4TG9jYXRpb24gPSBsb2NhdGlvbi5ocmVmLAoKCS8vIFNlZ21lbnQgbG9jYXRpb24gaW50byBwYXJ0cwoJYWpheExvY1BhcnRzID0gcnVybC5leGVjKCBhamF4TG9jYXRpb24udG9Mb3dlckNhc2UoKSApIHx8IFtdOwoKLy8gQmFzZSAiY29uc3RydWN0b3IiIGZvciBqUXVlcnkuYWpheFByZWZpbHRlciBhbmQgalF1ZXJ5LmFqYXhUcmFuc3BvcnQKZnVuY3Rpb24gYWRkVG9QcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKCBzdHJ1Y3R1cmUgKSB7CgoJLy8gZGF0YVR5cGVFeHByZXNzaW9uIGlzIG9wdGlvbmFsIGFuZCBkZWZhdWx0cyB0byAiKiIKCXJldHVybiBmdW5jdGlvbiggZGF0YVR5cGVFeHByZXNzaW9uLCBmdW5jICkgewoKCQlpZiAoIHR5cGVvZiBkYXRhVHlwZUV4cHJlc3Npb24gIT09ICJzdHJpbmciICkgewoJCQlmdW5jID0gZGF0YVR5cGVFeHByZXNzaW9uOwoJCQlkYXRhVHlwZUV4cHJlc3Npb24gPSAiKiI7CgkJfQoKCQl2YXIgZGF0YVR5cGUsCgkJCWkgPSAwLAoJCQlkYXRhVHlwZXMgPSBkYXRhVHlwZUV4cHJlc3Npb24udG9Mb3dlckNhc2UoKS5tYXRjaCggcm5vdHdoaXRlICkgfHwgW107CgoJCWlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIGZ1bmMgKSApIHsKCgkJCS8vIEZvciBlYWNoIGRhdGFUeXBlIGluIHRoZSBkYXRhVHlwZUV4cHJlc3Npb24KCQkJd2hpbGUgKCAoIGRhdGFUeXBlID0gZGF0YVR5cGVzWyBpKysgXSApICkgewoKCQkJCS8vIFByZXBlbmQgaWYgcmVxdWVzdGVkCgkJCQlpZiAoIGRhdGFUeXBlLmNoYXJBdCggMCApID09PSAiKyIgKSB7CgkJCQkJZGF0YVR5cGUgPSBkYXRhVHlwZS5zbGljZSggMSApIHx8ICIqIjsKCQkJCQkoIHN0cnVjdHVyZVsgZGF0YVR5cGUgXSA9IHN0cnVjdHVyZVsgZGF0YVR5cGUgXSB8fCBbXSApLnVuc2hpZnQoIGZ1bmMgKTsKCgkJCQkvLyBPdGhlcndpc2UgYXBwZW5kCgkJCQl9IGVsc2UgewoJCQkJCSggc3RydWN0dXJlWyBkYXRhVHlwZSBdID0gc3RydWN0dXJlWyBkYXRhVHlwZSBdIHx8IFtdICkucHVzaCggZnVuYyApOwoJCQkJfQoJCQl9CgkJfQoJfTsKfQoKLy8gQmFzZSBpbnNwZWN0aW9uIGZ1bmN0aW9uIGZvciBwcmVmaWx0ZXJzIGFuZCB0cmFuc3BvcnRzCmZ1bmN0aW9uIGluc3BlY3RQcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKCBzdHJ1Y3R1cmUsIG9wdGlvbnMsIG9yaWdpbmFsT3B0aW9ucywganFYSFIgKSB7CgoJdmFyIGluc3BlY3RlZCA9IHt9LAoJCXNlZWtpbmdUcmFuc3BvcnQgPSAoIHN0cnVjdHVyZSA9PT0gdHJhbnNwb3J0cyApOwoKCWZ1bmN0aW9uIGluc3BlY3QoIGRhdGFUeXBlICkgewoJCXZhciBzZWxlY3RlZDsKCQlpbnNwZWN0ZWRbIGRhdGFUeXBlIF0gPSB0cnVlOwoJCWpRdWVyeS5lYWNoKCBzdHJ1Y3R1cmVbIGRhdGFUeXBlIF0gfHwgW10sIGZ1bmN0aW9uKCBfLCBwcmVmaWx0ZXJPckZhY3RvcnkgKSB7CgkJCXZhciBkYXRhVHlwZU9yVHJhbnNwb3J0ID0gcHJlZmlsdGVyT3JGYWN0b3J5KCBvcHRpb25zLCBvcmlnaW5hbE9wdGlvbnMsIGpxWEhSICk7CgkJCWlmICggdHlwZW9mIGRhdGFUeXBlT3JUcmFuc3BvcnQgPT09ICJzdHJpbmciICYmCgkJCQkhc2Vla2luZ1RyYW5zcG9ydCAmJiAhaW5zcGVjdGVkWyBkYXRhVHlwZU9yVHJhbnNwb3J0IF0gKSB7CgoJCQkJb3B0aW9ucy5kYXRhVHlwZXMudW5zaGlmdCggZGF0YVR5cGVPclRyYW5zcG9ydCApOwoJCQkJaW5zcGVjdCggZGF0YVR5cGVPclRyYW5zcG9ydCApOwoJCQkJcmV0dXJuIGZhbHNlOwoJCQl9IGVsc2UgaWYgKCBzZWVraW5nVHJhbnNwb3J0ICkgewoJCQkJcmV0dXJuICEoIHNlbGVjdGVkID0gZGF0YVR5cGVPclRyYW5zcG9ydCApOwoJCQl9CgkJfSApOwoJCXJldHVybiBzZWxlY3RlZDsKCX0KCglyZXR1cm4gaW5zcGVjdCggb3B0aW9ucy5kYXRhVHlwZXNbIDAgXSApIHx8ICFpbnNwZWN0ZWRbICIqIiBdICYmIGluc3BlY3QoICIqIiApOwp9CgovLyBBIHNwZWNpYWwgZXh0ZW5kIGZvciBhamF4IG9wdGlvbnMKLy8gdGhhdCB0YWtlcyAiZmxhdCIgb3B0aW9ucyAobm90IHRvIGJlIGRlZXAgZXh0ZW5kZWQpCi8vIEZpeGVzICM5ODg3CmZ1bmN0aW9uIGFqYXhFeHRlbmQoIHRhcmdldCwgc3JjICkgewoJdmFyIGRlZXAsIGtleSwKCQlmbGF0T3B0aW9ucyA9IGpRdWVyeS5hamF4U2V0dGluZ3MuZmxhdE9wdGlvbnMgfHwge307CgoJZm9yICgga2V5IGluIHNyYyApIHsKCQlpZiAoIHNyY1sga2V5IF0gIT09IHVuZGVmaW5lZCApIHsKCQkJKCBmbGF0T3B0aW9uc1sga2V5IF0gPyB0YXJnZXQgOiAoIGRlZXAgfHwgKCBkZWVwID0ge30gKSApIClbIGtleSBdID0gc3JjWyBrZXkgXTsKCQl9Cgl9CglpZiAoIGRlZXAgKSB7CgkJalF1ZXJ5LmV4dGVuZCggdHJ1ZSwgdGFyZ2V0LCBkZWVwICk7Cgl9CgoJcmV0dXJuIHRhcmdldDsKfQoKLyogSGFuZGxlcyByZXNwb25zZXMgdG8gYW4gYWpheCByZXF1ZXN0OgogKiAtIGZpbmRzIHRoZSByaWdodCBkYXRhVHlwZSAobWVkaWF0ZXMgYmV0d2VlbiBjb250ZW50LXR5cGUgYW5kIGV4cGVjdGVkIGRhdGFUeXBlKQogKiAtIHJldHVybnMgdGhlIGNvcnJlc3BvbmRpbmcgcmVzcG9uc2UKICovCmZ1bmN0aW9uIGFqYXhIYW5kbGVSZXNwb25zZXMoIHMsIGpxWEhSLCByZXNwb25zZXMgKSB7Cgl2YXIgZmlyc3REYXRhVHlwZSwgY3QsIGZpbmFsRGF0YVR5cGUsIHR5cGUsCgkJY29udGVudHMgPSBzLmNvbnRlbnRzLAoJCWRhdGFUeXBlcyA9IHMuZGF0YVR5cGVzOwoKCS8vIFJlbW92ZSBhdXRvIGRhdGFUeXBlIGFuZCBnZXQgY29udGVudC10eXBlIGluIHRoZSBwcm9jZXNzCgl3aGlsZSAoIGRhdGFUeXBlc1sgMCBdID09PSAiKiIgKSB7CgkJZGF0YVR5cGVzLnNoaWZ0KCk7CgkJaWYgKCBjdCA9PT0gdW5kZWZpbmVkICkgewoJCQljdCA9IHMubWltZVR5cGUgfHwganFYSFIuZ2V0UmVzcG9uc2VIZWFkZXIoICJDb250ZW50LVR5cGUiICk7CgkJfQoJfQoKCS8vIENoZWNrIGlmIHdlJ3JlIGRlYWxpbmcgd2l0aCBhIGtub3duIGNvbnRlbnQtdHlwZQoJaWYgKCBjdCApIHsKCQlmb3IgKCB0eXBlIGluIGNvbnRlbnRzICkgewoJCQlpZiAoIGNvbnRlbnRzWyB0eXBlIF0gJiYgY29udGVudHNbIHR5cGUgXS50ZXN0KCBjdCApICkgewoJCQkJZGF0YVR5cGVzLnVuc2hpZnQoIHR5cGUgKTsKCQkJCWJyZWFrOwoJCQl9CgkJfQoJfQoKCS8vIENoZWNrIHRvIHNlZSBpZiB3ZSBoYXZlIGEgcmVzcG9uc2UgZm9yIHRoZSBleHBlY3RlZCBkYXRhVHlwZQoJaWYgKCBkYXRhVHlwZXNbIDAgXSBpbiByZXNwb25zZXMgKSB7CgkJZmluYWxEYXRhVHlwZSA9IGRhdGFUeXBlc1sgMCBdOwoJfSBlbHNlIHsKCgkJLy8gVHJ5IGNvbnZlcnRpYmxlIGRhdGFUeXBlcwoJCWZvciAoIHR5cGUgaW4gcmVzcG9uc2VzICkgewoJCQlpZiAoICFkYXRhVHlwZXNbIDAgXSB8fCBzLmNvbnZlcnRlcnNbIHR5cGUgKyAiICIgKyBkYXRhVHlwZXNbIDAgXSBdICkgewoJCQkJZmluYWxEYXRhVHlwZSA9IHR5cGU7CgkJCQlicmVhazsKCQkJfQoJCQlpZiAoICFmaXJzdERhdGFUeXBlICkgewoJCQkJZmlyc3REYXRhVHlwZSA9IHR5cGU7CgkJCX0KCQl9CgoJCS8vIE9yIGp1c3QgdXNlIGZpcnN0IG9uZQoJCWZpbmFsRGF0YVR5cGUgPSBmaW5hbERhdGFUeXBlIHx8IGZpcnN0RGF0YVR5cGU7Cgl9CgoJLy8gSWYgd2UgZm91bmQgYSBkYXRhVHlwZQoJLy8gV2UgYWRkIHRoZSBkYXRhVHlwZSB0byB0aGUgbGlzdCBpZiBuZWVkZWQKCS8vIGFuZCByZXR1cm4gdGhlIGNvcnJlc3BvbmRpbmcgcmVzcG9uc2UKCWlmICggZmluYWxEYXRhVHlwZSApIHsKCQlpZiAoIGZpbmFsRGF0YVR5cGUgIT09IGRhdGFUeXBlc1sgMCBdICkgewoJCQlkYXRhVHlwZXMudW5zaGlmdCggZmluYWxEYXRhVHlwZSApOwoJCX0KCQlyZXR1cm4gcmVzcG9uc2VzWyBmaW5hbERhdGFUeXBlIF07Cgl9Cn0KCi8qIENoYWluIGNvbnZlcnNpb25zIGdpdmVuIHRoZSByZXF1ZXN0IGFuZCB0aGUgb3JpZ2luYWwgcmVzcG9uc2UKICogQWxzbyBzZXRzIHRoZSByZXNwb25zZVhYWCBmaWVsZHMgb24gdGhlIGpxWEhSIGluc3RhbmNlCiAqLwpmdW5jdGlvbiBhamF4Q29udmVydCggcywgcmVzcG9uc2UsIGpxWEhSLCBpc1N1Y2Nlc3MgKSB7Cgl2YXIgY29udjIsIGN1cnJlbnQsIGNvbnYsIHRtcCwgcHJldiwKCQljb252ZXJ0ZXJzID0ge30sCgoJCS8vIFdvcmsgd2l0aCBhIGNvcHkgb2YgZGF0YVR5cGVzIGluIGNhc2Ugd2UgbmVlZCB0byBtb2RpZnkgaXQgZm9yIGNvbnZlcnNpb24KCQlkYXRhVHlwZXMgPSBzLmRhdGFUeXBlcy5zbGljZSgpOwoKCS8vIENyZWF0ZSBjb252ZXJ0ZXJzIG1hcCB3aXRoIGxvd2VyY2FzZWQga2V5cwoJaWYgKCBkYXRhVHlwZXNbIDEgXSApIHsKCQlmb3IgKCBjb252IGluIHMuY29udmVydGVycyApIHsKCQkJY29udmVydGVyc1sgY29udi50b0xvd2VyQ2FzZSgpIF0gPSBzLmNvbnZlcnRlcnNbIGNvbnYgXTsKCQl9Cgl9CgoJY3VycmVudCA9IGRhdGFUeXBlcy5zaGlmdCgpOwoKCS8vIENvbnZlcnQgdG8gZWFjaCBzZXF1ZW50aWFsIGRhdGFUeXBlCgl3aGlsZSAoIGN1cnJlbnQgKSB7CgoJCWlmICggcy5yZXNwb25zZUZpZWxkc1sgY3VycmVudCBdICkgewoJCQlqcVhIUlsgcy5yZXNwb25zZUZpZWxkc1sgY3VycmVudCBdIF0gPSByZXNwb25zZTsKCQl9CgoJCS8vIEFwcGx5IHRoZSBkYXRhRmlsdGVyIGlmIHByb3ZpZGVkCgkJaWYgKCAhcHJldiAmJiBpc1N1Y2Nlc3MgJiYgcy5kYXRhRmlsdGVyICkgewoJCQlyZXNwb25zZSA9IHMuZGF0YUZpbHRlciggcmVzcG9uc2UsIHMuZGF0YVR5cGUgKTsKCQl9CgoJCXByZXYgPSBjdXJyZW50OwoJCWN1cnJlbnQgPSBkYXRhVHlwZXMuc2hpZnQoKTsKCgkJaWYgKCBjdXJyZW50ICkgewoKCQkJLy8gVGhlcmUncyBvbmx5IHdvcmsgdG8gZG8gaWYgY3VycmVudCBkYXRhVHlwZSBpcyBub24tYXV0bwoJCQlpZiAoIGN1cnJlbnQgPT09ICIqIiApIHsKCgkJCQljdXJyZW50ID0gcHJldjsKCgkJCS8vIENvbnZlcnQgcmVzcG9uc2UgaWYgcHJldiBkYXRhVHlwZSBpcyBub24tYXV0byBhbmQgZGlmZmVycyBmcm9tIGN1cnJlbnQKCQkJfSBlbHNlIGlmICggcHJldiAhPT0gIioiICYmIHByZXYgIT09IGN1cnJlbnQgKSB7CgoJCQkJLy8gU2VlayBhIGRpcmVjdCBjb252ZXJ0ZXIKCQkJCWNvbnYgPSBjb252ZXJ0ZXJzWyBwcmV2ICsgIiAiICsgY3VycmVudCBdIHx8IGNvbnZlcnRlcnNbICIqICIgKyBjdXJyZW50IF07CgoJCQkJLy8gSWYgbm9uZSBmb3VuZCwgc2VlayBhIHBhaXIKCQkJCWlmICggIWNvbnYgKSB7CgkJCQkJZm9yICggY29udjIgaW4gY29udmVydGVycyApIHsKCgkJCQkJCS8vIElmIGNvbnYyIG91dHB1dHMgY3VycmVudAoJCQkJCQl0bXAgPSBjb252Mi5zcGxpdCggIiAiICk7CgkJCQkJCWlmICggdG1wWyAxIF0gPT09IGN1cnJlbnQgKSB7CgoJCQkJCQkJLy8gSWYgcHJldiBjYW4gYmUgY29udmVydGVkIHRvIGFjY2VwdGVkIGlucHV0CgkJCQkJCQljb252ID0gY29udmVydGVyc1sgcHJldiArICIgIiArIHRtcFsgMCBdIF0gfHwKCQkJCQkJCQljb252ZXJ0ZXJzWyAiKiAiICsgdG1wWyAwIF0gXTsKCQkJCQkJCWlmICggY29udiApIHsKCgkJCQkJCQkJLy8gQ29uZGVuc2UgZXF1aXZhbGVuY2UgY29udmVydGVycwoJCQkJCQkJCWlmICggY29udiA9PT0gdHJ1ZSApIHsKCQkJCQkJCQkJY29udiA9IGNvbnZlcnRlcnNbIGNvbnYyIF07CgoJCQkJCQkJCS8vIE90aGVyd2lzZSwgaW5zZXJ0IHRoZSBpbnRlcm1lZGlhdGUgZGF0YVR5cGUKCQkJCQkJCQl9IGVsc2UgaWYgKCBjb252ZXJ0ZXJzWyBjb252MiBdICE9PSB0cnVlICkgewoJCQkJCQkJCQljdXJyZW50ID0gdG1wWyAwIF07CgkJCQkJCQkJCWRhdGFUeXBlcy51bnNoaWZ0KCB0bXBbIDEgXSApOwoJCQkJCQkJCX0KCQkJCQkJCQlicmVhazsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0KCQkJCX0KCgkJCQkvLyBBcHBseSBjb252ZXJ0ZXIgKGlmIG5vdCBhbiBlcXVpdmFsZW5jZSkKCQkJCWlmICggY29udiAhPT0gdHJ1ZSApIHsKCgkJCQkJLy8gVW5sZXNzIGVycm9ycyBhcmUgYWxsb3dlZCB0byBidWJibGUsIGNhdGNoIGFuZCByZXR1cm4gdGhlbQoJCQkJCWlmICggY29udiAmJiBzWyAidGhyb3dzIiBdICkgeyAvLyBqc2NzOmlnbm9yZSByZXF1aXJlRG90Tm90YXRpb24KCQkJCQkJcmVzcG9uc2UgPSBjb252KCByZXNwb25zZSApOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXRyeSB7CgkJCQkJCQlyZXNwb25zZSA9IGNvbnYoIHJlc3BvbnNlICk7CgkJCQkJCX0gY2F0Y2ggKCBlICkgewoJCQkJCQkJcmV0dXJuIHsKCQkJCQkJCQlzdGF0ZTogInBhcnNlcmVycm9yIiwKCQkJCQkJCQllcnJvcjogY29udiA/IGUgOiAiTm8gY29udmVyc2lvbiBmcm9tICIgKyBwcmV2ICsgIiB0byAiICsgY3VycmVudAoJCQkJCQkJfTsKCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJfQoJCX0KCX0KCglyZXR1cm4geyBzdGF0ZTogInN1Y2Nlc3MiLCBkYXRhOiByZXNwb25zZSB9Owp9CgpqUXVlcnkuZXh0ZW5kKCB7CgoJLy8gQ291bnRlciBmb3IgaG9sZGluZyB0aGUgbnVtYmVyIG9mIGFjdGl2ZSBxdWVyaWVzCglhY3RpdmU6IDAsCgoJLy8gTGFzdC1Nb2RpZmllZCBoZWFkZXIgY2FjaGUgZm9yIG5leHQgcmVxdWVzdAoJbGFzdE1vZGlmaWVkOiB7fSwKCWV0YWc6IHt9LAoKCWFqYXhTZXR0aW5nczogewoJCXVybDogYWpheExvY2F0aW9uLAoJCXR5cGU6ICJHRVQiLAoJCWlzTG9jYWw6IHJsb2NhbFByb3RvY29sLnRlc3QoIGFqYXhMb2NQYXJ0c1sgMSBdICksCgkJZ2xvYmFsOiB0cnVlLAoJCXByb2Nlc3NEYXRhOiB0cnVlLAoJCWFzeW5jOiB0cnVlLAoJCWNvbnRlbnRUeXBlOiAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkOyBjaGFyc2V0PVVURi04IiwKCQkvKgoJCXRpbWVvdXQ6IDAsCgkJZGF0YTogbnVsbCwKCQlkYXRhVHlwZTogbnVsbCwKCQl1c2VybmFtZTogbnVsbCwKCQlwYXNzd29yZDogbnVsbCwKCQljYWNoZTogbnVsbCwKCQl0aHJvd3M6IGZhbHNlLAoJCXRyYWRpdGlvbmFsOiBmYWxzZSwKCQloZWFkZXJzOiB7fSwKCQkqLwoKCQlhY2NlcHRzOiB7CgkJCSIqIjogYWxsVHlwZXMsCgkJCXRleHQ6ICJ0ZXh0L3BsYWluIiwKCQkJaHRtbDogInRleHQvaHRtbCIsCgkJCXhtbDogImFwcGxpY2F0aW9uL3htbCwgdGV4dC94bWwiLAoJCQlqc29uOiAiYXBwbGljYXRpb24vanNvbiwgdGV4dC9qYXZhc2NyaXB0IgoJCX0sCgoJCWNvbnRlbnRzOiB7CgkJCXhtbDogL1xieG1sXGIvLAoJCQlodG1sOiAvXGJodG1sLywKCQkJanNvbjogL1xianNvblxiLwoJCX0sCgoJCXJlc3BvbnNlRmllbGRzOiB7CgkJCXhtbDogInJlc3BvbnNlWE1MIiwKCQkJdGV4dDogInJlc3BvbnNlVGV4dCIsCgkJCWpzb246ICJyZXNwb25zZUpTT04iCgkJfSwKCgkJLy8gRGF0YSBjb252ZXJ0ZXJzCgkJLy8gS2V5cyBzZXBhcmF0ZSBzb3VyY2UgKG9yIGNhdGNoYWxsICIqIikgYW5kIGRlc3RpbmF0aW9uIHR5cGVzIHdpdGggYSBzaW5nbGUgc3BhY2UKCQljb252ZXJ0ZXJzOiB7CgoJCQkvLyBDb252ZXJ0IGFueXRoaW5nIHRvIHRleHQKCQkJIiogdGV4dCI6IFN0cmluZywKCgkJCS8vIFRleHQgdG8gaHRtbCAodHJ1ZSA9IG5vIHRyYW5zZm9ybWF0aW9uKQoJCQkidGV4dCBodG1sIjogdHJ1ZSwKCgkJCS8vIEV2YWx1YXRlIHRleHQgYXMgYSBqc29uIGV4cHJlc3Npb24KCQkJInRleHQganNvbiI6IGpRdWVyeS5wYXJzZUpTT04sCgoJCQkvLyBQYXJzZSB0ZXh0IGFzIHhtbAoJCQkidGV4dCB4bWwiOiBqUXVlcnkucGFyc2VYTUwKCQl9LAoKCQkvLyBGb3Igb3B0aW9ucyB0aGF0IHNob3VsZG4ndCBiZSBkZWVwIGV4dGVuZGVkOgoJCS8vIHlvdSBjYW4gYWRkIHlvdXIgb3duIGN1c3RvbSBvcHRpb25zIGhlcmUgaWYKCQkvLyBhbmQgd2hlbiB5b3UgY3JlYXRlIG9uZSB0aGF0IHNob3VsZG4ndCBiZQoJCS8vIGRlZXAgZXh0ZW5kZWQgKHNlZSBhamF4RXh0ZW5kKQoJCWZsYXRPcHRpb25zOiB7CgkJCXVybDogdHJ1ZSwKCQkJY29udGV4dDogdHJ1ZQoJCX0KCX0sCgoJLy8gQ3JlYXRlcyBhIGZ1bGwgZmxlZGdlZCBzZXR0aW5ncyBvYmplY3QgaW50byB0YXJnZXQKCS8vIHdpdGggYm90aCBhamF4U2V0dGluZ3MgYW5kIHNldHRpbmdzIGZpZWxkcy4KCS8vIElmIHRhcmdldCBpcyBvbWl0dGVkLCB3cml0ZXMgaW50byBhamF4U2V0dGluZ3MuCglhamF4U2V0dXA6IGZ1bmN0aW9uKCB0YXJnZXQsIHNldHRpbmdzICkgewoJCXJldHVybiBzZXR0aW5ncyA/CgoJCQkvLyBCdWlsZGluZyBhIHNldHRpbmdzIG9iamVjdAoJCQlhamF4RXh0ZW5kKCBhamF4RXh0ZW5kKCB0YXJnZXQsIGpRdWVyeS5hamF4U2V0dGluZ3MgKSwgc2V0dGluZ3MgKSA6CgoJCQkvLyBFeHRlbmRpbmcgYWpheFNldHRpbmdzCgkJCWFqYXhFeHRlbmQoIGpRdWVyeS5hamF4U2V0dGluZ3MsIHRhcmdldCApOwoJfSwKCglhamF4UHJlZmlsdGVyOiBhZGRUb1ByZWZpbHRlcnNPclRyYW5zcG9ydHMoIHByZWZpbHRlcnMgKSwKCWFqYXhUcmFuc3BvcnQ6IGFkZFRvUHJlZmlsdGVyc09yVHJhbnNwb3J0cyggdHJhbnNwb3J0cyApLAoKCS8vIE1haW4gbWV0aG9kCglhamF4OiBmdW5jdGlvbiggdXJsLCBvcHRpb25zICkgewoKCQkvLyBJZiB1cmwgaXMgYW4gb2JqZWN0LCBzaW11bGF0ZSBwcmUtMS41IHNpZ25hdHVyZQoJCWlmICggdHlwZW9mIHVybCA9PT0gIm9iamVjdCIgKSB7CgkJCW9wdGlvbnMgPSB1cmw7CgkJCXVybCA9IHVuZGVmaW5lZDsKCQl9CgoJCS8vIEZvcmNlIG9wdGlvbnMgdG8gYmUgYW4gb2JqZWN0CgkJb3B0aW9ucyA9IG9wdGlvbnMgfHwge307CgoJCXZhcgoKCQkJLy8gQ3Jvc3MtZG9tYWluIGRldGVjdGlvbiB2YXJzCgkJCXBhcnRzLAoKCQkJLy8gTG9vcCB2YXJpYWJsZQoJCQlpLAoKCQkJLy8gVVJMIHdpdGhvdXQgYW50aS1jYWNoZSBwYXJhbQoJCQljYWNoZVVSTCwKCgkJCS8vIFJlc3BvbnNlIGhlYWRlcnMgYXMgc3RyaW5nCgkJCXJlc3BvbnNlSGVhZGVyc1N0cmluZywKCgkJCS8vIHRpbWVvdXQgaGFuZGxlCgkJCXRpbWVvdXRUaW1lciwKCgkJCS8vIFRvIGtub3cgaWYgZ2xvYmFsIGV2ZW50cyBhcmUgdG8gYmUgZGlzcGF0Y2hlZAoJCQlmaXJlR2xvYmFscywKCgkJCXRyYW5zcG9ydCwKCgkJCS8vIFJlc3BvbnNlIGhlYWRlcnMKCQkJcmVzcG9uc2VIZWFkZXJzLAoKCQkJLy8gQ3JlYXRlIHRoZSBmaW5hbCBvcHRpb25zIG9iamVjdAoJCQlzID0galF1ZXJ5LmFqYXhTZXR1cCgge30sIG9wdGlvbnMgKSwKCgkJCS8vIENhbGxiYWNrcyBjb250ZXh0CgkJCWNhbGxiYWNrQ29udGV4dCA9IHMuY29udGV4dCB8fCBzLAoKCQkJLy8gQ29udGV4dCBmb3IgZ2xvYmFsIGV2ZW50cyBpcyBjYWxsYmFja0NvbnRleHQgaWYgaXQgaXMgYSBET00gbm9kZSBvciBqUXVlcnkgY29sbGVjdGlvbgoJCQlnbG9iYWxFdmVudENvbnRleHQgPSBzLmNvbnRleHQgJiYKCQkJCSggY2FsbGJhY2tDb250ZXh0Lm5vZGVUeXBlIHx8IGNhbGxiYWNrQ29udGV4dC5qcXVlcnkgKSA/CgkJCQkJalF1ZXJ5KCBjYWxsYmFja0NvbnRleHQgKSA6CgkJCQkJalF1ZXJ5LmV2ZW50LAoKCQkJLy8gRGVmZXJyZWRzCgkJCWRlZmVycmVkID0galF1ZXJ5LkRlZmVycmVkKCksCgkJCWNvbXBsZXRlRGVmZXJyZWQgPSBqUXVlcnkuQ2FsbGJhY2tzKCAib25jZSBtZW1vcnkiICksCgoJCQkvLyBTdGF0dXMtZGVwZW5kZW50IGNhbGxiYWNrcwoJCQlzdGF0dXNDb2RlID0gcy5zdGF0dXNDb2RlIHx8IHt9LAoKCQkJLy8gSGVhZGVycyAodGhleSBhcmUgc2VudCBhbGwgYXQgb25jZSkKCQkJcmVxdWVzdEhlYWRlcnMgPSB7fSwKCQkJcmVxdWVzdEhlYWRlcnNOYW1lcyA9IHt9LAoKCQkJLy8gVGhlIGpxWEhSIHN0YXRlCgkJCXN0YXRlID0gMCwKCgkJCS8vIERlZmF1bHQgYWJvcnQgbWVzc2FnZQoJCQlzdHJBYm9ydCA9ICJjYW5jZWxlZCIsCgoJCQkvLyBGYWtlIHhocgoJCQlqcVhIUiA9IHsKCQkJCXJlYWR5U3RhdGU6IDAsCgoJCQkJLy8gQnVpbGRzIGhlYWRlcnMgaGFzaHRhYmxlIGlmIG5lZWRlZAoJCQkJZ2V0UmVzcG9uc2VIZWFkZXI6IGZ1bmN0aW9uKCBrZXkgKSB7CgkJCQkJdmFyIG1hdGNoOwoJCQkJCWlmICggc3RhdGUgPT09IDIgKSB7CgkJCQkJCWlmICggIXJlc3BvbnNlSGVhZGVycyApIHsKCQkJCQkJCXJlc3BvbnNlSGVhZGVycyA9IHt9OwoJCQkJCQkJd2hpbGUgKCAoIG1hdGNoID0gcmhlYWRlcnMuZXhlYyggcmVzcG9uc2VIZWFkZXJzU3RyaW5nICkgKSApIHsKCQkJCQkJCQlyZXNwb25zZUhlYWRlcnNbIG1hdGNoWyAxIF0udG9Mb3dlckNhc2UoKSBdID0gbWF0Y2hbIDIgXTsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCQltYXRjaCA9IHJlc3BvbnNlSGVhZGVyc1sga2V5LnRvTG93ZXJDYXNlKCkgXTsKCQkJCQl9CgkJCQkJcmV0dXJuIG1hdGNoID09IG51bGwgPyBudWxsIDogbWF0Y2g7CgkJCQl9LAoKCQkJCS8vIFJhdyBzdHJpbmcKCQkJCWdldEFsbFJlc3BvbnNlSGVhZGVyczogZnVuY3Rpb24oKSB7CgkJCQkJcmV0dXJuIHN0YXRlID09PSAyID8gcmVzcG9uc2VIZWFkZXJzU3RyaW5nIDogbnVsbDsKCQkJCX0sCgoJCQkJLy8gQ2FjaGVzIHRoZSBoZWFkZXIKCQkJCXNldFJlcXVlc3RIZWFkZXI6IGZ1bmN0aW9uKCBuYW1lLCB2YWx1ZSApIHsKCQkJCQl2YXIgbG5hbWUgPSBuYW1lLnRvTG93ZXJDYXNlKCk7CgkJCQkJaWYgKCAhc3RhdGUgKSB7CgkJCQkJCW5hbWUgPSByZXF1ZXN0SGVhZGVyc05hbWVzWyBsbmFtZSBdID0gcmVxdWVzdEhlYWRlcnNOYW1lc1sgbG5hbWUgXSB8fCBuYW1lOwoJCQkJCQlyZXF1ZXN0SGVhZGVyc1sgbmFtZSBdID0gdmFsdWU7CgkJCQkJfQoJCQkJCXJldHVybiB0aGlzOwoJCQkJfSwKCgkJCQkvLyBPdmVycmlkZXMgcmVzcG9uc2UgY29udGVudC10eXBlIGhlYWRlcgoJCQkJb3ZlcnJpZGVNaW1lVHlwZTogZnVuY3Rpb24oIHR5cGUgKSB7CgkJCQkJaWYgKCAhc3RhdGUgKSB7CgkJCQkJCXMubWltZVR5cGUgPSB0eXBlOwoJCQkJCX0KCQkJCQlyZXR1cm4gdGhpczsKCQkJCX0sCgoJCQkJLy8gU3RhdHVzLWRlcGVuZGVudCBjYWxsYmFja3MKCQkJCXN0YXR1c0NvZGU6IGZ1bmN0aW9uKCBtYXAgKSB7CgkJCQkJdmFyIGNvZGU7CgkJCQkJaWYgKCBtYXAgKSB7CgkJCQkJCWlmICggc3RhdGUgPCAyICkgewoJCQkJCQkJZm9yICggY29kZSBpbiBtYXAgKSB7CgoJCQkJCQkJCS8vIExhenktYWRkIHRoZSBuZXcgY2FsbGJhY2sgaW4gYSB3YXkgdGhhdCBwcmVzZXJ2ZXMgb2xkIG9uZXMKCQkJCQkJCQlzdGF0dXNDb2RlWyBjb2RlIF0gPSBbIHN0YXR1c0NvZGVbIGNvZGUgXSwgbWFwWyBjb2RlIF0gXTsKCQkJCQkJCX0KCQkJCQkJfSBlbHNlIHsKCgkJCQkJCQkvLyBFeGVjdXRlIHRoZSBhcHByb3ByaWF0ZSBjYWxsYmFja3MKCQkJCQkJCWpxWEhSLmFsd2F5cyggbWFwWyBqcVhIUi5zdGF0dXMgXSApOwoJCQkJCQl9CgkJCQkJfQoJCQkJCXJldHVybiB0aGlzOwoJCQkJfSwKCgkJCQkvLyBDYW5jZWwgdGhlIHJlcXVlc3QKCQkJCWFib3J0OiBmdW5jdGlvbiggc3RhdHVzVGV4dCApIHsKCQkJCQl2YXIgZmluYWxUZXh0ID0gc3RhdHVzVGV4dCB8fCBzdHJBYm9ydDsKCQkJCQlpZiAoIHRyYW5zcG9ydCApIHsKCQkJCQkJdHJhbnNwb3J0LmFib3J0KCBmaW5hbFRleHQgKTsKCQkJCQl9CgkJCQkJZG9uZSggMCwgZmluYWxUZXh0ICk7CgkJCQkJcmV0dXJuIHRoaXM7CgkJCQl9CgkJCX07CgoJCS8vIEF0dGFjaCBkZWZlcnJlZHMKCQlkZWZlcnJlZC5wcm9taXNlKCBqcVhIUiApLmNvbXBsZXRlID0gY29tcGxldGVEZWZlcnJlZC5hZGQ7CgkJanFYSFIuc3VjY2VzcyA9IGpxWEhSLmRvbmU7CgkJanFYSFIuZXJyb3IgPSBqcVhIUi5mYWlsOwoKCQkvLyBSZW1vdmUgaGFzaCBjaGFyYWN0ZXIgKCM3NTMxOiBhbmQgc3RyaW5nIHByb21vdGlvbikKCQkvLyBBZGQgcHJvdG9jb2wgaWYgbm90IHByb3ZpZGVkICgjNTg2NjogSUU3IGlzc3VlIHdpdGggcHJvdG9jb2wtbGVzcyB1cmxzKQoJCS8vIEhhbmRsZSBmYWxzeSB1cmwgaW4gdGhlIHNldHRpbmdzIG9iamVjdCAoIzEwMDkzOiBjb25zaXN0ZW5jeSB3aXRoIG9sZCBzaWduYXR1cmUpCgkJLy8gV2UgYWxzbyB1c2UgdGhlIHVybCBwYXJhbWV0ZXIgaWYgYXZhaWxhYmxlCgkJcy51cmwgPSAoICggdXJsIHx8IHMudXJsIHx8IGFqYXhMb2NhdGlvbiApICsgIiIgKQoJCQkucmVwbGFjZSggcmhhc2gsICIiICkKCQkJLnJlcGxhY2UoIHJwcm90b2NvbCwgYWpheExvY1BhcnRzWyAxIF0gKyAiLy8iICk7CgoJCS8vIEFsaWFzIG1ldGhvZCBvcHRpb24gdG8gdHlwZSBhcyBwZXIgdGlja2V0ICMxMjAwNAoJCXMudHlwZSA9IG9wdGlvbnMubWV0aG9kIHx8IG9wdGlvbnMudHlwZSB8fCBzLm1ldGhvZCB8fCBzLnR5cGU7CgoJCS8vIEV4dHJhY3QgZGF0YVR5cGVzIGxpc3QKCQlzLmRhdGFUeXBlcyA9IGpRdWVyeS50cmltKCBzLmRhdGFUeXBlIHx8ICIqIiApLnRvTG93ZXJDYXNlKCkubWF0Y2goIHJub3R3aGl0ZSApIHx8IFsgIiIgXTsKCgkJLy8gQSBjcm9zcy1kb21haW4gcmVxdWVzdCBpcyBpbiBvcmRlciB3aGVuIHdlIGhhdmUgYSBwcm90b2NvbDpob3N0OnBvcnQgbWlzbWF0Y2gKCQlpZiAoIHMuY3Jvc3NEb21haW4gPT0gbnVsbCApIHsKCQkJcGFydHMgPSBydXJsLmV4ZWMoIHMudXJsLnRvTG93ZXJDYXNlKCkgKTsKCQkJcy5jcm9zc0RvbWFpbiA9ICEhKCBwYXJ0cyAmJgoJCQkJKCBwYXJ0c1sgMSBdICE9PSBhamF4TG9jUGFydHNbIDEgXSB8fCBwYXJ0c1sgMiBdICE9PSBhamF4TG9jUGFydHNbIDIgXSB8fAoJCQkJCSggcGFydHNbIDMgXSB8fCAoIHBhcnRzWyAxIF0gPT09ICJodHRwOiIgPyAiODAiIDogIjQ0MyIgKSApICE9PQoJCQkJCQkoIGFqYXhMb2NQYXJ0c1sgMyBdIHx8ICggYWpheExvY1BhcnRzWyAxIF0gPT09ICJodHRwOiIgPyAiODAiIDogIjQ0MyIgKSApICkKCQkJKTsKCQl9CgoJCS8vIENvbnZlcnQgZGF0YSBpZiBub3QgYWxyZWFkeSBhIHN0cmluZwoJCWlmICggcy5kYXRhICYmIHMucHJvY2Vzc0RhdGEgJiYgdHlwZW9mIHMuZGF0YSAhPT0gInN0cmluZyIgKSB7CgkJCXMuZGF0YSA9IGpRdWVyeS5wYXJhbSggcy5kYXRhLCBzLnRyYWRpdGlvbmFsICk7CgkJfQoKCQkvLyBBcHBseSBwcmVmaWx0ZXJzCgkJaW5zcGVjdFByZWZpbHRlcnNPclRyYW5zcG9ydHMoIHByZWZpbHRlcnMsIHMsIG9wdGlvbnMsIGpxWEhSICk7CgoJCS8vIElmIHJlcXVlc3Qgd2FzIGFib3J0ZWQgaW5zaWRlIGEgcHJlZmlsdGVyLCBzdG9wIHRoZXJlCgkJaWYgKCBzdGF0ZSA9PT0gMiApIHsKCQkJcmV0dXJuIGpxWEhSOwoJCX0KCgkJLy8gV2UgY2FuIGZpcmUgZ2xvYmFsIGV2ZW50cyBhcyBvZiBub3cgaWYgYXNrZWQgdG8KCQkvLyBEb24ndCBmaXJlIGV2ZW50cyBpZiBqUXVlcnkuZXZlbnQgaXMgdW5kZWZpbmVkIGluIGFuIEFNRC11c2FnZSBzY2VuYXJpbyAoIzE1MTE4KQoJCWZpcmVHbG9iYWxzID0galF1ZXJ5LmV2ZW50ICYmIHMuZ2xvYmFsOwoKCQkvLyBXYXRjaCBmb3IgYSBuZXcgc2V0IG9mIHJlcXVlc3RzCgkJaWYgKCBmaXJlR2xvYmFscyAmJiBqUXVlcnkuYWN0aXZlKysgPT09IDAgKSB7CgkJCWpRdWVyeS5ldmVudC50cmlnZ2VyKCAiYWpheFN0YXJ0IiApOwoJCX0KCgkJLy8gVXBwZXJjYXNlIHRoZSB0eXBlCgkJcy50eXBlID0gcy50eXBlLnRvVXBwZXJDYXNlKCk7CgoJCS8vIERldGVybWluZSBpZiByZXF1ZXN0IGhhcyBjb250ZW50CgkJcy5oYXNDb250ZW50ID0gIXJub0NvbnRlbnQudGVzdCggcy50eXBlICk7CgoJCS8vIFNhdmUgdGhlIFVSTCBpbiBjYXNlIHdlJ3JlIHRveWluZyB3aXRoIHRoZSBJZi1Nb2RpZmllZC1TaW5jZQoJCS8vIGFuZC9vciBJZi1Ob25lLU1hdGNoIGhlYWRlciBsYXRlciBvbgoJCWNhY2hlVVJMID0gcy51cmw7CgoJCS8vIE1vcmUgb3B0aW9ucyBoYW5kbGluZyBmb3IgcmVxdWVzdHMgd2l0aCBubyBjb250ZW50CgkJaWYgKCAhcy5oYXNDb250ZW50ICkgewoKCQkJLy8gSWYgZGF0YSBpcyBhdmFpbGFibGUsIGFwcGVuZCBkYXRhIHRvIHVybAoJCQlpZiAoIHMuZGF0YSApIHsKCQkJCWNhY2hlVVJMID0gKCBzLnVybCArPSAoIHJxdWVyeS50ZXN0KCBjYWNoZVVSTCApID8gIiYiIDogIj8iICkgKyBzLmRhdGEgKTsKCgkJCQkvLyAjOTY4MjogcmVtb3ZlIGRhdGEgc28gdGhhdCBpdCdzIG5vdCB1c2VkIGluIGFuIGV2ZW50dWFsIHJldHJ5CgkJCQlkZWxldGUgcy5kYXRhOwoJCQl9CgoJCQkvLyBBZGQgYW50aS1jYWNoZSBpbiB1cmwgaWYgbmVlZGVkCgkJCWlmICggcy5jYWNoZSA9PT0gZmFsc2UgKSB7CgkJCQlzLnVybCA9IHJ0cy50ZXN0KCBjYWNoZVVSTCApID8KCgkJCQkJLy8gSWYgdGhlcmUgaXMgYWxyZWFkeSBhICdfJyBwYXJhbWV0ZXIsIHNldCBpdHMgdmFsdWUKCQkJCQljYWNoZVVSTC5yZXBsYWNlKCBydHMsICIkMV89IiArIG5vbmNlKysgKSA6CgoJCQkJCS8vIE90aGVyd2lzZSBhZGQgb25lIHRvIHRoZSBlbmQKCQkJCQljYWNoZVVSTCArICggcnF1ZXJ5LnRlc3QoIGNhY2hlVVJMICkgPyAiJiIgOiAiPyIgKSArICJfPSIgKyBub25jZSsrOwoJCQl9CgkJfQoKCQkvLyBTZXQgdGhlIElmLU1vZGlmaWVkLVNpbmNlIGFuZC9vciBJZi1Ob25lLU1hdGNoIGhlYWRlciwgaWYgaW4gaWZNb2RpZmllZCBtb2RlLgoJCWlmICggcy5pZk1vZGlmaWVkICkgewoJCQlpZiAoIGpRdWVyeS5sYXN0TW9kaWZpZWRbIGNhY2hlVVJMIF0gKSB7CgkJCQlqcVhIUi5zZXRSZXF1ZXN0SGVhZGVyKCAiSWYtTW9kaWZpZWQtU2luY2UiLCBqUXVlcnkubGFzdE1vZGlmaWVkWyBjYWNoZVVSTCBdICk7CgkJCX0KCQkJaWYgKCBqUXVlcnkuZXRhZ1sgY2FjaGVVUkwgXSApIHsKCQkJCWpxWEhSLnNldFJlcXVlc3RIZWFkZXIoICJJZi1Ob25lLU1hdGNoIiwgalF1ZXJ5LmV0YWdbIGNhY2hlVVJMIF0gKTsKCQkJfQoJCX0KCgkJLy8gU2V0IHRoZSBjb3JyZWN0IGhlYWRlciwgaWYgZGF0YSBpcyBiZWluZyBzZW50CgkJaWYgKCBzLmRhdGEgJiYgcy5oYXNDb250ZW50ICYmIHMuY29udGVudFR5cGUgIT09IGZhbHNlIHx8IG9wdGlvbnMuY29udGVudFR5cGUgKSB7CgkJCWpxWEhSLnNldFJlcXVlc3RIZWFkZXIoICJDb250ZW50LVR5cGUiLCBzLmNvbnRlbnRUeXBlICk7CgkJfQoKCQkvLyBTZXQgdGhlIEFjY2VwdHMgaGVhZGVyIGZvciB0aGUgc2VydmVyLCBkZXBlbmRpbmcgb24gdGhlIGRhdGFUeXBlCgkJanFYSFIuc2V0UmVxdWVzdEhlYWRlcigKCQkJIkFjY2VwdCIsCgkJCXMuZGF0YVR5cGVzWyAwIF0gJiYgcy5hY2NlcHRzWyBzLmRhdGFUeXBlc1sgMCBdIF0gPwoJCQkJcy5hY2NlcHRzWyBzLmRhdGFUeXBlc1sgMCBdIF0gKwoJCQkJCSggcy5kYXRhVHlwZXNbIDAgXSAhPT0gIioiID8gIiwgIiArIGFsbFR5cGVzICsgIjsgcT0wLjAxIiA6ICIiICkgOgoJCQkJcy5hY2NlcHRzWyAiKiIgXQoJCSk7CgoJCS8vIENoZWNrIGZvciBoZWFkZXJzIG9wdGlvbgoJCWZvciAoIGkgaW4gcy5oZWFkZXJzICkgewoJCQlqcVhIUi5zZXRSZXF1ZXN0SGVhZGVyKCBpLCBzLmhlYWRlcnNbIGkgXSApOwoJCX0KCgkJLy8gQWxsb3cgY3VzdG9tIGhlYWRlcnMvbWltZXR5cGVzIGFuZCBlYXJseSBhYm9ydAoJCWlmICggcy5iZWZvcmVTZW5kICYmCgkJCSggcy5iZWZvcmVTZW5kLmNhbGwoIGNhbGxiYWNrQ29udGV4dCwganFYSFIsIHMgKSA9PT0gZmFsc2UgfHwgc3RhdGUgPT09IDIgKSApIHsKCgkJCS8vIEFib3J0IGlmIG5vdCBkb25lIGFscmVhZHkgYW5kIHJldHVybgoJCQlyZXR1cm4ganFYSFIuYWJvcnQoKTsKCQl9CgoJCS8vIGFib3J0aW5nIGlzIG5vIGxvbmdlciBhIGNhbmNlbGxhdGlvbgoJCXN0ckFib3J0ID0gImFib3J0IjsKCgkJLy8gSW5zdGFsbCBjYWxsYmFja3Mgb24gZGVmZXJyZWRzCgkJZm9yICggaSBpbiB7IHN1Y2Nlc3M6IDEsIGVycm9yOiAxLCBjb21wbGV0ZTogMSB9ICkgewoJCQlqcVhIUlsgaSBdKCBzWyBpIF0gKTsKCQl9CgoJCS8vIEdldCB0cmFuc3BvcnQKCQl0cmFuc3BvcnQgPSBpbnNwZWN0UHJlZmlsdGVyc09yVHJhbnNwb3J0cyggdHJhbnNwb3J0cywgcywgb3B0aW9ucywganFYSFIgKTsKCgkJLy8gSWYgbm8gdHJhbnNwb3J0LCB3ZSBhdXRvLWFib3J0CgkJaWYgKCAhdHJhbnNwb3J0ICkgewoJCQlkb25lKCAtMSwgIk5vIFRyYW5zcG9ydCIgKTsKCQl9IGVsc2UgewoJCQlqcVhIUi5yZWFkeVN0YXRlID0gMTsKCgkJCS8vIFNlbmQgZ2xvYmFsIGV2ZW50CgkJCWlmICggZmlyZUdsb2JhbHMgKSB7CgkJCQlnbG9iYWxFdmVudENvbnRleHQudHJpZ2dlciggImFqYXhTZW5kIiwgWyBqcVhIUiwgcyBdICk7CgkJCX0KCgkJCS8vIElmIHJlcXVlc3Qgd2FzIGFib3J0ZWQgaW5zaWRlIGFqYXhTZW5kLCBzdG9wIHRoZXJlCgkJCWlmICggc3RhdGUgPT09IDIgKSB7CgkJCQlyZXR1cm4ganFYSFI7CgkJCX0KCgkJCS8vIFRpbWVvdXQKCQkJaWYgKCBzLmFzeW5jICYmIHMudGltZW91dCA+IDAgKSB7CgkJCQl0aW1lb3V0VGltZXIgPSB3aW5kb3cuc2V0VGltZW91dCggZnVuY3Rpb24oKSB7CgkJCQkJanFYSFIuYWJvcnQoICJ0aW1lb3V0IiApOwoJCQkJfSwgcy50aW1lb3V0ICk7CgkJCX0KCgkJCXRyeSB7CgkJCQlzdGF0ZSA9IDE7CgkJCQl0cmFuc3BvcnQuc2VuZCggcmVxdWVzdEhlYWRlcnMsIGRvbmUgKTsKCQkJfSBjYXRjaCAoIGUgKSB7CgoJCQkJLy8gUHJvcGFnYXRlIGV4Y2VwdGlvbiBhcyBlcnJvciBpZiBub3QgZG9uZQoJCQkJaWYgKCBzdGF0ZSA8IDIgKSB7CgkJCQkJZG9uZSggLTEsIGUgKTsKCgkJCQkvLyBTaW1wbHkgcmV0aHJvdyBvdGhlcndpc2UKCQkJCX0gZWxzZSB7CgkJCQkJdGhyb3cgZTsKCQkJCX0KCQkJfQoJCX0KCgkJLy8gQ2FsbGJhY2sgZm9yIHdoZW4gZXZlcnl0aGluZyBpcyBkb25lCgkJZnVuY3Rpb24gZG9uZSggc3RhdHVzLCBuYXRpdmVTdGF0dXNUZXh0LCByZXNwb25zZXMsIGhlYWRlcnMgKSB7CgkJCXZhciBpc1N1Y2Nlc3MsIHN1Y2Nlc3MsIGVycm9yLCByZXNwb25zZSwgbW9kaWZpZWQsCgkJCQlzdGF0dXNUZXh0ID0gbmF0aXZlU3RhdHVzVGV4dDsKCgkJCS8vIENhbGxlZCBvbmNlCgkJCWlmICggc3RhdGUgPT09IDIgKSB7CgkJCQlyZXR1cm47CgkJCX0KCgkJCS8vIFN0YXRlIGlzICJkb25lIiBub3cKCQkJc3RhdGUgPSAyOwoKCQkJLy8gQ2xlYXIgdGltZW91dCBpZiBpdCBleGlzdHMKCQkJaWYgKCB0aW1lb3V0VGltZXIgKSB7CgkJCQl3aW5kb3cuY2xlYXJUaW1lb3V0KCB0aW1lb3V0VGltZXIgKTsKCQkJfQoKCQkJLy8gRGVyZWZlcmVuY2UgdHJhbnNwb3J0IGZvciBlYXJseSBnYXJiYWdlIGNvbGxlY3Rpb24KCQkJLy8gKG5vIG1hdHRlciBob3cgbG9uZyB0aGUganFYSFIgb2JqZWN0IHdpbGwgYmUgdXNlZCkKCQkJdHJhbnNwb3J0ID0gdW5kZWZpbmVkOwoKCQkJLy8gQ2FjaGUgcmVzcG9uc2UgaGVhZGVycwoJCQlyZXNwb25zZUhlYWRlcnNTdHJpbmcgPSBoZWFkZXJzIHx8ICIiOwoKCQkJLy8gU2V0IHJlYWR5U3RhdGUKCQkJanFYSFIucmVhZHlTdGF0ZSA9IHN0YXR1cyA+IDAgPyA0IDogMDsKCgkJCS8vIERldGVybWluZSBpZiBzdWNjZXNzZnVsCgkJCWlzU3VjY2VzcyA9IHN0YXR1cyA+PSAyMDAgJiYgc3RhdHVzIDwgMzAwIHx8IHN0YXR1cyA9PT0gMzA0OwoKCQkJLy8gR2V0IHJlc3BvbnNlIGRhdGEKCQkJaWYgKCByZXNwb25zZXMgKSB7CgkJCQlyZXNwb25zZSA9IGFqYXhIYW5kbGVSZXNwb25zZXMoIHMsIGpxWEhSLCByZXNwb25zZXMgKTsKCQkJfQoKCQkJLy8gQ29udmVydCBubyBtYXR0ZXIgd2hhdCAodGhhdCB3YXkgcmVzcG9uc2VYWFggZmllbGRzIGFyZSBhbHdheXMgc2V0KQoJCQlyZXNwb25zZSA9IGFqYXhDb252ZXJ0KCBzLCByZXNwb25zZSwganFYSFIsIGlzU3VjY2VzcyApOwoKCQkJLy8gSWYgc3VjY2Vzc2Z1bCwgaGFuZGxlIHR5cGUgY2hhaW5pbmcKCQkJaWYgKCBpc1N1Y2Nlc3MgKSB7CgoJCQkJLy8gU2V0IHRoZSBJZi1Nb2RpZmllZC1TaW5jZSBhbmQvb3IgSWYtTm9uZS1NYXRjaCBoZWFkZXIsIGlmIGluIGlmTW9kaWZpZWQgbW9kZS4KCQkJCWlmICggcy5pZk1vZGlmaWVkICkgewoJCQkJCW1vZGlmaWVkID0ganFYSFIuZ2V0UmVzcG9uc2VIZWFkZXIoICJMYXN0LU1vZGlmaWVkIiApOwoJCQkJCWlmICggbW9kaWZpZWQgKSB7CgkJCQkJCWpRdWVyeS5sYXN0TW9kaWZpZWRbIGNhY2hlVVJMIF0gPSBtb2RpZmllZDsKCQkJCQl9CgkJCQkJbW9kaWZpZWQgPSBqcVhIUi5nZXRSZXNwb25zZUhlYWRlciggImV0YWciICk7CgkJCQkJaWYgKCBtb2RpZmllZCApIHsKCQkJCQkJalF1ZXJ5LmV0YWdbIGNhY2hlVVJMIF0gPSBtb2RpZmllZDsKCQkJCQl9CgkJCQl9CgoJCQkJLy8gaWYgbm8gY29udGVudAoJCQkJaWYgKCBzdGF0dXMgPT09IDIwNCB8fCBzLnR5cGUgPT09ICJIRUFEIiApIHsKCQkJCQlzdGF0dXNUZXh0ID0gIm5vY29udGVudCI7CgoJCQkJLy8gaWYgbm90IG1vZGlmaWVkCgkJCQl9IGVsc2UgaWYgKCBzdGF0dXMgPT09IDMwNCApIHsKCQkJCQlzdGF0dXNUZXh0ID0gIm5vdG1vZGlmaWVkIjsKCgkJCQkvLyBJZiB3ZSBoYXZlIGRhdGEsIGxldCdzIGNvbnZlcnQgaXQKCQkJCX0gZWxzZSB7CgkJCQkJc3RhdHVzVGV4dCA9IHJlc3BvbnNlLnN0YXRlOwoJCQkJCXN1Y2Nlc3MgPSByZXNwb25zZS5kYXRhOwoJCQkJCWVycm9yID0gcmVzcG9uc2UuZXJyb3I7CgkJCQkJaXNTdWNjZXNzID0gIWVycm9yOwoJCQkJfQoJCQl9IGVsc2UgewoKCQkJCS8vIFdlIGV4dHJhY3QgZXJyb3IgZnJvbSBzdGF0dXNUZXh0CgkJCQkvLyB0aGVuIG5vcm1hbGl6ZSBzdGF0dXNUZXh0IGFuZCBzdGF0dXMgZm9yIG5vbi1hYm9ydHMKCQkJCWVycm9yID0gc3RhdHVzVGV4dDsKCQkJCWlmICggc3RhdHVzIHx8ICFzdGF0dXNUZXh0ICkgewoJCQkJCXN0YXR1c1RleHQgPSAiZXJyb3IiOwoJCQkJCWlmICggc3RhdHVzIDwgMCApIHsKCQkJCQkJc3RhdHVzID0gMDsKCQkJCQl9CgkJCQl9CgkJCX0KCgkJCS8vIFNldCBkYXRhIGZvciB0aGUgZmFrZSB4aHIgb2JqZWN0CgkJCWpxWEhSLnN0YXR1cyA9IHN0YXR1czsKCQkJanFYSFIuc3RhdHVzVGV4dCA9ICggbmF0aXZlU3RhdHVzVGV4dCB8fCBzdGF0dXNUZXh0ICkgKyAiIjsKCgkJCS8vIFN1Y2Nlc3MvRXJyb3IKCQkJaWYgKCBpc1N1Y2Nlc3MgKSB7CgkJCQlkZWZlcnJlZC5yZXNvbHZlV2l0aCggY2FsbGJhY2tDb250ZXh0LCBbIHN1Y2Nlc3MsIHN0YXR1c1RleHQsIGpxWEhSIF0gKTsKCQkJfSBlbHNlIHsKCQkJCWRlZmVycmVkLnJlamVjdFdpdGgoIGNhbGxiYWNrQ29udGV4dCwgWyBqcVhIUiwgc3RhdHVzVGV4dCwgZXJyb3IgXSApOwoJCQl9CgoJCQkvLyBTdGF0dXMtZGVwZW5kZW50IGNhbGxiYWNrcwoJCQlqcVhIUi5zdGF0dXNDb2RlKCBzdGF0dXNDb2RlICk7CgkJCXN0YXR1c0NvZGUgPSB1bmRlZmluZWQ7CgoJCQlpZiAoIGZpcmVHbG9iYWxzICkgewoJCQkJZ2xvYmFsRXZlbnRDb250ZXh0LnRyaWdnZXIoIGlzU3VjY2VzcyA/ICJhamF4U3VjY2VzcyIgOiAiYWpheEVycm9yIiwKCQkJCQlbIGpxWEhSLCBzLCBpc1N1Y2Nlc3MgPyBzdWNjZXNzIDogZXJyb3IgXSApOwoJCQl9CgoJCQkvLyBDb21wbGV0ZQoJCQljb21wbGV0ZURlZmVycmVkLmZpcmVXaXRoKCBjYWxsYmFja0NvbnRleHQsIFsganFYSFIsIHN0YXR1c1RleHQgXSApOwoKCQkJaWYgKCBmaXJlR2xvYmFscyApIHsKCQkJCWdsb2JhbEV2ZW50Q29udGV4dC50cmlnZ2VyKCAiYWpheENvbXBsZXRlIiwgWyBqcVhIUiwgcyBdICk7CgoJCQkJLy8gSGFuZGxlIHRoZSBnbG9iYWwgQUpBWCBjb3VudGVyCgkJCQlpZiAoICEoIC0talF1ZXJ5LmFjdGl2ZSApICkgewoJCQkJCWpRdWVyeS5ldmVudC50cmlnZ2VyKCAiYWpheFN0b3AiICk7CgkJCQl9CgkJCX0KCQl9CgoJCXJldHVybiBqcVhIUjsKCX0sCgoJZ2V0SlNPTjogZnVuY3Rpb24oIHVybCwgZGF0YSwgY2FsbGJhY2sgKSB7CgkJcmV0dXJuIGpRdWVyeS5nZXQoIHVybCwgZGF0YSwgY2FsbGJhY2ssICJqc29uIiApOwoJfSwKCglnZXRTY3JpcHQ6IGZ1bmN0aW9uKCB1cmwsIGNhbGxiYWNrICkgewoJCXJldHVybiBqUXVlcnkuZ2V0KCB1cmwsIHVuZGVmaW5lZCwgY2FsbGJhY2ssICJzY3JpcHQiICk7Cgl9Cn0gKTsKCmpRdWVyeS5lYWNoKCBbICJnZXQiLCAicG9zdCIgXSwgZnVuY3Rpb24oIGksIG1ldGhvZCApIHsKCWpRdWVyeVsgbWV0aG9kIF0gPSBmdW5jdGlvbiggdXJsLCBkYXRhLCBjYWxsYmFjaywgdHlwZSApIHsKCgkJLy8gc2hpZnQgYXJndW1lbnRzIGlmIGRhdGEgYXJndW1lbnQgd2FzIG9taXR0ZWQKCQlpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBkYXRhICkgKSB7CgkJCXR5cGUgPSB0eXBlIHx8IGNhbGxiYWNrOwoJCQljYWxsYmFjayA9IGRhdGE7CgkJCWRhdGEgPSB1bmRlZmluZWQ7CgkJfQoKCQkvLyBUaGUgdXJsIGNhbiBiZSBhbiBvcHRpb25zIG9iamVjdCAod2hpY2ggdGhlbiBtdXN0IGhhdmUgLnVybCkKCQlyZXR1cm4galF1ZXJ5LmFqYXgoIGpRdWVyeS5leHRlbmQoIHsKCQkJdXJsOiB1cmwsCgkJCXR5cGU6IG1ldGhvZCwKCQkJZGF0YVR5cGU6IHR5cGUsCgkJCWRhdGE6IGRhdGEsCgkJCXN1Y2Nlc3M6IGNhbGxiYWNrCgkJfSwgalF1ZXJ5LmlzUGxhaW5PYmplY3QoIHVybCApICYmIHVybCApICk7Cgl9Owp9ICk7CgoKalF1ZXJ5Ll9ldmFsVXJsID0gZnVuY3Rpb24oIHVybCApIHsKCXJldHVybiBqUXVlcnkuYWpheCggewoJCXVybDogdXJsLAoKCQkvLyBNYWtlIHRoaXMgZXhwbGljaXQsIHNpbmNlIHVzZXIgY2FuIG92ZXJyaWRlIHRoaXMgdGhyb3VnaCBhamF4U2V0dXAgKCMxMTI2NCkKCQl0eXBlOiAiR0VUIiwKCQlkYXRhVHlwZTogInNjcmlwdCIsCgkJY2FjaGU6IHRydWUsCgkJYXN5bmM6IGZhbHNlLAoJCWdsb2JhbDogZmFsc2UsCgkJInRocm93cyI6IHRydWUKCX0gKTsKfTsKCgpqUXVlcnkuZm4uZXh0ZW5kKCB7Cgl3cmFwQWxsOiBmdW5jdGlvbiggaHRtbCApIHsKCQlpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBodG1sICkgKSB7CgkJCXJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCBpICkgewoJCQkJalF1ZXJ5KCB0aGlzICkud3JhcEFsbCggaHRtbC5jYWxsKCB0aGlzLCBpICkgKTsKCQkJfSApOwoJCX0KCgkJaWYgKCB0aGlzWyAwIF0gKSB7CgoJCQkvLyBUaGUgZWxlbWVudHMgdG8gd3JhcCB0aGUgdGFyZ2V0IGFyb3VuZAoJCQl2YXIgd3JhcCA9IGpRdWVyeSggaHRtbCwgdGhpc1sgMCBdLm93bmVyRG9jdW1lbnQgKS5lcSggMCApLmNsb25lKCB0cnVlICk7CgoJCQlpZiAoIHRoaXNbIDAgXS5wYXJlbnROb2RlICkgewoJCQkJd3JhcC5pbnNlcnRCZWZvcmUoIHRoaXNbIDAgXSApOwoJCQl9CgoJCQl3cmFwLm1hcCggZnVuY3Rpb24oKSB7CgkJCQl2YXIgZWxlbSA9IHRoaXM7CgoJCQkJd2hpbGUgKCBlbGVtLmZpcnN0Q2hpbGQgJiYgZWxlbS5maXJzdENoaWxkLm5vZGVUeXBlID09PSAxICkgewoJCQkJCWVsZW0gPSBlbGVtLmZpcnN0Q2hpbGQ7CgkJCQl9CgoJCQkJcmV0dXJuIGVsZW07CgkJCX0gKS5hcHBlbmQoIHRoaXMgKTsKCQl9CgoJCXJldHVybiB0aGlzOwoJfSwKCgl3cmFwSW5uZXI6IGZ1bmN0aW9uKCBodG1sICkgewoJCWlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIGh0bWwgKSApIHsKCQkJcmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oIGkgKSB7CgkJCQlqUXVlcnkoIHRoaXMgKS53cmFwSW5uZXIoIGh0bWwuY2FsbCggdGhpcywgaSApICk7CgkJCX0gKTsKCQl9CgoJCXJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkgewoJCQl2YXIgc2VsZiA9IGpRdWVyeSggdGhpcyApLAoJCQkJY29udGVudHMgPSBzZWxmLmNvbnRlbnRzKCk7CgoJCQlpZiAoIGNvbnRlbnRzLmxlbmd0aCApIHsKCQkJCWNvbnRlbnRzLndyYXBBbGwoIGh0bWwgKTsKCgkJCX0gZWxzZSB7CgkJCQlzZWxmLmFwcGVuZCggaHRtbCApOwoJCQl9CgkJfSApOwoJfSwKCgl3cmFwOiBmdW5jdGlvbiggaHRtbCApIHsKCQl2YXIgaXNGdW5jdGlvbiA9IGpRdWVyeS5pc0Z1bmN0aW9uKCBodG1sICk7CgoJCXJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCBpICkgewoJCQlqUXVlcnkoIHRoaXMgKS53cmFwQWxsKCBpc0Z1bmN0aW9uID8gaHRtbC5jYWxsKCB0aGlzLCBpICkgOiBodG1sICk7CgkJfSApOwoJfSwKCgl1bndyYXA6IGZ1bmN0aW9uKCkgewoJCXJldHVybiB0aGlzLnBhcmVudCgpLmVhY2goIGZ1bmN0aW9uKCkgewoJCQlpZiAoICFqUXVlcnkubm9kZU5hbWUoIHRoaXMsICJib2R5IiApICkgewoJCQkJalF1ZXJ5KCB0aGlzICkucmVwbGFjZVdpdGgoIHRoaXMuY2hpbGROb2RlcyApOwoJCQl9CgkJfSApLmVuZCgpOwoJfQp9ICk7CgoKZnVuY3Rpb24gZ2V0RGlzcGxheSggZWxlbSApIHsKCXJldHVybiBlbGVtLnN0eWxlICYmIGVsZW0uc3R5bGUuZGlzcGxheSB8fCBqUXVlcnkuY3NzKCBlbGVtLCAiZGlzcGxheSIgKTsKfQoKZnVuY3Rpb24gZmlsdGVySGlkZGVuKCBlbGVtICkgewoKCS8vIERpc2Nvbm5lY3RlZCBlbGVtZW50cyBhcmUgY29uc2lkZXJlZCBoaWRkZW4KCWlmICggIWpRdWVyeS5jb250YWlucyggZWxlbS5vd25lckRvY3VtZW50IHx8IGRvY3VtZW50LCBlbGVtICkgKSB7CgkJcmV0dXJuIHRydWU7Cgl9Cgl3aGlsZSAoIGVsZW0gJiYgZWxlbS5ub2RlVHlwZSA9PT0gMSApIHsKCQlpZiAoIGdldERpc3BsYXkoIGVsZW0gKSA9PT0gIm5vbmUiIHx8IGVsZW0udHlwZSA9PT0gImhpZGRlbiIgKSB7CgkJCXJldHVybiB0cnVlOwoJCX0KCQllbGVtID0gZWxlbS5wYXJlbnROb2RlOwoJfQoJcmV0dXJuIGZhbHNlOwp9CgpqUXVlcnkuZXhwci5maWx0ZXJzLmhpZGRlbiA9IGZ1bmN0aW9uKCBlbGVtICkgewoKCS8vIFN1cHBvcnQ6IE9wZXJhIDw9IDEyLjEyCgkvLyBPcGVyYSByZXBvcnRzIG9mZnNldFdpZHRocyBhbmQgb2Zmc2V0SGVpZ2h0cyBsZXNzIHRoYW4gemVybyBvbiBzb21lIGVsZW1lbnRzCglyZXR1cm4gc3VwcG9ydC5yZWxpYWJsZUhpZGRlbk9mZnNldHMoKSA/CgkJKCBlbGVtLm9mZnNldFdpZHRoIDw9IDAgJiYgZWxlbS5vZmZzZXRIZWlnaHQgPD0gMCAmJgoJCQkhZWxlbS5nZXRDbGllbnRSZWN0cygpLmxlbmd0aCApIDoKCQkJZmlsdGVySGlkZGVuKCBlbGVtICk7Cn07CgpqUXVlcnkuZXhwci5maWx0ZXJzLnZpc2libGUgPSBmdW5jdGlvbiggZWxlbSApIHsKCXJldHVybiAhalF1ZXJ5LmV4cHIuZmlsdGVycy5oaWRkZW4oIGVsZW0gKTsKfTsKCgoKCnZhciByMjAgPSAvJTIwL2csCglyYnJhY2tldCA9IC9cW1xdJC8sCglyQ1JMRiA9IC9ccj9cbi9nLAoJcnN1Ym1pdHRlclR5cGVzID0gL14oPzpzdWJtaXR8YnV0dG9ufGltYWdlfHJlc2V0fGZpbGUpJC9pLAoJcnN1Ym1pdHRhYmxlID0gL14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8a2V5Z2VuKS9pOwoKZnVuY3Rpb24gYnVpbGRQYXJhbXMoIHByZWZpeCwgb2JqLCB0cmFkaXRpb25hbCwgYWRkICkgewoJdmFyIG5hbWU7CgoJaWYgKCBqUXVlcnkuaXNBcnJheSggb2JqICkgKSB7CgoJCS8vIFNlcmlhbGl6ZSBhcnJheSBpdGVtLgoJCWpRdWVyeS5lYWNoKCBvYmosIGZ1bmN0aW9uKCBpLCB2ICkgewoJCQlpZiAoIHRyYWRpdGlvbmFsIHx8IHJicmFja2V0LnRlc3QoIHByZWZpeCApICkgewoKCQkJCS8vIFRyZWF0IGVhY2ggYXJyYXkgaXRlbSBhcyBhIHNjYWxhci4KCQkJCWFkZCggcHJlZml4LCB2ICk7CgoJCQl9IGVsc2UgewoKCQkJCS8vIEl0ZW0gaXMgbm9uLXNjYWxhciAoYXJyYXkgb3Igb2JqZWN0KSwgZW5jb2RlIGl0cyBudW1lcmljIGluZGV4LgoJCQkJYnVpbGRQYXJhbXMoCgkJCQkJcHJlZml4ICsgIlsiICsgKCB0eXBlb2YgdiA9PT0gIm9iamVjdCIgJiYgdiAhPSBudWxsID8gaSA6ICIiICkgKyAiXSIsCgkJCQkJdiwKCQkJCQl0cmFkaXRpb25hbCwKCQkJCQlhZGQKCQkJCSk7CgkJCX0KCQl9ICk7CgoJfSBlbHNlIGlmICggIXRyYWRpdGlvbmFsICYmIGpRdWVyeS50eXBlKCBvYmogKSA9PT0gIm9iamVjdCIgKSB7CgoJCS8vIFNlcmlhbGl6ZSBvYmplY3QgaXRlbS4KCQlmb3IgKCBuYW1lIGluIG9iaiApIHsKCQkJYnVpbGRQYXJhbXMoIHByZWZpeCArICJbIiArIG5hbWUgKyAiXSIsIG9ialsgbmFtZSBdLCB0cmFkaXRpb25hbCwgYWRkICk7CgkJfQoKCX0gZWxzZSB7CgoJCS8vIFNlcmlhbGl6ZSBzY2FsYXIgaXRlbS4KCQlhZGQoIHByZWZpeCwgb2JqICk7Cgl9Cn0KCi8vIFNlcmlhbGl6ZSBhbiBhcnJheSBvZiBmb3JtIGVsZW1lbnRzIG9yIGEgc2V0IG9mCi8vIGtleS92YWx1ZXMgaW50byBhIHF1ZXJ5IHN0cmluZwpqUXVlcnkucGFyYW0gPSBmdW5jdGlvbiggYSwgdHJhZGl0aW9uYWwgKSB7Cgl2YXIgcHJlZml4LAoJCXMgPSBbXSwKCQlhZGQgPSBmdW5jdGlvbigga2V5LCB2YWx1ZSApIHsKCgkJCS8vIElmIHZhbHVlIGlzIGEgZnVuY3Rpb24sIGludm9rZSBpdCBhbmQgcmV0dXJuIGl0cyB2YWx1ZQoJCQl2YWx1ZSA9IGpRdWVyeS5pc0Z1bmN0aW9uKCB2YWx1ZSApID8gdmFsdWUoKSA6ICggdmFsdWUgPT0gbnVsbCA/ICIiIDogdmFsdWUgKTsKCQkJc1sgcy5sZW5ndGggXSA9IGVuY29kZVVSSUNvbXBvbmVudCgga2V5ICkgKyAiPSIgKyBlbmNvZGVVUklDb21wb25lbnQoIHZhbHVlICk7CgkJfTsKCgkvLyBTZXQgdHJhZGl0aW9uYWwgdG8gdHJ1ZSBmb3IgalF1ZXJ5IDw9IDEuMy4yIGJlaGF2aW9yLgoJaWYgKCB0cmFkaXRpb25hbCA9PT0gdW5kZWZpbmVkICkgewoJCXRyYWRpdGlvbmFsID0galF1ZXJ5LmFqYXhTZXR0aW5ncyAmJiBqUXVlcnkuYWpheFNldHRpbmdzLnRyYWRpdGlvbmFsOwoJfQoKCS8vIElmIGFuIGFycmF5IHdhcyBwYXNzZWQgaW4sIGFzc3VtZSB0aGF0IGl0IGlzIGFuIGFycmF5IG9mIGZvcm0gZWxlbWVudHMuCglpZiAoIGpRdWVyeS5pc0FycmF5KCBhICkgfHwgKCBhLmpxdWVyeSAmJiAhalF1ZXJ5LmlzUGxhaW5PYmplY3QoIGEgKSApICkgewoKCQkvLyBTZXJpYWxpemUgdGhlIGZvcm0gZWxlbWVudHMKCQlqUXVlcnkuZWFjaCggYSwgZnVuY3Rpb24oKSB7CgkJCWFkZCggdGhpcy5uYW1lLCB0aGlzLnZhbHVlICk7CgkJfSApOwoKCX0gZWxzZSB7CgoJCS8vIElmIHRyYWRpdGlvbmFsLCBlbmNvZGUgdGhlICJvbGQiIHdheSAodGhlIHdheSAxLjMuMiBvciBvbGRlcgoJCS8vIGRpZCBpdCksIG90aGVyd2lzZSBlbmNvZGUgcGFyYW1zIHJlY3Vyc2l2ZWx5LgoJCWZvciAoIHByZWZpeCBpbiBhICkgewoJCQlidWlsZFBhcmFtcyggcHJlZml4LCBhWyBwcmVmaXggXSwgdHJhZGl0aW9uYWwsIGFkZCApOwoJCX0KCX0KCgkvLyBSZXR1cm4gdGhlIHJlc3VsdGluZyBzZXJpYWxpemF0aW9uCglyZXR1cm4gcy5qb2luKCAiJiIgKS5yZXBsYWNlKCByMjAsICIrIiApOwp9OwoKalF1ZXJ5LmZuLmV4dGVuZCggewoJc2VyaWFsaXplOiBmdW5jdGlvbigpIHsKCQlyZXR1cm4galF1ZXJ5LnBhcmFtKCB0aGlzLnNlcmlhbGl6ZUFycmF5KCkgKTsKCX0sCglzZXJpYWxpemVBcnJheTogZnVuY3Rpb24oKSB7CgkJcmV0dXJuIHRoaXMubWFwKCBmdW5jdGlvbigpIHsKCgkJCS8vIENhbiBhZGQgcHJvcEhvb2sgZm9yICJlbGVtZW50cyIgdG8gZmlsdGVyIG9yIGFkZCBmb3JtIGVsZW1lbnRzCgkJCXZhciBlbGVtZW50cyA9IGpRdWVyeS5wcm9wKCB0aGlzLCAiZWxlbWVudHMiICk7CgkJCXJldHVybiBlbGVtZW50cyA/IGpRdWVyeS5tYWtlQXJyYXkoIGVsZW1lbnRzICkgOiB0aGlzOwoJCX0gKQoJCS5maWx0ZXIoIGZ1bmN0aW9uKCkgewoJCQl2YXIgdHlwZSA9IHRoaXMudHlwZTsKCgkJCS8vIFVzZSAuaXMoIjpkaXNhYmxlZCIpIHNvIHRoYXQgZmllbGRzZXRbZGlzYWJsZWRdIHdvcmtzCgkJCXJldHVybiB0aGlzLm5hbWUgJiYgIWpRdWVyeSggdGhpcyApLmlzKCAiOmRpc2FibGVkIiApICYmCgkJCQlyc3VibWl0dGFibGUudGVzdCggdGhpcy5ub2RlTmFtZSApICYmICFyc3VibWl0dGVyVHlwZXMudGVzdCggdHlwZSApICYmCgkJCQkoIHRoaXMuY2hlY2tlZCB8fCAhcmNoZWNrYWJsZVR5cGUudGVzdCggdHlwZSApICk7CgkJfSApCgkJLm1hcCggZnVuY3Rpb24oIGksIGVsZW0gKSB7CgkJCXZhciB2YWwgPSBqUXVlcnkoIHRoaXMgKS52YWwoKTsKCgkJCXJldHVybiB2YWwgPT0gbnVsbCA/CgkJCQludWxsIDoKCQkJCWpRdWVyeS5pc0FycmF5KCB2YWwgKSA/CgkJCQkJalF1ZXJ5Lm1hcCggdmFsLCBmdW5jdGlvbiggdmFsICkgewoJCQkJCQlyZXR1cm4geyBuYW1lOiBlbGVtLm5hbWUsIHZhbHVlOiB2YWwucmVwbGFjZSggckNSTEYsICJcclxuIiApIH07CgkJCQkJfSApIDoKCQkJCQl7IG5hbWU6IGVsZW0ubmFtZSwgdmFsdWU6IHZhbC5yZXBsYWNlKCByQ1JMRiwgIlxyXG4iICkgfTsKCQl9ICkuZ2V0KCk7Cgl9Cn0gKTsKCgovLyBDcmVhdGUgdGhlIHJlcXVlc3Qgb2JqZWN0Ci8vIChUaGlzIGlzIHN0aWxsIGF0dGFjaGVkIHRvIGFqYXhTZXR0aW5ncyBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eSkKalF1ZXJ5LmFqYXhTZXR0aW5ncy54aHIgPSB3aW5kb3cuQWN0aXZlWE9iamVjdCAhPT0gdW5kZWZpbmVkID8KCgkvLyBTdXBwb3J0OiBJRTYtSUU4CglmdW5jdGlvbigpIHsKCgkJLy8gWEhSIGNhbm5vdCBhY2Nlc3MgbG9jYWwgZmlsZXMsIGFsd2F5cyB1c2UgQWN0aXZlWCBmb3IgdGhhdCBjYXNlCgkJaWYgKCB0aGlzLmlzTG9jYWwgKSB7CgkJCXJldHVybiBjcmVhdGVBY3RpdmVYSFIoKTsKCQl9CgoJCS8vIFN1cHBvcnQ6IElFIDktMTEKCQkvLyBJRSBzZWVtcyB0byBlcnJvciBvbiBjcm9zcy1kb21haW4gUEFUQ0ggcmVxdWVzdHMgd2hlbiBBY3RpdmVYIFhIUgoJCS8vIGlzIHVzZWQuIEluIElFIDkrIGFsd2F5cyB1c2UgdGhlIG5hdGl2ZSBYSFIuCgkJLy8gTm90ZTogdGhpcyBjb25kaXRpb24gd29uJ3QgY2F0Y2ggRWRnZSBhcyBpdCBkb2Vzbid0IGRlZmluZQoJCS8vIGRvY3VtZW50LmRvY3VtZW50TW9kZSBidXQgaXQgYWxzbyBkb2Vzbid0IHN1cHBvcnQgQWN0aXZlWCBzbyBpdCB3b24ndAoJCS8vIHJlYWNoIHRoaXMgY29kZS4KCQlpZiAoIGRvY3VtZW50LmRvY3VtZW50TW9kZSA+IDggKSB7CgkJCXJldHVybiBjcmVhdGVTdGFuZGFyZFhIUigpOwoJCX0KCgkJLy8gU3VwcG9ydDogSUU8OQoJCS8vIG9sZElFIFhIUiBkb2VzIG5vdCBzdXBwb3J0IG5vbi1SRkMyNjE2IG1ldGhvZHMgKCMxMzI0MCkKCQkvLyBTZWUgaHR0cDovL21zZG4ubWljcm9zb2Z0LmNvbS9lbi11cy9saWJyYXJ5L2llL21zNTM2NjQ4KHY9dnMuODUpLmFzcHgKCQkvLyBhbmQgaHR0cDovL3d3dy53My5vcmcvUHJvdG9jb2xzL3JmYzI2MTYvcmZjMjYxNi1zZWM5Lmh0bWwjc2VjOQoJCS8vIEFsdGhvdWdoIHRoaXMgY2hlY2sgZm9yIHNpeCBtZXRob2RzIGluc3RlYWQgb2YgZWlnaHQKCQkvLyBzaW5jZSBJRSBhbHNvIGRvZXMgbm90IHN1cHBvcnQgInRyYWNlIiBhbmQgImNvbm5lY3QiCgkJcmV0dXJuIC9eKGdldHxwb3N0fGhlYWR8cHV0fGRlbGV0ZXxvcHRpb25zKSQvaS50ZXN0KCB0aGlzLnR5cGUgKSAmJgoJCQljcmVhdGVTdGFuZGFyZFhIUigpIHx8IGNyZWF0ZUFjdGl2ZVhIUigpOwoJfSA6CgoJLy8gRm9yIGFsbCBvdGhlciBicm93c2VycywgdXNlIHRoZSBzdGFuZGFyZCBYTUxIdHRwUmVxdWVzdCBvYmplY3QKCWNyZWF0ZVN0YW5kYXJkWEhSOwoKdmFyIHhocklkID0gMCwKCXhockNhbGxiYWNrcyA9IHt9LAoJeGhyU3VwcG9ydGVkID0galF1ZXJ5LmFqYXhTZXR0aW5ncy54aHIoKTsKCi8vIFN1cHBvcnQ6IElFPDEwCi8vIE9wZW4gcmVxdWVzdHMgbXVzdCBiZSBtYW51YWxseSBhYm9ydGVkIG9uIHVubG9hZCAoIzUyODApCi8vIFNlZSBodHRwczovL3N1cHBvcnQubWljcm9zb2Z0LmNvbS9rYi8yODU2NzQ2IGZvciBtb3JlIGluZm8KaWYgKCB3aW5kb3cuYXR0YWNoRXZlbnQgKSB7Cgl3aW5kb3cuYXR0YWNoRXZlbnQoICJvbnVubG9hZCIsIGZ1bmN0aW9uKCkgewoJCWZvciAoIHZhciBrZXkgaW4geGhyQ2FsbGJhY2tzICkgewoJCQl4aHJDYWxsYmFja3NbIGtleSBdKCB1bmRlZmluZWQsIHRydWUgKTsKCQl9Cgl9ICk7Cn0KCi8vIERldGVybWluZSBzdXBwb3J0IHByb3BlcnRpZXMKc3VwcG9ydC5jb3JzID0gISF4aHJTdXBwb3J0ZWQgJiYgKCAid2l0aENyZWRlbnRpYWxzIiBpbiB4aHJTdXBwb3J0ZWQgKTsKeGhyU3VwcG9ydGVkID0gc3VwcG9ydC5hamF4ID0gISF4aHJTdXBwb3J0ZWQ7CgovLyBDcmVhdGUgdHJhbnNwb3J0IGlmIHRoZSBicm93c2VyIGNhbiBwcm92aWRlIGFuIHhocgppZiAoIHhoclN1cHBvcnRlZCApIHsKCglqUXVlcnkuYWpheFRyYW5zcG9ydCggZnVuY3Rpb24oIG9wdGlvbnMgKSB7CgoJCS8vIENyb3NzIGRvbWFpbiBvbmx5IGFsbG93ZWQgaWYgc3VwcG9ydGVkIHRocm91Z2ggWE1MSHR0cFJlcXVlc3QKCQlpZiAoICFvcHRpb25zLmNyb3NzRG9tYWluIHx8IHN1cHBvcnQuY29ycyApIHsKCgkJCXZhciBjYWxsYmFjazsKCgkJCXJldHVybiB7CgkJCQlzZW5kOiBmdW5jdGlvbiggaGVhZGVycywgY29tcGxldGUgKSB7CgkJCQkJdmFyIGksCgkJCQkJCXhociA9IG9wdGlvbnMueGhyKCksCgkJCQkJCWlkID0gKyt4aHJJZDsKCgkJCQkJLy8gT3BlbiB0aGUgc29ja2V0CgkJCQkJeGhyLm9wZW4oCgkJCQkJCW9wdGlvbnMudHlwZSwKCQkJCQkJb3B0aW9ucy51cmwsCgkJCQkJCW9wdGlvbnMuYXN5bmMsCgkJCQkJCW9wdGlvbnMudXNlcm5hbWUsCgkJCQkJCW9wdGlvbnMucGFzc3dvcmQKCQkJCQkpOwoKCQkJCQkvLyBBcHBseSBjdXN0b20gZmllbGRzIGlmIHByb3ZpZGVkCgkJCQkJaWYgKCBvcHRpb25zLnhockZpZWxkcyApIHsKCQkJCQkJZm9yICggaSBpbiBvcHRpb25zLnhockZpZWxkcyApIHsKCQkJCQkJCXhoclsgaSBdID0gb3B0aW9ucy54aHJGaWVsZHNbIGkgXTsKCQkJCQkJfQoJCQkJCX0KCgkJCQkJLy8gT3ZlcnJpZGUgbWltZSB0eXBlIGlmIG5lZWRlZAoJCQkJCWlmICggb3B0aW9ucy5taW1lVHlwZSAmJiB4aHIub3ZlcnJpZGVNaW1lVHlwZSApIHsKCQkJCQkJeGhyLm92ZXJyaWRlTWltZVR5cGUoIG9wdGlvbnMubWltZVR5cGUgKTsKCQkJCQl9CgoJCQkJCS8vIFgtUmVxdWVzdGVkLVdpdGggaGVhZGVyCgkJCQkJLy8gRm9yIGNyb3NzLWRvbWFpbiByZXF1ZXN0cywgc2VlaW5nIGFzIGNvbmRpdGlvbnMgZm9yIGEgcHJlZmxpZ2h0IGFyZQoJCQkJCS8vIGFraW4gdG8gYSBqaWdzYXcgcHV6emxlLCB3ZSBzaW1wbHkgbmV2ZXIgc2V0IGl0IHRvIGJlIHN1cmUuCgkJCQkJLy8gKGl0IGNhbiBhbHdheXMgYmUgc2V0IG9uIGEgcGVyLXJlcXVlc3QgYmFzaXMgb3IgZXZlbiB1c2luZyBhamF4U2V0dXApCgkJCQkJLy8gRm9yIHNhbWUtZG9tYWluIHJlcXVlc3RzLCB3b24ndCBjaGFuZ2UgaGVhZGVyIGlmIGFscmVhZHkgcHJvdmlkZWQuCgkJCQkJaWYgKCAhb3B0aW9ucy5jcm9zc0RvbWFpbiAmJiAhaGVhZGVyc1sgIlgtUmVxdWVzdGVkLVdpdGgiIF0gKSB7CgkJCQkJCWhlYWRlcnNbICJYLVJlcXVlc3RlZC1XaXRoIiBdID0gIlhNTEh0dHBSZXF1ZXN0IjsKCQkJCQl9CgoJCQkJCS8vIFNldCBoZWFkZXJzCgkJCQkJZm9yICggaSBpbiBoZWFkZXJzICkgewoKCQkJCQkJLy8gU3VwcG9ydDogSUU8OQoJCQkJCQkvLyBJRSdzIEFjdGl2ZVhPYmplY3QgdGhyb3dzIGEgJ1R5cGUgTWlzbWF0Y2gnIGV4Y2VwdGlvbiB3aGVuIHNldHRpbmcKCQkJCQkJLy8gcmVxdWVzdCBoZWFkZXIgdG8gYSBudWxsLXZhbHVlLgoJCQkJCQkvLwoJCQkJCQkvLyBUbyBrZWVwIGNvbnNpc3RlbnQgd2l0aCBvdGhlciBYSFIgaW1wbGVtZW50YXRpb25zLCBjYXN0IHRoZSB2YWx1ZQoJCQkJCQkvLyB0byBzdHJpbmcgYW5kIGlnbm9yZSBgdW5kZWZpbmVkYC4KCQkJCQkJaWYgKCBoZWFkZXJzWyBpIF0gIT09IHVuZGVmaW5lZCApIHsKCQkJCQkJCXhoci5zZXRSZXF1ZXN0SGVhZGVyKCBpLCBoZWFkZXJzWyBpIF0gKyAiIiApOwoJCQkJCQl9CgkJCQkJfQoKCQkJCQkvLyBEbyBzZW5kIHRoZSByZXF1ZXN0CgkJCQkJLy8gVGhpcyBtYXkgcmFpc2UgYW4gZXhjZXB0aW9uIHdoaWNoIGlzIGFjdHVhbGx5CgkJCQkJLy8gaGFuZGxlZCBpbiBqUXVlcnkuYWpheCAoc28gbm8gdHJ5L2NhdGNoIGhlcmUpCgkJCQkJeGhyLnNlbmQoICggb3B0aW9ucy5oYXNDb250ZW50ICYmIG9wdGlvbnMuZGF0YSApIHx8IG51bGwgKTsKCgkJCQkJLy8gTGlzdGVuZXIKCQkJCQljYWxsYmFjayA9IGZ1bmN0aW9uKCBfLCBpc0Fib3J0ICkgewoJCQkJCQl2YXIgc3RhdHVzLCBzdGF0dXNUZXh0LCByZXNwb25zZXM7CgoJCQkJCQkvLyBXYXMgbmV2ZXIgY2FsbGVkIGFuZCBpcyBhYm9ydGVkIG9yIGNvbXBsZXRlCgkJCQkJCWlmICggY2FsbGJhY2sgJiYgKCBpc0Fib3J0IHx8IHhoci5yZWFkeVN0YXRlID09PSA0ICkgKSB7CgoJCQkJCQkJLy8gQ2xlYW4gdXAKCQkJCQkJCWRlbGV0ZSB4aHJDYWxsYmFja3NbIGlkIF07CgkJCQkJCQljYWxsYmFjayA9IHVuZGVmaW5lZDsKCQkJCQkJCXhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBqUXVlcnkubm9vcDsKCgkJCQkJCQkvLyBBYm9ydCBtYW51YWxseSBpZiBuZWVkZWQKCQkJCQkJCWlmICggaXNBYm9ydCApIHsKCQkJCQkJCQlpZiAoIHhoci5yZWFkeVN0YXRlICE9PSA0ICkgewoJCQkJCQkJCQl4aHIuYWJvcnQoKTsKCQkJCQkJCQl9CgkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCXJlc3BvbnNlcyA9IHt9OwoJCQkJCQkJCXN0YXR1cyA9IHhoci5zdGF0dXM7CgoJCQkJCQkJCS8vIFN1cHBvcnQ6IElFPDEwCgkJCQkJCQkJLy8gQWNjZXNzaW5nIGJpbmFyeS1kYXRhIHJlc3BvbnNlVGV4dCB0aHJvd3MgYW4gZXhjZXB0aW9uCgkJCQkJCQkJLy8gKCMxMTQyNikKCQkJCQkJCQlpZiAoIHR5cGVvZiB4aHIucmVzcG9uc2VUZXh0ID09PSAic3RyaW5nIiApIHsKCQkJCQkJCQkJcmVzcG9uc2VzLnRleHQgPSB4aHIucmVzcG9uc2VUZXh0OwoJCQkJCQkJCX0KCgkJCQkJCQkJLy8gRmlyZWZveCB0aHJvd3MgYW4gZXhjZXB0aW9uIHdoZW4gYWNjZXNzaW5nCgkJCQkJCQkJLy8gc3RhdHVzVGV4dCBmb3IgZmF1bHR5IGNyb3NzLWRvbWFpbiByZXF1ZXN0cwoJCQkJCQkJCXRyeSB7CgkJCQkJCQkJCXN0YXR1c1RleHQgPSB4aHIuc3RhdHVzVGV4dDsKCQkJCQkJCQl9IGNhdGNoICggZSApIHsKCgkJCQkJCQkJCS8vIFdlIG5vcm1hbGl6ZSB3aXRoIFdlYmtpdCBnaXZpbmcgYW4gZW1wdHkgc3RhdHVzVGV4dAoJCQkJCQkJCQlzdGF0dXNUZXh0ID0gIiI7CgkJCQkJCQkJfQoKCQkJCQkJCQkvLyBGaWx0ZXIgc3RhdHVzIGZvciBub24gc3RhbmRhcmQgYmVoYXZpb3JzCgoJCQkJCQkJCS8vIElmIHRoZSByZXF1ZXN0IGlzIGxvY2FsIGFuZCB3ZSBoYXZlIGRhdGE6IGFzc3VtZSBhIHN1Y2Nlc3MKCQkJCQkJCQkvLyAoc3VjY2VzcyB3aXRoIG5vIGRhdGEgd29uJ3QgZ2V0IG5vdGlmaWVkLCB0aGF0J3MgdGhlIGJlc3Qgd2UKCQkJCQkJCQkvLyBjYW4gZG8gZ2l2ZW4gY3VycmVudCBpbXBsZW1lbnRhdGlvbnMpCgkJCQkJCQkJaWYgKCAhc3RhdHVzICYmIG9wdGlvbnMuaXNMb2NhbCAmJiAhb3B0aW9ucy5jcm9zc0RvbWFpbiApIHsKCQkJCQkJCQkJc3RhdHVzID0gcmVzcG9uc2VzLnRleHQgPyAyMDAgOiA0MDQ7CgoJCQkJCQkJCS8vIElFIC0gIzE0NTA6IHNvbWV0aW1lcyByZXR1cm5zIDEyMjMgd2hlbiBpdCBzaG91bGQgYmUgMjA0CgkJCQkJCQkJfSBlbHNlIGlmICggc3RhdHVzID09PSAxMjIzICkgewoJCQkJCQkJCQlzdGF0dXMgPSAyMDQ7CgkJCQkJCQkJfQoJCQkJCQkJfQoJCQkJCQl9CgoJCQkJCQkvLyBDYWxsIGNvbXBsZXRlIGlmIG5lZWRlZAoJCQkJCQlpZiAoIHJlc3BvbnNlcyApIHsKCQkJCQkJCWNvbXBsZXRlKCBzdGF0dXMsIHN0YXR1c1RleHQsIHJlc3BvbnNlcywgeGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpICk7CgkJCQkJCX0KCQkJCQl9OwoKCQkJCQkvLyBEbyBzZW5kIHRoZSByZXF1ZXN0CgkJCQkJLy8gYHhoci5zZW5kYCBtYXkgcmFpc2UgYW4gZXhjZXB0aW9uLCBidXQgaXQgd2lsbCBiZQoJCQkJCS8vIGhhbmRsZWQgaW4galF1ZXJ5LmFqYXggKHNvIG5vIHRyeS9jYXRjaCBoZXJlKQoJCQkJCWlmICggIW9wdGlvbnMuYXN5bmMgKSB7CgoJCQkJCQkvLyBJZiB3ZSdyZSBpbiBzeW5jIG1vZGUgd2UgZmlyZSB0aGUgY2FsbGJhY2sKCQkJCQkJY2FsbGJhY2soKTsKCQkJCQl9IGVsc2UgaWYgKCB4aHIucmVhZHlTdGF0ZSA9PT0gNCApIHsKCgkJCQkJCS8vIChJRTYgJiBJRTcpIGlmIGl0J3MgaW4gY2FjaGUgYW5kIGhhcyBiZWVuCgkJCQkJCS8vIHJldHJpZXZlZCBkaXJlY3RseSB3ZSBuZWVkIHRvIGZpcmUgdGhlIGNhbGxiYWNrCgkJCQkJCXdpbmRvdy5zZXRUaW1lb3V0KCBjYWxsYmFjayApOwoJCQkJCX0gZWxzZSB7CgoJCQkJCQkvLyBSZWdpc3RlciB0aGUgY2FsbGJhY2ssIGJ1dCBkZWxheSBpdCBpbiBjYXNlIGB4aHIuc2VuZGAgdGhyb3dzCgkJCQkJCS8vIEFkZCB0byB0aGUgbGlzdCBvZiBhY3RpdmUgeGhyIGNhbGxiYWNrcwoJCQkJCQl4aHIub25yZWFkeXN0YXRlY2hhbmdlID0geGhyQ2FsbGJhY2tzWyBpZCBdID0gY2FsbGJhY2s7CgkJCQkJfQoJCQkJfSwKCgkJCQlhYm9ydDogZnVuY3Rpb24oKSB7CgkJCQkJaWYgKCBjYWxsYmFjayApIHsKCQkJCQkJY2FsbGJhY2soIHVuZGVmaW5lZCwgdHJ1ZSApOwoJCQkJCX0KCQkJCX0KCQkJfTsKCQl9Cgl9ICk7Cn0KCi8vIEZ1bmN0aW9ucyB0byBjcmVhdGUgeGhycwpmdW5jdGlvbiBjcmVhdGVTdGFuZGFyZFhIUigpIHsKCXRyeSB7CgkJcmV0dXJuIG5ldyB3aW5kb3cuWE1MSHR0cFJlcXVlc3QoKTsKCX0gY2F0Y2ggKCBlICkge30KfQoKZnVuY3Rpb24gY3JlYXRlQWN0aXZlWEhSKCkgewoJdHJ5IHsKCQlyZXR1cm4gbmV3IHdpbmRvdy5BY3RpdmVYT2JqZWN0KCAiTWljcm9zb2Z0LlhNTEhUVFAiICk7Cgl9IGNhdGNoICggZSApIHt9Cn0KCgoKCi8vIEluc3RhbGwgc2NyaXB0IGRhdGFUeXBlCmpRdWVyeS5hamF4U2V0dXAoIHsKCWFjY2VwdHM6IHsKCQlzY3JpcHQ6ICJ0ZXh0L2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2phdmFzY3JpcHQsICIgKwoJCQkiYXBwbGljYXRpb24vZWNtYXNjcmlwdCwgYXBwbGljYXRpb24veC1lY21hc2NyaXB0IgoJfSwKCWNvbnRlbnRzOiB7CgkJc2NyaXB0OiAvXGIoPzpqYXZhfGVjbWEpc2NyaXB0XGIvCgl9LAoJY29udmVydGVyczogewoJCSJ0ZXh0IHNjcmlwdCI6IGZ1bmN0aW9uKCB0ZXh0ICkgewoJCQlqUXVlcnkuZ2xvYmFsRXZhbCggdGV4dCApOwoJCQlyZXR1cm4gdGV4dDsKCQl9Cgl9Cn0gKTsKCi8vIEhhbmRsZSBjYWNoZSdzIHNwZWNpYWwgY2FzZSBhbmQgZ2xvYmFsCmpRdWVyeS5hamF4UHJlZmlsdGVyKCAic2NyaXB0IiwgZnVuY3Rpb24oIHMgKSB7CglpZiAoIHMuY2FjaGUgPT09IHVuZGVmaW5lZCApIHsKCQlzLmNhY2hlID0gZmFsc2U7Cgl9CglpZiAoIHMuY3Jvc3NEb21haW4gKSB7CgkJcy50eXBlID0gIkdFVCI7CgkJcy5nbG9iYWwgPSBmYWxzZTsKCX0KfSApOwoKLy8gQmluZCBzY3JpcHQgdGFnIGhhY2sgdHJhbnNwb3J0CmpRdWVyeS5hamF4VHJhbnNwb3J0KCAic2NyaXB0IiwgZnVuY3Rpb24oIHMgKSB7CgoJLy8gVGhpcyB0cmFuc3BvcnQgb25seSBkZWFscyB3aXRoIGNyb3NzIGRvbWFpbiByZXF1ZXN0cwoJaWYgKCBzLmNyb3NzRG9tYWluICkgewoKCQl2YXIgc2NyaXB0LAoJCQloZWFkID0gZG9jdW1lbnQuaGVhZCB8fCBqUXVlcnkoICJoZWFkIiApWyAwIF0gfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50OwoKCQlyZXR1cm4gewoKCQkJc2VuZDogZnVuY3Rpb24oIF8sIGNhbGxiYWNrICkgewoKCQkJCXNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICJzY3JpcHQiICk7CgoJCQkJc2NyaXB0LmFzeW5jID0gdHJ1ZTsKCgkJCQlpZiAoIHMuc2NyaXB0Q2hhcnNldCApIHsKCQkJCQlzY3JpcHQuY2hhcnNldCA9IHMuc2NyaXB0Q2hhcnNldDsKCQkJCX0KCgkJCQlzY3JpcHQuc3JjID0gcy51cmw7CgoJCQkJLy8gQXR0YWNoIGhhbmRsZXJzIGZvciBhbGwgYnJvd3NlcnMKCQkJCXNjcmlwdC5vbmxvYWQgPSBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oIF8sIGlzQWJvcnQgKSB7CgoJCQkJCWlmICggaXNBYm9ydCB8fCAhc2NyaXB0LnJlYWR5U3RhdGUgfHwgL2xvYWRlZHxjb21wbGV0ZS8udGVzdCggc2NyaXB0LnJlYWR5U3RhdGUgKSApIHsKCgkJCQkJCS8vIEhhbmRsZSBtZW1vcnkgbGVhayBpbiBJRQoJCQkJCQlzY3JpcHQub25sb2FkID0gc2NyaXB0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IG51bGw7CgoJCQkJCQkvLyBSZW1vdmUgdGhlIHNjcmlwdAoJCQkJCQlpZiAoIHNjcmlwdC5wYXJlbnROb2RlICkgewoJCQkJCQkJc2NyaXB0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoIHNjcmlwdCApOwoJCQkJCQl9CgoJCQkJCQkvLyBEZXJlZmVyZW5jZSB0aGUgc2NyaXB0CgkJCQkJCXNjcmlwdCA9IG51bGw7CgoJCQkJCQkvLyBDYWxsYmFjayBpZiBub3QgYWJvcnQKCQkJCQkJaWYgKCAhaXNBYm9ydCApIHsKCQkJCQkJCWNhbGxiYWNrKCAyMDAsICJzdWNjZXNzIiApOwoJCQkJCQl9CgkJCQkJfQoJCQkJfTsKCgkJCQkvLyBDaXJjdW12ZW50IElFNiBidWdzIHdpdGggYmFzZSBlbGVtZW50cyAoIzI3MDkgYW5kICM0Mzc4KSBieSBwcmVwZW5kaW5nCgkJCQkvLyBVc2UgbmF0aXZlIERPTSBtYW5pcHVsYXRpb24gdG8gYXZvaWQgb3VyIGRvbU1hbmlwIEFKQVggdHJpY2tlcnkKCQkJCWhlYWQuaW5zZXJ0QmVmb3JlKCBzY3JpcHQsIGhlYWQuZmlyc3RDaGlsZCApOwoJCQl9LAoKCQkJYWJvcnQ6IGZ1bmN0aW9uKCkgewoJCQkJaWYgKCBzY3JpcHQgKSB7CgkJCQkJc2NyaXB0Lm9ubG9hZCggdW5kZWZpbmVkLCB0cnVlICk7CgkJCQl9CgkJCX0KCQl9OwoJfQp9ICk7CgoKCgp2YXIgb2xkQ2FsbGJhY2tzID0gW10sCglyanNvbnAgPSAvKD0pXD8oPz0mfCQpfFw/XD8vOwoKLy8gRGVmYXVsdCBqc29ucCBzZXR0aW5ncwpqUXVlcnkuYWpheFNldHVwKCB7Cglqc29ucDogImNhbGxiYWNrIiwKCWpzb25wQ2FsbGJhY2s6IGZ1bmN0aW9uKCkgewoJCXZhciBjYWxsYmFjayA9IG9sZENhbGxiYWNrcy5wb3AoKSB8fCAoIGpRdWVyeS5leHBhbmRvICsgIl8iICsgKCBub25jZSsrICkgKTsKCQl0aGlzWyBjYWxsYmFjayBdID0gdHJ1ZTsKCQlyZXR1cm4gY2FsbGJhY2s7Cgl9Cn0gKTsKCi8vIERldGVjdCwgbm9ybWFsaXplIG9wdGlvbnMgYW5kIGluc3RhbGwgY2FsbGJhY2tzIGZvciBqc29ucCByZXF1ZXN0cwpqUXVlcnkuYWpheFByZWZpbHRlciggImpzb24ganNvbnAiLCBmdW5jdGlvbiggcywgb3JpZ2luYWxTZXR0aW5ncywganFYSFIgKSB7CgoJdmFyIGNhbGxiYWNrTmFtZSwgb3ZlcndyaXR0ZW4sIHJlc3BvbnNlQ29udGFpbmVyLAoJCWpzb25Qcm9wID0gcy5qc29ucCAhPT0gZmFsc2UgJiYgKCByanNvbnAudGVzdCggcy51cmwgKSA/CgkJCSJ1cmwiIDoKCQkJdHlwZW9mIHMuZGF0YSA9PT0gInN0cmluZyIgJiYKCQkJCSggcy5jb250ZW50VHlwZSB8fCAiIiApCgkJCQkJLmluZGV4T2YoICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiICkgPT09IDAgJiYKCQkJCXJqc29ucC50ZXN0KCBzLmRhdGEgKSAmJiAiZGF0YSIKCQkpOwoKCS8vIEhhbmRsZSBpZmYgdGhlIGV4cGVjdGVkIGRhdGEgdHlwZSBpcyAianNvbnAiIG9yIHdlIGhhdmUgYSBwYXJhbWV0ZXIgdG8gc2V0CglpZiAoIGpzb25Qcm9wIHx8IHMuZGF0YVR5cGVzWyAwIF0gPT09ICJqc29ucCIgKSB7CgoJCS8vIEdldCBjYWxsYmFjayBuYW1lLCByZW1lbWJlcmluZyBwcmVleGlzdGluZyB2YWx1ZSBhc3NvY2lhdGVkIHdpdGggaXQKCQljYWxsYmFja05hbWUgPSBzLmpzb25wQ2FsbGJhY2sgPSBqUXVlcnkuaXNGdW5jdGlvbiggcy5qc29ucENhbGxiYWNrICkgPwoJCQlzLmpzb25wQ2FsbGJhY2soKSA6CgkJCXMuanNvbnBDYWxsYmFjazsKCgkJLy8gSW5zZXJ0IGNhbGxiYWNrIGludG8gdXJsIG9yIGZvcm0gZGF0YQoJCWlmICgganNvblByb3AgKSB7CgkJCXNbIGpzb25Qcm9wIF0gPSBzWyBqc29uUHJvcCBdLnJlcGxhY2UoIHJqc29ucCwgIiQxIiArIGNhbGxiYWNrTmFtZSApOwoJCX0gZWxzZSBpZiAoIHMuanNvbnAgIT09IGZhbHNlICkgewoJCQlzLnVybCArPSAoIHJxdWVyeS50ZXN0KCBzLnVybCApID8gIiYiIDogIj8iICkgKyBzLmpzb25wICsgIj0iICsgY2FsbGJhY2tOYW1lOwoJCX0KCgkJLy8gVXNlIGRhdGEgY29udmVydGVyIHRvIHJldHJpZXZlIGpzb24gYWZ0ZXIgc2NyaXB0IGV4ZWN1dGlvbgoJCXMuY29udmVydGVyc1sgInNjcmlwdCBqc29uIiBdID0gZnVuY3Rpb24oKSB7CgkJCWlmICggIXJlc3BvbnNlQ29udGFpbmVyICkgewoJCQkJalF1ZXJ5LmVycm9yKCBjYWxsYmFja05hbWUgKyAiIHdhcyBub3QgY2FsbGVkIiApOwoJCQl9CgkJCXJldHVybiByZXNwb25zZUNvbnRhaW5lclsgMCBdOwoJCX07CgoJCS8vIGZvcmNlIGpzb24gZGF0YVR5cGUKCQlzLmRhdGFUeXBlc1sgMCBdID0gImpzb24iOwoKCQkvLyBJbnN0YWxsIGNhbGxiYWNrCgkJb3ZlcndyaXR0ZW4gPSB3aW5kb3dbIGNhbGxiYWNrTmFtZSBdOwoJCXdpbmRvd1sgY2FsbGJhY2tOYW1lIF0gPSBmdW5jdGlvbigpIHsKCQkJcmVzcG9uc2VDb250YWluZXIgPSBhcmd1bWVudHM7CgkJfTsKCgkJLy8gQ2xlYW4tdXAgZnVuY3Rpb24gKGZpcmVzIGFmdGVyIGNvbnZlcnRlcnMpCgkJanFYSFIuYWx3YXlzKCBmdW5jdGlvbigpIHsKCgkJCS8vIElmIHByZXZpb3VzIHZhbHVlIGRpZG4ndCBleGlzdCAtIHJlbW92ZSBpdAoJCQlpZiAoIG92ZXJ3cml0dGVuID09PSB1bmRlZmluZWQgKSB7CgkJCQlqUXVlcnkoIHdpbmRvdyApLnJlbW92ZVByb3AoIGNhbGxiYWNrTmFtZSApOwoKCQkJLy8gT3RoZXJ3aXNlIHJlc3RvcmUgcHJlZXhpc3RpbmcgdmFsdWUKCQkJfSBlbHNlIHsKCQkJCXdpbmRvd1sgY2FsbGJhY2tOYW1lIF0gPSBvdmVyd3JpdHRlbjsKCQkJfQoKCQkJLy8gU2F2ZSBiYWNrIGFzIGZyZWUKCQkJaWYgKCBzWyBjYWxsYmFja05hbWUgXSApIHsKCgkJCQkvLyBtYWtlIHN1cmUgdGhhdCByZS11c2luZyB0aGUgb3B0aW9ucyBkb2Vzbid0IHNjcmV3IHRoaW5ncyBhcm91bmQKCQkJCXMuanNvbnBDYWxsYmFjayA9IG9yaWdpbmFsU2V0dGluZ3MuanNvbnBDYWxsYmFjazsKCgkJCQkvLyBzYXZlIHRoZSBjYWxsYmFjayBuYW1lIGZvciBmdXR1cmUgdXNlCgkJCQlvbGRDYWxsYmFja3MucHVzaCggY2FsbGJhY2tOYW1lICk7CgkJCX0KCgkJCS8vIENhbGwgaWYgaXQgd2FzIGEgZnVuY3Rpb24gYW5kIHdlIGhhdmUgYSByZXNwb25zZQoJCQlpZiAoIHJlc3BvbnNlQ29udGFpbmVyICYmIGpRdWVyeS5pc0Z1bmN0aW9uKCBvdmVyd3JpdHRlbiApICkgewoJCQkJb3ZlcndyaXR0ZW4oIHJlc3BvbnNlQ29udGFpbmVyWyAwIF0gKTsKCQkJfQoKCQkJcmVzcG9uc2VDb250YWluZXIgPSBvdmVyd3JpdHRlbiA9IHVuZGVmaW5lZDsKCQl9ICk7CgoJCS8vIERlbGVnYXRlIHRvIHNjcmlwdAoJCXJldHVybiAic2NyaXB0IjsKCX0KfSApOwoKCgoKLy8gZGF0YTogc3RyaW5nIG9mIGh0bWwKLy8gY29udGV4dCAob3B0aW9uYWwpOiBJZiBzcGVjaWZpZWQsIHRoZSBmcmFnbWVudCB3aWxsIGJlIGNyZWF0ZWQgaW4gdGhpcyBjb250ZXh0LAovLyBkZWZhdWx0cyB0byBkb2N1bWVudAovLyBrZWVwU2NyaXB0cyAob3B0aW9uYWwpOiBJZiB0cnVlLCB3aWxsIGluY2x1ZGUgc2NyaXB0cyBwYXNzZWQgaW4gdGhlIGh0bWwgc3RyaW5nCmpRdWVyeS5wYXJzZUhUTUwgPSBmdW5jdGlvbiggZGF0YSwgY29udGV4dCwga2VlcFNjcmlwdHMgKSB7CglpZiAoICFkYXRhIHx8IHR5cGVvZiBkYXRhICE9PSAic3RyaW5nIiApIHsKCQlyZXR1cm4gbnVsbDsKCX0KCWlmICggdHlwZW9mIGNvbnRleHQgPT09ICJib29sZWFuIiApIHsKCQlrZWVwU2NyaXB0cyA9IGNvbnRleHQ7CgkJY29udGV4dCA9IGZhbHNlOwoJfQoJY29udGV4dCA9IGNvbnRleHQgfHwgZG9jdW1lbnQ7CgoJdmFyIHBhcnNlZCA9IHJzaW5nbGVUYWcuZXhlYyggZGF0YSApLAoJCXNjcmlwdHMgPSAha2VlcFNjcmlwdHMgJiYgW107CgoJLy8gU2luZ2xlIHRhZwoJaWYgKCBwYXJzZWQgKSB7CgkJcmV0dXJuIFsgY29udGV4dC5jcmVhdGVFbGVtZW50KCBwYXJzZWRbIDEgXSApIF07Cgl9CgoJcGFyc2VkID0gYnVpbGRGcmFnbWVudCggWyBkYXRhIF0sIGNvbnRleHQsIHNjcmlwdHMgKTsKCglpZiAoIHNjcmlwdHMgJiYgc2NyaXB0cy5sZW5ndGggKSB7CgkJalF1ZXJ5KCBzY3JpcHRzICkucmVtb3ZlKCk7Cgl9CgoJcmV0dXJuIGpRdWVyeS5tZXJnZSggW10sIHBhcnNlZC5jaGlsZE5vZGVzICk7Cn07CgoKLy8gS2VlcCBhIGNvcHkgb2YgdGhlIG9sZCBsb2FkIG1ldGhvZAp2YXIgX2xvYWQgPSBqUXVlcnkuZm4ubG9hZDsKCi8qKgogKiBMb2FkIGEgdXJsIGludG8gYSBwYWdlCiAqLwpqUXVlcnkuZm4ubG9hZCA9IGZ1bmN0aW9uKCB1cmwsIHBhcmFtcywgY2FsbGJhY2sgKSB7CglpZiAoIHR5cGVvZiB1cmwgIT09ICJzdHJpbmciICYmIF9sb2FkICkgewoJCXJldHVybiBfbG9hZC5hcHBseSggdGhpcywgYXJndW1lbnRzICk7Cgl9CgoJdmFyIHNlbGVjdG9yLCB0eXBlLCByZXNwb25zZSwKCQlzZWxmID0gdGhpcywKCQlvZmYgPSB1cmwuaW5kZXhPZiggIiAiICk7CgoJaWYgKCBvZmYgPiAtMSApIHsKCQlzZWxlY3RvciA9IGpRdWVyeS50cmltKCB1cmwuc2xpY2UoIG9mZiwgdXJsLmxlbmd0aCApICk7CgkJdXJsID0gdXJsLnNsaWNlKCAwLCBvZmYgKTsKCX0KCgkvLyBJZiBpdCdzIGEgZnVuY3Rpb24KCWlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIHBhcmFtcyApICkgewoKCQkvLyBXZSBhc3N1bWUgdGhhdCBpdCdzIHRoZSBjYWxsYmFjawoJCWNhbGxiYWNrID0gcGFyYW1zOwoJCXBhcmFtcyA9IHVuZGVmaW5lZDsKCgkvLyBPdGhlcndpc2UsIGJ1aWxkIGEgcGFyYW0gc3RyaW5nCgl9IGVsc2UgaWYgKCBwYXJhbXMgJiYgdHlwZW9mIHBhcmFtcyA9PT0gIm9iamVjdCIgKSB7CgkJdHlwZSA9ICJQT1NUIjsKCX0KCgkvLyBJZiB3ZSBoYXZlIGVsZW1lbnRzIHRvIG1vZGlmeSwgbWFrZSB0aGUgcmVxdWVzdAoJaWYgKCBzZWxmLmxlbmd0aCA+IDAgKSB7CgkJalF1ZXJ5LmFqYXgoIHsKCQkJdXJsOiB1cmwsCgoJCQkvLyBJZiAidHlwZSIgdmFyaWFibGUgaXMgdW5kZWZpbmVkLCB0aGVuICJHRVQiIG1ldGhvZCB3aWxsIGJlIHVzZWQuCgkJCS8vIE1ha2UgdmFsdWUgb2YgdGhpcyBmaWVsZCBleHBsaWNpdCBzaW5jZQoJCQkvLyB1c2VyIGNhbiBvdmVycmlkZSBpdCB0aHJvdWdoIGFqYXhTZXR1cCBtZXRob2QKCQkJdHlwZTogdHlwZSB8fCAiR0VUIiwKCQkJZGF0YVR5cGU6ICJodG1sIiwKCQkJZGF0YTogcGFyYW1zCgkJfSApLmRvbmUoIGZ1bmN0aW9uKCByZXNwb25zZVRleHQgKSB7CgoJCQkvLyBTYXZlIHJlc3BvbnNlIGZvciB1c2UgaW4gY29tcGxldGUgY2FsbGJhY2sKCQkJcmVzcG9uc2UgPSBhcmd1bWVudHM7CgoJCQlzZWxmLmh0bWwoIHNlbGVjdG9yID8KCgkJCQkvLyBJZiBhIHNlbGVjdG9yIHdhcyBzcGVjaWZpZWQsIGxvY2F0ZSB0aGUgcmlnaHQgZWxlbWVudHMgaW4gYSBkdW1teSBkaXYKCQkJCS8vIEV4Y2x1ZGUgc2NyaXB0cyB0byBhdm9pZCBJRSAnUGVybWlzc2lvbiBEZW5pZWQnIGVycm9ycwoJCQkJalF1ZXJ5KCAiPGRpdj4iICkuYXBwZW5kKCBqUXVlcnkucGFyc2VIVE1MKCByZXNwb25zZVRleHQgKSApLmZpbmQoIHNlbGVjdG9yICkgOgoKCQkJCS8vIE90aGVyd2lzZSB1c2UgdGhlIGZ1bGwgcmVzdWx0CgkJCQlyZXNwb25zZVRleHQgKTsKCgkJLy8gSWYgdGhlIHJlcXVlc3Qgc3VjY2VlZHMsIHRoaXMgZnVuY3Rpb24gZ2V0cyAiZGF0YSIsICJzdGF0dXMiLCAianFYSFIiCgkJLy8gYnV0IHRoZXkgYXJlIGlnbm9yZWQgYmVjYXVzZSByZXNwb25zZSB3YXMgc2V0IGFib3ZlLgoJCS8vIElmIGl0IGZhaWxzLCB0aGlzIGZ1bmN0aW9uIGdldHMgImpxWEhSIiwgInN0YXR1cyIsICJlcnJvciIKCQl9ICkuYWx3YXlzKCBjYWxsYmFjayAmJiBmdW5jdGlvbigganFYSFIsIHN0YXR1cyApIHsKCQkJc2VsZi5lYWNoKCBmdW5jdGlvbigpIHsKCQkJCWNhbGxiYWNrLmFwcGx5KCB0aGlzLCByZXNwb25zZSB8fCBbIGpxWEhSLnJlc3BvbnNlVGV4dCwgc3RhdHVzLCBqcVhIUiBdICk7CgkJCX0gKTsKCQl9ICk7Cgl9CgoJcmV0dXJuIHRoaXM7Cn07CgoKCgovLyBBdHRhY2ggYSBidW5jaCBvZiBmdW5jdGlvbnMgZm9yIGhhbmRsaW5nIGNvbW1vbiBBSkFYIGV2ZW50cwpqUXVlcnkuZWFjaCggWwoJImFqYXhTdGFydCIsCgkiYWpheFN0b3AiLAoJImFqYXhDb21wbGV0ZSIsCgkiYWpheEVycm9yIiwKCSJhamF4U3VjY2VzcyIsCgkiYWpheFNlbmQiCl0sIGZ1bmN0aW9uKCBpLCB0eXBlICkgewoJalF1ZXJ5LmZuWyB0eXBlIF0gPSBmdW5jdGlvbiggZm4gKSB7CgkJcmV0dXJuIHRoaXMub24oIHR5cGUsIGZuICk7Cgl9Owp9ICk7CgoKCgpqUXVlcnkuZXhwci5maWx0ZXJzLmFuaW1hdGVkID0gZnVuY3Rpb24oIGVsZW0gKSB7CglyZXR1cm4galF1ZXJ5LmdyZXAoIGpRdWVyeS50aW1lcnMsIGZ1bmN0aW9uKCBmbiApIHsKCQlyZXR1cm4gZWxlbSA9PT0gZm4uZWxlbTsKCX0gKS5sZW5ndGg7Cn07CgoKCgoKLyoqCiAqIEdldHMgYSB3aW5kb3cgZnJvbSBhbiBlbGVtZW50CiAqLwpmdW5jdGlvbiBnZXRXaW5kb3coIGVsZW0gKSB7CglyZXR1cm4galF1ZXJ5LmlzV2luZG93KCBlbGVtICkgPwoJCWVsZW0gOgoJCWVsZW0ubm9kZVR5cGUgPT09IDkgPwoJCQllbGVtLmRlZmF1bHRWaWV3IHx8IGVsZW0ucGFyZW50V2luZG93IDoKCQkJZmFsc2U7Cn0KCmpRdWVyeS5vZmZzZXQgPSB7CglzZXRPZmZzZXQ6IGZ1bmN0aW9uKCBlbGVtLCBvcHRpb25zLCBpICkgewoJCXZhciBjdXJQb3NpdGlvbiwgY3VyTGVmdCwgY3VyQ1NTVG9wLCBjdXJUb3AsIGN1ck9mZnNldCwgY3VyQ1NTTGVmdCwgY2FsY3VsYXRlUG9zaXRpb24sCgkJCXBvc2l0aW9uID0galF1ZXJ5LmNzcyggZWxlbSwgInBvc2l0aW9uIiApLAoJCQljdXJFbGVtID0galF1ZXJ5KCBlbGVtICksCgkJCXByb3BzID0ge307CgoJCS8vIHNldCBwb3NpdGlvbiBmaXJzdCwgaW4tY2FzZSB0b3AvbGVmdCBhcmUgc2V0IGV2ZW4gb24gc3RhdGljIGVsZW0KCQlpZiAoIHBvc2l0aW9uID09PSAic3RhdGljIiApIHsKCQkJZWxlbS5zdHlsZS5wb3NpdGlvbiA9ICJyZWxhdGl2ZSI7CgkJfQoKCQljdXJPZmZzZXQgPSBjdXJFbGVtLm9mZnNldCgpOwoJCWN1ckNTU1RvcCA9IGpRdWVyeS5jc3MoIGVsZW0sICJ0b3AiICk7CgkJY3VyQ1NTTGVmdCA9IGpRdWVyeS5jc3MoIGVsZW0sICJsZWZ0IiApOwoJCWNhbGN1bGF0ZVBvc2l0aW9uID0gKCBwb3NpdGlvbiA9PT0gImFic29sdXRlIiB8fCBwb3NpdGlvbiA9PT0gImZpeGVkIiApICYmCgkJCWpRdWVyeS5pbkFycmF5KCAiYXV0byIsIFsgY3VyQ1NTVG9wLCBjdXJDU1NMZWZ0IF0gKSA+IC0xOwoKCQkvLyBuZWVkIHRvIGJlIGFibGUgdG8gY2FsY3VsYXRlIHBvc2l0aW9uIGlmIGVpdGhlciB0b3Agb3IgbGVmdAoJCS8vIGlzIGF1dG8gYW5kIHBvc2l0aW9uIGlzIGVpdGhlciBhYnNvbHV0ZSBvciBmaXhlZAoJCWlmICggY2FsY3VsYXRlUG9zaXRpb24gKSB7CgkJCWN1clBvc2l0aW9uID0gY3VyRWxlbS5wb3NpdGlvbigpOwoJCQljdXJUb3AgPSBjdXJQb3NpdGlvbi50b3A7CgkJCWN1ckxlZnQgPSBjdXJQb3NpdGlvbi5sZWZ0OwoJCX0gZWxzZSB7CgkJCWN1clRvcCA9IHBhcnNlRmxvYXQoIGN1ckNTU1RvcCApIHx8IDA7CgkJCWN1ckxlZnQgPSBwYXJzZUZsb2F0KCBjdXJDU1NMZWZ0ICkgfHwgMDsKCQl9CgoJCWlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIG9wdGlvbnMgKSApIHsKCgkJCS8vIFVzZSBqUXVlcnkuZXh0ZW5kIGhlcmUgdG8gYWxsb3cgbW9kaWZpY2F0aW9uIG9mIGNvb3JkaW5hdGVzIGFyZ3VtZW50IChnaC0xODQ4KQoJCQlvcHRpb25zID0gb3B0aW9ucy5jYWxsKCBlbGVtLCBpLCBqUXVlcnkuZXh0ZW5kKCB7fSwgY3VyT2Zmc2V0ICkgKTsKCQl9CgoJCWlmICggb3B0aW9ucy50b3AgIT0gbnVsbCApIHsKCQkJcHJvcHMudG9wID0gKCBvcHRpb25zLnRvcCAtIGN1ck9mZnNldC50b3AgKSArIGN1clRvcDsKCQl9CgkJaWYgKCBvcHRpb25zLmxlZnQgIT0gbnVsbCApIHsKCQkJcHJvcHMubGVmdCA9ICggb3B0aW9ucy5sZWZ0IC0gY3VyT2Zmc2V0LmxlZnQgKSArIGN1ckxlZnQ7CgkJfQoKCQlpZiAoICJ1c2luZyIgaW4gb3B0aW9ucyApIHsKCQkJb3B0aW9ucy51c2luZy5jYWxsKCBlbGVtLCBwcm9wcyApOwoJCX0gZWxzZSB7CgkJCWN1ckVsZW0uY3NzKCBwcm9wcyApOwoJCX0KCX0KfTsKCmpRdWVyeS5mbi5leHRlbmQoIHsKCW9mZnNldDogZnVuY3Rpb24oIG9wdGlvbnMgKSB7CgkJaWYgKCBhcmd1bWVudHMubGVuZ3RoICkgewoJCQlyZXR1cm4gb3B0aW9ucyA9PT0gdW5kZWZpbmVkID8KCQkJCXRoaXMgOgoJCQkJdGhpcy5lYWNoKCBmdW5jdGlvbiggaSApIHsKCQkJCQlqUXVlcnkub2Zmc2V0LnNldE9mZnNldCggdGhpcywgb3B0aW9ucywgaSApOwoJCQkJfSApOwoJCX0KCgkJdmFyIGRvY0VsZW0sIHdpbiwKCQkJYm94ID0geyB0b3A6IDAsIGxlZnQ6IDAgfSwKCQkJZWxlbSA9IHRoaXNbIDAgXSwKCQkJZG9jID0gZWxlbSAmJiBlbGVtLm93bmVyRG9jdW1lbnQ7CgoJCWlmICggIWRvYyApIHsKCQkJcmV0dXJuOwoJCX0KCgkJZG9jRWxlbSA9IGRvYy5kb2N1bWVudEVsZW1lbnQ7CgoJCS8vIE1ha2Ugc3VyZSBpdCdzIG5vdCBhIGRpc2Nvbm5lY3RlZCBET00gbm9kZQoJCWlmICggIWpRdWVyeS5jb250YWlucyggZG9jRWxlbSwgZWxlbSApICkgewoJCQlyZXR1cm4gYm94OwoJCX0KCgkJLy8gSWYgd2UgZG9uJ3QgaGF2ZSBnQkNSLCBqdXN0IHVzZSAwLDAgcmF0aGVyIHRoYW4gZXJyb3IKCQkvLyBCbGFja0JlcnJ5IDUsIGlPUyAzIChvcmlnaW5hbCBpUGhvbmUpCgkJaWYgKCB0eXBlb2YgZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QgIT09ICJ1bmRlZmluZWQiICkgewoJCQlib3ggPSBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwoJCX0KCQl3aW4gPSBnZXRXaW5kb3coIGRvYyApOwoJCXJldHVybiB7CgkJCXRvcDogYm94LnRvcCAgKyAoIHdpbi5wYWdlWU9mZnNldCB8fCBkb2NFbGVtLnNjcm9sbFRvcCApICAtICggZG9jRWxlbS5jbGllbnRUb3AgIHx8IDAgKSwKCQkJbGVmdDogYm94LmxlZnQgKyAoIHdpbi5wYWdlWE9mZnNldCB8fCBkb2NFbGVtLnNjcm9sbExlZnQgKSAtICggZG9jRWxlbS5jbGllbnRMZWZ0IHx8IDAgKQoJCX07Cgl9LAoKCXBvc2l0aW9uOiBmdW5jdGlvbigpIHsKCQlpZiAoICF0aGlzWyAwIF0gKSB7CgkJCXJldHVybjsKCQl9CgoJCXZhciBvZmZzZXRQYXJlbnQsIG9mZnNldCwKCQkJcGFyZW50T2Zmc2V0ID0geyB0b3A6IDAsIGxlZnQ6IDAgfSwKCQkJZWxlbSA9IHRoaXNbIDAgXTsKCgkJLy8gRml4ZWQgZWxlbWVudHMgYXJlIG9mZnNldCBmcm9tIHdpbmRvdyAocGFyZW50T2Zmc2V0ID0ge3RvcDowLCBsZWZ0OiAwfSwKCQkvLyBiZWNhdXNlIGl0IGlzIGl0cyBvbmx5IG9mZnNldCBwYXJlbnQKCQlpZiAoIGpRdWVyeS5jc3MoIGVsZW0sICJwb3NpdGlvbiIgKSA9PT0gImZpeGVkIiApIHsKCgkJCS8vIHdlIGFzc3VtZSB0aGF0IGdldEJvdW5kaW5nQ2xpZW50UmVjdCBpcyBhdmFpbGFibGUgd2hlbiBjb21wdXRlZCBwb3NpdGlvbiBpcyBmaXhlZAoJCQlvZmZzZXQgPSBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwoJCX0gZWxzZSB7CgoJCQkvLyBHZXQgKnJlYWwqIG9mZnNldFBhcmVudAoJCQlvZmZzZXRQYXJlbnQgPSB0aGlzLm9mZnNldFBhcmVudCgpOwoKCQkJLy8gR2V0IGNvcnJlY3Qgb2Zmc2V0cwoJCQlvZmZzZXQgPSB0aGlzLm9mZnNldCgpOwoJCQlpZiAoICFqUXVlcnkubm9kZU5hbWUoIG9mZnNldFBhcmVudFsgMCBdLCAiaHRtbCIgKSApIHsKCQkJCXBhcmVudE9mZnNldCA9IG9mZnNldFBhcmVudC5vZmZzZXQoKTsKCQkJfQoKCQkJLy8gQWRkIG9mZnNldFBhcmVudCBib3JkZXJzCgkJCXBhcmVudE9mZnNldC50b3AgICs9IGpRdWVyeS5jc3MoIG9mZnNldFBhcmVudFsgMCBdLCAiYm9yZGVyVG9wV2lkdGgiLCB0cnVlICk7CgkJCXBhcmVudE9mZnNldC5sZWZ0ICs9IGpRdWVyeS5jc3MoIG9mZnNldFBhcmVudFsgMCBdLCAiYm9yZGVyTGVmdFdpZHRoIiwgdHJ1ZSApOwoJCX0KCgkJLy8gU3VidHJhY3QgcGFyZW50IG9mZnNldHMgYW5kIGVsZW1lbnQgbWFyZ2lucwoJCS8vIG5vdGU6IHdoZW4gYW4gZWxlbWVudCBoYXMgbWFyZ2luOiBhdXRvIHRoZSBvZmZzZXRMZWZ0IGFuZCBtYXJnaW5MZWZ0CgkJLy8gYXJlIHRoZSBzYW1lIGluIFNhZmFyaSBjYXVzaW5nIG9mZnNldC5sZWZ0IHRvIGluY29ycmVjdGx5IGJlIDAKCQlyZXR1cm4gewoJCQl0b3A6ICBvZmZzZXQudG9wICAtIHBhcmVudE9mZnNldC50b3AgLSBqUXVlcnkuY3NzKCBlbGVtLCAibWFyZ2luVG9wIiwgdHJ1ZSApLAoJCQlsZWZ0OiBvZmZzZXQubGVmdCAtIHBhcmVudE9mZnNldC5sZWZ0IC0galF1ZXJ5LmNzcyggZWxlbSwgIm1hcmdpbkxlZnQiLCB0cnVlICkKCQl9OwoJfSwKCglvZmZzZXRQYXJlbnQ6IGZ1bmN0aW9uKCkgewoJCXJldHVybiB0aGlzLm1hcCggZnVuY3Rpb24oKSB7CgkJCXZhciBvZmZzZXRQYXJlbnQgPSB0aGlzLm9mZnNldFBhcmVudDsKCgkJCXdoaWxlICggb2Zmc2V0UGFyZW50ICYmICggIWpRdWVyeS5ub2RlTmFtZSggb2Zmc2V0UGFyZW50LCAiaHRtbCIgKSAmJgoJCQkJalF1ZXJ5LmNzcyggb2Zmc2V0UGFyZW50LCAicG9zaXRpb24iICkgPT09ICJzdGF0aWMiICkgKSB7CgkJCQlvZmZzZXRQYXJlbnQgPSBvZmZzZXRQYXJlbnQub2Zmc2V0UGFyZW50OwoJCQl9CgkJCXJldHVybiBvZmZzZXRQYXJlbnQgfHwgZG9jdW1lbnRFbGVtZW50OwoJCX0gKTsKCX0KfSApOwoKLy8gQ3JlYXRlIHNjcm9sbExlZnQgYW5kIHNjcm9sbFRvcCBtZXRob2RzCmpRdWVyeS5lYWNoKCB7IHNjcm9sbExlZnQ6ICJwYWdlWE9mZnNldCIsIHNjcm9sbFRvcDogInBhZ2VZT2Zmc2V0IiB9LCBmdW5jdGlvbiggbWV0aG9kLCBwcm9wICkgewoJdmFyIHRvcCA9IC9ZLy50ZXN0KCBwcm9wICk7CgoJalF1ZXJ5LmZuWyBtZXRob2QgXSA9IGZ1bmN0aW9uKCB2YWwgKSB7CgkJcmV0dXJuIGFjY2VzcyggdGhpcywgZnVuY3Rpb24oIGVsZW0sIG1ldGhvZCwgdmFsICkgewoJCQl2YXIgd2luID0gZ2V0V2luZG93KCBlbGVtICk7CgoJCQlpZiAoIHZhbCA9PT0gdW5kZWZpbmVkICkgewoJCQkJcmV0dXJuIHdpbiA/ICggcHJvcCBpbiB3aW4gKSA/IHdpblsgcHJvcCBdIDoKCQkJCQl3aW4uZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50WyBtZXRob2QgXSA6CgkJCQkJZWxlbVsgbWV0aG9kIF07CgkJCX0KCgkJCWlmICggd2luICkgewoJCQkJd2luLnNjcm9sbFRvKAoJCQkJCSF0b3AgPyB2YWwgOiBqUXVlcnkoIHdpbiApLnNjcm9sbExlZnQoKSwKCQkJCQl0b3AgPyB2YWwgOiBqUXVlcnkoIHdpbiApLnNjcm9sbFRvcCgpCgkJCQkpOwoKCQkJfSBlbHNlIHsKCQkJCWVsZW1bIG1ldGhvZCBdID0gdmFsOwoJCQl9CgkJfSwgbWV0aG9kLCB2YWwsIGFyZ3VtZW50cy5sZW5ndGgsIG51bGwgKTsKCX07Cn0gKTsKCi8vIFN1cHBvcnQ6IFNhZmFyaTw3LTgrLCBDaHJvbWU8MzctNDQrCi8vIEFkZCB0aGUgdG9wL2xlZnQgY3NzSG9va3MgdXNpbmcgalF1ZXJ5LmZuLnBvc2l0aW9uCi8vIFdlYmtpdCBidWc6IGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0yOTA4NAovLyBnZXRDb21wdXRlZFN0eWxlIHJldHVybnMgcGVyY2VudCB3aGVuIHNwZWNpZmllZCBmb3IgdG9wL2xlZnQvYm90dG9tL3JpZ2h0Ci8vIHJhdGhlciB0aGFuIG1ha2UgdGhlIGNzcyBtb2R1bGUgZGVwZW5kIG9uIHRoZSBvZmZzZXQgbW9kdWxlLCB3ZSBqdXN0IGNoZWNrIGZvciBpdCBoZXJlCmpRdWVyeS5lYWNoKCBbICJ0b3AiLCAibGVmdCIgXSwgZnVuY3Rpb24oIGksIHByb3AgKSB7CglqUXVlcnkuY3NzSG9va3NbIHByb3AgXSA9IGFkZEdldEhvb2tJZiggc3VwcG9ydC5waXhlbFBvc2l0aW9uLAoJCWZ1bmN0aW9uKCBlbGVtLCBjb21wdXRlZCApIHsKCQkJaWYgKCBjb21wdXRlZCApIHsKCQkJCWNvbXB1dGVkID0gY3VyQ1NTKCBlbGVtLCBwcm9wICk7CgoJCQkJLy8gaWYgY3VyQ1NTIHJldHVybnMgcGVyY2VudGFnZSwgZmFsbGJhY2sgdG8gb2Zmc2V0CgkJCQlyZXR1cm4gcm51bW5vbnB4LnRlc3QoIGNvbXB1dGVkICkgPwoJCQkJCWpRdWVyeSggZWxlbSApLnBvc2l0aW9uKClbIHByb3AgXSArICJweCIgOgoJCQkJCWNvbXB1dGVkOwoJCQl9CgkJfQoJKTsKfSApOwoKCi8vIENyZWF0ZSBpbm5lckhlaWdodCwgaW5uZXJXaWR0aCwgaGVpZ2h0LCB3aWR0aCwgb3V0ZXJIZWlnaHQgYW5kIG91dGVyV2lkdGggbWV0aG9kcwpqUXVlcnkuZWFjaCggeyBIZWlnaHQ6ICJoZWlnaHQiLCBXaWR0aDogIndpZHRoIiB9LCBmdW5jdGlvbiggbmFtZSwgdHlwZSApIHsKCWpRdWVyeS5lYWNoKCB7IHBhZGRpbmc6ICJpbm5lciIgKyBuYW1lLCBjb250ZW50OiB0eXBlLCAiIjogIm91dGVyIiArIG5hbWUgfSwKCWZ1bmN0aW9uKCBkZWZhdWx0RXh0cmEsIGZ1bmNOYW1lICkgewoKCQkvLyBtYXJnaW4gaXMgb25seSBmb3Igb3V0ZXJIZWlnaHQsIG91dGVyV2lkdGgKCQlqUXVlcnkuZm5bIGZ1bmNOYW1lIF0gPSBmdW5jdGlvbiggbWFyZ2luLCB2YWx1ZSApIHsKCQkJdmFyIGNoYWluYWJsZSA9IGFyZ3VtZW50cy5sZW5ndGggJiYgKCBkZWZhdWx0RXh0cmEgfHwgdHlwZW9mIG1hcmdpbiAhPT0gImJvb2xlYW4iICksCgkJCQlleHRyYSA9IGRlZmF1bHRFeHRyYSB8fCAoIG1hcmdpbiA9PT0gdHJ1ZSB8fCB2YWx1ZSA9PT0gdHJ1ZSA/ICJtYXJnaW4iIDogImJvcmRlciIgKTsKCgkJCXJldHVybiBhY2Nlc3MoIHRoaXMsIGZ1bmN0aW9uKCBlbGVtLCB0eXBlLCB2YWx1ZSApIHsKCQkJCXZhciBkb2M7CgoJCQkJaWYgKCBqUXVlcnkuaXNXaW5kb3coIGVsZW0gKSApIHsKCgkJCQkJLy8gQXMgb2YgNS84LzIwMTIgdGhpcyB3aWxsIHlpZWxkIGluY29ycmVjdCByZXN1bHRzIGZvciBNb2JpbGUgU2FmYXJpLCBidXQgdGhlcmUKCQkJCQkvLyBpc24ndCBhIHdob2xlIGxvdCB3ZSBjYW4gZG8uIFNlZSBwdWxsIHJlcXVlc3QgYXQgdGhpcyBVUkwgZm9yIGRpc2N1c3Npb246CgkJCQkJLy8gaHR0cHM6Ly9naXRodWIuY29tL2pxdWVyeS9qcXVlcnkvcHVsbC83NjQKCQkJCQlyZXR1cm4gZWxlbS5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnRbICJjbGllbnQiICsgbmFtZSBdOwoJCQkJfQoKCQkJCS8vIEdldCBkb2N1bWVudCB3aWR0aCBvciBoZWlnaHQKCQkJCWlmICggZWxlbS5ub2RlVHlwZSA9PT0gOSApIHsKCQkJCQlkb2MgPSBlbGVtLmRvY3VtZW50RWxlbWVudDsKCgkJCQkJLy8gRWl0aGVyIHNjcm9sbFtXaWR0aC9IZWlnaHRdIG9yIG9mZnNldFtXaWR0aC9IZWlnaHRdIG9yIGNsaWVudFtXaWR0aC9IZWlnaHRdLAoJCQkJCS8vIHdoaWNoZXZlciBpcyBncmVhdGVzdAoJCQkJCS8vIHVuZm9ydHVuYXRlbHksIHRoaXMgY2F1c2VzIGJ1ZyAjMzgzOCBpbiBJRTYvOCBvbmx5LAoJCQkJCS8vIGJ1dCB0aGVyZSBpcyBjdXJyZW50bHkgbm8gZ29vZCwgc21hbGwgd2F5IHRvIGZpeCBpdC4KCQkJCQlyZXR1cm4gTWF0aC5tYXgoCgkJCQkJCWVsZW0uYm9keVsgInNjcm9sbCIgKyBuYW1lIF0sIGRvY1sgInNjcm9sbCIgKyBuYW1lIF0sCgkJCQkJCWVsZW0uYm9keVsgIm9mZnNldCIgKyBuYW1lIF0sIGRvY1sgIm9mZnNldCIgKyBuYW1lIF0sCgkJCQkJCWRvY1sgImNsaWVudCIgKyBuYW1lIF0KCQkJCQkpOwoJCQkJfQoKCQkJCXJldHVybiB2YWx1ZSA9PT0gdW5kZWZpbmVkID8KCgkJCQkJLy8gR2V0IHdpZHRoIG9yIGhlaWdodCBvbiB0aGUgZWxlbWVudCwgcmVxdWVzdGluZyBidXQgbm90IGZvcmNpbmcgcGFyc2VGbG9hdAoJCQkJCWpRdWVyeS5jc3MoIGVsZW0sIHR5cGUsIGV4dHJhICkgOgoKCQkJCQkvLyBTZXQgd2lkdGggb3IgaGVpZ2h0IG9uIHRoZSBlbGVtZW50CgkJCQkJalF1ZXJ5LnN0eWxlKCBlbGVtLCB0eXBlLCB2YWx1ZSwgZXh0cmEgKTsKCQkJfSwgdHlwZSwgY2hhaW5hYmxlID8gbWFyZ2luIDogdW5kZWZpbmVkLCBjaGFpbmFibGUsIG51bGwgKTsKCQl9OwoJfSApOwp9ICk7CgoKalF1ZXJ5LmZuLmV4dGVuZCggewoKCWJpbmQ6IGZ1bmN0aW9uKCB0eXBlcywgZGF0YSwgZm4gKSB7CgkJcmV0dXJuIHRoaXMub24oIHR5cGVzLCBudWxsLCBkYXRhLCBmbiApOwoJfSwKCXVuYmluZDogZnVuY3Rpb24oIHR5cGVzLCBmbiApIHsKCQlyZXR1cm4gdGhpcy5vZmYoIHR5cGVzLCBudWxsLCBmbiApOwoJfSwKCglkZWxlZ2F0ZTogZnVuY3Rpb24oIHNlbGVjdG9yLCB0eXBlcywgZGF0YSwgZm4gKSB7CgkJcmV0dXJuIHRoaXMub24oIHR5cGVzLCBzZWxlY3RvciwgZGF0YSwgZm4gKTsKCX0sCgl1bmRlbGVnYXRlOiBmdW5jdGlvbiggc2VsZWN0b3IsIHR5cGVzLCBmbiApIHsKCgkJLy8gKCBuYW1lc3BhY2UgKSBvciAoIHNlbGVjdG9yLCB0eXBlcyBbLCBmbl0gKQoJCXJldHVybiBhcmd1bWVudHMubGVuZ3RoID09PSAxID8KCQkJdGhpcy5vZmYoIHNlbGVjdG9yLCAiKioiICkgOgoJCQl0aGlzLm9mZiggdHlwZXMsIHNlbGVjdG9yIHx8ICIqKiIsIGZuICk7Cgl9Cn0gKTsKCi8vIFRoZSBudW1iZXIgb2YgZWxlbWVudHMgY29udGFpbmVkIGluIHRoZSBtYXRjaGVkIGVsZW1lbnQgc2V0CmpRdWVyeS5mbi5zaXplID0gZnVuY3Rpb24oKSB7CglyZXR1cm4gdGhpcy5sZW5ndGg7Cn07CgpqUXVlcnkuZm4uYW5kU2VsZiA9IGpRdWVyeS5mbi5hZGRCYWNrOwoKCgoKLy8gUmVnaXN0ZXIgYXMgYSBuYW1lZCBBTUQgbW9kdWxlLCBzaW5jZSBqUXVlcnkgY2FuIGJlIGNvbmNhdGVuYXRlZCB3aXRoIG90aGVyCi8vIGZpbGVzIHRoYXQgbWF5IHVzZSBkZWZpbmUsIGJ1dCBub3QgdmlhIGEgcHJvcGVyIGNvbmNhdGVuYXRpb24gc2NyaXB0IHRoYXQKLy8gdW5kZXJzdGFuZHMgYW5vbnltb3VzIEFNRCBtb2R1bGVzLiBBIG5hbWVkIEFNRCBpcyBzYWZlc3QgYW5kIG1vc3Qgcm9idXN0Ci8vIHdheSB0byByZWdpc3Rlci4gTG93ZXJjYXNlIGpxdWVyeSBpcyB1c2VkIGJlY2F1c2UgQU1EIG1vZHVsZSBuYW1lcyBhcmUKLy8gZGVyaXZlZCBmcm9tIGZpbGUgbmFtZXMsIGFuZCBqUXVlcnkgaXMgbm9ybWFsbHkgZGVsaXZlcmVkIGluIGEgbG93ZXJjYXNlCi8vIGZpbGUgbmFtZS4gRG8gdGhpcyBhZnRlciBjcmVhdGluZyB0aGUgZ2xvYmFsIHNvIHRoYXQgaWYgYW4gQU1EIG1vZHVsZSB3YW50cwovLyB0byBjYWxsIG5vQ29uZmxpY3QgdG8gaGlkZSB0aGlzIHZlcnNpb24gb2YgalF1ZXJ5LCBpdCB3aWxsIHdvcmsuCgovLyBOb3RlIHRoYXQgZm9yIG1heGltdW0gcG9ydGFiaWxpdHksIGxpYnJhcmllcyB0aGF0IGFyZSBub3QgalF1ZXJ5IHNob3VsZAovLyBkZWNsYXJlIHRoZW1zZWx2ZXMgYXMgYW5vbnltb3VzIG1vZHVsZXMsIGFuZCBhdm9pZCBzZXR0aW5nIGEgZ2xvYmFsIGlmIGFuCi8vIEFNRCBsb2FkZXIgaXMgcHJlc2VudC4galF1ZXJ5IGlzIGEgc3BlY2lhbCBjYXNlLiBGb3IgbW9yZSBpbmZvcm1hdGlvbiwgc2VlCi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9qcmJ1cmtlL3JlcXVpcmVqcy93aWtpL1VwZGF0aW5nLWV4aXN0aW5nLWxpYnJhcmllcyN3aWtpLWFub24KCmlmICggdHlwZW9mIGRlZmluZSA9PT0gImZ1bmN0aW9uIiAmJiBkZWZpbmUuYW1kICkgewoJZGVmaW5lKCAianF1ZXJ5IiwgW10sIGZ1bmN0aW9uKCkgewoJCXJldHVybiBqUXVlcnk7Cgl9ICk7Cn0KCgoKdmFyCgoJLy8gTWFwIG92ZXIgalF1ZXJ5IGluIGNhc2Ugb2Ygb3ZlcndyaXRlCglfalF1ZXJ5ID0gd2luZG93LmpRdWVyeSwKCgkvLyBNYXAgb3ZlciB0aGUgJCBpbiBjYXNlIG9mIG92ZXJ3cml0ZQoJXyQgPSB3aW5kb3cuJDsKCmpRdWVyeS5ub0NvbmZsaWN0ID0gZnVuY3Rpb24oIGRlZXAgKSB7CglpZiAoIHdpbmRvdy4kID09PSBqUXVlcnkgKSB7CgkJd2luZG93LiQgPSBfJDsKCX0KCglpZiAoIGRlZXAgJiYgd2luZG93LmpRdWVyeSA9PT0galF1ZXJ5ICkgewoJCXdpbmRvdy5qUXVlcnkgPSBfalF1ZXJ5OwoJfQoKCXJldHVybiBqUXVlcnk7Cn07CgovLyBFeHBvc2UgalF1ZXJ5IGFuZCAkIGlkZW50aWZpZXJzLCBldmVuIGluCi8vIEFNRCAoIzcxMDIjY29tbWVudDoxMCwgaHR0cHM6Ly9naXRodWIuY29tL2pxdWVyeS9qcXVlcnkvcHVsbC81NTcpCi8vIGFuZCBDb21tb25KUyBmb3IgYnJvd3NlciBlbXVsYXRvcnMgKCMxMzU2NikKaWYgKCAhbm9HbG9iYWwgKSB7Cgl3aW5kb3cualF1ZXJ5ID0gd2luZG93LiQgPSBqUXVlcnk7Cn0KCnJldHVybiBqUXVlcnk7Cn0pKTsK</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPBody>
        <TcpPackets>
          <PacketInfo time="519314625" offset="0" length="596" />
          <PacketInfo time="519314640" offset="596" length="87176" />
        </TcpPackets>
      </HTTPResponse>
    </HTTPTask>
    <HTTPTask id="341" hostname="dev.bluealgo.com" path="https://dev.bluealgo.com/smartformup/lock-ic.png" url="https://dev.bluealgo.com/smartformup/lock-ic.png" ip="144.126.253.3" port="443" connectionId="24" origin="HTML" frame="1" startDateTime="2024-02-15T10:57:48.143+05:30" startTime="519315234" endTime="519315250">
      <HTTPRequest method="GET">
        <HTTPHeaders>
          <HTTPHeaderEntity name="sec-ch-ua" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ik5vdCBBKEJyYW5kIjt2PSI5OSIsICJHb29nbGUgQ2hyb21lIjt2PSIxMjEiLCAiQ2hyb21pdW0iO3Y9IjEyMSI=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Origin" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cHM6Ly9kZXYuYmx1ZWFsZ28uY29t</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="sec-ch-ua-mobile" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>PzA=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="User-Agent" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEyMS4wLjAuMCBTYWZhcmkvNTM3LjM2</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="sec-ch-ua-platform" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>IldpbmRvd3Mi</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aW1hZ2UvYXZpZixpbWFnZS93ZWJwLGltYWdlL2FwbmcsaW1hZ2Uvc3ZnK3htbCxpbWFnZS8qLCovKjtxPTAuOA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Sec-Fetch-Site" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>c2FtZS1vcmlnaW4=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Sec-Fetch-Mode" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Y29ycw==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Sec-Fetch-Dest" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aW1hZ2U=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Referer" index="9">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cHM6Ly9kZXYuYmx1ZWFsZ28uY29tL3NtYXJ0Zm9ybXVwL2xvYWRpbmRleD9vcHBvcnR1bml0eUlkPTAwNjBvMDAwMDFlU0lKMEFBTyZjdXN0b21lcmlkPWN1c3QxMDA1JmFjY2Vzc3Rva2VuPXVYQ3haUktVLU1mMndpVGczX0E4ZFB1OTU3dGFMWHhQ</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Encoding" index="10">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Language" index="11">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZW4tVVMsZW47cT0wLjk=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Cookie" index="12">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SlNFU1NJT05JRD0zRDVFOEZFODBBNEYzNEY5QkM0OEI2RTc0ODhCOEY5MQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Host" index="13">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZGV2LmJsdWVhbGdvLmNvbQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0VUIGh0dHBzOi8vZGV2LmJsdWVhbGdvLmNvbS9zbWFydGZvcm11cC9sb2NrLWljLnBuZyBIVFRQLzEuMQ0Kc2VjLWNoLXVhOiAiTm90IEEoQnJhbmQiO3Y9Ijk5IiwgIkdvb2dsZSBDaHJvbWUiO3Y9IjEyMSIsICJDaHJvbWl1bSI7dj0iMTIxIg0KT3JpZ2luOiBodHRwczovL2Rldi5ibHVlYWxnby5jb20NCnNlYy1jaC11YS1tb2JpbGU6ID8wDQpVc2VyLUFnZW50OiBNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvMTIxLjAuMC4wIFNhZmFyaS81MzcuMzYNCnNlYy1jaC11YS1wbGF0Zm9ybTogIldpbmRvd3MiDQpBY2NlcHQ6IGltYWdlL2F2aWYsaW1hZ2Uvd2VicCxpbWFnZS9hcG5nLGltYWdlL3N2Zyt4bWwsaW1hZ2UvKiwqLyo7cT0wLjgNClNlYy1GZXRjaC1TaXRlOiBzYW1lLW9yaWdpbg0KU2VjLUZldGNoLU1vZGU6IGNvcnMNClNlYy1GZXRjaC1EZXN0OiBpbWFnZQ0KUmVmZXJlcjogaHR0cHM6Ly9kZXYuYmx1ZWFsZ28uY29tL3NtYXJ0Zm9ybXVwL2xvYWRpbmRleD9vcHBvcnR1bml0eUlkPTAwNjBvMDAwMDFlU0lKMEFBTyZjdXN0b21lcmlkPWN1c3QxMDA1JmFjY2Vzc3Rva2VuPXVYQ3haUktVLU1mMndpVGczX0E4ZFB1OTU3dGFMWHhQDQpBY2NlcHQtRW5jb2Rpbmc6IGd6aXAsIGRlZmxhdGUNCkFjY2VwdC1MYW5ndWFnZTogZW4tVVMsZW47cT0wLjkNCkNvb2tpZTogSlNFU1NJT05JRD0zRDVFOEZFODBBNEYzNEY5QkM0OEI2RTc0ODhCOEY5MQ0KSG9zdDogZGV2LmJsdWVhbGdvLmNvbQ0KDQo=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
          <HTTPCookies>
            <HTTPHeaderEntity name="JSESSIONID" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>M0Q1RThGRTgwQTRGMzRGOUJDNDhCNkU3NDg4QjhGOTE=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
          </HTTPCookies>
        </HTTPHeaders>
      </HTTPRequest>
      <HTTPResponse>
        <contentLenght>5593</contentLenght>
        <HTTPHeaders>
          <HTTPHeaderEntity name="Date" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VGh1LCAxNSBGZWIgMjAyNCAwNToxODo1MSBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Type" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aW1hZ2UvcG5n</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Length" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>NTU5Mw==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Connection" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Access-Control-Allow-Origin" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Kg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Ranges" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ynl0ZXM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="ETag" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Vy8iNTU5My0xNzAzNTg5MDUyMDAwIg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Last-Modified" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VHVlLCAyNiBEZWMgMjAyMyAxMToxMDo1MiBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Strict-Transport-Security" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bWF4LWFnZT0xNTcyNDgwMDsgaW5jbHVkZVN1YkRvbWFpbnM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SFRUUC8xLjEgMjAwIA0KRGF0ZTogVGh1LCAxNSBGZWIgMjAyNCAwNToxODo1MSBHTVQNCkNvbnRlbnQtVHlwZTogaW1hZ2UvcG5nDQpDb250ZW50LUxlbmd0aDogNTU5Mw0KQ29ubmVjdGlvbjoga2VlcC1hbGl2ZQ0KQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luOiAqDQpBY2NlcHQtUmFuZ2VzOiBieXRlcw0KRVRhZzogVy8iNTU5My0xNzAzNTg5MDUyMDAwIg0KTGFzdC1Nb2RpZmllZDogVHVlLCAyNiBEZWMgMjAyMyAxMToxMDo1MiBHTVQNClN0cmljdC1UcmFuc3BvcnQtU2VjdXJpdHk6IG1heC1hZ2U9MTU3MjQ4MDA7IGluY2x1ZGVTdWJEb21haW5zDQoNCg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPBody>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAMAAADDpiTIAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAA6PAAAOjwHjOWJ6AAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAtBQTFRF////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAjcMAnQAAAO90Uk5TAAECAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHiAhIiMkJSYnKCkqKywtLi8wMTIzNDU2Nzg5Ojs9Pj9AQUJERUZHSUpMTU5PUFFSU1RVVldZWltcXV9gYWJjZGVmZ2hpamxtbm9wcXJzdHV2d3h5ent8fX5/gIGCg4aHiImKi4yNjo+RkpOUlZaXmJmam5ydnp+goaKjpKWmp6ipqqutrq+wsbKztLW2uLm6u7y9vr/AwcLDxcbHyMnKzM3Oz9DR0tPU1dbX2Nna29zd3+Dh4uPk5ebn6Onq6+zt7u/w8fLz9PX29/j5+vv8/f55IfRLAAARgElEQVR42u3d+3+WdR3H8WsbG4PhhiIgEjQwcZzyFIxDEockwAMigkOy1ETCQrQEsjgYCOUpSRumuXUgZSDGZGToTMRChymMQOYBEIEBN9z3/f0X+iHr0UFx2/fzvb6H6/X+C+735/OEXfd1X4coSlLade1XPn76rIUrH6/Z0vDe8RMf5/h7DVtqHl+5cNb08eX9uraLSHApGDxtcc3Ow6pFObyzZvG0wQVMLYjklE78ftX2U6rVObW96vsTS3OYoL8pGn3bqpeOKK0ceWnVbaOLmKV/GTS3NqWEkqqdO4iJepQzpzz2jhLOO49NOZPJepDcoQu2pJWRpLcsGJrLhF3OORVP7VdGs/+pinOYs6Nf9a7ZkFExJLPhGr4iupcLlr2vYsv7yy5g4i6lY8ULKua8UNGRuTuSix88pCzk0IMXM3v7KbnlFWUtr9xSwgasZmBls7Ka5sqBbMFa+j2VUdaTeaofm7CSvqvTyomkV/dlG7Gn96pTypmcWtWbjcSacx9IKaeSeuBcthJbuq84rpzL8RXd2Uws6bK0WTmZ5qVd2I7xFMw/rJzN4fn8SmA4I95QTueN4ezIYIofzCrHk73/DPZkKpP2Kg+yZwKbMpJzfqM8SRXfB+STc+OHypscuIGFCecLm5RX2cjZYcm0u+u48izH5uaxN6kMfk15mFf6szmZTGtWXubIFHYnkPyVytss405j/S9/LyiPU9eNDWqe+t2nvM7ecnaok1tPKs+TuoUttjkdfqkCyOoObLJt6bNNBZFXS9llW3L5QRVIDl7ONlt/7n9BRgWTzAIeNdPK5D6qgsqjPFigdWd/qlVgqc5nqy1PYY0KLjWF7LWl6fS8CjDPd2KzLUvnF1WQebEzu21Jum1TgWYbvwy0ID0bVLBp6Ml+P/P03y4VcHb1YcOnT/93VNB5h8uETpuLP1CB5wMeLHSaDDqkgs8hHjv86cd/e1QCsocjwU/JGdtUIrKNuwc/Me2eVQnJs1wr+klZpRKTVWz7//M9laB8j33/b67LJglA9jo2/t+5LKUSldRl7Pw/c8FBlbAc5IHz/5Huu1TisounSPw7HV9WCczLvHDg4+T8XiUyv+dS4X9mjkpo5rD7KIqii1JJBZC6iO1HUccdKrHZwWFAFP1cJTg/Z//XqETnmqTvv/eHyQbwYcLfNJFn5QEwTZtW3Tt/9szJXx02sHfvgcO+Onnm7Pn3rtrUZOOzvJDsp8ktjHfaJxvWLK4Y+qmveisZWrF4TUPMDyVZmOT9j4jxtU8n6uaPaNENmvkj5tediO9zpUckd/+dG+Macv2iMa16UEuHMYvq48LZmNw7xuK5B/x41aTitny64klV8Tygtjqp+58Zx3RfvEnjH1jnm2K5T3VmMvff1fxNAHsWab/Vs98i89eqH+rKKUADya4ZJ/Jcltxxa0xfrpbIE4JfMjvVzK8Hy33Wwb82+8Sq7JeSt/+cl4we9j9ZJvtxy540+qXgpeRdGjDD4DhPVZ4v/4HPrzT5suIZSdt/8bvmhvm4oZvw+zxu7jO/W5wwAMuNjbJhlLlPPcrc00uWJ2v/ZaZOuB83+/LWgvmmzg2dLEsUgOcMjfG580x/8vOMffQk7f9KQ39Ip8bx4acaOny5Mjn7L9xlZIJVMf2q0rnKyMfflZxHiS4w8nPvt+Ir8C0jPxcvSMr+ex8zML2dl8RZ4ZKdBiocS8rlYSaeBPG7kng7lPzOQImEPDeih/z/nyct3GMzR/6b7IkeiQCwVHxwdt7NVr5XvMjSJOy/5CPxc3+97DTpJX5e8KOSBACYJz21+i62qnSpl+4yL/z9t5e++n5Dkb0yRRuEyzS1Dx7AN6TP/hTYbFMgfU7oG6HvP/dvsgO73/LbuHLvl+3zt9DfLna17LwcuK1G+OamqwMHIPs0oB+7UOnHopVeDnv/XxEd1pNOXEmX86Roqa8EDUD0edAbC9woVbBRstWzIe//QslJverMZXTFr0r2ujBgAL+S/PncoRPnPSQvcPhVuPs/U/B5YPv7udSs3365ZqkzgwXwTcHf/4a7VW244G+D3wwWwGa5ITn3jEXBp11uDnX/veTuBnzavXZPi5XL9goUwB1iI9p9lnvtztotVu+OQAG8JjWgU8NdrDdc7N7B18Lc/8DQ/4XI/Q83MEgAi6XGs97Re6lz1ks1XBzi/nOkHgm272xXK569T6hiY4iPCxgp9c/jWnc7XivVcWSAAB4Wmk2tyyVrhUo+FN7+8w8InQJ0+jZqqdveD+QHB2CC0L+Ne92uea9QzQnBARC6enJvJ7drdhK6W6QqtP0XCt0QOsX1olNkeh4L7V7xUUIXAbnfVOjyoFGBAfiByFQy/d1v2l/mmZI/CAxAnchUvHiutswz0OsCOwSQuSX8iz50/aJI1RNhHQTIHALU+FG2hoMAQ4cAw/woO4yDADOHAM/70vZ5DgKMHAKM8aXuGA4C/icid4TV+9NX5MERId0jdo/EQK7wp+8VEn3vCQiAxPXg73r0is08iafJBnR1uMghwAqfGq/gIED8EOASnxpfwkGA9CHAG35VfoODAOHvxXf5VfmuJJ33+MwIPBku69mDlHsL3AbXFMr+i5N4Xkzi3GcoL5K6VGAWX/et9NcFSl8aCIBp+qNIe/eK9c4CL5qcxpcAD08DC54ODuVrgMAFwR7eLCdwK2QolwZv1R/FWP9aj9VvvTUQAEe1J5Hq6F/rjvpPxDoaxv57JvR3EYFfwHoGAUDgl4CFPvYWeIp0GL8G3JzQu6UF7oe/OQgA92nPobnAx94FzdrF7wsCwLqkXh+pfzZ4XRAA3tKew8N+Ftd/JMZbIey/QP+c6Bw/m+s/PDRdEACAXvrHQuP9bD5ev3kIzwwt0x9DXz+b99VvXhYAgCH65wHz/Gyep38ucEgAAEZrT+F1X6u/rl19dAAAJmlPYY2v1ddoV58UAAD9y0GW+Fp9CZeERBJngm/0tfqNnAuOoui72lO4ytfqV2lX/24AAPQvCBvra3X9a0JCuChsufYUyn2tXq5dfXkAAB7RnkJ/X6v3167+SAAA9F8W6e35UP2z4CG8RHKt9hRKfK1eol19bQAANmlPIc/X6nna1TcFAODPCb42Vvt66D8HAGBHgm+S1b4tekcAAHbpDqHR3+7a78naFQCARgAksjtDAABDAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB0BwDdGQLdGQLdGQLdGQLdGQLdGQLdGQLdGQLdGQLdGQLdGQLdGQLdGQLdGQLdGQLdGQLdGQLdLSa/z9Dyf0X7kelN5d5GsPvQPvl+7L7n3F/U7U4rIp707rpfzO3p9vbzJjzD7s0qeGaCu2/Q6bBwLxsyn70LO7i5/yE7WE482THExeO+H/Gff3x/CH7k3BFh/62sJc5sdex1qgP2s5N4s3+AS/vvu4+NxJ19fd3Zf69G9hF/Gp15p3L3N9mGjbzZ3Y39525hF3byp1wnAMxhE7Yy24kDwGYWYStHP29//zmb2IO9PGcfwM1swWZusL3/LodZgs0cLLEMYB47sJs5li8A2M0K7Gan3a+CV7EB25loFQBfAayn1ub+BzF/+xloEcBKxm8/Ky0C2M747We7vf2fnWX89pM92xqAK5m+C7nSGoAVDN+FrLAGgAtBnchWW/svyTB8F5Kx9XtAObN3I+WWAHyN0buRr1kCcAOjdyO2LgqYy+jdyFxLAJYyejey1BKARxm9G3nUEoCnGb0beZqLAZKdTZYA1DF6N1IHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMDoAUAA4GGyf699+DsTL7rw41w04faHNu7OACARAJqfuHpg4SfVKRxw1eojAAgbQGZjRafTVSqaviEDgGABvD7vc5/d6ty5fwFAkADeHt/SYuPeBEBwAI4vLGx5s/Z3HwNAWADW9Wldt9K1AAgIQOOk1reb1AiAUADUFLWlXlENAMIAUNmubf3aVQIgBAAar1VcCgDvAWRv16l4exYAfgM4OV2v4/STAPAZQHaibsmJWQB4DOCH+i1/CAB/AdTm6rfMrQWArwD2dZOo2W0fAPwEkP6yTM8vpwHgJYB5UkXnAcBHAOtzpIrmrAeAfwAyZXJNyzIA8A7AE5JVnwCAbwDS50tWPT8NAM8ArJbtuhoAfgE4dZ5s1/NOAcArAI9Jl30MAD4BSJdKly1NA8AjAH+Ub/tHAHgE4E75tncCwCMAg+XbDgaAPwD2mqi7FwDeAHjERN1HAOANgCtM1L0CAL4ASHUyUbdTCgCeANhspu9mAHgCoNJM30oAeAJgkZm+iwDgCYBZZvrOAoAnACab6TsZAJ4AGGGm7wgAeAKg1EzfUgB4AqDQTN9CAPgB4JCpwocA4AWAlKnCKQD48SfgLDN9z+JPgCcABpjpOwAAngAYY6bvGAB4AuB6M32vB4AnAO4w0/cOAHgCYIWZvisA4AmAKjN9qwDgCYB6M33rAeAJgExXE3W7ZgDgCQA1w0TdGQoAvgD4rYm6vwWANwCOtJdv2/4IALwBoC6Xb3u5AoA/AB6Sb/sQADwCsEe+7R4AeARADZcuO1wBwCcAtdJlawHgFQA1TrbrOAUAvwBszZGsmrMVAJ4BUFMlq05VAPANwM58uab5OwHgHQB1q1zTWxUA/APwXrFU0eL3AOAhALUuV6Zn7joFAB8BqGUyPZcpAPgJQM2UqDlTAcBXAKmR+i1HpgDgLQD1QaluydIPFAD8BaD+eoZexzP+qgDgMwBVodexQgHAbwCa14fOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJIHYLZex9kA8BzAEr2OSwDgOYDVeh1XA8BzAI16HRsB4DkAdalOxUsVAHwHsEyn4jIAeA/gaI+2N+xxFADeA1A/a3vDnykA+A8gPbqtBUenARAAAHWgb9v69T2gABACANXQqy31ejUoAIQBQDUNaX27IU0KAKEAUMcWFLWuW9GCYwoA4QBQqum27i1v1v22Jp+6AaBFyWy+u2LMhZ+ZMRV3b8741QwACQ8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAnD4bGb0b2WgJQDWjdyPVlgA8wOjdyAOWANzD6N3IPZYAzGL0bmSWJQBTGb0bmWoJwFhG70bGWgIwiNG7kUGWAOR9xOxdyEd5lgBE6xm+C1lva//RnQzfhdxpDcAwhu9ChlkDkN/M9O2nOd8aAH4OciEb7e0/+jbjt59vWwTQmb8B1nO0xCIAX96rFnIetLl/TgbaT5lVAFwWZjt/sLv/aDIrsJsJlgG0284ObObVXMsAoqEZtmAv6Ysj67mPNdjLUvv7jzruZA+28lYHBwBEo7Nswk6yoyIn8lNWYSc/cWP/US53iFhJda4jAKL8tWwj/qzNj5xJYS37iDu1hZFDKdrCRuLNlqLIqRQu57tAnMf/ywsj1zKqkb3ElcZRkYMprmQz8aSyOHIzl1WfZDumc7L6ssjddJv3NisymbfndYvcTs7Im5ZU17/PqqTzfn31kptG5kjv6x+Ng/RtvYrM4gAAAABJRU5ErkJggg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPBody>
        <TcpPackets>
          <PacketInfo time="519315250" offset="0" length="319" />
          <PacketInfo time="519315250" offset="319" length="5593" />
        </TcpPackets>
      </HTTPResponse>
    </HTTPTask>
    <HTTPTask id="346" hostname="cdn.jsdelivr.net" path="https://cdn.jsdelivr.net/npm/signature_pad@4.0.0/dist/signature_pad.umd.min.js" url="https://cdn.jsdelivr.net/npm/signature_pad@4.0.0/dist/signature_pad.umd.min.js" ip="[2a04:4e42:42:0:0:0:0:485]" port="443" connectionId="25" origin="HTML" frame="1" startDateTime="2024-02-15T10:57:48.146+05:30" startTime="519315281" endTime="519315296">
      <HTTPRequest method="GET">
        <HTTPHeaders>
          <HTTPHeaderEntity name="sec-ch-ua" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ik5vdCBBKEJyYW5kIjt2PSI5OSIsICJHb29nbGUgQ2hyb21lIjt2PSIxMjEiLCAiQ2hyb21pdW0iO3Y9IjEyMSI=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="sec-ch-ua-mobile" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>PzA=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="User-Agent" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEyMS4wLjAuMCBTYWZhcmkvNTM3LjM2</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="sec-ch-ua-platform" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>IldpbmRvd3Mi</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ki8q</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Sec-Fetch-Site" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Y3Jvc3Mtc2l0ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Sec-Fetch-Mode" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bm8tY29ycw==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Sec-Fetch-Dest" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>c2NyaXB0</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Referer" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cHM6Ly9kZXYuYmx1ZWFsZ28uY29tLw==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Encoding" index="9">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Language" index="10">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZW4tVVMsZW47cT0wLjk=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Host" index="11">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Y2RuLmpzZGVsaXZyLm5ldA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0VUIGh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vc2lnbmF0dXJlX3BhZEA0LjAuMC9kaXN0L3NpZ25hdHVyZV9wYWQudW1kLm1pbi5qcyBIVFRQLzEuMQ0Kc2VjLWNoLXVhOiAiTm90IEEoQnJhbmQiO3Y9Ijk5IiwgIkdvb2dsZSBDaHJvbWUiO3Y9IjEyMSIsICJDaHJvbWl1bSI7dj0iMTIxIg0Kc2VjLWNoLXVhLW1vYmlsZTogPzANClVzZXItQWdlbnQ6IE1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS8xMjEuMC4wLjAgU2FmYXJpLzUzNy4zNg0Kc2VjLWNoLXVhLXBsYXRmb3JtOiAiV2luZG93cyINCkFjY2VwdDogKi8qDQpTZWMtRmV0Y2gtU2l0ZTogY3Jvc3Mtc2l0ZQ0KU2VjLUZldGNoLU1vZGU6IG5vLWNvcnMNClNlYy1GZXRjaC1EZXN0OiBzY3JpcHQNClJlZmVyZXI6IGh0dHBzOi8vZGV2LmJsdWVhbGdvLmNvbS8NCkFjY2VwdC1FbmNvZGluZzogZ3ppcCwgZGVmbGF0ZQ0KQWNjZXB0LUxhbmd1YWdlOiBlbi1VUyxlbjtxPTAuOQ0KSG9zdDogY2RuLmpzZGVsaXZyLm5ldA0KDQo=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
      </HTTPRequest>
      <HTTPResponse>
        <contentLenght>3543</contentLenght>
        <HTTPHeaders>
          <HTTPHeaderEntity name="Connection" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Length" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MzU0Mw==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Access-Control-Allow-Origin" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Kg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Access-Control-Expose-Headers" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Kg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Timing-Allow-Origin" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Kg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Cache-Control" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>cHVibGljLCBtYXgtYWdlPTMxNTM2MDAwLCBzLW1heGFnZT0zMTUzNjAwMCwgaW1tdXRhYmxl</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Cross-Origin-Resource-Policy" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Y3Jvc3Mtb3JpZ2lu</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="X-Content-Type-Options" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bm9zbmlmZg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Strict-Transport-Security" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bWF4LWFnZT0zMTUzNjAwMDsgaW5jbHVkZVN1YkRvbWFpbnM7IHByZWxvYWQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Type" index="9">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>YXBwbGljYXRpb24vamF2YXNjcmlwdDsgY2hhcnNldD11dGYtOA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="X-JSD-Version" index="10">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>NC4wLjA=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="X-JSD-Version-Type" index="11">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>dmVyc2lvbg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="ETag" index="12">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Vy8iMjhkNS1jaEkydElrRmxKQXBKKzBPL29IdkxPRHFma0Ei</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Encoding" index="13">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Ranges" index="14">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ynl0ZXM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Date" index="15">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VGh1LCAxNSBGZWIgMjAyNCAwNToxODo1MSBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Age" index="16">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MTkxNDU2MQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="X-Served-By" index="17">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Y2FjaGUtZnJhLWVkZGY4MjMwMTAwLUZSQSwgY2FjaGUtZGVsMjE3NTAtREVM</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="X-Cache" index="18">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SElULCBISVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Vary" index="19">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>QWNjZXB0LUVuY29kaW5n</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="alt-svc" index="20">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aDM9Ijo0NDMiO21hPTg2NDAwLGgzLTI5PSI6NDQzIjttYT04NjQwMCxoMy0yNz0iOjQ0MyI7bWE9ODY0MDA=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SFRUUC8xLjEgMjAwIE9LDQpDb25uZWN0aW9uOiBrZWVwLWFsaXZlDQpDb250ZW50LUxlbmd0aDogMzU0Mw0KQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luOiAqDQpBY2Nlc3MtQ29udHJvbC1FeHBvc2UtSGVhZGVyczogKg0KVGltaW5nLUFsbG93LU9yaWdpbjogKg0KQ2FjaGUtQ29udHJvbDogcHVibGljLCBtYXgtYWdlPTMxNTM2MDAwLCBzLW1heGFnZT0zMTUzNjAwMCwgaW1tdXRhYmxlDQpDcm9zcy1PcmlnaW4tUmVzb3VyY2UtUG9saWN5OiBjcm9zcy1vcmlnaW4NClgtQ29udGVudC1UeXBlLU9wdGlvbnM6IG5vc25pZmYNClN0cmljdC1UcmFuc3BvcnQtU2VjdXJpdHk6IG1heC1hZ2U9MzE1MzYwMDA7IGluY2x1ZGVTdWJEb21haW5zOyBwcmVsb2FkDQpDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL2phdmFzY3JpcHQ7IGNoYXJzZXQ9dXRmLTgNClgtSlNELVZlcnNpb246IDQuMC4wDQpYLUpTRC1WZXJzaW9uLVR5cGU6IHZlcnNpb24NCkVUYWc6IFcvIjI4ZDUtY2hJMnRJa0ZsSkFwSiswTy9vSHZMT0RxZmtBIg0KQ29udGVudC1FbmNvZGluZzogZ3ppcA0KQWNjZXB0LVJhbmdlczogYnl0ZXMNCkRhdGU6IFRodSwgMTUgRmViIDIwMjQgMDU6MTg6NTEgR01UDQpBZ2U6IDE5MTQ1NjENClgtU2VydmVkLUJ5OiBjYWNoZS1mcmEtZWRkZjgyMzAxMDAtRlJBLCBjYWNoZS1kZWwyMTc1MC1ERUwNClgtQ2FjaGU6IEhJVCwgSElUDQpWYXJ5OiBBY2NlcHQtRW5jb2RpbmcNCmFsdC1zdmM6IGgzPSI6NDQzIjttYT04NjQwMCxoMy0yOT0iOjQ0MyI7bWE9ODY0MDAsaDMtMjc9Ijo0NDMiO21hPTg2NDAwDQoNCg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPBody>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>LyohCiAqIFNpZ25hdHVyZSBQYWQgdjQuMC4wIHwgaHR0cHM6Ly9naXRodWIuY29tL3N6aW1lay9zaWduYXR1cmVfcGFkCiAqIChjKSAyMDIxIFN6eW1vbiBOb3dhayB8IFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZQogKi8KIWZ1bmN0aW9uKHQsZSl7Im9iamVjdCI9PXR5cGVvZiBleHBvcnRzJiYidW5kZWZpbmVkIiE9dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz1lKCk6ImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoZSk6KHQ9InVuZGVmaW5lZCIhPXR5cGVvZiBnbG9iYWxUaGlzP2dsb2JhbFRoaXM6dHx8c2VsZikuU2lnbmF0dXJlUGFkPWUoKX0odGhpcywoZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7Y2xhc3MgdHtjb25zdHJ1Y3Rvcih0LGUsaSxuKXtpZihpc05hTih0KXx8aXNOYU4oZSkpdGhyb3cgbmV3IEVycm9yKGBQb2ludCBpcyBpbnZhbGlkOiAoJHt0fSwgJHtlfSlgKTt0aGlzLng9K3QsdGhpcy55PStlLHRoaXMucHJlc3N1cmU9aXx8MCx0aGlzLnRpbWU9bnx8RGF0ZS5ub3coKX1kaXN0YW5jZVRvKHQpe3JldHVybiBNYXRoLnNxcnQoTWF0aC5wb3codGhpcy54LXQueCwyKStNYXRoLnBvdyh0aGlzLnktdC55LDIpKX1lcXVhbHModCl7cmV0dXJuIHRoaXMueD09PXQueCYmdGhpcy55PT09dC55JiZ0aGlzLnByZXNzdXJlPT09dC5wcmVzc3VyZSYmdGhpcy50aW1lPT09dC50aW1lfXZlbG9jaXR5RnJvbSh0KXtyZXR1cm4gdGhpcy50aW1lIT09dC50aW1lP3RoaXMuZGlzdGFuY2VUbyh0KS8odGhpcy50aW1lLXQudGltZSk6MH19Y2xhc3MgZXtjb25zdHJ1Y3Rvcih0LGUsaSxuLHMsbyl7dGhpcy5zdGFydFBvaW50PXQsdGhpcy5jb250cm9sMj1lLHRoaXMuY29udHJvbDE9aSx0aGlzLmVuZFBvaW50PW4sdGhpcy5zdGFydFdpZHRoPXMsdGhpcy5lbmRXaWR0aD1vfXN0YXRpYyBmcm9tUG9pbnRzKHQsaSl7Y29uc3Qgbj10aGlzLmNhbGN1bGF0ZUNvbnRyb2xQb2ludHModFswXSx0WzFdLHRbMl0pLmMyLHM9dGhpcy5jYWxjdWxhdGVDb250cm9sUG9pbnRzKHRbMV0sdFsyXSx0WzNdKS5jMTtyZXR1cm4gbmV3IGUodFsxXSxuLHMsdFsyXSxpLnN0YXJ0LGkuZW5kKX1zdGF0aWMgY2FsY3VsYXRlQ29udHJvbFBvaW50cyhlLGksbil7Y29uc3Qgcz1lLngtaS54LG89ZS55LWkueSxoPWkueC1uLngscj1pLnktbi55LGE9KGUueCtpLngpLzIsZD0oZS55K2kueSkvMixsPShpLngrbi54KS8yLGM9KGkueStuLnkpLzIsdT1NYXRoLnNxcnQocypzK28qbyksdj1NYXRoLnNxcnQoaCpoK3IqciksbT12Lyh1K3YpLF89bCsoYS1sKSptLHA9YysoZC1jKSptLGc9aS54LV8seD1pLnktcDtyZXR1cm57YzE6bmV3IHQoYStnLGQreCksYzI6bmV3IHQobCtnLGMreCl9fWxlbmd0aCgpe2xldCB0LGUsaT0wO2ZvcihsZXQgbj0wO248PTEwO24rPTEpe2NvbnN0IHM9bi8xMCxvPXRoaXMucG9pbnQocyx0aGlzLnN0YXJ0UG9pbnQueCx0aGlzLmNvbnRyb2wxLngsdGhpcy5jb250cm9sMi54LHRoaXMuZW5kUG9pbnQueCksaD10aGlzLnBvaW50KHMsdGhpcy5zdGFydFBvaW50LnksdGhpcy5jb250cm9sMS55LHRoaXMuY29udHJvbDIueSx0aGlzLmVuZFBvaW50LnkpO2lmKG4+MCl7Y29uc3Qgbj1vLXQscz1oLWU7aSs9TWF0aC5zcXJ0KG4qbitzKnMpfXQ9byxlPWh9cmV0dXJuIGl9cG9pbnQodCxlLGksbixzKXtyZXR1cm4gZSooMS10KSooMS10KSooMS10KSszKmkqKDEtdCkqKDEtdCkqdCszKm4qKDEtdCkqdCp0K3MqdCp0KnR9fWNsYXNzIGkgZXh0ZW5kcyBFdmVudFRhcmdldHtjb25zdHJ1Y3Rvcih0LGU9e30pe3N1cGVyKCksdGhpcy5jYW52YXM9dCx0aGlzLm9wdGlvbnM9ZSx0aGlzLl9oYW5kbGVNb3VzZURvd249dD0+ezE9PT10LmJ1dHRvbnMmJih0aGlzLl9kcmF3bmluZ1N0cm9rZT0hMCx0aGlzLl9zdHJva2VCZWdpbih0KSl9LHRoaXMuX2hhbmRsZU1vdXNlTW92ZT10PT57dGhpcy5fZHJhd25pbmdTdHJva2UmJnRoaXMuX3N0cm9rZU1vdmVVcGRhdGUodCl9LHRoaXMuX2hhbmRsZU1vdXNlVXA9dD0+ezE9PT10LmJ1dHRvbnMmJnRoaXMuX2RyYXduaW5nU3Ryb2tlJiYodGhpcy5fZHJhd25pbmdTdHJva2U9ITEsdGhpcy5fc3Ryb2tlRW5kKHQpKX0sdGhpcy5faGFuZGxlVG91Y2hTdGFydD10PT57aWYodC5wcmV2ZW50RGVmYXVsdCgpLDE9PT10LnRhcmdldFRvdWNoZXMubGVuZ3RoKXtjb25zdCBlPXQuY2hhbmdlZFRvdWNoZXNbMF07dGhpcy5fc3Ryb2tlQmVnaW4oZSl9fSx0aGlzLl9oYW5kbGVUb3VjaE1vdmU9dD0+e3QucHJldmVudERlZmF1bHQoKTtjb25zdCBlPXQudGFyZ2V0VG91Y2hlc1swXTt0aGlzLl9zdHJva2VNb3ZlVXBkYXRlKGUpfSx0aGlzLl9oYW5kbGVUb3VjaEVuZD10PT57aWYodC50YXJnZXQ9PT10aGlzLmNhbnZhcyl7dC5wcmV2ZW50RGVmYXVsdCgpO2NvbnN0IGU9dC5jaGFuZ2VkVG91Y2hlc1swXTt0aGlzLl9zdHJva2VFbmQoZSl9fSx0aGlzLl9oYW5kbGVQb2ludGVyU3RhcnQ9dD0+e3RoaXMuX2RyYXduaW5nU3Ryb2tlPSEwLHQucHJldmVudERlZmF1bHQoKSx0aGlzLl9zdHJva2VCZWdpbih0KX0sdGhpcy5faGFuZGxlUG9pbnRlck1vdmU9dD0+e3RoaXMuX2RyYXduaW5nU3Ryb2tlJiYodC5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuX3N0cm9rZU1vdmVVcGRhdGUodCkpfSx0aGlzLl9oYW5kbGVQb2ludGVyRW5kPXQ9Pnt0aGlzLl9kcmF3bmluZ1N0cm9rZT0hMTt0LnRhcmdldD09PXRoaXMuY2FudmFzJiYodC5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuX3N0cm9rZUVuZCh0KSl9LHRoaXMudmVsb2NpdHlGaWx0ZXJXZWlnaHQ9ZS52ZWxvY2l0eUZpbHRlcldlaWdodHx8LjcsdGhpcy5taW5XaWR0aD1lLm1pbldpZHRofHwuNSx0aGlzLm1heFdpZHRoPWUubWF4V2lkdGh8fDIuNSx0aGlzLnRocm90dGxlPSJ0aHJvdHRsZSJpbiBlP2UudGhyb3R0bGU6MTYsdGhpcy5taW5EaXN0YW5jZT0ibWluRGlzdGFuY2UiaW4gZT9lLm1pbkRpc3RhbmNlOjUsdGhpcy5kb3RTaXplPWUuZG90U2l6ZXx8MCx0aGlzLnBlbkNvbG9yPWUucGVuQ29sb3J8fCJibGFjayIsdGhpcy5iYWNrZ3JvdW5kQ29sb3I9ZS5iYWNrZ3JvdW5kQ29sb3J8fCJyZ2JhKDAsMCwwLDApIix0aGlzLl9zdHJva2VNb3ZlVXBkYXRlPXRoaXMudGhyb3R0bGU/ZnVuY3Rpb24odCxlPTI1MCl7bGV0IGksbixzLG89MCxoPW51bGw7Y29uc3Qgcj0oKT0+e289RGF0ZS5ub3coKSxoPW51bGwsaT10LmFwcGx5KG4scyksaHx8KG49bnVsbCxzPVtdKX07cmV0dXJuIGZ1bmN0aW9uKC4uLmEpe2NvbnN0IGQ9RGF0ZS5ub3coKSxsPWUtKGQtbyk7cmV0dXJuIG49dGhpcyxzPWEsbDw9MHx8bD5lPyhoJiYoY2xlYXJUaW1lb3V0KGgpLGg9bnVsbCksbz1kLGk9dC5hcHBseShuLHMpLGh8fChuPW51bGwscz1bXSkpOmh8fChoPXdpbmRvdy5zZXRUaW1lb3V0KHIsbCkpLGl9fShpLnByb3RvdHlwZS5fc3Ryb2tlVXBkYXRlLHRoaXMudGhyb3R0bGUpOmkucHJvdG90eXBlLl9zdHJva2VVcGRhdGUsdGhpcy5fY3R4PXQuZ2V0Q29udGV4dCgiMmQiKSx0aGlzLmNsZWFyKCksdGhpcy5vbigpfWNsZWFyKCl7Y29uc3R7X2N0eDp0LGNhbnZhczplfT10aGlzO3QuZmlsbFN0eWxlPXRoaXMuYmFja2dyb3VuZENvbG9yLHQuY2xlYXJSZWN0KDAsMCxlLndpZHRoLGUuaGVpZ2h0KSx0LmZpbGxSZWN0KDAsMCxlLndpZHRoLGUuaGVpZ2h0KSx0aGlzLl9kYXRhPVtdLHRoaXMuX3Jlc2V0KCksdGhpcy5faXNFbXB0eT0hMH1mcm9tRGF0YVVSTCh0LGU9e30pe3JldHVybiBuZXcgUHJvbWlzZSgoaSxuKT0+e2NvbnN0IHM9bmV3IEltYWdlLG89ZS5yYXRpb3x8d2luZG93LmRldmljZVBpeGVsUmF0aW98fDEsaD1lLndpZHRofHx0aGlzLmNhbnZhcy53aWR0aC9vLHI9ZS5oZWlnaHR8fHRoaXMuY2FudmFzLmhlaWdodC9vLGE9ZS54T2Zmc2V0fHwwLGQ9ZS55T2Zmc2V0fHwwO3RoaXMuX3Jlc2V0KCkscy5vbmxvYWQ9KCk9Pnt0aGlzLl9jdHguZHJhd0ltYWdlKHMsYSxkLGgsciksaSgpfSxzLm9uZXJyb3I9dD0+e24odCl9LHMuY3Jvc3NPcmlnaW49ImFub255bW91cyIscy5zcmM9dCx0aGlzLl9pc0VtcHR5PSExfSl9dG9EYXRhVVJMKHQ9ImltYWdlL3BuZyIsZSl7c3dpdGNoKHQpe2Nhc2UiaW1hZ2Uvc3ZnK3htbCI6cmV0dXJuIHRoaXMuX3RvU1ZHKCk7ZGVmYXVsdDpyZXR1cm4gdGhpcy5jYW52YXMudG9EYXRhVVJMKHQsZSl9fW9uKCl7dGhpcy5jYW52YXMuc3R5bGUudG91Y2hBY3Rpb249Im5vbmUiLHRoaXMuY2FudmFzLnN0eWxlLm1zVG91Y2hBY3Rpb249Im5vbmUiLHdpbmRvdy5Qb2ludGVyRXZlbnQ/dGhpcy5faGFuZGxlUG9pbnRlckV2ZW50cygpOih0aGlzLl9oYW5kbGVNb3VzZUV2ZW50cygpLCJvbnRvdWNoc3RhcnQiaW4gd2luZG93JiZ0aGlzLl9oYW5kbGVUb3VjaEV2ZW50cygpKX1vZmYoKXt0aGlzLmNhbnZhcy5zdHlsZS50b3VjaEFjdGlvbj0iYXV0byIsdGhpcy5jYW52YXMuc3R5bGUubXNUb3VjaEFjdGlvbj0iYXV0byIsdGhpcy5jYW52YXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigicG9pbnRlcmRvd24iLHRoaXMuX2hhbmRsZVBvaW50ZXJTdGFydCksdGhpcy5jYW52YXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigicG9pbnRlcm1vdmUiLHRoaXMuX2hhbmRsZVBvaW50ZXJNb3ZlKSxkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJwb2ludGVydXAiLHRoaXMuX2hhbmRsZVBvaW50ZXJFbmQpLHRoaXMuY2FudmFzLnJlbW92ZUV2ZW50TGlzdGVuZXIoIm1vdXNlZG93biIsdGhpcy5faGFuZGxlTW91c2VEb3duKSx0aGlzLmNhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKCJtb3VzZW1vdmUiLHRoaXMuX2hhbmRsZU1vdXNlTW92ZSksZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigibW91c2V1cCIsdGhpcy5faGFuZGxlTW91c2VVcCksdGhpcy5jYW52YXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigidG91Y2hzdGFydCIsdGhpcy5faGFuZGxlVG91Y2hTdGFydCksdGhpcy5jYW52YXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigidG91Y2htb3ZlIix0aGlzLl9oYW5kbGVUb3VjaE1vdmUpLHRoaXMuY2FudmFzLnJlbW92ZUV2ZW50TGlzdGVuZXIoInRvdWNoZW5kIix0aGlzLl9oYW5kbGVUb3VjaEVuZCl9aXNFbXB0eSgpe3JldHVybiB0aGlzLl9pc0VtcHR5fWZyb21EYXRhKHQse2NsZWFyOmU9ITB9PXt9KXtlJiZ0aGlzLmNsZWFyKCksdGhpcy5fZnJvbURhdGEodCx0aGlzLl9kcmF3Q3VydmUuYmluZCh0aGlzKSx0aGlzLl9kcmF3RG90LmJpbmQodGhpcykpLHRoaXMuX2RhdGE9ZT90OnRoaXMuX2RhdGEuY29uY2F0KHQpfXRvRGF0YSgpe3JldHVybiB0aGlzLl9kYXRhfV9zdHJva2VCZWdpbih0KXt0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCJiZWdpblN0cm9rZSIse2RldGFpbDp0fSkpO2NvbnN0IGU9e2RvdFNpemU6dGhpcy5kb3RTaXplLG1pbldpZHRoOnRoaXMubWluV2lkdGgsbWF4V2lkdGg6dGhpcy5tYXhXaWR0aCxwZW5Db2xvcjp0aGlzLnBlbkNvbG9yLHBvaW50czpbXX07dGhpcy5fZGF0YS5wdXNoKGUpLHRoaXMuX3Jlc2V0KCksdGhpcy5fc3Ryb2tlVXBkYXRlKHQpfV9zdHJva2VVcGRhdGUodCl7aWYoMD09PXRoaXMuX2RhdGEubGVuZ3RoKXJldHVybiB2b2lkIHRoaXMuX3N0cm9rZUJlZ2luKHQpO3RoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoImJlZm9yZVVwZGF0ZVN0cm9rZSIse2RldGFpbDp0fSkpO2NvbnN0IGU9dC5jbGllbnRYLGk9dC5jbGllbnRZLG49dm9pZCAwIT09dC5wcmVzc3VyZT90LnByZXNzdXJlOnZvaWQgMCE9PXQuZm9yY2U/dC5mb3JjZTowLHM9dGhpcy5fY3JlYXRlUG9pbnQoZSxpLG4pLG89dGhpcy5fZGF0YVt0aGlzLl9kYXRhLmxlbmd0aC0xXSxoPW8ucG9pbnRzLHI9aC5sZW5ndGg+MCYmaFtoLmxlbmd0aC0xXSxhPSEhciYmcy5kaXN0YW5jZVRvKHIpPD10aGlzLm1pbkRpc3RhbmNlLHtwZW5Db2xvcjpkLGRvdFNpemU6bCxtaW5XaWR0aDpjLG1heFdpZHRoOnV9PW87aWYoIXJ8fCFyfHwhYSl7Y29uc3QgdD10aGlzLl9hZGRQb2ludChzKTtyP3QmJnRoaXMuX2RyYXdDdXJ2ZSh0LHtwZW5Db2xvcjpkLGRvdFNpemU6bCxtaW5XaWR0aDpjLG1heFdpZHRoOnV9KTp0aGlzLl9kcmF3RG90KHMse3BlbkNvbG9yOmQsZG90U2l6ZTpsLG1pbldpZHRoOmMsbWF4V2lkdGg6dX0pLGgucHVzaCh7dGltZTpzLnRpbWUseDpzLngseTpzLnkscHJlc3N1cmU6cy5wcmVzc3VyZX0pfXRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoImFmdGVyVXBkYXRlU3Ryb2tlIix7ZGV0YWlsOnR9KSl9X3N0cm9rZUVuZCh0KXt0aGlzLl9zdHJva2VVcGRhdGUodCksdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgiZW5kU3Ryb2tlIix7ZGV0YWlsOnR9KSl9X2hhbmRsZVBvaW50ZXJFdmVudHMoKXt0aGlzLl9kcmF3bmluZ1N0cm9rZT0hMSx0aGlzLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCJwb2ludGVyZG93biIsdGhpcy5faGFuZGxlUG9pbnRlclN0YXJ0KSx0aGlzLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCJwb2ludGVybW92ZSIsdGhpcy5faGFuZGxlUG9pbnRlck1vdmUpLGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoInBvaW50ZXJ1cCIsdGhpcy5faGFuZGxlUG9pbnRlckVuZCl9X2hhbmRsZU1vdXNlRXZlbnRzKCl7dGhpcy5fZHJhd25pbmdTdHJva2U9ITEsdGhpcy5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcigibW91c2Vkb3duIix0aGlzLl9oYW5kbGVNb3VzZURvd24pLHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlbW92ZSIsdGhpcy5faGFuZGxlTW91c2VNb3ZlKSxkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJtb3VzZXVwIix0aGlzLl9oYW5kbGVNb3VzZVVwKX1faGFuZGxlVG91Y2hFdmVudHMoKXt0aGlzLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCJ0b3VjaHN0YXJ0Iix0aGlzLl9oYW5kbGVUb3VjaFN0YXJ0KSx0aGlzLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCJ0b3VjaG1vdmUiLHRoaXMuX2hhbmRsZVRvdWNoTW92ZSksdGhpcy5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcigidG91Y2hlbmQiLHRoaXMuX2hhbmRsZVRvdWNoRW5kKX1fcmVzZXQoKXt0aGlzLl9sYXN0UG9pbnRzPVtdLHRoaXMuX2xhc3RWZWxvY2l0eT0wLHRoaXMuX2xhc3RXaWR0aD0odGhpcy5taW5XaWR0aCt0aGlzLm1heFdpZHRoKS8yLHRoaXMuX2N0eC5maWxsU3R5bGU9dGhpcy5wZW5Db2xvcn1fY3JlYXRlUG9pbnQoZSxpLG4pe2NvbnN0IHM9dGhpcy5jYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7cmV0dXJuIG5ldyB0KGUtcy5sZWZ0LGktcy50b3AsbiwobmV3IERhdGUpLmdldFRpbWUoKSl9X2FkZFBvaW50KHQpe2NvbnN0e19sYXN0UG9pbnRzOml9PXRoaXM7aWYoaS5wdXNoKHQpLGkubGVuZ3RoPjIpezM9PT1pLmxlbmd0aCYmaS51bnNoaWZ0KGlbMF0pO2NvbnN0IHQ9dGhpcy5fY2FsY3VsYXRlQ3VydmVXaWR0aHMoaVsxXSxpWzJdKSxuPWUuZnJvbVBvaW50cyhpLHQpO3JldHVybiBpLnNoaWZ0KCksbn1yZXR1cm4gbnVsbH1fY2FsY3VsYXRlQ3VydmVXaWR0aHModCxlKXtjb25zdCBpPXRoaXMudmVsb2NpdHlGaWx0ZXJXZWlnaHQqZS52ZWxvY2l0eUZyb20odCkrKDEtdGhpcy52ZWxvY2l0eUZpbHRlcldlaWdodCkqdGhpcy5fbGFzdFZlbG9jaXR5LG49dGhpcy5fc3Ryb2tlV2lkdGgoaSkscz17ZW5kOm4sc3RhcnQ6dGhpcy5fbGFzdFdpZHRofTtyZXR1cm4gdGhpcy5fbGFzdFZlbG9jaXR5PWksdGhpcy5fbGFzdFdpZHRoPW4sc31fc3Ryb2tlV2lkdGgodCl7cmV0dXJuIE1hdGgubWF4KHRoaXMubWF4V2lkdGgvKHQrMSksdGhpcy5taW5XaWR0aCl9X2RyYXdDdXJ2ZVNlZ21lbnQodCxlLGkpe2NvbnN0IG49dGhpcy5fY3R4O24ubW92ZVRvKHQsZSksbi5hcmModCxlLGksMCwyKk1hdGguUEksITEpLHRoaXMuX2lzRW1wdHk9ITF9X2RyYXdDdXJ2ZSh0LGUpe2NvbnN0IGk9dGhpcy5fY3R4LG49dC5lbmRXaWR0aC10LnN0YXJ0V2lkdGgscz0yKk1hdGguY2VpbCh0Lmxlbmd0aCgpKTtpLmJlZ2luUGF0aCgpLGkuZmlsbFN0eWxlPWUucGVuQ29sb3I7Zm9yKGxldCBpPTA7aTxzO2krPTEpe2NvbnN0IG89aS9zLGg9bypvLHI9aCpvLGE9MS1vLGQ9YSphLGw9ZCphO2xldCBjPWwqdC5zdGFydFBvaW50Lng7Yys9MypkKm8qdC5jb250cm9sMS54LGMrPTMqYSpoKnQuY29udHJvbDIueCxjKz1yKnQuZW5kUG9pbnQueDtsZXQgdT1sKnQuc3RhcnRQb2ludC55O3UrPTMqZCpvKnQuY29udHJvbDEueSx1Kz0zKmEqaCp0LmNvbnRyb2wyLnksdSs9cip0LmVuZFBvaW50Lnk7Y29uc3Qgdj1NYXRoLm1pbih0LnN0YXJ0V2lkdGgrcipuLGUubWF4V2lkdGgpO3RoaXMuX2RyYXdDdXJ2ZVNlZ21lbnQoYyx1LHYpfWkuY2xvc2VQYXRoKCksaS5maWxsKCl9X2RyYXdEb3QodCxlKXtjb25zdCBpPXRoaXMuX2N0eCxuPWUuZG90U2l6ZT4wP2UuZG90U2l6ZTooZS5taW5XaWR0aCtlLm1heFdpZHRoKS8yO2kuYmVnaW5QYXRoKCksdGhpcy5fZHJhd0N1cnZlU2VnbWVudCh0LngsdC55LG4pLGkuY2xvc2VQYXRoKCksaS5maWxsU3R5bGU9ZS5wZW5Db2xvcixpLmZpbGwoKX1fZnJvbURhdGEoZSxpLG4pe2Zvcihjb25zdCBzIG9mIGUpe2NvbnN0e3BlbkNvbG9yOmUsZG90U2l6ZTpvLG1pbldpZHRoOmgsbWF4V2lkdGg6cixwb2ludHM6YX09cztpZihhLmxlbmd0aD4xKWZvcihsZXQgbj0wO248YS5sZW5ndGg7bis9MSl7Y29uc3Qgcz1hW25dLGQ9bmV3IHQocy54LHMueSxzLnByZXNzdXJlLHMudGltZSk7dGhpcy5wZW5Db2xvcj1lLDA9PT1uJiZ0aGlzLl9yZXNldCgpO2NvbnN0IGw9dGhpcy5fYWRkUG9pbnQoZCk7bCYmaShsLHtwZW5Db2xvcjplLGRvdFNpemU6byxtaW5XaWR0aDpoLG1heFdpZHRoOnJ9KX1lbHNlIHRoaXMuX3Jlc2V0KCksbihhWzBdLHtwZW5Db2xvcjplLGRvdFNpemU6byxtaW5XaWR0aDpoLG1heFdpZHRoOnJ9KX19X3RvU1ZHKCl7Y29uc3QgdD10aGlzLl9kYXRhLGU9TWF0aC5tYXgod2luZG93LmRldmljZVBpeGVsUmF0aW98fDEsMSksaT10aGlzLmNhbnZhcy53aWR0aC9lLG49dGhpcy5jYW52YXMuaGVpZ2h0L2Uscz1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiwic3ZnIik7cy5zZXRBdHRyaWJ1dGUoIndpZHRoIix0aGlzLmNhbnZhcy53aWR0aC50b1N0cmluZygpKSxzLnNldEF0dHJpYnV0ZSgiaGVpZ2h0Iix0aGlzLmNhbnZhcy5oZWlnaHQudG9TdHJpbmcoKSksdGhpcy5fZnJvbURhdGEodCwodCx7cGVuQ29sb3I6ZX0pPT57Y29uc3QgaT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJwYXRoIik7aWYoIShpc05hTih0LmNvbnRyb2wxLngpfHxpc05hTih0LmNvbnRyb2wxLnkpfHxpc05hTih0LmNvbnRyb2wyLngpfHxpc05hTih0LmNvbnRyb2wyLnkpKSl7Y29uc3Qgbj1gTSAke3Quc3RhcnRQb2ludC54LnRvRml4ZWQoMyl9LCR7dC5zdGFydFBvaW50LnkudG9GaXhlZCgzKX0gQyAke3QuY29udHJvbDEueC50b0ZpeGVkKDMpfSwke3QuY29udHJvbDEueS50b0ZpeGVkKDMpfSAke3QuY29udHJvbDIueC50b0ZpeGVkKDMpfSwke3QuY29udHJvbDIueS50b0ZpeGVkKDMpfSAke3QuZW5kUG9pbnQueC50b0ZpeGVkKDMpfSwke3QuZW5kUG9pbnQueS50b0ZpeGVkKDMpfWA7aS5zZXRBdHRyaWJ1dGUoImQiLG4pLGkuc2V0QXR0cmlidXRlKCJzdHJva2Utd2lkdGgiLCgyLjI1KnQuZW5kV2lkdGgpLnRvRml4ZWQoMykpLGkuc2V0QXR0cmlidXRlKCJzdHJva2UiLGUpLGkuc2V0QXR0cmlidXRlKCJmaWxsIiwibm9uZSIpLGkuc2V0QXR0cmlidXRlKCJzdHJva2UtbGluZWNhcCIsInJvdW5kIikscy5hcHBlbmRDaGlsZChpKX19LCh0LHtwZW5Db2xvcjplLGRvdFNpemU6aSxtaW5XaWR0aDpuLG1heFdpZHRoOm99KT0+e2NvbnN0IGg9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2lyY2xlIikscj1pPjA/aToobitvKS8yO2guc2V0QXR0cmlidXRlKCJyIixyLnRvU3RyaW5nKCkpLGguc2V0QXR0cmlidXRlKCJjeCIsdC54LnRvU3RyaW5nKCkpLGguc2V0QXR0cmlidXRlKCJjeSIsdC55LnRvU3RyaW5nKCkpLGguc2V0QXR0cmlidXRlKCJmaWxsIixlKSxzLmFwcGVuZENoaWxkKGgpfSk7Y29uc3Qgbz1gPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2aWV3Qm94PSIwIDAgJHt0aGlzLmNhbnZhcy53aWR0aH0gJHt0aGlzLmNhbnZhcy5oZWlnaHR9IiB3aWR0aD0iJHtpfSIgaGVpZ2h0PSIke259Ij5gO2xldCBoPXMuaW5uZXJIVE1MO2lmKHZvaWQgMD09PWgpe2NvbnN0IHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZHVtbXkiKSxlPXMuY2hpbGROb2Rlczt0LmlubmVySFRNTD0iIjtmb3IobGV0IGk9MDtpPGUubGVuZ3RoO2krPTEpdC5hcHBlbmRDaGlsZChlW2ldLmNsb25lTm9kZSghMCkpO2g9dC5pbm5lckhUTUx9cmV0dXJuImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsIitidG9hKG8raCsiPC9zdmc+Iil9fXJldHVybiBpfSkpOwovLyMgc291cmNlTWFwcGluZ1VSTD1zaWduYXR1cmVfcGFkLnVtZC5taW4uanMubWFwCg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPBody>
        <TcpPackets>
          <PacketInfo time="519315296" offset="0" length="796" />
          <PacketInfo time="519315296" offset="796" length="3543" />
        </TcpPackets>
      </HTTPResponse>
    </HTTPTask>
    <HTTPTask id="351" hostname="dev.bluealgo.com" path="https://dev.bluealgo.com/smartformup/ui/config.js" url="https://dev.bluealgo.com/smartformup/ui/config.js" ip="144.126.253.3" port="443" connectionId="26" origin="HTML" frame="1" startDateTime="2024-02-15T10:57:48.150+05:30" startTime="519315562" endTime="519315562">
      <HTTPRequest method="GET">
        <HTTPHeaders>
          <HTTPHeaderEntity name="sec-ch-ua" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ik5vdCBBKEJyYW5kIjt2PSI5OSIsICJHb29nbGUgQ2hyb21lIjt2PSIxMjEiLCAiQ2hyb21pdW0iO3Y9IjEyMSI=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="sec-ch-ua-mobile" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>PzA=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="User-Agent" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEyMS4wLjAuMCBTYWZhcmkvNTM3LjM2</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="sec-ch-ua-platform" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>IldpbmRvd3Mi</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ki8q</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Sec-Fetch-Site" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>c2FtZS1vcmlnaW4=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Sec-Fetch-Mode" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bm8tY29ycw==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Sec-Fetch-Dest" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>c2NyaXB0</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Referer" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cHM6Ly9kZXYuYmx1ZWFsZ28uY29tL3NtYXJ0Zm9ybXVwL2xvYWRpbmRleD9vcHBvcnR1bml0eUlkPTAwNjBvMDAwMDFlU0lKMEFBTyZjdXN0b21lcmlkPWN1c3QxMDA1JmFjY2Vzc3Rva2VuPXVYQ3haUktVLU1mMndpVGczX0E4ZFB1OTU3dGFMWHhQ</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Encoding" index="9">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Language" index="10">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZW4tVVMsZW47cT0wLjk=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Cookie" index="11">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SlNFU1NJT05JRD0zRDVFOEZFODBBNEYzNEY5QkM0OEI2RTc0ODhCOEY5MQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Host" index="12">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZGV2LmJsdWVhbGdvLmNvbQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0VUIGh0dHBzOi8vZGV2LmJsdWVhbGdvLmNvbS9zbWFydGZvcm11cC91aS9jb25maWcuanMgSFRUUC8xLjENCnNlYy1jaC11YTogIk5vdCBBKEJyYW5kIjt2PSI5OSIsICJHb29nbGUgQ2hyb21lIjt2PSIxMjEiLCAiQ2hyb21pdW0iO3Y9IjEyMSINCnNlYy1jaC11YS1tb2JpbGU6ID8wDQpVc2VyLUFnZW50OiBNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvMTIxLjAuMC4wIFNhZmFyaS81MzcuMzYNCnNlYy1jaC11YS1wbGF0Zm9ybTogIldpbmRvd3MiDQpBY2NlcHQ6ICovKg0KU2VjLUZldGNoLVNpdGU6IHNhbWUtb3JpZ2luDQpTZWMtRmV0Y2gtTW9kZTogbm8tY29ycw0KU2VjLUZldGNoLURlc3Q6IHNjcmlwdA0KUmVmZXJlcjogaHR0cHM6Ly9kZXYuYmx1ZWFsZ28uY29tL3NtYXJ0Zm9ybXVwL2xvYWRpbmRleD9vcHBvcnR1bml0eUlkPTAwNjBvMDAwMDFlU0lKMEFBTyZjdXN0b21lcmlkPWN1c3QxMDA1JmFjY2Vzc3Rva2VuPXVYQ3haUktVLU1mMndpVGczX0E4ZFB1OTU3dGFMWHhQDQpBY2NlcHQtRW5jb2Rpbmc6IGd6aXAsIGRlZmxhdGUNCkFjY2VwdC1MYW5ndWFnZTogZW4tVVMsZW47cT0wLjkNCkNvb2tpZTogSlNFU1NJT05JRD0zRDVFOEZFODBBNEYzNEY5QkM0OEI2RTc0ODhCOEY5MQ0KSG9zdDogZGV2LmJsdWVhbGdvLmNvbQ0KDQo=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
          <HTTPCookies>
            <HTTPHeaderEntity name="JSESSIONID" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>M0Q1RThGRTgwQTRGMzRGOUJDNDhCNkU3NDg4QjhGOTE=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
          </HTTPCookies>
        </HTTPHeaders>
      </HTTPRequest>
      <HTTPResponse>
        <contentLenght>4906</contentLenght>
        <HTTPHeaders>
          <HTTPHeaderEntity name="Date" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VGh1LCAxNSBGZWIgMjAyNCAwNToxODo1MSBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Type" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>YXBwbGljYXRpb24vamF2YXNjcmlwdA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Length" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>NDkwNg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Connection" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Access-Control-Allow-Origin" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Kg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Ranges" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ynl0ZXM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="ETag" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Vy8iNDkwNi0xNzAzNTg5MDUyMDAwIg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Last-Modified" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VHVlLCAyNiBEZWMgMjAyMyAxMToxMDo1MiBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Strict-Transport-Security" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bWF4LWFnZT0xNTcyNDgwMDsgaW5jbHVkZVN1YkRvbWFpbnM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SFRUUC8xLjEgMjAwIA0KRGF0ZTogVGh1LCAxNSBGZWIgMjAyNCAwNToxODo1MSBHTVQNCkNvbnRlbnQtVHlwZTogYXBwbGljYXRpb24vamF2YXNjcmlwdA0KQ29udGVudC1MZW5ndGg6IDQ5MDYNCkNvbm5lY3Rpb246IGtlZXAtYWxpdmUNCkFjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbjogKg0KQWNjZXB0LVJhbmdlczogYnl0ZXMNCkVUYWc6IFcvIjQ5MDYtMTcwMzU4OTA1MjAwMCINCkxhc3QtTW9kaWZpZWQ6IFR1ZSwgMjYgRGVjIDIwMjMgMTE6MTA6NTIgR01UDQpTdHJpY3QtVHJhbnNwb3J0LVNlY3VyaXR5OiBtYXgtYWdlPTE1NzI0ODAwOyBpbmNsdWRlU3ViRG9tYWlucw0KDQo=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPBody>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ly8gdmFyIGRvY1ZlcmlmaWNhdGlvbiA9ICJodHRwczovL3ZlcmlmeS5ibHVlYWxnby5jb20iOwp2YXIgZG9jVmVyaWZpY2F0aW9uID0gImh0dHBzOi8vZGV2LnZlcmlmeS5ibHVlYWxnby5jb20vdGVzdC9yZXN1bHRzIjsKdmFyIG5vZGVqc3BkZmFwaWxpbms9Imh0dHBzOi8vZGV2LnZlcmlmeS5ibHVlYWxnby5jb20vcHJvY2Vzcy9nZXRwZGYiOwp2YXIgZXh0cmFjdFBheW1lbnRTb3VyY2UgPSAiaHR0cHM6Ly9kZXYudmVyaWZ5LmJsdWVhbGdvLmNvbS90ZXN0L3Rlc3RfbmV3X3ZlcnNpb24vcmVzdWx0c19uZXdfdmVyc2lvbiI7CgoKCnZhciB1c2VyRm9ybVVSbCA9d2luZG93LmxvY2F0aW9uLmhyZWY7CnZhciBnZW5lcmljQVBJID0gImdlbmVyaWMiOwoKdmFyIG5hbWVBcGkgPSAiIjsKdmFyIHNlYXJjaEFwaSA9ICIiOwp2YXIgTmFtZVZlcmlmaWNhdGlvQVBJID0gIiI7Cgp2YXIgdXBkYXRlRm9ybURhdGFBUEkgPQogICJzYXZlZm9ybWJldHdlZW4iOwp2YXIgcGhvbmVPVFBBUEkgPSAicHJldmlld3BkZiI7CnZhciBvdHBWZXJpZnlBUEkgPSAib3RwU2VuZFZlcmlmeSI7Cgp2YXIgc2NoZW1hOwp2YXIgaWdub3JlRG9jID0gW107CmNvbnN0IGltYWdlVXBsb2FkVVJMID0gJ2h0dHBzOi8vYm9va2luZy5sbnRyZWFsdHkuY29tLy9zbWFydGZvcm11cC91cGxvYWRJbWFnZSc7CmNvbnN0IGNoZWNrQm94VGV4dHMgPSAgewogIHBhZ2VfdHdvOiAnSS9XZSwgaGVyZWJ5IGRlY2xhcmUgdGhhdCB0aGUgS1lDIGRvY3VtZW50cyB1cGxvYWRlZCBhcmUgZ2VudWluZSBhbmQgYXV0aGVudGljLicsCiAgcGFnZV9mb3VyOiAnSS9XZSBhY2tub3dsZWRnZSB0aGF0IHdlIGhhdmUgcmVhZCB0aGUgYWJvdmUgaW5mb3JtYXRpb24gYW5kIGFncmVlIHRvIHByb2NlZWQgYWNjb3JkaW5nbHkuJywKICBwYWdlX2ZpdmU6ICdJL1dlLCBwcm92aWRlIGNvbnNlbnQgdG8gcHJvY2VlZCB3aXRoIHRoZSBhYm92ZSBtZW50aW9uZWQgY2hhbm5lbCBwYXJ0bmVyIGZvciB0aGUgYm9va2luZy4nLAogIGNvbW1vbjogJ0kvV2UsIGNvbmZpcm0gdGhhdCB0aGUgaW5mb3JtYXRpb24gcHJvdmlkZWQgYnkgbWUgaXMgYWNjdXJhdGUgdG8gdGhlIGJlc3Qgb2YgbXkvb3VyIGtub3dsZWRnZS4nLAogIHRlcm1zOiAnSS9XZSBhY2tub3dsZWRnZSB0aGF0IHdlIGhhdmUgcmVhZCB0aGUgYWJvdmUgdGVybXMgJiBjb25kaXRpb25zIGFuZCBhZ3JlZSB0byBwcm9jZWVkIGFjY29yZGluZ2x5LicsCiAgcGFnZV9uaW5lOiAnSS9XZSwgaGF2ZSByZWFkIGFsbCB0aGUgdGVybXMgYW5kIGNvbmRpdGlvbnMgYW5kIGJ5IGUtc2lnbmluZy9zdWJtaXR0aW5nIHRoZSBkb2N1bWVudCBhZ3JlZSB0aGF0IGFsbCB0aGUgaW5mb3JtYXRpb24gaW4gdGhlIGVudGlyZXR5IG9mIHRoZSBkb2N1bWVudCwgYXMgdmlzaWJsZSBpbiB0aGUgcHJldmlldywgaXMgYWNjdXJhdGUuJywKICBwYWdlX2ZpdmVfY3VzdG9tOiAnSS9XZSwgcHJvdmlkZSBjb25zZW50IHRvIHByb2NlZWQgd2l0aCB0aGUgYWJvdmUgbWVudGlvbmVkIGJvb2tpbmcgc291cmNlIGZvciB0aGUgYm9va2luZy4nCn0KCnZhciBwYWdlSW5mbyA9IFsKICAiRmlyc3QgSm9pbnQgQXBwbGljYW50IiwKICAiU2Vjb25kIEpvaW50IEFwcGxpY2FudCIsCiAgIlRoaXJkIEpvaW50IEFwcGxpY2FudCIsCiAgIkZvcnRoIEpvaW50IEFwcGxpY2FudCIsCiAgIkZpZnRoIEpvaW50IEFwcGxpY2FudCIsCl07Cgp2YXIgYXBwbGljYW50TnVtID0gewogIEExOiAiQXBwbGljYW50IiwKICBBMjogIkZpcnN0IEpvaW50IEFwcGxpY2FudCIsCiAgQTM6ICJTZWNvbmQgSm9pbnQgQXBwbGljYW50IiwKICBBNDogIlRoaXJkIEpvaW50IEFwcGxpY2FudCIsCiAgQTU6ICJGb3J0aCBKb2ludCBBcHBsaWNhbnQiLAogIEE2OiAiRmlmdGggSm9pbnQgQXBwbGljYW50IiwKfTsKCnZhciBhZGRyZXNzID0gWwogICJIT1VTRSBOVU1CRVIiLAogICJCVUlMRElORyBOQU1FIiwKICAiUEVSTUFORU5UIExPQ0FMSVRZIiwKICAiU1RSRUVUIiwKICAiQ0lUWSIsCiAgIlBPU1RBTCBDT0RFIiwKICAiU1RBVEUiLAogICJDT1VOVFJZIiwKICAiUEVSTUFORU5UIEFERFJFU1M6IiwKICAiQ09SUkVTUE9OREVOQ0UgQUREUkVTUzoiLAogICJTYW1lIGFzIFBlcm1hbmVudCBBZGRyZXNzIiwKXTsKCmNvbnN0IG15ZmllbGRkZXQgPSB7CiAgbmFtZTogWyJGSVJTVCBOQU1FIiwgIkxBU1QgTkFNRSJdLAogIGFkZHJlc3M6IFsKICAgICJQT1NUQUwgQ09ERSIsCiAgICAiQlVJTERJTkcgTkFNRSIsCiAgICAiUEVSTUFORU5UIExPQ0FMSVRZIiwKICAgICJDSVRZIiwKICAgICJIT1VTRSBOVU1CRVIiLAogICAgIlNUQVRFIiwKICAgICJTVFJFRVQiLAogICAgIkNPVU5UUlkiLAogIF0sCiAgYWRkaGFyX251bWJlcjogWyJBQURIQUFSIE5VTUJFUiJdLAogIHBhbl9udW1iZXI6IFsiUEFOIE5VTUJFUiJdLAp9OwoKY29uc3QgbXlQcmV2aWV3RGF0YSA9IHsKICBuYW1lOiBbIkZJUlNUIE5BTUUiLCAiTEFTVCBOQU1FIl0sCiAgYWRkcmVzczogWwogICAgIkhPVVNFIE5VTUJFUiIsCiAgICAiQlVJTERJTkcgTkFNRSIsCiAgICAiUEVSTUFORU5UIExPQ0FMSVRZIiwKICAgICJTVFJFRVQiLAogICAgIkNJVFkiLAogICAgIlBPU1RBTCBDT0RFIiwKICAgICJTVEFURSIsCiAgICAiQ09VTlRSWSIsCiAgXSwKICBhZGRoYXJfbnVtYmVyOiBbIkFBREhBQVIgTlVNQkVSIl0sCiAgcGFuX251bWJlcjogWyJQQU4gTlVNQkVSIl0sCiAgZW1haWw6IFsiRU1BSUwiLCAiQUxURVJOQVRFIEVNQUlMIElEIl0sCiAgcGhvbmU6IFsiTU9CSUxFIE5VTUJFUiIsICJBTFRFUk5BVEUgTU9CSUxFIl0sCn07Cgp2YXIgYXBwY3R0eXBlID0gWyJBMSIsICJBMiIsICJBMyIsICJBNCIsICJBNSIsICJBNiJdOwp2YXIgZXNpZ25EYXRhID0gWyJGSVJTVCBOQU1FIiwgIkxBU1QgTkFNRSJdOwoKdmFyIHNpZ25pbmdPcHRpb24gPSBbCiAgeyB2YWx1ZTogIk5vdyIsIGxhYmVsOiAiTm93IiB9LAogIHsgdmFsdWU6ICJMYXRlciIsIGxhYmVsOiAiTGF0ZXIiIH0sCl07Cgp2YXIgVGhyZXNob2xkU2NvcmUgPSAwOyAvLyBtdXN0IGJlIGluIDAgdG8gMTAwCgp2YXIgYm9va2luZ1ZlcmlmaWVkID0gZmFsc2U7Cgp2YXIgbXlndGNuZGV0YWlscyA9ICIiOwoKdmFyIGFwcGxpY2FudE51bSA9IHsKICBBMTogIlByaW1hcnkgQXBwbGljYW50IiwKICBBMjogIkZpcnN0IEpvaW50IEFwcGxpY2FudCIsCiAgQTM6ICJTZWNvbmQgSm9pbnQgQXBwbGljYW50IiwKICBBNDogIlRoaXJkIEpvaW50IEFwcGxpY2FudCIsCiAgQTU6ICJGb3J0aCBKb2ludCBBcHBsaWNhbnQiLAogIEE2OiAiRmlmdGggSm9pbnQgQXBwbGljYW50IiwKfTsKCnZhciBwcmVvYmogPSB7CiAga3ljZG9jdW1lbnQ6IFtdLAogIGJvb2tpbmdzb3VyY2U6IHsKICAgIGlvX3NvdXJjZTogIkJPT0tJTkcgU09VUkNFIiwKICAgIGlvX25hbWU6ICJDSEFOTkVMIFBBUlRORVIgTkFNRSIsCiAgICBpb19yZXJhX25vOiAiQ1AgUkVSQSBOVU1CRVIiLAogICAgaW9fY3BfbW9iaWxlOiAiQ2hhbm5lbCBQYXJ0bmVyIE1vYmlsZSBubyIsCiAgICAKICB9LAogIHVuaXRkZXRhaWxzOiB7CiAgICBwcm9qZWN0X25hbWU6ICJQcm9qZWN0IG5hbWUiLAogICAgdG93ZXI6ICJUT1dFUiIsCiAgICBhcGFydG1lbnRfbm86ICJVTklUIE5PIiwKICAgIGNhcnBldF9hcmVhOiAiQ0FSUEVUIEFSRUEgKElOIFNRVUFSRSBGRUVUKSIsCiAgICB0eXBlX29mX2FwYXJ0bWVudDogIlVOSVQgQ09ORklHVVJBVElPTiIsCiAgICBmbG9vcl9ubzogImZsb29yIG5vIiwKICAgIHBhcmtpbmdfcmVxdWVzdGVkOiAiTlVNQkVSIE9GIFBBUktJTkciLAogICAgYW5jaWxsYXJ5X2FyZWE6ICJPVEhFUiBVU0FCTEUgQVJFQSAoSU4gU1FVQVJFIEZFRVQpIiwKICAgdG90YWxfYXJlYTogIlRPVEFMIChDYXJwZXQgKyBPdGhlcikgQVJFQShJTiBTUVVBUkUgRkVFVCkiLAogICAgZmxhdF9jb3N0OiAiQUdSRUVNRU5UIFZBTFVFIChJTiBJTlIpIiwKICAgIGFndmFsX3dvcmRzOidBR1JFRU1FTlQgVkFMVUUgSU4gV09SRFMgKElOIElOUiknCiAgfSwKICBib29raW5nYW1vdW50OiB7CiAgICBib29raW5nX2Ftb3VudDogImJvb2tpbmcgYW1vdW50IChpbiBpbnIpIiwKICAgIGJhbms6ICJCQU5LIiwKICAgIGlmc2M6ICIiLAogICAgZmlsZTogImZpbGUiLAogICAgY2hlcXVlX2Zhdm9yaW5nX2RldGFpbHM6ICJDSEVRVUUgRkFWT1JJTkcgREVUQUlMUyIsCiAgICBydXBlZXNfaW5fd29yZHM6ICJCT09LSU5HIEFNT1VOVCBJTiBXT1JEUyAoSU4gSU5SKSIsCiAgICBkYXRlX29mX2NoZXF1ZTogIkRBVEUiLAogICAgY2hlcXVlX25vOiAiREQvUE8vQ0hFUVVFIE5PL1JUR1MvTkVGVCIsCiAgfSwKICBhbGxhYm91dHlvdTogewogICAgZGF0ZV9vZl9iaXJ0aDogIkRBVEUgT0YgQklSVEgiLAogICAgbW90aGVyX3Rvbmd1ZTogIk1PVEhFUiBUT05HVUUiLAogICAgbWFyaXRhbF9zdGF0dXM6ICJNQVJJVEFMIFNUQVRVUyIsCiAgICBvY2N1cHRpb25zOiAiT0NDVVBBVElPTiIsCiAgICBuYW1lX29mX2Zpcm06ICJDT01QQU5ZIE5BTUUiLAogICAgbXlfZGVzaW5hdGlvbjogIkRFU0lHTkFUSU9OIiwKICAgIG9mZmljZV9hZGRyZXNzOiAiT0ZGSUNFIExPQ0FUSU9OIiwKICAgIGluZF90eXBlOidJTkRVU1RSWSBUWVBFJwogIH0sCn07Cgp2YXIgcGFnZTN0bmMgID0gewogIHRleHQ6ICdJLyBXZSBhcmUgYXV0aG9yaXNpbmcgTCZUIEdyb3VwIENvbXBhbmllcywgb3IgYW55IHRoaXJkIHBhcnR5IGFwcG9pbnRlZCBieSBMJlQgUmVhbHR5LCB0byB1c2UgbXkgcGVyc29uYWwgZGF0YSBmb3IgdXBkYXRlcywgcHJvbW90aW9uYWwgY29tbXVuaWNhdGlvbiBhbmQgbWFya2V0aW5nIHN1cnZleSB3aXRob3V0IHNlZWtpbmcgYW55IGZ1cnRoZXIgY29uc2VudCBmb3IgdGhlIHNhbWUsIGV2ZW4gdGhvdWdoIHwgLyBXZSBtYXkgYmUgcmVnaXN0ZXJlZCB1bmRlciBETkMuJwp9Cg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPBody>
        <TcpPackets>
          <PacketInfo time="519315562" offset="0" length="332" />
          <PacketInfo time="519315562" offset="332" length="4906" />
        </TcpPackets>
      </HTTPResponse>
    </HTTPTask>
    <HTTPTask id="361" hostname="dev.bluealgo.com" path="https://dev.bluealgo.com/smartformup/ui/loadForm.js" url="https://dev.bluealgo.com/smartformup/ui/loadForm.js" ip="144.126.253.3" port="443" connectionId="28" origin="HTML" frame="1" startDateTime="2024-02-15T10:57:48.168+05:30" startTime="519315859" endTime="519315859">
      <HTTPRequest method="GET">
        <HTTPHeaders>
          <HTTPHeaderEntity name="sec-ch-ua" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ik5vdCBBKEJyYW5kIjt2PSI5OSIsICJHb29nbGUgQ2hyb21lIjt2PSIxMjEiLCAiQ2hyb21pdW0iO3Y9IjEyMSI=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="sec-ch-ua-mobile" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>PzA=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="User-Agent" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEyMS4wLjAuMCBTYWZhcmkvNTM3LjM2</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="sec-ch-ua-platform" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>IldpbmRvd3Mi</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ki8q</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Sec-Fetch-Site" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>c2FtZS1vcmlnaW4=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Sec-Fetch-Mode" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bm8tY29ycw==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Sec-Fetch-Dest" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>c2NyaXB0</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Referer" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cHM6Ly9kZXYuYmx1ZWFsZ28uY29tL3NtYXJ0Zm9ybXVwL2xvYWRpbmRleD9vcHBvcnR1bml0eUlkPTAwNjBvMDAwMDFlU0lKMEFBTyZjdXN0b21lcmlkPWN1c3QxMDA1JmFjY2Vzc3Rva2VuPXVYQ3haUktVLU1mMndpVGczX0E4ZFB1OTU3dGFMWHhQ</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Encoding" index="9">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Language" index="10">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZW4tVVMsZW47cT0wLjk=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Cookie" index="11">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SlNFU1NJT05JRD0zRDVFOEZFODBBNEYzNEY5QkM0OEI2RTc0ODhCOEY5MQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Host" index="12">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZGV2LmJsdWVhbGdvLmNvbQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0VUIGh0dHBzOi8vZGV2LmJsdWVhbGdvLmNvbS9zbWFydGZvcm11cC91aS9sb2FkRm9ybS5qcyBIVFRQLzEuMQ0Kc2VjLWNoLXVhOiAiTm90IEEoQnJhbmQiO3Y9Ijk5IiwgIkdvb2dsZSBDaHJvbWUiO3Y9IjEyMSIsICJDaHJvbWl1bSI7dj0iMTIxIg0Kc2VjLWNoLXVhLW1vYmlsZTogPzANClVzZXItQWdlbnQ6IE1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS8xMjEuMC4wLjAgU2FmYXJpLzUzNy4zNg0Kc2VjLWNoLXVhLXBsYXRmb3JtOiAiV2luZG93cyINCkFjY2VwdDogKi8qDQpTZWMtRmV0Y2gtU2l0ZTogc2FtZS1vcmlnaW4NClNlYy1GZXRjaC1Nb2RlOiBuby1jb3JzDQpTZWMtRmV0Y2gtRGVzdDogc2NyaXB0DQpSZWZlcmVyOiBodHRwczovL2Rldi5ibHVlYWxnby5jb20vc21hcnRmb3JtdXAvbG9hZGluZGV4P29wcG9ydHVuaXR5SWQ9MDA2MG8wMDAwMWVTSUowQUFPJmN1c3RvbWVyaWQ9Y3VzdDEwMDUmYWNjZXNzdG9rZW49dVhDeFpSS1UtTWYyd2lUZzNfQThkUHU5NTd0YUxYeFANCkFjY2VwdC1FbmNvZGluZzogZ3ppcCwgZGVmbGF0ZQ0KQWNjZXB0LUxhbmd1YWdlOiBlbi1VUyxlbjtxPTAuOQ0KQ29va2llOiBKU0VTU0lPTklEPTNENUU4RkU4MEE0RjM0RjlCQzQ4QjZFNzQ4OEI4RjkxDQpIb3N0OiBkZXYuYmx1ZWFsZ28uY29tDQoNCg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
          <HTTPCookies>
            <HTTPHeaderEntity name="JSESSIONID" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>M0Q1RThGRTgwQTRGMzRGOUJDNDhCNkU3NDg4QjhGOTE=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
          </HTTPCookies>
        </HTTPHeaders>
      </HTTPRequest>
      <HTTPResponse>
        <contentLenght>180665</contentLenght>
        <HTTPHeaders>
          <HTTPHeaderEntity name="Date" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VGh1LCAxNSBGZWIgMjAyNCAwNToxODo1MiBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Type" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>YXBwbGljYXRpb24vamF2YXNjcmlwdA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Length" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MTgwNjY1</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Connection" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Access-Control-Allow-Origin" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Kg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Ranges" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ynl0ZXM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="ETag" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Vy8iMTgwNjY1LTE3MDU2MTMyOTQwMDAi</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Last-Modified" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VGh1LCAxOCBKYW4gMjAyNCAyMToyODoxNCBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Strict-Transport-Security" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bWF4LWFnZT0xNTcyNDgwMDsgaW5jbHVkZVN1YkRvbWFpbnM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SFRUUC8xLjEgMjAwIA0KRGF0ZTogVGh1LCAxNSBGZWIgMjAyNCAwNToxODo1MiBHTVQNCkNvbnRlbnQtVHlwZTogYXBwbGljYXRpb24vamF2YXNjcmlwdA0KQ29udGVudC1MZW5ndGg6IDE4MDY2NQ0KQ29ubmVjdGlvbjoga2VlcC1hbGl2ZQ0KQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luOiAqDQpBY2NlcHQtUmFuZ2VzOiBieXRlcw0KRVRhZzogVy8iMTgwNjY1LTE3MDU2MTMyOTQwMDAiDQpMYXN0LU1vZGlmaWVkOiBUaHUsIDE4IEphbiAyMDI0IDIxOjI4OjE0IEdNVA0KU3RyaWN0LVRyYW5zcG9ydC1TZWN1cml0eTogbWF4LWFnZT0xNTcyNDgwMDsgaW5jbHVkZVN1YkRvbWFpbnMNCg0K</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPBody>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ly8gSW4gdGhpcyB2ZXJzaW9uIHRoZSAKCgpmdW5jdGlvbiByZW5kZXJBbGwoKSB7CgoJY29uc3QgbXlwcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewoJCXRyeSB7CgkJCWNvbnN0IHVybHMgPSBuZXcgVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmKTsKCQkJY29uc3Qgc2VhcmNoUGFyYW1zID0gdXJscy5zZWFyY2hQYXJhbXM7CgkJCWNvbnN0IG9wb3J0SWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgib3Bwb3J0dW5pdHlwYXNzIik7CgkJCWNvbnN0IHByb2plY3RpZEVsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwcm9qZWN0aWQiKTsKCgkJCW9wb3J0SWQudmFsdWUgPSBzZWFyY2hQYXJhbXMuZ2V0KCJvcHBvcnR1bml0eUlkIik7CgkJCXByb2plY3RpZEVsZS52YWx1ZSA9IHNlYXJjaFBhcmFtcy5nZXQoImN1c3RvbWVyaWQiKTsKCQkJLy8gY29uc3QgY2hlY2tCb3hUZXh0cyA9ICB7CgkJCS8vICAgcGFnZV90d286ICdJL1dlLCBoZXJlYnkgZGVjbGFyZSB0aGF0IHRoZSBLWUMgZG9jdW1lbnRzIHVwbG9hZGVkIGFyZSBnZW51aW5lIGFuZCBhdXRoZW50aWMuJywKCQkJLy8gICBwYWdlX2ZvdXI6ICdJL1dlIGFja25vd2xlZGdlIHRoYXQgd2UgaGF2ZSByZWFkIHRoZSBhYm92ZSBpbmZvcm1hdGlvbiBhbmQgYWdyZWUgdG8gcHJvY2VlZCBhY2NvcmRpbmdseS4nLAoJCQkvLyAgIHBhZ2VfZml2ZTogJ0kvV2UsIHByb3ZpZGUgY29uc2VudCB0byBwcm9jZWVkIHdpdGggdGhlIGFib3ZlIG1lbnRpb25lZCBjaGFubmVsIHBhcnRuZXIgZm9yIHRoZSBib29raW5nLicsCgkJCS8vICAgY29tbW9uOiAnSS9XZSwgY29uZmlybSB0aGF0IHRoZSBpbmZvcm1hdGlvbiBwcm92aWRlZCBieSBtZSBpcyBhY2N1cmF0ZSB0byB0aGUgYmVzdCBvZiBteS9vdXIga25vd2xlZGdlLicsCgkJCS8vICAgdGVybXM6ICdJL1dlIGFja25vd2xlZGdlIHRoYXQgd2UgaGF2ZSByZWFkIHRoZSBhYm92ZSB0ZXJtcyAmIGNvbmRpdGlvbnMgYW5kIGFncmVlIHRvIHByb2NlZWQgYWNjb3JkaW5nbHkuJywKCQkJLy8gICBwYWdlX25pbmU6ICdJL1dlLCBoYXZlIHJlYWQgYWxsIHRoZSB0ZXJtcyBhbmQgY29uZGl0aW9ucyBhbmQgYnkgZS1zaWduaW5nL3N1Ym1pdHRpbmcgdGhlIGRvY3VtZW50IGFncmVlIHRoYXQgYWxsIHRoZSBpbmZvcm1hdGlvbiBpbiB0aGUgZW50aXJldHkgb2YgdGhlIGRvY3VtZW50LCBhcyB2aXNpYmxlIGluIHRoZSBwcmV2aWV3LCBpcyBhY2N1cmF0ZS4nCgkJCS8vIH0KCgkJCWNvbnN0IHJlcXVlc3RPcHRpb25zID0gewoJCQkJbWV0aG9kOiAiUE9TVCIsCgkJCQlyZWRpcmVjdDogImZvbGxvdyIsCgkJCQlib2R5OiB7fSwKCQkJfTsKCgkJCWNvbnN0IG15RG9jdW1lbnRzID0ge307CgkJCS8vIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJteWRvY3VtZW50IiwgSlNPTi5zdHJpbmdpZnkobXlEb2N1bWVudHMpKTsKCQkJbXlkb2N1bWVudCA9IEpTT04uc3RyaW5naWZ5KG15RG9jdW1lbnRzKTsKCgkJCWZldGNoKHVzZXJGb3JtVVJsLCByZXF1ZXN0T3B0aW9ucykKCQkJCS50aGVuKChyZXNwb25zZSkgPT4gcmVzcG9uc2UuanNvbigpKQoJCQkJLnRoZW4oKGpzb24pID0+IHsKCQkJCQlzY2hlbWEgPSBqc29uOwoJCQkJCWxldCBwYWdlID0gMDsKCQkJCQlsZXQgY2hlY2tUZXh0ID0gc2NoZW1hWyJmaXJzdC1wYWdlIl1bIm90aGVyIl07CgoJCQkJCWNvbnN0IGtleXMgPSBbImZpcnN0LXBhZ2UiLCAiaWRlbnRpZmljYXRpb24iLCAiYXBwbGljYW50LWRldGFpbHMiLCAiYW5leHVyZS1hIiwgImJvb2tpbmctc291cmNlIiwgInNlbGYtZGVjbGFyYXRpb24iLCAidGVybXMtYW5kLWNvbmRpdGlvbnMiLCAiY2hlY2stbGlzdC1kb2N1bWVudHMiXTsKCQkJCQlteWd0Y25kZXRhaWxzID0gSlNPTi5wYXJzZSgKCQkJCQkJSlNPTi5zdHJpbmdpZnkoc2NoZW1hWyJ0ZXJtcy1hbmQtY29uZGl0aW9ucyJdKQoJCQkJCSk7CgoKCgkJCQkJY29uc3QgY3RuID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpOwoJCQkJCWZvciAoY29uc3Qga2V5IG9mIGtleXMpIHsKCQkJCQkJaWYgKGtleSA9PT0gImZpcnN0LXBhZ2UiKSB7CgkJCQkJCQkrK3BhZ2U7CgoJCQkJCQkJY29uc3QgcGFnZWxpc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCQkJCQkJCXBhZ2VsaXN0LnNldEF0dHJpYnV0ZSgiaWQiLCBgcGFnZS0xYCk7CgkJCQkJCQljb25zdCBpbm5lckNvbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCQkJCQkJCWlubmVyQ29udC5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgImhvbWVfY29udGFpbmVyIik7CgkJCQkJCQljb25zdCBpbnB1dEdycCA9IGNyZWF0ZUlucHV0R3JwKHNjaGVtYVtrZXldWyJmb3JtIl0pOwoJCQkJCQkJaW5wdXRHcnAuY2xhc3NMaXN0LmFkZCgicGFnZS0xLWZvcm0iKTsKCgkJCQkJCQljb25zdCBmY3RuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgkJCQkJCQlmY3RuLmNsYXNzTGlzdC5hZGQoInBhZ2UtMS1mb3JtLWN0biIpOwoKCQkJCQkJCWlucHV0R3JwCgkJCQkJCQkJLnF1ZXJ5U2VsZWN0b3JBbGwoImlucHV0LCB0ZXh0YXJlYSwgc2VsZWN0IikKCQkJCQkJCQkuZm9yRWFjaCgoZSkgPT4gewoJCQkJCQkJCQlpZiAoIWUuY2xhc3NMaXN0LmNvbnRhaW5zKCJub3RfZWRpdGFibGUiKSkgewoJCQkJCQkJCQkJZS5yZW1vdmVBdHRyaWJ1dGUoImRpc2FibGVkIik7CgkJCQkJCQkJCX0KCQkJCQkJCQl9KTsKCgkJCQkJCQlmY3RuLmFwcGVuZChpbnB1dEdycCk7CgoJCQkJCQkJY29uc3QgbmV3X2FkZGZvcm1saXN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgkJCQkJCQluZXdfYWRkZm9ybWxpc3Quc2V0QXR0cmlidXRlKCJpZCIsICJuZXdfYWRkZm9ybWxpc3QiKTsKCQkJCQkJCXZhciBjdXJyZW50X2FwcGxpY2FudCA9IDE7CgkJCQkJCQljb25zdCBhcHBfZGV0aWFscyA9IHNjaGVtYVsiZmlyc3QtcGFnZSJdWyJhcHBsaWNhbnRfZGV0YWlscyJdOwoKCQkJCQkJCWlmIChhcHBfZGV0aWFscy5sZW5ndGggPiAwKSB7CgkJCQkJCQkJZm9yIChsZXQgaSA9IDA7IGkgPCBhcHBfZGV0aWFscy5sZW5ndGg7IGkrKykgewoJCQkJCQkJCQljb25zdCBhcGN0X2xpc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCQkJCQkJCQkJYXBjdF9saXN0LnNldEF0dHJpYnV0ZSgiY2xhc3MiLCBgYXBjdF90eXBlX2RpdmApOwoKCQkJCQkJCQkJY29uc3QgbGFiZWxFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKTsKCQkJCQkJCQkJbGFiZWxFbC5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgImFwY3RfdHlwZV9sYWJsZSIpOwoJCQkJCQkJCQlsYWJlbEVsLmlubmVySFRNTCA9CgkJCQkJCQkJCQljdXJyZW50X2FwcGxpY2FudCA9PT0gMQoJCQkJCQkJCQkJCT8gIlByaW1hcnkgQXBwbGljYW50IgoJCQkJCQkJCQkJCTogYCR7cGFnZUluZm9bY3VycmVudF9hcHBsaWNhbnQgLSAyXX1gOwoKCQkJCQkJCQkJY29uc3QgYXB0X3R5cGUgPSBhcHBfZGV0aWFsc1tpXVsiQXBwbGljYW50X1R5cGUiXTsKCQkJCQkJCQkJY29uc3Qgc2VsZWN0X2VsZSA9IEFwcGxpY2FudENvbXAoCgkJCQkJCQkJCQlgYXBwbGljYW50XyR7Y3VycmVudF9hcHBsaWNhbnR9YCwKCQkJCQkJCQkJCWFwdF90eXBlCgkJCQkJCQkJCSk7CgoJCQkJCQkJCQlhcGN0X2xpc3QuYXBwZW5kQ2hpbGQobGFiZWxFbCk7CgkJCQkJCQkJCWFwY3RfbGlzdC5hcHBlbmRDaGlsZChzZWxlY3RfZWxlKTsKCgkJCQkJCQkJCWlmIChpID09PSBhcHBfZGV0aWFscy5sZW5ndGggLSAxKSB7CgkJCQkJCQkJCQljb25zdCBwbG1lbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCQkJCQkJCQkJCXBsbWVsZS5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgInBsbWZsZXhfaWNvbiIpOwoKCQkJCQkJCQkJCWxldCBwbHVzSWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKTsKCQkJCQkJCQkJCXBsdXNJY29uLnNldEF0dHJpYnV0ZSgiY2xhc3MiLCAibXlfdHlwZV9wbHVzIik7CgkJCQkJCQkJCQlwbHVzSWNvbi5pbm5lckhUTUwgPSAiKyI7CgoJCQkJCQkJCQkJcGx1c0ljb24gPSBBcHBQbHVzYXBwbGljYW50KHBsdXNJY29uLCBjdXJyZW50X2FwcGxpY2FudCk7CgkJCQkJCQkJCQlwbG1lbGUuYXBwZW5kQ2hpbGQocGx1c0ljb24pOwoJCQkJCQkJCQkJYXBjdF9saXN0LmFwcGVuZENoaWxkKHBsbWVsZSk7CgkJCQkJCQkJCX0KCgkJCQkJCQkJCW5ld19hZGRmb3JtbGlzdC5hcHBlbmQoYXBjdF9saXN0KTsKCQkJCQkJCQkJZmN0bi5hcHBlbmQobmV3X2FkZGZvcm1saXN0KTsKCQkJCQkJCQkJY3VycmVudF9hcHBsaWNhbnQrKzsKCQkJCQkJCQl9CgkJCQkJCQl9CgoJCQkJCQkJY29uc3QgaW1nID0gc2NoZW1hW2tleV1bImltYWdlIl07CgkJCQkJCQlpZiAoaW1nKSB7CgkJCQkJCQkJY29uc3QgbXlpbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwoJCQkJCQkJCW15aW1hZ2Uuc2V0QXR0cmlidXRlKCJjbGFzcyIsICJjb25fZGlzcGxheWltYWdlIik7CgkJCQkJCQkJY29uc3QgaW1nRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbWciKTsKCQkJCQkJCQlpbWdFbC5zcmMgPSBpbWcuc3JjOwoJCQkJCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwYW5uZWwtbG9nbyIpLnNyYyA9IGltZy5zcmM7CgkJCQkJCQkJaWYgKGltZy5pZCkgewoJCQkJCQkJCQlpbWdFbC5zZXRBdHRyaWJ1dGUoImlkIiwgaW1nLmlkKTsKCQkJCQkJCQl9CgkJCQkJCQkJbXlpbWFnZS5hcHBlbmRDaGlsZChpbWdFbCk7CgoJCQkJCQkJCWlubmVyQ29udC5hcHBlbmQobXlpbWFnZSk7CgkJCQkJCQl9CgkJCQkJCQlpbm5lckNvbnQuYXBwZW5kKGZjdG4pOwoJCQkJCQkJcGFnZWxpc3QuYXBwZW5kKGlubmVyQ29udCk7CgkJCQkJCQljdG4uYXBwZW5kKHBhZ2VsaXN0KTsKCgkJCQkJCQljb250aW51ZTsKCQkJCQkJfQoKCQkJCQkJaWYgKGtleSA9PT0gImlkZW50aWZpY2F0aW9uIikgewoJCQkJCQkJKytwYWdlOwoJCQkJCQkJY29uc3QgcGFnZUN0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwoJCQkJCQkJcGFnZUN0bi5zZXRBdHRyaWJ1dGUoImlkIiwgYHBhZ2UtJHtwYWdlfWApOwoJCQkJCQkJcGFnZUN0bi5jbGFzc0xpc3QuYWRkKCJoaWRkZW4iKTsKCQkJCQkJCWN0bi5hcHBlbmQocGFnZUN0bik7CgkJCQkJCQljb250aW51ZTsKCQkJCQkJfQoKCQkJCQkJaWYgKGtleSA9PT0gImFwcGxpY2FudC1kZXRhaWxzIikgewoJCQkJCQkJKytwYWdlOwoJCQkJCQkJY29uc3QgbXlzZWMgPSBzY2hlbWFbImFwcGxpY2FudC1kZXRhaWxzIl07CgkJCQkJCQljb25zdCBwYWdlQ3RuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgkJCQkJCQlwYWdlQ3RuLnNldEF0dHJpYnV0ZSgiaWQiLCBgcGFnZS0ke3BhZ2V9YCk7CgoJCQkJCQkJcGFnZUN0bi5jbGFzc0xpc3QuYWRkKCJoaWRkZW4iKTsKCQkJCQkJCWN0bi5hcHBlbmQocGFnZUN0bik7CgoKCQkJCQkJCS8vICsrcGFnZTsKCgkJCQkJCQkvLyBjb25zdCBwYWdlQ3RuQWxsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgkJCQkJCQkvLyBwYWdlQ3RuQWxsLnNldEF0dHJpYnV0ZSgiaWQiLCBgcGFnZS0ke3BhZ2V9YCk7CgkJCQkJCQkvLyBwYWdlQ3RuQWxsLmNsYXNzTGlzdC5hZGQoImhpZGRlbiIpOwoJCQkJCQkJLy8gcGFnZUN0bkFsbC5hcHBlbmQocmVuZGVyYWxsQWJvdXRTZWN0aW9uKHNjaGVtYVtrZXldKSk7CgoJCQkJCQkJLy8gY3RuLmFwcGVuZChwYWdlQ3RuLCBwYWdlQ3RuQWxsKTsKCQkJCQkJCWNvbnRpbnVlOwoJCQkJCQl9CgoJCQkJCQljb25zdCBwZXJQYWdlID0gc2NoZW1hW2tleV1bInBlci1wYWdlIl07CgoJCQkJCQlpZiAocGVyUGFnZSkgewoJCQkJCQkJY29uc3Qgcm91bmRzID0gTWF0aC5jZWlsKAoJCQkJCQkJCXNjaGVtYVtrZXldWyJzdWItc2VjdGlvbnMiXS5sZW5ndGggLyBwZXJQYWdlCgkJCQkJCQkpOwoJCQkJCQkJZm9yIChsZXQgaSA9IDA7IGkgPCByb3VuZHM7IGkrKykgewoJCQkJCQkJCXBhZ2UrKzsKCQkJCQkJCQljb25zdCBwYWdlQ3RuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgkJCQkJCQkJcGFnZUN0bi5zZXRBdHRyaWJ1dGUoImlkIiwgYHBhZ2UtJHtwYWdlfWApOwoJCQkJCQkJCXBhZ2VDdG4uY2xhc3NMaXN0LmFkZCgiaGlkZGVuIik7CgkJCQkJCQkJcGFnZUN0bi5hcHBlbmQoCgkJCQkJCQkJCXJlbmRlclNlY3Rpb24oewoJCQkJCQkJCQkJLi4uc2NoZW1hW2tleV0sCgkJCQkJCQkJCQkic3ViLXNlY3Rpb25zIjogc2NoZW1hW2tleV1bInN1Yi1zZWN0aW9ucyJdLnNwbGljZSgKCQkJCQkJCQkJCQkwLAoJCQkJCQkJCQkJCXBlclBhZ2UKCQkJCQkJCQkJCSksCgkJCQkJCQkJCQloZWFkaW5nOiBpID09IDAgPyBzY2hlbWFba2V5XVsiaGVhZGluZyJdIDogIiIsCgkJCQkJCQkJCX0pCgkJCQkJCQkJKTsKCQkJCQkJCQlpZiAoY2hlY2tUZXh0KSB7CgkJCQkJCQkJCXBhZ2VDdG4uYXBwZW5kKAoJCQkJCQkJCQkJYWNrbm9sZWRnZUNoZWNrKGNoZWNrQm94VGV4dHMudGVybXMsIGBhcHB0bmNfYWdncmVfJHtwYWdlfWApCgkJCQkJCQkJCSk7CgkJCQkJCQkJfQoJCQkJCQkJCWN0bi5hcHBlbmQocGFnZUN0bik7CgkJCQkJCQl9CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQlwYWdlKys7CgkJCQkJCQljb25zdCBwYWdlQ3RuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgkJCQkJCQlwYWdlQ3RuLnNldEF0dHJpYnV0ZSgiaWQiLCBgcGFnZS0ke3BhZ2V9YCk7CgkJCQkJCQlwYWdlQ3RuLmNsYXNzTGlzdC5hZGQoImhpZGRlbiIpOwoJCQkJCQkJcGFnZUN0bi5hcHBlbmQocmVuZGVyU2VjdGlvbihzY2hlbWFba2V5XSkpOwoJCQkJCQkJaWYgKGNoZWNrVGV4dCkgewoKCgkJCQkJCQkJaWYgKHBhZ2UgPT0gMTEpIHsKCQkJCQkJCQkJcGFnZUN0bi5hcHBlbmQoCgkJCQkJCQkJCQlhY2tub2xlZGdlQ2hlY2soY2hlY2tCb3hUZXh0cy5wYWdlX25pbmUsIGBhcHB0bmNfYWdncmVfJHtwYWdlfWApCgkJCQkJCQkJCSk7CgkJCQkJCQkJfSBlbHNlIGlmIChwYWdlID09PSA0KSB7CgkJCQkJCQkJCXBhZ2VDdG4uYXBwZW5kKAoJCQkJCQkJCQkJYWNrbm9sZWRnZUNoZWNrKGNoZWNrQm94VGV4dHMucGFnZV9mb3VyLCBgYXBwdG5jX2FnZ3JlXyR7cGFnZX1gKQoJCQkJCQkJCQkpOwoJCQkJCQkJCX0gZWxzZSBpZiAocGFnZSA9PT0gNSkgewoJCQkJCQkJCQljb25zdCBib29raW5nU3JjVHlwZSA9IHNjaGVtYVsnYm9va2luZy1zb3VyY2UnXVsnZm9ybSddWzBdWydkZWZhdWx0VmFsdWUnXTsKCQkJCQkJCQkJaWYgKGJvb2tpbmdTcmNUeXBlID09PSAnQ2hhbm5lbCBQYXJ0bmVyJykgewoJCQkJCQkJCQkJcGFnZUN0bi5hcHBlbmQoCgkJCQkJCQkJCQkJYWNrbm9sZWRnZUNoZWNrKGNoZWNrQm94VGV4dHMucGFnZV9maXZlLCBgYXBwdG5jX2FnZ3JlXyR7cGFnZX1gKQoJCQkJCQkJCQkJKTsKCQkJCQkJCQkJfQoJCQkJCQkJCQllbHNlIHsKCQkJCQkJCQkJCXBhZ2VDdG4uYXBwZW5kKAoJCQkJCQkJCQkJCWFja25vbGVkZ2VDaGVjayhjaGVja0JveFRleHRzLnBhZ2VfZml2ZV9jdXN0b20sIGBhcHB0bmNfYWdncmVfJHtwYWdlfWApCgkJCQkJCQkJCQkpOwoJCQkJCQkJCQl9CgkJCQkJCQkJfSBlbHNlIGlmIChwYWdlID09PSA4KSB7CgkJCQkJCQkJCXBhZ2VDdG4uYXBwZW5kKAoJCQkJCQkJCQkJYWNrbm9sZWRnZUNoZWNrKGNoZWNrQm94VGV4dHMucGFnZV9maXZlX2N1c3RvbSwgYGFwcHRuY19hZ2dyZV8ke3BhZ2V9YCkKCQkJCQkJCQkJKTsKCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQlwYWdlQ3RuLmFwcGVuZCgKCQkJCQkJCQkJCWFja25vbGVkZ2VDaGVjayhjaGVja1RleHQudGV4dCwgYGFwcHRuY19hZ2dyZV8ke3BhZ2V9YCkKCQkJCQkJCQkJKTsKCQkJCQkJCQl9CgkJCQkJCQl9CgkJCQkJCQlpZiAoa2V5ID09PSAnYm9va2luZy1zb3VyY2UnKSB7CgoJCQkJCQkJCSsrcGFnZTsKCgkJCQkJCQkJbGV0IGJvb2tBbXQgPSBzY2hlbWFbJ2FuZXh1cmUtYSddOwoKCQkJCQkJCQlib29rQW10WydzdWItc2VjdGlvbnMnXVtib29rQW10WydzdWItc2VjdGlvbnMnXS5sZW5ndGggLSAxXVsnc3ViLWhlYWRpbmcnXSA9ICdCT09LSU5HIEFNT1VOVCc7CgkJCQkJCQkJYm9va0FtdFsnc3ViLXNlY3Rpb25zJ11bYm9va0FtdFsnc3ViLXNlY3Rpb25zJ10ubGVuZ3RoIC0gMV0/LmZvcm0/Lm1hcCgodikgPT4geyBkZWxldGUgdi5kaXNhYmxlZDsgcmV0dXJuIHsgLi4udiB9IH0pCgkJCQkJCQkJY29uc3QgcGFnZUN0bkFsbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwoJCQkJCQkJCXBhZ2VDdG5BbGwuc2V0QXR0cmlidXRlKCJpZCIsIGBwYWdlLSR7cGFnZX1gKTsKCQkJCQkJCQlwYWdlQ3RuQWxsLmNsYXNzTGlzdC5hZGQoImhpZGRlbiIpOwoJCQkJCQkJCXBhZ2VDdG5BbGwuYXBwZW5kKHJlbmRlcmJvb2tpbmdBbW91bnRTZWN0aW9uKGJvb2tBbXQpKTsKCQkJCQkJCQlpZiAoY2hlY2tUZXh0KSB7CgkJCQkJCQkJCXBhZ2VDdG5BbGwuYXBwZW5kKAoJCQkJCQkJCQkJYWNrbm9sZWRnZUNoZWNrKGNoZWNrQm94VGV4dHMuY29tbW9uLCBgYXBwdG5jX2FnZ3JlXyR7cGFnZX1gKQoJCQkJCQkJCQkpOwoJCQkJCQkJCX0KCQkJCQkJCQkrK3BhZ2U7CgkJCQkJCQkJY29uc3QgcGFnZUN0bkFsbDIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCQkJCQkJCQlwYWdlQ3RuQWxsMi5zZXRBdHRyaWJ1dGUoImlkIiwgYHBhZ2UtJHtwYWdlfWApOwoJCQkJCQkJCXBhZ2VDdG5BbGwyLmNsYXNzTGlzdC5hZGQoImhpZGRlbiIpOwoJCQkJCQkJCXBhZ2VDdG5BbGwyLmFwcGVuZChyZW5kZXJhbGxBYm91dFNlY3Rpb24oc2NoZW1hWydhcHBsaWNhbnQtZGV0YWlscyddKSk7CgkJCQkJCQkJcGFnZUN0bkFsbDIuYXBwZW5kKAoJCQkJCQkJCQlhY2tub2xlZGdlQ2hlY2soY2hlY2tCb3hUZXh0cy5jb21tb24sIGBhcHB0bmNfYWdncmVfJHtwYWdlfWApCgkJCQkJCQkJKTsKCgkJCQkJCQkJY3RuLmFwcGVuZChwYWdlQ3RuLCBwYWdlQ3RuQWxsLCBwYWdlQ3RuQWxsMik7CgkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCWN0bi5hcHBlbmQocGFnZUN0bik7CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQl9CgoJCQkJCWNvbnN0IGZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJmb3JtIik7CgkJCQkJZm9ybS5wcmVwZW5kKGN0bik7CgoJCQkJCXJlc29sdmUocGFnZSk7CgkJCQl9KTsKCQkJLy8gLmNhdGNoKChlcnIpID0+IHtjb25zb2xlLmxvZyhlcnIpO3JlamVjdChmYWxzZSl9KTsKCQl9IGNhdGNoIChlcnIpIHsKCQkJY29uc29sZS5sb2coZXJyKTsKCQkJcmVqZWN0KGZhbHNlKTsKCQl9Cgl9KTsKCXJldHVybiBteXByb21pc2U7Cn0KCmZ1bmN0aW9uIGFja25vbGVkZ2VDaGVjayh0ZXh0LCBpZCkgewoJY29uc3QgY2hlY2tFbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCWNoZWNrRWxlLmNsYXNzTGlzdC5hZGQoImFja25vbGVkZ2UtZWxlbWVudCIpOwoJY29uc3QgaW5wdXRDdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCWlucHV0Q3RuLmNsYXNzTGlzdC5hZGQoImZpdGNvbnRlbnRfY2hlY2siLCAiYWNrbm9sZWRnZV9jaGVjayIpOwoKCWNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKTsKCWlucHV0LnNldEF0dHJpYnV0ZSgiaWQiLCBpZCk7CglpbnB1dC5jbGFzc0xpc3QuYWRkKCJ0bmNfYWdyZWUiKTsKCWlucHV0LnNldEF0dHJpYnV0ZSgibmFtZSIsIGlkKTsKCWlucHV0LnNldEF0dHJpYnV0ZSgidHlwZSIsICJjaGVja2JveCIpOwoKCWNvbnN0IGxhYmVsRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsYWJlbCIpOwoJbGFiZWxFbC5pbm5lclRleHQgPSB0ZXh0OwoJbGFiZWxFbC5zZXRBdHRyaWJ1dGUoImZvciIsIGlkKTsKCWxhYmVsRWwuY2xhc3NMaXN0LmFkZCgidG5jX2FncmVlVGV4dCIpOwoJbGFiZWxFbC5zdHlsZS5mb250V2VpZ2h0ID0gNTAwOwoJbGFiZWxFbC5zdHlsZS5mb250U2l6ZSA9ICIxNHB4IjsKCWlucHV0Lm9uY2hhbmdlID0gZnVuY3Rpb24gKCkgewoJCWxhYmVsRWwuc3R5bGUuY29sb3IgPSAiYmxhY2siOwoJfTsKCglpbnB1dEN0bi5hcHBlbmQoaW5wdXQsIGxhYmVsRWwpOwoJY2hlY2tFbGUuYXBwZW5kQ2hpbGQoaW5wdXRDdG4pOwoJcmV0dXJuIGNoZWNrRWxlOwp9CgpmdW5jdGlvbiBwYXltZW50RWRpdENoZWNrKHRleHQsIGlkLCBmb3JtLCBjb3VudCkgewoJY29uc3QgY2hlY2tFbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCWNoZWNrRWxlLmNsYXNzTGlzdC5hZGQoInBheW1lbnQtZWRpdC1lbGVtZW50Iik7Cgljb25zdCBpbnB1dEN0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwoJaW5wdXRDdG4uY2xhc3NMaXN0LmFkZCgiZml0Y29udGVudF9jaGVjayIsICJwYXltZW50X2NoZWNrIik7CgoJY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpOwoJaW5wdXQuc2V0QXR0cmlidXRlKCJpZCIsIGlkICsgJ18nICsgY291bnQpOwoJaW5wdXQuY2xhc3NMaXN0LmFkZCgicGF5bWVudF90b2dnbGUiKTsKCWlucHV0LnNldEF0dHJpYnV0ZSgibmFtZSIsIGlkICsgJ18nICsgY291bnQpOwoJaW5wdXQuc2V0QXR0cmlidXRlKCJ0eXBlIiwgImNoZWNrYm94Iik7CgoJY29uc3QgbGFiZWxFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxhYmVsIik7CglsYWJlbEVsLmlubmVyVGV4dCA9IHRleHQ7CglsYWJlbEVsLnNldEF0dHJpYnV0ZSgiZm9yIiwgaWQgKyAnXycgKyBjb3VudCk7CglsYWJlbEVsLmNsYXNzTGlzdC5hZGQoInBheW1lbnRfdG9nZ2xldGV4dCIpOwoJbGFiZWxFbC5zdHlsZS5mb250V2VpZ2h0ID0gNTAwOwoJbGFiZWxFbC5zdHlsZS5mb250U2l6ZSA9ICIxNHB4IjsKCWlucHV0Lm9uY2hhbmdlID0gZnVuY3Rpb24gKGV2ZW50KSB7CgkJaWYgKGV2ZW50LnRhcmdldC5jaGVja2VkID09IHRydWUpIHsKCQkJdmFyIGNscyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoYGJhbmstYW1vdW50LSR7Y291bnR9YCk7CgkJCXZhciBjbHMxID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShgYW1vdW50LWRhdGEtJHtjb3VudH1gKTsKCQkJZm9yICh2YXIgaSA9IDA7IGkgPCBjbHMubGVuZ3RoOyBpKyspIHsKCQkJCWNsc1tpXS5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7CgkJCQljbHNbaV0uY2xhc3NMaXN0LnJlbW92ZSgibm90X2VkaXRhYmxlIik7CgkJCX0KCQkJZm9yICh2YXIgaSA9IDA7IGkgPCBjbHMxLmxlbmd0aDsgaSsrKSB7CgkJCQljbHMxW2ldLnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTsKCQkJCWNsczFbaV0uY2xhc3NMaXN0LnJlbW92ZSgibm90X2VkaXRhYmxlIik7CgkJCX0KCQl9IGVsc2UgewoJCQl2YXIgY2xzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShgYmFuay1hbW91bnQtJHtjb3VudH1gKTsKCQkJdmFyIGNsczEgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGBhbW91bnQtZGF0YS0ke2NvdW50fWApOwoJCQlmb3IgKHZhciBpID0gMDsgaSA8IGNscy5sZW5ndGg7IGkrKykgewoJCQkJY2xzW2ldLnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCB0cnVlKTsKCQkJCWNsc1tpXS5jbGFzc0xpc3QuYWRkKCJub3RfZWRpdGFibGUiKTsKCQkJfQoJCQlmb3IgKHZhciBpID0gMDsgaSA8IGNsczEubGVuZ3RoOyBpKyspIHsKCQkJCWNsczFbaV0uc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsIHRydWUpOwoJCQkJY2xzMVtpXS5jbGFzc0xpc3QuYWRkKCJub3RfZWRpdGFibGUiKTsKCQkJfQoJCX0KCQlsYWJlbEVsLnN0eWxlLmNvbG9yID0gImJsYWNrIjsKCX07CgoJaW5wdXRDdG4uYXBwZW5kKGlucHV0LCBsYWJlbEVsKTsKCWNoZWNrRWxlLmFwcGVuZENoaWxkKGlucHV0Q3RuKTsKCXJldHVybiBjaGVja0VsZTsKfQoKZnVuY3Rpb24gQXBwbGljYW50Q29tcChpZCwgZGVmYXVsdHZhKSB7Cgljb25zdCBpbnB1dEN0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwoJaW5wdXRDdG4uY2xhc3NMaXN0LmFkZCgiaW5wdXRDdG4iKTsKCgl2YXIgYXBwbGljYW50X3R5cGUgPSBbCgkJeyBsYWJlbDogIkluZGl2aWR1YWwiLCB2YWx1ZTogIkluZGl2aWR1YWwiIH0sCgkJeyBsYWJlbDogIkNvbXBhbnkiLCB2YWx1ZTogIkNvbXBhbnkiIH0sCgldOwoKCWNvbnN0IHNlbGVjdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNlbGVjdCIpOwoKCXNlbGVjdC5zZXRBdHRyaWJ1dGUoImlkIiwgaWQpOwoKCXNlbGVjdC5zZXRBdHRyaWJ1dGUoIm5hbWUiLCAiYXBwbGljYW50X3R5cGVfaWR0Iik7CgoJZm9yIChjb25zdCBvcHRpb25WYWwgb2YgYXBwbGljYW50X3R5cGUpIHsKCQljb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJvcHRpb24iKTsKCQlvcHRpb24uc2V0QXR0cmlidXRlKCJ2YWx1ZSIsIG9wdGlvblZhbC52YWx1ZSk7CgkJb3B0aW9uLmlubmVyVGV4dCA9IG9wdGlvblZhbC5sYWJlbDsKCgkJaWYgKGRlZmF1bHR2YSkgewoJCQlpZiAoZGVmYXVsdHZhID09PSBvcHRpb25WYWwudmFsdWUpIHsKCQkJCW9wdGlvbi5zZXRBdHRyaWJ1dGUoInNlbGVjdGVkIiwgdHJ1ZSk7CgkJCX0KCQl9CgoJCXNlbGVjdC5hcHBlbmQob3B0aW9uKTsKCX0KCglpbnB1dEN0bi5hcHBlbmQoc2VsZWN0KTsKCXJldHVybiBpbnB1dEN0bjsKfQoKZnVuY3Rpb24gQXBwUGx1c2FwcGxpY2FudChlbGUsIGNvdW50KSB7CgllbGUub25jbGljayA9IGZ1bmN0aW9uIChlKSB7CgkJaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hcGN0X3R5cGVfZGl2JykubGVuZ3RoID49IDYpIHsKCQkJYWxlcnQoJ01heGltdW0gMyBhcHBsaWNhbnRzIGFyZSBhbGxvd2VkJyk7CgkJCXJldHVybjsKCQl9CgkJY29uc3QgcGFyZW50VGFyZ2V0ID0gaGFzU29tZVBhcmVudFRoZUNsYXNzKGUudGFyZ2V0LCAiYXBjdF90eXBlX2RpdiIpOwoKCQljb25zdCBteWVsZSA9IGUudGFyZ2V0OwoJCW15ZWxlLnJlbW92ZSgpOwoJCWNvdW50Kys7CgkJY29uc3QgYXBjdF9saXN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgkJYXBjdF9saXN0LnNldEF0dHJpYnV0ZSgiY2xhc3MiLCBgYXBjdF90eXBlX2RpdmApOwoKCQljb25zdCBsYWJlbEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpOwoJCWxhYmVsRWwuc2V0QXR0cmlidXRlKCJjbGFzcyIsICJhcGN0X3R5cGVfbGFibGUiKTsKCQlsYWJlbEVsLmlubmVySFRNTCA9IHBhZ2VJbmZvW2NvdW50IC0gMl07CgoJCWNvbnN0IHNlbGVjdF9lbGUgPSBBcHBsaWNhbnRDb21wKGBhcHBsaWNhbnRfJHtjb3VudH1gKTsKCgkJYXBjdF9saXN0LmFwcGVuZENoaWxkKGxhYmVsRWwpOwoJCWFwY3RfbGlzdC5hcHBlbmRDaGlsZChzZWxlY3RfZWxlKTsKCgkJYXBjdF9saXN0LmFwcGVuZENoaWxkKGxhYmVsRWwpOwoJCWFwY3RfbGlzdC5hcHBlbmRDaGlsZChzZWxlY3RfZWxlKTsKCgkJY29uc3QgcGxtZWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgkJcGxtZWxlLnNldEF0dHJpYnV0ZSgiY2xhc3MiLCAicGxtZmxleF9pY29uIik7CgoJCWxldCBtaW5JY29ubGFzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKTsKCQltaW5JY29ubGFzdC5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgIm15X3R5cGVfbWludXMiKTsKCQltaW5JY29ubGFzdC5pbm5lckhUTUwgPSAiLSI7CgoJCW1pbkljb25sYXN0Lm9uY2xpY2sgPSBmdW5jdGlvbiAoZSkgewoJCQljb25zdCByZW1vdmVFbGUgPSBoYXNTb21lUGFyZW50VGhlQ2xhc3MoZS50YXJnZXQsICJhcGN0X3R5cGVfZGl2Iik7CgkJCXJlbW92ZUVsZS5yZW1vdmUoKTsKCQkJcmVzZXRmZWN0b3IoKTsKCQl9OwoKCQlwbG1lbGUuYXBwZW5kQ2hpbGQobWluSWNvbmxhc3QpOwoKCQlpZiAoY291bnQgIT09IDYpIHsKCQkJbGV0IHBsdXNJY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpOwoJCQlwbHVzSWNvbi5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgIm15X3R5cGVfcGx1cyIpOwoJCQlwbHVzSWNvbi5pbm5lckhUTUwgPSAiKyI7CgkJCWFwY3RfbGlzdC5hcHBlbmRDaGlsZChwbHVzSWNvbik7CgkJCUFwcFBsdXNhcHBsaWNhbnQocGx1c0ljb24sIGNvdW50KTsKCQkJcGxtZWxlLmFwcGVuZENoaWxkKHBsdXNJY29uKTsKCQl9CgoJCWFwY3RfbGlzdC5hcHBlbmRDaGlsZChwbG1lbGUpOwoJCW5ld19hZGRmb3JtbGlzdC5hcHBlbmQoYXBjdF9saXN0KTsKCX07CgoJcmV0dXJuIGVsZTsKfQoKCgpmdW5jdGlvbiBwZGZUb0ltYWdlKGZpbGUpIHsKCXJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CgkJY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKCQlyZWFkZXIub25sb2FkID0gYXN5bmMgZnVuY3Rpb24gKCkgewoJCQl0cnkgewoJCQkJY29uc3QgdHlwZWRBcnJheSA9IG5ldyBVaW50OEFycmF5KHRoaXMucmVzdWx0KTsKCQkJCWNvbnN0IHBkZiA9IGF3YWl0IHBkZmpzTGliLmdldERvY3VtZW50KHsgZGF0YTogdHlwZWRBcnJheSB9KS5wcm9taXNlOwoJCQkJY29uc3QgcGFnZSA9IGF3YWl0IHBkZi5nZXRQYWdlKDEpOwoJCQkJY29uc3Qgdmlld3BvcnQgPSBwYWdlLmdldFZpZXdwb3J0KHsgc2NhbGU6IDMgfSk7CgkJCQljb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJjYW52YXMiKTsKCQkJCWNvbnN0IGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgiMmQiKTsKCQkJCWNhbnZhcy53aWR0aCA9IHZpZXdwb3J0LndpZHRoOwoJCQkJY2FudmFzLmhlaWdodCA9IHZpZXdwb3J0LmhlaWdodDsKCQkJCWNvbnN0IHJlbmRlckNvbnRleHQgPSB7CgkJCQkJY2FudmFzQ29udGV4dDogY29udGV4dCwKCQkJCQl2aWV3cG9ydDogdmlld3BvcnQsCgkJCQl9OwoJCQkJYXdhaXQgcGFnZS5yZW5kZXIocmVuZGVyQ29udGV4dCkucHJvbWlzZTsKCQkJCWNvbnN0IGltYWdlRGF0YVVybCA9IGNhbnZhcy50b0RhdGFVUkwoImltYWdlL3BuZyIpOwoJCQkJcmVzb2x2ZShpbWFnZURhdGFVcmwpOwoJCQl9IGNhdGNoIChlcnJvcikgewoJCQkJcmVqZWN0KGVycm9yKTsKCQkJfQoJCX07CgkJcmVhZGVyLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7CgkJCXJlamVjdChuZXcgRXJyb3IoIkVycm9yIHJlYWRpbmcgZmlsZSIpKTsKCQl9OwoJCXJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihmaWxlKTsKCX0pOwp9CgpmdW5jdGlvbiBwZGZCYXNlNjRUb0Jsb2IocGRmQmFzZTY0KSB7CgoJLy8gQ29udmVydCBiYXNlNjQgdG8gYmluYXJ5Cgljb25zdCBiaW5hcnlQREYgPSBhdG9iKHBkZkJhc2U2NCk7CgoJLy8gQ29udmVydCBiaW5hcnkgZGF0YSB0byBhIFVpbnQ4QXJyYXkKCWNvbnN0IHVpbnQ4QXJyYXkgPSBuZXcgVWludDhBcnJheShiaW5hcnlQREYubGVuZ3RoKTsKCWZvciAobGV0IGkgPSAwOyBpIDwgYmluYXJ5UERGLmxlbmd0aDsgaSsrKSB7CgkJdWludDhBcnJheVtpXSA9IGJpbmFyeVBERi5jaGFyQ29kZUF0KGkpOwoJfQoKCS8vIENyZWF0ZSBhIEJsb2IgZnJvbSB0aGUgVWludDhBcnJheQoJY29uc3QgYmxvYiA9IG5ldyBCbG9iKFt1aW50OEFycmF5XSwgeyB0eXBlOiAnYXBwbGljYXRpb24vcGRmJyB9KTsKCglyZXR1cm4gYmxvYjsKfQoKYXN5bmMgZnVuY3Rpb24gc2hvd1F1b3RhdGlvbigpIHsKCWNvbnN0IHF1b3RQZGZCYXNlNjQgPSBzY2hlbWFbJ2ZpcnN0LXBhZ2UnXVsncXVvdGF0aW9ucGRmJ107CglpZiAocXVvdFBkZkJhc2U2NC5pbmRleE9mKCcuanBnJykgIT0gLTEpIHsKCQlkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcXVvdC1kaWFsb2ctY29udGVudCcpLmlubmVySFRNTCA9IGA8aW1nIHNyYz0ke3F1b3RQZGZCYXNlNjR9IHN0eWxlPSd3aWR0aDo3MCUnPmA7CgkJZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3F1b3QtY29uc2VudC1kaWFsb2cnKS5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTsKCX0gZWxzZSB7CgkJY29uc3QgcGRmQmxvYiA9IHBkZkJhc2U2NFRvQmxvYihxdW90UGRmQmFzZTY0KTsKCgkJY29uc3QgZmlsZW5hbWUgPSAncXVvdGF0aW9uLnBkZic7CgoJCS8vQ3JlYXRlIGEgRmlsZSBvYmplY3Qgd2l0aCBNSU1FIHR5cGUgJ2FwcGxpY2F0aW9uL3BkZicKCQljb25zdCBmaWxlID0gbmV3IEZpbGUoW3BkZkJsb2JdLCBmaWxlbmFtZSwgeyB0eXBlOiAnYXBwbGljYXRpb24vcGRmJyB9KTsKCgkJcXVvdEltYWdlVVJMID0gYXdhaXQgcGRmVG9JbWFnZShmaWxlKTsKCQlkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcXVvdC1kaWFsb2ctY29udGVudCcpLmlubmVySFRNTCA9IGA8aW1nIHNyYz0ke3F1b3RJbWFnZVVSTH0gc3R5bGU9J3dpZHRoOjcwJSc+YDsKCQlkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcXVvdC1jb25zZW50LWRpYWxvZycpLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpOwoJfQp9CmZ1bmN0aW9uIHBkZlRvSW1hZ2VCbG9iKGZpbGUpIHsKCXJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CgkJY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKCQlyZWFkZXIub25sb2FkID0gYXN5bmMgZnVuY3Rpb24gKCkgewoJCQl0cnkgewoJCQkJY29uc3QgdHlwZWRBcnJheSA9IG5ldyBVaW50OEFycmF5KHRoaXMucmVzdWx0KTsKCQkJCWNvbnN0IHBkZiA9IGF3YWl0IHBkZmpzTGliLmdldERvY3VtZW50KHsgZGF0YTogdHlwZWRBcnJheSB9KS5wcm9taXNlOwoJCQkJY29uc3QgcGFnZSA9IGF3YWl0IHBkZi5nZXRQYWdlKDEpOwoJCQkJY29uc3Qgdmlld3BvcnQgPSBwYWdlLmdldFZpZXdwb3J0KHsgc2NhbGU6IDEgfSk7CgkJCQljb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJjYW52YXMiKTsKCQkJCWNvbnN0IGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgiMmQiKTsKCQkJCWNhbnZhcy53aWR0aCA9IHZpZXdwb3J0LndpZHRoOwoJCQkJY2FudmFzLmhlaWdodCA9IHZpZXdwb3J0LmhlaWdodDsKCQkJCWNvbnN0IHJlbmRlckNvbnRleHQgPSB7CgkJCQkJY2FudmFzQ29udGV4dDogY29udGV4dCwKCQkJCQl2aWV3cG9ydDogdmlld3BvcnQsCgkJCQl9OwoJCQkJYXdhaXQgcGFnZS5yZW5kZXIocmVuZGVyQ29udGV4dCkucHJvbWlzZTsKCQkJCWNhbnZhcy50b0Jsb2IoZnVuY3Rpb24gKGJsb2IpIHsKCQkJCQlyZXNvbHZlKGJsb2IpOwoJCQkJfSwgImltYWdlL3BuZyIpOwoJCQl9IGNhdGNoIChlcnJvcikgewoJCQkJcmVqZWN0KGVycm9yKTsKCQkJfQoJCX07CgkJcmVhZGVyLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7CgkJCXJlamVjdChuZXcgRXJyb3IoIkVycm9yIHJlYWRpbmcgZmlsZSIpKTsKCQl9OwoJCXJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihmaWxlKTsKCX0pOwp9CgoKCmZ1bmN0aW9uIGNyZWF0ZUlkZW50aWZpY2F0aW9uQ29sdW1uKHNjaGVtYSkgewoJY29uc3QgeyBmb3I6IG5hbWUsIHBob3RvUGlja2VyLCBreWMsIHNpZ25hdHVyZSB9ID0gc2NoZW1hOwoKCWNvbnN0IGNvbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwoJY29sLmNsYXNzTGlzdC5hZGQoImNvbCIpOwoKCWNvbnN0IHRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGFiZWwiKTsKCXRpdGxlLnN0eWxlLnNldFByb3BlcnR5KCJtYXJnaW4tYm90dG9tIiwgIjE1cHgiKTsKCXRpdGxlLnN0eWxlLnNldFByb3BlcnR5KCJmb250LXNpemUiLCAiMjBweCIpOwoJdGl0bGUuaW5uZXJUZXh0ID0gYXBwbGljYW50TnVtW25hbWVdOwoJY29sLmFwcGVuZCh0aXRsZSk7CgoJaWYgKHBob3RvUGlja2VyKSB7CgkJY29uc3QgeyBpZCwga2V5IH0gPSBwaG90b1BpY2tlcjsKCgkJY29uc3QgcGlja2VyQ3RuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgkJcGlja2VyQ3RuLmNsYXNzTGlzdC5hZGQoImZsZXgiLCAidXNlci1pbWctbGFiZWwiKTsKCQlwaWNrZXJDdG4uc3R5bGUuc2V0UHJvcGVydHkoIndpZHRoIiwgIjIxOHB4Iik7CgoJCWNvbnN0IGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGFiZWwiKTsKCQlsYWJlbC5zdHlsZS5zZXRQcm9wZXJ0eSgibWFyZ2luLXJpZ2h0IiwgIjEwcHgiKTsKCQkvLyBsYWJlbC5zZXRBdHRyaWJ1dGUoImZvciIsIGlkKTsKCgkJY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpOyAgIC8vIG1hbm9qIGt1bWFyIGRvYwoKCQljb25zdCBwcmV2aWV3SWQgPSBgJHtpZH0tcHJldmlld2A7CgoJCWlucHV0LnNldEF0dHJpYnV0ZSgiYWNjZXB0IiwgImltYWdlLyoiKTsKCQlpbnB1dC5zZXRBdHRyaWJ1dGUoInJlcXVpcmVkIiwgdHJ1ZSk7CgkJaW5wdXQuc2V0QXR0cmlidXRlKCJ0eXBlIiwgImZpbGUiKTsKCQlpbnB1dC5zZXRBdHRyaWJ1dGUoInJvbGUiLCAicGhvdG8tcGlja2VyIik7CgkJaW5wdXQuc2V0QXR0cmlidXRlKCJwcmV2aWV3LWlkIiwgcHJldmlld0lkKTsKCQlpbnB1dC5zZXRBdHRyaWJ1dGUoImlkIiwgaWQpOwoJCWlucHV0LnNldEF0dHJpYnV0ZSgibmFtZSIsIGtleSk7CgoJCWNvbnN0IGltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImltZyIpOwoJCWltZy5zcmMgPSAiY2FtZXJhLnN2ZyI7CgkJaW1nLnRpdGxlID0gIlRha2UgcGhvdG8iOwoJCWltZy5pZCA9IGAke2lkfS1pbWdgOwoKCQlpbWcuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBhc3luYyBmdW5jdGlvbiAoZXZlbnQpIHsKCQkJZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CgoJCQlsZXQgc3RyZWFtID0gbnVsbDsKCgkJCXRyeSB7CgkJCQlzdHJlYW0gPSBhd2FpdCBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSh7CgkJCQkJdmlkZW86IHRydWUsCgkJCQkJYXVkaW86IGZhbHNlLAoJCQkJfSk7CgkJCX0gY2F0Y2ggKGVycm9yKSB7CgoJCQkJcmV0dXJuOwoJCQl9CgoJCQljb25zdCB2aWRlb1BhcmVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGAke2lkfS1zdHJlYW1gKTsKCQkJdmlkZW9QYXJlbnQuc3R5bGUuZGlzcGxheSA9ICJmbGV4IjsKCQkJbGV0IHZpZGVvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYCR7aWR9LXZpZGVvYCk7CgkJCXZpZGVvLnNyY09iamVjdCA9IHN0cmVhbTsKCgkJCWNvbnN0IGNsaWNrQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYCR7aWR9LWNsaWNrLXBob3RvYCk7CgkJCWxldCBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgJHtpZH0tY2FudmFzYCk7CgkJCWxldCBjb3VudGVyID0gMDsKCQkJY2xpY2tCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBmdW5jdGlvbiAoZXYpIHsKCQkJCWNvdW50ZXIrKzsKCQkJCWlmIChjb3VudGVyID4gMSkgewoJCQkJCXJldHVybjsKCQkJCX0KCQkJCWV2LnN0b3BQcm9wYWdhdGlvbigpOwoJCQkJY2FudmFzCgkJCQkJLmdldENvbnRleHQoIjJkIikKCQkJCQkuZHJhd0ltYWdlKHZpZGVvLCAwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpOwoJCQkJbGV0IGltYWdlX2RhdGFfdXJsID0gY2FudmFzLnRvRGF0YVVSTCgiaW1hZ2UvanBlZyIpOwoKCQkJCS8vIGNvbnN0IG15SnNvbiA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oIm15ZG9jdW1lbnQiKSkgfHwgW107CgkJCQljb25zdCBteUpzb24gPSBKU09OLnBhcnNlKG15ZG9jdW1lbnQpIHx8IFtdOwoJCQkJbXlKc29uW2lkXSA9IGltYWdlX2RhdGFfdXJsOwoJCQkJLy8gbG9jYWxTdG9yYWdlLnNldEl0ZW0oIm15ZG9jdW1lbnQiLCBKU09OLnN0cmluZ2lmeShteUpzb24pKTsKCQkJCW15ZG9jdW1lbnQgPSBKU09OLnN0cmluZ2lmeShteUpzb24pOwoJCQkJY29uc3QgYnl0ZUNoYXJhY3RlcnMgPSBhdG9iKAoJCQkJCWltYWdlX2RhdGFfdXJsLnJlcGxhY2UoL15kYXRhOmltYWdlXC8/W0Etel0qO2Jhc2U2NCwvLCAiIikKCQkJCSk7CgkJCQljb25zdCBieXRlTnVtYmVycyA9IG5ldyBBcnJheShieXRlQ2hhcmFjdGVycy5sZW5ndGgpOwoJCQkJZm9yIChsZXQgaSA9IDA7IGkgPCBieXRlQ2hhcmFjdGVycy5sZW5ndGg7IGkrKykgewoJCQkJCWJ5dGVOdW1iZXJzW2ldID0gYnl0ZUNoYXJhY3RlcnMuY2hhckNvZGVBdChpKTsKCQkJCX0KCQkJCWNvbnN0IGJ5dGVBcnJheSA9IG5ldyBVaW50OEFycmF5KGJ5dGVOdW1iZXJzKTsKCQkJCWNvbnN0IGNvbnZGaWxlID0gbmV3IEZpbGUoCgkJCQkJW25ldyBCbG9iKFtieXRlQXJyYXldLCB7IHR5cGU6ICJpbWFnZS9qcGVnIiB9KV0sCgkJCQkJInVzZXJJbWFnZS5qcGVnIiwKCQkJCQl7IHR5cGU6ICJpbWFnZS9qcGVnIiB9CgkJCQkpOwoKCQkJCWNvbnN0IGRhdGFUcmFuc2ZlciA9IG5ldyBEYXRhVHJhbnNmZXIoKTsKCQkJCWRhdGFUcmFuc2Zlci5pdGVtcy5hZGQoY29udkZpbGUpOwoJCQkJY29uc3QgZmlsZUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpOwoJCQkJZmlsZUlucHV0LmZpbGVzID0gZGF0YVRyYW5zZmVyLmZpbGVzOwoKCQkJCWNvbnN0IHNob3dQcmV2aWV3ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocHJldmlld0lkKTsKCQkJCXNob3dQcmV2aWV3LnNyYyA9IGltYWdlX2RhdGFfdXJsOwoJCQkJdmlkZW9QYXJlbnQuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKCQkJCWlucHV0LnJlbW92ZUF0dHJpYnV0ZSgicmVxdWlyZWQiKTsKCgoKCQkJCS8vIE5ldyBMb2dpYyB0byBTdG9yZSBpbWFnZSBpbiBkYgoJCQkJY29uc3QgcHJldmlldyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHByZXZpZXdJZCk7CgkJCQlsZXQgc21Mb2FkZXIgPSBjcmVhdGVMb2FkZXIoKTsKCQkJCXByZXZpZXcuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCdhZnRlcmVuZCcsIHNtTG9hZGVyKTsKCQkJCWNvbnN0IHBpY2tlcklkID0gcHJldmlld0lkLnNwbGl0KCctcHJldmlldycpWzBdOwoJCQkJaW1hZ2VVcGxvYWRpbmcucHVzaChwaWNrZXJJZCk7CgoJCQkJY29uc3QgaW1nQmxvYiA9IG5ldyBCbG9iKFtpbWFnZV9kYXRhX3VybF0sIHsgdHlwZTogJ2ltYWdlL2pwZWcnIH0pOwoKCQkJCWNvbnN0IGZpbGUgPSBkYXRhVVJMdG9GaWxlKGltYWdlX2RhdGFfdXJsLCAndXNlci5qcGVnJyk7CgkJCQljb21wcmVzc0ltYWdlKGltYWdlX2RhdGFfdXJsLCBldiwgJycsIGZhbHNlLCBmaWxlKQoJCQkJCS50aGVuKHJlc3AgPT4gewoJCQkJCQlpZiAoKGZpbGUuc2l6ZSAvIDEwMjQpID49IDUwMCkgewoJCQkJCQkJbGV0IHR5cGUgPSBmaWxlLnR5cGUuc3BsaXQoJy8nKVsxXTsKCQkJCQkJCWZpbGUgPSBuZXcgRmlsZShbcmVzcF0sIGB1c2VyLiR7dHlwZX1gLCB7CgkJCQkJCQkJdHlwZTogcmVzcC50eXBlCgkJCQkJCQl9KTsKCQkJCQkJfQoKCQkJCQkJc3RvcmVJbWFnZUluREIoZmlsZSwgcGlja2VySWQsICd1c2VySW1hZ2UnKQoJCQkJCQkJLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSkKCQkJCQkJCS50aGVuKChyZXMpID0+IHsKCQkJCQkJCQlTdG9yZURvY3VtZW50TmFtZShwaWNrZXJJZCwgcmVzWydmaWxlX25hbWUnXSk7CgkJCQkJCQkJc21Mb2FkZXIuaW5uZXJIVE1MID0gJyc7CgkJCQkJCQkJaW1hZ2VVcGxvYWRpbmcgPSBpbWFnZVVwbG9hZGluZy5maWx0ZXIoeCA9PiB4ICE9IHBpY2tlcklkKTsKCQkJCQkJCX0pLmNhdGNoKGVyciA9PiB7CgkJCQkJCQkJc21Mb2FkZXIuaW5uZXJIVE1MID0gJyc7CgkJCQkJCQkJaW1hZ2VVcGxvYWRpbmcgPSBpbWFnZVVwbG9hZGluZy5maWx0ZXIoeCA9PiB4ICE9IHBpY2tlcklkKTsKCQkJCQkJCQlhbGVydChgQ291bGRuJ3QgdXBsb2FkIGltYWdlYCk7CgkJCQkJCQkJY29uc29sZS5sb2coZXJyKTsKCQkJCQkJCX0pCgkJCQkJfSkKCQkJCQkuY2F0Y2goZXJyID0+IHsKCQkJCQkJc21Mb2FkZXIuaW5uZXJIVE1MID0gJyc7CgkJCQkJCWltYWdlVXBsb2FkaW5nID0gaW1hZ2VVcGxvYWRpbmcuZmlsdGVyKHggPT4geCAhPSBwaWNrZXJJZCk7CgkJCQkJCWFsZXJ0KGBDb3VsZG4ndCB1cGxvYWQgaW1hZ2VgKTsKCQkJCQkJY29uc29sZS5sb2coZXJyKTsKCQkJCQl9KQoJCQl9KTsKCQl9KTsKCgkJbGFiZWwuYXBwZW5kKGltZyk7CgoJCXBpY2tlckN0bi5hcHBlbmQobGFiZWwsIGlucHV0KTsKCgkJY29uc3QgcHJldmlldyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImltZyIpOyAgLy8gdG8gYmUgdW5jb21tZW50ZWQKCQlwcmV2aWV3LmNsYXNzTGlzdC5hZGQoInBob3RvIik7CgkJcHJldmlldy5zZXRBdHRyaWJ1dGUoImlkIiwgcHJldmlld0lkKTsKCgkJY29uc3Qgc3RyZWFtUGFyZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgkJc3RyZWFtUGFyZW50LmlkID0gYCR7aWR9LXN0cmVhbWA7CgkJc3RyZWFtUGFyZW50LnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CgkJc3RyZWFtUGFyZW50LnN0eWxlLmZsZXhEaXJlY3Rpb24gPSAiY29sdW1uIjsKCQlzdHJlYW1QYXJlbnQuc3R5bGUuYWxpZ25JdGVtcyA9ICJjZW50ZXIiOwoJCXN0cmVhbVBhcmVudC5zdHlsZS5nYXAgPSAiNXB4IjsKCQlzdHJlYW1QYXJlbnQuc3R5bGUubWFyZ2luQm90dG9tID0gIjEwcHgiOwoJCXN0cmVhbVBhcmVudC5pbm5lckhUTUwgPSBgCiAgICA8dmlkZW8gaWQ9JHtgJHtpZH0tdmlkZW9gfSB3aWR0aD0iMjIwIiBoZWlnaHQ9ImF1dG8iIGF1dG9wbGF5PjwvdmlkZW8+CiAgICA8YnV0dG9uIGlkPSR7YCR7aWR9LWNsaWNrLXBob3RvYH0gdHlwZT0iYnV0dG9uIj5DbGljayBQaG90bzwvYnV0dG9uPgogICAgPGNhbnZhcyBpZD0ke2Ake2lkfS1jYW52YXNgfSB3aWR0aD0iMjIwIiBoZWlnaHQ9ImF1dG8iIHN0eWxlPSJkaXNwbGF5OiBub25lOyI+PC9jYW52YXM+CiAgICBgOwoJCWNvbC5hcHBlbmQocGlja2VyQ3RuLCBzdHJlYW1QYXJlbnQsIHByZXZpZXcpOwoJfQoKCWlmIChzaWduYXR1cmUpIHsKCQljb25zdCB7IGlkLCBrZXkgfSA9IHNpZ25hdHVyZTsKCgkJY29uc3Qgc2lnbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwoJCXNpZ24uY2xhc3NMaXN0LmFkZCgibXQtMTAiKTsKCQlzaWduLmlubmVySFRNTCA9IGAKICAgIDxidXR0b24gZm9yPSJjbGVhci1zaWduIiBjb250cm9sPSIke25hbWV9XyR7aWR9Ij54PC9idXR0b24+CiAgICA8Y2FudmFzCiAgICAgIGZvcj0ic2lnbiIKICAgICAgcmVxdWlyZWQKICAgICAgbmFtZT0iJHtrZXl9IgogICAgICBpZD0iJHtuYW1lfV8ke2lkfSIKICAgID48L2NhbnZhcz5gOwoKCQljb2wuYXBwZW5kKHNpZ24pOwoJfQoKCWNvbnN0IGZpbGVVcGxvYWQgPSBbXTsKCWlmIChreWMpIHsKCQljb25zdCB7IGZvcm0sIGRvY3VtZW50cywgdHlwZSB9ID0ga3ljOwoJCWZvcm0uZm9yRWFjaCgoZWxlbWVudCkgPT4gewoJCQlpZiAoZWxlbWVudD8udHlwZSA9PT0gImZpbGUiKSB7CgkJCQljb25zdCBmY3RuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgkJCQlmY3RuLmNsYXNzTGlzdC5hZGQoImZpbGUtdXBsb2FkIiwgImRvY3VtZW50X2ZpbGV1cGxvYWRfY2xhc3MiKTsKCgkJCQljb25zdCBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxhYmVsIik7CgkJCQlsYWJlbC5pbm5lclRleHQgPSBgJHtlbGVtZW50Py5sYWJlbH1gOwoKCQkJCWxldCBtYWluVXBsb2FkQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgkJCQltYWluVXBsb2FkQ29udGFpbmVyLnNldEF0dHJpYnV0ZSgiY2xhc3MiLCAibWFpblVwbG9hZF9jb250YWluZXIiKTsKCgkJCQljb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7CgkJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoInR5cGUiLCAiZmlsZSIpOwoJCQkJaW5wdXQuc2V0QXR0cmlidXRlKCJyZXF1aXJlZCIsIHRydWUpOwoKCQkJCWlmIChlbGVtZW50Py5pZCkgaW5wdXQuc2V0QXR0cmlidXRlKCJpZCIsIGVsZW1lbnQ/LmlkKTsKCQkJCWlmIChlbGVtZW50Py5rZXkpIGlucHV0LnNldEF0dHJpYnV0ZSgibmFtZSIsIGVsZW1lbnQ/LmtleSk7CgoJCQkJaW5wdXQub25jbGljayA9IChldikgPT4gewoKCQkJCQlldi50YXJnZXQudmFsdWUgPSBudWxsOwoJCQkJfTsKCgkJCQlpbnB1dC5hZGRFdmVudExpc3RlbmVyKCJjaGFuZ2UiLCBhc3luYyAoZXYpID0+IHsKCgkJCQkJLy8gaWYgKChldi50YXJnZXQuZmlsZXNbMF0uc2l6ZSkgLyAoMTAyNCAqIDEwMjQpID4gMSkgewoJCQkJCS8vIAlsZXQgbW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIubXl2ZXJNb2RhbCIpOwoJCQkJCS8vIAlsZXQgbW9kYWxUZXh0RWxlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5teXZlck1vZGFsIC5wb3B1cC1oZWFkZXIiKTsKCQkJCQkvLyAJbW9kYWxUZXh0RWxlbS5pbm5lclRleHQgPSAiTWF4aW11bSAxTUIgZmlsZSBzaXplIGlzIGFsbG93ZWQuIjsKCQkJCQkvLyAJbW9kYWwuY2xhc3NMaXN0LnRvZ2dsZSgic2hvdy1tb2RhbCIpOwoJCQkJCS8vIAkvLyBwcmV2aXdlQ29udGFpbmV0LmFwcGVuZCh2ZXJpZnlmYWlsc2ljb24oKSk7CgoJCQkJCS8vIAlkb2N1bWVudC5xdWVyeVNlbGVjdG9yKAoJCQkJCS8vIAkJIiNteVBvcHVwIC5kb2NfcmV1cGxvYWRCdG4iCgkJCQkJLy8gCSkub25jbGljayA9IGZ1bmN0aW9uICgpIHsKCQkJCQkvLyAJCWNvbnN0IGN1ckVsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnQuaWQpOwoJCQkJCS8vIAkJY29uc3QgdGFyZ2V0RWxlID0gaGFzU29tZU5leHRTaWJsaW5nVGhlQ2xhc3MoCgkJCQkJLy8gCQkJY3VyRWxlLAoJCQkJCS8vIAkJCSJwcmV2aWV3X2FjdGlvbmJ1dHRvbiIKCQkJCQkvLyAJCSk7CgkJCQkJLy8gCQljdXJFbGUudmFsdWUgPSBudWxsOwoJCQkJCS8vIAkJaWYgKHRhcmdldEVsZSkgewoJCQkJCS8vIAkJCXRhcmdldEVsZS5yZW1vdmUoKTsKCQkJCQkvLyAJCX0KCQkJCQkvLyAJCW1vZGFsLmNsYXNzTGlzdC50b2dnbGUoInNob3ctbW9kYWwiKTsKCQkJCQkvLyAJfTsKCgkJCQkJLy8gCWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoCgkJCQkJLy8gCQkiI215UG9wdXAgLmlnbm9yZVByX0J0biIKCQkJCQkvLyAJKS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTsKCQkJCQkvLyAJcmV0dXJuOwoJCQkJCS8vIH0KCgkJCQkJdHJ5IHsKCQkJCQkJaWYgKGV2LnRhcmdldC5uZXh0RWxlbWVudFNpYmxpbmcpIHsKCQkJCQkJCWV2LnRhcmdldC5uZXh0RWxlbWVudFNpYmxpbmcucmVtb3ZlKCk7CgkJCQkJCX0KCgkJCQkJCS8vIGNvbXByZXNzIHVwbG9hZGVkIGRvY3VtZW50cwoKCQkJCQkJbGV0IG15RmlsZVVSTCA9ICcnOwoJCQkJCQlsZXQgaW1hZ2VCbG9iID0gJyc7CgkJCQkJCS8vIENoZWNrIGlmIGN1cnJlbnQgZG9jdW1lbnQgaXMgcGRmCgkJCQkJCWlmIChldi50YXJnZXQuZmlsZXNbMF0udHlwZSA9PSAnYXBwbGljYXRpb24vcGRmJykgewoJCQkJCQkJdHJ5IHsKCQkJCQkJCQlteUZpbGVVUkwgPSBhd2FpdCBwZGZUb0ltYWdlKGV2LnRhcmdldC5maWxlc1swXSk7CgkJCQkJCQkJaW1hZ2VCbG9iID0gYXdhaXQgcGRmVG9JbWFnZUJsb2IoZXYudGFyZ2V0LmZpbGVzWzBdKTsKCgkJCQkJCQl9IGNhdGNoIChlcnJvcikgewoJCQkJCQkJCWNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNvbnZlcnRpbmcgUERGIHRvIGltYWdlOicsIGVycm9yKTsKCQkJCQkJCX0KCQkJCQkJfSBlbHNlIHsKCQkJCQkJCW15RmlsZVVSTCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoZXYudGFyZ2V0LmZpbGVzWzBdKTsKCQkJCQkJfQoKCQkJCQkJLy8gY29uc3QgbXlGaWxlVVJMID0gVVJMLmNyZWF0ZU9iamVjdFVSTChldi50YXJnZXQuZmlsZXNbMF0pOwoJCQkJCQlsZXQgcHJldml3ZUNvbnRhaW5ldCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwoJCQkJCQlwcmV2aXdlQ29udGFpbmV0LnNldEF0dHJpYnV0ZSgiY2xhc3MiLCAicHJldmlld19hY3Rpb25idXR0b24iKTsKCQkJCQkJY29uc3QgbGlua25hdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsKCQkJCQkJdmFyIGltZ2FkZGhhciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImltZyIpOwoJCQkJCQlsaW5rbmF2LnNldEF0dHJpYnV0ZSgiaHJlZiIsIG15RmlsZVVSTCk7CgkJCQkJCWltZ2FkZGhhci5zZXRBdHRyaWJ1dGUoImhlaWdodCIsIDUwKTsKCQkJCQkJaW1nYWRkaGFyLnNldEF0dHJpYnV0ZSgiY2xhc3MiLCAidXBsb2FkX2ltYWdlX3ByZXZpZXciKTsKCQkJCQkJaW1nYWRkaGFyLnNyYyA9IG15RmlsZVVSTDsKCQkJCQkJbGlua25hdi5zZXRBdHRyaWJ1dGUoInRhcmdldCIsICJfYmxhbmsiKTsKCQkJCQkJbGlua25hdi5hcHBlbmQoaW1nYWRkaGFyKTsKCQkJCQkJcHJldml3ZUNvbnRhaW5ldC5hcHBlbmQobGlua25hdik7CgoJCQkJCQlpZiAobXlGaWxlVVJMKSB7CgkJCQkJCQljb25zdCByZW1vdmVFbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCQkJCQkJCXJlbW92ZUVsZS5jbGFzc0xpc3QuYWRkKCJyZW1vdmVfcHJldmlld19lbGUiKTsKCQkJCQkJCWNvbnN0IG5ld1N1ZmYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJidXR0b24iKTsKCQkJCQkJCW5ld1N1ZmYuaW5uZXJIVE1MID0gIlgiOwoJCQkJCQkJcmVtb3ZlRWxlLmFwcGVuZENoaWxkKG5ld1N1ZmYpOwoKCQkJCQkJCXJlbW92ZUVsZS5vbmNsaWNrID0gZnVuY3Rpb24gKGUpIHsKCQkJCQkJCQljb25zdCBzZWxmRWxlID0gZS50YXJnZXQ7CgkJCQkJCQkJY29uc3QgdGFyZ2V0RWxlID0gaGFzU29tZVBhcmVudFRoZUNsYXNzKAoJCQkJCQkJCQlzZWxmRWxlLAoJCQkJCQkJCQkicHJldmlld19hY3Rpb25idXR0b24iCgkJCQkJCQkJKTsKCQkJCQkJCQlpbWFnZVVwbG9hZGluZyA9IGltYWdlVXBsb2FkaW5nLmZpbHRlcih4ID0+IHggIT0gdGFyZ2V0RWxlLnBhcmVudE5vZGUuY2hpbGRyZW5bMF0uaWQpOwoJCQkJCQkJCXRhcmdldEVsZS5yZW1vdmUoKTsKCQkJCQkJCQlpbnB1dC52YWx1ZSA9IG51bGw7CgoJCQkJCQkJfTsKCQkJCQkJCXByZXZpd2VDb250YWluZXQuYXBwZW5kKHJlbW92ZUVsZSk7CgkJCQkJCX0KCgkJCQkJCW1haW5VcGxvYWRDb250YWluZXIuYXBwZW5kKHByZXZpd2VDb250YWluZXQpOwoJCQkJCQlsZXQgc21Mb2FkZXIgPSBjcmVhdGVMb2FkZXIoKTsKCQkJCQkJcHJldml3ZUNvbnRhaW5ldC5hcHBlbmQoc21Mb2FkZXIpOwoJCQkJCQlpbWFnZVVwbG9hZGluZy5wdXNoKGVsZW1lbnQuaWQpOwoKCQkJCQkJY29uc3Qgc2hvd0ZhaWx1cmVGdW4gPSAoKSA9PiB7CgkJCQkJCQlzbUxvYWRlci5pbm5lckhUTUwgPSAnJzsKCQkJCQkJCWltYWdlVXBsb2FkaW5nID0gaW1hZ2VVcGxvYWRpbmcuZmlsdGVyKHggPT4geCAhPSBlbGVtZW50LmlkKTsKCQkJCQkJCWxldCBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5teXZlck1vZGFsIik7CgkJCQkJCQltb2RhbC5jbGFzc0xpc3QudG9nZ2xlKCJzaG93LW1vZGFsIik7CgkJCQkJCQlwcmV2aXdlQ29udGFpbmV0LmFwcGVuZCh2ZXJpZnlmYWlsc2ljb24oKSk7CgoJCQkJCQkJZG9jdW1lbnQucXVlcnlTZWxlY3RvcigKCQkJCQkJCQkiI215UG9wdXAgLmRvY19yZXVwbG9hZEJ0biIKCQkJCQkJCSkub25jbGljayA9IGZ1bmN0aW9uICgpIHsKCQkJCQkJCQljb25zdCBjdXJFbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGVtZW50LmlkKTsKCQkJCQkJCQljb25zdCB0YXJnZXRFbGUgPSBoYXNTb21lTmV4dFNpYmxpbmdUaGVDbGFzcygKCQkJCQkJCQkJY3VyRWxlLAoJCQkJCQkJCQkicHJldmlld19hY3Rpb25idXR0b24iCgkJCQkJCQkJKTsKCQkJCQkJCQljdXJFbGUudmFsdWUgPSBudWxsOwoJCQkJCQkJCWlmICh0YXJnZXRFbGUpIHsKCQkJCQkJCQkJaW1hZ2VVcGxvYWRpbmcgPSBpbWFnZVVwbG9hZGluZy5maWx0ZXIoeCA9PiB4ICE9IHRhcmdldEVsZS5wYXJlbnROb2RlLmNoaWxkcmVuWzBdLmlkKTsKCQkJCQkJCQkJdGFyZ2V0RWxlLnJlbW92ZSgpOwoJCQkJCQkJCX0KCQkJCQkJCQltb2RhbC5jbGFzc0xpc3QudG9nZ2xlKCJzaG93LW1vZGFsIik7CgkJCQkJCQl9OwoKCQkJCQkJCWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoCgkJCQkJCQkJIiNteVBvcHVwIC5pZ25vcmVQcl9CdG4iCgkJCQkJCQkpLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7CgkJCQkJCQkJY29uc3QgbXlpZ0lkID0gZWxlbWVudC5pZCArICJfaWdub3JlIjsKCQkJCQkJCQlpZ25vcmVEb2MgPSBpZ25vcmVEb2MuZmlsdGVyKChpZykgPT4gewoJCQkJCQkJCQlyZXR1cm4gaWcubmFtZSAhPSBteWlnSWQ7CgkJCQkJCQkJfSk7CgkJCQkJCQkJaWdub3JlRG9jLnB1c2goeyBuYW1lOiBteWlnSWQsIHZhbHVlOiAnJyB9KTsKCQkJCQkJCQltb2RhbC5jbGFzc0xpc3QudG9nZ2xlKCJzaG93LW1vZGFsIik7CgkJCQkJCQl9OwoJCQkJCQl9CgoJCQkJCQljb21wcmVzc0ltYWdlKG15RmlsZVVSTCwgZXYsIGltYWdlQmxvYikKCQkJCQkJCS50aGVuKChyZXMpID0+IHsKCQkJCQkJCQljb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOwoJCQkJCQkJCWlmIChldi50YXJnZXQuZmlsZXNbMF0udHlwZSA9PSAnYXBwbGljYXRpb24vcGRmJykgewoJCQkJCQkJCQlmb3JtRGF0YS5hcHBlbmQoInVwZCIsIGV2LnRhcmdldC5maWxlc1swXSk7CgkJCQkJCQkJfQoJCQkJCQkJCWVsc2UgewoJCQkJCQkJCQlsZXQgZmlsZTsKCQkJCQkJCQkJaWYgKChldi50YXJnZXQuZmlsZXNbMF0uc2l6ZSAvIDEwMjQpIDwgNTAwKSB7CgkJCQkJCQkJCQlmaWxlID0gZXYudGFyZ2V0LmZpbGVzWzBdOwoJCQkJCQkJCQl9CgkJCQkJCQkJCWVsc2UgewoJCQkJCQkJCQkJbGV0IHR5cGUgPSBldi50YXJnZXQuZmlsZXNbMF0udHlwZS5zcGxpdCgnLycpWzFdOwoJCQkJCQkJCQkJZmlsZSA9IG5ldyBGaWxlKFtyZXNdLCBgbmFtZS4ke3R5cGV9YCwgewoJCQkJCQkJCQkJCXR5cGU6IHJlcy50eXBlCgkJCQkJCQkJCQl9KTsKCQkJCQkJCQkJfQoKCQkJCQkJCQkJZm9ybURhdGEuYXBwZW5kKCJ1cGQiLCBmaWxlKTsKCQkJCQkJCQl9CgoKCQkJCQkJCQkvLyBmb3JtRGF0YS5hcHBlbmQoImZpbGUiLCByZXMpOwoJCQkJCQkJCWNvbnN0IGN1cnJldFZhbGlkRGF0YSA9IGdldEFwcGxpY2FudERhdGEobmFtZSk7CgkJCQkJCQkJdmVyaWZ5RG9jTmV3KGVsZW1lbnQuaWQsIGZvcm1EYXRhLCBuYW1lKQoJCQkJCQkJCQkudGhlbigocmVzKSA9PiB7CgkJCQkJCQkJCQlTdG9yZURvY3VtZW50TmFtZShlbGVtZW50LmlkLCByZXMudmFsdWUuZmlsZV9uYW1lKTsKCQkJCQkJCQkJCXNtTG9hZGVyLmlubmVySFRNTCA9ICcnOwoJCQkJCQkJCQkJaW1hZ2VVcGxvYWRpbmcgPSBpbWFnZVVwbG9hZGluZy5maWx0ZXIoeCA9PiB4ICE9IGVsZW1lbnQuaWQpOwoKCgkJCQkJCQkJCQlsZXQgbW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIubXl2ZXJNb2RhbCIpOwoJCQkJCQkJCQkJaWYgKHJlcyAmJiByZXMudmVyaWZpZWQpIHsKCgkJCQkJCQkJCQkJcHJldml3ZUNvbnRhaW5ldC5hcHBlbmQodmVyaWZpZWRpY29uKCkpOwoJCQkJCQkJCQkJCWNvbnN0IG15aWdJZCA9IGVsZW1lbnQuaWQgKyAiX2lnbm9yZSI7CgkJCQkJCQkJCQkJaWdub3JlRG9jID0gaWdub3JlRG9jLmZpbHRlcigoaWcpID0+IHsKCQkJCQkJCQkJCQkJcmV0dXJuIGlnLm5hbWUgIT0gbXlpZ0lkOwoJCQkJCQkJCQkJCX0pOwoJCQkJCQkJCQkJfSBlbHNlIHsKCgkJCQkJCQkJCQkJLy8gYWxlcnQoJ25vdCB0aGVuJyk7CgkJCQkJCQkJCQkJLy8gaWYgKAoJCQkJCQkJCQkJCS8vIAlyZXMgJiYKCQkJCQkJCQkJCQkvLyAJKHJlcy5tZXNzYWdlcy5sZW5ndGggPiAwIHx8IHJlcy52YWx1ZS5sZW5ndGggPiAwKQoJCQkJCQkJCQkJCS8vICkgewoJCQkJCQkJCQkJCS8vIAlsZXQgZGlzcGxheVRleHQgPSAiIjsKCQkJCQkJCQkJCQkvLyAJaWYgKHJlcy5tZXNzYWdlcy5sZW5ndGggPiAwKSB7CgkJCQkJCQkJCQkJLy8gCQlyZXMubWVzc2FnZXMuZm9yRWFjaCgobXl2KSA9PiB7CgkJCQkJCQkJCQkJLy8gCQkJZGlzcGxheVRleHQgPSBkaXNwbGF5VGV4dCArIG15diArICI8YnI+IjsKCQkJCQkJCQkJCQkvLyAJCX0pOwoJCQkJCQkJCQkJCS8vIAl9CgkJCQkJCQkJCQkJLy8gCWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoCgkJCQkJCQkJCQkJLy8gCQkiI215UG9wdXAgLnBvcHVwX3dhcm5pbmd0ZXh0IgoJCQkJCQkJCQkJCS8vIAkpLmlubmVySFRNTCA9IGRpc3BsYXlUZXh0OwoKCQkJCQkJCQkJCQkvLyAJZG9jdW1lbnQKCQkJCQkJCQkJCQkvLyAJCS5xdWVyeVNlbGVjdG9yKCIjbXlQb3B1cCAuaWdub3JlUHJfQnRuIikKCQkJCQkJCQkJCQkvLyAJCS5jbGFzc0xpc3QucmVtb3ZlKCJoaWRkZW4iKTsKCgkJCQkJCQkJCQkJLy8gCWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoCgkJCQkJCQkJCQkJLy8gCQkiI215UG9wdXAgLmlnbm9yZVByX0J0biIKCQkJCQkJCQkJCQkvLyAJKS5vbmNsaWNrID0gZnVuY3Rpb24gKCkgewoJCQkJCQkJCQkJCS8vIAkJY29uc3QgbXlpZ0lkID0gZWxlbWVudC5pZCArICJfaWdub3JlIjsKCQkJCQkJCQkJCQkvLyAJCWlnbm9yZURvYyA9IGlnbm9yZURvYy5maWx0ZXIoKGlnKSA9PiB7CgkJCQkJCQkJCQkJLy8gCQkJcmV0dXJuIGlnLm5hbWUgIT0gbXlpZ0lkOwoJCQkJCQkJCQkJCS8vIAkJfSk7CgkJCQkJCQkJCQkJLy8gCQlpZ25vcmVEb2MucHVzaCh7IG5hbWU6IG15aWdJZCwgdmFsdWU6IHJlcy52YWx1ZSB9KTsKCQkJCQkJCQkJCQkvLyAJCW1vZGFsLmNsYXNzTGlzdC50b2dnbGUoInNob3ctbW9kYWwiKTsKCQkJCQkJCQkJCQkvLyAJfTsKCQkJCQkJCQkJCQkvLyB9IGVsc2UgewoJCQkJCQkJCQkJCS8vIAlkb2N1bWVudC5xdWVyeVNlbGVjdG9yKAoJCQkJCQkJCQkJCS8vIAkJIiNteVBvcHVwIC5wb3B1cF93YXJuaW5ndGV4dCIKCQkJCQkJCQkJCQkvLyAJCS8vICkuaW5uZXJUZXh0ID0gIlBsZWFzZSB1cGxvYWQgcHJvcGVyIERvY3VtZW50LiI7CgkJCQkJCQkJCQkJLy8gCSkuaW5uZXJUZXh0ID0gIllvdSBjYW4gUHJvY2VlZCBNYW51YWxseS4iOwoKCgkJCQkJCQkJCQkJLy8gCWRvY3VtZW50CgkJCQkJCQkJCQkJLy8gCQkucXVlcnlTZWxlY3RvcigiI215UG9wdXAgLmlnbm9yZVByX0J0biIpCgkJCQkJCQkJCQkJLy8gCQkuY2xhc3NMaXN0LmFkZCgiaGlkZGVuIik7CgkJCQkJCQkJCQkJLy8gfQoJCQkJCQkJCQkJCS8vIG1vZGFsLmNsYXNzTGlzdC50b2dnbGUoInNob3ctbW9kYWwiKTsKCQkJCQkJCQkJCQkvLyBwcmV2aXdlQ29udGFpbmV0LmFwcGVuZCh2ZXJpZnlmYWlsc2ljb24oKSk7CgkJCQkJCQkJCQkJbW9kYWwuY2xhc3NMaXN0LnRvZ2dsZSgic2hvdy1tb2RhbCIpOwoJCQkJCQkJCQkJCS8vIHByZXZpd2VDb250YWluZXQuYXBwZW5kKHZlcmlmeWZhaWxzaWNvbigpKTsKCgkJCQkJCQkJCQkJZG9jdW1lbnQucXVlcnlTZWxlY3RvcigKCQkJCQkJCQkJCQkJIiNteVBvcHVwIC5kb2NfcmV1cGxvYWRCdG4iCgkJCQkJCQkJCQkJKS5vbmNsaWNrID0gZnVuY3Rpb24gKCkgewoJCQkJCQkJCQkJCQljb25zdCBjdXJFbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGVtZW50LmlkKTsKCQkJCQkJCQkJCQkJY29uc3QgdGFyZ2V0RWxlID0gaGFzU29tZU5leHRTaWJsaW5nVGhlQ2xhc3MoCgkJCQkJCQkJCQkJCQljdXJFbGUsCgkJCQkJCQkJCQkJCQkicHJldmlld19hY3Rpb25idXR0b24iCgkJCQkJCQkJCQkJCSk7CgkJCQkJCQkJCQkJCWN1ckVsZS52YWx1ZSA9IG51bGw7CgkJCQkJCQkJCQkJCWlmICh0YXJnZXRFbGUpIHsKCQkJCQkJCQkJCQkJCS8vIGNvbnNvbGUubG9nKGltYWdlVXBsb2FkaW5nKTsKCQkJCQkJCQkJCQkJCWltYWdlVXBsb2FkaW5nID0gaW1hZ2VVcGxvYWRpbmcuZmlsdGVyKHggPT4geCAhPSB0YXJnZXRFbGUucGFyZW50Tm9kZS5jaGlsZHJlblswXS5pZCk7CgkJCQkJCQkJCQkJCQkvLyBjb25zb2xlLmxvZyhpbWFnZVVwbG9hZGluZyk7CgkJCQkJCQkJCQkJCQl0YXJnZXRFbGUucmVtb3ZlKCk7CgkJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCQkJbW9kYWwuY2xhc3NMaXN0LnRvZ2dsZSgic2hvdy1tb2RhbCIpOwoJCQkJCQkJCQkJCX07CgoJCQkJCQkJCQkJCWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoCgkJCQkJCQkJCQkJCSIjbXlQb3B1cCAuaWdub3JlUHJfQnRuIgoJCQkJCQkJCQkJCSkub25jbGljayA9IGZ1bmN0aW9uICgpIHsKCQkJCQkJCQkJCQkJY29uc3QgbXlpZ0lkID0gZWxlbWVudC5pZCArICJfaWdub3JlIjsKCQkJCQkJCQkJCQkJaWdub3JlRG9jID0gaWdub3JlRG9jLmZpbHRlcigoaWcpID0+IHsKCQkJCQkJCQkJCQkJCXJldHVybiBpZy5uYW1lICE9IG15aWdJZDsKCQkJCQkJCQkJCQkJfSk7CgkJCQkJCQkJCQkJCWlnbm9yZURvYy5wdXNoKHsgbmFtZTogbXlpZ0lkLCB2YWx1ZTogcmVzLnZhbHVlIH0pOwoJCQkJCQkJCQkJCQltb2RhbC5jbGFzc0xpc3QudG9nZ2xlKCJzaG93LW1vZGFsIik7CgkJCQkJCQkJCQkJfTsKCQkJCQkJCQkJCX0KCgkJCQkJCQkJCQkvLyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKAoJCQkJCQkJCQkJLy8gCSIjbXlQb3B1cCAuZG9jX3JldXBsb2FkQnRuIgoJCQkJCQkJCQkJLy8gKS5vbmNsaWNrID0gZnVuY3Rpb24gKCkgewoJCQkJCQkJCQkJLy8gCWNvbnN0IGN1ckVsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnQuaWQpOwoJCQkJCQkJCQkJLy8gCWNvbnN0IHRhcmdldEVsZSA9IGhhc1NvbWVOZXh0U2libGluZ1RoZUNsYXNzKAoJCQkJCQkJCQkJLy8gCQljdXJFbGUsCgkJCQkJCQkJCQkvLyAJCSJwcmV2aWV3X2FjdGlvbmJ1dHRvbiIKCQkJCQkJCQkJCS8vIAkpOwoJCQkJCQkJCQkJLy8gCWN1ckVsZS52YWx1ZSA9IG51bGw7CgkJCQkJCQkJCQkvLyAJaWYgKHRhcmdldEVsZSkgewoJCQkJCQkJCQkJLy8gCQl0YXJnZXRFbGUucmVtb3ZlKCk7CgkJCQkJCQkJCQkvLyAJfQoJCQkJCQkJCQkJLy8gCW1vZGFsLmNsYXNzTGlzdC50b2dnbGUoInNob3ctbW9kYWwiKTsKCQkJCQkJCQkJCS8vIH07CgoJCQkJCQkJCQl9KQoJCQkJCQkJCQkuY2F0Y2goKGVycikgPT4gewoJCQkJCQkJCQkJc2hvd0ZhaWx1cmVGdW4oKTsKCQkJCQkJCQkJfSk7CgkJCQkJCQl9KQoJCQkJCQkJLmNhdGNoKChlcnIpID0+IHsKCQkJCQkJCQljb25zb2xlLmxvZyhlcnIpOwoJCQkJCQkJCXNob3dGYWlsdXJlRnVuKCk7CgkJCQkJCQl9KTsKCQkJCQl9IGNhdGNoIChlcnJvcikgewoJCQkJCQljb25zb2xlLmxvZyh7IGVycm9yIH0pOwoJCQkJCX0KCQkJCX0pOwoKCQkJCW1haW5VcGxvYWRDb250YWluZXIuYXBwZW5kKGlucHV0KTsKCQkJCWZjdG4uYXBwZW5kKGxhYmVsLCBtYWluVXBsb2FkQ29udGFpbmVyKTsKCgkJCQlmaWxlVXBsb2FkLnB1c2goZmN0bik7CgkJCX0gZWxzZSB7CgkJCQljb25zdCB7IGxhYmVsLCB0eXBlLCBpZCwga2V5LCB2YWxpZGF0ZSwgZGVmYXVsdFZhbHVlIH0gPSBlbGVtZW50OwoJCQkJaWYgKGxhYmVsID09ICdJIGRvIG5vdCBoYXZlIGEgQWFkaGFhciBjYXJkJykgewoJCQkJCWNvbnN0IGlucHV0Q3RuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgkJCQkJaW5wdXRDdG4uY2xhc3NMaXN0LmFkZCgiZml0Y29udGVudF9jaGVjayIsICJhYWRoYXJfY2hlY2siKTsKCQkJCQljb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7CgkJCQkJaW5wdXQuc2V0QXR0cmlidXRlKCJpZCIsIGlkKTsKCQkJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoIm5hbWUiLCBrZXkpOwoJCQkJCWlucHV0LnNldEF0dHJpYnV0ZSgidHlwZSIsIHR5cGUpOwoKCQkJCQljb25zdCBsYWJlbEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGFiZWwiKTsKCQkJCQlsYWJlbEVsLmlubmVyVGV4dCA9IGxhYmVsOwoJCQkJCWxhYmVsRWwuc2V0QXR0cmlidXRlKCJmb3IiLCBpZCk7CgkJCQkJaWYgKGRlZmF1bHRWYWx1ZSkgewoJCQkJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoImNoZWNrZWQiLCBkZWZhdWx0VmFsdWUpOwoJCQkJCX0KCgkJCQkJLy8gaW5wdXQuc2V0QXR0cmlidXRlKCJkaXNhYmxlZCIsIHRydWUpOwoJCQkJCS8vIGlucHV0LmNsYXNzTGlzdC5hZGQoIm5vdF9lZGl0YWJsZSIpOwoJCQkJCWlucHV0Lm9uY2hhbmdlID0gZnVuY3Rpb24gKGUpIHsKCQkJCQkJY29uc3QgdGVsRWxlID0gZS50YXJnZXQucGFyZW50RWxlbWVudC5uZXh0U2libGluZwoJCQkJCQljb25zdCB0YXJnZXRFbGUgPSBoYXNTb21lTmV4dFNpYmxpbmdUaGVDbGFzcygKCQkJCQkJCXRlbEVsZSwKCQkJCQkJCSJmaWxldXBsb2FkX2NvbnRpYW5lciIKCQkJCQkJKTsKCQkJCQkJY29uc3QgaGlkRWxlID0gdGFyZ2V0RWxlLnF1ZXJ5U2VsZWN0b3IoIi5hYWRoYXJmcm9udCIpOwoJCQkJCQljb25zdCBoaWRFbGViYWNrID0gdGFyZ2V0RWxlLnF1ZXJ5U2VsZWN0b3IoIi5hYWRoYXJiYWNrIik7CgkJCQkJCWlmIChoaWRFbGViYWNrKSB7CgkJCQkJCQlpZiAoZS50YXJnZXQuY2hlY2tlZCkgewoJCQkJCQkJCWhpZEVsZWJhY2suY2xhc3NMaXN0LmFkZCgiaGlkZGVuIik7CgkJCQkJCQkJaGlkRWxlYmFjay5xdWVyeVNlbGVjdG9yQWxsKCJpbnB1dCwgdGV4dGFyZWEsIHNlbGVjdCIpLmZvckVhY2goKGUpID0+IHsKCQkJCQkJCQkJZS5zZXRBdHRyaWJ1dGUoImRpc2FibGVkIiwgdHJ1ZSk7CgkJCQkJCQkJCWUuY2xhc3NMaXN0LmFkZCgibm90X2VkaXRhYmxlIik7CgkJCQkJCQkJfSk7CgkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCWhpZEVsZWJhY2suY2xhc3NMaXN0LnJlbW92ZSgiaGlkZGVuIik7CgkJCQkJCQkJaGlkRWxlYmFjay5xdWVyeVNlbGVjdG9yQWxsKCJpbnB1dCwgdGV4dGFyZWEsIHNlbGVjdCIpLmZvckVhY2goKGUpID0+IHsKCQkJCQkJCQkJZS5yZW1vdmVBdHRyaWJ1dGUoImRpc2FibGVkIik7CgkJCQkJCQkJCWUuY2xhc3NMaXN0LnJlbW92ZSgibm90X2VkaXRhYmxlIik7CgkJCQkJCQkJfSk7CgkJCQkJCQl9CgkJCQkJCX0KCgkJCQkJCWlmIChoaWRFbGUpIHsKCQkJCQkJCWlmIChlLnRhcmdldC5jaGVja2VkKSB7CgkJCQkJCQkJaGlkRWxlLmNsYXNzTGlzdC5hZGQoImhpZGRlbiIpOwoJCQkJCQkJCWhpZEVsZS5xdWVyeVNlbGVjdG9yQWxsKCJpbnB1dCwgdGV4dGFyZWEsIHNlbGVjdCIpLmZvckVhY2goKGUpID0+IHsKCQkJCQkJCQkJZS5zZXRBdHRyaWJ1dGUoImRpc2FibGVkIiwgdHJ1ZSk7CgkJCQkJCQkJCWUuY2xhc3NMaXN0LmFkZCgibm90X2VkaXRhYmxlIik7CgkJCQkJCQkJfSk7CgkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCWhpZEVsZS5jbGFzc0xpc3QucmVtb3ZlKCJoaWRkZW4iKTsKCQkJCQkJCQloaWRFbGUucXVlcnlTZWxlY3RvckFsbCgiaW5wdXQsIHRleHRhcmVhLCBzZWxlY3QiKS5mb3JFYWNoKChlKSA9PiB7CgkJCQkJCQkJCWUucmVtb3ZlQXR0cmlidXRlKCJkaXNhYmxlZCIpOwoJCQkJCQkJCQllLmNsYXNzTGlzdC5yZW1vdmUoIm5vdF9lZGl0YWJsZSIpOwoJCQkJCQkJCX0pOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfTsKCgkJCQkJaW5wdXRDdG4uYXBwZW5kKGlucHV0LCBsYWJlbEVsKTsKCQkJCQljb2wuYXBwZW5kKGlucHV0Q3RuKTsKCQkJCX0gZWxzZSB7CgkJCQkJY29uc3QgaW5wdXRDdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCQkJCQlpbnB1dEN0bi5jbGFzc0xpc3QuYWRkKCJmaXRjb250ZW50X2NoZWNrIiwgInBhbmNhcmRfY2hlY2siKTsKCQkJCQljb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7CgkJCQkJaW5wdXQuc2V0QXR0cmlidXRlKCJpZCIsIGlkKTsKCQkJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoIm5hbWUiLCBrZXkpOwoJCQkJCWlucHV0LnNldEF0dHJpYnV0ZSgidHlwZSIsIHR5cGUpOwoKCQkJCQljb25zdCBsYWJlbEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGFiZWwiKTsKCQkJCQlsYWJlbEVsLmlubmVyVGV4dCA9IGxhYmVsOwoJCQkJCWxhYmVsRWwuc2V0QXR0cmlidXRlKCJmb3IiLCBpZCk7CgkJCQkJaWYgKGRlZmF1bHRWYWx1ZSkgewoJCQkJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoImNoZWNrZWQiLCBkZWZhdWx0VmFsdWUpOwoJCQkJCX0KCgkJCQkJLy8gaW5wdXQuc2V0QXR0cmlidXRlKCJkaXNhYmxlZCIsIHRydWUpOwoJCQkJCS8vIGlucHV0LmNsYXNzTGlzdC5hZGQoIm5vdF9lZGl0YWJsZSIpOwoJCQkJCWlucHV0Lm9uY2hhbmdlID0gZnVuY3Rpb24gKGUpIHsKCQkJCQkJY29uc3QgdGVsRWxlID0gZS50YXJnZXQucGFyZW50RWxlbWVudC5uZXh0U2libGluZy5uZXh0U2libGluZwoJCQkJCQljb25zdCB0YXJnZXRFbGUgPSBoYXNTb21lTmV4dFNpYmxpbmdUaGVDbGFzcygKCQkJCQkJCXRlbEVsZSwKCQkJCQkJCSJmaWxldXBsb2FkX2NvbnRpYW5lciIKCQkJCQkJKTsKCQkJCQkJY29uc3QgaGlkRWxlID0gdGFyZ2V0RWxlLnF1ZXJ5U2VsZWN0b3IoIi5maWxlLXVwbG9hZCIpOwoJCQkJCQlpZiAoZS50YXJnZXQuY2hlY2tlZCAmJiBoaWRFbGUpIHsKCQkJCQkJCWhpZEVsZS5jbGFzc0xpc3QuYWRkKCJoaWRkZW4iKTsKCQkJCQkJCWhpZEVsZS5xdWVyeVNlbGVjdG9yQWxsKCJpbnB1dCwgdGV4dGFyZWEsIHNlbGVjdCIpLmZvckVhY2goKGUpID0+IHsKCQkJCQkJCQllLnNldEF0dHJpYnV0ZSgiZGlzYWJsZWQiLCB0cnVlKTsKCQkJCQkJCQllLmNsYXNzTGlzdC5hZGQoIm5vdF9lZGl0YWJsZSIpOwoJCQkJCQkJfSk7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQloaWRFbGUuY2xhc3NMaXN0LnJlbW92ZSgiaGlkZGVuIik7CgkJCQkJCQloaWRFbGUucXVlcnlTZWxlY3RvckFsbCgiaW5wdXQsIHRleHRhcmVhLCBzZWxlY3QiKS5mb3JFYWNoKChlKSA9PiB7CgkJCQkJCQkJZS5yZW1vdmVBdHRyaWJ1dGUoImRpc2FibGVkIik7CgkJCQkJCQkJZS5jbGFzc0xpc3QucmVtb3ZlKCJub3RfZWRpdGFibGUiKTsKCQkJCQkJCX0pOwoJCQkJCQl9CgkJCQkJfTsKCgkJCQkJaW5wdXRDdG4uYXBwZW5kKGlucHV0LCBsYWJlbEVsKTsKCQkJCQljb2wuYXBwZW5kKGlucHV0Q3RuKTsKCQkJCX0KCQkJfQoJCX0pOwoKCQlpZiAoZmlsZVVwbG9hZC5sZW5ndGggIT0gMCkgewoJCQljb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCQkJZGl2LnNldEF0dHJpYnV0ZSgiY2xhc3MiLCAiZmlsZXVwbG9hZF9jb250aWFuZXIiKTsKCQkJZGl2LmFwcGVuZCguLi5maWxlVXBsb2FkKTsKCQkJY29sLmFwcGVuZChkaXYpOwoJCX0KCgkJaWYgKGRvY3VtZW50cykgewoJCQljb25zdCBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxhYmVsIik7CgkJCWxhYmVsLnNldEF0dHJpYnV0ZSgiY2xhc3MiLCAib3RoZXJfZG9jdW1lbnRjbGFzcyIpOwoJCQlsYWJlbC5pbm5lclRleHQgPSAiT3RoZXIgRG9jdW1lbnQiOwoJCQljb2wuYXBwZW5kKGxhYmVsKTsKCgkJCWNvbnN0IGZpbGVEb2MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCQkJZmlsZURvYy5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgImRvY19zZWxlY3Rpb25fY29udGFpbmVyIik7CgkJCWNvbnN0IGxhYmVscGx1cyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxhYmVsIik7CgkJCWxhYmVscGx1cy5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgIm90aGVyX2RvY3VtZW50cGx1cyIpOwoJCQlsYWJlbHBsdXMuaW5uZXJUZXh0ID0gIisiOwoKCQkJLy8gb3RoZXJfZG9jdW1lbnRwbHVzCgkJCWxhYmVscGx1cy5vbmNsaWNrID0gZnVuY3Rpb24gKGUpIHsKCQkJCWlmIChoYXNTb21lUGFyZW50VGhlQ2xhc3MoZS50YXJnZXQsICJkb2Nfc2VsZWN0aW9uX2NvbnRhaW5lciIpKSB7CgkJCQkJY29uc3QgbWFpbmVsZW1lbnQgPSBoYXNTb21lUGFyZW50VGhlQ2xhc3MoCgkJCQkJCWUudGFyZ2V0LAoJCQkJCQkiZG9jX3NlbGVjdGlvbl9jb250YWluZXIiCgkJCQkJKTsKCQkJCQlpZiAobWFpbmVsZW1lbnQpIHsKCQkJCQkJY29uc3QgYWNoaXZlZEVsZSA9IGhhc1NvbWVTaWJsaW5nVGhlQ2xhc3MoCgkJCQkJCQltYWluZWxlbWVudCwKCQkJCQkJCSJmaWxldXBsb2FkX2NvbnRpYW5lciIKCQkJCQkJKTsKCgkJCQkJCWNvbnN0IHNlbGVjdHBlcmVudE5vZGUgPSBoYXNTb21lU2libGluZ1RoZUNsYXNzKAoJCQkJCQkJZS50YXJnZXQsCgkJCQkJCQkiaW5wdXRDdG4iCgkJCQkJCSk7CgkJCQkJCWNvbnN0IHNlbGVjdGNoaWxkTm9kZSA9IGhhc1NvbWVDaGlsZE5vZGUoCgkJCQkJCQlzZWxlY3RwZXJlbnROb2RlLAoJCQkJCQkJIlNFTEVDVCIKCQkJCQkJKTsKCQkJCQkJY29uc3QgbXlWYWx1ZSA9IHNlbGVjdGNoaWxkTm9kZS52YWx1ZTsKCQkJCQkJY29uc3QgZmlsZUN0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwoKCQkJCQkJY29uc3QgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsYWJlbCIpOwoJCQkJCQlsYWJlbC5pbm5lclRleHQgPSBteVZhbHVlOwoKCQkJCQkJZmlsZUN0bi5jbGFzc0xpc3QuYWRkKCJmaWxlLXVwbG9hZCIsIGAke215VmFsdWUucmVwbGFjZUFsbCgiICIsICIiKS50b0xvd2VyQ2FzZSgpfWApOwoKCQkJCQkJbGV0IG1haW5VcGxvYWRDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCQkJCQkJbWFpblVwbG9hZENvbnRhaW5lci5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgIm1haW5VcGxvYWRfY29udGFpbmVyIik7CgoJCQkJCQljb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7CgkJCQkJCWNvbnN0IG15aWQgPSBgJHtuYW1lfV8ke3R5cGV9XyR7bXlWYWx1ZQoJCQkJCQkJLnJlcGxhY2VBbGwoIiAiLCAiIikKCQkJCQkJCS50b0xvd2VyQ2FzZSgpfWA7CgkJCQkJCWlucHV0LnNldEF0dHJpYnV0ZSgidHlwZSIsICJmaWxlIik7CgkJCQkJCWlucHV0LnNldEF0dHJpYnV0ZSgicmVxdWlyZWQiLCB0cnVlKTsKCQkJCQkJaW5wdXQuc2V0QXR0cmlidXRlKCJpZCIsIG15aWQpOwoJCQkJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoIm5hbWUiLCBteWlkKTsKCgkJCQkJCWlucHV0Lm9uY2xpY2sgPSAoZXYpID0+IHsKCQkJCQkJCWV2LnRhcmdldC52YWx1ZSA9IG51bGw7CgkJCQkJCX07CgoJCQkJCQlpbnB1dC5hZGRFdmVudExpc3RlbmVyKCJjaGFuZ2UiLCBhc3luYyAoZXYpID0+IHsKCgkJCQkJCQl0cnkgewoJCQkJCQkJCWlmIChldi50YXJnZXQubmV4dEVsZW1lbnRTaWJsaW5nKSB7CgkJCQkJCQkJCWV2LnRhcmdldC5uZXh0RWxlbWVudFNpYmxpbmcucmVtb3ZlKCk7CgkJCQkJCQkJfQoKCQkJCQkJCQlsZXQgbXlGaWxlVVJMID0gJyc7CgkJCQkJCQkJbGV0IGltYWdlQmxvYiA9ICcnOwoJCQkJCQkJCS8vIENoZWNrIGlmIGN1cnJlbnQgZG9jdW1lbnQgaXMgcGRmCgkJCQkJCQkJaWYgKGV2LnRhcmdldC5maWxlc1swXS50eXBlID09ICdhcHBsaWNhdGlvbi9wZGYnKSB7CgkJCQkJCQkJCXRyeSB7CgkJCQkJCQkJCQlteUZpbGVVUkwgPSBhd2FpdCBwZGZUb0ltYWdlKGV2LnRhcmdldC5maWxlc1swXSkKCQkJCQkJCQkJCWltYWdlQmxvYiA9IGF3YWl0IHBkZlRvSW1hZ2VCbG9iKGV2LnRhcmdldC5maWxlc1swXSk7CgoJCQkJCQkJCQl9IGNhdGNoIChlcnJvcikgewoJCQkJCQkJCQkJY29uc29sZS5lcnJvcignRXJyb3IgY29udmVydGluZyBQREYgdG8gaW1hZ2U6JywgZXJyb3IpOwoJCQkJCQkJCQl9CgkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJbXlGaWxlVVJMID0gVVJMLmNyZWF0ZU9iamVjdFVSTChldi50YXJnZXQuZmlsZXNbMF0pOwoJCQkJCQkJCX0KCgkJCQkJCQkJbGV0IHByZXZpd2VDb250YWluZXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCQkJCQkJCQlwcmV2aXdlQ29udGFpbmV0LnNldEF0dHJpYnV0ZSgiY2xhc3MiLCAicHJldmlld19hY3Rpb25idXR0b24iKTsKCQkJCQkJCQljb25zdCBsaW5rbmF2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpOwoJCQkJCQkJCXZhciBpbWdhZGRoYXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbWciKTsKCQkJCQkJCQlsaW5rbmF2LnNldEF0dHJpYnV0ZSgiaHJlZiIsIG15RmlsZVVSTCk7CgkJCQkJCQkJaW1nYWRkaGFyLnNldEF0dHJpYnV0ZSgiaGVpZ2h0IiwgNTApOwoJCQkJCQkJCWltZ2FkZGhhci5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgInVwbG9hZF9pbWFnZV9wcmV2aWV3Iik7CgkJCQkJCQkJaW1nYWRkaGFyLnNyYyA9IG15RmlsZVVSTDsKCQkJCQkJCQlsaW5rbmF2LnNldEF0dHJpYnV0ZSgidGFyZ2V0IiwgIl9ibGFuayIpOwoJCQkJCQkJCWxpbmtuYXYuYXBwZW5kKGltZ2FkZGhhcik7CgkJCQkJCQkJcHJldml3ZUNvbnRhaW5ldC5hcHBlbmQobGlua25hdik7CgoJCQkJCQkJCWlmIChteUZpbGVVUkwpIHsKCQkJCQkJCQkJY29uc3QgcmVtb3ZlRWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgkJCQkJCQkJCXJlbW92ZUVsZS5jbGFzc0xpc3QuYWRkKCJyZW1vdmVfcHJldmlld19lbGUiKTsKCQkJCQkJCQkJY29uc3QgbmV3U3VmZiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIpOwoJCQkJCQkJCQluZXdTdWZmLmlubmVySFRNTCA9ICJYIjsKCQkJCQkJCQkJcmVtb3ZlRWxlLmFwcGVuZENoaWxkKG5ld1N1ZmYpOwoKCgkJCQkJCQkJCXJlbW92ZUVsZS5vbmNsaWNrID0gZnVuY3Rpb24gKGUpIHsKCQkJCQkJCQkJCWNvbnN0IHNlbGZFbGUgPSBlLnRhcmdldDsKCQkJCQkJCQkJCWNvbnN0IHRhcmdldEVsZSA9IGhhc1NvbWVQYXJlbnRUaGVDbGFzcygKCQkJCQkJCQkJCQlzZWxmRWxlLAoJCQkJCQkJCQkJCSJwcmV2aWV3X2FjdGlvbmJ1dHRvbiIKCQkJCQkJCQkJCSk7CgkJCQkJCQkJCQlpbWFnZVVwbG9hZGluZyA9IGltYWdlVXBsb2FkaW5nLmZpbHRlcih4ID0+IHggIT0gdGFyZ2V0RWxlLnBhcmVudE5vZGUuY2hpbGRyZW5bMF0uaWQpOwoJCQkJCQkJCQkJdGFyZ2V0RWxlLnJlbW92ZSgpOwoJCQkJCQkJCQkJaW5wdXQudmFsdWUgPSBudWxsOwoJCQkJCQkJCQl9OwoJCQkJCQkJCQlwcmV2aXdlQ29udGFpbmV0LmFwcGVuZChyZW1vdmVFbGUpOwoJCQkJCQkJCX0KCgkJCQkJCQkJbWFpblVwbG9hZENvbnRhaW5lci5hcHBlbmQocHJldml3ZUNvbnRhaW5ldCk7CgoJCQkJCQkJCWNvbXByZXNzSW1hZ2UobXlGaWxlVVJMLCBldiwgaW1hZ2VCbG9iKQoJCQkJCQkJCQkudGhlbigocmVzKSA9PiB7CgkJCQkJCQkJCQkvLyBzdG9yZURvY3VlbWVudChteWlkLCByZXMpOwoJCQkJCQkJCQkJY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsKCQkJCQkJCQkJCWlmIChldi50YXJnZXQuZmlsZXNbMF0udHlwZSA9PSAnYXBwbGljYXRpb24vcGRmJykgewoJCQkJCQkJCQkJCWZvcm1EYXRhLmFwcGVuZCgidXBkIiwgZXYudGFyZ2V0LmZpbGVzWzBdKTsKCQkJCQkJCQkJCX0KCQkJCQkJCQkJCWVsc2UgewoKCQkJCQkJCQkJCQlsZXQgZmlsZTsKCQkJCQkJCQkJCQlpZiAoKGV2LnRhcmdldC5maWxlc1swXS5zaXplIC8gMTAyNCkgPCA1MDApIHsKCQkJCQkJCQkJCQkJZmlsZSA9IGV2LnRhcmdldC5maWxlc1swXTsKCQkJCQkJCQkJCQl9CgkJCQkJCQkJCQkJZWxzZSB7CgkJCQkJCQkJCQkJCWxldCB0eXBlID0gZXYudGFyZ2V0LmZpbGVzWzBdLnR5cGUuc3BsaXQoJy8nKVsxXTsKCQkJCQkJCQkJCQkJZmlsZSA9IG5ldyBGaWxlKFtyZXNdLCBgbmFtZS4ke3R5cGV9YCwgewoJCQkJCQkJCQkJCQkJdHlwZTogcmVzLnR5cGUKCQkJCQkJCQkJCQkJfSk7CgkJCQkJCQkJCQkJfQoKCQkJCQkJCQkJCQlmb3JtRGF0YS5hcHBlbmQoInVwZCIsIGZpbGUpOwoJCQkJCQkJCQkJfQoJCQkJCQkJCQkJY29uc3QgY3VycmV0VmFsaWREYXRhID0gZ2V0QXBwbGljYW50RGF0YShuYW1lKTsKCgkJCQkJCQkJCQlsZXQgc21Mb2FkZXIgPSBjcmVhdGVMb2FkZXIoKTsKCQkJCQkJCQkJCXByZXZpd2VDb250YWluZXQuYXBwZW5kKHNtTG9hZGVyKTsKCQkJCQkJCQkJCWltYWdlVXBsb2FkaW5nLnB1c2gobXlpZCk7CgoJCQkJCQkJCQkJY29uc3Qgc2hvd0ZhaWx1cmVGdW4gPSAoKSA9PiB7CgkJCQkJCQkJCQkJbGV0IG1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLm15dmVyTW9kYWwiKTsKCQkJCQkJCQkJCQltb2RhbC5jbGFzc0xpc3QudG9nZ2xlKCJzaG93LW1vZGFsIik7CgkJCQkJCQkJCQkJcHJldml3ZUNvbnRhaW5ldC5hcHBlbmQodmVyaWZ5ZmFpbHNpY29uKCkpOwoKCQkJCQkJCQkJCQlkb2N1bWVudC5xdWVyeVNlbGVjdG9yKAoJCQkJCQkJCQkJCQkiI215UG9wdXAgLmRvY19yZXVwbG9hZEJ0biIKCQkJCQkJCQkJCQkpLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7CgkJCQkJCQkJCQkJCWNvbnN0IGN1ckVsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG15aWQpOwoJCQkJCQkJCQkJCQljb25zdCB0YXJnZXRFbGUgPSBoYXNTb21lTmV4dFNpYmxpbmdUaGVDbGFzcygKCQkJCQkJCQkJCQkJCWN1ckVsZSwKCQkJCQkJCQkJCQkJCSJwcmV2aWV3X2FjdGlvbmJ1dHRvbiIKCQkJCQkJCQkJCQkJKTsKCQkJCQkJCQkJCQkJY3VyRWxlLnZhbHVlID0gbnVsbDsKCQkJCQkJCQkJCQkJaWYgKHRhcmdldEVsZSkgewoJCQkJCQkJCQkJCQkJdGFyZ2V0RWxlLnJlbW92ZSgpOwoJCQkJCQkJCQkJCQl9CgkJCQkJCQkJCQkJCW1vZGFsLmNsYXNzTGlzdC50b2dnbGUoInNob3ctbW9kYWwiKTsKCQkJCQkJCQkJCQl9OwoKCQkJCQkJCQkJCQlkb2N1bWVudC5xdWVyeVNlbGVjdG9yKAoJCQkJCQkJCQkJCQkiI215UG9wdXAgLmlnbm9yZVByX0J0biIKCQkJCQkJCQkJCQkpLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7CgkJCQkJCQkJCQkJCWNvbnN0IG15aWdJZCA9IG15aWQgKyAiX2lnbm9yZSI7CgkJCQkJCQkJCQkJCWlnbm9yZURvYyA9IGlnbm9yZURvYy5maWx0ZXIoKGlnKSA9PiB7CgkJCQkJCQkJCQkJCQlyZXR1cm4gaWcubmFtZSAhPSBteWlnSWQ7CgkJCQkJCQkJCQkJCX0pOwoJCQkJCQkJCQkJCQlpZ25vcmVEb2MucHVzaCh7IG5hbWU6IG15aWdJZCwgdmFsdWU6ICcnIH0pOwoJCQkJCQkJCQkJCQltb2RhbC5jbGFzc0xpc3QudG9nZ2xlKCJzaG93LW1vZGFsIik7CgkJCQkJCQkJCQkJfTsKCQkJCQkJCQkJCX0KCgkJCQkJCQkJCQl2ZXJpZnlEb2NOZXcobXlpZCwgZm9ybURhdGEsIG5hbWUpCgkJCQkJCQkJCQkJLnRoZW4oKHJlcykgPT4gewoKCQkJCQkJCQkJCQkJU3RvcmVEb2N1bWVudE5hbWUobXlpZCwgcmVzLnZhbHVlLmZpbGVfbmFtZSk7CgkJCQkJCQkJCQkJCXNtTG9hZGVyLmlubmVySFRNTCA9ICcnOwoJCQkJCQkJCQkJCQlpbWFnZVVwbG9hZGluZyA9IGltYWdlVXBsb2FkaW5nLmZpbHRlcih4ID0+IHggIT0gbXlpZCk7CgkJCQkJCQkJCQkJCWxldCBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5teXZlck1vZGFsIik7CgkJCQkJCQkJCQkJCWlmIChyZXMgJiYgcmVzLnZlcmlmaWVkKSB7CgoJCQkJCQkJCQkJCQkJcHJldml3ZUNvbnRhaW5ldC5hcHBlbmQodmVyaWZpZWRpY29uKCkpOwoJCQkJCQkJCQkJCQkJY29uc3QgbXlpZ0lkID0gbXlpZCArICJfaWdub3JlIjsKCQkJCQkJCQkJCQkJCWlnbm9yZURvYyA9IGlnbm9yZURvYy5maWx0ZXIoKGlnKSA9PiB7CgkJCQkJCQkJCQkJCQkJcmV0dXJuIGlnLm5hbWUgIT0gbXlpZ0lkOwoJCQkJCQkJCQkJCQkJfSk7CgoJCQkJCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQkJCQkJc2hvd0ZhaWx1cmVGdW4oKTsKCQkJCQkJCQkJCQkJfQoKCQkJCQkJCQkJCQl9KQoJCQkJCQkJCQkJCS5jYXRjaCgoZXJyKSA9PiB7CgkJCQkJCQkJCQkJCVN0b3JlRG9jdW1lbnROYW1lKG15aWQsIGVyci52YWx1ZS5maWxlX25hbWUpOwoJCQkJCQkJCQkJCQlzbUxvYWRlci5pbm5lckhUTUwgPSAnJzsKCQkJCQkJCQkJCQkJaW1hZ2VVcGxvYWRpbmcgPSBpbWFnZVVwbG9hZGluZy5maWx0ZXIoeCA9PiB4ICE9IG15aWQpOwoJCQkJCQkJCQkJCQlzaG93RmFpbHVyZUZ1bigpOwoKCQkJCQkJCQkJCQl9KTsKCQkJCQkJCQkJfSkKCQkJCQkJCQkJLmNhdGNoKCgpID0+IHsKCQkJCQkJCQkJCXByZXZpd2VDb250YWluZXQuYXBwZW5kKHZlcmlmeWZhaWxzaWNvbigpKTsKCgkJCQkJCQkJCX0pOwoJCQkJCQkJfSBjYXRjaCAoZXJyb3IpIHsKCQkJCQkJCQljb25zb2xlLmxvZyh7IGVycm9yIH0pOwoKCQkJCQkJCX0KCQkJCQkJfSk7CgoJCQkJCQlsZXQgbWludXBsYW9kID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpOwoJCQkJCQltaW51cGxhb2Quc2V0QXR0cmlidXRlKCJjbGFzcyIsICJtaW51c191cGxvYWRjb250YWluZXIiKTsKCQkJCQkJbWludXBsYW9kLmlubmVySFRNTCA9ICItIjsKCgkJCQkJCW1pbnVwbGFvZC5vbmNsaWNrID0gZnVuY3Rpb24gKGUpIHsKCQkJCQkJCWNvbnN0IGRlbHRnZWxlID0gaGFzU29tZVBhcmVudFRoZUNsYXNzKGUudGFyZ2V0LCAiZmlsZS11cGxvYWQiKTsKCQkJCQkJCWRlbHRnZWxlLnJlbW92ZSgpOwoJCQkJCQl9OwoKCQkJCQkJbWFpblVwbG9hZENvbnRhaW5lci5hcHBlbmQoaW5wdXQpOwoJCQkJCQlmaWxlQ3RuLmFwcGVuZChsYWJlbCwgbWFpblVwbG9hZENvbnRhaW5lciwgbWludXBsYW9kKTsKCQkJCQkJYWNoaXZlZEVsZS5hcHBlbmQoZmlsZUN0bik7CgkJCQkJfQoJCQkJfQoJCQl9OwoKCQkJaWYgKCFkb2N1bWVudHMuZGlzYWJsZWQpIHsKCQkJCWNvbnN0IHsgaWQsIGtleSwgdmFsaWRhdGUsIGRlZmF1bHRWYWx1ZSwgZGlzYWJsZWQsIGVkaXRhYmxlLCB2YWx1ZXMgfSA9CgkJCQkJZG9jdW1lbnRzOwoKCQkJCWNvbnN0IGlucHV0Q3RuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgkJCQlpbnB1dEN0bi5jbGFzc0xpc3QuYWRkKCJpbnB1dEN0biIpOwoJCQkJY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzZWxlY3QiKTsKCQkJCWlucHV0LnNldEF0dHJpYnV0ZSgiaWQiLCBpZCk7CgkJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoIm5hbWUiLCBrZXkpOwoKCQkJCWNvbnN0IGxhYmVsRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsYWJlbCIpOwoJCQkJbGFiZWxFbC5zZXRBdHRyaWJ1dGUoImZvciIsIGlkKTsKCQkJCWlucHV0Q3RuLmFwcGVuZChsYWJlbEVsKTsKCgkJCQlmb3IgKGNvbnN0IG9wdGlvblZhbCBvZiB2YWx1ZXMpIHsKCQkJCQljb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJvcHRpb24iKTsKCQkJCQlvcHRpb24uc2V0QXR0cmlidXRlKCJ2YWx1ZSIsIG9wdGlvblZhbC52YWx1ZSk7CgkJCQkJb3B0aW9uLmlubmVyVGV4dCA9IG9wdGlvblZhbC5sYWJlbDsKCQkJCQlpbnB1dC5hcHBlbmQob3B0aW9uKTsKCQkJCX0KCgkJCQlpZiAodmFsaWRhdGUpIHsKCQkJCQlmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyh2YWxpZGF0ZSkpIHsKCQkJCQkJaW5wdXQuc2V0QXR0cmlidXRlKGtleSwgdmFsaWRhdGVba2V5XSk7CgkJCQkJfQoJCQkJfQoKCQkJCWlmIChlZGl0YWJsZSA9PT0gIk5vIikgewoJCQkJCWlucHV0LnNldEF0dHJpYnV0ZSgiZGlzYWJsZWQiLCB0cnVlKTsKCQkJCX0KCgkJCQlpZiAoZGlzYWJsZWQpIHsKCQkJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoImRpc2FibGVkIiwgZGlzYWJsZWQpOwoJCQkJCWlucHV0Q3RuLmNsYXNzTGlzdC5hZGQoImhpZGRlbiIpOwoJCQkJfQoKCQkJCWlucHV0Q3RuLmFwcGVuZChpbnB1dCk7CgkJCQlmaWxlRG9jLmFwcGVuZChpbnB1dEN0bik7CgkJCX0KCgkJCWZpbGVEb2MuYXBwZW5kKGxhYmVscGx1cyk7CgkJCWNvbC5hcHBlbmQobGFiZWwsIGZpbGVEb2MpOwoJCX0KCX0KCXJldHVybiBjb2w7Cn0KCmZ1bmN0aW9uIGRhdGFVUkx0b0ZpbGUoZGF0YXVybCwgZmlsZW5hbWUpIHsKCXZhciBhcnIgPSBkYXRhdXJsLnNwbGl0KCcsJyksCgkJbWltZSA9IGFyclswXS5tYXRjaCgvOiguKj8pOy8pWzFdLAoJCWJzdHIgPSBhdG9iKGFyclthcnIubGVuZ3RoIC0gMV0pLAoJCW4gPSBic3RyLmxlbmd0aCwKCQl1OGFyciA9IG5ldyBVaW50OEFycmF5KG4pOwoJd2hpbGUgKG4tLSkgewoJCXU4YXJyW25dID0gYnN0ci5jaGFyQ29kZUF0KG4pOwoJfQoJcmV0dXJuIG5ldyBGaWxlKFt1OGFycl0sIGZpbGVuYW1lLCB7IHR5cGU6IG1pbWUgfSk7Cn0KCmZ1bmN0aW9uIGNyZWF0ZUxvYWRlcigpIHsKCglsZXQgc21Mb2FkZXJXcmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CglzbUxvYWRlcldyYXBwZXIuY2xhc3NMaXN0LmFkZCgnc20tbG9hZGVyLXdyYXBwZXInKTsKCWxldCBzbUxvYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwoJc21Mb2FkZXIuY2xhc3NMaXN0LmFkZCgnc20tbG9hZGVyJyk7CglsZXQgc21Mb2FkZXJUZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CglzbUxvYWRlclRleHQuY2xhc3NMaXN0LmFkZCgnc20tbG9hZGVyLXRleHQnKTsKCXNtTG9hZGVyVGV4dC5pbm5lclRleHQgPSAnVXBsb2FkaW5nLi4uJzsKCXNtTG9hZGVyV3JhcHBlci5hcHBlbmRDaGlsZChzbUxvYWRlcik7CglzbUxvYWRlcldyYXBwZXIuYXBwZW5kQ2hpbGQoc21Mb2FkZXJUZXh0KTsKCglyZXR1cm4gc21Mb2FkZXJXcmFwcGVyOwp9CgpmdW5jdGlvbiBjcmVhdGVMaXN0KHNlY3Rpb24pIHsKCWNvbnN0IHsgbGlzdCwgaWQgfSA9IHNlY3Rpb247Cgljb25zdCBvbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9sIik7CgoJaWYgKGlkKSB7CgkJb2wuc2V0QXR0cmlidXRlKCJpZCIsIGlkKTsKCX0KCglmb3IgKGNvbnN0IGl0ZW0gb2YgbGlzdCkgewoJCWNvbnN0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGkiKTsKCQlsaS5jbGFzc0xpc3QuYWRkKCJpbnB1dC1ncm91cCIpOwoKCQlpdGVtLmZvckVhY2goKGkpID0+IHsKCQkJbGkuYXBwZW5kKGNyZWF0ZUlucHV0RWwoaSkpOwoJCX0pOwoKCQlvbC5hcHBlbmQobGkpOwoJfQoKCXJldHVybiBvbDsKfQoKZnVuY3Rpb24gY3JlYXRlSW5wdXRFbEJvb2tpbmcoc2NoZW1hLCBjb3VudCkgewoJY29uc3QgeyBsYWJlbCwgdHlwZSwgaWQsIGtleSwgdmFsaWRhdGUsIGRlZmF1bHRWYWx1ZSwgZGlzYWJsZWQsIGVkaXRhYmxlIH0gPQoJCXNjaGVtYTsKCglpZiAoZGlzYWJsZWQpIHsKCQlyZXR1cm4gbnVsbDsKCX0gZWxzZSB7CgoJCWNvbnN0IGlucHV0Q3RuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgkJaW5wdXRDdG4uY2xhc3NMaXN0LmFkZCgiaW5wdXRDdG4iKTsKCgoJCWlmIChzY2hlbWEuY2xhc3MpIHsKCQkJaW5wdXRDdG4uY2xhc3NMaXN0LmFkZChzY2hlbWEuY2xhc3MpOwoJCX0KCgkJaWYgKHR5cGUgPT0gIm51bWJlciIpIHsKCQkJY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpOwoJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoImlkIiwgaWQpOwoJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoIm5hbWUiLCBrZXkpOwoJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoInR5cGUiLCB0eXBlKTsKCQkJaW5wdXQuc2V0QXR0cmlidXRlKCJjbGFzcyIsIGNvdW50KTsKCQkJaW5wdXQuc2V0QXR0cmlidXRlKCJwbGFjZWhvbGRlciIsIGxhYmVsKTsKCgoJCQljb25zdCBsYWJlbEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGFiZWwiKTsKCQkJbGFiZWxFbC5pbm5lclRleHQgPSBsYWJlbDsKCQkJbGFiZWxFbC5zZXRBdHRyaWJ1dGUoImZvciIsIGlkKTsKCQkJaW5wdXRDdG4uYXBwZW5kKGxhYmVsRWwpOwoKCQkJaWYgKHZhbGlkYXRlKSB7CgkJCQlmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyh2YWxpZGF0ZSkpIHsKCQkJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoa2V5LCB2YWxpZGF0ZVtrZXldKTsKCQkJCX0KCQkJfQoJCQlpZiAoZGVmYXVsdFZhbHVlKSB7CgkJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoInZhbHVlIiwgZGVmYXVsdFZhbHVlKTsKCQkJfQoKCQkJaWYgKGRpc2FibGVkKSB7CgkJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoImRpc2FibGVkIiwgZGlzYWJsZWQpOwoJCQkJaW5wdXRDdG4uY2xhc3NMaXN0LmFkZCgiaGlkZGVuIik7CgkJCX0KCgkJCWlmIChlZGl0YWJsZSA9PT0gIk5vIikgewoJCQkJaW5wdXQuc2V0QXR0cmlidXRlKCJkaXNhYmxlZCIsIHRydWUpOwoJCQkJaW5wdXQuY2xhc3NMaXN0LmFkZCgibm90X2VkaXRhYmxlIik7CgkJCX0KCgkJCWlmIChzY2hlbWEuYXBwZWFyYW5jZSkgewoJCQkJY29uc3QgYXBwZWFyYW5jZSA9IHNjaGVtYS5hcHBlYXJhbmNlOwoJCQkJY29uc3QgcHJlc3VmRWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgkJCQlwcmVzdWZFbGUuc2V0QXR0cmlidXRlKCJjbGFzcyIsICJwcmVzdWZjb250YWluZXIiKTsKCgkJCQlpZiAoYXBwZWFyYW5jZVsicHJlZml4QWRvcm5lciJdKSB7CgkJCQkJY29uc3QgaW5wdXRwcmVmID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpOwoJCQkJCWlucHV0cHJlZi5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgImlucHV0cHJlZml4Iik7CgkJCQkJaW5wdXRwcmVmLmlubmVySFRNTCA9IGFwcGVhcmFuY2VbInByZWZpeEFkb3JuZXIiXTsKCQkJCQlwcmVzdWZFbGUuYXBwZW5kKGlucHV0cHJlZik7CgkJCQl9CgkJCQlwcmVzdWZFbGUuYXBwZW5kKGlucHV0KTsKCQkJCWlmIChhcHBlYXJhbmNlWyJzdWZmaXhBZG9ybmVyIl0pIHsKCQkJCQljb25zdCBpbnB1dHN1ZmYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIik7CgkJCQkJaW5wdXRzdWZmLnNldEF0dHJpYnV0ZSgiY2xhc3MiLCAiaW5wdXRzdWZmaXgiKTsKCQkJCQlpbnB1dHN1ZmYuaW5uZXJIVE1MID0gYXBwZWFyYW5jZVsic3VmZml4QWRvcm5lciJdOwoJCQkJCXByZXN1ZkVsZS5hcHBlbmQoaW5wdXRzdWZmKTsKCQkJCX0KCgkJCQlpbnB1dEN0bi5hcHBlbmQocHJlc3VmRWxlKTsKCQkJfSBlbHNlIHsKCQkJCWlucHV0Q3RuLmFwcGVuZChpbnB1dCk7CgkJCX0KCQl9IGVsc2UgaWYgKHR5cGUgPT0gInRleHRmaWVsZCIpIHsKCQkJY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpOwoJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoImlkIiwgYCR7aWR9LSR7Y291bnR9YCk7CgkJCWlucHV0LnNldEF0dHJpYnV0ZSgibmFtZSIsIGtleSk7CgkJCWlucHV0LnNldEF0dHJpYnV0ZSgidHlwZSIsIHR5cGUgPT0gInRleHRmaWVsZCIgPyAidGV4dCIgOiB0eXBlKTsKCQkJaW5wdXQuc2V0QXR0cmlidXRlKCJjbGFzcyIsIGBiYW5rLWFtb3VudC0ke2NvdW50fWApOwoJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoInBsYWNlaG9sZGVyIiwgbGFiZWwpOwoKCQkJY29uc3QgbGFiZWxFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxhYmVsIik7CgkJCWxhYmVsRWwuaW5uZXJUZXh0ID0gbGFiZWw7CgkJCWxhYmVsRWwuc2V0QXR0cmlidXRlKCJmb3IiLCBpZCk7CgkJCWlucHV0Q3RuLmFwcGVuZChsYWJlbEVsKTsKCgkJCWlmICh2YWxpZGF0ZSkgewoJCQkJZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXModmFsaWRhdGUpKSB7CgkJCQkJaW5wdXQuc2V0QXR0cmlidXRlKGtleSwgdmFsaWRhdGVba2V5XSk7CgkJCQl9CgkJCX0KCgkJCWlmIChkZWZhdWx0VmFsdWUpIHsKCQkJCWlucHV0LnNldEF0dHJpYnV0ZSgidmFsdWUiLCBkZWZhdWx0VmFsdWUpOwoJCQl9CgoJCQlpZiAoZGlzYWJsZWQpIHsKCQkJCWlucHV0LnNldEF0dHJpYnV0ZSgiZGlzYWJsZWQiLCBkaXNhYmxlZCk7CgkJCQlpbnB1dEN0bi5jbGFzc0xpc3QuYWRkKCJoaWRkZW4iKTsKCQkJfQoJCQlpZiAoZWRpdGFibGUgPT09ICJObyIpIHsKCQkJCWlucHV0LnNldEF0dHJpYnV0ZSgiZGlzYWJsZWQiLCB0cnVlKTsKCQkJCWlucHV0LmNsYXNzTGlzdC5hZGQoIm5vdF9lZGl0YWJsZSIpOwoJCQl9CgoJCQlpZiAoc2NoZW1hLmFwcGVhcmFuY2UpIHsKCQkJCWNvbnN0IGFwcGVhcmFuY2UgPSBzY2hlbWEuYXBwZWFyYW5jZTsKCQkJCWNvbnN0IHByZXN1ZkVsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwoJCQkJcHJlc3VmRWxlLnNldEF0dHJpYnV0ZSgiY2xhc3MiLCAicHJlc3VmY29udGFpbmVyIik7CgoJCQkJaWYgKGFwcGVhcmFuY2VbInByZWZpeEFkb3JuZXIiXSkgewoJCQkJCWNvbnN0IGlucHV0cHJlZiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKTsKCQkJCQlpbnB1dHByZWYuc2V0QXR0cmlidXRlKCJjbGFzcyIsICJpbnB1dHByZWZpeCIpOwoJCQkJCWlucHV0cHJlZi5pbm5lckhUTUwgPSBhcHBlYXJhbmNlWyJwcmVmaXhBZG9ybmVyIl07CgkJCQkJcHJlc3VmRWxlLmFwcGVuZChpbnB1dHByZWYpOwoJCQkJfQoJCQkJcHJlc3VmRWxlLmFwcGVuZChpbnB1dCk7CgkJCQlpZiAoYXBwZWFyYW5jZVsic3VmZml4QWRvcm5lciJdKSB7CgkJCQkJY29uc3QgaW5wdXRzdWZmID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpOwoJCQkJCWlucHV0c3VmZi5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgImlucHV0c3VmZml4Iik7CgkJCQkJaW5wdXRzdWZmLmlubmVySFRNTCA9IGFwcGVhcmFuY2VbInN1ZmZpeEFkb3JuZXIiXTsKCQkJCQlwcmVzdWZFbGUuYXBwZW5kKGlucHV0c3VmZik7CgkJCQl9CgoJCQkJaW5wdXRDdG4uYXBwZW5kKHByZXN1ZkVsZSk7CgkJCX0gZWxzZSB7CgkJCQlpbnB1dEN0bi5hcHBlbmQoaW5wdXQpOwoJCQl9CgoJCX0gZWxzZSBpZiAodHlwZSA9PSAiZGF0ZSIgfHwgdHlwZSA9PSAiZGF0ZXRpbWUiKSB7CgkJCWNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKTsKCQkJaW5wdXQuc2V0QXR0cmlidXRlKCJpZCIsIGAke2lkfS0ke2NvdW50fWApOwoJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoIm5hbWUiLCBrZXkpOwoJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoInR5cGUiLCBzY2hlbWEuc3VidHlwZSB8fCAiZGF0ZSIpOwoJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgYGFtb3VudC1kYXRhLSR7Y291bnR9YCk7CgkJCWlucHV0LnNldEF0dHJpYnV0ZSgicGxhY2Vob2xkZXIiLCBsYWJlbCk7CgoJCQljb25zdCBsYWJlbEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGFiZWwiKTsKCQkJbGFiZWxFbC5pbm5lclRleHQgPSBzY2hlbWEubGFiZWwgfHwgIiI7CgkJCWxhYmVsRWwuc2V0QXR0cmlidXRlKCJmb3IiLCBpZCk7CgoJCQljb25zdCB0b2RheSA9IG5ldyBEYXRlKCk7CgkJCWNvbnN0IHRvZGF5RGF0ZSA9CgkJCQl0b2RheS5nZXRGdWxsWWVhcigpICsKCQkJCSItIiArCgkJCQkoIjAiICsgKHRvZGF5LmdldE1vbnRoKCkgKyAxKSkuc2xpY2UoLTIpICsKCQkJCSItIiArCgkJCQkoIjAiICsgdG9kYXkuZ2V0RGF0ZSgpKS5zbGljZSgtMik7CgoJCQlpZiAoc2NoZW1hLmlzbnVsbCA9PSB1bmRlZmluZWQgfHwgc2NoZW1hLmlzbnVsbCA9PSBmYWxzZSkgewoJCQkJaWYgKGRlZmF1bHRWYWx1ZSkgewoJCQkJCWlucHV0LmRlZmF1bHRWYWx1ZSA9IGRlZmF1bHRWYWx1ZTsKCQkJCX0gZWxzZSB7CgkJCQkJaW5wdXQuZGVmYXVsdFZhbHVlID0gdG9kYXlEYXRlOwoJCQkJfQoJCQl9CgoJCQlpZiAodmFsaWRhdGUpIHsKCQkJCWZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKHZhbGlkYXRlKSkgewoJCQkJCWlucHV0LnNldEF0dHJpYnV0ZShrZXksIHZhbGlkYXRlW2tleV0pOwoJCQkJfQoJCQl9CgoJCQlpZiAoZWRpdGFibGUgPT09ICJObyIpIHsKCQkJCWlucHV0LnNldEF0dHJpYnV0ZSgiZGlzYWJsZWQiLCB0cnVlKTsKCQkJCWlucHV0LmNsYXNzTGlzdC5hZGQoIm5vdF9lZGl0YWJsZSIpOwoJCQl9CgoJCQlpZiAoZGlzYWJsZWQpIHsKCQkJCWlucHV0LnNldEF0dHJpYnV0ZSgiZGlzYWJsZWQiLCAhZGlzYWJsZWQpOwoJCQkJaW5wdXRDdG4uY2xhc3NMaXN0LmFkZCgiaGlkZGVuIik7CgkJCX0KCgkJCWlucHV0Q3RuLmFwcGVuZChsYWJlbEVsLCBpbnB1dCk7CgoKCgkJfSBlbHNlIGlmICh0eXBlID09ICJ0ZXh0IikgewoJCQlpbnB1dEN0bi5jbGFzc0xpc3QuYWRkKCJmb3JtLXRleHQiLCAicGwtMCIpOwoJCQljb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsYWJlbCIpOwoJCQlkaXYuaW5uZXJUZXh0ID0gc2NoZW1hLnRleHQgfHwgIiI7CgkJCWRpdi5jbGFzc0xpc3QuYWRkKCJ3LTEwMCIsICJ0ZXh0LXRpdGxlIik7CgkJCWlmIChpZCkgewoJCQkJZGl2LnNldEF0dHJpYnV0ZSgiaWQiLCBpZCk7CgkJCX0KCQkJaW5wdXRDdG4uYXBwZW5kKGRpdik7CgoKCQl9CgoJCXJldHVybiBpbnB1dEN0bjsKCX0KfQoKZnVuY3Rpb24gY3JlYXRlSW5wdXRFbChzY2hlbWEpIHsKCWNvbnN0IHsgbGFiZWwsIHR5cGUsIGlkLCBrZXksIHZhbGlkYXRlLCBkZWZhdWx0VmFsdWUsIGRpc2FibGVkLCBlZGl0YWJsZSB9ID0KCQlzY2hlbWE7CgoJaWYgKGRpc2FibGVkKSB7CgkJcmV0dXJuIG51bGw7Cgl9IGVsc2UgewoJCWlmICh0eXBlID09PSAibGlzdCIpIHsKCQkJcmV0dXJuIGNyZWF0ZUxpc3Qoc2NoZW1hKTsKCQl9CgoJCWNvbnN0IGlucHV0Q3RuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgkJaW5wdXRDdG4uY2xhc3NMaXN0LmFkZCgiaW5wdXRDdG4iKTsKCgkJaWYgKHR5cGUgPT09ICJjaGVja2JveCIpIHsKCQkJaW5wdXRDdG4uY2xhc3NMaXN0LmFkZCgiZml0Y29udGVudF9jaGVjayIpOwoJCX0KCgkJaWYgKHNjaGVtYS5jbGFzcykgewoJCQlpbnB1dEN0bi5jbGFzc0xpc3QuYWRkKHNjaGVtYS5jbGFzcyk7CgkJfQoKCQkvLyBpZiAodHlwZSA9PSAidGV4dGFyZWEiKSB7CgkJLy8gICBpbnB1dEN0bi5jbGFzc0xpc3QuYWRkKCJ3LTEwMCIpOwoJCS8vIH0KCgkJaWYgKHR5cGUgPT0gIm51bWJlciIpIHsKCQkJY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpOwoJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoImlkIiwgaWQpOwoJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoIm5hbWUiLCBrZXkpOwoJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoInR5cGUiLCB0eXBlKTsKCgkJCWNvbnN0IGxhYmVsRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsYWJlbCIpOwoJCQlsYWJlbEVsLmlubmVyVGV4dCA9IGxhYmVsOwoJCQlsYWJlbEVsLnNldEF0dHJpYnV0ZSgiZm9yIiwgaWQpOwoJCQlpbnB1dEN0bi5hcHBlbmQobGFiZWxFbCk7CgoJCQlpZiAodmFsaWRhdGUpIHsKCQkJCWZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKHZhbGlkYXRlKSkgewoJCQkJCWlucHV0LnNldEF0dHJpYnV0ZShrZXksIHZhbGlkYXRlW2tleV0pOwoJCQkJfQoJCQl9CgkJCWlmIChkZWZhdWx0VmFsdWUpIHsKCQkJCWlucHV0LnNldEF0dHJpYnV0ZSgidmFsdWUiLCBkZWZhdWx0VmFsdWUpOwoJCQl9CgoJCQlpZiAoZGlzYWJsZWQpIHsKCQkJCWlucHV0LnNldEF0dHJpYnV0ZSgiZGlzYWJsZWQiLCBkaXNhYmxlZCk7CgkJCQlpbnB1dEN0bi5jbGFzc0xpc3QuYWRkKCJoaWRkZW4iKTsKCQkJfQoKCQkJaWYgKGVkaXRhYmxlID09PSAiTm8iKSB7CgkJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoImRpc2FibGVkIiwgdHJ1ZSk7CgkJCQlpbnB1dC5jbGFzc0xpc3QuYWRkKCJub3RfZWRpdGFibGUiKTsKCQkJfQoKCQkJaWYgKHNjaGVtYS5hcHBlYXJhbmNlKSB7CgkJCQljb25zdCBhcHBlYXJhbmNlID0gc2NoZW1hLmFwcGVhcmFuY2U7CgkJCQljb25zdCBwcmVzdWZFbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCQkJCXByZXN1ZkVsZS5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgInByZXN1ZmNvbnRhaW5lciIpOwoKCQkJCWlmIChhcHBlYXJhbmNlWyJwcmVmaXhBZG9ybmVyIl0pIHsKCQkJCQljb25zdCBpbnB1dHByZWYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIik7CgkJCQkJaW5wdXRwcmVmLnNldEF0dHJpYnV0ZSgiY2xhc3MiLCAiaW5wdXRwcmVmaXgiKTsKCQkJCQlpbnB1dHByZWYuaW5uZXJIVE1MID0gYXBwZWFyYW5jZVsicHJlZml4QWRvcm5lciJdOwoJCQkJCXByZXN1ZkVsZS5hcHBlbmQoaW5wdXRwcmVmKTsKCQkJCX0KCQkJCXByZXN1ZkVsZS5hcHBlbmQoaW5wdXQpOwoJCQkJaWYgKGFwcGVhcmFuY2VbInN1ZmZpeEFkb3JuZXIiXSkgewoJCQkJCWNvbnN0IGlucHV0c3VmZiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKTsKCQkJCQlpbnB1dHN1ZmYuc2V0QXR0cmlidXRlKCJjbGFzcyIsICJpbnB1dHN1ZmZpeCIpOwoJCQkJCWlucHV0c3VmZi5pbm5lckhUTUwgPSBhcHBlYXJhbmNlWyJzdWZmaXhBZG9ybmVyIl07CgkJCQkJcHJlc3VmRWxlLmFwcGVuZChpbnB1dHN1ZmYpOwoJCQkJfQoKCQkJCWlucHV0Q3RuLmFwcGVuZChwcmVzdWZFbGUpOwoJCQl9IGVsc2UgewoJCQkJaW5wdXRDdG4uYXBwZW5kKGlucHV0KTsKCQkJfQoJCX0gZWxzZSBpZiAodHlwZSA9PSAidGV4dGZpZWxkIikgewoJCQljb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7CgkJCWlucHV0LnNldEF0dHJpYnV0ZSgiaWQiLCBpZCk7CgkJCWlucHV0LnNldEF0dHJpYnV0ZSgibmFtZSIsIGtleSk7CgkJCWlucHV0LnNldEF0dHJpYnV0ZSgidHlwZSIsIHR5cGUgPT0gInRleHRmaWVsZCIgPyAidGV4dCIgOiB0eXBlKTsKCgkJCWNvbnN0IGxhYmVsRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsYWJlbCIpOwoJCQlsYWJlbEVsLmlubmVyVGV4dCA9IGxhYmVsOwoJCQlsYWJlbEVsLnNldEF0dHJpYnV0ZSgiZm9yIiwgaWQpOwoJCQlpbnB1dEN0bi5hcHBlbmQobGFiZWxFbCk7CgoJCQlpZiAodmFsaWRhdGUpIHsKCQkJCWZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKHZhbGlkYXRlKSkgewoJCQkJCWlucHV0LnNldEF0dHJpYnV0ZShrZXksIHZhbGlkYXRlW2tleV0pOwoJCQkJfQoJCQl9CgoJCQlpZiAoZGVmYXVsdFZhbHVlKSB7CgkJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoInZhbHVlIiwgZGVmYXVsdFZhbHVlKTsKCQkJfQoKCQkJaWYgKGRpc2FibGVkKSB7CgkJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoImRpc2FibGVkIiwgZGlzYWJsZWQpOwoJCQkJaW5wdXRDdG4uY2xhc3NMaXN0LmFkZCgiaGlkZGVuIik7CgkJCX0KCQkJaWYgKGVkaXRhYmxlID09PSAiTm8iKSB7CgkJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoImRpc2FibGVkIiwgdHJ1ZSk7CgkJCQlpbnB1dC5jbGFzc0xpc3QuYWRkKCJub3RfZWRpdGFibGUiKTsKCQkJfQoKCQkJaWYgKHNjaGVtYS5hcHBlYXJhbmNlKSB7CgkJCQljb25zdCBhcHBlYXJhbmNlID0gc2NoZW1hLmFwcGVhcmFuY2U7CgkJCQljb25zdCBwcmVzdWZFbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCQkJCXByZXN1ZkVsZS5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgInByZXN1ZmNvbnRhaW5lciIpOwoKCQkJCWlmIChhcHBlYXJhbmNlWyJwcmVmaXhBZG9ybmVyIl0pIHsKCQkJCQljb25zdCBpbnB1dHByZWYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIik7CgkJCQkJaW5wdXRwcmVmLnNldEF0dHJpYnV0ZSgiY2xhc3MiLCAiaW5wdXRwcmVmaXgiKTsKCQkJCQlpbnB1dHByZWYuaW5uZXJIVE1MID0gYXBwZWFyYW5jZVsicHJlZml4QWRvcm5lciJdOwoJCQkJCXByZXN1ZkVsZS5hcHBlbmQoaW5wdXRwcmVmKTsKCQkJCX0KCQkJCXByZXN1ZkVsZS5hcHBlbmQoaW5wdXQpOwoJCQkJaWYgKGFwcGVhcmFuY2VbInN1ZmZpeEFkb3JuZXIiXSkgewoJCQkJCWNvbnN0IGlucHV0c3VmZiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKTsKCQkJCQlpbnB1dHN1ZmYuc2V0QXR0cmlidXRlKCJjbGFzcyIsICJpbnB1dHN1ZmZpeCIpOwoJCQkJCWlucHV0c3VmZi5pbm5lckhUTUwgPSBhcHBlYXJhbmNlWyJzdWZmaXhBZG9ybmVyIl07CgkJCQkJcHJlc3VmRWxlLmFwcGVuZChpbnB1dHN1ZmYpOwoJCQkJfQoKCQkJCWlucHV0Q3RuLmFwcGVuZChwcmVzdWZFbGUpOwoJCQl9IGVsc2UgewoJCQkJaW5wdXRDdG4uYXBwZW5kKGlucHV0KTsKCQkJfQoJCX0gZWxzZSBpZiAodHlwZSA9PSAidGV4dGFyZWEiKSB7CgkJCWNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGV4dGFyZWEiKTsKCQkJaW5wdXQuc2V0QXR0cmlidXRlKCJpZCIsIGlkKTsKCQkJaW5wdXQuc2V0QXR0cmlidXRlKCJuYW1lIiwga2V5KTsKCQkJaW5wdXQuc2V0QXR0cmlidXRlKCJ0eXBlIiwgdHlwZSk7CgoJCQljb25zdCBsYWJlbEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGFiZWwiKTsKCQkJbGFiZWxFbC5pbm5lclRleHQgPSBsYWJlbDsKCQkJbGFiZWxFbC5zZXRBdHRyaWJ1dGUoImZvciIsIGlkKTsKCQkJaW5wdXRDdG4uYXBwZW5kKGxhYmVsRWwpOwoKCQkJaWYgKGRlZmF1bHRWYWx1ZSkgewoJCQkJaW5wdXQuaW5uZXJUZXh0ID0gZGVmYXVsdFZhbHVlOwoJCQl9CgoJCQlpZiAodmFsaWRhdGUpIHsKCQkJCWZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKHZhbGlkYXRlKSkgewoJCQkJCWlucHV0LnNldEF0dHJpYnV0ZShrZXksIHZhbGlkYXRlW2tleV0pOwoJCQkJfQoJCQl9CgoJCQlpZiAoZWRpdGFibGUgPT09ICJObyIpIHsKCQkJCWlucHV0LnNldEF0dHJpYnV0ZSgiZGlzYWJsZWQiLCB0cnVlKTsKCQkJCWlucHV0LmNsYXNzTGlzdC5hZGQoIm5vdF9lZGl0YWJsZSIpOwoJCQl9CgoJCQlpZiAoZGlzYWJsZWQpIHsKCQkJCWlucHV0LnNldEF0dHJpYnV0ZSgiZGlzYWJsZWQiLCAhZGlzYWJsZWQpOwoJCQkJaW5wdXRDdG4uY2xhc3NMaXN0LmFkZCgiaGlkZGVuIik7CgkJCX0KCQkJaW5wdXRDdG4uYXBwZW5kKGlucHV0KTsKCQl9IGVsc2UgaWYgKHR5cGUgPT0gImRhdGUiIHx8IHR5cGUgPT0gImRhdGV0aW1lIikgewoJCQljb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7CgkJCWlucHV0LnNldEF0dHJpYnV0ZSgiaWQiLCBpZCk7CgkJCWlucHV0LnNldEF0dHJpYnV0ZSgibmFtZSIsIGtleSk7CgkJCWlucHV0LnNldEF0dHJpYnV0ZSgidHlwZSIsIHNjaGVtYS5zdWJ0eXBlIHx8ICJkYXRlIik7CgoJCQljb25zdCBsYWJlbEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGFiZWwiKTsKCQkJbGFiZWxFbC5pbm5lclRleHQgPSBzY2hlbWEubGFiZWwgfHwgIiI7CgkJCWxhYmVsRWwuc2V0QXR0cmlidXRlKCJmb3IiLCBpZCk7CgoJCQljb25zdCB0b2RheSA9IG5ldyBEYXRlKCk7CgkJCWNvbnN0IHRvZGF5RGF0ZSA9CgkJCQl0b2RheS5nZXRGdWxsWWVhcigpICsKCQkJCSItIiArCgkJCQkoIjAiICsgKHRvZGF5LmdldE1vbnRoKCkgKyAxKSkuc2xpY2UoLTIpICsKCQkJCSItIiArCgkJCQkoIjAiICsgdG9kYXkuZ2V0RGF0ZSgpKS5zbGljZSgtMik7CgoJCQlpZiAoc2NoZW1hLmlzbnVsbCA9PSB1bmRlZmluZWQgfHwgc2NoZW1hLmlzbnVsbCA9PSBmYWxzZSkgewoJCQkJaWYgKGRlZmF1bHRWYWx1ZSkgewoJCQkJCWlucHV0LmRlZmF1bHRWYWx1ZSA9IGRlZmF1bHRWYWx1ZTsKCQkJCX0gZWxzZSB7CgkJCQkJaW5wdXQuZGVmYXVsdFZhbHVlID0gdG9kYXlEYXRlOwoJCQkJfQoJCQl9CgoJCQlpZiAodmFsaWRhdGUpIHsKCQkJCWZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKHZhbGlkYXRlKSkgewoJCQkJCWlucHV0LnNldEF0dHJpYnV0ZShrZXksIHZhbGlkYXRlW2tleV0pOwoJCQkJfQoJCQl9CgoJCQlpZiAoZWRpdGFibGUgPT09ICJObyIpIHsKCQkJCWlucHV0LnNldEF0dHJpYnV0ZSgiZGlzYWJsZWQiLCB0cnVlKTsKCQkJCWlucHV0LmNsYXNzTGlzdC5hZGQoIm5vdF9lZGl0YWJsZSIpOwoJCQl9CgoJCQlpZiAoZGlzYWJsZWQpIHsKCQkJCWlucHV0LnNldEF0dHJpYnV0ZSgiZGlzYWJsZWQiLCAhZGlzYWJsZWQpOwoJCQkJaW5wdXRDdG4uY2xhc3NMaXN0LmFkZCgiaGlkZGVuIik7CgkJCX0KCgkJCWlucHV0Q3RuLmFwcGVuZChsYWJlbEVsLCBpbnB1dCk7CgkJfSBlbHNlIGlmICh0eXBlID09ICJjaGVja2JveCIpIHsKCQkJY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpOwoJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoImlkIiwgaWQpOwoJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoIm5hbWUiLCBrZXkpOwoJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoInR5cGUiLCB0eXBlKTsKCgkJCWNvbnN0IGxhYmVsRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsYWJlbCIpOwoJCQlsYWJlbEVsLmlubmVyVGV4dCA9IGxhYmVsOwoJCQlsYWJlbEVsLnNldEF0dHJpYnV0ZSgiZm9yIiwgaWQpOwoKCQkJaWYgKGRlZmF1bHRWYWx1ZSkgewoJCQkJaW5wdXQuc2V0QXR0cmlidXRlKCJjaGVja2VkIiwgZGVmYXVsdFZhbHVlKTsKCQkJfQoKCQkJaWYgKGVkaXRhYmxlID09PSAiTm8iKSB7CgkJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoImRpc2FibGVkIiwgdHJ1ZSk7CgkJCQlpbnB1dC5jbGFzc0xpc3QuYWRkKCJub3RfZWRpdGFibGUiKTsKCQkJfQoKCQkJaWYgKGRpc2FibGVkKSB7CgkJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoImRpc2FibGVkIiwgZGlzYWJsZWQpOwoJCQkJaW5wdXRDdG4uY2xhc3NMaXN0LmFkZCgiaGlkZGVuIik7CgkJCX0KCgkJCWlucHV0Q3RuLmFwcGVuZChpbnB1dCwgbGFiZWxFbCk7CgkJfSBlbHNlIGlmICh0eXBlID09ICJzZWxlY3QiKSB7CgkJCWNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic2VsZWN0Iik7CgkJCWlucHV0LnNldEF0dHJpYnV0ZSgiaWQiLCBpZCk7CgkJCWlucHV0LnNldEF0dHJpYnV0ZSgibmFtZSIsIGtleSk7CgkJCWNvbnN0IGxhYmVsRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsYWJlbCIpOwoJCQlsYWJlbEVsLnNldEF0dHJpYnV0ZSgiZm9yIiwgaWQpOwoJCQlsYWJlbEVsLmlubmVySFRNTCA9IHNjaGVtYS5sYWJlbAoJCQlpbnB1dEN0bi5hcHBlbmQobGFiZWxFbCk7CgoJCQljb25zdCBkZWZhdWx0T3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgib3B0aW9uIik7CgkJCWRlZmF1bHRPcHRpb24uc2V0QXR0cmlidXRlKCJ2YWx1ZSIsICIiKTsKCQkJZGVmYXVsdE9wdGlvbi50b2dnbGVBdHRyaWJ1dGUoImRpc2FibGVkIiwgdHJ1ZSk7CgkJCWRlZmF1bHRPcHRpb24udG9nZ2xlQXR0cmlidXRlKCJzZWxlY3RlZCIsIHRydWUpOwoJCQlkZWZhdWx0T3B0aW9uLmNsYXNzTGlzdC5hZGQoInNlbGVjdC1sYWJlbC1vcHRpb24iKTsKCQkJZGVmYXVsdE9wdGlvbi5pbm5lclRleHQgPSBsYWJlbDsKCgkJCWlucHV0LmFwcGVuZChkZWZhdWx0T3B0aW9uKTsKCgkJCWZvciAoY29uc3Qgb3B0aW9uVmFsIG9mIHNjaGVtYS52YWx1ZXMpIHsKCQkJCWNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpOwoJCQkJb3B0aW9uLnNldEF0dHJpYnV0ZSgidmFsdWUiLCBvcHRpb25WYWwudmFsdWUpOwoJCQkJb3B0aW9uLmlubmVyVGV4dCA9IG9wdGlvblZhbC5sYWJlbDsKCQkJCWlucHV0LmFwcGVuZChvcHRpb24pOwoJCQl9CgoJCQlpZiAodmFsaWRhdGUpIHsKCQkJCWZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKHZhbGlkYXRlKSkgewoJCQkJCWlucHV0LnNldEF0dHJpYnV0ZShrZXksIHZhbGlkYXRlW2tleV0pOwoJCQkJfQoJCQl9CgoJCQlpZiAoZGVmYXVsdFZhbHVlKSB7CgkJCQlpbnB1dC52YWx1ZSA9IGRlZmF1bHRWYWx1ZTsKCQkJfQoKCQkJaWYgKGVkaXRhYmxlID09PSAiTm8iKSB7CgkJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoImRpc2FibGVkIiwgdHJ1ZSk7CgkJCQlpbnB1dC5jbGFzc0xpc3QuYWRkKCJub3RfZWRpdGFibGUiKTsKCQkJfQoKCQkJaWYgKGRpc2FibGVkKSB7CgkJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoImRpc2FibGVkIiwgZGlzYWJsZWQpOwoJCQkJaW5wdXRDdG4uY2xhc3NMaXN0LmFkZCgiaGlkZGVuIik7CgkJCX0KCgkJCWlucHV0Q3RuLmFwcGVuZChpbnB1dCk7CgkJfSBlbHNlIGlmICh0eXBlID09ICJyYWRpbyIpIHsKCQkJaWYgKGxhYmVsKSB7CgkJCQljb25zdCBsYWJlbEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGFiZWwiKTsKCQkJCWxhYmVsRWwuaW5uZXJUZXh0ID0gbGFiZWw7CgkJCQlpbnB1dEN0bi5hcHBlbmQobGFiZWxFbCk7CgkJCX0KCgkJCWlucHV0Q3RuLnNldEF0dHJpYnV0ZSgiaWQiLCBpZCk7CgkJCWlucHV0Q3RuLmNsYXNzTGlzdC5hZGQoImNoZWNrYm94LWN0biIpOwoKCQkJY29uc3Qgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgkJCXJvdy5jbGFzc0xpc3QuYWRkKCJjaGVja2JveC1yb3ciKTsKCQkJaW5wdXRDdG4uYXBwZW5kKHJvdyk7CgoJCQlpZiAoc2NoZW1hLnZhbHVlcy5sZW5ndGggPiAzKSB7CgkJCQlpbnB1dEN0bi5jbGFzc0xpc3QuYWRkKCJncmVhdGVfY2hlY2tib3giKTsKCQkJfQoKCQkJZm9yIChjb25zdCBvcHRpb24gb2Ygc2NoZW1hLnZhbHVlcykgewoJCQkJY29uc3QgaW5uZXJMYWJlbEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGFiZWwiKTsKCQkJCWNvbnN0IHNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIik7CgkJCQlzcGFuLmlubmVyVGV4dCA9IG9wdGlvbi5sYWJlbDsKCQkJCWlubmVyTGFiZWxFbC5hcHBlbmQoc3Bhbik7CgoJCQkJY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpOwoJCQkJaW5wdXQuc2V0QXR0cmlidXRlKCJkaXNhYmxlZCIsIHRydWUpOwoJCQkJaW5wdXQuc2V0QXR0cmlidXRlKCJuYW1lIiwga2V5KTsKCQkJCWlucHV0LnNldEF0dHJpYnV0ZSgidHlwZSIsIHR5cGUpOwoJCQkJaWYgKG9wdGlvbi5pZCkgewoJCQkJCWlucHV0LnNldEF0dHJpYnV0ZSgiaWQiLCBvcHRpb24uaWQpOwoJCQkJCWlucHV0LnNldEF0dHJpYnV0ZSgiY2xhc3MiLCBvcHRpb24uaWQpOwoJCQkJfQoJCQkJaW5wdXQuc2V0QXR0cmlidXRlKCJ2YWx1ZSIsIG9wdGlvbi52YWx1ZSk7CgoJCQkJaWYgKHZhbGlkYXRlKSB7CgkJCQkJZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXModmFsaWRhdGUpKSB7CgkJCQkJCWlucHV0LnNldEF0dHJpYnV0ZShrZXksIHZhbGlkYXRlW2tleV0pOwoJCQkJCX0KCQkJCX0KCgkJCQlpZiAoZGVmYXVsdFZhbHVlID09PSBvcHRpb24udmFsdWUpIHsKCQkJCQlpbnB1dC5jaGVja2VkID0gdHJ1ZTsKCQkJCX0KCgkJCQlpZiAoZWRpdGFibGUgPT09ICJObyIpIHsKCQkJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoImRpc2FibGVkIiwgdHJ1ZSk7CgkJCQkJaW5wdXQuY2xhc3NMaXN0LmFkZCgibm90X2VkaXRhYmxlIik7CgkJCQl9CgoJCQkJaWYgKGRpc2FibGVkKSB7CgkJCQkJaW5wdXQuc2V0QXR0cmlidXRlKCJkaXNhYmxlZCIsIGRpc2FibGVkKTsKCQkJCQlpbnB1dEN0bi5jbGFzc0xpc3QuYWRkKCJoaWRkZW4iKTsKCQkJCX0KCgkJCQlpbm5lckxhYmVsRWwuYXBwZW5kKGlucHV0KTsKCQkJCXJvdy5hcHBlbmQoaW5uZXJMYWJlbEVsKTsKCQkJfQoJCX0gZWxzZSBpZiAodHlwZSA9PSAiaW1hZ2UiKSB7CgkJCWNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW1nIik7CgoJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoImlkIiwgaWQpOwoJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoInNyYyIsIHNjaGVtYS5zb3VyY2UgPyBzY2hlbWEuc291cmNlIDogIiMiKTsKCQkJaW5wdXQuc2V0QXR0cmlidXRlKCJhbHQiLCBzY2hlbWEuYWx0ID8gc2NoZW1hLmFsdCA6ICIjIik7CgoJCQlyZXR1cm4gaW5wdXQ7CgkJfSBlbHNlIGlmICh0eXBlID09ICJjaGVja2xpc3QiKSB7CgkJCWNvbnN0IGlucHV0Y2hlY2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCQkJaW5wdXRjaGVjay5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgImlucHV0X2NoZWNrbGlzdCIpOwoJCQlpZiAobGFiZWwpIHsKCQkJCWNvbnN0IGxhYmVsRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsYWJlbCIpOwoJCQkJbGFiZWxFbC5pbm5lclRleHQgPSBsYWJlbDsKCQkJCWlucHV0Y2hlY2suYXBwZW5kKGxhYmVsRWwpOwoJCQl9CgoJCQlpbnB1dEN0bi5zZXRBdHRyaWJ1dGUoImlkIiwgaWQpOwoJCQlpbnB1dEN0bi5jbGFzc0xpc3QuYWRkKCJjaGVja2JveC1jdG4iKTsKCgkJCWNvbnN0IGNvbHVtbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwoJCQljb2x1bW4uY2xhc3NMaXN0LmFkZCgiY2hlY2tib3gtY29sdW1uIik7CgoJCQlmb3IgKGNvbnN0IG9wdGlvbiBvZiBzY2hlbWEudmFsdWVzKSB7CgkJCQljb25zdCByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCQkJCXJvdy5jbGFzc0xpc3QuYWRkKCJjaGVja2JveC1yYXciKTsKCgkJCQljb25zdCBpbm5lckxhYmVsRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsYWJlbCIpOwoJCQkJY29uc3Qgc3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKTsKCQkJCXNwYW4uaW5uZXJUZXh0ID0gb3B0aW9uLmxhYmVsOwoJCQkJaW5uZXJMYWJlbEVsLmFwcGVuZChzcGFuKTsKCgkJCQljb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7CgkJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoInR5cGUiLCAiY2hlY2tib3giKTsKCQkJCWlucHV0LnNldEF0dHJpYnV0ZSgibmFtZSIsIG9wdGlvbi5sYWJlbCk7CgkJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoInZhbHVlIiwgb3B0aW9uLnZhbHVlKTsKCgkJCQlpZiAoZWRpdGFibGUgPT09ICJObyIpIHsKCQkJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoImRpc2FibGVkIiwgdHJ1ZSk7CgkJCQkJaW5wdXQuY2xhc3NMaXN0LmFkZCgibm90X2VkaXRhYmxlIik7CgkJCQl9CgoJCQkJaWYgKGRpc2FibGVkKSB7CgkJCQkJaW5wdXQuc2V0QXR0cmlidXRlKCJkaXNhYmxlZCIsIGRpc2FibGVkKTsKCQkJCQlpbnB1dEN0bi5jbGFzc0xpc3QuYWRkKCJoaWRkZW4iKTsKCQkJCX0KCgkJCQlpZiAoZGVmYXVsdFZhbHVlID09PSBvcHRpb24udmFsdWUpIHsKCQkJCQlpbnB1dC5jaGVja2VkID0gdHJ1ZTsKCQkJCX0KCQkJCXJvdy5hcHBlbmQoaW5wdXQsIGlubmVyTGFiZWxFbCk7CgkJCQljb2x1bW4uYXBwZW5kQ2hpbGQocm93KTsKCQkJfQoKCQkJaW5wdXRjaGVjay5hcHBlbmRDaGlsZChjb2x1bW4pOwoJCQlpbnB1dEN0bi5hcHBlbmRDaGlsZChpbnB1dGNoZWNrKTsKCQl9IGVsc2UgaWYgKHR5cGUgPT0gInRleHQiKSB7CgoJCQlpbnB1dEN0bi5jbGFzc0xpc3QuYWRkKCJmb3JtLXRleHQiLCAicGwtMCIpOwoJCQljb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsYWJlbCIpOwoJCQlkaXYuaW5uZXJUZXh0ID0gc2NoZW1hLnRleHQgfHwgIiI7CgkJCWRpdi5jbGFzc0xpc3QuYWRkKCJ3LTEwMCIsICJ0ZXh0LXRpdGxlIik7CgkJCWlmIChpZCkgewoJCQkJZGl2LnNldEF0dHJpYnV0ZSgiaWQiLCBpZCk7CgkJCX0KCQkJaW5wdXRDdG4uYXBwZW5kKGRpdik7CgoKCgkJfSBlbHNlIGlmICh0eXBlID09ICJzaWduYXR1cmUiKSB7CgkJCWNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwoKCQkJZGl2LmNsYXNzTGlzdC5hZGQoImZsZXgtY29sIiwgIm10LTIwIiwgInctMTAwIik7CgoJCQlsZXQgcmVxdWlyZWQgPSBmYWxzZTsKCQkJaWYgKHZhbGlkYXRlICYmIHZhbGlkYXRlLnJlcXVpcmVkKSByZXF1aXJlZCA9IHRydWU7CgoJCQlkaXYuaW5uZXJIVE1MID0gYAogICAgICA8ZGl2PgogICAgICA8bGFiZWw+U2lnbmF0dXJlIDo8L2xhYmVsPgogICAgICA8ZGl2IGNsYXNzPSJtdC0xMCI+CiAgICAgICAgPCEtLSBuYW1lIGZvciB0aGlzIHdhc24ndCBwcm92aWRlZCBpbiB0aGUgc2NoZW1hIGpzb24gLS0+CiAgICAgICAgPGJ1dHRvbiBmb3I9ImNsZWFyLXNpZ24iIGNvbnRyb2w9IiR7aWR9Ij54PC9idXR0b24+CiAgICAgICAgPGNhbnZhcyBmb3I9InNpZ24iICR7cmVxdWlyZWQgPyAicmVxdWlyZWQiIDogIiIKCQkJCX0gbmFtZT0iJHtrZXl9IiBpZD0iJHtpZH0iPjwvY2FudmFzPgogICAgICA8L2Rpdj4KICAgICAgPC9kaXY+YDsKCgkJCXJldHVybiBkaXY7CgkJfQoKCQlpZiAoc2NoZW1hLm90aGVyICYmIHNjaGVtYS5vdGhlclsidHlwZSJdID09ICJjaGVja2JveCIpIHsKCQkJY29uc3QgaW5uZXJEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCQkJaW5uZXJEaXYuY2xhc3NMaXN0LmFkZCgiaW5uZXJfaW5wdXRjdG4iKTsKCQkJY29uc3QgaW5wdXRpbm5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7CgkJCWlucHV0aW5uZXIuc2V0QXR0cmlidXRlKCJ0eXBlIiwgc2NoZW1hLm90aGVyWyJ0eXBlIl0pOwoJCQlpbnB1dGlubmVyLnNldEF0dHJpYnV0ZSgiaWQiLCBgJHtpZH1faW5uZXJgKTsKCQkJaW5wdXRpbm5lci5zZXRBdHRyaWJ1dGUoImRhdGEtcmVmIiwgaWQpOwoKCQkJaW5wdXRpbm5lci5vbmNoYW5nZSA9IGZ1bmN0aW9uIChlKSB7CgkJCQljb25zdCBuZXdSZWZFbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzY2hlbWEub3RoZXJbImZvciJdKTsKCQkJCWlmIChuZXdSZWZFbGUpIHsKCQkJCQljb25zdCB0ZWxFbGUgPSBoYXNTb21lUGFyZW50VGhlQ2xhc3MobmV3UmVmRWxlLCAicGFuY2FyZF9jaGVjayIpOwoJCQkJCWNvbnN0IHRhcmdldEVsZSA9IGhhc1NvbWVOZXh0U2libGluZ1RoZUNsYXNzKAoJCQkJCQl0ZWxFbGUsCgkJCQkJCSJmaWxldXBsb2FkX2NvbnRpYW5lciIKCQkJCQkpOwoJCQkJCWNvbnN0IGhpZEVsZSA9IHRhcmdldEVsZS5xdWVyeVNlbGVjdG9yKCIuZmlsZS11cGxvYWQiKTsKCgkJCQkJaWYgKGUudGFyZ2V0LmNoZWNrZWQpIHsKCQkJCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpLnNldEF0dHJpYnV0ZSgiZGlzYWJsZWQiLCB0cnVlKTsKCQkJCQkJbmV3UmVmRWxlLmNoZWNrZWQgPSB0cnVlOwoJCQkJCQloaWRFbGUuY2xhc3NMaXN0LmFkZCgiaGlkZGVuIik7CgkJCQkJCWhpZEVsZS5xdWVyeVNlbGVjdG9yQWxsKCJpbnB1dCwgdGV4dGFyZWEsIHNlbGVjdCIpLmZvckVhY2goKGUpID0+IHsKCQkJCQkJCWUuc2V0QXR0cmlidXRlKCJkaXNhYmxlZCIsIHRydWUpOwoJCQkJCQkJZS5jbGFzc0xpc3QuYWRkKCJub3RfZWRpdGFibGUiKTsKCQkJCQkJfSk7CgkJCQkJfSBlbHNlIHsKCQkJCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpLnJlbW92ZUF0dHJpYnV0ZSgiZGlzYWJsZWQiKTsKCQkJCQkJbmV3UmVmRWxlLmNoZWNrZWQgPSBmYWxzZTsKCQkJCQkJaGlkRWxlLmNsYXNzTGlzdC5yZW1vdmUoImhpZGRlbiIsICJub3RfZWRpdGFibGUiKTsKCQkJCQkJaGlkRWxlLnF1ZXJ5U2VsZWN0b3JBbGwoImlucHV0LCB0ZXh0YXJlYSwgc2VsZWN0IikuZm9yRWFjaCgoZSkgPT4gewoJCQkJCQkJZS5yZW1vdmVBdHRyaWJ1dGUoImRpc2FibGVkIik7CgkJCQkJCQllLmNsYXNzTGlzdC5yZW1vdmUoIm5vdF9lZGl0YWJsZSIpOwoJCQkJCQl9KTsKCQkJCQl9CgkJCQl9CgkJCX07CgoJCQljb25zdCBsYWJlbEVsaW5uZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsYWJlbCIpOwoJCQlsYWJlbEVsaW5uZXIuaW5uZXJUZXh0ID0gc2NoZW1hLm90aGVyWyJsYWJlbCJdOwoJCQlsYWJlbEVsaW5uZXIuc2V0QXR0cmlidXRlKCJmb3IiLCBgJHtpZH1faW5uZXJgKTsKCQkJaW5uZXJEaXYuYXBwZW5kKGxhYmVsRWxpbm5lciwgaW5wdXRpbm5lcik7CgkJCWlucHV0Q3RuLmFwcGVuZChpbm5lckRpdik7CgkJCWlucHV0Q3RuLmNsYXNzTGlzdC5hZGQoInJlbGF0aW5lX2N0biIpOwoJCX0KCgkJcmV0dXJuIGlucHV0Q3RuOwoJfQp9CgpmdW5jdGlvbiBjcmVhdGVEYXRlU2lnbkZvb3RlcihpZCkgewoJY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpOwoJY29uc3QgdG9kYXlEYXRlID0KCQl0b2RheS5nZXRGdWxsWWVhcigpICsKCQkiLSIgKwoJCSgiMCIgKyAodG9kYXkuZ2V0TW9udGgoKSArIDEpKS5zbGljZSgtMikgKwoJCSItIiArCgkJKCIwIiArIHRvZGF5LmdldERhdGUoKSkuc2xpY2UoLTIpOwoKCWNvbnN0IGN0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwoJY3RuLmNsYXNzTGlzdC5hZGQoImRhdGUtc2lnbi1mb290ZXIiKTsKCgljdG4uaW5uZXJIVE1MID0gYAogIDxkaXYgY2xhc3M9ImlucHV0Q3RuIj4KICAgIDxsYWJlbCBmb3I9IiI+RGF0ZSA6PC9sYWJlbD4KICAgIDxpbnB1dCBkaXNhYmxlZCB0eXBlPSJkYXRlIiByZXF1aXJlZCB2YWx1ZT0nJHt0b2RheURhdGV9JyAvPgogIDwvZGl2PgoKICA8ZGl2IGNsYXNzPSJmbGV4LWNvbCBtdC0yMCI+CiAgICA8bGFiZWwgZm9yPSIke2lkfSI+U2lnbmF0dXJlIG9mIEFwcGxpY2FudCdzIDo8L2xhYmVsPgogICAgPGRpdiBjbGFzcz0ibXQtMTAiPgogICAgICA8YnV0dG9uIGZvcj0iY2xlYXItc2lnbiIgY29udHJvbD0iJHtpZH0iPng8L2J1dHRvbj4KICAgICAgPGNhbnZhcwogICAgICAgIHJlcXVpcmVkCiAgICAgICAgZm9yPSJzaWduIgogICAgICAgIG5hbWU9IiR7aWR9IgogICAgICAgIGlkPSIke2lkfSIKICAgICAgPjwvY2FudmFzPgogICAgPC9kaXY+CiAgPC9kaXY+YDsKCglyZXR1cm4gY3RuOwp9CgpmdW5jdGlvbiBjcmVhdGVJbnB1dEdycChmb3JtKSB7Cgljb25zdCBpbnB1dEdycCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwoJaW5wdXRHcnAuY2xhc3NMaXN0LmFkZCgiaW5wdXQtZ3JvdXAiKTsKCglmb3IgKGNvbnN0IGZvcm1FbCBvZiBmb3JtKSB7CgkJY29uc3QgaW5wdXRFbCA9IGNyZWF0ZUlucHV0RWwoZm9ybUVsKTsKCQlpZiAoaW5wdXRFbCkgaW5wdXRHcnAuYXBwZW5kQ2hpbGQoaW5wdXRFbCk7Cgl9CglyZXR1cm4gaW5wdXRHcnA7Cn0KCmZ1bmN0aW9uIHJlbmRlclNlY3Rpb24oc2VjdGlvbikgewoKCWNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTsKCgljb25zdCB7IGhlYWRpbmcsIGlubmVySFRNTCB9ID0gc2VjdGlvbjsKCS8vY29uc3QgZGF0ZVNpZ25Gb290ZXIgPSBzZWN0aW9uWyJkYXRlLXNpZ25hdHVyZS1mb290ZXIiXTsKCWNvbnN0IHN1YlNlY3Rpb25zID0gc2VjdGlvblsic3ViLXNlY3Rpb25zIl07CgoJY29uc3QgaGVhZGluZ0VMID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaDIiKTsKCWhlYWRpbmdFTC5pbm5lclRleHQgPSBoZWFkaW5nOwoJaWYgKGhlYWRpbmcpIGNvbnRhaW5lci5hcHBlbmRDaGlsZChoZWFkaW5nRUwpOwoKCWlmIChpbm5lckhUTUwpIHsKCQljb25zdCB0ZW1wID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgkJdGVtcC5pbm5lckhUTUwgPSBpbm5lckhUTUw7CgkJY29udGFpbmVyLmFwcGVuZCh0ZW1wKTsKCX0KCglpZiAoc3ViU2VjdGlvbnMpCgkJZm9yIChjb25zdCBzdWJTZWN0aW9uIG9mIHN1YlNlY3Rpb25zKSB7CgkJCWNvbnN0IHN1YkhlYWRpbmcgPSBzdWJTZWN0aW9uWyJzdWItaGVhZGluZyJdOwoJCQlpZiAoc3ViSGVhZGluZyAhPSAnQm9va2luZyBBbW91bnQgRGV0YWlsczonKSB7CgoJCQkJY29uc3QgY3RuTG9jYWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCQkJCWlmIChzdWJTZWN0aW9uLmlkKSBjdG5Mb2NhbC5zZXRBdHRyaWJ1dGUoImlkIiwgc3ViU2VjdGlvbi5pZCk7CgoJCQkJY29uc3Qgc3ViSGVhZGluZ0VsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaDMiKTsKCQkJCXN1YkhlYWRpbmdFbC5pbm5lclRleHQgPSBzdWJIZWFkaW5nOwoJCQkJY3RuTG9jYWwuYXBwZW5kQ2hpbGQoc3ViSGVhZGluZ0VsKTsKCQkJCWlmIChzdWJTZWN0aW9uLmNsYXNzKSBzdWJIZWFkaW5nRWwuY2xhc3NMaXN0LmFkZChzdWJTZWN0aW9uLmNsYXNzKTsKCgkJCQljb25zdCBmb3JtID0gc3ViU2VjdGlvblsiZm9ybSJdOwoKCQkJCWlmIChmb3JtKSB7CgkJCQkJY29uc3QgaW5wdXRHcnAgPSBjcmVhdGVJbnB1dEdycChmb3JtKTsKCQkJCQlpbnB1dEdycC5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgImFwcGxpY2FudF9pbnB1dGdyb3VwIik7CgkJCQkJaWYgKGlucHV0R3JwKSBjdG5Mb2NhbC5hcHBlbmRDaGlsZChpbnB1dEdycCk7CgkJCQl9CgoJCQkJY29uc3QgbGlzdCA9IHN1YlNlY3Rpb25bImxpc3QiXTsKCQkJCWlmIChsaXN0KSB7CgkJCQkJY29uc3Qgb2wgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJvbCIpOwoJCQkJCWZvciAoY29uc3QgaXRlbSBvZiBsaXN0KSB7CgkJCQkJCWNvbnN0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGkiKTsKCQkJCQkJbGkuaW5uZXJIVE1MID0gaXRlbTsKCQkJCQkJb2wuYXBwZW5kKGxpKTsKCQkJCQl9CgoJCQkJCWN0bkxvY2FsLmFwcGVuZENoaWxkKG9sKTsKCQkJCX0KCgkJCQljb25zdCBmaWxlVXBsb2FkcyA9IHN1YlNlY3Rpb25bImZpbGUtdXBsb2FkIl07CgkJCQlpZiAoZmlsZVVwbG9hZHMgJiYgZmlsZVVwbG9hZHMubGVuZ3RoICE9PSAwKSB7CgkJCQkJY29uc3QgaDQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJoNCIpOwoJCQkJCWg0LmlubmVyVGV4dCA9ICJLWUMgdXBsb2FkIjsKCQkJCQljb25zdCBjdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCQkJCQljdG4uY2xhc3NMaXN0LmFkZCgibWItNTAiKTsKCQkJCQloNC5jbGFzc0xpc3QuYWRkKCJreWMtdXBsb2FkIik7CgoJCQkJCWZvciAoY29uc3QgZmlsZSBvZiBmaWxlVXBsb2FkcykgewoJCQkJCQljb25zdCBmaWxlQ3RuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgkJCQkJCWZpbGVDdG4uY2xhc3NMaXN0LmFkZCgiZmlsZS11cGxvYWQiKTsKCgkJCQkJCWNvbnN0IGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGFiZWwiKTsKCQkJCQkJbGFiZWwuaW5uZXJUZXh0ID0gZmlsZS5maWxlOwoKCQkJCQkJY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpOwoJCQkJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoInR5cGUiLCAiZmlsZSIpOwoJCQkJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoIm5hbWUiLCBmaWxlLmtleSk7CgoJCQkJCQlmaWxlQ3RuLmFwcGVuZChsYWJlbCwgaW5wdXQpOwoKCQkJCQkJY3RuLmFwcGVuZChmaWxlQ3RuKTsKCQkJCQl9CgoJCQkJCWNvbnN0IGxheWVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgkJCQkJbGF5ZXIuYXBwZW5kKGg0LCBjdG4pOwoJCQkJCWN0bkxvY2FsLmFwcGVuZChsYXllcik7CgkJCQl9CgoJCQkJY29udGFpbmVyLmFwcGVuZChjdG5Mb2NhbCk7CgkJCX0KCQl9CgoJY29uc3QgZm9ybSA9IHNlY3Rpb25bImZvcm0iXTsKCWlmIChmb3JtKSB7CgkJY29uc3QgaW5wdXRHcnAgPSBjcmVhdGVJbnB1dEdycChmb3JtKTsKCQljb250YWluZXIuYXBwZW5kQ2hpbGQoaW5wdXRHcnApOwoJfQoKCWlmIChzZWN0aW9uLmhlYWRpbmcgPT09ICJBcHBsaWNhdGlvbiBEZXRhaWxzIikgewoJCXZhciBoZWFkQWRkQXBwbGljYW50QnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgkJaGVhZEFkZEFwcGxpY2FudEJ0bi5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgImFkZF9hcHBsaWNhbnRfY29udGlhbmVyIik7CgkJdmFyIGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsKCQl2YXIgdGV4dCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCJBREQgQVBQTElDQU5UIik7CgkJYnV0dG9uLmFwcGVuZENoaWxkKHRleHQpOwoJCWJ1dHRvbi5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgImFkZF9hcHBsaWNhbnRfYnV0dG9uIGhpZGRlbiIpOwoJCWJ1dHRvbi5zZXRBdHRyaWJ1dGUoImlkIiwgImFkZF9hcHBsaWNhbnRfYWN0aW9uIik7CgkJaGVhZEFkZEFwcGxpY2FudEJ0bi5hcHBlbmRDaGlsZChidXR0b24pOwoJCWNvbnRhaW5lci5hcHBlbmRDaGlsZChoZWFkQWRkQXBwbGljYW50QnRuKTsKCX0KCglsZXQgaXNDb25jZW50ID0gdHJ1ZTsKCWNvbnN0IGZpcl9wRGF0YSA9IHNjaGVtYVsiZmlyc3QtcGFnZSJdOwoKCWlmIChmaXJfcERhdGEpIHsKCQljb25zdCBmb3JtRGF0YSA9IGZpcl9wRGF0YVsiY29uc2VudGZvcm0iXTsgICAgIC8vIFRvIGJlIHVuY29tbWVudGVkCgkJLy8gY29uc3QgZm9ybURhdGEgPSB0cnVlOyAgICAgLy8gVG8gYmUgY29tbWVudGVkCgoJCWlmICghZm9ybURhdGEgfHwgZm9ybURhdGEgPT09ICJmYWxzZSIpIHsKCQkJaXNDb25jZW50ID0gZmFsc2U7CgkJfQoKCX0KCgkvLwoJY29uc3QgdmFsaWRDb25zZW50QW5kUXVvdCA9ICgpID0+IHsKCQljb25zdCBjaGVja2JveGVzID0gW107CgkJaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmV2aWV3LWJ0bicpKSB7CgkJCWNoZWNrYm94ZXMucHVzaChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29uc2VudENoZWNrJykpOwoJCX0KCQlpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3F1b3RhdGlvbi1idG4nKSkgewoJCQljaGVja2JveGVzLnB1c2goZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3F1b3QtY29uc2VudENoZWNrJykpOwoJCX0KCQlyZXR1cm4gY2hlY2tib3hlcy5ldmVyeShjaGVja2JveCA9PiBjaGVja2JveC5jaGVja2VkID09IHRydWUpOwoJfQoKCWNvbnN0IGVuYWJsZVN1Ym1pdEJ1dHRvbnMgPSAoKSA9PiB7CgkJLy9wcmV2aWV3QnV0dG9uLnNldEF0dHJpYnV0ZSgiY2xhc3MiLCAiZ3JlZW4iKTsKCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZm9ybS1idG4iKS5yZW1vdmVBdHRyaWJ1dGUoImRpc2FibGVkIik7CgkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInNpZ24tYnV0dG9uIikucmVtb3ZlQXR0cmlidXRlKCJkaXNhYmxlZCIpOwoJCS8vZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLmZhLWNoZWNrLWNpcmNsZSIpLmNsYXNzTGlzdC5yZW1vdmUoImhpZGRlbiIpOwoJCS8vcHJldmlld2ZhSWNvbi5jbGFzc0xpc3QucmVtb3ZlKCJoaWRkZW4iKTsKCX0KCgljb25zdCBkaXNhYmxlU3VibWl0QnV0dG9ucyA9ICgpID0+IHsKCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZm9ybS1idG4iKS5zZXRBdHRyaWJ1dGUoImRpc2FibGVkIiwgdHJ1ZSk7CgkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInNpZ24tYnV0dG9uIikuc2V0QXR0cmlidXRlKCJkaXNhYmxlZCIsIHRydWUpOwoJfQoJLy8gQWRkIFF1b3RhdGlvbiBQcmV2aWV3IEJ1dHRvbgoJaWYgKHNlY3Rpb24ucXVvdGFpb24gJiYgZmlyX3BEYXRhWydxdW90YXRpb25wZGYnXSkgewoJCWNvbnN0IHF1b3RhdGlvbkJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIpOwoJCXF1b3RhdGlvbkJ1dHRvbi5zZXRBdHRyaWJ1dGUoImlkIiwgInF1b3RhdGlvbi1idG4iKTsKCQlxdW90YXRpb25CdXR0b24uY2xhc3NMaXN0LmFkZCgnaGlkZGVuJywgJ2J0bi1jb21tb24nKTsKCQkvLyBwcmV2aWV3QnV0dG9uLnNldEF0dHJpYnV0ZSgiY2xhc3MiLCAiaGlkZGVuIik7CgkJcXVvdGF0aW9uQnV0dG9uLnNldEF0dHJpYnV0ZSgidHlwZSIsICJidXR0b24iKTsKCQlxdW90YXRpb25CdXR0b24uaW5uZXJUZXh0ID0gJ1ByZXZpZXcgUXVvdGF0aW9uJzsKCgkJLy8gdmFyIHByZXZpZXdmYUljb24gPSAnPGkgY2xhc3M9ImZhIGZhLWNoZWNrLWNpcmNsZSBoaWRkZW4iIGFyaWEtaGlkZGVuPSJ0cnVlIj48L2k+JzsKCgkJY29uc3QgaGVhZEFkZEFwcGxpY2FudHByZXZpZXcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCQloZWFkQWRkQXBwbGljYW50cHJldmlldy5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgImFwcGxpY2F0bl9wcmV2aWV3Iik7CgkJaGVhZEFkZEFwcGxpY2FudHByZXZpZXcuaW5uZXJUZXh0ID0gc2VjdGlvbi5xdW90YWlvbjsKCQljb250YWluZXIuYXBwZW5kQ2hpbGQoaGVhZEFkZEFwcGxpY2FudHByZXZpZXcpOwoJCWNvbnRhaW5lci5hcHBlbmRDaGlsZChxdW90YXRpb25CdXR0b24pOwoKCQkvLyBGb3IgUXVvdGF0aW9uIEZvcm0KCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncXVvdC1hY2NlcHRDb25zZW50JykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHsKCQkJbGV0IGNoZWNrYm94ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3F1b3QtY29uc2VudENoZWNrJyk7CgoJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncXVvdC1jb25zZW50Q2hlY2snKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkgewoJCQkJaWYgKGV2ZW50LnRhcmdldC5jaGVja2VkKSB7CgkJCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3F1b3QtYWNjZXB0VGV4dCcpLmNsYXNzTGlzdC5yZW1vdmUoJ3JlZEFsZXJ0Jyk7CgkJCQl9CgkJCQllbHNlIHsKCQkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncXVvdC1hY2NlcHRUZXh0JykuY2xhc3NMaXN0LmFkZCgncmVkQWxlcnQnKTsKCQkJCX0KCQkJfSk7CgkJCWlmIChjaGVja2JveC5jaGVja2VkKSB7CgkJCQlpZiAodmFsaWRDb25zZW50QW5kUXVvdCgpKSB7CgkJCQkJZW5hYmxlU3VibWl0QnV0dG9ucygpOwoJCQkJfQoJCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3F1b3QtYWNjZXB0VGV4dCcpLmNsYXNzTGlzdC5yZW1vdmUoJ3JlZEFsZXJ0Jyk7CgkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncXVvdC1jb25zZW50LWRpYWxvZycpLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpOwoJCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3F1b3RhdGlvbi1idG4nKS5jbGFzc0xpc3QuYWRkKCdjb25zZW50LXZlcmlmaWVkJyk7CgkJCX0gZWxzZSB7CgkJCQlkaXNhYmxlU3VibWl0QnV0dG9ucygpOwoJCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3F1b3QtYWNjZXB0VGV4dCcpLmNsYXNzTGlzdC5hZGQoJ3JlZEFsZXJ0Jyk7CgkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncXVvdGF0aW9uLWJ0bicpLmNsYXNzTGlzdC5yZW1vdmUoJ2NvbnNlbnQtdmVyaWZpZWQnKTsKCQkJfQoJCX0pOwoKCX0KCWlmIChzZWN0aW9uLnByZXZpZXcgJiYgaXNDb25jZW50KSB7CgkJY29uc3QgcHJldmlld0J1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIpOwoJCXByZXZpZXdCdXR0b24uc2V0QXR0cmlidXRlKCJpZCIsICJwcmV2aWV3LWJ0biIpOwoJCS8vIHByZXZpZXdCdXR0b24uc2V0QXR0cmlidXRlKCJjbGFzcyIsICJoaWRkZW4iKTsKCQlwcmV2aWV3QnV0dG9uLnNldEF0dHJpYnV0ZSgidHlwZSIsICJidXR0b24iKTsKCQlwcmV2aWV3QnV0dG9uLmlubmVyVGV4dCA9ICdQcmV2aWV3IENvbnNlbnQnOwoKCQljb25zdCBwcmV2aWV3ZmFJY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaSIpOwoJCXByZXZpZXdmYUljb24uc2V0QXR0cmlidXRlKCJpZCIsICJwcmV2aWV3LWJ0bi1pY29uIik7CgkJcHJldmlld2ZhSWNvbi5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgImZhIGZhLWNoZWNrLWNpcmNsZSBoaWRkZW4iKTsKCQlwcmV2aWV3ZmFJY29uLnNldEF0dHJpYnV0ZSgiYXJpYS1oaWRkZW4iLCB0cnVlKTsKCgkJLy8gdmFyIHByZXZpZXdmYUljb24gPSAnPGkgY2xhc3M9ImZhIGZhLWNoZWNrLWNpcmNsZSBoaWRkZW4iIGFyaWEtaGlkZGVuPSJ0cnVlIj48L2k+JzsKCgkJdmFyIGhlYWRBZGRBcHBsaWNhbnRwcmV2aWV3ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgkJaGVhZEFkZEFwcGxpY2FudHByZXZpZXcuc2V0QXR0cmlidXRlKCJjbGFzcyIsICJhcHBsaWNhdG5fcHJldmlldyIpOwoJCWhlYWRBZGRBcHBsaWNhbnRwcmV2aWV3LmlubmVyVGV4dCA9IHNlY3Rpb24ucHJldmlldzsKCQljb250YWluZXIuYXBwZW5kQ2hpbGQoaGVhZEFkZEFwcGxpY2FudHByZXZpZXcpOwoJCWNvbnRhaW5lci5hcHBlbmRDaGlsZChwcmV2aWV3QnV0dG9uKTsKCQljb250YWluZXIuYXBwZW5kQ2hpbGQocHJldmlld2ZhSWNvbik7CgoKCQlwcmV2aWV3QnV0dG9uLm9uY2xpY2sgPSBmdW5jdGlvbiAoZSkgewoKCQkJLy8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRlcicpLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGVMb2FkZXInKTsKCgkJCWUucHJldmVudERlZmF1bHQoKTsKCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnNlbnQtZGlhbG9nJykuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZUNvbnNlbnQnKTsKCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RpYWxvZy1jb250ZW50JykuaW5uZXJIVE1MID0gZmlsbEFsb3RlZXNEYXRhKCk7CgkJCS8vIGZpbGxwZGZDb250ZW50KHRydWUpLnRoZW4ocmVzID0+IHsKCQkJLy8gCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkZXInKS5jbGFzc0xpc3QuYWRkKCdoaWRlTG9hZGVyJyk7CgkJCS8vIH0pLmNhdGNoKGVyciA9PiB7CgkJCS8vIAlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZGVyJykuY2xhc3NMaXN0LmFkZCgnaGlkZUxvYWRlcicpOwoJCQkvLyB9KQoKCQl9CgoJCS8vIFZhbGlkIGNvbnNlbnQgYW5kIHF1b3RhdGlvbiBmb3JtCgoKCQkvLyBGb3IgQ29uc2VudCBGb3JtCgkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FjY2VwdENvbnNlbnQnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkgewoJCQlsZXQgY2hlY2tib3ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29uc2VudENoZWNrJyk7CgoJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29uc2VudENoZWNrJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHsKCQkJCWlmIChldmVudC50YXJnZXQuY2hlY2tlZCkgewoJCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhY2NlcHRUZXh0JykuY2xhc3NMaXN0LnJlbW92ZSgncmVkQWxlcnQnKTsKCQkJCX0KCQkJCWVsc2UgewoJCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhY2NlcHRUZXh0JykuY2xhc3NMaXN0LmFkZCgncmVkQWxlcnQnKTsKCQkJCX0KCQkJfSk7CgoKCQkJaWYgKGNoZWNrYm94LmNoZWNrZWQpIHsKCQkJCWlmICh2YWxpZENvbnNlbnRBbmRRdW90KCkpIHsKCQkJCQllbmFibGVTdWJtaXRCdXR0b25zKCk7CgkJCQl9CgkJCQkvLyBFbmFibGUgYnV0dG9uCgkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWNjZXB0VGV4dCcpLmNsYXNzTGlzdC5yZW1vdmUoJ3JlZEFsZXJ0Jyk7CgkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29uc2VudC1kaWFsb2cnKS5jbGFzc0xpc3QuYWRkKCdoaWRlQ29uc2VudCcpOwoJCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByZXZpZXctYnRuJykuY2xhc3NMaXN0LmFkZCgnY29uc2VudC12ZXJpZmllZCcpOwoJCQl9IGVsc2UgewoJCQkJZGlzYWJsZVN1Ym1pdEJ1dHRvbnMoKTsKCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhY2NlcHRUZXh0JykuY2xhc3NMaXN0LmFkZCgncmVkQWxlcnQnKTsKCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmV2aWV3LWJ0bicpLmNsYXNzTGlzdC5yZW1vdmUoJ2NvbnNlbnQtdmVyaWZpZWQnKTsKCQkJfQoJCX0pOwoKCX0KCgoKCXJldHVybiBjb250YWluZXI7Cn0KCi8vIGFrIApmdW5jdGlvbiBmaWxsQWxvdGVlc0RhdGEoKSB7CgoJbGV0IGlzQ29uY2VudCA9IHRydWU7Cgljb25zdCBmaXJfcERhdGEgPSBzY2hlbWFbImZpcnN0LXBhZ2UiXTsKCglsZXQgbXlxdW90YXRpb25QRGYgPSAiIjsKCWlmIChmaXJfcERhdGEpIHsKCQljb25zdCBmb3JtRGF0YSA9IGZpcl9wRGF0YVsiY29uc2VudGZvcm0iXTsgICAgIC8vIFRvIGJlIHVuY29tbWVudGVkCgkJLy8gY29uc3QgZm9ybURhdGEgPSB0cnVlOyAgICAgLy8gVG8gYmUgY29tbWVudGVkCgoJCWlmICghZm9ybURhdGEgfHwgZm9ybURhdGEgPT09ICJmYWxzZSIpIHsKCQkJaXNDb25jZW50ID0gZmFsc2U7CgkJfQoKCX0KCWNvbnN0IG15cHJldmlld0RldGFpbHMgPSBjcmVhdGVGdW5jdGlvbkRhdGEoKTsKCWxldCBhbGxvdGVlcyA9IG15cHJldmlld0RldGFpbHMuYXBwbGljYW50czsKCglsZXQgbmFtZXMgPSAnJzsKCWxldCBzaWduTGluZXMgPSAnJzsKCWxldCBjb3VudCA9IDE7CglsZXQgY291bnRTdHIgPSAnJzsKCWNvbnN0IHRvd2VyTmFtZSA9IHNjaGVtYVsnZmlyc3QtcGFnZSddWydmb3JtJ11bMV1bJ2RlZmF1bHRWYWx1ZSddCgljb25zdCB1bml0Tm8gPSB0b3dlck5hbWUgKyAnLScgKyBzY2hlbWFbJ2ZpcnN0LXBhZ2UnXVsnZm9ybSddWzJdWydkZWZhdWx0VmFsdWUnXTsKCWxldCB1bml0Tm9TdHIgPSAnJzsKCglmb3IgKGxldCBhbGxvdGVlIG9mIGFsbG90ZWVzKSB7CgkJbmFtZXMgKz0gYDxwPiR7YWxsb3RlZS5kYXRhLm5hbWV9PC9wPmA7CgkJdW5pdE5vU3RyICs9IGA8cD4ke3VuaXROb308L3A+YDsKCQlzaWduTGluZXMgKz0gYDxwPiR7Y291bnR9PC9wPmA7CgkJY291bnRTdHIgKz0gYDxwPiR7Y291bnR9PC9wPmA7CgkJY291bnQrKzsKCX0KCWlmICghaXNDb25jZW50KSB7CgkJZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLmNvbmNlbnRfbWFpbnNlYyIpLmNsYXNzTGlzdC5hZGQoImhpZGRlbiIpOwoJCXJldHVybiAnJzsKCX0gZWxzZSB7CgkJdHJ5IHsKCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FsbG90ZWVOYW1lJykuaW5uZXJIVE1MID0gbmFtZXM7CgkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhbGxvdGVlU2lnbicpLmlubmVySFRNTCA9IHNpZ25MaW5lczsKCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZsYXRObycpLmlubmVySFRNTCA9IHVuaXROb1N0cjsKCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FsbG90ZWVTck5vJykuaW5uZXJIVE1MID0gY291bnRTdHI7CgkJfSBjYXRjaCAoZXJyb3IpIHsKCgkJfQoJCS8vZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLmNvbmNlbnRfbWFpbnNlYyIpLmNsYXNzTGlzdC5yZW1vdmUoImhpZGRlbiIpOwoJCXJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29uY2VudF9tYWluc2VjJykuaW5uZXJIVE1MOwoJfQp9CgpmdW5jdGlvbiBoYXNTb21lUGFyZW50VGhlQ2xhc3MoZWxlbWVudCwgY2xhc3NuYW1lKSB7CglpZiAoZWxlbWVudC5jbGFzc05hbWUuc3BsaXQoIiAiKS5pbmRleE9mKGNsYXNzbmFtZSkgPj0gMCkgcmV0dXJuIGVsZW1lbnQ7CglyZXR1cm4gKAoJCWVsZW1lbnQucGFyZW50Tm9kZSAmJiBoYXNTb21lUGFyZW50VGhlQ2xhc3MoZWxlbWVudC5wYXJlbnROb2RlLCBjbGFzc25hbWUpCgkpOwp9CgpmdW5jdGlvbiBoYXNTb21lQ2hpbGROb2RlKGVsZW1lbnQsIGNsYXNzbmFtZSkgewoJY29uc3QgbXljaGlsZCA9IGVsZW1lbnQuY2hpbGROb2RlczsKCWlmIChteWNoaWxkKSB7CgkJZm9yIChsZXQgaSA9IDA7IGkgPCBteWNoaWxkLmxlbmd0aDsgaSsrKSB7CgkJCWlmIChteWNoaWxkW2ldLm5vZGVOYW1lID09IGNsYXNzbmFtZSkgewoJCQkJcmV0dXJuIG15Y2hpbGRbaV07CgkJCX0KCQl9Cgl9Cn0KCmZ1bmN0aW9uIGhhc1NvbWVTaWJsaW5nVGhlQ2xhc3MoZWxlbWVudCwgY2xhc3NuYW1lKSB7CglpZiAoZWxlbWVudC5jbGFzc05hbWUuc3BsaXQoIiAiKS5pbmRleE9mKGNsYXNzbmFtZSkgPj0gMCkgcmV0dXJuIGVsZW1lbnQ7CglyZXR1cm4gKAoJCWVsZW1lbnQucHJldmlvdXNFbGVtZW50U2libGluZyAmJgoJCWhhc1NvbWVTaWJsaW5nVGhlQ2xhc3MoZWxlbWVudC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLCBjbGFzc25hbWUpCgkpOwp9CgpmdW5jdGlvbiBoYXNTb21lTmV4dFNpYmxpbmdUaGVDbGFzcyhlbGVtZW50LCBjbGFzc25hbWUpIHsKCWlmIChlbGVtZW50LmNsYXNzTmFtZS5zcGxpdCgiICIpLmluZGV4T2YoY2xhc3NuYW1lKSA+PSAwKSByZXR1cm4gZWxlbWVudDsKCXJldHVybiAoCgkJZWxlbWVudC5uZXh0RWxlbWVudFNpYmxpbmcgJiYKCQloYXNTb21lU2libGluZ1RoZUNsYXNzKGVsZW1lbnQubmV4dEVsZW1lbnRTaWJsaW5nLCBjbGFzc25hbWUpCgkpOwp9CgpmdW5jdGlvbiByZW5kZXJhbGxBYm91dFNlY3Rpb24oU2VjdGlvbikgewoJY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpOwoJLy9jb25zdCBkYXRlU2lnbkZvb3RlciA9IFNlY3Rpb25bImRhdGUtc2lnbmF0dXJlLWZvb3RlciJdOwoKCWxldCBzdWJTZWN0aW9uID0gU2VjdGlvblsic3ViLXNlY3Rpb25zIl07CglzdWJTZWN0aW9uID0gc3ViU2VjdGlvbltzdWJTZWN0aW9uLmxlbmd0aCAtIDFdOwoJY29uc3Qgc3ViSGVhZGluZyA9IHN1YlNlY3Rpb25bInN1Yi1oZWFkaW5nIl07CgoJY29uc3QgY3RuTG9jYWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCWlmIChzdWJTZWN0aW9uLmlkKSBjdG5Mb2NhbC5zZXRBdHRyaWJ1dGUoImlkIiwgc3ViU2VjdGlvbi5pZCk7CgoJY29uc3Qgc3ViSGVhZGluZ0VsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaDMiKTsKCXN1YkhlYWRpbmdFbC5pbm5lclRleHQgPSBzdWJIZWFkaW5nOwoJY3RuTG9jYWwuYXBwZW5kQ2hpbGQoc3ViSGVhZGluZ0VsKTsKCWlmIChzdWJTZWN0aW9uLmNsYXNzKSBzdWJIZWFkaW5nRWwuY2xhc3NMaXN0LmFkZChzdWJTZWN0aW9uLmNsYXNzKTsKCgljb25zdCBmb3JtID0gc3ViU2VjdGlvblsiZm9ybSJdOwoKCWNvbnN0IGlucHV0R3JwID0gY3JlYXRlSW5wdXRHcnAoZm9ybSk7CglpbnB1dEdycC5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgImFwcGxpY2FudF9pbnB1dGdyb3VwIik7CglpZiAoaW5wdXRHcnApIGN0bkxvY2FsLmFwcGVuZENoaWxkKGlucHV0R3JwKTsKCgljb25zdCBsaXN0ID0gc3ViU2VjdGlvblsibGlzdCJdOwoJaWYgKGxpc3QpIHsKCQljb25zdCBvbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9sIik7CgkJZm9yIChjb25zdCBpdGVtIG9mIGxpc3QpIHsKCQkJY29uc3QgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsaSIpOwoJCQlsaS5pbm5lckhUTUwgPSBpdGVtOwoJCQlvbC5hcHBlbmQobGkpOwoJCX0KCgkJY3RuTG9jYWwuYXBwZW5kQ2hpbGQob2wpOwoJfQoKCWNvbnRhaW5lci5hcHBlbmQoY3RuTG9jYWwpOwoKCS8vIGlmIChkYXRlU2lnbkZvb3RlcikgewoJLy8gICBsZXQgZnRfaWQgPSAiIjsKCS8vICAgaWYgKHN1YkhlYWRpbmcpIHsKCS8vICAgICBmdF9pZCA9IHN1YkhlYWRpbmcudG9Mb3dlckNhc2UoKS5yZXBsYWNlQWxsKCIgIiwgIiIpOwoJLy8gICB9IGVsc2UgewoJLy8gICAgIGZ0X2lkID0gIiQiICsgbmV3IERhdGUoKS5nZXRVVENNaWxsaXNlY29uZHMoKSAqIE1hdGgucmFuZG9tKCk7CgkvLyAgIH0KCS8vICAgY29udGFpbmVyLmFwcGVuZChjcmVhdGVEYXRlU2lnbkZvb3RlcihmdF9pZCkpOwoJLy8gfQoKCXJldHVybiBjb250YWluZXI7Cn0KbGV0IHBheW1lbnRfc291cmNlX2NoZWNrID0gJ2NoZXF1ZSc7CmxldCBwYXltZW50U291cmNlQ291bnQgPSAwOwpmdW5jdGlvbiByZW5kZXJib29raW5nQW1vdW50U2VjdGlvbihTZWN0aW9uKSB7CglwYXltZW50U291cmNlQ291bnQrKzsKCWNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTsKCS8vY29uc3QgZGF0ZVNpZ25Gb290ZXIgPSBTZWN0aW9uWyJkYXRlLXNpZ25hdHVyZS1mb290ZXIiXTsKCWxldCBzdWJTZWN0aW9uID0gU2VjdGlvblsic3ViLXNlY3Rpb25zIl07CglzdWJTZWN0aW9uID0gc3ViU2VjdGlvbltzdWJTZWN0aW9uLmxlbmd0aCAtIDFdOwoJY29uc3Qgc3ViSGVhZGluZyA9IHN1YlNlY3Rpb25bInN1Yi1oZWFkaW5nIl07CgoJY29uc3QgY3RuTG9jYWxHbG9iYWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCWN0bkxvY2FsR2xvYmFsLnNldEF0dHJpYnV0ZSgiaWQiLCBgZ2xvYmFsLXJvdy0ke3BheW1lbnRTb3VyY2VDb3VudH1gKTsKCgljb25zdCBjdG5Mb2NhbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwoJY3RuTG9jYWwuc2V0QXR0cmlidXRlKCJpZCIsIGBoZWFkZXItcm93LSR7cGF5bWVudFNvdXJjZUNvdW50fWApOwoJaWYgKHN1YlNlY3Rpb24uaWQpIGN0bkxvY2FsLnNldEF0dHJpYnV0ZSgiaWQiLCBzdWJTZWN0aW9uLmlkKTsKCgljb25zdCBzdWJIZWFkaW5nRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJoMyIpOwoJc3ViSGVhZGluZ0VsLmlubmVyVGV4dCA9IHN1YkhlYWRpbmc7CgljdG5Mb2NhbC5hcHBlbmRDaGlsZChzdWJIZWFkaW5nRWwpOwoJaWYgKHN1YlNlY3Rpb24uY2xhc3MpIHN1YkhlYWRpbmdFbC5jbGFzc0xpc3QuYWRkKHN1YlNlY3Rpb24uY2xhc3MpOwoKCWNvbnN0IGZvcm0gPSBzdWJTZWN0aW9uWyJmb3JtIl07CgoJY29uc3QgaW5wdXRHcnAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCWlucHV0R3JwLmNsYXNzTGlzdC5hZGQoImlucHV0LWdyb3VwIik7CglsZXQgcGF5bWVudF9jaGVja190b2dnbGUgPSAnJzsKCWxldCBwYXltZW50X3NvdXJjZV91cGxvYWQgPSAnJwoJbGV0IHBheW1lbnRfc291cmNlID0gJyc7CglsZXQgbmV4dGZvcm1FbCA9ICcnOwoJbGV0IHBheW1lbnRfc291cmNlX2JhbmsgPSAnJzsKCWZvciAoY29uc3QgZm9ybUVsIG9mIGZvcm0pIHsKCQlpZiAoZm9ybUVsWyd0eXBlJ10gPT0gJ2NoZWNrYm94JykgewoJCQlwYXltZW50X2NoZWNrX3RvZ2dsZSA9IHBheW1lbnRFZGl0Q2hlY2soZm9ybUVsWydsYWJlbCddLCBmb3JtRWxbJ2lkJ10sIHN1YlNlY3Rpb25bImZvcm0iXSwgcGF5bWVudFNvdXJjZUNvdW50KTsKCQl9IGVsc2UgaWYgKGZvcm1FbFsndHlwZSddID09ICdmaWxlJykgewoJCQlwYXltZW50X3NvdXJjZV91cGxvYWQgPSB1cGxvYWRQYXltZW50U291cmNlKGZvcm1FbFsnbGFiZWwnXSwgZm9ybUVsWydpZCddLCBmb3JtRWwsIHBheW1lbnRTb3VyY2VDb3VudCk7CgkJfSBlbHNlIGlmIChmb3JtRWxbJ3R5cGUnXSA9PSAnc2VsZWN0JyAmJiAhZm9ybUVsWydpc2JhbmsnXSkgewoJCQluZXh0Zm9ybUVsID0gZm9ybUVsCgkJCXBheW1lbnRfc291cmNlID0gYWRkUGF5ZW1lbnRTb3VyY2UoZm9ybUVsWydsYWJlbCddLCBmb3JtRWxbJ2lkJ10sIGZvcm1FbCwgcGF5bWVudFNvdXJjZUNvdW50KTsKCQl9CgkJZWxzZSBpZiAoZm9ybUVsWyd0eXBlJ10gPT0gJ3NlbGVjdCcgJiYgZm9ybUVsWydpc2JhbmsnXSkgewoJCQlwYXltZW50X3NvdXJjZV9iYW5rID0gYWRkQmFua1NvdXJjZShmb3JtRWxbJ2xhYmVsJ10sIGZvcm1FbFsnaWQnXSwgZm9ybUVsLCBwYXltZW50U291cmNlQ291bnQsIGZvcm1FbFsna2V5J10pOwoJCX0KCQllbHNlIHsKCQkJY29uc3QgaW5wdXRFbCA9IGNyZWF0ZUlucHV0RWxCb29raW5nKGZvcm1FbCwgcGF5bWVudFNvdXJjZUNvdW50KTsKCQkJaWYgKGlucHV0RWwpIHsKCQkJCWlucHV0R3JwLmFwcGVuZENoaWxkKGlucHV0RWwpOwoJCQl9CgkJfQoJfQoJLy8gY29uc3QgaW5wdXRHcnAgPSBjcmVhdGVJbnB1dEdycChmb3JtKTsKCWlucHV0R3JwLnNldEF0dHJpYnV0ZSgiY2xhc3MiLCAiYXBwbGljYW50X2lucHV0Z3JvdXAiKTsKCS8vIGFkZCBlZGl0IHRvZ2dsZSBidXR0b25pZgoJaWYgKHBheW1lbnRfY2hlY2tfdG9nZ2xlKSBjdG5Mb2NhbEdsb2JhbC5hcHBlbmQocGF5bWVudF9jaGVja190b2dnbGUpOwoKCWlmIChwYXltZW50X3NvdXJjZV91cGxvYWQpIGlucHV0R3JwLmluc2VydEJlZm9yZShwYXltZW50X3NvdXJjZV91cGxvYWQsIGlucHV0R3JwLmZpcnN0Q2hpbGQpOwoKCWlmIChwYXltZW50X3NvdXJjZSkgaW5wdXRHcnAuaW5zZXJ0QmVmb3JlKHBheW1lbnRfc291cmNlLCBpbnB1dEdycC5maXJzdENoaWxkKTsKCglpZiAoaW5wdXRHcnApIGN0bkxvY2FsR2xvYmFsLmFwcGVuZENoaWxkKGlucHV0R3JwKTsKCglpZiAocGF5bWVudF9zb3VyY2VfYmFuaykKCQljdG5Mb2NhbEdsb2JhbC5hcHBlbmRDaGlsZChwYXltZW50X3NvdXJjZV9iYW5rKTsKCgljdG5Mb2NhbC5hcHBlbmRDaGlsZChjdG5Mb2NhbEdsb2JhbCkKCgoJY29uc3QgbGlzdCA9IHN1YlNlY3Rpb25bImxpc3QiXTsKCWlmIChsaXN0KSB7CgkJY29uc3Qgb2wgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJvbCIpOwoJCWZvciAoY29uc3QgaXRlbSBvZiBsaXN0KSB7CgkJCWNvbnN0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGkiKTsKCQkJbGkuaW5uZXJIVE1MID0gaXRlbTsKCQkJb2wuYXBwZW5kKGxpKTsKCQl9CgoJCWN0bkxvY2FsLmFwcGVuZENoaWxkKG9sKTsKCX0KCgljb25zdCBhZGRBbm90aGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CglhZGRBbm90aGVyLnNldEF0dHJpYnV0ZSgiY2xhc3MiLCBgYWRkX2Fub3RoZXJfdGV4dCBzZWN0aW9uX3RvX2hpZGVfJHtwYXltZW50U291cmNlQ291bnR9YCk7CglhZGRBbm90aGVyLmlubmVyVGV4dCA9ICJBZGQgYW5vdGhlciBQYXltZW50IFNvdXJjZSI7CglpZiAoYWRkQW5vdGhlcikgY3RuTG9jYWwuYXBwZW5kQ2hpbGQoYWRkQW5vdGhlcik7CgoJY29uc3QgcGF5bWVudF9zb3VyY2UyID0gYWRkUGF5ZW1lbnRTb3VyY2UobmV4dGZvcm1FbFsnbGFiZWwnXSwgbmV4dGZvcm1FbFsnaWQnXSwgbmV4dGZvcm1FbCwgcGF5bWVudFNvdXJjZUNvdW50KTsKCWlmIChwYXltZW50X3NvdXJjZTIpIGN0bkxvY2FsLmFwcGVuZENoaWxkKHBheW1lbnRfc291cmNlMik7CgoKCWNvbnN0IGZpbGVEb2MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCWZpbGVEb2Muc2V0QXR0cmlidXRlKCJjbGFzcyIsICJkb2Nfc2VsZWN0aW9uX2NvbnRhaW5lciIpOwoJLy8gPT09PT09PT09IEFkZCBwYXltZW50IHNvdXJjZSArIGljb24gPT09PT09PQoJY29uc3QgbGFiZWxwbHVzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGFiZWwiKTsKCWxhYmVscGx1cy5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgYG90aGVyX2RvY3VtZW50cGx1cyBzZWN0aW9uX3RvX2hpZGVfJHtwYXltZW50U291cmNlQ291bnR9YCk7CglsYWJlbHBsdXMuaW5uZXJUZXh0ID0gIisiOwoJbGFiZWxwbHVzLm9uY2xpY2sgPSBmdW5jdGlvbiAoZSkgewoJCXBheW1lbnRTb3VyY2VDb3VudCsrCgkJY29uc3QgdGVzdF9kID0gdGVzdEFkZChTZWN0aW9uLCBwYXltZW50U291cmNlQ291bnQpOwoKCQljb25zdCBsYWJlbG1pbnVzZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgkJbGFiZWxtaW51c2Rpdi5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgImRvY19zZWxlY3Rpb25fY29udGFpbmVyX3JlbW92ZSIpOwoJCWNvbnN0IGxhYmVsbWludXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsYWJlbCIpOwoJCWxhYmVsbWludXMuc2V0QXR0cmlidXRlKCJjbGFzcyIsIGBvdGhlcl9kb2N1bWVudG1pbnVzYCk7CgkJbGFiZWxtaW51cy5zZXRBdHRyaWJ1dGUoImlkIiwgYHJlbW92ZV8ke3BheW1lbnRTb3VyY2VDb3VudH1gKTsKCQlsYWJlbG1pbnVzLnNldEF0dHJpYnV0ZSgiZGF0YS1pZCIsIGAke3BheW1lbnRTb3VyY2VDb3VudH1gKTsKCgkJbGFiZWxtaW51cy5pbm5lclRleHQgPSAiLSI7CgkJbGFiZWxtaW51cy5vbmNsaWNrID0gZnVuY3Rpb24gKGUpIHsKCQkJY29uc3QgaGVhZGVyU2VjID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYGhlYWRlci1zZWMtJHskKHRoaXMpLmF0dHIoJ2RhdGEtaWQnKX1gKTsKCQkJaGVhZGVyU2VjLnJlbW92ZSgpOwoJCX07CgkJbGFiZWxtaW51c2Rpdi5hcHBlbmQobGFiZWxtaW51cykKCQl0ZXN0X2QuYXBwZW5kKGxhYmVsbWludXNkaXYpCgkJaW5wdXRHcnAuYXBwZW5kKHRlc3RfZCk7Cgl9OwoJaWYgKGxhYmVscGx1cykgewoJCWZpbGVEb2MuYXBwZW5kKGxhYmVscGx1cyk7CgkJY3RuTG9jYWwuYXBwZW5kQ2hpbGQoZmlsZURvYykKCX07CgoJLy8gRW5kcyBoZXJlCgoJaWYgKHBheW1lbnRTb3VyY2VDb3VudCA+IDEpIHsKCQljb25zdCBmaWxlRG9jQWdhaW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCQlmaWxlRG9jQWdhaW4uc2V0QXR0cmlidXRlKCJjbGFzcyIsICJkb2Nfc2VsZWN0aW9uX2NvbnRhaW5lciIpOwoKCQljb25zdCBsYWJlbG1pbnVzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGFiZWwiKTsKCQlsYWJlbG1pbnVzLnNldEF0dHJpYnV0ZSgiY2xhc3MiLCBgb3RoZXJfZG9jdW1lbnRwbHVzYCk7CgkJbGFiZWxtaW51cy5zZXRBdHRyaWJ1dGUoImlkIiwgYHJlbW92ZV8ke3BheW1lbnRTb3VyY2VDb3VudH1gKTsKCQlsYWJlbG1pbnVzLmlubmVyVGV4dCA9ICItIjsKCQlsYWJlbG1pbnVzLm9uY2xpY2sgPSBmdW5jdGlvbiAoZSkgewoJCQkkKGAjbmV3X3NvdXJjZV8ke3BhcnNlSW50KCQodGhpcykuYXR0cignaWQnKS5zcGxpdCgnXycpWzFdKSAtIDF9YCkuaHRtbCgnJyk7CgkJfTsKCgkJaWYgKGxhYmVsbWludXMpIHsKCQkJZmlsZURvY0FnYWluLmFwcGVuZChsYWJlbG1pbnVzKTsKCQkJY3RuTG9jYWwuYXBwZW5kQ2hpbGQoZmlsZURvY0FnYWluKQoJCX07Cgl9CgoJY29udGFpbmVyLmFwcGVuZChjdG5Mb2NhbCk7CgoJLy8gaWYgKGRhdGVTaWduRm9vdGVyKSB7CgkvLyAgIGxldCBmdF9pZCA9ICIiOwoJLy8gICBpZiAoc3ViSGVhZGluZykgewoJLy8gICAgIGZ0X2lkID0gc3ViSGVhZGluZy50b0xvd2VyQ2FzZSgpLnJlcGxhY2VBbGwoIiAiLCAiIik7CgkvLyAgIH0gZWxzZSB7CgkvLyAgICAgZnRfaWQgPSAiJCIgKyBuZXcgRGF0ZSgpLmdldFVUQ01pbGxpc2Vjb25kcygpICogTWF0aC5yYW5kb20oKTsKCS8vICAgfQoJLy8gICBjb250YWluZXIuYXBwZW5kKGNyZWF0ZURhdGVTaWduRm9vdGVyKGZ0X2lkKSk7CgkvLyB9CgoJcmV0dXJuIGNvbnRhaW5lcjsKfQoKZnVuY3Rpb24gdGVzdEFkZChkYXRhLCBjb3VudCkgewoJbGV0IHN1YlNlY3Rpb24gPSBkYXRhWyJzdWItc2VjdGlvbnMiXTsKCXN1YlNlY3Rpb24gPSBzdWJTZWN0aW9uW3N1YlNlY3Rpb24ubGVuZ3RoIC0gMV07Cgljb25zdCBzdWJIZWFkaW5nID0gc3ViU2VjdGlvblsic3ViLWhlYWRpbmciXTsKCgljb25zdCBjdG5Mb2NhbEdsb2JhbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwoJY3RuTG9jYWxHbG9iYWwuc2V0QXR0cmlidXRlKCJpZCIsIGBnbG9iYWwtcm93LSR7Y291bnR9YCk7CgoJY29uc3QgY3RuTG9jYWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCWN0bkxvY2FsLnNldEF0dHJpYnV0ZSgiaWQiLCBgaGVhZGVyLXNlYy0ke2NvdW50fWApOwoJaWYgKHN1YlNlY3Rpb24uaWQpIGN0bkxvY2FsLnNldEF0dHJpYnV0ZSgiaWQiLCBzdWJTZWN0aW9uLmlkKTsKCgljb25zdCBzdWJIZWFkaW5nRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJoMyIpOwoJc3ViSGVhZGluZ0VsLmlubmVyVGV4dCA9IHN1YkhlYWRpbmc7CgljdG5Mb2NhbC5hcHBlbmRDaGlsZChzdWJIZWFkaW5nRWwpOwoJaWYgKHN1YlNlY3Rpb24uY2xhc3MpIHN1YkhlYWRpbmdFbC5jbGFzc0xpc3QuYWRkKHN1YlNlY3Rpb24uY2xhc3MpOwoKCWNvbnN0IGZvcm0gPSBzdWJTZWN0aW9uWyJmb3JtIl07CgoJY29uc3QgaW5wdXRHcnAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCWlucHV0R3JwLmNsYXNzTGlzdC5hZGQoImlucHV0LWdyb3VwIik7CglsZXQgcGF5bWVudF9jaGVja190b2dnbGUgPSAnJzsKCWxldCBwYXltZW50X3NvdXJjZV91cGxvYWQgPSAnJwoJbGV0IHBheW1lbnRfc291cmNlID0gJyc7CglsZXQgbmV4dGZvcm1FbCA9ICcnOwoJZm9yIChjb25zdCBmb3JtRWwgb2YgZm9ybSkgewoJCWlmIChmb3JtRWxbJ3R5cGUnXSA9PSAnY2hlY2tib3gnKSB7CgkJCXBheW1lbnRfY2hlY2tfdG9nZ2xlID0gcGF5bWVudEVkaXRDaGVjayhmb3JtRWxbJ2xhYmVsJ10sIGZvcm1FbFsnaWQnXSwgc3ViU2VjdGlvblsiZm9ybSJdLCBjb3VudCk7CgkJfSBlbHNlIGlmIChmb3JtRWxbJ3R5cGUnXSA9PSAnZmlsZScpIHsKCQkJcGF5bWVudF9zb3VyY2VfdXBsb2FkID0gdXBsb2FkUGF5bWVudFNvdXJjZShmb3JtRWxbJ2xhYmVsJ10sIGZvcm1FbFsnaWQnXSwgZm9ybUVsLCBjb3VudCk7CgkJfSBlbHNlIGlmIChmb3JtRWxbJ3R5cGUnXSA9PSAnc2VsZWN0JykgewoJCQluZXh0Zm9ybUVsID0gZm9ybUVsCgkJCXBheW1lbnRfc291cmNlID0gYWRkUGF5ZW1lbnRTb3VyY2UoZm9ybUVsWydsYWJlbCddLCBmb3JtRWxbJ2lkJ10sIGZvcm1FbCwgY291bnQpOwoJCX0gZWxzZSB7CgkJCWNvbnN0IGlucHV0RWwgPSBjcmVhdGVJbnB1dEVsQm9va2luZyhmb3JtRWwsIGNvdW50KTsKCQkJaWYgKGlucHV0RWwpIHsKCQkJCWlucHV0R3JwLmFwcGVuZENoaWxkKGlucHV0RWwpOwoJCQl9CgkJfQoJfQoJLy8gY29uc3QgaW5wdXRHcnAgPSBjcmVhdGVJbnB1dEdycChmb3JtKTsKCWlucHV0R3JwLnNldEF0dHJpYnV0ZSgiY2xhc3MiLCAiYXBwbGljYW50X2lucHV0Z3JvdXAiKTsKCS8vIGFkZCBlZGl0IHRvZ2dsZSBidXR0b25pZgoJaWYgKHBheW1lbnRfY2hlY2tfdG9nZ2xlKSBjdG5Mb2NhbEdsb2JhbC5hcHBlbmQocGF5bWVudF9jaGVja190b2dnbGUpOwoKCWlmIChwYXltZW50X3NvdXJjZV91cGxvYWQpIGlucHV0R3JwLmluc2VydEJlZm9yZShwYXltZW50X3NvdXJjZV91cGxvYWQsIGlucHV0R3JwLmZpcnN0Q2hpbGQpOwoKCWlmIChwYXltZW50X3NvdXJjZSkgaW5wdXRHcnAuaW5zZXJ0QmVmb3JlKHBheW1lbnRfc291cmNlLCBpbnB1dEdycC5maXJzdENoaWxkKTsKCglpZiAoaW5wdXRHcnApIGN0bkxvY2FsR2xvYmFsLmFwcGVuZENoaWxkKGlucHV0R3JwKTsKCgljdG5Mb2NhbC5hcHBlbmRDaGlsZChjdG5Mb2NhbEdsb2JhbCkKCXJldHVybiBjdG5Mb2NhbDsKfQoKZnVuY3Rpb24gYWRkQmFua1NvdXJjZSh0ZXh0LCBpZCwgZGF0YSwgY291bnQsIGtleSkgewoJY29uc3QgaW5wdXRDdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCWlucHV0Q3RuLmNsYXNzTGlzdC5hZGQoImlucHV0Q3RuIik7CgoJY29uc3QgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsYWJlbCIpOwoJbGFiZWwuc2V0QXR0cmlidXRlKCJmb3IiLCBpZCk7CglsYWJlbC5pbm5lclRleHQgPSB0ZXh0OwoJaW5wdXRDdG4uYXBwZW5kKGxhYmVsKTsKCgoJY29uc3Qgc2VsZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic2VsZWN0Iik7Cgljb25zdCBkZWZhdWx0dmEgPSAnJzsKCS8vIHNlbGVjdC5zZXRBdHRyaWJ1dGUoImlkIiwgaWQgKyAnXycgKyBjb3VudCk7CgkvLyBzZWxlY3Quc2V0QXR0cmlidXRlKCJuYW1lIiwgaWQgKyAnXycgKyBjb3VudCk7CglzZWxlY3Quc2V0QXR0cmlidXRlKCJpZCIsIGAke2lkfS0ke2NvdW50fWApOwoJc2VsZWN0LnNldEF0dHJpYnV0ZSgibmFtZSIsIGtleSk7CglzZWxlY3Quc2V0QXR0cmlidXRlKCJwbGFjZWhvbGRlciIsICJCYW5rIik7Cglmb3IgKGNvbnN0IG9wdGlvblZhbCBvZiBkYXRhLnZhbHVlcykgewoJCWlmIChvcHRpb25WYWwudmFsdWUpIHsKCQkJY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgib3B0aW9uIik7CgkJCW9wdGlvbi5zZXRBdHRyaWJ1dGUoInZhbHVlIiwgb3B0aW9uVmFsLnZhbHVlKTsKCQkJb3B0aW9uLmlubmVyVGV4dCA9IG9wdGlvblZhbC5sYWJlbDsKCQkJaWYgKGRlZmF1bHR2YSkgewoJCQkJaWYgKGRlZmF1bHR2YSA9PT0gb3B0aW9uVmFsLnZhbHVlKSB7CgkJCQkJb3B0aW9uLnNldEF0dHJpYnV0ZSgic2VsZWN0ZWQiLCB0cnVlKTsKCQkJCX0KCQkJfQoJCQlzZWxlY3QuYXBwZW5kKG9wdGlvbik7CgkJfQoJfQoJc2VsZWN0Lm9uY2hhbmdlID0gZnVuY3Rpb24gKGUpIHsKCgkJLy8gcGF5bWVudF9zb3VyY2VfY2hlY2sgPSBlLnRhcmdldC52YWx1ZQoJCS8vIGRvY3VtZW50CgkJLy8gCS5xdWVyeVNlbGVjdG9yKGAucGF5bWVudF9maWxldXBsb2FkX2NsYXNzXyR7Y291bnR9YCkKCQkvLyAJLmNsYXNzTGlzdC5yZW1vdmUoImhpZGRlbiIpOwoJCS8vIGRvY3VtZW50CgkJLy8gCS5xdWVyeVNlbGVjdG9yKGAuZmlsZS11cGxvYWQtbGFibGUtJHtjb3VudH1gKS5pbm5lclRleHQgPSBwYXltZW50X3NvdXJjZV9jaGVjayAgLy8gYnkgbWFub2oKCgl9CglpbnB1dEN0bi5hcHBlbmQoc2VsZWN0KTsKCXJldHVybiBpbnB1dEN0bjsKfQoKZnVuY3Rpb24gYWRkUGF5ZW1lbnRTb3VyY2UodGV4dCwgaWQsIGRhdGEsIGNvdW50KSB7Cgljb25zdCBpbnB1dEN0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwoJaW5wdXRDdG4uY2xhc3NMaXN0LmFkZCgiaW5wdXRDdG4iKTsKCgljb25zdCBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxhYmVsIik7CglsYWJlbC5zZXRBdHRyaWJ1dGUoImZvciIsIGlkKTsKCWxhYmVsLmlubmVyVGV4dCA9IHRleHQ7CglpbnB1dEN0bi5hcHBlbmQobGFiZWwpOwoKCgljb25zdCBzZWxlY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzZWxlY3QiKTsKCWNvbnN0IGRlZmF1bHR2YSA9ICdjaGVxdWUnOwoJc2VsZWN0LnNldEF0dHJpYnV0ZSgiaWQiLCBpZCArICdfJyArIGNvdW50KTsKCXNlbGVjdC5zZXRBdHRyaWJ1dGUoIm5hbWUiLCBpZCArICdfJyArIGNvdW50KTsKCWZvciAoY29uc3Qgb3B0aW9uVmFsIG9mIGRhdGEudmFsdWVzKSB7CgkJaWYgKG9wdGlvblZhbC52YWx1ZSkgewoJCQljb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJvcHRpb24iKTsKCQkJb3B0aW9uLnNldEF0dHJpYnV0ZSgidmFsdWUiLCBvcHRpb25WYWwudmFsdWUpOwoJCQlvcHRpb24uaW5uZXJUZXh0ID0gb3B0aW9uVmFsLmxhYmVsOwoJCQlpZiAoZGVmYXVsdHZhKSB7CgkJCQlpZiAoZGVmYXVsdHZhID09PSBvcHRpb25WYWwudmFsdWUpIHsKCQkJCQlvcHRpb24uc2V0QXR0cmlidXRlKCJzZWxlY3RlZCIsIHRydWUpOwoJCQkJfQoJCQl9CgkJCXNlbGVjdC5hcHBlbmQob3B0aW9uKTsKCQl9Cgl9CglzZWxlY3Qub25jaGFuZ2UgPSBmdW5jdGlvbiAoZSkgewoKCQlwYXltZW50X3NvdXJjZV9jaGVjayA9IGUudGFyZ2V0LnZhbHVlCgkJZG9jdW1lbnQKCQkJLnF1ZXJ5U2VsZWN0b3IoYC5wYXltZW50X2ZpbGV1cGxvYWRfY2xhc3NfJHtjb3VudH1gKQoJCQkuY2xhc3NMaXN0LnJlbW92ZSgiaGlkZGVuIik7CgkJZG9jdW1lbnQKCQkJLnF1ZXJ5U2VsZWN0b3IoYC5maWxlLXVwbG9hZC1sYWJsZS0ke2NvdW50fWApLmlubmVyVGV4dCA9IHBheW1lbnRfc291cmNlX2NoZWNrICAvLyBieSBtYW5vagoKCgl9CglpbnB1dEN0bi5hcHBlbmQoc2VsZWN0KTsKCXJldHVybiBpbnB1dEN0bjsKfQpmdW5jdGlvbiB1cGxvYWRQYXltZW50U291cmNlKHRleHQsIGlkLCBkYXRhLCBjb3VudCkgewoKCWxldCBmaWxlVXBsb2FkUGF5bWVudCA9IFtdCgljb25zdCBmY3RuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CglmY3RuLmNsYXNzTGlzdC5hZGQoImZpbGUtdXBsb2FkIiwgImJhbmstc2xpcC11cGxvYWQiLCBgcGF5bWVudF9maWxldXBsb2FkX2NsYXNzXyR7Y291bnR9YCk7ICAvLyBSZW1vdmVkIGhpZGRlbiBjbGFzcyAvLyBtYW5vagoKCWNvbnN0IGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGFiZWwiKTsKCWxhYmVsLmNsYXNzTGlzdC5hZGQoYGZpbGUtdXBsb2FkLWxhYmxlLSR7Y291bnR9YCk7CgkvLyBsYWJlbC5pbm5lclRleHQgPSBwYXltZW50X3NvdXJjZV9jaGVjayA/IHBheW1lbnRfc291cmNlX2NoZWNrIDogJ2NoZXF1ZSc7ICAvLyBjb21tZW50ZWQgYnkgbWFub2oKCWxhYmVsLmlubmVyVGV4dCA9ICdjaGVxdWUnOyAgLy8gY2FuIGJlIHVuY29tbWVudGVkIGJ5IG1hbm9qCglwYXltZW50X3NvdXJjZV9jaGVjayA9ICdjaGVxdWUnOyAgLy8gY2FuIGJlIHVuY29tbWVudGVkIGJ5IG1hbm9qCgoJbGV0IG1haW5VcGxvYWRDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCW1haW5VcGxvYWRDb250YWluZXIuc2V0QXR0cmlidXRlKCJjbGFzcyIsICJtYWluVXBsb2FkX2NvbnRhaW5lcl9wYXltZW50Iik7CgoJY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpOwoJaW5wdXQuc2V0QXR0cmlidXRlKCJ0eXBlIiwgImZpbGUiKTsKCS8vIGlucHV0LnNldEF0dHJpYnV0ZSgicmVxdWlyZWQiLCB0cnVlKTsKCglpbnB1dC5zZXRBdHRyaWJ1dGUoImlkIiwgaWQpOwoJaW5wdXQuc2V0QXR0cmlidXRlKCJkYXRhLXJvdyIsIGNvdW50KTsKCWlucHV0LnNldEF0dHJpYnV0ZSgibmFtZSIsIGlkKTsKCglpbnB1dC5vbmNsaWNrID0gKGV2KSA9PiB7CgkJZXYudGFyZ2V0LnZhbHVlID0gbnVsbDsKCX07CglpbnB1dC5hZGRFdmVudExpc3RlbmVyKCJjaGFuZ2UiLCAoZXYpID0+IHsKCQl0cnkgewoJCQlpZiAoZXYudGFyZ2V0Lm5leHRFbGVtZW50U2libGluZykgewoJCQkJZXYudGFyZ2V0Lm5leHRFbGVtZW50U2libGluZy5yZW1vdmUoKTsKCQkJfQoKCQkJY29uc3Qgcm93VG9VcGRhdGUgPSAkKGV2LnRhcmdldCkuZGF0YSgncm93Jyk7CgkJCWNvbnNvbGUubG9nKHJvd1RvVXBkYXRlKTsKCQkJY29uc29sZS5sb2coZXYudGFyZ2V0KTsKCQkJY29uc3QgbXlGaWxlVVJMID0gVVJMLmNyZWF0ZU9iamVjdFVSTChldi50YXJnZXQuZmlsZXNbMF0pOwoJCQlsZXQgcHJldml3ZUNvbnRhaW5ldCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwoJCQlwcmV2aXdlQ29udGFpbmV0LnNldEF0dHJpYnV0ZSgiY2xhc3MiLCAicHJldmlld19hY3Rpb25idXR0b24iKTsKCQkJY29uc3QgbGlua25hdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsKCQkJdmFyIGltZ2FkZGhhciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImltZyIpOwoJCQlsaW5rbmF2LnNldEF0dHJpYnV0ZSgiaHJlZiIsIG15RmlsZVVSTCk7CgkJCWltZ2FkZGhhci5zZXRBdHRyaWJ1dGUoImhlaWdodCIsIDUwKTsKCQkJaW1nYWRkaGFyLnNldEF0dHJpYnV0ZSgiY2xhc3MiLCAidXBsb2FkX2ltYWdlX3ByZXZpZXciKTsKCQkJaW1nYWRkaGFyLnNyYyA9IG15RmlsZVVSTDsKCQkJbGlua25hdi5zZXRBdHRyaWJ1dGUoInRhcmdldCIsICJfYmxhbmsiKTsKCQkJbGlua25hdi5hcHBlbmQoaW1nYWRkaGFyKTsKCQkJcHJldml3ZUNvbnRhaW5ldC5hcHBlbmQobGlua25hdik7CgoJCQlpZiAobXlGaWxlVVJMKSB7CgkJCQljb25zdCByZW1vdmVFbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCQkJCXJlbW92ZUVsZS5jbGFzc0xpc3QuYWRkKCJyZW1vdmVfcHJldmlld19lbGUiKTsKCQkJCWNvbnN0IG5ld1N1ZmYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJidXR0b24iKTsKCQkJCW5ld1N1ZmYuaW5uZXJIVE1MID0gIlgiOwoJCQkJcmVtb3ZlRWxlLmFwcGVuZENoaWxkKG5ld1N1ZmYpOwoKCQkJCXJlbW92ZUVsZS5vbmNsaWNrID0gZnVuY3Rpb24gKGUpIHsKCQkJCQljb25zdCBzZWxmRWxlID0gZS50YXJnZXQ7CgkJCQkJY29uc3QgdGFyZ2V0RWxlID0gaGFzU29tZVBhcmVudFRoZUNsYXNzKAoJCQkJCQlzZWxmRWxlLAoJCQkJCQkicHJldmlld19hY3Rpb25idXR0b24iCgkJCQkJKTsKCQkJCQl0YXJnZXRFbGUucmVtb3ZlKCk7CgkJCQkJaW5wdXQudmFsdWUgPSBudWxsOwoJCQkJfTsKCQkJCXByZXZpd2VDb250YWluZXQuYXBwZW5kKHJlbW92ZUVsZSk7CgkJCX0KCQkJbWFpblVwbG9hZENvbnRhaW5lci5hcHBlbmQocHJldml3ZUNvbnRhaW5ldCk7CgkJCS8vIGxldCBzbUxvYWRlciA9IGNyZWF0ZUxvYWRlcigpOwoJCQkvLyBwcmV2aXdlQ29udGFpbmV0LmFwcGVuZChzbUxvYWRlcik7CgoJCQljb21wcmVzc0ltYWdlKG15RmlsZVVSTCwgZXYpCgkJCQkudGhlbigocmVzKSA9PiB7CgkJCQkJY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsKCQkJCQkvLyBzdG9yZURvY3VlbWVudFdpdGhPdXRCYXNlKCdiYWNrX2NoZWNrX3Bvc3QnLCByZXMpCgkJCQkJc3RvcmVEb2N1ZW1lbnQoYGJhY2tfY2hlY2tfcG9zdF8ke3Jvd1RvVXBkYXRlfWAsIHJlcykKCgkJCQkJY29uc3QgY3VycmVudF9wYXltZW50X3NvdXJjZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBwYXltZW50X3NvdXJjZV8ke3Jvd1RvVXBkYXRlfWApLnZhbHVlOwoJCQkJCXBheW1lbnRfc291cmNlX2NoZWNrID0gY3VycmVudF9wYXltZW50X3NvdXJjZTsKCgkJCQkJZm9ybURhdGEuYXBwZW5kKCJmaWxlIiwgcmVzKTsKCQkJCQl2ZXJpZnlQYXltZW50U291cmNlKHBheW1lbnRfc291cmNlX2NoZWNrLCBmb3JtRGF0YSwgcm93VG9VcGRhdGUpCgkJCQkJCS50aGVuKChyZXMpID0+IHsKCQkJCQkJCWxldCBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5teXZlck1vZGFsIik7CgkJCQkJCQlpZiAocmVzICYmIHJlcy52ZXJpZmllZCkgewoJCQkJCQkJCXByZXZpd2VDb250YWluZXQuYXBwZW5kKHZlcmlmaWVkaWNvbigpKTsKCgoJCQkJCQkJCWxldCBmaWxlOwoJCQkJCQkJCWlmICgoZXYudGFyZ2V0LmZpbGVzWzBdLnNpemUgLyAxMDI0KSA8IDUwMCkgewoJCQkJCQkJCQlmaWxlID0gZXYudGFyZ2V0LmZpbGVzWzBdOwoJCQkJCQkJCX0KCQkJCQkJCQllbHNlIHsKCQkJCQkJCQkJbGV0IHR5cGUgPSBldi50YXJnZXQuZmlsZXNbMF0udHlwZS5zcGxpdCgnLycpWzFdOwoJCQkJCQkJCQlmaWxlID0gbmV3IEZpbGUoW3Jlc10sIGBuYW1lLiR7dHlwZX1gLCB7CgkJCQkJCQkJCQl0eXBlOiByZXMudHlwZQoJCQkJCQkJCQl9KTsKCQkJCQkJCQl9CgoJCQkJCQkJCXN0b3JlSW1hZ2VJbkRCKGZpbGUsIGBwYXltZW50X3NvdXJjZV9pbWFnZV8ke3Jvd1RvVXBkYXRlfWAsIHBheW1lbnRfc291cmNlX2NoZWNrKQoJCQkJCQkJCQkudGhlbigocmVzcCkgPT4gcmVzcC5qc29uKCkpCgkJCQkJCQkJCS50aGVuKChyZXNwKSA9PiB7CgkJCQkJCQkJCQkvLyBTdG9yZURvY3VtZW50TmFtZShwaWNrZXIuaWQsIHJlc1snZmlsZV9uYW1lJ10pOwoJCQkJCQkJCQkJLy8gc21Mb2FkZXIuaW5uZXJIVE1MID0gJyc7CgkJCQkJCQkJCQkvLyBpbWFnZVVwbG9hZGluZyA9IGltYWdlVXBsb2FkaW5nLmZpbHRlcih4ID0+IHggIT0gcGlja2VyLmlkKTsKCgkJCQkJCQkJCQlpZiAoIWpzb25EYXRhWydwYXltZW50U291cmNlcyddLmZpbmQoeCA9PiB4LnJvd0lkID09IHJvd1RvVXBkYXRlKSkgewoJCQkJCQkJCQkJCWpzb25EYXRhWydwYXltZW50U291cmNlcyddLnB1c2goewoJCQkJCQkJCQkJCQkuLi5yZXMudmFsdWUsCgkJCQkJCQkJCQkJCSdpbWFnZVNyYyc6IHJlc3BbJ2ZpbGVfbmFtZSddLAoJCQkJCQkJCQkJCQkncm93SWQnOiByb3dUb1VwZGF0ZQoJCQkJCQkJCQkJCX0pCgkJCQkJCQkJCQl9CgkJCQkJCQkJCQljb25zb2xlLmxvZyhqc29uRGF0YVsncGF5bWVudFNvdXJjZXMnXSk7CgkJCQkJCQkJCX0pLmNhdGNoKGVyciA9PiB7CgkJCQkJCQkJCQkvLyBzbUxvYWRlci5pbm5lckhUTUwgPSAnJzsKCQkJCQkJCQkJCS8vIGltYWdlVXBsb2FkaW5nID0gaW1hZ2VVcGxvYWRpbmcuZmlsdGVyKHggPT4geCAhPSBwaWNrZXIuaWQpOwoJCQkJCQkJCQkJYWxlcnQoYENvdWxkbid0IHVwbG9hZCBpbWFnZWApOwoJCQkJCQkJCQl9KTsKCgoKCgkJCQkJCQkJY29uc3QgbXlpZ0lkID0gcGF5bWVudF9zb3VyY2VfY2hlY2sgKyAiX2lnbm9yZSI7CgkJCQkJCQkJaWdub3JlRG9jID0gaWdub3JlRG9jLmZpbHRlcigoaWcpID0+IHsKCQkJCQkJCQkJcmV0dXJuIGlnLm5hbWUgIT0gbXlpZ0lkOwoJCQkJCQkJCX0pOwoJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQlpZiAoCgkJCQkJCQkJCXJlcyAmJgoJCQkJCQkJCQkocmVzLm1lc3NhZ2VzLmxlbmd0aCA+IDAgfHwgcmVzLnZhbHVlLmxlbmd0aCA+IDApCgkJCQkJCQkJKSB7CgkJCQkJCQkJCWxldCBkaXNwbGF5VGV4dCA9ICIiOwoJCQkJCQkJCQlpZiAocmVzLm1lc3NhZ2VzLmxlbmd0aCA+IDApIHsKCQkJCQkJCQkJCXJlcy5tZXNzYWdlcy5mb3JFYWNoKChteXYpID0+IHsKCQkJCQkJCQkJCQlkaXNwbGF5VGV4dCA9IGRpc3BsYXlUZXh0ICsgbXl2ICsgIjxicj4iOwoJCQkJCQkJCQkJfSk7CgkJCQkJCQkJCX0KCQkJCQkJCQkJZG9jdW1lbnQucXVlcnlTZWxlY3RvcigKCQkJCQkJCQkJCSIjbXlQb3B1cCAucG9wdXBfd2FybmluZ3RleHQiCgkJCQkJCQkJCSkuaW5uZXJIVE1MID0gZGlzcGxheVRleHQ7CgoJCQkJCQkJCQlkb2N1bWVudAoJCQkJCQkJCQkJLnF1ZXJ5U2VsZWN0b3IoIiNteVBvcHVwIC5pZ25vcmVQcl9CdG4iKQoJCQkJCQkJCQkJLmNsYXNzTGlzdC5yZW1vdmUoImhpZGRlbiIpOwoKCQkJCQkJCQkJZG9jdW1lbnQucXVlcnlTZWxlY3RvcigKCQkJCQkJCQkJCSIjbXlQb3B1cCAuaWdub3JlUHJfQnRuIgoJCQkJCQkJCQkpLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7CgkJCQkJCQkJCQljb25zdCBteWlnSWQgPSBlbGVtZW50LmlkICsgIl9pZ25vcmUiOwoJCQkJCQkJCQkJaWdub3JlRG9jID0gaWdub3JlRG9jLmZpbHRlcigoaWcpID0+IHsKCQkJCQkJCQkJCQlyZXR1cm4gaWcubmFtZSAhPSBteWlnSWQ7CgkJCQkJCQkJCQl9KTsKCQkJCQkJCQkJCWlnbm9yZURvYy5wdXNoKHsgbmFtZTogbXlpZ0lkLCB2YWx1ZTogcmVzLnZhbHVlIH0pOwoJCQkJCQkJCQkJbW9kYWwuY2xhc3NMaXN0LnRvZ2dsZSgic2hvdy1tb2RhbCIpOwoJCQkJCQkJCQl9OwoJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoCgkJCQkJCQkJCQkiI215UG9wdXAgLnBvcHVwX3dhcm5pbmd0ZXh0IgoJCQkJCQkJCQkpLmlubmVyVGV4dCA9ICJQbGVhc2UgdXBsb2FkIHByb3BlciBQYXltZW50IHNvdXJjZS4iOwoKCQkJCQkJCQkJZG9jdW1lbnQKCQkJCQkJCQkJCS5xdWVyeVNlbGVjdG9yKCIjbXlQb3B1cCAuaWdub3JlUHJfQnRuIikKCQkJCQkJCQkJCS5jbGFzc0xpc3QuYWRkKCJoaWRkZW4iKTsKCQkJCQkJCQl9CgkJCQkJCQkJbW9kYWwuY2xhc3NMaXN0LnRvZ2dsZSgic2hvdy1tb2RhbCIpOwoJCQkJCQkJCXByZXZpd2VDb250YWluZXQuYXBwZW5kKHZlcmlmeWZhaWxzaWNvbigpKTsKCQkJCQkJCX0KCgkJCQkJCQlkb2N1bWVudC5xdWVyeVNlbGVjdG9yKAoJCQkJCQkJCSIjbXlQb3B1cCAuZG9jX3JldXBsb2FkQnRuIgoJCQkJCQkJKS5vbmNsaWNrID0gZnVuY3Rpb24gKCkgewoJCQkJCQkJCWNvbnN0IGN1ckVsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYXltZW50X3NvdXJjZV9pbWFnZScpOwoJCQkJCQkJCWNvbnN0IHRhcmdldEVsZSA9IGhhc1NvbWVOZXh0U2libGluZ1RoZUNsYXNzKAoJCQkJCQkJCQljdXJFbGUsCgkJCQkJCQkJCSJwcmV2aWV3X2FjdGlvbmJ1dHRvbiIKCQkJCQkJCQkpOwoJCQkJCQkJCWN1ckVsZS52YWx1ZSA9IG51bGw7CgkJCQkJCQkJaWYgKHRhcmdldEVsZSkgewoJCQkJCQkJCQl0YXJnZXRFbGUucmVtb3ZlKCk7CgkJCQkJCQkJfQoJCQkJCQkJCW1vZGFsLmNsYXNzTGlzdC50b2dnbGUoInNob3ctbW9kYWwiKTsKCQkJCQkJCX07CgkJCQkJCX0pCgkJCQkJCS5jYXRjaCgoZXJyb3IpID0+IHsKCQkJCQkJCWNvbnNvbGUubG9nKGVycm9yKQoJCQkJCQkJcHJldml3ZUNvbnRhaW5ldC5hcHBlbmQodmVyaWZ5ZmFpbHNpY29uKCkpOwoJCQkJCQl9KTsKCQkJCX0pCgkJCQkuY2F0Y2goKGVycm9yKSA9PiB7CgkJCQkJY29uc29sZS5sb2coZXJyb3IpCgkJCQkJcHJldml3ZUNvbnRhaW5ldC5hcHBlbmQodmVyaWZ5ZmFpbHNpY29uKCkpOwoJCQkJfSk7CgkJfSBjYXRjaCAoZXJyb3IpIHsKCQkJY29uc29sZS5sb2coeyBlcnJvciB9KTsKCQl9Cgl9KTsKCgltYWluVXBsb2FkQ29udGFpbmVyLmFwcGVuZChpbnB1dCk7CglmY3RuLmFwcGVuZChsYWJlbCwgbWFpblVwbG9hZENvbnRhaW5lcik7CglyZXR1cm4gZmN0bjsKCWZpbGVVcGxvYWRQYXltZW50LnB1c2goZmN0bik7Cn0KCmZ1bmN0aW9uIHNldERlZmF1bHRDb3VudHJ5KGNvdW50cnlOYW1lKSB7CglsZXQgY3VycmVudEFwcGxpY2FudCA9IHNjaGVtYVsnYXBwbGljYW50LWRldGFpbHMnXVsnc3ViLXNlY3Rpb25zJ107CgoJLy8gU2V0IGRlZmF1bHQgdmFsdWUgb2YgY291bnRyeSBmb3IgYWxsIGFwcGxpY2FudHMKCWZvciAobGV0IGkgPSAwOyBpIDwgY3VycmVudEFwcGxpY2FudC5sZW5ndGggLSAxOyBpKyspIHsKCQljdXJyZW50QXBwbGljYW50W2ldWydmb3JtJ11bMjBdLmRlZmF1bHRWYWx1ZSA9IGNvdW50cnlOYW1lOwoJfQoKfQpmdW5jdGlvbiByZW5kZXJJZGVudGlmaWNhdGlvbihpZGVudGlmaWNhdGlvbmNvbHMpIHsKCWNvbnN0IGZybWdycDEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgcGFnZS0yYCk7CgoJY29uc3QgaDIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJoMiIpOwoJaDIuaW5uZXJUZXh0ID0gIklkZW50aWZpY2F0aW9uIjsKCgljb25zdCBJQ3RuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CglJQ3RuLmNsYXNzTGlzdC5hZGQoImlkZW50aWZpY2F0aW9uLXNlY3Rpb24iKTsKCglmcm1ncnAxLmFwcGVuZChoMik7Cglmcm1ncnAxLmFwcGVuZChJQ3RuKTsKCglsZXQgY291bnQgPSBpZGVudGlmaWNhdGlvbmNvbHMubGVuZ3RoICUgMzsKCWNvdW50ID0KCQljb3VudCA+IDAKCQkJPyAoaWRlbnRpZmljYXRpb25jb2xzLmxlbmd0aCAtIGNvdW50KSAvIDMgKyAxCgkJCTogaWRlbnRpZmljYXRpb25jb2xzLmxlbmd0aCAvIDM7CgoJZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7CgkJY29uc3QgY291bnRMb2NhbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwoJCS8vIGNvdW50TG9jYWwuc2V0QXR0cmlidXRlKCJpZCIsIGBwYWdlNCR7aSArIDF9YCk7CgkJY291bnRMb2NhbC5zZXRBdHRyaWJ1dGUoImlkIiwgYHBhZ2UyJHtpICsgMX1gKTsKCQljb25zdCBpbm5lckN0bGNhbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwoJCS8vIGNvdW50TG9jYWwuY2xhc3NMaXN0LmFkZCgiaGlkZGVuIik7CgkJaW5uZXJDdGxjYWwuY2xhc3NMaXN0LmFkZCgibXlpZGVudGlmaWNhdGlvbnNlYyIpOwoJCWZvciAobGV0IHggPSAwOyB4IDwgMzsgeCsrKSB7CgkJCWlmIChpICogMyArIHggPCBpZGVudGlmaWNhdGlvbmNvbHMubGVuZ3RoKSB7CgkJCQlpbm5lckN0bGNhbC5hcHBlbmRDaGlsZCgKCQkJCQljcmVhdGVJZGVudGlmaWNhdGlvbkNvbHVtbihpZGVudGlmaWNhdGlvbmNvbHNbaSAqIDMgKyB4XSkKCQkJCSk7CgkJCX0KCQl9CgoKCQljb3VudExvY2FsLmFwcGVuZENoaWxkKGlubmVyQ3RsY2FsKTsKCQljb25zdCBjaGVja1RleHQgPSBzY2hlbWFbImZpcnN0LXBhZ2UiXVsib3RoZXIiXTsKCQlpZiAoY2hlY2tUZXh0KSB7CgkJCWNvdW50TG9jYWwuYXBwZW5kKAoJCQkJYWNrbm9sZWRnZUNoZWNrKGNoZWNrQm94VGV4dHMucGFnZV90d28sIGBhcHB0bmNfYWdncmVfNCR7aSArIDF9YCkKCQkJKTsKCQl9CgkJSUN0bi5hcHBlbmQoY291bnRMb2NhbCk7CgoJCS8vIEFkZGluZyBzcGVjaWFsIGNoZWNrYm94IHRvIDJuZCBzZWN0aW9uIG9mIHBhZ2UgMyBhcyBzdWdnZXN0ZWQgYnkgRGV2bmEKCQkvLyBUaGUgY2hlY2tib3ggdGV4dCBjYW4gYmUgZm91bmQgaW4gdGhlIGNvbmZpZy5qcyBmaWxlCgkJLy8gWW91IGNhbiBhbHNvIHBsYWNlIHRoaXMgY29kZSBhdCBjb3JyZWN0IHBsYWNlIHdoZXJlIG90aGVyIGNoZWNrYm94ZXMgYXJlIGFkZGVkCgkJLy8gSSBjb3VsZG4ndCBmaW5kIHRoZSBjb3JyZWN0IHBsYWNlIHRvIHB1dCBpdCBzbyBwbGFjaW5nIGhlcmUoSXQgd2lsbCB3b3JrIGJ0dykKCgkJY29uc3QgY2hlY2tib3hUeHQgPSBwYWdlM3RuYy50ZXh0OwoJCWNvbnN0IHBhZ2UzTGFzdFNlY3Rpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFnZS0zJykubGFzdENoaWxkOwoJCWNvbnN0IGNoZWNrYm94Q3VzdG9tSWQgPSAncGFnZTNfbGFzdF9jdXN0b21faWQnOwoJCWlmICghZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY2hlY2tib3hDdXN0b21JZCkpIHsKCQkJY29uc3QgY2hlY2tib3hDb250ID0gYWNrbm9sZWRnZUNoZWNrKGNoZWNrYm94VHh0LCBjaGVja2JveEN1c3RvbUlkKTsKCQkJaWYgKHBhZ2UzTGFzdFNlY3Rpb24pIHsKCQkJCXBhZ2UzTGFzdFNlY3Rpb24uYXBwZW5kQ2hpbGQoY2hlY2tib3hDb250KTsKCQkJfQoJCX0KCgl9CglyZXR1cm4gZnJtZ3JwMTsKfQoKZnVuY3Rpb24gcmVuZGVyYXBwbGljYW50U2VjdGlvbihzZWN0aW9uLCBjb3VudCwgcGVyUGFnZSkgewoJY29uc3QgYXBwbGljYW50X2RldCA9IHNjaGVtYVsiYXBwbGljYW50LWRldGFpbHMiXTsKCS8vY29uc3QgZGF0ZVNpZ25Gb290ZXIgPSBhcHBsaWNhbnRfZGV0WyJkYXRlLXNpZ25hdHVyZS1mb290ZXIiXTsKCgljb25zdCBoZWFkaW5nID0gYXBwbGljYW50X2RldFsiaGVhZGluZyJdOwoKCWNvbnN0IGhlYWRpbmdFTCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImgyIik7CgloZWFkaW5nRUwuaW5uZXJUZXh0ID0gaGVhZGluZzsKCgljb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7Cgljb250YWluZXIuYXBwZW5kKGhlYWRpbmdFTCk7CgoJZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7CgkJY29uc3QgY291bnRMb2NhbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwoJCS8vIGNvdW50TG9jYWwuc2V0QXR0cmlidXRlKCJpZCIsIGBwYWdlMiR7aSArIDF9YCk7CgkJY291bnRMb2NhbC5zZXRBdHRyaWJ1dGUoImlkIiwgYHBhZ2UzJHtpICsgMX1gKTsKCQkvLyBjb3VudExvY2FsLmNsYXNzTGlzdC5hZGQoImhpZGRlbiIpOwoJCWZvciAobGV0IHggPSAwOyB4IDwgcGVyUGFnZTsgeCsrKSB7CgkJCWlmIChpICogcGVyUGFnZSArIHggPCBzZWN0aW9uLmxlbmd0aCkgewoJCQkJY29uc3Qgc3ViSGVhZGluZyA9IHNlY3Rpb25baSAqIHBlclBhZ2UgKyB4XVsic3ViLWhlYWRpbmciXTsKCQkJCWNvbnN0IGN0bkxvY2FsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgkJCQlpZiAoc2VjdGlvbltpICogcGVyUGFnZSArIHhdLmlkKQoJCQkJCWN0bkxvY2FsLnNldEF0dHJpYnV0ZSgiaWQiLCBzZWN0aW9uW2kgKiBwZXJQYWdlICsgeF0uaWQpOwoJCQkJY3RuTG9jYWwuY2xhc3NMaXN0LmFkZCgiYXBwbGljYW50X2NvbnRhaW5lciIpOwoJCQkJY29uc3Qgc3ViSGVhZGluZ0VsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaDMiKTsKCQkJCXN1YkhlYWRpbmdFbC5pbm5lclRleHQgPSBzdWJIZWFkaW5nOwoJCQkJY3RuTG9jYWwuYXBwZW5kQ2hpbGQoc3ViSGVhZGluZ0VsKTsKCQkJCWlmIChzZWN0aW9uW2kgKiBwZXJQYWdlICsgeF0uY2xhc3MpCgkJCQkJc3ViSGVhZGluZ0VsLmNsYXNzTGlzdC5hZGQoc2VjdGlvbltpICogcGVyUGFnZSArIHhdLmNsYXNzKTsKCgkJCQljb25zdCBmb3JtID0gc2VjdGlvbltpICogcGVyUGFnZSArIHhdWyJmb3JtIl07CgoJCQkJY29uc3QgaW5wdXRHcnAgPSBjcmVhdGVJbnB1dEdycChmb3JtKTsKCQkJCWlucHV0R3JwLnNldEF0dHJpYnV0ZSgiY2xhc3MiLCAiYXBwbGljYW50X2lucHV0Z3JvdXAiKTsKCQkJCWlmIChpbnB1dEdycCkgY3RuTG9jYWwuYXBwZW5kQ2hpbGQoaW5wdXRHcnApOwoKCQkJCWNvbnN0IGxpc3QgPSBzZWN0aW9uW2kgKiBwZXJQYWdlICsgeF1bImxpc3QiXTsKCQkJCWlmIChsaXN0KSB7CgkJCQkJY29uc3Qgb2wgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJvbCIpOwoJCQkJCWZvciAoY29uc3QgaXRlbSBvZiBsaXN0KSB7CgkJCQkJCWNvbnN0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGkiKTsKCQkJCQkJbGkuaW5uZXJIVE1MID0gaXRlbTsKCQkJCQkJb2wuYXBwZW5kKGxpKTsKCQkJCQl9CgkJCQkJY3RuTG9jYWwuYXBwZW5kQ2hpbGQob2wpOwoJCQkJfQoJCQkJY291bnRMb2NhbC5hcHBlbmRDaGlsZChjdG5Mb2NhbCk7CgkJCX0KCgkJfQoJCWNvbnN0IGNoZWNrVGV4dCA9IHNjaGVtYVsiZmlyc3QtcGFnZSJdWyJvdGhlciJdOwoJCWlmIChjaGVja1RleHQpIHsKCQkJY291bnRMb2NhbC5hcHBlbmQoCgkJCQlhY2tub2xlZGdlQ2hlY2soY2hlY2tCb3hUZXh0cy5jb21tb24sIGBhcHB0bmNfYWdncmVfMiR7aSArIDF9YCkKCQkJKTsKCQl9CgkJY29udGFpbmVyLmFwcGVuZChjb3VudExvY2FsKTsKCX0KCglyZXR1cm4gY29udGFpbmVyOwp9CgpmdW5jdGlvbiB1cGRhdGVBY3Rpb24oZWxlbWVudCkgewoJZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCJpbnB1dFtudW1MZW5ndGhdIikuZm9yRWFjaCgoZWwpID0+IHsKCQljb25zdCBudW1MZW5ndGggPSBlbC5nZXRBdHRyaWJ1dGUoIm51bUxlbmd0aCIpOwoJCWVsLnNldEF0dHJpYnV0ZSgKCQkJIm9uaW52YWxpZCIsCgkJCWB0aGlzLnNldEN1c3RvbVZhbGlkaXR5KCdFbnRlciBhICR7bnVtTGVuZ3RofSBkaWdpdCBudW1iZXInKTtgCgkJKTsKCQllbC5zZXRBdHRyaWJ1dGUoIm9uaW5wdXQiLCAidGhpcy5zZXRDdXN0b21WYWxpZGl0eSgnJyk7Iik7CgkJZWwuc2V0QXR0cmlidXRlKCJvbnZhbGlkIiwgInRoaXMuc2V0Q3VzdG9tVmFsaWRpdHkoJycpOyIpOwoJCWVsLnNldEF0dHJpYnV0ZSgib25jaGFuZ2UiLCAidGhpcy5zZXRDdXN0b21WYWxpZGl0eSgnJyk7Iik7CgoJCWVsLnNldEF0dHJpYnV0ZSgibWluIiwgIjEiICsgIjAiLnJlcGVhdChudW1MZW5ndGggLSAxKSk7CgkJZWwuc2V0QXR0cmlidXRlKCJtYXgiLCAiOSIucmVwZWF0KG51bUxlbmd0aCkpOwoJfSk7CgoJZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCIuaW5wdXRDdG4iKS5mb3JFYWNoKChjdG4pID0+IHsKCQljdG4uYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCAoKSA9PiB7CgkJCWN0bi5xdWVyeVNlbGVjdG9yKCJpbnB1dCxzZWxlY3QsIHRleHRhcmVhIikuZm9jdXMoKTsKCQl9KTsKCQljb25zdCBsYWJlbCA9IGN0bi5xdWVyeVNlbGVjdG9yKCJsYWJlbCIpOwoJCWNvbnN0IGlucHV0ID0gY3RuLnF1ZXJ5U2VsZWN0b3IoCgkJCSdpbnB1dFt0eXBlPSJ0ZXh0Il0saW5wdXRbdHlwZT0ibnVtYmVyIl0saW5wdXRbdHlwZT0iZW1haWwiXSx0ZXh0YXJlYScKCQkpOwoKCQkvLyBpZiAoaW5wdXQgJiYgaW5wdXQudGFnTmFtZSA9PT0gIlRFWFRBUkVBIikgewoJCS8vICAgY3RuLmNsYXNzTGlzdC5hZGQoInctMTAwIik7CgkJLy8gfQoKCQlpZiAobGFiZWwgJiYgaW5wdXQpIHsKCQkJY29uc3QgdHlwZSA9IGlucHV0LmdldEF0dHJpYnV0ZSgidHlwZSIpOwoJCQlpZiAodHlwZSA9PT0gImNoZWNrYm94IikgewoJCQkJbGFiZWwuY2xhc3NMaXN0LmFkZCgiZmxleCIpOwoJCQl9CgoJCQlpZiAoCgkJCQljdG4ucXVlcnlTZWxlY3RvcigiLmlucHV0cHJlZml4IikgIT0gbnVsbCB8fAoJCQkJY3RuLnF1ZXJ5U2VsZWN0b3IoIi5pbnB1dHN1ZmZpeCIpICE9IG51bGwKCQkJKSB7CgkJCX0gZWxzZSB7CgkJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoInBsYWNlaG9sZGVyIiwgbGFiZWwuaW5uZXJUZXh0KTsKCQkJCWlmIChpbnB1dC52YWx1ZSA9PT0gIiIpIGxhYmVsLmNsYXNzTGlzdC5hZGQoImhpZGRlbiIpOwoKCQkJCWlucHV0LmFkZEV2ZW50TGlzdGVuZXIoImZvY3VzIiwgZnVuY3Rpb24gKCkgewoJCQkJCWlucHV0LnJlbW92ZUF0dHJpYnV0ZSgicGxhY2Vob2xkZXIiKTsKCQkJCQlsYWJlbC5jbGFzc0xpc3QucmVtb3ZlKCJoaWRkZW4iKTsKCQkJCX0pOwoJCQkJaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigiYmx1ciIsIGZ1bmN0aW9uICgpIHsKCQkJCQlpZiAoaW5wdXQudmFsdWUgPT0gIiIpIGxhYmVsLmNsYXNzTGlzdC5hZGQoImhpZGRlbiIpOwoJCQkJCWlucHV0LnNldEF0dHJpYnV0ZSgicGxhY2Vob2xkZXIiLCBsYWJlbC5pbm5lclRleHQpOwoJCQkJfSk7CgkJCX0KCQl9Cgl9KTsKCglsZXQgcGlja2VycyA9IGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbcm9sZT0icGhvdG8tcGlja2VyIl0nKTsKCWlmIChwaWNrZXJzKSB7CgkJcGlja2Vycy5mb3JFYWNoKChwaWNrZXIpID0+IHsKCQkJY29uc3QgcHJldmlldyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKAoJCQkJcGlja2VyLmdldEF0dHJpYnV0ZSgicHJldmlldy1pZCIpCgkJCSk7CgkJCXBpY2tlci5hZGRFdmVudExpc3RlbmVyKCJjaGFuZ2UiLCBhc3luYyBmdW5jdGlvbiAoZXYpIHsKCgkJCQkvLyBhbGVydCgndXBsb2FkIHBob3RvJyk7CgoJCQkJLy8gRXhwZXJpbWVudGFsIGNvZGUgdG8gcmVkdWNlIHBkZiBzaXplCgkJCQkvLyBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwoJCQkJLy8gY29uc3QgZmlsZSA9IGUudGFyZ2V0LmZpbGVzWzBdOwoJCQkJLy8gY29uc3QgbXlGaWxlVVJMID0gVVJMLmNyZWF0ZU9iamVjdFVSTChlLnRhcmdldC5maWxlc1swXSk7CgoJCQkJLy8gY29tcHJlc3NJbWFnZShteUZpbGVVUkwpLnRoZW4oKHJlcykgPT4gewoJCQkJLy8gCXJlYWRlci5yZWFkQXNEYXRhVVJMKHJlcyk7CgkJCQkvLyAJc3RvcmVEb2N1ZW1lbnQocGlja2VyLmlkLCByZXMpOwoKCQkJCS8vIH0pOwoKCQkJCS8vIHJlYWRlci5vbmxvYWRlbmQgPSBmdW5jdGlvbigpewoJCQkJLy8gCXByZXZpZXcuc3JjID0gcmVhZGVyLnJlc3VsdDsKCQkJCS8vIH0KCgoJCQkJY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKCQkJCWNvbnN0IGZpbGUgPSBldi50YXJnZXQuZmlsZXNbMF07CgkJCQlyZWFkZXIub25sb2FkID0gKGUpID0+IHsKCQkJCQlwcmV2aWV3LnNyYyA9IGUudGFyZ2V0LnJlc3VsdDsKCQkJCX07CgoJCQkJbGV0IG15RmlsZVVSTCA9ICcnOwoJCQkJLy8gQ2hlY2sgaWYgY3VycmVudCBkb2N1bWVudCBpcyBwZGYKCQkJCWlmIChldi50YXJnZXQuZmlsZXNbMF0udHlwZSA9PSAnYXBwbGljYXRpb24vcGRmJykgewoJCQkJCXRyeSB7CgkJCQkJCW15RmlsZVVSTCA9IGF3YWl0IHBkZlRvSW1hZ2UoZXYudGFyZ2V0LmZpbGVzWzBdKQoKCQkJCQl9IGNhdGNoIChlcnJvcikgewoJCQkJCQljb25zb2xlLmVycm9yKCdFcnJvciBjb252ZXJ0aW5nIFBERiB0byBpbWFnZTonLCBlcnJvcik7CgkJCQkJfQoJCQkJfSBlbHNlIHsKCQkJCQlteUZpbGVVUkwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGV2LnRhcmdldC5maWxlc1swXSk7CgkJCQl9CgkJCQlsZXQgc21Mb2FkZXIgPSBjcmVhdGVMb2FkZXIoKTsKCQkJCXByZXZpZXcuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCdhZnRlcmVuZCcsIHNtTG9hZGVyKTsKCQkJCWltYWdlVXBsb2FkaW5nLnB1c2gocGlja2VyLmlkKTsKCgoJCQkJY29tcHJlc3NJbWFnZShteUZpbGVVUkwsIGV2KQoJCQkJCS50aGVuKHJlc3AgPT4gewoKCQkJCQkJbGV0IGZpbGU7CgkJCQkJCWlmICgoZXYudGFyZ2V0LmZpbGVzWzBdLnNpemUgLyAxMDI0KSA8IDUwMCkgewoJCQkJCQkJZmlsZSA9IGV2LnRhcmdldC5maWxlc1swXTsKCQkJCQkJfQoJCQkJCQllbHNlIHsKCQkJCQkJCWxldCB0eXBlID0gZXYudGFyZ2V0LmZpbGVzWzBdLnR5cGUuc3BsaXQoJy8nKVsxXTsKCQkJCQkJCWZpbGUgPSBuZXcgRmlsZShbcmVzcF0sIGBuYW1lLiR7dHlwZX1gLCB7CgkJCQkJCQkJdHlwZTogcmVzcC50eXBlCgkJCQkJCQl9KTsKCQkJCQkJfQoKCQkJCQkJc3RvcmVJbWFnZUluREIoZmlsZSwgcGlja2VyLmlkLCAndXNlckltYWdlJykKCQkJCQkJCS50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpCgkJCQkJCQkudGhlbigocmVzKSA9PiB7CgkJCQkJCQkJU3RvcmVEb2N1bWVudE5hbWUocGlja2VyLmlkLCByZXNbJ2ZpbGVfbmFtZSddKTsKCQkJCQkJCQlzbUxvYWRlci5pbm5lckhUTUwgPSAnJzsKCQkJCQkJCQlpbWFnZVVwbG9hZGluZyA9IGltYWdlVXBsb2FkaW5nLmZpbHRlcih4ID0+IHggIT0gcGlja2VyLmlkKTsKCQkJCQkJCX0pLmNhdGNoKGVyciA9PiB7CgkJCQkJCQkJc21Mb2FkZXIuaW5uZXJIVE1MID0gJyc7CgkJCQkJCQkJaW1hZ2VVcGxvYWRpbmcgPSBpbWFnZVVwbG9hZGluZy5maWx0ZXIoeCA9PiB4ICE9IHBpY2tlci5pZCk7CgkJCQkJCQkJYWxlcnQoYENvdWxkbid0IHVwbG9hZCBpbWFnZWApOwoJCQkJCQkJfSkKCQkJCQl9KQoJCQkJCS5jYXRjaChlcnIgPT4gewoJCQkJCQlzbUxvYWRlci5pbm5lckhUTUwgPSAnJzsKCQkJCQkJaW1hZ2VVcGxvYWRpbmcgPSBpbWFnZVVwbG9hZGluZy5maWx0ZXIoeCA9PiB4ICE9IHBpY2tlci5pZCk7CgkJCQkJCWFsZXJ0KGBDb3VsZG4ndCB1cGxvYWQgaW1hZ2VgKTsKCQkJCQl9KQoKCgkJCQkvLyBjb21wcmVzc0ltYWdlKG15RmlsZVVSTCkudGhlbigocmVzKSA9PiB7CgkJCQkvLyAJc3RvcmVEb2N1ZW1lbnQocGlja2VyLmlkLCByZXMpOwoJCQkJLy8gfSk7CgoJCQkJcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZSk7CgoJCQl9KTsKCQl9KTsKCX0KCglsZXQgc2lnbmF0dXJlUGFkcyA9IHt9OwoJZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdjYW52YXNbZm9yPSJzaWduIl0nKS5mb3JFYWNoKChlKSA9PiB7CgkJc2lnbmF0dXJlUGFkc1tlLmlkXSA9IG5ldyBTaWduYXR1cmVQYWQoZSk7CgkJZS53aWR0aCA9IDIyMDsKCQllLmhlaWdodCA9IDgwOwoJfSk7CgoJZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdidXR0b25bZm9yPSJjbGVhci1zaWduIl0nKS5mb3JFYWNoKChlKSA9PiB7CgkJZS5vbmNsaWNrID0gKGV2KSA9PiB7CgkJCWV2LnByZXZlbnREZWZhdWx0KCk7CgkJCXNpZ25hdHVyZVBhZHNbZS5nZXRBdHRyaWJ1dGUoImNvbnRyb2wiKV0uY2xlYXIoKTsKCQl9OwoJfSk7CgoJcmV0dXJuIHNpZ25hdHVyZVBhZHM7Cn0KCgpmdW5jdGlvbiBzdG9yZUltYWdlSW5EQihpbWFnZSwgaWQsIGRvY1R5cGUgPSAnJykgewoKCWNvbnN0IHVybHMgPSBuZXcgVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmKTsKCWNvbnN0IHNlYXJjaFBhcmFtcyA9IHVybHMuc2VhcmNoUGFyYW1zOwoJY29uc3Qgb3Bwb3J0dW5pdHlJZCA9IHNlYXJjaFBhcmFtcy5nZXQoIm9wcG9ydHVuaXR5SWQiKSB8fCAnJzsKCWNvbnN0IGN1c3RvbWVySWQgPSBzZWFyY2hQYXJhbXMuZ2V0KCJjdXN0b21lcmlkIikgfHwgJyc7CgoJY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsKCWZvcm1EYXRhLmFwcGVuZCgnZG9jVHlwZScsIGRvY1R5cGUpOwoJZm9ybURhdGEuYXBwZW5kKCdhcHBsaWNhbnQnLCBgQSR7aWRbaWQubGVuZ3RoIC0gMV19YCk7Cglmb3JtRGF0YS5hcHBlbmQoJ29wcG9ydHVuaXR5SWQnLCBvcHBvcnR1bml0eUlkKTsKCWZvcm1EYXRhLmFwcGVuZCgnY3VzdG9tZXJJZCcsIGN1c3RvbWVySWQpOwoJLy8gZm9ybURhdGEuYXBwZW5kKCdpbWFnZUZpbGVEYXRhJywgaW1hZ2UpOwoJZm9ybURhdGEuYXBwZW5kKCd1cGQnLCBpbWFnZSk7CgoJcmV0dXJuIGZldGNoKGRvY1ZlcmlmaWNhdGlvbiwgewoJCW1ldGhvZDogJ1BPU1QnLAoJCWJvZHk6IGZvcm1EYXRhCgl9KTsKfQoKZnVuY3Rpb24gYWRkcmVzc0ZpZWxkKHNjaCkgewoJZm9yIChsZXQgaSA9IDA7IGkgPCBhZGRyZXNzLmxlbmd0aDsgaSsrKSB7CgkJaWYgKGFkZHJlc3NbaV0gPT0gc2NoKSB7CgkJCXJldHVybiB0cnVlOwoJCX0KCX0KCXJldHVybiBmYWxzZTsKfQoKZnVuY3Rpb24gYWFwcGxpY2F0bkZpZWxkKHNjaCkgewoJZm9yIChsZXQgaSA9IDA7IGkgPCBhcHBjdHR5cGUubGVuZ3RoOyBpKyspIHsKCQlpZiAoc2NoLmluY2x1ZGVzKGFwcGN0dHlwZVtpXSkpIHsKCQkJcmV0dXJuIGFwcGN0dHlwZVtpXTsKCQl9Cgl9CglyZXR1cm4gZmFsc2U7Cn0KCmZ1bmN0aW9uIGZpbmFsVHlwZSh0eXBlKSB7Cgljb25zdCB0c3QgPSB0eXBlLnRvTG93ZXJDYXNlKCk7CglpZiAodHN0LmluY2x1ZGVzKCJwYW5jYXJkIikpIHsKCQlyZXR1cm4gInBhbmNhcmQiOwoJfSBlbHNlIGlmICh0c3QuaW5jbHVkZXMoImFhZGhhYXJmcm9udCIpKSB7CgkJcmV0dXJuICJhYWRoYXJmcm9udCI7Cgl9IGVsc2UgaWYgKHRzdC5pbmNsdWRlcygiYWFkaGFhcmJhY2siKSkgewoJCXJldHVybiAiYWFkaGFyYmFjayI7Cgl9IGVsc2UgaWYgKHRzdC5pbmNsdWRlcygicGFzc3BvcnQiKSkgewoJCXJldHVybiAicGFzc3BvcnQiOwoJfSBlbHNlIGlmICh0c3QuaW5jbHVkZXMoImFhZGhhcnN0cmlwIikpIHsKCQlyZXR1cm4gImFhZGhhcnN0cmlwIjsKCX0gZWxzZSB7CgkJcmV0dXJuICJvdGhlciI7Cgl9Cn0KZnVuY3Rpb24gc3RyaW5nVG9EYXRlKF9kYXRlLCBfZm9ybWF0LCBfZGVsaW1pdGVyKSB7Cgl2YXIgZm9ybWF0TG93ZXJDYXNlID0gX2Zvcm1hdC50b0xvd2VyQ2FzZSgpOwoJdmFyIGZvcm1hdEl0ZW1zID0gZm9ybWF0TG93ZXJDYXNlLnNwbGl0KF9kZWxpbWl0ZXIpOwoJdmFyIGRhdGVJdGVtcyA9IF9kYXRlLnNwbGl0KF9kZWxpbWl0ZXIpOwoJdmFyIG1vbnRoSW5kZXggPSBmb3JtYXRJdGVtcy5pbmRleE9mKCJtbSIpOwoJdmFyIGRheUluZGV4ID0gZm9ybWF0SXRlbXMuaW5kZXhPZigiZGQiKTsKCXZhciB5ZWFySW5kZXggPSBmb3JtYXRJdGVtcy5pbmRleE9mKCJ5eXl5Iik7Cgl2YXIgbW9udGggPSBwYXJzZUludChkYXRlSXRlbXNbbW9udGhJbmRleF0pOwoJbW9udGggLT0gMTsKCXZhciBmb3JtYXRlZERhdGUgPSBuZXcgRGF0ZShkYXRlSXRlbXNbeWVhckluZGV4XSwgbW9udGgsIGRhdGVJdGVtc1tkYXlJbmRleF0pOwoJcmV0dXJuIGZvcm1hdGVkRGF0ZTsKfQpmdW5jdGlvbiBmb3JtYXREYXRlRG9iKGRhdGVTdHJpbmcpIHsKCWNvbnN0IHJlc3VsdDEgPSBzdHJpbmdUb0RhdGUoZGF0ZVN0cmluZywgImRkL01NL3l5eXkiLCAiLyIpOwoJdmFyIGQgPSByZXN1bHQxLAoJCW1vbnRoID0gJycgKyAoZC5nZXRNb250aCgpICsgMSksCgkJZGF5ID0gJycgKyBkLmdldERhdGUoKSwKCQl5ZWFyID0gZC5nZXRGdWxsWWVhcigpOwoKCWlmIChtb250aC5sZW5ndGggPCAyKQoJCW1vbnRoID0gJzAnICsgbW9udGg7CglpZiAoZGF5Lmxlbmd0aCA8IDIpCgkJZGF5ID0gJzAnICsgZGF5OwoJcmV0dXJuIFt5ZWFyLCBtb250aCwgZGF5XS5qb2luKCctJyk7Cn0KZnVuY3Rpb24gdmVyaWZ5RG9jKHR5cGUsIGRhdGEsIG15dmFsdWUpIHsKCWNvbnN0IG15cHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKCQlmdW5jdGlvbiBpbm5lclZhbGlkYXRpb24oKSB7CgkJCWNvbnN0IGZpbmFsVHAgPSBmYWxzZSB8fCBmaW5hbFR5cGUodHlwZSk7CgkJCWlmIChmaW5hbFRwID09PSAiYWFkaGFyZnJvbnQiKSB7CgkJCQljb25zdCBhcGlVcmwgPSBkb2NWZXJpZmljYXRpb24gKyAiL2FhZGhhci1mcm9udCI7CgkJCQlmZXRjaChhcGlVcmwsIHsKCQkJCQltZXRob2Q6ICJwb3N0IiwKCQkJCQlib2R5OiBkYXRhLAoJCQkJfSkKCQkJCQkudGhlbigocmVzKSA9PiByZXMuanNvbigpKQoJCQkJCS50aGVuKCh2YWx1ZSkgPT4gewoJCQkJCQl2YXIgZGV0YWlscyA9IHsKCQkJCQkJCXZlcmlmaWVkOiB0cnVlLAoJCQkJCQkJbWVzc2FnZXM6IFtdLAoJCQkJCQkJdmFsdWU6IG51bGwsCgkJCQkJCX07CgoJCQkJCQlzZWFyY2hVcGxvYWQodmFsdWUucmVzdWx0KQoJCQkJCQkJLnRoZW4oKHVwcmVzKSA9PiB7CgkJCQkJCQkJaWYgKHVwcmVzKSB7CgkJCQkJCQkJCXNldFRpbWVvdXQoKCkgPT4gewoJCQkJCQkJCQkJdmFyIGZhaWxlZFZhciA9IFtdOwoJCQkJCQkJCQkJdmFyIGlzTnVtYmVyRXJyID0gZmFsc2U7CgkJCQkJCQkJCQl2YXIgaXNOYW1lRXJyID0gZmFsc2U7CgkJCQkJCQkJCQlsZXQgaW1nTnVtID0gdmFsdWUubnVtYmVyOwoKCQkJCQkJCQkJCWxldCBmb3JtYXRBYWRoYXIgPSBteXZhbHVlLmFkZGhhcl9udW1iZXIKCQkJCQkJCQkJCQkubWF0Y2goLy57MSw0fS9nKQoJCQkJCQkJCQkJCS5qb2luKCIgIik7CgoJCQkJCQkJCQkJY29uc3QgdmVyaWZ5T25lID0gbmV3IFByb21pc2UoKHJlc28sIHJlamUpID0+IHsKCQkJCQkJCQkJCQlsZXQgcmVnZXggPSBuZXcgUmVnRXhwKAoJCQkJCQkJCQkJCQkvXlsyLTldezF9WzAtOV17M31cc1swLTldezR9XHNbMC05XXs0fSQvCgkJCQkJCQkJCQkJKTsKCQkJCQkJCQkJCQlpZiAocmVnZXgudGVzdChpbWdOdW0pKSB7CgkJCQkJCQkJCQkJCXZlcmlmeU15VmFsdWVzKGZvcm1hdEFhZGhhcikKCQkJCQkJCQkJCQkJCS50aGVuKChyZXNwKSA9PiB7CgkJCQkJCQkJCQkJCQkJaWYgKCFyZXNwKSB7CgkJCQkJCQkJCQkJCQkJCWZhaWxlZFZhci5wdXNoKCJBYWRoYXIgTnVtYmVyIik7CgkJCQkJCQkJCQkJCQkJCWlzTnVtYmVyRXJyID0gdHJ1ZTsKCQkJCQkJCQkJCQkJCQl9CgkJCQkJCQkJCQkJCQkJcmVzbyh0cnVlKTsKCQkJCQkJCQkJCQkJCX0pCgkJCQkJCQkJCQkJCQkuY2F0Y2goKCkgPT4gewoJCQkJCQkJCQkJCQkJCWZhaWxlZFZhci5wdXNoKCJBYWRoYXIgTnVtYmVyIik7CgkJCQkJCQkJCQkJCQkJaXNOdW1iZXJFcnIgPSB0cnVlOwoJCQkJCQkJCQkJCQkJCXJlc28odHJ1ZSk7CgkJCQkJCQkJCQkJCQl9KTsKCQkJCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQkJCQlmYWlsZWRWYXIucHVzaCgiQWFkaGFyIE51bWJlciIpOwoJCQkJCQkJCQkJCQlpc051bWJlckVyciA9IHRydWU7CgkJCQkJCQkJCQkJCXJlc28odHJ1ZSk7CgkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJfSk7CgoJCQkJCQkJCQkJY29uc3QgdmVyaWZ5VHdvID0gbmV3IFByb21pc2UoKHJlc28sIHJlamUpID0+IHsKCQkJCQkJCQkJCQlpZiAodmFsdWUubmFtZSkgewoJCQkJCQkJCQkJCQl2ZXJpZnlNeVZhbHVlcyhnZW5lcmF0ZU15VmFsdWUobXl2YWx1ZS5uYW1lKSkKCQkJCQkJCQkJCQkJCS50aGVuKChyZXNwKSA9PiB7CgkJCQkJCQkJCQkJCQkJaWYgKCFyZXNwKSB7CgkJCQkJCQkJCQkJCQkJCWZhaWxlZFZhci5wdXNoKCJBYWRoYXIgTmFtZSIpOwoJCQkJCQkJCQkJCQkJCQlpc05hbWVFcnIgPSB0cnVlOwoJCQkJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCQkJCQlyZXNvKHRydWUpOwoJCQkJCQkJCQkJCQkJfSkKCQkJCQkJCQkJCQkJCS5jYXRjaCgoKSA9PiB7CgkJCQkJCQkJCQkJCQkJZmFpbGVkVmFyLnB1c2goIkFhZGhhciBOYW1lIik7CgkJCQkJCQkJCQkJCQkJaXNOYW1lRXJyID0gdHJ1ZTsKCQkJCQkJCQkJCQkJCQlyZXNvKHRydWUpOwoJCQkJCQkJCQkJCQkJfSk7CgkJCQkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJCQkJZmFpbGVkVmFyLnB1c2goIkFhZGhhciBOYW1lIik7CgkJCQkJCQkJCQkJCWlzTmFtZUVyciA9IHRydWU7CgkJCQkJCQkJCQkJCXJlc28odHJ1ZSk7CgkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJfSk7CgoJCQkJCQkJCQkJUHJvbWlzZS5hbGwoW3ZlcmlmeU9uZSwgdmVyaWZ5VHdvXSkudGhlbigocHJhcmVzKSA9PiB7CgkJCQkJCQkJCQkJaWYgKGlzTnVtYmVyRXJyIHx8IGlzTmFtZUVycikgewoJCQkJCQkJCQkJCQlkZXRhaWxzLm1lc3NhZ2VzLnB1c2goCgkJCQkJCQkJCQkJCQlgJHtmYWlsZWRWYXIuam9pbigKCQkJCQkJCQkJCQkJCQkiIGFuZCAiCgkJCQkJCQkJCQkJCQkpfSBpbiB0aGUgVXBsb2FkZWQgZG9jdW1lbnQgZG9zZSBub3QgbWF0Y2ggd2l0aCB0aGUgZW50ZXJlZCBkZXRhaWxzLiR7aXNOdW1iZXJFcnIKCQkJCQkJCQkJCQkJCQk/IGA8YnI+VXBsb2FkZWQgQWFkaGFyIE51bWJlcjogJHtpbWdOdW19YAoJCQkJCQkJCQkJCQkJCTogIiIKCQkJCQkJCQkJCQkJCX0ke2lzTmFtZUVycgoJCQkJCQkJCQkJCQkJCT8gYDxicj5VcGxvYWRlZCBBYWRoYXIgTmFtZTogJHt2YWx1ZS5uYW1lfWAKCQkJCQkJCQkJCQkJCQk6ICIiCgkJCQkJCQkJCQkJCQl9JHtpc051bWJlckVycgoJCQkJCQkJCQkJCQkJCT8gYDxicj5FbnRlcmVkIEFhZGhhciBOdW1iZXIgaW4gdGhlIGZvcm06ICR7Zm9ybWF0QWFkaGFyfWAKCQkJCQkJCQkJCQkJCQk6ICIiCgkJCQkJCQkJCQkJCQl9JHtpc05hbWVFcnIKCQkJCQkJCQkJCQkJCQk/IGA8YnI+RW50ZXJlZCBBYWRoYXIgTmFtZSBpbiB0aGUgZm9ybTogJHtnZW5lcmF0ZU15VmFsdWUoCgkJCQkJCQkJCQkJCQkJCW15dmFsdWUubmFtZQoJCQkJCQkJCQkJCQkJCSl9YAoJCQkJCQkJCQkJCQkJCTogIiIKCQkJCQkJCQkJCQkJCX08YnI+YAoJCQkJCQkJCQkJCQkpOwoJCQkJCQkJCQkJCQlkZXRhaWxzLnZlcmlmaWVkID0gZmFsc2U7CgkJCQkJCQkJCQkJCWRldGFpbHMudmFsdWUgPSB2YWx1ZTsKCQkJCQkJCQkJCQl9CgkJCQkJCQkJCQkJcmVzb2x2ZShkZXRhaWxzKTsKCQkJCQkJCQkJCX0pOwoJCQkJCQkJCQl9LCAxNTAwKTsKCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQlyZXNvbHZlKGZhbHNlKTsKCQkJCQkJCQl9CgkJCQkJCQl9KQoJCQkJCQkJLmNhdGNoKCgpID0+IHsKCQkJCQkJCQlyZXNvbHZlKGZhbHNlKTsKCQkJCQkJCX0pOwoJCQkJCX0pCgkJCQkJLmNhdGNoKCgpID0+IHsKCQkJCQkJcmVzb2x2ZShmYWxzZSk7CgkJCQkJfSk7CgkJCX0gZWxzZSBpZiAoZmluYWxUcCA9PT0gImFhZGhhcmJhY2siKSB7CgkJCQljb25zdCBhcGlVcmwgPSBkb2NWZXJpZmljYXRpb24gKyAiL2FhZGhhci1iYWNrIjsKCQkJCWZldGNoKGFwaVVybCwgewoJCQkJCW1ldGhvZDogInBvc3QiLAoJCQkJCWJvZHk6IGRhdGEsCgkJCQl9KQoJCQkJCS50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpCgkJCQkJLnRoZW4oKHZhbHVlKSA9PiB7CgkJCQkJCXZhciBkZXRhaWxzID0gewoJCQkJCQkJdmVyaWZpZWQ6IHRydWUsCgkJCQkJCQltZXNzYWdlczogW10sCgkJCQkJCQl2YWx1ZTogbnVsbCwKCQkJCQkJfTsKCgkJCQkJCXZhciBhZGRyZXNzVmFsdWUgPSB2YWx1ZS5yZXN1bHQ7CgkJCQkJCWlmIChhZGRyZXNzVmFsdWUpIHsKCQkJCQkJCWFkZHJlc3NWYWx1ZSA9IGFkZHJlc3NWYWx1ZVswXQoJCQkJCQkJCT8gW2FkZHJlc3NWYWx1ZVswXS5uYW1lXQoJCQkJCQkJCTogYWRkcmVzc1ZhbHVlOwoJCQkJCQl9CgoJCQkJCQlzZWFyY2hVcGxvYWQoYWRkcmVzc1ZhbHVlKQoJCQkJCQkJLnRoZW4oKHVwcmVzKSA9PiB7CgkJCQkJCQkJaWYgKHVwcmVzKSB7CgkJCQkJCQkJCXNldFRpbWVvdXQoKCkgPT4gewoJCQkJCQkJCQkJY29uc3QgcHJvbWlzZUxwID0gW107CgkJCQkJCQkJCQljb25zdCBhZGRLZXkgPSBPYmplY3Qua2V5cyhteXZhbHVlLmFkZHJlc3MpOwoJCQkJCQkJCQkJZm9yIChsZXQgaSA9IDA7IGkgPCBhZGRLZXkubGVuZ3RoOyBpKyspIHsKCQkJCQkJCQkJCQlsZXQgdmVyaWZ5QWRkciA9IG5ldyBQcm9taXNlKChyZXNvLCByZWplKSA9PiB7CgkJCQkJCQkJCQkJCWlmICh2YWx1ZS5hZGRyZXNzKSB7CgkJCQkJCQkJCQkJCQl2ZXJpZnlNeVZhbHVlcyhteXZhbHVlLmFkZHJlc3NbYWRkS2V5W2ldXSkKCQkJCQkJCQkJCQkJCQkudGhlbigocmVzcCkgPT4gewoJCQkJCQkJCQkJCQkJCQlpZiAoIXJlc3ApIHsKCQkJCQkJCQkJCQkJCQkJCXJlc28oZmFsc2UpOwoJCQkJCQkJCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQkJCQkJCQkJcmVzbyh0cnVlKTsKCQkJCQkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJCQkJCX0pCgkJCQkJCQkJCQkJCQkJLmNhdGNoKCgpID0+IHJlc28oZmFsc2UpKTsKCQkJCQkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJCQkJCXJlc28oZmFsc2UpOwoJCQkJCQkJCQkJCQl9CgkJCQkJCQkJCQkJfSk7CgkJCQkJCQkJCQkJcHJvbWlzZUxwLnB1c2godmVyaWZ5QWRkcik7CgkJCQkJCQkJCQl9CgoJCQkJCQkJCQkJUHJvbWlzZS5hbGwocHJvbWlzZUxwKS50aGVuKChyZXMpID0+IHsKCQkJCQkJCQkJCQlpZiAocmVzLmpvaW4oIiIpLmluY2x1ZGVzKCJmYWxzZSIpKSB7CgkJCQkJCQkJCQkJCWRldGFpbHMubWVzc2FnZXMucHVzaCgKCQkJCQkJCQkJCQkJCWBBYWRoYXIgYWRkcmVzcyBpbiB0aGUgVXBsb2FkZWQgZG9jdW1lbnQgZG9zZSBub3QgbWF0Y2ggd2l0aCB0aGUgZW50ZXJlZCBkZXRhaWxzLiA8YnI+IFVwbG9hZGVkIEFhZGhhciBhZGRyZXNzOiAke3ZhbHVlLmFkZHJlc3MKCQkJCQkJCQkJCQkJCX0gIDxicj4gRW50ZXJlZCBBYWRoYXIgYWRkcmVzcyBpbiB0aGUgZm9ybTogJHtnZW5lcmF0ZU15VmFsdWUoCgkJCQkJCQkJCQkJCQkJbXl2YWx1ZS5hZGRyZXNzCgkJCQkJCQkJCQkJCQkpfSA8YnI+YAoJCQkJCQkJCQkJCQkpOwoJCQkJCQkJCQkJCQlkZXRhaWxzLnZlcmlmaWVkID0gZmFsc2U7CgkJCQkJCQkJCQkJCWRldGFpbHMudmFsdWUgPSB2YWx1ZTsKCQkJCQkJCQkJCQl9CgkJCQkJCQkJCQkJcmVzb2x2ZShkZXRhaWxzKTsKCQkJCQkJCQkJCX0pOwoJCQkJCQkJCQl9LCAxNTAwKTsKCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQlyZWplY3QoZmFsc2UpOwoJCQkJCQkJCX0KCQkJCQkJCX0pCgkJCQkJCQkuY2F0Y2goKCkgPT4gewoJCQkJCQkJCXJlamVjdChmYWxzZSk7CgkJCQkJCQl9KTsKCQkJCQl9KQoJCQkJCS5jYXRjaCgoZXJyKSA9PiB7CgkJCQkJCXJlc29sdmUoZmFsc2UpOwoJCQkJCX0pOwoJCQl9IGVsc2UgaWYgKGZpbmFsVHAgPT09ICJwYW5jYXJkIikgewoJCQkJY29uc3QgYXBpVXJsID0gZG9jVmVyaWZpY2F0aW9uICsgIi9wYW4iOwoJCQkJZmV0Y2goYXBpVXJsLCB7CgkJCQkJbWV0aG9kOiAicG9zdCIsCgkJCQkJYm9keTogZGF0YSwKCQkJCX0pCgkJCQkJLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSkKCQkJCQkudGhlbigodmFsdWUpID0+IHsKCQkJCQkJdmFyIGRldGFpbHMgPSB7CgkJCQkJCQl2ZXJpZmllZDogdHJ1ZSwKCQkJCQkJCW1lc3NhZ2VzOiBbXSwKCQkJCQkJCXZhbHVlOiBudWxsLAoJCQkJCQl9OwoKCgoKCQkJCQkJc2VhcmNoVXBsb2FkKHZhbHVlLnJlc3VsdCkKCQkJCQkJCS50aGVuKCh1cHJlcykgPT4gewoJCQkJCQkJCWlmICh1cHJlcykgewoJCQkJCQkJCQlzZXRUaW1lb3V0KCgpID0+IHsKCQkJCQkJCQkJCWNvbnN0IGZhaWxlZFZhciA9IFtdOwoJCQkJCQkJCQkJdmFyIGlzTnVtYmVyRXJyID0gZmFsc2U7CgkJCQkJCQkJCQl2YXIgaXNOYW1lRXJyID0gZmFsc2U7CgkJCQkJCQkJCQlsZXQgaW1nTnVtID0gdmFsdWUubnVtYmVyCgkJCQkJCQkJCQkJPyB2YWx1ZS5udW1iZXIucmVwbGFjZUFsbCgiICIsICIiKQoJCQkJCQkJCQkJCTogIiI7CgoJCQkJCQkJCQkJY29uc3QgdmVyaWZ5T25lID0gbmV3IFByb21pc2UoKHJlc28sIHJlamUpID0+IHsKCQkJCQkJCQkJCQlsZXQgcmVnZXggPSBuZXcgUmVnRXhwKC9eW0EtWl17NX1bMC05XXs0fVtBLVpdezF9JC8pOwoJCQkJCQkJCQkJCWlmIChyZWdleC50ZXN0KGltZ051bSkpIHsKCQkJCQkJCQkJCQkJdmVyaWZ5TXlWYWx1ZXMobXl2YWx1ZS5wYW5fbnVtYmVyKQoJCQkJCQkJCQkJCQkJLnRoZW4oKHJlc3ApID0+IHsKCQkJCQkJCQkJCQkJCQlpZiAoIXJlc3ApIHsKCQkJCQkJCQkJCQkJCQkJZmFpbGVkVmFyLnB1c2goIlBBTiBOdW1iZXIiKTsKCQkJCQkJCQkJCQkJCQkJaXNOdW1iZXJFcnIgPSB0cnVlOwoJCQkJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCQkJCQlyZXNvKHRydWUpOwoJCQkJCQkJCQkJCQkJfSkKCQkJCQkJCQkJCQkJCS5jYXRjaCgoKSA9PiB7CgkJCQkJCQkJCQkJCQkJZmFpbGVkVmFyLnB1c2goIlBBTiBOdW1iZXIiKTsKCQkJCQkJCQkJCQkJCQlpc051bWJlckVyciA9IHRydWU7CgkJCQkJCQkJCQkJCQkJcmVzbyh0cnVlKTsKCQkJCQkJCQkJCQkJCX0pOwoJCQkJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCQkJCWZhaWxlZFZhci5wdXNoKCJQQU4gTnVtYmVyIik7CgkJCQkJCQkJCQkJCWlzTnVtYmVyRXJyID0gdHJ1ZTsKCQkJCQkJCQkJCQkJcmVzbyh0cnVlKTsKCQkJCQkJCQkJCQl9CgkJCQkJCQkJCQl9KTsKCgkJCQkJCQkJCQljb25zdCB2ZXJpZnlUd28gPSBuZXcgUHJvbWlzZSgocmVzbywgcmVqZSkgPT4gewoJCQkJCQkJCQkJCWlmICh2YWx1ZS5uYW1lKSB7CgkJCQkJCQkJCQkJCXZlcmlmeU15VmFsdWVzKGdlbmVyYXRlTXlWYWx1ZShteXZhbHVlLm5hbWUpKQoJCQkJCQkJCQkJCQkJLnRoZW4oKHJlc3ApID0+IHsKCQkJCQkJCQkJCQkJCQlpZiAoIXJlc3ApIHsKCQkJCQkJCQkJCQkJCQkJZmFpbGVkVmFyLnB1c2goIlBBTiBOYW1lIik7CgkJCQkJCQkJCQkJCQkJCWlzTmFtZUVyciA9IHRydWU7CgkJCQkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJCQkJCXJlc28odHJ1ZSk7CgkJCQkJCQkJCQkJCQl9KQoJCQkJCQkJCQkJCQkJLmNhdGNoKCgpID0+IHsKCQkJCQkJCQkJCQkJCQlmYWlsZWRWYXIucHVzaCgiUEFOIE5hbWUiKTsKCQkJCQkJCQkJCQkJCQlpc05hbWVFcnIgPSB0cnVlOwoJCQkJCQkJCQkJCQkJCXJlc28odHJ1ZSk7CgkJCQkJCQkJCQkJCQl9KTsKCQkJCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQkJCQlmYWlsZWRWYXIucHVzaCgiUEFOIE5hbWUiKTsKCQkJCQkJCQkJCQkJaXNOYW1lRXJyID0gdHJ1ZTsKCQkJCQkJCQkJCQkJcmVzbyh0cnVlKTsKCQkJCQkJCQkJCQl9CgkJCQkJCQkJCQl9KTsKCgkJCQkJCQkJCQlQcm9taXNlLmFsbChbdmVyaWZ5T25lLCB2ZXJpZnlUd29dKS50aGVuKChwcmFyZXMpID0+IHsKCQkJCQkJCQkJCQlpZiAoaXNOYW1lRXJyIHx8IGlzTnVtYmVyRXJyKSB7CgkJCQkJCQkJCQkJCWRldGFpbHMubWVzc2FnZXMucHVzaCgKCQkJCQkJCQkJCQkJCWAke2ZhaWxlZFZhci5qb2luKAoJCQkJCQkJCQkJCQkJCSIgYW5kICIKCQkJCQkJCQkJCQkJCSl9IGluIHRoZSBVcGxvYWRlZCBkb2N1bWVudCBkb3NlIG5vdCBtYXRjaCB3aXRoIHRoZSBlbnRlcmVkIGRldGFpbHMuJHtpc051bWJlckVycgoJCQkJCQkJCQkJCQkJCT8gYDxicj5VcGxvYWRlZCBQQU4gTnVtYmVyOiAke2ltZ051bX1gCgkJCQkJCQkJCQkJCQkJOiAiIgoJCQkJCQkJCQkJCQkJfSR7aXNOYW1lRXJyCgkJCQkJCQkJCQkJCQkJPyBgPGJyPlVwbG9hZGVkIFBBTiBOYW1lOiAke3ZhbHVlLm5hbWV9YAoJCQkJCQkJCQkJCQkJCTogIiIKCQkJCQkJCQkJCQkJCX0ke2lzTnVtYmVyRXJyCgkJCQkJCQkJCQkJCQkJPyBgPGJyPkVudGVyZWQgUEFOIE51bWJlciBpbiB0aGUgZm9ybTogJHtteXZhbHVlLnBhbl9udW1iZXJ9YAoJCQkJCQkJCQkJCQkJCTogIiIKCQkJCQkJCQkJCQkJCX0ke2lzTmFtZUVycgoJCQkJCQkJCQkJCQkJCT8gYDxicj5FbnRlcmVkIFBBTiBOYW1lIGluIHRoZSBmb3JtOiAke2dlbmVyYXRlTXlWYWx1ZSgKCQkJCQkJCQkJCQkJCQkJbXl2YWx1ZS5uYW1lCgkJCQkJCQkJCQkJCQkJKX1gCgkJCQkJCQkJCQkJCQkJOiAiIgoJCQkJCQkJCQkJCQkJfTxicj5gCgkJCQkJCQkJCQkJCSk7CgkJCQkJCQkJCQkJCWRldGFpbHMudmVyaWZpZWQgPSBmYWxzZTsKCQkJCQkJCQkJCQkJZGV0YWlscy52YWx1ZSA9IHZhbHVlOwoJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCQlyZXNvbHZlKGRldGFpbHMpOwoJCQkJCQkJCQkJfSk7CgkJCQkJCQkJCX0sIDE1MDApOwoJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCXJlamVjdChmYWxzZSk7CgkJCQkJCQkJfQoJCQkJCQkJfSkKCQkJCQkJCS5jYXRjaCgoZXJyb3IpID0+IHsKCQkJCQkJCQljb25zb2xlLmxvZyhlcnJvcikKCQkJCQkJCQlyZWplY3QoZmFsc2UpOwoJCQkJCQkJfSk7CgkJCQkJfSkKCQkJCQkuY2F0Y2goKGVycm9yKSA9PiB7CgkJCQkJCWNvbnNvbGUubG9nKGVycm9yKQoJCQkJCQlyZWplY3QoZmFsc2UpOwoJCQkJCX0pOwoJCQl9IGVsc2UgaWYgKGZpbmFsVHAgPT09ICJwYXNzcG9ydCIpIHsKCQkJCWNvbnN0IGFwaVVybCA9IGRvY1ZlcmlmaWNhdGlvbiArICIvcGFzc3BvcnQiOwoJCQkJZmV0Y2goYXBpVXJsLCB7CgkJCQkJbWV0aG9kOiAicG9zdCIsCgkJCQkJYm9keTogZGF0YSwKCQkJCX0pCgkJCQkJLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSkKCQkJCQkudGhlbigodmFsdWUpID0+IHsKCQkJCQkJdmFyIGRldGFpbHMgPSB7CgkJCQkJCQl2ZXJpZmllZDogdHJ1ZSwKCQkJCQkJCW1lc3NhZ2VzOiBbXSwKCQkJCQkJCXZhbHVlOiBudWxsLAoJCQkJCQl9OwoKCQkJCQkJc2VhcmNoVXBsb2FkKHZhbHVlLnJlc3VsdCkKCQkJCQkJCS50aGVuKCh1cHJlcykgPT4gewoJCQkJCQkJCWlmICh1cHJlcykgewoJCQkJCQkJCQlzZXRUaW1lb3V0KCgpID0+IHsKCQkJCQkJCQkJCXZhciBpc05hbWVFcnIgPSBmYWxzZTsKCgkJCQkJCQkJCQljb25zdCB2ZXJpZnlUd28gPSBuZXcgUHJvbWlzZSgocmVzbywgcmVqZSkgPT4gewoJCQkJCQkJCQkJCWlmICh2YWx1ZS5uYW1lKSB7CgkJCQkJCQkJCQkJCXZlcmlmeU15VmFsdWVzKGdlbmVyYXRlTXlWYWx1ZShteXZhbHVlLm5hbWUpKQoJCQkJCQkJCQkJCQkJLnRoZW4oKHJlc3ApID0+IHsKCQkJCQkJCQkJCQkJCQlpZiAoIXJlc3ApIHsKCQkJCQkJCQkJCQkJCQkJaXNOYW1lRXJyID0gdHJ1ZTsKCQkJCQkJCQkJCQkJCQl9CgkJCQkJCQkJCQkJCQkJcmVzbyh0cnVlKTsKCQkJCQkJCQkJCQkJCX0pCgkJCQkJCQkJCQkJCQkuY2F0Y2goKCkgPT4gewoJCQkJCQkJCQkJCQkJCWlzTmFtZUVyciA9IHRydWU7CgkJCQkJCQkJCQkJCQkJcmVzbyh0cnVlKTsKCQkJCQkJCQkJCQkJCX0pOwoJCQkJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCQkJCWlzTmFtZUVyciA9IHRydWU7CgkJCQkJCQkJCQkJCXJlc28odHJ1ZSk7CgkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJfSk7CgoJCQkJCQkJCQkJUHJvbWlzZS5hbGwoW3ZlcmlmeVR3b10pLnRoZW4oKHByYXJlcykgPT4gewoJCQkJCQkJCQkJCWlmIChpc05hbWVFcnIpIHsKCQkJCQkJCQkJCQkJZGV0YWlscy5tZXNzYWdlcy5wdXNoKAoJCQkJCQkJCQkJCQkJYFBhc3Nwb3J0IE5hbWUgaW4gdGhlIFVwbG9hZGVkIGRvY3VtZW50IGRvc2Ugbm90IG1hdGNoIHdpdGggdGhlIGVudGVyZWQgZGV0YWlscy4ke2lzTmFtZUVycgoJCQkJCQkJCQkJCQkJCT8gYDxicj5VcGxvYWRlZCBQYXNzcG9ydCBOYW1lOiAke3ZhbHVlLm5hbWV9YAoJCQkJCQkJCQkJCQkJCTogIiIKCQkJCQkJCQkJCQkJCX0ke2lzTmFtZUVycgoJCQkJCQkJCQkJCQkJCT8gYDxicj5FbnRlcmVkIFBhc3Nwb3J0IE5hbWUgaW4gdGhlIGZvcm06ICR7Z2VuZXJhdGVNeVZhbHVlKAoJCQkJCQkJCQkJCQkJCQlteXZhbHVlLm5hbWUKCQkJCQkJCQkJCQkJCQkpfWAKCQkJCQkJCQkJCQkJCQk6ICIiCgkJCQkJCQkJCQkJCQl9PGJyPmAKCQkJCQkJCQkJCQkJKTsKCQkJCQkJCQkJCQkJZGV0YWlscy52ZXJpZmllZCA9IGZhbHNlOwoJCQkJCQkJCQkJCQlkZXRhaWxzLnZhbHVlID0gdmFsdWU7CgkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJCXJlc29sdmUoZGV0YWlscyk7CgkJCQkJCQkJCQl9KTsKCQkJCQkJCQkJfSwgMTUwMCk7CgkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJcmVzb2x2ZShmYWxzZSk7CgkJCQkJCQkJfQoJCQkJCQkJfSkKCQkJCQkJCS5jYXRjaCgoKSA9PiB7CgkJCQkJCQkJcmVzb2x2ZShmYWxzZSk7CgkJCQkJCQl9KTsKCQkJCQl9KQoJCQkJCS5jYXRjaCgoKSA9PiB7CgkJCQkJCXJlamVjdChmYWxzZSk7CgkJCQkJfSk7CgkJCX0gZWxzZSBpZiAoZmluYWxUcCA9PT0gIm90aGVyIikgewoJCQkJcmVzb2x2ZSh7CgkJCQkJdmVyaWZpZWQ6IHRydWUsCgkJCQkJbWVzc2FnZXM6IFtdLAoJCQkJCXZhbHVlOiBudWxsLAoJCQkJfSk7CgkJCX0KCQl9CgoJCWlubmVyVmFsaWRhdGlvbigpOwoJfSk7CglyZXR1cm4gbXlwcm9taXNlOwp9CmZ1bmN0aW9uIHZlcmlmeURvY05ldyh0eXBlLCBkYXRhLCBteXZhbHVlKSB7CgoJbGV0IGN1cnJlbnRBcHBsaWNhbnQgPSBzY2hlbWFbJ2FwcGxpY2FudC1kZXRhaWxzJ11bJ3N1Yi1zZWN0aW9ucyddOwoJY29uc3QgdXJscyA9IG5ldyBVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpOwoJY29uc3Qgc2VhcmNoUGFyYW1zID0gdXJscy5zZWFyY2hQYXJhbXM7CgoJY29uc3Qgb3Bwb3J0dW5pdHlJZCA9IHNlYXJjaFBhcmFtcy5nZXQoIm9wcG9ydHVuaXR5SWQiKSB8fCAnJzsKCWNvbnN0IGN1c3RvbWVySWQgPSBzZWFyY2hQYXJhbXMuZ2V0KCJjdXN0b21lcmlkIikgfHwgJyc7CglkYXRhLmFwcGVuZCgnYXBwbGljYW50JywgbXl2YWx1ZSk7CglkYXRhLmFwcGVuZCgnZG9jVHlwZScsIGZpbmFsVHlwZSh0eXBlKSB8fCAnJyk7CglkYXRhLmFwcGVuZCgnb3Bwb3J0dW5pdHlJZCcsIG9wcG9ydHVuaXR5SWQpOwoJZGF0YS5hcHBlbmQoJ2N1c3RvbWVySWQnLCBjdXN0b21lcklkKTsKCgoJY29uc3QgbXlwcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewoJCWZ1bmN0aW9uIGlubmVyVmFsaWRhdGlvbigpIHsKCQkJY29uc3QgZmluYWxUcCA9IGZhbHNlIHx8IGZpbmFsVHlwZSh0eXBlKTsKCgkJCXNldFRpbWVvdXQoKCkgPT4gewoJCQkJcmVqZWN0KGZhbHNlKTsKCQkJCS8vIGFsZXJ0KCJJdCBpcyB0YWtpbmcgdG9vIGxvbmcuIFBsZWFzZSBwcm9jZWVkIE1hbnVhbGx5LiIpOwoJCQl9LCAzMDAwMCk7CgoJCQlpZiAoZmluYWxUcCA9PT0gImFhZGhhcmZyb250IikgewoJCQkJLy8gY29uc3QgYXBpVXJsID0gZG9jVmVyaWZpY2F0aW9uICsgIi9hYWRoYXItZnJvbnQiOwoJCQkJY29uc3QgYXBpVXJsID0gZG9jVmVyaWZpY2F0aW9uOwoJCQkJbGV0IHJlc3A7CgkJCQlmZXRjaChhcGlVcmwsIHsKCQkJCQltZXRob2Q6ICJwb3N0IiwKCQkJCQlib2R5OiBkYXRhLAoJCQkJfSkKCQkJCQkudGhlbigocmVzKSA9PiByZXMuanNvbigpKQoJCQkJCS50aGVuKCh2YWx1ZSkgPT4gewoJCQkJCQl2YXIgZGV0YWlscyA9IHsKCQkJCQkJCXZlcmlmaWVkOiB0cnVlLAoJCQkJCQkJbWVzc2FnZXM6IFsnUGxlYXNlIHVwbG9hZCBhIGNsZWFyIEFhZGhhYXIgQ2FyZC4gQWFkaGFhciBudW1iZXIgY291bGQgbm90IGJlIHJlYWQgZnJvbSB0aGUgY3VycmVudCBJbWFnZS5Zb3UgbWF5IGNob29zZSB0byBlbnRlciBtYW51YWxseSBvbiB0aGUgbmV4dCBzY3JlZW4uJ10sCgkJCQkJCQl2YWx1ZTogdmFsdWUsCgkJCQkJCX07CgkJCQkJCXJlc3AgPSBkZXRhaWxzOwoJCQkJCQlsZXQgU0FMVVRBVElPTl9uZXcgPSAnTXIuJzsKCQkJCQkJaWYgKHZhbHVlLkdFTkRFUi50cmltKCkudG9Mb3dlckNhc2UoKSA9PSAnbWFsZScpIHsKCQkJCQkJCVNBTFVUQVRJT05fbmV3ID0gJ01yLic7CgkJCQkJCX0KCQkJCQkJaWYgKHZhbHVlLkdFTkRFUi50cmltKCkudG9Mb3dlckNhc2UoKSA9PSAnZmVtYWxlJykgewoJCQkJCQkJU0FMVVRBVElPTl9uZXcgPSAnTXMuJzsKCQkJCQkJfQoKCQkJCQkJLy8gU0VUIEVYVFJBQ1RFRCBEQVRBCgkJCQkJCWNvbnN0IGlkeCA9ICgrbXl2YWx1ZS50cmltKClbMV0pIC0gMTsKCQkJCQkJY3VycmVudEFwcGxpY2FudFtpZHhdWydmb3JtJ11bMF0uZGVmYXVsdFZhbHVlID0gU0FMVVRBVElPTl9uZXcKCQkJCQkJY3VycmVudEFwcGxpY2FudFtpZHhdWydmb3JtJ11bOV0uZGVmYXVsdFZhbHVlID0gdmFsdWVbJ0FBREhBUiBOTyddLnRyaW0oKQoKCQkJCQkJLy8gbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2lkRGV0YWlsc0ExJywgSlNPTi5zdHJpbmdpZnkoY3VycmVudEFwcGxpY2FudCkpOwoJCQkJCQlpZERldGFpbHNBMSA9IEpTT04uc3RyaW5naWZ5KGN1cnJlbnRBcHBsaWNhbnQpOwoJCQkJCQlyZXNvbHZlKGRldGFpbHMpOwoJCQkJCX0pCgkJCQkJLmNhdGNoKCgpID0+IHsKCQkJCQkJLy9yZXNvbHZlKGZhbHNlKTsKCQkJCQkJcmVzb2x2ZShyZXNwKTsKCQkJCQl9KTsKCQkJfSBlbHNlIGlmIChmaW5hbFRwID09PSAiYWFkaGFyYmFjayIpIHsKCQkJCS8vIGNvbnN0IGFwaVVybCA9IGRvY1ZlcmlmaWNhdGlvbiArICIvYWFkaGFyLWJhY2siOwoJCQkJY29uc3QgYXBpVXJsID0gZG9jVmVyaWZpY2F0aW9uOwoJCQkJZmV0Y2goYXBpVXJsLCB7CgkJCQkJbWV0aG9kOiAicG9zdCIsCgkJCQkJYm9keTogZGF0YSwKCQkJCX0pCgkJCQkJLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSkKCQkJCQkudGhlbigodmFsdWUpID0+IHsKCQkJCQkJdmFyIGRldGFpbHMgPSB7CgkJCQkJCQl2ZXJpZmllZDogdHJ1ZSwKCQkJCQkJCW1lc3NhZ2VzOiBbJ1BsZWFzZSB1cGxvYWQgYSBjbGVhciBBYWRoYWFyIENhcmQuIEFhZGhhYXIgbnVtYmVyIGNvdWxkIG5vdCBiZSByZWFkIGZyb20gdGhlIGN1cnJlbnQgSW1hZ2UuWW91IG1heSBjaG9vc2UgdG8gZW50ZXIgbWFudWFsbHkgb24gdGhlIG5leHQgc2NyZWVuLiddLAoJCQkJCQkJdmFsdWU6IHZhbHVlLAoJCQkJCQl9OwoJCQkJCQlyZXNwID0gZGV0YWlsczsKCgkJCQkJCWNvbnN0IGlkeCA9ICgrbXl2YWx1ZS50cmltKClbMV0pIC0gMTsKCQkJCQkJbGV0IFNBTFVUQVRJT05fbmV3ID0gJ01yLic7CgkJCQkJCWN1cnJlbnRBcHBsaWNhbnRbaWR4XVsnZm9ybSddWzBdLmRlZmF1bHRWYWx1ZSA9IFNBTFVUQVRJT05fbmV3CgkJCQkJCWN1cnJlbnRBcHBsaWNhbnRbaWR4XVsnZm9ybSddWzEzXS5kZWZhdWx0VmFsdWUgPSB2YWx1ZVsnSG91c2Vfbm8nXS50cmltKCk7CgkJCQkJCWN1cnJlbnRBcHBsaWNhbnRbaWR4XVsnZm9ybSddWzE0XS5kZWZhdWx0VmFsdWUgPSB2YWx1ZVsnQnVpbGRpbmdfbmFtZSddLnRyaW0oKTsKCQkJCQkJY3VycmVudEFwcGxpY2FudFtpZHhdWydmb3JtJ11bMTVdLmRlZmF1bHRWYWx1ZSA9IHZhbHVlWydsb2NhbGl0eSddLnRyaW0oKTsKCQkJCQkJY3VycmVudEFwcGxpY2FudFtpZHhdWydmb3JtJ11bMTZdLmRlZmF1bHRWYWx1ZSA9IHZhbHVlWydzdHJlZXQnXS50cmltKCk7CgkJCQkJCWN1cnJlbnRBcHBsaWNhbnRbaWR4XVsnZm9ybSddWzE3XS5kZWZhdWx0VmFsdWUgPSB2YWx1ZVsnY2l0eSddLnRyaW0oKTsKCQkJCQkJY3VycmVudEFwcGxpY2FudFtpZHhdWydmb3JtJ11bMThdLmRlZmF1bHRWYWx1ZSA9IHZhbHVlWydQSU4nXS50cmltKCk7CgkJCQkJCWN1cnJlbnRBcHBsaWNhbnRbaWR4XVsnZm9ybSddWzE5XS5kZWZhdWx0VmFsdWUgPSB2YWx1ZVsnc3RhdGUnXTsKCQkJCQkJY3VycmVudEFwcGxpY2FudFtpZHhdWydmb3JtJ11bMjBdLmRlZmF1bHRWYWx1ZSA9IHZhbHVlWydjb3VudHJ5J107ICAvLyBDb3VudHJ5CgoKCQkJCQkJLy8gbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2lkRGV0YWlsc0ExJywgSlNPTi5zdHJpbmdpZnkoY3VycmVudEFwcGxpY2FudCkpOwoJCQkJCQlpZERldGFpbHNBMSA9IEpTT04uc3RyaW5naWZ5KGN1cnJlbnRBcHBsaWNhbnQpOwoJCQkJCQlyZXNvbHZlKGRldGFpbHMpOwoJCQkJCX0pCgkJCQkJLmNhdGNoKChlcnJvcikgPT4gewoJCQkJCQkvL2NvbnNvbGUubG9nKGVycm9yKQoJCQkJCQkvL3Jlc29sdmUoZmFsc2UpOwoJCQkJCQlyZXNvbHZlKHJlc3ApOwoJCQkJCX0pOwoJCQl9IGVsc2UgaWYgKGZpbmFsVHAgPT09ICJwYW5jYXJkIikgewoKCQkJCWNvbnN0IGFwaVVybCA9IGRvY1ZlcmlmaWNhdGlvbjsKCQkJCWZldGNoKGFwaVVybCwgewoJCQkJCW1ldGhvZDogInBvc3QiLAoJCQkJCWJvZHk6IGRhdGEsCgkJCQl9KS50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSkKCQkJCQkudGhlbigodmFsdWUpID0+IHsKCQkJCQkJLy8gYWRkZWQgYnkgbWFub2oKCQkJCQkJaWYgKG15dmFsdWUgPT0gJ0ExJykgewoJCQkJCQkJY29uc3QgbmFtZV9mID0gJ1ByaW1hcnknCgkJCQkJCX0gZWxzZSB7CgkJCQkJCQljb25zdCBuYW1lX2YgPSAnSm9pbnQnCgkJCQkJCX0KCQkJCQkJdmFyIGRldGFpbHMgPSB7CgkJCQkJCQl2ZXJpZmllZDogdHJ1ZSwKCQkJCQkJCW1lc3NhZ2VzOiBbJ1BsZWFzZSB1cGxvYWQgYSBjbGVhciBQQU4gQ2FyZC4gUGFuIG51bWJlciBjb3VsZCBub3QgYmUgcmVhZCBmcm9tIHRoZSBjdXJyZW50IEltYWdlLllvdSBtYXkgY2hvb3NlIHRvIGVudGVyIG1hbnVhbGx5IG9uIHRoZSBuZXh0IHNjcmVlbi4nXSwKCQkJCQkJCXZhbHVlOiB2YWx1ZSwKCQkJCQkJfTsgcmVzcCA9IGRldGFpbHM7CgkJCQkJCWlmICh2YWx1ZS5udW1iZXIgPT0gJ04vQScpIHsKCQkJCQkJCWRldGFpbHMudmVyaWZpZWQgPSBmYWxzZQoJCQkJCQl9CgoJCQkJCQlpZiAobXl2YWx1ZSA9PSAnQTEnKSB7CgkJCQkJCQkvLyBQcmltYXJ5IEFwcGxpY2FudAoJCQkJCQkJY29uc3QgYWxsYWJvdXR5b3VEb2IgPSBjdXJyZW50QXBwbGljYW50W2N1cnJlbnRBcHBsaWNhbnQubGVuZ3RoIC0gMV07CgkJCQkJCQlsZXQgbXlOYW1lID0gdmFsdWUuTkFNRS50cmltKCkuc3BsaXQoIiAiKTsKCQkJCQkJCWNvbnN0IGN1cnJlbnRfbCA9IG15TmFtZS5sZW5ndGg7CgkJCQkJCQlsZXQgZG9iID0gdmFsdWUuRE9CLnRyaW0oKS5yZXBsYWNlQWxsKCcgJywgJy8nKTsKCQkJCQkJCWN1cnJlbnRBcHBsaWNhbnRbMF1bJ2Zvcm0nXVsxXS5kZWZhdWx0VmFsdWUgPSBteU5hbWVbMF07CgkJCQkJCQljdXJyZW50QXBwbGljYW50WzBdWydmb3JtJ11bMl0uZGVmYXVsdFZhbHVlID0gbXlOYW1lW2N1cnJlbnRfbCAtIDFdOwoJCQkJCQkJY3VycmVudEFwcGxpY2FudFswXVsnZm9ybSddWzhdLmRlZmF1bHRWYWx1ZSA9IHZhbHVlLlBBTl9OTzsKCQkJCQkJCWN1cnJlbnRBcHBsaWNhbnRbMF1bJ2Zvcm0nXVsxMF0uZGVmYXVsdFZhbHVlID0gZm9ybWF0RGF0ZURvYihkb2IpCgkJCQkJCQlhbGxhYm91dHlvdURvYlsnZm9ybSddWzBdLmRlZmF1bHRWYWx1ZSA9IGZvcm1hdERhdGVEb2IoZG9iKQoJCQkJCQl9CgkJCQkJCWVsc2UgewoJCQkJCQkJLy8gSm9pbnQgQXBwbGljYW50cwoJCQkJCQkJY29uc3QgaWR4ID0gKCtteXZhbHVlLnRyaW0oKVsxXSkgLSAxOwoJCQkJCQkJbGV0IG15TmFtZSA9IHZhbHVlLk5BTUUudHJpbSgpLnNwbGl0KCIgIik7CgkJCQkJCQljb25zdCBjdXJyZW50X2wgPSBteU5hbWUubGVuZ3RoOwoJCQkJCQkJbGV0IGRvYiA9IHZhbHVlLkRPQi50cmltKCkucmVwbGFjZUFsbCgnICcsICcvJyk7CgoJCQkJCQkJY3VycmVudEFwcGxpY2FudFtpZHhdWydmb3JtJ11bMV0uZGVmYXVsdFZhbHVlID0gbXlOYW1lWzBdCgkJCQkJCQljdXJyZW50QXBwbGljYW50W2lkeF1bJ2Zvcm0nXVsyXS5kZWZhdWx0VmFsdWUgPSBteU5hbWVbY3VycmVudF9sIC0gMV0KCQkJCQkJCWN1cnJlbnRBcHBsaWNhbnRbaWR4XVsnZm9ybSddWzhdLmRlZmF1bHRWYWx1ZSA9IHZhbHVlLlBBTl9OTzsKCQkJCQkJCWN1cnJlbnRBcHBsaWNhbnRbaWR4XVsnZm9ybSddWzEwXS5kZWZhdWx0VmFsdWUgPSBmb3JtYXREYXRlRG9iKGRvYikKCQkJCQkJfQoKCQkJCQkJLy8gbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2lkRGV0YWlsc0ExJywgSlNPTi5zdHJpbmdpZnkoY3VycmVudEFwcGxpY2FudCkpOwoJCQkJCQlpZERldGFpbHNBMSA9IEpTT04uc3RyaW5naWZ5KGN1cnJlbnRBcHBsaWNhbnQpOwoJCQkJCQlyZXNvbHZlKGRldGFpbHMpCgkJCQkJfSkKCQkJCQkuY2F0Y2goKGVycm9yKSA9PiB7CgkJCQkJCXJlc29sdmUocmVzcCk7CgkJCQkJCS8vY29uc29sZS5sb2coZXJyb3IpCgkJCQkJCS8vcmVqZWN0KGZhbHNlKTsKCQkJCQl9KTsKCQkJfSBlbHNlIGlmIChmaW5hbFRwID09PSAicGFzc3BvcnQiKSB7CgkJCQljb25zdCBhcGlVcmwgPSBkb2NWZXJpZmljYXRpb24gKyAiL3Bhc3Nwb3J0IjsKCQkJCWZldGNoKGFwaVVybCwgewoJCQkJCW1ldGhvZDogInBvc3QiLAoJCQkJCWJvZHk6IGRhdGEsCgkJCQl9KQoJCQkJCS50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpCgkJCQkJLnRoZW4oKHZhbHVlKSA9PiB7CgkJCQkJCXZhciBkZXRhaWxzID0gewoJCQkJCQkJdmVyaWZpZWQ6IHRydWUsCgkJCQkJCQltZXNzYWdlczogW10sCgkJCQkJCQl2YWx1ZTogbnVsbCwKCQkJCQkJfTsKCgkJCQkJCXNlYXJjaFVwbG9hZCh2YWx1ZS5yZXN1bHQpCgkJCQkJCQkudGhlbigodXByZXMpID0+IHsKCQkJCQkJCQlpZiAodXByZXMpIHsKCQkJCQkJCQkJc2V0VGltZW91dCgoKSA9PiB7CgkJCQkJCQkJCQl2YXIgaXNOYW1lRXJyID0gZmFsc2U7CgoJCQkJCQkJCQkJY29uc3QgdmVyaWZ5VHdvID0gbmV3IFByb21pc2UoKHJlc28sIHJlamUpID0+IHsKCQkJCQkJCQkJCQlpZiAodmFsdWUubmFtZSkgewoJCQkJCQkJCQkJCQl2ZXJpZnlNeVZhbHVlcyhnZW5lcmF0ZU15VmFsdWUobXl2YWx1ZS5uYW1lKSkKCQkJCQkJCQkJCQkJCS50aGVuKChyZXNwKSA9PiB7CgkJCQkJCQkJCQkJCQkJaWYgKCFyZXNwKSB7CgkJCQkJCQkJCQkJCQkJCWlzTmFtZUVyciA9IHRydWU7CgkJCQkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJCQkJCXJlc28odHJ1ZSk7CgkJCQkJCQkJCQkJCQl9KQoJCQkJCQkJCQkJCQkJLmNhdGNoKCgpID0+IHsKCQkJCQkJCQkJCQkJCQlpc05hbWVFcnIgPSB0cnVlOwoJCQkJCQkJCQkJCQkJCXJlc28odHJ1ZSk7CgkJCQkJCQkJCQkJCQl9KTsKCQkJCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQkJCQlpc05hbWVFcnIgPSB0cnVlOwoJCQkJCQkJCQkJCQlyZXNvKHRydWUpOwoJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCX0pOwoKCQkJCQkJCQkJCVByb21pc2UuYWxsKFt2ZXJpZnlUd29dKS50aGVuKChwcmFyZXMpID0+IHsKCQkJCQkJCQkJCQlpZiAoaXNOYW1lRXJyKSB7CgkJCQkJCQkJCQkJCWRldGFpbHMubWVzc2FnZXMucHVzaCgKCQkJCQkJCQkJCQkJCWBQYXNzcG9ydCBOYW1lIGluIHRoZSBVcGxvYWRlZCBkb2N1bWVudCBkb3NlIG5vdCBtYXRjaCB3aXRoIHRoZSBlbnRlcmVkIGRldGFpbHMuJHtpc05hbWVFcnIKCQkJCQkJCQkJCQkJCQk/IGA8YnI+VXBsb2FkZWQgUGFzc3BvcnQgTmFtZTogJHt2YWx1ZS5uYW1lfWAKCQkJCQkJCQkJCQkJCQk6ICIiCgkJCQkJCQkJCQkJCQl9JHtpc05hbWVFcnIKCQkJCQkJCQkJCQkJCQk/IGA8YnI+RW50ZXJlZCBQYXNzcG9ydCBOYW1lIGluIHRoZSBmb3JtOiAke2dlbmVyYXRlTXlWYWx1ZSgKCQkJCQkJCQkJCQkJCQkJbXl2YWx1ZS5uYW1lCgkJCQkJCQkJCQkJCQkJKX1gCgkJCQkJCQkJCQkJCQkJOiAiIgoJCQkJCQkJCQkJCQkJfTxicj5gCgkJCQkJCQkJCQkJCSk7CgkJCQkJCQkJCQkJCWRldGFpbHMudmVyaWZpZWQgPSBmYWxzZTsKCQkJCQkJCQkJCQkJZGV0YWlscy52YWx1ZSA9IHZhbHVlOwoJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCQlyZXNvbHZlKGRldGFpbHMpOwoJCQkJCQkJCQkJfSk7CgkJCQkJCQkJCX0sIDE1MDApOwoJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCXJlc29sdmUoZmFsc2UpOwoJCQkJCQkJCX0KCQkJCQkJCX0pCgkJCQkJCQkuY2F0Y2goKCkgPT4gewoJCQkJCQkJCXJlc29sdmUoZmFsc2UpOwoJCQkJCQkJfSk7CgkJCQkJfSkKCQkJCQkuY2F0Y2goKCkgPT4gewoJCQkJCQlyZWplY3QoZmFsc2UpOwoJCQkJCX0pOwoJCQl9IGVsc2UgaWYgKGZpbmFsVHAgPT09ICdhYWRoYXJzdHJpcCcpIHsKCQkJCWNvbnN0IGFwaVVybCA9IGRvY1ZlcmlmaWNhdGlvbjsKCgkJCQlmZXRjaChhcGlVcmwsIHsKCQkJCQltZXRob2Q6ICJwb3N0IiwKCQkJCQlib2R5OiBkYXRhLAoJCQkJfSkKCQkJCQkudGhlbigocmVzKSA9PiByZXMuanNvbigpKQoJCQkJCS50aGVuKCh2YWx1ZSkgPT4gewoJCQkJCQlsZXQgZGV0YWlscyA9IHsKCQkJCQkJCXZlcmlmaWVkOiB0cnVlLAoJCQkJCQkJbWVzc2FnZXM6IFsnUGxlYXNlIHVwbG9hZCBhIGNsZWFyIEFhZGhhYXIgQ2FyZC4gQWFkaGFhciBudW1iZXIgY291bGQgbm90IGJlIHJlYWQgZnJvbSB0aGUgY3VycmVudCBJbWFnZS5Zb3UgbWF5IGNob29zZSB0byBlbnRlciBtYW51YWxseSBvbiB0aGUgbmV4dCBzY3JlZW4uJ10sCgkJCQkJCQl2YWx1ZTogdmFsdWUsCgkJCQkJCX07CgkJCQkJCXJlc3AgPSBkZXRhaWxzOwoJCQkJCQkvLyBMb2dpYyBmb3IgQWFkaGFyIEZyb250CgkJCQkJCWxldCBTQUxVVEFUSU9OX25ldyA9ICdNci4nOwoJCQkJCQlpZiAodmFsdWUuR0VOREVSLnRyaW0oKS50b0xvd2VyQ2FzZSgpID09ICdtYWxlJykgewoJCQkJCQkJU0FMVVRBVElPTl9uZXcgPSAnTXIuJzsKCQkJCQkJfQoJCQkJCQlpZiAodmFsdWUuR0VOREVSLnRyaW0oKS50b0xvd2VyQ2FzZSgpID09ICdmZW1hbGUnKSB7CgkJCQkJCQlTQUxVVEFUSU9OX25ldyA9ICdNcy4nOwoJCQkJCQl9CgoJCQkJCQkvLyBHZXQgQXBwbGljYW50J3MgaW5kZXgKCQkJCQkJY29uc3QgaWR4ID0gKCtteXZhbHVlLnRyaW0oKVsxXSkgLSAxOwoKCQkJCQkJLy8gQUFESEFSIEZST05UCgkJCQkJCWN1cnJlbnRBcHBsaWNhbnRbaWR4XVsnZm9ybSddWzBdLmRlZmF1bHRWYWx1ZSA9IFNBTFVUQVRJT05fbmV3CgkJCQkJCWN1cnJlbnRBcHBsaWNhbnRbaWR4XVsnZm9ybSddWzldLmRlZmF1bHRWYWx1ZSA9IHZhbHVlWydBQURIQVIgTk8nXT8udHJpbSgpOwoKCQkJCQkJLy8gbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2lkRGV0YWlsc0ExJywgSlNPTi5zdHJpbmdpZnkoY3VycmVudEFwcGxpY2FudCkpOwoJCQkJCQlpZERldGFpbHNBMSA9IEpTT04uc3RyaW5naWZ5KGN1cnJlbnRBcHBsaWNhbnQpOwoKCQkJCQkJLy8gQUFESEFSIEJBQ0sKCQkJCQkJY3VycmVudEFwcGxpY2FudFtpZHhdWydmb3JtJ11bMTNdLmRlZmF1bHRWYWx1ZSA9IHZhbHVlWydIb3VzZSBubyddLnRyaW0oKTsgIC8vIEhvdXNlIE51bWJlcgoJCQkJCQljdXJyZW50QXBwbGljYW50W2lkeF1bJ2Zvcm0nXVsxNF0uZGVmYXVsdFZhbHVlID0gdmFsdWVbJ0J1aWxkaW5nX25hbWUnXS50cmltKCk7ICAvLyBCdWlsZGluZyBOYW1lCgkJCQkJCWN1cnJlbnRBcHBsaWNhbnRbaWR4XVsnZm9ybSddWzE1XS5kZWZhdWx0VmFsdWUgPSB2YWx1ZVsnbG9jYWxpdHknXS50cmltKCk7ICAvLyBsb2NhbGl0eSAKCQkJCQkJY3VycmVudEFwcGxpY2FudFtpZHhdWydmb3JtJ11bMTZdLmRlZmF1bHRWYWx1ZSA9IHZhbHVlWydzdHJlZXQnXS50cmltKCk7IC8vIHN0cmVldAoJCQkJCQljdXJyZW50QXBwbGljYW50W2lkeF1bJ2Zvcm0nXVsxN10uZGVmYXVsdFZhbHVlID0gdmFsdWVbJ2NpdHknXS50cmltKCk7IC8vIGNpdHkKCQkJCQkJY3VycmVudEFwcGxpY2FudFtpZHhdWydmb3JtJ11bMThdLmRlZmF1bHRWYWx1ZSA9IHZhbHVlWydQSU4nXS50cmltKCk7IC8vIFBvc3RhbCBDb2RlCgkJCQkJCWN1cnJlbnRBcHBsaWNhbnRbaWR4XVsnZm9ybSddWzE5XS5kZWZhdWx0VmFsdWUgPSB2YWx1ZVsnc3RhdGUnXTsgIC8vIFN0YXRlCgkJCQkJCWN1cnJlbnRBcHBsaWNhbnRbaWR4XVsnZm9ybSddWzIwXS5kZWZhdWx0VmFsdWUgPSB2YWx1ZVsnY291bnRyeSddOyAgLy8gQ291bnRyeQoJCQkJCQkvL3NldEdlb0xvY2F0aW9uKHZhbHVlWydMQVRJVFVERSddLCB2YWx1ZVsnTE9OR0lUVURFJ10sICdhcHBsaWNhbnRfaW5wdXRncm91cCcpOwoKCgkJCQkJCS8vIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdpZERldGFpbHNBMScsIEpTT04uc3RyaW5naWZ5KGN1cnJlbnRBcHBsaWNhbnQpKTsKCQkJCQkJaWREZXRhaWxzQTEgPSBKU09OLnN0cmluZ2lmeShjdXJyZW50QXBwbGljYW50KTsKCQkJCQkJcmVzb2x2ZShkZXRhaWxzKTsKCQkJCQl9KQoJCQkJCS5jYXRjaCgoZXJyKSA9PiB7CgkJCQkJCWNvbnNvbGUubG9nKGVycik7CgkJCQkJCS8vcmVzb2x2ZShmYWxzZSk7CgkJCQkJCXJlc29sdmUocmVzcCk7CgkJCQkJfSk7CgkJCX0gZWxzZSBpZiAoZmluYWxUcCA9PT0gIm90aGVyIikgewoJCQkJY29uc3QgYXBpVXJsID0gZG9jVmVyaWZpY2F0aW9uOwoJCQkJZmV0Y2goYXBpVXJsLCB7CgkJCQkJbWV0aG9kOiAicG9zdCIsCgkJCQkJYm9keTogZGF0YSwKCQkJCX0pCgkJCQkJLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSkKCQkJCQkudGhlbigodmFsdWUpID0+IHsKCQkJCQkJdmFyIGRldGFpbHMgPSB7CgkJCQkJCQl2ZXJpZmllZDogdHJ1ZSwKCQkJCQkJCW1lc3NhZ2VzOiBbJ1BsZWFzZSB1cGxvYWQgYSBjbGVhciBkb2N1bWVudC5Zb3UgbWF5IGNob29zZSB0byBlbnRlciBtYW51YWxseSBvbiB0aGUgbmV4dCBzY3JlZW4uJ10sCgkJCQkJCQl2YWx1ZTogdmFsdWUsCgkJCQkJCX07CgkJCQkJCXJlc3AgPSBkZXRhaWxzOwoKCQkJCQkJcmVzb2x2ZShkZXRhaWxzKTsKCQkJCQl9KQoJCQkJCS5jYXRjaCgoKSA9PiB7CgkJCQkJCXJlc29sdmUocmVzcCk7CgkJCQkJfSk7CgkJCX0KCQl9CgoJCWlubmVyVmFsaWRhdGlvbigpOwoJfSk7CglyZXR1cm4gbXlwcm9taXNlOwp9CgpmdW5jdGlvbiBzZXRHZW9Mb2NhdGlvbihsYXQsIGxuZywgcGFyZW50Q2xhc3MpIHsKCWxldCBjb250ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLiR7cGFyZW50Q2xhc3N9YCk7Cgljb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKCWRpdi5jbGFzc0xpc3QuYWRkKCdnb29nbGUtbWFwLWNvbnQnKTsKCWNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CglhLmhyZWYgPSBgaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS9tYXBzL0A/YXBpPTEmbWFwX2FjdGlvbj1tYXAmY2VudGVyPSR7bGF0fSwke2xuZ31gOwoJYS50YXJnZXQgPSAiX2JsYW5rIjsKCWNvbnN0IGltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpOwoKCgljb25zdCBnb29nbGVBUEkgPSBgaHR0cHM6Ly9tYXBzLmdvb2dsZWFwaXMuY29tL21hcHMvYXBpL3N0YXRpY21hcD9jZW50ZXI9JHtsYXR9LCR7bG5nfSZ6b29tPTE0JnNpemU9MjAweDIwMCZrZXk9QUl6YVN5RElTckt1M21PRUUxMDBEd0NEVXZOc1RlQ3NzY2lHaDRvYAoJZmV0Y2goZ29vZ2xlQVBJKQoJCS50aGVuKChyZXMpID0+IHJlcy5ibG9iKCkpCgkJLnRoZW4oKGJsb2IpID0+IHsKCQkJbGV0IGNvbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuJHtwYXJlbnRDbGFzc31gKTsKCQkJaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1c2VyTG9jYXRpb25Db250JykpIHsKCQkJCWNvbnQucmVtb3ZlQ2hpbGQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VzZXJMb2NhdGlvbkNvbnQnKSkKCQkJfQoJCQljb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKCQkJZGl2LmNsYXNzTGlzdC5hZGQoJ2dvb2dsZS1tYXAtY29udCcpOwoJCQlkaXYuc2V0QXR0cmlidXRlKCdpZCcsICd1c2VyTG9jYXRpb25Db250Jyk7CgkJCWNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CgkJCWEuaHJlZiA9IGBodHRwczovL3d3dy5nb29nbGUuY29tL21hcHMvQD9hcGk9MSZtYXBfYWN0aW9uPW1hcCZjZW50ZXI9JHtsYXR9LCR7bG5nfWA7CgkJCWEudGFyZ2V0ID0gIl9ibGFuayI7CgkJCWNvbnN0IGltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpOwoJCQlpbWcuc2V0QXR0cmlidXRlKCdpZCcsICd1c2VyTG9jYXRpb24nKTsKCQkJY29uc3QgaW1hZ2VVUkwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwoJCQlpbWcuc3JjID0gaW1hZ2VVUkw7CgkJCWltZy53aWR0aCA9ICcyMDAnOwoJCQlpbWcuaGVpZ2h0ID0gJzIwMCc7CgkJCWEuYXBwZW5kQ2hpbGQoaW1nKTsKCQkJZGl2LmFwcGVuZENoaWxkKGEpOwoJCQljb250LmFwcGVuZENoaWxkKGRpdik7CgoKCQl9KTsKfQpmdW5jdGlvbiB2ZXJpZnlQYXltZW50U291cmNlKHR5cGUsIGRhdGEsIHJvd1RvVXBkYXRlKSB7CgoJY29uc3QgbXlwcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewoJCWZ1bmN0aW9uIGlubmVyVmFsaWRhdGlvblBheW1lbnQoKSB7CgkJCWlmICh0eXBlID09ICdDaGVxdWUnKSB7CgkJCQlzZXRUaW1lb3V0KCgpID0+IHsKCgkJCQkJLy8gbGV0IG15RG9jID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbXlkb2N1bWVudCcpKTsKCQkJCQlsZXQgbXlEb2MgPSBKU09OLnBhcnNlKG15ZG9jdW1lbnQpOwoKCQkJCQljb25zdCBrZXlfaWQgPSBgYmFja19jaGVja19wb3N0XyR7cm93VG9VcGRhdGV9YDsKCQkJCQlteURvYyA9IG15RG9jW2tleV9pZF0uc3BsaXQoJywnKVsxXTsKCQkJCQkvLyBteURvYyA9IG15RG9jWydiYWNrX2NoZWNrX3Bvc3QnXQoKCQkJCQl2YXIgbXlIZWFkZXJzID0gbmV3IEhlYWRlcnMoKTsKCQkJCQlteUhlYWRlcnMuYXBwZW5kKCJ0b2tlbiIsICJjOTI3ZjhjNWY1NjEzOTkxYTYyYmUxZTc0ZjgwYWMxYiIpOwoJCQkJCW15SGVhZGVycy5hcHBlbmQoIkNvbnRlbnQtVHlwZSIsICJhcHBsaWNhdGlvbi9qc29uIik7CgoJCQkJCXZhciByYXcgPSBKU09OLnN0cmluZ2lmeSh7CgkJCQkJCSJyZXFfaWQiOiAiY2gtcmVxLTEiLAoJCQkJCQkiZG9jX3R5cGUiOiAiaW1hZ2UiLAoJCQkJCQkiYmxhbmtfY2hlcXVlIjogZmFsc2UsCgkJCQkJCSJkb2NfYmFzZTY0IjogbXlEb2MKCQkJCQl9KTsKCgkJCQkJdmFyIHJlcXVlc3RPcHRpb25zID0gewoJCQkJCQltZXRob2Q6ICdQT1NUJywKCQkJCQkJaGVhZGVyczogbXlIZWFkZXJzLAoJCQkJCQlib2R5OiByYXcsCgkJCQkJCXJlZGlyZWN0OiAnZm9sbG93JwoJCQkJCX07CgoJCQkJCWZldGNoKCJodHRwczovL3BpbmcuYXJ5YS5haS9hcGkvdjEvY2hlcXVlIiwgcmVxdWVzdE9wdGlvbnMpCgkJCQkJCS50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSkKCQkJCQkJLnRoZW4odmFsdWUgPT4gewoJCQkJCQkJbGV0IHJlc3VsdCA9IHZhbHVlPy5yZXN1bHQ7CgkJCQkJCQlmb3IgKGxldCBrZXkgaW4gcmVzdWx0KSB7CgkJCQkJCQkJaWYgKGtleSA9PSAnQW1vdW50IGluIFdvcmRzJykgewoJCQkJCQkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnRmllbGRfMHVvb2gxOC0nICsgcm93VG9VcGRhdGUpLnZhbHVlID0gcmVzdWx0W2tleV0KCQkJCQkJCQl9CgkJCQkJCQkJaWYgKGtleSA9PSAnQW1vdW50IGluIEZpZ3VyZXMnKSB7CgkJCQkJCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdGaWVsZF8wanB5YnVnLScgKyByb3dUb1VwZGF0ZSkudmFsdWUgPSByZXN1bHRba2V5XQoJCQkJCQkJCX0KCQkJCQkJCQlpZiAoa2V5ID09ICdCYW5rIE5hbWUnKSB7CgkJCQkJCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdGaWVsZF8wbDk4cG43LScgKyByb3dUb1VwZGF0ZSkudmFsdWUgPSByZXN1bHRba2V5XQoJCQkJCQkJCX0KCgkJCQkJCQkJLy8gQWRkZWQgYnkgbWFub2oKCQkJCQkJCQlpZiAoa2V5ID09ICdEYXRlJykgewoJCQkJCQkJCQlpZiAocmVzdWx0W2tleV0gPT0gIiIpIHsKCQkJCQkJCQkJCWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5hbW91bnQtZGF0YS0ke3Jvd1RvVXBkYXRlfWApLmNsYXNzTGlzdC5yZW1vdmUoJ25vdF9lZGl0YWJsZScpOwoJCQkJCQkJCQkJZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLmFtb3VudC1kYXRhLSR7cm93VG9VcGRhdGV9YCkuZGlzYWJsZWQgPSBmYWxzZTsKCgkJCQkJCQkJCX0KCQkJCQkJCQl9CgkJCQkJCQl9CgoJCQkJCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ0ZpZWxkXzBpMDdoNnMtJyArIHJvd1RvVXBkYXRlKS52YWx1ZSA9IHJlc3VsdFsnQ2hlcXVlIE5vJ107CgkJCQkJCQl2YXIgZGV0YWlscyA9IHsKCQkJCQkJCQl2ZXJpZmllZDogdHJ1ZSwKCQkJCQkJCQltZXNzYWdlczogW10sCgkJCQkJCQkJdmFsdWU6IHZhbHVlPy5yZXN1bHQsCgkJCQkJCQl9OwoJCQkJCQkJcmVzb2x2ZShkZXRhaWxzKTsKCQkJCQkJfSkuY2F0Y2goZXJyb3IgPT4gY29uc29sZS5sb2coJ2Vycm9yJywgZXJyb3IpKTsKCQkJCX0sIDUwMCk7CgkJCX0gZWxzZSBpZiAodHlwZSA9PSAnU3dpcGUnKSB7CgkJCQljb25zdCBhcGlVcmwgPSBleHRyYWN0UGF5bWVudFNvdXJjZSArICIvY2hhcmdlLXNsaXAiOwoJCQkJZmV0Y2goYXBpVXJsLCB7CgkJCQkJbWV0aG9kOiAicG9zdCIsCgkJCQkJYm9keTogZGF0YSwKCQkJCX0pLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSkKCQkJCQkudGhlbigodmFsdWUpID0+IHsKCQkJCQkJdmFyIGRldGFpbHMgPSB7CgkJCQkJCQl2ZXJpZmllZDogdHJ1ZSwKCQkJCQkJCW1lc3NhZ2VzOiBbXSwKCQkJCQkJCXZhbHVlOiBudWxsLAoJCQkJCQl9OwoJCQkJCQlsZXQgcmVzdWx0ID0gdmFsdWU/LnJlc3VsdDsKCQkJCQkJaWYgKHJlc3VsdC5hbW91bnQpIHsKCQkJCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdGaWVsZF8wdW9vaDE4LScgKyByb3dUb1VwZGF0ZSkudmFsdWUgPSAnJwoJCQkJCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ0ZpZWxkXzBqcHlidWctJyArIHJvd1RvVXBkYXRlKS52YWx1ZSA9IHJlc3VsdC5hbW91bnQKCQkJCQkJfQoJCQkJCQlpZiAocmVzdWx0Lm1lcmNoYW50UmVmTm8pIHsKCQkJCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdGaWVsZF8waTA3aDZzLScgKyByb3dUb1VwZGF0ZSkudmFsdWUgPSByZXN1bHQubWVyY2hhbnRSZWZObzsKCQkJCQkJfQoJCQkJCQlyZXNvbHZlKGRldGFpbHMpOwoJCQkJCX0pCgkJCQkJLmNhdGNoKChlcnJvcikgPT4gewoJCQkJCQljb25zb2xlLmxvZyhlcnJvcikKCQkJCQkJcmVzb2x2ZShmYWxzZSk7CgkJCQkJfSk7CgkJCX0gZWxzZSBpZiAodHlwZSA9PSAnUlRHUycpIHsKCQkJCWNvbnN0IGFwaVVybCA9IGV4dHJhY3RQYXltZW50U291cmNlICsgIi9jaGFyZ2Utc2xpcCI7CgkJCQlmZXRjaChhcGlVcmwsIHsKCQkJCQltZXRob2Q6ICJwb3N0IiwKCQkJCQlib2R5OiBkYXRhLAoJCQkJfSkudGhlbigocmVzKSA9PiByZXMuanNvbigpKQoJCQkJCS50aGVuKCh2YWx1ZSkgPT4gewoJCQkJCQl2YXIgZGV0YWlscyA9IHsKCQkJCQkJCXZlcmlmaWVkOiB0cnVlLAoJCQkJCQkJbWVzc2FnZXM6IFtdLAoJCQkJCQkJdmFsdWU6IG51bGwsCgkJCQkJCX07CgkJCQkJCWxldCByZXN1bHQgPSB2YWx1ZT8ucmVzdWx0OwoJCQkJCQlpZiAocmVzdWx0LmFtb3VudCkgewoJCQkJCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ0ZpZWxkXzB1b29oMTgtJyArIHJvd1RvVXBkYXRlKS52YWx1ZSA9ICcnCgkJCQkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnRmllbGRfMGpweWJ1Zy0nICsgcm93VG9VcGRhdGUpLnZhbHVlID0gcmVzdWx0LmFtb3VudAoJCQkJCQl9CgoJCQkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnRmllbGRfMGkwN2g2cy0nICsgcm93VG9VcGRhdGUpLnZhbHVlID0gcmVzdWx0Lm1lcmNoYW50UmVmTm87OwoJCQkJCQlyZXNvbHZlKGRldGFpbHMpOwoJCQkJCQkvLyByZXNvbHZlKGRldGFpbHMpOwoJCQkJCX0pCgkJCQkJLmNhdGNoKChlcnJvcikgPT4gewoJCQkJCQljb25zb2xlLmxvZyhlcnJvcikKCQkJCQkJcmVzb2x2ZShmYWxzZSk7CgkJCQkJfSk7CgkJCX0gZWxzZSBpZiAodHlwZSA9PSAnTkVGVCcpIHsKCQkJCWNvbnN0IGFwaVVybCA9IGV4dHJhY3RQYXltZW50U291cmNlICsgIi9jaGFyZ2Utc2xpcCI7CgkJCQlmZXRjaChhcGlVcmwsIHsKCQkJCQltZXRob2Q6ICJwb3N0IiwKCQkJCQlib2R5OiBkYXRhLAoJCQkJfSkudGhlbigocmVzKSA9PiByZXMuanNvbigpKQoJCQkJCS50aGVuKCh2YWx1ZSkgPT4gewoJCQkJCQl2YXIgZGV0YWlscyA9IHsKCQkJCQkJCXZlcmlmaWVkOiB0cnVlLAoJCQkJCQkJbWVzc2FnZXM6IFtdLAoJCQkJCQkJdmFsdWU6IG51bGwsCgkJCQkJCX07CgkJCQkJCWxldCByZXN1bHQgPSB2YWx1ZT8ucmVzdWx0OwoJCQkJCQlpZiAocmVzdWx0LmFtb3VudCkgewoJCQkJCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ0ZpZWxkXzB1b29oMTgtJyArIHJvd1RvVXBkYXRlKS52YWx1ZSA9ICcnCgkJCQkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnRmllbGRfMGpweWJ1Zy0nICsgcm93VG9VcGRhdGUpLnZhbHVlID0gcmVzdWx0LmFtb3VudAoJCQkJCQl9CgoJCQkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnRmllbGRfMGkwN2g2cy0nICsgcm93VG9VcGRhdGUpLnZhbHVlID0gcmVzdWx0Lm1lcmNoYW50UmVmTm87OwoJCQkJCQlyZXNvbHZlKGRldGFpbHMpOwoJCQkJCQkvLyByZXNvbHZlKGRldGFpbHMpOwoJCQkJCX0pCgkJCQkJLmNhdGNoKChlcnJvcikgPT4gewoJCQkJCQljb25zb2xlLmxvZyhlcnJvcikKCQkJCQkJcmVzb2x2ZShmYWxzZSk7CgkJCQkJfSk7CgkJCX0KCQkJZWxzZSBpZiAodHlwZSA9PSAnUmF6b3JwYXknKSB7CgkJCQljb25zdCBhcGlVcmwgPSBleHRyYWN0UGF5bWVudFNvdXJjZSArICIvY2hhcmdlLXNsaXAiOwoJCQkJZmV0Y2goYXBpVXJsLCB7CgkJCQkJbWV0aG9kOiAicG9zdCIsCgkJCQkJYm9keTogZGF0YSwKCQkJCX0pLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSkKCQkJCQkudGhlbigodmFsdWUpID0+IHsKCQkJCQkJdmFyIGRldGFpbHMgPSB7CgkJCQkJCQl2ZXJpZmllZDogdHJ1ZSwKCQkJCQkJCW1lc3NhZ2VzOiBbXSwKCQkJCQkJCXZhbHVlOiBudWxsLAoJCQkJCQl9OwoJCQkJCQlsZXQgcmVzdWx0ID0gdmFsdWU/LnJlc3VsdDsKCQkJCQkJaWYgKHJlc3VsdC5hbW91bnQpIHsKCQkJCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdGaWVsZF8wdW9vaDE4LScgKyByb3dUb1VwZGF0ZSkudmFsdWUgPSAnJwoJCQkJCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ0ZpZWxkXzBqcHlidWctJyArIHJvd1RvVXBkYXRlKS52YWx1ZSA9IHJlc3VsdC5hbW91bnQKCQkJCQkJfQoKCQkJCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ0ZpZWxkXzBpMDdoNnMtJyArIHJvd1RvVXBkYXRlKS52YWx1ZSA9IHJlc3VsdC5tZXJjaGFudFJlZk5vOzsKCQkJCQkJcmVzb2x2ZShkZXRhaWxzKTsKCQkJCQkJLy8gcmVzb2x2ZShkZXRhaWxzKTsKCQkJCQl9KQoJCQkJCS5jYXRjaCgoZXJyb3IpID0+IHsKCQkJCQkJY29uc29sZS5sb2coZXJyb3IpCgkJCQkJCXJlc29sdmUoZmFsc2UpOwoJCQkJCX0pOwoJCQl9IGVsc2UgewoJCQkJcmVzb2x2ZSh7CgkJCQkJdmVyaWZpZWQ6IHRydWUsCgkJCQkJbWVzc2FnZXM6IFtdLAoJCQkJCXZhbHVlOiBudWxsLAoJCQkJfSk7CgkJCX0KCQl9CgkJaW5uZXJWYWxpZGF0aW9uUGF5bWVudCgpOwoJfSk7CglyZXR1cm4gbXlwcm9taXNlOwoKfQoKZnVuY3Rpb24gbWF0Y2hOYW1lVmFsaWQobmFtZSwgY2hlY2spIHsKCWNvbnN0IGxpc3QgPSBPYmplY3Qua2V5cyhjaGVjayk7Cglmb3IgKGxldCBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHsKCQlpZiAoIW5hbWUuaW5jbHVkZXMoY2hlY2tbbGlzdFtpXV0pKSB7CgkJCXJldHVybiBmYWxzZTsKCQl9Cgl9CglyZXR1cm4gdHJ1ZTsKfQoKZnVuY3Rpb24gZ2VuZXJhdGVNeVZhbHVlKGNoZWNrKSB7Cgljb25zdCBsaXN0ID0gT2JqZWN0LmtleXMoY2hlY2spOwoJbGV0IE5hbWUgPSAiIjsKCWZvciAobGV0IGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykgewoJCU5hbWUgPSBOYW1lICsgKGkgPT0gMCA/ICIiIDogIiAiKSArIGNoZWNrW2xpc3RbaV1dOwoJfQoJcmV0dXJuIE5hbWU7Cn0KCmZ1bmN0aW9uIGdlbmVyYXRlQWRkcmVzc1ZhbHVlKGNoZWNrKSB7Cgljb25zdCBsaXN0ID0gT2JqZWN0LmtleXMoY2hlY2spOwoJbGV0IE5hbWUgPSAiIjsKCWZvciAobGV0IGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykgewoJCU5hbWUgPSBOYW1lICsgKGkgPT0gMCA/ICIiIDogIiwgIikgKyBjaGVja1tsaXN0W2ldXTsKCX0KCXJldHVybiBOYW1lOwp9CgpmdW5jdGlvbiB2ZXJpZmllZGljb24oKSB7Cgljb25zdCBjbG9zZUFjdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxhYmVsIik7CgljbG9zZUFjdGlvbi5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgImNvcnJlY3RfcHJldmlld2ljb24iKTsKCWNsb3NlQWN0aW9uLmlubmVyVGV4dCA9ICLinJMiOwoJcmV0dXJuIGNsb3NlQWN0aW9uOwp9CgpmdW5jdGlvbiB2ZXJpZnlmYWlsc2ljb24oKSB7Cgljb25zdCBjbG9zZUFjdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxhYmVsIik7CgljbG9zZUFjdGlvbi5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgImNsb3NlX3ByZXZpZXdpY29uIik7CgljbG9zZUFjdGlvbi5pbm5lclRleHQgPSAiWCI7CglyZXR1cm4gY2xvc2VBY3Rpb247Cn0KCmZ1bmN0aW9uIGdldEFwcGxpY2FudERhdGEodHlwZSkgewoJY29uc3QgcmV0VmFsdWUgPSB7fTsKCWNvbnN0IHNjaEFyciA9IHNjaGVtYVsiYXBwbGljYW50LWRldGFpbHMiXVsic3ViLXNlY3Rpb25zIl07Cglmb3IgKGxldCBpID0gMDsgaSA8IHNjaEFyci5sZW5ndGg7IGkrKykgewoJCWlmIChzY2hBcnJbaV0uQXBwbGljYW50X1Bvc2l0aW9uID09PSB0eXBlKSB7CgkJCWNvbnN0IGZpYXJyID0gT2JqZWN0LmtleXMobXlmaWVsZGRldCk7CgkJCWZpYXJyLmZvckVhY2goKGZpYSkgPT4gewoJCQkJY29uc3QgbXlzY2htYSA9IG15ZmllbGRkZXRbZmlhXTsKCQkJCWxldCBzdWJ2YWx1ZSA9IHt9OwoJCQkJZm9yIChsZXQgeCA9IDA7IHggPCBteXNjaG1hLmxlbmd0aDsgeCsrKSB7CgkJCQkJY29uc3QgZm9ybSA9IHNjaEFycltpXS5mb3JtOwoJCQkJCWZvcm0uZm9yRWFjaCgoZWxlbWVudCkgPT4gewoJCQkJCQlpZiAobXlzY2htYVt4XSA9PT0gZWxlbWVudC5sYWJlbCkgewoJCQkJCQkJaWYgKCFlbGVtZW50LmlkLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoInNoaXBwaW5nIikpIHsKCQkJCQkJCQljb25zdCBmaXZhbHVlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxlbWVudC5pZCkudmFsdWU7CgkJCQkJCQkJaWYgKGZpYSA9PT0gImFkZGhhcl9udW1iZXIiIHx8IGZpYSA9PT0gInBhbl9udW1iZXIiKSB7CgkJCQkJCQkJCXN1YnZhbHVlID0gZml2YWx1ZTsKCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQlzdWJ2YWx1ZVsKCQkJCQkJCQkJCWVsZW1lbnQubGFiZWwudHJpbSgpLnRvTG93ZXJDYXNlKCkucmVwbGFjZUFsbCgiICIsICIiKQoJCQkJCQkJCQldID0gZml2YWx1ZTsKCQkJCQkJCQl9CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQl9KTsKCgkJCQkJcmV0VmFsdWVbZmlhXSA9IHN1YnZhbHVlOwoJCQkJfQoJCQl9KTsKCQl9Cgl9CgoJcmV0dXJuIHJldFZhbHVlOwp9CgpmdW5jdGlvbiBjcmVhdGVFc2lnbkRhdGEoKSB7Cgljb25zdCBhcHBsaWNhbnRfZGV0YWlsc2NvbHMgPSBzY2hlbWFbImFwcGxpY2FudC1kZXRhaWxzIl1bInN1Yi1zZWN0aW9ucyJdOwoKCWlmIChhcHBsaWNhbnRfZGV0YWlsc2NvbHMubGVuZ3RoID4gMCkgewoJCWNvbnN0IG15QXJyID0gW107CgkJYXBwbGljYW50X2RldGFpbHNjb2xzLmZvckVhY2goKGFwZCwgaSkgPT4gewoJCQlpZiAoaSA8IGFwcGxpY2FudF9kZXRhaWxzY29scy5sZW5ndGggLSAxKSB7CgkJCQljb25zdCBmb3JtID0gYXBkWyJmb3JtIl07CgkJCQl2YXIgZGV0YWlscyA9ICIiOwoJCQkJZm9ybS5mb3JFYWNoKChmbykgPT4gewoJCQkJCWZvciAobGV0IHhvID0gMDsgeG8gPCBlc2lnbkRhdGEubGVuZ3RoOyB4bysrKSB7CgkJCQkJCWlmIChmby5sYWJlbCA9PT0gZXNpZ25EYXRhW3hvXSkgewoJCQkJCQkJY29uc3QgdmFsdWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChmby5pZCkudmFsdWU7CgkJCQkJCQlkZXRhaWxzID0gZGV0YWlscyArICIgIiArIHZhbHVlOwoJCQkJCQl9CgkJCQkJfQoJCQkJfSk7CgkJCQl2YXIgbXlvYmogPSB7CgkJCQkJdHlwZTogYXBkWyJBcHBsaWNhbnRfUG9zaXRpb24iXSwKCQkJCQl2YWx1ZTogZGV0YWlscywKCQkJCQl0eXBlOiBhcGQuQXBsaWNhbnRfVHlwZSwKCQkJCX07CgkJCQlteUFyci5wdXNoKG15b2JqKTsKCQkJfQoJCX0pOwoJCXJldHVybiBteUFycjsKCX0KfQoKZnVuY3Rpb24gcmVzZXRmZWN0b3IoKSB7Cgljb25zdCBteUVsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIi5hcGN0X3R5cGVfZGl2Iik7CglteUVsZS5mb3JFYWNoKChtZSwgaSkgPT4gewoJCWlmIChpID49IDEpIHsKCQkJY29uc3QgdGdlbGUgPSBtZS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJhcGN0X3R5cGVfbGFibGUiKVswXTsKCQkJaWYgKHRnZWxlKSB7CgkJCQl0Z2VsZS5pbm5lckhUTUwgPSBwYWdlSW5mb1tpIC0gMV07CgkJCX0KCgkJCWNvbnN0IHRnZWxlRmUgPSBtZS5xdWVyeVNlbGVjdG9yQWxsKCJzZWxlY3QiKVswXTsKCQkJaWYgKHRnZWxlRmUpIHsKCQkJCXRnZWxlRmUuc2V0QXR0cmlidXRlKCJpZCIsIGBhcHBsaWNhbnRfJHtpICsgMX1gKTsKCQkJfQoKCQkJaWYgKGkgPT09IG15RWxlLmxlbmd0aCAtIDEpIHsKCQkJCWNvbnN0IHBsbWVsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwoJCQkJcGxtZWxlLnNldEF0dHJpYnV0ZSgiY2xhc3MiLCAicGxtZmxleF9pY29uIik7CgoJCQkJY29uc3QgcGx1c0ljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIik7CgkJCQlwbHVzSWNvbi5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgIm15X3R5cGVfcGx1cyIpOwoJCQkJcGx1c0ljb24uaW5uZXJIVE1MID0gIisiOwoJCQkJY29uc3QgdGdjaGlsZCA9IG1lLmNoaWxkTm9kZXM7CgkJCQl0Z2NoaWxkWzJdLnJlbW92ZSgpOwoKCQkJCWNvbnN0IGFwcF9sZGV0ID0gc2NoZW1hWyJmaXJzdC1wYWdlIl1bImFwcGxpY2FudF9kZXRhaWxzIl07CgkJCQlpZiAoaSA+IGFwcF9sZGV0Lmxlbmd0aCAtIDEpIHsKCQkJCQljb25zdCBtaW5JY29ubGFzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKTsKCQkJCQltaW5JY29ubGFzdC5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgIm15X3R5cGVfbWludXMiKTsKCQkJCQltaW5JY29ubGFzdC5pbm5lckhUTUwgPSAiLSI7CgoJCQkJCW1pbkljb25sYXN0Lm9uY2xpY2sgPSBmdW5jdGlvbiAoZSkgewoJCQkJCQljb25zdCByZW1vdmVFbGUgPSBoYXNTb21lUGFyZW50VGhlQ2xhc3MoZS50YXJnZXQsICJhcGN0X3R5cGVfZGl2Iik7CgkJCQkJCXJlbW92ZUVsZS5yZW1vdmUoKTsKCQkJCQkJcmVzZXRmZWN0b3IoKTsKCQkJCQl9OwoJCQkJCXBsbWVsZS5hcHBlbmRDaGlsZChtaW5JY29ubGFzdCk7CgkJCQl9CgoJCQkJcGxtZWxlLmFwcGVuZENoaWxkKHBsdXNJY29uKTsKCQkJCW1lLmFwcGVuZChwbG1lbGUpOwoJCQkJQXBwUGx1c2FwcGxpY2FudChwbHVzSWNvbiwgbXlFbGUubGVuZ3RoKTsKCQkJfQoJCX0gZWxzZSB7CgkJCWlmIChpID09PSBteUVsZS5sZW5ndGggLSAxKSB7CgkJCQljb25zdCBwbG1lbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCQkJCXBsbWVsZS5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgInBsbWZsZXhfaWNvbiIpOwoKCQkJCWNvbnN0IHBsdXNJY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpOwoJCQkJcGx1c0ljb24uc2V0QXR0cmlidXRlKCJjbGFzcyIsICJteV90eXBlX3BsdXMiKTsKCQkJCXBsdXNJY29uLmlubmVySFRNTCA9ICIrIjsKCQkJCWNvbnN0IHRnY2hpbGQgPSBtZS5jaGlsZE5vZGVzOwoJCQkJdGdjaGlsZFsyXS5yZW1vdmUoKTsKCgkJCQlwbG1lbGUuYXBwZW5kQ2hpbGQocGx1c0ljb24pOwoJCQkJbWUuYXBwZW5kKHBsbWVsZSk7CgkJCQlBcHBQbHVzYXBwbGljYW50KHBsdXNJY29uLCBteUVsZS5sZW5ndGgpOwoJCQl9CgkJfQoJfSk7Cn0KCmZ1bmN0aW9uIHZlcmlmeU1pblJlcShlbGVtZW50KSB7Cgljb25zdCBteUVsZSA9IGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgiLmZpbGV1cGxvYWRfY29udGlhbmVyIik7CglsZXQgaXNWYWxpZCA9IHRydWU7Cglmb3IgKGxldCBpID0gMDsgaSA8IG15RWxlLmxlbmd0aDsgaSsrKSB7CgkJY29uc3QgbXljb3VudCA9IG15RWxlW2ldLnF1ZXJ5U2VsZWN0b3JBbGwoIi5maWxlLXVwbG9hZCIpLmxlbmd0aDsKCQljb25zdCBpc3RhcmdldCA9IG15RWxlW2ldLnF1ZXJ5U2VsZWN0b3IoIi5maWxldXBfdmFsaWRhdGlvbiIpOwoJCWlmIChpc3RhcmdldCkgewoJCQlpc3RhcmdldC5yZW1vdmUoKTsKCQl9CgkJaWYgKG15Y291bnQgPCAyKSB7CgkJCWNvbnN0IGNyZWF0ZVZhbGlkYXRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJwIik7CgkJCWNyZWF0ZVZhbGlkYXRpb24uY2xhc3NMaXN0LmFkZCgiZmlsZXVwX3ZhbGlkYXRpb24iKTsKCQkJY3JlYXRlVmFsaWRhdGlvbi5pbm5lckhUTUwgPSAiQXQgbGVhc3Qgb25lIG90aGVyIGRvY3VtZW50IHJlcXVpcmVkIjsKCQkJbXlFbGVbaV0uYXBwZW5kKGNyZWF0ZVZhbGlkYXRpb24pOwoJCQlzZXRUaW1lb3V0KCgpID0+IHsKCQkJCWNyZWF0ZVZhbGlkYXRpb24ucmVtb3ZlKCk7CgkJCX0sIDUwMDApOwoJCQlpc1ZhbGlkID0gZmFsc2U7CgkJfQoJfQoJcmV0dXJuIGlzVmFsaWQ7Cn0KCmZ1bmN0aW9uIHNhbWVhc1ByaW1hcnkoY2hlY2tlZCwgbXlpZCkgewoJY29uc3QgYWRkcmVzc1ZhbHVlID0ge307Cgljb25zdCBhcHBsaWNhbnRfZGV0YWlsc2NvbHMgPSBzY2hlbWFbImFwcGxpY2FudC1kZXRhaWxzIl1bInN1Yi1zZWN0aW9ucyJdOwoKCWlmIChjaGVja2VkKSB7CgkJZm9yIChsZXQgaSA9IDA7IGkgPCBhcHBsaWNhbnRfZGV0YWlsc2NvbHMubGVuZ3RoOyBpKyspIHsKCQkJaWYgKGFwcGxpY2FudF9kZXRhaWxzY29sc1tpXS5BcHBsaWNhbnRfUG9zaXRpb24gPT09ICJBMSIpIHsKCQkJCWNvbnN0IGZvcm1lbCA9IGFwcGxpY2FudF9kZXRhaWxzY29sc1tpXQoJCQkJCT8gYXBwbGljYW50X2RldGFpbHNjb2xzW2ldLmZvcm0KCQkJCQk6IFtdOwoKCQkJCWZvcm1lbC5mb3JFYWNoKChmbCkgPT4gewoJCQkJCWlmIChmbC5pZCkgewoJCQkJCQlpZiAoIWZsLmlkLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoInNoaXBwaW5nIikpIHsKCQkJCQkJCWlmIChhZGRyZXNzRmllbGQoZmwubGFiZWwpKSB7CgkJCQkJCQkJY29uc3QgZWx2YWx1ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGZsLmlkKS52YWx1ZTsKCQkJCQkJCQljb25zdCBrZXkgPSBmbC5sYWJlbC5yZXBsYWNlQWxsKCIgIiwgIiIpLnRvTG93ZXJDYXNlKCk7CgkJCQkJCQkJYWRkcmVzc1ZhbHVlW2tleV0gPSBlbHZhbHVlOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfQoJCQkJfSk7CgkJCX0KCQl9Cgl9CgoJZm9yIChsZXQgaSA9IDA7IGkgPCBhcHBsaWNhbnRfZGV0YWlsc2NvbHMubGVuZ3RoOyBpKyspIHsKCQlpZiAoYXBwbGljYW50X2RldGFpbHNjb2xzW2ldLkFwcGxpY2FudF9Qb3NpdGlvbiA9PSBhYXBwbGljYXRuRmllbGQobXlpZCkpIHsKCQkJY29uc3QgZm9ybWVsID0gYXBwbGljYW50X2RldGFpbHNjb2xzW2ldCgkJCQk/IGFwcGxpY2FudF9kZXRhaWxzY29sc1tpXS5mb3JtCgkJCQk6IFtdOwoKCQkJZm9ybWVsLmZvckVhY2goKGZsKSA9PiB7CgkJCQlpZiAoZmwuaWQgJiYgZmwuZGlzYWJsZWQgIT0gInRydWUiKSB7CgkJCQkJY29uc3QgcG9zdFZhbCA9IGZsLmxhYmVsID8gZmwubGFiZWwgOiBmbC50ZXh0OwoJCQkJCWlmIChhZGRyZXNzRmllbGQocG9zdFZhbCkpIHsKCQkJCQkJY29uc3QgdGdlbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChmbC5pZCk7CgkJCQkJCWNvbnN0IHBydGFyZ2V0ID0gaGFzU29tZVBhcmVudFRoZUNsYXNzKHRnZWxlLCAiaW5wdXRDdG4iKTsKCQkJCQkJaWYgKGNoZWNrZWQpIHsKCQkJCQkJCWlmICghZmwuaWQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygic2hpcHBpbmciKSkgewoJCQkJCQkJCWlmIChhZGRyZXNzRmllbGQoZmwubGFiZWwpKSB7CgkJCQkJCQkJCWNvbnN0IGtleSA9IGZsLmxhYmVsLnJlcGxhY2VBbGwoIiAiLCAiIikudG9Mb3dlckNhc2UoKTsKCQkJCQkJCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZmwuaWQpLnZhbHVlID0gYWRkcmVzc1ZhbHVlW2tleV07CgkJCQkJCQkJfQoJCQkJCQkJfQoKCQkJCQkJCXRnZWxlLnNldEF0dHJpYnV0ZSgiZGlzYWJsZWQiLCB0cnVlKTsKCQkJCQkJCXRnZWxlLmNsYXNzTGlzdC5hZGQoIm5vbmFwX2Rpc2FibGVkIik7CgkJCQkJCQlpZiAocHJ0YXJnZXQpIHsKCQkJCQkJCQlwcnRhcmdldC5jbGFzc0xpc3QuYWRkKCJoaWRkZW4iKTsKCQkJCQkJCX0KCQkJCQkJfSBlbHNlIHsKCQkJCQkJCWlmICghZmwuaWQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygic2hpcHBpbmciKSkgewoJCQkJCQkJCWlmIChhZGRyZXNzRmllbGQoZmwubGFiZWwpKSB7CgkJCQkJCQkJCWNvbnN0IGlucEVsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGZsLmlkKTsKCQkJCQkJCQkJaW5wRWxlLnZhbHVlID0gIiI7CgkJCQkJCQkJCWNvbnN0IHBhcmVudEVsZSA9IGhhc1NvbWVQYXJlbnRUaGVDbGFzcyhpbnBFbGUsICJpbnB1dEN0biIpOwoJCQkJCQkJCQlpZiAocGFyZW50RWxlKSB7CgkJCQkJCQkJCQlwYXJlbnRFbGUucXVlcnlTZWxlY3RvcigibGFiZWwiKS5jbGFzc0xpc3QuYWRkKCJoaWRkZW4iKTsKCQkJCQkJCQkJfQoJCQkJCQkJCX0KCQkJCQkJCX0KCQkJCQkJCWlmICh0Z2VsZS5jaGVja2VkKSB7CgkJCQkJCQkJdGdlbGUuY2hlY2tlZCA9IGZhbHNlOwoJCQkJCQkJfQoJCQkJCQkJdGdlbGUucmVtb3ZlQXR0cmlidXRlKCJkaXNhYmxlZCIpOwoJCQkJCQkJdGdlbGUuY2xhc3NMaXN0LnJlbW92ZSgibm9uYXBfZGlzYWJsZWQiKTsKCQkJCQkJCWlmIChwcnRhcmdldCkgewoJCQkJCQkJCXBydGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoImhpZGRlbiIpOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfQoJCQkJfQoJCQl9KTsKCQl9Cgl9Cn0KCmZ1bmN0aW9uIGZpbmFsU3VibWl0KCkgewoJY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKHNjaGVtYSk7Cgl2YXIgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoZm9ybSk7Cglmb3IgKGNvbnN0IGtleSBvZiBrZXlzKSB7CgkJaWYgKGtleSA9PT0gImlkZW50aWZpY2F0aW9uIikgewoJCQljb25zdCBteWNvbHMgPSBzY2hlbWFba2V5XVsiY29scyJdOwoJCQlteWNvbHMuZm9yRWFjaCgoY29scykgPT4gewoJCQkJY29uc3QgeyBwaG90b1BpY2tlciB9ID0gY29sczsKCgkJCQlpZiAocGhvdG9QaWNrZXIpIHsKCQkJCQljb25zdCB7IGlkLCBrZXkgfSA9IHBob3RvUGlja2VyOwoJCQkJCWNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7CgkJCQkJZm9ybURhdGEuYXBwZW5kKGtleSwgZWxlbWVudC5maWxlc1swXSk7CgkJCQl9CgkJCX0pOwoKCQkJY29uc3QgZmlsZXVwbG9hZEVsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIi5maWxlLXVwbG9hZCIpOwoJCQlmaWxldXBsb2FkRWxlLmZvckVhY2goKGNvbHMpID0+IHsKCQkJCWNvbnN0IHRnZWxlID0gY29scy5xdWVyeVNlbGVjdG9yKCJpbnB1dCIpOwoJCQkJZm9ybURhdGEuYXBwZW5kKHRnZWxlLmlkLCB0Z2VsZS5maWxlc1swXSk7CgkJCX0pOwoJCX0gZWxzZSB7CgkJCWNvbnN0IHBhZ2VTY2hlbWEgPSBzY2hlbWFba2V5XTsKCgkJCWlmIChwYWdlU2NoZW1hKSB7CgkJCQlpZiAocGFnZVNjaGVtYVsic3ViLXNlY3Rpb25zIl0pIHsKCQkJCQljb25zdCBteXN1YnNlYyA9IHBhZ2VTY2hlbWFbInN1Yi1zZWN0aW9ucyJdOwoJCQkJCW15c3Vic2VjLmZvckVhY2goKHN1YmMpID0+IHsKCQkJCQkJaWYgKHN1YmNbImZvcm0iXSkgewoJCQkJCQkJY29uc3Qgc3ViZm9ybSA9IHN1YmNbImZvcm0iXTsKCQkJCQkJCWZvcm1EYXRhID0gYWRkRm9ybVZhbHVlcyhzdWJmb3JtLCBmb3JtRGF0YSk7CgkJCQkJCX0KCQkJCQl9KTsKCQkJCX0KCgkJCQlpZiAocGFnZVNjaGVtYVsiZm9ybSJdKSB7CgkJCQkJY29uc3QgbWFpbmZvcm0gPSBwYWdlU2NoZW1hWyJmb3JtIl07CgkJCQkJZm9ybURhdGEgPSBhZGRGb3JtVmFsdWVzKG1haW5mb3JtLCBmb3JtRGF0YSk7CgkJCQl9CgkJCX0KCQl9Cgl9CgoJY29uc3QgZXNnRWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiLmVzaWduX21haW5jb250YWluZXIgc2VsZWN0Iik7CglpZiAoZXNnRWxlKSB7CgkJZXNnRWxlLmZvckVhY2goKGVnZCkgPT4gewoJCQlmb3JtRGF0YS5hcHBlbmQoZWdkLmlkLCBlZ2QudmFsdWUpOwoJCX0pOwoJfQoKCWlmIChpZ25vcmVEb2MubGVuZ3RoID4gMCkgewoJCWlnbm9yZURvYy5mb3JFYWNoKChpZykgPT4gewoJCQlmb3JtRGF0YS5hcHBlbmQoaWcubmFtZSwgaWcudmFsdWUpOwoJCX0pOwoJfQoKCXJldHVybiBmb3JtRGF0YTsKfQoKZnVuY3Rpb24gZmFjdG9yQ2RBZGRyZXNzKHR5cGUsIGNoZWNrZWQpIHsKCWNvbnN0IGFwcGxpY2FudF9kZXRhaWxzY29scyA9IHNjaGVtYVsiYXBwbGljYW50LWRldGFpbHMiXVsic3ViLXNlY3Rpb25zIl07Cgljb25zdCBhZGRyZXNzVmFsdWUgPSB7fTsKCglpZiAoY2hlY2tlZCkgewoJCWZvciAobGV0IGkgPSAwOyBpIDwgYXBwbGljYW50X2RldGFpbHNjb2xzLmxlbmd0aDsgaSsrKSB7CgkJCWlmIChhcHBsaWNhbnRfZGV0YWlsc2NvbHNbaV0uQXBwbGljYW50X1Bvc2l0aW9uID09PSAiQTEiKSB7CgkJCQljb25zdCBmb3JtZWwgPSBhcHBsaWNhbnRfZGV0YWlsc2NvbHNbaV0KCQkJCQk/IGFwcGxpY2FudF9kZXRhaWxzY29sc1tpXS5mb3JtCgkJCQkJOiBbXTsKCgkJCQlmb3JtZWwuZm9yRWFjaCgoZmwpID0+IHsKCQkJCQlpZiAoZmwuaWQpIHsKCQkJCQkJaWYgKCFmbC5pZC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCJzaGlwcGluZyIpKSB7CgkJCQkJCQlpZiAoYWRkcmVzc0ZpZWxkKGZsLmxhYmVsKSkgewoJCQkJCQkJCWNvbnN0IGVsdmFsdWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChmbC5pZCkudmFsdWU7CgkJCQkJCQkJY29uc3Qga2V5ID0gZmwubGFiZWwucmVwbGFjZUFsbCgiICIsICIiKS50b0xvd2VyQ2FzZSgpOwoJCQkJCQkJCWFkZHJlc3NWYWx1ZVtrZXldID0gZWx2YWx1ZTsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0KCQkJCX0pOwoJCQl9CgkJfQoJfQoKCWZvciAobGV0IGkgPSAwOyBpIDwgYXBwbGljYW50X2RldGFpbHNjb2xzLmxlbmd0aDsgaSsrKSB7CgkJaWYgKGFwcGxpY2FudF9kZXRhaWxzY29sc1tpXS5BcHBsaWNhbnRfUG9zaXRpb24gPT0gdHlwZSkgewoJCQljb25zdCBmb3JtZWwgPSBhcHBsaWNhbnRfZGV0YWlsc2NvbHNbaV0KCQkJCT8gYXBwbGljYW50X2RldGFpbHNjb2xzW2ldLmZvcm0KCQkJCTogW107CgoJCQlmb3JtZWwuZm9yRWFjaCgoZmwpID0+IHsKCQkJCWlmIChmbC5pZCAmJiBmbC5kaXNhYmxlZCAhPSAidHJ1ZSIpIHsKCQkJCQlpZiAoZmwuaWQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygic2hpcHBpbmciKSkgewoJCQkJCQlpZiAoYWRkcmVzc0ZpZWxkKGZsLmxhYmVsKSkgewoJCQkJCQkJY29uc3QgbXllbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChmbC5pZCk7CgkJCQkJCQljb25zdCBteXBhcmVudCA9IGhhc1NvbWVQYXJlbnRUaGVDbGFzcyhteWVsZSwgImlucHV0Q3RuIik7CgkJCQkJCQlpZiAoY2hlY2tlZCkgewoJCQkJCQkJCWlmIChmbC5pZC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCJzaGlwcGluZyIpKSB7CgkJCQkJCQkJCWlmIChhZGRyZXNzRmllbGQoZmwubGFiZWwpKSB7CgkJCQkJCQkJCQljb25zdCBrZXkgPSBmbC5sYWJlbC5yZXBsYWNlQWxsKCIgIiwgIiIpLnRvTG93ZXJDYXNlKCk7CgkJCQkJCQkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZChmbC5pZCkudmFsdWUgPSBhZGRyZXNzVmFsdWVba2V5XTsKCQkJCQkJCQkJfQoJCQkJCQkJCX0KCgkJCQkJCQkJbXllbGUuc2V0QXR0cmlidXRlKCJkaXNhYmxlZCIsIHRydWUpOwoJCQkJCQkJCW15ZWxlLmNsYXNzTGlzdC5hZGQoIm5vbmFwX2Rpc2FibGVkIik7CgkJCQkJCQkJbXlwYXJlbnQuY2xhc3NMaXN0LmFkZCgiaGlkZGVuIik7CgkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCWlmIChmbC5pZC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCJzaGlwcGluZyIpKSB7CgkJCQkJCQkJCWlmIChhZGRyZXNzRmllbGQoZmwubGFiZWwpKSB7CgkJCQkJCQkJCQljb25zdCBpbnBFbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChmbC5pZCk7CgkJCQkJCQkJCQlpbnBFbGUudmFsdWUgPSAiIjsKCQkJCQkJCQkJCWNvbnN0IHBhcmVudEVsZSA9IGhhc1NvbWVQYXJlbnRUaGVDbGFzcyhpbnBFbGUsICJpbnB1dEN0biIpOwoJCQkJCQkJCQkJaWYgKHBhcmVudEVsZSkgewoJCQkJCQkJCQkJCXBhcmVudEVsZS5xdWVyeVNlbGVjdG9yKCJsYWJlbCIpLmNsYXNzTGlzdC5hZGQoImhpZGRlbiIpOwoJCQkJCQkJCQkJfQoJCQkJCQkJCQl9CgkJCQkJCQkJfQoKCQkJCQkJCQlteWVsZS5yZW1vdmVBdHRyaWJ1dGUoImRpc2FibGVkIik7CgkJCQkJCQkJbXllbGUuY2xhc3NMaXN0LnJlbW92ZSgibm9uYXBfZGlzYWJsZWQiKTsKCQkJCQkJCQlteXBhcmVudC5jbGFzc0xpc3QucmVtb3ZlKCJoaWRkZW4iKTsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJfSk7CgkJfQoJfQp9CgpmdW5jdGlvbiBhZGRGb3JtVmFsdWVzKGZvcm0sIHZhbHVlKSB7Cgljb25zdCBhcHJpdmFsID0gdmFsdWU7Cglmb3JtLmZvckVhY2goKGZ2KSA9PiB7CgkJaWYgKGZ2LmRpc2FibGVkICE9ICJ0cnVlIikgewoJCQlpZiAoZnYua2V5IHx8IGZ2LmlkKSB7CgkJCQlpZiAoZnYudHlwZSA9PT0gImNoZWNrYm94IikgewoJCQkJCWNvbnN0IG15dmFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoZnYua2V5KTsKCQkJCQlpZiAobXl2YWwubGVuZ3RoKSB7CgkJCQkJCWFwcml2YWwuYXBwZW5kKGZ2LmtleSwgbXl2YWxbMF0uY2hlY2tlZCk7CgkJCQkJfQoJCQkJfSBlbHNlIGlmIChmdi50eXBlID09PSAicmFkaW8iKSB7CgkJCQkJY29uc3QgbXl2YWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChmdi5pZCk7CgkJCQkJaWYgKG15dmFsLmxlbmd0aCkgewoJCQkJCQljb25zdCByYWRpb0J0biA9IG15dmFsLnF1ZXJ5U2VsZWN0b3JBbGwoImlucHV0Iik7CgkJCQkJCXJhZGlvQnRuLmZvckVhY2goKHJiKSA9PiB7CgkJCQkJCQlpZiAocmIuY2hlY2tlZCkgewoJCQkJCQkJCWFwcml2YWwuYXBwZW5kKGZ2LmtleSwgcmIuY2hlY2tlZCk7CgkJCQkJCQl9CgkJCQkJCX0pOwoJCQkJCX0KCQkJCX0gZWxzZSB7CgkJCQkJaWYgKGZ2LnR5cGUgIT09ICJ0ZXh0IikgewoJCQkJCQljb25zdCBteXZhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKGZ2LmtleSk7CgkJCQkJCWlmIChteXZhbC5sZW5ndGgpIHsKCQkJCQkJCWFwcml2YWwuYXBwZW5kKGZ2LmtleSwgbXl2YWxbMF0udmFsdWUpOwoJCQkJCQl9CgkJCQkJfQoJCQkJfQoJCQl9CgkJfQoJfSk7CglyZXR1cm4gdmFsdWU7Cn0KCmZ1bmN0aW9uIHNibWl0RGF0YShpc1NpZ25lZCkgewoJY29uc3QgdGdFbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZXNpZ25zdGF1cyIpOwoJdGdFbGUudmFsdWUgPSBpc1NpZ25lZCA/ICJ0cnVlIiA6ICJmYWxzZSI7Cn0KCmZ1bmN0aW9uIGZpbmFsU2F2ZSgpIHsKCXNpZ25Nb2RhbC5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwoJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRlcicpLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGVMb2FkZXInKTsKCWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoImlucHV0LCB0ZXh0YXJlYSwgc2VsZWN0IikuZm9yRWFjaCgoZSkgPT4gewoJCWUucmVtb3ZlQXR0cmlidXRlKCJkaXNhYmxlZCIpOwoJfSk7CglmaWxscGRmQ29udGVudChmYWxzZSkudGhlbigocmVzKSA9PiB7CgkJLy8gZG8gbm90aGluZwoJfSkKCQkuY2F0Y2goZXJyID0+IHsKCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRlcicpLmNsYXNzTGlzdC5hZGQoJ2hpZGVMb2FkZXInKTsKCQkJYWxlcnQoZXJyKTsKCQkJcmV0dXJuOwoJCX0pCn0KCmZ1bmN0aW9uIG9ubG9hZHdpbigpIHsKCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJGaWVsZF8xbzF1Zm9wIikudmFsdWUgPQoJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJBMV9JbmRpdmlkdWFsX1BhcnR5X2ZpcnN0bmFtZV8xIikudmFsdWUgKwoJCSIgIiArCgkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIkExX0luZGl2aWR1YWxfUGFydHlfbGFzdG5hbWVfMSIpLnZhbHVlOwoJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIkZpZWxkXzE4djh2ZHoiKS52YWx1ZSA9CgkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIkExX0luZGl2aWR1YWxfSG91c2VfTnVtYmVyX19jIikudmFsdWUgKwoJCSIgIiArCgkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIkExX0J1aWxkaW5nX05hbWVfX2MiKS52YWx1ZSArCgkJIiAiICsKCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiQTFfUGVybWFuZW50X0xvY2FsaXR5X19jIikudmFsdWUgKwoJCSIgIiArCgkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIkExX0JpbGxpbmdTdHJlZXQiKS52YWx1ZSArCgkJIiAiICsKCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiQTFfQmlsbGluZ0NpdHkiKS52YWx1ZSArCgkJIiAiICsKCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiQTFfQmlsbGluZ1Bvc3RhbENvZGUiKS52YWx1ZSArCgkJIiAiICsKCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiQTFfQmlsbGluZ1N0YXRlIikudmFsdWUgKwoJCSIgIiArCgkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIkExX0JpbGxpbmdDb3VudHJ5IikudmFsdWU7Cn0KCmZ1bmN0aW9uIHZlcmlmeU15VmFsdWVzKHZhbCkgewoJY29uc3QgbXlIZWFkZXJzID0gbmV3IEhlYWRlcnMoKTsKCW15SGVhZGVycy5hcHBlbmQoIkNvbnRlbnQtVHlwZSIsICJhcHBsaWNhdGlvbi9qc29uIik7CgoJY29uc3Qgc2VjRGF0YSA9IEpTT04uc3RyaW5naWZ5KHsKCQlxdWVyeTogewoJCQlib29sOiB7CgkJCQlzaG91bGQ6IFt7IG1hdGNoOiB7ICJ1c2VyLm5hbWUiOiB2YWwgPyB2YWwudHJpbSgpIDogIiIgfSB9XSwKCQkJfSwKCQl9LAoJfSk7CgoJY29uc3QgcmVxdWVzdE9wdGlvbnMyID0gewoJCW1ldGhvZDogIlBPU1QiLAoJCWJvZHk6IHNlY0RhdGEsCgkJaGVhZGVyczogbXlIZWFkZXJzLAoJCXJlZGlyZWN0OiAiZm9sbG93IiwKCX07CgoJcmV0dXJuIGZldGNoKG5hbWVBcGksIHJlcXVlc3RPcHRpb25zMikKCQkudGhlbigocmVzcG8pID0+IHJlc3BvLmpzb24oKSkKCQkudGhlbigocmVzcG8pID0+IHsKCQkJaWYgKHJlc3BvKSB7CgkJCQljb25zdCBteWhpdHMgPSByZXNwby5oaXRzOwoJCQkJY29uc3QgU2NvcmUgPSBteWhpdHMubWF4X3Njb3JlOwoJCQkJaWYgKFNjb3JlICYmIFNjb3JlICogMTAwID49IFRocmVzaG9sZFNjb3JlKSB7CgkJCQkJY29uc3QgbXlUb3RhbE1hdGNoZWQgPSBteWhpdHMudG90YWw7CgkJCQkJaWYgKG15VG90YWxNYXRjaGVkICYmIG15VG90YWxNYXRjaGVkLnZhbHVlID4gMCkgewoJCQkJCQlyZXR1cm4gdHJ1ZTsKCQkJCQl9CgkJCQl9CgkJCX0KCQkJcmV0dXJuIGZhbHNlOwoJCX0pCgkJLmNhdGNoKCgpID0+IHsKCQkJcmV0dXJuIGZhbHNlOwoJCX0pOwp9CgpmdW5jdGlvbiBzZWFyY2hVcGxvYWQoaW1nTmFtZSkgewoJY29uc3QgbXlIZWFkZXJzID0gbmV3IEhlYWRlcnMoKTsKCW15SGVhZGVycy5hcHBlbmQoIkNvbnRlbnQtVHlwZSIsICJhcHBsaWNhdGlvbi9qc29uIik7CgoJY29uc3QgZmlyRGF0YSA9IEpTT04uc3RyaW5naWZ5KHsKCQlncm91cDogInVzZXJzIiwKCQl1c2VyOiBbCgkJCXsKCQkJCW5hbWU6IGltZ05hbWUsCgkJCX0sCgkJXSwKCX0pOwoKCWNvbnN0IHJlcXVlc3RPcHRpb25zMSA9IHsKCQltZXRob2Q6ICJQT1NUIiwKCQlib2R5OiBmaXJEYXRhLAoJCWhlYWRlcnM6IG15SGVhZGVycywKCQlyZWRpcmVjdDogImZvbGxvdyIsCgl9OwoKCXJldHVybiBmZXRjaChzZWFyY2hBcGksIHJlcXVlc3RPcHRpb25zMSkKCQkudGhlbigocmVzcCkgPT4gcmVzcC5qc29uKCkpCgkJLnRoZW4oKHJlc3ApID0+IHsKCQkJcmV0dXJuIHRydWU7CgkJfSkKCQkuY2F0Y2goKGVycikgPT4gewoJCQlyZXR1cm4gZmFsc2U7CgkJfSk7Cn0KCmZ1bmN0aW9uIGNhbGN1bGF0ZVNpemUoaW1nLCBtYXhXaWR0aCwgbWF4SGVpZ2h0KSB7CglsZXQgd2lkdGggPSBpbWcud2lkdGg7CglsZXQgaGVpZ2h0ID0gaW1nLmhlaWdodDsKCglpZiAod2lkdGggPiBoZWlnaHQpIHsKCQlpZiAod2lkdGggPiBtYXhXaWR0aCkgewoJCQloZWlnaHQgPSBNYXRoLnJvdW5kKChoZWlnaHQgKiBtYXhXaWR0aCkgLyB3aWR0aCk7CgkJCXdpZHRoID0gbWF4V2lkdGg7CgkJfQoJfSBlbHNlIHsKCQlpZiAoaGVpZ2h0ID4gbWF4SGVpZ2h0KSB7CgkJCXdpZHRoID0gTWF0aC5yb3VuZCgod2lkdGggKiBtYXhIZWlnaHQpIC8gaGVpZ2h0KTsKCQkJaGVpZ2h0ID0gbWF4SGVpZ2h0OwoJCX0KCX0KCXJldHVybiBbd2lkdGgsIGhlaWdodF07Cn0KCgoKZnVuY3Rpb24gY29tcHJlc3NJbWFnZShteUZpbGVVUkwsIGV2ZW50LCBpbWFnZUJsb2IgPSAnJywgaGFzRXZlbnQgPSB0cnVlLCBkYXRhRmlsZSA9ICcnKSB7CgoKCS8vIGNvbnN0IE1BWF9XSURUSCA9IDk2MDsKCS8vIGNvbnN0IE1BWF9IRUlHSFQgPSA1NDA7CgoJY29uc3QgTUFYX1dJRFRIID0gMTkwMDsKCWNvbnN0IE1BWF9IRUlHSFQgPSAxMDY4OwoJLy8gY29uc3QgTUlNRV9UWVBFID0gImltYWdlL2pwZWciOwoJLy8gY29uc3QgUVVBTElUWSA9IDEuMDsKCgljb25zdCBteVByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CgoJCS8vIC8vIE9sZCBjb21wcmVzc2lvbiBMb2dpYwoJCS8vIGNvbnN0IGltZyA9IG5ldyBJbWFnZSgpOwoJCS8vIGltZy5zcmMgPSBteUZpbGVVUkw7CgkJLy8gaW1nLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7CgkJLy8gCVVSTC5yZXZva2VPYmplY3RVUkwodGhpcy5zcmMpOwoJCS8vIAlyZWplY3QoZmFsc2UpOwoJCS8vIH07CgoJCS8vIGltZy5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7CgkJLy8gCVVSTC5yZXZva2VPYmplY3RVUkwodGhpcy5zcmMpOwoKCQkvLyAJY29uc3QgW25ld1dpZHRoLCBuZXdIZWlnaHRdID0gY2FsY3VsYXRlU2l6ZShpbWcsIGltZy53aWR0aCwgaW1nLmhlaWdodCk7CgkJLy8gY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIik7CgkJLy8gY2FudmFzLndpZHRoID0gbmV3V2lkdGg7CgkJLy8gY2FudmFzLmhlaWdodCA9IG5ld0hlaWdodDsKCQkvLyBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgiMmQiKTsKCQkvLyAJY3R4LmRyYXdJbWFnZShpbWcsIDAsIDAsIG5ld1dpZHRoLCBuZXdIZWlnaHQpOwoJCS8vIAljYW52YXMudG9CbG9iKAoJCS8vIAkJKGJsb2IpID0+IHsKCQkvLyAJCQljb25zb2xlLmxvZyhibG9iKTsKCQkvLyAJCQlyZXNvbHZlKGJsb2IpOwoKCQkvLyAJCX0sCgkJLy8gCQlNSU1FX1RZUEUsCgkJLy8gCQlRVUFMSVRZCgkJLy8gCSk7CgoJCS8vIH07CgoJCS8vIC8vIE9sZCBjb21wcmVzc2lvbiBMb2dpYyBFbmRzIGhlcmUKCgoKCQkvLyBOZXcgQ29tcHJlc3Npb24gTG9naWMKCgkJY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIik7CgkJY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoIjJkIik7CgkJbGV0IGZpbGUgPSAnJzsKCgkJaWYgKGhhc0V2ZW50KSB7CgkJCWZpbGUgPSBldmVudC50YXJnZXQuZmlsZXNbMF07CgkJfQoJCWVsc2UgewoJCQlmaWxlID0gZGF0YUZpbGU7CgkJfQoKCQljb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwoKCgkJLy8gaW1hZ2Uuc3JjID0gbXlGaWxlVVJMOwoJCS8vIGltYWdlLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7CgkJLy8gCVVSTC5yZXZva2VPYmplY3RVUkwodGhpcy5zcmMpOwoJCS8vIAlyZWplY3QoZmFsc2UpOwoJCS8vIH07CgkJdHJ5IHsKCQkJcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uIChldmVudCkgewoJCQkJY29uc3QgaW1hZ2UgPSBuZXcgSW1hZ2UoKTsKCgoJCQkJaW1hZ2Uub25sb2FkID0gZnVuY3Rpb24gKCkgewoKCQkJCQljb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IGNhbGN1bGF0ZU5ld1NpemUoaW1hZ2UsIE1BWF9XSURUSCwgTUFYX0hFSUdIVCk7IC8vIERlc2lyZWQgd2lkdGggYW5kIGhlaWdodAoJCQkJCWNhbnZhcy53aWR0aCA9IHdpZHRoOwoJCQkJCWNhbnZhcy5oZWlnaHQgPSBoZWlnaHQ7CgkJCQkJY3R4LmRyYXdJbWFnZShpbWFnZSwgMCwgMCwgd2lkdGgsIGhlaWdodCk7CgoJCQkJCXJlc2l6ZWRJbWFnZUJsb2IgPSBkYXRhVVJMVG9CbG9iKGNhbnZhcy50b0RhdGFVUkwoZmlsZS50eXBlKSk7CgkJCQkJLy8gY29uc29sZS5sb2coY2FudmFzLnRvRGF0YVVSTChmaWxlLnR5cGUpKTsKCQkJCQlyZXNvbHZlKHJlc2l6ZWRJbWFnZUJsb2IpOwoKCQkJCX07CgkJCQlpbWFnZS5zcmMgPSBldmVudC50YXJnZXQucmVzdWx0OwoJCQl9OwoKCQkJaWYgKGltYWdlQmxvYiAhPSAnJykgewoJCQkJcmVhZGVyLnJlYWRBc0RhdGFVUkwoaW1hZ2VCbG9iKTsKCQkJfQoJCQllbHNlIHsKCQkJCXJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpOwoJCQl9CgkJfQoJCWNhdGNoIChlcnIpIHsKCQkJY29uc29sZS5sb2coZXJyKTsKCQl9Cgl9KTsKCglyZXR1cm4gbXlQcm9taXNlOwp9CgpmdW5jdGlvbiBjYWxjdWxhdGVOZXdTaXplKGltYWdlLCBtYXhXaWR0aCwgbWF4SGVpZ2h0KSB7CglsZXQgd2lkdGggPSBpbWFnZS53aWR0aDsKCWxldCBoZWlnaHQgPSBpbWFnZS5oZWlnaHQ7CgoJaWYgKHdpZHRoID4gbWF4V2lkdGggfHwgaGVpZ2h0ID4gbWF4SGVpZ2h0KSB7CgkJY29uc3QgYXNwZWN0UmF0aW8gPSB3aWR0aCAvIGhlaWdodDsKCgkJaWYgKHdpZHRoID4gaGVpZ2h0KSB7CgkJCXdpZHRoID0gbWF4V2lkdGg7CgkJCWhlaWdodCA9IHdpZHRoIC8gYXNwZWN0UmF0aW87CgkJfSBlbHNlIHsKCQkJaGVpZ2h0ID0gbWF4SGVpZ2h0OwoJCQl3aWR0aCA9IGhlaWdodCAqIGFzcGVjdFJhdGlvOwoJCX0KCgoJCXJldHVybiB7IHdpZHRoLCBoZWlnaHQgfTsKCX0KCgkvLyBSZXR1cm4gZGVmYXVsdCB2YWx1ZXMgaWYgdGhlIGNvbmRpdGlvbnMgYXJlIG5vdCBtZXQKCXJldHVybiB7IHdpZHRoLCBoZWlnaHQgfTsKfQpmdW5jdGlvbiBkYXRhVVJMVG9CbG9iKGRhdGFVUkwpIHsKCWNvbnN0IGJ5dGVTdHJpbmcgPSBhdG9iKGRhdGFVUkwuc3BsaXQoJywnKVsxXSk7Cgljb25zdCBtaW1lU3RyaW5nID0gZGF0YVVSTC5zcGxpdCgnLCcpWzBdLnNwbGl0KCc6JylbMV0uc3BsaXQoJzsnKVswXTsKCWNvbnN0IGFycmF5QnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKGJ5dGVTdHJpbmcubGVuZ3RoKTsKCWNvbnN0IHVpbnQ4QXJyYXkgPSBuZXcgVWludDhBcnJheShhcnJheUJ1ZmZlcik7CgoJZm9yIChsZXQgaSA9IDA7IGkgPCBieXRlU3RyaW5nLmxlbmd0aDsgaSsrKSB7CgkJdWludDhBcnJheVtpXSA9IGJ5dGVTdHJpbmcuY2hhckNvZGVBdChpKTsKCX0KCglyZXR1cm4gbmV3IEJsb2IoW2FycmF5QnVmZmVyXSwgeyB0eXBlOiBtaW1lU3RyaW5nIH0pOwp9CgpmdW5jdGlvbiBjcmVhdGVGdW5jdGlvbkRhdGEoKSB7Cgl2YXIgUHJldmlld0RhdGEgPSB7CgkJYXBwbGljYW50czogW10sCgkJYm9va2luZ3NvdXJjZToge30sCgkJdW5pdGRldGFpbHM6IHt9LAoJCWJvb2tpbmdhbW91bnQ6IHt9LAoJCWFsbGFib3V0eW91OiB7fSwKCQlzZWxmZGVjbGFyYXRpb246ICIiLAoJCWd0bmNkZXRhaWw6IG51bGwsCgkJZmlyX2xvdDoge30sCgl9OwoKCWNvbnN0IHNjaEFyciA9IHNjaGVtYVsiYXBwbGljYW50LWRldGFpbHMiXVsic3ViLXNlY3Rpb25zIl07Cgljb25zdCBib29raW5nc291cmNlQXJyID0gc2NoZW1hWyJib29raW5nLXNvdXJjZSJdOwoJY29uc3QgYW5leHVyZUFyciA9IHNjaGVtYVsiYW5leHVyZS1hIl1bInN1Yi1zZWN0aW9ucyJdOwoJY29uc3QgZmlyX2xvdCA9IHNjaGVtYVsiZmlyc3QtcGFnZSJdWyJmb3JtIl07Cgljb25zdCBpb19hcHBpY2FudHMgPSBQcmV2aWV3RGF0YS5hcHBsaWNhbnRzOwoJY29uc3QgaW9fYm9va2luZ3NyYyA9IFByZXZpZXdEYXRhLmJvb2tpbmdzb3VyY2U7Cgljb25zdCBpb191bml0ZGV0YWlscyA9IFByZXZpZXdEYXRhLnVuaXRkZXRhaWxzOwoJY29uc3QgaW9fYm9va2luZ2Ftb3VudCA9IFByZXZpZXdEYXRhLmJvb2tpbmdhbW91bnQ7Cgljb25zdCBpb19hbGxhYm91dHlvdSA9IFByZXZpZXdEYXRhLmFsbGFib3V0eW91OwoJY29uc3QgZmlyX2xvdGRhdGEgPSBQcmV2aWV3RGF0YS5maXJfbG90OwoKCWZ1bmN0aW9uIHN1bmNyZWF0ZShmZGF0YSwgc2NkLCBpbmRleCkgewoJCWNvbnN0IG15c2NobWEgPSBteVByZXZpZXdEYXRhW2ZkYXRhXTsKCQlsZXQgc3VidmFsdWUgPSBbXTsKCQl2YXIgbXlhcnJheSA9IHsKCQkJcGFkZHJlc3M6IFtdLAoJCQljYWRkcmVzczogW10sCgkJfTsKCQlmb3IgKGxldCB4ID0gMDsgeCA8IG15c2NobWEubGVuZ3RoOyB4KyspIHsKCQkJY29uc3QgZm9ybSA9IHNjZFtpbmRleF0uZm9ybTsKCQkJaWYgKGZkYXRhID09PSAiYWRkcmVzcyIpIHsKCQkJCWZvcm0uZm9yRWFjaCgoZWxlbWVudCkgPT4gewoJCQkJCWlmIChteXNjaG1hW3hdID09PSBlbGVtZW50LmxhYmVsKSB7CgkJCQkJCWNvbnN0IG15ZWxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxlbWVudC5pZCk7CgkJCQkJCWlmIChteWVsZSkgewoJCQkJCQkJY29uc3QgZml2YWx1ZSA9IG15ZWxlLnZhbHVlOwoJCQkJCQkJaWYgKGZpdmFsdWUpIHsKCQkJCQkJCQlpZiAoIWVsZW1lbnQuaWQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygic2hpcHBpbmciKSkgewoJCQkJCQkJCQlteWFycmF5LnBhZGRyZXNzLnB1c2goZml2YWx1ZSk7CgkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJbXlhcnJheS5jYWRkcmVzcy5wdXNoKGZpdmFsdWUpOwoJCQkJCQkJCX0KCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0KCQkJCX0pOwoJCQl9IGVsc2UgewoJCQkJZm9ybS5mb3JFYWNoKChlbGVtZW50KSA9PiB7CgkJCQkJaWYgKG15c2NobWFbeF0gPT09IGVsZW1lbnQubGFiZWwpIHsKCQkJCQkJY29uc3QgbXllbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGVtZW50LmlkKTsKCQkJCQkJY29uc3QgZml2YWx1ZSA9IG15ZWxlLmNoZWNrZWQgPyBteWVsZS5jaGVja2VkIDogbXllbGUudmFsdWU7CgkJCQkJCWlmIChmaXZhbHVlICE9ICIiICYmIGZpdmFsdWUgIT0gdW5kZWZpbmVkKSB7CgkJCQkJCQlzdWJ2YWx1ZS5wdXNoKGZpdmFsdWUpOwoJCQkJCQl9CgkJCQkJfQoJCQkJfSk7CgkJCX0KCQl9CgkJaWYgKGZkYXRhID09PSAiYWRkcmVzcyIpIHsKCQkJcmV0dXJuIG15YXJyYXk7CgkJfQoJCXJldHVybiBzdWJ2YWx1ZTsKCX0KCglmb3IgKGxldCBpID0gMDsgaSA8IHNjaEFyci5sZW5ndGg7IGkrKykgewoJCWlmIChpID09PSBzY2hBcnIubGVuZ3RoIC0gMSkgewoJCQljb25zdCBhbGxhYm91dEZvcm0gPSBzY2hBcnJbaV0uZm9ybTsKCQkJYWxsYWJvdXRGb3JtLmZvckVhY2goKGVsZW1lbnQpID0+IHsKCQkJCWNvbnN0IG15ZWxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxlbWVudC5pZCk7CgkJCQlpZiAobXllbGUpIHsKCQkJCQlpZiAoZWxlbWVudC50eXBlID09PSAicmFkaW8iKSB7CgkJCQkJCWNvbnN0IHRnRWxlID0gbXllbGUucXVlcnlTZWxlY3RvckFsbCgiLmNoZWNrYm94LXJvdyBpbnB1dCIpOwoJCQkJCQl0Z0VsZS5mb3JFYWNoKCh0bCkgPT4gewoJCQkJCQkJaWYgKHRsLmNoZWNrZWQpIHsKCQkJCQkJCQlpb19hbGxhYm91dHlvdVsKCQkJCQkJCQkJZWxlbWVudC5sYWJlbC50cmltKCkudG9Mb3dlckNhc2UoKS5yZXBsYWNlQWxsKCIgIiwgIl8iKQoJCQkJCQkJCV0gPSB0bC52YWx1ZTsKCQkJCQkJCX0KCQkJCQkJfSk7CgkJCQkJfSBlbHNlIHsKCQkJCQkJaW9fYWxsYWJvdXR5b3VbCgkJCQkJCQllbGVtZW50LmxhYmVsLnRyaW0oKS50b0xvd2VyQ2FzZSgpLnJlcGxhY2VBbGwoIiAiLCAiXyIpCgkJCQkJCV0gPSBteWVsZS52YWx1ZTsKCQkJCQl9CgkJCQl9CgkJCX0pOwoJCX0gZWxzZSB7CgkJCWNvbnN0IGRldGlhbHMgPSB7CgkJCQl0eXBlOiBzY2hBcnJbaV0uQXBwbGljYW50X1Bvc2l0aW9uLAoJCQkJZGF0YToge30sCgkJCX07CgkJCWNvbnN0IGZpYXJyID0gT2JqZWN0LmtleXMobXlQcmV2aWV3RGF0YSk7CgkJCWZpYXJyLmZvckVhY2goKGZpYSkgPT4gewoJCQkJY29uc3QgZGF0YSA9IHN1bmNyZWF0ZShmaWEsIHNjaEFyciwgaSk7CgkJCQlpZiAoZmlhID09PSAibmFtZSIgfHwgZmlhID09PSAiYWRkaGFyX251bWJlciIgfHwgZmlhID09PSAicGFuX251bWJlciIpIHsKCQkJCQlkZXRpYWxzLmRhdGFbZmlhXSA9IGRhdGEuam9pbigiICIpOwoJCQkJfSBlbHNlIGlmIChmaWEgPT09ICJhZGRyZXNzIiB8fCBmaWEgPT09ICJlbWFpbCIgfHwgZmlhID09PSAicGhvbmUiKSB7CgkJCQkJaWYgKGZpYSA9PT0gImFkZHJlc3MiKSB7CgkJCQkJCWRldGlhbHMuZGF0YVsicGVybWFuZW50X2FkZHJlc3MiXSA9IGRhdGFbInBhZGRyZXNzIl0uam9pbigiLCAiKTsKCQkJCQkJZGV0aWFscy5kYXRhWyJjb3JyZXNwb25kZW5jZV9hZGRyZXNzIl0gPQoJCQkJCQkJZGF0YVsiY2FkZHJlc3MiXS5qb2luKCIsICIpOwoJCQkJCX0gZWxzZSB7CgkJCQkJCWRldGlhbHMuZGF0YVtmaWFdID0gZGF0YS5qb2luKCIsICIpOwoJCQkJCX0KCQkJCX0KCQkJfSk7CgkJCWNvbnN0IHBhbnN0YXR1cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBwYW5Ob3RhdmFpbGFibGUke2kgKyAxfWApOwoJCQlpZiAocGFuc3RhdHVzKSB7CgkJCQlkZXRpYWxzLmlzUGFuID0gIXBhbnN0YXR1cy5jaGVja2VkOwoJCQl9CgkJCWlvX2FwcGljYW50cy5wdXNoKGRldGlhbHMpOwoJCX0KCX0KCgljb25zdCBib29rU3JjRm9ybSA9IGJvb2tpbmdzb3VyY2VBcnIuZm9ybTsKCWZvciAobGV0IGkgPSAwOyBpIDwgYm9va1NyY0Zvcm0ubGVuZ3RoOyBpKyspIHsKCQlpb19ib29raW5nc3JjW2Jvb2tTcmNGb3JtW2ldLmxhYmVsLnRvTG93ZXJDYXNlKCkucmVwbGFjZUFsbCgiICIsICJfIildID0KCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYm9va1NyY0Zvcm1baV0uaWQpCgkJCQk/IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGJvb2tTcmNGb3JtW2ldLmlkKS52YWx1ZQoJCQkJOiAiIjsKCX0KCgljb25zdCB1ZEZvcm0gPSBhbmV4dXJlQXJyWzBdLmZvcm07Cgljb25zdCBib29raW5nRm9ybSA9IGFuZXh1cmVBcnJbMV0uZm9ybTsKCWZvciAobGV0IGkgPSAwOyBpIDwgdWRGb3JtLmxlbmd0aDsgaSsrKSB7CgkJaWYgKHVkRm9ybVtpXS50eXBlICE9PSAidGV4dCIpIHsKCQkJaW9fdW5pdGRldGFpbHNbCgkJCQl1ZEZvcm1baV0ubGFiZWwudHJpbSgpLnRvTG93ZXJDYXNlKCkucmVwbGFjZUFsbCgiICIsICJfIikKCQkJXSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHVkRm9ybVtpXS5pZCkKCQkJCQk/IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHVkRm9ybVtpXS5pZCkudmFsdWUKCQkJCQk6ICIiOwoJCX0KCX0KCglsZXQgYXJyeV9ib29raW5nYW1vdW50ID0gJyc7Cglmb3IgKGxldCBrID0gMDsgayA8IHBheW1lbnRTb3VyY2VDb3VudDsgaysrKSB7CgkJY29uc3QgaWRzID0gayArIDE7CgkJbGV0IGFtb3VudCA9ICcnOwoJCWxldCBhbW91bnRfd29yZCA9ICcnOwoJCWxldCBwYXltZW50X3R5cGUgPSAnJzsKCQlsZXQgYmFua190eXBlID0gJyc7CgkJbGV0IHBheW1lbnRfZGF0ZSA9ICcnOwoJCWxldCBjaGVxdWVfZmF2b3JpbmdfZGV0YWlscyA9ICcnOwoJCWxldCBpbWdTcmMgPSAnJzsKCQkvLyBjb25zdCBiYW5rX2NoZXF1ZV9pbWcgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdteWRvY3VtZW50JykpCgkJY29uc3QgYmFua19jaGVxdWVfaW1nID0gSlNPTi5wYXJzZShteWRvY3VtZW50KQoJCWlmIChiYW5rX2NoZXF1ZV9pbWdbJ2JhY2tfY2hlY2tfcG9zdF8nICsgaWRzXSkgewoJCQlpbWdTcmMgPSBiYW5rX2NoZXF1ZV9pbWdbJ2JhY2tfY2hlY2tfcG9zdF8nICsgaWRzXQoJCX0KCQlmb3IgKGxldCBpID0gMDsgaSA8IGJvb2tpbmdGb3JtLmxlbmd0aDsgaSsrKSB7CgkJCWlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChib29raW5nRm9ybVtpXS5pZCArICctJyArIGlkcyk/LnBsYWNlaG9sZGVyKSB7CgkJCQlpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYm9va2luZ0Zvcm1baV0uaWQgKyAnLScgKyBpZHMpLnBsYWNlaG9sZGVyLnRyaW0oKS50b0xvd2VyQ2FzZSgpLnJlcGxhY2VBbGwoIiAiLCAiXyIpID09ICdib29raW5nX2Ftb3VudF8oaW5faW5yKScpIHsKCQkJCQlhbW91bnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChib29raW5nRm9ybVtpXS5pZCArICctJyArIGlkcykudmFsdWU7CgkJCQl9CgkJCQlpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYm9va2luZ0Zvcm1baV0uaWQgKyAnLScgKyBpZHMpLnBsYWNlaG9sZGVyLnRyaW0oKS50b0xvd2VyQ2FzZSgpLnJlcGxhY2VBbGwoIiAiLCAiXyIpID09ICdib29raW5nX2Ftb3VudF9pbl93b3Jkc18oaW5faW5yKScpIHsKCQkJCQlhbW91bnRfd29yZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGJvb2tpbmdGb3JtW2ldLmlkICsgJy0nICsgaWRzKS52YWx1ZTsKCQkJCX0KCQkJCWlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChib29raW5nRm9ybVtpXS5pZCArICctJyArIGlkcykucGxhY2Vob2xkZXIudHJpbSgpLnRvTG93ZXJDYXNlKCkucmVwbGFjZUFsbCgiICIsICJfIikgPT0gJ2RkL3BvL2NoZXF1ZV9uby9ydGdzL25lZnQnKSB7CgkJCQkJcGF5bWVudF90eXBlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYm9va2luZ0Zvcm1baV0uaWQgKyAnLScgKyBpZHMpLnZhbHVlOwoJCQkJfQoJCQkJaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGJvb2tpbmdGb3JtW2ldLmlkICsgJy0nICsgaWRzKS5wbGFjZWhvbGRlci50cmltKCkudG9Mb3dlckNhc2UoKS5yZXBsYWNlQWxsKCIgIiwgIl8iKSA9PSAnYmFuaycpIHsKCQkJCQliYW5rX3R5cGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChib29raW5nRm9ybVtpXS5pZCArICctJyArIGlkcykudmFsdWU7CgkJCQl9CgkJCQlpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYm9va2luZ0Zvcm1baV0uaWQgKyAnLScgKyBpZHMpLnBsYWNlaG9sZGVyLnRyaW0oKS50b0xvd2VyQ2FzZSgpLnJlcGxhY2VBbGwoIiAiLCAiXyIpID09ICdjaGVxdWVfZmF2b3JpbmdfZGV0YWlscycpIHsKCQkJCQljaGVxdWVfZmF2b3JpbmdfZGV0YWlscyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGJvb2tpbmdGb3JtW2ldLmlkICsgJy0nICsgaWRzKS52YWx1ZTsKCQkJCX0KCQkJCWlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChib29raW5nRm9ybVtpXS5pZCArICctJyArIGlkcykucGxhY2Vob2xkZXIudHJpbSgpLnRvTG93ZXJDYXNlKCkucmVwbGFjZUFsbCgiICIsICJfIikgPT0gJ2RhdGUnKSB7CgkJCQkJcGF5bWVudF9kYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYm9va2luZ0Zvcm1baV0uaWQgKyAnLScgKyBpZHMpLnZhbHVlOwoJCQkJfQoJCQl9CgkJfQoJCWFycnlfYm9va2luZ2Ftb3VudCArPSBgPGRpdiBjbGFzcz0ibWFpbl9mb3JtZGV0YWlsIj4KICA8ZGl2IGNsYXNzPSJtYWluX2Jsb2NrIHRhYmxlX2Jvb2tpbmdhbW91bnQiPgogIDxoMz5CT09LSU5HIEFNT1VOVCAke2lkc308L2gzPgogIDx0YWJsZT4KICAgIDx0Ym9keT4KICAgICAgPHRyPgogICAgICAgIDx0ZD5CYW5rOjwvdGQ+CiAgICAgICAgPHRkIGlkPSIiPiR7YmFua190eXBlfTwvdGQ+CiAgICAgICAgPHRkPkRhdGU6PC90ZD4KICAgICAgICA8dGQgaWQ9IiIgY29sc3Bhbj0iMyI+JHtwYXltZW50X2RhdGV9PC90ZD4KICAgICAgPC90cj4KICAgICAgPHRyPgogICAgICAgIDx0ZD5SZWZlcmVuY2UgTm8uOjwvdGQ+CiAgICAgICAgPHRkIGlkPSIiPiR7cGF5bWVudF90eXBlfTwvdGQ+CiAgICAgICAgPHRkPkluIEZhdm91ciBvZjo8L3RkPgogICAgICAgIDx0ZCBpZD0iIj4ke2NoZXF1ZV9mYXZvcmluZ19kZXRhaWxzfTwvdGQ+CiAgICAgIDwvdHI+CiAgICAgIDx0cj4KICAgICAgICA8dGQ+Qm9va2luZyBBbW91bnQgKElOUik6PC90ZD4KICAgICAgICA8dGQgaWQ9IiI+JHthbW91bnR9PC90ZD4KICAgICAgPC90cj4KICAgICAgPHRyPgogICAgICAgIDx0ZD5BbXQuIGluIFdvcmRzIChJTlIpOjwvdGQ+CiAgICAgICAgPHRkIGlkPSIiPiR7YW1vdW50X3dvcmR9PC90ZD4KICAgICAgPC90cj4gCiAgICA8L3Rib2R5PgogICAgICA8L3RhYmxlPgogICAgPC9kaXY+CiAgICA8ZGl2IGNsYXNzPSJtYWluX2Jsb2NrIHRhYmxlX2Jvb2tpbmdhbW91bnQiPgogICAgPGgzPlVwbG9hZCBpbWFnZTwvaDM+CiAgICA8dGFibGU+CiAgICAgIDx0Ym9keT4KICAgICAgICA8dHI+CiAgICAgICAgICA8dGQ+PC90ZD4KICAgICAgICAgIDx0ZCBjbGFzcz0iIj48aW1nIGNsYXNzPSJiYWNrX2NoZWNrX2ltYWdlICR7cGF5bWVudF90eXBlfSIgc3JjPSIke2ltZ1NyY30iPjwvdGQ+CiAgICAgICAgPC90cj4KICAgICAgICA8dHI+CiAgICAgIDwvdGJvZHk+CiAgICA8L3RhYmxlPgogIDwvZGl2PgogIDwvZGl2PmA7Cgl9CgkvLyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFnZV9ib29raW5nYW1vdW50JykuaW5zZXJ0QWRqYWNlbnRIVE1MKCJhZnRlcmVuZCIsIGFycnlfYm9va2luZ2Ftb3VudCk7CgoJLy8gY29uc3QgYmFua19jaGVxdWVfaW1nID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbXlkb2N1bWVudCcpKQoJY29uc3QgYmFua19jaGVxdWVfaW1nID0gSlNPTi5wYXJzZShteWRvY3VtZW50KQoJaWYgKGJhbmtfY2hlcXVlX2ltZ1snYmFja19jaGVja19pbWFnZSddKSB7CgkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JhY2tfY2hlY2tfaW1hZ2UnKS5zcmMgPSBiYW5rX2NoZXF1ZV9pbWdbJ2JhY2tfY2hlY2tfaW1hZ2UnXTsKCX0KCWZvciAobGV0IGkgPSAwOyBpIDwgZmlyX2xvdC5sZW5ndGg7IGkrKykgewoJCWlmIChmaXJfbG90W2ldLnR5cGUgIT09ICJ0ZXh0IikgewoJCQlmaXJfbG90ZGF0YVtmaXJfbG90W2ldLmxhYmVsLnRyaW0oKS50b0xvd2VyQ2FzZSgpLnJlcGxhY2VBbGwoIiAiLCAiXyIpXSA9CgkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZChmaXJfbG90W2ldLmlkKQoJCQkJCT8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZmlyX2xvdFtpXS5pZCkudmFsdWUKCQkJCQk6ICIiOwoJCX0KCX0KCglQcmV2aWV3RGF0YS5hcHBsaWNhbnRzID0gaW9fYXBwaWNhbnRzOwoJUHJldmlld0RhdGEuYm9va2luZ3NvdXJjZSA9IGlvX2Jvb2tpbmdzcmM7CglQcmV2aWV3RGF0YS51bml0ZGV0YWlscyA9IGlvX3VuaXRkZXRhaWxzOwoJUHJldmlld0RhdGEuYm9va2luZ2Ftb3VudCA9IGlvX2Jvb2tpbmdhbW91bnQ7CglQcmV2aWV3RGF0YS5hbGxhYm91dHlvdSA9IGlvX2FsbGFib3V0eW91OwoJUHJldmlld0RhdGEuZmlyX2xvdCA9IGZpcl9sb3RkYXRhOwoJUHJldmlld0RhdGEuc2VsZmRlY2xhcmF0aW9uID0gc2NoZW1hWyJzZWxmLWRlY2xhcmF0aW9uIl1bImlubmVySFRNTCJdOwoKCWZvciAobGV0IGkgPSAwOyBpIDwgaW9fYXBwaWNhbnRzLmxlbmd0aDsgaSsrKSB7CgkJaW9fYXBwaWNhbnRzW2ldLnVzZXIgPSBzaGFyZURvY3VlbWVudChgYXBwbGljYW50LXBob3RvLXBpY2tlciR7aSArIDF9YCk7CgoJCWNvbnN0IGRvY3VtZW50cyA9IFtdOwoJCWNvbnN0IGZpbGVVcGxvYWRFTGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCIuZmlsZXVwbG9hZF9jb250aWFuZXIiKVtpXTsKCQlpZiAoZmlsZVVwbG9hZEVMZSkgewoJCQljb25zdCBkb2N1bWVudEZpbGVzID0KCQkJCWZpbGVVcGxvYWRFTGUucXVlcnlTZWxlY3RvckFsbCgiLmZpbGUtdXBsb2FkIikgfHwgW107CgkJCWZvciAobGV0IHggPSAwOyB4IDwgZG9jdW1lbnRGaWxlcy5sZW5ndGg7IHgrKykgewoJCQkJY29uc3QgZGV0aWFscyA9IHsKCQkJCQlsYWJlbDogZG9jdW1lbnRGaWxlc1t4XS5xdWVyeVNlbGVjdG9yKCJsYWJlbCIpCgkJCQkJCT8gZG9jdW1lbnRGaWxlc1t4XS5xdWVyeVNlbGVjdG9yKCJsYWJlbCIpLmlubmVyVGV4dAoJCQkJCQk6ICIiLAoJCQkJCXVybDogIiIsCgkJCQl9OwoJCQkJY29uc3QgaW5wdXRFbGUgPSBkb2N1bWVudEZpbGVzW3hdLnF1ZXJ5U2VsZWN0b3IoImlucHV0Iik7CgkJCQlpZiAoaW5wdXRFbGUpIHsKCQkJCQlkZXRpYWxzLnVybCA9IHNoYXJlRG9jdWVtZW50KGlucHV0RWxlLmlkKTsKCQkJCX0KCQkJCWlmIChkZXRpYWxzLnVybCkgewoJCQkJCWRvY3VtZW50cy5wdXNoKGRldGlhbHMpOwoJCQkJfQoJCQl9CgkJfQoKCQlpb19hcHBpY2FudHNbaV0uZG9jdW1lbnRzID0gZG9jdW1lbnRzOwoJfQoJcmV0dXJuIFByZXZpZXdEYXRhOwp9CgpmdW5jdGlvbiBzdG9yZURvY3VlbWVudChpZCwgYmxvYikgewoJLy8gY29uc3QgbXlKc29uID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgibXlkb2N1bWVudCIpKSB8fCBbXTsKCWNvbnN0IG15SnNvbiA9IEpTT04ucGFyc2UobXlkb2N1bWVudCkgfHwgW107CgoJaWYgKGJsb2IpIHsKCQljb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwoJCXJlYWRlci5yZWFkQXNEYXRhVVJMKGJsb2IpOwoJCXJlYWRlci5hZGRFdmVudExpc3RlbmVyKCJsb2FkIiwgKCkgPT4gewoJCQlteUpzb25baWRdID0gcmVhZGVyLnJlc3VsdDsKCQkJLy8gbG9jYWxTdG9yYWdlLnNldEl0ZW0oIm15ZG9jdW1lbnQiLCBKU09OLnN0cmluZ2lmeShteUpzb24pKTsKCQkJbXlkb2N1bWVudCA9IEpTT04uc3RyaW5naWZ5KG15SnNvbik7CgkJfSk7Cgl9Cn0KCmZ1bmN0aW9uIFN0b3JlRG9jdW1lbnROYW1lKGlkLCBuYW1lKSB7Cgljb25zdCBteUpzb24gPSBKU09OLnBhcnNlKG15ZG9jdW1lbnQpIHx8IFtdOwoKCWlmIChuYW1lKSB7CgkJbXlKc29uW2lkXSA9IG5hbWU7CgkJbXlkb2N1bWVudCA9IEpTT04uc3RyaW5naWZ5KG15SnNvbik7Cgl9Cn0KCmZ1bmN0aW9uIHN0b3JlRG9jdWVtZW50V2l0aE91dEJhc2UoaWQsIGJsb2IpIHsKCS8vIGNvbnN0IG15SnNvbiA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oIm15ZG9jdW1lbnQiKSkgfHwgW107Cgljb25zdCBteUpzb24gPSBKU09OLnBhcnNlKG15ZG9jdW1lbnQpIHx8IFtdOwoKCWlmIChibG9iKSB7CgkJY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKCQlyZWFkZXIucmVhZEFzRGF0YVVSTChibG9iKTsKCQlyZWFkZXIuYWRkRXZlbnRMaXN0ZW5lcigibG9hZCIsICgpID0+IHsKCQkJbXlKc29uW2lkXSA9IHJlYWRlci5yZXN1bHQuc3BsaXQoJywnKVsxXTsKCQkJLy8gbG9jYWxTdG9yYWdlLnNldEl0ZW0oIm15ZG9jdW1lbnQiLCBKU09OLnN0cmluZ2lmeShteUpzb24pKTsKCQkJbXlkb2N1bWVudCA9IEpTT04uc3RyaW5naWZ5KG15SnNvbik7CgkJfSk7Cgl9Cn0KCmZ1bmN0aW9uIHNoYXJlRG9jdWVtZW50KGlkKSB7CgkvLyBjb25zdCBteUpzb24gPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJteWRvY3VtZW50IikpIHx8IFtdOwoJY29uc3QgbXlKc29uID0gSlNPTi5wYXJzZShteWRvY3VtZW50KSB8fCBbXTsKCglyZXR1cm4gbXlKc29uW2lkXSA/IG15SnNvbltpZF0gOiBudWxsOwp9CgpmdW5jdGlvbiBmaWxscGRmQ29udGVudChpc1ByZXZpZXcpIHsKCglkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZGVyJykuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZUxvYWRlcicpOwoKCWNvbnN0IG15cHJvbWlzZSA9IG5ldyBQcm9taXNlKChwcmVyZXMsIHByZXJlaikgPT4gewoJCS8vIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkZXInKS5jbGFzc0xpc3QucmVtb3ZlKCdoaWRlTG9hZGVyJyk7CgkJZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLmNhbnZhc19kaXZfcGRmIikuY2xhc3NMaXN0LnJlbW92ZSgiaGlkZGVuIik7CgkJY29uc3QgbXlwcmV2aWV3RGV0YWlscyA9IGNyZWF0ZUZ1bmN0aW9uRGF0YSgpOwoJCWxldCBhbGxvdGVlcyA9IG15cHJldmlld0RldGFpbHMuYXBwbGljYW50czsKCgkJbGV0IG5hbWVzID0gJyc7CgkJbGV0IHNpZ25MaW5lcyA9ICcnOwoJCWxldCBjb3VudCA9IDE7CgkJbGV0IGNvdW50U3RyID0gJyc7CgkJY29uc3QgdW5pdE5vID0gc2NoZW1hWydmaXJzdC1wYWdlJ11bJ2Zvcm0nXVsyXVsnZGVmYXVsdFZhbHVlJ107CgkJbGV0IHVuaXROb1N0ciA9ICcnOwoKCQlmb3IgKGxldCBhbGxvdGVlIG9mIGFsbG90ZWVzKSB7CgkJCW5hbWVzICs9IGA8cD4ke2FsbG90ZWUuZGF0YS5uYW1lfTwvcD5gOwoJCQl1bml0Tm9TdHIgKz0gYDxwPiR7dW5pdE5vfTwvcD5gOwoJCQlzaWduTGluZXMgKz0gYDxwPiR7Y291bnR9PC9wPmA7CgkJCWNvdW50U3RyICs9IGA8cD4ke2NvdW50fTwvcD5gOwoJCQljb3VudCsrOwoJCX0KCgoJCS8vCgoJCWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIi5QYWdlX2t5YyIpLmZvckVhY2goKGVsZSkgPT4gewoJCQllbGUucmVtb3ZlKCk7CgkJfSk7CgkJZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiLnBhZ2VfYXBjZGV0YWlscyIpLmZvckVhY2goKGVsZSkgPT4gewoJCQllbGUucmVtb3ZlKCk7CgkJfSk7CgoJCWxldCBpc0NvbmNlbnQgPSB0cnVlOwoJCWNvbnN0IGZpcl9wRGF0YSA9IHNjaGVtYVsiZmlyc3QtcGFnZSJdOwoKCQl2YXIgbXlxdW90YXRpb25QRGYgPSAiIjsKCQlpZiAoZmlyX3BEYXRhKSB7CgkJCWNvbnN0IGZvcm1EYXRhID0gZmlyX3BEYXRhWyJjb25zZW50Zm9ybSJdOyAgICAgLy8gVG8gYmUgdW5jb21tZW50ZWQKCQkJLy8gY29uc3QgZm9ybURhdGEgPSB0cnVlOyAgICAgLy8gVG8gYmUgY29tbWVudGVkCgoJCQlpZiAoIWZvcm1EYXRhIHx8IGZvcm1EYXRhID09PSAiZmFsc2UiKSB7CgkJCQlpc0NvbmNlbnQgPSBmYWxzZTsKCQkJfQoKCQl9CgoJCWpzb25EYXRhWydpc0NvbmNlbnQnXSA9IGlzQ29uY2VudDsKCQlqc29uRGF0YVsndW5pdE5vJ10gPSB1bml0Tm87CgkJLy8ganNvbkRhdGFbJ3Byb2plY3RMb2dvJ10gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGVhZF9sb2dvMicpLmlubmVyVGV4dDsKCQlqc29uRGF0YVsncHJvamVjdExvZ28nXSA9ICcnOwoKCQlteXF1b3RhdGlvblBEZiA9IGZpcl9wRGF0YVsicXVvdGF0aW9ucGRmIl07CgkJY29uc3QgY29uc2Zvcm0xID0gZmlyX3BEYXRhWyJmb3JtIl1bMV1bImRlZmF1bHRWYWx1ZSJdOwoJCWpzb25EYXRhWydjb25zZW50Rm9ybVR5cGUnXSA9IGNvbnNmb3JtMS50b1VwcGVyQ2FzZSgpOwoKCQlpZiAobXlwcmV2aWV3RGV0YWlscykgewoJCQlteXByZXZpZXdEZXRhaWxzLmlzQ29uY2VudCA9IGlzQ29uY2VudDsKCQkJLy8gbG9jYWxTdG9yYWdlLnNldEl0ZW0oIm15aW9qc29uIiwgSlNPTi5zdHJpbmdpZnkobXlwcmV2aWV3RGV0YWlscykpOwoJCQlteWlvanNvbiA9IEpTT04uc3RyaW5naWZ5KG15cHJldmlld0RldGFpbHMpOwoKCQkJY29uc3QgZmlyX2xvdERhdGEgPSBteXByZXZpZXdEZXRhaWxzLmZpcl9sb3Q7CgkJCWlmIChmaXJfbG90RGF0YSkgewoJCQkJY29uc3QgbXlOYW1lRWxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImZpcnN0X3BuYW1lIik7CgkJCQlteU5hbWVFbGUuaW5uZXJUZXh0ID0gbXlwcmV2aWV3RGV0YWlscy5hcHBsaWNhbnRzWzBdWydkYXRhJ10ubmFtZTsKCgkJCQljb25zdCBteXROYW1lRWxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImZpcnN0X3RuYW1lIik7CgkJCQlsZXQgbXl2YWx1ZSA9IFtdOwoJCQkJbXl2YWx1ZS5wdXNoKG15cHJldmlld0RldGFpbHMudW5pdGRldGFpbHMucHJvamVjdF9uYW1lKQoJCQkJY29uc3QgZml0TG90RGF0YSA9IE9iamVjdC5rZXlzKGZpcl9sb3REYXRhKTsKCQkJCWZvciAobGV0IGkgPSAxOyBpIDwgZml0TG90RGF0YS5sZW5ndGg7IGkrKykgewoJCQkJCWlmIChmaXJfbG90RGF0YVtmaXRMb3REYXRhW2ldXSkgewoJCQkJCQlteXZhbHVlLnB1c2goZmlyX2xvdERhdGFbZml0TG90RGF0YVtpXV0pOwoJCQkJCX0KCQkJCX0KCQkJCW15dE5hbWVFbGUuaW5uZXJUZXh0ID0gbXl2YWx1ZS5qb2luKCIsICIpOwoKCQkJCWpzb25EYXRhWydmaXJzdFBhZ2UnXSA9IHsKCQkJCQlmaXJzdF9wbmFtZTogbXlwcmV2aWV3RGV0YWlscy5hcHBsaWNhbnRzWzBdWydkYXRhJ10ubmFtZSwKCQkJCQlmaXJzdF90bmFtZTogbXl2YWx1ZS5qb2luKCIsICIpLAoJCQkJfQoKCQkJfQoKCQkJY29uc3QgYXBwbGljYW50cyA9IG15cHJldmlld0RldGFpbHMuYXBwbGljYW50czsKCQkJaWYgKGFwcGxpY2FudHMpIHsKCQkJCWNvbnN0IHRnRWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLm1haW4td3JhcHBlci5wYWdlX2ZpcnN0aW50cm8iKTsKCgkJCQljb25zdCBwYWdlTm8gPQoJCQkJCWFwcGxpY2FudHMubGVuZ3RoICUgMyA9PSAwCgkJCQkJCT8gYXBwbGljYW50cy5sZW5ndGggLyAzCgkJCQkJCTogTWF0aC5mbG9vcihhcHBsaWNhbnRzLmxlbmd0aCAvIDMpICsgMTsKCgkJCQlsZXQgbWFpbkRhdGEgPSAiIjsKCQkJCWZvciAoZGwgPSAwOyBkbCA8IHBhZ2VObzsgZGwrKykgewoJCQkJCWxldCBteURhdGEgPSAiIjsKCQkJCQlmb3IgKGxldCBpeCA9IGRsICogMzsgaXggPCBhcHBsaWNhbnRzLmxlbmd0aDsgaXgrKykgewoJCQkJCQljb25zdCBjaGVja2JveElkID0gaXggPT0gMCA/IGAke2FwcGxpY2FudHNbaXhdLnR5cGV9X1NhbWVfYXNfcGVybWFuZW50X2FkZHJlc3NgIDogYCR7YXBwbGljYW50c1tpeF0udHlwZX1fU2FtZV9hc19wcmltYXJ5YDsKCQkJCQkJY29uc3QgaXNDaGVja2VkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY2hlY2tib3hJZCkuY2hlY2tlZDsKCQkJCQkJaWYgKGlzQ2hlY2tlZCkgewoKCQkJCQkJCWlmIChpeCAhPSAwKSB7CgkJCQkJCQkJYXBwbGljYW50c1tpeF1bJ2RhdGEnXVsnY29ycmVzcG9uZGVuY2VfYWRkcmVzcyddID0gYXBwbGljYW50c1swXVsnZGF0YSddWydwZXJtYW5lbnRfYWRkcmVzcyddOwoJCQkJCQkJCWFwcGxpY2FudHNbaXhdWydkYXRhJ11bJ3Blcm1hbmVudF9hZGRyZXNzJ10gPSBhcHBsaWNhbnRzWzBdWydkYXRhJ11bJ3Blcm1hbmVudF9hZGRyZXNzJ107CgkJCQkJCQl9CgkJCQkJCQllbHNlIHsKCQkJCQkJCQlhcHBsaWNhbnRzW2l4XVsnZGF0YSddWydjb3JyZXNwb25kZW5jZV9hZGRyZXNzJ10gPSBhcHBsaWNhbnRzW2l4XVsnZGF0YSddWydwZXJtYW5lbnRfYWRkcmVzcyddOwoJCQkJCQkJCWFwcGxpY2FudHNbaXhdWydzYW1lQXNQcmltYXJ5J10gPSB0cnVlOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJCWVsc2UgewoJCQkJCQkJYXBwbGljYW50c1tpeF1bJ3NhbWVBc1ByaW1hcnknXSA9IGZhbHNlOwoJCQkJCQl9CgkJCQkJCW15RGF0YSA9IG15RGF0YSArIGFwY2FyZChhcHBsaWNhbnRzW2l4XSwgaXgpOwoJCQkJCX0KCQkJCQltYWluRGF0YSA9CgkJCQkJCW1haW5EYXRhICsKCQkJCQkJYDxkaXYgY2xhc3M9Im1haW4td3JhcHBlciBwYWdlX2FwY2RldGFpbHMiPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImlubmVyX3dyYXBwZXIiPgogICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icm93IGp1c3RpZnktY29udGVudC1iZXR3ZWVuIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29sIGhlYWRlci1sb2dvIGhlYWRfbG9nbzEiPiAKICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbCBoZWFkZXItbG9nbyBoZWFkX2xvZ28yIj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im1haW5fZm9ybWRldGFpbCI+JHtteURhdGF9PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJkYXRlX3dyYXBwZXIiPgogICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PmA7CgkJCQl9CgkJCQl0Z0VsZS5pbnNlcnRBZGphY2VudEhUTUwoImFmdGVyZW5kIiwgbWFpbkRhdGEpOwoKCQkJCWNvbnN0IGFueHVyZUVsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoCgkJCQkJIi5tYWluLXdyYXBwZXIucGFnZV9Bbm5leHVyZXMiCgkJCQkpOwoJCQkJbGV0IG10ZG9jbWFpbkRhdGEgPSAiIjsKCQkJCWZvciAobGV0IGl4ID0gMDsgaXggPCBhcHBsaWNhbnRzLmxlbmd0aDsgaXgrKykgewoJCQkJCWNvbnN0IG10RG9jTGVuID0gYXBwbGljYW50c1tpeF0uZG9jdW1lbnRzIHx8IFtdOwoJCQkJCWlmIChtdERvY0xlbi5sZW5ndGggPiAwKSB7CgkJCQkJCWxldCBkb2NzQXJyID0gW107CgkJCQkJCWxldCBtdGRvY0RhdGEgPSAiIjsKCQkJCQkJZm9yIChsZXQgZGwgPSAwOyBkbCA8IG10RG9jTGVuLmxlbmd0aDsgZGwrKykgewoJCQkJCQkJZG9jc0Fyci5wdXNoKHsKCQkJCQkJCQkndHlwZSc6IGAke2RsICsgMX0uICR7bXREb2NMZW5bZGxdLmxhYmVsfWAsCgkJCQkJCQkJJ3NyYyc6IGAke210RG9jTGVuW2RsXS51cmx9YCwKCQkJCQkJCQknc3VidHlwZSc6IGAke210RG9jTGVuW2RsXS5sYWJlbH1gCgkJCQkJCQl9KTsKCQkJCQkJCW10ZG9jRGF0YSA9CgkJCQkJCQkJbXRkb2NEYXRhICsKCQkJCQkJCQlgPGRpdiBjbGFzcz0iQXBwbGljYW50X2Jsb2NrIj4KICAgICAgICAgICAgICAgICAgICA8cD4ke2RsICsgMX0uICR7bXREb2NMZW5bZGxdLmxhYmVsfTwvcD4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJpbWdfYmxvY2siPgogICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9IiR7bXREb2NMZW5bZGxdLnVybH0iIGFsdD0iIj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgPC9kaXY+IGA7CgkJCQkJCX0KCgkJCQkJCWpzb25EYXRhWydhcHBsaWNhbnRzS3ljJ10ucHVzaCh7CgkJCQkJCQknYXBwVHlwZSc6IGFwcGxpY2FudE51bVthcHBsaWNhbnRzW2l4XS50eXBlXSwKCQkJCQkJCSdkb2NzJzogZG9jc0FycgoJCQkJCQl9KQoKCQkJCQkJbXRkb2NtYWluRGF0YSA9CgkJCQkJCQltdGRvY21haW5EYXRhICsKCQkJCQkJCWA8ZGl2IGNsYXNzPSJtYWluLXdyYXBwZXIgUGFnZV9reWMiPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iaW5uZXJfd3JhcHBlciI+CiAgICAgICAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InJvdyBqdXN0aWZ5LWNvbnRlbnQtYmV0d2VlbiI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29sIGhlYWRlci1sb2dvIGhlYWRfbG9nbzEiPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbCBoZWFkZXItbG9nbyBoZWFkX2xvZ28yIj4gICAKICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im1haW5fZm9ybWRldGFpbCI+CiAgICAgICAgICAgICAgICAgICAgJHtpeCA9PSAwID8gIjxoMj5VcGxvYWRlZCBLWUMgRG9jdW1lbnQ8L2gyPiIgOiAiIn0KICAgICAgICAgICAgICAgICAgICA8aDM+JHthcHBsaWNhbnROdW1bYXBwbGljYW50c1tpeF0udHlwZV19PC9oMz4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJBcHBsaWNhbnRfd3JhcHBlciI+CiAgICAgICAgICAgICAgICAgICAgICAke210ZG9jRGF0YX0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbW1vbl9mb290ZXIgc2lnbl9ibG9ja3Nfd3JhcHBlciI+IAogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgIDwvZGl2PmA7CgkJCQkJfQoJCQkJfQoJCQkJYW54dXJlRWxlLmluc2VydEFkamFjZW50SFRNTCgiYWZ0ZXJlbmQiLCBtdGRvY21haW5EYXRhKTsKCgkJCQljb25zdCBzaWduRWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiLnNpZ25fYmxvY2tzX3dyYXBwZXIiKTsKCQkJCWlmIChzaWduRWxlKSB7CgkJCQkJc2lnbkVsZS5mb3JFYWNoKChzaWVsKSA9PiB7CgkJCQkJCWxldCBkYXRhID0gIiI7CgkJCQkJCWZvciAobGV0IGlkID0gMDsgaWQgPCBhcHBsaWNhbnRzLmxlbmd0aDsgaWQrKykgewoJCQkJCQkJZGF0YSA9CgkJCQkJCQkJZGF0YSArCgkJCQkJCQkJYDxkaXYgY2xhc3M9InNpZ25fYmxvY2tfd3JhcHBlciI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InNpZ25fYmxvY2siPjwvZGl2PgogICAgICAgICAgPC9kaXY+YDsKCQkJCQkJfQoJCQkJCQlzaWVsLmlubmVySFRNTCA9IGRhdGE7CgkJCQkJfSk7CgkJCQl9CgkJCX0KCgkJCWNvbnN0IGJvb2tpbmdzcmMgPSBteXByZXZpZXdEZXRhaWxzLmJvb2tpbmdzb3VyY2U7CgoJCQlpZiAoYm9va2luZ3NyYykgewoJCQkJY29uc3QgbXlib29rc3JjID0gcHJlb2JqLmJvb2tpbmdzb3VyY2U7CgkJCQljb25zdCBib29rZXkgPSBPYmplY3Qua2V5cyhteWJvb2tzcmMpOwoJCQkJanNvbkRhdGFbJ2Jvb2tpbmdTcmMnXSA9IHt9OwoJCQkJdHJ5IHsJCQkJLy8gSGFuZGxpbmcgc3BlY2lhbCBjYXNlIGZvciBib29raW5nIHNvdXJjZSB0eXBlIHJlZmVycmFsCgkJCQkJaWYgKGJvb2tpbmdzcmNbJ2Jvb2tpbmdfc291cmNlJ10gPT0gJ1JlZmVycmFsJykgewoJCQkJCQlib29raW5nc3JjWydjaGFubmVsX3BhcnRuZXJfbW9iaWxlX25vJ10gPSBib29raW5nc3JjWydfbW9iaWxlX25vX29mX3JlZmVyZWUnXTsKCQkJCQkJYm9va2luZ3NyY1snY2hhbm5lbF9wYXJ0bmVyX25hbWUnXSA9IGJvb2tpbmdzcmNbJ25hbWVfb2ZfcmVmZXJlZSddOwoJCQkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHJfaW9fcmVyYV9ubycpLnJlbW92ZSgpOwoJCQkJCX0gZWxzZSBpZiAoYm9va2luZ3NyY1snYm9va2luZ19zb3VyY2UnXSA9PSAnRGlyZWN0JykgewoJCQkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHJfaW9fbmFtJykucmVtb3ZlKCk7CgkJCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0cl9pb19yZXJhX25vJykucmVtb3ZlKCk7CgkJCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0cl9pb19jcF9tb2JpbGUnKS5yZW1vdmUoKTsKCQkJCQl9IGVsc2UgaWYgKGJvb2tpbmdzcmNbJ2Jvb2tpbmdfc291cmNlJ10gPT0gJ0NoYW5uZWwgUGFydG5lcicpIHsKCgkJCQkJfSBlbHNlIHsKCQkJCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RyX2lvX25hbScpLnJlbW92ZSgpOwoJCQkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHJfaW9fcmVyYV9ubycpLnJlbW92ZSgpOwoJCQkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHJfaW9fY3BfbW9iaWxlJykucmVtb3ZlKCk7CgkJCQkJfQoJCQkJfSBjYXRjaCAoZXJyb3IpIHsKCgkJCQl9CgkJCQlib29rZXkuZm9yRWFjaCgoZWxldCkgPT4gewoKCQkJCQljb25zdCB0Z0VsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZXQpOwoKCQkJCQlpZiAodGdFbGUgJiYgbXlib29rc3JjW2VsZXRdKSB7CgkJCQkJCWxldCB2YWwgPSBib29raW5nc3JjWwoJCQkJCQkJbXlib29rc3JjW2VsZXRdLnRvTG93ZXJDYXNlKCkucmVwbGFjZUFsbCgiICIsICJfIikKCQkJCQkJXQoJCQkJCQkJPyBib29raW5nc3JjW215Ym9va3NyY1tlbGV0XS50b0xvd2VyQ2FzZSgpLnJlcGxhY2VBbGwoIiAiLCAiXyIpXQoJCQkJCQkJOiAiTkEiOwoJCQkJCQl0Z0VsZS5pbm5lclRleHQgPSB2YWw7CgkJCQkJCWpzb25EYXRhWydib29raW5nU3JjJ11bZWxldF0gPSB2YWw7CgkJCQkJfSBlbHNlIHsKCQkJCQkJaWYgKHRnRWxlKSB7CgkJCQkJCQl0Z0VsZS5pbm5lclRleHQgPSAiTkEiOwoJCQkJCQkJanNvbkRhdGFbJ2Jvb2tpbmdTcmMnXVtlbGV0XSA9ICJOQSI7CgoJCQkJCQl9CgkJCQkJfQoJCQkJfSk7CgkJCX0KCgkJCWNvbnN0IHVuaXRkZXRhaWxzID0gbXlwcmV2aWV3RGV0YWlscy51bml0ZGV0YWlsczsKCQkJaWYgKHVuaXRkZXRhaWxzKSB7CgkJCQljb25zdCBteXVuaXRzcmMgPSBwcmVvYmoudW5pdGRldGFpbHM7CgkJCQljb25zdCBib29rZXkgPSBPYmplY3Qua2V5cyhteXVuaXRzcmMpOwoJCQkJanNvbkRhdGFbJ3VuaXREZXRhaWxzJ10gPSB7fTsKCQkJCWJvb2tleS5mb3JFYWNoKChlbGV0KSA9PiB7CgkJCQkJY29uc3QgdGdFbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGV0KTsKCQkJCQlpZiAodGdFbGUgJiYgbXl1bml0c3JjW2VsZXRdKSB7CgoJCQkJCQlsZXQgdmFsID0gdW5pdGRldGFpbHNbCgkJCQkJCQlteXVuaXRzcmNbZWxldF0udG9Mb3dlckNhc2UoKS5yZXBsYWNlQWxsKCIgIiwgIl8iKQoJCQkJCQldCgkJCQkJCQk/IHVuaXRkZXRhaWxzW215dW5pdHNyY1tlbGV0XS50b0xvd2VyQ2FzZSgpLnJlcGxhY2VBbGwoIiAiLCAiXyIpXQoJCQkJCQkJOiAiTkEiOwoJCQkJCQl0Z0VsZS5pbm5lclRleHQgPSB2YWw7CgkJCQkJCWpzb25EYXRhWyd1bml0RGV0YWlscyddW2VsZXRdID0gdmFsOwoJCQkJCX0gZWxzZSB7CgkJCQkJCWlmICh0Z0VsZSkgewoJCQkJCQkJdGdFbGUuaW5uZXJUZXh0ID0gIk5BIjsKCQkJCQkJCWpzb25EYXRhWyd1bml0RGV0YWlscyddW2VsZXRdID0gIk5BIjsKCQkJCQkJfQoJCQkJCX0KCQkJCX0pOwoJCQl9CgoJCQlmdW5jdGlvbiBmb3JtYXREYXRlKGRhdGUpIHsKCQkJCXZhciBkID0gbmV3IERhdGUoZGF0ZSksCgkJCQkJbW9udGggPSAnJyArIChkLmdldE1vbnRoKCkgKyAxKSwKCQkJCQlkYXkgPSAnJyArIGQuZ2V0RGF0ZSgpLAoJCQkJCXllYXIgPSBkLmdldEZ1bGxZZWFyKCk7CgoJCQkJaWYgKG1vbnRoLmxlbmd0aCA8IDIpCgkJCQkJbW9udGggPSAnMCcgKyBtb250aDsKCQkJCWlmIChkYXkubGVuZ3RoIDwgMikKCQkJCQlkYXkgPSAnMCcgKyBkYXk7CgoJCQkJcmV0dXJuIFtkYXksIG1vbnRoLCB5ZWFyXS5qb2luKCctJyk7CgkJCX0KCQkJY29uc3QgYWJvdXREZXRhaWxzID0gbXlwcmV2aWV3RGV0YWlscy5hbGxhYm91dHlvdTsKCQkJaWYgKGFib3V0RGV0YWlscykgewoJCQkJY29uc3QgYWJvdXRzcmMgPSBwcmVvYmouYWxsYWJvdXR5b3U7CgkJCQljb25zdCBib29rZXkgPSBPYmplY3Qua2V5cyhhYm91dHNyYyk7CgkJCQlqc29uRGF0YVsnYWJvdXQnXSA9IHt9OwoJCQkJYWJvdXREZXRhaWxzLmRhdGVfb2ZfYmlydGggPSBmb3JtYXREYXRlKGFib3V0RGV0YWlscy5kYXRlX29mX2JpcnRoKTsKCQkJCWJvb2tleS5mb3JFYWNoKChlbGV0KSA9PiB7CgkJCQkJY29uc3QgdGdFbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGV0KTsKCQkJCQlpZiAodGdFbGUgJiYgYWJvdXRzcmNbZWxldF0pIHsKCQkJCQkJbGV0IHZhbCA9IGFib3V0RGV0YWlsc1sKCQkJCQkJCWFib3V0c3JjW2VsZXRdLnRvTG93ZXJDYXNlKCkucmVwbGFjZUFsbCgiICIsICJfIikKCQkJCQkJXQoJCQkJCQkJPyBhYm91dERldGFpbHNbYWJvdXRzcmNbZWxldF0udG9Mb3dlckNhc2UoKS5yZXBsYWNlQWxsKCIgIiwgIl8iKV0KCQkJCQkJCTogIk5BIjsKCQkJCQkJdGdFbGUuaW5uZXJUZXh0ID0gdmFsOwoJCQkJCQlqc29uRGF0YVsnYWJvdXQnXVtlbGV0XSA9IHZhbDsKCQkJCQl9IGVsc2UgewoJCQkJCQlpZiAodGdFbGUpIHsKCQkJCQkJCXRnRWxlLmlubmVyVGV4dCA9ICJOQSI7CgkJCQkJCQlqc29uRGF0YVsnYWJvdXQnXVtlbGV0XSA9ICJOQSI7CgkJCQkJCX0KCQkJCQl9CgkJCQl9KTsKCQkJfQoKCQkJY29uc3QgYmFkZXRhaWxzID0gbXlwcmV2aWV3RGV0YWlscy5ib29raW5nYW1vdW50OwoJCQlpZiAoYmFkZXRhaWxzKSB7CgkJCQljb25zdCBiYXNyYyA9IHByZW9iai5ib29raW5nYW1vdW50OwoJCQkJY29uc3QgYm9va2V5ID0gT2JqZWN0LmtleXMoYmFzcmMpOwoJCQkJanNvbkRhdGFbJ2JhRGV0YWlscyddID0ge307CgkJCQlib29rZXkuZm9yRWFjaCgoZWxldCkgPT4gewoKCQkJCQljb25zdCB0Z0VsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZXQpOwoJCQkJCWlmICh0Z0VsZSAmJiBiYXNyY1tlbGV0XSkgewoJCQkJCQlsZXQgdmFsID0gYmFkZXRhaWxzWwoJCQkJCQkJYmFzcmNbZWxldF0udG9Mb3dlckNhc2UoKS5yZXBsYWNlQWxsKCIgIiwgIl8iKQoJCQkJCQldCgkJCQkJCQk/IGJhZGV0YWlsc1tiYXNyY1tlbGV0XS50b0xvd2VyQ2FzZSgpLnJlcGxhY2VBbGwoIiAiLCAiXyIpXQoJCQkJCQkJOiAiTkEiOwoJCQkJCQl0Z0VsZS5pbm5lclRleHQgPSB2YWw7CgkJCQkJCWpzb25EYXRhWydiYURldGFpbHMnXVtlbGV0XSA9IHZhbDsKCQkJCQl9IGVsc2UgewoJCQkJCQlpZiAodGdFbGUpIHsKCQkJCQkJCXRnRWxlLmlubmVyVGV4dCA9ICJOQSI7CgkJCQkJCQlqc29uRGF0YVsnYmFEZXRhaWxzJ11bZWxldF0gPSAiTkEiOwoJCQkJCQl9CgkJCQkJfQoJCQkJfSk7CgkJCX0KCgkJCWNvbnN0IGRlY2xhcmVFbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKAoJCQkJIi5wYWdlX3NlbGZkZWNsYXJhdGlvbiAubWFpbl9mb3JtZGV0YWlsIgoJCQkpOwoKCQkJZGVjbGFyZUVsZS5pbm5lckhUTUwgPSBteXByZXZpZXdEZXRhaWxzLnNlbGZkZWNsYXJhdGlvbjsKCQl9CgoKCgoJCWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIi5kYXRlX3dyYXBwZXIiKS5mb3JFYWNoKChkYXcpID0+IHsKCQkJZGF3LmlubmVySFRNTCA9IGA8cD48c3Ryb25nPkRhdGU6PC9zdHJvbmc+ICR7bmV3IERhdGUoKS5nZXREYXRlKCl9LiR7bmV3IERhdGUoKS5nZXRNb250aCgpICsgMQoJCQkJfS4ke25ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKX08L3A+YDsKCQl9KTsKCgoJCWxldCBudW1CbmsgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZSgiZmllbGRfMDc2MnozdCIpLmxlbmd0aAoJCWlmIChudW1CbmsgPiAwKSB7CgoJCQlmb3IgKGxldCBpID0gMTsgaSA8PSBudW1Cbms7IGkrKykgewoKCQkJCS8vIENoZWNrIGlmIGF0IGxlYXN0IG9uZSBpbnB1dCBleGlzdHMKCQkJCWlmICghZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYEZpZWxkXzBqcHlidWctJHtpfWApKSB7CgkJCQkJYnJlYWs7CgkJCQl9CgkJCQlpZiAoanNvbkRhdGFbJ3BheW1lbnRTb3VyY2VzJ10ubGVuZ3RoID09IG51bUJuaykgewoJCQkJCWpzb25EYXRhWydwYXltZW50U291cmNlcyddW2kgLSAxXVsnQW1vdW50X19jJ10gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgRmllbGRfMGpweWJ1Zy0ke2l9YCkudmFsdWU7CgkJCQkJanNvbkRhdGFbJ3BheW1lbnRTb3VyY2VzJ11baSAtIDFdWydCYW5rX05hbWVfX2MnXSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBGaWVsZF8wbDk4cG43LSR7aX1gKS52YWx1ZTsKCQkJCQlqc29uRGF0YVsncGF5bWVudFNvdXJjZXMnXVtpIC0gMV1bJ01vZGVfT2ZfUGF5bWVudF9fYyddID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYHBheW1lbnRfc291cmNlXyR7aX1gKS52YWx1ZTsKCQkJCQlqc29uRGF0YVsncGF5bWVudFNvdXJjZXMnXVtpIC0gMV1bJ0RhdGVfb2ZfcGF5bWVudF9fYyddID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYEZpZWxkXzFiMGlmcGxkYXRlX2NoZWNrLSR7aX1gKS52YWx1ZTsKCQkJCX0gZWxzZSB7CgkJCQkJaWYgKGpzb25EYXRhWydwYXltZW50U291cmNlcyddLmxlbmd0aCAhPSBpIC0gMSkgewoJCQkJCQlqc29uRGF0YVsncGF5bWVudFNvdXJjZXMnXVtpIC0gMV1bJ0Ftb3VudF9fYyddID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYEZpZWxkXzBqcHlidWctJHtpfWApLnZhbHVlOwoJCQkJCQlqc29uRGF0YVsncGF5bWVudFNvdXJjZXMnXVtpIC0gMV1bJ0JhbmtfTmFtZV9fYyddID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYEZpZWxkXzBsOThwbjctJHtpfWApLnZhbHVlOwoJCQkJCQlqc29uRGF0YVsncGF5bWVudFNvdXJjZXMnXVtpIC0gMV1bJ01vZGVfT2ZfUGF5bWVudF9fYyddID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYHBheW1lbnRfc291cmNlXyR7aX1gKS52YWx1ZTsKCQkJCQkJanNvbkRhdGFbJ3BheW1lbnRTb3VyY2VzJ11baSAtIDFdWydEYXRlX29mX3BheW1lbnRfX2MnXSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBGaWVsZF8xYjBpZnBsZGF0ZV9jaGVjay0ke2l9YCkudmFsdWU7CgkJCQkJfSBlbHNlIHsKCQkJCQkJanNvbkRhdGFbJ3BheW1lbnRTb3VyY2VzJ10ucHVzaCh7CgkJCQkJCQkiQW1vdW50X19jIjogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYEZpZWxkXzBqcHlidWctJHtpfWApLnZhbHVlLAoJCQkJCQkJIkJhbmtfTmFtZV9fYyI6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBGaWVsZF8wbDk4cG43LSR7aX1gKS52YWx1ZSwKCQkJCQkJCSJNb2RlX09mX1BheW1lbnRfX2MiOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgcGF5bWVudF9zb3VyY2VfJHtpfWApLnZhbHVlLAoJCQkJCQkJIkRhdGVfb2ZfcGF5bWVudF9fYyI6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBGaWVsZF8xYjBpZnBsZGF0ZV9jaGVjay0ke2l9YCkudmFsdWUsCgkJCQkJCQkiaW1hZ2VTcmMiOiAiIiwKCQkJCQkJCSJyb3dJZCI6IGkKCQkJCQkJfSkKCQkJCQl9CgkJCQl9CgoKCQkJfQoKCQl9CgoKCQl2YXIgSFRNTF9XaWR0aCA9ICQoIi5tYWluLXdyYXBwZXIiKS53aWR0aCgpOwoJCXZhciBIVE1MX0hlaWdodCA9ICQoIi5tYWluLXdyYXBwZXIiKS5oZWlnaHQoKTsKCQl2YXIgUERGX1dpZHRoID0gODAyOwoJCXZhciBQREZfSGVpZ2h0ID0gMTE1MTsKCQl2YXIgY2FudmFzX2ltYWdlX3dpZHRoID0gSFRNTF9XaWR0aDsKCQl2YXIgY2FudmFzX2ltYWdlX2hlaWdodCA9IEhUTUxfSGVpZ2h0OwoKCQl2YXIgbXlwZkZpbGUgPSBbXTsKCQljb25zdCBteUVsZXMgPSAkKCIubWFpbi13cmFwcGVyIikubm90KCIuaGlkZGVuIik7CgkJbGV0IHRleHRQYXlsb2FkID0gJyc7CgoKCQkvLyBmb3IgKGxldCBpZ3QgPSAwOyBpZ3QgPCBteUVsZXMubGVuZ3RoOyBpZ3QrKykgewoJCS8vIAl0ZXh0UGF5bG9hZCArPSBteUVsZXNbaWd0XS5pbm5lckhUTUw7CgkJLy8gCS8vIGxldCBjYW52YXMgPSBuZXcgUHJvbWlzZSgocmVzbywgcmVqZSkgPT4gewoKCQkvLyAJLy8gCS8vIGNvbnNvbGUubG9nKG15RWxlc1tpZ3RdKTsKCgkJLy8gCS8vIAkvLyBVc2UgeyBhbGxvd1RhaW50OiB0cnVlLCBzY2FsZTogdHJ1ZSB9IHRvIHJlZHVjZSBwZGYgc2l6ZQoJCS8vIAkvLyAJaHRtbDJjYW52YXMobXlFbGVzW2lndF0sIHsgYWxsb3dUYWludDogdHJ1ZSB9KS50aGVuKGFzeW5jIGZ1bmN0aW9uICgKCQkvLyAJLy8gCQljYW52YXMKCQkvLyAJLy8gCSkgewoJCS8vIAkvLyAJCWNhbnZhcy5nZXRDb250ZXh0KCIyZCIpOwoJCS8vIAkvLyAJCWxldCBpbWdEYXRhID0gY2FudmFzLnRvRGF0YVVSTCgiaW1hZ2UvanBlZyIsIDAuNzUpOwoKCQkvLyAJLy8gCQlsZXQgcGRmID0gbmV3IGpzUERGKCJwIiwgInB0IiwgW1BERl9XaWR0aCwgUERGX0hlaWdodF0pOwoJCS8vIAkvLyAJCXBkZi5hZGRJbWFnZSgKCQkvLyAJLy8gCQkJaW1nRGF0YSwKCQkvLyAJLy8gCQkJIkpQRyIsCgkJLy8gCS8vIAkJCTAsCgkJLy8gCS8vIAkJCTAsCgkJLy8gCS8vIAkJCWNhbnZhc19pbWFnZV93aWR0aCwKCQkvLyAJLy8gCQkJY2FudmFzX2ltYWdlX2hlaWdodCwKCQkvLyAJLy8gCQkpOwoKCQkvLyAJLy8gCQljb25zdCBGaWxlUERGID0gbmV3IEZpbGUoCgkJLy8gCS8vIAkJCVtwZGYub3V0cHV0KCJibG9iIildLAoJCS8vIAkvLyAJCQlgbXlwZGYke2lndCArIDF9LnBkZmAsCgkJLy8gCS8vIAkJCXsKCQkvLyAJLy8gCQkJCXR5cGU6ICJhcHBsaWNhdGlvbi9wZGYiLAoJCS8vIAkvLyAJCQl9CgkJLy8gCS8vIAkJKTsKCgkJLy8gCS8vIAkJcmVzbyhGaWxlUERGKTsKCQkvLyAJLy8gCX0pOwoJCS8vIAkvLyB9KTsKCQkvLyAJLy8gbXlwZkZpbGUucHVzaChjYW52YXMpOwoJCS8vIH0KCQkvLyB2YXIgZ2VuZXJhdGVkUGRmRmlsZU5hbWUgPSAnJzsKCgkJLy8gZnVuY3Rpb24gZ2VuZXJhdGVQZGYoKSB7CgkJLy8gCWNvbnN0IHJlcXVlc3RPcHRpb25zID0gewoJCS8vIAkJbWV0aG9kOiAnUE9TVCcsCgkJLy8gCQloZWFkZXJzOgoJCS8vIAkJCXsgJ2NvbnRlbnQtdHlwZSc6ICd0ZXh0L3BsYWluJyB9LAoKCQkvLyAJCWJvZHk6IHRleHRQYXlsb2FkCgkJLy8gCX07CgkJLy8gCWZldGNoKG5vZGVqc3BkZmFwaWxpbmssIHJlcXVlc3RPcHRpb25zKS50aGVuKChyZXNwKSA9PiB7CgkJLy8gCQlyZXR1cm4gcmVzcC5qc29uKCk7CgkJLy8gCX0pLnRoZW4oCgkJLy8gCQkocmVzKSA9PiB7CgkJLy8gCQkJZ2VuZXJhdGVkUGRmRmlsZU5hbWUgPSByZXNbJ2ZpbGVOYW1lJ107CgkJLy8gCQkJaWYoZ2VuZXJhdGVkUGRmRmlsZU5hbWU9PScnKXsKCQkvLyAJCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRlcicpLmNsYXNzTGlzdC5hZGQoJ2hpZGVMb2FkZXInKTsKCQkvLyAJCQkJYWxlcnQoYFBERiBmaWxlIGNvdWxkbid0IGJlIGdlbmVyYXRlZC5gKTsKCQkvLyAJCQl9CgkJLy8gCQkJZWxzZXsKCQkvLyAJCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dlbmVyYXRlZGZvcm1QREYnKS52YWx1ZSA9IGdlbmVyYXRlZFBkZkZpbGVOYW1lOwoJCS8vIAkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZm9ybSIpLnN1Ym1pdCgpOwoJCS8vIAkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZGVyJykuY2xhc3NMaXN0LmFkZCgnaGlkZUxvYWRlcicpOwoKCQkvLyAJCQl9CgkJLy8gCQl9KS5jYXRjaChlcnIgPT4gewoJCS8vIAkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkZXInKS5jbGFzc0xpc3QuYWRkKCdoaWRlTG9hZGVyJyk7CgkJLy8gCQl9KQoJCS8vIH0KCgkJLy8gZ2VuZXJhdGVQZGYoKQoKCQljb25zdCBnZXRGaWVsZFZhbHVlQnlJZCA9IChpZCkgPT4gewoJCQlpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aWR9YCkpIHsKCQkJCXJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjJHtpZH1gKS52YWx1ZTsKCQkJfSBlbHNlIHsKCQkJCXJldHVybiAnJzsKCQkJfQoJCX0KCgkJY29uc3Qga2V5X3ZhbF9tYXAgPSB7CgkJCXBhc3Nwb3J0OiAnUGFzc3BvcnQnLAoJCQlyZWxXaXRoUHJpbWFyeUFwcGxpY2FudDogJ1JlbGF0aW9uU2hpcCcKCQl9CgkJCgkJanNvbkRhdGEuYXBwbGljYW50cy5mb3JFYWNoKChhcHBsaWNhbnQsIGkpID0+IHsKCQkJZm9yIChsZXQga2V5IG9mIE9iamVjdC5rZXlzKGtleV92YWxfbWFwKSkgewoJCQkJYXBwbGljYW50W2tleV0gPSBnZXRGaWVsZFZhbHVlQnlJZChgQSR7aSsxfV8ke2tleV92YWxfbWFwW2tleV19YCk7CgkJCX0KCQkJaWYoaT09MCl7CgkJCQlhcHBsaWNhbnRbJ3JlbFdpdGhQcmltYXJ5QXBwbGljYW50J10gPSAnRG9ub3RJbmNsdWRlJzsKCQkJfQoJCX0pOwoJCWpzb25EYXRhWyd1c2VyQWdlbnQnXSA9IG5hdmlnYXRvci51c2VyQWdlbnQ7CgkJLy8gU3RvcmUgcGF5bG9hZCBpbiB0ZXh0YXJlYQoJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwZGZDb250ZW50JykudGV4dENvbnRlbnQgPSBKU09OLnN0cmluZ2lmeShqc29uRGF0YSk7CgkJbGV0IGZpbGVJbnB1dHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPSJmaWxlIl0nKTsKCQlmb3IgKGxldCBmaWxlIG9mIGZpbGVJbnB1dHMpIHsKCQkJZmlsZS52YWx1ZSA9ICcnOwoJCX0KCQkKCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZm9ybSIpLnN1Ym1pdCgpOwoKCX0pLmNhdGNoKChlcnIpID0+IHsKCQljb25zb2xlLmxvZyhlcnIpOwoJfSk7CgoJcmV0dXJuIG15cHJvbWlzZTsKfQoKCmZ1bmN0aW9uIGFwY2FyZChkYXRhLCBpeCkgewoJY29uc3QgbXlkYXRhID0gZGF0YS5kYXRhOwoJanNvbkRhdGFbJ2FwcGxpY2FudHMnXS5wdXNoKHsKCQl0eXBlOiBhcHBsaWNhbnROdW1bZGF0YS50eXBlXSwKCQlpbWFnZVNyYzogZGF0YS51c2VyLAoJCXBhbk51bWJlcjogbXlkYXRhLnBhbl9udW1iZXIKCQkJPyBteWRhdGEucGFuX251bWJlcgoJCQk6ICJOQSIsCgkJcGFuVmFsaWRhdGVkOiBteWRhdGEucGFuX251bWJlciA/ICJjaGVjayIgOiAieE1hcmsiLAoJCWFhZGhhck51bWJlcjogbXlkYXRhLmFkZGhhcl9udW1iZXIKCQkJPyBteWRhdGEuYWRkaGFyX251bWJlcgoJCQk6ICJOQSIsCgkJbmFtZTogbXlkYXRhLm5hbWUgPyBteWRhdGEubmFtZSA6ICJOQSIsCgkJcGhvbmU6IG15ZGF0YS5waG9uZSA/IG15ZGF0YS5waG9uZSA6ICJOQSIsCgkJZW1haWw6IG15ZGF0YS5lbWFpbCA/IG15ZGF0YS5lbWFpbCA6ICJOQSIsCgkJcGVybUFkZDogbXlkYXRhLnBlcm1hbmVudF9hZGRyZXNzCgkJCT8gbXlkYXRhLnBlcm1hbmVudF9hZGRyZXNzCgkJCTogIk5BIiwKCQljb3JzcEFkZDogZGF0YS5zYW1lQXNQcmltYXJ5CgkJCT8gbXlkYXRhLnBlcm1hbmVudF9hZGRyZXNzCgkJCTogbXlkYXRhLmNvcnJlc3BvbmRlbmNlX2FkZHJlc3MsCgl9KQoJY29uc3QgbXlIdG1sID0gYDxkaXYgY2xhc3M9ImFwcGxpY2FudC1jYXJkLXdyYXBwZXIiPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFwcGxpY2FudC1kZXRhaWwtd3JhcHBlciI+CiAgICAgICAgICAgICAgICAgICAgPGgzPiR7YXBwbGljYW50TnVtW2RhdGEudHlwZV19PC9oMz4KICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFwcGxpY2FudC1jYXJkIj4KICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJhcHBsaWNhbnQtaW1nIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9IiR7ZGF0YS51c2VyCgkJfSIgY2xhc3M9ImltZy1mbHVpZCIgYWx0PSJ1c2VyIiAvPgogICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFwcGxpY2FudC1zaWciPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFwcGxpY2FudC1pbmZvIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPSR7bXlkYXRhLnBhbl9udW1iZXIgPyAiY2hlY2siIDogInhNYXJrIn0+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlBBTjo8L2xhYmVsPjxwPiR7bXlkYXRhLnBhbl9udW1iZXIKCQkJPyBteWRhdGEucGFuX251bWJlcgoJCQk6ICJOQSIKCQl9PC9wPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaSBjbGFzcz0iY2hlY2siPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5BQURIQVI6PC9sYWJlbD48cD4ke215ZGF0YS5hZGRoYXJfbnVtYmVyCgkJCT8gbXlkYXRhLmFkZGhhcl9udW1iZXIKCQkJOiAiTkEiCgkJfTwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFwcGxpY2FudC1kZXRhaWwiPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxoMz4ke2FwcGxpY2FudE51bVtkYXRhLnR5cGVdfTwvaDM+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPHVsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3M9ImFwcGxpY2FudC1saXN0Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5OYW1lPC9sYWJlbD48cD4ke215ZGF0YS5uYW1lID8gbXlkYXRhLm5hbWUgOiAiTkEiCgkJfTwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPSJhcHBsaWNhbnQtbGlzdCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+UGhvbmU8L2xhYmVsPjxwPiR7bXlkYXRhLnBob25lID8gbXlkYXRhLnBob25lIDogIk5BIgoJCX08L3A+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaSBjbGFzcz0iYXBwbGljYW50LWxpc3QiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPkVtYWlsPC9sYWJlbD48cD4ke215ZGF0YS5lbWFpbCA/IG15ZGF0YS5lbWFpbCA6ICJOQSIKCQl9PC9wPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3M9ImFwcGxpY2FudC1saXN0Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5QZXJtYW5lbnQgQWRkcmVzczwvbGFiZWw+PHA+JHtteWRhdGEucGVybWFuZW50X2FkZHJlc3MKCQkJPyBteWRhdGEucGVybWFuZW50X2FkZHJlc3MKCQkJOiAiTkEiCgkJfTwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtpeCA9PSAwCgkJCT8gYDxsaSBjbGFzcz0iYXBwbGljYW50LWxpc3QiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPkNvcnJlc3BvbmRhbmNlIEFkZHJlc3M8L2xhYmVsPjxwPiR7ZGF0YS5zYW1lQXNQcmltYXJ5CgkJCQk/IG15ZGF0YS5wZXJtYW5lbnRfYWRkcmVzcwoJCQkJOiBteWRhdGEuY29ycmVzcG9uZGVuY2VfYWRkcmVzcwoJCQl9PC9wPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPmAKCQkJOiAiIgoJCX0KICAgICAgICAgICAgICAgICAgICAgICAgICA8L3VsPgogICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+YDsKCgoJcmV0dXJuIG15SHRtbDsKfQoKZnVuY3Rpb24gbXlFc2lnbkZ1bmN0aW9uKCkgewoJc2JtaXREYXRhKHRydWUpOwoKCXNpZ25Nb2RhbC5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsKCWNvbnN0IG1haW5fY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgltYWluX2NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCJlc2lnbl9tYWluY29udGFpbmVyIik7CgoJY29uc3QgZGF0YSA9IGNyZWF0ZUVzaWduRGF0YSgpOwoJZGF0YS5mb3JFYWNoKChhcCwgaSkgPT4gewoJCWNvbnN0IGFwbGNfcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgkJYXBsY19yb3cuY2xhc3NMaXN0LmFkZCgiYXBsY19yb3djb250YWluZXIiKTsKCgkJbWFpbl9jb250YWluZXIuYXBwZW5kQ2hpbGQoYXBsY19yb3cpOwoKCQljb25zdCBhcGxjX3Jvd3NwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIik7CgkJYXBsY19yb3dzcGFuLmlubmVySFRNTCA9IGkgKyAxOwoJCWFwbGNfcm93LmFwcGVuZENoaWxkKGFwbGNfcm93c3Bhbik7CgoJCWNvbnN0IGFwbGNfcm93cHJhZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInAiKTsKCQlhcGxjX3Jvd3ByYWcuaW5uZXJIVE1MID0gYXAudmFsdWU7CgoJCWFwbGNfcm93LmFwcGVuZENoaWxkKGFwbGNfcm93cHJhZyk7CgoJCWNvbnN0IGlucHV0Q3RuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgkJaW5wdXRDdG4uY2xhc3NMaXN0LmFkZCgiaW5wdXRDdG4iKTsKCQljb25zdCBzZWxlY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzZWxlY3QiKTsKCQlzZWxlY3Quc2V0QXR0cmlidXRlKCJpZCIsIGBBJHtpICsgMX1fJHthcC50eXBlfV9TaWduYXR1cmVfUHJvY2Vzc2ApOwoJCXNlbGVjdC5zZXRBdHRyaWJ1dGUoIm5hbWUiLCBgQSR7aSArIDF9XyR7YXAudHlwZX1fU2lnbmF0dXJlX1Byb2Nlc3NgKTsKCgkJZm9yIChjb25zdCBvcHRpb25WYWwgb2Ygc2lnbmluZ09wdGlvbikgewoJCQljb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJvcHRpb24iKTsKCQkJb3B0aW9uLnNldEF0dHJpYnV0ZSgidmFsdWUiLCBvcHRpb25WYWwudmFsdWUpOwoJCQlvcHRpb24uaW5uZXJUZXh0ID0gb3B0aW9uVmFsLmxhYmVsOwoJCQlzZWxlY3QuYXBwZW5kKG9wdGlvbik7CgkJfQoKCQlpbnB1dEN0bi5hcHBlbmQoc2VsZWN0KTsKCQlhcGxjX3Jvdy5hcHBlbmRDaGlsZChpbnB1dEN0bik7CgoJCW1haW5fY29udGFpbmVyLmFwcGVuZENoaWxkKGFwbGNfcm93KTsKCX0pOwoKCWNvbnN0IG1vZGVsQ29udGVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzaWduSWRDb250ZW50Iik7Cgltb2RlbENvbnRlbnQuaW5uZXJIVE1MID0gIiI7Cgltb2RlbENvbnRlbnQuYXBwZW5kQ2hpbGQobWFpbl9jb250YWluZXIpOwp9Cgo=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPBody>
        <TcpPackets>
          <PacketInfo time="519315859" offset="0" length="336" />
          <PacketInfo time="519315859" offset="336" length="180665" />
        </TcpPackets>
      </HTTPResponse>
    </HTTPTask>
    <HTTPTask id="366" hostname="dev.bluealgo.com" path="https://dev.bluealgo.com/smartformup/ui/script.js" url="https://dev.bluealgo.com/smartformup/ui/script.js" ip="144.126.253.3" port="443" connectionId="29" origin="HTML" frame="1" startDateTime="2024-02-15T10:57:48.173+05:30" startTime="519316046" endTime="519316046">
      <HTTPRequest method="GET">
        <HTTPHeaders>
          <HTTPHeaderEntity name="sec-ch-ua" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ik5vdCBBKEJyYW5kIjt2PSI5OSIsICJHb29nbGUgQ2hyb21lIjt2PSIxMjEiLCAiQ2hyb21pdW0iO3Y9IjEyMSI=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="sec-ch-ua-mobile" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>PzA=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="User-Agent" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEyMS4wLjAuMCBTYWZhcmkvNTM3LjM2</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="sec-ch-ua-platform" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>IldpbmRvd3Mi</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ki8q</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Sec-Fetch-Site" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>c2FtZS1vcmlnaW4=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Sec-Fetch-Mode" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bm8tY29ycw==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Sec-Fetch-Dest" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>c2NyaXB0</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Referer" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cHM6Ly9kZXYuYmx1ZWFsZ28uY29tL3NtYXJ0Zm9ybXVwL2xvYWRpbmRleD9vcHBvcnR1bml0eUlkPTAwNjBvMDAwMDFlU0lKMEFBTyZjdXN0b21lcmlkPWN1c3QxMDA1JmFjY2Vzc3Rva2VuPXVYQ3haUktVLU1mMndpVGczX0E4ZFB1OTU3dGFMWHhQ</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Encoding" index="9">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Language" index="10">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZW4tVVMsZW47cT0wLjk=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Cookie" index="11">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SlNFU1NJT05JRD0zRDVFOEZFODBBNEYzNEY5QkM0OEI2RTc0ODhCOEY5MQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Host" index="12">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZGV2LmJsdWVhbGdvLmNvbQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0VUIGh0dHBzOi8vZGV2LmJsdWVhbGdvLmNvbS9zbWFydGZvcm11cC91aS9zY3JpcHQuanMgSFRUUC8xLjENCnNlYy1jaC11YTogIk5vdCBBKEJyYW5kIjt2PSI5OSIsICJHb29nbGUgQ2hyb21lIjt2PSIxMjEiLCAiQ2hyb21pdW0iO3Y9IjEyMSINCnNlYy1jaC11YS1tb2JpbGU6ID8wDQpVc2VyLUFnZW50OiBNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvMTIxLjAuMC4wIFNhZmFyaS81MzcuMzYNCnNlYy1jaC11YS1wbGF0Zm9ybTogIldpbmRvd3MiDQpBY2NlcHQ6ICovKg0KU2VjLUZldGNoLVNpdGU6IHNhbWUtb3JpZ2luDQpTZWMtRmV0Y2gtTW9kZTogbm8tY29ycw0KU2VjLUZldGNoLURlc3Q6IHNjcmlwdA0KUmVmZXJlcjogaHR0cHM6Ly9kZXYuYmx1ZWFsZ28uY29tL3NtYXJ0Zm9ybXVwL2xvYWRpbmRleD9vcHBvcnR1bml0eUlkPTAwNjBvMDAwMDFlU0lKMEFBTyZjdXN0b21lcmlkPWN1c3QxMDA1JmFjY2Vzc3Rva2VuPXVYQ3haUktVLU1mMndpVGczX0E4ZFB1OTU3dGFMWHhQDQpBY2NlcHQtRW5jb2Rpbmc6IGd6aXAsIGRlZmxhdGUNCkFjY2VwdC1MYW5ndWFnZTogZW4tVVMsZW47cT0wLjkNCkNvb2tpZTogSlNFU1NJT05JRD0zRDVFOEZFODBBNEYzNEY5QkM0OEI2RTc0ODhCOEY5MQ0KSG9zdDogZGV2LmJsdWVhbGdvLmNvbQ0KDQo=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
          <HTTPCookies>
            <HTTPHeaderEntity name="JSESSIONID" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>M0Q1RThGRTgwQTRGMzRGOUJDNDhCNkU3NDg4QjhGOTE=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
          </HTTPCookies>
        </HTTPHeaders>
      </HTTPRequest>
      <HTTPResponse>
        <contentLenght>29516</contentLenght>
        <HTTPHeaders>
          <HTTPHeaderEntity name="Date" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VGh1LCAxNSBGZWIgMjAyNCAwNToxODo1MiBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Type" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>YXBwbGljYXRpb24vamF2YXNjcmlwdA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Length" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Mjk1MTY=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Connection" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Access-Control-Allow-Origin" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Kg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Ranges" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ynl0ZXM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="ETag" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Vy8iMjk1MTYtMTcwNTI2NDUyNDAwMCI=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Last-Modified" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>U3VuLCAxNCBKYW4gMjAyNCAyMDozNToyNCBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Strict-Transport-Security" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bWF4LWFnZT0xNTcyNDgwMDsgaW5jbHVkZVN1YkRvbWFpbnM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SFRUUC8xLjEgMjAwIA0KRGF0ZTogVGh1LCAxNSBGZWIgMjAyNCAwNToxODo1MiBHTVQNCkNvbnRlbnQtVHlwZTogYXBwbGljYXRpb24vamF2YXNjcmlwdA0KQ29udGVudC1MZW5ndGg6IDI5NTE2DQpDb25uZWN0aW9uOiBrZWVwLWFsaXZlDQpBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW46ICoNCkFjY2VwdC1SYW5nZXM6IGJ5dGVzDQpFVGFnOiBXLyIyOTUxNi0xNzA1MjY0NTI0MDAwIg0KTGFzdC1Nb2RpZmllZDogU3VuLCAxNCBKYW4gMjAyNCAyMDozNToyNCBHTVQNClN0cmljdC1UcmFuc3BvcnQtU2VjdXJpdHk6IG1heC1hZ2U9MTU3MjQ4MDA7IGluY2x1ZGVTdWJEb21haW5zDQoNCg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPBody>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>KGZ1bmN0aW9uKCkgewoJcmVuZGVyQWxsKCkKCQkudGhlbigocmVzKSA9PiB7CgkJCWlmIChyZXMpIHsKCQkJCWNvbnN0IFBBR0VfQ09VTlQgPSByZXM7CgoJCQkJdmFyIHNpZ25hdHVyZVBhZHMgPSB7fTsKCgkJCQlkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJpbnB1dFtudW1MZW5ndGhdIikuZm9yRWFjaCgoZWwpID0+IHsKCQkJCQlhbGVydCgnZXhlY3V0aW5nJyk7CgkJCQkJY29uc3QgbnVtTGVuZ3RoID0gZWwuZ2V0QXR0cmlidXRlKCJudW1MZW5ndGgiKTsKCQkJCQllbC5zZXRBdHRyaWJ1dGUoCgkJCQkJCSJvbmludmFsaWQiLAoJCQkJCQlgdGhpcy5zZXRDdXN0b21WYWxpZGl0eSgnRW50ZXIgYSAke251bUxlbmd0aH0gZGlnaXQgbnVtYmVyJyk7YAoJCQkJCSk7CgkJCQkJZWwuc2V0QXR0cmlidXRlKCJvbmlucHV0IiwgInRoaXMuc2V0Q3VzdG9tVmFsaWRpdHkoJycpOyIpOwoJCQkJCWVsLnNldEF0dHJpYnV0ZSgib252YWxpZCIsICJ0aGlzLnNldEN1c3RvbVZhbGlkaXR5KCcnKTsiKTsKCQkJCQllbC5zZXRBdHRyaWJ1dGUoIm9uY2hhbmdlIiwgInRoaXMuc2V0Q3VzdG9tVmFsaWRpdHkoJycpOyIpOwoKCQkJCQllbC5zZXRBdHRyaWJ1dGUoIm1pbiIsICIxIiArICIwIi5yZXBlYXQobnVtTGVuZ3RoIC0gMSkpOwoJCQkJCWVsLnNldEF0dHJpYnV0ZSgibWF4IiwgIjkiLnJlcGVhdChudW1MZW5ndGgpKTsKCQkJCX0pOwoKCQkJCWxldCBjdXJyZW50UGFnZSA9IDE7CgkJCQlsZXQgY3VycmVudFN1YlBhZ2UgPSAxOwoJCQkJbGV0IGlkcGNvdW50ID0gMDsKCQkJCWxldCBjdXJyZW50SWRuU3ViUGFnZSA9IDE7CgkJCQlsZXQgaWRwaWRjb3VudCA9IDA7CgkJCQljb25zdCBmb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImZvcm0iKTsKCgkJCQljb25zdCBwcmV2QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInByZXYtYnRuIik7CgkJCQljb25zdCBzYXZlQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInNhdmUtYnRuIik7CgkJCQljb25zdCBlc2lnbkJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzaWduLWJ1dHRvbiIpOwoJCQkJY29uc3QgbW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibXlNb2RhbCIpOwoJCQkJY29uc3Qgc2lnbk1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInNpZ25Nb2RhbCIpOwoJCQkJY29uc3QgY2xvc2VCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCIjbXlNb2RhbCAuY2xvc2UiKVswXTsKCQkJCWNvbnN0IGNsb3NlQnRuU2lnbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIiNzaWduTW9kYWwgLmNsb3NlIilbMF07CgkJCQljb25zdCBlc25CdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZXNpZ24tc2F2ZSIpOwoJCQkJY29uc3QgcHJldmlld2J0bmdyZWVuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInByZXZpZXctYnRuIik7CgkJCQljb25zdCBwcmV3ZXNuQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImluZGl2aWR1YWwtc2lnbi1idXR0b24iKTsKCQkJCWNvbnN0IHByZXZpZXdmYUljb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicHJldmlldy1idG4taWNvbiIpOwoKCgoJCQkJcHJld2VzbkJ0bi5vbmNsaWNrID0gZnVuY3Rpb24oKSB7CgkJCQkJbW9kYWwuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKCQkJCQlteUVzaWduRnVuY3Rpb24oKQoJCQkJfTsKCgkJCQlwcmV2QnRuLm9uY2xpY2sgPSAoZSkgPT4gewoJCQkJCWUucHJldmVudERlZmF1bHQoKTsKCQkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZm9ybS1idG4iKS5pbm5lclRleHQgPSAiTmV4dCI7CgkJCQkJLy9wcmV2aWV3ZmFJY29uLmNsYXNzTGlzdC5hZGQoImhpZGRlbiIpOwoJCQkJCWVzaWduQnRuLmNsYXNzTGlzdC5hZGQoImhpZGRlbiIpOwoKCQkJCQkvLyBoYXJkZWRkIHZhbHVlIGZvciBza2lwIHBhZmUgc2VsZiBkZXNjYXJ0aW9uIGZvcgoJCQkJCWNvbnN0IHByb05hbWUgPSBzY2hlbWFbImZpcnN0LXBhZ2UiXVsicHJvamVjdE5hbWUiXTsKCQkJCQlpZiAoY3VycmVudFBhZ2UgPT0gOSAmJiBwcm9OYW1lID09ICJSYWludHJlZSBCb3VsZXZhcmQiKSB7CgkJCQkJCWNsb3NlUGFnZShjdXJyZW50UGFnZSk7CgkJCQkJCWN1cnJlbnRQYWdlID0gODsKCQkJCQkJcmVuZGVyUGFnZShjdXJyZW50UGFnZSk7CgkJCQkJfQoKCQkJCQkvLyBpZiAoY3VycmVudFBhZ2UgLSAxID09PSAyKSB7CgkJCQkJaWYgKGN1cnJlbnRQYWdlIC0gMSA9PT0gMykgewoJCQkJCQljbG9zZVBhZ2UoY3VycmVudFBhZ2UpOwoJCQkJCQljdXJyZW50UGFnZS0tOwoJCQkJCQlyZW5kZXJQYWdlKGN1cnJlbnRQYWdlKTsKCQkJCQkJY2xvc2VTdWJQYWdlKGN1cnJlbnRQYWdlLCBjdXJyZW50U3ViUGFnZSwgaWRwY291bnQpOwoJCQkJCQkvLyB9IGVsc2UgaWYgKGN1cnJlbnRQYWdlID09PSAyKSB7CgkJCQkJfSBlbHNlIGlmIChjdXJyZW50UGFnZSA9PT0gMykgewoJCQkJCQlpZiAoY3VycmVudFN1YlBhZ2UgLSAxID49IDEpIHsKCQkJCQkJCWN1cnJlbnRTdWJQYWdlLS07CgkJCQkJCQl3aW5kb3cuc2Nyb2xsVG8oeyB0b3A6IDAsIGJlaGF2aW9yOiAic21vb3RoIiB9KTsKCQkJCQkJCWNsb3NlU3ViUGFnZShjdXJyZW50UGFnZSwgY3VycmVudFN1YlBhZ2UsIGlkcGNvdW50KTsKCQkJCQkJfSBlbHNlIHsKCQkJCQkJCWNsb3NlUGFnZShjdXJyZW50UGFnZSk7CgkJCQkJCQljdXJyZW50UGFnZS0tOwoJCQkJCQkJcmVuZGVyUGFnZShjdXJyZW50UGFnZSk7CgkJCQkJCX0KCQkJCQkJLy8gfSBlbHNlIGlmIChjdXJyZW50UGFnZSAtIDEgPT09IDQpIHsKCQkJCQl9IGVsc2UgaWYgKGN1cnJlbnRQYWdlIC0gMSA9PT0gMikgewoJCQkJCQljbG9zZVBhZ2UoY3VycmVudFBhZ2UpOwoJCQkJCQljdXJyZW50UGFnZS0tOwoJCQkJCQlyZW5kZXJQYWdlKGN1cnJlbnRQYWdlKTsKCQkJCQkJY2xvc2VTdWJQYWdlKGN1cnJlbnRQYWdlLCBjdXJyZW50SWRuU3ViUGFnZSwgaWRwaWRjb3VudCk7CgkJCQkJCS8vIH0gZWxzZSBpZiAoY3VycmVudFBhZ2UgPT09IDQpIHsKCQkJCQl9IGVsc2UgaWYgKGN1cnJlbnRQYWdlID09PSAyKSB7CgkJCQkJCWlmIChjdXJyZW50SWRuU3ViUGFnZSAtIDEgPj0gMSkgewoJCQkJCQkJY3VycmVudElkblN1YlBhZ2UtLTsKCQkJCQkJCXdpbmRvdy5zY3JvbGxUbyh7IHRvcDogMCwgYmVoYXZpb3I6ICJzbW9vdGgiIH0pOwoJCQkJCQkJY2xvc2VTdWJQYWdlKGN1cnJlbnRQYWdlLCBjdXJyZW50SWRuU3ViUGFnZSwgaWRwaWRjb3VudCk7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQljbG9zZVBhZ2UoY3VycmVudFBhZ2UpOwoJCQkJCQkJY3VycmVudFBhZ2UtLTsKCQkJCQkJCXJlbmRlclBhZ2UoY3VycmVudFBhZ2UpOwoJCQkJCQl9CgkJCQkJfSBlbHNlIHsKCQkJCQkJY2xvc2VQYWdlKGN1cnJlbnRQYWdlKTsKCQkJCQkJY3VycmVudFBhZ2UtLTsKCQkJCQkJcmVuZGVyUGFnZShjdXJyZW50UGFnZSk7CgkJCQkJfQoJCQkJfTsKCgkJCQljbG9zZUJ0bi5vbmNsaWNrID0gKCkgPT4gewoJCQkJCW1vZGFsLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CgkJCQl9OwoKCQkJCWNsb3NlQnRuU2lnbi5vbmNsaWNrID0gKCkgPT4gewoJCQkJCXNpZ25Nb2RhbC5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwoJCQkJfTsKCgkJCQlzYXZlQnRuLm9uY2xpY2sgPSAoZSkgPT4gewoJCQkJCWUucHJldmVudERlZmF1bHQoKTsKCgkJCQl9OwoKCQkJCWVzaWduQnRuLm9uY2xpY2sgPSBmdW5jdGlvbihlKSB7CgkJCQkJbXlFc2lnbkZ1bmN0aW9uKCkKCQkJCX07CgoJCQkJZXNuQnRuLm9uY2xpY2sgPSBmdW5jdGlvbihlKSB7CgkJCQkJZmluYWxTYXZlKCk7CgkJCQl9OwoKCQkJCWZ1bmN0aW9uIGNsb3NlUGFnZShwYWdlKSB7CgkJCQkJY29uc3QgcGdDdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgcGFnZS0ke3BhZ2V9YCk7CgkJCQkJaWYgKHBnQ3RuKSB7CgkJCQkJCWNvbnN0IGVsZW1lbnRzID0gcGdDdG4ucXVlcnlTZWxlY3RvckFsbCgiaW5wdXQsIHRleHRhcmVhLCBzZWxlY3QiKTsKCgkJCQkJCXBnQ3RuLmNsYXNzTGlzdC5hZGQoImhpZGRlbiIpOwoKCQkJCQkJZWxlbWVudHMuZm9yRWFjaCgoZWwpID0+IHsKCQkJCQkJCWVsLmRpc2FibGVkID0gdHJ1ZTsKCQkJCQkJfSk7CgkJCQkJfQoJCQkJfQoKCQkJCWZ1bmN0aW9uIGNsb3NlU3ViUGFnZShwYWdlLCBzdWJwYWdlLCBjb3VudCkgewoJCQkJCWZvciAobGV0IGkgPSAxOyBpIDw9IGNvdW50OyBpKyspIHsKCgkJCQkJCWxldCBwZ0N0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBwYWdlJHtwYWdlfSR7aX1gKTsKCQkJCQkJLy8gY29uc29sZS5sb2coYHBhZ2Uke3BhZ2V9JHtpfWApOwoJCQkJCQlsZXQgZWxlbWVudHMgPSBwZ0N0bi5xdWVyeVNlbGVjdG9yQWxsKCJpbnB1dCwgdGV4dGFyZWEsIHNlbGVjdCIpOwoJCQkJCQlpZiAoaSAhPSBzdWJwYWdlKSB7CgkJCQkJCQlwZ0N0bi5jbGFzc0xpc3QuYWRkKCJoaWRkZW4iKTsKCQkJCQkJCWVsZW1lbnRzLmZvckVhY2goKGVsKSA9PiB7CgkJCQkJCQkJZWwuZGlzYWJsZWQgPSB0cnVlOwoJCQkJCQkJfSk7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQlwZ0N0bi5jbGFzc0xpc3QucmVtb3ZlKCJoaWRkZW4iKTsKCQkJCQkJCWVsZW1lbnRzLmZvckVhY2goKGVsKSA9PiB7CgkJCQkJCQkJaWYgKAoJCQkJCQkJCQkhZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCJub3RfZWRpdGFibGUiKSAmJgoJCQkJCQkJCQkhZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCJub25hcF9kaXNhYmxlZCIpCgkJCQkJCQkJKSB7CgkJCQkJCQkJCWVsLnJlbW92ZUF0dHJpYnV0ZSgiZGlzYWJsZWQiKTsKCQkJCQkJCQl9CgkJCQkJCQl9KTsKCQkJCQkJfQoJCQkJCX0KCQkJCX0KCgkJCQlmdW5jdGlvbiB2ZXJpZnlDYW52YXMocGFnZUVsZSkgewoJCQkJCWNvbnN0IGNhbnZhcyA9IHBhZ2VFbGUucXVlcnlTZWxlY3RvckFsbCgnY2FudmFzW2Zvcj0ic2lnbiJdJyk7CgkJCQkJZm9yIChjb25zdCBbc2lnUGFkLCBjYW52YXNFbF0gb2YgQXJyYXkuZnJvbShjYW52YXMudmFsdWVzKCkpLm1hcCgKCQkJCQkJKGMpID0+IFtzaWduYXR1cmVQYWRzW2MuaWRdLCBjXQoJCQkJCSkpIHsKCQkJCQkJaWYgKGNhbnZhc0VsLmhhc0F0dHJpYnV0ZSgicmVxdWlyZWQiKSAmJiBzaWdQYWQuaXNFbXB0eSgpKSB7CgkJCQkJCQlyZXR1cm4gZmFsc2U7CgkJCQkJCX0KCQkJCQl9CgkJCQkJcmV0dXJuIHRydWU7CgkJCQl9CgoJCQkJZnVuY3Rpb24gcmVuZGVyUGFnZShwYWdlKSB7CgkJCQkJY29uc3QgbGVmdFBhbm5lbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJsZWZ0LXBhbm5lbCIpOwoKCgkJCQkJaWYgKHBhZ2UgPT09IFBBR0VfQ09VTlQpIHsKCQkJCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImZvcm0tYnRuIikuaW5uZXJUZXh0ID0gIlN1Ym1pdCB3aXRob3V0IEUtc2lnbiI7CgkJCQkJCWlmIChzY2hlbWFbJ2ZpcnN0LXBhZ2UnXVsncXVvdGF0aW9ucGRmJ10gIT0gJycpIHsKCQkJCQkJCWxldCBxdW90YXRpb25CdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcXVvdGF0aW9uLWJ0bicpOwoJCQkJCQkJaWYgKHF1b3RhdGlvbkJ0bikgewoJCQkJCQkJCXF1b3RhdGlvbkJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTsKCQkJCQkJCQlxdW90YXRpb25CdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHsKCQkJCQkJCQkJc2hvd1F1b3RhdGlvbigpOwoJCQkJCQkJCX0pOwoJCQkJCQkJfQoKCQkJCQkJfQoJCQkJCQllc2lnbkJ0bi5jbGFzc0xpc3QucmVtb3ZlKCJoaWRkZW4iKTsKCgkJCQkJCWxldCBpc0NvbmNlbnQgPSB0cnVlOwoJCQkJCQljb25zdCBmaXJfcERhdGEgPSBzY2hlbWFbImZpcnN0LXBhZ2UiXTsKCgkJCQkJCWlmIChmaXJfcERhdGEpIHsKCQkJCQkJCWNvbnN0IGZvcm1EYXRhID0gZmlyX3BEYXRhWyJjb25zZW50Zm9ybSJdOyAgICAgLy8gVG8gYmUgdW5jb21tZW50ZWQKCQkJCQkJCS8vIGNvbnN0IGZvcm1EYXRhID0gdHJ1ZTsgICAgIC8vIFRvIGJlIGNvbW1lbnRlZAoKCQkJCQkJCWlmICghZm9ybURhdGEgfHwgZm9ybURhdGEgPT09ICJmYWxzZSIpIHsKCQkJCQkJCQlpc0NvbmNlbnQgPSBmYWxzZTsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCQlpZiAoaXNDb25jZW50IHx8IGZpcl9wRGF0YVsncXVvdGF0aW9ucGRmJ10gIT0gJycpIHsKCQkJCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJmb3JtLWJ0biIpLnNldEF0dHJpYnV0ZSgiZGlzYWJsZWQiLCB0cnVlKTsKCQkJCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzaWduLWJ1dHRvbiIpLnNldEF0dHJpYnV0ZSgiZGlzYWJsZWQiLCB0cnVlKTsKCQkJCQkJfQoJCQkJCQllbHNlIHsKCQkJCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJmb3JtLWJ0biIpLnJlbW92ZUF0dHJpYnV0ZSgiZGlzYWJsZWQiKTsKCQkJCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzaWduLWJ1dHRvbiIpLnJlbW92ZUF0dHJpYnV0ZSgiZGlzYWJsZWQiKTsKCQkJCQkJfQoKCQkJCQl9IGVsc2UgewoJCQkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZm9ybS1idG4iKS5yZW1vdmVBdHRyaWJ1dGUoImRpc2FibGVkIik7CgkJCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzaWduLWJ1dHRvbiIpLnJlbW92ZUF0dHJpYnV0ZSgiZGlzYWJsZWQiKTsKCgkJCQkJfQoKCQkJCQlpZiAocGFnZSA9PSAxKSB7CgkJCQkJCWxlZnRQYW5uZWwuY2xhc3NMaXN0LmFkZCgiaGlkZGVuIik7CgkJCQkJfSBlbHNlIHsKCQkJCQkJbGVmdFBhbm5lbC5jbGFzc0xpc3QucmVtb3ZlKCJoaWRkZW4iKTsKCQkJCQl9CgoJCQkJCWlmIChwYWdlID4gMSkgewoJCQkJCQlwcmV2QnRuLmNsYXNzTGlzdC5yZW1vdmUoImhpZGRlbiIpOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXByZXZCdG4uY2xhc3NMaXN0LmFkZCgiaGlkZGVuIik7CgkJCQkJfQoKCQkJCQljb25zdCBuZXdQZ0N0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBwYWdlLSR7cGFnZX1gKTsKCQkJCQlpZiAocGFnZSA9PT0gMSkgewoJCQkJCQljb25zdCBvbGRQZ0N0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBwYWdlLSR7cGFnZSArIDF9YCk7CgkJCQkJCW9sZFBnQ3RuLmlubmVySFRNTCA9ICcnOwoJCQkJCX0KCQkJCQluZXdQZ0N0bi5jbGFzc0xpc3QucmVtb3ZlKCJoaWRkZW4iKTsKCgkJCQkJbmV3UGdDdG4ucXVlcnlTZWxlY3RvckFsbCgiaW5wdXQsIHRleHRhcmVhLCBzZWxlY3QiKS5mb3JFYWNoKChlbCkgPT4gewoJCQkJCQlpZiAoCgkJCQkJCQkhZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCJub3RfZWRpdGFibGUiKSAmJgoJCQkJCQkJIWVsLmNsYXNzTGlzdC5jb250YWlucygibm9uYXBfZGlzYWJsZWQiKQoJCQkJCQkpIHsKCQkJCQkJCWVsLnJlbW92ZUF0dHJpYnV0ZSgiZGlzYWJsZWQiKTsKCQkJCQkJfQoKCQkJCQkJaWYgKGVsLmNsYXNzTGlzdC5jb250YWlucygibm9uYXBfZGlzYWJsZWQiKSkgewoJCQkJCQkJZWwuc2V0QXR0cmlidXRlKCJkaXNhYmxlZCIsIHRydWUpOwoJCQkJCQl9CgkJCQkJfSk7CgoJCQkJCXdpbmRvdy5zY3JvbGxUbyh7IHRvcDogMCwgYmVoYXZpb3I6ICJzbW9vdGgiIH0pOwoJCQkJfQoKCgoJCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImZvcm0tYnRuIikub25jbGljayA9IChlKSA9PiB7CgkJCQkJY29uc3QgcHJvTmFtZSA9IHNjaGVtYVsiZmlyc3QtcGFnZSJdWyJwcm9qZWN0TmFtZSJdOwoJCQkJCS8vaGFyZGNvZGUgc2tpcCBmb3IgcGFydGljdWxhciBwcm9qZWN0CQoJCQkJCWlmIChjdXJyZW50UGFnZSA9PSA3ICYmIHByb05hbWUgPT0gIlJhaW50cmVlIEJvdWxldmFyZCIpIHsKCQkJCQkJY2xvc2VQYWdlKDcpOwoJCQkJCQljdXJyZW50UGFnZSA9IDk7CgkJCQkJCXJlbmRlclBhZ2UoY3VycmVudFBhZ2UpOwoJCQkJCQlyZXR1cm47CgkJCQkJfQoKCQkJCQkvLyBTdG9wIHVzZXIgY2xpY2tpbmcgbmV4dCBidXR0b24gaWYgaW1hZ2UgaXMgYmVpbmcgdXBsb2FkZWQKCQkJCQlpZiAoY3VycmVudFBhZ2UgPT0gMikgewoJCQkJCQlpZiAoaW1hZ2VVcGxvYWRpbmcubGVuZ3RoID4gMCkgewoJCQkJCQkJYWxlcnQoJ1BsZWFzZSB3YWl0ISBVcGxvYWRpbmcgaW1hZ2UgdG8gc2VydmVyJyk7CgkJCQkJCQlyZXR1cm47CgkJCQkJCX0KCQkJCQl9CgoJCQkJCWlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZm9ybS1idG4nKS5pbm5lclRleHQgPT0gJ1N1Ym1pdCB3aXRob3V0IEUtc2lnbicpIHsKCQkJCQkJY29uc3QgcGdDdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgcGFnZS0ke2N1cnJlbnRQYWdlfWApOwoJCQkJCQljb25zdCBteWNoZWNrRWxlID0gcGdDdG4ucXVlcnlTZWxlY3RvcigiLnRuY19hZ3JlZSIpOwoJCQkJCQlpZiAobXljaGVja0VsZSkgewoJCQkJCQkJaWYgKCFteWNoZWNrRWxlLmNoZWNrZWQpIHsKCQkJCQkJCQljb25zdCBpbnZUZXh0ID0gaGFzU29tZU5leHRTaWJsaW5nVGhlQ2xhc3MoCgkJCQkJCQkJCW15Y2hlY2tFbGUsCgkJCQkJCQkJCSJ0bmNfYWdyZWVUZXh0IgoJCQkJCQkJCSk7CgkJCQkJCQkJaW52VGV4dC5zdHlsZS5jb2xvciA9ICJyZWQiOwoJCQkJCQkJCXJldHVybjsKCQkJCQkJCX0gZWxzZSB7CgoJCQkJCQkJCWZpbmFsU2F2ZSgpOwoJCQkJCQkJCXJldHVybjsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0KCQkJCQkvLyBpZiAoY3VycmVudFBhZ2UgIT0gMiAmJiBjdXJyZW50UGFnZSAhPSA0KSB7CgkJCQkJaWYgKGN1cnJlbnRQYWdlICE9IDIgJiYgY3VycmVudFBhZ2UgIT0gMykgewoJCQkJCQljb25zdCBwZ0N0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBwYWdlLSR7Y3VycmVudFBhZ2V9YCk7CgkJCQkJCWNvbnN0IG15Y2hlY2tFbGUgPSBwZ0N0bi5xdWVyeVNlbGVjdG9yKCIudG5jX2FncmVlIik7CgkJCQkJCWlmIChteWNoZWNrRWxlKSB7CgkJCQkJCQlpZiAoIW15Y2hlY2tFbGUuY2hlY2tlZCkgewoJCQkJCQkJCWNvbnN0IGludlRleHQgPSBoYXNTb21lTmV4dFNpYmxpbmdUaGVDbGFzcygKCQkJCQkJCQkJbXljaGVja0VsZSwKCQkJCQkJCQkJInRuY19hZ3JlZVRleHQiCgkJCQkJCQkJKTsKCQkJCQkJCQlpbnZUZXh0LnN0eWxlLmNvbG9yID0gInJlZCI7CgkJCQkJCQkJcmV0dXJuOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfSBlbHNlIHsKCQkJCQkJaWYgKGN1cnJlbnRQYWdlID09PSAyKSB7CgkJCQkJCQkvLyBIYW5kbGluZyBwYWdlIDMgc3BlY2lhbCBidWcKCQkJCQkJCWNvbnN0IHBhZ2UzQ2hpbGRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BhZ2UtMycpLmNoaWxkcmVuOwoKCQkJCQkJCWxldCBhbGxWaXNpYmxlID0gdHJ1ZTsKCQkJCQkJCWZvciAobGV0IGkgPSAxOyBpIDwgcGFnZTNDaGlsZHMubGVuZ3RoOyBpKyspIHsKCQkJCQkJCQlpZiAocGFnZTNDaGlsZHNbaV0uY2xhc3NMaXN0LmNvbnRhaW5zKCdoaWRkZW4nKSkgewoJCQkJCQkJCQlhbGxWaXNpYmxlID0gZmFsc2U7CgkJCQkJCQkJCWJyZWFrOwoJCQkJCQkJCX0KCQkJCQkJCX0KCQkJCQkJCWlmIChhbGxWaXNpYmxlKSB7CgkJCQkJCQkJZm9yIChsZXQgaSA9IDI7IGkgPCBwYWdlM0NoaWxkcy5sZW5ndGg7IGkrKykgewoJCQkJCQkJCQlwYWdlM0NoaWxkc1tpXS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTsKCQkJCQkJCQl9CgkJCQkJCQl9CgoJCQkJCQkJLy8gQnVnIGZpeCBlbmRzIGhlcmUKCQkJCQkJfQoKCQkJCQkJLy8gaWYgKGN1cnJlbnRQYWdlID09PSAyKSB7CgkJCQkJCWlmIChjdXJyZW50UGFnZSA9PT0gMykgewoJCQkJCQkJLy8gTWFrZSBQQU4gY2FyZCBmaWVsZCBub24tbWFuZGF0b3J5IGlmIAoJCQkJCQkJLy8gSSBkbyBub3QgaGF2ZSBhIHBhbiBjYXJkIGNoZWNrYm94IGlzIGNoZWNrZWQKCQkJCQkJCWlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFuTm90YXZhaWxhYmxlMicpKSB7CgkJCQkJCQkJaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYW5Ob3RhdmFpbGFibGUyJykuY2hlY2tlZCkgewoJCQkJCQkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnQTJfSW5kaXZpZHVhbF9QQU5fTm9fMScpLnJlbW92ZUF0dHJpYnV0ZSgncmVxdWlyZWQnKTsKCQkJCQkJCQl9CgkJCQkJCQkJZWxzZSB7CgkJCQkJCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdBMl9JbmRpdmlkdWFsX1BBTl9Ob18xJykuc2V0QXR0cmlidXRlKCdyZXF1aXJlZCcsIHRydWUpOwoJCQkJCQkJCX0KCQkJCQkJCX0KCgkJCQkJCQlpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Bhbk5vdGF2YWlsYWJsZTMnKSkgewoJCQkJCQkJCWlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFuTm90YXZhaWxhYmxlMycpLmNoZWNrZWQpIHsKCQkJCQkJCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ0EzX0luZGl2aWR1YWxfUEFOX05vXzEnKS5yZW1vdmVBdHRyaWJ1dGUoJ3JlcXVpcmVkJyk7CgkJCQkJCQkJfQoJCQkJCQkJCWVsc2UgewoJCQkJCQkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnQTNfSW5kaXZpZHVhbF9QQU5fTm9fMScpLnNldEF0dHJpYnV0ZSgncmVxdWlyZWQnLCB0cnVlKTsKCQkJCQkJCQl9CgkJCQkJCQl9CgoJCQkJCQkJY29uc3QgdG90YWxBcHBsaWNhbnRzID0gc2NoZW1hWyJhcHBsaWNhbnQtZGV0YWlscyJdLmFwcGxpY2FudENvdW50OwoKCQkJCQkJCS8vIGFsZXJ0KHRvdGFsQXBwbGljYW50cyk7CgkJCQkJCQkvLyBjb25zb2xlLmxvZyhjdXJyZW50U3ViUGFnZSk7CgkJCQkJCQkvLyBmb3IobGV0IGk9KGN1cnJlbnRTdWJQYWdlKjIgLSAxKTtpPD1NYXRoLm1pbih0b3RhbEFwcGxpY2FudHMsIGN1cnJlbnRTdWJQYWdlKjIpO2krKyl7CgkJCQkJCQkvLyAgIGNvbnNvbGUubG9nKGkpOwoJCQkJCQkJLy8gfQoJCQkJCQkJY29uc3QgcGdzdWJDdG5jaGVjayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKAoJCQkJCQkJCWBwYWdlJHtjdXJyZW50UGFnZX0ke2N1cnJlbnRTdWJQYWdlfWAKCQkJCQkJCSk7CgoJCQkJCQkJLy8gVXNpbmcgcXVlcnlTZWxlY3RvckFsbCgpIGFzIHBhZ2UgMyBjYW4gaGF2ZSBtb3JlCgkJCQkJCQkvLyB0aGFuIG9uZSB0JmMgY2hlY2tib3hlcwoKCQkJCQkJCWNvbnN0IG15Y2hlY2tFbGVzID0gcGdzdWJDdG5jaGVjay5xdWVyeVNlbGVjdG9yQWxsKCIudG5jX2FncmVlIik7CgkJCQkJCQlmb3IgKGNvbnN0IG15Y2hlY2tFbGUgb2YgbXljaGVja0VsZXMpIHsgICAvLyBtYW5vagoJCQkJCQkJCWlmIChteWNoZWNrRWxlLmlkID09PSAncGFnZTNfbGFzdF9jdXN0b21faWQnKSB7CgkJCQkJCQkJCWNvbnRpbnVlOwoJCQkJCQkJCX0KCQkJCQkJCQlpZiAobXljaGVja0VsZSkgewoJCQkJCQkJCQlpZiAoIW15Y2hlY2tFbGUuY2hlY2tlZCkgewoJCQkJCQkJCQkJY29uc3QgaW52VGV4dCA9IGhhc1NvbWVOZXh0U2libGluZ1RoZUNsYXNzKAoJCQkJCQkJCQkJCW15Y2hlY2tFbGUsCgkJCQkJCQkJCQkJInRuY19hZ3JlZVRleHQiCgkJCQkJCQkJCQkpOwoJCQkJCQkJCQkJaW52VGV4dC5zdHlsZS5jb2xvciA9ICJyZWQiOwoJCQkJCQkJCQkJcmV0dXJuOwoJCQkJCQkJCQl9CgkJCQkJCQkJfQoJCQkJCQkJfQoJCQkJCQkJLy8gfSBlbHNlIGlmIChjdXJyZW50UGFnZSA9PT0gNCkgewoJCQkJCQl9IGVsc2UgaWYgKGN1cnJlbnRQYWdlID09PSAyKSB7CgkJCQkJCQljb25zdCBwZ3N1YkN0bmNoZWNrID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoCgkJCQkJCQkJYHBhZ2Uke2N1cnJlbnRQYWdlfSR7Y3VycmVudElkblN1YlBhZ2V9YAoJCQkJCQkJKTsKCQkJCQkJCWNvbnN0IG15Y2hlY2tFbGUgPSBwZ3N1YkN0bmNoZWNrLnF1ZXJ5U2VsZWN0b3IoIi50bmNfYWdyZWUiKTsKCQkJCQkJCWlmIChteWNoZWNrRWxlKSB7CgkJCQkJCQkJaWYgKCFteWNoZWNrRWxlLmNoZWNrZWQpIHsKCQkJCQkJCQkJY29uc3QgaW52VGV4dCA9IGhhc1NvbWVOZXh0U2libGluZ1RoZUNsYXNzKAoJCQkJCQkJCQkJbXljaGVja0VsZSwKCQkJCQkJCQkJCSJ0bmNfYWdyZWVUZXh0IgoJCQkJCQkJCQkpOwoJCQkJCQkJCQlpbnZUZXh0LnN0eWxlLmNvbG9yID0gInJlZCI7CgkJCQkJCQkJCXJldHVybjsKCQkJCQkJCQl9CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQl9CgoJCQkJCS8vIFZhbGlkYXRpbmcgd2hldGhlciBPVFAgaXMgdmVyaWZpZWQgc3VjY2Vzc2Z1bGx5IG9yIG5vdAoJCQkJCWlmIChjdXJyZW50UGFnZSA9PT0gNSkgewoJCQkJCQlpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI0NQQUdSRUUnKSkgewoJCQkJCQkJaWYgKCFkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjQ1BBR1JFRScpLmNoZWNrZWQpIHsKCQkJCQkJCQlhbGVydCgnUGxlYXNlIHByb3ZpZGUgY29uc2VudCcpOwoJCQkJCQkJCXJldHVybjsKCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJaWYgKCFib29raW5nVmVyaWZpZWQpIHsKCQkJCQkJCQkJYWxlcnQoJ09UUCBub3QgdmVyaWZpZWQnKTsKCQkJCQkJCQkJcmV0dXJuOwoJCQkJCQkJCX0KCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0KCgoJCQkJCWlmIChlLnRhcmdldC5pbm5lclRleHQgPT09ICJTdWJtaXQiKSB7CgkJCQkJCXNibWl0RGF0YShmYWxzZSk7CgkJCQkJCWZpbmFsU2F2ZSgpOwoJCQkJCX0KCgkJCQkJZnVuY3Rpb24gc2F2ZWRhdGEoY3JwKSB7CgkJCQkJCS8vIGlmIChjcnAgPiAxKSB7CgkJCQkJCWlmIChjcnAgPiAyKSB7CgkJCQkJCQljb25zdCBmaW5hbERhdGEgPSBmaW5hbFN1Ym1pdCgpOwoKCQkJCQkJCWZpbmFsRGF0YS5hcHBlbmQoCgkJCQkJCQkJImFwcGxpY2FudENvdW50IiwKCQkJCQkJCQlzY2hlbWFbImFwcGxpY2FudC1kZXRhaWxzIl0uYXBwbGljYW50Q291bnQKCQkJCQkJCSk7CgoJCQkJCQkJY29uc3QgcmVxdWVzdE9wdGlvbnMgPSB7CgkJCQkJCQkJbWV0aG9kOiAiUE9TVCIsCgkJCQkJCQkJYm9keTogZmluYWxEYXRhLAoJCQkJCQkJCXJlZGlyZWN0OiAiZm9sbG93IiwKCQkJCQkJCX07CgoJCQkJCQkJZmV0Y2godXBkYXRlRm9ybURhdGFBUEksIHJlcXVlc3RPcHRpb25zKTsKCQkJCQkJfQoJCQkJCX0KCQkJCQlzYXZlZGF0YShjdXJyZW50UGFnZSk7CgoJCQkJCWlmIChjdXJyZW50UGFnZSA8IFBBR0VfQ09VTlQpIHsKCQkJCQkJZS5wcmV2ZW50RGVmYXVsdCgpOwoKCQkJCQkJbGV0IHBhZ2VDdG4gPSAnJzsKCQkJCQkJaWYgKGN1cnJlbnRQYWdlICE9IDMpIHsKCQkJCQkJCXBnQ3RuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYHBhZ2UtJHtjdXJyZW50UGFnZX1gKTsKCQkJCQkJfQoJCQkJCQllbHNlIHsKCQkJCQkJCXBnQ3RuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYHBhZ2Uke2N1cnJlbnRQYWdlfSR7Y3VycmVudFN1YlBhZ2V9YCk7CgkJCQkJCX0KCgkJCQkJCWNvbnN0IGVsZW1lbnRzID0gcGdDdG4ucXVlcnlTZWxlY3RvckFsbCgiaW5wdXQsIHRleHRhcmVhLCBzZWxlY3QiKTsKCgkJCQkJCS8vIGlmIChjdXJyZW50UGFnZSA9PT0gNCkgewoJCQkJCQlpZiAoY3VycmVudFBhZ2UgPT09IDIpIHsKCQkJCQkJCWNvbnN0IHBnc3ViQ3RuY2hlY2sgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgKCQkJCQkJCQlgcGFnZSR7Y3VycmVudFBhZ2V9JHtjdXJyZW50SWRuU3ViUGFnZX1gCgkJCQkJCQkpOwoJCQkJCQkJLy8gaWYgKCF2ZXJpZnlNaW5SZXEocGdzdWJDdG5jaGVjaykpIHsKCQkJCQkJCS8vICAgcmV0dXJuOwoJCQkJCQkJLy8gfQoJCQkJCQl9CgoJCQkJCQlmb3IgKGNvbnN0IGVsIG9mIGVsZW1lbnRzKSB7CgkJCQkJCQlpZiAoIWVsLmNoZWNrVmFsaWRpdHkoKSkgewoJCQkJCQkJCWVsLnJlcG9ydFZhbGlkaXR5KCk7CgkJCQkJCQkJcmV0dXJuOwoJCQkJCQkJfQoJCQkJCQl9CgoJCQkJCQlpZiAoY3VycmVudFBhZ2UgKyAxID09PSA3KSB7CgkJCQkJCQlvbmxvYWR3aW4oKTsKCQkJCQkJfQoKCQkJCQkJaWYgKGN1cnJlbnRQYWdlICsgMSA9PT0gMikgewoJCQkJCQkJY29uc3QgbXlFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIi5hcGN0X3R5cGVfZGl2Iik7CgoJCQkJCQkJbGV0IHJlcV90eXBlID0gW107CgkJCQkJCQlmb3IgKGxldCBpID0gMTsgaSA8PSBteUVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7CgkJCQkJCQkJbGV0IHRhcmdldEVsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBhcHBsaWNhbnRfJHtpfWApLnZhbHVlOwoKCQkJCQkJCQljb25zdCBhcHBfZGV0aWFscyA9IHNjaGVtYVsiZmlyc3QtcGFnZSJdWyJhcHBsaWNhbnRfZGV0YWlscyJdOwoJCQkJCQkJCWNvbnN0IGN1c3RvbWVyRGV0YWlscyA9IHsKCQkJCQkJCQkJY3VzdG9tZXJpZDogYXBwX2RldGlhbHNbMF0uY3VzdG9tZXJpZCwKCQkJCQkJCQkJaWQ6IGFwcF9kZXRpYWxzWzBdLmlkLAoJCQkJCQkJCX07CgoJCQkJCQkJCWNvbnN0IGRldGFpbHMgPSB7CgkJCQkJCQkJCUFwcGxpY2FudF9UeXBlOiB0YXJnZXRFbGUsCgkJCQkJCQkJCUFwcGxpY2FudF9Qb3NpdGlvbjogYEEke2l9YCwKCQkJCQkJCQkJY3VzdG9tZXJpZDogY3VzdG9tZXJEZXRhaWxzLmN1c3RvbWVyaWQsCgkJCQkJCQkJCWlkOiBjdXN0b21lckRldGFpbHMuaWQsCgkJCQkJCQkJfTsKCQkJCQkJCQlyZXFfdHlwZS5wdXNoKGRldGFpbHMpOwoJCQkJCQkJfQoJCQkJCQkJaWYgKAoJCQkJCQkJCSFkb2N1bWVudAoJCQkJCQkJCQkuZ2V0RWxlbWVudEJ5SWQoYHBhZ2UtJHtjdXJyZW50UGFnZSArIDF9YCkKCQkJCQkJCQkJLmhhc0NoaWxkTm9kZXMoKQoJCQkJCQkJKSB7CgkJCQkJCQkJdmFyIG15SGVhZGVycyA9IG5ldyBIZWFkZXJzKCk7CgkJCQkJCQkJbXlIZWFkZXJzLmFwcGVuZCgiQ29udGVudC1UeXBlIiwgImFwcGxpY2F0aW9uL2pzb24iKTsKCgkJCQkJCQkJdmFyIHJhdyA9IEpTT04uc3RyaW5naWZ5KHsKCQkJCQkJCQkJYXBwbGljYW50X2RldGFpbHM6IHJlcV90eXBlLAoJCQkJCQkJCX0pOwoKCQkJCQkJCQljb25zdCByZXF1ZXN0T3B0aW9ucyA9IHsKCQkJCQkJCQkJbWV0aG9kOiAiUE9TVCIsCgkJCQkJCQkJCWhlYWRlcnM6IG15SGVhZGVycywKCQkJCQkJCQkJYm9keTogcmF3LAoJCQkJCQkJCQlyZWRpcmVjdDogImZvbGxvdyIsCgkJCQkJCQkJfTsKCgkJCQkJCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Zvcm0tYnRuJykuZGlzYWJsZWQgPSB0cnVlOwoJCQkJCQkJCWZldGNoKGdlbmVyaWNBUEksIHJlcXVlc3RPcHRpb25zKQoJCQkJCQkJCQkudGhlbigocmVzcG9uc2UpID0+IHJlc3BvbnNlLmpzb24oKSkKCQkJCQkJCQkJLnRoZW4oKHJlc3BvbnNlKSA9PiB7CgkJCQkJCQkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZm9ybS1idG4nKS5kaXNhYmxlZCA9IGZhbHNlOwoJCQkJCQkJCQkJY29uc3QgYXBwbGljYW50X2RldGFpbHNjb2xzID0gcmVzcG9uc2UuYXBwbGljYW50X2RldGFpbHM7CgkJCQkJCQkJCQljb25zdCBpZGVudGlmaWNhdGlvbmNvbHMgPSByZXNwb25zZS5jb2xzOwoKCQkJCQkJCQkJCWNvbnN0IGF2YWlsc2VjID0KCQkJCQkJCQkJCQlzY2hlbWFbImFwcGxpY2FudC1kZXRhaWxzIl1bInN1Yi1zZWN0aW9ucyJdWwoJCQkJCQkJCQkJCXNjaGVtYVsiYXBwbGljYW50LWRldGFpbHMiXVsic3ViLXNlY3Rpb25zIl0ubGVuZ3RoIC0gMQoJCQkJCQkJCQkJCV07CgoJCQkJCQkJCQkJY29uc3Qgc2NoZW1hQXJyID0gYXBwbGljYW50X2RldGFpbHNjb2xzLmNvbmNhdChhdmFpbHNlYyk7CgkJCQkJCQkJCQlzY2hlbWFbImFwcGxpY2FudC1kZXRhaWxzIl1bInN1Yi1zZWN0aW9ucyJdID0gc2NoZW1hQXJyOwoJCQkJCQkJCQkJc2NoZW1hWyJhcHBsaWNhbnQtZGV0YWlscyJdLmFwcGxpY2FudENvdW50ID0KCQkJCQkJCQkJCQlyZXNwb25zZS5hcHBsaWNhbnRDb3VudDsKCQkJCQkJCQkJCXNjaGVtYVsiaWRlbnRpZmljYXRpb24iXVsiY29scyJdID0gcmVzcG9uc2UuY29sczsKCgkJCQkJCQkJCQljb25zdCBhcGN0Q3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYXBwbGljYW50Q291bnQiKTsKCQkJCQkJCQkJCWFwY3RDdC52YWx1ZSA9IHJlc3BvbnNlLmFwcGxpY2FudENvdW50OwoKCQkJCQkJCQkJCWNvbnN0IHBlclBhZ2UgPSBzY2hlbWFbImFwcGxpY2FudC1kZXRhaWxzIl1bInBlci1wYWdlIl07CgoJCQkJCQkJCQkJbGV0IGNvdW50ID0gYXBwbGljYW50X2RldGFpbHNjb2xzLmxlbmd0aCAlIHBlclBhZ2U7CgoJCQkJCQkJCQkJaWRwY291bnQgPQoJCQkJCQkJCQkJCWNvdW50ID4gMAoJCQkJCQkJCQkJCQk/IChhcHBsaWNhbnRfZGV0YWlsc2NvbHMubGVuZ3RoIC0gY291bnQpIC8gcGVyUGFnZSArIDEKCQkJCQkJCQkJCQkJOiBhcHBsaWNhbnRfZGV0YWlsc2NvbHMubGVuZ3RoIC8gcGVyUGFnZTsKCgkJCQkJCQkJCQlsZXQgaWRjb3VudCA9IGlkZW50aWZpY2F0aW9uY29scy5sZW5ndGggJSAzOwoJCQkJCQkJCQkJaWRwaWRjb3VudCA9CgkJCQkJCQkJCQkJaWRjb3VudCA+IDAKCQkJCQkJCQkJCQkJPyAoaWRlbnRpZmljYXRpb25jb2xzLmxlbmd0aCAtIGlkY291bnQpIC8gMyArIDEKCQkJCQkJCQkJCQkJOiBpZGVudGlmaWNhdGlvbmNvbHMubGVuZ3RoIC8gMzsKCgkJCQkJCQkJCQljb25zdCBwYWdlZGV0ID0gcmVuZGVyYXBwbGljYW50U2VjdGlvbigKCQkJCQkJCQkJCQlhcHBsaWNhbnRfZGV0YWlsc2NvbHMsCgkJCQkJCQkJCQkJaWRwY291bnQsCgkJCQkJCQkJCQkJcGVyUGFnZQoJCQkJCQkJCQkJKTsKCgkJCQkJCQkJCQkvL2FwcGVuZAoJCQkJCQkJCQkJLy8gY29uc3QgZnJtZ3JwID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoCgkJCQkJCQkJCQkvLyAgIGBwYWdlLSR7Y3VycmVudFBhZ2UgKyAxfWAKCQkJCQkJCQkJCS8vICk7CgkJCQkJCQkJCQljb25zdCBmcm1ncnAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgKCQkJCQkJCQkJCQlgcGFnZS0ke2N1cnJlbnRQYWdlICsgMn1gCgkJCQkJCQkJCQkpOwoJCQkJCQkJCQkJZnJtZ3JwLmlubmVySFRNTCA9ICcnOwoJCQkJCQkJCQkJZnJtZ3JwLmFwcGVuZChwYWdlZGV0KTsKCgkJCQkJCQkJCQlmcm1ncnAKCQkJCQkJCQkJCQkucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT0iY2hlY2tib3giXScpCgkJCQkJCQkJCQkJLmZvckVhY2goKGVsZSkgPT4gewoJCQkJCQkJCQkJCQlpZiAoZWxlLmlkKSB7CgkJCQkJCQkJCQkJCQlpZiAoCgkJCQkJCQkJCQkJCQkJZWxlLmlkLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoInNhbWVfYXNfcHJpbWFyeSIpCgkJCQkJCQkJCQkJCQkpIHsKCQkJCQkJCQkJCQkJCQllbGUub25jbGljayA9IGZ1bmN0aW9uKGUpIHsKCQkJCQkJCQkJCQkJCQkJc2FtZWFzUHJpbWFyeShlLnRhcmdldC5jaGVja2VkLCBlLnRhcmdldC5pZCk7CgkJCQkJCQkJCQkJCQkJfTsKCgkJCQkJCQkJCQkJCQkJc2FtZWFzUHJpbWFyeShlbGUuY2hlY2tlZCwgZWxlLmlkKTsKCQkJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCQkJCWlmICgKCQkJCQkJCQkJCQkJCQllbGUuaWQKCQkJCQkJCQkJCQkJCQkJLnRvTG93ZXJDYXNlKCkKCQkJCQkJCQkJCQkJCQkJLmluY2x1ZGVzKCJzYW1lX2FzX3Blcm1hbmVudF9hZGRyZXNzIikKCQkJCQkJCQkJCQkJCSkgewoJCQkJCQkJCQkJCQkJCWVsZS5vbmNsaWNrID0gZnVuY3Rpb24oZSkgewoJCQkJCQkJCQkJCQkJCQljb25zdCBjcnR5cGUgPSBhYXBwbGljYXRuRmllbGQoZS50YXJnZXQuaWQpOwoJCQkJCQkJCQkJCQkJCQlmYWN0b3JDZEFkZHJlc3MoY3J0eXBlLCBlLnRhcmdldC5jaGVja2VkKTsKCQkJCQkJCQkJCQkJCQl9OwoJCQkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJCQl9CgkJCQkJCQkJCQkJfSk7CgoJCQkJCQkJCQkJY29uc3QgZnJtZ3JwMSA9IHJlbmRlcklkZW50aWZpY2F0aW9uKGlkZW50aWZpY2F0aW9uY29scyk7CgoJCQkJCQkJCQkJY29uc3QgYXBsaSA9IHVwZGF0ZUFjdGlvbihmcm1ncnApOwoJCQkJCQkJCQkJY29uc3QgaWRudCA9IHVwZGF0ZUFjdGlvbihmcm1ncnAxKTsKCgkJCQkJCQkJCQlzaWduYXR1cmVQYWRzID0gewoJCQkJCQkJCQkJCS4uLmlkbnQsCgkJCQkJCQkJCQkJLi4uYXBsaSwKCQkJCQkJCQkJCQkuLi5zaWduYXR1cmVQYWRzLAoJCQkJCQkJCQkJfTsKCgkJCQkJCQkJCQljbG9zZVBhZ2UoY3VycmVudFBhZ2UpOwoJCQkJCQkJCQkJLy8gY2xvc2VQYWdlKDQpOwoJCQkJCQkJCQkJY2xvc2VQYWdlKDMpOwoKCQkJCQkJCQkJCWlmICghdmVyaWZ5Q2FudmFzKHBnQ3RuKSkgewoJCQkJCQkJCQkJCXJldHVybjsKCQkJCQkJCQkJCX0KCgkJCQkJCQkJCQljdXJyZW50UGFnZSsrOwoJCQkJCQkJCQkJcmVuZGVyUGFnZShjdXJyZW50UGFnZSwgY3VycmVudFN1YlBhZ2UpOwoJCQkJCQkJCQkJY2xvc2VTdWJQYWdlKGN1cnJlbnRQYWdlLCBjdXJyZW50U3ViUGFnZSwgaWRwY291bnQpOwoJCQkJCQkJCQl9KQoJCQkJCQkJCQkuY2F0Y2goZXJyID0+IHsKCQkJCQkJCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmb3JtLWJ0bicpLmRpc2FibGVkID0gZmFsc2U7CgkJCQkJCQkJCX0pOwoJCQkJCQkJfSBlbHNlIHsKCgkJCQkJCQkJaWYgKCF2ZXJpZnlDYW52YXMocGdDdG4pKSB7CgkJCQkJCQkJCXJldHVybjsKCQkJCQkJCQl9CgkJCQkJCQkJY2xvc2VQYWdlKGN1cnJlbnRQYWdlKTsKCQkJCQkJCQljdXJyZW50UGFnZSsrOwoJCQkJCQkJCXJlbmRlclBhZ2UoY3VycmVudFBhZ2UpOwoJCQkJCQkJCWNsb3NlU3ViUGFnZShjdXJyZW50UGFnZSwgY3VycmVudFN1YlBhZ2UsIGlkcGNvdW50KTsKCQkJCQkJCX0KCQkJCQkJCS8vIH0gZWxzZSBpZiAoY3VycmVudFBhZ2UgPT09IDIpIHsKCQkJCQkJfSBlbHNlIGlmIChjdXJyZW50UGFnZSA9PT0gMykgewoKCQkJCQkJCWlmIChjdXJyZW50U3ViUGFnZSArIDEgPD0gaWRwY291bnQpIHsKCQkJCQkJCQlsZXQgcGdzdWJDdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgKCQkJCQkJCQkJYHBhZ2Uke2N1cnJlbnRQYWdlfSR7Y3VycmVudElkblN1YlBhZ2V9YAoJCQkJCQkJCSk7CgoJCQkJCQkJCWlmICghdmVyaWZ5Q2FudmFzKHBnc3ViQ3RuKSkgewoJCQkJCQkJCQlyZXR1cm47CgkJCQkJCQkJfQoKCQkJCQkJCQljdXJyZW50U3ViUGFnZSsrOwoJCQkJCQkJCXdpbmRvdy5zY3JvbGxUbyh7IHRvcDogMCwgYmVoYXZpb3I6ICJzbW9vdGgiIH0pOwoJCQkJCQkJCWNsb3NlU3ViUGFnZShjdXJyZW50UGFnZSwgY3VycmVudFN1YlBhZ2UsIGlkcGNvdW50KTsKCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJaWYgKCF2ZXJpZnlDYW52YXMocGdDdG4pKSB7CgkJCQkJCQkJCXJldHVybjsKCQkJCQkJCQl9CgkJCQkJCQkJY2xvc2VQYWdlKGN1cnJlbnRQYWdlKTsKCQkJCQkJCQljdXJyZW50UGFnZSsrOwoJCQkJCQkJCXJlbmRlclBhZ2UoY3VycmVudFBhZ2UpOwoJCQkJCQkJfQoJCQkJCQkJLy8gfSBlbHNlIGlmIChjdXJyZW50UGFnZSArIDEgPT09IDQpIHsKCQkJCQkJfSBlbHNlIGlmIChjdXJyZW50UGFnZSArIDEgPT09IDIpIHsKCQkJCQkJCWlmICghdmVyaWZ5Q2FudmFzKHBnQ3RuKSkgewoJCQkJCQkJCXJldHVybjsKCQkJCQkJCX0KCQkJCQkJCWNsb3NlUGFnZShjdXJyZW50UGFnZSk7CgkJCQkJCQljdXJyZW50UGFnZSsrOwoJCQkJCQkJcmVuZGVyUGFnZShjdXJyZW50UGFnZSk7CgkJCQkJCQljbG9zZVN1YlBhZ2UoY3VycmVudFBhZ2UsIGN1cnJlbnRJZG5TdWJQYWdlLCBpZHBpZGNvdW50KTsKCQkJCQkJCS8vIH0gZWxzZSBpZiAoY3VycmVudFBhZ2UgPT09IDQpIHsKCQkJCQkJfSBlbHNlIGlmIChjdXJyZW50UGFnZSA9PT0gMikgewoJCQkJCQkJaWYgKGN1cnJlbnRJZG5TdWJQYWdlICsgMSA8PSBpZHBpZGNvdW50KSB7CgkJCQkJCQkJY29uc3QgcGdzdWJDdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgKCQkJCQkJCQkJYHBhZ2Uke2N1cnJlbnRQYWdlfSR7Y3VycmVudElkblN1YlBhZ2V9YAoJCQkJCQkJCSk7CgkJCQkJCQkJaWYgKCF2ZXJpZnlDYW52YXMocGdzdWJDdG4pKSB7CgkJCQkJCQkJCXJldHVybjsKCQkJCQkJCQl9CgoJCQkJCQkJCWN1cnJlbnRJZG5TdWJQYWdlKys7CgkJCQkJCQkJd2luZG93LnNjcm9sbFRvKHsgdG9wOiAwLCBiZWhhdmlvcjogInNtb290aCIgfSk7CgkJCQkJCQkJY2xvc2VTdWJQYWdlKGN1cnJlbnRQYWdlLCBjdXJyZW50SWRuU3ViUGFnZSwgaWRwaWRjb3VudCk7CgkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCWlmICghdmVyaWZ5Q2FudmFzKHBnQ3RuKSkgewoJCQkJCQkJCQlyZXR1cm47CgkJCQkJCQkJfQoKCQkJCQkJCQljbG9zZVBhZ2UoY3VycmVudFBhZ2UpOwoJCQkJCQkJCWN1cnJlbnRQYWdlKys7CgkJCQkJCQkJcmVuZGVyUGFnZShjdXJyZW50UGFnZSk7CgoJCQkJCQkJCXNldFRpbWVvdXQoKCkgPT4gewoJCQkJCQkJCQkvLyBsZXQgZ2V0SXRlbXNBMSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2lkRGV0YWlsc0ExJykpOwoJCQkJCQkJCQlsZXQgZ2V0SXRlbXNBMSA9IEpTT04ucGFyc2UoaWREZXRhaWxzQTEpOwoJCQkJCQkJCQlpZiAoZ2V0SXRlbXNBMSkgewoJCQkJCQkJCQkJZm9yIChjb25zdCBrZXkgb2YgZ2V0SXRlbXNBMSkgewoJCQkJCQkJCQkJCWZvciAoY29uc3QgbmV3X3ZhbCBvZiBrZXkuZm9ybSkgewoJCQkJCQkJCQkJCQlpZiAobmV3X3ZhbC5kZWZhdWx0VmFsdWUgJiYgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobmV3X3ZhbC5pZCkpIHsKCQkJCQkJCQkJCQkJCWlmIChuZXdfdmFsLmlkLmluY2x1ZGVzKCdBQURIQVInKSkgewoJCQkJCQkJCQkJCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG5ld192YWwuaWQpLnZhbHVlID0gbmV3X3ZhbC5kZWZhdWx0VmFsdWUgPyBwYXJzZUludChuZXdfdmFsLmRlZmF1bHRWYWx1ZS5yZXBsYWNlKC9ccy9nLCAnJykpIDogJycKCQkJCQkJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCQkJCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobmV3X3ZhbC5pZCkudmFsdWUgPSBuZXdfdmFsLmRlZmF1bHRWYWx1ZSA/IG5ld192YWwuZGVmYXVsdFZhbHVlIDogJycKCQkJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCX0KCQkJCQkJCQkJfQoJCQkJCQkJCQkvLyBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnaWREZXRhaWxzQTEnKTsKCQkJCQkJCQkJaWREZXRhaWxzQTEgPSAnJzsKCQkJCQkJCQl9LCA1MDApOwoJCQkJCQkJfQoJCQkJCQl9IGVsc2UgewoJCQkJCQkJaWYgKCF2ZXJpZnlDYW52YXMocGdDdG4pKSB7CgkJCQkJCQkJcmV0dXJuOwoJCQkJCQkJfQoKCQkJCQkJCWNsb3NlUGFnZShjdXJyZW50UGFnZSk7CgkJCQkJCQljdXJyZW50UGFnZSsrOwoJCQkJCQkJcmVuZGVyUGFnZShjdXJyZW50UGFnZSk7CgkJCQkJCX0KCQkJCQl9IGVsc2UgewoJCQkJCQlkb2N1bWVudAoJCQkJCQkJLnF1ZXJ5U2VsZWN0b3JBbGwoImlucHV0LCB0ZXh0YXJlYSwgc2VsZWN0IikKCQkJCQkJCS5mb3JFYWNoKChlKSA9PiB7CgkJCQkJCQkJZS5yZW1vdmVBdHRyaWJ1dGUoImRpc2FibGVkIik7CgkJCQkJCQl9KTsKCgkJCQkJCWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2NhbnZhc1tmb3I9InNpZ24iXScpLmZvckVhY2goKGUpID0+IHsKCQkJCQkJCWNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKTsKCQkJCQkJCWlucHV0LnNldEF0dHJpYnV0ZSgidHlwZSIsICJoaWRkZW4iKTsKCgkJCQkJCQljb25zdCBzaWdQYWQgPSBzaWduYXR1cmVQYWRzW2UuaWRdOwoKCQkJCQkJCWNvbnN0IGRhdGFVUkkgPSBzaWdQYWQudG9EYXRhVVJMKCk7CgoJCQkJCQkJaW5wdXQuc2V0QXR0cmlidXRlKCJ2YWx1ZSIsIGRhdGFVUkkpOwoJCQkJCQkJaW5wdXQuc2V0QXR0cmlidXRlKCJuYW1lIiwgZS5nZXRBdHRyaWJ1dGUoIm5hbWUiKSk7CgoJCQkJCQkJZm9ybS5hcHBlbmRDaGlsZChpbnB1dCk7CgkJCQkJCX0pOwoJCQkJCX0KCQkJCX07CgoJCQkJZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnY2FudmFzW2Zvcj0ic2lnbiJdJykuZm9yRWFjaCgoZSkgPT4gewoJCQkJCXNpZ25hdHVyZVBhZHNbZS5pZF0gPSBuZXcgU2lnbmF0dXJlUGFkKGUpOwoJCQkJCWUud2lkdGggPSAyMjA7CgkJCQkJZS5oZWlnaHQgPSA4MDsKCQkJCX0pOwoKCQkJCWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2J1dHRvbltmb3I9ImNsZWFyLXNpZ24iXScpLmZvckVhY2goKGUpID0+IHsKCQkJCQllLm9uY2xpY2sgPSAoZXYpID0+IHsKCQkJCQkJZXYucHJldmVudERlZmF1bHQoKTsKCQkJCQkJc2lnbmF0dXJlUGFkc1tlLmdldEF0dHJpYnV0ZSgiY29udHJvbCIpXS5jbGVhcigpOwoJCQkJCX07CgkJCQl9KTsKCgkJCQljb25zdCBwaWNrZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbcm9sZT0icGhvdG8tcGlja2VyIl0nKTsKCgkJCQlpZiAocGlja2VycykgewoJCQkJCXBpY2tlcnMuZm9yRWFjaCgocGlja2VyKSA9PiB7CgkJCQkJCWNvbnN0IHByZXZpZXcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgKCQkJCQkJCXBpY2tlci5nZXRBdHRyaWJ1dGUoInByZXZpZXctaWQiKQoJCQkJCQkpOwoJCQkJCQlwaWNrZXIuYWRkRXZlbnRMaXN0ZW5lcigiY2hhbmdlIiwgZnVuY3Rpb24oZSkgewoJCQkJCQkJY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKCQkJCQkJCWNvbnN0IGZpbGUgPSBlLnRhcmdldC5maWxlc1swXTsKCQkJCQkJCXJlYWRlci5vbmxvYWQgPSAoZSkgPT4gewoJCQkJCQkJCXByZXZpZXcuc3JjID0gZS50YXJnZXQucmVzdWx0OwoJCQkJCQkJfTsKCgkJCQkJCQlyZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTsKCQkJCQkJfSk7CgkJCQkJfSk7CgkJCQl9CgoKCgkJCQlkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCIuaW5wdXRDdG4iKS5mb3JFYWNoKChjdG4pID0+IHsKCQkJCQljdG4uYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCAoKSA9PiB7CgkJCQkJCWN0bi5xdWVyeVNlbGVjdG9yKCJpbnB1dCxzZWxlY3QsIHRleHRhcmVhIikuZm9jdXMoKTsKCQkJCQl9KTsKCQkJCQljb25zdCBsYWJlbCA9IGN0bi5xdWVyeVNlbGVjdG9yKCJsYWJlbCIpOwoJCQkJCWNvbnN0IGlucHV0ID0gY3RuLnF1ZXJ5U2VsZWN0b3IoCgkJCQkJCSdpbnB1dFt0eXBlPSJ0ZXh0Il0saW5wdXRbdHlwZT0ibnVtYmVyIl0saW5wdXRbdHlwZT0iZW1haWwiXSx0ZXh0YXJlYScKCQkJCQkpOwoKCQkJCQkvLyBpZiAoaW5wdXQgJiYgaW5wdXQudGFnTmFtZSA9PT0gIlRFWFRBUkVBIikgewoJCQkJCS8vICAgY3RuLmNsYXNzTGlzdC5hZGQoInctMTAwIik7CgkJCQkJLy8gfQoKCQkJCQlpZiAobGFiZWwgJiYgaW5wdXQpIHsKCQkJCQkJY29uc3QgdHlwZSA9IGlucHV0LmdldEF0dHJpYnV0ZSgidHlwZSIpOwoJCQkJCQlpZiAodHlwZSA9PT0gImNoZWNrYm94IikgewoJCQkJCQkJbGFiZWwuY2xhc3NMaXN0LmFkZCgiZmxleCIpOwoJCQkJCQl9CgoJCQkJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoInBsYWNlaG9sZGVyIiwgbGFiZWwuaW5uZXJUZXh0KTsKCgkJCQkJCWlmIChpbnB1dC52YWx1ZSA9PT0gIiIpIGxhYmVsLmNsYXNzTGlzdC5hZGQoImhpZGRlbiIpOwoKCQkJCQkJaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigiZm9jdXMiLCBmdW5jdGlvbigpIHsKCQkJCQkJCWlucHV0LnJlbW92ZUF0dHJpYnV0ZSgicGxhY2Vob2xkZXIiKTsKCQkJCQkJCWxhYmVsLmNsYXNzTGlzdC5yZW1vdmUoImhpZGRlbiIpOwoJCQkJCQl9KTsKCQkJCQkJaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigiYmx1ciIsIGZ1bmN0aW9uKCkgewoJCQkJCQkJaWYgKGlucHV0LnZhbHVlID09ICIiKSBsYWJlbC5jbGFzc0xpc3QuYWRkKCJoaWRkZW4iKTsKCQkJCQkJCWlucHV0LnNldEF0dHJpYnV0ZSgicGxhY2Vob2xkZXIiLCBsYWJlbC5pbm5lclRleHQpOwoJCQkJCQl9KTsKCQkJCQl9CgkJCQl9KTsKCgkJCQlmdW5jdGlvbiBzZW5kT1RQKCkgewoJCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZW5kaW5nX290cCcpLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGUnKTsKCQkJCQljb25zdCBwaG9uZU51bTEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKAoJCQkJCQkiI0ExX0luZGl2aWR1YWxfTW9iaWxlXzEiCgkJCQkJKS52YWx1ZTsKCQkJCQljb25zdCBwaG9uZU51bTIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKAoJCQkJCQkiI0ExX0luZGl2aWR1YWxfQWRkaXRpb25hbE1vYmlsZSIKCQkJCQkpLnZhbHVlOwoKCQkJCQlpZiAocGhvbmVOdW0xIHx8IHBob25lTnVtMikgewoJCQkJCQlwb3BPVFBFbGUuY2xhc3NMaXN0LmFkZCgic2hvdy1tb2RhbCIpOwoJCQkJCQlsZXQgZmluYWxQaG9uZSA9IHBob25lTnVtMSA/IHBob25lTnVtMSA6IHBob25lTnVtMjsKCQkJCQkJLy8gZmluYWxQaG9uZSA9ICI5MSIgKyBmaW5hbFBob25lOwoJCQkJCQlmaW5hbFBob25lID0gJysnICsgaXRpLmdldFNlbGVjdGVkQ291bnRyeURhdGEoKS5kaWFsQ29kZSArIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwaG9uZV93aXRoX2NvdW50cnljb2RlIikudmFsdWU7CgkJCQkJCWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNteU9UUFBvcHVwIC5vdHBfcGhvbmUiKS5pbm5lclRleHQgPQoJCQkJCQkJZmluYWxQaG9uZTsKCgkJCQkJCWNvbnN0IG90cEhlYWRlciA9IG5ldyBIZWFkZXJzKCk7CgkJCQkJCW90cEhlYWRlci5hcHBlbmQoIkNvbnRlbnQtVHlwZSIsICJhcHBsaWNhdGlvbi9qc29uIik7CgoJCQkJCQljb25zdCB1cmxzID0gbmV3IFVSTCh3aW5kb3cubG9jYXRpb24uaHJlZik7CgkJCQkJCWNvbnN0IHNlYXJjaFBhcmFtcyA9IHVybHMuc2VhcmNoUGFyYW1zOwoKCQkJCQkJY29uc3QgY3VzSWQgPSBzZWFyY2hQYXJhbXMuZ2V0KCJjdXN0b21lcmlkIik7CgkJCQkJCWNvbnN0IG9wcnRJZCA9IHNlYXJjaFBhcmFtcy5nZXQoIm9wcG9ydHVuaXR5SWQiKTsKCQkJCQkJY29uc3QgcHJpbWFyeUVtYWlsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIkExX0luZGl2aWR1YWxfRW1haWxfMSIpLnZhbHVlOwoJCQkJCQljb25zdCBwcm9OYW1lID0gc2NoZW1hWyJmaXJzdC1wYWdlIl1bInByb2plY3ROYW1lIl07CgkJCQkJCS8vbGV0IG15ZXh1cmwgPSBgP21vYmlsZW5vPSR7ZmluYWxQaG9uZX0mYWN0aW9uPWdlbmVyYXRlb3RwJmN1c3RvbWVyaWQ9JHtjdXNJZH0mb3Bwb3J0dW5pdHlpZD0ke29wcnRJZH1gOwoJCQkJCQlsZXQgbXlleHVybCA9IGA/bW9iaWxlbm89JHtmaW5hbFBob25lfSZhY3Rpb249Z2VuZXJhdGVvdHAmY3VzdG9tZXJpZD0ke2N1c0lkfSZvcHBvcnR1bml0eWlkPSR7b3BydElkfSZlbWFpbD0ke3ByaW1hcnlFbWFpbH0mcHJvamVjdE5hbWU9JHtwcm9OYW1lfWA7CgkJCQkJCWxldCBteVVSTCA9IG90cFZlcmlmeUFQSSArIG15ZXh1cmw7CgoJCQkJCQljb25zdCByZXF1ZXN0T3B0aW9ucyA9IHsKCQkJCQkJCW1ldGhvZDogIlBPU1QiLAoJCQkJCQkJaGVhZGVyczogb3RwSGVhZGVyLAoJCQkJCQkJYm9keToge30sCgkJCQkJCQlyZWRpcmVjdDogImZvbGxvdyIsCgkJCQkJCX07CgoJCQkJCQlmZXRjaChteVVSTCwgcmVxdWVzdE9wdGlvbnMpCgkJCQkJCQkudGhlbihyZXMgPT4gewoJCQkJCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZW5kaW5nX290cCcpLmNsYXNzTGlzdC5hZGQoJ2hpZGUnKTsKCQkJCQkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VudF9vdHAnKS5jbGFzc0xpc3QucmVtb3ZlKCdoaWRlJyk7CgkJCQkJCQkJaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3RwX2Vycm9yJykuY2xhc3NMaXN0LmNvbnRhaW5zKCdoaWRlJykpCgkJCQkJCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvdHBfZXJyb3InKS5jbGFzc0xpc3QuYWRkKCdoaWRlJyk7CgkJCQkJCQl9KQoJCQkJCQkJLmNhdGNoKGVyciA9PiB7CgkJCQkJCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlbmRpbmdfb3RwJykuY2xhc3NMaXN0LmFkZCgnaGlkZScpOwoJCQkJCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvdHBfZXJyb3InKS5jbGFzc0xpc3QucmVtb3ZlKCdoaWRlJyk7CgkJCQkJCQkJaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VudF9vdHAnKS5jbGFzc0xpc3QuY29udGFpbnMoJ2hpZGUnKSkKCQkJCQkJCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlbnRfb3RwJykuY2xhc3NMaXN0LmFkZCgnaGlkZScpOwoJCQkJCQkJfSkKCQkJCQl9CgkJCQl9CgoJCQkJY29uc3QgcG9wT1RQRWxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm15T1RQUG9wdXAiKTsKCQkJCWNvbnN0IHZlcmlFbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiQ1BBR1JFRSIpOwoJCQkJY29uc3QgZ2V0T1RQID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dldF9vdHAnKTsKCQkJCXZhciBzZWxlY3RlZENvdW50cnlDb2RlID0gJzkxJzsKCgoJCQkJLy8gSW5pdGlhbGl6ZSB0aGUgaW50bFRlbElucHV0IHBsdWdpbiBvbiB0aGUgcGhvbmUgaW5wdXQgZmllbGQKCQkJCXZhciBwaG9uZUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInBob25lX3dpdGhfY291bnRyeWNvZGUiKTsKCQkJCXZhciBpdGkgPSB3aW5kb3cuaW50bFRlbElucHV0KHBob25lSW5wdXQsIHsKCQkJCQlzZXBhcmF0ZURpYWxDb2RlOiB0cnVlLAoJCQkJCWluaXRpYWxDb3VudHJ5OiAiaW4iLAoJCQkJfSk7CgoJCQkJLy8gVXBkYXRlIHRoZSBjb3VudHJ5IGNvZGUgd2hlbmV2ZXIgdGhlIHVzZXIgc2VsZWN0cyBhIGRpZmZlcmVudCBjb3VudHJ5CgkJCQlpdGkucHJvbWlzZS50aGVuKGZ1bmN0aW9uKCkgewoJCQkJCWl0aS5nZXRTZWxlY3RlZENvdW50cnlEYXRhUHJvbWlzZSgpLnRoZW4oZnVuY3Rpb24oY291bnRyeURhdGEpIHsKCQkJCQkJc2VsZWN0ZWRDb3VudHJ5Q29kZSA9IGNvdW50cnlEYXRhLmRpYWxDb2RlOwoJCQkJCQlwaG9uZUlucHV0LnZhbHVlID0gJysnICsgc2VsZWN0ZWRDb3VudHJ5Q29kZSArIGlucHV0UGhvbmVOdW1iZXI7CgkJCQkJfSk7CgkJCQl9KTsKCgkJCQl2ZXJpRWxlLm9uY2hhbmdlID0gZnVuY3Rpb24oZSkgewoJCQkJCWlmIChlLnRhcmdldC5jaGVja2VkKSB7CgoJCQkJCQkvLyBIaWRlIE9UUCBzZW50L2Vycm9yIGJsb2NrcyBpbml0aWFsbHkKCQkJCQkJaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VudF9vdHAnKS5jbGFzc0xpc3QuY29udGFpbnMoJ2hpZGUnKSkKCQkJCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZW50X290cCcpLmNsYXNzTGlzdC5hZGQoJ2hpZGUnKTsKCQkJCQkJaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3RwX2Vycm9yJykuY2xhc3NMaXN0LmNvbnRhaW5zKCdoaWRlJykpCgkJCQkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3RwX2Vycm9yJykuY2xhc3NMaXN0LmFkZCgnaGlkZScpOwoKCQkJCQkJLy8gU2V0IHRoZSBpbml0aWFsIGNvdW50cnkgY29kZQoJCQkJCQlzZWxlY3RlZENvdW50cnlDb2RlID0gaXRpLmdldFNlbGVjdGVkQ291bnRyeURhdGEoKS5kaWFsQ29kZTsKCQkJCQkJY29uc3QgaW5wdXRQaG9uZU51bWJlcgoJCQkJCQkJPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKAoJCQkJCQkJCSIjQTFfSW5kaXZpZHVhbF9Nb2JpbGVfMSIKCQkJCQkJCSkudmFsdWUgfHwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigKCQkJCQkJCQkiI0ExX0luZGl2aWR1YWxfQWRkaXRpb25hbE1vYmlsZSIKCQkJCQkJCSkudmFsdWUKCQkJCQkJcGhvbmVJbnB1dC52YWx1ZSA9IGlucHV0UGhvbmVOdW1iZXI7CgkJCQkJCXBvcE9UUEVsZS5jbGFzc0xpc3QuYWRkKCJzaG93LW1vZGFsIik7CgkJCQkJfQoJCQkJfTsKCgkJCQlnZXRPVFAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHsKCQkJCQlzZW5kT1RQKCk7CgkJCQl9KTsKCgkJCQlwb3BPVFBFbGUucXVlcnlTZWxlY3RvcigiLmNhbmNlbF9CdG4iKS5vbmNsaWNrID0gZnVuY3Rpb24oKSB7CgkJCQkJdmVyaUVsZS5jaGVja2VkID0gZmFsc2U7CgkJCQkJcG9wT1RQRWxlLmNsYXNzTGlzdC5yZW1vdmUoInNob3ctbW9kYWwiKTsKCQkJCX07CgoJCQkJcG9wT1RQRWxlLnF1ZXJ5U2VsZWN0b3IoIi5vdHByZXNlbmRfQnRuIikub25jbGljayA9IGZ1bmN0aW9uKCkgewoJCQkJCXNlbmRPVFAoKTsKCQkJCX07CgoJCQkJcG9wT1RQRWxlLnF1ZXJ5U2VsZWN0b3IoIi52ZXJpZnlfQnRuIikub25jbGljayA9IGZ1bmN0aW9uKCkgewoJCQkJCWNvbnN0IHVybHMgPSBuZXcgVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmKTsKCQkJCQljb25zdCBzZWFyY2hQYXJhbXMgPSB1cmxzLnNlYXJjaFBhcmFtczsKCQkJCQljb25zdCBwaG9uZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoCgkJCQkJCSIjbXlPVFBQb3B1cCAub3RwX3Bob25lIgoJCQkJCSkuaW5uZXJUZXh0OwoKCQkJCQljb25zdCBvdHBWYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjbXlPVFBQb3B1cCAjdmVyaWZ5T3RwIikudmFsdWU7CgkJCQkJaWYgKG90cFZhbCkgewoJCQkJCQkvLyBpZiAodHJ1ZSkgewoJCQkJCQljb25zdCBjdXNJZCA9IHNlYXJjaFBhcmFtcy5nZXQoImN1c3RvbWVyaWQiKTsKCQkJCQkJY29uc3Qgb3BydElkID0gc2VhcmNoUGFyYW1zLmdldCgib3Bwb3J0dW5pdHlJZCIpOwoJCQkJCQlsZXQgbXlleHVybCA9IGA/bW9iaWxlbm89JHtwaG9uZX0mYWN0aW9uPXZlcmlmeW90cCZjdXN0b21lcmlkPSR7Y3VzSWR9Jm9wcG9ydHVuaXR5aWQ9JHtvcHJ0SWR9JmVudGVyZWRPdHA9JHtvdHBWYWx9YDsKCQkJCQkJbGV0IG15VVJMID0gb3RwVmVyaWZ5QVBJICsgbXlleHVybDsKCgkJCQkJCWNvbnN0IG90cEhlYWRlciA9IG5ldyBIZWFkZXJzKCk7CgkJCQkJCW90cEhlYWRlci5hcHBlbmQoIkNvbnRlbnQtVHlwZSIsICJhcHBsaWNhdGlvbi9qc29uIik7CgoJCQkJCQljb25zdCByZXF1ZXN0T3B0aW9ucyA9IHsKCQkJCQkJCW1ldGhvZDogIlBPU1QiLAoJCQkJCQkJaGVhZGVyczogb3RwSGVhZGVyLAoJCQkJCQkJYm9keToge30sCgkJCQkJCQlyZWRpcmVjdDogImZvbGxvdyIsCgkJCQkJCX07CgoJCQkJCQlmZXRjaChteVVSTCwgcmVxdWVzdE9wdGlvbnMpCgkJCQkJCQkudGhlbigocmVzcG9uc2UpID0+IHJlc3BvbnNlLnRleHQoKSkKCQkJCQkJCS50aGVuKChyZXN1bHQpID0+IHsKCQkJCQkJCQlpZiAocmVzdWx0ID09PSAidmVyaWZpZWQiKSB7CgkJCQkJCQkJCS8vaWYgKCkgewoKCQkJCQkJCQkJcG9wT1RQRWxlLnF1ZXJ5U2VsZWN0b3IoIi53YXJuaWctdGV4dCIpLmlubmVyVGV4dCA9ICIiOwoJCQkJCQkJCQlwb3BPVFBFbGUuY2xhc3NMaXN0LnJlbW92ZSgic2hvdy1tb2RhbCIpOwoJCQkJCQkJCQl2ZXJpRWxlLnNldEF0dHJpYnV0ZSgiZGlzYWJsZWQiLCB0cnVlKTsKCQkJCQkJCQkJdmVyaUVsZS5jbGFzc0xpc3QuYWRkKCJub3RfZWRpdGFibGUiKTsKCQkJCQkJCQkJYm9va2luZ1ZlcmlmaWVkID0gdHJ1ZTsKCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQkvLyBwb3BPVFBFbGUucXVlcnlTZWxlY3RvcigiLndhcm5pZy10ZXh0IikuaW5uZXJUZXh0ID0gIiI7CgkJCQkJCQkJCS8vIHBvcE9UUEVsZS5jbGFzc0xpc3QucmVtb3ZlKCJzaG93LW1vZGFsIik7CgkJCQkJCQkJCS8vIHZlcmlFbGUuc2V0QXR0cmlidXRlKCJkaXNhYmxlZCIsIHRydWUpOwoJCQkJCQkJCQkvLyB2ZXJpRWxlLmNsYXNzTGlzdC5hZGQoIm5vdF9lZGl0YWJsZSIpOwoJCQkJCQkJCQkvLyBib29raW5nVmVyaWZpZWQgPSB0cnVlOwoJCQkJCQkJCQlwb3BPVFBFbGUucXVlcnlTZWxlY3RvcigiLndhcm5pZy10ZXh0IikuaW5uZXJUZXh0ID0KCQkJCQkJCQkJCSJPVFAgaW52YWxpZCBvciBleHBpcmVkISI7CgkJCQkJCQkJfQoJCQkJCQkJfSk7CgkJCQkJfSBlbHNlIHsKCQkJCQkJcG9wT1RQRWxlLnF1ZXJ5U2VsZWN0b3IoIi53YXJuaWctdGV4dCIpLmlubmVyVGV4dCA9CgkJCQkJCQkiUGxlYXNlIGVudGVyIE9UUCI7CgkJCQkJfQoJCQkJfTsKCQkJfQoJCX0pCgkJLmNhdGNoKChlcnIpID0+IHsKCgkJCWNvbnNvbGUubG9nKGVycik7CgoJCX0pOwp9KSgpOwo=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPBody>
        <TcpPackets>
          <PacketInfo time="519316046" offset="0" length="334" />
          <PacketInfo time="519316046" offset="334" length="29516" />
        </TcpPackets>
      </HTTPResponse>
    </HTTPTask>
    <HTTPTask id="371" hostname="unpkg.com" path="https://unpkg.com/@bpmn-io/form-js@0.10.0/dist/form-viewer.umd.js" url="https://unpkg.com/@bpmn-io/form-js@0.10.0/dist/form-viewer.umd.js" ip="[2606:4700:8391:49:9639:5f5:6810:7aaf]" port="443" connectionId="30" origin="HTML" frame="1" startDateTime="2024-02-15T10:57:48.179+05:30" startTime="519321109" endTime="519321109">
      <HTTPRequest method="GET">
        <HTTPHeaders>
          <HTTPHeaderEntity name="sec-ch-ua" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ik5vdCBBKEJyYW5kIjt2PSI5OSIsICJHb29nbGUgQ2hyb21lIjt2PSIxMjEiLCAiQ2hyb21pdW0iO3Y9IjEyMSI=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="sec-ch-ua-mobile" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>PzA=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="User-Agent" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEyMS4wLjAuMCBTYWZhcmkvNTM3LjM2</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="sec-ch-ua-platform" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>IldpbmRvd3Mi</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ki8q</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Sec-Fetch-Site" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Y3Jvc3Mtc2l0ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Sec-Fetch-Mode" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bm8tY29ycw==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Sec-Fetch-Dest" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>c2NyaXB0</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Referer" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cHM6Ly9kZXYuYmx1ZWFsZ28uY29tLw==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Encoding" index="9">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Language" index="10">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZW4tVVMsZW47cT0wLjk=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Host" index="11">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>dW5wa2cuY29t</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Connection" index="12">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0VUIGh0dHBzOi8vdW5wa2cuY29tL0BicG1uLWlvL2Zvcm0tanNAMC4xMC4wL2Rpc3QvZm9ybS12aWV3ZXIudW1kLmpzIEhUVFAvMS4xDQpzZWMtY2gtdWE6ICJOb3QgQShCcmFuZCI7dj0iOTkiLCAiR29vZ2xlIENocm9tZSI7dj0iMTIxIiwgIkNocm9taXVtIjt2PSIxMjEiDQpzZWMtY2gtdWEtbW9iaWxlOiA/MA0KVXNlci1BZ2VudDogTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEyMS4wLjAuMCBTYWZhcmkvNTM3LjM2DQpzZWMtY2gtdWEtcGxhdGZvcm06ICJXaW5kb3dzIg0KQWNjZXB0OiAqLyoNClNlYy1GZXRjaC1TaXRlOiBjcm9zcy1zaXRlDQpTZWMtRmV0Y2gtTW9kZTogbm8tY29ycw0KU2VjLUZldGNoLURlc3Q6IHNjcmlwdA0KUmVmZXJlcjogaHR0cHM6Ly9kZXYuYmx1ZWFsZ28uY29tLw0KQWNjZXB0LUVuY29kaW5nOiBnemlwLCBkZWZsYXRlDQpBY2NlcHQtTGFuZ3VhZ2U6IGVuLVVTLGVuO3E9MC45DQpIb3N0OiB1bnBrZy5jb20NCkNvbm5lY3Rpb246IEtlZXAtQWxpdmUNCg0K</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
      </HTTPRequest>
      <HTTPResponse>
        <contentLenght>0</contentLenght>
        <HTTPHeaders>
          <HTTPHeaderEntity name="Date" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VGh1LCAxNSBGZWIgMjAyNCAwNToxODo1NyBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Type" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>YXBwbGljYXRpb24vamF2YXNjcmlwdDsgY2hhcnNldD11dGYtOA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Connection" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="access-control-allow-origin" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Kg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="content-encoding" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="cache-control" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>cHVibGljLCBtYXgtYWdlPTMxNTM2MDAw</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="last-modified" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>U2F0LCAyNiBPY3QgMTk4NSAwODoxNTowMCBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="etag" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ImMzMzBjLWFxZFUyTmFtYk9vbnJ2UGxnUExOQ2U2N1lzOCI=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="via" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MS4xIGZseS5pbw==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="fly-request-id" index="9">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MDFIUE5LODNWSjVZOVJIWVpFTUoxNDVUSlQtc2lu</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="CF-Cache-Status" index="10">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TUlTUw==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Vary" index="11">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>QWNjZXB0LUVuY29kaW5n</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Strict-Transport-Security" index="12">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bWF4LWFnZT0zMTUzNjAwMDsgaW5jbHVkZVN1YkRvbWFpbnM7IHByZWxvYWQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="X-Content-Type-Options" index="13">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bm9zbmlmZg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Server" index="14">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Y2xvdWRmbGFyZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="CF-RAY" index="15">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ODU1YjE3Yjg4ZGIzNWYzMy1TSU4=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SFRUUC8xLjEgMjAwIE9LDQpEYXRlOiBUaHUsIDE1IEZlYiAyMDI0IDA1OjE4OjU3IEdNVA0KQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0OyBjaGFyc2V0PXV0Zi04DQpDb25uZWN0aW9uOiBrZWVwLWFsaXZlDQphY2Nlc3MtY29udHJvbC1hbGxvdy1vcmlnaW46ICoNCmNvbnRlbnQtZW5jb2Rpbmc6IGd6aXANCmNhY2hlLWNvbnRyb2w6IHB1YmxpYywgbWF4LWFnZT0zMTUzNjAwMA0KbGFzdC1tb2RpZmllZDogU2F0LCAyNiBPY3QgMTk4NSAwODoxNTowMCBHTVQNCmV0YWc6ICJjMzMwYy1hcWRVMk5hbWJPb25ydlBsZ1BMTkNlNjdZczgiDQp2aWE6IDEuMSBmbHkuaW8NCmZseS1yZXF1ZXN0LWlkOiAwMUhQTks4M1ZKNVk5UkhZWkVNSjE0NVRKVC1zaW4NCkNGLUNhY2hlLVN0YXR1czogTUlTUw0KVmFyeTogQWNjZXB0LUVuY29kaW5nDQpTdHJpY3QtVHJhbnNwb3J0LVNlY3VyaXR5OiBtYXgtYWdlPTMxNTM2MDAwOyBpbmNsdWRlU3ViRG9tYWluczsgcHJlbG9hZA0KWC1Db250ZW50LVR5cGUtT3B0aW9uczogbm9zbmlmZg0KU2VydmVyOiBjbG91ZGZsYXJlDQpDRi1SQVk6IDg1NWIxN2I4OGRiMzVmMzMtU0lODQoNCg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPBody>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>KGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHsKICB0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgPyBmYWN0b3J5KGV4cG9ydHMpIDoKICB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoWydleHBvcnRzJ10sIGZhY3RvcnkpIDoKICAoZ2xvYmFsID0gdHlwZW9mIGdsb2JhbFRoaXMgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsVGhpcyA6IGdsb2JhbCB8fCBzZWxmLCBmYWN0b3J5KGdsb2JhbC5Gb3JtVmlld2VyID0ge30pKTsKfSh0aGlzLCAoZnVuY3Rpb24gKGV4cG9ydHMpIHsgJ3VzZSBzdHJpY3QnOwoKICBmdW5jdGlvbiBjcmVhdGVDb21tb25qc01vZHVsZShmbiwgbW9kdWxlKSB7CiAgCXJldHVybiBtb2R1bGUgPSB7IGV4cG9ydHM6IHt9IH0sIGZuKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMpLCBtb2R1bGUuZXhwb3J0czsKICB9CgogIHZhciBoYXRfMSA9IGNyZWF0ZUNvbW1vbmpzTW9kdWxlKGZ1bmN0aW9uIChtb2R1bGUpIHsKICB2YXIgaGF0ID0gbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoYml0cywgYmFzZSkgewogICAgICBpZiAoIWJhc2UpIGJhc2UgPSAxNjsKICAgICAgaWYgKGJpdHMgPT09IHVuZGVmaW5lZCkgYml0cyA9IDEyODsKICAgICAgaWYgKGJpdHMgPD0gMCkgcmV0dXJuICcwJzsKICAgICAgCiAgICAgIHZhciBkaWdpdHMgPSBNYXRoLmxvZyhNYXRoLnBvdygyLCBiaXRzKSkgLyBNYXRoLmxvZyhiYXNlKTsKICAgICAgZm9yICh2YXIgaSA9IDI7IGRpZ2l0cyA9PT0gSW5maW5pdHk7IGkgKj0gMikgewogICAgICAgICAgZGlnaXRzID0gTWF0aC5sb2coTWF0aC5wb3coMiwgYml0cyAvIGkpKSAvIE1hdGgubG9nKGJhc2UpICogaTsKICAgICAgfQogICAgICAKICAgICAgdmFyIHJlbSA9IGRpZ2l0cyAtIE1hdGguZmxvb3IoZGlnaXRzKTsKICAgICAgCiAgICAgIHZhciByZXMgPSAnJzsKICAgICAgCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgTWF0aC5mbG9vcihkaWdpdHMpOyBpKyspIHsKICAgICAgICAgIHZhciB4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogYmFzZSkudG9TdHJpbmcoYmFzZSk7CiAgICAgICAgICByZXMgPSB4ICsgcmVzOwogICAgICB9CiAgICAgIAogICAgICBpZiAocmVtKSB7CiAgICAgICAgICB2YXIgYiA9IE1hdGgucG93KGJhc2UsIHJlbSk7CiAgICAgICAgICB2YXIgeCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGIpLnRvU3RyaW5nKGJhc2UpOwogICAgICAgICAgcmVzID0geCArIHJlczsKICAgICAgfQogICAgICAKICAgICAgdmFyIHBhcnNlZCA9IHBhcnNlSW50KHJlcywgYmFzZSk7CiAgICAgIGlmIChwYXJzZWQgIT09IEluZmluaXR5ICYmIHBhcnNlZCA+PSBNYXRoLnBvdygyLCBiaXRzKSkgewogICAgICAgICAgcmV0dXJuIGhhdChiaXRzLCBiYXNlKQogICAgICB9CiAgICAgIGVsc2UgcmV0dXJuIHJlczsKICB9OwoKICBoYXQucmFjayA9IGZ1bmN0aW9uIChiaXRzLCBiYXNlLCBleHBhbmRCeSkgewogICAgICB2YXIgZm4gPSBmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgdmFyIGl0ZXJzID0gMDsKICAgICAgICAgIGRvIHsKICAgICAgICAgICAgICBpZiAoaXRlcnMgKysgPiAxMCkgewogICAgICAgICAgICAgICAgICBpZiAoZXhwYW5kQnkpIGJpdHMgKz0gZXhwYW5kQnk7CiAgICAgICAgICAgICAgICAgIGVsc2UgdGhyb3cgbmV3IEVycm9yKCd0b28gbWFueSBJRCBjb2xsaXNpb25zLCB1c2UgbW9yZSBiaXRzJykKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgdmFyIGlkID0gaGF0KGJpdHMsIGJhc2UpOwogICAgICAgICAgfSB3aGlsZSAoT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoaGF0cywgaWQpKTsKICAgICAgICAgIAogICAgICAgICAgaGF0c1tpZF0gPSBkYXRhOwogICAgICAgICAgcmV0dXJuIGlkOwogICAgICB9OwogICAgICB2YXIgaGF0cyA9IGZuLmhhdHMgPSB7fTsKICAgICAgCiAgICAgIGZuLmdldCA9IGZ1bmN0aW9uIChpZCkgewogICAgICAgICAgcmV0dXJuIGZuLmhhdHNbaWRdOwogICAgICB9OwogICAgICAKICAgICAgZm4uc2V0ID0gZnVuY3Rpb24gKGlkLCB2YWx1ZSkgewogICAgICAgICAgZm4uaGF0c1tpZF0gPSB2YWx1ZTsKICAgICAgICAgIHJldHVybiBmbjsKICAgICAgfTsKICAgICAgCiAgICAgIGZuLmJpdHMgPSBiaXRzIHx8IDEyODsKICAgICAgZm4uYmFzZSA9IGJhc2UgfHwgMTY7CiAgICAgIHJldHVybiBmbjsKICB9OwogIH0pOwoKICAvKioKICAgKiBDcmVhdGUgYSBuZXcgaWQgZ2VuZXJhdG9yIC8gY2FjaGUgaW5zdGFuY2UuCiAgICoKICAgKiBZb3UgbWF5IG9wdGlvbmFsbHkgcHJvdmlkZSBhIHNlZWQgdGhhdCBpcyB1c2VkIGludGVybmFsbHkuCiAgICoKICAgKiBAcGFyYW0ge1NlZWR9IHNlZWQKICAgKi8KCiAgZnVuY3Rpb24gSWRzKHNlZWQpIHsKICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBJZHMpKSB7CiAgICAgIHJldHVybiBuZXcgSWRzKHNlZWQpOwogICAgfQoKICAgIHNlZWQgPSBzZWVkIHx8IFsxMjgsIDM2LCAxXTsKICAgIHRoaXMuX3NlZWQgPSBzZWVkLmxlbmd0aCA/IGhhdF8xLnJhY2soc2VlZFswXSwgc2VlZFsxXSwgc2VlZFsyXSkgOiBzZWVkOwogIH0KICAvKioKICAgKiBHZW5lcmF0ZSBhIG5leHQgaWQuCiAgICoKICAgKiBAcGFyYW0ge09iamVjdH0gW2VsZW1lbnRdIGVsZW1lbnQgdG8gYmluZCB0aGUgaWQgdG8KICAgKgogICAqIEByZXR1cm4ge1N0cmluZ30gaWQKICAgKi8KCiAgSWRzLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgIHJldHVybiB0aGlzLl9zZWVkKGVsZW1lbnQgfHwgdHJ1ZSk7CiAgfTsKICAvKioKICAgKiBHZW5lcmF0ZSBhIG5leHQgaWQgd2l0aCBhIGdpdmVuIHByZWZpeC4KICAgKgogICAqIEBwYXJhbSB7T2JqZWN0fSBbZWxlbWVudF0gZWxlbWVudCB0byBiaW5kIHRoZSBpZCB0bwogICAqCiAgICogQHJldHVybiB7U3RyaW5nfSBpZAogICAqLwoKCiAgSWRzLnByb3RvdHlwZS5uZXh0UHJlZml4ZWQgPSBmdW5jdGlvbiAocHJlZml4LCBlbGVtZW50KSB7CiAgICB2YXIgaWQ7CgogICAgZG8gewogICAgICBpZCA9IHByZWZpeCArIHRoaXMubmV4dCh0cnVlKTsKICAgIH0gd2hpbGUgKHRoaXMuYXNzaWduZWQoaWQpKTsgLy8gY2xhaW0ge3ByZWZpeH17cmFuZG9tfQoKCiAgICB0aGlzLmNsYWltKGlkLCBlbGVtZW50KTsgLy8gcmV0dXJuCgogICAgcmV0dXJuIGlkOwogIH07CiAgLyoqCiAgICogTWFudWFsbHkgY2xhaW0gYW4gZXhpc3RpbmcgaWQuCiAgICoKICAgKiBAcGFyYW0ge1N0cmluZ30gaWQKICAgKiBAcGFyYW0ge1N0cmluZ30gW2VsZW1lbnRdIGVsZW1lbnQgdGhlIGlkIGlzIGNsYWltZWQgYnkKICAgKi8KCgogIElkcy5wcm90b3R5cGUuY2xhaW0gPSBmdW5jdGlvbiAoaWQsIGVsZW1lbnQpIHsKICAgIHRoaXMuX3NlZWQuc2V0KGlkLCBlbGVtZW50IHx8IHRydWUpOwogIH07CiAgLyoqCiAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiBpZCBoYXMgYWxyZWFkeSBiZWVuIGFzc2lnbmVkLgogICAqCiAgICogQHBhcmFtICB7U3RyaW5nfSBpZAogICAqIEByZXR1cm4ge0Jvb2xlYW59CiAgICovCgoKICBJZHMucHJvdG90eXBlLmFzc2lnbmVkID0gZnVuY3Rpb24gKGlkKSB7CiAgICByZXR1cm4gdGhpcy5fc2VlZC5nZXQoaWQpIHx8IGZhbHNlOwogIH07CiAgLyoqCiAgICogVW5jbGFpbSBhbiBpZC4KICAgKgogICAqIEBwYXJhbSAge1N0cmluZ30gaWQgdGhlIGlkIHRvIHVuY2xhaW0KICAgKi8KCgogIElkcy5wcm90b3R5cGUudW5jbGFpbSA9IGZ1bmN0aW9uIChpZCkgewogICAgZGVsZXRlIHRoaXMuX3NlZWQuaGF0c1tpZF07CiAgfTsKICAvKioKICAgKiBDbGVhciBhbGwgY2xhaW1lZCBpZHMuCiAgICovCgoKICBJZHMucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkgewogICAgdmFyIGhhdHMgPSB0aGlzLl9zZWVkLmhhdHMsCiAgICAgICAgaWQ7CgogICAgZm9yIChpZCBpbiBoYXRzKSB7CiAgICAgIHRoaXMudW5jbGFpbShpZCk7CiAgICB9CiAgfTsKCiAgLyoqCiAgICogRmxhdHRlbiBhcnJheSwgb25lIGxldmVsIGRlZXAuCiAgICoKICAgKiBAcGFyYW0ge0FycmF5PD8+fSBhcnIKICAgKgogICAqIEByZXR1cm4ge0FycmF5PD8+fQogICAqLwoKICBjb25zdCBuYXRpdmVUb1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7CiAgY29uc3QgbmF0aXZlSGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5OwoKICBmdW5jdGlvbiBpc1VuZGVmaW5lZCQxKG9iaikgewogICAgcmV0dXJuIG9iaiA9PT0gdW5kZWZpbmVkOwogIH0KCiAgZnVuY3Rpb24gaXNEZWZpbmVkKG9iaikgewogICAgcmV0dXJuIG9iaiAhPT0gdW5kZWZpbmVkOwogIH0KCiAgZnVuY3Rpb24gaXNOaWwob2JqKSB7CiAgICByZXR1cm4gb2JqID09IG51bGw7CiAgfQoKICBmdW5jdGlvbiBpc0FycmF5JDIob2JqKSB7CiAgICByZXR1cm4gbmF0aXZlVG9TdHJpbmcuY2FsbChvYmopID09PSAnW29iamVjdCBBcnJheV0nOwogIH0KCiAgZnVuY3Rpb24gaXNPYmplY3Qob2JqKSB7CiAgICByZXR1cm4gbmF0aXZlVG9TdHJpbmcuY2FsbChvYmopID09PSAnW29iamVjdCBPYmplY3RdJzsKICB9CgogIGZ1bmN0aW9uIGlzTnVtYmVyJDIob2JqKSB7CiAgICByZXR1cm4gbmF0aXZlVG9TdHJpbmcuY2FsbChvYmopID09PSAnW29iamVjdCBOdW1iZXJdJzsKICB9CgogIGZ1bmN0aW9uIGlzRnVuY3Rpb24ob2JqKSB7CiAgICBjb25zdCB0YWcgPSBuYXRpdmVUb1N0cmluZy5jYWxsKG9iaik7CgogICAgcmV0dXJuICgKICAgICAgdGFnID09PSAnW29iamVjdCBGdW5jdGlvbl0nIHx8CiAgICAgIHRhZyA9PT0gJ1tvYmplY3QgQXN5bmNGdW5jdGlvbl0nIHx8CiAgICAgIHRhZyA9PT0gJ1tvYmplY3QgR2VuZXJhdG9yRnVuY3Rpb25dJyB8fAogICAgICB0YWcgPT09ICdbb2JqZWN0IEFzeW5jR2VuZXJhdG9yRnVuY3Rpb25dJyB8fAogICAgICB0YWcgPT09ICdbb2JqZWN0IFByb3h5XScKICAgICk7CiAgfQoKICBmdW5jdGlvbiBpc1N0cmluZyQyKG9iaikgewogICAgcmV0dXJuIG5hdGl2ZVRvU3RyaW5nLmNhbGwob2JqKSA9PT0gJ1tvYmplY3QgU3RyaW5nXSc7CiAgfQoKICAvKioKICAgKiBSZXR1cm4gdHJ1ZSwgaWYgdGFyZ2V0IG93bnMgYSBwcm9wZXJ0eSB3aXRoIHRoZSBnaXZlbiBrZXkuCiAgICoKICAgKiBAcGFyYW0ge09iamVjdH0gdGFyZ2V0CiAgICogQHBhcmFtIHtTdHJpbmd9IGtleQogICAqCiAgICogQHJldHVybiB7Qm9vbGVhbn0KICAgKi8KICBmdW5jdGlvbiBoYXModGFyZ2V0LCBrZXkpIHsKICAgIHJldHVybiBuYXRpdmVIYXNPd25Qcm9wZXJ0eS5jYWxsKHRhcmdldCwga2V5KTsKICB9CgoKICAvKioKICAgKiBJdGVyYXRlIG92ZXIgY29sbGVjdGlvbjsgcmV0dXJuaW5nIHNvbWV0aGluZwogICAqIChub24tdW5kZWZpbmVkKSB3aWxsIHN0b3AgaXRlcmF0aW9uLgogICAqCiAgICogQHBhcmFtICB7QXJyYXl8T2JqZWN0fSBjb2xsZWN0aW9uCiAgICogQHBhcmFtICB7RnVuY3Rpb259IGl0ZXJhdG9yCiAgICoKICAgKiBAcmV0dXJuIHtPYmplY3R9IHJldHVybiByZXN1bHQgdGhhdCBzdG9wcGVkIHRoZSBpdGVyYXRpb24KICAgKi8KICBmdW5jdGlvbiBmb3JFYWNoKGNvbGxlY3Rpb24sIGl0ZXJhdG9yKSB7CgogICAgbGV0IHZhbCwKICAgICAgICByZXN1bHQ7CgogICAgaWYgKGlzVW5kZWZpbmVkJDEoY29sbGVjdGlvbikpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIGNvbnN0IGNvbnZlcnRLZXkgPSBpc0FycmF5JDIoY29sbGVjdGlvbikgPyB0b051bSA6IGlkZW50aXR5OwoKICAgIGZvciAobGV0IGtleSBpbiBjb2xsZWN0aW9uKSB7CgogICAgICBpZiAoaGFzKGNvbGxlY3Rpb24sIGtleSkpIHsKICAgICAgICB2YWwgPSBjb2xsZWN0aW9uW2tleV07CgogICAgICAgIHJlc3VsdCA9IGl0ZXJhdG9yKHZhbCwgY29udmVydEtleShrZXkpKTsKCiAgICAgICAgaWYgKHJlc3VsdCA9PT0gZmFsc2UpIHsKICAgICAgICAgIHJldHVybiB2YWw7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQoKCiAgZnVuY3Rpb24gaWRlbnRpdHkoYXJnKSB7CiAgICByZXR1cm4gYXJnOwogIH0KCiAgZnVuY3Rpb24gdG9OdW0oYXJnKSB7CiAgICByZXR1cm4gTnVtYmVyKGFyZyk7CiAgfQoKICAvKioKICAgKiBCaW5kIGZ1bmN0aW9uIGFnYWluc3QgdGFyZ2V0IDx0aGlzPi4KICAgKgogICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBmbgogICAqIEBwYXJhbSAge09iamVjdH0gICB0YXJnZXQKICAgKgogICAqIEByZXR1cm4ge0Z1bmN0aW9ufSBib3VuZCBmdW5jdGlvbgogICAqLwogIGZ1bmN0aW9uIGJpbmQoZm4sIHRhcmdldCkgewogICAgcmV0dXJuIGZuLmJpbmQodGFyZ2V0KTsKICB9CgogIC8qKgogICAqIENvbnZlbmllbmNlIHdyYXBwZXIgZm9yIGBPYmplY3QuYXNzaWduYC4KICAgKgogICAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXQKICAgKiBAcGFyYW0gey4uLk9iamVjdH0gb3RoZXJzCiAgICoKICAgKiBAcmV0dXJuIHtPYmplY3R9IHRoZSB0YXJnZXQKICAgKi8KICBmdW5jdGlvbiBhc3NpZ24odGFyZ2V0LCAuLi5vdGhlcnMpIHsKICAgIHJldHVybiBPYmplY3QuYXNzaWduKHRhcmdldCwgLi4ub3RoZXJzKTsKICB9CgogIC8qKgogICAqIFNldHMgYSBuZXN0ZWQgcHJvcGVydHkgb2YgYSBnaXZlbiBvYmplY3QgdG8gdGhlIHNwZWNpZmllZCB2YWx1ZS4KICAgKgogICAqIFRoaXMgbXV0YXRlcyB0aGUgb2JqZWN0IGFuZCByZXR1cm5zIGl0LgogICAqCiAgICogQHBhcmFtIHtPYmplY3R9IHRhcmdldCBUaGUgdGFyZ2V0IG9mIHRoZSBzZXQgb3BlcmF0aW9uLgogICAqIEBwYXJhbSB7KHN0cmluZ3xudW1iZXIpW119IHBhdGggVGhlIHBhdGggdG8gdGhlIG5lc3RlZCB2YWx1ZS4KICAgKiBAcGFyYW0ge2FueX0gdmFsdWUgVGhlIHZhbHVlIHRvIHNldC4KICAgKi8KICBmdW5jdGlvbiBzZXQodGFyZ2V0LCBwYXRoLCB2YWx1ZSkgewoKICAgIGxldCBjdXJyZW50VGFyZ2V0ID0gdGFyZ2V0OwoKICAgIGZvckVhY2gocGF0aCwgZnVuY3Rpb24oa2V5LCBpZHgpIHsKCiAgICAgIGlmICh0eXBlb2Yga2V5ICE9PSAnbnVtYmVyJyAmJiB0eXBlb2Yga2V5ICE9PSAnc3RyaW5nJykgewogICAgICAgIHRocm93IG5ldyBFcnJvcignaWxsZWdhbCBrZXkgdHlwZTogJyArIHR5cGVvZiBrZXkgKyAnLiBLZXkgc2hvdWxkIGJlIG9mIHR5cGUgbnVtYmVyIG9yIHN0cmluZy4nKTsKICAgICAgfQoKICAgICAgaWYgKGtleSA9PT0gJ2NvbnN0cnVjdG9yJykgewogICAgICAgIHRocm93IG5ldyBFcnJvcignaWxsZWdhbCBrZXk6IGNvbnN0cnVjdG9yJyk7CiAgICAgIH0KCiAgICAgIGlmIChrZXkgPT09ICdfX3Byb3RvX18nKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdpbGxlZ2FsIGtleTogX19wcm90b19fJyk7CiAgICAgIH0KCiAgICAgIGxldCBuZXh0S2V5ID0gcGF0aFtpZHggKyAxXTsKICAgICAgbGV0IG5leHRUYXJnZXQgPSBjdXJyZW50VGFyZ2V0W2tleV07CgogICAgICBpZiAoaXNEZWZpbmVkKG5leHRLZXkpICYmIGlzTmlsKG5leHRUYXJnZXQpKSB7CiAgICAgICAgbmV4dFRhcmdldCA9IGN1cnJlbnRUYXJnZXRba2V5XSA9IGlzTmFOKCtuZXh0S2V5KSA/IHt9IDogW107CiAgICAgIH0KCiAgICAgIGlmIChpc1VuZGVmaW5lZCQxKG5leHRLZXkpKSB7CiAgICAgICAgaWYgKGlzVW5kZWZpbmVkJDEodmFsdWUpKSB7CiAgICAgICAgICBkZWxldGUgY3VycmVudFRhcmdldFtrZXldOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjdXJyZW50VGFyZ2V0W2tleV0gPSB2YWx1ZTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY3VycmVudFRhcmdldCA9IG5leHRUYXJnZXQ7CiAgICAgIH0KICAgIH0pOwoKICAgIHJldHVybiB0YXJnZXQ7CiAgfQoKCiAgLyoqCiAgICogR2V0cyBhIG5lc3RlZCBwcm9wZXJ0eSBvZiBhIGdpdmVuIG9iamVjdC4KICAgKgogICAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXQgVGhlIHRhcmdldCBvZiB0aGUgZ2V0IG9wZXJhdGlvbi4KICAgKiBAcGFyYW0geyhzdHJpbmd8bnVtYmVyKVtdfSBwYXRoIFRoZSBwYXRoIHRvIHRoZSBuZXN0ZWQgdmFsdWUuCiAgICogQHBhcmFtIHthbnl9IFtkZWZhdWx0VmFsdWVdIFRoZSB2YWx1ZSB0byByZXR1cm4gaWYgbm8gdmFsdWUgZXhpc3RzLgogICAqLwogIGZ1bmN0aW9uIGdldCh0YXJnZXQsIHBhdGgsIGRlZmF1bHRWYWx1ZSkgewoKICAgIGxldCBjdXJyZW50VGFyZ2V0ID0gdGFyZ2V0OwoKICAgIGZvckVhY2gocGF0aCwgZnVuY3Rpb24oa2V5KSB7CgogICAgICAvLyBhY2Nlc3NpbmcgbmlsIHByb3BlcnR5IHlpZWxkcyA8dW5kZWZpbmVkPgogICAgICBpZiAoaXNOaWwoY3VycmVudFRhcmdldCkpIHsKICAgICAgICBjdXJyZW50VGFyZ2V0ID0gdW5kZWZpbmVkOwoKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIGN1cnJlbnRUYXJnZXQgPSBjdXJyZW50VGFyZ2V0W2tleV07CiAgICB9KTsKCiAgICByZXR1cm4gaXNVbmRlZmluZWQkMShjdXJyZW50VGFyZ2V0KSA/IGRlZmF1bHRWYWx1ZSA6IGN1cnJlbnRUYXJnZXQ7CiAgfQoKICAvLyB0aGVzZSBhcmVuJ3QgcmVhbGx5IHByaXZhdGUsIGJ1dCBub3IgYXJlIHRoZXkgcmVhbGx5IHVzZWZ1bCB0byBkb2N1bWVudAoKICAvKioKICAgKiBAcHJpdmF0ZQogICAqLwogIGNsYXNzIEx1eG9uRXJyb3IgZXh0ZW5kcyBFcnJvciB7fQoKICAvKioKICAgKiBAcHJpdmF0ZQogICAqLwogIGNsYXNzIEludmFsaWREYXRlVGltZUVycm9yIGV4dGVuZHMgTHV4b25FcnJvciB7CiAgICBjb25zdHJ1Y3RvcihyZWFzb24pIHsKICAgICAgc3VwZXIoYEludmFsaWQgRGF0ZVRpbWU6ICR7cmVhc29uLnRvTWVzc2FnZSgpfWApOwogICAgfQogIH0KCiAgLyoqCiAgICogQHByaXZhdGUKICAgKi8KICBjbGFzcyBJbnZhbGlkSW50ZXJ2YWxFcnJvciBleHRlbmRzIEx1eG9uRXJyb3IgewogICAgY29uc3RydWN0b3IocmVhc29uKSB7CiAgICAgIHN1cGVyKGBJbnZhbGlkIEludGVydmFsOiAke3JlYXNvbi50b01lc3NhZ2UoKX1gKTsKICAgIH0KICB9CgogIC8qKgogICAqIEBwcml2YXRlCiAgICovCiAgY2xhc3MgSW52YWxpZER1cmF0aW9uRXJyb3IgZXh0ZW5kcyBMdXhvbkVycm9yIHsKICAgIGNvbnN0cnVjdG9yKHJlYXNvbikgewogICAgICBzdXBlcihgSW52YWxpZCBEdXJhdGlvbjogJHtyZWFzb24udG9NZXNzYWdlKCl9YCk7CiAgICB9CiAgfQoKICAvKioKICAgKiBAcHJpdmF0ZQogICAqLwogIGNsYXNzIENvbmZsaWN0aW5nU3BlY2lmaWNhdGlvbkVycm9yIGV4dGVuZHMgTHV4b25FcnJvciB7fQoKICAvKioKICAgKiBAcHJpdmF0ZQogICAqLwogIGNsYXNzIEludmFsaWRVbml0RXJyb3IgZXh0ZW5kcyBMdXhvbkVycm9yIHsKICAgIGNvbnN0cnVjdG9yKHVuaXQpIHsKICAgICAgc3VwZXIoYEludmFsaWQgdW5pdCAke3VuaXR9YCk7CiAgICB9CiAgfQoKICAvKioKICAgKiBAcHJpdmF0ZQogICAqLwogIGNsYXNzIEludmFsaWRBcmd1bWVudEVycm9yIGV4dGVuZHMgTHV4b25FcnJvciB7fQoKICAvKioKICAgKiBAcHJpdmF0ZQogICAqLwogIGNsYXNzIFpvbmVJc0Fic3RyYWN0RXJyb3IgZXh0ZW5kcyBMdXhvbkVycm9yIHsKICAgIGNvbnN0cnVjdG9yKCkgewogICAgICBzdXBlcigiWm9uZSBpcyBhbiBhYnN0cmFjdCBjbGFzcyIpOwogICAgfQogIH0KCiAgLyoqCiAgICogQHByaXZhdGUKICAgKi8KCiAgY29uc3QgbiQzID0gIm51bWVyaWMiLAogICAgcyQyID0gInNob3J0IiwKICAgIGwkMyA9ICJsb25nIjsKCiAgY29uc3QgREFURV9TSE9SVCA9IHsKICAgIHllYXI6IG4kMywKICAgIG1vbnRoOiBuJDMsCiAgICBkYXk6IG4kMywKICB9OwoKICBjb25zdCBEQVRFX01FRCA9IHsKICAgIHllYXI6IG4kMywKICAgIG1vbnRoOiBzJDIsCiAgICBkYXk6IG4kMywKICB9OwoKICBjb25zdCBEQVRFX01FRF9XSVRIX1dFRUtEQVkgPSB7CiAgICB5ZWFyOiBuJDMsCiAgICBtb250aDogcyQyLAogICAgZGF5OiBuJDMsCiAgICB3ZWVrZGF5OiBzJDIsCiAgfTsKCiAgY29uc3QgREFURV9GVUxMID0gewogICAgeWVhcjogbiQzLAogICAgbW9udGg6IGwkMywKICAgIGRheTogbiQzLAogIH07CgogIGNvbnN0IERBVEVfSFVHRSA9IHsKICAgIHllYXI6IG4kMywKICAgIG1vbnRoOiBsJDMsCiAgICBkYXk6IG4kMywKICAgIHdlZWtkYXk6IGwkMywKICB9OwoKICBjb25zdCBUSU1FX1NJTVBMRSA9IHsKICAgIGhvdXI6IG4kMywKICAgIG1pbnV0ZTogbiQzLAogIH07CgogIGNvbnN0IFRJTUVfV0lUSF9TRUNPTkRTID0gewogICAgaG91cjogbiQzLAogICAgbWludXRlOiBuJDMsCiAgICBzZWNvbmQ6IG4kMywKICB9OwoKICBjb25zdCBUSU1FX1dJVEhfU0hPUlRfT0ZGU0VUID0gewogICAgaG91cjogbiQzLAogICAgbWludXRlOiBuJDMsCiAgICBzZWNvbmQ6IG4kMywKICAgIHRpbWVab25lTmFtZTogcyQyLAogIH07CgogIGNvbnN0IFRJTUVfV0lUSF9MT05HX09GRlNFVCA9IHsKICAgIGhvdXI6IG4kMywKICAgIG1pbnV0ZTogbiQzLAogICAgc2Vjb25kOiBuJDMsCiAgICB0aW1lWm9uZU5hbWU6IGwkMywKICB9OwoKICBjb25zdCBUSU1FXzI0X1NJTVBMRSA9IHsKICAgIGhvdXI6IG4kMywKICAgIG1pbnV0ZTogbiQzLAogICAgaG91ckN5Y2xlOiAiaDIzIiwKICB9OwoKICBjb25zdCBUSU1FXzI0X1dJVEhfU0VDT05EUyA9IHsKICAgIGhvdXI6IG4kMywKICAgIG1pbnV0ZTogbiQzLAogICAgc2Vjb25kOiBuJDMsCiAgICBob3VyQ3ljbGU6ICJoMjMiLAogIH07CgogIGNvbnN0IFRJTUVfMjRfV0lUSF9TSE9SVF9PRkZTRVQgPSB7CiAgICBob3VyOiBuJDMsCiAgICBtaW51dGU6IG4kMywKICAgIHNlY29uZDogbiQzLAogICAgaG91ckN5Y2xlOiAiaDIzIiwKICAgIHRpbWVab25lTmFtZTogcyQyLAogIH07CgogIGNvbnN0IFRJTUVfMjRfV0lUSF9MT05HX09GRlNFVCA9IHsKICAgIGhvdXI6IG4kMywKICAgIG1pbnV0ZTogbiQzLAogICAgc2Vjb25kOiBuJDMsCiAgICBob3VyQ3ljbGU6ICJoMjMiLAogICAgdGltZVpvbmVOYW1lOiBsJDMsCiAgfTsKCiAgY29uc3QgREFURVRJTUVfU0hPUlQgPSB7CiAgICB5ZWFyOiBuJDMsCiAgICBtb250aDogbiQzLAogICAgZGF5OiBuJDMsCiAgICBob3VyOiBuJDMsCiAgICBtaW51dGU6IG4kMywKICB9OwoKICBjb25zdCBEQVRFVElNRV9TSE9SVF9XSVRIX1NFQ09ORFMgPSB7CiAgICB5ZWFyOiBuJDMsCiAgICBtb250aDogbiQzLAogICAgZGF5OiBuJDMsCiAgICBob3VyOiBuJDMsCiAgICBtaW51dGU6IG4kMywKICAgIHNlY29uZDogbiQzLAogIH07CgogIGNvbnN0IERBVEVUSU1FX01FRCA9IHsKICAgIHllYXI6IG4kMywKICAgIG1vbnRoOiBzJDIsCiAgICBkYXk6IG4kMywKICAgIGhvdXI6IG4kMywKICAgIG1pbnV0ZTogbiQzLAogIH07CgogIGNvbnN0IERBVEVUSU1FX01FRF9XSVRIX1NFQ09ORFMgPSB7CiAgICB5ZWFyOiBuJDMsCiAgICBtb250aDogcyQyLAogICAgZGF5OiBuJDMsCiAgICBob3VyOiBuJDMsCiAgICBtaW51dGU6IG4kMywKICAgIHNlY29uZDogbiQzLAogIH07CgogIGNvbnN0IERBVEVUSU1FX01FRF9XSVRIX1dFRUtEQVkgPSB7CiAgICB5ZWFyOiBuJDMsCiAgICBtb250aDogcyQyLAogICAgZGF5OiBuJDMsCiAgICB3ZWVrZGF5OiBzJDIsCiAgICBob3VyOiBuJDMsCiAgICBtaW51dGU6IG4kMywKICB9OwoKICBjb25zdCBEQVRFVElNRV9GVUxMID0gewogICAgeWVhcjogbiQzLAogICAgbW9udGg6IGwkMywKICAgIGRheTogbiQzLAogICAgaG91cjogbiQzLAogICAgbWludXRlOiBuJDMsCiAgICB0aW1lWm9uZU5hbWU6IHMkMiwKICB9OwoKICBjb25zdCBEQVRFVElNRV9GVUxMX1dJVEhfU0VDT05EUyA9IHsKICAgIHllYXI6IG4kMywKICAgIG1vbnRoOiBsJDMsCiAgICBkYXk6IG4kMywKICAgIGhvdXI6IG4kMywKICAgIG1pbnV0ZTogbiQzLAogICAgc2Vjb25kOiBuJDMsCiAgICB0aW1lWm9uZU5hbWU6IHMkMiwKICB9OwoKICBjb25zdCBEQVRFVElNRV9IVUdFID0gewogICAgeWVhcjogbiQzLAogICAgbW9udGg6IGwkMywKICAgIGRheTogbiQzLAogICAgd2Vla2RheTogbCQzLAogICAgaG91cjogbiQzLAogICAgbWludXRlOiBuJDMsCiAgICB0aW1lWm9uZU5hbWU6IGwkMywKICB9OwoKICBjb25zdCBEQVRFVElNRV9IVUdFX1dJVEhfU0VDT05EUyA9IHsKICAgIHllYXI6IG4kMywKICAgIG1vbnRoOiBsJDMsCiAgICBkYXk6IG4kMywKICAgIHdlZWtkYXk6IGwkMywKICAgIGhvdXI6IG4kMywKICAgIG1pbnV0ZTogbiQzLAogICAgc2Vjb25kOiBuJDMsCiAgICB0aW1lWm9uZU5hbWU6IGwkMywKICB9OwoKICAvKgogICAgVGhpcyBpcyBqdXN0IGEganVuayBkcmF3ZXIsIGNvbnRhaW5pbmcgYW55dGhpbmcgdXNlZCBhY3Jvc3MgbXVsdGlwbGUgY2xhc3Nlcy4KICAgIEJlY2F1c2UgTHV4b24gaXMgc21hbGwoaXNoKSwgdGhpcyBzaG91bGQgc3RheSBzbWFsbCBhbmQgd2Ugd29uJ3Qgd29ycnkgYWJvdXQgc3BsaXR0aW5nCiAgICBpdCB1cCBpbnRvLCBzYXksIHBhcnNpbmdVdGlsLmpzIGFuZCBiYXNpY1V0aWwuanMgYW5kIHNvIG9uLiBCdXQgdGhleSBhcmUgZGl2aWRlZCB1cCBieSBmZWF0dXJlIGFyZWEuCiAgKi8KCiAgLyoqCiAgICogQHByaXZhdGUKICAgKi8KCiAgLy8gVFlQRVMKCiAgZnVuY3Rpb24gaXNVbmRlZmluZWQobykgewogICAgcmV0dXJuIHR5cGVvZiBvID09PSAidW5kZWZpbmVkIjsKICB9CgogIGZ1bmN0aW9uIGlzTnVtYmVyJDEobykgewogICAgcmV0dXJuIHR5cGVvZiBvID09PSAibnVtYmVyIjsKICB9CgogIGZ1bmN0aW9uIGlzSW50ZWdlcihvKSB7CiAgICByZXR1cm4gdHlwZW9mIG8gPT09ICJudW1iZXIiICYmIG8gJSAxID09PSAwOwogIH0KCiAgZnVuY3Rpb24gaXNTdHJpbmckMShvKSB7CiAgICByZXR1cm4gdHlwZW9mIG8gPT09ICJzdHJpbmciOwogIH0KCiAgZnVuY3Rpb24gaXNEYXRlKG8pIHsKICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykgPT09ICJbb2JqZWN0IERhdGVdIjsKICB9CgogIC8vIENBUEFCSUxJVElFUwoKICBmdW5jdGlvbiBoYXNSZWxhdGl2ZSgpIHsKICAgIHRyeSB7CiAgICAgIHJldHVybiB0eXBlb2YgSW50bCAhPT0gInVuZGVmaW5lZCIgJiYgISFJbnRsLlJlbGF0aXZlVGltZUZvcm1hdDsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogIH0KCiAgLy8gT0JKRUNUUyBBTkQgQVJSQVlTCgogIGZ1bmN0aW9uIG1heWJlQXJyYXkodGhpbmcpIHsKICAgIHJldHVybiBBcnJheS5pc0FycmF5KHRoaW5nKSA/IHRoaW5nIDogW3RoaW5nXTsKICB9CgogIGZ1bmN0aW9uIGJlc3RCeShhcnIsIGJ5LCBjb21wYXJlKSB7CiAgICBpZiAoYXJyLmxlbmd0aCA9PT0gMCkgewogICAgICByZXR1cm4gdW5kZWZpbmVkOwogICAgfQogICAgcmV0dXJuIGFyci5yZWR1Y2UoKGJlc3QsIG5leHQpID0+IHsKICAgICAgY29uc3QgcGFpciA9IFtieShuZXh0KSwgbmV4dF07CiAgICAgIGlmICghYmVzdCkgewogICAgICAgIHJldHVybiBwYWlyOwogICAgICB9IGVsc2UgaWYgKGNvbXBhcmUoYmVzdFswXSwgcGFpclswXSkgPT09IGJlc3RbMF0pIHsKICAgICAgICByZXR1cm4gYmVzdDsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gcGFpcjsKICAgICAgfQogICAgfSwgbnVsbClbMV07CiAgfQoKICBmdW5jdGlvbiBwaWNrKG9iaiwga2V5cykgewogICAgcmV0dXJuIGtleXMucmVkdWNlKChhLCBrKSA9PiB7CiAgICAgIGFba10gPSBvYmpba107CiAgICAgIHJldHVybiBhOwogICAgfSwge30pOwogIH0KCiAgZnVuY3Rpb24gaGFzT3duUHJvcGVydHkob2JqLCBwcm9wKSB7CiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7CiAgfQoKICAvLyBOVU1CRVJTIEFORCBTVFJJTkdTCgogIGZ1bmN0aW9uIGludGVnZXJCZXR3ZWVuKHRoaW5nLCBib3R0b20sIHRvcCkgewogICAgcmV0dXJuIGlzSW50ZWdlcih0aGluZykgJiYgdGhpbmcgPj0gYm90dG9tICYmIHRoaW5nIDw9IHRvcDsKICB9CgogIC8vIHggJSBuIGJ1dCB0YWtlcyB0aGUgc2lnbiBvZiBuIGluc3RlYWQgb2YgeAogIGZ1bmN0aW9uIGZsb29yTW9kKHgsIG4pIHsKICAgIHJldHVybiB4IC0gbiAqIE1hdGguZmxvb3IoeCAvIG4pOwogIH0KCiAgZnVuY3Rpb24gcGFkU3RhcnQoaW5wdXQsIG4gPSAyKSB7CiAgICBjb25zdCBpc05lZyA9IGlucHV0IDwgMDsKICAgIGxldCBwYWRkZWQ7CiAgICBpZiAoaXNOZWcpIHsKICAgICAgcGFkZGVkID0gIi0iICsgKCIiICsgLWlucHV0KS5wYWRTdGFydChuLCAiMCIpOwogICAgfSBlbHNlIHsKICAgICAgcGFkZGVkID0gKCIiICsgaW5wdXQpLnBhZFN0YXJ0KG4sICIwIik7CiAgICB9CiAgICByZXR1cm4gcGFkZGVkOwogIH0KCiAgZnVuY3Rpb24gcGFyc2VJbnRlZ2VyKHN0cmluZykgewogICAgaWYgKGlzVW5kZWZpbmVkKHN0cmluZykgfHwgc3RyaW5nID09PSBudWxsIHx8IHN0cmluZyA9PT0gIiIpIHsKICAgICAgcmV0dXJuIHVuZGVmaW5lZDsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBwYXJzZUludChzdHJpbmcsIDEwKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIHBhcnNlRmxvYXRpbmcoc3RyaW5nKSB7CiAgICBpZiAoaXNVbmRlZmluZWQoc3RyaW5nKSB8fCBzdHJpbmcgPT09IG51bGwgfHwgc3RyaW5nID09PSAiIikgewogICAgICByZXR1cm4gdW5kZWZpbmVkOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHBhcnNlRmxvYXQoc3RyaW5nKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIHBhcnNlTWlsbGlzKGZyYWN0aW9uKSB7CiAgICAvLyBSZXR1cm4gdW5kZWZpbmVkIChpbnN0ZWFkIG9mIDApIGluIHRoZXNlIGNhc2VzLCB3aGVyZSBmcmFjdGlvbiBpcyBub3Qgc2V0CiAgICBpZiAoaXNVbmRlZmluZWQoZnJhY3Rpb24pIHx8IGZyYWN0aW9uID09PSBudWxsIHx8IGZyYWN0aW9uID09PSAiIikgewogICAgICByZXR1cm4gdW5kZWZpbmVkOwogICAgfSBlbHNlIHsKICAgICAgY29uc3QgZiA9IHBhcnNlRmxvYXQoIjAuIiArIGZyYWN0aW9uKSAqIDEwMDA7CiAgICAgIHJldHVybiBNYXRoLmZsb29yKGYpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gcm91bmRUbyhudW1iZXIsIGRpZ2l0cywgdG93YXJkWmVybyA9IGZhbHNlKSB7CiAgICBjb25zdCBmYWN0b3IgPSAxMCAqKiBkaWdpdHMsCiAgICAgIHJvdW5kZXIgPSB0b3dhcmRaZXJvID8gTWF0aC50cnVuYyA6IE1hdGgucm91bmQ7CiAgICByZXR1cm4gcm91bmRlcihudW1iZXIgKiBmYWN0b3IpIC8gZmFjdG9yOwogIH0KCiAgLy8gREFURSBCQVNJQ1MKCiAgZnVuY3Rpb24gaXNMZWFwWWVhcih5ZWFyKSB7CiAgICByZXR1cm4geWVhciAlIDQgPT09IDAgJiYgKHllYXIgJSAxMDAgIT09IDAgfHwgeWVhciAlIDQwMCA9PT0gMCk7CiAgfQoKICBmdW5jdGlvbiBkYXlzSW5ZZWFyKHllYXIpIHsKICAgIHJldHVybiBpc0xlYXBZZWFyKHllYXIpID8gMzY2IDogMzY1OwogIH0KCiAgZnVuY3Rpb24gZGF5c0luTW9udGgoeWVhciwgbW9udGgpIHsKICAgIGNvbnN0IG1vZE1vbnRoID0gZmxvb3JNb2QobW9udGggLSAxLCAxMikgKyAxLAogICAgICBtb2RZZWFyID0geWVhciArIChtb250aCAtIG1vZE1vbnRoKSAvIDEyOwoKICAgIGlmIChtb2RNb250aCA9PT0gMikgewogICAgICByZXR1cm4gaXNMZWFwWWVhcihtb2RZZWFyKSA/IDI5IDogMjg7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gWzMxLCBudWxsLCAzMSwgMzAsIDMxLCAzMCwgMzEsIDMxLCAzMCwgMzEsIDMwLCAzMV1bbW9kTW9udGggLSAxXTsKICAgIH0KICB9CgogIC8vIGNvdmVydCBhIGNhbGVuZGFyIG9iamVjdCB0byBhIGxvY2FsIHRpbWVzdGFtcCAoZXBvY2gsIGJ1dCB3aXRoIHRoZSBvZmZzZXQgYmFrZWQgaW4pCiAgZnVuY3Rpb24gb2JqVG9Mb2NhbFRTKG9iaikgewogICAgbGV0IGQgPSBEYXRlLlVUQygKICAgICAgb2JqLnllYXIsCiAgICAgIG9iai5tb250aCAtIDEsCiAgICAgIG9iai5kYXksCiAgICAgIG9iai5ob3VyLAogICAgICBvYmoubWludXRlLAogICAgICBvYmouc2Vjb25kLAogICAgICBvYmoubWlsbGlzZWNvbmQKICAgICk7CgogICAgLy8gZm9yIGxlZ2FjeSByZWFzb25zLCB5ZWFycyBiZXR3ZWVuIDAgYW5kIDk5IGFyZSBpbnRlcnByZXRlZCBhcyAxOVhYOyByZXZlcnQgdGhhdAogICAgaWYgKG9iai55ZWFyIDwgMTAwICYmIG9iai55ZWFyID49IDApIHsKICAgICAgZCA9IG5ldyBEYXRlKGQpOwogICAgICBkLnNldFVUQ0Z1bGxZZWFyKGQuZ2V0VVRDRnVsbFllYXIoKSAtIDE5MDApOwogICAgfQogICAgcmV0dXJuICtkOwogIH0KCiAgZnVuY3Rpb24gd2Vla3NJbldlZWtZZWFyKHdlZWtZZWFyKSB7CiAgICBjb25zdCBwMSA9CiAgICAgICAgKHdlZWtZZWFyICsKICAgICAgICAgIE1hdGguZmxvb3Iod2Vla1llYXIgLyA0KSAtCiAgICAgICAgICBNYXRoLmZsb29yKHdlZWtZZWFyIC8gMTAwKSArCiAgICAgICAgICBNYXRoLmZsb29yKHdlZWtZZWFyIC8gNDAwKSkgJQogICAgICAgIDcsCiAgICAgIGxhc3QgPSB3ZWVrWWVhciAtIDEsCiAgICAgIHAyID0gKGxhc3QgKyBNYXRoLmZsb29yKGxhc3QgLyA0KSAtIE1hdGguZmxvb3IobGFzdCAvIDEwMCkgKyBNYXRoLmZsb29yKGxhc3QgLyA0MDApKSAlIDc7CiAgICByZXR1cm4gcDEgPT09IDQgfHwgcDIgPT09IDMgPyA1MyA6IDUyOwogIH0KCiAgZnVuY3Rpb24gdW50cnVuY2F0ZVllYXIoeWVhcikgewogICAgaWYgKHllYXIgPiA5OSkgewogICAgICByZXR1cm4geWVhcjsKICAgIH0gZWxzZSByZXR1cm4geWVhciA+IDYwID8gMTkwMCArIHllYXIgOiAyMDAwICsgeWVhcjsKICB9CgogIC8vIFBBUlNJTkcKCiAgZnVuY3Rpb24gcGFyc2Vab25lSW5mbyh0cywgb2Zmc2V0Rm9ybWF0LCBsb2NhbGUsIHRpbWVab25lID0gbnVsbCkgewogICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHRzKSwKICAgICAgaW50bE9wdHMgPSB7CiAgICAgICAgaG91ckN5Y2xlOiAiaDIzIiwKICAgICAgICB5ZWFyOiAibnVtZXJpYyIsCiAgICAgICAgbW9udGg6ICIyLWRpZ2l0IiwKICAgICAgICBkYXk6ICIyLWRpZ2l0IiwKICAgICAgICBob3VyOiAiMi1kaWdpdCIsCiAgICAgICAgbWludXRlOiAiMi1kaWdpdCIsCiAgICAgIH07CgogICAgaWYgKHRpbWVab25lKSB7CiAgICAgIGludGxPcHRzLnRpbWVab25lID0gdGltZVpvbmU7CiAgICB9CgogICAgY29uc3QgbW9kaWZpZWQgPSB7IHRpbWVab25lTmFtZTogb2Zmc2V0Rm9ybWF0LCAuLi5pbnRsT3B0cyB9OwoKICAgIGNvbnN0IHBhcnNlZCA9IG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KGxvY2FsZSwgbW9kaWZpZWQpCiAgICAgIC5mb3JtYXRUb1BhcnRzKGRhdGUpCiAgICAgIC5maW5kKChtKSA9PiBtLnR5cGUudG9Mb3dlckNhc2UoKSA9PT0gInRpbWV6b25lbmFtZSIpOwogICAgcmV0dXJuIHBhcnNlZCA/IHBhcnNlZC52YWx1ZSA6IG51bGw7CiAgfQoKICAvLyBzaWduZWRPZmZzZXQoJy01JywgJzMwJykgLT4gLTMzMAogIGZ1bmN0aW9uIHNpZ25lZE9mZnNldChvZmZIb3VyU3RyLCBvZmZNaW51dGVTdHIpIHsKICAgIGxldCBvZmZIb3VyID0gcGFyc2VJbnQob2ZmSG91clN0ciwgMTApOwoKICAgIC8vIGRvbid0IHx8IHRoaXMgYmVjYXVzZSB3ZSB3YW50IHRvIHByZXNlcnZlIC0wCiAgICBpZiAoTnVtYmVyLmlzTmFOKG9mZkhvdXIpKSB7CiAgICAgIG9mZkhvdXIgPSAwOwogICAgfQoKICAgIGNvbnN0IG9mZk1pbiA9IHBhcnNlSW50KG9mZk1pbnV0ZVN0ciwgMTApIHx8IDAsCiAgICAgIG9mZk1pblNpZ25lZCA9IG9mZkhvdXIgPCAwIHx8IE9iamVjdC5pcyhvZmZIb3VyLCAtMCkgPyAtb2ZmTWluIDogb2ZmTWluOwogICAgcmV0dXJuIG9mZkhvdXIgKiA2MCArIG9mZk1pblNpZ25lZDsKICB9CgogIC8vIENPRVJDSU9OCgogIGZ1bmN0aW9uIGFzTnVtYmVyKHZhbHVlKSB7CiAgICBjb25zdCBudW1lcmljVmFsdWUgPSBOdW1iZXIodmFsdWUpOwogICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gImJvb2xlYW4iIHx8IHZhbHVlID09PSAiIiB8fCBOdW1iZXIuaXNOYU4obnVtZXJpY1ZhbHVlKSkKICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKGBJbnZhbGlkIHVuaXQgdmFsdWUgJHt2YWx1ZX1gKTsKICAgIHJldHVybiBudW1lcmljVmFsdWU7CiAgfQoKICBmdW5jdGlvbiBub3JtYWxpemVPYmplY3Qob2JqLCBub3JtYWxpemVyKSB7CiAgICBjb25zdCBub3JtYWxpemVkID0ge307CiAgICBmb3IgKGNvbnN0IHUgaW4gb2JqKSB7CiAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eShvYmosIHUpKSB7CiAgICAgICAgY29uc3QgdiA9IG9ialt1XTsKICAgICAgICBpZiAodiA9PT0gdW5kZWZpbmVkIHx8IHYgPT09IG51bGwpIGNvbnRpbnVlOwogICAgICAgIG5vcm1hbGl6ZWRbbm9ybWFsaXplcih1KV0gPSBhc051bWJlcih2KTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIG5vcm1hbGl6ZWQ7CiAgfQoKICBmdW5jdGlvbiBmb3JtYXRPZmZzZXQob2Zmc2V0LCBmb3JtYXQpIHsKICAgIGNvbnN0IGhvdXJzID0gTWF0aC50cnVuYyhNYXRoLmFicyhvZmZzZXQgLyA2MCkpLAogICAgICBtaW51dGVzID0gTWF0aC50cnVuYyhNYXRoLmFicyhvZmZzZXQgJSA2MCkpLAogICAgICBzaWduID0gb2Zmc2V0ID49IDAgPyAiKyIgOiAiLSI7CgogICAgc3dpdGNoIChmb3JtYXQpIHsKICAgICAgY2FzZSAic2hvcnQiOgogICAgICAgIHJldHVybiBgJHtzaWdufSR7cGFkU3RhcnQoaG91cnMsIDIpfToke3BhZFN0YXJ0KG1pbnV0ZXMsIDIpfWA7CiAgICAgIGNhc2UgIm5hcnJvdyI6CiAgICAgICAgcmV0dXJuIGAke3NpZ259JHtob3Vyc30ke21pbnV0ZXMgPiAwID8gYDoke21pbnV0ZXN9YCA6ICIifWA7CiAgICAgIGNhc2UgInRlY2hpZSI6CiAgICAgICAgcmV0dXJuIGAke3NpZ259JHtwYWRTdGFydChob3VycywgMil9JHtwYWRTdGFydChtaW51dGVzLCAyKX1gOwogICAgICBkZWZhdWx0OgogICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKGBWYWx1ZSBmb3JtYXQgJHtmb3JtYXR9IGlzIG91dCBvZiByYW5nZSBmb3IgcHJvcGVydHkgZm9ybWF0YCk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiB0aW1lT2JqZWN0KG9iaikgewogICAgcmV0dXJuIHBpY2sob2JqLCBbImhvdXIiLCAibWludXRlIiwgInNlY29uZCIsICJtaWxsaXNlY29uZCJdKTsKICB9CgogIGNvbnN0IGlhbmFSZWdleCA9CiAgICAvW0EtWmEtel8rLV17MSwyNTZ9KD86Oj9cL1tBLVphLXowLTlfKy1dezEsMjU2fSg/OlwvW0EtWmEtejAtOV8rLV17MSwyNTZ9KT8pPy87CgogIC8qKgogICAqIEBwcml2YXRlCiAgICovCgogIGNvbnN0IG1vbnRoc0xvbmcgPSBbCiAgICAiSmFudWFyeSIsCiAgICAiRmVicnVhcnkiLAogICAgIk1hcmNoIiwKICAgICJBcHJpbCIsCiAgICAiTWF5IiwKICAgICJKdW5lIiwKICAgICJKdWx5IiwKICAgICJBdWd1c3QiLAogICAgIlNlcHRlbWJlciIsCiAgICAiT2N0b2JlciIsCiAgICAiTm92ZW1iZXIiLAogICAgIkRlY2VtYmVyIiwKICBdOwoKICBjb25zdCBtb250aHNTaG9ydCA9IFsKICAgICJKYW4iLAogICAgIkZlYiIsCiAgICAiTWFyIiwKICAgICJBcHIiLAogICAgIk1heSIsCiAgICAiSnVuIiwKICAgICJKdWwiLAogICAgIkF1ZyIsCiAgICAiU2VwIiwKICAgICJPY3QiLAogICAgIk5vdiIsCiAgICAiRGVjIiwKICBdOwoKICBjb25zdCBtb250aHNOYXJyb3cgPSBbIkoiLCAiRiIsICJNIiwgIkEiLCAiTSIsICJKIiwgIkoiLCAiQSIsICJTIiwgIk8iLCAiTiIsICJEIl07CgogIGZ1bmN0aW9uIG1vbnRocyhsZW5ndGgpIHsKICAgIHN3aXRjaCAobGVuZ3RoKSB7CiAgICAgIGNhc2UgIm5hcnJvdyI6CiAgICAgICAgcmV0dXJuIFsuLi5tb250aHNOYXJyb3ddOwogICAgICBjYXNlICJzaG9ydCI6CiAgICAgICAgcmV0dXJuIFsuLi5tb250aHNTaG9ydF07CiAgICAgIGNhc2UgImxvbmciOgogICAgICAgIHJldHVybiBbLi4ubW9udGhzTG9uZ107CiAgICAgIGNhc2UgIm51bWVyaWMiOgogICAgICAgIHJldHVybiBbIjEiLCAiMiIsICIzIiwgIjQiLCAiNSIsICI2IiwgIjciLCAiOCIsICI5IiwgIjEwIiwgIjExIiwgIjEyIl07CiAgICAgIGNhc2UgIjItZGlnaXQiOgogICAgICAgIHJldHVybiBbIjAxIiwgIjAyIiwgIjAzIiwgIjA0IiwgIjA1IiwgIjA2IiwgIjA3IiwgIjA4IiwgIjA5IiwgIjEwIiwgIjExIiwgIjEyIl07CiAgICAgIGRlZmF1bHQ6CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgfQoKICBjb25zdCB3ZWVrZGF5c0xvbmcgPSBbCiAgICAiTW9uZGF5IiwKICAgICJUdWVzZGF5IiwKICAgICJXZWRuZXNkYXkiLAogICAgIlRodXJzZGF5IiwKICAgICJGcmlkYXkiLAogICAgIlNhdHVyZGF5IiwKICAgICJTdW5kYXkiLAogIF07CgogIGNvbnN0IHdlZWtkYXlzU2hvcnQgPSBbIk1vbiIsICJUdWUiLCAiV2VkIiwgIlRodSIsICJGcmkiLCAiU2F0IiwgIlN1biJdOwoKICBjb25zdCB3ZWVrZGF5c05hcnJvdyA9IFsiTSIsICJUIiwgIlciLCAiVCIsICJGIiwgIlMiLCAiUyJdOwoKICBmdW5jdGlvbiB3ZWVrZGF5cyhsZW5ndGgpIHsKICAgIHN3aXRjaCAobGVuZ3RoKSB7CiAgICAgIGNhc2UgIm5hcnJvdyI6CiAgICAgICAgcmV0dXJuIFsuLi53ZWVrZGF5c05hcnJvd107CiAgICAgIGNhc2UgInNob3J0IjoKICAgICAgICByZXR1cm4gWy4uLndlZWtkYXlzU2hvcnRdOwogICAgICBjYXNlICJsb25nIjoKICAgICAgICByZXR1cm4gWy4uLndlZWtkYXlzTG9uZ107CiAgICAgIGNhc2UgIm51bWVyaWMiOgogICAgICAgIHJldHVybiBbIjEiLCAiMiIsICIzIiwgIjQiLCAiNSIsICI2IiwgIjciXTsKICAgICAgZGVmYXVsdDoKICAgICAgICByZXR1cm4gbnVsbDsKICAgIH0KICB9CgogIGNvbnN0IG1lcmlkaWVtcyA9IFsiQU0iLCAiUE0iXTsKCiAgY29uc3QgZXJhc0xvbmcgPSBbIkJlZm9yZSBDaHJpc3QiLCAiQW5ubyBEb21pbmkiXTsKCiAgY29uc3QgZXJhc1Nob3J0ID0gWyJCQyIsICJBRCJdOwoKICBjb25zdCBlcmFzTmFycm93ID0gWyJCIiwgIkEiXTsKCiAgZnVuY3Rpb24gZXJhcyhsZW5ndGgpIHsKICAgIHN3aXRjaCAobGVuZ3RoKSB7CiAgICAgIGNhc2UgIm5hcnJvdyI6CiAgICAgICAgcmV0dXJuIFsuLi5lcmFzTmFycm93XTsKICAgICAgY2FzZSAic2hvcnQiOgogICAgICAgIHJldHVybiBbLi4uZXJhc1Nob3J0XTsKICAgICAgY2FzZSAibG9uZyI6CiAgICAgICAgcmV0dXJuIFsuLi5lcmFzTG9uZ107CiAgICAgIGRlZmF1bHQ6CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBtZXJpZGllbUZvckRhdGVUaW1lKGR0KSB7CiAgICByZXR1cm4gbWVyaWRpZW1zW2R0LmhvdXIgPCAxMiA/IDAgOiAxXTsKICB9CgogIGZ1bmN0aW9uIHdlZWtkYXlGb3JEYXRlVGltZShkdCwgbGVuZ3RoKSB7CiAgICByZXR1cm4gd2Vla2RheXMobGVuZ3RoKVtkdC53ZWVrZGF5IC0gMV07CiAgfQoKICBmdW5jdGlvbiBtb250aEZvckRhdGVUaW1lKGR0LCBsZW5ndGgpIHsKICAgIHJldHVybiBtb250aHMobGVuZ3RoKVtkdC5tb250aCAtIDFdOwogIH0KCiAgZnVuY3Rpb24gZXJhRm9yRGF0ZVRpbWUoZHQsIGxlbmd0aCkgewogICAgcmV0dXJuIGVyYXMobGVuZ3RoKVtkdC55ZWFyIDwgMCA/IDAgOiAxXTsKICB9CgogIGZ1bmN0aW9uIGZvcm1hdFJlbGF0aXZlVGltZSh1bml0LCBjb3VudCwgbnVtZXJpYyA9ICJhbHdheXMiLCBuYXJyb3cgPSBmYWxzZSkgewogICAgY29uc3QgdW5pdHMgPSB7CiAgICAgIHllYXJzOiBbInllYXIiLCAieXIuIl0sCiAgICAgIHF1YXJ0ZXJzOiBbInF1YXJ0ZXIiLCAicXRyLiJdLAogICAgICBtb250aHM6IFsibW9udGgiLCAibW8uIl0sCiAgICAgIHdlZWtzOiBbIndlZWsiLCAid2suIl0sCiAgICAgIGRheXM6IFsiZGF5IiwgImRheSIsICJkYXlzIl0sCiAgICAgIGhvdXJzOiBbImhvdXIiLCAiaHIuIl0sCiAgICAgIG1pbnV0ZXM6IFsibWludXRlIiwgIm1pbi4iXSwKICAgICAgc2Vjb25kczogWyJzZWNvbmQiLCAic2VjLiJdLAogICAgfTsKCiAgICBjb25zdCBsYXN0YWJsZSA9IFsiaG91cnMiLCAibWludXRlcyIsICJzZWNvbmRzIl0uaW5kZXhPZih1bml0KSA9PT0gLTE7CgogICAgaWYgKG51bWVyaWMgPT09ICJhdXRvIiAmJiBsYXN0YWJsZSkgewogICAgICBjb25zdCBpc0RheSA9IHVuaXQgPT09ICJkYXlzIjsKICAgICAgc3dpdGNoIChjb3VudCkgewogICAgICAgIGNhc2UgMToKICAgICAgICAgIHJldHVybiBpc0RheSA/ICJ0b21vcnJvdyIgOiBgbmV4dCAke3VuaXRzW3VuaXRdWzBdfWA7CiAgICAgICAgY2FzZSAtMToKICAgICAgICAgIHJldHVybiBpc0RheSA/ICJ5ZXN0ZXJkYXkiIDogYGxhc3QgJHt1bml0c1t1bml0XVswXX1gOwogICAgICAgIGNhc2UgMDoKICAgICAgICAgIHJldHVybiBpc0RheSA/ICJ0b2RheSIgOiBgdGhpcyAke3VuaXRzW3VuaXRdWzBdfWA7CiAgICAgIH0KICAgIH0KCiAgICBjb25zdCBpc0luUGFzdCA9IE9iamVjdC5pcyhjb3VudCwgLTApIHx8IGNvdW50IDwgMCwKICAgICAgZm10VmFsdWUgPSBNYXRoLmFicyhjb3VudCksCiAgICAgIHNpbmd1bGFyID0gZm10VmFsdWUgPT09IDEsCiAgICAgIGxpbFVuaXRzID0gdW5pdHNbdW5pdF0sCiAgICAgIGZtdFVuaXQgPSBuYXJyb3cKICAgICAgICA/IHNpbmd1bGFyCiAgICAgICAgICA/IGxpbFVuaXRzWzFdCiAgICAgICAgICA6IGxpbFVuaXRzWzJdIHx8IGxpbFVuaXRzWzFdCiAgICAgICAgOiBzaW5ndWxhcgogICAgICAgID8gdW5pdHNbdW5pdF1bMF0KICAgICAgICA6IHVuaXQ7CiAgICByZXR1cm4gaXNJblBhc3QgPyBgJHtmbXRWYWx1ZX0gJHtmbXRVbml0fSBhZ29gIDogYGluICR7Zm10VmFsdWV9ICR7Zm10VW5pdH1gOwogIH0KCiAgZnVuY3Rpb24gc3RyaW5naWZ5VG9rZW5zKHNwbGl0cywgdG9rZW5Ub1N0cmluZykgewogICAgbGV0IHMgPSAiIjsKICAgIGZvciAoY29uc3QgdG9rZW4gb2Ygc3BsaXRzKSB7CiAgICAgIGlmICh0b2tlbi5saXRlcmFsKSB7CiAgICAgICAgcyArPSB0b2tlbi52YWw7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcyArPSB0b2tlblRvU3RyaW5nKHRva2VuLnZhbCk7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBzOwogIH0KCiAgY29uc3QgbWFjcm9Ub2tlblRvRm9ybWF0T3B0cyA9IHsKICAgIEQ6IERBVEVfU0hPUlQsCiAgICBERDogREFURV9NRUQsCiAgICBEREQ6IERBVEVfRlVMTCwKICAgIEREREQ6IERBVEVfSFVHRSwKICAgIHQ6IFRJTUVfU0lNUExFLAogICAgdHQ6IFRJTUVfV0lUSF9TRUNPTkRTLAogICAgdHR0OiBUSU1FX1dJVEhfU0hPUlRfT0ZGU0VULAogICAgdHR0dDogVElNRV9XSVRIX0xPTkdfT0ZGU0VULAogICAgVDogVElNRV8yNF9TSU1QTEUsCiAgICBUVDogVElNRV8yNF9XSVRIX1NFQ09ORFMsCiAgICBUVFQ6IFRJTUVfMjRfV0lUSF9TSE9SVF9PRkZTRVQsCiAgICBUVFRUOiBUSU1FXzI0X1dJVEhfTE9OR19PRkZTRVQsCiAgICBmOiBEQVRFVElNRV9TSE9SVCwKICAgIGZmOiBEQVRFVElNRV9NRUQsCiAgICBmZmY6IERBVEVUSU1FX0ZVTEwsCiAgICBmZmZmOiBEQVRFVElNRV9IVUdFLAogICAgRjogREFURVRJTUVfU0hPUlRfV0lUSF9TRUNPTkRTLAogICAgRkY6IERBVEVUSU1FX01FRF9XSVRIX1NFQ09ORFMsCiAgICBGRkY6IERBVEVUSU1FX0ZVTExfV0lUSF9TRUNPTkRTLAogICAgRkZGRjogREFURVRJTUVfSFVHRV9XSVRIX1NFQ09ORFMsCiAgfTsKCiAgLyoqCiAgICogQHByaXZhdGUKICAgKi8KCiAgY2xhc3MgRm9ybWF0dGVyIHsKICAgIHN0YXRpYyBjcmVhdGUobG9jYWxlLCBvcHRzID0ge30pIHsKICAgICAgcmV0dXJuIG5ldyBGb3JtYXR0ZXIobG9jYWxlLCBvcHRzKTsKICAgIH0KCiAgICBzdGF0aWMgcGFyc2VGb3JtYXQoZm10KSB7CiAgICAgIGxldCBjdXJyZW50ID0gbnVsbCwKICAgICAgICBjdXJyZW50RnVsbCA9ICIiLAogICAgICAgIGJyYWNrZXRlZCA9IGZhbHNlOwogICAgICBjb25zdCBzcGxpdHMgPSBbXTsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmbXQubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBjID0gZm10LmNoYXJBdChpKTsKICAgICAgICBpZiAoYyA9PT0gIiciKSB7CiAgICAgICAgICBpZiAoY3VycmVudEZ1bGwubGVuZ3RoID4gMCkgewogICAgICAgICAgICBzcGxpdHMucHVzaCh7IGxpdGVyYWw6IGJyYWNrZXRlZCwgdmFsOiBjdXJyZW50RnVsbCB9KTsKICAgICAgICAgIH0KICAgICAgICAgIGN1cnJlbnQgPSBudWxsOwogICAgICAgICAgY3VycmVudEZ1bGwgPSAiIjsKICAgICAgICAgIGJyYWNrZXRlZCA9ICFicmFja2V0ZWQ7CiAgICAgICAgfSBlbHNlIGlmIChicmFja2V0ZWQpIHsKICAgICAgICAgIGN1cnJlbnRGdWxsICs9IGM7CiAgICAgICAgfSBlbHNlIGlmIChjID09PSBjdXJyZW50KSB7CiAgICAgICAgICBjdXJyZW50RnVsbCArPSBjOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAoY3VycmVudEZ1bGwubGVuZ3RoID4gMCkgewogICAgICAgICAgICBzcGxpdHMucHVzaCh7IGxpdGVyYWw6IGZhbHNlLCB2YWw6IGN1cnJlbnRGdWxsIH0pOwogICAgICAgICAgfQogICAgICAgICAgY3VycmVudEZ1bGwgPSBjOwogICAgICAgICAgY3VycmVudCA9IGM7CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAoY3VycmVudEZ1bGwubGVuZ3RoID4gMCkgewogICAgICAgIHNwbGl0cy5wdXNoKHsgbGl0ZXJhbDogYnJhY2tldGVkLCB2YWw6IGN1cnJlbnRGdWxsIH0pOwogICAgICB9CgogICAgICByZXR1cm4gc3BsaXRzOwogICAgfQoKICAgIHN0YXRpYyBtYWNyb1Rva2VuVG9Gb3JtYXRPcHRzKHRva2VuKSB7CiAgICAgIHJldHVybiBtYWNyb1Rva2VuVG9Gb3JtYXRPcHRzW3Rva2VuXTsKICAgIH0KCiAgICBjb25zdHJ1Y3Rvcihsb2NhbGUsIGZvcm1hdE9wdHMpIHsKICAgICAgdGhpcy5vcHRzID0gZm9ybWF0T3B0czsKICAgICAgdGhpcy5sb2MgPSBsb2NhbGU7CiAgICAgIHRoaXMuc3lzdGVtTG9jID0gbnVsbDsKICAgIH0KCiAgICBmb3JtYXRXaXRoU3lzdGVtRGVmYXVsdChkdCwgb3B0cykgewogICAgICBpZiAodGhpcy5zeXN0ZW1Mb2MgPT09IG51bGwpIHsKICAgICAgICB0aGlzLnN5c3RlbUxvYyA9IHRoaXMubG9jLnJlZGVmYXVsdFRvU3lzdGVtKCk7CiAgICAgIH0KICAgICAgY29uc3QgZGYgPSB0aGlzLnN5c3RlbUxvYy5kdEZvcm1hdHRlcihkdCwgeyAuLi50aGlzLm9wdHMsIC4uLm9wdHMgfSk7CiAgICAgIHJldHVybiBkZi5mb3JtYXQoKTsKICAgIH0KCiAgICBmb3JtYXREYXRlVGltZShkdCwgb3B0cyA9IHt9KSB7CiAgICAgIGNvbnN0IGRmID0gdGhpcy5sb2MuZHRGb3JtYXR0ZXIoZHQsIHsgLi4udGhpcy5vcHRzLCAuLi5vcHRzIH0pOwogICAgICByZXR1cm4gZGYuZm9ybWF0KCk7CiAgICB9CgogICAgZm9ybWF0RGF0ZVRpbWVQYXJ0cyhkdCwgb3B0cyA9IHt9KSB7CiAgICAgIGNvbnN0IGRmID0gdGhpcy5sb2MuZHRGb3JtYXR0ZXIoZHQsIHsgLi4udGhpcy5vcHRzLCAuLi5vcHRzIH0pOwogICAgICByZXR1cm4gZGYuZm9ybWF0VG9QYXJ0cygpOwogICAgfQoKICAgIHJlc29sdmVkT3B0aW9ucyhkdCwgb3B0cyA9IHt9KSB7CiAgICAgIGNvbnN0IGRmID0gdGhpcy5sb2MuZHRGb3JtYXR0ZXIoZHQsIHsgLi4udGhpcy5vcHRzLCAuLi5vcHRzIH0pOwogICAgICByZXR1cm4gZGYucmVzb2x2ZWRPcHRpb25zKCk7CiAgICB9CgogICAgbnVtKG4sIHAgPSAwKSB7CiAgICAgIC8vIHdlIGdldCBzb21lIHBlcmYgb3V0IG9mIGRvaW5nIHRoaXMgaGVyZSwgYW5ub3lpbmdseQogICAgICBpZiAodGhpcy5vcHRzLmZvcmNlU2ltcGxlKSB7CiAgICAgICAgcmV0dXJuIHBhZFN0YXJ0KG4sIHApOwogICAgICB9CgogICAgICBjb25zdCBvcHRzID0geyAuLi50aGlzLm9wdHMgfTsKCiAgICAgIGlmIChwID4gMCkgewogICAgICAgIG9wdHMucGFkVG8gPSBwOwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5sb2MubnVtYmVyRm9ybWF0dGVyKG9wdHMpLmZvcm1hdChuKTsKICAgIH0KCiAgICBmb3JtYXREYXRlVGltZUZyb21TdHJpbmcoZHQsIGZtdCkgewogICAgICBjb25zdCBrbm93bkVuZ2xpc2ggPSB0aGlzLmxvYy5saXN0aW5nTW9kZSgpID09PSAiZW4iLAogICAgICAgIHVzZURhdGVUaW1lRm9ybWF0dGVyID0gdGhpcy5sb2Mub3V0cHV0Q2FsZW5kYXIgJiYgdGhpcy5sb2Mub3V0cHV0Q2FsZW5kYXIgIT09ICJncmVnb3J5IiwKICAgICAgICBzdHJpbmcgPSAob3B0cywgZXh0cmFjdCkgPT4gdGhpcy5sb2MuZXh0cmFjdChkdCwgb3B0cywgZXh0cmFjdCksCiAgICAgICAgZm9ybWF0T2Zmc2V0ID0gKG9wdHMpID0+IHsKICAgICAgICAgIGlmIChkdC5pc09mZnNldEZpeGVkICYmIGR0Lm9mZnNldCA9PT0gMCAmJiBvcHRzLmFsbG93WikgewogICAgICAgICAgICByZXR1cm4gIloiOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBkdC5pc1ZhbGlkID8gZHQuem9uZS5mb3JtYXRPZmZzZXQoZHQudHMsIG9wdHMuZm9ybWF0KSA6ICIiOwogICAgICAgIH0sCiAgICAgICAgbWVyaWRpZW0gPSAoKSA9PgogICAgICAgICAga25vd25FbmdsaXNoCiAgICAgICAgICAgID8gbWVyaWRpZW1Gb3JEYXRlVGltZShkdCkKICAgICAgICAgICAgOiBzdHJpbmcoeyBob3VyOiAibnVtZXJpYyIsIGhvdXJDeWNsZTogImgxMiIgfSwgImRheXBlcmlvZCIpLAogICAgICAgIG1vbnRoID0gKGxlbmd0aCwgc3RhbmRhbG9uZSkgPT4KICAgICAgICAgIGtub3duRW5nbGlzaAogICAgICAgICAgICA/IG1vbnRoRm9yRGF0ZVRpbWUoZHQsIGxlbmd0aCkKICAgICAgICAgICAgOiBzdHJpbmcoc3RhbmRhbG9uZSA/IHsgbW9udGg6IGxlbmd0aCB9IDogeyBtb250aDogbGVuZ3RoLCBkYXk6ICJudW1lcmljIiB9LCAibW9udGgiKSwKICAgICAgICB3ZWVrZGF5ID0gKGxlbmd0aCwgc3RhbmRhbG9uZSkgPT4KICAgICAgICAgIGtub3duRW5nbGlzaAogICAgICAgICAgICA/IHdlZWtkYXlGb3JEYXRlVGltZShkdCwgbGVuZ3RoKQogICAgICAgICAgICA6IHN0cmluZygKICAgICAgICAgICAgICAgIHN0YW5kYWxvbmUgPyB7IHdlZWtkYXk6IGxlbmd0aCB9IDogeyB3ZWVrZGF5OiBsZW5ndGgsIG1vbnRoOiAibG9uZyIsIGRheTogIm51bWVyaWMiIH0sCiAgICAgICAgICAgICAgICAid2Vla2RheSIKICAgICAgICAgICAgICApLAogICAgICAgIG1heWJlTWFjcm8gPSAodG9rZW4pID0+IHsKICAgICAgICAgIGNvbnN0IGZvcm1hdE9wdHMgPSBGb3JtYXR0ZXIubWFjcm9Ub2tlblRvRm9ybWF0T3B0cyh0b2tlbik7CiAgICAgICAgICBpZiAoZm9ybWF0T3B0cykgewogICAgICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXRXaXRoU3lzdGVtRGVmYXVsdChkdCwgZm9ybWF0T3B0cyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gdG9rZW47CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBlcmEgPSAobGVuZ3RoKSA9PgogICAgICAgICAga25vd25FbmdsaXNoID8gZXJhRm9yRGF0ZVRpbWUoZHQsIGxlbmd0aCkgOiBzdHJpbmcoeyBlcmE6IGxlbmd0aCB9LCAiZXJhIiksCiAgICAgICAgdG9rZW5Ub1N0cmluZyA9ICh0b2tlbikgPT4gewogICAgICAgICAgLy8gV2hlcmUgcG9zc2libGU6IGh0dHA6Ly9jbGRyLnVuaWNvZGUub3JnL3RyYW5zbGF0aW9uL2RhdGUtdGltZS0xL2RhdGUtdGltZSNUT0MtU3RhbmRhbG9uZS12cy4tRm9ybWF0LVN0eWxlcwogICAgICAgICAgc3dpdGNoICh0b2tlbikgewogICAgICAgICAgICAvLyBtcwogICAgICAgICAgICBjYXNlICJTIjoKICAgICAgICAgICAgICByZXR1cm4gdGhpcy5udW0oZHQubWlsbGlzZWNvbmQpOwogICAgICAgICAgICBjYXNlICJ1IjoKICAgICAgICAgICAgLy8gZmFsbHMgdGhyb3VnaAogICAgICAgICAgICBjYXNlICJTU1MiOgogICAgICAgICAgICAgIHJldHVybiB0aGlzLm51bShkdC5taWxsaXNlY29uZCwgMyk7CiAgICAgICAgICAgIC8vIHNlY29uZHMKICAgICAgICAgICAgY2FzZSAicyI6CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubnVtKGR0LnNlY29uZCk7CiAgICAgICAgICAgIGNhc2UgInNzIjoKICAgICAgICAgICAgICByZXR1cm4gdGhpcy5udW0oZHQuc2Vjb25kLCAyKTsKICAgICAgICAgICAgLy8gZnJhY3Rpb25hbCBzZWNvbmRzCiAgICAgICAgICAgIGNhc2UgInV1IjoKICAgICAgICAgICAgICByZXR1cm4gdGhpcy5udW0oTWF0aC5mbG9vcihkdC5taWxsaXNlY29uZCAvIDEwKSwgMik7CiAgICAgICAgICAgIGNhc2UgInV1dSI6CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubnVtKE1hdGguZmxvb3IoZHQubWlsbGlzZWNvbmQgLyAxMDApKTsKICAgICAgICAgICAgLy8gbWludXRlcwogICAgICAgICAgICBjYXNlICJtIjoKICAgICAgICAgICAgICByZXR1cm4gdGhpcy5udW0oZHQubWludXRlKTsKICAgICAgICAgICAgY2FzZSAibW0iOgogICAgICAgICAgICAgIHJldHVybiB0aGlzLm51bShkdC5taW51dGUsIDIpOwogICAgICAgICAgICAvLyBob3VycwogICAgICAgICAgICBjYXNlICJoIjoKICAgICAgICAgICAgICByZXR1cm4gdGhpcy5udW0oZHQuaG91ciAlIDEyID09PSAwID8gMTIgOiBkdC5ob3VyICUgMTIpOwogICAgICAgICAgICBjYXNlICJoaCI6CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubnVtKGR0LmhvdXIgJSAxMiA9PT0gMCA/IDEyIDogZHQuaG91ciAlIDEyLCAyKTsKICAgICAgICAgICAgY2FzZSAiSCI6CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubnVtKGR0LmhvdXIpOwogICAgICAgICAgICBjYXNlICJISCI6CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubnVtKGR0LmhvdXIsIDIpOwogICAgICAgICAgICAvLyBvZmZzZXQKICAgICAgICAgICAgY2FzZSAiWiI6CiAgICAgICAgICAgICAgLy8gbGlrZSArNgogICAgICAgICAgICAgIHJldHVybiBmb3JtYXRPZmZzZXQoeyBmb3JtYXQ6ICJuYXJyb3ciLCBhbGxvd1o6IHRoaXMub3B0cy5hbGxvd1ogfSk7CiAgICAgICAgICAgIGNhc2UgIlpaIjoKICAgICAgICAgICAgICAvLyBsaWtlICswNjowMAogICAgICAgICAgICAgIHJldHVybiBmb3JtYXRPZmZzZXQoeyBmb3JtYXQ6ICJzaG9ydCIsIGFsbG93WjogdGhpcy5vcHRzLmFsbG93WiB9KTsKICAgICAgICAgICAgY2FzZSAiWlpaIjoKICAgICAgICAgICAgICAvLyBsaWtlICswNjAwCiAgICAgICAgICAgICAgcmV0dXJuIGZvcm1hdE9mZnNldCh7IGZvcm1hdDogInRlY2hpZSIsIGFsbG93WjogdGhpcy5vcHRzLmFsbG93WiB9KTsKICAgICAgICAgICAgY2FzZSAiWlpaWiI6CiAgICAgICAgICAgICAgLy8gbGlrZSBFU1QKICAgICAgICAgICAgICByZXR1cm4gZHQuem9uZS5vZmZzZXROYW1lKGR0LnRzLCB7IGZvcm1hdDogInNob3J0IiwgbG9jYWxlOiB0aGlzLmxvYy5sb2NhbGUgfSk7CiAgICAgICAgICAgIGNhc2UgIlpaWlpaIjoKICAgICAgICAgICAgICAvLyBsaWtlIEVhc3Rlcm4gU3RhbmRhcmQgVGltZQogICAgICAgICAgICAgIHJldHVybiBkdC56b25lLm9mZnNldE5hbWUoZHQudHMsIHsgZm9ybWF0OiAibG9uZyIsIGxvY2FsZTogdGhpcy5sb2MubG9jYWxlIH0pOwogICAgICAgICAgICAvLyB6b25lCiAgICAgICAgICAgIGNhc2UgInoiOgogICAgICAgICAgICAgIC8vIGxpa2UgQW1lcmljYS9OZXdfWW9yawogICAgICAgICAgICAgIHJldHVybiBkdC56b25lTmFtZTsKICAgICAgICAgICAgLy8gbWVyaWRpZW1zCiAgICAgICAgICAgIGNhc2UgImEiOgogICAgICAgICAgICAgIHJldHVybiBtZXJpZGllbSgpOwogICAgICAgICAgICAvLyBkYXRlcwogICAgICAgICAgICBjYXNlICJkIjoKICAgICAgICAgICAgICByZXR1cm4gdXNlRGF0ZVRpbWVGb3JtYXR0ZXIgPyBzdHJpbmcoeyBkYXk6ICJudW1lcmljIiB9LCAiZGF5IikgOiB0aGlzLm51bShkdC5kYXkpOwogICAgICAgICAgICBjYXNlICJkZCI6CiAgICAgICAgICAgICAgcmV0dXJuIHVzZURhdGVUaW1lRm9ybWF0dGVyID8gc3RyaW5nKHsgZGF5OiAiMi1kaWdpdCIgfSwgImRheSIpIDogdGhpcy5udW0oZHQuZGF5LCAyKTsKICAgICAgICAgICAgLy8gd2Vla2RheXMgLSBzdGFuZGFsb25lCiAgICAgICAgICAgIGNhc2UgImMiOgogICAgICAgICAgICAgIC8vIGxpa2UgMQogICAgICAgICAgICAgIHJldHVybiB0aGlzLm51bShkdC53ZWVrZGF5KTsKICAgICAgICAgICAgY2FzZSAiY2NjIjoKICAgICAgICAgICAgICAvLyBsaWtlICdUdWVzJwogICAgICAgICAgICAgIHJldHVybiB3ZWVrZGF5KCJzaG9ydCIsIHRydWUpOwogICAgICAgICAgICBjYXNlICJjY2NjIjoKICAgICAgICAgICAgICAvLyBsaWtlICdUdWVzZGF5JwogICAgICAgICAgICAgIHJldHVybiB3ZWVrZGF5KCJsb25nIiwgdHJ1ZSk7CiAgICAgICAgICAgIGNhc2UgImNjY2NjIjoKICAgICAgICAgICAgICAvLyBsaWtlICdUJwogICAgICAgICAgICAgIHJldHVybiB3ZWVrZGF5KCJuYXJyb3ciLCB0cnVlKTsKICAgICAgICAgICAgLy8gd2Vla2RheXMgLSBmb3JtYXQKICAgICAgICAgICAgY2FzZSAiRSI6CiAgICAgICAgICAgICAgLy8gbGlrZSAxCiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubnVtKGR0LndlZWtkYXkpOwogICAgICAgICAgICBjYXNlICJFRUUiOgogICAgICAgICAgICAgIC8vIGxpa2UgJ1R1ZXMnCiAgICAgICAgICAgICAgcmV0dXJuIHdlZWtkYXkoInNob3J0IiwgZmFsc2UpOwogICAgICAgICAgICBjYXNlICJFRUVFIjoKICAgICAgICAgICAgICAvLyBsaWtlICdUdWVzZGF5JwogICAgICAgICAgICAgIHJldHVybiB3ZWVrZGF5KCJsb25nIiwgZmFsc2UpOwogICAgICAgICAgICBjYXNlICJFRUVFRSI6CiAgICAgICAgICAgICAgLy8gbGlrZSAnVCcKICAgICAgICAgICAgICByZXR1cm4gd2Vla2RheSgibmFycm93IiwgZmFsc2UpOwogICAgICAgICAgICAvLyBtb250aHMgLSBzdGFuZGFsb25lCiAgICAgICAgICAgIGNhc2UgIkwiOgogICAgICAgICAgICAgIC8vIGxpa2UgMQogICAgICAgICAgICAgIHJldHVybiB1c2VEYXRlVGltZUZvcm1hdHRlcgogICAgICAgICAgICAgICAgPyBzdHJpbmcoeyBtb250aDogIm51bWVyaWMiLCBkYXk6ICJudW1lcmljIiB9LCAibW9udGgiKQogICAgICAgICAgICAgICAgOiB0aGlzLm51bShkdC5tb250aCk7CiAgICAgICAgICAgIGNhc2UgIkxMIjoKICAgICAgICAgICAgICAvLyBsaWtlIDAxLCBkb2Vzbid0IHNlZW0gdG8gd29yawogICAgICAgICAgICAgIHJldHVybiB1c2VEYXRlVGltZUZvcm1hdHRlcgogICAgICAgICAgICAgICAgPyBzdHJpbmcoeyBtb250aDogIjItZGlnaXQiLCBkYXk6ICJudW1lcmljIiB9LCAibW9udGgiKQogICAgICAgICAgICAgICAgOiB0aGlzLm51bShkdC5tb250aCwgMik7CiAgICAgICAgICAgIGNhc2UgIkxMTCI6CiAgICAgICAgICAgICAgLy8gbGlrZSBKYW4KICAgICAgICAgICAgICByZXR1cm4gbW9udGgoInNob3J0IiwgdHJ1ZSk7CiAgICAgICAgICAgIGNhc2UgIkxMTEwiOgogICAgICAgICAgICAgIC8vIGxpa2UgSmFudWFyeQogICAgICAgICAgICAgIHJldHVybiBtb250aCgibG9uZyIsIHRydWUpOwogICAgICAgICAgICBjYXNlICJMTExMTCI6CiAgICAgICAgICAgICAgLy8gbGlrZSBKCiAgICAgICAgICAgICAgcmV0dXJuIG1vbnRoKCJuYXJyb3ciLCB0cnVlKTsKICAgICAgICAgICAgLy8gbW9udGhzIC0gZm9ybWF0CiAgICAgICAgICAgIGNhc2UgIk0iOgogICAgICAgICAgICAgIC8vIGxpa2UgMQogICAgICAgICAgICAgIHJldHVybiB1c2VEYXRlVGltZUZvcm1hdHRlcgogICAgICAgICAgICAgICAgPyBzdHJpbmcoeyBtb250aDogIm51bWVyaWMiIH0sICJtb250aCIpCiAgICAgICAgICAgICAgICA6IHRoaXMubnVtKGR0Lm1vbnRoKTsKICAgICAgICAgICAgY2FzZSAiTU0iOgogICAgICAgICAgICAgIC8vIGxpa2UgMDEKICAgICAgICAgICAgICByZXR1cm4gdXNlRGF0ZVRpbWVGb3JtYXR0ZXIKICAgICAgICAgICAgICAgID8gc3RyaW5nKHsgbW9udGg6ICIyLWRpZ2l0IiB9LCAibW9udGgiKQogICAgICAgICAgICAgICAgOiB0aGlzLm51bShkdC5tb250aCwgMik7CiAgICAgICAgICAgIGNhc2UgIk1NTSI6CiAgICAgICAgICAgICAgLy8gbGlrZSBKYW4KICAgICAgICAgICAgICByZXR1cm4gbW9udGgoInNob3J0IiwgZmFsc2UpOwogICAgICAgICAgICBjYXNlICJNTU1NIjoKICAgICAgICAgICAgICAvLyBsaWtlIEphbnVhcnkKICAgICAgICAgICAgICByZXR1cm4gbW9udGgoImxvbmciLCBmYWxzZSk7CiAgICAgICAgICAgIGNhc2UgIk1NTU1NIjoKICAgICAgICAgICAgICAvLyBsaWtlIEoKICAgICAgICAgICAgICByZXR1cm4gbW9udGgoIm5hcnJvdyIsIGZhbHNlKTsKICAgICAgICAgICAgLy8geWVhcnMKICAgICAgICAgICAgY2FzZSAieSI6CiAgICAgICAgICAgICAgLy8gbGlrZSAyMDE0CiAgICAgICAgICAgICAgcmV0dXJuIHVzZURhdGVUaW1lRm9ybWF0dGVyID8gc3RyaW5nKHsgeWVhcjogIm51bWVyaWMiIH0sICJ5ZWFyIikgOiB0aGlzLm51bShkdC55ZWFyKTsKICAgICAgICAgICAgY2FzZSAieXkiOgogICAgICAgICAgICAgIC8vIGxpa2UgMTQKICAgICAgICAgICAgICByZXR1cm4gdXNlRGF0ZVRpbWVGb3JtYXR0ZXIKICAgICAgICAgICAgICAgID8gc3RyaW5nKHsgeWVhcjogIjItZGlnaXQiIH0sICJ5ZWFyIikKICAgICAgICAgICAgICAgIDogdGhpcy5udW0oZHQueWVhci50b1N0cmluZygpLnNsaWNlKC0yKSwgMik7CiAgICAgICAgICAgIGNhc2UgInl5eXkiOgogICAgICAgICAgICAgIC8vIGxpa2UgMDAxMgogICAgICAgICAgICAgIHJldHVybiB1c2VEYXRlVGltZUZvcm1hdHRlcgogICAgICAgICAgICAgICAgPyBzdHJpbmcoeyB5ZWFyOiAibnVtZXJpYyIgfSwgInllYXIiKQogICAgICAgICAgICAgICAgOiB0aGlzLm51bShkdC55ZWFyLCA0KTsKICAgICAgICAgICAgY2FzZSAieXl5eXl5IjoKICAgICAgICAgICAgICAvLyBsaWtlIDAwMDAxMgogICAgICAgICAgICAgIHJldHVybiB1c2VEYXRlVGltZUZvcm1hdHRlcgogICAgICAgICAgICAgICAgPyBzdHJpbmcoeyB5ZWFyOiAibnVtZXJpYyIgfSwgInllYXIiKQogICAgICAgICAgICAgICAgOiB0aGlzLm51bShkdC55ZWFyLCA2KTsKICAgICAgICAgICAgLy8gZXJhcwogICAgICAgICAgICBjYXNlICJHIjoKICAgICAgICAgICAgICAvLyBsaWtlIEFECiAgICAgICAgICAgICAgcmV0dXJuIGVyYSgic2hvcnQiKTsKICAgICAgICAgICAgY2FzZSAiR0ciOgogICAgICAgICAgICAgIC8vIGxpa2UgQW5ubyBEb21pbmkKICAgICAgICAgICAgICByZXR1cm4gZXJhKCJsb25nIik7CiAgICAgICAgICAgIGNhc2UgIkdHR0dHIjoKICAgICAgICAgICAgICByZXR1cm4gZXJhKCJuYXJyb3ciKTsKICAgICAgICAgICAgY2FzZSAia2siOgogICAgICAgICAgICAgIHJldHVybiB0aGlzLm51bShkdC53ZWVrWWVhci50b1N0cmluZygpLnNsaWNlKC0yKSwgMik7CiAgICAgICAgICAgIGNhc2UgImtra2siOgogICAgICAgICAgICAgIHJldHVybiB0aGlzLm51bShkdC53ZWVrWWVhciwgNCk7CiAgICAgICAgICAgIGNhc2UgIlciOgogICAgICAgICAgICAgIHJldHVybiB0aGlzLm51bShkdC53ZWVrTnVtYmVyKTsKICAgICAgICAgICAgY2FzZSAiV1ciOgogICAgICAgICAgICAgIHJldHVybiB0aGlzLm51bShkdC53ZWVrTnVtYmVyLCAyKTsKICAgICAgICAgICAgY2FzZSAibyI6CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubnVtKGR0Lm9yZGluYWwpOwogICAgICAgICAgICBjYXNlICJvb28iOgogICAgICAgICAgICAgIHJldHVybiB0aGlzLm51bShkdC5vcmRpbmFsLCAzKTsKICAgICAgICAgICAgY2FzZSAicSI6CiAgICAgICAgICAgICAgLy8gbGlrZSAxCiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubnVtKGR0LnF1YXJ0ZXIpOwogICAgICAgICAgICBjYXNlICJxcSI6CiAgICAgICAgICAgICAgLy8gbGlrZSAwMQogICAgICAgICAgICAgIHJldHVybiB0aGlzLm51bShkdC5xdWFydGVyLCAyKTsKICAgICAgICAgICAgY2FzZSAiWCI6CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubnVtKE1hdGguZmxvb3IoZHQudHMgLyAxMDAwKSk7CiAgICAgICAgICAgIGNhc2UgIngiOgogICAgICAgICAgICAgIHJldHVybiB0aGlzLm51bShkdC50cyk7CiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgcmV0dXJuIG1heWJlTWFjcm8odG9rZW4pOwogICAgICAgICAgfQogICAgICAgIH07CgogICAgICByZXR1cm4gc3RyaW5naWZ5VG9rZW5zKEZvcm1hdHRlci5wYXJzZUZvcm1hdChmbXQpLCB0b2tlblRvU3RyaW5nKTsKICAgIH0KCiAgICBmb3JtYXREdXJhdGlvbkZyb21TdHJpbmcoZHVyLCBmbXQpIHsKICAgICAgY29uc3QgdG9rZW5Ub0ZpZWxkID0gKHRva2VuKSA9PiB7CiAgICAgICAgICBzd2l0Y2ggKHRva2VuWzBdKSB7CiAgICAgICAgICAgIGNhc2UgIlMiOgogICAgICAgICAgICAgIHJldHVybiAibWlsbGlzZWNvbmQiOwogICAgICAgICAgICBjYXNlICJzIjoKICAgICAgICAgICAgICByZXR1cm4gInNlY29uZCI7CiAgICAgICAgICAgIGNhc2UgIm0iOgogICAgICAgICAgICAgIHJldHVybiAibWludXRlIjsKICAgICAgICAgICAgY2FzZSAiaCI6CiAgICAgICAgICAgICAgcmV0dXJuICJob3VyIjsKICAgICAgICAgICAgY2FzZSAiZCI6CiAgICAgICAgICAgICAgcmV0dXJuICJkYXkiOwogICAgICAgICAgICBjYXNlICJ3IjoKICAgICAgICAgICAgICByZXR1cm4gIndlZWsiOwogICAgICAgICAgICBjYXNlICJNIjoKICAgICAgICAgICAgICByZXR1cm4gIm1vbnRoIjsKICAgICAgICAgICAgY2FzZSAieSI6CiAgICAgICAgICAgICAgcmV0dXJuICJ5ZWFyIjsKICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHRva2VuVG9TdHJpbmcgPSAobGlsZHVyKSA9PiAodG9rZW4pID0+IHsKICAgICAgICAgIGNvbnN0IG1hcHBlZCA9IHRva2VuVG9GaWVsZCh0b2tlbik7CiAgICAgICAgICBpZiAobWFwcGVkKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLm51bShsaWxkdXIuZ2V0KG1hcHBlZCksIHRva2VuLmxlbmd0aCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gdG9rZW47CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICB0b2tlbnMgPSBGb3JtYXR0ZXIucGFyc2VGb3JtYXQoZm10KSwKICAgICAgICByZWFsVG9rZW5zID0gdG9rZW5zLnJlZHVjZSgKICAgICAgICAgIChmb3VuZCwgeyBsaXRlcmFsLCB2YWwgfSkgPT4gKGxpdGVyYWwgPyBmb3VuZCA6IGZvdW5kLmNvbmNhdCh2YWwpKSwKICAgICAgICAgIFtdCiAgICAgICAgKSwKICAgICAgICBjb2xsYXBzZWQgPSBkdXIuc2hpZnRUbyguLi5yZWFsVG9rZW5zLm1hcCh0b2tlblRvRmllbGQpLmZpbHRlcigodCkgPT4gdCkpOwogICAgICByZXR1cm4gc3RyaW5naWZ5VG9rZW5zKHRva2VucywgdG9rZW5Ub1N0cmluZyhjb2xsYXBzZWQpKTsKICAgIH0KICB9CgogIGNsYXNzIEludmFsaWQgewogICAgY29uc3RydWN0b3IocmVhc29uLCBleHBsYW5hdGlvbikgewogICAgICB0aGlzLnJlYXNvbiA9IHJlYXNvbjsKICAgICAgdGhpcy5leHBsYW5hdGlvbiA9IGV4cGxhbmF0aW9uOwogICAgfQoKICAgIHRvTWVzc2FnZSgpIHsKICAgICAgaWYgKHRoaXMuZXhwbGFuYXRpb24pIHsKICAgICAgICByZXR1cm4gYCR7dGhpcy5yZWFzb259OiAke3RoaXMuZXhwbGFuYXRpb259YDsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gdGhpcy5yZWFzb247CiAgICAgIH0KICAgIH0KICB9CgogIC8qKgogICAqIEBpbnRlcmZhY2UKICAgKi8KICBjbGFzcyBab25lIHsKICAgIC8qKgogICAgICogVGhlIHR5cGUgb2Ygem9uZQogICAgICogQGFic3RyYWN0CiAgICAgKiBAdHlwZSB7c3RyaW5nfQogICAgICovCiAgICBnZXQgdHlwZSgpIHsKICAgICAgdGhyb3cgbmV3IFpvbmVJc0Fic3RyYWN0RXJyb3IoKTsKICAgIH0KCiAgICAvKioKICAgICAqIFRoZSBuYW1lIG9mIHRoaXMgem9uZS4KICAgICAqIEBhYnN0cmFjdAogICAgICogQHR5cGUge3N0cmluZ30KICAgICAqLwogICAgZ2V0IG5hbWUoKSB7CiAgICAgIHRocm93IG5ldyBab25lSXNBYnN0cmFjdEVycm9yKCk7CiAgICB9CgogICAgZ2V0IGlhbmFOYW1lKCkgewogICAgICByZXR1cm4gdGhpcy5uYW1lOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBvZmZzZXQgaXMga25vd24gdG8gYmUgZml4ZWQgZm9yIHRoZSB3aG9sZSB5ZWFyLgogICAgICogQGFic3RyYWN0CiAgICAgKiBAdHlwZSB7Ym9vbGVhbn0KICAgICAqLwogICAgZ2V0IGlzVW5pdmVyc2FsKCkgewogICAgICB0aHJvdyBuZXcgWm9uZUlzQWJzdHJhY3RFcnJvcigpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyB0aGUgb2Zmc2V0J3MgY29tbW9uIG5hbWUgKHN1Y2ggYXMgRVNUKSBhdCB0aGUgc3BlY2lmaWVkIHRpbWVzdGFtcAogICAgICogQGFic3RyYWN0CiAgICAgKiBAcGFyYW0ge251bWJlcn0gdHMgLSBFcG9jaCBtaWxsaXNlY29uZHMgZm9yIHdoaWNoIHRvIGdldCB0aGUgbmFtZQogICAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBPcHRpb25zIHRvIGFmZmVjdCB0aGUgZm9ybWF0CiAgICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0cy5mb3JtYXQgLSBXaGF0IHN0eWxlIG9mIG9mZnNldCB0byByZXR1cm4uIEFjY2VwdHMgJ2xvbmcnIG9yICdzaG9ydCcuCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0cy5sb2NhbGUgLSBXaGF0IGxvY2FsZSB0byByZXR1cm4gdGhlIG9mZnNldCBuYW1lIGluLgogICAgICogQHJldHVybiB7c3RyaW5nfQogICAgICovCiAgICBvZmZzZXROYW1lKHRzLCBvcHRzKSB7CiAgICAgIHRocm93IG5ldyBab25lSXNBYnN0cmFjdEVycm9yKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSBvZmZzZXQncyB2YWx1ZSBhcyBhIHN0cmluZwogICAgICogQGFic3RyYWN0CiAgICAgKiBAcGFyYW0ge251bWJlcn0gdHMgLSBFcG9jaCBtaWxsaXNlY29uZHMgZm9yIHdoaWNoIHRvIGdldCB0aGUgb2Zmc2V0CiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZm9ybWF0IC0gV2hhdCBzdHlsZSBvZiBvZmZzZXQgdG8gcmV0dXJuLgogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgIEFjY2VwdHMgJ25hcnJvdycsICdzaG9ydCcsIG9yICd0ZWNoaWUnLiBSZXR1cm5pbmcgJys2JywgJyswNjowMCcsIG9yICcrMDYwMCcgcmVzcGVjdGl2ZWx5CiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9CiAgICAgKi8KICAgIGZvcm1hdE9mZnNldCh0cywgZm9ybWF0KSB7CiAgICAgIHRocm93IG5ldyBab25lSXNBYnN0cmFjdEVycm9yKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIG9mZnNldCBpbiBtaW51dGVzIGZvciB0aGlzIHpvbmUgYXQgdGhlIHNwZWNpZmllZCB0aW1lc3RhbXAuCiAgICAgKiBAYWJzdHJhY3QKICAgICAqIEBwYXJhbSB7bnVtYmVyfSB0cyAtIEVwb2NoIG1pbGxpc2Vjb25kcyBmb3Igd2hpY2ggdG8gY29tcHV0ZSB0aGUgb2Zmc2V0CiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9CiAgICAgKi8KICAgIG9mZnNldCh0cykgewogICAgICB0aHJvdyBuZXcgWm9uZUlzQWJzdHJhY3RFcnJvcigpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHdoZXRoZXIgdGhpcyBab25lIGlzIGVxdWFsIHRvIGFub3RoZXIgem9uZQogICAgICogQGFic3RyYWN0CiAgICAgKiBAcGFyYW0ge1pvbmV9IG90aGVyWm9uZSAtIHRoZSB6b25lIHRvIGNvbXBhcmUKICAgICAqIEByZXR1cm4ge2Jvb2xlYW59CiAgICAgKi8KICAgIGVxdWFscyhvdGhlclpvbmUpIHsKICAgICAgdGhyb3cgbmV3IFpvbmVJc0Fic3RyYWN0RXJyb3IoKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB3aGV0aGVyIHRoaXMgWm9uZSBpcyB2YWxpZC4KICAgICAqIEBhYnN0cmFjdAogICAgICogQHR5cGUge2Jvb2xlYW59CiAgICAgKi8KICAgIGdldCBpc1ZhbGlkKCkgewogICAgICB0aHJvdyBuZXcgWm9uZUlzQWJzdHJhY3RFcnJvcigpOwogICAgfQogIH0KCiAgbGV0IHNpbmdsZXRvbiQxID0gbnVsbDsKCiAgLyoqCiAgICogUmVwcmVzZW50cyB0aGUgbG9jYWwgem9uZSBmb3IgdGhpcyBKYXZhU2NyaXB0IGVudmlyb25tZW50LgogICAqIEBpbXBsZW1lbnRzIHtab25lfQogICAqLwogIGNsYXNzIFN5c3RlbVpvbmUgZXh0ZW5kcyBab25lIHsKICAgIC8qKgogICAgICogR2V0IGEgc2luZ2xldG9uIGluc3RhbmNlIG9mIHRoZSBsb2NhbCB6b25lCiAgICAgKiBAcmV0dXJuIHtTeXN0ZW1ab25lfQogICAgICovCiAgICBzdGF0aWMgZ2V0IGluc3RhbmNlKCkgewogICAgICBpZiAoc2luZ2xldG9uJDEgPT09IG51bGwpIHsKICAgICAgICBzaW5nbGV0b24kMSA9IG5ldyBTeXN0ZW1ab25lKCk7CiAgICAgIH0KICAgICAgcmV0dXJuIHNpbmdsZXRvbiQxOwogICAgfQoKICAgIC8qKiBAb3ZlcnJpZGUgKiovCiAgICBnZXQgdHlwZSgpIHsKICAgICAgcmV0dXJuICJzeXN0ZW0iOwogICAgfQoKICAgIC8qKiBAb3ZlcnJpZGUgKiovCiAgICBnZXQgbmFtZSgpIHsKICAgICAgcmV0dXJuIG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KCkucmVzb2x2ZWRPcHRpb25zKCkudGltZVpvbmU7CiAgICB9CgogICAgLyoqIEBvdmVycmlkZSAqKi8KICAgIGdldCBpc1VuaXZlcnNhbCgpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIC8qKiBAb3ZlcnJpZGUgKiovCiAgICBvZmZzZXROYW1lKHRzLCB7IGZvcm1hdCwgbG9jYWxlIH0pIHsKICAgICAgcmV0dXJuIHBhcnNlWm9uZUluZm8odHMsIGZvcm1hdCwgbG9jYWxlKTsKICAgIH0KCiAgICAvKiogQG92ZXJyaWRlICoqLwogICAgZm9ybWF0T2Zmc2V0KHRzLCBmb3JtYXQpIHsKICAgICAgcmV0dXJuIGZvcm1hdE9mZnNldCh0aGlzLm9mZnNldCh0cyksIGZvcm1hdCk7CiAgICB9CgogICAgLyoqIEBvdmVycmlkZSAqKi8KICAgIG9mZnNldCh0cykgewogICAgICByZXR1cm4gLW5ldyBEYXRlKHRzKS5nZXRUaW1lem9uZU9mZnNldCgpOwogICAgfQoKICAgIC8qKiBAb3ZlcnJpZGUgKiovCiAgICBlcXVhbHMob3RoZXJab25lKSB7CiAgICAgIHJldHVybiBvdGhlclpvbmUudHlwZSA9PT0gInN5c3RlbSI7CiAgICB9CgogICAgLyoqIEBvdmVycmlkZSAqKi8KICAgIGdldCBpc1ZhbGlkKCkgewogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICB9CgogIGxldCBkdGZDYWNoZSA9IHt9OwogIGZ1bmN0aW9uIG1ha2VEVEYoem9uZSkgewogICAgaWYgKCFkdGZDYWNoZVt6b25lXSkgewogICAgICBkdGZDYWNoZVt6b25lXSA9IG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KCJlbi1VUyIsIHsKICAgICAgICBob3VyMTI6IGZhbHNlLAogICAgICAgIHRpbWVab25lOiB6b25lLAogICAgICAgIHllYXI6ICJudW1lcmljIiwKICAgICAgICBtb250aDogIjItZGlnaXQiLAogICAgICAgIGRheTogIjItZGlnaXQiLAogICAgICAgIGhvdXI6ICIyLWRpZ2l0IiwKICAgICAgICBtaW51dGU6ICIyLWRpZ2l0IiwKICAgICAgICBzZWNvbmQ6ICIyLWRpZ2l0IiwKICAgICAgICBlcmE6ICJzaG9ydCIsCiAgICAgIH0pOwogICAgfQogICAgcmV0dXJuIGR0ZkNhY2hlW3pvbmVdOwogIH0KCiAgY29uc3QgdHlwZVRvUG9zID0gewogICAgeWVhcjogMCwKICAgIG1vbnRoOiAxLAogICAgZGF5OiAyLAogICAgZXJhOiAzLAogICAgaG91cjogNCwKICAgIG1pbnV0ZTogNSwKICAgIHNlY29uZDogNiwKICB9OwoKICBmdW5jdGlvbiBoYWNreU9mZnNldChkdGYsIGRhdGUpIHsKICAgIGNvbnN0IGZvcm1hdHRlZCA9IGR0Zi5mb3JtYXQoZGF0ZSkucmVwbGFjZSgvXHUyMDBFL2csICIiKSwKICAgICAgcGFyc2VkID0gLyhcZCspXC8oXGQrKVwvKFxkKykgKEFEfEJDKSw/IChcZCspOihcZCspOihcZCspLy5leGVjKGZvcm1hdHRlZCksCiAgICAgIFssIGZNb250aCwgZkRheSwgZlllYXIsIGZhZE9yQmMsIGZIb3VyLCBmTWludXRlLCBmU2Vjb25kXSA9IHBhcnNlZDsKICAgIHJldHVybiBbZlllYXIsIGZNb250aCwgZkRheSwgZmFkT3JCYywgZkhvdXIsIGZNaW51dGUsIGZTZWNvbmRdOwogIH0KCiAgZnVuY3Rpb24gcGFydHNPZmZzZXQoZHRmLCBkYXRlKSB7CiAgICBjb25zdCBmb3JtYXR0ZWQgPSBkdGYuZm9ybWF0VG9QYXJ0cyhkYXRlKTsKICAgIGNvbnN0IGZpbGxlZCA9IFtdOwogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmb3JtYXR0ZWQubGVuZ3RoOyBpKyspIHsKICAgICAgY29uc3QgeyB0eXBlLCB2YWx1ZSB9ID0gZm9ybWF0dGVkW2ldOwogICAgICBjb25zdCBwb3MgPSB0eXBlVG9Qb3NbdHlwZV07CgogICAgICBpZiAodHlwZSA9PT0gImVyYSIpIHsKICAgICAgICBmaWxsZWRbcG9zXSA9IHZhbHVlOwogICAgICB9IGVsc2UgaWYgKCFpc1VuZGVmaW5lZChwb3MpKSB7CiAgICAgICAgZmlsbGVkW3Bvc10gPSBwYXJzZUludCh2YWx1ZSwgMTApOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gZmlsbGVkOwogIH0KCiAgbGV0IGlhbmFab25lQ2FjaGUgPSB7fTsKICAvKioKICAgKiBBIHpvbmUgaWRlbnRpZmllZCBieSBhbiBJQU5BIGlkZW50aWZpZXIsIGxpa2UgQW1lcmljYS9OZXdfWW9yawogICAqIEBpbXBsZW1lbnRzIHtab25lfQogICAqLwogIGNsYXNzIElBTkFab25lIGV4dGVuZHMgWm9uZSB7CiAgICAvKioKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIC0gWm9uZSBuYW1lCiAgICAgKiBAcmV0dXJuIHtJQU5BWm9uZX0KICAgICAqLwogICAgc3RhdGljIGNyZWF0ZShuYW1lKSB7CiAgICAgIGlmICghaWFuYVpvbmVDYWNoZVtuYW1lXSkgewogICAgICAgIGlhbmFab25lQ2FjaGVbbmFtZV0gPSBuZXcgSUFOQVpvbmUobmFtZSk7CiAgICAgIH0KICAgICAgcmV0dXJuIGlhbmFab25lQ2FjaGVbbmFtZV07CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXNldCBsb2NhbCBjYWNoZXMuIFNob3VsZCBvbmx5IGJlIG5lY2Vzc2FyeSBpbiB0ZXN0aW5nIHNjZW5hcmlvcy4KICAgICAqIEByZXR1cm4ge3ZvaWR9CiAgICAgKi8KICAgIHN0YXRpYyByZXNldENhY2hlKCkgewogICAgICBpYW5hWm9uZUNhY2hlID0ge307CiAgICAgIGR0ZkNhY2hlID0ge307CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhlIHByb3ZpZGVkIHN0cmluZyBpcyBhIHZhbGlkIHNwZWNpZmllci4gVGhpcyBvbmx5IGNoZWNrcyB0aGUgc3RyaW5nJ3MgZm9ybWF0LCBub3QgdGhhdCB0aGUgc3BlY2lmaWVyIGlkZW50aWZpZXMgYSBrbm93biB6b25lOyBzZWUgaXNWYWxpZFpvbmUgZm9yIHRoYXQuCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcyAtIFRoZSBzdHJpbmcgdG8gY2hlY2sgdmFsaWRpdHkgb24KICAgICAqIEBleGFtcGxlIElBTkFab25lLmlzVmFsaWRTcGVjaWZpZXIoIkFtZXJpY2EvTmV3X1lvcmsiKSAvLz0+IHRydWUKICAgICAqIEBleGFtcGxlIElBTkFab25lLmlzVmFsaWRTcGVjaWZpZXIoIlNwb3J0fn5ibG9ycCIpIC8vPT4gZmFsc2UKICAgICAqIEBkZXByZWNhdGVkIFRoaXMgbWV0aG9kIHJldHVybnMgZmFsc2UgZm9yIHNvbWUgdmFsaWQgSUFOQSBuYW1lcy4gVXNlIGlzVmFsaWRab25lIGluc3RlYWQuCiAgICAgKiBAcmV0dXJuIHtib29sZWFufQogICAgICovCiAgICBzdGF0aWMgaXNWYWxpZFNwZWNpZmllcihzKSB7CiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWRab25lKHMpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBwcm92aWRlZCBzdHJpbmcgaWRlbnRpZmllcyBhIHJlYWwgem9uZQogICAgICogQHBhcmFtIHtzdHJpbmd9IHpvbmUgLSBUaGUgc3RyaW5nIHRvIGNoZWNrCiAgICAgKiBAZXhhbXBsZSBJQU5BWm9uZS5pc1ZhbGlkWm9uZSgiQW1lcmljYS9OZXdfWW9yayIpIC8vPT4gdHJ1ZQogICAgICogQGV4YW1wbGUgSUFOQVpvbmUuaXNWYWxpZFpvbmUoIkZhbnRhc2lhL0Nhc3RsZSIpIC8vPT4gZmFsc2UKICAgICAqIEBleGFtcGxlIElBTkFab25lLmlzVmFsaWRab25lKCJTcG9ydH5+YmxvcnAiKSAvLz0+IGZhbHNlCiAgICAgKiBAcmV0dXJuIHtib29sZWFufQogICAgICovCiAgICBzdGF0aWMgaXNWYWxpZFpvbmUoem9uZSkgewogICAgICBpZiAoIXpvbmUpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgdHJ5IHsKICAgICAgICBuZXcgSW50bC5EYXRlVGltZUZvcm1hdCgiZW4tVVMiLCB7IHRpbWVab25lOiB6b25lIH0pLmZvcm1hdCgpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICB9CgogICAgY29uc3RydWN0b3IobmFtZSkgewogICAgICBzdXBlcigpOwogICAgICAvKiogQHByaXZhdGUgKiovCiAgICAgIHRoaXMuem9uZU5hbWUgPSBuYW1lOwogICAgICAvKiogQHByaXZhdGUgKiovCiAgICAgIHRoaXMudmFsaWQgPSBJQU5BWm9uZS5pc1ZhbGlkWm9uZShuYW1lKTsKICAgIH0KCiAgICAvKiogQG92ZXJyaWRlICoqLwogICAgZ2V0IHR5cGUoKSB7CiAgICAgIHJldHVybiAiaWFuYSI7CiAgICB9CgogICAgLyoqIEBvdmVycmlkZSAqKi8KICAgIGdldCBuYW1lKCkgewogICAgICByZXR1cm4gdGhpcy56b25lTmFtZTsKICAgIH0KCiAgICAvKiogQG92ZXJyaWRlICoqLwogICAgZ2V0IGlzVW5pdmVyc2FsKCkgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgLyoqIEBvdmVycmlkZSAqKi8KICAgIG9mZnNldE5hbWUodHMsIHsgZm9ybWF0LCBsb2NhbGUgfSkgewogICAgICByZXR1cm4gcGFyc2Vab25lSW5mbyh0cywgZm9ybWF0LCBsb2NhbGUsIHRoaXMubmFtZSk7CiAgICB9CgogICAgLyoqIEBvdmVycmlkZSAqKi8KICAgIGZvcm1hdE9mZnNldCh0cywgZm9ybWF0KSB7CiAgICAgIHJldHVybiBmb3JtYXRPZmZzZXQodGhpcy5vZmZzZXQodHMpLCBmb3JtYXQpOwogICAgfQoKICAgIC8qKiBAb3ZlcnJpZGUgKiovCiAgICBvZmZzZXQodHMpIHsKICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHRzKTsKCiAgICAgIGlmIChpc05hTihkYXRlKSkgcmV0dXJuIE5hTjsKCiAgICAgIGNvbnN0IGR0ZiA9IG1ha2VEVEYodGhpcy5uYW1lKTsKICAgICAgbGV0IFt5ZWFyLCBtb250aCwgZGF5LCBhZE9yQmMsIGhvdXIsIG1pbnV0ZSwgc2Vjb25kXSA9IGR0Zi5mb3JtYXRUb1BhcnRzCiAgICAgICAgPyBwYXJ0c09mZnNldChkdGYsIGRhdGUpCiAgICAgICAgOiBoYWNreU9mZnNldChkdGYsIGRhdGUpOwoKICAgICAgaWYgKGFkT3JCYyA9PT0gIkJDIikgewogICAgICAgIHllYXIgPSAtTWF0aC5hYnMoeWVhcikgKyAxOwogICAgICB9CgogICAgICAvLyBiZWNhdXNlIHdlJ3JlIHVzaW5nIGhvdXIxMiBhbmQgaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9MTAyNTU2NCZjYW49MiZxPSUyMjI0JTNBMDAlMjIlMjBkYXRldGltZWZvcm1hdAogICAgICBjb25zdCBhZGp1c3RlZEhvdXIgPSBob3VyID09PSAyNCA/IDAgOiBob3VyOwoKICAgICAgY29uc3QgYXNVVEMgPSBvYmpUb0xvY2FsVFMoewogICAgICAgIHllYXIsCiAgICAgICAgbW9udGgsCiAgICAgICAgZGF5LAogICAgICAgIGhvdXI6IGFkanVzdGVkSG91ciwKICAgICAgICBtaW51dGUsCiAgICAgICAgc2Vjb25kLAogICAgICAgIG1pbGxpc2Vjb25kOiAwLAogICAgICB9KTsKCiAgICAgIGxldCBhc1RTID0gK2RhdGU7CiAgICAgIGNvbnN0IG92ZXIgPSBhc1RTICUgMTAwMDsKICAgICAgYXNUUyAtPSBvdmVyID49IDAgPyBvdmVyIDogMTAwMCArIG92ZXI7CiAgICAgIHJldHVybiAoYXNVVEMgLSBhc1RTKSAvICg2MCAqIDEwMDApOwogICAgfQoKICAgIC8qKiBAb3ZlcnJpZGUgKiovCiAgICBlcXVhbHMob3RoZXJab25lKSB7CiAgICAgIHJldHVybiBvdGhlclpvbmUudHlwZSA9PT0gImlhbmEiICYmIG90aGVyWm9uZS5uYW1lID09PSB0aGlzLm5hbWU7CiAgICB9CgogICAgLyoqIEBvdmVycmlkZSAqKi8KICAgIGdldCBpc1ZhbGlkKCkgewogICAgICByZXR1cm4gdGhpcy52YWxpZDsKICAgIH0KICB9CgogIGxldCBzaW5nbGV0b24gPSBudWxsOwoKICAvKioKICAgKiBBIHpvbmUgd2l0aCBhIGZpeGVkIG9mZnNldCAobWVhbmluZyBubyBEU1QpCiAgICogQGltcGxlbWVudHMge1pvbmV9CiAgICovCiAgY2xhc3MgRml4ZWRPZmZzZXRab25lIGV4dGVuZHMgWm9uZSB7CiAgICAvKioKICAgICAqIEdldCBhIHNpbmdsZXRvbiBpbnN0YW5jZSBvZiBVVEMKICAgICAqIEByZXR1cm4ge0ZpeGVkT2Zmc2V0Wm9uZX0KICAgICAqLwogICAgc3RhdGljIGdldCB1dGNJbnN0YW5jZSgpIHsKICAgICAgaWYgKHNpbmdsZXRvbiA9PT0gbnVsbCkgewogICAgICAgIHNpbmdsZXRvbiA9IG5ldyBGaXhlZE9mZnNldFpvbmUoMCk7CiAgICAgIH0KICAgICAgcmV0dXJuIHNpbmdsZXRvbjsKICAgIH0KCiAgICAvKioKICAgICAqIEdldCBhbiBpbnN0YW5jZSB3aXRoIGEgc3BlY2lmaWVkIG9mZnNldAogICAgICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCAtIFRoZSBvZmZzZXQgaW4gbWludXRlcwogICAgICogQHJldHVybiB7Rml4ZWRPZmZzZXRab25lfQogICAgICovCiAgICBzdGF0aWMgaW5zdGFuY2Uob2Zmc2V0KSB7CiAgICAgIHJldHVybiBvZmZzZXQgPT09IDAgPyBGaXhlZE9mZnNldFpvbmUudXRjSW5zdGFuY2UgOiBuZXcgRml4ZWRPZmZzZXRab25lKG9mZnNldCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQgYW4gaW5zdGFuY2Ugb2YgRml4ZWRPZmZzZXRab25lIGZyb20gYSBVVEMgb2Zmc2V0IHN0cmluZywgbGlrZSAiVVRDKzYiCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcyAtIFRoZSBvZmZzZXQgc3RyaW5nIHRvIHBhcnNlCiAgICAgKiBAZXhhbXBsZSBGaXhlZE9mZnNldFpvbmUucGFyc2VTcGVjaWZpZXIoIlVUQys2IikKICAgICAqIEBleGFtcGxlIEZpeGVkT2Zmc2V0Wm9uZS5wYXJzZVNwZWNpZmllcigiVVRDKzA2IikKICAgICAqIEBleGFtcGxlIEZpeGVkT2Zmc2V0Wm9uZS5wYXJzZVNwZWNpZmllcigiVVRDLTY6MDAiKQogICAgICogQHJldHVybiB7Rml4ZWRPZmZzZXRab25lfQogICAgICovCiAgICBzdGF0aWMgcGFyc2VTcGVjaWZpZXIocykgewogICAgICBpZiAocykgewogICAgICAgIGNvbnN0IHIgPSBzLm1hdGNoKC9edXRjKD86KFsrLV1cZHsxLDJ9KSg/OjooXGR7Mn0pKT8pPyQvaSk7CiAgICAgICAgaWYgKHIpIHsKICAgICAgICAgIHJldHVybiBuZXcgRml4ZWRPZmZzZXRab25lKHNpZ25lZE9mZnNldChyWzFdLCByWzJdKSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBudWxsOwogICAgfQoKICAgIGNvbnN0cnVjdG9yKG9mZnNldCkgewogICAgICBzdXBlcigpOwogICAgICAvKiogQHByaXZhdGUgKiovCiAgICAgIHRoaXMuZml4ZWQgPSBvZmZzZXQ7CiAgICB9CgogICAgLyoqIEBvdmVycmlkZSAqKi8KICAgIGdldCB0eXBlKCkgewogICAgICByZXR1cm4gImZpeGVkIjsKICAgIH0KCiAgICAvKiogQG92ZXJyaWRlICoqLwogICAgZ2V0IG5hbWUoKSB7CiAgICAgIHJldHVybiB0aGlzLmZpeGVkID09PSAwID8gIlVUQyIgOiBgVVRDJHtmb3JtYXRPZmZzZXQodGhpcy5maXhlZCwgIm5hcnJvdyIpfWA7CiAgICB9CgogICAgZ2V0IGlhbmFOYW1lKCkgewogICAgICBpZiAodGhpcy5maXhlZCA9PT0gMCkgewogICAgICAgIHJldHVybiAiRXRjL1VUQyI7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIGBFdGMvR01UJHtmb3JtYXRPZmZzZXQoLXRoaXMuZml4ZWQsICJuYXJyb3ciKX1gOwogICAgICB9CiAgICB9CgogICAgLyoqIEBvdmVycmlkZSAqKi8KICAgIG9mZnNldE5hbWUoKSB7CiAgICAgIHJldHVybiB0aGlzLm5hbWU7CiAgICB9CgogICAgLyoqIEBvdmVycmlkZSAqKi8KICAgIGZvcm1hdE9mZnNldCh0cywgZm9ybWF0KSB7CiAgICAgIHJldHVybiBmb3JtYXRPZmZzZXQodGhpcy5maXhlZCwgZm9ybWF0KTsKICAgIH0KCiAgICAvKiogQG92ZXJyaWRlICoqLwogICAgZ2V0IGlzVW5pdmVyc2FsKCkgewogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKiogQG92ZXJyaWRlICoqLwogICAgb2Zmc2V0KCkgewogICAgICByZXR1cm4gdGhpcy5maXhlZDsKICAgIH0KCiAgICAvKiogQG92ZXJyaWRlICoqLwogICAgZXF1YWxzKG90aGVyWm9uZSkgewogICAgICByZXR1cm4gb3RoZXJab25lLnR5cGUgPT09ICJmaXhlZCIgJiYgb3RoZXJab25lLmZpeGVkID09PSB0aGlzLmZpeGVkOwogICAgfQoKICAgIC8qKiBAb3ZlcnJpZGUgKiovCiAgICBnZXQgaXNWYWxpZCgpIHsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgfQoKICAvKioKICAgKiBBIHpvbmUgdGhhdCBmYWlsZWQgdG8gcGFyc2UuIFlvdSBzaG91bGQgbmV2ZXIgbmVlZCB0byBpbnN0YW50aWF0ZSB0aGlzLgogICAqIEBpbXBsZW1lbnRzIHtab25lfQogICAqLwogIGNsYXNzIEludmFsaWRab25lIGV4dGVuZHMgWm9uZSB7CiAgICBjb25zdHJ1Y3Rvcih6b25lTmFtZSkgewogICAgICBzdXBlcigpOwogICAgICAvKiogIEBwcml2YXRlICovCiAgICAgIHRoaXMuem9uZU5hbWUgPSB6b25lTmFtZTsKICAgIH0KCiAgICAvKiogQG92ZXJyaWRlICoqLwogICAgZ2V0IHR5cGUoKSB7CiAgICAgIHJldHVybiAiaW52YWxpZCI7CiAgICB9CgogICAgLyoqIEBvdmVycmlkZSAqKi8KICAgIGdldCBuYW1lKCkgewogICAgICByZXR1cm4gdGhpcy56b25lTmFtZTsKICAgIH0KCiAgICAvKiogQG92ZXJyaWRlICoqLwogICAgZ2V0IGlzVW5pdmVyc2FsKCkgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgLyoqIEBvdmVycmlkZSAqKi8KICAgIG9mZnNldE5hbWUoKSB7CiAgICAgIHJldHVybiBudWxsOwogICAgfQoKICAgIC8qKiBAb3ZlcnJpZGUgKiovCiAgICBmb3JtYXRPZmZzZXQoKSB7CiAgICAgIHJldHVybiAiIjsKICAgIH0KCiAgICAvKiogQG92ZXJyaWRlICoqLwogICAgb2Zmc2V0KCkgewogICAgICByZXR1cm4gTmFOOwogICAgfQoKICAgIC8qKiBAb3ZlcnJpZGUgKiovCiAgICBlcXVhbHMoKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICAvKiogQG92ZXJyaWRlICoqLwogICAgZ2V0IGlzVmFsaWQoKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICB9CgogIC8qKgogICAqIEBwcml2YXRlCiAgICovCgogIGZ1bmN0aW9uIG5vcm1hbGl6ZVpvbmUoaW5wdXQsIGRlZmF1bHRab25lKSB7CiAgICBpZiAoaXNVbmRlZmluZWQoaW5wdXQpIHx8IGlucHV0ID09PSBudWxsKSB7CiAgICAgIHJldHVybiBkZWZhdWx0Wm9uZTsKICAgIH0gZWxzZSBpZiAoaW5wdXQgaW5zdGFuY2VvZiBab25lKSB7CiAgICAgIHJldHVybiBpbnB1dDsKICAgIH0gZWxzZSBpZiAoaXNTdHJpbmckMShpbnB1dCkpIHsKICAgICAgY29uc3QgbG93ZXJlZCA9IGlucHV0LnRvTG93ZXJDYXNlKCk7CiAgICAgIGlmIChsb3dlcmVkID09PSAiZGVmYXVsdCIpIHJldHVybiBkZWZhdWx0Wm9uZTsKICAgICAgZWxzZSBpZiAobG93ZXJlZCA9PT0gImxvY2FsIiB8fCBsb3dlcmVkID09PSAic3lzdGVtIikgcmV0dXJuIFN5c3RlbVpvbmUuaW5zdGFuY2U7CiAgICAgIGVsc2UgaWYgKGxvd2VyZWQgPT09ICJ1dGMiIHx8IGxvd2VyZWQgPT09ICJnbXQiKSByZXR1cm4gRml4ZWRPZmZzZXRab25lLnV0Y0luc3RhbmNlOwogICAgICBlbHNlIHJldHVybiBGaXhlZE9mZnNldFpvbmUucGFyc2VTcGVjaWZpZXIobG93ZXJlZCkgfHwgSUFOQVpvbmUuY3JlYXRlKGlucHV0KTsKICAgIH0gZWxzZSBpZiAoaXNOdW1iZXIkMShpbnB1dCkpIHsKICAgICAgcmV0dXJuIEZpeGVkT2Zmc2V0Wm9uZS5pbnN0YW5jZShpbnB1dCk7CiAgICB9IGVsc2UgaWYgKHR5cGVvZiBpbnB1dCA9PT0gIm9iamVjdCIgJiYgaW5wdXQub2Zmc2V0ICYmIHR5cGVvZiBpbnB1dC5vZmZzZXQgPT09ICJudW1iZXIiKSB7CiAgICAgIC8vIFRoaXMgaXMgZHVtYiwgYnV0IHRoZSBpbnN0YW5jZW9mIGNoZWNrIGFib3ZlIGRvZXNuJ3Qgc2VlbSB0byByZWFsbHkgd29yawogICAgICAvLyBzbyB3ZSdyZSBkdWNrIGNoZWNraW5nIGl0CiAgICAgIHJldHVybiBpbnB1dDsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBuZXcgSW52YWxpZFpvbmUoaW5wdXQpOwogICAgfQogIH0KCiAgbGV0IG5vdyA9ICgpID0+IERhdGUubm93KCksCiAgICBkZWZhdWx0Wm9uZSA9ICJzeXN0ZW0iLAogICAgZGVmYXVsdExvY2FsZSA9IG51bGwsCiAgICBkZWZhdWx0TnVtYmVyaW5nU3lzdGVtID0gbnVsbCwKICAgIGRlZmF1bHRPdXRwdXRDYWxlbmRhciA9IG51bGwsCiAgICB0aHJvd09uSW52YWxpZDsKCiAgLyoqCiAgICogU2V0dGluZ3MgY29udGFpbnMgc3RhdGljIGdldHRlcnMgYW5kIHNldHRlcnMgdGhhdCBjb250cm9sIEx1eG9uJ3Mgb3ZlcmFsbCBiZWhhdmlvci4gTHV4b24gaXMgYSBzaW1wbGUgbGlicmFyeSB3aXRoIGZldyBvcHRpb25zLCBidXQgdGhlIG9uZXMgaXQgZG9lcyBoYXZlIGxpdmUgaGVyZS4KICAgKi8KICBjbGFzcyBTZXR0aW5ncyB7CiAgICAvKioKICAgICAqIEdldCB0aGUgY2FsbGJhY2sgZm9yIHJldHVybmluZyB0aGUgY3VycmVudCB0aW1lc3RhbXAuCiAgICAgKiBAdHlwZSB7ZnVuY3Rpb259CiAgICAgKi8KICAgIHN0YXRpYyBnZXQgbm93KCkgewogICAgICByZXR1cm4gbm93OwogICAgfQoKICAgIC8qKgogICAgICogU2V0IHRoZSBjYWxsYmFjayBmb3IgcmV0dXJuaW5nIHRoZSBjdXJyZW50IHRpbWVzdGFtcC4KICAgICAqIFRoZSBmdW5jdGlvbiBzaG91bGQgcmV0dXJuIGEgbnVtYmVyLCB3aGljaCB3aWxsIGJlIGludGVycHJldGVkIGFzIGFuIEVwb2NoIG1pbGxpc2Vjb25kIGNvdW50CiAgICAgKiBAdHlwZSB7ZnVuY3Rpb259CiAgICAgKiBAZXhhbXBsZSBTZXR0aW5ncy5ub3cgPSAoKSA9PiBEYXRlLm5vdygpICsgMzAwMCAvLyBwcmV0ZW5kIGl0IGlzIDMgc2Vjb25kcyBpbiB0aGUgZnV0dXJlCiAgICAgKiBAZXhhbXBsZSBTZXR0aW5ncy5ub3cgPSAoKSA9PiAwIC8vIGFsd2F5cyBwcmV0ZW5kIGl0J3MgSmFuIDEsIDE5NzAgYXQgbWlkbmlnaHQgaW4gVVRDIHRpbWUKICAgICAqLwogICAgc3RhdGljIHNldCBub3cobikgewogICAgICBub3cgPSBuOwogICAgfQoKICAgIC8qKgogICAgICogU2V0IHRoZSBkZWZhdWx0IHRpbWUgem9uZSB0byBjcmVhdGUgRGF0ZVRpbWVzIGluLiBEb2VzIG5vdCBhZmZlY3QgZXhpc3RpbmcgaW5zdGFuY2VzLgogICAgICogVXNlIHRoZSB2YWx1ZSAic3lzdGVtIiB0byByZXNldCB0aGlzIHZhbHVlIHRvIHRoZSBzeXN0ZW0ncyB0aW1lIHpvbmUuCiAgICAgKiBAdHlwZSB7c3RyaW5nfQogICAgICovCiAgICBzdGF0aWMgc2V0IGRlZmF1bHRab25lKHpvbmUpIHsKICAgICAgZGVmYXVsdFpvbmUgPSB6b25lOwogICAgfQoKICAgIC8qKgogICAgICogR2V0IHRoZSBkZWZhdWx0IHRpbWUgem9uZSBvYmplY3QgY3VycmVudGx5IHVzZWQgdG8gY3JlYXRlIERhdGVUaW1lcy4gRG9lcyBub3QgYWZmZWN0IGV4aXN0aW5nIGluc3RhbmNlcy4KICAgICAqIFRoZSBkZWZhdWx0IHZhbHVlIGlzIHRoZSBzeXN0ZW0ncyB0aW1lIHpvbmUgKHRoZSBvbmUgc2V0IG9uIHRoZSBtYWNoaW5lIHRoYXQgcnVucyB0aGlzIGNvZGUpLgogICAgICogQHR5cGUge1pvbmV9CiAgICAgKi8KICAgIHN0YXRpYyBnZXQgZGVmYXVsdFpvbmUoKSB7CiAgICAgIHJldHVybiBub3JtYWxpemVab25lKGRlZmF1bHRab25lLCBTeXN0ZW1ab25lLmluc3RhbmNlKTsKICAgIH0KCiAgICAvKioKICAgICAqIEdldCB0aGUgZGVmYXVsdCBsb2NhbGUgdG8gY3JlYXRlIERhdGVUaW1lcyB3aXRoLiBEb2VzIG5vdCBhZmZlY3QgZXhpc3RpbmcgaW5zdGFuY2VzLgogICAgICogQHR5cGUge3N0cmluZ30KICAgICAqLwogICAgc3RhdGljIGdldCBkZWZhdWx0TG9jYWxlKCkgewogICAgICByZXR1cm4gZGVmYXVsdExvY2FsZTsKICAgIH0KCiAgICAvKioKICAgICAqIFNldCB0aGUgZGVmYXVsdCBsb2NhbGUgdG8gY3JlYXRlIERhdGVUaW1lcyB3aXRoLiBEb2VzIG5vdCBhZmZlY3QgZXhpc3RpbmcgaW5zdGFuY2VzLgogICAgICogQHR5cGUge3N0cmluZ30KICAgICAqLwogICAgc3RhdGljIHNldCBkZWZhdWx0TG9jYWxlKGxvY2FsZSkgewogICAgICBkZWZhdWx0TG9jYWxlID0gbG9jYWxlOwogICAgfQoKICAgIC8qKgogICAgICogR2V0IHRoZSBkZWZhdWx0IG51bWJlcmluZyBzeXN0ZW0gdG8gY3JlYXRlIERhdGVUaW1lcyB3aXRoLiBEb2VzIG5vdCBhZmZlY3QgZXhpc3RpbmcgaW5zdGFuY2VzLgogICAgICogQHR5cGUge3N0cmluZ30KICAgICAqLwogICAgc3RhdGljIGdldCBkZWZhdWx0TnVtYmVyaW5nU3lzdGVtKCkgewogICAgICByZXR1cm4gZGVmYXVsdE51bWJlcmluZ1N5c3RlbTsKICAgIH0KCiAgICAvKioKICAgICAqIFNldCB0aGUgZGVmYXVsdCBudW1iZXJpbmcgc3lzdGVtIHRvIGNyZWF0ZSBEYXRlVGltZXMgd2l0aC4gRG9lcyBub3QgYWZmZWN0IGV4aXN0aW5nIGluc3RhbmNlcy4KICAgICAqIEB0eXBlIHtzdHJpbmd9CiAgICAgKi8KICAgIHN0YXRpYyBzZXQgZGVmYXVsdE51bWJlcmluZ1N5c3RlbShudW1iZXJpbmdTeXN0ZW0pIHsKICAgICAgZGVmYXVsdE51bWJlcmluZ1N5c3RlbSA9IG51bWJlcmluZ1N5c3RlbTsKICAgIH0KCiAgICAvKioKICAgICAqIEdldCB0aGUgZGVmYXVsdCBvdXRwdXQgY2FsZW5kYXIgdG8gY3JlYXRlIERhdGVUaW1lcyB3aXRoLiBEb2VzIG5vdCBhZmZlY3QgZXhpc3RpbmcgaW5zdGFuY2VzLgogICAgICogQHR5cGUge3N0cmluZ30KICAgICAqLwogICAgc3RhdGljIGdldCBkZWZhdWx0T3V0cHV0Q2FsZW5kYXIoKSB7CiAgICAgIHJldHVybiBkZWZhdWx0T3V0cHV0Q2FsZW5kYXI7CiAgICB9CgogICAgLyoqCiAgICAgKiBTZXQgdGhlIGRlZmF1bHQgb3V0cHV0IGNhbGVuZGFyIHRvIGNyZWF0ZSBEYXRlVGltZXMgd2l0aC4gRG9lcyBub3QgYWZmZWN0IGV4aXN0aW5nIGluc3RhbmNlcy4KICAgICAqIEB0eXBlIHtzdHJpbmd9CiAgICAgKi8KICAgIHN0YXRpYyBzZXQgZGVmYXVsdE91dHB1dENhbGVuZGFyKG91dHB1dENhbGVuZGFyKSB7CiAgICAgIGRlZmF1bHRPdXRwdXRDYWxlbmRhciA9IG91dHB1dENhbGVuZGFyOwogICAgfQoKICAgIC8qKgogICAgICogR2V0IHdoZXRoZXIgTHV4b24gd2lsbCB0aHJvdyB3aGVuIGl0IGVuY291bnRlcnMgaW52YWxpZCBEYXRlVGltZXMsIER1cmF0aW9ucywgb3IgSW50ZXJ2YWxzCiAgICAgKiBAdHlwZSB7Ym9vbGVhbn0KICAgICAqLwogICAgc3RhdGljIGdldCB0aHJvd09uSW52YWxpZCgpIHsKICAgICAgcmV0dXJuIHRocm93T25JbnZhbGlkOwogICAgfQoKICAgIC8qKgogICAgICogU2V0IHdoZXRoZXIgTHV4b24gd2lsbCB0aHJvdyB3aGVuIGl0IGVuY291bnRlcnMgaW52YWxpZCBEYXRlVGltZXMsIER1cmF0aW9ucywgb3IgSW50ZXJ2YWxzCiAgICAgKiBAdHlwZSB7Ym9vbGVhbn0KICAgICAqLwogICAgc3RhdGljIHNldCB0aHJvd09uSW52YWxpZCh0KSB7CiAgICAgIHRocm93T25JbnZhbGlkID0gdDsKICAgIH0KCiAgICAvKioKICAgICAqIFJlc2V0IEx1eG9uJ3MgZ2xvYmFsIGNhY2hlcy4gU2hvdWxkIG9ubHkgYmUgbmVjZXNzYXJ5IGluIHRlc3Rpbmcgc2NlbmFyaW9zLgogICAgICogQHJldHVybiB7dm9pZH0KICAgICAqLwogICAgc3RhdGljIHJlc2V0Q2FjaGVzKCkgewogICAgICBMb2NhbGUucmVzZXRDYWNoZSgpOwogICAgICBJQU5BWm9uZS5yZXNldENhY2hlKCk7CiAgICB9CiAgfQoKICAvLyB0b2RvIC0gcmVtYXAgY2FjaGluZwoKICBsZXQgaW50bExGQ2FjaGUgPSB7fTsKICBmdW5jdGlvbiBnZXRDYWNoZWRMRihsb2NTdHJpbmcsIG9wdHMgPSB7fSkgewogICAgY29uc3Qga2V5ID0gSlNPTi5zdHJpbmdpZnkoW2xvY1N0cmluZywgb3B0c10pOwogICAgbGV0IGR0ZiA9IGludGxMRkNhY2hlW2tleV07CiAgICBpZiAoIWR0ZikgewogICAgICBkdGYgPSBuZXcgSW50bC5MaXN0Rm9ybWF0KGxvY1N0cmluZywgb3B0cyk7CiAgICAgIGludGxMRkNhY2hlW2tleV0gPSBkdGY7CiAgICB9CiAgICByZXR1cm4gZHRmOwogIH0KCiAgbGV0IGludGxEVENhY2hlID0ge307CiAgZnVuY3Rpb24gZ2V0Q2FjaGVkRFRGKGxvY1N0cmluZywgb3B0cyA9IHt9KSB7CiAgICBjb25zdCBrZXkgPSBKU09OLnN0cmluZ2lmeShbbG9jU3RyaW5nLCBvcHRzXSk7CiAgICBsZXQgZHRmID0gaW50bERUQ2FjaGVba2V5XTsKICAgIGlmICghZHRmKSB7CiAgICAgIGR0ZiA9IG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KGxvY1N0cmluZywgb3B0cyk7CiAgICAgIGludGxEVENhY2hlW2tleV0gPSBkdGY7CiAgICB9CiAgICByZXR1cm4gZHRmOwogIH0KCiAgbGV0IGludGxOdW1DYWNoZSA9IHt9OwogIGZ1bmN0aW9uIGdldENhY2hlZElORihsb2NTdHJpbmcsIG9wdHMgPSB7fSkgewogICAgY29uc3Qga2V5ID0gSlNPTi5zdHJpbmdpZnkoW2xvY1N0cmluZywgb3B0c10pOwogICAgbGV0IGluZiA9IGludGxOdW1DYWNoZVtrZXldOwogICAgaWYgKCFpbmYpIHsKICAgICAgaW5mID0gbmV3IEludGwuTnVtYmVyRm9ybWF0KGxvY1N0cmluZywgb3B0cyk7CiAgICAgIGludGxOdW1DYWNoZVtrZXldID0gaW5mOwogICAgfQogICAgcmV0dXJuIGluZjsKICB9CgogIGxldCBpbnRsUmVsQ2FjaGUgPSB7fTsKICBmdW5jdGlvbiBnZXRDYWNoZWRSVEYobG9jU3RyaW5nLCBvcHRzID0ge30pIHsKICAgIGNvbnN0IHsgYmFzZSwgLi4uY2FjaGVLZXlPcHRzIH0gPSBvcHRzOyAvLyBleGNsdWRlIGBiYXNlYCBmcm9tIHRoZSBvcHRpb25zCiAgICBjb25zdCBrZXkgPSBKU09OLnN0cmluZ2lmeShbbG9jU3RyaW5nLCBjYWNoZUtleU9wdHNdKTsKICAgIGxldCBpbmYgPSBpbnRsUmVsQ2FjaGVba2V5XTsKICAgIGlmICghaW5mKSB7CiAgICAgIGluZiA9IG5ldyBJbnRsLlJlbGF0aXZlVGltZUZvcm1hdChsb2NTdHJpbmcsIG9wdHMpOwogICAgICBpbnRsUmVsQ2FjaGVba2V5XSA9IGluZjsKICAgIH0KICAgIHJldHVybiBpbmY7CiAgfQoKICBsZXQgc3lzTG9jYWxlQ2FjaGUgPSBudWxsOwogIGZ1bmN0aW9uIHN5c3RlbUxvY2FsZSgpIHsKICAgIGlmIChzeXNMb2NhbGVDYWNoZSkgewogICAgICByZXR1cm4gc3lzTG9jYWxlQ2FjaGU7CiAgICB9IGVsc2UgewogICAgICBzeXNMb2NhbGVDYWNoZSA9IG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KCkucmVzb2x2ZWRPcHRpb25zKCkubG9jYWxlOwogICAgICByZXR1cm4gc3lzTG9jYWxlQ2FjaGU7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBwYXJzZUxvY2FsZVN0cmluZyhsb2NhbGVTdHIpIHsKICAgIC8vIEkgcmVhbGx5IHdhbnQgdG8gYXZvaWQgd3JpdGluZyBhIEJDUCA0NyBwYXJzZXIKICAgIC8vIHNlZSwgZS5nLiBodHRwczovL2dpdGh1Yi5jb20vd29vb3JtL2JjcC00NwogICAgLy8gSW5zdGVhZCwgd2UnbGwgZG8gdGhpczoKCiAgICAvLyBhKSBpZiB0aGUgc3RyaW5nIGhhcyBubyAtdSBleHRlbnNpb25zLCBqdXN0IGxlYXZlIGl0IGFsb25lCiAgICAvLyBiKSBpZiBpdCBkb2VzLCB1c2UgSW50bCB0byByZXNvbHZlIGV2ZXJ5dGhpbmcKICAgIC8vIGMpIGlmIEludGwgZmFpbHMsIHRyeSBhZ2FpbiB3aXRob3V0IHRoZSAtdQoKICAgIGNvbnN0IHVJbmRleCA9IGxvY2FsZVN0ci5pbmRleE9mKCItdS0iKTsKICAgIGlmICh1SW5kZXggPT09IC0xKSB7CiAgICAgIHJldHVybiBbbG9jYWxlU3RyXTsKICAgIH0gZWxzZSB7CiAgICAgIGxldCBvcHRpb25zOwogICAgICBjb25zdCBzbWFsbGVyID0gbG9jYWxlU3RyLnN1YnN0cmluZygwLCB1SW5kZXgpOwogICAgICB0cnkgewogICAgICAgIG9wdGlvbnMgPSBnZXRDYWNoZWREVEYobG9jYWxlU3RyKS5yZXNvbHZlZE9wdGlvbnMoKTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIG9wdGlvbnMgPSBnZXRDYWNoZWREVEYoc21hbGxlcikucmVzb2x2ZWRPcHRpb25zKCk7CiAgICAgIH0KCiAgICAgIGNvbnN0IHsgbnVtYmVyaW5nU3lzdGVtLCBjYWxlbmRhciB9ID0gb3B0aW9uczsKICAgICAgLy8gcmV0dXJuIHRoZSBzbWFsbGVyIG9uZSBzbyB0aGF0IHdlIGNhbiBhcHBlbmQgdGhlIGNhbGVuZGFyIGFuZCBudW1iZXJpbmcgb3ZlcnJpZGVzIHRvIGl0CiAgICAgIHJldHVybiBbc21hbGxlciwgbnVtYmVyaW5nU3lzdGVtLCBjYWxlbmRhcl07CiAgICB9CiAgfQoKICBmdW5jdGlvbiBpbnRsQ29uZmlnU3RyaW5nKGxvY2FsZVN0ciwgbnVtYmVyaW5nU3lzdGVtLCBvdXRwdXRDYWxlbmRhcikgewogICAgaWYgKG91dHB1dENhbGVuZGFyIHx8IG51bWJlcmluZ1N5c3RlbSkgewogICAgICBsb2NhbGVTdHIgKz0gIi11IjsKCiAgICAgIGlmIChvdXRwdXRDYWxlbmRhcikgewogICAgICAgIGxvY2FsZVN0ciArPSBgLWNhLSR7b3V0cHV0Q2FsZW5kYXJ9YDsKICAgICAgfQoKICAgICAgaWYgKG51bWJlcmluZ1N5c3RlbSkgewogICAgICAgIGxvY2FsZVN0ciArPSBgLW51LSR7bnVtYmVyaW5nU3lzdGVtfWA7CiAgICAgIH0KICAgICAgcmV0dXJuIGxvY2FsZVN0cjsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBsb2NhbGVTdHI7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBtYXBNb250aHMoZikgewogICAgY29uc3QgbXMgPSBbXTsKICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IDEyOyBpKyspIHsKICAgICAgY29uc3QgZHQgPSBEYXRlVGltZS51dGMoMjAxNiwgaSwgMSk7CiAgICAgIG1zLnB1c2goZihkdCkpOwogICAgfQogICAgcmV0dXJuIG1zOwogIH0KCiAgZnVuY3Rpb24gbWFwV2Vla2RheXMoZikgewogICAgY29uc3QgbXMgPSBbXTsKICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IDc7IGkrKykgewogICAgICBjb25zdCBkdCA9IERhdGVUaW1lLnV0YygyMDE2LCAxMSwgMTMgKyBpKTsKICAgICAgbXMucHVzaChmKGR0KSk7CiAgICB9CiAgICByZXR1cm4gbXM7CiAgfQoKICBmdW5jdGlvbiBsaXN0U3R1ZmYobG9jLCBsZW5ndGgsIGRlZmF1bHRPSywgZW5nbGlzaEZuLCBpbnRsRm4pIHsKICAgIGNvbnN0IG1vZGUgPSBsb2MubGlzdGluZ01vZGUoZGVmYXVsdE9LKTsKCiAgICBpZiAobW9kZSA9PT0gImVycm9yIikgewogICAgICByZXR1cm4gbnVsbDsKICAgIH0gZWxzZSBpZiAobW9kZSA9PT0gImVuIikgewogICAgICByZXR1cm4gZW5nbGlzaEZuKGxlbmd0aCk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gaW50bEZuKGxlbmd0aCk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBzdXBwb3J0c0Zhc3ROdW1iZXJzKGxvYykgewogICAgaWYgKGxvYy5udW1iZXJpbmdTeXN0ZW0gJiYgbG9jLm51bWJlcmluZ1N5c3RlbSAhPT0gImxhdG4iKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiAoCiAgICAgICAgbG9jLm51bWJlcmluZ1N5c3RlbSA9PT0gImxhdG4iIHx8CiAgICAgICAgIWxvYy5sb2NhbGUgfHwKICAgICAgICBsb2MubG9jYWxlLnN0YXJ0c1dpdGgoImVuIikgfHwKICAgICAgICBuZXcgSW50bC5EYXRlVGltZUZvcm1hdChsb2MuaW50bCkucmVzb2x2ZWRPcHRpb25zKCkubnVtYmVyaW5nU3lzdGVtID09PSAibGF0biIKICAgICAgKTsKICAgIH0KICB9CgogIC8qKgogICAqIEBwcml2YXRlCiAgICovCgogIGNsYXNzIFBvbHlOdW1iZXJGb3JtYXR0ZXIgewogICAgY29uc3RydWN0b3IoaW50bCwgZm9yY2VTaW1wbGUsIG9wdHMpIHsKICAgICAgdGhpcy5wYWRUbyA9IG9wdHMucGFkVG8gfHwgMDsKICAgICAgdGhpcy5mbG9vciA9IG9wdHMuZmxvb3IgfHwgZmFsc2U7CgogICAgICBjb25zdCB7IHBhZFRvLCBmbG9vciwgLi4ub3RoZXJPcHRzIH0gPSBvcHRzOwoKICAgICAgaWYgKCFmb3JjZVNpbXBsZSB8fCBPYmplY3Qua2V5cyhvdGhlck9wdHMpLmxlbmd0aCA+IDApIHsKICAgICAgICBjb25zdCBpbnRsT3B0cyA9IHsgdXNlR3JvdXBpbmc6IGZhbHNlLCAuLi5vcHRzIH07CiAgICAgICAgaWYgKG9wdHMucGFkVG8gPiAwKSBpbnRsT3B0cy5taW5pbXVtSW50ZWdlckRpZ2l0cyA9IG9wdHMucGFkVG87CiAgICAgICAgdGhpcy5pbmYgPSBnZXRDYWNoZWRJTkYoaW50bCwgaW50bE9wdHMpOwogICAgICB9CiAgICB9CgogICAgZm9ybWF0KGkpIHsKICAgICAgaWYgKHRoaXMuaW5mKSB7CiAgICAgICAgY29uc3QgZml4ZWQgPSB0aGlzLmZsb29yID8gTWF0aC5mbG9vcihpKSA6IGk7CiAgICAgICAgcmV0dXJuIHRoaXMuaW5mLmZvcm1hdChmaXhlZCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gdG8gbWF0Y2ggdGhlIGJyb3dzZXIncyBudW1iZXJmb3JtYXR0ZXIgZGVmYXVsdHMKICAgICAgICBjb25zdCBmaXhlZCA9IHRoaXMuZmxvb3IgPyBNYXRoLmZsb29yKGkpIDogcm91bmRUbyhpLCAzKTsKICAgICAgICByZXR1cm4gcGFkU3RhcnQoZml4ZWQsIHRoaXMucGFkVG8pOwogICAgICB9CiAgICB9CiAgfQoKICAvKioKICAgKiBAcHJpdmF0ZQogICAqLwoKICBjbGFzcyBQb2x5RGF0ZUZvcm1hdHRlciB7CiAgICBjb25zdHJ1Y3RvcihkdCwgaW50bCwgb3B0cykgewogICAgICB0aGlzLm9wdHMgPSBvcHRzOwoKICAgICAgbGV0IHo7CiAgICAgIGlmIChkdC56b25lLmlzVW5pdmVyc2FsKSB7CiAgICAgICAgLy8gVVRDLTggb3IgRXRjL1VUQy04IGFyZSBub3QgcGFydCBvZiB0emRhdGEsIG9ubHkgRXRjL0dNVCs4IGFuZCB0aGUgbGlrZS4KICAgICAgICAvLyBUaGF0IGlzIHdoeSBmaXhlZC1vZmZzZXQgVFogaXMgc2V0IHRvIHRoYXQgdW5sZXNzIGl0IGlzOgogICAgICAgIC8vIDEuIFJlcHJlc2VudGluZyBvZmZzZXQgMCB3aGVuIFVUQyBpcyB1c2VkIHRvIG1haW50YWluIHByZXZpb3VzIGJlaGF2aW9yIGFuZCBkb2VzIG5vdCBiZWNvbWUgR01ULgogICAgICAgIC8vIDIuIFVuc3VwcG9ydGVkIGJ5IHRoZSBicm93c2VyOgogICAgICAgIC8vICAgIC0gc29tZSBkbyBub3Qgc3VwcG9ydCBFdGMvCiAgICAgICAgLy8gICAgLSA8IEV0Yy9HTVQtMTQsID4gRXRjL0dNVCsxMiwgYW5kIDMwLW1pbnV0ZSBvciA0NS1taW51dGUgb2Zmc2V0cyBhcmUgbm90IHBhcnQgb2YgdHpkYXRhCiAgICAgICAgY29uc3QgZ210T2Zmc2V0ID0gLTEgKiAoZHQub2Zmc2V0IC8gNjApOwogICAgICAgIGNvbnN0IG9mZnNldFogPSBnbXRPZmZzZXQgPj0gMCA/IGBFdGMvR01UKyR7Z210T2Zmc2V0fWAgOiBgRXRjL0dNVCR7Z210T2Zmc2V0fWA7CiAgICAgICAgaWYgKGR0Lm9mZnNldCAhPT0gMCAmJiBJQU5BWm9uZS5jcmVhdGUob2Zmc2V0WikudmFsaWQpIHsKICAgICAgICAgIHogPSBvZmZzZXRaOwogICAgICAgICAgdGhpcy5kdCA9IGR0OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvLyBOb3QgYWxsIGZpeGVkLW9mZnNldCB6b25lcyBsaWtlIEV0Yy8rNDozMCBhcmUgcHJlc2VudCBpbiB0emRhdGEuCiAgICAgICAgICAvLyBTbyB3ZSBoYXZlIHRvIG1ha2UgZG8uIFR3byBjYXNlczoKICAgICAgICAgIC8vIDEuIFRoZSBmb3JtYXQgb3B0aW9ucyB0ZWxsIHVzIHRvIHNob3cgdGhlIHpvbmUuIFdlIGNhbid0IGRvIHRoYXQsIHNvIHRoZSBiZXN0CiAgICAgICAgICAvLyB3ZSBjYW4gZG8gaXMgZm9ybWF0IHRoZSBkYXRlIGluIFVUQy4KICAgICAgICAgIC8vIDIuIFRoZSBmb3JtYXQgb3B0aW9ucyBkb24ndCB0ZWxsIHVzIHRvIHNob3cgdGhlIHpvbmUuIFRoZW4gd2UgY2FuIGFkanVzdCB0aGVtCiAgICAgICAgICAvLyB0aGUgdGltZSBhbmQgdGVsbCB0aGUgZm9ybWF0dGVyIHRvIHNob3cgaXQgdG8gdXMgaW4gVVRDLCBzbyB0aGF0IHRoZSB0aW1lIGlzIHJpZ2h0CiAgICAgICAgICAvLyBhbmQgdGhlIGJhZCB6b25lIGRvZXNuJ3Qgc2hvdyB1cC4KICAgICAgICAgIHogPSAiVVRDIjsKICAgICAgICAgIGlmIChvcHRzLnRpbWVab25lTmFtZSkgewogICAgICAgICAgICB0aGlzLmR0ID0gZHQ7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLmR0ID0gZHQub2Zmc2V0ID09PSAwID8gZHQgOiBEYXRlVGltZS5mcm9tTWlsbGlzKGR0LnRzICsgZHQub2Zmc2V0ICogNjAgKiAxMDAwKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAoZHQuem9uZS50eXBlID09PSAic3lzdGVtIikgewogICAgICAgIHRoaXMuZHQgPSBkdDsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmR0ID0gZHQ7CiAgICAgICAgeiA9IGR0LnpvbmUubmFtZTsKICAgICAgfQoKICAgICAgY29uc3QgaW50bE9wdHMgPSB7IC4uLnRoaXMub3B0cyB9OwogICAgICBpZiAoeikgewogICAgICAgIGludGxPcHRzLnRpbWVab25lID0gejsKICAgICAgfQogICAgICB0aGlzLmR0ZiA9IGdldENhY2hlZERURihpbnRsLCBpbnRsT3B0cyk7CiAgICB9CgogICAgZm9ybWF0KCkgewogICAgICByZXR1cm4gdGhpcy5kdGYuZm9ybWF0KHRoaXMuZHQudG9KU0RhdGUoKSk7CiAgICB9CgogICAgZm9ybWF0VG9QYXJ0cygpIHsKICAgICAgcmV0dXJuIHRoaXMuZHRmLmZvcm1hdFRvUGFydHModGhpcy5kdC50b0pTRGF0ZSgpKTsKICAgIH0KCiAgICByZXNvbHZlZE9wdGlvbnMoKSB7CiAgICAgIHJldHVybiB0aGlzLmR0Zi5yZXNvbHZlZE9wdGlvbnMoKTsKICAgIH0KICB9CgogIC8qKgogICAqIEBwcml2YXRlCiAgICovCiAgY2xhc3MgUG9seVJlbEZvcm1hdHRlciB7CiAgICBjb25zdHJ1Y3RvcihpbnRsLCBpc0VuZ2xpc2gsIG9wdHMpIHsKICAgICAgdGhpcy5vcHRzID0geyBzdHlsZTogImxvbmciLCAuLi5vcHRzIH07CiAgICAgIGlmICghaXNFbmdsaXNoICYmIGhhc1JlbGF0aXZlKCkpIHsKICAgICAgICB0aGlzLnJ0ZiA9IGdldENhY2hlZFJURihpbnRsLCBvcHRzKTsKICAgICAgfQogICAgfQoKICAgIGZvcm1hdChjb3VudCwgdW5pdCkgewogICAgICBpZiAodGhpcy5ydGYpIHsKICAgICAgICByZXR1cm4gdGhpcy5ydGYuZm9ybWF0KGNvdW50LCB1bml0KTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gZm9ybWF0UmVsYXRpdmVUaW1lKHVuaXQsIGNvdW50LCB0aGlzLm9wdHMubnVtZXJpYywgdGhpcy5vcHRzLnN0eWxlICE9PSAibG9uZyIpOwogICAgICB9CiAgICB9CgogICAgZm9ybWF0VG9QYXJ0cyhjb3VudCwgdW5pdCkgewogICAgICBpZiAodGhpcy5ydGYpIHsKICAgICAgICByZXR1cm4gdGhpcy5ydGYuZm9ybWF0VG9QYXJ0cyhjb3VudCwgdW5pdCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9CiAgICB9CiAgfQoKICAvKioKICAgKiBAcHJpdmF0ZQogICAqLwoKICBjbGFzcyBMb2NhbGUgewogICAgc3RhdGljIGZyb21PcHRzKG9wdHMpIHsKICAgICAgcmV0dXJuIExvY2FsZS5jcmVhdGUob3B0cy5sb2NhbGUsIG9wdHMubnVtYmVyaW5nU3lzdGVtLCBvcHRzLm91dHB1dENhbGVuZGFyLCBvcHRzLmRlZmF1bHRUb0VOKTsKICAgIH0KCiAgICBzdGF0aWMgY3JlYXRlKGxvY2FsZSwgbnVtYmVyaW5nU3lzdGVtLCBvdXRwdXRDYWxlbmRhciwgZGVmYXVsdFRvRU4gPSBmYWxzZSkgewogICAgICBjb25zdCBzcGVjaWZpZWRMb2NhbGUgPSBsb2NhbGUgfHwgU2V0dGluZ3MuZGVmYXVsdExvY2FsZTsKICAgICAgLy8gdGhlIHN5c3RlbSBsb2NhbGUgaXMgdXNlZnVsIGZvciBodW1hbiByZWFkYWJsZSBzdHJpbmdzIGJ1dCBhbm5veWluZyBmb3IgcGFyc2luZy9mb3JtYXR0aW5nIGtub3duIGZvcm1hdHMKICAgICAgY29uc3QgbG9jYWxlUiA9IHNwZWNpZmllZExvY2FsZSB8fCAoZGVmYXVsdFRvRU4gPyAiZW4tVVMiIDogc3lzdGVtTG9jYWxlKCkpOwogICAgICBjb25zdCBudW1iZXJpbmdTeXN0ZW1SID0gbnVtYmVyaW5nU3lzdGVtIHx8IFNldHRpbmdzLmRlZmF1bHROdW1iZXJpbmdTeXN0ZW07CiAgICAgIGNvbnN0IG91dHB1dENhbGVuZGFyUiA9IG91dHB1dENhbGVuZGFyIHx8IFNldHRpbmdzLmRlZmF1bHRPdXRwdXRDYWxlbmRhcjsKICAgICAgcmV0dXJuIG5ldyBMb2NhbGUobG9jYWxlUiwgbnVtYmVyaW5nU3lzdGVtUiwgb3V0cHV0Q2FsZW5kYXJSLCBzcGVjaWZpZWRMb2NhbGUpOwogICAgfQoKICAgIHN0YXRpYyByZXNldENhY2hlKCkgewogICAgICBzeXNMb2NhbGVDYWNoZSA9IG51bGw7CiAgICAgIGludGxEVENhY2hlID0ge307CiAgICAgIGludGxOdW1DYWNoZSA9IHt9OwogICAgICBpbnRsUmVsQ2FjaGUgPSB7fTsKICAgIH0KCiAgICBzdGF0aWMgZnJvbU9iamVjdCh7IGxvY2FsZSwgbnVtYmVyaW5nU3lzdGVtLCBvdXRwdXRDYWxlbmRhciB9ID0ge30pIHsKICAgICAgcmV0dXJuIExvY2FsZS5jcmVhdGUobG9jYWxlLCBudW1iZXJpbmdTeXN0ZW0sIG91dHB1dENhbGVuZGFyKTsKICAgIH0KCiAgICBjb25zdHJ1Y3Rvcihsb2NhbGUsIG51bWJlcmluZywgb3V0cHV0Q2FsZW5kYXIsIHNwZWNpZmllZExvY2FsZSkgewogICAgICBjb25zdCBbcGFyc2VkTG9jYWxlLCBwYXJzZWROdW1iZXJpbmdTeXN0ZW0sIHBhcnNlZE91dHB1dENhbGVuZGFyXSA9IHBhcnNlTG9jYWxlU3RyaW5nKGxvY2FsZSk7CgogICAgICB0aGlzLmxvY2FsZSA9IHBhcnNlZExvY2FsZTsKICAgICAgdGhpcy5udW1iZXJpbmdTeXN0ZW0gPSBudW1iZXJpbmcgfHwgcGFyc2VkTnVtYmVyaW5nU3lzdGVtIHx8IG51bGw7CiAgICAgIHRoaXMub3V0cHV0Q2FsZW5kYXIgPSBvdXRwdXRDYWxlbmRhciB8fCBwYXJzZWRPdXRwdXRDYWxlbmRhciB8fCBudWxsOwogICAgICB0aGlzLmludGwgPSBpbnRsQ29uZmlnU3RyaW5nKHRoaXMubG9jYWxlLCB0aGlzLm51bWJlcmluZ1N5c3RlbSwgdGhpcy5vdXRwdXRDYWxlbmRhcik7CgogICAgICB0aGlzLndlZWtkYXlzQ2FjaGUgPSB7IGZvcm1hdDoge30sIHN0YW5kYWxvbmU6IHt9IH07CiAgICAgIHRoaXMubW9udGhzQ2FjaGUgPSB7IGZvcm1hdDoge30sIHN0YW5kYWxvbmU6IHt9IH07CiAgICAgIHRoaXMubWVyaWRpZW1DYWNoZSA9IG51bGw7CiAgICAgIHRoaXMuZXJhQ2FjaGUgPSB7fTsKCiAgICAgIHRoaXMuc3BlY2lmaWVkTG9jYWxlID0gc3BlY2lmaWVkTG9jYWxlOwogICAgICB0aGlzLmZhc3ROdW1iZXJzQ2FjaGVkID0gbnVsbDsKICAgIH0KCiAgICBnZXQgZmFzdE51bWJlcnMoKSB7CiAgICAgIGlmICh0aGlzLmZhc3ROdW1iZXJzQ2FjaGVkID09IG51bGwpIHsKICAgICAgICB0aGlzLmZhc3ROdW1iZXJzQ2FjaGVkID0gc3VwcG9ydHNGYXN0TnVtYmVycyh0aGlzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXMuZmFzdE51bWJlcnNDYWNoZWQ7CiAgICB9CgogICAgbGlzdGluZ01vZGUoKSB7CiAgICAgIGNvbnN0IGlzQWN0dWFsbHlFbiA9IHRoaXMuaXNFbmdsaXNoKCk7CiAgICAgIGNvbnN0IGhhc05vV2VpcmRuZXNzID0KICAgICAgICAodGhpcy5udW1iZXJpbmdTeXN0ZW0gPT09IG51bGwgfHwgdGhpcy5udW1iZXJpbmdTeXN0ZW0gPT09ICJsYXRuIikgJiYKICAgICAgICAodGhpcy5vdXRwdXRDYWxlbmRhciA9PT0gbnVsbCB8fCB0aGlzLm91dHB1dENhbGVuZGFyID09PSAiZ3JlZ29yeSIpOwogICAgICByZXR1cm4gaXNBY3R1YWxseUVuICYmIGhhc05vV2VpcmRuZXNzID8gImVuIiA6ICJpbnRsIjsKICAgIH0KCiAgICBjbG9uZShhbHRzKSB7CiAgICAgIGlmICghYWx0cyB8fCBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhhbHRzKS5sZW5ndGggPT09IDApIHsKICAgICAgICByZXR1cm4gdGhpczsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gTG9jYWxlLmNyZWF0ZSgKICAgICAgICAgIGFsdHMubG9jYWxlIHx8IHRoaXMuc3BlY2lmaWVkTG9jYWxlLAogICAgICAgICAgYWx0cy5udW1iZXJpbmdTeXN0ZW0gfHwgdGhpcy5udW1iZXJpbmdTeXN0ZW0sCiAgICAgICAgICBhbHRzLm91dHB1dENhbGVuZGFyIHx8IHRoaXMub3V0cHV0Q2FsZW5kYXIsCiAgICAgICAgICBhbHRzLmRlZmF1bHRUb0VOIHx8IGZhbHNlCiAgICAgICAgKTsKICAgICAgfQogICAgfQoKICAgIHJlZGVmYXVsdFRvRU4oYWx0cyA9IHt9KSB7CiAgICAgIHJldHVybiB0aGlzLmNsb25lKHsgLi4uYWx0cywgZGVmYXVsdFRvRU46IHRydWUgfSk7CiAgICB9CgogICAgcmVkZWZhdWx0VG9TeXN0ZW0oYWx0cyA9IHt9KSB7CiAgICAgIHJldHVybiB0aGlzLmNsb25lKHsgLi4uYWx0cywgZGVmYXVsdFRvRU46IGZhbHNlIH0pOwogICAgfQoKICAgIG1vbnRocyhsZW5ndGgsIGZvcm1hdCA9IGZhbHNlLCBkZWZhdWx0T0sgPSB0cnVlKSB7CiAgICAgIHJldHVybiBsaXN0U3R1ZmYodGhpcywgbGVuZ3RoLCBkZWZhdWx0T0ssIG1vbnRocywgKCkgPT4gewogICAgICAgIGNvbnN0IGludGwgPSBmb3JtYXQgPyB7IG1vbnRoOiBsZW5ndGgsIGRheTogIm51bWVyaWMiIH0gOiB7IG1vbnRoOiBsZW5ndGggfSwKICAgICAgICAgIGZvcm1hdFN0ciA9IGZvcm1hdCA/ICJmb3JtYXQiIDogInN0YW5kYWxvbmUiOwogICAgICAgIGlmICghdGhpcy5tb250aHNDYWNoZVtmb3JtYXRTdHJdW2xlbmd0aF0pIHsKICAgICAgICAgIHRoaXMubW9udGhzQ2FjaGVbZm9ybWF0U3RyXVtsZW5ndGhdID0gbWFwTW9udGhzKChkdCkgPT4gdGhpcy5leHRyYWN0KGR0LCBpbnRsLCAibW9udGgiKSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiB0aGlzLm1vbnRoc0NhY2hlW2Zvcm1hdFN0cl1bbGVuZ3RoXTsKICAgICAgfSk7CiAgICB9CgogICAgd2Vla2RheXMobGVuZ3RoLCBmb3JtYXQgPSBmYWxzZSwgZGVmYXVsdE9LID0gdHJ1ZSkgewogICAgICByZXR1cm4gbGlzdFN0dWZmKHRoaXMsIGxlbmd0aCwgZGVmYXVsdE9LLCB3ZWVrZGF5cywgKCkgPT4gewogICAgICAgIGNvbnN0IGludGwgPSBmb3JtYXQKICAgICAgICAgICAgPyB7IHdlZWtkYXk6IGxlbmd0aCwgeWVhcjogIm51bWVyaWMiLCBtb250aDogImxvbmciLCBkYXk6ICJudW1lcmljIiB9CiAgICAgICAgICAgIDogeyB3ZWVrZGF5OiBsZW5ndGggfSwKICAgICAgICAgIGZvcm1hdFN0ciA9IGZvcm1hdCA/ICJmb3JtYXQiIDogInN0YW5kYWxvbmUiOwogICAgICAgIGlmICghdGhpcy53ZWVrZGF5c0NhY2hlW2Zvcm1hdFN0cl1bbGVuZ3RoXSkgewogICAgICAgICAgdGhpcy53ZWVrZGF5c0NhY2hlW2Zvcm1hdFN0cl1bbGVuZ3RoXSA9IG1hcFdlZWtkYXlzKChkdCkgPT4KICAgICAgICAgICAgdGhpcy5leHRyYWN0KGR0LCBpbnRsLCAid2Vla2RheSIpCiAgICAgICAgICApOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdGhpcy53ZWVrZGF5c0NhY2hlW2Zvcm1hdFN0cl1bbGVuZ3RoXTsKICAgICAgfSk7CiAgICB9CgogICAgbWVyaWRpZW1zKGRlZmF1bHRPSyA9IHRydWUpIHsKICAgICAgcmV0dXJuIGxpc3RTdHVmZigKICAgICAgICB0aGlzLAogICAgICAgIHVuZGVmaW5lZCwKICAgICAgICBkZWZhdWx0T0ssCiAgICAgICAgKCkgPT4gbWVyaWRpZW1zLAogICAgICAgICgpID0+IHsKICAgICAgICAgIC8vIEluIHRoZW9yeSB0aGVyZSBjb3VsZCBiZSBhcmliaXRyYXJ5IGRheSBwZXJpb2RzLiBXZSdyZSBnb25uYSBhc3N1bWUgdGhlcmUgYXJlIGV4YWN0bHkgdHdvCiAgICAgICAgICAvLyBmb3IgQU0gYW5kIFBNLiBUaGlzIGlzIHByb2JhYmx5IHdyb25nLCBidXQgaXQncyBtYWtlcyBwYXJzaW5nIHdheSBlYXNpZXIuCiAgICAgICAgICBpZiAoIXRoaXMubWVyaWRpZW1DYWNoZSkgewogICAgICAgICAgICBjb25zdCBpbnRsID0geyBob3VyOiAibnVtZXJpYyIsIGhvdXJDeWNsZTogImgxMiIgfTsKICAgICAgICAgICAgdGhpcy5tZXJpZGllbUNhY2hlID0gW0RhdGVUaW1lLnV0YygyMDE2LCAxMSwgMTMsIDkpLCBEYXRlVGltZS51dGMoMjAxNiwgMTEsIDEzLCAxOSldLm1hcCgKICAgICAgICAgICAgICAoZHQpID0+IHRoaXMuZXh0cmFjdChkdCwgaW50bCwgImRheXBlcmlvZCIpCiAgICAgICAgICAgICk7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIHRoaXMubWVyaWRpZW1DYWNoZTsKICAgICAgICB9CiAgICAgICk7CiAgICB9CgogICAgZXJhcyhsZW5ndGgsIGRlZmF1bHRPSyA9IHRydWUpIHsKICAgICAgcmV0dXJuIGxpc3RTdHVmZih0aGlzLCBsZW5ndGgsIGRlZmF1bHRPSywgZXJhcywgKCkgPT4gewogICAgICAgIGNvbnN0IGludGwgPSB7IGVyYTogbGVuZ3RoIH07CgogICAgICAgIC8vIFRoaXMgaXMgcHJvYmxlbWF0aWMuIERpZmZlcmVudCBjYWxlbmRhcnMgYXJlIGdvaW5nIHRvIGRlZmluZSBlcmFzIHRvdGFsbHkgZGlmZmVyZW50bHkuIFdoYXQgSSBuZWVkIGlzIHRoZSBtaW5pbXVtIHNldCBvZiBkYXRlcwogICAgICAgIC8vIHRvIGRlZmluaXRlbHkgZW51bWVyYXRlIHRoZW0uCiAgICAgICAgaWYgKCF0aGlzLmVyYUNhY2hlW2xlbmd0aF0pIHsKICAgICAgICAgIHRoaXMuZXJhQ2FjaGVbbGVuZ3RoXSA9IFtEYXRlVGltZS51dGMoLTQwLCAxLCAxKSwgRGF0ZVRpbWUudXRjKDIwMTcsIDEsIDEpXS5tYXAoKGR0KSA9PgogICAgICAgICAgICB0aGlzLmV4dHJhY3QoZHQsIGludGwsICJlcmEiKQogICAgICAgICAgKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiB0aGlzLmVyYUNhY2hlW2xlbmd0aF07CiAgICAgIH0pOwogICAgfQoKICAgIGV4dHJhY3QoZHQsIGludGxPcHRzLCBmaWVsZCkgewogICAgICBjb25zdCBkZiA9IHRoaXMuZHRGb3JtYXR0ZXIoZHQsIGludGxPcHRzKSwKICAgICAgICByZXN1bHRzID0gZGYuZm9ybWF0VG9QYXJ0cygpLAogICAgICAgIG1hdGNoaW5nID0gcmVzdWx0cy5maW5kKChtKSA9PiBtLnR5cGUudG9Mb3dlckNhc2UoKSA9PT0gZmllbGQpOwogICAgICByZXR1cm4gbWF0Y2hpbmcgPyBtYXRjaGluZy52YWx1ZSA6IG51bGw7CiAgICB9CgogICAgbnVtYmVyRm9ybWF0dGVyKG9wdHMgPSB7fSkgewogICAgICAvLyB0aGlzIGZvcmNlc2ltcGxlIG9wdGlvbiBpcyBuZXZlciB1c2VkICh0aGUgb25seSBjYWxsZXIgc2hvcnQtY2lyY3VpdHMgb24gaXQsIGJ1dCBpdCBzZWVtcyBzYWZlciB0byBsZWF2ZSkKICAgICAgLy8gKGluIGNvbnRyYXN0LCB0aGUgcmVzdCBvZiB0aGUgY29uZGl0aW9uIGlzIHVzZWQgaGVhdmlseSkKICAgICAgcmV0dXJuIG5ldyBQb2x5TnVtYmVyRm9ybWF0dGVyKHRoaXMuaW50bCwgb3B0cy5mb3JjZVNpbXBsZSB8fCB0aGlzLmZhc3ROdW1iZXJzLCBvcHRzKTsKICAgIH0KCiAgICBkdEZvcm1hdHRlcihkdCwgaW50bE9wdHMgPSB7fSkgewogICAgICByZXR1cm4gbmV3IFBvbHlEYXRlRm9ybWF0dGVyKGR0LCB0aGlzLmludGwsIGludGxPcHRzKTsKICAgIH0KCiAgICByZWxGb3JtYXR0ZXIob3B0cyA9IHt9KSB7CiAgICAgIHJldHVybiBuZXcgUG9seVJlbEZvcm1hdHRlcih0aGlzLmludGwsIHRoaXMuaXNFbmdsaXNoKCksIG9wdHMpOwogICAgfQoKICAgIGxpc3RGb3JtYXR0ZXIob3B0cyA9IHt9KSB7CiAgICAgIHJldHVybiBnZXRDYWNoZWRMRih0aGlzLmludGwsIG9wdHMpOwogICAgfQoKICAgIGlzRW5nbGlzaCgpIHsKICAgICAgcmV0dXJuICgKICAgICAgICB0aGlzLmxvY2FsZSA9PT0gImVuIiB8fAogICAgICAgIHRoaXMubG9jYWxlLnRvTG93ZXJDYXNlKCkgPT09ICJlbi11cyIgfHwKICAgICAgICBuZXcgSW50bC5EYXRlVGltZUZvcm1hdCh0aGlzLmludGwpLnJlc29sdmVkT3B0aW9ucygpLmxvY2FsZS5zdGFydHNXaXRoKCJlbi11cyIpCiAgICAgICk7CiAgICB9CgogICAgZXF1YWxzKG90aGVyKSB7CiAgICAgIHJldHVybiAoCiAgICAgICAgdGhpcy5sb2NhbGUgPT09IG90aGVyLmxvY2FsZSAmJgogICAgICAgIHRoaXMubnVtYmVyaW5nU3lzdGVtID09PSBvdGhlci5udW1iZXJpbmdTeXN0ZW0gJiYKICAgICAgICB0aGlzLm91dHB1dENhbGVuZGFyID09PSBvdGhlci5vdXRwdXRDYWxlbmRhcgogICAgICApOwogICAgfQogIH0KCiAgLyoKICAgKiBUaGlzIGZpbGUgaGFuZGxlcyBwYXJzaW5nIGZvciB3ZWxsLXNwZWNpZmllZCBmb3JtYXRzLiBIZXJlJ3MgaG93IGl0IHdvcmtzOgogICAqIFR3byB0aGluZ3MgZ28gaW50byBwYXJzaW5nOiBhIHJlZ2V4IHRvIG1hdGNoIHdpdGggYW5kIGFuIGV4dHJhY3RvciB0byB0YWtlIGFwYXJ0IHRoZSBncm91cHMgaW4gdGhlIG1hdGNoLgogICAqIEFuIGV4dHJhY3RvciBpcyBqdXN0IGEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhIHJlZ2V4IG1hdGNoIGFycmF5IGFuZCByZXR1cm5zIGEgeyB5ZWFyOiAuLi4sIG1vbnRoOiAuLi4gfSBvYmplY3QKICAgKiBwYXJzZSgpIGRvZXMgdGhlIHdvcmsgb2YgZXhlY3V0aW5nIHRoZSByZWdleCBhbmQgYXBwbHlpbmcgdGhlIGV4dHJhY3Rvci4gSXQgdGFrZXMgbXVsdGlwbGUgcmVnZXgvZXh0cmFjdG9yIHBhaXJzIHRvIHRyeSBpbiBzZXF1ZW5jZS4KICAgKiBFeHRyYWN0b3JzIGNhbiB0YWtlIGEgImN1cnNvciIgcmVwcmVzZW50aW5nIHRoZSBvZmZzZXQgaW4gdGhlIG1hdGNoIHRvIGxvb2sgYXQuIFRoaXMgbWFrZXMgaXQgZWFzeSB0byBjb21iaW5lIGV4dHJhY3RvcnMuCiAgICogY29tYmluZUV4dHJhY3RvcnMoKSBkb2VzIHRoZSB3b3JrIG9mIGNvbWJpbmluZyB0aGVtLCBrZWVwaW5nIHRyYWNrIG9mIHRoZSBjdXJzb3IgdGhyb3VnaCBtdWx0aXBsZSBleHRyYWN0aW9ucy4KICAgKiBTb21lIGV4dHJhY3Rpb25zIGFyZSBzdXBlciBkdW1iIGFuZCBzaW1wbGVQYXJzZSBhbmQgZnJvbVN0cmluZ3MgaGVscCBEUlkgdGhlbS4KICAgKi8KCiAgZnVuY3Rpb24gY29tYmluZVJlZ2V4ZXMoLi4ucmVnZXhlcykgewogICAgY29uc3QgZnVsbCA9IHJlZ2V4ZXMucmVkdWNlKChmLCByKSA9PiBmICsgci5zb3VyY2UsICIiKTsKICAgIHJldHVybiBSZWdFeHAoYF4ke2Z1bGx9JGApOwogIH0KCiAgZnVuY3Rpb24gY29tYmluZUV4dHJhY3RvcnMoLi4uZXh0cmFjdG9ycykgewogICAgcmV0dXJuIChtKSA9PgogICAgICBleHRyYWN0b3JzCiAgICAgICAgLnJlZHVjZSgKICAgICAgICAgIChbbWVyZ2VkVmFscywgbWVyZ2VkWm9uZSwgY3Vyc29yXSwgZXgpID0+IHsKICAgICAgICAgICAgY29uc3QgW3ZhbCwgem9uZSwgbmV4dF0gPSBleChtLCBjdXJzb3IpOwogICAgICAgICAgICByZXR1cm4gW3sgLi4ubWVyZ2VkVmFscywgLi4udmFsIH0sIHpvbmUgfHwgbWVyZ2VkWm9uZSwgbmV4dF07CiAgICAgICAgICB9LAogICAgICAgICAgW3t9LCBudWxsLCAxXQogICAgICAgICkKICAgICAgICAuc2xpY2UoMCwgMik7CiAgfQoKICBmdW5jdGlvbiBwYXJzZSQxKHMsIC4uLnBhdHRlcm5zKSB7CiAgICBpZiAocyA9PSBudWxsKSB7CiAgICAgIHJldHVybiBbbnVsbCwgbnVsbF07CiAgICB9CgogICAgZm9yIChjb25zdCBbcmVnZXgsIGV4dHJhY3Rvcl0gb2YgcGF0dGVybnMpIHsKICAgICAgY29uc3QgbSA9IHJlZ2V4LmV4ZWMocyk7CiAgICAgIGlmIChtKSB7CiAgICAgICAgcmV0dXJuIGV4dHJhY3RvcihtKTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIFtudWxsLCBudWxsXTsKICB9CgogIGZ1bmN0aW9uIHNpbXBsZVBhcnNlKC4uLmtleXMpIHsKICAgIHJldHVybiAobWF0Y2gsIGN1cnNvcikgPT4gewogICAgICBjb25zdCByZXQgPSB7fTsKICAgICAgbGV0IGk7CgogICAgICBmb3IgKGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykgewogICAgICAgIHJldFtrZXlzW2ldXSA9IHBhcnNlSW50ZWdlcihtYXRjaFtjdXJzb3IgKyBpXSk7CiAgICAgIH0KICAgICAgcmV0dXJuIFtyZXQsIG51bGwsIGN1cnNvciArIGldOwogICAgfTsKICB9CgogIC8vIElTTyBhbmQgU1FMIHBhcnNpbmcKICBjb25zdCBvZmZzZXRSZWdleCA9IC8oPzooWil8KFsrLV1cZFxkKSg/Ojo/KFxkXGQpKT8pLzsKICBjb25zdCBpc29FeHRlbmRlZFpvbmUgPSBgKD86JHtvZmZzZXRSZWdleC5zb3VyY2V9Pyg/OlxcWygke2lhbmFSZWdleC5zb3VyY2V9KVxcXSk/KT9gOwogIGNvbnN0IGlzb1RpbWVCYXNlUmVnZXggPSAvKFxkXGQpKD86Oj8oXGRcZCkoPzo6PyhcZFxkKSg/OlsuLF0oXGR7MSwzMH0pKT8pPyk/LzsKICBjb25zdCBpc29UaW1lUmVnZXggPSBSZWdFeHAoYCR7aXNvVGltZUJhc2VSZWdleC5zb3VyY2V9JHtpc29FeHRlbmRlZFpvbmV9YCk7CiAgY29uc3QgaXNvVGltZUV4dGVuc2lvblJlZ2V4ID0gUmVnRXhwKGAoPzpUJHtpc29UaW1lUmVnZXguc291cmNlfSk/YCk7CiAgY29uc3QgaXNvWW1kUmVnZXggPSAvKFsrLV1cZHs2fXxcZHs0fSkoPzotPyhcZFxkKSg/Oi0/KFxkXGQpKT8pPy87CiAgY29uc3QgaXNvV2Vla1JlZ2V4ID0gLyhcZHs0fSktP1coXGRcZCkoPzotPyhcZCkpPy87CiAgY29uc3QgaXNvT3JkaW5hbFJlZ2V4ID0gLyhcZHs0fSktPyhcZHszfSkvOwogIGNvbnN0IGV4dHJhY3RJU09XZWVrRGF0YSA9IHNpbXBsZVBhcnNlKCJ3ZWVrWWVhciIsICJ3ZWVrTnVtYmVyIiwgIndlZWtEYXkiKTsKICBjb25zdCBleHRyYWN0SVNPT3JkaW5hbERhdGEgPSBzaW1wbGVQYXJzZSgieWVhciIsICJvcmRpbmFsIik7CiAgY29uc3Qgc3FsWW1kUmVnZXggPSAvKFxkezR9KS0oXGRcZCktKFxkXGQpLzsgLy8gZHVtYmVkLWRvd24gdmVyc2lvbiBvZiB0aGUgSVNPIG9uZQogIGNvbnN0IHNxbFRpbWVSZWdleCA9IFJlZ0V4cCgKICAgIGAke2lzb1RpbWVCYXNlUmVnZXguc291cmNlfSA/KD86JHtvZmZzZXRSZWdleC5zb3VyY2V9fCgke2lhbmFSZWdleC5zb3VyY2V9KSk/YAogICk7CiAgY29uc3Qgc3FsVGltZUV4dGVuc2lvblJlZ2V4ID0gUmVnRXhwKGAoPzogJHtzcWxUaW1lUmVnZXguc291cmNlfSk/YCk7CgogIGZ1bmN0aW9uIGludCQxKG1hdGNoLCBwb3MsIGZhbGxiYWNrKSB7CiAgICBjb25zdCBtID0gbWF0Y2hbcG9zXTsKICAgIHJldHVybiBpc1VuZGVmaW5lZChtKSA/IGZhbGxiYWNrIDogcGFyc2VJbnRlZ2VyKG0pOwogIH0KCiAgZnVuY3Rpb24gZXh0cmFjdElTT1ltZChtYXRjaCwgY3Vyc29yKSB7CiAgICBjb25zdCBpdGVtID0gewogICAgICB5ZWFyOiBpbnQkMShtYXRjaCwgY3Vyc29yKSwKICAgICAgbW9udGg6IGludCQxKG1hdGNoLCBjdXJzb3IgKyAxLCAxKSwKICAgICAgZGF5OiBpbnQkMShtYXRjaCwgY3Vyc29yICsgMiwgMSksCiAgICB9OwoKICAgIHJldHVybiBbaXRlbSwgbnVsbCwgY3Vyc29yICsgM107CiAgfQoKICBmdW5jdGlvbiBleHRyYWN0SVNPVGltZShtYXRjaCwgY3Vyc29yKSB7CiAgICBjb25zdCBpdGVtID0gewogICAgICBob3VyczogaW50JDEobWF0Y2gsIGN1cnNvciwgMCksCiAgICAgIG1pbnV0ZXM6IGludCQxKG1hdGNoLCBjdXJzb3IgKyAxLCAwKSwKICAgICAgc2Vjb25kczogaW50JDEobWF0Y2gsIGN1cnNvciArIDIsIDApLAogICAgICBtaWxsaXNlY29uZHM6IHBhcnNlTWlsbGlzKG1hdGNoW2N1cnNvciArIDNdKSwKICAgIH07CgogICAgcmV0dXJuIFtpdGVtLCBudWxsLCBjdXJzb3IgKyA0XTsKICB9CgogIGZ1bmN0aW9uIGV4dHJhY3RJU09PZmZzZXQobWF0Y2gsIGN1cnNvcikgewogICAgY29uc3QgbG9jYWwgPSAhbWF0Y2hbY3Vyc29yXSAmJiAhbWF0Y2hbY3Vyc29yICsgMV0sCiAgICAgIGZ1bGxPZmZzZXQgPSBzaWduZWRPZmZzZXQobWF0Y2hbY3Vyc29yICsgMV0sIG1hdGNoW2N1cnNvciArIDJdKSwKICAgICAgem9uZSA9IGxvY2FsID8gbnVsbCA6IEZpeGVkT2Zmc2V0Wm9uZS5pbnN0YW5jZShmdWxsT2Zmc2V0KTsKICAgIHJldHVybiBbe30sIHpvbmUsIGN1cnNvciArIDNdOwogIH0KCiAgZnVuY3Rpb24gZXh0cmFjdElBTkFab25lKG1hdGNoLCBjdXJzb3IpIHsKICAgIGNvbnN0IHpvbmUgPSBtYXRjaFtjdXJzb3JdID8gSUFOQVpvbmUuY3JlYXRlKG1hdGNoW2N1cnNvcl0pIDogbnVsbDsKICAgIHJldHVybiBbe30sIHpvbmUsIGN1cnNvciArIDFdOwogIH0KCiAgLy8gSVNPIHRpbWUgcGFyc2luZwoKICBjb25zdCBpc29UaW1lT25seSA9IFJlZ0V4cChgXlQ/JHtpc29UaW1lQmFzZVJlZ2V4LnNvdXJjZX0kYCk7CgogIC8vIElTTyBkdXJhdGlvbiBwYXJzaW5nCgogIGNvbnN0IGlzb0R1cmF0aW9uID0KICAgIC9eLT9QKD86KD86KC0/XGR7MSwyMH0oPzpcLlxkezEsMjB9KT8pWSk/KD86KC0/XGR7MSwyMH0oPzpcLlxkezEsMjB9KT8pTSk/KD86KC0/XGR7MSwyMH0oPzpcLlxkezEsMjB9KT8pVyk/KD86KC0/XGR7MSwyMH0oPzpcLlxkezEsMjB9KT8pRCk/KD86VCg/OigtP1xkezEsMjB9KD86XC5cZHsxLDIwfSk/KUgpPyg/OigtP1xkezEsMjB9KD86XC5cZHsxLDIwfSk/KU0pPyg/OigtP1xkezEsMjB9KSg/OlsuLF0oLT9cZHsxLDIwfSkpP1MpPyk/KSQvOwoKICBmdW5jdGlvbiBleHRyYWN0SVNPRHVyYXRpb24obWF0Y2gpIHsKICAgIGNvbnN0IFtzLCB5ZWFyU3RyLCBtb250aFN0ciwgd2Vla1N0ciwgZGF5U3RyLCBob3VyU3RyLCBtaW51dGVTdHIsIHNlY29uZFN0ciwgbWlsbGlzZWNvbmRzU3RyXSA9CiAgICAgIG1hdGNoOwoKICAgIGNvbnN0IGhhc05lZ2F0aXZlUHJlZml4ID0gc1swXSA9PT0gIi0iOwogICAgY29uc3QgbmVnYXRpdmVTZWNvbmRzID0gc2Vjb25kU3RyICYmIHNlY29uZFN0clswXSA9PT0gIi0iOwoKICAgIGNvbnN0IG1heWJlTmVnYXRlID0gKG51bSwgZm9yY2UgPSBmYWxzZSkgPT4KICAgICAgbnVtICE9PSB1bmRlZmluZWQgJiYgKGZvcmNlIHx8IChudW0gJiYgaGFzTmVnYXRpdmVQcmVmaXgpKSA/IC1udW0gOiBudW07CgogICAgcmV0dXJuIFsKICAgICAgewogICAgICAgIHllYXJzOiBtYXliZU5lZ2F0ZShwYXJzZUZsb2F0aW5nKHllYXJTdHIpKSwKICAgICAgICBtb250aHM6IG1heWJlTmVnYXRlKHBhcnNlRmxvYXRpbmcobW9udGhTdHIpKSwKICAgICAgICB3ZWVrczogbWF5YmVOZWdhdGUocGFyc2VGbG9hdGluZyh3ZWVrU3RyKSksCiAgICAgICAgZGF5czogbWF5YmVOZWdhdGUocGFyc2VGbG9hdGluZyhkYXlTdHIpKSwKICAgICAgICBob3VyczogbWF5YmVOZWdhdGUocGFyc2VGbG9hdGluZyhob3VyU3RyKSksCiAgICAgICAgbWludXRlczogbWF5YmVOZWdhdGUocGFyc2VGbG9hdGluZyhtaW51dGVTdHIpKSwKICAgICAgICBzZWNvbmRzOiBtYXliZU5lZ2F0ZShwYXJzZUZsb2F0aW5nKHNlY29uZFN0ciksIHNlY29uZFN0ciA9PT0gIi0wIiksCiAgICAgICAgbWlsbGlzZWNvbmRzOiBtYXliZU5lZ2F0ZShwYXJzZU1pbGxpcyhtaWxsaXNlY29uZHNTdHIpLCBuZWdhdGl2ZVNlY29uZHMpLAogICAgICB9LAogICAgXTsKICB9CgogIC8vIFRoZXNlIGFyZSBhIGxpdHRsZSBicmFpbmRlYWQuIEVEVCAqc2hvdWxkKiB0ZWxsIHVzIHRoYXQgd2UncmUgaW4sIHNheSwgQW1lcmljYS9OZXdfWW9yawogIC8vIGFuZCBub3QganVzdCB0aGF0IHdlJ3JlIGluIC0yNDAgKnJpZ2h0IG5vdyouIEJ1dCBzaW5jZSBJIGRvbid0IHRoaW5rIHRoZXNlIGFyZSB1c2VkIHRoYXQgb2Z0ZW4KICAvLyBJJ20ganVzdCBnb2luZyB0byBpZ25vcmUgdGhhdAogIGNvbnN0IG9ic09mZnNldHMgPSB7CiAgICBHTVQ6IDAsCiAgICBFRFQ6IC00ICogNjAsCiAgICBFU1Q6IC01ICogNjAsCiAgICBDRFQ6IC01ICogNjAsCiAgICBDU1Q6IC02ICogNjAsCiAgICBNRFQ6IC02ICogNjAsCiAgICBNU1Q6IC03ICogNjAsCiAgICBQRFQ6IC03ICogNjAsCiAgICBQU1Q6IC04ICogNjAsCiAgfTsKCiAgZnVuY3Rpb24gZnJvbVN0cmluZ3Mod2Vla2RheVN0ciwgeWVhclN0ciwgbW9udGhTdHIsIGRheVN0ciwgaG91clN0ciwgbWludXRlU3RyLCBzZWNvbmRTdHIpIHsKICAgIGNvbnN0IHJlc3VsdCA9IHsKICAgICAgeWVhcjogeWVhclN0ci5sZW5ndGggPT09IDIgPyB1bnRydW5jYXRlWWVhcihwYXJzZUludGVnZXIoeWVhclN0cikpIDogcGFyc2VJbnRlZ2VyKHllYXJTdHIpLAogICAgICBtb250aDogbW9udGhzU2hvcnQuaW5kZXhPZihtb250aFN0cikgKyAxLAogICAgICBkYXk6IHBhcnNlSW50ZWdlcihkYXlTdHIpLAogICAgICBob3VyOiBwYXJzZUludGVnZXIoaG91clN0ciksCiAgICAgIG1pbnV0ZTogcGFyc2VJbnRlZ2VyKG1pbnV0ZVN0ciksCiAgICB9OwoKICAgIGlmIChzZWNvbmRTdHIpIHJlc3VsdC5zZWNvbmQgPSBwYXJzZUludGVnZXIoc2Vjb25kU3RyKTsKICAgIGlmICh3ZWVrZGF5U3RyKSB7CiAgICAgIHJlc3VsdC53ZWVrZGF5ID0KICAgICAgICB3ZWVrZGF5U3RyLmxlbmd0aCA+IDMKICAgICAgICAgID8gd2Vla2RheXNMb25nLmluZGV4T2Yod2Vla2RheVN0cikgKyAxCiAgICAgICAgICA6IHdlZWtkYXlzU2hvcnQuaW5kZXhPZih3ZWVrZGF5U3RyKSArIDE7CiAgICB9CgogICAgcmV0dXJuIHJlc3VsdDsKICB9CgogIC8vIFJGQyAyODIyLzUzMjIKICBjb25zdCByZmMyODIyID0KICAgIC9eKD86KE1vbnxUdWV8V2VkfFRodXxGcml8U2F0fFN1biksXHMpPyhcZHsxLDJ9KVxzKEphbnxGZWJ8TWFyfEFwcnxNYXl8SnVufEp1bHxBdWd8U2VwfE9jdHxOb3Z8RGVjKVxzKFxkezIsNH0pXHMoXGRcZCk6KFxkXGQpKD86OihcZFxkKSk/XHMoPzooVVR8R01UfFtFQ01QXVtTRF1UKXwoW1p6XSl8KD86KFsrLV1cZFxkKShcZFxkKSkpJC87CgogIGZ1bmN0aW9uIGV4dHJhY3RSRkMyODIyKG1hdGNoKSB7CiAgICBjb25zdCBbCiAgICAgICAgLAogICAgICAgIHdlZWtkYXlTdHIsCiAgICAgICAgZGF5U3RyLAogICAgICAgIG1vbnRoU3RyLAogICAgICAgIHllYXJTdHIsCiAgICAgICAgaG91clN0ciwKICAgICAgICBtaW51dGVTdHIsCiAgICAgICAgc2Vjb25kU3RyLAogICAgICAgIG9ic09mZnNldCwKICAgICAgICBtaWxPZmZzZXQsCiAgICAgICAgb2ZmSG91clN0ciwKICAgICAgICBvZmZNaW51dGVTdHIsCiAgICAgIF0gPSBtYXRjaCwKICAgICAgcmVzdWx0ID0gZnJvbVN0cmluZ3Mod2Vla2RheVN0ciwgeWVhclN0ciwgbW9udGhTdHIsIGRheVN0ciwgaG91clN0ciwgbWludXRlU3RyLCBzZWNvbmRTdHIpOwoKICAgIGxldCBvZmZzZXQ7CiAgICBpZiAob2JzT2Zmc2V0KSB7CiAgICAgIG9mZnNldCA9IG9ic09mZnNldHNbb2JzT2Zmc2V0XTsKICAgIH0gZWxzZSBpZiAobWlsT2Zmc2V0KSB7CiAgICAgIG9mZnNldCA9IDA7CiAgICB9IGVsc2UgewogICAgICBvZmZzZXQgPSBzaWduZWRPZmZzZXQob2ZmSG91clN0ciwgb2ZmTWludXRlU3RyKTsKICAgIH0KCiAgICByZXR1cm4gW3Jlc3VsdCwgbmV3IEZpeGVkT2Zmc2V0Wm9uZShvZmZzZXQpXTsKICB9CgogIGZ1bmN0aW9uIHByZXByb2Nlc3NSRkMyODIyKHMpIHsKICAgIC8vIFJlbW92ZSBjb21tZW50cyBhbmQgZm9sZGluZyB3aGl0ZXNwYWNlIGFuZCByZXBsYWNlIG11bHRpcGxlLXNwYWNlcyB3aXRoIGEgc2luZ2xlIHNwYWNlCiAgICByZXR1cm4gcwogICAgICAucmVwbGFjZSgvXChbXildKlwpfFtcblx0XS9nLCAiICIpCiAgICAgIC5yZXBsYWNlKC8oXHNccyspL2csICIgIikKICAgICAgLnRyaW0oKTsKICB9CgogIC8vIGh0dHAgZGF0ZQoKICBjb25zdCByZmMxMTIzID0KICAgICAgL14oTW9ufFR1ZXxXZWR8VGh1fEZyaXxTYXR8U3VuKSwgKFxkXGQpIChKYW58RmVifE1hcnxBcHJ8TWF5fEp1bnxKdWx8QXVnfFNlcHxPY3R8Tm92fERlYykgKFxkezR9KSAoXGRcZCk6KFxkXGQpOihcZFxkKSBHTVQkLywKICAgIHJmYzg1MCA9CiAgICAgIC9eKE1vbmRheXxUdWVzZGF5fFdlZG5lc2RheXxUaHVyc2RheXxGcmlkYXl8U2F0dXJkYXl8U3VuZGF5KSwgKFxkXGQpLShKYW58RmVifE1hcnxBcHJ8TWF5fEp1bnxKdWx8QXVnfFNlcHxPY3R8Tm92fERlYyktKFxkXGQpIChcZFxkKTooXGRcZCk6KFxkXGQpIEdNVCQvLAogICAgYXNjaWkgPQogICAgICAvXihNb258VHVlfFdlZHxUaHV8RnJpfFNhdHxTdW4pIChKYW58RmVifE1hcnxBcHJ8TWF5fEp1bnxKdWx8QXVnfFNlcHxPY3R8Tm92fERlYykgKCBcZHxcZFxkKSAoXGRcZCk6KFxkXGQpOihcZFxkKSAoXGR7NH0pJC87CgogIGZ1bmN0aW9uIGV4dHJhY3RSRkMxMTIzT3I4NTAobWF0Y2gpIHsKICAgIGNvbnN0IFssIHdlZWtkYXlTdHIsIGRheVN0ciwgbW9udGhTdHIsIHllYXJTdHIsIGhvdXJTdHIsIG1pbnV0ZVN0ciwgc2Vjb25kU3RyXSA9IG1hdGNoLAogICAgICByZXN1bHQgPSBmcm9tU3RyaW5ncyh3ZWVrZGF5U3RyLCB5ZWFyU3RyLCBtb250aFN0ciwgZGF5U3RyLCBob3VyU3RyLCBtaW51dGVTdHIsIHNlY29uZFN0cik7CiAgICByZXR1cm4gW3Jlc3VsdCwgRml4ZWRPZmZzZXRab25lLnV0Y0luc3RhbmNlXTsKICB9CgogIGZ1bmN0aW9uIGV4dHJhY3RBU0NJSShtYXRjaCkgewogICAgY29uc3QgWywgd2Vla2RheVN0ciwgbW9udGhTdHIsIGRheVN0ciwgaG91clN0ciwgbWludXRlU3RyLCBzZWNvbmRTdHIsIHllYXJTdHJdID0gbWF0Y2gsCiAgICAgIHJlc3VsdCA9IGZyb21TdHJpbmdzKHdlZWtkYXlTdHIsIHllYXJTdHIsIG1vbnRoU3RyLCBkYXlTdHIsIGhvdXJTdHIsIG1pbnV0ZVN0ciwgc2Vjb25kU3RyKTsKICAgIHJldHVybiBbcmVzdWx0LCBGaXhlZE9mZnNldFpvbmUudXRjSW5zdGFuY2VdOwogIH0KCiAgY29uc3QgaXNvWW1kV2l0aFRpbWVFeHRlbnNpb25SZWdleCA9IGNvbWJpbmVSZWdleGVzKGlzb1ltZFJlZ2V4LCBpc29UaW1lRXh0ZW5zaW9uUmVnZXgpOwogIGNvbnN0IGlzb1dlZWtXaXRoVGltZUV4dGVuc2lvblJlZ2V4ID0gY29tYmluZVJlZ2V4ZXMoaXNvV2Vla1JlZ2V4LCBpc29UaW1lRXh0ZW5zaW9uUmVnZXgpOwogIGNvbnN0IGlzb09yZGluYWxXaXRoVGltZUV4dGVuc2lvblJlZ2V4ID0gY29tYmluZVJlZ2V4ZXMoaXNvT3JkaW5hbFJlZ2V4LCBpc29UaW1lRXh0ZW5zaW9uUmVnZXgpOwogIGNvbnN0IGlzb1RpbWVDb21iaW5lZFJlZ2V4ID0gY29tYmluZVJlZ2V4ZXMoaXNvVGltZVJlZ2V4KTsKCiAgY29uc3QgZXh0cmFjdElTT1ltZFRpbWVBbmRPZmZzZXQgPSBjb21iaW5lRXh0cmFjdG9ycygKICAgIGV4dHJhY3RJU09ZbWQsCiAgICBleHRyYWN0SVNPVGltZSwKICAgIGV4dHJhY3RJU09PZmZzZXQsCiAgICBleHRyYWN0SUFOQVpvbmUKICApOwogIGNvbnN0IGV4dHJhY3RJU09XZWVrVGltZUFuZE9mZnNldCA9IGNvbWJpbmVFeHRyYWN0b3JzKAogICAgZXh0cmFjdElTT1dlZWtEYXRhLAogICAgZXh0cmFjdElTT1RpbWUsCiAgICBleHRyYWN0SVNPT2Zmc2V0LAogICAgZXh0cmFjdElBTkFab25lCiAgKTsKICBjb25zdCBleHRyYWN0SVNPT3JkaW5hbERhdGVBbmRUaW1lID0gY29tYmluZUV4dHJhY3RvcnMoCiAgICBleHRyYWN0SVNPT3JkaW5hbERhdGEsCiAgICBleHRyYWN0SVNPVGltZSwKICAgIGV4dHJhY3RJU09PZmZzZXQsCiAgICBleHRyYWN0SUFOQVpvbmUKICApOwogIGNvbnN0IGV4dHJhY3RJU09UaW1lQW5kT2Zmc2V0ID0gY29tYmluZUV4dHJhY3RvcnMoCiAgICBleHRyYWN0SVNPVGltZSwKICAgIGV4dHJhY3RJU09PZmZzZXQsCiAgICBleHRyYWN0SUFOQVpvbmUKICApOwoKICAvKgogICAqIEBwcml2YXRlCiAgICovCgogIGZ1bmN0aW9uIHBhcnNlSVNPRGF0ZShzKSB7CiAgICByZXR1cm4gcGFyc2UkMSgKICAgICAgcywKICAgICAgW2lzb1ltZFdpdGhUaW1lRXh0ZW5zaW9uUmVnZXgsIGV4dHJhY3RJU09ZbWRUaW1lQW5kT2Zmc2V0XSwKICAgICAgW2lzb1dlZWtXaXRoVGltZUV4dGVuc2lvblJlZ2V4LCBleHRyYWN0SVNPV2Vla1RpbWVBbmRPZmZzZXRdLAogICAgICBbaXNvT3JkaW5hbFdpdGhUaW1lRXh0ZW5zaW9uUmVnZXgsIGV4dHJhY3RJU09PcmRpbmFsRGF0ZUFuZFRpbWVdLAogICAgICBbaXNvVGltZUNvbWJpbmVkUmVnZXgsIGV4dHJhY3RJU09UaW1lQW5kT2Zmc2V0XQogICAgKTsKICB9CgogIGZ1bmN0aW9uIHBhcnNlUkZDMjgyMkRhdGUocykgewogICAgcmV0dXJuIHBhcnNlJDEocHJlcHJvY2Vzc1JGQzI4MjIocyksIFtyZmMyODIyLCBleHRyYWN0UkZDMjgyMl0pOwogIH0KCiAgZnVuY3Rpb24gcGFyc2VIVFRQRGF0ZShzKSB7CiAgICByZXR1cm4gcGFyc2UkMSgKICAgICAgcywKICAgICAgW3JmYzExMjMsIGV4dHJhY3RSRkMxMTIzT3I4NTBdLAogICAgICBbcmZjODUwLCBleHRyYWN0UkZDMTEyM09yODUwXSwKICAgICAgW2FzY2lpLCBleHRyYWN0QVNDSUldCiAgICApOwogIH0KCiAgZnVuY3Rpb24gcGFyc2VJU09EdXJhdGlvbihzKSB7CiAgICByZXR1cm4gcGFyc2UkMShzLCBbaXNvRHVyYXRpb24sIGV4dHJhY3RJU09EdXJhdGlvbl0pOwogIH0KCiAgY29uc3QgZXh0cmFjdElTT1RpbWVPbmx5ID0gY29tYmluZUV4dHJhY3RvcnMoZXh0cmFjdElTT1RpbWUpOwoKICBmdW5jdGlvbiBwYXJzZUlTT1RpbWVPbmx5KHMpIHsKICAgIHJldHVybiBwYXJzZSQxKHMsIFtpc29UaW1lT25seSwgZXh0cmFjdElTT1RpbWVPbmx5XSk7CiAgfQoKICBjb25zdCBzcWxZbWRXaXRoVGltZUV4dGVuc2lvblJlZ2V4ID0gY29tYmluZVJlZ2V4ZXMoc3FsWW1kUmVnZXgsIHNxbFRpbWVFeHRlbnNpb25SZWdleCk7CiAgY29uc3Qgc3FsVGltZUNvbWJpbmVkUmVnZXggPSBjb21iaW5lUmVnZXhlcyhzcWxUaW1lUmVnZXgpOwoKICBjb25zdCBleHRyYWN0SVNPVGltZU9mZnNldEFuZElBTkFab25lID0gY29tYmluZUV4dHJhY3RvcnMoCiAgICBleHRyYWN0SVNPVGltZSwKICAgIGV4dHJhY3RJU09PZmZzZXQsCiAgICBleHRyYWN0SUFOQVpvbmUKICApOwoKICBmdW5jdGlvbiBwYXJzZVNRTChzKSB7CiAgICByZXR1cm4gcGFyc2UkMSgKICAgICAgcywKICAgICAgW3NxbFltZFdpdGhUaW1lRXh0ZW5zaW9uUmVnZXgsIGV4dHJhY3RJU09ZbWRUaW1lQW5kT2Zmc2V0XSwKICAgICAgW3NxbFRpbWVDb21iaW5lZFJlZ2V4LCBleHRyYWN0SVNPVGltZU9mZnNldEFuZElBTkFab25lXQogICAgKTsKICB9CgogIGNvbnN0IElOVkFMSUQkMyA9ICJJbnZhbGlkIER1cmF0aW9uIjsKCiAgLy8gdW5pdCBjb252ZXJzaW9uIGNvbnN0YW50cwogIGNvbnN0IGxvd09yZGVyTWF0cml4ID0gewogICAgICB3ZWVrczogewogICAgICAgIGRheXM6IDcsCiAgICAgICAgaG91cnM6IDcgKiAyNCwKICAgICAgICBtaW51dGVzOiA3ICogMjQgKiA2MCwKICAgICAgICBzZWNvbmRzOiA3ICogMjQgKiA2MCAqIDYwLAogICAgICAgIG1pbGxpc2Vjb25kczogNyAqIDI0ICogNjAgKiA2MCAqIDEwMDAsCiAgICAgIH0sCiAgICAgIGRheXM6IHsKICAgICAgICBob3VyczogMjQsCiAgICAgICAgbWludXRlczogMjQgKiA2MCwKICAgICAgICBzZWNvbmRzOiAyNCAqIDYwICogNjAsCiAgICAgICAgbWlsbGlzZWNvbmRzOiAyNCAqIDYwICogNjAgKiAxMDAwLAogICAgICB9LAogICAgICBob3VyczogeyBtaW51dGVzOiA2MCwgc2Vjb25kczogNjAgKiA2MCwgbWlsbGlzZWNvbmRzOiA2MCAqIDYwICogMTAwMCB9LAogICAgICBtaW51dGVzOiB7IHNlY29uZHM6IDYwLCBtaWxsaXNlY29uZHM6IDYwICogMTAwMCB9LAogICAgICBzZWNvbmRzOiB7IG1pbGxpc2Vjb25kczogMTAwMCB9LAogICAgfSwKICAgIGNhc3VhbE1hdHJpeCA9IHsKICAgICAgeWVhcnM6IHsKICAgICAgICBxdWFydGVyczogNCwKICAgICAgICBtb250aHM6IDEyLAogICAgICAgIHdlZWtzOiA1MiwKICAgICAgICBkYXlzOiAzNjUsCiAgICAgICAgaG91cnM6IDM2NSAqIDI0LAogICAgICAgIG1pbnV0ZXM6IDM2NSAqIDI0ICogNjAsCiAgICAgICAgc2Vjb25kczogMzY1ICogMjQgKiA2MCAqIDYwLAogICAgICAgIG1pbGxpc2Vjb25kczogMzY1ICogMjQgKiA2MCAqIDYwICogMTAwMCwKICAgICAgfSwKICAgICAgcXVhcnRlcnM6IHsKICAgICAgICBtb250aHM6IDMsCiAgICAgICAgd2Vla3M6IDEzLAogICAgICAgIGRheXM6IDkxLAogICAgICAgIGhvdXJzOiA5MSAqIDI0LAogICAgICAgIG1pbnV0ZXM6IDkxICogMjQgKiA2MCwKICAgICAgICBzZWNvbmRzOiA5MSAqIDI0ICogNjAgKiA2MCwKICAgICAgICBtaWxsaXNlY29uZHM6IDkxICogMjQgKiA2MCAqIDYwICogMTAwMCwKICAgICAgfSwKICAgICAgbW9udGhzOiB7CiAgICAgICAgd2Vla3M6IDQsCiAgICAgICAgZGF5czogMzAsCiAgICAgICAgaG91cnM6IDMwICogMjQsCiAgICAgICAgbWludXRlczogMzAgKiAyNCAqIDYwLAogICAgICAgIHNlY29uZHM6IDMwICogMjQgKiA2MCAqIDYwLAogICAgICAgIG1pbGxpc2Vjb25kczogMzAgKiAyNCAqIDYwICogNjAgKiAxMDAwLAogICAgICB9LAoKICAgICAgLi4ubG93T3JkZXJNYXRyaXgsCiAgICB9LAogICAgZGF5c0luWWVhckFjY3VyYXRlID0gMTQ2MDk3LjAgLyA0MDAsCiAgICBkYXlzSW5Nb250aEFjY3VyYXRlID0gMTQ2MDk3LjAgLyA0ODAwLAogICAgYWNjdXJhdGVNYXRyaXggPSB7CiAgICAgIHllYXJzOiB7CiAgICAgICAgcXVhcnRlcnM6IDQsCiAgICAgICAgbW9udGhzOiAxMiwKICAgICAgICB3ZWVrczogZGF5c0luWWVhckFjY3VyYXRlIC8gNywKICAgICAgICBkYXlzOiBkYXlzSW5ZZWFyQWNjdXJhdGUsCiAgICAgICAgaG91cnM6IGRheXNJblllYXJBY2N1cmF0ZSAqIDI0LAogICAgICAgIG1pbnV0ZXM6IGRheXNJblllYXJBY2N1cmF0ZSAqIDI0ICogNjAsCiAgICAgICAgc2Vjb25kczogZGF5c0luWWVhckFjY3VyYXRlICogMjQgKiA2MCAqIDYwLAogICAgICAgIG1pbGxpc2Vjb25kczogZGF5c0luWWVhckFjY3VyYXRlICogMjQgKiA2MCAqIDYwICogMTAwMCwKICAgICAgfSwKICAgICAgcXVhcnRlcnM6IHsKICAgICAgICBtb250aHM6IDMsCiAgICAgICAgd2Vla3M6IGRheXNJblllYXJBY2N1cmF0ZSAvIDI4LAogICAgICAgIGRheXM6IGRheXNJblllYXJBY2N1cmF0ZSAvIDQsCiAgICAgICAgaG91cnM6IChkYXlzSW5ZZWFyQWNjdXJhdGUgKiAyNCkgLyA0LAogICAgICAgIG1pbnV0ZXM6IChkYXlzSW5ZZWFyQWNjdXJhdGUgKiAyNCAqIDYwKSAvIDQsCiAgICAgICAgc2Vjb25kczogKGRheXNJblllYXJBY2N1cmF0ZSAqIDI0ICogNjAgKiA2MCkgLyA0LAogICAgICAgIG1pbGxpc2Vjb25kczogKGRheXNJblllYXJBY2N1cmF0ZSAqIDI0ICogNjAgKiA2MCAqIDEwMDApIC8gNCwKICAgICAgfSwKICAgICAgbW9udGhzOiB7CiAgICAgICAgd2Vla3M6IGRheXNJbk1vbnRoQWNjdXJhdGUgLyA3LAogICAgICAgIGRheXM6IGRheXNJbk1vbnRoQWNjdXJhdGUsCiAgICAgICAgaG91cnM6IGRheXNJbk1vbnRoQWNjdXJhdGUgKiAyNCwKICAgICAgICBtaW51dGVzOiBkYXlzSW5Nb250aEFjY3VyYXRlICogMjQgKiA2MCwKICAgICAgICBzZWNvbmRzOiBkYXlzSW5Nb250aEFjY3VyYXRlICogMjQgKiA2MCAqIDYwLAogICAgICAgIG1pbGxpc2Vjb25kczogZGF5c0luTW9udGhBY2N1cmF0ZSAqIDI0ICogNjAgKiA2MCAqIDEwMDAsCiAgICAgIH0sCiAgICAgIC4uLmxvd09yZGVyTWF0cml4LAogICAgfTsKCiAgLy8gdW5pdHMgb3JkZXJlZCBieSBzaXplCiAgY29uc3Qgb3JkZXJlZFVuaXRzJDEgPSBbCiAgICAieWVhcnMiLAogICAgInF1YXJ0ZXJzIiwKICAgICJtb250aHMiLAogICAgIndlZWtzIiwKICAgICJkYXlzIiwKICAgICJob3VycyIsCiAgICAibWludXRlcyIsCiAgICAic2Vjb25kcyIsCiAgICAibWlsbGlzZWNvbmRzIiwKICBdOwoKICBjb25zdCByZXZlcnNlVW5pdHMgPSBvcmRlcmVkVW5pdHMkMS5zbGljZSgwKS5yZXZlcnNlKCk7CgogIC8vIGNsb25lIHJlYWxseSBtZWFucyAiY3JlYXRlIGFub3RoZXIgaW5zdGFuY2UganVzdCBsaWtlIHRoaXMgb25lLCBidXQgd2l0aCB0aGVzZSBjaGFuZ2VzIgogIGZ1bmN0aW9uIGNsb25lJDIoZHVyLCBhbHRzLCBjbGVhciA9IGZhbHNlKSB7CiAgICAvLyBkZWVwIG1lcmdlIGZvciB2YWxzCiAgICBjb25zdCBjb25mID0gewogICAgICB2YWx1ZXM6IGNsZWFyID8gYWx0cy52YWx1ZXMgOiB7IC4uLmR1ci52YWx1ZXMsIC4uLihhbHRzLnZhbHVlcyB8fCB7fSkgfSwKICAgICAgbG9jOiBkdXIubG9jLmNsb25lKGFsdHMubG9jKSwKICAgICAgY29udmVyc2lvbkFjY3VyYWN5OiBhbHRzLmNvbnZlcnNpb25BY2N1cmFjeSB8fCBkdXIuY29udmVyc2lvbkFjY3VyYWN5LAogICAgICBtYXRyaXg6IGFsdHMubWF0cml4IHx8IGR1ci5tYXRyaXgsCiAgICB9OwogICAgcmV0dXJuIG5ldyBEdXJhdGlvbihjb25mKTsKICB9CgogIGZ1bmN0aW9uIGFudGlUcnVuYyhuKSB7CiAgICByZXR1cm4gbiA8IDAgPyBNYXRoLmZsb29yKG4pIDogTWF0aC5jZWlsKG4pOwogIH0KCiAgLy8gTkI6IG11dGF0ZXMgcGFyYW1ldGVycwogIGZ1bmN0aW9uIGNvbnZlcnQobWF0cml4LCBmcm9tTWFwLCBmcm9tVW5pdCwgdG9NYXAsIHRvVW5pdCkgewogICAgY29uc3QgY29udiA9IG1hdHJpeFt0b1VuaXRdW2Zyb21Vbml0XSwKICAgICAgcmF3ID0gZnJvbU1hcFtmcm9tVW5pdF0gLyBjb252LAogICAgICBzYW1lU2lnbiA9IE1hdGguc2lnbihyYXcpID09PSBNYXRoLnNpZ24odG9NYXBbdG9Vbml0XSksCiAgICAgIC8vIG9rLCBzbyB0aGlzIGlzIHdpbGQsIGJ1dCBzZWUgdGhlIG1hdHJpeCBpbiB0aGUgdGVzdHMKICAgICAgYWRkZWQgPQogICAgICAgICFzYW1lU2lnbiAmJiB0b01hcFt0b1VuaXRdICE9PSAwICYmIE1hdGguYWJzKHJhdykgPD0gMSA/IGFudGlUcnVuYyhyYXcpIDogTWF0aC50cnVuYyhyYXcpOwogICAgdG9NYXBbdG9Vbml0XSArPSBhZGRlZDsKICAgIGZyb21NYXBbZnJvbVVuaXRdIC09IGFkZGVkICogY29udjsKICB9CgogIC8vIE5COiBtdXRhdGVzIHBhcmFtZXRlcnMKICBmdW5jdGlvbiBub3JtYWxpemVWYWx1ZXMobWF0cml4LCB2YWxzKSB7CiAgICByZXZlcnNlVW5pdHMucmVkdWNlKChwcmV2aW91cywgY3VycmVudCkgPT4gewogICAgICBpZiAoIWlzVW5kZWZpbmVkKHZhbHNbY3VycmVudF0pKSB7CiAgICAgICAgaWYgKHByZXZpb3VzKSB7CiAgICAgICAgICBjb252ZXJ0KG1hdHJpeCwgdmFscywgcHJldmlvdXMsIHZhbHMsIGN1cnJlbnQpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gY3VycmVudDsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gcHJldmlvdXM7CiAgICAgIH0KICAgIH0sIG51bGwpOwogIH0KCiAgLyoqCiAgICogQSBEdXJhdGlvbiBvYmplY3QgcmVwcmVzZW50cyBhIHBlcmlvZCBvZiB0aW1lLCBsaWtlICIyIG1vbnRocyIgb3IgIjEgZGF5LCAxIGhvdXIiLiBDb25jZXB0dWFsbHksIGl0J3MganVzdCBhIG1hcCBvZiB1bml0cyB0byB0aGVpciBxdWFudGl0aWVzLCBhY2NvbXBhbmllZCBieSBzb21lIGFkZGl0aW9uYWwgY29uZmlndXJhdGlvbiBhbmQgbWV0aG9kcyBmb3IgY3JlYXRpbmcsIHBhcnNpbmcsIGludGVycm9nYXRpbmcsIHRyYW5zZm9ybWluZywgYW5kIGZvcm1hdHRpbmcgdGhlbS4gVGhleSBjYW4gYmUgdXNlZCBvbiB0aGVpciBvd24gb3IgaW4gY29uanVuY3Rpb24gd2l0aCBvdGhlciBMdXhvbiB0eXBlczsgZm9yIGV4YW1wbGUsIHlvdSBjYW4gdXNlIHtAbGluayBEYXRlVGltZSNwbHVzfSB0byBhZGQgYSBEdXJhdGlvbiBvYmplY3QgdG8gYSBEYXRlVGltZSwgcHJvZHVjaW5nIGFub3RoZXIgRGF0ZVRpbWUuCiAgICoKICAgKiBIZXJlIGlzIGEgYnJpZWYgb3ZlcnZpZXcgb2YgY29tbW9ubHkgdXNlZCBtZXRob2RzIGFuZCBnZXR0ZXJzIGluIER1cmF0aW9uOgogICAqCiAgICogKiAqKkNyZWF0aW9uKiogVG8gY3JlYXRlIGEgRHVyYXRpb24sIHVzZSB7QGxpbmsgRHVyYXRpb24uZnJvbU1pbGxpc30sIHtAbGluayBEdXJhdGlvbi5mcm9tT2JqZWN0fSwgb3Ige0BsaW5rIER1cmF0aW9uLmZyb21JU099LgogICAqICogKipVbml0IHZhbHVlcyoqIFNlZSB0aGUge0BsaW5rIER1cmF0aW9uI3llYXJzfSwge0BsaW5rIER1cmF0aW9uI21vbnRoc30sIHtAbGluayBEdXJhdGlvbiN3ZWVrc30sIHtAbGluayBEdXJhdGlvbiNkYXlzfSwge0BsaW5rIER1cmF0aW9uI2hvdXJzfSwge0BsaW5rIER1cmF0aW9uI21pbnV0ZXN9LCB7QGxpbmsgRHVyYXRpb24jc2Vjb25kc30sIHtAbGluayBEdXJhdGlvbiNtaWxsaXNlY29uZHN9IGFjY2Vzc29ycy4KICAgKiAqICoqQ29uZmlndXJhdGlvbioqIFNlZSAge0BsaW5rIER1cmF0aW9uI2xvY2FsZX0gYW5kIHtAbGluayBEdXJhdGlvbiNudW1iZXJpbmdTeXN0ZW19IGFjY2Vzc29ycy4KICAgKiAqICoqVHJhbnNmb3JtYXRpb24qKiBUbyBjcmVhdGUgbmV3IER1cmF0aW9ucyBvdXQgb2Ygb2xkIG9uZXMgdXNlIHtAbGluayBEdXJhdGlvbiNwbHVzfSwge0BsaW5rIER1cmF0aW9uI21pbnVzfSwge0BsaW5rIER1cmF0aW9uI25vcm1hbGl6ZX0sIHtAbGluayBEdXJhdGlvbiNzZXR9LCB7QGxpbmsgRHVyYXRpb24jcmVjb25maWd1cmV9LCB7QGxpbmsgRHVyYXRpb24jc2hpZnRUb30sIGFuZCB7QGxpbmsgRHVyYXRpb24jbmVnYXRlfS4KICAgKiAqICoqT3V0cHV0KiogVG8gY29udmVydCB0aGUgRHVyYXRpb24gaW50byBvdGhlciByZXByZXNlbnRhdGlvbnMsIHNlZSB7QGxpbmsgRHVyYXRpb24jYXN9LCB7QGxpbmsgRHVyYXRpb24jdG9JU099LCB7QGxpbmsgRHVyYXRpb24jdG9Gb3JtYXR9LCBhbmQge0BsaW5rIER1cmF0aW9uI3RvSlNPTn0KICAgKgogICAqIFRoZXJlJ3MgYXJlIG1vcmUgbWV0aG9kcyBkb2N1bWVudGVkIGJlbG93LiBJbiBhZGRpdGlvbiwgZm9yIG1vcmUgaW5mb3JtYXRpb24gb24gc3VidGxlciB0b3BpY3MgbGlrZSBpbnRlcm5hdGlvbmFsaXphdGlvbiBhbmQgdmFsaWRpdHksIHNlZSB0aGUgZXh0ZXJuYWwgZG9jdW1lbnRhdGlvbi4KICAgKi8KICBjbGFzcyBEdXJhdGlvbiB7CiAgICAvKioKICAgICAqIEBwcml2YXRlCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGNvbmZpZykgewogICAgICBjb25zdCBhY2N1cmF0ZSA9IGNvbmZpZy5jb252ZXJzaW9uQWNjdXJhY3kgPT09ICJsb25ndGVybSIgfHwgZmFsc2U7CiAgICAgIGxldCBtYXRyaXggPSBhY2N1cmF0ZSA/IGFjY3VyYXRlTWF0cml4IDogY2FzdWFsTWF0cml4OwoKICAgICAgaWYgKGNvbmZpZy5tYXRyaXgpIHsKICAgICAgICBtYXRyaXggPSBjb25maWcubWF0cml4OwogICAgICB9CgogICAgICAvKioKICAgICAgICogQGFjY2VzcyBwcml2YXRlCiAgICAgICAqLwogICAgICB0aGlzLnZhbHVlcyA9IGNvbmZpZy52YWx1ZXM7CiAgICAgIC8qKgogICAgICAgKiBAYWNjZXNzIHByaXZhdGUKICAgICAgICovCiAgICAgIHRoaXMubG9jID0gY29uZmlnLmxvYyB8fCBMb2NhbGUuY3JlYXRlKCk7CiAgICAgIC8qKgogICAgICAgKiBAYWNjZXNzIHByaXZhdGUKICAgICAgICovCiAgICAgIHRoaXMuY29udmVyc2lvbkFjY3VyYWN5ID0gYWNjdXJhdGUgPyAibG9uZ3Rlcm0iIDogImNhc3VhbCI7CiAgICAgIC8qKgogICAgICAgKiBAYWNjZXNzIHByaXZhdGUKICAgICAgICovCiAgICAgIHRoaXMuaW52YWxpZCA9IGNvbmZpZy5pbnZhbGlkIHx8IG51bGw7CiAgICAgIC8qKgogICAgICAgKiBAYWNjZXNzIHByaXZhdGUKICAgICAgICovCiAgICAgIHRoaXMubWF0cml4ID0gbWF0cml4OwogICAgICAvKioKICAgICAgICogQGFjY2VzcyBwcml2YXRlCiAgICAgICAqLwogICAgICB0aGlzLmlzTHV4b25EdXJhdGlvbiA9IHRydWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBDcmVhdGUgRHVyYXRpb24gZnJvbSBhIG51bWJlciBvZiBtaWxsaXNlY29uZHMuCiAgICAgKiBAcGFyYW0ge251bWJlcn0gY291bnQgb2YgbWlsbGlzZWNvbmRzCiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnMgZm9yIHBhcnNpbmcKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NhbGU9J2VuLVVTJ10gLSB0aGUgbG9jYWxlIHRvIHVzZQogICAgICogQHBhcmFtIHtzdHJpbmd9IG9wdHMubnVtYmVyaW5nU3lzdGVtIC0gdGhlIG51bWJlcmluZyBzeXN0ZW0gdG8gdXNlCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMuY29udmVyc2lvbkFjY3VyYWN5PSdjYXN1YWwnXSAtIHRoZSBjb252ZXJzaW9uIHN5c3RlbSB0byB1c2UKICAgICAqIEByZXR1cm4ge0R1cmF0aW9ufQogICAgICovCiAgICBzdGF0aWMgZnJvbU1pbGxpcyhjb3VudCwgb3B0cykgewogICAgICByZXR1cm4gRHVyYXRpb24uZnJvbU9iamVjdCh7IG1pbGxpc2Vjb25kczogY291bnQgfSwgb3B0cyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBDcmVhdGUgYSBEdXJhdGlvbiBmcm9tIGEgSmF2YVNjcmlwdCBvYmplY3Qgd2l0aCBrZXlzIGxpa2UgJ3llYXJzJyBhbmQgJ2hvdXJzJy4KICAgICAqIElmIHRoaXMgb2JqZWN0IGlzIGVtcHR5IHRoZW4gYSB6ZXJvIG1pbGxpc2Vjb25kcyBkdXJhdGlvbiBpcyByZXR1cm5lZC4KICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmogLSB0aGUgb2JqZWN0IHRvIGNyZWF0ZSB0aGUgRGF0ZVRpbWUgZnJvbQogICAgICogQHBhcmFtIHtudW1iZXJ9IG9iai55ZWFycwogICAgICogQHBhcmFtIHtudW1iZXJ9IG9iai5xdWFydGVycwogICAgICogQHBhcmFtIHtudW1iZXJ9IG9iai5tb250aHMKICAgICAqIEBwYXJhbSB7bnVtYmVyfSBvYmoud2Vla3MKICAgICAqIEBwYXJhbSB7bnVtYmVyfSBvYmouZGF5cwogICAgICogQHBhcmFtIHtudW1iZXJ9IG9iai5ob3VycwogICAgICogQHBhcmFtIHtudW1iZXJ9IG9iai5taW51dGVzCiAgICAgKiBAcGFyYW0ge251bWJlcn0gb2JqLnNlY29uZHMKICAgICAqIEBwYXJhbSB7bnVtYmVyfSBvYmoubWlsbGlzZWNvbmRzCiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdHM9W11dIC0gb3B0aW9ucyBmb3IgY3JlYXRpbmcgdGhpcyBEdXJhdGlvbgogICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmxvY2FsZT0nZW4tVVMnXSAtIHRoZSBsb2NhbGUgdG8gdXNlCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0cy5udW1iZXJpbmdTeXN0ZW0gLSB0aGUgbnVtYmVyaW5nIHN5c3RlbSB0byB1c2UKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5jb252ZXJzaW9uQWNjdXJhY3k9J2Nhc3VhbCddIC0gdGhlIHByZXNldCBjb252ZXJzaW9uIHN5c3RlbSB0byB1c2UKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5tYXRyaXg9T2JqZWN0XSAtIHRoZSBjdXN0b20gY29udmVyc2lvbiBzeXN0ZW0gdG8gdXNlCiAgICAgKiBAcmV0dXJuIHtEdXJhdGlvbn0KICAgICAqLwogICAgc3RhdGljIGZyb21PYmplY3Qob2JqLCBvcHRzID0ge30pIHsKICAgICAgaWYgKG9iaiA9PSBudWxsIHx8IHR5cGVvZiBvYmogIT09ICJvYmplY3QiKSB7CiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKAogICAgICAgICAgYER1cmF0aW9uLmZyb21PYmplY3Q6IGFyZ3VtZW50IGV4cGVjdGVkIHRvIGJlIGFuIG9iamVjdCwgZ290ICR7CiAgICAgICAgICBvYmogPT09IG51bGwgPyAibnVsbCIgOiB0eXBlb2Ygb2JqCiAgICAgICAgfWAKICAgICAgICApOwogICAgICB9CgogICAgICByZXR1cm4gbmV3IER1cmF0aW9uKHsKICAgICAgICB2YWx1ZXM6IG5vcm1hbGl6ZU9iamVjdChvYmosIER1cmF0aW9uLm5vcm1hbGl6ZVVuaXQpLAogICAgICAgIGxvYzogTG9jYWxlLmZyb21PYmplY3Qob3B0cyksCiAgICAgICAgY29udmVyc2lvbkFjY3VyYWN5OiBvcHRzLmNvbnZlcnNpb25BY2N1cmFjeSwKICAgICAgICBtYXRyaXg6IG9wdHMubWF0cml4LAogICAgICB9KTsKICAgIH0KCiAgICAvKioKICAgICAqIENyZWF0ZSBhIER1cmF0aW9uIGZyb20gRHVyYXRpb25MaWtlLgogICAgICoKICAgICAqIEBwYXJhbSB7T2JqZWN0IHwgbnVtYmVyIHwgRHVyYXRpb259IGR1cmF0aW9uTGlrZQogICAgICogT25lIG9mOgogICAgICogLSBvYmplY3Qgd2l0aCBrZXlzIGxpa2UgJ3llYXJzJyBhbmQgJ2hvdXJzJy4KICAgICAqIC0gbnVtYmVyIHJlcHJlc2VudGluZyBtaWxsaXNlY29uZHMKICAgICAqIC0gRHVyYXRpb24gaW5zdGFuY2UKICAgICAqIEByZXR1cm4ge0R1cmF0aW9ufQogICAgICovCiAgICBzdGF0aWMgZnJvbUR1cmF0aW9uTGlrZShkdXJhdGlvbkxpa2UpIHsKICAgICAgaWYgKGlzTnVtYmVyJDEoZHVyYXRpb25MaWtlKSkgewogICAgICAgIHJldHVybiBEdXJhdGlvbi5mcm9tTWlsbGlzKGR1cmF0aW9uTGlrZSk7CiAgICAgIH0gZWxzZSBpZiAoRHVyYXRpb24uaXNEdXJhdGlvbihkdXJhdGlvbkxpa2UpKSB7CiAgICAgICAgcmV0dXJuIGR1cmF0aW9uTGlrZTsKICAgICAgfSBlbHNlIGlmICh0eXBlb2YgZHVyYXRpb25MaWtlID09PSAib2JqZWN0IikgewogICAgICAgIHJldHVybiBEdXJhdGlvbi5mcm9tT2JqZWN0KGR1cmF0aW9uTGlrZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKAogICAgICAgICAgYFVua25vd24gZHVyYXRpb24gYXJndW1lbnQgJHtkdXJhdGlvbkxpa2V9IG9mIHR5cGUgJHt0eXBlb2YgZHVyYXRpb25MaWtlfWAKICAgICAgICApOwogICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBDcmVhdGUgYSBEdXJhdGlvbiBmcm9tIGFuIElTTyA4NjAxIGR1cmF0aW9uIHN0cmluZy4KICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IC0gdGV4dCB0byBwYXJzZQogICAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zIGZvciBwYXJzaW5nCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jYWxlPSdlbi1VUyddIC0gdGhlIGxvY2FsZSB0byB1c2UKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRzLm51bWJlcmluZ1N5c3RlbSAtIHRoZSBudW1iZXJpbmcgc3lzdGVtIHRvIHVzZQogICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmNvbnZlcnNpb25BY2N1cmFjeT0nY2FzdWFsJ10gLSB0aGUgcHJlc2V0IGNvbnZlcnNpb24gc3lzdGVtIHRvIHVzZQogICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLm1hdHJpeD1PYmplY3RdIC0gdGhlIHByZXNldCBjb252ZXJzaW9uIHN5c3RlbSB0byB1c2UKICAgICAqIEBzZWUgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSVNPXzg2MDEjRHVyYXRpb25zCiAgICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tSVNPKCdQM1k2TTFXNERUMTJIMzBNNVMnKS50b09iamVjdCgpIC8vPT4geyB5ZWFyczogMywgbW9udGhzOiA2LCB3ZWVrczogMSwgZGF5czogNCwgaG91cnM6IDEyLCBtaW51dGVzOiAzMCwgc2Vjb25kczogNSB9CiAgICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tSVNPKCdQVDIzSCcpLnRvT2JqZWN0KCkgLy89PiB7IGhvdXJzOiAyMyB9CiAgICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tSVNPKCdQNVkzTScpLnRvT2JqZWN0KCkgLy89PiB7IHllYXJzOiA1LCBtb250aHM6IDMgfQogICAgICogQHJldHVybiB7RHVyYXRpb259CiAgICAgKi8KICAgIHN0YXRpYyBmcm9tSVNPKHRleHQsIG9wdHMpIHsKICAgICAgY29uc3QgW3BhcnNlZF0gPSBwYXJzZUlTT0R1cmF0aW9uKHRleHQpOwogICAgICBpZiAocGFyc2VkKSB7CiAgICAgICAgcmV0dXJuIER1cmF0aW9uLmZyb21PYmplY3QocGFyc2VkLCBvcHRzKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gRHVyYXRpb24uaW52YWxpZCgidW5wYXJzYWJsZSIsIGB0aGUgaW5wdXQgIiR7dGV4dH0iIGNhbid0IGJlIHBhcnNlZCBhcyBJU08gODYwMWApOwogICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBDcmVhdGUgYSBEdXJhdGlvbiBmcm9tIGFuIElTTyA4NjAxIHRpbWUgc3RyaW5nLgogICAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgLSB0ZXh0IHRvIHBhcnNlCiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnMgZm9yIHBhcnNpbmcKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NhbGU9J2VuLVVTJ10gLSB0aGUgbG9jYWxlIHRvIHVzZQogICAgICogQHBhcmFtIHtzdHJpbmd9IG9wdHMubnVtYmVyaW5nU3lzdGVtIC0gdGhlIG51bWJlcmluZyBzeXN0ZW0gdG8gdXNlCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMuY29udmVyc2lvbkFjY3VyYWN5PSdjYXN1YWwnXSAtIHRoZSBwcmVzZXQgY29udmVyc2lvbiBzeXN0ZW0gdG8gdXNlCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubWF0cml4PU9iamVjdF0gLSB0aGUgY29udmVyc2lvbiBzeXN0ZW0gdG8gdXNlCiAgICAgKiBAc2VlIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT184NjAxI1RpbWVzCiAgICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tSVNPVGltZSgnMTE6MjI6MzMuNDQ0JykudG9PYmplY3QoKSAvLz0+IHsgaG91cnM6IDExLCBtaW51dGVzOiAyMiwgc2Vjb25kczogMzMsIG1pbGxpc2Vjb25kczogNDQ0IH0KICAgICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21JU09UaW1lKCcxMTowMCcpLnRvT2JqZWN0KCkgLy89PiB7IGhvdXJzOiAxMSwgbWludXRlczogMCwgc2Vjb25kczogMCB9CiAgICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tSVNPVGltZSgnVDExOjAwJykudG9PYmplY3QoKSAvLz0+IHsgaG91cnM6IDExLCBtaW51dGVzOiAwLCBzZWNvbmRzOiAwIH0KICAgICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21JU09UaW1lKCcxMTAwJykudG9PYmplY3QoKSAvLz0+IHsgaG91cnM6IDExLCBtaW51dGVzOiAwLCBzZWNvbmRzOiAwIH0KICAgICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21JU09UaW1lKCdUMTEwMCcpLnRvT2JqZWN0KCkgLy89PiB7IGhvdXJzOiAxMSwgbWludXRlczogMCwgc2Vjb25kczogMCB9CiAgICAgKiBAcmV0dXJuIHtEdXJhdGlvbn0KICAgICAqLwogICAgc3RhdGljIGZyb21JU09UaW1lKHRleHQsIG9wdHMpIHsKICAgICAgY29uc3QgW3BhcnNlZF0gPSBwYXJzZUlTT1RpbWVPbmx5KHRleHQpOwogICAgICBpZiAocGFyc2VkKSB7CiAgICAgICAgcmV0dXJuIER1cmF0aW9uLmZyb21PYmplY3QocGFyc2VkLCBvcHRzKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gRHVyYXRpb24uaW52YWxpZCgidW5wYXJzYWJsZSIsIGB0aGUgaW5wdXQgIiR7dGV4dH0iIGNhbid0IGJlIHBhcnNlZCBhcyBJU08gODYwMWApOwogICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBDcmVhdGUgYW4gaW52YWxpZCBEdXJhdGlvbi4KICAgICAqIEBwYXJhbSB7c3RyaW5nfSByZWFzb24gLSBzaW1wbGUgc3RyaW5nIG9mIHdoeSB0aGlzIGRhdGV0aW1lIGlzIGludmFsaWQuIFNob3VsZCBub3QgY29udGFpbiBwYXJhbWV0ZXJzIG9yIGFueXRoaW5nIGVsc2UgZGF0YS1kZXBlbmRlbnQKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbZXhwbGFuYXRpb249bnVsbF0gLSBsb25nZXIgZXhwbGFuYXRpb24sIG1heSBpbmNsdWRlIHBhcmFtZXRlcnMgYW5kIG90aGVyIHVzZWZ1bCBkZWJ1Z2dpbmcgaW5mb3JtYXRpb24KICAgICAqIEByZXR1cm4ge0R1cmF0aW9ufQogICAgICovCiAgICBzdGF0aWMgaW52YWxpZChyZWFzb24sIGV4cGxhbmF0aW9uID0gbnVsbCkgewogICAgICBpZiAoIXJlYXNvbikgewogICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcigibmVlZCB0byBzcGVjaWZ5IGEgcmVhc29uIHRoZSBEdXJhdGlvbiBpcyBpbnZhbGlkIik7CiAgICAgIH0KCiAgICAgIGNvbnN0IGludmFsaWQgPSByZWFzb24gaW5zdGFuY2VvZiBJbnZhbGlkID8gcmVhc29uIDogbmV3IEludmFsaWQocmVhc29uLCBleHBsYW5hdGlvbik7CgogICAgICBpZiAoU2V0dGluZ3MudGhyb3dPbkludmFsaWQpIHsKICAgICAgICB0aHJvdyBuZXcgSW52YWxpZER1cmF0aW9uRXJyb3IoaW52YWxpZCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIG5ldyBEdXJhdGlvbih7IGludmFsaWQgfSk7CiAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIEBwcml2YXRlCiAgICAgKi8KICAgIHN0YXRpYyBub3JtYWxpemVVbml0KHVuaXQpIHsKICAgICAgY29uc3Qgbm9ybWFsaXplZCA9IHsKICAgICAgICB5ZWFyOiAieWVhcnMiLAogICAgICAgIHllYXJzOiAieWVhcnMiLAogICAgICAgIHF1YXJ0ZXI6ICJxdWFydGVycyIsCiAgICAgICAgcXVhcnRlcnM6ICJxdWFydGVycyIsCiAgICAgICAgbW9udGg6ICJtb250aHMiLAogICAgICAgIG1vbnRoczogIm1vbnRocyIsCiAgICAgICAgd2VlazogIndlZWtzIiwKICAgICAgICB3ZWVrczogIndlZWtzIiwKICAgICAgICBkYXk6ICJkYXlzIiwKICAgICAgICBkYXlzOiAiZGF5cyIsCiAgICAgICAgaG91cjogImhvdXJzIiwKICAgICAgICBob3VyczogImhvdXJzIiwKICAgICAgICBtaW51dGU6ICJtaW51dGVzIiwKICAgICAgICBtaW51dGVzOiAibWludXRlcyIsCiAgICAgICAgc2Vjb25kOiAic2Vjb25kcyIsCiAgICAgICAgc2Vjb25kczogInNlY29uZHMiLAogICAgICAgIG1pbGxpc2Vjb25kOiAibWlsbGlzZWNvbmRzIiwKICAgICAgICBtaWxsaXNlY29uZHM6ICJtaWxsaXNlY29uZHMiLAogICAgICB9W3VuaXQgPyB1bml0LnRvTG93ZXJDYXNlKCkgOiB1bml0XTsKCiAgICAgIGlmICghbm9ybWFsaXplZCkgdGhyb3cgbmV3IEludmFsaWRVbml0RXJyb3IodW5pdCk7CgogICAgICByZXR1cm4gbm9ybWFsaXplZDsKICAgIH0KCiAgICAvKioKICAgICAqIENoZWNrIGlmIGFuIG9iamVjdCBpcyBhIER1cmF0aW9uLiBXb3JrcyBhY3Jvc3MgY29udGV4dCBib3VuZGFyaWVzCiAgICAgKiBAcGFyYW0ge29iamVjdH0gbwogICAgICogQHJldHVybiB7Ym9vbGVhbn0KICAgICAqLwogICAgc3RhdGljIGlzRHVyYXRpb24obykgewogICAgICByZXR1cm4gKG8gJiYgby5pc0x1eG9uRHVyYXRpb24pIHx8IGZhbHNlOwogICAgfQoKICAgIC8qKgogICAgICogR2V0ICB0aGUgbG9jYWxlIG9mIGEgRHVyYXRpb24sIHN1Y2ggJ2VuLUdCJwogICAgICogQHR5cGUge3N0cmluZ30KICAgICAqLwogICAgZ2V0IGxvY2FsZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMubG9jLmxvY2FsZSA6IG51bGw7CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQgdGhlIG51bWJlcmluZyBzeXN0ZW0gb2YgYSBEdXJhdGlvbiwgc3VjaCAnYmVuZycuIFRoZSBudW1iZXJpbmcgc3lzdGVtIGlzIHVzZWQgd2hlbiBmb3JtYXR0aW5nIHRoZSBEdXJhdGlvbgogICAgICoKICAgICAqIEB0eXBlIHtzdHJpbmd9CiAgICAgKi8KICAgIGdldCBudW1iZXJpbmdTeXN0ZW0oKSB7CiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLmxvYy5udW1iZXJpbmdTeXN0ZW0gOiBudWxsOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIER1cmF0aW9uIGZvcm1hdHRlZCBhY2NvcmRpbmcgdG8gdGhlIHNwZWNpZmllZCBmb3JtYXQgc3RyaW5nLiBZb3UgbWF5IHVzZSB0aGVzZSB0b2tlbnM6CiAgICAgKiAqIGBTYCBmb3IgbWlsbGlzZWNvbmRzCiAgICAgKiAqIGBzYCBmb3Igc2Vjb25kcwogICAgICogKiBgbWAgZm9yIG1pbnV0ZXMKICAgICAqICogYGhgIGZvciBob3VycwogICAgICogKiBgZGAgZm9yIGRheXMKICAgICAqICogYHdgIGZvciB3ZWVrcwogICAgICogKiBgTWAgZm9yIG1vbnRocwogICAgICogKiBgeWAgZm9yIHllYXJzCiAgICAgKiBOb3RlczoKICAgICAqICogQWRkIHBhZGRpbmcgYnkgcmVwZWF0aW5nIHRoZSB0b2tlbiwgZS5nLiAieXkiIHBhZHMgdGhlIHllYXJzIHRvIHR3byBkaWdpdHMsICJoaGhoIiBwYWRzIHRoZSBob3VycyBvdXQgdG8gZm91ciBkaWdpdHMKICAgICAqICogVG9rZW5zIGNhbiBiZSBlc2NhcGVkIGJ5IHdyYXBwaW5nIHdpdGggc2luZ2xlIHF1b3Rlcy4KICAgICAqICogVGhlIGR1cmF0aW9uIHdpbGwgYmUgY29udmVydGVkIHRvIHRoZSBzZXQgb2YgdW5pdHMgaW4gdGhlIGZvcm1hdCBzdHJpbmcgdXNpbmcge0BsaW5rIER1cmF0aW9uI3NoaWZ0VG99IGFuZCB0aGUgRHVyYXRpb25zJ3MgY29udmVyc2lvbiBhY2N1cmFjeSBzZXR0aW5nLgogICAgICogQHBhcmFtIHtzdHJpbmd9IGZtdCAtIHRoZSBmb3JtYXQgc3RyaW5nCiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnMKICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuZmxvb3I9dHJ1ZV0gLSBmbG9vciBudW1lcmljYWwgdmFsdWVzCiAgICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgeWVhcnM6IDEsIGRheXM6IDYsIHNlY29uZHM6IDIgfSkudG9Gb3JtYXQoInkgZCBzIikgLy89PiAiMSA2IDIiCiAgICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgeWVhcnM6IDEsIGRheXM6IDYsIHNlY29uZHM6IDIgfSkudG9Gb3JtYXQoInl5IGRkIHNzcyIpIC8vPT4gIjAxIDA2IDAwMiIKICAgICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyB5ZWFyczogMSwgZGF5czogNiwgc2Vjb25kczogMiB9KS50b0Zvcm1hdCgiTSBTIikgLy89PiAiMTIgNTE4NDAyMDAwIgogICAgICogQHJldHVybiB7c3RyaW5nfQogICAgICovCiAgICB0b0Zvcm1hdChmbXQsIG9wdHMgPSB7fSkgewogICAgICAvLyByZXZlcnNlLWNvbXBhdCBzaW5jZSAxLjI7IHdlIGFsd2F5cyByb3VuZCBkb3duIG5vdywgbmV2ZXIgdXAsIGFuZCB3ZSBkbyBpdCBieSBkZWZhdWx0CiAgICAgIGNvbnN0IGZtdE9wdHMgPSB7CiAgICAgICAgLi4ub3B0cywKICAgICAgICBmbG9vcjogb3B0cy5yb3VuZCAhPT0gZmFsc2UgJiYgb3B0cy5mbG9vciAhPT0gZmFsc2UsCiAgICAgIH07CiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQKICAgICAgICA/IEZvcm1hdHRlci5jcmVhdGUodGhpcy5sb2MsIGZtdE9wdHMpLmZvcm1hdER1cmF0aW9uRnJvbVN0cmluZyh0aGlzLCBmbXQpCiAgICAgICAgOiBJTlZBTElEJDM7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGEgRHVyYXRpb24gd2l0aCBhbGwgdW5pdHMgaW5jbHVkZWQuCiAgICAgKiBUbyBtb2RpZnkgaXRzIGJlaGF2aW9yIHVzZSB0aGUgYGxpc3RTdHlsZWAgYW5kIGFueSBJbnRsLk51bWJlckZvcm1hdCBvcHRpb24sIHRob3VnaCBgdW5pdERpc3BsYXlgIGlzIGVzcGVjaWFsbHkgcmVsZXZhbnQuCiAgICAgKiBAc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0ludGwvTnVtYmVyRm9ybWF0CiAgICAgKiBAcGFyYW0gb3B0cyAtIE9uIG9wdGlvbiBvYmplY3QgdG8gb3ZlcnJpZGUgdGhlIGZvcm1hdHRpbmcuIEFjY2VwdHMgdGhlIHNhbWUga2V5cyBhcyB0aGUgb3B0aW9ucyBwYXJhbWV0ZXIgb2YgdGhlIG5hdGl2ZSBgSW50Lk51bWJlckZvcm1hdGAgY29uc3RydWN0b3IsIGFzIHdlbGwgYXMgYGxpc3RTdHlsZWAuCiAgICAgKiBAZXhhbXBsZQogICAgICogYGBganMKICAgICAqIHZhciBkdXIgPSBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgZGF5czogMSwgaG91cnM6IDUsIG1pbnV0ZXM6IDYgfSkKICAgICAqIGR1ci50b0h1bWFuKCkgLy89PiAnMSBkYXksIDUgaG91cnMsIDYgbWludXRlcycKICAgICAqIGR1ci50b0h1bWFuKHsgbGlzdFN0eWxlOiAibG9uZyIgfSkgLy89PiAnMSBkYXksIDUgaG91cnMsIGFuZCA2IG1pbnV0ZXMnCiAgICAgKiBkdXIudG9IdW1hbih7IHVuaXREaXNwbGF5OiAic2hvcnQiIH0pIC8vPT4gJzEgZGF5LCA1IGhyLCA2IG1pbicKICAgICAqIGBgYAogICAgICovCiAgICB0b0h1bWFuKG9wdHMgPSB7fSkgewogICAgICBjb25zdCBsID0gb3JkZXJlZFVuaXRzJDEKICAgICAgICAubWFwKCh1bml0KSA9PiB7CiAgICAgICAgICBjb25zdCB2YWwgPSB0aGlzLnZhbHVlc1t1bml0XTsKICAgICAgICAgIGlmIChpc1VuZGVmaW5lZCh2YWwpKSB7CiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHRoaXMubG9jCiAgICAgICAgICAgIC5udW1iZXJGb3JtYXR0ZXIoeyBzdHlsZTogInVuaXQiLCB1bml0RGlzcGxheTogImxvbmciLCAuLi5vcHRzLCB1bml0OiB1bml0LnNsaWNlKDAsIC0xKSB9KQogICAgICAgICAgICAuZm9ybWF0KHZhbCk7CiAgICAgICAgfSkKICAgICAgICAuZmlsdGVyKChuKSA9PiBuKTsKCiAgICAgIHJldHVybiB0aGlzLmxvYwogICAgICAgIC5saXN0Rm9ybWF0dGVyKHsgdHlwZTogImNvbmp1bmN0aW9uIiwgc3R5bGU6IG9wdHMubGlzdFN0eWxlIHx8ICJuYXJyb3ciLCAuLi5vcHRzIH0pCiAgICAgICAgLmZvcm1hdChsKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgYSBKYXZhU2NyaXB0IG9iamVjdCB3aXRoIHRoaXMgRHVyYXRpb24ncyB2YWx1ZXMuCiAgICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgeWVhcnM6IDEsIGRheXM6IDYsIHNlY29uZHM6IDIgfSkudG9PYmplY3QoKSAvLz0+IHsgeWVhcnM6IDEsIGRheXM6IDYsIHNlY29uZHM6IDIgfQogICAgICogQHJldHVybiB7T2JqZWN0fQogICAgICovCiAgICB0b09iamVjdCgpIHsKICAgICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiB7fTsKICAgICAgcmV0dXJuIHsgLi4udGhpcy52YWx1ZXMgfTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgYW4gSVNPIDg2MDEtY29tcGxpYW50IHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIER1cmF0aW9uLgogICAgICogQHNlZSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9JU09fODYwMSNEdXJhdGlvbnMKICAgICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyB5ZWFyczogMywgc2Vjb25kczogNDUgfSkudG9JU08oKSAvLz0+ICdQM1lUNDVTJwogICAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7IG1vbnRoczogNCwgc2Vjb25kczogNDUgfSkudG9JU08oKSAvLz0+ICdQNE1UNDVTJwogICAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7IG1vbnRoczogNSB9KS50b0lTTygpIC8vPT4gJ1A1TScKICAgICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyBtaW51dGVzOiA1IH0pLnRvSVNPKCkgLy89PiAnUFQ1TScKICAgICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyBtaWxsaXNlY29uZHM6IDYgfSkudG9JU08oKSAvLz0+ICdQVDAuMDA2UycKICAgICAqIEByZXR1cm4ge3N0cmluZ30KICAgICAqLwogICAgdG9JU08oKSB7CiAgICAgIC8vIHdlIGNvdWxkIHVzZSB0aGUgZm9ybWF0dGVyLCBidXQgdGhpcyBpcyBhbiBlYXNpZXIgd2F5IHRvIGdldCB0aGUgbWluaW11bSBzdHJpbmcKICAgICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiBudWxsOwoKICAgICAgbGV0IHMgPSAiUCI7CiAgICAgIGlmICh0aGlzLnllYXJzICE9PSAwKSBzICs9IHRoaXMueWVhcnMgKyAiWSI7CiAgICAgIGlmICh0aGlzLm1vbnRocyAhPT0gMCB8fCB0aGlzLnF1YXJ0ZXJzICE9PSAwKSBzICs9IHRoaXMubW9udGhzICsgdGhpcy5xdWFydGVycyAqIDMgKyAiTSI7CiAgICAgIGlmICh0aGlzLndlZWtzICE9PSAwKSBzICs9IHRoaXMud2Vla3MgKyAiVyI7CiAgICAgIGlmICh0aGlzLmRheXMgIT09IDApIHMgKz0gdGhpcy5kYXlzICsgIkQiOwogICAgICBpZiAodGhpcy5ob3VycyAhPT0gMCB8fCB0aGlzLm1pbnV0ZXMgIT09IDAgfHwgdGhpcy5zZWNvbmRzICE9PSAwIHx8IHRoaXMubWlsbGlzZWNvbmRzICE9PSAwKQogICAgICAgIHMgKz0gIlQiOwogICAgICBpZiAodGhpcy5ob3VycyAhPT0gMCkgcyArPSB0aGlzLmhvdXJzICsgIkgiOwogICAgICBpZiAodGhpcy5taW51dGVzICE9PSAwKSBzICs9IHRoaXMubWludXRlcyArICJNIjsKICAgICAgaWYgKHRoaXMuc2Vjb25kcyAhPT0gMCB8fCB0aGlzLm1pbGxpc2Vjb25kcyAhPT0gMCkKICAgICAgICAvLyB0aGlzIHdpbGwgaGFuZGxlICJmbG9hdGluZyBwb2ludCBtYWRuZXNzIiBieSByZW1vdmluZyBleHRyYSBkZWNpbWFsIHBsYWNlcwogICAgICAgIC8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzU4ODAwNC9pcy1mbG9hdGluZy1wb2ludC1tYXRoLWJyb2tlbgogICAgICAgIHMgKz0gcm91bmRUbyh0aGlzLnNlY29uZHMgKyB0aGlzLm1pbGxpc2Vjb25kcyAvIDEwMDAsIDMpICsgIlMiOwogICAgICBpZiAocyA9PT0gIlAiKSBzICs9ICJUMFMiOwogICAgICByZXR1cm4gczsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgYW4gSVNPIDg2MDEtY29tcGxpYW50IHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIER1cmF0aW9uLCBmb3JtYXR0ZWQgYXMgYSB0aW1lIG9mIGRheS4KICAgICAqIE5vdGUgdGhhdCB0aGlzIHdpbGwgcmV0dXJuIG51bGwgaWYgdGhlIGR1cmF0aW9uIGlzIGludmFsaWQsIG5lZ2F0aXZlLCBvciBlcXVhbCB0byBvciBncmVhdGVyIHRoYW4gMjQgaG91cnMuCiAgICAgKiBAc2VlIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT184NjAxI1RpbWVzCiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnMKICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuc3VwcHJlc3NNaWxsaXNlY29uZHM9ZmFsc2VdIC0gZXhjbHVkZSBtaWxsaXNlY29uZHMgZnJvbSB0aGUgZm9ybWF0IGlmIHRoZXkncmUgMAogICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5zdXBwcmVzc1NlY29uZHM9ZmFsc2VdIC0gZXhjbHVkZSBzZWNvbmRzIGZyb20gdGhlIGZvcm1hdCBpZiB0aGV5J3JlIDAKICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuaW5jbHVkZVByZWZpeD1mYWxzZV0gLSBpbmNsdWRlIHRoZSBgVGAgcHJlZml4CiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMuZm9ybWF0PSdleHRlbmRlZCddIC0gY2hvb3NlIGJldHdlZW4gdGhlIGJhc2ljIGFuZCBleHRlbmRlZCBmb3JtYXQKICAgICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyBob3VyczogMTEgfSkudG9JU09UaW1lKCkgLy89PiAnMTE6MDA6MDAuMDAwJwogICAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7IGhvdXJzOiAxMSB9KS50b0lTT1RpbWUoeyBzdXBwcmVzc01pbGxpc2Vjb25kczogdHJ1ZSB9KSAvLz0+ICcxMTowMDowMCcKICAgICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyBob3VyczogMTEgfSkudG9JU09UaW1lKHsgc3VwcHJlc3NTZWNvbmRzOiB0cnVlIH0pIC8vPT4gJzExOjAwJwogICAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7IGhvdXJzOiAxMSB9KS50b0lTT1RpbWUoeyBpbmNsdWRlUHJlZml4OiB0cnVlIH0pIC8vPT4gJ1QxMTowMDowMC4wMDAnCiAgICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgaG91cnM6IDExIH0pLnRvSVNPVGltZSh7IGZvcm1hdDogJ2Jhc2ljJyB9KSAvLz0+ICcxMTAwMDAuMDAwJwogICAgICogQHJldHVybiB7c3RyaW5nfQogICAgICovCiAgICB0b0lTT1RpbWUob3B0cyA9IHt9KSB7CiAgICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gbnVsbDsKCiAgICAgIGNvbnN0IG1pbGxpcyA9IHRoaXMudG9NaWxsaXMoKTsKICAgICAgaWYgKG1pbGxpcyA8IDAgfHwgbWlsbGlzID49IDg2NDAwMDAwKSByZXR1cm4gbnVsbDsKCiAgICAgIG9wdHMgPSB7CiAgICAgICAgc3VwcHJlc3NNaWxsaXNlY29uZHM6IGZhbHNlLAogICAgICAgIHN1cHByZXNzU2Vjb25kczogZmFsc2UsCiAgICAgICAgaW5jbHVkZVByZWZpeDogZmFsc2UsCiAgICAgICAgZm9ybWF0OiAiZXh0ZW5kZWQiLAogICAgICAgIC4uLm9wdHMsCiAgICAgIH07CgogICAgICBjb25zdCB2YWx1ZSA9IHRoaXMuc2hpZnRUbygiaG91cnMiLCAibWludXRlcyIsICJzZWNvbmRzIiwgIm1pbGxpc2Vjb25kcyIpOwoKICAgICAgbGV0IGZtdCA9IG9wdHMuZm9ybWF0ID09PSAiYmFzaWMiID8gImhobW0iIDogImhoOm1tIjsKCiAgICAgIGlmICghb3B0cy5zdXBwcmVzc1NlY29uZHMgfHwgdmFsdWUuc2Vjb25kcyAhPT0gMCB8fCB2YWx1ZS5taWxsaXNlY29uZHMgIT09IDApIHsKICAgICAgICBmbXQgKz0gb3B0cy5mb3JtYXQgPT09ICJiYXNpYyIgPyAic3MiIDogIjpzcyI7CiAgICAgICAgaWYgKCFvcHRzLnN1cHByZXNzTWlsbGlzZWNvbmRzIHx8IHZhbHVlLm1pbGxpc2Vjb25kcyAhPT0gMCkgewogICAgICAgICAgZm10ICs9ICIuU1NTIjsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGxldCBzdHIgPSB2YWx1ZS50b0Zvcm1hdChmbXQpOwoKICAgICAgaWYgKG9wdHMuaW5jbHVkZVByZWZpeCkgewogICAgICAgIHN0ciA9ICJUIiArIHN0cjsKICAgICAgfQoKICAgICAgcmV0dXJuIHN0cjsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgYW4gSVNPIDg2MDEgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBEdXJhdGlvbiBhcHByb3ByaWF0ZSBmb3IgdXNlIGluIEpTT04uCiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9CiAgICAgKi8KICAgIHRvSlNPTigpIHsKICAgICAgcmV0dXJuIHRoaXMudG9JU08oKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgYW4gSVNPIDg2MDEgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBEdXJhdGlvbiBhcHByb3ByaWF0ZSBmb3IgdXNlIGluIGRlYnVnZ2luZy4KICAgICAqIEByZXR1cm4ge3N0cmluZ30KICAgICAqLwogICAgdG9TdHJpbmcoKSB7CiAgICAgIHJldHVybiB0aGlzLnRvSVNPKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIGFuIG1pbGxpc2Vjb25kcyB2YWx1ZSBvZiB0aGlzIER1cmF0aW9uLgogICAgICogQHJldHVybiB7bnVtYmVyfQogICAgICovCiAgICB0b01pbGxpcygpIHsKICAgICAgcmV0dXJuIHRoaXMuYXMoIm1pbGxpc2Vjb25kcyIpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyBhbiBtaWxsaXNlY29uZHMgdmFsdWUgb2YgdGhpcyBEdXJhdGlvbi4gQWxpYXMgb2Yge0BsaW5rIHRvTWlsbGlzfQogICAgICogQHJldHVybiB7bnVtYmVyfQogICAgICovCiAgICB2YWx1ZU9mKCkgewogICAgICByZXR1cm4gdGhpcy50b01pbGxpcygpOwogICAgfQoKICAgIC8qKgogICAgICogTWFrZSB0aGlzIER1cmF0aW9uIGxvbmdlciBieSB0aGUgc3BlY2lmaWVkIGFtb3VudC4gUmV0dXJuIGEgbmV3bHktY29uc3RydWN0ZWQgRHVyYXRpb24uCiAgICAgKiBAcGFyYW0ge0R1cmF0aW9ufE9iamVjdHxudW1iZXJ9IGR1cmF0aW9uIC0gVGhlIGFtb3VudCB0byBhZGQuIEVpdGhlciBhIEx1eG9uIER1cmF0aW9uLCBhIG51bWJlciBvZiBtaWxsaXNlY29uZHMsIHRoZSBvYmplY3QgYXJndW1lbnQgdG8gRHVyYXRpb24uZnJvbU9iamVjdCgpCiAgICAgKiBAcmV0dXJuIHtEdXJhdGlvbn0KICAgICAqLwogICAgcGx1cyhkdXJhdGlvbikgewogICAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIHRoaXM7CgogICAgICBjb25zdCBkdXIgPSBEdXJhdGlvbi5mcm9tRHVyYXRpb25MaWtlKGR1cmF0aW9uKSwKICAgICAgICByZXN1bHQgPSB7fTsKCiAgICAgIGZvciAoY29uc3QgayBvZiBvcmRlcmVkVW5pdHMkMSkgewogICAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eShkdXIudmFsdWVzLCBrKSB8fCBoYXNPd25Qcm9wZXJ0eSh0aGlzLnZhbHVlcywgaykpIHsKICAgICAgICAgIHJlc3VsdFtrXSA9IGR1ci5nZXQoaykgKyB0aGlzLmdldChrKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBjbG9uZSQyKHRoaXMsIHsgdmFsdWVzOiByZXN1bHQgfSwgdHJ1ZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBNYWtlIHRoaXMgRHVyYXRpb24gc2hvcnRlciBieSB0aGUgc3BlY2lmaWVkIGFtb3VudC4gUmV0dXJuIGEgbmV3bHktY29uc3RydWN0ZWQgRHVyYXRpb24uCiAgICAgKiBAcGFyYW0ge0R1cmF0aW9ufE9iamVjdHxudW1iZXJ9IGR1cmF0aW9uIC0gVGhlIGFtb3VudCB0byBzdWJ0cmFjdC4gRWl0aGVyIGEgTHV4b24gRHVyYXRpb24sIGEgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcywgdGhlIG9iamVjdCBhcmd1bWVudCB0byBEdXJhdGlvbi5mcm9tT2JqZWN0KCkKICAgICAqIEByZXR1cm4ge0R1cmF0aW9ufQogICAgICovCiAgICBtaW51cyhkdXJhdGlvbikgewogICAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIHRoaXM7CgogICAgICBjb25zdCBkdXIgPSBEdXJhdGlvbi5mcm9tRHVyYXRpb25MaWtlKGR1cmF0aW9uKTsKICAgICAgcmV0dXJuIHRoaXMucGx1cyhkdXIubmVnYXRlKCkpOwogICAgfQoKICAgIC8qKgogICAgICogU2NhbGUgdGhpcyBEdXJhdGlvbiBieSB0aGUgc3BlY2lmaWVkIGFtb3VudC4gUmV0dXJuIGEgbmV3bHktY29uc3RydWN0ZWQgRHVyYXRpb24uCiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBmbiAtIFRoZSBmdW5jdGlvbiB0byBhcHBseSB0byBlYWNoIHVuaXQuIEFyaXR5IGlzIDEgb3IgMjogdGhlIHZhbHVlIG9mIHRoZSB1bml0IGFuZCwgb3B0aW9uYWxseSwgdGhlIHVuaXQgbmFtZS4gTXVzdCByZXR1cm4gYSBudW1iZXIuCiAgICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgaG91cnM6IDEsIG1pbnV0ZXM6IDMwIH0pLm1hcFVuaXRzKHggPT4geCAqIDIpIC8vPT4geyBob3VyczogMiwgbWludXRlczogNjAgfQogICAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7IGhvdXJzOiAxLCBtaW51dGVzOiAzMCB9KS5tYXBVbml0cygoeCwgdSkgPT4gdSA9PT0gImhvdXJzIiA/IHggKiAyIDogeCkgLy89PiB7IGhvdXJzOiAyLCBtaW51dGVzOiAzMCB9CiAgICAgKiBAcmV0dXJuIHtEdXJhdGlvbn0KICAgICAqLwogICAgbWFwVW5pdHMoZm4pIHsKICAgICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiB0aGlzOwogICAgICBjb25zdCByZXN1bHQgPSB7fTsKICAgICAgZm9yIChjb25zdCBrIG9mIE9iamVjdC5rZXlzKHRoaXMudmFsdWVzKSkgewogICAgICAgIHJlc3VsdFtrXSA9IGFzTnVtYmVyKGZuKHRoaXMudmFsdWVzW2tdLCBrKSk7CiAgICAgIH0KICAgICAgcmV0dXJuIGNsb25lJDIodGhpcywgeyB2YWx1ZXM6IHJlc3VsdCB9LCB0cnVlKTsKICAgIH0KCiAgICAvKioKICAgICAqIEdldCB0aGUgdmFsdWUgb2YgdW5pdC4KICAgICAqIEBwYXJhbSB7c3RyaW5nfSB1bml0IC0gYSB1bml0IHN1Y2ggYXMgJ21pbnV0ZScgb3IgJ2RheScKICAgICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3Qoe3llYXJzOiAyLCBkYXlzOiAzfSkuZ2V0KCd5ZWFycycpIC8vPT4gMgogICAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7eWVhcnM6IDIsIGRheXM6IDN9KS5nZXQoJ21vbnRocycpIC8vPT4gMAogICAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7eWVhcnM6IDIsIGRheXM6IDN9KS5nZXQoJ2RheXMnKSAvLz0+IDMKICAgICAqIEByZXR1cm4ge251bWJlcn0KICAgICAqLwogICAgZ2V0KHVuaXQpIHsKICAgICAgcmV0dXJuIHRoaXNbRHVyYXRpb24ubm9ybWFsaXplVW5pdCh1bml0KV07CiAgICB9CgogICAgLyoqCiAgICAgKiAiU2V0IiB0aGUgdmFsdWVzIG9mIHNwZWNpZmllZCB1bml0cy4gUmV0dXJuIGEgbmV3bHktY29uc3RydWN0ZWQgRHVyYXRpb24uCiAgICAgKiBAcGFyYW0ge09iamVjdH0gdmFsdWVzIC0gYSBtYXBwaW5nIG9mIHVuaXRzIHRvIG51bWJlcnMKICAgICAqIEBleGFtcGxlIGR1ci5zZXQoeyB5ZWFyczogMjAxNyB9KQogICAgICogQGV4YW1wbGUgZHVyLnNldCh7IGhvdXJzOiA4LCBtaW51dGVzOiAzMCB9KQogICAgICogQHJldHVybiB7RHVyYXRpb259CiAgICAgKi8KICAgIHNldCh2YWx1ZXMpIHsKICAgICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiB0aGlzOwoKICAgICAgY29uc3QgbWl4ZWQgPSB7IC4uLnRoaXMudmFsdWVzLCAuLi5ub3JtYWxpemVPYmplY3QodmFsdWVzLCBEdXJhdGlvbi5ub3JtYWxpemVVbml0KSB9OwogICAgICByZXR1cm4gY2xvbmUkMih0aGlzLCB7IHZhbHVlczogbWl4ZWQgfSk7CiAgICB9CgogICAgLyoqCiAgICAgKiAiU2V0IiB0aGUgbG9jYWxlIGFuZC9vciBudW1iZXJpbmdTeXN0ZW0uICBSZXR1cm5zIGEgbmV3bHktY29uc3RydWN0ZWQgRHVyYXRpb24uCiAgICAgKiBAZXhhbXBsZSBkdXIucmVjb25maWd1cmUoeyBsb2NhbGU6ICdlbi1HQicgfSkKICAgICAqIEByZXR1cm4ge0R1cmF0aW9ufQogICAgICovCiAgICByZWNvbmZpZ3VyZSh7IGxvY2FsZSwgbnVtYmVyaW5nU3lzdGVtLCBjb252ZXJzaW9uQWNjdXJhY3ksIG1hdHJpeCB9ID0ge30pIHsKICAgICAgY29uc3QgbG9jID0gdGhpcy5sb2MuY2xvbmUoeyBsb2NhbGUsIG51bWJlcmluZ1N5c3RlbSB9KTsKICAgICAgY29uc3Qgb3B0cyA9IHsgbG9jLCBtYXRyaXgsIGNvbnZlcnNpb25BY2N1cmFjeSB9OwogICAgICByZXR1cm4gY2xvbmUkMih0aGlzLCBvcHRzKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB0aGUgbGVuZ3RoIG9mIHRoZSBkdXJhdGlvbiBpbiB0aGUgc3BlY2lmaWVkIHVuaXQuCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdW5pdCAtIGEgdW5pdCBzdWNoIGFzICdtaW51dGVzJyBvciAnZGF5cycKICAgICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3Qoe3llYXJzOiAxfSkuYXMoJ2RheXMnKSAvLz0+IDM2NQogICAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7eWVhcnM6IDF9KS5hcygnbW9udGhzJykgLy89PiAxMgogICAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7aG91cnM6IDYwfSkuYXMoJ2RheXMnKSAvLz0+IDIuNQogICAgICogQHJldHVybiB7bnVtYmVyfQogICAgICovCiAgICBhcyh1bml0KSB7CiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLnNoaWZ0VG8odW5pdCkuZ2V0KHVuaXQpIDogTmFOOwogICAgfQoKICAgIC8qKgogICAgICogUmVkdWNlIHRoaXMgRHVyYXRpb24gdG8gaXRzIGNhbm9uaWNhbCByZXByZXNlbnRhdGlvbiBpbiBpdHMgY3VycmVudCB1bml0cy4KICAgICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyB5ZWFyczogMiwgZGF5czogNTAwMCB9KS5ub3JtYWxpemUoKS50b09iamVjdCgpIC8vPT4geyB5ZWFyczogMTUsIGRheXM6IDI1NSB9CiAgICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgaG91cnM6IDEyLCBtaW51dGVzOiAtNDUgfSkubm9ybWFsaXplKCkudG9PYmplY3QoKSAvLz0+IHsgaG91cnM6IDExLCBtaW51dGVzOiAxNSB9CiAgICAgKiBAcmV0dXJuIHtEdXJhdGlvbn0KICAgICAqLwogICAgbm9ybWFsaXplKCkgewogICAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIHRoaXM7CiAgICAgIGNvbnN0IHZhbHMgPSB0aGlzLnRvT2JqZWN0KCk7CiAgICAgIG5vcm1hbGl6ZVZhbHVlcyh0aGlzLm1hdHJpeCwgdmFscyk7CiAgICAgIHJldHVybiBjbG9uZSQyKHRoaXMsIHsgdmFsdWVzOiB2YWxzIH0sIHRydWUpOwogICAgfQoKICAgIC8qKgogICAgICogQ29udmVydCB0aGlzIER1cmF0aW9uIGludG8gaXRzIHJlcHJlc2VudGF0aW9uIGluIGEgZGlmZmVyZW50IHNldCBvZiB1bml0cy4KICAgICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyBob3VyczogMSwgc2Vjb25kczogMzAgfSkuc2hpZnRUbygnbWludXRlcycsICdtaWxsaXNlY29uZHMnKS50b09iamVjdCgpIC8vPT4geyBtaW51dGVzOiA2MCwgbWlsbGlzZWNvbmRzOiAzMDAwMCB9CiAgICAgKiBAcmV0dXJuIHtEdXJhdGlvbn0KICAgICAqLwogICAgc2hpZnRUbyguLi51bml0cykgewogICAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIHRoaXM7CgogICAgICBpZiAodW5pdHMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH0KCiAgICAgIHVuaXRzID0gdW5pdHMubWFwKCh1KSA9PiBEdXJhdGlvbi5ub3JtYWxpemVVbml0KHUpKTsKCiAgICAgIGNvbnN0IGJ1aWx0ID0ge30sCiAgICAgICAgYWNjdW11bGF0ZWQgPSB7fSwKICAgICAgICB2YWxzID0gdGhpcy50b09iamVjdCgpOwogICAgICBsZXQgbGFzdFVuaXQ7CgogICAgICBmb3IgKGNvbnN0IGsgb2Ygb3JkZXJlZFVuaXRzJDEpIHsKICAgICAgICBpZiAodW5pdHMuaW5kZXhPZihrKSA+PSAwKSB7CiAgICAgICAgICBsYXN0VW5pdCA9IGs7CgogICAgICAgICAgbGV0IG93biA9IDA7CgogICAgICAgICAgLy8gYW55dGhpbmcgd2UgaGF2ZW4ndCBib2lsZWQgZG93biB5ZXQgc2hvdWxkIGdldCBib2lsZWQgdG8gdGhpcyB1bml0CiAgICAgICAgICBmb3IgKGNvbnN0IGFrIGluIGFjY3VtdWxhdGVkKSB7CiAgICAgICAgICAgIG93biArPSB0aGlzLm1hdHJpeFtha11ba10gKiBhY2N1bXVsYXRlZFtha107CiAgICAgICAgICAgIGFjY3VtdWxhdGVkW2FrXSA9IDA7CiAgICAgICAgICB9CgogICAgICAgICAgLy8gcGx1cyBhbnl0aGluZyB0aGF0J3MgYWxyZWFkeSBpbiB0aGlzIHVuaXQKICAgICAgICAgIGlmIChpc051bWJlciQxKHZhbHNba10pKSB7CiAgICAgICAgICAgIG93biArPSB2YWxzW2tdOwogICAgICAgICAgfQoKICAgICAgICAgIGNvbnN0IGkgPSBNYXRoLnRydW5jKG93bik7CiAgICAgICAgICBidWlsdFtrXSA9IGk7CiAgICAgICAgICBhY2N1bXVsYXRlZFtrXSA9IChvd24gKiAxMDAwIC0gaSAqIDEwMDApIC8gMTAwMDsKCiAgICAgICAgICAvLyBwbHVzIGFueXRoaW5nIGZ1cnRoZXIgZG93biB0aGUgY2hhaW4gdGhhdCBzaG91bGQgYmUgcm9sbGVkIHVwIGluIHRvIHRoaXMKICAgICAgICAgIGZvciAoY29uc3QgZG93biBpbiB2YWxzKSB7CiAgICAgICAgICAgIGlmIChvcmRlcmVkVW5pdHMkMS5pbmRleE9mKGRvd24pID4gb3JkZXJlZFVuaXRzJDEuaW5kZXhPZihrKSkgewogICAgICAgICAgICAgIGNvbnZlcnQodGhpcy5tYXRyaXgsIHZhbHMsIGRvd24sIGJ1aWx0LCBrKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgLy8gb3RoZXJ3aXNlLCBrZWVwIGl0IGluIHRoZSB3aW5ncyB0byBib2lsIGl0IGxhdGVyCiAgICAgICAgfSBlbHNlIGlmIChpc051bWJlciQxKHZhbHNba10pKSB7CiAgICAgICAgICBhY2N1bXVsYXRlZFtrXSA9IHZhbHNba107CiAgICAgICAgfQogICAgICB9CgogICAgICAvLyBhbnl0aGluZyBsZWZ0b3ZlciBiZWNvbWVzIHRoZSBkZWNpbWFsIGZvciB0aGUgbGFzdCB1bml0CiAgICAgIC8vIGxhc3RVbml0IG11c3QgYmUgZGVmaW5lZCBzaW5jZSB1bml0cyBpcyBub3QgZW1wdHkKICAgICAgZm9yIChjb25zdCBrZXkgaW4gYWNjdW11bGF0ZWQpIHsKICAgICAgICBpZiAoYWNjdW11bGF0ZWRba2V5XSAhPT0gMCkgewogICAgICAgICAgYnVpbHRbbGFzdFVuaXRdICs9CiAgICAgICAgICAgIGtleSA9PT0gbGFzdFVuaXQgPyBhY2N1bXVsYXRlZFtrZXldIDogYWNjdW11bGF0ZWRba2V5XSAvIHRoaXMubWF0cml4W2xhc3RVbml0XVtrZXldOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIGNsb25lJDIodGhpcywgeyB2YWx1ZXM6IGJ1aWx0IH0sIHRydWUpLm5vcm1hbGl6ZSgpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHRoZSBuZWdhdGl2ZSBvZiB0aGlzIER1cmF0aW9uLgogICAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7IGhvdXJzOiAxLCBzZWNvbmRzOiAzMCB9KS5uZWdhdGUoKS50b09iamVjdCgpIC8vPT4geyBob3VyczogLTEsIHNlY29uZHM6IC0zMCB9CiAgICAgKiBAcmV0dXJuIHtEdXJhdGlvbn0KICAgICAqLwogICAgbmVnYXRlKCkgewogICAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIHRoaXM7CiAgICAgIGNvbnN0IG5lZ2F0ZWQgPSB7fTsKICAgICAgZm9yIChjb25zdCBrIG9mIE9iamVjdC5rZXlzKHRoaXMudmFsdWVzKSkgewogICAgICAgIG5lZ2F0ZWRba10gPSB0aGlzLnZhbHVlc1trXSA9PT0gMCA/IDAgOiAtdGhpcy52YWx1ZXNba107CiAgICAgIH0KICAgICAgcmV0dXJuIGNsb25lJDIodGhpcywgeyB2YWx1ZXM6IG5lZ2F0ZWQgfSwgdHJ1ZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQgdGhlIHllYXJzLgogICAgICogQHR5cGUge251bWJlcn0KICAgICAqLwogICAgZ2V0IHllYXJzKCkgewogICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy52YWx1ZXMueWVhcnMgfHwgMCA6IE5hTjsKICAgIH0KCiAgICAvKioKICAgICAqIEdldCB0aGUgcXVhcnRlcnMuCiAgICAgKiBAdHlwZSB7bnVtYmVyfQogICAgICovCiAgICBnZXQgcXVhcnRlcnMoKSB7CiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLnZhbHVlcy5xdWFydGVycyB8fCAwIDogTmFOOwogICAgfQoKICAgIC8qKgogICAgICogR2V0IHRoZSBtb250aHMuCiAgICAgKiBAdHlwZSB7bnVtYmVyfQogICAgICovCiAgICBnZXQgbW9udGhzKCkgewogICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy52YWx1ZXMubW9udGhzIHx8IDAgOiBOYU47CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQgdGhlIHdlZWtzCiAgICAgKiBAdHlwZSB7bnVtYmVyfQogICAgICovCiAgICBnZXQgd2Vla3MoKSB7CiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLnZhbHVlcy53ZWVrcyB8fCAwIDogTmFOOwogICAgfQoKICAgIC8qKgogICAgICogR2V0IHRoZSBkYXlzLgogICAgICogQHR5cGUge251bWJlcn0KICAgICAqLwogICAgZ2V0IGRheXMoKSB7CiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLnZhbHVlcy5kYXlzIHx8IDAgOiBOYU47CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQgdGhlIGhvdXJzLgogICAgICogQHR5cGUge251bWJlcn0KICAgICAqLwogICAgZ2V0IGhvdXJzKCkgewogICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy52YWx1ZXMuaG91cnMgfHwgMCA6IE5hTjsKICAgIH0KCiAgICAvKioKICAgICAqIEdldCB0aGUgbWludXRlcy4KICAgICAqIEB0eXBlIHtudW1iZXJ9CiAgICAgKi8KICAgIGdldCBtaW51dGVzKCkgewogICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy52YWx1ZXMubWludXRlcyB8fCAwIDogTmFOOwogICAgfQoKICAgIC8qKgogICAgICogR2V0IHRoZSBzZWNvbmRzLgogICAgICogQHJldHVybiB7bnVtYmVyfQogICAgICovCiAgICBnZXQgc2Vjb25kcygpIHsKICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMudmFsdWVzLnNlY29uZHMgfHwgMCA6IE5hTjsKICAgIH0KCiAgICAvKioKICAgICAqIEdldCB0aGUgbWlsbGlzZWNvbmRzLgogICAgICogQHJldHVybiB7bnVtYmVyfQogICAgICovCiAgICBnZXQgbWlsbGlzZWNvbmRzKCkgewogICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy52YWx1ZXMubWlsbGlzZWNvbmRzIHx8IDAgOiBOYU47CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhlIER1cmF0aW9uIGlzIGludmFsaWQuIEludmFsaWQgZHVyYXRpb25zIGFyZSByZXR1cm5lZCBieSBkaWZmIG9wZXJhdGlvbnMKICAgICAqIG9uIGludmFsaWQgRGF0ZVRpbWVzIG9yIEludGVydmFscy4KICAgICAqIEByZXR1cm4ge2Jvb2xlYW59CiAgICAgKi8KICAgIGdldCBpc1ZhbGlkKCkgewogICAgICByZXR1cm4gdGhpcy5pbnZhbGlkID09PSBudWxsOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyBhbiBlcnJvciBjb2RlIGlmIHRoaXMgRHVyYXRpb24gYmVjYW1lIGludmFsaWQsIG9yIG51bGwgaWYgdGhlIER1cmF0aW9uIGlzIHZhbGlkCiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9CiAgICAgKi8KICAgIGdldCBpbnZhbGlkUmVhc29uKCkgewogICAgICByZXR1cm4gdGhpcy5pbnZhbGlkID8gdGhpcy5pbnZhbGlkLnJlYXNvbiA6IG51bGw7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIGFuIGV4cGxhbmF0aW9uIG9mIHdoeSB0aGlzIER1cmF0aW9uIGJlY2FtZSBpbnZhbGlkLCBvciBudWxsIGlmIHRoZSBEdXJhdGlvbiBpcyB2YWxpZAogICAgICogQHR5cGUge3N0cmluZ30KICAgICAqLwogICAgZ2V0IGludmFsaWRFeHBsYW5hdGlvbigpIHsKICAgICAgcmV0dXJuIHRoaXMuaW52YWxpZCA/IHRoaXMuaW52YWxpZC5leHBsYW5hdGlvbiA6IG51bGw7CiAgICB9CgogICAgLyoqCiAgICAgKiBFcXVhbGl0eSBjaGVjawogICAgICogVHdvIER1cmF0aW9ucyBhcmUgZXF1YWwgaWZmIHRoZXkgaGF2ZSB0aGUgc2FtZSB1bml0cyBhbmQgdGhlIHNhbWUgdmFsdWVzIGZvciBlYWNoIHVuaXQuCiAgICAgKiBAcGFyYW0ge0R1cmF0aW9ufSBvdGhlcgogICAgICogQHJldHVybiB7Ym9vbGVhbn0KICAgICAqLwogICAgZXF1YWxzKG90aGVyKSB7CiAgICAgIGlmICghdGhpcy5pc1ZhbGlkIHx8ICFvdGhlci5pc1ZhbGlkKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICBpZiAoIXRoaXMubG9jLmVxdWFscyhvdGhlci5sb2MpKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICBmdW5jdGlvbiBlcSh2MSwgdjIpIHsKICAgICAgICAvLyBDb25zaWRlciAwIGFuZCB1bmRlZmluZWQgYXMgZXF1YWwKICAgICAgICBpZiAodjEgPT09IHVuZGVmaW5lZCB8fCB2MSA9PT0gMCkgcmV0dXJuIHYyID09PSB1bmRlZmluZWQgfHwgdjIgPT09IDA7CiAgICAgICAgcmV0dXJuIHYxID09PSB2MjsKICAgICAgfQoKICAgICAgZm9yIChjb25zdCB1IG9mIG9yZGVyZWRVbml0cyQxKSB7CiAgICAgICAgaWYgKCFlcSh0aGlzLnZhbHVlc1t1XSwgb3RoZXIudmFsdWVzW3VdKSkgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICB9CgogIGNvbnN0IElOVkFMSUQkMiA9ICJJbnZhbGlkIEludGVydmFsIjsKCiAgLy8gY2hlY2tzIGlmIHRoZSBzdGFydCBpcyBlcXVhbCB0byBvciBiZWZvcmUgdGhlIGVuZAogIGZ1bmN0aW9uIHZhbGlkYXRlU3RhcnRFbmQoc3RhcnQsIGVuZCkgewogICAgaWYgKCFzdGFydCB8fCAhc3RhcnQuaXNWYWxpZCkgewogICAgICByZXR1cm4gSW50ZXJ2YWwuaW52YWxpZCgibWlzc2luZyBvciBpbnZhbGlkIHN0YXJ0Iik7CiAgICB9IGVsc2UgaWYgKCFlbmQgfHwgIWVuZC5pc1ZhbGlkKSB7CiAgICAgIHJldHVybiBJbnRlcnZhbC5pbnZhbGlkKCJtaXNzaW5nIG9yIGludmFsaWQgZW5kIik7CiAgICB9IGVsc2UgaWYgKGVuZCA8IHN0YXJ0KSB7CiAgICAgIHJldHVybiBJbnRlcnZhbC5pbnZhbGlkKAogICAgICAgICJlbmQgYmVmb3JlIHN0YXJ0IiwKICAgICAgICBgVGhlIGVuZCBvZiBhbiBpbnRlcnZhbCBtdXN0IGJlIGFmdGVyIGl0cyBzdGFydCwgYnV0IHlvdSBoYWQgc3RhcnQ9JHtzdGFydC50b0lTTygpfSBhbmQgZW5kPSR7ZW5kLnRvSVNPKCl9YAogICAgICApOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgfQoKICAvKioKICAgKiBBbiBJbnRlcnZhbCBvYmplY3QgcmVwcmVzZW50cyBhIGhhbGYtb3BlbiBpbnRlcnZhbCBvZiB0aW1lLCB3aGVyZSBlYWNoIGVuZHBvaW50IGlzIGEge0BsaW5rIERhdGVUaW1lfS4gQ29uY2VwdHVhbGx5LCBpdCdzIGEgY29udGFpbmVyIGZvciB0aG9zZSB0d28gZW5kcG9pbnRzLCBhY2NvbXBhbmllZCBieSBtZXRob2RzIGZvciBjcmVhdGluZywgcGFyc2luZywgaW50ZXJyb2dhdGluZywgY29tcGFyaW5nLCB0cmFuc2Zvcm1pbmcsIGFuZCBmb3JtYXR0aW5nIHRoZW0uCiAgICoKICAgKiBIZXJlIGlzIGEgYnJpZWYgb3ZlcnZpZXcgb2YgdGhlIG1vc3QgY29tbW9ubHkgdXNlZCBtZXRob2RzIGFuZCBnZXR0ZXJzIGluIEludGVydmFsOgogICAqCiAgICogKiAqKkNyZWF0aW9uKiogVG8gY3JlYXRlIGFuIEludGVydmFsLCB1c2Uge0BsaW5rIEludGVydmFsLmZyb21EYXRlVGltZXN9LCB7QGxpbmsgSW50ZXJ2YWwuYWZ0ZXJ9LCB7QGxpbmsgSW50ZXJ2YWwuYmVmb3JlfSwgb3Ige0BsaW5rIEludGVydmFsLmZyb21JU099LgogICAqICogKipBY2Nlc3NvcnMqKiBVc2Uge0BsaW5rIEludGVydmFsI3N0YXJ0fSBhbmQge0BsaW5rIEludGVydmFsI2VuZH0gdG8gZ2V0IHRoZSBzdGFydCBhbmQgZW5kLgogICAqICogKipJbnRlcnJvZ2F0aW9uKiogVG8gYW5hbHl6ZSB0aGUgSW50ZXJ2YWwsIHVzZSB7QGxpbmsgSW50ZXJ2YWwjY291bnR9LCB7QGxpbmsgSW50ZXJ2YWwjbGVuZ3RofSwge0BsaW5rIEludGVydmFsI2hhc1NhbWV9LCB7QGxpbmsgSW50ZXJ2YWwjY29udGFpbnN9LCB7QGxpbmsgSW50ZXJ2YWwjaXNBZnRlcn0sIG9yIHtAbGluayBJbnRlcnZhbCNpc0JlZm9yZX0uCiAgICogKiAqKlRyYW5zZm9ybWF0aW9uKiogVG8gY3JlYXRlIG90aGVyIEludGVydmFscyBvdXQgb2YgdGhpcyBvbmUsIHVzZSB7QGxpbmsgSW50ZXJ2YWwjc2V0fSwge0BsaW5rIEludGVydmFsI3NwbGl0QXR9LCB7QGxpbmsgSW50ZXJ2YWwjc3BsaXRCeX0sIHtAbGluayBJbnRlcnZhbCNkaXZpZGVFcXVhbGx5fSwge0BsaW5rIEludGVydmFsLm1lcmdlfSwge0BsaW5rIEludGVydmFsLnhvcn0sIHtAbGluayBJbnRlcnZhbCN1bmlvbn0sIHtAbGluayBJbnRlcnZhbCNpbnRlcnNlY3Rpb259LCBvciB7QGxpbmsgSW50ZXJ2YWwjZGlmZmVyZW5jZX0uCiAgICogKiAqKkNvbXBhcmlzb24qKiBUbyBjb21wYXJlIHRoaXMgSW50ZXJ2YWwgdG8gYW5vdGhlciBvbmUsIHVzZSB7QGxpbmsgSW50ZXJ2YWwjZXF1YWxzfSwge0BsaW5rIEludGVydmFsI292ZXJsYXBzfSwge0BsaW5rIEludGVydmFsI2FidXRzU3RhcnR9LCB7QGxpbmsgSW50ZXJ2YWwjYWJ1dHNFbmR9LCB7QGxpbmsgSW50ZXJ2YWwjZW5ndWxmc30KICAgKiAqICoqT3V0cHV0KiogVG8gY29udmVydCB0aGUgSW50ZXJ2YWwgaW50byBvdGhlciByZXByZXNlbnRhdGlvbnMsIHNlZSB7QGxpbmsgSW50ZXJ2YWwjdG9TdHJpbmd9LCB7QGxpbmsgSW50ZXJ2YWwjdG9JU099LCB7QGxpbmsgSW50ZXJ2YWwjdG9JU09EYXRlfSwge0BsaW5rIEludGVydmFsI3RvSVNPVGltZX0sIHtAbGluayBJbnRlcnZhbCN0b0Zvcm1hdH0sIGFuZCB7QGxpbmsgSW50ZXJ2YWwjdG9EdXJhdGlvbn0uCiAgICovCiAgY2xhc3MgSW50ZXJ2YWwgewogICAgLyoqCiAgICAgKiBAcHJpdmF0ZQogICAgICovCiAgICBjb25zdHJ1Y3Rvcihjb25maWcpIHsKICAgICAgLyoqCiAgICAgICAqIEBhY2Nlc3MgcHJpdmF0ZQogICAgICAgKi8KICAgICAgdGhpcy5zID0gY29uZmlnLnN0YXJ0OwogICAgICAvKioKICAgICAgICogQGFjY2VzcyBwcml2YXRlCiAgICAgICAqLwogICAgICB0aGlzLmUgPSBjb25maWcuZW5kOwogICAgICAvKioKICAgICAgICogQGFjY2VzcyBwcml2YXRlCiAgICAgICAqLwogICAgICB0aGlzLmludmFsaWQgPSBjb25maWcuaW52YWxpZCB8fCBudWxsOwogICAgICAvKioKICAgICAgICogQGFjY2VzcyBwcml2YXRlCiAgICAgICAqLwogICAgICB0aGlzLmlzTHV4b25JbnRlcnZhbCA9IHRydWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBDcmVhdGUgYW4gaW52YWxpZCBJbnRlcnZhbC4KICAgICAqIEBwYXJhbSB7c3RyaW5nfSByZWFzb24gLSBzaW1wbGUgc3RyaW5nIG9mIHdoeSB0aGlzIEludGVydmFsIGlzIGludmFsaWQuIFNob3VsZCBub3QgY29udGFpbiBwYXJhbWV0ZXJzIG9yIGFueXRoaW5nIGVsc2UgZGF0YS1kZXBlbmRlbnQKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbZXhwbGFuYXRpb249bnVsbF0gLSBsb25nZXIgZXhwbGFuYXRpb24sIG1heSBpbmNsdWRlIHBhcmFtZXRlcnMgYW5kIG90aGVyIHVzZWZ1bCBkZWJ1Z2dpbmcgaW5mb3JtYXRpb24KICAgICAqIEByZXR1cm4ge0ludGVydmFsfQogICAgICovCiAgICBzdGF0aWMgaW52YWxpZChyZWFzb24sIGV4cGxhbmF0aW9uID0gbnVsbCkgewogICAgICBpZiAoIXJlYXNvbikgewogICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcigibmVlZCB0byBzcGVjaWZ5IGEgcmVhc29uIHRoZSBJbnRlcnZhbCBpcyBpbnZhbGlkIik7CiAgICAgIH0KCiAgICAgIGNvbnN0IGludmFsaWQgPSByZWFzb24gaW5zdGFuY2VvZiBJbnZhbGlkID8gcmVhc29uIDogbmV3IEludmFsaWQocmVhc29uLCBleHBsYW5hdGlvbik7CgogICAgICBpZiAoU2V0dGluZ3MudGhyb3dPbkludmFsaWQpIHsKICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEludGVydmFsRXJyb3IoaW52YWxpZCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIG5ldyBJbnRlcnZhbCh7IGludmFsaWQgfSk7CiAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIENyZWF0ZSBhbiBJbnRlcnZhbCBmcm9tIGEgc3RhcnQgRGF0ZVRpbWUgYW5kIGFuIGVuZCBEYXRlVGltZS4gSW5jbHVzaXZlIG9mIHRoZSBzdGFydCBidXQgbm90IHRoZSBlbmQuCiAgICAgKiBAcGFyYW0ge0RhdGVUaW1lfERhdGV8T2JqZWN0fSBzdGFydAogICAgICogQHBhcmFtIHtEYXRlVGltZXxEYXRlfE9iamVjdH0gZW5kCiAgICAgKiBAcmV0dXJuIHtJbnRlcnZhbH0KICAgICAqLwogICAgc3RhdGljIGZyb21EYXRlVGltZXMoc3RhcnQsIGVuZCkgewogICAgICBjb25zdCBidWlsdFN0YXJ0ID0gZnJpZW5kbHlEYXRlVGltZShzdGFydCksCiAgICAgICAgYnVpbHRFbmQgPSBmcmllbmRseURhdGVUaW1lKGVuZCk7CgogICAgICBjb25zdCB2YWxpZGF0ZUVycm9yID0gdmFsaWRhdGVTdGFydEVuZChidWlsdFN0YXJ0LCBidWlsdEVuZCk7CgogICAgICBpZiAodmFsaWRhdGVFcnJvciA9PSBudWxsKSB7CiAgICAgICAgcmV0dXJuIG5ldyBJbnRlcnZhbCh7CiAgICAgICAgICBzdGFydDogYnVpbHRTdGFydCwKICAgICAgICAgIGVuZDogYnVpbHRFbmQsCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHZhbGlkYXRlRXJyb3I7CiAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIENyZWF0ZSBhbiBJbnRlcnZhbCBmcm9tIGEgc3RhcnQgRGF0ZVRpbWUgYW5kIGEgRHVyYXRpb24gdG8gZXh0ZW5kIHRvLgogICAgICogQHBhcmFtIHtEYXRlVGltZXxEYXRlfE9iamVjdH0gc3RhcnQKICAgICAqIEBwYXJhbSB7RHVyYXRpb258T2JqZWN0fG51bWJlcn0gZHVyYXRpb24gLSB0aGUgbGVuZ3RoIG9mIHRoZSBJbnRlcnZhbC4KICAgICAqIEByZXR1cm4ge0ludGVydmFsfQogICAgICovCiAgICBzdGF0aWMgYWZ0ZXIoc3RhcnQsIGR1cmF0aW9uKSB7CiAgICAgIGNvbnN0IGR1ciA9IER1cmF0aW9uLmZyb21EdXJhdGlvbkxpa2UoZHVyYXRpb24pLAogICAgICAgIGR0ID0gZnJpZW5kbHlEYXRlVGltZShzdGFydCk7CiAgICAgIHJldHVybiBJbnRlcnZhbC5mcm9tRGF0ZVRpbWVzKGR0LCBkdC5wbHVzKGR1cikpOwogICAgfQoKICAgIC8qKgogICAgICogQ3JlYXRlIGFuIEludGVydmFsIGZyb20gYW4gZW5kIERhdGVUaW1lIGFuZCBhIER1cmF0aW9uIHRvIGV4dGVuZCBiYWNrd2FyZHMgdG8uCiAgICAgKiBAcGFyYW0ge0RhdGVUaW1lfERhdGV8T2JqZWN0fSBlbmQKICAgICAqIEBwYXJhbSB7RHVyYXRpb258T2JqZWN0fG51bWJlcn0gZHVyYXRpb24gLSB0aGUgbGVuZ3RoIG9mIHRoZSBJbnRlcnZhbC4KICAgICAqIEByZXR1cm4ge0ludGVydmFsfQogICAgICovCiAgICBzdGF0aWMgYmVmb3JlKGVuZCwgZHVyYXRpb24pIHsKICAgICAgY29uc3QgZHVyID0gRHVyYXRpb24uZnJvbUR1cmF0aW9uTGlrZShkdXJhdGlvbiksCiAgICAgICAgZHQgPSBmcmllbmRseURhdGVUaW1lKGVuZCk7CiAgICAgIHJldHVybiBJbnRlcnZhbC5mcm9tRGF0ZVRpbWVzKGR0Lm1pbnVzKGR1ciksIGR0KTsKICAgIH0KCiAgICAvKioKICAgICAqIENyZWF0ZSBhbiBJbnRlcnZhbCBmcm9tIGFuIElTTyA4NjAxIHN0cmluZy4KICAgICAqIEFjY2VwdHMgYDxzdGFydD4vPGVuZD5gLCBgPHN0YXJ0Pi88ZHVyYXRpb24+YCwgYW5kIGA8ZHVyYXRpb24+LzxlbmQ+YCBmb3JtYXRzLgogICAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgLSB0aGUgSVNPIHN0cmluZyB0byBwYXJzZQogICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRzXSAtIG9wdGlvbnMgdG8gcGFzcyB7QGxpbmsgRGF0ZVRpbWUjZnJvbUlTT30gYW5kIG9wdGlvbmFsbHkge0BsaW5rIER1cmF0aW9uI2Zyb21JU099CiAgICAgKiBAc2VlIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT184NjAxI1RpbWVfaW50ZXJ2YWxzCiAgICAgKiBAcmV0dXJuIHtJbnRlcnZhbH0KICAgICAqLwogICAgc3RhdGljIGZyb21JU08odGV4dCwgb3B0cykgewogICAgICBjb25zdCBbcywgZV0gPSAodGV4dCB8fCAiIikuc3BsaXQoIi8iLCAyKTsKICAgICAgaWYgKHMgJiYgZSkgewogICAgICAgIGxldCBzdGFydCwgc3RhcnRJc1ZhbGlkOwogICAgICAgIHRyeSB7CiAgICAgICAgICBzdGFydCA9IERhdGVUaW1lLmZyb21JU08ocywgb3B0cyk7CiAgICAgICAgICBzdGFydElzVmFsaWQgPSBzdGFydC5pc1ZhbGlkOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIHN0YXJ0SXNWYWxpZCA9IGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgbGV0IGVuZCwgZW5kSXNWYWxpZDsKICAgICAgICB0cnkgewogICAgICAgICAgZW5kID0gRGF0ZVRpbWUuZnJvbUlTTyhlLCBvcHRzKTsKICAgICAgICAgIGVuZElzVmFsaWQgPSBlbmQuaXNWYWxpZDsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICBlbmRJc1ZhbGlkID0gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICBpZiAoc3RhcnRJc1ZhbGlkICYmIGVuZElzVmFsaWQpIHsKICAgICAgICAgIHJldHVybiBJbnRlcnZhbC5mcm9tRGF0ZVRpbWVzKHN0YXJ0LCBlbmQpOwogICAgICAgIH0KCiAgICAgICAgaWYgKHN0YXJ0SXNWYWxpZCkgewogICAgICAgICAgY29uc3QgZHVyID0gRHVyYXRpb24uZnJvbUlTTyhlLCBvcHRzKTsKICAgICAgICAgIGlmIChkdXIuaXNWYWxpZCkgewogICAgICAgICAgICByZXR1cm4gSW50ZXJ2YWwuYWZ0ZXIoc3RhcnQsIGR1cik7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmIChlbmRJc1ZhbGlkKSB7CiAgICAgICAgICBjb25zdCBkdXIgPSBEdXJhdGlvbi5mcm9tSVNPKHMsIG9wdHMpOwogICAgICAgICAgaWYgKGR1ci5pc1ZhbGlkKSB7CiAgICAgICAgICAgIHJldHVybiBJbnRlcnZhbC5iZWZvcmUoZW5kLCBkdXIpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gSW50ZXJ2YWwuaW52YWxpZCgidW5wYXJzYWJsZSIsIGB0aGUgaW5wdXQgIiR7dGV4dH0iIGNhbid0IGJlIHBhcnNlZCBhcyBJU08gODYwMWApOwogICAgfQoKICAgIC8qKgogICAgICogQ2hlY2sgaWYgYW4gb2JqZWN0IGlzIGFuIEludGVydmFsLiBXb3JrcyBhY3Jvc3MgY29udGV4dCBib3VuZGFyaWVzCiAgICAgKiBAcGFyYW0ge29iamVjdH0gbwogICAgICogQHJldHVybiB7Ym9vbGVhbn0KICAgICAqLwogICAgc3RhdGljIGlzSW50ZXJ2YWwobykgewogICAgICByZXR1cm4gKG8gJiYgby5pc0x1eG9uSW50ZXJ2YWwpIHx8IGZhbHNlOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyB0aGUgc3RhcnQgb2YgdGhlIEludGVydmFsCiAgICAgKiBAdHlwZSB7RGF0ZVRpbWV9CiAgICAgKi8KICAgIGdldCBzdGFydCgpIHsKICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMucyA6IG51bGw7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSBlbmQgb2YgdGhlIEludGVydmFsCiAgICAgKiBAdHlwZSB7RGF0ZVRpbWV9CiAgICAgKi8KICAgIGdldCBlbmQoKSB7CiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLmUgOiBudWxsOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyB3aGV0aGVyIHRoaXMgSW50ZXJ2YWwncyBlbmQgaXMgYXQgbGVhc3QgaXRzIHN0YXJ0LCBtZWFuaW5nIHRoYXQgdGhlIEludGVydmFsIGlzbid0ICdiYWNrd2FyZHMnLgogICAgICogQHR5cGUge2Jvb2xlYW59CiAgICAgKi8KICAgIGdldCBpc1ZhbGlkKCkgewogICAgICByZXR1cm4gdGhpcy5pbnZhbGlkUmVhc29uID09PSBudWxsOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyBhbiBlcnJvciBjb2RlIGlmIHRoaXMgSW50ZXJ2YWwgaXMgaW52YWxpZCwgb3IgbnVsbCBpZiB0aGUgSW50ZXJ2YWwgaXMgdmFsaWQKICAgICAqIEB0eXBlIHtzdHJpbmd9CiAgICAgKi8KICAgIGdldCBpbnZhbGlkUmVhc29uKCkgewogICAgICByZXR1cm4gdGhpcy5pbnZhbGlkID8gdGhpcy5pbnZhbGlkLnJlYXNvbiA6IG51bGw7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIGFuIGV4cGxhbmF0aW9uIG9mIHdoeSB0aGlzIEludGVydmFsIGJlY2FtZSBpbnZhbGlkLCBvciBudWxsIGlmIHRoZSBJbnRlcnZhbCBpcyB2YWxpZAogICAgICogQHR5cGUge3N0cmluZ30KICAgICAqLwogICAgZ2V0IGludmFsaWRFeHBsYW5hdGlvbigpIHsKICAgICAgcmV0dXJuIHRoaXMuaW52YWxpZCA/IHRoaXMuaW52YWxpZC5leHBsYW5hdGlvbiA6IG51bGw7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSBsZW5ndGggb2YgdGhlIEludGVydmFsIGluIHRoZSBzcGVjaWZpZWQgdW5pdC4KICAgICAqIEBwYXJhbSB7c3RyaW5nfSB1bml0IC0gdGhlIHVuaXQgKHN1Y2ggYXMgJ2hvdXJzJyBvciAnZGF5cycpIHRvIHJldHVybiB0aGUgbGVuZ3RoIGluLgogICAgICogQHJldHVybiB7bnVtYmVyfQogICAgICovCiAgICBsZW5ndGgodW5pdCA9ICJtaWxsaXNlY29uZHMiKSB7CiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLnRvRHVyYXRpb24oLi4uW3VuaXRdKS5nZXQodW5pdCkgOiBOYU47CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSBjb3VudCBvZiBtaW51dGVzLCBob3VycywgZGF5cywgbW9udGhzLCBvciB5ZWFycyBpbmNsdWRlZCBpbiB0aGUgSW50ZXJ2YWwsIGV2ZW4gaW4gcGFydC4KICAgICAqIFVubGlrZSB7QGxpbmsgSW50ZXJ2YWwjbGVuZ3RofSB0aGlzIGNvdW50cyBzZWN0aW9ucyBvZiB0aGUgY2FsZW5kYXIsIG5vdCBwZXJpb2RzIG9mIHRpbWUsIGUuZy4gc3BlY2lmeWluZyAnZGF5JwogICAgICogYXNrcyAnd2hhdCBkYXRlcyBhcmUgaW5jbHVkZWQgaW4gdGhpcyBpbnRlcnZhbD8nLCBub3QgJ2hvdyBtYW55IGRheXMgbG9uZyBpcyB0aGlzIGludGVydmFsPycKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbdW5pdD0nbWlsbGlzZWNvbmRzJ10gLSB0aGUgdW5pdCBvZiB0aW1lIHRvIGNvdW50LgogICAgICogQHJldHVybiB7bnVtYmVyfQogICAgICovCiAgICBjb3VudCh1bml0ID0gIm1pbGxpc2Vjb25kcyIpIHsKICAgICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiBOYU47CiAgICAgIGNvbnN0IHN0YXJ0ID0gdGhpcy5zdGFydC5zdGFydE9mKHVuaXQpLAogICAgICAgIGVuZCA9IHRoaXMuZW5kLnN0YXJ0T2YodW5pdCk7CiAgICAgIHJldHVybiBNYXRoLmZsb29yKGVuZC5kaWZmKHN0YXJ0LCB1bml0KS5nZXQodW5pdCkpICsgMTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgd2hldGhlciB0aGlzIEludGVydmFsJ3Mgc3RhcnQgYW5kIGVuZCBhcmUgYm90aCBpbiB0aGUgc2FtZSB1bml0IG9mIHRpbWUKICAgICAqIEBwYXJhbSB7c3RyaW5nfSB1bml0IC0gdGhlIHVuaXQgb2YgdGltZSB0byBjaGVjayBzYW1lbmVzcyBvbgogICAgICogQHJldHVybiB7Ym9vbGVhbn0KICAgICAqLwogICAgaGFzU2FtZSh1bml0KSB7CiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLmlzRW1wdHkoKSB8fCB0aGlzLmUubWludXMoMSkuaGFzU2FtZSh0aGlzLnMsIHVuaXQpIDogZmFsc2U7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gd2hldGhlciB0aGlzIEludGVydmFsIGhhcyB0aGUgc2FtZSBzdGFydCBhbmQgZW5kIERhdGVUaW1lcy4KICAgICAqIEByZXR1cm4ge2Jvb2xlYW59CiAgICAgKi8KICAgIGlzRW1wdHkoKSB7CiAgICAgIHJldHVybiB0aGlzLnMudmFsdWVPZigpID09PSB0aGlzLmUudmFsdWVPZigpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHdoZXRoZXIgdGhpcyBJbnRlcnZhbCdzIHN0YXJ0IGlzIGFmdGVyIHRoZSBzcGVjaWZpZWQgRGF0ZVRpbWUuCiAgICAgKiBAcGFyYW0ge0RhdGVUaW1lfSBkYXRlVGltZQogICAgICogQHJldHVybiB7Ym9vbGVhbn0KICAgICAqLwogICAgaXNBZnRlcihkYXRlVGltZSkgewogICAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIGZhbHNlOwogICAgICByZXR1cm4gdGhpcy5zID4gZGF0ZVRpbWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gd2hldGhlciB0aGlzIEludGVydmFsJ3MgZW5kIGlzIGJlZm9yZSB0aGUgc3BlY2lmaWVkIERhdGVUaW1lLgogICAgICogQHBhcmFtIHtEYXRlVGltZX0gZGF0ZVRpbWUKICAgICAqIEByZXR1cm4ge2Jvb2xlYW59CiAgICAgKi8KICAgIGlzQmVmb3JlKGRhdGVUaW1lKSB7CiAgICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gZmFsc2U7CiAgICAgIHJldHVybiB0aGlzLmUgPD0gZGF0ZVRpbWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gd2hldGhlciB0aGlzIEludGVydmFsIGNvbnRhaW5zIHRoZSBzcGVjaWZpZWQgRGF0ZVRpbWUuCiAgICAgKiBAcGFyYW0ge0RhdGVUaW1lfSBkYXRlVGltZQogICAgICogQHJldHVybiB7Ym9vbGVhbn0KICAgICAqLwogICAgY29udGFpbnMoZGF0ZVRpbWUpIHsKICAgICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiBmYWxzZTsKICAgICAgcmV0dXJuIHRoaXMucyA8PSBkYXRlVGltZSAmJiB0aGlzLmUgPiBkYXRlVGltZTsKICAgIH0KCiAgICAvKioKICAgICAqICJTZXRzIiB0aGUgc3RhcnQgYW5kL29yIGVuZCBkYXRlcy4gUmV0dXJucyBhIG5ld2x5LWNvbnN0cnVjdGVkIEludGVydmFsLgogICAgICogQHBhcmFtIHtPYmplY3R9IHZhbHVlcyAtIHRoZSB2YWx1ZXMgdG8gc2V0CiAgICAgKiBAcGFyYW0ge0RhdGVUaW1lfSB2YWx1ZXMuc3RhcnQgLSB0aGUgc3RhcnRpbmcgRGF0ZVRpbWUKICAgICAqIEBwYXJhbSB7RGF0ZVRpbWV9IHZhbHVlcy5lbmQgLSB0aGUgZW5kaW5nIERhdGVUaW1lCiAgICAgKiBAcmV0dXJuIHtJbnRlcnZhbH0KICAgICAqLwogICAgc2V0KHsgc3RhcnQsIGVuZCB9ID0ge30pIHsKICAgICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiB0aGlzOwogICAgICByZXR1cm4gSW50ZXJ2YWwuZnJvbURhdGVUaW1lcyhzdGFydCB8fCB0aGlzLnMsIGVuZCB8fCB0aGlzLmUpOwogICAgfQoKICAgIC8qKgogICAgICogU3BsaXQgdGhpcyBJbnRlcnZhbCBhdCBlYWNoIG9mIHRoZSBzcGVjaWZpZWQgRGF0ZVRpbWVzCiAgICAgKiBAcGFyYW0gey4uLkRhdGVUaW1lfSBkYXRlVGltZXMgLSB0aGUgdW5pdCBvZiB0aW1lIHRvIGNvdW50LgogICAgICogQHJldHVybiB7QXJyYXl9CiAgICAgKi8KICAgIHNwbGl0QXQoLi4uZGF0ZVRpbWVzKSB7CiAgICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gW107CiAgICAgIGNvbnN0IHNvcnRlZCA9IGRhdGVUaW1lcwogICAgICAgICAgLm1hcChmcmllbmRseURhdGVUaW1lKQogICAgICAgICAgLmZpbHRlcigoZCkgPT4gdGhpcy5jb250YWlucyhkKSkKICAgICAgICAgIC5zb3J0KCksCiAgICAgICAgcmVzdWx0cyA9IFtdOwogICAgICBsZXQgeyBzIH0gPSB0aGlzLAogICAgICAgIGkgPSAwOwoKICAgICAgd2hpbGUgKHMgPCB0aGlzLmUpIHsKICAgICAgICBjb25zdCBhZGRlZCA9IHNvcnRlZFtpXSB8fCB0aGlzLmUsCiAgICAgICAgICBuZXh0ID0gK2FkZGVkID4gK3RoaXMuZSA/IHRoaXMuZSA6IGFkZGVkOwogICAgICAgIHJlc3VsdHMucHVzaChJbnRlcnZhbC5mcm9tRGF0ZVRpbWVzKHMsIG5leHQpKTsKICAgICAgICBzID0gbmV4dDsKICAgICAgICBpICs9IDE7CiAgICAgIH0KCiAgICAgIHJldHVybiByZXN1bHRzOwogICAgfQoKICAgIC8qKgogICAgICogU3BsaXQgdGhpcyBJbnRlcnZhbCBpbnRvIHNtYWxsZXIgSW50ZXJ2YWxzLCBlYWNoIG9mIHRoZSBzcGVjaWZpZWQgbGVuZ3RoLgogICAgICogTGVmdCBvdmVyIHRpbWUgaXMgZ3JvdXBlZCBpbnRvIGEgc21hbGxlciBpbnRlcnZhbAogICAgICogQHBhcmFtIHtEdXJhdGlvbnxPYmplY3R8bnVtYmVyfSBkdXJhdGlvbiAtIFRoZSBsZW5ndGggb2YgZWFjaCByZXN1bHRpbmcgaW50ZXJ2YWwuCiAgICAgKiBAcmV0dXJuIHtBcnJheX0KICAgICAqLwogICAgc3BsaXRCeShkdXJhdGlvbikgewogICAgICBjb25zdCBkdXIgPSBEdXJhdGlvbi5mcm9tRHVyYXRpb25MaWtlKGR1cmF0aW9uKTsKCiAgICAgIGlmICghdGhpcy5pc1ZhbGlkIHx8ICFkdXIuaXNWYWxpZCB8fCBkdXIuYXMoIm1pbGxpc2Vjb25kcyIpID09PSAwKSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9CgogICAgICBsZXQgeyBzIH0gPSB0aGlzLAogICAgICAgIGlkeCA9IDEsCiAgICAgICAgbmV4dDsKCiAgICAgIGNvbnN0IHJlc3VsdHMgPSBbXTsKICAgICAgd2hpbGUgKHMgPCB0aGlzLmUpIHsKICAgICAgICBjb25zdCBhZGRlZCA9IHRoaXMuc3RhcnQucGx1cyhkdXIubWFwVW5pdHMoKHgpID0+IHggKiBpZHgpKTsKICAgICAgICBuZXh0ID0gK2FkZGVkID4gK3RoaXMuZSA/IHRoaXMuZSA6IGFkZGVkOwogICAgICAgIHJlc3VsdHMucHVzaChJbnRlcnZhbC5mcm9tRGF0ZVRpbWVzKHMsIG5leHQpKTsKICAgICAgICBzID0gbmV4dDsKICAgICAgICBpZHggKz0gMTsKICAgICAgfQoKICAgICAgcmV0dXJuIHJlc3VsdHM7CiAgICB9CgogICAgLyoqCiAgICAgKiBTcGxpdCB0aGlzIEludGVydmFsIGludG8gdGhlIHNwZWNpZmllZCBudW1iZXIgb2Ygc21hbGxlciBpbnRlcnZhbHMuCiAgICAgKiBAcGFyYW0ge251bWJlcn0gbnVtYmVyT2ZQYXJ0cyAtIFRoZSBudW1iZXIgb2YgSW50ZXJ2YWxzIHRvIGRpdmlkZSB0aGUgSW50ZXJ2YWwgaW50by4KICAgICAqIEByZXR1cm4ge0FycmF5fQogICAgICovCiAgICBkaXZpZGVFcXVhbGx5KG51bWJlck9mUGFydHMpIHsKICAgICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiBbXTsKICAgICAgcmV0dXJuIHRoaXMuc3BsaXRCeSh0aGlzLmxlbmd0aCgpIC8gbnVtYmVyT2ZQYXJ0cykuc2xpY2UoMCwgbnVtYmVyT2ZQYXJ0cyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gd2hldGhlciB0aGlzIEludGVydmFsIG92ZXJsYXBzIHdpdGggdGhlIHNwZWNpZmllZCBJbnRlcnZhbAogICAgICogQHBhcmFtIHtJbnRlcnZhbH0gb3RoZXIKICAgICAqIEByZXR1cm4ge2Jvb2xlYW59CiAgICAgKi8KICAgIG92ZXJsYXBzKG90aGVyKSB7CiAgICAgIHJldHVybiB0aGlzLmUgPiBvdGhlci5zICYmIHRoaXMucyA8IG90aGVyLmU7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gd2hldGhlciB0aGlzIEludGVydmFsJ3MgZW5kIGlzIGFkamFjZW50IHRvIHRoZSBzcGVjaWZpZWQgSW50ZXJ2YWwncyBzdGFydC4KICAgICAqIEBwYXJhbSB7SW50ZXJ2YWx9IG90aGVyCiAgICAgKiBAcmV0dXJuIHtib29sZWFufQogICAgICovCiAgICBhYnV0c1N0YXJ0KG90aGVyKSB7CiAgICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gZmFsc2U7CiAgICAgIHJldHVybiArdGhpcy5lID09PSArb3RoZXIuczsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB3aGV0aGVyIHRoaXMgSW50ZXJ2YWwncyBzdGFydCBpcyBhZGphY2VudCB0byB0aGUgc3BlY2lmaWVkIEludGVydmFsJ3MgZW5kLgogICAgICogQHBhcmFtIHtJbnRlcnZhbH0gb3RoZXIKICAgICAqIEByZXR1cm4ge2Jvb2xlYW59CiAgICAgKi8KICAgIGFidXRzRW5kKG90aGVyKSB7CiAgICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gZmFsc2U7CiAgICAgIHJldHVybiArb3RoZXIuZSA9PT0gK3RoaXMuczsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB3aGV0aGVyIHRoaXMgSW50ZXJ2YWwgZW5ndWxmcyB0aGUgc3RhcnQgYW5kIGVuZCBvZiB0aGUgc3BlY2lmaWVkIEludGVydmFsLgogICAgICogQHBhcmFtIHtJbnRlcnZhbH0gb3RoZXIKICAgICAqIEByZXR1cm4ge2Jvb2xlYW59CiAgICAgKi8KICAgIGVuZ3VsZnMob3RoZXIpIHsKICAgICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiBmYWxzZTsKICAgICAgcmV0dXJuIHRoaXMucyA8PSBvdGhlci5zICYmIHRoaXMuZSA+PSBvdGhlci5lOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHdoZXRoZXIgdGhpcyBJbnRlcnZhbCBoYXMgdGhlIHNhbWUgc3RhcnQgYW5kIGVuZCBhcyB0aGUgc3BlY2lmaWVkIEludGVydmFsLgogICAgICogQHBhcmFtIHtJbnRlcnZhbH0gb3RoZXIKICAgICAqIEByZXR1cm4ge2Jvb2xlYW59CiAgICAgKi8KICAgIGVxdWFscyhvdGhlcikgewogICAgICBpZiAoIXRoaXMuaXNWYWxpZCB8fCAhb3RoZXIuaXNWYWxpZCkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXMucy5lcXVhbHMob3RoZXIucykgJiYgdGhpcy5lLmVxdWFscyhvdGhlci5lKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiBhbiBJbnRlcnZhbCByZXByZXNlbnRpbmcgdGhlIGludGVyc2VjdGlvbiBvZiB0aGlzIEludGVydmFsIGFuZCB0aGUgc3BlY2lmaWVkIEludGVydmFsLgogICAgICogU3BlY2lmaWNhbGx5LCB0aGUgcmVzdWx0aW5nIEludGVydmFsIGhhcyB0aGUgbWF4aW11bSBzdGFydCB0aW1lIGFuZCB0aGUgbWluaW11bSBlbmQgdGltZSBvZiB0aGUgdHdvIEludGVydmFscy4KICAgICAqIFJldHVybnMgbnVsbCBpZiB0aGUgaW50ZXJzZWN0aW9uIGlzIGVtcHR5LCBtZWFuaW5nLCB0aGUgaW50ZXJ2YWxzIGRvbid0IGludGVyc2VjdC4KICAgICAqIEBwYXJhbSB7SW50ZXJ2YWx9IG90aGVyCiAgICAgKiBAcmV0dXJuIHtJbnRlcnZhbH0KICAgICAqLwogICAgaW50ZXJzZWN0aW9uKG90aGVyKSB7CiAgICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gdGhpczsKICAgICAgY29uc3QgcyA9IHRoaXMucyA+IG90aGVyLnMgPyB0aGlzLnMgOiBvdGhlci5zLAogICAgICAgIGUgPSB0aGlzLmUgPCBvdGhlci5lID8gdGhpcy5lIDogb3RoZXIuZTsKCiAgICAgIGlmIChzID49IGUpIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gSW50ZXJ2YWwuZnJvbURhdGVUaW1lcyhzLCBlKTsKICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIGFuIEludGVydmFsIHJlcHJlc2VudGluZyB0aGUgdW5pb24gb2YgdGhpcyBJbnRlcnZhbCBhbmQgdGhlIHNwZWNpZmllZCBJbnRlcnZhbC4KICAgICAqIFNwZWNpZmljYWxseSwgdGhlIHJlc3VsdGluZyBJbnRlcnZhbCBoYXMgdGhlIG1pbmltdW0gc3RhcnQgdGltZSBhbmQgdGhlIG1heGltdW0gZW5kIHRpbWUgb2YgdGhlIHR3byBJbnRlcnZhbHMuCiAgICAgKiBAcGFyYW0ge0ludGVydmFsfSBvdGhlcgogICAgICogQHJldHVybiB7SW50ZXJ2YWx9CiAgICAgKi8KICAgIHVuaW9uKG90aGVyKSB7CiAgICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gdGhpczsKICAgICAgY29uc3QgcyA9IHRoaXMucyA8IG90aGVyLnMgPyB0aGlzLnMgOiBvdGhlci5zLAogICAgICAgIGUgPSB0aGlzLmUgPiBvdGhlci5lID8gdGhpcy5lIDogb3RoZXIuZTsKICAgICAgcmV0dXJuIEludGVydmFsLmZyb21EYXRlVGltZXMocywgZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBNZXJnZSBhbiBhcnJheSBvZiBJbnRlcnZhbHMgaW50byBhIGVxdWl2YWxlbnQgbWluaW1hbCBzZXQgb2YgSW50ZXJ2YWxzLgogICAgICogQ29tYmluZXMgb3ZlcmxhcHBpbmcgYW5kIGFkamFjZW50IEludGVydmFscy4KICAgICAqIEBwYXJhbSB7QXJyYXl9IGludGVydmFscwogICAgICogQHJldHVybiB7QXJyYXl9CiAgICAgKi8KICAgIHN0YXRpYyBtZXJnZShpbnRlcnZhbHMpIHsKICAgICAgY29uc3QgW2ZvdW5kLCBmaW5hbF0gPSBpbnRlcnZhbHMKICAgICAgICAuc29ydCgoYSwgYikgPT4gYS5zIC0gYi5zKQogICAgICAgIC5yZWR1Y2UoCiAgICAgICAgICAoW3NvZmFyLCBjdXJyZW50XSwgaXRlbSkgPT4gewogICAgICAgICAgICBpZiAoIWN1cnJlbnQpIHsKICAgICAgICAgICAgICByZXR1cm4gW3NvZmFyLCBpdGVtXTsKICAgICAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50Lm92ZXJsYXBzKGl0ZW0pIHx8IGN1cnJlbnQuYWJ1dHNTdGFydChpdGVtKSkgewogICAgICAgICAgICAgIHJldHVybiBbc29mYXIsIGN1cnJlbnQudW5pb24oaXRlbSldOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHJldHVybiBbc29mYXIuY29uY2F0KFtjdXJyZW50XSksIGl0ZW1dOwogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgW1tdLCBudWxsXQogICAgICAgICk7CiAgICAgIGlmIChmaW5hbCkgewogICAgICAgIGZvdW5kLnB1c2goZmluYWwpOwogICAgICB9CiAgICAgIHJldHVybiBmb3VuZDsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiBhbiBhcnJheSBvZiBJbnRlcnZhbHMgcmVwcmVzZW50aW5nIHRoZSBzcGFucyBvZiB0aW1lIHRoYXQgb25seSBhcHBlYXIgaW4gb25lIG9mIHRoZSBzcGVjaWZpZWQgSW50ZXJ2YWxzLgogICAgICogQHBhcmFtIHtBcnJheX0gaW50ZXJ2YWxzCiAgICAgKiBAcmV0dXJuIHtBcnJheX0KICAgICAqLwogICAgc3RhdGljIHhvcihpbnRlcnZhbHMpIHsKICAgICAgbGV0IHN0YXJ0ID0gbnVsbCwKICAgICAgICBjdXJyZW50Q291bnQgPSAwOwogICAgICBjb25zdCByZXN1bHRzID0gW10sCiAgICAgICAgZW5kcyA9IGludGVydmFscy5tYXAoKGkpID0+IFsKICAgICAgICAgIHsgdGltZTogaS5zLCB0eXBlOiAicyIgfSwKICAgICAgICAgIHsgdGltZTogaS5lLCB0eXBlOiAiZSIgfSwKICAgICAgICBdKSwKICAgICAgICBmbGF0dGVuZWQgPSBBcnJheS5wcm90b3R5cGUuY29uY2F0KC4uLmVuZHMpLAogICAgICAgIGFyciA9IGZsYXR0ZW5lZC5zb3J0KChhLCBiKSA9PiBhLnRpbWUgLSBiLnRpbWUpOwoKICAgICAgZm9yIChjb25zdCBpIG9mIGFycikgewogICAgICAgIGN1cnJlbnRDb3VudCArPSBpLnR5cGUgPT09ICJzIiA/IDEgOiAtMTsKCiAgICAgICAgaWYgKGN1cnJlbnRDb3VudCA9PT0gMSkgewogICAgICAgICAgc3RhcnQgPSBpLnRpbWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmIChzdGFydCAmJiArc3RhcnQgIT09ICtpLnRpbWUpIHsKICAgICAgICAgICAgcmVzdWx0cy5wdXNoKEludGVydmFsLmZyb21EYXRlVGltZXMoc3RhcnQsIGkudGltZSkpOwogICAgICAgICAgfQoKICAgICAgICAgIHN0YXJ0ID0gbnVsbDsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBJbnRlcnZhbC5tZXJnZShyZXN1bHRzKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiBhbiBJbnRlcnZhbCByZXByZXNlbnRpbmcgdGhlIHNwYW4gb2YgdGltZSBpbiB0aGlzIEludGVydmFsIHRoYXQgZG9lc24ndCBvdmVybGFwIHdpdGggYW55IG9mIHRoZSBzcGVjaWZpZWQgSW50ZXJ2YWxzLgogICAgICogQHBhcmFtIHsuLi5JbnRlcnZhbH0gaW50ZXJ2YWxzCiAgICAgKiBAcmV0dXJuIHtBcnJheX0KICAgICAqLwogICAgZGlmZmVyZW5jZSguLi5pbnRlcnZhbHMpIHsKICAgICAgcmV0dXJuIEludGVydmFsLnhvcihbdGhpc10uY29uY2F0KGludGVydmFscykpCiAgICAgICAgLm1hcCgoaSkgPT4gdGhpcy5pbnRlcnNlY3Rpb24oaSkpCiAgICAgICAgLmZpbHRlcigoaSkgPT4gaSAmJiAhaS5pc0VtcHR5KCkpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIEludGVydmFsIGFwcHJvcHJpYXRlIGZvciBkZWJ1Z2dpbmcuCiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9CiAgICAgKi8KICAgIHRvU3RyaW5nKCkgewogICAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIElOVkFMSUQkMjsKICAgICAgcmV0dXJuIGBbJHt0aGlzLnMudG9JU08oKX0g4oCTICR7dGhpcy5lLnRvSVNPKCl9KWA7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIGFuIElTTyA4NjAxLWNvbXBsaWFudCBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBJbnRlcnZhbC4KICAgICAqIEBzZWUgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSVNPXzg2MDEjVGltZV9pbnRlcnZhbHMKICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gVGhlIHNhbWUgb3B0aW9ucyBhcyB7QGxpbmsgRGF0ZVRpbWUjdG9JU099CiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9CiAgICAgKi8KICAgIHRvSVNPKG9wdHMpIHsKICAgICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiBJTlZBTElEJDI7CiAgICAgIHJldHVybiBgJHt0aGlzLnMudG9JU08ob3B0cyl9LyR7dGhpcy5lLnRvSVNPKG9wdHMpfWA7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIGFuIElTTyA4NjAxLWNvbXBsaWFudCBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgZGF0ZSBvZiB0aGlzIEludGVydmFsLgogICAgICogVGhlIHRpbWUgY29tcG9uZW50cyBhcmUgaWdub3JlZC4KICAgICAqIEBzZWUgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSVNPXzg2MDEjVGltZV9pbnRlcnZhbHMKICAgICAqIEByZXR1cm4ge3N0cmluZ30KICAgICAqLwogICAgdG9JU09EYXRlKCkgewogICAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIElOVkFMSUQkMjsKICAgICAgcmV0dXJuIGAke3RoaXMucy50b0lTT0RhdGUoKX0vJHt0aGlzLmUudG9JU09EYXRlKCl9YDsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgYW4gSVNPIDg2MDEtY29tcGxpYW50IHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aW1lIG9mIHRoaXMgSW50ZXJ2YWwuCiAgICAgKiBUaGUgZGF0ZSBjb21wb25lbnRzIGFyZSBpZ25vcmVkLgogICAgICogQHNlZSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9JU09fODYwMSNUaW1lX2ludGVydmFscwogICAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBUaGUgc2FtZSBvcHRpb25zIGFzIHtAbGluayBEYXRlVGltZSN0b0lTT30KICAgICAqIEByZXR1cm4ge3N0cmluZ30KICAgICAqLwogICAgdG9JU09UaW1lKG9wdHMpIHsKICAgICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiBJTlZBTElEJDI7CiAgICAgIHJldHVybiBgJHt0aGlzLnMudG9JU09UaW1lKG9wdHMpfS8ke3RoaXMuZS50b0lTT1RpbWUob3B0cyl9YDsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBJbnRlcnZhbCBmb3JtYXR0ZWQgYWNjb3JkaW5nIHRvIHRoZSBzcGVjaWZpZWQgZm9ybWF0IHN0cmluZy4KICAgICAqIEBwYXJhbSB7c3RyaW5nfSBkYXRlRm9ybWF0IC0gdGhlIGZvcm1hdCBzdHJpbmcuIFRoaXMgc3RyaW5nIGZvcm1hdHMgdGhlIHN0YXJ0IGFuZCBlbmQgdGltZS4gU2VlIHtAbGluayBEYXRlVGltZSN0b0Zvcm1hdH0gZm9yIGRldGFpbHMuCiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnMKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5zZXBhcmF0b3IgPSAgJyDigJMgJ10gLSBhIHNlcGFyYXRvciB0byBwbGFjZSBiZXR3ZWVuIHRoZSBzdGFydCBhbmQgZW5kIHJlcHJlc2VudGF0aW9ucwogICAgICogQHJldHVybiB7c3RyaW5nfQogICAgICovCiAgICB0b0Zvcm1hdChkYXRlRm9ybWF0LCB7IHNlcGFyYXRvciA9ICIg4oCTICIgfSA9IHt9KSB7CiAgICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gSU5WQUxJRCQyOwogICAgICByZXR1cm4gYCR7dGhpcy5zLnRvRm9ybWF0KGRhdGVGb3JtYXQpfSR7c2VwYXJhdG9yfSR7dGhpcy5lLnRvRm9ybWF0KGRhdGVGb3JtYXQpfWA7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gYSBEdXJhdGlvbiByZXByZXNlbnRpbmcgdGhlIHRpbWUgc3Bhbm5lZCBieSB0aGlzIGludGVydmFsLgogICAgICogQHBhcmFtIHtzdHJpbmd8c3RyaW5nW119IFt1bml0PVsnbWlsbGlzZWNvbmRzJ11dIC0gdGhlIHVuaXQgb3IgdW5pdHMgKHN1Y2ggYXMgJ2hvdXJzJyBvciAnZGF5cycpIHRvIGluY2x1ZGUgaW4gdGhlIGR1cmF0aW9uLgogICAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zIHRoYXQgYWZmZWN0IHRoZSBjcmVhdGlvbiBvZiB0aGUgRHVyYXRpb24KICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5jb252ZXJzaW9uQWNjdXJhY3k9J2Nhc3VhbCddIC0gdGhlIGNvbnZlcnNpb24gc3lzdGVtIHRvIHVzZQogICAgICogQGV4YW1wbGUgSW50ZXJ2YWwuZnJvbURhdGVUaW1lcyhkdDEsIGR0MikudG9EdXJhdGlvbigpLnRvT2JqZWN0KCkgLy89PiB7IG1pbGxpc2Vjb25kczogODg0ODkyNTcgfQogICAgICogQGV4YW1wbGUgSW50ZXJ2YWwuZnJvbURhdGVUaW1lcyhkdDEsIGR0MikudG9EdXJhdGlvbignZGF5cycpLnRvT2JqZWN0KCkgLy89PiB7IGRheXM6IDEuMDI0MTgxMjE1Mjc3Nzc3OCB9CiAgICAgKiBAZXhhbXBsZSBJbnRlcnZhbC5mcm9tRGF0ZVRpbWVzKGR0MSwgZHQyKS50b0R1cmF0aW9uKFsnaG91cnMnLCAnbWludXRlcyddKS50b09iamVjdCgpIC8vPT4geyBob3VyczogMjQsIG1pbnV0ZXM6IDM0LjgyMDk1IH0KICAgICAqIEBleGFtcGxlIEludGVydmFsLmZyb21EYXRlVGltZXMoZHQxLCBkdDIpLnRvRHVyYXRpb24oWydob3VycycsICdtaW51dGVzJywgJ3NlY29uZHMnXSkudG9PYmplY3QoKSAvLz0+IHsgaG91cnM6IDI0LCBtaW51dGVzOiAzNCwgc2Vjb25kczogNDkuMjU3IH0KICAgICAqIEBleGFtcGxlIEludGVydmFsLmZyb21EYXRlVGltZXMoZHQxLCBkdDIpLnRvRHVyYXRpb24oJ3NlY29uZHMnKS50b09iamVjdCgpIC8vPT4geyBzZWNvbmRzOiA4ODQ4OS4yNTcgfQogICAgICogQHJldHVybiB7RHVyYXRpb259CiAgICAgKi8KICAgIHRvRHVyYXRpb24odW5pdCwgb3B0cykgewogICAgICBpZiAoIXRoaXMuaXNWYWxpZCkgewogICAgICAgIHJldHVybiBEdXJhdGlvbi5pbnZhbGlkKHRoaXMuaW52YWxpZFJlYXNvbik7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMuZS5kaWZmKHRoaXMucywgdW5pdCwgb3B0cyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSdW4gbWFwRm4gb24gdGhlIGludGVydmFsIHN0YXJ0IGFuZCBlbmQsIHJldHVybmluZyBhIG5ldyBJbnRlcnZhbCBmcm9tIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWVzCiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBtYXBGbgogICAgICogQHJldHVybiB7SW50ZXJ2YWx9CiAgICAgKiBAZXhhbXBsZSBJbnRlcnZhbC5mcm9tRGF0ZVRpbWVzKGR0MSwgZHQyKS5tYXBFbmRwb2ludHMoZW5kcG9pbnQgPT4gZW5kcG9pbnQudG9VVEMoKSkKICAgICAqIEBleGFtcGxlIEludGVydmFsLmZyb21EYXRlVGltZXMoZHQxLCBkdDIpLm1hcEVuZHBvaW50cyhlbmRwb2ludCA9PiBlbmRwb2ludC5wbHVzKHsgaG91cnM6IDIgfSkpCiAgICAgKi8KICAgIG1hcEVuZHBvaW50cyhtYXBGbikgewogICAgICByZXR1cm4gSW50ZXJ2YWwuZnJvbURhdGVUaW1lcyhtYXBGbih0aGlzLnMpLCBtYXBGbih0aGlzLmUpKTsKICAgIH0KICB9CgogIC8qKgogICAqIFRoZSBJbmZvIGNsYXNzIGNvbnRhaW5zIHN0YXRpYyBtZXRob2RzIGZvciByZXRyaWV2aW5nIGdlbmVyYWwgdGltZSBhbmQgZGF0ZSByZWxhdGVkIGRhdGEuIEZvciBleGFtcGxlLCBpdCBoYXMgbWV0aG9kcyBmb3IgZmluZGluZyBvdXQgaWYgYSB0aW1lIHpvbmUgaGFzIGEgRFNULCBmb3IgbGlzdGluZyB0aGUgbW9udGhzIGluIGFueSBzdXBwb3J0ZWQgbG9jYWxlLCBhbmQgZm9yIGRpc2NvdmVyaW5nIHdoaWNoIG9mIEx1eG9uIGZlYXR1cmVzIGFyZSBhdmFpbGFibGUgaW4gdGhlIGN1cnJlbnQgZW52aXJvbm1lbnQuCiAgICovCiAgY2xhc3MgSW5mbyB7CiAgICAvKioKICAgICAqIFJldHVybiB3aGV0aGVyIHRoZSBzcGVjaWZpZWQgem9uZSBjb250YWlucyBhIERTVC4KICAgICAqIEBwYXJhbSB7c3RyaW5nfFpvbmV9IFt6b25lPSdsb2NhbCddIC0gWm9uZSB0byBjaGVjay4gRGVmYXVsdHMgdG8gdGhlIGVudmlyb25tZW50J3MgbG9jYWwgem9uZS4KICAgICAqIEByZXR1cm4ge2Jvb2xlYW59CiAgICAgKi8KICAgIHN0YXRpYyBoYXNEU1Qoem9uZSA9IFNldHRpbmdzLmRlZmF1bHRab25lKSB7CiAgICAgIGNvbnN0IHByb3RvID0gRGF0ZVRpbWUubm93KCkuc2V0Wm9uZSh6b25lKS5zZXQoeyBtb250aDogMTIgfSk7CgogICAgICByZXR1cm4gIXpvbmUuaXNVbml2ZXJzYWwgJiYgcHJvdG8ub2Zmc2V0ICE9PSBwcm90by5zZXQoeyBtb250aDogNiB9KS5vZmZzZXQ7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gd2hldGhlciB0aGUgc3BlY2lmaWVkIHpvbmUgaXMgYSB2YWxpZCBJQU5BIHNwZWNpZmllci4KICAgICAqIEBwYXJhbSB7c3RyaW5nfSB6b25lIC0gWm9uZSB0byBjaGVjawogICAgICogQHJldHVybiB7Ym9vbGVhbn0KICAgICAqLwogICAgc3RhdGljIGlzVmFsaWRJQU5BWm9uZSh6b25lKSB7CiAgICAgIHJldHVybiBJQU5BWm9uZS5pc1ZhbGlkWm9uZSh6b25lKTsKICAgIH0KCiAgICAvKioKICAgICAqIENvbnZlcnRzIHRoZSBpbnB1dCBpbnRvIGEge0BsaW5rIFpvbmV9IGluc3RhbmNlLgogICAgICoKICAgICAqICogSWYgYGlucHV0YCBpcyBhbHJlYWR5IGEgWm9uZSBpbnN0YW5jZSwgaXQgaXMgcmV0dXJuZWQgdW5jaGFuZ2VkLgogICAgICogKiBJZiBgaW5wdXRgIGlzIGEgc3RyaW5nIGNvbnRhaW5pbmcgYSB2YWxpZCB0aW1lIHpvbmUgbmFtZSwgYSBab25lIGluc3RhbmNlCiAgICAgKiAgIHdpdGggdGhhdCBuYW1lIGlzIHJldHVybmVkLgogICAgICogKiBJZiBgaW5wdXRgIGlzIGEgc3RyaW5nIHRoYXQgZG9lc24ndCByZWZlciB0byBhIGtub3duIHRpbWUgem9uZSwgYSBab25lCiAgICAgKiAgIGluc3RhbmNlIHdpdGgge0BsaW5rIFpvbmUjaXNWYWxpZH0gPT0gZmFsc2UgaXMgcmV0dXJuZWQuCiAgICAgKiAqIElmIGBpbnB1dCBpcyBhIG51bWJlciwgYSBab25lIGluc3RhbmNlIHdpdGggdGhlIHNwZWNpZmllZCBmaXhlZCBvZmZzZXQKICAgICAqICAgaW4gbWludXRlcyBpcyByZXR1cm5lZC4KICAgICAqICogSWYgYGlucHV0YCBpcyBgbnVsbGAgb3IgYHVuZGVmaW5lZGAsIHRoZSBkZWZhdWx0IHpvbmUgaXMgcmV0dXJuZWQuCiAgICAgKiBAcGFyYW0ge3N0cmluZ3xab25lfG51bWJlcn0gW2lucHV0XSAtIHRoZSB2YWx1ZSB0byBiZSBjb252ZXJ0ZWQKICAgICAqIEByZXR1cm4ge1pvbmV9CiAgICAgKi8KICAgIHN0YXRpYyBub3JtYWxpemVab25lKGlucHV0KSB7CiAgICAgIHJldHVybiBub3JtYWxpemVab25lKGlucHV0LCBTZXR0aW5ncy5kZWZhdWx0Wm9uZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gYW4gYXJyYXkgb2Ygc3RhbmRhbG9uZSBtb250aCBuYW1lcy4KICAgICAqIEBzZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvRGF0ZVRpbWVGb3JtYXQKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbbGVuZ3RoPSdsb25nJ10gLSB0aGUgbGVuZ3RoIG9mIHRoZSBtb250aCByZXByZXNlbnRhdGlvbiwgc3VjaCBhcyAibnVtZXJpYyIsICIyLWRpZ2l0IiwgIm5hcnJvdyIsICJzaG9ydCIsICJsb25nIgogICAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jYWxlXSAtIHRoZSBsb2NhbGUgY29kZQogICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLm51bWJlcmluZ1N5c3RlbT1udWxsXSAtIHRoZSBudW1iZXJpbmcgc3lzdGVtCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jT2JqPW51bGxdIC0gYW4gZXhpc3RpbmcgbG9jYWxlIG9iamVjdCB0byB1c2UKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5vdXRwdXRDYWxlbmRhcj0nZ3JlZ29yeSddIC0gdGhlIGNhbGVuZGFyCiAgICAgKiBAZXhhbXBsZSBJbmZvLm1vbnRocygpWzBdIC8vPT4gJ0phbnVhcnknCiAgICAgKiBAZXhhbXBsZSBJbmZvLm1vbnRocygnc2hvcnQnKVswXSAvLz0+ICdKYW4nCiAgICAgKiBAZXhhbXBsZSBJbmZvLm1vbnRocygnbnVtZXJpYycpWzBdIC8vPT4gJzEnCiAgICAgKiBAZXhhbXBsZSBJbmZvLm1vbnRocygnc2hvcnQnLCB7IGxvY2FsZTogJ2ZyLUNBJyB9IClbMF0gLy89PiAnamFudi4nCiAgICAgKiBAZXhhbXBsZSBJbmZvLm1vbnRocygnbnVtZXJpYycsIHsgbG9jYWxlOiAnYXInIH0pWzBdIC8vPT4gJ9mhJwogICAgICogQGV4YW1wbGUgSW5mby5tb250aHMoJ2xvbmcnLCB7IG91dHB1dENhbGVuZGFyOiAnaXNsYW1pYycgfSlbMF0gLy89PiAnUmFiacq7IEknCiAgICAgKiBAcmV0dXJuIHtBcnJheX0KICAgICAqLwogICAgc3RhdGljIG1vbnRocygKICAgICAgbGVuZ3RoID0gImxvbmciLAogICAgICB7IGxvY2FsZSA9IG51bGwsIG51bWJlcmluZ1N5c3RlbSA9IG51bGwsIGxvY09iaiA9IG51bGwsIG91dHB1dENhbGVuZGFyID0gImdyZWdvcnkiIH0gPSB7fQogICAgKSB7CiAgICAgIHJldHVybiAobG9jT2JqIHx8IExvY2FsZS5jcmVhdGUobG9jYWxlLCBudW1iZXJpbmdTeXN0ZW0sIG91dHB1dENhbGVuZGFyKSkubW9udGhzKGxlbmd0aCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gYW4gYXJyYXkgb2YgZm9ybWF0IG1vbnRoIG5hbWVzLgogICAgICogRm9ybWF0IG1vbnRocyBkaWZmZXIgZnJvbSBzdGFuZGFsb25lIG1vbnRocyBpbiB0aGF0IHRoZXkncmUgbWVhbnQgdG8gYXBwZWFyIG5leHQgdG8gdGhlIGRheSBvZiB0aGUgbW9udGguIEluIHNvbWUgbGFuZ3VhZ2VzLCB0aGF0CiAgICAgKiBjaGFuZ2VzIHRoZSBzdHJpbmcuCiAgICAgKiBTZWUge0BsaW5rIEluZm8jbW9udGhzfQogICAgICogQHBhcmFtIHtzdHJpbmd9IFtsZW5ndGg9J2xvbmcnXSAtIHRoZSBsZW5ndGggb2YgdGhlIG1vbnRoIHJlcHJlc2VudGF0aW9uLCBzdWNoIGFzICJudW1lcmljIiwgIjItZGlnaXQiLCAibmFycm93IiwgInNob3J0IiwgImxvbmciCiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnMKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NhbGVdIC0gdGhlIGxvY2FsZSBjb2RlCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubnVtYmVyaW5nU3lzdGVtPW51bGxdIC0gdGhlIG51bWJlcmluZyBzeXN0ZW0KICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NPYmo9bnVsbF0gLSBhbiBleGlzdGluZyBsb2NhbGUgb2JqZWN0IHRvIHVzZQogICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLm91dHB1dENhbGVuZGFyPSdncmVnb3J5J10gLSB0aGUgY2FsZW5kYXIKICAgICAqIEByZXR1cm4ge0FycmF5fQogICAgICovCiAgICBzdGF0aWMgbW9udGhzRm9ybWF0KAogICAgICBsZW5ndGggPSAibG9uZyIsCiAgICAgIHsgbG9jYWxlID0gbnVsbCwgbnVtYmVyaW5nU3lzdGVtID0gbnVsbCwgbG9jT2JqID0gbnVsbCwgb3V0cHV0Q2FsZW5kYXIgPSAiZ3JlZ29yeSIgfSA9IHt9CiAgICApIHsKICAgICAgcmV0dXJuIChsb2NPYmogfHwgTG9jYWxlLmNyZWF0ZShsb2NhbGUsIG51bWJlcmluZ1N5c3RlbSwgb3V0cHV0Q2FsZW5kYXIpKS5tb250aHMobGVuZ3RoLCB0cnVlKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiBhbiBhcnJheSBvZiBzdGFuZGFsb25lIHdlZWsgbmFtZXMuCiAgICAgKiBAc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0RhdGVUaW1lRm9ybWF0CiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW2xlbmd0aD0nbG9uZyddIC0gdGhlIGxlbmd0aCBvZiB0aGUgd2Vla2RheSByZXByZXNlbnRhdGlvbiwgc3VjaCBhcyAibmFycm93IiwgInNob3J0IiwgImxvbmciLgogICAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jYWxlXSAtIHRoZSBsb2NhbGUgY29kZQogICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLm51bWJlcmluZ1N5c3RlbT1udWxsXSAtIHRoZSBudW1iZXJpbmcgc3lzdGVtCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jT2JqPW51bGxdIC0gYW4gZXhpc3RpbmcgbG9jYWxlIG9iamVjdCB0byB1c2UKICAgICAqIEBleGFtcGxlIEluZm8ud2Vla2RheXMoKVswXSAvLz0+ICdNb25kYXknCiAgICAgKiBAZXhhbXBsZSBJbmZvLndlZWtkYXlzKCdzaG9ydCcpWzBdIC8vPT4gJ01vbicKICAgICAqIEBleGFtcGxlIEluZm8ud2Vla2RheXMoJ3Nob3J0JywgeyBsb2NhbGU6ICdmci1DQScgfSlbMF0gLy89PiAnbHVuLicKICAgICAqIEBleGFtcGxlIEluZm8ud2Vla2RheXMoJ3Nob3J0JywgeyBsb2NhbGU6ICdhcicgfSlbMF0gLy89PiAn2KfZhNin2KvZhtmK2YYnCiAgICAgKiBAcmV0dXJuIHtBcnJheX0KICAgICAqLwogICAgc3RhdGljIHdlZWtkYXlzKGxlbmd0aCA9ICJsb25nIiwgeyBsb2NhbGUgPSBudWxsLCBudW1iZXJpbmdTeXN0ZW0gPSBudWxsLCBsb2NPYmogPSBudWxsIH0gPSB7fSkgewogICAgICByZXR1cm4gKGxvY09iaiB8fCBMb2NhbGUuY3JlYXRlKGxvY2FsZSwgbnVtYmVyaW5nU3lzdGVtLCBudWxsKSkud2Vla2RheXMobGVuZ3RoKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiBhbiBhcnJheSBvZiBmb3JtYXQgd2VlayBuYW1lcy4KICAgICAqIEZvcm1hdCB3ZWVrZGF5cyBkaWZmZXIgZnJvbSBzdGFuZGFsb25lIHdlZWtkYXlzIGluIHRoYXQgdGhleSdyZSBtZWFudCB0byBhcHBlYXIgbmV4dCB0byBtb3JlIGRhdGUgaW5mb3JtYXRpb24uIEluIHNvbWUgbGFuZ3VhZ2VzLCB0aGF0CiAgICAgKiBjaGFuZ2VzIHRoZSBzdHJpbmcuCiAgICAgKiBTZWUge0BsaW5rIEluZm8jd2Vla2RheXN9CiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW2xlbmd0aD0nbG9uZyddIC0gdGhlIGxlbmd0aCBvZiB0aGUgbW9udGggcmVwcmVzZW50YXRpb24sIHN1Y2ggYXMgIm5hcnJvdyIsICJzaG9ydCIsICJsb25nIi4KICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9ucwogICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmxvY2FsZT1udWxsXSAtIHRoZSBsb2NhbGUgY29kZQogICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLm51bWJlcmluZ1N5c3RlbT1udWxsXSAtIHRoZSBudW1iZXJpbmcgc3lzdGVtCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jT2JqPW51bGxdIC0gYW4gZXhpc3RpbmcgbG9jYWxlIG9iamVjdCB0byB1c2UKICAgICAqIEByZXR1cm4ge0FycmF5fQogICAgICovCiAgICBzdGF0aWMgd2Vla2RheXNGb3JtYXQoCiAgICAgIGxlbmd0aCA9ICJsb25nIiwKICAgICAgeyBsb2NhbGUgPSBudWxsLCBudW1iZXJpbmdTeXN0ZW0gPSBudWxsLCBsb2NPYmogPSBudWxsIH0gPSB7fQogICAgKSB7CiAgICAgIHJldHVybiAobG9jT2JqIHx8IExvY2FsZS5jcmVhdGUobG9jYWxlLCBudW1iZXJpbmdTeXN0ZW0sIG51bGwpKS53ZWVrZGF5cyhsZW5ndGgsIHRydWUpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIGFuIGFycmF5IG9mIG1lcmlkaWVtcy4KICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9ucwogICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmxvY2FsZV0gLSB0aGUgbG9jYWxlIGNvZGUKICAgICAqIEBleGFtcGxlIEluZm8ubWVyaWRpZW1zKCkgLy89PiBbICdBTScsICdQTScgXQogICAgICogQGV4YW1wbGUgSW5mby5tZXJpZGllbXMoeyBsb2NhbGU6ICdteScgfSkgLy89PiBbICfhgJThgLbhgJThgIDhgLonLCAn4YCK4YCU4YCxJyBdCiAgICAgKiBAcmV0dXJuIHtBcnJheX0KICAgICAqLwogICAgc3RhdGljIG1lcmlkaWVtcyh7IGxvY2FsZSA9IG51bGwgfSA9IHt9KSB7CiAgICAgIHJldHVybiBMb2NhbGUuY3JlYXRlKGxvY2FsZSkubWVyaWRpZW1zKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gYW4gYXJyYXkgb2YgZXJhcywgc3VjaCBhcyBbJ0JDJywgJ0FEJ10uIFRoZSBsb2NhbGUgY2FuIGJlIHNwZWNpZmllZCwgYnV0IHRoZSBjYWxlbmRhciBzeXN0ZW0gaXMgYWx3YXlzIEdyZWdvcmlhbi4KICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbbGVuZ3RoPSdzaG9ydCddIC0gdGhlIGxlbmd0aCBvZiB0aGUgZXJhIHJlcHJlc2VudGF0aW9uLCBzdWNoIGFzICJzaG9ydCIgb3IgImxvbmciLgogICAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jYWxlXSAtIHRoZSBsb2NhbGUgY29kZQogICAgICogQGV4YW1wbGUgSW5mby5lcmFzKCkgLy89PiBbICdCQycsICdBRCcgXQogICAgICogQGV4YW1wbGUgSW5mby5lcmFzKCdsb25nJykgLy89PiBbICdCZWZvcmUgQ2hyaXN0JywgJ0Fubm8gRG9taW5pJyBdCiAgICAgKiBAZXhhbXBsZSBJbmZvLmVyYXMoJ2xvbmcnLCB7IGxvY2FsZTogJ2ZyJyB9KSAvLz0+IFsgJ2F2YW50IErDqXN1cy1DaHJpc3QnLCAnYXByw6hzIErDqXN1cy1DaHJpc3QnIF0KICAgICAqIEByZXR1cm4ge0FycmF5fQogICAgICovCiAgICBzdGF0aWMgZXJhcyhsZW5ndGggPSAic2hvcnQiLCB7IGxvY2FsZSA9IG51bGwgfSA9IHt9KSB7CiAgICAgIHJldHVybiBMb2NhbGUuY3JlYXRlKGxvY2FsZSwgbnVsbCwgImdyZWdvcnkiKS5lcmFzKGxlbmd0aCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIHNldCBvZiBhdmFpbGFibGUgZmVhdHVyZXMgaW4gdGhpcyBlbnZpcm9ubWVudC4KICAgICAqIFNvbWUgZmVhdHVyZXMgb2YgTHV4b24gYXJlIG5vdCBhdmFpbGFibGUgaW4gYWxsIGVudmlyb25tZW50cy4gRm9yIGV4YW1wbGUsIG9uIG9sZGVyIGJyb3dzZXJzLCByZWxhdGl2ZSB0aW1lIGZvcm1hdHRpbmcgc3VwcG9ydCBpcyBub3QgYXZhaWxhYmxlLiBVc2UgdGhpcyBmdW5jdGlvbiB0byBmaWd1cmUgb3V0IGlmIHRoYXQncyB0aGUgY2FzZS4KICAgICAqIEtleXM6CiAgICAgKiAqIGByZWxhdGl2ZWA6IHdoZXRoZXIgdGhpcyBlbnZpcm9ubWVudCBzdXBwb3J0cyByZWxhdGl2ZSB0aW1lIGZvcm1hdHRpbmcKICAgICAqIEBleGFtcGxlIEluZm8uZmVhdHVyZXMoKSAvLz0+IHsgcmVsYXRpdmU6IGZhbHNlIH0KICAgICAqIEByZXR1cm4ge09iamVjdH0KICAgICAqLwogICAgc3RhdGljIGZlYXR1cmVzKCkgewogICAgICByZXR1cm4geyByZWxhdGl2ZTogaGFzUmVsYXRpdmUoKSB9OwogICAgfQogIH0KCiAgZnVuY3Rpb24gZGF5RGlmZihlYXJsaWVyLCBsYXRlcikgewogICAgY29uc3QgdXRjRGF5U3RhcnQgPSAoZHQpID0+IGR0LnRvVVRDKDAsIHsga2VlcExvY2FsVGltZTogdHJ1ZSB9KS5zdGFydE9mKCJkYXkiKS52YWx1ZU9mKCksCiAgICAgIG1zID0gdXRjRGF5U3RhcnQobGF0ZXIpIC0gdXRjRGF5U3RhcnQoZWFybGllcik7CiAgICByZXR1cm4gTWF0aC5mbG9vcihEdXJhdGlvbi5mcm9tTWlsbGlzKG1zKS5hcygiZGF5cyIpKTsKICB9CgogIGZ1bmN0aW9uIGhpZ2hPcmRlckRpZmZzKGN1cnNvciwgbGF0ZXIsIHVuaXRzKSB7CiAgICBjb25zdCBkaWZmZXJzID0gWwogICAgICBbInllYXJzIiwgKGEsIGIpID0+IGIueWVhciAtIGEueWVhcl0sCiAgICAgIFsicXVhcnRlcnMiLCAoYSwgYikgPT4gYi5xdWFydGVyIC0gYS5xdWFydGVyICsgKGIueWVhciAtIGEueWVhcikgKiA0XSwKICAgICAgWyJtb250aHMiLCAoYSwgYikgPT4gYi5tb250aCAtIGEubW9udGggKyAoYi55ZWFyIC0gYS55ZWFyKSAqIDEyXSwKICAgICAgWwogICAgICAgICJ3ZWVrcyIsCiAgICAgICAgKGEsIGIpID0+IHsKICAgICAgICAgIGNvbnN0IGRheXMgPSBkYXlEaWZmKGEsIGIpOwogICAgICAgICAgcmV0dXJuIChkYXlzIC0gKGRheXMgJSA3KSkgLyA3OwogICAgICAgIH0sCiAgICAgIF0sCiAgICAgIFsiZGF5cyIsIGRheURpZmZdLAogICAgXTsKCiAgICBjb25zdCByZXN1bHRzID0ge307CiAgICBsZXQgbG93ZXN0T3JkZXIsIGhpZ2hXYXRlcjsKCiAgICBmb3IgKGNvbnN0IFt1bml0LCBkaWZmZXJdIG9mIGRpZmZlcnMpIHsKICAgICAgaWYgKHVuaXRzLmluZGV4T2YodW5pdCkgPj0gMCkgewogICAgICAgIGxvd2VzdE9yZGVyID0gdW5pdDsKCiAgICAgICAgbGV0IGRlbHRhID0gZGlmZmVyKGN1cnNvciwgbGF0ZXIpOwogICAgICAgIGhpZ2hXYXRlciA9IGN1cnNvci5wbHVzKHsgW3VuaXRdOiBkZWx0YSB9KTsKCiAgICAgICAgaWYgKGhpZ2hXYXRlciA+IGxhdGVyKSB7CiAgICAgICAgICBjdXJzb3IgPSBjdXJzb3IucGx1cyh7IFt1bml0XTogZGVsdGEgLSAxIH0pOwogICAgICAgICAgZGVsdGEgLT0gMTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY3Vyc29yID0gaGlnaFdhdGVyOwogICAgICAgIH0KCiAgICAgICAgcmVzdWx0c1t1bml0XSA9IGRlbHRhOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIFtjdXJzb3IsIHJlc3VsdHMsIGhpZ2hXYXRlciwgbG93ZXN0T3JkZXJdOwogIH0KCiAgZnVuY3Rpb24gZGlmZiAoZWFybGllciwgbGF0ZXIsIHVuaXRzLCBvcHRzKSB7CiAgICBsZXQgW2N1cnNvciwgcmVzdWx0cywgaGlnaFdhdGVyLCBsb3dlc3RPcmRlcl0gPSBoaWdoT3JkZXJEaWZmcyhlYXJsaWVyLCBsYXRlciwgdW5pdHMpOwoKICAgIGNvbnN0IHJlbWFpbmluZ01pbGxpcyA9IGxhdGVyIC0gY3Vyc29yOwoKICAgIGNvbnN0IGxvd2VyT3JkZXJVbml0cyA9IHVuaXRzLmZpbHRlcigKICAgICAgKHUpID0+IFsiaG91cnMiLCAibWludXRlcyIsICJzZWNvbmRzIiwgIm1pbGxpc2Vjb25kcyJdLmluZGV4T2YodSkgPj0gMAogICAgKTsKCiAgICBpZiAobG93ZXJPcmRlclVuaXRzLmxlbmd0aCA9PT0gMCkgewogICAgICBpZiAoaGlnaFdhdGVyIDwgbGF0ZXIpIHsKICAgICAgICBoaWdoV2F0ZXIgPSBjdXJzb3IucGx1cyh7IFtsb3dlc3RPcmRlcl06IDEgfSk7CiAgICAgIH0KCiAgICAgIGlmIChoaWdoV2F0ZXIgIT09IGN1cnNvcikgewogICAgICAgIHJlc3VsdHNbbG93ZXN0T3JkZXJdID0gKHJlc3VsdHNbbG93ZXN0T3JkZXJdIHx8IDApICsgcmVtYWluaW5nTWlsbGlzIC8gKGhpZ2hXYXRlciAtIGN1cnNvcik7CiAgICAgIH0KICAgIH0KCiAgICBjb25zdCBkdXJhdGlvbiA9IER1cmF0aW9uLmZyb21PYmplY3QocmVzdWx0cywgb3B0cyk7CgogICAgaWYgKGxvd2VyT3JkZXJVbml0cy5sZW5ndGggPiAwKSB7CiAgICAgIHJldHVybiBEdXJhdGlvbi5mcm9tTWlsbGlzKHJlbWFpbmluZ01pbGxpcywgb3B0cykKICAgICAgICAuc2hpZnRUbyguLi5sb3dlck9yZGVyVW5pdHMpCiAgICAgICAgLnBsdXMoZHVyYXRpb24pOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIGR1cmF0aW9uOwogICAgfQogIH0KCiAgY29uc3QgbnVtYmVyaW5nU3lzdGVtcyA9IHsKICAgIGFyYWI6ICJbXHUwNjYwLVx1MDY2OV0iLAogICAgYXJhYmV4dDogIltcdTA2RjAtXHUwNkY5XSIsCiAgICBiYWxpOiAiW1x1MUI1MC1cdTFCNTldIiwKICAgIGJlbmc6ICJbXHUwOUU2LVx1MDlFRl0iLAogICAgZGV2YTogIltcdTA5NjYtXHUwOTZGXSIsCiAgICBmdWxsd2lkZTogIltcdUZGMTAtXHVGRjE5XSIsCiAgICBndWpyOiAiW1x1MEFFNi1cdTBBRUZdIiwKICAgIGhhbmlkZWM6ICJb44CHfOS4gHzkuox85LiJfOWbm3zkupR85YWtfOS4g3zlhat85LmdXSIsCiAgICBraG1yOiAiW1x1MTdFMC1cdTE3RTldIiwKICAgIGtuZGE6ICJbXHUwQ0U2LVx1MENFRl0iLAogICAgbGFvbzogIltcdTBFRDAtXHUwRUQ5XSIsCiAgICBsaW1iOiAiW1x1MTk0Ni1cdTE5NEZdIiwKICAgIG1seW06ICJbXHUwRDY2LVx1MEQ2Rl0iLAogICAgbW9uZzogIltcdTE4MTAtXHUxODE5XSIsCiAgICBteW1yOiAiW1x1MTA0MC1cdTEwNDldIiwKICAgIG9yeWE6ICJbXHUwQjY2LVx1MEI2Rl0iLAogICAgdGFtbGRlYzogIltcdTBCRTYtXHUwQkVGXSIsCiAgICB0ZWx1OiAiW1x1MEM2Ni1cdTBDNkZdIiwKICAgIHRoYWk6ICJbXHUwRTUwLVx1MEU1OV0iLAogICAgdGlidDogIltcdTBGMjAtXHUwRjI5XSIsCiAgICBsYXRuOiAiXFxkIiwKICB9OwoKICBjb25zdCBudW1iZXJpbmdTeXN0ZW1zVVRGMTYgPSB7CiAgICBhcmFiOiBbMTYzMiwgMTY0MV0sCiAgICBhcmFiZXh0OiBbMTc3NiwgMTc4NV0sCiAgICBiYWxpOiBbNjk5MiwgNzAwMV0sCiAgICBiZW5nOiBbMjUzNCwgMjU0M10sCiAgICBkZXZhOiBbMjQwNiwgMjQxNV0sCiAgICBmdWxsd2lkZTogWzY1Mjk2LCA2NTMwM10sCiAgICBndWpyOiBbMjc5MCwgMjc5OV0sCiAgICBraG1yOiBbNjExMiwgNjEyMV0sCiAgICBrbmRhOiBbMzMwMiwgMzMxMV0sCiAgICBsYW9vOiBbMzc5MiwgMzgwMV0sCiAgICBsaW1iOiBbNjQ3MCwgNjQ3OV0sCiAgICBtbHltOiBbMzQzMCwgMzQzOV0sCiAgICBtb25nOiBbNjE2MCwgNjE2OV0sCiAgICBteW1yOiBbNDE2MCwgNDE2OV0sCiAgICBvcnlhOiBbMjkxOCwgMjkyN10sCiAgICB0YW1sZGVjOiBbMzA0NiwgMzA1NV0sCiAgICB0ZWx1OiBbMzE3NCwgMzE4M10sCiAgICB0aGFpOiBbMzY2NCwgMzY3M10sCiAgICB0aWJ0OiBbMzg3MiwgMzg4MV0sCiAgfTsKCiAgY29uc3QgaGFuaWRlY0NoYXJzID0gbnVtYmVyaW5nU3lzdGVtcy5oYW5pZGVjLnJlcGxhY2UoL1tcW3xcXV0vZywgIiIpLnNwbGl0KCIiKTsKCiAgZnVuY3Rpb24gcGFyc2VEaWdpdHMoc3RyKSB7CiAgICBsZXQgdmFsdWUgPSBwYXJzZUludChzdHIsIDEwKTsKICAgIGlmIChpc05hTih2YWx1ZSkpIHsKICAgICAgdmFsdWUgPSAiIjsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBjb2RlID0gc3RyLmNoYXJDb2RlQXQoaSk7CgogICAgICAgIGlmIChzdHJbaV0uc2VhcmNoKG51bWJlcmluZ1N5c3RlbXMuaGFuaWRlYykgIT09IC0xKSB7CiAgICAgICAgICB2YWx1ZSArPSBoYW5pZGVjQ2hhcnMuaW5kZXhPZihzdHJbaV0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBudW1iZXJpbmdTeXN0ZW1zVVRGMTYpIHsKICAgICAgICAgICAgY29uc3QgW21pbiwgbWF4XSA9IG51bWJlcmluZ1N5c3RlbXNVVEYxNltrZXldOwogICAgICAgICAgICBpZiAoY29kZSA+PSBtaW4gJiYgY29kZSA8PSBtYXgpIHsKICAgICAgICAgICAgICB2YWx1ZSArPSBjb2RlIC0gbWluOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBwYXJzZUludCh2YWx1ZSwgMTApOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHZhbHVlOwogICAgfQogIH0KCiAgZnVuY3Rpb24gZGlnaXRSZWdleCh7IG51bWJlcmluZ1N5c3RlbSB9LCBhcHBlbmQgPSAiIikgewogICAgcmV0dXJuIG5ldyBSZWdFeHAoYCR7bnVtYmVyaW5nU3lzdGVtc1tudW1iZXJpbmdTeXN0ZW0gfHwgImxhdG4iXX0ke2FwcGVuZH1gKTsKICB9CgogIGNvbnN0IE1JU1NJTkdfRlRQID0gIm1pc3NpbmcgSW50bC5EYXRlVGltZUZvcm1hdC5mb3JtYXRUb1BhcnRzIHN1cHBvcnQiOwoKICBmdW5jdGlvbiBpbnRVbml0KHJlZ2V4LCBwb3N0ID0gKGkpID0+IGkpIHsKICAgIHJldHVybiB7IHJlZ2V4LCBkZXNlcjogKFtzXSkgPT4gcG9zdChwYXJzZURpZ2l0cyhzKSkgfTsKICB9CgogIGNvbnN0IE5CU1AgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDE2MCk7CiAgY29uc3Qgc3BhY2VPck5CU1AgPSBgWyAke05CU1B9XWA7CiAgY29uc3Qgc3BhY2VPck5CU1BSZWdFeHAgPSBuZXcgUmVnRXhwKHNwYWNlT3JOQlNQLCAiZyIpOwoKICBmdW5jdGlvbiBmaXhMaXN0UmVnZXgocykgewogICAgLy8gbWFrZSBkb3RzIG9wdGlvbmFsIGFuZCBhbHNvIG1ha2UgdGhlbSBsaXRlcmFsCiAgICAvLyBtYWtlIHNwYWNlIGFuZCBub24gYnJlYWthYmxlIHNwYWNlIGNoYXJhY3RlcnMgaW50ZXJjaGFuZ2VhYmxlCiAgICByZXR1cm4gcy5yZXBsYWNlKC9cLi9nLCAiXFwuPyIpLnJlcGxhY2Uoc3BhY2VPck5CU1BSZWdFeHAsIHNwYWNlT3JOQlNQKTsKICB9CgogIGZ1bmN0aW9uIHN0cmlwSW5zZW5zaXRpdml0aWVzKHMpIHsKICAgIHJldHVybiBzCiAgICAgIC5yZXBsYWNlKC9cLi9nLCAiIikgLy8gaWdub3JlIGRvdHMgdGhhdCB3ZXJlIG1hZGUgb3B0aW9uYWwKICAgICAgLnJlcGxhY2Uoc3BhY2VPck5CU1BSZWdFeHAsICIgIikgLy8gaW50ZXJjaGFuZ2Ugc3BhY2UgYW5kIG5ic3AKICAgICAgLnRvTG93ZXJDYXNlKCk7CiAgfQoKICBmdW5jdGlvbiBvbmVPZihzdHJpbmdzLCBzdGFydEluZGV4KSB7CiAgICBpZiAoc3RyaW5ncyA9PT0gbnVsbCkgewogICAgICByZXR1cm4gbnVsbDsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgcmVnZXg6IFJlZ0V4cChzdHJpbmdzLm1hcChmaXhMaXN0UmVnZXgpLmpvaW4oInwiKSksCiAgICAgICAgZGVzZXI6IChbc10pID0+CiAgICAgICAgICBzdHJpbmdzLmZpbmRJbmRleCgoaSkgPT4gc3RyaXBJbnNlbnNpdGl2aXRpZXMocykgPT09IHN0cmlwSW5zZW5zaXRpdml0aWVzKGkpKSArIHN0YXJ0SW5kZXgsCiAgICAgIH07CiAgICB9CiAgfQoKICBmdW5jdGlvbiBvZmZzZXQocmVnZXgsIGdyb3VwcykgewogICAgcmV0dXJuIHsgcmVnZXgsIGRlc2VyOiAoWywgaCwgbV0pID0+IHNpZ25lZE9mZnNldChoLCBtKSwgZ3JvdXBzIH07CiAgfQoKICBmdW5jdGlvbiBzaW1wbGUocmVnZXgpIHsKICAgIHJldHVybiB7IHJlZ2V4LCBkZXNlcjogKFtzXSkgPT4gcyB9OwogIH0KCiAgZnVuY3Rpb24gZXNjYXBlVG9rZW4odmFsdWUpIHsKICAgIHJldHVybiB2YWx1ZS5yZXBsYWNlKC9bXC1cW1xde30oKSorPy4sXFxcXiR8I1xzXS9nLCAiXFwkJiIpOwogIH0KCiAgZnVuY3Rpb24gdW5pdEZvclRva2VuKHRva2VuLCBsb2MpIHsKICAgIGNvbnN0IG9uZSA9IGRpZ2l0UmVnZXgobG9jKSwKICAgICAgdHdvID0gZGlnaXRSZWdleChsb2MsICJ7Mn0iKSwKICAgICAgdGhyZWUgPSBkaWdpdFJlZ2V4KGxvYywgInszfSIpLAogICAgICBmb3VyID0gZGlnaXRSZWdleChsb2MsICJ7NH0iKSwKICAgICAgc2l4ID0gZGlnaXRSZWdleChsb2MsICJ7Nn0iKSwKICAgICAgb25lT3JUd28gPSBkaWdpdFJlZ2V4KGxvYywgInsxLDJ9IiksCiAgICAgIG9uZVRvVGhyZWUgPSBkaWdpdFJlZ2V4KGxvYywgInsxLDN9IiksCiAgICAgIG9uZVRvU2l4ID0gZGlnaXRSZWdleChsb2MsICJ7MSw2fSIpLAogICAgICBvbmVUb05pbmUgPSBkaWdpdFJlZ2V4KGxvYywgInsxLDl9IiksCiAgICAgIHR3b1RvRm91ciA9IGRpZ2l0UmVnZXgobG9jLCAiezIsNH0iKSwKICAgICAgZm91clRvU2l4ID0gZGlnaXRSZWdleChsb2MsICJ7NCw2fSIpLAogICAgICBsaXRlcmFsID0gKHQpID0+ICh7IHJlZ2V4OiBSZWdFeHAoZXNjYXBlVG9rZW4odC52YWwpKSwgZGVzZXI6IChbc10pID0+IHMsIGxpdGVyYWw6IHRydWUgfSksCiAgICAgIHVuaXRhdGUgPSAodCkgPT4gewogICAgICAgIGlmICh0b2tlbi5saXRlcmFsKSB7CiAgICAgICAgICByZXR1cm4gbGl0ZXJhbCh0KTsKICAgICAgICB9CiAgICAgICAgc3dpdGNoICh0LnZhbCkgewogICAgICAgICAgLy8gZXJhCiAgICAgICAgICBjYXNlICJHIjoKICAgICAgICAgICAgcmV0dXJuIG9uZU9mKGxvYy5lcmFzKCJzaG9ydCIsIGZhbHNlKSwgMCk7CiAgICAgICAgICBjYXNlICJHRyI6CiAgICAgICAgICAgIHJldHVybiBvbmVPZihsb2MuZXJhcygibG9uZyIsIGZhbHNlKSwgMCk7CiAgICAgICAgICAvLyB5ZWFycwogICAgICAgICAgY2FzZSAieSI6CiAgICAgICAgICAgIHJldHVybiBpbnRVbml0KG9uZVRvU2l4KTsKICAgICAgICAgIGNhc2UgInl5IjoKICAgICAgICAgICAgcmV0dXJuIGludFVuaXQodHdvVG9Gb3VyLCB1bnRydW5jYXRlWWVhcik7CiAgICAgICAgICBjYXNlICJ5eXl5IjoKICAgICAgICAgICAgcmV0dXJuIGludFVuaXQoZm91cik7CiAgICAgICAgICBjYXNlICJ5eXl5eSI6CiAgICAgICAgICAgIHJldHVybiBpbnRVbml0KGZvdXJUb1NpeCk7CiAgICAgICAgICBjYXNlICJ5eXl5eXkiOgogICAgICAgICAgICByZXR1cm4gaW50VW5pdChzaXgpOwogICAgICAgICAgLy8gbW9udGhzCiAgICAgICAgICBjYXNlICJNIjoKICAgICAgICAgICAgcmV0dXJuIGludFVuaXQob25lT3JUd28pOwogICAgICAgICAgY2FzZSAiTU0iOgogICAgICAgICAgICByZXR1cm4gaW50VW5pdCh0d28pOwogICAgICAgICAgY2FzZSAiTU1NIjoKICAgICAgICAgICAgcmV0dXJuIG9uZU9mKGxvYy5tb250aHMoInNob3J0IiwgdHJ1ZSwgZmFsc2UpLCAxKTsKICAgICAgICAgIGNhc2UgIk1NTU0iOgogICAgICAgICAgICByZXR1cm4gb25lT2YobG9jLm1vbnRocygibG9uZyIsIHRydWUsIGZhbHNlKSwgMSk7CiAgICAgICAgICBjYXNlICJMIjoKICAgICAgICAgICAgcmV0dXJuIGludFVuaXQob25lT3JUd28pOwogICAgICAgICAgY2FzZSAiTEwiOgogICAgICAgICAgICByZXR1cm4gaW50VW5pdCh0d28pOwogICAgICAgICAgY2FzZSAiTExMIjoKICAgICAgICAgICAgcmV0dXJuIG9uZU9mKGxvYy5tb250aHMoInNob3J0IiwgZmFsc2UsIGZhbHNlKSwgMSk7CiAgICAgICAgICBjYXNlICJMTExMIjoKICAgICAgICAgICAgcmV0dXJuIG9uZU9mKGxvYy5tb250aHMoImxvbmciLCBmYWxzZSwgZmFsc2UpLCAxKTsKICAgICAgICAgIC8vIGRhdGVzCiAgICAgICAgICBjYXNlICJkIjoKICAgICAgICAgICAgcmV0dXJuIGludFVuaXQob25lT3JUd28pOwogICAgICAgICAgY2FzZSAiZGQiOgogICAgICAgICAgICByZXR1cm4gaW50VW5pdCh0d28pOwogICAgICAgICAgLy8gb3JkaW5hbHMKICAgICAgICAgIGNhc2UgIm8iOgogICAgICAgICAgICByZXR1cm4gaW50VW5pdChvbmVUb1RocmVlKTsKICAgICAgICAgIGNhc2UgIm9vbyI6CiAgICAgICAgICAgIHJldHVybiBpbnRVbml0KHRocmVlKTsKICAgICAgICAgIC8vIHRpbWUKICAgICAgICAgIGNhc2UgIkhIIjoKICAgICAgICAgICAgcmV0dXJuIGludFVuaXQodHdvKTsKICAgICAgICAgIGNhc2UgIkgiOgogICAgICAgICAgICByZXR1cm4gaW50VW5pdChvbmVPclR3byk7CiAgICAgICAgICBjYXNlICJoaCI6CiAgICAgICAgICAgIHJldHVybiBpbnRVbml0KHR3byk7CiAgICAgICAgICBjYXNlICJoIjoKICAgICAgICAgICAgcmV0dXJuIGludFVuaXQob25lT3JUd28pOwogICAgICAgICAgY2FzZSAibW0iOgogICAgICAgICAgICByZXR1cm4gaW50VW5pdCh0d28pOwogICAgICAgICAgY2FzZSAibSI6CiAgICAgICAgICAgIHJldHVybiBpbnRVbml0KG9uZU9yVHdvKTsKICAgICAgICAgIGNhc2UgInEiOgogICAgICAgICAgICByZXR1cm4gaW50VW5pdChvbmVPclR3byk7CiAgICAgICAgICBjYXNlICJxcSI6CiAgICAgICAgICAgIHJldHVybiBpbnRVbml0KHR3byk7CiAgICAgICAgICBjYXNlICJzIjoKICAgICAgICAgICAgcmV0dXJuIGludFVuaXQob25lT3JUd28pOwogICAgICAgICAgY2FzZSAic3MiOgogICAgICAgICAgICByZXR1cm4gaW50VW5pdCh0d28pOwogICAgICAgICAgY2FzZSAiUyI6CiAgICAgICAgICAgIHJldHVybiBpbnRVbml0KG9uZVRvVGhyZWUpOwogICAgICAgICAgY2FzZSAiU1NTIjoKICAgICAgICAgICAgcmV0dXJuIGludFVuaXQodGhyZWUpOwogICAgICAgICAgY2FzZSAidSI6CiAgICAgICAgICAgIHJldHVybiBzaW1wbGUob25lVG9OaW5lKTsKICAgICAgICAgIGNhc2UgInV1IjoKICAgICAgICAgICAgcmV0dXJuIHNpbXBsZShvbmVPclR3byk7CiAgICAgICAgICBjYXNlICJ1dXUiOgogICAgICAgICAgICByZXR1cm4gaW50VW5pdChvbmUpOwogICAgICAgICAgLy8gbWVyaWRpZW0KICAgICAgICAgIGNhc2UgImEiOgogICAgICAgICAgICByZXR1cm4gb25lT2YobG9jLm1lcmlkaWVtcygpLCAwKTsKICAgICAgICAgIC8vIHdlZWtZZWFyIChrKQogICAgICAgICAgY2FzZSAia2trayI6CiAgICAgICAgICAgIHJldHVybiBpbnRVbml0KGZvdXIpOwogICAgICAgICAgY2FzZSAia2siOgogICAgICAgICAgICByZXR1cm4gaW50VW5pdCh0d29Ub0ZvdXIsIHVudHJ1bmNhdGVZZWFyKTsKICAgICAgICAgIC8vIHdlZWtOdW1iZXIgKFcpCiAgICAgICAgICBjYXNlICJXIjoKICAgICAgICAgICAgcmV0dXJuIGludFVuaXQob25lT3JUd28pOwogICAgICAgICAgY2FzZSAiV1ciOgogICAgICAgICAgICByZXR1cm4gaW50VW5pdCh0d28pOwogICAgICAgICAgLy8gd2Vla2RheXMKICAgICAgICAgIGNhc2UgIkUiOgogICAgICAgICAgY2FzZSAiYyI6CiAgICAgICAgICAgIHJldHVybiBpbnRVbml0KG9uZSk7CiAgICAgICAgICBjYXNlICJFRUUiOgogICAgICAgICAgICByZXR1cm4gb25lT2YobG9jLndlZWtkYXlzKCJzaG9ydCIsIGZhbHNlLCBmYWxzZSksIDEpOwogICAgICAgICAgY2FzZSAiRUVFRSI6CiAgICAgICAgICAgIHJldHVybiBvbmVPZihsb2Mud2Vla2RheXMoImxvbmciLCBmYWxzZSwgZmFsc2UpLCAxKTsKICAgICAgICAgIGNhc2UgImNjYyI6CiAgICAgICAgICAgIHJldHVybiBvbmVPZihsb2Mud2Vla2RheXMoInNob3J0IiwgdHJ1ZSwgZmFsc2UpLCAxKTsKICAgICAgICAgIGNhc2UgImNjY2MiOgogICAgICAgICAgICByZXR1cm4gb25lT2YobG9jLndlZWtkYXlzKCJsb25nIiwgdHJ1ZSwgZmFsc2UpLCAxKTsKICAgICAgICAgIC8vIG9mZnNldC96b25lCiAgICAgICAgICBjYXNlICJaIjoKICAgICAgICAgIGNhc2UgIlpaIjoKICAgICAgICAgICAgcmV0dXJuIG9mZnNldChuZXcgUmVnRXhwKGAoWystXSR7b25lT3JUd28uc291cmNlfSkoPzo6KCR7dHdvLnNvdXJjZX0pKT9gKSwgMik7CiAgICAgICAgICBjYXNlICJaWloiOgogICAgICAgICAgICByZXR1cm4gb2Zmc2V0KG5ldyBSZWdFeHAoYChbKy1dJHtvbmVPclR3by5zb3VyY2V9KSgke3R3by5zb3VyY2V9KT9gKSwgMik7CiAgICAgICAgICAvLyB3ZSBkb24ndCBzdXBwb3J0IFpaWlogKFBTVCkgb3IgWlpaWlogKFBhY2lmaWMgU3RhbmRhcmQgVGltZSkgaW4gcGFyc2luZwogICAgICAgICAgLy8gYmVjYXVzZSB3ZSBkb24ndCBoYXZlIGFueSB3YXkgdG8gZmlndXJlIG91dCB3aGF0IHRoZXkgYXJlCiAgICAgICAgICBjYXNlICJ6IjoKICAgICAgICAgICAgcmV0dXJuIHNpbXBsZSgvW2Etel8rLS9dezEsMjU2fT8vaSk7CiAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICByZXR1cm4gbGl0ZXJhbCh0KTsKICAgICAgICB9CiAgICAgIH07CgogICAgY29uc3QgdW5pdCA9IHVuaXRhdGUodG9rZW4pIHx8IHsKICAgICAgaW52YWxpZFJlYXNvbjogTUlTU0lOR19GVFAsCiAgICB9OwoKICAgIHVuaXQudG9rZW4gPSB0b2tlbjsKCiAgICByZXR1cm4gdW5pdDsKICB9CgogIGNvbnN0IHBhcnRUeXBlU3R5bGVUb1Rva2VuVmFsID0gewogICAgeWVhcjogewogICAgICAiMi1kaWdpdCI6ICJ5eSIsCiAgICAgIG51bWVyaWM6ICJ5eXl5eSIsCiAgICB9LAogICAgbW9udGg6IHsKICAgICAgbnVtZXJpYzogIk0iLAogICAgICAiMi1kaWdpdCI6ICJNTSIsCiAgICAgIHNob3J0OiAiTU1NIiwKICAgICAgbG9uZzogIk1NTU0iLAogICAgfSwKICAgIGRheTogewogICAgICBudW1lcmljOiAiZCIsCiAgICAgICIyLWRpZ2l0IjogImRkIiwKICAgIH0sCiAgICB3ZWVrZGF5OiB7CiAgICAgIHNob3J0OiAiRUVFIiwKICAgICAgbG9uZzogIkVFRUUiLAogICAgfSwKICAgIGRheXBlcmlvZDogImEiLAogICAgZGF5UGVyaW9kOiAiYSIsCiAgICBob3VyOiB7CiAgICAgIG51bWVyaWM6ICJoIiwKICAgICAgIjItZGlnaXQiOiAiaGgiLAogICAgfSwKICAgIG1pbnV0ZTogewogICAgICBudW1lcmljOiAibSIsCiAgICAgICIyLWRpZ2l0IjogIm1tIiwKICAgIH0sCiAgICBzZWNvbmQ6IHsKICAgICAgbnVtZXJpYzogInMiLAogICAgICAiMi1kaWdpdCI6ICJzcyIsCiAgICB9LAogICAgdGltZVpvbmVOYW1lOiB7CiAgICAgIGxvbmc6ICJaWlpaWiIsCiAgICAgIHNob3J0OiAiWlpaIiwKICAgIH0sCiAgfTsKCiAgZnVuY3Rpb24gdG9rZW5Gb3JQYXJ0KHBhcnQsIGxvY2FsZSwgZm9ybWF0T3B0cykgewogICAgY29uc3QgeyB0eXBlLCB2YWx1ZSB9ID0gcGFydDsKCiAgICBpZiAodHlwZSA9PT0gImxpdGVyYWwiKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgbGl0ZXJhbDogdHJ1ZSwKICAgICAgICB2YWw6IHZhbHVlLAogICAgICB9OwogICAgfQoKICAgIGNvbnN0IHN0eWxlID0gZm9ybWF0T3B0c1t0eXBlXTsKCiAgICBsZXQgdmFsID0gcGFydFR5cGVTdHlsZVRvVG9rZW5WYWxbdHlwZV07CiAgICBpZiAodHlwZW9mIHZhbCA9PT0gIm9iamVjdCIpIHsKICAgICAgdmFsID0gdmFsW3N0eWxlXTsKICAgIH0KCiAgICBpZiAodmFsKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgbGl0ZXJhbDogZmFsc2UsCiAgICAgICAgdmFsLAogICAgICB9OwogICAgfQoKICAgIHJldHVybiB1bmRlZmluZWQ7CiAgfQoKICBmdW5jdGlvbiBidWlsZFJlZ2V4KHVuaXRzKSB7CiAgICBjb25zdCByZSA9IHVuaXRzLm1hcCgodSkgPT4gdS5yZWdleCkucmVkdWNlKChmLCByKSA9PiBgJHtmfSgke3Iuc291cmNlfSlgLCAiIik7CiAgICByZXR1cm4gW2BeJHtyZX0kYCwgdW5pdHNdOwogIH0KCiAgZnVuY3Rpb24gbWF0Y2goaW5wdXQsIHJlZ2V4LCBoYW5kbGVycykgewogICAgY29uc3QgbWF0Y2hlcyA9IGlucHV0Lm1hdGNoKHJlZ2V4KTsKCiAgICBpZiAobWF0Y2hlcykgewogICAgICBjb25zdCBhbGwgPSB7fTsKICAgICAgbGV0IG1hdGNoSW5kZXggPSAxOwogICAgICBmb3IgKGNvbnN0IGkgaW4gaGFuZGxlcnMpIHsKICAgICAgICBpZiAoaGFzT3duUHJvcGVydHkoaGFuZGxlcnMsIGkpKSB7CiAgICAgICAgICBjb25zdCBoID0gaGFuZGxlcnNbaV0sCiAgICAgICAgICAgIGdyb3VwcyA9IGguZ3JvdXBzID8gaC5ncm91cHMgKyAxIDogMTsKICAgICAgICAgIGlmICghaC5saXRlcmFsICYmIGgudG9rZW4pIHsKICAgICAgICAgICAgYWxsW2gudG9rZW4udmFsWzBdXSA9IGguZGVzZXIobWF0Y2hlcy5zbGljZShtYXRjaEluZGV4LCBtYXRjaEluZGV4ICsgZ3JvdXBzKSk7CiAgICAgICAgICB9CiAgICAgICAgICBtYXRjaEluZGV4ICs9IGdyb3VwczsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIFttYXRjaGVzLCBhbGxdOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIFttYXRjaGVzLCB7fV07CiAgICB9CiAgfQoKICBmdW5jdGlvbiBkYXRlVGltZUZyb21NYXRjaGVzKG1hdGNoZXMpIHsKICAgIGNvbnN0IHRvRmllbGQgPSAodG9rZW4pID0+IHsKICAgICAgc3dpdGNoICh0b2tlbikgewogICAgICAgIGNhc2UgIlMiOgogICAgICAgICAgcmV0dXJuICJtaWxsaXNlY29uZCI7CiAgICAgICAgY2FzZSAicyI6CiAgICAgICAgICByZXR1cm4gInNlY29uZCI7CiAgICAgICAgY2FzZSAibSI6CiAgICAgICAgICByZXR1cm4gIm1pbnV0ZSI7CiAgICAgICAgY2FzZSAiaCI6CiAgICAgICAgY2FzZSAiSCI6CiAgICAgICAgICByZXR1cm4gImhvdXIiOwogICAgICAgIGNhc2UgImQiOgogICAgICAgICAgcmV0dXJuICJkYXkiOwogICAgICAgIGNhc2UgIm8iOgogICAgICAgICAgcmV0dXJuICJvcmRpbmFsIjsKICAgICAgICBjYXNlICJMIjoKICAgICAgICBjYXNlICJNIjoKICAgICAgICAgIHJldHVybiAibW9udGgiOwogICAgICAgIGNhc2UgInkiOgogICAgICAgICAgcmV0dXJuICJ5ZWFyIjsKICAgICAgICBjYXNlICJFIjoKICAgICAgICBjYXNlICJjIjoKICAgICAgICAgIHJldHVybiAid2Vla2RheSI7CiAgICAgICAgY2FzZSAiVyI6CiAgICAgICAgICByZXR1cm4gIndlZWtOdW1iZXIiOwogICAgICAgIGNhc2UgImsiOgogICAgICAgICAgcmV0dXJuICJ3ZWVrWWVhciI7CiAgICAgICAgY2FzZSAicSI6CiAgICAgICAgICByZXR1cm4gInF1YXJ0ZXIiOwogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQogICAgfTsKCiAgICBsZXQgem9uZSA9IG51bGw7CiAgICBsZXQgc3BlY2lmaWNPZmZzZXQ7CiAgICBpZiAoIWlzVW5kZWZpbmVkKG1hdGNoZXMueikpIHsKICAgICAgem9uZSA9IElBTkFab25lLmNyZWF0ZShtYXRjaGVzLnopOwogICAgfQoKICAgIGlmICghaXNVbmRlZmluZWQobWF0Y2hlcy5aKSkgewogICAgICBpZiAoIXpvbmUpIHsKICAgICAgICB6b25lID0gbmV3IEZpeGVkT2Zmc2V0Wm9uZShtYXRjaGVzLlopOwogICAgICB9CiAgICAgIHNwZWNpZmljT2Zmc2V0ID0gbWF0Y2hlcy5aOwogICAgfQoKICAgIGlmICghaXNVbmRlZmluZWQobWF0Y2hlcy5xKSkgewogICAgICBtYXRjaGVzLk0gPSAobWF0Y2hlcy5xIC0gMSkgKiAzICsgMTsKICAgIH0KCiAgICBpZiAoIWlzVW5kZWZpbmVkKG1hdGNoZXMuaCkpIHsKICAgICAgaWYgKG1hdGNoZXMuaCA8IDEyICYmIG1hdGNoZXMuYSA9PT0gMSkgewogICAgICAgIG1hdGNoZXMuaCArPSAxMjsKICAgICAgfSBlbHNlIGlmIChtYXRjaGVzLmggPT09IDEyICYmIG1hdGNoZXMuYSA9PT0gMCkgewogICAgICAgIG1hdGNoZXMuaCA9IDA7CiAgICAgIH0KICAgIH0KCiAgICBpZiAobWF0Y2hlcy5HID09PSAwICYmIG1hdGNoZXMueSkgewogICAgICBtYXRjaGVzLnkgPSAtbWF0Y2hlcy55OwogICAgfQoKICAgIGlmICghaXNVbmRlZmluZWQobWF0Y2hlcy51KSkgewogICAgICBtYXRjaGVzLlMgPSBwYXJzZU1pbGxpcyhtYXRjaGVzLnUpOwogICAgfQoKICAgIGNvbnN0IHZhbHMgPSBPYmplY3Qua2V5cyhtYXRjaGVzKS5yZWR1Y2UoKHIsIGspID0+IHsKICAgICAgY29uc3QgZiA9IHRvRmllbGQoayk7CiAgICAgIGlmIChmKSB7CiAgICAgICAgcltmXSA9IG1hdGNoZXNba107CiAgICAgIH0KCiAgICAgIHJldHVybiByOwogICAgfSwge30pOwoKICAgIHJldHVybiBbdmFscywgem9uZSwgc3BlY2lmaWNPZmZzZXRdOwogIH0KCiAgbGV0IGR1bW15RGF0ZVRpbWVDYWNoZSA9IG51bGw7CgogIGZ1bmN0aW9uIGdldER1bW15RGF0ZVRpbWUoKSB7CiAgICBpZiAoIWR1bW15RGF0ZVRpbWVDYWNoZSkgewogICAgICBkdW1teURhdGVUaW1lQ2FjaGUgPSBEYXRlVGltZS5mcm9tTWlsbGlzKDE1NTU1NTU1NTU1NTUpOwogICAgfQoKICAgIHJldHVybiBkdW1teURhdGVUaW1lQ2FjaGU7CiAgfQoKICBmdW5jdGlvbiBtYXliZUV4cGFuZE1hY3JvVG9rZW4odG9rZW4sIGxvY2FsZSkgewogICAgaWYgKHRva2VuLmxpdGVyYWwpIHsKICAgICAgcmV0dXJuIHRva2VuOwogICAgfQoKICAgIGNvbnN0IGZvcm1hdE9wdHMgPSBGb3JtYXR0ZXIubWFjcm9Ub2tlblRvRm9ybWF0T3B0cyh0b2tlbi52YWwpOwogICAgY29uc3QgdG9rZW5zID0gZm9ybWF0T3B0c1RvVG9rZW5zKGZvcm1hdE9wdHMsIGxvY2FsZSk7CgogICAgaWYgKHRva2VucyA9PSBudWxsIHx8IHRva2Vucy5pbmNsdWRlcyh1bmRlZmluZWQpKSB7CiAgICAgIHJldHVybiB0b2tlbjsKICAgIH0KCiAgICByZXR1cm4gdG9rZW5zOwogIH0KCiAgZnVuY3Rpb24gZXhwYW5kTWFjcm9Ub2tlbnModG9rZW5zLCBsb2NhbGUpIHsKICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUuY29uY2F0KC4uLnRva2Vucy5tYXAoKHQpID0+IG1heWJlRXhwYW5kTWFjcm9Ub2tlbih0LCBsb2NhbGUpKSk7CiAgfQoKICAvKioKICAgKiBAcHJpdmF0ZQogICAqLwoKICBmdW5jdGlvbiBleHBsYWluRnJvbVRva2Vucyhsb2NhbGUsIGlucHV0LCBmb3JtYXQpIHsKICAgIGNvbnN0IHRva2VucyA9IGV4cGFuZE1hY3JvVG9rZW5zKEZvcm1hdHRlci5wYXJzZUZvcm1hdChmb3JtYXQpLCBsb2NhbGUpLAogICAgICB1bml0cyA9IHRva2Vucy5tYXAoKHQpID0+IHVuaXRGb3JUb2tlbih0LCBsb2NhbGUpKSwKICAgICAgZGlzcXVhbGlmeWluZ1VuaXQgPSB1bml0cy5maW5kKCh0KSA9PiB0LmludmFsaWRSZWFzb24pOwoKICAgIGlmIChkaXNxdWFsaWZ5aW5nVW5pdCkgewogICAgICByZXR1cm4geyBpbnB1dCwgdG9rZW5zLCBpbnZhbGlkUmVhc29uOiBkaXNxdWFsaWZ5aW5nVW5pdC5pbnZhbGlkUmVhc29uIH07CiAgICB9IGVsc2UgewogICAgICBjb25zdCBbcmVnZXhTdHJpbmcsIGhhbmRsZXJzXSA9IGJ1aWxkUmVnZXgodW5pdHMpLAogICAgICAgIHJlZ2V4ID0gUmVnRXhwKHJlZ2V4U3RyaW5nLCAiaSIpLAogICAgICAgIFtyYXdNYXRjaGVzLCBtYXRjaGVzXSA9IG1hdGNoKGlucHV0LCByZWdleCwgaGFuZGxlcnMpLAogICAgICAgIFtyZXN1bHQsIHpvbmUsIHNwZWNpZmljT2Zmc2V0XSA9IG1hdGNoZXMKICAgICAgICAgID8gZGF0ZVRpbWVGcm9tTWF0Y2hlcyhtYXRjaGVzKQogICAgICAgICAgOiBbbnVsbCwgbnVsbCwgdW5kZWZpbmVkXTsKICAgICAgaWYgKGhhc093blByb3BlcnR5KG1hdGNoZXMsICJhIikgJiYgaGFzT3duUHJvcGVydHkobWF0Y2hlcywgIkgiKSkgewogICAgICAgIHRocm93IG5ldyBDb25mbGljdGluZ1NwZWNpZmljYXRpb25FcnJvcigKICAgICAgICAgICJDYW4ndCBpbmNsdWRlIG1lcmlkaWVtIHdoZW4gc3BlY2lmeWluZyAyNC1ob3VyIGZvcm1hdCIKICAgICAgICApOwogICAgICB9CiAgICAgIHJldHVybiB7IGlucHV0LCB0b2tlbnMsIHJlZ2V4LCByYXdNYXRjaGVzLCBtYXRjaGVzLCByZXN1bHQsIHpvbmUsIHNwZWNpZmljT2Zmc2V0IH07CiAgICB9CiAgfQoKICBmdW5jdGlvbiBwYXJzZUZyb21Ub2tlbnMobG9jYWxlLCBpbnB1dCwgZm9ybWF0KSB7CiAgICBjb25zdCB7IHJlc3VsdCwgem9uZSwgc3BlY2lmaWNPZmZzZXQsIGludmFsaWRSZWFzb24gfSA9IGV4cGxhaW5Gcm9tVG9rZW5zKGxvY2FsZSwgaW5wdXQsIGZvcm1hdCk7CiAgICByZXR1cm4gW3Jlc3VsdCwgem9uZSwgc3BlY2lmaWNPZmZzZXQsIGludmFsaWRSZWFzb25dOwogIH0KCiAgZnVuY3Rpb24gZm9ybWF0T3B0c1RvVG9rZW5zKGZvcm1hdE9wdHMsIGxvY2FsZSkgewogICAgaWYgKCFmb3JtYXRPcHRzKSB7CiAgICAgIHJldHVybiBudWxsOwogICAgfQoKICAgIGNvbnN0IGZvcm1hdHRlciA9IEZvcm1hdHRlci5jcmVhdGUobG9jYWxlLCBmb3JtYXRPcHRzKTsKICAgIGNvbnN0IHBhcnRzID0gZm9ybWF0dGVyLmZvcm1hdERhdGVUaW1lUGFydHMoZ2V0RHVtbXlEYXRlVGltZSgpKTsKICAgIHJldHVybiBwYXJ0cy5tYXAoKHApID0+IHRva2VuRm9yUGFydChwLCBsb2NhbGUsIGZvcm1hdE9wdHMpKTsKICB9CgogIGNvbnN0IG5vbkxlYXBMYWRkZXIgPSBbMCwgMzEsIDU5LCA5MCwgMTIwLCAxNTEsIDE4MSwgMjEyLCAyNDMsIDI3MywgMzA0LCAzMzRdLAogICAgbGVhcExhZGRlciA9IFswLCAzMSwgNjAsIDkxLCAxMjEsIDE1MiwgMTgyLCAyMTMsIDI0NCwgMjc0LCAzMDUsIDMzNV07CgogIGZ1bmN0aW9uIHVuaXRPdXRPZlJhbmdlKHVuaXQsIHZhbHVlKSB7CiAgICByZXR1cm4gbmV3IEludmFsaWQoCiAgICAgICJ1bml0IG91dCBvZiByYW5nZSIsCiAgICAgIGB5b3Ugc3BlY2lmaWVkICR7dmFsdWV9IChvZiB0eXBlICR7dHlwZW9mIHZhbHVlfSkgYXMgYSAke3VuaXR9LCB3aGljaCBpcyBpbnZhbGlkYAogICAgKTsKICB9CgogIGZ1bmN0aW9uIGRheU9mV2Vlayh5ZWFyLCBtb250aCwgZGF5KSB7CiAgICBjb25zdCBkID0gbmV3IERhdGUoRGF0ZS5VVEMoeWVhciwgbW9udGggLSAxLCBkYXkpKTsKCiAgICBpZiAoeWVhciA8IDEwMCAmJiB5ZWFyID49IDApIHsKICAgICAgZC5zZXRVVENGdWxsWWVhcihkLmdldFVUQ0Z1bGxZZWFyKCkgLSAxOTAwKTsKICAgIH0KCiAgICBjb25zdCBqcyA9IGQuZ2V0VVRDRGF5KCk7CgogICAgcmV0dXJuIGpzID09PSAwID8gNyA6IGpzOwogIH0KCiAgZnVuY3Rpb24gY29tcHV0ZU9yZGluYWwoeWVhciwgbW9udGgsIGRheSkgewogICAgcmV0dXJuIGRheSArIChpc0xlYXBZZWFyKHllYXIpID8gbGVhcExhZGRlciA6IG5vbkxlYXBMYWRkZXIpW21vbnRoIC0gMV07CiAgfQoKICBmdW5jdGlvbiB1bmNvbXB1dGVPcmRpbmFsKHllYXIsIG9yZGluYWwpIHsKICAgIGNvbnN0IHRhYmxlID0gaXNMZWFwWWVhcih5ZWFyKSA/IGxlYXBMYWRkZXIgOiBub25MZWFwTGFkZGVyLAogICAgICBtb250aDAgPSB0YWJsZS5maW5kSW5kZXgoKGkpID0+IGkgPCBvcmRpbmFsKSwKICAgICAgZGF5ID0gb3JkaW5hbCAtIHRhYmxlW21vbnRoMF07CiAgICByZXR1cm4geyBtb250aDogbW9udGgwICsgMSwgZGF5IH07CiAgfQoKICAvKioKICAgKiBAcHJpdmF0ZQogICAqLwoKICBmdW5jdGlvbiBncmVnb3JpYW5Ub1dlZWsoZ3JlZ09iaikgewogICAgY29uc3QgeyB5ZWFyLCBtb250aCwgZGF5IH0gPSBncmVnT2JqLAogICAgICBvcmRpbmFsID0gY29tcHV0ZU9yZGluYWwoeWVhciwgbW9udGgsIGRheSksCiAgICAgIHdlZWtkYXkgPSBkYXlPZldlZWsoeWVhciwgbW9udGgsIGRheSk7CgogICAgbGV0IHdlZWtOdW1iZXIgPSBNYXRoLmZsb29yKChvcmRpbmFsIC0gd2Vla2RheSArIDEwKSAvIDcpLAogICAgICB3ZWVrWWVhcjsKCiAgICBpZiAod2Vla051bWJlciA8IDEpIHsKICAgICAgd2Vla1llYXIgPSB5ZWFyIC0gMTsKICAgICAgd2Vla051bWJlciA9IHdlZWtzSW5XZWVrWWVhcih3ZWVrWWVhcik7CiAgICB9IGVsc2UgaWYgKHdlZWtOdW1iZXIgPiB3ZWVrc0luV2Vla1llYXIoeWVhcikpIHsKICAgICAgd2Vla1llYXIgPSB5ZWFyICsgMTsKICAgICAgd2Vla051bWJlciA9IDE7CiAgICB9IGVsc2UgewogICAgICB3ZWVrWWVhciA9IHllYXI7CiAgICB9CgogICAgcmV0dXJuIHsgd2Vla1llYXIsIHdlZWtOdW1iZXIsIHdlZWtkYXksIC4uLnRpbWVPYmplY3QoZ3JlZ09iaikgfTsKICB9CgogIGZ1bmN0aW9uIHdlZWtUb0dyZWdvcmlhbih3ZWVrRGF0YSkgewogICAgY29uc3QgeyB3ZWVrWWVhciwgd2Vla051bWJlciwgd2Vla2RheSB9ID0gd2Vla0RhdGEsCiAgICAgIHdlZWtkYXlPZkphbjQgPSBkYXlPZldlZWsod2Vla1llYXIsIDEsIDQpLAogICAgICB5ZWFySW5EYXlzID0gZGF5c0luWWVhcih3ZWVrWWVhcik7CgogICAgbGV0IG9yZGluYWwgPSB3ZWVrTnVtYmVyICogNyArIHdlZWtkYXkgLSB3ZWVrZGF5T2ZKYW40IC0gMywKICAgICAgeWVhcjsKCiAgICBpZiAob3JkaW5hbCA8IDEpIHsKICAgICAgeWVhciA9IHdlZWtZZWFyIC0gMTsKICAgICAgb3JkaW5hbCArPSBkYXlzSW5ZZWFyKHllYXIpOwogICAgfSBlbHNlIGlmIChvcmRpbmFsID4geWVhckluRGF5cykgewogICAgICB5ZWFyID0gd2Vla1llYXIgKyAxOwogICAgICBvcmRpbmFsIC09IGRheXNJblllYXIod2Vla1llYXIpOwogICAgfSBlbHNlIHsKICAgICAgeWVhciA9IHdlZWtZZWFyOwogICAgfQoKICAgIGNvbnN0IHsgbW9udGgsIGRheSB9ID0gdW5jb21wdXRlT3JkaW5hbCh5ZWFyLCBvcmRpbmFsKTsKICAgIHJldHVybiB7IHllYXIsIG1vbnRoLCBkYXksIC4uLnRpbWVPYmplY3Qod2Vla0RhdGEpIH07CiAgfQoKICBmdW5jdGlvbiBncmVnb3JpYW5Ub09yZGluYWwoZ3JlZ0RhdGEpIHsKICAgIGNvbnN0IHsgeWVhciwgbW9udGgsIGRheSB9ID0gZ3JlZ0RhdGE7CiAgICBjb25zdCBvcmRpbmFsID0gY29tcHV0ZU9yZGluYWwoeWVhciwgbW9udGgsIGRheSk7CiAgICByZXR1cm4geyB5ZWFyLCBvcmRpbmFsLCAuLi50aW1lT2JqZWN0KGdyZWdEYXRhKSB9OwogIH0KCiAgZnVuY3Rpb24gb3JkaW5hbFRvR3JlZ29yaWFuKG9yZGluYWxEYXRhKSB7CiAgICBjb25zdCB7IHllYXIsIG9yZGluYWwgfSA9IG9yZGluYWxEYXRhOwogICAgY29uc3QgeyBtb250aCwgZGF5IH0gPSB1bmNvbXB1dGVPcmRpbmFsKHllYXIsIG9yZGluYWwpOwogICAgcmV0dXJuIHsgeWVhciwgbW9udGgsIGRheSwgLi4udGltZU9iamVjdChvcmRpbmFsRGF0YSkgfTsKICB9CgogIGZ1bmN0aW9uIGhhc0ludmFsaWRXZWVrRGF0YShvYmopIHsKICAgIGNvbnN0IHZhbGlkWWVhciA9IGlzSW50ZWdlcihvYmoud2Vla1llYXIpLAogICAgICB2YWxpZFdlZWsgPSBpbnRlZ2VyQmV0d2VlbihvYmoud2Vla051bWJlciwgMSwgd2Vla3NJbldlZWtZZWFyKG9iai53ZWVrWWVhcikpLAogICAgICB2YWxpZFdlZWtkYXkgPSBpbnRlZ2VyQmV0d2VlbihvYmoud2Vla2RheSwgMSwgNyk7CgogICAgaWYgKCF2YWxpZFllYXIpIHsKICAgICAgcmV0dXJuIHVuaXRPdXRPZlJhbmdlKCJ3ZWVrWWVhciIsIG9iai53ZWVrWWVhcik7CiAgICB9IGVsc2UgaWYgKCF2YWxpZFdlZWspIHsKICAgICAgcmV0dXJuIHVuaXRPdXRPZlJhbmdlKCJ3ZWVrIiwgb2JqLndlZWspOwogICAgfSBlbHNlIGlmICghdmFsaWRXZWVrZGF5KSB7CiAgICAgIHJldHVybiB1bml0T3V0T2ZSYW5nZSgid2Vla2RheSIsIG9iai53ZWVrZGF5KTsKICAgIH0gZWxzZSByZXR1cm4gZmFsc2U7CiAgfQoKICBmdW5jdGlvbiBoYXNJbnZhbGlkT3JkaW5hbERhdGEob2JqKSB7CiAgICBjb25zdCB2YWxpZFllYXIgPSBpc0ludGVnZXIob2JqLnllYXIpLAogICAgICB2YWxpZE9yZGluYWwgPSBpbnRlZ2VyQmV0d2VlbihvYmoub3JkaW5hbCwgMSwgZGF5c0luWWVhcihvYmoueWVhcikpOwoKICAgIGlmICghdmFsaWRZZWFyKSB7CiAgICAgIHJldHVybiB1bml0T3V0T2ZSYW5nZSgieWVhciIsIG9iai55ZWFyKTsKICAgIH0gZWxzZSBpZiAoIXZhbGlkT3JkaW5hbCkgewogICAgICByZXR1cm4gdW5pdE91dE9mUmFuZ2UoIm9yZGluYWwiLCBvYmoub3JkaW5hbCk7CiAgICB9IGVsc2UgcmV0dXJuIGZhbHNlOwogIH0KCiAgZnVuY3Rpb24gaGFzSW52YWxpZEdyZWdvcmlhbkRhdGEob2JqKSB7CiAgICBjb25zdCB2YWxpZFllYXIgPSBpc0ludGVnZXIob2JqLnllYXIpLAogICAgICB2YWxpZE1vbnRoID0gaW50ZWdlckJldHdlZW4ob2JqLm1vbnRoLCAxLCAxMiksCiAgICAgIHZhbGlkRGF5ID0gaW50ZWdlckJldHdlZW4ob2JqLmRheSwgMSwgZGF5c0luTW9udGgob2JqLnllYXIsIG9iai5tb250aCkpOwoKICAgIGlmICghdmFsaWRZZWFyKSB7CiAgICAgIHJldHVybiB1bml0T3V0T2ZSYW5nZSgieWVhciIsIG9iai55ZWFyKTsKICAgIH0gZWxzZSBpZiAoIXZhbGlkTW9udGgpIHsKICAgICAgcmV0dXJuIHVuaXRPdXRPZlJhbmdlKCJtb250aCIsIG9iai5tb250aCk7CiAgICB9IGVsc2UgaWYgKCF2YWxpZERheSkgewogICAgICByZXR1cm4gdW5pdE91dE9mUmFuZ2UoImRheSIsIG9iai5kYXkpOwogICAgfSBlbHNlIHJldHVybiBmYWxzZTsKICB9CgogIGZ1bmN0aW9uIGhhc0ludmFsaWRUaW1lRGF0YShvYmopIHsKICAgIGNvbnN0IHsgaG91ciwgbWludXRlLCBzZWNvbmQsIG1pbGxpc2Vjb25kIH0gPSBvYmo7CiAgICBjb25zdCB2YWxpZEhvdXIgPQogICAgICAgIGludGVnZXJCZXR3ZWVuKGhvdXIsIDAsIDIzKSB8fAogICAgICAgIChob3VyID09PSAyNCAmJiBtaW51dGUgPT09IDAgJiYgc2Vjb25kID09PSAwICYmIG1pbGxpc2Vjb25kID09PSAwKSwKICAgICAgdmFsaWRNaW51dGUgPSBpbnRlZ2VyQmV0d2VlbihtaW51dGUsIDAsIDU5KSwKICAgICAgdmFsaWRTZWNvbmQgPSBpbnRlZ2VyQmV0d2VlbihzZWNvbmQsIDAsIDU5KSwKICAgICAgdmFsaWRNaWxsaXNlY29uZCA9IGludGVnZXJCZXR3ZWVuKG1pbGxpc2Vjb25kLCAwLCA5OTkpOwoKICAgIGlmICghdmFsaWRIb3VyKSB7CiAgICAgIHJldHVybiB1bml0T3V0T2ZSYW5nZSgiaG91ciIsIGhvdXIpOwogICAgfSBlbHNlIGlmICghdmFsaWRNaW51dGUpIHsKICAgICAgcmV0dXJuIHVuaXRPdXRPZlJhbmdlKCJtaW51dGUiLCBtaW51dGUpOwogICAgfSBlbHNlIGlmICghdmFsaWRTZWNvbmQpIHsKICAgICAgcmV0dXJuIHVuaXRPdXRPZlJhbmdlKCJzZWNvbmQiLCBzZWNvbmQpOwogICAgfSBlbHNlIGlmICghdmFsaWRNaWxsaXNlY29uZCkgewogICAgICByZXR1cm4gdW5pdE91dE9mUmFuZ2UoIm1pbGxpc2Vjb25kIiwgbWlsbGlzZWNvbmQpOwogICAgfSBlbHNlIHJldHVybiBmYWxzZTsKICB9CgogIGNvbnN0IElOVkFMSUQkMSA9ICJJbnZhbGlkIERhdGVUaW1lIjsKICBjb25zdCBNQVhfREFURSA9IDguNjRlMTU7CgogIGZ1bmN0aW9uIHVuc3VwcG9ydGVkWm9uZSh6b25lKSB7CiAgICByZXR1cm4gbmV3IEludmFsaWQoInVuc3VwcG9ydGVkIHpvbmUiLCBgdGhlIHpvbmUgIiR7em9uZS5uYW1lfSIgaXMgbm90IHN1cHBvcnRlZGApOwogIH0KCiAgLy8gd2UgY2FjaGUgd2VlayBkYXRhIG9uIHRoZSBEVCBvYmplY3QgYW5kIHRoaXMgaW50ZXJtZWRpYXRlcyB0aGUgY2FjaGUKICBmdW5jdGlvbiBwb3NzaWJseUNhY2hlZFdlZWtEYXRhKGR0KSB7CiAgICBpZiAoZHQud2Vla0RhdGEgPT09IG51bGwpIHsKICAgICAgZHQud2Vla0RhdGEgPSBncmVnb3JpYW5Ub1dlZWsoZHQuYyk7CiAgICB9CiAgICByZXR1cm4gZHQud2Vla0RhdGE7CiAgfQoKICAvLyBjbG9uZSByZWFsbHkgbWVhbnMsICJtYWtlIGEgbmV3IG9iamVjdCB3aXRoIHRoZXNlIG1vZGlmaWNhdGlvbnMiLiBhbGwgInNldHRlcnMiIHJlYWxseSB1c2UgdGhpcwogIC8vIHRvIGNyZWF0ZSBhIG5ldyBvYmplY3Qgd2hpbGUgb25seSBjaGFuZ2luZyBzb21lIG9mIHRoZSBwcm9wZXJ0aWVzCiAgZnVuY3Rpb24gY2xvbmUkMShpbnN0LCBhbHRzKSB7CiAgICBjb25zdCBjdXJyZW50ID0gewogICAgICB0czogaW5zdC50cywKICAgICAgem9uZTogaW5zdC56b25lLAogICAgICBjOiBpbnN0LmMsCiAgICAgIG86IGluc3QubywKICAgICAgbG9jOiBpbnN0LmxvYywKICAgICAgaW52YWxpZDogaW5zdC5pbnZhbGlkLAogICAgfTsKICAgIHJldHVybiBuZXcgRGF0ZVRpbWUoeyAuLi5jdXJyZW50LCAuLi5hbHRzLCBvbGQ6IGN1cnJlbnQgfSk7CiAgfQoKICAvLyBmaW5kIHRoZSByaWdodCBvZmZzZXQgYSBnaXZlbiBsb2NhbCB0aW1lLiBUaGUgbyBpbnB1dCBpcyBvdXIgZ3Vlc3MsIHdoaWNoIGRldGVybWluZXMgd2hpY2gKICAvLyBvZmZzZXQgd2UnbGwgcGljayBpbiBhbWJpZ3VvdXMgY2FzZXMgKGUuZy4gdGhlcmUgYXJlIHR3byAzIEFNcyBiL2MgRmFsbGJhY2sgRFNUKQogIGZ1bmN0aW9uIGZpeE9mZnNldChsb2NhbFRTLCBvLCB0eikgewogICAgLy8gT3VyIFVUQyB0aW1lIGlzIGp1c3QgYSBndWVzcyBiZWNhdXNlIG91ciBvZmZzZXQgaXMganVzdCBhIGd1ZXNzCiAgICBsZXQgdXRjR3Vlc3MgPSBsb2NhbFRTIC0gbyAqIDYwICogMTAwMDsKCiAgICAvLyBUZXN0IHdoZXRoZXIgdGhlIHpvbmUgbWF0Y2hlcyB0aGUgb2Zmc2V0IGZvciB0aGlzIHRzCiAgICBjb25zdCBvMiA9IHR6Lm9mZnNldCh1dGNHdWVzcyk7CgogICAgLy8gSWYgc28sIG9mZnNldCBkaWRuJ3QgY2hhbmdlIGFuZCB3ZSdyZSBkb25lCiAgICBpZiAobyA9PT0gbzIpIHsKICAgICAgcmV0dXJuIFt1dGNHdWVzcywgb107CiAgICB9CgogICAgLy8gSWYgbm90LCBjaGFuZ2UgdGhlIHRzIGJ5IHRoZSBkaWZmZXJlbmNlIGluIHRoZSBvZmZzZXQKICAgIHV0Y0d1ZXNzIC09IChvMiAtIG8pICogNjAgKiAxMDAwOwoKICAgIC8vIElmIHRoYXQgZ2l2ZXMgdXMgdGhlIGxvY2FsIHRpbWUgd2Ugd2FudCwgd2UncmUgZG9uZQogICAgY29uc3QgbzMgPSB0ei5vZmZzZXQodXRjR3Vlc3MpOwogICAgaWYgKG8yID09PSBvMykgewogICAgICByZXR1cm4gW3V0Y0d1ZXNzLCBvMl07CiAgICB9CgogICAgLy8gSWYgaXQncyBkaWZmZXJlbnQsIHdlJ3JlIGluIGEgaG9sZSB0aW1lLiBUaGUgb2Zmc2V0IGhhcyBjaGFuZ2VkLCBidXQgdGhlIHdlIGRvbid0IGFkanVzdCB0aGUgdGltZQogICAgcmV0dXJuIFtsb2NhbFRTIC0gTWF0aC5taW4obzIsIG8zKSAqIDYwICogMTAwMCwgTWF0aC5tYXgobzIsIG8zKV07CiAgfQoKICAvLyBjb252ZXJ0IGFuIGVwb2NoIHRpbWVzdGFtcCBpbnRvIGEgY2FsZW5kYXIgb2JqZWN0IHdpdGggdGhlIGdpdmVuIG9mZnNldAogIGZ1bmN0aW9uIHRzVG9PYmoodHMsIG9mZnNldCkgewogICAgdHMgKz0gb2Zmc2V0ICogNjAgKiAxMDAwOwoKICAgIGNvbnN0IGQgPSBuZXcgRGF0ZSh0cyk7CgogICAgcmV0dXJuIHsKICAgICAgeWVhcjogZC5nZXRVVENGdWxsWWVhcigpLAogICAgICBtb250aDogZC5nZXRVVENNb250aCgpICsgMSwKICAgICAgZGF5OiBkLmdldFVUQ0RhdGUoKSwKICAgICAgaG91cjogZC5nZXRVVENIb3VycygpLAogICAgICBtaW51dGU6IGQuZ2V0VVRDTWludXRlcygpLAogICAgICBzZWNvbmQ6IGQuZ2V0VVRDU2Vjb25kcygpLAogICAgICBtaWxsaXNlY29uZDogZC5nZXRVVENNaWxsaXNlY29uZHMoKSwKICAgIH07CiAgfQoKICAvLyBjb252ZXJ0IGEgY2FsZW5kYXIgb2JqZWN0IHRvIGEgZXBvY2ggdGltZXN0YW1wCiAgZnVuY3Rpb24gb2JqVG9UUyhvYmosIG9mZnNldCwgem9uZSkgewogICAgcmV0dXJuIGZpeE9mZnNldChvYmpUb0xvY2FsVFMob2JqKSwgb2Zmc2V0LCB6b25lKTsKICB9CgogIC8vIGNyZWF0ZSBhIG5ldyBEVCBpbnN0YW5jZSBieSBhZGRpbmcgYSBkdXJhdGlvbiwgYWRqdXN0aW5nIGZvciBEU1RzCiAgZnVuY3Rpb24gYWRqdXN0VGltZShpbnN0LCBkdXIpIHsKICAgIGNvbnN0IG9QcmUgPSBpbnN0Lm8sCiAgICAgIHllYXIgPSBpbnN0LmMueWVhciArIE1hdGgudHJ1bmMoZHVyLnllYXJzKSwKICAgICAgbW9udGggPSBpbnN0LmMubW9udGggKyBNYXRoLnRydW5jKGR1ci5tb250aHMpICsgTWF0aC50cnVuYyhkdXIucXVhcnRlcnMpICogMywKICAgICAgYyA9IHsKICAgICAgICAuLi5pbnN0LmMsCiAgICAgICAgeWVhciwKICAgICAgICBtb250aCwKICAgICAgICBkYXk6CiAgICAgICAgICBNYXRoLm1pbihpbnN0LmMuZGF5LCBkYXlzSW5Nb250aCh5ZWFyLCBtb250aCkpICsKICAgICAgICAgIE1hdGgudHJ1bmMoZHVyLmRheXMpICsKICAgICAgICAgIE1hdGgudHJ1bmMoZHVyLndlZWtzKSAqIDcsCiAgICAgIH0sCiAgICAgIG1pbGxpc1RvQWRkID0gRHVyYXRpb24uZnJvbU9iamVjdCh7CiAgICAgICAgeWVhcnM6IGR1ci55ZWFycyAtIE1hdGgudHJ1bmMoZHVyLnllYXJzKSwKICAgICAgICBxdWFydGVyczogZHVyLnF1YXJ0ZXJzIC0gTWF0aC50cnVuYyhkdXIucXVhcnRlcnMpLAogICAgICAgIG1vbnRoczogZHVyLm1vbnRocyAtIE1hdGgudHJ1bmMoZHVyLm1vbnRocyksCiAgICAgICAgd2Vla3M6IGR1ci53ZWVrcyAtIE1hdGgudHJ1bmMoZHVyLndlZWtzKSwKICAgICAgICBkYXlzOiBkdXIuZGF5cyAtIE1hdGgudHJ1bmMoZHVyLmRheXMpLAogICAgICAgIGhvdXJzOiBkdXIuaG91cnMsCiAgICAgICAgbWludXRlczogZHVyLm1pbnV0ZXMsCiAgICAgICAgc2Vjb25kczogZHVyLnNlY29uZHMsCiAgICAgICAgbWlsbGlzZWNvbmRzOiBkdXIubWlsbGlzZWNvbmRzLAogICAgICB9KS5hcygibWlsbGlzZWNvbmRzIiksCiAgICAgIGxvY2FsVFMgPSBvYmpUb0xvY2FsVFMoYyk7CgogICAgbGV0IFt0cywgb10gPSBmaXhPZmZzZXQobG9jYWxUUywgb1ByZSwgaW5zdC56b25lKTsKCiAgICBpZiAobWlsbGlzVG9BZGQgIT09IDApIHsKICAgICAgdHMgKz0gbWlsbGlzVG9BZGQ7CiAgICAgIC8vIHRoYXQgY291bGQgaGF2ZSBjaGFuZ2VkIHRoZSBvZmZzZXQgYnkgZ29pbmcgb3ZlciBhIERTVCwgYnV0IHdlIHdhbnQgdG8ga2VlcCB0aGUgdHMgdGhlIHNhbWUKICAgICAgbyA9IGluc3Quem9uZS5vZmZzZXQodHMpOwogICAgfQoKICAgIHJldHVybiB7IHRzLCBvIH07CiAgfQoKICAvLyBoZWxwZXIgdXNlZnVsIGluIHR1cm5pbmcgdGhlIHJlc3VsdHMgb2YgcGFyc2luZyBpbnRvIHJlYWwgZGF0ZXMKICAvLyBieSBoYW5kbGluZyB0aGUgem9uZSBvcHRpb25zCiAgZnVuY3Rpb24gcGFyc2VEYXRhVG9EYXRlVGltZShwYXJzZWQsIHBhcnNlZFpvbmUsIG9wdHMsIGZvcm1hdCwgdGV4dCwgc3BlY2lmaWNPZmZzZXQpIHsKICAgIGNvbnN0IHsgc2V0Wm9uZSwgem9uZSB9ID0gb3B0czsKICAgIGlmIChwYXJzZWQgJiYgT2JqZWN0LmtleXMocGFyc2VkKS5sZW5ndGggIT09IDApIHsKICAgICAgY29uc3QgaW50ZXJwcmV0YXRpb25ab25lID0gcGFyc2VkWm9uZSB8fCB6b25lLAogICAgICAgIGluc3QgPSBEYXRlVGltZS5mcm9tT2JqZWN0KHBhcnNlZCwgewogICAgICAgICAgLi4ub3B0cywKICAgICAgICAgIHpvbmU6IGludGVycHJldGF0aW9uWm9uZSwKICAgICAgICAgIHNwZWNpZmljT2Zmc2V0LAogICAgICAgIH0pOwogICAgICByZXR1cm4gc2V0Wm9uZSA/IGluc3QgOiBpbnN0LnNldFpvbmUoem9uZSk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gRGF0ZVRpbWUuaW52YWxpZCgKICAgICAgICBuZXcgSW52YWxpZCgidW5wYXJzYWJsZSIsIGB0aGUgaW5wdXQgIiR7dGV4dH0iIGNhbid0IGJlIHBhcnNlZCBhcyAke2Zvcm1hdH1gKQogICAgICApOwogICAgfQogIH0KCiAgLy8gaWYgeW91IHdhbnQgdG8gb3V0cHV0IGEgdGVjaG5pY2FsIGZvcm1hdCAoZS5nLiBSRkMgMjgyMiksIHRoaXMgaGVscGVyCiAgLy8gaGVscHMgaGFuZGxlIHRoZSBkZXRhaWxzCiAgZnVuY3Rpb24gdG9UZWNoRm9ybWF0KGR0LCBmb3JtYXQsIGFsbG93WiA9IHRydWUpIHsKICAgIHJldHVybiBkdC5pc1ZhbGlkCiAgICAgID8gRm9ybWF0dGVyLmNyZWF0ZShMb2NhbGUuY3JlYXRlKCJlbi1VUyIpLCB7CiAgICAgICAgICBhbGxvd1osCiAgICAgICAgICBmb3JjZVNpbXBsZTogdHJ1ZSwKICAgICAgICB9KS5mb3JtYXREYXRlVGltZUZyb21TdHJpbmcoZHQsIGZvcm1hdCkKICAgICAgOiBudWxsOwogIH0KCiAgZnVuY3Rpb24gdG9JU09EYXRlKG8sIGV4dGVuZGVkKSB7CiAgICBjb25zdCBsb25nRm9ybWF0ID0gby5jLnllYXIgPiA5OTk5IHx8IG8uYy55ZWFyIDwgMDsKICAgIGxldCBjID0gIiI7CiAgICBpZiAobG9uZ0Zvcm1hdCAmJiBvLmMueWVhciA+PSAwKSBjICs9ICIrIjsKICAgIGMgKz0gcGFkU3RhcnQoby5jLnllYXIsIGxvbmdGb3JtYXQgPyA2IDogNCk7CgogICAgaWYgKGV4dGVuZGVkKSB7CiAgICAgIGMgKz0gIi0iOwogICAgICBjICs9IHBhZFN0YXJ0KG8uYy5tb250aCk7CiAgICAgIGMgKz0gIi0iOwogICAgICBjICs9IHBhZFN0YXJ0KG8uYy5kYXkpOwogICAgfSBlbHNlIHsKICAgICAgYyArPSBwYWRTdGFydChvLmMubW9udGgpOwogICAgICBjICs9IHBhZFN0YXJ0KG8uYy5kYXkpOwogICAgfQogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiB0b0lTT1RpbWUoCiAgICBvLAogICAgZXh0ZW5kZWQsCiAgICBzdXBwcmVzc1NlY29uZHMsCiAgICBzdXBwcmVzc01pbGxpc2Vjb25kcywKICAgIGluY2x1ZGVPZmZzZXQsCiAgICBleHRlbmRlZFpvbmUKICApIHsKICAgIGxldCBjID0gcGFkU3RhcnQoby5jLmhvdXIpOwogICAgaWYgKGV4dGVuZGVkKSB7CiAgICAgIGMgKz0gIjoiOwogICAgICBjICs9IHBhZFN0YXJ0KG8uYy5taW51dGUpOwogICAgICBpZiAoby5jLnNlY29uZCAhPT0gMCB8fCAhc3VwcHJlc3NTZWNvbmRzKSB7CiAgICAgICAgYyArPSAiOiI7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIGMgKz0gcGFkU3RhcnQoby5jLm1pbnV0ZSk7CiAgICB9CgogICAgaWYgKG8uYy5zZWNvbmQgIT09IDAgfHwgIXN1cHByZXNzU2Vjb25kcykgewogICAgICBjICs9IHBhZFN0YXJ0KG8uYy5zZWNvbmQpOwoKICAgICAgaWYgKG8uYy5taWxsaXNlY29uZCAhPT0gMCB8fCAhc3VwcHJlc3NNaWxsaXNlY29uZHMpIHsKICAgICAgICBjICs9ICIuIjsKICAgICAgICBjICs9IHBhZFN0YXJ0KG8uYy5taWxsaXNlY29uZCwgMyk7CiAgICAgIH0KICAgIH0KCiAgICBpZiAoaW5jbHVkZU9mZnNldCkgewogICAgICBpZiAoby5pc09mZnNldEZpeGVkICYmIG8ub2Zmc2V0ID09PSAwICYmICFleHRlbmRlZFpvbmUpIHsKICAgICAgICBjICs9ICJaIjsKICAgICAgfSBlbHNlIGlmIChvLm8gPCAwKSB7CiAgICAgICAgYyArPSAiLSI7CiAgICAgICAgYyArPSBwYWRTdGFydChNYXRoLnRydW5jKC1vLm8gLyA2MCkpOwogICAgICAgIGMgKz0gIjoiOwogICAgICAgIGMgKz0gcGFkU3RhcnQoTWF0aC50cnVuYygtby5vICUgNjApKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjICs9ICIrIjsKICAgICAgICBjICs9IHBhZFN0YXJ0KE1hdGgudHJ1bmMoby5vIC8gNjApKTsKICAgICAgICBjICs9ICI6IjsKICAgICAgICBjICs9IHBhZFN0YXJ0KE1hdGgudHJ1bmMoby5vICUgNjApKTsKICAgICAgfQogICAgfQoKICAgIGlmIChleHRlbmRlZFpvbmUpIHsKICAgICAgYyArPSAiWyIgKyBvLnpvbmUuaWFuYU5hbWUgKyAiXSI7CiAgICB9CiAgICByZXR1cm4gYzsKICB9CgogIC8vIGRlZmF1bHRzIGZvciB1bnNwZWNpZmllZCB1bml0cyBpbiB0aGUgc3VwcG9ydGVkIGNhbGVuZGFycwogIGNvbnN0IGRlZmF1bHRVbml0VmFsdWVzID0gewogICAgICBtb250aDogMSwKICAgICAgZGF5OiAxLAogICAgICBob3VyOiAwLAogICAgICBtaW51dGU6IDAsCiAgICAgIHNlY29uZDogMCwKICAgICAgbWlsbGlzZWNvbmQ6IDAsCiAgICB9LAogICAgZGVmYXVsdFdlZWtVbml0VmFsdWVzID0gewogICAgICB3ZWVrTnVtYmVyOiAxLAogICAgICB3ZWVrZGF5OiAxLAogICAgICBob3VyOiAwLAogICAgICBtaW51dGU6IDAsCiAgICAgIHNlY29uZDogMCwKICAgICAgbWlsbGlzZWNvbmQ6IDAsCiAgICB9LAogICAgZGVmYXVsdE9yZGluYWxVbml0VmFsdWVzID0gewogICAgICBvcmRpbmFsOiAxLAogICAgICBob3VyOiAwLAogICAgICBtaW51dGU6IDAsCiAgICAgIHNlY29uZDogMCwKICAgICAgbWlsbGlzZWNvbmQ6IDAsCiAgICB9OwoKICAvLyBVbml0cyBpbiB0aGUgc3VwcG9ydGVkIGNhbGVuZGFycywgc29ydGVkIGJ5IGJpZ25lc3MKICBjb25zdCBvcmRlcmVkVW5pdHMgPSBbInllYXIiLCAibW9udGgiLCAiZGF5IiwgImhvdXIiLCAibWludXRlIiwgInNlY29uZCIsICJtaWxsaXNlY29uZCJdLAogICAgb3JkZXJlZFdlZWtVbml0cyA9IFsKICAgICAgIndlZWtZZWFyIiwKICAgICAgIndlZWtOdW1iZXIiLAogICAgICAid2Vla2RheSIsCiAgICAgICJob3VyIiwKICAgICAgIm1pbnV0ZSIsCiAgICAgICJzZWNvbmQiLAogICAgICAibWlsbGlzZWNvbmQiLAogICAgXSwKICAgIG9yZGVyZWRPcmRpbmFsVW5pdHMgPSBbInllYXIiLCAib3JkaW5hbCIsICJob3VyIiwgIm1pbnV0ZSIsICJzZWNvbmQiLCAibWlsbGlzZWNvbmQiXTsKCiAgLy8gc3RhbmRhcmRpemUgY2FzZSBhbmQgcGx1cmFsaXR5IGluIHVuaXRzCiAgZnVuY3Rpb24gbm9ybWFsaXplVW5pdCh1bml0KSB7CiAgICBjb25zdCBub3JtYWxpemVkID0gewogICAgICB5ZWFyOiAieWVhciIsCiAgICAgIHllYXJzOiAieWVhciIsCiAgICAgIG1vbnRoOiAibW9udGgiLAogICAgICBtb250aHM6ICJtb250aCIsCiAgICAgIGRheTogImRheSIsCiAgICAgIGRheXM6ICJkYXkiLAogICAgICBob3VyOiAiaG91ciIsCiAgICAgIGhvdXJzOiAiaG91ciIsCiAgICAgIG1pbnV0ZTogIm1pbnV0ZSIsCiAgICAgIG1pbnV0ZXM6ICJtaW51dGUiLAogICAgICBxdWFydGVyOiAicXVhcnRlciIsCiAgICAgIHF1YXJ0ZXJzOiAicXVhcnRlciIsCiAgICAgIHNlY29uZDogInNlY29uZCIsCiAgICAgIHNlY29uZHM6ICJzZWNvbmQiLAogICAgICBtaWxsaXNlY29uZDogIm1pbGxpc2Vjb25kIiwKICAgICAgbWlsbGlzZWNvbmRzOiAibWlsbGlzZWNvbmQiLAogICAgICB3ZWVrZGF5OiAid2Vla2RheSIsCiAgICAgIHdlZWtkYXlzOiAid2Vla2RheSIsCiAgICAgIHdlZWtudW1iZXI6ICJ3ZWVrTnVtYmVyIiwKICAgICAgd2Vla3NudW1iZXI6ICJ3ZWVrTnVtYmVyIiwKICAgICAgd2Vla251bWJlcnM6ICJ3ZWVrTnVtYmVyIiwKICAgICAgd2Vla3llYXI6ICJ3ZWVrWWVhciIsCiAgICAgIHdlZWt5ZWFyczogIndlZWtZZWFyIiwKICAgICAgb3JkaW5hbDogIm9yZGluYWwiLAogICAgfVt1bml0LnRvTG93ZXJDYXNlKCldOwoKICAgIGlmICghbm9ybWFsaXplZCkgdGhyb3cgbmV3IEludmFsaWRVbml0RXJyb3IodW5pdCk7CgogICAgcmV0dXJuIG5vcm1hbGl6ZWQ7CiAgfQoKICAvLyB0aGlzIGlzIGEgZHVtYmVkIGRvd24gdmVyc2lvbiBvZiBmcm9tT2JqZWN0KCkgdGhhdCBydW5zIGFib3V0IDYwJSBmYXN0ZXIKICAvLyBidXQgZG9lc24ndCBkbyBhbnkgdmFsaWRhdGlvbiwgbWFrZXMgYSBidW5jaCBvZiBhc3N1bXB0aW9ucyBhYm91dCB3aGF0IHVuaXRzCiAgLy8gYXJlIHByZXNlbnQsIGFuZCBzbyBvbi4KICBmdW5jdGlvbiBxdWlja0RUKG9iaiwgb3B0cykgewogICAgY29uc3Qgem9uZSA9IG5vcm1hbGl6ZVpvbmUob3B0cy56b25lLCBTZXR0aW5ncy5kZWZhdWx0Wm9uZSksCiAgICAgIGxvYyA9IExvY2FsZS5mcm9tT2JqZWN0KG9wdHMpLAogICAgICB0c05vdyA9IFNldHRpbmdzLm5vdygpOwoKICAgIGxldCB0cywgbzsKCiAgICAvLyBhc3N1bWUgd2UgaGF2ZSB0aGUgaGlnaGVyLW9yZGVyIHVuaXRzCiAgICBpZiAoIWlzVW5kZWZpbmVkKG9iai55ZWFyKSkgewogICAgICBmb3IgKGNvbnN0IHUgb2Ygb3JkZXJlZFVuaXRzKSB7CiAgICAgICAgaWYgKGlzVW5kZWZpbmVkKG9ialt1XSkpIHsKICAgICAgICAgIG9ialt1XSA9IGRlZmF1bHRVbml0VmFsdWVzW3VdOwogICAgICAgIH0KICAgICAgfQoKICAgICAgY29uc3QgaW52YWxpZCA9IGhhc0ludmFsaWRHcmVnb3JpYW5EYXRhKG9iaikgfHwgaGFzSW52YWxpZFRpbWVEYXRhKG9iaik7CiAgICAgIGlmIChpbnZhbGlkKSB7CiAgICAgICAgcmV0dXJuIERhdGVUaW1lLmludmFsaWQoaW52YWxpZCk7CiAgICAgIH0KCiAgICAgIGNvbnN0IG9mZnNldFByb3ZpcyA9IHpvbmUub2Zmc2V0KHRzTm93KTsKICAgICAgW3RzLCBvXSA9IG9ialRvVFMob2JqLCBvZmZzZXRQcm92aXMsIHpvbmUpOwogICAgfSBlbHNlIHsKICAgICAgdHMgPSB0c05vdzsKICAgIH0KCiAgICByZXR1cm4gbmV3IERhdGVUaW1lKHsgdHMsIHpvbmUsIGxvYywgbyB9KTsKICB9CgogIGZ1bmN0aW9uIGRpZmZSZWxhdGl2ZShzdGFydCwgZW5kLCBvcHRzKSB7CiAgICBjb25zdCByb3VuZCA9IGlzVW5kZWZpbmVkKG9wdHMucm91bmQpID8gdHJ1ZSA6IG9wdHMucm91bmQsCiAgICAgIGZvcm1hdCA9IChjLCB1bml0KSA9PiB7CiAgICAgICAgYyA9IHJvdW5kVG8oYywgcm91bmQgfHwgb3B0cy5jYWxlbmRhcnkgPyAwIDogMiwgdHJ1ZSk7CiAgICAgICAgY29uc3QgZm9ybWF0dGVyID0gZW5kLmxvYy5jbG9uZShvcHRzKS5yZWxGb3JtYXR0ZXIob3B0cyk7CiAgICAgICAgcmV0dXJuIGZvcm1hdHRlci5mb3JtYXQoYywgdW5pdCk7CiAgICAgIH0sCiAgICAgIGRpZmZlciA9ICh1bml0KSA9PiB7CiAgICAgICAgaWYgKG9wdHMuY2FsZW5kYXJ5KSB7CiAgICAgICAgICBpZiAoIWVuZC5oYXNTYW1lKHN0YXJ0LCB1bml0KSkgewogICAgICAgICAgICByZXR1cm4gZW5kLnN0YXJ0T2YodW5pdCkuZGlmZihzdGFydC5zdGFydE9mKHVuaXQpLCB1bml0KS5nZXQodW5pdCk7CiAgICAgICAgICB9IGVsc2UgcmV0dXJuIDA7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBlbmQuZGlmZihzdGFydCwgdW5pdCkuZ2V0KHVuaXQpOwogICAgICAgIH0KICAgICAgfTsKCiAgICBpZiAob3B0cy51bml0KSB7CiAgICAgIHJldHVybiBmb3JtYXQoZGlmZmVyKG9wdHMudW5pdCksIG9wdHMudW5pdCk7CiAgICB9CgogICAgZm9yIChjb25zdCB1bml0IG9mIG9wdHMudW5pdHMpIHsKICAgICAgY29uc3QgY291bnQgPSBkaWZmZXIodW5pdCk7CiAgICAgIGlmIChNYXRoLmFicyhjb3VudCkgPj0gMSkgewogICAgICAgIHJldHVybiBmb3JtYXQoY291bnQsIHVuaXQpOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gZm9ybWF0KHN0YXJ0ID4gZW5kID8gLTAgOiAwLCBvcHRzLnVuaXRzW29wdHMudW5pdHMubGVuZ3RoIC0gMV0pOwogIH0KCiAgZnVuY3Rpb24gbGFzdE9wdHMoYXJnTGlzdCkgewogICAgbGV0IG9wdHMgPSB7fSwKICAgICAgYXJnczsKICAgIGlmIChhcmdMaXN0Lmxlbmd0aCA+IDAgJiYgdHlwZW9mIGFyZ0xpc3RbYXJnTGlzdC5sZW5ndGggLSAxXSA9PT0gIm9iamVjdCIpIHsKICAgICAgb3B0cyA9IGFyZ0xpc3RbYXJnTGlzdC5sZW5ndGggLSAxXTsKICAgICAgYXJncyA9IEFycmF5LmZyb20oYXJnTGlzdCkuc2xpY2UoMCwgYXJnTGlzdC5sZW5ndGggLSAxKTsKICAgIH0gZWxzZSB7CiAgICAgIGFyZ3MgPSBBcnJheS5mcm9tKGFyZ0xpc3QpOwogICAgfQogICAgcmV0dXJuIFtvcHRzLCBhcmdzXTsKICB9CgogIC8qKgogICAqIEEgRGF0ZVRpbWUgaXMgYW4gaW1tdXRhYmxlIGRhdGEgc3RydWN0dXJlIHJlcHJlc2VudGluZyBhIHNwZWNpZmljIGRhdGUgYW5kIHRpbWUgYW5kIGFjY29tcGFueWluZyBtZXRob2RzLiBJdCBjb250YWlucyBjbGFzcyBhbmQgaW5zdGFuY2UgbWV0aG9kcyBmb3IgY3JlYXRpbmcsIHBhcnNpbmcsIGludGVycm9nYXRpbmcsIHRyYW5zZm9ybWluZywgYW5kIGZvcm1hdHRpbmcgdGhlbS4KICAgKgogICAqIEEgRGF0ZVRpbWUgY29tcHJpc2VzIG9mOgogICAqICogQSB0aW1lc3RhbXAuIEVhY2ggRGF0ZVRpbWUgaW5zdGFuY2UgcmVmZXJzIHRvIGEgc3BlY2lmaWMgbWlsbGlzZWNvbmQgb2YgdGhlIFVuaXggZXBvY2guCiAgICogKiBBIHRpbWUgem9uZS4gRWFjaCBpbnN0YW5jZSBpcyBjb25zaWRlcmVkIGluIHRoZSBjb250ZXh0IG9mIGEgc3BlY2lmaWMgem9uZSAoYnkgZGVmYXVsdCB0aGUgbG9jYWwgc3lzdGVtJ3Mgem9uZSkuCiAgICogKiBDb25maWd1cmF0aW9uIHByb3BlcnRpZXMgdGhhdCBlZmZlY3QgaG93IG91dHB1dCBzdHJpbmdzIGFyZSBmb3JtYXR0ZWQsIHN1Y2ggYXMgYGxvY2FsZWAsIGBudW1iZXJpbmdTeXN0ZW1gLCBhbmQgYG91dHB1dENhbGVuZGFyYC4KICAgKgogICAqIEhlcmUgaXMgYSBicmllZiBvdmVydmlldyBvZiB0aGUgbW9zdCBjb21tb25seSB1c2VkIGZ1bmN0aW9uYWxpdHkgaXQgcHJvdmlkZXM6CiAgICoKICAgKiAqICoqQ3JlYXRpb24qKjogVG8gY3JlYXRlIGEgRGF0ZVRpbWUgZnJvbSBpdHMgY29tcG9uZW50cywgdXNlIG9uZSBvZiBpdHMgZmFjdG9yeSBjbGFzcyBtZXRob2RzOiB7QGxpbmsgRGF0ZVRpbWUubG9jYWx9LCB7QGxpbmsgRGF0ZVRpbWUudXRjfSwgYW5kIChtb3N0IGZsZXhpYmx5KSB7QGxpbmsgRGF0ZVRpbWUuZnJvbU9iamVjdH0uIFRvIGNyZWF0ZSBvbmUgZnJvbSBhIHN0YW5kYXJkIHN0cmluZyBmb3JtYXQsIHVzZSB7QGxpbmsgRGF0ZVRpbWUuZnJvbUlTT30sIHtAbGluayBEYXRlVGltZS5mcm9tSFRUUH0sIGFuZCB7QGxpbmsgRGF0ZVRpbWUuZnJvbVJGQzI4MjJ9LiBUbyBjcmVhdGUgb25lIGZyb20gYSBjdXN0b20gc3RyaW5nIGZvcm1hdCwgdXNlIHtAbGluayBEYXRlVGltZS5mcm9tRm9ybWF0fS4gVG8gY3JlYXRlIG9uZSBmcm9tIGEgbmF0aXZlIEpTIGRhdGUsIHVzZSB7QGxpbmsgRGF0ZVRpbWUuZnJvbUpTRGF0ZX0uCiAgICogKiAqKkdyZWdvcmlhbiBjYWxlbmRhciBhbmQgdGltZSoqOiBUbyBleGFtaW5lIHRoZSBHcmVnb3JpYW4gcHJvcGVydGllcyBvZiBhIERhdGVUaW1lIGluZGl2aWR1YWxseSAoaS5lIGFzIG9wcG9zZWQgdG8gY29sbGVjdGl2ZWx5IHRocm91Z2gge0BsaW5rIERhdGVUaW1lI3RvT2JqZWN0fSksIHVzZSB0aGUge0BsaW5rIERhdGVUaW1lI3llYXJ9LCB7QGxpbmsgRGF0ZVRpbWUjbW9udGh9LAogICAqIHtAbGluayBEYXRlVGltZSNkYXl9LCB7QGxpbmsgRGF0ZVRpbWUjaG91cn0sIHtAbGluayBEYXRlVGltZSNtaW51dGV9LCB7QGxpbmsgRGF0ZVRpbWUjc2Vjb25kfSwge0BsaW5rIERhdGVUaW1lI21pbGxpc2Vjb25kfSBhY2Nlc3NvcnMuCiAgICogKiAqKldlZWsgY2FsZW5kYXIqKjogRm9yIElTTyB3ZWVrIGNhbGVuZGFyIGF0dHJpYnV0ZXMsIHNlZSB0aGUge0BsaW5rIERhdGVUaW1lI3dlZWtZZWFyfSwge0BsaW5rIERhdGVUaW1lI3dlZWtOdW1iZXJ9LCBhbmQge0BsaW5rIERhdGVUaW1lI3dlZWtkYXl9IGFjY2Vzc29ycy4KICAgKiAqICoqQ29uZmlndXJhdGlvbioqIFNlZSB0aGUge0BsaW5rIERhdGVUaW1lI2xvY2FsZX0gYW5kIHtAbGluayBEYXRlVGltZSNudW1iZXJpbmdTeXN0ZW19IGFjY2Vzc29ycy4KICAgKiAqICoqVHJhbnNmb3JtYXRpb24qKjogVG8gdHJhbnNmb3JtIHRoZSBEYXRlVGltZSBpbnRvIG90aGVyIERhdGVUaW1lcywgdXNlIHtAbGluayBEYXRlVGltZSNzZXR9LCB7QGxpbmsgRGF0ZVRpbWUjcmVjb25maWd1cmV9LCB7QGxpbmsgRGF0ZVRpbWUjc2V0Wm9uZX0sIHtAbGluayBEYXRlVGltZSNzZXRMb2NhbGV9LCB7QGxpbmsgRGF0ZVRpbWUucGx1c30sIHtAbGluayBEYXRlVGltZSNtaW51c30sIHtAbGluayBEYXRlVGltZSNlbmRPZn0sIHtAbGluayBEYXRlVGltZSNzdGFydE9mfSwge0BsaW5rIERhdGVUaW1lI3RvVVRDfSwgYW5kIHtAbGluayBEYXRlVGltZSN0b0xvY2FsfS4KICAgKiAqICoqT3V0cHV0Kio6IFRvIGNvbnZlcnQgdGhlIERhdGVUaW1lIHRvIG90aGVyIHJlcHJlc2VudGF0aW9ucywgdXNlIHRoZSB7QGxpbmsgRGF0ZVRpbWUjdG9SZWxhdGl2ZX0sIHtAbGluayBEYXRlVGltZSN0b1JlbGF0aXZlQ2FsZW5kYXJ9LCB7QGxpbmsgRGF0ZVRpbWUjdG9KU09OfSwge0BsaW5rIERhdGVUaW1lI3RvSVNPfSwge0BsaW5rIERhdGVUaW1lI3RvSFRUUH0sIHtAbGluayBEYXRlVGltZSN0b09iamVjdH0sIHtAbGluayBEYXRlVGltZSN0b1JGQzI4MjJ9LCB7QGxpbmsgRGF0ZVRpbWUjdG9TdHJpbmd9LCB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbGVTdHJpbmd9LCB7QGxpbmsgRGF0ZVRpbWUjdG9Gb3JtYXR9LCB7QGxpbmsgRGF0ZVRpbWUjdG9NaWxsaXN9IGFuZCB7QGxpbmsgRGF0ZVRpbWUjdG9KU0RhdGV9LgogICAqCiAgICogVGhlcmUncyBwbGVudHkgb3RoZXJzIGRvY3VtZW50ZWQgYmVsb3cuIEluIGFkZGl0aW9uLCBmb3IgbW9yZSBpbmZvcm1hdGlvbiBvbiBzdWJ0bGVyIHRvcGljcyBsaWtlIGludGVybmF0aW9uYWxpemF0aW9uLCB0aW1lIHpvbmVzLCBhbHRlcm5hdGl2ZSBjYWxlbmRhcnMsIHZhbGlkaXR5LCBhbmQgc28gb24sIHNlZSB0aGUgZXh0ZXJuYWwgZG9jdW1lbnRhdGlvbi4KICAgKi8KICBjbGFzcyBEYXRlVGltZSB7CiAgICAvKioKICAgICAqIEBhY2Nlc3MgcHJpdmF0ZQogICAgICovCiAgICBjb25zdHJ1Y3Rvcihjb25maWcpIHsKICAgICAgY29uc3Qgem9uZSA9IGNvbmZpZy56b25lIHx8IFNldHRpbmdzLmRlZmF1bHRab25lOwoKICAgICAgbGV0IGludmFsaWQgPQogICAgICAgIGNvbmZpZy5pbnZhbGlkIHx8CiAgICAgICAgKE51bWJlci5pc05hTihjb25maWcudHMpID8gbmV3IEludmFsaWQoImludmFsaWQgaW5wdXQiKSA6IG51bGwpIHx8CiAgICAgICAgKCF6b25lLmlzVmFsaWQgPyB1bnN1cHBvcnRlZFpvbmUoem9uZSkgOiBudWxsKTsKICAgICAgLyoqCiAgICAgICAqIEBhY2Nlc3MgcHJpdmF0ZQogICAgICAgKi8KICAgICAgdGhpcy50cyA9IGlzVW5kZWZpbmVkKGNvbmZpZy50cykgPyBTZXR0aW5ncy5ub3coKSA6IGNvbmZpZy50czsKCiAgICAgIGxldCBjID0gbnVsbCwKICAgICAgICBvID0gbnVsbDsKICAgICAgaWYgKCFpbnZhbGlkKSB7CiAgICAgICAgY29uc3QgdW5jaGFuZ2VkID0gY29uZmlnLm9sZCAmJiBjb25maWcub2xkLnRzID09PSB0aGlzLnRzICYmIGNvbmZpZy5vbGQuem9uZS5lcXVhbHMoem9uZSk7CgogICAgICAgIGlmICh1bmNoYW5nZWQpIHsKICAgICAgICAgIFtjLCBvXSA9IFtjb25maWcub2xkLmMsIGNvbmZpZy5vbGQub107CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnN0IG90ID0gem9uZS5vZmZzZXQodGhpcy50cyk7CiAgICAgICAgICBjID0gdHNUb09iaih0aGlzLnRzLCBvdCk7CiAgICAgICAgICBpbnZhbGlkID0gTnVtYmVyLmlzTmFOKGMueWVhcikgPyBuZXcgSW52YWxpZCgiaW52YWxpZCBpbnB1dCIpIDogbnVsbDsKICAgICAgICAgIGMgPSBpbnZhbGlkID8gbnVsbCA6IGM7CiAgICAgICAgICBvID0gaW52YWxpZCA/IG51bGwgOiBvdDsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIC8qKgogICAgICAgKiBAYWNjZXNzIHByaXZhdGUKICAgICAgICovCiAgICAgIHRoaXMuX3pvbmUgPSB6b25lOwogICAgICAvKioKICAgICAgICogQGFjY2VzcyBwcml2YXRlCiAgICAgICAqLwogICAgICB0aGlzLmxvYyA9IGNvbmZpZy5sb2MgfHwgTG9jYWxlLmNyZWF0ZSgpOwogICAgICAvKioKICAgICAgICogQGFjY2VzcyBwcml2YXRlCiAgICAgICAqLwogICAgICB0aGlzLmludmFsaWQgPSBpbnZhbGlkOwogICAgICAvKioKICAgICAgICogQGFjY2VzcyBwcml2YXRlCiAgICAgICAqLwogICAgICB0aGlzLndlZWtEYXRhID0gbnVsbDsKICAgICAgLyoqCiAgICAgICAqIEBhY2Nlc3MgcHJpdmF0ZQogICAgICAgKi8KICAgICAgdGhpcy5jID0gYzsKICAgICAgLyoqCiAgICAgICAqIEBhY2Nlc3MgcHJpdmF0ZQogICAgICAgKi8KICAgICAgdGhpcy5vID0gbzsKICAgICAgLyoqCiAgICAgICAqIEBhY2Nlc3MgcHJpdmF0ZQogICAgICAgKi8KICAgICAgdGhpcy5pc0x1eG9uRGF0ZVRpbWUgPSB0cnVlOwogICAgfQoKICAgIC8vIENPTlNUUlVDVAoKICAgIC8qKgogICAgICogQ3JlYXRlIGEgRGF0ZVRpbWUgZm9yIHRoZSBjdXJyZW50IGluc3RhbnQsIGluIHRoZSBzeXN0ZW0ncyB0aW1lIHpvbmUuCiAgICAgKgogICAgICogVXNlIFNldHRpbmdzIHRvIG92ZXJyaWRlIHRoZXNlIGRlZmF1bHQgdmFsdWVzIGlmIG5lZWRlZC4KICAgICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnRvSVNPKCkgLy9+PiBub3cgaW4gdGhlIElTTyBmb3JtYXQKICAgICAqIEByZXR1cm4ge0RhdGVUaW1lfQogICAgICovCiAgICBzdGF0aWMgbm93KCkgewogICAgICByZXR1cm4gbmV3IERhdGVUaW1lKHt9KTsKICAgIH0KCiAgICAvKioKICAgICAqIENyZWF0ZSBhIGxvY2FsIERhdGVUaW1lCiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3llYXJdIC0gVGhlIGNhbGVuZGFyIHllYXIuIElmIG9taXR0ZWQgKGFzIGluLCBjYWxsIGBsb2NhbCgpYCB3aXRoIG5vIGFyZ3VtZW50cyksIHRoZSBjdXJyZW50IHRpbWUgd2lsbCBiZSB1c2VkCiAgICAgKiBAcGFyYW0ge251bWJlcn0gW21vbnRoPTFdIC0gVGhlIG1vbnRoLCAxLWluZGV4ZWQKICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbZGF5PTFdIC0gVGhlIGRheSBvZiB0aGUgbW9udGgsIDEtaW5kZXhlZAogICAgICogQHBhcmFtIHtudW1iZXJ9IFtob3VyPTBdIC0gVGhlIGhvdXIgb2YgdGhlIGRheSwgaW4gMjQtaG91ciB0aW1lCiAgICAgKiBAcGFyYW0ge251bWJlcn0gW21pbnV0ZT0wXSAtIFRoZSBtaW51dGUgb2YgdGhlIGhvdXIsIG1lYW5pbmcgYSBudW1iZXIgYmV0d2VlbiAwIGFuZCA1OQogICAgICogQHBhcmFtIHtudW1iZXJ9IFtzZWNvbmQ9MF0gLSBUaGUgc2Vjb25kIG9mIHRoZSBtaW51dGUsIG1lYW5pbmcgYSBudW1iZXIgYmV0d2VlbiAwIGFuZCA1OQogICAgICogQHBhcmFtIHtudW1iZXJ9IFttaWxsaXNlY29uZD0wXSAtIFRoZSBtaWxsaXNlY29uZCBvZiB0aGUgc2Vjb25kLCBtZWFuaW5nIGEgbnVtYmVyIGJldHdlZW4gMCBhbmQgOTk5CiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vfj4gbm93CiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCh7IHpvbmU6ICJBbWVyaWNhL05ld19Zb3JrIiB9KSAgICAgIC8vfj4gbm93LCBpbiBVUyBlYXN0IGNvYXN0IHRpbWUKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9+PiAyMDE3LTAxLTAxVDAwOjAwOjAwCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCAzKSAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vfj4gMjAxNy0wMy0wMVQwMDowMDowMAogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgMywgMTIsIHsgbG9jYWxlOiAiZnIiIH0pICAgICAvL34+IDIwMTctMDMtMTJUMDA6MDA6MDAsIHdpdGggYSBGcmVuY2ggbG9jYWxlCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCAzLCAxMiwgNSkgICAgICAgICAgICAgICAgICAgIC8vfj4gMjAxNy0wMy0xMlQwNTowMDowMAogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgMywgMTIsIDUsIHsgem9uZTogInV0YyIgfSkgICAvL34+IDIwMTctMDMtMTJUMDU6MDA6MDAsIGluIFVUQwogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgMywgMTIsIDUsIDQ1KSAgICAgICAgICAgICAgICAvL34+IDIwMTctMDMtMTJUMDU6NDU6MDAKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDMsIDEyLCA1LCA0NSwgMTApICAgICAgICAgICAgLy9+PiAyMDE3LTAzLTEyVDA1OjQ1OjEwCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCAzLCAxMiwgNSwgNDUsIDEwLCA3NjUpICAgICAgIC8vfj4gMjAxNy0wMy0xMlQwNTo0NToxMC43NjUKICAgICAqIEByZXR1cm4ge0RhdGVUaW1lfQogICAgICovCiAgICBzdGF0aWMgbG9jYWwoKSB7CiAgICAgIGNvbnN0IFtvcHRzLCBhcmdzXSA9IGxhc3RPcHRzKGFyZ3VtZW50cyksCiAgICAgICAgW3llYXIsIG1vbnRoLCBkYXksIGhvdXIsIG1pbnV0ZSwgc2Vjb25kLCBtaWxsaXNlY29uZF0gPSBhcmdzOwogICAgICByZXR1cm4gcXVpY2tEVCh7IHllYXIsIG1vbnRoLCBkYXksIGhvdXIsIG1pbnV0ZSwgc2Vjb25kLCBtaWxsaXNlY29uZCB9LCBvcHRzKTsKICAgIH0KCiAgICAvKioKICAgICAqIENyZWF0ZSBhIERhdGVUaW1lIGluIFVUQwogICAgICogQHBhcmFtIHtudW1iZXJ9IFt5ZWFyXSAtIFRoZSBjYWxlbmRhciB5ZWFyLiBJZiBvbWl0dGVkIChhcyBpbiwgY2FsbCBgdXRjKClgIHdpdGggbm8gYXJndW1lbnRzKSwgdGhlIGN1cnJlbnQgdGltZSB3aWxsIGJlIHVzZWQKICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbW9udGg9MV0gLSBUaGUgbW9udGgsIDEtaW5kZXhlZAogICAgICogQHBhcmFtIHtudW1iZXJ9IFtkYXk9MV0gLSBUaGUgZGF5IG9mIHRoZSBtb250aAogICAgICogQHBhcmFtIHtudW1iZXJ9IFtob3VyPTBdIC0gVGhlIGhvdXIgb2YgdGhlIGRheSwgaW4gMjQtaG91ciB0aW1lCiAgICAgKiBAcGFyYW0ge251bWJlcn0gW21pbnV0ZT0wXSAtIFRoZSBtaW51dGUgb2YgdGhlIGhvdXIsIG1lYW5pbmcgYSBudW1iZXIgYmV0d2VlbiAwIGFuZCA1OQogICAgICogQHBhcmFtIHtudW1iZXJ9IFtzZWNvbmQ9MF0gLSBUaGUgc2Vjb25kIG9mIHRoZSBtaW51dGUsIG1lYW5pbmcgYSBudW1iZXIgYmV0d2VlbiAwIGFuZCA1OQogICAgICogQHBhcmFtIHtudW1iZXJ9IFttaWxsaXNlY29uZD0wXSAtIFRoZSBtaWxsaXNlY29uZCBvZiB0aGUgc2Vjb25kLCBtZWFuaW5nIGEgbnVtYmVyIGJldHdlZW4gMCBhbmQgOTk5CiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIGNvbmZpZ3VyYXRpb24gb3B0aW9ucyBmb3IgdGhlIERhdGVUaW1lCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMubG9jYWxlXSAtIGEgbG9jYWxlIHRvIHNldCBvbiB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGluc3RhbmNlCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMub3V0cHV0Q2FsZW5kYXJdIC0gdGhlIG91dHB1dCBjYWxlbmRhciB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZQogICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLm51bWJlcmluZ1N5c3RlbV0gLSB0aGUgbnVtYmVyaW5nIHN5c3RlbSB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZQogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9+PiBub3cKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygyMDE3KSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vfj4gMjAxNy0wMS0wMVQwMDowMDowMFoKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygyMDE3LCAzKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vfj4gMjAxNy0wMy0wMVQwMDowMDowMFoKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygyMDE3LCAzLCAxMikgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vfj4gMjAxNy0wMy0xMlQwMDowMDowMFoKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygyMDE3LCAzLCAxMiwgNSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vfj4gMjAxNy0wMy0xMlQwNTowMDowMFoKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygyMDE3LCAzLCAxMiwgNSwgNDUpICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vfj4gMjAxNy0wMy0xMlQwNTo0NTowMFoKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygyMDE3LCAzLCAxMiwgNSwgNDUsIHsgbG9jYWxlOiAiZnIiIH0pICAgICAgICAgIC8vfj4gMjAxNy0wMy0xMlQwNTo0NTowMFogd2l0aCBhIEZyZW5jaCBsb2NhbGUKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygyMDE3LCAzLCAxMiwgNSwgNDUsIDEwKSAgICAgICAgICAgICAgICAgICAgICAgIC8vfj4gMjAxNy0wMy0xMlQwNTo0NToxMFoKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygyMDE3LCAzLCAxMiwgNSwgNDUsIDEwLCA3NjUsIHsgbG9jYWxlOiAiZnIiIH0pIC8vfj4gMjAxNy0wMy0xMlQwNTo0NToxMC43NjVaIHdpdGggYSBGcmVuY2ggbG9jYWxlCiAgICAgKiBAcmV0dXJuIHtEYXRlVGltZX0KICAgICAqLwogICAgc3RhdGljIHV0YygpIHsKICAgICAgY29uc3QgW29wdHMsIGFyZ3NdID0gbGFzdE9wdHMoYXJndW1lbnRzKSwKICAgICAgICBbeWVhciwgbW9udGgsIGRheSwgaG91ciwgbWludXRlLCBzZWNvbmQsIG1pbGxpc2Vjb25kXSA9IGFyZ3M7CgogICAgICBvcHRzLnpvbmUgPSBGaXhlZE9mZnNldFpvbmUudXRjSW5zdGFuY2U7CiAgICAgIHJldHVybiBxdWlja0RUKHsgeWVhciwgbW9udGgsIGRheSwgaG91ciwgbWludXRlLCBzZWNvbmQsIG1pbGxpc2Vjb25kIH0sIG9wdHMpOwogICAgfQoKICAgIC8qKgogICAgICogQ3JlYXRlIGEgRGF0ZVRpbWUgZnJvbSBhIEphdmFTY3JpcHQgRGF0ZSBvYmplY3QuIFVzZXMgdGhlIGRlZmF1bHQgem9uZS4KICAgICAqIEBwYXJhbSB7RGF0ZX0gZGF0ZSAtIGEgSmF2YVNjcmlwdCBEYXRlIG9iamVjdAogICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgLSBjb25maWd1cmF0aW9uIG9wdGlvbnMgZm9yIHRoZSBEYXRlVGltZQogICAgICogQHBhcmFtIHtzdHJpbmd8Wm9uZX0gW29wdGlvbnMuem9uZT0nbG9jYWwnXSAtIHRoZSB6b25lIHRvIHBsYWNlIHRoZSBEYXRlVGltZSBpbnRvCiAgICAgKiBAcmV0dXJuIHtEYXRlVGltZX0KICAgICAqLwogICAgc3RhdGljIGZyb21KU0RhdGUoZGF0ZSwgb3B0aW9ucyA9IHt9KSB7CiAgICAgIGNvbnN0IHRzID0gaXNEYXRlKGRhdGUpID8gZGF0ZS52YWx1ZU9mKCkgOiBOYU47CiAgICAgIGlmIChOdW1iZXIuaXNOYU4odHMpKSB7CiAgICAgICAgcmV0dXJuIERhdGVUaW1lLmludmFsaWQoImludmFsaWQgaW5wdXQiKTsKICAgICAgfQoKICAgICAgY29uc3Qgem9uZVRvVXNlID0gbm9ybWFsaXplWm9uZShvcHRpb25zLnpvbmUsIFNldHRpbmdzLmRlZmF1bHRab25lKTsKICAgICAgaWYgKCF6b25lVG9Vc2UuaXNWYWxpZCkgewogICAgICAgIHJldHVybiBEYXRlVGltZS5pbnZhbGlkKHVuc3VwcG9ydGVkWm9uZSh6b25lVG9Vc2UpKTsKICAgICAgfQoKICAgICAgcmV0dXJuIG5ldyBEYXRlVGltZSh7CiAgICAgICAgdHM6IHRzLAogICAgICAgIHpvbmU6IHpvbmVUb1VzZSwKICAgICAgICBsb2M6IExvY2FsZS5mcm9tT2JqZWN0KG9wdGlvbnMpLAogICAgICB9KTsKICAgIH0KCiAgICAvKioKICAgICAqIENyZWF0ZSBhIERhdGVUaW1lIGZyb20gYSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHNpbmNlIHRoZSBlcG9jaCAobWVhbmluZyBzaW5jZSAxIEphbnVhcnkgMTk3MCAwMDowMDowMCBVVEMpLiBVc2VzIHRoZSBkZWZhdWx0IHpvbmUuCiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWlsbGlzZWNvbmRzIC0gYSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHNpbmNlIDE5NzAgVVRDCiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIGNvbmZpZ3VyYXRpb24gb3B0aW9ucyBmb3IgdGhlIERhdGVUaW1lCiAgICAgKiBAcGFyYW0ge3N0cmluZ3xab25lfSBbb3B0aW9ucy56b25lPSdsb2NhbCddIC0gdGhlIHpvbmUgdG8gcGxhY2UgdGhlIERhdGVUaW1lIGludG8KICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5sb2NhbGVdIC0gYSBsb2NhbGUgdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2UKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLm91dHB1dENhbGVuZGFyIC0gdGhlIG91dHB1dCBjYWxlbmRhciB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZQogICAgICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMubnVtYmVyaW5nU3lzdGVtIC0gdGhlIG51bWJlcmluZyBzeXN0ZW0gdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2UKICAgICAqIEByZXR1cm4ge0RhdGVUaW1lfQogICAgICovCiAgICBzdGF0aWMgZnJvbU1pbGxpcyhtaWxsaXNlY29uZHMsIG9wdGlvbnMgPSB7fSkgewogICAgICBpZiAoIWlzTnVtYmVyJDEobWlsbGlzZWNvbmRzKSkgewogICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcigKICAgICAgICAgIGBmcm9tTWlsbGlzIHJlcXVpcmVzIGEgbnVtZXJpY2FsIGlucHV0LCBidXQgcmVjZWl2ZWQgYSAke3R5cGVvZiBtaWxsaXNlY29uZHN9IHdpdGggdmFsdWUgJHttaWxsaXNlY29uZHN9YAogICAgICAgICk7CiAgICAgIH0gZWxzZSBpZiAobWlsbGlzZWNvbmRzIDwgLU1BWF9EQVRFIHx8IG1pbGxpc2Vjb25kcyA+IE1BWF9EQVRFKSB7CiAgICAgICAgLy8gdGhpcyBpc24ndCBwZXJmZWN0IGJlY2F1c2UgYmVjYXVzZSB3ZSBjYW4gc3RpbGwgZW5kIHVwIG91dCBvZiByYW5nZSBiZWNhdXNlIG9mIGFkZGl0aW9uYWwgc2hpZnRpbmcsIGJ1dCBpdCdzIGEgc3RhcnQKICAgICAgICByZXR1cm4gRGF0ZVRpbWUuaW52YWxpZCgiVGltZXN0YW1wIG91dCBvZiByYW5nZSIpOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBuZXcgRGF0ZVRpbWUoewogICAgICAgICAgdHM6IG1pbGxpc2Vjb25kcywKICAgICAgICAgIHpvbmU6IG5vcm1hbGl6ZVpvbmUob3B0aW9ucy56b25lLCBTZXR0aW5ncy5kZWZhdWx0Wm9uZSksCiAgICAgICAgICBsb2M6IExvY2FsZS5mcm9tT2JqZWN0KG9wdGlvbnMpLAogICAgICAgIH0pOwogICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBDcmVhdGUgYSBEYXRlVGltZSBmcm9tIGEgbnVtYmVyIG9mIHNlY29uZHMgc2luY2UgdGhlIGVwb2NoIChtZWFuaW5nIHNpbmNlIDEgSmFudWFyeSAxOTcwIDAwOjAwOjAwIFVUQykuIFVzZXMgdGhlIGRlZmF1bHQgem9uZS4KICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzZWNvbmRzIC0gYSBudW1iZXIgb2Ygc2Vjb25kcyBzaW5jZSAxOTcwIFVUQwogICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgLSBjb25maWd1cmF0aW9uIG9wdGlvbnMgZm9yIHRoZSBEYXRlVGltZQogICAgICogQHBhcmFtIHtzdHJpbmd8Wm9uZX0gW29wdGlvbnMuem9uZT0nbG9jYWwnXSAtIHRoZSB6b25lIHRvIHBsYWNlIHRoZSBEYXRlVGltZSBpbnRvCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMubG9jYWxlXSAtIGEgbG9jYWxlIHRvIHNldCBvbiB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGluc3RhbmNlCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0aW9ucy5vdXRwdXRDYWxlbmRhciAtIHRoZSBvdXRwdXQgY2FsZW5kYXIgdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2UKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLm51bWJlcmluZ1N5c3RlbSAtIHRoZSBudW1iZXJpbmcgc3lzdGVtIHRvIHNldCBvbiB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGluc3RhbmNlCiAgICAgKiBAcmV0dXJuIHtEYXRlVGltZX0KICAgICAqLwogICAgc3RhdGljIGZyb21TZWNvbmRzKHNlY29uZHMsIG9wdGlvbnMgPSB7fSkgewogICAgICBpZiAoIWlzTnVtYmVyJDEoc2Vjb25kcykpIHsKICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoImZyb21TZWNvbmRzIHJlcXVpcmVzIGEgbnVtZXJpY2FsIGlucHV0Iik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIG5ldyBEYXRlVGltZSh7CiAgICAgICAgICB0czogc2Vjb25kcyAqIDEwMDAsCiAgICAgICAgICB6b25lOiBub3JtYWxpemVab25lKG9wdGlvbnMuem9uZSwgU2V0dGluZ3MuZGVmYXVsdFpvbmUpLAogICAgICAgICAgbG9jOiBMb2NhbGUuZnJvbU9iamVjdChvcHRpb25zKSwKICAgICAgICB9KTsKICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogQ3JlYXRlIGEgRGF0ZVRpbWUgZnJvbSBhIEphdmFTY3JpcHQgb2JqZWN0IHdpdGgga2V5cyBsaWtlICd5ZWFyJyBhbmQgJ2hvdXInIHdpdGggcmVhc29uYWJsZSBkZWZhdWx0cy4KICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmogLSB0aGUgb2JqZWN0IHRvIGNyZWF0ZSB0aGUgRGF0ZVRpbWUgZnJvbQogICAgICogQHBhcmFtIHtudW1iZXJ9IG9iai55ZWFyIC0gYSB5ZWFyLCBzdWNoIGFzIDE5ODcKICAgICAqIEBwYXJhbSB7bnVtYmVyfSBvYmoubW9udGggLSBhIG1vbnRoLCAxLTEyCiAgICAgKiBAcGFyYW0ge251bWJlcn0gb2JqLmRheSAtIGEgZGF5IG9mIHRoZSBtb250aCwgMS0zMSwgZGVwZW5kaW5nIG9uIHRoZSBtb250aAogICAgICogQHBhcmFtIHtudW1iZXJ9IG9iai5vcmRpbmFsIC0gZGF5IG9mIHRoZSB5ZWFyLCAxLTM2NSBvciAzNjYKICAgICAqIEBwYXJhbSB7bnVtYmVyfSBvYmoud2Vla1llYXIgLSBhbiBJU08gd2VlayB5ZWFyCiAgICAgKiBAcGFyYW0ge251bWJlcn0gb2JqLndlZWtOdW1iZXIgLSBhbiBJU08gd2VlayBudW1iZXIsIGJldHdlZW4gMSBhbmQgNTIgb3IgNTMsIGRlcGVuZGluZyBvbiB0aGUgeWVhcgogICAgICogQHBhcmFtIHtudW1iZXJ9IG9iai53ZWVrZGF5IC0gYW4gSVNPIHdlZWtkYXksIDEtNywgd2hlcmUgMSBpcyBNb25kYXkgYW5kIDcgaXMgU3VuZGF5CiAgICAgKiBAcGFyYW0ge251bWJlcn0gb2JqLmhvdXIgLSBob3VyIG9mIHRoZSBkYXksIDAtMjMKICAgICAqIEBwYXJhbSB7bnVtYmVyfSBvYmoubWludXRlIC0gbWludXRlIG9mIHRoZSBob3VyLCAwLTU5CiAgICAgKiBAcGFyYW0ge251bWJlcn0gb2JqLnNlY29uZCAtIHNlY29uZCBvZiB0aGUgbWludXRlLCAwLTU5CiAgICAgKiBAcGFyYW0ge251bWJlcn0gb2JqLm1pbGxpc2Vjb25kIC0gbWlsbGlzZWNvbmQgb2YgdGhlIHNlY29uZCwgMC05OTkKICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9ucyBmb3IgY3JlYXRpbmcgdGhpcyBEYXRlVGltZQogICAgICogQHBhcmFtIHtzdHJpbmd8Wm9uZX0gW29wdHMuem9uZT0nbG9jYWwnXSAtIGludGVycHJldCB0aGUgbnVtYmVycyBpbiB0aGUgY29udGV4dCBvZiBhIHBhcnRpY3VsYXIgem9uZS4gQ2FuIHRha2UgYW55IHZhbHVlIHRha2VuIGFzIHRoZSBmaXJzdCBhcmd1bWVudCB0byBzZXRab25lKCkKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NhbGU9J3N5c3RlbSdzIGxvY2FsZSddIC0gYSBsb2NhbGUgdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2UKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRzLm91dHB1dENhbGVuZGFyIC0gdGhlIG91dHB1dCBjYWxlbmRhciB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZQogICAgICogQHBhcmFtIHtzdHJpbmd9IG9wdHMubnVtYmVyaW5nU3lzdGVtIC0gdGhlIG51bWJlcmluZyBzeXN0ZW0gdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2UKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21PYmplY3QoeyB5ZWFyOiAxOTgyLCBtb250aDogNSwgZGF5OiAyNX0pLnRvSVNPRGF0ZSgpIC8vPT4gJzE5ODItMDUtMjUnCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tT2JqZWN0KHsgeWVhcjogMTk4MiB9KS50b0lTT0RhdGUoKSAvLz0+ICcxOTgyLTAxLTAxJwogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbU9iamVjdCh7IGhvdXI6IDEwLCBtaW51dGU6IDI2LCBzZWNvbmQ6IDYgfSkgLy9+PiB0b2RheSBhdCAxMDoyNjowNgogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbU9iamVjdCh7IGhvdXI6IDEwLCBtaW51dGU6IDI2LCBzZWNvbmQ6IDYgfSwgeyB6b25lOiAndXRjJyB9KSwKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21PYmplY3QoeyBob3VyOiAxMCwgbWludXRlOiAyNiwgc2Vjb25kOiA2IH0sIHsgem9uZTogJ2xvY2FsJyB9KQogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbU9iamVjdCh7IGhvdXI6IDEwLCBtaW51dGU6IDI2LCBzZWNvbmQ6IDYgfSwgeyB6b25lOiAnQW1lcmljYS9OZXdfWW9yaycgfSkKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21PYmplY3QoeyB3ZWVrWWVhcjogMjAxNiwgd2Vla051bWJlcjogMiwgd2Vla2RheTogMyB9KS50b0lTT0RhdGUoKSAvLz0+ICcyMDE2LTAxLTEzJwogICAgICogQHJldHVybiB7RGF0ZVRpbWV9CiAgICAgKi8KICAgIHN0YXRpYyBmcm9tT2JqZWN0KG9iaiwgb3B0cyA9IHt9KSB7CiAgICAgIG9iaiA9IG9iaiB8fCB7fTsKICAgICAgY29uc3Qgem9uZVRvVXNlID0gbm9ybWFsaXplWm9uZShvcHRzLnpvbmUsIFNldHRpbmdzLmRlZmF1bHRab25lKTsKICAgICAgaWYgKCF6b25lVG9Vc2UuaXNWYWxpZCkgewogICAgICAgIHJldHVybiBEYXRlVGltZS5pbnZhbGlkKHVuc3VwcG9ydGVkWm9uZSh6b25lVG9Vc2UpKTsKICAgICAgfQoKICAgICAgY29uc3QgdHNOb3cgPSBTZXR0aW5ncy5ub3coKSwKICAgICAgICBvZmZzZXRQcm92aXMgPSAhaXNVbmRlZmluZWQob3B0cy5zcGVjaWZpY09mZnNldCkKICAgICAgICAgID8gb3B0cy5zcGVjaWZpY09mZnNldAogICAgICAgICAgOiB6b25lVG9Vc2Uub2Zmc2V0KHRzTm93KSwKICAgICAgICBub3JtYWxpemVkID0gbm9ybWFsaXplT2JqZWN0KG9iaiwgbm9ybWFsaXplVW5pdCksCiAgICAgICAgY29udGFpbnNPcmRpbmFsID0gIWlzVW5kZWZpbmVkKG5vcm1hbGl6ZWQub3JkaW5hbCksCiAgICAgICAgY29udGFpbnNHcmVnb3JZZWFyID0gIWlzVW5kZWZpbmVkKG5vcm1hbGl6ZWQueWVhciksCiAgICAgICAgY29udGFpbnNHcmVnb3JNRCA9ICFpc1VuZGVmaW5lZChub3JtYWxpemVkLm1vbnRoKSB8fCAhaXNVbmRlZmluZWQobm9ybWFsaXplZC5kYXkpLAogICAgICAgIGNvbnRhaW5zR3JlZ29yID0gY29udGFpbnNHcmVnb3JZZWFyIHx8IGNvbnRhaW5zR3JlZ29yTUQsCiAgICAgICAgZGVmaW5pdGVXZWVrRGVmID0gbm9ybWFsaXplZC53ZWVrWWVhciB8fCBub3JtYWxpemVkLndlZWtOdW1iZXIsCiAgICAgICAgbG9jID0gTG9jYWxlLmZyb21PYmplY3Qob3B0cyk7CgogICAgICAvLyBjYXNlczoKICAgICAgLy8ganVzdCBhIHdlZWtkYXkgLT4gdGhpcyB3ZWVrJ3MgaW5zdGFuY2Ugb2YgdGhhdCB3ZWVrZGF5LCBubyB3b3JyaWVzCiAgICAgIC8vIChncmVnb3JpYW4gZGF0YSBvciBvcmRpbmFsKSArICh3ZWVrWWVhciBvciB3ZWVrTnVtYmVyKSAtPiBlcnJvcgogICAgICAvLyAoZ3JlZ29yaWFuIG1vbnRoIG9yIGRheSkgKyBvcmRpbmFsIC0+IGVycm9yCiAgICAgIC8vIG90aGVyd2lzZSBqdXN0IHVzZSB3ZWVrcyBvciBvcmRpbmFscyBvciBncmVnb3JpYW4sIGRlcGVuZGluZyBvbiB3aGF0J3Mgc3BlY2lmaWVkCgogICAgICBpZiAoKGNvbnRhaW5zR3JlZ29yIHx8IGNvbnRhaW5zT3JkaW5hbCkgJiYgZGVmaW5pdGVXZWVrRGVmKSB7CiAgICAgICAgdGhyb3cgbmV3IENvbmZsaWN0aW5nU3BlY2lmaWNhdGlvbkVycm9yKAogICAgICAgICAgIkNhbid0IG1peCB3ZWVrWWVhci93ZWVrTnVtYmVyIHVuaXRzIHdpdGggeWVhci9tb250aC9kYXkgb3Igb3JkaW5hbHMiCiAgICAgICAgKTsKICAgICAgfQoKICAgICAgaWYgKGNvbnRhaW5zR3JlZ29yTUQgJiYgY29udGFpbnNPcmRpbmFsKSB7CiAgICAgICAgdGhyb3cgbmV3IENvbmZsaWN0aW5nU3BlY2lmaWNhdGlvbkVycm9yKCJDYW4ndCBtaXggb3JkaW5hbCBkYXRlcyB3aXRoIG1vbnRoL2RheSIpOwogICAgICB9CgogICAgICBjb25zdCB1c2VXZWVrRGF0YSA9IGRlZmluaXRlV2Vla0RlZiB8fCAobm9ybWFsaXplZC53ZWVrZGF5ICYmICFjb250YWluc0dyZWdvcik7CgogICAgICAvLyBjb25maWd1cmUgb3Vyc2VsdmVzIHRvIGRlYWwgd2l0aCBncmVnb3JpYW4gZGF0ZXMgb3Igd2VlayBzdHVmZgogICAgICBsZXQgdW5pdHMsCiAgICAgICAgZGVmYXVsdFZhbHVlcywKICAgICAgICBvYmpOb3cgPSB0c1RvT2JqKHRzTm93LCBvZmZzZXRQcm92aXMpOwogICAgICBpZiAodXNlV2Vla0RhdGEpIHsKICAgICAgICB1bml0cyA9IG9yZGVyZWRXZWVrVW5pdHM7CiAgICAgICAgZGVmYXVsdFZhbHVlcyA9IGRlZmF1bHRXZWVrVW5pdFZhbHVlczsKICAgICAgICBvYmpOb3cgPSBncmVnb3JpYW5Ub1dlZWsob2JqTm93KTsKICAgICAgfSBlbHNlIGlmIChjb250YWluc09yZGluYWwpIHsKICAgICAgICB1bml0cyA9IG9yZGVyZWRPcmRpbmFsVW5pdHM7CiAgICAgICAgZGVmYXVsdFZhbHVlcyA9IGRlZmF1bHRPcmRpbmFsVW5pdFZhbHVlczsKICAgICAgICBvYmpOb3cgPSBncmVnb3JpYW5Ub09yZGluYWwob2JqTm93KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB1bml0cyA9IG9yZGVyZWRVbml0czsKICAgICAgICBkZWZhdWx0VmFsdWVzID0gZGVmYXVsdFVuaXRWYWx1ZXM7CiAgICAgIH0KCiAgICAgIC8vIHNldCBkZWZhdWx0IHZhbHVlcyBmb3IgbWlzc2luZyBzdHVmZgogICAgICBsZXQgZm91bmRGaXJzdCA9IGZhbHNlOwogICAgICBmb3IgKGNvbnN0IHUgb2YgdW5pdHMpIHsKICAgICAgICBjb25zdCB2ID0gbm9ybWFsaXplZFt1XTsKICAgICAgICBpZiAoIWlzVW5kZWZpbmVkKHYpKSB7CiAgICAgICAgICBmb3VuZEZpcnN0ID0gdHJ1ZTsKICAgICAgICB9IGVsc2UgaWYgKGZvdW5kRmlyc3QpIHsKICAgICAgICAgIG5vcm1hbGl6ZWRbdV0gPSBkZWZhdWx0VmFsdWVzW3VdOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBub3JtYWxpemVkW3VdID0gb2JqTm93W3VdOwogICAgICAgIH0KICAgICAgfQoKICAgICAgLy8gbWFrZSBzdXJlIHRoZSB2YWx1ZXMgd2UgaGF2ZSBhcmUgaW4gcmFuZ2UKICAgICAgY29uc3QgaGlnaGVyT3JkZXJJbnZhbGlkID0gdXNlV2Vla0RhdGEKICAgICAgICAgID8gaGFzSW52YWxpZFdlZWtEYXRhKG5vcm1hbGl6ZWQpCiAgICAgICAgICA6IGNvbnRhaW5zT3JkaW5hbAogICAgICAgICAgPyBoYXNJbnZhbGlkT3JkaW5hbERhdGEobm9ybWFsaXplZCkKICAgICAgICAgIDogaGFzSW52YWxpZEdyZWdvcmlhbkRhdGEobm9ybWFsaXplZCksCiAgICAgICAgaW52YWxpZCA9IGhpZ2hlck9yZGVySW52YWxpZCB8fCBoYXNJbnZhbGlkVGltZURhdGEobm9ybWFsaXplZCk7CgogICAgICBpZiAoaW52YWxpZCkgewogICAgICAgIHJldHVybiBEYXRlVGltZS5pbnZhbGlkKGludmFsaWQpOwogICAgICB9CgogICAgICAvLyBjb21wdXRlIHRoZSBhY3R1YWwgdGltZQogICAgICBjb25zdCBncmVnb3JpYW4gPSB1c2VXZWVrRGF0YQogICAgICAgICAgPyB3ZWVrVG9HcmVnb3JpYW4obm9ybWFsaXplZCkKICAgICAgICAgIDogY29udGFpbnNPcmRpbmFsCiAgICAgICAgICA/IG9yZGluYWxUb0dyZWdvcmlhbihub3JtYWxpemVkKQogICAgICAgICAgOiBub3JtYWxpemVkLAogICAgICAgIFt0c0ZpbmFsLCBvZmZzZXRGaW5hbF0gPSBvYmpUb1RTKGdyZWdvcmlhbiwgb2Zmc2V0UHJvdmlzLCB6b25lVG9Vc2UpLAogICAgICAgIGluc3QgPSBuZXcgRGF0ZVRpbWUoewogICAgICAgICAgdHM6IHRzRmluYWwsCiAgICAgICAgICB6b25lOiB6b25lVG9Vc2UsCiAgICAgICAgICBvOiBvZmZzZXRGaW5hbCwKICAgICAgICAgIGxvYywKICAgICAgICB9KTsKCiAgICAgIC8vIGdyZWdvcmlhbiBkYXRhICsgd2Vla2RheSBzZXJ2ZXMgb25seSB0byB2YWxpZGF0ZQogICAgICBpZiAobm9ybWFsaXplZC53ZWVrZGF5ICYmIGNvbnRhaW5zR3JlZ29yICYmIG9iai53ZWVrZGF5ICE9PSBpbnN0LndlZWtkYXkpIHsKICAgICAgICByZXR1cm4gRGF0ZVRpbWUuaW52YWxpZCgKICAgICAgICAgICJtaXNtYXRjaGVkIHdlZWtkYXkiLAogICAgICAgICAgYHlvdSBjYW4ndCBzcGVjaWZ5IGJvdGggYSB3ZWVrZGF5IG9mICR7bm9ybWFsaXplZC53ZWVrZGF5fSBhbmQgYSBkYXRlIG9mICR7aW5zdC50b0lTTygpfWAKICAgICAgICApOwogICAgICB9CgogICAgICByZXR1cm4gaW5zdDsKICAgIH0KCiAgICAvKioKICAgICAqIENyZWF0ZSBhIERhdGVUaW1lIGZyb20gYW4gSVNPIDg2MDEgc3RyaW5nCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCAtIHRoZSBJU08gc3RyaW5nCiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnMgdG8gYWZmZWN0IHRoZSBjcmVhdGlvbgogICAgICogQHBhcmFtIHtzdHJpbmd8Wm9uZX0gW29wdHMuem9uZT0nbG9jYWwnXSAtIHVzZSB0aGlzIHpvbmUgaWYgbm8gb2Zmc2V0IGlzIHNwZWNpZmllZCBpbiB0aGUgaW5wdXQgc3RyaW5nIGl0c2VsZi4gV2lsbCBhbHNvIGNvbnZlcnQgdGhlIHRpbWUgdG8gdGhpcyB6b25lCiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLnNldFpvbmU9ZmFsc2VdIC0gb3ZlcnJpZGUgdGhlIHpvbmUgd2l0aCBhIGZpeGVkLW9mZnNldCB6b25lIHNwZWNpZmllZCBpbiB0aGUgc3RyaW5nIGl0c2VsZiwgaWYgaXQgc3BlY2lmaWVzIG9uZQogICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmxvY2FsZT0nc3lzdGVtJ3MgbG9jYWxlJ10gLSBhIGxvY2FsZSB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZQogICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLm91dHB1dENhbGVuZGFyXSAtIHRoZSBvdXRwdXQgY2FsZW5kYXIgdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2UKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5udW1iZXJpbmdTeXN0ZW1dIC0gdGhlIG51bWJlcmluZyBzeXN0ZW0gdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2UKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21JU08oJzIwMTYtMDUtMjVUMDk6MDg6MzQuMTIzJykKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21JU08oJzIwMTYtMDUtMjVUMDk6MDg6MzQuMTIzKzA2OjAwJykKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21JU08oJzIwMTYtMDUtMjVUMDk6MDg6MzQuMTIzKzA2OjAwJywge3NldFpvbmU6IHRydWV9KQogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbUlTTygnMjAxNi0wNS0yNVQwOTowODozNC4xMjMnLCB7em9uZTogJ3V0Yyd9KQogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbUlTTygnMjAxNi1XMDUtNCcpCiAgICAgKiBAcmV0dXJuIHtEYXRlVGltZX0KICAgICAqLwogICAgc3RhdGljIGZyb21JU08odGV4dCwgb3B0cyA9IHt9KSB7CiAgICAgIGNvbnN0IFt2YWxzLCBwYXJzZWRab25lXSA9IHBhcnNlSVNPRGF0ZSh0ZXh0KTsKICAgICAgcmV0dXJuIHBhcnNlRGF0YVRvRGF0ZVRpbWUodmFscywgcGFyc2VkWm9uZSwgb3B0cywgIklTTyA4NjAxIiwgdGV4dCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBDcmVhdGUgYSBEYXRlVGltZSBmcm9tIGFuIFJGQyAyODIyIHN0cmluZwogICAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgLSB0aGUgUkZDIDI4MjIgc3RyaW5nCiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnMgdG8gYWZmZWN0IHRoZSBjcmVhdGlvbgogICAgICogQHBhcmFtIHtzdHJpbmd8Wm9uZX0gW29wdHMuem9uZT0nbG9jYWwnXSAtIGNvbnZlcnQgdGhlIHRpbWUgdG8gdGhpcyB6b25lLiBTaW5jZSB0aGUgb2Zmc2V0IGlzIGFsd2F5cyBzcGVjaWZpZWQgaW4gdGhlIHN0cmluZyBpdHNlbGYsIHRoaXMgaGFzIG5vIGVmZmVjdCBvbiB0aGUgaW50ZXJwcmV0YXRpb24gb2Ygc3RyaW5nLCBtZXJlbHkgdGhlIHpvbmUgdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpcyBleHByZXNzZWQgaW4uCiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLnNldFpvbmU9ZmFsc2VdIC0gb3ZlcnJpZGUgdGhlIHpvbmUgd2l0aCBhIGZpeGVkLW9mZnNldCB6b25lIHNwZWNpZmllZCBpbiB0aGUgc3RyaW5nIGl0c2VsZiwgaWYgaXQgc3BlY2lmaWVzIG9uZQogICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmxvY2FsZT0nc3lzdGVtJ3MgbG9jYWxlJ10gLSBhIGxvY2FsZSB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZQogICAgICogQHBhcmFtIHtzdHJpbmd9IG9wdHMub3V0cHV0Q2FsZW5kYXIgLSB0aGUgb3V0cHV0IGNhbGVuZGFyIHRvIHNldCBvbiB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGluc3RhbmNlCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0cy5udW1iZXJpbmdTeXN0ZW0gLSB0aGUgbnVtYmVyaW5nIHN5c3RlbSB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZQogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbVJGQzI4MjIoJzI1IE5vdiAyMDE2IDEzOjIzOjEyIEdNVCcpCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tUkZDMjgyMignRnJpLCAyNSBOb3YgMjAxNiAxMzoyMzoxMiArMDYwMCcpCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tUkZDMjgyMignMjUgTm92IDIwMTYgMTM6MjMgWicpCiAgICAgKiBAcmV0dXJuIHtEYXRlVGltZX0KICAgICAqLwogICAgc3RhdGljIGZyb21SRkMyODIyKHRleHQsIG9wdHMgPSB7fSkgewogICAgICBjb25zdCBbdmFscywgcGFyc2VkWm9uZV0gPSBwYXJzZVJGQzI4MjJEYXRlKHRleHQpOwogICAgICByZXR1cm4gcGFyc2VEYXRhVG9EYXRlVGltZSh2YWxzLCBwYXJzZWRab25lLCBvcHRzLCAiUkZDIDI4MjIiLCB0ZXh0KTsKICAgIH0KCiAgICAvKioKICAgICAqIENyZWF0ZSBhIERhdGVUaW1lIGZyb20gYW4gSFRUUCBoZWFkZXIgZGF0ZQogICAgICogQHNlZSBodHRwczovL3d3dy53My5vcmcvUHJvdG9jb2xzL3JmYzI2MTYvcmZjMjYxNi1zZWMzLmh0bWwjc2VjMy4zLjEKICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IC0gdGhlIEhUVFAgaGVhZGVyIGRhdGUKICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9ucyB0byBhZmZlY3QgdGhlIGNyZWF0aW9uCiAgICAgKiBAcGFyYW0ge3N0cmluZ3xab25lfSBbb3B0cy56b25lPSdsb2NhbCddIC0gY29udmVydCB0aGUgdGltZSB0byB0aGlzIHpvbmUuIFNpbmNlIEhUVFAgZGF0ZXMgYXJlIGFsd2F5cyBpbiBVVEMsIHRoaXMgaGFzIG5vIGVmZmVjdCBvbiB0aGUgaW50ZXJwcmV0YXRpb24gb2Ygc3RyaW5nLCBtZXJlbHkgdGhlIHpvbmUgdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpcyBleHByZXNzZWQgaW4uCiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLnNldFpvbmU9ZmFsc2VdIC0gb3ZlcnJpZGUgdGhlIHpvbmUgd2l0aCB0aGUgZml4ZWQtb2Zmc2V0IHpvbmUgc3BlY2lmaWVkIGluIHRoZSBzdHJpbmcuIEZvciBIVFRQIGRhdGVzLCB0aGlzIGlzIGFsd2F5cyBVVEMsIHNvIHRoaXMgb3B0aW9uIGlzIGVxdWl2YWxlbnQgdG8gc2V0dGluZyB0aGUgYHpvbmVgIG9wdGlvbiB0byAndXRjJywgYnV0IHRoaXMgb3B0aW9uIGlzIGluY2x1ZGVkIGZvciBjb25zaXN0ZW5jeSB3aXRoIHNpbWlsYXIgbWV0aG9kcy4KICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NhbGU9J3N5c3RlbSdzIGxvY2FsZSddIC0gYSBsb2NhbGUgdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2UKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRzLm91dHB1dENhbGVuZGFyIC0gdGhlIG91dHB1dCBjYWxlbmRhciB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZQogICAgICogQHBhcmFtIHtzdHJpbmd9IG9wdHMubnVtYmVyaW5nU3lzdGVtIC0gdGhlIG51bWJlcmluZyBzeXN0ZW0gdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2UKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21IVFRQKCdTdW4sIDA2IE5vdiAxOTk0IDA4OjQ5OjM3IEdNVCcpCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tSFRUUCgnU3VuZGF5LCAwNi1Ob3YtOTQgMDg6NDk6MzcgR01UJykKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21IVFRQKCdTdW4gTm92ICA2IDA4OjQ5OjM3IDE5OTQnKQogICAgICogQHJldHVybiB7RGF0ZVRpbWV9CiAgICAgKi8KICAgIHN0YXRpYyBmcm9tSFRUUCh0ZXh0LCBvcHRzID0ge30pIHsKICAgICAgY29uc3QgW3ZhbHMsIHBhcnNlZFpvbmVdID0gcGFyc2VIVFRQRGF0ZSh0ZXh0KTsKICAgICAgcmV0dXJuIHBhcnNlRGF0YVRvRGF0ZVRpbWUodmFscywgcGFyc2VkWm9uZSwgb3B0cywgIkhUVFAiLCBvcHRzKTsKICAgIH0KCiAgICAvKioKICAgICAqIENyZWF0ZSBhIERhdGVUaW1lIGZyb20gYW4gaW5wdXQgc3RyaW5nIGFuZCBmb3JtYXQgc3RyaW5nLgogICAgICogRGVmYXVsdHMgdG8gZW4tVVMgaWYgbm8gbG9jYWxlIGhhcyBiZWVuIHNwZWNpZmllZCwgcmVnYXJkbGVzcyBvZiB0aGUgc3lzdGVtJ3MgbG9jYWxlLiBGb3IgYSB0YWJsZSBvZiB0b2tlbnMgYW5kIHRoZWlyIGludGVycHJldGF0aW9ucywgc2VlIFtoZXJlXShodHRwczovL21vbWVudC5naXRodWIuaW8vbHV4b24vIy9wYXJzaW5nP2lkPXRhYmxlLW9mLXRva2VucykuCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCAtIHRoZSBzdHJpbmcgdG8gcGFyc2UKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBmbXQgLSB0aGUgZm9ybWF0IHRoZSBzdHJpbmcgaXMgZXhwZWN0ZWQgdG8gYmUgaW4gKHNlZSB0aGUgbGluayBiZWxvdyBmb3IgdGhlIGZvcm1hdHMpCiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnMgdG8gYWZmZWN0IHRoZSBjcmVhdGlvbgogICAgICogQHBhcmFtIHtzdHJpbmd8Wm9uZX0gW29wdHMuem9uZT0nbG9jYWwnXSAtIHVzZSB0aGlzIHpvbmUgaWYgbm8gb2Zmc2V0IGlzIHNwZWNpZmllZCBpbiB0aGUgaW5wdXQgc3RyaW5nIGl0c2VsZi4gV2lsbCBhbHNvIGNvbnZlcnQgdGhlIERhdGVUaW1lIHRvIHRoaXMgem9uZQogICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5zZXRab25lPWZhbHNlXSAtIG92ZXJyaWRlIHRoZSB6b25lIHdpdGggYSB6b25lIHNwZWNpZmllZCBpbiB0aGUgc3RyaW5nIGl0c2VsZiwgaWYgaXQgc3BlY2lmaWVzIG9uZQogICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmxvY2FsZT0nZW4tVVMnXSAtIGEgbG9jYWxlIHN0cmluZyB0byB1c2Ugd2hlbiBwYXJzaW5nLiBXaWxsIGFsc28gc2V0IHRoZSBEYXRlVGltZSB0byB0aGlzIGxvY2FsZQogICAgICogQHBhcmFtIHtzdHJpbmd9IG9wdHMubnVtYmVyaW5nU3lzdGVtIC0gdGhlIG51bWJlcmluZyBzeXN0ZW0gdG8gdXNlIHdoZW4gcGFyc2luZy4gV2lsbCBhbHNvIHNldCB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIHRvIHRoaXMgbnVtYmVyaW5nIHN5c3RlbQogICAgICogQHBhcmFtIHtzdHJpbmd9IG9wdHMub3V0cHV0Q2FsZW5kYXIgLSB0aGUgb3V0cHV0IGNhbGVuZGFyIHRvIHNldCBvbiB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGluc3RhbmNlCiAgICAgKiBAcmV0dXJuIHtEYXRlVGltZX0KICAgICAqLwogICAgc3RhdGljIGZyb21Gb3JtYXQodGV4dCwgZm10LCBvcHRzID0ge30pIHsKICAgICAgaWYgKGlzVW5kZWZpbmVkKHRleHQpIHx8IGlzVW5kZWZpbmVkKGZtdCkpIHsKICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoImZyb21Gb3JtYXQgcmVxdWlyZXMgYW4gaW5wdXQgc3RyaW5nIGFuZCBhIGZvcm1hdCIpOwogICAgICB9CgogICAgICBjb25zdCB7IGxvY2FsZSA9IG51bGwsIG51bWJlcmluZ1N5c3RlbSA9IG51bGwgfSA9IG9wdHMsCiAgICAgICAgbG9jYWxlVG9Vc2UgPSBMb2NhbGUuZnJvbU9wdHMoewogICAgICAgICAgbG9jYWxlLAogICAgICAgICAgbnVtYmVyaW5nU3lzdGVtLAogICAgICAgICAgZGVmYXVsdFRvRU46IHRydWUsCiAgICAgICAgfSksCiAgICAgICAgW3ZhbHMsIHBhcnNlZFpvbmUsIHNwZWNpZmljT2Zmc2V0LCBpbnZhbGlkXSA9IHBhcnNlRnJvbVRva2Vucyhsb2NhbGVUb1VzZSwgdGV4dCwgZm10KTsKICAgICAgaWYgKGludmFsaWQpIHsKICAgICAgICByZXR1cm4gRGF0ZVRpbWUuaW52YWxpZChpbnZhbGlkKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gcGFyc2VEYXRhVG9EYXRlVGltZSh2YWxzLCBwYXJzZWRab25lLCBvcHRzLCBgZm9ybWF0ICR7Zm10fWAsIHRleHQsIHNwZWNpZmljT2Zmc2V0KTsKICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogQGRlcHJlY2F0ZWQgdXNlIGZyb21Gb3JtYXQgaW5zdGVhZAogICAgICovCiAgICBzdGF0aWMgZnJvbVN0cmluZyh0ZXh0LCBmbXQsIG9wdHMgPSB7fSkgewogICAgICByZXR1cm4gRGF0ZVRpbWUuZnJvbUZvcm1hdCh0ZXh0LCBmbXQsIG9wdHMpOwogICAgfQoKICAgIC8qKgogICAgICogQ3JlYXRlIGEgRGF0ZVRpbWUgZnJvbSBhIFNRTCBkYXRlLCB0aW1lLCBvciBkYXRldGltZQogICAgICogRGVmYXVsdHMgdG8gZW4tVVMgaWYgbm8gbG9jYWxlIGhhcyBiZWVuIHNwZWNpZmllZCwgcmVnYXJkbGVzcyBvZiB0aGUgc3lzdGVtJ3MgbG9jYWxlCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCAtIHRoZSBzdHJpbmcgdG8gcGFyc2UKICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9ucyB0byBhZmZlY3QgdGhlIGNyZWF0aW9uCiAgICAgKiBAcGFyYW0ge3N0cmluZ3xab25lfSBbb3B0cy56b25lPSdsb2NhbCddIC0gdXNlIHRoaXMgem9uZSBpZiBubyBvZmZzZXQgaXMgc3BlY2lmaWVkIGluIHRoZSBpbnB1dCBzdHJpbmcgaXRzZWxmLiBXaWxsIGFsc28gY29udmVydCB0aGUgRGF0ZVRpbWUgdG8gdGhpcyB6b25lCiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLnNldFpvbmU9ZmFsc2VdIC0gb3ZlcnJpZGUgdGhlIHpvbmUgd2l0aCBhIHpvbmUgc3BlY2lmaWVkIGluIHRoZSBzdHJpbmcgaXRzZWxmLCBpZiBpdCBzcGVjaWZpZXMgb25lCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jYWxlPSdlbi1VUyddIC0gYSBsb2NhbGUgc3RyaW5nIHRvIHVzZSB3aGVuIHBhcnNpbmcuIFdpbGwgYWxzbyBzZXQgdGhlIERhdGVUaW1lIHRvIHRoaXMgbG9jYWxlCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0cy5udW1iZXJpbmdTeXN0ZW0gLSB0aGUgbnVtYmVyaW5nIHN5c3RlbSB0byB1c2Ugd2hlbiBwYXJzaW5nLiBXaWxsIGFsc28gc2V0IHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgdG8gdGhpcyBudW1iZXJpbmcgc3lzdGVtCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0cy5vdXRwdXRDYWxlbmRhciAtIHRoZSBvdXRwdXQgY2FsZW5kYXIgdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2UKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21TUUwoJzIwMTctMDUtMTUnKQogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbVNRTCgnMjAxNy0wNS0xNSAwOToxMjozNCcpCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tU1FMKCcyMDE3LTA1LTE1IDA5OjEyOjM0LjM0MicpCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tU1FMKCcyMDE3LTA1LTE1IDA5OjEyOjM0LjM0MiswNjowMCcpCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tU1FMKCcyMDE3LTA1LTE1IDA5OjEyOjM0LjM0MiBBbWVyaWNhL0xvc19BbmdlbGVzJykKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21TUUwoJzIwMTctMDUtMTUgMDk6MTI6MzQuMzQyIEFtZXJpY2EvTG9zX0FuZ2VsZXMnLCB7IHNldFpvbmU6IHRydWUgfSkKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21TUUwoJzIwMTctMDUtMTUgMDk6MTI6MzQuMzQyJywgeyB6b25lOiAnQW1lcmljYS9Mb3NfQW5nZWxlcycgfSkKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21TUUwoJzA5OjEyOjM0LjM0MicpCiAgICAgKiBAcmV0dXJuIHtEYXRlVGltZX0KICAgICAqLwogICAgc3RhdGljIGZyb21TUUwodGV4dCwgb3B0cyA9IHt9KSB7CiAgICAgIGNvbnN0IFt2YWxzLCBwYXJzZWRab25lXSA9IHBhcnNlU1FMKHRleHQpOwogICAgICByZXR1cm4gcGFyc2VEYXRhVG9EYXRlVGltZSh2YWxzLCBwYXJzZWRab25lLCBvcHRzLCAiU1FMIiwgdGV4dCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBDcmVhdGUgYW4gaW52YWxpZCBEYXRlVGltZS4KICAgICAqIEBwYXJhbSB7RGF0ZVRpbWV9IHJlYXNvbiAtIHNpbXBsZSBzdHJpbmcgb2Ygd2h5IHRoaXMgRGF0ZVRpbWUgaXMgaW52YWxpZC4gU2hvdWxkIG5vdCBjb250YWluIHBhcmFtZXRlcnMgb3IgYW55dGhpbmcgZWxzZSBkYXRhLWRlcGVuZGVudAogICAgICogQHBhcmFtIHtzdHJpbmd9IFtleHBsYW5hdGlvbj1udWxsXSAtIGxvbmdlciBleHBsYW5hdGlvbiwgbWF5IGluY2x1ZGUgcGFyYW1ldGVycyBhbmQgb3RoZXIgdXNlZnVsIGRlYnVnZ2luZyBpbmZvcm1hdGlvbgogICAgICogQHJldHVybiB7RGF0ZVRpbWV9CiAgICAgKi8KICAgIHN0YXRpYyBpbnZhbGlkKHJlYXNvbiwgZXhwbGFuYXRpb24gPSBudWxsKSB7CiAgICAgIGlmICghcmVhc29uKSB7CiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKCJuZWVkIHRvIHNwZWNpZnkgYSByZWFzb24gdGhlIERhdGVUaW1lIGlzIGludmFsaWQiKTsKICAgICAgfQoKICAgICAgY29uc3QgaW52YWxpZCA9IHJlYXNvbiBpbnN0YW5jZW9mIEludmFsaWQgPyByZWFzb24gOiBuZXcgSW52YWxpZChyZWFzb24sIGV4cGxhbmF0aW9uKTsKCiAgICAgIGlmIChTZXR0aW5ncy50aHJvd09uSW52YWxpZCkgewogICAgICAgIHRocm93IG5ldyBJbnZhbGlkRGF0ZVRpbWVFcnJvcihpbnZhbGlkKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gbmV3IERhdGVUaW1lKHsgaW52YWxpZCB9KTsKICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogQ2hlY2sgaWYgYW4gb2JqZWN0IGlzIGFuIGluc3RhbmNlIG9mIERhdGVUaW1lLiBXb3JrcyBhY3Jvc3MgY29udGV4dCBib3VuZGFyaWVzCiAgICAgKiBAcGFyYW0ge29iamVjdH0gbwogICAgICogQHJldHVybiB7Ym9vbGVhbn0KICAgICAqLwogICAgc3RhdGljIGlzRGF0ZVRpbWUobykgewogICAgICByZXR1cm4gKG8gJiYgby5pc0x1eG9uRGF0ZVRpbWUpIHx8IGZhbHNlOwogICAgfQoKICAgIC8qKgogICAgICogUHJvZHVjZSB0aGUgZm9ybWF0IHN0cmluZyBmb3IgYSBzZXQgb2Ygb3B0aW9ucwogICAgICogQHBhcmFtIGZvcm1hdE9wdHMKICAgICAqIEBwYXJhbSBsb2NhbGVPcHRzCiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfQogICAgICovCiAgICBzdGF0aWMgcGFyc2VGb3JtYXRGb3JPcHRzKGZvcm1hdE9wdHMsIGxvY2FsZU9wdHMgPSB7fSkgewogICAgICBjb25zdCB0b2tlbkxpc3QgPSBmb3JtYXRPcHRzVG9Ub2tlbnMoZm9ybWF0T3B0cywgTG9jYWxlLmZyb21PYmplY3QobG9jYWxlT3B0cykpOwogICAgICByZXR1cm4gIXRva2VuTGlzdCA/IG51bGwgOiB0b2tlbkxpc3QubWFwKCh0KSA9PiAodCA/IHQudmFsIDogbnVsbCkpLmpvaW4oIiIpOwogICAgfQoKICAgIC8qKgogICAgICogUHJvZHVjZSB0aGUgdGhlIGZ1bGx5IGV4cGFuZGVkIGZvcm1hdCB0b2tlbiBmb3IgdGhlIGxvY2FsZQogICAgICogRG9lcyBOT1QgcXVvdGUgY2hhcmFjdGVycywgc28gcXVvdGVkIHRva2VucyB3aWxsIG5vdCByb3VuZCB0cmlwIGNvcnJlY3RseQogICAgICogQHBhcmFtIGZtdAogICAgICogQHBhcmFtIGxvY2FsZU9wdHMKICAgICAqIEByZXR1cm5zIHtzdHJpbmd9CiAgICAgKi8KICAgIHN0YXRpYyBleHBhbmRGb3JtYXQoZm10LCBsb2NhbGVPcHRzID0ge30pIHsKICAgICAgY29uc3QgZXhwYW5kZWQgPSBleHBhbmRNYWNyb1Rva2VucyhGb3JtYXR0ZXIucGFyc2VGb3JtYXQoZm10KSwgTG9jYWxlLmZyb21PYmplY3QobG9jYWxlT3B0cykpOwogICAgICByZXR1cm4gZXhwYW5kZWQubWFwKCh0KSA9PiB0LnZhbCkuam9pbigiIik7CiAgICB9CgogICAgLy8gSU5GTwoKICAgIC8qKgogICAgICogR2V0IHRoZSB2YWx1ZSBvZiB1bml0LgogICAgICogQHBhcmFtIHtzdHJpbmd9IHVuaXQgLSBhIHVuaXQgc3VjaCBhcyAnbWludXRlJyBvciAnZGF5JwogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgNywgNCkuZ2V0KCdtb250aCcpOyAvLz0+IDcKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDcsIDQpLmdldCgnZGF5Jyk7IC8vPT4gNAogICAgICogQHJldHVybiB7bnVtYmVyfQogICAgICovCiAgICBnZXQodW5pdCkgewogICAgICByZXR1cm4gdGhpc1t1bml0XTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgd2hldGhlciB0aGUgRGF0ZVRpbWUgaXMgdmFsaWQuIEludmFsaWQgRGF0ZVRpbWVzIG9jY3VyIHdoZW46CiAgICAgKiAqIFRoZSBEYXRlVGltZSB3YXMgY3JlYXRlZCBmcm9tIGludmFsaWQgY2FsZW5kYXIgaW5mb3JtYXRpb24sIHN1Y2ggYXMgdGhlIDEzdGggbW9udGggb3IgRmVicnVhcnkgMzAKICAgICAqICogVGhlIERhdGVUaW1lIHdhcyBjcmVhdGVkIGJ5IGFuIG9wZXJhdGlvbiBvbiBhbm90aGVyIGludmFsaWQgZGF0ZQogICAgICogQHR5cGUge2Jvb2xlYW59CiAgICAgKi8KICAgIGdldCBpc1ZhbGlkKCkgewogICAgICByZXR1cm4gdGhpcy5pbnZhbGlkID09PSBudWxsOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyBhbiBlcnJvciBjb2RlIGlmIHRoaXMgRGF0ZVRpbWUgaXMgaW52YWxpZCwgb3IgbnVsbCBpZiB0aGUgRGF0ZVRpbWUgaXMgdmFsaWQKICAgICAqIEB0eXBlIHtzdHJpbmd9CiAgICAgKi8KICAgIGdldCBpbnZhbGlkUmVhc29uKCkgewogICAgICByZXR1cm4gdGhpcy5pbnZhbGlkID8gdGhpcy5pbnZhbGlkLnJlYXNvbiA6IG51bGw7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIGFuIGV4cGxhbmF0aW9uIG9mIHdoeSB0aGlzIERhdGVUaW1lIGJlY2FtZSBpbnZhbGlkLCBvciBudWxsIGlmIHRoZSBEYXRlVGltZSBpcyB2YWxpZAogICAgICogQHR5cGUge3N0cmluZ30KICAgICAqLwogICAgZ2V0IGludmFsaWRFeHBsYW5hdGlvbigpIHsKICAgICAgcmV0dXJuIHRoaXMuaW52YWxpZCA/IHRoaXMuaW52YWxpZC5leHBsYW5hdGlvbiA6IG51bGw7CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQgdGhlIGxvY2FsZSBvZiBhIERhdGVUaW1lLCBzdWNoICdlbi1HQicuIFRoZSBsb2NhbGUgaXMgdXNlZCB3aGVuIGZvcm1hdHRpbmcgdGhlIERhdGVUaW1lCiAgICAgKgogICAgICogQHR5cGUge3N0cmluZ30KICAgICAqLwogICAgZ2V0IGxvY2FsZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMubG9jLmxvY2FsZSA6IG51bGw7CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQgdGhlIG51bWJlcmluZyBzeXN0ZW0gb2YgYSBEYXRlVGltZSwgc3VjaCAnYmVuZycuIFRoZSBudW1iZXJpbmcgc3lzdGVtIGlzIHVzZWQgd2hlbiBmb3JtYXR0aW5nIHRoZSBEYXRlVGltZQogICAgICoKICAgICAqIEB0eXBlIHtzdHJpbmd9CiAgICAgKi8KICAgIGdldCBudW1iZXJpbmdTeXN0ZW0oKSB7CiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLmxvYy5udW1iZXJpbmdTeXN0ZW0gOiBudWxsOwogICAgfQoKICAgIC8qKgogICAgICogR2V0IHRoZSBvdXRwdXQgY2FsZW5kYXIgb2YgYSBEYXRlVGltZSwgc3VjaCAnaXNsYW1pYycuIFRoZSBvdXRwdXQgY2FsZW5kYXIgaXMgdXNlZCB3aGVuIGZvcm1hdHRpbmcgdGhlIERhdGVUaW1lCiAgICAgKgogICAgICogQHR5cGUge3N0cmluZ30KICAgICAqLwogICAgZ2V0IG91dHB1dENhbGVuZGFyKCkgewogICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy5sb2Mub3V0cHV0Q2FsZW5kYXIgOiBudWxsOwogICAgfQoKICAgIC8qKgogICAgICogR2V0IHRoZSB0aW1lIHpvbmUgYXNzb2NpYXRlZCB3aXRoIHRoaXMgRGF0ZVRpbWUuCiAgICAgKiBAdHlwZSB7Wm9uZX0KICAgICAqLwogICAgZ2V0IHpvbmUoKSB7CiAgICAgIHJldHVybiB0aGlzLl96b25lOwogICAgfQoKICAgIC8qKgogICAgICogR2V0IHRoZSBuYW1lIG9mIHRoZSB0aW1lIHpvbmUuCiAgICAgKiBAdHlwZSB7c3RyaW5nfQogICAgICovCiAgICBnZXQgem9uZU5hbWUoKSB7CiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLnpvbmUubmFtZSA6IG51bGw7CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQgdGhlIHllYXIKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDUsIDI1KS55ZWFyIC8vPT4gMjAxNwogICAgICogQHR5cGUge251bWJlcn0KICAgICAqLwogICAgZ2V0IHllYXIoKSB7CiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLmMueWVhciA6IE5hTjsKICAgIH0KCiAgICAvKioKICAgICAqIEdldCB0aGUgcXVhcnRlcgogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgNSwgMjUpLnF1YXJ0ZXIgLy89PiAyCiAgICAgKiBAdHlwZSB7bnVtYmVyfQogICAgICovCiAgICBnZXQgcXVhcnRlcigpIHsKICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IE1hdGguY2VpbCh0aGlzLmMubW9udGggLyAzKSA6IE5hTjsKICAgIH0KCiAgICAvKioKICAgICAqIEdldCB0aGUgbW9udGggKDEtMTIpLgogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgNSwgMjUpLm1vbnRoIC8vPT4gNQogICAgICogQHR5cGUge251bWJlcn0KICAgICAqLwogICAgZ2V0IG1vbnRoKCkgewogICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy5jLm1vbnRoIDogTmFOOwogICAgfQoKICAgIC8qKgogICAgICogR2V0IHRoZSBkYXkgb2YgdGhlIG1vbnRoICgxLTMwaXNoKS4KICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDUsIDI1KS5kYXkgLy89PiAyNQogICAgICogQHR5cGUge251bWJlcn0KICAgICAqLwogICAgZ2V0IGRheSgpIHsKICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMuYy5kYXkgOiBOYU47CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQgdGhlIGhvdXIgb2YgdGhlIGRheSAoMC0yMykuCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCA1LCAyNSwgOSkuaG91ciAvLz0+IDkKICAgICAqIEB0eXBlIHtudW1iZXJ9CiAgICAgKi8KICAgIGdldCBob3VyKCkgewogICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy5jLmhvdXIgOiBOYU47CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQgdGhlIG1pbnV0ZSBvZiB0aGUgaG91ciAoMC01OSkuCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCA1LCAyNSwgOSwgMzApLm1pbnV0ZSAvLz0+IDMwCiAgICAgKiBAdHlwZSB7bnVtYmVyfQogICAgICovCiAgICBnZXQgbWludXRlKCkgewogICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy5jLm1pbnV0ZSA6IE5hTjsKICAgIH0KCiAgICAvKioKICAgICAqIEdldCB0aGUgc2Vjb25kIG9mIHRoZSBtaW51dGUgKDAtNTkpLgogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgNSwgMjUsIDksIDMwLCA1Mikuc2Vjb25kIC8vPT4gNTIKICAgICAqIEB0eXBlIHtudW1iZXJ9CiAgICAgKi8KICAgIGdldCBzZWNvbmQoKSB7CiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLmMuc2Vjb25kIDogTmFOOwogICAgfQoKICAgIC8qKgogICAgICogR2V0IHRoZSBtaWxsaXNlY29uZCBvZiB0aGUgc2Vjb25kICgwLTk5OSkuCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCA1LCAyNSwgOSwgMzAsIDUyLCA2NTQpLm1pbGxpc2Vjb25kIC8vPT4gNjU0CiAgICAgKiBAdHlwZSB7bnVtYmVyfQogICAgICovCiAgICBnZXQgbWlsbGlzZWNvbmQoKSB7CiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLmMubWlsbGlzZWNvbmQgOiBOYU47CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQgdGhlIHdlZWsgeWVhcgogICAgICogQHNlZSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9JU09fd2Vla19kYXRlCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE0LCAxMiwgMzEpLndlZWtZZWFyIC8vPT4gMjAxNQogICAgICogQHR5cGUge251bWJlcn0KICAgICAqLwogICAgZ2V0IHdlZWtZZWFyKCkgewogICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gcG9zc2libHlDYWNoZWRXZWVrRGF0YSh0aGlzKS53ZWVrWWVhciA6IE5hTjsKICAgIH0KCiAgICAvKioKICAgICAqIEdldCB0aGUgd2VlayBudW1iZXIgb2YgdGhlIHdlZWsgeWVhciAoMS01MmlzaCkuCiAgICAgKiBAc2VlIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT193ZWVrX2RhdGUKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDUsIDI1KS53ZWVrTnVtYmVyIC8vPT4gMjEKICAgICAqIEB0eXBlIHtudW1iZXJ9CiAgICAgKi8KICAgIGdldCB3ZWVrTnVtYmVyKCkgewogICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gcG9zc2libHlDYWNoZWRXZWVrRGF0YSh0aGlzKS53ZWVrTnVtYmVyIDogTmFOOwogICAgfQoKICAgIC8qKgogICAgICogR2V0IHRoZSBkYXkgb2YgdGhlIHdlZWsuCiAgICAgKiAxIGlzIE1vbmRheSBhbmQgNyBpcyBTdW5kYXkKICAgICAqIEBzZWUgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSVNPX3dlZWtfZGF0ZQogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNCwgMTEsIDMxKS53ZWVrZGF5IC8vPT4gNAogICAgICogQHR5cGUge251bWJlcn0KICAgICAqLwogICAgZ2V0IHdlZWtkYXkoKSB7CiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyBwb3NzaWJseUNhY2hlZFdlZWtEYXRhKHRoaXMpLndlZWtkYXkgOiBOYU47CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQgdGhlIG9yZGluYWwgKG1lYW5pbmcgdGhlIGRheSBvZiB0aGUgeWVhcikKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDUsIDI1KS5vcmRpbmFsIC8vPT4gMTQ1CiAgICAgKiBAdHlwZSB7bnVtYmVyfERhdGVUaW1lfQogICAgICovCiAgICBnZXQgb3JkaW5hbCgpIHsKICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IGdyZWdvcmlhblRvT3JkaW5hbCh0aGlzLmMpLm9yZGluYWwgOiBOYU47CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQgdGhlIGh1bWFuIHJlYWRhYmxlIHNob3J0IG1vbnRoIG5hbWUsIHN1Y2ggYXMgJ09jdCcuCiAgICAgKiBEZWZhdWx0cyB0byB0aGUgc3lzdGVtJ3MgbG9jYWxlIGlmIG5vIGxvY2FsZSBoYXMgYmVlbiBzcGVjaWZpZWQKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDEwLCAzMCkubW9udGhTaG9ydCAvLz0+IE9jdAogICAgICogQHR5cGUge3N0cmluZ30KICAgICAqLwogICAgZ2V0IG1vbnRoU2hvcnQoKSB7CiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyBJbmZvLm1vbnRocygic2hvcnQiLCB7IGxvY09iajogdGhpcy5sb2MgfSlbdGhpcy5tb250aCAtIDFdIDogbnVsbDsKICAgIH0KCiAgICAvKioKICAgICAqIEdldCB0aGUgaHVtYW4gcmVhZGFibGUgbG9uZyBtb250aCBuYW1lLCBzdWNoIGFzICdPY3RvYmVyJy4KICAgICAqIERlZmF1bHRzIHRvIHRoZSBzeXN0ZW0ncyBsb2NhbGUgaWYgbm8gbG9jYWxlIGhhcyBiZWVuIHNwZWNpZmllZAogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgMTAsIDMwKS5tb250aExvbmcgLy89PiBPY3RvYmVyCiAgICAgKiBAdHlwZSB7c3RyaW5nfQogICAgICovCiAgICBnZXQgbW9udGhMb25nKCkgewogICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gSW5mby5tb250aHMoImxvbmciLCB7IGxvY09iajogdGhpcy5sb2MgfSlbdGhpcy5tb250aCAtIDFdIDogbnVsbDsKICAgIH0KCiAgICAvKioKICAgICAqIEdldCB0aGUgaHVtYW4gcmVhZGFibGUgc2hvcnQgd2Vla2RheSwgc3VjaCBhcyAnTW9uJy4KICAgICAqIERlZmF1bHRzIHRvIHRoZSBzeXN0ZW0ncyBsb2NhbGUgaWYgbm8gbG9jYWxlIGhhcyBiZWVuIHNwZWNpZmllZAogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgMTAsIDMwKS53ZWVrZGF5U2hvcnQgLy89PiBNb24KICAgICAqIEB0eXBlIHtzdHJpbmd9CiAgICAgKi8KICAgIGdldCB3ZWVrZGF5U2hvcnQoKSB7CiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyBJbmZvLndlZWtkYXlzKCJzaG9ydCIsIHsgbG9jT2JqOiB0aGlzLmxvYyB9KVt0aGlzLndlZWtkYXkgLSAxXSA6IG51bGw7CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQgdGhlIGh1bWFuIHJlYWRhYmxlIGxvbmcgd2Vla2RheSwgc3VjaCBhcyAnTW9uZGF5Jy4KICAgICAqIERlZmF1bHRzIHRvIHRoZSBzeXN0ZW0ncyBsb2NhbGUgaWYgbm8gbG9jYWxlIGhhcyBiZWVuIHNwZWNpZmllZAogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgMTAsIDMwKS53ZWVrZGF5TG9uZyAvLz0+IE1vbmRheQogICAgICogQHR5cGUge3N0cmluZ30KICAgICAqLwogICAgZ2V0IHdlZWtkYXlMb25nKCkgewogICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gSW5mby53ZWVrZGF5cygibG9uZyIsIHsgbG9jT2JqOiB0aGlzLmxvYyB9KVt0aGlzLndlZWtkYXkgLSAxXSA6IG51bGw7CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQgdGhlIFVUQyBvZmZzZXQgb2YgdGhpcyBEYXRlVGltZSBpbiBtaW51dGVzCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS5vZmZzZXQgLy89PiAtMjQwCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS51dGMoKS5vZmZzZXQgLy89PiAwCiAgICAgKiBAdHlwZSB7bnVtYmVyfQogICAgICovCiAgICBnZXQgb2Zmc2V0KCkgewogICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gK3RoaXMubyA6IE5hTjsKICAgIH0KCiAgICAvKioKICAgICAqIEdldCB0aGUgc2hvcnQgaHVtYW4gbmFtZSBmb3IgdGhlIHpvbmUncyBjdXJyZW50IG9mZnNldCwgZm9yIGV4YW1wbGUgIkVTVCIgb3IgIkVEVCIuCiAgICAgKiBEZWZhdWx0cyB0byB0aGUgc3lzdGVtJ3MgbG9jYWxlIGlmIG5vIGxvY2FsZSBoYXMgYmVlbiBzcGVjaWZpZWQKICAgICAqIEB0eXBlIHtzdHJpbmd9CiAgICAgKi8KICAgIGdldCBvZmZzZXROYW1lU2hvcnQoKSB7CiAgICAgIGlmICh0aGlzLmlzVmFsaWQpIHsKICAgICAgICByZXR1cm4gdGhpcy56b25lLm9mZnNldE5hbWUodGhpcy50cywgewogICAgICAgICAgZm9ybWF0OiAic2hvcnQiLAogICAgICAgICAgbG9jYWxlOiB0aGlzLmxvY2FsZSwKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogR2V0IHRoZSBsb25nIGh1bWFuIG5hbWUgZm9yIHRoZSB6b25lJ3MgY3VycmVudCBvZmZzZXQsIGZvciBleGFtcGxlICJFYXN0ZXJuIFN0YW5kYXJkIFRpbWUiIG9yICJFYXN0ZXJuIERheWxpZ2h0IFRpbWUiLgogICAgICogRGVmYXVsdHMgdG8gdGhlIHN5c3RlbSdzIGxvY2FsZSBpZiBubyBsb2NhbGUgaGFzIGJlZW4gc3BlY2lmaWVkCiAgICAgKiBAdHlwZSB7c3RyaW5nfQogICAgICovCiAgICBnZXQgb2Zmc2V0TmFtZUxvbmcoKSB7CiAgICAgIGlmICh0aGlzLmlzVmFsaWQpIHsKICAgICAgICByZXR1cm4gdGhpcy56b25lLm9mZnNldE5hbWUodGhpcy50cywgewogICAgICAgICAgZm9ybWF0OiAibG9uZyIsCiAgICAgICAgICBsb2NhbGU6IHRoaXMubG9jYWxlLAogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQgd2hldGhlciB0aGlzIHpvbmUncyBvZmZzZXQgZXZlciBjaGFuZ2VzLCBhcyBpbiBhIERTVC4KICAgICAqIEB0eXBlIHtib29sZWFufQogICAgICovCiAgICBnZXQgaXNPZmZzZXRGaXhlZCgpIHsKICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMuem9uZS5pc1VuaXZlcnNhbCA6IG51bGw7CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQgd2hldGhlciB0aGUgRGF0ZVRpbWUgaXMgaW4gYSBEU1QuCiAgICAgKiBAdHlwZSB7Ym9vbGVhbn0KICAgICAqLwogICAgZ2V0IGlzSW5EU1QoKSB7CiAgICAgIGlmICh0aGlzLmlzT2Zmc2V0Rml4ZWQpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuICgKICAgICAgICAgIHRoaXMub2Zmc2V0ID4gdGhpcy5zZXQoeyBtb250aDogMSwgZGF5OiAxIH0pLm9mZnNldCB8fAogICAgICAgICAgdGhpcy5vZmZzZXQgPiB0aGlzLnNldCh7IG1vbnRoOiA1IH0pLm9mZnNldAogICAgICAgICk7CiAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIERhdGVUaW1lIGlzIGluIGEgbGVhcCB5ZWFyLCBmYWxzZSBvdGhlcndpc2UKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTYpLmlzSW5MZWFwWWVhciAvLz0+IHRydWUKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTMpLmlzSW5MZWFwWWVhciAvLz0+IGZhbHNlCiAgICAgKiBAdHlwZSB7Ym9vbGVhbn0KICAgICAqLwogICAgZ2V0IGlzSW5MZWFwWWVhcigpIHsKICAgICAgcmV0dXJuIGlzTGVhcFllYXIodGhpcy55ZWFyKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgdGhlIG51bWJlciBvZiBkYXlzIGluIHRoaXMgRGF0ZVRpbWUncyBtb250aAogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNiwgMikuZGF5c0luTW9udGggLy89PiAyOQogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNiwgMykuZGF5c0luTW9udGggLy89PiAzMQogICAgICogQHR5cGUge251bWJlcn0KICAgICAqLwogICAgZ2V0IGRheXNJbk1vbnRoKCkgewogICAgICByZXR1cm4gZGF5c0luTW9udGgodGhpcy55ZWFyLCB0aGlzLm1vbnRoKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgdGhlIG51bWJlciBvZiBkYXlzIGluIHRoaXMgRGF0ZVRpbWUncyB5ZWFyCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE2KS5kYXlzSW5ZZWFyIC8vPT4gMzY2CiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDEzKS5kYXlzSW5ZZWFyIC8vPT4gMzY1CiAgICAgKiBAdHlwZSB7bnVtYmVyfQogICAgICovCiAgICBnZXQgZGF5c0luWWVhcigpIHsKICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IGRheXNJblllYXIodGhpcy55ZWFyKSA6IE5hTjsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgdGhlIG51bWJlciBvZiB3ZWVrcyBpbiB0aGlzIERhdGVUaW1lJ3MgeWVhcgogICAgICogQHNlZSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9JU09fd2Vla19kYXRlCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDA0KS53ZWVrc0luV2Vla1llYXIgLy89PiA1MwogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxMykud2Vla3NJbldlZWtZZWFyIC8vPT4gNTIKICAgICAqIEB0eXBlIHtudW1iZXJ9CiAgICAgKi8KICAgIGdldCB3ZWVrc0luV2Vla1llYXIoKSB7CiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB3ZWVrc0luV2Vla1llYXIodGhpcy53ZWVrWWVhcikgOiBOYU47CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSByZXNvbHZlZCBJbnRsIG9wdGlvbnMgZm9yIHRoaXMgRGF0ZVRpbWUuCiAgICAgKiBUaGlzIGlzIHVzZWZ1bCBpbiB1bmRlcnN0YW5kaW5nIHRoZSBiZWhhdmlvciBvZiBmb3JtYXR0aW5nIG1ldGhvZHMKICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gdGhlIHNhbWUgb3B0aW9ucyBhcyB0b0xvY2FsZVN0cmluZwogICAgICogQHJldHVybiB7T2JqZWN0fQogICAgICovCiAgICByZXNvbHZlZExvY2FsZU9wdGlvbnMob3B0cyA9IHt9KSB7CiAgICAgIGNvbnN0IHsgbG9jYWxlLCBudW1iZXJpbmdTeXN0ZW0sIGNhbGVuZGFyIH0gPSBGb3JtYXR0ZXIuY3JlYXRlKAogICAgICAgIHRoaXMubG9jLmNsb25lKG9wdHMpLAogICAgICAgIG9wdHMKICAgICAgKS5yZXNvbHZlZE9wdGlvbnModGhpcyk7CiAgICAgIHJldHVybiB7IGxvY2FsZSwgbnVtYmVyaW5nU3lzdGVtLCBvdXRwdXRDYWxlbmRhcjogY2FsZW5kYXIgfTsKICAgIH0KCiAgICAvLyBUUkFOU0ZPUk0KCiAgICAvKioKICAgICAqICJTZXQiIHRoZSBEYXRlVGltZSdzIHpvbmUgdG8gVVRDLiBSZXR1cm5zIGEgbmV3bHktY29uc3RydWN0ZWQgRGF0ZVRpbWUuCiAgICAgKgogICAgICogRXF1aXZhbGVudCB0byB7QGxpbmsgRGF0ZVRpbWUjc2V0Wm9uZX0oJ3V0YycpCiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29mZnNldD0wXSAtIG9wdGlvbmFsbHksIGFuIG9mZnNldCBmcm9tIFVUQyBpbiBtaW51dGVzCiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdHM9e31dIC0gb3B0aW9ucyB0byBwYXNzIHRvIGBzZXRab25lKClgCiAgICAgKiBAcmV0dXJuIHtEYXRlVGltZX0KICAgICAqLwogICAgdG9VVEMob2Zmc2V0ID0gMCwgb3B0cyA9IHt9KSB7CiAgICAgIHJldHVybiB0aGlzLnNldFpvbmUoRml4ZWRPZmZzZXRab25lLmluc3RhbmNlKG9mZnNldCksIG9wdHMpOwogICAgfQoKICAgIC8qKgogICAgICogIlNldCIgdGhlIERhdGVUaW1lJ3Mgem9uZSB0byB0aGUgaG9zdCdzIGxvY2FsIHpvbmUuIFJldHVybnMgYSBuZXdseS1jb25zdHJ1Y3RlZCBEYXRlVGltZS4KICAgICAqCiAgICAgKiBFcXVpdmFsZW50IHRvIGBzZXRab25lKCdsb2NhbCcpYAogICAgICogQHJldHVybiB7RGF0ZVRpbWV9CiAgICAgKi8KICAgIHRvTG9jYWwoKSB7CiAgICAgIHJldHVybiB0aGlzLnNldFpvbmUoU2V0dGluZ3MuZGVmYXVsdFpvbmUpOwogICAgfQoKICAgIC8qKgogICAgICogIlNldCIgdGhlIERhdGVUaW1lJ3Mgem9uZSB0byBzcGVjaWZpZWQgem9uZS4gUmV0dXJucyBhIG5ld2x5LWNvbnN0cnVjdGVkIERhdGVUaW1lLgogICAgICoKICAgICAqIEJ5IGRlZmF1bHQsIHRoZSBzZXR0ZXIga2VlcHMgdGhlIHVuZGVybHlpbmcgdGltZSB0aGUgc2FtZSAoYXMgaW4sIHRoZSBzYW1lIHRpbWVzdGFtcCksIGJ1dCB0aGUgbmV3IGluc3RhbmNlIHdpbGwgcmVwb3J0IGRpZmZlcmVudCBsb2NhbCB0aW1lcyBhbmQgY29uc2lkZXIgRFNUcyB3aGVuIG1ha2luZyBjb21wdXRhdGlvbnMsIGFzIHdpdGgge0BsaW5rIERhdGVUaW1lI3BsdXN9LiBZb3UgbWF5IHdpc2ggdG8gdXNlIHtAbGluayBEYXRlVGltZSN0b0xvY2FsfSBhbmQge0BsaW5rIERhdGVUaW1lI3RvVVRDfSB3aGljaCBwcm92aWRlIHNpbXBsZSBjb252ZW5pZW5jZSB3cmFwcGVycyBmb3IgY29tbW9ubHkgdXNlZCB6b25lcy4KICAgICAqIEBwYXJhbSB7c3RyaW5nfFpvbmV9IFt6b25lPSdsb2NhbCddIC0gYSB6b25lIGlkZW50aWZpZXIuIEFzIGEgc3RyaW5nLCB0aGF0IGNhbiBiZSBhbnkgSUFOQSB6b25lIHN1cHBvcnRlZCBieSB0aGUgaG9zdCBlbnZpcm9ubWVudCwgb3IgYSBmaXhlZC1vZmZzZXQgbmFtZSBvZiB0aGUgZm9ybSAnVVRDKzMnLCBvciB0aGUgc3RyaW5ncyAnbG9jYWwnIG9yICd1dGMnLiBZb3UgbWF5IGFsc28gc3VwcGx5IGFuIGluc3RhbmNlIG9mIGEge0BsaW5rIERhdGVUaW1lI1pvbmV9IGNsYXNzLgogICAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zCiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLmtlZXBMb2NhbFRpbWU9ZmFsc2VdIC0gSWYgdHJ1ZSwgYWRqdXN0IHRoZSB1bmRlcmx5aW5nIHRpbWUgc28gdGhhdCB0aGUgbG9jYWwgdGltZSBzdGF5cyB0aGUgc2FtZSwgYnV0IGluIHRoZSB0YXJnZXQgem9uZS4gWW91IHNob3VsZCByYXJlbHkgbmVlZCB0aGlzLgogICAgICogQHJldHVybiB7RGF0ZVRpbWV9CiAgICAgKi8KICAgIHNldFpvbmUoem9uZSwgeyBrZWVwTG9jYWxUaW1lID0gZmFsc2UsIGtlZXBDYWxlbmRhclRpbWUgPSBmYWxzZSB9ID0ge30pIHsKICAgICAgem9uZSA9IG5vcm1hbGl6ZVpvbmUoem9uZSwgU2V0dGluZ3MuZGVmYXVsdFpvbmUpOwogICAgICBpZiAoem9uZS5lcXVhbHModGhpcy56b25lKSkgewogICAgICAgIHJldHVybiB0aGlzOwogICAgICB9IGVsc2UgaWYgKCF6b25lLmlzVmFsaWQpIHsKICAgICAgICByZXR1cm4gRGF0ZVRpbWUuaW52YWxpZCh1bnN1cHBvcnRlZFpvbmUoem9uZSkpOwogICAgICB9IGVsc2UgewogICAgICAgIGxldCBuZXdUUyA9IHRoaXMudHM7CiAgICAgICAgaWYgKGtlZXBMb2NhbFRpbWUgfHwga2VlcENhbGVuZGFyVGltZSkgewogICAgICAgICAgY29uc3Qgb2Zmc2V0R3Vlc3MgPSB6b25lLm9mZnNldCh0aGlzLnRzKTsKICAgICAgICAgIGNvbnN0IGFzT2JqID0gdGhpcy50b09iamVjdCgpOwogICAgICAgICAgW25ld1RTXSA9IG9ialRvVFMoYXNPYmosIG9mZnNldEd1ZXNzLCB6b25lKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGNsb25lJDEodGhpcywgeyB0czogbmV3VFMsIHpvbmUgfSk7CiAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqICJTZXQiIHRoZSBsb2NhbGUsIG51bWJlcmluZ1N5c3RlbSwgb3Igb3V0cHV0Q2FsZW5kYXIuIFJldHVybnMgYSBuZXdseS1jb25zdHJ1Y3RlZCBEYXRlVGltZS4KICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wZXJ0aWVzIC0gdGhlIHByb3BlcnRpZXMgdG8gc2V0CiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCA1LCAyNSkucmVjb25maWd1cmUoeyBsb2NhbGU6ICdlbi1HQicgfSkKICAgICAqIEByZXR1cm4ge0RhdGVUaW1lfQogICAgICovCiAgICByZWNvbmZpZ3VyZSh7IGxvY2FsZSwgbnVtYmVyaW5nU3lzdGVtLCBvdXRwdXRDYWxlbmRhciB9ID0ge30pIHsKICAgICAgY29uc3QgbG9jID0gdGhpcy5sb2MuY2xvbmUoeyBsb2NhbGUsIG51bWJlcmluZ1N5c3RlbSwgb3V0cHV0Q2FsZW5kYXIgfSk7CiAgICAgIHJldHVybiBjbG9uZSQxKHRoaXMsIHsgbG9jIH0pOwogICAgfQoKICAgIC8qKgogICAgICogIlNldCIgdGhlIGxvY2FsZS4gUmV0dXJucyBhIG5ld2x5LWNvbnN0cnVjdGVkIERhdGVUaW1lLgogICAgICogSnVzdCBhIGNvbnZlbmllbnQgYWxpYXMgZm9yIHJlY29uZmlndXJlKHsgbG9jYWxlIH0pCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCA1LCAyNSkuc2V0TG9jYWxlKCdlbi1HQicpCiAgICAgKiBAcmV0dXJuIHtEYXRlVGltZX0KICAgICAqLwogICAgc2V0TG9jYWxlKGxvY2FsZSkgewogICAgICByZXR1cm4gdGhpcy5yZWNvbmZpZ3VyZSh7IGxvY2FsZSB9KTsKICAgIH0KCiAgICAvKioKICAgICAqICJTZXQiIHRoZSB2YWx1ZXMgb2Ygc3BlY2lmaWVkIHVuaXRzLiBSZXR1cm5zIGEgbmV3bHktY29uc3RydWN0ZWQgRGF0ZVRpbWUuCiAgICAgKiBZb3UgY2FuIG9ubHkgc2V0IHVuaXRzIHdpdGggdGhpcyBtZXRob2Q7IGZvciAic2V0dGluZyIgbWV0YWRhdGEsIHNlZSB7QGxpbmsgRGF0ZVRpbWUjcmVjb25maWd1cmV9IGFuZCB7QGxpbmsgRGF0ZVRpbWUjc2V0Wm9uZX0uCiAgICAgKiBAcGFyYW0ge09iamVjdH0gdmFsdWVzIC0gYSBtYXBwaW5nIG9mIHVuaXRzIHRvIG51bWJlcnMKICAgICAqIEBleGFtcGxlIGR0LnNldCh7IHllYXI6IDIwMTcgfSkKICAgICAqIEBleGFtcGxlIGR0LnNldCh7IGhvdXI6IDgsIG1pbnV0ZTogMzAgfSkKICAgICAqIEBleGFtcGxlIGR0LnNldCh7IHdlZWtkYXk6IDUgfSkKICAgICAqIEBleGFtcGxlIGR0LnNldCh7IHllYXI6IDIwMDUsIG9yZGluYWw6IDIzNCB9KQogICAgICogQHJldHVybiB7RGF0ZVRpbWV9CiAgICAgKi8KICAgIHNldCh2YWx1ZXMpIHsKICAgICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiB0aGlzOwoKICAgICAgY29uc3Qgbm9ybWFsaXplZCA9IG5vcm1hbGl6ZU9iamVjdCh2YWx1ZXMsIG5vcm1hbGl6ZVVuaXQpLAogICAgICAgIHNldHRpbmdXZWVrU3R1ZmYgPQogICAgICAgICAgIWlzVW5kZWZpbmVkKG5vcm1hbGl6ZWQud2Vla1llYXIpIHx8CiAgICAgICAgICAhaXNVbmRlZmluZWQobm9ybWFsaXplZC53ZWVrTnVtYmVyKSB8fAogICAgICAgICAgIWlzVW5kZWZpbmVkKG5vcm1hbGl6ZWQud2Vla2RheSksCiAgICAgICAgY29udGFpbnNPcmRpbmFsID0gIWlzVW5kZWZpbmVkKG5vcm1hbGl6ZWQub3JkaW5hbCksCiAgICAgICAgY29udGFpbnNHcmVnb3JZZWFyID0gIWlzVW5kZWZpbmVkKG5vcm1hbGl6ZWQueWVhciksCiAgICAgICAgY29udGFpbnNHcmVnb3JNRCA9ICFpc1VuZGVmaW5lZChub3JtYWxpemVkLm1vbnRoKSB8fCAhaXNVbmRlZmluZWQobm9ybWFsaXplZC5kYXkpLAogICAgICAgIGNvbnRhaW5zR3JlZ29yID0gY29udGFpbnNHcmVnb3JZZWFyIHx8IGNvbnRhaW5zR3JlZ29yTUQsCiAgICAgICAgZGVmaW5pdGVXZWVrRGVmID0gbm9ybWFsaXplZC53ZWVrWWVhciB8fCBub3JtYWxpemVkLndlZWtOdW1iZXI7CgogICAgICBpZiAoKGNvbnRhaW5zR3JlZ29yIHx8IGNvbnRhaW5zT3JkaW5hbCkgJiYgZGVmaW5pdGVXZWVrRGVmKSB7CiAgICAgICAgdGhyb3cgbmV3IENvbmZsaWN0aW5nU3BlY2lmaWNhdGlvbkVycm9yKAogICAgICAgICAgIkNhbid0IG1peCB3ZWVrWWVhci93ZWVrTnVtYmVyIHVuaXRzIHdpdGggeWVhci9tb250aC9kYXkgb3Igb3JkaW5hbHMiCiAgICAgICAgKTsKICAgICAgfQoKICAgICAgaWYgKGNvbnRhaW5zR3JlZ29yTUQgJiYgY29udGFpbnNPcmRpbmFsKSB7CiAgICAgICAgdGhyb3cgbmV3IENvbmZsaWN0aW5nU3BlY2lmaWNhdGlvbkVycm9yKCJDYW4ndCBtaXggb3JkaW5hbCBkYXRlcyB3aXRoIG1vbnRoL2RheSIpOwogICAgICB9CgogICAgICBsZXQgbWl4ZWQ7CiAgICAgIGlmIChzZXR0aW5nV2Vla1N0dWZmKSB7CiAgICAgICAgbWl4ZWQgPSB3ZWVrVG9HcmVnb3JpYW4oeyAuLi5ncmVnb3JpYW5Ub1dlZWsodGhpcy5jKSwgLi4ubm9ybWFsaXplZCB9KTsKICAgICAgfSBlbHNlIGlmICghaXNVbmRlZmluZWQobm9ybWFsaXplZC5vcmRpbmFsKSkgewogICAgICAgIG1peGVkID0gb3JkaW5hbFRvR3JlZ29yaWFuKHsgLi4uZ3JlZ29yaWFuVG9PcmRpbmFsKHRoaXMuYyksIC4uLm5vcm1hbGl6ZWQgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbWl4ZWQgPSB7IC4uLnRoaXMudG9PYmplY3QoKSwgLi4ubm9ybWFsaXplZCB9OwoKICAgICAgICAvLyBpZiB3ZSBkaWRuJ3Qgc2V0IHRoZSBkYXkgYnV0IHdlIGVuZGVkIHVwIG9uIGFuIG92ZXJmbG93IGRhdGUsCiAgICAgICAgLy8gdXNlIHRoZSBsYXN0IGRheSBvZiB0aGUgcmlnaHQgbW9udGgKICAgICAgICBpZiAoaXNVbmRlZmluZWQobm9ybWFsaXplZC5kYXkpKSB7CiAgICAgICAgICBtaXhlZC5kYXkgPSBNYXRoLm1pbihkYXlzSW5Nb250aChtaXhlZC55ZWFyLCBtaXhlZC5tb250aCksIG1peGVkLmRheSk7CiAgICAgICAgfQogICAgICB9CgogICAgICBjb25zdCBbdHMsIG9dID0gb2JqVG9UUyhtaXhlZCwgdGhpcy5vLCB0aGlzLnpvbmUpOwogICAgICByZXR1cm4gY2xvbmUkMSh0aGlzLCB7IHRzLCBvIH0pOwogICAgfQoKICAgIC8qKgogICAgICogQWRkIGEgcGVyaW9kIG9mIHRpbWUgdG8gdGhpcyBEYXRlVGltZSBhbmQgcmV0dXJuIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUKICAgICAqCiAgICAgKiBBZGRpbmcgaG91cnMsIG1pbnV0ZXMsIHNlY29uZHMsIG9yIG1pbGxpc2Vjb25kcyBpbmNyZWFzZXMgdGhlIHRpbWVzdGFtcCBieSB0aGUgcmlnaHQgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcy4gQWRkaW5nIGRheXMsIG1vbnRocywgb3IgeWVhcnMgc2hpZnRzIHRoZSBjYWxlbmRhciwgYWNjb3VudGluZyBmb3IgRFNUcyBhbmQgbGVhcCB5ZWFycyBhbG9uZyB0aGUgd2F5LiBUaHVzLCBgZHQucGx1cyh7IGhvdXJzOiAyNCB9KWAgbWF5IHJlc3VsdCBpbiBhIGRpZmZlcmVudCB0aW1lIHRoYW4gYGR0LnBsdXMoeyBkYXlzOiAxIH0pYCBpZiB0aGVyZSdzIGEgRFNUIHNoaWZ0IGluIGJldHdlZW4uCiAgICAgKiBAcGFyYW0ge0R1cmF0aW9ufE9iamVjdHxudW1iZXJ9IGR1cmF0aW9uIC0gVGhlIGFtb3VudCB0byBhZGQuIEVpdGhlciBhIEx1eG9uIER1cmF0aW9uLCBhIG51bWJlciBvZiBtaWxsaXNlY29uZHMsIHRoZSBvYmplY3QgYXJndW1lbnQgdG8gRHVyYXRpb24uZnJvbU9iamVjdCgpCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS5wbHVzKDEyMykgLy9+PiBpbiAxMjMgbWlsbGlzZWNvbmRzCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS5wbHVzKHsgbWludXRlczogMTUgfSkgLy9+PiBpbiAxNSBtaW51dGVzCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS5wbHVzKHsgZGF5czogMSB9KSAvL34+IHRoaXMgdGltZSB0b21vcnJvdwogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkucGx1cyh7IGRheXM6IC0xIH0pIC8vfj4gdGhpcyB0aW1lIHllc3RlcmRheQogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkucGx1cyh7IGhvdXJzOiAzLCBtaW51dGVzOiAxMyB9KSAvL34+IGluIDMgaHIsIDEzIG1pbgogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkucGx1cyhEdXJhdGlvbi5mcm9tT2JqZWN0KHsgaG91cnM6IDMsIG1pbnV0ZXM6IDEzIH0pKSAvL34+IGluIDMgaHIsIDEzIG1pbgogICAgICogQHJldHVybiB7RGF0ZVRpbWV9CiAgICAgKi8KICAgIHBsdXMoZHVyYXRpb24pIHsKICAgICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiB0aGlzOwogICAgICBjb25zdCBkdXIgPSBEdXJhdGlvbi5mcm9tRHVyYXRpb25MaWtlKGR1cmF0aW9uKTsKICAgICAgcmV0dXJuIGNsb25lJDEodGhpcywgYWRqdXN0VGltZSh0aGlzLCBkdXIpKTsKICAgIH0KCiAgICAvKioKICAgICAqIFN1YnRyYWN0IGEgcGVyaW9kIG9mIHRpbWUgdG8gdGhpcyBEYXRlVGltZSBhbmQgcmV0dXJuIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUKICAgICAqIFNlZSB7QGxpbmsgRGF0ZVRpbWUjcGx1c30KICAgICAqIEBwYXJhbSB7RHVyYXRpb258T2JqZWN0fG51bWJlcn0gZHVyYXRpb24gLSBUaGUgYW1vdW50IHRvIHN1YnRyYWN0LiBFaXRoZXIgYSBMdXhvbiBEdXJhdGlvbiwgYSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzLCB0aGUgb2JqZWN0IGFyZ3VtZW50IHRvIER1cmF0aW9uLmZyb21PYmplY3QoKQogICAgIEByZXR1cm4ge0RhdGVUaW1lfQogICAgICovCiAgICBtaW51cyhkdXJhdGlvbikgewogICAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIHRoaXM7CiAgICAgIGNvbnN0IGR1ciA9IER1cmF0aW9uLmZyb21EdXJhdGlvbkxpa2UoZHVyYXRpb24pLm5lZ2F0ZSgpOwogICAgICByZXR1cm4gY2xvbmUkMSh0aGlzLCBhZGp1c3RUaW1lKHRoaXMsIGR1cikpOwogICAgfQoKICAgIC8qKgogICAgICogIlNldCIgdGhpcyBEYXRlVGltZSB0byB0aGUgYmVnaW5uaW5nIG9mIGEgdW5pdCBvZiB0aW1lLgogICAgICogQHBhcmFtIHtzdHJpbmd9IHVuaXQgLSBUaGUgdW5pdCB0byBnbyB0byB0aGUgYmVnaW5uaW5nIG9mLiBDYW4gYmUgJ3llYXInLCAncXVhcnRlcicsICdtb250aCcsICd3ZWVrJywgJ2RheScsICdob3VyJywgJ21pbnV0ZScsICdzZWNvbmQnLCBvciAnbWlsbGlzZWNvbmQnLgogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNCwgMywgMykuc3RhcnRPZignbW9udGgnKS50b0lTT0RhdGUoKTsgLy89PiAnMjAxNC0wMy0wMScKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTQsIDMsIDMpLnN0YXJ0T2YoJ3llYXInKS50b0lTT0RhdGUoKTsgLy89PiAnMjAxNC0wMS0wMScKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTQsIDMsIDMpLnN0YXJ0T2YoJ3dlZWsnKS50b0lTT0RhdGUoKTsgLy89PiAnMjAxNC0wMy0wMycsIHdlZWtzIGFsd2F5cyBzdGFydCBvbiBNb25kYXlzCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE0LCAzLCAzLCA1LCAzMCkuc3RhcnRPZignZGF5JykudG9JU09UaW1lKCk7IC8vPT4gJzAwOjAwLjAwMC0wNTowMCcKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTQsIDMsIDMsIDUsIDMwKS5zdGFydE9mKCdob3VyJykudG9JU09UaW1lKCk7IC8vPT4gJzA1OjAwOjAwLjAwMC0wNTowMCcKICAgICAqIEByZXR1cm4ge0RhdGVUaW1lfQogICAgICovCiAgICBzdGFydE9mKHVuaXQpIHsKICAgICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiB0aGlzOwogICAgICBjb25zdCBvID0ge30sCiAgICAgICAgbm9ybWFsaXplZFVuaXQgPSBEdXJhdGlvbi5ub3JtYWxpemVVbml0KHVuaXQpOwogICAgICBzd2l0Y2ggKG5vcm1hbGl6ZWRVbml0KSB7CiAgICAgICAgY2FzZSAieWVhcnMiOgogICAgICAgICAgby5tb250aCA9IDE7CiAgICAgICAgLy8gZmFsbHMgdGhyb3VnaAogICAgICAgIGNhc2UgInF1YXJ0ZXJzIjoKICAgICAgICBjYXNlICJtb250aHMiOgogICAgICAgICAgby5kYXkgPSAxOwogICAgICAgIC8vIGZhbGxzIHRocm91Z2gKICAgICAgICBjYXNlICJ3ZWVrcyI6CiAgICAgICAgY2FzZSAiZGF5cyI6CiAgICAgICAgICBvLmhvdXIgPSAwOwogICAgICAgIC8vIGZhbGxzIHRocm91Z2gKICAgICAgICBjYXNlICJob3VycyI6CiAgICAgICAgICBvLm1pbnV0ZSA9IDA7CiAgICAgICAgLy8gZmFsbHMgdGhyb3VnaAogICAgICAgIGNhc2UgIm1pbnV0ZXMiOgogICAgICAgICAgby5zZWNvbmQgPSAwOwogICAgICAgIC8vIGZhbGxzIHRocm91Z2gKICAgICAgICBjYXNlICJzZWNvbmRzIjoKICAgICAgICAgIG8ubWlsbGlzZWNvbmQgPSAwOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgLy8gbm8gZGVmYXVsdCwgaW52YWxpZCB1bml0cyB0aHJvdyBpbiBub3JtYWxpemVVbml0KCkKICAgICAgfQoKICAgICAgaWYgKG5vcm1hbGl6ZWRVbml0ID09PSAid2Vla3MiKSB7CiAgICAgICAgby53ZWVrZGF5ID0gMTsKICAgICAgfQoKICAgICAgaWYgKG5vcm1hbGl6ZWRVbml0ID09PSAicXVhcnRlcnMiKSB7CiAgICAgICAgY29uc3QgcSA9IE1hdGguY2VpbCh0aGlzLm1vbnRoIC8gMyk7CiAgICAgICAgby5tb250aCA9IChxIC0gMSkgKiAzICsgMTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXMuc2V0KG8pOwogICAgfQoKICAgIC8qKgogICAgICogIlNldCIgdGhpcyBEYXRlVGltZSB0byB0aGUgZW5kIChtZWFuaW5nIHRoZSBsYXN0IG1pbGxpc2Vjb25kKSBvZiBhIHVuaXQgb2YgdGltZQogICAgICogQHBhcmFtIHtzdHJpbmd9IHVuaXQgLSBUaGUgdW5pdCB0byBnbyB0byB0aGUgZW5kIG9mLiBDYW4gYmUgJ3llYXInLCAncXVhcnRlcicsICdtb250aCcsICd3ZWVrJywgJ2RheScsICdob3VyJywgJ21pbnV0ZScsICdzZWNvbmQnLCBvciAnbWlsbGlzZWNvbmQnLgogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNCwgMywgMykuZW5kT2YoJ21vbnRoJykudG9JU08oKTsgLy89PiAnMjAxNC0wMy0zMVQyMzo1OTo1OS45OTktMDU6MDAnCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE0LCAzLCAzKS5lbmRPZigneWVhcicpLnRvSVNPKCk7IC8vPT4gJzIwMTQtMTItMzFUMjM6NTk6NTkuOTk5LTA1OjAwJwogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNCwgMywgMykuZW5kT2YoJ3dlZWsnKS50b0lTTygpOyAvLyA9PiAnMjAxNC0wMy0wOVQyMzo1OTo1OS45OTktMDU6MDAnLCB3ZWVrcyBzdGFydCBvbiBNb25kYXlzCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE0LCAzLCAzLCA1LCAzMCkuZW5kT2YoJ2RheScpLnRvSVNPKCk7IC8vPT4gJzIwMTQtMDMtMDNUMjM6NTk6NTkuOTk5LTA1OjAwJwogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNCwgMywgMywgNSwgMzApLmVuZE9mKCdob3VyJykudG9JU08oKTsgLy89PiAnMjAxNC0wMy0wM1QwNTo1OTo1OS45OTktMDU6MDAnCiAgICAgKiBAcmV0dXJuIHtEYXRlVGltZX0KICAgICAqLwogICAgZW5kT2YodW5pdCkgewogICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkCiAgICAgICAgPyB0aGlzLnBsdXMoeyBbdW5pdF06IDEgfSkKICAgICAgICAgICAgLnN0YXJ0T2YodW5pdCkKICAgICAgICAgICAgLm1pbnVzKDEpCiAgICAgICAgOiB0aGlzOwogICAgfQoKICAgIC8vIE9VVFBVVAoKICAgIC8qKgogICAgICogUmV0dXJucyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIERhdGVUaW1lIGZvcm1hdHRlZCBhY2NvcmRpbmcgdG8gdGhlIHNwZWNpZmllZCBmb3JtYXQgc3RyaW5nLgogICAgICogKipZb3UgbWF5IG5vdCB3YW50IHRoaXMuKiogU2VlIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9yIGEgbW9yZSBmbGV4aWJsZSBmb3JtYXR0aW5nIHRvb2wuIEZvciBhIHRhYmxlIG9mIHRva2VucyBhbmQgdGhlaXIgaW50ZXJwcmV0YXRpb25zLCBzZWUgW2hlcmVdKGh0dHBzOi8vbW9tZW50LmdpdGh1Yi5pby9sdXhvbi8jL2Zvcm1hdHRpbmc/aWQ9dGFibGUtb2YtdG9rZW5zKS4KICAgICAqIERlZmF1bHRzIHRvIGVuLVVTIGlmIG5vIGxvY2FsZSBoYXMgYmVlbiBzcGVjaWZpZWQsIHJlZ2FyZGxlc3Mgb2YgdGhlIHN5c3RlbSdzIGxvY2FsZS4KICAgICAqIEBwYXJhbSB7c3RyaW5nfSBmbXQgLSB0aGUgZm9ybWF0IHN0cmluZwogICAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRzIHRvIG92ZXJyaWRlIHRoZSBjb25maWd1cmF0aW9uIG9wdGlvbnMgb24gdGhpcyBEYXRlVGltZQogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkudG9Gb3JtYXQoJ3l5eXkgTExMIGRkJykgLy89PiAnMjAxNyBBcHIgMjInCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS5zZXRMb2NhbGUoJ2ZyJykudG9Gb3JtYXQoJ3l5eXkgTExMIGRkJykgLy89PiAnMjAxNyBhdnIuIDIyJwogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkudG9Gb3JtYXQoJ3l5eXkgTExMIGRkJywgeyBsb2NhbGU6ICJmciIgfSkgLy89PiAnMjAxNyBhdnIuIDIyJwogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkudG9Gb3JtYXQoIkhIICdob3VycyBhbmQnIG1tICdtaW51dGVzJyIpIC8vPT4gJzIwIGhvdXJzIGFuZCA1NSBtaW51dGVzJwogICAgICogQHJldHVybiB7c3RyaW5nfQogICAgICovCiAgICB0b0Zvcm1hdChmbXQsIG9wdHMgPSB7fSkgewogICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkCiAgICAgICAgPyBGb3JtYXR0ZXIuY3JlYXRlKHRoaXMubG9jLnJlZGVmYXVsdFRvRU4ob3B0cykpLmZvcm1hdERhdGVUaW1lRnJvbVN0cmluZyh0aGlzLCBmbXQpCiAgICAgICAgOiBJTlZBTElEJDE7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIGEgbG9jYWxpemVkIHN0cmluZyByZXByZXNlbnRpbmcgdGhpcyBkYXRlLiBBY2NlcHRzIHRoZSBzYW1lIG9wdGlvbnMgYXMgdGhlIEludGwuRGF0ZVRpbWVGb3JtYXQgY29uc3RydWN0b3IgYW5kIGFueSBwcmVzZXRzIGRlZmluZWQgYnkgTHV4b24sIHN1Y2ggYXMgYERhdGVUaW1lLkRBVEVfRlVMTGAgb3IgYERhdGVUaW1lLlRJTUVfU0lNUExFYC4KICAgICAqIFRoZSBleGFjdCBiZWhhdmlvciBvZiB0aGlzIG1ldGhvZCBpcyBicm93c2VyLXNwZWNpZmljLCBidXQgaW4gZ2VuZXJhbCBpdCB3aWxsIHJldHVybiBhbiBhcHByb3ByaWF0ZSByZXByZXNlbnRhdGlvbgogICAgICogb2YgdGhlIERhdGVUaW1lIGluIHRoZSBhc3NpZ25lZCBsb2NhbGUuCiAgICAgKiBEZWZhdWx0cyB0byB0aGUgc3lzdGVtJ3MgbG9jYWxlIGlmIG5vIGxvY2FsZSBoYXMgYmVlbiBzcGVjaWZpZWQKICAgICAqIEBzZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvRGF0ZVRpbWVGb3JtYXQKICAgICAqIEBwYXJhbSBmb3JtYXRPcHRzIHtPYmplY3R9IC0gSW50bC5EYXRlVGltZUZvcm1hdCBjb25zdHJ1Y3RvciBvcHRpb25zIGFuZCBjb25maWd1cmF0aW9uIG9wdGlvbnMKICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0cyB0byBvdmVycmlkZSB0aGUgY29uZmlndXJhdGlvbiBvcHRpb25zIG9uIHRoaXMgRGF0ZVRpbWUKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnRvTG9jYWxlU3RyaW5nKCk7IC8vPT4gNC8yMC8yMDE3CiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS5zZXRMb2NhbGUoJ2VuLWdiJykudG9Mb2NhbGVTdHJpbmcoKTsgLy89PiAnMjAvMDQvMjAxNycKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnRvTG9jYWxlU3RyaW5nKERhdGVUaW1lLkRBVEVfRlVMTCk7IC8vPT4gJ0FwcmlsIDIwLCAyMDE3JwogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkudG9Mb2NhbGVTdHJpbmcoRGF0ZVRpbWUuREFURV9GVUxMLCB7IGxvY2FsZTogJ2ZyJyB9KTsgLy89PiAnMjggYW/Du3QgMjAyMicKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnRvTG9jYWxlU3RyaW5nKERhdGVUaW1lLlRJTUVfU0lNUExFKTsgLy89PiAnMTE6MzIgQU0nCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS50b0xvY2FsZVN0cmluZyhEYXRlVGltZS5EQVRFVElNRV9TSE9SVCk7IC8vPT4gJzQvMjAvMjAxNywgMTE6MzIgQU0nCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS50b0xvY2FsZVN0cmluZyh7IHdlZWtkYXk6ICdsb25nJywgbW9udGg6ICdsb25nJywgZGF5OiAnMi1kaWdpdCcgfSk7IC8vPT4gJ1RodXJzZGF5LCBBcHJpbCAyMCcKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnRvTG9jYWxlU3RyaW5nKHsgd2Vla2RheTogJ3Nob3J0JywgbW9udGg6ICdzaG9ydCcsIGRheTogJzItZGlnaXQnLCBob3VyOiAnMi1kaWdpdCcsIG1pbnV0ZTogJzItZGlnaXQnIH0pOyAvLz0+ICdUaHUsIEFwciAyMCwgMTE6MjcgQU0nCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS50b0xvY2FsZVN0cmluZyh7IGhvdXI6ICcyLWRpZ2l0JywgbWludXRlOiAnMi1kaWdpdCcsIGhvdXJDeWNsZTogJ2gyMycgfSk7IC8vPT4gJzExOjMyJwogICAgICogQHJldHVybiB7c3RyaW5nfQogICAgICovCiAgICB0b0xvY2FsZVN0cmluZyhmb3JtYXRPcHRzID0gREFURV9TSE9SVCwgb3B0cyA9IHt9KSB7CiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQKICAgICAgICA/IEZvcm1hdHRlci5jcmVhdGUodGhpcy5sb2MuY2xvbmUob3B0cyksIGZvcm1hdE9wdHMpLmZvcm1hdERhdGVUaW1lKHRoaXMpCiAgICAgICAgOiBJTlZBTElEJDE7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIGFuIGFycmF5IG9mIGZvcm1hdCAicGFydHMiLCBtZWFuaW5nIGluZGl2aWR1YWwgdG9rZW5zIGFsb25nIHdpdGggbWV0YWRhdGEuIFRoaXMgaXMgYWxsb3dzIGNhbGxlcnMgdG8gcG9zdC1wcm9jZXNzIGluZGl2aWR1YWwgc2VjdGlvbnMgb2YgdGhlIGZvcm1hdHRlZCBvdXRwdXQuCiAgICAgKiBEZWZhdWx0cyB0byB0aGUgc3lzdGVtJ3MgbG9jYWxlIGlmIG5vIGxvY2FsZSBoYXMgYmVlbiBzcGVjaWZpZWQKICAgICAqIEBzZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvRGF0ZVRpbWVGb3JtYXQvZm9ybWF0VG9QYXJ0cwogICAgICogQHBhcmFtIG9wdHMge09iamVjdH0gLSBJbnRsLkRhdGVUaW1lRm9ybWF0IGNvbnN0cnVjdG9yIG9wdGlvbnMsIHNhbWUgYXMgYHRvTG9jYWxlU3RyaW5nYC4KICAgICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnRvTG9jYWxlUGFydHMoKTsgLy89PiBbCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy89PiAgIHsgdHlwZTogJ2RheScsIHZhbHVlOiAnMjUnIH0sCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy89PiAgIHsgdHlwZTogJ2xpdGVyYWwnLCB2YWx1ZTogJy8nIH0sCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy89PiAgIHsgdHlwZTogJ21vbnRoJywgdmFsdWU6ICcwNScgfSwKICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLz0+ICAgeyB0eXBlOiAnbGl0ZXJhbCcsIHZhbHVlOiAnLycgfSwKICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLz0+ICAgeyB0eXBlOiAneWVhcicsIHZhbHVlOiAnMTk4MicgfQogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vPT4gXQogICAgICovCiAgICB0b0xvY2FsZVBhcnRzKG9wdHMgPSB7fSkgewogICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkCiAgICAgICAgPyBGb3JtYXR0ZXIuY3JlYXRlKHRoaXMubG9jLmNsb25lKG9wdHMpLCBvcHRzKS5mb3JtYXREYXRlVGltZVBhcnRzKHRoaXMpCiAgICAgICAgOiBbXTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgYW4gSVNPIDg2MDEtY29tcGxpYW50IHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIERhdGVUaW1lCiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnMKICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuc3VwcHJlc3NNaWxsaXNlY29uZHM9ZmFsc2VdIC0gZXhjbHVkZSBtaWxsaXNlY29uZHMgZnJvbSB0aGUgZm9ybWF0IGlmIHRoZXkncmUgMAogICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5zdXBwcmVzc1NlY29uZHM9ZmFsc2VdIC0gZXhjbHVkZSBzZWNvbmRzIGZyb20gdGhlIGZvcm1hdCBpZiB0aGV5J3JlIDAKICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuaW5jbHVkZU9mZnNldD10cnVlXSAtIGluY2x1ZGUgdGhlIG9mZnNldCwgc3VjaCBhcyAnWicgb3IgJy0wNDowMCcKICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuZXh0ZW5kZWRab25lPWZhbHNlXSAtIGFkZCB0aGUgdGltZSB6b25lIGZvcm1hdCBleHRlbnNpb24KICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5mb3JtYXQ9J2V4dGVuZGVkJ10gLSBjaG9vc2UgYmV0d2VlbiB0aGUgYmFzaWMgYW5kIGV4dGVuZGVkIGZvcm1hdAogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKDE5ODMsIDUsIDI1KS50b0lTTygpIC8vPT4gJzE5ODItMDUtMjVUMDA6MDA6MDAuMDAwWicKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnRvSVNPKCkgLy89PiAnMjAxNy0wNC0yMlQyMDo0NzowNS4zMzUtMDQ6MDAnCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS50b0lTTyh7IGluY2x1ZGVPZmZzZXQ6IGZhbHNlIH0pIC8vPT4gJzIwMTctMDQtMjJUMjA6NDc6MDUuMzM1JwogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkudG9JU08oeyBmb3JtYXQ6ICdiYXNpYycgfSkgLy89PiAnMjAxNzA0MjJUMjA0NzA1LjMzNS0wNDAwJwogICAgICogQHJldHVybiB7c3RyaW5nfQogICAgICovCiAgICB0b0lTTyh7CiAgICAgIGZvcm1hdCA9ICJleHRlbmRlZCIsCiAgICAgIHN1cHByZXNzU2Vjb25kcyA9IGZhbHNlLAogICAgICBzdXBwcmVzc01pbGxpc2Vjb25kcyA9IGZhbHNlLAogICAgICBpbmNsdWRlT2Zmc2V0ID0gdHJ1ZSwKICAgICAgZXh0ZW5kZWRab25lID0gZmFsc2UsCiAgICB9ID0ge30pIHsKICAgICAgaWYgKCF0aGlzLmlzVmFsaWQpIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQoKICAgICAgY29uc3QgZXh0ID0gZm9ybWF0ID09PSAiZXh0ZW5kZWQiOwoKICAgICAgbGV0IGMgPSB0b0lTT0RhdGUodGhpcywgZXh0KTsKICAgICAgYyArPSAiVCI7CiAgICAgIGMgKz0gdG9JU09UaW1lKHRoaXMsIGV4dCwgc3VwcHJlc3NTZWNvbmRzLCBzdXBwcmVzc01pbGxpc2Vjb25kcywgaW5jbHVkZU9mZnNldCwgZXh0ZW5kZWRab25lKTsKICAgICAgcmV0dXJuIGM7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIGFuIElTTyA4NjAxLWNvbXBsaWFudCBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBEYXRlVGltZSdzIGRhdGUgY29tcG9uZW50CiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnMKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5mb3JtYXQ9J2V4dGVuZGVkJ10gLSBjaG9vc2UgYmV0d2VlbiB0aGUgYmFzaWMgYW5kIGV4dGVuZGVkIGZvcm1hdAogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKDE5ODIsIDUsIDI1KS50b0lTT0RhdGUoKSAvLz0+ICcxOTgyLTA1LTI1JwogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKDE5ODIsIDUsIDI1KS50b0lTT0RhdGUoeyBmb3JtYXQ6ICdiYXNpYycgfSkgLy89PiAnMTk4MjA1MjUnCiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9CiAgICAgKi8KICAgIHRvSVNPRGF0ZSh7IGZvcm1hdCA9ICJleHRlbmRlZCIgfSA9IHt9KSB7CiAgICAgIGlmICghdGhpcy5pc1ZhbGlkKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KCiAgICAgIHJldHVybiB0b0lTT0RhdGUodGhpcywgZm9ybWF0ID09PSAiZXh0ZW5kZWQiKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgYW4gSVNPIDg2MDEtY29tcGxpYW50IHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIERhdGVUaW1lJ3Mgd2VlayBkYXRlCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS51dGMoMTk4MiwgNSwgMjUpLnRvSVNPV2Vla0RhdGUoKSAvLz0+ICcxOTgyLVcyMS0yJwogICAgICogQHJldHVybiB7c3RyaW5nfQogICAgICovCiAgICB0b0lTT1dlZWtEYXRlKCkgewogICAgICByZXR1cm4gdG9UZWNoRm9ybWF0KHRoaXMsICJra2trLSdXJ1dXLWMiKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgYW4gSVNPIDg2MDEtY29tcGxpYW50IHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIERhdGVUaW1lJ3MgdGltZSBjb21wb25lbnQKICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9ucwogICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5zdXBwcmVzc01pbGxpc2Vjb25kcz1mYWxzZV0gLSBleGNsdWRlIG1pbGxpc2Vjb25kcyBmcm9tIHRoZSBmb3JtYXQgaWYgdGhleSdyZSAwCiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLnN1cHByZXNzU2Vjb25kcz1mYWxzZV0gLSBleGNsdWRlIHNlY29uZHMgZnJvbSB0aGUgZm9ybWF0IGlmIHRoZXkncmUgMAogICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5pbmNsdWRlT2Zmc2V0PXRydWVdIC0gaW5jbHVkZSB0aGUgb2Zmc2V0LCBzdWNoIGFzICdaJyBvciAnLTA0OjAwJwogICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5leHRlbmRlZFpvbmU9dHJ1ZV0gLSBhZGQgdGhlIHRpbWUgem9uZSBmb3JtYXQgZXh0ZW5zaW9uCiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLmluY2x1ZGVQcmVmaXg9ZmFsc2VdIC0gaW5jbHVkZSB0aGUgYFRgIHByZWZpeAogICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmZvcm1hdD0nZXh0ZW5kZWQnXSAtIGNob29zZSBiZXR3ZWVuIHRoZSBiYXNpYyBhbmQgZXh0ZW5kZWQgZm9ybWF0CiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS51dGMoKS5zZXQoeyBob3VyOiA3LCBtaW51dGU6IDM0IH0pLnRvSVNPVGltZSgpIC8vPT4gJzA3OjM0OjE5LjM2MVonCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS51dGMoKS5zZXQoeyBob3VyOiA3LCBtaW51dGU6IDM0LCBzZWNvbmRzOiAwLCBtaWxsaXNlY29uZHM6IDAgfSkudG9JU09UaW1lKHsgc3VwcHJlc3NTZWNvbmRzOiB0cnVlIH0pIC8vPT4gJzA3OjM0WicKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygpLnNldCh7IGhvdXI6IDcsIG1pbnV0ZTogMzQgfSkudG9JU09UaW1lKHsgZm9ybWF0OiAnYmFzaWMnIH0pIC8vPT4gJzA3MzQxOS4zNjFaJwogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKCkuc2V0KHsgaG91cjogNywgbWludXRlOiAzNCB9KS50b0lTT1RpbWUoeyBpbmNsdWRlUHJlZml4OiB0cnVlIH0pIC8vPT4gJ1QwNzozNDoxOS4zNjFaJwogICAgICogQHJldHVybiB7c3RyaW5nfQogICAgICovCiAgICB0b0lTT1RpbWUoewogICAgICBzdXBwcmVzc01pbGxpc2Vjb25kcyA9IGZhbHNlLAogICAgICBzdXBwcmVzc1NlY29uZHMgPSBmYWxzZSwKICAgICAgaW5jbHVkZU9mZnNldCA9IHRydWUsCiAgICAgIGluY2x1ZGVQcmVmaXggPSBmYWxzZSwKICAgICAgZXh0ZW5kZWRab25lID0gZmFsc2UsCiAgICAgIGZvcm1hdCA9ICJleHRlbmRlZCIsCiAgICB9ID0ge30pIHsKICAgICAgaWYgKCF0aGlzLmlzVmFsaWQpIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQoKICAgICAgbGV0IGMgPSBpbmNsdWRlUHJlZml4ID8gIlQiIDogIiI7CiAgICAgIHJldHVybiAoCiAgICAgICAgYyArCiAgICAgICAgdG9JU09UaW1lKAogICAgICAgICAgdGhpcywKICAgICAgICAgIGZvcm1hdCA9PT0gImV4dGVuZGVkIiwKICAgICAgICAgIHN1cHByZXNzU2Vjb25kcywKICAgICAgICAgIHN1cHByZXNzTWlsbGlzZWNvbmRzLAogICAgICAgICAgaW5jbHVkZU9mZnNldCwKICAgICAgICAgIGV4dGVuZGVkWm9uZQogICAgICAgICkKICAgICAgKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgYW4gUkZDIDI4MjItY29tcGF0aWJsZSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBEYXRlVGltZQogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKDIwMTQsIDcsIDEzKS50b1JGQzI4MjIoKSAvLz0+ICdTdW4sIDEzIEp1bCAyMDE0IDAwOjAwOjAwICswMDAwJwogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNCwgNywgMTMpLnRvUkZDMjgyMigpIC8vPT4gJ1N1biwgMTMgSnVsIDIwMTQgMDA6MDA6MDAgLTA0MDAnCiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9CiAgICAgKi8KICAgIHRvUkZDMjgyMigpIHsKICAgICAgcmV0dXJuIHRvVGVjaEZvcm1hdCh0aGlzLCAiRUVFLCBkZCBMTEwgeXl5eSBISDptbTpzcyBaWloiLCBmYWxzZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgRGF0ZVRpbWUgYXBwcm9wcmlhdGUgZm9yIHVzZSBpbiBIVFRQIGhlYWRlcnMuIFRoZSBvdXRwdXQgaXMgYWx3YXlzIGV4cHJlc3NlZCBpbiBHTVQuCiAgICAgKiBTcGVjaWZpY2FsbHksIHRoZSBzdHJpbmcgY29uZm9ybXMgdG8gUkZDIDExMjMuCiAgICAgKiBAc2VlIGh0dHBzOi8vd3d3LnczLm9yZy9Qcm90b2NvbHMvcmZjMjYxNi9yZmMyNjE2LXNlYzMuaHRtbCNzZWMzLjMuMQogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKDIwMTQsIDcsIDEzKS50b0hUVFAoKSAvLz0+ICdTdW4sIDEzIEp1bCAyMDE0IDAwOjAwOjAwIEdNVCcKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygyMDE0LCA3LCAxMywgMTkpLnRvSFRUUCgpIC8vPT4gJ1N1biwgMTMgSnVsIDIwMTQgMTk6MDA6MDAgR01UJwogICAgICogQHJldHVybiB7c3RyaW5nfQogICAgICovCiAgICB0b0hUVFAoKSB7CiAgICAgIHJldHVybiB0b1RlY2hGb3JtYXQodGhpcy50b1VUQygpLCAiRUVFLCBkZCBMTEwgeXl5eSBISDptbTpzcyAnR01UJyIpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIERhdGVUaW1lIGFwcHJvcHJpYXRlIGZvciB1c2UgaW4gU1FMIERhdGUKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygyMDE0LCA3LCAxMykudG9TUUxEYXRlKCkgLy89PiAnMjAxNC0wNy0xMycKICAgICAqIEByZXR1cm4ge3N0cmluZ30KICAgICAqLwogICAgdG9TUUxEYXRlKCkgewogICAgICBpZiAoIXRoaXMuaXNWYWxpZCkgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICAgIHJldHVybiB0b0lTT0RhdGUodGhpcywgdHJ1ZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgRGF0ZVRpbWUgYXBwcm9wcmlhdGUgZm9yIHVzZSBpbiBTUUwgVGltZQogICAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zCiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLmluY2x1ZGVab25lPWZhbHNlXSAtIGluY2x1ZGUgdGhlIHpvbmUsIHN1Y2ggYXMgJ0FtZXJpY2EvTmV3X1lvcmsnLiBPdmVycmlkZXMgaW5jbHVkZU9mZnNldC4KICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuaW5jbHVkZU9mZnNldD10cnVlXSAtIGluY2x1ZGUgdGhlIG9mZnNldCwgc3VjaCBhcyAnWicgb3IgJy0wNDowMCcKICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuaW5jbHVkZU9mZnNldFNwYWNlPXRydWVdIC0gaW5jbHVkZSB0aGUgc3BhY2UgYmV0d2VlbiB0aGUgdGltZSBhbmQgdGhlIG9mZnNldCwgc3VjaCBhcyAnMDU6MTU6MTYuMzQ1IC0wNDowMCcKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygpLnRvU1FMKCkgLy89PiAnMDU6MTU6MTYuMzQ1JwogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkudG9TUUwoKSAvLz0+ICcwNToxNToxNi4zNDUgLTA0OjAwJwogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkudG9TUUwoeyBpbmNsdWRlT2Zmc2V0OiBmYWxzZSB9KSAvLz0+ICcwNToxNToxNi4zNDUnCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS50b1NRTCh7IGluY2x1ZGVab25lOiBmYWxzZSB9KSAvLz0+ICcwNToxNToxNi4zNDUgQW1lcmljYS9OZXdfWW9yaycKICAgICAqIEByZXR1cm4ge3N0cmluZ30KICAgICAqLwogICAgdG9TUUxUaW1lKHsgaW5jbHVkZU9mZnNldCA9IHRydWUsIGluY2x1ZGVab25lID0gZmFsc2UsIGluY2x1ZGVPZmZzZXRTcGFjZSA9IHRydWUgfSA9IHt9KSB7CiAgICAgIGxldCBmbXQgPSAiSEg6bW06c3MuU1NTIjsKCiAgICAgIGlmIChpbmNsdWRlWm9uZSB8fCBpbmNsdWRlT2Zmc2V0KSB7CiAgICAgICAgaWYgKGluY2x1ZGVPZmZzZXRTcGFjZSkgewogICAgICAgICAgZm10ICs9ICIgIjsKICAgICAgICB9CiAgICAgICAgaWYgKGluY2x1ZGVab25lKSB7CiAgICAgICAgICBmbXQgKz0gInoiOwogICAgICAgIH0gZWxzZSBpZiAoaW5jbHVkZU9mZnNldCkgewogICAgICAgICAgZm10ICs9ICJaWiI7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gdG9UZWNoRm9ybWF0KHRoaXMsIGZtdCwgdHJ1ZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgRGF0ZVRpbWUgYXBwcm9wcmlhdGUgZm9yIHVzZSBpbiBTUUwgRGF0ZVRpbWUKICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9ucwogICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5pbmNsdWRlWm9uZT1mYWxzZV0gLSBpbmNsdWRlIHRoZSB6b25lLCBzdWNoIGFzICdBbWVyaWNhL05ld19Zb3JrJy4gT3ZlcnJpZGVzIGluY2x1ZGVPZmZzZXQuCiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLmluY2x1ZGVPZmZzZXQ9dHJ1ZV0gLSBpbmNsdWRlIHRoZSBvZmZzZXQsIHN1Y2ggYXMgJ1onIG9yICctMDQ6MDAnCiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLmluY2x1ZGVPZmZzZXRTcGFjZT10cnVlXSAtIGluY2x1ZGUgdGhlIHNwYWNlIGJldHdlZW4gdGhlIHRpbWUgYW5kIHRoZSBvZmZzZXQsIHN1Y2ggYXMgJzA1OjE1OjE2LjM0NSAtMDQ6MDAnCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS51dGMoMjAxNCwgNywgMTMpLnRvU1FMKCkgLy89PiAnMjAxNC0wNy0xMyAwMDowMDowMC4wMDAgWicKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTQsIDcsIDEzKS50b1NRTCgpIC8vPT4gJzIwMTQtMDctMTMgMDA6MDA6MDAuMDAwIC0wNDowMCcKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTQsIDcsIDEzKS50b1NRTCh7IGluY2x1ZGVPZmZzZXQ6IGZhbHNlIH0pIC8vPT4gJzIwMTQtMDctMTMgMDA6MDA6MDAuMDAwJwogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNCwgNywgMTMpLnRvU1FMKHsgaW5jbHVkZVpvbmU6IHRydWUgfSkgLy89PiAnMjAxNC0wNy0xMyAwMDowMDowMC4wMDAgQW1lcmljYS9OZXdfWW9yaycKICAgICAqIEByZXR1cm4ge3N0cmluZ30KICAgICAqLwogICAgdG9TUUwob3B0cyA9IHt9KSB7CiAgICAgIGlmICghdGhpcy5pc1ZhbGlkKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KCiAgICAgIHJldHVybiBgJHt0aGlzLnRvU1FMRGF0ZSgpfSAke3RoaXMudG9TUUxUaW1lKG9wdHMpfWA7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgRGF0ZVRpbWUgYXBwcm9wcmlhdGUgZm9yIGRlYnVnZ2luZwogICAgICogQHJldHVybiB7c3RyaW5nfQogICAgICovCiAgICB0b1N0cmluZygpIHsKICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMudG9JU08oKSA6IElOVkFMSUQkMTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgdGhlIGVwb2NoIG1pbGxpc2Vjb25kcyBvZiB0aGlzIERhdGVUaW1lLiBBbGlhcyBvZiB7QGxpbmsgRGF0ZVRpbWUjdG9NaWxsaXN9CiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9CiAgICAgKi8KICAgIHZhbHVlT2YoKSB7CiAgICAgIHJldHVybiB0aGlzLnRvTWlsbGlzKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSBlcG9jaCBtaWxsaXNlY29uZHMgb2YgdGhpcyBEYXRlVGltZS4KICAgICAqIEByZXR1cm4ge251bWJlcn0KICAgICAqLwogICAgdG9NaWxsaXMoKSB7CiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLnRzIDogTmFOOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyB0aGUgZXBvY2ggc2Vjb25kcyBvZiB0aGlzIERhdGVUaW1lLgogICAgICogQHJldHVybiB7bnVtYmVyfQogICAgICovCiAgICB0b1NlY29uZHMoKSB7CiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLnRzIC8gMTAwMCA6IE5hTjsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgdGhlIGVwb2NoIHNlY29uZHMgKGFzIGEgd2hvbGUgbnVtYmVyKSBvZiB0aGlzIERhdGVUaW1lLgogICAgICogQHJldHVybiB7bnVtYmVyfQogICAgICovCiAgICB0b1VuaXhJbnRlZ2VyKCkgewogICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gTWF0aC5mbG9vcih0aGlzLnRzIC8gMTAwMCkgOiBOYU47CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIGFuIElTTyA4NjAxIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgRGF0ZVRpbWUgYXBwcm9wcmlhdGUgZm9yIHVzZSBpbiBKU09OLgogICAgICogQHJldHVybiB7c3RyaW5nfQogICAgICovCiAgICB0b0pTT04oKSB7CiAgICAgIHJldHVybiB0aGlzLnRvSVNPKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIGEgQlNPTiBzZXJpYWxpemFibGUgZXF1aXZhbGVudCB0byB0aGlzIERhdGVUaW1lLgogICAgICogQHJldHVybiB7RGF0ZX0KICAgICAqLwogICAgdG9CU09OKCkgewogICAgICByZXR1cm4gdGhpcy50b0pTRGF0ZSgpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyBhIEphdmFTY3JpcHQgb2JqZWN0IHdpdGggdGhpcyBEYXRlVGltZSdzIHllYXIsIG1vbnRoLCBkYXksIGFuZCBzbyBvbi4KICAgICAqIEBwYXJhbSBvcHRzIC0gb3B0aW9ucyBmb3IgZ2VuZXJhdGluZyB0aGUgb2JqZWN0CiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLmluY2x1ZGVDb25maWc9ZmFsc2VdIC0gaW5jbHVkZSBjb25maWd1cmF0aW9uIGF0dHJpYnV0ZXMgaW4gdGhlIG91dHB1dAogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkudG9PYmplY3QoKSAvLz0+IHsgeWVhcjogMjAxNywgbW9udGg6IDQsIGRheTogMjIsIGhvdXI6IDIwLCBtaW51dGU6IDQ5LCBzZWNvbmQ6IDQyLCBtaWxsaXNlY29uZDogMjY4IH0KICAgICAqIEByZXR1cm4ge09iamVjdH0KICAgICAqLwogICAgdG9PYmplY3Qob3B0cyA9IHt9KSB7CiAgICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4ge307CgogICAgICBjb25zdCBiYXNlID0geyAuLi50aGlzLmMgfTsKCiAgICAgIGlmIChvcHRzLmluY2x1ZGVDb25maWcpIHsKICAgICAgICBiYXNlLm91dHB1dENhbGVuZGFyID0gdGhpcy5vdXRwdXRDYWxlbmRhcjsKICAgICAgICBiYXNlLm51bWJlcmluZ1N5c3RlbSA9IHRoaXMubG9jLm51bWJlcmluZ1N5c3RlbTsKICAgICAgICBiYXNlLmxvY2FsZSA9IHRoaXMubG9jLmxvY2FsZTsKICAgICAgfQogICAgICByZXR1cm4gYmFzZTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgYSBKYXZhU2NyaXB0IERhdGUgZXF1aXZhbGVudCB0byB0aGlzIERhdGVUaW1lLgogICAgICogQHJldHVybiB7RGF0ZX0KICAgICAqLwogICAgdG9KU0RhdGUoKSB7CiAgICAgIHJldHVybiBuZXcgRGF0ZSh0aGlzLmlzVmFsaWQgPyB0aGlzLnRzIDogTmFOKTsKICAgIH0KCiAgICAvLyBDT01QQVJFCgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiB0d28gRGF0ZVRpbWVzIGFzIGEgRHVyYXRpb24uCiAgICAgKiBAcGFyYW0ge0RhdGVUaW1lfSBvdGhlckRhdGVUaW1lIC0gdGhlIERhdGVUaW1lIHRvIGNvbXBhcmUgdGhpcyBvbmUgdG8KICAgICAqIEBwYXJhbSB7c3RyaW5nfHN0cmluZ1tdfSBbdW5pdD1bJ21pbGxpc2Vjb25kcyddXSAtIHRoZSB1bml0IG9yIGFycmF5IG9mIHVuaXRzIChzdWNoIGFzICdob3Vycycgb3IgJ2RheXMnKSB0byBpbmNsdWRlIGluIHRoZSBkdXJhdGlvbi4KICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9ucyB0aGF0IGFmZmVjdCB0aGUgY3JlYXRpb24gb2YgdGhlIER1cmF0aW9uCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMuY29udmVyc2lvbkFjY3VyYWN5PSdjYXN1YWwnXSAtIHRoZSBjb252ZXJzaW9uIHN5c3RlbSB0byB1c2UKICAgICAqIEBleGFtcGxlCiAgICAgKiB2YXIgaTEgPSBEYXRlVGltZS5mcm9tSVNPKCcxOTgyLTA1LTI1VDA5OjQ1JyksCiAgICAgKiAgICAgaTIgPSBEYXRlVGltZS5mcm9tSVNPKCcxOTgzLTEwLTE0VDEwOjMwJyk7CiAgICAgKiBpMi5kaWZmKGkxKS50b09iamVjdCgpIC8vPT4geyBtaWxsaXNlY29uZHM6IDQzODA3NTAwMDAwIH0KICAgICAqIGkyLmRpZmYoaTEsICdob3VycycpLnRvT2JqZWN0KCkgLy89PiB7IGhvdXJzOiAxMjE2OC43NSB9CiAgICAgKiBpMi5kaWZmKGkxLCBbJ21vbnRocycsICdkYXlzJ10pLnRvT2JqZWN0KCkgLy89PiB7IG1vbnRoczogMTYsIGRheXM6IDE5LjAzMTI1IH0KICAgICAqIGkyLmRpZmYoaTEsIFsnbW9udGhzJywgJ2RheXMnLCAnaG91cnMnXSkudG9PYmplY3QoKSAvLz0+IHsgbW9udGhzOiAxNiwgZGF5czogMTksIGhvdXJzOiAwLjc1IH0KICAgICAqIEByZXR1cm4ge0R1cmF0aW9ufQogICAgICovCiAgICBkaWZmKG90aGVyRGF0ZVRpbWUsIHVuaXQgPSAibWlsbGlzZWNvbmRzIiwgb3B0cyA9IHt9KSB7CiAgICAgIGlmICghdGhpcy5pc1ZhbGlkIHx8ICFvdGhlckRhdGVUaW1lLmlzVmFsaWQpIHsKICAgICAgICByZXR1cm4gRHVyYXRpb24uaW52YWxpZCgiY3JlYXRlZCBieSBkaWZmaW5nIGFuIGludmFsaWQgRGF0ZVRpbWUiKTsKICAgICAgfQoKICAgICAgY29uc3QgZHVyT3B0cyA9IHsgbG9jYWxlOiB0aGlzLmxvY2FsZSwgbnVtYmVyaW5nU3lzdGVtOiB0aGlzLm51bWJlcmluZ1N5c3RlbSwgLi4ub3B0cyB9OwoKICAgICAgY29uc3QgdW5pdHMgPSBtYXliZUFycmF5KHVuaXQpLm1hcChEdXJhdGlvbi5ub3JtYWxpemVVbml0KSwKICAgICAgICBvdGhlcklzTGF0ZXIgPSBvdGhlckRhdGVUaW1lLnZhbHVlT2YoKSA+IHRoaXMudmFsdWVPZigpLAogICAgICAgIGVhcmxpZXIgPSBvdGhlcklzTGF0ZXIgPyB0aGlzIDogb3RoZXJEYXRlVGltZSwKICAgICAgICBsYXRlciA9IG90aGVySXNMYXRlciA/IG90aGVyRGF0ZVRpbWUgOiB0aGlzLAogICAgICAgIGRpZmZlZCA9IGRpZmYoZWFybGllciwgbGF0ZXIsIHVuaXRzLCBkdXJPcHRzKTsKCiAgICAgIHJldHVybiBvdGhlcklzTGF0ZXIgPyBkaWZmZWQubmVnYXRlKCkgOiBkaWZmZWQ7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiB0aGlzIERhdGVUaW1lIGFuZCByaWdodCBub3cuCiAgICAgKiBTZWUge0BsaW5rIERhdGVUaW1lI2RpZmZ9CiAgICAgKiBAcGFyYW0ge3N0cmluZ3xzdHJpbmdbXX0gW3VuaXQ9WydtaWxsaXNlY29uZHMnXV0gLSB0aGUgdW5pdCBvciB1bml0cyB1bml0cyAoc3VjaCBhcyAnaG91cnMnIG9yICdkYXlzJykgdG8gaW5jbHVkZSBpbiB0aGUgZHVyYXRpb24KICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9ucyB0aGF0IGFmZmVjdCB0aGUgY3JlYXRpb24gb2YgdGhlIER1cmF0aW9uCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMuY29udmVyc2lvbkFjY3VyYWN5PSdjYXN1YWwnXSAtIHRoZSBjb252ZXJzaW9uIHN5c3RlbSB0byB1c2UKICAgICAqIEByZXR1cm4ge0R1cmF0aW9ufQogICAgICovCiAgICBkaWZmTm93KHVuaXQgPSAibWlsbGlzZWNvbmRzIiwgb3B0cyA9IHt9KSB7CiAgICAgIHJldHVybiB0aGlzLmRpZmYoRGF0ZVRpbWUubm93KCksIHVuaXQsIG9wdHMpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIGFuIEludGVydmFsIHNwYW5uaW5nIGJldHdlZW4gdGhpcyBEYXRlVGltZSBhbmQgYW5vdGhlciBEYXRlVGltZQogICAgICogQHBhcmFtIHtEYXRlVGltZX0gb3RoZXJEYXRlVGltZSAtIHRoZSBvdGhlciBlbmQgcG9pbnQgb2YgdGhlIEludGVydmFsCiAgICAgKiBAcmV0dXJuIHtJbnRlcnZhbH0KICAgICAqLwogICAgdW50aWwob3RoZXJEYXRlVGltZSkgewogICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gSW50ZXJ2YWwuZnJvbURhdGVUaW1lcyh0aGlzLCBvdGhlckRhdGVUaW1lKSA6IHRoaXM7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gd2hldGhlciB0aGlzIERhdGVUaW1lIGlzIGluIHRoZSBzYW1lIHVuaXQgb2YgdGltZSBhcyBhbm90aGVyIERhdGVUaW1lLgogICAgICogSGlnaGVyLW9yZGVyIHVuaXRzIG11c3QgYWxzbyBiZSBpZGVudGljYWwgZm9yIHRoaXMgZnVuY3Rpb24gdG8gcmV0dXJuIGB0cnVlYC4KICAgICAqIE5vdGUgdGhhdCB0aW1lIHpvbmVzIGFyZSAqKmlnbm9yZWQqKiBpbiB0aGlzIGNvbXBhcmlzb24sIHdoaWNoIGNvbXBhcmVzIHRoZSAqKmxvY2FsKiogY2FsZW5kYXIgdGltZS4gVXNlIHtAbGluayBEYXRlVGltZSNzZXRab25lfSB0byBjb252ZXJ0IG9uZSBvZiB0aGUgZGF0ZXMgaWYgbmVlZGVkLgogICAgICogQHBhcmFtIHtEYXRlVGltZX0gb3RoZXJEYXRlVGltZSAtIHRoZSBvdGhlciBEYXRlVGltZQogICAgICogQHBhcmFtIHtzdHJpbmd9IHVuaXQgLSB0aGUgdW5pdCBvZiB0aW1lIHRvIGNoZWNrIHNhbWVuZXNzIG9uCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS5oYXNTYW1lKG90aGVyRFQsICdkYXknKTsgLy9+PiB0cnVlIGlmIG90aGVyRFQgaXMgaW4gdGhlIHNhbWUgY3VycmVudCBjYWxlbmRhciBkYXkKICAgICAqIEByZXR1cm4ge2Jvb2xlYW59CiAgICAgKi8KICAgIGhhc1NhbWUob3RoZXJEYXRlVGltZSwgdW5pdCkgewogICAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIGZhbHNlOwoKICAgICAgY29uc3QgaW5wdXRNcyA9IG90aGVyRGF0ZVRpbWUudmFsdWVPZigpOwogICAgICBjb25zdCBhZGp1c3RlZFRvWm9uZSA9IHRoaXMuc2V0Wm9uZShvdGhlckRhdGVUaW1lLnpvbmUsIHsga2VlcExvY2FsVGltZTogdHJ1ZSB9KTsKICAgICAgcmV0dXJuIGFkanVzdGVkVG9ab25lLnN0YXJ0T2YodW5pdCkgPD0gaW5wdXRNcyAmJiBpbnB1dE1zIDw9IGFkanVzdGVkVG9ab25lLmVuZE9mKHVuaXQpOwogICAgfQoKICAgIC8qKgogICAgICogRXF1YWxpdHkgY2hlY2sKICAgICAqIFR3byBEYXRlVGltZXMgYXJlIGVxdWFsIGlmZiB0aGV5IHJlcHJlc2VudCB0aGUgc2FtZSBtaWxsaXNlY29uZCwgaGF2ZSB0aGUgc2FtZSB6b25lIGFuZCBsb2NhdGlvbiwgYW5kIGFyZSBib3RoIHZhbGlkLgogICAgICogVG8gY29tcGFyZSBqdXN0IHRoZSBtaWxsaXNlY29uZCB2YWx1ZXMsIHVzZSBgK2R0MSA9PT0gK2R0MmAuCiAgICAgKiBAcGFyYW0ge0RhdGVUaW1lfSBvdGhlciAtIHRoZSBvdGhlciBEYXRlVGltZQogICAgICogQHJldHVybiB7Ym9vbGVhbn0KICAgICAqLwogICAgZXF1YWxzKG90aGVyKSB7CiAgICAgIHJldHVybiAoCiAgICAgICAgdGhpcy5pc1ZhbGlkICYmCiAgICAgICAgb3RoZXIuaXNWYWxpZCAmJgogICAgICAgIHRoaXMudmFsdWVPZigpID09PSBvdGhlci52YWx1ZU9mKCkgJiYKICAgICAgICB0aGlzLnpvbmUuZXF1YWxzKG90aGVyLnpvbmUpICYmCiAgICAgICAgdGhpcy5sb2MuZXF1YWxzKG90aGVyLmxvYykKICAgICAgKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSB0aGlzIHRpbWUgcmVsYXRpdmUgdG8gbm93LCBzdWNoIGFzICJpbiB0d28gZGF5cyIuIENhbiBvbmx5IGludGVybmF0aW9uYWxpemUgaWYgeW91cgogICAgICogcGxhdGZvcm0gc3VwcG9ydHMgSW50bC5SZWxhdGl2ZVRpbWVGb3JtYXQuIFJvdW5kcyBkb3duIGJ5IGRlZmF1bHQuCiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIG9wdGlvbnMgdGhhdCBhZmZlY3QgdGhlIG91dHB1dAogICAgICogQHBhcmFtIHtEYXRlVGltZX0gW29wdGlvbnMuYmFzZT1EYXRlVGltZS5ub3coKV0gLSB0aGUgRGF0ZVRpbWUgdG8gdXNlIGFzIHRoZSBiYXNpcyB0byB3aGljaCB0aGlzIHRpbWUgaXMgY29tcGFyZWQuIERlZmF1bHRzIHRvIG5vdy4KICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5zdHlsZT0ibG9uZyJdIC0gdGhlIHN0eWxlIG9mIHVuaXRzLCBtdXN0IGJlICJsb25nIiwgInNob3J0Iiwgb3IgIm5hcnJvdyIKICAgICAqIEBwYXJhbSB7c3RyaW5nfHN0cmluZ1tdfSBvcHRpb25zLnVuaXQgLSB1c2UgYSBzcGVjaWZpYyB1bml0IG9yIGFycmF5IG9mIHVuaXRzOyBpZiBvbWl0dGVkLCBvciBhbiBhcnJheSwgdGhlIG1ldGhvZCB3aWxsIHBpY2sgdGhlIGJlc3QgdW5pdC4gVXNlIGFuIGFycmF5IG9yIG9uZSBvZiAieWVhcnMiLCAicXVhcnRlcnMiLCAibW9udGhzIiwgIndlZWtzIiwgImRheXMiLCAiaG91cnMiLCAibWludXRlcyIsIG9yICJzZWNvbmRzIgogICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5yb3VuZD10cnVlXSAtIHdoZXRoZXIgdG8gcm91bmQgdGhlIG51bWJlcnMgaW4gdGhlIG91dHB1dC4KICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5wYWRkaW5nPTBdIC0gcGFkZGluZyBpbiBtaWxsaXNlY29uZHMuIFRoaXMgYWxsb3dzIHlvdSB0byByb3VuZCB1cCB0aGUgcmVzdWx0IGlmIGl0IGZpdHMgaW5zaWRlIHRoZSB0aHJlc2hvbGQuIERvbid0IHVzZSBpbiBjb21iaW5hdGlvbiB3aXRoIHtyb3VuZDogZmFsc2V9IGJlY2F1c2UgdGhlIGRlY2ltYWwgb3V0cHV0IHdpbGwgaW5jbHVkZSB0aGUgcGFkZGluZy4KICAgICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLmxvY2FsZSAtIG92ZXJyaWRlIHRoZSBsb2NhbGUgb2YgdGhpcyBEYXRlVGltZQogICAgICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMubnVtYmVyaW5nU3lzdGVtIC0gb3ZlcnJpZGUgdGhlIG51bWJlcmluZ1N5c3RlbSBvZiB0aGlzIERhdGVUaW1lLiBUaGUgSW50bCBzeXN0ZW0gbWF5IGNob29zZSBub3QgdG8gaG9ub3IgdGhpcwogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkucGx1cyh7IGRheXM6IDEgfSkudG9SZWxhdGl2ZSgpIC8vPT4gImluIDEgZGF5IgogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkuc2V0TG9jYWxlKCJlcyIpLnRvUmVsYXRpdmUoeyBkYXlzOiAxIH0pIC8vPT4gImRlbnRybyBkZSAxIGTDrWEiCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS5wbHVzKHsgZGF5czogMSB9KS50b1JlbGF0aXZlKHsgbG9jYWxlOiAiZnIiIH0pIC8vPT4gImRhbnMgMjMgaGV1cmVzIgogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkubWludXMoeyBkYXlzOiAyIH0pLnRvUmVsYXRpdmUoKSAvLz0+ICIyIGRheXMgYWdvIgogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkubWludXMoeyBkYXlzOiAyIH0pLnRvUmVsYXRpdmUoeyB1bml0OiAiaG91cnMiIH0pIC8vPT4gIjQ4IGhvdXJzIGFnbyIKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLm1pbnVzKHsgaG91cnM6IDM2IH0pLnRvUmVsYXRpdmUoeyByb3VuZDogZmFsc2UgfSkgLy89PiAiMS41IGRheXMgYWdvIgogICAgICovCiAgICB0b1JlbGF0aXZlKG9wdGlvbnMgPSB7fSkgewogICAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIG51bGw7CiAgICAgIGNvbnN0IGJhc2UgPSBvcHRpb25zLmJhc2UgfHwgRGF0ZVRpbWUuZnJvbU9iamVjdCh7fSwgeyB6b25lOiB0aGlzLnpvbmUgfSksCiAgICAgICAgcGFkZGluZyA9IG9wdGlvbnMucGFkZGluZyA/ICh0aGlzIDwgYmFzZSA/IC1vcHRpb25zLnBhZGRpbmcgOiBvcHRpb25zLnBhZGRpbmcpIDogMDsKICAgICAgbGV0IHVuaXRzID0gWyJ5ZWFycyIsICJtb250aHMiLCAiZGF5cyIsICJob3VycyIsICJtaW51dGVzIiwgInNlY29uZHMiXTsKICAgICAgbGV0IHVuaXQgPSBvcHRpb25zLnVuaXQ7CiAgICAgIGlmIChBcnJheS5pc0FycmF5KG9wdGlvbnMudW5pdCkpIHsKICAgICAgICB1bml0cyA9IG9wdGlvbnMudW5pdDsKICAgICAgICB1bml0ID0gdW5kZWZpbmVkOwogICAgICB9CiAgICAgIHJldHVybiBkaWZmUmVsYXRpdmUoYmFzZSwgdGhpcy5wbHVzKHBhZGRpbmcpLCB7CiAgICAgICAgLi4ub3B0aW9ucywKICAgICAgICBudW1lcmljOiAiYWx3YXlzIiwKICAgICAgICB1bml0cywKICAgICAgICB1bml0LAogICAgICB9KTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBkYXRlIHJlbGF0aXZlIHRvIHRvZGF5LCBzdWNoIGFzICJ5ZXN0ZXJkYXkiIG9yICJuZXh0IG1vbnRoIi4KICAgICAqIE9ubHkgaW50ZXJuYXRpb25hbGl6ZXMgb24gcGxhdGZvcm1zIHRoYXQgc3VwcG9ydHMgSW50bC5SZWxhdGl2ZVRpbWVGb3JtYXQuCiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIG9wdGlvbnMgdGhhdCBhZmZlY3QgdGhlIG91dHB1dAogICAgICogQHBhcmFtIHtEYXRlVGltZX0gW29wdGlvbnMuYmFzZT1EYXRlVGltZS5ub3coKV0gLSB0aGUgRGF0ZVRpbWUgdG8gdXNlIGFzIHRoZSBiYXNpcyB0byB3aGljaCB0aGlzIHRpbWUgaXMgY29tcGFyZWQuIERlZmF1bHRzIHRvIG5vdy4KICAgICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLmxvY2FsZSAtIG92ZXJyaWRlIHRoZSBsb2NhbGUgb2YgdGhpcyBEYXRlVGltZQogICAgICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMudW5pdCAtIHVzZSBhIHNwZWNpZmljIHVuaXQ7IGlmIG9taXR0ZWQsIHRoZSBtZXRob2Qgd2lsbCBwaWNrIHRoZSB1bml0LiBVc2Ugb25lIG9mICJ5ZWFycyIsICJxdWFydGVycyIsICJtb250aHMiLCAid2Vla3MiLCBvciAiZGF5cyIKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLm51bWJlcmluZ1N5c3RlbSAtIG92ZXJyaWRlIHRoZSBudW1iZXJpbmdTeXN0ZW0gb2YgdGhpcyBEYXRlVGltZS4gVGhlIEludGwgc3lzdGVtIG1heSBjaG9vc2Ugbm90IHRvIGhvbm9yIHRoaXMKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnBsdXMoeyBkYXlzOiAxIH0pLnRvUmVsYXRpdmVDYWxlbmRhcigpIC8vPT4gInRvbW9ycm93IgogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkuc2V0TG9jYWxlKCJlcyIpLnBsdXMoeyBkYXlzOiAxIH0pLnRvUmVsYXRpdmUoKSAvLz0+ICIibWHDsWFuYSIKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnBsdXMoeyBkYXlzOiAxIH0pLnRvUmVsYXRpdmVDYWxlbmRhcih7IGxvY2FsZTogImZyIiB9KSAvLz0+ICJkZW1haW4iCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS5taW51cyh7IGRheXM6IDIgfSkudG9SZWxhdGl2ZUNhbGVuZGFyKCkgLy89PiAiMiBkYXlzIGFnbyIKICAgICAqLwogICAgdG9SZWxhdGl2ZUNhbGVuZGFyKG9wdGlvbnMgPSB7fSkgewogICAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIG51bGw7CgogICAgICByZXR1cm4gZGlmZlJlbGF0aXZlKG9wdGlvbnMuYmFzZSB8fCBEYXRlVGltZS5mcm9tT2JqZWN0KHt9LCB7IHpvbmU6IHRoaXMuem9uZSB9KSwgdGhpcywgewogICAgICAgIC4uLm9wdGlvbnMsCiAgICAgICAgbnVtZXJpYzogImF1dG8iLAogICAgICAgIHVuaXRzOiBbInllYXJzIiwgIm1vbnRocyIsICJkYXlzIl0sCiAgICAgICAgY2FsZW5kYXJ5OiB0cnVlLAogICAgICB9KTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB0aGUgbWluIG9mIHNldmVyYWwgZGF0ZSB0aW1lcwogICAgICogQHBhcmFtIHsuLi5EYXRlVGltZX0gZGF0ZVRpbWVzIC0gdGhlIERhdGVUaW1lcyBmcm9tIHdoaWNoIHRvIGNob29zZSB0aGUgbWluaW11bQogICAgICogQHJldHVybiB7RGF0ZVRpbWV9IHRoZSBtaW4gRGF0ZVRpbWUsIG9yIHVuZGVmaW5lZCBpZiBjYWxsZWQgd2l0aCBubyBhcmd1bWVudAogICAgICovCiAgICBzdGF0aWMgbWluKC4uLmRhdGVUaW1lcykgewogICAgICBpZiAoIWRhdGVUaW1lcy5ldmVyeShEYXRlVGltZS5pc0RhdGVUaW1lKSkgewogICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcigibWluIHJlcXVpcmVzIGFsbCBhcmd1bWVudHMgYmUgRGF0ZVRpbWVzIik7CiAgICAgIH0KICAgICAgcmV0dXJuIGJlc3RCeShkYXRlVGltZXMsIChpKSA9PiBpLnZhbHVlT2YoKSwgTWF0aC5taW4pOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHRoZSBtYXggb2Ygc2V2ZXJhbCBkYXRlIHRpbWVzCiAgICAgKiBAcGFyYW0gey4uLkRhdGVUaW1lfSBkYXRlVGltZXMgLSB0aGUgRGF0ZVRpbWVzIGZyb20gd2hpY2ggdG8gY2hvb3NlIHRoZSBtYXhpbXVtCiAgICAgKiBAcmV0dXJuIHtEYXRlVGltZX0gdGhlIG1heCBEYXRlVGltZSwgb3IgdW5kZWZpbmVkIGlmIGNhbGxlZCB3aXRoIG5vIGFyZ3VtZW50CiAgICAgKi8KICAgIHN0YXRpYyBtYXgoLi4uZGF0ZVRpbWVzKSB7CiAgICAgIGlmICghZGF0ZVRpbWVzLmV2ZXJ5KERhdGVUaW1lLmlzRGF0ZVRpbWUpKSB7CiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKCJtYXggcmVxdWlyZXMgYWxsIGFyZ3VtZW50cyBiZSBEYXRlVGltZXMiKTsKICAgICAgfQogICAgICByZXR1cm4gYmVzdEJ5KGRhdGVUaW1lcywgKGkpID0+IGkudmFsdWVPZigpLCBNYXRoLm1heCk7CiAgICB9CgogICAgLy8gTUlTQwoKICAgIC8qKgogICAgICogRXhwbGFpbiBob3cgYSBzdHJpbmcgd291bGQgYmUgcGFyc2VkIGJ5IGZyb21Gb3JtYXQoKQogICAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgLSB0aGUgc3RyaW5nIHRvIHBhcnNlCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZm10IC0gdGhlIGZvcm1hdCB0aGUgc3RyaW5nIGlzIGV4cGVjdGVkIHRvIGJlIGluIChzZWUgZGVzY3JpcHRpb24pCiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIG9wdGlvbnMgdGFrZW4gYnkgZnJvbUZvcm1hdCgpCiAgICAgKiBAcmV0dXJuIHtPYmplY3R9CiAgICAgKi8KICAgIHN0YXRpYyBmcm9tRm9ybWF0RXhwbGFpbih0ZXh0LCBmbXQsIG9wdGlvbnMgPSB7fSkgewogICAgICBjb25zdCB7IGxvY2FsZSA9IG51bGwsIG51bWJlcmluZ1N5c3RlbSA9IG51bGwgfSA9IG9wdGlvbnMsCiAgICAgICAgbG9jYWxlVG9Vc2UgPSBMb2NhbGUuZnJvbU9wdHMoewogICAgICAgICAgbG9jYWxlLAogICAgICAgICAgbnVtYmVyaW5nU3lzdGVtLAogICAgICAgICAgZGVmYXVsdFRvRU46IHRydWUsCiAgICAgICAgfSk7CiAgICAgIHJldHVybiBleHBsYWluRnJvbVRva2Vucyhsb2NhbGVUb1VzZSwgdGV4dCwgZm10KTsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXByZWNhdGVkIHVzZSBmcm9tRm9ybWF0RXhwbGFpbiBpbnN0ZWFkCiAgICAgKi8KICAgIHN0YXRpYyBmcm9tU3RyaW5nRXhwbGFpbih0ZXh0LCBmbXQsIG9wdGlvbnMgPSB7fSkgewogICAgICByZXR1cm4gRGF0ZVRpbWUuZnJvbUZvcm1hdEV4cGxhaW4odGV4dCwgZm10LCBvcHRpb25zKTsKICAgIH0KCiAgICAvLyBGT1JNQVQgUFJFU0VUUwoKICAgIC8qKgogICAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAxMC8xNC8xOTgzCiAgICAgKiBAdHlwZSB7T2JqZWN0fQogICAgICovCiAgICBzdGF0aWMgZ2V0IERBVEVfU0hPUlQoKSB7CiAgICAgIHJldHVybiBEQVRFX1NIT1JUOwogICAgfQoKICAgIC8qKgogICAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAnT2N0IDE0LCAxOTgzJwogICAgICogQHR5cGUge09iamVjdH0KICAgICAqLwogICAgc3RhdGljIGdldCBEQVRFX01FRCgpIHsKICAgICAgcmV0dXJuIERBVEVfTUVEOwogICAgfQoKICAgIC8qKgogICAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAnRnJpLCBPY3QgMTQsIDE5ODMnCiAgICAgKiBAdHlwZSB7T2JqZWN0fQogICAgICovCiAgICBzdGF0aWMgZ2V0IERBVEVfTUVEX1dJVEhfV0VFS0RBWSgpIHsKICAgICAgcmV0dXJuIERBVEVfTUVEX1dJVEhfV0VFS0RBWTsKICAgIH0KCiAgICAvKioKICAgICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJ09jdG9iZXIgMTQsIDE5ODMnCiAgICAgKiBAdHlwZSB7T2JqZWN0fQogICAgICovCiAgICBzdGF0aWMgZ2V0IERBVEVfRlVMTCgpIHsKICAgICAgcmV0dXJuIERBVEVfRlVMTDsKICAgIH0KCiAgICAvKioKICAgICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJ1R1ZXNkYXksIE9jdG9iZXIgMTQsIDE5ODMnCiAgICAgKiBAdHlwZSB7T2JqZWN0fQogICAgICovCiAgICBzdGF0aWMgZ2V0IERBVEVfSFVHRSgpIHsKICAgICAgcmV0dXJuIERBVEVfSFVHRTsKICAgIH0KCiAgICAvKioKICAgICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJzA5OjMwIEFNJy4gT25seSAxMi1ob3VyIGlmIHRoZSBsb2NhbGUgaXMuCiAgICAgKiBAdHlwZSB7T2JqZWN0fQogICAgICovCiAgICBzdGF0aWMgZ2V0IFRJTUVfU0lNUExFKCkgewogICAgICByZXR1cm4gVElNRV9TSU1QTEU7CiAgICB9CgogICAgLyoqCiAgICAgKiB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbGVTdHJpbmd9IGZvcm1hdCBsaWtlICcwOTozMDoyMyBBTScuIE9ubHkgMTItaG91ciBpZiB0aGUgbG9jYWxlIGlzLgogICAgICogQHR5cGUge09iamVjdH0KICAgICAqLwogICAgc3RhdGljIGdldCBUSU1FX1dJVEhfU0VDT05EUygpIHsKICAgICAgcmV0dXJuIFRJTUVfV0lUSF9TRUNPTkRTOwogICAgfQoKICAgIC8qKgogICAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAnMDk6MzA6MjMgQU0gRURUJy4gT25seSAxMi1ob3VyIGlmIHRoZSBsb2NhbGUgaXMuCiAgICAgKiBAdHlwZSB7T2JqZWN0fQogICAgICovCiAgICBzdGF0aWMgZ2V0IFRJTUVfV0lUSF9TSE9SVF9PRkZTRVQoKSB7CiAgICAgIHJldHVybiBUSU1FX1dJVEhfU0hPUlRfT0ZGU0VUOwogICAgfQoKICAgIC8qKgogICAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAnMDk6MzA6MjMgQU0gRWFzdGVybiBEYXlsaWdodCBUaW1lJy4gT25seSAxMi1ob3VyIGlmIHRoZSBsb2NhbGUgaXMuCiAgICAgKiBAdHlwZSB7T2JqZWN0fQogICAgICovCiAgICBzdGF0aWMgZ2V0IFRJTUVfV0lUSF9MT05HX09GRlNFVCgpIHsKICAgICAgcmV0dXJuIFRJTUVfV0lUSF9MT05HX09GRlNFVDsKICAgIH0KCiAgICAvKioKICAgICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJzA5OjMwJywgYWx3YXlzIDI0LWhvdXIuCiAgICAgKiBAdHlwZSB7T2JqZWN0fQogICAgICovCiAgICBzdGF0aWMgZ2V0IFRJTUVfMjRfU0lNUExFKCkgewogICAgICByZXR1cm4gVElNRV8yNF9TSU1QTEU7CiAgICB9CgogICAgLyoqCiAgICAgKiB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbGVTdHJpbmd9IGZvcm1hdCBsaWtlICcwOTozMDoyMycsIGFsd2F5cyAyNC1ob3VyLgogICAgICogQHR5cGUge09iamVjdH0KICAgICAqLwogICAgc3RhdGljIGdldCBUSU1FXzI0X1dJVEhfU0VDT05EUygpIHsKICAgICAgcmV0dXJuIFRJTUVfMjRfV0lUSF9TRUNPTkRTOwogICAgfQoKICAgIC8qKgogICAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAnMDk6MzA6MjMgRURUJywgYWx3YXlzIDI0LWhvdXIuCiAgICAgKiBAdHlwZSB7T2JqZWN0fQogICAgICovCiAgICBzdGF0aWMgZ2V0IFRJTUVfMjRfV0lUSF9TSE9SVF9PRkZTRVQoKSB7CiAgICAgIHJldHVybiBUSU1FXzI0X1dJVEhfU0hPUlRfT0ZGU0VUOwogICAgfQoKICAgIC8qKgogICAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAnMDk6MzA6MjMgRWFzdGVybiBEYXlsaWdodCBUaW1lJywgYWx3YXlzIDI0LWhvdXIuCiAgICAgKiBAdHlwZSB7T2JqZWN0fQogICAgICovCiAgICBzdGF0aWMgZ2V0IFRJTUVfMjRfV0lUSF9MT05HX09GRlNFVCgpIHsKICAgICAgcmV0dXJuIFRJTUVfMjRfV0lUSF9MT05HX09GRlNFVDsKICAgIH0KCiAgICAvKioKICAgICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJzEwLzE0LzE5ODMsIDk6MzAgQU0nLiBPbmx5IDEyLWhvdXIgaWYgdGhlIGxvY2FsZSBpcy4KICAgICAqIEB0eXBlIHtPYmplY3R9CiAgICAgKi8KICAgIHN0YXRpYyBnZXQgREFURVRJTUVfU0hPUlQoKSB7CiAgICAgIHJldHVybiBEQVRFVElNRV9TSE9SVDsKICAgIH0KCiAgICAvKioKICAgICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJzEwLzE0LzE5ODMsIDk6MzA6MzMgQU0nLiBPbmx5IDEyLWhvdXIgaWYgdGhlIGxvY2FsZSBpcy4KICAgICAqIEB0eXBlIHtPYmplY3R9CiAgICAgKi8KICAgIHN0YXRpYyBnZXQgREFURVRJTUVfU0hPUlRfV0lUSF9TRUNPTkRTKCkgewogICAgICByZXR1cm4gREFURVRJTUVfU0hPUlRfV0lUSF9TRUNPTkRTOwogICAgfQoKICAgIC8qKgogICAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAnT2N0IDE0LCAxOTgzLCA5OjMwIEFNJy4gT25seSAxMi1ob3VyIGlmIHRoZSBsb2NhbGUgaXMuCiAgICAgKiBAdHlwZSB7T2JqZWN0fQogICAgICovCiAgICBzdGF0aWMgZ2V0IERBVEVUSU1FX01FRCgpIHsKICAgICAgcmV0dXJuIERBVEVUSU1FX01FRDsKICAgIH0KCiAgICAvKioKICAgICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJ09jdCAxNCwgMTk4MywgOTozMDozMyBBTScuIE9ubHkgMTItaG91ciBpZiB0aGUgbG9jYWxlIGlzLgogICAgICogQHR5cGUge09iamVjdH0KICAgICAqLwogICAgc3RhdGljIGdldCBEQVRFVElNRV9NRURfV0lUSF9TRUNPTkRTKCkgewogICAgICByZXR1cm4gREFURVRJTUVfTUVEX1dJVEhfU0VDT05EUzsKICAgIH0KCiAgICAvKioKICAgICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJ0ZyaSwgMTQgT2N0IDE5ODMsIDk6MzAgQU0nLiBPbmx5IDEyLWhvdXIgaWYgdGhlIGxvY2FsZSBpcy4KICAgICAqIEB0eXBlIHtPYmplY3R9CiAgICAgKi8KICAgIHN0YXRpYyBnZXQgREFURVRJTUVfTUVEX1dJVEhfV0VFS0RBWSgpIHsKICAgICAgcmV0dXJuIERBVEVUSU1FX01FRF9XSVRIX1dFRUtEQVk7CiAgICB9CgogICAgLyoqCiAgICAgKiB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbGVTdHJpbmd9IGZvcm1hdCBsaWtlICdPY3RvYmVyIDE0LCAxOTgzLCA5OjMwIEFNIEVEVCcuIE9ubHkgMTItaG91ciBpZiB0aGUgbG9jYWxlIGlzLgogICAgICogQHR5cGUge09iamVjdH0KICAgICAqLwogICAgc3RhdGljIGdldCBEQVRFVElNRV9GVUxMKCkgewogICAgICByZXR1cm4gREFURVRJTUVfRlVMTDsKICAgIH0KCiAgICAvKioKICAgICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJ09jdG9iZXIgMTQsIDE5ODMsIDk6MzA6MzMgQU0gRURUJy4gT25seSAxMi1ob3VyIGlmIHRoZSBsb2NhbGUgaXMuCiAgICAgKiBAdHlwZSB7T2JqZWN0fQogICAgICovCiAgICBzdGF0aWMgZ2V0IERBVEVUSU1FX0ZVTExfV0lUSF9TRUNPTkRTKCkgewogICAgICByZXR1cm4gREFURVRJTUVfRlVMTF9XSVRIX1NFQ09ORFM7CiAgICB9CgogICAgLyoqCiAgICAgKiB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbGVTdHJpbmd9IGZvcm1hdCBsaWtlICdGcmlkYXksIE9jdG9iZXIgMTQsIDE5ODMsIDk6MzAgQU0gRWFzdGVybiBEYXlsaWdodCBUaW1lJy4gT25seSAxMi1ob3VyIGlmIHRoZSBsb2NhbGUgaXMuCiAgICAgKiBAdHlwZSB7T2JqZWN0fQogICAgICovCiAgICBzdGF0aWMgZ2V0IERBVEVUSU1FX0hVR0UoKSB7CiAgICAgIHJldHVybiBEQVRFVElNRV9IVUdFOwogICAgfQoKICAgIC8qKgogICAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAnRnJpZGF5LCBPY3RvYmVyIDE0LCAxOTgzLCA5OjMwOjMzIEFNIEVhc3Rlcm4gRGF5bGlnaHQgVGltZScuIE9ubHkgMTItaG91ciBpZiB0aGUgbG9jYWxlIGlzLgogICAgICogQHR5cGUge09iamVjdH0KICAgICAqLwogICAgc3RhdGljIGdldCBEQVRFVElNRV9IVUdFX1dJVEhfU0VDT05EUygpIHsKICAgICAgcmV0dXJuIERBVEVUSU1FX0hVR0VfV0lUSF9TRUNPTkRTOwogICAgfQogIH0KCiAgLyoqCiAgICogQHByaXZhdGUKICAgKi8KICBmdW5jdGlvbiBmcmllbmRseURhdGVUaW1lKGRhdGVUaW1laXNoKSB7CiAgICBpZiAoRGF0ZVRpbWUuaXNEYXRlVGltZShkYXRlVGltZWlzaCkpIHsKICAgICAgcmV0dXJuIGRhdGVUaW1laXNoOwogICAgfSBlbHNlIGlmIChkYXRlVGltZWlzaCAmJiBkYXRlVGltZWlzaC52YWx1ZU9mICYmIGlzTnVtYmVyJDEoZGF0ZVRpbWVpc2gudmFsdWVPZigpKSkgewogICAgICByZXR1cm4gRGF0ZVRpbWUuZnJvbUpTRGF0ZShkYXRlVGltZWlzaCk7CiAgICB9IGVsc2UgaWYgKGRhdGVUaW1laXNoICYmIHR5cGVvZiBkYXRlVGltZWlzaCA9PT0gIm9iamVjdCIpIHsKICAgICAgcmV0dXJuIERhdGVUaW1lLmZyb21PYmplY3QoZGF0ZVRpbWVpc2gpOwogICAgfSBlbHNlIHsKICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKAogICAgICAgIGBVbmtub3duIGRhdGV0aW1lIGFyZ3VtZW50OiAke2RhdGVUaW1laXNofSwgb2YgdHlwZSAke3R5cGVvZiBkYXRlVGltZWlzaH1gCiAgICAgICk7CiAgICB9CiAgfQoKICAvLyBGSVhNRSBwcm9maWxlIGFkZGluZyBhIHBlci1UcmVlIFRyZWVOb2RlIGNhY2hlLCB2YWxpZGF0aW5nIGl0IGJ5CiAgLy8gcGFyZW50IHBvaW50ZXIKICAvLy8gVGhlIGRlZmF1bHQgbWF4aW11bSBsZW5ndGggb2YgYSBgVHJlZUJ1ZmZlcmAgbm9kZS4KICBjb25zdCBEZWZhdWx0QnVmZmVyTGVuZ3RoID0gMTAyNDsKICBsZXQgbmV4dFByb3BJRCA9IDA7CiAgY2xhc3MgUmFuZ2UkMSB7CiAgICAgIGNvbnN0cnVjdG9yKGZyb20sIHRvKSB7CiAgICAgICAgICB0aGlzLmZyb20gPSBmcm9tOwogICAgICAgICAgdGhpcy50byA9IHRvOwogICAgICB9CiAgfQogIC8vLyBFYWNoIFtub2RlIHR5cGVdKCNjb21tb24uTm9kZVR5cGUpIG9yIFtpbmRpdmlkdWFsIHRyZWVdKCNjb21tb24uVHJlZSkKICAvLy8gY2FuIGhhdmUgbWV0YWRhdGEgYXNzb2NpYXRlZCB3aXRoIGl0IGluIHByb3BzLiBJbnN0YW5jZXMgb2YgdGhpcwogIC8vLyBjbGFzcyByZXByZXNlbnQgcHJvcCBuYW1lcy4KICBjbGFzcyBOb2RlUHJvcCB7CiAgICAgIC8vLyBDcmVhdGUgYSBuZXcgbm9kZSBwcm9wIHR5cGUuCiAgICAgIGNvbnN0cnVjdG9yKGNvbmZpZyA9IHt9KSB7CiAgICAgICAgICB0aGlzLmlkID0gbmV4dFByb3BJRCsrOwogICAgICAgICAgdGhpcy5wZXJOb2RlID0gISFjb25maWcucGVyTm9kZTsKICAgICAgICAgIHRoaXMuZGVzZXJpYWxpemUgPSBjb25maWcuZGVzZXJpYWxpemUgfHwgKCgpID0+IHsKICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIlRoaXMgbm9kZSB0eXBlIGRvZXNuJ3QgZGVmaW5lIGEgZGVzZXJpYWxpemUgZnVuY3Rpb24iKTsKICAgICAgICAgIH0pOwogICAgICB9CiAgICAgIC8vLyBUaGlzIGlzIG1lYW50IHRvIGJlIHVzZWQgd2l0aAogICAgICAvLy8gW2BOb2RlU2V0LmV4dGVuZGBdKCNjb21tb24uTm9kZVNldC5leHRlbmQpIG9yCiAgICAgIC8vLyBbYExSUGFyc2VyLmNvbmZpZ3VyZWBdKCNsci5QYXJzZXJDb25maWcucHJvcHMpIHRvIGNvbXB1dGUKICAgICAgLy8vIHByb3AgdmFsdWVzIGZvciBlYWNoIG5vZGUgdHlwZSBpbiB0aGUgc2V0LiBUYWtlcyBhIFttYXRjaAogICAgICAvLy8gb2JqZWN0XSgjY29tbW9uLk5vZGVUeXBlXm1hdGNoKSBvciBmdW5jdGlvbiB0aGF0IHJldHVybnMgdW5kZWZpbmVkCiAgICAgIC8vLyBpZiB0aGUgbm9kZSB0eXBlIGRvZXNuJ3QgZ2V0IHRoaXMgcHJvcCwgYW5kIHRoZSBwcm9wJ3MgdmFsdWUgaWYKICAgICAgLy8vIGl0IGRvZXMuCiAgICAgIGFkZChtYXRjaCkgewogICAgICAgICAgaWYgKHRoaXMucGVyTm9kZSkKICAgICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQ2FuJ3QgYWRkIHBlci1ub2RlIHByb3BzIHRvIG5vZGUgdHlwZXMiKTsKICAgICAgICAgIGlmICh0eXBlb2YgbWF0Y2ggIT0gImZ1bmN0aW9uIikKICAgICAgICAgICAgICBtYXRjaCA9IE5vZGVUeXBlLm1hdGNoKG1hdGNoKTsKICAgICAgICAgIHJldHVybiAodHlwZSkgPT4gewogICAgICAgICAgICAgIGxldCByZXN1bHQgPSBtYXRjaCh0eXBlKTsKICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0ID09PSB1bmRlZmluZWQgPyBudWxsIDogW3RoaXMsIHJlc3VsdF07CiAgICAgICAgICB9OwogICAgICB9CiAgfQogIC8vLyBQcm9wIHRoYXQgaXMgdXNlZCB0byBkZXNjcmliZSBtYXRjaGluZyBkZWxpbWl0ZXJzLiBGb3Igb3BlbmluZwogIC8vLyBkZWxpbWl0ZXJzLCB0aGlzIGhvbGRzIGFuIGFycmF5IG9mIG5vZGUgbmFtZXMgKHdyaXR0ZW4gYXMgYQogIC8vLyBzcGFjZS1zZXBhcmF0ZWQgc3RyaW5nIHdoZW4gZGVjbGFyaW5nIHRoaXMgcHJvcCBpbiBhIGdyYW1tYXIpCiAgLy8vIGZvciB0aGUgbm9kZSB0eXBlcyBvZiBjbG9zaW5nIGRlbGltaXRlcnMgdGhhdCBtYXRjaCBpdC4KICBOb2RlUHJvcC5jbG9zZWRCeSA9IG5ldyBOb2RlUHJvcCh7IGRlc2VyaWFsaXplOiBzdHIgPT4gc3RyLnNwbGl0KCIgIikgfSk7CiAgLy8vIFRoZSBpbnZlcnNlIG9mIFtgY2xvc2VkQnlgXSgjY29tbW9uLk5vZGVQcm9wXmNsb3NlZEJ5KS4gVGhpcyBpcwogIC8vLyBhdHRhY2hlZCB0byBjbG9zaW5nIGRlbGltaXRlcnMsIGhvbGRpbmcgYW4gYXJyYXkgb2Ygbm9kZSBuYW1lcwogIC8vLyBvZiB0eXBlcyBvZiBtYXRjaGluZyBvcGVuaW5nIGRlbGltaXRlcnMuCiAgTm9kZVByb3Aub3BlbmVkQnkgPSBuZXcgTm9kZVByb3AoeyBkZXNlcmlhbGl6ZTogc3RyID0+IHN0ci5zcGxpdCgiICIpIH0pOwogIC8vLyBVc2VkIHRvIGFzc2lnbiBub2RlIHR5cGVzIHRvIGdyb3VwcyAoZm9yIGV4YW1wbGUsIGFsbCBub2RlCiAgLy8vIHR5cGVzIHRoYXQgcmVwcmVzZW50IGFuIGV4cHJlc3Npb24gY291bGQgYmUgdGFnZ2VkIHdpdGggYW4KICAvLy8gYCJFeHByZXNzaW9uImAgZ3JvdXApLgogIE5vZGVQcm9wLmdyb3VwID0gbmV3IE5vZGVQcm9wKHsgZGVzZXJpYWxpemU6IHN0ciA9PiBzdHIuc3BsaXQoIiAiKSB9KTsKICAvLy8gVGhlIGhhc2ggb2YgdGhlIFtjb250ZXh0XSgjbHIuQ29udGV4dFRyYWNrZXIuY29uc3RydWN0b3IpCiAgLy8vIHRoYXQgdGhlIG5vZGUgd2FzIHBhcnNlZCBpbiwgaWYgYW55LiBVc2VkIHRvIGxpbWl0IHJldXNlIG9mCiAgLy8vIGNvbnRleHR1YWwgbm9kZXMuCiAgTm9kZVByb3AuY29udGV4dEhhc2ggPSBuZXcgTm9kZVByb3AoeyBwZXJOb2RlOiB0cnVlIH0pOwogIC8vLyBUaGUgZGlzdGFuY2UgYmV5b25kIHRoZSBlbmQgb2YgdGhlIG5vZGUgdGhhdCB0aGUgdG9rZW5pemVyCiAgLy8vIGxvb2tlZCBhaGVhZCBmb3IgYW55IG9mIHRoZSB0b2tlbnMgaW5zaWRlIHRoZSBub2RlLiAoVGhlIExSCiAgLy8vIHBhcnNlciBvbmx5IHN0b3JlcyB0aGlzIHdoZW4gaXQgaXMgbGFyZ2VyIHRoYW4gMjUsIGZvcgogIC8vLyBlZmZpY2llbmN5IHJlYXNvbnMuKQogIE5vZGVQcm9wLmxvb2tBaGVhZCA9IG5ldyBOb2RlUHJvcCh7IHBlck5vZGU6IHRydWUgfSk7CiAgLy8vIFRoaXMgcGVyLW5vZGUgcHJvcCBpcyB1c2VkIHRvIHJlcGxhY2UgYSBnaXZlbiBub2RlLCBvciBwYXJ0IG9mIGEKICAvLy8gbm9kZSwgd2l0aCBhbm90aGVyIHRyZWUuIFRoaXMgaXMgdXNlZnVsIHRvIGluY2x1ZGUgdHJlZXMgZnJvbQogIC8vLyBkaWZmZXJlbnQgbGFuZ3VhZ2VzIGluIG1peGVkLWxhbmd1YWdlIHBhcnNlcnMuCiAgTm9kZVByb3AubW91bnRlZCA9IG5ldyBOb2RlUHJvcCh7IHBlck5vZGU6IHRydWUgfSk7CiAgY29uc3Qgbm9Qcm9wcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7CiAgLy8vIEVhY2ggbm9kZSBpbiBhIHN5bnRheCB0cmVlIGhhcyBhIG5vZGUgdHlwZSBhc3NvY2lhdGVkIHdpdGggaXQuCiAgY2xhc3MgTm9kZVR5cGUgewogICAgICAvLy8gQGludGVybmFsCiAgICAgIGNvbnN0cnVjdG9yKAogICAgICAvLy8gVGhlIG5hbWUgb2YgdGhlIG5vZGUgdHlwZS4gTm90IG5lY2Vzc2FyaWx5IHVuaXF1ZSwgYnV0IGlmIHRoZQogICAgICAvLy8gZ3JhbW1hciB3YXMgd3JpdHRlbiBwcm9wZXJseSwgZGlmZmVyZW50IG5vZGUgdHlwZXMgd2l0aCB0aGUKICAgICAgLy8vIHNhbWUgbmFtZSB3aXRoaW4gYSBub2RlIHNldCBzaG91bGQgcGxheSB0aGUgc2FtZSBzZW1hbnRpYwogICAgICAvLy8gcm9sZS4KICAgICAgbmFtZSwgCiAgICAgIC8vLyBAaW50ZXJuYWwKICAgICAgcHJvcHMsIAogICAgICAvLy8gVGhlIGlkIG9mIHRoaXMgbm9kZSBpbiBpdHMgc2V0LiBDb3JyZXNwb25kcyB0byB0aGUgdGVybSBpZHMKICAgICAgLy8vIHVzZWQgaW4gdGhlIHBhcnNlci4KICAgICAgaWQsIAogICAgICAvLy8gQGludGVybmFsCiAgICAgIGZsYWdzID0gMCkgewogICAgICAgICAgdGhpcy5uYW1lID0gbmFtZTsKICAgICAgICAgIHRoaXMucHJvcHMgPSBwcm9wczsKICAgICAgICAgIHRoaXMuaWQgPSBpZDsKICAgICAgICAgIHRoaXMuZmxhZ3MgPSBmbGFnczsKICAgICAgfQogICAgICAvLy8gRGVmaW5lIGEgbm9kZSB0eXBlLgogICAgICBzdGF0aWMgZGVmaW5lKHNwZWMpIHsKICAgICAgICAgIGxldCBwcm9wcyA9IHNwZWMucHJvcHMgJiYgc3BlYy5wcm9wcy5sZW5ndGggPyBPYmplY3QuY3JlYXRlKG51bGwpIDogbm9Qcm9wczsKICAgICAgICAgIGxldCBmbGFncyA9IChzcGVjLnRvcCA/IDEgLyogVG9wICovIDogMCkgfCAoc3BlYy5za2lwcGVkID8gMiAvKiBTa2lwcGVkICovIDogMCkgfAogICAgICAgICAgICAgIChzcGVjLmVycm9yID8gNCAvKiBFcnJvciAqLyA6IDApIHwgKHNwZWMubmFtZSA9PSBudWxsID8gOCAvKiBBbm9ueW1vdXMgKi8gOiAwKTsKICAgICAgICAgIGxldCB0eXBlID0gbmV3IE5vZGVUeXBlKHNwZWMubmFtZSB8fCAiIiwgcHJvcHMsIHNwZWMuaWQsIGZsYWdzKTsKICAgICAgICAgIGlmIChzcGVjLnByb3BzKQogICAgICAgICAgICAgIGZvciAobGV0IHNyYyBvZiBzcGVjLnByb3BzKSB7CiAgICAgICAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShzcmMpKQogICAgICAgICAgICAgICAgICAgICAgc3JjID0gc3JjKHR5cGUpOwogICAgICAgICAgICAgICAgICBpZiAoc3JjKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAoc3JjWzBdLnBlck5vZGUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkNhbid0IHN0b3JlIGEgcGVyLW5vZGUgcHJvcCBvbiBhIG5vZGUgdHlwZSIpOwogICAgICAgICAgICAgICAgICAgICAgcHJvcHNbc3JjWzBdLmlkXSA9IHNyY1sxXTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiB0eXBlOwogICAgICB9CiAgICAgIC8vLyBSZXRyaWV2ZXMgYSBub2RlIHByb3AgZm9yIHRoaXMgdHlwZS4gV2lsbCByZXR1cm4gYHVuZGVmaW5lZGAgaWYKICAgICAgLy8vIHRoZSBwcm9wIGlzbid0IHByZXNlbnQgb24gdGhpcyBub2RlLgogICAgICBwcm9wKHByb3ApIHsgcmV0dXJuIHRoaXMucHJvcHNbcHJvcC5pZF07IH0KICAgICAgLy8vIFRydWUgd2hlbiB0aGlzIGlzIHRoZSB0b3Agbm9kZSBvZiBhIGdyYW1tYXIuCiAgICAgIGdldCBpc1RvcCgpIHsgcmV0dXJuICh0aGlzLmZsYWdzICYgMSAvKiBUb3AgKi8pID4gMDsgfQogICAgICAvLy8gVHJ1ZSB3aGVuIHRoaXMgbm9kZSBpcyBwcm9kdWNlZCBieSBhIHNraXAgcnVsZS4KICAgICAgZ2V0IGlzU2tpcHBlZCgpIHsgcmV0dXJuICh0aGlzLmZsYWdzICYgMiAvKiBTa2lwcGVkICovKSA+IDA7IH0KICAgICAgLy8vIEluZGljYXRlcyB3aGV0aGVyIHRoaXMgaXMgYW4gZXJyb3Igbm9kZS4KICAgICAgZ2V0IGlzRXJyb3IoKSB7IHJldHVybiAodGhpcy5mbGFncyAmIDQgLyogRXJyb3IgKi8pID4gMDsgfQogICAgICAvLy8gV2hlbiB0cnVlLCB0aGlzIG5vZGUgdHlwZSBkb2Vzbid0IGNvcnJlc3BvbmQgdG8gYSB1c2VyLWRlY2xhcmVkCiAgICAgIC8vLyBuYW1lZCBub2RlLCBmb3IgZXhhbXBsZSBiZWNhdXNlIGl0IGlzIHVzZWQgdG8gY2FjaGUgcmVwZXRpdGlvbi4KICAgICAgZ2V0IGlzQW5vbnltb3VzKCkgeyByZXR1cm4gKHRoaXMuZmxhZ3MgJiA4IC8qIEFub255bW91cyAqLykgPiAwOyB9CiAgICAgIC8vLyBSZXR1cm5zIHRydWUgd2hlbiB0aGlzIG5vZGUncyBuYW1lIG9yIG9uZSBvZiBpdHMKICAgICAgLy8vIFtncm91cHNdKCNjb21tb24uTm9kZVByb3BeZ3JvdXApIG1hdGNoZXMgdGhlIGdpdmVuIHN0cmluZy4KICAgICAgaXMobmFtZSkgewogICAgICAgICAgaWYgKHR5cGVvZiBuYW1lID09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgICAgaWYgKHRoaXMubmFtZSA9PSBuYW1lKQogICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICBsZXQgZ3JvdXAgPSB0aGlzLnByb3AoTm9kZVByb3AuZ3JvdXApOwogICAgICAgICAgICAgIHJldHVybiBncm91cCA/IGdyb3VwLmluZGV4T2YobmFtZSkgPiAtMSA6IGZhbHNlOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHRoaXMuaWQgPT0gbmFtZTsKICAgICAgfQogICAgICAvLy8gQ3JlYXRlIGEgZnVuY3Rpb24gZnJvbSBub2RlIHR5cGVzIHRvIGFyYml0cmFyeSB2YWx1ZXMgYnkKICAgICAgLy8vIHNwZWNpZnlpbmcgYW4gb2JqZWN0IHdob3NlIHByb3BlcnR5IG5hbWVzIGFyZSBub2RlIG9yCiAgICAgIC8vLyBbZ3JvdXBdKCNjb21tb24uTm9kZVByb3BeZ3JvdXApIG5hbWVzLiBPZnRlbiB1c2VmdWwgd2l0aAogICAgICAvLy8gW2BOb2RlUHJvcC5hZGRgXSgjY29tbW9uLk5vZGVQcm9wLmFkZCkuIFlvdSBjYW4gcHV0IG11bHRpcGxlCiAgICAgIC8vLyBuYW1lcywgc2VwYXJhdGVkIGJ5IHNwYWNlcywgaW4gYSBzaW5nbGUgcHJvcGVydHkgbmFtZSB0byBtYXAKICAgICAgLy8vIG11bHRpcGxlIG5vZGUgbmFtZXMgdG8gYSBzaW5nbGUgdmFsdWUuCiAgICAgIHN0YXRpYyBtYXRjaChtYXApIHsKICAgICAgICAgIGxldCBkaXJlY3QgPSBPYmplY3QuY3JlYXRlKG51bGwpOwogICAgICAgICAgZm9yIChsZXQgcHJvcCBpbiBtYXApCiAgICAgICAgICAgICAgZm9yIChsZXQgbmFtZSBvZiBwcm9wLnNwbGl0KCIgIikpCiAgICAgICAgICAgICAgICAgIGRpcmVjdFtuYW1lXSA9IG1hcFtwcm9wXTsKICAgICAgICAgIHJldHVybiAobm9kZSkgPT4gewogICAgICAgICAgICAgIGZvciAobGV0IGdyb3VwcyA9IG5vZGUucHJvcChOb2RlUHJvcC5ncm91cCksIGkgPSAtMTsgaSA8IChncm91cHMgPyBncm91cHMubGVuZ3RoIDogMCk7IGkrKykgewogICAgICAgICAgICAgICAgICBsZXQgZm91bmQgPSBkaXJlY3RbaSA8IDAgPyBub2RlLm5hbWUgOiBncm91cHNbaV1dOwogICAgICAgICAgICAgICAgICBpZiAoZm91bmQpCiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZm91bmQ7CiAgICAgICAgICAgICAgfQogICAgICAgICAgfTsKICAgICAgfQogIH0KICAvLy8gQW4gZW1wdHkgZHVtbXkgbm9kZSB0eXBlIHRvIHVzZSB3aGVuIG5vIGFjdHVhbCB0eXBlIGlzIGF2YWlsYWJsZS4KICBOb2RlVHlwZS5ub25lID0gbmV3IE5vZGVUeXBlKCIiLCBPYmplY3QuY3JlYXRlKG51bGwpLCAwLCA4IC8qIEFub255bW91cyAqLyk7CiAgLy8vIEEgbm9kZSBzZXQgaG9sZHMgYSBjb2xsZWN0aW9uIG9mIG5vZGUgdHlwZXMuIEl0IGlzIHVzZWQgdG8KICAvLy8gY29tcGFjdGx5IHJlcHJlc2VudCB0cmVlcyBieSBzdG9yaW5nIHRoZWlyIHR5cGUgaWRzLCByYXRoZXIgdGhhbiBhCiAgLy8vIGZ1bGwgcG9pbnRlciB0byB0aGUgdHlwZSBvYmplY3QsIGluIGEgbnVtZXJpYyBhcnJheS4gRWFjaCBwYXJzZXIKICAvLy8gW2hhc10oI2xyLkxSUGFyc2VyLm5vZGVTZXQpIGEgbm9kZSBzZXQsIGFuZCBbdHJlZQogIC8vLyBidWZmZXJzXSgjY29tbW9uLlRyZWVCdWZmZXIpIGNhbiBvbmx5IHN0b3JlIGNvbGxlY3Rpb25zIG9mIG5vZGVzCiAgLy8vIGZyb20gdGhlIHNhbWUgc2V0LiBBIHNldCBjYW4gaGF2ZSBhIG1heGltdW0gb2YgMioqMTYgKDY1NTM2KSBub2RlCiAgLy8vIHR5cGVzIGluIGl0LCBzbyB0aGF0IHRoZSBpZHMgZml0IGludG8gMTYtYml0IHR5cGVkIGFycmF5IHNsb3RzLgogIGNsYXNzIE5vZGVTZXQgewogICAgICAvLy8gQ3JlYXRlIGEgc2V0IHdpdGggdGhlIGdpdmVuIHR5cGVzLiBUaGUgYGlkYCBwcm9wZXJ0eSBvZiBlYWNoCiAgICAgIC8vLyB0eXBlIHNob3VsZCBjb3JyZXNwb25kIHRvIGl0cyBwb3NpdGlvbiB3aXRoaW4gdGhlIGFycmF5LgogICAgICBjb25zdHJ1Y3RvcigKICAgICAgLy8vIFRoZSBub2RlIHR5cGVzIGluIHRoaXMgc2V0LCBieSBpZC4KICAgICAgdHlwZXMpIHsKICAgICAgICAgIHRoaXMudHlwZXMgPSB0eXBlczsKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdHlwZXMubGVuZ3RoOyBpKyspCiAgICAgICAgICAgICAgaWYgKHR5cGVzW2ldLmlkICE9IGkpCiAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCJOb2RlIHR5cGUgaWRzIHNob3VsZCBjb3JyZXNwb25kIHRvIGFycmF5IHBvc2l0aW9ucyB3aGVuIGNyZWF0aW5nIGEgbm9kZSBzZXQiKTsKICAgICAgfQogICAgICAvLy8gQ3JlYXRlIGEgY29weSBvZiB0aGlzIHNldCB3aXRoIHNvbWUgbm9kZSBwcm9wZXJ0aWVzIGFkZGVkLiBUaGUKICAgICAgLy8vIGFyZ3VtZW50cyB0byB0aGlzIG1ldGhvZCBjYW4gYmUgY3JlYXRlZCB3aXRoCiAgICAgIC8vLyBbYE5vZGVQcm9wLmFkZGBdKCNjb21tb24uTm9kZVByb3AuYWRkKS4KICAgICAgZXh0ZW5kKC4uLnByb3BzKSB7CiAgICAgICAgICBsZXQgbmV3VHlwZXMgPSBbXTsKICAgICAgICAgIGZvciAobGV0IHR5cGUgb2YgdGhpcy50eXBlcykgewogICAgICAgICAgICAgIGxldCBuZXdQcm9wcyA9IG51bGw7CiAgICAgICAgICAgICAgZm9yIChsZXQgc291cmNlIG9mIHByb3BzKSB7CiAgICAgICAgICAgICAgICAgIGxldCBhZGQgPSBzb3VyY2UodHlwZSk7CiAgICAgICAgICAgICAgICAgIGlmIChhZGQpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmICghbmV3UHJvcHMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3UHJvcHMgPSBPYmplY3QuYXNzaWduKHt9LCB0eXBlLnByb3BzKTsKICAgICAgICAgICAgICAgICAgICAgIG5ld1Byb3BzW2FkZFswXS5pZF0gPSBhZGRbMV07CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgbmV3VHlwZXMucHVzaChuZXdQcm9wcyA/IG5ldyBOb2RlVHlwZSh0eXBlLm5hbWUsIG5ld1Byb3BzLCB0eXBlLmlkLCB0eXBlLmZsYWdzKSA6IHR5cGUpOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIG5ldyBOb2RlU2V0KG5ld1R5cGVzKTsKICAgICAgfQogIH0KICBjb25zdCBDYWNoZWROb2RlID0gbmV3IFdlYWtNYXAoKSwgQ2FjaGVkSW5uZXJOb2RlID0gbmV3IFdlYWtNYXAoKTsKICAvLy8gT3B0aW9ucyB0aGF0IGNvbnRyb2wgaXRlcmF0aW9uLiBDYW4gYmUgY29tYmluZWQgd2l0aCB0aGUgYHxgCiAgLy8vIG9wZXJhdG9yIHRvIGVuYWJsZSBtdWx0aXBsZSBvbmVzLgogIHZhciBJdGVyTW9kZTsKICAoZnVuY3Rpb24gKEl0ZXJNb2RlKSB7CiAgICAgIC8vLyBXaGVuIGVuYWJsZWQsIGl0ZXJhdGlvbiB3aWxsIG9ubHkgdmlzaXQgW2BUcmVlYF0oI2NvbW1vbi5UcmVlKQogICAgICAvLy8gb2JqZWN0cywgbm90IG5vZGVzIHBhY2tlZCBpbnRvCiAgICAgIC8vLyBbYFRyZWVCdWZmZXJgXSgjY29tbW9uLlRyZWVCdWZmZXIpcy4KICAgICAgSXRlck1vZGVbSXRlck1vZGVbIkV4Y2x1ZGVCdWZmZXJzIl0gPSAxXSA9ICJFeGNsdWRlQnVmZmVycyI7CiAgICAgIC8vLyBFbmFibGUgdGhpcyB0byBtYWtlIGl0ZXJhdGlvbiBpbmNsdWRlIGFub255bW91cyBub2RlcyAoc3VjaCBhcwogICAgICAvLy8gdGhlIG5vZGVzIHRoYXQgd3JhcCByZXBlYXRlZCBncmFtbWFyIGNvbnN0cnVjdHMgaW50byBhIGJhbGFuY2VkCiAgICAgIC8vLyB0cmVlKS4KICAgICAgSXRlck1vZGVbSXRlck1vZGVbIkluY2x1ZGVBbm9ueW1vdXMiXSA9IDJdID0gIkluY2x1ZGVBbm9ueW1vdXMiOwogICAgICAvLy8gQnkgZGVmYXVsdCwgcmVndWxhciBbbW91bnRlZF0oI2NvbW1vbi5Ob2RlUHJvcF5tb3VudGVkKSBub2RlcwogICAgICAvLy8gcmVwbGFjZSB0aGVpciBiYXNlIG5vZGUgaW4gaXRlcmF0aW9uLiBFbmFibGUgdGhpcyB0byBpZ25vcmUgdGhlbQogICAgICAvLy8gaW5zdGVhZC4KICAgICAgSXRlck1vZGVbSXRlck1vZGVbIklnbm9yZU1vdW50cyJdID0gNF0gPSAiSWdub3JlTW91bnRzIjsKICAgICAgLy8vIFRoaXMgb3B0aW9uIG9ubHkgYXBwbGllcyBpbgogICAgICAvLy8gW2BlbnRlcmBdKCNjb21tb24uU3ludGF4Tm9kZS5lbnRlciktc3R5bGUgbWV0aG9kcy4gSXQgdGVsbHMgdGhlCiAgICAgIC8vLyBsaWJyYXJ5IHRvIG5vdCBlbnRlciBtb3VudGVkIG92ZXJsYXlzIGlmIG9uZSBjb3ZlcnMgdGhlIGdpdmVuCiAgICAgIC8vLyBwb3NpdGlvbi4KICAgICAgSXRlck1vZGVbSXRlck1vZGVbIklnbm9yZU92ZXJsYXlzIl0gPSA4XSA9ICJJZ25vcmVPdmVybGF5cyI7CiAgfSkoSXRlck1vZGUgfHwgKEl0ZXJNb2RlID0ge30pKTsKICAvLy8gQSBwaWVjZSBvZiBzeW50YXggdHJlZS4gVGhlcmUgYXJlIHR3byB3YXlzIHRvIGFwcHJvYWNoIHRoZXNlCiAgLy8vIHRyZWVzOiB0aGUgd2F5IHRoZXkgYXJlIGFjdHVhbGx5IHN0b3JlZCBpbiBtZW1vcnksIGFuZCB0aGUKICAvLy8gY29udmVuaWVudCB3YXkuCiAgLy8vCiAgLy8vIFN5bnRheCB0cmVlcyBhcmUgc3RvcmVkIGFzIGEgdHJlZSBvZiBgVHJlZWAgYW5kIGBUcmVlQnVmZmVyYAogIC8vLyBvYmplY3RzLiBCeSBwYWNraW5nIGRldGFpbCBpbmZvcm1hdGlvbiBpbnRvIGBUcmVlQnVmZmVyYCBsZWFmCiAgLy8vIG5vZGVzLCB0aGUgcmVwcmVzZW50YXRpb24gaXMgbWFkZSBhIGxvdCBtb3JlIG1lbW9yeS1lZmZpY2llbnQuCiAgLy8vCiAgLy8vIEhvd2V2ZXIsIHdoZW4geW91IHdhbnQgdG8gYWN0dWFsbHkgd29yayB3aXRoIHRyZWUgbm9kZXMsIHRoaXMKICAvLy8gcmVwcmVzZW50YXRpb24gaXMgdmVyeSBhd2t3YXJkLCBzbyBtb3N0IGNsaWVudCBjb2RlIHdpbGwgd2FudCB0bwogIC8vLyB1c2UgdGhlIFtgVHJlZUN1cnNvcmBdKCNjb21tb24uVHJlZUN1cnNvcikgb3IKICAvLy8gW2BTeW50YXhOb2RlYF0oI2NvbW1vbi5TeW50YXhOb2RlKSBpbnRlcmZhY2UgaW5zdGVhZCwgd2hpY2ggcHJvdmlkZXMKICAvLy8gYSB2aWV3IG9uIHNvbWUgcGFydCBvZiB0aGlzIGRhdGEgc3RydWN0dXJlLCBhbmQgY2FuIGJlIHVzZWQgdG8KICAvLy8gbW92ZSBhcm91bmQgdG8gYWRqYWNlbnQgbm9kZXMuCiAgY2xhc3MgVHJlZSB7CiAgICAgIC8vLyBDb25zdHJ1Y3QgYSBuZXcgdHJlZS4gU2VlIGFsc28gW2BUcmVlLmJ1aWxkYF0oI2NvbW1vbi5UcmVlXmJ1aWxkKS4KICAgICAgY29uc3RydWN0b3IoCiAgICAgIC8vLyBUaGUgdHlwZSBvZiB0aGUgdG9wIG5vZGUuCiAgICAgIHR5cGUsIAogICAgICAvLy8gVGhpcyBub2RlJ3MgY2hpbGQgbm9kZXMuCiAgICAgIGNoaWxkcmVuLCAKICAgICAgLy8vIFRoZSBwb3NpdGlvbnMgKG9mZnNldHMgcmVsYXRpdmUgdG8gdGhlIHN0YXJ0IG9mIHRoaXMgdHJlZSkgb2YKICAgICAgLy8vIHRoZSBjaGlsZHJlbi4KICAgICAgcG9zaXRpb25zLCAKICAgICAgLy8vIFRoZSB0b3RhbCBsZW5ndGggb2YgdGhpcyB0cmVlCiAgICAgIGxlbmd0aCwgCiAgICAgIC8vLyBQZXItbm9kZSBbbm9kZSBwcm9wc10oI2NvbW1vbi5Ob2RlUHJvcCkgdG8gYXNzb2NpYXRlIHdpdGggdGhpcyBub2RlLgogICAgICBwcm9wcykgewogICAgICAgICAgdGhpcy50eXBlID0gdHlwZTsKICAgICAgICAgIHRoaXMuY2hpbGRyZW4gPSBjaGlsZHJlbjsKICAgICAgICAgIHRoaXMucG9zaXRpb25zID0gcG9zaXRpb25zOwogICAgICAgICAgdGhpcy5sZW5ndGggPSBsZW5ndGg7CiAgICAgICAgICAvLy8gQGludGVybmFsCiAgICAgICAgICB0aGlzLnByb3BzID0gbnVsbDsKICAgICAgICAgIGlmIChwcm9wcyAmJiBwcm9wcy5sZW5ndGgpIHsKICAgICAgICAgICAgICB0aGlzLnByb3BzID0gT2JqZWN0LmNyZWF0ZShudWxsKTsKICAgICAgICAgICAgICBmb3IgKGxldCBbcHJvcCwgdmFsdWVdIG9mIHByb3BzKQogICAgICAgICAgICAgICAgICB0aGlzLnByb3BzW3R5cGVvZiBwcm9wID09ICJudW1iZXIiID8gcHJvcCA6IHByb3AuaWRdID0gdmFsdWU7CiAgICAgICAgICB9CiAgICAgIH0KICAgICAgLy8vIEBpbnRlcm5hbAogICAgICB0b1N0cmluZygpIHsKICAgICAgICAgIGxldCBtb3VudGVkID0gdGhpcy5wcm9wKE5vZGVQcm9wLm1vdW50ZWQpOwogICAgICAgICAgaWYgKG1vdW50ZWQgJiYgIW1vdW50ZWQub3ZlcmxheSkKICAgICAgICAgICAgICByZXR1cm4gbW91bnRlZC50cmVlLnRvU3RyaW5nKCk7CiAgICAgICAgICBsZXQgY2hpbGRyZW4gPSAiIjsKICAgICAgICAgIGZvciAobGV0IGNoIG9mIHRoaXMuY2hpbGRyZW4pIHsKICAgICAgICAgICAgICBsZXQgc3RyID0gY2gudG9TdHJpbmcoKTsKICAgICAgICAgICAgICBpZiAoc3RyKSB7CiAgICAgICAgICAgICAgICAgIGlmIChjaGlsZHJlbikKICAgICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuICs9ICIsIjsKICAgICAgICAgICAgICAgICAgY2hpbGRyZW4gKz0gc3RyOwogICAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiAhdGhpcy50eXBlLm5hbWUgPyBjaGlsZHJlbiA6CiAgICAgICAgICAgICAgKC9cVy8udGVzdCh0aGlzLnR5cGUubmFtZSkgJiYgIXRoaXMudHlwZS5pc0Vycm9yID8gSlNPTi5zdHJpbmdpZnkodGhpcy50eXBlLm5hbWUpIDogdGhpcy50eXBlLm5hbWUpICsKICAgICAgICAgICAgICAgICAgKGNoaWxkcmVuLmxlbmd0aCA/ICIoIiArIGNoaWxkcmVuICsgIikiIDogIiIpOwogICAgICB9CiAgICAgIC8vLyBHZXQgYSBbdHJlZSBjdXJzb3JdKCNjb21tb24uVHJlZUN1cnNvcikgcG9zaXRpb25lZCBhdCB0aGUgdG9wIG9mCiAgICAgIC8vLyB0aGUgdHJlZS4gTW9kZSBjYW4gYmUgdXNlZCB0byBbY29udHJvbF0oI2NvbW1vbi5JdGVyTW9kZSkgd2hpY2gKICAgICAgLy8vIG5vZGVzIHRoZSBjdXJzb3IgdmlzaXRzLgogICAgICBjdXJzb3IobW9kZSA9IDApIHsKICAgICAgICAgIHJldHVybiBuZXcgVHJlZUN1cnNvcih0aGlzLnRvcE5vZGUsIG1vZGUpOwogICAgICB9CiAgICAgIC8vLyBHZXQgYSBbdHJlZSBjdXJzb3JdKCNjb21tb24uVHJlZUN1cnNvcikgcG9pbnRpbmcgaW50byB0aGlzIHRyZWUKICAgICAgLy8vIGF0IHRoZSBnaXZlbiBwb3NpdGlvbiBhbmQgc2lkZSAoc2VlCiAgICAgIC8vLyBbYG1vdmVUb2BdKCNjb21tb24uVHJlZUN1cnNvci5tb3ZlVG8pLgogICAgICBjdXJzb3JBdChwb3MsIHNpZGUgPSAwLCBtb2RlID0gMCkgewogICAgICAgICAgbGV0IHNjb3BlID0gQ2FjaGVkTm9kZS5nZXQodGhpcykgfHwgdGhpcy50b3BOb2RlOwogICAgICAgICAgbGV0IGN1cnNvciA9IG5ldyBUcmVlQ3Vyc29yKHNjb3BlKTsKICAgICAgICAgIGN1cnNvci5tb3ZlVG8ocG9zLCBzaWRlKTsKICAgICAgICAgIENhY2hlZE5vZGUuc2V0KHRoaXMsIGN1cnNvci5fdHJlZSk7CiAgICAgICAgICByZXR1cm4gY3Vyc29yOwogICAgICB9CiAgICAgIC8vLyBHZXQgYSBbc3ludGF4IG5vZGVdKCNjb21tb24uU3ludGF4Tm9kZSkgb2JqZWN0IGZvciB0aGUgdG9wIG9mIHRoZQogICAgICAvLy8gdHJlZS4KICAgICAgZ2V0IHRvcE5vZGUoKSB7CiAgICAgICAgICByZXR1cm4gbmV3IFRyZWVOb2RlKHRoaXMsIDAsIDAsIG51bGwpOwogICAgICB9CiAgICAgIC8vLyBHZXQgdGhlIFtzeW50YXggbm9kZV0oI2NvbW1vbi5TeW50YXhOb2RlKSBhdCB0aGUgZ2l2ZW4gcG9zaXRpb24uCiAgICAgIC8vLyBJZiBgc2lkZWAgaXMgLTEsIHRoaXMgd2lsbCBtb3ZlIGludG8gbm9kZXMgdGhhdCBlbmQgYXQgdGhlCiAgICAgIC8vLyBwb3NpdGlvbi4gSWYgMSwgaXQnbGwgbW92ZSBpbnRvIG5vZGVzIHRoYXQgc3RhcnQgYXQgdGhlCiAgICAgIC8vLyBwb3NpdGlvbi4gV2l0aCAwLCBpdCdsbCBvbmx5IGVudGVyIG5vZGVzIHRoYXQgY292ZXIgdGhlIHBvc2l0aW9uCiAgICAgIC8vLyBmcm9tIGJvdGggc2lkZXMuCiAgICAgIC8vLwogICAgICAvLy8gTm90ZSB0aGF0IHRoaXMgd2lsbCBub3QgZW50ZXIKICAgICAgLy8vIFtvdmVybGF5c10oI2NvbW1vbi5Nb3VudGVkVHJlZS5vdmVybGF5KSwgYW5kIHlvdSBvZnRlbiB3YW50CiAgICAgIC8vLyBbYHJlc29sdmVJbm5lcmBdKCNjb21tb24uVHJlZS5yZXNvbHZlSW5uZXIpIGluc3RlYWQuCiAgICAgIHJlc29sdmUocG9zLCBzaWRlID0gMCkgewogICAgICAgICAgbGV0IG5vZGUgPSByZXNvbHZlTm9kZShDYWNoZWROb2RlLmdldCh0aGlzKSB8fCB0aGlzLnRvcE5vZGUsIHBvcywgc2lkZSwgZmFsc2UpOwogICAgICAgICAgQ2FjaGVkTm9kZS5zZXQodGhpcywgbm9kZSk7CiAgICAgICAgICByZXR1cm4gbm9kZTsKICAgICAgfQogICAgICAvLy8gTGlrZSBbYHJlc29sdmVgXSgjY29tbW9uLlRyZWUucmVzb2x2ZSksIGJ1dCB3aWxsIGVudGVyCiAgICAgIC8vLyBbb3ZlcmxhaWRdKCNjb21tb24uTW91bnRlZFRyZWUub3ZlcmxheSkgbm9kZXMsIHByb2R1Y2luZyBhIHN5bnRheCBub2RlCiAgICAgIC8vLyBwb2ludGluZyBpbnRvIHRoZSBpbm5lcm1vc3Qgb3ZlcmxhaWQgdHJlZSBhdCB0aGUgZ2l2ZW4gcG9zaXRpb24KICAgICAgLy8vICh3aXRoIHBhcmVudCBsaW5rcyBnb2luZyB0aHJvdWdoIGFsbCBwYXJlbnQgc3RydWN0dXJlLCBpbmNsdWRpbmcKICAgICAgLy8vIHRoZSBob3N0IHRyZWVzKS4KICAgICAgcmVzb2x2ZUlubmVyKHBvcywgc2lkZSA9IDApIHsKICAgICAgICAgIGxldCBub2RlID0gcmVzb2x2ZU5vZGUoQ2FjaGVkSW5uZXJOb2RlLmdldCh0aGlzKSB8fCB0aGlzLnRvcE5vZGUsIHBvcywgc2lkZSwgdHJ1ZSk7CiAgICAgICAgICBDYWNoZWRJbm5lck5vZGUuc2V0KHRoaXMsIG5vZGUpOwogICAgICAgICAgcmV0dXJuIG5vZGU7CiAgICAgIH0KICAgICAgLy8vIEl0ZXJhdGUgb3ZlciB0aGUgdHJlZSBhbmQgaXRzIGNoaWxkcmVuLCBjYWxsaW5nIGBlbnRlcmAgZm9yIGFueQogICAgICAvLy8gbm9kZSB0aGF0IHRvdWNoZXMgdGhlIGBmcm9tYC9gdG9gIHJlZ2lvbiAoaWYgZ2l2ZW4pIGJlZm9yZQogICAgICAvLy8gcnVubmluZyBvdmVyIHN1Y2ggYSBub2RlJ3MgY2hpbGRyZW4sIGFuZCBgbGVhdmVgIChpZiBnaXZlbikgd2hlbgogICAgICAvLy8gbGVhdmluZyB0aGUgbm9kZS4gV2hlbiBgZW50ZXJgIHJldHVybnMgYGZhbHNlYCwgdGhhdCBub2RlIHdpbGwKICAgICAgLy8vIG5vdCBoYXZlIGl0cyBjaGlsZHJlbiBpdGVyYXRlZCBvdmVyIChvciBgbGVhdmVgIGNhbGxlZCkuCiAgICAgIGl0ZXJhdGUoc3BlYykgewogICAgICAgICAgbGV0IHsgZW50ZXIsIGxlYXZlLCBmcm9tID0gMCwgdG8gPSB0aGlzLmxlbmd0aCB9ID0gc3BlYzsKICAgICAgICAgIGZvciAobGV0IGMgPSB0aGlzLmN1cnNvcigoc3BlYy5tb2RlIHx8IDApIHwgSXRlck1vZGUuSW5jbHVkZUFub255bW91cyk7OykgewogICAgICAgICAgICAgIGxldCBlbnRlcmVkID0gZmFsc2U7CiAgICAgICAgICAgICAgaWYgKGMuZnJvbSA8PSB0byAmJiBjLnRvID49IGZyb20gJiYgKGMudHlwZS5pc0Fub255bW91cyB8fCBlbnRlcihjKSAhPT0gZmFsc2UpKSB7CiAgICAgICAgICAgICAgICAgIGlmIChjLmZpcnN0Q2hpbGQoKSkKICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICBlbnRlcmVkID0gdHJ1ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgZm9yICg7OykgewogICAgICAgICAgICAgICAgICBpZiAoZW50ZXJlZCAmJiBsZWF2ZSAmJiAhYy50eXBlLmlzQW5vbnltb3VzKQogICAgICAgICAgICAgICAgICAgICAgbGVhdmUoYyk7CiAgICAgICAgICAgICAgICAgIGlmIChjLm5leHRTaWJsaW5nKCkpCiAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgaWYgKCFjLnBhcmVudCgpKQogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICBlbnRlcmVkID0gdHJ1ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgIH0KICAgICAgLy8vIEdldCB0aGUgdmFsdWUgb2YgdGhlIGdpdmVuIFtub2RlIHByb3BdKCNjb21tb24uTm9kZVByb3ApIGZvciB0aGlzCiAgICAgIC8vLyBub2RlLiBXb3JrcyB3aXRoIGJvdGggcGVyLW5vZGUgYW5kIHBlci10eXBlIHByb3BzLgogICAgICBwcm9wKHByb3ApIHsKICAgICAgICAgIHJldHVybiAhcHJvcC5wZXJOb2RlID8gdGhpcy50eXBlLnByb3AocHJvcCkgOiB0aGlzLnByb3BzID8gdGhpcy5wcm9wc1twcm9wLmlkXSA6IHVuZGVmaW5lZDsKICAgICAgfQogICAgICAvLy8gUmV0dXJucyB0aGUgbm9kZSdzIFtwZXItbm9kZSBwcm9wc10oI2NvbW1vbi5Ob2RlUHJvcC5wZXJOb2RlKSBpbiBhCiAgICAgIC8vLyBmb3JtYXQgdGhhdCBjYW4gYmUgcGFzc2VkIHRvIHRoZSBbYFRyZWVgXSgjY29tbW9uLlRyZWUpCiAgICAgIC8vLyBjb25zdHJ1Y3Rvci4KICAgICAgZ2V0IHByb3BWYWx1ZXMoKSB7CiAgICAgICAgICBsZXQgcmVzdWx0ID0gW107CiAgICAgICAgICBpZiAodGhpcy5wcm9wcykKICAgICAgICAgICAgICBmb3IgKGxldCBpZCBpbiB0aGlzLnByb3BzKQogICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChbK2lkLCB0aGlzLnByb3BzW2lkXV0pOwogICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgfQogICAgICAvLy8gQmFsYW5jZSB0aGUgZGlyZWN0IGNoaWxkcmVuIG9mIHRoaXMgdHJlZSwgcHJvZHVjaW5nIGEgY29weSBvZgogICAgICAvLy8gd2hpY2ggbWF5IGhhdmUgY2hpbGRyZW4gZ3JvdXBlZCBpbnRvIHN1YnRyZWVzIHdpdGggdHlwZQogICAgICAvLy8gW2BOb2RlVHlwZS5ub25lYF0oI2NvbW1vbi5Ob2RlVHlwZV5ub25lKS4KICAgICAgYmFsYW5jZShjb25maWcgPSB7fSkgewogICAgICAgICAgcmV0dXJuIHRoaXMuY2hpbGRyZW4ubGVuZ3RoIDw9IDggLyogQnJhbmNoRmFjdG9yICovID8gdGhpcyA6CiAgICAgICAgICAgICAgYmFsYW5jZVJhbmdlKE5vZGVUeXBlLm5vbmUsIHRoaXMuY2hpbGRyZW4sIHRoaXMucG9zaXRpb25zLCAwLCB0aGlzLmNoaWxkcmVuLmxlbmd0aCwgMCwgdGhpcy5sZW5ndGgsIChjaGlsZHJlbiwgcG9zaXRpb25zLCBsZW5ndGgpID0+IG5ldyBUcmVlKHRoaXMudHlwZSwgY2hpbGRyZW4sIHBvc2l0aW9ucywgbGVuZ3RoLCB0aGlzLnByb3BWYWx1ZXMpLCBjb25maWcubWFrZVRyZWUgfHwgKChjaGlsZHJlbiwgcG9zaXRpb25zLCBsZW5ndGgpID0+IG5ldyBUcmVlKE5vZGVUeXBlLm5vbmUsIGNoaWxkcmVuLCBwb3NpdGlvbnMsIGxlbmd0aCkpKTsKICAgICAgfQogICAgICAvLy8gQnVpbGQgYSB0cmVlIGZyb20gYSBwb3N0Zml4LW9yZGVyZWQgYnVmZmVyIG9mIG5vZGUgaW5mb3JtYXRpb24sCiAgICAgIC8vLyBvciBhIGN1cnNvciBvdmVyIHN1Y2ggYSBidWZmZXIuCiAgICAgIHN0YXRpYyBidWlsZChkYXRhKSB7IHJldHVybiBidWlsZFRyZWUoZGF0YSk7IH0KICB9CiAgLy8vIFRoZSBlbXB0eSB0cmVlCiAgVHJlZS5lbXB0eSA9IG5ldyBUcmVlKE5vZGVUeXBlLm5vbmUsIFtdLCBbXSwgMCk7CiAgY2xhc3MgRmxhdEJ1ZmZlckN1cnNvciB7CiAgICAgIGNvbnN0cnVjdG9yKGJ1ZmZlciwgaW5kZXgpIHsKICAgICAgICAgIHRoaXMuYnVmZmVyID0gYnVmZmVyOwogICAgICAgICAgdGhpcy5pbmRleCA9IGluZGV4OwogICAgICB9CiAgICAgIGdldCBpZCgpIHsgcmV0dXJuIHRoaXMuYnVmZmVyW3RoaXMuaW5kZXggLSA0XTsgfQogICAgICBnZXQgc3RhcnQoKSB7IHJldHVybiB0aGlzLmJ1ZmZlclt0aGlzLmluZGV4IC0gM107IH0KICAgICAgZ2V0IGVuZCgpIHsgcmV0dXJuIHRoaXMuYnVmZmVyW3RoaXMuaW5kZXggLSAyXTsgfQogICAgICBnZXQgc2l6ZSgpIHsgcmV0dXJuIHRoaXMuYnVmZmVyW3RoaXMuaW5kZXggLSAxXTsgfQogICAgICBnZXQgcG9zKCkgeyByZXR1cm4gdGhpcy5pbmRleDsgfQogICAgICBuZXh0KCkgeyB0aGlzLmluZGV4IC09IDQ7IH0KICAgICAgZm9yaygpIHsgcmV0dXJuIG5ldyBGbGF0QnVmZmVyQ3Vyc29yKHRoaXMuYnVmZmVyLCB0aGlzLmluZGV4KTsgfQogIH0KICAvLy8gVHJlZSBidWZmZXJzIGNvbnRhaW4gKHR5cGUsIHN0YXJ0LCBlbmQsIGVuZEluZGV4KSBxdWFkcyBmb3IgZWFjaAogIC8vLyBub2RlLiBJbiBzdWNoIGEgYnVmZmVyLCBub2RlcyBhcmUgc3RvcmVkIGluIHByZWZpeCBvcmRlciAocGFyZW50cwogIC8vLyBiZWZvcmUgY2hpbGRyZW4sIHdpdGggdGhlIGVuZEluZGV4IG9mIHRoZSBwYXJlbnQgaW5kaWNhdGluZyB3aGljaAogIC8vLyBjaGlsZHJlbiBiZWxvbmcgdG8gaXQpLgogIGNsYXNzIFRyZWVCdWZmZXIgewogICAgICAvLy8gQ3JlYXRlIGEgdHJlZSBidWZmZXIuCiAgICAgIGNvbnN0cnVjdG9yKAogICAgICAvLy8gVGhlIGJ1ZmZlcidzIGNvbnRlbnQuCiAgICAgIGJ1ZmZlciwgCiAgICAgIC8vLyBUaGUgdG90YWwgbGVuZ3RoIG9mIHRoZSBncm91cCBvZiBub2RlcyBpbiB0aGUgYnVmZmVyLgogICAgICBsZW5ndGgsIAogICAgICAvLy8gVGhlIG5vZGUgc2V0IHVzZWQgaW4gdGhpcyBidWZmZXIuCiAgICAgIHNldCkgewogICAgICAgICAgdGhpcy5idWZmZXIgPSBidWZmZXI7CiAgICAgICAgICB0aGlzLmxlbmd0aCA9IGxlbmd0aDsKICAgICAgICAgIHRoaXMuc2V0ID0gc2V0OwogICAgICB9CiAgICAgIC8vLyBAaW50ZXJuYWwKICAgICAgZ2V0IHR5cGUoKSB7IHJldHVybiBOb2RlVHlwZS5ub25lOyB9CiAgICAgIC8vLyBAaW50ZXJuYWwKICAgICAgdG9TdHJpbmcoKSB7CiAgICAgICAgICBsZXQgcmVzdWx0ID0gW107CiAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5idWZmZXIubGVuZ3RoOykgewogICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHRoaXMuY2hpbGRTdHJpbmcoaW5kZXgpKTsKICAgICAgICAgICAgICBpbmRleCA9IHRoaXMuYnVmZmVyW2luZGV4ICsgM107CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gcmVzdWx0LmpvaW4oIiwiKTsKICAgICAgfQogICAgICAvLy8gQGludGVybmFsCiAgICAgIGNoaWxkU3RyaW5nKGluZGV4KSB7CiAgICAgICAgICBsZXQgaWQgPSB0aGlzLmJ1ZmZlcltpbmRleF0sIGVuZEluZGV4ID0gdGhpcy5idWZmZXJbaW5kZXggKyAzXTsKICAgICAgICAgIGxldCB0eXBlID0gdGhpcy5zZXQudHlwZXNbaWRdLCByZXN1bHQgPSB0eXBlLm5hbWU7CiAgICAgICAgICBpZiAoL1xXLy50ZXN0KHJlc3VsdCkgJiYgIXR5cGUuaXNFcnJvcikKICAgICAgICAgICAgICByZXN1bHQgPSBKU09OLnN0cmluZ2lmeShyZXN1bHQpOwogICAgICAgICAgaW5kZXggKz0gNDsKICAgICAgICAgIGlmIChlbmRJbmRleCA9PSBpbmRleCkKICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICAgICAgbGV0IGNoaWxkcmVuID0gW107CiAgICAgICAgICB3aGlsZSAoaW5kZXggPCBlbmRJbmRleCkgewogICAgICAgICAgICAgIGNoaWxkcmVuLnB1c2godGhpcy5jaGlsZFN0cmluZyhpbmRleCkpOwogICAgICAgICAgICAgIGluZGV4ID0gdGhpcy5idWZmZXJbaW5kZXggKyAzXTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiByZXN1bHQgKyAiKCIgKyBjaGlsZHJlbi5qb2luKCIsIikgKyAiKSI7CiAgICAgIH0KICAgICAgLy8vIEBpbnRlcm5hbAogICAgICBmaW5kQ2hpbGQoc3RhcnRJbmRleCwgZW5kSW5kZXgsIGRpciwgcG9zLCBzaWRlKSB7CiAgICAgICAgICBsZXQgeyBidWZmZXIgfSA9IHRoaXMsIHBpY2sgPSAtMTsKICAgICAgICAgIGZvciAobGV0IGkgPSBzdGFydEluZGV4OyBpICE9IGVuZEluZGV4OyBpID0gYnVmZmVyW2kgKyAzXSkgewogICAgICAgICAgICAgIGlmIChjaGVja1NpZGUoc2lkZSwgcG9zLCBidWZmZXJbaSArIDFdLCBidWZmZXJbaSArIDJdKSkgewogICAgICAgICAgICAgICAgICBwaWNrID0gaTsKICAgICAgICAgICAgICAgICAgaWYgKGRpciA+IDApCiAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gcGljazsKICAgICAgfQogICAgICAvLy8gQGludGVybmFsCiAgICAgIHNsaWNlKHN0YXJ0SSwgZW5kSSwgZnJvbSwgdG8pIHsKICAgICAgICAgIGxldCBiID0gdGhpcy5idWZmZXI7CiAgICAgICAgICBsZXQgY29weSA9IG5ldyBVaW50MTZBcnJheShlbmRJIC0gc3RhcnRJKTsKICAgICAgICAgIGZvciAobGV0IGkgPSBzdGFydEksIGogPSAwOyBpIDwgZW5kSTspIHsKICAgICAgICAgICAgICBjb3B5W2orK10gPSBiW2krK107CiAgICAgICAgICAgICAgY29weVtqKytdID0gYltpKytdIC0gZnJvbTsKICAgICAgICAgICAgICBjb3B5W2orK10gPSBiW2krK10gLSBmcm9tOwogICAgICAgICAgICAgIGNvcHlbaisrXSA9IGJbaSsrXSAtIHN0YXJ0STsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBuZXcgVHJlZUJ1ZmZlcihjb3B5LCB0byAtIGZyb20sIHRoaXMuc2V0KTsKICAgICAgfQogIH0KICBmdW5jdGlvbiBjaGVja1NpZGUoc2lkZSwgcG9zLCBmcm9tLCB0bykgewogICAgICBzd2l0Y2ggKHNpZGUpIHsKICAgICAgICAgIGNhc2UgLTIgLyogQmVmb3JlICovOiByZXR1cm4gZnJvbSA8IHBvczsKICAgICAgICAgIGNhc2UgLTEgLyogQXRPckJlZm9yZSAqLzogcmV0dXJuIHRvID49IHBvcyAmJiBmcm9tIDwgcG9zOwogICAgICAgICAgY2FzZSAwIC8qIEFyb3VuZCAqLzogcmV0dXJuIGZyb20gPCBwb3MgJiYgdG8gPiBwb3M7CiAgICAgICAgICBjYXNlIDEgLyogQXRPckFmdGVyICovOiByZXR1cm4gZnJvbSA8PSBwb3MgJiYgdG8gPiBwb3M7CiAgICAgICAgICBjYXNlIDIgLyogQWZ0ZXIgKi86IHJldHVybiB0byA+IHBvczsKICAgICAgICAgIGNhc2UgNCAvKiBEb250Q2FyZSAqLzogcmV0dXJuIHRydWU7CiAgICAgIH0KICB9CiAgZnVuY3Rpb24gZW50ZXJVbmZpbmlzaGVkTm9kZXNCZWZvcmUobm9kZSwgcG9zKSB7CiAgICAgIGxldCBzY2FuID0gbm9kZS5jaGlsZEJlZm9yZShwb3MpOwogICAgICB3aGlsZSAoc2NhbikgewogICAgICAgICAgbGV0IGxhc3QgPSBzY2FuLmxhc3RDaGlsZDsKICAgICAgICAgIGlmICghbGFzdCB8fCBsYXN0LnRvICE9IHNjYW4udG8pCiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBpZiAobGFzdC50eXBlLmlzRXJyb3IgJiYgbGFzdC5mcm9tID09IGxhc3QudG8pIHsKICAgICAgICAgICAgICBub2RlID0gc2NhbjsKICAgICAgICAgICAgICBzY2FuID0gbGFzdC5wcmV2U2libGluZzsKICAgICAgICAgIH0KICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgIHNjYW4gPSBsYXN0OwogICAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBub2RlOwogIH0KICBmdW5jdGlvbiByZXNvbHZlTm9kZShub2RlLCBwb3MsIHNpZGUsIG92ZXJsYXlzKSB7CiAgICAgIHZhciBfYTsKICAgICAgLy8gTW92ZSB1cCB0byBhIG5vZGUgdGhhdCBhY3R1YWxseSBob2xkcyB0aGUgcG9zaXRpb24sIGlmIHBvc3NpYmxlCiAgICAgIHdoaWxlIChub2RlLmZyb20gPT0gbm9kZS50byB8fAogICAgICAgICAgKHNpZGUgPCAxID8gbm9kZS5mcm9tID49IHBvcyA6IG5vZGUuZnJvbSA+IHBvcykgfHwKICAgICAgICAgIChzaWRlID4gLTEgPyBub2RlLnRvIDw9IHBvcyA6IG5vZGUudG8gPCBwb3MpKSB7CiAgICAgICAgICBsZXQgcGFyZW50ID0gIW92ZXJsYXlzICYmIG5vZGUgaW5zdGFuY2VvZiBUcmVlTm9kZSAmJiBub2RlLmluZGV4IDwgMCA/IG51bGwgOiBub2RlLnBhcmVudDsKICAgICAgICAgIGlmICghcGFyZW50KQogICAgICAgICAgICAgIHJldHVybiBub2RlOwogICAgICAgICAgbm9kZSA9IHBhcmVudDsKICAgICAgfQogICAgICBsZXQgbW9kZSA9IG92ZXJsYXlzID8gMCA6IEl0ZXJNb2RlLklnbm9yZU92ZXJsYXlzOwogICAgICAvLyBNdXN0IGdvIHVwIG91dCBvZiBvdmVybGF5cyB3aGVuIHRob3NlIGRvIG5vdCBvdmVybGFwIHdpdGggcG9zCiAgICAgIGlmIChvdmVybGF5cykKICAgICAgICAgIGZvciAobGV0IHNjYW4gPSBub2RlLCBwYXJlbnQgPSBzY2FuLnBhcmVudDsgcGFyZW50OyBzY2FuID0gcGFyZW50LCBwYXJlbnQgPSBzY2FuLnBhcmVudCkgewogICAgICAgICAgICAgIGlmIChzY2FuIGluc3RhbmNlb2YgVHJlZU5vZGUgJiYgc2Nhbi5pbmRleCA8IDAgJiYgKChfYSA9IHBhcmVudC5lbnRlcihwb3MsIHNpZGUsIG1vZGUpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZnJvbSkgIT0gc2Nhbi5mcm9tKQogICAgICAgICAgICAgICAgICBub2RlID0gcGFyZW50OwogICAgICAgICAgfQogICAgICBmb3IgKDs7KSB7CiAgICAgICAgICBsZXQgaW5uZXIgPSBub2RlLmVudGVyKHBvcywgc2lkZSwgbW9kZSk7CiAgICAgICAgICBpZiAoIWlubmVyKQogICAgICAgICAgICAgIHJldHVybiBub2RlOwogICAgICAgICAgbm9kZSA9IGlubmVyOwogICAgICB9CiAgfQogIGNsYXNzIFRyZWVOb2RlIHsKICAgICAgY29uc3RydWN0b3IoX3RyZWUsIGZyb20sIAogICAgICAvLyBJbmRleCBpbiBwYXJlbnQgbm9kZSwgc2V0IHRvIC0xIGlmIHRoZSBub2RlIGlzIG5vdCBhIGRpcmVjdCBjaGlsZCBvZiBfcGFyZW50Lm5vZGUgKG92ZXJsYXkpCiAgICAgIGluZGV4LCBfcGFyZW50KSB7CiAgICAgICAgICB0aGlzLl90cmVlID0gX3RyZWU7CiAgICAgICAgICB0aGlzLmZyb20gPSBmcm9tOwogICAgICAgICAgdGhpcy5pbmRleCA9IGluZGV4OwogICAgICAgICAgdGhpcy5fcGFyZW50ID0gX3BhcmVudDsKICAgICAgfQogICAgICBnZXQgdHlwZSgpIHsgcmV0dXJuIHRoaXMuX3RyZWUudHlwZTsgfQogICAgICBnZXQgbmFtZSgpIHsgcmV0dXJuIHRoaXMuX3RyZWUudHlwZS5uYW1lOyB9CiAgICAgIGdldCB0bygpIHsgcmV0dXJuIHRoaXMuZnJvbSArIHRoaXMuX3RyZWUubGVuZ3RoOyB9CiAgICAgIG5leHRDaGlsZChpLCBkaXIsIHBvcywgc2lkZSwgbW9kZSA9IDApIHsKICAgICAgICAgIGZvciAobGV0IHBhcmVudCA9IHRoaXM7OykgewogICAgICAgICAgICAgIGZvciAobGV0IHsgY2hpbGRyZW4sIHBvc2l0aW9ucyB9ID0gcGFyZW50Ll90cmVlLCBlID0gZGlyID4gMCA/IGNoaWxkcmVuLmxlbmd0aCA6IC0xOyBpICE9IGU7IGkgKz0gZGlyKSB7CiAgICAgICAgICAgICAgICAgIGxldCBuZXh0ID0gY2hpbGRyZW5baV0sIHN0YXJ0ID0gcG9zaXRpb25zW2ldICsgcGFyZW50LmZyb207CiAgICAgICAgICAgICAgICAgIGlmICghY2hlY2tTaWRlKHNpZGUsIHBvcywgc3RhcnQsIHN0YXJ0ICsgbmV4dC5sZW5ndGgpKQogICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgIGlmIChuZXh0IGluc3RhbmNlb2YgVHJlZUJ1ZmZlcikgewogICAgICAgICAgICAgICAgICAgICAgaWYgKG1vZGUgJiBJdGVyTW9kZS5FeGNsdWRlQnVmZmVycykKICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICAgIGxldCBpbmRleCA9IG5leHQuZmluZENoaWxkKDAsIG5leHQuYnVmZmVyLmxlbmd0aCwgZGlyLCBwb3MgLSBzdGFydCwgc2lkZSk7CiAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXggPiAtMSkKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEJ1ZmZlck5vZGUobmV3IEJ1ZmZlckNvbnRleHQocGFyZW50LCBuZXh0LCBpLCBzdGFydCksIG51bGwsIGluZGV4KTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBlbHNlIGlmICgobW9kZSAmIEl0ZXJNb2RlLkluY2x1ZGVBbm9ueW1vdXMpIHx8ICghbmV4dC50eXBlLmlzQW5vbnltb3VzIHx8IGhhc0NoaWxkKG5leHQpKSkgewogICAgICAgICAgICAgICAgICAgICAgbGV0IG1vdW50ZWQ7CiAgICAgICAgICAgICAgICAgICAgICBpZiAoIShtb2RlICYgSXRlck1vZGUuSWdub3JlTW91bnRzKSAmJgogICAgICAgICAgICAgICAgICAgICAgICAgIG5leHQucHJvcHMgJiYgKG1vdW50ZWQgPSBuZXh0LnByb3AoTm9kZVByb3AubW91bnRlZCkpICYmICFtb3VudGVkLm92ZXJsYXkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBUcmVlTm9kZShtb3VudGVkLnRyZWUsIHN0YXJ0LCBpLCBwYXJlbnQpOwogICAgICAgICAgICAgICAgICAgICAgbGV0IGlubmVyID0gbmV3IFRyZWVOb2RlKG5leHQsIHN0YXJ0LCBpLCBwYXJlbnQpOwogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChtb2RlICYgSXRlck1vZGUuSW5jbHVkZUFub255bW91cykgfHwgIWlubmVyLnR5cGUuaXNBbm9ueW1vdXMgPyBpbm5lcgogICAgICAgICAgICAgICAgICAgICAgICAgIDogaW5uZXIubmV4dENoaWxkKGRpciA8IDAgPyBuZXh0LmNoaWxkcmVuLmxlbmd0aCAtIDEgOiAwLCBkaXIsIHBvcywgc2lkZSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKChtb2RlICYgSXRlck1vZGUuSW5jbHVkZUFub255bW91cykgfHwgIXBhcmVudC50eXBlLmlzQW5vbnltb3VzKQogICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgICBpZiAocGFyZW50LmluZGV4ID49IDApCiAgICAgICAgICAgICAgICAgIGkgPSBwYXJlbnQuaW5kZXggKyBkaXI7CiAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICBpID0gZGlyIDwgMCA/IC0xIDogcGFyZW50Ll9wYXJlbnQuX3RyZWUuY2hpbGRyZW4ubGVuZ3RoOwogICAgICAgICAgICAgIHBhcmVudCA9IHBhcmVudC5fcGFyZW50OwogICAgICAgICAgICAgIGlmICghcGFyZW50KQogICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgIH0KICAgICAgfQogICAgICBnZXQgZmlyc3RDaGlsZCgpIHsgcmV0dXJuIHRoaXMubmV4dENoaWxkKDAsIDEsIDAsIDQgLyogRG9udENhcmUgKi8pOyB9CiAgICAgIGdldCBsYXN0Q2hpbGQoKSB7IHJldHVybiB0aGlzLm5leHRDaGlsZCh0aGlzLl90cmVlLmNoaWxkcmVuLmxlbmd0aCAtIDEsIC0xLCAwLCA0IC8qIERvbnRDYXJlICovKTsgfQogICAgICBjaGlsZEFmdGVyKHBvcykgeyByZXR1cm4gdGhpcy5uZXh0Q2hpbGQoMCwgMSwgcG9zLCAyIC8qIEFmdGVyICovKTsgfQogICAgICBjaGlsZEJlZm9yZShwb3MpIHsgcmV0dXJuIHRoaXMubmV4dENoaWxkKHRoaXMuX3RyZWUuY2hpbGRyZW4ubGVuZ3RoIC0gMSwgLTEsIHBvcywgLTIgLyogQmVmb3JlICovKTsgfQogICAgICBlbnRlcihwb3MsIHNpZGUsIG1vZGUgPSAwKSB7CiAgICAgICAgICBsZXQgbW91bnRlZDsKICAgICAgICAgIGlmICghKG1vZGUgJiBJdGVyTW9kZS5JZ25vcmVPdmVybGF5cykgJiYgKG1vdW50ZWQgPSB0aGlzLl90cmVlLnByb3AoTm9kZVByb3AubW91bnRlZCkpICYmIG1vdW50ZWQub3ZlcmxheSkgewogICAgICAgICAgICAgIGxldCByUG9zID0gcG9zIC0gdGhpcy5mcm9tOwogICAgICAgICAgICAgIGZvciAobGV0IHsgZnJvbSwgdG8gfSBvZiBtb3VudGVkLm92ZXJsYXkpIHsKICAgICAgICAgICAgICAgICAgaWYgKChzaWRlID4gMCA/IGZyb20gPD0gclBvcyA6IGZyb20gPCByUG9zKSAmJgogICAgICAgICAgICAgICAgICAgICAgKHNpZGUgPCAwID8gdG8gPj0gclBvcyA6IHRvID4gclBvcykpCiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFRyZWVOb2RlKG1vdW50ZWQudHJlZSwgbW91bnRlZC5vdmVybGF5WzBdLmZyb20gKyB0aGlzLmZyb20sIC0xLCB0aGlzKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gdGhpcy5uZXh0Q2hpbGQoMCwgMSwgcG9zLCBzaWRlLCBtb2RlKTsKICAgICAgfQogICAgICBuZXh0U2lnbmlmaWNhbnRQYXJlbnQoKSB7CiAgICAgICAgICBsZXQgdmFsID0gdGhpczsKICAgICAgICAgIHdoaWxlICh2YWwudHlwZS5pc0Fub255bW91cyAmJiB2YWwuX3BhcmVudCkKICAgICAgICAgICAgICB2YWwgPSB2YWwuX3BhcmVudDsKICAgICAgICAgIHJldHVybiB2YWw7CiAgICAgIH0KICAgICAgZ2V0IHBhcmVudCgpIHsKICAgICAgICAgIHJldHVybiB0aGlzLl9wYXJlbnQgPyB0aGlzLl9wYXJlbnQubmV4dFNpZ25pZmljYW50UGFyZW50KCkgOiBudWxsOwogICAgICB9CiAgICAgIGdldCBuZXh0U2libGluZygpIHsKICAgICAgICAgIHJldHVybiB0aGlzLl9wYXJlbnQgJiYgdGhpcy5pbmRleCA+PSAwID8gdGhpcy5fcGFyZW50Lm5leHRDaGlsZCh0aGlzLmluZGV4ICsgMSwgMSwgMCwgNCAvKiBEb250Q2FyZSAqLykgOiBudWxsOwogICAgICB9CiAgICAgIGdldCBwcmV2U2libGluZygpIHsKICAgICAgICAgIHJldHVybiB0aGlzLl9wYXJlbnQgJiYgdGhpcy5pbmRleCA+PSAwID8gdGhpcy5fcGFyZW50Lm5leHRDaGlsZCh0aGlzLmluZGV4IC0gMSwgLTEsIDAsIDQgLyogRG9udENhcmUgKi8pIDogbnVsbDsKICAgICAgfQogICAgICBjdXJzb3IobW9kZSA9IDApIHsgcmV0dXJuIG5ldyBUcmVlQ3Vyc29yKHRoaXMsIG1vZGUpOyB9CiAgICAgIGdldCB0cmVlKCkgeyByZXR1cm4gdGhpcy5fdHJlZTsgfQogICAgICB0b1RyZWUoKSB7IHJldHVybiB0aGlzLl90cmVlOyB9CiAgICAgIHJlc29sdmUocG9zLCBzaWRlID0gMCkgewogICAgICAgICAgcmV0dXJuIHJlc29sdmVOb2RlKHRoaXMsIHBvcywgc2lkZSwgZmFsc2UpOwogICAgICB9CiAgICAgIHJlc29sdmVJbm5lcihwb3MsIHNpZGUgPSAwKSB7CiAgICAgICAgICByZXR1cm4gcmVzb2x2ZU5vZGUodGhpcywgcG9zLCBzaWRlLCB0cnVlKTsKICAgICAgfQogICAgICBlbnRlclVuZmluaXNoZWROb2Rlc0JlZm9yZShwb3MpIHsgcmV0dXJuIGVudGVyVW5maW5pc2hlZE5vZGVzQmVmb3JlKHRoaXMsIHBvcyk7IH0KICAgICAgZ2V0Q2hpbGQodHlwZSwgYmVmb3JlID0gbnVsbCwgYWZ0ZXIgPSBudWxsKSB7CiAgICAgICAgICBsZXQgciA9IGdldENoaWxkcmVuKHRoaXMsIHR5cGUsIGJlZm9yZSwgYWZ0ZXIpOwogICAgICAgICAgcmV0dXJuIHIubGVuZ3RoID8gclswXSA6IG51bGw7CiAgICAgIH0KICAgICAgZ2V0Q2hpbGRyZW4odHlwZSwgYmVmb3JlID0gbnVsbCwgYWZ0ZXIgPSBudWxsKSB7CiAgICAgICAgICByZXR1cm4gZ2V0Q2hpbGRyZW4odGhpcywgdHlwZSwgYmVmb3JlLCBhZnRlcik7CiAgICAgIH0KICAgICAgLy8vIEBpbnRlcm5hbAogICAgICB0b1N0cmluZygpIHsgcmV0dXJuIHRoaXMuX3RyZWUudG9TdHJpbmcoKTsgfQogICAgICBnZXQgbm9kZSgpIHsgcmV0dXJuIHRoaXM7IH0KICAgICAgbWF0Y2hDb250ZXh0KGNvbnRleHQpIHsgcmV0dXJuIG1hdGNoTm9kZUNvbnRleHQodGhpcywgY29udGV4dCk7IH0KICB9CiAgZnVuY3Rpb24gZ2V0Q2hpbGRyZW4obm9kZSwgdHlwZSwgYmVmb3JlLCBhZnRlcikgewogICAgICBsZXQgY3VyID0gbm9kZS5jdXJzb3IoKSwgcmVzdWx0ID0gW107CiAgICAgIGlmICghY3VyLmZpcnN0Q2hpbGQoKSkKICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgIGlmIChiZWZvcmUgIT0gbnVsbCkKICAgICAgICAgIHdoaWxlICghY3VyLnR5cGUuaXMoYmVmb3JlKSkKICAgICAgICAgICAgICBpZiAoIWN1ci5uZXh0U2libGluZygpKQogICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICBmb3IgKDs7KSB7CiAgICAgICAgICBpZiAoYWZ0ZXIgIT0gbnVsbCAmJiBjdXIudHlwZS5pcyhhZnRlcikpCiAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgICAgIGlmIChjdXIudHlwZS5pcyh0eXBlKSkKICAgICAgICAgICAgICByZXN1bHQucHVzaChjdXIubm9kZSk7CiAgICAgICAgICBpZiAoIWN1ci5uZXh0U2libGluZygpKQogICAgICAgICAgICAgIHJldHVybiBhZnRlciA9PSBudWxsID8gcmVzdWx0IDogW107CiAgICAgIH0KICB9CiAgZnVuY3Rpb24gbWF0Y2hOb2RlQ29udGV4dChub2RlLCBjb250ZXh0LCBpID0gY29udGV4dC5sZW5ndGggLSAxKSB7CiAgICAgIGZvciAobGV0IHAgPSBub2RlLnBhcmVudDsgaSA+PSAwOyBwID0gcC5wYXJlbnQpIHsKICAgICAgICAgIGlmICghcCkKICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICBpZiAoIXAudHlwZS5pc0Fub255bW91cykgewogICAgICAgICAgICAgIGlmIChjb250ZXh0W2ldICYmIGNvbnRleHRbaV0gIT0gcC5uYW1lKQogICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgaS0tOwogICAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiB0cnVlOwogIH0KICBjbGFzcyBCdWZmZXJDb250ZXh0IHsKICAgICAgY29uc3RydWN0b3IocGFyZW50LCBidWZmZXIsIGluZGV4LCBzdGFydCkgewogICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7CiAgICAgICAgICB0aGlzLmJ1ZmZlciA9IGJ1ZmZlcjsKICAgICAgICAgIHRoaXMuaW5kZXggPSBpbmRleDsKICAgICAgICAgIHRoaXMuc3RhcnQgPSBzdGFydDsKICAgICAgfQogIH0KICBjbGFzcyBCdWZmZXJOb2RlIHsKICAgICAgY29uc3RydWN0b3IoY29udGV4dCwgX3BhcmVudCwgaW5kZXgpIHsKICAgICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7CiAgICAgICAgICB0aGlzLl9wYXJlbnQgPSBfcGFyZW50OwogICAgICAgICAgdGhpcy5pbmRleCA9IGluZGV4OwogICAgICAgICAgdGhpcy50eXBlID0gY29udGV4dC5idWZmZXIuc2V0LnR5cGVzW2NvbnRleHQuYnVmZmVyLmJ1ZmZlcltpbmRleF1dOwogICAgICB9CiAgICAgIGdldCBuYW1lKCkgeyByZXR1cm4gdGhpcy50eXBlLm5hbWU7IH0KICAgICAgZ2V0IGZyb20oKSB7IHJldHVybiB0aGlzLmNvbnRleHQuc3RhcnQgKyB0aGlzLmNvbnRleHQuYnVmZmVyLmJ1ZmZlclt0aGlzLmluZGV4ICsgMV07IH0KICAgICAgZ2V0IHRvKCkgeyByZXR1cm4gdGhpcy5jb250ZXh0LnN0YXJ0ICsgdGhpcy5jb250ZXh0LmJ1ZmZlci5idWZmZXJbdGhpcy5pbmRleCArIDJdOyB9CiAgICAgIGNoaWxkKGRpciwgcG9zLCBzaWRlKSB7CiAgICAgICAgICBsZXQgeyBidWZmZXIgfSA9IHRoaXMuY29udGV4dDsKICAgICAgICAgIGxldCBpbmRleCA9IGJ1ZmZlci5maW5kQ2hpbGQodGhpcy5pbmRleCArIDQsIGJ1ZmZlci5idWZmZXJbdGhpcy5pbmRleCArIDNdLCBkaXIsIHBvcyAtIHRoaXMuY29udGV4dC5zdGFydCwgc2lkZSk7CiAgICAgICAgICByZXR1cm4gaW5kZXggPCAwID8gbnVsbCA6IG5ldyBCdWZmZXJOb2RlKHRoaXMuY29udGV4dCwgdGhpcywgaW5kZXgpOwogICAgICB9CiAgICAgIGdldCBmaXJzdENoaWxkKCkgeyByZXR1cm4gdGhpcy5jaGlsZCgxLCAwLCA0IC8qIERvbnRDYXJlICovKTsgfQogICAgICBnZXQgbGFzdENoaWxkKCkgeyByZXR1cm4gdGhpcy5jaGlsZCgtMSwgMCwgNCAvKiBEb250Q2FyZSAqLyk7IH0KICAgICAgY2hpbGRBZnRlcihwb3MpIHsgcmV0dXJuIHRoaXMuY2hpbGQoMSwgcG9zLCAyIC8qIEFmdGVyICovKTsgfQogICAgICBjaGlsZEJlZm9yZShwb3MpIHsgcmV0dXJuIHRoaXMuY2hpbGQoLTEsIHBvcywgLTIgLyogQmVmb3JlICovKTsgfQogICAgICBlbnRlcihwb3MsIHNpZGUsIG1vZGUgPSAwKSB7CiAgICAgICAgICBpZiAobW9kZSAmIEl0ZXJNb2RlLkV4Y2x1ZGVCdWZmZXJzKQogICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgbGV0IHsgYnVmZmVyIH0gPSB0aGlzLmNvbnRleHQ7CiAgICAgICAgICBsZXQgaW5kZXggPSBidWZmZXIuZmluZENoaWxkKHRoaXMuaW5kZXggKyA0LCBidWZmZXIuYnVmZmVyW3RoaXMuaW5kZXggKyAzXSwgc2lkZSA+IDAgPyAxIDogLTEsIHBvcyAtIHRoaXMuY29udGV4dC5zdGFydCwgc2lkZSk7CiAgICAgICAgICByZXR1cm4gaW5kZXggPCAwID8gbnVsbCA6IG5ldyBCdWZmZXJOb2RlKHRoaXMuY29udGV4dCwgdGhpcywgaW5kZXgpOwogICAgICB9CiAgICAgIGdldCBwYXJlbnQoKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5fcGFyZW50IHx8IHRoaXMuY29udGV4dC5wYXJlbnQubmV4dFNpZ25pZmljYW50UGFyZW50KCk7CiAgICAgIH0KICAgICAgZXh0ZXJuYWxTaWJsaW5nKGRpcikgewogICAgICAgICAgcmV0dXJuIHRoaXMuX3BhcmVudCA/IG51bGwgOiB0aGlzLmNvbnRleHQucGFyZW50Lm5leHRDaGlsZCh0aGlzLmNvbnRleHQuaW5kZXggKyBkaXIsIGRpciwgMCwgNCAvKiBEb250Q2FyZSAqLyk7CiAgICAgIH0KICAgICAgZ2V0IG5leHRTaWJsaW5nKCkgewogICAgICAgICAgbGV0IHsgYnVmZmVyIH0gPSB0aGlzLmNvbnRleHQ7CiAgICAgICAgICBsZXQgYWZ0ZXIgPSBidWZmZXIuYnVmZmVyW3RoaXMuaW5kZXggKyAzXTsKICAgICAgICAgIGlmIChhZnRlciA8ICh0aGlzLl9wYXJlbnQgPyBidWZmZXIuYnVmZmVyW3RoaXMuX3BhcmVudC5pbmRleCArIDNdIDogYnVmZmVyLmJ1ZmZlci5sZW5ndGgpKQogICAgICAgICAgICAgIHJldHVybiBuZXcgQnVmZmVyTm9kZSh0aGlzLmNvbnRleHQsIHRoaXMuX3BhcmVudCwgYWZ0ZXIpOwogICAgICAgICAgcmV0dXJuIHRoaXMuZXh0ZXJuYWxTaWJsaW5nKDEpOwogICAgICB9CiAgICAgIGdldCBwcmV2U2libGluZygpIHsKICAgICAgICAgIGxldCB7IGJ1ZmZlciB9ID0gdGhpcy5jb250ZXh0OwogICAgICAgICAgbGV0IHBhcmVudFN0YXJ0ID0gdGhpcy5fcGFyZW50ID8gdGhpcy5fcGFyZW50LmluZGV4ICsgNCA6IDA7CiAgICAgICAgICBpZiAodGhpcy5pbmRleCA9PSBwYXJlbnRTdGFydCkKICAgICAgICAgICAgICByZXR1cm4gdGhpcy5leHRlcm5hbFNpYmxpbmcoLTEpOwogICAgICAgICAgcmV0dXJuIG5ldyBCdWZmZXJOb2RlKHRoaXMuY29udGV4dCwgdGhpcy5fcGFyZW50LCBidWZmZXIuZmluZENoaWxkKHBhcmVudFN0YXJ0LCB0aGlzLmluZGV4LCAtMSwgMCwgNCAvKiBEb250Q2FyZSAqLykpOwogICAgICB9CiAgICAgIGN1cnNvcihtb2RlID0gMCkgeyByZXR1cm4gbmV3IFRyZWVDdXJzb3IodGhpcywgbW9kZSk7IH0KICAgICAgZ2V0IHRyZWUoKSB7IHJldHVybiBudWxsOyB9CiAgICAgIHRvVHJlZSgpIHsKICAgICAgICAgIGxldCBjaGlsZHJlbiA9IFtdLCBwb3NpdGlvbnMgPSBbXTsKICAgICAgICAgIGxldCB7IGJ1ZmZlciB9ID0gdGhpcy5jb250ZXh0OwogICAgICAgICAgbGV0IHN0YXJ0SSA9IHRoaXMuaW5kZXggKyA0LCBlbmRJID0gYnVmZmVyLmJ1ZmZlclt0aGlzLmluZGV4ICsgM107CiAgICAgICAgICBpZiAoZW5kSSA+IHN0YXJ0SSkgewogICAgICAgICAgICAgIGxldCBmcm9tID0gYnVmZmVyLmJ1ZmZlclt0aGlzLmluZGV4ICsgMV0sIHRvID0gYnVmZmVyLmJ1ZmZlclt0aGlzLmluZGV4ICsgMl07CiAgICAgICAgICAgICAgY2hpbGRyZW4ucHVzaChidWZmZXIuc2xpY2Uoc3RhcnRJLCBlbmRJLCBmcm9tLCB0bykpOwogICAgICAgICAgICAgIHBvc2l0aW9ucy5wdXNoKDApOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIG5ldyBUcmVlKHRoaXMudHlwZSwgY2hpbGRyZW4sIHBvc2l0aW9ucywgdGhpcy50byAtIHRoaXMuZnJvbSk7CiAgICAgIH0KICAgICAgcmVzb2x2ZShwb3MsIHNpZGUgPSAwKSB7CiAgICAgICAgICByZXR1cm4gcmVzb2x2ZU5vZGUodGhpcywgcG9zLCBzaWRlLCBmYWxzZSk7CiAgICAgIH0KICAgICAgcmVzb2x2ZUlubmVyKHBvcywgc2lkZSA9IDApIHsKICAgICAgICAgIHJldHVybiByZXNvbHZlTm9kZSh0aGlzLCBwb3MsIHNpZGUsIHRydWUpOwogICAgICB9CiAgICAgIGVudGVyVW5maW5pc2hlZE5vZGVzQmVmb3JlKHBvcykgeyByZXR1cm4gZW50ZXJVbmZpbmlzaGVkTm9kZXNCZWZvcmUodGhpcywgcG9zKTsgfQogICAgICAvLy8gQGludGVybmFsCiAgICAgIHRvU3RyaW5nKCkgeyByZXR1cm4gdGhpcy5jb250ZXh0LmJ1ZmZlci5jaGlsZFN0cmluZyh0aGlzLmluZGV4KTsgfQogICAgICBnZXRDaGlsZCh0eXBlLCBiZWZvcmUgPSBudWxsLCBhZnRlciA9IG51bGwpIHsKICAgICAgICAgIGxldCByID0gZ2V0Q2hpbGRyZW4odGhpcywgdHlwZSwgYmVmb3JlLCBhZnRlcik7CiAgICAgICAgICByZXR1cm4gci5sZW5ndGggPyByWzBdIDogbnVsbDsKICAgICAgfQogICAgICBnZXRDaGlsZHJlbih0eXBlLCBiZWZvcmUgPSBudWxsLCBhZnRlciA9IG51bGwpIHsKICAgICAgICAgIHJldHVybiBnZXRDaGlsZHJlbih0aGlzLCB0eXBlLCBiZWZvcmUsIGFmdGVyKTsKICAgICAgfQogICAgICBnZXQgbm9kZSgpIHsgcmV0dXJuIHRoaXM7IH0KICAgICAgbWF0Y2hDb250ZXh0KGNvbnRleHQpIHsgcmV0dXJuIG1hdGNoTm9kZUNvbnRleHQodGhpcywgY29udGV4dCk7IH0KICB9CiAgLy8vIEEgdHJlZSBjdXJzb3Igb2JqZWN0IGZvY3VzZXMgb24gYSBnaXZlbiBub2RlIGluIGEgc3ludGF4IHRyZWUsIGFuZAogIC8vLyBhbGxvd3MgeW91IHRvIG1vdmUgdG8gYWRqYWNlbnQgbm9kZXMuCiAgY2xhc3MgVHJlZUN1cnNvciB7CiAgICAgIC8vLyBAaW50ZXJuYWwKICAgICAgY29uc3RydWN0b3Iobm9kZSwgCiAgICAgIC8vLyBAaW50ZXJuYWwKICAgICAgbW9kZSA9IDApIHsKICAgICAgICAgIHRoaXMubW9kZSA9IG1vZGU7CiAgICAgICAgICAvLy8gQGludGVybmFsCiAgICAgICAgICB0aGlzLmJ1ZmZlciA9IG51bGw7CiAgICAgICAgICB0aGlzLnN0YWNrID0gW107CiAgICAgICAgICAvLy8gQGludGVybmFsCiAgICAgICAgICB0aGlzLmluZGV4ID0gMDsKICAgICAgICAgIHRoaXMuYnVmZmVyTm9kZSA9IG51bGw7CiAgICAgICAgICBpZiAobm9kZSBpbnN0YW5jZW9mIFRyZWVOb2RlKSB7CiAgICAgICAgICAgICAgdGhpcy55aWVsZE5vZGUobm9kZSk7CiAgICAgICAgICB9CiAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICB0aGlzLl90cmVlID0gbm9kZS5jb250ZXh0LnBhcmVudDsKICAgICAgICAgICAgICB0aGlzLmJ1ZmZlciA9IG5vZGUuY29udGV4dDsKICAgICAgICAgICAgICBmb3IgKGxldCBuID0gbm9kZS5fcGFyZW50OyBuOyBuID0gbi5fcGFyZW50KQogICAgICAgICAgICAgICAgICB0aGlzLnN0YWNrLnVuc2hpZnQobi5pbmRleCk7CiAgICAgICAgICAgICAgdGhpcy5idWZmZXJOb2RlID0gbm9kZTsKICAgICAgICAgICAgICB0aGlzLnlpZWxkQnVmKG5vZGUuaW5kZXgpOwogICAgICAgICAgfQogICAgICB9CiAgICAgIC8vLyBTaG9ydGhhbmQgZm9yIGAudHlwZS5uYW1lYC4KICAgICAgZ2V0IG5hbWUoKSB7IHJldHVybiB0aGlzLnR5cGUubmFtZTsgfQogICAgICB5aWVsZE5vZGUobm9kZSkgewogICAgICAgICAgaWYgKCFub2RlKQogICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIHRoaXMuX3RyZWUgPSBub2RlOwogICAgICAgICAgdGhpcy50eXBlID0gbm9kZS50eXBlOwogICAgICAgICAgdGhpcy5mcm9tID0gbm9kZS5mcm9tOwogICAgICAgICAgdGhpcy50byA9IG5vZGUudG87CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgICB5aWVsZEJ1ZihpbmRleCwgdHlwZSkgewogICAgICAgICAgdGhpcy5pbmRleCA9IGluZGV4OwogICAgICAgICAgbGV0IHsgc3RhcnQsIGJ1ZmZlciB9ID0gdGhpcy5idWZmZXI7CiAgICAgICAgICB0aGlzLnR5cGUgPSB0eXBlIHx8IGJ1ZmZlci5zZXQudHlwZXNbYnVmZmVyLmJ1ZmZlcltpbmRleF1dOwogICAgICAgICAgdGhpcy5mcm9tID0gc3RhcnQgKyBidWZmZXIuYnVmZmVyW2luZGV4ICsgMV07CiAgICAgICAgICB0aGlzLnRvID0gc3RhcnQgKyBidWZmZXIuYnVmZmVyW2luZGV4ICsgMl07CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgICB5aWVsZChub2RlKSB7CiAgICAgICAgICBpZiAoIW5vZGUpCiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgaWYgKG5vZGUgaW5zdGFuY2VvZiBUcmVlTm9kZSkgewogICAgICAgICAgICAgIHRoaXMuYnVmZmVyID0gbnVsbDsKICAgICAgICAgICAgICByZXR1cm4gdGhpcy55aWVsZE5vZGUobm9kZSk7CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLmJ1ZmZlciA9IG5vZGUuY29udGV4dDsKICAgICAgICAgIHJldHVybiB0aGlzLnlpZWxkQnVmKG5vZGUuaW5kZXgsIG5vZGUudHlwZSk7CiAgICAgIH0KICAgICAgLy8vIEBpbnRlcm5hbAogICAgICB0b1N0cmluZygpIHsKICAgICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlciA/IHRoaXMuYnVmZmVyLmJ1ZmZlci5jaGlsZFN0cmluZyh0aGlzLmluZGV4KSA6IHRoaXMuX3RyZWUudG9TdHJpbmcoKTsKICAgICAgfQogICAgICAvLy8gQGludGVybmFsCiAgICAgIGVudGVyQ2hpbGQoZGlyLCBwb3MsIHNpZGUpIHsKICAgICAgICAgIGlmICghdGhpcy5idWZmZXIpCiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMueWllbGQodGhpcy5fdHJlZS5uZXh0Q2hpbGQoZGlyIDwgMCA/IHRoaXMuX3RyZWUuX3RyZWUuY2hpbGRyZW4ubGVuZ3RoIC0gMSA6IDAsIGRpciwgcG9zLCBzaWRlLCB0aGlzLm1vZGUpKTsKICAgICAgICAgIGxldCB7IGJ1ZmZlciB9ID0gdGhpcy5idWZmZXI7CiAgICAgICAgICBsZXQgaW5kZXggPSBidWZmZXIuZmluZENoaWxkKHRoaXMuaW5kZXggKyA0LCBidWZmZXIuYnVmZmVyW3RoaXMuaW5kZXggKyAzXSwgZGlyLCBwb3MgLSB0aGlzLmJ1ZmZlci5zdGFydCwgc2lkZSk7CiAgICAgICAgICBpZiAoaW5kZXggPCAwKQogICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIHRoaXMuc3RhY2sucHVzaCh0aGlzLmluZGV4KTsKICAgICAgICAgIHJldHVybiB0aGlzLnlpZWxkQnVmKGluZGV4KTsKICAgICAgfQogICAgICAvLy8gTW92ZSB0aGUgY3Vyc29yIHRvIHRoaXMgbm9kZSdzIGZpcnN0IGNoaWxkLiBXaGVuIHRoaXMgcmV0dXJucwogICAgICAvLy8gZmFsc2UsIHRoZSBub2RlIGhhcyBubyBjaGlsZCwgYW5kIHRoZSBjdXJzb3IgaGFzIG5vdCBiZWVuIG1vdmVkLgogICAgICBmaXJzdENoaWxkKCkgeyByZXR1cm4gdGhpcy5lbnRlckNoaWxkKDEsIDAsIDQgLyogRG9udENhcmUgKi8pOyB9CiAgICAgIC8vLyBNb3ZlIHRoZSBjdXJzb3IgdG8gdGhpcyBub2RlJ3MgbGFzdCBjaGlsZC4KICAgICAgbGFzdENoaWxkKCkgeyByZXR1cm4gdGhpcy5lbnRlckNoaWxkKC0xLCAwLCA0IC8qIERvbnRDYXJlICovKTsgfQogICAgICAvLy8gTW92ZSB0aGUgY3Vyc29yIHRvIHRoZSBmaXJzdCBjaGlsZCB0aGF0IGVuZHMgYWZ0ZXIgYHBvc2AuCiAgICAgIGNoaWxkQWZ0ZXIocG9zKSB7IHJldHVybiB0aGlzLmVudGVyQ2hpbGQoMSwgcG9zLCAyIC8qIEFmdGVyICovKTsgfQogICAgICAvLy8gTW92ZSB0byB0aGUgbGFzdCBjaGlsZCB0aGF0IHN0YXJ0cyBiZWZvcmUgYHBvc2AuCiAgICAgIGNoaWxkQmVmb3JlKHBvcykgeyByZXR1cm4gdGhpcy5lbnRlckNoaWxkKC0xLCBwb3MsIC0yIC8qIEJlZm9yZSAqLyk7IH0KICAgICAgLy8vIE1vdmUgdGhlIGN1cnNvciB0byB0aGUgY2hpbGQgYXJvdW5kIGBwb3NgLiBJZiBzaWRlIGlzIC0xIHRoZQogICAgICAvLy8gY2hpbGQgbWF5IGVuZCBhdCB0aGF0IHBvc2l0aW9uLCB3aGVuIDEgaXQgbWF5IHN0YXJ0IHRoZXJlLiBUaGlzCiAgICAgIC8vLyB3aWxsIGFsc28gZW50ZXIgW292ZXJsYWlkXSgjY29tbW9uLk1vdW50ZWRUcmVlLm92ZXJsYXkpCiAgICAgIC8vLyBbbW91bnRlZF0oI2NvbW1vbi5Ob2RlUHJvcF5tb3VudGVkKSB0cmVlcyB1bmxlc3MgYG92ZXJsYXlzYCBpcwogICAgICAvLy8gc2V0IHRvIGZhbHNlLgogICAgICBlbnRlcihwb3MsIHNpZGUsIG1vZGUgPSB0aGlzLm1vZGUpIHsKICAgICAgICAgIGlmICghdGhpcy5idWZmZXIpCiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMueWllbGQodGhpcy5fdHJlZS5lbnRlcihwb3MsIHNpZGUsIG1vZGUpKTsKICAgICAgICAgIHJldHVybiBtb2RlICYgSXRlck1vZGUuRXhjbHVkZUJ1ZmZlcnMgPyBmYWxzZSA6IHRoaXMuZW50ZXJDaGlsZCgxLCBwb3MsIHNpZGUpOwogICAgICB9CiAgICAgIC8vLyBNb3ZlIHRvIHRoZSBub2RlJ3MgcGFyZW50IG5vZGUsIGlmIHRoaXMgaXNuJ3QgdGhlIHRvcCBub2RlLgogICAgICBwYXJlbnQoKSB7CiAgICAgICAgICBpZiAoIXRoaXMuYnVmZmVyKQogICAgICAgICAgICAgIHJldHVybiB0aGlzLnlpZWxkTm9kZSgodGhpcy5tb2RlICYgSXRlck1vZGUuSW5jbHVkZUFub255bW91cykgPyB0aGlzLl90cmVlLl9wYXJlbnQgOiB0aGlzLl90cmVlLnBhcmVudCk7CiAgICAgICAgICBpZiAodGhpcy5zdGFjay5sZW5ndGgpCiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMueWllbGRCdWYodGhpcy5zdGFjay5wb3AoKSk7CiAgICAgICAgICBsZXQgcGFyZW50ID0gKHRoaXMubW9kZSAmIEl0ZXJNb2RlLkluY2x1ZGVBbm9ueW1vdXMpID8gdGhpcy5idWZmZXIucGFyZW50IDogdGhpcy5idWZmZXIucGFyZW50Lm5leHRTaWduaWZpY2FudFBhcmVudCgpOwogICAgICAgICAgdGhpcy5idWZmZXIgPSBudWxsOwogICAgICAgICAgcmV0dXJuIHRoaXMueWllbGROb2RlKHBhcmVudCk7CiAgICAgIH0KICAgICAgLy8vIEBpbnRlcm5hbAogICAgICBzaWJsaW5nKGRpcikgewogICAgICAgICAgaWYgKCF0aGlzLmJ1ZmZlcikKICAgICAgICAgICAgICByZXR1cm4gIXRoaXMuX3RyZWUuX3BhcmVudCA/IGZhbHNlCiAgICAgICAgICAgICAgICAgIDogdGhpcy55aWVsZCh0aGlzLl90cmVlLmluZGV4IDwgMCA/IG51bGwKICAgICAgICAgICAgICAgICAgICAgIDogdGhpcy5fdHJlZS5fcGFyZW50Lm5leHRDaGlsZCh0aGlzLl90cmVlLmluZGV4ICsgZGlyLCBkaXIsIDAsIDQgLyogRG9udENhcmUgKi8sIHRoaXMubW9kZSkpOwogICAgICAgICAgbGV0IHsgYnVmZmVyIH0gPSB0aGlzLmJ1ZmZlciwgZCA9IHRoaXMuc3RhY2subGVuZ3RoIC0gMTsKICAgICAgICAgIGlmIChkaXIgPCAwKSB7CiAgICAgICAgICAgICAgbGV0IHBhcmVudFN0YXJ0ID0gZCA8IDAgPyAwIDogdGhpcy5zdGFja1tkXSArIDQ7CiAgICAgICAgICAgICAgaWYgKHRoaXMuaW5kZXggIT0gcGFyZW50U3RhcnQpCiAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnlpZWxkQnVmKGJ1ZmZlci5maW5kQ2hpbGQocGFyZW50U3RhcnQsIHRoaXMuaW5kZXgsIC0xLCAwLCA0IC8qIERvbnRDYXJlICovKSk7CiAgICAgICAgICB9CiAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICBsZXQgYWZ0ZXIgPSBidWZmZXIuYnVmZmVyW3RoaXMuaW5kZXggKyAzXTsKICAgICAgICAgICAgICBpZiAoYWZ0ZXIgPCAoZCA8IDAgPyBidWZmZXIuYnVmZmVyLmxlbmd0aCA6IGJ1ZmZlci5idWZmZXJbdGhpcy5zdGFja1tkXSArIDNdKSkKICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMueWllbGRCdWYoYWZ0ZXIpOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGQgPCAwID8gdGhpcy55aWVsZCh0aGlzLmJ1ZmZlci5wYXJlbnQubmV4dENoaWxkKHRoaXMuYnVmZmVyLmluZGV4ICsgZGlyLCBkaXIsIDAsIDQgLyogRG9udENhcmUgKi8sIHRoaXMubW9kZSkpIDogZmFsc2U7CiAgICAgIH0KICAgICAgLy8vIE1vdmUgdG8gdGhpcyBub2RlJ3MgbmV4dCBzaWJsaW5nLCBpZiBhbnkuCiAgICAgIG5leHRTaWJsaW5nKCkgeyByZXR1cm4gdGhpcy5zaWJsaW5nKDEpOyB9CiAgICAgIC8vLyBNb3ZlIHRvIHRoaXMgbm9kZSdzIHByZXZpb3VzIHNpYmxpbmcsIGlmIGFueS4KICAgICAgcHJldlNpYmxpbmcoKSB7IHJldHVybiB0aGlzLnNpYmxpbmcoLTEpOyB9CiAgICAgIGF0TGFzdE5vZGUoZGlyKSB7CiAgICAgICAgICBsZXQgaW5kZXgsIHBhcmVudCwgeyBidWZmZXIgfSA9IHRoaXM7CiAgICAgICAgICBpZiAoYnVmZmVyKSB7CiAgICAgICAgICAgICAgaWYgKGRpciA+IDApIHsKICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaW5kZXggPCBidWZmZXIuYnVmZmVyLmJ1ZmZlci5sZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuaW5kZXg7IGkrKykKICAgICAgICAgICAgICAgICAgICAgIGlmIChidWZmZXIuYnVmZmVyLmJ1ZmZlcltpICsgM10gPCB0aGlzLmluZGV4KQogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgKHsgaW5kZXgsIHBhcmVudCB9ID0gYnVmZmVyKTsKICAgICAgICAgIH0KICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICh7IGluZGV4LCBfcGFyZW50OiBwYXJlbnQgfSA9IHRoaXMuX3RyZWUpOwogICAgICAgICAgfQogICAgICAgICAgZm9yICg7IHBhcmVudDsgeyBpbmRleCwgX3BhcmVudDogcGFyZW50IH0gPSBwYXJlbnQpIHsKICAgICAgICAgICAgICBpZiAoaW5kZXggPiAtMSkKICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IGluZGV4ICsgZGlyLCBlID0gZGlyIDwgMCA/IC0xIDogcGFyZW50Ll90cmVlLmNoaWxkcmVuLmxlbmd0aDsgaSAhPSBlOyBpICs9IGRpcikgewogICAgICAgICAgICAgICAgICAgICAgbGV0IGNoaWxkID0gcGFyZW50Ll90cmVlLmNoaWxkcmVuW2ldOwogICAgICAgICAgICAgICAgICAgICAgaWYgKCh0aGlzLm1vZGUgJiBJdGVyTW9kZS5JbmNsdWRlQW5vbnltb3VzKSB8fAogICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkIGluc3RhbmNlb2YgVHJlZUJ1ZmZlciB8fAogICAgICAgICAgICAgICAgICAgICAgICAgICFjaGlsZC50eXBlLmlzQW5vbnltb3VzIHx8CiAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzQ2hpbGQoY2hpbGQpKQogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgICAgbW92ZShkaXIsIGVudGVyKSB7CiAgICAgICAgICBpZiAoZW50ZXIgJiYgdGhpcy5lbnRlckNoaWxkKGRpciwgMCwgNCAvKiBEb250Q2FyZSAqLykpCiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICBmb3IgKDs7KSB7CiAgICAgICAgICAgICAgaWYgKHRoaXMuc2libGluZyhkaXIpKQogICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICBpZiAodGhpcy5hdExhc3ROb2RlKGRpcikgfHwgIXRoaXMucGFyZW50KCkpCiAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KICAgICAgfQogICAgICAvLy8gTW92ZSB0byB0aGUgbmV4dCBub2RlIGluIGEKICAgICAgLy8vIFtwcmUtb3JkZXJdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1RyZWVfdHJhdmVyc2FsI1ByZS1vcmRlcl8oTkxSKSkKICAgICAgLy8vIHRyYXZlcnNhbCwgZ29pbmcgZnJvbSBhIG5vZGUgdG8gaXRzIGZpcnN0IGNoaWxkIG9yLCBpZiB0aGUKICAgICAgLy8vIGN1cnJlbnQgbm9kZSBpcyBlbXB0eSBvciBgZW50ZXJgIGlzIGZhbHNlLCBpdHMgbmV4dCBzaWJsaW5nIG9yCiAgICAgIC8vLyB0aGUgbmV4dCBzaWJsaW5nIG9mIHRoZSBmaXJzdCBwYXJlbnQgbm9kZSB0aGF0IGhhcyBvbmUuCiAgICAgIG5leHQoZW50ZXIgPSB0cnVlKSB7IHJldHVybiB0aGlzLm1vdmUoMSwgZW50ZXIpOyB9CiAgICAgIC8vLyBNb3ZlIHRvIHRoZSBuZXh0IG5vZGUgaW4gYSBsYXN0LXRvLWZpcnN0IHByZS1vcmRlciB0cmF2ZXJhbC4gQQogICAgICAvLy8gbm9kZSBpcyBmb2xsb3dlZCBieSBpdHMgbGFzdCBjaGlsZCBvciwgaWYgaXQgaGFzIG5vbmUsIGl0cwogICAgICAvLy8gcHJldmlvdXMgc2libGluZyBvciB0aGUgcHJldmlvdXMgc2libGluZyBvZiB0aGUgZmlyc3QgcGFyZW50CiAgICAgIC8vLyBub2RlIHRoYXQgaGFzIG9uZS4KICAgICAgcHJldihlbnRlciA9IHRydWUpIHsgcmV0dXJuIHRoaXMubW92ZSgtMSwgZW50ZXIpOyB9CiAgICAgIC8vLyBNb3ZlIHRoZSBjdXJzb3IgdG8gdGhlIGlubmVybW9zdCBub2RlIHRoYXQgY292ZXJzIGBwb3NgLiBJZgogICAgICAvLy8gYHNpZGVgIGlzIC0xLCBpdCB3aWxsIGVudGVyIG5vZGVzIHRoYXQgZW5kIGF0IGBwb3NgLiBJZiBpdCBpcyAxLAogICAgICAvLy8gaXQgd2lsbCBlbnRlciBub2RlcyB0aGF0IHN0YXJ0IGF0IGBwb3NgLgogICAgICBtb3ZlVG8ocG9zLCBzaWRlID0gMCkgewogICAgICAgICAgLy8gTW92ZSB1cCB0byBhIG5vZGUgdGhhdCBhY3R1YWxseSBob2xkcyB0aGUgcG9zaXRpb24sIGlmIHBvc3NpYmxlCiAgICAgICAgICB3aGlsZSAodGhpcy5mcm9tID09IHRoaXMudG8gfHwKICAgICAgICAgICAgICAoc2lkZSA8IDEgPyB0aGlzLmZyb20gPj0gcG9zIDogdGhpcy5mcm9tID4gcG9zKSB8fAogICAgICAgICAgICAgIChzaWRlID4gLTEgPyB0aGlzLnRvIDw9IHBvcyA6IHRoaXMudG8gPCBwb3MpKQogICAgICAgICAgICAgIGlmICghdGhpcy5wYXJlbnQoKSkKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAvLyBUaGVuIHNjYW4gZG93biBpbnRvIGNoaWxkIG5vZGVzIGFzIGZhciBhcyBwb3NzaWJsZQogICAgICAgICAgd2hpbGUgKHRoaXMuZW50ZXJDaGlsZCgxLCBwb3MsIHNpZGUpKSB7IH0KICAgICAgICAgIHJldHVybiB0aGlzOwogICAgICB9CiAgICAgIC8vLyBHZXQgYSBbc3ludGF4IG5vZGVdKCNjb21tb24uU3ludGF4Tm9kZSkgYXQgdGhlIGN1cnNvcidzIGN1cnJlbnQKICAgICAgLy8vIHBvc2l0aW9uLgogICAgICBnZXQgbm9kZSgpIHsKICAgICAgICAgIGlmICghdGhpcy5idWZmZXIpCiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3RyZWU7CiAgICAgICAgICBsZXQgY2FjaGUgPSB0aGlzLmJ1ZmZlck5vZGUsIHJlc3VsdCA9IG51bGwsIGRlcHRoID0gMDsKICAgICAgICAgIGlmIChjYWNoZSAmJiBjYWNoZS5jb250ZXh0ID09IHRoaXMuYnVmZmVyKSB7CiAgICAgICAgICAgICAgc2NhbjogZm9yIChsZXQgaW5kZXggPSB0aGlzLmluZGV4LCBkID0gdGhpcy5zdGFjay5sZW5ndGg7IGQgPj0gMDspIHsKICAgICAgICAgICAgICAgICAgZm9yIChsZXQgYyA9IGNhY2hlOyBjOyBjID0gYy5fcGFyZW50KQogICAgICAgICAgICAgICAgICAgICAgaWYgKGMuaW5kZXggPT0gaW5kZXgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXggPT0gdGhpcy5pbmRleCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gYzsKICAgICAgICAgICAgICAgICAgICAgICAgICBkZXB0aCA9IGQgKyAxOwogICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrIHNjYW47CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGluZGV4ID0gdGhpcy5zdGFja1stLWRdOwogICAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGZvciAobGV0IGkgPSBkZXB0aDsgaSA8IHRoaXMuc3RhY2subGVuZ3RoOyBpKyspCiAgICAgICAgICAgICAgcmVzdWx0ID0gbmV3IEJ1ZmZlck5vZGUodGhpcy5idWZmZXIsIHJlc3VsdCwgdGhpcy5zdGFja1tpXSk7CiAgICAgICAgICByZXR1cm4gdGhpcy5idWZmZXJOb2RlID0gbmV3IEJ1ZmZlck5vZGUodGhpcy5idWZmZXIsIHJlc3VsdCwgdGhpcy5pbmRleCk7CiAgICAgIH0KICAgICAgLy8vIEdldCB0aGUgW3RyZWVdKCNjb21tb24uVHJlZSkgdGhhdCByZXByZXNlbnRzIHRoZSBjdXJyZW50IG5vZGUsIGlmCiAgICAgIC8vLyBhbnkuIFdpbGwgcmV0dXJuIG51bGwgd2hlbiB0aGUgbm9kZSBpcyBpbiBhIFt0cmVlCiAgICAgIC8vLyBidWZmZXJdKCNjb21tb24uVHJlZUJ1ZmZlcikuCiAgICAgIGdldCB0cmVlKCkgewogICAgICAgICAgcmV0dXJuIHRoaXMuYnVmZmVyID8gbnVsbCA6IHRoaXMuX3RyZWUuX3RyZWU7CiAgICAgIH0KICAgICAgLy8vIEl0ZXJhdGUgb3ZlciB0aGUgY3VycmVudCBub2RlIGFuZCBhbGwgaXRzIGRlc2NlbmRhbnRzLCBjYWxsaW5nCiAgICAgIC8vLyBgZW50ZXJgIHdoZW4gZW50ZXJpbmcgYSBub2RlIGFuZCBgbGVhdmVgLCBpZiBnaXZlbiwgd2hlbiBsZWF2aW5nCiAgICAgIC8vLyBvbmUuIFdoZW4gYGVudGVyYCByZXR1cm5zIGBmYWxzZWAsIGFueSBjaGlsZHJlbiBvZiB0aGF0IG5vZGUgYXJlCiAgICAgIC8vLyBza2lwcGVkLCBhbmQgYGxlYXZlYCBpc24ndCBjYWxsZWQgZm9yIGl0LgogICAgICBpdGVyYXRlKGVudGVyLCBsZWF2ZSkgewogICAgICAgICAgZm9yIChsZXQgZGVwdGggPSAwOzspIHsKICAgICAgICAgICAgICBsZXQgbXVzdExlYXZlID0gZmFsc2U7CiAgICAgICAgICAgICAgaWYgKHRoaXMudHlwZS5pc0Fub255bW91cyB8fCBlbnRlcih0aGlzKSAhPT0gZmFsc2UpIHsKICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZmlyc3RDaGlsZCgpKSB7CiAgICAgICAgICAgICAgICAgICAgICBkZXB0aCsrOwogICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnR5cGUuaXNBbm9ueW1vdXMpCiAgICAgICAgICAgICAgICAgICAgICBtdXN0TGVhdmUgPSB0cnVlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBmb3IgKDs7KSB7CiAgICAgICAgICAgICAgICAgIGlmIChtdXN0TGVhdmUgJiYgbGVhdmUpCiAgICAgICAgICAgICAgICAgICAgICBsZWF2ZSh0aGlzKTsKICAgICAgICAgICAgICAgICAgbXVzdExlYXZlID0gdGhpcy50eXBlLmlzQW5vbnltb3VzOwogICAgICAgICAgICAgICAgICBpZiAodGhpcy5uZXh0U2libGluZygpKQogICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIGlmICghZGVwdGgpCiAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50KCk7CiAgICAgICAgICAgICAgICAgIGRlcHRoLS07CiAgICAgICAgICAgICAgICAgIG11c3RMZWF2ZSA9IHRydWU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICB9CiAgICAgIC8vLyBUZXN0IHdoZXRoZXIgdGhlIGN1cnJlbnQgbm9kZSBtYXRjaGVzIGEgZ2l2ZW4gY29udGV4dOKAlGEgc2VxdWVuY2UKICAgICAgLy8vIG9mIGRpcmVjdCBwYXJlbnQgbm9kZSBuYW1lcy4gRW1wdHkgc3RyaW5ncyBpbiB0aGUgY29udGV4dCBhcnJheQogICAgICAvLy8gYXJlIHRyZWF0ZWQgYXMgd2lsZGNhcmRzLgogICAgICBtYXRjaENvbnRleHQoY29udGV4dCkgewogICAgICAgICAgaWYgKCF0aGlzLmJ1ZmZlcikKICAgICAgICAgICAgICByZXR1cm4gbWF0Y2hOb2RlQ29udGV4dCh0aGlzLm5vZGUsIGNvbnRleHQpOwogICAgICAgICAgbGV0IHsgYnVmZmVyIH0gPSB0aGlzLmJ1ZmZlciwgeyB0eXBlcyB9ID0gYnVmZmVyLnNldDsKICAgICAgICAgIGZvciAobGV0IGkgPSBjb250ZXh0Lmxlbmd0aCAtIDEsIGQgPSB0aGlzLnN0YWNrLmxlbmd0aCAtIDE7IGkgPj0gMDsgZC0tKSB7CiAgICAgICAgICAgICAgaWYgKGQgPCAwKQogICAgICAgICAgICAgICAgICByZXR1cm4gbWF0Y2hOb2RlQ29udGV4dCh0aGlzLm5vZGUsIGNvbnRleHQsIGkpOwogICAgICAgICAgICAgIGxldCB0eXBlID0gdHlwZXNbYnVmZmVyLmJ1ZmZlclt0aGlzLnN0YWNrW2RdXV07CiAgICAgICAgICAgICAgaWYgKCF0eXBlLmlzQW5vbnltb3VzKSB7CiAgICAgICAgICAgICAgICAgIGlmIChjb250ZXh0W2ldICYmIGNvbnRleHRbaV0gIT0gdHlwZS5uYW1lKQogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgICBpLS07CiAgICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICB9CiAgZnVuY3Rpb24gaGFzQ2hpbGQodHJlZSkgewogICAgICByZXR1cm4gdHJlZS5jaGlsZHJlbi5zb21lKGNoID0+IGNoIGluc3RhbmNlb2YgVHJlZUJ1ZmZlciB8fCAhY2gudHlwZS5pc0Fub255bW91cyB8fCBoYXNDaGlsZChjaCkpOwogIH0KICBmdW5jdGlvbiBidWlsZFRyZWUoZGF0YSkgewogICAgICB2YXIgX2E7CiAgICAgIGxldCB7IGJ1ZmZlciwgbm9kZVNldCwgbWF4QnVmZmVyTGVuZ3RoID0gRGVmYXVsdEJ1ZmZlckxlbmd0aCwgcmV1c2VkID0gW10sIG1pblJlcGVhdFR5cGUgPSBub2RlU2V0LnR5cGVzLmxlbmd0aCB9ID0gZGF0YTsKICAgICAgbGV0IGN1cnNvciA9IEFycmF5LmlzQXJyYXkoYnVmZmVyKSA/IG5ldyBGbGF0QnVmZmVyQ3Vyc29yKGJ1ZmZlciwgYnVmZmVyLmxlbmd0aCkgOiBidWZmZXI7CiAgICAgIGxldCB0eXBlcyA9IG5vZGVTZXQudHlwZXM7CiAgICAgIGxldCBjb250ZXh0SGFzaCA9IDAsIGxvb2tBaGVhZCA9IDA7CiAgICAgIGZ1bmN0aW9uIHRha2VOb2RlKHBhcmVudFN0YXJ0LCBtaW5Qb3MsIGNoaWxkcmVuLCBwb3NpdGlvbnMsIGluUmVwZWF0KSB7CiAgICAgICAgICBsZXQgeyBpZCwgc3RhcnQsIGVuZCwgc2l6ZSB9ID0gY3Vyc29yOwogICAgICAgICAgbGV0IGxvb2tBaGVhZEF0U3RhcnQgPSBsb29rQWhlYWQ7CiAgICAgICAgICB3aGlsZSAoc2l6ZSA8IDApIHsKICAgICAgICAgICAgICBjdXJzb3IubmV4dCgpOwogICAgICAgICAgICAgIGlmIChzaXplID09IC0xIC8qIFJldXNlICovKSB7CiAgICAgICAgICAgICAgICAgIGxldCBub2RlID0gcmV1c2VkW2lkXTsKICAgICAgICAgICAgICAgICAgY2hpbGRyZW4ucHVzaChub2RlKTsKICAgICAgICAgICAgICAgICAgcG9zaXRpb25zLnB1c2goc3RhcnQgLSBwYXJlbnRTdGFydCk7CiAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgZWxzZSBpZiAoc2l6ZSA9PSAtMyAvKiBDb250ZXh0Q2hhbmdlICovKSB7IC8vIENvbnRleHQgY2hhbmdlCiAgICAgICAgICAgICAgICAgIGNvbnRleHRIYXNoID0gaWQ7CiAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgZWxzZSBpZiAoc2l6ZSA9PSAtNCAvKiBMb29rQWhlYWQgKi8pIHsKICAgICAgICAgICAgICAgICAgbG9va0FoZWFkID0gaWQ7CiAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKGBVbnJlY29nbml6ZWQgcmVjb3JkIHNpemU6ICR7c2l6ZX1gKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBsZXQgdHlwZSA9IHR5cGVzW2lkXSwgbm9kZSwgYnVmZmVyOwogICAgICAgICAgbGV0IHN0YXJ0UG9zID0gc3RhcnQgLSBwYXJlbnRTdGFydDsKICAgICAgICAgIGlmIChlbmQgLSBzdGFydCA8PSBtYXhCdWZmZXJMZW5ndGggJiYgKGJ1ZmZlciA9IGZpbmRCdWZmZXJTaXplKGN1cnNvci5wb3MgLSBtaW5Qb3MsIGluUmVwZWF0KSkpIHsKICAgICAgICAgICAgICAvLyBTbWFsbCBlbm91Z2ggZm9yIGEgYnVmZmVyLCBhbmQgbm8gcmV1c2VkIG5vZGVzIGluc2lkZQogICAgICAgICAgICAgIGxldCBkYXRhID0gbmV3IFVpbnQxNkFycmF5KGJ1ZmZlci5zaXplIC0gYnVmZmVyLnNraXApOwogICAgICAgICAgICAgIGxldCBlbmRQb3MgPSBjdXJzb3IucG9zIC0gYnVmZmVyLnNpemUsIGluZGV4ID0gZGF0YS5sZW5ndGg7CiAgICAgICAgICAgICAgd2hpbGUgKGN1cnNvci5wb3MgPiBlbmRQb3MpCiAgICAgICAgICAgICAgICAgIGluZGV4ID0gY29weVRvQnVmZmVyKGJ1ZmZlci5zdGFydCwgZGF0YSwgaW5kZXgpOwogICAgICAgICAgICAgIG5vZGUgPSBuZXcgVHJlZUJ1ZmZlcihkYXRhLCBlbmQgLSBidWZmZXIuc3RhcnQsIG5vZGVTZXQpOwogICAgICAgICAgICAgIHN0YXJ0UG9zID0gYnVmZmVyLnN0YXJ0IC0gcGFyZW50U3RhcnQ7CiAgICAgICAgICB9CiAgICAgICAgICBlbHNlIHsgLy8gTWFrZSBpdCBhIG5vZGUKICAgICAgICAgICAgICBsZXQgZW5kUG9zID0gY3Vyc29yLnBvcyAtIHNpemU7CiAgICAgICAgICAgICAgY3Vyc29yLm5leHQoKTsKICAgICAgICAgICAgICBsZXQgbG9jYWxDaGlsZHJlbiA9IFtdLCBsb2NhbFBvc2l0aW9ucyA9IFtdOwogICAgICAgICAgICAgIGxldCBsb2NhbEluUmVwZWF0ID0gaWQgPj0gbWluUmVwZWF0VHlwZSA/IGlkIDogLTE7CiAgICAgICAgICAgICAgbGV0IGxhc3RHcm91cCA9IDAsIGxhc3RFbmQgPSBlbmQ7CiAgICAgICAgICAgICAgd2hpbGUgKGN1cnNvci5wb3MgPiBlbmRQb3MpIHsKICAgICAgICAgICAgICAgICAgaWYgKGxvY2FsSW5SZXBlYXQgPj0gMCAmJiBjdXJzb3IuaWQgPT0gbG9jYWxJblJlcGVhdCAmJiBjdXJzb3Iuc2l6ZSA+PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAoY3Vyc29yLmVuZCA8PSBsYXN0RW5kIC0gbWF4QnVmZmVyTGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgbWFrZVJlcGVhdExlYWYobG9jYWxDaGlsZHJlbiwgbG9jYWxQb3NpdGlvbnMsIHN0YXJ0LCBsYXN0R3JvdXAsIGN1cnNvci5lbmQsIGxhc3RFbmQsIGxvY2FsSW5SZXBlYXQsIGxvb2tBaGVhZEF0U3RhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RHcm91cCA9IGxvY2FsQ2hpbGRyZW4ubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RFbmQgPSBjdXJzb3IuZW5kOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgY3Vyc29yLm5leHQoKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgIHRha2VOb2RlKHN0YXJ0LCBlbmRQb3MsIGxvY2FsQ2hpbGRyZW4sIGxvY2FsUG9zaXRpb25zLCBsb2NhbEluUmVwZWF0KTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAobG9jYWxJblJlcGVhdCA+PSAwICYmIGxhc3RHcm91cCA+IDAgJiYgbGFzdEdyb3VwIDwgbG9jYWxDaGlsZHJlbi5sZW5ndGgpCiAgICAgICAgICAgICAgICAgIG1ha2VSZXBlYXRMZWFmKGxvY2FsQ2hpbGRyZW4sIGxvY2FsUG9zaXRpb25zLCBzdGFydCwgbGFzdEdyb3VwLCBzdGFydCwgbGFzdEVuZCwgbG9jYWxJblJlcGVhdCwgbG9va0FoZWFkQXRTdGFydCk7CiAgICAgICAgICAgICAgbG9jYWxDaGlsZHJlbi5yZXZlcnNlKCk7CiAgICAgICAgICAgICAgbG9jYWxQb3NpdGlvbnMucmV2ZXJzZSgpOwogICAgICAgICAgICAgIGlmIChsb2NhbEluUmVwZWF0ID4gLTEgJiYgbGFzdEdyb3VwID4gMCkgewogICAgICAgICAgICAgICAgICBsZXQgbWFrZSA9IG1ha2VCYWxhbmNlZCh0eXBlKTsKICAgICAgICAgICAgICAgICAgbm9kZSA9IGJhbGFuY2VSYW5nZSh0eXBlLCBsb2NhbENoaWxkcmVuLCBsb2NhbFBvc2l0aW9ucywgMCwgbG9jYWxDaGlsZHJlbi5sZW5ndGgsIDAsIGVuZCAtIHN0YXJ0LCBtYWtlLCBtYWtlKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgIG5vZGUgPSBtYWtlVHJlZSh0eXBlLCBsb2NhbENoaWxkcmVuLCBsb2NhbFBvc2l0aW9ucywgZW5kIC0gc3RhcnQsIGxvb2tBaGVhZEF0U3RhcnQgLSBlbmQpOwogICAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGNoaWxkcmVuLnB1c2gobm9kZSk7CiAgICAgICAgICBwb3NpdGlvbnMucHVzaChzdGFydFBvcyk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gbWFrZUJhbGFuY2VkKHR5cGUpIHsKICAgICAgICAgIHJldHVybiAoY2hpbGRyZW4sIHBvc2l0aW9ucywgbGVuZ3RoKSA9PiB7CiAgICAgICAgICAgICAgbGV0IGxvb2tBaGVhZCA9IDAsIGxhc3RJID0gY2hpbGRyZW4ubGVuZ3RoIC0gMSwgbGFzdCwgbG9va0FoZWFkUHJvcDsKICAgICAgICAgICAgICBpZiAobGFzdEkgPj0gMCAmJiAobGFzdCA9IGNoaWxkcmVuW2xhc3RJXSkgaW5zdGFuY2VvZiBUcmVlKSB7CiAgICAgICAgICAgICAgICAgIGlmICghbGFzdEkgJiYgbGFzdC50eXBlID09IHR5cGUgJiYgbGFzdC5sZW5ndGggPT0gbGVuZ3RoKQogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxhc3Q7CiAgICAgICAgICAgICAgICAgIGlmIChsb29rQWhlYWRQcm9wID0gbGFzdC5wcm9wKE5vZGVQcm9wLmxvb2tBaGVhZCkpCiAgICAgICAgICAgICAgICAgICAgICBsb29rQWhlYWQgPSBwb3NpdGlvbnNbbGFzdEldICsgbGFzdC5sZW5ndGggKyBsb29rQWhlYWRQcm9wOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICByZXR1cm4gbWFrZVRyZWUodHlwZSwgY2hpbGRyZW4sIHBvc2l0aW9ucywgbGVuZ3RoLCBsb29rQWhlYWQpOwogICAgICAgICAgfTsKICAgICAgfQogICAgICBmdW5jdGlvbiBtYWtlUmVwZWF0TGVhZihjaGlsZHJlbiwgcG9zaXRpb25zLCBiYXNlLCBpLCBmcm9tLCB0bywgdHlwZSwgbG9va0FoZWFkKSB7CiAgICAgICAgICBsZXQgbG9jYWxDaGlsZHJlbiA9IFtdLCBsb2NhbFBvc2l0aW9ucyA9IFtdOwogICAgICAgICAgd2hpbGUgKGNoaWxkcmVuLmxlbmd0aCA+IGkpIHsKICAgICAgICAgICAgICBsb2NhbENoaWxkcmVuLnB1c2goY2hpbGRyZW4ucG9wKCkpOwogICAgICAgICAgICAgIGxvY2FsUG9zaXRpb25zLnB1c2gocG9zaXRpb25zLnBvcCgpICsgYmFzZSAtIGZyb20pOwogICAgICAgICAgfQogICAgICAgICAgY2hpbGRyZW4ucHVzaChtYWtlVHJlZShub2RlU2V0LnR5cGVzW3R5cGVdLCBsb2NhbENoaWxkcmVuLCBsb2NhbFBvc2l0aW9ucywgdG8gLSBmcm9tLCBsb29rQWhlYWQgLSB0bykpOwogICAgICAgICAgcG9zaXRpb25zLnB1c2goZnJvbSAtIGJhc2UpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIG1ha2VUcmVlKHR5cGUsIGNoaWxkcmVuLCBwb3NpdGlvbnMsIGxlbmd0aCwgbG9va0FoZWFkID0gMCwgcHJvcHMpIHsKICAgICAgICAgIGlmIChjb250ZXh0SGFzaCkgewogICAgICAgICAgICAgIGxldCBwYWlyID0gW05vZGVQcm9wLmNvbnRleHRIYXNoLCBjb250ZXh0SGFzaF07CiAgICAgICAgICAgICAgcHJvcHMgPSBwcm9wcyA/IFtwYWlyXS5jb25jYXQocHJvcHMpIDogW3BhaXJdOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGxvb2tBaGVhZCA+IDI1KSB7CiAgICAgICAgICAgICAgbGV0IHBhaXIgPSBbTm9kZVByb3AubG9va0FoZWFkLCBsb29rQWhlYWRdOwogICAgICAgICAgICAgIHByb3BzID0gcHJvcHMgPyBbcGFpcl0uY29uY2F0KHByb3BzKSA6IFtwYWlyXTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBuZXcgVHJlZSh0eXBlLCBjaGlsZHJlbiwgcG9zaXRpb25zLCBsZW5ndGgsIHByb3BzKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBmaW5kQnVmZmVyU2l6ZShtYXhTaXplLCBpblJlcGVhdCkgewogICAgICAgICAgLy8gU2NhbiB0aHJvdWdoIHRoZSBidWZmZXIgdG8gZmluZCBwcmV2aW91cyBzaWJsaW5ncyB0aGF0IGZpdAogICAgICAgICAgLy8gdG9nZXRoZXIgaW4gYSBUcmVlQnVmZmVyLCBhbmQgZG9uJ3QgY29udGFpbiBhbnkgcmV1c2VkIG5vZGVzCiAgICAgICAgICAvLyAod2hpY2ggY2FuJ3QgYmUgc3RvcmVkIGluIGEgYnVmZmVyKS4KICAgICAgICAgIC8vIElmIGBpblJlcGVhdGAgaXMgPiAtMSwgaWdub3JlIG5vZGUgYm91bmRhcmllcyBvZiB0aGF0IHR5cGUgZm9yCiAgICAgICAgICAvLyBuZXN0aW5nLCBidXQgbWFrZSBzdXJlIHRoZSBlbmQgZmFsbHMgZWl0aGVyIGF0IHRoZSBzdGFydAogICAgICAgICAgLy8gKGBtYXhTaXplYCkgb3IgYmVmb3JlIHN1Y2ggYSBub2RlLgogICAgICAgICAgbGV0IGZvcmsgPSBjdXJzb3IuZm9yaygpOwogICAgICAgICAgbGV0IHNpemUgPSAwLCBzdGFydCA9IDAsIHNraXAgPSAwLCBtaW5TdGFydCA9IGZvcmsuZW5kIC0gbWF4QnVmZmVyTGVuZ3RoOwogICAgICAgICAgbGV0IHJlc3VsdCA9IHsgc2l6ZTogMCwgc3RhcnQ6IDAsIHNraXA6IDAgfTsKICAgICAgICAgIHNjYW46IGZvciAobGV0IG1pblBvcyA9IGZvcmsucG9zIC0gbWF4U2l6ZTsgZm9yay5wb3MgPiBtaW5Qb3M7KSB7CiAgICAgICAgICAgICAgbGV0IG5vZGVTaXplID0gZm9yay5zaXplOwogICAgICAgICAgICAgIC8vIFByZXRlbmQgbmVzdGVkIHJlcGVhdCBub2RlcyBvZiB0aGUgc2FtZSB0eXBlIGRvbid0IGV4aXN0CiAgICAgICAgICAgICAgaWYgKGZvcmsuaWQgPT0gaW5SZXBlYXQgJiYgbm9kZVNpemUgPj0gMCkgewogICAgICAgICAgICAgICAgICAvLyBFeGNlcHQgdGhhdCB3ZSBzdG9yZSB0aGUgY3VycmVudCBzdGF0ZSBhcyBhIHZhbGlkIHJldHVybgogICAgICAgICAgICAgICAgICAvLyB2YWx1ZS4KICAgICAgICAgICAgICAgICAgcmVzdWx0LnNpemUgPSBzaXplOwogICAgICAgICAgICAgICAgICByZXN1bHQuc3RhcnQgPSBzdGFydDsKICAgICAgICAgICAgICAgICAgcmVzdWx0LnNraXAgPSBza2lwOwogICAgICAgICAgICAgICAgICBza2lwICs9IDQ7CiAgICAgICAgICAgICAgICAgIHNpemUgKz0gNDsKICAgICAgICAgICAgICAgICAgZm9yay5uZXh0KCk7CiAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBsZXQgc3RhcnRQb3MgPSBmb3JrLnBvcyAtIG5vZGVTaXplOwogICAgICAgICAgICAgIGlmIChub2RlU2l6ZSA8IDAgfHwgc3RhcnRQb3MgPCBtaW5Qb3MgfHwgZm9yay5zdGFydCA8IG1pblN0YXJ0KQogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICBsZXQgbG9jYWxTa2lwcGVkID0gZm9yay5pZCA+PSBtaW5SZXBlYXRUeXBlID8gNCA6IDA7CiAgICAgICAgICAgICAgbGV0IG5vZGVTdGFydCA9IGZvcmsuc3RhcnQ7CiAgICAgICAgICAgICAgZm9yay5uZXh0KCk7CiAgICAgICAgICAgICAgd2hpbGUgKGZvcmsucG9zID4gc3RhcnRQb3MpIHsKICAgICAgICAgICAgICAgICAgaWYgKGZvcmsuc2l6ZSA8IDApIHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChmb3JrLnNpemUgPT0gLTMgLyogQ29udGV4dENoYW5nZSAqLykKICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFNraXBwZWQgKz0gNDsKICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhayBzY2FuOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGZvcmsuaWQgPj0gbWluUmVwZWF0VHlwZSkgewogICAgICAgICAgICAgICAgICAgICAgbG9jYWxTa2lwcGVkICs9IDQ7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgZm9yay5uZXh0KCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHN0YXJ0ID0gbm9kZVN0YXJ0OwogICAgICAgICAgICAgIHNpemUgKz0gbm9kZVNpemU7CiAgICAgICAgICAgICAgc2tpcCArPSBsb2NhbFNraXBwZWQ7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoaW5SZXBlYXQgPCAwIHx8IHNpemUgPT0gbWF4U2l6ZSkgewogICAgICAgICAgICAgIHJlc3VsdC5zaXplID0gc2l6ZTsKICAgICAgICAgICAgICByZXN1bHQuc3RhcnQgPSBzdGFydDsKICAgICAgICAgICAgICByZXN1bHQuc2tpcCA9IHNraXA7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gcmVzdWx0LnNpemUgPiA0ID8gcmVzdWx0IDogdW5kZWZpbmVkOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGNvcHlUb0J1ZmZlcihidWZmZXJTdGFydCwgYnVmZmVyLCBpbmRleCkgewogICAgICAgICAgbGV0IHsgaWQsIHN0YXJ0LCBlbmQsIHNpemUgfSA9IGN1cnNvcjsKICAgICAgICAgIGN1cnNvci5uZXh0KCk7CiAgICAgICAgICBpZiAoc2l6ZSA+PSAwICYmIGlkIDwgbWluUmVwZWF0VHlwZSkgewogICAgICAgICAgICAgIGxldCBzdGFydEluZGV4ID0gaW5kZXg7CiAgICAgICAgICAgICAgaWYgKHNpemUgPiA0KSB7CiAgICAgICAgICAgICAgICAgIGxldCBlbmRQb3MgPSBjdXJzb3IucG9zIC0gKHNpemUgLSA0KTsKICAgICAgICAgICAgICAgICAgd2hpbGUgKGN1cnNvci5wb3MgPiBlbmRQb3MpCiAgICAgICAgICAgICAgICAgICAgICBpbmRleCA9IGNvcHlUb0J1ZmZlcihidWZmZXJTdGFydCwgYnVmZmVyLCBpbmRleCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGJ1ZmZlclstLWluZGV4XSA9IHN0YXJ0SW5kZXg7CiAgICAgICAgICAgICAgYnVmZmVyWy0taW5kZXhdID0gZW5kIC0gYnVmZmVyU3RhcnQ7CiAgICAgICAgICAgICAgYnVmZmVyWy0taW5kZXhdID0gc3RhcnQgLSBidWZmZXJTdGFydDsKICAgICAgICAgICAgICBidWZmZXJbLS1pbmRleF0gPSBpZDsKICAgICAgICAgIH0KICAgICAgICAgIGVsc2UgaWYgKHNpemUgPT0gLTMgLyogQ29udGV4dENoYW5nZSAqLykgewogICAgICAgICAgICAgIGNvbnRleHRIYXNoID0gaWQ7CiAgICAgICAgICB9CiAgICAgICAgICBlbHNlIGlmIChzaXplID09IC00IC8qIExvb2tBaGVhZCAqLykgewogICAgICAgICAgICAgIGxvb2tBaGVhZCA9IGlkOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGluZGV4OwogICAgICB9CiAgICAgIGxldCBjaGlsZHJlbiA9IFtdLCBwb3NpdGlvbnMgPSBbXTsKICAgICAgd2hpbGUgKGN1cnNvci5wb3MgPiAwKQogICAgICAgICAgdGFrZU5vZGUoZGF0YS5zdGFydCB8fCAwLCBkYXRhLmJ1ZmZlclN0YXJ0IHx8IDAsIGNoaWxkcmVuLCBwb3NpdGlvbnMsIC0xKTsKICAgICAgbGV0IGxlbmd0aCA9IChfYSA9IGRhdGEubGVuZ3RoKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAoY2hpbGRyZW4ubGVuZ3RoID8gcG9zaXRpb25zWzBdICsgY2hpbGRyZW5bMF0ubGVuZ3RoIDogMCk7CiAgICAgIHJldHVybiBuZXcgVHJlZSh0eXBlc1tkYXRhLnRvcElEXSwgY2hpbGRyZW4ucmV2ZXJzZSgpLCBwb3NpdGlvbnMucmV2ZXJzZSgpLCBsZW5ndGgpOwogIH0KICBjb25zdCBub2RlU2l6ZUNhY2hlID0gbmV3IFdlYWtNYXA7CiAgZnVuY3Rpb24gbm9kZVNpemUoYmFsYW5jZVR5cGUsIG5vZGUpIHsKICAgICAgaWYgKCFiYWxhbmNlVHlwZS5pc0Fub255bW91cyB8fCBub2RlIGluc3RhbmNlb2YgVHJlZUJ1ZmZlciB8fCBub2RlLnR5cGUgIT0gYmFsYW5jZVR5cGUpCiAgICAgICAgICByZXR1cm4gMTsKICAgICAgbGV0IHNpemUgPSBub2RlU2l6ZUNhY2hlLmdldChub2RlKTsKICAgICAgaWYgKHNpemUgPT0gbnVsbCkgewogICAgICAgICAgc2l6ZSA9IDE7CiAgICAgICAgICBmb3IgKGxldCBjaGlsZCBvZiBub2RlLmNoaWxkcmVuKSB7CiAgICAgICAgICAgICAgaWYgKGNoaWxkLnR5cGUgIT0gYmFsYW5jZVR5cGUgfHwgIShjaGlsZCBpbnN0YW5jZW9mIFRyZWUpKSB7CiAgICAgICAgICAgICAgICAgIHNpemUgPSAxOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgc2l6ZSArPSBub2RlU2l6ZShiYWxhbmNlVHlwZSwgY2hpbGQpOwogICAgICAgICAgfQogICAgICAgICAgbm9kZVNpemVDYWNoZS5zZXQobm9kZSwgc2l6ZSk7CiAgICAgIH0KICAgICAgcmV0dXJuIHNpemU7CiAgfQogIGZ1bmN0aW9uIGJhbGFuY2VSYW5nZSgKICAvLyBUaGUgdHlwZSB0aGUgYmFsYW5jZWQgdHJlZSdzIGlubmVyIG5vZGVzLgogIGJhbGFuY2VUeXBlLCAKICAvLyBUaGUgZGlyZWN0IGNoaWxkcmVuIGFuZCB0aGVpciBwb3NpdGlvbnMKICBjaGlsZHJlbiwgcG9zaXRpb25zLCAKICAvLyBUaGUgaW5kZXggcmFuZ2UgaW4gY2hpbGRyZW4vcG9zaXRpb25zIHRvIHVzZQogIGZyb20sIHRvLCAKICAvLyBUaGUgc3RhcnQgcG9zaXRpb24gb2YgdGhlIG5vZGVzLCByZWxhdGl2ZSB0byB0aGVpciBwYXJlbnQuCiAgc3RhcnQsIAogIC8vIExlbmd0aCBvZiB0aGUgb3V0ZXIgbm9kZQogIGxlbmd0aCwgCiAgLy8gRnVuY3Rpb24gdG8gYnVpbGQgdGhlIHRvcCBub2RlIG9mIHRoZSBiYWxhbmNlZCB0cmVlCiAgbWtUb3AsIAogIC8vIEZ1bmN0aW9uIHRvIGJ1aWxkIGludGVybmFsIG5vZGVzIGZvciB0aGUgYmFsYW5jZWQgdHJlZQogIG1rVHJlZSkgewogICAgICBsZXQgdG90YWwgPSAwOwogICAgICBmb3IgKGxldCBpID0gZnJvbTsgaSA8IHRvOyBpKyspCiAgICAgICAgICB0b3RhbCArPSBub2RlU2l6ZShiYWxhbmNlVHlwZSwgY2hpbGRyZW5baV0pOwogICAgICBsZXQgbWF4Q2hpbGQgPSBNYXRoLmNlaWwoKHRvdGFsICogMS41KSAvIDggLyogQnJhbmNoRmFjdG9yICovKTsKICAgICAgbGV0IGxvY2FsQ2hpbGRyZW4gPSBbXSwgbG9jYWxQb3NpdGlvbnMgPSBbXTsKICAgICAgZnVuY3Rpb24gZGl2aWRlKGNoaWxkcmVuLCBwb3NpdGlvbnMsIGZyb20sIHRvLCBvZmZzZXQpIHsKICAgICAgICAgIGZvciAobGV0IGkgPSBmcm9tOyBpIDwgdG87KSB7CiAgICAgICAgICAgICAgbGV0IGdyb3VwRnJvbSA9IGksIGdyb3VwU3RhcnQgPSBwb3NpdGlvbnNbaV0sIGdyb3VwU2l6ZSA9IG5vZGVTaXplKGJhbGFuY2VUeXBlLCBjaGlsZHJlbltpXSk7CiAgICAgICAgICAgICAgaSsrOwogICAgICAgICAgICAgIGZvciAoOyBpIDwgdG87IGkrKykgewogICAgICAgICAgICAgICAgICBsZXQgbmV4dFNpemUgPSBub2RlU2l6ZShiYWxhbmNlVHlwZSwgY2hpbGRyZW5baV0pOwogICAgICAgICAgICAgICAgICBpZiAoZ3JvdXBTaXplICsgbmV4dFNpemUgPj0gbWF4Q2hpbGQpCiAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgZ3JvdXBTaXplICs9IG5leHRTaXplOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoaSA9PSBncm91cEZyb20gKyAxKSB7CiAgICAgICAgICAgICAgICAgIGlmIChncm91cFNpemUgPiBtYXhDaGlsZCkgewogICAgICAgICAgICAgICAgICAgICAgbGV0IG9ubHkgPSBjaGlsZHJlbltncm91cEZyb21dOyAvLyBPbmx5IHRyZWVzIGNhbiBoYXZlIGEgc2l6ZSA+IDEKICAgICAgICAgICAgICAgICAgICAgIGRpdmlkZShvbmx5LmNoaWxkcmVuLCBvbmx5LnBvc2l0aW9ucywgMCwgb25seS5jaGlsZHJlbi5sZW5ndGgsIHBvc2l0aW9uc1tncm91cEZyb21dICsgb2Zmc2V0KTsKICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGxvY2FsQ2hpbGRyZW4ucHVzaChjaGlsZHJlbltncm91cEZyb21dKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgIGxldCBsZW5ndGggPSBwb3NpdGlvbnNbaSAtIDFdICsgY2hpbGRyZW5baSAtIDFdLmxlbmd0aCAtIGdyb3VwU3RhcnQ7CiAgICAgICAgICAgICAgICAgIGxvY2FsQ2hpbGRyZW4ucHVzaChiYWxhbmNlUmFuZ2UoYmFsYW5jZVR5cGUsIGNoaWxkcmVuLCBwb3NpdGlvbnMsIGdyb3VwRnJvbSwgaSwgZ3JvdXBTdGFydCwgbGVuZ3RoLCBudWxsLCBta1RyZWUpKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgbG9jYWxQb3NpdGlvbnMucHVzaChncm91cFN0YXJ0ICsgb2Zmc2V0IC0gc3RhcnQpOwogICAgICAgICAgfQogICAgICB9CiAgICAgIGRpdmlkZShjaGlsZHJlbiwgcG9zaXRpb25zLCBmcm9tLCB0bywgMCk7CiAgICAgIHJldHVybiAobWtUb3AgfHwgbWtUcmVlKShsb2NhbENoaWxkcmVuLCBsb2NhbFBvc2l0aW9ucywgbGVuZ3RoKTsKICB9CiAgLy8vIEEgc3VwZXJjbGFzcyB0aGF0IHBhcnNlcnMgc2hvdWxkIGV4dGVuZC4KICBjbGFzcyBQYXJzZXIgewogICAgICAvLy8gU3RhcnQgYSBwYXJzZSwgcmV0dXJuaW5nIGEgW3BhcnRpYWwgcGFyc2VdKCNjb21tb24uUGFydGlhbFBhcnNlKQogICAgICAvLy8gb2JqZWN0LiBbYGZyYWdtZW50c2BdKCNjb21tb24uVHJlZUZyYWdtZW50KSBjYW4gYmUgcGFzc2VkIGluIHRvCiAgICAgIC8vLyBtYWtlIHRoZSBwYXJzZSBpbmNyZW1lbnRhbC4KICAgICAgLy8vCiAgICAgIC8vLyBCeSBkZWZhdWx0LCB0aGUgZW50aXJlIGlucHV0IGlzIHBhcnNlZC4gWW91IGNhbiBwYXNzIGByYW5nZXNgLAogICAgICAvLy8gd2hpY2ggc2hvdWxkIGJlIGEgc29ydGVkIGFycmF5IG9mIG5vbi1lbXB0eSwgbm9uLW92ZXJsYXBwaW5nCiAgICAgIC8vLyByYW5nZXMsIHRvIHBhcnNlIG9ubHkgdGhvc2UgcmFuZ2VzLiBUaGUgdHJlZSByZXR1cm5lZCBpbiB0aGF0CiAgICAgIC8vLyBjYXNlIHdpbGwgc3RhcnQgYXQgYHJhbmdlc1swXS5mcm9tYC4KICAgICAgc3RhcnRQYXJzZShpbnB1dCwgZnJhZ21lbnRzLCByYW5nZXMpIHsKICAgICAgICAgIGlmICh0eXBlb2YgaW5wdXQgPT0gInN0cmluZyIpCiAgICAgICAgICAgICAgaW5wdXQgPSBuZXcgU3RyaW5nSW5wdXQoaW5wdXQpOwogICAgICAgICAgcmFuZ2VzID0gIXJhbmdlcyA/IFtuZXcgUmFuZ2UkMSgwLCBpbnB1dC5sZW5ndGgpXSA6IHJhbmdlcy5sZW5ndGggPyByYW5nZXMubWFwKHIgPT4gbmV3IFJhbmdlJDEoci5mcm9tLCByLnRvKSkgOiBbbmV3IFJhbmdlJDEoMCwgMCldOwogICAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlUGFyc2UoaW5wdXQsIGZyYWdtZW50cyB8fCBbXSwgcmFuZ2VzKTsKICAgICAgfQogICAgICAvLy8gUnVuIGEgZnVsbCBwYXJzZSwgcmV0dXJuaW5nIHRoZSByZXN1bHRpbmcgdHJlZS4KICAgICAgcGFyc2UoaW5wdXQsIGZyYWdtZW50cywgcmFuZ2VzKSB7CiAgICAgICAgICBsZXQgcGFyc2UgPSB0aGlzLnN0YXJ0UGFyc2UoaW5wdXQsIGZyYWdtZW50cywgcmFuZ2VzKTsKICAgICAgICAgIGZvciAoOzspIHsKICAgICAgICAgICAgICBsZXQgZG9uZSA9IHBhcnNlLmFkdmFuY2UoKTsKICAgICAgICAgICAgICBpZiAoZG9uZSkKICAgICAgICAgICAgICAgICAgcmV0dXJuIGRvbmU7CiAgICAgICAgICB9CiAgICAgIH0KICB9CiAgY2xhc3MgU3RyaW5nSW5wdXQgewogICAgICBjb25zdHJ1Y3RvcihzdHJpbmcpIHsKICAgICAgICAgIHRoaXMuc3RyaW5nID0gc3RyaW5nOwogICAgICB9CiAgICAgIGdldCBsZW5ndGgoKSB7IHJldHVybiB0aGlzLnN0cmluZy5sZW5ndGg7IH0KICAgICAgY2h1bmsoZnJvbSkgeyByZXR1cm4gdGhpcy5zdHJpbmcuc2xpY2UoZnJvbSk7IH0KICAgICAgZ2V0IGxpbmVDaHVua3MoKSB7IHJldHVybiBmYWxzZTsgfQogICAgICByZWFkKGZyb20sIHRvKSB7IHJldHVybiB0aGlzLnN0cmluZy5zbGljZShmcm9tLCB0byk7IH0KICB9CiAgbmV3IE5vZGVQcm9wKHsgcGVyTm9kZTogdHJ1ZSB9KTsKCiAgLy8vIEEgcGFyc2Ugc3RhY2suIFRoZXNlIGFyZSB1c2VkIGludGVybmFsbHkgYnkgdGhlIHBhcnNlciB0byB0cmFjawogIC8vLyBwYXJzaW5nIHByb2dyZXNzLiBUaGV5IGFsc28gcHJvdmlkZSBzb21lIHByb3BlcnRpZXMgYW5kIG1ldGhvZHMKICAvLy8gdGhhdCBleHRlcm5hbCBjb2RlIHN1Y2ggYXMgYSB0b2tlbml6ZXIgY2FuIHVzZSB0byBnZXQgaW5mb3JtYXRpb24KICAvLy8gYWJvdXQgdGhlIHBhcnNlIHN0YXRlLgogIGNsYXNzIFN0YWNrIHsKICAgICAgLy8vIEBpbnRlcm5hbAogICAgICBjb25zdHJ1Y3RvcigKICAgICAgLy8vIFRoZSBwYXJzZSB0aGF0IHRoaXMgc3RhY2sgaXMgcGFydCBvZiBAaW50ZXJuYWwKICAgICAgcCwgCiAgICAgIC8vLyBIb2xkcyBzdGF0ZSwgaW5wdXQgcG9zLCBidWZmZXIgaW5kZXggdHJpcGxldHMgZm9yIGFsbCBidXQgdGhlCiAgICAgIC8vLyB0b3Agc3RhdGUgQGludGVybmFsCiAgICAgIHN0YWNrLCAKICAgICAgLy8vIFRoZSBjdXJyZW50IHBhcnNlIHN0YXRlIEBpbnRlcm5hbAogICAgICBzdGF0ZSwgCiAgICAgIC8vIFRoZSBwb3NpdGlvbiBhdCB3aGljaCB0aGUgbmV4dCByZWR1Y2Ugc2hvdWxkIHRha2UgcGxhY2UuIFRoaXMKICAgICAgLy8gY2FuIGJlIGxlc3MgdGhhbiBgdGhpcy5wb3NgIHdoZW4gc2tpcHBlZCBleHByZXNzaW9ucyBoYXZlIGJlZW4KICAgICAgLy8gYWRkZWQgdG8gdGhlIHN0YWNrICh3aGljaCBzaG91bGQgYmUgbW92ZWQgb3V0c2lkZSBvZiB0aGUgbmV4dAogICAgICAvLyByZWR1Y3Rpb24pCiAgICAgIC8vLyBAaW50ZXJuYWwKICAgICAgcmVkdWNlUG9zLCAKICAgICAgLy8vIFRoZSBpbnB1dCBwb3NpdGlvbiB1cCB0byB3aGljaCB0aGlzIHN0YWNrIGhhcyBwYXJzZWQuCiAgICAgIHBvcywgCiAgICAgIC8vLyBUaGUgZHluYW1pYyBzY29yZSBvZiB0aGUgc3RhY2ssIGluY2x1ZGluZyBkeW5hbWljIHByZWNlZGVuY2UKICAgICAgLy8vIGFuZCBlcnJvci1yZWNvdmVyeSBwZW5hbHRpZXMKICAgICAgLy8vIEBpbnRlcm5hbAogICAgICBzY29yZSwgCiAgICAgIC8vIFRoZSBvdXRwdXQgYnVmZmVyLiBIb2xkcyAodHlwZSwgc3RhcnQsIGVuZCwgc2l6ZSkgcXVhZHMKICAgICAgLy8gcmVwcmVzZW50aW5nIG5vZGVzIGNyZWF0ZWQgYnkgdGhlIHBhcnNlciwgd2hlcmUgYHNpemVgIGlzCiAgICAgIC8vIGFtb3VudCBvZiBidWZmZXIgYXJyYXkgZW50cmllcyBjb3ZlcmVkIGJ5IHRoaXMgbm9kZS4KICAgICAgLy8vIEBpbnRlcm5hbAogICAgICBidWZmZXIsIAogICAgICAvLyBUaGUgYmFzZSBvZmZzZXQgb2YgdGhlIGJ1ZmZlci4gV2hlbiBzdGFja3MgYXJlIHNwbGl0LCB0aGUgc3BsaXQKICAgICAgLy8gaW5zdGFuY2Ugc2hhcmVkIHRoZSBidWZmZXIgaGlzdG9yeSB3aXRoIGl0cyBwYXJlbnQgdXAgdG8KICAgICAgLy8gYGJ1ZmZlckJhc2VgLCB3aGljaCBpcyB0aGUgYWJzb2x1dGUgb2Zmc2V0IChpbmNsdWRpbmcgdGhlCiAgICAgIC8vIG9mZnNldCBvZiBwcmV2aW91cyBzcGxpdHMpIGludG8gdGhlIGJ1ZmZlciBhdCB3aGljaCB0aGlzIHN0YWNrCiAgICAgIC8vIHN0YXJ0cyB3cml0aW5nLgogICAgICAvLy8gQGludGVybmFsCiAgICAgIGJ1ZmZlckJhc2UsIAogICAgICAvLy8gQGludGVybmFsCiAgICAgIGN1ckNvbnRleHQsIAogICAgICAvLy8gQGludGVybmFsCiAgICAgIGxvb2tBaGVhZCA9IDAsIAogICAgICAvLyBBIHBhcmVudCBzdGFjayBmcm9tIHdoaWNoIHRoaXMgd2FzIHNwbGl0IG9mZiwgaWYgYW55LiBUaGlzIGlzCiAgICAgIC8vIHNldCB1cCBzbyB0aGF0IGl0IGFsd2F5cyBwb2ludHMgdG8gYSBzdGFjayB0aGF0IGhhcyBzb21lCiAgICAgIC8vIGFkZGl0aW9uYWwgYnVmZmVyIGNvbnRlbnQsIG5ldmVyIHRvIGEgc3RhY2sgd2l0aCBhbiBlcXVhbAogICAgICAvLyBgYnVmZmVyQmFzZWAuCiAgICAgIC8vLyBAaW50ZXJuYWwKICAgICAgcGFyZW50KSB7CiAgICAgICAgICB0aGlzLnAgPSBwOwogICAgICAgICAgdGhpcy5zdGFjayA9IHN0YWNrOwogICAgICAgICAgdGhpcy5zdGF0ZSA9IHN0YXRlOwogICAgICAgICAgdGhpcy5yZWR1Y2VQb3MgPSByZWR1Y2VQb3M7CiAgICAgICAgICB0aGlzLnBvcyA9IHBvczsKICAgICAgICAgIHRoaXMuc2NvcmUgPSBzY29yZTsKICAgICAgICAgIHRoaXMuYnVmZmVyID0gYnVmZmVyOwogICAgICAgICAgdGhpcy5idWZmZXJCYXNlID0gYnVmZmVyQmFzZTsKICAgICAgICAgIHRoaXMuY3VyQ29udGV4dCA9IGN1ckNvbnRleHQ7CiAgICAgICAgICB0aGlzLmxvb2tBaGVhZCA9IGxvb2tBaGVhZDsKICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50OwogICAgICB9CiAgICAgIC8vLyBAaW50ZXJuYWwKICAgICAgdG9TdHJpbmcoKSB7CiAgICAgICAgICByZXR1cm4gYFske3RoaXMuc3RhY2suZmlsdGVyKChfLCBpKSA9PiBpICUgMyA9PSAwKS5jb25jYXQodGhpcy5zdGF0ZSl9XUAke3RoaXMucG9zfSR7dGhpcy5zY29yZSA/ICIhIiArIHRoaXMuc2NvcmUgOiAiIn1gOwogICAgICB9CiAgICAgIC8vIFN0YXJ0IGFuIGVtcHR5IHN0YWNrCiAgICAgIC8vLyBAaW50ZXJuYWwKICAgICAgc3RhdGljIHN0YXJ0KHAsIHN0YXRlLCBwb3MgPSAwKSB7CiAgICAgICAgICBsZXQgY3ggPSBwLnBhcnNlci5jb250ZXh0OwogICAgICAgICAgcmV0dXJuIG5ldyBTdGFjayhwLCBbXSwgc3RhdGUsIHBvcywgcG9zLCAwLCBbXSwgMCwgY3ggPyBuZXcgU3RhY2tDb250ZXh0KGN4LCBjeC5zdGFydCkgOiBudWxsLCAwLCBudWxsKTsKICAgICAgfQogICAgICAvLy8gVGhlIHN0YWNrJ3MgY3VycmVudCBbY29udGV4dF0oI2xyLkNvbnRleHRUcmFja2VyKSB2YWx1ZSwgaWYKICAgICAgLy8vIGFueS4gSXRzIHR5cGUgd2lsbCBkZXBlbmQgb24gdGhlIGNvbnRleHQgdHJhY2tlcidzIHR5cGUKICAgICAgLy8vIHBhcmFtZXRlciwgb3IgaXQgd2lsbCBiZSBgbnVsbGAgaWYgdGhlcmUgaXMgbm8gY29udGV4dAogICAgICAvLy8gdHJhY2tlci4KICAgICAgZ2V0IGNvbnRleHQoKSB7IHJldHVybiB0aGlzLmN1ckNvbnRleHQgPyB0aGlzLmN1ckNvbnRleHQuY29udGV4dCA6IG51bGw7IH0KICAgICAgLy8gUHVzaCBhIHN0YXRlIG9udG8gdGhlIHN0YWNrLCB0cmFja2luZyBpdHMgc3RhcnQgcG9zaXRpb24gYXMgd2VsbAogICAgICAvLyBhcyB0aGUgYnVmZmVyIGJhc2UgYXQgdGhhdCBwb2ludC4KICAgICAgLy8vIEBpbnRlcm5hbAogICAgICBwdXNoU3RhdGUoc3RhdGUsIHN0YXJ0KSB7CiAgICAgICAgICB0aGlzLnN0YWNrLnB1c2godGhpcy5zdGF0ZSwgc3RhcnQsIHRoaXMuYnVmZmVyQmFzZSArIHRoaXMuYnVmZmVyLmxlbmd0aCk7CiAgICAgICAgICB0aGlzLnN0YXRlID0gc3RhdGU7CiAgICAgIH0KICAgICAgLy8gQXBwbHkgYSByZWR1Y2UgYWN0aW9uCiAgICAgIC8vLyBAaW50ZXJuYWwKICAgICAgcmVkdWNlKGFjdGlvbikgewogICAgICAgICAgbGV0IGRlcHRoID0gYWN0aW9uID4+IDE5IC8qIFJlZHVjZURlcHRoU2hpZnQgKi8sIHR5cGUgPSBhY3Rpb24gJiA2NTUzNSAvKiBWYWx1ZU1hc2sgKi87CiAgICAgICAgICBsZXQgeyBwYXJzZXIgfSA9IHRoaXMucDsKICAgICAgICAgIGxldCBkUHJlYyA9IHBhcnNlci5keW5hbWljUHJlY2VkZW5jZSh0eXBlKTsKICAgICAgICAgIGlmIChkUHJlYykKICAgICAgICAgICAgICB0aGlzLnNjb3JlICs9IGRQcmVjOwogICAgICAgICAgaWYgKGRlcHRoID09IDApIHsKICAgICAgICAgICAgICB0aGlzLnB1c2hTdGF0ZShwYXJzZXIuZ2V0R290byh0aGlzLnN0YXRlLCB0eXBlLCB0cnVlKSwgdGhpcy5yZWR1Y2VQb3MpOwogICAgICAgICAgICAgIC8vIFplcm8tZGVwdGggcmVkdWN0aW9ucyBhcmUgYSBzcGVjaWFsIGNhc2XigJR0aGV5IGFkZCBzdHVmZiB0bwogICAgICAgICAgICAgIC8vIHRoZSBzdGFjayB3aXRob3V0IHBvcHBpbmcgYW55dGhpbmcgb2ZmLgogICAgICAgICAgICAgIGlmICh0eXBlIDwgcGFyc2VyLm1pblJlcGVhdFRlcm0pCiAgICAgICAgICAgICAgICAgIHRoaXMuc3RvcmVOb2RlKHR5cGUsIHRoaXMucmVkdWNlUG9zLCB0aGlzLnJlZHVjZVBvcywgNCwgdHJ1ZSk7CiAgICAgICAgICAgICAgdGhpcy5yZWR1Y2VDb250ZXh0KHR5cGUsIHRoaXMucmVkdWNlUG9zKTsKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICAvLyBGaW5kIHRoZSBiYXNlIGluZGV4IGludG8gYHRoaXMuc3RhY2tgLCBjb250ZW50IGFmdGVyIHdoaWNoIHdpbGwKICAgICAgICAgIC8vIGJlIGRyb3BwZWQuIE5vdGUgdGhhdCB3aXRoIGBTdGF5RmxhZ2AgcmVkdWN0aW9ucyB3ZSBuZWVkIHRvCiAgICAgICAgICAvLyBjb25zdW1lIHR3byBleHRyYSBmcmFtZXMgKHRoZSBkdW1teSBwYXJlbnQgbm9kZSBmb3IgdGhlIHNraXBwZWQKICAgICAgICAgIC8vIGV4cHJlc3Npb24gYW5kIHRoZSBzdGF0ZSB0aGF0IHdlJ2xsIGJlIHN0YXlpbmcgaW4sIHdoaWNoIHNob3VsZAogICAgICAgICAgLy8gYmUgbW92ZWQgdG8gYHRoaXMuc3RhdGVgKS4KICAgICAgICAgIGxldCBiYXNlID0gdGhpcy5zdGFjay5sZW5ndGggLSAoKGRlcHRoIC0gMSkgKiAzKSAtIChhY3Rpb24gJiAyNjIxNDQgLyogU3RheUZsYWcgKi8gPyA2IDogMCk7CiAgICAgICAgICBsZXQgc3RhcnQgPSB0aGlzLnN0YWNrW2Jhc2UgLSAyXTsKICAgICAgICAgIGxldCBidWZmZXJCYXNlID0gdGhpcy5zdGFja1tiYXNlIC0gMV0sIGNvdW50ID0gdGhpcy5idWZmZXJCYXNlICsgdGhpcy5idWZmZXIubGVuZ3RoIC0gYnVmZmVyQmFzZTsKICAgICAgICAgIC8vIFN0b3JlIG5vcm1hbCB0ZXJtcyBvciBgUiAtPiBSIFJgIHJlcGVhdCByZWR1Y3Rpb25zCiAgICAgICAgICBpZiAodHlwZSA8IHBhcnNlci5taW5SZXBlYXRUZXJtIHx8IChhY3Rpb24gJiAxMzEwNzIgLyogUmVwZWF0RmxhZyAqLykpIHsKICAgICAgICAgICAgICBsZXQgcG9zID0gcGFyc2VyLnN0YXRlRmxhZyh0aGlzLnN0YXRlLCAxIC8qIFNraXBwZWQgKi8pID8gdGhpcy5wb3MgOiB0aGlzLnJlZHVjZVBvczsKICAgICAgICAgICAgICB0aGlzLnN0b3JlTm9kZSh0eXBlLCBzdGFydCwgcG9zLCBjb3VudCArIDQsIHRydWUpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGFjdGlvbiAmIDI2MjE0NCAvKiBTdGF5RmxhZyAqLykgewogICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSB0aGlzLnN0YWNrW2Jhc2VdOwogICAgICAgICAgfQogICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgbGV0IGJhc2VTdGF0ZUlEID0gdGhpcy5zdGFja1tiYXNlIC0gM107CiAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IHBhcnNlci5nZXRHb3RvKGJhc2VTdGF0ZUlELCB0eXBlLCB0cnVlKTsKICAgICAgICAgIH0KICAgICAgICAgIHdoaWxlICh0aGlzLnN0YWNrLmxlbmd0aCA+IGJhc2UpCiAgICAgICAgICAgICAgdGhpcy5zdGFjay5wb3AoKTsKICAgICAgICAgIHRoaXMucmVkdWNlQ29udGV4dCh0eXBlLCBzdGFydCk7CiAgICAgIH0KICAgICAgLy8gU2hpZnQgYSB2YWx1ZSBpbnRvIHRoZSBidWZmZXIKICAgICAgLy8vIEBpbnRlcm5hbAogICAgICBzdG9yZU5vZGUodGVybSwgc3RhcnQsIGVuZCwgc2l6ZSA9IDQsIGlzUmVkdWNlID0gZmFsc2UpIHsKICAgICAgICAgIGlmICh0ZXJtID09IDAgLyogRXJyICovICYmCiAgICAgICAgICAgICAgKCF0aGlzLnN0YWNrLmxlbmd0aCB8fCB0aGlzLnN0YWNrW3RoaXMuc3RhY2subGVuZ3RoIC0gMV0gPCB0aGlzLmJ1ZmZlci5sZW5ndGggKyB0aGlzLmJ1ZmZlckJhc2UpKSB7CiAgICAgICAgICAgICAgLy8gVHJ5IHRvIG9taXQvbWVyZ2UgYWRqYWNlbnQgZXJyb3Igbm9kZXMKICAgICAgICAgICAgICBsZXQgY3VyID0gdGhpcywgdG9wID0gdGhpcy5idWZmZXIubGVuZ3RoOwogICAgICAgICAgICAgIGlmICh0b3AgPT0gMCAmJiBjdXIucGFyZW50KSB7CiAgICAgICAgICAgICAgICAgIHRvcCA9IGN1ci5idWZmZXJCYXNlIC0gY3VyLnBhcmVudC5idWZmZXJCYXNlOwogICAgICAgICAgICAgICAgICBjdXIgPSBjdXIucGFyZW50OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAodG9wID4gMCAmJiBjdXIuYnVmZmVyW3RvcCAtIDRdID09IDAgLyogRXJyICovICYmIGN1ci5idWZmZXJbdG9wIC0gMV0gPiAtMSkgewogICAgICAgICAgICAgICAgICBpZiAoc3RhcnQgPT0gZW5kKQogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICBpZiAoY3VyLmJ1ZmZlclt0b3AgLSAyXSA+PSBzdGFydCkgewogICAgICAgICAgICAgICAgICAgICAgY3VyLmJ1ZmZlclt0b3AgLSAyXSA9IGVuZDsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGlmICghaXNSZWR1Y2UgfHwgdGhpcy5wb3MgPT0gZW5kKSB7IC8vIFNpbXBsZSBjYXNlLCBqdXN0IGFwcGVuZAogICAgICAgICAgICAgIHRoaXMuYnVmZmVyLnB1c2godGVybSwgc3RhcnQsIGVuZCwgc2l6ZSk7CiAgICAgICAgICB9CiAgICAgICAgICBlbHNlIHsgLy8gVGhlcmUgbWF5IGJlIHNraXBwZWQgbm9kZXMgdGhhdCBoYXZlIHRvIGJlIG1vdmVkIGZvcndhcmQKICAgICAgICAgICAgICBsZXQgaW5kZXggPSB0aGlzLmJ1ZmZlci5sZW5ndGg7CiAgICAgICAgICAgICAgaWYgKGluZGV4ID4gMCAmJiB0aGlzLmJ1ZmZlcltpbmRleCAtIDRdICE9IDAgLyogRXJyICovKQogICAgICAgICAgICAgICAgICB3aGlsZSAoaW5kZXggPiAwICYmIHRoaXMuYnVmZmVyW2luZGV4IC0gMl0gPiBlbmQpIHsKICAgICAgICAgICAgICAgICAgICAgIC8vIE1vdmUgdGhpcyByZWNvcmQgZm9yd2FyZAogICAgICAgICAgICAgICAgICAgICAgdGhpcy5idWZmZXJbaW5kZXhdID0gdGhpcy5idWZmZXJbaW5kZXggLSA0XTsKICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYnVmZmVyW2luZGV4ICsgMV0gPSB0aGlzLmJ1ZmZlcltpbmRleCAtIDNdOwogICAgICAgICAgICAgICAgICAgICAgdGhpcy5idWZmZXJbaW5kZXggKyAyXSA9IHRoaXMuYnVmZmVyW2luZGV4IC0gMl07CiAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJ1ZmZlcltpbmRleCArIDNdID0gdGhpcy5idWZmZXJbaW5kZXggLSAxXTsKICAgICAgICAgICAgICAgICAgICAgIGluZGV4IC09IDQ7CiAgICAgICAgICAgICAgICAgICAgICBpZiAoc2l6ZSA+IDQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZSAtPSA0OwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgdGhpcy5idWZmZXJbaW5kZXhdID0gdGVybTsKICAgICAgICAgICAgICB0aGlzLmJ1ZmZlcltpbmRleCArIDFdID0gc3RhcnQ7CiAgICAgICAgICAgICAgdGhpcy5idWZmZXJbaW5kZXggKyAyXSA9IGVuZDsKICAgICAgICAgICAgICB0aGlzLmJ1ZmZlcltpbmRleCArIDNdID0gc2l6ZTsKICAgICAgICAgIH0KICAgICAgfQogICAgICAvLyBBcHBseSBhIHNoaWZ0IGFjdGlvbgogICAgICAvLy8gQGludGVybmFsCiAgICAgIHNoaWZ0KGFjdGlvbiwgbmV4dCwgbmV4dEVuZCkgewogICAgICAgICAgbGV0IHN0YXJ0ID0gdGhpcy5wb3M7CiAgICAgICAgICBpZiAoYWN0aW9uICYgMTMxMDcyIC8qIEdvdG9GbGFnICovKSB7CiAgICAgICAgICAgICAgdGhpcy5wdXNoU3RhdGUoYWN0aW9uICYgNjU1MzUgLyogVmFsdWVNYXNrICovLCB0aGlzLnBvcyk7CiAgICAgICAgICB9CiAgICAgICAgICBlbHNlIGlmICgoYWN0aW9uICYgMjYyMTQ0IC8qIFN0YXlGbGFnICovKSA9PSAwKSB7IC8vIFJlZ3VsYXIgc2hpZnQKICAgICAgICAgICAgICBsZXQgbmV4dFN0YXRlID0gYWN0aW9uLCB7IHBhcnNlciB9ID0gdGhpcy5wOwogICAgICAgICAgICAgIGlmIChuZXh0RW5kID4gdGhpcy5wb3MgfHwgbmV4dCA8PSBwYXJzZXIubWF4Tm9kZSkgewogICAgICAgICAgICAgICAgICB0aGlzLnBvcyA9IG5leHRFbmQ7CiAgICAgICAgICAgICAgICAgIGlmICghcGFyc2VyLnN0YXRlRmxhZyhuZXh0U3RhdGUsIDEgLyogU2tpcHBlZCAqLykpCiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZHVjZVBvcyA9IG5leHRFbmQ7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHRoaXMucHVzaFN0YXRlKG5leHRTdGF0ZSwgc3RhcnQpOwogICAgICAgICAgICAgIHRoaXMuc2hpZnRDb250ZXh0KG5leHQsIHN0YXJ0KTsKICAgICAgICAgICAgICBpZiAobmV4dCA8PSBwYXJzZXIubWF4Tm9kZSkKICAgICAgICAgICAgICAgICAgdGhpcy5idWZmZXIucHVzaChuZXh0LCBzdGFydCwgbmV4dEVuZCwgNCk7CiAgICAgICAgICB9CiAgICAgICAgICBlbHNlIHsgLy8gU2hpZnQtYW5kLXN0YXksIHdoaWNoIG1lYW5zIHRoaXMgaXMgYSBza2lwcGVkIHRva2VuCiAgICAgICAgICAgICAgdGhpcy5wb3MgPSBuZXh0RW5kOwogICAgICAgICAgICAgIHRoaXMuc2hpZnRDb250ZXh0KG5leHQsIHN0YXJ0KTsKICAgICAgICAgICAgICBpZiAobmV4dCA8PSB0aGlzLnAucGFyc2VyLm1heE5vZGUpCiAgICAgICAgICAgICAgICAgIHRoaXMuYnVmZmVyLnB1c2gobmV4dCwgc3RhcnQsIG5leHRFbmQsIDQpOwogICAgICAgICAgfQogICAgICB9CiAgICAgIC8vIEFwcGx5IGFuIGFjdGlvbgogICAgICAvLy8gQGludGVybmFsCiAgICAgIGFwcGx5KGFjdGlvbiwgbmV4dCwgbmV4dEVuZCkgewogICAgICAgICAgaWYgKGFjdGlvbiAmIDY1NTM2IC8qIFJlZHVjZUZsYWcgKi8pCiAgICAgICAgICAgICAgdGhpcy5yZWR1Y2UoYWN0aW9uKTsKICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICB0aGlzLnNoaWZ0KGFjdGlvbiwgbmV4dCwgbmV4dEVuZCk7CiAgICAgIH0KICAgICAgLy8gQWRkIGEgcHJlYnVpbHQgKHJldXNlZCkgbm9kZSBpbnRvIHRoZSBidWZmZXIuCiAgICAgIC8vLyBAaW50ZXJuYWwKICAgICAgdXNlTm9kZSh2YWx1ZSwgbmV4dCkgewogICAgICAgICAgbGV0IGluZGV4ID0gdGhpcy5wLnJldXNlZC5sZW5ndGggLSAxOwogICAgICAgICAgaWYgKGluZGV4IDwgMCB8fCB0aGlzLnAucmV1c2VkW2luZGV4XSAhPSB2YWx1ZSkgewogICAgICAgICAgICAgIHRoaXMucC5yZXVzZWQucHVzaCh2YWx1ZSk7CiAgICAgICAgICAgICAgaW5kZXgrKzsKICAgICAgICAgIH0KICAgICAgICAgIGxldCBzdGFydCA9IHRoaXMucG9zOwogICAgICAgICAgdGhpcy5yZWR1Y2VQb3MgPSB0aGlzLnBvcyA9IHN0YXJ0ICsgdmFsdWUubGVuZ3RoOwogICAgICAgICAgdGhpcy5wdXNoU3RhdGUobmV4dCwgc3RhcnQpOwogICAgICAgICAgdGhpcy5idWZmZXIucHVzaChpbmRleCwgc3RhcnQsIHRoaXMucmVkdWNlUG9zLCAtMSAvKiBzaXplID09IC0xIG1lYW5zIHRoaXMgaXMgYSByZXVzZWQgdmFsdWUgKi8pOwogICAgICAgICAgaWYgKHRoaXMuY3VyQ29udGV4dCkKICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRleHQodGhpcy5jdXJDb250ZXh0LnRyYWNrZXIucmV1c2UodGhpcy5jdXJDb250ZXh0LmNvbnRleHQsIHZhbHVlLCB0aGlzLCB0aGlzLnAuc3RyZWFtLnJlc2V0KHRoaXMucG9zIC0gdmFsdWUubGVuZ3RoKSkpOwogICAgICB9CiAgICAgIC8vIFNwbGl0IHRoZSBzdGFjay4gRHVlIHRvIHRoZSBidWZmZXIgc2hhcmluZyBhbmQgdGhlIGZhY3QKICAgICAgLy8gdGhhdCBgdGhpcy5zdGFja2AgdGVuZHMgdG8gc3RheSBxdWl0ZSBzaGFsbG93LCB0aGlzIGlzbid0IHZlcnkKICAgICAgLy8gZXhwZW5zaXZlLgogICAgICAvLy8gQGludGVybmFsCiAgICAgIHNwbGl0KCkgewogICAgICAgICAgbGV0IHBhcmVudCA9IHRoaXM7CiAgICAgICAgICBsZXQgb2ZmID0gcGFyZW50LmJ1ZmZlci5sZW5ndGg7CiAgICAgICAgICAvLyBCZWNhdXNlIHRoZSB0b3Agb2YgdGhlIGJ1ZmZlciAoYWZ0ZXIgdGhpcy5wb3MpIG1heSBiZSBtdXRhdGVkCiAgICAgICAgICAvLyB0byByZW9yZGVyIHJlZHVjdGlvbnMgYW5kIHNraXBwZWQgdG9rZW5zLCBhbmQgc2hhcmVkIGJ1ZmZlcnMKICAgICAgICAgIC8vIHNob3VsZCBiZSBpbW11dGFibGUsIHRoaXMgY29waWVzIGFueSBvdXRzdGFuZGluZyBza2lwcGVkIHRva2VucwogICAgICAgICAgLy8gdG8gdGhlIG5ldyBidWZmZXIsIGFuZCBwdXRzIHRoZSBiYXNlIHBvaW50ZXIgYmVmb3JlIHRoZW0uCiAgICAgICAgICB3aGlsZSAob2ZmID4gMCAmJiBwYXJlbnQuYnVmZmVyW29mZiAtIDJdID4gcGFyZW50LnJlZHVjZVBvcykKICAgICAgICAgICAgICBvZmYgLT0gNDsKICAgICAgICAgIGxldCBidWZmZXIgPSBwYXJlbnQuYnVmZmVyLnNsaWNlKG9mZiksIGJhc2UgPSBwYXJlbnQuYnVmZmVyQmFzZSArIG9mZjsKICAgICAgICAgIC8vIE1ha2Ugc3VyZSBwYXJlbnQgcG9pbnRzIHRvIGFuIGFjdHVhbCBwYXJlbnQgd2l0aCBjb250ZW50LCBpZiB0aGVyZSBpcyBzdWNoIGEgcGFyZW50LgogICAgICAgICAgd2hpbGUgKHBhcmVudCAmJiBiYXNlID09IHBhcmVudC5idWZmZXJCYXNlKQogICAgICAgICAgICAgIHBhcmVudCA9IHBhcmVudC5wYXJlbnQ7CiAgICAgICAgICByZXR1cm4gbmV3IFN0YWNrKHRoaXMucCwgdGhpcy5zdGFjay5zbGljZSgpLCB0aGlzLnN0YXRlLCB0aGlzLnJlZHVjZVBvcywgdGhpcy5wb3MsIHRoaXMuc2NvcmUsIGJ1ZmZlciwgYmFzZSwgdGhpcy5jdXJDb250ZXh0LCB0aGlzLmxvb2tBaGVhZCwgcGFyZW50KTsKICAgICAgfQogICAgICAvLyBUcnkgdG8gcmVjb3ZlciBmcm9tIGFuIGVycm9yIGJ5ICdkZWxldGluZycgKGlnbm9yaW5nKSBvbmUgdG9rZW4uCiAgICAgIC8vLyBAaW50ZXJuYWwKICAgICAgcmVjb3ZlckJ5RGVsZXRlKG5leHQsIG5leHRFbmQpIHsKICAgICAgICAgIGxldCBpc05vZGUgPSBuZXh0IDw9IHRoaXMucC5wYXJzZXIubWF4Tm9kZTsKICAgICAgICAgIGlmIChpc05vZGUpCiAgICAgICAgICAgICAgdGhpcy5zdG9yZU5vZGUobmV4dCwgdGhpcy5wb3MsIG5leHRFbmQsIDQpOwogICAgICAgICAgdGhpcy5zdG9yZU5vZGUoMCAvKiBFcnIgKi8sIHRoaXMucG9zLCBuZXh0RW5kLCBpc05vZGUgPyA4IDogNCk7CiAgICAgICAgICB0aGlzLnBvcyA9IHRoaXMucmVkdWNlUG9zID0gbmV4dEVuZDsKICAgICAgICAgIHRoaXMuc2NvcmUgLT0gMTkwIC8qIERlbGV0ZSAqLzsKICAgICAgfQogICAgICAvLy8gQ2hlY2sgaWYgdGhlIGdpdmVuIHRlcm0gd291bGQgYmUgYWJsZSB0byBiZSBzaGlmdGVkIChvcHRpb25hbGx5CiAgICAgIC8vLyBhZnRlciBzb21lIHJlZHVjdGlvbnMpIG9uIHRoaXMgc3RhY2suIFRoaXMgY2FuIGJlIHVzZWZ1bCBmb3IKICAgICAgLy8vIGV4dGVybmFsIHRva2VuaXplcnMgdGhhdCB3YW50IHRvIG1ha2Ugc3VyZSB0aGV5IG9ubHkgcHJvdmlkZSBhCiAgICAgIC8vLyBnaXZlbiB0b2tlbiB3aGVuIGl0IGFwcGxpZXMuCiAgICAgIGNhblNoaWZ0KHRlcm0pIHsKICAgICAgICAgIGZvciAobGV0IHNpbSA9IG5ldyBTaW11bGF0ZWRTdGFjayh0aGlzKTs7KSB7CiAgICAgICAgICAgICAgbGV0IGFjdGlvbiA9IHRoaXMucC5wYXJzZXIuc3RhdGVTbG90KHNpbS5zdGF0ZSwgNCAvKiBEZWZhdWx0UmVkdWNlICovKSB8fCB0aGlzLnAucGFyc2VyLmhhc0FjdGlvbihzaW0uc3RhdGUsIHRlcm0pOwogICAgICAgICAgICAgIGlmIChhY3Rpb24gPT0gMCkKICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgIGlmICgoYWN0aW9uICYgNjU1MzYgLyogUmVkdWNlRmxhZyAqLykgPT0gMCkKICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgc2ltLnJlZHVjZShhY3Rpb24pOwogICAgICAgICAgfQogICAgICB9CiAgICAgIC8vIEFwcGx5IHVwIHRvIFJlY292ZXIuTWF4TmV4dCByZWNvdmVyeSBhY3Rpb25zIHRoYXQgY29uY2VwdHVhbGx5CiAgICAgIC8vIGluc2VydHMgc29tZSBtaXNzaW5nIHRva2VuIG9yIHJ1bGUuCiAgICAgIC8vLyBAaW50ZXJuYWwKICAgICAgcmVjb3ZlckJ5SW5zZXJ0KG5leHQpIHsKICAgICAgICAgIGlmICh0aGlzLnN0YWNrLmxlbmd0aCA+PSAzMDAgLyogTWF4SW5zZXJ0U3RhY2tEZXB0aCAqLykKICAgICAgICAgICAgICByZXR1cm4gW107CiAgICAgICAgICBsZXQgbmV4dFN0YXRlcyA9IHRoaXMucC5wYXJzZXIubmV4dFN0YXRlcyh0aGlzLnN0YXRlKTsKICAgICAgICAgIGlmIChuZXh0U3RhdGVzLmxlbmd0aCA+IDQgLyogTWF4TmV4dCAqLyA8PCAxIHx8IHRoaXMuc3RhY2subGVuZ3RoID49IDEyMCAvKiBEYW1wZW5JbnNlcnRTdGFja0RlcHRoICovKSB7CiAgICAgICAgICAgICAgbGV0IGJlc3QgPSBbXTsKICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgczsgaSA8IG5leHRTdGF0ZXMubGVuZ3RoOyBpICs9IDIpIHsKICAgICAgICAgICAgICAgICAgaWYgKChzID0gbmV4dFN0YXRlc1tpICsgMV0pICE9IHRoaXMuc3RhdGUgJiYgdGhpcy5wLnBhcnNlci5oYXNBY3Rpb24ocywgbmV4dCkpCiAgICAgICAgICAgICAgICAgICAgICBiZXN0LnB1c2gobmV4dFN0YXRlc1tpXSwgcyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmICh0aGlzLnN0YWNrLmxlbmd0aCA8IDEyMCAvKiBEYW1wZW5JbnNlcnRTdGFja0RlcHRoICovKQogICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgYmVzdC5sZW5ndGggPCA0IC8qIE1heE5leHQgKi8gPDwgMSAmJiBpIDwgbmV4dFN0YXRlcy5sZW5ndGg7IGkgKz0gMikgewogICAgICAgICAgICAgICAgICAgICAgbGV0IHMgPSBuZXh0U3RhdGVzW2kgKyAxXTsKICAgICAgICAgICAgICAgICAgICAgIGlmICghYmVzdC5zb21lKCh2LCBpKSA9PiAoaSAmIDEpICYmIHYgPT0gcykpCiAgICAgICAgICAgICAgICAgICAgICAgICAgYmVzdC5wdXNoKG5leHRTdGF0ZXNbaV0sIHMpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgbmV4dFN0YXRlcyA9IGJlc3Q7CiAgICAgICAgICB9CiAgICAgICAgICBsZXQgcmVzdWx0ID0gW107CiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5leHRTdGF0ZXMubGVuZ3RoICYmIHJlc3VsdC5sZW5ndGggPCA0IC8qIE1heE5leHQgKi87IGkgKz0gMikgewogICAgICAgICAgICAgIGxldCBzID0gbmV4dFN0YXRlc1tpICsgMV07CiAgICAgICAgICAgICAgaWYgKHMgPT0gdGhpcy5zdGF0ZSkKICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgbGV0IHN0YWNrID0gdGhpcy5zcGxpdCgpOwogICAgICAgICAgICAgIHN0YWNrLnB1c2hTdGF0ZShzLCB0aGlzLnBvcyk7CiAgICAgICAgICAgICAgc3RhY2suc3RvcmVOb2RlKDAgLyogRXJyICovLCBzdGFjay5wb3MsIHN0YWNrLnBvcywgNCwgdHJ1ZSk7CiAgICAgICAgICAgICAgc3RhY2suc2hpZnRDb250ZXh0KG5leHRTdGF0ZXNbaV0sIHRoaXMucG9zKTsKICAgICAgICAgICAgICBzdGFjay5zY29yZSAtPSAyMDAgLyogSW5zZXJ0ICovOwogICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHN0YWNrKTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgIH0KICAgICAgLy8gRm9yY2UgYSByZWR1Y2UsIGlmIHBvc3NpYmxlLiBSZXR1cm4gZmFsc2UgaWYgdGhhdCBjYW4ndAogICAgICAvLyBiZSBkb25lLgogICAgICAvLy8gQGludGVybmFsCiAgICAgIGZvcmNlUmVkdWNlKCkgewogICAgICAgICAgbGV0IHJlZHVjZSA9IHRoaXMucC5wYXJzZXIuc3RhdGVTbG90KHRoaXMuc3RhdGUsIDUgLyogRm9yY2VkUmVkdWNlICovKTsKICAgICAgICAgIGlmICgocmVkdWNlICYgNjU1MzYgLyogUmVkdWNlRmxhZyAqLykgPT0gMCkKICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICBsZXQgeyBwYXJzZXIgfSA9IHRoaXMucDsKICAgICAgICAgIGlmICghcGFyc2VyLnZhbGlkQWN0aW9uKHRoaXMuc3RhdGUsIHJlZHVjZSkpIHsKICAgICAgICAgICAgICBsZXQgZGVwdGggPSByZWR1Y2UgPj4gMTkgLyogUmVkdWNlRGVwdGhTaGlmdCAqLywgdGVybSA9IHJlZHVjZSAmIDY1NTM1IC8qIFZhbHVlTWFzayAqLzsKICAgICAgICAgICAgICBsZXQgdGFyZ2V0ID0gdGhpcy5zdGFjay5sZW5ndGggLSBkZXB0aCAqIDM7CiAgICAgICAgICAgICAgaWYgKHRhcmdldCA8IDAgfHwgcGFyc2VyLmdldEdvdG8odGhpcy5zdGFja1t0YXJnZXRdLCB0ZXJtLCBmYWxzZSkgPCAwKQogICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgdGhpcy5zdG9yZU5vZGUoMCAvKiBFcnIgKi8sIHRoaXMucmVkdWNlUG9zLCB0aGlzLnJlZHVjZVBvcywgNCwgdHJ1ZSk7CiAgICAgICAgICAgICAgdGhpcy5zY29yZSAtPSAxMDAgLyogUmVkdWNlICovOwogICAgICAgICAgfQogICAgICAgICAgdGhpcy5yZWR1Y2VQb3MgPSB0aGlzLnBvczsKICAgICAgICAgIHRoaXMucmVkdWNlKHJlZHVjZSk7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgICAvLy8gQGludGVybmFsCiAgICAgIGZvcmNlQWxsKCkgewogICAgICAgICAgd2hpbGUgKCF0aGlzLnAucGFyc2VyLnN0YXRlRmxhZyh0aGlzLnN0YXRlLCAyIC8qIEFjY2VwdGluZyAqLykpIHsKICAgICAgICAgICAgICBpZiAoIXRoaXMuZm9yY2VSZWR1Y2UoKSkgewogICAgICAgICAgICAgICAgICB0aGlzLnN0b3JlTm9kZSgwIC8qIEVyciAqLywgdGhpcy5wb3MsIHRoaXMucG9zLCA0LCB0cnVlKTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH0KICAgICAgLy8vIENoZWNrIHdoZXRoZXIgdGhpcyBzdGF0ZSBoYXMgbm8gZnVydGhlciBhY3Rpb25zIChhc3N1bWVkIHRvIGJlIGEgZGlyZWN0IGRlc2NlbmRhbnQgb2YgdGhlCiAgICAgIC8vLyB0b3Agc3RhdGUsIHNpbmNlIGFueSBvdGhlciBzdGF0ZXMgbXVzdCBiZSBhYmxlIHRvIGNvbnRpbnVlCiAgICAgIC8vLyBzb21laG93KS4gQGludGVybmFsCiAgICAgIGdldCBkZWFkRW5kKCkgewogICAgICAgICAgaWYgKHRoaXMuc3RhY2subGVuZ3RoICE9IDMpCiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgbGV0IHsgcGFyc2VyIH0gPSB0aGlzLnA7CiAgICAgICAgICByZXR1cm4gcGFyc2VyLmRhdGFbcGFyc2VyLnN0YXRlU2xvdCh0aGlzLnN0YXRlLCAxIC8qIEFjdGlvbnMgKi8pXSA9PSA2NTUzNSAvKiBFbmQgKi8gJiYKICAgICAgICAgICAgICAhcGFyc2VyLnN0YXRlU2xvdCh0aGlzLnN0YXRlLCA0IC8qIERlZmF1bHRSZWR1Y2UgKi8pOwogICAgICB9CiAgICAgIC8vLyBSZXN0YXJ0IHRoZSBzdGFjayAocHV0IGl0IGJhY2sgaW4gaXRzIHN0YXJ0IHN0YXRlKS4gT25seSBzYWZlCiAgICAgIC8vLyB3aGVuIHRoaXMuc3RhY2subGVuZ3RoID09IDMgKHN0YXRlIGlzIGRpcmVjdGx5IGJlbG93IHRoZSB0b3AKICAgICAgLy8vIHN0YXRlKS4gQGludGVybmFsCiAgICAgIHJlc3RhcnQoKSB7CiAgICAgICAgICB0aGlzLnN0YXRlID0gdGhpcy5zdGFja1swXTsKICAgICAgICAgIHRoaXMuc3RhY2subGVuZ3RoID0gMDsKICAgICAgfQogICAgICAvLy8gQGludGVybmFsCiAgICAgIHNhbWVTdGF0ZShvdGhlcikgewogICAgICAgICAgaWYgKHRoaXMuc3RhdGUgIT0gb3RoZXIuc3RhdGUgfHwgdGhpcy5zdGFjay5sZW5ndGggIT0gb3RoZXIuc3RhY2subGVuZ3RoKQogICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zdGFjay5sZW5ndGg7IGkgKz0gMykKICAgICAgICAgICAgICBpZiAodGhpcy5zdGFja1tpXSAhPSBvdGhlci5zdGFja1tpXSkKICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgICAgLy8vIEdldCB0aGUgcGFyc2VyIHVzZWQgYnkgdGhpcyBzdGFjay4KICAgICAgZ2V0IHBhcnNlcigpIHsgcmV0dXJuIHRoaXMucC5wYXJzZXI7IH0KICAgICAgLy8vIFRlc3Qgd2hldGhlciBhIGdpdmVuIGRpYWxlY3QgKGJ5IG51bWVyaWMgSUQsIGFzIGV4cG9ydGVkIGZyb20KICAgICAgLy8vIHRoZSB0ZXJtcyBmaWxlKSBpcyBlbmFibGVkLgogICAgICBkaWFsZWN0RW5hYmxlZChkaWFsZWN0SUQpIHsgcmV0dXJuIHRoaXMucC5wYXJzZXIuZGlhbGVjdC5mbGFnc1tkaWFsZWN0SURdOyB9CiAgICAgIHNoaWZ0Q29udGV4dCh0ZXJtLCBzdGFydCkgewogICAgICAgICAgaWYgKHRoaXMuY3VyQ29udGV4dCkKICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRleHQodGhpcy5jdXJDb250ZXh0LnRyYWNrZXIuc2hpZnQodGhpcy5jdXJDb250ZXh0LmNvbnRleHQsIHRlcm0sIHRoaXMsIHRoaXMucC5zdHJlYW0ucmVzZXQoc3RhcnQpKSk7CiAgICAgIH0KICAgICAgcmVkdWNlQ29udGV4dCh0ZXJtLCBzdGFydCkgewogICAgICAgICAgaWYgKHRoaXMuY3VyQ29udGV4dCkKICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRleHQodGhpcy5jdXJDb250ZXh0LnRyYWNrZXIucmVkdWNlKHRoaXMuY3VyQ29udGV4dC5jb250ZXh0LCB0ZXJtLCB0aGlzLCB0aGlzLnAuc3RyZWFtLnJlc2V0KHN0YXJ0KSkpOwogICAgICB9CiAgICAgIC8vLyBAaW50ZXJuYWwKICAgICAgZW1pdENvbnRleHQoKSB7CiAgICAgICAgICBsZXQgbGFzdCA9IHRoaXMuYnVmZmVyLmxlbmd0aCAtIDE7CiAgICAgICAgICBpZiAobGFzdCA8IDAgfHwgdGhpcy5idWZmZXJbbGFzdF0gIT0gLTMpCiAgICAgICAgICAgICAgdGhpcy5idWZmZXIucHVzaCh0aGlzLmN1ckNvbnRleHQuaGFzaCwgdGhpcy5yZWR1Y2VQb3MsIHRoaXMucmVkdWNlUG9zLCAtMyk7CiAgICAgIH0KICAgICAgLy8vIEBpbnRlcm5hbAogICAgICBlbWl0TG9va0FoZWFkKCkgewogICAgICAgICAgbGV0IGxhc3QgPSB0aGlzLmJ1ZmZlci5sZW5ndGggLSAxOwogICAgICAgICAgaWYgKGxhc3QgPCAwIHx8IHRoaXMuYnVmZmVyW2xhc3RdICE9IC00KQogICAgICAgICAgICAgIHRoaXMuYnVmZmVyLnB1c2godGhpcy5sb29rQWhlYWQsIHRoaXMucmVkdWNlUG9zLCB0aGlzLnJlZHVjZVBvcywgLTQpOwogICAgICB9CiAgICAgIHVwZGF0ZUNvbnRleHQoY29udGV4dCkgewogICAgICAgICAgaWYgKGNvbnRleHQgIT0gdGhpcy5jdXJDb250ZXh0LmNvbnRleHQpIHsKICAgICAgICAgICAgICBsZXQgbmV3Q3ggPSBuZXcgU3RhY2tDb250ZXh0KHRoaXMuY3VyQ29udGV4dC50cmFja2VyLCBjb250ZXh0KTsKICAgICAgICAgICAgICBpZiAobmV3Q3guaGFzaCAhPSB0aGlzLmN1ckNvbnRleHQuaGFzaCkKICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0Q29udGV4dCgpOwogICAgICAgICAgICAgIHRoaXMuY3VyQ29udGV4dCA9IG5ld0N4OwogICAgICAgICAgfQogICAgICB9CiAgICAgIC8vLyBAaW50ZXJuYWwKICAgICAgc2V0TG9va0FoZWFkKGxvb2tBaGVhZCkgewogICAgICAgICAgaWYgKGxvb2tBaGVhZCA+IHRoaXMubG9va0FoZWFkKSB7CiAgICAgICAgICAgICAgdGhpcy5lbWl0TG9va0FoZWFkKCk7CiAgICAgICAgICAgICAgdGhpcy5sb29rQWhlYWQgPSBsb29rQWhlYWQ7CiAgICAgICAgICB9CiAgICAgIH0KICAgICAgLy8vIEBpbnRlcm5hbAogICAgICBjbG9zZSgpIHsKICAgICAgICAgIGlmICh0aGlzLmN1ckNvbnRleHQgJiYgdGhpcy5jdXJDb250ZXh0LnRyYWNrZXIuc3RyaWN0KQogICAgICAgICAgICAgIHRoaXMuZW1pdENvbnRleHQoKTsKICAgICAgICAgIGlmICh0aGlzLmxvb2tBaGVhZCA+IDApCiAgICAgICAgICAgICAgdGhpcy5lbWl0TG9va0FoZWFkKCk7CiAgICAgIH0KICB9CiAgY2xhc3MgU3RhY2tDb250ZXh0IHsKICAgICAgY29uc3RydWN0b3IodHJhY2tlciwgY29udGV4dCkgewogICAgICAgICAgdGhpcy50cmFja2VyID0gdHJhY2tlcjsKICAgICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7CiAgICAgICAgICB0aGlzLmhhc2ggPSB0cmFja2VyLnN0cmljdCA/IHRyYWNrZXIuaGFzaChjb250ZXh0KSA6IDA7CiAgICAgIH0KICB9CiAgdmFyIFJlY292ZXI7CiAgKGZ1bmN0aW9uIChSZWNvdmVyKSB7CiAgICAgIFJlY292ZXJbUmVjb3ZlclsiSW5zZXJ0Il0gPSAyMDBdID0gIkluc2VydCI7CiAgICAgIFJlY292ZXJbUmVjb3ZlclsiRGVsZXRlIl0gPSAxOTBdID0gIkRlbGV0ZSI7CiAgICAgIFJlY292ZXJbUmVjb3ZlclsiUmVkdWNlIl0gPSAxMDBdID0gIlJlZHVjZSI7CiAgICAgIFJlY292ZXJbUmVjb3ZlclsiTWF4TmV4dCJdID0gNF0gPSAiTWF4TmV4dCI7CiAgICAgIFJlY292ZXJbUmVjb3ZlclsiTWF4SW5zZXJ0U3RhY2tEZXB0aCJdID0gMzAwXSA9ICJNYXhJbnNlcnRTdGFja0RlcHRoIjsKICAgICAgUmVjb3ZlcltSZWNvdmVyWyJEYW1wZW5JbnNlcnRTdGFja0RlcHRoIl0gPSAxMjBdID0gIkRhbXBlbkluc2VydFN0YWNrRGVwdGgiOwogIH0pKFJlY292ZXIgfHwgKFJlY292ZXIgPSB7fSkpOwogIC8vIFVzZWQgdG8gY2hlYXBseSBydW4gc29tZSByZWR1Y3Rpb25zIHRvIHNjYW4gYWhlYWQgd2l0aG91dCBtdXRhdGluZwogIC8vIGFuIGVudGlyZSBzdGFjawogIGNsYXNzIFNpbXVsYXRlZFN0YWNrIHsKICAgICAgY29uc3RydWN0b3Ioc3RhcnQpIHsKICAgICAgICAgIHRoaXMuc3RhcnQgPSBzdGFydDsKICAgICAgICAgIHRoaXMuc3RhdGUgPSBzdGFydC5zdGF0ZTsKICAgICAgICAgIHRoaXMuc3RhY2sgPSBzdGFydC5zdGFjazsKICAgICAgICAgIHRoaXMuYmFzZSA9IHRoaXMuc3RhY2subGVuZ3RoOwogICAgICB9CiAgICAgIHJlZHVjZShhY3Rpb24pIHsKICAgICAgICAgIGxldCB0ZXJtID0gYWN0aW9uICYgNjU1MzUgLyogVmFsdWVNYXNrICovLCBkZXB0aCA9IGFjdGlvbiA+PiAxOSAvKiBSZWR1Y2VEZXB0aFNoaWZ0ICovOwogICAgICAgICAgaWYgKGRlcHRoID09IDApIHsKICAgICAgICAgICAgICBpZiAodGhpcy5zdGFjayA9PSB0aGlzLnN0YXJ0LnN0YWNrKQogICAgICAgICAgICAgICAgICB0aGlzLnN0YWNrID0gdGhpcy5zdGFjay5zbGljZSgpOwogICAgICAgICAgICAgIHRoaXMuc3RhY2sucHVzaCh0aGlzLnN0YXRlLCAwLCAwKTsKICAgICAgICAgICAgICB0aGlzLmJhc2UgKz0gMzsKICAgICAgICAgIH0KICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgIHRoaXMuYmFzZSAtPSAoZGVwdGggLSAxKSAqIDM7CiAgICAgICAgICB9CiAgICAgICAgICBsZXQgZ290byA9IHRoaXMuc3RhcnQucC5wYXJzZXIuZ2V0R290byh0aGlzLnN0YWNrW3RoaXMuYmFzZSAtIDNdLCB0ZXJtLCB0cnVlKTsKICAgICAgICAgIHRoaXMuc3RhdGUgPSBnb3RvOwogICAgICB9CiAgfQogIC8vIFRoaXMgaXMgZ2l2ZW4gdG8gYFRyZWUuYnVpbGRgIHRvIGJ1aWxkIGEgYnVmZmVyLCBhbmQgZW5jYXBzdWxhdGVzCiAgLy8gdGhlIHBhcmVudC1zdGFjay13YWxraW5nIG5lY2Vzc2FyeSB0byByZWFkIHRoZSBub2Rlcy4KICBjbGFzcyBTdGFja0J1ZmZlckN1cnNvciB7CiAgICAgIGNvbnN0cnVjdG9yKHN0YWNrLCBwb3MsIGluZGV4KSB7CiAgICAgICAgICB0aGlzLnN0YWNrID0gc3RhY2s7CiAgICAgICAgICB0aGlzLnBvcyA9IHBvczsKICAgICAgICAgIHRoaXMuaW5kZXggPSBpbmRleDsKICAgICAgICAgIHRoaXMuYnVmZmVyID0gc3RhY2suYnVmZmVyOwogICAgICAgICAgaWYgKHRoaXMuaW5kZXggPT0gMCkKICAgICAgICAgICAgICB0aGlzLm1heWJlTmV4dCgpOwogICAgICB9CiAgICAgIHN0YXRpYyBjcmVhdGUoc3RhY2ssIHBvcyA9IHN0YWNrLmJ1ZmZlckJhc2UgKyBzdGFjay5idWZmZXIubGVuZ3RoKSB7CiAgICAgICAgICByZXR1cm4gbmV3IFN0YWNrQnVmZmVyQ3Vyc29yKHN0YWNrLCBwb3MsIHBvcyAtIHN0YWNrLmJ1ZmZlckJhc2UpOwogICAgICB9CiAgICAgIG1heWJlTmV4dCgpIHsKICAgICAgICAgIGxldCBuZXh0ID0gdGhpcy5zdGFjay5wYXJlbnQ7CiAgICAgICAgICBpZiAobmV4dCAhPSBudWxsKSB7CiAgICAgICAgICAgICAgdGhpcy5pbmRleCA9IHRoaXMuc3RhY2suYnVmZmVyQmFzZSAtIG5leHQuYnVmZmVyQmFzZTsKICAgICAgICAgICAgICB0aGlzLnN0YWNrID0gbmV4dDsKICAgICAgICAgICAgICB0aGlzLmJ1ZmZlciA9IG5leHQuYnVmZmVyOwogICAgICAgICAgfQogICAgICB9CiAgICAgIGdldCBpZCgpIHsgcmV0dXJuIHRoaXMuYnVmZmVyW3RoaXMuaW5kZXggLSA0XTsgfQogICAgICBnZXQgc3RhcnQoKSB7IHJldHVybiB0aGlzLmJ1ZmZlclt0aGlzLmluZGV4IC0gM107IH0KICAgICAgZ2V0IGVuZCgpIHsgcmV0dXJuIHRoaXMuYnVmZmVyW3RoaXMuaW5kZXggLSAyXTsgfQogICAgICBnZXQgc2l6ZSgpIHsgcmV0dXJuIHRoaXMuYnVmZmVyW3RoaXMuaW5kZXggLSAxXTsgfQogICAgICBuZXh0KCkgewogICAgICAgICAgdGhpcy5pbmRleCAtPSA0OwogICAgICAgICAgdGhpcy5wb3MgLT0gNDsKICAgICAgICAgIGlmICh0aGlzLmluZGV4ID09IDApCiAgICAgICAgICAgICAgdGhpcy5tYXliZU5leHQoKTsKICAgICAgfQogICAgICBmb3JrKCkgewogICAgICAgICAgcmV0dXJuIG5ldyBTdGFja0J1ZmZlckN1cnNvcih0aGlzLnN0YWNrLCB0aGlzLnBvcywgdGhpcy5pbmRleCk7CiAgICAgIH0KICB9CgogIGNsYXNzIENhY2hlZFRva2VuIHsKICAgICAgY29uc3RydWN0b3IoKSB7CiAgICAgICAgICB0aGlzLnN0YXJ0ID0gLTE7CiAgICAgICAgICB0aGlzLnZhbHVlID0gLTE7CiAgICAgICAgICB0aGlzLmVuZCA9IC0xOwogICAgICAgICAgdGhpcy5leHRlbmRlZCA9IC0xOwogICAgICAgICAgdGhpcy5sb29rQWhlYWQgPSAwOwogICAgICAgICAgdGhpcy5tYXNrID0gMDsKICAgICAgICAgIHRoaXMuY29udGV4dCA9IDA7CiAgICAgIH0KICB9CiAgY29uc3QgbnVsbFRva2VuID0gbmV3IENhY2hlZFRva2VuOwogIC8vLyBbVG9rZW5pemVyc10oI2xyLkV4dGVybmFsVG9rZW5pemVyKSBpbnRlcmFjdCB3aXRoIHRoZSBpbnB1dAogIC8vLyB0aHJvdWdoIHRoaXMgaW50ZXJmYWNlLiBJdCBwcmVzZW50cyB0aGUgaW5wdXQgYXMgYSBzdHJlYW0gb2YKICAvLy8gY2hhcmFjdGVycywgdHJhY2tpbmcgbG9va2FoZWFkIGFuZCBoaWRpbmcgdGhlIGNvbXBsZXhpdHkgb2YKICAvLy8gW3Jhbmdlc10oI2NvbW1vbi5QYXJzZXIucGFyc2VecmFuZ2VzKSBmcm9tIHRva2VuaXplciBjb2RlLgogIGNsYXNzIElucHV0U3RyZWFtIHsKICAgICAgLy8vIEBpbnRlcm5hbAogICAgICBjb25zdHJ1Y3RvcigKICAgICAgLy8vIEBpbnRlcm5hbAogICAgICBpbnB1dCwgCiAgICAgIC8vLyBAaW50ZXJuYWwKICAgICAgcmFuZ2VzKSB7CiAgICAgICAgICB0aGlzLmlucHV0ID0gaW5wdXQ7CiAgICAgICAgICB0aGlzLnJhbmdlcyA9IHJhbmdlczsKICAgICAgICAgIC8vLyBAaW50ZXJuYWwKICAgICAgICAgIHRoaXMuY2h1bmsgPSAiIjsKICAgICAgICAgIC8vLyBAaW50ZXJuYWwKICAgICAgICAgIHRoaXMuY2h1bmtPZmYgPSAwOwogICAgICAgICAgLy8vIEJhY2t1cCBjaHVuawogICAgICAgICAgdGhpcy5jaHVuazIgPSAiIjsKICAgICAgICAgIHRoaXMuY2h1bmsyUG9zID0gMDsKICAgICAgICAgIC8vLyBUaGUgY2hhcmFjdGVyIGNvZGUgb2YgdGhlIG5leHQgY29kZSB1bml0IGluIHRoZSBpbnB1dCwgb3IgLTEKICAgICAgICAgIC8vLyB3aGVuIHRoZSBzdHJlYW0gaXMgYXQgdGhlIGVuZCBvZiB0aGUgaW5wdXQuCiAgICAgICAgICB0aGlzLm5leHQgPSAtMTsKICAgICAgICAgIC8vLyBAaW50ZXJuYWwKICAgICAgICAgIHRoaXMudG9rZW4gPSBudWxsVG9rZW47CiAgICAgICAgICB0aGlzLnJhbmdlSW5kZXggPSAwOwogICAgICAgICAgdGhpcy5wb3MgPSB0aGlzLmNodW5rUG9zID0gcmFuZ2VzWzBdLmZyb207CiAgICAgICAgICB0aGlzLnJhbmdlID0gcmFuZ2VzWzBdOwogICAgICAgICAgdGhpcy5lbmQgPSByYW5nZXNbcmFuZ2VzLmxlbmd0aCAtIDFdLnRvOwogICAgICAgICAgdGhpcy5yZWFkTmV4dCgpOwogICAgICB9CiAgICAgIC8vLyBAaW50ZXJuYWwKICAgICAgcmVzb2x2ZU9mZnNldChvZmZzZXQsIGFzc29jKSB7CiAgICAgICAgICBsZXQgcmFuZ2UgPSB0aGlzLnJhbmdlLCBpbmRleCA9IHRoaXMucmFuZ2VJbmRleDsKICAgICAgICAgIGxldCBwb3MgPSB0aGlzLnBvcyArIG9mZnNldDsKICAgICAgICAgIHdoaWxlIChwb3MgPCByYW5nZS5mcm9tKSB7CiAgICAgICAgICAgICAgaWYgKCFpbmRleCkKICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgICAgbGV0IG5leHQgPSB0aGlzLnJhbmdlc1stLWluZGV4XTsKICAgICAgICAgICAgICBwb3MgLT0gcmFuZ2UuZnJvbSAtIG5leHQudG87CiAgICAgICAgICAgICAgcmFuZ2UgPSBuZXh0OwogICAgICAgICAgfQogICAgICAgICAgd2hpbGUgKGFzc29jIDwgMCA/IHBvcyA+IHJhbmdlLnRvIDogcG9zID49IHJhbmdlLnRvKSB7CiAgICAgICAgICAgICAgaWYgKGluZGV4ID09IHRoaXMucmFuZ2VzLmxlbmd0aCAtIDEpCiAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICAgIGxldCBuZXh0ID0gdGhpcy5yYW5nZXNbKytpbmRleF07CiAgICAgICAgICAgICAgcG9zICs9IG5leHQuZnJvbSAtIHJhbmdlLnRvOwogICAgICAgICAgICAgIHJhbmdlID0gbmV4dDsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBwb3M7CiAgICAgIH0KICAgICAgLy8vIEBpbnRlcm5hbAogICAgICBjbGlwUG9zKHBvcykgewogICAgICAgICAgaWYgKHBvcyA+PSB0aGlzLnJhbmdlLmZyb20gJiYgcG9zIDwgdGhpcy5yYW5nZS50bykKICAgICAgICAgICAgICByZXR1cm4gcG9zOwogICAgICAgICAgZm9yIChsZXQgcmFuZ2Ugb2YgdGhpcy5yYW5nZXMpCiAgICAgICAgICAgICAgaWYgKHJhbmdlLnRvID4gcG9zKQogICAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5tYXgocG9zLCByYW5nZS5mcm9tKTsKICAgICAgICAgIHJldHVybiB0aGlzLmVuZDsKICAgICAgfQogICAgICAvLy8gTG9vayBhdCBhIGNvZGUgdW5pdCBuZWFyIHRoZSBzdHJlYW0gcG9zaXRpb24uIGAucGVlaygwKWAgZXF1YWxzCiAgICAgIC8vLyBgLm5leHRgLCBgLnBlZWsoLTEpYCBnaXZlcyB5b3UgdGhlIHByZXZpb3VzIGNoYXJhY3RlciwgYW5kIHNvCiAgICAgIC8vLyBvbi4KICAgICAgLy8vCiAgICAgIC8vLyBOb3RlIHRoYXQgbG9va2luZyBhcm91bmQgZHVyaW5nIHRva2VuaXppbmcgY3JlYXRlcyBkZXBlbmRlbmNpZXMKICAgICAgLy8vIG9uIHBvdGVudGlhbGx5IGZhci1hd2F5IGNvbnRlbnQsIHdoaWNoIG1heSByZWR1Y2UgdGhlCiAgICAgIC8vLyBlZmZlY3RpdmVuZXNzIGluY3JlbWVudGFsIHBhcnNpbmfigJR3aGVuIGxvb2tpbmcgZm9yd2FyZOKAlG9yIGV2ZW4KICAgICAgLy8vIGNhdXNlIGludmFsaWQgcmVwYXJzZXMgd2hlbiBsb29raW5nIGJhY2t3YXJkIG1vcmUgdGhhbiAyNSBjb2RlCiAgICAgIC8vLyB1bml0cywgc2luY2UgdGhlIGxpYnJhcnkgZG9lcyBub3QgdHJhY2sgbG9va2JlaGluZC4KICAgICAgcGVlayhvZmZzZXQpIHsKICAgICAgICAgIGxldCBpZHggPSB0aGlzLmNodW5rT2ZmICsgb2Zmc2V0LCBwb3MsIHJlc3VsdDsKICAgICAgICAgIGlmIChpZHggPj0gMCAmJiBpZHggPCB0aGlzLmNodW5rLmxlbmd0aCkgewogICAgICAgICAgICAgIHBvcyA9IHRoaXMucG9zICsgb2Zmc2V0OwogICAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMuY2h1bmsuY2hhckNvZGVBdChpZHgpOwogICAgICAgICAgfQogICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgbGV0IHJlc29sdmVkID0gdGhpcy5yZXNvbHZlT2Zmc2V0KG9mZnNldCwgMSk7CiAgICAgICAgICAgICAgaWYgKHJlc29sdmVkID09IG51bGwpCiAgICAgICAgICAgICAgICAgIHJldHVybiAtMTsKICAgICAgICAgICAgICBwb3MgPSByZXNvbHZlZDsKICAgICAgICAgICAgICBpZiAocG9zID49IHRoaXMuY2h1bmsyUG9zICYmIHBvcyA8IHRoaXMuY2h1bmsyUG9zICsgdGhpcy5jaHVuazIubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMuY2h1bmsyLmNoYXJDb2RlQXQocG9zIC0gdGhpcy5jaHVuazJQb3MpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgbGV0IGkgPSB0aGlzLnJhbmdlSW5kZXgsIHJhbmdlID0gdGhpcy5yYW5nZTsKICAgICAgICAgICAgICAgICAgd2hpbGUgKHJhbmdlLnRvIDw9IHBvcykKICAgICAgICAgICAgICAgICAgICAgIHJhbmdlID0gdGhpcy5yYW5nZXNbKytpXTsKICAgICAgICAgICAgICAgICAgdGhpcy5jaHVuazIgPSB0aGlzLmlucHV0LmNodW5rKHRoaXMuY2h1bmsyUG9zID0gcG9zKTsKICAgICAgICAgICAgICAgICAgaWYgKHBvcyArIHRoaXMuY2h1bmsyLmxlbmd0aCA+IHJhbmdlLnRvKQogICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaHVuazIgPSB0aGlzLmNodW5rMi5zbGljZSgwLCByYW5nZS50byAtIHBvcyk7CiAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMuY2h1bmsyLmNoYXJDb2RlQXQoMCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgaWYgKHBvcyA+PSB0aGlzLnRva2VuLmxvb2tBaGVhZCkKICAgICAgICAgICAgICB0aGlzLnRva2VuLmxvb2tBaGVhZCA9IHBvcyArIDE7CiAgICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICB9CiAgICAgIC8vLyBBY2NlcHQgYSB0b2tlbi4gQnkgZGVmYXVsdCwgdGhlIGVuZCBvZiB0aGUgdG9rZW4gaXMgc2V0IHRvIHRoZQogICAgICAvLy8gY3VycmVudCBzdHJlYW0gcG9zaXRpb24sIGJ1dCB5b3UgY2FuIHBhc3MgYW4gb2Zmc2V0IChyZWxhdGl2ZSB0bwogICAgICAvLy8gdGhlIHN0cmVhbSBwb3NpdGlvbikgdG8gY2hhbmdlIHRoYXQuCiAgICAgIGFjY2VwdFRva2VuKHRva2VuLCBlbmRPZmZzZXQgPSAwKSB7CiAgICAgICAgICBsZXQgZW5kID0gZW5kT2Zmc2V0ID8gdGhpcy5yZXNvbHZlT2Zmc2V0KGVuZE9mZnNldCwgLTEpIDogdGhpcy5wb3M7CiAgICAgICAgICBpZiAoZW5kID09IG51bGwgfHwgZW5kIDwgdGhpcy50b2tlbi5zdGFydCkKICAgICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVG9rZW4gZW5kIG91dCBvZiBib3VuZHMiKTsKICAgICAgICAgIHRoaXMudG9rZW4udmFsdWUgPSB0b2tlbjsKICAgICAgICAgIHRoaXMudG9rZW4uZW5kID0gZW5kOwogICAgICB9CiAgICAgIGdldENodW5rKCkgewogICAgICAgICAgaWYgKHRoaXMucG9zID49IHRoaXMuY2h1bmsyUG9zICYmIHRoaXMucG9zIDwgdGhpcy5jaHVuazJQb3MgKyB0aGlzLmNodW5rMi5sZW5ndGgpIHsKICAgICAgICAgICAgICBsZXQgeyBjaHVuaywgY2h1bmtQb3MgfSA9IHRoaXM7CiAgICAgICAgICAgICAgdGhpcy5jaHVuayA9IHRoaXMuY2h1bmsyOwogICAgICAgICAgICAgIHRoaXMuY2h1bmtQb3MgPSB0aGlzLmNodW5rMlBvczsKICAgICAgICAgICAgICB0aGlzLmNodW5rMiA9IGNodW5rOwogICAgICAgICAgICAgIHRoaXMuY2h1bmsyUG9zID0gY2h1bmtQb3M7CiAgICAgICAgICAgICAgdGhpcy5jaHVua09mZiA9IHRoaXMucG9zIC0gdGhpcy5jaHVua1BvczsKICAgICAgICAgIH0KICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgIHRoaXMuY2h1bmsyID0gdGhpcy5jaHVuazsKICAgICAgICAgICAgICB0aGlzLmNodW5rMlBvcyA9IHRoaXMuY2h1bmtQb3M7CiAgICAgICAgICAgICAgbGV0IG5leHRDaHVuayA9IHRoaXMuaW5wdXQuY2h1bmsodGhpcy5wb3MpOwogICAgICAgICAgICAgIGxldCBlbmQgPSB0aGlzLnBvcyArIG5leHRDaHVuay5sZW5ndGg7CiAgICAgICAgICAgICAgdGhpcy5jaHVuayA9IGVuZCA+IHRoaXMucmFuZ2UudG8gPyBuZXh0Q2h1bmsuc2xpY2UoMCwgdGhpcy5yYW5nZS50byAtIHRoaXMucG9zKSA6IG5leHRDaHVuazsKICAgICAgICAgICAgICB0aGlzLmNodW5rUG9zID0gdGhpcy5wb3M7CiAgICAgICAgICAgICAgdGhpcy5jaHVua09mZiA9IDA7CiAgICAgICAgICB9CiAgICAgIH0KICAgICAgcmVhZE5leHQoKSB7CiAgICAgICAgICBpZiAodGhpcy5jaHVua09mZiA+PSB0aGlzLmNodW5rLmxlbmd0aCkgewogICAgICAgICAgICAgIHRoaXMuZ2V0Q2h1bmsoKTsKICAgICAgICAgICAgICBpZiAodGhpcy5jaHVua09mZiA9PSB0aGlzLmNodW5rLmxlbmd0aCkKICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubmV4dCA9IC0xOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHRoaXMubmV4dCA9IHRoaXMuY2h1bmsuY2hhckNvZGVBdCh0aGlzLmNodW5rT2ZmKTsKICAgICAgfQogICAgICAvLy8gTW92ZSB0aGUgc3RyZWFtIGZvcndhcmQgTiAoZGVmYXVsdHMgdG8gMSkgY29kZSB1bml0cy4gUmV0dXJucwogICAgICAvLy8gdGhlIG5ldyB2YWx1ZSBvZiBbYG5leHRgXSgjbHIuSW5wdXRTdHJlYW0ubmV4dCkuCiAgICAgIGFkdmFuY2UobiA9IDEpIHsKICAgICAgICAgIHRoaXMuY2h1bmtPZmYgKz0gbjsKICAgICAgICAgIHdoaWxlICh0aGlzLnBvcyArIG4gPj0gdGhpcy5yYW5nZS50bykgewogICAgICAgICAgICAgIGlmICh0aGlzLnJhbmdlSW5kZXggPT0gdGhpcy5yYW5nZXMubGVuZ3RoIC0gMSkKICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2V0RG9uZSgpOwogICAgICAgICAgICAgIG4gLT0gdGhpcy5yYW5nZS50byAtIHRoaXMucG9zOwogICAgICAgICAgICAgIHRoaXMucmFuZ2UgPSB0aGlzLnJhbmdlc1srK3RoaXMucmFuZ2VJbmRleF07CiAgICAgICAgICAgICAgdGhpcy5wb3MgPSB0aGlzLnJhbmdlLmZyb207CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLnBvcyArPSBuOwogICAgICAgICAgaWYgKHRoaXMucG9zID49IHRoaXMudG9rZW4ubG9va0FoZWFkKQogICAgICAgICAgICAgIHRoaXMudG9rZW4ubG9va0FoZWFkID0gdGhpcy5wb3MgKyAxOwogICAgICAgICAgcmV0dXJuIHRoaXMucmVhZE5leHQoKTsKICAgICAgfQogICAgICBzZXREb25lKCkgewogICAgICAgICAgdGhpcy5wb3MgPSB0aGlzLmNodW5rUG9zID0gdGhpcy5lbmQ7CiAgICAgICAgICB0aGlzLnJhbmdlID0gdGhpcy5yYW5nZXNbdGhpcy5yYW5nZUluZGV4ID0gdGhpcy5yYW5nZXMubGVuZ3RoIC0gMV07CiAgICAgICAgICB0aGlzLmNodW5rID0gIiI7CiAgICAgICAgICByZXR1cm4gdGhpcy5uZXh0ID0gLTE7CiAgICAgIH0KICAgICAgLy8vIEBpbnRlcm5hbAogICAgICByZXNldChwb3MsIHRva2VuKSB7CiAgICAgICAgICBpZiAodG9rZW4pIHsKICAgICAgICAgICAgICB0aGlzLnRva2VuID0gdG9rZW47CiAgICAgICAgICAgICAgdG9rZW4uc3RhcnQgPSBwb3M7CiAgICAgICAgICAgICAgdG9rZW4ubG9va0FoZWFkID0gcG9zICsgMTsKICAgICAgICAgICAgICB0b2tlbi52YWx1ZSA9IHRva2VuLmV4dGVuZGVkID0gLTE7CiAgICAgICAgICB9CiAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICB0aGlzLnRva2VuID0gbnVsbFRva2VuOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHRoaXMucG9zICE9IHBvcykgewogICAgICAgICAgICAgIHRoaXMucG9zID0gcG9zOwogICAgICAgICAgICAgIGlmIChwb3MgPT0gdGhpcy5lbmQpIHsKICAgICAgICAgICAgICAgICAgdGhpcy5zZXREb25lKCk7CiAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB3aGlsZSAocG9zIDwgdGhpcy5yYW5nZS5mcm9tKQogICAgICAgICAgICAgICAgICB0aGlzLnJhbmdlID0gdGhpcy5yYW5nZXNbLS10aGlzLnJhbmdlSW5kZXhdOwogICAgICAgICAgICAgIHdoaWxlIChwb3MgPj0gdGhpcy5yYW5nZS50bykKICAgICAgICAgICAgICAgICAgdGhpcy5yYW5nZSA9IHRoaXMucmFuZ2VzWysrdGhpcy5yYW5nZUluZGV4XTsKICAgICAgICAgICAgICBpZiAocG9zID49IHRoaXMuY2h1bmtQb3MgJiYgcG9zIDwgdGhpcy5jaHVua1BvcyArIHRoaXMuY2h1bmsubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgIHRoaXMuY2h1bmtPZmYgPSBwb3MgLSB0aGlzLmNodW5rUG9zOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgdGhpcy5jaHVuayA9ICIiOwogICAgICAgICAgICAgICAgICB0aGlzLmNodW5rT2ZmID0gMDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgdGhpcy5yZWFkTmV4dCgpOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH0KICAgICAgLy8vIEBpbnRlcm5hbAogICAgICByZWFkKGZyb20sIHRvKSB7CiAgICAgICAgICBpZiAoZnJvbSA+PSB0aGlzLmNodW5rUG9zICYmIHRvIDw9IHRoaXMuY2h1bmtQb3MgKyB0aGlzLmNodW5rLmxlbmd0aCkKICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jaHVuay5zbGljZShmcm9tIC0gdGhpcy5jaHVua1BvcywgdG8gLSB0aGlzLmNodW5rUG9zKTsKICAgICAgICAgIGlmIChmcm9tID49IHRoaXMuY2h1bmsyUG9zICYmIHRvIDw9IHRoaXMuY2h1bmsyUG9zICsgdGhpcy5jaHVuazIubGVuZ3RoKQogICAgICAgICAgICAgIHJldHVybiB0aGlzLmNodW5rMi5zbGljZShmcm9tIC0gdGhpcy5jaHVuazJQb3MsIHRvIC0gdGhpcy5jaHVuazJQb3MpOwogICAgICAgICAgaWYgKGZyb20gPj0gdGhpcy5yYW5nZS5mcm9tICYmIHRvIDw9IHRoaXMucmFuZ2UudG8pCiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5wdXQucmVhZChmcm9tLCB0byk7CiAgICAgICAgICBsZXQgcmVzdWx0ID0gIiI7CiAgICAgICAgICBmb3IgKGxldCByIG9mIHRoaXMucmFuZ2VzKSB7CiAgICAgICAgICAgICAgaWYgKHIuZnJvbSA+PSB0bykKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgaWYgKHIudG8gPiBmcm9tKQogICAgICAgICAgICAgICAgICByZXN1bHQgKz0gdGhpcy5pbnB1dC5yZWFkKE1hdGgubWF4KHIuZnJvbSwgZnJvbSksIE1hdGgubWluKHIudG8sIHRvKSk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICB9CiAgfQogIC8vLyBAaW50ZXJuYWwKICBjbGFzcyBUb2tlbkdyb3VwIHsKICAgICAgY29uc3RydWN0b3IoZGF0YSwgaWQpIHsKICAgICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7CiAgICAgICAgICB0aGlzLmlkID0gaWQ7CiAgICAgIH0KICAgICAgdG9rZW4oaW5wdXQsIHN0YWNrKSB7IHJlYWRUb2tlbih0aGlzLmRhdGEsIGlucHV0LCBzdGFjaywgdGhpcy5pZCk7IH0KICB9CiAgVG9rZW5Hcm91cC5wcm90b3R5cGUuY29udGV4dHVhbCA9IFRva2VuR3JvdXAucHJvdG90eXBlLmZhbGxiYWNrID0gVG9rZW5Hcm91cC5wcm90b3R5cGUuZXh0ZW5kID0gZmFsc2U7CiAgLy8vIGBAZXh0ZXJuYWwgdG9rZW5zYCBkZWNsYXJhdGlvbnMgaW4gdGhlIGdyYW1tYXIgc2hvdWxkIHJlc29sdmUgdG8KICAvLy8gYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy4KICBjbGFzcyBFeHRlcm5hbFRva2VuaXplciB7CiAgICAgIC8vLyBDcmVhdGUgYSB0b2tlbml6ZXIuIFRoZSBmaXJzdCBhcmd1bWVudCBpcyB0aGUgZnVuY3Rpb24gdGhhdCwKICAgICAgLy8vIGdpdmVuIGFuIGlucHV0IHN0cmVhbSwgc2NhbnMgZm9yIHRoZSB0eXBlcyBvZiB0b2tlbnMgaXQKICAgICAgLy8vIHJlY29nbml6ZXMgYXQgdGhlIHN0cmVhbSdzIHBvc2l0aW9uLCBhbmQgY2FsbHMKICAgICAgLy8vIFtgYWNjZXB0VG9rZW5gXSgjbHIuSW5wdXRTdHJlYW0uYWNjZXB0VG9rZW4pIHdoZW4gaXQgZmluZHMKICAgICAgLy8vIG9uZS4KICAgICAgY29uc3RydWN0b3IoCiAgICAgIC8vLyBAaW50ZXJuYWwKICAgICAgdG9rZW4sIG9wdGlvbnMgPSB7fSkgewogICAgICAgICAgdGhpcy50b2tlbiA9IHRva2VuOwogICAgICAgICAgdGhpcy5jb250ZXh0dWFsID0gISFvcHRpb25zLmNvbnRleHR1YWw7CiAgICAgICAgICB0aGlzLmZhbGxiYWNrID0gISFvcHRpb25zLmZhbGxiYWNrOwogICAgICAgICAgdGhpcy5leHRlbmQgPSAhIW9wdGlvbnMuZXh0ZW5kOwogICAgICB9CiAgfQogIC8vIFRva2VuaXplciBkYXRhIGlzIHN0b3JlZCBhIGJpZyB1aW50MTYgYXJyYXkgY29udGFpbmluZywgZm9yIGVhY2gKICAvLyBzdGF0ZToKICAvLwogIC8vICAtIEEgZ3JvdXAgYml0bWFzaywgaW5kaWNhdGluZyB3aGF0IHRva2VuIGdyb3VwcyBhcmUgcmVhY2hhYmxlIGZyb20KICAvLyAgICB0aGlzIHN0YXRlLCBzbyB0aGF0IHBhdGhzIHRoYXQgY2FuIG9ubHkgbGVhZCB0byB0b2tlbnMgbm90IGluCiAgLy8gICAgYW55IG9mIHRoZSBjdXJyZW50IGdyb3VwcyBjYW4gYmUgY3V0IG9mZiBlYXJseS4KICAvLwogIC8vICAtIFRoZSBwb3NpdGlvbiBvZiB0aGUgZW5kIG9mIHRoZSBzdGF0ZSdzIHNlcXVlbmNlIG9mIGFjY2VwdGluZwogIC8vICAgIHRva2VucwogIC8vCiAgLy8gIC0gVGhlIG51bWJlciBvZiBvdXRnb2luZyBlZGdlcyBmb3IgdGhlIHN0YXRlCiAgLy8KICAvLyAgLSBUaGUgYWNjZXB0aW5nIHRva2VucywgYXMgKHRva2VuIGlkLCBncm91cCBtYXNrKSBwYWlycwogIC8vCiAgLy8gIC0gVGhlIG91dGdvaW5nIGVkZ2VzLCBhcyAoc3RhcnQgY2hhcmFjdGVyLCBlbmQgY2hhcmFjdGVyLCBzdGF0ZQogIC8vICAgIGluZGV4KSB0cmlwbGVzLCB3aXRoIGVuZCBjaGFyYWN0ZXIgYmVpbmcgZXhjbHVzaXZlCiAgLy8KICAvLyBUaGlzIGZ1bmN0aW9uIGludGVycHJldHMgdGhhdCBkYXRhLCBydW5uaW5nIHRocm91Z2ggYSBzdHJlYW0gYXMKICAvLyBsb25nIGFzIG5ldyBzdGF0ZXMgd2l0aCB0aGUgYSBtYXRjaGluZyBncm91cCBtYXNrIGNhbiBiZSByZWFjaGVkLAogIC8vIGFuZCB1cGRhdGluZyBgaW5wdXQudG9rZW5gIHdoZW4gaXQgbWF0Y2hlcyBhIHRva2VuLgogIGZ1bmN0aW9uIHJlYWRUb2tlbihkYXRhLCBpbnB1dCwgc3RhY2ssIGdyb3VwKSB7CiAgICAgIGxldCBzdGF0ZSA9IDAsIGdyb3VwTWFzayA9IDEgPDwgZ3JvdXAsIHsgcGFyc2VyIH0gPSBzdGFjay5wLCB7IGRpYWxlY3QgfSA9IHBhcnNlcjsKICAgICAgc2NhbjogZm9yICg7OykgewogICAgICAgICAgaWYgKChncm91cE1hc2sgJiBkYXRhW3N0YXRlXSkgPT0gMCkKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgIGxldCBhY2NFbmQgPSBkYXRhW3N0YXRlICsgMV07CiAgICAgICAgICAvLyBDaGVjayB3aGV0aGVyIHRoaXMgc3RhdGUgY2FuIGxlYWQgdG8gYSB0b2tlbiBpbiB0aGUgY3VycmVudCBncm91cAogICAgICAgICAgLy8gQWNjZXB0IHRva2VucyBpbiB0aGlzIHN0YXRlLCBwb3NzaWJseSBvdmVyd3JpdGluZwogICAgICAgICAgLy8gbG93ZXItcHJlY2VkZW5jZSAvIHNob3J0ZXIgdG9rZW5zCiAgICAgICAgICBmb3IgKGxldCBpID0gc3RhdGUgKyAzOyBpIDwgYWNjRW5kOyBpICs9IDIpCiAgICAgICAgICAgICAgaWYgKChkYXRhW2kgKyAxXSAmIGdyb3VwTWFzaykgPiAwKSB7CiAgICAgICAgICAgICAgICAgIGxldCB0ZXJtID0gZGF0YVtpXTsKICAgICAgICAgICAgICAgICAgaWYgKGRpYWxlY3QuYWxsb3dzKHRlcm0pICYmCiAgICAgICAgICAgICAgICAgICAgICAoaW5wdXQudG9rZW4udmFsdWUgPT0gLTEgfHwgaW5wdXQudG9rZW4udmFsdWUgPT0gdGVybSB8fCBwYXJzZXIub3ZlcnJpZGVzKHRlcm0sIGlucHV0LnRva2VuLnZhbHVlKSkpIHsKICAgICAgICAgICAgICAgICAgICAgIGlucHV0LmFjY2VwdFRva2VuKHRlcm0pOwogICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICBsZXQgbmV4dCA9IGlucHV0Lm5leHQsIGxvdyA9IDAsIGhpZ2ggPSBkYXRhW3N0YXRlICsgMl07CiAgICAgICAgICAvLyBTcGVjaWFsIGNhc2UgZm9yIEVPRgogICAgICAgICAgaWYgKGlucHV0Lm5leHQgPCAwICYmIGhpZ2ggPiBsb3cgJiYgZGF0YVthY2NFbmQgKyBoaWdoICogMyAtIDNdID09IDY1NTM1IC8qIEVuZCAqLyAmJiBkYXRhW2FjY0VuZCArIGhpZ2ggKiAzIC0gM10gPT0gNjU1MzUgLyogRW5kICovKSB7CiAgICAgICAgICAgICAgc3RhdGUgPSBkYXRhW2FjY0VuZCArIGhpZ2ggKiAzIC0gMV07CiAgICAgICAgICAgICAgY29udGludWUgc2NhbjsKICAgICAgICAgIH0KICAgICAgICAgIC8vIERvIGEgYmluYXJ5IHNlYXJjaCBvbiB0aGUgc3RhdGUncyBlZGdlcwogICAgICAgICAgZm9yICg7IGxvdyA8IGhpZ2g7KSB7CiAgICAgICAgICAgICAgbGV0IG1pZCA9IChsb3cgKyBoaWdoKSA+PiAxOwogICAgICAgICAgICAgIGxldCBpbmRleCA9IGFjY0VuZCArIG1pZCArIChtaWQgPDwgMSk7CiAgICAgICAgICAgICAgbGV0IGZyb20gPSBkYXRhW2luZGV4XSwgdG8gPSBkYXRhW2luZGV4ICsgMV0gfHwgMHgxMDAwMDsKICAgICAgICAgICAgICBpZiAobmV4dCA8IGZyb20pCiAgICAgICAgICAgICAgICAgIGhpZ2ggPSBtaWQ7CiAgICAgICAgICAgICAgZWxzZSBpZiAobmV4dCA+PSB0bykKICAgICAgICAgICAgICAgICAgbG93ID0gbWlkICsgMTsKICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgc3RhdGUgPSBkYXRhW2luZGV4ICsgMl07CiAgICAgICAgICAgICAgICAgIGlucHV0LmFkdmFuY2UoKTsKICAgICAgICAgICAgICAgICAgY29udGludWUgc2NhbjsKICAgICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBicmVhazsKICAgICAgfQogIH0KCiAgLy8gU2VlIGxlemVyLWdlbmVyYXRvci9zcmMvZW5jb2RlLnRzIGZvciBjb21tZW50cyBhYm91dCB0aGUgZW5jb2RpbmcKICAvLyB1c2VkIGhlcmUKICBmdW5jdGlvbiBkZWNvZGVBcnJheShpbnB1dCwgVHlwZSA9IFVpbnQxNkFycmF5KSB7CiAgICAgIGlmICh0eXBlb2YgaW5wdXQgIT0gInN0cmluZyIpCiAgICAgICAgICByZXR1cm4gaW5wdXQ7CiAgICAgIGxldCBhcnJheSA9IG51bGw7CiAgICAgIGZvciAobGV0IHBvcyA9IDAsIG91dCA9IDA7IHBvcyA8IGlucHV0Lmxlbmd0aDspIHsKICAgICAgICAgIGxldCB2YWx1ZSA9IDA7CiAgICAgICAgICBmb3IgKDs7KSB7CiAgICAgICAgICAgICAgbGV0IG5leHQgPSBpbnB1dC5jaGFyQ29kZUF0KHBvcysrKSwgc3RvcCA9IGZhbHNlOwogICAgICAgICAgICAgIGlmIChuZXh0ID09IDEyNiAvKiBCaWdWYWxDb2RlICovKSB7CiAgICAgICAgICAgICAgICAgIHZhbHVlID0gNjU1MzUgLyogQmlnVmFsICovOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKG5leHQgPj0gOTIgLyogR2FwMiAqLykKICAgICAgICAgICAgICAgICAgbmV4dC0tOwogICAgICAgICAgICAgIGlmIChuZXh0ID49IDM0IC8qIEdhcDEgKi8pCiAgICAgICAgICAgICAgICAgIG5leHQtLTsKICAgICAgICAgICAgICBsZXQgZGlnaXQgPSBuZXh0IC0gMzIgLyogU3RhcnQgKi87CiAgICAgICAgICAgICAgaWYgKGRpZ2l0ID49IDQ2IC8qIEJhc2UgKi8pIHsKICAgICAgICAgICAgICAgICAgZGlnaXQgLT0gNDYgLyogQmFzZSAqLzsKICAgICAgICAgICAgICAgICAgc3RvcCA9IHRydWU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHZhbHVlICs9IGRpZ2l0OwogICAgICAgICAgICAgIGlmIChzdG9wKQogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB2YWx1ZSAqPSA0NiAvKiBCYXNlICovOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGFycmF5KQogICAgICAgICAgICAgIGFycmF5W291dCsrXSA9IHZhbHVlOwogICAgICAgICAgZWxzZQogICAgICAgICAgICAgIGFycmF5ID0gbmV3IFR5cGUodmFsdWUpOwogICAgICB9CiAgICAgIHJldHVybiBhcnJheTsKICB9CgogIC8vIEVudmlyb25tZW50IHZhcmlhYmxlIHVzZWQgdG8gY29udHJvbCBjb25zb2xlIG91dHB1dAogIGNvbnN0IHZlcmJvc2UgPSB0eXBlb2YgcHJvY2VzcyAhPSAidW5kZWZpbmVkIiAmJiBwcm9jZXNzLmVudiAmJiAvXGJwYXJzZVxiLy50ZXN0KHByb2Nlc3MuZW52LkxPRyk7CiAgbGV0IHN0YWNrSURzID0gbnVsbDsKICB2YXIgU2FmZXR5OwogIChmdW5jdGlvbiAoU2FmZXR5KSB7CiAgICAgIFNhZmV0eVtTYWZldHlbIk1hcmdpbiJdID0gMjVdID0gIk1hcmdpbiI7CiAgfSkoU2FmZXR5IHx8IChTYWZldHkgPSB7fSkpOwogIGZ1bmN0aW9uIGN1dEF0KHRyZWUsIHBvcywgc2lkZSkgewogICAgICBsZXQgY3Vyc29yID0gdHJlZS5jdXJzb3IoSXRlck1vZGUuSW5jbHVkZUFub255bW91cyk7CiAgICAgIGN1cnNvci5tb3ZlVG8ocG9zKTsKICAgICAgZm9yICg7OykgewogICAgICAgICAgaWYgKCEoc2lkZSA8IDAgPyBjdXJzb3IuY2hpbGRCZWZvcmUocG9zKSA6IGN1cnNvci5jaGlsZEFmdGVyKHBvcykpKQogICAgICAgICAgICAgIGZvciAoOzspIHsKICAgICAgICAgICAgICAgICAgaWYgKChzaWRlIDwgMCA/IGN1cnNvci50byA8IHBvcyA6IGN1cnNvci5mcm9tID4gcG9zKSAmJiAhY3Vyc29yLnR5cGUuaXNFcnJvcikKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzaWRlIDwgMCA/IE1hdGgubWF4KDAsIE1hdGgubWluKGN1cnNvci50byAtIDEsIHBvcyAtIDI1IC8qIE1hcmdpbiAqLykpCiAgICAgICAgICAgICAgICAgICAgICAgICAgOiBNYXRoLm1pbih0cmVlLmxlbmd0aCwgTWF0aC5tYXgoY3Vyc29yLmZyb20gKyAxLCBwb3MgKyAyNSAvKiBNYXJnaW4gKi8pKTsKICAgICAgICAgICAgICAgICAgaWYgKHNpZGUgPCAwID8gY3Vyc29yLnByZXZTaWJsaW5nKCkgOiBjdXJzb3IubmV4dFNpYmxpbmcoKSkKICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICBpZiAoIWN1cnNvci5wYXJlbnQoKSkKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzaWRlIDwgMCA/IDAgOiB0cmVlLmxlbmd0aDsKICAgICAgICAgICAgICB9CiAgICAgIH0KICB9CiAgY2xhc3MgRnJhZ21lbnRDdXJzb3IgewogICAgICBjb25zdHJ1Y3RvcihmcmFnbWVudHMsIG5vZGVTZXQpIHsKICAgICAgICAgIHRoaXMuZnJhZ21lbnRzID0gZnJhZ21lbnRzOwogICAgICAgICAgdGhpcy5ub2RlU2V0ID0gbm9kZVNldDsKICAgICAgICAgIHRoaXMuaSA9IDA7CiAgICAgICAgICB0aGlzLmZyYWdtZW50ID0gbnVsbDsKICAgICAgICAgIHRoaXMuc2FmZUZyb20gPSAtMTsKICAgICAgICAgIHRoaXMuc2FmZVRvID0gLTE7CiAgICAgICAgICB0aGlzLnRyZWVzID0gW107CiAgICAgICAgICB0aGlzLnN0YXJ0ID0gW107CiAgICAgICAgICB0aGlzLmluZGV4ID0gW107CiAgICAgICAgICB0aGlzLm5leHRGcmFnbWVudCgpOwogICAgICB9CiAgICAgIG5leHRGcmFnbWVudCgpIHsKICAgICAgICAgIGxldCBmciA9IHRoaXMuZnJhZ21lbnQgPSB0aGlzLmkgPT0gdGhpcy5mcmFnbWVudHMubGVuZ3RoID8gbnVsbCA6IHRoaXMuZnJhZ21lbnRzW3RoaXMuaSsrXTsKICAgICAgICAgIGlmIChmcikgewogICAgICAgICAgICAgIHRoaXMuc2FmZUZyb20gPSBmci5vcGVuU3RhcnQgPyBjdXRBdChmci50cmVlLCBmci5mcm9tICsgZnIub2Zmc2V0LCAxKSAtIGZyLm9mZnNldCA6IGZyLmZyb207CiAgICAgICAgICAgICAgdGhpcy5zYWZlVG8gPSBmci5vcGVuRW5kID8gY3V0QXQoZnIudHJlZSwgZnIudG8gKyBmci5vZmZzZXQsIC0xKSAtIGZyLm9mZnNldCA6IGZyLnRvOwogICAgICAgICAgICAgIHdoaWxlICh0aGlzLnRyZWVzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICB0aGlzLnRyZWVzLnBvcCgpOwogICAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0LnBvcCgpOwogICAgICAgICAgICAgICAgICB0aGlzLmluZGV4LnBvcCgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB0aGlzLnRyZWVzLnB1c2goZnIudHJlZSk7CiAgICAgICAgICAgICAgdGhpcy5zdGFydC5wdXNoKC1mci5vZmZzZXQpOwogICAgICAgICAgICAgIHRoaXMuaW5kZXgucHVzaCgwKTsKICAgICAgICAgICAgICB0aGlzLm5leHRTdGFydCA9IHRoaXMuc2FmZUZyb207CiAgICAgICAgICB9CiAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICB0aGlzLm5leHRTdGFydCA9IDFlOTsKICAgICAgICAgIH0KICAgICAgfQogICAgICAvLyBgcG9zYCBtdXN0IGJlID49IGFueSBwcmV2aW91c2x5IGdpdmVuIGBwb3NgIGZvciB0aGlzIGN1cnNvcgogICAgICBub2RlQXQocG9zKSB7CiAgICAgICAgICBpZiAocG9zIDwgdGhpcy5uZXh0U3RhcnQpCiAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICB3aGlsZSAodGhpcy5mcmFnbWVudCAmJiB0aGlzLnNhZmVUbyA8PSBwb3MpCiAgICAgICAgICAgICAgdGhpcy5uZXh0RnJhZ21lbnQoKTsKICAgICAgICAgIGlmICghdGhpcy5mcmFnbWVudCkKICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgIGZvciAoOzspIHsKICAgICAgICAgICAgICBsZXQgbGFzdCA9IHRoaXMudHJlZXMubGVuZ3RoIC0gMTsKICAgICAgICAgICAgICBpZiAobGFzdCA8IDApIHsgLy8gRW5kIG9mIHRyZWUKICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0RnJhZ21lbnQoKTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGxldCB0b3AgPSB0aGlzLnRyZWVzW2xhc3RdLCBpbmRleCA9IHRoaXMuaW5kZXhbbGFzdF07CiAgICAgICAgICAgICAgaWYgKGluZGV4ID09IHRvcC5jaGlsZHJlbi5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgdGhpcy50cmVlcy5wb3AoKTsKICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydC5wb3AoKTsKICAgICAgICAgICAgICAgICAgdGhpcy5pbmRleC5wb3AoKTsKICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGxldCBuZXh0ID0gdG9wLmNoaWxkcmVuW2luZGV4XTsKICAgICAgICAgICAgICBsZXQgc3RhcnQgPSB0aGlzLnN0YXJ0W2xhc3RdICsgdG9wLnBvc2l0aW9uc1tpbmRleF07CiAgICAgICAgICAgICAgaWYgKHN0YXJ0ID4gcG9zKSB7CiAgICAgICAgICAgICAgICAgIHRoaXMubmV4dFN0YXJ0ID0gc3RhcnQ7CiAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAobmV4dCBpbnN0YW5jZW9mIFRyZWUpIHsKICAgICAgICAgICAgICAgICAgaWYgKHN0YXJ0ID09IHBvcykgewogICAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXJ0IDwgdGhpcy5zYWZlRnJvbSkKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgIGxldCBlbmQgPSBzdGFydCArIG5leHQubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgICAgaWYgKGVuZCA8PSB0aGlzLnNhZmVUbykgewogICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBsb29rQWhlYWQgPSBuZXh0LnByb3AoTm9kZVByb3AubG9va0FoZWFkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWxvb2tBaGVhZCB8fCBlbmQgKyBsb29rQWhlYWQgPCB0aGlzLmZyYWdtZW50LnRvKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV4dDsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB0aGlzLmluZGV4W2xhc3RdKys7CiAgICAgICAgICAgICAgICAgIGlmIChzdGFydCArIG5leHQubGVuZ3RoID49IE1hdGgubWF4KHRoaXMuc2FmZUZyb20sIHBvcykpIHsgLy8gRW50ZXIgdGhpcyBub2RlCiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyZWVzLnB1c2gobmV4dCk7CiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0LnB1c2goc3RhcnQpOwogICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmRleC5wdXNoKDApOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICB0aGlzLmluZGV4W2xhc3RdKys7CiAgICAgICAgICAgICAgICAgIHRoaXMubmV4dFN0YXJ0ID0gc3RhcnQgKyBuZXh0Lmxlbmd0aDsKICAgICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgIH0KICB9CiAgY2xhc3MgVG9rZW5DYWNoZSB7CiAgICAgIGNvbnN0cnVjdG9yKHBhcnNlciwgc3RyZWFtKSB7CiAgICAgICAgICB0aGlzLnN0cmVhbSA9IHN0cmVhbTsKICAgICAgICAgIHRoaXMudG9rZW5zID0gW107CiAgICAgICAgICB0aGlzLm1haW5Ub2tlbiA9IG51bGw7CiAgICAgICAgICB0aGlzLmFjdGlvbnMgPSBbXTsKICAgICAgICAgIHRoaXMudG9rZW5zID0gcGFyc2VyLnRva2VuaXplcnMubWFwKF8gPT4gbmV3IENhY2hlZFRva2VuKTsKICAgICAgfQogICAgICBnZXRBY3Rpb25zKHN0YWNrKSB7CiAgICAgICAgICBsZXQgYWN0aW9uSW5kZXggPSAwOwogICAgICAgICAgbGV0IG1haW4gPSBudWxsOwogICAgICAgICAgbGV0IHsgcGFyc2VyIH0gPSBzdGFjay5wLCB7IHRva2VuaXplcnMgfSA9IHBhcnNlcjsKICAgICAgICAgIGxldCBtYXNrID0gcGFyc2VyLnN0YXRlU2xvdChzdGFjay5zdGF0ZSwgMyAvKiBUb2tlbml6ZXJNYXNrICovKTsKICAgICAgICAgIGxldCBjb250ZXh0ID0gc3RhY2suY3VyQ29udGV4dCA/IHN0YWNrLmN1ckNvbnRleHQuaGFzaCA6IDA7CiAgICAgICAgICBsZXQgbG9va0FoZWFkID0gMDsKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdG9rZW5pemVycy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgIGlmICgoKDEgPDwgaSkgJiBtYXNrKSA9PSAwKQogICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICBsZXQgdG9rZW5pemVyID0gdG9rZW5pemVyc1tpXSwgdG9rZW4gPSB0aGlzLnRva2Vuc1tpXTsKICAgICAgICAgICAgICBpZiAobWFpbiAmJiAhdG9rZW5pemVyLmZhbGxiYWNrKQogICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICBpZiAodG9rZW5pemVyLmNvbnRleHR1YWwgfHwgdG9rZW4uc3RhcnQgIT0gc3RhY2sucG9zIHx8IHRva2VuLm1hc2sgIT0gbWFzayB8fCB0b2tlbi5jb250ZXh0ICE9IGNvbnRleHQpIHsKICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDYWNoZWRUb2tlbih0b2tlbiwgdG9rZW5pemVyLCBzdGFjayk7CiAgICAgICAgICAgICAgICAgIHRva2VuLm1hc2sgPSBtYXNrOwogICAgICAgICAgICAgICAgICB0b2tlbi5jb250ZXh0ID0gY29udGV4dDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKHRva2VuLmxvb2tBaGVhZCA+IHRva2VuLmVuZCArIDI1IC8qIE1hcmdpbiAqLykKICAgICAgICAgICAgICAgICAgbG9va0FoZWFkID0gTWF0aC5tYXgodG9rZW4ubG9va0FoZWFkLCBsb29rQWhlYWQpOwogICAgICAgICAgICAgIGlmICh0b2tlbi52YWx1ZSAhPSAwIC8qIEVyciAqLykgewogICAgICAgICAgICAgICAgICBsZXQgc3RhcnRJbmRleCA9IGFjdGlvbkluZGV4OwogICAgICAgICAgICAgICAgICBpZiAodG9rZW4uZXh0ZW5kZWQgPiAtMSkKICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbkluZGV4ID0gdGhpcy5hZGRBY3Rpb25zKHN0YWNrLCB0b2tlbi5leHRlbmRlZCwgdG9rZW4uZW5kLCBhY3Rpb25JbmRleCk7CiAgICAgICAgICAgICAgICAgIGFjdGlvbkluZGV4ID0gdGhpcy5hZGRBY3Rpb25zKHN0YWNrLCB0b2tlbi52YWx1ZSwgdG9rZW4uZW5kLCBhY3Rpb25JbmRleCk7CiAgICAgICAgICAgICAgICAgIGlmICghdG9rZW5pemVyLmV4dGVuZCkgewogICAgICAgICAgICAgICAgICAgICAgbWFpbiA9IHRva2VuOwogICAgICAgICAgICAgICAgICAgICAgaWYgKGFjdGlvbkluZGV4ID4gc3RhcnRJbmRleCkKICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHdoaWxlICh0aGlzLmFjdGlvbnMubGVuZ3RoID4gYWN0aW9uSW5kZXgpCiAgICAgICAgICAgICAgdGhpcy5hY3Rpb25zLnBvcCgpOwogICAgICAgICAgaWYgKGxvb2tBaGVhZCkKICAgICAgICAgICAgICBzdGFjay5zZXRMb29rQWhlYWQobG9va0FoZWFkKTsKICAgICAgICAgIGlmICghbWFpbiAmJiBzdGFjay5wb3MgPT0gdGhpcy5zdHJlYW0uZW5kKSB7CiAgICAgICAgICAgICAgbWFpbiA9IG5ldyBDYWNoZWRUb2tlbjsKICAgICAgICAgICAgICBtYWluLnZhbHVlID0gc3RhY2sucC5wYXJzZXIuZW9mVGVybTsKICAgICAgICAgICAgICBtYWluLnN0YXJ0ID0gbWFpbi5lbmQgPSBzdGFjay5wb3M7CiAgICAgICAgICAgICAgYWN0aW9uSW5kZXggPSB0aGlzLmFkZEFjdGlvbnMoc3RhY2ssIG1haW4udmFsdWUsIG1haW4uZW5kLCBhY3Rpb25JbmRleCk7CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLm1haW5Ub2tlbiA9IG1haW47CiAgICAgICAgICByZXR1cm4gdGhpcy5hY3Rpb25zOwogICAgICB9CiAgICAgIGdldE1haW5Ub2tlbihzdGFjaykgewogICAgICAgICAgaWYgKHRoaXMubWFpblRva2VuKQogICAgICAgICAgICAgIHJldHVybiB0aGlzLm1haW5Ub2tlbjsKICAgICAgICAgIGxldCBtYWluID0gbmV3IENhY2hlZFRva2VuLCB7IHBvcywgcCB9ID0gc3RhY2s7CiAgICAgICAgICBtYWluLnN0YXJ0ID0gcG9zOwogICAgICAgICAgbWFpbi5lbmQgPSBNYXRoLm1pbihwb3MgKyAxLCBwLnN0cmVhbS5lbmQpOwogICAgICAgICAgbWFpbi52YWx1ZSA9IHBvcyA9PSBwLnN0cmVhbS5lbmQgPyBwLnBhcnNlci5lb2ZUZXJtIDogMCAvKiBFcnIgKi87CiAgICAgICAgICByZXR1cm4gbWFpbjsKICAgICAgfQogICAgICB1cGRhdGVDYWNoZWRUb2tlbih0b2tlbiwgdG9rZW5pemVyLCBzdGFjaykgewogICAgICAgICAgbGV0IHN0YXJ0ID0gdGhpcy5zdHJlYW0uY2xpcFBvcyhzdGFjay5wb3MpOwogICAgICAgICAgdG9rZW5pemVyLnRva2VuKHRoaXMuc3RyZWFtLnJlc2V0KHN0YXJ0LCB0b2tlbiksIHN0YWNrKTsKICAgICAgICAgIGlmICh0b2tlbi52YWx1ZSA+IC0xKSB7CiAgICAgICAgICAgICAgbGV0IHsgcGFyc2VyIH0gPSBzdGFjay5wOwogICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFyc2VyLnNwZWNpYWxpemVkLmxlbmd0aDsgaSsrKQogICAgICAgICAgICAgICAgICBpZiAocGFyc2VyLnNwZWNpYWxpemVkW2ldID09IHRva2VuLnZhbHVlKSB7CiAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVzdWx0ID0gcGFyc2VyLnNwZWNpYWxpemVyc1tpXSh0aGlzLnN0cmVhbS5yZWFkKHRva2VuLnN0YXJ0LCB0b2tlbi5lbmQpLCBzdGFjayk7CiAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0ID49IDAgJiYgc3RhY2sucC5wYXJzZXIuZGlhbGVjdC5hbGxvd3MocmVzdWx0ID4+IDEpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChyZXN1bHQgJiAxKSA9PSAwIC8qIFNwZWNpYWxpemUgKi8pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuLnZhbHVlID0gcmVzdWx0ID4+IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2tlbi5leHRlbmRlZCA9IHJlc3VsdCA+PiAxOwogICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICB0b2tlbi52YWx1ZSA9IDAgLyogRXJyICovOwogICAgICAgICAgICAgIHRva2VuLmVuZCA9IHRoaXMuc3RyZWFtLmNsaXBQb3Moc3RhcnQgKyAxKTsKICAgICAgICAgIH0KICAgICAgfQogICAgICBwdXRBY3Rpb24oYWN0aW9uLCB0b2tlbiwgZW5kLCBpbmRleCkgewogICAgICAgICAgLy8gRG9uJ3QgYWRkIGR1cGxpY2F0ZSBhY3Rpb25zCiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGluZGV4OyBpICs9IDMpCiAgICAgICAgICAgICAgaWYgKHRoaXMuYWN0aW9uc1tpXSA9PSBhY3Rpb24pCiAgICAgICAgICAgICAgICAgIHJldHVybiBpbmRleDsKICAgICAgICAgIHRoaXMuYWN0aW9uc1tpbmRleCsrXSA9IGFjdGlvbjsKICAgICAgICAgIHRoaXMuYWN0aW9uc1tpbmRleCsrXSA9IHRva2VuOwogICAgICAgICAgdGhpcy5hY3Rpb25zW2luZGV4KytdID0gZW5kOwogICAgICAgICAgcmV0dXJuIGluZGV4OwogICAgICB9CiAgICAgIGFkZEFjdGlvbnMoc3RhY2ssIHRva2VuLCBlbmQsIGluZGV4KSB7CiAgICAgICAgICBsZXQgeyBzdGF0ZSB9ID0gc3RhY2ssIHsgcGFyc2VyIH0gPSBzdGFjay5wLCB7IGRhdGEgfSA9IHBhcnNlcjsKICAgICAgICAgIGZvciAobGV0IHNldCA9IDA7IHNldCA8IDI7IHNldCsrKSB7CiAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IHBhcnNlci5zdGF0ZVNsb3Qoc3RhdGUsIHNldCA/IDIgLyogU2tpcCAqLyA6IDEgLyogQWN0aW9ucyAqLyk7OyBpICs9IDMpIHsKICAgICAgICAgICAgICAgICAgaWYgKGRhdGFbaV0gPT0gNjU1MzUgLyogRW5kICovKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YVtpICsgMV0gPT0gMSAvKiBOZXh0ICovKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IHBhaXIoZGF0YSwgaSArIDIpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4ID09IDAgJiYgZGF0YVtpICsgMV0gPT0gMiAvKiBPdGhlciAqLykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXggPSB0aGlzLnB1dEFjdGlvbihwYWlyKGRhdGEsIGkgKyAyKSwgdG9rZW4sIGVuZCwgaW5kZXgpOwogICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGlmIChkYXRhW2ldID09IHRva2VuKQogICAgICAgICAgICAgICAgICAgICAgaW5kZXggPSB0aGlzLnB1dEFjdGlvbihwYWlyKGRhdGEsIGkgKyAxKSwgdG9rZW4sIGVuZCwgaW5kZXgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBpbmRleDsKICAgICAgfQogIH0KICB2YXIgUmVjOwogIChmdW5jdGlvbiAoUmVjKSB7CiAgICAgIFJlY1tSZWNbIkRpc3RhbmNlIl0gPSA1XSA9ICJEaXN0YW5jZSI7CiAgICAgIFJlY1tSZWNbIk1heFJlbWFpbmluZ1BlclN0ZXAiXSA9IDNdID0gIk1heFJlbWFpbmluZ1BlclN0ZXAiOwogICAgICAvLyBXaGVuIHR3byBzdGFja3MgaGF2ZSBiZWVuIHJ1bm5pbmcgaW5kZXBlbmRlbnRseSBsb25nIGVub3VnaCB0bwogICAgICAvLyBhZGQgdGhpcyBtYW55IGVsZW1lbnRzIHRvIHRoZWlyIGJ1ZmZlcnMsIHBydW5lIG9uZS4KICAgICAgUmVjW1JlY1siTWluQnVmZmVyTGVuZ3RoUHJ1bmUiXSA9IDUwMF0gPSAiTWluQnVmZmVyTGVuZ3RoUHJ1bmUiOwogICAgICBSZWNbUmVjWyJGb3JjZVJlZHVjZUxpbWl0Il0gPSAxMF0gPSAiRm9yY2VSZWR1Y2VMaW1pdCI7CiAgICAgIC8vIE9uY2UgYSBzdGFjayByZWFjaGVzIHRoaXMgZGVwdGggKGluIC5zdGFjay5sZW5ndGgpIGZvcmNlLXJlZHVjZQogICAgICAvLyBpdCBiYWNrIHRvIEN1dFRvIHRvIGF2b2lkIGNyZWF0aW5nIHRyZWVzIHRoYXQgb3ZlcmZsb3cgdGhlIHN0YWNrCiAgICAgIC8vIG9uIHJlY3Vyc2l2ZSB0cmF2ZXJzYWwuCiAgICAgIFJlY1tSZWNbIkN1dERlcHRoIl0gPSAxNTAwMF0gPSAiQ3V0RGVwdGgiOwogICAgICBSZWNbUmVjWyJDdXRUbyJdID0gOTAwMF0gPSAiQ3V0VG8iOwogIH0pKFJlYyB8fCAoUmVjID0ge30pKTsKICBjbGFzcyBQYXJzZSB7CiAgICAgIGNvbnN0cnVjdG9yKHBhcnNlciwgaW5wdXQsIGZyYWdtZW50cywgcmFuZ2VzKSB7CiAgICAgICAgICB0aGlzLnBhcnNlciA9IHBhcnNlcjsKICAgICAgICAgIHRoaXMuaW5wdXQgPSBpbnB1dDsKICAgICAgICAgIHRoaXMucmFuZ2VzID0gcmFuZ2VzOwogICAgICAgICAgdGhpcy5yZWNvdmVyaW5nID0gMDsKICAgICAgICAgIHRoaXMubmV4dFN0YWNrSUQgPSAweDI2NTQ7IC8vIOKZlCwg4pmVLCDimZYsIOKZlywg4pmYLCDimZksIOKZoCwg4pmhLCDimaIsIOKZoywg4pmkLCDimaUsIOKZpiwg4pmnCiAgICAgICAgICB0aGlzLm1pblN0YWNrUG9zID0gMDsKICAgICAgICAgIHRoaXMucmV1c2VkID0gW107CiAgICAgICAgICB0aGlzLnN0b3BwZWRBdCA9IG51bGw7CiAgICAgICAgICB0aGlzLnN0cmVhbSA9IG5ldyBJbnB1dFN0cmVhbShpbnB1dCwgcmFuZ2VzKTsKICAgICAgICAgIHRoaXMudG9rZW5zID0gbmV3IFRva2VuQ2FjaGUocGFyc2VyLCB0aGlzLnN0cmVhbSk7CiAgICAgICAgICB0aGlzLnRvcFRlcm0gPSBwYXJzZXIudG9wWzFdOwogICAgICAgICAgbGV0IHsgZnJvbSB9ID0gcmFuZ2VzWzBdOwogICAgICAgICAgdGhpcy5zdGFja3MgPSBbU3RhY2suc3RhcnQodGhpcywgcGFyc2VyLnRvcFswXSwgZnJvbSldOwogICAgICAgICAgdGhpcy5mcmFnbWVudHMgPSBmcmFnbWVudHMubGVuZ3RoICYmIHRoaXMuc3RyZWFtLmVuZCAtIGZyb20gPiBwYXJzZXIuYnVmZmVyTGVuZ3RoICogNAogICAgICAgICAgICAgID8gbmV3IEZyYWdtZW50Q3Vyc29yKGZyYWdtZW50cywgcGFyc2VyLm5vZGVTZXQpIDogbnVsbDsKICAgICAgfQogICAgICBnZXQgcGFyc2VkUG9zKCkgewogICAgICAgICAgcmV0dXJuIHRoaXMubWluU3RhY2tQb3M7CiAgICAgIH0KICAgICAgLy8gTW92ZSB0aGUgcGFyc2VyIGZvcndhcmQuIFRoaXMgd2lsbCBwcm9jZXNzIGFsbCBwYXJzZSBzdGFja3MgYXQKICAgICAgLy8gYHRoaXMucG9zYCBhbmQgdHJ5IHRvIGFkdmFuY2UgdGhlbSB0byBhIGZ1cnRoZXIgcG9zaXRpb24uIElmIG5vCiAgICAgIC8vIHN0YWNrIGZvciBzdWNoIGEgcG9zaXRpb24gaXMgZm91bmQsIGl0J2xsIHN0YXJ0IGVycm9yLXJlY292ZXJ5LgogICAgICAvLwogICAgICAvLyBXaGVuIHRoZSBwYXJzZSBpcyBmaW5pc2hlZCwgdGhpcyB3aWxsIHJldHVybiBhIHN5bnRheCB0cmVlLiBXaGVuCiAgICAgIC8vIG5vdCwgaXQgcmV0dXJucyBgbnVsbGAuCiAgICAgIGFkdmFuY2UoKSB7CiAgICAgICAgICBsZXQgc3RhY2tzID0gdGhpcy5zdGFja3MsIHBvcyA9IHRoaXMubWluU3RhY2tQb3M7CiAgICAgICAgICAvLyBUaGlzIHdpbGwgaG9sZCBzdGFja3MgYmV5b25kIGBwb3NgLgogICAgICAgICAgbGV0IG5ld1N0YWNrcyA9IHRoaXMuc3RhY2tzID0gW107CiAgICAgICAgICBsZXQgc3RvcHBlZCwgc3RvcHBlZFRva2VuczsKICAgICAgICAgIC8vIEtlZXAgYWR2YW5jaW5nIGFueSBzdGFja3MgYXQgYHBvc2AgdW50aWwgdGhleSBlaXRoZXIgbW92ZQogICAgICAgICAgLy8gZm9yd2FyZCBvciBjYW4ndCBiZSBhZHZhbmNlZC4gR2F0aGVyIHN0YWNrcyB0aGF0IGNhbid0IGJlCiAgICAgICAgICAvLyBhZHZhbmNlZCBmdXJ0aGVyIGluIGBzdG9wcGVkYC4KICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RhY2tzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgbGV0IHN0YWNrID0gc3RhY2tzW2ldOwogICAgICAgICAgICAgIGZvciAoOzspIHsKICAgICAgICAgICAgICAgICAgdGhpcy50b2tlbnMubWFpblRva2VuID0gbnVsbDsKICAgICAgICAgICAgICAgICAgaWYgKHN0YWNrLnBvcyA+IHBvcykgewogICAgICAgICAgICAgICAgICAgICAgbmV3U3RhY2tzLnB1c2goc3RhY2spOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuYWR2YW5jZVN0YWNrKHN0YWNrLCBuZXdTdGFja3MsIHN0YWNrcykpIHsKICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgaWYgKCFzdG9wcGVkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgc3RvcHBlZCA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgICAgIHN0b3BwZWRUb2tlbnMgPSBbXTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIHN0b3BwZWQucHVzaChzdGFjayk7CiAgICAgICAgICAgICAgICAgICAgICBsZXQgdG9rID0gdGhpcy50b2tlbnMuZ2V0TWFpblRva2VuKHN0YWNrKTsKICAgICAgICAgICAgICAgICAgICAgIHN0b3BwZWRUb2tlbnMucHVzaCh0b2sudmFsdWUsIHRvay5lbmQpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGlmICghbmV3U3RhY2tzLmxlbmd0aCkgewogICAgICAgICAgICAgIGxldCBmaW5pc2hlZCA9IHN0b3BwZWQgJiYgZmluZEZpbmlzaGVkKHN0b3BwZWQpOwogICAgICAgICAgICAgIGlmIChmaW5pc2hlZCkKICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhY2tUb1RyZWUoZmluaXNoZWQpOwogICAgICAgICAgICAgIGlmICh0aGlzLnBhcnNlci5zdHJpY3QpIHsKICAgICAgICAgICAgICAgICAgaWYgKHZlcmJvc2UgJiYgc3RvcHBlZCkKICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJTdHVjayB3aXRoIHRva2VuICIgKyAodGhpcy50b2tlbnMubWFpblRva2VuID8gdGhpcy5wYXJzZXIuZ2V0TmFtZSh0aGlzLnRva2Vucy5tYWluVG9rZW4udmFsdWUpIDogIm5vbmUiKSk7CiAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBTeW50YXhFcnJvcigiTm8gcGFyc2UgYXQgIiArIHBvcyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmICghdGhpcy5yZWNvdmVyaW5nKQogICAgICAgICAgICAgICAgICB0aGlzLnJlY292ZXJpbmcgPSA1IC8qIERpc3RhbmNlICovOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHRoaXMucmVjb3ZlcmluZyAmJiBzdG9wcGVkKSB7CiAgICAgICAgICAgICAgbGV0IGZpbmlzaGVkID0gdGhpcy5zdG9wcGVkQXQgIT0gbnVsbCAmJiBzdG9wcGVkWzBdLnBvcyA+IHRoaXMuc3RvcHBlZEF0ID8gc3RvcHBlZFswXQogICAgICAgICAgICAgICAgICA6IHRoaXMucnVuUmVjb3Zlcnkoc3RvcHBlZCwgc3RvcHBlZFRva2VucywgbmV3U3RhY2tzKTsKICAgICAgICAgICAgICBpZiAoZmluaXNoZWQpCiAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YWNrVG9UcmVlKGZpbmlzaGVkLmZvcmNlQWxsKCkpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHRoaXMucmVjb3ZlcmluZykgewogICAgICAgICAgICAgIGxldCBtYXhSZW1haW5pbmcgPSB0aGlzLnJlY292ZXJpbmcgPT0gMSA/IDEgOiB0aGlzLnJlY292ZXJpbmcgKiAzIC8qIE1heFJlbWFpbmluZ1BlclN0ZXAgKi87CiAgICAgICAgICAgICAgaWYgKG5ld1N0YWNrcy5sZW5ndGggPiBtYXhSZW1haW5pbmcpIHsKICAgICAgICAgICAgICAgICAgbmV3U3RhY2tzLnNvcnQoKGEsIGIpID0+IGIuc2NvcmUgLSBhLnNjb3JlKTsKICAgICAgICAgICAgICAgICAgd2hpbGUgKG5ld1N0YWNrcy5sZW5ndGggPiBtYXhSZW1haW5pbmcpCiAgICAgICAgICAgICAgICAgICAgICBuZXdTdGFja3MucG9wKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmIChuZXdTdGFja3Muc29tZShzID0+IHMucmVkdWNlUG9zID4gcG9zKSkKICAgICAgICAgICAgICAgICAgdGhpcy5yZWNvdmVyaW5nLS07CiAgICAgICAgICB9CiAgICAgICAgICBlbHNlIGlmIChuZXdTdGFja3MubGVuZ3RoID4gMSkgewogICAgICAgICAgICAgIC8vIFBydW5lIHN0YWNrcyB0aGF0IGFyZSBpbiB0aGUgc2FtZSBzdGF0ZSwgb3IgdGhhdCBoYXZlIGJlZW4KICAgICAgICAgICAgICAvLyBydW5uaW5nIHdpdGhvdXQgc3BsaXR0aW5nIGZvciBhIHdoaWxlLCB0byBhdm9pZCBnZXR0aW5nIHN0dWNrCiAgICAgICAgICAgICAgLy8gd2l0aCBtdWx0aXBsZSBzdWNjZXNzZnVsIHN0YWNrcyBydW5uaW5nIGVuZGxlc3NseSBvbi4KICAgICAgICAgICAgICBvdXRlcjogZm9yIChsZXQgaSA9IDA7IGkgPCBuZXdTdGFja3MubGVuZ3RoIC0gMTsgaSsrKSB7CiAgICAgICAgICAgICAgICAgIGxldCBzdGFjayA9IG5ld1N0YWNrc1tpXTsKICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IGkgKyAxOyBqIDwgbmV3U3RhY2tzLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgICAgICAgICBsZXQgb3RoZXIgPSBuZXdTdGFja3Nbal07CiAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhY2suc2FtZVN0YXRlKG90aGVyKSB8fAogICAgICAgICAgICAgICAgICAgICAgICAgIHN0YWNrLmJ1ZmZlci5sZW5ndGggPiA1MDAgLyogTWluQnVmZmVyTGVuZ3RoUHJ1bmUgKi8gJiYgb3RoZXIuYnVmZmVyLmxlbmd0aCA+IDUwMCAvKiBNaW5CdWZmZXJMZW5ndGhQcnVuZSAqLykgewogICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoKHN0YWNrLnNjb3JlIC0gb3RoZXIuc2NvcmUpIHx8IChzdGFjay5idWZmZXIubGVuZ3RoIC0gb3RoZXIuYnVmZmVyLmxlbmd0aCkpID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdTdGFja3Muc3BsaWNlKGotLSwgMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdTdGFja3Muc3BsaWNlKGktLSwgMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlIG91dGVyOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHRoaXMubWluU3RhY2tQb3MgPSBuZXdTdGFja3NbMF0ucG9zOwogICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBuZXdTdGFja3MubGVuZ3RoOyBpKyspCiAgICAgICAgICAgICAgaWYgKG5ld1N0YWNrc1tpXS5wb3MgPCB0aGlzLm1pblN0YWNrUG9zKQogICAgICAgICAgICAgICAgICB0aGlzLm1pblN0YWNrUG9zID0gbmV3U3RhY2tzW2ldLnBvczsKICAgICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICAgIHN0b3BBdChwb3MpIHsKICAgICAgICAgIGlmICh0aGlzLnN0b3BwZWRBdCAhPSBudWxsICYmIHRoaXMuc3RvcHBlZEF0IDwgcG9zKQogICAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCJDYW4ndCBtb3ZlIHN0b3BwZWRBdCBmb3J3YXJkIik7CiAgICAgICAgICB0aGlzLnN0b3BwZWRBdCA9IHBvczsKICAgICAgfQogICAgICAvLyBSZXR1cm5zIGFuIHVwZGF0ZWQgdmVyc2lvbiBvZiB0aGUgZ2l2ZW4gc3RhY2ssIG9yIG51bGwgaWYgdGhlCiAgICAgIC8vIHN0YWNrIGNhbid0IGFkdmFuY2Ugbm9ybWFsbHkuIFdoZW4gYHNwbGl0YCBhbmQgYHN0YWNrc2AgYXJlCiAgICAgIC8vIGdpdmVuLCBzdGFja3Mgc3BsaXQgb2ZmIGJ5IGFtYmlndW91cyBvcGVyYXRpb25zIHdpbGwgYmUgcHVzaGVkIHRvCiAgICAgIC8vIGBzcGxpdGAsIG9yIGFkZGVkIHRvIGBzdGFja3NgIGlmIHRoZXkgbW92ZSBgcG9zYCBmb3J3YXJkLgogICAgICBhZHZhbmNlU3RhY2soc3RhY2ssIHN0YWNrcywgc3BsaXQpIHsKICAgICAgICAgIGxldCBzdGFydCA9IHN0YWNrLnBvcywgeyBwYXJzZXIgfSA9IHRoaXM7CiAgICAgICAgICBsZXQgYmFzZSA9IHZlcmJvc2UgPyB0aGlzLnN0YWNrSUQoc3RhY2spICsgIiAtPiAiIDogIiI7CiAgICAgICAgICBpZiAodGhpcy5zdG9wcGVkQXQgIT0gbnVsbCAmJiBzdGFydCA+IHRoaXMuc3RvcHBlZEF0KQogICAgICAgICAgICAgIHJldHVybiBzdGFjay5mb3JjZVJlZHVjZSgpID8gc3RhY2sgOiBudWxsOwogICAgICAgICAgaWYgKHRoaXMuZnJhZ21lbnRzKSB7CiAgICAgICAgICAgICAgbGV0IHN0cmljdEN4ID0gc3RhY2suY3VyQ29udGV4dCAmJiBzdGFjay5jdXJDb250ZXh0LnRyYWNrZXIuc3RyaWN0LCBjeEhhc2ggPSBzdHJpY3RDeCA/IHN0YWNrLmN1ckNvbnRleHQuaGFzaCA6IDA7CiAgICAgICAgICAgICAgZm9yIChsZXQgY2FjaGVkID0gdGhpcy5mcmFnbWVudHMubm9kZUF0KHN0YXJ0KTsgY2FjaGVkOykgewogICAgICAgICAgICAgICAgICBsZXQgbWF0Y2ggPSB0aGlzLnBhcnNlci5ub2RlU2V0LnR5cGVzW2NhY2hlZC50eXBlLmlkXSA9PSBjYWNoZWQudHlwZSA/IHBhcnNlci5nZXRHb3RvKHN0YWNrLnN0YXRlLCBjYWNoZWQudHlwZS5pZCkgOiAtMTsKICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoID4gLTEgJiYgY2FjaGVkLmxlbmd0aCAmJiAoIXN0cmljdEN4IHx8IChjYWNoZWQucHJvcChOb2RlUHJvcC5jb250ZXh0SGFzaCkgfHwgMCkgPT0gY3hIYXNoKSkgewogICAgICAgICAgICAgICAgICAgICAgc3RhY2sudXNlTm9kZShjYWNoZWQsIG1hdGNoKTsKICAgICAgICAgICAgICAgICAgICAgIGlmICh2ZXJib3NlKQogICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGJhc2UgKyB0aGlzLnN0YWNrSUQoc3RhY2spICsgYCAodmlhIHJldXNlIG9mICR7cGFyc2VyLmdldE5hbWUoY2FjaGVkLnR5cGUuaWQpfSlgKTsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGlmICghKGNhY2hlZCBpbnN0YW5jZW9mIFRyZWUpIHx8IGNhY2hlZC5jaGlsZHJlbi5sZW5ndGggPT0gMCB8fCBjYWNoZWQucG9zaXRpb25zWzBdID4gMCkKICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICBsZXQgaW5uZXIgPSBjYWNoZWQuY2hpbGRyZW5bMF07CiAgICAgICAgICAgICAgICAgIGlmIChpbm5lciBpbnN0YW5jZW9mIFRyZWUgJiYgY2FjaGVkLnBvc2l0aW9uc1swXSA9PSAwKQogICAgICAgICAgICAgICAgICAgICAgY2FjaGVkID0gaW5uZXI7CiAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGxldCBkZWZhdWx0UmVkdWNlID0gcGFyc2VyLnN0YXRlU2xvdChzdGFjay5zdGF0ZSwgNCAvKiBEZWZhdWx0UmVkdWNlICovKTsKICAgICAgICAgIGlmIChkZWZhdWx0UmVkdWNlID4gMCkgewogICAgICAgICAgICAgIHN0YWNrLnJlZHVjZShkZWZhdWx0UmVkdWNlKTsKICAgICAgICAgICAgICBpZiAodmVyYm9zZSkKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYmFzZSArIHRoaXMuc3RhY2tJRChzdGFjaykgKyBgICh2aWEgYWx3YXlzLXJlZHVjZSAke3BhcnNlci5nZXROYW1lKGRlZmF1bHRSZWR1Y2UgJiA2NTUzNSAvKiBWYWx1ZU1hc2sgKi8pfSlgKTsKICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChzdGFjay5zdGFjay5sZW5ndGggPj0gMTUwMDAgLyogQ3V0RGVwdGggKi8pIHsKICAgICAgICAgICAgICB3aGlsZSAoc3RhY2suc3RhY2subGVuZ3RoID4gOTAwMCAvKiBDdXRUbyAqLyAmJiBzdGFjay5mb3JjZVJlZHVjZSgpKSB7IH0KICAgICAgICAgIH0KICAgICAgICAgIGxldCBhY3Rpb25zID0gdGhpcy50b2tlbnMuZ2V0QWN0aW9ucyhzdGFjayk7CiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFjdGlvbnMubGVuZ3RoOykgewogICAgICAgICAgICAgIGxldCBhY3Rpb24gPSBhY3Rpb25zW2krK10sIHRlcm0gPSBhY3Rpb25zW2krK10sIGVuZCA9IGFjdGlvbnNbaSsrXTsKICAgICAgICAgICAgICBsZXQgbGFzdCA9IGkgPT0gYWN0aW9ucy5sZW5ndGggfHwgIXNwbGl0OwogICAgICAgICAgICAgIGxldCBsb2NhbFN0YWNrID0gbGFzdCA/IHN0YWNrIDogc3RhY2suc3BsaXQoKTsKICAgICAgICAgICAgICBsb2NhbFN0YWNrLmFwcGx5KGFjdGlvbiwgdGVybSwgZW5kKTsKICAgICAgICAgICAgICBpZiAodmVyYm9zZSkKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYmFzZSArIHRoaXMuc3RhY2tJRChsb2NhbFN0YWNrKSArIGAgKHZpYSAkeyhhY3Rpb24gJiA2NTUzNiAvKiBSZWR1Y2VGbGFnICovKSA9PSAwID8gInNoaWZ0IgogICAgICAgICAgICAgICAgICAgIDogYHJlZHVjZSBvZiAke3BhcnNlci5nZXROYW1lKGFjdGlvbiAmIDY1NTM1IC8qIFZhbHVlTWFzayAqLyl9YH0gZm9yICR7cGFyc2VyLmdldE5hbWUodGVybSl9IEAgJHtzdGFydH0ke2xvY2FsU3RhY2sgPT0gc3RhY2sgPyAiIiA6ICIsIHNwbGl0In0pYCk7CiAgICAgICAgICAgICAgaWYgKGxhc3QpCiAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgIGVsc2UgaWYgKGxvY2FsU3RhY2sucG9zID4gc3RhcnQpCiAgICAgICAgICAgICAgICAgIHN0YWNrcy5wdXNoKGxvY2FsU3RhY2spOwogICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgc3BsaXQucHVzaChsb2NhbFN0YWNrKTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICAvLyBBZHZhbmNlIGEgZ2l2ZW4gc3RhY2sgZm9yd2FyZCBhcyBmYXIgYXMgaXQgd2lsbCBnby4gUmV0dXJucyB0aGUKICAgICAgLy8gKHBvc3NpYmx5IHVwZGF0ZWQpIHN0YWNrIGlmIGl0IGdvdCBzdHVjaywgb3IgbnVsbCBpZiBpdCBtb3ZlZAogICAgICAvLyBmb3J3YXJkIGFuZCB3YXMgZ2l2ZW4gdG8gYHB1c2hTdGFja0RlZHVwYC4KICAgICAgYWR2YW5jZUZ1bGx5KHN0YWNrLCBuZXdTdGFja3MpIHsKICAgICAgICAgIGxldCBwb3MgPSBzdGFjay5wb3M7CiAgICAgICAgICBmb3IgKDs7KSB7CiAgICAgICAgICAgICAgaWYgKCF0aGlzLmFkdmFuY2VTdGFjayhzdGFjaywgbnVsbCwgbnVsbCkpCiAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICBpZiAoc3RhY2sucG9zID4gcG9zKSB7CiAgICAgICAgICAgICAgICAgIHB1c2hTdGFja0RlZHVwKHN0YWNrLCBuZXdTdGFja3MpOwogICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgIH0KICAgICAgcnVuUmVjb3Zlcnkoc3RhY2tzLCB0b2tlbnMsIG5ld1N0YWNrcykgewogICAgICAgICAgbGV0IGZpbmlzaGVkID0gbnVsbCwgcmVzdGFydGVkID0gZmFsc2U7CiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0YWNrcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgIGxldCBzdGFjayA9IHN0YWNrc1tpXSwgdG9rZW4gPSB0b2tlbnNbaSA8PCAxXSwgdG9rZW5FbmQgPSB0b2tlbnNbKGkgPDwgMSkgKyAxXTsKICAgICAgICAgICAgICBsZXQgYmFzZSA9IHZlcmJvc2UgPyB0aGlzLnN0YWNrSUQoc3RhY2spICsgIiAtPiAiIDogIiI7CiAgICAgICAgICAgICAgaWYgKHN0YWNrLmRlYWRFbmQpIHsKICAgICAgICAgICAgICAgICAgaWYgKHJlc3RhcnRlZCkKICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICByZXN0YXJ0ZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICBzdGFjay5yZXN0YXJ0KCk7CiAgICAgICAgICAgICAgICAgIGlmICh2ZXJib3NlKQogICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYmFzZSArIHRoaXMuc3RhY2tJRChzdGFjaykgKyAiIChyZXN0YXJ0ZWQpIik7CiAgICAgICAgICAgICAgICAgIGxldCBkb25lID0gdGhpcy5hZHZhbmNlRnVsbHkoc3RhY2ssIG5ld1N0YWNrcyk7CiAgICAgICAgICAgICAgICAgIGlmIChkb25lKQogICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGxldCBmb3JjZSA9IHN0YWNrLnNwbGl0KCksIGZvcmNlQmFzZSA9IGJhc2U7CiAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGZvcmNlLmZvcmNlUmVkdWNlKCkgJiYgaiA8IDEwIC8qIEZvcmNlUmVkdWNlTGltaXQgKi87IGorKykgewogICAgICAgICAgICAgICAgICBpZiAodmVyYm9zZSkKICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGZvcmNlQmFzZSArIHRoaXMuc3RhY2tJRChmb3JjZSkgKyAiICh2aWEgZm9yY2UtcmVkdWNlKSIpOwogICAgICAgICAgICAgICAgICBsZXQgZG9uZSA9IHRoaXMuYWR2YW5jZUZ1bGx5KGZvcmNlLCBuZXdTdGFja3MpOwogICAgICAgICAgICAgICAgICBpZiAoZG9uZSkKICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICBpZiAodmVyYm9zZSkKICAgICAgICAgICAgICAgICAgICAgIGZvcmNlQmFzZSA9IHRoaXMuc3RhY2tJRChmb3JjZSkgKyAiIC0+ICI7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGZvciAobGV0IGluc2VydCBvZiBzdGFjay5yZWNvdmVyQnlJbnNlcnQodG9rZW4pKSB7CiAgICAgICAgICAgICAgICAgIGlmICh2ZXJib3NlKQogICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYmFzZSArIHRoaXMuc3RhY2tJRChpbnNlcnQpICsgIiAodmlhIHJlY292ZXItaW5zZXJ0KSIpOwogICAgICAgICAgICAgICAgICB0aGlzLmFkdmFuY2VGdWxseShpbnNlcnQsIG5ld1N0YWNrcyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmICh0aGlzLnN0cmVhbS5lbmQgPiBzdGFjay5wb3MpIHsKICAgICAgICAgICAgICAgICAgaWYgKHRva2VuRW5kID09IHN0YWNrLnBvcykgewogICAgICAgICAgICAgICAgICAgICAgdG9rZW5FbmQrKzsKICAgICAgICAgICAgICAgICAgICAgIHRva2VuID0gMCAvKiBFcnIgKi87CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgc3RhY2sucmVjb3ZlckJ5RGVsZXRlKHRva2VuLCB0b2tlbkVuZCk7CiAgICAgICAgICAgICAgICAgIGlmICh2ZXJib3NlKQogICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYmFzZSArIHRoaXMuc3RhY2tJRChzdGFjaykgKyBgICh2aWEgcmVjb3Zlci1kZWxldGUgJHt0aGlzLnBhcnNlci5nZXROYW1lKHRva2VuKX0pYCk7CiAgICAgICAgICAgICAgICAgIHB1c2hTdGFja0RlZHVwKHN0YWNrLCBuZXdTdGFja3MpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBlbHNlIGlmICghZmluaXNoZWQgfHwgZmluaXNoZWQuc2NvcmUgPCBzdGFjay5zY29yZSkgewogICAgICAgICAgICAgICAgICBmaW5pc2hlZCA9IHN0YWNrOwogICAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBmaW5pc2hlZDsKICAgICAgfQogICAgICAvLyBDb252ZXJ0IHRoZSBzdGFjaydzIGJ1ZmZlciB0byBhIHN5bnRheCB0cmVlLgogICAgICBzdGFja1RvVHJlZShzdGFjaykgewogICAgICAgICAgc3RhY2suY2xvc2UoKTsKICAgICAgICAgIHJldHVybiBUcmVlLmJ1aWxkKHsgYnVmZmVyOiBTdGFja0J1ZmZlckN1cnNvci5jcmVhdGUoc3RhY2spLAogICAgICAgICAgICAgIG5vZGVTZXQ6IHRoaXMucGFyc2VyLm5vZGVTZXQsCiAgICAgICAgICAgICAgdG9wSUQ6IHRoaXMudG9wVGVybSwKICAgICAgICAgICAgICBtYXhCdWZmZXJMZW5ndGg6IHRoaXMucGFyc2VyLmJ1ZmZlckxlbmd0aCwKICAgICAgICAgICAgICByZXVzZWQ6IHRoaXMucmV1c2VkLAogICAgICAgICAgICAgIHN0YXJ0OiB0aGlzLnJhbmdlc1swXS5mcm9tLAogICAgICAgICAgICAgIGxlbmd0aDogc3RhY2sucG9zIC0gdGhpcy5yYW5nZXNbMF0uZnJvbSwKICAgICAgICAgICAgICBtaW5SZXBlYXRUeXBlOiB0aGlzLnBhcnNlci5taW5SZXBlYXRUZXJtIH0pOwogICAgICB9CiAgICAgIHN0YWNrSUQoc3RhY2spIHsKICAgICAgICAgIGxldCBpZCA9IChzdGFja0lEcyB8fCAoc3RhY2tJRHMgPSBuZXcgV2Vha01hcCkpLmdldChzdGFjayk7CiAgICAgICAgICBpZiAoIWlkKQogICAgICAgICAgICAgIHN0YWNrSURzLnNldChzdGFjaywgaWQgPSBTdHJpbmcuZnJvbUNvZGVQb2ludCh0aGlzLm5leHRTdGFja0lEKyspKTsKICAgICAgICAgIHJldHVybiBpZCArIHN0YWNrOwogICAgICB9CiAgfQogIGZ1bmN0aW9uIHB1c2hTdGFja0RlZHVwKHN0YWNrLCBuZXdTdGFja3MpIHsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuZXdTdGFja3MubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGxldCBvdGhlciA9IG5ld1N0YWNrc1tpXTsKICAgICAgICAgIGlmIChvdGhlci5wb3MgPT0gc3RhY2sucG9zICYmIG90aGVyLnNhbWVTdGF0ZShzdGFjaykpIHsKICAgICAgICAgICAgICBpZiAobmV3U3RhY2tzW2ldLnNjb3JlIDwgc3RhY2suc2NvcmUpCiAgICAgICAgICAgICAgICAgIG5ld1N0YWNrc1tpXSA9IHN0YWNrOwogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgfQogICAgICBuZXdTdGFja3MucHVzaChzdGFjayk7CiAgfQogIGNsYXNzIERpYWxlY3QgewogICAgICBjb25zdHJ1Y3Rvcihzb3VyY2UsIGZsYWdzLCBkaXNhYmxlZCkgewogICAgICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7CiAgICAgICAgICB0aGlzLmZsYWdzID0gZmxhZ3M7CiAgICAgICAgICB0aGlzLmRpc2FibGVkID0gZGlzYWJsZWQ7CiAgICAgIH0KICAgICAgYWxsb3dzKHRlcm0pIHsgcmV0dXJuICF0aGlzLmRpc2FibGVkIHx8IHRoaXMuZGlzYWJsZWRbdGVybV0gPT0gMDsgfQogIH0KICBjb25zdCBpZCA9IHggPT4geDsKICAvLy8gQ29udGV4dCB0cmFja2VycyBhcmUgdXNlZCB0byB0cmFjayBzdGF0ZWZ1bCBjb250ZXh0IChzdWNoIGFzCiAgLy8vIGluZGVudGF0aW9uIGluIHRoZSBQeXRob24gZ3JhbW1hciwgb3IgcGFyZW50IGVsZW1lbnRzIGluIHRoZSBYTUwKICAvLy8gZ3JhbW1hcikgbmVlZGVkIGJ5IGV4dGVybmFsIHRva2VuaXplcnMuIFlvdSBkZWNsYXJlIHRoZW0gaW4gYQogIC8vLyBncmFtbWFyIGZpbGUgYXMgYEBjb250ZXh0IGV4cG9ydE5hbWUgZnJvbSAibW9kdWxlImAuCiAgLy8vCiAgLy8vIENvbnRleHQgdmFsdWVzIHNob3VsZCBiZSBpbW11dGFibGUsIGFuZCBjYW4gYmUgdXBkYXRlZCAocmVwbGFjZWQpCiAgLy8vIG9uIHNoaWZ0IG9yIHJlZHVjZSBhY3Rpb25zLgogIC8vLwogIC8vLyBUaGUgZXhwb3J0IHVzZWQgaW4gYSBgQGNvbnRleHRgIGRlY2xhcmF0aW9uIHNob3VsZCBiZSBvZiB0aGlzCiAgLy8vIHR5cGUuCiAgY2xhc3MgQ29udGV4dFRyYWNrZXIgewogICAgICAvLy8gRGVmaW5lIGEgY29udGV4dCB0cmFja2VyLgogICAgICBjb25zdHJ1Y3RvcihzcGVjKSB7CiAgICAgICAgICB0aGlzLnN0YXJ0ID0gc3BlYy5zdGFydDsKICAgICAgICAgIHRoaXMuc2hpZnQgPSBzcGVjLnNoaWZ0IHx8IGlkOwogICAgICAgICAgdGhpcy5yZWR1Y2UgPSBzcGVjLnJlZHVjZSB8fCBpZDsKICAgICAgICAgIHRoaXMucmV1c2UgPSBzcGVjLnJldXNlIHx8IGlkOwogICAgICAgICAgdGhpcy5oYXNoID0gc3BlYy5oYXNoIHx8ICgoKSA9PiAwKTsKICAgICAgICAgIHRoaXMuc3RyaWN0ID0gc3BlYy5zdHJpY3QgIT09IGZhbHNlOwogICAgICB9CiAgfQogIC8vLyBIb2xkcyB0aGUgcGFyc2UgdGFibGVzIGZvciBhIGdpdmVuIGdyYW1tYXIsIGFzIGdlbmVyYXRlZCBieQogIC8vLyBgbGV6ZXItZ2VuZXJhdG9yYCwgYW5kIHByb3ZpZGVzIFttZXRob2RzXSgjY29tbW9uLlBhcnNlcikgdG8gcGFyc2UKICAvLy8gY29udGVudCB3aXRoLgogIGNsYXNzIExSUGFyc2VyIGV4dGVuZHMgUGFyc2VyIHsKICAgICAgLy8vIEBpbnRlcm5hbAogICAgICBjb25zdHJ1Y3RvcihzcGVjKSB7CiAgICAgICAgICBzdXBlcigpOwogICAgICAgICAgLy8vIEBpbnRlcm5hbAogICAgICAgICAgdGhpcy53cmFwcGVycyA9IFtdOwogICAgICAgICAgaWYgKHNwZWMudmVyc2lvbiAhPSAxNCAvKiBWZXJzaW9uICovKQogICAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKGBQYXJzZXIgdmVyc2lvbiAoJHtzcGVjLnZlcnNpb259KSBkb2Vzbid0IG1hdGNoIHJ1bnRpbWUgdmVyc2lvbiAoJHsxNCAvKiBWZXJzaW9uICovfSlgKTsKICAgICAgICAgIGxldCBub2RlTmFtZXMgPSBzcGVjLm5vZGVOYW1lcy5zcGxpdCgiICIpOwogICAgICAgICAgdGhpcy5taW5SZXBlYXRUZXJtID0gbm9kZU5hbWVzLmxlbmd0aDsKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3BlYy5yZXBlYXROb2RlQ291bnQ7IGkrKykKICAgICAgICAgICAgICBub2RlTmFtZXMucHVzaCgiIik7CiAgICAgICAgICBsZXQgdG9wVGVybXMgPSBPYmplY3Qua2V5cyhzcGVjLnRvcFJ1bGVzKS5tYXAociA9PiBzcGVjLnRvcFJ1bGVzW3JdWzFdKTsKICAgICAgICAgIGxldCBub2RlUHJvcHMgPSBbXTsKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbm9kZU5hbWVzLmxlbmd0aDsgaSsrKQogICAgICAgICAgICAgIG5vZGVQcm9wcy5wdXNoKFtdKTsKICAgICAgICAgIGZ1bmN0aW9uIHNldFByb3Aobm9kZUlELCBwcm9wLCB2YWx1ZSkgewogICAgICAgICAgICAgIG5vZGVQcm9wc1tub2RlSURdLnB1c2goW3Byb3AsIHByb3AuZGVzZXJpYWxpemUoU3RyaW5nKHZhbHVlKSldKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChzcGVjLm5vZGVQcm9wcykKICAgICAgICAgICAgICBmb3IgKGxldCBwcm9wU3BlYyBvZiBzcGVjLm5vZGVQcm9wcykgewogICAgICAgICAgICAgICAgICBsZXQgcHJvcCA9IHByb3BTcGVjWzBdOwogICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHByb3AgPT0gInN0cmluZyIpCiAgICAgICAgICAgICAgICAgICAgICBwcm9wID0gTm9kZVByb3BbcHJvcF07CiAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgcHJvcFNwZWMubGVuZ3RoOykgewogICAgICAgICAgICAgICAgICAgICAgbGV0IG5leHQgPSBwcm9wU3BlY1tpKytdOwogICAgICAgICAgICAgICAgICAgICAgaWYgKG5leHQgPj0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHNldFByb3AobmV4dCwgcHJvcCwgcHJvcFNwZWNbaSsrXSk7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdmFsdWUgPSBwcm9wU3BlY1tpICsgLW5leHRdOwogICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAtbmV4dDsgaiA+IDA7IGotLSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0UHJvcChwcm9wU3BlY1tpKytdLCBwcm9wLCB2YWx1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgaSsrOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgdGhpcy5ub2RlU2V0ID0gbmV3IE5vZGVTZXQobm9kZU5hbWVzLm1hcCgobmFtZSwgaSkgPT4gTm9kZVR5cGUuZGVmaW5lKHsKICAgICAgICAgICAgICBuYW1lOiBpID49IHRoaXMubWluUmVwZWF0VGVybSA/IHVuZGVmaW5lZCA6IG5hbWUsCiAgICAgICAgICAgICAgaWQ6IGksCiAgICAgICAgICAgICAgcHJvcHM6IG5vZGVQcm9wc1tpXSwKICAgICAgICAgICAgICB0b3A6IHRvcFRlcm1zLmluZGV4T2YoaSkgPiAtMSwKICAgICAgICAgICAgICBlcnJvcjogaSA9PSAwLAogICAgICAgICAgICAgIHNraXBwZWQ6IHNwZWMuc2tpcHBlZE5vZGVzICYmIHNwZWMuc2tpcHBlZE5vZGVzLmluZGV4T2YoaSkgPiAtMQogICAgICAgICAgfSkpKTsKICAgICAgICAgIGlmIChzcGVjLnByb3BTb3VyY2VzKQogICAgICAgICAgICAgIHRoaXMubm9kZVNldCA9IHRoaXMubm9kZVNldC5leHRlbmQoLi4uc3BlYy5wcm9wU291cmNlcyk7CiAgICAgICAgICB0aGlzLnN0cmljdCA9IGZhbHNlOwogICAgICAgICAgdGhpcy5idWZmZXJMZW5ndGggPSBEZWZhdWx0QnVmZmVyTGVuZ3RoOwogICAgICAgICAgbGV0IHRva2VuQXJyYXkgPSBkZWNvZGVBcnJheShzcGVjLnRva2VuRGF0YSk7CiAgICAgICAgICB0aGlzLmNvbnRleHQgPSBzcGVjLmNvbnRleHQ7CiAgICAgICAgICB0aGlzLnNwZWNpYWxpemVyU3BlY3MgPSBzcGVjLnNwZWNpYWxpemVkIHx8IFtdOwogICAgICAgICAgdGhpcy5zcGVjaWFsaXplZCA9IG5ldyBVaW50MTZBcnJheSh0aGlzLnNwZWNpYWxpemVyU3BlY3MubGVuZ3RoKTsKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zcGVjaWFsaXplclNwZWNzLmxlbmd0aDsgaSsrKQogICAgICAgICAgICAgIHRoaXMuc3BlY2lhbGl6ZWRbaV0gPSB0aGlzLnNwZWNpYWxpemVyU3BlY3NbaV0udGVybTsKICAgICAgICAgIHRoaXMuc3BlY2lhbGl6ZXJzID0gdGhpcy5zcGVjaWFsaXplclNwZWNzLm1hcChnZXRTcGVjaWFsaXplcik7CiAgICAgICAgICB0aGlzLnN0YXRlcyA9IGRlY29kZUFycmF5KHNwZWMuc3RhdGVzLCBVaW50MzJBcnJheSk7CiAgICAgICAgICB0aGlzLmRhdGEgPSBkZWNvZGVBcnJheShzcGVjLnN0YXRlRGF0YSk7CiAgICAgICAgICB0aGlzLmdvdG8gPSBkZWNvZGVBcnJheShzcGVjLmdvdG8pOwogICAgICAgICAgdGhpcy5tYXhUZXJtID0gc3BlYy5tYXhUZXJtOwogICAgICAgICAgdGhpcy50b2tlbml6ZXJzID0gc3BlYy50b2tlbml6ZXJzLm1hcCh2YWx1ZSA9PiB0eXBlb2YgdmFsdWUgPT0gIm51bWJlciIgPyBuZXcgVG9rZW5Hcm91cCh0b2tlbkFycmF5LCB2YWx1ZSkgOiB2YWx1ZSk7CiAgICAgICAgICB0aGlzLnRvcFJ1bGVzID0gc3BlYy50b3BSdWxlczsKICAgICAgICAgIHRoaXMuZGlhbGVjdHMgPSBzcGVjLmRpYWxlY3RzIHx8IHt9OwogICAgICAgICAgdGhpcy5keW5hbWljUHJlY2VkZW5jZXMgPSBzcGVjLmR5bmFtaWNQcmVjZWRlbmNlcyB8fCBudWxsOwogICAgICAgICAgdGhpcy50b2tlblByZWNUYWJsZSA9IHNwZWMudG9rZW5QcmVjOwogICAgICAgICAgdGhpcy50ZXJtTmFtZXMgPSBzcGVjLnRlcm1OYW1lcyB8fCBudWxsOwogICAgICAgICAgdGhpcy5tYXhOb2RlID0gdGhpcy5ub2RlU2V0LnR5cGVzLmxlbmd0aCAtIDE7CiAgICAgICAgICB0aGlzLmRpYWxlY3QgPSB0aGlzLnBhcnNlRGlhbGVjdCgpOwogICAgICAgICAgdGhpcy50b3AgPSB0aGlzLnRvcFJ1bGVzW09iamVjdC5rZXlzKHRoaXMudG9wUnVsZXMpWzBdXTsKICAgICAgfQogICAgICBjcmVhdGVQYXJzZShpbnB1dCwgZnJhZ21lbnRzLCByYW5nZXMpIHsKICAgICAgICAgIGxldCBwYXJzZSA9IG5ldyBQYXJzZSh0aGlzLCBpbnB1dCwgZnJhZ21lbnRzLCByYW5nZXMpOwogICAgICAgICAgZm9yIChsZXQgdyBvZiB0aGlzLndyYXBwZXJzKQogICAgICAgICAgICAgIHBhcnNlID0gdyhwYXJzZSwgaW5wdXQsIGZyYWdtZW50cywgcmFuZ2VzKTsKICAgICAgICAgIHJldHVybiBwYXJzZTsKICAgICAgfQogICAgICAvLy8gR2V0IGEgZ290byB0YWJsZSBlbnRyeSBAaW50ZXJuYWwKICAgICAgZ2V0R290byhzdGF0ZSwgdGVybSwgbG9vc2UgPSBmYWxzZSkgewogICAgICAgICAgbGV0IHRhYmxlID0gdGhpcy5nb3RvOwogICAgICAgICAgaWYgKHRlcm0gPj0gdGFibGVbMF0pCiAgICAgICAgICAgICAgcmV0dXJuIC0xOwogICAgICAgICAgZm9yIChsZXQgcG9zID0gdGFibGVbdGVybSArIDFdOzspIHsKICAgICAgICAgICAgICBsZXQgZ3JvdXBUYWcgPSB0YWJsZVtwb3MrK10sIGxhc3QgPSBncm91cFRhZyAmIDE7CiAgICAgICAgICAgICAgbGV0IHRhcmdldCA9IHRhYmxlW3BvcysrXTsKICAgICAgICAgICAgICBpZiAobGFzdCAmJiBsb29zZSkKICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldDsKICAgICAgICAgICAgICBmb3IgKGxldCBlbmQgPSBwb3MgKyAoZ3JvdXBUYWcgPj4gMSk7IHBvcyA8IGVuZDsgcG9zKyspCiAgICAgICAgICAgICAgICAgIGlmICh0YWJsZVtwb3NdID09IHN0YXRlKQogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldDsKICAgICAgICAgICAgICBpZiAobGFzdCkKICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xOwogICAgICAgICAgfQogICAgICB9CiAgICAgIC8vLyBDaGVjayBpZiB0aGlzIHN0YXRlIGhhcyBhbiBhY3Rpb24gZm9yIGEgZ2l2ZW4gdGVybWluYWwgQGludGVybmFsCiAgICAgIGhhc0FjdGlvbihzdGF0ZSwgdGVybWluYWwpIHsKICAgICAgICAgIGxldCBkYXRhID0gdGhpcy5kYXRhOwogICAgICAgICAgZm9yIChsZXQgc2V0ID0gMDsgc2V0IDwgMjsgc2V0KyspIHsKICAgICAgICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5zdGF0ZVNsb3Qoc3RhdGUsIHNldCA/IDIgLyogU2tpcCAqLyA6IDEgLyogQWN0aW9ucyAqLyksIG5leHQ7OyBpICs9IDMpIHsKICAgICAgICAgICAgICAgICAgaWYgKChuZXh0ID0gZGF0YVtpXSkgPT0gNjU1MzUgLyogRW5kICovKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YVtpICsgMV0gPT0gMSAvKiBOZXh0ICovKQogICAgICAgICAgICAgICAgICAgICAgICAgIG5leHQgPSBkYXRhW2kgPSBwYWlyKGRhdGEsIGkgKyAyKV07CiAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChkYXRhW2kgKyAxXSA9PSAyIC8qIE90aGVyICovKQogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwYWlyKGRhdGEsIGkgKyAyKTsKICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBpZiAobmV4dCA9PSB0ZXJtaW5hbCB8fCBuZXh0ID09IDAgLyogRXJyICovKQogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhaXIoZGF0YSwgaSArIDEpOwogICAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiAwOwogICAgICB9CiAgICAgIC8vLyBAaW50ZXJuYWwKICAgICAgc3RhdGVTbG90KHN0YXRlLCBzbG90KSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZXNbKHN0YXRlICogNiAvKiBTaXplICovKSArIHNsb3RdOwogICAgICB9CiAgICAgIC8vLyBAaW50ZXJuYWwKICAgICAgc3RhdGVGbGFnKHN0YXRlLCBmbGFnKSB7CiAgICAgICAgICByZXR1cm4gKHRoaXMuc3RhdGVTbG90KHN0YXRlLCAwIC8qIEZsYWdzICovKSAmIGZsYWcpID4gMDsKICAgICAgfQogICAgICAvLy8gQGludGVybmFsCiAgICAgIHZhbGlkQWN0aW9uKHN0YXRlLCBhY3Rpb24pIHsKICAgICAgICAgIGlmIChhY3Rpb24gPT0gdGhpcy5zdGF0ZVNsb3Qoc3RhdGUsIDQgLyogRGVmYXVsdFJlZHVjZSAqLykpCiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5zdGF0ZVNsb3Qoc3RhdGUsIDEgLyogQWN0aW9ucyAqLyk7OyBpICs9IDMpIHsKICAgICAgICAgICAgICBpZiAodGhpcy5kYXRhW2ldID09IDY1NTM1IC8qIEVuZCAqLykgewogICAgICAgICAgICAgICAgICBpZiAodGhpcy5kYXRhW2kgKyAxXSA9PSAxIC8qIE5leHQgKi8pCiAgICAgICAgICAgICAgICAgICAgICBpID0gcGFpcih0aGlzLmRhdGEsIGkgKyAyKTsKICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoYWN0aW9uID09IHBhaXIodGhpcy5kYXRhLCBpICsgMSkpCiAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgfQogICAgICB9CiAgICAgIC8vLyBHZXQgdGhlIHN0YXRlcyB0aGF0IGNhbiBmb2xsb3cgdGhpcyBvbmUgdGhyb3VnaCBzaGlmdCBhY3Rpb25zIG9yCiAgICAgIC8vLyBnb3RvIGp1bXBzLiBAaW50ZXJuYWwKICAgICAgbmV4dFN0YXRlcyhzdGF0ZSkgewogICAgICAgICAgbGV0IHJlc3VsdCA9IFtdOwogICAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMuc3RhdGVTbG90KHN0YXRlLCAxIC8qIEFjdGlvbnMgKi8pOzsgaSArPSAzKSB7CiAgICAgICAgICAgICAgaWYgKHRoaXMuZGF0YVtpXSA9PSA2NTUzNSAvKiBFbmQgKi8pIHsKICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZGF0YVtpICsgMV0gPT0gMSAvKiBOZXh0ICovKQogICAgICAgICAgICAgICAgICAgICAgaSA9IHBhaXIodGhpcy5kYXRhLCBpICsgMik7CiAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoKHRoaXMuZGF0YVtpICsgMl0gJiAoNjU1MzYgLyogUmVkdWNlRmxhZyAqLyA+PiAxNikpID09IDApIHsKICAgICAgICAgICAgICAgICAgbGV0IHZhbHVlID0gdGhpcy5kYXRhW2kgKyAxXTsKICAgICAgICAgICAgICAgICAgaWYgKCFyZXN1bHQuc29tZSgodiwgaSkgPT4gKGkgJiAxKSAmJiB2ID09IHZhbHVlKSkKICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHRoaXMuZGF0YVtpXSwgdmFsdWUpOwogICAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgIH0KICAgICAgLy8vIEBpbnRlcm5hbAogICAgICBvdmVycmlkZXModG9rZW4sIHByZXYpIHsKICAgICAgICAgIGxldCBpUHJldiA9IGZpbmRPZmZzZXQodGhpcy5kYXRhLCB0aGlzLnRva2VuUHJlY1RhYmxlLCBwcmV2KTsKICAgICAgICAgIHJldHVybiBpUHJldiA8IDAgfHwgZmluZE9mZnNldCh0aGlzLmRhdGEsIHRoaXMudG9rZW5QcmVjVGFibGUsIHRva2VuKSA8IGlQcmV2OwogICAgICB9CiAgICAgIC8vLyBDb25maWd1cmUgdGhlIHBhcnNlci4gUmV0dXJucyBhIG5ldyBwYXJzZXIgaW5zdGFuY2UgdGhhdCBoYXMgdGhlCiAgICAgIC8vLyBnaXZlbiBzZXR0aW5ncyBtb2RpZmllZC4gU2V0dGluZ3Mgbm90IHByb3ZpZGVkIGluIGBjb25maWdgIGFyZQogICAgICAvLy8ga2VwdCBmcm9tIHRoZSBvcmlnaW5hbCBwYXJzZXIuCiAgICAgIGNvbmZpZ3VyZShjb25maWcpIHsKICAgICAgICAgIC8vIEhpZGVvdXMgcmVmbGVjdGlvbi1iYXNlZCBrbHVkZ2UgdG8gbWFrZSBpdCBlYXN5IHRvIGNyZWF0ZSBhCiAgICAgICAgICAvLyBzbGlnaHRseSBtb2RpZmllZCBjb3B5IG9mIGEgcGFyc2VyLgogICAgICAgICAgbGV0IGNvcHkgPSBPYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoTFJQYXJzZXIucHJvdG90eXBlKSwgdGhpcyk7CiAgICAgICAgICBpZiAoY29uZmlnLnByb3BzKQogICAgICAgICAgICAgIGNvcHkubm9kZVNldCA9IHRoaXMubm9kZVNldC5leHRlbmQoLi4uY29uZmlnLnByb3BzKTsKICAgICAgICAgIGlmIChjb25maWcudG9wKSB7CiAgICAgICAgICAgICAgbGV0IGluZm8gPSB0aGlzLnRvcFJ1bGVzW2NvbmZpZy50b3BdOwogICAgICAgICAgICAgIGlmICghaW5mbykKICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoYEludmFsaWQgdG9wIHJ1bGUgbmFtZSAke2NvbmZpZy50b3B9YCk7CiAgICAgICAgICAgICAgY29weS50b3AgPSBpbmZvOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGNvbmZpZy50b2tlbml6ZXJzKQogICAgICAgICAgICAgIGNvcHkudG9rZW5pemVycyA9IHRoaXMudG9rZW5pemVycy5tYXAodCA9PiB7CiAgICAgICAgICAgICAgICAgIGxldCBmb3VuZCA9IGNvbmZpZy50b2tlbml6ZXJzLmZpbmQociA9PiByLmZyb20gPT0gdCk7CiAgICAgICAgICAgICAgICAgIHJldHVybiBmb3VuZCA/IGZvdW5kLnRvIDogdDsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgIGlmIChjb25maWcuc3BlY2lhbGl6ZXJzKSB7CiAgICAgICAgICAgICAgY29weS5zcGVjaWFsaXplcnMgPSB0aGlzLnNwZWNpYWxpemVycy5zbGljZSgpOwogICAgICAgICAgICAgIGNvcHkuc3BlY2lhbGl6ZXJTcGVjcyA9IHRoaXMuc3BlY2lhbGl6ZXJTcGVjcy5tYXAoKHMsIGkpID0+IHsKICAgICAgICAgICAgICAgICAgbGV0IGZvdW5kID0gY29uZmlnLnNwZWNpYWxpemVycy5maW5kKHIgPT4gci5mcm9tID09IHMuZXh0ZXJuYWwpOwogICAgICAgICAgICAgICAgICBpZiAoIWZvdW5kKQogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHM7CiAgICAgICAgICAgICAgICAgIGxldCBzcGVjID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBzKSwgeyBleHRlcm5hbDogZm91bmQudG8gfSk7CiAgICAgICAgICAgICAgICAgIGNvcHkuc3BlY2lhbGl6ZXJzW2ldID0gZ2V0U3BlY2lhbGl6ZXIoc3BlYyk7CiAgICAgICAgICAgICAgICAgIHJldHVybiBzcGVjOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGNvbmZpZy5jb250ZXh0VHJhY2tlcikKICAgICAgICAgICAgICBjb3B5LmNvbnRleHQgPSBjb25maWcuY29udGV4dFRyYWNrZXI7CiAgICAgICAgICBpZiAoY29uZmlnLmRpYWxlY3QpCiAgICAgICAgICAgICAgY29weS5kaWFsZWN0ID0gdGhpcy5wYXJzZURpYWxlY3QoY29uZmlnLmRpYWxlY3QpOwogICAgICAgICAgaWYgKGNvbmZpZy5zdHJpY3QgIT0gbnVsbCkKICAgICAgICAgICAgICBjb3B5LnN0cmljdCA9IGNvbmZpZy5zdHJpY3Q7CiAgICAgICAgICBpZiAoY29uZmlnLndyYXApCiAgICAgICAgICAgICAgY29weS53cmFwcGVycyA9IGNvcHkud3JhcHBlcnMuY29uY2F0KGNvbmZpZy53cmFwKTsKICAgICAgICAgIGlmIChjb25maWcuYnVmZmVyTGVuZ3RoICE9IG51bGwpCiAgICAgICAgICAgICAgY29weS5idWZmZXJMZW5ndGggPSBjb25maWcuYnVmZmVyTGVuZ3RoOwogICAgICAgICAgcmV0dXJuIGNvcHk7CiAgICAgIH0KICAgICAgLy8vIFRlbGxzIHlvdSB3aGV0aGVyIGFueSBbcGFyc2Ugd3JhcHBlcnNdKCNsci5QYXJzZXJDb25maWcud3JhcCkKICAgICAgLy8vIGFyZSByZWdpc3RlcmVkIGZvciB0aGlzIHBhcnNlci4KICAgICAgaGFzV3JhcHBlcnMoKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy53cmFwcGVycy5sZW5ndGggPiAwOwogICAgICB9CiAgICAgIC8vLyBSZXR1cm5zIHRoZSBuYW1lIGFzc29jaWF0ZWQgd2l0aCBhIGdpdmVuIHRlcm0uIFRoaXMgd2lsbCBvbmx5CiAgICAgIC8vLyB3b3JrIGZvciBhbGwgdGVybXMgd2hlbiB0aGUgcGFyc2VyIHdhcyBnZW5lcmF0ZWQgd2l0aCB0aGUKICAgICAgLy8vIGAtLW5hbWVzYCBvcHRpb24uIEJ5IGRlZmF1bHQsIG9ubHkgdGhlIG5hbWVzIG9mIHRhZ2dlZCB0ZXJtcyBhcmUKICAgICAgLy8vIHN0b3JlZC4KICAgICAgZ2V0TmFtZSh0ZXJtKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy50ZXJtTmFtZXMgPyB0aGlzLnRlcm1OYW1lc1t0ZXJtXSA6IFN0cmluZyh0ZXJtIDw9IHRoaXMubWF4Tm9kZSAmJiB0aGlzLm5vZGVTZXQudHlwZXNbdGVybV0ubmFtZSB8fCB0ZXJtKTsKICAgICAgfQogICAgICAvLy8gVGhlIGVvZiB0ZXJtIGlkIGlzIGFsd2F5cyBhbGxvY2F0ZWQgZGlyZWN0bHkgYWZ0ZXIgdGhlIG5vZGUKICAgICAgLy8vIHR5cGVzLiBAaW50ZXJuYWwKICAgICAgZ2V0IGVvZlRlcm0oKSB7IHJldHVybiB0aGlzLm1heE5vZGUgKyAxOyB9CiAgICAgIC8vLyBUaGUgdHlwZSBvZiB0b3Agbm9kZSBwcm9kdWNlZCBieSB0aGUgcGFyc2VyLgogICAgICBnZXQgdG9wTm9kZSgpIHsgcmV0dXJuIHRoaXMubm9kZVNldC50eXBlc1t0aGlzLnRvcFsxXV07IH0KICAgICAgLy8vIEBpbnRlcm5hbAogICAgICBkeW5hbWljUHJlY2VkZW5jZSh0ZXJtKSB7CiAgICAgICAgICBsZXQgcHJlYyA9IHRoaXMuZHluYW1pY1ByZWNlZGVuY2VzOwogICAgICAgICAgcmV0dXJuIHByZWMgPT0gbnVsbCA/IDAgOiBwcmVjW3Rlcm1dIHx8IDA7CiAgICAgIH0KICAgICAgLy8vIEBpbnRlcm5hbAogICAgICBwYXJzZURpYWxlY3QoZGlhbGVjdCkgewogICAgICAgICAgbGV0IHZhbHVlcyA9IE9iamVjdC5rZXlzKHRoaXMuZGlhbGVjdHMpLCBmbGFncyA9IHZhbHVlcy5tYXAoKCkgPT4gZmFsc2UpOwogICAgICAgICAgaWYgKGRpYWxlY3QpCiAgICAgICAgICAgICAgZm9yIChsZXQgcGFydCBvZiBkaWFsZWN0LnNwbGl0KCIgIikpIHsKICAgICAgICAgICAgICAgICAgbGV0IGlkID0gdmFsdWVzLmluZGV4T2YocGFydCk7CiAgICAgICAgICAgICAgICAgIGlmIChpZCA+PSAwKQogICAgICAgICAgICAgICAgICAgICAgZmxhZ3NbaWRdID0gdHJ1ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICBsZXQgZGlzYWJsZWQgPSBudWxsOwogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2YWx1ZXMubGVuZ3RoOyBpKyspCiAgICAgICAgICAgICAgaWYgKCFmbGFnc1tpXSkgewogICAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gdGhpcy5kaWFsZWN0c1t2YWx1ZXNbaV1dLCBpZDsgKGlkID0gdGhpcy5kYXRhW2orK10pICE9IDY1NTM1IC8qIEVuZCAqLzspCiAgICAgICAgICAgICAgICAgICAgICAoZGlzYWJsZWQgfHwgKGRpc2FibGVkID0gbmV3IFVpbnQ4QXJyYXkodGhpcy5tYXhUZXJtICsgMSkpKVtpZF0gPSAxOwogICAgICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBuZXcgRGlhbGVjdChkaWFsZWN0LCBmbGFncywgZGlzYWJsZWQpOwogICAgICB9CiAgICAgIC8vLyBVc2VkIGJ5IHRoZSBvdXRwdXQgb2YgdGhlIHBhcnNlciBnZW5lcmF0b3IuIE5vdCBhdmFpbGFibGUgdG8KICAgICAgLy8vIHVzZXIgY29kZS4KICAgICAgc3RhdGljIGRlc2VyaWFsaXplKHNwZWMpIHsKICAgICAgICAgIHJldHVybiBuZXcgTFJQYXJzZXIoc3BlYyk7CiAgICAgIH0KICB9CiAgZnVuY3Rpb24gcGFpcihkYXRhLCBvZmYpIHsgcmV0dXJuIGRhdGFbb2ZmXSB8IChkYXRhW29mZiArIDFdIDw8IDE2KTsgfQogIGZ1bmN0aW9uIGZpbmRPZmZzZXQoZGF0YSwgc3RhcnQsIHRlcm0pIHsKICAgICAgZm9yIChsZXQgaSA9IHN0YXJ0LCBuZXh0OyAobmV4dCA9IGRhdGFbaV0pICE9IDY1NTM1IC8qIEVuZCAqLzsgaSsrKQogICAgICAgICAgaWYgKG5leHQgPT0gdGVybSkKICAgICAgICAgICAgICByZXR1cm4gaSAtIHN0YXJ0OwogICAgICByZXR1cm4gLTE7CiAgfQogIGZ1bmN0aW9uIGZpbmRGaW5pc2hlZChzdGFja3MpIHsKICAgICAgbGV0IGJlc3QgPSBudWxsOwogICAgICBmb3IgKGxldCBzdGFjayBvZiBzdGFja3MpIHsKICAgICAgICAgIGxldCBzdG9wcGVkID0gc3RhY2sucC5zdG9wcGVkQXQ7CiAgICAgICAgICBpZiAoKHN0YWNrLnBvcyA9PSBzdGFjay5wLnN0cmVhbS5lbmQgfHwgc3RvcHBlZCAhPSBudWxsICYmIHN0YWNrLnBvcyA+IHN0b3BwZWQpICYmCiAgICAgICAgICAgICAgc3RhY2sucC5wYXJzZXIuc3RhdGVGbGFnKHN0YWNrLnN0YXRlLCAyIC8qIEFjY2VwdGluZyAqLykgJiYKICAgICAgICAgICAgICAoIWJlc3QgfHwgYmVzdC5zY29yZSA8IHN0YWNrLnNjb3JlKSkKICAgICAgICAgICAgICBiZXN0ID0gc3RhY2s7CiAgICAgIH0KICAgICAgcmV0dXJuIGJlc3Q7CiAgfQogIGZ1bmN0aW9uIGdldFNwZWNpYWxpemVyKHNwZWMpIHsKICAgICAgaWYgKHNwZWMuZXh0ZXJuYWwpIHsKICAgICAgICAgIGxldCBtYXNrID0gc3BlYy5leHRlbmQgPyAxIC8qIEV4dGVuZCAqLyA6IDAgLyogU3BlY2lhbGl6ZSAqLzsKICAgICAgICAgIHJldHVybiAodmFsdWUsIHN0YWNrKSA9PiAoc3BlYy5leHRlcm5hbCh2YWx1ZSwgc3RhY2spIDw8IDEpIHwgbWFzazsKICAgICAgfQogICAgICByZXR1cm4gc3BlYy5nZXQ7CiAgfQoKICBsZXQgbmV4dFRhZ0lEID0gMDsKICAvLy8gSGlnaGxpZ2h0aW5nIHRhZ3MgYXJlIG1hcmtlcnMgdGhhdCBkZW5vdGUgYSBoaWdobGlnaHRpbmcgY2F0ZWdvcnkuCiAgLy8vIFRoZXkgYXJlIFthc3NvY2lhdGVkXSgjaGlnaGxpZ2h0LnN0eWxlVGFncykgd2l0aCBwYXJ0cyBvZiBhIHN5bnRheAogIC8vLyB0cmVlIGJ5IGEgbGFuZ3VhZ2UgbW9kZSwgYW5kIHRoZW4gbWFwcGVkIHRvIGFuIGFjdHVhbCBDU1Mgc3R5bGUgYnkKICAvLy8gYSBbaGlnaGxpZ2h0ZXJdKCNoaWdobGlnaHQuSGlnaGxpZ2h0ZXIpLgogIC8vLwogIC8vLyBCZWNhdXNlIHN5bnRheCB0cmVlIG5vZGUgdHlwZXMgYW5kIGhpZ2hsaWdodCBzdHlsZXMgaGF2ZSB0byBiZQogIC8vLyBhYmxlIHRvIHRhbGsgdGhlIHNhbWUgbGFuZ3VhZ2UsIENvZGVNaXJyb3IgdXNlcyBhIG1vc3RseSBfY2xvc2VkXwogIC8vLyBbdm9jYWJ1bGFyeV0oI2hpZ2hsaWdodC50YWdzKSBvZiBzeW50YXggdGFncyAoYXMgb3Bwb3NlZCB0bwogIC8vLyB0cmFkaXRpb25hbCBvcGVuIHN0cmluZy1iYXNlZCBzeXN0ZW1zLCB3aGljaCBtYWtlIGl0IGhhcmQgZm9yCiAgLy8vIGhpZ2hsaWdodGluZyB0aGVtZXMgdG8gY292ZXIgYWxsIHRoZSB0b2tlbnMgcHJvZHVjZWQgYnkgdGhlCiAgLy8vIHZhcmlvdXMgbGFuZ3VhZ2VzKS4KICAvLy8KICAvLy8gSXQgX2lzXyBwb3NzaWJsZSB0byBbZGVmaW5lXSgjaGlnaGxpZ2h0LlRhZ15kZWZpbmUpIHlvdXIgb3duCiAgLy8vIGhpZ2hsaWdodGluZyB0YWdzIGZvciBzeXN0ZW0taW50ZXJuYWwgdXNlICh3aGVyZSB5b3UgY29udHJvbCBib3RoCiAgLy8vIHRoZSBsYW5ndWFnZSBwYWNrYWdlIGFuZCB0aGUgaGlnaGxpZ2h0ZXIpLCBidXQgc3VjaCB0YWdzIHdpbGwgbm90CiAgLy8vIGJlIHBpY2tlZCB1cCBieSByZWd1bGFyIGhpZ2hsaWdodGVycyAodGhvdWdoIHlvdSBjYW4gZGVyaXZlIHRoZW0KICAvLy8gZnJvbSBzdGFuZGFyZCB0YWdzIHRvIGFsbG93IGhpZ2hsaWdodGVycyB0byBmYWxsIGJhY2sgdG8gdGhvc2UpLgogIGNsYXNzIFRhZyB7CiAgICAgIC8vLyBAaW50ZXJuYWwKICAgICAgY29uc3RydWN0b3IoCiAgICAgIC8vLyBUaGUgc2V0IG9mIHRoaXMgdGFnIGFuZCBhbGwgaXRzIHBhcmVudCB0YWdzLCBzdGFydGluZyB3aXRoCiAgICAgIC8vLyB0aGlzIG9uZSBpdHNlbGYgYW5kIHNvcnRlZCBpbiBvcmRlciBvZiBkZWNyZWFzaW5nIHNwZWNpZmljaXR5LgogICAgICBzZXQsIAogICAgICAvLy8gVGhlIGJhc2UgdW5tb2RpZmllZCB0YWcgdGhhdCB0aGlzIG9uZSBpcyBiYXNlZCBvbiwgaWYgaXQncwogICAgICAvLy8gbW9kaWZpZWQgQGludGVybmFsCiAgICAgIGJhc2UsIAogICAgICAvLy8gVGhlIG1vZGlmaWVycyBhcHBsaWVkIHRvIHRoaXMuYmFzZSBAaW50ZXJuYWwKICAgICAgbW9kaWZpZWQpIHsKICAgICAgICAgIHRoaXMuc2V0ID0gc2V0OwogICAgICAgICAgdGhpcy5iYXNlID0gYmFzZTsKICAgICAgICAgIHRoaXMubW9kaWZpZWQgPSBtb2RpZmllZDsKICAgICAgICAgIC8vLyBAaW50ZXJuYWwKICAgICAgICAgIHRoaXMuaWQgPSBuZXh0VGFnSUQrKzsKICAgICAgfQogICAgICAvLy8gRGVmaW5lIGEgbmV3IHRhZy4gSWYgYHBhcmVudGAgaXMgZ2l2ZW4sIHRoZSB0YWcgaXMgdHJlYXRlZCBhcyBhCiAgICAgIC8vLyBzdWItdGFnIG9mIHRoYXQgcGFyZW50LCBhbmQKICAgICAgLy8vIFtoaWdobGlnaHRlcnNdKCNoaWdobGlnaHQudGFnSGlnaGxpZ2h0ZXIpIHRoYXQgZG9uJ3QgbWVudGlvbgogICAgICAvLy8gdGhpcyB0YWcgd2lsbCB0cnkgdG8gZmFsbCBiYWNrIHRvIHRoZSBwYXJlbnQgdGFnIChvciBncmFuZHBhcmVudAogICAgICAvLy8gdGFnLCBldGMpLgogICAgICBzdGF0aWMgZGVmaW5lKHBhcmVudCkgewogICAgICAgICAgaWYgKHBhcmVudCA9PT0gbnVsbCB8fCBwYXJlbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBhcmVudC5iYXNlKQogICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiQ2FuIG5vdCBkZXJpdmUgZnJvbSBhIG1vZGlmaWVkIHRhZyIpOwogICAgICAgICAgbGV0IHRhZyA9IG5ldyBUYWcoW10sIG51bGwsIFtdKTsKICAgICAgICAgIHRhZy5zZXQucHVzaCh0YWcpOwogICAgICAgICAgaWYgKHBhcmVudCkKICAgICAgICAgICAgICBmb3IgKGxldCB0IG9mIHBhcmVudC5zZXQpCiAgICAgICAgICAgICAgICAgIHRhZy5zZXQucHVzaCh0KTsKICAgICAgICAgIHJldHVybiB0YWc7CiAgICAgIH0KICAgICAgLy8vIERlZmluZSBhIHRhZyBfbW9kaWZpZXJfLCB3aGljaCBpcyBhIGZ1bmN0aW9uIHRoYXQsIGdpdmVuIGEgdGFnLAogICAgICAvLy8gd2lsbCByZXR1cm4gYSB0YWcgdGhhdCBpcyBhIHN1YnRhZyBvZiB0aGUgb3JpZ2luYWwuIEFwcGx5aW5nIHRoZQogICAgICAvLy8gc2FtZSBtb2RpZmllciB0byBhIHR3aWNlIHRhZyB3aWxsIHJldHVybiB0aGUgc2FtZSB2YWx1ZSAoYG0xKHQxKQogICAgICAvLy8gPT0gbTEodDEpYCkgYW5kIGFwcGx5aW5nIG11bHRpcGxlIG1vZGlmaWVycyB3aWxsLCByZWdhcmRsZXNzIG9yCiAgICAgIC8vLyBvcmRlciwgcHJvZHVjZSB0aGUgc2FtZSB0YWcgKGBtMShtMih0MSkpID09IG0yKG0xKHQxKSlgKS4KICAgICAgLy8vCiAgICAgIC8vLyBXaGVuIG11bHRpcGxlIG1vZGlmaWVycyBhcmUgYXBwbGllZCB0byBhIGdpdmVuIGJhc2UgdGFnLCBlYWNoCiAgICAgIC8vLyBzbWFsbGVyIHNldCBvZiBtb2RpZmllcnMgaXMgcmVnaXN0ZXJlZCBhcyBhIHBhcmVudCwgc28gdGhhdCBmb3IKICAgICAgLy8vIGV4YW1wbGUgYG0xKG0yKG0zKHQxKSkpYCBpcyBhIHN1YnR5cGUgb2YgYG0xKG0yKHQxKSlgLAogICAgICAvLy8gYG0xKG0zKHQxKWAsIGFuZCBzbyBvbi4KICAgICAgc3RhdGljIGRlZmluZU1vZGlmaWVyKCkgewogICAgICAgICAgbGV0IG1vZCA9IG5ldyBNb2RpZmllcjsKICAgICAgICAgIHJldHVybiAodGFnKSA9PiB7CiAgICAgICAgICAgICAgaWYgKHRhZy5tb2RpZmllZC5pbmRleE9mKG1vZCkgPiAtMSkKICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhZzsKICAgICAgICAgICAgICByZXR1cm4gTW9kaWZpZXIuZ2V0KHRhZy5iYXNlIHx8IHRhZywgdGFnLm1vZGlmaWVkLmNvbmNhdChtb2QpLnNvcnQoKGEsIGIpID0+IGEuaWQgLSBiLmlkKSk7CiAgICAgICAgICB9OwogICAgICB9CiAgfQogIGxldCBuZXh0TW9kaWZpZXJJRCA9IDA7CiAgY2xhc3MgTW9kaWZpZXIgewogICAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgICAgIHRoaXMuaW5zdGFuY2VzID0gW107CiAgICAgICAgICB0aGlzLmlkID0gbmV4dE1vZGlmaWVySUQrKzsKICAgICAgfQogICAgICBzdGF0aWMgZ2V0KGJhc2UsIG1vZHMpIHsKICAgICAgICAgIGlmICghbW9kcy5sZW5ndGgpCiAgICAgICAgICAgICAgcmV0dXJuIGJhc2U7CiAgICAgICAgICBsZXQgZXhpc3RzID0gbW9kc1swXS5pbnN0YW5jZXMuZmluZCh0ID0+IHQuYmFzZSA9PSBiYXNlICYmIHNhbWVBcnJheShtb2RzLCB0Lm1vZGlmaWVkKSk7CiAgICAgICAgICBpZiAoZXhpc3RzKQogICAgICAgICAgICAgIHJldHVybiBleGlzdHM7CiAgICAgICAgICBsZXQgc2V0ID0gW10sIHRhZyA9IG5ldyBUYWcoc2V0LCBiYXNlLCBtb2RzKTsKICAgICAgICAgIGZvciAobGV0IG0gb2YgbW9kcykKICAgICAgICAgICAgICBtLmluc3RhbmNlcy5wdXNoKHRhZyk7CiAgICAgICAgICBsZXQgY29uZmlncyA9IHBvd2VyU2V0KG1vZHMpOwogICAgICAgICAgZm9yIChsZXQgcGFyZW50IG9mIGJhc2Uuc2V0KQogICAgICAgICAgICAgIGlmICghcGFyZW50Lm1vZGlmaWVkLmxlbmd0aCkKICAgICAgICAgICAgICAgICAgZm9yIChsZXQgY29uZmlnIG9mIGNvbmZpZ3MpCiAgICAgICAgICAgICAgICAgICAgICBzZXQucHVzaChNb2RpZmllci5nZXQocGFyZW50LCBjb25maWcpKTsKICAgICAgICAgIHJldHVybiB0YWc7CiAgICAgIH0KICB9CiAgZnVuY3Rpb24gc2FtZUFycmF5KGEsIGIpIHsKICAgICAgcmV0dXJuIGEubGVuZ3RoID09IGIubGVuZ3RoICYmIGEuZXZlcnkoKHgsIGkpID0+IHggPT0gYltpXSk7CiAgfQogIGZ1bmN0aW9uIHBvd2VyU2V0KGFycmF5KSB7CiAgICAgIGxldCBzZXRzID0gW1tdXTsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykgewogICAgICAgICAgZm9yIChsZXQgaiA9IDAsIGUgPSBzZXRzLmxlbmd0aDsgaiA8IGU7IGorKykgewogICAgICAgICAgICAgIHNldHMucHVzaChzZXRzW2pdLmNvbmNhdChhcnJheVtpXSkpOwogICAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBzZXRzLnNvcnQoKGEsIGIpID0+IGIubGVuZ3RoIC0gYS5sZW5ndGgpOwogIH0KICAvLy8gVGhpcyBmdW5jdGlvbiBpcyB1c2VkIHRvIGFkZCBhIHNldCBvZiB0YWdzIHRvIGEgbGFuZ3VhZ2Ugc3ludGF4CiAgLy8vIHZpYSBbYE5vZGVTZXQuZXh0ZW5kYF0oI2NvbW1vbi5Ob2RlU2V0LmV4dGVuZCkgb3IKICAvLy8gW2BMUlBhcnNlci5jb25maWd1cmVgXSgjbHIuTFJQYXJzZXIuY29uZmlndXJlKS4KICAvLy8KICAvLy8gVGhlIGFyZ3VtZW50IG9iamVjdCBtYXBzIG5vZGUgc2VsZWN0b3JzIHRvIFtoaWdobGlnaHRpbmcKICAvLy8gdGFnc10oI2hpZ2hsaWdodC5UYWcpIG9yIGFycmF5cyBvZiB0YWdzLgogIC8vLwogIC8vLyBOb2RlIHNlbGVjdG9ycyBtYXkgaG9sZCBvbmUgb3IgbW9yZSAoc3BhY2Utc2VwYXJhdGVkKSBub2RlIHBhdGhzLgogIC8vLyBTdWNoIGEgcGF0aCBjYW4gYmUgYSBbbm9kZSBuYW1lXSgjY29tbW9uLk5vZGVUeXBlLm5hbWUpLCBvcgogIC8vLyBtdWx0aXBsZSBub2RlIG5hbWVzIChvciBgKmAgd2lsZGNhcmRzKSBzZXBhcmF0ZWQgYnkgc2xhc2gKICAvLy8gY2hhcmFjdGVycywgYXMgaW4gYCJCbG9jay9EZWNsYXJhdGlvbi9WYXJpYWJsZU5hbWUiYC4gU3VjaCBhIHBhdGgKICAvLy8gbWF0Y2hlcyB0aGUgZmluYWwgbm9kZSBidXQgb25seSBpZiBpdHMgZGlyZWN0IHBhcmVudCBub2RlcyBhcmUgdGhlCiAgLy8vIG90aGVyIG5vZGVzIG1lbnRpb25lZC4gQSBgKmAgaW4gc3VjaCBhIHBhdGggbWF0Y2hlcyBhbnkgcGFyZW50LAogIC8vLyBidXQgb25seSBhIHNpbmdsZSBsZXZlbOKAlHdpbGRjYXJkcyB0aGF0IG1hdGNoIG11bHRpcGxlIHBhcmVudHMKICAvLy8gYXJlbid0IHN1cHBvcnRlZCwgYm90aCBmb3IgZWZmaWNpZW5jeSByZWFzb25zIGFuZCBiZWNhdXNlIExlemVyCiAgLy8vIHRyZWVzIG1ha2UgaXQgcmF0aGVyIGhhcmQgdG8gcmVhc29uIGFib3V0IHdoYXQgdGhleSB3b3VsZCBtYXRjaC4pCiAgLy8vCiAgLy8vIEEgcGF0aCBjYW4gYmUgZW5kZWQgd2l0aCBgLy4uLmAgdG8gaW5kaWNhdGUgdGhhdCB0aGUgdGFnIGFzc2lnbmVkCiAgLy8vIHRvIHRoZSBub2RlIHNob3VsZCBhbHNvIGFwcGx5IHRvIGFsbCBjaGlsZCBub2RlcywgZXZlbiBpZiB0aGV5CiAgLy8vIG1hdGNoIHRoZWlyIG93biBzdHlsZSAoYnkgZGVmYXVsdCwgb25seSB0aGUgaW5uZXJtb3N0IHN0eWxlIGlzCiAgLy8vIHVzZWQpLgogIC8vLwogIC8vLyBXaGVuIGEgcGF0aCBlbmRzIGluIGAhYCwgYXMgaW4gYEF0dHJpYnV0ZSFgLCBubyBmdXJ0aGVyIG1hdGNoaW5nCiAgLy8vIGhhcHBlbnMgZm9yIHRoZSBub2RlJ3MgY2hpbGQgbm9kZXMsIGFuZCB0aGUgZW50aXJlIG5vZGUgZ2V0cyB0aGUKICAvLy8gZ2l2ZW4gc3R5bGUuCiAgLy8vCiAgLy8vIEluIHRoaXMgbm90YXRpb24sIG5vZGUgbmFtZXMgdGhhdCBjb250YWluIGAvYCwgYCFgLCBgKmAsIG9yIGAuLi5gCiAgLy8vIG11c3QgYmUgcXVvdGVkIGFzIEpTT04gc3RyaW5ncy4KICAvLy8KICAvLy8gRm9yIGV4YW1wbGU6CiAgLy8vCiAgLy8vIGBgYGphdmFzY3JpcHQKICAvLy8gcGFyc2VyLndpdGhQcm9wcygKICAvLy8gICBzdHlsZVRhZ3MoewogIC8vLyAgICAgLy8gU3R5bGUgTnVtYmVyIGFuZCBCaWdOdW1iZXIgbm9kZXMKICAvLy8gICAgICJOdW1iZXIgQmlnTnVtYmVyIjogdGFncy5udW1iZXIsCiAgLy8vICAgICAvLyBTdHlsZSBFc2NhcGUgbm9kZXMgd2hvc2UgcGFyZW50IGlzIFN0cmluZwogIC8vLyAgICAgIlN0cmluZy9Fc2NhcGUiOiB0YWdzLmVzY2FwZSwKICAvLy8gICAgIC8vIFN0eWxlIGFueXRoaW5nIGluc2lkZSBBdHRyaWJ1dGVzIG5vZGVzCiAgLy8vICAgICAiQXR0cmlidXRlcyEiOiB0YWdzLm1ldGEsCiAgLy8vICAgICAvLyBBZGQgYSBzdHlsZSB0byBhbGwgY29udGVudCBpbnNpZGUgSXRhbGljIG5vZGVzCiAgLy8vICAgICAiSXRhbGljLy4uLiI6IHRhZ3MuZW1waGFzaXMsCiAgLy8vICAgICAvLyBTdHlsZSBJbnZhbGlkU3RyaW5nIG5vZGVzIGFzIGJvdGggYHN0cmluZ2AgYW5kIGBpbnZhbGlkYAogIC8vLyAgICAgIkludmFsaWRTdHJpbmciOiBbdGFncy5zdHJpbmcsIHRhZ3MuaW52YWxpZF0sCiAgLy8vICAgICAvLyBTdHlsZSB0aGUgbm9kZSBuYW1lZCAiLyIgYXMgcHVuY3R1YXRpb24KICAvLy8gICAgICciLyInOiB0YWdzLnB1bmN0dWF0aW9uCiAgLy8vICAgfSkKICAvLy8gKQogIC8vLyBgYGAKICBmdW5jdGlvbiBzdHlsZVRhZ3Moc3BlYykgewogICAgICBsZXQgYnlOYW1lID0gT2JqZWN0LmNyZWF0ZShudWxsKTsKICAgICAgZm9yIChsZXQgcHJvcCBpbiBzcGVjKSB7CiAgICAgICAgICBsZXQgdGFncyA9IHNwZWNbcHJvcF07CiAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkodGFncykpCiAgICAgICAgICAgICAgdGFncyA9IFt0YWdzXTsKICAgICAgICAgIGZvciAobGV0IHBhcnQgb2YgcHJvcC5zcGxpdCgiICIpKQogICAgICAgICAgICAgIGlmIChwYXJ0KSB7CiAgICAgICAgICAgICAgICAgIGxldCBwaWVjZXMgPSBbXSwgbW9kZSA9IDIgLyogTm9ybWFsICovLCByZXN0ID0gcGFydDsKICAgICAgICAgICAgICAgICAgZm9yIChsZXQgcG9zID0gMDs7KSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdCA9PSAiLi4uIiAmJiBwb3MgPiAwICYmIHBvcyArIDMgPT0gcGFydC5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RlID0gMSAvKiBJbmhlcml0ICovOwogICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgbGV0IG0gPSAvXiIoPzpbXiJcXF18XFwuKSo/InxbXlwvIV0rLy5leGVjKHJlc3QpOwogICAgICAgICAgICAgICAgICAgICAgaWYgKCFtKQogICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIHBhdGg6ICIgKyBwYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgIHBpZWNlcy5wdXNoKG1bMF0gPT0gIioiID8gIiIgOiBtWzBdWzBdID09ICciJyA/IEpTT04ucGFyc2UobVswXSkgOiBtWzBdKTsKICAgICAgICAgICAgICAgICAgICAgIHBvcyArPSBtWzBdLmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICAgIGlmIChwb3MgPT0gcGFydC5sZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICBsZXQgbmV4dCA9IHBhcnRbcG9zKytdOwogICAgICAgICAgICAgICAgICAgICAgaWYgKHBvcyA9PSBwYXJ0Lmxlbmd0aCAmJiBuZXh0ID09ICIhIikgewogICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGUgPSAwIC8qIE9wYXF1ZSAqLzsKICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXh0ICE9ICIvIikKICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBwYXRoOiAiICsgcGFydCk7CiAgICAgICAgICAgICAgICAgICAgICByZXN0ID0gcGFydC5zbGljZShwb3MpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGxldCBsYXN0ID0gcGllY2VzLmxlbmd0aCAtIDEsIGlubmVyID0gcGllY2VzW2xhc3RdOwogICAgICAgICAgICAgICAgICBpZiAoIWlubmVyKQogICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgcGF0aDogIiArIHBhcnQpOwogICAgICAgICAgICAgICAgICBsZXQgcnVsZSA9IG5ldyBSdWxlKHRhZ3MsIG1vZGUsIGxhc3QgPiAwID8gcGllY2VzLnNsaWNlKDAsIGxhc3QpIDogbnVsbCk7CiAgICAgICAgICAgICAgICAgIGJ5TmFtZVtpbm5lcl0gPSBydWxlLnNvcnQoYnlOYW1lW2lubmVyXSk7CiAgICAgICAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBydWxlTm9kZVByb3AuYWRkKGJ5TmFtZSk7CiAgfQogIGNvbnN0IHJ1bGVOb2RlUHJvcCA9IG5ldyBOb2RlUHJvcCgpOwogIGNsYXNzIFJ1bGUgewogICAgICBjb25zdHJ1Y3Rvcih0YWdzLCBtb2RlLCBjb250ZXh0LCBuZXh0KSB7CiAgICAgICAgICB0aGlzLnRhZ3MgPSB0YWdzOwogICAgICAgICAgdGhpcy5tb2RlID0gbW9kZTsKICAgICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7CiAgICAgICAgICB0aGlzLm5leHQgPSBuZXh0OwogICAgICB9CiAgICAgIGdldCBvcGFxdWUoKSB7IHJldHVybiB0aGlzLm1vZGUgPT0gMCAvKiBPcGFxdWUgKi87IH0KICAgICAgZ2V0IGluaGVyaXQoKSB7IHJldHVybiB0aGlzLm1vZGUgPT0gMSAvKiBJbmhlcml0ICovOyB9CiAgICAgIHNvcnQob3RoZXIpIHsKICAgICAgICAgIGlmICghb3RoZXIgfHwgb3RoZXIuZGVwdGggPCB0aGlzLmRlcHRoKSB7CiAgICAgICAgICAgICAgdGhpcy5uZXh0ID0gb3RoZXI7CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgICAgICB9CiAgICAgICAgICBvdGhlci5uZXh0ID0gdGhpcy5zb3J0KG90aGVyLm5leHQpOwogICAgICAgICAgcmV0dXJuIG90aGVyOwogICAgICB9CiAgICAgIGdldCBkZXB0aCgpIHsgcmV0dXJuIHRoaXMuY29udGV4dCA/IHRoaXMuY29udGV4dC5sZW5ndGggOiAwOyB9CiAgfQogIFJ1bGUuZW1wdHkgPSBuZXcgUnVsZShbXSwgMiAvKiBOb3JtYWwgKi8sIG51bGwpOwogIC8vLyBEZWZpbmUgYSBbaGlnaGxpZ2h0ZXJdKCNoaWdobGlnaHQuSGlnaGxpZ2h0ZXIpIGZyb20gYW4gYXJyYXkgb2YKICAvLy8gdGFnL2NsYXNzIHBhaXJzLiBDbGFzc2VzIGFzc29jaWF0ZWQgd2l0aCBtb3JlIHNwZWNpZmljIHRhZ3Mgd2lsbAogIC8vLyB0YWtlIHByZWNlZGVuY2UuCiAgZnVuY3Rpb24gdGFnSGlnaGxpZ2h0ZXIodGFncywgb3B0aW9ucykgewogICAgICBsZXQgbWFwID0gT2JqZWN0LmNyZWF0ZShudWxsKTsKICAgICAgZm9yIChsZXQgc3R5bGUgb2YgdGFncykgewogICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHN0eWxlLnRhZykpCiAgICAgICAgICAgICAgbWFwW3N0eWxlLnRhZy5pZF0gPSBzdHlsZS5jbGFzczsKICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICBmb3IgKGxldCB0YWcgb2Ygc3R5bGUudGFnKQogICAgICAgICAgICAgICAgICBtYXBbdGFnLmlkXSA9IHN0eWxlLmNsYXNzOwogICAgICB9CiAgICAgIGxldCB7IHNjb3BlLCBhbGwgPSBudWxsIH0gPSBvcHRpb25zIHx8IHt9OwogICAgICByZXR1cm4gewogICAgICAgICAgc3R5bGU6ICh0YWdzKSA9PiB7CiAgICAgICAgICAgICAgbGV0IGNscyA9IGFsbDsKICAgICAgICAgICAgICBmb3IgKGxldCB0YWcgb2YgdGFncykgewogICAgICAgICAgICAgICAgICBmb3IgKGxldCBzdWIgb2YgdGFnLnNldCkgewogICAgICAgICAgICAgICAgICAgICAgbGV0IHRhZ0NsYXNzID0gbWFwW3N1Yi5pZF07CiAgICAgICAgICAgICAgICAgICAgICBpZiAodGFnQ2xhc3MpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBjbHMgPSBjbHMgPyBjbHMgKyAiICIgKyB0YWdDbGFzcyA6IHRhZ0NsYXNzOwogICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHJldHVybiBjbHM7CiAgICAgICAgICB9LAogICAgICAgICAgc2NvcGUKICAgICAgfTsKICB9CiAgY29uc3QgdCQzID0gVGFnLmRlZmluZTsKICBjb25zdCBjb21tZW50ID0gdCQzKCksIG5hbWUgPSB0JDMoKSwgdHlwZU5hbWUgPSB0JDMobmFtZSksIHByb3BlcnR5TmFtZSA9IHQkMyhuYW1lKSwgbGl0ZXJhbCA9IHQkMygpLCBzdHJpbmcgPSB0JDMobGl0ZXJhbCksIG51bWJlciA9IHQkMyhsaXRlcmFsKSwgY29udGVudCA9IHQkMygpLCBoZWFkaW5nID0gdCQzKGNvbnRlbnQpLCBrZXl3b3JkID0gdCQzKCksIG9wZXJhdG9yID0gdCQzKCksIHB1bmN0dWF0aW9uID0gdCQzKCksIGJyYWNrZXQgPSB0JDMocHVuY3R1YXRpb24pLCBtZXRhID0gdCQzKCk7CiAgLy8vIFRoZSBkZWZhdWx0IHNldCBvZiBoaWdobGlnaHRpbmcgW3RhZ3NdKCNoaWdobGlnaHQuVGFnKS4KICAvLy8KICAvLy8gVGhpcyBjb2xsZWN0aW9uIGlzIGhlYXZpbHkgYmlhc2VkIHRvd2FyZHMgcHJvZ3JhbW1pbmcgbGFuZ3VhZ2VzLAogIC8vLyBhbmQgbmVjZXNzYXJpbHkgaW5jb21wbGV0ZS4gQSBmdWxsIG9udG9sb2d5IG9mIHN5bnRhY3RpYwogIC8vLyBjb25zdHJ1Y3RzIHdvdWxkIGZpbGwgYSBzdGFjayBvZiBib29rcywgYW5kIGJlIGltcHJhY3RpY2FsIHRvCiAgLy8vIHdyaXRlIHRoZW1lcyBmb3IuIFNvIHRyeSB0byBtYWtlIGRvIHdpdGggdGhpcyBzZXQuIElmIGFsbCBlbHNlCiAgLy8vIGZhaWxzLCBbb3BlbiBhbgogIC8vLyBpc3N1ZV0oaHR0cHM6Ly9naXRodWIuY29tL2NvZGVtaXJyb3IvY29kZW1pcnJvci5uZXh0KSB0byBwcm9wb3NlIGEKICAvLy8gbmV3IHRhZywgb3IgW2RlZmluZV0oI2hpZ2hsaWdodC5UYWdeZGVmaW5lKSBhIGxvY2FsIGN1c3RvbSB0YWcgZm9yCiAgLy8vIHlvdXIgdXNlIGNhc2UuCiAgLy8vCiAgLy8vIE5vdGUgdGhhdCBpdCBpcyBub3Qgb2JsaWdhdG9yeSB0byBhbHdheXMgYXR0YWNoIHRoZSBtb3N0IHNwZWNpZmljCiAgLy8vIHRhZyBwb3NzaWJsZSB0byBhbiBlbGVtZW504oCUaWYgeW91ciBncmFtbWFyIGNhbid0IGVhc2lseQogIC8vLyBkaXN0aW5ndWlzaCBhIGNlcnRhaW4gdHlwZSBvZiBlbGVtZW50IChzdWNoIGFzIGEgbG9jYWwgdmFyaWFibGUpLAogIC8vLyBpdCBpcyBva2F5IHRvIHN0eWxlIGl0IGFzIGl0cyBtb3JlIGdlbmVyYWwgdmFyaWFudCAoYSB2YXJpYWJsZSkuCiAgLy8vIAogIC8vLyBGb3IgdGFncyB0aGF0IGV4dGVuZCBzb21lIHBhcmVudCB0YWcsIHRoZSBkb2N1bWVudGF0aW9uIGxpbmtzIHRvCiAgLy8vIHRoZSBwYXJlbnQuCiAgY29uc3QgdGFncyA9IHsKICAgICAgLy8vIEEgY29tbWVudC4KICAgICAgY29tbWVudCwKICAgICAgLy8vIEEgbGluZSBbY29tbWVudF0oI2hpZ2hsaWdodC50YWdzLmNvbW1lbnQpLgogICAgICBsaW5lQ29tbWVudDogdCQzKGNvbW1lbnQpLAogICAgICAvLy8gQSBibG9jayBbY29tbWVudF0oI2hpZ2hsaWdodC50YWdzLmNvbW1lbnQpLgogICAgICBibG9ja0NvbW1lbnQ6IHQkMyhjb21tZW50KSwKICAgICAgLy8vIEEgZG9jdW1lbnRhdGlvbiBbY29tbWVudF0oI2hpZ2hsaWdodC50YWdzLmNvbW1lbnQpLgogICAgICBkb2NDb21tZW50OiB0JDMoY29tbWVudCksCiAgICAgIC8vLyBBbnkga2luZCBvZiBpZGVudGlmaWVyLgogICAgICBuYW1lLAogICAgICAvLy8gVGhlIFtuYW1lXSgjaGlnaGxpZ2h0LnRhZ3MubmFtZSkgb2YgYSB2YXJpYWJsZS4KICAgICAgdmFyaWFibGVOYW1lOiB0JDMobmFtZSksCiAgICAgIC8vLyBBIHR5cGUgW25hbWVdKCNoaWdobGlnaHQudGFncy5uYW1lKS4KICAgICAgdHlwZU5hbWU6IHR5cGVOYW1lLAogICAgICAvLy8gQSB0YWcgbmFtZSAoc3VidGFnIG9mIFtgdHlwZU5hbWVgXSgjaGlnaGxpZ2h0LnRhZ3MudHlwZU5hbWUpKS4KICAgICAgdGFnTmFtZTogdCQzKHR5cGVOYW1lKSwKICAgICAgLy8vIEEgcHJvcGVydHkgb3IgZmllbGQgW25hbWVdKCNoaWdobGlnaHQudGFncy5uYW1lKS4KICAgICAgcHJvcGVydHlOYW1lOiBwcm9wZXJ0eU5hbWUsCiAgICAgIC8vLyBBbiBhdHRyaWJ1dGUgbmFtZSAoc3VidGFnIG9mIFtgcHJvcGVydHlOYW1lYF0oI2hpZ2hsaWdodC50YWdzLnByb3BlcnR5TmFtZSkpLgogICAgICBhdHRyaWJ1dGVOYW1lOiB0JDMocHJvcGVydHlOYW1lKSwKICAgICAgLy8vIFRoZSBbbmFtZV0oI2hpZ2hsaWdodC50YWdzLm5hbWUpIG9mIGEgY2xhc3MuCiAgICAgIGNsYXNzTmFtZTogdCQzKG5hbWUpLAogICAgICAvLy8gQSBsYWJlbCBbbmFtZV0oI2hpZ2hsaWdodC50YWdzLm5hbWUpLgogICAgICBsYWJlbE5hbWU6IHQkMyhuYW1lKSwKICAgICAgLy8vIEEgbmFtZXNwYWNlIFtuYW1lXSgjaGlnaGxpZ2h0LnRhZ3MubmFtZSkuCiAgICAgIG5hbWVzcGFjZTogdCQzKG5hbWUpLAogICAgICAvLy8gVGhlIFtuYW1lXSgjaGlnaGxpZ2h0LnRhZ3MubmFtZSkgb2YgYSBtYWNyby4KICAgICAgbWFjcm9OYW1lOiB0JDMobmFtZSksCiAgICAgIC8vLyBBIGxpdGVyYWwgdmFsdWUuCiAgICAgIGxpdGVyYWwsCiAgICAgIC8vLyBBIHN0cmluZyBbbGl0ZXJhbF0oI2hpZ2hsaWdodC50YWdzLmxpdGVyYWwpLgogICAgICBzdHJpbmcsCiAgICAgIC8vLyBBIGRvY3VtZW50YXRpb24gW3N0cmluZ10oI2hpZ2hsaWdodC50YWdzLnN0cmluZykuCiAgICAgIGRvY1N0cmluZzogdCQzKHN0cmluZyksCiAgICAgIC8vLyBBIGNoYXJhY3RlciBsaXRlcmFsIChzdWJ0YWcgb2YgW3N0cmluZ10oI2hpZ2hsaWdodC50YWdzLnN0cmluZykpLgogICAgICBjaGFyYWN0ZXI6IHQkMyhzdHJpbmcpLAogICAgICAvLy8gQW4gYXR0cmlidXRlIHZhbHVlIChzdWJ0YWcgb2YgW3N0cmluZ10oI2hpZ2hsaWdodC50YWdzLnN0cmluZykpLgogICAgICBhdHRyaWJ1dGVWYWx1ZTogdCQzKHN0cmluZyksCiAgICAgIC8vLyBBIG51bWJlciBbbGl0ZXJhbF0oI2hpZ2hsaWdodC50YWdzLmxpdGVyYWwpLgogICAgICBudW1iZXIsCiAgICAgIC8vLyBBbiBpbnRlZ2VyIFtudW1iZXJdKCNoaWdobGlnaHQudGFncy5udW1iZXIpIGxpdGVyYWwuCiAgICAgIGludGVnZXI6IHQkMyhudW1iZXIpLAogICAgICAvLy8gQSBmbG9hdGluZy1wb2ludCBbbnVtYmVyXSgjaGlnaGxpZ2h0LnRhZ3MubnVtYmVyKSBsaXRlcmFsLgogICAgICBmbG9hdDogdCQzKG51bWJlciksCiAgICAgIC8vLyBBIGJvb2xlYW4gW2xpdGVyYWxdKCNoaWdobGlnaHQudGFncy5saXRlcmFsKS4KICAgICAgYm9vbDogdCQzKGxpdGVyYWwpLAogICAgICAvLy8gUmVndWxhciBleHByZXNzaW9uIFtsaXRlcmFsXSgjaGlnaGxpZ2h0LnRhZ3MubGl0ZXJhbCkuCiAgICAgIHJlZ2V4cDogdCQzKGxpdGVyYWwpLAogICAgICAvLy8gQW4gZXNjYXBlIFtsaXRlcmFsXSgjaGlnaGxpZ2h0LnRhZ3MubGl0ZXJhbCksIGZvciBleGFtcGxlIGEKICAgICAgLy8vIGJhY2tzbGFzaCBlc2NhcGUgaW4gYSBzdHJpbmcuCiAgICAgIGVzY2FwZTogdCQzKGxpdGVyYWwpLAogICAgICAvLy8gQSBjb2xvciBbbGl0ZXJhbF0oI2hpZ2hsaWdodC50YWdzLmxpdGVyYWwpLgogICAgICBjb2xvcjogdCQzKGxpdGVyYWwpLAogICAgICAvLy8gQSBVUkwgW2xpdGVyYWxdKCNoaWdobGlnaHQudGFncy5saXRlcmFsKS4KICAgICAgdXJsOiB0JDMobGl0ZXJhbCksCiAgICAgIC8vLyBBIGxhbmd1YWdlIGtleXdvcmQuCiAgICAgIGtleXdvcmQsCiAgICAgIC8vLyBUaGUgW2tleXdvcmRdKCNoaWdobGlnaHQudGFncy5rZXl3b3JkKSBmb3IgdGhlIHNlbGYgb3IgdGhpcwogICAgICAvLy8gb2JqZWN0LgogICAgICBzZWxmOiB0JDMoa2V5d29yZCksCiAgICAgIC8vLyBUaGUgW2tleXdvcmRdKCNoaWdobGlnaHQudGFncy5rZXl3b3JkKSBmb3IgbnVsbC4KICAgICAgbnVsbDogdCQzKGtleXdvcmQpLAogICAgICAvLy8gQSBba2V5d29yZF0oI2hpZ2hsaWdodC50YWdzLmtleXdvcmQpIGRlbm90aW5nIHNvbWUgYXRvbWljIHZhbHVlLgogICAgICBhdG9tOiB0JDMoa2V5d29yZCksCiAgICAgIC8vLyBBIFtrZXl3b3JkXSgjaGlnaGxpZ2h0LnRhZ3Mua2V5d29yZCkgdGhhdCByZXByZXNlbnRzIGEgdW5pdC4KICAgICAgdW5pdDogdCQzKGtleXdvcmQpLAogICAgICAvLy8gQSBtb2RpZmllciBba2V5d29yZF0oI2hpZ2hsaWdodC50YWdzLmtleXdvcmQpLgogICAgICBtb2RpZmllcjogdCQzKGtleXdvcmQpLAogICAgICAvLy8gQSBba2V5d29yZF0oI2hpZ2hsaWdodC50YWdzLmtleXdvcmQpIHRoYXQgYWN0cyBhcyBhbiBvcGVyYXRvci4KICAgICAgb3BlcmF0b3JLZXl3b3JkOiB0JDMoa2V5d29yZCksCiAgICAgIC8vLyBBIGNvbnRyb2wtZmxvdyByZWxhdGVkIFtrZXl3b3JkXSgjaGlnaGxpZ2h0LnRhZ3Mua2V5d29yZCkuCiAgICAgIGNvbnRyb2xLZXl3b3JkOiB0JDMoa2V5d29yZCksCiAgICAgIC8vLyBBIFtrZXl3b3JkXSgjaGlnaGxpZ2h0LnRhZ3Mua2V5d29yZCkgdGhhdCBkZWZpbmVzIHNvbWV0aGluZy4KICAgICAgZGVmaW5pdGlvbktleXdvcmQ6IHQkMyhrZXl3b3JkKSwKICAgICAgLy8vIEEgW2tleXdvcmRdKCNoaWdobGlnaHQudGFncy5rZXl3b3JkKSByZWxhdGVkIHRvIGRlZmluaW5nIG9yCiAgICAgIC8vLyBpbnRlcmZhY2luZyB3aXRoIG1vZHVsZXMuCiAgICAgIG1vZHVsZUtleXdvcmQ6IHQkMyhrZXl3b3JkKSwKICAgICAgLy8vIEFuIG9wZXJhdG9yLgogICAgICBvcGVyYXRvciwKICAgICAgLy8vIEFuIFtvcGVyYXRvcl0oI2hpZ2hsaWdodC50YWdzLm9wZXJhdG9yKSB0aGF0IGRlcmVmZXJlbmNlcyBzb21ldGhpbmcuCiAgICAgIGRlcmVmT3BlcmF0b3I6IHQkMyhvcGVyYXRvciksCiAgICAgIC8vLyBBcml0aG1ldGljLXJlbGF0ZWQgW29wZXJhdG9yXSgjaGlnaGxpZ2h0LnRhZ3Mub3BlcmF0b3IpLgogICAgICBhcml0aG1ldGljT3BlcmF0b3I6IHQkMyhvcGVyYXRvciksCiAgICAgIC8vLyBMb2dpY2FsIFtvcGVyYXRvcl0oI2hpZ2hsaWdodC50YWdzLm9wZXJhdG9yKS4KICAgICAgbG9naWNPcGVyYXRvcjogdCQzKG9wZXJhdG9yKSwKICAgICAgLy8vIEJpdCBbb3BlcmF0b3JdKCNoaWdobGlnaHQudGFncy5vcGVyYXRvcikuCiAgICAgIGJpdHdpc2VPcGVyYXRvcjogdCQzKG9wZXJhdG9yKSwKICAgICAgLy8vIENvbXBhcmlzb24gW29wZXJhdG9yXSgjaGlnaGxpZ2h0LnRhZ3Mub3BlcmF0b3IpLgogICAgICBjb21wYXJlT3BlcmF0b3I6IHQkMyhvcGVyYXRvciksCiAgICAgIC8vLyBbT3BlcmF0b3JdKCNoaWdobGlnaHQudGFncy5vcGVyYXRvcikgdGhhdCB1cGRhdGVzIGl0cyBvcGVyYW5kLgogICAgICB1cGRhdGVPcGVyYXRvcjogdCQzKG9wZXJhdG9yKSwKICAgICAgLy8vIFtPcGVyYXRvcl0oI2hpZ2hsaWdodC50YWdzLm9wZXJhdG9yKSB0aGF0IGRlZmluZXMgc29tZXRoaW5nLgogICAgICBkZWZpbml0aW9uT3BlcmF0b3I6IHQkMyhvcGVyYXRvciksCiAgICAgIC8vLyBUeXBlLXJlbGF0ZWQgW29wZXJhdG9yXSgjaGlnaGxpZ2h0LnRhZ3Mub3BlcmF0b3IpLgogICAgICB0eXBlT3BlcmF0b3I6IHQkMyhvcGVyYXRvciksCiAgICAgIC8vLyBDb250cm9sLWZsb3cgW29wZXJhdG9yXSgjaGlnaGxpZ2h0LnRhZ3Mub3BlcmF0b3IpLgogICAgICBjb250cm9sT3BlcmF0b3I6IHQkMyhvcGVyYXRvciksCiAgICAgIC8vLyBQcm9ncmFtIG9yIG1hcmt1cCBwdW5jdHVhdGlvbi4KICAgICAgcHVuY3R1YXRpb24sCiAgICAgIC8vLyBbUHVuY3R1YXRpb25dKCNoaWdobGlnaHQudGFncy5wdW5jdHVhdGlvbikgdGhhdCBzZXBhcmF0ZXMKICAgICAgLy8vIHRoaW5ncy4KICAgICAgc2VwYXJhdG9yOiB0JDMocHVuY3R1YXRpb24pLAogICAgICAvLy8gQnJhY2tldC1zdHlsZSBbcHVuY3R1YXRpb25dKCNoaWdobGlnaHQudGFncy5wdW5jdHVhdGlvbikuCiAgICAgIGJyYWNrZXQsCiAgICAgIC8vLyBBbmdsZSBbYnJhY2tldHNdKCNoaWdobGlnaHQudGFncy5icmFja2V0KSAodXN1YWxseSBgPGAgYW5kIGA+YAogICAgICAvLy8gdG9rZW5zKS4KICAgICAgYW5nbGVCcmFja2V0OiB0JDMoYnJhY2tldCksCiAgICAgIC8vLyBTcXVhcmUgW2JyYWNrZXRzXSgjaGlnaGxpZ2h0LnRhZ3MuYnJhY2tldCkgKHVzdWFsbHkgYFtgIGFuZCBgXWAKICAgICAgLy8vIHRva2VucykuCiAgICAgIHNxdWFyZUJyYWNrZXQ6IHQkMyhicmFja2V0KSwKICAgICAgLy8vIFBhcmVudGhlc2VzICh1c3VhbGx5IGAoYCBhbmQgYClgIHRva2VucykuIFN1YnRhZyBvZgogICAgICAvLy8gW2JyYWNrZXRdKCNoaWdobGlnaHQudGFncy5icmFja2V0KS4KICAgICAgcGFyZW46IHQkMyhicmFja2V0KSwKICAgICAgLy8vIEJyYWNlcyAodXN1YWxseSBge2AgYW5kIGB9YCB0b2tlbnMpLiBTdWJ0YWcgb2YKICAgICAgLy8vIFticmFja2V0XSgjaGlnaGxpZ2h0LnRhZ3MuYnJhY2tldCkuCiAgICAgIGJyYWNlOiB0JDMoYnJhY2tldCksCiAgICAgIC8vLyBDb250ZW50LCBmb3IgZXhhbXBsZSBwbGFpbiB0ZXh0IGluIFhNTCBvciBtYXJrdXAgZG9jdW1lbnRzLgogICAgICBjb250ZW50LAogICAgICAvLy8gW0NvbnRlbnRdKCNoaWdobGlnaHQudGFncy5jb250ZW50KSB0aGF0IHJlcHJlc2VudHMgYSBoZWFkaW5nLgogICAgICBoZWFkaW5nLAogICAgICAvLy8gQSBsZXZlbCAxIFtoZWFkaW5nXSgjaGlnaGxpZ2h0LnRhZ3MuaGVhZGluZykuCiAgICAgIGhlYWRpbmcxOiB0JDMoaGVhZGluZyksCiAgICAgIC8vLyBBIGxldmVsIDIgW2hlYWRpbmddKCNoaWdobGlnaHQudGFncy5oZWFkaW5nKS4KICAgICAgaGVhZGluZzI6IHQkMyhoZWFkaW5nKSwKICAgICAgLy8vIEEgbGV2ZWwgMyBbaGVhZGluZ10oI2hpZ2hsaWdodC50YWdzLmhlYWRpbmcpLgogICAgICBoZWFkaW5nMzogdCQzKGhlYWRpbmcpLAogICAgICAvLy8gQSBsZXZlbCA0IFtoZWFkaW5nXSgjaGlnaGxpZ2h0LnRhZ3MuaGVhZGluZykuCiAgICAgIGhlYWRpbmc0OiB0JDMoaGVhZGluZyksCiAgICAgIC8vLyBBIGxldmVsIDUgW2hlYWRpbmddKCNoaWdobGlnaHQudGFncy5oZWFkaW5nKS4KICAgICAgaGVhZGluZzU6IHQkMyhoZWFkaW5nKSwKICAgICAgLy8vIEEgbGV2ZWwgNiBbaGVhZGluZ10oI2hpZ2hsaWdodC50YWdzLmhlYWRpbmcpLgogICAgICBoZWFkaW5nNjogdCQzKGhlYWRpbmcpLAogICAgICAvLy8gQSBwcm9zZSBzZXBhcmF0b3IgKHN1Y2ggYXMgYSBob3Jpem9udGFsIHJ1bGUpLgogICAgICBjb250ZW50U2VwYXJhdG9yOiB0JDMoY29udGVudCksCiAgICAgIC8vLyBbQ29udGVudF0oI2hpZ2hsaWdodC50YWdzLmNvbnRlbnQpIHRoYXQgcmVwcmVzZW50cyBhIGxpc3QuCiAgICAgIGxpc3Q6IHQkMyhjb250ZW50KSwKICAgICAgLy8vIFtDb250ZW50XSgjaGlnaGxpZ2h0LnRhZ3MuY29udGVudCkgdGhhdCByZXByZXNlbnRzIGEgcXVvdGUuCiAgICAgIHF1b3RlOiB0JDMoY29udGVudCksCiAgICAgIC8vLyBbQ29udGVudF0oI2hpZ2hsaWdodC50YWdzLmNvbnRlbnQpIHRoYXQgaXMgZW1waGFzaXplZC4KICAgICAgZW1waGFzaXM6IHQkMyhjb250ZW50KSwKICAgICAgLy8vIFtDb250ZW50XSgjaGlnaGxpZ2h0LnRhZ3MuY29udGVudCkgdGhhdCBpcyBzdHlsZWQgc3Ryb25nLgogICAgICBzdHJvbmc6IHQkMyhjb250ZW50KSwKICAgICAgLy8vIFtDb250ZW50XSgjaGlnaGxpZ2h0LnRhZ3MuY29udGVudCkgdGhhdCBpcyBwYXJ0IG9mIGEgbGluay4KICAgICAgbGluazogdCQzKGNvbnRlbnQpLAogICAgICAvLy8gW0NvbnRlbnRdKCNoaWdobGlnaHQudGFncy5jb250ZW50KSB0aGF0IGlzIHN0eWxlZCBhcyBjb2RlIG9yCiAgICAgIC8vLyBtb25vc3BhY2UuCiAgICAgIG1vbm9zcGFjZTogdCQzKGNvbnRlbnQpLAogICAgICAvLy8gW0NvbnRlbnRdKCNoaWdobGlnaHQudGFncy5jb250ZW50KSB0aGF0IGhhcyBhIHN0cmlrZS10aHJvdWdoCiAgICAgIC8vLyBzdHlsZS4KICAgICAgc3RyaWtldGhyb3VnaDogdCQzKGNvbnRlbnQpLAogICAgICAvLy8gSW5zZXJ0ZWQgdGV4dCBpbiBhIGNoYW5nZS10cmFja2luZyBmb3JtYXQuCiAgICAgIGluc2VydGVkOiB0JDMoKSwKICAgICAgLy8vIERlbGV0ZWQgdGV4dC4KICAgICAgZGVsZXRlZDogdCQzKCksCiAgICAgIC8vLyBDaGFuZ2VkIHRleHQuCiAgICAgIGNoYW5nZWQ6IHQkMygpLAogICAgICAvLy8gQW4gaW52YWxpZCBvciB1bnN5bnRhY3RpYyBlbGVtZW50LgogICAgICBpbnZhbGlkOiB0JDMoKSwKICAgICAgLy8vIE1ldGFkYXRhIG9yIG1ldGEtaW5zdHJ1Y3Rpb24uCiAgICAgIG1ldGEsCiAgICAgIC8vLyBbTWV0YWRhdGFdKCNoaWdobGlnaHQudGFncy5tZXRhKSB0aGF0IGFwcGxpZXMgdG8gdGhlIGVudGlyZQogICAgICAvLy8gZG9jdW1lbnQuCiAgICAgIGRvY3VtZW50TWV0YTogdCQzKG1ldGEpLAogICAgICAvLy8gW01ldGFkYXRhXSgjaGlnaGxpZ2h0LnRhZ3MubWV0YSkgdGhhdCBhbm5vdGF0ZXMgb3IgYWRkcwogICAgICAvLy8gYXR0cmlidXRlcyB0byBhIGdpdmVuIHN5bnRhY3RpYyBlbGVtZW50LgogICAgICBhbm5vdGF0aW9uOiB0JDMobWV0YSksCiAgICAgIC8vLyBQcm9jZXNzaW5nIGluc3RydWN0aW9uIG9yIHByZXByb2Nlc3NvciBkaXJlY3RpdmUuIFN1YnRhZyBvZgogICAgICAvLy8gW21ldGFdKCNoaWdobGlnaHQudGFncy5tZXRhKS4KICAgICAgcHJvY2Vzc2luZ0luc3RydWN0aW9uOiB0JDMobWV0YSksCiAgICAgIC8vLyBbTW9kaWZpZXJdKCNoaWdobGlnaHQuVGFnXmRlZmluZU1vZGlmaWVyKSB0aGF0IGluZGljYXRlcyB0aGF0IGEKICAgICAgLy8vIGdpdmVuIGVsZW1lbnQgaXMgYmVpbmcgZGVmaW5lZC4gRXhwZWN0ZWQgdG8gYmUgdXNlZCB3aXRoIHRoZQogICAgICAvLy8gdmFyaW91cyBbbmFtZV0oI2hpZ2hsaWdodC50YWdzLm5hbWUpIHRhZ3MuCiAgICAgIGRlZmluaXRpb246IFRhZy5kZWZpbmVNb2RpZmllcigpLAogICAgICAvLy8gW01vZGlmaWVyXSgjaGlnaGxpZ2h0LlRhZ15kZWZpbmVNb2RpZmllcikgdGhhdCBpbmRpY2F0ZXMgdGhhdAogICAgICAvLy8gc29tZXRoaW5nIGlzIGNvbnN0YW50LiBNb3N0bHkgZXhwZWN0ZWQgdG8gYmUgdXNlZCB3aXRoCiAgICAgIC8vLyBbdmFyaWFibGUgbmFtZXNdKCNoaWdobGlnaHQudGFncy52YXJpYWJsZU5hbWUpLgogICAgICBjb25zdGFudDogVGFnLmRlZmluZU1vZGlmaWVyKCksCiAgICAgIC8vLyBbTW9kaWZpZXJdKCNoaWdobGlnaHQuVGFnXmRlZmluZU1vZGlmaWVyKSB1c2VkIHRvIGluZGljYXRlIHRoYXQKICAgICAgLy8vIGEgW3ZhcmlhYmxlXSgjaGlnaGxpZ2h0LnRhZ3MudmFyaWFibGVOYW1lKSBvciBbcHJvcGVydHkKICAgICAgLy8vIG5hbWVdKCNoaWdobGlnaHQudGFncy5wcm9wZXJ0eU5hbWUpIGlzIGJlaW5nIGNhbGxlZCBvciBkZWZpbmVkCiAgICAgIC8vLyBhcyBhIGZ1bmN0aW9uLgogICAgICBmdW5jdGlvbjogVGFnLmRlZmluZU1vZGlmaWVyKCksCiAgICAgIC8vLyBbTW9kaWZpZXJdKCNoaWdobGlnaHQuVGFnXmRlZmluZU1vZGlmaWVyKSB0aGF0IGNhbiBiZSBhcHBsaWVkIHRvCiAgICAgIC8vLyBbbmFtZXNdKCNoaWdobGlnaHQudGFncy5uYW1lKSB0byBpbmRpY2F0ZSB0aGF0IHRoZXkgYmVsb25nIHRvCiAgICAgIC8vLyB0aGUgbGFuZ3VhZ2UncyBzdGFuZGFyZCBlbnZpcm9ubWVudC4KICAgICAgc3RhbmRhcmQ6IFRhZy5kZWZpbmVNb2RpZmllcigpLAogICAgICAvLy8gW01vZGlmaWVyXSgjaGlnaGxpZ2h0LlRhZ15kZWZpbmVNb2RpZmllcikgdGhhdCBpbmRpY2F0ZXMgYSBnaXZlbgogICAgICAvLy8gW25hbWVzXSgjaGlnaGxpZ2h0LnRhZ3MubmFtZSkgaXMgbG9jYWwgdG8gc29tZSBzY29wZS4KICAgICAgbG9jYWw6IFRhZy5kZWZpbmVNb2RpZmllcigpLAogICAgICAvLy8gQSBnZW5lcmljIHZhcmlhbnQgW21vZGlmaWVyXSgjaGlnaGxpZ2h0LlRhZ15kZWZpbmVNb2RpZmllcikgdGhhdAogICAgICAvLy8gY2FuIGJlIHVzZWQgdG8gdGFnIGxhbmd1YWdlLXNwZWNpZmljIGFsdGVybmF0aXZlIHZhcmlhbnRzIG9mCiAgICAgIC8vLyBzb21lIGNvbW1vbiB0YWcuIEl0IGlzIHJlY29tbWVuZGVkIGZvciB0aGVtZXMgdG8gZGVmaW5lIHNwZWNpYWwKICAgICAgLy8vIGZvcm1zIG9mIGF0IGxlYXN0IHRoZSBbc3RyaW5nXSgjaGlnaGxpZ2h0LnRhZ3Muc3RyaW5nKSBhbmQKICAgICAgLy8vIFt2YXJpYWJsZSBuYW1lXSgjaGlnaGxpZ2h0LnRhZ3MudmFyaWFibGVOYW1lKSB0YWdzLCBzaW5jZSB0aG9zZQogICAgICAvLy8gY29tZSB1cCBhIGxvdC4KICAgICAgc3BlY2lhbDogVGFnLmRlZmluZU1vZGlmaWVyKCkKICB9OwogIC8vLyBUaGlzIGlzIGEgaGlnaGxpZ2h0ZXIgdGhhdCBhZGRzIHN0YWJsZSwgcHJlZGljdGFibGUgY2xhc3NlcyB0bwogIC8vLyB0b2tlbnMsIGZvciBzdHlsaW5nIHdpdGggZXh0ZXJuYWwgQ1NTLgogIC8vLwogIC8vLyBUaGUgZm9sbG93aW5nIHRhZ3MgYXJlIG1hcHBlZCB0byB0aGVpciBuYW1lIHByZWZpeGVkIHdpdGggYCJ0b2stImAKICAvLy8gKGZvciBleGFtcGxlIGAidG9rLWNvbW1lbnQiYCk6CiAgLy8vCiAgLy8vICogW2BsaW5rYF0oI2hpZ2hsaWdodC50YWdzLmxpbmspCiAgLy8vICogW2BoZWFkaW5nYF0oI2hpZ2hsaWdodC50YWdzLmhlYWRpbmcpCiAgLy8vICogW2BlbXBoYXNpc2BdKCNoaWdobGlnaHQudGFncy5lbXBoYXNpcykKICAvLy8gKiBbYHN0cm9uZ2BdKCNoaWdobGlnaHQudGFncy5zdHJvbmcpCiAgLy8vICogW2BrZXl3b3JkYF0oI2hpZ2hsaWdodC50YWdzLmtleXdvcmQpCiAgLy8vICogW2BhdG9tYF0oI2hpZ2hsaWdodC50YWdzLmF0b20pCiAgLy8vICogW2Bib29sYF0oI2hpZ2hsaWdodC50YWdzLmJvb2wpCiAgLy8vICogW2B1cmxgXSgjaGlnaGxpZ2h0LnRhZ3MudXJsKQogIC8vLyAqIFtgbGFiZWxOYW1lYF0oI2hpZ2hsaWdodC50YWdzLmxhYmVsTmFtZSkKICAvLy8gKiBbYGluc2VydGVkYF0oI2hpZ2hsaWdodC50YWdzLmluc2VydGVkKQogIC8vLyAqIFtgZGVsZXRlZGBdKCNoaWdobGlnaHQudGFncy5kZWxldGVkKQogIC8vLyAqIFtgbGl0ZXJhbGBdKCNoaWdobGlnaHQudGFncy5saXRlcmFsKQogIC8vLyAqIFtgc3RyaW5nYF0oI2hpZ2hsaWdodC50YWdzLnN0cmluZykKICAvLy8gKiBbYG51bWJlcmBdKCNoaWdobGlnaHQudGFncy5udW1iZXIpCiAgLy8vICogW2B2YXJpYWJsZU5hbWVgXSgjaGlnaGxpZ2h0LnRhZ3MudmFyaWFibGVOYW1lKQogIC8vLyAqIFtgdHlwZU5hbWVgXSgjaGlnaGxpZ2h0LnRhZ3MudHlwZU5hbWUpCiAgLy8vICogW2BuYW1lc3BhY2VgXSgjaGlnaGxpZ2h0LnRhZ3MubmFtZXNwYWNlKQogIC8vLyAqIFtgY2xhc3NOYW1lYF0oI2hpZ2hsaWdodC50YWdzLmNsYXNzTmFtZSkKICAvLy8gKiBbYG1hY3JvTmFtZWBdKCNoaWdobGlnaHQudGFncy5tYWNyb05hbWUpCiAgLy8vICogW2Bwcm9wZXJ0eU5hbWVgXSgjaGlnaGxpZ2h0LnRhZ3MucHJvcGVydHlOYW1lKQogIC8vLyAqIFtgb3BlcmF0b3JgXSgjaGlnaGxpZ2h0LnRhZ3Mub3BlcmF0b3IpCiAgLy8vICogW2Bjb21tZW50YF0oI2hpZ2hsaWdodC50YWdzLmNvbW1lbnQpCiAgLy8vICogW2BtZXRhYF0oI2hpZ2hsaWdodC50YWdzLm1ldGEpCiAgLy8vICogW2BwdW5jdHVhdGlvbmBdKCNoaWdobGlnaHQudGFncy5wdW5jdHVhdGlvbikKICAvLy8gKiBbYGludmFsaWRgXSgjaGlnaGxpZ2h0LnRhZ3MuaW52YWxpZCkKICAvLy8KICAvLy8gSW4gYWRkaXRpb24sIHRoZXNlIG1hcHBpbmdzIGFyZSBwcm92aWRlZDoKICAvLy8KICAvLy8gKiBbYHJlZ2V4cGBdKCNoaWdobGlnaHQudGFncy5yZWdleHApLAogIC8vLyAgIFtgZXNjYXBlYF0oI2hpZ2hsaWdodC50YWdzLmVzY2FwZSksIGFuZAogIC8vLyAgIFtgc3BlY2lhbGBdKCNoaWdobGlnaHQudGFncy5zcGVjaWFsKVtgKHN0cmluZylgXSgjaGlnaGxpZ2h0LnRhZ3Muc3RyaW5nKQogIC8vLyAgIGFyZSBtYXBwZWQgdG8gYCJ0b2stc3RyaW5nMiJgCiAgLy8vICogW2BzcGVjaWFsYF0oI2hpZ2hsaWdodC50YWdzLnNwZWNpYWwpW2AodmFyaWFibGVOYW1lKWBdKCNoaWdobGlnaHQudGFncy52YXJpYWJsZU5hbWUpCiAgLy8vICAgdG8gYCJ0b2stdmFyaWFibGVOYW1lMiJgCiAgLy8vICogW2Bsb2NhbGBdKCNoaWdobGlnaHQudGFncy5sb2NhbClbYCh2YXJpYWJsZU5hbWUpYF0oI2hpZ2hsaWdodC50YWdzLnZhcmlhYmxlTmFtZSkKICAvLy8gICB0byBgInRvay12YXJpYWJsZU5hbWUgdG9rLWxvY2FsImAKICAvLy8gKiBbYGRlZmluaXRpb25gXSgjaGlnaGxpZ2h0LnRhZ3MuZGVmaW5pdGlvbilbYCh2YXJpYWJsZU5hbWUpYF0oI2hpZ2hsaWdodC50YWdzLnZhcmlhYmxlTmFtZSkKICAvLy8gICB0byBgInRvay12YXJpYWJsZU5hbWUgdG9rLWRlZmluaXRpb24iYAogIC8vLyAqIFtgZGVmaW5pdGlvbmBdKCNoaWdobGlnaHQudGFncy5kZWZpbml0aW9uKVtgKHByb3BlcnR5TmFtZSlgXSgjaGlnaGxpZ2h0LnRhZ3MucHJvcGVydHlOYW1lKQogIC8vLyAgIHRvIGAidG9rLXByb3BlcnR5TmFtZSB0b2stZGVmaW5pdGlvbiJgCiAgdGFnSGlnaGxpZ2h0ZXIoWwogICAgICB7IHRhZzogdGFncy5saW5rLCBjbGFzczogInRvay1saW5rIiB9LAogICAgICB7IHRhZzogdGFncy5oZWFkaW5nLCBjbGFzczogInRvay1oZWFkaW5nIiB9LAogICAgICB7IHRhZzogdGFncy5lbXBoYXNpcywgY2xhc3M6ICJ0b2stZW1waGFzaXMiIH0sCiAgICAgIHsgdGFnOiB0YWdzLnN0cm9uZywgY2xhc3M6ICJ0b2stc3Ryb25nIiB9LAogICAgICB7IHRhZzogdGFncy5rZXl3b3JkLCBjbGFzczogInRvay1rZXl3b3JkIiB9LAogICAgICB7IHRhZzogdGFncy5hdG9tLCBjbGFzczogInRvay1hdG9tIiB9LAogICAgICB7IHRhZzogdGFncy5ib29sLCBjbGFzczogInRvay1ib29sIiB9LAogICAgICB7IHRhZzogdGFncy51cmwsIGNsYXNzOiAidG9rLXVybCIgfSwKICAgICAgeyB0YWc6IHRhZ3MubGFiZWxOYW1lLCBjbGFzczogInRvay1sYWJlbE5hbWUiIH0sCiAgICAgIHsgdGFnOiB0YWdzLmluc2VydGVkLCBjbGFzczogInRvay1pbnNlcnRlZCIgfSwKICAgICAgeyB0YWc6IHRhZ3MuZGVsZXRlZCwgY2xhc3M6ICJ0b2stZGVsZXRlZCIgfSwKICAgICAgeyB0YWc6IHRhZ3MubGl0ZXJhbCwgY2xhc3M6ICJ0b2stbGl0ZXJhbCIgfSwKICAgICAgeyB0YWc6IHRhZ3Muc3RyaW5nLCBjbGFzczogInRvay1zdHJpbmciIH0sCiAgICAgIHsgdGFnOiB0YWdzLm51bWJlciwgY2xhc3M6ICJ0b2stbnVtYmVyIiB9LAogICAgICB7IHRhZzogW3RhZ3MucmVnZXhwLCB0YWdzLmVzY2FwZSwgdGFncy5zcGVjaWFsKHRhZ3Muc3RyaW5nKV0sIGNsYXNzOiAidG9rLXN0cmluZzIiIH0sCiAgICAgIHsgdGFnOiB0YWdzLnZhcmlhYmxlTmFtZSwgY2xhc3M6ICJ0b2stdmFyaWFibGVOYW1lIiB9LAogICAgICB7IHRhZzogdGFncy5sb2NhbCh0YWdzLnZhcmlhYmxlTmFtZSksIGNsYXNzOiAidG9rLXZhcmlhYmxlTmFtZSB0b2stbG9jYWwiIH0sCiAgICAgIHsgdGFnOiB0YWdzLmRlZmluaXRpb24odGFncy52YXJpYWJsZU5hbWUpLCBjbGFzczogInRvay12YXJpYWJsZU5hbWUgdG9rLWRlZmluaXRpb24iIH0sCiAgICAgIHsgdGFnOiB0YWdzLnNwZWNpYWwodGFncy52YXJpYWJsZU5hbWUpLCBjbGFzczogInRvay12YXJpYWJsZU5hbWUyIiB9LAogICAgICB7IHRhZzogdGFncy5kZWZpbml0aW9uKHRhZ3MucHJvcGVydHlOYW1lKSwgY2xhc3M6ICJ0b2stcHJvcGVydHlOYW1lIHRvay1kZWZpbml0aW9uIiB9LAogICAgICB7IHRhZzogdGFncy50eXBlTmFtZSwgY2xhc3M6ICJ0b2stdHlwZU5hbWUiIH0sCiAgICAgIHsgdGFnOiB0YWdzLm5hbWVzcGFjZSwgY2xhc3M6ICJ0b2stbmFtZXNwYWNlIiB9LAogICAgICB7IHRhZzogdGFncy5jbGFzc05hbWUsIGNsYXNzOiAidG9rLWNsYXNzTmFtZSIgfSwKICAgICAgeyB0YWc6IHRhZ3MubWFjcm9OYW1lLCBjbGFzczogInRvay1tYWNyb05hbWUiIH0sCiAgICAgIHsgdGFnOiB0YWdzLnByb3BlcnR5TmFtZSwgY2xhc3M6ICJ0b2stcHJvcGVydHlOYW1lIiB9LAogICAgICB7IHRhZzogdGFncy5vcGVyYXRvciwgY2xhc3M6ICJ0b2stb3BlcmF0b3IiIH0sCiAgICAgIHsgdGFnOiB0YWdzLmNvbW1lbnQsIGNsYXNzOiAidG9rLWNvbW1lbnQiIH0sCiAgICAgIHsgdGFnOiB0YWdzLm1ldGEsIGNsYXNzOiAidG9rLW1ldGEiIH0sCiAgICAgIHsgdGFnOiB0YWdzLmludmFsaWQsIGNsYXNzOiAidG9rLWludmFsaWQiIH0sCiAgICAgIHsgdGFnOiB0YWdzLnB1bmN0dWF0aW9uLCBjbGFzczogInRvay1wdW5jdHVhdGlvbiIgfQogIF0pOwoKICAvLyBUaGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSBsZXplci1nZW5lcmF0b3IuIFlvdSBwcm9iYWJseSBzaG91bGRuJ3QgZWRpdCBpdC4KICBjb25zdCBwcm9wZXJ0eUlkZW50aWZpZXIgPSAxNDcsCiAgICBpZGVudGlmaWVyID0gMTQ4LAogICAgbmFtZUlkZW50aWZpZXIgPSAxNDksCiAgICBpbnNlcnRTZW1pID0gMTUwLAogICAgZXhwcmVzc2lvbjAgPSAxNTQsCiAgICBGb3JFeHByZXNzaW9uID0gNCwKICAgIGZvckV4cHJlc3Npb25TdGFydCA9IDE1NywKICAgIEZvckluRXhwcmVzc2lvbiA9IDcsCiAgICBOYW1lID0gOCwKICAgIElkZW50aWZpZXIgPSA5LAogICAgQWRkaXRpb25hbElkZW50aWZpZXIgPSAxMCwKICAgIGZvckV4cHJlc3Npb25Cb2R5U3RhcnQgPSAxNjUsCiAgICBJZkV4cHJlc3Npb24gPSAxOCwKICAgIGlmRXhwcmVzc2lvblN0YXJ0ID0gMTY2LAogICAgUXVhbnRpZmllZEV4cHJlc3Npb24gPSAyMiwKICAgIHF1YW50aWZpZWRFeHByZXNzaW9uU3RhcnQgPSAxNjcsCiAgICBRdWFudGlmaWVkSW5FeHByZXNzaW9uID0gMjYsCiAgICBQb3NpdGl2ZVVuYXJ5VGVzdCA9IDM2LAogICAgQXJpdGhtZXRpY0V4cHJlc3Npb24gPSA0MCwKICAgIGFyaXRobWV0aWNQbHVzU3RhcnQgPSAxNzEsCiAgICBhcml0aG1ldGljVGltZXNTdGFydCA9IDE3MiwKICAgIGFyaXRobWV0aWNFeHBTdGFydCA9IDE3MywKICAgIGFyaXRobWV0aWNVbmFyeVN0YXJ0ID0gMTc0LAogICAgVmFyaWFibGVOYW1lID0gNDcsCiAgICBQYXRoRXhwcmVzc2lvbiA9IDY3LAogICAgcGF0aEV4cHJlc3Npb25TdGFydCA9IDE3OSwKICAgIEZpbHRlckV4cHJlc3Npb24gPSA2OSwKICAgIGZpbHRlckV4cHJlc3Npb25TdGFydCA9IDE4MCwKICAgIEZ1bmN0aW9uSW52b2NhdGlvbiA9IDcxLAogICAgZnVuY3Rpb25JbnZvY2F0aW9uU3RhcnQgPSAxODEsCiAgICBQYXJhbWV0ZXJOYW1lID0gMTAzLAogICAgbmlsID0gMTg2LAogICAgTnVtZXJpY0xpdGVyYWwgPSAxMDYsCiAgICBTdHJpbmdMaXRlcmFsID0gMTA3LAogICAgQm9vbGVhbkxpdGVyYWwgPSAxMDgsCiAgICBGdW5jdGlvbkRlZmluaXRpb24gPSAxMTcsCiAgICBmdW5jdGlvbkRlZmluaXRpb25TdGFydCA9IDE5NCwKICAgIENvbnRleHQgPSAxMjQsCiAgICBjb250ZXh0U3RhcnQgPSAxOTYsCiAgICBDb250ZXh0RW50cnkgPSAxMjUsCiAgICBQcm9wZXJ0eU5hbWUgPSAxMjcsCiAgICBQcm9wZXJ0eUlkZW50aWZpZXIgPSAxMjg7CgogIGNvbnN0IExPR19QQVJTRSA9IHR5cGVvZiBwcm9jZXNzICE9ICd1bmRlZmluZWQnICYmIHByb2Nlc3MuZW52ICYmIC9cYmZwYXJzZSg6ZGJnKT9cYi8udGVzdChwcm9jZXNzLmVudi5MT0cpOwogIGNvbnN0IExPR19QQVJTRV9ERUJVRyA9IHR5cGVvZiBwcm9jZXNzICE9ICd1bmRlZmluZWQnICYmIHByb2Nlc3MuZW52ICYmIC9cZnBhcnNlOmRiZ1xiLy50ZXN0KHByb2Nlc3MuZW52LkxPRyk7CiAgY29uc3QgTE9HX1ZBUlMgPSB0eXBlb2YgcHJvY2VzcyAhPSAndW5kZWZpbmVkJyAmJiBwcm9jZXNzLmVudiAmJiAvXGJjb250ZXh0P1xiLy50ZXN0KHByb2Nlc3MuZW52LkxPRyk7CgogIGNvbnN0IHNwYWNlQ2hhcnMgPSBbCiAgICA5LCAxMSwgMTIsIDMyLCAxMzMsIDE2MCwKICAgIDU3NjAsIDgxOTIsIDgxOTMsIDgxOTQsIDgxOTUsIDgxOTYsIDgxOTcsIDgxOTgsCiAgICA4MTk5LCA4MjAwLCA4MjAxLCA4MjAyLCA4MjMyLCA4MjMzLCA4MjM5LCA4Mjg3LCAxMjI4OAogIF07CgogIGNvbnN0IG5ld2xpbmVDaGFycyA9IGNoYXJzJDEoJ1xuXHInKTsKCiAgY29uc3QgYWRkaXRpb25hbE5hbWVDaGFycyA9IGNoYXJzJDEoIicuLy0rKiIpOwoKICAvKioKICAgKiBAcGFyYW0geyBzdHJpbmcgfSBzdHIKICAgKiBAcmV0dXJuIHsgbnVtYmVyW10gfQogICAqLwogIGZ1bmN0aW9uIGNoYXJzJDEoc3RyKSB7CiAgICByZXR1cm4gQXJyYXkuZnJvbShzdHIpLm1hcChzID0+IHMuY2hhckNvZGVBdCgwKSk7CiAgfQoKICAvKioKICAgKiBAcGFyYW0geyBudW1iZXIgfSBjaAogICAqIEByZXR1cm4geyBib29sZWFuIH0KICAgKi8KICBmdW5jdGlvbiBpc1N0YXJ0Q2hhcihjaCkgewogICAgcmV0dXJuICgKICAgICAgY2ggPT09IDYzIC8vID8KICAgICkgfHwgKAogICAgICBjaCA9PT0gOTUgLy8gXwogICAgKSB8fCAoCiAgICAgIGNoID49IDY1ICYmIGNoIDw9IDkwIC8vIEEtWgogICAgKSB8fCAoCiAgICAgIGNoID49IDk3ICYmIGNoIDw9IDEyMiAvLyBhLXoKICAgICkgfHwgKAogICAgICBjaCA+PSAxNjEgJiYgIWlzUGFydENoYXIoY2gpICYmICFpc1NwYWNlKGNoKQogICAgKTsKICB9CgogIC8qKgogICAqIEBwYXJhbSB7IG51bWJlciB9IGNoCiAgICogQHJldHVybiB7IGJvb2xlYW4gfQogICAqLwogIGZ1bmN0aW9uIGlzQWRkaXRpb25hbChjaCkgewogICAgcmV0dXJuIGFkZGl0aW9uYWxOYW1lQ2hhcnMuaW5jbHVkZXMoY2gpOwogIH0KCiAgLyoqCiAgICogQHBhcmFtIHsgbnVtYmVyIH0gY2gKICAgKiBAcmV0dXJuIHsgYm9vbGVhbiB9CiAgICovCiAgZnVuY3Rpb24gaXNQYXJ0Q2hhcihjaCkgewogICAgcmV0dXJuICgKICAgICAgY2ggPj0gNDggJiYgY2ggPD0gNTcgLy8gMC05CiAgICApIHx8ICgKICAgICAgY2ggPT09IDB4QjcKICAgICkgfHwgKAogICAgICBjaCA+PSAweDAzMDAgJiYgY2ggPD0gMHgwMzZGCiAgICApIHx8ICgKICAgICAgY2ggPj0gMHgyMDNGICYmIGNoIDw9IDB4MjA0MAogICAgKTsKICB9CgogIC8qKgogICAqIEBwYXJhbSB7IG51bWJlciB9IGNoCiAgICogQHJldHVybiB7IGJvb2xlYW4gfQogICAqLwogIGZ1bmN0aW9uIGlzU3BhY2UoY2gpIHsKICAgIHJldHVybiBzcGFjZUNoYXJzLmluY2x1ZGVzKGNoKTsKICB9CgogIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZQogIGZ1bmN0aW9uIGluZGVudChzdHIsIHNwYWNlcykgewogICAgcmV0dXJuIHNwYWNlcy5jb25jYXQoCiAgICAgIHN0ci5zcGxpdCgvXG4vZykuam9pbignXG4nICsgc3BhY2VzKQogICAgKTsKICB9CgogIC8qKgogICAqIEBwYXJhbSB7IGltcG9ydCgnQGxlemVyL2xyJykuSW5wdXRTdHJlYW0gfSBpbnB1dAogICAqIEBwYXJhbSAgeyBudW1iZXIgfSBbb2Zmc2V0XQogICAqIEBwYXJhbSB7IGJvb2xlYW4gfSBbaW5jbHVkZU9wZXJhdG9yc10KICAgKgogICAqIEByZXR1cm4geyB7IHRva2VuOiBzdHJpbmcsIG9mZnNldDogbnVtYmVyIH0gfCBudWxsIH0KICAgKi8KICBmdW5jdGlvbiBwYXJzZUFkZGl0aW9uYWxTeW1ib2woaW5wdXQsIG9mZnNldCA9IDApIHsKCiAgICBjb25zdCBuZXh0ID0gaW5wdXQucGVlayhvZmZzZXQpOwoKICAgIGlmIChpc0FkZGl0aW9uYWwobmV4dCkpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBvZmZzZXQ6IDEsCiAgICAgICAgdG9rZW46IFN0cmluZy5mcm9tQ2hhckNvZGUobmV4dCkKICAgICAgfTsKICAgIH0KCiAgICByZXR1cm4gbnVsbDsKICB9CgogIC8qKgogICAqIEBwYXJhbSB7IGltcG9ydCgnQGxlemVyL2xyJykuSW5wdXRTdHJlYW0gfSBpbnB1dAogICAqIEBwYXJhbSB7IG51bWJlciB9IFtvZmZzZXRdCiAgICogQHBhcmFtIHsgYm9vbGVhbiB9IFtuYW1lUGFydF0KICAgKgogICAqIEByZXR1cm4geyB7IHRva2VuOiBzdHJpbmcsIG9mZnNldDogbnVtYmVyIH0gfCBudWxsIH0KICAgKi8KICBmdW5jdGlvbiBwYXJzZUlkZW50aWZpZXIoaW5wdXQsIG9mZnNldCA9IDAsIG5hbWVQYXJ0ID0gZmFsc2UpIHsKICAgIGZvciAobGV0IGluc2lkZSA9IGZhbHNlLCBjaGFycyA9IFtdLCBpID0gMDs7IGkrKykgewogICAgICBjb25zdCBuZXh0ID0gaW5wdXQucGVlayhvZmZzZXQgKyBpKTsKCiAgICAgIGlmIChpc1N0YXJ0Q2hhcihuZXh0KSB8fCAoKGluc2lkZSB8fCBuYW1lUGFydCkgJiYgaXNQYXJ0Q2hhcihuZXh0KSkpIHsKICAgICAgICBpZiAoIWluc2lkZSkgewogICAgICAgICAgaW5zaWRlID0gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIGNoYXJzLnB1c2gobmV4dCk7CiAgICAgIH0gZWxzZSB7CgogICAgICAgIGlmIChjaGFycy5sZW5ndGgpIHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHRva2VuOiBTdHJpbmcuZnJvbUNoYXJDb2RlKC4uLmNoYXJzKSwKICAgICAgICAgICAgb2Zmc2V0OiBpCiAgICAgICAgICB9OwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KICAgIH0KICB9CgogIC8qKgogICAqIEBwYXJhbSB7IGltcG9ydCgnQGxlemVyL2xyJykuSW5wdXRTdHJlYW0gfSBpbnB1dAogICAqIEBwYXJhbSAgeyBudW1iZXIgfSBvZmZzZXQKICAgKgogICAqIEByZXR1cm4geyB7IHRva2VuOiBzdHJpbmcsIG9mZnNldDogbnVtYmVyIH0gfCBudWxsIH0KICAgKi8KICBmdW5jdGlvbiBwYXJzZVNwYWNlcyhpbnB1dCwgb2Zmc2V0KSB7CgogICAgZm9yIChsZXQgaW5zaWRlID0gZmFsc2UsIGkgPSAwOzsgaSsrKSB7CiAgICAgIGxldCBuZXh0ID0gaW5wdXQucGVlayhvZmZzZXQgKyBpKTsKCiAgICAgIGlmIChpc1NwYWNlKG5leHQpKSB7CiAgICAgICAgaWYgKCFpbnNpZGUpIHsKICAgICAgICAgIGluc2lkZSA9IHRydWU7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGlmIChpbnNpZGUpIHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHRva2VuOiAnICcsCiAgICAgICAgICAgIG9mZnNldDogaQogICAgICAgICAgfTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICB9CiAgfQoKICAvKioKICAgKiBQYXJzZSBhIG5hbWUgZnJvbSB0aGUgaW5wdXQgYW5kIHJldHVybiB0aGUgZmlyc3QgbWF0Y2gsIGlmIGFueS4KICAgKgogICAqIEBwYXJhbSB7IGltcG9ydCgnQGxlemVyL2xyJykuSW5wdXRTdHJlYW0gfSBpbnB1dAogICAqIEBwYXJhbSB7IFZhcmlhYmxlcyB9IHZhcmlhYmxlcwogICAqCiAgICogQHJldHVybiB7IHsgdG9rZW46IHN0cmluZywgb2Zmc2V0OiBudW1iZXIsIHRlcm06IG51bWJlciB9IHwgbnVsbCB9CiAgICovCiAgZnVuY3Rpb24gcGFyc2VOYW1lKGlucHV0LCB2YXJpYWJsZXMpIHsKICAgIGNvbnN0IGNvbnRleHRLZXlzID0gdmFyaWFibGVzLmNvbnRleHRLZXlzKCk7CgogICAgY29uc3Qgc3RhcnQgPSB2YXJpYWJsZXMudG9rZW5zOwoKICAgIGZvciAobGV0IGkgPSAwLCB0b2tlbnMgPSBbXSwgbmV4dE1hdGNoID0gbnVsbDs7KSB7CgogICAgICBjb25zdCBuYW1lUGFydCA9IChzdGFydC5sZW5ndGggKyB0b2tlbnMubGVuZ3RoKSA+IDA7CiAgICAgIGNvbnN0IG1heWJlU3BhY2UgPSB0b2tlbnMubGVuZ3RoID4gMDsKCiAgICAgIGNvbnN0IG1hdGNoID0gKAogICAgICAgIHBhcnNlSWRlbnRpZmllcihpbnB1dCwgaSwgbmFtZVBhcnQpIHx8CiAgICAgICAgbmFtZVBhcnQgJiYgcGFyc2VBZGRpdGlvbmFsU3ltYm9sKGlucHV0LCBpKSB8fAogICAgICAgIG1heWJlU3BhY2UgJiYgcGFyc2VTcGFjZXMoaW5wdXQsIGkpCiAgICAgICk7CgogICAgICAvLyBtYXRjaCBpcyByZXF1aXJlZAogICAgICBpZiAoIW1hdGNoKSB7CiAgICAgICAgcmV0dXJuIG5leHRNYXRjaDsKICAgICAgfQoKICAgICAgY29uc3QgewogICAgICAgIHRva2VuLAogICAgICAgIG9mZnNldAogICAgICB9ID0gbWF0Y2g7CgogICAgICBpICs9IG9mZnNldDsKCiAgICAgIGlmICh0b2tlbiA9PT0gJyAnKSB7CiAgICAgICAgY29udGludWU7CiAgICAgIH0KCiAgICAgIHRva2VucyA9IFsgLi4udG9rZW5zLCB0b2tlbiBdOwoKICAgICAgY29uc3QgbmFtZSA9IFsgLi4uc3RhcnQsIC4uLnRva2VucyBdLmpvaW4oJyAnKTsKCiAgICAgIGlmIChjb250ZXh0S2V5cy5zb21lKGVsID0+IGVsID09PSBuYW1lKSkgewogICAgICAgIGNvbnN0IHRva2VuID0gdG9rZW5zWzBdOwoKICAgICAgICBuZXh0TWF0Y2ggPSB7CiAgICAgICAgICB0b2tlbiwKICAgICAgICAgIG9mZnNldDogdG9rZW4ubGVuZ3RoLAogICAgICAgICAgdGVybTogbmFtZUlkZW50aWZpZXIKICAgICAgICB9OwogICAgICB9CgogICAgICBpZiAoZGF0ZVRpbWVJZGVudGlmaWVycy5zb21lKGVsID0+IGVsID09PSBuYW1lKSkgewogICAgICAgIGNvbnN0IHRva2VuID0gdG9rZW5zWzBdOwoKICAgICAgICAvLyBwYXJzZSBkYXRlIHRpbWUgaWRlbnRpZmllcnMgYXMgbm9ybWFsCiAgICAgICAgLy8gaWRlbnRpZmllcnMgdG8gYWxsb3cgc3BlY2lhbGl6YXRpb24gdG8ga2ljayBpbgogICAgICAgIC8vCiAgICAgICAgLy8gY2YuIGh0dHBzOi8vZ2l0aHViLmNvbS9uaWtrdS9sZXplci1mZWVsL2lzc3Vlcy84CiAgICAgICAgbmV4dE1hdGNoID0gewogICAgICAgICAgdG9rZW4sCiAgICAgICAgICBvZmZzZXQ6IHRva2VuLmxlbmd0aCwKICAgICAgICAgIHRlcm06IGlkZW50aWZpZXIKICAgICAgICB9OwogICAgICB9CgogICAgICBpZiAoCiAgICAgICAgIWNvbnRleHRLZXlzLnNvbWUoZWwgPT4gZWwuc3RhcnRzV2l0aChuYW1lKSkgJiYKICAgICAgICAhZGF0ZVRpbWVJZGVudGlmaWVycy5zb21lKGVsID0+IGVsLnN0YXJ0c1dpdGgobmFtZSkpCiAgICAgICkgewogICAgICAgIHJldHVybiBuZXh0TWF0Y2g7CiAgICAgIH0KICAgIH0KCiAgfQoKICBjb25zdCBpZGVudGlmaWVyc01hcCA9IHsKICAgIFsgaWRlbnRpZmllciBdOiAnaWRlbnRpZmllcicsCiAgICBbIG5hbWVJZGVudGlmaWVyIF06ICduYW1lSWRlbnRpZmllcicKICB9OwoKICBjb25zdCBpZGVudGlmaWVycyA9IG5ldyBFeHRlcm5hbFRva2VuaXplcigoaW5wdXQsIHN0YWNrKSA9PiB7CgogICAgTE9HX1BBUlNFX0RFQlVHICYmIGNvbnNvbGUubG9nKCclczogVCA8aWRlbnRpZmllciB8IG5hbWVJZGVudGlmaWVyPicsIGlucHV0LnBvcyk7CgogICAgY29uc3QgbmFtZU1hdGNoID0gcGFyc2VOYW1lKGlucHV0LCBzdGFjay5jb250ZXh0KTsKCiAgICBjb25zdCBzdGFydCA9IHN0YWNrLmNvbnRleHQudG9rZW5zOwoKICAgIGNvbnN0IG1hdGNoID0gbmFtZU1hdGNoIHx8IHBhcnNlSWRlbnRpZmllcihpbnB1dCwgMCwgc3RhcnQubGVuZ3RoID4gMCk7CgogICAgaWYgKG1hdGNoKSB7CiAgICAgIGlucHV0LmFkdmFuY2UobWF0Y2gub2Zmc2V0KTsKICAgICAgaW5wdXQuYWNjZXB0VG9rZW4obmFtZU1hdGNoID8gbmFtZU1hdGNoLnRlcm0gOiBpZGVudGlmaWVyKTsKCiAgICAgIExPR19QQVJTRSAmJiBjb25zb2xlLmxvZygnJXM6IE1BVENIIDwlcz4gPCVzPicsIGlucHV0LnBvcywgbmFtZU1hdGNoID8gaWRlbnRpZmllcnNNYXBbbmFtZU1hdGNoLnRlcm1dIDogJ2lkZW50aWZpZXInLCBtYXRjaC50b2tlbik7CiAgICB9CiAgfSwgeyBjb250ZXh0dWFsOiB0cnVlIH0pOwoKCiAgY29uc3QgcHJvcGVydHlJZGVudGlmaWVycyA9IG5ldyBFeHRlcm5hbFRva2VuaXplcigoaW5wdXQsIHN0YWNrKSA9PiB7CgogICAgTE9HX1BBUlNFX0RFQlVHICYmIGNvbnNvbGUubG9nKCclczogVCA8cHJvcGVydHlJZGVudGlmaWVyPicsIGlucHV0LnBvcyk7CgogICAgY29uc3Qgc3RhcnQgPSBzdGFjay5jb250ZXh0LnRva2VuczsKCiAgICBjb25zdCBtYXRjaCA9IHBhcnNlSWRlbnRpZmllcihpbnB1dCwgMCwgc3RhcnQubGVuZ3RoID4gMCk7CgogICAgaWYgKG1hdGNoKSB7CiAgICAgIGlucHV0LmFkdmFuY2UobWF0Y2gub2Zmc2V0KTsKICAgICAgaW5wdXQuYWNjZXB0VG9rZW4ocHJvcGVydHlJZGVudGlmaWVyKTsKCiAgICAgIExPR19QQVJTRSAmJiBjb25zb2xlLmxvZygnJXM6IE1BVENIIDxwcm9wZXJ0eUlkZW50aWZpZXI+IDwlcz4nLCBpbnB1dC5wb3MsIG1hdGNoLnRva2VuKTsKICAgIH0KICB9KTsKCgogIGNvbnN0IGluc2VydFNlbWljb2xvbiA9IG5ldyBFeHRlcm5hbFRva2VuaXplcigoaW5wdXQsIHN0YWNrKSA9PiB7CgogICAgTE9HX1BBUlNFX0RFQlVHICYmIGNvbnNvbGUubG9nKCclczogVCA8aW5zZXJ0U2VtaT4nLCBpbnB1dC5wb3MpOwoKICAgIGxldCBvZmZzZXQ7CiAgICBsZXQgaW5zZXJ0ID0gZmFsc2U7CgogICAgZm9yIChvZmZzZXQgPSAwOzsgb2Zmc2V0KyspIHsKICAgICAgY29uc3QgY2hhciA9IGlucHV0LnBlZWsob2Zmc2V0KTsKCiAgICAgIGlmIChzcGFjZUNoYXJzLmluY2x1ZGVzKGNoYXIpKSB7CiAgICAgICAgY29udGludWU7CiAgICAgIH0KCiAgICAgIGlmIChuZXdsaW5lQ2hhcnMuaW5jbHVkZXMoY2hhcikpIHsKICAgICAgICBpbnNlcnQgPSB0cnVlOwogICAgICB9CgogICAgICBicmVhazsKICAgIH0KCiAgICBpZiAoaW5zZXJ0KSB7CgogICAgICBjb25zdCBpZGVudGlmaWVyID0gcGFyc2VJZGVudGlmaWVyKGlucHV0LCBvZmZzZXQgKyAxKTsKICAgICAgY29uc3Qgc3BhY2VzID0gcGFyc2VTcGFjZXMoaW5wdXQsIG9mZnNldCArIDEpOwoKICAgICAgaWYgKHNwYWNlcyB8fCBpZGVudGlmaWVyICYmIC9eKHRoZW58ZWxzZXxyZXR1cm58c2F0aXNmaWVzKSQvLnRlc3QoaWRlbnRpZmllci50b2tlbikpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIExPR19QQVJTRSAmJiBjb25zb2xlLmxvZygnJXM6IE1BVENIIDxpbnNlcnRTZW1pPicsIGlucHV0LnBvcyk7CiAgICAgIGlucHV0LmFjY2VwdFRva2VuKGluc2VydFNlbWkpOwogICAgfQogIH0pOwoKICBjb25zdCBwcmVmaXhlZENvbnRleHRTdGFydHMgPSB7CiAgICBbIGZ1bmN0aW9uSW52b2NhdGlvblN0YXJ0IF06ICdGdW5jdGlvbkludm9jYXRpb24nLAogICAgWyBmaWx0ZXJFeHByZXNzaW9uU3RhcnQgXTogJ0ZpbHRlckV4cHJlc3Npb24nLAogICAgWyBwYXRoRXhwcmVzc2lvblN0YXJ0IF06ICdQYXRoRXhwcmVzc2lvbicKICB9OwoKICBjb25zdCBjb250ZXh0U3RhcnRzID0gewogICAgWyBjb250ZXh0U3RhcnQgXTogJ0NvbnRleHQnLAogICAgWyBmdW5jdGlvbkRlZmluaXRpb25TdGFydCBdOiAnRnVuY3Rpb25EZWZpbml0aW9uJywKICAgIFsgZm9yRXhwcmVzc2lvblN0YXJ0IF06ICdGb3JFeHByZXNzaW9uJywKICAgIFsgaWZFeHByZXNzaW9uU3RhcnQgXTogJ0lmRXhwcmVzc2lvbicsCiAgICBbIHF1YW50aWZpZWRFeHByZXNzaW9uU3RhcnQgXTogJ1F1YW50aWZpZWRFeHByZXNzaW9uJwogIH07CgogIGNvbnN0IGNvbnRleHRFbmRzID0gewogICAgWyBDb250ZXh0IF06ICdDb250ZXh0JywKICAgIFsgRnVuY3Rpb25EZWZpbml0aW9uIF06ICdGdW5jdGlvbkRlZmluaXRpb24nLAogICAgWyBGb3JFeHByZXNzaW9uIF06ICdGb3JFeHByZXNzaW9uJywKICAgIFsgSWZFeHByZXNzaW9uIF06ICdJZkV4cHJlc3Npb24nLAogICAgWyBRdWFudGlmaWVkRXhwcmVzc2lvbiBdOiAnUXVhbnRpZmllZEV4cHJlc3Npb24nLAogICAgWyBQYXRoRXhwcmVzc2lvbiBdOiAnUGF0aEV4cHJlc3Npb24nLAogICAgWyBGdW5jdGlvbkludm9jYXRpb24gXTogJ0Z1bmN0aW9uSW52b2NhdGlvbicsCiAgICBbIEZpbHRlckV4cHJlc3Npb24gXTogJ0ZpbHRlckV4cHJlc3Npb24nLAogICAgWyBBcml0aG1ldGljRXhwcmVzc2lvbiBdOiAnQXJpdGhtZXRpY0V4cHJlc3Npb24nCiAgfTsKCiAgY2xhc3MgVmFsdWVQcm9kdWNlciB7CgogICAgLyoqCiAgICAgKiBAcGFyYW0geyBGdW5jdGlvbiB9IGZuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGZuKSB7CiAgICAgIHRoaXMuZm4gPSBmbjsKICAgIH0KCiAgICBnZXQodmFyaWFibGVzKSB7CiAgICAgIHJldHVybiB0aGlzLmZuKHZhcmlhYmxlcyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBAcGFyYW0geyBGdW5jdGlvbiB9CiAgICAgKgogICAgICogQHJldHVybiB7IFZhbHVlUHJvZHVjZXIgfQogICAgICovCiAgICBzdGF0aWMgb2YoZm4pIHsKICAgICAgcmV0dXJuIG5ldyBWYWx1ZVByb2R1Y2VyKGZuKTsKICAgIH0KCiAgfQoKICBjb25zdCBkYXRlVGltZUxpdGVyYWxzID0gewogICAgJ2RhdGUgYW5kIHRpbWUnOiAxLAogICAgJ2RhdGUnOiAxLAogICAgJ3RpbWUnOiAxLAogICAgJ2R1cmF0aW9uJzogMQogIH07CgogIGNvbnN0IGRhdGVUaW1lSWRlbnRpZmllcnMgPSBPYmplY3Qua2V5cyhkYXRlVGltZUxpdGVyYWxzKTsKCiAgY2xhc3MgVmFyaWFibGVzIHsKCiAgICBjb25zdHJ1Y3Rvcih7CiAgICAgIG5hbWUgPSAnRXhwcmVzc2lvbnMnLAogICAgICB0b2tlbnMgPSBbXSwKICAgICAgY2hpbGRyZW4gPSBbXSwKICAgICAgcGFyZW50ID0gbnVsbCwKICAgICAgY29udGV4dCA9IHsgfSwKICAgICAgdmFsdWUsCiAgICAgIHJhdwogICAgfSA9IHt9KSB7CiAgICAgIHRoaXMubmFtZSA9IG5hbWU7CiAgICAgIHRoaXMudG9rZW5zID0gdG9rZW5zOwogICAgICB0aGlzLmNoaWxkcmVuID0gY2hpbGRyZW47CiAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50OwogICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0OwogICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CiAgICAgIHRoaXMucmF3ID0gcmF3OwogICAgfQoKICAgIGVudGVyU2NvcGUobmFtZSkgewoKICAgICAgY29uc3QgY2hpbGRTY29wZSA9IHRoaXMub2YoewogICAgICAgIG5hbWUsCiAgICAgICAgcGFyZW50OiB0aGlzCiAgICAgIH0pOwoKICAgICAgTE9HX1ZBUlMgJiYgY29uc29sZS5sb2coJ1slc10gZW50ZXInLCBjaGlsZFNjb3BlLnBhdGgsIGNoaWxkU2NvcGUuY29udGV4dCk7CgogICAgICByZXR1cm4gY2hpbGRTY29wZTsKICAgIH0KCiAgICBleGl0U2NvcGUoc3RyKSB7CgogICAgICBpZiAoIXRoaXMucGFyZW50KSB7CiAgICAgICAgTE9HX1ZBUlMgJiYgY29uc29sZS5sb2coJ1slc10gTk8gZXhpdCAlb1xuJXMnLCB0aGlzLnBhdGgsIHRoaXMuY29udGV4dCwgaW5kZW50KHN0ciwgJyAgJykpOwoKICAgICAgICByZXR1cm4gdGhpczsKICAgICAgfQoKICAgICAgTE9HX1ZBUlMgJiYgY29uc29sZS5sb2coJ1slc10gZXhpdCAlb1xuJXMnLCB0aGlzLnBhdGgsIHRoaXMuY29udGV4dCwgaW5kZW50KHN0ciwgJyAgJykpOwoKICAgICAgcmV0dXJuIHRoaXMucGFyZW50LnB1c2hDaGlsZCh0aGlzKTsKICAgIH0KCiAgICB0b2tlbihwYXJ0KSB7CgogICAgICBMT0dfVkFSUyAmJiBjb25zb2xlLmxvZygnWyVzXSB0b2tlbiA8JXM+ICsgPCVzPicsIHRoaXMucGF0aCwgdGhpcy50b2tlbnMuam9pbignICcpLCBwYXJ0KTsKCiAgICAgIHJldHVybiB0aGlzLmFzc2lnbih7CiAgICAgICAgdG9rZW5zOiBbIC4uLnRoaXMudG9rZW5zLCBwYXJ0IF0KICAgICAgfSk7CiAgICB9CgogICAgbGl0ZXJhbCh2YWx1ZSkgewoKICAgICAgTE9HX1ZBUlMgJiYgY29uc29sZS5sb2coJ1slc10gbGl0ZXJhbCAlbycsIHRoaXMucGF0aCwgdmFsdWUpOwoKICAgICAgcmV0dXJuIHRoaXMucHVzaENoaWxkKHRoaXMub2YoewogICAgICAgIG5hbWU6ICdMaXRlcmFsJywKICAgICAgICB2YWx1ZQogICAgICB9KSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gY29tcHV0ZWQgc2NvcGUgdmFsdWUKICAgICAqCiAgICAgKiBAcmV0dXJuIHthbnl9CiAgICAgKi8KICAgIGNvbXB1dGVkVmFsdWUoKSB7CiAgICAgIGZvciAobGV0IHNjb3BlID0gdGhpczs7c2NvcGUgPSBzY29wZS5jaGlsZHJlbi5zbGljZSgtMSlbMF0pIHsKCiAgICAgICAgaWYgKCFzY29wZSkgewogICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQoKICAgICAgICBpZiAoc2NvcGUudmFsdWUpIHsKICAgICAgICAgIHJldHVybiBzY29wZS52YWx1ZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBjb250ZXh0S2V5cygpIHsKICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHRoaXMuY29udGV4dCkubWFwKG5vcm1hbGl6ZUNvbnRleHRLZXkpOwogICAgfQoKICAgIGdldCBwYXRoKCkgewogICAgICByZXR1cm4gdGhpcy5wYXJlbnQ/LnBhdGg/LmNvbmNhdCgnID4gJywgdGhpcy5uYW1lKSB8fCB0aGlzLm5hbWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdmFsdWUgb2YgdmFyaWFibGUuCiAgICAgKgogICAgICogQHBhcmFtIHsgc3RyaW5nIH0gdmFyaWFibGUKICAgICAqIEByZXR1cm4geyBhbnkgfSB2YWx1ZQogICAgICovCiAgICBnZXQodmFyaWFibGUpIHsKCiAgICAgIGNvbnN0IG5hbWVzID0gWyB2YXJpYWJsZSwgdmFyaWFibGUgJiYgbm9ybWFsaXplQ29udGV4dEtleSh2YXJpYWJsZSkgXTsKCiAgICAgIGNvbnN0IGNvbnRleHRLZXkgPSBPYmplY3Qua2V5cyh0aGlzLmNvbnRleHQpLmZpbmQoCiAgICAgICAga2V5ID0+IG5hbWVzLmluY2x1ZGVzKG5vcm1hbGl6ZUNvbnRleHRLZXkoa2V5KSkKICAgICAgKTsKCiAgICAgIGlmICh0eXBlb2YgY29udGV4dEtleSA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICByZXR1cm4gdW5kZWZpbmVkOwogICAgICB9CgogICAgICBjb25zdCB2YWwgPSB0aGlzLmNvbnRleHRbY29udGV4dEtleV07CgogICAgICBpZiAodmFsIGluc3RhbmNlb2YgVmFsdWVQcm9kdWNlcikgewogICAgICAgIHJldHVybiB2YWwuZ2V0KHRoaXMpOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiB2YWw7CiAgICAgIH0KICAgIH0KCiAgICByZXNvbHZlTmFtZSgpIHsKCiAgICAgIGNvbnN0IHZhcmlhYmxlID0gdGhpcy50b2tlbnMuam9pbignICcpOwogICAgICBjb25zdCB0b2tlbnMgPSBbXTsKCiAgICAgIGNvbnN0IHBhcmVudFNjb3BlID0gdGhpcy5hc3NpZ24oewogICAgICAgIHRva2VucwogICAgICB9KTsKCiAgICAgIGNvbnN0IHZhcmlhYmxlU2NvcGUgPSB0aGlzLm9mKHsKICAgICAgICBuYW1lOiAnVmFyaWFibGVOYW1lJywKICAgICAgICBwYXJlbnQ6IHBhcmVudFNjb3BlLAogICAgICAgIHZhbHVlOiB0aGlzLmdldCh2YXJpYWJsZSksCiAgICAgICAgcmF3OiB2YXJpYWJsZQogICAgICB9KTsKCiAgICAgIExPR19WQVJTICYmIGNvbnNvbGUubG9nKCdbJXNdIHJlc29sdmUgbmFtZSA8JXM9JXM+JywgdmFyaWFibGVTY29wZS5wYXRoLCB2YXJpYWJsZSwgdGhpcy5nZXQodmFyaWFibGUpKTsKCiAgICAgIHJldHVybiBwYXJlbnRTY29wZS5wdXNoQ2hpbGQodmFyaWFibGVTY29wZSk7CiAgICB9CgogICAgcHVzaENoaWxkKGNoaWxkKSB7CgogICAgICBpZiAoIWNoaWxkKSB7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH0KCiAgICAgIGNvbnN0IHBhcmVudCA9IHRoaXMuYXNzaWduKHsKICAgICAgICBjaGlsZHJlbjogWyAuLi50aGlzLmNoaWxkcmVuLCBjaGlsZCBdCiAgICAgIH0pOwoKICAgICAgY2hpbGQucGFyZW50ID0gcGFyZW50OwoKICAgICAgcmV0dXJuIHBhcmVudDsKICAgIH0KCiAgICBwdXNoQ2hpbGRyZW4oY2hpbGRyZW4pIHsKCiAgICAgIGxldCBwYXJlbnQgPSB0aGlzOwoKICAgICAgZm9yIChjb25zdCBjaGlsZCBvZiBjaGlsZHJlbikgewogICAgICAgIHBhcmVudCA9IHBhcmVudC5wdXNoQ2hpbGQoY2hpbGQpOwogICAgICB9CgogICAgICByZXR1cm4gcGFyZW50OwogICAgfQoKICAgIGRlY2xhcmVOYW1lKCkgewoKICAgICAgaWYgKHRoaXMudG9rZW5zLmxlbmd0aCA9PT0gMCkgewogICAgICAgIHRocm93IEVycm9yKCdubyB0b2tlbnMgdG8gZGVjbGFyZSBuYW1lJyk7CiAgICAgIH0KCiAgICAgIGNvbnN0IHZhcmlhYmxlTmFtZSA9IHRoaXMudG9rZW5zLmpvaW4oJyAnKTsKCiAgICAgIExPR19WQVJTICYmIGNvbnNvbGUubG9nKCdbJXNdIGRlY2xhcmVOYW1lIDwlcz4nLCB0aGlzLnBhdGgsIHZhcmlhYmxlTmFtZSk7CgogICAgICByZXR1cm4gdGhpcy5hc3NpZ24oewogICAgICAgIHRva2VuczogW10KICAgICAgfSkucHVzaENoaWxkKAogICAgICAgIHRoaXMub2YoewogICAgICAgICAgbmFtZTogJ05hbWUnLAogICAgICAgICAgdmFsdWU6IHZhcmlhYmxlTmFtZQogICAgICAgIH0pCiAgICAgICk7CiAgICB9CgogICAgZGVmaW5lKG5hbWUsIHZhbHVlKSB7CgogICAgICBpZiAodHlwZW9mIG5hbWUgIT09ICdzdHJpbmcnKSB7CiAgICAgICAgTE9HX1ZBUlMgJiYgY29uc29sZS5sb2coJ1slc10gbm8gZGVmaW5lIDwlcz0lcz4nLCB0aGlzLnBhdGgsIG5hbWUsIHZhbHVlKTsKCiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH0KCiAgICAgIExPR19WQVJTICYmIGNvbnNvbGUubG9nKCdbJXNdIGRlZmluZSA8JXM9JXM+JywgdGhpcy5wYXRoLCBuYW1lLCB2YWx1ZSk7CgogICAgICBjb25zdCBjb250ZXh0ID0gewogICAgICAgIC4uLnRoaXMuY29udGV4dCwKICAgICAgICBbbmFtZV06IHZhbHVlCiAgICAgIH07CgogICAgICByZXR1cm4gdGhpcy5hc3NpZ24oewogICAgICAgIGNvbnRleHQKICAgICAgfSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBAcGFyYW0geyBSZWNvcmQ8c3RyaW5nLCBhbnk+IH0gW29wdGlvbnNdCiAgICAgKgogICAgICogQHJldHVybiB7IFZhcmlhYmxlcyB9CiAgICAgKi8KICAgIGFzc2lnbihvcHRpb25zID0ge30pIHsKCiAgICAgIHJldHVybiBWYXJpYWJsZXMub2YoewogICAgICAgIC4uLnRoaXMsCiAgICAgICAgLi4ub3B0aW9ucwogICAgICB9KTsKICAgIH0KCiAgICAvKioKICAgICAqIEBwYXJhbSB7IFJlY29yZDxzdHJpbmcsIGFueT4gfSBbb3B0aW9uc10KICAgICAqCiAgICAgKiBAcmV0dXJuIHsgVmFyaWFibGVzIH0KICAgICAqLwogICAgb2Yob3B0aW9ucyA9IHt9KSB7CgogICAgICBjb25zdCBkZWZhdWx0T3B0aW9ucyA9IHsKICAgICAgICBjb250ZXh0OiB0aGlzLmNvbnRleHQsCiAgICAgICAgcGFyZW50OiB0aGlzLnBhcmVudAogICAgICB9OwoKICAgICAgcmV0dXJuIFZhcmlhYmxlcy5vZih7CiAgICAgICAgLi4uZGVmYXVsdE9wdGlvbnMsCiAgICAgICAgLi4ub3B0aW9ucwogICAgICB9KTsKICAgIH0KCiAgICBzdGF0aWMgb2Yob3B0aW9ucykgewogICAgICBjb25zdCB7CiAgICAgICAgbmFtZSwKICAgICAgICB0b2tlbnMgPSBbXSwKICAgICAgICBjaGlsZHJlbiA9IFtdLAogICAgICAgIHBhcmVudCA9IG51bGwsCiAgICAgICAgY29udGV4dCA9IHt9LAogICAgICAgIHZhbHVlLAogICAgICAgIHJhdwogICAgICB9ID0gb3B0aW9uczsKCiAgICAgIHJldHVybiBuZXcgVmFyaWFibGVzKHsKICAgICAgICBuYW1lLAogICAgICAgIHRva2VuczogWyAuLi50b2tlbnMgXSwKICAgICAgICBjaGlsZHJlbjogWyAuLi5jaGlsZHJlbiBdLAogICAgICAgIGNvbnRleHQ6IHsKICAgICAgICAgIC4uLmNvbnRleHQKICAgICAgICB9LAogICAgICAgIHBhcmVudCwKICAgICAgICB2YWx1ZSwKICAgICAgICByYXcKICAgICAgfSk7CiAgICB9CgogIH0KCiAgLyoqCiAgICogQHBhcmFtIHsgc3RyaW5nIH0gbmFtZQogICAqCiAgICogQHJldHVybiB7IHN0cmluZyB9IG5vcm1hbGl6ZWROYW1lCiAgICovCiAgZnVuY3Rpb24gbm9ybWFsaXplQ29udGV4dEtleShuYW1lKSB7CiAgICByZXR1cm4gbmFtZS5yZXBsYWNlKC9ccyooWy4vXC0nKypdKVxzKi9nLCAnICQxICcpLnJlcGxhY2UoL1xzezIsfS9nLCAnICcpLnRyaW0oKTsKICB9CgogIC8qKgogICAqIFdyYXAgY2hpbGRyZW4gb2YgdmFyaWFibGVzIHVuZGVyIHRoZSBnaXZlbiBuYW1lZCBjaGlsZC4KICAgKgogICAqIEBwYXJhbSB7IFZhcmlhYmxlcyB9IHZhcmlhYmxlcwogICAqIEBwYXJhbSB7IHN0cmluZyB9IG5hbWUKICAgKiBAcGFyYW0geyBzdHJpbmcgfSBjb2RlCiAgICogQHJldHVybiB7IFZhcmlhYmxlcyB9CiAgICovCiAgZnVuY3Rpb24gd3JhcCh2YXJpYWJsZXMsIHNjb3BlTmFtZSwgY29kZSkgewoKICAgIGNvbnN0IHBhcnRzID0gdmFyaWFibGVzLmNoaWxkcmVuLmZpbHRlcihjID0+IGMubmFtZSAhPT0gc2NvcGVOYW1lKTsKICAgIGNvbnN0IGNoaWxkcmVuID0gdmFyaWFibGVzLmNoaWxkcmVuLmZpbHRlcihjID0+IGMubmFtZSA9PT0gc2NvcGVOYW1lKTsKCiAgICBjb25zdCBuYW1lUGFydCA9IHBhcnRzWzBdOwogICAgY29uc3QgdmFsdWVQYXJ0ID0gcGFydHNbTWF0aC5tYXgoMSwgcGFydHMubGVuZ3RoIC0gMSldOwoKICAgIGNvbnN0IG5hbWUgPSBuYW1lUGFydC5jb21wdXRlZFZhbHVlKCk7CiAgICBjb25zdCB2YWx1ZSA9IHZhbHVlUGFydD8uY29tcHV0ZWRWYWx1ZSgpIHx8IG51bGw7CgogICAgcmV0dXJuIHZhcmlhYmxlcwogICAgICAuYXNzaWduKHsKICAgICAgICBjaGlsZHJlbgogICAgICB9KQogICAgICAuZW50ZXJTY29wZShzY29wZU5hbWUpCiAgICAgIC5wdXNoQ2hpbGRyZW4ocGFydHMpCiAgICAgIC5leGl0U2NvcGUoY29kZSkKICAgICAgLmRlZmluZShuYW1lLCB2YWx1ZSk7CiAgfQoKICAvKioKICAgKiBAcGFyYW0geyBhbnkgfSBjb250ZXh0CiAgICoKICAgKiBAcmV0dXJuIHsgQ29udGV4dFRyYWNrZXI8VmFyaWFibGVzPiB9CiAgICovCiAgZnVuY3Rpb24gdHJhY2tWYXJpYWJsZXMoY29udGV4dCA9IHt9KSB7CgogICAgY29uc3Qgc3RhcnQgPSBWYXJpYWJsZXMub2YoewogICAgICBjb250ZXh0CiAgICB9KTsKCiAgICByZXR1cm4gbmV3IENvbnRleHRUcmFja2VyKHsKICAgICAgc3RhcnQsCiAgICAgIHJlZHVjZSh2YXJpYWJsZXMsIHRlcm0sIHN0YWNrLCBpbnB1dCkgewoKICAgICAgICBpZiAodGVybSA9PT0gQ29udGV4dCkgewogICAgICAgICAgdmFyaWFibGVzID0gdmFyaWFibGVzLmFzc2lnbih7CiAgICAgICAgICAgIHZhbHVlOiB2YXJpYWJsZXMuY29udGV4dAogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBpZiAodGVybSA9PT0gSWZFeHByZXNzaW9uKSB7CiAgICAgICAgICBjb25zdCBbIHRoZW5QYXJ0LCBlbHNlUGFydCBdID0gdmFyaWFibGVzLmNoaWxkcmVuLnNsaWNlKC0yKTsKCiAgICAgICAgICB2YXJpYWJsZXMgPSB2YXJpYWJsZXMuYXNzaWduKHsKICAgICAgICAgICAgdmFsdWU6IHsKICAgICAgICAgICAgICAuLi50aGVuUGFydD8uY29tcHV0ZWRWYWx1ZSgpLAogICAgICAgICAgICAgIC4uLmVsc2VQYXJ0Py5jb21wdXRlZFZhbHVlKCkKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBpZiAodGVybSA9PT0gRmlsdGVyRXhwcmVzc2lvbikgewogICAgICAgICAgY29uc3QgWyBzb3VyY2VQYXJ0LCBfIF0gPSB2YXJpYWJsZXMuY2hpbGRyZW4uc2xpY2UoLTIpOwoKICAgICAgICAgIHZhcmlhYmxlcyA9IHZhcmlhYmxlcy5hc3NpZ24oewogICAgICAgICAgICB2YWx1ZTogc291cmNlUGFydD8uY29tcHV0ZWRWYWx1ZSgpCiAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIGlmICh0ZXJtID09PSBGdW5jdGlvbkludm9jYXRpb24pIHsKCiAgICAgICAgICBjb25zdCBbCiAgICAgICAgICAgIG5hbWUsCiAgICAgICAgICAgIC4uLmFyZ3MKICAgICAgICAgIF0gPSB2YXJpYWJsZXMuY2hpbGRyZW47CgogICAgICAgICAgLy8gcHJlc2VydmUgdHlwZSBpbmZvcm1hdGlvbiB0aHJvdWdoIGBnZXQgdmFsdWUoY29udGV4dCwga2V5KWAgdXRpbGl0eQogICAgICAgICAgaWYgKG5hbWU/LnJhdyA9PT0gJ2dldCB2YWx1ZScpIHsKICAgICAgICAgICAgdmFyaWFibGVzID0gZ2V0Q29udGV4dFZhbHVlKHZhcmlhYmxlcywgYXJncyk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBjb25zdCBzdGFydCA9IGNvbnRleHRTdGFydHNbdGVybV07CgogICAgICAgIGlmIChzdGFydCkgewogICAgICAgICAgcmV0dXJuIHZhcmlhYmxlcy5lbnRlclNjb3BlKHN0YXJ0KTsKICAgICAgICB9CgogICAgICAgIGNvbnN0IHByZWZpeGVkU3RhcnQgPSBwcmVmaXhlZENvbnRleHRTdGFydHNbdGVybV07CgogICAgICAgIC8vIHB1bGwgPGV4cHJlc3Npb24+IGludG8gbmV3IDxwcmVmaXhlZFN0YXJ0PiBjb250ZXh0CiAgICAgICAgaWYgKHByZWZpeGVkU3RhcnQpIHsKCiAgICAgICAgICBjb25zdCBjaGlsZHJlbiA9IHZhcmlhYmxlcy5jaGlsZHJlbi5zbGljZSgwLCAtMSk7CiAgICAgICAgICBjb25zdCBsYXN0Q2hpbGQgPSB2YXJpYWJsZXMuY2hpbGRyZW4uc2xpY2UoLTEpWzBdOwoKICAgICAgICAgIHJldHVybiB2YXJpYWJsZXMuYXNzaWduKHsKICAgICAgICAgICAgY2hpbGRyZW4KICAgICAgICAgIH0pLmVudGVyU2NvcGUocHJlZml4ZWRTdGFydCkucHVzaENoaWxkKGxhc3RDaGlsZCkuYXNzaWduKHsKICAgICAgICAgICAgY29udGV4dDogewogICAgICAgICAgICAgIC4uLnZhcmlhYmxlcy5jb250ZXh0LAogICAgICAgICAgICAgIC4uLmxhc3RDaGlsZD8uY29tcHV0ZWRWYWx1ZSgpCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgY29uc3QgY29kZSA9IGlucHV0LnJlYWQoaW5wdXQucG9zLCBzdGFjay5wb3MpOwoKICAgICAgICBjb25zdCBlbmQgPSBjb250ZXh0RW5kc1t0ZXJtXTsKCiAgICAgICAgaWYgKGVuZCkgewogICAgICAgICAgcmV0dXJuIHZhcmlhYmxlcy5leGl0U2NvcGUoY29kZSk7CiAgICAgICAgfQoKICAgICAgICBpZiAodGVybSA9PT0gQ29udGV4dEVudHJ5KSB7CiAgICAgICAgICByZXR1cm4gd3JhcCh2YXJpYWJsZXMsICdDb250ZXh0RW50cnknLCBjb2RlKTsKICAgICAgICB9CgogICAgICAgIGlmICgKICAgICAgICAgIHRlcm0gPT09IEZvckluRXhwcmVzc2lvbiB8fAogICAgICAgICAgdGVybSA9PT0gUXVhbnRpZmllZEluRXhwcmVzc2lvbgogICAgICAgICkgewogICAgICAgICAgcmV0dXJuIHdyYXAodmFyaWFibGVzLCAnSW5FeHByZXNzaW9uJywgY29kZSk7CiAgICAgICAgfQoKICAgICAgICAvLyBkZWZpbmUgPHBhcnRpYWw+IHdpdGhpbiBGb3JFeHByZXNzaW9uIGJvZHkKICAgICAgICBpZiAodGVybSA9PT0gZm9yRXhwcmVzc2lvbkJvZHlTdGFydCkgewoKICAgICAgICAgIHJldHVybiB2YXJpYWJsZXMuZGVmaW5lKAogICAgICAgICAgICAncGFydGlhbCcsCiAgICAgICAgICAgIFZhbHVlUHJvZHVjZXIub2YodmFyaWFibGVzID0+IHsKICAgICAgICAgICAgICByZXR1cm4gdmFyaWFibGVzLmNoaWxkcmVuW3ZhcmlhYmxlcy5jaGlsZHJlbi5sZW5ndGggLSAxXT8uY29tcHV0ZWRWYWx1ZSgpOwogICAgICAgICAgICB9KQogICAgICAgICAgKTsKICAgICAgICB9CgogICAgICAgIGlmICgKICAgICAgICAgIHRlcm0gPT09IFBhcmFtZXRlck5hbWUKICAgICAgICApIHsKICAgICAgICAgIGNvbnN0IFsgbGVmdCBdID0gdmFyaWFibGVzLmNoaWxkcmVuLnNsaWNlKC0xKTsKCiAgICAgICAgICBjb25zdCBuYW1lID0gbGVmdC5jb21wdXRlZFZhbHVlKCk7CgogICAgICAgICAgLy8gVE9ETzogYXR0YWNoIHR5cGUgaW5mb3JtYXRpb24KICAgICAgICAgIHJldHVybiB2YXJpYWJsZXMuZGVmaW5lKG5hbWUsIDEpOwogICAgICAgIH0KCiAgICAgICAgLy8gcHVsbCA8ZXhwcmVzc2lvbj4gaW50byBBcml0aG1ldGljRXhwcmVzc2lvbiBjaGlsZAogICAgICAgIGlmICgKICAgICAgICAgIHRlcm0gPT09IGFyaXRobWV0aWNQbHVzU3RhcnQgfHwKICAgICAgICAgIHRlcm0gPT09IGFyaXRobWV0aWNUaW1lc1N0YXJ0IHx8CiAgICAgICAgICB0ZXJtID09PSBhcml0aG1ldGljRXhwU3RhcnQKICAgICAgICApIHsKICAgICAgICAgIGNvbnN0IGNoaWxkcmVuID0gdmFyaWFibGVzLmNoaWxkcmVuLnNsaWNlKDAsIC0xKTsKICAgICAgICAgIGNvbnN0IGxhc3RDaGlsZCA9IHZhcmlhYmxlcy5jaGlsZHJlbi5zbGljZSgtMSlbMF07CgogICAgICAgICAgcmV0dXJuIHZhcmlhYmxlcy5hc3NpZ24oewogICAgICAgICAgICBjaGlsZHJlbgogICAgICAgICAgfSkuZW50ZXJTY29wZSgnQXJpdGhtZXRpY0V4cHJlc3Npb24nKS5wdXNoQ2hpbGQobGFzdENoaWxkKTsKICAgICAgICB9CgogICAgICAgIGlmICh0ZXJtID09PSBhcml0aG1ldGljVW5hcnlTdGFydCkgewogICAgICAgICAgcmV0dXJuIHZhcmlhYmxlcy5lbnRlclNjb3BlKCdBcml0aG1ldGljRXhwcmVzc2lvbicpOwogICAgICAgIH0KCiAgICAgICAgaWYgKAogICAgICAgICAgdGVybSA9PT0gSWRlbnRpZmllciB8fAogICAgICAgICAgdGVybSA9PT0gQWRkaXRpb25hbElkZW50aWZpZXIgfHwKICAgICAgICAgIHRlcm0gPT09IFByb3BlcnR5SWRlbnRpZmllcgogICAgICAgICkgewogICAgICAgICAgcmV0dXJuIHZhcmlhYmxlcy50b2tlbihjb2RlKTsKICAgICAgICB9CgogICAgICAgIGlmICgKICAgICAgICAgIHRlcm0gPT09IFN0cmluZ0xpdGVyYWwKICAgICAgICApIHsKICAgICAgICAgIHJldHVybiB2YXJpYWJsZXMubGl0ZXJhbChjb2RlLnJlcGxhY2UoL14ifCIkL2csICcnKSk7CiAgICAgICAgfQoKICAgICAgICBpZiAodGVybSA9PT0gQm9vbGVhbkxpdGVyYWwpIHsKICAgICAgICAgIHJldHVybiB2YXJpYWJsZXMubGl0ZXJhbChjb2RlID09PSAndHJ1ZScgPyB0cnVlIDogZmFsc2UpOwogICAgICAgIH0KCiAgICAgICAgaWYgKHRlcm0gPT09IE51bWVyaWNMaXRlcmFsKSB7CiAgICAgICAgICByZXR1cm4gdmFyaWFibGVzLmxpdGVyYWwocGFyc2VGbG9hdChjb2RlKSk7CiAgICAgICAgfQoKICAgICAgICBpZiAodGVybSA9PT0gbmlsKSB7CiAgICAgICAgICByZXR1cm4gdmFyaWFibGVzLmxpdGVyYWwobnVsbCk7CiAgICAgICAgfQoKICAgICAgICBpZiAoCiAgICAgICAgICB0ZXJtID09PSBWYXJpYWJsZU5hbWUKICAgICAgICApIHsKICAgICAgICAgIHJldHVybiB2YXJpYWJsZXMucmVzb2x2ZU5hbWUoKTsKICAgICAgICB9CgogICAgICAgIGlmICgKICAgICAgICAgIHRlcm0gPT09IE5hbWUgfHwKICAgICAgICAgIHRlcm0gPT09IFByb3BlcnR5TmFtZQogICAgICAgICkgewogICAgICAgICAgcmV0dXJuIHZhcmlhYmxlcy5kZWNsYXJlTmFtZSgpOwogICAgICAgIH0KCiAgICAgICAgaWYgKAogICAgICAgICAgdGVybSA9PT0gZXhwcmVzc2lvbjAgfHwKICAgICAgICAgIHRlcm0gPT09IFBvc2l0aXZlVW5hcnlUZXN0CiAgICAgICAgKSB7CiAgICAgICAgICBpZiAodmFyaWFibGVzLnRva2Vucy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigndW5jbGVhcmVkIG5hbWUnKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmICh0ZXJtID09PSBleHByZXNzaW9uMCkgewoKICAgICAgICAgIGxldCBwYXJlbnQgPSB2YXJpYWJsZXM7CgogICAgICAgICAgd2hpbGUgKHBhcmVudC5wYXJlbnQpIHsKICAgICAgICAgICAgcGFyZW50ID0gcGFyZW50LmV4aXRTY29wZShjb2RlKTsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gcGFyZW50OwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHZhcmlhYmxlczsKICAgICAgfQogICAgfSk7CiAgfQoKICBjb25zdCB2YXJpYWJsZVRyYWNrZXIgPSB0cmFja1ZhcmlhYmxlcyh7fSk7CgoKICAvLyBoZWxwZXJzIC8vLy8vLy8vLy8vLy8vCgogIGZ1bmN0aW9uIGdldENvbnRleHRWYWx1ZSh2YXJpYWJsZXMsIGFyZ3MpIHsKCiAgICBpZiAoIWFyZ3MubGVuZ3RoKSB7CiAgICAgIHJldHVybiB2YXJpYWJsZXMuYXNzaWduKHsKICAgICAgICB2YWx1ZTogbnVsbAogICAgICB9KTsKICAgIH0KCiAgICBpZiAoYXJnc1swXS5uYW1lID09PSAnTmFtZScpIHsKICAgICAgYXJncyA9IGV4dHJhY3ROYW1lZEFyZ3MoYXJncywgWyAnbScsICdrZXknIF0pOwogICAgfQoKICAgIGlmIChhcmdzLmxlbmd0aCAhPT0gMikgewogICAgICByZXR1cm4gdmFyaWFibGVzLmFzc2lnbih7CiAgICAgICAgdmFsdWU6IG51bGwKICAgICAgfSk7CiAgICB9CgogICAgY29uc3QgWwogICAgICBjb250ZXh0LAogICAgICBrZXkKICAgIF0gPSBhcmdzOwoKICAgIGNvbnN0IGtleVZhbHVlID0ga2V5Py5jb21wdXRlZFZhbHVlKCk7CiAgICBjb25zdCBjb250ZXh0VmFsdWUgPSBjb250ZXh0Py5jb21wdXRlZFZhbHVlKCk7CgogICAgaWYgKAogICAgICAoIWNvbnRleHRWYWx1ZSB8fCB0eXBlb2YgY29udGV4dFZhbHVlICE9PSAnb2JqZWN0JykgfHwgdHlwZW9mIGtleVZhbHVlICE9PSAnc3RyaW5nJwogICAgKSB7CiAgICAgIHJldHVybiB2YXJpYWJsZXMuYXNzaWduKHsKICAgICAgICB2YWx1ZTogbnVsbAogICAgICB9KTsKICAgIH0KCiAgICByZXR1cm4gdmFyaWFibGVzLmFzc2lnbih7CiAgICAgIHZhbHVlOiBbIG5vcm1hbGl6ZUNvbnRleHRLZXkoa2V5VmFsdWUpLCBrZXlWYWx1ZSBdLnJlZHVjZSgodmFsdWUsIGtleVZhbHVlKSA9PiB7CiAgICAgICAgaWYgKGtleVZhbHVlIGluIGNvbnRleHRWYWx1ZSkgewogICAgICAgICAgcmV0dXJuIGNvbnRleHRWYWx1ZVtrZXlWYWx1ZV07CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gdmFsdWU7CiAgICAgIH0sIG51bGwpCiAgICB9KTsKICB9CgogIGZ1bmN0aW9uIGV4dHJhY3ROYW1lZEFyZ3MoYXJncywgYXJnTmFtZXMpIHsKCiAgICBjb25zdCBjb250ZXh0ID0ge307CgogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgaSArPSAyKSB7CiAgICAgIGNvbnN0IFsgbmFtZSwgdmFsdWUgXSA9IGFyZ3Muc2xpY2UoaSwgaSArIDIpOwoKICAgICAgY29udGV4dFtuYW1lLnZhbHVlXSA9IHZhbHVlOwogICAgfQoKICAgIHJldHVybiBhcmdOYW1lcy5tYXAobmFtZSA9PiBjb250ZXh0W25hbWVdKTsKICB9CgogIGNvbnN0IGZlZWxIaWdobGlnaHRpbmcgPSBzdHlsZVRhZ3MoewogICAgJ1N0cmluZ0xpdGVyYWwnOiB0YWdzLnN0cmluZywKICAgICdOdW1lcmljTGl0ZXJhbCc6IHRhZ3MubnVtYmVyLAogICAgJ0Jvb2xlYW5MaXRlcmFsJzogdGFncy5ib29sLAogICAgJ05hbWUgUXVhbGlmaWVkTmFtZSc6IHRhZ3MubmFtZSwKICAgICdDb21wYXJlT3AnOiB0YWdzLmNvbXBhcmVPcGVyYXRvciwKICAgICdBcml0aE9wJzogdGFncy5hcml0aG1ldGljT3BlcmF0b3IsCiAgICAnUHJvcGVydHlOYW1lIFBhdGhFeHByZXNzaW9uL05hbWUgS2V5JzogdGFncy5wcm9wZXJ0eU5hbWUsCiAgICAnZm9yIGlmIHRoZW4gZWxzZSBzb21lIGV2ZXJ5IHNhdGlzZmllcyBiZXR3ZWVuJzogdGFncy5jb250cm9sS2V5d29yZCwKICAgICdpbiByZXR1cm4gaW5zdGFuY2Ugb2YgYW5kIG9yJzogdGFncy5vcGVyYXRvcktleXdvcmQsCiAgICAnZnVuY3Rpb24nOiB0YWdzLmRlZmluaXRpb25LZXl3b3JkLAogICAgJ0Zvcm1hbFBhcmFtZXRlci9UeXBlISc6IHRhZ3MudHlwZU5hbWUsCiAgICAnYXMnOiB0YWdzLmtleXdvcmQsCiAgICAnV2lsZGNhcmQnOiB0YWdzLnNwZWNpYWwsCiAgICAnbnVsbCc6IHRhZ3MubnVsbCwKICAgICcsJzogdGFncy5zZXBhcmF0b3IsCiAgICAnWyBdJzogdGFncy5zcXVhcmVCcmFja2V0LAogICAgJ3sgfSc6IHRhZ3MuYnJhY2UsCiAgICAnKCApJzogdGFncy5wYXJlbiwKICAgICdMaW5lQ29tbWVudCc6IHRhZ3MubGluZUNvbW1lbnQsCiAgICAnQmxvY2tDb21tZW50JzogdGFncy5ibG9ja0NvbW1lbnQsCiAgICAnUGFyYW1ldGVyTmFtZSBWYXJpYWJsZU5hbWUgPyc6IHRhZ3MudmFyaWFibGVOYW1lLAogICAgJ0RhdGVUaW1lQ29uc3RydWN0b3IhIFNwZWNpYWxGdW5jdGlvbk5hbWUgQnVpbHRJbkZ1bmN0aW9uTmFtZSc6IHRhZ3MuZnVuY3Rpb24odGFncy5zcGVjaWFsKHRhZ3MudmFyaWFibGVOYW1lKSksCiAgICAnRnVuY3Rpb25JbnZvY2F0aW9uL1ZhcmlhYmxlTmFtZSc6IHRhZ3MuZnVuY3Rpb24odGFncy52YXJpYWJsZU5hbWUpLAogICAgJ0xpc3QgSW50ZXJ2YWwnOiB0YWdzLmxpc3QsCiAgICAnQnVpbHRJblR5cGUgTGlzdFR5cGUgQ29udGV4dFR5cGUgRnVuY3Rpb25UeXBlJzogdGFncy5mdW5jdGlvbih0YWdzLnR5cGVOYW1lKSwKICAgICdDb250ZXh0JzogdGFncy5kZWZpbml0aW9uKHRhZ3MubGl0ZXJhbCksCiAgICAnQ29udGV4dEVudHJ5L0tleSc6IHRhZ3MudmFyaWFibGVOYW1lLAogICAgJ0luRXhwcmVzc2lvbi9OYW1lJzogdGFncy5sb2NhbCh0YWdzLnZhcmlhYmxlTmFtZSksCiAgICAnUGFyYW1ldGVyTmFtZS9OYW1lJzogdGFncy5sb2NhbCh0YWdzLnZhcmlhYmxlTmFtZSksCiAgICAnSXRlcmF0aW9uQ29udGV4dC8iLi4iIEludGVydmFsLyIuLiIgIi4iJzogdGFncy5wdW5jdHVhdGlvbgogIH0pOwoKICAvLyBUaGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSBsZXplci1nZW5lcmF0b3IuIFlvdSBwcm9iYWJseSBzaG91bGRuJ3QgZWRpdCBpdC4KICBjb25zdCBzcGVjX2lkZW50aWZpZXIgPSB7X19wcm90b19fOm51bGwsZm9yOjEwLCBpbjozMCwgcmV0dXJuOjM0LCBpZjozOCwgdGhlbjo0MCwgZWxzZTo0Miwgc29tZTo0NiwgZXZlcnk6NDgsIHNhdGlzZmllczo1NSwgb3I6NTgsIGFuZDo2MiwgYmV0d2Vlbjo3MCwgaW5zdGFuY2U6ODYsIG9mOjg5LCBkYXlzOjk5LCB0aW1lOjEwMSwgZHVyYXRpb246MTAzLCB5ZWFyczoxMDUsIG1vbnRoczoxMDcsIGRhdGU6MTA5LCBsaXN0OjExNSwgY29udGV4dDoxMjEsIGZ1bmN0aW9uOjEyOCwgc3RyaW5nOjE0NywgbGVuZ3RoOjE0OSwgdXBwZXI6MTUxLCBjYXNlOjE1MywgbG93ZXI6MTU1LCBzdWJzdHJpbmc6MTU3LCBiZWZvcmU6MTU5LCBhZnRlcjoxNjEsIHN0YXJ0czoxNjMsIHdpdGg6MTY1LCBlbmRzOjE2NywgY29udGFpbnM6MTY5LCBpbnNlcnQ6MTcxLCBpbmRleDoxNzMsIGRpc3RpbmN0OjE3NSwgdmFsdWVzOjE3NywgbWV0OjE3OSwgYnk6MTgxLCBvdmVybGFwczoxODMsIGZpbmlzaGVkOjE4NSwgc3RhcnRlZDoxODcsIGRheToxODksIHllYXI6MTkxLCB3ZWVrOjE5MywgbW9udGg6MTk1LCBnZXQ6MTk3LCB2YWx1ZToxOTksIGVudHJpZXM6MjAxLCBudWxsOjIxMCwgdHJ1ZTozODAsIGZhbHNlOjM4MCwgIj8iOjIyNCwgZXh0ZXJuYWw6MjQwLCBub3Q6MjYzfTsKICBjb25zdCBwYXJzZXIgPSBMUlBhcnNlci5kZXNlcmlhbGl6ZSh7CiAgICB2ZXJzaW9uOiAxNCwKICAgIHN0YXRlczogIiEmbk9gUVlPT08md1FZT09PT1FVJyNDZScjQ2VPJ1JRWU8nI0NgTyhbUV5PJyNGbE9PUVEnI0dRJyNHUU8qfFFZTycjR1FPYFFZTycjRFVPT1FVJyNGWicjRlpPLXJRXk8nI0RdT09RTycjR1gnI0dYTzF5UVdPJyNEdU9PUVUnI0VqJyNFak9PUVUnI0VrJyNFa09PUVUnI0VsJyNFbE8yT09XTycjRW9PMXlRV08nI0VtT09RVScjRW0nI0VtT09RVScjR18nI0dfT09RVScjR10nI0ddTzJUUVlPJyNFck9gUVlPJyNFc08ydVFZTycjRXRPMlRRWU8nI0VxT09RVScjRXEnI0VxT09RVScjRm4nI0ZuTzRaUV5PJyNGbk82dVFXTycjRXVPT1FQJyNHaCcjR2hPNnpRWE8nI0V8T09RVScjR2UnI0dlT09RVScjRm0nI0ZtT09RUScjRlUnI0ZVUWBRWU9PT09RUScjRm8nI0ZvT09RUScjRngnI0Z4T2BRWU8nI0NuT09RUScjRnknI0Z5TydSUVlPJyNDck83VlFZTycjRHZPN1tRWU8nI0R2TzdhUVlPJyNEdk83ZlFZTycjRHZPN25RWU8nI0R2TzdzUVlPJyNEdk83eFFZTycjRHZPN31RWU8nI0R2TzhTUVlPJyNEdk84WFFZTycjRHZPOF5RWU8nI0R2TzhjUVlPJyNEdk84aFFZTycjRHZPT1FVJyNHXicjR15POHBRWU8nI0VuT09RTycjRW4nI0VuT09RTycjR2YnI0dmTzpTUVlPJyNEUU86alFXTycjRnxPT1FPJyNEUycjRFNPOnVRWU8nI0dRUU9RV09PTzp8UVdPT087cFFZTycjQ2RPO31RWU8nI0ZxT09RUScjQ2MnI0NjTzxTUVlPJyNGcE9PUVEnI0NiJyNDYk88W1FZTyw1OHpPYFFZTyw1OWhPT1FRJyNGfScjRn1PT1FRJyNHTycjR09PT1FRJyNHUCcjR1BPYFFZTyw1OXBPYFFZTyw1OXBPYFFZTyw1OXBPT1FRJyNHVicjR1ZPJ1JRWU8sNTpdT09RUScjR1cnI0dXT2BRWU8sNTpfT09RUSw1PFcsNTxXT2BRWU8sNTlkT2BRWU8sNTlmT2BRWU8sNTloTzxhUVlPLDU5aE8/VlFZTyw1OXJPT1FVLDU7VSw1O1VPP1tRXk8sNTlwT09RVS1FOVgtRTlYT0NjUVlPJyNHWU9PUVUsNTphLDU6YU9PUVUsNTtaLDU7Wk9PUVUsNTtYLDU7WE9DalFeTycjRFtPR3FRV08nI0VqT09RVScjR2QnI0dkT0d2UVdPLDU7Xk9He1FZTyw1O19PSlpRXk8nI0RbT0plUVlPJyNHXU9Mc1FZTycjR1tPTVFRV08sNTtgT09RVSw1O10sNTtdT09RVSw1PFksNTxZT01WUVlPLDU7YU9PUVAnI0ZRJyNGUU9NeVFYTycjRlBPT1FPJyNGTycjRk9PTlFRV08nI0V9T05WUVdPJyNHaU9OX1FXTyw1O2hPT1FRLUU5Uy1FOVNPTmRRWU8sNTlZTzt9UVlPJyNGe09PUVEnI0N2JyNDdk9Oa1FZTycjRnpPT1FRJyNDdScjQ3VPTnNRWU8sNTleT054UVlPLDU6Yk9PUU8sNTpiLDU6Yk9OfVFZTyw1OmJPISBWUVlPLDU6Yk8hIFtRWU8sNTtZT2BRWU8nI0ZZTyEgYVFXTyw1PGhPYFFZT09PT1FSJyNDZicjQ2ZPT1FRJyNGVicjRlZPISFXUVlPLDU5T09gUVlPLDU8XU9PUVEnI0Z0JyNGdE8nUlFZTycjRldPISFoUVlPLDU8W09gUVlPMUcuZk9PUVEnI0Z3JyNGd08hIXBRXk8xRy9TTyEmX1FeTzFHL1tPISl8UV5PMUcvW08hMVlRXk8xRy9bT09RVTFHL3cxRy93TyExdlFZTzFHL3lPITVdUV5PMUcvT08hOVJRXk8xRy9RTyE6YVFZTzFHL1NPYFFZTzFHL1NPT1FVMUcvUzFHL1NPITpoUVlPMUcvXk8hO1NRXk8nI0NkT09RTycjRWcnI0VnTyE8ZlFXTycjRWZPITxrUVdPJyNHWk9PUU8nI0VlJyNFZU9PUU8nI0VoJyNFaE8hPHNRV08sNTx0TydSUVlPJyNGW08hPHhRXk8sNTl2TzJUUVlPMUcweE9PUVUxRzB5MUcweU9gUVlPJyNGYE8hQVBRV08sNTx2T09RVTFHMHoxRzB6TyFBW1FXTycjRXdPIUFnUVdPJyNHZ09PUU8nI0V2JyNFdk8hQW9RV08xRzB7T09RUCcjRmInI0ZiTyFBdFFYTyw1O2tPYFFZTyw1O2lPIUF7UVhPJyNGY08hQlRRV08sNT1UT09RVTFHMVMxRzFTT2BRWU8xRy50T2BRWU8sNTxnTydSUVlPJyNGWE8hQl1RWU8sNTxmT2BRWU8xRy54TyFCZVFZTzFHL3xPT1FPMUcvfDFHL3xPT1FPMUcwdDFHMHRPT1FPLDU7dCw1O3RPT1FPLUU5Vy1FOVdPIUJqUVdPT09PUVEtRTlULUU5VE8hQm9RWU8nI0NsT09RUTFHMXcxRzF3T09RUSw1O3IsNTtyT09RUS1FOVUtRTlVTyFCfFFeTzcrJFFPT1FVNyslZTcrJWVPYFFZTzcrJG5PIUVuUVlPLDU7X08hRXVRV083KyRuT09RVScjRFonI0RaTyFFelFZTycjRF5PIUZQUVlPJyNEXk8hRlVRWU8nI0ReTyFGWlFgTycjRGZPIUZgUWBPJyNEaU8hRmVRYE8nI0RtT09RVTcrJHg3KyR4T2BRWU8sNTtRTydSUVlPJyNGX08hRmpRV08sNTx1T09RVTFHMmAxRzJgT09RVSw1O3YsNTt2T09RVS1FOVktRTlZTyFGclFXTzcrJmRPIUZ9UVlPLDU7ek9PUU8tRTleLUU5Xk8hOmhRWU8sNTtjTydSUVlPJyNGYU8hR1tRV08sNT1STyFHZFFZTzcrJmdPT1FQLUU5YC1FOWBPIUdrUVlPMUcxVE9PUU8sNTt9LDU7fU9PUU8tRTlhLUU5YU8hS2RRXk83KyRgTyFLa1FZTzFHMlJPT1FRLDU7cyw1O3NPT1FRLUU5Vi1FOVZPIUt1UV5PNyskZE9PUU83KyVoNyslaE9gUVlPLDU5V08hTmdRXk88PEhZT09RVTw8SFk8PEhZTyMkVVFZTyw1OXhPIyRaUVlPLDU5eE8jJGBRWU8sNTl4TyMkZVFZTyw1OlFPJ1JRWU8sNTpUTyMlUFFiTyw1OlhPIyVXUVlPMUcwbE9PUU8sNTt5LDU7eU9PUU8tRTldLUU5XU9PUVU8PEpPPDxKT09PUU8xRzB9MUcwfU9PUU8sNTt7LDU7e09PUU8tRTlfLUU5X08jJWJRXk8nI0V5T09RVTw8SlI8PEpST2BRWU88PEpST2BRWU88PEd6TyMoU1FZTzFHLnJPIyheUVlPMUcvZE9PUVUxRy9kMUcvZE8jKGNRYk8nI0RdTyModFFgTycjRFtPIylQUWBPMUcvbE8jKVVRV08nI0RsTyMpWlFgTycjR1JPT1FPJyNEaycjRGtPIyljUWBPMUcvb09PUU8nI0RwJyNEcE8jKWhRYE8nI0dUT09RTycjRG8nI0RvTyMpcFFgTzFHL3NPT1FVQU4/bUFOP21PIyl1UV5PQU49Zk9PUVU3KyVPNyslT08jLGdRYE8sNTl2T09RVTcrJVc3KyVXTyMkZVFZTyw1OldPJ1JRWU8nI0ZdTyMsclFgTyw1PG1PT1FVNyslWjcrJVpPIyRlUVlPJyNGXk8jLHpRYE8sNTxvTyMtU1FgTzcrJV9PT1FPMUcvcjFHL3JPT1FPLDU7dyw1O3dPT1FPLUU5Wi1FOVpPT1FPLDU7eCw1O3hPT1FPLUU5Wy1FOVtPITpoUVlPPDxIeU9PUVVBTj5lQU4+ZU8jLVhRXk8nI0ZuT2BRWU8sNTloT2BRWU8sNTlwT2BRWU8sNTlwT2BRWU8sNTlwT2BRWU8sNTlkT2BRWU8sNTlmTzxhUVlPLDU5aE9gUVlPMUcuZk8jLXJRWU8xRy9TTyMvYFFZTzFHL1tPIzB8UVlPMUcvW08jM3dRWU8xRy9PTyM1bFFZTzFHL1FPJ1JRWU8nI0ZbT2BRWU8xRy50T2BRWU8xRy54TyM1fFFZTzcrJFFPYFFZTzcrJG5PIzZtUVlPNysmZ08jOGJRWU83KyRgTyM4aVFZTzcrJGBPIzhwUV5PNyskYE8jOHdRWU83KyRkTyM5aFFZTzw8SFlPIztVUVlPJyNFeU9gUVlPPDxKUk9gUVlPPDxHek8jO3VRWU9BTj1mTyMkZVFZTzw8SHlPYFFZTycjRFVPIzxmUV5PJyNEUU88W1FZTyw1OHpPIz9XUVlPLDU5WU8jP19RWU8sNTleTyM/ZFFZTzFHL1NPIz9rUVdPMUcwe09gUVlPMUcudE8jP3BRYE83KyVfT2BRWU8xRy50TydSUVlPJyNDYE9gUVlPJyNDbk8nUlFZTycjQ3JPYFFZTyw1OWhPTVZRWU8sNTthTyM/dVFZTyw1OVlPIz98UWBPMUcvc08jQFJRWU8sNTlZTyNAWVFXTycjRXVPYFFZTycjQ25PYFFZTyw1OWhPYFFZTyw1OXBPYFFZTyw1OXBPYFFZTyw1OXBPYFFZTyw1OWRPYFFZTyw1OWZPPGFRWU8sNTloT2BRWU8xRy5mTyNAX1FeTzFHL1NPI0BmUV5PMUcvW08jQG1RXk8xRy9bTyNAdFFeTzFHL09PI0FbUV5PMUcvUU9gUVlPMUcueE8jQnBRXk83KyRRT2BRWU83KyRuTyNFZVFZTzcrJmdPI0VsUV5PNyskZE8jSGFRXk88PEhZTyMlUFFiTyw1OlhPI0hoUV5PJyNFeU9gUVlPPDxKUlBgUVlPPDxHelAjS11RXk9BTj1mTyNMYFFeTycjRFFPYFFZTycjQ25PYFFZTycjRFVPPFtRWU8sNTh6TyQgVFFZTyw1OV5PJCBZUVlPMUcvU08kIGFRV08xRzB7TyQgZlFgTycjRG1PYFFZTyw1OWhPYFFZTyw1OXBPYFFZTyw1OXBPYFFZTyw1OXBPYFFZTyw1OWRPYFFZTyw1OWZPPGFRWU8sNTloT2BRWU8xRy5mTyQga1FZTzFHL1NPJCByUVlPMUcvW08kIHlRWU8xRy9bTyQhUVFZTzFHL09PJCFoUVlPMUcvUU9gUVlPMUcueE8kI3xRWU83KyRRT2BRWU83KyRuTyQkcFFZTzcrJmdPJCR3UVlPNyskZE8kJWtRWU88PEhZTyQlclFZTycjRXlPYFFZTzw8SlJQYFFZTzw8R3pQJCZmUVlPQU49Zk9gUVlPJyNEVU88W1FZTyw1OHpPJCdpUVlPLDU5Xk8kJ25RWU8xRy9TTyQndVFXTzFHMHtPJ1JRWU8nI0NgTydSUVlPJyNDck9gUVlPLDU5aE9NVlFZTyw1O2FPJCd6UVdPJyNFdU8nUlFZTycjQ2BPJ1JRWU8nI0NyTyQoUFFZTycjRFFPYFFZTyw1OWhPTVZRWU8sNTthTyQoalFXTycjRXUiLAogICAgc3RhdGVEYXRhOiAiJChvfk8kXk9TJF9PU1BPU1FPU35PVHJPWlVPW1RPY3NPZ3VPaHVPcmdPdWVPIVMhV08hVCFXTyFVd08hVyFWTyFafE8hYiFYTyFmZE8haGZPIWt4TyFteU8hb3lPIXB6TyFze08hdXtPIXd9TyF4IU9PIXkhUE8heyFRTyF9ek8jTyFRTyNQIVFPI1EhUk8jUyFTTyNUIVNPI1UhVE8jXSFVTyNkaU8jb2xPJFlRTyRaUU8lU1tPJVRdTyVVXk8lVl9Pfk9Uck9bVE9jc09ndU9odU9yZ091ZU8hUyFXTyFUIVdPIVV3TyFXIVZPIVp8TyFiIVhPIWZkTyFoZk8ha3hPIW15TyFveU8hcHpPIXN7TyF1e08hd31PIXghT08heSFQTyF7IVFPIX16TyNPIVFPI1AhUU8jUSFSTyNTIVNPI1QhU08jVSFUTyNdIVVPI2RpTyNvbE8kWVFPJFpRTyVTW08lVF1PJVVeTyVWX09+T1ohXU8jdyFfT35QJFVPJFlRTyRaUU9+T1ohZ09bIWdPXSFoT14haE9fIXVPbSFyT28hc09xIWZPciFmT3MhdE95IWlPeyF2TyFoIW9PJGYhbU91JHtYfk8kWyFxTyVeIXFPVCRgWGMkYFhnJGBYaCRgWCFTJGBYIVQkYFghVSRgWCFXJGBYIVokYFghYiRgWCFmJGBYIWskYFghbSRgWCFvJGBYIXAkYFghcyRgWCF1JGBYIXckYFgheCRgWCF5JGBYIXskYFghfSRgWCNPJGBYI1AkYFgjUSRgWCNTJGBYI1QkYFgjVSRgWCNdJGBYI2QkYFgjbyRgWCRXJGBYJFkkYFgkWiRgWCVTJGBYJVQkYFglVSRgWCVWJGBYflAnWk8lUyF3T1QkdFhaJHRYWyR0WGMkdFhnJHRYaCR0WHIkdFh1JHRYIVMkdFghVCR0WCFVJHRYIVckdFghWiR0WCFiJHRYIWYkdFghaCR0WCFrJHRYIW0kdFghbyR0WCFwJHRYIXMkdFghdSR0WCF3JHRYIXgkdFgheSR0WCF7JHRYIX0kdFgjTyR0WCNQJHRYI1EkdFgjUyR0WCNUJHRYI1UkdFgjXSR0WCNkJHRYI28kdFgkWSR0WCRaJHRYJVQkdFglVSR0WCVWJHRYfk8kWVFPJFpRT1QhUFhaIVBYWyFQWF0hUFheIVBYXyFQWGMhUFhnIVBYaCFQWG0hUFhvIVBYcSFQWHIhUFhzIVBYdSFQWHkhUFh7IVBYIVMhUFghVCFQWCFVIVBYIVchUFghWiFQWCFiIVBYIWYhUFghaCFQWCFrIVBYIW0hUFghbyFQWCFwIVBYIXMhUFghdSFQWCF3IVBYIXghUFgheSFQWCF7IVBYIX0hUFgjTyFQWCNQIVBYI1EhUFgjUyFQWCNUIVBYI1UhUFgjXSFQWCNkIVBYI28hUFgkVyFQWCRbIVBYJGYhUFglUyFQWCVUIVBYJVUhUFglViFQWCVeIVBYJGohUFgkaSFQWHchUFhkIVBYYSFQWCNuIVBYZSFQWGshUFh+T3Uhek9+TyVUXU9+T1ojUE8hUyFXTyFUIVdPIVchVk8kWVFPJFpRTyVTW08lVF1PJVVeTyVWX09+TyFmJU9QflBgTyRbI1lPWiRiWFskYlhdJGJYXiRiWF8kYlhtJGJYbyRiWHEkYlhyJGJYcyRiWHUkYlh5JGJYeyRiWCFmJGJYIWgkYlgkVyRiWCRmJGJYZSRiWH5PVCRiWGMkYlhnJGJYaCRiWCFTJGJYIVQkYlghVSRiWCFXJGJYIVokYlghYiRiWCFrJGJYIW0kYlghbyRiWCFwJGJYIXMkYlghdSRiWCF3JGJYIXgkYlgheSRiWCF7JGJYIX0kYlgjTyRiWCNQJGJYI1EkYlgjUyRiWCNUJGJYI1UkYlgjXSRiWCNkJGJYI28kYlgkWSRiWCRaJGJYJFskYlglUyRiWCVUJGJYJVUkYlglViRiWCVeJGJYflAyfE91I1pPfk8kWCNbTyVUXU8jbiVdUH5PbyNpT35PIWwjak9+TyFuI2pPfk8hcSNqTyFyI2pPfk8hdCNqT35PIXYjak9+TyFxI2pPfk98I2pPfk8heiNqT35PIXwjak9+T3wja09+T3wjbE9+TyNWI2pPI1cjak9+T28jbU91I2JYfk9aIWdPWyFnT10haE9eIWhPeSFpT3shdk8haCFvTyRmIW1PdSR7WCRXdFgkanRYd3RYIWZ0WGR0WGF0WCRpdFgjbnRYa3RYfk9fJ1VPbSdTT28nVE9xJ09PcidPT3Mnek9+UDh4TyRqI25PJFckcFh3JHBYfk8kVyN2WH5QKnxPdSNwT35PWiNxT1sjcU9dI3FPXiNxTyRZUU8kWlFPJGYjcU8kZyNxTyR2V1h+T19XWHdXWCRqV1h+UDtST18jdU9+TyRqI3ZPYSRkWH5PYSN5T35PVHJPWlVPW1RPY3NPZ3VPaHVPcmdPdSRUTyFTIVdPIVQhV08hVXdPIVchVk8hWnxPIWIhWE8hZmRPIWhmTyFreE8hbXlPIW95TyFwek8hc3tPIXV7TyF3fU8heCFPTyF5IVBPIXshUU8hfXpPI08hUU8jUCFRTyNRIVJPI1MhU08jVCFTTyNVIVRPI10hVU8jZGlPI29sTyRZUU8kWlFPJVNbTyVUXU8lVV5PJVZfT35PfCRWT35PeyF2TyFoIW9PJGYhbU9UeGFaeGFbeGFdeGFeeGFfeGFjeGFneGFoeGFteGFveGFxeGFyeGFzeGF1JHtYeXhhIVN4YSFUeGEhVXhhIVd4YSFaeGEhYnhhIWZ4YSFreGEhbXhhIW94YSFweGEhc3hhIXV4YSF3eGEheHhhIXl4YSF7eGEhfXhhI094YSNQeGEjUXhhI1N4YSNUeGEjVXhhI114YSNkeGEjb3hhJFd4YSRZeGEkWnhhJFt4YSVTeGElVHhhJVV4YSVWeGElXnhhJGp4YXd4YWR4YWF4YSRpeGEjbnhhZXhha3hhfk93JU9QflBgTyRmJF9PJGkhT1hUIU9YWiFPWFshT1hdIU9YXiFPWF8hT1hjIU9YZyFPWGghT1htIU9YbyFPWHEhT1hyIU9YcyFPWHUhT1h5IU9YeyFPWCFTIU9YIVQhT1ghVSFPWCFXIU9YIVohT1ghYiFPWCFmIU9YIWghT1ghayFPWCFtIU9YIW8hT1ghcCFPWCFzIU9YIXUhT1ghdyFPWCF4IU9YIXkhT1gheyFPWCF9IU9YI08hT1gjUCFPWCNRIU9YI1MhT1gjVCFPWCNVIU9YI10hT1gjZCFPWCNvIU9YJFchT1gkWSFPWCRaIU9YJFshT1glUyFPWCVUIU9YJVUhT1glViFPWCVeIU9YJGohT1h3IU9YZCFPWGEhT1gjbiFPWGUhT1hrIU9Yfk8lUyF3T35PJGkkYU9+T1ohZ09bIWdPXSFoT14haE9fJ1VPbSdTT28nVE9xJ09PcidPT3Mnek93JGJPeSFpT3shdk8haCFvTyRmIW1PdSR7WH5PJFsjWU9aJGJYWyRiWF0kYlheJGJYXyRiWG0kYlhvJGJYcSRiWHIkYlhzJGJYdSRiWHckYlh5JGJYeyRiWCFoJGJYIWYkYlgkaiRiWH5PJGYkX08kaSFPWH5QSVBPWiVQWFslUFhdJVBYXiVQWF8lUFhtJVBYbyVQWHElUFhyJVBYcyVQWHUlUFh3JVBYeSVQWHslUFghaCVQWCRmJVBYJGklV1ghZiVQWCRqJVBYfk9aIWdPWyFnT10haE9eIWhPXydVT20nU09vJ1RPcSdPT3InT09zJ3pPeSFpT3shdk8haCFvTyRmIW1PdSR7WH5PJGokY08hZiVPWHclT1h+UEtyTyFmJGVPfk8kWVFPJFpRT3clWlB+T1ojcU9bI3FPXSNxT14jcU8kWCNbTyRmI3FPJGcjcU9+TyR2I3NYflBNYk8kdiRsT35PJGokbU8jbiVdWH5PI24kb09+T2QkcE9+UEtyTyRqJHJPayRuWH5PayR0T35PIVYkdU9+TyNSJHZPI1Mkdk9+TyNSJHZPfk8hUyR3T35PJGojbk8kVyRwYXckcGF+T1ojcU9bI3FPXSNxT14jcU8kWVFPJFpRTyRmI3FPJGcjcU9+T19XYSR2V2F3V2EkaldhflAhIGxPJGojdk9hJGRhfk9aIWdPWyFnT10haE9eIWhPeSFpT3shdk8haCFvTyRmIW1PVHBpX3BpY3BpZ3BpaHBpbXBpb3BpcXBpcnBpc3BpdSR7WCFTcGkhVHBpIVVwaSFXcGkhWnBpIWJwaSFmcGkha3BpIW1waSFvcGkhcHBpIXNwaSF1cGkhd3BpIXhwaSF5cGkhe3BpIX1waSNPcGkjUHBpI1FwaSNTcGkjVHBpI1VwaSNdcGkjZHBpI29waSRXcGkkWXBpJFpwaSRbcGklU3BpJVRwaSVVcGklVnBpJV5waX5PXSFoT14haE95IWlPeyF2TyFoIW9PJGYhbU9UeGlaeGlbeGlfeGljeGlneGloeGlteGlveGlxeGlyeGlzeGl1JHtYIVN4aSFUeGkhVXhpIVd4aSFaeGkhYnhpIWZ4aSFreGkhbXhpIW94aSFweGkhc3hpIXV4aSF3eGkheHhpIXl4aSF7eGkhfXhpI094aSNQeGkjUXhpI1N4aSNUeGkjVXhpI114aSNkeGkjb3hpJFd4aSRZeGkkWnhpJFt4aSVTeGklVHhpJVV4aSVWeGklXnhpfk95IWlPeyF2TyFoIW9PJGYhbU9UeGlaeGlbeGldeGleeGlfeGljeGlneGloeGlteGlveGlxeGlyeGlzeGl1JHtYIVN4aSFUeGkhVXhpIVd4aSFaeGkhYnhpIWZ4aSFreGkhbXhpIW94aSFweGkhc3hpIXV4aSF3eGkheHhpIXl4aSF7eGkhfXhpI094aSNQeGkjUXhpI1N4aSNUeGkjVXhpI114aSNkeGkjb3hpJFd4aSRZeGkkWnhpJFt4aSVTeGklVHhpJVV4aSVWeGklXnhpfk97IXZPIWghb08kZiFtT1R4aVp4aVt4aV14aV54aV94aWN4aWd4aWh4aW14aW94aXF4aXJ4aXN4aXUke1ghU3hpIVR4aSFVeGkhV3hpIVp4aSFieGkhZnhpIWt4aSFteGkhb3hpIXB4aSFzeGkhdXhpIXd4aSF4eGkheXhpIXt4aSF9eGkjT3hpI1B4aSNReGkjU3hpI1R4aSNVeGkjXXhpI2R4aSNveGkkV3hpJFl4aSRaeGkkW3hpJVN4aSVUeGklVXhpJVZ4aSVeeGlleGl+T3l4aSRqeGl3eGlkeGlheGkkaXhpI254aWt4aX5QIS1rTyFmJVJPflBLck9aIWdPWyFnT10haE9eIWhPeSFpT3shdk8haCFvTyRmIW1PVGxpY2xpZ2xpaGxpbWxpdSR7WCFTbGkhVGxpIVVsaSFXbGkhWmxpIWJsaSFmbGkha2xpIW1saSFvbGkhcGxpIXNsaSF1bGkhd2xpIXhsaSF5bGkhe2xpIX1saSNPbGkjUGxpI1FsaSNTbGkjVGxpI1VsaSNdbGkjZGxpI29saSRXbGkkWWxpJFpsaSRbbGklU2xpJVRsaSVVbGklVmxpJV5saX5PXyF1T28hc09xIWZPciFmT3MhdE9+UCExfU9aIWdPWyFnT10haE9eIWhPeSFpT3shdk8haCFvTyRmIW1PVG5pY25pZ25paG5pbW5pb25pdSR7WCFTbmkhVG5pIVVuaSFXbmkhWm5pIWJuaSFmbmkha25pIW1uaSFvbmkhcG5pIXNuaSF1bmkhd25pIXhuaSF5bmkhe25pIX1uaSNPbmkjUG5pI1FuaSNTbmkjVG5pI1VuaSNdbmkjZG5pI29uaSRXbmkkWW5pJFpuaSRbbmklU25pJVRuaSVVbmklVm5pJV5uaX5PXyF1T3EhZk9yIWZPcyF0T35QITVwT1ohZ09bIWdPXSFoT14haE9fJ1VPbSdTT3EnT09yJ09Pcyd6T3khaU97IXZPIWghb08kZiFtT3Uke1h+T28lU09+UCE5Y08hUiVXTyFVJVhPIVclWU8hWiVaTyFeJVtPIWIlXU8kWVFPJFpRT35PWiN9WFsjfVhdI31YXiN9WF8jfVhtI31YbyN9WHEjfVhyI31YcyN9WHUjfVh3I31YeSN9WHsjfVghaCN9WCRZI31YJFojfVgkWyN9WCRmI31YJGojfVh+UDtSTyR2JV9Pfk8kaiVgT3ckfVh+T3clYk9+TyRmJF9PJGkhT2FUIU9hWiFPYVshT2FdIU9hXiFPYV8hT2FjIU9hZyFPYWghT2FtIU9hbyFPYXEhT2FyIU9hcyFPYXUhT2F5IU9heyFPYSFTIU9hIVQhT2EhVSFPYSFXIU9hIVohT2EhYiFPYSFmIU9hIWghT2EhayFPYSFtIU9hIW8hT2EhcCFPYSFzIU9hIXUhT2EhdyFPYSF4IU9hIXkhT2EheyFPYSF9IU9hI08hT2EjUCFPYSNRIU9hI1MhT2EjVCFPYSNVIU9hI10hT2EjZCFPYSNvIU9hJFchT2EkWSFPYSRaIU9hJFshT2ElUyFPYSVUIU9hJVUhT2ElViFPYSVeIU9hJGohT2F3IU9hZCFPYWEhT2EjbiFPYWUhT2FrIU9hfk8kaiRjTyFmJU9hdyVPYX5PJHYlaE93I2tYJGoja1h+TyRqJWlPdyVaWH5PdyVrT35PJHYjc2F+UE1iTyRYI1tPJVRdT35PJGokbU8jbiVdYX5PJGokck9rJG5hfk8hVCV1T35PdyFeT35PJGkldk9hYFgkamBYflBLck9UU3FjU3FnU3FoU3EhU1NxIVRTcSFVU3EhV1NxIVpTcSFiU3EhZlNxIWtTcSFtU3Ehb1NxIXBTcSFzU3EhdVNxIXdTcSF4U3EheVNxIXtTcSF9U3EjT1NxI1BTcSNRU3EjU1NxI1RTcSNVU3EjXVNxI2RTcSNvU3EkV1NxJFlTcSRaU3EkW1NxJVNTcSVUU3ElVVNxJVZTcSVeU3F+UCdaTyRqdFh+UEd7T3cleE9+T28leU9+T28lek9+T28le09+TyFbJXxPfk8hWyV9T35PIVsmT09+TyRqJWBPdyR9YX5PdyZTTyFmJlNPIWgmU09+TyFmJFNhJGokU2F3JFNhflBLck8kaiVpT3clWmF+TyNsJllPflBgTyNuI3FpJGojcWl+UEtyT1ohZ09bIWdPXSFoT14haE9fKFhPbShWT28oV09xKFJPcihST3MpaU95IWlPeyF2TyFoIW9PJGYhbU9UYnFjYnFnYnFoYnF1JHtYIVNicSFUYnEhVWJxIVdicSFaYnEhYmJxIWZicSFrYnEhbWJxIW9icSFwYnEhc2JxIXVicSF3YnEheGJxIXlicSF7YnEhfWJxI09icSNQYnEjUWJxI1NicSNUYnEjVWJxI11icSNkYnEjb2JxJFdicSRZYnEkWmJxJFticSVTYnElVGJxJVVicSVWYnElXmJxfk9lJlpPflAhR3VPayRvaSRqJG9pflBLck9UZnFjZnFnZnFoZnEhU2ZxIVRmcSFVZnEhV2ZxIVpmcSFiZnEhZmZxIWtmcSFtZnEhb2ZxIXBmcSFzZnEhdWZxIXdmcSF4ZnEheWZxIXtmcSF9ZnEjT2ZxI1BmcSNRZnEjU2ZxI1RmcSNVZnEjXWZxI2RmcSNvZnEkV2ZxJFlmcSRaZnEkW2ZxJVNmcSVUZnElVWZxJVZmcSVeZnF+UCdaT1ohZ09bIWdPXSFoT14haE95IWlPeyF2TyFoIW9PJGYhbU9UcHlfcHljcHlncHlocHltcHlvcHlxcHlycHlzcHl1JHtYIVNweSFUcHkhVXB5IVdweSFacHkhYnB5IWZweSFrcHkhbXB5IW9weSFwcHkhc3B5IXVweSF3cHkheHB5IXlweSF7cHkhfXB5I09weSNQcHkjUXB5I1NweSNUcHkjVXB5I11weSNkcHkjb3B5JFdweSRZcHkkWnB5JFtweSVTcHklVHB5JVVweSVWcHklXnB5fk8hUyZdT35PIVYmXU9+TyFTJl5Pfk8hUiVXTyFVJVhPIVclWU8hWiVaTyFeJVtPIWIock8kWVFPJFpRT35PIVgkd1B+UCMkZU93I1lpJGojWWl+UEtyT1QjbVhjI21YZyNtWGgjbVghUyNtWCFUI21YIVUjbVghVyNtWCFaI21YIWIjbVghZiNtWCFrI21YIW0jbVghbyNtWCFwI21YIXMjbVghdSNtWCF3I21YIXgjbVgheSNtWCF7I21YIX0jbVgjTyNtWCNQI21YI1EjbVgjUyNtWCNUI21YI1UjbVgjXSNtWCNkI21YI28jbVgkVyNtWCRZI21YJFojbVgkWyNtWCVTI21YJVQjbVglVSNtWCVWI21YJV4jbVh+UCdaT2FgaSRqYGl+UEtyTyFUJmxPfk8kWVFPJFpRTyFYIVBYJGYhUFgkaiFQWH5PJGYnXU8hWCFPWCRqIU9Yfk8hWCZuT35PJHYmb09+TyRqJnBPIVgkdVh+TyFYJnJPfk8kaiZzTyFYJHdYfk8hWCZ1T35PVGIhUmNiIVJnYiFSaGIhUiFTYiFSIVRiIVIhVWIhUiFXYiFSIVpiIVIhYmIhUiFmYiFSIWtiIVIhbWIhUiFvYiFSIXBiIVIhc2IhUiF1YiFSIXdiIVIheGIhUiF5YiFSIXtiIVIhfWIhUiNPYiFSI1BiIVIjUWIhUiNTYiFSI1RiIVIjVWIhUiNdYiFSI2RiIVIjb2IhUiRXYiFSJFliIVIkWmIhUiRbYiFSJVNiIVIlVGIhUiVVYiFSJVZiIVIlXmIhUn5QJ1pPJGYnXU8hWCFPYSRqIU9hfk8kaiZwTyFYJHVhfk8kaiZzTyFYJHdhfk8keCZ7T35PJGokYlhkJGJYdyRiWGEkYlgkaSRiWCNuJGJYayRiWH5QMnxPWiFnT1shZ09dIWhPXiFoT3khaU97IXZPIWghb08kZiFtT19waW1waW9waXFwaXJwaXNwaXUke1gkV3BpJGpwaXdwaSFmcGlkcGlhcGkkaXBpI25waWtwaX5PXSFoT14haE95IWlPeyF2TyFoIW9PJGYhbU9aeGlbeGlfeGlteGlveGlxeGlyeGlzeGl1JHtYJFd4aSRqeGl3eGkhZnhpZHhpYXhpJGl4aSNueGlreGl+T3khaU97IXZPIWghb08kZiFtT1p4aVt4aV14aV54aV94aW14aW94aXF4aXJ4aXN4aXUke1gkV3hpJGp4aXd4aSFmeGlkeGlheGkkaXhpI254aWt4aX5PWiFnT1shZ09dIWhPXiFoT3khaU97IXZPIWghb08kZiFtT21saXUke1gkV2xpJGpsaXdsaSFmbGlkbGlhbGkkaWxpI25saWtsaX5PXydVT28nVE9xJ09PcidPT3Mnek9+UCMyak9aIWdPWyFnT10haE9eIWhPeSFpT3shdk8haCFvTyRmIW1PbW5pb25pdSR7WCRXbmkkam5pd25pIWZuaWRuaWFuaSRpbmkjbm5pa25pfk9fJ1VPcSdPT3InT09zJ3pPflAjNFtPJFdTcSRqU3F3U3EhZlNxZFNxYVNxJGlTcSNuU3FrU3F+UEtyTyNsJ2lPflBgT1ohZ09bIWdPXSFoT14haE9fKHlPbSh3T28oeE9xKHNPcihzT3MpY095IWlPeyF2TyFoIW9PJGYhbU91JHtYJFdicSRqYnF3YnEhZmJxZGJxYWJxJGlicSNuYnFrYnF+T2Unak9+UCM2dE9lYnF+UCM2dE9lYnF+UCFHdU8kV2ZxJGpmcXdmcSFmZnFkZnFhZnEkaWZxI25mcWtmcX5QS3JPWiFnT1shZ09dIWhPXiFoT3khaU97IXZPIWghb08kZiFtT19weW1weW9weXFweXJweXNweXUke1gkV3B5JGpweXdweSFmcHlkcHlhcHkkaXB5I25weWtweX5PJFcjbVgkaiNtWHcjbVghZiNtWGQjbVhhI21YJGkjbVgjbiNtWGsjbVh+UEtyTyRXYiFSJGpiIVJ3YiFSIWZiIVJkYiFSYWIhUiRpYiFSI25iIVJrYiFSflBLck9UdFhjdFhndFhodFghU3RYIVR0WCFVdFghV3RYIVp0WCFidFghZnRYIWt0WCFtdFghb3RYIXB0WCFzdFghdXRYIXd0WCF4dFgheXRYIXt0WCF9dFgjT3RYI1B0WCNRdFgjU3RYI1R0WCNVdFgjXXRYI2R0WCNvdFgkV3RYJFl0WCRadFgkW3RYJVN0WCVUdFglVXRYJVZ0WCVedFh+UCdaT2QnXk9+UEtyT2snX09+T28nYU9+UCE5Y093J2JPfk8keCdsT35PZCd0T35QS3JPIVgndU9+T2Qndk9+UEtyT3Une09+T2VwaX5QISFwT2V4aX5QISZfT2V4aX5QISl8T18oWE9vKFdPcShST3IoUk9zKWlPZWxpflAhMX1PXyhYT3EoUk9yKFJPcylpT2VuaX5QITVwT1ohZ09bIWdPXSFoT14haE9fKFhPbShWT28oV09xKFJPcihST3MpaU95IWlPeyF2TyFoIW9PJGYhbU91JHtYfk9UU3FjU3FlU3FnU3FoU3EhU1NxIVRTcSFVU3EhV1NxIVpTcSFiU3EhZlNxIWtTcSFtU3Ehb1NxIXBTcSFzU3EhdVNxIXdTcSF4U3EheVNxIXtTcSF9U3EjT1NxI1BTcSNRU3EjU1NxI1RTcSNVU3EjXVNxI2RTcSNvU3EkV1NxJFlTcSRaU3EkW1NxJVNTcSVUU3ElVVNxJVZTcSVeU3F+UCNBb08jbChoT35QYE9UZnFjZnFlZnFnZnFoZnEhU2ZxIVRmcSFVZnEhV2ZxIVpmcSFiZnEhZmZxIWtmcSFtZnEhb2ZxIXBmcSFzZnEhdWZxIXdmcSF4ZnEheWZxIXtmcSF9ZnEjT2ZxI1BmcSNRZnEjU2ZxI1RmcSNVZnEjXWZxI2RmcSNvZnEkV2ZxJFlmcSRaZnEkW2ZxJVNmcSVUZnElVWZxJVZmcSVeZnF+UCNBb09lcHl+UCFOZ09UI21YYyNtWGUjbVhnI21YaCNtWCFTI21YIVQjbVghVSNtWCFXI21YIVojbVghYiNtWCFmI21YIWsjbVghbSNtWCFvI21YIXAjbVghcyNtWCF1I21YIXcjbVgheCNtWCF5I21YIXsjbVghfSNtWCNPI21YI1AjbVgjUSNtWCNTI21YI1QjbVgjVSNtWCNdI21YI2QjbVgjbyNtWCRXI21YJFkjbVgkWiNtWCRbI21YJVMjbVglVCNtWCVVI21YJVYjbVglXiNtWH5QI0FvT1ohZ09bIWdPXSFoT14haE9fKFhPbShWT28oV09xKFJPcihST3MpaU95IWlPeyF2TyFoIW9PJGYhbU91JHtYflFiIVJUdFhjdFhldFhndFhodFghU3RYIVR0WCFVdFghV3RYIVp0WCFidFghZnRYIWt0WCFtdFghb3RYIXB0WCFzdFghdXRYIXd0WCF4dFgheXRYIXt0WCF9dFgjT3RYI1B0WCNRdFgjU3RYI1R0WCNVdFgjXXRYI2R0WCNvdFgkV3RYJFl0WCRadFgkW3RYJVN0WCVUdFglVXRYJVZ0WCVedFh+UCNBb09rKGBPfk9vKGJPflAhOWNPdyhjT35PIVsoZk9+T2VwaX5QIy1yT2V4aX5QIy9gT2V4aX5QIzB8T18oeU9vKHhPcShzT3Ioc09zKWNPZWxpflAjMmpPXyh5T3Eoc09yKHNPcyljT2VuaX5QIzRbT1ohZ09bIWdPXSFoT14haE9fKHlPbSh3T28oeE9xKHNPcihzT3MpY095IWlPeyF2TyFoIW9PJGYhbU91JHtYfk9lU3EkV1NxJGpTcXdTcSFmU3FkU3FhU3EkaVNxI25TcWtTcX5QJCF7TyNsKVhPflBgT2VmcSRXZnEkamZxd2ZxIWZmcWRmcWFmcSRpZnEjbmZxa2ZxflAkIXtPZXB5flAjOWhPZSNtWCRXI21YJGojbVh3I21YIWYjbVhkI21YYSNtWCRpI21YI24jbVhrI21YflAkIXtPWiFnT1shZ09dIWhPXiFoT18oeU9tKHdPbyh4T3Eoc09yKHNPcyljT3khaU97IXZPIWghb08kZiFtT3Uke1h+UWIhUmspUU9+T28pU09+UCE5Y093KVRPfk91KWRPfk9fKHlPbSh3T28oeE9xKHNPcihzT3MpY09ldFh+UDh4T3Upak9+TyIsCiAgICBnb3RvOiAiITdmJV5QUFBQJV9QJ1gnZSduKForUlBQUFBQK1tQJV9QUFAlX1BQK18ra1AlX1AlX1AlX1BQUCt0UCxTUCVfUCVfUFAsXSxyLVYselBQUFBQUFAselBQLHpQL2wvbyx6UC91L3slX1AlX1AlXzBTUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUDF8MlAyVjF8UDJiNF8yYjJiNmM4YFAlXzpdJV88VjxWPlA+XVA+ZlBQPFY+cj54Nl8+fFA/VVA/WD9fP2Y/bD9yP3hCWEJkQmpCcEJ2QnxDU0NZUFBQUFBQUFBDYENkSFtKVUxVTFtQUExjUFBMaUx1TnUhIXUhIXshI1MhI1ghJG4hJlghJ3YhKXZQISl5UCEpfSEraCEtUiEueyEvUiEvVSVfIS9bITFVUFBQUCEzVkhbITNjITVjITVpITdjJG9pT1BWZWZxdCFmIWohayFsIXAhciFzIXQhdSF6I24jcCN0I3gkVCRjJGwkcCRxJHQlUyVfJWsldiZZJlonTydQJ1EnUidTJ1QnVSdWJ14nXydhJ2InaSdqJ20ndCd2J3gneihRKFIoUyhUKFUoVihXKFgoWShgKGIoYyhoKGkobChtKHModCh1KHYodyh4KHkoeilRKVMpVClYKVkpWyljKWlRIWVSUSdvJ3dRKG4pZlIpXSlhVyFjUid3KWEpZlIlTyN2WSFhUiN2J3cpYSlmWSNkdiRyJ3kpYilnXiRYIXojWiVgJWkneylkKWpUJmIlfSZwJWBXT1BWWGRlZmdxdCFmIWohayFsIW4hcCFyIXMhdCF1I24jcCN0I3gkVCRWJF8kYSRjJGwkcCRxJHQlUyVfJWglayV2JXwmTyZZJlomXyZvJnMmeydPJ1AnUSdSJ1MnVCdVJ1YnXSdeJ18nYSdiJ2knaidsJ20ndCd2J3gneihRKFIoUyhUKFUoVihXKFgoWShgKGIoYyhmKGgoaShsKG0ocyh0KHUodih3KHgoeSh6KVEpUylUKVgpWSlbKWMpaXQhYFJ2I1ojdiRyJWAlaSV9JnAndyd5J3spYSliKWQpZilnKWpVI3IhYCNzJFdSJFchelUjciFgI3MkV1QkaiNdJGtSJH0jdFEjaHZRJ3EneVEobylnUileKWJXI2Z2J3kpYilnUiVyJHJVIVpQI3AkVFckVSF1J1UoWCh5UiR4I25RIV5QUSR6I3BSJVUkVFElXiRWUSZUJWhRJmElfFUmZiZPJnMoZlEmdiZvVCZ8JnsnbFsjUWRlZmckVCRhYyVWJFYlaCV8Jk8mbyZzJnsnbChmIWJqT1ZxIWYhaiFrIWwhciFzIXUjeCRwJHQlUyVrJlkmWid0KFIoUyhUKFUoVihXKFgoWShgKGIoYyhoKGkobVsjT2RnJFYkYSVoJntVI1RlZiRUUSRPIW5TJWMkXyddWyZgJXwmTyZvJnMnbChmI1YmfVB0IXAhdCF6I24jcCN0JGMkbCRxJV8ldidPJ1AnUSdSJ1MnVCdVJ1YnXidfJ2EnYidpJ2onbSd2J3gneihRKGwocyh0KHUodih3KHgoeSh6KVEpUylUKVgpWSlbKWMpaVImZSV9USZjJX1SJncmcFEmaSZPUid9KGZTJmcmTyhmUiZ5JnMkb1lPUFZlZnF0IWYhaiFrIWwhcCFyIXMhdCF1IXojbiNwI3QjeCRUJGMkbCRwJHEkdCVTJV8layV2JlkmWidPJ1AnUSdSJ1MnVCdVJ1YnXidfJ2EnYidpJ2onbSd0J3YneCd6KFEoUihTKFQoVShWKFcoWChZKGAoYihjKGgoaShsKG0ocyh0KHUodih3KHgoeSh6KVEpUylUKVgpWSlbKWMpaVIkXiF6USRaIXpSJlElYFMkWSF6JWBaJGYjWiVpJ3spZClqJHViT1BWZGVmZ3F0IWYhaiFrIWwhcCFyIXMhdCF1IXojbiNwI3QjeCRUJGEkYyRsJHAkcSR0JVMlXyVrJXYmWSZaJ08nUCdRJ1InUydUJ1UnVideJ18nYSdiJ2knaidtJ3Qndid4J3ooUShSKFMoVChVKFYoVyhYKFkoYChiKGMoaChpKGwobShzKHQodSh2KHcoeCh5KHopUSlTKVQpWClZKVspYylpJHRiT1BWZGVmZ3F0IWYhaiFrIWwhcCFyIXMhdCF1IXojbiNwI3QjeCRUJGEkYyRsJHAkcSR0JVMlXyVrJXYmWSZaJ08nUCdRJ1InUydUJ1UnVideJ18nYSdiJ2knaidtJ3Qndid4J3ooUShSKFMoVChVKFYoVyhYKFkoYChiKGMoaChpKGwobShzKHQodSh2KHcoeCh5KHopUSlTKVQpWClZKVspYylpUSF8X1QjXm0kbSR1YE9QVmRlZmdxdCFmIWohayFsIXAhciFzIXQhdSF6I24jcCN0I3gkVCRhJGMkbCRwJHEkdCVTJV8layV2JlkmWidPJ1AnUSdSJ1MnVCdVJ1YnXidfJ2EnYidpJ2onbSd0J3YneCd6KFEoUihTKFQoVShWKFcoWChZKGAoYihjKGgoaShsKG0ocyh0KHUodih3KHgoeSh6KVEpUylUKVgpWSlbKWMpaSR1YU9QVmRlZmdxdCFmIWohayFsIXAhciFzIXQhdSF6I24jcCN0I3gkVCRhJGMkbCRwJHEkdCVTJV8layV2JlkmWidPJ1AnUSdSJ1MnVCdVJ1YnXidfJ2EnYidpJ2onbSd0J3YneCd6KFEoUihTKFQoVShWKFcoWChZKGAoYihjKGgoaShsKG0ocyh0KHUodih3KHgoeSh6KVEpUylUKVgpWSlbKWMpaSRvaE9QVmVmcXQhZiFqIWshbCFwIXIhcyF0IXUheiNuI3AjdCN4JFQkYyRsJHAkcSR0JVMlXyVrJXYmWSZaJ08nUCdRJ1InUydUJ1UnVideJ18nYSdiJ2knaidtJ3Qndid4J3ooUShSKFMoVChVKFYoVyhYKFkoYChiKGMoaChpKGwobShzKHQodSh2KHcoeCh5KHopUSlTKVQpWClZKVspYylpJG9uT1BWZWZxdCFmIWohayFsIXAhciFzIXQhdSF6I24jcCN0I3gkVCRjJGwkcCRxJHQlUyVfJWsldiZZJlonTydQJ1EnUidTJ1QnVSdWJ14nXydhJ2InaSdqJ20ndCd2J3gneihRKFIoUyhUKFUoVihXKFgoWShgKGIoYyhoKGkobChtKHModCh1KHYodyh4KHkoeilRKVMpVClYKVkpWyljKWlRJGkjWlEncyd7UShxKWpSKWApZFckZyNaJ3spZClqUiZVJWlXJlglaydiKGMpVFgmaiZZJ2koaClYUSNgbVIlbiRtVCNfbSRtUyNdbSRtVCRqI10ka1IhXlBRcU9SI2JxUyNzIWAkV1IkeyNzUSN3IWNSJVAjd1EkcyNmUiVzJHNRI28hWlIkeSNvJU9YT1BWZGVmZ3F0IWYhaiFrIWwhbiFwIXIhcyF0IXUheiNuI3AjdCN4JFQkViRfJGEkYyRsJHAkcSR0JVMlXyVoJWsldiZZJlomeydPJ1AnUSdSJ1MnVCdVJ1YnXidfJ2EnYidpJ2onbSd0J3YneCd6KFEoUihTKFQoVShWKFcoWChZKGAoYihjKGgoaShsKG0ocyh0KHUodih3KHgoeSh6KVEpUylUKVgpWSlbKWMpaVMheVgmX18mXyV8Jk8mbyZzJ10nbChmUyRgI08jVFMlZCRgJm1SJm0mYFEmcSZjUiZ4JnFRJnQmZ1ImeiZ0USVhJFpSJlIlYVEkZCNWUiVnJGRRJWokZ1ImViVqUSRrI11SJWwka1EkbiNgUiVvJG5UcE9xU1NPcVchWVAjbiNwJ1VXIXhWJ20obSlbUSNTZVMjVmYhelEjY3RRI3ohZlEjeyFqUSN8IWtXI30hbCdSKFUodlEkUCFwUSRRIXJRJFIhc1EkUyF0USR8I3RRJVEjeFElVCRUUSVmJGNRJW0kbFElcCRwUSVxJHFRJXQkdFEldyVTUSZQJV9TJlclayZZUSZbJXZRJmsmWlEnVydPUSdYJ1BRJ1knUVEnWidTUSdbJ1RRJ2AnVlEnYydeUSdkJ3ZRJ2UndFEnZidfUSdnJ2FTJ2gnYidpUSdrJ2pRJ24hdVEncCd4USdyJ3pRJ3woUVEoTyhsUShaKFJRKFsoU1EoXShUUSheKFZRKF8oV1EoYShZUShkKGBRKGUoYlMoZyhjKGhRKGooaVEoayhYUShwKWlRKHsoc1EofCh0USh9KHVRKU8od1EpUCh4USlSKHpRKVUpUVEpVilTUylXKVQpWFEpWilZUSlfKWNSKWgoeSRvb09QVmVmcXQhZiFqIWshbCFwIXIhcyF0IXUheiNuI3AjdCN4JFQkYyRsJHAkcSR0JVMlXyVrJXYmWSZaJ08nUCdRJ1InUydUJ1UnVideJ18nYSdiJ2knaidtJ3Qndid4J3ooUShSKFMoVChVKFYoVyhYKFkoYChiKGMoaChpKGwobShzKHQodSh2KHcoeCh5KHopUSlTKVQpWClZKVspYylpcFJPVnEhZiFqIWshbCFyIXMhdSN4JHQlUyVrJlkmWiFqJ3dQZWZ0IXAhdCF6I24jcCN0JFQkYyRsJHElXyV2J08nUCdRJ1InUydUJ1UnVidfJ2EnYidpJ2onbSd4J3ooUShsKWMpaXApYSdeJ3Yocyh0KHUodih3KHgoeSh6KVEpUylUKVgpWSlbcSlmJHAndChSKFMoVChVKFYoVyhYKFkoYChiKGMoaChpKG1YIWRSJ3cpYSlmWiFiUiN2J3cpYSlmUSN0IWFSJHEjZFEjeCFlUSdWJ29RKFkoblIoeildcHRPVnEhZiFqIWshbCFyIXMhdSN4JHQlUyVrJlkmWiFqJ3hQZWZ0IXAhdCF6I24jcCN0JFQkYyRsJHElXyV2J08nUCdRJ1InUydUJ1UnVidfJ2EnYidpJ2onbSd4J3ooUShsKWMpaXAoUSRwJ3QoUihTKFQoVShWKFcoWChZKGAoYihjKGgoaShtcShsJ14ndihzKHQodSh2KHcoeCh5KHopUSlTKVQpWClZKVtwdk9WcSFmIWohayFsIXIhcyF1I3gkdCVTJWsmWSZaIWoneVBlZnQhcCF0IXojbiNwI3QkVCRjJGwkcSVfJXYnTydQJ1EnUidTJ1QnVSdWJ18nYSdiJ2knaidtJ3gneihRKGwpYylpcCliJ14ndihzKHQodSh2KHcoeCh5KHopUSlTKVQpWClZKVtxKWckcCd0KFIoUyhUKFUoVihXKFgoWShgKGIoYyhoKGkobVgjZ3YneSliKWdaI2V2JHIneSliKWdWIVtQI3AkVGQhalMjeiRRJFIlUSV0JXcmVyZrJ24hVydQIVkjUyNWI2MkUCRTJHwlVCVmJW0lcSZQJlsnVydaJ1snYCdmJ2cnaCdrJ3Ancid8KE8ocClfZihTJXAnZShaKF4oXyhhKGQoZShnKGooa2codCdjJ2QoeylPKVApUilVKVYpVylaKWhmIWtTI3ojeyRRJFIlUSV0JXcmVyZrJ24hWSdRIVkjUyNWI2MkUCRTJHwlVCVmJW0lcSZQJlsnVydYJ1onWydgJ2YnZydoJ2sncCdyJ3woTyhwKV9oKFQlcCdlKFooWyheKF8oYShkKGUoZyhqKGtpKHUnYydkKHsofClPKVApUilVKVYpVylaKWhoIWxTI3ojeyN8JFEkUiVRJXQldyZXJmsnbiFbJ1IhWSNTI1YjYyRQJFMkfCVUJWYlbSVxJlAmWydXJ1gnWSdaJ1snYCdmJ2cnaCdrJ3Ancid8KE8ocClfaihVJXAnZShaKFsoXSheKF8oYShkKGUoZyhqKGtrKHYnYydkKHsofCh9KU8pUClSKVUpVilXKVopaHBWT1ZxIWYhaiFrIWwhciFzIXUjeCR0JVMlayZZJlohaidtUGVmdCFwIXQheiNuI3AjdCRUJGMkbCRxJV8ldidPJ1AnUSdSJ1MnVCdVJ1YnXydhJ2InaSdqJ20neCd6KFEobCljKWlwKG0kcCd0KFIoUyhUKFUoVihXKFgoWShgKGIoYyhoKGkobXEpWydeJ3Yocyh0KHUodih3KHgoeSh6KVEpUylUKVgpWSlbUiZkJX1UJmgmTyhmJFAhblMhWSF4I1MjViNjI3ojeyN8I30kUCRRJFIkUyR8JVElVCVmJW0lcCVxJXQldyZQJlcmWyZrJ1cnWCdZJ1onWydgJ2MnZCdlJ2YnZydoJ2snbidwJ3InfChPKFooWyhdKF4oXyhhKGQoZShnKGooayhwKHsofCh9KU8pUClSKVUpVilXKVopXyloJFAhcFMhWSF4I1MjViNjI3ojeyN8I30kUCRRJFIkUyR8JVElVCVmJW0lcCVxJXQldyZQJlcmWyZrJ1cnWCdZJ1onWydgJ2MnZCdlJ2YnZydoJ2snbidwJ3InfChPKFooWyhdKF4oXyhhKGQoZShnKGooayhwKHsofCh9KU8pUClSKVUpVilXKVopXyloJG9aT1BWZWZxdCFmIWohayFsIXAhciFzIXQhdSF6I24jcCN0I3gkVCRjJGwkcCRxJHQlUyVfJWsldiZZJlonTydQJ1EnUidTJ1QnVSdWJ14nXydhJ2InaSdqJ20ndCd2J3gneihRKFIoUyhUKFUoVihXKFgoWShgKGIoYyhoKGkobChtKHModCh1KHYodyh4KHkoeilRKVMpVClYKVkpWyljKWlRIXtaUiF9YFIkWyF6USNXZlIkXSF6JG9jT1BWZWZxdCFmIWohayFsIXAhciFzIXQhdSF6I24jcCN0I3gkVCRjJGwkcCRxJHQlUyVfJWsldiZZJlonTydQJ1EnUidTJ1QnVSdWJ14nXydhJ2InaSdqJ20ndCd2J3gneihRKFIoUyhUKFUoVihXKFgoWShgKGIoYyhoKGkobChtKHModCh1KHYodyh4KHkoeilRKVMpVClYKVkpWyljKWkkaGNPUFZxdCFmIWohayFsIXAhciFzIXQhdSF6I24jcCN0I3gkYyRsJHAkcSR0JVMlXyVrJXYmWSZaJ08nUCdRJ1InUydUJ1UnVideJ18nYSdiJ2knaidtJ3Qndid4J3ooUShSKFMoVChVKFYoVyhYKFkoYChiKGMoaChpKGwobShzKHQodSh2KHcoeCh5KHopUSlTKVQpWClZKVspYylpVSNRZGckYVYjVWVmJFRXI1JkZWYkVFEjWGdSJWUkYXBrT1ZxIWYhaiFrIWwhciFzIXUjeCR0JVMlayZZJlohaihQUGVmdCFwIXQheiNuI3AjdCRUJGMkbCRxJV8ldidPJ1AnUSdSJ1MnVCdVJ1YnXydhJ2InaSdqJ20neCd6KFEobCljKWlwKWUnXid2KHModCh1KHYodyh4KHkoeilRKVMpVClYKVkpW3EpayRwJ3QoUihTKFQoVShWKFcoWChZKGAoYihjKGgoaShtWCRoI1oneylkKWokb21PUFZlZnF0IWYhaiFrIWwhcCFyIXMhdCF1IXojbiNwI3QjeCRUJGMkbCRwJHEkdCVTJV8layV2JlkmWidPJ1AnUSdSJ1MnVCdVJ1YnXidfJ2EnYidpJ2onbSd0J3YneCd6KFEoUihTKFQoVShWKFcoWChZKGAoYihjKGgoaShsKG0ocyh0KHUodih3KHgoeSh6KVEpUylUKVgpWSlbKWMpaVIjYW0iLAogICAgbm9kZU5hbWVzOiAi4pqgIExpbmVDb21tZW50IEJsb2NrQ29tbWVudCBFeHByZXNzaW9ucyBGb3JFeHByZXNzaW9uIGZvciBJbkV4cHJlc3Npb25zIEluRXhwcmVzc2lvbiBOYW1lIElkZW50aWZpZXIgSWRlbnRpZmllciBBcml0aE9wIEFyaXRoT3AgQXJpdGhPcCBBcml0aE9wIGluIEl0ZXJhdGlvbkNvbnRleHQgcmV0dXJuIElmRXhwcmVzc2lvbiBpZiB0aGVuIGVsc2UgUXVhbnRpZmllZEV4cHJlc3Npb24gc29tZSBldmVyeSBJbkV4cHJlc3Npb25zIEluRXhwcmVzc2lvbiBzYXRpc2ZpZXMgRGlzanVuY3Rpb24gb3IgQ29uanVuY3Rpb24gYW5kIENvbXBhcmlzb24gQ29tcGFyZU9wIENvbXBhcmVPcCBiZXR3ZWVuIFBvc2l0aXZlVW5hcnlUZXN0ICggUG9zaXRpdmVVbmFyeVRlc3RzICkgQXJpdGhtZXRpY0V4cHJlc3Npb24gQXJpdGhPcCBJbnN0YW5jZU9mRXhwcmVzc2lvbiBpbnN0YW5jZSBvZiBUeXBlIFF1YWxpZmllZE5hbWUgVmFyaWFibGVOYW1lIFNwZWNpYWxUeXBlIGRheXMgdGltZSBkdXJhdGlvbiB5ZWFycyBtb250aHMgZGF0ZSA+IExpc3RUeXBlIGxpc3QgPCBDb250ZXh0VHlwZSBjb250ZXh0IENvbnRleHRFbnRyeVR5cGVzIENvbnRleHRFbnRyeVR5cGUgRnVuY3Rpb25UeXBlIGZ1bmN0aW9uIEFyZ3VtZW50VHlwZXMgQXJndW1lbnRUeXBlIFBhdGhFeHByZXNzaW9uIF0gRmlsdGVyRXhwcmVzc2lvbiBbIEZ1bmN0aW9uSW52b2NhdGlvbiBTcGVjaWFsRnVuY3Rpb25OYW1lIHN0cmluZyBsZW5ndGggdXBwZXIgY2FzZSBsb3dlciBzdWJzdHJpbmcgYmVmb3JlIGFmdGVyIHN0YXJ0cyB3aXRoIGVuZHMgY29udGFpbnMgaW5zZXJ0IGluZGV4IGRpc3RpbmN0IHZhbHVlcyBtZXQgYnkgb3ZlcmxhcHMgZmluaXNoZWQgc3RhcnRlZCBkYXkgeWVhciB3ZWVrIG1vbnRoIGdldCB2YWx1ZSBlbnRyaWVzIE5hbWVkUGFyYW1ldGVycyBOYW1lZFBhcmFtZXRlciBQYXJhbWV0ZXJOYW1lIFBvc2l0aW9uYWxQYXJhbWV0ZXJzIG51bGwgTnVtZXJpY0xpdGVyYWwgU3RyaW5nTGl0ZXJhbCBCb29sZWFuTGl0ZXJhbCBEYXRlVGltZUxpdGVyYWwgRGF0ZVRpbWVDb25zdHJ1Y3RvciBBdExpdGVyYWwgPyBTaW1wbGVQb3NpdGl2ZVVuYXJ5VGVzdCBJbnRlcnZhbCBQYXJlbnRoZXNpemVkRXhwcmVzc2lvbiBMaXN0IEZ1bmN0aW9uRGVmaW5pdGlvbiBGb3JtYWxQYXJhbWV0ZXJzIEZvcm1hbFBhcmFtZXRlciBleHRlcm5hbCBGdW5jdGlvbkJvZHkgfSB7IENvbnRleHQgQ29udGV4dEVudHJ5IEtleSBOYW1lIElkZW50aWZpZXIgVW5hcnlUZXN0cyBXaWxkY2FyZCBub3QiLAogICAgbWF4VGVybTogMTk4LAogICAgY29udGV4dDogdmFyaWFibGVUcmFja2VyLAogICAgbm9kZVByb3BzOiBbCiAgICAgIFsiZ3JvdXAiLCAtMTcsNCwxOCwyMiwyOCwzMCwzMiw0MCw0Miw2Nyw2OSw3MSwxMTIsMTEzLDExNSwxMTYsMTE3LDEyNCwiRXhwcmVzc2lvbiIsNDcsIkV4cHJlc3Npb24gRXhwcmVzc2lvbiIsLTUsMTA1LDEwNiwxMDcsMTA4LDEwOSwiRXhwcmVzc2lvbiBMaXRlcmFsIl0sCiAgICAgIFsiY2xvc2VkQnkiLCAzNywiKSIsNzAsIl0iLDEyMywifSJdLAogICAgICBbIm9wZW5lZEJ5IiwgMzksIigiLDY4LCJbIiwxMjIsInsiXQogICAgXSwKICAgIHByb3BTb3VyY2VzOiBbZmVlbEhpZ2hsaWdodGluZ10sCiAgICBza2lwcGVkTm9kZXM6IFswLDEsMl0sCiAgICByZXBlYXROb2RlQ291bnQ6IDE0LAogICAgdG9rZW5EYXRhOiAiKXh+UnVYWSNmWVokWlpbI2ZdXiRacHEjZnFyJGBycyRrd3glX3h5JWR5eiVpenslbnt8JXt8fSZRfSFPJlYhTyFQJmQhUCFRJnwhUSFbKFghWyFdKGohXSFeKG8hXiFfKHQhXyFgJGYhYCFhKVQhYiFjKV8hfSNPKWQjUCNRKWkjUSNSJXYjbyNwKW4jcSNyKXMkZiRnI2YjQlkjQlojZiRJUyRJXyNmJEl8JEl9JFokSX0kSk8kWiRKVCRKVSNmJEtWJEtXI2YmRlUmRlYjZj9IVD9IVSNmfiNrWSReflhZI2ZaWyNmcHEjZiRmJGcjZiNCWSNCWiNmJElTJElfI2YkSlQkSlUjZiRLViRLVyNmJkZVJkZWI2Y/SFQ/SFUjZn4kYE8kX35+JGNQIV8hYCRmfiRrT3F+fiRwVSVUfk9ZJGtaciRrcnMlU3MjTyRrI08jUCVYI1B+JGt+JVhPJVR+fiVbUE9+JGt+JWRPJGd+fiVpT3V+fiVuT3d+fiVzUF5+ensldn4le095fn4mUU9bfn4mVk8kan5SJltQWlAhYCFhJl9RJmRPJHhRfiZpUSRmfiFPIVAmbyFRIVsmdH4mdE8kaX5+JnlQJVN+IVEhWyZ0fidSUV1+ensnWCFQIVEnfH4nW1JPeidYensnZXt+J1h+J2hUT3onWHp7J2V7IVAnWCFQIVEndyFRfidYfid8T1F+fihSUVB+T1knfFp+J3x+KF5RJVN+IU8hUChkIVEhWyhYfihnUCFRIVsmdH4ob08kdn5+KHRPJV5+Uih7UCFbUXJQIV8hYClPUClUT3JQUilbUCFYUXJQIV8hYClPfilkTyVWfn4paU8haH5+KW5PIWZ+filzTyNvfn4peE8jbn4iLAogICAgdG9rZW5pemVyczogW3Byb3BlcnR5SWRlbnRpZmllcnMsIGlkZW50aWZpZXJzLCBpbnNlcnRTZW1pY29sb24sIDAsIDFdLAogICAgdG9wUnVsZXM6IHsiRXhwcmVzc2lvbnMiOlswLDNdLCJVbmFyeVRlc3RzIjpbMSwxMjldfSwKICAgIGR5bmFtaWNQcmVjZWRlbmNlczogeyIzMCI6LTEsIjcxIjotMSwiMTAxIjotMSwiMTU0IjotMX0sCiAgICBzcGVjaWFsaXplZDogW3t0ZXJtOiAxNDgsIGdldDogdmFsdWUgPT4gc3BlY19pZGVudGlmaWVyW3ZhbHVlXSB8fCAtMX1dLAogICAgdG9rZW5QcmVjOiAwCiAgfSk7CgogIGZ1bmN0aW9uIHBhcnNlUGFyYW1ldGVyTmFtZXMoZm4pIHsKICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZm4uJGFyZ3MpKSB7CiAgICAgICAgICByZXR1cm4gZm4uJGFyZ3M7CiAgICAgIH0KICAgICAgY29uc3QgY29kZSA9IGZuLnRvU3RyaW5nKCk7CiAgICAgIGNvbnN0IG1hdGNoID0gL14oPzpbXihdKlxzKik/XCgoW14pXSspP1wpLy5leGVjKGNvZGUpOwogICAgICBpZiAoIW1hdGNoKSB7CiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ZhaWxlZCB0byBwYXJzZSBwYXJhbXM6ICcgKyBjb2RlKTsKICAgICAgfQogICAgICBjb25zdCBbXywgcGFyYW1zXSA9IG1hdGNoOwogICAgICBpZiAoIXBhcmFtcykgewogICAgICAgICAgcmV0dXJuIFtdOwogICAgICB9CiAgICAgIHJldHVybiBwYXJhbXMuc3BsaXQoJywnKS5tYXAocCA9PiBwLnRyaW0oKSk7CiAgfQogIGZ1bmN0aW9uIG5vdEltcGxlbWVudGVkKHRoaW5nKSB7CiAgICAgIHJldHVybiBuZXcgRXJyb3IoYG5vdCBpbXBsZW1lbnRlZDogJHt0aGluZ31gKTsKICB9CiAgLyoqCiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUKICAgKiBAcGFyYW0ge1JlY29yZDxzdHJpbmcsIGFueT59IGNvbnRleHQKICAgKgogICAqIEByZXR1cm4ge2FueX0KICAgKi8KICBmdW5jdGlvbiBnZXRGcm9tQ29udGV4dChuYW1lLCBjb250ZXh0KSB7CiAgICAgIGlmIChbJ25pbCcsICdib29sZWFuJywgJ251bWJlcicsICdzdHJpbmcnXS5pbmNsdWRlcyhnZXRUeXBlKGNvbnRleHQpKSkgewogICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KICAgICAgaWYgKG5hbWUgaW4gY29udGV4dCkgewogICAgICAgICAgcmV0dXJuIGNvbnRleHRbbmFtZV07CiAgICAgIH0KICAgICAgY29uc3Qgbm9ybWFsaXplZE5hbWUgPSBub3JtYWxpemVDb250ZXh0S2V5KG5hbWUpOwogICAgICBpZiAobm9ybWFsaXplZE5hbWUgaW4gY29udGV4dCkgewogICAgICAgICAgcmV0dXJuIGNvbnRleHRbbm9ybWFsaXplZE5hbWVdOwogICAgICB9CiAgICAgIGNvbnN0IGVudHJ5ID0gT2JqZWN0LmVudHJpZXMoY29udGV4dCkuZmluZCgoW2tleV0pID0+IG5vcm1hbGl6ZWROYW1lID09PSBub3JtYWxpemVDb250ZXh0S2V5KGtleSkpOwogICAgICBpZiAoZW50cnkpIHsKICAgICAgICAgIHJldHVybiBlbnRyeVsxXTsKICAgICAgfQogICAgICByZXR1cm4gbnVsbDsKICB9CgogIGZ1bmN0aW9uIGlzRGF0ZVRpbWUob2JqKSB7CiAgICAgIHJldHVybiBEYXRlVGltZS5pc0RhdGVUaW1lKG9iaik7CiAgfQogIGZ1bmN0aW9uIGlzRHVyYXRpb24ob2JqKSB7CiAgICAgIHJldHVybiBEdXJhdGlvbi5pc0R1cmF0aW9uKG9iaik7CiAgfQogIGZ1bmN0aW9uIGR1cmF0aW9uJDEob3B0cykgewogICAgICBpZiAodHlwZW9mIG9wdHMgPT09ICdudW1iZXInKSB7CiAgICAgICAgICByZXR1cm4gRHVyYXRpb24uZnJvbU1pbGxpcyhvcHRzKTsKICAgICAgfQogICAgICByZXR1cm4gRHVyYXRpb24uZnJvbUlTTyhvcHRzKTsKICB9CiAgZnVuY3Rpb24gZGF0ZShzdHIgPSBudWxsLCB0aW1lID0gbnVsbCwgem9uZSA9IG51bGwpIHsKICAgICAgaWYgKHRpbWUpIHsKICAgICAgICAgIGlmIChzdHIpIHsKICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJzxzdHI+IGFuZCA8dGltZT4gcHJvdmlkZWQnKTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBkYXRlKGAxOTAwLTAxLTAxVCR7dGltZX1gKTsKICAgICAgfQogICAgICBpZiAodHlwZW9mIHN0ciA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgIGlmIChzdHIuc3RhcnRzV2l0aCgnLScpKSB7CiAgICAgICAgICAgICAgdGhyb3cgbm90SW1wbGVtZW50ZWQoJ25lZ2F0aXZlIGRhdGUnKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmICghc3RyLmluY2x1ZGVzKCdUJykpIHsKICAgICAgICAgICAgICAvLyByYXcgZGF0ZXMgYXJlIGluIFVUQyB0aW1lIHpvbmUKICAgICAgICAgICAgICByZXR1cm4gZGF0ZShzdHIgKyAnVDAwOjAwOjAwLjAwMFonKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChzdHIuaW5jbHVkZXMoJ0AnKSkgewogICAgICAgICAgICAgIGlmICh6b25lKSB7CiAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignPHpvbmU+IGFscmVhZHkgcHJvdmlkZWQnKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgY29uc3QgW2RhdGVQYXJ0LCB6b25lUGFydF0gPSBzdHIuc3BsaXQoJ0AnKTsKICAgICAgICAgICAgICByZXR1cm4gZGF0ZShkYXRlUGFydCwgbnVsbCwgSW5mby5ub3JtYWxpemVab25lKHpvbmVQYXJ0KSk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gRGF0ZVRpbWUuZnJvbUlTTyhzdHIudG9VcHBlckNhc2UoKSwgewogICAgICAgICAgICAgIHNldFpvbmU6IHRydWUsCiAgICAgICAgICAgICAgem9uZQogICAgICAgICAgfSk7CiAgICAgIH0KICAgICAgcmV0dXJuIERhdGVUaW1lLm5vdygpOwogIH0KCiAgZnVuY3Rpb24gaXNDb250ZXh0KGUpIHsKICAgICAgcmV0dXJuIE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSA9PT0gT2JqZWN0LnByb3RvdHlwZTsKICB9CiAgZnVuY3Rpb24gaXNBcnJheSQxKGUpIHsKICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoZSk7CiAgfQogIGZ1bmN0aW9uIGlzQm9vbGVhbihlKSB7CiAgICAgIHJldHVybiB0eXBlb2YgZSA9PT0gJ2Jvb2xlYW4nOwogIH0KICBmdW5jdGlvbiBnZXRUeXBlKGUpIHsKICAgICAgaWYgKGUgPT09IG51bGwgfHwgZSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICByZXR1cm4gJ25pbCc7CiAgICAgIH0KICAgICAgaWYgKGlzQm9vbGVhbihlKSkgewogICAgICAgICAgcmV0dXJuICdib29sZWFuJzsKICAgICAgfQogICAgICBpZiAoaXNOdW1iZXIoZSkpIHsKICAgICAgICAgIHJldHVybiAnbnVtYmVyJzsKICAgICAgfQogICAgICBpZiAoaXNTdHJpbmcoZSkpIHsKICAgICAgICAgIHJldHVybiAnc3RyaW5nJzsKICAgICAgfQogICAgICBpZiAoaXNDb250ZXh0KGUpKSB7CiAgICAgICAgICByZXR1cm4gJ2NvbnRleHQnOwogICAgICB9CiAgICAgIGlmIChpc0FycmF5JDEoZSkpIHsKICAgICAgICAgIHJldHVybiAnbGlzdCc7CiAgICAgIH0KICAgICAgaWYgKGlzRHVyYXRpb24oZSkpIHsKICAgICAgICAgIHJldHVybiAnZHVyYXRpb24nOwogICAgICB9CiAgICAgIGlmIChpc0RhdGVUaW1lKGUpKSB7CiAgICAgICAgICBpZiAoZS55ZWFyID09PSAxOTAwICYmCiAgICAgICAgICAgICAgZS5tb250aCA9PT0gMSAmJgogICAgICAgICAgICAgIGUuZGF5ID09PSAxKSB7CiAgICAgICAgICAgICAgcmV0dXJuICd0aW1lJzsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChlLmhvdXIgPT09IDAgJiYKICAgICAgICAgICAgICBlLm1pbnV0ZSA9PT0gMCAmJgogICAgICAgICAgICAgIGUuc2Vjb25kID09PSAwICYmCiAgICAgICAgICAgICAgZS5taWxsaXNlY29uZCA9PT0gMCAmJgogICAgICAgICAgICAgIGUuem9uZSA9PT0gRml4ZWRPZmZzZXRab25lLnV0Y0luc3RhbmNlKSB7CiAgICAgICAgICAgICAgcmV0dXJuICdkYXRlJzsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiAnZGF0ZSB0aW1lJzsKICAgICAgfQogICAgICBpZiAoZSBpbnN0YW5jZW9mIFJhbmdlKSB7CiAgICAgICAgICByZXR1cm4gJ3JhbmdlJzsKICAgICAgfQogICAgICBpZiAoZSBpbnN0YW5jZW9mIEZ1bmN0aW9uV3JhcHBlcikgewogICAgICAgICAgcmV0dXJuICdmdW5jdGlvbic7CiAgICAgIH0KICAgICAgcmV0dXJuICdsaXRlcmFsJzsKICB9CiAgZnVuY3Rpb24gaXNUeXBlKGVsLCB0eXBlKSB7CiAgICAgIHJldHVybiBnZXRUeXBlKGVsKSA9PT0gdHlwZTsKICB9CiAgZnVuY3Rpb24gdHlwZUNhc3Qob2JqLCB0eXBlKSB7CiAgICAgIGlmIChpc0RhdGVUaW1lKG9iaikpIHsKICAgICAgICAgIGlmICh0eXBlID09PSAndGltZScpIHsKICAgICAgICAgICAgICByZXR1cm4gb2JqLnNldCh7CiAgICAgICAgICAgICAgICAgIHllYXI6IDE5MDAsCiAgICAgICAgICAgICAgICAgIG1vbnRoOiAxLAogICAgICAgICAgICAgICAgICBkYXk6IDEKICAgICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIGlmICh0eXBlID09PSAnZGF0ZScpIHsKICAgICAgICAgICAgICByZXR1cm4gb2JqLnNldFpvbmUoJ3V0YycsIHsga2VlcExvY2FsVGltZTogdHJ1ZSB9KS5zdGFydE9mKCdkYXknKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmICh0eXBlID09PSAnZGF0ZSB0aW1lJykgewogICAgICAgICAgICAgIHJldHVybiBvYmo7CiAgICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIG51bGw7CiAgfQogIGNsYXNzIFJhbmdlIHsKICAgICAgY29uc3RydWN0b3IocHJvcHMpIHsKICAgICAgICAgIE9iamVjdC5hc3NpZ24odGhpcywgcHJvcHMpOwogICAgICB9CiAgfQogIGZ1bmN0aW9uIGlzTnVtYmVyKG9iaikgewogICAgICByZXR1cm4gdHlwZW9mIG9iaiA9PT0gJ251bWJlcic7CiAgfQogIGZ1bmN0aW9uIGlzU3RyaW5nKG9iaikgewogICAgICByZXR1cm4gdHlwZW9mIG9iaiA9PT0gJ3N0cmluZyc7CiAgfQogIGZ1bmN0aW9uIGVxdWFscyhhLCBiKSB7CiAgICAgIGlmIChhID09PSBudWxsICYmIGIgIT09IG51bGwgfHwKICAgICAgICAgIGEgIT09IG51bGwgJiYgYiA9PT0gbnVsbCkgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIGlmIChpc0FycmF5JDEoYSkgJiYgYS5sZW5ndGggPCAyKSB7CiAgICAgICAgICBhID0gYVswXTsKICAgICAgfQogICAgICBpZiAoaXNBcnJheSQxKGIpICYmIGIubGVuZ3RoIDwgMikgewogICAgICAgICAgYiA9IGJbMF07CiAgICAgIH0KICAgICAgY29uc3QgYVR5cGUgPSBnZXRUeXBlKGEpOwogICAgICBjb25zdCBiVHlwZSA9IGdldFR5cGUoYik7CiAgICAgIGlmIChhVHlwZSAhPT0gYlR5cGUpIHsKICAgICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICAgIGlmIChhVHlwZSA9PT0gJ25pbCcpIHsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICAgIGlmIChhVHlwZSA9PT0gJ2xpc3QnKSB7CiAgICAgICAgICBpZiAoYS5sZW5ndGggIT09IGIubGVuZ3RoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGEuZXZlcnkoKGVsZW1lbnQsIGlkeCkgPT4gZXF1YWxzKGVsZW1lbnQsIGJbaWR4XSkpOwogICAgICB9CiAgICAgIGlmIChhVHlwZSA9PT0gJ2RhdGUgdGltZScgfHwgYVR5cGUgPT09ICd0aW1lJyB8fCBhVHlwZSA9PT0gJ2RhdGUnKSB7CiAgICAgICAgICByZXR1cm4gKGEudG9VVEMoKS52YWx1ZU9mKCkgPT09IGIudG9VVEMoKS52YWx1ZU9mKCkpOwogICAgICB9CiAgICAgIGlmIChhVHlwZSA9PT0gJ2R1cmF0aW9uJykgewogICAgICAgICAgLy8geWVhcnMgYW5kIG1vbnRocyBkdXJhdGlvbiAtPiBtb250aHMKICAgICAgICAgIGlmIChNYXRoLmFicyhhLmFzKCdkYXlzJykpID4gMTgwKSB7CiAgICAgICAgICAgICAgcmV0dXJuIE1hdGgudHJ1bmMoYS5taW51cyhiKS5hcygnbW9udGhzJykpID09PSAwOwogICAgICAgICAgfQogICAgICAgICAgLy8gZGF5cyBhbmQgdGltZSBkdXJhdGlvbiAtPiBzZWNvbmRzCiAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICByZXR1cm4gTWF0aC50cnVuYyhhLm1pbnVzKGIpLmFzKCdzZWNvbmRzJykpID09PSAwOwogICAgICAgICAgfQogICAgICB9CiAgICAgIGlmIChhVHlwZSA9PT0gJ2NvbnRleHQnKSB7CiAgICAgICAgICBjb25zdCBhRW50cmllcyA9IE9iamVjdC5lbnRyaWVzKGEpOwogICAgICAgICAgY29uc3QgYkVudHJpZXMgPSBPYmplY3QuZW50cmllcyhiKTsKICAgICAgICAgIGlmIChhRW50cmllcy5sZW5ndGggIT09IGJFbnRyaWVzLmxlbmd0aCkgewogICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBhRW50cmllcy5ldmVyeSgoW2tleSwgdmFsdWVdKSA9PiBrZXkgaW4gYiAmJiBlcXVhbHModmFsdWUsIGJba2V5XSkpOwogICAgICB9CiAgICAgIGlmIChhVHlwZSA9PT0gJ3JhbmdlJykgewogICAgICAgICAgcmV0dXJuIFsKICAgICAgICAgICAgICBbYS5zdGFydCwgYi5zdGFydF0sCiAgICAgICAgICAgICAgW2EuZW5kLCBiLmVuZF0sCiAgICAgICAgICAgICAgW2FbJ3N0YXJ0IGluY2x1ZGVkJ10sIGJbJ3N0YXJ0IGluY2x1ZGVkJ11dLAogICAgICAgICAgICAgIFthWydlbmQgaW5jbHVkZWQnXSwgYlsnZW5kIGluY2x1ZGVkJ11dCiAgICAgICAgICBdLmV2ZXJ5KChbYSwgYl0pID0+IGEgPT09IGIpOwogICAgICB9CiAgICAgIGlmIChhID09IGIpIHsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICAgIHJldHVybiBhVHlwZSA9PT0gYlR5cGUgPyBmYWxzZSA6IG51bGw7CiAgfQogIGNsYXNzIEZ1bmN0aW9uV3JhcHBlciB7CiAgICAgIGNvbnN0cnVjdG9yKGZuLCBwYXJhbWV0ZXJOYW1lcykgewogICAgICAgICAgdGhpcy5mbiA9IGZuOwogICAgICAgICAgdGhpcy5wYXJhbWV0ZXJOYW1lcyA9IHBhcmFtZXRlck5hbWVzOwogICAgICB9CiAgICAgIGludm9rZShjb250ZXh0T3JBcmdzKSB7CiAgICAgICAgICBsZXQgcGFyYW1zOwogICAgICAgICAgaWYgKGlzQXJyYXkkMShjb250ZXh0T3JBcmdzKSkgewogICAgICAgICAgICAgIHBhcmFtcyA9IGNvbnRleHRPckFyZ3M7CiAgICAgICAgICB9CiAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICBwYXJhbXMgPSB0aGlzLnBhcmFtZXRlck5hbWVzLm1hcChuID0+IGNvbnRleHRPckFyZ3Nbbl0pOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHRoaXMuZm4uY2FsbChudWxsLCAuLi5wYXJhbXMpOwogICAgICB9CiAgfQoKICAvLyAxMC4zLjQgQnVpbHQtaW4gZnVuY3Rpb25zCiAgY29uc3QgYnVpbHRpbnMgPSB7CiAgICAgIC8vIDEwLjMuNC4xIENvbnZlcnNpb24gZnVuY3Rpb25zCiAgICAgICdudW1iZXInOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICB0aHJvdyBub3RJbXBsZW1lbnRlZCgnbnVtYmVyJyk7CiAgICAgIH0sCiAgICAgICdzdHJpbmcnOiBmbihmdW5jdGlvbiAoZnJvbSkgewogICAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggIT09IDEpIHsKICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiB0b1N0cmluZyhmcm9tKTsKICAgICAgfSwgWydhbnknXSksCiAgICAgIC8vIGRhdGUoZnJvbSkgPT4gZGF0ZSBzdHJpbmcKICAgICAgLy8gZGF0ZShmcm9tKSA9PiBkYXRlIGFuZCB0aW1lCiAgICAgIC8vIGRhdGUoeWVhciwgbW9udGgsIGRheSkKICAgICAgJ2RhdGUnOiBmbihmdW5jdGlvbiAoeWVhciwgbW9udGgsIGRheSwgZnJvbSkgewogICAgICAgICAgaWYgKCFmcm9tICYmICFpc051bWJlcih5ZWFyKSkgewogICAgICAgICAgICAgIGZyb20gPSB5ZWFyOwogICAgICAgICAgICAgIHllYXIgPSBudWxsOwogICAgICAgICAgfQogICAgICAgICAgbGV0IGQ7CiAgICAgICAgICBpZiAoaXNTdHJpbmcoZnJvbSkpIHsKICAgICAgICAgICAgICBkID0gZGF0ZShmcm9tKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChpc0RhdGVUaW1lKGZyb20pKSB7CiAgICAgICAgICAgICAgZCA9IGZyb207CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoeWVhcikgewogICAgICAgICAgICAgIGQgPSBkYXRlKCkuc2V0Wm9uZSgndXRjJykuc2V0KHsKICAgICAgICAgICAgICAgICAgeWVhciwKICAgICAgICAgICAgICAgICAgbW9udGgsCiAgICAgICAgICAgICAgICAgIGRheQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGQgJiYgaWZWYWxpZChkLnNldFpvbmUoJ3V0YycpLnN0YXJ0T2YoJ2RheScpKSB8fCBudWxsOwogICAgICB9LCBbJ2FueT8nLCAnbnVtYmVyPycsICdudW1iZXI/JywgJ2FueT8nXSksCiAgICAgIC8vIGRhdGUgYW5kIHRpbWUoZnJvbSkgPT4gZGF0ZSB0aW1lIHN0cmluZwogICAgICAvLyBkYXRlIGFuZCB0aW1lKGRhdGUsIHRpbWUpCiAgICAgICdkYXRlIGFuZCB0aW1lJzogZm4oZnVuY3Rpb24gKGQsIHRpbWUsIGZyb20pIHsKICAgICAgICAgIGxldCBkdDsKICAgICAgICAgIGlmIChpc0RhdGVUaW1lKGQpICYmIGlzRGF0ZVRpbWUodGltZSkpIHsKICAgICAgICAgICAgICBkdCA9IHRpbWUuc2V0KHsKICAgICAgICAgICAgICAgICAgeWVhcjogZC55ZWFyLAogICAgICAgICAgICAgICAgICBtb250aDogZC5tb250aCwKICAgICAgICAgICAgICAgICAgZGF5OiBkLmRheQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGlzU3RyaW5nKGQpKSB7CiAgICAgICAgICAgICAgZnJvbSA9IGQ7CiAgICAgICAgICAgICAgZCA9IG51bGw7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoaXNTdHJpbmcoZnJvbSkpIHsKICAgICAgICAgICAgICBkdCA9IGRhdGUoZnJvbSk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gZHQgJiYgaWZWYWxpZChkdCkgfHwgbnVsbDsKICAgICAgfSwgWydhbnk/JywgJ3RpbWU/JywgJ3N0cmluZz8nXSwgWydkYXRlJywgJ3RpbWUnLCAnZnJvbSddKSwKICAgICAgLy8gdGltZShmcm9tKSA9PiB0aW1lIHN0cmluZwogICAgICAvLyB0aW1lKGZyb20pID0+IHRpbWUsIGRhdGUgYW5kIHRpbWUKICAgICAgLy8gdGltZShob3VyLCBtaW51dGUsIHNlY29uZCwgb2Zmc2V0PykgPT4gLi4uCiAgICAgICd0aW1lJzogZm4oZnVuY3Rpb24gKGhvdXIsIG1pbnV0ZSwgc2Vjb25kLCBvZmZzZXQsIGZyb20pIHsKICAgICAgICAgIGxldCB0OwogICAgICAgICAgaWYgKG9mZnNldCkgewogICAgICAgICAgICAgIHRocm93IG5vdEltcGxlbWVudGVkKCd0aW1lKC4uLiwgb2Zmc2V0KScpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGlzU3RyaW5nKGhvdXIpIHx8IGlzRGF0ZVRpbWUoaG91cikpIHsKICAgICAgICAgICAgICBmcm9tID0gaG91cjsKICAgICAgICAgICAgICBob3VyID0gbnVsbDsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChpc1N0cmluZyhmcm9tKSkgewogICAgICAgICAgICAgIHQgPSBkYXRlKG51bGwsIGZyb20pOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGlzRGF0ZVRpbWUoZnJvbSkpIHsKICAgICAgICAgICAgICB0ID0gZnJvbS5zZXQoewogICAgICAgICAgICAgICAgICB5ZWFyOiAxOTAwLAogICAgICAgICAgICAgICAgICBtb250aDogMSwKICAgICAgICAgICAgICAgICAgZGF5OiAxCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoaXNOdW1iZXIoaG91cikpIHsKICAgICAgICAgICAgICAvLyBUT0RPOiBzdXBwb3J0IG9mZnNldCA9IGRheXMgYW5kIHRpbWUgZHVyYXRpb24KICAgICAgICAgICAgICB0ID0gZGF0ZSgpLnNldCh7CiAgICAgICAgICAgICAgICAgIGhvdXIsCiAgICAgICAgICAgICAgICAgIG1pbnV0ZSwKICAgICAgICAgICAgICAgICAgc2Vjb25kCiAgICAgICAgICAgICAgfSkuc2V0KHsKICAgICAgICAgICAgICAgICAgeWVhcjogMTkwMCwKICAgICAgICAgICAgICAgICAgbW9udGg6IDEsCiAgICAgICAgICAgICAgICAgIGRheTogMSwKICAgICAgICAgICAgICAgICAgbWlsbGlzZWNvbmQ6IDAKICAgICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiB0ICYmIGlmVmFsaWQodCkgfHwgbnVsbDsKICAgICAgfSwgWydhbnk/JywgJ251bWJlcj8nLCAnbnVtYmVyPycsICdhbnk/JywgJ2FueT8nXSksCiAgICAgICdkdXJhdGlvbic6IGZuKGZ1bmN0aW9uIChmcm9tKSB7CiAgICAgICAgICByZXR1cm4gaWZWYWxpZChkdXJhdGlvbiQxKGZyb20pKTsKICAgICAgfSwgWydzdHJpbmcnXSksCiAgICAgICd5ZWFycyBhbmQgbW9udGhzIGR1cmF0aW9uJzogZm4oZnVuY3Rpb24gKGZyb20sIHRvKSB7CiAgICAgICAgICByZXR1cm4gaWZWYWxpZCh0by5kaWZmKGZyb20sIFsneWVhcnMnLCAnbW9udGhzJ10pKTsKICAgICAgfSwgWydkYXRlJywgJ2RhdGUnXSksCiAgICAgICdAJzogZm4oZnVuY3Rpb24gKHN0cmluZykgewogICAgICAgICAgbGV0IHQ7CiAgICAgICAgICBpZiAoL14tP1AvLnRlc3Qoc3RyaW5nKSkgewogICAgICAgICAgICAgIHQgPSBkdXJhdGlvbiQxKHN0cmluZyk7CiAgICAgICAgICB9CiAgICAgICAgICBlbHNlIGlmICgvXltcZF17MSwyfTpbXGRdezEsMn06W1xkXXsxLDJ9Ly50ZXN0KHN0cmluZykpIHsKICAgICAgICAgICAgICB0ID0gZGF0ZShudWxsLCBzdHJpbmcpOwogICAgICAgICAgfQogICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgdCA9IGRhdGUoc3RyaW5nKTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiB0ICYmIGlmVmFsaWQodCkgfHwgbnVsbDsKICAgICAgfSwgWydzdHJpbmcnXSksCiAgICAgICdub3cnOiBmbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gZGF0ZSgpOwogICAgICB9LCBbXSksCiAgICAgICd0b2RheSc6IGZuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBkYXRlKCkuc3RhcnRPZignZGF5Jyk7CiAgICAgIH0sIFtdKSwKICAgICAgLy8gMTAuMy40LjIgQm9vbGVhbiBmdW5jdGlvbgogICAgICAnbm90JzogZm4oZnVuY3Rpb24gKGJvb2wpIHsKICAgICAgICAgIHJldHVybiBpc1R5cGUoYm9vbCwgJ2Jvb2xlYW4nKSA/ICFib29sIDogbnVsbDsKICAgICAgfSwgWydhbnknXSksCiAgICAgIC8vIDEwLjMuNC4zIFN0cmluZyBmdW5jdGlvbnMKICAgICAgJ3N1YnN0cmluZyc6IGZuKGZ1bmN0aW9uIChzdHJpbmcsIHN0YXJ0LCBsZW5ndGgpIHsKICAgICAgICAgIGNvbnN0IF9zdGFydCA9IChzdGFydCA8IDAgPyBzdHJpbmcubGVuZ3RoICsgc3RhcnQgOiBzdGFydCAtIDEpOwogICAgICAgICAgY29uc3QgYXJyID0gQXJyYXkuZnJvbShzdHJpbmcpOwogICAgICAgICAgcmV0dXJuICh0eXBlb2YgbGVuZ3RoICE9PSAndW5kZWZpbmVkJwogICAgICAgICAgICAgID8gYXJyLnNsaWNlKF9zdGFydCwgX3N0YXJ0ICsgbGVuZ3RoKQogICAgICAgICAgICAgIDogYXJyLnNsaWNlKF9zdGFydCkpLmpvaW4oJycpOwogICAgICB9LCBbJ3N0cmluZycsICdudW1iZXInLCAnbnVtYmVyPyddLCBbJ3N0cmluZycsICdzdGFydCBwb3NpdGlvbicsICdsZW5ndGgnXSksCiAgICAgICdzdHJpbmcgbGVuZ3RoJzogZm4oZnVuY3Rpb24gKHN0cmluZykgewogICAgICAgICAgcmV0dXJuIGNvdW50U3ltYm9scyhzdHJpbmcpOwogICAgICB9LCBbJ3N0cmluZyddKSwKICAgICAgJ3VwcGVyIGNhc2UnOiBmbihmdW5jdGlvbiAoc3RyaW5nKSB7CiAgICAgICAgICByZXR1cm4gc3RyaW5nLnRvVXBwZXJDYXNlKCk7CiAgICAgIH0sIFsnc3RyaW5nJ10pLAogICAgICAnbG93ZXIgY2FzZSc6IGZuKGZ1bmN0aW9uIChzdHJpbmcpIHsKICAgICAgICAgIHJldHVybiBzdHJpbmcudG9Mb3dlckNhc2UoKTsKICAgICAgfSwgWydzdHJpbmcnXSksCiAgICAgICdzdWJzdHJpbmcgYmVmb3JlJzogZm4oZnVuY3Rpb24gKHN0cmluZywgbWF0Y2gpIHsKICAgICAgICAgIGNvbnN0IGluZGV4ID0gc3RyaW5nLmluZGV4T2YobWF0Y2gpOwogICAgICAgICAgaWYgKGluZGV4ID09PSAtMSkgewogICAgICAgICAgICAgIHJldHVybiAnJzsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBzdHJpbmcuc3Vic3RyaW5nKDAsIGluZGV4KTsKICAgICAgfSwgWydzdHJpbmcnLCAnc3RyaW5nJ10pLAogICAgICAnc3Vic3RyaW5nIGFmdGVyJzogZm4oZnVuY3Rpb24gKHN0cmluZywgbWF0Y2gpIHsKICAgICAgICAgIGNvbnN0IGluZGV4ID0gc3RyaW5nLmluZGV4T2YobWF0Y2gpOwogICAgICAgICAgaWYgKGluZGV4ID09PSAtMSkgewogICAgICAgICAgICAgIHJldHVybiAnJzsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBzdHJpbmcuc3Vic3RyaW5nKGluZGV4ICsgbWF0Y2gubGVuZ3RoKTsKICAgICAgfSwgWydzdHJpbmcnLCAnc3RyaW5nJ10pLAogICAgICAncmVwbGFjZSc6IGZuKGZ1bmN0aW9uIChpbnB1dCwgcGF0dGVybiwgcmVwbGFjZW1lbnQsIGZsYWdzKSB7CiAgICAgICAgICByZXR1cm4gaW5wdXQucmVwbGFjZShuZXcgUmVnRXhwKHBhdHRlcm4sICd1ZycgKyAoZmxhZ3MgfHwgJycpLnJlcGxhY2UoL1t4XS9nLCAnJykpLCByZXBsYWNlbWVudC5yZXBsYWNlKC9cJDAvZywgJyQkJicpKTsKICAgICAgfSwgWydzdHJpbmcnLCAnc3RyaW5nJywgJ3N0cmluZycsICdzdHJpbmc/J10pLAogICAgICAnY29udGFpbnMnOiBmbihmdW5jdGlvbiAoc3RyaW5nLCBtYXRjaCkgewogICAgICAgICAgcmV0dXJuIHN0cmluZy5pbmNsdWRlcyhtYXRjaCk7CiAgICAgIH0sIFsnc3RyaW5nJywgJ3N0cmluZyddKSwKICAgICAgJ3N0YXJ0cyB3aXRoJzogZm4oZnVuY3Rpb24gKHN0cmluZywgbWF0Y2gpIHsKICAgICAgICAgIHJldHVybiBzdHJpbmcuc3RhcnRzV2l0aChtYXRjaCk7CiAgICAgIH0sIFsnc3RyaW5nJywgJ3N0cmluZyddKSwKICAgICAgJ2VuZHMgd2l0aCc6IGZuKGZ1bmN0aW9uIChzdHJpbmcsIG1hdGNoKSB7CiAgICAgICAgICByZXR1cm4gc3RyaW5nLmVuZHNXaXRoKG1hdGNoKTsKICAgICAgfSwgWydzdHJpbmcnLCAnc3RyaW5nJ10pLAogICAgICAnc3BsaXQnOiBmbihmdW5jdGlvbiAoc3RyaW5nLCBkZWxpbWl0ZXIpIHsKICAgICAgICAgIHJldHVybiBzdHJpbmcuc3BsaXQobmV3IFJlZ0V4cChkZWxpbWl0ZXIsICd1JykpOwogICAgICB9LCBbJ3N0cmluZycsICdzdHJpbmcnXSksCiAgICAgIC8vIDEwLjMuNC40IExpc3QgZnVuY3Rpb25zCiAgICAgICdsaXN0IGNvbnRhaW5zJzogZm4oZnVuY3Rpb24gKGxpc3QsIGVsZW1lbnQpIHsKICAgICAgICAgIHJldHVybiBsaXN0LnNvbWUoZWwgPT4gbWF0Y2hlcyhlbCwgZWxlbWVudCkpOwogICAgICB9LCBbJ2xpc3QnLCAnYW55PyddKSwKICAgICAgJ2NvdW50JzogZm4oZnVuY3Rpb24gKGxpc3QpIHsKICAgICAgICAgIHJldHVybiBsaXN0Lmxlbmd0aDsKICAgICAgfSwgWydsaXN0J10pLAogICAgICAnbWluJzogbGlzdEZuKGZ1bmN0aW9uIChsaXN0KSB7CiAgICAgICAgICByZXR1cm4gbGlzdC5yZWR1Y2UoKG1pbiwgZWwpID0+IG1pbiA9PT0gbnVsbCA/IGVsIDogTWF0aC5taW4obWluLCBlbCksIG51bGwpOwogICAgICB9LCAnbnVtYmVyJyksCiAgICAgICdtYXgnOiBsaXN0Rm4oZnVuY3Rpb24gKGxpc3QpIHsKICAgICAgICAgIHJldHVybiBsaXN0LnJlZHVjZSgobWF4LCBlbCkgPT4gbWF4ID09PSBudWxsID8gZWwgOiBNYXRoLm1heChtYXgsIGVsKSwgbnVsbCk7CiAgICAgIH0sICdudW1iZXInKSwKICAgICAgJ3N1bSc6IGxpc3RGbihmdW5jdGlvbiAobGlzdCkgewogICAgICAgICAgcmV0dXJuIHN1bShsaXN0KTsKICAgICAgfSwgJ251bWJlcicpLAogICAgICAnbWVhbic6IGxpc3RGbihmdW5jdGlvbiAobGlzdCkgewogICAgICAgICAgY29uc3QgcyA9IHN1bShsaXN0KTsKICAgICAgICAgIHJldHVybiBzID09PSBudWxsID8gcyA6IHMgLyBsaXN0Lmxlbmd0aDsKICAgICAgfSwgJ251bWJlcicpLAogICAgICAnYWxsJzogbGlzdEZuKGZ1bmN0aW9uIChsaXN0KSB7CiAgICAgICAgICBsZXQgbm9uQm9vbCA9IGZhbHNlOwogICAgICAgICAgZm9yIChjb25zdCBvIG9mIGxpc3QpIHsKICAgICAgICAgICAgICBpZiAobyA9PT0gZmFsc2UpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAodHlwZW9mIG8gIT09ICdib29sZWFuJykgewogICAgICAgICAgICAgICAgICBub25Cb29sID0gdHJ1ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gbm9uQm9vbCA/IG51bGwgOiB0cnVlOwogICAgICB9LCAnYW55PycpLAogICAgICAnYW55JzogbGlzdEZuKGZ1bmN0aW9uIChsaXN0KSB7CiAgICAgICAgICBsZXQgbm9uQm9vbCA9IGZhbHNlOwogICAgICAgICAgZm9yIChjb25zdCBvIG9mIGxpc3QpIHsKICAgICAgICAgICAgICBpZiAobyA9PT0gdHJ1ZSkgewogICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvICE9PSAnYm9vbGVhbicpIHsKICAgICAgICAgICAgICAgICAgbm9uQm9vbCA9IHRydWU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIG5vbkJvb2wgPyBudWxsIDogZmFsc2U7CiAgICAgIH0sICdhbnk/JyksCiAgICAgICdzdWJsaXN0JzogZm4oZnVuY3Rpb24gKGxpc3QsIHN0YXJ0LCBsZW5ndGgpIHsKICAgICAgICAgIGNvbnN0IF9zdGFydCA9IChzdGFydCA8IDAgPyBsaXN0Lmxlbmd0aCArIHN0YXJ0IDogc3RhcnQgLSAxKTsKICAgICAgICAgIHJldHVybiAodHlwZW9mIGxlbmd0aCAhPT0gJ3VuZGVmaW5lZCcKICAgICAgICAgICAgICA/IGxpc3Quc2xpY2UoX3N0YXJ0LCBfc3RhcnQgKyBsZW5ndGgpCiAgICAgICAgICAgICAgOiBsaXN0LnNsaWNlKF9zdGFydCkpOwogICAgICB9LCBbJ2xpc3QnLCAnbnVtYmVyJywgJ251bWJlcj8nXSksCiAgICAgICdhcHBlbmQnOiBmbihmdW5jdGlvbiAobGlzdCwgLi4uaXRlbXMpIHsKICAgICAgICAgIHJldHVybiBsaXN0LmNvbmNhdChpdGVtcyk7CiAgICAgIH0sIFsnbGlzdCcsICdhbnk/J10pLAogICAgICAnY29uY2F0ZW5hdGUnOiBmbihmdW5jdGlvbiAoLi4uYXJncykgewogICAgICAgICAgcmV0dXJuIGFyZ3MucmVkdWNlKChyZXN1bHQsIGFyZykgPT4gewogICAgICAgICAgICAgIHJldHVybiByZXN1bHQuY29uY2F0KGFyZyk7CiAgICAgICAgICB9LCBbXSk7CiAgICAgIH0sIFsnYW55J10pLAogICAgICAnaW5zZXJ0IGJlZm9yZSc6IGZuKGZ1bmN0aW9uIChsaXN0LCBwb3NpdGlvbiwgbmV3SXRlbSkgewogICAgICAgICAgcmV0dXJuIGxpc3Quc2xpY2UoMCwgcG9zaXRpb24gLSAxKS5jb25jYXQoW25ld0l0ZW1dLCBsaXN0LnNsaWNlKHBvc2l0aW9uIC0gMSkpOwogICAgICB9LCBbJ2xpc3QnLCAnbnVtYmVyJywgJ2FueT8nXSksCiAgICAgICdyZW1vdmUnOiBmbihmdW5jdGlvbiAobGlzdCwgcG9zaXRpb24pIHsKICAgICAgICAgIHJldHVybiBsaXN0LnNsaWNlKDAsIHBvc2l0aW9uIC0gMSkuY29uY2F0KGxpc3Quc2xpY2UocG9zaXRpb24pKTsKICAgICAgfSwgWydsaXN0JywgJ251bWJlciddKSwKICAgICAgJ3JldmVyc2UnOiBmbihmdW5jdGlvbiAobGlzdCkgewogICAgICAgICAgcmV0dXJuIGxpc3Quc2xpY2UoKS5yZXZlcnNlKCk7CiAgICAgIH0sIFsnbGlzdCddKSwKICAgICAgJ2luZGV4IG9mJzogZm4oZnVuY3Rpb24gKGxpc3QsIG1hdGNoKSB7CiAgICAgICAgICByZXR1cm4gbGlzdC5yZWR1Y2UoZnVuY3Rpb24gKHJlc3VsdCwgZWxlbWVudCwgaW5kZXgpIHsKICAgICAgICAgICAgICBpZiAobWF0Y2hlcyhlbGVtZW50LCBtYXRjaCkpIHsKICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goaW5kZXggKyAxKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgICAgIH0sIFtdKTsKICAgICAgfSwgWydsaXN0JywgJ2FueSddKSwKICAgICAgJ3VuaW9uJzogZm4oZnVuY3Rpb24gKC4uLl9saXN0cykgewogICAgICAgICAgdGhyb3cgbm90SW1wbGVtZW50ZWQoJ3VuaW9uJyk7CiAgICAgIH0sIFsnbGlzdCddKSwKICAgICAgJ2Rpc3RpbmN0IHZhbHVlcyc6IGZuKGZ1bmN0aW9uIChfbGlzdCkgewogICAgICAgICAgdGhyb3cgbm90SW1wbGVtZW50ZWQoJ2Rpc3RpbmN0IHZhbHVlcycpOwogICAgICB9LCBbJ2xpc3QnXSksCiAgICAgICdmbGF0dGVuJzogZm4oZnVuY3Rpb24gKGxpc3QpIHsKICAgICAgICAgIHJldHVybiBmbGF0dGVuKGxpc3QpOwogICAgICB9LCBbJ2xpc3QnXSksCiAgICAgICdwcm9kdWN0JzogbGlzdEZuKGZ1bmN0aW9uIChsaXN0KSB7CiAgICAgICAgICBpZiAobGlzdC5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBsaXN0LnJlZHVjZSgocmVzdWx0LCBuKSA9PiB7CiAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdCAqIG47CiAgICAgICAgICB9LCAxKTsKICAgICAgfSwgJ251bWJlcicpLAogICAgICAnbWVkaWFuJzogbGlzdEZuKGZ1bmN0aW9uIChsaXN0KSB7CiAgICAgICAgICBpZiAobGlzdC5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBtZWRpYW4obGlzdCk7CiAgICAgIH0sICdudW1iZXInKSwKICAgICAgJ3N0ZGRldic6IGxpc3RGbihmdW5jdGlvbiAobGlzdCkgewogICAgICAgICAgaWYgKGxpc3QubGVuZ3RoIDwgMikgewogICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHN0ZGRldihsaXN0KTsKICAgICAgfSwgJ251bWJlcicpLAogICAgICAnbW9kZSc6IGxpc3RGbihmdW5jdGlvbiAobGlzdCkgewogICAgICAgICAgcmV0dXJuIG1vZGUobGlzdCk7CiAgICAgIH0sICdudW1iZXInKSwKICAgICAgLy8gMTAuMy40LjUgTnVtZXJpYyBmdW5jdGlvbnMKICAgICAgJ2RlY2ltYWwnOiBmbihmdW5jdGlvbiAobiwgc2NhbGUpIHsKICAgICAgICAgIGlmICghc2NhbGUpIHsKICAgICAgICAgICAgICByZXR1cm4gcm91bmQkMShuKTsKICAgICAgICAgIH0KICAgICAgICAgIGNvbnN0IG9mZnNldCA9IE1hdGgucG93KDEwLCBzY2FsZSk7CiAgICAgICAgICByZXR1cm4gcm91bmQkMShuICogb2Zmc2V0KSAvIChvZmZzZXQpOwogICAgICB9LCBbJ251bWJlcicsICdudW1iZXInXSksCiAgICAgICdmbG9vcic6IGZuKGZ1bmN0aW9uIChuKSB7CiAgICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihuKTsKICAgICAgfSwgWydudW1iZXInXSksCiAgICAgICdjZWlsaW5nJzogZm4oZnVuY3Rpb24gKG4pIHsKICAgICAgICAgIHJldHVybiBNYXRoLmNlaWwobikgKyAwOwogICAgICB9LCBbJ251bWJlciddKSwKICAgICAgJ2Ficyc6IGZuKGZ1bmN0aW9uIChuKSB7CiAgICAgICAgICBpZiAodHlwZW9mIG4gIT09ICdudW1iZXInKSB7CiAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gTWF0aC5hYnMobik7CiAgICAgIH0sIFsnbnVtYmVyJ10pLAogICAgICAnbW9kdWxvJzogZm4oZnVuY3Rpb24gKGRpdmlkZW5kLCBkaXZpc29yKSB7CiAgICAgICAgICBpZiAoIWRpdmlzb3IpIHsKICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgIH0KICAgICAgICAgIGNvbnN0IGFkanVzdCA9IDEwMDAwMDAwMDA7CiAgICAgICAgICAvLyBjZi4gaHR0cHM6Ly9kdXN0aW5wZmlzdGVyLmdpdGh1Yi5pby8yMDE3LzA5LzAyL2pzLXdoYXRzLXdyb25nLXdpdGgtbW9kdWxvLwogICAgICAgICAgLy8KICAgICAgICAgIC8vIG5lZWQgdG8gcm91bmQgaGVyZSBhcyB1c2luZyB0aGlzIGN1c3RvbSBtb2R1bG8KICAgICAgICAgIC8vIHZhcmlhbnQgaXMgcHJvbmUgdG8gcm91bmRpbmcgZXJyb3JzCiAgICAgICAgICByZXR1cm4gTWF0aC5yb3VuZCgoZGl2aWRlbmQgJSBkaXZpc29yICsgZGl2aXNvcikgJSBkaXZpc29yICogYWRqdXN0KSAvIGFkanVzdDsKICAgICAgfSwgWydudW1iZXInLCAnbnVtYmVyJ10pLAogICAgICAnc3FydCc6IGZuKGZ1bmN0aW9uIChudW1iZXIpIHsKICAgICAgICAgIGlmIChudW1iZXIgPCAwKSB7CiAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KG51bWJlcik7CiAgICAgIH0sIFsnbnVtYmVyJ10pLAogICAgICAnbG9nJzogZm4oZnVuY3Rpb24gKG51bWJlcikgewogICAgICAgICAgaWYgKG51bWJlciA8PSAwKSB7CiAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gTWF0aC5sb2cobnVtYmVyKTsKICAgICAgfSwgWydudW1iZXInXSksCiAgICAgICdleHAnOiBmbihmdW5jdGlvbiAobnVtYmVyKSB7CiAgICAgICAgICByZXR1cm4gTWF0aC5leHAobnVtYmVyKTsKICAgICAgfSwgWydudW1iZXInXSksCiAgICAgICdvZGQnOiBmbihmdW5jdGlvbiAobnVtYmVyKSB7CiAgICAgICAgICByZXR1cm4gTWF0aC5hYnMobnVtYmVyKSAlIDIgPT09IDE7CiAgICAgIH0sIFsnbnVtYmVyJ10pLAogICAgICAnZXZlbic6IGZuKGZ1bmN0aW9uIChudW1iZXIpIHsKICAgICAgICAgIHJldHVybiBNYXRoLmFicyhudW1iZXIpICUgMiA9PT0gMDsKICAgICAgfSwgWydudW1iZXInXSksCiAgICAgIC8vIDEwLjMuNC42IERhdGUgYW5kIHRpbWUgZnVuY3Rpb25zCiAgICAgICdpcyc6IGZuKGZ1bmN0aW9uICh2YWx1ZTEsIHZhbHVlMikgewogICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZTEgPT09ICd1bmRlZmluZWQnIHx8IHR5cGVvZiB2YWx1ZTIgPT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGVxdWFscyh2YWx1ZTEsIHZhbHVlMik7CiAgICAgIH0sIFsnYW55PycsICdhbnk/J10pLAogICAgICAvLyAxMC4zLjQuNyBSYW5nZSBGdW5jdGlvbnMKICAgICAgJ2JlZm9yZSc6IGZuKGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgICByZXR1cm4gYmVmb3JlKGEsIGIpOwogICAgICB9LCBbJ2FueScsICdhbnknXSksCiAgICAgICdhZnRlcic6IGZuKGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgICByZXR1cm4gYmVmb3JlKGIsIGEpOwogICAgICB9LCBbJ2FueScsICdhbnknXSksCiAgICAgICdtZWV0cyc6IGZuKGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgICByZXR1cm4gbWVldHMoYSwgYik7CiAgICAgIH0sIFsncmFuZ2UnLCAncmFuZ2UnXSksCiAgICAgICdtZXQgYnknOiBmbihmdW5jdGlvbiAoYSwgYikgewogICAgICAgICAgcmV0dXJuIG1lZXRzKGIsIGEpOwogICAgICB9LCBbJ3JhbmdlJywgJ3JhbmdlJ10pLAogICAgICAnb3ZlcmxhcHMnOiBmbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICB0aHJvdyBub3RJbXBsZW1lbnRlZCgnb3ZlcmxhcHMnKTsKICAgICAgfSwgWydhbnk/J10pLAogICAgICAnb3ZlcmxhcHMgYmVmb3JlJzogZm4oZnVuY3Rpb24gKCkgewogICAgICAgICAgdGhyb3cgbm90SW1wbGVtZW50ZWQoJ292ZXJsYXBzIGJlZm9yZScpOwogICAgICB9LCBbJ2FueT8nXSksCiAgICAgICdvdmVybGFwcyBhZnRlcic6IGZuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHRocm93IG5vdEltcGxlbWVudGVkKCdvdmVybGFwcyBhZnRlcicpOwogICAgICB9LCBbJ2FueT8nXSksCiAgICAgICdmaW5pc2hlcyc6IGZuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHRocm93IG5vdEltcGxlbWVudGVkKCdmaW5pc2hlcycpOwogICAgICB9LCBbJ2FueT8nXSksCiAgICAgICdmaW5pc2hlZCBieSc6IGZuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHRocm93IG5vdEltcGxlbWVudGVkKCdmaW5pc2hlZCBieScpOwogICAgICB9LCBbJ2FueT8nXSksCiAgICAgICdpbmNsdWRlcyc6IGZuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHRocm93IG5vdEltcGxlbWVudGVkKCdpbmNsdWRlcycpOwogICAgICB9LCBbJ2FueT8nXSksCiAgICAgICdkdXJpbmcnOiBmbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICB0aHJvdyBub3RJbXBsZW1lbnRlZCgnZHVyaW5nJyk7CiAgICAgIH0sIFsnYW55PyddKSwKICAgICAgJ3N0YXJ0cyc6IGZuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHRocm93IG5vdEltcGxlbWVudGVkKCdzdGFydHMnKTsKICAgICAgfSwgWydhbnk/J10pLAogICAgICAnc3RhcnRlZCBieSc6IGZuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHRocm93IG5vdEltcGxlbWVudGVkKCdzdGFydGVkIGJ5Jyk7CiAgICAgIH0sIFsnYW55PyddKSwKICAgICAgJ2NvaW5jaWRlcyc6IGZuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHRocm93IG5vdEltcGxlbWVudGVkKCdjb2luY2lkZXMnKTsKICAgICAgfSwgWydhbnk/J10pLAogICAgICAvLyAxMC4zLjQuOCBUZW1wb3JhbCBidWlsdC1pbiBmdW5jdGlvbnMKICAgICAgJ2RheSBvZiB5ZWFyJzogZm4oZnVuY3Rpb24gKCkgewogICAgICAgICAgdGhyb3cgbm90SW1wbGVtZW50ZWQoJ2RheSBvZiB5ZWFyJyk7CiAgICAgIH0sIFsnYW55PyddKSwKICAgICAgJ2RheSBvZiB3ZWVrJzogZm4oZnVuY3Rpb24gKCkgewogICAgICAgICAgdGhyb3cgbm90SW1wbGVtZW50ZWQoJ2RheSBvZiB3ZWVrJyk7CiAgICAgIH0sIFsnYW55PyddKSwKICAgICAgJ21vbnRoIG9mIHllYXInOiBmbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICB0aHJvdyBub3RJbXBsZW1lbnRlZCgnbW9udGggb2YgeWVhcicpOwogICAgICB9LCBbJ2FueT8nXSksCiAgICAgICd3ZWVrIG9mIHllYXInOiBmbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICB0aHJvdyBub3RJbXBsZW1lbnRlZCgnd2VlayBvZiB5ZWFyJyk7CiAgICAgIH0sIFsnYW55PyddKSwKICAgICAgLy8gMTAuMy40LjkgU29ydAogICAgICAnc29ydCc6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHRocm93IG5vdEltcGxlbWVudGVkKCdzb3J0Jyk7CiAgICAgIH0sCiAgICAgIC8vIDEwLjMuNC4xMCBDb250ZXh0IGZ1bmN0aW9uCiAgICAgICdnZXQgdmFsdWUnOiBmbihmdW5jdGlvbiAobSwga2V5KSB7CiAgICAgICAgICByZXR1cm4gZ2V0RnJvbUNvbnRleHQoa2V5LCBtKTsKICAgICAgfSwgWydjb250ZXh0JywgJ3N0cmluZyddKSwKICAgICAgJ2dldCBlbnRyaWVzJzogZm4oZnVuY3Rpb24gKG0pIHsKICAgICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoICE9PSAxKSB7CiAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShtKSkgewogICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKG0pLm1hcCgoW2tleSwgdmFsdWVdKSA9PiAoeyBrZXksIHZhbHVlIH0pKTsKICAgICAgfSwgWydjb250ZXh0J10pLAogICAgICAnY29udGV4dCc6IGxpc3RGbihmdW5jdGlvbiAoX2NvbnRleHRzKSB7CiAgICAgICAgICB0aHJvdyBub3RJbXBsZW1lbnRlZCgnY29udGV4dCcpOwogICAgICB9LCAnY29udGV4dCcpLAogICAgICAnY29udGV4dCBtZXJnZSc6IGxpc3RGbihmdW5jdGlvbiAoX2NvbnRleHRzKSB7CiAgICAgICAgICB0aHJvdyBub3RJbXBsZW1lbnRlZCgnY29udGV4dCBtZXJnZScpOwogICAgICB9LCAnY29udGV4dCcpLAogICAgICAnY29udGV4dCBwdXQnOiBmbihmdW5jdGlvbiAoX2NvbnRleHQsIF9rZXlzLCBfdmFsdWUpIHsKICAgICAgICAgIHRocm93IG5vdEltcGxlbWVudGVkKCdjb250ZXh0IHB1dCcpOwogICAgICB9LCBbJ2NvbnRleHQnLCAnbGlzdCcsICdhbnknXSkKICB9OwogIGZ1bmN0aW9uIG1hdGNoZXMoYSwgYikgewogICAgICByZXR1cm4gYSA9PT0gYjsKICB9CiAgY29uc3QgRkFMU0UgPSB7fTsKICBmdW5jdGlvbiBjcmVhdGVBcmdUZXN0ZXIoYXJnKSB7CiAgICAgIGNvbnN0IG9wdGlvbmFsID0gYXJnLmVuZHNXaXRoKCc/Jyk7CiAgICAgIGNvbnN0IHR5cGUgPSBvcHRpb25hbCA/IGFyZy5zdWJzdHJpbmcoMCwgYXJnLmxlbmd0aCAtIDEpIDogYXJnOwogICAgICByZXR1cm4gZnVuY3Rpb24gKG9iaikgewogICAgICAgICAgY29uc3QgYXJyID0gQXJyYXkuaXNBcnJheShvYmopOwogICAgICAgICAgaWYgKHR5cGUgPT09ICdsaXN0JykgewogICAgICAgICAgICAgIGlmIChhcnIgfHwgb3B0aW9uYWwgJiYgdHlwZW9mIG9iaiA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIG9iajsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgIC8vIGltcGxpY2l0IGNvbnZlcnNpb24gb2JqID0+IFsgb2JqIF0KICAgICAgICAgICAgICAgICAgcmV0dXJuIFtvYmpdOwogICAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGlmICh0eXBlICE9PSAnYW55JyAmJiBhcnIgJiYgb2JqLmxlbmd0aCA9PT0gMSkgewogICAgICAgICAgICAgIC8vIGltcGxpY2l0IGNvbnZlcnNpb24gWyBvYmogXSA9PiBvYmoKICAgICAgICAgICAgICBvYmogPSBvYmpbMF07CiAgICAgICAgICB9CiAgICAgICAgICBpZiAodHlwZSA9PT0gJ3JhbmdlJykgewogICAgICAgICAgICAgIHJldHVybiBvYmogaW5zdGFuY2VvZiBSYW5nZSA/IG9iaiA6IEZBTFNFOwogICAgICAgICAgfQogICAgICAgICAgY29uc3Qgb2JqVHlwZSA9IGdldFR5cGUob2JqKTsKICAgICAgICAgIGlmIChvYmpUeXBlID09PSAnbmlsJykgewogICAgICAgICAgICAgIHJldHVybiAob3B0aW9uYWwgPyBvYmogOiBGQUxTRSk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAodHlwZSA9PT0gJ2FueScgfHwgdHlwZSA9PT0gb2JqVHlwZSkgewogICAgICAgICAgICAgIHJldHVybiBvYmo7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gdHlwZUNhc3Qob2JqLCB0eXBlKSB8fCBGQUxTRTsKICAgICAgfTsKICB9CiAgZnVuY3Rpb24gY3JlYXRlQXJnc1ZhbGlkYXRvcihhcmdEZWZpbml0aW9ucykgewogICAgICBjb25zdCB0ZXN0cyA9IGFyZ0RlZmluaXRpb25zLm1hcChjcmVhdGVBcmdUZXN0ZXIpOwogICAgICByZXR1cm4gZnVuY3Rpb24gKGFyZ3MpIHsKICAgICAgICAgIHdoaWxlIChhcmdzLmxlbmd0aCA8IGFyZ0RlZmluaXRpb25zLmxlbmd0aCkgewogICAgICAgICAgICAgIGFyZ3MucHVzaCh1bmRlZmluZWQpOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGFyZ3MucmVkdWNlKChyZXN1bHQsIGFyZywgaW5kZXgpID0+IHsKICAgICAgICAgICAgICBpZiAocmVzdWx0ID09PSBmYWxzZSkgewogICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBjb25zdCB0ZXN0ID0gdGVzdHNbaW5kZXhdOwogICAgICAgICAgICAgIGNvbnN0IGNvbnZlcnNpb24gPSB0ZXN0ID8gdGVzdChhcmcpIDogYXJnOwogICAgICAgICAgICAgIGlmIChjb252ZXJzaW9uID09PSBGQUxTRSkgewogICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGNvbnZlcnNpb24pOwogICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgICB9LCBbXSk7CiAgICAgIH07CiAgfQogIC8qKgogICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuRGVmaW5pdGlvbgogICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlCiAgICogQHBhcmFtIHtzdHJpbmdbXX0gW3BhcmFtZXRlck5hbWVzXQogICAqCiAgICogQHJldHVybiB7RnVuY3Rpb259CiAgICovCiAgZnVuY3Rpb24gbGlzdEZuKGZuRGVmaW5pdGlvbiwgdHlwZSwgcGFyYW1ldGVyTmFtZXMgPSBudWxsKSB7CiAgICAgIGNvbnN0IHRlc3RlciA9IGNyZWF0ZUFyZ1Rlc3Rlcih0eXBlKTsKICAgICAgY29uc3Qgd3JhcHBlZEZuID0gZnVuY3Rpb24gKC4uLmFyZ3MpIHsKICAgICAgICAgIGlmIChhcmdzLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgfQogICAgICAgICAgLy8gdW53cmFwIGZpcnN0IGFyZwogICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXJnc1swXSkgJiYgYXJncy5sZW5ndGggPT09IDEpIHsKICAgICAgICAgICAgICBhcmdzID0gYXJnc1swXTsKICAgICAgICAgIH0KICAgICAgICAgIGlmICghYXJncy5ldmVyeShhcmcgPT4gdGVzdGVyKGFyZykgIT09IEZBTFNFKSkgewogICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGZuRGVmaW5pdGlvbihhcmdzKTsKICAgICAgfTsKICAgICAgd3JhcHBlZEZuLiRhcmdzID0gcGFyYW1ldGVyTmFtZXMgfHwgcGFyc2VQYXJhbWV0ZXJOYW1lcyhmbkRlZmluaXRpb24pOwogICAgICByZXR1cm4gd3JhcHBlZEZuOwogIH0KICAvKioKICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbkRlZmluaXRpb24KICAgKiBAcGFyYW0ge3N0cmluZ1tdfSBhcmdEZWZpbml0aW9ucwogICAqIEBwYXJhbSB7c3RyaW5nW119IFtwYXJhbWV0ZXJOYW1lc10KICAgKgogICAqIEByZXR1cm4ge0Z1bmN0aW9ufQogICAqLwogIGZ1bmN0aW9uIGZuKGZuRGVmaW5pdGlvbiwgYXJnRGVmaW5pdGlvbnMsIHBhcmFtZXRlck5hbWVzID0gbnVsbCkgewogICAgICBjb25zdCBjaGVja0FyZ3MgPSBjcmVhdGVBcmdzVmFsaWRhdG9yKGFyZ0RlZmluaXRpb25zKTsKICAgICAgcGFyYW1ldGVyTmFtZXMgPSBwYXJhbWV0ZXJOYW1lcyB8fCBwYXJzZVBhcmFtZXRlck5hbWVzKGZuRGVmaW5pdGlvbik7CiAgICAgIGNvbnN0IHdyYXBwZWRGbiA9IGZ1bmN0aW9uICguLi5hcmdzKSB7CiAgICAgICAgICBjb25zdCBjb252ZXJ0ZWRBcmdzID0gY2hlY2tBcmdzKGFyZ3MpOwogICAgICAgICAgaWYgKCFjb252ZXJ0ZWRBcmdzKSB7CiAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gZm5EZWZpbml0aW9uKC4uLmNvbnZlcnRlZEFyZ3MpOwogICAgICB9OwogICAgICB3cmFwcGVkRm4uJGFyZ3MgPSBwYXJhbWV0ZXJOYW1lczsKICAgICAgcmV0dXJuIHdyYXBwZWRGbjsKICB9CiAgZnVuY3Rpb24gbWVldHMoYSwgYikgewogICAgICByZXR1cm4gWwogICAgICAgICAgKGEuZW5kID09PSBiLnN0YXJ0KSwKICAgICAgICAgIChhWydlbmQgaW5jbHVkZWQnXSA9PT0gdHJ1ZSksCiAgICAgICAgICAoYlsnc3RhcnQgaW5jbHVkZWQnXSA9PT0gdHJ1ZSkKICAgICAgXS5ldmVyeSh2ID0+IHYpOwogIH0KICBmdW5jdGlvbiBiZWZvcmUoYSwgYikgewogICAgICBpZiAoYSBpbnN0YW5jZW9mIFJhbmdlICYmIGIgaW5zdGFuY2VvZiBSYW5nZSkgewogICAgICAgICAgcmV0dXJuIChhLmVuZCA8IGIuc3RhcnQgfHwgKCFhWydlbmQgaW5jbHVkZWQnXSB8fCAhYlsnc3RhcnQgaW5jbHVkZWQnXSkgJiYgYS5lbmQgPT0gYi5zdGFydCk7CiAgICAgIH0KICAgICAgaWYgKGEgaW5zdGFuY2VvZiBSYW5nZSkgewogICAgICAgICAgcmV0dXJuIChhLmVuZCA8IGIgfHwgKCFhWydlbmQgaW5jbHVkZWQnXSAmJiBhLmVuZCA9PT0gYikpOwogICAgICB9CiAgICAgIGlmIChiIGluc3RhbmNlb2YgUmFuZ2UpIHsKICAgICAgICAgIHJldHVybiAoYi5zdGFydCA+IGEgfHwgKCFiWydzdGFydCBpbmNsdWRlZCddICYmIGIuc3RhcnQgPT09IGEpKTsKICAgICAgfQogICAgICByZXR1cm4gYSA8IGI7CiAgfQogIGZ1bmN0aW9uIHN1bShsaXN0KSB7CiAgICAgIHJldHVybiBsaXN0LnJlZHVjZSgoc3VtLCBlbCkgPT4gc3VtID09PSBudWxsID8gZWwgOiBzdW0gKyBlbCwgbnVsbCk7CiAgfQogIGZ1bmN0aW9uIGZsYXR0ZW4oW3gsIC4uLnhzXSkgewogICAgICByZXR1cm4gKHggIT09IHVuZGVmaW5lZAogICAgICAgICAgPyBbLi4uQXJyYXkuaXNBcnJheSh4KSA/IGZsYXR0ZW4oeCkgOiBbeF0sIC4uLmZsYXR0ZW4oeHMpXQogICAgICAgICAgOiBbXSk7CiAgfQogIGZ1bmN0aW9uIHRvS2V5U3RyaW5nKGtleSkgewogICAgICBpZiAodHlwZW9mIGtleSA9PT0gJ3N0cmluZycgJiYgL1xXLy50ZXN0KGtleSkpIHsKICAgICAgICAgIHJldHVybiB0b1N0cmluZyhrZXksIHRydWUpOwogICAgICB9CiAgICAgIHJldHVybiBrZXk7CiAgfQogIGZ1bmN0aW9uIHRvRGVlcFN0cmluZyhvYmopIHsKICAgICAgcmV0dXJuIHRvU3RyaW5nKG9iaiwgdHJ1ZSk7CiAgfQogIGZ1bmN0aW9uIGVzY2FwZVN0cihzdHIpIHsKICAgICAgcmV0dXJuIHN0ci5yZXBsYWNlKC8oInxcXCkvZywgJ1xcJDEnKTsKICB9CiAgZnVuY3Rpb24gdG9TdHJpbmcob2JqLCB3cmFwID0gZmFsc2UpIHsKICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kOwogICAgICBjb25zdCB0eXBlID0gZ2V0VHlwZShvYmopOwogICAgICBpZiAodHlwZSA9PT0gJ25pbCcpIHsKICAgICAgICAgIHJldHVybiAnbnVsbCc7CiAgICAgIH0KICAgICAgaWYgKHR5cGUgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICByZXR1cm4gd3JhcCA/IGAiJHtlc2NhcGVTdHIob2JqKX0iYCA6IG9iajsKICAgICAgfQogICAgICBpZiAodHlwZSA9PT0gJ2Jvb2xlYW4nIHx8IHR5cGUgPT09ICdudW1iZXInKSB7CiAgICAgICAgICByZXR1cm4gU3RyaW5nKG9iaik7CiAgICAgIH0KICAgICAgaWYgKHR5cGUgPT09ICdsaXN0JykgewogICAgICAgICAgcmV0dXJuICdbJyArIG9iai5tYXAodG9EZWVwU3RyaW5nKS5qb2luKCcsICcpICsgJ10nOwogICAgICB9CiAgICAgIGlmICh0eXBlID09PSAnY29udGV4dCcpIHsKICAgICAgICAgIHJldHVybiAneycgKyBPYmplY3QuZW50cmllcyhvYmopLm1hcCgoW2tleSwgdmFsdWVdKSA9PiB7CiAgICAgICAgICAgICAgcmV0dXJuIHRvS2V5U3RyaW5nKGtleSkgKyAnOiAnICsgdG9EZWVwU3RyaW5nKHZhbHVlKTsKICAgICAgICAgIH0pLmpvaW4oJywgJykgKyAnfSc7CiAgICAgIH0KICAgICAgaWYgKHR5cGUgPT09ICdkdXJhdGlvbicpIHsKICAgICAgICAgIHJldHVybiBvYmouc2hpZnRUbygneWVhcnMnLCAnbW9udGhzJywgJ2RheXMnLCAnaG91cnMnLCAnbWludXRlcycsICdzZWNvbmRzJykubm9ybWFsaXplKCkudG9JU08oKTsKICAgICAgfQogICAgICBpZiAodHlwZSA9PT0gJ2RhdGUgdGltZScpIHsKICAgICAgICAgIGlmICgoX2EgPSBvYmouem9uZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnpvbmVOYW1lKSB7CiAgICAgICAgICAgICAgcmV0dXJuIG9iai50b0lTTyh7IHN1cHByZXNzTWlsbGlzZWNvbmRzOiB0cnVlLCBpbmNsdWRlT2Zmc2V0OiBmYWxzZSB9KSArICdAJyArICgoX2IgPSBvYmouem9uZSkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLnpvbmVOYW1lKTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBvYmoudG9JU08oeyBzdXBwcmVzc01pbGxpc2Vjb25kczogdHJ1ZSB9KTsKICAgICAgfQogICAgICBpZiAodHlwZSA9PT0gJ2RhdGUnKSB7CiAgICAgICAgICByZXR1cm4gb2JqLnRvSVNPRGF0ZSgpOwogICAgICB9CiAgICAgIGlmICh0eXBlID09PSAncmFuZ2UnKSB7CiAgICAgICAgICByZXR1cm4gJzxyYW5nZT4nOwogICAgICB9CiAgICAgIGlmICh0eXBlID09PSAndGltZScpIHsKICAgICAgICAgIGlmICgoX2MgPSBvYmouem9uZSkgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLnpvbmVOYW1lKSB7CiAgICAgICAgICAgICAgcmV0dXJuIG9iai50b0lTT1RpbWUoeyBzdXBwcmVzc01pbGxpc2Vjb25kczogdHJ1ZSwgaW5jbHVkZU9mZnNldDogZmFsc2UgfSkgKyAnQCcgKyAoKF9kID0gb2JqLnpvbmUpID09PSBudWxsIHx8IF9kID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZC56b25lTmFtZSk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gb2JqLnRvSVNPVGltZSh7IHN1cHByZXNzTWlsbGlzZWNvbmRzOiB0cnVlIH0pOwogICAgICB9CiAgICAgIGlmICh0eXBlID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICByZXR1cm4gJzxmdW5jdGlvbj4nOwogICAgICB9CiAgICAgIHRocm93IG5vdEltcGxlbWVudGVkKCdzdHJpbmcoJyArIHR5cGUgKyAnKScpOwogIH0KICBmdW5jdGlvbiBjb3VudFN5bWJvbHMoc3RyKSB7CiAgICAgIC8vIGNmLiBodHRwczovL21hdGhpYXNieW5lbnMuYmUvbm90ZXMvamF2YXNjcmlwdC11bmljb2RlCiAgICAgIHJldHVybiBzdHIucmVwbGFjZSgvW1x1RDgwMC1cdURCRkZdW1x1REMwMC1cdURGRkZdL2csICdfJykubGVuZ3RoOwogIH0KICBmdW5jdGlvbiByb3VuZCQxKG4pIHsKICAgICAgY29uc3QgaW50ZWdyYWwgPSBNYXRoLnRydW5jKG4pOwogICAgICBpZiAobiAtIGludGVncmFsID4gLjUpIHsKICAgICAgICAgIHJldHVybiBpbnRlZ3JhbCArIDE7CiAgICAgIH0KICAgICAgZWxzZSB7CiAgICAgICAgICByZXR1cm4gaW50ZWdyYWw7CiAgICAgIH0KICB9CiAgLy8gYWRhcHRlZCBmcm9tIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS81MzU3NzE1OQogIGZ1bmN0aW9uIHN0ZGRldihhcnJheSkgewogICAgICBjb25zdCBuID0gYXJyYXkubGVuZ3RoOwogICAgICBjb25zdCBtZWFuID0gYXJyYXkucmVkdWNlKChhLCBiKSA9PiBhICsgYikgLyBuOwogICAgICByZXR1cm4gTWF0aC5zcXJ0KGFycmF5Lm1hcCh4ID0+IE1hdGgucG93KHggLSBtZWFuLCAyKSkucmVkdWNlKChhLCBiKSA9PiBhICsgYikgLyAobiAtIDEpKTsKICB9CiAgZnVuY3Rpb24gbWVkaWFuKGFycmF5KSB7CiAgICAgIGNvbnN0IG4gPSBhcnJheS5sZW5ndGg7CiAgICAgIGNvbnN0IHNvcnRlZCA9IGFycmF5LnNsaWNlKCkuc29ydCgpOwogICAgICBjb25zdCBtaWQgPSBuIC8gMiAtIDE7CiAgICAgIGNvbnN0IGluZGV4ID0gTWF0aC5jZWlsKG1pZCk7CiAgICAgIC8vIGV2ZW4KICAgICAgaWYgKG1pZCA9PT0gaW5kZXgpIHsKICAgICAgICAgIHJldHVybiAoc29ydGVkW2luZGV4XSArIHNvcnRlZFtpbmRleCArIDFdKSAvIDI7CiAgICAgIH0KICAgICAgLy8gdW5ldmVuCiAgICAgIHJldHVybiBzb3J0ZWRbaW5kZXhdOwogIH0KICBmdW5jdGlvbiBtb2RlKGFycmF5KSB7CiAgICAgIGlmIChhcnJheS5sZW5ndGggPCAyKSB7CiAgICAgICAgICByZXR1cm4gYXJyYXk7CiAgICAgIH0KICAgICAgY29uc3QgYnVja2V0cyA9IHt9OwogICAgICBmb3IgKGNvbnN0IG4gb2YgYXJyYXkpIHsKICAgICAgICAgIGJ1Y2tldHNbbl0gPSAoYnVja2V0c1tuXSB8fCAwKSArIDE7CiAgICAgIH0KICAgICAgY29uc3Qgc29ydGVkID0gT2JqZWN0LmVudHJpZXMoYnVja2V0cykuc29ydCgoYSwgYikgPT4gYlsxXSAtIGFbMV0pOwogICAgICByZXR1cm4gc29ydGVkLmZpbHRlcihzID0+IHNbMV0gPT09IHNvcnRlZFswXVsxXSkubWFwKGUgPT4gK2VbMF0pOwogIH0KICBmdW5jdGlvbiBpZlZhbGlkKG8pIHsKICAgICAgcmV0dXJuIG8uaXNWYWxpZCA/IG8gOiBudWxsOwogIH0KCiAgZnVuY3Rpb24gcGFyc2VFeHByZXNzaW9ucyhleHByZXNzaW9uLCBjb250ZXh0ID0ge30pIHsKICAgICAgcmV0dXJuIHBhcnNlci5jb25maWd1cmUoewogICAgICAgICAgdG9wOiAnRXhwcmVzc2lvbnMnLAogICAgICAgICAgY29udGV4dFRyYWNrZXI6IHRyYWNrVmFyaWFibGVzKGNvbnRleHQpCiAgICAgIH0pLnBhcnNlKGV4cHJlc3Npb24pOwogIH0KICBmdW5jdGlvbiBwYXJzZVVuYXJ5VGVzdHMoZXhwcmVzc2lvbiwgY29udGV4dCA9IHt9KSB7CiAgICAgIHJldHVybiBwYXJzZXIuY29uZmlndXJlKHsKICAgICAgICAgIHRvcDogJ1VuYXJ5VGVzdHMnLAogICAgICAgICAgY29udGV4dFRyYWNrZXI6IHRyYWNrVmFyaWFibGVzKGNvbnRleHQpCiAgICAgIH0pLnBhcnNlKGV4cHJlc3Npb24pOwogIH0KCiAgY2xhc3MgSW50ZXJwcmV0ZXIgewogICAgICBfYnVpbGRFeGVjdXRpb25UcmVlKHRyZWUsIGlucHV0KSB7CiAgICAgICAgICBjb25zdCByb290ID0geyBhcmdzOiBbXSwgbm9kZUlucHV0OiBpbnB1dCB9OwogICAgICAgICAgY29uc3Qgc3RhY2sgPSBbcm9vdF07CiAgICAgICAgICB0cmVlLml0ZXJhdGUoewogICAgICAgICAgICAgIGVudGVyKG5vZGVSZWYpIHsKICAgICAgICAgICAgICAgICAgY29uc3QgeyBpc0Vycm9yLCBpc1NraXBwZWQgfSA9IG5vZGVSZWYudHlwZTsKICAgICAgICAgICAgICAgICAgY29uc3QgeyBmcm9tLCB0byB9ID0gbm9kZVJlZjsKICAgICAgICAgICAgICAgICAgaWYgKGlzRXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgU3RhdGVtZW50IHVucGFyc2VhYmxlIGF0IFske2Zyb219LCAke3RvfV1gKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBpZiAoaXNTa2lwcGVkKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgY29uc3Qgbm9kZUlucHV0ID0gaW5wdXQuc2xpY2UoZnJvbSwgdG8pOwogICAgICAgICAgICAgICAgICBzdGFjay5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgIG5vZGVJbnB1dCwKICAgICAgICAgICAgICAgICAgICAgIGFyZ3M6IFtdCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgbGVhdmUobm9kZVJlZikgewogICAgICAgICAgICAgICAgICBpZiAobm9kZVJlZi50eXBlLmlzU2tpcHBlZCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGNvbnN0IHsgbm9kZUlucHV0LCBhcmdzIH0gPSBzdGFjay5wb3AoKTsKICAgICAgICAgICAgICAgICAgY29uc3QgcGFyZW50ID0gc3RhY2tbc3RhY2subGVuZ3RoIC0gMV07CiAgICAgICAgICAgICAgICAgIGNvbnN0IGV4cHIgPSBldmFsTm9kZShub2RlUmVmLCBub2RlSW5wdXQsIGFyZ3MpOwogICAgICAgICAgICAgICAgICBwYXJlbnQuYXJncy5wdXNoKGV4cHIpOwogICAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgICAgcmV0dXJuIHJvb3QuYXJnc1tyb290LmFyZ3MubGVuZ3RoIC0gMV07CiAgICAgIH0KICAgICAgZXZhbHVhdGUoZXhwcmVzc2lvbiwgY29udGV4dCA9IHt9KSB7CiAgICAgICAgICBjb25zdCBwYXJzZVRyZWUgPSBwYXJzZUV4cHJlc3Npb25zKGV4cHJlc3Npb24sIGNvbnRleHQpOwogICAgICAgICAgY29uc3Qgcm9vdCA9IHRoaXMuX2J1aWxkRXhlY3V0aW9uVHJlZShwYXJzZVRyZWUsIGV4cHJlc3Npb24pOwogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICBwYXJzZVRyZWUsCiAgICAgICAgICAgICAgcm9vdAogICAgICAgICAgfTsKICAgICAgfQogICAgICB1bmFyeVRlc3QoZXhwcmVzc2lvbiwgY29udGV4dCA9IHt9KSB7CiAgICAgICAgICBjb25zdCBwYXJzZVRyZWUgPSBwYXJzZVVuYXJ5VGVzdHMoZXhwcmVzc2lvbiwgY29udGV4dCk7CiAgICAgICAgICBjb25zdCByb290ID0gdGhpcy5fYnVpbGRFeGVjdXRpb25UcmVlKHBhcnNlVHJlZSwgZXhwcmVzc2lvbik7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgIHBhcnNlVHJlZSwKICAgICAgICAgICAgICByb290CiAgICAgICAgICB9OwogICAgICB9CiAgfQogIGNvbnN0IGludGVycHJldGVyID0gbmV3IEludGVycHJldGVyKCk7CiAgZnVuY3Rpb24gdW5hcnlUZXN0KGV4cHJlc3Npb24sIGNvbnRleHQgPSB7fSkgewogICAgICBjb25zdCB2YWx1ZSA9IGNvbnRleHRbJz8nXSB8fCBudWxsOwogICAgICBjb25zdCB7IHJvb3QgfSA9IGludGVycHJldGVyLnVuYXJ5VGVzdChleHByZXNzaW9uLCBjb250ZXh0KTsKICAgICAgLy8gcm9vdCA9IGZuKGN0eCkgPT4gdGVzdCh2YWwpCiAgICAgIGNvbnN0IHRlc3QgPSByb290KGNvbnRleHQpOwogICAgICByZXR1cm4gdGVzdCh2YWx1ZSk7CiAgfQogIGZ1bmN0aW9uIGV2YWx1YXRlKGV4cHJlc3Npb24sIGNvbnRleHQgPSB7fSkgewogICAgICBjb25zdCB7IHJvb3QgfSA9IGludGVycHJldGVyLmV2YWx1YXRlKGV4cHJlc3Npb24sIGNvbnRleHQpOwogICAgICAvLyByb290ID0gWyBmbihjdHgpIF0KICAgICAgY29uc3QgcmVzdWx0cyA9IHJvb3QoY29udGV4dCk7CiAgICAgIGlmIChyZXN1bHRzLmxlbmd0aCA9PT0gMSkgewogICAgICAgICAgcmV0dXJuIHJlc3VsdHNbMF07CiAgICAgIH0KICAgICAgZWxzZSB7CiAgICAgICAgICByZXR1cm4gcmVzdWx0czsKICAgICAgfQogIH0KICBmdW5jdGlvbiBldmFsTm9kZShub2RlLCBpbnB1dCwgYXJncykgewogICAgICBzd2l0Y2ggKG5vZGUubmFtZSkgewogICAgICAgICAgY2FzZSAnQXJpdGhPcCc6IHJldHVybiAoY29udGV4dCkgPT4gewogICAgICAgICAgICAgIGNvbnN0IG51bGxhYmxlID0gKG9wLCB0eXBlcyA9IFsnbnVtYmVyJ10pID0+IChhLCBiKSA9PiB7CiAgICAgICAgICAgICAgICAgIGNvbnN0IGxlZnQgPSBhKGNvbnRleHQpOwogICAgICAgICAgICAgICAgICBjb25zdCByaWdodCA9IGIoY29udGV4dCk7CiAgICAgICAgICAgICAgICAgIGlmIChpc0FycmF5JDEobGVmdCkpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGlmIChpc0FycmF5JDEocmlnaHQpKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBjb25zdCBsZWZ0VHlwZSA9IGdldFR5cGUobGVmdCk7CiAgICAgICAgICAgICAgICAgIGNvbnN0IHJpZ2h0VHlwZSA9IGdldFR5cGUocmlnaHQpOwogICAgICAgICAgICAgICAgICBpZiAobGVmdFR5cGUgIT09IHJpZ2h0VHlwZSB8fAogICAgICAgICAgICAgICAgICAgICAgIXR5cGVzLmluY2x1ZGVzKGxlZnRUeXBlKSkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgcmV0dXJuIG9wKGxlZnQsIHJpZ2h0KTsKICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIHN3aXRjaCAoaW5wdXQpIHsKICAgICAgICAgICAgICAgICAgY2FzZSAnKyc6IHJldHVybiBudWxsYWJsZSgoYSwgYikgPT4gYSArIGIsIFsnc3RyaW5nJywgJ251bWJlciddKTsKICAgICAgICAgICAgICAgICAgY2FzZSAnLSc6IHJldHVybiBudWxsYWJsZSgoYSwgYikgPT4gYSAtIGIpOwogICAgICAgICAgICAgICAgICBjYXNlICcqJzogcmV0dXJuIG51bGxhYmxlKChhLCBiKSA9PiBhICogYik7CiAgICAgICAgICAgICAgICAgIGNhc2UgJy8nOiByZXR1cm4gbnVsbGFibGUoKGEsIGIpID0+ICFiID8gbnVsbCA6IGEgLyBiKTsKICAgICAgICAgICAgICAgICAgY2FzZSAnKionOgogICAgICAgICAgICAgICAgICBjYXNlICdeJzogcmV0dXJuIG51bGxhYmxlKChhLCBiKSA9PiBNYXRoLnBvdyhhLCBiKSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgfTsKICAgICAgICAgIGNhc2UgJ0NvbXBhcmVPcCc6IHJldHVybiB0YWcoKCkgPT4gewogICAgICAgICAgICAgIHN3aXRjaCAoaW5wdXQpIHsKICAgICAgICAgICAgICAgICAgY2FzZSAnPic6IHJldHVybiAoYikgPT4gY3JlYXRlUmFuZ2UoYiwgbnVsbCwgZmFsc2UsIGZhbHNlKTsKICAgICAgICAgICAgICAgICAgY2FzZSAnPj0nOiByZXR1cm4gKGIpID0+IGNyZWF0ZVJhbmdlKGIsIG51bGwsIHRydWUsIGZhbHNlKTsKICAgICAgICAgICAgICAgICAgY2FzZSAnPCc6IHJldHVybiAoYikgPT4gY3JlYXRlUmFuZ2UobnVsbCwgYiwgZmFsc2UsIGZhbHNlKTsKICAgICAgICAgICAgICAgICAgY2FzZSAnPD0nOiByZXR1cm4gKGIpID0+IGNyZWF0ZVJhbmdlKG51bGwsIGIsIGZhbHNlLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgY2FzZSAnPSc6IHJldHVybiAoYikgPT4gKGEpID0+IGVxdWFscyhhLCBiKTsKICAgICAgICAgICAgICAgICAgY2FzZSAnIT0nOiByZXR1cm4gKGIpID0+IChhKSA9PiAhZXF1YWxzKGEsIGIpOwogICAgICAgICAgICAgIH0KICAgICAgICAgIH0sIFRlc3QoJ2Jvb2xlYW4nKSk7CiAgICAgICAgICBjYXNlICdXaWxkY2FyZCc6IHJldHVybiAoX2NvbnRleHQpID0+IHRydWU7CiAgICAgICAgICBjYXNlICdudWxsJzogcmV0dXJuIChfY29udGV4dCkgPT4gewogICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgfTsKICAgICAgICAgIGNhc2UgJ0Rpc2p1bmN0aW9uJzogcmV0dXJuIHRhZygoY29udGV4dCkgPT4gewogICAgICAgICAgICAgIGNvbnN0IGxlZnQgPSBhcmdzWzBdKGNvbnRleHQpOwogICAgICAgICAgICAgIGNvbnN0IHJpZ2h0ID0gYXJnc1syXShjb250ZXh0KTsKICAgICAgICAgICAgICBjb25zdCBtYXRyaXggPSBbCiAgICAgICAgICAgICAgICAgIFt0cnVlLCB0cnVlLCB0cnVlXSwKICAgICAgICAgICAgICAgICAgW3RydWUsIGZhbHNlLCB0cnVlXSwKICAgICAgICAgICAgICAgICAgW3RydWUsIG51bGwsIHRydWVdLAogICAgICAgICAgICAgICAgICBbZmFsc2UsIHRydWUsIHRydWVdLAogICAgICAgICAgICAgICAgICBbZmFsc2UsIGZhbHNlLCBmYWxzZV0sCiAgICAgICAgICAgICAgICAgIFtmYWxzZSwgbnVsbCwgbnVsbF0sCiAgICAgICAgICAgICAgICAgIFtudWxsLCB0cnVlLCB0cnVlXSwKICAgICAgICAgICAgICAgICAgW251bGwsIGZhbHNlLCBudWxsXSwKICAgICAgICAgICAgICAgICAgW251bGwsIG51bGwsIG51bGxdLAogICAgICAgICAgICAgIF07CiAgICAgICAgICAgICAgY29uc3QgYSA9IHR5cGVvZiBsZWZ0ID09PSAnYm9vbGVhbicgPyBsZWZ0IDogbnVsbDsKICAgICAgICAgICAgICBjb25zdCBiID0gdHlwZW9mIHJpZ2h0ID09PSAnYm9vbGVhbicgPyByaWdodCA6IG51bGw7CiAgICAgICAgICAgICAgcmV0dXJuIG1hdHJpeC5maW5kKGVsID0+IGVsWzBdID09PSBhICYmIGVsWzFdID09PSBiKVsyXTsKICAgICAgICAgIH0sIFRlc3QoJ2Jvb2xlYW4nKSk7CiAgICAgICAgICBjYXNlICdDb25qdW5jdGlvbic6IHJldHVybiB0YWcoKGNvbnRleHQpID0+IHsKICAgICAgICAgICAgICBjb25zdCBsZWZ0ID0gYXJnc1swXShjb250ZXh0KTsKICAgICAgICAgICAgICBjb25zdCByaWdodCA9IGFyZ3NbMl0oY29udGV4dCk7CiAgICAgICAgICAgICAgY29uc3QgbWF0cml4ID0gWwogICAgICAgICAgICAgICAgICBbdHJ1ZSwgdHJ1ZSwgdHJ1ZV0sCiAgICAgICAgICAgICAgICAgIFt0cnVlLCBmYWxzZSwgZmFsc2VdLAogICAgICAgICAgICAgICAgICBbdHJ1ZSwgbnVsbCwgbnVsbF0sCiAgICAgICAgICAgICAgICAgIFtmYWxzZSwgdHJ1ZSwgZmFsc2VdLAogICAgICAgICAgICAgICAgICBbZmFsc2UsIGZhbHNlLCBmYWxzZV0sCiAgICAgICAgICAgICAgICAgIFtmYWxzZSwgbnVsbCwgZmFsc2VdLAogICAgICAgICAgICAgICAgICBbbnVsbCwgdHJ1ZSwgbnVsbF0sCiAgICAgICAgICAgICAgICAgIFtudWxsLCBmYWxzZSwgZmFsc2VdLAogICAgICAgICAgICAgICAgICBbbnVsbCwgbnVsbCwgbnVsbF0sCiAgICAgICAgICAgICAgXTsKICAgICAgICAgICAgICBjb25zdCBhID0gdHlwZW9mIGxlZnQgPT09ICdib29sZWFuJyA/IGxlZnQgOiBudWxsOwogICAgICAgICAgICAgIGNvbnN0IGIgPSB0eXBlb2YgcmlnaHQgPT09ICdib29sZWFuJyA/IHJpZ2h0IDogbnVsbDsKICAgICAgICAgICAgICByZXR1cm4gbWF0cml4LmZpbmQoZWwgPT4gZWxbMF0gPT09IGEgJiYgZWxbMV0gPT09IGIpWzJdOwogICAgICAgICAgfSwgVGVzdCgnYm9vbGVhbicpKTsKICAgICAgICAgIGNhc2UgJ0NvbnRleHQnOiByZXR1cm4gKGNvbnRleHQpID0+IHsKICAgICAgICAgICAgICByZXR1cm4gYXJncy5zbGljZSgxLCAtMSkucmVkdWNlKChvYmosIGFyZykgPT4gewogICAgICAgICAgICAgICAgICBjb25zdCBba2V5LCB2YWx1ZV0gPSBhcmcoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBjb250ZXh0KSwgb2JqKSk7CiAgICAgICAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG9iaiksIHsgW2tleV06IHZhbHVlIH0pOwogICAgICAgICAgICAgIH0sIHt9KTsKICAgICAgICAgIH07CiAgICAgICAgICBjYXNlICdGdW5jdGlvbkJvZHknOiByZXR1cm4gYXJnc1swXTsKICAgICAgICAgIGNhc2UgJ0Zvcm1hbFBhcmFtZXRlcnMnOiByZXR1cm4gYXJnczsKICAgICAgICAgIGNhc2UgJ0Zvcm1hbFBhcmFtZXRlcic6IHJldHVybiBhcmdzWzBdOwogICAgICAgICAgY2FzZSAnUGFyYW1ldGVyTmFtZSc6IHJldHVybiBhcmdzLmpvaW4oJyAnKTsKICAgICAgICAgIGNhc2UgJ0Z1bmN0aW9uRGVmaW5pdGlvbic6IHJldHVybiAoY29udGV4dCkgPT4gewogICAgICAgICAgICAgIGNvbnN0IHBhcmFtZXRlck5hbWVzID0gYXJnc1syXTsKICAgICAgICAgICAgICBjb25zdCBmbkJvZHkgPSBhcmdzWzRdOwogICAgICAgICAgICAgIHJldHVybiB3cmFwRnVuY3Rpb24oKC4uLmFyZ3MpID0+IHsKICAgICAgICAgICAgICAgICAgY29uc3QgZm5Db250ZXh0ID0gcGFyYW1ldGVyTmFtZXMucmVkdWNlKChjb250ZXh0LCBuYW1lLCBpZHgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgIC8vIHN1cHBvcnQgcG9zaXRpb25hbCBwYXJhbWV0ZXJzCiAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0W25hbWVdID0gYXJnc1tpZHhdOwogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQ7CiAgICAgICAgICAgICAgICAgIH0sIE9iamVjdC5hc3NpZ24oe30sIGNvbnRleHQpKTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGZuQm9keShmbkNvbnRleHQpOwogICAgICAgICAgICAgIH0sIHBhcmFtZXRlck5hbWVzKTsKICAgICAgICAgIH07CiAgICAgICAgICBjYXNlICdDb250ZXh0RW50cnknOiByZXR1cm4gKGNvbnRleHQpID0+IHsKICAgICAgICAgICAgICBjb25zdCBrZXkgPSB0eXBlb2YgYXJnc1swXSA9PT0gJ2Z1bmN0aW9uJyA/IGFyZ3NbMF0oY29udGV4dCkgOiBhcmdzWzBdOwogICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gYXJnc1sxXShjb250ZXh0KTsKICAgICAgICAgICAgICByZXR1cm4gW2tleSwgdmFsdWVdOwogICAgICAgICAgfTsKICAgICAgICAgIGNhc2UgJ0tleSc6IHJldHVybiBhcmdzWzBdOwogICAgICAgICAgY2FzZSAnSWRlbnRpZmllcic6IHJldHVybiBpbnB1dDsKICAgICAgICAgIGNhc2UgJ1NwZWNpYWxGdW5jdGlvbk5hbWUnOiByZXR1cm4gKGNvbnRleHQpID0+IGdldEJ1aWx0aW4oaW5wdXQpOwogICAgICAgICAgLy8gcHJlc2VydmUgc3BhY2VzIGluIG5hbWUsIGJ1dCBjb21wYWN0IG11bHRpcGxlCiAgICAgICAgICAvLyBzcGFjZXMgaW50byBvbmUgKHRva2VuKQogICAgICAgICAgY2FzZSAnTmFtZSc6IHJldHVybiBpbnB1dC5yZXBsYWNlKC9cc3syLH0vZywgJyAnKTsKICAgICAgICAgIGNhc2UgJ1ZhcmlhYmxlTmFtZSc6IHJldHVybiAoY29udGV4dCkgPT4gewogICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBhcmdzLmpvaW4oJyAnKTsKICAgICAgICAgICAgICByZXR1cm4gZ2V0QnVpbHRpbihuYW1lKSB8fCBnZXRGcm9tQ29udGV4dChuYW1lLCBjb250ZXh0KTsKICAgICAgICAgIH07CiAgICAgICAgICBjYXNlICdRdWFsaWZpZWROYW1lJzogcmV0dXJuIChjb250ZXh0KSA9PiB7CiAgICAgICAgICAgICAgcmV0dXJuIGFyZ3MucmVkdWNlKChjb250ZXh0LCBhcmcpID0+IGFyZyhjb250ZXh0KSwgY29udGV4dCk7CiAgICAgICAgICB9OwogICAgICAgICAgY2FzZSAnPyc6IHJldHVybiAoY29udGV4dCkgPT4gZ2V0RnJvbUNvbnRleHQoJz8nLCBjb250ZXh0KTsKICAgICAgICAgIC8vIGV4cHJlc3Npb24KICAgICAgICAgIC8vIGV4cHJlc3Npb24gIi4uIiBleHByZXNzaW9uCiAgICAgICAgICBjYXNlICdJdGVyYXRpb25Db250ZXh0JzogcmV0dXJuIChjb250ZXh0KSA9PiB7CiAgICAgICAgICAgICAgY29uc3QgYSA9IGFyZ3NbMF0oY29udGV4dCk7CiAgICAgICAgICAgICAgY29uc3QgYiA9IGFyZ3NbMV0gJiYgYXJnc1sxXShjb250ZXh0KTsKICAgICAgICAgICAgICByZXR1cm4gYiA/IGNyZWF0ZVJhbmdlKGEsIGIpIDogYTsKICAgICAgICAgIH07CiAgICAgICAgICBjYXNlICdUeXBlJzogcmV0dXJuIGFyZ3NbMF07CiAgICAgICAgICBjYXNlICdJbkV4cHJlc3Npb25zJzogcmV0dXJuIChjb250ZXh0KSA9PiB7CiAgICAgICAgICAgICAgY29uc3QgaXRlcmF0aW9uQ29udGV4dHMgPSBhcmdzLm1hcChjdHggPT4gY3R4KGNvbnRleHQpKTsKICAgICAgICAgICAgICBpZiAoaXRlcmF0aW9uQ29udGV4dHMuc29tZShjdHggPT4gZ2V0VHlwZShjdHgpICE9PSAnbGlzdCcpKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICByZXR1cm4gY2FydGVzaWFuUHJvZHVjdChpdGVyYXRpb25Db250ZXh0cykubWFwKGN0eCA9PiB7CiAgICAgICAgICAgICAgICAgIGlmICghaXNBcnJheSQxKGN0eCkpIHsKICAgICAgICAgICAgICAgICAgICAgIGN0eCA9IFtjdHhdOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCBjb250ZXh0LCAuLi5jdHgpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgfTsKICAgICAgICAgIC8vIE5hbWUga3c8ImluIj4gRXhwcgogICAgICAgICAgY2FzZSAnSW5FeHByZXNzaW9uJzogcmV0dXJuIChjb250ZXh0KSA9PiB7CiAgICAgICAgICAgICAgcmV0dXJuIGV4dHJhY3RWYWx1ZShjb250ZXh0LCBhcmdzWzBdLCBhcmdzWzJdKTsKICAgICAgICAgIH07CiAgICAgICAgICBjYXNlICdTcGVjaWFsVHlwZSc6IHRocm93IG5vdEltcGxlbWVudGVkKCdTcGVjaWFsVHlwZScpOwogICAgICAgICAgY2FzZSAnSW5zdGFuY2VPZkV4cHJlc3Npb24nOiByZXR1cm4gdGFnKChjb250ZXh0KSA9PiB7CiAgICAgICAgICAgICAgY29uc3QgYSA9IGFyZ3NbMF0oY29udGV4dCk7CiAgICAgICAgICAgICAgY29uc3QgYiA9IGFyZ3NbM10oY29udGV4dCk7CiAgICAgICAgICAgICAgcmV0dXJuIGEgaW5zdGFuY2VvZiBiOwogICAgICAgICAgfSwgVGVzdCgnYm9vbGVhbicpKTsKICAgICAgICAgIGNhc2UgJ2V2ZXJ5JzogcmV0dXJuIHRhZygoY29udGV4dCkgPT4gewogICAgICAgICAgICAgIHJldHVybiAoX2NvbnRleHRzLCBfY29uZGl0aW9uKSA9PiB7CiAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRleHRzID0gX2NvbnRleHRzKGNvbnRleHQpOwogICAgICAgICAgICAgICAgICBpZiAoZ2V0VHlwZShjb250ZXh0cykgIT09ICdsaXN0JykgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRleHRzOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIHJldHVybiBjb250ZXh0cy5ldmVyeShjdHggPT4gaXNUcnV0aHkoX2NvbmRpdGlvbihjdHgpKSk7CiAgICAgICAgICAgICAgfTsKICAgICAgICAgIH0sIFRlc3QoJ2Jvb2xlYW4nKSk7CiAgICAgICAgICBjYXNlICdzb21lJzogcmV0dXJuIHRhZygoY29udGV4dCkgPT4gewogICAgICAgICAgICAgIHJldHVybiAoX2NvbnRleHRzLCBfY29uZGl0aW9uKSA9PiB7CiAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRleHRzID0gX2NvbnRleHRzKGNvbnRleHQpOwogICAgICAgICAgICAgICAgICBpZiAoZ2V0VHlwZShjb250ZXh0cykgIT09ICdsaXN0JykgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRleHRzOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIHJldHVybiBjb250ZXh0cy5zb21lKGN0eCA9PiBpc1RydXRoeShfY29uZGl0aW9uKGN0eCkpKTsKICAgICAgICAgICAgICB9OwogICAgICAgICAgfSwgVGVzdCgnYm9vbGVhbicpKTsKICAgICAgICAgIGNhc2UgJ051bWVyaWNMaXRlcmFsJzogcmV0dXJuIHRhZygoX2NvbnRleHQpID0+IGlucHV0LmluY2x1ZGVzKCcuJykgPyBwYXJzZUZsb2F0KGlucHV0KSA6IHBhcnNlSW50KGlucHV0KSwgJ251bWJlcicpOwogICAgICAgICAgY2FzZSAnQm9vbGVhbkxpdGVyYWwnOiByZXR1cm4gdGFnKChfY29udGV4dCkgPT4gaW5wdXQgPT09ICd0cnVlJyA/IHRydWUgOiBmYWxzZSwgJ2Jvb2xlYW4nKTsKICAgICAgICAgIGNhc2UgJ1N0cmluZ0xpdGVyYWwnOiByZXR1cm4gdGFnKChfY29udGV4dCkgPT4gcGFyc2VTdHJpbmcoaW5wdXQpLCAnc3RyaW5nJyk7CiAgICAgICAgICBjYXNlICdQb3NpdGlvbmFsUGFyYW1ldGVycyc6IHJldHVybiAoY29udGV4dCkgPT4gYXJncy5tYXAoYXJnID0+IGFyZyhjb250ZXh0KSk7CiAgICAgICAgICBjYXNlICdOYW1lZFBhcmFtZXRlcic6IHJldHVybiAoY29udGV4dCkgPT4gewogICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBhcmdzWzBdOwogICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gYXJnc1sxXShjb250ZXh0KTsKICAgICAgICAgICAgICByZXR1cm4gW25hbWUsIHZhbHVlXTsKICAgICAgICAgIH07CiAgICAgICAgICBjYXNlICdOYW1lZFBhcmFtZXRlcnMnOiByZXR1cm4gKGNvbnRleHQpID0+IGFyZ3MucmVkdWNlKChhcmdzLCBhcmcpID0+IHsKICAgICAgICAgICAgICBjb25zdCBbbmFtZSwgdmFsdWVdID0gYXJnKGNvbnRleHQpOwogICAgICAgICAgICAgIGFyZ3NbbmFtZV0gPSB2YWx1ZTsKICAgICAgICAgICAgICByZXR1cm4gYXJnczsKICAgICAgICAgIH0sIHt9KTsKICAgICAgICAgIGNhc2UgJ0RhdGVUaW1lQ29uc3RydWN0b3InOiByZXR1cm4gKGNvbnRleHQpID0+IHsKICAgICAgICAgICAgICByZXR1cm4gZ2V0QnVpbHRpbihpbnB1dCk7CiAgICAgICAgICB9OwogICAgICAgICAgY2FzZSAnRGF0ZVRpbWVMaXRlcmFsJzogcmV0dXJuIChjb250ZXh0KSA9PiB7CiAgICAgICAgICAgICAgLy8gQXRMaXRlcmFsCiAgICAgICAgICAgICAgaWYgKGFyZ3MubGVuZ3RoID09PSAxKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBhcmdzWzBdKGNvbnRleHQpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAvLyBGdW5jdGlvbkludm9jYXRpb24KICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgY29uc3Qgd3JhcHBlZEZuID0gd3JhcEZ1bmN0aW9uKGFyZ3NbMF0oY29udGV4dCkpOwogICAgICAgICAgICAgICAgICBpZiAoIXdyYXBwZWRGbikgewogICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZXZhbHVhdGUgJHtpbnB1dH06IFRhcmdldCBpcyBub3QgYSBmdW5jdGlvbmApOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRleHRPckFyZ3MgPSBhcmdzWzJdKGNvbnRleHQpOwogICAgICAgICAgICAgICAgICByZXR1cm4gd3JhcHBlZEZuLmludm9rZShjb250ZXh0T3JBcmdzKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICB9OwogICAgICAgICAgY2FzZSAnQXRMaXRlcmFsJzogcmV0dXJuIChjb250ZXh0KSA9PiB7CiAgICAgICAgICAgICAgY29uc3Qgd3JhcHBlZEZuID0gd3JhcEZ1bmN0aW9uKGdldEJ1aWx0aW4oJ0AnKSk7CiAgICAgICAgICAgICAgaWYgKCF3cmFwcGVkRm4pIHsKICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZXZhbHVhdGUgJHtpbnB1dH06IFRhcmdldCBpcyBub3QgYSBmdW5jdGlvbmApOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICByZXR1cm4gd3JhcHBlZEZuLmludm9rZShbYXJnc1swXShjb250ZXh0KV0pOwogICAgICAgICAgfTsKICAgICAgICAgIGNhc2UgJ0Z1bmN0aW9uSW52b2NhdGlvbic6IHJldHVybiAoY29udGV4dCkgPT4gewogICAgICAgICAgICAgIGNvbnN0IHdyYXBwZWRGbiA9IHdyYXBGdW5jdGlvbihhcmdzWzBdKGNvbnRleHQpKTsKICAgICAgICAgICAgICBpZiAoIXdyYXBwZWRGbikgewogICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBldmFsdWF0ZSAke2lucHV0fTogVGFyZ2V0IGlzIG5vdCBhIGZ1bmN0aW9uYCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGNvbnN0IGNvbnRleHRPckFyZ3MgPSBhcmdzWzJdKGNvbnRleHQpOwogICAgICAgICAgICAgIHJldHVybiB3cmFwcGVkRm4uaW52b2tlKGNvbnRleHRPckFyZ3MpOwogICAgICAgICAgfTsKICAgICAgICAgIGNhc2UgJ0lmRXhwcmVzc2lvbic6IHJldHVybiAoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIGNvbnN0IGlmQ29uZGl0aW9uID0gYXJnc1sxXTsKICAgICAgICAgICAgICBjb25zdCB0aGVuVmFsdWUgPSBhcmdzWzNdOwogICAgICAgICAgICAgIGNvbnN0IGVsc2VWYWx1ZSA9IGFyZ3NbNV07CiAgICAgICAgICAgICAgY29uc3QgdHlwZSA9IGNvYWxlY2Vuc2VUeXBlcyh0aGVuVmFsdWUsIGVsc2VWYWx1ZSk7CiAgICAgICAgICAgICAgcmV0dXJuIHRhZygoY29udGV4dCkgPT4gewogICAgICAgICAgICAgICAgICBpZiAoaXNUcnV0aHkoaWZDb25kaXRpb24oY29udGV4dCkpKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhlblZhbHVlKGNvbnRleHQpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsc2VWYWx1ZSA/IGVsc2VWYWx1ZShjb250ZXh0KSA6IG51bGw7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9LCB0eXBlKTsKICAgICAgICAgIH0pKCk7CiAgICAgICAgICBjYXNlICdQYXJhbWV0ZXJzJzogcmV0dXJuIGFyZ3MubGVuZ3RoID09PSAzID8gYXJnc1sxXSA6IChfY29udGV4dCkgPT4gW107CiAgICAgICAgICBjYXNlICdDb21wYXJpc29uJzogcmV0dXJuIChjb250ZXh0KSA9PiB7CiAgICAgICAgICAgICAgY29uc3Qgb3BlcmF0b3IgPSBhcmdzWzFdOwogICAgICAgICAgICAgIC8vIGV4cHJlc3Npb24gIWNvbXBhcmUga3c8ImluIj4gUG9zaXRpdmVVbmFyeVRlc3QgfAogICAgICAgICAgICAgIC8vIGV4cHJlc3Npb24gIWNvbXBhcmUga3c8ImluIj4gIXVuYXJ5VGVzdCAiKCIgUG9zaXRpdmVVbmFyeVRlc3RzICIpIgogICAgICAgICAgICAgIGlmIChvcGVyYXRvciA9PT0gJ2luJykgewogICAgICAgICAgICAgICAgICByZXR1cm4gY29tcGFyZUluKGFyZ3NbMF0oY29udGV4dCksIChhcmdzWzNdIHx8IGFyZ3NbMl0pKGNvbnRleHQpKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgLy8gZXhwcmVzc2lvbiAhY29tcGFyZSBrdzwiYmV0d2VlbiI+IGV4cHJlc3Npb24ga3c8ImFuZCI+IGV4cHJlc3Npb24KICAgICAgICAgICAgICBpZiAob3BlcmF0b3IgPT09ICdiZXR3ZWVuJykgewogICAgICAgICAgICAgICAgICBjb25zdCBzdGFydCA9IGFyZ3NbMl0oY29udGV4dCk7CiAgICAgICAgICAgICAgICAgIGNvbnN0IGVuZCA9IGFyZ3NbNF0oY29udGV4dCk7CiAgICAgICAgICAgICAgICAgIGlmIChzdGFydCA9PT0gbnVsbCB8fCBlbmQgPT09IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIHJldHVybiBjcmVhdGVSYW5nZShzdGFydCwgZW5kKS5pbmNsdWRlcyhhcmdzWzBdKGNvbnRleHQpKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgLy8gZXhwcmVzc2lvbiAhY29tcGFyZSBDb21wYXJlT3A8Ij0iIHwgIiE9Ij4gZXhwcmVzc2lvbiB8CiAgICAgICAgICAgICAgLy8gZXhwcmVzc2lvbiAhY29tcGFyZSBDb21wYXJlT3A8R3QgfCBHdGUgfCBMdCB8IEx0ZT4gZXhwcmVzc2lvbiB8CiAgICAgICAgICAgICAgY29uc3QgbGVmdCA9IGFyZ3NbMF0oY29udGV4dCk7CiAgICAgICAgICAgICAgY29uc3QgcmlnaHQgPSBhcmdzWzJdKGNvbnRleHQpOwogICAgICAgICAgICAgIGNvbnN0IHRlc3QgPSBvcGVyYXRvcigpKHJpZ2h0KTsKICAgICAgICAgICAgICByZXR1cm4gY29tcGFyZVZhbHVlKHRlc3QsIGxlZnQpOwogICAgICAgICAgfTsKICAgICAgICAgIGNhc2UgJ1F1YW50aWZpZWRFeHByZXNzaW9uJzogcmV0dXJuIChjb250ZXh0KSA9PiB7CiAgICAgICAgICAgICAgY29uc3QgdGVzdEZuID0gYXJnc1swXShjb250ZXh0KTsKICAgICAgICAgICAgICBjb25zdCBjb250ZXh0cyA9IGFyZ3NbMV07CiAgICAgICAgICAgICAgY29uc3QgY29uZGl0aW9uID0gYXJnc1szXTsKICAgICAgICAgICAgICByZXR1cm4gdGVzdEZuKGNvbnRleHRzLCBjb25kaXRpb24pOwogICAgICAgICAgfTsKICAgICAgICAgIC8vIERNTiAxLjIgLSAxMC4zLjIuMTQKICAgICAgICAgIC8vIGt3PCJmb3IiPiBjb21tYVNlcDE8SW5FeHByZXNzaW9uPEl0ZXJhdGlvbkNvbnRleHQ+PiBrdzwicmV0dXJuIj4gZXhwcmVzc2lvbgogICAgICAgICAgY2FzZSAnRm9yRXhwcmVzc2lvbic6IHJldHVybiAoY29udGV4dCkgPT4gewogICAgICAgICAgICAgIGNvbnN0IGV4dHJhY3RvciA9IGFyZ3NbYXJncy5sZW5ndGggLSAxXTsKICAgICAgICAgICAgICBjb25zdCBpdGVyYXRpb25Db250ZXh0cyA9IGFyZ3NbMV0oY29udGV4dCk7CiAgICAgICAgICAgICAgaWYgKGdldFR5cGUoaXRlcmF0aW9uQ29udGV4dHMpICE9PSAnbGlzdCcpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZXJhdGlvbkNvbnRleHRzOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBjb25zdCBwYXJ0aWFsID0gW107CiAgICAgICAgICAgICAgZm9yIChjb25zdCBjdHggb2YgaXRlcmF0aW9uQ29udGV4dHMpIHsKICAgICAgICAgICAgICAgICAgcGFydGlhbC5wdXNoKGV4dHJhY3RvcihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGN0eCksIHsgcGFydGlhbCB9KSkpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICByZXR1cm4gcGFydGlhbDsKICAgICAgICAgIH07CiAgICAgICAgICBjYXNlICdBcml0aG1ldGljRXhwcmVzc2lvbic6IHJldHVybiAoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIC8vIGJpbmFyeSBleHByZXNzaW9uIChhICsgYikKICAgICAgICAgICAgICBpZiAoYXJncy5sZW5ndGggPT09IDMpIHsKICAgICAgICAgICAgICAgICAgY29uc3QgW2EsIG9wLCBiXSA9IGFyZ3M7CiAgICAgICAgICAgICAgICAgIHJldHVybiB0YWcoKGNvbnRleHQpID0+IHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvcChjb250ZXh0KShhLCBiKTsKICAgICAgICAgICAgICAgICAgfSwgY29hbGVjZW5zZVR5cGVzKGEsIGIpKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgLy8gdW5hcnkgZXhwcmVzc2lvbiAoLWIpCiAgICAgICAgICAgICAgaWYgKGFyZ3MubGVuZ3RoID09PSAyKSB7CiAgICAgICAgICAgICAgICAgIGNvbnN0IFtvcCwgdmFsdWVdID0gYXJnczsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhZygoY29udGV4dCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9wKGNvbnRleHQpKCgpID0+IDAsIHZhbHVlKTsKICAgICAgICAgICAgICAgICAgfSwgdmFsdWUudHlwZSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgfSkoKTsKICAgICAgICAgIGNhc2UgJ1Bvc2l0aXZlVW5hcnlUZXN0JzogcmV0dXJuIGFyZ3NbMF07CiAgICAgICAgICBjYXNlICdQYXJlbnRoZXNpemVkRXhwcmVzc2lvbic6IHJldHVybiBhcmdzWzFdOwogICAgICAgICAgY2FzZSAnUGF0aEV4cHJlc3Npb24nOiByZXR1cm4gKGNvbnRleHQpID0+IHsKICAgICAgICAgICAgICBjb25zdCBwYXRoVGFyZ2V0ID0gYXJnc1swXShjb250ZXh0KTsKICAgICAgICAgICAgICBjb25zdCBwYXRoUHJvcCA9IGFyZ3NbMV07CiAgICAgICAgICAgICAgaWYgKGlzQXJyYXkkMShwYXRoVGFyZ2V0KSkgewogICAgICAgICAgICAgICAgICByZXR1cm4gY29lcmNlU2luZ2xldG9uKHBhdGhUYXJnZXQubWFwKHBhdGhQcm9wKSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICByZXR1cm4gcGF0aFByb3AocGF0aFRhcmdldCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgfTsKICAgICAgICAgIC8vIGV4cHJlc3Npb24gIWZpbHRlciAiWyIgZXhwcmVzc2lvbiAiXSIKICAgICAgICAgIGNhc2UgJ0ZpbHRlckV4cHJlc3Npb24nOiByZXR1cm4gKGNvbnRleHQpID0+IHsKICAgICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBhcmdzWzBdKGNvbnRleHQpOwogICAgICAgICAgICAgIGNvbnN0IGZpbHRlckZuID0gYXJnc1syXTsKICAgICAgICAgICAgICBjb25zdCBmaWx0ZXJUYXJnZXQgPSBpc0FycmF5JDEodGFyZ2V0KSA/IHRhcmdldCA6IFt0YXJnZXRdOwogICAgICAgICAgICAgIC8vIG51bGxbLi5dCiAgICAgICAgICAgICAgaWYgKHRhcmdldCA9PT0gbnVsbCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgLy8gYVsxXQogICAgICAgICAgICAgIGlmIChmaWx0ZXJGbi50eXBlID09PSAnbnVtYmVyJykgewogICAgICAgICAgICAgICAgICBjb25zdCBpZHggPSBmaWx0ZXJGbihjb250ZXh0KTsKICAgICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBmaWx0ZXJUYXJnZXRbaWR4IDwgMCA/IGZpbHRlclRhcmdldC5sZW5ndGggKyBpZHggOiBpZHggLSAxXTsKICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIC8vIGFbdHJ1ZV0KICAgICAgICAgICAgICBpZiAoZmlsdGVyRm4udHlwZSA9PT0gJ2Jvb2xlYW4nKSB7CiAgICAgICAgICAgICAgICAgIGlmIChmaWx0ZXJGbihjb250ZXh0KSkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpbHRlclRhcmdldDsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbXTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoZmlsdGVyRm4udHlwZSA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBmaWx0ZXJGbihjb250ZXh0KTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpbHRlclRhcmdldC5maWx0ZXIoZWwgPT4gZWwgPT09IHZhbHVlKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgLy8gYVt0ZXN0XQogICAgICAgICAgICAgIHJldHVybiBmaWx0ZXJUYXJnZXQubWFwKGVsID0+IHsKICAgICAgICAgICAgICAgICAgY29uc3QgaXRlcmF0aW9uQ29udGV4dCA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBjb250ZXh0KSwgeyBpdGVtOiBlbCB9KSwgZWwpOwogICAgICAgICAgICAgICAgICBsZXQgcmVzdWx0ID0gZmlsdGVyRm4oaXRlcmF0aW9uQ29udGV4dCk7CiAgICAgICAgICAgICAgICAgIC8vIHRlc3QgaXMgZm4odmFsKSA9PiBib29sZWFuIFNpbXBsZVVuYXJ5VGVzdAogICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlc3VsdCA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0KGVsKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgUmFuZ2UpIHsKICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdC5pbmNsdWRlcyhlbCk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gdHJ1ZSkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgICAgICAgfSkuZmlsdGVyKGlzVHJ1dGh5KTsKICAgICAgICAgIH07CiAgICAgICAgICBjYXNlICdTaW1wbGVQb3NpdGl2ZVVuYXJ5VGVzdCc6IHJldHVybiB0YWcoKGNvbnRleHQpID0+IHsKICAgICAgICAgICAgICAvLyA8SW50ZXJ2YWw+CiAgICAgICAgICAgICAgaWYgKGFyZ3MubGVuZ3RoID09PSAxKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBhcmdzWzBdKGNvbnRleHQpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAvLyA8Q29tcGFyZU9wPiA8RXhwcj4KICAgICAgICAgICAgICByZXR1cm4gYXJnc1swXShjb250ZXh0KShhcmdzWzFdKGNvbnRleHQpKTsKICAgICAgICAgIH0sICd0ZXN0Jyk7CiAgICAgICAgICBjYXNlICdMaXN0JzogcmV0dXJuIChjb250ZXh0KSA9PiB7CiAgICAgICAgICAgICAgcmV0dXJuIGFyZ3Muc2xpY2UoMSwgLTEpLm1hcChhcmcgPT4gYXJnKGNvbnRleHQpKTsKICAgICAgICAgIH07CiAgICAgICAgICBjYXNlICdJbnRlcnZhbCc6IHJldHVybiB0YWcoKGNvbnRleHQpID0+IHsKICAgICAgICAgICAgICBjb25zdCBsZWZ0ID0gYXJnc1sxXShjb250ZXh0KTsKICAgICAgICAgICAgICBjb25zdCByaWdodCA9IGFyZ3NbMl0oY29udGV4dCk7CiAgICAgICAgICAgICAgY29uc3Qgc3RhcnRJbmNsdWRlZCA9IGxlZnQgIT09IG51bGwgJiYgYXJnc1swXSA9PT0gJ1snOwogICAgICAgICAgICAgIGNvbnN0IGVuZEluY2x1ZGVkID0gcmlnaHQgIT09IG51bGwgJiYgYXJnc1szXSA9PT0gJ10nOwogICAgICAgICAgICAgIHJldHVybiBjcmVhdGVSYW5nZShsZWZ0LCByaWdodCwgc3RhcnRJbmNsdWRlZCwgZW5kSW5jbHVkZWQpOwogICAgICAgICAgfSwgVGVzdCgnYm9vbGVhbicpKTsKICAgICAgICAgIGNhc2UgJ1Bvc2l0aXZlVW5hcnlUZXN0cyc6CiAgICAgICAgICBjYXNlICdFeHByZXNzaW9ucyc6IHJldHVybiAoY29udGV4dCkgPT4gewogICAgICAgICAgICAgIHJldHVybiBhcmdzLm1hcChhID0+IGEoY29udGV4dCkpOwogICAgICAgICAgfTsKICAgICAgICAgIGNhc2UgJ1VuYXJ5VGVzdHMnOiByZXR1cm4gKGNvbnRleHQpID0+IHsKICAgICAgICAgICAgICByZXR1cm4gKHZhbHVlID0gbnVsbCkgPT4gewogICAgICAgICAgICAgICAgICBjb25zdCBuZWdhdGUgPSBhcmdzWzBdID09PSAnbm90JzsKICAgICAgICAgICAgICAgICAgY29uc3QgdGVzdHMgPSBuZWdhdGUgPyBhcmdzLnNsaWNlKDIsIC0xKSA6IGFyZ3M7CiAgICAgICAgICAgICAgICAgIGNvbnN0IG1hdGNoZXMgPSB0ZXN0cy5tYXAodGVzdCA9PiB0ZXN0KGNvbnRleHQpKS5mbGF0KDEpLm1hcCh0ZXN0ID0+IHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0FycmF5JDEodGVzdCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVzdC5pbmNsdWRlcyh2YWx1ZSk7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICBpZiAodGVzdCA9PT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0ZXN0ID09PSAnYm9vbGVhbicpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVzdDsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb21wYXJlVmFsdWUodGVzdCwgdmFsdWUpOwogICAgICAgICAgICAgICAgICB9KS5yZWR1Y2UoY29tYmluZVJlc3VsdCwgdW5kZWZpbmVkKTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIG1hdGNoZXMgPT09IG51bGwgPyBudWxsIDogKG5lZ2F0ZSA/ICFtYXRjaGVzIDogbWF0Y2hlcyk7CiAgICAgICAgICAgICAgfTsKICAgICAgICAgIH07CiAgICAgICAgICBkZWZhdWx0OiByZXR1cm4gbm9kZS5uYW1lOwogICAgICB9CiAgfQogIGZ1bmN0aW9uIGdldEJ1aWx0aW4obmFtZSwgX2NvbnRleHQpIHsKICAgICAgcmV0dXJuIGdldEZyb21Db250ZXh0KG5hbWUsIGJ1aWx0aW5zKTsKICB9CiAgZnVuY3Rpb24gZXh0cmFjdFZhbHVlKGNvbnRleHQsIHByb3AsIF90YXJnZXQpIHsKICAgICAgY29uc3QgdGFyZ2V0ID0gX3RhcmdldChjb250ZXh0KTsKICAgICAgaWYgKFsnbGlzdCcsICdyYW5nZSddLmluY2x1ZGVzKGdldFR5cGUodGFyZ2V0KSkpIHsKICAgICAgICAgIHJldHVybiB0YXJnZXQubWFwKHQgPT4gKHsgW3Byb3BdOiB0IH0pKTsKICAgICAgfQogICAgICByZXR1cm4gbnVsbDsKICB9CiAgZnVuY3Rpb24gY29tcGFyZUluKHZhbHVlLCB0ZXN0cykgewogICAgICBpZiAoIWlzQXJyYXkkMSh0ZXN0cykpIHsKICAgICAgICAgIGlmIChnZXRUeXBlKHRlc3RzKSA9PT0gJ25pbCcpIHsKICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgIH0KICAgICAgICAgIHRlc3RzID0gW3Rlc3RzXTsKICAgICAgfQogICAgICByZXR1cm4gdGVzdHMuc29tZSh0ZXN0ID0+IGNvbXBhcmVWYWx1ZSh0ZXN0LCB2YWx1ZSkpOwogIH0KICBmdW5jdGlvbiBjb21wYXJlVmFsdWUodGVzdCwgdmFsdWUpIHsKICAgICAgaWYgKHR5cGVvZiB0ZXN0ID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICByZXR1cm4gdGVzdCh2YWx1ZSk7CiAgICAgIH0KICAgICAgaWYgKHRlc3QgaW5zdGFuY2VvZiBSYW5nZSkgewogICAgICAgICAgcmV0dXJuIHRlc3QuaW5jbHVkZXModmFsdWUpOwogICAgICB9CiAgICAgIHJldHVybiBlcXVhbHModGVzdCwgdmFsdWUpOwogIH0KICBjb25zdCBjaGFycyA9IEFycmF5LmZyb20oJ2FiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVonKTsKICBmdW5jdGlvbiBpc1R5cGVkKHR5cGUsIHZhbHVlcykgewogICAgICByZXR1cm4gKHZhbHVlcy5zb21lKGUgPT4gZ2V0VHlwZShlKSA9PT0gdHlwZSkgJiYKICAgICAgICAgIHZhbHVlcy5ldmVyeShlID0+IGUgPT09IG51bGwgfHwgZ2V0VHlwZShlKSA9PT0gdHlwZSkpOwogIH0KICBmdW5jdGlvbiBjcmVhdGVSYW5nZShzdGFydCwgZW5kLCBzdGFydEluY2x1ZGVkID0gdHJ1ZSwgZW5kSW5jbHVkZWQgPSB0cnVlKSB7CiAgICAgIGlmIChpc1R5cGVkKCdzdHJpbmcnLCBbc3RhcnQsIGVuZF0pKSB7CiAgICAgICAgICByZXR1cm4gY3JlYXRlU3RyaW5nUmFuZ2Uoc3RhcnQsIGVuZCwgc3RhcnRJbmNsdWRlZCwgZW5kSW5jbHVkZWQpOwogICAgICB9CiAgICAgIGlmIChpc1R5cGVkKCdudW1iZXInLCBbc3RhcnQsIGVuZF0pKSB7CiAgICAgICAgICByZXR1cm4gY3JlYXRlTnVtYmVyUmFuZ2Uoc3RhcnQsIGVuZCwgc3RhcnRJbmNsdWRlZCwgZW5kSW5jbHVkZWQpOwogICAgICB9CiAgICAgIGlmIChpc1R5cGVkKCdkdXJhdGlvbicsIFtzdGFydCwgZW5kXSkpIHsKICAgICAgICAgIHRocm93IG5vdEltcGxlbWVudGVkKCdyYW5nZTxkdXJhdGlvbj4nKTsKICAgICAgfQogICAgICBpZiAoaXNUeXBlZCgndGltZScsIFtzdGFydCwgZW5kXSkpIHsKICAgICAgICAgIHRocm93IG5vdEltcGxlbWVudGVkKCdyYW5nZTx0aW1lPicpOwogICAgICB9CiAgICAgIGlmIChpc1R5cGVkKCdkYXRlIHRpbWUnLCBbc3RhcnQsIGVuZF0pKSB7CiAgICAgICAgICB0aHJvdyBub3RJbXBsZW1lbnRlZCgncmFuZ2U8ZGF0ZSBhbmQgdGltZT4nKTsKICAgICAgfQogICAgICBpZiAoaXNUeXBlZCgnZGF0ZScsIFtzdGFydCwgZW5kXSkpIHsKICAgICAgICAgIHRocm93IG5vdEltcGxlbWVudGVkKCdyYW5nZTxkYXRlPicpOwogICAgICB9CiAgICAgIHRocm93IG5ldyBFcnJvcihgdW5zdXBwb3J0ZWQgcmFuZ2U6ICR7c3RhcnR9Li4ke2VuZH1gKTsKICB9CiAgZnVuY3Rpb24gbm9vcE1hcCgpIHsKICAgICAgcmV0dXJuICgpID0+IHsKICAgICAgICAgIHRocm93IG5ldyBFcnJvcigndW5zdXBwb3J0ZWQgcmFuZ2Ugb3BlcmF0aW9uOiBtYXAnKTsKICAgICAgfTsKICB9CiAgZnVuY3Rpb24gdmFsdWVzTWFwKHZhbHVlcykgewogICAgICByZXR1cm4gKGZuKSA9PiB2YWx1ZXMubWFwKGZuKTsKICB9CiAgZnVuY3Rpb24gdmFsdWVzSW5jbHVkZXModmFsdWVzKSB7CiAgICAgIHJldHVybiAodmFsdWUpID0+IHZhbHVlcy5pbmNsdWRlcyh2YWx1ZSk7CiAgfQogIGZ1bmN0aW9uIG51bWJlck1hcChzdGFydCwgZW5kLCBzdGFydEluY2x1ZGVkLCBlbmRJbmNsdWRlZCkgewogICAgICBjb25zdCBkaXJlY3Rpb24gPSBzdGFydCA+IGVuZCA/IC0xIDogMTsKICAgICAgcmV0dXJuIChmbikgPT4gewogICAgICAgICAgY29uc3QgcmVzdWx0ID0gW107CiAgICAgICAgICBmb3IgKGxldCBpID0gc3RhcnQ7OyBpICs9IGRpcmVjdGlvbikgewogICAgICAgICAgICAgIGlmIChpID09PSAwICYmICFzdGFydEluY2x1ZGVkKSB7CiAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoaSA9PT0gZW5kICYmICFlbmRJbmNsdWRlZCkgewogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcmVzdWx0LnB1c2goZm4oaSkpOwogICAgICAgICAgICAgIGlmIChpID09PSBlbmQpIHsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgfTsKICB9CiAgZnVuY3Rpb24gaW5jbHVkZXNTdGFydChuLCBpbmNsdXNpdmUpIHsKICAgICAgaWYgKGluY2x1c2l2ZSkgewogICAgICAgICAgcmV0dXJuICh2YWx1ZSkgPT4gbiA8PSB2YWx1ZTsKICAgICAgfQogICAgICBlbHNlIHsKICAgICAgICAgIHJldHVybiAodmFsdWUpID0+IG4gPCB2YWx1ZTsKICAgICAgfQogIH0KICBmdW5jdGlvbiBpbmNsdWRlc0VuZChuLCBpbmNsdXNpdmUpIHsKICAgICAgaWYgKGluY2x1c2l2ZSkgewogICAgICAgICAgcmV0dXJuICh2YWx1ZSkgPT4gbiA+PSB2YWx1ZTsKICAgICAgfQogICAgICBlbHNlIHsKICAgICAgICAgIHJldHVybiAodmFsdWUpID0+IG4gPiB2YWx1ZTsKICAgICAgfQogIH0KICBmdW5jdGlvbiBhbnlJbmNsdWRlcyhzdGFydCwgZW5kLCBzdGFydEluY2x1ZGVkLCBlbmRJbmNsdWRlZCkgewogICAgICBsZXQgdGVzdHMgPSBbXTsKICAgICAgaWYgKHN0YXJ0ICE9PSBudWxsICYmIGVuZCAhPT0gbnVsbCkgewogICAgICAgICAgaWYgKHN0YXJ0ID4gZW5kKSB7CiAgICAgICAgICAgICAgdGVzdHMgPSBbCiAgICAgICAgICAgICAgICAgIGluY2x1ZGVzU3RhcnQoZW5kLCBlbmRJbmNsdWRlZCksCiAgICAgICAgICAgICAgICAgIGluY2x1ZGVzRW5kKHN0YXJ0LCBzdGFydEluY2x1ZGVkKQogICAgICAgICAgICAgIF07CiAgICAgICAgICB9CiAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICB0ZXN0cyA9IFsKICAgICAgICAgICAgICAgICAgaW5jbHVkZXNTdGFydChzdGFydCwgc3RhcnRJbmNsdWRlZCksCiAgICAgICAgICAgICAgICAgIGluY2x1ZGVzRW5kKGVuZCwgZW5kSW5jbHVkZWQpCiAgICAgICAgICAgICAgXTsKICAgICAgICAgIH0KICAgICAgfQogICAgICBlbHNlIGlmIChlbmQgIT09IG51bGwpIHsKICAgICAgICAgIHRlc3RzID0gWwogICAgICAgICAgICAgIGluY2x1ZGVzRW5kKGVuZCwgZW5kSW5jbHVkZWQpCiAgICAgICAgICBdOwogICAgICB9CiAgICAgIGVsc2UgaWYgKHN0YXJ0ICE9PSBudWxsKSB7CiAgICAgICAgICB0ZXN0cyA9IFsKICAgICAgICAgICAgICBpbmNsdWRlc1N0YXJ0KHN0YXJ0LCBzdGFydEluY2x1ZGVkKQogICAgICAgICAgXTsKICAgICAgfQogICAgICByZXR1cm4gKHZhbHVlKSA9PiB0ZXN0cy5ldmVyeSh0ID0+IHQodmFsdWUpKTsKICB9CiAgZnVuY3Rpb24gY3JlYXRlU3RyaW5nUmFuZ2Uoc3RhcnQsIGVuZCwgc3RhcnRJbmNsdWRlZCA9IHRydWUsIGVuZEluY2x1ZGVkID0gdHJ1ZSkgewogICAgICBpZiAoc3RhcnQgIT09IG51bGwgJiYgIWNoYXJzLmluY2x1ZGVzKHN0YXJ0KSkgewogICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdpbGxlZ2FsIHJhbmdlIHN0YXJ0OiAnICsgc3RhcnQpOwogICAgICB9CiAgICAgIGlmIChlbmQgIT09IG51bGwgJiYgIWNoYXJzLmluY2x1ZGVzKGVuZCkpIHsKICAgICAgICAgIHRocm93IG5ldyBFcnJvcignaWxsZWdhbCByYW5nZSBlbmQ6ICcgKyBlbmQpOwogICAgICB9CiAgICAgIGxldCB2YWx1ZXM7CiAgICAgIGlmIChzdGFydCAhPT0gbnVsbCAmJiBlbmQgIT09IG51bGwpIHsKICAgICAgICAgIGxldCBzdGFydElkeCA9IGNoYXJzLmluZGV4T2Yoc3RhcnQpOwogICAgICAgICAgbGV0IGVuZElkeCA9IGNoYXJzLmluZGV4T2YoZW5kKTsKICAgICAgICAgIGNvbnN0IGRpcmVjdGlvbiA9IHN0YXJ0SWR4ID4gZW5kSWR4ID8gLTEgOiAxOwogICAgICAgICAgaWYgKHN0YXJ0SW5jbHVkZWQgPT09IGZhbHNlKSB7CiAgICAgICAgICAgICAgc3RhcnRJZHggKz0gZGlyZWN0aW9uOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGVuZEluY2x1ZGVkID09PSBmYWxzZSkgewogICAgICAgICAgICAgIGVuZElkeCAtPSBkaXJlY3Rpb247CiAgICAgICAgICB9CiAgICAgICAgICB2YWx1ZXMgPSBjaGFycy5zbGljZShzdGFydElkeCwgZW5kSWR4ICsgMSk7CiAgICAgIH0KICAgICAgY29uc3QgbWFwID0gdmFsdWVzID8gdmFsdWVzTWFwKHZhbHVlcykgOiBub29wTWFwKCk7CiAgICAgIGNvbnN0IGluY2x1ZGVzID0gdmFsdWVzID8gdmFsdWVzSW5jbHVkZXModmFsdWVzKSA6IGFueUluY2x1ZGVzKHN0YXJ0LCBlbmQsIHN0YXJ0SW5jbHVkZWQsIGVuZEluY2x1ZGVkKTsKICAgICAgcmV0dXJuIG5ldyBSYW5nZSh7CiAgICAgICAgICBzdGFydCwKICAgICAgICAgIGVuZCwKICAgICAgICAgICdzdGFydCBpbmNsdWRlZCc6IHN0YXJ0SW5jbHVkZWQsCiAgICAgICAgICAnZW5kIGluY2x1ZGVkJzogZW5kSW5jbHVkZWQsCiAgICAgICAgICBtYXAsCiAgICAgICAgICBpbmNsdWRlcwogICAgICB9KTsKICB9CiAgZnVuY3Rpb24gY3JlYXRlTnVtYmVyUmFuZ2Uoc3RhcnQsIGVuZCwgc3RhcnRJbmNsdWRlZCwgZW5kSW5jbHVkZWQpIHsKICAgICAgY29uc3QgbWFwID0gc3RhcnQgIT09IG51bGwgJiYgZW5kICE9PSBudWxsID8gbnVtYmVyTWFwKHN0YXJ0LCBlbmQsIHN0YXJ0SW5jbHVkZWQsIGVuZEluY2x1ZGVkKSA6IG5vb3BNYXAoKTsKICAgICAgY29uc3QgaW5jbHVkZXMgPSBhbnlJbmNsdWRlcyhzdGFydCwgZW5kLCBzdGFydEluY2x1ZGVkLCBlbmRJbmNsdWRlZCk7CiAgICAgIHJldHVybiBuZXcgUmFuZ2UoewogICAgICAgICAgc3RhcnQsCiAgICAgICAgICBlbmQsCiAgICAgICAgICAnc3RhcnQgaW5jbHVkZWQnOiBzdGFydEluY2x1ZGVkLAogICAgICAgICAgJ2VuZCBpbmNsdWRlZCc6IGVuZEluY2x1ZGVkLAogICAgICAgICAgbWFwLAogICAgICAgICAgaW5jbHVkZXMKICAgICAgfSk7CiAgfQogIGZ1bmN0aW9uIGNhcnRlc2lhblByb2R1Y3QoYXJyYXlzKSB7CiAgICAgIGlmIChhcnJheXMuc29tZShhcnIgPT4gZ2V0VHlwZShhcnIpID09PSAnbmlsJykpIHsKICAgICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICAgIGNvbnN0IGYgPSAoYSwgYikgPT4gW10uY29uY2F0KC4uLmEubWFwKGQgPT4gYi5tYXAoZSA9PiBbXS5jb25jYXQoZCwgZSkpKSk7CiAgICAgIGNvbnN0IGNhcnRlc2lhbiA9IChhLCBiLCAuLi5jKSA9PiAoYiA/IGNhcnRlc2lhbihmKGEsIGIpLCAuLi5jKSA6IGEgfHwgW10pOwogICAgICByZXR1cm4gY2FydGVzaWFuKC4uLmFycmF5cyk7CiAgfQogIGZ1bmN0aW9uIGNvYWxlY2Vuc2VUeXBlcyhhLCBiKSB7CiAgICAgIGlmICghYikgewogICAgICAgICAgcmV0dXJuIGEudHlwZTsKICAgICAgfQogICAgICBpZiAoYS50eXBlID09PSBiLnR5cGUpIHsKICAgICAgICAgIHJldHVybiBhLnR5cGU7CiAgICAgIH0KICAgICAgcmV0dXJuICdhbnknOwogIH0KICBmdW5jdGlvbiB0YWcoZm4sIHR5cGUpIHsKICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oZm4sIHsKICAgICAgICAgIHR5cGUsCiAgICAgICAgICB0b1N0cmluZygpIHsKICAgICAgICAgICAgICByZXR1cm4gYFRhZ2dlZEZ1bmN0aW9uWyR7dHlwZX1dICR7RnVuY3Rpb24ucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZm4pfWA7CiAgICAgICAgICB9CiAgICAgIH0pOwogIH0KICBmdW5jdGlvbiBjb21iaW5lUmVzdWx0KHJlc3VsdCwgbWF0Y2gpIHsKICAgICAgaWYgKCFyZXN1bHQpIHsKICAgICAgICAgIHJldHVybiBtYXRjaDsKICAgICAgfQogICAgICByZXR1cm4gcmVzdWx0OwogIH0KICBmdW5jdGlvbiBpc1RydXRoeShvYmopIHsKICAgICAgcmV0dXJuIG9iaiAhPT0gZmFsc2UgJiYgb2JqICE9PSBudWxsOwogIH0KICBmdW5jdGlvbiBUZXN0KHR5cGUpIHsKICAgICAgcmV0dXJuIGBUZXN0PCR7dHlwZX0+YDsKICB9CiAgLyoqCiAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4KICAgKiBAcGFyYW0ge3N0cmluZ1tdfSBbcGFyYW1ldGVyTmFtZXNdCiAgICoKICAgKiBAcmV0dXJuIHtGdW5jdGlvbldyYXBwZXJ9CiAgICovCiAgZnVuY3Rpb24gd3JhcEZ1bmN0aW9uKGZuLCBwYXJhbWV0ZXJOYW1lcyA9IG51bGwpIHsKICAgICAgaWYgKCFmbikgewogICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KICAgICAgaWYgKGZuIGluc3RhbmNlb2YgRnVuY3Rpb25XcmFwcGVyKSB7CiAgICAgICAgICByZXR1cm4gZm47CiAgICAgIH0KICAgICAgaWYgKGZuIGluc3RhbmNlb2YgUmFuZ2UpIHsKICAgICAgICAgIHJldHVybiBuZXcgRnVuY3Rpb25XcmFwcGVyKCh2YWx1ZSkgPT4gZm4uaW5jbHVkZXModmFsdWUpLCBbJ3ZhbHVlJ10pOwogICAgICB9CiAgICAgIHJldHVybiBuZXcgRnVuY3Rpb25XcmFwcGVyKGZuLCBwYXJhbWV0ZXJOYW1lcyB8fCBwYXJzZVBhcmFtZXRlck5hbWVzKGZuKSk7CiAgfQogIGZ1bmN0aW9uIGNvZXJjZVNpbmdsZXRvbih2YWx1ZXMpIHsKICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWVzKSAmJiB2YWx1ZXMubGVuZ3RoID09PSAxKSB7CiAgICAgICAgICByZXR1cm4gdmFsdWVzWzBdOwogICAgICB9CiAgICAgIGVsc2UgewogICAgICAgICAgcmV0dXJuIHZhbHVlczsKICAgICAgfQogIH0KICBmdW5jdGlvbiBwYXJzZVN0cmluZyhzdHIpIHsKICAgICAgaWYgKHN0ci5zdGFydHNXaXRoKCciJykpIHsKICAgICAgICAgIHN0ciA9IHN0ci5zbGljZSgxKTsKICAgICAgfQogICAgICBpZiAoc3RyLmVuZHNXaXRoKCciJykpIHsKICAgICAgICAgIHN0ciA9IHN0ci5zbGljZSgwLCAtMSk7CiAgICAgIH0KICAgICAgcmV0dXJuIHN0ci5yZXBsYWNlKC8oXFwiKXwoXFxcXCl8KFxcdVthLWZBLUYwLTldezUsNn0pfCgoPzpcXHVbYS1mQS1GMC05XXsxLDR9KSspL2lnLCBmdW5jdGlvbiAoc3Vic3RyaW5nLCAuLi5ncm91cHMpIHsKICAgICAgICAgIGNvbnN0IFtxdW90ZXMsIGVzY2FwZSwgY29kZVBvaW50LCBjaGFyQ29kZXNdID0gZ3JvdXBzOwogICAgICAgICAgaWYgKHF1b3RlcykgewogICAgICAgICAgICAgIHJldHVybiAnIic7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoZXNjYXBlKSB7CiAgICAgICAgICAgICAgcmV0dXJuICdcXCc7CiAgICAgICAgICB9CiAgICAgICAgICBjb25zdCBlc2NhcGVQYXR0ZXJuID0gL1xcdShbYS1mQS1GMC05XSspL2lnOwogICAgICAgICAgaWYgKGNvZGVQb2ludCkgewogICAgICAgICAgICAgIGNvbnN0IGNvZGVQb2ludE1hdGNoID0gZXNjYXBlUGF0dGVybi5leGVjKGNvZGVQb2ludCk7CiAgICAgICAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ29kZVBvaW50KHBhcnNlSW50KGNvZGVQb2ludE1hdGNoWzFdLCAxNikpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGNoYXJDb2RlcykgewogICAgICAgICAgICAgIGNvbnN0IGNoYXJzID0gW107CiAgICAgICAgICAgICAgbGV0IGNoYXJDb2RlTWF0Y2g7CiAgICAgICAgICAgICAgd2hpbGUgKChjaGFyQ29kZU1hdGNoID0gZXNjYXBlUGF0dGVybi5leGVjKHN1YnN0cmluZykpICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgICAgIGNoYXJzLnB1c2gocGFyc2VJbnQoY2hhckNvZGVNYXRjaFsxXSwgMTYpKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoLi4uY2hhcnMpOwogICAgICAgICAgfQogICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdpbGxlZ2FsIG1hdGNoJyk7CiAgICAgIH0pOwogIH0KCiAgLyoNCiAgICogIGJpZy5qcyB2Ni4yLjENCiAgICogIEEgc21hbGwsIGZhc3QsIGVhc3ktdG8tdXNlIGxpYnJhcnkgZm9yIGFyYml0cmFyeS1wcmVjaXNpb24gZGVjaW1hbCBhcml0aG1ldGljLg0KICAgKiAgQ29weXJpZ2h0IChjKSAyMDIyIE1pY2hhZWwgTWNsYXVnaGxpbg0KICAgKiAgaHR0cHM6Ly9naXRodWIuY29tL01pa2VNY2wvYmlnLmpzL0xJQ0VOQ0UubWQNCiAgICovDQoNCg0KICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogRURJVEFCTEUgREVGQVVMVFMgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovDQoNCg0KICAgIC8vIFRoZSBkZWZhdWx0IHZhbHVlcyBiZWxvdyBtdXN0IGJlIGludGVnZXJzIHdpdGhpbiB0aGUgc3RhdGVkIHJhbmdlcy4NCg0KICAgIC8qDQogICAgICogVGhlIG1heGltdW0gbnVtYmVyIG9mIGRlY2ltYWwgcGxhY2VzIChEUCkgb2YgdGhlIHJlc3VsdHMgb2Ygb3BlcmF0aW9ucyBpbnZvbHZpbmcgZGl2aXNpb246DQogICAgICogZGl2IGFuZCBzcXJ0LCBhbmQgcG93IHdpdGggbmVnYXRpdmUgZXhwb25lbnRzLg0KICAgICAqLw0KICB2YXIgRFAgPSAyMCwgICAgICAgICAgLy8gMCB0byBNQVhfRFANCg0KICAgIC8qDQogICAgICogVGhlIHJvdW5kaW5nIG1vZGUgKFJNKSB1c2VkIHdoZW4gcm91bmRpbmcgdG8gdGhlIGFib3ZlIGRlY2ltYWwgcGxhY2VzLg0KICAgICAqDQogICAgICogIDAgIFRvd2FyZHMgemVybyAoaS5lLiB0cnVuY2F0ZSwgbm8gcm91bmRpbmcpLiAgICAgICAoUk9VTkRfRE9XTikNCiAgICAgKiAgMSAgVG8gbmVhcmVzdCBuZWlnaGJvdXIuIElmIGVxdWlkaXN0YW50LCByb3VuZCB1cC4gIChST1VORF9IQUxGX1VQKQ0KICAgICAqICAyICBUbyBuZWFyZXN0IG5laWdoYm91ci4gSWYgZXF1aWRpc3RhbnQsIHRvIGV2ZW4uICAgKFJPVU5EX0hBTEZfRVZFTikNCiAgICAgKiAgMyAgQXdheSBmcm9tIHplcm8uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChST1VORF9VUCkNCiAgICAgKi8NCiAgICBSTSA9IDEsICAgICAgICAgICAgIC8vIDAsIDEsIDIgb3IgMw0KDQogICAgLy8gVGhlIG1heGltdW0gdmFsdWUgb2YgRFAgYW5kIEJpZy5EUC4NCiAgICBNQVhfRFAgPSAxRTYsICAgICAgIC8vIDAgdG8gMTAwMDAwMA0KDQogICAgLy8gVGhlIG1heGltdW0gbWFnbml0dWRlIG9mIHRoZSBleHBvbmVudCBhcmd1bWVudCB0byB0aGUgcG93IG1ldGhvZC4NCiAgICBNQVhfUE9XRVIgPSAxRTYsICAgIC8vIDEgdG8gMTAwMDAwMA0KDQogICAgLyoNCiAgICAgKiBUaGUgbmVnYXRpdmUgZXhwb25lbnQgKE5FKSBhdCBhbmQgYmVuZWF0aCB3aGljaCB0b1N0cmluZyByZXR1cm5zIGV4cG9uZW50aWFsIG5vdGF0aW9uLg0KICAgICAqIChKYXZhU2NyaXB0IG51bWJlcnM6IC03KQ0KICAgICAqIC0xMDAwMDAwIGlzIHRoZSBtaW5pbXVtIHJlY29tbWVuZGVkIGV4cG9uZW50IHZhbHVlIG9mIGEgQmlnLg0KICAgICAqLw0KICAgIE5FID0gLTcsICAgICAgICAgICAgLy8gMCB0byAtMTAwMDAwMA0KDQogICAgLyoNCiAgICAgKiBUaGUgcG9zaXRpdmUgZXhwb25lbnQgKFBFKSBhdCBhbmQgYWJvdmUgd2hpY2ggdG9TdHJpbmcgcmV0dXJucyBleHBvbmVudGlhbCBub3RhdGlvbi4NCiAgICAgKiAoSmF2YVNjcmlwdCBudW1iZXJzOiAyMSkNCiAgICAgKiAxMDAwMDAwIGlzIHRoZSBtYXhpbXVtIHJlY29tbWVuZGVkIGV4cG9uZW50IHZhbHVlIG9mIGEgQmlnLCBidXQgdGhpcyBsaW1pdCBpcyBub3QgZW5mb3JjZWQuDQogICAgICovDQogICAgUEUgPSAyMSwgICAgICAgICAgICAvLyAwIHRvIDEwMDAwMDANCg0KICAgIC8qDQogICAgICogV2hlbiB0cnVlLCBhbiBlcnJvciB3aWxsIGJlIHRocm93biBpZiBhIHByaW1pdGl2ZSBudW1iZXIgaXMgcGFzc2VkIHRvIHRoZSBCaWcgY29uc3RydWN0b3IsDQogICAgICogb3IgaWYgdmFsdWVPZiBpcyBjYWxsZWQsIG9yIGlmIHRvTnVtYmVyIGlzIGNhbGxlZCBvbiBhIEJpZyB3aGljaCBjYW5ub3QgYmUgY29udmVydGVkIHRvIGENCiAgICAgKiBwcmltaXRpdmUgbnVtYmVyIHdpdGhvdXQgYSBsb3NzIG9mIHByZWNpc2lvbi4NCiAgICAgKi8NCiAgICBTVFJJQ1QgPSBmYWxzZSwgICAgIC8vIHRydWUgb3IgZmFsc2UNCg0KDQogIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8NCg0KDQogICAgLy8gRXJyb3IgbWVzc2FnZXMuDQogICAgTkFNRSA9ICdbYmlnLmpzXSAnLA0KICAgIElOVkFMSUQgPSBOQU1FICsgJ0ludmFsaWQgJywNCiAgICBJTlZBTElEX0RQID0gSU5WQUxJRCArICdkZWNpbWFsIHBsYWNlcycsDQogICAgSU5WQUxJRF9STSA9IElOVkFMSUQgKyAncm91bmRpbmcgbW9kZScsDQogICAgRElWX0JZX1pFUk8gPSBOQU1FICsgJ0RpdmlzaW9uIGJ5IHplcm8nLA0KDQogICAgLy8gVGhlIHNoYXJlZCBwcm90b3R5cGUgb2JqZWN0Lg0KICAgIFAkMiA9IHt9LA0KICAgIFVOREVGSU5FRCA9IHZvaWQgMCwNCiAgICBOVU1FUklDID0gL14tPyhcZCsoXC5cZCopP3xcLlxkKykoZVsrLV0/XGQrKT8kL2k7DQoNCg0KICAvKg0KICAgKiBDcmVhdGUgYW5kIHJldHVybiBhIEJpZyBjb25zdHJ1Y3Rvci4NCiAgICovDQogIGZ1bmN0aW9uIF9CaWdfKCkgew0KDQogICAgLyoNCiAgICAgKiBUaGUgQmlnIGNvbnN0cnVjdG9yIGFuZCBleHBvcnRlZCBmdW5jdGlvbi4NCiAgICAgKiBDcmVhdGUgYW5kIHJldHVybiBhIG5ldyBpbnN0YW5jZSBvZiBhIEJpZyBudW1iZXIgb2JqZWN0Lg0KICAgICAqDQogICAgICogbiB7bnVtYmVyfHN0cmluZ3xCaWd9IEEgbnVtZXJpYyB2YWx1ZS4NCiAgICAgKi8NCiAgICBmdW5jdGlvbiBCaWcobikgew0KICAgICAgdmFyIHggPSB0aGlzOw0KDQogICAgICAvLyBFbmFibGUgY29uc3RydWN0b3IgdXNhZ2Ugd2l0aG91dCBuZXcuDQogICAgICBpZiAoISh4IGluc3RhbmNlb2YgQmlnKSkgcmV0dXJuIG4gPT09IFVOREVGSU5FRCA/IF9CaWdfKCkgOiBuZXcgQmlnKG4pOw0KDQogICAgICAvLyBEdXBsaWNhdGUuDQogICAgICBpZiAobiBpbnN0YW5jZW9mIEJpZykgew0KICAgICAgICB4LnMgPSBuLnM7DQogICAgICAgIHguZSA9IG4uZTsNCiAgICAgICAgeC5jID0gbi5jLnNsaWNlKCk7DQogICAgICB9IGVsc2Ugew0KICAgICAgICBpZiAodHlwZW9mIG4gIT09ICdzdHJpbmcnKSB7DQogICAgICAgICAgaWYgKEJpZy5zdHJpY3QgPT09IHRydWUgJiYgdHlwZW9mIG4gIT09ICdiaWdpbnQnKSB7DQogICAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoSU5WQUxJRCArICd2YWx1ZScpOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIC8vIE1pbnVzIHplcm8/DQogICAgICAgICAgbiA9IG4gPT09IDAgJiYgMSAvIG4gPCAwID8gJy0wJyA6IFN0cmluZyhuKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHBhcnNlKHgsIG4pOw0KICAgICAgfQ0KDQogICAgICAvLyBSZXRhaW4gYSByZWZlcmVuY2UgdG8gdGhpcyBCaWcgY29uc3RydWN0b3IuDQogICAgICAvLyBTaGFkb3cgQmlnLnByb3RvdHlwZS5jb25zdHJ1Y3RvciB3aGljaCBwb2ludHMgdG8gT2JqZWN0Lg0KICAgICAgeC5jb25zdHJ1Y3RvciA9IEJpZzsNCiAgICB9DQoNCiAgICBCaWcucHJvdG90eXBlID0gUCQyOw0KICAgIEJpZy5EUCA9IERQOw0KICAgIEJpZy5STSA9IFJNOw0KICAgIEJpZy5ORSA9IE5FOw0KICAgIEJpZy5QRSA9IFBFOw0KICAgIEJpZy5zdHJpY3QgPSBTVFJJQ1Q7DQogICAgQmlnLnJvdW5kRG93biA9IDA7DQogICAgQmlnLnJvdW5kSGFsZlVwID0gMTsNCiAgICBCaWcucm91bmRIYWxmRXZlbiA9IDI7DQogICAgQmlnLnJvdW5kVXAgPSAzOw0KDQogICAgcmV0dXJuIEJpZzsNCiAgfQ0KDQoNCiAgLyoNCiAgICogUGFyc2UgdGhlIG51bWJlciBvciBzdHJpbmcgdmFsdWUgcGFzc2VkIHRvIGEgQmlnIGNvbnN0cnVjdG9yLg0KICAgKg0KICAgKiB4IHtCaWd9IEEgQmlnIG51bWJlciBpbnN0YW5jZS4NCiAgICogbiB7bnVtYmVyfHN0cmluZ30gQSBudW1lcmljIHZhbHVlLg0KICAgKi8NCiAgZnVuY3Rpb24gcGFyc2UoeCwgbikgew0KICAgIHZhciBlLCBpLCBubDsNCg0KICAgIGlmICghTlVNRVJJQy50ZXN0KG4pKSB7DQogICAgICB0aHJvdyBFcnJvcihJTlZBTElEICsgJ251bWJlcicpOw0KICAgIH0NCg0KICAgIC8vIERldGVybWluZSBzaWduLg0KICAgIHgucyA9IG4uY2hhckF0KDApID09ICctJyA/IChuID0gbi5zbGljZSgxKSwgLTEpIDogMTsNCg0KICAgIC8vIERlY2ltYWwgcG9pbnQ/DQogICAgaWYgKChlID0gbi5pbmRleE9mKCcuJykpID4gLTEpIG4gPSBuLnJlcGxhY2UoJy4nLCAnJyk7DQoNCiAgICAvLyBFeHBvbmVudGlhbCBmb3JtPw0KICAgIGlmICgoaSA9IG4uc2VhcmNoKC9lL2kpKSA+IDApIHsNCg0KICAgICAgLy8gRGV0ZXJtaW5lIGV4cG9uZW50Lg0KICAgICAgaWYgKGUgPCAwKSBlID0gaTsNCiAgICAgIGUgKz0gK24uc2xpY2UoaSArIDEpOw0KICAgICAgbiA9IG4uc3Vic3RyaW5nKDAsIGkpOw0KICAgIH0gZWxzZSBpZiAoZSA8IDApIHsNCg0KICAgICAgLy8gSW50ZWdlci4NCiAgICAgIGUgPSBuLmxlbmd0aDsNCiAgICB9DQoNCiAgICBubCA9IG4ubGVuZ3RoOw0KDQogICAgLy8gRGV0ZXJtaW5lIGxlYWRpbmcgemVyb3MuDQogICAgZm9yIChpID0gMDsgaSA8IG5sICYmIG4uY2hhckF0KGkpID09ICcwJzspICsraTsNCg0KICAgIGlmIChpID09IG5sKSB7DQoNCiAgICAgIC8vIFplcm8uDQogICAgICB4LmMgPSBbeC5lID0gMF07DQogICAgfSBlbHNlIHsNCg0KICAgICAgLy8gRGV0ZXJtaW5lIHRyYWlsaW5nIHplcm9zLg0KICAgICAgZm9yICg7IG5sID4gMCAmJiBuLmNoYXJBdCgtLW5sKSA9PSAnMCc7KTsNCiAgICAgIHguZSA9IGUgLSBpIC0gMTsNCiAgICAgIHguYyA9IFtdOw0KDQogICAgICAvLyBDb252ZXJ0IHN0cmluZyB0byBhcnJheSBvZiBkaWdpdHMgd2l0aG91dCBsZWFkaW5nL3RyYWlsaW5nIHplcm9zLg0KICAgICAgZm9yIChlID0gMDsgaSA8PSBubDspIHguY1tlKytdID0gK24uY2hhckF0KGkrKyk7DQogICAgfQ0KDQogICAgcmV0dXJuIHg7DQogIH0NCg0KDQogIC8qDQogICAqIFJvdW5kIEJpZyB4IHRvIGEgbWF4aW11bSBvZiBzZCBzaWduaWZpY2FudCBkaWdpdHMgdXNpbmcgcm91bmRpbmcgbW9kZSBybS4NCiAgICoNCiAgICogeCB7QmlnfSBUaGUgQmlnIHRvIHJvdW5kLg0KICAgKiBzZCB7bnVtYmVyfSBTaWduaWZpY2FudCBkaWdpdHM6IGludGVnZXIsIDAgdG8gTUFYX0RQIGluY2x1c2l2ZS4NCiAgICogcm0ge251bWJlcn0gUm91bmRpbmcgbW9kZTogMCAoZG93biksIDEgKGhhbGYtdXApLCAyIChoYWxmLWV2ZW4pIG9yIDMgKHVwKS4NCiAgICogW21vcmVdIHtib29sZWFufSBXaGV0aGVyIHRoZSByZXN1bHQgb2YgZGl2aXNpb24gd2FzIHRydW5jYXRlZC4NCiAgICovDQogIGZ1bmN0aW9uIHJvdW5kKHgsIHNkLCBybSwgbW9yZSkgew0KICAgIHZhciB4YyA9IHguYzsNCg0KICAgIGlmIChybSA9PT0gVU5ERUZJTkVEKSBybSA9IHguY29uc3RydWN0b3IuUk07DQogICAgaWYgKHJtICE9PSAwICYmIHJtICE9PSAxICYmIHJtICE9PSAyICYmIHJtICE9PSAzKSB7DQogICAgICB0aHJvdyBFcnJvcihJTlZBTElEX1JNKTsNCiAgICB9DQoNCiAgICBpZiAoc2QgPCAxKSB7DQogICAgICBtb3JlID0NCiAgICAgICAgcm0gPT09IDMgJiYgKG1vcmUgfHwgISF4Y1swXSkgfHwgc2QgPT09IDAgJiYgKA0KICAgICAgICBybSA9PT0gMSAmJiB4Y1swXSA+PSA1IHx8DQogICAgICAgIHJtID09PSAyICYmICh4Y1swXSA+IDUgfHwgeGNbMF0gPT09IDUgJiYgKG1vcmUgfHwgeGNbMV0gIT09IFVOREVGSU5FRCkpDQogICAgICApOw0KDQogICAgICB4Yy5sZW5ndGggPSAxOw0KDQogICAgICBpZiAobW9yZSkgew0KDQogICAgICAgIC8vIDEsIDAuMSwgMC4wMSwgMC4wMDEsIDAuMDAwMSBldGMuDQogICAgICAgIHguZSA9IHguZSAtIHNkICsgMTsNCiAgICAgICAgeGNbMF0gPSAxOw0KICAgICAgfSBlbHNlIHsNCg0KICAgICAgICAvLyBaZXJvLg0KICAgICAgICB4Y1swXSA9IHguZSA9IDA7DQogICAgICB9DQogICAgfSBlbHNlIGlmIChzZCA8IHhjLmxlbmd0aCkgew0KDQogICAgICAvLyB4Y1tzZF0gaXMgdGhlIGRpZ2l0IGFmdGVyIHRoZSBkaWdpdCB0aGF0IG1heSBiZSByb3VuZGVkIHVwLg0KICAgICAgbW9yZSA9DQogICAgICAgIHJtID09PSAxICYmIHhjW3NkXSA+PSA1IHx8DQogICAgICAgIHJtID09PSAyICYmICh4Y1tzZF0gPiA1IHx8IHhjW3NkXSA9PT0gNSAmJg0KICAgICAgICAgIChtb3JlIHx8IHhjW3NkICsgMV0gIT09IFVOREVGSU5FRCB8fCB4Y1tzZCAtIDFdICYgMSkpIHx8DQogICAgICAgIHJtID09PSAzICYmIChtb3JlIHx8ICEheGNbMF0pOw0KDQogICAgICAvLyBSZW1vdmUgYW55IGRpZ2l0cyBhZnRlciB0aGUgcmVxdWlyZWQgcHJlY2lzaW9uLg0KICAgICAgeGMubGVuZ3RoID0gc2Q7DQoNCiAgICAgIC8vIFJvdW5kIHVwPw0KICAgICAgaWYgKG1vcmUpIHsNCg0KICAgICAgICAvLyBSb3VuZGluZyB1cCBtYXkgbWVhbiB0aGUgcHJldmlvdXMgZGlnaXQgaGFzIHRvIGJlIHJvdW5kZWQgdXAuDQogICAgICAgIGZvciAoOyArK3hjWy0tc2RdID4gOTspIHsNCiAgICAgICAgICB4Y1tzZF0gPSAwOw0KICAgICAgICAgIGlmIChzZCA9PT0gMCkgew0KICAgICAgICAgICAgKyt4LmU7DQogICAgICAgICAgICB4Yy51bnNoaWZ0KDEpOw0KICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIC8vIFJlbW92ZSB0cmFpbGluZyB6ZXJvcy4NCiAgICAgIGZvciAoc2QgPSB4Yy5sZW5ndGg7ICF4Y1stLXNkXTspIHhjLnBvcCgpOw0KICAgIH0NCg0KICAgIHJldHVybiB4Ow0KICB9DQoNCg0KICAvKg0KICAgKiBSZXR1cm4gYSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSB2YWx1ZSBvZiBCaWcgeCBpbiBub3JtYWwgb3IgZXhwb25lbnRpYWwgbm90YXRpb24uDQogICAqIEhhbmRsZXMgUC50b0V4cG9uZW50aWFsLCBQLnRvRml4ZWQsIFAudG9KU09OLCBQLnRvUHJlY2lzaW9uLCBQLnRvU3RyaW5nIGFuZCBQLnZhbHVlT2YuDQogICAqLw0KICBmdW5jdGlvbiBzdHJpbmdpZnkoeCwgZG9FeHBvbmVudGlhbCwgaXNOb256ZXJvKSB7DQogICAgdmFyIGUgPSB4LmUsDQogICAgICBzID0geC5jLmpvaW4oJycpLA0KICAgICAgbiA9IHMubGVuZ3RoOw0KDQogICAgLy8gRXhwb25lbnRpYWwgbm90YXRpb24/DQogICAgaWYgKGRvRXhwb25lbnRpYWwpIHsNCiAgICAgIHMgPSBzLmNoYXJBdCgwKSArIChuID4gMSA/ICcuJyArIHMuc2xpY2UoMSkgOiAnJykgKyAoZSA8IDAgPyAnZScgOiAnZSsnKSArIGU7DQoNCiAgICAvLyBOb3JtYWwgbm90YXRpb24uDQogICAgfSBlbHNlIGlmIChlIDwgMCkgew0KICAgICAgZm9yICg7ICsrZTspIHMgPSAnMCcgKyBzOw0KICAgICAgcyA9ICcwLicgKyBzOw0KICAgIH0gZWxzZSBpZiAoZSA+IDApIHsNCiAgICAgIGlmICgrK2UgPiBuKSB7DQogICAgICAgIGZvciAoZSAtPSBuOyBlLS07KSBzICs9ICcwJzsNCiAgICAgIH0gZWxzZSBpZiAoZSA8IG4pIHsNCiAgICAgICAgcyA9IHMuc2xpY2UoMCwgZSkgKyAnLicgKyBzLnNsaWNlKGUpOw0KICAgICAgfQ0KICAgIH0gZWxzZSBpZiAobiA+IDEpIHsNCiAgICAgIHMgPSBzLmNoYXJBdCgwKSArICcuJyArIHMuc2xpY2UoMSk7DQogICAgfQ0KDQogICAgcmV0dXJuIHgucyA8IDAgJiYgaXNOb256ZXJvID8gJy0nICsgcyA6IHM7DQogIH0NCg0KDQogIC8vIFByb3RvdHlwZS9pbnN0YW5jZSBtZXRob2RzDQoNCg0KICAvKg0KICAgKiBSZXR1cm4gYSBuZXcgQmlnIHdob3NlIHZhbHVlIGlzIHRoZSBhYnNvbHV0ZSB2YWx1ZSBvZiB0aGlzIEJpZy4NCiAgICovDQogIFAkMi5hYnMgPSBmdW5jdGlvbiAoKSB7DQogICAgdmFyIHggPSBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzKTsNCiAgICB4LnMgPSAxOw0KICAgIHJldHVybiB4Ow0KICB9Ow0KDQoNCiAgLyoNCiAgICogUmV0dXJuIDEgaWYgdGhlIHZhbHVlIG9mIHRoaXMgQmlnIGlzIGdyZWF0ZXIgdGhhbiB0aGUgdmFsdWUgb2YgQmlnIHksDQogICAqICAgICAgIC0xIGlmIHRoZSB2YWx1ZSBvZiB0aGlzIEJpZyBpcyBsZXNzIHRoYW4gdGhlIHZhbHVlIG9mIEJpZyB5LCBvcg0KICAgKiAgICAgICAgMCBpZiB0aGV5IGhhdmUgdGhlIHNhbWUgdmFsdWUuDQogICAqLw0KICBQJDIuY21wID0gZnVuY3Rpb24gKHkpIHsNCiAgICB2YXIgaXNuZWcsDQogICAgICB4ID0gdGhpcywNCiAgICAgIHhjID0geC5jLA0KICAgICAgeWMgPSAoeSA9IG5ldyB4LmNvbnN0cnVjdG9yKHkpKS5jLA0KICAgICAgaSA9IHgucywNCiAgICAgIGogPSB5LnMsDQogICAgICBrID0geC5lLA0KICAgICAgbCA9IHkuZTsNCg0KICAgIC8vIEVpdGhlciB6ZXJvPw0KICAgIGlmICgheGNbMF0gfHwgIXljWzBdKSByZXR1cm4gIXhjWzBdID8gIXljWzBdID8gMCA6IC1qIDogaTsNCg0KICAgIC8vIFNpZ25zIGRpZmZlcj8NCiAgICBpZiAoaSAhPSBqKSByZXR1cm4gaTsNCg0KICAgIGlzbmVnID0gaSA8IDA7DQoNCiAgICAvLyBDb21wYXJlIGV4cG9uZW50cy4NCiAgICBpZiAoayAhPSBsKSByZXR1cm4gayA+IGwgXiBpc25lZyA/IDEgOiAtMTsNCg0KICAgIGogPSAoayA9IHhjLmxlbmd0aCkgPCAobCA9IHljLmxlbmd0aCkgPyBrIDogbDsNCg0KICAgIC8vIENvbXBhcmUgZGlnaXQgYnkgZGlnaXQuDQogICAgZm9yIChpID0gLTE7ICsraSA8IGo7KSB7DQogICAgICBpZiAoeGNbaV0gIT0geWNbaV0pIHJldHVybiB4Y1tpXSA+IHljW2ldIF4gaXNuZWcgPyAxIDogLTE7DQogICAgfQ0KDQogICAgLy8gQ29tcGFyZSBsZW5ndGhzLg0KICAgIHJldHVybiBrID09IGwgPyAwIDogayA+IGwgXiBpc25lZyA/IDEgOiAtMTsNCiAgfTsNCg0KDQogIC8qDQogICAqIFJldHVybiBhIG5ldyBCaWcgd2hvc2UgdmFsdWUgaXMgdGhlIHZhbHVlIG9mIHRoaXMgQmlnIGRpdmlkZWQgYnkgdGhlIHZhbHVlIG9mIEJpZyB5LCByb3VuZGVkLA0KICAgKiBpZiBuZWNlc3NhcnksIHRvIGEgbWF4aW11bSBvZiBCaWcuRFAgZGVjaW1hbCBwbGFjZXMgdXNpbmcgcm91bmRpbmcgbW9kZSBCaWcuUk0uDQogICAqLw0KICBQJDIuZGl2ID0gZnVuY3Rpb24gKHkpIHsNCiAgICB2YXIgeCA9IHRoaXMsDQogICAgICBCaWcgPSB4LmNvbnN0cnVjdG9yLA0KICAgICAgYSA9IHguYywgICAgICAgICAgICAgICAgICAvLyBkaXZpZGVuZA0KICAgICAgYiA9ICh5ID0gbmV3IEJpZyh5KSkuYywgICAvLyBkaXZpc29yDQogICAgICBrID0geC5zID09IHkucyA/IDEgOiAtMSwNCiAgICAgIGRwID0gQmlnLkRQOw0KDQogICAgaWYgKGRwICE9PSB+fmRwIHx8IGRwIDwgMCB8fCBkcCA+IE1BWF9EUCkgew0KICAgICAgdGhyb3cgRXJyb3IoSU5WQUxJRF9EUCk7DQogICAgfQ0KDQogICAgLy8gRGl2aXNvciBpcyB6ZXJvPw0KICAgIGlmICghYlswXSkgew0KICAgICAgdGhyb3cgRXJyb3IoRElWX0JZX1pFUk8pOw0KICAgIH0NCg0KICAgIC8vIERpdmlkZW5kIGlzIDA/IFJldHVybiArLTAuDQogICAgaWYgKCFhWzBdKSB7DQogICAgICB5LnMgPSBrOw0KICAgICAgeS5jID0gW3kuZSA9IDBdOw0KICAgICAgcmV0dXJuIHk7DQogICAgfQ0KDQogICAgdmFyIGJsLCBidCwgbiwgY21wLCByaSwNCiAgICAgIGJ6ID0gYi5zbGljZSgpLA0KICAgICAgYWkgPSBibCA9IGIubGVuZ3RoLA0KICAgICAgYWwgPSBhLmxlbmd0aCwNCiAgICAgIHIgPSBhLnNsaWNlKDAsIGJsKSwgICAvLyByZW1haW5kZXINCiAgICAgIHJsID0gci5sZW5ndGgsDQogICAgICBxID0geSwgICAgICAgICAgICAgICAgLy8gcXVvdGllbnQNCiAgICAgIHFjID0gcS5jID0gW10sDQogICAgICBxaSA9IDAsDQogICAgICBwID0gZHAgKyAocS5lID0geC5lIC0geS5lKSArIDE7ICAgIC8vIHByZWNpc2lvbiBvZiB0aGUgcmVzdWx0DQoNCiAgICBxLnMgPSBrOw0KICAgIGsgPSBwIDwgMCA/IDAgOiBwOw0KDQogICAgLy8gQ3JlYXRlIHZlcnNpb24gb2YgZGl2aXNvciB3aXRoIGxlYWRpbmcgemVyby4NCiAgICBiei51bnNoaWZ0KDApOw0KDQogICAgLy8gQWRkIHplcm9zIHRvIG1ha2UgcmVtYWluZGVyIGFzIGxvbmcgYXMgZGl2aXNvci4NCiAgICBmb3IgKDsgcmwrKyA8IGJsOykgci5wdXNoKDApOw0KDQogICAgZG8gew0KDQogICAgICAvLyBuIGlzIGhvdyBtYW55IHRpbWVzIHRoZSBkaXZpc29yIGdvZXMgaW50byBjdXJyZW50IHJlbWFpbmRlci4NCiAgICAgIGZvciAobiA9IDA7IG4gPCAxMDsgbisrKSB7DQoNCiAgICAgICAgLy8gQ29tcGFyZSBkaXZpc29yIGFuZCByZW1haW5kZXIuDQogICAgICAgIGlmIChibCAhPSAocmwgPSByLmxlbmd0aCkpIHsNCiAgICAgICAgICBjbXAgPSBibCA+IHJsID8gMSA6IC0xOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGZvciAocmkgPSAtMSwgY21wID0gMDsgKytyaSA8IGJsOykgew0KICAgICAgICAgICAgaWYgKGJbcmldICE9IHJbcmldKSB7DQogICAgICAgICAgICAgIGNtcCA9IGJbcmldID4gcltyaV0gPyAxIDogLTE7DQogICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vIElmIGRpdmlzb3IgPCByZW1haW5kZXIsIHN1YnRyYWN0IGRpdmlzb3IgZnJvbSByZW1haW5kZXIuDQogICAgICAgIGlmIChjbXAgPCAwKSB7DQoNCiAgICAgICAgICAvLyBSZW1haW5kZXIgY2FuJ3QgYmUgbW9yZSB0aGFuIDEgZGlnaXQgbG9uZ2VyIHRoYW4gZGl2aXNvci4NCiAgICAgICAgICAvLyBFcXVhbGlzZSBsZW5ndGhzIHVzaW5nIGRpdmlzb3Igd2l0aCBleHRyYSBsZWFkaW5nIHplcm8/DQogICAgICAgICAgZm9yIChidCA9IHJsID09IGJsID8gYiA6IGJ6OyBybDspIHsNCiAgICAgICAgICAgIGlmIChyWy0tcmxdIDwgYnRbcmxdKSB7DQogICAgICAgICAgICAgIHJpID0gcmw7DQogICAgICAgICAgICAgIGZvciAoOyByaSAmJiAhclstLXJpXTspIHJbcmldID0gOTsNCiAgICAgICAgICAgICAgLS1yW3JpXTsNCiAgICAgICAgICAgICAgcltybF0gKz0gMTA7DQogICAgICAgICAgICB9DQogICAgICAgICAgICByW3JsXSAtPSBidFtybF07DQogICAgICAgICAgfQ0KDQogICAgICAgICAgZm9yICg7ICFyWzBdOykgci5zaGlmdCgpOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGJyZWFrOw0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIC8vIEFkZCB0aGUgZGlnaXQgbiB0byB0aGUgcmVzdWx0IGFycmF5Lg0KICAgICAgcWNbcWkrK10gPSBjbXAgPyBuIDogKytuOw0KDQogICAgICAvLyBVcGRhdGUgdGhlIHJlbWFpbmRlci4NCiAgICAgIGlmIChyWzBdICYmIGNtcCkgcltybF0gPSBhW2FpXSB8fCAwOw0KICAgICAgZWxzZSByID0gW2FbYWldXTsNCg0KICAgIH0gd2hpbGUgKChhaSsrIDwgYWwgfHwgclswXSAhPT0gVU5ERUZJTkVEKSAmJiBrLS0pOw0KDQogICAgLy8gTGVhZGluZyB6ZXJvPyBEbyBub3QgcmVtb3ZlIGlmIHJlc3VsdCBpcyBzaW1wbHkgemVybyAocWkgPT0gMSkuDQogICAgaWYgKCFxY1swXSAmJiBxaSAhPSAxKSB7DQoNCiAgICAgIC8vIFRoZXJlIGNhbid0IGJlIG1vcmUgdGhhbiBvbmUgemVyby4NCiAgICAgIHFjLnNoaWZ0KCk7DQogICAgICBxLmUtLTsNCiAgICAgIHAtLTsNCiAgICB9DQoNCiAgICAvLyBSb3VuZD8NCiAgICBpZiAocWkgPiBwKSByb3VuZChxLCBwLCBCaWcuUk0sIHJbMF0gIT09IFVOREVGSU5FRCk7DQoNCiAgICByZXR1cm4gcTsNCiAgfTsNCg0KDQogIC8qDQogICAqIFJldHVybiB0cnVlIGlmIHRoZSB2YWx1ZSBvZiB0aGlzIEJpZyBpcyBlcXVhbCB0byB0aGUgdmFsdWUgb2YgQmlnIHksIG90aGVyd2lzZSByZXR1cm4gZmFsc2UuDQogICAqLw0KICBQJDIuZXEgPSBmdW5jdGlvbiAoeSkgew0KICAgIHJldHVybiB0aGlzLmNtcCh5KSA9PT0gMDsNCiAgfTsNCg0KDQogIC8qDQogICAqIFJldHVybiB0cnVlIGlmIHRoZSB2YWx1ZSBvZiB0aGlzIEJpZyBpcyBncmVhdGVyIHRoYW4gdGhlIHZhbHVlIG9mIEJpZyB5LCBvdGhlcndpc2UgcmV0dXJuDQogICAqIGZhbHNlLg0KICAgKi8NCiAgUCQyLmd0ID0gZnVuY3Rpb24gKHkpIHsNCiAgICByZXR1cm4gdGhpcy5jbXAoeSkgPiAwOw0KICB9Ow0KDQoNCiAgLyoNCiAgICogUmV0dXJuIHRydWUgaWYgdGhlIHZhbHVlIG9mIHRoaXMgQmlnIGlzIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byB0aGUgdmFsdWUgb2YgQmlnIHksIG90aGVyd2lzZQ0KICAgKiByZXR1cm4gZmFsc2UuDQogICAqLw0KICBQJDIuZ3RlID0gZnVuY3Rpb24gKHkpIHsNCiAgICByZXR1cm4gdGhpcy5jbXAoeSkgPiAtMTsNCiAgfTsNCg0KDQogIC8qDQogICAqIFJldHVybiB0cnVlIGlmIHRoZSB2YWx1ZSBvZiB0aGlzIEJpZyBpcyBsZXNzIHRoYW4gdGhlIHZhbHVlIG9mIEJpZyB5LCBvdGhlcndpc2UgcmV0dXJuIGZhbHNlLg0KICAgKi8NCiAgUCQyLmx0ID0gZnVuY3Rpb24gKHkpIHsNCiAgICByZXR1cm4gdGhpcy5jbXAoeSkgPCAwOw0KICB9Ow0KDQoNCiAgLyoNCiAgICogUmV0dXJuIHRydWUgaWYgdGhlIHZhbHVlIG9mIHRoaXMgQmlnIGlzIGxlc3MgdGhhbiBvciBlcXVhbCB0byB0aGUgdmFsdWUgb2YgQmlnIHksIG90aGVyd2lzZQ0KICAgKiByZXR1cm4gZmFsc2UuDQogICAqLw0KICBQJDIubHRlID0gZnVuY3Rpb24gKHkpIHsNCiAgICByZXR1cm4gdGhpcy5jbXAoeSkgPCAxOw0KICB9Ow0KDQoNCiAgLyoNCiAgICogUmV0dXJuIGEgbmV3IEJpZyB3aG9zZSB2YWx1ZSBpcyB0aGUgdmFsdWUgb2YgdGhpcyBCaWcgbWludXMgdGhlIHZhbHVlIG9mIEJpZyB5Lg0KICAgKi8NCiAgUCQyLm1pbnVzID0gUCQyLnN1YiA9IGZ1bmN0aW9uICh5KSB7DQogICAgdmFyIGksIGosIHQsIHhsdHksDQogICAgICB4ID0gdGhpcywNCiAgICAgIEJpZyA9IHguY29uc3RydWN0b3IsDQogICAgICBhID0geC5zLA0KICAgICAgYiA9ICh5ID0gbmV3IEJpZyh5KSkuczsNCg0KICAgIC8vIFNpZ25zIGRpZmZlcj8NCiAgICBpZiAoYSAhPSBiKSB7DQogICAgICB5LnMgPSAtYjsNCiAgICAgIHJldHVybiB4LnBsdXMoeSk7DQogICAgfQ0KDQogICAgdmFyIHhjID0geC5jLnNsaWNlKCksDQogICAgICB4ZSA9IHguZSwNCiAgICAgIHljID0geS5jLA0KICAgICAgeWUgPSB5LmU7DQoNCiAgICAvLyBFaXRoZXIgemVybz8NCiAgICBpZiAoIXhjWzBdIHx8ICF5Y1swXSkgew0KICAgICAgaWYgKHljWzBdKSB7DQogICAgICAgIHkucyA9IC1iOw0KICAgICAgfSBlbHNlIGlmICh4Y1swXSkgew0KICAgICAgICB5ID0gbmV3IEJpZyh4KTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHkucyA9IDE7DQogICAgICB9DQogICAgICByZXR1cm4geTsNCiAgICB9DQoNCiAgICAvLyBEZXRlcm1pbmUgd2hpY2ggaXMgdGhlIGJpZ2dlciBudW1iZXIuIFByZXBlbmQgemVyb3MgdG8gZXF1YWxpc2UgZXhwb25lbnRzLg0KICAgIGlmIChhID0geGUgLSB5ZSkgew0KDQogICAgICBpZiAoeGx0eSA9IGEgPCAwKSB7DQogICAgICAgIGEgPSAtYTsNCiAgICAgICAgdCA9IHhjOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgeWUgPSB4ZTsNCiAgICAgICAgdCA9IHljOw0KICAgICAgfQ0KDQogICAgICB0LnJldmVyc2UoKTsNCiAgICAgIGZvciAoYiA9IGE7IGItLTspIHQucHVzaCgwKTsNCiAgICAgIHQucmV2ZXJzZSgpOw0KICAgIH0gZWxzZSB7DQoNCiAgICAgIC8vIEV4cG9uZW50cyBlcXVhbC4gQ2hlY2sgZGlnaXQgYnkgZGlnaXQuDQogICAgICBqID0gKCh4bHR5ID0geGMubGVuZ3RoIDwgeWMubGVuZ3RoKSA/IHhjIDogeWMpLmxlbmd0aDsNCg0KICAgICAgZm9yIChhID0gYiA9IDA7IGIgPCBqOyBiKyspIHsNCiAgICAgICAgaWYgKHhjW2JdICE9IHljW2JdKSB7DQogICAgICAgICAgeGx0eSA9IHhjW2JdIDwgeWNbYl07DQogICAgICAgICAgYnJlYWs7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQoNCiAgICAvLyB4IDwgeT8gUG9pbnQgeGMgdG8gdGhlIGFycmF5IG9mIHRoZSBiaWdnZXIgbnVtYmVyLg0KICAgIGlmICh4bHR5KSB7DQogICAgICB0ID0geGM7DQogICAgICB4YyA9IHljOw0KICAgICAgeWMgPSB0Ow0KICAgICAgeS5zID0gLXkuczsNCiAgICB9DQoNCiAgICAvKg0KICAgICAqIEFwcGVuZCB6ZXJvcyB0byB4YyBpZiBzaG9ydGVyLiBObyBuZWVkIHRvIGFkZCB6ZXJvcyB0byB5YyBpZiBzaG9ydGVyIGFzIHN1YnRyYWN0aW9uIG9ubHkNCiAgICAgKiBuZWVkcyB0byBzdGFydCBhdCB5Yy5sZW5ndGguDQogICAgICovDQogICAgaWYgKChiID0gKGogPSB5Yy5sZW5ndGgpIC0gKGkgPSB4Yy5sZW5ndGgpKSA+IDApIGZvciAoOyBiLS07KSB4Y1tpKytdID0gMDsNCg0KICAgIC8vIFN1YnRyYWN0IHljIGZyb20geGMuDQogICAgZm9yIChiID0gaTsgaiA+IGE7KSB7DQogICAgICBpZiAoeGNbLS1qXSA8IHljW2pdKSB7DQogICAgICAgIGZvciAoaSA9IGo7IGkgJiYgIXhjWy0taV07KSB4Y1tpXSA9IDk7DQogICAgICAgIC0teGNbaV07DQogICAgICAgIHhjW2pdICs9IDEwOw0KICAgICAgfQ0KDQogICAgICB4Y1tqXSAtPSB5Y1tqXTsNCiAgICB9DQoNCiAgICAvLyBSZW1vdmUgdHJhaWxpbmcgemVyb3MuDQogICAgZm9yICg7IHhjWy0tYl0gPT09IDA7KSB4Yy5wb3AoKTsNCg0KICAgIC8vIFJlbW92ZSBsZWFkaW5nIHplcm9zIGFuZCBhZGp1c3QgZXhwb25lbnQgYWNjb3JkaW5nbHkuDQogICAgZm9yICg7IHhjWzBdID09PSAwOykgew0KICAgICAgeGMuc2hpZnQoKTsNCiAgICAgIC0teWU7DQogICAgfQ0KDQogICAgaWYgKCF4Y1swXSkgew0KDQogICAgICAvLyBuIC0gbiA9ICswDQogICAgICB5LnMgPSAxOw0KDQogICAgICAvLyBSZXN1bHQgbXVzdCBiZSB6ZXJvLg0KICAgICAgeGMgPSBbeWUgPSAwXTsNCiAgICB9DQoNCiAgICB5LmMgPSB4YzsNCiAgICB5LmUgPSB5ZTsNCg0KICAgIHJldHVybiB5Ow0KICB9Ow0KDQoNCiAgLyoNCiAgICogUmV0dXJuIGEgbmV3IEJpZyB3aG9zZSB2YWx1ZSBpcyB0aGUgdmFsdWUgb2YgdGhpcyBCaWcgbW9kdWxvIHRoZSB2YWx1ZSBvZiBCaWcgeS4NCiAgICovDQogIFAkMi5tb2QgPSBmdW5jdGlvbiAoeSkgew0KICAgIHZhciB5Z3R4LA0KICAgICAgeCA9IHRoaXMsDQogICAgICBCaWcgPSB4LmNvbnN0cnVjdG9yLA0KICAgICAgYSA9IHgucywNCiAgICAgIGIgPSAoeSA9IG5ldyBCaWcoeSkpLnM7DQoNCiAgICBpZiAoIXkuY1swXSkgew0KICAgICAgdGhyb3cgRXJyb3IoRElWX0JZX1pFUk8pOw0KICAgIH0NCg0KICAgIHgucyA9IHkucyA9IDE7DQogICAgeWd0eCA9IHkuY21wKHgpID09IDE7DQogICAgeC5zID0gYTsNCiAgICB5LnMgPSBiOw0KDQogICAgaWYgKHlndHgpIHJldHVybiBuZXcgQmlnKHgpOw0KDQogICAgYSA9IEJpZy5EUDsNCiAgICBiID0gQmlnLlJNOw0KICAgIEJpZy5EUCA9IEJpZy5STSA9IDA7DQogICAgeCA9IHguZGl2KHkpOw0KICAgIEJpZy5EUCA9IGE7DQogICAgQmlnLlJNID0gYjsNCg0KICAgIHJldHVybiB0aGlzLm1pbnVzKHgudGltZXMoeSkpOw0KICB9Ow0KDQoNCiAgLyoNCiAgICogUmV0dXJuIGEgbmV3IEJpZyB3aG9zZSB2YWx1ZSBpcyB0aGUgdmFsdWUgb2YgdGhpcyBCaWcgbmVnYXRlZC4NCiAgICovDQogIFAkMi5uZWcgPSBmdW5jdGlvbiAoKSB7DQogICAgdmFyIHggPSBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzKTsNCiAgICB4LnMgPSAteC5zOw0KICAgIHJldHVybiB4Ow0KICB9Ow0KDQoNCiAgLyoNCiAgICogUmV0dXJuIGEgbmV3IEJpZyB3aG9zZSB2YWx1ZSBpcyB0aGUgdmFsdWUgb2YgdGhpcyBCaWcgcGx1cyB0aGUgdmFsdWUgb2YgQmlnIHkuDQogICAqLw0KICBQJDIucGx1cyA9IFAkMi5hZGQgPSBmdW5jdGlvbiAoeSkgew0KICAgIHZhciBlLCBrLCB0LA0KICAgICAgeCA9IHRoaXMsDQogICAgICBCaWcgPSB4LmNvbnN0cnVjdG9yOw0KDQogICAgeSA9IG5ldyBCaWcoeSk7DQoNCiAgICAvLyBTaWducyBkaWZmZXI/DQogICAgaWYgKHgucyAhPSB5LnMpIHsNCiAgICAgIHkucyA9IC15LnM7DQogICAgICByZXR1cm4geC5taW51cyh5KTsNCiAgICB9DQoNCiAgICB2YXIgeGUgPSB4LmUsDQogICAgICB4YyA9IHguYywNCiAgICAgIHllID0geS5lLA0KICAgICAgeWMgPSB5LmM7DQoNCiAgICAvLyBFaXRoZXIgemVybz8NCiAgICBpZiAoIXhjWzBdIHx8ICF5Y1swXSkgew0KICAgICAgaWYgKCF5Y1swXSkgew0KICAgICAgICBpZiAoeGNbMF0pIHsNCiAgICAgICAgICB5ID0gbmV3IEJpZyh4KTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB5LnMgPSB4LnM7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIHJldHVybiB5Ow0KICAgIH0NCg0KICAgIHhjID0geGMuc2xpY2UoKTsNCg0KICAgIC8vIFByZXBlbmQgemVyb3MgdG8gZXF1YWxpc2UgZXhwb25lbnRzLg0KICAgIC8vIE5vdGU6IHJldmVyc2UgZmFzdGVyIHRoYW4gdW5zaGlmdHMuDQogICAgaWYgKGUgPSB4ZSAtIHllKSB7DQogICAgICBpZiAoZSA+IDApIHsNCiAgICAgICAgeWUgPSB4ZTsNCiAgICAgICAgdCA9IHljOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgZSA9IC1lOw0KICAgICAgICB0ID0geGM7DQogICAgICB9DQoNCiAgICAgIHQucmV2ZXJzZSgpOw0KICAgICAgZm9yICg7IGUtLTspIHQucHVzaCgwKTsNCiAgICAgIHQucmV2ZXJzZSgpOw0KICAgIH0NCg0KICAgIC8vIFBvaW50IHhjIHRvIHRoZSBsb25nZXIgYXJyYXkuDQogICAgaWYgKHhjLmxlbmd0aCAtIHljLmxlbmd0aCA8IDApIHsNCiAgICAgIHQgPSB5YzsNCiAgICAgIHljID0geGM7DQogICAgICB4YyA9IHQ7DQogICAgfQ0KDQogICAgZSA9IHljLmxlbmd0aDsNCg0KICAgIC8vIE9ubHkgc3RhcnQgYWRkaW5nIGF0IHljLmxlbmd0aCAtIDEgYXMgdGhlIGZ1cnRoZXIgZGlnaXRzIG9mIHhjIGNhbiBiZSBsZWZ0IGFzIHRoZXkgYXJlLg0KICAgIGZvciAoayA9IDA7IGU7IHhjW2VdICU9IDEwKSBrID0gKHhjWy0tZV0gPSB4Y1tlXSArIHljW2VdICsgaykgLyAxMCB8IDA7DQoNCiAgICAvLyBObyBuZWVkIHRvIGNoZWNrIGZvciB6ZXJvLCBhcyAreCArICt5ICE9IDAgJiYgLXggKyAteSAhPSAwDQoNCiAgICBpZiAoaykgew0KICAgICAgeGMudW5zaGlmdChrKTsNCiAgICAgICsreWU7DQogICAgfQ0KDQogICAgLy8gUmVtb3ZlIHRyYWlsaW5nIHplcm9zLg0KICAgIGZvciAoZSA9IHhjLmxlbmd0aDsgeGNbLS1lXSA9PT0gMDspIHhjLnBvcCgpOw0KDQogICAgeS5jID0geGM7DQogICAgeS5lID0geWU7DQoNCiAgICByZXR1cm4geTsNCiAgfTsNCg0KDQogIC8qDQogICAqIFJldHVybiBhIEJpZyB3aG9zZSB2YWx1ZSBpcyB0aGUgdmFsdWUgb2YgdGhpcyBCaWcgcmFpc2VkIHRvIHRoZSBwb3dlciBuLg0KICAgKiBJZiBuIGlzIG5lZ2F0aXZlLCByb3VuZCB0byBhIG1heGltdW0gb2YgQmlnLkRQIGRlY2ltYWwgcGxhY2VzIHVzaW5nIHJvdW5kaW5nDQogICAqIG1vZGUgQmlnLlJNLg0KICAgKg0KICAgKiBuIHtudW1iZXJ9IEludGVnZXIsIC1NQVhfUE9XRVIgdG8gTUFYX1BPV0VSIGluY2x1c2l2ZS4NCiAgICovDQogIFAkMi5wb3cgPSBmdW5jdGlvbiAobikgew0KICAgIHZhciB4ID0gdGhpcywNCiAgICAgIG9uZSA9IG5ldyB4LmNvbnN0cnVjdG9yKCcxJyksDQogICAgICB5ID0gb25lLA0KICAgICAgaXNuZWcgPSBuIDwgMDsNCg0KICAgIGlmIChuICE9PSB+fm4gfHwgbiA8IC1NQVhfUE9XRVIgfHwgbiA+IE1BWF9QT1dFUikgew0KICAgICAgdGhyb3cgRXJyb3IoSU5WQUxJRCArICdleHBvbmVudCcpOw0KICAgIH0NCg0KICAgIGlmIChpc25lZykgbiA9IC1uOw0KDQogICAgZm9yICg7Oykgew0KICAgICAgaWYgKG4gJiAxKSB5ID0geS50aW1lcyh4KTsNCiAgICAgIG4gPj49IDE7DQogICAgICBpZiAoIW4pIGJyZWFrOw0KICAgICAgeCA9IHgudGltZXMoeCk7DQogICAgfQ0KDQogICAgcmV0dXJuIGlzbmVnID8gb25lLmRpdih5KSA6IHk7DQogIH07DQoNCg0KICAvKg0KICAgKiBSZXR1cm4gYSBuZXcgQmlnIHdob3NlIHZhbHVlIGlzIHRoZSB2YWx1ZSBvZiB0aGlzIEJpZyByb3VuZGVkIHRvIGEgbWF4aW11bSBwcmVjaXNpb24gb2Ygc2QNCiAgICogc2lnbmlmaWNhbnQgZGlnaXRzIHVzaW5nIHJvdW5kaW5nIG1vZGUgcm0sIG9yIEJpZy5STSBpZiBybSBpcyBub3Qgc3BlY2lmaWVkLg0KICAgKg0KICAgKiBzZCB7bnVtYmVyfSBTaWduaWZpY2FudCBkaWdpdHM6IGludGVnZXIsIDEgdG8gTUFYX0RQIGluY2x1c2l2ZS4NCiAgICogcm0/IHtudW1iZXJ9IFJvdW5kaW5nIG1vZGU6IDAgKGRvd24pLCAxIChoYWxmLXVwKSwgMiAoaGFsZi1ldmVuKSBvciAzICh1cCkuDQogICAqLw0KICBQJDIucHJlYyA9IGZ1bmN0aW9uIChzZCwgcm0pIHsNCiAgICBpZiAoc2QgIT09IH5+c2QgfHwgc2QgPCAxIHx8IHNkID4gTUFYX0RQKSB7DQogICAgICB0aHJvdyBFcnJvcihJTlZBTElEICsgJ3ByZWNpc2lvbicpOw0KICAgIH0NCiAgICByZXR1cm4gcm91bmQobmV3IHRoaXMuY29uc3RydWN0b3IodGhpcyksIHNkLCBybSk7DQogIH07DQoNCg0KICAvKg0KICAgKiBSZXR1cm4gYSBuZXcgQmlnIHdob3NlIHZhbHVlIGlzIHRoZSB2YWx1ZSBvZiB0aGlzIEJpZyByb3VuZGVkIHRvIGEgbWF4aW11bSBvZiBkcCBkZWNpbWFsIHBsYWNlcw0KICAgKiB1c2luZyByb3VuZGluZyBtb2RlIHJtLCBvciBCaWcuUk0gaWYgcm0gaXMgbm90IHNwZWNpZmllZC4NCiAgICogSWYgZHAgaXMgbmVnYXRpdmUsIHJvdW5kIHRvIGFuIGludGVnZXIgd2hpY2ggaXMgYSBtdWx0aXBsZSBvZiAxMCoqLWRwLg0KICAgKiBJZiBkcCBpcyBub3Qgc3BlY2lmaWVkLCByb3VuZCB0byAwIGRlY2ltYWwgcGxhY2VzLg0KICAgKg0KICAgKiBkcD8ge251bWJlcn0gSW50ZWdlciwgLU1BWF9EUCB0byBNQVhfRFAgaW5jbHVzaXZlLg0KICAgKiBybT8ge251bWJlcn0gUm91bmRpbmcgbW9kZTogMCAoZG93biksIDEgKGhhbGYtdXApLCAyIChoYWxmLWV2ZW4pIG9yIDMgKHVwKS4NCiAgICovDQogIFAkMi5yb3VuZCA9IGZ1bmN0aW9uIChkcCwgcm0pIHsNCiAgICBpZiAoZHAgPT09IFVOREVGSU5FRCkgZHAgPSAwOw0KICAgIGVsc2UgaWYgKGRwICE9PSB+fmRwIHx8IGRwIDwgLU1BWF9EUCB8fCBkcCA+IE1BWF9EUCkgew0KICAgICAgdGhyb3cgRXJyb3IoSU5WQUxJRF9EUCk7DQogICAgfQ0KICAgIHJldHVybiByb3VuZChuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzKSwgZHAgKyB0aGlzLmUgKyAxLCBybSk7DQogIH07DQoNCg0KICAvKg0KICAgKiBSZXR1cm4gYSBuZXcgQmlnIHdob3NlIHZhbHVlIGlzIHRoZSBzcXVhcmUgcm9vdCBvZiB0aGUgdmFsdWUgb2YgdGhpcyBCaWcsIHJvdW5kZWQsIGlmDQogICAqIG5lY2Vzc2FyeSwgdG8gYSBtYXhpbXVtIG9mIEJpZy5EUCBkZWNpbWFsIHBsYWNlcyB1c2luZyByb3VuZGluZyBtb2RlIEJpZy5STS4NCiAgICovDQogIFAkMi5zcXJ0ID0gZnVuY3Rpb24gKCkgew0KICAgIHZhciByLCBjLCB0LA0KICAgICAgeCA9IHRoaXMsDQogICAgICBCaWcgPSB4LmNvbnN0cnVjdG9yLA0KICAgICAgcyA9IHgucywNCiAgICAgIGUgPSB4LmUsDQogICAgICBoYWxmID0gbmV3IEJpZygnMC41Jyk7DQoNCiAgICAvLyBaZXJvPw0KICAgIGlmICgheC5jWzBdKSByZXR1cm4gbmV3IEJpZyh4KTsNCg0KICAgIC8vIE5lZ2F0aXZlPw0KICAgIGlmIChzIDwgMCkgew0KICAgICAgdGhyb3cgRXJyb3IoTkFNRSArICdObyBzcXVhcmUgcm9vdCcpOw0KICAgIH0NCg0KICAgIC8vIEVzdGltYXRlLg0KICAgIHMgPSBNYXRoLnNxcnQoeCArICcnKTsNCg0KICAgIC8vIE1hdGguc3FydCB1bmRlcmZsb3cvb3ZlcmZsb3c/DQogICAgLy8gUmUtZXN0aW1hdGU6IHBhc3MgeCBjb2VmZmljaWVudCB0byBNYXRoLnNxcnQgYXMgaW50ZWdlciwgdGhlbiBhZGp1c3QgdGhlIHJlc3VsdCBleHBvbmVudC4NCiAgICBpZiAocyA9PT0gMCB8fCBzID09PSAxIC8gMCkgew0KICAgICAgYyA9IHguYy5qb2luKCcnKTsNCiAgICAgIGlmICghKGMubGVuZ3RoICsgZSAmIDEpKSBjICs9ICcwJzsNCiAgICAgIHMgPSBNYXRoLnNxcnQoYyk7DQogICAgICBlID0gKChlICsgMSkgLyAyIHwgMCkgLSAoZSA8IDAgfHwgZSAmIDEpOw0KICAgICAgciA9IG5ldyBCaWcoKHMgPT0gMSAvIDAgPyAnNWUnIDogKHMgPSBzLnRvRXhwb25lbnRpYWwoKSkuc2xpY2UoMCwgcy5pbmRleE9mKCdlJykgKyAxKSkgKyBlKTsNCiAgICB9IGVsc2Ugew0KICAgICAgciA9IG5ldyBCaWcocyArICcnKTsNCiAgICB9DQoNCiAgICBlID0gci5lICsgKEJpZy5EUCArPSA0KTsNCg0KICAgIC8vIE5ld3Rvbi1SYXBoc29uIGl0ZXJhdGlvbi4NCiAgICBkbyB7DQogICAgICB0ID0gcjsNCiAgICAgIHIgPSBoYWxmLnRpbWVzKHQucGx1cyh4LmRpdih0KSkpOw0KICAgIH0gd2hpbGUgKHQuYy5zbGljZSgwLCBlKS5qb2luKCcnKSAhPT0gci5jLnNsaWNlKDAsIGUpLmpvaW4oJycpKTsNCg0KICAgIHJldHVybiByb3VuZChyLCAoQmlnLkRQIC09IDQpICsgci5lICsgMSwgQmlnLlJNKTsNCiAgfTsNCg0KDQogIC8qDQogICAqIFJldHVybiBhIG5ldyBCaWcgd2hvc2UgdmFsdWUgaXMgdGhlIHZhbHVlIG9mIHRoaXMgQmlnIHRpbWVzIHRoZSB2YWx1ZSBvZiBCaWcgeS4NCiAgICovDQogIFAkMi50aW1lcyA9IFAkMi5tdWwgPSBmdW5jdGlvbiAoeSkgew0KICAgIHZhciBjLA0KICAgICAgeCA9IHRoaXMsDQogICAgICBCaWcgPSB4LmNvbnN0cnVjdG9yLA0KICAgICAgeGMgPSB4LmMsDQogICAgICB5YyA9ICh5ID0gbmV3IEJpZyh5KSkuYywNCiAgICAgIGEgPSB4Yy5sZW5ndGgsDQogICAgICBiID0geWMubGVuZ3RoLA0KICAgICAgaSA9IHguZSwNCiAgICAgIGogPSB5LmU7DQoNCiAgICAvLyBEZXRlcm1pbmUgc2lnbiBvZiByZXN1bHQuDQogICAgeS5zID0geC5zID09IHkucyA/IDEgOiAtMTsNCg0KICAgIC8vIFJldHVybiBzaWduZWQgMCBpZiBlaXRoZXIgMC4NCiAgICBpZiAoIXhjWzBdIHx8ICF5Y1swXSkgew0KICAgICAgeS5jID0gW3kuZSA9IDBdOw0KICAgICAgcmV0dXJuIHk7DQogICAgfQ0KDQogICAgLy8gSW5pdGlhbGlzZSBleHBvbmVudCBvZiByZXN1bHQgYXMgeC5lICsgeS5lLg0KICAgIHkuZSA9IGkgKyBqOw0KDQogICAgLy8gSWYgYXJyYXkgeGMgaGFzIGZld2VyIGRpZ2l0cyB0aGFuIHljLCBzd2FwIHhjIGFuZCB5YywgYW5kIGxlbmd0aHMuDQogICAgaWYgKGEgPCBiKSB7DQogICAgICBjID0geGM7DQogICAgICB4YyA9IHljOw0KICAgICAgeWMgPSBjOw0KICAgICAgaiA9IGE7DQogICAgICBhID0gYjsNCiAgICAgIGIgPSBqOw0KICAgIH0NCg0KICAgIC8vIEluaXRpYWxpc2UgY29lZmZpY2llbnQgYXJyYXkgb2YgcmVzdWx0IHdpdGggemVyb3MuDQogICAgZm9yIChjID0gbmV3IEFycmF5KGogPSBhICsgYik7IGotLTspIGNbal0gPSAwOw0KDQogICAgLy8gTXVsdGlwbHkuDQoNCiAgICAvLyBpIGlzIGluaXRpYWxseSB4Yy5sZW5ndGguDQogICAgZm9yIChpID0gYjsgaS0tOykgew0KICAgICAgYiA9IDA7DQoNCiAgICAgIC8vIGEgaXMgeWMubGVuZ3RoLg0KICAgICAgZm9yIChqID0gYSArIGk7IGogPiBpOykgew0KDQogICAgICAgIC8vIEN1cnJlbnQgc3VtIG9mIHByb2R1Y3RzIGF0IHRoaXMgZGlnaXQgcG9zaXRpb24sIHBsdXMgY2FycnkuDQogICAgICAgIGIgPSBjW2pdICsgeWNbaV0gKiB4Y1tqIC0gaSAtIDFdICsgYjsNCiAgICAgICAgY1tqLS1dID0gYiAlIDEwOw0KDQogICAgICAgIC8vIGNhcnJ5DQogICAgICAgIGIgPSBiIC8gMTAgfCAwOw0KICAgICAgfQ0KDQogICAgICBjW2pdID0gYjsNCiAgICB9DQoNCiAgICAvLyBJbmNyZW1lbnQgcmVzdWx0IGV4cG9uZW50IGlmIHRoZXJlIGlzIGEgZmluYWwgY2FycnksIG90aGVyd2lzZSByZW1vdmUgbGVhZGluZyB6ZXJvLg0KICAgIGlmIChiKSArK3kuZTsNCiAgICBlbHNlIGMuc2hpZnQoKTsNCg0KICAgIC8vIFJlbW92ZSB0cmFpbGluZyB6ZXJvcy4NCiAgICBmb3IgKGkgPSBjLmxlbmd0aDsgIWNbLS1pXTspIGMucG9wKCk7DQogICAgeS5jID0gYzsNCg0KICAgIHJldHVybiB5Ow0KICB9Ow0KDQoNCiAgLyoNCiAgICogUmV0dXJuIGEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgdmFsdWUgb2YgdGhpcyBCaWcgaW4gZXhwb25lbnRpYWwgbm90YXRpb24gcm91bmRlZCB0byBkcCBmaXhlZA0KICAgKiBkZWNpbWFsIHBsYWNlcyB1c2luZyByb3VuZGluZyBtb2RlIHJtLCBvciBCaWcuUk0gaWYgcm0gaXMgbm90IHNwZWNpZmllZC4NCiAgICoNCiAgICogZHA/IHtudW1iZXJ9IERlY2ltYWwgcGxhY2VzOiBpbnRlZ2VyLCAwIHRvIE1BWF9EUCBpbmNsdXNpdmUuDQogICAqIHJtPyB7bnVtYmVyfSBSb3VuZGluZyBtb2RlOiAwIChkb3duKSwgMSAoaGFsZi11cCksIDIgKGhhbGYtZXZlbikgb3IgMyAodXApLg0KICAgKi8NCiAgUCQyLnRvRXhwb25lbnRpYWwgPSBmdW5jdGlvbiAoZHAsIHJtKSB7DQogICAgdmFyIHggPSB0aGlzLA0KICAgICAgbiA9IHguY1swXTsNCg0KICAgIGlmIChkcCAhPT0gVU5ERUZJTkVEKSB7DQogICAgICBpZiAoZHAgIT09IH5+ZHAgfHwgZHAgPCAwIHx8IGRwID4gTUFYX0RQKSB7DQogICAgICAgIHRocm93IEVycm9yKElOVkFMSURfRFApOw0KICAgICAgfQ0KICAgICAgeCA9IHJvdW5kKG5ldyB4LmNvbnN0cnVjdG9yKHgpLCArK2RwLCBybSk7DQogICAgICBmb3IgKDsgeC5jLmxlbmd0aCA8IGRwOykgeC5jLnB1c2goMCk7DQogICAgfQ0KDQogICAgcmV0dXJuIHN0cmluZ2lmeSh4LCB0cnVlLCAhIW4pOw0KICB9Ow0KDQoNCiAgLyoNCiAgICogUmV0dXJuIGEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgdmFsdWUgb2YgdGhpcyBCaWcgaW4gbm9ybWFsIG5vdGF0aW9uIHJvdW5kZWQgdG8gZHAgZml4ZWQNCiAgICogZGVjaW1hbCBwbGFjZXMgdXNpbmcgcm91bmRpbmcgbW9kZSBybSwgb3IgQmlnLlJNIGlmIHJtIGlzIG5vdCBzcGVjaWZpZWQuDQogICAqDQogICAqIGRwPyB7bnVtYmVyfSBEZWNpbWFsIHBsYWNlczogaW50ZWdlciwgMCB0byBNQVhfRFAgaW5jbHVzaXZlLg0KICAgKiBybT8ge251bWJlcn0gUm91bmRpbmcgbW9kZTogMCAoZG93biksIDEgKGhhbGYtdXApLCAyIChoYWxmLWV2ZW4pIG9yIDMgKHVwKS4NCiAgICoNCiAgICogKC0wKS50b0ZpeGVkKDApIGlzICcwJywgYnV0ICgtMC4xKS50b0ZpeGVkKDApIGlzICctMCcuDQogICAqICgtMCkudG9GaXhlZCgxKSBpcyAnMC4wJywgYnV0ICgtMC4wMSkudG9GaXhlZCgxKSBpcyAnLTAuMCcuDQogICAqLw0KICBQJDIudG9GaXhlZCA9IGZ1bmN0aW9uIChkcCwgcm0pIHsNCiAgICB2YXIgeCA9IHRoaXMsDQogICAgICBuID0geC5jWzBdOw0KDQogICAgaWYgKGRwICE9PSBVTkRFRklORUQpIHsNCiAgICAgIGlmIChkcCAhPT0gfn5kcCB8fCBkcCA8IDAgfHwgZHAgPiBNQVhfRFApIHsNCiAgICAgICAgdGhyb3cgRXJyb3IoSU5WQUxJRF9EUCk7DQogICAgICB9DQogICAgICB4ID0gcm91bmQobmV3IHguY29uc3RydWN0b3IoeCksIGRwICsgeC5lICsgMSwgcm0pOw0KDQogICAgICAvLyB4LmUgbWF5IGhhdmUgY2hhbmdlZCBpZiB0aGUgdmFsdWUgaXMgcm91bmRlZCB1cC4NCiAgICAgIGZvciAoZHAgPSBkcCArIHguZSArIDE7IHguYy5sZW5ndGggPCBkcDspIHguYy5wdXNoKDApOw0KICAgIH0NCg0KICAgIHJldHVybiBzdHJpbmdpZnkoeCwgZmFsc2UsICEhbik7DQogIH07DQoNCg0KICAvKg0KICAgKiBSZXR1cm4gYSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSB2YWx1ZSBvZiB0aGlzIEJpZy4NCiAgICogUmV0dXJuIGV4cG9uZW50aWFsIG5vdGF0aW9uIGlmIHRoaXMgQmlnIGhhcyBhIHBvc2l0aXZlIGV4cG9uZW50IGVxdWFsIHRvIG9yIGdyZWF0ZXIgdGhhbg0KICAgKiBCaWcuUEUsIG9yIGEgbmVnYXRpdmUgZXhwb25lbnQgZXF1YWwgdG8gb3IgbGVzcyB0aGFuIEJpZy5ORS4NCiAgICogT21pdCB0aGUgc2lnbiBmb3IgbmVnYXRpdmUgemVyby4NCiAgICovDQogIFAkMltTeW1ib2wuZm9yKCdub2RlanMudXRpbC5pbnNwZWN0LmN1c3RvbScpXSA9IFAkMi50b0pTT04gPSBQJDIudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7DQogICAgdmFyIHggPSB0aGlzLA0KICAgICAgQmlnID0geC5jb25zdHJ1Y3RvcjsNCiAgICByZXR1cm4gc3RyaW5naWZ5KHgsIHguZSA8PSBCaWcuTkUgfHwgeC5lID49IEJpZy5QRSwgISF4LmNbMF0pOw0KICB9Ow0KDQoNCiAgLyoNCiAgICogUmV0dXJuIHRoZSB2YWx1ZSBvZiB0aGlzIEJpZyBhcyBhIHByaW1pdHZlIG51bWJlci4NCiAgICovDQogIFAkMi50b051bWJlciA9IGZ1bmN0aW9uICgpIHsNCiAgICB2YXIgbiA9IE51bWJlcihzdHJpbmdpZnkodGhpcywgdHJ1ZSwgdHJ1ZSkpOw0KICAgIGlmICh0aGlzLmNvbnN0cnVjdG9yLnN0cmljdCA9PT0gdHJ1ZSAmJiAhdGhpcy5lcShuLnRvU3RyaW5nKCkpKSB7DQogICAgICB0aHJvdyBFcnJvcihOQU1FICsgJ0ltcHJlY2lzZSBjb252ZXJzaW9uJyk7DQogICAgfQ0KICAgIHJldHVybiBuOw0KICB9Ow0KDQoNCiAgLyoNCiAgICogUmV0dXJuIGEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgdmFsdWUgb2YgdGhpcyBCaWcgcm91bmRlZCB0byBzZCBzaWduaWZpY2FudCBkaWdpdHMgdXNpbmcNCiAgICogcm91bmRpbmcgbW9kZSBybSwgb3IgQmlnLlJNIGlmIHJtIGlzIG5vdCBzcGVjaWZpZWQuDQogICAqIFVzZSBleHBvbmVudGlhbCBub3RhdGlvbiBpZiBzZCBpcyBsZXNzIHRoYW4gdGhlIG51bWJlciBvZiBkaWdpdHMgbmVjZXNzYXJ5IHRvIHJlcHJlc2VudA0KICAgKiB0aGUgaW50ZWdlciBwYXJ0IG9mIHRoZSB2YWx1ZSBpbiBub3JtYWwgbm90YXRpb24uDQogICAqDQogICAqIHNkIHtudW1iZXJ9IFNpZ25pZmljYW50IGRpZ2l0czogaW50ZWdlciwgMSB0byBNQVhfRFAgaW5jbHVzaXZlLg0KICAgKiBybT8ge251bWJlcn0gUm91bmRpbmcgbW9kZTogMCAoZG93biksIDEgKGhhbGYtdXApLCAyIChoYWxmLWV2ZW4pIG9yIDMgKHVwKS4NCiAgICovDQogIFAkMi50b1ByZWNpc2lvbiA9IGZ1bmN0aW9uIChzZCwgcm0pIHsNCiAgICB2YXIgeCA9IHRoaXMsDQogICAgICBCaWcgPSB4LmNvbnN0cnVjdG9yLA0KICAgICAgbiA9IHguY1swXTsNCg0KICAgIGlmIChzZCAhPT0gVU5ERUZJTkVEKSB7DQogICAgICBpZiAoc2QgIT09IH5+c2QgfHwgc2QgPCAxIHx8IHNkID4gTUFYX0RQKSB7DQogICAgICAgIHRocm93IEVycm9yKElOVkFMSUQgKyAncHJlY2lzaW9uJyk7DQogICAgICB9DQogICAgICB4ID0gcm91bmQobmV3IEJpZyh4KSwgc2QsIHJtKTsNCiAgICAgIGZvciAoOyB4LmMubGVuZ3RoIDwgc2Q7KSB4LmMucHVzaCgwKTsNCiAgICB9DQoNCiAgICByZXR1cm4gc3RyaW5naWZ5KHgsIHNkIDw9IHguZSB8fCB4LmUgPD0gQmlnLk5FIHx8IHguZSA+PSBCaWcuUEUsICEhbik7DQogIH07DQoNCg0KICAvKg0KICAgKiBSZXR1cm4gYSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSB2YWx1ZSBvZiB0aGlzIEJpZy4NCiAgICogUmV0dXJuIGV4cG9uZW50aWFsIG5vdGF0aW9uIGlmIHRoaXMgQmlnIGhhcyBhIHBvc2l0aXZlIGV4cG9uZW50IGVxdWFsIHRvIG9yIGdyZWF0ZXIgdGhhbg0KICAgKiBCaWcuUEUsIG9yIGEgbmVnYXRpdmUgZXhwb25lbnQgZXF1YWwgdG8gb3IgbGVzcyB0aGFuIEJpZy5ORS4NCiAgICogSW5jbHVkZSB0aGUgc2lnbiBmb3IgbmVnYXRpdmUgemVyby4NCiAgICovDQogIFAkMi52YWx1ZU9mID0gZnVuY3Rpb24gKCkgew0KICAgIHZhciB4ID0gdGhpcywNCiAgICAgIEJpZyA9IHguY29uc3RydWN0b3I7DQogICAgaWYgKEJpZy5zdHJpY3QgPT09IHRydWUpIHsNCiAgICAgIHRocm93IEVycm9yKE5BTUUgKyAndmFsdWVPZiBkaXNhbGxvd2VkJyk7DQogICAgfQ0KICAgIHJldHVybiBzdHJpbmdpZnkoeCwgeC5lIDw9IEJpZy5ORSB8fCB4LmUgPj0gQmlnLlBFLCB0cnVlKTsNCiAgfTsNCg0KDQogIC8vIEV4cG9ydA0KDQoNCiAgdmFyIEJpZyA9IF9CaWdfKCk7CgogIHZhciBlJDQ9eyIiOlsiPGVtPiIsIjwvZW0+Il0sXzpbIjxzdHJvbmc+IiwiPC9zdHJvbmc+Il0sIioiOlsiPHN0cm9uZz4iLCI8L3N0cm9uZz4iXSwifiI6WyI8cz4iLCI8L3M+Il0sIlxuIjpbIjxiciAvPiJdLCIgIjpbIjxiciAvPiJdLCItIjpbIjxociAvPiJdfTtmdW5jdGlvbiBuJDIoZSl7cmV0dXJuIGUucmVwbGFjZShSZWdFeHAoIl4iKyhlLm1hdGNoKC9eKFx0fCApKy8pfHwiIilbMF0sImdtIiksIiIpfWZ1bmN0aW9uIHIkMihlKXtyZXR1cm4gKGUrIiIpLnJlcGxhY2UoLyIvZywiJnF1b3Q7IikucmVwbGFjZSgvPC9nLCImbHQ7IikucmVwbGFjZSgvPi9nLCImZ3Q7Iil9ZnVuY3Rpb24gdCQyKGEsbyl7dmFyIGMsbCxzLGcscCx1PS8oKD86XnxcbispKD86XG4tLS0rfFwqIFwqKD86IFwqKSspXG4pfCg/Ol5gYGAgKihcdyopXG4oW1xzXFNdKj8pXG5gYGAkKXwoKD86KD86XnxcbispKD86XHR8ICB7Mix9KS4rKStcbiopfCgoPzooPzpefFxuKShbPiorLV18XGQrXC4pXHMrLiopKyl8KD86IVxbKFteXF1dKj8pXF1cKChbXildKz8pXCkpfChcWyl8KFxdKD86XCgoW14pXSs/KVwpKT8pfCg/Oig/Ol58XG4rKShbXlxzXS4qKVxuKC17Myx9fD17Myx9KSg/OlxuK3wkKSl8KD86KD86XnxcbispKCN7MSw2fSlccyooLispKD86XG4rfCQpKXwoPzpgKFteYF0uKj8pYCl8KCAgXG5cbip8XG57Mix9fF9ffFwqXCp8W18qXXx+fil8PChbXj5dKyk+L2dtLGg9W10sbT0iIixpPW98fHt9LGY9MDtmdW5jdGlvbiBkKG4pe3ZhciByPWUkNFtuWzFdfHwiIl0sdD1oW2gubGVuZ3RoLTFdPT1uO3JldHVybiByP3JbMV0/KHQ/aC5wb3AoKTpoLnB1c2gobiksclswfHRdKTpyWzBdOm59ZnVuY3Rpb24gJCgpe2Zvcih2YXIgZT0iIjtoLmxlbmd0aDspZSs9ZChoW2gubGVuZ3RoLTFdKTtyZXR1cm4gZX1mb3IoYT1hLnJlcGxhY2UoL15cWyguKz8pXF06XHMqKC4rKSQvZ20sZnVuY3Rpb24oZSxuLHIpe3JldHVybiBpW24udG9Mb3dlckNhc2UoKV09ciwiIn0pLnJlcGxhY2UoL15cbit8XG4rJC9nLCIiKTtzPXUuZXhlYyhhKTspbD1hLnN1YnN0cmluZyhmLHMuaW5kZXgpLGY9dS5sYXN0SW5kZXgsYz1zWzBdLGwubWF0Y2goL1teXFxdKFxcXFwpKlxcJC8pfHwoKHA9c1szXXx8c1s0XSk/Yz0nPHByZSBjbGFzcz0iY29kZSAnKyhzWzRdPyJwb2V0cnkiOnNbMl0udG9Mb3dlckNhc2UoKSkrJyI+PGNvZGUnKyhzWzJdPycgY2xhc3M9Imxhbmd1YWdlLScrc1syXS50b0xvd2VyQ2FzZSgpKyciJzoiIikrIj4iK24kMihyJDIocCkucmVwbGFjZSgvXlxuK3xcbiskL2csIiIpKSsiPC9jb2RlPjwvcHJlPiI6KHA9c1s2XSk/KHAubWF0Y2goL1wuLykmJihzWzVdPXNbNV0ucmVwbGFjZSgvXlxkKy9nbSwiIikpLGc9dCQyKG4kMihzWzVdLnJlcGxhY2UoL15ccypbPiorLi1dL2dtLCIiKSkpLCI+Ij09cD9wPSJibG9ja3F1b3RlIjoocD1wLm1hdGNoKC9cLi8pPyJvbCI6InVsIixnPWcucmVwbGFjZSgvXiguKikoXG58JCkvZ20sIjxsaT4kMTwvbGk+IikpLGM9IjwiK3ArIj4iK2crIjwvIitwKyI+Iik6c1s4XT9jPSc8aW1nIHNyYz0iJytyJDIoc1s4XSkrJyIgYWx0PSInK3IkMihzWzddKSsnIj4nOnNbMTBdPyhtPW0ucmVwbGFjZSgiPGE+IiwnPGEgaHJlZj0iJytyJDIoc1sxMV18fGlbbC50b0xvd2VyQ2FzZSgpXSkrJyI+JyksYz0kKCkrIjwvYT4iKTpzWzE4XSYmL14oaHR0cHM/fG1haWx0byk6Ly50ZXN0KHNbMThdKT9jPSc8YSBocmVmPSInK3IkMihzWzE4XSkrJyI+JytyJDIoc1sxOF0pKyI8L2E+IjpzWzldP2M9IjxhPiI6c1sxMl18fHNbMTRdP2M9IjwiKyhwPSJoIisoc1sxNF0/c1sxNF0ubGVuZ3RoOnNbMTNdPiI9Ij8xOjIpKSsiPiIrdCQyKHNbMTJdfHxzWzE1XSxpKSsiPC8iK3ArIj4iOnNbMTZdP2M9Ijxjb2RlPiIrciQyKHNbMTZdKSsiPC9jb2RlPiI6KHNbMTddfHxzWzFdKSYmKGM9ZChzWzE3XXx8Ii0tIikpKSxtKz1sLG0rPWM7cmV0dXJuIChtK2Euc3Vic3RyaW5nKGYpKyQoKSkucmVwbGFjZSgvXlxuK3xcbiskL2csIiIpfQoKICB2YXIgY2xhc3NuYW1lcyA9IHtleHBvcnRzOiB7fX07CgogIC8qIQogICAgQ29weXJpZ2h0IChjKSAyMDE4IEplZCBXYXRzb24uCiAgICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UgKE1JVCksIHNlZQogICAgaHR0cDovL2plZHdhdHNvbi5naXRodWIuaW8vY2xhc3NuYW1lcwogICovCgogIChmdW5jdGlvbiAobW9kdWxlKSB7CiAgLyogZ2xvYmFsIGRlZmluZSAqLwoKICAoZnVuY3Rpb24gKCkgewoKICAJdmFyIGhhc093biA9IHt9Lmhhc093blByb3BlcnR5OwoKICAJZnVuY3Rpb24gY2xhc3NOYW1lcygpIHsKICAJCXZhciBjbGFzc2VzID0gW107CgogIAkJZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKICAJCQl2YXIgYXJnID0gYXJndW1lbnRzW2ldOwogIAkJCWlmICghYXJnKSBjb250aW51ZTsKCiAgCQkJdmFyIGFyZ1R5cGUgPSB0eXBlb2YgYXJnOwoKICAJCQlpZiAoYXJnVHlwZSA9PT0gJ3N0cmluZycgfHwgYXJnVHlwZSA9PT0gJ251bWJlcicpIHsKICAJCQkJY2xhc3Nlcy5wdXNoKGFyZyk7CiAgCQkJfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGFyZykpIHsKICAJCQkJaWYgKGFyZy5sZW5ndGgpIHsKICAJCQkJCXZhciBpbm5lciA9IGNsYXNzTmFtZXMuYXBwbHkobnVsbCwgYXJnKTsKICAJCQkJCWlmIChpbm5lcikgewogIAkJCQkJCWNsYXNzZXMucHVzaChpbm5lcik7CiAgCQkJCQl9CiAgCQkJCX0KICAJCQl9IGVsc2UgaWYgKGFyZ1R5cGUgPT09ICdvYmplY3QnKSB7CiAgCQkJCWlmIChhcmcudG9TdHJpbmcgPT09IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcpIHsKICAJCQkJCWZvciAodmFyIGtleSBpbiBhcmcpIHsKICAJCQkJCQlpZiAoaGFzT3duLmNhbGwoYXJnLCBrZXkpICYmIGFyZ1trZXldKSB7CiAgCQkJCQkJCWNsYXNzZXMucHVzaChrZXkpOwogIAkJCQkJCX0KICAJCQkJCX0KICAJCQkJfSBlbHNlIHsKICAJCQkJCWNsYXNzZXMucHVzaChhcmcudG9TdHJpbmcoKSk7CiAgCQkJCX0KICAJCQl9CiAgCQl9CgogIAkJcmV0dXJuIGNsYXNzZXMuam9pbignICcpOwogIAl9CgogIAlpZiAobW9kdWxlLmV4cG9ydHMpIHsKICAJCWNsYXNzTmFtZXMuZGVmYXVsdCA9IGNsYXNzTmFtZXM7CiAgCQltb2R1bGUuZXhwb3J0cyA9IGNsYXNzTmFtZXM7CiAgCX0gZWxzZSB7CiAgCQl3aW5kb3cuY2xhc3NOYW1lcyA9IGNsYXNzTmFtZXM7CiAgCX0KICB9KCkpOwogIH0oY2xhc3NuYW1lcykpOwoKICB2YXIgY2xhc3NOYW1lcyA9IGNsYXNzbmFtZXMuZXhwb3J0czsKCiAgdmFyIG4kMSxsJDIsdSQxLHQkMSxvJDMsciQxLGYkMSxlJDM9e30sYyQxPVtdLHMkMT0vYWNpdHxleCg/OnN8Z3xufHB8JCl8cnBofGdyaWR8b3dzfG1uY3xudHd8aW5lW2NoXXx6b298Xm9yZHxpdGVyYS9pO2Z1bmN0aW9uIGEkMihuLGwpe2Zvcih2YXIgdSBpbiBsKW5bdV09bFt1XTtyZXR1cm4gbn1mdW5jdGlvbiBoJDEobil7dmFyIGw9bi5wYXJlbnROb2RlO2wmJmwucmVtb3ZlQ2hpbGQobik7fWZ1bmN0aW9uIHYkMShsLHUsaSl7dmFyIHQsbyxyLGY9e307Zm9yKHIgaW4gdSkia2V5Ij09cj90PXVbcl06InJlZiI9PXI/bz11W3JdOmZbcl09dVtyXTtpZihhcmd1bWVudHMubGVuZ3RoPjImJihmLmNoaWxkcmVuPWFyZ3VtZW50cy5sZW5ndGg+Mz9uJDEuY2FsbChhcmd1bWVudHMsMik6aSksImZ1bmN0aW9uIj09dHlwZW9mIGwmJm51bGwhPWwuZGVmYXVsdFByb3BzKWZvcihyIGluIGwuZGVmYXVsdFByb3BzKXZvaWQgMD09PWZbcl0mJihmW3JdPWwuZGVmYXVsdFByb3BzW3JdKTtyZXR1cm4geSQxKGwsZix0LG8sbnVsbCl9ZnVuY3Rpb24geSQxKG4saSx0LG8scil7dmFyIGY9e3R5cGU6bixwcm9wczppLGtleTp0LHJlZjpvLF9fazpudWxsLF9fOm51bGwsX19iOjAsX19lOm51bGwsX19kOnZvaWQgMCxfX2M6bnVsbCxfX2g6bnVsbCxjb25zdHJ1Y3Rvcjp2b2lkIDAsX192Om51bGw9PXI/Kyt1JDE6cn07cmV0dXJuIG51bGwhPWwkMi52bm9kZSYmbCQyLnZub2RlKGYpLGZ9ZnVuY3Rpb24gcCQyKCl7cmV0dXJuIHtjdXJyZW50Om51bGx9fWZ1bmN0aW9uIGQkMShuKXtyZXR1cm4gbi5jaGlsZHJlbn1mdW5jdGlvbiBfJDEobixsKXt0aGlzLnByb3BzPW4sdGhpcy5jb250ZXh0PWw7fWZ1bmN0aW9uIGskMihuLGwpe2lmKG51bGw9PWwpcmV0dXJuIG4uX18/ayQyKG4uX18sbi5fXy5fX2suaW5kZXhPZihuKSsxKTpudWxsO2Zvcih2YXIgdTtsPG4uX19rLmxlbmd0aDtsKyspaWYobnVsbCE9KHU9bi5fX2tbbF0pJiZudWxsIT11Ll9fZSlyZXR1cm4gdS5fX2U7cmV0dXJuICJmdW5jdGlvbiI9PXR5cGVvZiBuLnR5cGU/ayQyKG4pOm51bGx9ZnVuY3Rpb24gYiQxKG4pe3ZhciBsLHU7aWYobnVsbCE9KG49bi5fXykmJm51bGwhPW4uX19jKXtmb3Iobi5fX2U9bi5fX2MuYmFzZT1udWxsLGw9MDtsPG4uX19rLmxlbmd0aDtsKyspaWYobnVsbCE9KHU9bi5fX2tbbF0pJiZudWxsIT11Ll9fZSl7bi5fX2U9bi5fX2MuYmFzZT11Ll9fZTticmVha31yZXR1cm4gYiQxKG4pfX1mdW5jdGlvbiBtJDEobil7KCFuLl9fZCYmKG4uX19kPSEwKSYmdCQxLnB1c2gobikmJiFnJDIuX19yKyt8fHIkMSE9PWwkMi5kZWJvdW5jZVJlbmRlcmluZykmJigociQxPWwkMi5kZWJvdW5jZVJlbmRlcmluZyl8fG8kMykoZyQyKTt9ZnVuY3Rpb24gZyQyKCl7Zm9yKHZhciBuO2ckMi5fX3I9dCQxLmxlbmd0aDspbj10JDEuc29ydChmdW5jdGlvbihuLGwpe3JldHVybiBuLl9fdi5fX2ItbC5fX3YuX19ifSksdCQxPVtdLG4uc29tZShmdW5jdGlvbihuKXt2YXIgbCx1LGksdCxvLHI7bi5fX2QmJihvPSh0PShsPW4pLl9fdikuX19lLChyPWwuX19QKSYmKHU9W10sKGk9YSQyKHt9LHQpKS5fX3Y9dC5fX3YrMSxqJDIocix0LGksbC5fX24sdm9pZCAwIT09ci5vd25lclNWR0VsZW1lbnQsbnVsbCE9dC5fX2g/W29dOm51bGwsdSxudWxsPT1vP2skMih0KTpvLHQuX19oKSx6JDEodSx0KSx0Ll9fZSE9byYmYiQxKHQpKSk7fSk7fWZ1bmN0aW9uIHckMihuLGwsdSxpLHQsbyxyLGYscyxhKXt2YXIgaCx2LHAsXyxiLG0sZyx3PWkmJmkuX19rfHxjJDEsQT13Lmxlbmd0aDtmb3IodS5fX2s9W10saD0wO2g8bC5sZW5ndGg7aCsrKWlmKG51bGwhPShfPXUuX19rW2hdPW51bGw9PShfPWxbaF0pfHwiYm9vbGVhbiI9PXR5cGVvZiBfP251bGw6InN0cmluZyI9PXR5cGVvZiBffHwibnVtYmVyIj09dHlwZW9mIF98fCJiaWdpbnQiPT10eXBlb2YgXz95JDEobnVsbCxfLG51bGwsbnVsbCxfKTpBcnJheS5pc0FycmF5KF8pP3kkMShkJDEse2NoaWxkcmVuOl99LG51bGwsbnVsbCxudWxsKTpfLl9fYj4wP3kkMShfLnR5cGUsXy5wcm9wcyxfLmtleSxudWxsLF8uX192KTpfKSl7aWYoXy5fXz11LF8uX19iPXUuX19iKzEsbnVsbD09PShwPXdbaF0pfHxwJiZfLmtleT09cC5rZXkmJl8udHlwZT09PXAudHlwZSl3W2hdPXZvaWQgMDtlbHNlIGZvcih2PTA7djxBO3YrKyl7aWYoKHA9d1t2XSkmJl8ua2V5PT1wLmtleSYmXy50eXBlPT09cC50eXBlKXt3W3ZdPXZvaWQgMDticmVha31wPW51bGw7fWokMihuLF8scD1wfHxlJDMsdCxvLHIsZixzLGEpLGI9Xy5fX2UsKHY9Xy5yZWYpJiZwLnJlZiE9diYmKGd8fChnPVtdKSxwLnJlZiYmZy5wdXNoKHAucmVmLG51bGwsXyksZy5wdXNoKHYsXy5fX2N8fGIsXykpLG51bGwhPWI/KG51bGw9PW0mJihtPWIpLCJmdW5jdGlvbiI9PXR5cGVvZiBfLnR5cGUmJm51bGwhPV8uX19rJiZfLl9faz09PXAuX19rP18uX19kPXM9eCQyKF8scyxuKTpzPVAkMShuLF8scCx3LGIscyksYXx8Im9wdGlvbiIhPT11LnR5cGU/ImZ1bmN0aW9uIj09dHlwZW9mIHUudHlwZSYmKHUuX19kPXMpOm4udmFsdWU9IiIpOnMmJnAuX19lPT1zJiZzLnBhcmVudE5vZGUhPW4mJihzPWskMihwKSk7fWZvcih1Ll9fZT1tLGg9QTtoLS07KW51bGwhPXdbaF0mJigiZnVuY3Rpb24iPT10eXBlb2YgdS50eXBlJiZudWxsIT13W2hdLl9fZSYmd1toXS5fX2U9PXUuX19kJiYodS5fX2Q9ayQyKGksaCsxKSksTiQxKHdbaF0sd1toXSkpO2lmKGcpZm9yKGg9MDtoPGcubGVuZ3RoO2grKylNJDEoZ1toXSxnWysraF0sZ1srK2hdKTt9ZnVuY3Rpb24geCQyKG4sbCx1KXt2YXIgaSx0O2ZvcihpPTA7aTxuLl9fay5sZW5ndGg7aSsrKSh0PW4uX19rW2ldKSYmKHQuX189bixsPSJmdW5jdGlvbiI9PXR5cGVvZiB0LnR5cGU/eCQyKHQsbCx1KTpQJDEodSx0LHQsbi5fX2ssdC5fX2UsbCkpO3JldHVybiBsfWZ1bmN0aW9uIEEkMihuLGwpe3JldHVybiBsPWx8fFtdLG51bGw9PW58fCJib29sZWFuIj09dHlwZW9mIG58fChBcnJheS5pc0FycmF5KG4pP24uc29tZShmdW5jdGlvbihuKXtBJDIobixsKTt9KTpsLnB1c2gobikpLGx9ZnVuY3Rpb24gUCQxKG4sbCx1LGksdCxvKXt2YXIgcixmLGU7aWYodm9pZCAwIT09bC5fX2Qpcj1sLl9fZCxsLl9fZD12b2lkIDA7ZWxzZSBpZihudWxsPT11fHx0IT1vfHxudWxsPT10LnBhcmVudE5vZGUpbjppZihudWxsPT1vfHxvLnBhcmVudE5vZGUhPT1uKW4uYXBwZW5kQ2hpbGQodCkscj1udWxsO2Vsc2Uge2ZvcihmPW8sZT0wOyhmPWYubmV4dFNpYmxpbmcpJiZlPGkubGVuZ3RoO2UrPTIpaWYoZj09dClicmVhayBuO24uaW5zZXJ0QmVmb3JlKHQsbykscj1vO31yZXR1cm4gdm9pZCAwIT09cj9yOnQubmV4dFNpYmxpbmd9ZnVuY3Rpb24gQyQxKG4sbCx1LGksdCl7dmFyIG87Zm9yKG8gaW4gdSkiY2hpbGRyZW4iPT09b3x8ImtleSI9PT1vfHxvIGluIGx8fEgkMShuLG8sbnVsbCx1W29dLGkpO2ZvcihvIGluIGwpdCYmImZ1bmN0aW9uIiE9dHlwZW9mIGxbb118fCJjaGlsZHJlbiI9PT1vfHwia2V5Ij09PW98fCJ2YWx1ZSI9PT1vfHwiY2hlY2tlZCI9PT1vfHx1W29dPT09bFtvXXx8SCQxKG4sbyxsW29dLHVbb10saSk7fWZ1bmN0aW9uICQkMShuLGwsdSl7Ii0iPT09bFswXT9uLnNldFByb3BlcnR5KGwsdSk6bltsXT1udWxsPT11PyIiOiJudW1iZXIiIT10eXBlb2YgdXx8cyQxLnRlc3QobCk/dTp1KyJweCI7fWZ1bmN0aW9uIEgkMShuLGwsdSxpLHQpe3ZhciBvO246aWYoInN0eWxlIj09PWwpaWYoInN0cmluZyI9PXR5cGVvZiB1KW4uc3R5bGUuY3NzVGV4dD11O2Vsc2Uge2lmKCJzdHJpbmciPT10eXBlb2YgaSYmKG4uc3R5bGUuY3NzVGV4dD1pPSIiKSxpKWZvcihsIGluIGkpdSYmbCBpbiB1fHwkJDEobi5zdHlsZSxsLCIiKTtpZih1KWZvcihsIGluIHUpaSYmdVtsXT09PWlbbF18fCQkMShuLnN0eWxlLGwsdVtsXSk7fWVsc2UgaWYoIm8iPT09bFswXSYmIm4iPT09bFsxXSlvPWwhPT0obD1sLnJlcGxhY2UoL0NhcHR1cmUkLywiIikpLGw9bC50b0xvd2VyQ2FzZSgpaW4gbj9sLnRvTG93ZXJDYXNlKCkuc2xpY2UoMik6bC5zbGljZSgyKSxuLmx8fChuLmw9e30pLG4ubFtsK29dPXUsdT9pfHxuLmFkZEV2ZW50TGlzdGVuZXIobCxvP1QkMjpJJDEsbyk6bi5yZW1vdmVFdmVudExpc3RlbmVyKGwsbz9UJDI6SSQxLG8pO2Vsc2UgaWYoImRhbmdlcm91c2x5U2V0SW5uZXJIVE1MIiE9PWwpe2lmKHQpbD1sLnJlcGxhY2UoL3hsaW5rW0g6aF0vLCJoIikucmVwbGFjZSgvc05hbWUkLywicyIpO2Vsc2UgaWYoImhyZWYiIT09bCYmImxpc3QiIT09bCYmImZvcm0iIT09bCYmInRhYkluZGV4IiE9PWwmJiJkb3dubG9hZCIhPT1sJiZsIGluIG4pdHJ5e25bbF09bnVsbD09dT8iIjp1O2JyZWFrIG59Y2F0Y2gobil7fSJmdW5jdGlvbiI9PXR5cGVvZiB1fHwobnVsbCE9dSYmKCExIT09dXx8ImEiPT09bFswXSYmInIiPT09bFsxXSk/bi5zZXRBdHRyaWJ1dGUobCx1KTpuLnJlbW92ZUF0dHJpYnV0ZShsKSk7fX1mdW5jdGlvbiBJJDEobil7dGhpcy5sW24udHlwZSshMV0obCQyLmV2ZW50P2wkMi5ldmVudChuKTpuKTt9ZnVuY3Rpb24gVCQyKG4pe3RoaXMubFtuLnR5cGUrITBdKGwkMi5ldmVudD9sJDIuZXZlbnQobik6bik7fWZ1bmN0aW9uIGokMihuLHUsaSx0LG8scixmLGUsYyl7dmFyIHMsaCx2LHkscCxrLGIsbSxnLHgsQSxQPXUudHlwZTtpZih2b2lkIDAhPT11LmNvbnN0cnVjdG9yKXJldHVybiBudWxsO251bGwhPWkuX19oJiYoYz1pLl9faCxlPXUuX19lPWkuX19lLHUuX19oPW51bGwscj1bZV0pLChzPWwkMi5fX2IpJiZzKHUpO3RyeXtuOmlmKCJmdW5jdGlvbiI9PXR5cGVvZiBQKXtpZihtPXUucHJvcHMsZz0ocz1QLmNvbnRleHRUeXBlKSYmdFtzLl9fY10seD1zP2c/Zy5wcm9wcy52YWx1ZTpzLl9fOnQsaS5fX2M/Yj0oaD11Ll9fYz1pLl9fYykuX189aC5fX0U6KCJwcm90b3R5cGUiaW4gUCYmUC5wcm90b3R5cGUucmVuZGVyP3UuX19jPWg9bmV3IFAobSx4KToodS5fX2M9aD1uZXcgXyQxKG0seCksaC5jb25zdHJ1Y3Rvcj1QLGgucmVuZGVyPU8kMSksZyYmZy5zdWIoaCksaC5wcm9wcz1tLGguc3RhdGV8fChoLnN0YXRlPXt9KSxoLmNvbnRleHQ9eCxoLl9fbj10LHY9aC5fX2Q9ITAsaC5fX2g9W10pLG51bGw9PWguX19zJiYoaC5fX3M9aC5zdGF0ZSksbnVsbCE9UC5nZXREZXJpdmVkU3RhdGVGcm9tUHJvcHMmJihoLl9fcz09aC5zdGF0ZSYmKGguX19zPWEkMih7fSxoLl9fcykpLGEkMihoLl9fcyxQLmdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcyhtLGguX19zKSkpLHk9aC5wcm9wcyxwPWguc3RhdGUsdiludWxsPT1QLmdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcyYmbnVsbCE9aC5jb21wb25lbnRXaWxsTW91bnQmJmguY29tcG9uZW50V2lsbE1vdW50KCksbnVsbCE9aC5jb21wb25lbnREaWRNb3VudCYmaC5fX2gucHVzaChoLmNvbXBvbmVudERpZE1vdW50KTtlbHNlIHtpZihudWxsPT1QLmdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcyYmbSE9PXkmJm51bGwhPWguY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyYmaC5jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG0seCksIWguX19lJiZudWxsIT1oLnNob3VsZENvbXBvbmVudFVwZGF0ZSYmITE9PT1oLnNob3VsZENvbXBvbmVudFVwZGF0ZShtLGguX19zLHgpfHx1Ll9fdj09PWkuX192KXtoLnByb3BzPW0saC5zdGF0ZT1oLl9fcyx1Ll9fdiE9PWkuX192JiYoaC5fX2Q9ITEpLGguX192PXUsdS5fX2U9aS5fX2UsdS5fX2s9aS5fX2ssdS5fX2suZm9yRWFjaChmdW5jdGlvbihuKXtuJiYobi5fXz11KTt9KSxoLl9faC5sZW5ndGgmJmYucHVzaChoKTticmVhayBufW51bGwhPWguY29tcG9uZW50V2lsbFVwZGF0ZSYmaC5jb21wb25lbnRXaWxsVXBkYXRlKG0saC5fX3MseCksbnVsbCE9aC5jb21wb25lbnREaWRVcGRhdGUmJmguX19oLnB1c2goZnVuY3Rpb24oKXtoLmNvbXBvbmVudERpZFVwZGF0ZSh5LHAsayk7fSk7fWguY29udGV4dD14LGgucHJvcHM9bSxoLnN0YXRlPWguX19zLChzPWwkMi5fX3IpJiZzKHUpLGguX19kPSExLGguX192PXUsaC5fX1A9bixzPWgucmVuZGVyKGgucHJvcHMsaC5zdGF0ZSxoLmNvbnRleHQpLGguc3RhdGU9aC5fX3MsbnVsbCE9aC5nZXRDaGlsZENvbnRleHQmJih0PWEkMihhJDIoe30sdCksaC5nZXRDaGlsZENvbnRleHQoKSkpLHZ8fG51bGw9PWguZ2V0U25hcHNob3RCZWZvcmVVcGRhdGV8fChrPWguZ2V0U25hcHNob3RCZWZvcmVVcGRhdGUoeSxwKSksQT1udWxsIT1zJiZzLnR5cGU9PT1kJDEmJm51bGw9PXMua2V5P3MucHJvcHMuY2hpbGRyZW46cyx3JDIobixBcnJheS5pc0FycmF5KEEpP0E6W0FdLHUsaSx0LG8scixmLGUsYyksaC5iYXNlPXUuX19lLHUuX19oPW51bGwsaC5fX2gubGVuZ3RoJiZmLnB1c2goaCksYiYmKGguX19FPWguX189bnVsbCksaC5fX2U9ITE7fWVsc2UgbnVsbD09ciYmdS5fX3Y9PT1pLl9fdj8odS5fX2s9aS5fX2ssdS5fX2U9aS5fX2UpOnUuX19lPUwkMShpLl9fZSx1LGksdCxvLHIsZixjKTsocz1sJDIuZGlmZmVkKSYmcyh1KTt9Y2F0Y2gobil7dS5fX3Y9bnVsbCwoY3x8bnVsbCE9cikmJih1Ll9fZT1lLHUuX19oPSEhYyxyW3IuaW5kZXhPZihlKV09bnVsbCksbCQyLl9fZShuLHUsaSk7fX1mdW5jdGlvbiB6JDEobix1KXtsJDIuX19jJiZsJDIuX19jKHUsbiksbi5zb21lKGZ1bmN0aW9uKHUpe3RyeXtuPXUuX19oLHUuX19oPVtdLG4uc29tZShmdW5jdGlvbihuKXtuLmNhbGwodSk7fSk7fWNhdGNoKG4pe2wkMi5fX2Uobix1Ll9fdik7fX0pO31mdW5jdGlvbiBMJDEobCx1LGksdCxvLHIsZixjKXt2YXIgcyxhLHYseT1pLnByb3BzLHA9dS5wcm9wcyxkPXUudHlwZSxfPTA7aWYoInN2ZyI9PT1kJiYobz0hMCksbnVsbCE9cilmb3IoO188ci5sZW5ndGg7XysrKWlmKChzPXJbX10pJiYocz09PWx8fChkP3MubG9jYWxOYW1lPT1kOjM9PXMubm9kZVR5cGUpKSl7bD1zLHJbX109bnVsbDticmVha31pZihudWxsPT1sKXtpZihudWxsPT09ZClyZXR1cm4gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUocCk7bD1vP2RvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLGQpOmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoZCxwLmlzJiZwKSxyPW51bGwsYz0hMTt9aWYobnVsbD09PWQpeT09PXB8fGMmJmwuZGF0YT09PXB8fChsLmRhdGE9cCk7ZWxzZSB7aWYocj1yJiZuJDEuY2FsbChsLmNoaWxkTm9kZXMpLGE9KHk9aS5wcm9wc3x8ZSQzKS5kYW5nZXJvdXNseVNldElubmVySFRNTCx2PXAuZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUwsIWMpe2lmKG51bGwhPXIpZm9yKHk9e30sXz0wO188bC5hdHRyaWJ1dGVzLmxlbmd0aDtfKyspeVtsLmF0dHJpYnV0ZXNbX10ubmFtZV09bC5hdHRyaWJ1dGVzW19dLnZhbHVlOyh2fHxhKSYmKHYmJihhJiZ2Ll9faHRtbD09YS5fX2h0bWx8fHYuX19odG1sPT09bC5pbm5lckhUTUwpfHwobC5pbm5lckhUTUw9diYmdi5fX2h0bWx8fCIiKSk7fWlmKEMkMShsLHAseSxvLGMpLHYpdS5fX2s9W107ZWxzZSBpZihfPXUucHJvcHMuY2hpbGRyZW4sdyQyKGwsQXJyYXkuaXNBcnJheShfKT9fOltfXSx1LGksdCxvJiYiZm9yZWlnbk9iamVjdCIhPT1kLHIsZixyP3JbMF06aS5fX2smJmskMihpLDApLGMpLG51bGwhPXIpZm9yKF89ci5sZW5ndGg7Xy0tOyludWxsIT1yW19dJiZoJDEocltfXSk7Y3x8KCJ2YWx1ZSJpbiBwJiZ2b2lkIDAhPT0oXz1wLnZhbHVlKSYmKF8hPT1sLnZhbHVlfHwicHJvZ3Jlc3MiPT09ZCYmIV8pJiZIJDEobCwidmFsdWUiLF8seS52YWx1ZSwhMSksImNoZWNrZWQiaW4gcCYmdm9pZCAwIT09KF89cC5jaGVja2VkKSYmXyE9PWwuY2hlY2tlZCYmSCQxKGwsImNoZWNrZWQiLF8seS5jaGVja2VkLCExKSk7fXJldHVybiBsfWZ1bmN0aW9uIE0kMShuLHUsaSl7dHJ5eyJmdW5jdGlvbiI9PXR5cGVvZiBuP24odSk6bi5jdXJyZW50PXU7fWNhdGNoKG4pe2wkMi5fX2UobixpKTt9fWZ1bmN0aW9uIE4kMShuLHUsaSl7dmFyIHQsbztpZihsJDIudW5tb3VudCYmbCQyLnVubW91bnQobiksKHQ9bi5yZWYpJiYodC5jdXJyZW50JiZ0LmN1cnJlbnQhPT1uLl9fZXx8TSQxKHQsbnVsbCx1KSksbnVsbCE9KHQ9bi5fX2MpKXtpZih0LmNvbXBvbmVudFdpbGxVbm1vdW50KXRyeXt0LmNvbXBvbmVudFdpbGxVbm1vdW50KCk7fWNhdGNoKG4pe2wkMi5fX2Uobix1KTt9dC5iYXNlPXQuX19QPW51bGw7fWlmKHQ9bi5fX2spZm9yKG89MDtvPHQubGVuZ3RoO28rKyl0W29dJiZOJDEodFtvXSx1LCJmdW5jdGlvbiIhPXR5cGVvZiBuLnR5cGUpO2l8fG51bGw9PW4uX19lfHxoJDEobi5fX2UpLG4uX19lPW4uX19kPXZvaWQgMDt9ZnVuY3Rpb24gTyQxKG4sbCx1KXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3RvcihuLHUpfWZ1bmN0aW9uIFMkMSh1LGksdCl7dmFyIG8scixmO2wkMi5fXyYmbCQyLl9fKHUsaSkscj0obz0iZnVuY3Rpb24iPT10eXBlb2YgdCk/bnVsbDp0JiZ0Ll9fa3x8aS5fX2ssZj1bXSxqJDIoaSx1PSghbyYmdHx8aSkuX19rPXYkMShkJDEsbnVsbCxbdV0pLHJ8fGUkMyxlJDMsdm9pZCAwIT09aS5vd25lclNWR0VsZW1lbnQsIW8mJnQ/W3RdOnI/bnVsbDppLmZpcnN0Q2hpbGQ/biQxLmNhbGwoaS5jaGlsZE5vZGVzKTpudWxsLGYsIW8mJnQ/dDpyP3IuX19lOmkuZmlyc3RDaGlsZCxvKSx6JDEoZix1KTt9ZnVuY3Rpb24gcSQxKG4sbCl7UyQxKG4sbCxxJDEpO31mdW5jdGlvbiBCJDEobCx1LGkpe3ZhciB0LG8scixmPWEkMih7fSxsLnByb3BzKTtmb3IociBpbiB1KSJrZXkiPT1yP3Q9dVtyXToicmVmIj09cj9vPXVbcl06ZltyXT11W3JdO3JldHVybiBhcmd1bWVudHMubGVuZ3RoPjImJihmLmNoaWxkcmVuPWFyZ3VtZW50cy5sZW5ndGg+Mz9uJDEuY2FsbChhcmd1bWVudHMsMik6aSkseSQxKGwudHlwZSxmLHR8fGwua2V5LG98fGwucmVmLG51bGwpfWZ1bmN0aW9uIEQkMShuLGwpe3ZhciB1PXtfX2M6bD0iX19jQyIrZiQxKyssX186bixDb25zdW1lcjpmdW5jdGlvbihuLGwpe3JldHVybiBuLmNoaWxkcmVuKGwpfSxQcm92aWRlcjpmdW5jdGlvbihuKXt2YXIgdSxpO3JldHVybiB0aGlzLmdldENoaWxkQ29udGV4dHx8KHU9W10sKGk9e30pW2xdPXRoaXMsdGhpcy5nZXRDaGlsZENvbnRleHQ9ZnVuY3Rpb24oKXtyZXR1cm4gaX0sdGhpcy5zaG91bGRDb21wb25lbnRVcGRhdGU9ZnVuY3Rpb24obil7dGhpcy5wcm9wcy52YWx1ZSE9PW4udmFsdWUmJnUuc29tZShtJDEpO30sdGhpcy5zdWI9ZnVuY3Rpb24obil7dS5wdXNoKG4pO3ZhciBsPW4uY29tcG9uZW50V2lsbFVubW91bnQ7bi5jb21wb25lbnRXaWxsVW5tb3VudD1mdW5jdGlvbigpe3Uuc3BsaWNlKHUuaW5kZXhPZihuKSwxKSxsJiZsLmNhbGwobik7fTt9KSxuLmNoaWxkcmVufX07cmV0dXJuIHUuUHJvdmlkZXIuX189dS5Db25zdW1lci5jb250ZXh0VHlwZT11fW4kMT1jJDEuc2xpY2UsbCQyPXtfX2U6ZnVuY3Rpb24obixsKXtmb3IodmFyIHUsaSx0O2w9bC5fXzspaWYoKHU9bC5fX2MpJiYhdS5fXyl0cnl7aWYoKGk9dS5jb25zdHJ1Y3RvcikmJm51bGwhPWkuZ2V0RGVyaXZlZFN0YXRlRnJvbUVycm9yJiYodS5zZXRTdGF0ZShpLmdldERlcml2ZWRTdGF0ZUZyb21FcnJvcihuKSksdD11Ll9fZCksbnVsbCE9dS5jb21wb25lbnREaWRDYXRjaCYmKHUuY29tcG9uZW50RGlkQ2F0Y2gobiksdD11Ll9fZCksdClyZXR1cm4gdS5fX0U9dX1jYXRjaChsKXtuPWw7fXRocm93IG59fSx1JDE9MCxfJDEucHJvdG90eXBlLnNldFN0YXRlPWZ1bmN0aW9uKG4sbCl7dmFyIHU7dT1udWxsIT10aGlzLl9fcyYmdGhpcy5fX3MhPT10aGlzLnN0YXRlP3RoaXMuX19zOnRoaXMuX19zPWEkMih7fSx0aGlzLnN0YXRlKSwiZnVuY3Rpb24iPT10eXBlb2YgbiYmKG49bihhJDIoe30sdSksdGhpcy5wcm9wcykpLG4mJmEkMih1LG4pLG51bGwhPW4mJnRoaXMuX192JiYobCYmdGhpcy5fX2gucHVzaChsKSxtJDEodGhpcykpO30sXyQxLnByb3RvdHlwZS5mb3JjZVVwZGF0ZT1mdW5jdGlvbihuKXt0aGlzLl9fdiYmKHRoaXMuX19lPSEwLG4mJnRoaXMuX19oLnB1c2gobiksbSQxKHRoaXMpKTt9LF8kMS5wcm90b3R5cGUucmVuZGVyPWQkMSx0JDE9W10sbyQzPSJmdW5jdGlvbiI9PXR5cGVvZiBQcm9taXNlP1Byb21pc2UucHJvdG90eXBlLnRoZW4uYmluZChQcm9taXNlLnJlc29sdmUoKSk6c2V0VGltZW91dCxnJDIuX19yPTAsZiQxPTA7CgogIHZhciBvJDI9MDtmdW5jdGlvbiBlJDIoXyxlLG4sdCxmKXt2YXIgbCxzLHU9e307Zm9yKHMgaW4gZSkicmVmIj09cz9sPWVbc106dVtzXT1lW3NdO3ZhciBhPXt0eXBlOl8scHJvcHM6dSxrZXk6bixyZWY6bCxfX2s6bnVsbCxfXzpudWxsLF9fYjowLF9fZTpudWxsLF9fZDp2b2lkIDAsX19jOm51bGwsX19oOm51bGwsY29uc3RydWN0b3I6dm9pZCAwLF9fdjotLW8kMixfX3NvdXJjZTp0LF9fc2VsZjpmfTtpZigiZnVuY3Rpb24iPT10eXBlb2YgXyYmKGw9Xy5kZWZhdWx0UHJvcHMpKWZvcihzIGluIGwpdm9pZCAwPT09dVtzXSYmKHVbc109bFtzXSk7cmV0dXJuIGwkMi52bm9kZSYmbCQyLnZub2RlKGEpLGF9CgogIHZhciB0LHUscixvJDE9MCxpJDE9W10sYz1sJDIuX19iLGY9bCQyLl9fcixlJDE9bCQyLmRpZmZlZCxhJDE9bCQyLl9fYyx2PWwkMi51bm1vdW50O2Z1bmN0aW9uIG0odCxyKXtsJDIuX19oJiZsJDIuX19oKHUsdCxvJDF8fHIpLG8kMT0wO3ZhciBpPXUuX19IfHwodS5fX0g9e19fOltdLF9faDpbXX0pO3JldHVybiB0Pj1pLl9fLmxlbmd0aCYmaS5fXy5wdXNoKHt9KSxpLl9fW3RdfWZ1bmN0aW9uIGwkMShuKXtyZXR1cm4gbyQxPTEscCQxKHckMSxuKX1mdW5jdGlvbiBwJDEobixyLG8pe3ZhciBpPW0odCsrLDIpO3JldHVybiBpLnQ9bixpLl9fY3x8KGkuX189W28/byhyKTp3JDEodm9pZCAwLHIpLGZ1bmN0aW9uKG4pe3ZhciB0PWkudChpLl9fWzBdLG4pO2kuX19bMF0hPT10JiYoaS5fXz1bdCxpLl9fWzFdXSxpLl9fYy5zZXRTdGF0ZSh7fSkpO31dLGkuX19jPXUpLGkuX199ZnVuY3Rpb24geShyLG8pe3ZhciBpPW0odCsrLDMpOyFsJDIuX19zJiZrJDEoaS5fX0gsbykmJihpLl9fPXIsaS5fX0g9byx1Ll9fSC5fX2gucHVzaChpKSk7fWZ1bmN0aW9uIGgocixvKXt2YXIgaT1tKHQrKyw0KTshbCQyLl9fcyYmayQxKGkuX19ILG8pJiYoaS5fXz1yLGkuX19IPW8sdS5fX2gucHVzaChpKSk7fWZ1bmN0aW9uIHMobil7cmV0dXJuIG8kMT01LGQoZnVuY3Rpb24oKXtyZXR1cm4ge2N1cnJlbnQ6bn19LFtdKX1mdW5jdGlvbiBfKG4sdCx1KXtvJDE9NixoKGZ1bmN0aW9uKCl7ImZ1bmN0aW9uIj09dHlwZW9mIG4/bih0KCkpOm4mJihuLmN1cnJlbnQ9dCgpKTt9LG51bGw9PXU/dTp1LmNvbmNhdChuKSk7fWZ1bmN0aW9uIGQobix1KXt2YXIgcj1tKHQrKyw3KTtyZXR1cm4gayQxKHIuX19ILHUpJiYoci5fXz1uKCksci5fX0g9dSxyLl9faD1uKSxyLl9ffWZ1bmN0aW9uIEEkMShuLHQpe3JldHVybiBvJDE9OCxkKGZ1bmN0aW9uKCl7cmV0dXJuIG59LHQpfWZ1bmN0aW9uIEYkMShuKXt2YXIgcj11LmNvbnRleHRbbi5fX2NdLG89bSh0KyssOSk7cmV0dXJuIG8uYz1uLHI/KG51bGw9PW8uX18mJihvLl9fPSEwLHIuc3ViKHUpKSxyLnByb3BzLnZhbHVlKTpuLl9ffWZ1bmN0aW9uIFQkMSh0LHUpe2wkMi51c2VEZWJ1Z1ZhbHVlJiZsJDIudXNlRGVidWdWYWx1ZSh1P3UodCk6dCk7fWZ1bmN0aW9uIHgkMSgpe2kkMS5mb3JFYWNoKGZ1bmN0aW9uKHQpe2lmKHQuX19QKXRyeXt0Ll9fSC5fX2guZm9yRWFjaChnJDEpLHQuX19ILl9faC5mb3JFYWNoKGokMSksdC5fX0guX19oPVtdO31jYXRjaCh1KXt0Ll9fSC5fX2g9W10sbCQyLl9fZSh1LHQuX192KTt9fSksaSQxPVtdO31sJDIuX19iPWZ1bmN0aW9uKG4pe3U9bnVsbCxjJiZjKG4pO30sbCQyLl9fcj1mdW5jdGlvbihuKXtmJiZmKG4pLHQ9MDt2YXIgcj0odT1uLl9fYykuX19IO3ImJihyLl9faC5mb3JFYWNoKGckMSksci5fX2guZm9yRWFjaChqJDEpLHIuX19oPVtdKTt9LGwkMi5kaWZmZWQ9ZnVuY3Rpb24odCl7ZSQxJiZlJDEodCk7dmFyIG89dC5fX2M7byYmby5fX0gmJm8uX19ILl9faC5sZW5ndGgmJigxIT09aSQxLnB1c2gobykmJnI9PT1sJDIucmVxdWVzdEFuaW1hdGlvbkZyYW1lfHwoKHI9bCQyLnJlcXVlc3RBbmltYXRpb25GcmFtZSl8fGZ1bmN0aW9uKG4pe3ZhciB0LHU9ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQociksYiYmY2FuY2VsQW5pbWF0aW9uRnJhbWUodCksc2V0VGltZW91dChuKTt9LHI9c2V0VGltZW91dCh1LDEwMCk7YiYmKHQ9cmVxdWVzdEFuaW1hdGlvbkZyYW1lKHUpKTt9KSh4JDEpKSx1PXZvaWQgMDt9LGwkMi5fX2M9ZnVuY3Rpb24odCx1KXt1LnNvbWUoZnVuY3Rpb24odCl7dHJ5e3QuX19oLmZvckVhY2goZyQxKSx0Ll9faD10Ll9faC5maWx0ZXIoZnVuY3Rpb24obil7cmV0dXJuICFuLl9ffHxqJDEobil9KTt9Y2F0Y2gocil7dS5zb21lKGZ1bmN0aW9uKG4pe24uX19oJiYobi5fX2g9W10pO30pLHU9W10sbCQyLl9fZShyLHQuX192KTt9fSksYSQxJiZhJDEodCx1KTt9LGwkMi51bm1vdW50PWZ1bmN0aW9uKHQpe3YmJnYodCk7dmFyIHU9dC5fX2M7aWYodSYmdS5fX0gpdHJ5e3UuX19ILl9fLmZvckVhY2goZyQxKTt9Y2F0Y2godCl7bCQyLl9fZSh0LHUuX192KTt9fTt2YXIgYj0iZnVuY3Rpb24iPT10eXBlb2YgcmVxdWVzdEFuaW1hdGlvbkZyYW1lO2Z1bmN0aW9uIGckMShuKXt2YXIgdD11OyJmdW5jdGlvbiI9PXR5cGVvZiBuLl9fYyYmbi5fX2MoKSx1PXQ7fWZ1bmN0aW9uIGokMShuKXt2YXIgdD11O24uX19jPW4uX18oKSx1PXQ7fWZ1bmN0aW9uIGskMShuLHQpe3JldHVybiAhbnx8bi5sZW5ndGghPT10Lmxlbmd0aHx8dC5zb21lKGZ1bmN0aW9uKHQsdSl7cmV0dXJuIHQhPT1uW3VdfSl9ZnVuY3Rpb24gdyQxKG4sdCl7cmV0dXJuICJmdW5jdGlvbiI9PXR5cGVvZiB0P3Qobik6dH0KCiAgZnVuY3Rpb24gUyhuLHQpe2Zvcih2YXIgZSBpbiB0KW5bZV09dFtlXTtyZXR1cm4gbn1mdW5jdGlvbiBDKG4sdCl7Zm9yKHZhciBlIGluIG4paWYoIl9fc291cmNlIiE9PWUmJiEoZSBpbiB0KSlyZXR1cm4gITA7Zm9yKHZhciByIGluIHQpaWYoIl9fc291cmNlIiE9PXImJm5bcl0hPT10W3JdKXJldHVybiAhMDtyZXR1cm4gITF9ZnVuY3Rpb24gRShuKXt0aGlzLnByb3BzPW47fWZ1bmN0aW9uIGcobix0KXtmdW5jdGlvbiBlKG4pe3ZhciBlPXRoaXMucHJvcHMucmVmLHI9ZT09bi5yZWY7cmV0dXJuICFyJiZlJiYoZS5jYWxsP2UobnVsbCk6ZS5jdXJyZW50PW51bGwpLHQ/IXQodGhpcy5wcm9wcyxuKXx8IXI6Qyh0aGlzLnByb3BzLG4pfWZ1bmN0aW9uIHIodCl7cmV0dXJuIHRoaXMuc2hvdWxkQ29tcG9uZW50VXBkYXRlPWUsdiQxKG4sdCl9cmV0dXJuIHIuZGlzcGxheU5hbWU9Ik1lbW8oIisobi5kaXNwbGF5TmFtZXx8bi5uYW1lKSsiKSIsci5wcm90b3R5cGUuaXNSZWFjdENvbXBvbmVudD0hMCxyLl9fZj0hMCxyfShFLnByb3RvdHlwZT1uZXcgXyQxKS5pc1B1cmVSZWFjdENvbXBvbmVudD0hMCxFLnByb3RvdHlwZS5zaG91bGRDb21wb25lbnRVcGRhdGU9ZnVuY3Rpb24obix0KXtyZXR1cm4gQyh0aGlzLnByb3BzLG4pfHxDKHRoaXMuc3RhdGUsdCl9O3ZhciB3PWwkMi5fX2I7bCQyLl9fYj1mdW5jdGlvbihuKXtuLnR5cGUmJm4udHlwZS5fX2YmJm4ucmVmJiYobi5wcm9wcy5yZWY9bi5yZWYsbi5yZWY9bnVsbCksdyYmdyhuKTt9O3ZhciBSPSJ1bmRlZmluZWQiIT10eXBlb2YgU3ltYm9sJiZTeW1ib2wuZm9yJiZTeW1ib2wuZm9yKCJyZWFjdC5mb3J3YXJkX3JlZiIpfHwzOTExO2Z1bmN0aW9uIHgobil7ZnVuY3Rpb24gdCh0LGUpe3ZhciByPVMoe30sdCk7cmV0dXJuIGRlbGV0ZSByLnJlZixuKHIsKGU9dC5yZWZ8fGUpJiYoIm9iamVjdCIhPXR5cGVvZiBlfHwiY3VycmVudCJpbiBlKT9lOm51bGwpfXJldHVybiB0LiQkdHlwZW9mPVIsdC5yZW5kZXI9dCx0LnByb3RvdHlwZS5pc1JlYWN0Q29tcG9uZW50PXQuX19mPSEwLHQuZGlzcGxheU5hbWU9IkZvcndhcmRSZWYoIisobi5kaXNwbGF5TmFtZXx8bi5uYW1lKSsiKSIsdH12YXIgTj1mdW5jdGlvbihuLHQpe3JldHVybiBudWxsPT1uP251bGw6QSQyKEEkMihuKS5tYXAodCkpfSxrPXttYXA6Tixmb3JFYWNoOk4sY291bnQ6ZnVuY3Rpb24obil7cmV0dXJuIG4/QSQyKG4pLmxlbmd0aDowfSxvbmx5OmZ1bmN0aW9uKG4pe3ZhciB0PUEkMihuKTtpZigxIT09dC5sZW5ndGgpdGhyb3cgIkNoaWxkcmVuLm9ubHkiO3JldHVybiB0WzBdfSx0b0FycmF5OkEkMn0sQT1sJDIuX19lO2wkMi5fX2U9ZnVuY3Rpb24obix0LGUpe2lmKG4udGhlbilmb3IodmFyIHIsdT10O3U9dS5fXzspaWYoKHI9dS5fX2MpJiZyLl9fYylyZXR1cm4gbnVsbD09dC5fX2UmJih0Ll9fZT1lLl9fZSx0Ll9faz1lLl9fayksci5fX2Mobix0KTtBKG4sdCxlKTt9O3ZhciBPPWwkMi51bm1vdW50O2Z1bmN0aW9uIEwoKXt0aGlzLl9fdT0wLHRoaXMudD1udWxsLHRoaXMuX19iPW51bGw7fWZ1bmN0aW9uIFUobil7dmFyIHQ9bi5fXy5fX2M7cmV0dXJuIHQmJnQuX19lJiZ0Ll9fZShuKX1mdW5jdGlvbiBGKG4pe3ZhciB0LGUscjtmdW5jdGlvbiB1KHUpe2lmKHR8fCh0PW4oKSkudGhlbihmdW5jdGlvbihuKXtlPW4uZGVmYXVsdHx8bjt9LGZ1bmN0aW9uKG4pe3I9bjt9KSxyKXRocm93IHI7aWYoIWUpdGhyb3cgdDtyZXR1cm4gdiQxKGUsdSl9cmV0dXJuIHUuZGlzcGxheU5hbWU9IkxhenkiLHUuX19mPSEwLHV9ZnVuY3Rpb24gTSgpe3RoaXMudT1udWxsLHRoaXMubz1udWxsO31sJDIudW5tb3VudD1mdW5jdGlvbihuKXt2YXIgdD1uLl9fYzt0JiZ0Ll9fUiYmdC5fX1IoKSx0JiYhMD09PW4uX19oJiYobi50eXBlPW51bGwpLE8mJk8obik7fSwoTC5wcm90b3R5cGU9bmV3IF8kMSkuX19jPWZ1bmN0aW9uKG4sdCl7dmFyIGU9dC5fX2Mscj10aGlzO251bGw9PXIudCYmKHIudD1bXSksci50LnB1c2goZSk7dmFyIHU9VShyLl9fdiksbz0hMSxpPWZ1bmN0aW9uKCl7b3x8KG89ITAsZS5fX1I9bnVsbCx1P3UobCk6bCgpKTt9O2UuX19SPWk7dmFyIGw9ZnVuY3Rpb24oKXtpZighLS1yLl9fdSl7aWYoci5zdGF0ZS5fX2Upe3ZhciBuPXIuc3RhdGUuX19lO3IuX192Ll9fa1swXT1mdW5jdGlvbiBuKHQsZSxyKXtyZXR1cm4gdCYmKHQuX192PW51bGwsdC5fX2s9dC5fX2smJnQuX19rLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gbih0LGUscil9KSx0Ll9fYyYmdC5fX2MuX19QPT09ZSYmKHQuX19lJiZyLmluc2VydEJlZm9yZSh0Ll9fZSx0Ll9fZCksdC5fX2MuX19lPSEwLHQuX19jLl9fUD1yKSksdH0obixuLl9fYy5fX1Asbi5fX2MuX19PKTt9dmFyIHQ7Zm9yKHIuc2V0U3RhdGUoe19fZTpyLl9fYj1udWxsfSk7dD1yLnQucG9wKCk7KXQuZm9yY2VVcGRhdGUoKTt9fSxmPSEwPT09dC5fX2g7ci5fX3UrK3x8Znx8ci5zZXRTdGF0ZSh7X19lOnIuX19iPXIuX192Ll9fa1swXX0pLG4udGhlbihpLGkpO30sTC5wcm90b3R5cGUuY29tcG9uZW50V2lsbFVubW91bnQ9ZnVuY3Rpb24oKXt0aGlzLnQ9W107fSxMLnByb3RvdHlwZS5yZW5kZXI9ZnVuY3Rpb24obix0KXtpZih0aGlzLl9fYil7aWYodGhpcy5fX3YuX19rKXt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSxyPXRoaXMuX192Ll9fa1swXS5fX2M7dGhpcy5fX3YuX19rWzBdPWZ1bmN0aW9uIG4odCxlLHIpe3JldHVybiB0JiYodC5fX2MmJnQuX19jLl9fSCYmKHQuX19jLl9fSC5fXy5mb3JFYWNoKGZ1bmN0aW9uKG4peyJmdW5jdGlvbiI9PXR5cGVvZiBuLl9fYyYmbi5fX2MoKTt9KSx0Ll9fYy5fX0g9bnVsbCksbnVsbCE9KHQ9Uyh7fSx0KSkuX19jJiYodC5fX2MuX19QPT09ciYmKHQuX19jLl9fUD1lKSx0Ll9fYz1udWxsKSx0Ll9faz10Ll9fayYmdC5fX2subWFwKGZ1bmN0aW9uKHQpe3JldHVybiBuKHQsZSxyKX0pKSx0fSh0aGlzLl9fYixlLHIuX19PPXIuX19QKTt9dGhpcy5fX2I9bnVsbDt9dmFyIHU9dC5fX2UmJnYkMShkJDEsbnVsbCxuLmZhbGxiYWNrKTtyZXR1cm4gdSYmKHUuX19oPW51bGwpLFt2JDEoZCQxLG51bGwsdC5fX2U/bnVsbDpuLmNoaWxkcmVuKSx1XX07dmFyIFQ9ZnVuY3Rpb24obix0LGUpe2lmKCsrZVsxXT09PWVbMF0mJm4uby5kZWxldGUodCksbi5wcm9wcy5yZXZlYWxPcmRlciYmKCJ0IiE9PW4ucHJvcHMucmV2ZWFsT3JkZXJbMF18fCFuLm8uc2l6ZSkpZm9yKGU9bi51O2U7KXtmb3IoO2UubGVuZ3RoPjM7KWUucG9wKCkoKTtpZihlWzFdPGVbMF0pYnJlYWs7bi51PWU9ZVsyXTt9fTtmdW5jdGlvbiBEKG4pe3JldHVybiB0aGlzLmdldENoaWxkQ29udGV4dD1mdW5jdGlvbigpe3JldHVybiBuLmNvbnRleHR9LG4uY2hpbGRyZW59ZnVuY3Rpb24gSShuKXt2YXIgdD10aGlzLGU9bi5pO3QuY29tcG9uZW50V2lsbFVubW91bnQ9ZnVuY3Rpb24oKXtTJDEobnVsbCx0LmwpLHQubD1udWxsLHQuaT1udWxsO30sdC5pJiZ0LmkhPT1lJiZ0LmNvbXBvbmVudFdpbGxVbm1vdW50KCksbi5fX3Y/KHQubHx8KHQuaT1lLHQubD17bm9kZVR5cGU6MSxwYXJlbnROb2RlOmUsY2hpbGROb2RlczpbXSxhcHBlbmRDaGlsZDpmdW5jdGlvbihuKXt0aGlzLmNoaWxkTm9kZXMucHVzaChuKSx0LmkuYXBwZW5kQ2hpbGQobik7fSxpbnNlcnRCZWZvcmU6ZnVuY3Rpb24obixlKXt0aGlzLmNoaWxkTm9kZXMucHVzaChuKSx0LmkuYXBwZW5kQ2hpbGQobik7fSxyZW1vdmVDaGlsZDpmdW5jdGlvbihuKXt0aGlzLmNoaWxkTm9kZXMuc3BsaWNlKHRoaXMuY2hpbGROb2Rlcy5pbmRleE9mKG4pPj4+MSwxKSx0LmkucmVtb3ZlQ2hpbGQobik7fX0pLFMkMSh2JDEoRCx7Y29udGV4dDp0LmNvbnRleHR9LG4uX192KSx0LmwpKTp0LmwmJnQuY29tcG9uZW50V2lsbFVubW91bnQoKTt9ZnVuY3Rpb24gVyhuLHQpe3JldHVybiB2JDEoSSx7X192Om4saTp0fSl9KE0ucHJvdG90eXBlPW5ldyBfJDEpLl9fZT1mdW5jdGlvbihuKXt2YXIgdD10aGlzLGU9VSh0Ll9fdikscj10Lm8uZ2V0KG4pO3JldHVybiByWzBdKyssZnVuY3Rpb24odSl7dmFyIG89ZnVuY3Rpb24oKXt0LnByb3BzLnJldmVhbE9yZGVyPyhyLnB1c2godSksVCh0LG4scikpOnUoKTt9O2U/ZShvKTpvKCk7fX0sTS5wcm90b3R5cGUucmVuZGVyPWZ1bmN0aW9uKG4pe3RoaXMudT1udWxsLHRoaXMubz1uZXcgTWFwO3ZhciB0PUEkMihuLmNoaWxkcmVuKTtuLnJldmVhbE9yZGVyJiYiYiI9PT1uLnJldmVhbE9yZGVyWzBdJiZ0LnJldmVyc2UoKTtmb3IodmFyIGU9dC5sZW5ndGg7ZS0tOyl0aGlzLm8uc2V0KHRbZV0sdGhpcy51PVsxLDAsdGhpcy51XSk7cmV0dXJuIG4uY2hpbGRyZW59LE0ucHJvdG90eXBlLmNvbXBvbmVudERpZFVwZGF0ZT1NLnByb3RvdHlwZS5jb21wb25lbnREaWRNb3VudD1mdW5jdGlvbigpe3ZhciBuPXRoaXM7dGhpcy5vLmZvckVhY2goZnVuY3Rpb24odCxlKXtUKG4sZSx0KTt9KTt9O3ZhciBqPSJ1bmRlZmluZWQiIT10eXBlb2YgU3ltYm9sJiZTeW1ib2wuZm9yJiZTeW1ib2wuZm9yKCJyZWFjdC5lbGVtZW50Iil8fDYwMTAzLFA9L14oPzphY2NlbnR8YWxpZ25tZW50fGFyYWJpY3xiYXNlbGluZXxjYXB8Y2xpcCg/IVBhdGhVKXxjb2xvcnxmaWxsfGZsb29kfGZvbnR8Z2x5cGgoPyFSKXxob3JpenxtYXJrZXIoPyFIfFd8VSl8b3ZlcmxpbmV8cGFpbnR8c3RvcHxzdHJpa2V0aHJvdWdofHN0cm9rZXx0ZXh0KD8hTCl8dW5kZXJsaW5lfHVuaWNvZGV8dW5pdHN8dnx2ZWN0b3J8dmVydHx3b3JkfHdyaXRpbmd8eCg/IUMpKVtBLVpdLyxWPWZ1bmN0aW9uKG4pe3JldHVybiAoInVuZGVmaW5lZCIhPXR5cGVvZiBTeW1ib2wmJiJzeW1ib2wiPT10eXBlb2YgU3ltYm9sKCk/L2ZpbHxjaGV8cmFkL2k6L2ZpbHxjaGV8cmEvaSkudGVzdChuKX07ZnVuY3Rpb24geihuLHQsZSl7cmV0dXJuIG51bGw9PXQuX19rJiYodC50ZXh0Q29udGVudD0iIiksUyQxKG4sdCksImZ1bmN0aW9uIj09dHlwZW9mIGUmJmUoKSxuP24uX19jOm51bGx9ZnVuY3Rpb24gQihuLHQsZSl7cmV0dXJuIHEkMShuLHQpLCJmdW5jdGlvbiI9PXR5cGVvZiBlJiZlKCksbj9uLl9fYzpudWxsfV8kMS5wcm90b3R5cGUuaXNSZWFjdENvbXBvbmVudD17fSxbImNvbXBvbmVudFdpbGxNb3VudCIsImNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMiLCJjb21wb25lbnRXaWxsVXBkYXRlIl0uZm9yRWFjaChmdW5jdGlvbihuKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoXyQxLnByb3RvdHlwZSxuLHtjb25maWd1cmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXNbIlVOU0FGRV8iK25dfSxzZXQ6ZnVuY3Rpb24odCl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsbix7Y29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOnR9KTt9fSk7fSk7dmFyIEg9bCQyLmV2ZW50O2Z1bmN0aW9uIFooKXt9ZnVuY3Rpb24gWSgpe3JldHVybiB0aGlzLmNhbmNlbEJ1YmJsZX1mdW5jdGlvbiAkKCl7cmV0dXJuIHRoaXMuZGVmYXVsdFByZXZlbnRlZH1sJDIuZXZlbnQ9ZnVuY3Rpb24obil7cmV0dXJuIEgmJihuPUgobikpLG4ucGVyc2lzdD1aLG4uaXNQcm9wYWdhdGlvblN0b3BwZWQ9WSxuLmlzRGVmYXVsdFByZXZlbnRlZD0kLG4ubmF0aXZlRXZlbnQ9bn07dmFyIHEsRz17Y29uZmlndXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNsYXNzfX0sSj1sJDIudm5vZGU7bCQyLnZub2RlPWZ1bmN0aW9uKG4pe3ZhciB0PW4udHlwZSxlPW4ucHJvcHMscj1lO2lmKCJzdHJpbmciPT10eXBlb2YgdCl7Zm9yKHZhciB1IGluIHI9e30sZSl7dmFyIG89ZVt1XTsidmFsdWUiPT09dSYmImRlZmF1bHRWYWx1ZSJpbiBlJiZudWxsPT1vfHwoImRlZmF1bHRWYWx1ZSI9PT11JiYidmFsdWUiaW4gZSYmbnVsbD09ZS52YWx1ZT91PSJ2YWx1ZSI6ImRvd25sb2FkIj09PXUmJiEwPT09bz9vPSIiOi9vbmRvdWJsZWNsaWNrL2kudGVzdCh1KT91PSJvbmRibGNsaWNrIjovXm9uY2hhbmdlKHRleHRhcmVhfGlucHV0KS9pLnRlc3QodSt0KSYmIVYoZS50eXBlKT91PSJvbmlucHV0IjovXm9uKEFuaXxUcmF8VG91fEJlZm9yZUlucCkvLnRlc3QodSk/dT11LnRvTG93ZXJDYXNlKCk6UC50ZXN0KHUpP3U9dS5yZXBsYWNlKC9bQS1aMC05XS8sIi0kJiIpLnRvTG93ZXJDYXNlKCk6bnVsbD09PW8mJihvPXZvaWQgMCksclt1XT1vKTt9InNlbGVjdCI9PXQmJnIubXVsdGlwbGUmJkFycmF5LmlzQXJyYXkoci52YWx1ZSkmJihyLnZhbHVlPUEkMihlLmNoaWxkcmVuKS5mb3JFYWNoKGZ1bmN0aW9uKG4pe24ucHJvcHMuc2VsZWN0ZWQ9LTEhPXIudmFsdWUuaW5kZXhPZihuLnByb3BzLnZhbHVlKTt9KSksInNlbGVjdCI9PXQmJm51bGwhPXIuZGVmYXVsdFZhbHVlJiYoci52YWx1ZT1BJDIoZS5jaGlsZHJlbikuZm9yRWFjaChmdW5jdGlvbihuKXtuLnByb3BzLnNlbGVjdGVkPXIubXVsdGlwbGU/LTEhPXIuZGVmYXVsdFZhbHVlLmluZGV4T2Yobi5wcm9wcy52YWx1ZSk6ci5kZWZhdWx0VmFsdWU9PW4ucHJvcHMudmFsdWU7fSkpLG4ucHJvcHM9cjt9dCYmZS5jbGFzcyE9ZS5jbGFzc05hbWUmJihHLmVudW1lcmFibGU9ImNsYXNzTmFtZSJpbiBlLG51bGwhPWUuY2xhc3NOYW1lJiYoci5jbGFzcz1lLmNsYXNzTmFtZSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHIsImNsYXNzTmFtZSIsRykpLG4uJCR0eXBlb2Y9aixKJiZKKG4pO307dmFyIEs9bCQyLl9fcjtsJDIuX19yPWZ1bmN0aW9uKG4pe0smJksobikscT1uLl9fYzt9O3ZhciBRPXtSZWFjdEN1cnJlbnREaXNwYXRjaGVyOntjdXJyZW50OntyZWFkQ29udGV4dDpmdW5jdGlvbihuKXtyZXR1cm4gcS5fX25bbi5fX2NdLnByb3BzLnZhbHVlfX19fTtmdW5jdGlvbiBubihuKXtyZXR1cm4gdiQxLmJpbmQobnVsbCxuKX1mdW5jdGlvbiB0bihuKXtyZXR1cm4gISFuJiZuLiQkdHlwZW9mPT09an1mdW5jdGlvbiBlbihuKXtyZXR1cm4gdG4obik/QiQxLmFwcGx5KG51bGwsYXJndW1lbnRzKTpufWZ1bmN0aW9uIHJuKG4pe3JldHVybiAhIW4uX19rJiYoUyQxKG51bGwsbiksITApfWZ1bmN0aW9uIHVuKG4pe3JldHVybiBuJiYobi5iYXNlfHwxPT09bi5ub2RlVHlwZSYmbil8fG51bGx9dmFyIG9uPWZ1bmN0aW9uKG4sdCl7cmV0dXJuIG4odCl9LGxuPWZ1bmN0aW9uKG4sdCl7cmV0dXJuIG4odCl9O3ZhciBSZWFjdCA9IHt1c2VTdGF0ZTpsJDEsdXNlUmVkdWNlcjpwJDEsdXNlRWZmZWN0OnksdXNlTGF5b3V0RWZmZWN0OmgsdXNlUmVmOnMsdXNlSW1wZXJhdGl2ZUhhbmRsZTpfLHVzZU1lbW86ZCx1c2VDYWxsYmFjazpBJDEsdXNlQ29udGV4dDpGJDEsdXNlRGVidWdWYWx1ZTpUJDEsdmVyc2lvbjoiMTcuMC4yIixDaGlsZHJlbjprLHJlbmRlcjp6LGh5ZHJhdGU6Qix1bm1vdW50Q29tcG9uZW50QXROb2RlOnJuLGNyZWF0ZVBvcnRhbDpXLGNyZWF0ZUVsZW1lbnQ6diQxLGNyZWF0ZUNvbnRleHQ6RCQxLGNyZWF0ZUZhY3Rvcnk6bm4sY2xvbmVFbGVtZW50OmVuLGNyZWF0ZVJlZjpwJDIsRnJhZ21lbnQ6ZCQxLGlzVmFsaWRFbGVtZW50OnRuLGZpbmRET01Ob2RlOnVuLENvbXBvbmVudDpfJDEsUHVyZUNvbXBvbmVudDpFLG1lbW86Zyxmb3J3YXJkUmVmOngsZmx1c2hTeW5jOmxuLHVuc3RhYmxlX2JhdGNoZWRVcGRhdGVzOm9uLFN0cmljdE1vZGU6ZCQxLFN1c3BlbnNlOkwsU3VzcGVuc2VMaXN0Ok0sbGF6eTpGLF9fU0VDUkVUX0lOVEVSTkFMU19ET19OT1RfVVNFX09SX1lPVV9XSUxMX0JFX0ZJUkVEOlF9OwoKICB2YXIgSE9PS1MgPSBbCiAgICAgICJvbkNoYW5nZSIsCiAgICAgICJvbkNsb3NlIiwKICAgICAgIm9uRGF5Q3JlYXRlIiwKICAgICAgIm9uRGVzdHJveSIsCiAgICAgICJvbktleURvd24iLAogICAgICAib25Nb250aENoYW5nZSIsCiAgICAgICJvbk9wZW4iLAogICAgICAib25QYXJzZUNvbmZpZyIsCiAgICAgICJvblJlYWR5IiwKICAgICAgIm9uVmFsdWVVcGRhdGUiLAogICAgICAib25ZZWFyQ2hhbmdlIiwKICAgICAgIm9uUHJlQ2FsZW5kYXJQb3NpdGlvbiIsCiAgXTsKICB2YXIgZGVmYXVsdHMgPSB7CiAgICAgIF9kaXNhYmxlOiBbXSwKICAgICAgYWxsb3dJbnB1dDogZmFsc2UsCiAgICAgIGFsbG93SW52YWxpZFByZWxvYWQ6IGZhbHNlLAogICAgICBhbHRGb3JtYXQ6ICJGIGosIFkiLAogICAgICBhbHRJbnB1dDogZmFsc2UsCiAgICAgIGFsdElucHV0Q2xhc3M6ICJmb3JtLWNvbnRyb2wgaW5wdXQiLAogICAgICBhbmltYXRlOiB0eXBlb2Ygd2luZG93ID09PSAib2JqZWN0IiAmJgogICAgICAgICAgd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiTVNJRSIpID09PSAtMSwKICAgICAgYXJpYURhdGVGb3JtYXQ6ICJGIGosIFkiLAogICAgICBhdXRvRmlsbERlZmF1bHRUaW1lOiB0cnVlLAogICAgICBjbGlja09wZW5zOiB0cnVlLAogICAgICBjbG9zZU9uU2VsZWN0OiB0cnVlLAogICAgICBjb25qdW5jdGlvbjogIiwgIiwKICAgICAgZGF0ZUZvcm1hdDogIlktbS1kIiwKICAgICAgZGVmYXVsdEhvdXI6IDEyLAogICAgICBkZWZhdWx0TWludXRlOiAwLAogICAgICBkZWZhdWx0U2Vjb25kczogMCwKICAgICAgZGlzYWJsZTogW10sCiAgICAgIGRpc2FibGVNb2JpbGU6IGZhbHNlLAogICAgICBlbmFibGVTZWNvbmRzOiBmYWxzZSwKICAgICAgZW5hYmxlVGltZTogZmFsc2UsCiAgICAgIGVycm9ySGFuZGxlcjogZnVuY3Rpb24gKGVycikgewogICAgICAgICAgcmV0dXJuIHR5cGVvZiBjb25zb2xlICE9PSAidW5kZWZpbmVkIiAmJiBjb25zb2xlLndhcm4oZXJyKTsKICAgICAgfSwKICAgICAgZ2V0V2VlazogZnVuY3Rpb24gKGdpdmVuRGF0ZSkgewogICAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZShnaXZlbkRhdGUuZ2V0VGltZSgpKTsKICAgICAgICAgIGRhdGUuc2V0SG91cnMoMCwgMCwgMCwgMCk7CiAgICAgICAgICBkYXRlLnNldERhdGUoZGF0ZS5nZXREYXRlKCkgKyAzIC0gKChkYXRlLmdldERheSgpICsgNikgJSA3KSk7CiAgICAgICAgICB2YXIgd2VlazEgPSBuZXcgRGF0ZShkYXRlLmdldEZ1bGxZZWFyKCksIDAsIDQpOwogICAgICAgICAgcmV0dXJuICgxICsKICAgICAgICAgICAgICBNYXRoLnJvdW5kKCgoZGF0ZS5nZXRUaW1lKCkgLSB3ZWVrMS5nZXRUaW1lKCkpIC8gODY0MDAwMDAgLQogICAgICAgICAgICAgICAgICAzICsKICAgICAgICAgICAgICAgICAgKCh3ZWVrMS5nZXREYXkoKSArIDYpICUgNykpIC8KICAgICAgICAgICAgICAgICAgNykpOwogICAgICB9LAogICAgICBob3VySW5jcmVtZW50OiAxLAogICAgICBpZ25vcmVkRm9jdXNFbGVtZW50czogW10sCiAgICAgIGlubGluZTogZmFsc2UsCiAgICAgIGxvY2FsZTogImRlZmF1bHQiLAogICAgICBtaW51dGVJbmNyZW1lbnQ6IDUsCiAgICAgIG1vZGU6ICJzaW5nbGUiLAogICAgICBtb250aFNlbGVjdG9yVHlwZTogImRyb3Bkb3duIiwKICAgICAgbmV4dEFycm93OiAiPHN2ZyB2ZXJzaW9uPScxLjEnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycgeG1sbnM6eGxpbms9J2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsnIHZpZXdCb3g9JzAgMCAxNyAxNyc+PGc+PC9nPjxwYXRoIGQ9J00xMy4yMDcgOC40NzJsLTcuODU0IDcuODU0LTAuNzA3LTAuNzA3IDcuMTQ2LTcuMTQ2LTcuMTQ2LTcuMTQ4IDAuNzA3LTAuNzA3IDcuODU0IDcuODU0eicgLz48L3N2Zz4iLAogICAgICBub0NhbGVuZGFyOiBmYWxzZSwKICAgICAgbm93OiBuZXcgRGF0ZSgpLAogICAgICBvbkNoYW5nZTogW10sCiAgICAgIG9uQ2xvc2U6IFtdLAogICAgICBvbkRheUNyZWF0ZTogW10sCiAgICAgIG9uRGVzdHJveTogW10sCiAgICAgIG9uS2V5RG93bjogW10sCiAgICAgIG9uTW9udGhDaGFuZ2U6IFtdLAogICAgICBvbk9wZW46IFtdLAogICAgICBvblBhcnNlQ29uZmlnOiBbXSwKICAgICAgb25SZWFkeTogW10sCiAgICAgIG9uVmFsdWVVcGRhdGU6IFtdLAogICAgICBvblllYXJDaGFuZ2U6IFtdLAogICAgICBvblByZUNhbGVuZGFyUG9zaXRpb246IFtdLAogICAgICBwbHVnaW5zOiBbXSwKICAgICAgcG9zaXRpb246ICJhdXRvIiwKICAgICAgcG9zaXRpb25FbGVtZW50OiB1bmRlZmluZWQsCiAgICAgIHByZXZBcnJvdzogIjxzdmcgdmVyc2lvbj0nMS4xJyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHhtbG5zOnhsaW5rPSdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rJyB2aWV3Qm94PScwIDAgMTcgMTcnPjxnPjwvZz48cGF0aCBkPSdNNS4yMDcgOC40NzFsNy4xNDYgNy4xNDctMC43MDcgMC43MDctNy44NTMtNy44NTQgNy44NTQtNy44NTMgMC43MDcgMC43MDctNy4xNDcgNy4xNDZ6JyAvPjwvc3ZnPiIsCiAgICAgIHNob3J0aGFuZEN1cnJlbnRNb250aDogZmFsc2UsCiAgICAgIHNob3dNb250aHM6IDEsCiAgICAgIHN0YXRpYzogZmFsc2UsCiAgICAgIHRpbWVfMjRocjogZmFsc2UsCiAgICAgIHdlZWtOdW1iZXJzOiBmYWxzZSwKICAgICAgd3JhcDogZmFsc2UsCiAgfTsKCiAgdmFyIGVuZ2xpc2ggPSB7CiAgICAgIHdlZWtkYXlzOiB7CiAgICAgICAgICBzaG9ydGhhbmQ6IFsiU3VuIiwgIk1vbiIsICJUdWUiLCAiV2VkIiwgIlRodSIsICJGcmkiLCAiU2F0Il0sCiAgICAgICAgICBsb25naGFuZDogWwogICAgICAgICAgICAgICJTdW5kYXkiLAogICAgICAgICAgICAgICJNb25kYXkiLAogICAgICAgICAgICAgICJUdWVzZGF5IiwKICAgICAgICAgICAgICAiV2VkbmVzZGF5IiwKICAgICAgICAgICAgICAiVGh1cnNkYXkiLAogICAgICAgICAgICAgICJGcmlkYXkiLAogICAgICAgICAgICAgICJTYXR1cmRheSIsCiAgICAgICAgICBdLAogICAgICB9LAogICAgICBtb250aHM6IHsKICAgICAgICAgIHNob3J0aGFuZDogWwogICAgICAgICAgICAgICJKYW4iLAogICAgICAgICAgICAgICJGZWIiLAogICAgICAgICAgICAgICJNYXIiLAogICAgICAgICAgICAgICJBcHIiLAogICAgICAgICAgICAgICJNYXkiLAogICAgICAgICAgICAgICJKdW4iLAogICAgICAgICAgICAgICJKdWwiLAogICAgICAgICAgICAgICJBdWciLAogICAgICAgICAgICAgICJTZXAiLAogICAgICAgICAgICAgICJPY3QiLAogICAgICAgICAgICAgICJOb3YiLAogICAgICAgICAgICAgICJEZWMiLAogICAgICAgICAgXSwKICAgICAgICAgIGxvbmdoYW5kOiBbCiAgICAgICAgICAgICAgIkphbnVhcnkiLAogICAgICAgICAgICAgICJGZWJydWFyeSIsCiAgICAgICAgICAgICAgIk1hcmNoIiwKICAgICAgICAgICAgICAiQXByaWwiLAogICAgICAgICAgICAgICJNYXkiLAogICAgICAgICAgICAgICJKdW5lIiwKICAgICAgICAgICAgICAiSnVseSIsCiAgICAgICAgICAgICAgIkF1Z3VzdCIsCiAgICAgICAgICAgICAgIlNlcHRlbWJlciIsCiAgICAgICAgICAgICAgIk9jdG9iZXIiLAogICAgICAgICAgICAgICJOb3ZlbWJlciIsCiAgICAgICAgICAgICAgIkRlY2VtYmVyIiwKICAgICAgICAgIF0sCiAgICAgIH0sCiAgICAgIGRheXNJbk1vbnRoOiBbMzEsIDI4LCAzMSwgMzAsIDMxLCAzMCwgMzEsIDMxLCAzMCwgMzEsIDMwLCAzMV0sCiAgICAgIGZpcnN0RGF5T2ZXZWVrOiAwLAogICAgICBvcmRpbmFsOiBmdW5jdGlvbiAobnRoKSB7CiAgICAgICAgICB2YXIgcyA9IG50aCAlIDEwMDsKICAgICAgICAgIGlmIChzID4gMyAmJiBzIDwgMjEpCiAgICAgICAgICAgICAgcmV0dXJuICJ0aCI7CiAgICAgICAgICBzd2l0Y2ggKHMgJSAxMCkgewogICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgcmV0dXJuICJzdCI7CiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICByZXR1cm4gIm5kIjsKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgIHJldHVybiAicmQiOwogICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgIHJldHVybiAidGgiOwogICAgICAgICAgfQogICAgICB9LAogICAgICByYW5nZVNlcGFyYXRvcjogIiB0byAiLAogICAgICB3ZWVrQWJicmV2aWF0aW9uOiAiV2siLAogICAgICBzY3JvbGxUaXRsZTogIlNjcm9sbCB0byBpbmNyZW1lbnQiLAogICAgICB0b2dnbGVUaXRsZTogIkNsaWNrIHRvIHRvZ2dsZSIsCiAgICAgIGFtUE06IFsiQU0iLCAiUE0iXSwKICAgICAgeWVhckFyaWFMYWJlbDogIlllYXIiLAogICAgICBtb250aEFyaWFMYWJlbDogIk1vbnRoIiwKICAgICAgaG91ckFyaWFMYWJlbDogIkhvdXIiLAogICAgICBtaW51dGVBcmlhTGFiZWw6ICJNaW51dGUiLAogICAgICB0aW1lXzI0aHI6IGZhbHNlLAogIH07CgogIHZhciBwYWQgPSBmdW5jdGlvbiAobnVtYmVyLCBsZW5ndGgpIHsKICAgICAgaWYgKGxlbmd0aCA9PT0gdm9pZCAwKSB7IGxlbmd0aCA9IDI7IH0KICAgICAgcmV0dXJuICgiMDAwIiArIG51bWJlcikuc2xpY2UobGVuZ3RoICogLTEpOwogIH07CiAgdmFyIGludCA9IGZ1bmN0aW9uIChib29sKSB7IHJldHVybiAoYm9vbCA9PT0gdHJ1ZSA/IDEgOiAwKTsgfTsKICBmdW5jdGlvbiBkZWJvdW5jZShmbiwgd2FpdCkgewogICAgICB2YXIgdDsKICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgICAgICB2YXIgYXJncyA9IGFyZ3VtZW50czsKICAgICAgICAgIGNsZWFyVGltZW91dCh0KTsKICAgICAgICAgIHQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIGZuLmFwcGx5KF90aGlzLCBhcmdzKTsgfSwgd2FpdCk7CiAgICAgIH07CiAgfQogIHZhciBhcnJheWlmeSA9IGZ1bmN0aW9uIChvYmopIHsKICAgICAgcmV0dXJuIG9iaiBpbnN0YW5jZW9mIEFycmF5ID8gb2JqIDogW29ial07CiAgfTsKCiAgZnVuY3Rpb24gdG9nZ2xlQ2xhc3MoZWxlbSwgY2xhc3NOYW1lLCBib29sKSB7CiAgICAgIGlmIChib29sID09PSB0cnVlKQogICAgICAgICAgcmV0dXJuIGVsZW0uY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpOwogICAgICBlbGVtLmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKTsKICB9CiAgZnVuY3Rpb24gY3JlYXRlRWxlbWVudCh0YWcsIGNsYXNzTmFtZSwgY29udGVudCkgewogICAgICB2YXIgZSA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZyk7CiAgICAgIGNsYXNzTmFtZSA9IGNsYXNzTmFtZSB8fCAiIjsKICAgICAgY29udGVudCA9IGNvbnRlbnQgfHwgIiI7CiAgICAgIGUuY2xhc3NOYW1lID0gY2xhc3NOYW1lOwogICAgICBpZiAoY29udGVudCAhPT0gdW5kZWZpbmVkKQogICAgICAgICAgZS50ZXh0Q29udGVudCA9IGNvbnRlbnQ7CiAgICAgIHJldHVybiBlOwogIH0KICBmdW5jdGlvbiBjbGVhck5vZGUobm9kZSkgewogICAgICB3aGlsZSAobm9kZS5maXJzdENoaWxkKQogICAgICAgICAgbm9kZS5yZW1vdmVDaGlsZChub2RlLmZpcnN0Q2hpbGQpOwogIH0KICBmdW5jdGlvbiBmaW5kUGFyZW50KG5vZGUsIGNvbmRpdGlvbikgewogICAgICBpZiAoY29uZGl0aW9uKG5vZGUpKQogICAgICAgICAgcmV0dXJuIG5vZGU7CiAgICAgIGVsc2UgaWYgKG5vZGUucGFyZW50Tm9kZSkKICAgICAgICAgIHJldHVybiBmaW5kUGFyZW50KG5vZGUucGFyZW50Tm9kZSwgY29uZGl0aW9uKTsKICAgICAgcmV0dXJuIHVuZGVmaW5lZDsKICB9CiAgZnVuY3Rpb24gY3JlYXRlTnVtYmVySW5wdXQoaW5wdXRDbGFzc05hbWUsIG9wdHMpIHsKICAgICAgdmFyIHdyYXBwZXIgPSBjcmVhdGVFbGVtZW50KCJkaXYiLCAibnVtSW5wdXRXcmFwcGVyIiksIG51bUlucHV0ID0gY3JlYXRlRWxlbWVudCgiaW5wdXQiLCAibnVtSW5wdXQgIiArIGlucHV0Q2xhc3NOYW1lKSwgYXJyb3dVcCA9IGNyZWF0ZUVsZW1lbnQoInNwYW4iLCAiYXJyb3dVcCIpLCBhcnJvd0Rvd24gPSBjcmVhdGVFbGVtZW50KCJzcGFuIiwgImFycm93RG93biIpOwogICAgICBpZiAobmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJNU0lFIDkuMCIpID09PSAtMSkgewogICAgICAgICAgbnVtSW5wdXQudHlwZSA9ICJudW1iZXIiOwogICAgICB9CiAgICAgIGVsc2UgewogICAgICAgICAgbnVtSW5wdXQudHlwZSA9ICJ0ZXh0IjsKICAgICAgICAgIG51bUlucHV0LnBhdHRlcm4gPSAiXFxkKiI7CiAgICAgIH0KICAgICAgaWYgKG9wdHMgIT09IHVuZGVmaW5lZCkKICAgICAgICAgIGZvciAodmFyIGtleSBpbiBvcHRzKQogICAgICAgICAgICAgIG51bUlucHV0LnNldEF0dHJpYnV0ZShrZXksIG9wdHNba2V5XSk7CiAgICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQobnVtSW5wdXQpOwogICAgICB3cmFwcGVyLmFwcGVuZENoaWxkKGFycm93VXApOwogICAgICB3cmFwcGVyLmFwcGVuZENoaWxkKGFycm93RG93bik7CiAgICAgIHJldHVybiB3cmFwcGVyOwogIH0KICBmdW5jdGlvbiBnZXRFdmVudFRhcmdldChldmVudCkgewogICAgICB0cnkgewogICAgICAgICAgaWYgKHR5cGVvZiBldmVudC5jb21wb3NlZFBhdGggPT09ICJmdW5jdGlvbiIpIHsKICAgICAgICAgICAgICB2YXIgcGF0aCA9IGV2ZW50LmNvbXBvc2VkUGF0aCgpOwogICAgICAgICAgICAgIHJldHVybiBwYXRoWzBdOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGV2ZW50LnRhcmdldDsKICAgICAgfQogICAgICBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgIHJldHVybiBldmVudC50YXJnZXQ7CiAgICAgIH0KICB9CgogIHZhciBkb05vdGhpbmcgPSBmdW5jdGlvbiAoKSB7IHJldHVybiB1bmRlZmluZWQ7IH07CiAgdmFyIG1vbnRoVG9TdHIgPSBmdW5jdGlvbiAobW9udGhOdW1iZXIsIHNob3J0aGFuZCwgbG9jYWxlKSB7IHJldHVybiBsb2NhbGUubW9udGhzW3Nob3J0aGFuZCA/ICJzaG9ydGhhbmQiIDogImxvbmdoYW5kIl1bbW9udGhOdW1iZXJdOyB9OwogIHZhciByZXZGb3JtYXQgPSB7CiAgICAgIEQ6IGRvTm90aGluZywKICAgICAgRjogZnVuY3Rpb24gKGRhdGVPYmosIG1vbnRoTmFtZSwgbG9jYWxlKSB7CiAgICAgICAgICBkYXRlT2JqLnNldE1vbnRoKGxvY2FsZS5tb250aHMubG9uZ2hhbmQuaW5kZXhPZihtb250aE5hbWUpKTsKICAgICAgfSwKICAgICAgRzogZnVuY3Rpb24gKGRhdGVPYmosIGhvdXIpIHsKICAgICAgICAgIGRhdGVPYmouc2V0SG91cnMoKGRhdGVPYmouZ2V0SG91cnMoKSA+PSAxMiA/IDEyIDogMCkgKyBwYXJzZUZsb2F0KGhvdXIpKTsKICAgICAgfSwKICAgICAgSDogZnVuY3Rpb24gKGRhdGVPYmosIGhvdXIpIHsKICAgICAgICAgIGRhdGVPYmouc2V0SG91cnMocGFyc2VGbG9hdChob3VyKSk7CiAgICAgIH0sCiAgICAgIEo6IGZ1bmN0aW9uIChkYXRlT2JqLCBkYXkpIHsKICAgICAgICAgIGRhdGVPYmouc2V0RGF0ZShwYXJzZUZsb2F0KGRheSkpOwogICAgICB9LAogICAgICBLOiBmdW5jdGlvbiAoZGF0ZU9iaiwgYW1QTSwgbG9jYWxlKSB7CiAgICAgICAgICBkYXRlT2JqLnNldEhvdXJzKChkYXRlT2JqLmdldEhvdXJzKCkgJSAxMikgKwogICAgICAgICAgICAgIDEyICogaW50KG5ldyBSZWdFeHAobG9jYWxlLmFtUE1bMV0sICJpIikudGVzdChhbVBNKSkpOwogICAgICB9LAogICAgICBNOiBmdW5jdGlvbiAoZGF0ZU9iaiwgc2hvcnRNb250aCwgbG9jYWxlKSB7CiAgICAgICAgICBkYXRlT2JqLnNldE1vbnRoKGxvY2FsZS5tb250aHMuc2hvcnRoYW5kLmluZGV4T2Yoc2hvcnRNb250aCkpOwogICAgICB9LAogICAgICBTOiBmdW5jdGlvbiAoZGF0ZU9iaiwgc2Vjb25kcykgewogICAgICAgICAgZGF0ZU9iai5zZXRTZWNvbmRzKHBhcnNlRmxvYXQoc2Vjb25kcykpOwogICAgICB9LAogICAgICBVOiBmdW5jdGlvbiAoXywgdW5peFNlY29uZHMpIHsgcmV0dXJuIG5ldyBEYXRlKHBhcnNlRmxvYXQodW5peFNlY29uZHMpICogMTAwMCk7IH0sCiAgICAgIFc6IGZ1bmN0aW9uIChkYXRlT2JqLCB3ZWVrTnVtLCBsb2NhbGUpIHsKICAgICAgICAgIHZhciB3ZWVrTnVtYmVyID0gcGFyc2VJbnQod2Vla051bSk7CiAgICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKGRhdGVPYmouZ2V0RnVsbFllYXIoKSwgMCwgMiArICh3ZWVrTnVtYmVyIC0gMSkgKiA3LCAwLCAwLCAwLCAwKTsKICAgICAgICAgIGRhdGUuc2V0RGF0ZShkYXRlLmdldERhdGUoKSAtIGRhdGUuZ2V0RGF5KCkgKyBsb2NhbGUuZmlyc3REYXlPZldlZWspOwogICAgICAgICAgcmV0dXJuIGRhdGU7CiAgICAgIH0sCiAgICAgIFk6IGZ1bmN0aW9uIChkYXRlT2JqLCB5ZWFyKSB7CiAgICAgICAgICBkYXRlT2JqLnNldEZ1bGxZZWFyKHBhcnNlRmxvYXQoeWVhcikpOwogICAgICB9LAogICAgICBaOiBmdW5jdGlvbiAoXywgSVNPRGF0ZSkgeyByZXR1cm4gbmV3IERhdGUoSVNPRGF0ZSk7IH0sCiAgICAgIGQ6IGZ1bmN0aW9uIChkYXRlT2JqLCBkYXkpIHsKICAgICAgICAgIGRhdGVPYmouc2V0RGF0ZShwYXJzZUZsb2F0KGRheSkpOwogICAgICB9LAogICAgICBoOiBmdW5jdGlvbiAoZGF0ZU9iaiwgaG91cikgewogICAgICAgICAgZGF0ZU9iai5zZXRIb3VycygoZGF0ZU9iai5nZXRIb3VycygpID49IDEyID8gMTIgOiAwKSArIHBhcnNlRmxvYXQoaG91cikpOwogICAgICB9LAogICAgICBpOiBmdW5jdGlvbiAoZGF0ZU9iaiwgbWludXRlcykgewogICAgICAgICAgZGF0ZU9iai5zZXRNaW51dGVzKHBhcnNlRmxvYXQobWludXRlcykpOwogICAgICB9LAogICAgICBqOiBmdW5jdGlvbiAoZGF0ZU9iaiwgZGF5KSB7CiAgICAgICAgICBkYXRlT2JqLnNldERhdGUocGFyc2VGbG9hdChkYXkpKTsKICAgICAgfSwKICAgICAgbDogZG9Ob3RoaW5nLAogICAgICBtOiBmdW5jdGlvbiAoZGF0ZU9iaiwgbW9udGgpIHsKICAgICAgICAgIGRhdGVPYmouc2V0TW9udGgocGFyc2VGbG9hdChtb250aCkgLSAxKTsKICAgICAgfSwKICAgICAgbjogZnVuY3Rpb24gKGRhdGVPYmosIG1vbnRoKSB7CiAgICAgICAgICBkYXRlT2JqLnNldE1vbnRoKHBhcnNlRmxvYXQobW9udGgpIC0gMSk7CiAgICAgIH0sCiAgICAgIHM6IGZ1bmN0aW9uIChkYXRlT2JqLCBzZWNvbmRzKSB7CiAgICAgICAgICBkYXRlT2JqLnNldFNlY29uZHMocGFyc2VGbG9hdChzZWNvbmRzKSk7CiAgICAgIH0sCiAgICAgIHU6IGZ1bmN0aW9uIChfLCB1bml4TWlsbFNlY29uZHMpIHsKICAgICAgICAgIHJldHVybiBuZXcgRGF0ZShwYXJzZUZsb2F0KHVuaXhNaWxsU2Vjb25kcykpOwogICAgICB9LAogICAgICB3OiBkb05vdGhpbmcsCiAgICAgIHk6IGZ1bmN0aW9uIChkYXRlT2JqLCB5ZWFyKSB7CiAgICAgICAgICBkYXRlT2JqLnNldEZ1bGxZZWFyKDIwMDAgKyBwYXJzZUZsb2F0KHllYXIpKTsKICAgICAgfSwKICB9OwogIHZhciB0b2tlblJlZ2V4ID0gewogICAgICBEOiAiIiwKICAgICAgRjogIiIsCiAgICAgIEc6ICIoXFxkXFxkfFxcZCkiLAogICAgICBIOiAiKFxcZFxcZHxcXGQpIiwKICAgICAgSjogIihcXGRcXGR8XFxkKVxcdysiLAogICAgICBLOiAiIiwKICAgICAgTTogIiIsCiAgICAgIFM6ICIoXFxkXFxkfFxcZCkiLAogICAgICBVOiAiKC4rKSIsCiAgICAgIFc6ICIoXFxkXFxkfFxcZCkiLAogICAgICBZOiAiKFxcZHs0fSkiLAogICAgICBaOiAiKC4rKSIsCiAgICAgIGQ6ICIoXFxkXFxkfFxcZCkiLAogICAgICBoOiAiKFxcZFxcZHxcXGQpIiwKICAgICAgaTogIihcXGRcXGR8XFxkKSIsCiAgICAgIGo6ICIoXFxkXFxkfFxcZCkiLAogICAgICBsOiAiIiwKICAgICAgbTogIihcXGRcXGR8XFxkKSIsCiAgICAgIG46ICIoXFxkXFxkfFxcZCkiLAogICAgICBzOiAiKFxcZFxcZHxcXGQpIiwKICAgICAgdTogIiguKykiLAogICAgICB3OiAiKFxcZFxcZHxcXGQpIiwKICAgICAgeTogIihcXGR7Mn0pIiwKICB9OwogIHZhciBmb3JtYXRzID0gewogICAgICBaOiBmdW5jdGlvbiAoZGF0ZSkgeyByZXR1cm4gZGF0ZS50b0lTT1N0cmluZygpOyB9LAogICAgICBEOiBmdW5jdGlvbiAoZGF0ZSwgbG9jYWxlLCBvcHRpb25zKSB7CiAgICAgICAgICByZXR1cm4gbG9jYWxlLndlZWtkYXlzLnNob3J0aGFuZFtmb3JtYXRzLncoZGF0ZSwgbG9jYWxlLCBvcHRpb25zKV07CiAgICAgIH0sCiAgICAgIEY6IGZ1bmN0aW9uIChkYXRlLCBsb2NhbGUsIG9wdGlvbnMpIHsKICAgICAgICAgIHJldHVybiBtb250aFRvU3RyKGZvcm1hdHMubihkYXRlLCBsb2NhbGUsIG9wdGlvbnMpIC0gMSwgZmFsc2UsIGxvY2FsZSk7CiAgICAgIH0sCiAgICAgIEc6IGZ1bmN0aW9uIChkYXRlLCBsb2NhbGUsIG9wdGlvbnMpIHsKICAgICAgICAgIHJldHVybiBwYWQoZm9ybWF0cy5oKGRhdGUsIGxvY2FsZSwgb3B0aW9ucykpOwogICAgICB9LAogICAgICBIOiBmdW5jdGlvbiAoZGF0ZSkgeyByZXR1cm4gcGFkKGRhdGUuZ2V0SG91cnMoKSk7IH0sCiAgICAgIEo6IGZ1bmN0aW9uIChkYXRlLCBsb2NhbGUpIHsKICAgICAgICAgIHJldHVybiBsb2NhbGUub3JkaW5hbCAhPT0gdW5kZWZpbmVkCiAgICAgICAgICAgICAgPyBkYXRlLmdldERhdGUoKSArIGxvY2FsZS5vcmRpbmFsKGRhdGUuZ2V0RGF0ZSgpKQogICAgICAgICAgICAgIDogZGF0ZS5nZXREYXRlKCk7CiAgICAgIH0sCiAgICAgIEs6IGZ1bmN0aW9uIChkYXRlLCBsb2NhbGUpIHsgcmV0dXJuIGxvY2FsZS5hbVBNW2ludChkYXRlLmdldEhvdXJzKCkgPiAxMSldOyB9LAogICAgICBNOiBmdW5jdGlvbiAoZGF0ZSwgbG9jYWxlKSB7CiAgICAgICAgICByZXR1cm4gbW9udGhUb1N0cihkYXRlLmdldE1vbnRoKCksIHRydWUsIGxvY2FsZSk7CiAgICAgIH0sCiAgICAgIFM6IGZ1bmN0aW9uIChkYXRlKSB7IHJldHVybiBwYWQoZGF0ZS5nZXRTZWNvbmRzKCkpOyB9LAogICAgICBVOiBmdW5jdGlvbiAoZGF0ZSkgeyByZXR1cm4gZGF0ZS5nZXRUaW1lKCkgLyAxMDAwOyB9LAogICAgICBXOiBmdW5jdGlvbiAoZGF0ZSwgXywgb3B0aW9ucykgewogICAgICAgICAgcmV0dXJuIG9wdGlvbnMuZ2V0V2VlayhkYXRlKTsKICAgICAgfSwKICAgICAgWTogZnVuY3Rpb24gKGRhdGUpIHsgcmV0dXJuIHBhZChkYXRlLmdldEZ1bGxZZWFyKCksIDQpOyB9LAogICAgICBkOiBmdW5jdGlvbiAoZGF0ZSkgeyByZXR1cm4gcGFkKGRhdGUuZ2V0RGF0ZSgpKTsgfSwKICAgICAgaDogZnVuY3Rpb24gKGRhdGUpIHsgcmV0dXJuIChkYXRlLmdldEhvdXJzKCkgJSAxMiA/IGRhdGUuZ2V0SG91cnMoKSAlIDEyIDogMTIpOyB9LAogICAgICBpOiBmdW5jdGlvbiAoZGF0ZSkgeyByZXR1cm4gcGFkKGRhdGUuZ2V0TWludXRlcygpKTsgfSwKICAgICAgajogZnVuY3Rpb24gKGRhdGUpIHsgcmV0dXJuIGRhdGUuZ2V0RGF0ZSgpOyB9LAogICAgICBsOiBmdW5jdGlvbiAoZGF0ZSwgbG9jYWxlKSB7CiAgICAgICAgICByZXR1cm4gbG9jYWxlLndlZWtkYXlzLmxvbmdoYW5kW2RhdGUuZ2V0RGF5KCldOwogICAgICB9LAogICAgICBtOiBmdW5jdGlvbiAoZGF0ZSkgeyByZXR1cm4gcGFkKGRhdGUuZ2V0TW9udGgoKSArIDEpOyB9LAogICAgICBuOiBmdW5jdGlvbiAoZGF0ZSkgeyByZXR1cm4gZGF0ZS5nZXRNb250aCgpICsgMTsgfSwKICAgICAgczogZnVuY3Rpb24gKGRhdGUpIHsgcmV0dXJuIGRhdGUuZ2V0U2Vjb25kcygpOyB9LAogICAgICB1OiBmdW5jdGlvbiAoZGF0ZSkgeyByZXR1cm4gZGF0ZS5nZXRUaW1lKCk7IH0sCiAgICAgIHc6IGZ1bmN0aW9uIChkYXRlKSB7IHJldHVybiBkYXRlLmdldERheSgpOyB9LAogICAgICB5OiBmdW5jdGlvbiAoZGF0ZSkgeyByZXR1cm4gU3RyaW5nKGRhdGUuZ2V0RnVsbFllYXIoKSkuc3Vic3RyaW5nKDIpOyB9LAogIH07CgogIHZhciBjcmVhdGVEYXRlRm9ybWF0dGVyID0gZnVuY3Rpb24gKF9hKSB7CiAgICAgIHZhciBfYiA9IF9hLmNvbmZpZywgY29uZmlnID0gX2IgPT09IHZvaWQgMCA/IGRlZmF1bHRzIDogX2IsIF9jID0gX2EubDEwbiwgbDEwbiA9IF9jID09PSB2b2lkIDAgPyBlbmdsaXNoIDogX2MsIF9kID0gX2EuaXNNb2JpbGUsIGlzTW9iaWxlID0gX2QgPT09IHZvaWQgMCA/IGZhbHNlIDogX2Q7CiAgICAgIHJldHVybiBmdW5jdGlvbiAoZGF0ZU9iaiwgZnJtdCwgb3ZlcnJpZGVMb2NhbGUpIHsKICAgICAgICAgIHZhciBsb2NhbGUgPSBvdmVycmlkZUxvY2FsZSB8fCBsMTBuOwogICAgICAgICAgaWYgKGNvbmZpZy5mb3JtYXREYXRlICE9PSB1bmRlZmluZWQgJiYgIWlzTW9iaWxlKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpZy5mb3JtYXREYXRlKGRhdGVPYmosIGZybXQsIGxvY2FsZSk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gZnJtdAogICAgICAgICAgICAgIC5zcGxpdCgiIikKICAgICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChjLCBpLCBhcnIpIHsKICAgICAgICAgICAgICByZXR1cm4gZm9ybWF0c1tjXSAmJiBhcnJbaSAtIDFdICE9PSAiXFwiCiAgICAgICAgICAgICAgICAgID8gZm9ybWF0c1tjXShkYXRlT2JqLCBsb2NhbGUsIGNvbmZpZykKICAgICAgICAgICAgICAgICAgOiBjICE9PSAiXFwiCiAgICAgICAgICAgICAgICAgICAgICA/IGMKICAgICAgICAgICAgICAgICAgICAgIDogIiI7CiAgICAgICAgICB9KQogICAgICAgICAgICAgIC5qb2luKCIiKTsKICAgICAgfTsKICB9OwogIHZhciBjcmVhdGVEYXRlUGFyc2VyID0gZnVuY3Rpb24gKF9hKSB7CiAgICAgIHZhciBfYiA9IF9hLmNvbmZpZywgY29uZmlnID0gX2IgPT09IHZvaWQgMCA/IGRlZmF1bHRzIDogX2IsIF9jID0gX2EubDEwbiwgbDEwbiA9IF9jID09PSB2b2lkIDAgPyBlbmdsaXNoIDogX2M7CiAgICAgIHJldHVybiBmdW5jdGlvbiAoZGF0ZSwgZ2l2ZW5Gb3JtYXQsIHRpbWVsZXNzLCBjdXN0b21Mb2NhbGUpIHsKICAgICAgICAgIGlmIChkYXRlICE9PSAwICYmICFkYXRlKQogICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7CiAgICAgICAgICB2YXIgbG9jYWxlID0gY3VzdG9tTG9jYWxlIHx8IGwxMG47CiAgICAgICAgICB2YXIgcGFyc2VkRGF0ZTsKICAgICAgICAgIHZhciBkYXRlT3JpZyA9IGRhdGU7CiAgICAgICAgICBpZiAoZGF0ZSBpbnN0YW5jZW9mIERhdGUpCiAgICAgICAgICAgICAgcGFyc2VkRGF0ZSA9IG5ldyBEYXRlKGRhdGUuZ2V0VGltZSgpKTsKICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBkYXRlICE9PSAic3RyaW5nIiAmJgogICAgICAgICAgICAgIGRhdGUudG9GaXhlZCAhPT0gdW5kZWZpbmVkKQogICAgICAgICAgICAgIHBhcnNlZERhdGUgPSBuZXcgRGF0ZShkYXRlKTsKICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBkYXRlID09PSAic3RyaW5nIikgewogICAgICAgICAgICAgIHZhciBmb3JtYXQgPSBnaXZlbkZvcm1hdCB8fCAoY29uZmlnIHx8IGRlZmF1bHRzKS5kYXRlRm9ybWF0OwogICAgICAgICAgICAgIHZhciBkYXRlc3RyID0gU3RyaW5nKGRhdGUpLnRyaW0oKTsKICAgICAgICAgICAgICBpZiAoZGF0ZXN0ciA9PT0gInRvZGF5IikgewogICAgICAgICAgICAgICAgICBwYXJzZWREYXRlID0gbmV3IERhdGUoKTsKICAgICAgICAgICAgICAgICAgdGltZWxlc3MgPSB0cnVlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBlbHNlIGlmIChjb25maWcgJiYgY29uZmlnLnBhcnNlRGF0ZSkgewogICAgICAgICAgICAgICAgICBwYXJzZWREYXRlID0gY29uZmlnLnBhcnNlRGF0ZShkYXRlLCBmb3JtYXQpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBlbHNlIGlmICgvWiQvLnRlc3QoZGF0ZXN0cikgfHwKICAgICAgICAgICAgICAgICAgL0dNVCQvLnRlc3QoZGF0ZXN0cikpIHsKICAgICAgICAgICAgICAgICAgcGFyc2VkRGF0ZSA9IG5ldyBEYXRlKGRhdGUpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgdmFyIG1hdGNoZWQgPSB2b2lkIDAsIG9wcyA9IFtdOwogICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbWF0Y2hJbmRleCA9IDAsIHJlZ2V4U3RyID0gIiI7IGkgPCBmb3JtYXQubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgIHZhciB0b2tlbiA9IGZvcm1hdFtpXTsKICAgICAgICAgICAgICAgICAgICAgIHZhciBpc0JhY2tTbGFzaCA9IHRva2VuID09PSAiXFwiOwogICAgICAgICAgICAgICAgICAgICAgdmFyIGVzY2FwZWQgPSBmb3JtYXRbaSAtIDFdID09PSAiXFwiIHx8IGlzQmFja1NsYXNoOwogICAgICAgICAgICAgICAgICAgICAgaWYgKHRva2VuUmVnZXhbdG9rZW5dICYmICFlc2NhcGVkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVnZXhTdHIgKz0gdG9rZW5SZWdleFt0b2tlbl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGNoID0gbmV3IFJlZ0V4cChyZWdleFN0cikuZXhlYyhkYXRlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2ggJiYgKG1hdGNoZWQgPSB0cnVlKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHNbdG9rZW4gIT09ICJZIiA/ICJwdXNoIiA6ICJ1bnNoaWZ0Il0oewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm46IHJldkZvcm1hdFt0b2tlbl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWw6IG1hdGNoWysrbWF0Y2hJbmRleF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFpc0JhY2tTbGFzaCkKICAgICAgICAgICAgICAgICAgICAgICAgICByZWdleFN0ciArPSAiLiI7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgcGFyc2VkRGF0ZSA9CiAgICAgICAgICAgICAgICAgICAgICAhY29uZmlnIHx8ICFjb25maWcubm9DYWxlbmRhcgogICAgICAgICAgICAgICAgICAgICAgICAgID8gbmV3IERhdGUobmV3IERhdGUoKS5nZXRGdWxsWWVhcigpLCAwLCAxLCAwLCAwLCAwLCAwKQogICAgICAgICAgICAgICAgICAgICAgICAgIDogbmV3IERhdGUobmV3IERhdGUoKS5zZXRIb3VycygwLCAwLCAwLCAwKSk7CiAgICAgICAgICAgICAgICAgIG9wcy5mb3JFYWNoKGZ1bmN0aW9uIChfYSkgewogICAgICAgICAgICAgICAgICAgICAgdmFyIGZuID0gX2EuZm4sIHZhbCA9IF9hLnZhbDsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAocGFyc2VkRGF0ZSA9IGZuKHBhcnNlZERhdGUsIHZhbCwgbG9jYWxlKSB8fCBwYXJzZWREYXRlKTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIHBhcnNlZERhdGUgPSBtYXRjaGVkID8gcGFyc2VkRGF0ZSA6IHVuZGVmaW5lZDsKICAgICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoIShwYXJzZWREYXRlIGluc3RhbmNlb2YgRGF0ZSAmJiAhaXNOYU4ocGFyc2VkRGF0ZS5nZXRUaW1lKCkpKSkgewogICAgICAgICAgICAgIGNvbmZpZy5lcnJvckhhbmRsZXIobmV3IEVycm9yKCJJbnZhbGlkIGRhdGUgcHJvdmlkZWQ6ICIgKyBkYXRlT3JpZykpOwogICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAodGltZWxlc3MgPT09IHRydWUpCiAgICAgICAgICAgICAgcGFyc2VkRGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTsKICAgICAgICAgIHJldHVybiBwYXJzZWREYXRlOwogICAgICB9OwogIH07CiAgZnVuY3Rpb24gY29tcGFyZURhdGVzKGRhdGUxLCBkYXRlMiwgdGltZWxlc3MpIHsKICAgICAgaWYgKHRpbWVsZXNzID09PSB2b2lkIDApIHsgdGltZWxlc3MgPSB0cnVlOyB9CiAgICAgIGlmICh0aW1lbGVzcyAhPT0gZmFsc2UpIHsKICAgICAgICAgIHJldHVybiAobmV3IERhdGUoZGF0ZTEuZ2V0VGltZSgpKS5zZXRIb3VycygwLCAwLCAwLCAwKSAtCiAgICAgICAgICAgICAgbmV3IERhdGUoZGF0ZTIuZ2V0VGltZSgpKS5zZXRIb3VycygwLCAwLCAwLCAwKSk7CiAgICAgIH0KICAgICAgcmV0dXJuIGRhdGUxLmdldFRpbWUoKSAtIGRhdGUyLmdldFRpbWUoKTsKICB9CiAgdmFyIGlzQmV0d2VlbiA9IGZ1bmN0aW9uICh0cywgdHMxLCB0czIpIHsKICAgICAgcmV0dXJuIHRzID4gTWF0aC5taW4odHMxLCB0czIpICYmIHRzIDwgTWF0aC5tYXgodHMxLCB0czIpOwogIH07CiAgdmFyIGNhbGN1bGF0ZVNlY29uZHNTaW5jZU1pZG5pZ2h0ID0gZnVuY3Rpb24gKGhvdXJzLCBtaW51dGVzLCBzZWNvbmRzKSB7CiAgICAgIHJldHVybiBob3VycyAqIDM2MDAgKyBtaW51dGVzICogNjAgKyBzZWNvbmRzOwogIH07CiAgdmFyIHBhcnNlU2Vjb25kcyA9IGZ1bmN0aW9uIChzZWNvbmRzU2luY2VNaWRuaWdodCkgewogICAgICB2YXIgaG91cnMgPSBNYXRoLmZsb29yKHNlY29uZHNTaW5jZU1pZG5pZ2h0IC8gMzYwMCksIG1pbnV0ZXMgPSAoc2Vjb25kc1NpbmNlTWlkbmlnaHQgLSBob3VycyAqIDM2MDApIC8gNjA7CiAgICAgIHJldHVybiBbaG91cnMsIG1pbnV0ZXMsIHNlY29uZHNTaW5jZU1pZG5pZ2h0IC0gaG91cnMgKiAzNjAwIC0gbWludXRlcyAqIDYwXTsKICB9OwogIHZhciBkdXJhdGlvbiA9IHsKICAgICAgREFZOiA4NjQwMDAwMCwKICB9OwogIGZ1bmN0aW9uIGdldERlZmF1bHRIb3Vycyhjb25maWcpIHsKICAgICAgdmFyIGhvdXJzID0gY29uZmlnLmRlZmF1bHRIb3VyOwogICAgICB2YXIgbWludXRlcyA9IGNvbmZpZy5kZWZhdWx0TWludXRlOwogICAgICB2YXIgc2Vjb25kcyA9IGNvbmZpZy5kZWZhdWx0U2Vjb25kczsKICAgICAgaWYgKGNvbmZpZy5taW5EYXRlICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgIHZhciBtaW5Ib3VyID0gY29uZmlnLm1pbkRhdGUuZ2V0SG91cnMoKTsKICAgICAgICAgIHZhciBtaW5NaW51dGVzID0gY29uZmlnLm1pbkRhdGUuZ2V0TWludXRlcygpOwogICAgICAgICAgdmFyIG1pblNlY29uZHMgPSBjb25maWcubWluRGF0ZS5nZXRTZWNvbmRzKCk7CiAgICAgICAgICBpZiAoaG91cnMgPCBtaW5Ib3VyKSB7CiAgICAgICAgICAgICAgaG91cnMgPSBtaW5Ib3VyOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGhvdXJzID09PSBtaW5Ib3VyICYmIG1pbnV0ZXMgPCBtaW5NaW51dGVzKSB7CiAgICAgICAgICAgICAgbWludXRlcyA9IG1pbk1pbnV0ZXM7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoaG91cnMgPT09IG1pbkhvdXIgJiYgbWludXRlcyA9PT0gbWluTWludXRlcyAmJiBzZWNvbmRzIDwgbWluU2Vjb25kcykKICAgICAgICAgICAgICBzZWNvbmRzID0gY29uZmlnLm1pbkRhdGUuZ2V0U2Vjb25kcygpOwogICAgICB9CiAgICAgIGlmIChjb25maWcubWF4RGF0ZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICB2YXIgbWF4SHIgPSBjb25maWcubWF4RGF0ZS5nZXRIb3VycygpOwogICAgICAgICAgdmFyIG1heE1pbnV0ZXMgPSBjb25maWcubWF4RGF0ZS5nZXRNaW51dGVzKCk7CiAgICAgICAgICBob3VycyA9IE1hdGgubWluKGhvdXJzLCBtYXhIcik7CiAgICAgICAgICBpZiAoaG91cnMgPT09IG1heEhyKQogICAgICAgICAgICAgIG1pbnV0ZXMgPSBNYXRoLm1pbihtYXhNaW51dGVzLCBtaW51dGVzKTsKICAgICAgICAgIGlmIChob3VycyA9PT0gbWF4SHIgJiYgbWludXRlcyA9PT0gbWF4TWludXRlcykKICAgICAgICAgICAgICBzZWNvbmRzID0gY29uZmlnLm1heERhdGUuZ2V0U2Vjb25kcygpOwogICAgICB9CiAgICAgIHJldHVybiB7IGhvdXJzOiBob3VycywgbWludXRlczogbWludXRlcywgc2Vjb25kczogc2Vjb25kcyB9OwogIH0KCiAgaWYgKHR5cGVvZiBPYmplY3QuYXNzaWduICE9PSAiZnVuY3Rpb24iKSB7CiAgICAgIE9iamVjdC5hc3NpZ24gPSBmdW5jdGlvbiAodGFyZ2V0KSB7CiAgICAgICAgICB2YXIgYXJncyA9IFtdOwogICAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKICAgICAgICAgICAgICBhcmdzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldOwogICAgICAgICAgfQogICAgICAgICAgaWYgKCF0YXJnZXQpIHsKICAgICAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoIkNhbm5vdCBjb252ZXJ0IHVuZGVmaW5lZCBvciBudWxsIHRvIG9iamVjdCIpOwogICAgICAgICAgfQogICAgICAgICAgdmFyIF9sb29wXzEgPSBmdW5jdGlvbiAoc291cmNlKSB7CiAgICAgICAgICAgICAgaWYgKHNvdXJjZSkgewogICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhzb3VyY2UpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gKHRhcmdldFtrZXldID0gc291cmNlW2tleV0pOyB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICB9OwogICAgICAgICAgZm9yICh2YXIgX2EgPSAwLCBhcmdzXzEgPSBhcmdzOyBfYSA8IGFyZ3NfMS5sZW5ndGg7IF9hKyspIHsKICAgICAgICAgICAgICB2YXIgc291cmNlID0gYXJnc18xW19hXTsKICAgICAgICAgICAgICBfbG9vcF8xKHNvdXJjZSk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gdGFyZ2V0OwogICAgICB9OwogIH0KCiAgdmFyIF9fYXNzaWduID0gKHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19hc3NpZ24pIHx8IGZ1bmN0aW9uICgpIHsKICAgICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykgewogICAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07CiAgICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKQogICAgICAgICAgICAgICAgICB0W3BdID0gc1twXTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiB0OwogICAgICB9OwogICAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9OwogIHZhciBfX3NwcmVhZEFycmF5cyA9ICh1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fc3ByZWFkQXJyYXlzKSB8fCBmdW5jdGlvbiAoKSB7CiAgICAgIGZvciAodmFyIHMgPSAwLCBpID0gMCwgaWwgPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgaWw7IGkrKykgcyArPSBhcmd1bWVudHNbaV0ubGVuZ3RoOwogICAgICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspCiAgICAgICAgICBmb3IgKHZhciBhID0gYXJndW1lbnRzW2ldLCBqID0gMCwgamwgPSBhLmxlbmd0aDsgaiA8IGpsOyBqKyssIGsrKykKICAgICAgICAgICAgICByW2tdID0gYVtqXTsKICAgICAgcmV0dXJuIHI7CiAgfTsKICB2YXIgREVCT1VOQ0VEX0NIQU5HRV9NUyA9IDMwMDsKICBmdW5jdGlvbiBGbGF0cGlja3JJbnN0YW5jZShlbGVtZW50LCBpbnN0YW5jZUNvbmZpZykgewogICAgICB2YXIgc2VsZiA9IHsKICAgICAgICAgIGNvbmZpZzogX19hc3NpZ24oX19hc3NpZ24oe30sIGRlZmF1bHRzKSwgZmxhdHBpY2tyLmRlZmF1bHRDb25maWcpLAogICAgICAgICAgbDEwbjogZW5nbGlzaCwKICAgICAgfTsKICAgICAgc2VsZi5wYXJzZURhdGUgPSBjcmVhdGVEYXRlUGFyc2VyKHsgY29uZmlnOiBzZWxmLmNvbmZpZywgbDEwbjogc2VsZi5sMTBuIH0pOwogICAgICBzZWxmLl9oYW5kbGVycyA9IFtdOwogICAgICBzZWxmLnBsdWdpbkVsZW1lbnRzID0gW107CiAgICAgIHNlbGYubG9hZGVkUGx1Z2lucyA9IFtdOwogICAgICBzZWxmLl9iaW5kID0gYmluZDsKICAgICAgc2VsZi5fc2V0SG91cnNGcm9tRGF0ZSA9IHNldEhvdXJzRnJvbURhdGU7CiAgICAgIHNlbGYuX3Bvc2l0aW9uQ2FsZW5kYXIgPSBwb3NpdGlvbkNhbGVuZGFyOwogICAgICBzZWxmLmNoYW5nZU1vbnRoID0gY2hhbmdlTW9udGg7CiAgICAgIHNlbGYuY2hhbmdlWWVhciA9IGNoYW5nZVllYXI7CiAgICAgIHNlbGYuY2xlYXIgPSBjbGVhcjsKICAgICAgc2VsZi5jbG9zZSA9IGNsb3NlOwogICAgICBzZWxmLm9uTW91c2VPdmVyID0gb25Nb3VzZU92ZXI7CiAgICAgIHNlbGYuX2NyZWF0ZUVsZW1lbnQgPSBjcmVhdGVFbGVtZW50OwogICAgICBzZWxmLmNyZWF0ZURheSA9IGNyZWF0ZURheTsKICAgICAgc2VsZi5kZXN0cm95ID0gZGVzdHJveTsKICAgICAgc2VsZi5pc0VuYWJsZWQgPSBpc0VuYWJsZWQ7CiAgICAgIHNlbGYuanVtcFRvRGF0ZSA9IGp1bXBUb0RhdGU7CiAgICAgIHNlbGYudXBkYXRlVmFsdWUgPSB1cGRhdGVWYWx1ZTsKICAgICAgc2VsZi5vcGVuID0gb3BlbjsKICAgICAgc2VsZi5yZWRyYXcgPSByZWRyYXc7CiAgICAgIHNlbGYuc2V0ID0gc2V0OwogICAgICBzZWxmLnNldERhdGUgPSBzZXREYXRlOwogICAgICBzZWxmLnRvZ2dsZSA9IHRvZ2dsZTsKICAgICAgZnVuY3Rpb24gc2V0dXBIZWxwZXJGdW5jdGlvbnMoKSB7CiAgICAgICAgICBzZWxmLnV0aWxzID0gewogICAgICAgICAgICAgIGdldERheXNJbk1vbnRoOiBmdW5jdGlvbiAobW9udGgsIHlyKSB7CiAgICAgICAgICAgICAgICAgIGlmIChtb250aCA9PT0gdm9pZCAwKSB7IG1vbnRoID0gc2VsZi5jdXJyZW50TW9udGg7IH0KICAgICAgICAgICAgICAgICAgaWYgKHlyID09PSB2b2lkIDApIHsgeXIgPSBzZWxmLmN1cnJlbnRZZWFyOyB9CiAgICAgICAgICAgICAgICAgIGlmIChtb250aCA9PT0gMSAmJiAoKHlyICUgNCA9PT0gMCAmJiB5ciAlIDEwMCAhPT0gMCkgfHwgeXIgJSA0MDAgPT09IDApKQogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDI5OwogICAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5sMTBuLmRheXNJbk1vbnRoW21vbnRoXTsKICAgICAgICAgICAgICB9LAogICAgICAgICAgfTsKICAgICAgfQogICAgICBmdW5jdGlvbiBpbml0KCkgewogICAgICAgICAgc2VsZi5lbGVtZW50ID0gc2VsZi5pbnB1dCA9IGVsZW1lbnQ7CiAgICAgICAgICBzZWxmLmlzT3BlbiA9IGZhbHNlOwogICAgICAgICAgcGFyc2VDb25maWcoKTsKICAgICAgICAgIHNldHVwTG9jYWxlKCk7CiAgICAgICAgICBzZXR1cElucHV0cygpOwogICAgICAgICAgc2V0dXBEYXRlcygpOwogICAgICAgICAgc2V0dXBIZWxwZXJGdW5jdGlvbnMoKTsKICAgICAgICAgIGlmICghc2VsZi5pc01vYmlsZSkKICAgICAgICAgICAgICBidWlsZCgpOwogICAgICAgICAgYmluZEV2ZW50cygpOwogICAgICAgICAgaWYgKHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggfHwgc2VsZi5jb25maWcubm9DYWxlbmRhcikgewogICAgICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5lbmFibGVUaW1lKSB7CiAgICAgICAgICAgICAgICAgIHNldEhvdXJzRnJvbURhdGUoc2VsZi5jb25maWcubm9DYWxlbmRhciA/IHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqIDogdW5kZWZpbmVkKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgdXBkYXRlVmFsdWUoZmFsc2UpOwogICAgICAgICAgfQogICAgICAgICAgc2V0Q2FsZW5kYXJXaWR0aCgpOwogICAgICAgICAgdmFyIGlzU2FmYXJpID0gL14oKD8hY2hyb21lfGFuZHJvaWQpLikqc2FmYXJpL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTsKICAgICAgICAgIGlmICghc2VsZi5pc01vYmlsZSAmJiBpc1NhZmFyaSkgewogICAgICAgICAgICAgIHBvc2l0aW9uQ2FsZW5kYXIoKTsKICAgICAgICAgIH0KICAgICAgICAgIHRyaWdnZXJFdmVudCgib25SZWFkeSIpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGdldENsb3Nlc3RBY3RpdmVFbGVtZW50KCkgewogICAgICAgICAgdmFyIF9hOwogICAgICAgICAgcmV0dXJuICgoKF9hID0gc2VsZi5jYWxlbmRhckNvbnRhaW5lcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmdldFJvb3ROb2RlKCkpCiAgICAgICAgICAgICAgLmFjdGl2ZUVsZW1lbnQgfHwgZG9jdW1lbnQuYWN0aXZlRWxlbWVudCk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gYmluZFRvSW5zdGFuY2UoZm4pIHsKICAgICAgICAgIHJldHVybiBmbi5iaW5kKHNlbGYpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHNldENhbGVuZGFyV2lkdGgoKSB7CiAgICAgICAgICB2YXIgY29uZmlnID0gc2VsZi5jb25maWc7CiAgICAgICAgICBpZiAoY29uZmlnLndlZWtOdW1iZXJzID09PSBmYWxzZSAmJiBjb25maWcuc2hvd01vbnRocyA9PT0gMSkgewogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICAgIGVsc2UgaWYgKGNvbmZpZy5ub0NhbGVuZGFyICE9PSB0cnVlKSB7CiAgICAgICAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIGlmIChzZWxmLmNhbGVuZGFyQ29udGFpbmVyICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuc3R5bGUudmlzaWJpbGl0eSA9ICJoaWRkZW4iOwogICAgICAgICAgICAgICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBpZiAoc2VsZi5kYXlzQ29udGFpbmVyICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgICAgICAgIHZhciBkYXlzV2lkdGggPSAoc2VsZi5kYXlzLm9mZnNldFdpZHRoICsgMSkgKiBjb25maWcuc2hvd01vbnRoczsKICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZGF5c0NvbnRhaW5lci5zdHlsZS53aWR0aCA9IGRheXNXaWR0aCArICJweCI7CiAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnN0eWxlLndpZHRoID0KICAgICAgICAgICAgICAgICAgICAgICAgICBkYXlzV2lkdGggKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoc2VsZi53ZWVrV3JhcHBlciAhPT0gdW5kZWZpbmVkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHNlbGYud2Vla1dyYXBwZXIub2Zmc2V0V2lkdGgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogMCkgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAicHgiOwogICAgICAgICAgICAgICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgidmlzaWJpbGl0eSIpOwogICAgICAgICAgICAgICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgiZGlzcGxheSIpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gdXBkYXRlVGltZShlKSB7CiAgICAgICAgICBpZiAoc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICAgIHZhciBkZWZhdWx0RGF0ZSA9IHNlbGYuY29uZmlnLm1pbkRhdGUgPT09IHVuZGVmaW5lZCB8fAogICAgICAgICAgICAgICAgICBjb21wYXJlRGF0ZXMobmV3IERhdGUoKSwgc2VsZi5jb25maWcubWluRGF0ZSkgPj0gMAogICAgICAgICAgICAgICAgICA/IG5ldyBEYXRlKCkKICAgICAgICAgICAgICAgICAgOiBuZXcgRGF0ZShzZWxmLmNvbmZpZy5taW5EYXRlLmdldFRpbWUoKSk7CiAgICAgICAgICAgICAgdmFyIGRlZmF1bHRzID0gZ2V0RGVmYXVsdEhvdXJzKHNlbGYuY29uZmlnKTsKICAgICAgICAgICAgICBkZWZhdWx0RGF0ZS5zZXRIb3VycyhkZWZhdWx0cy5ob3VycywgZGVmYXVsdHMubWludXRlcywgZGVmYXVsdHMuc2Vjb25kcywgZGVmYXVsdERhdGUuZ2V0TWlsbGlzZWNvbmRzKCkpOwogICAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlcyA9IFtkZWZhdWx0RGF0ZV07CiAgICAgICAgICAgICAgc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmogPSBkZWZhdWx0RGF0ZTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChlICE9PSB1bmRlZmluZWQgJiYgZS50eXBlICE9PSAiYmx1ciIpIHsKICAgICAgICAgICAgICB0aW1lV3JhcHBlcihlKTsKICAgICAgICAgIH0KICAgICAgICAgIHZhciBwcmV2VmFsdWUgPSBzZWxmLl9pbnB1dC52YWx1ZTsKICAgICAgICAgIHNldEhvdXJzRnJvbUlucHV0cygpOwogICAgICAgICAgdXBkYXRlVmFsdWUoKTsKICAgICAgICAgIGlmIChzZWxmLl9pbnB1dC52YWx1ZSAhPT0gcHJldlZhbHVlKSB7CiAgICAgICAgICAgICAgc2VsZi5fZGVib3VuY2VkQ2hhbmdlKCk7CiAgICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gYW1wbTJtaWxpdGFyeShob3VyLCBhbVBNKSB7CiAgICAgICAgICByZXR1cm4gKGhvdXIgJSAxMikgKyAxMiAqIGludChhbVBNID09PSBzZWxmLmwxMG4uYW1QTVsxXSk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gbWlsaXRhcnkyYW1wbShob3VyKSB7CiAgICAgICAgICBzd2l0Y2ggKGhvdXIgJSAyNCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgICAgICByZXR1cm4gMTI7CiAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgcmV0dXJuIGhvdXIgJSAxMjsKICAgICAgICAgIH0KICAgICAgfQogICAgICBmdW5jdGlvbiBzZXRIb3Vyc0Zyb21JbnB1dHMoKSB7CiAgICAgICAgICBpZiAoc2VsZi5ob3VyRWxlbWVudCA9PT0gdW5kZWZpbmVkIHx8IHNlbGYubWludXRlRWxlbWVudCA9PT0gdW5kZWZpbmVkKQogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIHZhciBob3VycyA9IChwYXJzZUludChzZWxmLmhvdXJFbGVtZW50LnZhbHVlLnNsaWNlKC0yKSwgMTApIHx8IDApICUgMjQsIG1pbnV0ZXMgPSAocGFyc2VJbnQoc2VsZi5taW51dGVFbGVtZW50LnZhbHVlLCAxMCkgfHwgMCkgJSA2MCwgc2Vjb25kcyA9IHNlbGYuc2Vjb25kRWxlbWVudCAhPT0gdW5kZWZpbmVkCiAgICAgICAgICAgICAgPyAocGFyc2VJbnQoc2VsZi5zZWNvbmRFbGVtZW50LnZhbHVlLCAxMCkgfHwgMCkgJSA2MAogICAgICAgICAgICAgIDogMDsKICAgICAgICAgIGlmIChzZWxmLmFtUE0gIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgIGhvdXJzID0gYW1wbTJtaWxpdGFyeShob3Vycywgc2VsZi5hbVBNLnRleHRDb250ZW50KTsKICAgICAgICAgIH0KICAgICAgICAgIHZhciBsaW1pdE1pbkhvdXJzID0gc2VsZi5jb25maWcubWluVGltZSAhPT0gdW5kZWZpbmVkIHx8CiAgICAgICAgICAgICAgKHNlbGYuY29uZmlnLm1pbkRhdGUgJiYKICAgICAgICAgICAgICAgICAgc2VsZi5taW5EYXRlSGFzVGltZSAmJgogICAgICAgICAgICAgICAgICBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiAmJgogICAgICAgICAgICAgICAgICBjb21wYXJlRGF0ZXMoc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmosIHNlbGYuY29uZmlnLm1pbkRhdGUsIHRydWUpID09PQogICAgICAgICAgICAgICAgICAgICAgMCk7CiAgICAgICAgICB2YXIgbGltaXRNYXhIb3VycyA9IHNlbGYuY29uZmlnLm1heFRpbWUgIT09IHVuZGVmaW5lZCB8fAogICAgICAgICAgICAgIChzZWxmLmNvbmZpZy5tYXhEYXRlICYmCiAgICAgICAgICAgICAgICAgIHNlbGYubWF4RGF0ZUhhc1RpbWUgJiYKICAgICAgICAgICAgICAgICAgc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmogJiYKICAgICAgICAgICAgICAgICAgY29tcGFyZURhdGVzKHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqLCBzZWxmLmNvbmZpZy5tYXhEYXRlLCB0cnVlKSA9PT0KICAgICAgICAgICAgICAgICAgICAgIDApOwogICAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1heFRpbWUgIT09IHVuZGVmaW5lZCAmJgogICAgICAgICAgICAgIHNlbGYuY29uZmlnLm1pblRpbWUgIT09IHVuZGVmaW5lZCAmJgogICAgICAgICAgICAgIHNlbGYuY29uZmlnLm1pblRpbWUgPiBzZWxmLmNvbmZpZy5tYXhUaW1lKSB7CiAgICAgICAgICAgICAgdmFyIG1pbkJvdW5kID0gY2FsY3VsYXRlU2Vjb25kc1NpbmNlTWlkbmlnaHQoc2VsZi5jb25maWcubWluVGltZS5nZXRIb3VycygpLCBzZWxmLmNvbmZpZy5taW5UaW1lLmdldE1pbnV0ZXMoKSwgc2VsZi5jb25maWcubWluVGltZS5nZXRTZWNvbmRzKCkpOwogICAgICAgICAgICAgIHZhciBtYXhCb3VuZCA9IGNhbGN1bGF0ZVNlY29uZHNTaW5jZU1pZG5pZ2h0KHNlbGYuY29uZmlnLm1heFRpbWUuZ2V0SG91cnMoKSwgc2VsZi5jb25maWcubWF4VGltZS5nZXRNaW51dGVzKCksIHNlbGYuY29uZmlnLm1heFRpbWUuZ2V0U2Vjb25kcygpKTsKICAgICAgICAgICAgICB2YXIgY3VycmVudFRpbWUgPSBjYWxjdWxhdGVTZWNvbmRzU2luY2VNaWRuaWdodChob3VycywgbWludXRlcywgc2Vjb25kcyk7CiAgICAgICAgICAgICAgaWYgKGN1cnJlbnRUaW1lID4gbWF4Qm91bmQgJiYgY3VycmVudFRpbWUgPCBtaW5Cb3VuZCkgewogICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gcGFyc2VTZWNvbmRzKG1pbkJvdW5kKTsKICAgICAgICAgICAgICAgICAgaG91cnMgPSByZXN1bHRbMF07CiAgICAgICAgICAgICAgICAgIG1pbnV0ZXMgPSByZXN1bHRbMV07CiAgICAgICAgICAgICAgICAgIHNlY29uZHMgPSByZXN1bHRbMl07CiAgICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgaWYgKGxpbWl0TWF4SG91cnMpIHsKICAgICAgICAgICAgICAgICAgdmFyIG1heFRpbWUgPSBzZWxmLmNvbmZpZy5tYXhUaW1lICE9PSB1bmRlZmluZWQKICAgICAgICAgICAgICAgICAgICAgID8gc2VsZi5jb25maWcubWF4VGltZQogICAgICAgICAgICAgICAgICAgICAgOiBzZWxmLmNvbmZpZy5tYXhEYXRlOwogICAgICAgICAgICAgICAgICBob3VycyA9IE1hdGgubWluKGhvdXJzLCBtYXhUaW1lLmdldEhvdXJzKCkpOwogICAgICAgICAgICAgICAgICBpZiAoaG91cnMgPT09IG1heFRpbWUuZ2V0SG91cnMoKSkKICAgICAgICAgICAgICAgICAgICAgIG1pbnV0ZXMgPSBNYXRoLm1pbihtaW51dGVzLCBtYXhUaW1lLmdldE1pbnV0ZXMoKSk7CiAgICAgICAgICAgICAgICAgIGlmIChtaW51dGVzID09PSBtYXhUaW1lLmdldE1pbnV0ZXMoKSkKICAgICAgICAgICAgICAgICAgICAgIHNlY29uZHMgPSBNYXRoLm1pbihzZWNvbmRzLCBtYXhUaW1lLmdldFNlY29uZHMoKSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmIChsaW1pdE1pbkhvdXJzKSB7CiAgICAgICAgICAgICAgICAgIHZhciBtaW5UaW1lID0gc2VsZi5jb25maWcubWluVGltZSAhPT0gdW5kZWZpbmVkCiAgICAgICAgICAgICAgICAgICAgICA/IHNlbGYuY29uZmlnLm1pblRpbWUKICAgICAgICAgICAgICAgICAgICAgIDogc2VsZi5jb25maWcubWluRGF0ZTsKICAgICAgICAgICAgICAgICAgaG91cnMgPSBNYXRoLm1heChob3VycywgbWluVGltZS5nZXRIb3VycygpKTsKICAgICAgICAgICAgICAgICAgaWYgKGhvdXJzID09PSBtaW5UaW1lLmdldEhvdXJzKCkgJiYgbWludXRlcyA8IG1pblRpbWUuZ2V0TWludXRlcygpKQogICAgICAgICAgICAgICAgICAgICAgbWludXRlcyA9IG1pblRpbWUuZ2V0TWludXRlcygpOwogICAgICAgICAgICAgICAgICBpZiAobWludXRlcyA9PT0gbWluVGltZS5nZXRNaW51dGVzKCkpCiAgICAgICAgICAgICAgICAgICAgICBzZWNvbmRzID0gTWF0aC5tYXgoc2Vjb25kcywgbWluVGltZS5nZXRTZWNvbmRzKCkpOwogICAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHNldEhvdXJzKGhvdXJzLCBtaW51dGVzLCBzZWNvbmRzKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBzZXRIb3Vyc0Zyb21EYXRlKGRhdGVPYmopIHsKICAgICAgICAgIHZhciBkYXRlID0gZGF0ZU9iaiB8fCBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iajsKICAgICAgICAgIGlmIChkYXRlICYmIGRhdGUgaW5zdGFuY2VvZiBEYXRlKSB7CiAgICAgICAgICAgICAgc2V0SG91cnMoZGF0ZS5nZXRIb3VycygpLCBkYXRlLmdldE1pbnV0ZXMoKSwgZGF0ZS5nZXRTZWNvbmRzKCkpOwogICAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIHNldEhvdXJzKGhvdXJzLCBtaW51dGVzLCBzZWNvbmRzKSB7CiAgICAgICAgICBpZiAoc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmogIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgIHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqLnNldEhvdXJzKGhvdXJzICUgMjQsIG1pbnV0ZXMsIHNlY29uZHMgfHwgMCwgMCk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoIXNlbGYuaG91ckVsZW1lbnQgfHwgIXNlbGYubWludXRlRWxlbWVudCB8fCBzZWxmLmlzTW9iaWxlKQogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIHNlbGYuaG91ckVsZW1lbnQudmFsdWUgPSBwYWQoIXNlbGYuY29uZmlnLnRpbWVfMjRocgogICAgICAgICAgICAgID8gKCgxMiArIGhvdXJzKSAlIDEyKSArIDEyICogaW50KGhvdXJzICUgMTIgPT09IDApCiAgICAgICAgICAgICAgOiBob3Vycyk7CiAgICAgICAgICBzZWxmLm1pbnV0ZUVsZW1lbnQudmFsdWUgPSBwYWQobWludXRlcyk7CiAgICAgICAgICBpZiAoc2VsZi5hbVBNICE9PSB1bmRlZmluZWQpCiAgICAgICAgICAgICAgc2VsZi5hbVBNLnRleHRDb250ZW50ID0gc2VsZi5sMTBuLmFtUE1baW50KGhvdXJzID49IDEyKV07CiAgICAgICAgICBpZiAoc2VsZi5zZWNvbmRFbGVtZW50ICE9PSB1bmRlZmluZWQpCiAgICAgICAgICAgICAgc2VsZi5zZWNvbmRFbGVtZW50LnZhbHVlID0gcGFkKHNlY29uZHMpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIG9uWWVhcklucHV0KGV2ZW50KSB7CiAgICAgICAgICB2YXIgZXZlbnRUYXJnZXQgPSBnZXRFdmVudFRhcmdldChldmVudCk7CiAgICAgICAgICB2YXIgeWVhciA9IHBhcnNlSW50KGV2ZW50VGFyZ2V0LnZhbHVlKSArIChldmVudC5kZWx0YSB8fCAwKTsKICAgICAgICAgIGlmICh5ZWFyIC8gMTAwMCA+IDEgfHwKICAgICAgICAgICAgICAoZXZlbnQua2V5ID09PSAiRW50ZXIiICYmICEvW15cZF0vLnRlc3QoeWVhci50b1N0cmluZygpKSkpIHsKICAgICAgICAgICAgICBjaGFuZ2VZZWFyKHllYXIpOwogICAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIGJpbmQoZWxlbWVudCwgZXZlbnQsIGhhbmRsZXIsIG9wdGlvbnMpIHsKICAgICAgICAgIGlmIChldmVudCBpbnN0YW5jZW9mIEFycmF5KQogICAgICAgICAgICAgIHJldHVybiBldmVudC5mb3JFYWNoKGZ1bmN0aW9uIChldikgeyByZXR1cm4gYmluZChlbGVtZW50LCBldiwgaGFuZGxlciwgb3B0aW9ucyk7IH0pOwogICAgICAgICAgaWYgKGVsZW1lbnQgaW5zdGFuY2VvZiBBcnJheSkKICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudC5mb3JFYWNoKGZ1bmN0aW9uIChlbCkgeyByZXR1cm4gYmluZChlbCwgZXZlbnQsIGhhbmRsZXIsIG9wdGlvbnMpOyB9KTsKICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgaGFuZGxlciwgb3B0aW9ucyk7CiAgICAgICAgICBzZWxmLl9oYW5kbGVycy5wdXNoKHsKICAgICAgICAgICAgICByZW1vdmU6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgaGFuZGxlciwgb3B0aW9ucyk7IH0sCiAgICAgICAgICB9KTsKICAgICAgfQogICAgICBmdW5jdGlvbiB0cmlnZ2VyQ2hhbmdlKCkgewogICAgICAgICAgdHJpZ2dlckV2ZW50KCJvbkNoYW5nZSIpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGJpbmRFdmVudHMoKSB7CiAgICAgICAgICBpZiAoc2VsZi5jb25maWcud3JhcCkgewogICAgICAgICAgICAgIFsib3BlbiIsICJjbG9zZSIsICJ0b2dnbGUiLCAiY2xlYXIiXS5mb3JFYWNoKGZ1bmN0aW9uIChldnQpIHsKICAgICAgICAgICAgICAgICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChzZWxmLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgiW2RhdGEtIiArIGV2dCArICJdIiksIGZ1bmN0aW9uIChlbCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJpbmQoZWwsICJjbGljayIsIHNlbGZbZXZ0XSk7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHNlbGYuaXNNb2JpbGUpIHsKICAgICAgICAgICAgICBzZXR1cE1vYmlsZSgpOwogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICAgIHZhciBkZWJvdW5jZWRSZXNpemUgPSBkZWJvdW5jZShvblJlc2l6ZSwgNTApOwogICAgICAgICAgc2VsZi5fZGVib3VuY2VkQ2hhbmdlID0gZGVib3VuY2UodHJpZ2dlckNoYW5nZSwgREVCT1VOQ0VEX0NIQU5HRV9NUyk7CiAgICAgICAgICBpZiAoc2VsZi5kYXlzQ29udGFpbmVyICYmICEvaVBob25lfGlQYWR8aVBvZC9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpCiAgICAgICAgICAgICAgYmluZChzZWxmLmRheXNDb250YWluZXIsICJtb3VzZW92ZXIiLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICBpZiAoc2VsZi5jb25maWcubW9kZSA9PT0gInJhbmdlIikKICAgICAgICAgICAgICAgICAgICAgIG9uTW91c2VPdmVyKGdldEV2ZW50VGFyZ2V0KGUpKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgIGJpbmQoc2VsZi5faW5wdXQsICJrZXlkb3duIiwgb25LZXlEb3duKTsKICAgICAgICAgIGlmIChzZWxmLmNhbGVuZGFyQ29udGFpbmVyICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICBiaW5kKHNlbGYuY2FsZW5kYXJDb250YWluZXIsICJrZXlkb3duIiwgb25LZXlEb3duKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmICghc2VsZi5jb25maWcuaW5saW5lICYmICFzZWxmLmNvbmZpZy5zdGF0aWMpCiAgICAgICAgICAgICAgYmluZCh3aW5kb3csICJyZXNpemUiLCBkZWJvdW5jZWRSZXNpemUpOwogICAgICAgICAgaWYgKHdpbmRvdy5vbnRvdWNoc3RhcnQgIT09IHVuZGVmaW5lZCkKICAgICAgICAgICAgICBiaW5kKHdpbmRvdy5kb2N1bWVudCwgInRvdWNoc3RhcnQiLCBkb2N1bWVudENsaWNrKTsKICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICBiaW5kKHdpbmRvdy5kb2N1bWVudCwgIm1vdXNlZG93biIsIGRvY3VtZW50Q2xpY2spOwogICAgICAgICAgYmluZCh3aW5kb3cuZG9jdW1lbnQsICJmb2N1cyIsIGRvY3VtZW50Q2xpY2ssIHsgY2FwdHVyZTogdHJ1ZSB9KTsKICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5jbGlja09wZW5zID09PSB0cnVlKSB7CiAgICAgICAgICAgICAgYmluZChzZWxmLl9pbnB1dCwgImZvY3VzIiwgc2VsZi5vcGVuKTsKICAgICAgICAgICAgICBiaW5kKHNlbGYuX2lucHV0LCAiY2xpY2siLCBzZWxmLm9wZW4pOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHNlbGYuZGF5c0NvbnRhaW5lciAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgYmluZChzZWxmLm1vbnRoTmF2LCAiY2xpY2siLCBvbk1vbnRoTmF2Q2xpY2spOwogICAgICAgICAgICAgIGJpbmQoc2VsZi5tb250aE5hdiwgWyJrZXl1cCIsICJpbmNyZW1lbnQiXSwgb25ZZWFySW5wdXQpOwogICAgICAgICAgICAgIGJpbmQoc2VsZi5kYXlzQ29udGFpbmVyLCAiY2xpY2siLCBzZWxlY3REYXRlKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChzZWxmLnRpbWVDb250YWluZXIgIT09IHVuZGVmaW5lZCAmJgogICAgICAgICAgICAgIHNlbGYubWludXRlRWxlbWVudCAhPT0gdW5kZWZpbmVkICYmCiAgICAgICAgICAgICAgc2VsZi5ob3VyRWxlbWVudCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgdmFyIHNlbFRleHQgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICByZXR1cm4gZ2V0RXZlbnRUYXJnZXQoZSkuc2VsZWN0KCk7CiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICBiaW5kKHNlbGYudGltZUNvbnRhaW5lciwgWyJpbmNyZW1lbnQiXSwgdXBkYXRlVGltZSk7CiAgICAgICAgICAgICAgYmluZChzZWxmLnRpbWVDb250YWluZXIsICJibHVyIiwgdXBkYXRlVGltZSwgeyBjYXB0dXJlOiB0cnVlIH0pOwogICAgICAgICAgICAgIGJpbmQoc2VsZi50aW1lQ29udGFpbmVyLCAiY2xpY2siLCB0aW1lSW5jcmVtZW50KTsKICAgICAgICAgICAgICBiaW5kKFtzZWxmLmhvdXJFbGVtZW50LCBzZWxmLm1pbnV0ZUVsZW1lbnRdLCBbImZvY3VzIiwgImNsaWNrIl0sIHNlbFRleHQpOwogICAgICAgICAgICAgIGlmIChzZWxmLnNlY29uZEVsZW1lbnQgIT09IHVuZGVmaW5lZCkKICAgICAgICAgICAgICAgICAgYmluZChzZWxmLnNlY29uZEVsZW1lbnQsICJmb2N1cyIsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNlbGYuc2Vjb25kRWxlbWVudCAmJiBzZWxmLnNlY29uZEVsZW1lbnQuc2VsZWN0KCk7IH0pOwogICAgICAgICAgICAgIGlmIChzZWxmLmFtUE0gIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICBiaW5kKHNlbGYuYW1QTSwgImNsaWNrIiwgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVRpbWUoZSk7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5hbGxvd0lucHV0KSB7CiAgICAgICAgICAgICAgYmluZChzZWxmLl9pbnB1dCwgImJsdXIiLCBvbkJsdXIpOwogICAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIGp1bXBUb0RhdGUoanVtcERhdGUsIHRyaWdnZXJDaGFuZ2UpIHsKICAgICAgICAgIHZhciBqdW1wVG8gPSBqdW1wRGF0ZSAhPT0gdW5kZWZpbmVkCiAgICAgICAgICAgICAgPyBzZWxmLnBhcnNlRGF0ZShqdW1wRGF0ZSkKICAgICAgICAgICAgICA6IHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqIHx8CiAgICAgICAgICAgICAgICAgIChzZWxmLmNvbmZpZy5taW5EYXRlICYmIHNlbGYuY29uZmlnLm1pbkRhdGUgPiBzZWxmLm5vdwogICAgICAgICAgICAgICAgICAgICAgPyBzZWxmLmNvbmZpZy5taW5EYXRlCiAgICAgICAgICAgICAgICAgICAgICA6IHNlbGYuY29uZmlnLm1heERhdGUgJiYgc2VsZi5jb25maWcubWF4RGF0ZSA8IHNlbGYubm93CiAgICAgICAgICAgICAgICAgICAgICAgICAgPyBzZWxmLmNvbmZpZy5tYXhEYXRlCiAgICAgICAgICAgICAgICAgICAgICAgICAgOiBzZWxmLm5vdyk7CiAgICAgICAgICB2YXIgb2xkWWVhciA9IHNlbGYuY3VycmVudFllYXI7CiAgICAgICAgICB2YXIgb2xkTW9udGggPSBzZWxmLmN1cnJlbnRNb250aDsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgaWYgKGp1bXBUbyAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICAgIHNlbGYuY3VycmVudFllYXIgPSBqdW1wVG8uZ2V0RnVsbFllYXIoKTsKICAgICAgICAgICAgICAgICAgc2VsZi5jdXJyZW50TW9udGggPSBqdW1wVG8uZ2V0TW9udGgoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgIGUubWVzc2FnZSA9ICJJbnZhbGlkIGRhdGUgc3VwcGxpZWQ6ICIgKyBqdW1wVG87CiAgICAgICAgICAgICAgc2VsZi5jb25maWcuZXJyb3JIYW5kbGVyKGUpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHRyaWdnZXJDaGFuZ2UgJiYgc2VsZi5jdXJyZW50WWVhciAhPT0gb2xkWWVhcikgewogICAgICAgICAgICAgIHRyaWdnZXJFdmVudCgib25ZZWFyQ2hhbmdlIik7CiAgICAgICAgICAgICAgYnVpbGRNb250aFN3aXRjaCgpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHRyaWdnZXJDaGFuZ2UgJiYKICAgICAgICAgICAgICAoc2VsZi5jdXJyZW50WWVhciAhPT0gb2xkWWVhciB8fCBzZWxmLmN1cnJlbnRNb250aCAhPT0gb2xkTW9udGgpKSB7CiAgICAgICAgICAgICAgdHJpZ2dlckV2ZW50KCJvbk1vbnRoQ2hhbmdlIik7CiAgICAgICAgICB9CiAgICAgICAgICBzZWxmLnJlZHJhdygpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHRpbWVJbmNyZW1lbnQoZSkgewogICAgICAgICAgdmFyIGV2ZW50VGFyZ2V0ID0gZ2V0RXZlbnRUYXJnZXQoZSk7CiAgICAgICAgICBpZiAofmV2ZW50VGFyZ2V0LmNsYXNzTmFtZS5pbmRleE9mKCJhcnJvdyIpKQogICAgICAgICAgICAgIGluY3JlbWVudE51bUlucHV0KGUsIGV2ZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygiYXJyb3dVcCIpID8gMSA6IC0xKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBpbmNyZW1lbnROdW1JbnB1dChlLCBkZWx0YSwgaW5wdXRFbGVtKSB7CiAgICAgICAgICB2YXIgdGFyZ2V0ID0gZSAmJiBnZXRFdmVudFRhcmdldChlKTsKICAgICAgICAgIHZhciBpbnB1dCA9IGlucHV0RWxlbSB8fAogICAgICAgICAgICAgICh0YXJnZXQgJiYgdGFyZ2V0LnBhcmVudE5vZGUgJiYgdGFyZ2V0LnBhcmVudE5vZGUuZmlyc3RDaGlsZCk7CiAgICAgICAgICB2YXIgZXZlbnQgPSBjcmVhdGVFdmVudCgiaW5jcmVtZW50Iik7CiAgICAgICAgICBldmVudC5kZWx0YSA9IGRlbHRhOwogICAgICAgICAgaW5wdXQgJiYgaW5wdXQuZGlzcGF0Y2hFdmVudChldmVudCk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gYnVpbGQoKSB7CiAgICAgICAgICB2YXIgZnJhZ21lbnQgPSB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpOwogICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoImRpdiIsICJmbGF0cGlja3ItY2FsZW5kYXIiKTsKICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIudGFiSW5kZXggPSAtMTsKICAgICAgICAgIGlmICghc2VsZi5jb25maWcubm9DYWxlbmRhcikgewogICAgICAgICAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKGJ1aWxkTW9udGhOYXYoKSk7CiAgICAgICAgICAgICAgc2VsZi5pbm5lckNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoImRpdiIsICJmbGF0cGlja3ItaW5uZXJDb250YWluZXIiKTsKICAgICAgICAgICAgICBpZiAoc2VsZi5jb25maWcud2Vla051bWJlcnMpIHsKICAgICAgICAgICAgICAgICAgdmFyIF9hID0gYnVpbGRXZWVrcygpLCB3ZWVrV3JhcHBlciA9IF9hLndlZWtXcmFwcGVyLCB3ZWVrTnVtYmVycyA9IF9hLndlZWtOdW1iZXJzOwogICAgICAgICAgICAgICAgICBzZWxmLmlubmVyQ29udGFpbmVyLmFwcGVuZENoaWxkKHdlZWtXcmFwcGVyKTsKICAgICAgICAgICAgICAgICAgc2VsZi53ZWVrTnVtYmVycyA9IHdlZWtOdW1iZXJzOwogICAgICAgICAgICAgICAgICBzZWxmLndlZWtXcmFwcGVyID0gd2Vla1dyYXBwZXI7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHNlbGYuckNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoImRpdiIsICJmbGF0cGlja3ItckNvbnRhaW5lciIpOwogICAgICAgICAgICAgIHNlbGYuckNvbnRhaW5lci5hcHBlbmRDaGlsZChidWlsZFdlZWtkYXlzKCkpOwogICAgICAgICAgICAgIGlmICghc2VsZi5kYXlzQ29udGFpbmVyKSB7CiAgICAgICAgICAgICAgICAgIHNlbGYuZGF5c0NvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoImRpdiIsICJmbGF0cGlja3ItZGF5cyIpOwogICAgICAgICAgICAgICAgICBzZWxmLmRheXNDb250YWluZXIudGFiSW5kZXggPSAtMTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgYnVpbGREYXlzKCk7CiAgICAgICAgICAgICAgc2VsZi5yQ29udGFpbmVyLmFwcGVuZENoaWxkKHNlbGYuZGF5c0NvbnRhaW5lcik7CiAgICAgICAgICAgICAgc2VsZi5pbm5lckNvbnRhaW5lci5hcHBlbmRDaGlsZChzZWxmLnJDb250YWluZXIpOwogICAgICAgICAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKHNlbGYuaW5uZXJDb250YWluZXIpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHNlbGYuY29uZmlnLmVuYWJsZVRpbWUpIHsKICAgICAgICAgICAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChidWlsZFRpbWUoKSk7CiAgICAgICAgICB9CiAgICAgICAgICB0b2dnbGVDbGFzcyhzZWxmLmNhbGVuZGFyQ29udGFpbmVyLCAicmFuZ2VNb2RlIiwgc2VsZi5jb25maWcubW9kZSA9PT0gInJhbmdlIik7CiAgICAgICAgICB0b2dnbGVDbGFzcyhzZWxmLmNhbGVuZGFyQ29udGFpbmVyLCAiYW5pbWF0ZSIsIHNlbGYuY29uZmlnLmFuaW1hdGUgPT09IHRydWUpOwogICAgICAgICAgdG9nZ2xlQ2xhc3Moc2VsZi5jYWxlbmRhckNvbnRhaW5lciwgIm11bHRpTW9udGgiLCBzZWxmLmNvbmZpZy5zaG93TW9udGhzID4gMSk7CiAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLmFwcGVuZENoaWxkKGZyYWdtZW50KTsKICAgICAgICAgIHZhciBjdXN0b21BcHBlbmQgPSBzZWxmLmNvbmZpZy5hcHBlbmRUbyAhPT0gdW5kZWZpbmVkICYmCiAgICAgICAgICAgICAgc2VsZi5jb25maWcuYXBwZW5kVG8ubm9kZVR5cGUgIT09IHVuZGVmaW5lZDsKICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5pbmxpbmUgfHwgc2VsZi5jb25maWcuc3RhdGljKSB7CiAgICAgICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKHNlbGYuY29uZmlnLmlubGluZSA/ICJpbmxpbmUiIDogInN0YXRpYyIpOwogICAgICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5pbmxpbmUpIHsKICAgICAgICAgICAgICAgICAgaWYgKCFjdXN0b21BcHBlbmQgJiYgc2VsZi5lbGVtZW50LnBhcmVudE5vZGUpCiAgICAgICAgICAgICAgICAgICAgICBzZWxmLmVsZW1lbnQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoc2VsZi5jYWxlbmRhckNvbnRhaW5lciwgc2VsZi5faW5wdXQubmV4dFNpYmxpbmcpOwogICAgICAgICAgICAgICAgICBlbHNlIGlmIChzZWxmLmNvbmZpZy5hcHBlbmRUbyAhPT0gdW5kZWZpbmVkKQogICAgICAgICAgICAgICAgICAgICAgc2VsZi5jb25maWcuYXBwZW5kVG8uYXBwZW5kQ2hpbGQoc2VsZi5jYWxlbmRhckNvbnRhaW5lcik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5zdGF0aWMpIHsKICAgICAgICAgICAgICAgICAgdmFyIHdyYXBwZXIgPSBjcmVhdGVFbGVtZW50KCJkaXYiLCAiZmxhdHBpY2tyLXdyYXBwZXIiKTsKICAgICAgICAgICAgICAgICAgaWYgKHNlbGYuZWxlbWVudC5wYXJlbnROb2RlKQogICAgICAgICAgICAgICAgICAgICAgc2VsZi5lbGVtZW50LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHdyYXBwZXIsIHNlbGYuZWxlbWVudCk7CiAgICAgICAgICAgICAgICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQoc2VsZi5lbGVtZW50KTsKICAgICAgICAgICAgICAgICAgaWYgKHNlbGYuYWx0SW5wdXQpCiAgICAgICAgICAgICAgICAgICAgICB3cmFwcGVyLmFwcGVuZENoaWxkKHNlbGYuYWx0SW5wdXQpOwogICAgICAgICAgICAgICAgICB3cmFwcGVyLmFwcGVuZENoaWxkKHNlbGYuY2FsZW5kYXJDb250YWluZXIpOwogICAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGlmICghc2VsZi5jb25maWcuc3RhdGljICYmICFzZWxmLmNvbmZpZy5pbmxpbmUpCiAgICAgICAgICAgICAgKHNlbGYuY29uZmlnLmFwcGVuZFRvICE9PSB1bmRlZmluZWQKICAgICAgICAgICAgICAgICAgPyBzZWxmLmNvbmZpZy5hcHBlbmRUbwogICAgICAgICAgICAgICAgICA6IHdpbmRvdy5kb2N1bWVudC5ib2R5KS5hcHBlbmRDaGlsZChzZWxmLmNhbGVuZGFyQ29udGFpbmVyKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBjcmVhdGVEYXkoY2xhc3NOYW1lLCBkYXRlLCBfZGF5TnVtYmVyLCBpKSB7CiAgICAgICAgICB2YXIgZGF0ZUlzRW5hYmxlZCA9IGlzRW5hYmxlZChkYXRlLCB0cnVlKSwgZGF5RWxlbWVudCA9IGNyZWF0ZUVsZW1lbnQoInNwYW4iLCBjbGFzc05hbWUsIGRhdGUuZ2V0RGF0ZSgpLnRvU3RyaW5nKCkpOwogICAgICAgICAgZGF5RWxlbWVudC5kYXRlT2JqID0gZGF0ZTsKICAgICAgICAgIGRheUVsZW1lbnQuJGkgPSBpOwogICAgICAgICAgZGF5RWxlbWVudC5zZXRBdHRyaWJ1dGUoImFyaWEtbGFiZWwiLCBzZWxmLmZvcm1hdERhdGUoZGF0ZSwgc2VsZi5jb25maWcuYXJpYURhdGVGb3JtYXQpKTsKICAgICAgICAgIGlmIChjbGFzc05hbWUuaW5kZXhPZigiaGlkZGVuIikgPT09IC0xICYmCiAgICAgICAgICAgICAgY29tcGFyZURhdGVzKGRhdGUsIHNlbGYubm93KSA9PT0gMCkgewogICAgICAgICAgICAgIHNlbGYudG9kYXlEYXRlRWxlbSA9IGRheUVsZW1lbnQ7CiAgICAgICAgICAgICAgZGF5RWxlbWVudC5jbGFzc0xpc3QuYWRkKCJ0b2RheSIpOwogICAgICAgICAgICAgIGRheUVsZW1lbnQuc2V0QXR0cmlidXRlKCJhcmlhLWN1cnJlbnQiLCAiZGF0ZSIpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGRhdGVJc0VuYWJsZWQpIHsKICAgICAgICAgICAgICBkYXlFbGVtZW50LnRhYkluZGV4ID0gLTE7CiAgICAgICAgICAgICAgaWYgKGlzRGF0ZVNlbGVjdGVkKGRhdGUpKSB7CiAgICAgICAgICAgICAgICAgIGRheUVsZW1lbnQuY2xhc3NMaXN0LmFkZCgic2VsZWN0ZWQiKTsKICAgICAgICAgICAgICAgICAgc2VsZi5zZWxlY3RlZERhdGVFbGVtID0gZGF5RWxlbWVudDsKICAgICAgICAgICAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1vZGUgPT09ICJyYW5nZSIpIHsKICAgICAgICAgICAgICAgICAgICAgIHRvZ2dsZUNsYXNzKGRheUVsZW1lbnQsICJzdGFydFJhbmdlIiwgc2VsZi5zZWxlY3RlZERhdGVzWzBdICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGFyZURhdGVzKGRhdGUsIHNlbGYuc2VsZWN0ZWREYXRlc1swXSwgdHJ1ZSkgPT09IDApOwogICAgICAgICAgICAgICAgICAgICAgdG9nZ2xlQ2xhc3MoZGF5RWxlbWVudCwgImVuZFJhbmdlIiwgc2VsZi5zZWxlY3RlZERhdGVzWzFdICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGFyZURhdGVzKGRhdGUsIHNlbGYuc2VsZWN0ZWREYXRlc1sxXSwgdHJ1ZSkgPT09IDApOwogICAgICAgICAgICAgICAgICAgICAgaWYgKGNsYXNzTmFtZSA9PT0gIm5leHRNb250aERheSIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgZGF5RWxlbWVudC5jbGFzc0xpc3QuYWRkKCJpblJhbmdlIik7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICBkYXlFbGVtZW50LmNsYXNzTGlzdC5hZGQoImZsYXRwaWNrci1kaXNhYmxlZCIpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1vZGUgPT09ICJyYW5nZSIpIHsKICAgICAgICAgICAgICBpZiAoaXNEYXRlSW5SYW5nZShkYXRlKSAmJiAhaXNEYXRlU2VsZWN0ZWQoZGF0ZSkpCiAgICAgICAgICAgICAgICAgIGRheUVsZW1lbnQuY2xhc3NMaXN0LmFkZCgiaW5SYW5nZSIpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHNlbGYud2Vla051bWJlcnMgJiYKICAgICAgICAgICAgICBzZWxmLmNvbmZpZy5zaG93TW9udGhzID09PSAxICYmCiAgICAgICAgICAgICAgY2xhc3NOYW1lICE9PSAicHJldk1vbnRoRGF5IiAmJgogICAgICAgICAgICAgIGkgJSA3ID09PSA2KSB7CiAgICAgICAgICAgICAgc2VsZi53ZWVrTnVtYmVycy5pbnNlcnRBZGphY2VudEhUTUwoImJlZm9yZWVuZCIsICI8c3BhbiBjbGFzcz0nZmxhdHBpY2tyLWRheSc+IiArIHNlbGYuY29uZmlnLmdldFdlZWsoZGF0ZSkgKyAiPC9zcGFuPiIpOwogICAgICAgICAgfQogICAgICAgICAgdHJpZ2dlckV2ZW50KCJvbkRheUNyZWF0ZSIsIGRheUVsZW1lbnQpOwogICAgICAgICAgcmV0dXJuIGRheUVsZW1lbnQ7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZm9jdXNPbkRheUVsZW0odGFyZ2V0Tm9kZSkgewogICAgICAgICAgdGFyZ2V0Tm9kZS5mb2N1cygpOwogICAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1vZGUgPT09ICJyYW5nZSIpCiAgICAgICAgICAgICAgb25Nb3VzZU92ZXIodGFyZ2V0Tm9kZSk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZ2V0Rmlyc3RBdmFpbGFibGVEYXkoZGVsdGEpIHsKICAgICAgICAgIHZhciBzdGFydE1vbnRoID0gZGVsdGEgPiAwID8gMCA6IHNlbGYuY29uZmlnLnNob3dNb250aHMgLSAxOwogICAgICAgICAgdmFyIGVuZE1vbnRoID0gZGVsdGEgPiAwID8gc2VsZi5jb25maWcuc2hvd01vbnRocyA6IC0xOwogICAgICAgICAgZm9yICh2YXIgbSA9IHN0YXJ0TW9udGg7IG0gIT0gZW5kTW9udGg7IG0gKz0gZGVsdGEpIHsKICAgICAgICAgICAgICB2YXIgbW9udGggPSBzZWxmLmRheXNDb250YWluZXIuY2hpbGRyZW5bbV07CiAgICAgICAgICAgICAgdmFyIHN0YXJ0SW5kZXggPSBkZWx0YSA+IDAgPyAwIDogbW9udGguY2hpbGRyZW4ubGVuZ3RoIC0gMTsKICAgICAgICAgICAgICB2YXIgZW5kSW5kZXggPSBkZWx0YSA+IDAgPyBtb250aC5jaGlsZHJlbi5sZW5ndGggOiAtMTsKICAgICAgICAgICAgICBmb3IgKHZhciBpID0gc3RhcnRJbmRleDsgaSAhPSBlbmRJbmRleDsgaSArPSBkZWx0YSkgewogICAgICAgICAgICAgICAgICB2YXIgYyA9IG1vbnRoLmNoaWxkcmVuW2ldOwogICAgICAgICAgICAgICAgICBpZiAoYy5jbGFzc05hbWUuaW5kZXhPZigiaGlkZGVuIikgPT09IC0xICYmIGlzRW5hYmxlZChjLmRhdGVPYmopKQogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGM7CiAgICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDsKICAgICAgfQogICAgICBmdW5jdGlvbiBnZXROZXh0QXZhaWxhYmxlRGF5KGN1cnJlbnQsIGRlbHRhKSB7CiAgICAgICAgICB2YXIgZ2l2ZW5Nb250aCA9IGN1cnJlbnQuY2xhc3NOYW1lLmluZGV4T2YoIk1vbnRoIikgPT09IC0xCiAgICAgICAgICAgICAgPyBjdXJyZW50LmRhdGVPYmouZ2V0TW9udGgoKQogICAgICAgICAgICAgIDogc2VsZi5jdXJyZW50TW9udGg7CiAgICAgICAgICB2YXIgZW5kTW9udGggPSBkZWx0YSA+IDAgPyBzZWxmLmNvbmZpZy5zaG93TW9udGhzIDogLTE7CiAgICAgICAgICB2YXIgbG9vcERlbHRhID0gZGVsdGEgPiAwID8gMSA6IC0xOwogICAgICAgICAgZm9yICh2YXIgbSA9IGdpdmVuTW9udGggLSBzZWxmLmN1cnJlbnRNb250aDsgbSAhPSBlbmRNb250aDsgbSArPSBsb29wRGVsdGEpIHsKICAgICAgICAgICAgICB2YXIgbW9udGggPSBzZWxmLmRheXNDb250YWluZXIuY2hpbGRyZW5bbV07CiAgICAgICAgICAgICAgdmFyIHN0YXJ0SW5kZXggPSBnaXZlbk1vbnRoIC0gc2VsZi5jdXJyZW50TW9udGggPT09IG0KICAgICAgICAgICAgICAgICAgPyBjdXJyZW50LiRpICsgZGVsdGEKICAgICAgICAgICAgICAgICAgOiBkZWx0YSA8IDAKICAgICAgICAgICAgICAgICAgICAgID8gbW9udGguY2hpbGRyZW4ubGVuZ3RoIC0gMQogICAgICAgICAgICAgICAgICAgICAgOiAwOwogICAgICAgICAgICAgIHZhciBudW1Nb250aERheXMgPSBtb250aC5jaGlsZHJlbi5sZW5ndGg7CiAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IHN0YXJ0SW5kZXg7IGkgPj0gMCAmJiBpIDwgbnVtTW9udGhEYXlzICYmIGkgIT0gKGRlbHRhID4gMCA/IG51bU1vbnRoRGF5cyA6IC0xKTsgaSArPSBsb29wRGVsdGEpIHsKICAgICAgICAgICAgICAgICAgdmFyIGMgPSBtb250aC5jaGlsZHJlbltpXTsKICAgICAgICAgICAgICAgICAgaWYgKGMuY2xhc3NOYW1lLmluZGV4T2YoImhpZGRlbiIpID09PSAtMSAmJgogICAgICAgICAgICAgICAgICAgICAgaXNFbmFibGVkKGMuZGF0ZU9iaikgJiYKICAgICAgICAgICAgICAgICAgICAgIE1hdGguYWJzKGN1cnJlbnQuJGkgLSBpKSA+PSBNYXRoLmFicyhkZWx0YSkpCiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZm9jdXNPbkRheUVsZW0oYyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgc2VsZi5jaGFuZ2VNb250aChsb29wRGVsdGEpOwogICAgICAgICAgZm9jdXNPbkRheShnZXRGaXJzdEF2YWlsYWJsZURheShsb29wRGVsdGEpLCAwKTsKICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZm9jdXNPbkRheShjdXJyZW50LCBvZmZzZXQpIHsKICAgICAgICAgIHZhciBhY3RpdmVFbGVtZW50ID0gZ2V0Q2xvc2VzdEFjdGl2ZUVsZW1lbnQoKTsKICAgICAgICAgIHZhciBkYXlGb2N1c2VkID0gaXNJblZpZXcoYWN0aXZlRWxlbWVudCB8fCBkb2N1bWVudC5ib2R5KTsKICAgICAgICAgIHZhciBzdGFydEVsZW0gPSBjdXJyZW50ICE9PSB1bmRlZmluZWQKICAgICAgICAgICAgICA/IGN1cnJlbnQKICAgICAgICAgICAgICA6IGRheUZvY3VzZWQKICAgICAgICAgICAgICAgICAgPyBhY3RpdmVFbGVtZW50CiAgICAgICAgICAgICAgICAgIDogc2VsZi5zZWxlY3RlZERhdGVFbGVtICE9PSB1bmRlZmluZWQgJiYgaXNJblZpZXcoc2VsZi5zZWxlY3RlZERhdGVFbGVtKQogICAgICAgICAgICAgICAgICAgICAgPyBzZWxmLnNlbGVjdGVkRGF0ZUVsZW0KICAgICAgICAgICAgICAgICAgICAgIDogc2VsZi50b2RheURhdGVFbGVtICE9PSB1bmRlZmluZWQgJiYgaXNJblZpZXcoc2VsZi50b2RheURhdGVFbGVtKQogICAgICAgICAgICAgICAgICAgICAgICAgID8gc2VsZi50b2RheURhdGVFbGVtCiAgICAgICAgICAgICAgICAgICAgICAgICAgOiBnZXRGaXJzdEF2YWlsYWJsZURheShvZmZzZXQgPiAwID8gMSA6IC0xKTsKICAgICAgICAgIGlmIChzdGFydEVsZW0gPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgIHNlbGYuX2lucHV0LmZvY3VzKCk7CiAgICAgICAgICB9CiAgICAgICAgICBlbHNlIGlmICghZGF5Rm9jdXNlZCkgewogICAgICAgICAgICAgIGZvY3VzT25EYXlFbGVtKHN0YXJ0RWxlbSk7CiAgICAgICAgICB9CiAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICBnZXROZXh0QXZhaWxhYmxlRGF5KHN0YXJ0RWxlbSwgb2Zmc2V0KTsKICAgICAgICAgIH0KICAgICAgfQogICAgICBmdW5jdGlvbiBidWlsZE1vbnRoRGF5cyh5ZWFyLCBtb250aCkgewogICAgICAgICAgdmFyIGZpcnN0T2ZNb250aCA9IChuZXcgRGF0ZSh5ZWFyLCBtb250aCwgMSkuZ2V0RGF5KCkgLSBzZWxmLmwxMG4uZmlyc3REYXlPZldlZWsgKyA3KSAlIDc7CiAgICAgICAgICB2YXIgcHJldk1vbnRoRGF5cyA9IHNlbGYudXRpbHMuZ2V0RGF5c0luTW9udGgoKG1vbnRoIC0gMSArIDEyKSAlIDEyLCB5ZWFyKTsKICAgICAgICAgIHZhciBkYXlzSW5Nb250aCA9IHNlbGYudXRpbHMuZ2V0RGF5c0luTW9udGgobW9udGgsIHllYXIpLCBkYXlzID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSwgaXNNdWx0aU1vbnRoID0gc2VsZi5jb25maWcuc2hvd01vbnRocyA+IDEsIHByZXZNb250aERheUNsYXNzID0gaXNNdWx0aU1vbnRoID8gInByZXZNb250aERheSBoaWRkZW4iIDogInByZXZNb250aERheSIsIG5leHRNb250aERheUNsYXNzID0gaXNNdWx0aU1vbnRoID8gIm5leHRNb250aERheSBoaWRkZW4iIDogIm5leHRNb250aERheSI7CiAgICAgICAgICB2YXIgZGF5TnVtYmVyID0gcHJldk1vbnRoRGF5cyArIDEgLSBmaXJzdE9mTW9udGgsIGRheUluZGV4ID0gMDsKICAgICAgICAgIGZvciAoOyBkYXlOdW1iZXIgPD0gcHJldk1vbnRoRGF5czsgZGF5TnVtYmVyKyssIGRheUluZGV4KyspIHsKICAgICAgICAgICAgICBkYXlzLmFwcGVuZENoaWxkKGNyZWF0ZURheSgiZmxhdHBpY2tyLWRheSAiICsgcHJldk1vbnRoRGF5Q2xhc3MsIG5ldyBEYXRlKHllYXIsIG1vbnRoIC0gMSwgZGF5TnVtYmVyKSwgZGF5TnVtYmVyLCBkYXlJbmRleCkpOwogICAgICAgICAgfQogICAgICAgICAgZm9yIChkYXlOdW1iZXIgPSAxOyBkYXlOdW1iZXIgPD0gZGF5c0luTW9udGg7IGRheU51bWJlcisrLCBkYXlJbmRleCsrKSB7CiAgICAgICAgICAgICAgZGF5cy5hcHBlbmRDaGlsZChjcmVhdGVEYXkoImZsYXRwaWNrci1kYXkiLCBuZXcgRGF0ZSh5ZWFyLCBtb250aCwgZGF5TnVtYmVyKSwgZGF5TnVtYmVyLCBkYXlJbmRleCkpOwogICAgICAgICAgfQogICAgICAgICAgZm9yICh2YXIgZGF5TnVtID0gZGF5c0luTW9udGggKyAxOyBkYXlOdW0gPD0gNDIgLSBmaXJzdE9mTW9udGggJiYKICAgICAgICAgICAgICAoc2VsZi5jb25maWcuc2hvd01vbnRocyA9PT0gMSB8fCBkYXlJbmRleCAlIDcgIT09IDApOyBkYXlOdW0rKywgZGF5SW5kZXgrKykgewogICAgICAgICAgICAgIGRheXMuYXBwZW5kQ2hpbGQoY3JlYXRlRGF5KCJmbGF0cGlja3ItZGF5ICIgKyBuZXh0TW9udGhEYXlDbGFzcywgbmV3IERhdGUoeWVhciwgbW9udGggKyAxLCBkYXlOdW0gJSBkYXlzSW5Nb250aCksIGRheU51bSwgZGF5SW5kZXgpKTsKICAgICAgICAgIH0KICAgICAgICAgIHZhciBkYXlDb250YWluZXIgPSBjcmVhdGVFbGVtZW50KCJkaXYiLCAiZGF5Q29udGFpbmVyIik7CiAgICAgICAgICBkYXlDb250YWluZXIuYXBwZW5kQ2hpbGQoZGF5cyk7CiAgICAgICAgICByZXR1cm4gZGF5Q29udGFpbmVyOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGJ1aWxkRGF5cygpIHsKICAgICAgICAgIGlmIChzZWxmLmRheXNDb250YWluZXIgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICAgIGNsZWFyTm9kZShzZWxmLmRheXNDb250YWluZXIpOwogICAgICAgICAgaWYgKHNlbGYud2Vla051bWJlcnMpCiAgICAgICAgICAgICAgY2xlYXJOb2RlKHNlbGYud2Vla051bWJlcnMpOwogICAgICAgICAgdmFyIGZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7CiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlbGYuY29uZmlnLnNob3dNb250aHM7IGkrKykgewogICAgICAgICAgICAgIHZhciBkID0gbmV3IERhdGUoc2VsZi5jdXJyZW50WWVhciwgc2VsZi5jdXJyZW50TW9udGgsIDEpOwogICAgICAgICAgICAgIGQuc2V0TW9udGgoc2VsZi5jdXJyZW50TW9udGggKyBpKTsKICAgICAgICAgICAgICBmcmFnLmFwcGVuZENoaWxkKGJ1aWxkTW9udGhEYXlzKGQuZ2V0RnVsbFllYXIoKSwgZC5nZXRNb250aCgpKSk7CiAgICAgICAgICB9CiAgICAgICAgICBzZWxmLmRheXNDb250YWluZXIuYXBwZW5kQ2hpbGQoZnJhZyk7CiAgICAgICAgICBzZWxmLmRheXMgPSBzZWxmLmRheXNDb250YWluZXIuZmlyc3RDaGlsZDsKICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5tb2RlID09PSAicmFuZ2UiICYmIHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggPT09IDEpIHsKICAgICAgICAgICAgICBvbk1vdXNlT3ZlcigpOwogICAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIGJ1aWxkTW9udGhTd2l0Y2goKSB7CiAgICAgICAgICBpZiAoc2VsZi5jb25maWcuc2hvd01vbnRocyA+IDEgfHwKICAgICAgICAgICAgICBzZWxmLmNvbmZpZy5tb250aFNlbGVjdG9yVHlwZSAhPT0gImRyb3Bkb3duIikKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB2YXIgc2hvdWxkQnVpbGRNb250aCA9IGZ1bmN0aW9uIChtb250aCkgewogICAgICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5taW5EYXRlICE9PSB1bmRlZmluZWQgJiYKICAgICAgICAgICAgICAgICAgc2VsZi5jdXJyZW50WWVhciA9PT0gc2VsZi5jb25maWcubWluRGF0ZS5nZXRGdWxsWWVhcigpICYmCiAgICAgICAgICAgICAgICAgIG1vbnRoIDwgc2VsZi5jb25maWcubWluRGF0ZS5nZXRNb250aCgpKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcmV0dXJuICEoc2VsZi5jb25maWcubWF4RGF0ZSAhPT0gdW5kZWZpbmVkICYmCiAgICAgICAgICAgICAgICAgIHNlbGYuY3VycmVudFllYXIgPT09IHNlbGYuY29uZmlnLm1heERhdGUuZ2V0RnVsbFllYXIoKSAmJgogICAgICAgICAgICAgICAgICBtb250aCA+IHNlbGYuY29uZmlnLm1heERhdGUuZ2V0TW9udGgoKSk7CiAgICAgICAgICB9OwogICAgICAgICAgc2VsZi5tb250aHNEcm9wZG93bkNvbnRhaW5lci50YWJJbmRleCA9IC0xOwogICAgICAgICAgc2VsZi5tb250aHNEcm9wZG93bkNvbnRhaW5lci5pbm5lckhUTUwgPSAiIjsKICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMTI7IGkrKykgewogICAgICAgICAgICAgIGlmICghc2hvdWxkQnVpbGRNb250aChpKSkKICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgdmFyIG1vbnRoID0gY3JlYXRlRWxlbWVudCgib3B0aW9uIiwgImZsYXRwaWNrci1tb250aERyb3Bkb3duLW1vbnRoIik7CiAgICAgICAgICAgICAgbW9udGgudmFsdWUgPSBuZXcgRGF0ZShzZWxmLmN1cnJlbnRZZWFyLCBpKS5nZXRNb250aCgpLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgbW9udGgudGV4dENvbnRlbnQgPSBtb250aFRvU3RyKGksIHNlbGYuY29uZmlnLnNob3J0aGFuZEN1cnJlbnRNb250aCwgc2VsZi5sMTBuKTsKICAgICAgICAgICAgICBtb250aC50YWJJbmRleCA9IC0xOwogICAgICAgICAgICAgIGlmIChzZWxmLmN1cnJlbnRNb250aCA9PT0gaSkgewogICAgICAgICAgICAgICAgICBtb250aC5zZWxlY3RlZCA9IHRydWU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHNlbGYubW9udGhzRHJvcGRvd25Db250YWluZXIuYXBwZW5kQ2hpbGQobW9udGgpOwogICAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIGJ1aWxkTW9udGgoKSB7CiAgICAgICAgICB2YXIgY29udGFpbmVyID0gY3JlYXRlRWxlbWVudCgiZGl2IiwgImZsYXRwaWNrci1tb250aCIpOwogICAgICAgICAgdmFyIG1vbnRoTmF2RnJhZ21lbnQgPSB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpOwogICAgICAgICAgdmFyIG1vbnRoRWxlbWVudDsKICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5zaG93TW9udGhzID4gMSB8fAogICAgICAgICAgICAgIHNlbGYuY29uZmlnLm1vbnRoU2VsZWN0b3JUeXBlID09PSAic3RhdGljIikgewogICAgICAgICAgICAgIG1vbnRoRWxlbWVudCA9IGNyZWF0ZUVsZW1lbnQoInNwYW4iLCAiY3VyLW1vbnRoIik7CiAgICAgICAgICB9CiAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICBzZWxmLm1vbnRoc0Ryb3Bkb3duQ29udGFpbmVyID0gY3JlYXRlRWxlbWVudCgic2VsZWN0IiwgImZsYXRwaWNrci1tb250aERyb3Bkb3duLW1vbnRocyIpOwogICAgICAgICAgICAgIHNlbGYubW9udGhzRHJvcGRvd25Db250YWluZXIuc2V0QXR0cmlidXRlKCJhcmlhLWxhYmVsIiwgc2VsZi5sMTBuLm1vbnRoQXJpYUxhYmVsKTsKICAgICAgICAgICAgICBiaW5kKHNlbGYubW9udGhzRHJvcGRvd25Db250YWluZXIsICJjaGFuZ2UiLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZ2V0RXZlbnRUYXJnZXQoZSk7CiAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZE1vbnRoID0gcGFyc2VJbnQodGFyZ2V0LnZhbHVlLCAxMCk7CiAgICAgICAgICAgICAgICAgIHNlbGYuY2hhbmdlTW9udGgoc2VsZWN0ZWRNb250aCAtIHNlbGYuY3VycmVudE1vbnRoKTsKICAgICAgICAgICAgICAgICAgdHJpZ2dlckV2ZW50KCJvbk1vbnRoQ2hhbmdlIik7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgYnVpbGRNb250aFN3aXRjaCgpOwogICAgICAgICAgICAgIG1vbnRoRWxlbWVudCA9IHNlbGYubW9udGhzRHJvcGRvd25Db250YWluZXI7CiAgICAgICAgICB9CiAgICAgICAgICB2YXIgeWVhcklucHV0ID0gY3JlYXRlTnVtYmVySW5wdXQoImN1ci15ZWFyIiwgeyB0YWJpbmRleDogIi0xIiB9KTsKICAgICAgICAgIHZhciB5ZWFyRWxlbWVudCA9IHllYXJJbnB1dC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaW5wdXQiKVswXTsKICAgICAgICAgIHllYXJFbGVtZW50LnNldEF0dHJpYnV0ZSgiYXJpYS1sYWJlbCIsIHNlbGYubDEwbi55ZWFyQXJpYUxhYmVsKTsKICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5taW5EYXRlKSB7CiAgICAgICAgICAgICAgeWVhckVsZW1lbnQuc2V0QXR0cmlidXRlKCJtaW4iLCBzZWxmLmNvbmZpZy5taW5EYXRlLmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKSk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoc2VsZi5jb25maWcubWF4RGF0ZSkgewogICAgICAgICAgICAgIHllYXJFbGVtZW50LnNldEF0dHJpYnV0ZSgibWF4Iiwgc2VsZi5jb25maWcubWF4RGF0ZS5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCkpOwogICAgICAgICAgICAgIHllYXJFbGVtZW50LmRpc2FibGVkID0KICAgICAgICAgICAgICAgICAgISFzZWxmLmNvbmZpZy5taW5EYXRlICYmCiAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNvbmZpZy5taW5EYXRlLmdldEZ1bGxZZWFyKCkgPT09IHNlbGYuY29uZmlnLm1heERhdGUuZ2V0RnVsbFllYXIoKTsKICAgICAgICAgIH0KICAgICAgICAgIHZhciBjdXJyZW50TW9udGggPSBjcmVhdGVFbGVtZW50KCJkaXYiLCAiZmxhdHBpY2tyLWN1cnJlbnQtbW9udGgiKTsKICAgICAgICAgIGN1cnJlbnRNb250aC5hcHBlbmRDaGlsZChtb250aEVsZW1lbnQpOwogICAgICAgICAgY3VycmVudE1vbnRoLmFwcGVuZENoaWxkKHllYXJJbnB1dCk7CiAgICAgICAgICBtb250aE5hdkZyYWdtZW50LmFwcGVuZENoaWxkKGN1cnJlbnRNb250aCk7CiAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQobW9udGhOYXZGcmFnbWVudCk7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgIGNvbnRhaW5lcjogY29udGFpbmVyLAogICAgICAgICAgICAgIHllYXJFbGVtZW50OiB5ZWFyRWxlbWVudCwKICAgICAgICAgICAgICBtb250aEVsZW1lbnQ6IG1vbnRoRWxlbWVudCwKICAgICAgICAgIH07CiAgICAgIH0KICAgICAgZnVuY3Rpb24gYnVpbGRNb250aHMoKSB7CiAgICAgICAgICBjbGVhck5vZGUoc2VsZi5tb250aE5hdik7CiAgICAgICAgICBzZWxmLm1vbnRoTmF2LmFwcGVuZENoaWxkKHNlbGYucHJldk1vbnRoTmF2KTsKICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5zaG93TW9udGhzKSB7CiAgICAgICAgICAgICAgc2VsZi55ZWFyRWxlbWVudHMgPSBbXTsKICAgICAgICAgICAgICBzZWxmLm1vbnRoRWxlbWVudHMgPSBbXTsKICAgICAgICAgIH0KICAgICAgICAgIGZvciAodmFyIG0gPSBzZWxmLmNvbmZpZy5zaG93TW9udGhzOyBtLS07KSB7CiAgICAgICAgICAgICAgdmFyIG1vbnRoID0gYnVpbGRNb250aCgpOwogICAgICAgICAgICAgIHNlbGYueWVhckVsZW1lbnRzLnB1c2gobW9udGgueWVhckVsZW1lbnQpOwogICAgICAgICAgICAgIHNlbGYubW9udGhFbGVtZW50cy5wdXNoKG1vbnRoLm1vbnRoRWxlbWVudCk7CiAgICAgICAgICAgICAgc2VsZi5tb250aE5hdi5hcHBlbmRDaGlsZChtb250aC5jb250YWluZXIpOwogICAgICAgICAgfQogICAgICAgICAgc2VsZi5tb250aE5hdi5hcHBlbmRDaGlsZChzZWxmLm5leHRNb250aE5hdik7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gYnVpbGRNb250aE5hdigpIHsKICAgICAgICAgIHNlbGYubW9udGhOYXYgPSBjcmVhdGVFbGVtZW50KCJkaXYiLCAiZmxhdHBpY2tyLW1vbnRocyIpOwogICAgICAgICAgc2VsZi55ZWFyRWxlbWVudHMgPSBbXTsKICAgICAgICAgIHNlbGYubW9udGhFbGVtZW50cyA9IFtdOwogICAgICAgICAgc2VsZi5wcmV2TW9udGhOYXYgPSBjcmVhdGVFbGVtZW50KCJzcGFuIiwgImZsYXRwaWNrci1wcmV2LW1vbnRoIik7CiAgICAgICAgICBzZWxmLnByZXZNb250aE5hdi5pbm5lckhUTUwgPSBzZWxmLmNvbmZpZy5wcmV2QXJyb3c7CiAgICAgICAgICBzZWxmLm5leHRNb250aE5hdiA9IGNyZWF0ZUVsZW1lbnQoInNwYW4iLCAiZmxhdHBpY2tyLW5leHQtbW9udGgiKTsKICAgICAgICAgIHNlbGYubmV4dE1vbnRoTmF2LmlubmVySFRNTCA9IHNlbGYuY29uZmlnLm5leHRBcnJvdzsKICAgICAgICAgIGJ1aWxkTW9udGhzKCk7CiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2VsZiwgIl9oaWRlUHJldk1vbnRoQXJyb3ciLCB7CiAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBzZWxmLl9faGlkZVByZXZNb250aEFycm93OyB9LAogICAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKGJvb2wpIHsKICAgICAgICAgICAgICAgICAgaWYgKHNlbGYuX19oaWRlUHJldk1vbnRoQXJyb3cgIT09IGJvb2wpIHsKICAgICAgICAgICAgICAgICAgICAgIHRvZ2dsZUNsYXNzKHNlbGYucHJldk1vbnRoTmF2LCAiZmxhdHBpY2tyLWRpc2FibGVkIiwgYm9vbCk7CiAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9faGlkZVByZXZNb250aEFycm93ID0gYm9vbDsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0sCiAgICAgICAgICB9KTsKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzZWxmLCAiX2hpZGVOZXh0TW9udGhBcnJvdyIsIHsKICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNlbGYuX19oaWRlTmV4dE1vbnRoQXJyb3c7IH0sCiAgICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAoYm9vbCkgewogICAgICAgICAgICAgICAgICBpZiAoc2VsZi5fX2hpZGVOZXh0TW9udGhBcnJvdyAhPT0gYm9vbCkgewogICAgICAgICAgICAgICAgICAgICAgdG9nZ2xlQ2xhc3Moc2VsZi5uZXh0TW9udGhOYXYsICJmbGF0cGlja3ItZGlzYWJsZWQiLCBib29sKTsKICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX19oaWRlTmV4dE1vbnRoQXJyb3cgPSBib29sOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSwKICAgICAgICAgIH0pOwogICAgICAgICAgc2VsZi5jdXJyZW50WWVhckVsZW1lbnQgPSBzZWxmLnllYXJFbGVtZW50c1swXTsKICAgICAgICAgIHVwZGF0ZU5hdmlnYXRpb25DdXJyZW50TW9udGgoKTsKICAgICAgICAgIHJldHVybiBzZWxmLm1vbnRoTmF2OwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGJ1aWxkVGltZSgpIHsKICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuY2xhc3NMaXN0LmFkZCgiaGFzVGltZSIpOwogICAgICAgICAgaWYgKHNlbGYuY29uZmlnLm5vQ2FsZW5kYXIpCiAgICAgICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCJub0NhbGVuZGFyIik7CiAgICAgICAgICB2YXIgZGVmYXVsdHMgPSBnZXREZWZhdWx0SG91cnMoc2VsZi5jb25maWcpOwogICAgICAgICAgc2VsZi50aW1lQ29udGFpbmVyID0gY3JlYXRlRWxlbWVudCgiZGl2IiwgImZsYXRwaWNrci10aW1lIik7CiAgICAgICAgICBzZWxmLnRpbWVDb250YWluZXIudGFiSW5kZXggPSAtMTsKICAgICAgICAgIHZhciBzZXBhcmF0b3IgPSBjcmVhdGVFbGVtZW50KCJzcGFuIiwgImZsYXRwaWNrci10aW1lLXNlcGFyYXRvciIsICI6Iik7CiAgICAgICAgICB2YXIgaG91cklucHV0ID0gY3JlYXRlTnVtYmVySW5wdXQoImZsYXRwaWNrci1ob3VyIiwgewogICAgICAgICAgICAgICJhcmlhLWxhYmVsIjogc2VsZi5sMTBuLmhvdXJBcmlhTGFiZWwsCiAgICAgICAgICB9KTsKICAgICAgICAgIHNlbGYuaG91ckVsZW1lbnQgPSBob3VySW5wdXQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImlucHV0IilbMF07CiAgICAgICAgICB2YXIgbWludXRlSW5wdXQgPSBjcmVhdGVOdW1iZXJJbnB1dCgiZmxhdHBpY2tyLW1pbnV0ZSIsIHsKICAgICAgICAgICAgICAiYXJpYS1sYWJlbCI6IHNlbGYubDEwbi5taW51dGVBcmlhTGFiZWwsCiAgICAgICAgICB9KTsKICAgICAgICAgIHNlbGYubWludXRlRWxlbWVudCA9IG1pbnV0ZUlucHV0LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJpbnB1dCIpWzBdOwogICAgICAgICAgc2VsZi5ob3VyRWxlbWVudC50YWJJbmRleCA9IHNlbGYubWludXRlRWxlbWVudC50YWJJbmRleCA9IC0xOwogICAgICAgICAgc2VsZi5ob3VyRWxlbWVudC52YWx1ZSA9IHBhZChzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iagogICAgICAgICAgICAgID8gc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmouZ2V0SG91cnMoKQogICAgICAgICAgICAgIDogc2VsZi5jb25maWcudGltZV8yNGhyCiAgICAgICAgICAgICAgICAgID8gZGVmYXVsdHMuaG91cnMKICAgICAgICAgICAgICAgICAgOiBtaWxpdGFyeTJhbXBtKGRlZmF1bHRzLmhvdXJzKSk7CiAgICAgICAgICBzZWxmLm1pbnV0ZUVsZW1lbnQudmFsdWUgPSBwYWQoc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmoKICAgICAgICAgICAgICA/IHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqLmdldE1pbnV0ZXMoKQogICAgICAgICAgICAgIDogZGVmYXVsdHMubWludXRlcyk7CiAgICAgICAgICBzZWxmLmhvdXJFbGVtZW50LnNldEF0dHJpYnV0ZSgic3RlcCIsIHNlbGYuY29uZmlnLmhvdXJJbmNyZW1lbnQudG9TdHJpbmcoKSk7CiAgICAgICAgICBzZWxmLm1pbnV0ZUVsZW1lbnQuc2V0QXR0cmlidXRlKCJzdGVwIiwgc2VsZi5jb25maWcubWludXRlSW5jcmVtZW50LnRvU3RyaW5nKCkpOwogICAgICAgICAgc2VsZi5ob3VyRWxlbWVudC5zZXRBdHRyaWJ1dGUoIm1pbiIsIHNlbGYuY29uZmlnLnRpbWVfMjRociA/ICIwIiA6ICIxIik7CiAgICAgICAgICBzZWxmLmhvdXJFbGVtZW50LnNldEF0dHJpYnV0ZSgibWF4Iiwgc2VsZi5jb25maWcudGltZV8yNGhyID8gIjIzIiA6ICIxMiIpOwogICAgICAgICAgc2VsZi5ob3VyRWxlbWVudC5zZXRBdHRyaWJ1dGUoIm1heGxlbmd0aCIsICIyIik7CiAgICAgICAgICBzZWxmLm1pbnV0ZUVsZW1lbnQuc2V0QXR0cmlidXRlKCJtaW4iLCAiMCIpOwogICAgICAgICAgc2VsZi5taW51dGVFbGVtZW50LnNldEF0dHJpYnV0ZSgibWF4IiwgIjU5Iik7CiAgICAgICAgICBzZWxmLm1pbnV0ZUVsZW1lbnQuc2V0QXR0cmlidXRlKCJtYXhsZW5ndGgiLCAiMiIpOwogICAgICAgICAgc2VsZi50aW1lQ29udGFpbmVyLmFwcGVuZENoaWxkKGhvdXJJbnB1dCk7CiAgICAgICAgICBzZWxmLnRpbWVDb250YWluZXIuYXBwZW5kQ2hpbGQoc2VwYXJhdG9yKTsKICAgICAgICAgIHNlbGYudGltZUNvbnRhaW5lci5hcHBlbmRDaGlsZChtaW51dGVJbnB1dCk7CiAgICAgICAgICBpZiAoc2VsZi5jb25maWcudGltZV8yNGhyKQogICAgICAgICAgICAgIHNlbGYudGltZUNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCJ0aW1lMjRociIpOwogICAgICAgICAgaWYgKHNlbGYuY29uZmlnLmVuYWJsZVNlY29uZHMpIHsKICAgICAgICAgICAgICBzZWxmLnRpbWVDb250YWluZXIuY2xhc3NMaXN0LmFkZCgiaGFzU2Vjb25kcyIpOwogICAgICAgICAgICAgIHZhciBzZWNvbmRJbnB1dCA9IGNyZWF0ZU51bWJlcklucHV0KCJmbGF0cGlja3Itc2Vjb25kIik7CiAgICAgICAgICAgICAgc2VsZi5zZWNvbmRFbGVtZW50ID0gc2Vjb25kSW5wdXQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImlucHV0IilbMF07CiAgICAgICAgICAgICAgc2VsZi5zZWNvbmRFbGVtZW50LnZhbHVlID0gcGFkKHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqCiAgICAgICAgICAgICAgICAgID8gc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmouZ2V0U2Vjb25kcygpCiAgICAgICAgICAgICAgICAgIDogZGVmYXVsdHMuc2Vjb25kcyk7CiAgICAgICAgICAgICAgc2VsZi5zZWNvbmRFbGVtZW50LnNldEF0dHJpYnV0ZSgic3RlcCIsIHNlbGYubWludXRlRWxlbWVudC5nZXRBdHRyaWJ1dGUoInN0ZXAiKSk7CiAgICAgICAgICAgICAgc2VsZi5zZWNvbmRFbGVtZW50LnNldEF0dHJpYnV0ZSgibWluIiwgIjAiKTsKICAgICAgICAgICAgICBzZWxmLnNlY29uZEVsZW1lbnQuc2V0QXR0cmlidXRlKCJtYXgiLCAiNTkiKTsKICAgICAgICAgICAgICBzZWxmLnNlY29uZEVsZW1lbnQuc2V0QXR0cmlidXRlKCJtYXhsZW5ndGgiLCAiMiIpOwogICAgICAgICAgICAgIHNlbGYudGltZUNvbnRhaW5lci5hcHBlbmRDaGlsZChjcmVhdGVFbGVtZW50KCJzcGFuIiwgImZsYXRwaWNrci10aW1lLXNlcGFyYXRvciIsICI6IikpOwogICAgICAgICAgICAgIHNlbGYudGltZUNvbnRhaW5lci5hcHBlbmRDaGlsZChzZWNvbmRJbnB1dCk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoIXNlbGYuY29uZmlnLnRpbWVfMjRocikgewogICAgICAgICAgICAgIHNlbGYuYW1QTSA9IGNyZWF0ZUVsZW1lbnQoInNwYW4iLCAiZmxhdHBpY2tyLWFtLXBtIiwgc2VsZi5sMTBuLmFtUE1baW50KChzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iagogICAgICAgICAgICAgICAgICA/IHNlbGYuaG91ckVsZW1lbnQudmFsdWUKICAgICAgICAgICAgICAgICAgOiBzZWxmLmNvbmZpZy5kZWZhdWx0SG91cikgPiAxMSldKTsKICAgICAgICAgICAgICBzZWxmLmFtUE0udGl0bGUgPSBzZWxmLmwxMG4udG9nZ2xlVGl0bGU7CiAgICAgICAgICAgICAgc2VsZi5hbVBNLnRhYkluZGV4ID0gLTE7CiAgICAgICAgICAgICAgc2VsZi50aW1lQ29udGFpbmVyLmFwcGVuZENoaWxkKHNlbGYuYW1QTSk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gc2VsZi50aW1lQ29udGFpbmVyOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGJ1aWxkV2Vla2RheXMoKSB7CiAgICAgICAgICBpZiAoIXNlbGYud2Vla2RheUNvbnRhaW5lcikKICAgICAgICAgICAgICBzZWxmLndlZWtkYXlDb250YWluZXIgPSBjcmVhdGVFbGVtZW50KCJkaXYiLCAiZmxhdHBpY2tyLXdlZWtkYXlzIik7CiAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgY2xlYXJOb2RlKHNlbGYud2Vla2RheUNvbnRhaW5lcik7CiAgICAgICAgICBmb3IgKHZhciBpID0gc2VsZi5jb25maWcuc2hvd01vbnRoczsgaS0tOykgewogICAgICAgICAgICAgIHZhciBjb250YWluZXIgPSBjcmVhdGVFbGVtZW50KCJkaXYiLCAiZmxhdHBpY2tyLXdlZWtkYXljb250YWluZXIiKTsKICAgICAgICAgICAgICBzZWxmLndlZWtkYXlDb250YWluZXIuYXBwZW5kQ2hpbGQoY29udGFpbmVyKTsKICAgICAgICAgIH0KICAgICAgICAgIHVwZGF0ZVdlZWtkYXlzKCk7CiAgICAgICAgICByZXR1cm4gc2VsZi53ZWVrZGF5Q29udGFpbmVyOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHVwZGF0ZVdlZWtkYXlzKCkgewogICAgICAgICAgaWYgKCFzZWxmLndlZWtkYXlDb250YWluZXIpIHsKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICB2YXIgZmlyc3REYXlPZldlZWsgPSBzZWxmLmwxMG4uZmlyc3REYXlPZldlZWs7CiAgICAgICAgICB2YXIgd2Vla2RheXMgPSBfX3NwcmVhZEFycmF5cyhzZWxmLmwxMG4ud2Vla2RheXMuc2hvcnRoYW5kKTsKICAgICAgICAgIGlmIChmaXJzdERheU9mV2VlayA+IDAgJiYgZmlyc3REYXlPZldlZWsgPCB3ZWVrZGF5cy5sZW5ndGgpIHsKICAgICAgICAgICAgICB3ZWVrZGF5cyA9IF9fc3ByZWFkQXJyYXlzKHdlZWtkYXlzLnNwbGljZShmaXJzdERheU9mV2Vlaywgd2Vla2RheXMubGVuZ3RoKSwgd2Vla2RheXMuc3BsaWNlKDAsIGZpcnN0RGF5T2ZXZWVrKSk7CiAgICAgICAgICB9CiAgICAgICAgICBmb3IgKHZhciBpID0gc2VsZi5jb25maWcuc2hvd01vbnRoczsgaS0tOykgewogICAgICAgICAgICAgIHNlbGYud2Vla2RheUNvbnRhaW5lci5jaGlsZHJlbltpXS5pbm5lckhUTUwgPSAiXG4gICAgICA8c3BhbiBjbGFzcz0nZmxhdHBpY2tyLXdlZWtkYXknPlxuICAgICAgICAiICsgd2Vla2RheXMuam9pbigiPC9zcGFuPjxzcGFuIGNsYXNzPSdmbGF0cGlja3Itd2Vla2RheSc+IikgKyAiXG4gICAgICA8L3NwYW4+XG4gICAgICAiOwogICAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIGJ1aWxkV2Vla3MoKSB7CiAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoImhhc1dlZWtzIik7CiAgICAgICAgICB2YXIgd2Vla1dyYXBwZXIgPSBjcmVhdGVFbGVtZW50KCJkaXYiLCAiZmxhdHBpY2tyLXdlZWt3cmFwcGVyIik7CiAgICAgICAgICB3ZWVrV3JhcHBlci5hcHBlbmRDaGlsZChjcmVhdGVFbGVtZW50KCJzcGFuIiwgImZsYXRwaWNrci13ZWVrZGF5Iiwgc2VsZi5sMTBuLndlZWtBYmJyZXZpYXRpb24pKTsKICAgICAgICAgIHZhciB3ZWVrTnVtYmVycyA9IGNyZWF0ZUVsZW1lbnQoImRpdiIsICJmbGF0cGlja3Itd2Vla3MiKTsKICAgICAgICAgIHdlZWtXcmFwcGVyLmFwcGVuZENoaWxkKHdlZWtOdW1iZXJzKTsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgd2Vla1dyYXBwZXI6IHdlZWtXcmFwcGVyLAogICAgICAgICAgICAgIHdlZWtOdW1iZXJzOiB3ZWVrTnVtYmVycywKICAgICAgICAgIH07CiAgICAgIH0KICAgICAgZnVuY3Rpb24gY2hhbmdlTW9udGgodmFsdWUsIGlzT2Zmc2V0KSB7CiAgICAgICAgICBpZiAoaXNPZmZzZXQgPT09IHZvaWQgMCkgeyBpc09mZnNldCA9IHRydWU7IH0KICAgICAgICAgIHZhciBkZWx0YSA9IGlzT2Zmc2V0ID8gdmFsdWUgOiB2YWx1ZSAtIHNlbGYuY3VycmVudE1vbnRoOwogICAgICAgICAgaWYgKChkZWx0YSA8IDAgJiYgc2VsZi5faGlkZVByZXZNb250aEFycm93ID09PSB0cnVlKSB8fAogICAgICAgICAgICAgIChkZWx0YSA+IDAgJiYgc2VsZi5faGlkZU5leHRNb250aEFycm93ID09PSB0cnVlKSkKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICBzZWxmLmN1cnJlbnRNb250aCArPSBkZWx0YTsKICAgICAgICAgIGlmIChzZWxmLmN1cnJlbnRNb250aCA8IDAgfHwgc2VsZi5jdXJyZW50TW9udGggPiAxMSkgewogICAgICAgICAgICAgIHNlbGYuY3VycmVudFllYXIgKz0gc2VsZi5jdXJyZW50TW9udGggPiAxMSA/IDEgOiAtMTsKICAgICAgICAgICAgICBzZWxmLmN1cnJlbnRNb250aCA9IChzZWxmLmN1cnJlbnRNb250aCArIDEyKSAlIDEyOwogICAgICAgICAgICAgIHRyaWdnZXJFdmVudCgib25ZZWFyQ2hhbmdlIik7CiAgICAgICAgICAgICAgYnVpbGRNb250aFN3aXRjaCgpOwogICAgICAgICAgfQogICAgICAgICAgYnVpbGREYXlzKCk7CiAgICAgICAgICB0cmlnZ2VyRXZlbnQoIm9uTW9udGhDaGFuZ2UiKTsKICAgICAgICAgIHVwZGF0ZU5hdmlnYXRpb25DdXJyZW50TW9udGgoKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBjbGVhcih0cmlnZ2VyQ2hhbmdlRXZlbnQsIHRvSW5pdGlhbCkgewogICAgICAgICAgaWYgKHRyaWdnZXJDaGFuZ2VFdmVudCA9PT0gdm9pZCAwKSB7IHRyaWdnZXJDaGFuZ2VFdmVudCA9IHRydWU7IH0KICAgICAgICAgIGlmICh0b0luaXRpYWwgPT09IHZvaWQgMCkgeyB0b0luaXRpYWwgPSB0cnVlOyB9CiAgICAgICAgICBzZWxmLmlucHV0LnZhbHVlID0gIiI7CiAgICAgICAgICBpZiAoc2VsZi5hbHRJbnB1dCAhPT0gdW5kZWZpbmVkKQogICAgICAgICAgICAgIHNlbGYuYWx0SW5wdXQudmFsdWUgPSAiIjsKICAgICAgICAgIGlmIChzZWxmLm1vYmlsZUlucHV0ICE9PSB1bmRlZmluZWQpCiAgICAgICAgICAgICAgc2VsZi5tb2JpbGVJbnB1dC52YWx1ZSA9ICIiOwogICAgICAgICAgc2VsZi5zZWxlY3RlZERhdGVzID0gW107CiAgICAgICAgICBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiA9IHVuZGVmaW5lZDsKICAgICAgICAgIGlmICh0b0luaXRpYWwgPT09IHRydWUpIHsKICAgICAgICAgICAgICBzZWxmLmN1cnJlbnRZZWFyID0gc2VsZi5faW5pdGlhbERhdGUuZ2V0RnVsbFllYXIoKTsKICAgICAgICAgICAgICBzZWxmLmN1cnJlbnRNb250aCA9IHNlbGYuX2luaXRpYWxEYXRlLmdldE1vbnRoKCk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoc2VsZi5jb25maWcuZW5hYmxlVGltZSA9PT0gdHJ1ZSkgewogICAgICAgICAgICAgIHZhciBfYSA9IGdldERlZmF1bHRIb3VycyhzZWxmLmNvbmZpZyksIGhvdXJzID0gX2EuaG91cnMsIG1pbnV0ZXMgPSBfYS5taW51dGVzLCBzZWNvbmRzID0gX2Euc2Vjb25kczsKICAgICAgICAgICAgICBzZXRIb3Vycyhob3VycywgbWludXRlcywgc2Vjb25kcyk7CiAgICAgICAgICB9CiAgICAgICAgICBzZWxmLnJlZHJhdygpOwogICAgICAgICAgaWYgKHRyaWdnZXJDaGFuZ2VFdmVudCkKICAgICAgICAgICAgICB0cmlnZ2VyRXZlbnQoIm9uQ2hhbmdlIik7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gY2xvc2UoKSB7CiAgICAgICAgICBzZWxmLmlzT3BlbiA9IGZhbHNlOwogICAgICAgICAgaWYgKCFzZWxmLmlzTW9iaWxlKSB7CiAgICAgICAgICAgICAgaWYgKHNlbGYuY2FsZW5kYXJDb250YWluZXIgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoIm9wZW4iKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKHNlbGYuX2lucHV0ICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgICAgc2VsZi5faW5wdXQuY2xhc3NMaXN0LnJlbW92ZSgiYWN0aXZlIik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgdHJpZ2dlckV2ZW50KCJvbkNsb3NlIik7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZGVzdHJveSgpIHsKICAgICAgICAgIGlmIChzZWxmLmNvbmZpZyAhPT0gdW5kZWZpbmVkKQogICAgICAgICAgICAgIHRyaWdnZXJFdmVudCgib25EZXN0cm95Iik7CiAgICAgICAgICBmb3IgKHZhciBpID0gc2VsZi5faGFuZGxlcnMubGVuZ3RoOyBpLS07KSB7CiAgICAgICAgICAgICAgc2VsZi5faGFuZGxlcnNbaV0ucmVtb3ZlKCk7CiAgICAgICAgICB9CiAgICAgICAgICBzZWxmLl9oYW5kbGVycyA9IFtdOwogICAgICAgICAgaWYgKHNlbGYubW9iaWxlSW5wdXQpIHsKICAgICAgICAgICAgICBpZiAoc2VsZi5tb2JpbGVJbnB1dC5wYXJlbnROb2RlKQogICAgICAgICAgICAgICAgICBzZWxmLm1vYmlsZUlucHV0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc2VsZi5tb2JpbGVJbnB1dCk7CiAgICAgICAgICAgICAgc2VsZi5tb2JpbGVJbnB1dCA9IHVuZGVmaW5lZDsKICAgICAgICAgIH0KICAgICAgICAgIGVsc2UgaWYgKHNlbGYuY2FsZW5kYXJDb250YWluZXIgJiYgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5wYXJlbnROb2RlKSB7CiAgICAgICAgICAgICAgaWYgKHNlbGYuY29uZmlnLnN0YXRpYyAmJiBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnBhcmVudE5vZGUpIHsKICAgICAgICAgICAgICAgICAgdmFyIHdyYXBwZXIgPSBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnBhcmVudE5vZGU7CiAgICAgICAgICAgICAgICAgIHdyYXBwZXIubGFzdENoaWxkICYmIHdyYXBwZXIucmVtb3ZlQ2hpbGQod3JhcHBlci5sYXN0Q2hpbGQpOwogICAgICAgICAgICAgICAgICBpZiAod3JhcHBlci5wYXJlbnROb2RlKSB7CiAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAod3JhcHBlci5maXJzdENoaWxkKQogICAgICAgICAgICAgICAgICAgICAgICAgIHdyYXBwZXIucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUod3JhcHBlci5maXJzdENoaWxkLCB3cmFwcGVyKTsKICAgICAgICAgICAgICAgICAgICAgIHdyYXBwZXIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh3cmFwcGVyKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzZWxmLmNhbGVuZGFyQ29udGFpbmVyKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChzZWxmLmFsdElucHV0KSB7CiAgICAgICAgICAgICAgc2VsZi5pbnB1dC50eXBlID0gInRleHQiOwogICAgICAgICAgICAgIGlmIChzZWxmLmFsdElucHV0LnBhcmVudE5vZGUpCiAgICAgICAgICAgICAgICAgIHNlbGYuYWx0SW5wdXQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzZWxmLmFsdElucHV0KTsKICAgICAgICAgICAgICBkZWxldGUgc2VsZi5hbHRJbnB1dDsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChzZWxmLmlucHV0KSB7CiAgICAgICAgICAgICAgc2VsZi5pbnB1dC50eXBlID0gc2VsZi5pbnB1dC5fdHlwZTsKICAgICAgICAgICAgICBzZWxmLmlucHV0LmNsYXNzTGlzdC5yZW1vdmUoImZsYXRwaWNrci1pbnB1dCIpOwogICAgICAgICAgICAgIHNlbGYuaW5wdXQucmVtb3ZlQXR0cmlidXRlKCJyZWFkb25seSIpOwogICAgICAgICAgfQogICAgICAgICAgWwogICAgICAgICAgICAgICJfc2hvd1RpbWVJbnB1dCIsCiAgICAgICAgICAgICAgImxhdGVzdFNlbGVjdGVkRGF0ZU9iaiIsCiAgICAgICAgICAgICAgIl9oaWRlTmV4dE1vbnRoQXJyb3ciLAogICAgICAgICAgICAgICJfaGlkZVByZXZNb250aEFycm93IiwKICAgICAgICAgICAgICAiX19oaWRlTmV4dE1vbnRoQXJyb3ciLAogICAgICAgICAgICAgICJfX2hpZGVQcmV2TW9udGhBcnJvdyIsCiAgICAgICAgICAgICAgImlzTW9iaWxlIiwKICAgICAgICAgICAgICAiaXNPcGVuIiwKICAgICAgICAgICAgICAic2VsZWN0ZWREYXRlRWxlbSIsCiAgICAgICAgICAgICAgIm1pbkRhdGVIYXNUaW1lIiwKICAgICAgICAgICAgICAibWF4RGF0ZUhhc1RpbWUiLAogICAgICAgICAgICAgICJkYXlzIiwKICAgICAgICAgICAgICAiZGF5c0NvbnRhaW5lciIsCiAgICAgICAgICAgICAgIl9pbnB1dCIsCiAgICAgICAgICAgICAgIl9wb3NpdGlvbkVsZW1lbnQiLAogICAgICAgICAgICAgICJpbm5lckNvbnRhaW5lciIsCiAgICAgICAgICAgICAgInJDb250YWluZXIiLAogICAgICAgICAgICAgICJtb250aE5hdiIsCiAgICAgICAgICAgICAgInRvZGF5RGF0ZUVsZW0iLAogICAgICAgICAgICAgICJjYWxlbmRhckNvbnRhaW5lciIsCiAgICAgICAgICAgICAgIndlZWtkYXlDb250YWluZXIiLAogICAgICAgICAgICAgICJwcmV2TW9udGhOYXYiLAogICAgICAgICAgICAgICJuZXh0TW9udGhOYXYiLAogICAgICAgICAgICAgICJtb250aHNEcm9wZG93bkNvbnRhaW5lciIsCiAgICAgICAgICAgICAgImN1cnJlbnRNb250aEVsZW1lbnQiLAogICAgICAgICAgICAgICJjdXJyZW50WWVhckVsZW1lbnQiLAogICAgICAgICAgICAgICJuYXZpZ2F0aW9uQ3VycmVudE1vbnRoIiwKICAgICAgICAgICAgICAic2VsZWN0ZWREYXRlRWxlbSIsCiAgICAgICAgICAgICAgImNvbmZpZyIsCiAgICAgICAgICBdLmZvckVhY2goZnVuY3Rpb24gKGspIHsKICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICBkZWxldGUgc2VsZltrXTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgY2F0Y2ggKF8pIHsgfQogICAgICAgICAgfSk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gaXNDYWxlbmRhckVsZW0oZWxlbSkgewogICAgICAgICAgcmV0dXJuIHNlbGYuY2FsZW5kYXJDb250YWluZXIuY29udGFpbnMoZWxlbSk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZG9jdW1lbnRDbGljayhlKSB7CiAgICAgICAgICBpZiAoc2VsZi5pc09wZW4gJiYgIXNlbGYuY29uZmlnLmlubGluZSkgewogICAgICAgICAgICAgIHZhciBldmVudFRhcmdldF8xID0gZ2V0RXZlbnRUYXJnZXQoZSk7CiAgICAgICAgICAgICAgdmFyIGlzQ2FsZW5kYXJFbGVtZW50ID0gaXNDYWxlbmRhckVsZW0oZXZlbnRUYXJnZXRfMSk7CiAgICAgICAgICAgICAgdmFyIGlzSW5wdXQgPSBldmVudFRhcmdldF8xID09PSBzZWxmLmlucHV0IHx8CiAgICAgICAgICAgICAgICAgIGV2ZW50VGFyZ2V0XzEgPT09IHNlbGYuYWx0SW5wdXQgfHwKICAgICAgICAgICAgICAgICAgc2VsZi5lbGVtZW50LmNvbnRhaW5zKGV2ZW50VGFyZ2V0XzEpIHx8CiAgICAgICAgICAgICAgICAgIChlLnBhdGggJiYKICAgICAgICAgICAgICAgICAgICAgIGUucGF0aC5pbmRleE9mICYmCiAgICAgICAgICAgICAgICAgICAgICAofmUucGF0aC5pbmRleE9mKHNlbGYuaW5wdXQpIHx8CiAgICAgICAgICAgICAgICAgICAgICAgICAgfmUucGF0aC5pbmRleE9mKHNlbGYuYWx0SW5wdXQpKSk7CiAgICAgICAgICAgICAgdmFyIGxvc3RGb2N1cyA9ICFpc0lucHV0ICYmCiAgICAgICAgICAgICAgICAgICFpc0NhbGVuZGFyRWxlbWVudCAmJgogICAgICAgICAgICAgICAgICAhaXNDYWxlbmRhckVsZW0oZS5yZWxhdGVkVGFyZ2V0KTsKICAgICAgICAgICAgICB2YXIgaXNJZ25vcmVkID0gIXNlbGYuY29uZmlnLmlnbm9yZWRGb2N1c0VsZW1lbnRzLnNvbWUoZnVuY3Rpb24gKGVsZW0pIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsZW0uY29udGFpbnMoZXZlbnRUYXJnZXRfMSk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgaWYgKGxvc3RGb2N1cyAmJiBpc0lnbm9yZWQpIHsKICAgICAgICAgICAgICAgICAgaWYgKHNlbGYuY29uZmlnLmFsbG93SW5wdXQpIHsKICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2V0RGF0ZShzZWxmLl9pbnB1dC52YWx1ZSwgZmFsc2UsIHNlbGYuY29uZmlnLmFsdElucHV0CiAgICAgICAgICAgICAgICAgICAgICAgICAgPyBzZWxmLmNvbmZpZy5hbHRGb3JtYXQKICAgICAgICAgICAgICAgICAgICAgICAgICA6IHNlbGYuY29uZmlnLmRhdGVGb3JtYXQpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGlmIChzZWxmLnRpbWVDb250YWluZXIgIT09IHVuZGVmaW5lZCAmJgogICAgICAgICAgICAgICAgICAgICAgc2VsZi5taW51dGVFbGVtZW50ICE9PSB1bmRlZmluZWQgJiYKICAgICAgICAgICAgICAgICAgICAgIHNlbGYuaG91ckVsZW1lbnQgIT09IHVuZGVmaW5lZCAmJgogICAgICAgICAgICAgICAgICAgICAgc2VsZi5pbnB1dC52YWx1ZSAhPT0gIiIgJiYKICAgICAgICAgICAgICAgICAgICAgIHNlbGYuaW5wdXQudmFsdWUgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICAgICAgdXBkYXRlVGltZSgpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIHNlbGYuY2xvc2UoKTsKICAgICAgICAgICAgICAgICAgaWYgKHNlbGYuY29uZmlnICYmCiAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNvbmZpZy5tb2RlID09PSAicmFuZ2UiICYmCiAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoID09PSAxKQogICAgICAgICAgICAgICAgICAgICAgc2VsZi5jbGVhcihmYWxzZSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIGNoYW5nZVllYXIobmV3WWVhcikgewogICAgICAgICAgaWYgKCFuZXdZZWFyIHx8CiAgICAgICAgICAgICAgKHNlbGYuY29uZmlnLm1pbkRhdGUgJiYgbmV3WWVhciA8IHNlbGYuY29uZmlnLm1pbkRhdGUuZ2V0RnVsbFllYXIoKSkgfHwKICAgICAgICAgICAgICAoc2VsZi5jb25maWcubWF4RGF0ZSAmJiBuZXdZZWFyID4gc2VsZi5jb25maWcubWF4RGF0ZS5nZXRGdWxsWWVhcigpKSkKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB2YXIgbmV3WWVhck51bSA9IG5ld1llYXIsIGlzTmV3WWVhciA9IHNlbGYuY3VycmVudFllYXIgIT09IG5ld1llYXJOdW07CiAgICAgICAgICBzZWxmLmN1cnJlbnRZZWFyID0gbmV3WWVhck51bSB8fCBzZWxmLmN1cnJlbnRZZWFyOwogICAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1heERhdGUgJiYKICAgICAgICAgICAgICBzZWxmLmN1cnJlbnRZZWFyID09PSBzZWxmLmNvbmZpZy5tYXhEYXRlLmdldEZ1bGxZZWFyKCkpIHsKICAgICAgICAgICAgICBzZWxmLmN1cnJlbnRNb250aCA9IE1hdGgubWluKHNlbGYuY29uZmlnLm1heERhdGUuZ2V0TW9udGgoKSwgc2VsZi5jdXJyZW50TW9udGgpOwogICAgICAgICAgfQogICAgICAgICAgZWxzZSBpZiAoc2VsZi5jb25maWcubWluRGF0ZSAmJgogICAgICAgICAgICAgIHNlbGYuY3VycmVudFllYXIgPT09IHNlbGYuY29uZmlnLm1pbkRhdGUuZ2V0RnVsbFllYXIoKSkgewogICAgICAgICAgICAgIHNlbGYuY3VycmVudE1vbnRoID0gTWF0aC5tYXgoc2VsZi5jb25maWcubWluRGF0ZS5nZXRNb250aCgpLCBzZWxmLmN1cnJlbnRNb250aCk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoaXNOZXdZZWFyKSB7CiAgICAgICAgICAgICAgc2VsZi5yZWRyYXcoKTsKICAgICAgICAgICAgICB0cmlnZ2VyRXZlbnQoIm9uWWVhckNoYW5nZSIpOwogICAgICAgICAgICAgIGJ1aWxkTW9udGhTd2l0Y2goKTsKICAgICAgICAgIH0KICAgICAgfQogICAgICBmdW5jdGlvbiBpc0VuYWJsZWQoZGF0ZSwgdGltZWxlc3MpIHsKICAgICAgICAgIHZhciBfYTsKICAgICAgICAgIGlmICh0aW1lbGVzcyA9PT0gdm9pZCAwKSB7IHRpbWVsZXNzID0gdHJ1ZTsgfQogICAgICAgICAgdmFyIGRhdGVUb0NoZWNrID0gc2VsZi5wYXJzZURhdGUoZGF0ZSwgdW5kZWZpbmVkLCB0aW1lbGVzcyk7CiAgICAgICAgICBpZiAoKHNlbGYuY29uZmlnLm1pbkRhdGUgJiYKICAgICAgICAgICAgICBkYXRlVG9DaGVjayAmJgogICAgICAgICAgICAgIGNvbXBhcmVEYXRlcyhkYXRlVG9DaGVjaywgc2VsZi5jb25maWcubWluRGF0ZSwgdGltZWxlc3MgIT09IHVuZGVmaW5lZCA/IHRpbWVsZXNzIDogIXNlbGYubWluRGF0ZUhhc1RpbWUpIDwgMCkgfHwKICAgICAgICAgICAgICAoc2VsZi5jb25maWcubWF4RGF0ZSAmJgogICAgICAgICAgICAgICAgICBkYXRlVG9DaGVjayAmJgogICAgICAgICAgICAgICAgICBjb21wYXJlRGF0ZXMoZGF0ZVRvQ2hlY2ssIHNlbGYuY29uZmlnLm1heERhdGUsIHRpbWVsZXNzICE9PSB1bmRlZmluZWQgPyB0aW1lbGVzcyA6ICFzZWxmLm1heERhdGVIYXNUaW1lKSA+IDApKQogICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIGlmICghc2VsZi5jb25maWcuZW5hYmxlICYmIHNlbGYuY29uZmlnLmRpc2FibGUubGVuZ3RoID09PSAwKQogICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgaWYgKGRhdGVUb0NoZWNrID09PSB1bmRlZmluZWQpCiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgdmFyIGJvb2wgPSAhIXNlbGYuY29uZmlnLmVuYWJsZSwgYXJyYXkgPSAoX2EgPSBzZWxmLmNvbmZpZy5lbmFibGUpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHNlbGYuY29uZmlnLmRpc2FibGU7CiAgICAgICAgICBmb3IgKHZhciBpID0gMCwgZCA9IHZvaWQgMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgZCA9IGFycmF5W2ldOwogICAgICAgICAgICAgIGlmICh0eXBlb2YgZCA9PT0gImZ1bmN0aW9uIiAmJgogICAgICAgICAgICAgICAgICBkKGRhdGVUb0NoZWNrKSkKICAgICAgICAgICAgICAgICAgcmV0dXJuIGJvb2w7CiAgICAgICAgICAgICAgZWxzZSBpZiAoZCBpbnN0YW5jZW9mIERhdGUgJiYKICAgICAgICAgICAgICAgICAgZGF0ZVRvQ2hlY2sgIT09IHVuZGVmaW5lZCAmJgogICAgICAgICAgICAgICAgICBkLmdldFRpbWUoKSA9PT0gZGF0ZVRvQ2hlY2suZ2V0VGltZSgpKQogICAgICAgICAgICAgICAgICByZXR1cm4gYm9vbDsKICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgZCA9PT0gInN0cmluZyIpIHsKICAgICAgICAgICAgICAgICAgdmFyIHBhcnNlZCA9IHNlbGYucGFyc2VEYXRlKGQsIHVuZGVmaW5lZCwgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZWQgJiYgcGFyc2VkLmdldFRpbWUoKSA9PT0gZGF0ZVRvQ2hlY2suZ2V0VGltZSgpCiAgICAgICAgICAgICAgICAgICAgICA/IGJvb2wKICAgICAgICAgICAgICAgICAgICAgIDogIWJvb2w7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBkID09PSAib2JqZWN0IiAmJgogICAgICAgICAgICAgICAgICBkYXRlVG9DaGVjayAhPT0gdW5kZWZpbmVkICYmCiAgICAgICAgICAgICAgICAgIGQuZnJvbSAmJgogICAgICAgICAgICAgICAgICBkLnRvICYmCiAgICAgICAgICAgICAgICAgIGRhdGVUb0NoZWNrLmdldFRpbWUoKSA+PSBkLmZyb20uZ2V0VGltZSgpICYmCiAgICAgICAgICAgICAgICAgIGRhdGVUb0NoZWNrLmdldFRpbWUoKSA8PSBkLnRvLmdldFRpbWUoKSkKICAgICAgICAgICAgICAgICAgcmV0dXJuIGJvb2w7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gIWJvb2w7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gaXNJblZpZXcoZWxlbSkgewogICAgICAgICAgaWYgKHNlbGYuZGF5c0NvbnRhaW5lciAhPT0gdW5kZWZpbmVkKQogICAgICAgICAgICAgIHJldHVybiAoZWxlbS5jbGFzc05hbWUuaW5kZXhPZigiaGlkZGVuIikgPT09IC0xICYmCiAgICAgICAgICAgICAgICAgIGVsZW0uY2xhc3NOYW1lLmluZGV4T2YoImZsYXRwaWNrci1kaXNhYmxlZCIpID09PSAtMSAmJgogICAgICAgICAgICAgICAgICBzZWxmLmRheXNDb250YWluZXIuY29udGFpbnMoZWxlbSkpOwogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIG9uQmx1cihlKSB7CiAgICAgICAgICB2YXIgaXNJbnB1dCA9IGUudGFyZ2V0ID09PSBzZWxmLl9pbnB1dDsKICAgICAgICAgIHZhciB2YWx1ZUNoYW5nZWQgPSBzZWxmLl9pbnB1dC52YWx1ZS50cmltRW5kKCkgIT09IGdldERhdGVTdHIoKTsKICAgICAgICAgIGlmIChpc0lucHV0ICYmCiAgICAgICAgICAgICAgdmFsdWVDaGFuZ2VkICYmCiAgICAgICAgICAgICAgIShlLnJlbGF0ZWRUYXJnZXQgJiYgaXNDYWxlbmRhckVsZW0oZS5yZWxhdGVkVGFyZ2V0KSkpIHsKICAgICAgICAgICAgICBzZWxmLnNldERhdGUoc2VsZi5faW5wdXQudmFsdWUsIHRydWUsIGUudGFyZ2V0ID09PSBzZWxmLmFsdElucHV0CiAgICAgICAgICAgICAgICAgID8gc2VsZi5jb25maWcuYWx0Rm9ybWF0CiAgICAgICAgICAgICAgICAgIDogc2VsZi5jb25maWcuZGF0ZUZvcm1hdCk7CiAgICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gb25LZXlEb3duKGUpIHsKICAgICAgICAgIHZhciBldmVudFRhcmdldCA9IGdldEV2ZW50VGFyZ2V0KGUpOwogICAgICAgICAgdmFyIGlzSW5wdXQgPSBzZWxmLmNvbmZpZy53cmFwCiAgICAgICAgICAgICAgPyBlbGVtZW50LmNvbnRhaW5zKGV2ZW50VGFyZ2V0KQogICAgICAgICAgICAgIDogZXZlbnRUYXJnZXQgPT09IHNlbGYuX2lucHV0OwogICAgICAgICAgdmFyIGFsbG93SW5wdXQgPSBzZWxmLmNvbmZpZy5hbGxvd0lucHV0OwogICAgICAgICAgdmFyIGFsbG93S2V5ZG93biA9IHNlbGYuaXNPcGVuICYmICghYWxsb3dJbnB1dCB8fCAhaXNJbnB1dCk7CiAgICAgICAgICB2YXIgYWxsb3dJbmxpbmVLZXlkb3duID0gc2VsZi5jb25maWcuaW5saW5lICYmIGlzSW5wdXQgJiYgIWFsbG93SW5wdXQ7CiAgICAgICAgICBpZiAoZS5rZXlDb2RlID09PSAxMyAmJiBpc0lucHV0KSB7CiAgICAgICAgICAgICAgaWYgKGFsbG93SW5wdXQpIHsKICAgICAgICAgICAgICAgICAgc2VsZi5zZXREYXRlKHNlbGYuX2lucHV0LnZhbHVlLCB0cnVlLCBldmVudFRhcmdldCA9PT0gc2VsZi5hbHRJbnB1dAogICAgICAgICAgICAgICAgICAgICAgPyBzZWxmLmNvbmZpZy5hbHRGb3JtYXQKICAgICAgICAgICAgICAgICAgICAgIDogc2VsZi5jb25maWcuZGF0ZUZvcm1hdCk7CiAgICAgICAgICAgICAgICAgIHNlbGYuY2xvc2UoKTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGV2ZW50VGFyZ2V0LmJsdXIoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgIHNlbGYub3BlbigpOwogICAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGVsc2UgaWYgKGlzQ2FsZW5kYXJFbGVtKGV2ZW50VGFyZ2V0KSB8fAogICAgICAgICAgICAgIGFsbG93S2V5ZG93biB8fAogICAgICAgICAgICAgIGFsbG93SW5saW5lS2V5ZG93bikgewogICAgICAgICAgICAgIHZhciBpc1RpbWVPYmogPSAhIXNlbGYudGltZUNvbnRhaW5lciAmJgogICAgICAgICAgICAgICAgICBzZWxmLnRpbWVDb250YWluZXIuY29udGFpbnMoZXZlbnRUYXJnZXQpOwogICAgICAgICAgICAgIHN3aXRjaCAoZS5rZXlDb2RlKSB7CiAgICAgICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNUaW1lT2JqKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVRpbWUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICBmb2N1c0FuZENsb3NlKCk7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0RGF0ZShlKTsKICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICBjYXNlIDI3OgogICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgICAgICAgZm9jdXNBbmRDbG9zZSgpOwogICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgICAgY2FzZSA0NjoKICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0lucHV0ICYmICFzZWxmLmNvbmZpZy5hbGxvd0lucHV0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY2xlYXIoKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICBjYXNlIDM3OgogICAgICAgICAgICAgICAgICBjYXNlIDM5OgogICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc1RpbWVPYmogJiYgIWlzSW5wdXQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFjdGl2ZUVsZW1lbnQgPSBnZXRDbG9zZXN0QWN0aXZlRWxlbWVudCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWxmLmRheXNDb250YWluZXIgIT09IHVuZGVmaW5lZCAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoYWxsb3dJbnB1dCA9PT0gZmFsc2UgfHwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChhY3RpdmVFbGVtZW50ICYmIGlzSW5WaWV3KGFjdGl2ZUVsZW1lbnQpKSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRlbHRhXzEgPSBlLmtleUNvZGUgPT09IDM5ID8gMSA6IC0xOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWUuY3RybEtleSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvY3VzT25EYXkodW5kZWZpbmVkLCBkZWx0YV8xKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlTW9udGgoZGVsdGFfMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb2N1c09uRGF5KGdldEZpcnN0QXZhaWxhYmxlRGF5KDEpLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHNlbGYuaG91ckVsZW1lbnQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5ob3VyRWxlbWVudC5mb2N1cygpOwogICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIGNhc2UgMzg6CiAgICAgICAgICAgICAgICAgIGNhc2UgNDA6CiAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgZGVsdGEgPSBlLmtleUNvZGUgPT09IDQwID8gMSA6IC0xOwogICAgICAgICAgICAgICAgICAgICAgaWYgKChzZWxmLmRheXNDb250YWluZXIgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudFRhcmdldC4kaSAhPT0gdW5kZWZpbmVkKSB8fAogICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50VGFyZ2V0ID09PSBzZWxmLmlucHV0IHx8CiAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRUYXJnZXQgPT09IHNlbGYuYWx0SW5wdXQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS5jdHJsS2V5KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZVllYXIoc2VsZi5jdXJyZW50WWVhciAtIGRlbHRhKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9jdXNPbkRheShnZXRGaXJzdEF2YWlsYWJsZURheSgxKSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFpc1RpbWVPYmopCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvY3VzT25EYXkodW5kZWZpbmVkLCBkZWx0YSAqIDcpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZXZlbnRUYXJnZXQgPT09IHNlbGYuY3VycmVudFllYXJFbGVtZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlWWVhcihzZWxmLmN1cnJlbnRZZWFyIC0gZGVsdGEpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoc2VsZi5jb25maWcuZW5hYmxlVGltZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNUaW1lT2JqICYmIHNlbGYuaG91ckVsZW1lbnQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuaG91ckVsZW1lbnQuZm9jdXMoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVUaW1lKGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2RlYm91bmNlZENoYW5nZSgpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgICAgICAgIGlmIChpc1RpbWVPYmopIHsKICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbXMgPSBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuaG91ckVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubWludXRlRWxlbWVudCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zZWNvbmRFbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmFtUE0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY29uY2F0KHNlbGYucGx1Z2luRWxlbWVudHMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHg7IH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gZWxlbXMuaW5kZXhPZihldmVudFRhcmdldCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgIT09IC0xKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSBlbGVtc1tpICsgKGUuc2hpZnRLZXkgPyAtMSA6IDEpXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGFyZ2V0IHx8IHNlbGYuX2lucHV0KS5mb2N1cygpOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFzZWxmLmNvbmZpZy5ub0NhbGVuZGFyICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5kYXlzQ29udGFpbmVyICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5kYXlzQ29udGFpbmVyLmNvbnRhaW5zKGV2ZW50VGFyZ2V0KSAmJgogICAgICAgICAgICAgICAgICAgICAgICAgIGUuc2hpZnRLZXkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5faW5wdXQuZm9jdXMoKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGlmIChzZWxmLmFtUE0gIT09IHVuZGVmaW5lZCAmJiBldmVudFRhcmdldCA9PT0gc2VsZi5hbVBNKSB7CiAgICAgICAgICAgICAgc3dpdGNoIChlLmtleSkgewogICAgICAgICAgICAgICAgICBjYXNlIHNlbGYubDEwbi5hbVBNWzBdLmNoYXJBdCgwKToKICAgICAgICAgICAgICAgICAgY2FzZSBzZWxmLmwxMG4uYW1QTVswXS5jaGFyQXQoMCkudG9Mb3dlckNhc2UoKToKICAgICAgICAgICAgICAgICAgICAgIHNlbGYuYW1QTS50ZXh0Q29udGVudCA9IHNlbGYubDEwbi5hbVBNWzBdOwogICAgICAgICAgICAgICAgICAgICAgc2V0SG91cnNGcm9tSW5wdXRzKCk7CiAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVWYWx1ZSgpOwogICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIGNhc2Ugc2VsZi5sMTBuLmFtUE1bMV0uY2hhckF0KDApOgogICAgICAgICAgICAgICAgICBjYXNlIHNlbGYubDEwbi5hbVBNWzFdLmNoYXJBdCgwKS50b0xvd2VyQ2FzZSgpOgogICAgICAgICAgICAgICAgICAgICAgc2VsZi5hbVBNLnRleHRDb250ZW50ID0gc2VsZi5sMTBuLmFtUE1bMV07CiAgICAgICAgICAgICAgICAgICAgICBzZXRIb3Vyc0Zyb21JbnB1dHMoKTsKICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVZhbHVlKCk7CiAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoaXNJbnB1dCB8fCBpc0NhbGVuZGFyRWxlbShldmVudFRhcmdldCkpIHsKICAgICAgICAgICAgICB0cmlnZ2VyRXZlbnQoIm9uS2V5RG93biIsIGUpOwogICAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIG9uTW91c2VPdmVyKGVsZW0sIGNlbGxDbGFzcykgewogICAgICAgICAgaWYgKGNlbGxDbGFzcyA9PT0gdm9pZCAwKSB7IGNlbGxDbGFzcyA9ICJmbGF0cGlja3ItZGF5IjsgfQogICAgICAgICAgaWYgKHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggIT09IDEgfHwKICAgICAgICAgICAgICAoZWxlbSAmJgogICAgICAgICAgICAgICAgICAoIWVsZW0uY2xhc3NMaXN0LmNvbnRhaW5zKGNlbGxDbGFzcykgfHwKICAgICAgICAgICAgICAgICAgICAgIGVsZW0uY2xhc3NMaXN0LmNvbnRhaW5zKCJmbGF0cGlja3ItZGlzYWJsZWQiKSkpKQogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIHZhciBob3ZlckRhdGUgPSBlbGVtCiAgICAgICAgICAgICAgPyBlbGVtLmRhdGVPYmouZ2V0VGltZSgpCiAgICAgICAgICAgICAgOiBzZWxmLmRheXMuZmlyc3RFbGVtZW50Q2hpbGQuZGF0ZU9iai5nZXRUaW1lKCksIGluaXRpYWxEYXRlID0gc2VsZi5wYXJzZURhdGUoc2VsZi5zZWxlY3RlZERhdGVzWzBdLCB1bmRlZmluZWQsIHRydWUpLmdldFRpbWUoKSwgcmFuZ2VTdGFydERhdGUgPSBNYXRoLm1pbihob3ZlckRhdGUsIHNlbGYuc2VsZWN0ZWREYXRlc1swXS5nZXRUaW1lKCkpLCByYW5nZUVuZERhdGUgPSBNYXRoLm1heChob3ZlckRhdGUsIHNlbGYuc2VsZWN0ZWREYXRlc1swXS5nZXRUaW1lKCkpOwogICAgICAgICAgdmFyIGNvbnRhaW5zRGlzYWJsZWQgPSBmYWxzZTsKICAgICAgICAgIHZhciBtaW5SYW5nZSA9IDAsIG1heFJhbmdlID0gMDsKICAgICAgICAgIGZvciAodmFyIHQgPSByYW5nZVN0YXJ0RGF0ZTsgdCA8IHJhbmdlRW5kRGF0ZTsgdCArPSBkdXJhdGlvbi5EQVkpIHsKICAgICAgICAgICAgICBpZiAoIWlzRW5hYmxlZChuZXcgRGF0ZSh0KSwgdHJ1ZSkpIHsKICAgICAgICAgICAgICAgICAgY29udGFpbnNEaXNhYmxlZCA9CiAgICAgICAgICAgICAgICAgICAgICBjb250YWluc0Rpc2FibGVkIHx8ICh0ID4gcmFuZ2VTdGFydERhdGUgJiYgdCA8IHJhbmdlRW5kRGF0ZSk7CiAgICAgICAgICAgICAgICAgIGlmICh0IDwgaW5pdGlhbERhdGUgJiYgKCFtaW5SYW5nZSB8fCB0ID4gbWluUmFuZ2UpKQogICAgICAgICAgICAgICAgICAgICAgbWluUmFuZ2UgPSB0OwogICAgICAgICAgICAgICAgICBlbHNlIGlmICh0ID4gaW5pdGlhbERhdGUgJiYgKCFtYXhSYW5nZSB8fCB0IDwgbWF4UmFuZ2UpKQogICAgICAgICAgICAgICAgICAgICAgbWF4UmFuZ2UgPSB0OwogICAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHZhciBob3ZlcmFibGVDZWxscyA9IEFycmF5LmZyb20oc2VsZi5yQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoIio6bnRoLWNoaWxkKC1uKyIgKyBzZWxmLmNvbmZpZy5zaG93TW9udGhzICsgIikgPiAuIiArIGNlbGxDbGFzcykpOwogICAgICAgICAgaG92ZXJhYmxlQ2VsbHMuZm9yRWFjaChmdW5jdGlvbiAoZGF5RWxlbSkgewogICAgICAgICAgICAgIHZhciBkYXRlID0gZGF5RWxlbS5kYXRlT2JqOwogICAgICAgICAgICAgIHZhciB0aW1lc3RhbXAgPSBkYXRlLmdldFRpbWUoKTsKICAgICAgICAgICAgICB2YXIgb3V0T2ZSYW5nZSA9IChtaW5SYW5nZSA+IDAgJiYgdGltZXN0YW1wIDwgbWluUmFuZ2UpIHx8CiAgICAgICAgICAgICAgICAgIChtYXhSYW5nZSA+IDAgJiYgdGltZXN0YW1wID4gbWF4UmFuZ2UpOwogICAgICAgICAgICAgIGlmIChvdXRPZlJhbmdlKSB7CiAgICAgICAgICAgICAgICAgIGRheUVsZW0uY2xhc3NMaXN0LmFkZCgibm90QWxsb3dlZCIpOwogICAgICAgICAgICAgICAgICBbImluUmFuZ2UiLCAic3RhcnRSYW5nZSIsICJlbmRSYW5nZSJdLmZvckVhY2goZnVuY3Rpb24gKGMpIHsKICAgICAgICAgICAgICAgICAgICAgIGRheUVsZW0uY2xhc3NMaXN0LnJlbW92ZShjKTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgZWxzZSBpZiAoY29udGFpbnNEaXNhYmxlZCAmJiAhb3V0T2ZSYW5nZSkKICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgIFsic3RhcnRSYW5nZSIsICJpblJhbmdlIiwgImVuZFJhbmdlIiwgIm5vdEFsbG93ZWQiXS5mb3JFYWNoKGZ1bmN0aW9uIChjKSB7CiAgICAgICAgICAgICAgICAgIGRheUVsZW0uY2xhc3NMaXN0LnJlbW92ZShjKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBpZiAoZWxlbSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICAgIGVsZW0uY2xhc3NMaXN0LmFkZChob3ZlckRhdGUgPD0gc2VsZi5zZWxlY3RlZERhdGVzWzBdLmdldFRpbWUoKQogICAgICAgICAgICAgICAgICAgICAgPyAic3RhcnRSYW5nZSIKICAgICAgICAgICAgICAgICAgICAgIDogImVuZFJhbmdlIik7CiAgICAgICAgICAgICAgICAgIGlmIChpbml0aWFsRGF0ZSA8IGhvdmVyRGF0ZSAmJiB0aW1lc3RhbXAgPT09IGluaXRpYWxEYXRlKQogICAgICAgICAgICAgICAgICAgICAgZGF5RWxlbS5jbGFzc0xpc3QuYWRkKCJzdGFydFJhbmdlIik7CiAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGluaXRpYWxEYXRlID4gaG92ZXJEYXRlICYmIHRpbWVzdGFtcCA9PT0gaW5pdGlhbERhdGUpCiAgICAgICAgICAgICAgICAgICAgICBkYXlFbGVtLmNsYXNzTGlzdC5hZGQoImVuZFJhbmdlIik7CiAgICAgICAgICAgICAgICAgIGlmICh0aW1lc3RhbXAgPj0gbWluUmFuZ2UgJiYKICAgICAgICAgICAgICAgICAgICAgIChtYXhSYW5nZSA9PT0gMCB8fCB0aW1lc3RhbXAgPD0gbWF4UmFuZ2UpICYmCiAgICAgICAgICAgICAgICAgICAgICBpc0JldHdlZW4odGltZXN0YW1wLCBpbml0aWFsRGF0ZSwgaG92ZXJEYXRlKSkKICAgICAgICAgICAgICAgICAgICAgIGRheUVsZW0uY2xhc3NMaXN0LmFkZCgiaW5SYW5nZSIpOwogICAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIG9uUmVzaXplKCkgewogICAgICAgICAgaWYgKHNlbGYuaXNPcGVuICYmICFzZWxmLmNvbmZpZy5zdGF0aWMgJiYgIXNlbGYuY29uZmlnLmlubGluZSkKICAgICAgICAgICAgICBwb3NpdGlvbkNhbGVuZGFyKCk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gb3BlbihlLCBwb3NpdGlvbkVsZW1lbnQpIHsKICAgICAgICAgIGlmIChwb3NpdGlvbkVsZW1lbnQgPT09IHZvaWQgMCkgeyBwb3NpdGlvbkVsZW1lbnQgPSBzZWxmLl9wb3NpdGlvbkVsZW1lbnQ7IH0KICAgICAgICAgIGlmIChzZWxmLmlzTW9iaWxlID09PSB0cnVlKSB7CiAgICAgICAgICAgICAgaWYgKGUpIHsKICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgICB2YXIgZXZlbnRUYXJnZXQgPSBnZXRFdmVudFRhcmdldChlKTsKICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50VGFyZ2V0KSB7CiAgICAgICAgICAgICAgICAgICAgICBldmVudFRhcmdldC5ibHVyKCk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKHNlbGYubW9iaWxlSW5wdXQgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICBzZWxmLm1vYmlsZUlucHV0LmZvY3VzKCk7CiAgICAgICAgICAgICAgICAgIHNlbGYubW9iaWxlSW5wdXQuY2xpY2soKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgdHJpZ2dlckV2ZW50KCJvbk9wZW4iKTsKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICBlbHNlIGlmIChzZWxmLl9pbnB1dC5kaXNhYmxlZCB8fCBzZWxmLmNvbmZpZy5pbmxpbmUpIHsKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICB2YXIgd2FzT3BlbiA9IHNlbGYuaXNPcGVuOwogICAgICAgICAgc2VsZi5pc09wZW4gPSB0cnVlOwogICAgICAgICAgaWYgKCF3YXNPcGVuKSB7CiAgICAgICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCJvcGVuIik7CiAgICAgICAgICAgICAgc2VsZi5faW5wdXQuY2xhc3NMaXN0LmFkZCgiYWN0aXZlIik7CiAgICAgICAgICAgICAgdHJpZ2dlckV2ZW50KCJvbk9wZW4iKTsKICAgICAgICAgICAgICBwb3NpdGlvbkNhbGVuZGFyKHBvc2l0aW9uRWxlbWVudCk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoc2VsZi5jb25maWcuZW5hYmxlVGltZSA9PT0gdHJ1ZSAmJiBzZWxmLmNvbmZpZy5ub0NhbGVuZGFyID09PSB0cnVlKSB7CiAgICAgICAgICAgICAgaWYgKHNlbGYuY29uZmlnLmFsbG93SW5wdXQgPT09IGZhbHNlICYmCiAgICAgICAgICAgICAgICAgIChlID09PSB1bmRlZmluZWQgfHwKICAgICAgICAgICAgICAgICAgICAgICFzZWxmLnRpbWVDb250YWluZXIuY29udGFpbnMoZS5yZWxhdGVkVGFyZ2V0KSkpIHsKICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IHJldHVybiBzZWxmLmhvdXJFbGVtZW50LnNlbGVjdCgpOyB9LCA1MCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIG1pbk1heERhdGVTZXR0ZXIodHlwZSkgewogICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChkYXRlKSB7CiAgICAgICAgICAgICAgdmFyIGRhdGVPYmogPSAoc2VsZi5jb25maWdbIl8iICsgdHlwZSArICJEYXRlIl0gPSBzZWxmLnBhcnNlRGF0ZShkYXRlLCBzZWxmLmNvbmZpZy5kYXRlRm9ybWF0KSk7CiAgICAgICAgICAgICAgdmFyIGludmVyc2VEYXRlT2JqID0gc2VsZi5jb25maWdbIl8iICsgKHR5cGUgPT09ICJtaW4iID8gIm1heCIgOiAibWluIikgKyAiRGF0ZSJdOwogICAgICAgICAgICAgIGlmIChkYXRlT2JqICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgICAgc2VsZlt0eXBlID09PSAibWluIiA/ICJtaW5EYXRlSGFzVGltZSIgOiAibWF4RGF0ZUhhc1RpbWUiXSA9CiAgICAgICAgICAgICAgICAgICAgICBkYXRlT2JqLmdldEhvdXJzKCkgPiAwIHx8CiAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZU9iai5nZXRNaW51dGVzKCkgPiAwIHx8CiAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZU9iai5nZXRTZWNvbmRzKCkgPiAwOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoc2VsZi5zZWxlY3RlZERhdGVzKSB7CiAgICAgICAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlcyA9IHNlbGYuc2VsZWN0ZWREYXRlcy5maWx0ZXIoZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGlzRW5hYmxlZChkKTsgfSk7CiAgICAgICAgICAgICAgICAgIGlmICghc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCAmJiB0eXBlID09PSAibWluIikKICAgICAgICAgICAgICAgICAgICAgIHNldEhvdXJzRnJvbURhdGUoZGF0ZU9iaik7CiAgICAgICAgICAgICAgICAgIHVwZGF0ZVZhbHVlKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmIChzZWxmLmRheXNDb250YWluZXIpIHsKICAgICAgICAgICAgICAgICAgcmVkcmF3KCk7CiAgICAgICAgICAgICAgICAgIGlmIChkYXRlT2JqICE9PSB1bmRlZmluZWQpCiAgICAgICAgICAgICAgICAgICAgICBzZWxmLmN1cnJlbnRZZWFyRWxlbWVudFt0eXBlXSA9IGRhdGVPYmouZ2V0RnVsbFllYXIoKS50b1N0cmluZygpOwogICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICBzZWxmLmN1cnJlbnRZZWFyRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUodHlwZSk7CiAgICAgICAgICAgICAgICAgIHNlbGYuY3VycmVudFllYXJFbGVtZW50LmRpc2FibGVkID0KICAgICAgICAgICAgICAgICAgICAgICEhaW52ZXJzZURhdGVPYmogJiYKICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlT2JqICE9PSB1bmRlZmluZWQgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICBpbnZlcnNlRGF0ZU9iai5nZXRGdWxsWWVhcigpID09PSBkYXRlT2JqLmdldEZ1bGxZZWFyKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgfTsKICAgICAgfQogICAgICBmdW5jdGlvbiBwYXJzZUNvbmZpZygpIHsKICAgICAgICAgIHZhciBib29sT3B0cyA9IFsKICAgICAgICAgICAgICAid3JhcCIsCiAgICAgICAgICAgICAgIndlZWtOdW1iZXJzIiwKICAgICAgICAgICAgICAiYWxsb3dJbnB1dCIsCiAgICAgICAgICAgICAgImFsbG93SW52YWxpZFByZWxvYWQiLAogICAgICAgICAgICAgICJjbGlja09wZW5zIiwKICAgICAgICAgICAgICAidGltZV8yNGhyIiwKICAgICAgICAgICAgICAiZW5hYmxlVGltZSIsCiAgICAgICAgICAgICAgIm5vQ2FsZW5kYXIiLAogICAgICAgICAgICAgICJhbHRJbnB1dCIsCiAgICAgICAgICAgICAgInNob3J0aGFuZEN1cnJlbnRNb250aCIsCiAgICAgICAgICAgICAgImlubGluZSIsCiAgICAgICAgICAgICAgInN0YXRpYyIsCiAgICAgICAgICAgICAgImVuYWJsZVNlY29uZHMiLAogICAgICAgICAgICAgICJkaXNhYmxlTW9iaWxlIiwKICAgICAgICAgIF07CiAgICAgICAgICB2YXIgdXNlckNvbmZpZyA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGVsZW1lbnQuZGF0YXNldCB8fCB7fSkpKSwgaW5zdGFuY2VDb25maWcpOwogICAgICAgICAgdmFyIGZvcm1hdHMgPSB7fTsKICAgICAgICAgIHNlbGYuY29uZmlnLnBhcnNlRGF0ZSA9IHVzZXJDb25maWcucGFyc2VEYXRlOwogICAgICAgICAgc2VsZi5jb25maWcuZm9ybWF0RGF0ZSA9IHVzZXJDb25maWcuZm9ybWF0RGF0ZTsKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzZWxmLmNvbmZpZywgImVuYWJsZSIsIHsKICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNlbGYuY29uZmlnLl9lbmFibGU7IH0sCiAgICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAoZGF0ZXMpIHsKICAgICAgICAgICAgICAgICAgc2VsZi5jb25maWcuX2VuYWJsZSA9IHBhcnNlRGF0ZVJ1bGVzKGRhdGVzKTsKICAgICAgICAgICAgICB9LAogICAgICAgICAgfSk7CiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2VsZi5jb25maWcsICJkaXNhYmxlIiwgewogICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gc2VsZi5jb25maWcuX2Rpc2FibGU7IH0sCiAgICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAoZGF0ZXMpIHsKICAgICAgICAgICAgICAgICAgc2VsZi5jb25maWcuX2Rpc2FibGUgPSBwYXJzZURhdGVSdWxlcyhkYXRlcyk7CiAgICAgICAgICAgICAgfSwKICAgICAgICAgIH0pOwogICAgICAgICAgdmFyIHRpbWVNb2RlID0gdXNlckNvbmZpZy5tb2RlID09PSAidGltZSI7CiAgICAgICAgICBpZiAoIXVzZXJDb25maWcuZGF0ZUZvcm1hdCAmJiAodXNlckNvbmZpZy5lbmFibGVUaW1lIHx8IHRpbWVNb2RlKSkgewogICAgICAgICAgICAgIHZhciBkZWZhdWx0RGF0ZUZvcm1hdCA9IGZsYXRwaWNrci5kZWZhdWx0Q29uZmlnLmRhdGVGb3JtYXQgfHwgZGVmYXVsdHMuZGF0ZUZvcm1hdDsKICAgICAgICAgICAgICBmb3JtYXRzLmRhdGVGb3JtYXQgPQogICAgICAgICAgICAgICAgICB1c2VyQ29uZmlnLm5vQ2FsZW5kYXIgfHwgdGltZU1vZGUKICAgICAgICAgICAgICAgICAgICAgID8gIkg6aSIgKyAodXNlckNvbmZpZy5lbmFibGVTZWNvbmRzID8gIjpTIiA6ICIiKQogICAgICAgICAgICAgICAgICAgICAgOiBkZWZhdWx0RGF0ZUZvcm1hdCArICIgSDppIiArICh1c2VyQ29uZmlnLmVuYWJsZVNlY29uZHMgPyAiOlMiIDogIiIpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHVzZXJDb25maWcuYWx0SW5wdXQgJiYKICAgICAgICAgICAgICAodXNlckNvbmZpZy5lbmFibGVUaW1lIHx8IHRpbWVNb2RlKSAmJgogICAgICAgICAgICAgICF1c2VyQ29uZmlnLmFsdEZvcm1hdCkgewogICAgICAgICAgICAgIHZhciBkZWZhdWx0QWx0Rm9ybWF0ID0gZmxhdHBpY2tyLmRlZmF1bHRDb25maWcuYWx0Rm9ybWF0IHx8IGRlZmF1bHRzLmFsdEZvcm1hdDsKICAgICAgICAgICAgICBmb3JtYXRzLmFsdEZvcm1hdCA9CiAgICAgICAgICAgICAgICAgIHVzZXJDb25maWcubm9DYWxlbmRhciB8fCB0aW1lTW9kZQogICAgICAgICAgICAgICAgICAgICAgPyAiaDppIiArICh1c2VyQ29uZmlnLmVuYWJsZVNlY29uZHMgPyAiOlMgSyIgOiAiIEsiKQogICAgICAgICAgICAgICAgICAgICAgOiBkZWZhdWx0QWx0Rm9ybWF0ICsgKCIgaDppIiArICh1c2VyQ29uZmlnLmVuYWJsZVNlY29uZHMgPyAiOlMiIDogIiIpICsgIiBLIik7CiAgICAgICAgICB9CiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2VsZi5jb25maWcsICJtaW5EYXRlIiwgewogICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gc2VsZi5jb25maWcuX21pbkRhdGU7IH0sCiAgICAgICAgICAgICAgc2V0OiBtaW5NYXhEYXRlU2V0dGVyKCJtaW4iKSwKICAgICAgICAgIH0pOwogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNlbGYuY29uZmlnLCAibWF4RGF0ZSIsIHsKICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNlbGYuY29uZmlnLl9tYXhEYXRlOyB9LAogICAgICAgICAgICAgIHNldDogbWluTWF4RGF0ZVNldHRlcigibWF4IiksCiAgICAgICAgICB9KTsKICAgICAgICAgIHZhciBtaW5NYXhUaW1lU2V0dGVyID0gZnVuY3Rpb24gKHR5cGUpIHsgcmV0dXJuIGZ1bmN0aW9uICh2YWwpIHsKICAgICAgICAgICAgICBzZWxmLmNvbmZpZ1t0eXBlID09PSAibWluIiA/ICJfbWluVGltZSIgOiAiX21heFRpbWUiXSA9IHNlbGYucGFyc2VEYXRlKHZhbCwgIkg6aTpTIik7CiAgICAgICAgICB9OyB9OwogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNlbGYuY29uZmlnLCAibWluVGltZSIsIHsKICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNlbGYuY29uZmlnLl9taW5UaW1lOyB9LAogICAgICAgICAgICAgIHNldDogbWluTWF4VGltZVNldHRlcigibWluIiksCiAgICAgICAgICB9KTsKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzZWxmLmNvbmZpZywgIm1heFRpbWUiLCB7CiAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBzZWxmLmNvbmZpZy5fbWF4VGltZTsgfSwKICAgICAgICAgICAgICBzZXQ6IG1pbk1heFRpbWVTZXR0ZXIoIm1heCIpLAogICAgICAgICAgfSk7CiAgICAgICAgICBpZiAodXNlckNvbmZpZy5tb2RlID09PSAidGltZSIpIHsKICAgICAgICAgICAgICBzZWxmLmNvbmZpZy5ub0NhbGVuZGFyID0gdHJ1ZTsKICAgICAgICAgICAgICBzZWxmLmNvbmZpZy5lbmFibGVUaW1lID0gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICAgIE9iamVjdC5hc3NpZ24oc2VsZi5jb25maWcsIGZvcm1hdHMsIHVzZXJDb25maWcpOwogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBib29sT3B0cy5sZW5ndGg7IGkrKykKICAgICAgICAgICAgICBzZWxmLmNvbmZpZ1tib29sT3B0c1tpXV0gPQogICAgICAgICAgICAgICAgICBzZWxmLmNvbmZpZ1tib29sT3B0c1tpXV0gPT09IHRydWUgfHwKICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY29uZmlnW2Jvb2xPcHRzW2ldXSA9PT0gInRydWUiOwogICAgICAgICAgSE9PS1MuZmlsdGVyKGZ1bmN0aW9uIChob29rKSB7IHJldHVybiBzZWxmLmNvbmZpZ1tob29rXSAhPT0gdW5kZWZpbmVkOyB9KS5mb3JFYWNoKGZ1bmN0aW9uIChob29rKSB7CiAgICAgICAgICAgICAgc2VsZi5jb25maWdbaG9va10gPSBhcnJheWlmeShzZWxmLmNvbmZpZ1tob29rXSB8fCBbXSkubWFwKGJpbmRUb0luc3RhbmNlKTsKICAgICAgICAgIH0pOwogICAgICAgICAgc2VsZi5pc01vYmlsZSA9CiAgICAgICAgICAgICAgIXNlbGYuY29uZmlnLmRpc2FibGVNb2JpbGUgJiYKICAgICAgICAgICAgICAgICAgIXNlbGYuY29uZmlnLmlubGluZSAmJgogICAgICAgICAgICAgICAgICBzZWxmLmNvbmZpZy5tb2RlID09PSAic2luZ2xlIiAmJgogICAgICAgICAgICAgICAgICAhc2VsZi5jb25maWcuZGlzYWJsZS5sZW5ndGggJiYKICAgICAgICAgICAgICAgICAgIXNlbGYuY29uZmlnLmVuYWJsZSAmJgogICAgICAgICAgICAgICAgICAhc2VsZi5jb25maWcud2Vla051bWJlcnMgJiYKICAgICAgICAgICAgICAgICAgL0FuZHJvaWR8d2ViT1N8aVBob25lfGlQYWR8aVBvZHxCbGFja0JlcnJ5fElFTW9iaWxlfE9wZXJhIE1pbmkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpOwogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWxmLmNvbmZpZy5wbHVnaW5zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgdmFyIHBsdWdpbkNvbmYgPSBzZWxmLmNvbmZpZy5wbHVnaW5zW2ldKHNlbGYpIHx8IHt9OwogICAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBwbHVnaW5Db25mKSB7CiAgICAgICAgICAgICAgICAgIGlmIChIT09LUy5pbmRleE9mKGtleSkgPiAtMSkgewogICAgICAgICAgICAgICAgICAgICAgc2VsZi5jb25maWdba2V5XSA9IGFycmF5aWZ5KHBsdWdpbkNvbmZba2V5XSkKICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKGJpbmRUb0luc3RhbmNlKQogICAgICAgICAgICAgICAgICAgICAgICAgIC5jb25jYXQoc2VsZi5jb25maWdba2V5XSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIHVzZXJDb25maWdba2V5XSA9PT0gInVuZGVmaW5lZCIpCiAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNvbmZpZ1trZXldID0gcGx1Z2luQ29uZltrZXldOwogICAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGlmICghdXNlckNvbmZpZy5hbHRJbnB1dENsYXNzKSB7CiAgICAgICAgICAgICAgc2VsZi5jb25maWcuYWx0SW5wdXRDbGFzcyA9CiAgICAgICAgICAgICAgICAgIGdldElucHV0RWxlbSgpLmNsYXNzTmFtZSArICIgIiArIHNlbGYuY29uZmlnLmFsdElucHV0Q2xhc3M7CiAgICAgICAgICB9CiAgICAgICAgICB0cmlnZ2VyRXZlbnQoIm9uUGFyc2VDb25maWciKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBnZXRJbnB1dEVsZW0oKSB7CiAgICAgICAgICByZXR1cm4gc2VsZi5jb25maWcud3JhcAogICAgICAgICAgICAgID8gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCJbZGF0YS1pbnB1dF0iKQogICAgICAgICAgICAgIDogZWxlbWVudDsKICAgICAgfQogICAgICBmdW5jdGlvbiBzZXR1cExvY2FsZSgpIHsKICAgICAgICAgIGlmICh0eXBlb2Ygc2VsZi5jb25maWcubG9jYWxlICE9PSAib2JqZWN0IiAmJgogICAgICAgICAgICAgIHR5cGVvZiBmbGF0cGlja3IubDEwbnNbc2VsZi5jb25maWcubG9jYWxlXSA9PT0gInVuZGVmaW5lZCIpCiAgICAgICAgICAgICAgc2VsZi5jb25maWcuZXJyb3JIYW5kbGVyKG5ldyBFcnJvcigiZmxhdHBpY2tyOiBpbnZhbGlkIGxvY2FsZSAiICsgc2VsZi5jb25maWcubG9jYWxlKSk7CiAgICAgICAgICBzZWxmLmwxMG4gPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgZmxhdHBpY2tyLmwxMG5zLmRlZmF1bHQpLCAodHlwZW9mIHNlbGYuY29uZmlnLmxvY2FsZSA9PT0gIm9iamVjdCIKICAgICAgICAgICAgICA/IHNlbGYuY29uZmlnLmxvY2FsZQogICAgICAgICAgICAgIDogc2VsZi5jb25maWcubG9jYWxlICE9PSAiZGVmYXVsdCIKICAgICAgICAgICAgICAgICAgPyBmbGF0cGlja3IubDEwbnNbc2VsZi5jb25maWcubG9jYWxlXQogICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZCkpOwogICAgICAgICAgdG9rZW5SZWdleC5EID0gIigiICsgc2VsZi5sMTBuLndlZWtkYXlzLnNob3J0aGFuZC5qb2luKCJ8IikgKyAiKSI7CiAgICAgICAgICB0b2tlblJlZ2V4LmwgPSAiKCIgKyBzZWxmLmwxMG4ud2Vla2RheXMubG9uZ2hhbmQuam9pbigifCIpICsgIikiOwogICAgICAgICAgdG9rZW5SZWdleC5NID0gIigiICsgc2VsZi5sMTBuLm1vbnRocy5zaG9ydGhhbmQuam9pbigifCIpICsgIikiOwogICAgICAgICAgdG9rZW5SZWdleC5GID0gIigiICsgc2VsZi5sMTBuLm1vbnRocy5sb25naGFuZC5qb2luKCJ8IikgKyAiKSI7CiAgICAgICAgICB0b2tlblJlZ2V4LksgPSAiKCIgKyBzZWxmLmwxMG4uYW1QTVswXSArICJ8IiArIHNlbGYubDEwbi5hbVBNWzFdICsgInwiICsgc2VsZi5sMTBuLmFtUE1bMF0udG9Mb3dlckNhc2UoKSArICJ8IiArIHNlbGYubDEwbi5hbVBNWzFdLnRvTG93ZXJDYXNlKCkgKyAiKSI7CiAgICAgICAgICB2YXIgdXNlckNvbmZpZyA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCBpbnN0YW5jZUNvbmZpZyksIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZWxlbWVudC5kYXRhc2V0IHx8IHt9KSkpOwogICAgICAgICAgaWYgKHVzZXJDb25maWcudGltZV8yNGhyID09PSB1bmRlZmluZWQgJiYKICAgICAgICAgICAgICBmbGF0cGlja3IuZGVmYXVsdENvbmZpZy50aW1lXzI0aHIgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgIHNlbGYuY29uZmlnLnRpbWVfMjRociA9IHNlbGYubDEwbi50aW1lXzI0aHI7CiAgICAgICAgICB9CiAgICAgICAgICBzZWxmLmZvcm1hdERhdGUgPSBjcmVhdGVEYXRlRm9ybWF0dGVyKHNlbGYpOwogICAgICAgICAgc2VsZi5wYXJzZURhdGUgPSBjcmVhdGVEYXRlUGFyc2VyKHsgY29uZmlnOiBzZWxmLmNvbmZpZywgbDEwbjogc2VsZi5sMTBuIH0pOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHBvc2l0aW9uQ2FsZW5kYXIoY3VzdG9tUG9zaXRpb25FbGVtZW50KSB7CiAgICAgICAgICBpZiAodHlwZW9mIHNlbGYuY29uZmlnLnBvc2l0aW9uID09PSAiZnVuY3Rpb24iKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHZvaWQgc2VsZi5jb25maWcucG9zaXRpb24oc2VsZiwgY3VzdG9tUG9zaXRpb25FbGVtZW50KTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChzZWxmLmNhbGVuZGFyQ29udGFpbmVyID09PSB1bmRlZmluZWQpCiAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgdHJpZ2dlckV2ZW50KCJvblByZUNhbGVuZGFyUG9zaXRpb24iKTsKICAgICAgICAgIHZhciBwb3NpdGlvbkVsZW1lbnQgPSBjdXN0b21Qb3NpdGlvbkVsZW1lbnQgfHwgc2VsZi5fcG9zaXRpb25FbGVtZW50OwogICAgICAgICAgdmFyIGNhbGVuZGFySGVpZ2h0ID0gQXJyYXkucHJvdG90eXBlLnJlZHVjZS5jYWxsKHNlbGYuY2FsZW5kYXJDb250YWluZXIuY2hpbGRyZW4sIChmdW5jdGlvbiAoYWNjLCBjaGlsZCkgeyByZXR1cm4gYWNjICsgY2hpbGQub2Zmc2V0SGVpZ2h0OyB9KSwgMCksIGNhbGVuZGFyV2lkdGggPSBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLm9mZnNldFdpZHRoLCBjb25maWdQb3MgPSBzZWxmLmNvbmZpZy5wb3NpdGlvbi5zcGxpdCgiICIpLCBjb25maWdQb3NWZXJ0aWNhbCA9IGNvbmZpZ1Bvc1swXSwgY29uZmlnUG9zSG9yaXpvbnRhbCA9IGNvbmZpZ1Bvcy5sZW5ndGggPiAxID8gY29uZmlnUG9zWzFdIDogbnVsbCwgaW5wdXRCb3VuZHMgPSBwb3NpdGlvbkVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksIGRpc3RhbmNlRnJvbUJvdHRvbSA9IHdpbmRvdy5pbm5lckhlaWdodCAtIGlucHV0Qm91bmRzLmJvdHRvbSwgc2hvd09uVG9wID0gY29uZmlnUG9zVmVydGljYWwgPT09ICJhYm92ZSIgfHwKICAgICAgICAgICAgICAoY29uZmlnUG9zVmVydGljYWwgIT09ICJiZWxvdyIgJiYKICAgICAgICAgICAgICAgICAgZGlzdGFuY2VGcm9tQm90dG9tIDwgY2FsZW5kYXJIZWlnaHQgJiYKICAgICAgICAgICAgICAgICAgaW5wdXRCb3VuZHMudG9wID4gY2FsZW5kYXJIZWlnaHQpOwogICAgICAgICAgdmFyIHRvcCA9IHdpbmRvdy5wYWdlWU9mZnNldCArCiAgICAgICAgICAgICAgaW5wdXRCb3VuZHMudG9wICsKICAgICAgICAgICAgICAoIXNob3dPblRvcCA/IHBvc2l0aW9uRWxlbWVudC5vZmZzZXRIZWlnaHQgKyAyIDogLWNhbGVuZGFySGVpZ2h0IC0gMik7CiAgICAgICAgICB0b2dnbGVDbGFzcyhzZWxmLmNhbGVuZGFyQ29udGFpbmVyLCAiYXJyb3dUb3AiLCAhc2hvd09uVG9wKTsKICAgICAgICAgIHRvZ2dsZUNsYXNzKHNlbGYuY2FsZW5kYXJDb250YWluZXIsICJhcnJvd0JvdHRvbSIsIHNob3dPblRvcCk7CiAgICAgICAgICBpZiAoc2VsZi5jb25maWcuaW5saW5lKQogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIHZhciBsZWZ0ID0gd2luZG93LnBhZ2VYT2Zmc2V0ICsgaW5wdXRCb3VuZHMubGVmdDsKICAgICAgICAgIHZhciBpc0NlbnRlciA9IGZhbHNlOwogICAgICAgICAgdmFyIGlzUmlnaHQgPSBmYWxzZTsKICAgICAgICAgIGlmIChjb25maWdQb3NIb3Jpem9udGFsID09PSAiY2VudGVyIikgewogICAgICAgICAgICAgIGxlZnQgLT0gKGNhbGVuZGFyV2lkdGggLSBpbnB1dEJvdW5kcy53aWR0aCkgLyAyOwogICAgICAgICAgICAgIGlzQ2VudGVyID0gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICAgIGVsc2UgaWYgKGNvbmZpZ1Bvc0hvcml6b250YWwgPT09ICJyaWdodCIpIHsKICAgICAgICAgICAgICBsZWZ0IC09IGNhbGVuZGFyV2lkdGggLSBpbnB1dEJvdW5kcy53aWR0aDsKICAgICAgICAgICAgICBpc1JpZ2h0ID0gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICAgIHRvZ2dsZUNsYXNzKHNlbGYuY2FsZW5kYXJDb250YWluZXIsICJhcnJvd0xlZnQiLCAhaXNDZW50ZXIgJiYgIWlzUmlnaHQpOwogICAgICAgICAgdG9nZ2xlQ2xhc3Moc2VsZi5jYWxlbmRhckNvbnRhaW5lciwgImFycm93Q2VudGVyIiwgaXNDZW50ZXIpOwogICAgICAgICAgdG9nZ2xlQ2xhc3Moc2VsZi5jYWxlbmRhckNvbnRhaW5lciwgImFycm93UmlnaHQiLCBpc1JpZ2h0KTsKICAgICAgICAgIHZhciByaWdodCA9IHdpbmRvdy5kb2N1bWVudC5ib2R5Lm9mZnNldFdpZHRoIC0KICAgICAgICAgICAgICAod2luZG93LnBhZ2VYT2Zmc2V0ICsgaW5wdXRCb3VuZHMucmlnaHQpOwogICAgICAgICAgdmFyIHJpZ2h0TW9zdCA9IGxlZnQgKyBjYWxlbmRhcldpZHRoID4gd2luZG93LmRvY3VtZW50LmJvZHkub2Zmc2V0V2lkdGg7CiAgICAgICAgICB2YXIgY2VudGVyTW9zdCA9IHJpZ2h0ICsgY2FsZW5kYXJXaWR0aCA+IHdpbmRvdy5kb2N1bWVudC5ib2R5Lm9mZnNldFdpZHRoOwogICAgICAgICAgdG9nZ2xlQ2xhc3Moc2VsZi5jYWxlbmRhckNvbnRhaW5lciwgInJpZ2h0TW9zdCIsIHJpZ2h0TW9zdCk7CiAgICAgICAgICBpZiAoc2VsZi5jb25maWcuc3RhdGljKQogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuc3R5bGUudG9wID0gdG9wICsgInB4IjsKICAgICAgICAgIGlmICghcmlnaHRNb3N0KSB7CiAgICAgICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5zdHlsZS5sZWZ0ID0gbGVmdCArICJweCI7CiAgICAgICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5zdHlsZS5yaWdodCA9ICJhdXRvIjsKICAgICAgICAgIH0KICAgICAgICAgIGVsc2UgaWYgKCFjZW50ZXJNb3N0KSB7CiAgICAgICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5zdHlsZS5sZWZ0ID0gImF1dG8iOwogICAgICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuc3R5bGUucmlnaHQgPSByaWdodCArICJweCI7CiAgICAgICAgICB9CiAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICB2YXIgZG9jID0gZ2V0RG9jdW1lbnRTdHlsZVNoZWV0KCk7CiAgICAgICAgICAgICAgaWYgKGRvYyA9PT0gdW5kZWZpbmVkKQogICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgdmFyIGJvZHlXaWR0aCA9IHdpbmRvdy5kb2N1bWVudC5ib2R5Lm9mZnNldFdpZHRoOwogICAgICAgICAgICAgIHZhciBjZW50ZXJMZWZ0ID0gTWF0aC5tYXgoMCwgYm9keVdpZHRoIC8gMiAtIGNhbGVuZGFyV2lkdGggLyAyKTsKICAgICAgICAgICAgICB2YXIgY2VudGVyQmVmb3JlID0gIi5mbGF0cGlja3ItY2FsZW5kYXIuY2VudGVyTW9zdDpiZWZvcmUiOwogICAgICAgICAgICAgIHZhciBjZW50ZXJBZnRlciA9ICIuZmxhdHBpY2tyLWNhbGVuZGFyLmNlbnRlck1vc3Q6YWZ0ZXIiOwogICAgICAgICAgICAgIHZhciBjZW50ZXJJbmRleCA9IGRvYy5jc3NSdWxlcy5sZW5ndGg7CiAgICAgICAgICAgICAgdmFyIGNlbnRlclN0eWxlID0gIntsZWZ0OiIgKyBpbnB1dEJvdW5kcy5sZWZ0ICsgInB4O3JpZ2h0OmF1dG87fSI7CiAgICAgICAgICAgICAgdG9nZ2xlQ2xhc3Moc2VsZi5jYWxlbmRhckNvbnRhaW5lciwgInJpZ2h0TW9zdCIsIGZhbHNlKTsKICAgICAgICAgICAgICB0b2dnbGVDbGFzcyhzZWxmLmNhbGVuZGFyQ29udGFpbmVyLCAiY2VudGVyTW9zdCIsIHRydWUpOwogICAgICAgICAgICAgIGRvYy5pbnNlcnRSdWxlKGNlbnRlckJlZm9yZSArICIsIiArIGNlbnRlckFmdGVyICsgY2VudGVyU3R5bGUsIGNlbnRlckluZGV4KTsKICAgICAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnN0eWxlLmxlZnQgPSBjZW50ZXJMZWZ0ICsgInB4IjsKICAgICAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnN0eWxlLnJpZ2h0ID0gImF1dG8iOwogICAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIGdldERvY3VtZW50U3R5bGVTaGVldCgpIHsKICAgICAgICAgIHZhciBlZGl0YWJsZVNoZWV0ID0gbnVsbDsKICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZG9jdW1lbnQuc3R5bGVTaGVldHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICB2YXIgc2hlZXQgPSBkb2N1bWVudC5zdHlsZVNoZWV0c1tpXTsKICAgICAgICAgICAgICBpZiAoIXNoZWV0LmNzc1J1bGVzKQogICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICBzaGVldC5jc3NSdWxlczsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgY2F0Y2ggKGVycikgewogICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgZWRpdGFibGVTaGVldCA9IHNoZWV0OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGVkaXRhYmxlU2hlZXQgIT0gbnVsbCA/IGVkaXRhYmxlU2hlZXQgOiBjcmVhdGVTdHlsZVNoZWV0KCk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gY3JlYXRlU3R5bGVTaGVldCgpIHsKICAgICAgICAgIHZhciBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIik7CiAgICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlKTsKICAgICAgICAgIHJldHVybiBzdHlsZS5zaGVldDsKICAgICAgfQogICAgICBmdW5jdGlvbiByZWRyYXcoKSB7CiAgICAgICAgICBpZiAoc2VsZi5jb25maWcubm9DYWxlbmRhciB8fCBzZWxmLmlzTW9iaWxlKQogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIGJ1aWxkTW9udGhTd2l0Y2goKTsKICAgICAgICAgIHVwZGF0ZU5hdmlnYXRpb25DdXJyZW50TW9udGgoKTsKICAgICAgICAgIGJ1aWxkRGF5cygpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGZvY3VzQW5kQ2xvc2UoKSB7CiAgICAgICAgICBzZWxmLl9pbnB1dC5mb2N1cygpOwogICAgICAgICAgaWYgKHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIk1TSUUiKSAhPT0gLTEgfHwKICAgICAgICAgICAgICBuYXZpZ2F0b3IubXNNYXhUb3VjaFBvaW50cyAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgc2V0VGltZW91dChzZWxmLmNsb3NlLCAwKTsKICAgICAgICAgIH0KICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgIHNlbGYuY2xvc2UoKTsKICAgICAgICAgIH0KICAgICAgfQogICAgICBmdW5jdGlvbiBzZWxlY3REYXRlKGUpIHsKICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICB2YXIgaXNTZWxlY3RhYmxlID0gZnVuY3Rpb24gKGRheSkgewogICAgICAgICAgICAgIHJldHVybiBkYXkuY2xhc3NMaXN0ICYmCiAgICAgICAgICAgICAgICAgIGRheS5jbGFzc0xpc3QuY29udGFpbnMoImZsYXRwaWNrci1kYXkiKSAmJgogICAgICAgICAgICAgICAgICAhZGF5LmNsYXNzTGlzdC5jb250YWlucygiZmxhdHBpY2tyLWRpc2FibGVkIikgJiYKICAgICAgICAgICAgICAgICAgIWRheS5jbGFzc0xpc3QuY29udGFpbnMoIm5vdEFsbG93ZWQiKTsKICAgICAgICAgIH07CiAgICAgICAgICB2YXIgdCA9IGZpbmRQYXJlbnQoZ2V0RXZlbnRUYXJnZXQoZSksIGlzU2VsZWN0YWJsZSk7CiAgICAgICAgICBpZiAodCA9PT0gdW5kZWZpbmVkKQogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIHZhciB0YXJnZXQgPSB0OwogICAgICAgICAgdmFyIHNlbGVjdGVkRGF0ZSA9IChzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiA9IG5ldyBEYXRlKHRhcmdldC5kYXRlT2JqLmdldFRpbWUoKSkpOwogICAgICAgICAgdmFyIHNob3VsZENoYW5nZU1vbnRoID0gKHNlbGVjdGVkRGF0ZS5nZXRNb250aCgpIDwgc2VsZi5jdXJyZW50TW9udGggfHwKICAgICAgICAgICAgICBzZWxlY3RlZERhdGUuZ2V0TW9udGgoKSA+CiAgICAgICAgICAgICAgICAgIHNlbGYuY3VycmVudE1vbnRoICsgc2VsZi5jb25maWcuc2hvd01vbnRocyAtIDEpICYmCiAgICAgICAgICAgICAgc2VsZi5jb25maWcubW9kZSAhPT0gInJhbmdlIjsKICAgICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlRWxlbSA9IHRhcmdldDsKICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5tb2RlID09PSAic2luZ2xlIikKICAgICAgICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZXMgPSBbc2VsZWN0ZWREYXRlXTsKICAgICAgICAgIGVsc2UgaWYgKHNlbGYuY29uZmlnLm1vZGUgPT09ICJtdWx0aXBsZSIpIHsKICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWRJbmRleCA9IGlzRGF0ZVNlbGVjdGVkKHNlbGVjdGVkRGF0ZSk7CiAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkSW5kZXgpCiAgICAgICAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlcy5zcGxpY2UocGFyc2VJbnQoc2VsZWN0ZWRJbmRleCksIDEpOwogICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgc2VsZi5zZWxlY3RlZERhdGVzLnB1c2goc2VsZWN0ZWREYXRlKTsKICAgICAgICAgIH0KICAgICAgICAgIGVsc2UgaWYgKHNlbGYuY29uZmlnLm1vZGUgPT09ICJyYW5nZSIpIHsKICAgICAgICAgICAgICBpZiAoc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCA9PT0gMikgewogICAgICAgICAgICAgICAgICBzZWxmLmNsZWFyKGZhbHNlLCBmYWxzZSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqID0gc2VsZWN0ZWREYXRlOwogICAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlcy5wdXNoKHNlbGVjdGVkRGF0ZSk7CiAgICAgICAgICAgICAgaWYgKGNvbXBhcmVEYXRlcyhzZWxlY3RlZERhdGUsIHNlbGYuc2VsZWN0ZWREYXRlc1swXSwgdHJ1ZSkgIT09IDApCiAgICAgICAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlcy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiBhLmdldFRpbWUoKSAtIGIuZ2V0VGltZSgpOyB9KTsKICAgICAgICAgIH0KICAgICAgICAgIHNldEhvdXJzRnJvbUlucHV0cygpOwogICAgICAgICAgaWYgKHNob3VsZENoYW5nZU1vbnRoKSB7CiAgICAgICAgICAgICAgdmFyIGlzTmV3WWVhciA9IHNlbGYuY3VycmVudFllYXIgIT09IHNlbGVjdGVkRGF0ZS5nZXRGdWxsWWVhcigpOwogICAgICAgICAgICAgIHNlbGYuY3VycmVudFllYXIgPSBzZWxlY3RlZERhdGUuZ2V0RnVsbFllYXIoKTsKICAgICAgICAgICAgICBzZWxmLmN1cnJlbnRNb250aCA9IHNlbGVjdGVkRGF0ZS5nZXRNb250aCgpOwogICAgICAgICAgICAgIGlmIChpc05ld1llYXIpIHsKICAgICAgICAgICAgICAgICAgdHJpZ2dlckV2ZW50KCJvblllYXJDaGFuZ2UiKTsKICAgICAgICAgICAgICAgICAgYnVpbGRNb250aFN3aXRjaCgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB0cmlnZ2VyRXZlbnQoIm9uTW9udGhDaGFuZ2UiKTsKICAgICAgICAgIH0KICAgICAgICAgIHVwZGF0ZU5hdmlnYXRpb25DdXJyZW50TW9udGgoKTsKICAgICAgICAgIGJ1aWxkRGF5cygpOwogICAgICAgICAgdXBkYXRlVmFsdWUoKTsKICAgICAgICAgIGlmICghc2hvdWxkQ2hhbmdlTW9udGggJiYKICAgICAgICAgICAgICBzZWxmLmNvbmZpZy5tb2RlICE9PSAicmFuZ2UiICYmCiAgICAgICAgICAgICAgc2VsZi5jb25maWcuc2hvd01vbnRocyA9PT0gMSkKICAgICAgICAgICAgICBmb2N1c09uRGF5RWxlbSh0YXJnZXQpOwogICAgICAgICAgZWxzZSBpZiAoc2VsZi5zZWxlY3RlZERhdGVFbGVtICE9PSB1bmRlZmluZWQgJiYKICAgICAgICAgICAgICBzZWxmLmhvdXJFbGVtZW50ID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZUVsZW0gJiYgc2VsZi5zZWxlY3RlZERhdGVFbGVtLmZvY3VzKCk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoc2VsZi5ob3VyRWxlbWVudCAhPT0gdW5kZWZpbmVkKQogICAgICAgICAgICAgIHNlbGYuaG91ckVsZW1lbnQgIT09IHVuZGVmaW5lZCAmJiBzZWxmLmhvdXJFbGVtZW50LmZvY3VzKCk7CiAgICAgICAgICBpZiAoc2VsZi5jb25maWcuY2xvc2VPblNlbGVjdCkgewogICAgICAgICAgICAgIHZhciBzaW5nbGUgPSBzZWxmLmNvbmZpZy5tb2RlID09PSAic2luZ2xlIiAmJiAhc2VsZi5jb25maWcuZW5hYmxlVGltZTsKICAgICAgICAgICAgICB2YXIgcmFuZ2UgPSBzZWxmLmNvbmZpZy5tb2RlID09PSAicmFuZ2UiICYmCiAgICAgICAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggPT09IDIgJiYKICAgICAgICAgICAgICAgICAgIXNlbGYuY29uZmlnLmVuYWJsZVRpbWU7CiAgICAgICAgICAgICAgaWYgKHNpbmdsZSB8fCByYW5nZSkgewogICAgICAgICAgICAgICAgICBmb2N1c0FuZENsb3NlKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgdHJpZ2dlckNoYW5nZSgpOwogICAgICB9CiAgICAgIHZhciBDQUxMQkFDS1MgPSB7CiAgICAgICAgICBsb2NhbGU6IFtzZXR1cExvY2FsZSwgdXBkYXRlV2Vla2RheXNdLAogICAgICAgICAgc2hvd01vbnRoczogW2J1aWxkTW9udGhzLCBzZXRDYWxlbmRhcldpZHRoLCBidWlsZFdlZWtkYXlzXSwKICAgICAgICAgIG1pbkRhdGU6IFtqdW1wVG9EYXRlXSwKICAgICAgICAgIG1heERhdGU6IFtqdW1wVG9EYXRlXSwKICAgICAgICAgIHBvc2l0aW9uRWxlbWVudDogW3VwZGF0ZVBvc2l0aW9uRWxlbWVudF0sCiAgICAgICAgICBjbGlja09wZW5zOiBbCiAgICAgICAgICAgICAgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICBpZiAoc2VsZi5jb25maWcuY2xpY2tPcGVucyA9PT0gdHJ1ZSkgewogICAgICAgICAgICAgICAgICAgICAgYmluZChzZWxmLl9pbnB1dCwgImZvY3VzIiwgc2VsZi5vcGVuKTsKICAgICAgICAgICAgICAgICAgICAgIGJpbmQoc2VsZi5faW5wdXQsICJjbGljayIsIHNlbGYub3Blbik7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9pbnB1dC5yZW1vdmVFdmVudExpc3RlbmVyKCJmb2N1cyIsIHNlbGYub3Blbik7CiAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9pbnB1dC5yZW1vdmVFdmVudExpc3RlbmVyKCJjbGljayIsIHNlbGYub3Blbik7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9LAogICAgICAgICAgXSwKICAgICAgfTsKICAgICAgZnVuY3Rpb24gc2V0KG9wdGlvbiwgdmFsdWUpIHsKICAgICAgICAgIGlmIChvcHRpb24gIT09IG51bGwgJiYgdHlwZW9mIG9wdGlvbiA9PT0gIm9iamVjdCIpIHsKICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKHNlbGYuY29uZmlnLCBvcHRpb24pOwogICAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBvcHRpb24pIHsKICAgICAgICAgICAgICAgICAgaWYgKENBTExCQUNLU1trZXldICE9PSB1bmRlZmluZWQpCiAgICAgICAgICAgICAgICAgICAgICBDQUxMQkFDS1Nba2V5XS5mb3JFYWNoKGZ1bmN0aW9uICh4KSB7IHJldHVybiB4KCk7IH0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgIHNlbGYuY29uZmlnW29wdGlvbl0gPSB2YWx1ZTsKICAgICAgICAgICAgICBpZiAoQ0FMTEJBQ0tTW29wdGlvbl0gIT09IHVuZGVmaW5lZCkKICAgICAgICAgICAgICAgICAgQ0FMTEJBQ0tTW29wdGlvbl0uZm9yRWFjaChmdW5jdGlvbiAoeCkgeyByZXR1cm4geCgpOyB9KTsKICAgICAgICAgICAgICBlbHNlIGlmIChIT09LUy5pbmRleE9mKG9wdGlvbikgPiAtMSkKICAgICAgICAgICAgICAgICAgc2VsZi5jb25maWdbb3B0aW9uXSA9IGFycmF5aWZ5KHZhbHVlKTsKICAgICAgICAgIH0KICAgICAgICAgIHNlbGYucmVkcmF3KCk7CiAgICAgICAgICB1cGRhdGVWYWx1ZSh0cnVlKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBzZXRTZWxlY3RlZERhdGUoaW5wdXREYXRlLCBmb3JtYXQpIHsKICAgICAgICAgIHZhciBkYXRlcyA9IFtdOwogICAgICAgICAgaWYgKGlucHV0RGF0ZSBpbnN0YW5jZW9mIEFycmF5KQogICAgICAgICAgICAgIGRhdGVzID0gaW5wdXREYXRlLm1hcChmdW5jdGlvbiAoZCkgeyByZXR1cm4gc2VsZi5wYXJzZURhdGUoZCwgZm9ybWF0KTsgfSk7CiAgICAgICAgICBlbHNlIGlmIChpbnB1dERhdGUgaW5zdGFuY2VvZiBEYXRlIHx8IHR5cGVvZiBpbnB1dERhdGUgPT09ICJudW1iZXIiKQogICAgICAgICAgICAgIGRhdGVzID0gW3NlbGYucGFyc2VEYXRlKGlucHV0RGF0ZSwgZm9ybWF0KV07CiAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgaW5wdXREYXRlID09PSAic3RyaW5nIikgewogICAgICAgICAgICAgIHN3aXRjaCAoc2VsZi5jb25maWcubW9kZSkgewogICAgICAgICAgICAgICAgICBjYXNlICJzaW5nbGUiOgogICAgICAgICAgICAgICAgICBjYXNlICJ0aW1lIjoKICAgICAgICAgICAgICAgICAgICAgIGRhdGVzID0gW3NlbGYucGFyc2VEYXRlKGlucHV0RGF0ZSwgZm9ybWF0KV07CiAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgY2FzZSAibXVsdGlwbGUiOgogICAgICAgICAgICAgICAgICAgICAgZGF0ZXMgPSBpbnB1dERhdGUKICAgICAgICAgICAgICAgICAgICAgICAgICAuc3BsaXQoc2VsZi5jb25maWcuY29uanVuY3Rpb24pCiAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAoZGF0ZSkgeyByZXR1cm4gc2VsZi5wYXJzZURhdGUoZGF0ZSwgZm9ybWF0KTsgfSk7CiAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgY2FzZSAicmFuZ2UiOgogICAgICAgICAgICAgICAgICAgICAgZGF0ZXMgPSBpbnB1dERhdGUKICAgICAgICAgICAgICAgICAgICAgICAgICAuc3BsaXQoc2VsZi5sMTBuLnJhbmdlU2VwYXJhdG9yKQogICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKGRhdGUpIHsgcmV0dXJuIHNlbGYucGFyc2VEYXRlKGRhdGUsIGZvcm1hdCk7IH0pOwogICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgZWxzZQogICAgICAgICAgICAgIHNlbGYuY29uZmlnLmVycm9ySGFuZGxlcihuZXcgRXJyb3IoIkludmFsaWQgZGF0ZSBzdXBwbGllZDogIiArIEpTT04uc3RyaW5naWZ5KGlucHV0RGF0ZSkpKTsKICAgICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlcyA9IChzZWxmLmNvbmZpZy5hbGxvd0ludmFsaWRQcmVsb2FkCiAgICAgICAgICAgICAgPyBkYXRlcwogICAgICAgICAgICAgIDogZGF0ZXMuZmlsdGVyKGZ1bmN0aW9uIChkKSB7IHJldHVybiBkIGluc3RhbmNlb2YgRGF0ZSAmJiBpc0VuYWJsZWQoZCwgZmFsc2UpOyB9KSk7CiAgICAgICAgICBpZiAoc2VsZi5jb25maWcubW9kZSA9PT0gInJhbmdlIikKICAgICAgICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZXMuc29ydChmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gYS5nZXRUaW1lKCkgLSBiLmdldFRpbWUoKTsgfSk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gc2V0RGF0ZShkYXRlLCB0cmlnZ2VyQ2hhbmdlLCBmb3JtYXQpIHsKICAgICAgICAgIGlmICh0cmlnZ2VyQ2hhbmdlID09PSB2b2lkIDApIHsgdHJpZ2dlckNoYW5nZSA9IGZhbHNlOyB9CiAgICAgICAgICBpZiAoZm9ybWF0ID09PSB2b2lkIDApIHsgZm9ybWF0ID0gc2VsZi5jb25maWcuZGF0ZUZvcm1hdDsgfQogICAgICAgICAgaWYgKChkYXRlICE9PSAwICYmICFkYXRlKSB8fCAoZGF0ZSBpbnN0YW5jZW9mIEFycmF5ICYmIGRhdGUubGVuZ3RoID09PSAwKSkKICAgICAgICAgICAgICByZXR1cm4gc2VsZi5jbGVhcih0cmlnZ2VyQ2hhbmdlKTsKICAgICAgICAgIHNldFNlbGVjdGVkRGF0ZShkYXRlLCBmb3JtYXQpOwogICAgICAgICAgc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmogPQogICAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlc1tzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoIC0gMV07CiAgICAgICAgICBzZWxmLnJlZHJhdygpOwogICAgICAgICAganVtcFRvRGF0ZSh1bmRlZmluZWQsIHRyaWdnZXJDaGFuZ2UpOwogICAgICAgICAgc2V0SG91cnNGcm9tRGF0ZSgpOwogICAgICAgICAgaWYgKHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgICBzZWxmLmNsZWFyKGZhbHNlKTsKICAgICAgICAgIH0KICAgICAgICAgIHVwZGF0ZVZhbHVlKHRyaWdnZXJDaGFuZ2UpOwogICAgICAgICAgaWYgKHRyaWdnZXJDaGFuZ2UpCiAgICAgICAgICAgICAgdHJpZ2dlckV2ZW50KCJvbkNoYW5nZSIpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHBhcnNlRGF0ZVJ1bGVzKGFycikgewogICAgICAgICAgcmV0dXJuIGFycgogICAgICAgICAgICAgIC5zbGljZSgpCiAgICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAocnVsZSkgewogICAgICAgICAgICAgIGlmICh0eXBlb2YgcnVsZSA9PT0gInN0cmluZyIgfHwKICAgICAgICAgICAgICAgICAgdHlwZW9mIHJ1bGUgPT09ICJudW1iZXIiIHx8CiAgICAgICAgICAgICAgICAgIHJ1bGUgaW5zdGFuY2VvZiBEYXRlKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLnBhcnNlRGF0ZShydWxlLCB1bmRlZmluZWQsIHRydWUpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBlbHNlIGlmIChydWxlICYmCiAgICAgICAgICAgICAgICAgIHR5cGVvZiBydWxlID09PSAib2JqZWN0IiAmJgogICAgICAgICAgICAgICAgICBydWxlLmZyb20gJiYKICAgICAgICAgICAgICAgICAgcnVsZS50bykKICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgIGZyb206IHNlbGYucGFyc2VEYXRlKHJ1bGUuZnJvbSwgdW5kZWZpbmVkKSwKICAgICAgICAgICAgICAgICAgICAgIHRvOiBzZWxmLnBhcnNlRGF0ZShydWxlLnRvLCB1bmRlZmluZWQpLAogICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIHJldHVybiBydWxlOwogICAgICAgICAgfSkKICAgICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uICh4KSB7IHJldHVybiB4OyB9KTsKICAgICAgfQogICAgICBmdW5jdGlvbiBzZXR1cERhdGVzKCkgewogICAgICAgICAgc2VsZi5zZWxlY3RlZERhdGVzID0gW107CiAgICAgICAgICBzZWxmLm5vdyA9IHNlbGYucGFyc2VEYXRlKHNlbGYuY29uZmlnLm5vdykgfHwgbmV3IERhdGUoKTsKICAgICAgICAgIHZhciBwcmVsb2FkZWREYXRlID0gc2VsZi5jb25maWcuZGVmYXVsdERhdGUgfHwKICAgICAgICAgICAgICAoKHNlbGYuaW5wdXQubm9kZU5hbWUgPT09ICJJTlBVVCIgfHwKICAgICAgICAgICAgICAgICAgc2VsZi5pbnB1dC5ub2RlTmFtZSA9PT0gIlRFWFRBUkVBIikgJiYKICAgICAgICAgICAgICAgICAgc2VsZi5pbnB1dC5wbGFjZWhvbGRlciAmJgogICAgICAgICAgICAgICAgICBzZWxmLmlucHV0LnZhbHVlID09PSBzZWxmLmlucHV0LnBsYWNlaG9sZGVyCiAgICAgICAgICAgICAgICAgID8gbnVsbAogICAgICAgICAgICAgICAgICA6IHNlbGYuaW5wdXQudmFsdWUpOwogICAgICAgICAgaWYgKHByZWxvYWRlZERhdGUpCiAgICAgICAgICAgICAgc2V0U2VsZWN0ZWREYXRlKHByZWxvYWRlZERhdGUsIHNlbGYuY29uZmlnLmRhdGVGb3JtYXQpOwogICAgICAgICAgc2VsZi5faW5pdGlhbERhdGUgPQogICAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggPiAwCiAgICAgICAgICAgICAgICAgID8gc2VsZi5zZWxlY3RlZERhdGVzWzBdCiAgICAgICAgICAgICAgICAgIDogc2VsZi5jb25maWcubWluRGF0ZSAmJgogICAgICAgICAgICAgICAgICAgICAgc2VsZi5jb25maWcubWluRGF0ZS5nZXRUaW1lKCkgPiBzZWxmLm5vdy5nZXRUaW1lKCkKICAgICAgICAgICAgICAgICAgICAgID8gc2VsZi5jb25maWcubWluRGF0ZQogICAgICAgICAgICAgICAgICAgICAgOiBzZWxmLmNvbmZpZy5tYXhEYXRlICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jb25maWcubWF4RGF0ZS5nZXRUaW1lKCkgPCBzZWxmLm5vdy5nZXRUaW1lKCkKICAgICAgICAgICAgICAgICAgICAgICAgICA/IHNlbGYuY29uZmlnLm1heERhdGUKICAgICAgICAgICAgICAgICAgICAgICAgICA6IHNlbGYubm93OwogICAgICAgICAgc2VsZi5jdXJyZW50WWVhciA9IHNlbGYuX2luaXRpYWxEYXRlLmdldEZ1bGxZZWFyKCk7CiAgICAgICAgICBzZWxmLmN1cnJlbnRNb250aCA9IHNlbGYuX2luaXRpYWxEYXRlLmdldE1vbnRoKCk7CiAgICAgICAgICBpZiAoc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCA+IDApCiAgICAgICAgICAgICAgc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmogPSBzZWxmLnNlbGVjdGVkRGF0ZXNbMF07CiAgICAgICAgICBpZiAoc2VsZi5jb25maWcubWluVGltZSAhPT0gdW5kZWZpbmVkKQogICAgICAgICAgICAgIHNlbGYuY29uZmlnLm1pblRpbWUgPSBzZWxmLnBhcnNlRGF0ZShzZWxmLmNvbmZpZy5taW5UaW1lLCAiSDppIik7CiAgICAgICAgICBpZiAoc2VsZi5jb25maWcubWF4VGltZSAhPT0gdW5kZWZpbmVkKQogICAgICAgICAgICAgIHNlbGYuY29uZmlnLm1heFRpbWUgPSBzZWxmLnBhcnNlRGF0ZShzZWxmLmNvbmZpZy5tYXhUaW1lLCAiSDppIik7CiAgICAgICAgICBzZWxmLm1pbkRhdGVIYXNUaW1lID0KICAgICAgICAgICAgICAhIXNlbGYuY29uZmlnLm1pbkRhdGUgJiYKICAgICAgICAgICAgICAgICAgKHNlbGYuY29uZmlnLm1pbkRhdGUuZ2V0SG91cnMoKSA+IDAgfHwKICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY29uZmlnLm1pbkRhdGUuZ2V0TWludXRlcygpID4gMCB8fAogICAgICAgICAgICAgICAgICAgICAgc2VsZi5jb25maWcubWluRGF0ZS5nZXRTZWNvbmRzKCkgPiAwKTsKICAgICAgICAgIHNlbGYubWF4RGF0ZUhhc1RpbWUgPQogICAgICAgICAgICAgICEhc2VsZi5jb25maWcubWF4RGF0ZSAmJgogICAgICAgICAgICAgICAgICAoc2VsZi5jb25maWcubWF4RGF0ZS5nZXRIb3VycygpID4gMCB8fAogICAgICAgICAgICAgICAgICAgICAgc2VsZi5jb25maWcubWF4RGF0ZS5nZXRNaW51dGVzKCkgPiAwIHx8CiAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNvbmZpZy5tYXhEYXRlLmdldFNlY29uZHMoKSA+IDApOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHNldHVwSW5wdXRzKCkgewogICAgICAgICAgc2VsZi5pbnB1dCA9IGdldElucHV0RWxlbSgpOwogICAgICAgICAgaWYgKCFzZWxmLmlucHV0KSB7CiAgICAgICAgICAgICAgc2VsZi5jb25maWcuZXJyb3JIYW5kbGVyKG5ldyBFcnJvcigiSW52YWxpZCBpbnB1dCBlbGVtZW50IHNwZWNpZmllZCIpKTsKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICBzZWxmLmlucHV0Ll90eXBlID0gc2VsZi5pbnB1dC50eXBlOwogICAgICAgICAgc2VsZi5pbnB1dC50eXBlID0gInRleHQiOwogICAgICAgICAgc2VsZi5pbnB1dC5jbGFzc0xpc3QuYWRkKCJmbGF0cGlja3ItaW5wdXQiKTsKICAgICAgICAgIHNlbGYuX2lucHV0ID0gc2VsZi5pbnB1dDsKICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5hbHRJbnB1dCkgewogICAgICAgICAgICAgIHNlbGYuYWx0SW5wdXQgPSBjcmVhdGVFbGVtZW50KHNlbGYuaW5wdXQubm9kZU5hbWUsIHNlbGYuY29uZmlnLmFsdElucHV0Q2xhc3MpOwogICAgICAgICAgICAgIHNlbGYuX2lucHV0ID0gc2VsZi5hbHRJbnB1dDsKICAgICAgICAgICAgICBzZWxmLmFsdElucHV0LnBsYWNlaG9sZGVyID0gc2VsZi5pbnB1dC5wbGFjZWhvbGRlcjsKICAgICAgICAgICAgICBzZWxmLmFsdElucHV0LmRpc2FibGVkID0gc2VsZi5pbnB1dC5kaXNhYmxlZDsKICAgICAgICAgICAgICBzZWxmLmFsdElucHV0LnJlcXVpcmVkID0gc2VsZi5pbnB1dC5yZXF1aXJlZDsKICAgICAgICAgICAgICBzZWxmLmFsdElucHV0LnRhYkluZGV4ID0gc2VsZi5pbnB1dC50YWJJbmRleDsKICAgICAgICAgICAgICBzZWxmLmFsdElucHV0LnR5cGUgPSAidGV4dCI7CiAgICAgICAgICAgICAgc2VsZi5pbnB1dC5zZXRBdHRyaWJ1dGUoInR5cGUiLCAiaGlkZGVuIik7CiAgICAgICAgICAgICAgaWYgKCFzZWxmLmNvbmZpZy5zdGF0aWMgJiYgc2VsZi5pbnB1dC5wYXJlbnROb2RlKQogICAgICAgICAgICAgICAgICBzZWxmLmlucHV0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHNlbGYuYWx0SW5wdXQsIHNlbGYuaW5wdXQubmV4dFNpYmxpbmcpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKCFzZWxmLmNvbmZpZy5hbGxvd0lucHV0KQogICAgICAgICAgICAgIHNlbGYuX2lucHV0LnNldEF0dHJpYnV0ZSgicmVhZG9ubHkiLCAicmVhZG9ubHkiKTsKICAgICAgICAgIHVwZGF0ZVBvc2l0aW9uRWxlbWVudCgpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHVwZGF0ZVBvc2l0aW9uRWxlbWVudCgpIHsKICAgICAgICAgIHNlbGYuX3Bvc2l0aW9uRWxlbWVudCA9IHNlbGYuY29uZmlnLnBvc2l0aW9uRWxlbWVudCB8fCBzZWxmLl9pbnB1dDsKICAgICAgfQogICAgICBmdW5jdGlvbiBzZXR1cE1vYmlsZSgpIHsKICAgICAgICAgIHZhciBpbnB1dFR5cGUgPSBzZWxmLmNvbmZpZy5lbmFibGVUaW1lCiAgICAgICAgICAgICAgPyBzZWxmLmNvbmZpZy5ub0NhbGVuZGFyCiAgICAgICAgICAgICAgICAgID8gInRpbWUiCiAgICAgICAgICAgICAgICAgIDogImRhdGV0aW1lLWxvY2FsIgogICAgICAgICAgICAgIDogImRhdGUiOwogICAgICAgICAgc2VsZi5tb2JpbGVJbnB1dCA9IGNyZWF0ZUVsZW1lbnQoImlucHV0Iiwgc2VsZi5pbnB1dC5jbGFzc05hbWUgKyAiIGZsYXRwaWNrci1tb2JpbGUiKTsKICAgICAgICAgIHNlbGYubW9iaWxlSW5wdXQudGFiSW5kZXggPSAxOwogICAgICAgICAgc2VsZi5tb2JpbGVJbnB1dC50eXBlID0gaW5wdXRUeXBlOwogICAgICAgICAgc2VsZi5tb2JpbGVJbnB1dC5kaXNhYmxlZCA9IHNlbGYuaW5wdXQuZGlzYWJsZWQ7CiAgICAgICAgICBzZWxmLm1vYmlsZUlucHV0LnJlcXVpcmVkID0gc2VsZi5pbnB1dC5yZXF1aXJlZDsKICAgICAgICAgIHNlbGYubW9iaWxlSW5wdXQucGxhY2Vob2xkZXIgPSBzZWxmLmlucHV0LnBsYWNlaG9sZGVyOwogICAgICAgICAgc2VsZi5tb2JpbGVGb3JtYXRTdHIgPQogICAgICAgICAgICAgIGlucHV0VHlwZSA9PT0gImRhdGV0aW1lLWxvY2FsIgogICAgICAgICAgICAgICAgICA/ICJZLW0tZFxcVEg6aTpTIgogICAgICAgICAgICAgICAgICA6IGlucHV0VHlwZSA9PT0gImRhdGUiCiAgICAgICAgICAgICAgICAgICAgICA/ICJZLW0tZCIKICAgICAgICAgICAgICAgICAgICAgIDogIkg6aTpTIjsKICAgICAgICAgIGlmIChzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgIHNlbGYubW9iaWxlSW5wdXQuZGVmYXVsdFZhbHVlID0gc2VsZi5tb2JpbGVJbnB1dC52YWx1ZSA9IHNlbGYuZm9ybWF0RGF0ZShzZWxmLnNlbGVjdGVkRGF0ZXNbMF0sIHNlbGYubW9iaWxlRm9ybWF0U3RyKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5taW5EYXRlKQogICAgICAgICAgICAgIHNlbGYubW9iaWxlSW5wdXQubWluID0gc2VsZi5mb3JtYXREYXRlKHNlbGYuY29uZmlnLm1pbkRhdGUsICJZLW0tZCIpOwogICAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1heERhdGUpCiAgICAgICAgICAgICAgc2VsZi5tb2JpbGVJbnB1dC5tYXggPSBzZWxmLmZvcm1hdERhdGUoc2VsZi5jb25maWcubWF4RGF0ZSwgIlktbS1kIik7CiAgICAgICAgICBpZiAoc2VsZi5pbnB1dC5nZXRBdHRyaWJ1dGUoInN0ZXAiKSkKICAgICAgICAgICAgICBzZWxmLm1vYmlsZUlucHV0LnN0ZXAgPSBTdHJpbmcoc2VsZi5pbnB1dC5nZXRBdHRyaWJ1dGUoInN0ZXAiKSk7CiAgICAgICAgICBzZWxmLmlucHV0LnR5cGUgPSAiaGlkZGVuIjsKICAgICAgICAgIGlmIChzZWxmLmFsdElucHV0ICE9PSB1bmRlZmluZWQpCiAgICAgICAgICAgICAgc2VsZi5hbHRJbnB1dC50eXBlID0gImhpZGRlbiI7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIGlmIChzZWxmLmlucHV0LnBhcmVudE5vZGUpCiAgICAgICAgICAgICAgICAgIHNlbGYuaW5wdXQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoc2VsZi5tb2JpbGVJbnB1dCwgc2VsZi5pbnB1dC5uZXh0U2libGluZyk7CiAgICAgICAgICB9CiAgICAgICAgICBjYXRjaCAoX2EpIHsgfQogICAgICAgICAgYmluZChzZWxmLm1vYmlsZUlucHV0LCAiY2hhbmdlIiwgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICBzZWxmLnNldERhdGUoZ2V0RXZlbnRUYXJnZXQoZSkudmFsdWUsIGZhbHNlLCBzZWxmLm1vYmlsZUZvcm1hdFN0cik7CiAgICAgICAgICAgICAgdHJpZ2dlckV2ZW50KCJvbkNoYW5nZSIpOwogICAgICAgICAgICAgIHRyaWdnZXJFdmVudCgib25DbG9zZSIpOwogICAgICAgICAgfSk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gdG9nZ2xlKGUpIHsKICAgICAgICAgIGlmIChzZWxmLmlzT3BlbiA9PT0gdHJ1ZSkKICAgICAgICAgICAgICByZXR1cm4gc2VsZi5jbG9zZSgpOwogICAgICAgICAgc2VsZi5vcGVuKGUpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHRyaWdnZXJFdmVudChldmVudCwgZGF0YSkgewogICAgICAgICAgaWYgKHNlbGYuY29uZmlnID09PSB1bmRlZmluZWQpCiAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgdmFyIGhvb2tzID0gc2VsZi5jb25maWdbZXZlbnRdOwogICAgICAgICAgaWYgKGhvb2tzICE9PSB1bmRlZmluZWQgJiYgaG9va3MubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBob29rc1tpXSAmJiBpIDwgaG9va3MubGVuZ3RoOyBpKyspCiAgICAgICAgICAgICAgICAgIGhvb2tzW2ldKHNlbGYuc2VsZWN0ZWREYXRlcywgc2VsZi5pbnB1dC52YWx1ZSwgc2VsZiwgZGF0YSk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoZXZlbnQgPT09ICJvbkNoYW5nZSIpIHsKICAgICAgICAgICAgICBzZWxmLmlucHV0LmRpc3BhdGNoRXZlbnQoY3JlYXRlRXZlbnQoImNoYW5nZSIpKTsKICAgICAgICAgICAgICBzZWxmLmlucHV0LmRpc3BhdGNoRXZlbnQoY3JlYXRlRXZlbnQoImlucHV0IikpOwogICAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIGNyZWF0ZUV2ZW50KG5hbWUpIHsKICAgICAgICAgIHZhciBlID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoIkV2ZW50Iik7CiAgICAgICAgICBlLmluaXRFdmVudChuYW1lLCB0cnVlLCB0cnVlKTsKICAgICAgICAgIHJldHVybiBlOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGlzRGF0ZVNlbGVjdGVkKGRhdGUpIHsKICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgdmFyIHNlbGVjdGVkRGF0ZSA9IHNlbGYuc2VsZWN0ZWREYXRlc1tpXTsKICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWREYXRlIGluc3RhbmNlb2YgRGF0ZSAmJgogICAgICAgICAgICAgICAgICBjb21wYXJlRGF0ZXMoc2VsZWN0ZWREYXRlLCBkYXRlKSA9PT0gMCkKICAgICAgICAgICAgICAgICAgcmV0dXJuICIiICsgaTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBmdW5jdGlvbiBpc0RhdGVJblJhbmdlKGRhdGUpIHsKICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5tb2RlICE9PSAicmFuZ2UiIHx8IHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggPCAyKQogICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIHJldHVybiAoY29tcGFyZURhdGVzKGRhdGUsIHNlbGYuc2VsZWN0ZWREYXRlc1swXSkgPj0gMCAmJgogICAgICAgICAgICAgIGNvbXBhcmVEYXRlcyhkYXRlLCBzZWxmLnNlbGVjdGVkRGF0ZXNbMV0pIDw9IDApOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHVwZGF0ZU5hdmlnYXRpb25DdXJyZW50TW9udGgoKSB7CiAgICAgICAgICBpZiAoc2VsZi5jb25maWcubm9DYWxlbmRhciB8fCBzZWxmLmlzTW9iaWxlIHx8ICFzZWxmLm1vbnRoTmF2KQogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIHNlbGYueWVhckVsZW1lbnRzLmZvckVhY2goZnVuY3Rpb24gKHllYXJFbGVtZW50LCBpKSB7CiAgICAgICAgICAgICAgdmFyIGQgPSBuZXcgRGF0ZShzZWxmLmN1cnJlbnRZZWFyLCBzZWxmLmN1cnJlbnRNb250aCwgMSk7CiAgICAgICAgICAgICAgZC5zZXRNb250aChzZWxmLmN1cnJlbnRNb250aCArIGkpOwogICAgICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5zaG93TW9udGhzID4gMSB8fAogICAgICAgICAgICAgICAgICBzZWxmLmNvbmZpZy5tb250aFNlbGVjdG9yVHlwZSA9PT0gInN0YXRpYyIpIHsKICAgICAgICAgICAgICAgICAgc2VsZi5tb250aEVsZW1lbnRzW2ldLnRleHRDb250ZW50ID0KICAgICAgICAgICAgICAgICAgICAgIG1vbnRoVG9TdHIoZC5nZXRNb250aCgpLCBzZWxmLmNvbmZpZy5zaG9ydGhhbmRDdXJyZW50TW9udGgsIHNlbGYubDEwbikgKyAiICI7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICBzZWxmLm1vbnRoc0Ryb3Bkb3duQ29udGFpbmVyLnZhbHVlID0gZC5nZXRNb250aCgpLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHllYXJFbGVtZW50LnZhbHVlID0gZC5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHNlbGYuX2hpZGVQcmV2TW9udGhBcnJvdyA9CiAgICAgICAgICAgICAgc2VsZi5jb25maWcubWluRGF0ZSAhPT0gdW5kZWZpbmVkICYmCiAgICAgICAgICAgICAgICAgIChzZWxmLmN1cnJlbnRZZWFyID09PSBzZWxmLmNvbmZpZy5taW5EYXRlLmdldEZ1bGxZZWFyKCkKICAgICAgICAgICAgICAgICAgICAgID8gc2VsZi5jdXJyZW50TW9udGggPD0gc2VsZi5jb25maWcubWluRGF0ZS5nZXRNb250aCgpCiAgICAgICAgICAgICAgICAgICAgICA6IHNlbGYuY3VycmVudFllYXIgPCBzZWxmLmNvbmZpZy5taW5EYXRlLmdldEZ1bGxZZWFyKCkpOwogICAgICAgICAgc2VsZi5faGlkZU5leHRNb250aEFycm93ID0KICAgICAgICAgICAgICBzZWxmLmNvbmZpZy5tYXhEYXRlICE9PSB1bmRlZmluZWQgJiYKICAgICAgICAgICAgICAgICAgKHNlbGYuY3VycmVudFllYXIgPT09IHNlbGYuY29uZmlnLm1heERhdGUuZ2V0RnVsbFllYXIoKQogICAgICAgICAgICAgICAgICAgICAgPyBzZWxmLmN1cnJlbnRNb250aCArIDEgPiBzZWxmLmNvbmZpZy5tYXhEYXRlLmdldE1vbnRoKCkKICAgICAgICAgICAgICAgICAgICAgIDogc2VsZi5jdXJyZW50WWVhciA+IHNlbGYuY29uZmlnLm1heERhdGUuZ2V0RnVsbFllYXIoKSk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZ2V0RGF0ZVN0cihzcGVjaWZpY0Zvcm1hdCkgewogICAgICAgICAgdmFyIGZvcm1hdCA9IHNwZWNpZmljRm9ybWF0IHx8CiAgICAgICAgICAgICAgKHNlbGYuY29uZmlnLmFsdElucHV0ID8gc2VsZi5jb25maWcuYWx0Rm9ybWF0IDogc2VsZi5jb25maWcuZGF0ZUZvcm1hdCk7CiAgICAgICAgICByZXR1cm4gc2VsZi5zZWxlY3RlZERhdGVzCiAgICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAoZE9iaikgeyByZXR1cm4gc2VsZi5mb3JtYXREYXRlKGRPYmosIGZvcm1hdCk7IH0pCiAgICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoZCwgaSwgYXJyKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuY29uZmlnLm1vZGUgIT09ICJyYW5nZSIgfHwKICAgICAgICAgICAgICAgICAgc2VsZi5jb25maWcuZW5hYmxlVGltZSB8fAogICAgICAgICAgICAgICAgICBhcnIuaW5kZXhPZihkKSA9PT0gaTsKICAgICAgICAgIH0pCiAgICAgICAgICAgICAgLmpvaW4oc2VsZi5jb25maWcubW9kZSAhPT0gInJhbmdlIgogICAgICAgICAgICAgID8gc2VsZi5jb25maWcuY29uanVuY3Rpb24KICAgICAgICAgICAgICA6IHNlbGYubDEwbi5yYW5nZVNlcGFyYXRvcik7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gdXBkYXRlVmFsdWUodHJpZ2dlckNoYW5nZSkgewogICAgICAgICAgaWYgKHRyaWdnZXJDaGFuZ2UgPT09IHZvaWQgMCkgeyB0cmlnZ2VyQ2hhbmdlID0gdHJ1ZTsgfQogICAgICAgICAgaWYgKHNlbGYubW9iaWxlSW5wdXQgIT09IHVuZGVmaW5lZCAmJiBzZWxmLm1vYmlsZUZvcm1hdFN0cikgewogICAgICAgICAgICAgIHNlbGYubW9iaWxlSW5wdXQudmFsdWUgPQogICAgICAgICAgICAgICAgICBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiAhPT0gdW5kZWZpbmVkCiAgICAgICAgICAgICAgICAgICAgICA/IHNlbGYuZm9ybWF0RGF0ZShzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiwgc2VsZi5tb2JpbGVGb3JtYXRTdHIpCiAgICAgICAgICAgICAgICAgICAgICA6ICIiOwogICAgICAgICAgfQogICAgICAgICAgc2VsZi5pbnB1dC52YWx1ZSA9IGdldERhdGVTdHIoc2VsZi5jb25maWcuZGF0ZUZvcm1hdCk7CiAgICAgICAgICBpZiAoc2VsZi5hbHRJbnB1dCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgc2VsZi5hbHRJbnB1dC52YWx1ZSA9IGdldERhdGVTdHIoc2VsZi5jb25maWcuYWx0Rm9ybWF0KTsKICAgICAgICAgIH0KICAgICAgICAgIGlmICh0cmlnZ2VyQ2hhbmdlICE9PSBmYWxzZSkKICAgICAgICAgICAgICB0cmlnZ2VyRXZlbnQoIm9uVmFsdWVVcGRhdGUiKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBvbk1vbnRoTmF2Q2xpY2soZSkgewogICAgICAgICAgdmFyIGV2ZW50VGFyZ2V0ID0gZ2V0RXZlbnRUYXJnZXQoZSk7CiAgICAgICAgICB2YXIgaXNQcmV2TW9udGggPSBzZWxmLnByZXZNb250aE5hdi5jb250YWlucyhldmVudFRhcmdldCk7CiAgICAgICAgICB2YXIgaXNOZXh0TW9udGggPSBzZWxmLm5leHRNb250aE5hdi5jb250YWlucyhldmVudFRhcmdldCk7CiAgICAgICAgICBpZiAoaXNQcmV2TW9udGggfHwgaXNOZXh0TW9udGgpIHsKICAgICAgICAgICAgICBjaGFuZ2VNb250aChpc1ByZXZNb250aCA/IC0xIDogMSk7CiAgICAgICAgICB9CiAgICAgICAgICBlbHNlIGlmIChzZWxmLnllYXJFbGVtZW50cy5pbmRleE9mKGV2ZW50VGFyZ2V0KSA+PSAwKSB7CiAgICAgICAgICAgICAgZXZlbnRUYXJnZXQuc2VsZWN0KCk7CiAgICAgICAgICB9CiAgICAgICAgICBlbHNlIGlmIChldmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoImFycm93VXAiKSkgewogICAgICAgICAgICAgIHNlbGYuY2hhbmdlWWVhcihzZWxmLmN1cnJlbnRZZWFyICsgMSk7CiAgICAgICAgICB9CiAgICAgICAgICBlbHNlIGlmIChldmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoImFycm93RG93biIpKSB7CiAgICAgICAgICAgICAgc2VsZi5jaGFuZ2VZZWFyKHNlbGYuY3VycmVudFllYXIgLSAxKTsKICAgICAgICAgIH0KICAgICAgfQogICAgICBmdW5jdGlvbiB0aW1lV3JhcHBlcihlKSB7CiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICB2YXIgaXNLZXlEb3duID0gZS50eXBlID09PSAia2V5ZG93biIsIGV2ZW50VGFyZ2V0ID0gZ2V0RXZlbnRUYXJnZXQoZSksIGlucHV0ID0gZXZlbnRUYXJnZXQ7CiAgICAgICAgICBpZiAoc2VsZi5hbVBNICE9PSB1bmRlZmluZWQgJiYgZXZlbnRUYXJnZXQgPT09IHNlbGYuYW1QTSkgewogICAgICAgICAgICAgIHNlbGYuYW1QTS50ZXh0Q29udGVudCA9CiAgICAgICAgICAgICAgICAgIHNlbGYubDEwbi5hbVBNW2ludChzZWxmLmFtUE0udGV4dENvbnRlbnQgPT09IHNlbGYubDEwbi5hbVBNWzBdKV07CiAgICAgICAgICB9CiAgICAgICAgICB2YXIgbWluID0gcGFyc2VGbG9hdChpbnB1dC5nZXRBdHRyaWJ1dGUoIm1pbiIpKSwgbWF4ID0gcGFyc2VGbG9hdChpbnB1dC5nZXRBdHRyaWJ1dGUoIm1heCIpKSwgc3RlcCA9IHBhcnNlRmxvYXQoaW5wdXQuZ2V0QXR0cmlidXRlKCJzdGVwIikpLCBjdXJWYWx1ZSA9IHBhcnNlSW50KGlucHV0LnZhbHVlLCAxMCksIGRlbHRhID0gZS5kZWx0YSB8fAogICAgICAgICAgICAgIChpc0tleURvd24gPyAoZS53aGljaCA9PT0gMzggPyAxIDogLTEpIDogMCk7CiAgICAgICAgICB2YXIgbmV3VmFsdWUgPSBjdXJWYWx1ZSArIHN0ZXAgKiBkZWx0YTsKICAgICAgICAgIGlmICh0eXBlb2YgaW5wdXQudmFsdWUgIT09ICJ1bmRlZmluZWQiICYmIGlucHV0LnZhbHVlLmxlbmd0aCA9PT0gMikgewogICAgICAgICAgICAgIHZhciBpc0hvdXJFbGVtID0gaW5wdXQgPT09IHNlbGYuaG91ckVsZW1lbnQsIGlzTWludXRlRWxlbSA9IGlucHV0ID09PSBzZWxmLm1pbnV0ZUVsZW1lbnQ7CiAgICAgICAgICAgICAgaWYgKG5ld1ZhbHVlIDwgbWluKSB7CiAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlID0KICAgICAgICAgICAgICAgICAgICAgIG1heCArCiAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWUgKwogICAgICAgICAgICAgICAgICAgICAgICAgIGludCghaXNIb3VyRWxlbSkgKwogICAgICAgICAgICAgICAgICAgICAgICAgIChpbnQoaXNIb3VyRWxlbSkgJiYgaW50KCFzZWxmLmFtUE0pKTsKICAgICAgICAgICAgICAgICAgaWYgKGlzTWludXRlRWxlbSkKICAgICAgICAgICAgICAgICAgICAgIGluY3JlbWVudE51bUlucHV0KHVuZGVmaW5lZCwgLTEsIHNlbGYuaG91ckVsZW1lbnQpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBlbHNlIGlmIChuZXdWYWx1ZSA+IG1heCkgewogICAgICAgICAgICAgICAgICBuZXdWYWx1ZSA9CiAgICAgICAgICAgICAgICAgICAgICBpbnB1dCA9PT0gc2VsZi5ob3VyRWxlbWVudCA/IG5ld1ZhbHVlIC0gbWF4IC0gaW50KCFzZWxmLmFtUE0pIDogbWluOwogICAgICAgICAgICAgICAgICBpZiAoaXNNaW51dGVFbGVtKQogICAgICAgICAgICAgICAgICAgICAgaW5jcmVtZW50TnVtSW5wdXQodW5kZWZpbmVkLCAxLCBzZWxmLmhvdXJFbGVtZW50KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKHNlbGYuYW1QTSAmJgogICAgICAgICAgICAgICAgICBpc0hvdXJFbGVtICYmCiAgICAgICAgICAgICAgICAgIChzdGVwID09PSAxCiAgICAgICAgICAgICAgICAgICAgICA/IG5ld1ZhbHVlICsgY3VyVmFsdWUgPT09IDIzCiAgICAgICAgICAgICAgICAgICAgICA6IE1hdGguYWJzKG5ld1ZhbHVlIC0gY3VyVmFsdWUpID4gc3RlcCkpIHsKICAgICAgICAgICAgICAgICAgc2VsZi5hbVBNLnRleHRDb250ZW50ID0KICAgICAgICAgICAgICAgICAgICAgIHNlbGYubDEwbi5hbVBNW2ludChzZWxmLmFtUE0udGV4dENvbnRlbnQgPT09IHNlbGYubDEwbi5hbVBNWzBdKV07CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlucHV0LnZhbHVlID0gcGFkKG5ld1ZhbHVlKTsKICAgICAgICAgIH0KICAgICAgfQogICAgICBpbml0KCk7CiAgICAgIHJldHVybiBzZWxmOwogIH0KICBmdW5jdGlvbiBfZmxhdHBpY2tyKG5vZGVMaXN0LCBjb25maWcpIHsKICAgICAgdmFyIG5vZGVzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlCiAgICAgICAgICAuY2FsbChub2RlTGlzdCkKICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHggaW5zdGFuY2VvZiBIVE1MRWxlbWVudDsgfSk7CiAgICAgIHZhciBpbnN0YW5jZXMgPSBbXTsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBub2Rlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgdmFyIG5vZGUgPSBub2Rlc1tpXTsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgaWYgKG5vZGUuZ2V0QXR0cmlidXRlKCJkYXRhLWZwLW9taXQiKSAhPT0gbnVsbCkKICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgaWYgKG5vZGUuX2ZsYXRwaWNrciAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICAgIG5vZGUuX2ZsYXRwaWNrci5kZXN0cm95KCk7CiAgICAgICAgICAgICAgICAgIG5vZGUuX2ZsYXRwaWNrciA9IHVuZGVmaW5lZDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgbm9kZS5fZmxhdHBpY2tyID0gRmxhdHBpY2tySW5zdGFuY2Uobm9kZSwgY29uZmlnIHx8IHt9KTsKICAgICAgICAgICAgICBpbnN0YW5jZXMucHVzaChub2RlLl9mbGF0cGlja3IpOwogICAgICAgICAgfQogICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpOwogICAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBpbnN0YW5jZXMubGVuZ3RoID09PSAxID8gaW5zdGFuY2VzWzBdIDogaW5zdGFuY2VzOwogIH0KICBpZiAodHlwZW9mIEhUTUxFbGVtZW50ICE9PSAidW5kZWZpbmVkIiAmJgogICAgICB0eXBlb2YgSFRNTENvbGxlY3Rpb24gIT09ICJ1bmRlZmluZWQiICYmCiAgICAgIHR5cGVvZiBOb2RlTGlzdCAhPT0gInVuZGVmaW5lZCIpIHsKICAgICAgSFRNTENvbGxlY3Rpb24ucHJvdG90eXBlLmZsYXRwaWNrciA9IE5vZGVMaXN0LnByb3RvdHlwZS5mbGF0cGlja3IgPSBmdW5jdGlvbiAoY29uZmlnKSB7CiAgICAgICAgICByZXR1cm4gX2ZsYXRwaWNrcih0aGlzLCBjb25maWcpOwogICAgICB9OwogICAgICBIVE1MRWxlbWVudC5wcm90b3R5cGUuZmxhdHBpY2tyID0gZnVuY3Rpb24gKGNvbmZpZykgewogICAgICAgICAgcmV0dXJuIF9mbGF0cGlja3IoW3RoaXNdLCBjb25maWcpOwogICAgICB9OwogIH0KICB2YXIgZmxhdHBpY2tyID0gZnVuY3Rpb24gKHNlbGVjdG9yLCBjb25maWcpIHsKICAgICAgaWYgKHR5cGVvZiBzZWxlY3RvciA9PT0gInN0cmluZyIpIHsKICAgICAgICAgIHJldHVybiBfZmxhdHBpY2tyKHdpbmRvdy5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKSwgY29uZmlnKTsKICAgICAgfQogICAgICBlbHNlIGlmIChzZWxlY3RvciBpbnN0YW5jZW9mIE5vZGUpIHsKICAgICAgICAgIHJldHVybiBfZmxhdHBpY2tyKFtzZWxlY3Rvcl0sIGNvbmZpZyk7CiAgICAgIH0KICAgICAgZWxzZSB7CiAgICAgICAgICByZXR1cm4gX2ZsYXRwaWNrcihzZWxlY3RvciwgY29uZmlnKTsKICAgICAgfQogIH07CiAgZmxhdHBpY2tyLmRlZmF1bHRDb25maWcgPSB7fTsKICBmbGF0cGlja3IubDEwbnMgPSB7CiAgICAgIGVuOiBfX2Fzc2lnbih7fSwgZW5nbGlzaCksCiAgICAgIGRlZmF1bHQ6IF9fYXNzaWduKHt9LCBlbmdsaXNoKSwKICB9OwogIGZsYXRwaWNrci5sb2NhbGl6ZSA9IGZ1bmN0aW9uIChsMTBuKSB7CiAgICAgIGZsYXRwaWNrci5sMTBucy5kZWZhdWx0ID0gX19hc3NpZ24oX19hc3NpZ24oe30sIGZsYXRwaWNrci5sMTBucy5kZWZhdWx0KSwgbDEwbik7CiAgfTsKICBmbGF0cGlja3Iuc2V0RGVmYXVsdHMgPSBmdW5jdGlvbiAoY29uZmlnKSB7CiAgICAgIGZsYXRwaWNrci5kZWZhdWx0Q29uZmlnID0gX19hc3NpZ24oX19hc3NpZ24oe30sIGZsYXRwaWNrci5kZWZhdWx0Q29uZmlnKSwgY29uZmlnKTsKICB9OwogIGZsYXRwaWNrci5wYXJzZURhdGUgPSBjcmVhdGVEYXRlUGFyc2VyKHt9KTsKICBmbGF0cGlja3IuZm9ybWF0RGF0ZSA9IGNyZWF0ZURhdGVGb3JtYXR0ZXIoe30pOwogIGZsYXRwaWNrci5jb21wYXJlRGF0ZXMgPSBjb21wYXJlRGF0ZXM7CiAgaWYgKHR5cGVvZiBqUXVlcnkgIT09ICJ1bmRlZmluZWQiICYmIHR5cGVvZiBqUXVlcnkuZm4gIT09ICJ1bmRlZmluZWQiKSB7CiAgICAgIGpRdWVyeS5mbi5mbGF0cGlja3IgPSBmdW5jdGlvbiAoY29uZmlnKSB7CiAgICAgICAgICByZXR1cm4gX2ZsYXRwaWNrcih0aGlzLCBjb25maWcpOwogICAgICB9OwogIH0KICBEYXRlLnByb3RvdHlwZS5mcF9pbmNyID0gZnVuY3Rpb24gKGRheXMpIHsKICAgICAgcmV0dXJuIG5ldyBEYXRlKHRoaXMuZ2V0RnVsbFllYXIoKSwgdGhpcy5nZXRNb250aCgpLCB0aGlzLmdldERhdGUoKSArICh0eXBlb2YgZGF5cyA9PT0gInN0cmluZyIgPyBwYXJzZUludChkYXlzLCAxMCkgOiBkYXlzKSk7CiAgfTsKICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gInVuZGVmaW5lZCIpIHsKICAgICAgd2luZG93LmZsYXRwaWNrciA9IGZsYXRwaWNrcjsKICB9CgogIHZhciBlLG89e307ZnVuY3Rpb24gbihyLHQsZSl7aWYoMz09PXIubm9kZVR5cGUpe3ZhciBvPSJ0ZXh0Q29udGVudCJpbiByP3IudGV4dENvbnRlbnQ6ci5ub2RlVmFsdWV8fCIiO2lmKCExIT09bi5vcHRpb25zLnRyaW0pe3ZhciBhPTA9PT10fHx0PT09ZS5sZW5ndGgtMTtpZigoIShvPW8ubWF0Y2goL15bXHNcbl0rJC9nKSYmImFsbCIhPT1uLm9wdGlvbnMudHJpbT8iICI6by5yZXBsYWNlKC8oXltcc1xuXSt8W1xzXG5dKyQpL2csImFsbCI9PT1uLm9wdGlvbnMudHJpbXx8YT8iIjoiICIpKXx8IiAiPT09bykmJmUubGVuZ3RoPjEmJmEpcmV0dXJuIG51bGx9cmV0dXJuIG99aWYoMSE9PXIubm9kZVR5cGUpcmV0dXJuIG51bGw7dmFyIHA9U3RyaW5nKHIubm9kZU5hbWUpLnRvTG93ZXJDYXNlKCk7aWYoInNjcmlwdCI9PT1wJiYhbi5vcHRpb25zLmFsbG93U2NyaXB0cylyZXR1cm4gbnVsbDt2YXIgbCxzLHU9bi5oKHAsZnVuY3Rpb24ocil7dmFyIHQ9ciYmci5sZW5ndGg7aWYoIXQpcmV0dXJuIG51bGw7Zm9yKHZhciBlPXt9LG89MDtvPHQ7bysrKXt2YXIgYT1yW29dLGk9YS5uYW1lLHA9YS52YWx1ZTsib24iPT09aS5zdWJzdHJpbmcoMCwyKSYmbi5vcHRpb25zLmFsbG93RXZlbnRzJiYocD1uZXcgRnVuY3Rpb24ocCkpLGVbaV09cDt9cmV0dXJuIGV9KHIuYXR0cmlidXRlcyksKHM9KGw9ci5jaGlsZE5vZGVzKSYmQXJyYXkucHJvdG90eXBlLm1hcC5jYWxsKGwsbikuZmlsdGVyKGkpKSYmcy5sZW5ndGg/czpudWxsKTtyZXR1cm4gbi52aXNpdG9yJiZuLnZpc2l0b3IodSksdX12YXIgYSxpPWZ1bmN0aW9uKHIpe3JldHVybiByfSxwPXt9O2Z1bmN0aW9uIGwocil7dmFyIHQ9KHIudHlwZXx8IiIpLnRvTG93ZXJDYXNlKCksZT1sLm1hcDtlJiZlLmhhc093blByb3BlcnR5KHQpPyhyLnR5cGU9ZVt0XSxyLnByb3BzPU9iamVjdC5rZXlzKHIucHJvcHN8fHt9KS5yZWR1Y2UoZnVuY3Rpb24odCxlKXt2YXIgbztyZXR1cm4gdFsobz1lLG8ucmVwbGFjZSgvLSguKS9nLGZ1bmN0aW9uKHIsdCl7cmV0dXJuIHQudG9VcHBlckNhc2UoKX0pKV09ci5wcm9wc1tlXSx0fSx7fSkpOnIudHlwZT10LnJlcGxhY2UoL1teYS16MC05LV0vaSwiIik7fXZhciBNYXJrdXAgPSAoZnVuY3Rpb24odCl7ZnVuY3Rpb24gaSgpe3QuYXBwbHkodGhpcyxhcmd1bWVudHMpO31yZXR1cm4gdCYmKGkuX19wcm90b19fPXQpLChpLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSkuY29uc3RydWN0b3I9aSxpLnNldFJldml2ZXI9ZnVuY3Rpb24ocil7YT1yO30saS5wcm90b3R5cGUuc2hvdWxkQ29tcG9uZW50VXBkYXRlPWZ1bmN0aW9uKHIpe3ZhciB0PXRoaXMucHJvcHM7cmV0dXJuIHIud3JhcCE9PXQud3JhcHx8ci50eXBlIT09dC50eXBlfHxyLm1hcmt1cCE9PXQubWFya3VwfSxpLnByb3RvdHlwZS5zZXRDb21wb25lbnRzPWZ1bmN0aW9uKHIpe2lmKHRoaXMubWFwPXt9LHIpZm9yKHZhciB0IGluIHIpaWYoci5oYXNPd25Qcm9wZXJ0eSh0KSl7dmFyIGU9dC5yZXBsYWNlKC8oW0EtWl0rKShbQS1aXVthLXowLTldKXwoW2EtejAtOV0rKShbQS1aXSkvZywiJDEkMy0kMiQ0IikudG9Mb3dlckNhc2UoKTt0aGlzLm1hcFtlXT1yW3RdO319LGkucHJvdG90eXBlLnJlbmRlcj1mdW5jdGlvbih0KXt2YXIgaT10LndyYXA7dm9pZCAwPT09aSYmKGk9ITApO3ZhciBzLHU9dC50eXBlLGM9dC5tYXJrdXAsbT10LmNvbXBvbmVudHMsdj10LnJldml2ZXIsZj10Lm9uRXJyb3IsZD10WyJhbGxvdy1zY3JpcHRzIl0saD10WyJhbGxvdy1ldmVudHMiXSx5PXQudHJpbSx3PWZ1bmN0aW9uKHIsdCl7dmFyIGU9e307Zm9yKHZhciBvIGluIHIpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHIsbykmJi0xPT09dC5pbmRleE9mKG8pJiYoZVtvXT1yW29dKTtyZXR1cm4gZX0odCxbIndyYXAiLCJ0eXBlIiwibWFya3VwIiwiY29tcG9uZW50cyIsInJldml2ZXIiLCJvbkVycm9yIiwiYWxsb3ctc2NyaXB0cyIsImFsbG93LWV2ZW50cyIsInRyaW0iXSksQz12fHx0aGlzLnJldml2ZXJ8fHRoaXMuY29uc3RydWN0b3IucHJvdG90eXBlLnJldml2ZXJ8fGF8fHYkMTt0aGlzLnNldENvbXBvbmVudHMobSk7dmFyIGc9e2FsbG93U2NyaXB0czpkLGFsbG93RXZlbnRzOmgsdHJpbTp5fTt0cnl7cz1mdW5jdGlvbihyLHQsYSxpLHMpe3ZhciB1PWZ1bmN0aW9uKHIsdCl7dmFyIG8sbixhLGkscD0iaHRtbCI9PT10PyJ0ZXh0L2h0bWwiOiJhcHBsaWNhdGlvbi94bWwiOyJodG1sIj09PXQ/KGk9ImJvZHkiLGE9IjwhRE9DVFlQRSBodG1sPlxuPGh0bWw+PGJvZHk+IityKyI8L2JvZHk+PC9odG1sPiIpOihpPSJ4bWwiLGE9Jzw/eG1sIHZlcnNpb249IjEuMCIgZW5jb2Rpbmc9IlVURi04Ij8+XG48eG1sPicrcisiPC94bWw+Iik7dHJ5e289KG5ldyBET01QYXJzZXIpLnBhcnNlRnJvbVN0cmluZyhhLHApO31jYXRjaChyKXtuPXI7fWlmKG98fCJodG1sIiE9PXR8fCgobz1lfHwoZT1mdW5jdGlvbigpe2lmKGRvY3VtZW50LmltcGxlbWVudGF0aW9uJiZkb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQpcmV0dXJuIGRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCgiIik7dmFyIHI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaWZyYW1lIik7cmV0dXJuIHIuc3R5bGUuY3NzVGV4dD0icG9zaXRpb246YWJzb2x1dGU7IGxlZnQ6MDsgdG9wOi05OTllbTsgd2lkdGg6MXB4OyBoZWlnaHQ6MXB4OyBvdmVyZmxvdzpoaWRkZW47IixyLnNldEF0dHJpYnV0ZSgic2FuZGJveCIsImFsbG93LWZvcm1zIiksZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChyKSxyLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnR9KCkpKS5vcGVuKCksby53cml0ZShhKSxvLmNsb3NlKCkpLG8pe3ZhciBsPW8uZ2V0RWxlbWVudHNCeVRhZ05hbWUoaSlbMF0scz1sLmZpcnN0Q2hpbGQ7cmV0dXJuIHImJiFzJiYobC5lcnJvcj0iRG9jdW1lbnQgcGFyc2UgZmFpbGVkLiIpLHMmJiJwYXJzZXJlcnJvciI9PT1TdHJpbmcocy5ub2RlTmFtZSkudG9Mb3dlckNhc2UoKSYmKHMucmVtb3ZlQ2hpbGQocy5maXJzdENoaWxkKSxzLnJlbW92ZUNoaWxkKHMubGFzdENoaWxkKSxsLmVycm9yPXMudGV4dENvbnRlbnR8fHMubm9kZVZhbHVlfHxufHwiVW5rbm93biBlcnJvciIsbC5yZW1vdmVDaGlsZChzKSksbH19KHIsdCk7aWYodSYmdS5lcnJvcil0aHJvdyBuZXcgRXJyb3IodS5lcnJvcik7dmFyIGM9dSYmdS5ib2R5fHx1O2wubWFwPWl8fHA7dmFyIG09YyYmZnVuY3Rpb24ocix0LGUsYSl7cmV0dXJuIG4udmlzaXRvcj10LG4uaD1lLG4ub3B0aW9ucz1hfHxvLG4ocil9KGMsbCxhLHMpO3JldHVybiBsLm1hcD1udWxsLG0mJm0ucHJvcHMmJm0ucHJvcHMuY2hpbGRyZW58fG51bGx9KGMsdSxDLHRoaXMubWFwLGcpO31jYXRjaChyKXtmP2Yoe2Vycm9yOnJ9KToidW5kZWZpbmVkIiE9dHlwZW9mIGNvbnNvbGUmJmNvbnNvbGUuZXJyb3ImJmNvbnNvbGUuZXJyb3IoInByZWFjdC1tYXJrdXA6ICIrcik7fWlmKCExPT09aSlyZXR1cm4gc3x8bnVsbDt2YXIgeD13Lmhhc093blByb3BlcnR5KCJjbGFzc05hbWUiKT8iY2xhc3NOYW1lIjoiY2xhc3MiLGI9d1t4XTtyZXR1cm4gYj9iLnNwbGljZT9iLnNwbGljZSgwLDAsIm1hcmt1cCIpOiJzdHJpbmciPT10eXBlb2YgYj93W3hdKz0iIG1hcmt1cCI6Im9iamVjdCI9PXR5cGVvZiBiJiYoYi5tYXJrdXA9ITApOndbeF09Im1hcmt1cCIsQygiZGl2Iix3LHN8fG51bGwpfSxpfShfJDEpKTsKCiAgY29uc3QgQ0xBU1NfUEFUVEVSTiA9IC9eY2xhc3NbIHtdLzsKCgogIC8qKgogICAqIEBwYXJhbSB7ZnVuY3Rpb259IGZuCiAgICoKICAgKiBAcmV0dXJuIHtib29sZWFufQogICAqLwogIGZ1bmN0aW9uIGlzQ2xhc3MoZm4pIHsKICAgIHJldHVybiBDTEFTU19QQVRURVJOLnRlc3QoZm4udG9TdHJpbmcoKSk7CiAgfQoKICAvKioKICAgKiBAcGFyYW0ge2FueX0gb2JqCiAgICoKICAgKiBAcmV0dXJuIHtib29sZWFufQogICAqLwogIGZ1bmN0aW9uIGlzQXJyYXkob2JqKSB7CiAgICByZXR1cm4gQXJyYXkuaXNBcnJheShvYmopOwogIH0KCiAgLyoqCiAgICogQHBhcmFtIHthbnl9IG9iagogICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wCiAgICoKICAgKiBAcmV0dXJuIHtib29sZWFufQogICAqLwogIGZ1bmN0aW9uIGhhc093blByb3Aob2JqLCBwcm9wKSB7CiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7CiAgfQoKICAvKioKICAgKiBAdHlwZWRlZiB7aW1wb3J0KCcuL2luZGV4JykuSW5qZWN0QW5ub3RhdGVkIH0gSW5qZWN0QW5ub3RhdGVkCiAgICovCgogIC8qKgogICAqIEB0ZW1wbGF0ZSBUCiAgICoKICAgKiBAcGFyYW1zIHtbLi4uc3RyaW5nW10sIFRdIHwgLi4uc3RyaW5nW10sIFR9IGFyZ3MKICAgKgogICAqIEByZXR1cm4ge1QgJiBJbmplY3RBbm5vdGF0ZWR9CiAgICovCiAgZnVuY3Rpb24gYW5ub3RhdGUoLi4uYXJncykgewoKICAgIGlmIChhcmdzLmxlbmd0aCA9PT0gMSAmJiBpc0FycmF5KGFyZ3NbMF0pKSB7CiAgICAgIGFyZ3MgPSBhcmdzWzBdOwogICAgfQoKICAgIGFyZ3MgPSBbIC4uLmFyZ3MgXTsKCiAgICBjb25zdCBmbiA9IGFyZ3MucG9wKCk7CgogICAgZm4uJGluamVjdCA9IGFyZ3M7CgogICAgcmV0dXJuIGZuOwogIH0KCgogIC8vIEN1cnJlbnQgbGltaXRhdGlvbnM6CiAgLy8gLSBjYW4ndCBwdXQgaW50byAiZnVuY3Rpb24gYXJnIiBjb21tZW50cwogIC8vIGZ1bmN0aW9uIC8qIChubyBwYXJlbnRoZXNpcyBsaWtlIHRoaXMpICovICgpe30KICAvLyBmdW5jdGlvbiBhYmMoIC8qIHh4IChubyBwYXJlbnRoZXNpcyBsaWtlIHRoaXMpICovIGEsIGIpIHt9CiAgLy8KICAvLyBKdXN0IHB1dCB0aGUgY29tbWVudCBiZWZvcmUgZnVuY3Rpb24gb3IgaW5zaWRlOgogIC8vIC8qICgoKHRoaXMgaXMgZmluZSkpKSAqLyBmdW5jdGlvbihhLCBiKSB7fQogIC8vIGZ1bmN0aW9uIGFiYyhhKSB7IC8qICgoKHRoaXMgaXMgZmluZSkpKSAqL30KICAvLwogIC8vIC0gY2FuJ3QgcmVsaWFibHkgYXV0by1hbm5vdGF0ZSBjb25zdHJ1Y3Rvcjsgd2UnbGwgbWF0Y2ggdGhlCiAgLy8gZmlyc3QgY29uc3RydWN0b3IoLi4uKSBwYXR0ZXJuIGZvdW5kIHdoaWNoIG1heSBiZSB0aGUgb25lCiAgLy8gb2YgYSBuZXN0ZWQgY2xhc3MsIHRvby4KCiAgY29uc3QgQ09OU1RSVUNUT1JfQVJHUyA9IC9jb25zdHJ1Y3RvclxzKlteKF0qXChccyooW14pXSopXCkvbTsKICBjb25zdCBGTl9BUkdTID0gL14oPzphc3luY1xzKyk/KD86ZnVuY3Rpb25ccypbXihdKik/KD86XChccyooW14pXSopXCl8KFx3KykpL207CiAgY29uc3QgRk5fQVJHID0gL1wvXCooW14qXSopXCpcLy9tOwoKICAvKioKICAgKiBAcGFyYW0ge3Vua25vd259IGZuCiAgICoKICAgKiBAcmV0dXJuIHtzdHJpbmdbXX0KICAgKi8KICBmdW5jdGlvbiBwYXJzZUFubm90YXRpb25zKGZuKSB7CgogICAgaWYgKHR5cGVvZiBmbiAhPT0gJ2Z1bmN0aW9uJykgewogICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBhbm5vdGF0ZSAiJHtmbn0iLiBFeHBlY3RlZCBhIGZ1bmN0aW9uIWApOwogICAgfQoKICAgIGNvbnN0IG1hdGNoID0gZm4udG9TdHJpbmcoKS5tYXRjaChpc0NsYXNzKGZuKSA/IENPTlNUUlVDVE9SX0FSR1MgOiBGTl9BUkdTKTsKCiAgICAvLyBtYXkgcGFyc2UgY2xhc3Mgd2l0aG91dCBjb25zdHJ1Y3RvcgogICAgaWYgKCFtYXRjaCkgewogICAgICByZXR1cm4gW107CiAgICB9CgogICAgY29uc3QgYXJncyA9IG1hdGNoWzFdIHx8IG1hdGNoWzJdOwoKICAgIHJldHVybiBhcmdzICYmIGFyZ3Muc3BsaXQoJywnKS5tYXAoYXJnID0+IHsKICAgICAgY29uc3QgYXJnTWF0Y2ggPSBhcmcubWF0Y2goRk5fQVJHKTsKICAgICAgcmV0dXJuIChhcmdNYXRjaCAmJiBhcmdNYXRjaFsxXSB8fCBhcmcpLnRyaW0oKTsKICAgIH0pIHx8IFtdOwogIH0KCiAgLyoqCiAgICogQHR5cGVkZWYgeyBpbXBvcnQoJy4vaW5kZXgnKS5Nb2R1bGVEZWNsYXJhdGlvbiB9IE1vZHVsZURlY2xhcmF0aW9uCiAgICogQHR5cGVkZWYgeyBpbXBvcnQoJy4vaW5kZXgnKS5Nb2R1bGVEZWZpbml0aW9uIH0gTW9kdWxlRGVmaW5pdGlvbgogICAqIEB0eXBlZGVmIHsgaW1wb3J0KCcuL2luZGV4JykuSW5qZWN0b3JDb250ZXh0IH0gSW5qZWN0b3JDb250ZXh0CiAgICovCgogIC8qKgogICAqIENyZWF0ZSBhIG5ldyBpbmplY3RvciB3aXRoIHRoZSBnaXZlbiBtb2R1bGVzLgogICAqCiAgICogQHBhcmFtIHtNb2R1bGVEZWZpbml0aW9uW119IG1vZHVsZXMKICAgKiBAcGFyYW0ge0luamVjdG9yQ29udGV4dH0gW3BhcmVudF0KICAgKi8KICBmdW5jdGlvbiBJbmplY3Rvcihtb2R1bGVzLCBwYXJlbnQpIHsKICAgIHBhcmVudCA9IHBhcmVudCB8fCB7CiAgICAgIGdldDogZnVuY3Rpb24obmFtZSwgc3RyaWN0KSB7CiAgICAgICAgY3VycmVudGx5UmVzb2x2aW5nLnB1c2gobmFtZSk7CgogICAgICAgIGlmIChzdHJpY3QgPT09IGZhbHNlKSB7CiAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhyb3cgZXJyb3IoYE5vIHByb3ZpZGVyIGZvciAiJHsgbmFtZSB9IiFgKTsKICAgICAgICB9CiAgICAgIH0KICAgIH07CgogICAgY29uc3QgY3VycmVudGx5UmVzb2x2aW5nID0gW107CiAgICBjb25zdCBwcm92aWRlcnMgPSB0aGlzLl9wcm92aWRlcnMgPSBPYmplY3QuY3JlYXRlKHBhcmVudC5fcHJvdmlkZXJzIHx8IG51bGwpOwogICAgY29uc3QgaW5zdGFuY2VzID0gdGhpcy5faW5zdGFuY2VzID0gT2JqZWN0LmNyZWF0ZShudWxsKTsKCiAgICBjb25zdCBzZWxmID0gaW5zdGFuY2VzLmluamVjdG9yID0gdGhpczsKCiAgICBjb25zdCBlcnJvciA9IGZ1bmN0aW9uKG1zZykgewogICAgICBjb25zdCBzdGFjayA9IGN1cnJlbnRseVJlc29sdmluZy5qb2luKCcgLT4gJyk7CiAgICAgIGN1cnJlbnRseVJlc29sdmluZy5sZW5ndGggPSAwOwogICAgICByZXR1cm4gbmV3IEVycm9yKHN0YWNrID8gYCR7IG1zZyB9IChSZXNvbHZpbmc6ICR7IHN0YWNrIH0pYCA6IG1zZyk7CiAgICB9OwoKICAgIC8qKgogICAgICogUmV0dXJuIGEgbmFtZWQgc2VydmljZS4KICAgICAqCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZQogICAgICogQHBhcmFtIHtib29sZWFufSBbc3RyaWN0PXRydWVdIGlmIGZhbHNlLCByZXNvbHZlIG1pc3Npbmcgc2VydmljZXMgdG8gbnVsbAogICAgICoKICAgICAqIEByZXR1cm4ge2FueX0KICAgICAqLwogICAgZnVuY3Rpb24gZ2V0KG5hbWUsIHN0cmljdCkgewogICAgICBpZiAoIXByb3ZpZGVyc1tuYW1lXSAmJiBuYW1lLmluZGV4T2YoJy4nKSAhPT0gLTEpIHsKICAgICAgICBjb25zdCBwYXJ0cyA9IG5hbWUuc3BsaXQoJy4nKTsKICAgICAgICBsZXQgcGl2b3QgPSBnZXQocGFydHMuc2hpZnQoKSk7CgogICAgICAgIHdoaWxlIChwYXJ0cy5sZW5ndGgpIHsKICAgICAgICAgIHBpdm90ID0gcGl2b3RbcGFydHMuc2hpZnQoKV07CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gcGl2b3Q7CiAgICAgIH0KCiAgICAgIGlmIChoYXNPd25Qcm9wKGluc3RhbmNlcywgbmFtZSkpIHsKICAgICAgICByZXR1cm4gaW5zdGFuY2VzW25hbWVdOwogICAgICB9CgogICAgICBpZiAoaGFzT3duUHJvcChwcm92aWRlcnMsIG5hbWUpKSB7CiAgICAgICAgaWYgKGN1cnJlbnRseVJlc29sdmluZy5pbmRleE9mKG5hbWUpICE9PSAtMSkgewogICAgICAgICAgY3VycmVudGx5UmVzb2x2aW5nLnB1c2gobmFtZSk7CiAgICAgICAgICB0aHJvdyBlcnJvcignQ2Fubm90IHJlc29sdmUgY2lyY3VsYXIgZGVwZW5kZW5jeSEnKTsKICAgICAgICB9CgogICAgICAgIGN1cnJlbnRseVJlc29sdmluZy5wdXNoKG5hbWUpOwogICAgICAgIGluc3RhbmNlc1tuYW1lXSA9IHByb3ZpZGVyc1tuYW1lXVswXShwcm92aWRlcnNbbmFtZV1bMV0pOwogICAgICAgIGN1cnJlbnRseVJlc29sdmluZy5wb3AoKTsKCiAgICAgICAgcmV0dXJuIGluc3RhbmNlc1tuYW1lXTsKICAgICAgfQoKICAgICAgcmV0dXJuIHBhcmVudC5nZXQobmFtZSwgc3RyaWN0KTsKICAgIH0KCiAgICBmdW5jdGlvbiBmbkRlZihmbiwgbG9jYWxzKSB7CgogICAgICBpZiAodHlwZW9mIGxvY2FscyA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICBsb2NhbHMgPSB7fTsKICAgICAgfQoKICAgICAgaWYgKHR5cGVvZiBmbiAhPT0gJ2Z1bmN0aW9uJykgewogICAgICAgIGlmIChpc0FycmF5KGZuKSkgewogICAgICAgICAgZm4gPSBhbm5vdGF0ZShmbi5zbGljZSgpKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhyb3cgZXJyb3IoYENhbm5vdCBpbnZva2UgIiR7IGZuIH0iLiBFeHBlY3RlZCBhIGZ1bmN0aW9uIWApOwogICAgICAgIH0KICAgICAgfQoKICAgICAgY29uc3QgaW5qZWN0ID0gZm4uJGluamVjdCB8fCBwYXJzZUFubm90YXRpb25zKGZuKTsKICAgICAgY29uc3QgZGVwZW5kZW5jaWVzID0gaW5qZWN0Lm1hcChkZXAgPT4gewogICAgICAgIGlmIChoYXNPd25Qcm9wKGxvY2FscywgZGVwKSkgewogICAgICAgICAgcmV0dXJuIGxvY2Fsc1tkZXBdOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gZ2V0KGRlcCk7CiAgICAgICAgfQogICAgICB9KTsKCiAgICAgIHJldHVybiB7CiAgICAgICAgZm46IGZuLAogICAgICAgIGRlcGVuZGVuY2llczogZGVwZW5kZW5jaWVzCiAgICAgIH07CiAgICB9CgogICAgZnVuY3Rpb24gaW5zdGFudGlhdGUoVHlwZSkgewogICAgICBjb25zdCB7CiAgICAgICAgZm4sCiAgICAgICAgZGVwZW5kZW5jaWVzCiAgICAgIH0gPSBmbkRlZihUeXBlKTsKCiAgICAgIC8vIGluc3RhbnRpYXRlIHZhciBhcmdzIGNvbnN0cnVjdG9yCiAgICAgIGNvbnN0IENvbnN0cnVjdG9yID0gRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuYXBwbHkoZm4sIFsgbnVsbCBdLmNvbmNhdChkZXBlbmRlbmNpZXMpKTsKCiAgICAgIHJldHVybiBuZXcgQ29uc3RydWN0b3IoKTsKICAgIH0KCiAgICBmdW5jdGlvbiBpbnZva2UoZnVuYywgY29udGV4dCwgbG9jYWxzKSB7CiAgICAgIGNvbnN0IHsKICAgICAgICBmbiwKICAgICAgICBkZXBlbmRlbmNpZXMKICAgICAgfSA9IGZuRGVmKGZ1bmMsIGxvY2Fscyk7CgogICAgICByZXR1cm4gZm4uYXBwbHkoY29udGV4dCwgZGVwZW5kZW5jaWVzKTsKICAgIH0KCiAgICAvKioKICAgICAqIEBwYXJhbSB7SW5qZWN0b3J9IGNoaWxkSW5qZWN0b3IKICAgICAqCiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0KICAgICAqLwogICAgZnVuY3Rpb24gY3JlYXRlUHJpdmF0ZUluamVjdG9yRmFjdG9yeShjaGlsZEluamVjdG9yKSB7CiAgICAgIHJldHVybiBhbm5vdGF0ZShrZXkgPT4gY2hpbGRJbmplY3Rvci5nZXQoa2V5KSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBAcGFyYW0ge01vZHVsZURlZmluaXRpb25bXX0gbW9kdWxlcwogICAgICogQHBhcmFtIHtzdHJpbmdbXX0gW2ZvcmNlTmV3SW5zdGFuY2VzXQogICAgICoKICAgICAqIEByZXR1cm4ge0luamVjdG9yfQogICAgICovCiAgICBmdW5jdGlvbiBjcmVhdGVDaGlsZChtb2R1bGVzLCBmb3JjZU5ld0luc3RhbmNlcykgewogICAgICBpZiAoZm9yY2VOZXdJbnN0YW5jZXMgJiYgZm9yY2VOZXdJbnN0YW5jZXMubGVuZ3RoKSB7CiAgICAgICAgY29uc3QgZnJvbVBhcmVudE1vZHVsZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7CiAgICAgICAgY29uc3QgbWF0Y2hlZFNjb3BlcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7CgogICAgICAgIGNvbnN0IHByaXZhdGVJbmplY3RvcnNDYWNoZSA9IFtdOwogICAgICAgIGNvbnN0IHByaXZhdGVDaGlsZEluamVjdG9ycyA9IFtdOwogICAgICAgIGNvbnN0IHByaXZhdGVDaGlsZEZhY3RvcmllcyA9IFtdOwoKICAgICAgICBsZXQgcHJvdmlkZXI7CiAgICAgICAgbGV0IGNhY2hlSWR4OwogICAgICAgIGxldCBwcml2YXRlQ2hpbGRJbmplY3RvcjsKICAgICAgICBsZXQgcHJpdmF0ZUNoaWxkSW5qZWN0b3JGYWN0b3J5OwoKICAgICAgICBmb3IgKGxldCBuYW1lIGluIHByb3ZpZGVycykgewogICAgICAgICAgcHJvdmlkZXIgPSBwcm92aWRlcnNbbmFtZV07CgogICAgICAgICAgaWYgKGZvcmNlTmV3SW5zdGFuY2VzLmluZGV4T2YobmFtZSkgIT09IC0xKSB7CiAgICAgICAgICAgIGlmIChwcm92aWRlclsyXSA9PT0gJ3ByaXZhdGUnKSB7CiAgICAgICAgICAgICAgY2FjaGVJZHggPSBwcml2YXRlSW5qZWN0b3JzQ2FjaGUuaW5kZXhPZihwcm92aWRlclszXSk7CiAgICAgICAgICAgICAgaWYgKGNhY2hlSWR4ID09PSAtMSkgewogICAgICAgICAgICAgICAgcHJpdmF0ZUNoaWxkSW5qZWN0b3IgPSBwcm92aWRlclszXS5jcmVhdGVDaGlsZChbXSwgZm9yY2VOZXdJbnN0YW5jZXMpOwogICAgICAgICAgICAgICAgcHJpdmF0ZUNoaWxkSW5qZWN0b3JGYWN0b3J5ID0gY3JlYXRlUHJpdmF0ZUluamVjdG9yRmFjdG9yeShwcml2YXRlQ2hpbGRJbmplY3Rvcik7CiAgICAgICAgICAgICAgICBwcml2YXRlSW5qZWN0b3JzQ2FjaGUucHVzaChwcm92aWRlclszXSk7CiAgICAgICAgICAgICAgICBwcml2YXRlQ2hpbGRJbmplY3RvcnMucHVzaChwcml2YXRlQ2hpbGRJbmplY3Rvcik7CiAgICAgICAgICAgICAgICBwcml2YXRlQ2hpbGRGYWN0b3JpZXMucHVzaChwcml2YXRlQ2hpbGRJbmplY3RvckZhY3RvcnkpOwogICAgICAgICAgICAgICAgZnJvbVBhcmVudE1vZHVsZVtuYW1lXSA9IFsgcHJpdmF0ZUNoaWxkSW5qZWN0b3JGYWN0b3J5LCBuYW1lLCAncHJpdmF0ZScsIHByaXZhdGVDaGlsZEluamVjdG9yIF07CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGZyb21QYXJlbnRNb2R1bGVbbmFtZV0gPSBbIHByaXZhdGVDaGlsZEZhY3Rvcmllc1tjYWNoZUlkeF0sIG5hbWUsICdwcml2YXRlJywgcHJpdmF0ZUNoaWxkSW5qZWN0b3JzW2NhY2hlSWR4XSBdOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBmcm9tUGFyZW50TW9kdWxlW25hbWVdID0gWyBwcm92aWRlclsyXSwgcHJvdmlkZXJbMV0gXTsKICAgICAgICAgICAgfQogICAgICAgICAgICBtYXRjaGVkU2NvcGVzW25hbWVdID0gdHJ1ZTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoKHByb3ZpZGVyWzJdID09PSAnZmFjdG9yeScgfHwgcHJvdmlkZXJbMl0gPT09ICd0eXBlJykgJiYgcHJvdmlkZXJbMV0uJHNjb3BlKSB7CiAgICAgICAgICAgIC8qIGpzaGludCAtVzA4MyAqLwogICAgICAgICAgICBmb3JjZU5ld0luc3RhbmNlcy5mb3JFYWNoKHNjb3BlID0+IHsKICAgICAgICAgICAgICBpZiAocHJvdmlkZXJbMV0uJHNjb3BlLmluZGV4T2Yoc2NvcGUpICE9PSAtMSkgewogICAgICAgICAgICAgICAgZnJvbVBhcmVudE1vZHVsZVtuYW1lXSA9IFsgcHJvdmlkZXJbMl0sIHByb3ZpZGVyWzFdIF07CiAgICAgICAgICAgICAgICBtYXRjaGVkU2NvcGVzW3Njb3BlXSA9IHRydWU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZvcmNlTmV3SW5zdGFuY2VzLmZvckVhY2goc2NvcGUgPT4gewogICAgICAgICAgaWYgKCFtYXRjaGVkU2NvcGVzW3Njb3BlXSkgewogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHByb3ZpZGVyIGZvciAiJyArIHNjb3BlICsgJyIuIENhbm5vdCB1c2UgcHJvdmlkZXIgZnJvbSB0aGUgcGFyZW50IScpOwogICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICBtb2R1bGVzLnVuc2hpZnQoZnJvbVBhcmVudE1vZHVsZSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBuZXcgSW5qZWN0b3IobW9kdWxlcywgc2VsZik7CiAgICB9CgogICAgY29uc3QgZmFjdG9yeU1hcCA9IHsKICAgICAgZmFjdG9yeTogaW52b2tlLAogICAgICB0eXBlOiBpbnN0YW50aWF0ZSwKICAgICAgdmFsdWU6IGZ1bmN0aW9uKHZhbHVlKSB7CiAgICAgICAgcmV0dXJuIHZhbHVlOwogICAgICB9CiAgICB9OwoKICAgIC8qKgogICAgICogQHBhcmFtIHtNb2R1bGVEZWZpbml0aW9ufSBtb2R1bGVEZWZpbml0aW9uCiAgICAgKiBAcGFyYW0ge0luamVjdG9yfSBpbmplY3RvcgogICAgICovCiAgICBmdW5jdGlvbiBjcmVhdGVJbml0aWFsaXplcihtb2R1bGVEZWZpbml0aW9uLCBpbmplY3RvcikgewoKICAgICAgY29uc3QgaW5pdGlhbGl6ZXJzID0gbW9kdWxlRGVmaW5pdGlvbi5fX2luaXRfXyB8fCBbXTsKCiAgICAgIHJldHVybiBmdW5jdGlvbigpIHsKICAgICAgICBpbml0aWFsaXplcnMuZm9yRWFjaChpbml0aWFsaXplciA9PiB7CgogICAgICAgICAgLy8gZWFnZXJseSByZXNvbHZlIGNvbXBvbmVudCAoZm4gb3Igc3RyaW5nKQogICAgICAgICAgaWYgKHR5cGVvZiBpbml0aWFsaXplciA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgICAgaW5qZWN0b3IuZ2V0KGluaXRpYWxpemVyKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGluamVjdG9yLmludm9rZShpbml0aWFsaXplcik7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH07CiAgICB9CgogICAgLyoqCiAgICAgKiBAcGFyYW0ge01vZHVsZURlZmluaXRpb259IG1vZHVsZURlZmluaXRpb24KICAgICAqLwogICAgZnVuY3Rpb24gbG9hZE1vZHVsZShtb2R1bGVEZWZpbml0aW9uKSB7CgogICAgICBjb25zdCBtb2R1bGVFeHBvcnRzID0gbW9kdWxlRGVmaW5pdGlvbi5fX2V4cG9ydHNfXzsKCiAgICAgIC8vIHByaXZhdGUgbW9kdWxlCiAgICAgIGlmIChtb2R1bGVFeHBvcnRzKSB7CiAgICAgICAgY29uc3QgbmVzdGVkTW9kdWxlcyA9IG1vZHVsZURlZmluaXRpb24uX19tb2R1bGVzX187CgogICAgICAgIGNvbnN0IGNsb25lZE1vZHVsZSA9IE9iamVjdC5rZXlzKG1vZHVsZURlZmluaXRpb24pLnJlZHVjZSgoY2xvbmVkTW9kdWxlLCBrZXkpID0+IHsKCiAgICAgICAgICBpZiAoa2V5ICE9PSAnX19leHBvcnRzX18nICYmIGtleSAhPT0gJ19fbW9kdWxlc19fJyAmJiBrZXkgIT09ICdfX2luaXRfXycgJiYga2V5ICE9PSAnX19kZXBlbmRzX18nKSB7CiAgICAgICAgICAgIGNsb25lZE1vZHVsZVtrZXldID0gbW9kdWxlRGVmaW5pdGlvbltrZXldOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBjbG9uZWRNb2R1bGU7CiAgICAgICAgfSwgT2JqZWN0LmNyZWF0ZShudWxsKSk7CgogICAgICAgIGNvbnN0IGNoaWxkTW9kdWxlcyA9IChuZXN0ZWRNb2R1bGVzIHx8IFtdKS5jb25jYXQoY2xvbmVkTW9kdWxlKTsKCiAgICAgICAgY29uc3QgcHJpdmF0ZUluamVjdG9yID0gY3JlYXRlQ2hpbGQoY2hpbGRNb2R1bGVzKTsKICAgICAgICBjb25zdCBnZXRGcm9tUHJpdmF0ZUluamVjdG9yID0gYW5ub3RhdGUoZnVuY3Rpb24oa2V5KSB7CiAgICAgICAgICByZXR1cm4gcHJpdmF0ZUluamVjdG9yLmdldChrZXkpOwogICAgICAgIH0pOwoKICAgICAgICBtb2R1bGVFeHBvcnRzLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7CiAgICAgICAgICBwcm92aWRlcnNba2V5XSA9IFsgZ2V0RnJvbVByaXZhdGVJbmplY3Rvciwga2V5LCAncHJpdmF0ZScsIHByaXZhdGVJbmplY3RvciBdOwogICAgICAgIH0pOwoKICAgICAgICAvLyBlbnN1cmUgY2hpbGQgaW5qZWN0b3IgaW5pdGlhbGl6ZXMKICAgICAgICBjb25zdCBpbml0aWFsaXplcnMgPSAobW9kdWxlRGVmaW5pdGlvbi5fX2luaXRfXyB8fCBbXSkuc2xpY2UoKTsKCiAgICAgICAgaW5pdGlhbGl6ZXJzLnVuc2hpZnQoZnVuY3Rpb24oKSB7CiAgICAgICAgICBwcml2YXRlSW5qZWN0b3IuaW5pdCgpOwogICAgICAgIH0pOwoKICAgICAgICBtb2R1bGVEZWZpbml0aW9uID0gT2JqZWN0LmFzc2lnbih7fSwgbW9kdWxlRGVmaW5pdGlvbiwgewogICAgICAgICAgX19pbml0X186IGluaXRpYWxpemVycwogICAgICAgIH0pOwoKICAgICAgICByZXR1cm4gY3JlYXRlSW5pdGlhbGl6ZXIobW9kdWxlRGVmaW5pdGlvbiwgcHJpdmF0ZUluamVjdG9yKTsKICAgICAgfQoKICAgICAgLy8gbm9ybWFsIG1vZHVsZQogICAgICBPYmplY3Qua2V5cyhtb2R1bGVEZWZpbml0aW9uKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkgewoKICAgICAgICBpZiAoa2V5ID09PSAnX19pbml0X18nIHx8IGtleSA9PT0gJ19fZGVwZW5kc19fJykgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgaWYgKG1vZHVsZURlZmluaXRpb25ba2V5XVsyXSA9PT0gJ3ByaXZhdGUnKSB7CiAgICAgICAgICBwcm92aWRlcnNba2V5XSA9IG1vZHVsZURlZmluaXRpb25ba2V5XTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGNvbnN0IHR5cGUgPSBtb2R1bGVEZWZpbml0aW9uW2tleV1bMF07CiAgICAgICAgY29uc3QgdmFsdWUgPSBtb2R1bGVEZWZpbml0aW9uW2tleV1bMV07CgogICAgICAgIHByb3ZpZGVyc1trZXldID0gWyBmYWN0b3J5TWFwW3R5cGVdLCBhcnJheVVud3JhcCh0eXBlLCB2YWx1ZSksIHR5cGUgXTsKICAgICAgfSk7CgogICAgICByZXR1cm4gY3JlYXRlSW5pdGlhbGl6ZXIobW9kdWxlRGVmaW5pdGlvbiwgc2VsZik7CiAgICB9CgogICAgLyoqCiAgICAgKiBAcGFyYW0ge01vZHVsZURlZmluaXRpb25bXX0gbW9kdWxlRGVmaW5pdGlvbnMKICAgICAqIEBwYXJhbSB7TW9kdWxlRGVmaW5pdGlvbn0gbW9kdWxlRGVmaW5pdGlvbgogICAgICoKICAgICAqIEByZXR1cm4ge01vZHVsZURlZmluaXRpb25bXX0KICAgICAqLwogICAgZnVuY3Rpb24gcmVzb2x2ZURlcGVuZGVuY2llcyhtb2R1bGVEZWZpbml0aW9ucywgbW9kdWxlRGVmaW5pdGlvbikgewoKICAgICAgaWYgKG1vZHVsZURlZmluaXRpb25zLmluZGV4T2YobW9kdWxlRGVmaW5pdGlvbikgIT09IC0xKSB7CiAgICAgICAgcmV0dXJuIG1vZHVsZURlZmluaXRpb25zOwogICAgICB9CgogICAgICBtb2R1bGVEZWZpbml0aW9ucyA9IChtb2R1bGVEZWZpbml0aW9uLl9fZGVwZW5kc19fIHx8IFtdKS5yZWR1Y2UocmVzb2x2ZURlcGVuZGVuY2llcywgbW9kdWxlRGVmaW5pdGlvbnMpOwoKICAgICAgaWYgKG1vZHVsZURlZmluaXRpb25zLmluZGV4T2YobW9kdWxlRGVmaW5pdGlvbikgIT09IC0xKSB7CiAgICAgICAgcmV0dXJuIG1vZHVsZURlZmluaXRpb25zOwogICAgICB9CgogICAgICByZXR1cm4gbW9kdWxlRGVmaW5pdGlvbnMuY29uY2F0KG1vZHVsZURlZmluaXRpb24pOwogICAgfQoKICAgIC8qKgogICAgICogQHBhcmFtIHtNb2R1bGVEZWZpbml0aW9uW119IG1vZHVsZURlZmluaXRpb25zCiAgICAgKgogICAgICogQHJldHVybiB7ICgpID0+IHZvaWQgfSBpbml0aWFsaXplckZuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGJvb3RzdHJhcChtb2R1bGVEZWZpbml0aW9ucykgewoKICAgICAgY29uc3QgaW5pdGlhbGl6ZXJzID0gbW9kdWxlRGVmaW5pdGlvbnMKICAgICAgICAucmVkdWNlKHJlc29sdmVEZXBlbmRlbmNpZXMsIFtdKQogICAgICAgIC5tYXAobG9hZE1vZHVsZSk7CgogICAgICBsZXQgaW5pdGlhbGl6ZWQgPSBmYWxzZTsKCiAgICAgIHJldHVybiBmdW5jdGlvbigpIHsKCiAgICAgICAgaWYgKGluaXRpYWxpemVkKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBpbml0aWFsaXplZCA9IHRydWU7CgogICAgICAgIGluaXRpYWxpemVycy5mb3JFYWNoKGluaXRpYWxpemVyID0+IGluaXRpYWxpemVyKCkpOwogICAgICB9OwogICAgfQoKICAgIC8vIHB1YmxpYyBBUEkKICAgIHRoaXMuZ2V0ID0gZ2V0OwogICAgdGhpcy5pbnZva2UgPSBpbnZva2U7CiAgICB0aGlzLmluc3RhbnRpYXRlID0gaW5zdGFudGlhdGU7CiAgICB0aGlzLmNyZWF0ZUNoaWxkID0gY3JlYXRlQ2hpbGQ7CgogICAgLy8gc2V0dXAKICAgIHRoaXMuaW5pdCA9IGJvb3RzdHJhcChtb2R1bGVzKTsKICB9CgoKICAvLyBoZWxwZXJzIC8vLy8vLy8vLy8vLy8vLwoKICBmdW5jdGlvbiBhcnJheVVud3JhcCh0eXBlLCB2YWx1ZSkgewogICAgaWYgKHR5cGUgIT09ICd2YWx1ZScgJiYgaXNBcnJheSh2YWx1ZSkpIHsKICAgICAgdmFsdWUgPSBhbm5vdGF0ZSh2YWx1ZS5zbGljZSgpKTsKICAgIH0KCiAgICByZXR1cm4gdmFsdWU7CiAgfQoKICAvKioKICAgKiBAdHlwZWRlZiB7b2JqZWN0fSBDb25kaXRpb24KICAgKiBAcHJvcGVydHkge3N0cmluZ30gW2hpZGVdCiAgICovCgogIGNsYXNzIENvbmRpdGlvbkNoZWNrZXIgewogICAgY29uc3RydWN0b3IoZm9ybUZpZWxkUmVnaXN0cnksIGV2ZW50QnVzKSB7CiAgICAgIHRoaXMuX2Zvcm1GaWVsZFJlZ2lzdHJ5ID0gZm9ybUZpZWxkUmVnaXN0cnk7CiAgICAgIHRoaXMuX2V2ZW50QnVzID0gZXZlbnRCdXM7CiAgICB9CgogICAgLyoqCiAgICAgKiBGb3IgZ2l2ZW4gZGF0YSwgcmVtb3ZlIHByb3BlcnRpZXMgYmFzZWQgb24gY29uZGl0aW9uLgogICAgICoKICAgICAqIEBwYXJhbSB7T2JqZWN0PHN0cmluZywgYW55Pn0gcHJvcGVydGllcwogICAgICogQHBhcmFtIHtPYmplY3Q8c3RyaW5nLCBhbnk+fSBkYXRhCiAgICAgKi8KICAgIGFwcGx5Q29uZGl0aW9ucyhwcm9wZXJ0aWVzLCBkYXRhID0ge30pIHsKICAgICAgY29uc3QgY29uZGl0aW9ucyA9IHRoaXMuX2dldENvbmRpdGlvbnMoKTsKICAgICAgY29uc3QgbmV3UHJvcGVydGllcyA9IHsKICAgICAgICAuLi5wcm9wZXJ0aWVzCiAgICAgIH07CiAgICAgIGZvciAoY29uc3QgewogICAgICAgIGtleSwKICAgICAgICBjb25kaXRpb24KICAgICAgfSBvZiBjb25kaXRpb25zKSB7CiAgICAgICAgY29uc3Qgc2hvdWxkUmVtb3ZlID0gdGhpcy5fY2hlY2tIaWRlQ29uZGl0aW9uKGNvbmRpdGlvbiwgZGF0YSk7CiAgICAgICAgaWYgKHNob3VsZFJlbW92ZSkgewogICAgICAgICAgZGVsZXRlIG5ld1Byb3BlcnRpZXNba2V5XTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIG5ld1Byb3BlcnRpZXM7CiAgICB9CgogICAgLyoqCiAgICAgKiBDaGVjayBpZiBnaXZlbiBjb25kaXRpb24gaXMgbWV0LiBSZXR1cm5zIG51bGwgZm9yIGludmFsaWQvbWlzc2luZyBjb25kaXRpb25zLgogICAgICoKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjb25kaXRpb24KICAgICAqIEBwYXJhbSB7aW1wb3J0KCcuLi90eXBlcycpLkRhdGF9IFtkYXRhXQogICAgICoKICAgICAqIEByZXR1cm5zIHtib29sZWFufG51bGx9CiAgICAgKi8KICAgIGNoZWNrKGNvbmRpdGlvbiwgZGF0YSA9IHt9KSB7CiAgICAgIGlmICghY29uZGl0aW9uKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KICAgICAgaWYgKCFpc1N0cmluZyQyKGNvbmRpdGlvbikgfHwgIWNvbmRpdGlvbi5zdGFydHNXaXRoKCc9JykpIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQogICAgICB0cnkgewogICAgICAgIC8vIGN1dCBvZmYgaW5pdGlhbCAnPScKICAgICAgICBjb25zdCByZXN1bHQgPSB1bmFyeVRlc3QoY29uZGl0aW9uLnNsaWNlKDEpLCBkYXRhKTsKICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIHRoaXMuX2V2ZW50QnVzLmZpcmUoJ2Vycm9yJywgewogICAgICAgICAgZXJyb3IKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogQ2hlY2sgaWYgaGlkZSBjb25kaXRpb24gaXMgbWV0LgogICAgICoKICAgICAqIEBwYXJhbSB7Q29uZGl0aW9ufSBjb25kaXRpb24KICAgICAqIEBwYXJhbSB7T2JqZWN0PHN0cmluZywgYW55Pn0gZGF0YQogICAgICogQHJldHVybnMge2Jvb2xlYW59CiAgICAgKi8KICAgIF9jaGVja0hpZGVDb25kaXRpb24oY29uZGl0aW9uLCBkYXRhKSB7CiAgICAgIGlmICghY29uZGl0aW9uLmhpZGUpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5jaGVjayhjb25kaXRpb24uaGlkZSwgZGF0YSk7CiAgICAgIHJldHVybiByZXN1bHQgPT09IHRydWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBFdmFsdWF0ZSBhbiBleHByZXNzaW9uLgogICAgICoKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBleHByZXNzaW9uCiAgICAgKiBAcGFyYW0ge2ltcG9ydCgnLi4vdHlwZXMnKS5EYXRhfSBbZGF0YV0KICAgICAqCiAgICAgKiBAcmV0dXJucyB7YW55fQogICAgICovCiAgICBldmFsdWF0ZShleHByZXNzaW9uLCBkYXRhID0ge30pIHsKICAgICAgaWYgKCFleHByZXNzaW9uKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KICAgICAgaWYgKCFpc1N0cmluZyQyKGV4cHJlc3Npb24pIHx8ICFleHByZXNzaW9uLnN0YXJ0c1dpdGgoJz0nKSkgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgcmVzdWx0ID0gZXZhbHVhdGUoZXhwcmVzc2lvbi5zbGljZSgxKSwgZGF0YSk7CiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICB0aGlzLl9ldmVudEJ1cy5maXJlKCdlcnJvcicsIHsKICAgICAgICAgIGVycm9yCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KICAgIH0KICAgIF9nZXRDb25kaXRpb25zKCkgewogICAgICBjb25zdCBmb3JtRmllbGRzID0gdGhpcy5fZm9ybUZpZWxkUmVnaXN0cnkuZ2V0QWxsKCk7CiAgICAgIHJldHVybiBmb3JtRmllbGRzLnJlZHVjZSgoY29uZGl0aW9ucywgZm9ybUZpZWxkKSA9PiB7CiAgICAgICAgY29uc3QgewogICAgICAgICAga2V5LAogICAgICAgICAgY29uZGl0aW9uYWw6IGNvbmRpdGlvbgogICAgICAgIH0gPSBmb3JtRmllbGQ7CiAgICAgICAgaWYgKGtleSAmJiBjb25kaXRpb24pIHsKICAgICAgICAgIHJldHVybiBbLi4uY29uZGl0aW9ucywgewogICAgICAgICAgICBrZXksCiAgICAgICAgICAgIGNvbmRpdGlvbgogICAgICAgICAgfV07CiAgICAgICAgfQogICAgICAgIHJldHVybiBjb25kaXRpb25zOwogICAgICB9LCBbXSk7CiAgICB9CiAgfQogIENvbmRpdGlvbkNoZWNrZXIuJGluamVjdCA9IFsnZm9ybUZpZWxkUmVnaXN0cnknLCAnZXZlbnRCdXMnXTsKCiAgdmFyIEZOX1JFRiA9ICdfX2ZuJzsKICB2YXIgREVGQVVMVF9QUklPUklUWSA9IDEwMDA7CiAgdmFyIHNsaWNlID0gQXJyYXkucHJvdG90eXBlLnNsaWNlOwoKICAvKioKICAgKiBBIGdlbmVyYWwgcHVycG9zZSBldmVudCBidXMuCiAgICoKICAgKiBUaGlzIGNvbXBvbmVudCBpcyB1c2VkIHRvIGNvbW11bmljYXRlIGFjcm9zcyBhIGRpYWdyYW0gaW5zdGFuY2UuCiAgICogT3RoZXIgcGFydHMgb2YgYSBkaWFncmFtIGNhbiB1c2UgaXQgdG8gbGlzdGVuIHRvIGFuZCBicm9hZGNhc3QgZXZlbnRzLgogICAqCiAgICoKICAgKiAjIyBSZWdpc3RlcmluZyBmb3IgRXZlbnRzCiAgICoKICAgKiBUaGUgZXZlbnQgYnVzIHByb3ZpZGVzIHRoZSB7QGxpbmsgRXZlbnRCdXMjb259IGFuZCB7QGxpbmsgRXZlbnRCdXMjb25jZX0KICAgKiBtZXRob2RzIHRvIHJlZ2lzdGVyIGZvciBldmVudHMuIHtAbGluayBFdmVudEJ1cyNvZmZ9IGNhbiBiZSB1c2VkIHRvCiAgICogcmVtb3ZlIGV2ZW50IHJlZ2lzdHJhdGlvbnMuIExpc3RlbmVycyByZWNlaXZlIGFuIGluc3RhbmNlIG9mIHtAbGluayBFdmVudH0KICAgKiBhcyB0aGUgZmlyc3QgYXJndW1lbnQuIEl0IGFsbG93cyB0aGVtIHRvIGhvb2sgaW50byB0aGUgZXZlbnQgZXhlY3V0aW9uLgogICAqCiAgICogYGBgamF2YXNjcmlwdAogICAqCiAgICogLy8gbGlzdGVuIGZvciBldmVudAogICAqIGV2ZW50QnVzLm9uKCdmb28nLCBmdW5jdGlvbihldmVudCkgewogICAqCiAgICogICAvLyBhY2Nlc3MgZXZlbnQgdHlwZQogICAqICAgZXZlbnQudHlwZTsgLy8gJ2ZvbycKICAgKgogICAqICAgLy8gc3RvcCBwcm9wYWdhdGlvbiB0byBvdGhlciBsaXN0ZW5lcnMKICAgKiAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwogICAqCiAgICogICAvLyBwcmV2ZW50IGV2ZW50IGRlZmF1bHQKICAgKiAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICogfSk7CiAgICoKICAgKiAvLyBsaXN0ZW4gZm9yIGV2ZW50IHdpdGggY3VzdG9tIHBheWxvYWQKICAgKiBldmVudEJ1cy5vbignYmFyJywgZnVuY3Rpb24oZXZlbnQsIHBheWxvYWQpIHsKICAgKiAgIGNvbnNvbGUubG9nKHBheWxvYWQpOwogICAqIH0pOwogICAqCiAgICogLy8gbGlzdGVuIGZvciBldmVudCByZXR1cm5pbmcgdmFsdWUKICAgKiBldmVudEJ1cy5vbignZm9vYmFyJywgZnVuY3Rpb24oZXZlbnQpIHsKICAgKgogICAqICAgLy8gc3RvcCBldmVudCBwcm9wYWdhdGlvbiArIHByZXZlbnQgZGVmYXVsdAogICAqICAgcmV0dXJuIGZhbHNlOwogICAqCiAgICogICAvLyBzdG9wIGV2ZW50IHByb3BhZ2F0aW9uICsgcmV0dXJuIGN1c3RvbSByZXN1bHQKICAgKiAgIHJldHVybiB7CiAgICogICAgIGNvbXBsZXg6ICdsaXN0ZW5pbmcgcmVzdWx0JwogICAqICAgfTsKICAgKiB9KTsKICAgKgogICAqCiAgICogLy8gbGlzdGVuIHdpdGggY3VzdG9tIHByaW9yaXR5IChkZWZhdWx0PTEwMDAsIGhpZ2hlciBpcyBiZXR0ZXIpCiAgICogZXZlbnRCdXMub24oJ3ByaW9yaXR5Zm9vJywgMTUwMCwgZnVuY3Rpb24oZXZlbnQpIHsKICAgKiAgIGNvbnNvbGUubG9nKCdpbnZva2VkIGZpcnN0IScpOwogICAqIH0pOwogICAqCiAgICoKICAgKiAvLyBsaXN0ZW4gZm9yIGV2ZW50IGFuZCBwYXNzIHRoZSBjb250ZXh0IChgdGhpc2ApCiAgICogZXZlbnRCdXMub24oJ2Zvb2JhcicsIGZ1bmN0aW9uKGV2ZW50KSB7CiAgICogICB0aGlzLmZvbygpOwogICAqIH0sIHRoaXMpOwogICAqIGBgYAogICAqCiAgICoKICAgKiAjIyBFbWl0dGluZyBFdmVudHMKICAgKgogICAqIEV2ZW50cyBjYW4gYmUgZW1pdHRlZCB2aWEgdGhlIGV2ZW50IGJ1cyB1c2luZyB7QGxpbmsgRXZlbnRCdXMjZmlyZX0uCiAgICoKICAgKiBgYGBqYXZhc2NyaXB0CiAgICoKICAgKiAvLyBmYWxzZSBpbmRpY2F0ZXMgdGhhdCB0aGUgZGVmYXVsdCBhY3Rpb24KICAgKiAvLyB3YXMgcHJldmVudGVkIGJ5IGxpc3RlbmVycwogICAqIGlmIChldmVudEJ1cy5maXJlKCdmb28nKSA9PT0gZmFsc2UpIHsKICAgKiAgIGNvbnNvbGUubG9nKCdkZWZhdWx0IGhhcyBiZWVuIHByZXZlbnRlZCEnKTsKICAgKiB9OwogICAqCiAgICoKICAgKiAvLyBjdXN0b20gYXJncyArIHJldHVybiB2YWx1ZSBsaXN0ZW5lcgogICAqIGV2ZW50QnVzLm9uKCdzdW0nLCBmdW5jdGlvbihldmVudCwgYSwgYikgewogICAqICAgcmV0dXJuIGEgKyBiOwogICAqIH0pOwogICAqCiAgICogLy8geW91IGNhbiBwYXNzIGN1c3RvbSBhcmd1bWVudHMgKyByZXRyaWV2ZSByZXN1bHQgdmFsdWVzLgogICAqIHZhciBzdW0gPSBldmVudEJ1cy5maXJlKCdzdW0nLCAxLCAyKTsKICAgKiBjb25zb2xlLmxvZyhzdW0pOyAvLyAzCiAgICogYGBgCiAgICovCiAgZnVuY3Rpb24gRXZlbnRCdXMoKSB7CiAgICB0aGlzLl9saXN0ZW5lcnMgPSB7fTsKCiAgICAvLyBjbGVhbnVwIG9uIGRlc3Ryb3kgb24gbG93ZXN0IHByaW9yaXR5IHRvIGFsbG93CiAgICAvLyBtZXNzYWdlIHBhc3NpbmcgdW50aWwgdGhlIGJpdHRlciBlbmQKICAgIHRoaXMub24oJ2RpYWdyYW0uZGVzdHJveScsIDEsIHRoaXMuX2Rlc3Ryb3ksIHRoaXMpOwogIH0KCiAgLyoqCiAgICogUmVnaXN0ZXIgYW4gZXZlbnQgbGlzdGVuZXIgZm9yIGV2ZW50cyB3aXRoIHRoZSBnaXZlbiBuYW1lLgogICAqCiAgICogVGhlIGNhbGxiYWNrIHdpbGwgYmUgaW52b2tlZCB3aXRoIGBldmVudCwgLi4uYWRkaXRpb25hbEFyZ3VtZW50c2AKICAgKiB0aGF0IGhhdmUgYmVlbiBwYXNzZWQgdG8ge0BsaW5rIEV2ZW50QnVzI2ZpcmV9LgogICAqCiAgICogUmV0dXJuaW5nIGZhbHNlIGZyb20gYSBsaXN0ZW5lciB3aWxsIHByZXZlbnQgdGhlIGV2ZW50cyBkZWZhdWx0IGFjdGlvbgogICAqIChpZiBhbnkgaXMgc3BlY2lmaWVkKS4gVG8gc3RvcCBhbiBldmVudCBmcm9tIGJlaW5nIHByb2Nlc3NlZCBmdXJ0aGVyIGluCiAgICogb3RoZXIgbGlzdGVuZXJzIGV4ZWN1dGUge0BsaW5rIEV2ZW50I3N0b3BQcm9wYWdhdGlvbn0uCiAgICoKICAgKiBSZXR1cm5pbmcgYW55dGhpbmcgYnV0IGB1bmRlZmluZWRgIGZyb20gYSBsaXN0ZW5lciB3aWxsIHN0b3AgdGhlIGxpc3RlbmVyIHByb3BhZ2F0aW9uLgogICAqCiAgICogQHBhcmFtIHtzdHJpbmd8QXJyYXk8c3RyaW5nPn0gZXZlbnRzCiAgICogQHBhcmFtIHtudW1iZXJ9IFtwcmlvcml0eT0xMDAwXSB0aGUgcHJpb3JpdHkgaW4gd2hpY2ggdGhpcyBsaXN0ZW5lciBpcyBjYWxsZWQsIGxhcmdlciBpcyBoaWdoZXIKICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjawogICAqIEBwYXJhbSB7T2JqZWN0fSBbdGhhdF0gUGFzcyBjb250ZXh0IChgdGhpc2ApIHRvIHRoZSBjYWxsYmFjawogICAqLwogIEV2ZW50QnVzLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uIChldmVudHMsIHByaW9yaXR5LCBjYWxsYmFjaywgdGhhdCkgewogICAgZXZlbnRzID0gaXNBcnJheSQyKGV2ZW50cykgPyBldmVudHMgOiBbZXZlbnRzXTsKICAgIGlmIChpc0Z1bmN0aW9uKHByaW9yaXR5KSkgewogICAgICB0aGF0ID0gY2FsbGJhY2s7CiAgICAgIGNhbGxiYWNrID0gcHJpb3JpdHk7CiAgICAgIHByaW9yaXR5ID0gREVGQVVMVF9QUklPUklUWTsKICAgIH0KICAgIGlmICghaXNOdW1iZXIkMihwcmlvcml0eSkpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdwcmlvcml0eSBtdXN0IGJlIGEgbnVtYmVyJyk7CiAgICB9CiAgICB2YXIgYWN0dWFsQ2FsbGJhY2sgPSBjYWxsYmFjazsKICAgIGlmICh0aGF0KSB7CiAgICAgIGFjdHVhbENhbGxiYWNrID0gYmluZChjYWxsYmFjaywgdGhhdCk7CgogICAgICAvLyBtYWtlIHN1cmUgd2UgcmVtZW1iZXIgYW5kIGFyZSBhYmxlIHRvIHJlbW92ZQogICAgICAvLyBib3VuZCBjYWxsYmFja3MgdmlhIHtAbGluayAjb2ZmfSB1c2luZyB0aGUgb3JpZ2luYWwKICAgICAgLy8gY2FsbGJhY2sKICAgICAgYWN0dWFsQ2FsbGJhY2tbRk5fUkVGXSA9IGNhbGxiYWNrW0ZOX1JFRl0gfHwgY2FsbGJhY2s7CiAgICB9CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICBldmVudHMuZm9yRWFjaChmdW5jdGlvbiAoZSkgewogICAgICBzZWxmLl9hZGRMaXN0ZW5lcihlLCB7CiAgICAgICAgcHJpb3JpdHk6IHByaW9yaXR5LAogICAgICAgIGNhbGxiYWNrOiBhY3R1YWxDYWxsYmFjaywKICAgICAgICBuZXh0OiBudWxsCiAgICAgIH0pOwogICAgfSk7CiAgfTsKCiAgLyoqCiAgICogUmVnaXN0ZXIgYW4gZXZlbnQgbGlzdGVuZXIgdGhhdCBpcyBleGVjdXRlZCBvbmx5IG9uY2UuCiAgICoKICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnQgdGhlIGV2ZW50IG5hbWUgdG8gcmVnaXN0ZXIgZm9yCiAgICogQHBhcmFtIHtudW1iZXJ9IFtwcmlvcml0eT0xMDAwXSB0aGUgcHJpb3JpdHkgaW4gd2hpY2ggdGhpcyBsaXN0ZW5lciBpcyBjYWxsZWQsIGxhcmdlciBpcyBoaWdoZXIKICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayB0aGUgY2FsbGJhY2sgdG8gZXhlY3V0ZQogICAqIEBwYXJhbSB7T2JqZWN0fSBbdGhhdF0gUGFzcyBjb250ZXh0IChgdGhpc2ApIHRvIHRoZSBjYWxsYmFjawogICAqLwogIEV2ZW50QnVzLnByb3RvdHlwZS5vbmNlID0gZnVuY3Rpb24gKGV2ZW50LCBwcmlvcml0eSwgY2FsbGJhY2ssIHRoYXQpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIGlmIChpc0Z1bmN0aW9uKHByaW9yaXR5KSkgewogICAgICB0aGF0ID0gY2FsbGJhY2s7CiAgICAgIGNhbGxiYWNrID0gcHJpb3JpdHk7CiAgICAgIHByaW9yaXR5ID0gREVGQVVMVF9QUklPUklUWTsKICAgIH0KICAgIGlmICghaXNOdW1iZXIkMihwcmlvcml0eSkpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdwcmlvcml0eSBtdXN0IGJlIGEgbnVtYmVyJyk7CiAgICB9CiAgICBmdW5jdGlvbiB3cmFwcGVkQ2FsbGJhY2soKSB7CiAgICAgIHdyYXBwZWRDYWxsYmFjay5fX2lzVG9tYiA9IHRydWU7CiAgICAgIHZhciByZXN1bHQgPSBjYWxsYmFjay5hcHBseSh0aGF0LCBhcmd1bWVudHMpOwogICAgICBzZWxmLm9mZihldmVudCwgd3JhcHBlZENhbGxiYWNrKTsKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KCiAgICAvLyBtYWtlIHN1cmUgd2UgcmVtZW1iZXIgYW5kIGFyZSBhYmxlIHRvIHJlbW92ZQogICAgLy8gYm91bmQgY2FsbGJhY2tzIHZpYSB7QGxpbmsgI29mZn0gdXNpbmcgdGhlIG9yaWdpbmFsCiAgICAvLyBjYWxsYmFjawogICAgd3JhcHBlZENhbGxiYWNrW0ZOX1JFRl0gPSBjYWxsYmFjazsKICAgIHRoaXMub24oZXZlbnQsIHByaW9yaXR5LCB3cmFwcGVkQ2FsbGJhY2spOwogIH07CgogIC8qKgogICAqIFJlbW92ZXMgZXZlbnQgbGlzdGVuZXJzIGJ5IGV2ZW50IGFuZCBjYWxsYmFjay4KICAgKgogICAqIElmIG5vIGNhbGxiYWNrIGlzIGdpdmVuLCBhbGwgbGlzdGVuZXJzIGZvciBhIGdpdmVuIGV2ZW50IG5hbWUgYXJlIGJlaW5nIHJlbW92ZWQuCiAgICoKICAgKiBAcGFyYW0ge3N0cmluZ3xBcnJheTxzdHJpbmc+fSBldmVudHMKICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2FsbGJhY2tdCiAgICovCiAgRXZlbnRCdXMucHJvdG90eXBlLm9mZiA9IGZ1bmN0aW9uIChldmVudHMsIGNhbGxiYWNrKSB7CiAgICBldmVudHMgPSBpc0FycmF5JDIoZXZlbnRzKSA/IGV2ZW50cyA6IFtldmVudHNdOwogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgZXZlbnRzLmZvckVhY2goZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgIHNlbGYuX3JlbW92ZUxpc3RlbmVyKGV2ZW50LCBjYWxsYmFjayk7CiAgICB9KTsKICB9OwoKICAvKioKICAgKiBDcmVhdGUgYW4gRXZlbnRCdXMgZXZlbnQuCiAgICoKICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YQogICAqCiAgICogQHJldHVybiB7T2JqZWN0fSBldmVudCwgcmVjb2duaXplZCBieSB0aGUgZXZlbnRCdXMKICAgKi8KICBFdmVudEJ1cy5wcm90b3R5cGUuY3JlYXRlRXZlbnQgPSBmdW5jdGlvbiAoZGF0YSkgewogICAgdmFyIGV2ZW50ID0gbmV3IEludGVybmFsRXZlbnQoKTsKICAgIGV2ZW50LmluaXQoZGF0YSk7CiAgICByZXR1cm4gZXZlbnQ7CiAgfTsKCiAgLyoqCiAgICogRmlyZXMgYSBuYW1lZCBldmVudC4KICAgKgogICAqIEBleGFtcGxlCiAgICoKICAgKiAvLyBmaXJlIGV2ZW50IGJ5IG5hbWUKICAgKiBldmVudHMuZmlyZSgnZm9vJyk7CiAgICoKICAgKiAvLyBmaXJlIGV2ZW50IG9iamVjdCB3aXRoIG5lc3RlZCB0eXBlCiAgICogdmFyIGV2ZW50ID0geyB0eXBlOiAnZm9vJyB9OwogICAqIGV2ZW50cy5maXJlKGV2ZW50KTsKICAgKgogICAqIC8vIGZpcmUgZXZlbnQgd2l0aCBleHBsaWNpdCB0eXBlCiAgICogdmFyIGV2ZW50ID0geyB4OiAxMCwgeTogMjAgfTsKICAgKiBldmVudHMuZmlyZSgnZWxlbWVudC5tb3ZlZCcsIGV2ZW50KTsKICAgKgogICAqIC8vIHBhc3MgYWRkaXRpb25hbCBhcmd1bWVudHMgdG8gdGhlIGV2ZW50CiAgICogZXZlbnRzLm9uKCdmb28nLCBmdW5jdGlvbihldmVudCwgYmFyKSB7CiAgICogICBhbGVydChiYXIpOwogICAqIH0pOwogICAqCiAgICogZXZlbnRzLmZpcmUoeyB0eXBlOiAnZm9vJyB9LCAnSSBhbSBiYXIhJyk7CiAgICoKICAgKiBAcGFyYW0ge3N0cmluZ30gW25hbWVdIHRoZSBvcHRpb25hbCBldmVudCBuYW1lCiAgICogQHBhcmFtIHtPYmplY3R9IFtldmVudF0gdGhlIGV2ZW50IG9iamVjdAogICAqIEBwYXJhbSB7Li4uT2JqZWN0fSBhZGRpdGlvbmFsIGFyZ3VtZW50cyB0byBiZSBwYXNzZWQgdG8gdGhlIGNhbGxiYWNrIGZ1bmN0aW9ucwogICAqCiAgICogQHJldHVybiB7Ym9vbGVhbn0gdGhlIGV2ZW50cyByZXR1cm4gdmFsdWUsIGlmIHNwZWNpZmllZCBvciBmYWxzZSBpZiB0aGUKICAgKiAgICAgICAgICAgICAgICAgICBkZWZhdWx0IGFjdGlvbiB3YXMgcHJldmVudGVkIGJ5IGxpc3RlbmVycwogICAqLwogIEV2ZW50QnVzLnByb3RvdHlwZS5maXJlID0gZnVuY3Rpb24gKHR5cGUsIGRhdGEpIHsKICAgIHZhciBldmVudCwgZmlyc3RMaXN0ZW5lciwgcmV0dXJuVmFsdWUsIGFyZ3M7CiAgICBhcmdzID0gc2xpY2UuY2FsbChhcmd1bWVudHMpOwogICAgaWYgKHR5cGVvZiB0eXBlID09PSAnb2JqZWN0JykgewogICAgICBkYXRhID0gdHlwZTsKICAgICAgdHlwZSA9IGRhdGEudHlwZTsKICAgIH0KICAgIGlmICghdHlwZSkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ25vIGV2ZW50IHR5cGUgc3BlY2lmaWVkJyk7CiAgICB9CiAgICBmaXJzdExpc3RlbmVyID0gdGhpcy5fbGlzdGVuZXJzW3R5cGVdOwogICAgaWYgKCFmaXJzdExpc3RlbmVyKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICAvLyB3ZSBtYWtlIHN1cmUgd2UgZmlyZSBpbnN0YW5jZXMgb2Ygb3VyIGhvbWUgbWFkZQogICAgLy8gZXZlbnRzIGhlcmUuIFdlIHdyYXAgdGhlbSBvbmx5IG9uY2UsIHRob3VnaAogICAgaWYgKGRhdGEgaW5zdGFuY2VvZiBJbnRlcm5hbEV2ZW50KSB7CiAgICAgIC8vIHdlIGFyZSBmaW5lLCB3ZSBhbHJlYWQgaGF2ZSBhbiBldmVudAogICAgICBldmVudCA9IGRhdGE7CiAgICB9IGVsc2UgewogICAgICBldmVudCA9IHRoaXMuY3JlYXRlRXZlbnQoZGF0YSk7CiAgICB9CgogICAgLy8gZW5zdXJlIHdlIHBhc3MgdGhlIGV2ZW50IGFzIHRoZSBmaXJzdCBwYXJhbWV0ZXIKICAgIGFyZ3NbMF0gPSBldmVudDsKCiAgICAvLyBvcmlnaW5hbCBldmVudCB0eXBlIChpbiBjYXNlIHdlIGRlbGVnYXRlKQogICAgdmFyIG9yaWdpbmFsVHlwZSA9IGV2ZW50LnR5cGU7CgogICAgLy8gdXBkYXRlIGV2ZW50IHR5cGUgYmVmb3JlIGRlbGVnYXRpb24KICAgIGlmICh0eXBlICE9PSBvcmlnaW5hbFR5cGUpIHsKICAgICAgZXZlbnQudHlwZSA9IHR5cGU7CiAgICB9CiAgICB0cnkgewogICAgICByZXR1cm5WYWx1ZSA9IHRoaXMuX2ludm9rZUxpc3RlbmVycyhldmVudCwgYXJncywgZmlyc3RMaXN0ZW5lcik7CiAgICB9IGZpbmFsbHkgewogICAgICAvLyByZXNldCBldmVudCB0eXBlIGFmdGVyIGRlbGVnYXRpb24KICAgICAgaWYgKHR5cGUgIT09IG9yaWdpbmFsVHlwZSkgewogICAgICAgIGV2ZW50LnR5cGUgPSBvcmlnaW5hbFR5cGU7CiAgICAgIH0KICAgIH0KCiAgICAvLyBzZXQgdGhlIHJldHVybiB2YWx1ZSB0byBmYWxzZSBpZiB0aGUgZXZlbnQgZGVmYXVsdAogICAgLy8gZ290IHByZXZlbnRlZCBhbmQgbm8gb3RoZXIgcmV0dXJuIHZhbHVlIGV4aXN0cwogICAgaWYgKHJldHVyblZhbHVlID09PSB1bmRlZmluZWQgJiYgZXZlbnQuZGVmYXVsdFByZXZlbnRlZCkgewogICAgICByZXR1cm5WYWx1ZSA9IGZhbHNlOwogICAgfQogICAgcmV0dXJuIHJldHVyblZhbHVlOwogIH07CiAgRXZlbnRCdXMucHJvdG90eXBlLmhhbmRsZUVycm9yID0gZnVuY3Rpb24gKGVycm9yKSB7CiAgICByZXR1cm4gdGhpcy5maXJlKCdlcnJvcicsIHsKICAgICAgZXJyb3I6IGVycm9yCiAgICB9KSA9PT0gZmFsc2U7CiAgfTsKICBFdmVudEJ1cy5wcm90b3R5cGUuX2Rlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7CiAgICB0aGlzLl9saXN0ZW5lcnMgPSB7fTsKICB9OwogIEV2ZW50QnVzLnByb3RvdHlwZS5faW52b2tlTGlzdGVuZXJzID0gZnVuY3Rpb24gKGV2ZW50LCBhcmdzLCBsaXN0ZW5lcikgewogICAgdmFyIHJldHVyblZhbHVlOwogICAgd2hpbGUgKGxpc3RlbmVyKSB7CiAgICAgIC8vIGhhbmRsZSBzdG9wcGVkIHByb3BhZ2F0aW9uCiAgICAgIGlmIChldmVudC5jYW5jZWxCdWJibGUpIHsKICAgICAgICBicmVhazsKICAgICAgfQogICAgICByZXR1cm5WYWx1ZSA9IHRoaXMuX2ludm9rZUxpc3RlbmVyKGV2ZW50LCBhcmdzLCBsaXN0ZW5lcik7CiAgICAgIGxpc3RlbmVyID0gbGlzdGVuZXIubmV4dDsKICAgIH0KICAgIHJldHVybiByZXR1cm5WYWx1ZTsKICB9OwogIEV2ZW50QnVzLnByb3RvdHlwZS5faW52b2tlTGlzdGVuZXIgPSBmdW5jdGlvbiAoZXZlbnQsIGFyZ3MsIGxpc3RlbmVyKSB7CiAgICB2YXIgcmV0dXJuVmFsdWU7CiAgICBpZiAobGlzdGVuZXIuY2FsbGJhY2suX19pc1RvbWIpIHsKICAgICAgcmV0dXJuIHJldHVyblZhbHVlOwogICAgfQogICAgdHJ5IHsKICAgICAgLy8gcmV0dXJuaW5nIGZhbHNlIHByZXZlbnRzIHRoZSBkZWZhdWx0IGFjdGlvbgogICAgICByZXR1cm5WYWx1ZSA9IGludm9rZUZ1bmN0aW9uKGxpc3RlbmVyLmNhbGxiYWNrLCBhcmdzKTsKCiAgICAgIC8vIHN0b3AgcHJvcGFnYXRpb24gb24gcmV0dXJuIHZhbHVlCiAgICAgIGlmIChyZXR1cm5WYWx1ZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgZXZlbnQucmV0dXJuVmFsdWUgPSByZXR1cm5WYWx1ZTsKICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgfQoKICAgICAgLy8gcHJldmVudCBkZWZhdWx0IG9uIHJldHVybiBmYWxzZQogICAgICBpZiAocmV0dXJuVmFsdWUgPT09IGZhbHNlKSB7CiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgfQogICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgaWYgKCF0aGlzLmhhbmRsZUVycm9yKGVycm9yKSkgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ3VuaGFuZGxlZCBlcnJvciBpbiBldmVudCBsaXN0ZW5lcicsIGVycm9yKTsKICAgICAgICB0aHJvdyBlcnJvcjsKICAgICAgfQogICAgfQogICAgcmV0dXJuIHJldHVyblZhbHVlOwogIH07CgogIC8qCiAgICogQWRkIG5ldyBsaXN0ZW5lciB3aXRoIGEgY2VydGFpbiBwcmlvcml0eSB0byB0aGUgbGlzdAogICAqIG9mIGxpc3RlbmVycyAoZm9yIHRoZSBnaXZlbiBldmVudCkuCiAgICoKICAgKiBUaGUgc2VtYW50aWNzIG9mIGxpc3RlbmVyIHJlZ2lzdHJhdGlvbiAvIGxpc3RlbmVyIGV4ZWN1dGlvbiBhcmUKICAgKiBmaXJzdCByZWdpc3RlciwgZmlyc3Qgc2VydmU6IE5ldyBsaXN0ZW5lcnMgd2lsbCBhbHdheXMgYmUgaW5zZXJ0ZWQKICAgKiBhZnRlciBleGlzdGluZyBsaXN0ZW5lcnMgd2l0aCB0aGUgc2FtZSBwcmlvcml0eS4KICAgKgogICAqIEV4YW1wbGU6IEluc2VydGluZyB0d28gbGlzdGVuZXJzIHdpdGggcHJpb3JpdHkgMTAwMCBhbmQgMTMwMAogICAqCiAgICogICAgKiBiZWZvcmU6IFsgMTUwMCwgMTUwMCwgMTAwMCwgMTAwMCBdCiAgICogICAgKiBhZnRlcjogWyAxNTAwLCAxNTAwLCAobmV3PTEzMDApLCAxMDAwLCAxMDAwLCAobmV3PTEwMDApIF0KICAgKgogICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudAogICAqIEBwYXJhbSB7T2JqZWN0fSBsaXN0ZW5lciB7IHByaW9yaXR5LCBjYWxsYmFjayB9CiAgICovCiAgRXZlbnRCdXMucHJvdG90eXBlLl9hZGRMaXN0ZW5lciA9IGZ1bmN0aW9uIChldmVudCwgbmV3TGlzdGVuZXIpIHsKICAgIHZhciBsaXN0ZW5lciA9IHRoaXMuX2dldExpc3RlbmVycyhldmVudCksCiAgICAgIHByZXZpb3VzTGlzdGVuZXI7CgogICAgLy8gbm8gcHJpb3IgbGlzdGVuZXJzCiAgICBpZiAoIWxpc3RlbmVyKSB7CiAgICAgIHRoaXMuX3NldExpc3RlbmVycyhldmVudCwgbmV3TGlzdGVuZXIpOwogICAgICByZXR1cm47CiAgICB9CgogICAgLy8gZW5zdXJlIHdlIG9yZGVyIGxpc3RlbmVycyBieSBwcmlvcml0eSBmcm9tCiAgICAvLyAwIChoaWdoKSB0byBuID4gMCAobG93KQogICAgd2hpbGUgKGxpc3RlbmVyKSB7CiAgICAgIGlmIChsaXN0ZW5lci5wcmlvcml0eSA8IG5ld0xpc3RlbmVyLnByaW9yaXR5KSB7CiAgICAgICAgbmV3TGlzdGVuZXIubmV4dCA9IGxpc3RlbmVyOwogICAgICAgIGlmIChwcmV2aW91c0xpc3RlbmVyKSB7CiAgICAgICAgICBwcmV2aW91c0xpc3RlbmVyLm5leHQgPSBuZXdMaXN0ZW5lcjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5fc2V0TGlzdGVuZXJzKGV2ZW50LCBuZXdMaXN0ZW5lcik7CiAgICAgICAgfQogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBwcmV2aW91c0xpc3RlbmVyID0gbGlzdGVuZXI7CiAgICAgIGxpc3RlbmVyID0gbGlzdGVuZXIubmV4dDsKICAgIH0KCiAgICAvLyBhZGQgbmV3IGxpc3RlbmVyIHRvIGJhY2sKICAgIHByZXZpb3VzTGlzdGVuZXIubmV4dCA9IG5ld0xpc3RlbmVyOwogIH07CiAgRXZlbnRCdXMucHJvdG90eXBlLl9nZXRMaXN0ZW5lcnMgPSBmdW5jdGlvbiAobmFtZSkgewogICAgcmV0dXJuIHRoaXMuX2xpc3RlbmVyc1tuYW1lXTsKICB9OwogIEV2ZW50QnVzLnByb3RvdHlwZS5fc2V0TGlzdGVuZXJzID0gZnVuY3Rpb24gKG5hbWUsIGxpc3RlbmVyKSB7CiAgICB0aGlzLl9saXN0ZW5lcnNbbmFtZV0gPSBsaXN0ZW5lcjsKICB9OwogIEV2ZW50QnVzLnByb3RvdHlwZS5fcmVtb3ZlTGlzdGVuZXIgPSBmdW5jdGlvbiAoZXZlbnQsIGNhbGxiYWNrKSB7CiAgICB2YXIgbGlzdGVuZXIgPSB0aGlzLl9nZXRMaXN0ZW5lcnMoZXZlbnQpLAogICAgICBuZXh0TGlzdGVuZXIsCiAgICAgIHByZXZpb3VzTGlzdGVuZXIsCiAgICAgIGxpc3RlbmVyQ2FsbGJhY2s7CiAgICBpZiAoIWNhbGxiYWNrKSB7CiAgICAgIC8vIGNsZWFyIGxpc3RlbmVycwogICAgICB0aGlzLl9zZXRMaXN0ZW5lcnMoZXZlbnQsIG51bGwpOwogICAgICByZXR1cm47CiAgICB9CiAgICB3aGlsZSAobGlzdGVuZXIpIHsKICAgICAgbmV4dExpc3RlbmVyID0gbGlzdGVuZXIubmV4dDsKICAgICAgbGlzdGVuZXJDYWxsYmFjayA9IGxpc3RlbmVyLmNhbGxiYWNrOwogICAgICBpZiAobGlzdGVuZXJDYWxsYmFjayA9PT0gY2FsbGJhY2sgfHwgbGlzdGVuZXJDYWxsYmFja1tGTl9SRUZdID09PSBjYWxsYmFjaykgewogICAgICAgIGlmIChwcmV2aW91c0xpc3RlbmVyKSB7CiAgICAgICAgICBwcmV2aW91c0xpc3RlbmVyLm5leHQgPSBuZXh0TGlzdGVuZXI7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIG5ldyBmaXJzdCBsaXN0ZW5lcgogICAgICAgICAgdGhpcy5fc2V0TGlzdGVuZXJzKGV2ZW50LCBuZXh0TGlzdGVuZXIpOwogICAgICAgIH0KICAgICAgfQogICAgICBwcmV2aW91c0xpc3RlbmVyID0gbGlzdGVuZXI7CiAgICAgIGxpc3RlbmVyID0gbmV4dExpc3RlbmVyOwogICAgfQogIH07CgogIC8qKgogICAqIEEgZXZlbnQgdGhhdCBpcyBlbWl0dGVkIHZpYSB0aGUgZXZlbnQgYnVzLgogICAqLwogIGZ1bmN0aW9uIEludGVybmFsRXZlbnQoKSB7fQogIEludGVybmFsRXZlbnQucHJvdG90eXBlLnN0b3BQcm9wYWdhdGlvbiA9IGZ1bmN0aW9uICgpIHsKICAgIHRoaXMuY2FuY2VsQnViYmxlID0gdHJ1ZTsKICB9OwogIEludGVybmFsRXZlbnQucHJvdG90eXBlLnByZXZlbnREZWZhdWx0ID0gZnVuY3Rpb24gKCkgewogICAgdGhpcy5kZWZhdWx0UHJldmVudGVkID0gdHJ1ZTsKICB9OwogIEludGVybmFsRXZlbnQucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoZGF0YSkgewogICAgYXNzaWduKHRoaXMsIGRhdGEgfHwge30pOwogIH07CgogIC8qKgogICAqIEludm9rZSBmdW5jdGlvbi4gQmUgZmFzdC4uLgogICAqCiAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4KICAgKiBAcGFyYW0ge0FycmF5PE9iamVjdD59IGFyZ3MKICAgKgogICAqIEByZXR1cm4ge0FueX0KICAgKi8KICBmdW5jdGlvbiBpbnZva2VGdW5jdGlvbihmbiwgYXJncykgewogICAgcmV0dXJuIGZuLmFwcGx5KG51bGwsIGFyZ3MpOwogIH0KCiAgZnVuY3Rpb24gY291bnREZWNpbWFscyhudW1iZXIpIHsKICAgIGNvbnN0IG51bSA9IEJpZyhudW1iZXIpOwogICAgaWYgKG51bS50b1N0cmluZygpID09PSBudW0udG9GaXhlZCgwKSkgcmV0dXJuIDA7CiAgICByZXR1cm4gbnVtLnRvRml4ZWQoKS5zcGxpdCgnLicpWzFdLmxlbmd0aCB8fCAwOwogIH0KICBmdW5jdGlvbiBpc1ZhbGlkTnVtYmVyKHZhbHVlKSB7CiAgICByZXR1cm4gKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgfHwgdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykgJiYgdmFsdWUgIT09ICcnICYmICFpc05hTihOdW1iZXIodmFsdWUpKTsKICB9CiAgZnVuY3Rpb24gd2lsbEtleVByb2R1Y2VWYWxpZE51bWJlcihrZXksIHByZXZpb3VzVmFsdWUsIGNhcmV0SW5kZXgsIHNlbGVjdGlvbldpZHRoLCBkZWNpbWFsRGlnaXRzKSB7CiAgICAvLyBEb3QgYW5kIGNvbW1hIGFyZSBib3RoIHRyZWF0ZWQgYXMgZG90CiAgICBwcmV2aW91c1ZhbHVlID0gcHJldmlvdXNWYWx1ZS5yZXBsYWNlKCcsJywgJy4nKTsKICAgIGNvbnN0IGlzRmlyc3REb3QgPSAhcHJldmlvdXNWYWx1ZS5pbmNsdWRlcygnLicpICYmIChrZXkgPT09ICcuJyB8fCBrZXkgPT09ICcsJyk7CiAgICBjb25zdCBpc0ZpcnN0TWludXMgPSAhcHJldmlvdXNWYWx1ZS5pbmNsdWRlcygnLScpICYmIGtleSA9PT0gJy0nICYmIGNhcmV0SW5kZXggPT09IDA7CiAgICBjb25zdCBrZXlwcmVzc0lzTnVtZXJpYyA9IC9eWzAtOV0kL2kudGVzdChrZXkpOwogICAgY29uc3QgZG90SW5kZXggPSBwcmV2aW91c1ZhbHVlID09PSB1bmRlZmluZWQgPyAtMSA6IHByZXZpb3VzVmFsdWUuaW5kZXhPZignLicpOwoKICAgIC8vIElmIHRoZSBjYXJldCBpcyBwb3NpdGlvbmVkIGFmdGVyIGEgZG90LCBhbmQgdGhlIGN1cnJlbnQgZGVjaW1hbCBkaWdpdHMgY291bnQgaXMgZXF1YWwgb3IgZ3JlYXRlciB0byB0aGUgbWF4aW11bSwgZGlzYWxsb3cgdGhlIGtleSBwcmVzcwogICAgY29uc3Qgb3ZlcmZsb3dzRGVjaW1hbFNwYWNlID0gdHlwZW9mIGRlY2ltYWxEaWdpdHMgPT09ICdudW1iZXInICYmIHNlbGVjdGlvbldpZHRoID09PSAwICYmIGRvdEluZGV4ICE9PSAtMSAmJiBwcmV2aW91c1ZhbHVlLmluY2x1ZGVzKCcuJykgJiYgcHJldmlvdXNWYWx1ZS5zcGxpdCgnLicpWzFdLmxlbmd0aCA+PSBkZWNpbWFsRGlnaXRzICYmIGNhcmV0SW5kZXggPiBkb3RJbmRleDsKICAgIGNvbnN0IGtleXByZXNzSXNBbGxvd2VkQ2hhciA9IGtleXByZXNzSXNOdW1lcmljIHx8IGRlY2ltYWxEaWdpdHMgIT09IDAgJiYgaXNGaXJzdERvdCB8fCBpc0ZpcnN0TWludXM7CiAgICByZXR1cm4ga2V5cHJlc3NJc0FsbG93ZWRDaGFyICYmICFvdmVyZmxvd3NEZWNpbWFsU3BhY2U7CiAgfQogIGZ1bmN0aW9uIGlzTnVsbEVxdWl2YWxlbnRWYWx1ZSh2YWx1ZSkgewogICAgcmV0dXJuIHZhbHVlID09PSB1bmRlZmluZWQgfHwgdmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09ICcnOwogIH0KCiAgY29uc3QgRU1BSUxfUEFUVEVSTiA9IC9eW2EtekEtWjAtOS4hIyQlJicqKy89P15fYHt8fX4tXStAW2EtekEtWjAtOV0oPzpbYS16QS1aMC05LV17MCw2MX1bYS16QS1aMC05XSk/KD86XC5bYS16QS1aMC05XSg/OlthLXpBLVowLTktXXswLDYxfVthLXpBLVowLTldKT8pKiQvOwogIGNvbnN0IFBIT05FX1BBVFRFUk4gPSAvKFwrfDAwKSgyOTd8OTN8MjQ0fDEyNjR8MzU4fDM1NXwzNzZ8OTcxfDU0fDM3NHwxNjg0fDEyNjh8NjF8NDN8OTk0fDI1N3wzMnwyMjl8MjI2fDg4MHwzNTl8OTczfDEyNDJ8Mzg3fDU5MHwzNzV8NTAxfDE0NDF8NTkxfDU1fDEyNDZ8NjczfDk3NXwyNjd8MjM2fDF8NjF8NDF8NTZ8ODZ8MjI1fDIzN3wyNDN8MjQyfDY4Mnw1N3wyNjl8MjM4fDUwNnw1M3w1OTk5fDYxfDEzNDV8MzU3fDQyMHw0OXwyNTN8MTc2N3w0NXwxODA5fDE4Mjl8MTg0OXwyMTN8NTkzfDIwfDI5MXwyMTJ8MzR8MzcyfDI1MXwzNTh8Njc5fDUwMHwzM3wyOTh8NjkxfDI0MXw0NHw5OTV8NDR8MjMzfDM1MHwyMjR8NTkwfDIyMHwyNDV8MjQwfDMwfDE0NzN8Mjk5fDUwMnw1OTR8MTY3MXw1OTJ8ODUyfDUwNHwzODV8NTA5fDM2fDYyfDQ0fDkxfDI0NnwzNTN8OTh8OTY0fDM1NHw5NzJ8Mzl8MTg3Nnw0NHw5NjJ8ODF8NzZ8Nzd8MjU0fDk5Nnw4NTV8Njg2fDE4Njl8ODJ8MzgzfDk2NXw4NTZ8OTYxfDIzMXwyMTh8MTc1OHw0MjN8OTR8MjY2fDM3MHwzNTJ8MzcxfDg1M3w1OTB8MjEyfDM3N3wzNzN8MjYxfDk2MHw1Mnw2OTJ8Mzg5fDIyM3wzNTZ8OTV8MzgyfDk3NnwxNjcwfDI1OHwyMjJ8MTY2NHw1OTZ8MjMwfDI2NXw2MHwyNjJ8MjY0fDY4N3wyMjd8NjcyfDIzNHw1MDV8NjgzfDMxfDQ3fDk3N3w2NzR8NjR8OTY4fDkyfDUwN3w2NHw1MXw2M3w2ODB8Njc1fDQ4fDE3ODd8MTkzOXw4NTB8MzUxfDU5NXw5NzB8Njg5fDk3NHwyNjJ8NDB8N3wyNTB8OTY2fDI0OXwyMjF8NjV8NTAwfDQ3Nzl8Njc3fDIzMnw1MDN8Mzc4fDI1Mnw1MDh8MzgxfDIxMXwyMzl8NTk3fDQyMXwzODZ8NDZ8MjY4fDE3MjF8MjQ4fDk2M3wxNjQ5fDIzNXwyMjh8NjZ8OTkyfDY5MHw5OTN8NjcwfDY3NnwxODY4fDIxNnw5MHw2ODh8ODg2fDI1NXwyNTZ8MzgwfDU5OHwxfDk5OHwzOTA2Njk4fDM3OXwxNzg0fDU4fDEyODR8MTM0MHw4NHw2Nzh8NjgxfDY4NXw5Njd8Mjd8MjYwfDI2MykoOVs5NzZdXGR8OFs5ODc1MzBdXGR8Nls5ODddXGR8NVs5MF1cZHw0MlxkfDNbODc1XVxkfDJbOTg2NTQzMjFdXGR8OVs4NTQzMjEwXXw4WzY0MjFdfDZbNjU0MzIxMF18NVs4NzY1NDMyMV18NFs5ODc2NTQzMTBdfDNbOTY0MzIxMF18Mls3MF18N3wxKVxkezQsMjB9JC87CiAgY2xhc3MgVmFsaWRhdG9yIHsKICAgIHZhbGlkYXRlRmllbGQoZmllbGQsIHZhbHVlKSB7CiAgICAgIGNvbnN0IHsKICAgICAgICB0eXBlLAogICAgICAgIHZhbGlkYXRlCiAgICAgIH0gPSBmaWVsZDsKICAgICAgbGV0IGVycm9ycyA9IFtdOwogICAgICBpZiAodHlwZSA9PT0gJ251bWJlcicpIHsKICAgICAgICBjb25zdCB7CiAgICAgICAgICBkZWNpbWFsRGlnaXRzLAogICAgICAgICAgc3RlcAogICAgICAgIH0gPSBmaWVsZDsKICAgICAgICBpZiAodmFsdWUgPT09ICdOYU4nKSB7CiAgICAgICAgICBlcnJvcnMgPSBbLi4uZXJyb3JzLCAnVmFsdWUgaXMgbm90IGEgbnVtYmVyLiddOwogICAgICAgIH0gZWxzZSBpZiAodmFsdWUpIHsKICAgICAgICAgIGlmIChkZWNpbWFsRGlnaXRzID49IDAgJiYgY291bnREZWNpbWFscyh2YWx1ZSkgPiBkZWNpbWFsRGlnaXRzKSB7CiAgICAgICAgICAgIGVycm9ycyA9IFsuLi5lcnJvcnMsICdWYWx1ZSBpcyBleHBlY3RlZCB0byAnICsgKGRlY2ltYWxEaWdpdHMgPT09IDAgPyAnYmUgYW4gaW50ZWdlcicgOiBgaGF2ZSBhdCBtb3N0ICR7ZGVjaW1hbERpZ2l0c30gZGVjaW1hbCBkaWdpdCR7ZGVjaW1hbERpZ2l0cyA+IDEgPyAncycgOiAnJ31gKSArICcuJ107CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoc3RlcCkgewogICAgICAgICAgICBjb25zdCBiaWdWYWx1ZSA9IEJpZyh2YWx1ZSk7CiAgICAgICAgICAgIGNvbnN0IGJpZ1N0ZXAgPSBCaWcoc3RlcCk7CiAgICAgICAgICAgIGNvbnN0IG9mZnNldCA9IGJpZ1ZhbHVlLm1vZChiaWdTdGVwKTsKICAgICAgICAgICAgaWYgKG9mZnNldC5jbXAoMCkgIT09IDApIHsKICAgICAgICAgICAgICBjb25zdCBwcmV2aW91c1ZhbHVlID0gYmlnVmFsdWUubWludXMob2Zmc2V0KTsKICAgICAgICAgICAgICBjb25zdCBuZXh0VmFsdWUgPSBwcmV2aW91c1ZhbHVlLnBsdXMoYmlnU3RlcCk7CiAgICAgICAgICAgICAgZXJyb3JzID0gWy4uLmVycm9ycywgYFBsZWFzZSBzZWxlY3QgYSB2YWxpZCB2YWx1ZSwgdGhlIHR3byBuZWFyZXN0IHZhbGlkIHZhbHVlcyBhcmUgJHtwcmV2aW91c1ZhbHVlfSBhbmQgJHtuZXh0VmFsdWV9LmBdOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmICghdmFsaWRhdGUpIHsKICAgICAgICByZXR1cm4gZXJyb3JzOwogICAgICB9CiAgICAgIGlmICh2YWxpZGF0ZS5wYXR0ZXJuICYmIHZhbHVlICYmICFuZXcgUmVnRXhwKHZhbGlkYXRlLnBhdHRlcm4pLnRlc3QodmFsdWUpKSB7CiAgICAgICAgZXJyb3JzID0gWy4uLmVycm9ycywgYEZpZWxkIG11c3QgbWF0Y2ggcGF0dGVybiAke3ZhbGlkYXRlLnBhdHRlcm59LmBdOwogICAgICB9CiAgICAgIGlmICh2YWxpZGF0ZS5yZXF1aXJlZCAmJiAoaXNOaWwodmFsdWUpIHx8IHZhbHVlID09PSAnJykpIHsKICAgICAgICBlcnJvcnMgPSBbLi4uZXJyb3JzLCAnRmllbGQgaXMgcmVxdWlyZWQuJ107CiAgICAgIH0KICAgICAgaWYgKCdtaW4nIGluIHZhbGlkYXRlICYmIHZhbHVlICYmIHZhbHVlIDwgdmFsaWRhdGUubWluKSB7CiAgICAgICAgZXJyb3JzID0gWy4uLmVycm9ycywgYEZpZWxkIG11c3QgaGF2ZSBtaW5pbXVtIHZhbHVlIG9mICR7dmFsaWRhdGUubWlufS5gXTsKICAgICAgfQogICAgICBpZiAoJ21heCcgaW4gdmFsaWRhdGUgJiYgdmFsdWUgJiYgdmFsdWUgPiB2YWxpZGF0ZS5tYXgpIHsKICAgICAgICBlcnJvcnMgPSBbLi4uZXJyb3JzLCBgRmllbGQgbXVzdCBoYXZlIG1heGltdW0gdmFsdWUgb2YgJHt2YWxpZGF0ZS5tYXh9LmBdOwogICAgICB9CiAgICAgIGlmICgnbWluTGVuZ3RoJyBpbiB2YWxpZGF0ZSAmJiB2YWx1ZSAmJiB2YWx1ZS50cmltKCkubGVuZ3RoIDwgdmFsaWRhdGUubWluTGVuZ3RoKSB7CiAgICAgICAgZXJyb3JzID0gWy4uLmVycm9ycywgYEZpZWxkIG11c3QgaGF2ZSBtaW5pbXVtIGxlbmd0aCBvZiAke3ZhbGlkYXRlLm1pbkxlbmd0aH0uYF07CiAgICAgIH0KICAgICAgaWYgKCdtYXhMZW5ndGgnIGluIHZhbGlkYXRlICYmIHZhbHVlICYmIHZhbHVlLnRyaW0oKS5sZW5ndGggPiB2YWxpZGF0ZS5tYXhMZW5ndGgpIHsKICAgICAgICBlcnJvcnMgPSBbLi4uZXJyb3JzLCBgRmllbGQgbXVzdCBoYXZlIG1heGltdW0gbGVuZ3RoIG9mICR7dmFsaWRhdGUubWF4TGVuZ3RofS5gXTsKICAgICAgfQogICAgICBpZiAoJ3ZhbGlkYXRpb25UeXBlJyBpbiB2YWxpZGF0ZSAmJiB2YWx1ZSAmJiB2YWxpZGF0ZS52YWxpZGF0aW9uVHlwZSA9PT0gJ3Bob25lJyAmJiAhUEhPTkVfUEFUVEVSTi50ZXN0KHZhbHVlKSkgewogICAgICAgIGVycm9ycyA9IFsuLi5lcnJvcnMsICdGaWVsZCBtdXN0IGJlIGEgdmFsaWQgIGludGVybmF0aW9uYWwgcGhvbmUgbnVtYmVyLiAoZS5nLiArNDkzMDY2NDA0MDkwMCknXTsKICAgICAgfQogICAgICBpZiAoJ3ZhbGlkYXRpb25UeXBlJyBpbiB2YWxpZGF0ZSAmJiB2YWx1ZSAmJiB2YWxpZGF0ZS52YWxpZGF0aW9uVHlwZSA9PT0gJ2VtYWlsJyAmJiAhRU1BSUxfUEFUVEVSTi50ZXN0KHZhbHVlKSkgewogICAgICAgIGVycm9ycyA9IFsuLi5lcnJvcnMsICdGaWVsZCBtdXN0IGJlIGEgdmFsaWQgZW1haWwuJ107CiAgICAgIH0KICAgICAgcmV0dXJuIGVycm9yczsKICAgIH0KICB9CiAgVmFsaWRhdG9yLiRpbmplY3QgPSBbXTsKCiAgY2xhc3MgRm9ybUZpZWxkUmVnaXN0cnkgewogICAgY29uc3RydWN0b3IoZXZlbnRCdXMpIHsKICAgICAgdGhpcy5fZXZlbnRCdXMgPSBldmVudEJ1czsKICAgICAgdGhpcy5fZm9ybUZpZWxkcyA9IHt9OwogICAgICBldmVudEJ1cy5vbignZm9ybS5jbGVhcicsICgpID0+IHRoaXMuY2xlYXIoKSk7CiAgICAgIHRoaXMuX2lkcyA9IG5ldyBJZHMoWzMyLCAzNiwgMV0pOwogICAgICB0aGlzLl9rZXlzID0gbmV3IElkcyhbMzIsIDM2LCAxXSk7CiAgICB9CiAgICBhZGQoZm9ybUZpZWxkKSB7CiAgICAgIGNvbnN0IHsKICAgICAgICBpZAogICAgICB9ID0gZm9ybUZpZWxkOwogICAgICBpZiAodGhpcy5fZm9ybUZpZWxkc1tpZF0pIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYGZvcm0gZmllbGQgd2l0aCBJRCAke2lkfSBhbHJlYWR5IGV4aXN0c2ApOwogICAgICB9CiAgICAgIHRoaXMuX2V2ZW50QnVzLmZpcmUoJ2Zvcm1GaWVsZC5hZGQnLCB7CiAgICAgICAgZm9ybUZpZWxkCiAgICAgIH0pOwogICAgICB0aGlzLl9mb3JtRmllbGRzW2lkXSA9IGZvcm1GaWVsZDsKICAgIH0KICAgIHJlbW92ZShmb3JtRmllbGQpIHsKICAgICAgY29uc3QgewogICAgICAgIGlkCiAgICAgIH0gPSBmb3JtRmllbGQ7CiAgICAgIGlmICghdGhpcy5fZm9ybUZpZWxkc1tpZF0pIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy5fZXZlbnRCdXMuZmlyZSgnZm9ybUZpZWxkLnJlbW92ZScsIHsKICAgICAgICBmb3JtRmllbGQKICAgICAgfSk7CiAgICAgIGRlbGV0ZSB0aGlzLl9mb3JtRmllbGRzW2lkXTsKICAgIH0KICAgIGdldChpZCkgewogICAgICByZXR1cm4gdGhpcy5fZm9ybUZpZWxkc1tpZF07CiAgICB9CiAgICBnZXRBbGwoKSB7CiAgICAgIHJldHVybiBPYmplY3QudmFsdWVzKHRoaXMuX2Zvcm1GaWVsZHMpOwogICAgfQogICAgZm9yRWFjaChjYWxsYmFjaykgewogICAgICB0aGlzLmdldEFsbCgpLmZvckVhY2goZm9ybUZpZWxkID0+IGNhbGxiYWNrKGZvcm1GaWVsZCkpOwogICAgfQogICAgY2xlYXIoKSB7CiAgICAgIHRoaXMuX2Zvcm1GaWVsZHMgPSB7fTsKICAgICAgdGhpcy5faWRzLmNsZWFyKCk7CiAgICAgIHRoaXMuX2tleXMuY2xlYXIoKTsKICAgIH0KICB9CiAgRm9ybUZpZWxkUmVnaXN0cnkuJGluamVjdCA9IFsnZXZlbnRCdXMnXTsKCiAgLyoqCiAgICogUmV0cmlldmUgdmFyaWFibGUgbmFtZXMgZnJvbSBnaXZlbiBGRUVMIHVuYXJ5IHRlc3QuCiAgICoKICAgKiBAcGFyYW0ge3N0cmluZ30gdW5hcnlUZXN0CiAgICogQHJldHVybnMge3N0cmluZ1tdfQogICAqLwogIGZ1bmN0aW9uIGdldFZhcmlhYmxlTmFtZXModW5hcnlUZXN0KSB7CiAgICBjb25zdCB0cmVlID0gcGFyc2VVbmFyeVRlc3RzKHVuYXJ5VGVzdCk7CiAgICBjb25zdCBjdXJzb3IgPSB0cmVlLmN1cnNvcigpOwogICAgY29uc3QgdmFyaWFibGVzID0gbmV3IFNldCgpOwogICAgZG8gewogICAgICBjb25zdCBub2RlID0gY3Vyc29yLm5vZGU7CiAgICAgIGlmIChub2RlLnR5cGUubmFtZSA9PT0gJ1ZhcmlhYmxlTmFtZScpIHsKICAgICAgICB2YXJpYWJsZXMuYWRkKHVuYXJ5VGVzdC5zbGljZShub2RlLmZyb20sIG5vZGUudG8pKTsKICAgICAgfQogICAgfSB3aGlsZSAoY3Vyc29yLm5leHQoKSk7CiAgICByZXR1cm4gQXJyYXkuZnJvbSh2YXJpYWJsZXMpOwogIH0KCiAgLyoqCiAgICogUmV0cmlldmUgdmFyaWFibGUgbmFtZXMgZnJvbSBnaXZlbiBGRUVMIGV4cHJlc3Npb24uCiAgICoKICAgKiBAcGFyYW0ge3N0cmluZ30gZXhwcmVzc2lvbgogICAqIEByZXR1cm5zIHtzdHJpbmdbXX0KICAgKi8KICBmdW5jdGlvbiBnZXRFeHByZXNzaW9uVmFyaWFibGVOYW1lcyhleHByZXNzaW9uKSB7CiAgICBjb25zdCB0cmVlID0gcGFyc2VFeHByZXNzaW9ucyhleHByZXNzaW9uKTsKICAgIGNvbnN0IGN1cnNvciA9IHRyZWUuY3Vyc29yKCk7CiAgICBjb25zdCB2YXJpYWJsZXMgPSBuZXcgU2V0KCk7CiAgICBkbyB7CiAgICAgIGNvbnN0IG5vZGUgPSBjdXJzb3Iubm9kZTsKICAgICAgaWYgKG5vZGUudHlwZS5uYW1lID09PSAnVmFyaWFibGVOYW1lJykgewogICAgICAgIHZhcmlhYmxlcy5hZGQoZXhwcmVzc2lvbi5zbGljZShub2RlLmZyb20sIG5vZGUudG8pKTsKICAgICAgfQogICAgfSB3aGlsZSAoY3Vyc29yLm5leHQoKSk7CiAgICByZXR1cm4gQXJyYXkuZnJvbSh2YXJpYWJsZXMpOwogIH0KICBmdW5jdGlvbiBpc0V4cHJlc3Npb24kMih2YWx1ZSkgewogICAgcmV0dXJuIGlzU3RyaW5nJDIodmFsdWUpICYmIHZhbHVlLnN0YXJ0c1dpdGgoJz0nKTsKICB9CgogIC8vIGNvbmZpZyAgLy8vLy8vLy8vLy8vLy8vLy8vLwoKICBjb25zdCBNSU5VVEVTX0lOX0RBWSA9IDYwICogMjQ7CiAgY29uc3QgREFURVRJTUVfU1VCVFlQRVMgPSB7CiAgICBEQVRFOiAnZGF0ZScsCiAgICBUSU1FOiAndGltZScsCiAgICBEQVRFVElNRTogJ2RhdGV0aW1lJwogIH07CiAgY29uc3QgVElNRV9TRVJJQUxJU0lOR19GT1JNQVRTID0gewogICAgVVRDX09GRlNFVDogJ3V0Y19vZmZzZXQnLAogICAgVVRDX05PUk1BTElaRUQ6ICd1dGNfbm9ybWFsaXplZCcsCiAgICBOT19USU1FWk9ORTogJ25vX3RpbWV6b25lJwogIH07CiAgY29uc3QgREFURVRJTUVfU1VCVFlQRV9QQVRIID0gWydzdWJ0eXBlJ107CiAgY29uc3QgREFURV9MQUJFTF9QQVRIID0gWydkYXRlTGFiZWwnXTsKCiAgZnVuY3Rpb24gY3JlYXRlSW5qZWN0b3IoYm9vdHN0cmFwTW9kdWxlcykgewogICAgY29uc3QgaW5qZWN0b3IgPSBuZXcgSW5qZWN0b3IoYm9vdHN0cmFwTW9kdWxlcyk7CiAgICBpbmplY3Rvci5pbml0KCk7CiAgICByZXR1cm4gaW5qZWN0b3I7CiAgfQoKICAvKioKICAgKiBAcGFyYW0ge3N0cmluZz99IHByZWZpeAogICAqCiAgICogQHJldHVybnMgRWxlbWVudAogICAqLwogIGZ1bmN0aW9uIGNyZWF0ZUZvcm1Db250YWluZXIocHJlZml4ID0gJ2ZqcycpIHsKICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoYCR7cHJlZml4fS1jb250YWluZXJgKTsKICAgIHJldHVybiBjb250YWluZXI7CiAgfQoKICBjb25zdCBFWFBSRVNTSU9OX1BST1BFUlRJRVMgPSBbJ2FsdCcsICdzb3VyY2UnLCAndGV4dCddOwogIGZ1bmN0aW9uIGZpbmRFcnJvcnMoZXJyb3JzLCBwYXRoKSB7CiAgICByZXR1cm4gZXJyb3JzW3BhdGhTdHJpbmdpZnkocGF0aCldOwogIH0KICBmdW5jdGlvbiBwYXRoU3RyaW5naWZ5KHBhdGgpIHsKICAgIGlmICghcGF0aCkgewogICAgICByZXR1cm4gJyc7CiAgICB9CiAgICByZXR1cm4gcGF0aC5qb2luKCcuJyk7CiAgfQogIGNvbnN0IGluZGljZXMgPSB7fTsKICBmdW5jdGlvbiBnZW5lcmF0ZUluZGV4Rm9yVHlwZSh0eXBlKSB7CiAgICBpZiAodHlwZSBpbiBpbmRpY2VzKSB7CiAgICAgIGluZGljZXNbdHlwZV0rKzsKICAgIH0gZWxzZSB7CiAgICAgIGluZGljZXNbdHlwZV0gPSAxOwogICAgfQogICAgcmV0dXJuIGluZGljZXNbdHlwZV07CiAgfQogIGZ1bmN0aW9uIGdlbmVyYXRlSWRGb3JUeXBlKHR5cGUpIHsKICAgIHJldHVybiBgJHt0eXBlfSR7Z2VuZXJhdGVJbmRleEZvclR5cGUodHlwZSl9YDsKICB9CgogIC8qKgogICAqIEB0ZW1wbGF0ZSBUCiAgICogQHBhcmFtIHtUfSBkYXRhCiAgICogQHBhcmFtIHsodGhpczogYW55LCBrZXk6IHN0cmluZywgdmFsdWU6IGFueSkgPT4gYW55fSBbcmVwbGFjZXJdCiAgICogQHJldHVybiB7VH0KICAgKi8KICBmdW5jdGlvbiBjbG9uZShkYXRhLCByZXBsYWNlcikgewogICAgcmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZGF0YSwgcmVwbGFjZXIpKTsKICB9CgogIC8qKgogICAqIFBhcnNlIHRoZSBzY2hlbWEgZm9yIGlucHV0IHZhcmlhYmxlcyBhIGZvcm0gbWlnaHQgbWFrZSB1c2Ugb2YKICAgKgogICAqIEBwYXJhbSB7YW55fSBzY2hlbWEKICAgKgogICAqIEByZXR1cm4ge3N0cmluZ1tdfQogICAqLwogIGZ1bmN0aW9uIGdldFNjaGVtYVZhcmlhYmxlcyhzY2hlbWEpIHsKICAgIGlmICghc2NoZW1hLmNvbXBvbmVudHMpIHsKICAgICAgcmV0dXJuIFtdOwogICAgfQogICAgY29uc3QgdmFyaWFibGVzID0gc2NoZW1hLmNvbXBvbmVudHMucmVkdWNlKCh2YXJpYWJsZXMsIGNvbXBvbmVudCkgPT4gewogICAgICBjb25zdCB7CiAgICAgICAga2V5LAogICAgICAgIHZhbHVlc0tleSwKICAgICAgICB0eXBlLAogICAgICAgIGNvbmRpdGlvbmFsCiAgICAgIH0gPSBjb21wb25lbnQ7CiAgICAgIGlmIChbJ2J1dHRvbiddLmluY2x1ZGVzKHR5cGUpKSB7CiAgICAgICAgcmV0dXJuIHZhcmlhYmxlczsKICAgICAgfQogICAgICBpZiAoa2V5KSB7CiAgICAgICAgdmFyaWFibGVzID0gWy4uLnZhcmlhYmxlcywga2V5XTsKICAgICAgfQogICAgICBpZiAodmFsdWVzS2V5KSB7CiAgICAgICAgdmFyaWFibGVzID0gWy4uLnZhcmlhYmxlcywgdmFsdWVzS2V5XTsKICAgICAgfQogICAgICBpZiAoY29uZGl0aW9uYWwgJiYgY29uZGl0aW9uYWwuaGlkZSkgewogICAgICAgIC8vIGN1dCBvZmYgaW5pdGlhbCAnPScKICAgICAgICBjb25zdCBjb25kaXRpb25WYXJpYWJsZXMgPSBnZXRWYXJpYWJsZU5hbWVzKGNvbmRpdGlvbmFsLmhpZGUuc2xpY2UoMSkpOwogICAgICAgIHZhcmlhYmxlcyA9IFsuLi52YXJpYWJsZXMsIC4uLmNvbmRpdGlvblZhcmlhYmxlc107CiAgICAgIH0KICAgICAgRVhQUkVTU0lPTl9QUk9QRVJUSUVTLmZvckVhY2gocHJvcCA9PiB7CiAgICAgICAgY29uc3QgcHJvcGVydHkgPSBjb21wb25lbnRbcHJvcF07CiAgICAgICAgaWYgKHByb3BlcnR5ICYmIGlzRXhwcmVzc2lvbiQxKHByb3BlcnR5KSkgewogICAgICAgICAgLy8gY3V0IG9mZiBpbml0aWFsICc9JwogICAgICAgICAgY29uc3QgZXhwcmVzc2lvblZhcmlhYmxlcyA9IGdldEV4cHJlc3Npb25WYXJpYWJsZU5hbWVzKHByb3BlcnR5LnNsaWNlKDEpKTsKICAgICAgICAgIHZhcmlhYmxlcyA9IFsuLi52YXJpYWJsZXMsIC4uLmV4cHJlc3Npb25WYXJpYWJsZXNdOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHJldHVybiB2YXJpYWJsZXM7CiAgICB9LCBbXSk7CgogICAgLy8gcmVtb3ZlIGR1cGxpY2F0ZXMKICAgIHJldHVybiBBcnJheS5mcm9tKG5ldyBTZXQodmFyaWFibGVzKSk7CiAgfQoKICAvLyBoZWxwZXIgLy8vLy8vLy8vLy8vLy8vCgogIGZ1bmN0aW9uIGlzRXhwcmVzc2lvbiQxKHZhbHVlKSB7CiAgICByZXR1cm4gaXNTdHJpbmckMih2YWx1ZSkgJiYgdmFsdWUuc3RhcnRzV2l0aCgnPScpOwogIH0KCiAgY2xhc3MgSW1wb3J0ZXIgewogICAgLyoqCiAgICAgKiBAY29uc3RydWN0b3IKICAgICAqIEBwYXJhbSB7IGltcG9ydCgnLi4vY29yZScpLkZvcm1GaWVsZFJlZ2lzdHJ5IH0gZm9ybUZpZWxkUmVnaXN0cnkKICAgICAqIEBwYXJhbSB7IGltcG9ydCgnLi4vcmVuZGVyL0Zvcm1GaWVsZHMnKS5kZWZhdWx0IH0gZm9ybUZpZWxkcwogICAgICovCiAgICBjb25zdHJ1Y3Rvcihmb3JtRmllbGRSZWdpc3RyeSwgZm9ybUZpZWxkcykgewogICAgICB0aGlzLl9mb3JtRmllbGRSZWdpc3RyeSA9IGZvcm1GaWVsZFJlZ2lzdHJ5OwogICAgICB0aGlzLl9mb3JtRmllbGRzID0gZm9ybUZpZWxkczsKICAgIH0KCiAgICAvKioKICAgICAqIEltcG9ydCBzY2hlbWEgYWRkaW5nIGBpZGAsIGBfcGFyZW50YCBhbmQgYF9wYXRoYAogICAgICogaW5mb3JtYXRpb24gdG8gZWFjaCBmaWVsZCBhbmQgYWRkaW5nIGl0IHRvIHRoZQogICAgICogZm9ybSBmaWVsZCByZWdpc3RyeS4KICAgICAqCiAgICAgKiBAcGFyYW0ge2FueX0gc2NoZW1hCiAgICAgKiBAcGFyYW0ge2FueX0gW2RhdGFdCiAgICAgKgogICAgICogQHJldHVybiB7IHsgd2FybmluZ3M6IEFycmF5PGFueT4sIHNjaGVtYTogYW55LCBkYXRhOiBhbnkgfSB9CiAgICAgKi8KICAgIGltcG9ydFNjaGVtYShzY2hlbWEsIGRhdGEgPSB7fSkgewogICAgICAvLyBUT0RPOiBBZGQgd2FybmluZ3MgLSBodHRwczovL2dpdGh1Yi5jb20vYnBtbi1pby9mb3JtLWpzL2lzc3Vlcy8yODkKICAgICAgY29uc3Qgd2FybmluZ3MgPSBbXTsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCBpbXBvcnRlZFNjaGVtYSA9IHRoaXMuaW1wb3J0Rm9ybUZpZWxkKGNsb25lKHNjaGVtYSkpLAogICAgICAgICAgaW5pdGlhbGl6ZWREYXRhID0gdGhpcy5pbml0aWFsaXplRmllbGRWYWx1ZXMoY2xvbmUoZGF0YSkpOwogICAgICAgIHJldHVybiB7CiAgICAgICAgICB3YXJuaW5ncywKICAgICAgICAgIHNjaGVtYTogaW1wb3J0ZWRTY2hlbWEsCiAgICAgICAgICBkYXRhOiBpbml0aWFsaXplZERhdGEKICAgICAgICB9OwogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBlcnIud2FybmluZ3MgPSB3YXJuaW5nczsKICAgICAgICB0aHJvdyBlcnI7CiAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIEBwYXJhbSB7YW55fSBmb3JtRmllbGQKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbcGFyZW50SWRdCiAgICAgKgogICAgICogQHJldHVybiB7YW55fSBpbXBvcnRlZEZpZWxkCiAgICAgKi8KICAgIGltcG9ydEZvcm1GaWVsZChmb3JtRmllbGQsIHBhcmVudElkKSB7CiAgICAgIGNvbnN0IHsKICAgICAgICBjb21wb25lbnRzLAogICAgICAgIGtleSwKICAgICAgICB0eXBlLAogICAgICAgIGlkID0gZ2VuZXJhdGVJZEZvclR5cGUodHlwZSkKICAgICAgfSA9IGZvcm1GaWVsZDsKICAgICAgaWYgKHBhcmVudElkKSB7CiAgICAgICAgLy8gc2V0IGZvcm0gZmllbGQgcGFyZW50CiAgICAgICAgZm9ybUZpZWxkLl9wYXJlbnQgPSBwYXJlbnRJZDsKICAgICAgfQogICAgICBpZiAoIXRoaXMuX2Zvcm1GaWVsZHMuZ2V0KHR5cGUpKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBmb3JtIGZpZWxkIG9mIHR5cGUgPCR7dHlwZX0+IG5vdCBzdXBwb3J0ZWRgKTsKICAgICAgfQogICAgICBpZiAoa2V5KSB7CiAgICAgICAgLy8gdmFsaWRhdGUgPGtleT4gdW5pcXVlbmVzcwogICAgICAgIGlmICh0aGlzLl9mb3JtRmllbGRSZWdpc3RyeS5fa2V5cy5hc3NpZ25lZChrZXkpKSB7CiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYGZvcm0gZmllbGQgd2l0aCBrZXkgPCR7a2V5fT4gYWxyZWFkeSBleGlzdHNgKTsKICAgICAgICB9CiAgICAgICAgdGhpcy5fZm9ybUZpZWxkUmVnaXN0cnkuX2tleXMuY2xhaW0oa2V5LCBmb3JtRmllbGQpOwoKICAgICAgICAvLyBUT0RPOiBidXR0b25zIHNob3VsZCBub3QgaGF2ZSBrZXkKICAgICAgICBpZiAodHlwZSAhPT0gJ2J1dHRvbicpIHsKICAgICAgICAgIC8vIHNldCBmb3JtIGZpZWxkIHBhdGgKICAgICAgICAgIGZvcm1GaWVsZC5fcGF0aCA9IFtrZXldOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoaWQpIHsKICAgICAgICAvLyB2YWxpZGF0ZSA8aWQ+IHVuaXF1ZW5lc3MKICAgICAgICBpZiAodGhpcy5fZm9ybUZpZWxkUmVnaXN0cnkuX2lkcy5hc3NpZ25lZChpZCkpIHsKICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgZm9ybSBmaWVsZCB3aXRoIGlkIDwke2lkfT4gYWxyZWFkeSBleGlzdHNgKTsKICAgICAgICB9CiAgICAgICAgdGhpcy5fZm9ybUZpZWxkUmVnaXN0cnkuX2lkcy5jbGFpbShpZCwgZm9ybUZpZWxkKTsKICAgICAgfQoKICAgICAgLy8gc2V0IGZvcm0gZmllbGQgSUQKICAgICAgZm9ybUZpZWxkLmlkID0gaWQ7CiAgICAgIHRoaXMuX2Zvcm1GaWVsZFJlZ2lzdHJ5LmFkZChmb3JtRmllbGQpOwogICAgICBpZiAoY29tcG9uZW50cykgewogICAgICAgIHRoaXMuaW1wb3J0Rm9ybUZpZWxkcyhjb21wb25lbnRzLCBpZCk7CiAgICAgIH0KICAgICAgcmV0dXJuIGZvcm1GaWVsZDsKICAgIH0KICAgIGltcG9ydEZvcm1GaWVsZHMoY29tcG9uZW50cywgcGFyZW50SWQpIHsKICAgICAgY29tcG9uZW50cy5mb3JFYWNoKGNvbXBvbmVudCA9PiB7CiAgICAgICAgdGhpcy5pbXBvcnRGb3JtRmllbGQoY29tcG9uZW50LCBwYXJlbnRJZCk7CiAgICAgIH0pOwogICAgfQoKICAgIC8qKgogICAgICogQHBhcmFtIHtPYmplY3R9IGRhdGEKICAgICAqCiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IGluaXRpYWxpemVkRGF0YQogICAgICovCiAgICBpbml0aWFsaXplRmllbGRWYWx1ZXMoZGF0YSkgewogICAgICByZXR1cm4gdGhpcy5fZm9ybUZpZWxkUmVnaXN0cnkuZ2V0QWxsKCkucmVkdWNlKChpbml0aWFsaXplZERhdGEsIGZvcm1GaWVsZCkgPT4gewogICAgICAgIGNvbnN0IHsKICAgICAgICAgIGRlZmF1bHRWYWx1ZSwKICAgICAgICAgIF9wYXRoLAogICAgICAgICAgdHlwZQogICAgICAgIH0gPSBmb3JtRmllbGQ7CgogICAgICAgIC8vIHRyeSB0byBnZXQgdmFsdWUgZnJvbSBkYXRhCiAgICAgICAgLy8gaWYgdW5hdmFpbGFibGUgLSB0cnkgdG8gZ2V0IGRlZmF1bHQgdmFsdWUgZnJvbSBmb3JtIGZpZWxkCiAgICAgICAgLy8gaWYgdW5hdmFpbGFibGUgLSBnZXQgZW1wdHkgdmFsdWUgZnJvbSBmb3JtIGZpZWxkCgogICAgICAgIGlmIChfcGF0aCkgewogICAgICAgICAgY29uc3QgZmllbGRJbXBsZW1lbnRhdGlvbiA9IHRoaXMuX2Zvcm1GaWVsZHMuZ2V0KHR5cGUpOwogICAgICAgICAgbGV0IHZhbHVlRGF0YSA9IGdldChkYXRhLCBfcGF0aCk7CiAgICAgICAgICBpZiAoIWlzVW5kZWZpbmVkJDEodmFsdWVEYXRhKSAmJiBmaWVsZEltcGxlbWVudGF0aW9uLnNhbml0aXplVmFsdWUpIHsKICAgICAgICAgICAgdmFsdWVEYXRhID0gZmllbGRJbXBsZW1lbnRhdGlvbi5zYW5pdGl6ZVZhbHVlKHsKICAgICAgICAgICAgICBmb3JtRmllbGQsCiAgICAgICAgICAgICAgZGF0YSwKICAgICAgICAgICAgICB2YWx1ZTogdmFsdWVEYXRhCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgY29uc3QgaW5pdGlhbGl6ZWRGaWVsZFZhbHVlID0gIWlzVW5kZWZpbmVkJDEodmFsdWVEYXRhKSA/IHZhbHVlRGF0YSA6ICFpc1VuZGVmaW5lZCQxKGRlZmF1bHRWYWx1ZSkgPyBkZWZhdWx0VmFsdWUgOiBmaWVsZEltcGxlbWVudGF0aW9uLmVtcHR5VmFsdWU7CiAgICAgICAgICBpbml0aWFsaXplZERhdGEgPSB7CiAgICAgICAgICAgIC4uLmluaXRpYWxpemVkRGF0YSwKICAgICAgICAgICAgW19wYXRoWzBdXTogaW5pdGlhbGl6ZWRGaWVsZFZhbHVlCiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgICByZXR1cm4gaW5pdGlhbGl6ZWREYXRhOwogICAgICB9LCBkYXRhKTsKICAgIH0KICB9CiAgSW1wb3J0ZXIuJGluamVjdCA9IFsnZm9ybUZpZWxkUmVnaXN0cnknLCAnZm9ybUZpZWxkcyddOwoKICB2YXIgaW1wb3J0TW9kdWxlID0gewogICAgaW1wb3J0ZXI6IFsndHlwZScsIEltcG9ydGVyXQogIH07CgogIGNvbnN0IE5PREVfVFlQRV9URVhUID0gMywKICAgIE5PREVfVFlQRV9FTEVNRU5UID0gMTsKICBjb25zdCBBTExPV0VEX05PREVTID0gWydoMScsICdoMicsICdoMycsICdoNCcsICdoNScsICdoNicsICdzcGFuJywgJ2VtJywgJ2EnLCAncCcsICdkaXYnLCAndWwnLCAnb2wnLCAnbGknLCAnaHInLCAnYmxvY2txdW90ZScsICdpbWcnLCAncHJlJywgJ2NvZGUnLCAnYnInLCAnc3Ryb25nJ107CiAgY29uc3QgQUxMT1dFRF9BVFRSSUJVVEVTID0gWydhbGlnbicsICdhbHQnLCAnY2xhc3MnLCAnaHJlZicsICdpZCcsICduYW1lJywgJ3JlbCcsICd0YXJnZXQnLCAnc3JjJ107CiAgY29uc3QgQUxMT1dFRF9VUklfUEFUVEVSTiA9IC9eKD86KD86KD86ZnxodCl0cHM/fG1haWx0b3x0ZWx8Y2FsbHRvfGNpZHx4bXBwKTp8W15hLXpdfFthLXorLlwtXSsoPzpbXmEteisuXC06XXwkKSkvaTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11c2VsZXNzLWVzY2FwZQogIGNvbnN0IEFMTE9XRURfSU1BR0VfU1JDX1BBVFRFUk4gPSAvXihodHRwcz98ZGF0YSk6LiovaTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11c2VsZXNzLWVzY2FwZQogIGNvbnN0IEFUVFJfV0hJVEVTUEFDRV9QQVRURVJOID0gL1tcdTAwMDAtXHUwMDIwXHUwMEEwXHUxNjgwXHUxODBFXHUyMDAwLVx1MjAyOVx1MjA1Rlx1MzAwMF0vZzsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb250cm9sLXJlZ2V4CgogIGNvbnN0IEZPUk1fRUxFTUVOVCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2Zvcm0nKTsKCiAgLyoqCiAgICogU2FuaXRpemUgYSBIVE1MIHN0cmluZyBhbmQgcmV0dXJuIHRoZSBjbGVhbmVkLCBzYWZlIHZlcnNpb24uCiAgICoKICAgKiBAcGFyYW0ge3N0cmluZ30gaHRtbAogICAqIEByZXR1cm4ge3N0cmluZ30KICAgKi8KICBmdW5jdGlvbiBzYW5pdGl6ZUhUTUwoaHRtbCkgewogICAgY29uc3QgZG9jID0gbmV3IERPTVBhcnNlcigpLnBhcnNlRnJvbVN0cmluZyhgPCFET0NUWVBFIGh0bWw+XG48aHRtbD48Ym9keT48ZGl2PiR7aHRtbH1gLCAndGV4dC9odG1sJyk7CiAgICBkb2Mubm9ybWFsaXplKCk7CiAgICBjb25zdCBlbGVtZW50ID0gZG9jLmJvZHkuZmlyc3RDaGlsZDsKICAgIGlmIChlbGVtZW50KSB7CiAgICAgIHNhbml0aXplTm9kZSggLyoqIEB0eXBlIEVsZW1lbnQgKi9lbGVtZW50KTsKICAgICAgcmV0dXJuIG5ldyBYTUxTZXJpYWxpemVyKCkuc2VyaWFsaXplVG9TdHJpbmcoZWxlbWVudCk7CiAgICB9IGVsc2UgewogICAgICAvLyBoYW5kbGUgdGhlIGNhc2UgdGhhdCBkb2N1bWVudCBwYXJzaW5nCiAgICAgIC8vIGRvZXMgbm90IHdvcmsgYXQgYWxsLCBkdWUgdG8gSFRNTCBnaWJiZXJpc2gKICAgICAgcmV0dXJuICcnOwogICAgfQogIH0KICBmdW5jdGlvbiBzYW5pdGl6ZUltYWdlU291cmNlKHNyYykgewogICAgY29uc3QgdmFsaWQgPSBBTExPV0VEX0lNQUdFX1NSQ19QQVRURVJOLnRlc3Qoc3JjKTsKICAgIHJldHVybiB2YWxpZCA/IHNyYyA6ICcnOwogIH0KCiAgLyoqCiAgICogUmVjdXJzaXZlbHkgc2FuaXRpemUgYSBIVE1MIG5vZGUsIHBvdGVudGlhbGx5CiAgICogcmVtb3ZpbmcgaXQsIGl0cyBjaGlsZHJlbiBvciBhdHRyaWJ1dGVzLgogICAqCiAgICogSW5zcGlyZWQgYnkgaHR0cHM6Ly9naXRodWIuY29tL2RldmVsb3BpdC9zbmFya2Rvd24vaXNzdWVzLzcwCiAgICogYW5kIGh0dHBzOi8vZ2l0aHViLmNvbS9jdXJlNTMvRE9NUHVyaWZ5LiBTaW1wbGlmaWVkCiAgICogZm9yIG91ciB1c2UtY2FzZS4KICAgKgogICAqIEBwYXJhbSB7RWxlbWVudH0gbm9kZQogICAqLwogIGZ1bmN0aW9uIHNhbml0aXplTm9kZShub2RlKSB7CiAgICAvLyBhbGxvdyB0ZXh0IG5vZGVzCiAgICBpZiAobm9kZS5ub2RlVHlwZSA9PT0gTk9ERV9UWVBFX1RFWFQpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIC8vIGRpc2FsbG93IGFsbCBvdGhlciBub2RlcyBidXQgRWxlbWVudAogICAgaWYgKG5vZGUubm9kZVR5cGUgIT09IE5PREVfVFlQRV9FTEVNRU5UKSB7CiAgICAgIHJldHVybiBub2RlLnJlbW92ZSgpOwogICAgfQogICAgY29uc3QgbGNUYWcgPSBub2RlLnRhZ05hbWUudG9Mb3dlckNhc2UoKTsKCiAgICAvLyBkaXNhbGxvdyBub24td2hpdGVsaXN0ZWQgdGFncwogICAgaWYgKCFBTExPV0VEX05PREVTLmluY2x1ZGVzKGxjVGFnKSkgewogICAgICByZXR1cm4gbm9kZS5yZW1vdmUoKTsKICAgIH0KICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSBub2RlLmF0dHJpYnV0ZXM7CgogICAgLy8gY2xlYW4gYXR0cmlidXRlcwogICAgZm9yIChsZXQgaSA9IGF0dHJpYnV0ZXMubGVuZ3RoOyBpLS07KSB7CiAgICAgIGNvbnN0IGF0dHJpYnV0ZSA9IGF0dHJpYnV0ZXNbaV07CiAgICAgIGNvbnN0IG5hbWUgPSBhdHRyaWJ1dGUubmFtZTsKICAgICAgY29uc3QgbGNOYW1lID0gbmFtZS50b0xvd2VyQ2FzZSgpOwoKICAgICAgLy8gbm9ybWFsaXplIG5vZGUgdmFsdWUKICAgICAgY29uc3QgdmFsdWUgPSBhdHRyaWJ1dGUudmFsdWUudHJpbSgpOwogICAgICBub2RlLnJlbW92ZUF0dHJpYnV0ZShuYW1lKTsKICAgICAgY29uc3QgdmFsaWQgPSBpc1ZhbGlkQXR0cmlidXRlKGxjVGFnLCBsY05hbWUsIHZhbHVlKTsKICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUobmFtZSwgdmFsdWUpOwogICAgICB9CiAgICB9CgogICAgLy8gZm9yY2Ugbm9vcGVuZXIgb24gdGFyZ2V0PSJfYmxhbmsiIGxpbmtzCiAgICBpZiAobGNUYWcgPT09ICdhJyAmJiBub2RlLmdldEF0dHJpYnV0ZSgndGFyZ2V0JykgPT09ICdfYmxhbmsnICYmIG5vZGUuZ2V0QXR0cmlidXRlKCdyZWwnKSAhPT0gJ25vb3BlbmVyJykgewogICAgICBub2RlLnNldEF0dHJpYnV0ZSgncmVsJywgJ25vb3BlbmVyJyk7CiAgICB9CiAgICBmb3IgKGxldCBpID0gbm9kZS5jaGlsZE5vZGVzLmxlbmd0aDsgaS0tOykgewogICAgICBzYW5pdGl6ZU5vZGUoIC8qKiBAdHlwZSBFbGVtZW50ICovbm9kZS5jaGlsZE5vZGVzW2ldKTsKICAgIH0KICB9CgogIC8qKgogICAqIFZhbGlkYXRlcyBhdHRyaWJ1dGVzIGZvciB2YWxpZGl0eS4KICAgKgogICAqIEBwYXJhbSB7c3RyaW5nfSBsY1RhZwogICAqIEBwYXJhbSB7c3RyaW5nfSBsY05hbWUKICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUKICAgKiBAcmV0dXJuIHtib29sZWFufQogICAqLwogIGZ1bmN0aW9uIGlzVmFsaWRBdHRyaWJ1dGUobGNUYWcsIGxjTmFtZSwgdmFsdWUpIHsKICAgIC8vIGRpc2FsbG93IG1vc3QgYXR0cmlidXRlcyBiYXNlZCBvbiB3aGl0ZWxpc3QKICAgIGlmICghQUxMT1dFRF9BVFRSSUJVVEVTLmluY2x1ZGVzKGxjTmFtZSkpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIC8vIGRpc2FsbG93ICJET00gY2xvYmJlcmluZyIgLyBwb2x1dGlvbiBvZiBkb2N1bWVudCBhbmQgd3JhcHBpbmcgZm9ybSBlbGVtZW50cwogICAgaWYgKChsY05hbWUgPT09ICdpZCcgfHwgbGNOYW1lID09PSAnbmFtZScpICYmICh2YWx1ZSBpbiBkb2N1bWVudCB8fCB2YWx1ZSBpbiBGT1JNX0VMRU1FTlQpKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIGlmIChsY05hbWUgPT09ICd0YXJnZXQnICYmIHZhbHVlICE9PSAnX2JsYW5rJykgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgLy8gYWxsb3cgdmFsaWQgdXJsIGxpbmtzIG9ubHkKICAgIGlmIChsY05hbWUgPT09ICdocmVmJyAmJiAhQUxMT1dFRF9VUklfUEFUVEVSTi50ZXN0KHZhbHVlLnJlcGxhY2UoQVRUUl9XSElURVNQQUNFX1BBVFRFUk4sICcnKSkpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgcmV0dXJuIHRydWU7CiAgfQoKICBmdW5jdGlvbiBmb3JtRmllbGRDbGFzc2VzKHR5cGUsIHsKICAgIGVycm9ycyA9IFtdLAogICAgZGlzYWJsZWQgPSBmYWxzZQogIH0gPSB7fSkgewogICAgaWYgKCF0eXBlKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcigndHlwZSByZXF1aXJlZCcpOwogICAgfQogICAgcmV0dXJuIGNsYXNzTmFtZXMoJ2Zqcy1mb3JtLWZpZWxkJywgYGZqcy1mb3JtLWZpZWxkLSR7dHlwZX1gLCB7CiAgICAgICdmanMtaGFzLWVycm9ycyc6IGVycm9ycy5sZW5ndGggPiAwLAogICAgICAnZmpzLWRpc2FibGVkJzogZGlzYWJsZWQKICAgIH0pOwogIH0KICBmdW5jdGlvbiBwcmVmaXhJZChpZCwgZm9ybUlkKSB7CiAgICBpZiAoZm9ybUlkKSB7CiAgICAgIHJldHVybiBgZmpzLWZvcm0tJHtmb3JtSWR9LSR7aWR9YDsKICAgIH0KICAgIHJldHVybiBgZmpzLWZvcm0tJHtpZH1gOwogIH0KICBmdW5jdGlvbiBtYXJrZG93blRvSFRNTChtYXJrZG93bikgewogICAgY29uc3QgaHRtbHMgPSBtYXJrZG93bi50b1N0cmluZygpLnNwbGl0KC8oPzpccj9cbil7Mix9LykubWFwKGxpbmUgPT4gL14oKFxkKy4pfFs+PFxzIy0qXSkvLnRlc3QobGluZSkgPyB0JDIobGluZSkgOiBgPHA+JHt0JDIobGluZSl9PC9wPmApOwogICAgcmV0dXJuIGh0bWxzLmpvaW4oJ1xuXG4nKTsKICB9CgogIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vZGV2ZWxvcGl0L3NuYXJrZG93bi9pc3N1ZXMvNzAKICBmdW5jdGlvbiBzYWZlTWFya2Rvd24obWFya2Rvd24pIHsKICAgIGNvbnN0IGh0bWwgPSBtYXJrZG93blRvSFRNTChtYXJrZG93bik7CiAgICByZXR1cm4gc2FuaXRpemVIVE1MKGh0bWwpOwogIH0KCiAgLyoqCiAgICogU2FuaXRpemVzIGFuIGltYWdlIHNvdXJjZSB0byBlbnN1cmUgd2Ugb25seSBhbGxvdyBmb3IgZGF0YSBVUkkgYW5kIGxpbmtzCiAgICogdGhhdCBzdGFydCB3aXRoIGh0dHAocykuCiAgICoKICAgKiBOb3RlOiBNb3N0IGJyb3dzZXJzIGFueXdheSBkbyBub3Qgc3VwcG9ydCBzY3JpcHQgZXhlY3V0aW9uIGluIDxpbWc+IGVsZW1lbnRzLgogICAqCiAgICogQHBhcmFtIHtzdHJpbmd9IHNyYwogICAqIEByZXR1cm5zIHtzdHJpbmd9CiAgICovCiAgZnVuY3Rpb24gc2FmZUltYWdlU291cmNlKHNyYykgewogICAgcmV0dXJuIHNhbml0aXplSW1hZ2VTb3VyY2Uoc3JjKTsKICB9CgogIGNvbnN0IHR5cGUkYiA9ICdidXR0b24nOwogIGZ1bmN0aW9uIEJ1dHRvbihwcm9wcykgewogICAgY29uc3QgewogICAgICBkaXNhYmxlZCwKICAgICAgZmllbGQKICAgIH0gPSBwcm9wczsKICAgIGNvbnN0IHsKICAgICAgYWN0aW9uID0gJ3N1Ym1pdCcKICAgIH0gPSBmaWVsZDsKICAgIHJldHVybiBlJDIoImRpdiIsIHsKICAgICAgY2xhc3M6IGZvcm1GaWVsZENsYXNzZXModHlwZSRiKSwKICAgICAgY2hpbGRyZW46IGUkMigiYnV0dG9uIiwgewogICAgICAgIGNsYXNzOiAiZmpzLWJ1dHRvbiIsCiAgICAgICAgdHlwZTogYWN0aW9uLAogICAgICAgIGRpc2FibGVkOiBkaXNhYmxlZCwKICAgICAgICBjaGlsZHJlbjogZmllbGQubGFiZWwKICAgICAgfSkKICAgIH0pOwogIH0KICBCdXR0b24uY3JlYXRlID0gZnVuY3Rpb24gKG9wdGlvbnMgPSB7fSkgewogICAgcmV0dXJuIHsKICAgICAgYWN0aW9uOiAnc3VibWl0JywKICAgICAgLi4ub3B0aW9ucwogICAgfTsKICB9OwogIEJ1dHRvbi50eXBlID0gdHlwZSRiOwogIEJ1dHRvbi5sYWJlbCA9ICdCdXR0b24nOwogIEJ1dHRvbi5rZXllZCA9IHRydWU7CgogIGNvbnN0IEZvcm1SZW5kZXJDb250ZXh0ID0gRCQxKHsKICAgIEVtcHR5OiBwcm9wcyA9PiB7CiAgICAgIHJldHVybiBudWxsOwogICAgfSwKICAgIENoaWxkcmVuOiBwcm9wcyA9PiB7CiAgICAgIHJldHVybiBwcm9wcy5jaGlsZHJlbjsKICAgIH0sCiAgICBFbGVtZW50OiBwcm9wcyA9PiB7CiAgICAgIHJldHVybiBwcm9wcy5jaGlsZHJlbjsKICAgIH0KICB9KTsKCiAgLyoqCiAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUKICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtzdHJpY3RdCiAgICoKICAgKiBAcmV0dXJucyB7YW55fQogICAqLwogIGZ1bmN0aW9uIGdldFNlcnZpY2UodHlwZSwgc3RyaWN0KSB7fQogIGNvbnN0IEZvcm1Db250ZXh0ID0gRCQxKHsKICAgIGdldFNlcnZpY2UsCiAgICBmb3JtSWQ6IG51bGwKICB9KTsKCiAgZnVuY3Rpb24gRGVzY3JpcHRpb24ocHJvcHMpIHsKICAgIGNvbnN0IHsKICAgICAgZGVzY3JpcHRpb24KICAgIH0gPSBwcm9wczsKICAgIGlmICghZGVzY3JpcHRpb24pIHsKICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgICByZXR1cm4gZSQyKCJkaXYiLCB7CiAgICAgIGNsYXNzOiAiZmpzLWZvcm0tZmllbGQtZGVzY3JpcHRpb24iLAogICAgICBjaGlsZHJlbjogZGVzY3JpcHRpb24KICAgIH0pOwogIH0KCiAgZnVuY3Rpb24gRXJyb3JzKHByb3BzKSB7CiAgICBjb25zdCB7CiAgICAgIGVycm9ycwogICAgfSA9IHByb3BzOwogICAgaWYgKCFlcnJvcnMubGVuZ3RoKSB7CiAgICAgIHJldHVybiBudWxsOwogICAgfQogICAgcmV0dXJuIGUkMigiZGl2IiwgewogICAgICBjbGFzczogImZqcy1mb3JtLWZpZWxkLWVycm9yIiwKICAgICAgY2hpbGRyZW46IGUkMigidWwiLCB7CiAgICAgICAgY2hpbGRyZW46IGVycm9ycy5tYXAoZXJyb3IgPT4gewogICAgICAgICAgcmV0dXJuIGUkMigibGkiLCB7CiAgICAgICAgICAgIGNoaWxkcmVuOiBlcnJvcgogICAgICAgICAgfSk7CiAgICAgICAgfSkKICAgICAgfSkKICAgIH0pOwogIH0KCiAgZnVuY3Rpb24gTGFiZWwocHJvcHMpIHsKICAgIGNvbnN0IHsKICAgICAgaWQsCiAgICAgIGxhYmVsLAogICAgICBjb2xsYXBzZU9uRW1wdHkgPSB0cnVlLAogICAgICByZXF1aXJlZCA9IGZhbHNlCiAgICB9ID0gcHJvcHM7CiAgICByZXR1cm4gZSQyKCJsYWJlbCIsIHsKICAgICAgZm9yOiBpZCwKICAgICAgY2xhc3M6IGNsYXNzTmFtZXMoJ2Zqcy1mb3JtLWZpZWxkLWxhYmVsJywgewogICAgICAgICdmanMtaW5jb2xsYXBzaWJsZS1sYWJlbCc6ICFjb2xsYXBzZU9uRW1wdHkKICAgICAgfSwgcHJvcHNbJ2NsYXNzJ10pLAogICAgICBjaGlsZHJlbjogW3Byb3BzLmNoaWxkcmVuLCBsYWJlbCB8fCAnJywgcmVxdWlyZWQgJiYgZSQyKCJzcGFuIiwgewogICAgICAgIGNsYXNzOiAiZmpzLWFzdGVyaXgiLAogICAgICAgIGNoaWxkcmVuOiAiKiIKICAgICAgfSldCiAgICB9KTsKICB9CgogIGNvbnN0IHR5cGUkYSA9ICdjaGVja2JveCc7CiAgZnVuY3Rpb24gQ2hlY2tib3gocHJvcHMpIHsKICAgIGNvbnN0IHsKICAgICAgZGlzYWJsZWQsCiAgICAgIGVycm9ycyA9IFtdLAogICAgICBmaWVsZCwKICAgICAgdmFsdWUgPSBmYWxzZQogICAgfSA9IHByb3BzOwogICAgY29uc3QgewogICAgICBkZXNjcmlwdGlvbiwKICAgICAgaWQsCiAgICAgIGxhYmVsCiAgICB9ID0gZmllbGQ7CiAgICBjb25zdCBvbkNoYW5nZSA9ICh7CiAgICAgIHRhcmdldAogICAgfSkgPT4gewogICAgICBwcm9wcy5vbkNoYW5nZSh7CiAgICAgICAgZmllbGQsCiAgICAgICAgdmFsdWU6IHRhcmdldC5jaGVja2VkCiAgICAgIH0pOwogICAgfTsKICAgIGNvbnN0IHsKICAgICAgZm9ybUlkCiAgICB9ID0gRiQxKEZvcm1Db250ZXh0KTsKICAgIHJldHVybiBlJDIoImRpdiIsIHsKICAgICAgY2xhc3M6IGNsYXNzTmFtZXMoZm9ybUZpZWxkQ2xhc3Nlcyh0eXBlJGEsIHsKICAgICAgICBlcnJvcnMsCiAgICAgICAgZGlzYWJsZWQKICAgICAgfSksIHsKICAgICAgICAnZmpzLWNoZWNrZWQnOiB2YWx1ZQogICAgICB9KSwKICAgICAgY2hpbGRyZW46IFtlJDIoTGFiZWwsIHsKICAgICAgICBpZDogcHJlZml4SWQoaWQsIGZvcm1JZCksCiAgICAgICAgbGFiZWw6IGxhYmVsLAogICAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgICBjaGlsZHJlbjogZSQyKCJpbnB1dCIsIHsKICAgICAgICAgIGNoZWNrZWQ6IHZhbHVlLAogICAgICAgICAgY2xhc3M6ICJmanMtaW5wdXQiLAogICAgICAgICAgZGlzYWJsZWQ6IGRpc2FibGVkLAogICAgICAgICAgaWQ6IHByZWZpeElkKGlkLCBmb3JtSWQpLAogICAgICAgICAgdHlwZTogImNoZWNrYm94IiwKICAgICAgICAgIG9uQ2hhbmdlOiBvbkNoYW5nZQogICAgICAgIH0pCiAgICAgIH0pLCBlJDIoRGVzY3JpcHRpb24sIHsKICAgICAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24KICAgICAgfSksIGUkMihFcnJvcnMsIHsKICAgICAgICBlcnJvcnM6IGVycm9ycwogICAgICB9KV0KICAgIH0pOwogIH0KICBDaGVja2JveC5jcmVhdGUgPSBmdW5jdGlvbiAob3B0aW9ucyA9IHt9KSB7CiAgICByZXR1cm4gewogICAgICAuLi5vcHRpb25zCiAgICB9OwogIH07CiAgQ2hlY2tib3gudHlwZSA9IHR5cGUkYTsKICBDaGVja2JveC5sYWJlbCA9ICdDaGVja2JveCc7CiAgQ2hlY2tib3gua2V5ZWQgPSB0cnVlOwogIENoZWNrYm94LmVtcHR5VmFsdWUgPSBmYWxzZTsKICBDaGVja2JveC5zYW5pdGl6ZVZhbHVlID0gKHsKICAgIHZhbHVlCiAgfSkgPT4gdmFsdWUgPT09IHRydWU7CgogIGZ1bmN0aW9uIHVzZVNlcnZpY2UgKHR5cGUsIHN0cmljdCkgewogICAgY29uc3QgewogICAgICBnZXRTZXJ2aWNlCiAgICB9ID0gRiQxKEZvcm1Db250ZXh0KTsKICAgIHJldHVybiBnZXRTZXJ2aWNlKHR5cGUsIHN0cmljdCk7CiAgfQoKICAvKioKICAgKiBAZW51bSB7IFN0cmluZyB9CiAgICovCiAgY29uc3QgTE9BRF9TVEFURVMgPSB7CiAgICBMT0FESU5HOiAnbG9hZGluZycsCiAgICBMT0FERUQ6ICdsb2FkZWQnLAogICAgRVJST1I6ICdlcnJvcicKICB9OwoKICAvKioKICAgKiBAdHlwZWRlZiB7T2JqZWN0fSBWYWx1ZXNHZXR0ZXIKICAgKiBAcHJvcGVydHkge09iamVjdFtdfSB2YWx1ZXMgLSBUaGUgdmFsdWVzIGRhdGEKICAgKiBAcHJvcGVydHkgeyhMT0FEX1NUQVRFUyl9IHN0YXRlIC0gVGhlIHZhbHVlcyBkYXRhJ3MgbG9hZGluZyBzdGF0ZSwgdG8gdXNlIGZvciBjb25kaXRpb25hbCByZW5kZXJpbmcKICAgKi8KCiAgLyoqCiAgICogQSBob29rIHRvIGxvYWQgdmFsdWVzIGZvciBzaW5nbGUgYW5kIG11bHRpc2VsZWN0IGNvbXBvbmVudHMuCiAgICoKICAgKiBAcGFyYW0ge09iamVjdH0gZmllbGQgLSBUaGUgZm9ybSBmaWVsZCB0byBoYW5kbGUgdmFsdWVzIGZvcgogICAqIEByZXR1cm4ge1ZhbHVlc0dldHRlcn0gdmFsdWVzR2V0dGVyIC0gQSB2YWx1ZXMgZ2V0dGVyIG9iamVjdCBwcm92aWRpbmcgbG9hZGluZyBzdGF0ZSBhbmQgdmFsdWVzCiAgICovCiAgZnVuY3Rpb24gdXNlVmFsdWVzQXN5bmMgKGZpZWxkKSB7CiAgICBjb25zdCB7CiAgICAgIHZhbHVlc0tleSwKICAgICAgdmFsdWVzOiBzdGF0aWNWYWx1ZXMKICAgIH0gPSBmaWVsZDsKICAgIGNvbnN0IFt2YWx1ZXNHZXR0ZXIsIHNldFZhbHVlc0dldHRlcl0gPSBsJDEoewogICAgICB2YWx1ZXM6IFtdLAogICAgICBlcnJvcjogdW5kZWZpbmVkLAogICAgICBzdGF0ZTogTE9BRF9TVEFURVMuTE9BRElORwogICAgfSk7CiAgICBjb25zdCBpbml0aWFsRGF0YSA9IHVzZVNlcnZpY2UoJ2Zvcm0nKS5fZ2V0U3RhdGUoKS5pbml0aWFsRGF0YTsKICAgIHkoKCkgPT4gewogICAgICBsZXQgdmFsdWVzID0gW107CiAgICAgIGlmICh2YWx1ZXNLZXkgIT09IHVuZGVmaW5lZCkgewogICAgICAgIGNvbnN0IGtleWVkVmFsdWVzID0gKGluaXRpYWxEYXRhIHx8IHt9KVt2YWx1ZXNLZXldOwogICAgICAgIGlmIChrZXllZFZhbHVlcyAmJiBBcnJheS5pc0FycmF5KGtleWVkVmFsdWVzKSkgewogICAgICAgICAgdmFsdWVzID0ga2V5ZWRWYWx1ZXM7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKHN0YXRpY1ZhbHVlcyAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgdmFsdWVzID0gQXJyYXkuaXNBcnJheShzdGF0aWNWYWx1ZXMpID8gc3RhdGljVmFsdWVzIDogW107CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc2V0VmFsdWVzR2V0dGVyKGdldEVycm9yU3RhdGUoJ05vIHZhbHVlcyBzb3VyY2UgZGVmaW5lZCBpbiB0aGUgZm9ybSBkZWZpbml0aW9uJykpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBzZXRWYWx1ZXNHZXR0ZXIoYnVpbGRMb2FkZWRTdGF0ZSh2YWx1ZXMpKTsKICAgIH0sIFt2YWx1ZXNLZXksIHN0YXRpY1ZhbHVlcywgaW5pdGlhbERhdGFdKTsKICAgIHJldHVybiB2YWx1ZXNHZXR0ZXI7CiAgfQogIGNvbnN0IGdldEVycm9yU3RhdGUgPSBlcnJvciA9PiAoewogICAgdmFsdWVzOiBbXSwKICAgIGVycm9yLAogICAgc3RhdGU6IExPQURfU1RBVEVTLkVSUk9SCiAgfSk7CiAgY29uc3QgYnVpbGRMb2FkZWRTdGF0ZSA9IHZhbHVlcyA9PiAoewogICAgdmFsdWVzLAogICAgZXJyb3I6IHVuZGVmaW5lZCwKICAgIHN0YXRlOiBMT0FEX1NUQVRFUy5MT0FERUQKICB9KTsKCiAgY29uc3QgRU5URVJfS0VZRE9XTl9FVkVOVCA9IG5ldyBLZXlib2FyZEV2ZW50KCdrZXlkb3duJywgewogICAgY29kZTogJ0VudGVyJywKICAgIGtleTogJ0VudGVyJywKICAgIGNoYXJDb2RlOiAxMywKICAgIGtleUNvZGU6IDEzLAogICAgdmlldzogd2luZG93LAogICAgYnViYmxlczogdHJ1ZQogIH0pOwogIGZ1bmN0aW9uIGZvY3VzUmVsZXZhbnRGbGF0cGlja2VyRGF5KGZsYXRwaWNrckluc3RhbmNlKSB7CiAgICBpZiAoIWZsYXRwaWNrckluc3RhbmNlKSByZXR1cm47CiAgICAhZmxhdHBpY2tySW5zdGFuY2UuaXNPcGVuICYmIGZsYXRwaWNrckluc3RhbmNlLm9wZW4oKTsKICAgIGNvbnN0IGNvbnRhaW5lciA9IGZsYXRwaWNrckluc3RhbmNlLmNhbGVuZGFyQ29udGFpbmVyOwogICAgY29uc3QgZGF5VG9Gb2N1cyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZmxhdHBpY2tyLWRheS5zZWxlY3RlZCcpIHx8IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZmxhdHBpY2tyLWRheS50b2RheScpIHx8IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZmxhdHBpY2tyLWRheScpOwogICAgZGF5VG9Gb2N1cyAmJiBkYXlUb0ZvY3VzLmZvY3VzKCk7CiAgfQogIGZ1bmN0aW9uIGZvcm1hdFRpbWUodXNlMjRoLCBtaW51dGVzKSB7CiAgICBpZiAobWludXRlcyA9PT0gbnVsbCkgcmV0dXJuIG51bGw7CiAgICBjb25zdCB3cmFwcGVkTWludXRlcyA9IG1pbnV0ZXMgJSAoMjQgKiA2MCk7CiAgICBjb25zdCBtaW51dGUgPSBtaW51dGVzICUgNjA7CiAgICBsZXQgaG91ciA9IE1hdGguZmxvb3Iod3JhcHBlZE1pbnV0ZXMgLyA2MCk7CiAgICBpZiAodXNlMjRoKSB7CiAgICAgIHJldHVybiBfZ2V0WmVyb1BhZGRlZFN0cmluZyhob3VyKSArICc6JyArIF9nZXRaZXJvUGFkZGVkU3RyaW5nKG1pbnV0ZSk7CiAgICB9CiAgICBob3VyID0gaG91ciAlIDEyIHx8IDEyOwogICAgY29uc3QgaXNQTSA9IHdyYXBwZWRNaW51dGVzID49IDEyICogNjA7CiAgICByZXR1cm4gX2dldFplcm9QYWRkZWRTdHJpbmcoaG91cikgKyAnOicgKyBfZ2V0WmVyb1BhZGRlZFN0cmluZyhtaW51dGUpICsgJyAnICsgKGlzUE0gPyAnUE0nIDogJ0FNJyk7CiAgfQogIGZ1bmN0aW9uIHBhcnNlSW5wdXRUaW1lKHN0cmluZ1RpbWUpIHsKICAgIGxldCB3b3JraW5nU3RyaW5nID0gc3RyaW5nVGltZS50b0xvd2VyQ2FzZSgpOwogICAgY29uc3QgaXMxMmggPSB3b3JraW5nU3RyaW5nLmluY2x1ZGVzKCdhbScpIHx8IHdvcmtpbmdTdHJpbmcuaW5jbHVkZXMoJ3BtJyk7CiAgICBpZiAoaXMxMmgpIHsKICAgICAgY29uc3QgaXNQTSA9IHdvcmtpbmdTdHJpbmcuaW5jbHVkZXMoJ3BtJyk7CiAgICAgIGNvbnN0IGRpZ2l0cyA9IHdvcmtpbmdTdHJpbmcubWF0Y2goL1xkKy9nKTsKICAgICAgY29uc3QgZGlzcGxheUhvdXIgPSBwYXJzZUludChkaWdpdHM/LlswXSk7CiAgICAgIGNvbnN0IG1pbnV0ZSA9IHBhcnNlSW50KGRpZ2l0cz8uWzFdKSB8fCAwOwogICAgICBjb25zdCBpc1ZhbGlkRGlzcGxheUhvdXIgPSBpc051bWJlciQyKGRpc3BsYXlIb3VyKSAmJiBkaXNwbGF5SG91ciA+PSAxICYmIGRpc3BsYXlIb3VyIDw9IDEyOwogICAgICBjb25zdCBpc1ZhbGlkTWludXRlID0gbWludXRlID49IDAgJiYgbWludXRlIDw9IDU5OwogICAgICBpZiAoIWlzVmFsaWREaXNwbGF5SG91ciB8fCAhaXNWYWxpZE1pbnV0ZSkgcmV0dXJuIG51bGw7CiAgICAgIGNvbnN0IGhvdXIgPSBkaXNwbGF5SG91ciAlIDEyICsgKGlzUE0gPyAxMiA6IDApOwogICAgICByZXR1cm4gaG91ciAqIDYwICsgbWludXRlOwogICAgfSBlbHNlIHsKICAgICAgY29uc3QgZGlnaXRzID0gd29ya2luZ1N0cmluZy5tYXRjaCgvXGQrL2cpOwogICAgICBjb25zdCBob3VyID0gcGFyc2VJbnQoZGlnaXRzPy5bMF0pOwogICAgICBjb25zdCBtaW51dGUgPSBwYXJzZUludChkaWdpdHM/LlsxXSk7CiAgICAgIGNvbnN0IGlzVmFsaWRIb3VyID0gaXNOdW1iZXIkMihob3VyKSAmJiBob3VyID49IDAgJiYgaG91ciA8PSAyMzsKICAgICAgY29uc3QgaXNWYWxpZE1pbnV0ZSA9IGlzTnVtYmVyJDIobWludXRlKSAmJiBtaW51dGUgPj0gMCAmJiBtaW51dGUgPD0gNTk7CiAgICAgIGlmICghaXNWYWxpZEhvdXIgfHwgIWlzVmFsaWRNaW51dGUpIHJldHVybiBudWxsOwogICAgICByZXR1cm4gaG91ciAqIDYwICsgbWludXRlOwogICAgfQogIH0KICBmdW5jdGlvbiBzZXJpYWxpemVUaW1lKG1pbnV0ZXMsIG9mZnNldCwgdGltZVNlcmlhbGl6aW5nRm9ybWF0KSB7CiAgICBpZiAodGltZVNlcmlhbGl6aW5nRm9ybWF0ID09PSBUSU1FX1NFUklBTElTSU5HX0ZPUk1BVFMuVVRDX05PUk1BTElaRUQpIHsKICAgICAgY29uc3Qgbm9ybWFsaXplZE1pbnV0ZXMgPSAobWludXRlcyArIG9mZnNldCArIE1JTlVURVNfSU5fREFZKSAlIE1JTlVURVNfSU5fREFZOwogICAgICByZXR1cm4gX2dldFplcm9QYWRkZWRTdHJpbmcoTWF0aC5mbG9vcihub3JtYWxpemVkTWludXRlcyAvIDYwKSkgKyAnOicgKyBfZ2V0WmVyb1BhZGRlZFN0cmluZyhub3JtYWxpemVkTWludXRlcyAlIDYwKSArICdaJzsKICAgIH0KICAgIGNvbnN0IGJhc2VUaW1lID0gX2dldFplcm9QYWRkZWRTdHJpbmcoTWF0aC5mbG9vcihtaW51dGVzIC8gNjApKSArICc6JyArIF9nZXRaZXJvUGFkZGVkU3RyaW5nKG1pbnV0ZXMgJSA2MCk7CiAgICBjb25zdCBhZGRVVENPZmZzZXQgPSB0aW1lU2VyaWFsaXppbmdGb3JtYXQgPT09IFRJTUVfU0VSSUFMSVNJTkdfRk9STUFUUy5VVENfT0ZGU0VUOwogICAgcmV0dXJuIGJhc2VUaW1lICsgKGFkZFVUQ09mZnNldCA/IGZvcm1hdFRpbWV6b25lT2Zmc2V0KG9mZnNldCkgOiAnJyk7CiAgfQogIGZ1bmN0aW9uIHBhcnNlSXNvVGltZShpc29UaW1lU3RyaW5nKSB7CiAgICBpZiAoIWlzb1RpbWVTdHJpbmcpIHJldHVybiBudWxsOwogICAgY29uc3QgcGFyc2VCYXNpY01pbnV0ZXMgPSB0aW1lU3RyaW5nID0+IHsKICAgICAgY29uc3QgdGltZVNlZ21lbnRzID0gdGltZVN0cmluZy5zcGxpdCgnOicpOwogICAgICBjb25zdCBob3VyID0gcGFyc2VJbnQodGltZVNlZ21lbnRzWzBdKTsKICAgICAgY29uc3QgbWludXRlID0gdGltZVNlZ21lbnRzLmxlbmd0aCA+IDEgPyBwYXJzZUludCh0aW1lU2VnbWVudHNbMV0pIDogMDsKICAgICAgaWYgKGlzTmFOKGhvdXIpIHx8IGhvdXIgPCAwIHx8IGhvdXIgPiAyNCB8fCBpc05hTihtaW51dGUpIHx8IG1pbnV0ZSA8IDAgfHwgbWludXRlID4gNjApIHJldHVybiBudWxsOwogICAgICByZXR1cm4gaG91ciAqIDYwICsgbWludXRlOwogICAgfTsKICAgIGNvbnN0IGxvY2FsT2Zmc2V0ID0gbmV3IERhdGUoKS5nZXRUaW1lem9uZU9mZnNldCgpOwoKICAgIC8vIFBhcnNlIG5vcm1hbGl6ZWQgdGltZQogICAgaWYgKGlzb1RpbWVTdHJpbmcuaW5jbHVkZXMoJ1onKSkgewogICAgICBpc29UaW1lU3RyaW5nID0gaXNvVGltZVN0cmluZy5yZXBsYWNlKCdaJywgJycpOwogICAgICBjb25zdCBtaW51dGVzID0gcGFyc2VCYXNpY01pbnV0ZXMoaXNvVGltZVN0cmluZyk7CiAgICAgIGlmIChtaW51dGVzID09PSBudWxsKSByZXR1cm4gbnVsbDsKICAgICAgcmV0dXJuIChtaW51dGVzIC0gbG9jYWxPZmZzZXQgKyBNSU5VVEVTX0lOX0RBWSkgJSBNSU5VVEVTX0lOX0RBWTsKICAgIH0KCiAgICAvLyBQYXJzZSBvZmZzZXQgcG9zaXRpdmUgdGltZQogICAgZWxzZSBpZiAoaXNvVGltZVN0cmluZy5pbmNsdWRlcygnKycpKSB7CiAgICAgIGNvbnN0IFt0aW1lU3RyaW5nLCBvZmZzZXRTdHJpbmddID0gaXNvVGltZVN0cmluZy5zcGxpdCgnKycpOwogICAgICBjb25zdCBtaW51dGVzID0gcGFyc2VCYXNpY01pbnV0ZXModGltZVN0cmluZyk7CiAgICAgIGxldCBpbmJvdW5kT2Zmc2V0ID0gcGFyc2VCYXNpY01pbnV0ZXMob2Zmc2V0U3RyaW5nKTsKICAgICAgaWYgKG1pbnV0ZXMgPT09IG51bGwgfHwgaW5ib3VuZE9mZnNldCA9PT0gbnVsbCkgcmV0dXJuIG51bGw7CgogICAgICAvLyBUaGUgb2Zmc2V0IGlzIGZsaXBwZWQgZm9yIGNvbnNpc3RlbmN5IHdpdGggamF2YXNjcmlwdAogICAgICBpbmJvdW5kT2Zmc2V0ID0gLWluYm91bmRPZmZzZXQ7CiAgICAgIHJldHVybiAobWludXRlcyArIGluYm91bmRPZmZzZXQgLSBsb2NhbE9mZnNldCArIE1JTlVURVNfSU5fREFZKSAlIE1JTlVURVNfSU5fREFZOwogICAgfQoKICAgIC8vIFBhcnNlIG9mZnNldCBuZWdhdGl2ZSB0aW1lCiAgICBlbHNlIGlmIChpc29UaW1lU3RyaW5nLmluY2x1ZGVzKCctJykpIHsKICAgICAgY29uc3QgW3RpbWVTdHJpbmcsIG9mZnNldFN0cmluZ10gPSBpc29UaW1lU3RyaW5nLnNwbGl0KCctJyk7CiAgICAgIGNvbnN0IG1pbnV0ZXMgPSBwYXJzZUJhc2ljTWludXRlcyh0aW1lU3RyaW5nKTsKICAgICAgbGV0IGluYm91bmRPZmZzZXQgPSBwYXJzZUJhc2ljTWludXRlcyhvZmZzZXRTdHJpbmcpOwogICAgICBpZiAobWludXRlcyA9PT0gbnVsbCB8fCBpbmJvdW5kT2Zmc2V0ID09PSBudWxsKSByZXR1cm4gbnVsbDsKICAgICAgcmV0dXJuIChtaW51dGVzICsgaW5ib3VuZE9mZnNldCAtIGxvY2FsT2Zmc2V0ICsgTUlOVVRFU19JTl9EQVkpICUgTUlOVVRFU19JTl9EQVk7CiAgICB9CgogICAgLy8gRGVmYXVsdCB0byBsb2NhbCBwYXJzaW5nCiAgICBlbHNlIHsKICAgICAgcmV0dXJuIHBhcnNlQmFzaWNNaW51dGVzKGlzb1RpbWVTdHJpbmcpOwogICAgfQogIH0KICBmdW5jdGlvbiBzZXJpYWxpemVEYXRlKGRhdGUpIHsKICAgIHZhciBkID0gbmV3IERhdGUoZGF0ZSksCiAgICAgIG1vbnRoID0gJycgKyAoZC5nZXRNb250aCgpICsgMSksCiAgICAgIGRheSA9ICcnICsgZC5nZXREYXRlKCksCiAgICAgIHllYXIgPSBkLmdldEZ1bGxZZWFyKCk7CiAgICBpZiAobW9udGgubGVuZ3RoIDwgMikgbW9udGggPSAnMCcgKyBtb250aDsKICAgIGlmIChkYXkubGVuZ3RoIDwgMikgZGF5ID0gJzAnICsgZGF5OwogICAgcmV0dXJuIFt5ZWFyLCBtb250aCwgZGF5XS5qb2luKCctJyk7CiAgfQoKICAvLyB0aGlzIG1ldGhvZCBpcyB1c2VkIHRvIG1ha2UgdGhlIGBuZXcgRGF0ZSh2YWx1ZSlgIHBhcnNpbmcgYmVoYXZpb3Igc3RyaWN0ZXIKICBmdW5jdGlvbiBpc0RhdGVUaW1lSW5wdXRJbmZvcm1hdGlvblN1ZmZpY2llbnQodmFsdWUpIHsKICAgIGlmICghdmFsdWUgfHwgdHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJykgcmV0dXJuIGZhbHNlOwogICAgY29uc3Qgc2VnbWVudHMgPSB2YWx1ZS5zcGxpdCgnVCcpOwogICAgaWYgKHNlZ21lbnRzLmxlbmd0aCAhPSAyKSByZXR1cm4gZmFsc2U7CiAgICBjb25zdCBkYXRlTnVtYmVycyA9IHNlZ21lbnRzWzBdLnNwbGl0KCctJyk7CiAgICBpZiAoZGF0ZU51bWJlcnMubGVuZ3RoICE9IDMpIHJldHVybiBmYWxzZTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLy8gdGhpcyBtZXRob2QgY2hlY2tzIGlmIHRoZSBkYXRlIGlzbid0IGEgZGF0ZXRpbWUsIG9yIGEgcGFydGlhbCBkYXRlCiAgZnVuY3Rpb24gaXNEYXRlSW5wdXRJbmZvcm1hdGlvbk1hdGNoaW5nKHZhbHVlKSB7CiAgICBpZiAoIXZhbHVlIHx8IHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHJldHVybiBmYWxzZTsKICAgIGlmICh2YWx1ZS5pbmNsdWRlcygnVCcpKSByZXR1cm4gZmFsc2U7CiAgICBjb25zdCBkYXRlTnVtYmVycyA9IHZhbHVlLnNwbGl0KCctJyk7CiAgICBpZiAoZGF0ZU51bWJlcnMubGVuZ3RoICE9IDMpIHJldHVybiBmYWxzZTsKICAgIHJldHVybiB0cnVlOwogIH0KICBmdW5jdGlvbiBzZXJpYWxpemVEYXRlVGltZShkYXRlLCB0aW1lLCB0aW1lU2VyaWFsaXppbmdGb3JtYXQpIHsKICAgIGNvbnN0IHdvcmtpbmdEYXRlID0gbmV3IERhdGUoKTsKICAgIHdvcmtpbmdEYXRlLnNldEZ1bGxZZWFyKGRhdGUuZ2V0RnVsbFllYXIoKSwgZGF0ZS5nZXRNb250aCgpLCBkYXRlLmdldERhdGUoKSk7CiAgICB3b3JraW5nRGF0ZS5zZXRIb3VycyhNYXRoLmZsb29yKHRpbWUgLyA2MCksIHRpbWUgJSA2MCwgMCwgMCk7CiAgICBpZiAodGltZVNlcmlhbGl6aW5nRm9ybWF0ID09PSBUSU1FX1NFUklBTElTSU5HX0ZPUk1BVFMuVVRDX05PUk1BTElaRUQpIHsKICAgICAgY29uc3QgdGltZXpvbmVPZmZzZXRNaW51dGVzID0gd29ya2luZ0RhdGUuZ2V0VGltZXpvbmVPZmZzZXQoKTsKICAgICAgY29uc3QgZGF5T2Zmc2V0ID0gdGltZSArIHRpbWV6b25lT2Zmc2V0TWludXRlcyA8IDAgPyAtMSA6IHRpbWUgKyB0aW1lem9uZU9mZnNldE1pbnV0ZXMgPiBNSU5VVEVTX0lOX0RBWSA/IDEgOiAwOwoKICAgICAgLy8gQXBwbHkgdGhlIGRhdGUgcm9sbG92ZXIgcHJlLWVtcHRpdmVseQogICAgICB3b3JraW5nRGF0ZS5zZXRIb3Vycyh3b3JraW5nRGF0ZS5nZXRIb3VycygpICsgZGF5T2Zmc2V0ICogMjQpOwogICAgfQogICAgcmV0dXJuIHNlcmlhbGl6ZURhdGUod29ya2luZ0RhdGUpICsgJ1QnICsgc2VyaWFsaXplVGltZSh0aW1lLCB3b3JraW5nRGF0ZS5nZXRUaW1lem9uZU9mZnNldCgpLCB0aW1lU2VyaWFsaXppbmdGb3JtYXQpOwogIH0KICBmdW5jdGlvbiBmb3JtYXRUaW1lem9uZU9mZnNldChtaW51dGVzKSB7CiAgICByZXR1cm4gX2dldFNpZ25lZFBhZGRlZEhvdXJzKG1pbnV0ZXMpICsgJzonICsgX2dldFplcm9QYWRkZWRTdHJpbmcoTWF0aC5hYnMobWludXRlcyAlIDYwKSk7CiAgfQogIGZ1bmN0aW9uIGlzSW52YWxpZERhdGVTdHJpbmcodmFsdWUpIHsKICAgIHJldHVybiBpc05hTihuZXcgRGF0ZShEYXRlLnBhcnNlKHZhbHVlKSkuZ2V0VGltZSgpKTsKICB9CiAgZnVuY3Rpb24gX2dldFNpZ25lZFBhZGRlZEhvdXJzKG1pbnV0ZXMpIHsKICAgIGlmIChtaW51dGVzID4gMCkgewogICAgICByZXR1cm4gJy0nICsgX2dldFplcm9QYWRkZWRTdHJpbmcoTWF0aC5mbG9vcihtaW51dGVzIC8gNjApKTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiAnKycgKyBfZ2V0WmVyb1BhZGRlZFN0cmluZyhNYXRoLmZsb29yKCgwIC0gbWludXRlcykgLyA2MCkpOwogICAgfQogIH0KICBmdW5jdGlvbiBfZ2V0WmVyb1BhZGRlZFN0cmluZyh0aW1lKSB7CiAgICByZXR1cm4gdGltZS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyk7CiAgfQoKICBmdW5jdGlvbiBzYW5pdGl6ZURhdGVUaW1lUGlja2VyVmFsdWUob3B0aW9ucykgewogICAgY29uc3QgewogICAgICBmb3JtRmllbGQsCiAgICAgIHZhbHVlCiAgICB9ID0gb3B0aW9uczsKICAgIGNvbnN0IHsKICAgICAgc3VidHlwZQogICAgfSA9IGZvcm1GaWVsZDsKICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnKSByZXR1cm4gbnVsbDsKICAgIGlmIChzdWJ0eXBlID09PSBEQVRFVElNRV9TVUJUWVBFUy5EQVRFICYmIChpc0ludmFsaWREYXRlU3RyaW5nKHZhbHVlKSB8fCAhaXNEYXRlSW5wdXRJbmZvcm1hdGlvbk1hdGNoaW5nKHZhbHVlKSkpIHJldHVybiBudWxsOwogICAgaWYgKHN1YnR5cGUgPT09IERBVEVUSU1FX1NVQlRZUEVTLlRJTUUgJiYgcGFyc2VJc29UaW1lKHZhbHVlKSA9PT0gbnVsbCkgcmV0dXJuIG51bGw7CiAgICBpZiAoc3VidHlwZSA9PT0gREFURVRJTUVfU1VCVFlQRVMuREFURVRJTUUgJiYgKGlzSW52YWxpZERhdGVTdHJpbmcodmFsdWUpIHx8ICFpc0RhdGVUaW1lSW5wdXRJbmZvcm1hdGlvblN1ZmZpY2llbnQodmFsdWUpKSkgcmV0dXJuIG51bGw7CiAgICByZXR1cm4gdmFsdWU7CiAgfQogIGZ1bmN0aW9uIHNhbml0aXplU2luZ2xlU2VsZWN0VmFsdWUob3B0aW9ucykgewogICAgY29uc3QgewogICAgICBmb3JtRmllbGQsCiAgICAgIGRhdGEsCiAgICAgIHZhbHVlCiAgICB9ID0gb3B0aW9uczsKICAgIGNvbnN0IHsKICAgICAgdmFsdWVzS2V5LAogICAgICB2YWx1ZXMKICAgIH0gPSBmb3JtRmllbGQ7CiAgICB0cnkgewogICAgICBjb25zdCB2YWxpZFZhbHVlcyA9ICh2YWx1ZXNLZXkgPyBnZXQoZGF0YSwgW3ZhbHVlc0tleV0pIDogdmFsdWVzKS5tYXAodiA9PiB2LnZhbHVlKSB8fCBbXTsKICAgICAgcmV0dXJuIHZhbGlkVmFsdWVzLmluY2x1ZGVzKHZhbHVlKSA/IHZhbHVlIDogbnVsbDsKICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgIC8vIHVzZSBkZWZhdWx0IHZhbHVlIGluIGNhc2Ugb2YgZm9ybWF0dGluZyBlcnJvcgogICAgICAvLyBUT0RPKEBTa2FpaXIpOiBsb2cgYSB3YXJuaW5nIHdoZW4gdGhpcyBoYXBwZW5zIC0gaHR0cHM6Ly9naXRodWIuY29tL2JwbW4taW8vZm9ybS1qcy9pc3N1ZXMvMjg5CiAgICAgIHJldHVybiBudWxsOwogICAgfQogIH0KICBmdW5jdGlvbiBzYW5pdGl6ZU11bHRpU2VsZWN0VmFsdWUob3B0aW9ucykgewogICAgY29uc3QgewogICAgICBmb3JtRmllbGQsCiAgICAgIGRhdGEsCiAgICAgIHZhbHVlCiAgICB9ID0gb3B0aW9uczsKICAgIGNvbnN0IHsKICAgICAgdmFsdWVzS2V5LAogICAgICB2YWx1ZXMKICAgIH0gPSBmb3JtRmllbGQ7CiAgICB0cnkgewogICAgICBjb25zdCB2YWxpZFZhbHVlcyA9ICh2YWx1ZXNLZXkgPyBnZXQoZGF0YSwgW3ZhbHVlc0tleV0pIDogdmFsdWVzKS5tYXAodiA9PiB2LnZhbHVlKSB8fCBbXTsKICAgICAgcmV0dXJuIHZhbHVlLmZpbHRlcih2ID0+IHZhbGlkVmFsdWVzLmluY2x1ZGVzKHYpKTsKICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgIC8vIHVzZSBkZWZhdWx0IHZhbHVlIGluIGNhc2Ugb2YgZm9ybWF0dGluZyBlcnJvcgogICAgICAvLyBUT0RPKEBTa2FpaXIpOiBsb2cgYSB3YXJuaW5nIHdoZW4gdGhpcyBoYXBwZW5zIC0gaHR0cHM6Ly9naXRodWIuY29tL2JwbW4taW8vZm9ybS1qcy9pc3N1ZXMvMjg5CiAgICAgIHJldHVybiBbXTsKICAgIH0KICB9CgogIGNvbnN0IHR5cGUkOSA9ICdjaGVja2xpc3QnOwogIGZ1bmN0aW9uIENoZWNrbGlzdChwcm9wcykgewogICAgY29uc3QgewogICAgICBkaXNhYmxlZCwKICAgICAgZXJyb3JzID0gW10sCiAgICAgIGZpZWxkLAogICAgICB2YWx1ZSA9IFtdCiAgICB9ID0gcHJvcHM7CiAgICBjb25zdCB7CiAgICAgIGRlc2NyaXB0aW9uLAogICAgICBpZCwKICAgICAgbGFiZWwKICAgIH0gPSBmaWVsZDsKICAgIGNvbnN0IHRvZ2dsZUNoZWNrYm94ID0gdiA9PiB7CiAgICAgIGxldCBuZXdWYWx1ZSA9IFsuLi52YWx1ZV07CiAgICAgIGlmICghbmV3VmFsdWUuaW5jbHVkZXModikpIHsKICAgICAgICBuZXdWYWx1ZS5wdXNoKHYpOwogICAgICB9IGVsc2UgewogICAgICAgIG5ld1ZhbHVlID0gbmV3VmFsdWUuZmlsdGVyKHggPT4geCAhPSB2KTsKICAgICAgfQogICAgICBwcm9wcy5vbkNoYW5nZSh7CiAgICAgICAgZmllbGQsCiAgICAgICAgdmFsdWU6IG5ld1ZhbHVlCiAgICAgIH0pOwogICAgfTsKICAgIGNvbnN0IHsKICAgICAgc3RhdGU6IGxvYWRTdGF0ZSwKICAgICAgdmFsdWVzOiBvcHRpb25zCiAgICB9ID0gdXNlVmFsdWVzQXN5bmMoZmllbGQpOwogICAgY29uc3QgewogICAgICBmb3JtSWQKICAgIH0gPSBGJDEoRm9ybUNvbnRleHQpOwogICAgcmV0dXJuIGUkMigiZGl2IiwgewogICAgICBjbGFzczogY2xhc3NOYW1lcyhmb3JtRmllbGRDbGFzc2VzKHR5cGUkOSwgewogICAgICAgIGVycm9ycywKICAgICAgICBkaXNhYmxlZAogICAgICB9KSksCiAgICAgIGNoaWxkcmVuOiBbZSQyKExhYmVsLCB7CiAgICAgICAgbGFiZWw6IGxhYmVsCiAgICAgIH0pLCBsb2FkU3RhdGUgPT0gTE9BRF9TVEFURVMuTE9BREVEICYmIG9wdGlvbnMubWFwKCh2LCBpbmRleCkgPT4gewogICAgICAgIHJldHVybiBlJDIoTGFiZWwsIHsKICAgICAgICAgIGlkOiBwcmVmaXhJZChgJHtpZH0tJHtpbmRleH1gLCBmb3JtSWQpLAogICAgICAgICAgbGFiZWw6IHYubGFiZWwsCiAgICAgICAgICBjbGFzczogY2xhc3NOYW1lcyh7CiAgICAgICAgICAgICdmanMtY2hlY2tlZCc6IHZhbHVlLmluY2x1ZGVzKHYudmFsdWUpCiAgICAgICAgICB9KSwKICAgICAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgICAgIGNoaWxkcmVuOiBlJDIoImlucHV0IiwgewogICAgICAgICAgICBjaGVja2VkOiB2YWx1ZS5pbmNsdWRlcyh2LnZhbHVlKSwKICAgICAgICAgICAgY2xhc3M6ICJmanMtaW5wdXQiLAogICAgICAgICAgICBkaXNhYmxlZDogZGlzYWJsZWQsCiAgICAgICAgICAgIGlkOiBwcmVmaXhJZChgJHtpZH0tJHtpbmRleH1gLCBmb3JtSWQpLAogICAgICAgICAgICB0eXBlOiAiY2hlY2tib3giLAogICAgICAgICAgICBvbkNsaWNrOiAoKSA9PiB0b2dnbGVDaGVja2JveCh2LnZhbHVlKQogICAgICAgICAgfSkKICAgICAgICB9LCBgJHtpZH0tJHtpbmRleH1gKTsKICAgICAgfSksIGUkMihEZXNjcmlwdGlvbiwgewogICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbgogICAgICB9KSwgZSQyKEVycm9ycywgewogICAgICAgIGVycm9yczogZXJyb3JzCiAgICAgIH0pXQogICAgfSk7CiAgfQogIENoZWNrbGlzdC5jcmVhdGUgPSBmdW5jdGlvbiAob3B0aW9ucyA9IHt9KSB7CiAgICBpZiAob3B0aW9ucy52YWx1ZXNLZXkpIHJldHVybiBvcHRpb25zOwogICAgcmV0dXJuIHsKICAgICAgdmFsdWVzOiBbewogICAgICAgIGxhYmVsOiAnVmFsdWUnLAogICAgICAgIHZhbHVlOiAndmFsdWUnCiAgICAgIH1dLAogICAgICAuLi5vcHRpb25zCiAgICB9OwogIH07CiAgQ2hlY2tsaXN0LnR5cGUgPSB0eXBlJDk7CiAgQ2hlY2tsaXN0LmxhYmVsID0gJ0NoZWNrbGlzdCc7CiAgQ2hlY2tsaXN0LmtleWVkID0gdHJ1ZTsKICBDaGVja2xpc3QuZW1wdHlWYWx1ZSA9IFtdOwogIENoZWNrbGlzdC5zYW5pdGl6ZVZhbHVlID0gc2FuaXRpemVNdWx0aVNlbGVjdFZhbHVlOwoKICAvKioKICAgKiBDaGVjayBpZiBjb25kaXRpb24gaXMgbWV0IHdpdGggZ2l2ZW4gdmFyaWFibGVzLgogICAqCiAgICogQHBhcmFtIHtzdHJpbmcgfCB1bmRlZmluZWR9IGNvbmRpdGlvbgogICAqIEBwYXJhbSB7aW1wb3J0KCcuLi8uLi90eXBlcycpLkRhdGF9IGRhdGEKICAgKgogICAqIEByZXR1cm5zIHtib29sZWFufSB0cnVlIGlmIGNvbmRpdGlvbiBpcyBtZXQgb3Igbm8gY29uZGl0aW9uIG9yIGNvbmRpdGlvbiBjaGVja2VyIGV4aXN0cwogICAqLwogIGZ1bmN0aW9uIHVzZUNvbmRpdGlvbihjb25kaXRpb24sIGRhdGEpIHsKICAgIGNvbnN0IGluaXRpYWxEYXRhID0gdXNlU2VydmljZSgnZm9ybScpLl9nZXRTdGF0ZSgpLmluaXRpYWxEYXRhOwogICAgY29uc3QgY29uZGl0aW9uQ2hlY2tlciA9IHVzZVNlcnZpY2UoJ2NvbmRpdGlvbkNoZWNrZXInLCBmYWxzZSk7CiAgICBpZiAoIWNvbmRpdGlvbkNoZWNrZXIpIHsKICAgICAgcmV0dXJuIG51bGw7CiAgICB9CgogICAgLy8gbWFrZSBzdXJlIHdlIGRvIG5vdCB1c2UgZGF0YSBmcm9tIGhpZGRlbiBmaWVsZHMKICAgIGNvbnN0IGZpbHRlcmVkRGF0YSA9IHsKICAgICAgLi4uaW5pdGlhbERhdGEsCiAgICAgIC4uLmNvbmRpdGlvbkNoZWNrZXIuYXBwbHlDb25kaXRpb25zKGRhdGEsIGRhdGEpCiAgICB9OwogICAgcmV0dXJuIGNvbmRpdGlvbkNoZWNrZXIuY2hlY2soY29uZGl0aW9uLCBmaWx0ZXJlZERhdGEpOwogIH0KCiAgY29uc3Qgbm9vcCQxID0gKCkgPT4gZmFsc2U7CiAgZnVuY3Rpb24gRm9ybUZpZWxkKHByb3BzKSB7CiAgICBjb25zdCB7CiAgICAgIGZpZWxkLAogICAgICBvbkNoYW5nZQogICAgfSA9IHByb3BzOwogICAgY29uc3QgewogICAgICBfcGF0aAogICAgfSA9IGZpZWxkOwogICAgY29uc3QgZm9ybUZpZWxkcyA9IHVzZVNlcnZpY2UoJ2Zvcm1GaWVsZHMnKSwKICAgICAgZm9ybSA9IHVzZVNlcnZpY2UoJ2Zvcm0nKTsKICAgIGNvbnN0IHsKICAgICAgZGF0YSwKICAgICAgZXJyb3JzLAogICAgICBwcm9wZXJ0aWVzCiAgICB9ID0gZm9ybS5fZ2V0U3RhdGUoKTsKICAgIGNvbnN0IHsKICAgICAgRWxlbWVudCwKICAgICAgRW1wdHkKICAgIH0gPSBGJDEoRm9ybVJlbmRlckNvbnRleHQpOwogICAgY29uc3QgRm9ybUZpZWxkQ29tcG9uZW50ID0gZm9ybUZpZWxkcy5nZXQoZmllbGQudHlwZSk7CiAgICBpZiAoIUZvcm1GaWVsZENvbXBvbmVudCkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoYGNhbm5vdCByZW5kZXIgZmllbGQgPCR7ZmllbGQudHlwZX0+YCk7CiAgICB9CiAgICBjb25zdCB2YWx1ZSA9IGdldChkYXRhLCBfcGF0aCk7CiAgICBjb25zdCBmaWVsZEVycm9ycyA9IGZpbmRFcnJvcnMoZXJyb3JzLCBfcGF0aCk7CiAgICBjb25zdCBkaXNhYmxlZCA9IHByb3BlcnRpZXMucmVhZE9ubHkgfHwgZmllbGQuZGlzYWJsZWQgfHwgZmFsc2U7CiAgICBjb25zdCBoaWRkZW4gPSB1c2VIaWRlQ29uZGl0aW9uKGZpZWxkLCBkYXRhKTsKICAgIGlmIChoaWRkZW4pIHsKICAgICAgcmV0dXJuIGUkMihFbXB0eSwge30pOwogICAgfQogICAgcmV0dXJuIGUkMihFbGVtZW50LCB7CiAgICAgIGZpZWxkOiBmaWVsZCwKICAgICAgY2hpbGRyZW46IGUkMihGb3JtRmllbGRDb21wb25lbnQsIHsKICAgICAgICAuLi5wcm9wcywKICAgICAgICBkaXNhYmxlZDogZGlzYWJsZWQsCiAgICAgICAgZXJyb3JzOiBmaWVsZEVycm9ycywKICAgICAgICBvbkNoYW5nZTogZGlzYWJsZWQgPyBub29wJDEgOiBvbkNoYW5nZSwKICAgICAgICB2YWx1ZTogdmFsdWUKICAgICAgfSkKICAgIH0pOwogIH0KICBmdW5jdGlvbiB1c2VIaWRlQ29uZGl0aW9uKGZpZWxkLCBkYXRhKSB7CiAgICBjb25zdCBoaWRlQ29uZGl0aW9uID0gZmllbGQuY29uZGl0aW9uYWwgJiYgZmllbGQuY29uZGl0aW9uYWwuaGlkZTsKICAgIHJldHVybiB1c2VDb25kaXRpb24oaGlkZUNvbmRpdGlvbiwgZGF0YSkgPT09IHRydWU7CiAgfQoKICBmdW5jdGlvbiBEZWZhdWx0KHByb3BzKSB7CiAgICBjb25zdCB7CiAgICAgIENoaWxkcmVuLAogICAgICBFbXB0eQogICAgfSA9IEYkMShGb3JtUmVuZGVyQ29udGV4dCk7CiAgICBjb25zdCB7CiAgICAgIGZpZWxkCiAgICB9ID0gcHJvcHM7CiAgICBjb25zdCB7CiAgICAgIGNvbXBvbmVudHMgPSBbXQogICAgfSA9IGZpZWxkOwogICAgcmV0dXJuIGUkMihDaGlsZHJlbiwgewogICAgICBjbGFzczogImZqcy12ZXJ0aWNhbC1sYXlvdXQiLAogICAgICBmaWVsZDogZmllbGQsCiAgICAgIGNoaWxkcmVuOiBbY29tcG9uZW50cy5tYXAoY2hpbGRGaWVsZCA9PiB7CiAgICAgICAgcmV0dXJuIHYkMShGb3JtRmllbGQsIHsKICAgICAgICAgIC4uLnByb3BzLAogICAgICAgICAga2V5OiBjaGlsZEZpZWxkLmlkLAogICAgICAgICAgZmllbGQ6IGNoaWxkRmllbGQKICAgICAgICB9KTsKICAgICAgfSksIGNvbXBvbmVudHMubGVuZ3RoID8gbnVsbCA6IGUkMihFbXB0eSwge30pXQogICAgfSk7CiAgfQogIERlZmF1bHQuY3JlYXRlID0gZnVuY3Rpb24gKG9wdGlvbnMgPSB7fSkgewogICAgcmV0dXJuIHsKICAgICAgY29tcG9uZW50czogW10sCiAgICAgIC4uLm9wdGlvbnMKICAgIH07CiAgfTsKICBEZWZhdWx0LnR5cGUgPSAnZGVmYXVsdCc7CiAgRGVmYXVsdC5rZXllZCA9IGZhbHNlOwoKICBmdW5jdGlvbiBfZXh0ZW5kcyRoKCkgeyBfZXh0ZW5kcyRoID0gT2JqZWN0LmFzc2lnbiA/IE9iamVjdC5hc3NpZ24uYmluZCgpIDogZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07IHJldHVybiBfZXh0ZW5kcyRoLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH0KICB2YXIgQ2FsZW5kYXJJY29uID0gKCh7CiAgICBzdHlsZXMgPSB7fSwKICAgIC4uLnByb3BzCiAgfSkgPT4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInN2ZyIsIF9leHRlbmRzJGgoewogICAgd2lkdGg6ICIxNCIsCiAgICBoZWlnaHQ6ICIxNSIsCiAgICB2aWV3Qm94OiAiMCAwIDI4IDMwIiwKICAgIGZpbGw6ICJub25lIiwKICAgIHhtbG5zOiAiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgfSwgcHJvcHMpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgicGF0aCIsIHsKICAgIGZpbGxSdWxlOiAiZXZlbm9kZCIsCiAgICBjbGlwUnVsZTogImV2ZW5vZGQiLAogICAgZDogIk0xOSAySDlWMEg3djJIMmEyIDIgMCAwMC0yIDJ2MjRhMiAyIDAgMDAyIDJoMjRhMiAyIDAgMDAyLTJWNGEyIDIgMCAwMC0yLTJoLTVWMGgtMnYyek03IDdWNEgydjVoMjRWNGgtNXYzaC0yVjRIOXYzSDd6bS01IDR2MTdoMjRWMTFIMnoiLAogICAgZmlsbDogIiMwMDAiCiAgfSkpKTsKCiAgZnVuY3Rpb24gSW5wdXRBZG9ybmVyKHByb3BzKSB7CiAgICBjb25zdCB7CiAgICAgIHByZSA9IG51bGwsCiAgICAgIHBvc3QgPSBudWxsLAogICAgICByb290UmVmLAogICAgICBpbnB1dFJlZiwKICAgICAgY2hpbGRyZW4sCiAgICAgIGRpc2FibGVkLAogICAgICBoYXNFcnJvcnMKICAgIH0gPSBwcm9wczsKICAgIGNvbnN0IG9uQWRvcm5tZW50Q2xpY2sgPSAoKSA9PiBpbnB1dFJlZj8uY3VycmVudD8uZm9jdXMoKTsKICAgIHJldHVybiBlJDIoImRpdiIsIHsKICAgICAgY2xhc3M6IGNsYXNzTmFtZXMoJ2Zqcy1pbnB1dC1ncm91cCcsIHsKICAgICAgICAnZGlzYWJsZWQnOiBkaXNhYmxlZAogICAgICB9LCB7CiAgICAgICAgJ2hhc0Vycm9ycyc6IGhhc0Vycm9ycwogICAgICB9KSwKICAgICAgcmVmOiByb290UmVmLAogICAgICBjaGlsZHJlbjogW3ByZSAhPT0gbnVsbCAmJiBlJDIoInNwYW4iLCB7CiAgICAgICAgY2xhc3M6ICJmanMtaW5wdXQtYWRvcm5tZW50IGJvcmRlci1yaWdodCBib3JkZXItcmFkaXVzLWxlZnQiLAogICAgICAgIG9uQ2xpY2s6IG9uQWRvcm5tZW50Q2xpY2ssCiAgICAgICAgY2hpbGRyZW46IFsiICIsIHByZSwgIiAiXQogICAgICB9KSwgY2hpbGRyZW4sIHBvc3QgIT09IG51bGwgJiYgZSQyKCJzcGFuIiwgewogICAgICAgIGNsYXNzOiAiZmpzLWlucHV0LWFkb3JubWVudCBib3JkZXItbGVmdCBib3JkZXItcmFkaXVzLXJpZ2h0IiwKICAgICAgICBvbkNsaWNrOiBvbkFkb3JubWVudENsaWNrLAogICAgICAgIGNoaWxkcmVuOiBbIiAiLCBwb3N0LCAiICJdCiAgICAgIH0pXQogICAgfSk7CiAgfQoKICBmdW5jdGlvbiBEYXRlcGlja2VyKHByb3BzKSB7CiAgICBjb25zdCB7CiAgICAgIGlkLAogICAgICBsYWJlbCwKICAgICAgY29sbGFwc2VMYWJlbE9uRW1wdHksCiAgICAgIGZvcm1JZCwKICAgICAgcmVxdWlyZWQsCiAgICAgIGRpc2FibGVkLAogICAgICBkaXNhbGxvd1Bhc3NlZERhdGVzLAogICAgICBkYXRlLAogICAgICBzZXREYXRlCiAgICB9ID0gcHJvcHM7CiAgICBjb25zdCBkYXRlSW5wdXRSZWYgPSBzKCk7CiAgICBjb25zdCBmb2N1c1Njb3BlUmVmID0gcygpOwogICAgY29uc3QgW2ZsYXRwaWNrckluc3RhbmNlLCBzZXRGbGF0cGlja3JJbnN0YW5jZV0gPSBsJDEobnVsbCk7CiAgICBjb25zdCBbaXNJbnB1dERpcnR5LCBzZXRJc0lucHV0RGlydHldID0gbCQxKGZhbHNlKTsKICAgIGNvbnN0IFtmb3JjZUZvY3VzQ2FsZW5kYXIsIHNldEZvcmNlRm9jdXNDYWxlbmRhcl0gPSBsJDEoZmFsc2UpOwoKICAgIC8vIHNob3J0cyB0aGUgZGF0ZSB2YWx1ZSBiYWNrIHRvIHRoZSBzb3VyY2UKICAgIHkoKCkgPT4gewogICAgICBpZiAoIWZsYXRwaWNrckluc3RhbmNlIHx8ICFmbGF0cGlja3JJbnN0YW5jZS5jb25maWcpIHJldHVybjsKICAgICAgZmxhdHBpY2tySW5zdGFuY2Uuc2V0RGF0ZShkYXRlLCB0cnVlKTsKICAgICAgc2V0SXNJbnB1dERpcnR5KGZhbHNlKTsKICAgIH0sIFtmbGF0cGlja3JJbnN0YW5jZSwgZGF0ZS50b1N0cmluZygpXSk7CiAgICB5KCgpID0+IHsKICAgICAgaWYgKCFmb3JjZUZvY3VzQ2FsZW5kYXIpIHJldHVybjsKICAgICAgZm9jdXNSZWxldmFudEZsYXRwaWNrZXJEYXkoZmxhdHBpY2tySW5zdGFuY2UpOwogICAgICBzZXRGb3JjZUZvY3VzQ2FsZW5kYXIoZmFsc2UpOwogICAgfSwgW2ZsYXRwaWNrckluc3RhbmNlLCBmb3JjZUZvY3VzQ2FsZW5kYXJdKTsKCiAgICAvLyBzZXR1cCBmbGF0cGlja3IgaW5zdGFuY2UKICAgIHkoKCkgPT4gewogICAgICBpZiAoZGlzYWJsZWQpIHsKICAgICAgICBzZXRGbGF0cGlja3JJbnN0YW5jZShudWxsKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgbGV0IGNvbmZpZyA9IHsKICAgICAgICBhbGxvd0lucHV0OiB0cnVlLAogICAgICAgIGRhdGVGb3JtYXQ6ICdtL2QvWScsCiAgICAgICAgc3RhdGljOiB0cnVlLAogICAgICAgIGNsaWNrT3BlbnM6IGZhbHNlLAogICAgICAgIGVycm9ySGFuZGxlcjogKCkgPT4gey8qIGRvIG5vdGhpbmcsIHdlIGV4cGVjdCB0aGUgdmFsdWVzIHRvIHNvbWV0aW1lcyBiZSBlcnJvbm91cyBhbmQgd2UgZG9uJ3Qgd2FudCB3YXJuaW5ncyBwb2xsdXRpbmcgdGhlIGNvbnNvbGUgKi99CiAgICAgIH07CiAgICAgIGlmIChkaXNhbGxvd1Bhc3NlZERhdGVzKSB7CiAgICAgICAgY29uZmlnID0gewogICAgICAgICAgLi4uY29uZmlnLAogICAgICAgICAgbWluRGF0ZTogJ3RvZGF5JwogICAgICAgIH07CiAgICAgIH0KICAgICAgY29uc3QgaW5zdGFuY2UgPSBmbGF0cGlja3IoZGF0ZUlucHV0UmVmLmN1cnJlbnQsIGNvbmZpZyk7CiAgICAgIHNldEZsYXRwaWNrckluc3RhbmNlKGluc3RhbmNlKTsKICAgICAgY29uc3Qgb25DYWxlbmRhckZvY3VzT3V0ID0gZSA9PiB7CiAgICAgICAgaWYgKCFpbnN0YW5jZS5jYWxlbmRhckNvbnRhaW5lci5jb250YWlucyhlLnJlbGF0ZWRUYXJnZXQpICYmIGUucmVsYXRlZFRhcmdldCAhPSBkYXRlSW5wdXRSZWYuY3VycmVudCkgewogICAgICAgICAgaW5zdGFuY2UuY2xvc2UoKTsKICAgICAgICB9CiAgICAgIH07CgogICAgICAvLyByZW1vdmUgZGlydHkgdGFnIHRvIGhhdmUgbW91c2UgZGF5IHNlbGVjdGlvbiBwcmlvcml0aXplIGlucHV0IGJsdXIKICAgICAgY29uc3Qgb25DYWxlbmRhck1vdXNlRG93biA9IGUgPT4gewogICAgICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2ZsYXRwaWNrci1kYXknKSkgewogICAgICAgICAgc2V0SXNJbnB1dERpcnR5KGZhbHNlKTsKICAgICAgICB9CiAgICAgIH07CgogICAgICAvLyB3aGVuIHRoZSBkcm9wZG93biBvZiB0aGUgZGF0ZXBpY2tyIG9wZW5zLCB3ZSByZWdpc3RlciBhIGZldyBldmVudCBoYW5kbGVycyB0byByZS1pbXBsZW1lbnQgc29tZSBvZiB0aGUKICAgICAgLy8gZmxhdHBpY2tlciBsb2dpYyB0aGF0IHdhcyBsb3N0IHdoZW4gc2V0dGluZyBhbGxvd0lucHV0IHRvIHRydWUKICAgICAgaW5zdGFuY2UuY29uZmlnLm9uT3BlbiA9IFsoKSA9PiBpbnN0YW5jZS5jYWxlbmRhckNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdmb2N1c291dCcsIG9uQ2FsZW5kYXJGb2N1c091dCksICgpID0+IGluc3RhbmNlLmNhbGVuZGFyQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIG9uQ2FsZW5kYXJNb3VzZURvd24pXTsKICAgICAgaW5zdGFuY2UuY29uZmlnLm9uQ2xvc2UgPSBbKCkgPT4gaW5zdGFuY2UuY2FsZW5kYXJDb250YWluZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignZm9jdXNvdXQnLCBvbkNhbGVuZGFyRm9jdXNPdXQpLCAoKSA9PiBpbnN0YW5jZS5jYWxlbmRhckNvbnRhaW5lci5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBvbkNhbGVuZGFyTW91c2VEb3duKV07CiAgICB9LCBbZGlzYWJsZWQsIGRpc2FsbG93UGFzc2VkRGF0ZXNdKTsKCiAgICAvLyBvbkNoYW5nZSBpcyB1cGRhdGVkIGR5bmFtaWNhbGx5LCBzbyBub3QgdG8gcmUtcmVuZGVyIHRoZSBmbGF0cGlja2VyIGV2ZXJ5IHRpbWUgaXQgY2hhbmdlcwogICAgeSgoKSA9PiB7CiAgICAgIGlmICghZmxhdHBpY2tySW5zdGFuY2UgfHwgIWZsYXRwaWNrckluc3RhbmNlLmNvbmZpZykgcmV0dXJuOwogICAgICBmbGF0cGlja3JJbnN0YW5jZS5jb25maWcub25DaGFuZ2UgPSBbZGF0ZSA9PiBzZXREYXRlKG5ldyBEYXRlKGRhdGUpKSwgKCkgPT4gc2V0SXNJbnB1dERpcnR5KGZhbHNlKV07CiAgICB9LCBbZmxhdHBpY2tySW5zdGFuY2UsIHNldERhdGVdKTsKICAgIGNvbnN0IG9uSW5wdXRLZXlEb3duID0gQSQxKGUgPT4gewogICAgICBpZiAoIWZsYXRwaWNrckluc3RhbmNlKSByZXR1cm47CiAgICAgIGlmIChlLmNvZGUgPT09ICdFc2NhcGUnKSB7CiAgICAgICAgZmxhdHBpY2tySW5zdGFuY2UuY2xvc2UoKTsKICAgICAgfQogICAgICBpZiAoZS5jb2RlID09PSAnQXJyb3dEb3duJykgewogICAgICAgIGlmIChpc0lucHV0RGlydHkpIHsKICAgICAgICAgIC8vIHRyaWdnZXIgYW4gZW50ZXIga2V5cHJlc3MgdG8gc3VibWl0IHRoZSBuZXcgaW5wdXQsIHRoZW4gZm9jdXMgY2FsZW5kYXIgZGF5IG9uIHRoZSBuZXh0IHJlbmRlciBjeWNsZQogICAgICAgICAgZGF0ZUlucHV0UmVmLmN1cnJlbnQuZGlzcGF0Y2hFdmVudChFTlRFUl9LRVlET1dOX0VWRU5UKTsKICAgICAgICAgIHNldElzSW5wdXREaXJ0eShmYWxzZSk7CiAgICAgICAgICBzZXRGb3JjZUZvY3VzQ2FsZW5kYXIodHJ1ZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIGZvY3VzIGNhbGVuZGFyIGRheSBpbW1lZGlhdGVseQogICAgICAgICAgZm9jdXNSZWxldmFudEZsYXRwaWNrZXJEYXkoZmxhdHBpY2tySW5zdGFuY2UpOwogICAgICAgIH0KICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgIH0KICAgICAgaWYgKGUuY29kZSA9PT0gJ0VudGVyJykgewogICAgICAgIHNldElzSW5wdXREaXJ0eShmYWxzZSk7CiAgICAgIH0KICAgIH0sIFtmbGF0cGlja3JJbnN0YW5jZSwgaXNJbnB1dERpcnR5XSk7CiAgICBjb25zdCBvbklucHV0Rm9jdXMgPSBBJDEoZSA9PiB7CiAgICAgIGlmICghZmxhdHBpY2tySW5zdGFuY2UgfHwgZm9jdXNTY29wZVJlZi5jdXJyZW50LmNvbnRhaW5zKGUucmVsYXRlZFRhcmdldCkpIHJldHVybjsKICAgICAgZmxhdHBpY2tySW5zdGFuY2Uub3BlbigpOwogICAgfSwgW2ZsYXRwaWNrckluc3RhbmNlXSk7CgogICAgLy8gc2ltdWxhdGUgYW4gZW50ZXIgcHJlc3Mgb24gYmx1ciB0byBtYWtlIHN1cmUgdGhlIGRhdGUgdmFsdWUgaXMgc3VibWl0dGVkIGluIGFsbCBzY2VuYXJpb3MKICAgIGNvbnN0IG9uSW5wdXRCbHVyID0gQSQxKGUgPT4gewogICAgICBpZiAoIWlzSW5wdXREaXJ0eSB8fCBlLnJlbGF0ZWRUYXJnZXQgJiYgZS5yZWxhdGVkVGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZmxhdHBpY2tyLWRheScpKSByZXR1cm47CiAgICAgIGRhdGVJbnB1dFJlZi5jdXJyZW50LmRpc3BhdGNoRXZlbnQoRU5URVJfS0VZRE9XTl9FVkVOVCk7CiAgICAgIHNldElzSW5wdXREaXJ0eShmYWxzZSk7CiAgICB9LCBbaXNJbnB1dERpcnR5XSk7CiAgICBjb25zdCBmdWxsSWQgPSBgJHtwcmVmaXhJZChpZCwgZm9ybUlkKX0tLWRhdGVgOwogICAgcmV0dXJuIGUkMigiZGl2IiwgewogICAgICBjbGFzczogImZqcy1kYXRldGltZS1zdWJzZWN0aW9uIiwKICAgICAgY2hpbGRyZW46IFtlJDIoTGFiZWwsIHsKICAgICAgICBpZDogZnVsbElkLAogICAgICAgIGxhYmVsOiBsYWJlbCwKICAgICAgICBjb2xsYXBzZU9uRW1wdHk6IGNvbGxhcHNlTGFiZWxPbkVtcHR5LAogICAgICAgIHJlcXVpcmVkOiByZXF1aXJlZAogICAgICB9KSwgZSQyKElucHV0QWRvcm5lciwgewogICAgICAgIHByZTogZSQyKENhbGVuZGFySWNvbiwge30pLAogICAgICAgIGRpc2FibGVkOiBkaXNhYmxlZCwKICAgICAgICByb290UmVmOiBmb2N1c1Njb3BlUmVmLAogICAgICAgIGlucHV0UmVmOiBkYXRlSW5wdXRSZWYsCiAgICAgICAgY2hpbGRyZW46IGUkMigiZGl2IiwgewogICAgICAgICAgY2xhc3M6ICJmanMtZGF0ZXBpY2tlciIsCiAgICAgICAgICBzdHlsZTogewogICAgICAgICAgICB3aWR0aDogJzEwMCUnCiAgICAgICAgICB9LAogICAgICAgICAgY2hpbGRyZW46IGUkMigiaW5wdXQiLCB7CiAgICAgICAgICAgIHJlZjogZGF0ZUlucHV0UmVmLAogICAgICAgICAgICB0eXBlOiAidGV4dCIsCiAgICAgICAgICAgIGlkOiBmdWxsSWQsCiAgICAgICAgICAgIGNsYXNzOiAnZmpzLWlucHV0JywKICAgICAgICAgICAgZGlzYWJsZWQ6IGRpc2FibGVkLAogICAgICAgICAgICBwbGFjZWhvbGRlcjogIm1tL2RkL3l5eXkiLAogICAgICAgICAgICBhdXRvQ29tcGxldGU6ICJmYWxzZSIsCiAgICAgICAgICAgIG9uRm9jdXM6IG9uSW5wdXRGb2N1cywKICAgICAgICAgICAgb25LZXlEb3duOiBvbklucHV0S2V5RG93biwKICAgICAgICAgICAgb25Nb3VzZURvd246IGUgPT4gIWZsYXRwaWNrckluc3RhbmNlLmlzT3BlbiAmJiBmbGF0cGlja3JJbnN0YW5jZS5vcGVuKCksCiAgICAgICAgICAgIG9uQmx1cjogb25JbnB1dEJsdXIsCiAgICAgICAgICAgIG9uSW5wdXQ6IGUgPT4gc2V0SXNJbnB1dERpcnR5KHRydWUpLAogICAgICAgICAgICAiZGF0YS1pbnB1dCI6IHRydWUKICAgICAgICAgIH0pCiAgICAgICAgfSkKICAgICAgfSldCiAgICB9KTsKICB9CgogIGZ1bmN0aW9uIF9leHRlbmRzJGcoKSB7IF9leHRlbmRzJGcgPSBPYmplY3QuYXNzaWduID8gT2JqZWN0LmFzc2lnbi5iaW5kKCkgOiBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTsgcmV0dXJuIF9leHRlbmRzJGcuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfQogIHZhciBDbG9ja0ljb24gPSAoKHsKICAgIHN0eWxlcyA9IHt9LAogICAgLi4ucHJvcHMKICB9KSA9PiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgic3ZnIiwgX2V4dGVuZHMkZyh7CiAgICB3aWR0aDogIjE2IiwKICAgIGhlaWdodDogIjE2IiwKICAgIHZpZXdCb3g6ICIwIDAgMjggMjkiLAogICAgZmlsbDogIm5vbmUiLAogICAgeG1sbnM6ICJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICB9LCBwcm9wcyksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJwYXRoIiwgewogICAgZDogIk0xMyAxNC40MUwxOC41OSAyMCAyMCAxOC41OWwtNS01LjAxVjVoLTJ2OS40MXoiLAogICAgZmlsbDogIiMwMDAiCiAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJwYXRoIiwgewogICAgZmlsbFJ1bGU6ICJldmVub2RkIiwKICAgIGNsaXBSdWxlOiAiZXZlbm9kZCIsCiAgICBkOiAiTTYuMjIyIDI1LjY0QTE0IDE0IDAgMTAyMS43NzggMi4zNiAxNCAxNCAwIDAwNi4yMjIgMjUuNjR6TTcuMzMzIDQuMDIzYTEyIDEyIDAgMTExMy4zMzQgMTkuOTU1QTEyIDEyIDAgMDE3LjMzMyA0LjAyMnoiLAogICAgZmlsbDogIiMwMDAiCiAgfSkpKTsKCiAgZnVuY3Rpb24gdXNlS2V5RG93bkFjdGlvbih0YXJnZXRLZXksIGFjdGlvbiwgbGlzdGVuZXJFbGVtZW50ID0gd2luZG93KSB7CiAgICBmdW5jdGlvbiBkb3duSGFuZGxlcih7CiAgICAgIGtleQogICAgfSkgewogICAgICBpZiAoa2V5ID09PSB0YXJnZXRLZXkpIHsKICAgICAgICBhY3Rpb24oKTsKICAgICAgfQogICAgfQogICAgeSgoKSA9PiB7CiAgICAgIGxpc3RlbmVyRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZG93bkhhbmRsZXIpOwogICAgICByZXR1cm4gKCkgPT4gewogICAgICAgIGxpc3RlbmVyRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZG93bkhhbmRsZXIpOwogICAgICB9OwogICAgfSk7CiAgfQoKICBjb25zdCBERUZBVUxUX0xBQkVMX0dFVFRFUiA9IHZhbHVlID0+IHZhbHVlOwogIGNvbnN0IE5PT1AgPSAoKSA9PiB7fTsKICBmdW5jdGlvbiBEcm9wZG93bkxpc3QocHJvcHMpIHsKICAgIGNvbnN0IHsKICAgICAga2V5RXZlbnRzTGlzdGVuZXIgPSB3aW5kb3csCiAgICAgIHZhbHVlcyA9IFtdLAogICAgICBnZXRMYWJlbCA9IERFRkFVTFRfTEFCRUxfR0VUVEVSLAogICAgICBvblZhbHVlU2VsZWN0ZWQgPSBOT09QLAogICAgICBoZWlnaHQgPSAyMzUsCiAgICAgIGVtcHR5TGlzdE1lc3NhZ2UgPSAnTm8gcmVzdWx0cycsCiAgICAgIGluaXRpYWxGb2N1c0luZGV4ID0gMAogICAgfSA9IHByb3BzOwogICAgY29uc3QgW21vdXNlQ29udHJvbCwgc2V0TW91c2VDb250cm9sXSA9IGwkMShmYWxzZSk7CiAgICBjb25zdCBbZm9jdXNlZFZhbHVlSW5kZXgsIHNldEZvY3VzZWRWYWx1ZUluZGV4XSA9IGwkMShpbml0aWFsRm9jdXNJbmRleCk7CiAgICBjb25zdCBbc21vb3RoU2Nyb2xsaW5nLCBzZXRTbW9vdGhTY3JvbGxpbmddID0gbCQxKGZhbHNlKTsKICAgIGNvbnN0IGRyb3Bkb3duQ29udGFpbmVyID0gcygpOwogICAgY29uc3QgbW91c2VTY3JlZW5Qb3MgPSBzKCk7CiAgICBjb25zdCBmb2N1c2VkSXRlbSA9IGQoKCkgPT4gdmFsdWVzLmxlbmd0aCA/IHZhbHVlc1tmb2N1c2VkVmFsdWVJbmRleF0gOiBudWxsLCBbZm9jdXNlZFZhbHVlSW5kZXgsIHZhbHVlc10pOwogICAgY29uc3QgY2hhbmdlRm9jdXNlZFZhbHVlSW5kZXggPSBBJDEoZGVsdGEgPT4gewogICAgICBzZXRGb2N1c2VkVmFsdWVJbmRleCh4ID0+IE1hdGgubWluKE1hdGgubWF4KDAsIHggKyBkZWx0YSksIHZhbHVlcy5sZW5ndGggLSAxKSk7CiAgICB9LCBbdmFsdWVzLmxlbmd0aF0pOwogICAgeSgoKSA9PiB7CiAgICAgIGlmIChmb2N1c2VkVmFsdWVJbmRleCA9PT0gMCkgcmV0dXJuOwogICAgICBpZiAoIWZvY3VzZWRWYWx1ZUluZGV4IHx8ICF2YWx1ZXMubGVuZ3RoKSB7CiAgICAgICAgc2V0Rm9jdXNlZFZhbHVlSW5kZXgoMCk7CiAgICAgIH0gZWxzZSBpZiAoZm9jdXNlZFZhbHVlSW5kZXggPj0gdmFsdWVzLmxlbmd0aCkgewogICAgICAgIHNldEZvY3VzZWRWYWx1ZUluZGV4KHZhbHVlcy5sZW5ndGggLSAxKTsKICAgICAgfQogICAgfSwgW2ZvY3VzZWRWYWx1ZUluZGV4LCB2YWx1ZXMubGVuZ3RoXSk7CiAgICB1c2VLZXlEb3duQWN0aW9uKCdBcnJvd1VwJywgKCkgPT4gewogICAgICBpZiAodmFsdWVzLmxlbmd0aCkgewogICAgICAgIGNoYW5nZUZvY3VzZWRWYWx1ZUluZGV4KC0xKTsKICAgICAgICBzZXRNb3VzZUNvbnRyb2woZmFsc2UpOwogICAgICB9CiAgICB9LCBrZXlFdmVudHNMaXN0ZW5lcik7CiAgICB1c2VLZXlEb3duQWN0aW9uKCdBcnJvd0Rvd24nLCAoKSA9PiB7CiAgICAgIGlmICh2YWx1ZXMubGVuZ3RoKSB7CiAgICAgICAgY2hhbmdlRm9jdXNlZFZhbHVlSW5kZXgoMSk7CiAgICAgICAgc2V0TW91c2VDb250cm9sKGZhbHNlKTsKICAgICAgfQogICAgfSwga2V5RXZlbnRzTGlzdGVuZXIpOwogICAgdXNlS2V5RG93bkFjdGlvbignRW50ZXInLCAoKSA9PiB7CiAgICAgIGlmIChmb2N1c2VkSXRlbSkgewogICAgICAgIG9uVmFsdWVTZWxlY3RlZChmb2N1c2VkSXRlbSk7CiAgICAgIH0KICAgIH0sIGtleUV2ZW50c0xpc3RlbmVyKTsKICAgIHkoKCkgPT4gewogICAgICBjb25zdCBpbmRpdmlkdWFsRW50cmllcyA9IGRyb3Bkb3duQ29udGFpbmVyLmN1cnJlbnQuY2hpbGRyZW47CiAgICAgIGlmIChpbmRpdmlkdWFsRW50cmllcy5sZW5ndGggJiYgIW1vdXNlQ29udHJvbCkgewogICAgICAgIGluZGl2aWR1YWxFbnRyaWVzW2ZvY3VzZWRWYWx1ZUluZGV4XS5zY3JvbGxJbnRvVmlldyh7CiAgICAgICAgICBibG9jazogJ25lYXJlc3QnLAogICAgICAgICAgaW5saW5lOiAnbmVhcmVzdCcKICAgICAgICB9KTsKICAgICAgfQogICAgfSwgW2ZvY3VzZWRWYWx1ZUluZGV4LCBtb3VzZUNvbnRyb2xdKTsKICAgIHkoKCkgPT4gewogICAgICBzZXRTbW9vdGhTY3JvbGxpbmcodHJ1ZSk7CiAgICB9LCBbXSk7CiAgICBjb25zdCBvbk1vdXNlTW92ZWRJbktleWJvYXJkTW9kZSA9IChldmVudCwgdmFsdWVJbmRleCkgPT4gewogICAgICBjb25zdCB1c2VyTW92ZWRDdXJzb3IgPSAhbW91c2VTY3JlZW5Qb3MuY3VycmVudCB8fCBtb3VzZVNjcmVlblBvcy5jdXJyZW50LnggIT09IGV2ZW50LnNjcmVlblggJiYgbW91c2VTY3JlZW5Qb3MuY3VycmVudC55ICE9PSBldmVudC5zY3JlZW5ZOwogICAgICBpZiAodXNlck1vdmVkQ3Vyc29yKSB7CiAgICAgICAgbW91c2VTY3JlZW5Qb3MuY3VycmVudCA9IHsKICAgICAgICAgIHg6IGV2ZW50LnNjcmVlblgsCiAgICAgICAgICB5OiBldmVudC5zY3JlZW5ZCiAgICAgICAgfTsKICAgICAgICBzZXRNb3VzZUNvbnRyb2wodHJ1ZSk7CiAgICAgICAgc2V0Rm9jdXNlZFZhbHVlSW5kZXgodmFsdWVJbmRleCk7CiAgICAgIH0KICAgIH07CiAgICByZXR1cm4gZSQyKCJkaXYiLCB7CiAgICAgIHJlZjogZHJvcGRvd25Db250YWluZXIsCiAgICAgIHRhYkluZGV4OiAtMSwKICAgICAgY2xhc3M6ICJmanMtZHJvcGRvd25saXN0IiwKICAgICAgc3R5bGU6IHsKICAgICAgICBtYXhIZWlnaHQ6IGhlaWdodCwKICAgICAgICBzY3JvbGxCZWhhdmlvcjogc21vb3RoU2Nyb2xsaW5nID8gJ3Ntb290aCcgOiAnYXV0bycKICAgICAgfSwKICAgICAgY2hpbGRyZW46IFt2YWx1ZXMubGVuZ3RoID4gMCAmJiB2YWx1ZXMubWFwKCh2LCBpKSA9PiB7CiAgICAgICAgcmV0dXJuIGUkMigiZGl2IiwgewogICAgICAgICAgY2xhc3M6IGNsYXNzTmFtZXMoJ2Zqcy1kcm9wZG93bmxpc3QtaXRlbScsIHsKICAgICAgICAgICAgJ2ZvY3VzZWQnOiBmb2N1c2VkVmFsdWVJbmRleCA9PT0gaQogICAgICAgICAgfSksCiAgICAgICAgICBvbk1vdXNlTW92ZTogbW91c2VDb250cm9sID8gdW5kZWZpbmVkIDogZSA9PiBvbk1vdXNlTW92ZWRJbktleWJvYXJkTW9kZShlLCBpKSwKICAgICAgICAgIG9uTW91c2VFbnRlcjogbW91c2VDb250cm9sID8gKCkgPT4gc2V0Rm9jdXNlZFZhbHVlSW5kZXgoaSkgOiB1bmRlZmluZWQsCiAgICAgICAgICBvbk1vdXNlRG93bjogZSA9PiB7CiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgb25WYWx1ZVNlbGVjdGVkKHYpOwogICAgICAgICAgfSwKICAgICAgICAgIGNoaWxkcmVuOiBnZXRMYWJlbCh2KQogICAgICAgIH0pOwogICAgICB9KSwgIXZhbHVlcy5sZW5ndGggJiYgZSQyKCJkaXYiLCB7CiAgICAgICAgY2xhc3M6ICJmanMtZHJvcGRvd25saXN0LWVtcHR5IiwKICAgICAgICBjaGlsZHJlbjogZW1wdHlMaXN0TWVzc2FnZQogICAgICB9KV0KICAgIH0pOwogIH0KCiAgZnVuY3Rpb24gVGltZXBpY2tlcihwcm9wcykgewogICAgY29uc3QgewogICAgICBpZCwKICAgICAgbGFiZWwsCiAgICAgIGNvbGxhcHNlTGFiZWxPbkVtcHR5LAogICAgICBmb3JtSWQsCiAgICAgIHJlcXVpcmVkLAogICAgICBkaXNhYmxlZCwKICAgICAgdXNlMjRoID0gZmFsc2UsCiAgICAgIHRpbWVJbnRlcnZhbCwKICAgICAgdGltZSwKICAgICAgc2V0VGltZQogICAgfSA9IHByb3BzOwogICAgY29uc3QgdGltZUlucHV0UmVmID0gcygpOwogICAgY29uc3QgW2Ryb3Bkb3duSXNPcGVuLCBzZXREcm9wZG93bklzT3Blbl0gPSBsJDEoZmFsc2UpOwogICAgY29uc3QgdXNlRHJvcGRvd24gPSBkKCgpID0+IHRpbWVJbnRlcnZhbCAhPT0gMSwgW3RpbWVJbnRlcnZhbF0pOwogICAgY29uc3QgW3Jhd1ZhbHVlLCBzZXRSYXdWYWx1ZV0gPSBsJDEoJycpOwoKICAgIC8vIHBvcHVsYXRlcyB2YWx1ZXMgZnJvbSBzb3VyY2UKICAgIHkoKCkgPT4gewogICAgICBpZiAodGltZSA9PT0gbnVsbCkgewogICAgICAgIHNldFJhd1ZhbHVlKCcnKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgY29uc3QgaW50ZXJ2YWxBZGp1c3RlZFRpbWUgPSB0aW1lIC0gdGltZSAlIHRpbWVJbnRlcnZhbDsKICAgICAgc2V0UmF3VmFsdWUoZm9ybWF0VGltZSh1c2UyNGgsIGludGVydmFsQWRqdXN0ZWRUaW1lKSk7CiAgICAgIGlmIChpbnRlcnZhbEFkanVzdGVkVGltZSAhPSB0aW1lKSB7CiAgICAgICAgc2V0VGltZShpbnRlcnZhbEFkanVzdGVkVGltZSk7CiAgICAgIH0KICAgIH0sIFt0aW1lLCBzZXRUaW1lLCB1c2UyNGgsIHRpbWVJbnRlcnZhbF0pOwogICAgY29uc3QgcHJvcGFnYXRlUmF3VG9NaW51dGUgPSBBJDEobmV3UmF3VmFsdWUgPT4gewogICAgICBjb25zdCBsb2NhbFJhd1ZhbHVlID0gbmV3UmF3VmFsdWUgfHwgcmF3VmFsdWU7CgogICAgICAvLyBJZiBubyByYXcgdmFsdWUgZXhpc3RzLCBzZXQgdGhlIG1pbnV0ZSB0byBudWxsCiAgICAgIGlmICghbG9jYWxSYXdWYWx1ZSkgewogICAgICAgIHNldFRpbWUobnVsbCk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGNvbnN0IG1pbnV0ZXMgPSBwYXJzZUlucHV0VGltZShsb2NhbFJhd1ZhbHVlKTsKCiAgICAgIC8vIElmIHJhdyBzdHJpbmcgY291bGRuJ3QgYmUgcGFyc2VkLCBjbGVhbiBldmVyeXRoaW5nIHVwCiAgICAgIGlmICghaXNOdW1iZXIkMihtaW51dGVzKSkgewogICAgICAgIHNldFJhd1ZhbHVlKCcnKTsKICAgICAgICBzZXRUaW1lKG51bGwpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgLy8gRW5mb3JjZSB0aGUgbWludXRlcyB0byBtYXRjaCB0aGUgdGltZUludGVydmFsCiAgICAgIGNvbnN0IGNvcnJlY3RlZE1pbnV0ZXMgPSBtaW51dGVzIC0gbWludXRlcyAlIHRpbWVJbnRlcnZhbDsKCiAgICAgIC8vIEVuZm9yY2UgdGhlIHJhdyB0ZXh0IHRvIGJlIGZvcm1hdHRlZCBwcm9wZXJseQogICAgICBzZXRSYXdWYWx1ZShmb3JtYXRUaW1lKHVzZTI0aCwgY29ycmVjdGVkTWludXRlcykpOwogICAgICBzZXRUaW1lKGNvcnJlY3RlZE1pbnV0ZXMpOwogICAgfSwgW3Jhd1ZhbHVlLCB0aW1lSW50ZXJ2YWwsIHVzZTI0aCwgc2V0VGltZV0pOwogICAgY29uc3QgdGltZU9wdGlvbnMgPSBkKCgpID0+IHsKICAgICAgY29uc3QgbWludXRlc0luRGF5ID0gMjQgKiA2MDsKICAgICAgY29uc3QgaW50ZXJ2YWxDb3VudCA9IE1hdGguZmxvb3IobWludXRlc0luRGF5IC8gdGltZUludGVydmFsKTsKICAgICAgcmV0dXJuIFsuLi5BcnJheShpbnRlcnZhbENvdW50KS5rZXlzKCldLm1hcChpbnRlcnZhbEluZGV4ID0+IGZvcm1hdFRpbWUodXNlMjRoLCBpbnRlcnZhbEluZGV4ICogdGltZUludGVydmFsKSk7CiAgICB9LCBbdGltZUludGVydmFsLCB1c2UyNGhdKTsKICAgIGNvbnN0IGluaXRpYWxGb2N1c0luZGV4ID0gZCgoKSA9PiB7CiAgICAgIC8vIGlmIHRoZXJlIGFyZSBubyBvcHRpb25zLCB0aGVyZSB3aWxsIG5vdCBiZSBhbnkgZm9jdXNpbmcKICAgICAgaWYgKCF0aW1lT3B0aW9ucyB8fCAhdGltZUludGVydmFsKSByZXR1cm4gbnVsbDsKCiAgICAgIC8vIGlmIHRoZXJlIGlzIGEgc2V0IG1pbnV0ZSB2YWx1ZSwgd2UgZm9jdXMgaXQgaW4gdGhlIGRyb3Bkb3duCiAgICAgIGlmICh0aW1lKSByZXR1cm4gdGltZSAvIHRpbWVJbnRlcnZhbDsKICAgICAgY29uc3QgY2FjaGVUaW1lID0gcGFyc2VJbnB1dFRpbWUocmF3VmFsdWUpOwoKICAgICAgLy8gaWYgdGhlcmUgaXMgYSB2YWxpZCB2YWx1ZSBpbiB0aGUgaW5wdXQgY2FjaGUsIHdlIHRyeSBhbmQgZm9jdXMgY2xvc2UgdG8gaXQKICAgICAgaWYgKGNhY2hlVGltZSkgewogICAgICAgIGNvbnN0IGZsb29yZWRDYWNoZVRpbWUgPSBjYWNoZVRpbWUgLSBjYWNoZVRpbWUgJSB0aW1lSW50ZXJ2YWw7CiAgICAgICAgcmV0dXJuIGZsb29yZWRDYWNoZVRpbWUgLyB0aW1lSW50ZXJ2YWw7CiAgICAgIH0KCiAgICAgIC8vIElmIHRoZXJlIGlzIG5vIHNldCB2YWx1ZSwgc2ltcGx5IGZvY3VzIHRoZSBtaWRkbGUgb2YgdGhlIGRyb3Bkb3duICgxMjowMCkKICAgICAgcmV0dXJuIE1hdGguZmxvb3IodGltZU9wdGlvbnMubGVuZ3RoIC8gMik7CiAgICB9LCBbcmF3VmFsdWUsIHRpbWUsIHRpbWVJbnRlcnZhbCwgdGltZU9wdGlvbnNdKTsKICAgIGNvbnN0IG9uSW5wdXRLZXlEb3duID0gZSA9PiB7CiAgICAgIHN3aXRjaCAoZS5rZXkpIHsKICAgICAgICBjYXNlICdBcnJvd1VwJzoKICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ0Fycm93RG93bic6CiAgICAgICAgICB1c2VEcm9wZG93biAmJiBzZXREcm9wZG93bklzT3Blbih0cnVlKTsKICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ0VzY2FwZSc6CiAgICAgICAgICB1c2VEcm9wZG93biAmJiBzZXREcm9wZG93bklzT3BlbihmYWxzZSk7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdFbnRlcic6CiAgICAgICAgICAhZHJvcGRvd25Jc09wZW4gJiYgcHJvcGFnYXRlUmF3VG9NaW51dGUoKTsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9OwogICAgY29uc3Qgb25JbnB1dEJsdXIgPSBlID0+IHsKICAgICAgc2V0RHJvcGRvd25Jc09wZW4oZmFsc2UpOwogICAgICBwcm9wYWdhdGVSYXdUb01pbnV0ZSgpOwogICAgfTsKICAgIGNvbnN0IG9uRHJvcGRvd25WYWx1ZVNlbGVjdGVkID0gdmFsdWUgPT4gewogICAgICBzZXREcm9wZG93bklzT3BlbihmYWxzZSk7CiAgICAgIHByb3BhZ2F0ZVJhd1RvTWludXRlKHZhbHVlKTsKICAgIH07CiAgICBjb25zdCBmdWxsSWQgPSBgJHtwcmVmaXhJZChpZCwgZm9ybUlkKX0tLXRpbWVgOwogICAgcmV0dXJuIGUkMigiZGl2IiwgewogICAgICBjbGFzczogImZqcy1kYXRldGltZS1zdWJzZWN0aW9uIiwKICAgICAgY2hpbGRyZW46IFtlJDIoTGFiZWwsIHsKICAgICAgICBpZDogZnVsbElkLAogICAgICAgIGxhYmVsOiBsYWJlbCwKICAgICAgICBjb2xsYXBzZU9uRW1wdHk6IGNvbGxhcHNlTGFiZWxPbkVtcHR5LAogICAgICAgIHJlcXVpcmVkOiByZXF1aXJlZAogICAgICB9KSwgZSQyKElucHV0QWRvcm5lciwgewogICAgICAgIHByZTogZSQyKENsb2NrSWNvbiwge30pLAogICAgICAgIGlucHV0UmVmOiB0aW1lSW5wdXRSZWYsCiAgICAgICAgZGlzYWJsZWQ6IGRpc2FibGVkLAogICAgICAgIGNoaWxkcmVuOiBlJDIoImRpdiIsIHsKICAgICAgICAgIGNsYXNzOiAiZmpzLXRpbWVwaWNrZXIgZmpzLXRpbWVwaWNrZXItYW5jaG9yIiwKICAgICAgICAgIGNoaWxkcmVuOiBbZSQyKCJpbnB1dCIsIHsKICAgICAgICAgICAgcmVmOiB0aW1lSW5wdXRSZWYsCiAgICAgICAgICAgIHR5cGU6ICJ0ZXh0IiwKICAgICAgICAgICAgaWQ6IGZ1bGxJZCwKICAgICAgICAgICAgY2xhc3M6ICJmanMtaW5wdXQiLAogICAgICAgICAgICB2YWx1ZTogcmF3VmFsdWUsCiAgICAgICAgICAgIGRpc2FibGVkOiBkaXNhYmxlZCwKICAgICAgICAgICAgcGxhY2Vob2xkZXI6IHVzZTI0aCA/ICdoaDptbScgOiAnaGg6bW0gP20nLAogICAgICAgICAgICBhdXRvQ29tcGxldGU6ICJmYWxzZSIsCiAgICAgICAgICAgIG9uRm9jdXM6ICgpID0+IHVzZURyb3Bkb3duICYmIHNldERyb3Bkb3duSXNPcGVuKHRydWUpLAogICAgICAgICAgICBvbkNsaWNrOiAoKSA9PiB1c2VEcm9wZG93biAmJiBzZXREcm9wZG93bklzT3Blbih0cnVlKQoKICAgICAgICAgICAgLy8gQHRzLWlnbm9yZQogICAgICAgICAgICAsCiAgICAgICAgICAgIG9uSW5wdXQ6IGUgPT4gewogICAgICAgICAgICAgIHNldFJhd1ZhbHVlKGUudGFyZ2V0LnZhbHVlKTsKICAgICAgICAgICAgICB1c2VEcm9wZG93biAmJiBzZXREcm9wZG93bklzT3BlbihmYWxzZSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG9uQmx1cjogb25JbnB1dEJsdXIsCiAgICAgICAgICAgIG9uS2V5RG93bjogb25JbnB1dEtleURvd24sCiAgICAgICAgICAgICJkYXRhLWlucHV0IjogdHJ1ZQogICAgICAgICAgfSksIGRyb3Bkb3duSXNPcGVuICYmIGUkMihEcm9wZG93bkxpc3QsIHsKICAgICAgICAgICAgdmFsdWVzOiB0aW1lT3B0aW9ucywKICAgICAgICAgICAgaGVpZ2h0OiAxNTAsCiAgICAgICAgICAgIG9uVmFsdWVTZWxlY3RlZDogb25Ecm9wZG93blZhbHVlU2VsZWN0ZWQsCiAgICAgICAgICAgIGxpc3RlbmVyRWxlbWVudDogdGltZUlucHV0UmVmLmN1cnJlbnQsCiAgICAgICAgICAgIGluaXRpYWxGb2N1c0luZGV4OiBpbml0aWFsRm9jdXNJbmRleAogICAgICAgICAgfSldCiAgICAgICAgfSkKICAgICAgfSldCiAgICB9KTsKICB9CgogIGNvbnN0IHR5cGUkOCA9ICdkYXRldGltZSc7CiAgZnVuY3Rpb24gRGF0ZXRpbWUocHJvcHMpIHsKICAgIGNvbnN0IHsKICAgICAgZGlzYWJsZWQsCiAgICAgIGVycm9ycyA9IFtdLAogICAgICBmaWVsZCwKICAgICAgb25DaGFuZ2UsCiAgICAgIHZhbHVlID0gJycKICAgIH0gPSBwcm9wczsKICAgIGNvbnN0IHsKICAgICAgZGVzY3JpcHRpb24sCiAgICAgIGlkLAogICAgICBkYXRlTGFiZWwsCiAgICAgIHRpbWVMYWJlbCwKICAgICAgdmFsaWRhdGUgPSB7fSwKICAgICAgc3VidHlwZSwKICAgICAgdXNlMjRoLAogICAgICBkaXNhbGxvd1Bhc3NlZERhdGVzLAogICAgICB0aW1lSW50ZXJ2YWwsCiAgICAgIHRpbWVTZXJpYWxpemluZ0Zvcm1hdAogICAgfSA9IGZpZWxkOwogICAgY29uc3QgewogICAgICByZXF1aXJlZAogICAgfSA9IHZhbGlkYXRlOwogICAgY29uc3QgewogICAgICBmb3JtSWQKICAgIH0gPSBGJDEoRm9ybUNvbnRleHQpOwogICAgY29uc3QgZ2V0TnVsbERhdGVUaW1lID0gKCkgPT4gKHsKICAgICAgZGF0ZTogbmV3IERhdGUoRGF0ZS5wYXJzZShudWxsKSksCiAgICAgIHRpbWU6IG51bGwKICAgIH0pOwogICAgY29uc3QgW2RhdGVUaW1lLCBzZXREYXRlVGltZV0gPSBsJDEoZ2V0TnVsbERhdGVUaW1lKCkpOwogICAgY29uc3QgW2RhdGVUaW1lVXBkYXRlUmVxdWVzdCwgc2V0RGF0ZVRpbWVVcGRhdGVSZXF1ZXN0XSA9IGwkMShudWxsKTsKICAgIGNvbnN0IGlzVmFsaWREYXRlID0gZGF0ZSA9PiBkYXRlICYmICFpc05hTihkYXRlLmdldFRpbWUoKSk7CiAgICBjb25zdCBpc1ZhbGlkVGltZSA9IHRpbWUgPT4gIWlzTmFOKHBhcnNlSW50KHRpbWUpKTsKICAgIGNvbnN0IHVzZURhdGVQaWNrZXIgPSBkKCgpID0+IHN1YnR5cGUgPT09IERBVEVUSU1FX1NVQlRZUEVTLkRBVEUgfHwgc3VidHlwZSA9PT0gREFURVRJTUVfU1VCVFlQRVMuREFURVRJTUUsIFtzdWJ0eXBlXSk7CiAgICBjb25zdCB1c2VUaW1lUGlja2VyID0gZCgoKSA9PiBzdWJ0eXBlID09PSBEQVRFVElNRV9TVUJUWVBFUy5USU1FIHx8IHN1YnR5cGUgPT09IERBVEVUSU1FX1NVQlRZUEVTLkRBVEVUSU1FLCBbc3VidHlwZV0pOwogICAgeSgoKSA9PiB7CiAgICAgIGxldCB7CiAgICAgICAgZGF0ZSwKICAgICAgICB0aW1lCiAgICAgIH0gPSBnZXROdWxsRGF0ZVRpbWUoKTsKICAgICAgaWYgKCFkaXNhYmxlZCkgewogICAgICAgIHN3aXRjaCAoc3VidHlwZSkgewogICAgICAgICAgY2FzZSBEQVRFVElNRV9TVUJUWVBFUy5EQVRFOgogICAgICAgICAgICB7CiAgICAgICAgICAgICAgZGF0ZSA9IG5ldyBEYXRlKERhdGUucGFyc2UodmFsdWUpKTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgY2FzZSBEQVRFVElNRV9TVUJUWVBFUy5USU1FOgogICAgICAgICAgICB7CiAgICAgICAgICAgICAgdGltZSA9IHBhcnNlSXNvVGltZSh2YWx1ZSk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgIGNhc2UgREFURVRJTUVfU1VCVFlQRVMuREFURVRJTUU6CiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBkYXRlID0gbmV3IERhdGUoRGF0ZS5wYXJzZSh2YWx1ZSkpOwogICAgICAgICAgICAgIHRpbWUgPSBpc1ZhbGlkRGF0ZShkYXRlKSA/IDYwICogZGF0ZS5nZXRIb3VycygpICsgZGF0ZS5nZXRNaW51dGVzKCkgOiBudWxsOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIHNldERhdGVUaW1lKHsKICAgICAgICBkYXRlLAogICAgICAgIHRpbWUKICAgICAgfSk7CiAgICB9LCBbc3VidHlwZSwgdmFsdWUsIGRpc2FibGVkXSk7CiAgICBjb25zdCBjb21wdXRlQW5kU2V0U3RhdGUgPSBBJDEoKHsKICAgICAgZGF0ZSwKICAgICAgdGltZQogICAgfSkgPT4gewogICAgICBsZXQgbmV3RGF0ZVRpbWVWYWx1ZSA9IG51bGw7CiAgICAgIGlmIChzdWJ0eXBlID09PSBEQVRFVElNRV9TVUJUWVBFUy5EQVRFICYmIGlzVmFsaWREYXRlKGRhdGUpKSB7CiAgICAgICAgbmV3RGF0ZVRpbWVWYWx1ZSA9IHNlcmlhbGl6ZURhdGUoZGF0ZSk7CiAgICAgIH0gZWxzZSBpZiAoc3VidHlwZSA9PT0gREFURVRJTUVfU1VCVFlQRVMuVElNRSAmJiBpc1ZhbGlkVGltZSh0aW1lKSkgewogICAgICAgIG5ld0RhdGVUaW1lVmFsdWUgPSBzZXJpYWxpemVUaW1lKHRpbWUsIG5ldyBEYXRlKCkuZ2V0VGltZXpvbmVPZmZzZXQoKSwgdGltZVNlcmlhbGl6aW5nRm9ybWF0KTsKICAgICAgfSBlbHNlIGlmIChzdWJ0eXBlID09PSBEQVRFVElNRV9TVUJUWVBFUy5EQVRFVElNRSAmJiBpc1ZhbGlkRGF0ZShkYXRlKSAmJiBpc1ZhbGlkVGltZSh0aW1lKSkgewogICAgICAgIG5ld0RhdGVUaW1lVmFsdWUgPSBzZXJpYWxpemVEYXRlVGltZShkYXRlLCB0aW1lLCB0aW1lU2VyaWFsaXppbmdGb3JtYXQpOwogICAgICB9CiAgICAgIG9uQ2hhbmdlKHsKICAgICAgICB2YWx1ZTogbmV3RGF0ZVRpbWVWYWx1ZSwKICAgICAgICBmaWVsZAogICAgICB9KTsKICAgIH0sIFtmaWVsZCwgb25DaGFuZ2UsIHN1YnR5cGUsIHRpbWVTZXJpYWxpemluZ0Zvcm1hdF0pOwogICAgeSgoKSA9PiB7CiAgICAgIGlmIChkYXRlVGltZVVwZGF0ZVJlcXVlc3QpIHsKICAgICAgICBpZiAoZGF0ZVRpbWVVcGRhdGVSZXF1ZXN0LnJlZnJlc2hPbmx5KSB7CiAgICAgICAgICBjb21wdXRlQW5kU2V0U3RhdGUoZGF0ZVRpbWUpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zdCBuZXdEYXRlVGltZSA9IHsKICAgICAgICAgICAgLi4uZGF0ZVRpbWUsCiAgICAgICAgICAgIC4uLmRhdGVUaW1lVXBkYXRlUmVxdWVzdAogICAgICAgICAgfTsKICAgICAgICAgIHNldERhdGVUaW1lKG5ld0RhdGVUaW1lKTsKICAgICAgICAgIGNvbXB1dGVBbmRTZXRTdGF0ZShuZXdEYXRlVGltZSk7CiAgICAgICAgfQogICAgICAgIHNldERhdGVUaW1lVXBkYXRlUmVxdWVzdChudWxsKTsKICAgICAgfQogICAgfSwgW2NvbXB1dGVBbmRTZXRTdGF0ZSwgZGF0ZVRpbWUsIGRhdGVUaW1lVXBkYXRlUmVxdWVzdF0pOwogICAgeSgoKSA9PiB7CiAgICAgIHNldERhdGVUaW1lVXBkYXRlUmVxdWVzdCh7CiAgICAgICAgcmVmcmVzaE9ubHk6IHRydWUKICAgICAgfSk7CiAgICB9LCBbdGltZVNlcmlhbGl6aW5nRm9ybWF0XSk7CiAgICBjb25zdCBhbGxFcnJvcnMgPSBkKCgpID0+IHsKICAgICAgaWYgKHJlcXVpcmVkIHx8IHN1YnR5cGUgIT09IERBVEVUSU1FX1NVQlRZUEVTLkRBVEVUSU1FKSByZXR1cm4gZXJyb3JzOwogICAgICBjb25zdCBpc09ubHlPbmVGaWVsZFNldCA9IGlzVmFsaWREYXRlKGRhdGVUaW1lLmRhdGUpICYmICFpc1ZhbGlkVGltZShkYXRlVGltZS50aW1lKSB8fCAhaXNWYWxpZERhdGUoZGF0ZVRpbWUuZGF0ZSkgJiYgaXNWYWxpZFRpbWUoZGF0ZVRpbWUudGltZSk7CiAgICAgIHJldHVybiBpc09ubHlPbmVGaWVsZFNldCA/IFsnRGF0ZSBhbmQgdGltZSBtdXN0IGJvdGggYmUgZW50ZXJlZC4nLCAuLi5lcnJvcnNdIDogZXJyb3JzOwogICAgfSwgW3JlcXVpcmVkLCBzdWJ0eXBlLCBkYXRlVGltZSwgZXJyb3JzXSk7CiAgICBjb25zdCBzZXREYXRlID0gQSQxKGRhdGUgPT4gewogICAgICBzZXREYXRlVGltZVVwZGF0ZVJlcXVlc3QocHJldiA9PiBwcmV2ID8gewogICAgICAgIC4uLnByZXYsCiAgICAgICAgZGF0ZQogICAgICB9IDogewogICAgICAgIGRhdGUKICAgICAgfSk7CiAgICB9LCBbXSk7CiAgICBjb25zdCBzZXRUaW1lID0gQSQxKHRpbWUgPT4gewogICAgICBzZXREYXRlVGltZVVwZGF0ZVJlcXVlc3QocHJldiA9PiBwcmV2ID8gewogICAgICAgIC4uLnByZXYsCiAgICAgICAgdGltZQogICAgICB9IDogewogICAgICAgIHRpbWUKICAgICAgfSk7CiAgICB9LCBbXSk7CiAgICBjb25zdCBkYXRlUGlja2VyUHJvcHMgPSB7CiAgICAgIGlkLAogICAgICBsYWJlbDogZGF0ZUxhYmVsLAogICAgICBjb2xsYXBzZUxhYmVsT25FbXB0eTogIXRpbWVMYWJlbCwKICAgICAgZm9ybUlkLAogICAgICByZXF1aXJlZCwKICAgICAgZGlzYWJsZWQsCiAgICAgIGRpc2FsbG93UGFzc2VkRGF0ZXMsCiAgICAgIGRhdGU6IGRhdGVUaW1lLmRhdGUsCiAgICAgIHNldERhdGUKICAgIH07CiAgICBjb25zdCB0aW1lUGlja2VyUHJvcHMgPSB7CiAgICAgIGlkLAogICAgICBsYWJlbDogdGltZUxhYmVsLAogICAgICBjb2xsYXBzZUxhYmVsT25FbXB0eTogIWRhdGVMYWJlbCwKICAgICAgZm9ybUlkLAogICAgICByZXF1aXJlZCwKICAgICAgZGlzYWJsZWQsCiAgICAgIHVzZTI0aCwKICAgICAgdGltZUludGVydmFsLAogICAgICB0aW1lOiBkYXRlVGltZS50aW1lLAogICAgICBzZXRUaW1lCiAgICB9OwogICAgcmV0dXJuIGUkMigiZGl2IiwgewogICAgICBjbGFzczogZm9ybUZpZWxkQ2xhc3Nlcyh0eXBlJDgsIHsKICAgICAgICBlcnJvcnM6IGFsbEVycm9ycywKICAgICAgICBkaXNhYmxlZAogICAgICB9KSwKICAgICAgY2hpbGRyZW46IFtlJDIoImRpdiIsIHsKICAgICAgICBjbGFzczogY2xhc3NOYW1lcygnZmpzLXZlcnRpY2FsLWdyb3VwJyksCiAgICAgICAgY2hpbGRyZW46IFt1c2VEYXRlUGlja2VyICYmIGUkMihEYXRlcGlja2VyLCB7CiAgICAgICAgICAuLi5kYXRlUGlja2VyUHJvcHMKICAgICAgICB9KSwgdXNlVGltZVBpY2tlciAmJiB1c2VEYXRlUGlja2VyICYmIGUkMigiZGl2IiwgewogICAgICAgICAgY2xhc3M6ICJmanMtZGF0ZXRpbWUtc2VwYXJhdG9yIgogICAgICAgIH0pLCB1c2VUaW1lUGlja2VyICYmIGUkMihUaW1lcGlja2VyLCB7CiAgICAgICAgICAuLi50aW1lUGlja2VyUHJvcHMKICAgICAgICB9KV0KICAgICAgfSksIGUkMihEZXNjcmlwdGlvbiwgewogICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbgogICAgICB9KSwgZSQyKEVycm9ycywgewogICAgICAgIGVycm9yczogYWxsRXJyb3JzCiAgICAgIH0pXQogICAgfSk7CiAgfQogIERhdGV0aW1lLmNyZWF0ZSA9IGZ1bmN0aW9uIChvcHRpb25zID0ge30pIHsKICAgIGNvbnN0IG5ld09wdGlvbnMgPSB7fTsKICAgIHNldChuZXdPcHRpb25zLCBEQVRFVElNRV9TVUJUWVBFX1BBVEgsIERBVEVUSU1FX1NVQlRZUEVTLkRBVEUpOwogICAgc2V0KG5ld09wdGlvbnMsIERBVEVfTEFCRUxfUEFUSCwgJ0RhdGUnKTsKICAgIHJldHVybiB7CiAgICAgIC4uLm5ld09wdGlvbnMsCiAgICAgIC4uLm9wdGlvbnMKICAgIH07CiAgfTsKICBEYXRldGltZS50eXBlID0gdHlwZSQ4OwogIERhdGV0aW1lLmtleWVkID0gdHJ1ZTsKICBEYXRldGltZS5lbXB0eVZhbHVlID0gbnVsbDsKICBEYXRldGltZS5zYW5pdGl6ZVZhbHVlID0gc2FuaXRpemVEYXRlVGltZVBpY2tlclZhbHVlOwoKICAvKioKICAgKiBUaGlzIGZpbGUgbXVzdCBub3QgYmUgY2hhbmdlZCBvciBleGNoYW5nZWQuCiAgICoKICAgKiBAc2VlIGh0dHA6Ly9icG1uLmlvL2xpY2Vuc2UgZm9yIG1vcmUgaW5mb3JtYXRpb24uCiAgICovCiAgZnVuY3Rpb24gTG9nbygpIHsKICAgIHJldHVybiBlJDIoInN2ZyIsIHsKICAgICAgeG1sbnM6ICJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsCiAgICAgIHZpZXdCb3g6ICIwIDAgMTQuMDIgNS41NyIsCiAgICAgIHdpZHRoOiAiNTMiLAogICAgICBoZWlnaHQ6ICIyMSIsCiAgICAgIHN0eWxlOiAidmVydGljYWwtYWxpZ246bWlkZGxlIiwKICAgICAgY2hpbGRyZW46IFtlJDIoInBhdGgiLCB7CiAgICAgICAgZmlsbDogImN1cnJlbnRDb2xvciIsCiAgICAgICAgZDogIk0xLjg4Ljkydi4xNGMwIC40MS0uMTMuNjgtLjQuOC4zMy4xNC40Ni40NC40Ni44NnYuMzNjMCAuNjEtLjMzLjk1LS45NS45NUgwVjBoLjk1Yy42NSAwIC45My4zLjkzLjkyek0uNjMuNTd2MS4wNmguMjRjLjI0IDAgLjM4LS4xLjM4LS40M1YuOThjMC0uMjgtLjEtLjQtLjMyLS40em0wIDEuNjN2MS4yMmguMzZjLjIgMCAuMzItLjEuMzItLjM5di0uMzVjMC0uMzctLjEyLS40OC0uNC0uNDhILjYzek00LjE4Ljk5di41MmMwIC42NC0uMzEuOTgtLjk0Ljk4aC0uM1Y0aC0uNjJWMGguOTJjLjYzIDAgLjk0LjM1Ljk0Ljk5ek0yLjk0LjU3djEuMzVoLjNjLjIgMCAuMy0uMDkuMy0uMzd2LS42YzAtLjI5LS4xLS4zOC0uMy0uMzhoLS4zem0yLjg5IDIuMjdMNi4yNSAwaC44OHY0aC0uNlYxLjEyTDYuMSAzLjk5aC0uNmwtLjQ2LTIuODJ2Mi44MmgtLjU1VjBoLjg3ek04LjE0IDEuMVY0aC0uNTZWMGguNzlMOSAyLjRWMGguNTZ2NGgtLjY0em0yLjQ5IDIuMjl2LjZoLS42di0uNnpNMTIuMTIgMWMwLS42My4zMy0xIC45NS0xIC42MSAwIC45NS4zNy45NSAxdjIuMDRjMCAuNjQtLjM0IDEtLjk1IDEtLjYyIDAtLjk1LS4zNy0uOTUtMXptLjYyIDIuMDhjMCAuMjguMTMuMzkuMzMuMzlzLjMyLS4xLjMyLS40Vi45OGMwLS4yOS0uMTItLjQtLjMyLS40cy0uMzMuMTEtLjMzLjR6IgogICAgICB9KSwgZSQyKCJwYXRoIiwgewogICAgICAgIGZpbGw6ICJjdXJyZW50Q29sb3IiLAogICAgICAgIGQ6ICJNMCA0LjUzaDE0LjAydjEuMDRIMHpNMTEuMDggMGguNjN2LjYyaC0uNjN6bS42MyA0VjFoLS42M3YyLjk4eiIKICAgICAgfSldCiAgICB9KTsKICB9CiAgZnVuY3Rpb24gTGlnaHRib3gocHJvcHMpIHsKICAgIGNvbnN0IHsKICAgICAgb3BlbgogICAgfSA9IHByb3BzOwogICAgaWYgKCFvcGVuKSB7CiAgICAgIHJldHVybiBudWxsOwogICAgfQogICAgcmV0dXJuIGUkMigiZGl2IiwgewogICAgICBjbGFzczogImZqcy1wb3dlcmVkLWJ5LWxpZ2h0Ym94IiwKICAgICAgc3R5bGU6ICJ6LWluZGV4OiAxMDA7IHBvc2l0aW9uOiBmaXhlZDsgdG9wOiAwOyBsZWZ0OiAwO3JpZ2h0OiAwOyBib3R0b206IDAiLAogICAgICBjaGlsZHJlbjogW2UkMigiZGl2IiwgewogICAgICAgIGNsYXNzOiAiYmFja2Ryb3AiLAogICAgICAgIHN0eWxlOiAid2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJTsgYmFja2dyb3VuZDogcmdiYSg0MCA0MCA0MCAvIDIwJSkiLAogICAgICAgIG9uQ2xpY2s6IHByb3BzLm9uQmFja2Ryb3BDbGljawogICAgICB9KSwgZSQyKCJkaXYiLCB7CiAgICAgICAgY2xhc3M6ICJub3RpY2UiLAogICAgICAgIHN0eWxlOiAicG9zaXRpb246IGFic29sdXRlOyBsZWZ0OiA1MCU7IHRvcDogNDAlOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlKTsgd2lkdGg6IDI2MHB4OyBwYWRkaW5nOiAxMHB4OyBiYWNrZ3JvdW5kOiB3aGl0ZTsgYm94LXNoYWRvdzogMCAgMXB4IDRweCByZ2JhKDAgMCAwIC8gMzAlKTsgZm9udC1mYW1pbHk6IEhlbHZldGljYSwgQXJpYWwsIHNhbnMtc2VyaWY7IGZvbnQtc2l6ZTogMTRweDsgZGlzcGxheTogZmxleDsgbGluZS1oZWlnaHQ6IDEuMyIsCiAgICAgICAgY2hpbGRyZW46IFtlJDIoImEiLCB7CiAgICAgICAgICBocmVmOiAiaHR0cHM6Ly9icG1uLmlvIiwKICAgICAgICAgIHRhcmdldDogIl9ibGFuayIsCiAgICAgICAgICByZWw6ICJub29wZW5lciIsCiAgICAgICAgICBzdHlsZTogIm1hcmdpbjogMTVweCAyMHB4IDE1cHggMTBweDsgYWxpZ24tc2VsZjogY2VudGVyOyBjb2xvcjogIzQwNDA0MCIsCiAgICAgICAgICBjaGlsZHJlbjogZSQyKExvZ28sIHt9KQogICAgICAgIH0pLCBlJDIoInNwYW4iLCB7CiAgICAgICAgICBjaGlsZHJlbjogWyJXZWItYmFzZWQgdG9vbGluZyBmb3IgQlBNTiwgRE1OLCBhbmQgZm9ybXMgcG93ZXJlZCBieSAiLCBlJDIoImEiLCB7CiAgICAgICAgICAgIGhyZWY6ICJodHRwczovL2JwbW4uaW8iLAogICAgICAgICAgICB0YXJnZXQ6ICJfYmxhbmsiLAogICAgICAgICAgICByZWw6ICJub29wZW5lciIsCiAgICAgICAgICAgIGNoaWxkcmVuOiAiYnBtbi5pbyIKICAgICAgICAgIH0pLCAiLiJdCiAgICAgICAgfSldCiAgICAgIH0pXQogICAgfSk7CiAgfQogIGZ1bmN0aW9uIExpbmsocHJvcHMpIHsKICAgIHJldHVybiBlJDIoImRpdiIsIHsKICAgICAgY2xhc3M6ICJmanMtcG93ZXJlZC1ieSBmanMtZm9ybS1maWVsZCIsCiAgICAgIHN0eWxlOiAidGV4dC1hbGlnbjogcmlnaHQiLAogICAgICBjaGlsZHJlbjogZSQyKCJhIiwgewogICAgICAgIGhyZWY6ICJodHRwczovL2JwbW4uaW8iLAogICAgICAgIHRhcmdldDogIl9ibGFuayIsCiAgICAgICAgcmVsOiAibm9vcGVuZXIiLAogICAgICAgIGNsYXNzOiAiZmpzLXBvd2VyZWQtYnktbGluayIsCiAgICAgICAgdGl0bGU6ICJQb3dlcmVkIGJ5IGJwbW4uaW8iLAogICAgICAgIHN0eWxlOiAiY29sb3I6ICM0MDQwNDAiLAogICAgICAgIG9uQ2xpY2s6IHByb3BzLm9uQ2xpY2ssCiAgICAgICAgY2hpbGRyZW46IGUkMihMb2dvLCB7fSkKICAgICAgfSkKICAgIH0pOwogIH0KICBmdW5jdGlvbiBQb3dlcmVkQnkocHJvcHMpIHsKICAgIGNvbnN0IFtvcGVuLCBzZXRPcGVuXSA9IGwkMShmYWxzZSk7CiAgICBmdW5jdGlvbiB0b2dnbGVPcGVuKG9wZW4pIHsKICAgICAgcmV0dXJuIGV2ZW50ID0+IHsKICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgIHNldE9wZW4ob3Blbik7CiAgICAgIH07CiAgICB9CiAgICByZXR1cm4gZSQyKGQkMSwgewogICAgICBjaGlsZHJlbjogW1coZSQyKExpZ2h0Ym94LCB7CiAgICAgICAgb3Blbjogb3BlbiwKICAgICAgICBvbkJhY2tkcm9wQ2xpY2s6IHRvZ2dsZU9wZW4oZmFsc2UpCiAgICAgIH0pLCBkb2N1bWVudC5ib2R5KSwgZSQyKExpbmssIHsKICAgICAgICBvbkNsaWNrOiB0b2dnbGVPcGVuKHRydWUpCiAgICAgIH0pXQogICAgfSk7CiAgfQoKICBjb25zdCBub29wID0gKCkgPT4ge307CiAgZnVuY3Rpb24gRm9ybUNvbXBvbmVudChwcm9wcykgewogICAgY29uc3QgZm9ybSA9IHVzZVNlcnZpY2UoJ2Zvcm0nKTsKICAgIGNvbnN0IHsKICAgICAgc2NoZW1hCiAgICB9ID0gZm9ybS5fZ2V0U3RhdGUoKTsKICAgIGNvbnN0IHsKICAgICAgb25TdWJtaXQgPSBub29wLAogICAgICBvblJlc2V0ID0gbm9vcCwKICAgICAgb25DaGFuZ2UgPSBub29wCiAgICB9ID0gcHJvcHM7CiAgICBjb25zdCBoYW5kbGVTdWJtaXQgPSBldmVudCA9PiB7CiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIG9uU3VibWl0KCk7CiAgICB9OwogICAgY29uc3QgaGFuZGxlUmVzZXQgPSBldmVudCA9PiB7CiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIG9uUmVzZXQoKTsKICAgIH07CiAgICByZXR1cm4gZSQyKCJmb3JtIiwgewogICAgICBjbGFzczogImZqcy1mb3JtIiwKICAgICAgb25TdWJtaXQ6IGhhbmRsZVN1Ym1pdCwKICAgICAgb25SZXNldDogaGFuZGxlUmVzZXQsCiAgICAgIG5vVmFsaWRhdGU6IHRydWUsCiAgICAgIGNoaWxkcmVuOiBbZSQyKEZvcm1GaWVsZCwgewogICAgICAgIGZpZWxkOiBzY2hlbWEsCiAgICAgICAgb25DaGFuZ2U6IG9uQ2hhbmdlCiAgICAgIH0pLCBlJDIoUG93ZXJlZEJ5LCB7fSldCiAgICB9KTsKICB9CgogIC8qKgogICAqCiAgICogQHBhcmFtIHtzdHJpbmcgfCB1bmRlZmluZWR9IGV4cHJlc3Npb24KICAgKiBAcGFyYW0ge2ltcG9ydCgnLi4vLi4vdHlwZXMnKS5EYXRhfSBkYXRhCiAgICovCiAgZnVuY3Rpb24gdXNlRXZhbHVhdGlvbihleHByZXNzaW9uLCBkYXRhKSB7CiAgICBjb25zdCBpbml0aWFsRGF0YSA9IHVzZVNlcnZpY2UoJ2Zvcm0nKS5fZ2V0U3RhdGUoKS5pbml0aWFsRGF0YTsKICAgIGNvbnN0IGNvbmRpdGlvbkNoZWNrZXIgPSB1c2VTZXJ2aWNlKCdjb25kaXRpb25DaGVja2VyJywgZmFsc2UpOwogICAgaWYgKCFjb25kaXRpb25DaGVja2VyKSB7CiAgICAgIHJldHVybiBudWxsOwogICAgfQoKICAgIC8vIG1ha2Ugc3VyZSB3ZSBkbyBub3QgdXNlIGRhdGEgZnJvbSBoaWRkZW4gZmllbGRzCiAgICBjb25zdCBmaWx0ZXJlZERhdGEgPSB7CiAgICAgIC4uLmluaXRpYWxEYXRhLAogICAgICAuLi5jb25kaXRpb25DaGVja2VyLmFwcGx5Q29uZGl0aW9ucyhkYXRhLCBkYXRhKQogICAgfTsKICAgIHJldHVybiBjb25kaXRpb25DaGVja2VyLmV2YWx1YXRlKGV4cHJlc3Npb24sIGZpbHRlcmVkRGF0YSk7CiAgfQoKICAvKioKICAgKgogICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZQogICAqLwogIGZ1bmN0aW9uIHVzZUV4cHJlc3Npb25WYWx1ZSh2YWx1ZSkgewogICAgY29uc3QgZm9ybURhdGEgPSB1c2VTZXJ2aWNlKCdmb3JtJykuX2dldFN0YXRlKCkuZGF0YTsKICAgIGlmICghaXNFeHByZXNzaW9uKHZhbHVlKSkgewogICAgICByZXR1cm4gdmFsdWU7CiAgICB9CgogICAgLy8gV2UgY2FuIGlnbm9yZSB0aGlzIGhvb2sgcnVsZSBhcyB3ZSBkbyBub3QgdXNlCiAgICAvLyBzdGF0ZSBvciBlZmZlY3RzIGluIG91ciBjdXN0b20gaG9va3MKICAgIC8qIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9ydWxlcy1vZi1ob29rcyAqLwogICAgcmV0dXJuIHVzZUV2YWx1YXRpb24odmFsdWUsIGZvcm1EYXRhKTsKICB9CgogIC8vIGhlbHBlciAvLy8vLy8vLy8vLy8vLy8KCiAgZnVuY3Rpb24gaXNFeHByZXNzaW9uKHZhbHVlKSB7CiAgICByZXR1cm4gaXNTdHJpbmckMih2YWx1ZSkgJiYgdmFsdWUuc3RhcnRzV2l0aCgnPScpOwogIH0KCiAgZnVuY3Rpb24gX2V4dGVuZHMkZigpIHsgX2V4dGVuZHMkZiA9IE9iamVjdC5hc3NpZ24gPyBPYmplY3QuYXNzaWduLmJpbmQoKSA6IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9OyByZXR1cm4gX2V4dGVuZHMkZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9CiAgdmFyIEltYWdlUGxhY2Vob2xkZXIgPSAoKHsKICAgIHN0eWxlcyA9IHt9LAogICAgLi4ucHJvcHMKICB9KSA9PiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgic3ZnIiwgX2V4dGVuZHMkZih7CiAgICB3aWR0aDogIjY0IiwKICAgIGhlaWdodDogIjY0IiwKICAgIHZpZXdCb3g6ICIwIDAgMTI4MCAxMjgwIiwKICAgIHhtbG5zOiAiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLAogICAgZmlsbFJ1bGU6ICJldmVub2RkIiwKICAgIGNsaXBSdWxlOiAiZXZlbm9kZCIsCiAgICBzdHJva2VMaW5lam9pbjogInJvdW5kIiwKICAgIHN0cm9rZU1pdGVybGltaXQ6ICIyIgogIH0sIHByb3BzKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInBhdGgiLCB7CiAgICBmaWxsOiAiI2U1ZTllZCIsCiAgICBkOiAiTTAgMGgxMjgwdjEyODBIMHoiCiAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJwYXRoIiwgewogICAgZDogIk05MTAgNDEwSDM3MHY0NzBoNTQwVjQxMHptLTU3LjMzMyA1Ny4zMzN2MzU1LjMzNEg0MjcuMzMzVjQ2Ny4zMzNoNDI1LjMzNHoiLAogICAgZmlsbDogIiNjYWQzZGIiCiAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJwYXRoIiwgewogICAgZDogIk04MTAgNzcwSDQ4MHYtNjBsMTAwLTE3MCAxMzAgMTcwIDEwMC02NXYxMjV6IiwKICAgIGZpbGw6ICIjY2FkM2RiIgogIH0pLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiY2lyY2xlIiwgewogICAgY3g6ICI3NTAiLAogICAgY3k6ICI1NTAiLAogICAgcjogIjUwIiwKICAgIGZpbGw6ICIjY2FkM2RiIiwKICAgIHRyYW5zZm9ybTogInRyYW5zbGF0ZSgxMCAxMCkiCiAgfSkpKTsKCiAgY29uc3QgdHlwZSQ3ID0gJ2ltYWdlJzsKICBmdW5jdGlvbiBJbWFnZShwcm9wcykgewogICAgY29uc3QgewogICAgICBmaWVsZAogICAgfSA9IHByb3BzOwogICAgY29uc3QgewogICAgICBhbHQsCiAgICAgIGlkLAogICAgICBzb3VyY2UKICAgIH0gPSBmaWVsZDsKICAgIGNvbnN0IHNhZmVTb3VyY2UgPSBzYWZlSW1hZ2VTb3VyY2UodXNlRXhwcmVzc2lvblZhbHVlKHNvdXJjZSkpOwogICAgY29uc3QgYWx0VGV4dCA9IHVzZUV4cHJlc3Npb25WYWx1ZShhbHQpOwogICAgY29uc3QgewogICAgICBmb3JtSWQKICAgIH0gPSBGJDEoRm9ybUNvbnRleHQpOwogICAgcmV0dXJuIGUkMigiZGl2IiwgewogICAgICBjbGFzczogZm9ybUZpZWxkQ2xhc3Nlcyh0eXBlJDcpLAogICAgICBjaGlsZHJlbjogZSQyKCJkaXYiLCB7CiAgICAgICAgY2xhc3M6ICJmanMtaW1hZ2UtY29udGFpbmVyIiwKICAgICAgICBjaGlsZHJlbjogW3NhZmVTb3VyY2UgJiYgZSQyKCJpbWciLCB7CiAgICAgICAgICBhbHQ6IGFsdFRleHQsCiAgICAgICAgICBzcmM6IHNhZmVTb3VyY2UsCiAgICAgICAgICBjbGFzczogImZqcy1pbWFnZSIsCiAgICAgICAgICBpZDogcHJlZml4SWQoaWQsIGZvcm1JZCkKICAgICAgICB9KSwgIXNhZmVTb3VyY2UgJiYgZSQyKCJkaXYiLCB7CiAgICAgICAgICBjbGFzczogImZqcy1pbWFnZS1wbGFjZWhvbGRlciIsCiAgICAgICAgICBjaGlsZHJlbjogZSQyKEltYWdlUGxhY2Vob2xkZXIsIHsKICAgICAgICAgICAgYWx0OiAiVGhpcyBpcyBhbiBpbWFnZSBwbGFjZWhvbGRlciIKICAgICAgICAgIH0pCiAgICAgICAgfSldCiAgICAgIH0pCiAgICB9KTsKICB9CiAgSW1hZ2UuY3JlYXRlID0gZnVuY3Rpb24gKG9wdGlvbnMgPSB7fSkgewogICAgcmV0dXJuIHsKICAgICAgLi4ub3B0aW9ucwogICAgfTsKICB9OwogIEltYWdlLnR5cGUgPSB0eXBlJDc7CiAgSW1hZ2Uua2V5ZWQgPSBmYWxzZTsKCiAgY29uc3QgdHlwZSQ2ID0gJ251bWJlcic7CiAgZnVuY3Rpb24gTnVtYmVyZmllbGQocHJvcHMpIHsKICAgIGNvbnN0IHsKICAgICAgZGlzYWJsZWQsCiAgICAgIGVycm9ycyA9IFtdLAogICAgICBmaWVsZCwKICAgICAgdmFsdWUsCiAgICAgIG9uQ2hhbmdlCiAgICB9ID0gcHJvcHM7CiAgICBjb25zdCB7CiAgICAgIGRlc2NyaXB0aW9uLAogICAgICBpZCwKICAgICAgbGFiZWwsCiAgICAgIGFwcGVhcmFuY2UgPSB7fSwKICAgICAgdmFsaWRhdGUgPSB7fSwKICAgICAgZGVjaW1hbERpZ2l0cywKICAgICAgc2VyaWFsaXplVG9TdHJpbmcgPSBmYWxzZSwKICAgICAgaW5jcmVtZW50OiBpbmNyZW1lbnRWYWx1ZQogICAgfSA9IGZpZWxkOwogICAgY29uc3QgewogICAgICBwcmVmaXhBZG9ybmVyLAogICAgICBzdWZmaXhBZG9ybmVyCiAgICB9ID0gYXBwZWFyYW5jZTsKICAgIGNvbnN0IHsKICAgICAgcmVxdWlyZWQKICAgIH0gPSB2YWxpZGF0ZTsKICAgIGNvbnN0IGlucHV0UmVmID0gcygpOwogICAgY29uc3QgW3N0cmluZ1ZhbHVlQ2FjaGUsIHNldFN0cmluZ1ZhbHVlQ2FjaGVdID0gbCQxKCcnKTsKCiAgICAvLyBjaGVja3Mgd2hldGhlciB0aGUgdmFsdWUgY3VycmVudGx5IGluIHRoZSBmb3JtIGRhdGEgaXMgcHJhY3RpY2FsbHkgZGlmZmVyZW50IGZyb20gdGhlIG9uZSBpbiB0aGUgaW5wdXQgZmllbGQgY2FjaGUKICAgIC8vIHRoaXMgYWxsb3dzIHVzIHRvIGd1YXJhbnRlZSB0aGUgZmllbGQgYWx3YXlzIGRpc3BsYXlzIHZhbGlkIGZvcm0gZGF0YSwgYnV0IHdpdGhvdXQgYXV0by1zaW1wbGlmeWluZyB2YWx1ZXMgbGlrZSAxLjAwMCB0byAxCiAgICBjb25zdCBjYWNoZVZhbHVlTWF0Y2hlc1N0YXRlID0gZCgoKSA9PiBOdW1iZXJmaWVsZC5zYW5pdGl6ZVZhbHVlKHsKICAgICAgdmFsdWUsCiAgICAgIGZvcm1GaWVsZDogZmllbGQKICAgIH0pID09PSBOdW1iZXJmaWVsZC5zYW5pdGl6ZVZhbHVlKHsKICAgICAgdmFsdWU6IHN0cmluZ1ZhbHVlQ2FjaGUsCiAgICAgIGZvcm1GaWVsZDogZmllbGQKICAgIH0pLCBbc3RyaW5nVmFsdWVDYWNoZSwgdmFsdWUsIGZpZWxkXSk7CiAgICBjb25zdCBkaXNwbGF5VmFsdWUgPSBkKCgpID0+IHsKICAgICAgaWYgKHZhbHVlID09PSAnTmFOJykgcmV0dXJuICdOYU4nOwogICAgICByZXR1cm4gY2FjaGVWYWx1ZU1hdGNoZXNTdGF0ZSA/IHN0cmluZ1ZhbHVlQ2FjaGUgOiB2YWx1ZSB8fCB2YWx1ZSA9PT0gMCA/IEJpZyh2YWx1ZSkudG9GaXhlZCgpIDogJyc7CiAgICB9LCBbc3RyaW5nVmFsdWVDYWNoZSwgdmFsdWUsIGNhY2hlVmFsdWVNYXRjaGVzU3RhdGVdKTsKICAgIGNvbnN0IGFycm93SW5jcmVtZW50VmFsdWUgPSBkKCgpID0+IHsKICAgICAgaWYgKGluY3JlbWVudFZhbHVlKSByZXR1cm4gQmlnKGluY3JlbWVudFZhbHVlKTsKICAgICAgaWYgKGRlY2ltYWxEaWdpdHMpIHJldHVybiBCaWcoYDFlLSR7ZGVjaW1hbERpZ2l0c31gKTsKICAgICAgcmV0dXJuIEJpZygnMScpOwogICAgfSwgW2RlY2ltYWxEaWdpdHMsIGluY3JlbWVudFZhbHVlXSk7CiAgICBjb25zdCBzZXRWYWx1ZSA9IEEkMShzdHJpbmdWYWx1ZSA9PiB7CiAgICAgIGlmIChpc051bGxFcXVpdmFsZW50VmFsdWUoc3RyaW5nVmFsdWUpKSB7CiAgICAgICAgc2V0U3RyaW5nVmFsdWVDYWNoZSgnJyk7CiAgICAgICAgb25DaGFuZ2UoewogICAgICAgICAgZmllbGQsCiAgICAgICAgICB2YWx1ZTogbnVsbAogICAgICAgIH0pOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgLy8gdHJlYXQgY29tbWFzIGFzIGRvdHMKICAgICAgc3RyaW5nVmFsdWUgPSBzdHJpbmdWYWx1ZS5yZXBsYWNlQWxsKCcsJywgJy4nKTsKICAgICAgaWYgKGlzTmFOKE51bWJlcihzdHJpbmdWYWx1ZSkpKSB7CiAgICAgICAgc2V0U3RyaW5nVmFsdWVDYWNoZSgnTmFOJyk7CiAgICAgICAgb25DaGFuZ2UoewogICAgICAgICAgZmllbGQsCiAgICAgICAgICB2YWx1ZTogJ05hTicKICAgICAgICB9KTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgc2V0U3RyaW5nVmFsdWVDYWNoZShzdHJpbmdWYWx1ZSk7CiAgICAgIG9uQ2hhbmdlKHsKICAgICAgICBmaWVsZCwKICAgICAgICB2YWx1ZTogc2VyaWFsaXplVG9TdHJpbmcgPyBzdHJpbmdWYWx1ZSA6IE51bWJlcihzdHJpbmdWYWx1ZSkKICAgICAgfSk7CiAgICB9LCBbZmllbGQsIG9uQ2hhbmdlLCBzZXJpYWxpemVUb1N0cmluZ10pOwogICAgY29uc3QgaW5jcmVtZW50ID0gKCkgPT4gewogICAgICBjb25zdCBiYXNlID0gaXNWYWxpZE51bWJlcih2YWx1ZSkgPyBCaWcodmFsdWUpIDogQmlnKDApOwogICAgICBjb25zdCBzdGVwRmxvb3JlZFZhbHVlID0gYmFzZS5taW51cyhiYXNlLm1vZChhcnJvd0luY3JlbWVudFZhbHVlKSk7CgogICAgICAvLyBub3RlOiB0b0ZpeGVkKCkgYmVoYXZlcyBkaWZmZXJlbnRseSBpbiBiaWcuanMKICAgICAgc2V0VmFsdWUoc3RlcEZsb29yZWRWYWx1ZS5wbHVzKGFycm93SW5jcmVtZW50VmFsdWUpLnRvRml4ZWQoKSk7CiAgICB9OwogICAgY29uc3QgZGVjcmVtZW50ID0gKCkgPT4gewogICAgICBjb25zdCBiYXNlID0gaXNWYWxpZE51bWJlcih2YWx1ZSkgPyBCaWcodmFsdWUpIDogQmlnKDApOwogICAgICBjb25zdCBvZmZzZXQgPSBiYXNlLm1vZChhcnJvd0luY3JlbWVudFZhbHVlKTsKICAgICAgaWYgKG9mZnNldC5jbXAoMCkgPT09IDApIHsKICAgICAgICAvLyBpZiB3ZSdyZSBhbHJlYWR5IG9uIGEgdmFsaWQgc3RlcCwgZGVjcmVtZW50CiAgICAgICAgc2V0VmFsdWUoYmFzZS5taW51cyhhcnJvd0luY3JlbWVudFZhbHVlKS50b0ZpeGVkKCkpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIG90aGVyd2lzZSBmbG9vciB0byB0aGUgc3RlcAogICAgICAgIGNvbnN0IHN0ZXBGbG9vcmVkVmFsdWUgPSBiYXNlLm1pbnVzKGJhc2UubW9kKGFycm93SW5jcmVtZW50VmFsdWUpKTsKICAgICAgICBzZXRWYWx1ZShzdGVwRmxvb3JlZFZhbHVlLnRvRml4ZWQoKSk7CiAgICAgIH0KICAgIH07CiAgICBjb25zdCBvbktleURvd24gPSBlID0+IHsKICAgICAgLy8gZGVsZXRlIHRoZSBOYU4gc3RhdGUgYWxsIGF0IG9uY2Ugb24gYmFja3NwYWNlIG9yIGRlbGV0ZQogICAgICBpZiAodmFsdWUgPT09ICdOYU4nICYmIChlLmNvZGUgPT09ICdCYWNrc3BhY2UnIHx8IGUuY29kZSA9PT0gJ0RlbGV0ZScpKSB7CiAgICAgICAgc2V0VmFsdWUobnVsbCk7CiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAoZS5jb2RlID09PSAnQXJyb3dVcCcpIHsKICAgICAgICBpbmNyZW1lbnQoKTsKICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmIChlLmNvZGUgPT09ICdBcnJvd0Rvd24nKSB7CiAgICAgICAgZGVjcmVtZW50KCk7CiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgfTsKCiAgICAvLyBpbnRlcmNlcHQga2V5IHByZXNzZXMgd2hpY2ggd291bGQgbGVhZCB0byBhbiBpbnZhbGlkIG51bWJlcgogICAgY29uc3Qgb25LZXlQcmVzcyA9IGUgPT4gewogICAgICBjb25zdCBjYXJldEluZGV4ID0gaW5wdXRSZWYuY3VycmVudC5zZWxlY3Rpb25TdGFydDsKICAgICAgY29uc3Qgc2VsZWN0aW9uV2lkdGggPSBpbnB1dFJlZi5jdXJyZW50LnNlbGVjdGlvblN0YXJ0IC0gaW5wdXRSZWYuY3VycmVudC5zZWxlY3Rpb25FbmQ7CiAgICAgIGNvbnN0IHByZXZpb3VzVmFsdWUgPSBpbnB1dFJlZi5jdXJyZW50LnZhbHVlOwogICAgICBpZiAoIXdpbGxLZXlQcm9kdWNlVmFsaWROdW1iZXIoZS5rZXksIHByZXZpb3VzVmFsdWUsIGNhcmV0SW5kZXgsIHNlbGVjdGlvbldpZHRoLCBkZWNpbWFsRGlnaXRzKSkgewogICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgfQogICAgfTsKICAgIGNvbnN0IHsKICAgICAgZm9ybUlkCiAgICB9ID0gRiQxKEZvcm1Db250ZXh0KTsKICAgIHJldHVybiBlJDIoImRpdiIsIHsKICAgICAgY2xhc3M6IGZvcm1GaWVsZENsYXNzZXModHlwZSQ2LCB7CiAgICAgICAgZXJyb3JzLAogICAgICAgIGRpc2FibGVkCiAgICAgIH0pLAogICAgICBjaGlsZHJlbjogW2UkMihMYWJlbCwgewogICAgICAgIGlkOiBwcmVmaXhJZChpZCwgZm9ybUlkKSwKICAgICAgICBsYWJlbDogbGFiZWwsCiAgICAgICAgcmVxdWlyZWQ6IHJlcXVpcmVkCiAgICAgIH0pLCBlJDIoSW5wdXRBZG9ybmVyLCB7CiAgICAgICAgZGlzYWJsZWQ6IGRpc2FibGVkLAogICAgICAgIHByZTogcHJlZml4QWRvcm5lciwKICAgICAgICBwb3N0OiBzdWZmaXhBZG9ybmVyLAogICAgICAgIGNoaWxkcmVuOiBlJDIoImRpdiIsIHsKICAgICAgICAgIGNsYXNzOiBjbGFzc05hbWVzKCdmanMtdmVydGljYWwtZ3JvdXAnLCB7CiAgICAgICAgICAgICdkaXNhYmxlZCc6IGRpc2FibGVkCiAgICAgICAgICB9LCB7CiAgICAgICAgICAgICdoYXNFcnJvcnMnOiBlcnJvcnMubGVuZ3RoCiAgICAgICAgICB9KSwKICAgICAgICAgIGNoaWxkcmVuOiBbZSQyKCJpbnB1dCIsIHsKICAgICAgICAgICAgcmVmOiBpbnB1dFJlZiwKICAgICAgICAgICAgY2xhc3M6ICJmanMtaW5wdXQiLAogICAgICAgICAgICBkaXNhYmxlZDogZGlzYWJsZWQsCiAgICAgICAgICAgIGlkOiBwcmVmaXhJZChpZCwgZm9ybUlkKSwKICAgICAgICAgICAgb25LZXlEb3duOiBvbktleURvd24sCiAgICAgICAgICAgIG9uS2V5UHJlc3M6IG9uS2V5UHJlc3MKCiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmUKICAgICAgICAgICAgLAogICAgICAgICAgICBvbklucHV0OiBlID0+IHNldFZhbHVlKGUudGFyZ2V0LnZhbHVlKSwKICAgICAgICAgICAgdHlwZTogInRleHQiLAogICAgICAgICAgICBhdXRvQ29tcGxldGU6ICJvZmYiLAogICAgICAgICAgICBzdGVwOiBhcnJvd0luY3JlbWVudFZhbHVlLAogICAgICAgICAgICB2YWx1ZTogZGlzcGxheVZhbHVlCiAgICAgICAgICB9KSwgZSQyKCJkaXYiLCB7CiAgICAgICAgICAgIGNsYXNzOiBjbGFzc05hbWVzKCdmanMtbnVtYmVyLWFycm93LWNvbnRhaW5lcicsIHsKICAgICAgICAgICAgICAnZGlzYWJsZWQnOiBkaXNhYmxlZAogICAgICAgICAgICB9KSwKICAgICAgICAgICAgY2hpbGRyZW46IFtlJDIoImJ1dHRvbiIsIHsKICAgICAgICAgICAgICBjbGFzczogImZqcy1udW1iZXItYXJyb3ctdXAiLAogICAgICAgICAgICAgIG9uQ2xpY2s6ICgpID0+IGluY3JlbWVudCgpLAogICAgICAgICAgICAgIHRhYkluZGV4OiAtMSwKICAgICAgICAgICAgICBjaGlsZHJlbjogIlx1MDJDNCIKICAgICAgICAgICAgfSksIGUkMigiZGl2IiwgewogICAgICAgICAgICAgIGNsYXNzOiAiZmpzLW51bWJlci1hcnJvdy1zZXBhcmF0b3IiCiAgICAgICAgICAgIH0pLCBlJDIoImJ1dHRvbiIsIHsKICAgICAgICAgICAgICBjbGFzczogImZqcy1udW1iZXItYXJyb3ctZG93biIsCiAgICAgICAgICAgICAgb25DbGljazogKCkgPT4gZGVjcmVtZW50KCksCiAgICAgICAgICAgICAgdGFiSW5kZXg6IC0xLAogICAgICAgICAgICAgIGNoaWxkcmVuOiAiXHUwMkM1IgogICAgICAgICAgICB9KV0KICAgICAgICAgIH0pXQogICAgICAgIH0pCiAgICAgIH0pLCBlJDIoRGVzY3JpcHRpb24sIHsKICAgICAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24KICAgICAgfSksIGUkMihFcnJvcnMsIHsKICAgICAgICBlcnJvcnM6IGVycm9ycwogICAgICB9KV0KICAgIH0pOwogIH0KICBOdW1iZXJmaWVsZC5jcmVhdGUgPSAob3B0aW9ucyA9IHt9KSA9PiBvcHRpb25zOwogIE51bWJlcmZpZWxkLnNhbml0aXplVmFsdWUgPSAoewogICAgdmFsdWUsCiAgICBmb3JtRmllbGQKICB9KSA9PiB7CiAgICAvLyBudWxsIHN0YXRlIGlzIGFsbG93ZWQKICAgIGlmIChpc051bGxFcXVpdmFsZW50VmFsdWUodmFsdWUpKSByZXR1cm4gbnVsbDsKCiAgICAvLyBpZiBkYXRhIGNhbm5vdCBiZSBwYXJzZWQgYXMgYSB2YWxpZCBudW1iZXIsIGdvIGludG8gaW52YWxpZCBOYU4gc3RhdGUKICAgIGlmICghaXNWYWxpZE51bWJlcih2YWx1ZSkpIHJldHVybiAnTmFOJzsKCiAgICAvLyBvdGhlcndpc2UgcGFyc2UgdG8gZm9ybWF0dGluZyB0eXBlCiAgICByZXR1cm4gZm9ybUZpZWxkLnNlcmlhbGl6ZVRvU3RyaW5nID8gdmFsdWUudG9TdHJpbmcoKSA6IE51bWJlcih2YWx1ZSk7CiAgfTsKICBOdW1iZXJmaWVsZC50eXBlID0gdHlwZSQ2OwogIE51bWJlcmZpZWxkLmtleWVkID0gdHJ1ZTsKICBOdW1iZXJmaWVsZC5sYWJlbCA9ICdOdW1iZXInOwogIE51bWJlcmZpZWxkLmVtcHR5VmFsdWUgPSBudWxsOwoKICBjb25zdCB0eXBlJDUgPSAncmFkaW8nOwogIGZ1bmN0aW9uIFJhZGlvKHByb3BzKSB7CiAgICBjb25zdCB7CiAgICAgIGRpc2FibGVkLAogICAgICBlcnJvcnMgPSBbXSwKICAgICAgZmllbGQsCiAgICAgIHZhbHVlCiAgICB9ID0gcHJvcHM7CiAgICBjb25zdCB7CiAgICAgIGRlc2NyaXB0aW9uLAogICAgICBpZCwKICAgICAgbGFiZWwsCiAgICAgIHZhbGlkYXRlID0ge30KICAgIH0gPSBmaWVsZDsKICAgIGNvbnN0IHsKICAgICAgcmVxdWlyZWQKICAgIH0gPSB2YWxpZGF0ZTsKICAgIGNvbnN0IG9uQ2hhbmdlID0gdiA9PiB7CiAgICAgIHByb3BzLm9uQ2hhbmdlKHsKICAgICAgICBmaWVsZCwKICAgICAgICB2YWx1ZTogdgogICAgICB9KTsKICAgIH07CiAgICBjb25zdCB7CiAgICAgIHN0YXRlOiBsb2FkU3RhdGUsCiAgICAgIHZhbHVlczogb3B0aW9ucwogICAgfSA9IHVzZVZhbHVlc0FzeW5jKGZpZWxkKTsKICAgIGNvbnN0IHsKICAgICAgZm9ybUlkCiAgICB9ID0gRiQxKEZvcm1Db250ZXh0KTsKICAgIHJldHVybiBlJDIoImRpdiIsIHsKICAgICAgY2xhc3M6IGZvcm1GaWVsZENsYXNzZXModHlwZSQ1LCB7CiAgICAgICAgZXJyb3JzLAogICAgICAgIGRpc2FibGVkCiAgICAgIH0pLAogICAgICBjaGlsZHJlbjogW2UkMihMYWJlbCwgewogICAgICAgIGxhYmVsOiBsYWJlbCwKICAgICAgICByZXF1aXJlZDogcmVxdWlyZWQKICAgICAgfSksIGxvYWRTdGF0ZSA9PSBMT0FEX1NUQVRFUy5MT0FERUQgJiYgb3B0aW9ucy5tYXAoKG9wdGlvbiwgaW5kZXgpID0+IHsKICAgICAgICByZXR1cm4gZSQyKExhYmVsLCB7CiAgICAgICAgICBpZDogcHJlZml4SWQoYCR7aWR9LSR7aW5kZXh9YCwgZm9ybUlkKSwKICAgICAgICAgIGxhYmVsOiBvcHRpb24ubGFiZWwsCiAgICAgICAgICBjbGFzczogY2xhc3NOYW1lcyh7CiAgICAgICAgICAgICdmanMtY2hlY2tlZCc6IG9wdGlvbi52YWx1ZSA9PT0gdmFsdWUKICAgICAgICAgIH0pLAogICAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICAgICAgY2hpbGRyZW46IGUkMigiaW5wdXQiLCB7CiAgICAgICAgICAgIGNoZWNrZWQ6IG9wdGlvbi52YWx1ZSA9PT0gdmFsdWUsCiAgICAgICAgICAgIGNsYXNzOiAiZmpzLWlucHV0IiwKICAgICAgICAgICAgZGlzYWJsZWQ6IGRpc2FibGVkLAogICAgICAgICAgICBpZDogcHJlZml4SWQoYCR7aWR9LSR7aW5kZXh9YCwgZm9ybUlkKSwKICAgICAgICAgICAgdHlwZTogInJhZGlvIiwKICAgICAgICAgICAgb25DbGljazogKCkgPT4gb25DaGFuZ2Uob3B0aW9uLnZhbHVlKQogICAgICAgICAgfSkKICAgICAgICB9LCBgJHtpZH0tJHtpbmRleH1gKTsKICAgICAgfSksIGUkMihEZXNjcmlwdGlvbiwgewogICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbgogICAgICB9KSwgZSQyKEVycm9ycywgewogICAgICAgIGVycm9yczogZXJyb3JzCiAgICAgIH0pXQogICAgfSk7CiAgfQogIFJhZGlvLmNyZWF0ZSA9IGZ1bmN0aW9uIChvcHRpb25zID0ge30pIHsKICAgIGlmIChvcHRpb25zLnZhbHVlc0tleSkgcmV0dXJuIG9wdGlvbnM7CiAgICByZXR1cm4gewogICAgICB2YWx1ZXM6IFt7CiAgICAgICAgbGFiZWw6ICdWYWx1ZScsCiAgICAgICAgdmFsdWU6ICd2YWx1ZScKICAgICAgfV0sCiAgICAgIC4uLm9wdGlvbnMKICAgIH07CiAgfTsKICBSYWRpby50eXBlID0gdHlwZSQ1OwogIFJhZGlvLmxhYmVsID0gJ1JhZGlvJzsKICBSYWRpby5rZXllZCA9IHRydWU7CiAgUmFkaW8uZW1wdHlWYWx1ZSA9IG51bGw7CiAgUmFkaW8uc2FuaXRpemVWYWx1ZSA9IHNhbml0aXplU2luZ2xlU2VsZWN0VmFsdWU7CgogIGNvbnN0IHR5cGUkNCA9ICdzZWxlY3QnOwogIGZ1bmN0aW9uIFNlbGVjdChwcm9wcykgewogICAgY29uc3QgewogICAgICBkaXNhYmxlZCwKICAgICAgZXJyb3JzID0gW10sCiAgICAgIGZpZWxkLAogICAgICB2YWx1ZQogICAgfSA9IHByb3BzOwogICAgY29uc3QgewogICAgICBkZXNjcmlwdGlvbiwKICAgICAgaWQsCiAgICAgIGxhYmVsLAogICAgICB2YWxpZGF0ZSA9IHt9CiAgICB9ID0gZmllbGQ7CiAgICBjb25zdCB7CiAgICAgIHJlcXVpcmVkCiAgICB9ID0gdmFsaWRhdGU7CiAgICBjb25zdCBvbkNoYW5nZSA9ICh7CiAgICAgIHRhcmdldAogICAgfSkgPT4gewogICAgICBwcm9wcy5vbkNoYW5nZSh7CiAgICAgICAgZmllbGQsCiAgICAgICAgdmFsdWU6IHRhcmdldC52YWx1ZSA9PT0gJycgPyBudWxsIDogdGFyZ2V0LnZhbHVlCiAgICAgIH0pOwogICAgfTsKICAgIGNvbnN0IHsKICAgICAgc3RhdGU6IGxvYWRTdGF0ZSwKICAgICAgdmFsdWVzOiBvcHRpb25zCiAgICB9ID0gdXNlVmFsdWVzQXN5bmMoZmllbGQpOwogICAgY29uc3QgewogICAgICBmb3JtSWQKICAgIH0gPSBGJDEoRm9ybUNvbnRleHQpOwogICAgcmV0dXJuIGUkMigiZGl2IiwgewogICAgICBjbGFzczogZm9ybUZpZWxkQ2xhc3Nlcyh0eXBlJDQsIHsKICAgICAgICBlcnJvcnMsCiAgICAgICAgZGlzYWJsZWQKICAgICAgfSksCiAgICAgIGNoaWxkcmVuOiBbZSQyKExhYmVsLCB7CiAgICAgICAgaWQ6IHByZWZpeElkKGlkLCBmb3JtSWQpLAogICAgICAgIGxhYmVsOiBsYWJlbCwKICAgICAgICByZXF1aXJlZDogcmVxdWlyZWQKICAgICAgfSksIGUkMigic2VsZWN0IiwgewogICAgICAgIGNsYXNzOiAiZmpzLXNlbGVjdCIsCiAgICAgICAgZGlzYWJsZWQ6IGRpc2FibGVkLAogICAgICAgIGlkOiBwcmVmaXhJZChpZCwgZm9ybUlkKSwKICAgICAgICBvbkNoYW5nZTogb25DaGFuZ2UsCiAgICAgICAgdmFsdWU6IHZhbHVlIHx8ICcnLAogICAgICAgIGNoaWxkcmVuOiBbZSQyKCJvcHRpb24iLCB7CiAgICAgICAgICB2YWx1ZTogIiIKICAgICAgICB9KSwgbG9hZFN0YXRlID09IExPQURfU1RBVEVTLkxPQURFRCAmJiBvcHRpb25zLm1hcCgob3B0aW9uLCBpbmRleCkgPT4gewogICAgICAgICAgcmV0dXJuIGUkMigib3B0aW9uIiwgewogICAgICAgICAgICB2YWx1ZTogb3B0aW9uLnZhbHVlLAogICAgICAgICAgICBjaGlsZHJlbjogb3B0aW9uLmxhYmVsCiAgICAgICAgICB9LCBgJHtpZH0tJHtpbmRleH1gKTsKICAgICAgICB9KV0KICAgICAgfSksIGUkMihEZXNjcmlwdGlvbiwgewogICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbgogICAgICB9KSwgZSQyKEVycm9ycywgewogICAgICAgIGVycm9yczogZXJyb3JzCiAgICAgIH0pXQogICAgfSk7CiAgfQogIFNlbGVjdC5jcmVhdGUgPSBmdW5jdGlvbiAob3B0aW9ucyA9IHt9KSB7CiAgICBpZiAob3B0aW9ucy52YWx1ZXNLZXkpIHJldHVybiBvcHRpb25zOwogICAgcmV0dXJuIHsKICAgICAgdmFsdWVzOiBbewogICAgICAgIGxhYmVsOiAnVmFsdWUnLAogICAgICAgIHZhbHVlOiAndmFsdWUnCiAgICAgIH1dLAogICAgICAuLi5vcHRpb25zCiAgICB9OwogIH07CiAgU2VsZWN0LnR5cGUgPSB0eXBlJDQ7CiAgU2VsZWN0LmxhYmVsID0gJ1NlbGVjdCc7CiAgU2VsZWN0LmtleWVkID0gdHJ1ZTsKICBTZWxlY3QuZW1wdHlWYWx1ZSA9IG51bGw7CiAgU2VsZWN0LnNhbml0aXplVmFsdWUgPSBzYW5pdGl6ZVNpbmdsZVNlbGVjdFZhbHVlOwoKICBmdW5jdGlvbiBfZXh0ZW5kcyRlKCkgeyBfZXh0ZW5kcyRlID0gT2JqZWN0LmFzc2lnbiA/IE9iamVjdC5hc3NpZ24uYmluZCgpIDogZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07IHJldHVybiBfZXh0ZW5kcyRlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH0KICB2YXIgQ2xvc2VJY29uID0gKCh7CiAgICBzdHlsZXMgPSB7fSwKICAgIC4uLnByb3BzCiAgfSkgPT4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInN2ZyIsIF9leHRlbmRzJGUoewogICAgd2lkdGg6ICIxNiIsCiAgICBoZWlnaHQ6ICIxNiIsCiAgICBmaWxsOiAibm9uZSIsCiAgICB4bWxuczogImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIH0sIHByb3BzKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInBhdGgiLCB7CiAgICBmaWxsUnVsZTogImV2ZW5vZGQiLAogICAgY2xpcFJ1bGU6ICJldmVub2RkIiwKICAgIGQ6ICJNMTIgNC43bC0uNy0uN0w4IDcuMyA0LjcgNGwtLjcuN0w3LjMgOCA0IDExLjNsLjcuN0w4IDguN2wzLjMgMy4zLjctLjdMOC43IDggMTIgNC43eiIsCiAgICBmaWxsOiAiY3VycmVudENvbG9yIgogIH0pKSk7CgogIGNvbnN0IHR5cGUkMyA9ICd0YWdsaXN0JzsKICBmdW5jdGlvbiBUYWdsaXN0KHByb3BzKSB7CiAgICBjb25zdCB7CiAgICAgIGRpc2FibGVkLAogICAgICBlcnJvcnMgPSBbXSwKICAgICAgZmllbGQsCiAgICAgIHZhbHVlOiB2YWx1ZXMgPSBbXQogICAgfSA9IHByb3BzOwogICAgY29uc3QgewogICAgICBkZXNjcmlwdGlvbiwKICAgICAgaWQsCiAgICAgIGxhYmVsCiAgICB9ID0gZmllbGQ7CiAgICBjb25zdCB7CiAgICAgIGZvcm1JZAogICAgfSA9IEYkMShGb3JtQ29udGV4dCk7CiAgICBjb25zdCBbZmlsdGVyLCBzZXRGaWx0ZXJdID0gbCQxKCcnKTsKICAgIGNvbnN0IFtmaWx0ZXJlZE9wdGlvbnMsIHNldEZpbHRlcmVkT3B0aW9uc10gPSBsJDEoW10pOwogICAgY29uc3QgW2lzRHJvcGRvd25FeHBhbmRlZCwgc2V0SXNEcm9wZG93bkV4cGFuZGVkXSA9IGwkMShmYWxzZSk7CiAgICBjb25zdCBbaGFzT3B0aW9uc0xlZnQsIHNldEhhc09wdGlvbnNMZWZ0XSA9IGwkMSh0cnVlKTsKICAgIGNvbnN0IFtpc0VzY2FwZUNsb3NlZCwgc2V0SXNFc2NhcGVDbG9zZV0gPSBsJDEoZmFsc2UpOwogICAgY29uc3Qgc2VhcmNoYmFyUmVmID0gcygpOwogICAgY29uc3QgewogICAgICBzdGF0ZTogbG9hZFN0YXRlLAogICAgICB2YWx1ZXM6IG9wdGlvbnMKICAgIH0gPSB1c2VWYWx1ZXNBc3luYyhmaWVsZCk7CgogICAgLy8gV2UgY2FjaGUgYSBtYXAgb2Ygb3B0aW9uIHZhbHVlcyB0byB0aGVpciBpbmRleCBzbyB0aGF0IHdlIGRvbid0IG5lZWQgdG8gc2VhcmNoIHRoZSB3aG9sZSBvcHRpb25zIGFycmF5IGV2ZXJ5IHRpbWUgdG8gY29ycmVsYXRlIHRoZSBsYWJlbAogICAgY29uc3QgdmFsdWVUb09wdGlvbk1hcCA9IGQoKCkgPT4gT2JqZWN0LmFzc2lnbih7fSwgLi4ub3B0aW9ucy5tYXAoKG8sIHgpID0+ICh7CiAgICAgIFtvLnZhbHVlXTogb3B0aW9uc1t4XQogICAgfSkpKSwgW29wdGlvbnNdKTsKCiAgICAvLyBVc2FnZSBvZiBzdHJpbmdpZnkgaXMgbmVjZXNzYXJ5IGhlcmUgYmVjYXVzZSB3ZSB3YW50IHRoaXMgZWZmZWN0IHRvIG9ubHkgdHJpZ2dlciB3aGVuIHRoZXJlIGlzIGEgdmFsdWUgY2hhbmdlIHRvIHRoZSBhcnJheQogICAgeSgoKSA9PiB7CiAgICAgIGlmIChsb2FkU3RhdGUgPT09IExPQURfU1RBVEVTLkxPQURFRCkgewogICAgICAgIHNldEZpbHRlcmVkT3B0aW9ucyhvcHRpb25zLmZpbHRlcihvID0+IG8ubGFiZWwgJiYgby52YWx1ZSAmJiBvLmxhYmVsLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoZmlsdGVyLnRvTG93ZXJDYXNlKCkpICYmICF2YWx1ZXMuaW5jbHVkZXMoby52YWx1ZSkpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBzZXRGaWx0ZXJlZE9wdGlvbnMoW10pOwogICAgICB9CiAgICB9LCBbZmlsdGVyLCBKU09OLnN0cmluZ2lmeSh2YWx1ZXMpLCBvcHRpb25zLCBsb2FkU3RhdGVdKTsKICAgIHkoKCkgPT4gewogICAgICBzZXRIYXNPcHRpb25zTGVmdChvcHRpb25zLmxlbmd0aCA+IHZhbHVlcy5sZW5ndGgpOwogICAgfSwgW29wdGlvbnMubGVuZ3RoLCB2YWx1ZXMubGVuZ3RoXSk7CiAgICBjb25zdCBvbkZpbHRlckNoYW5nZSA9ICh7CiAgICAgIHRhcmdldAogICAgfSkgPT4gewogICAgICBzZXRJc0VzY2FwZUNsb3NlKGZhbHNlKTsKICAgICAgc2V0RmlsdGVyKHRhcmdldC52YWx1ZSk7CiAgICB9OwogICAgY29uc3Qgc2VsZWN0VmFsdWUgPSB2YWx1ZSA9PiB7CiAgICAgIGlmIChmaWx0ZXIpIHsKICAgICAgICBzZXRGaWx0ZXIoJycpOwogICAgICB9CgogICAgICAvLyBFbnN1cmUgdmFsdWVzIGNhbm5vdCBiZSBkb3VibGUgc2VsZWN0ZWQgZHVlIHRvIGxhdGVuY3kKICAgICAgaWYgKHZhbHVlcy5hdCgtMSkgPT09IHZhbHVlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHByb3BzLm9uQ2hhbmdlKHsKICAgICAgICB2YWx1ZTogWy4uLnZhbHVlcywgdmFsdWVdLAogICAgICAgIGZpZWxkCiAgICAgIH0pOwogICAgfTsKICAgIGNvbnN0IGRlc2VsZWN0VmFsdWUgPSB2YWx1ZSA9PiB7CiAgICAgIHByb3BzLm9uQ2hhbmdlKHsKICAgICAgICB2YWx1ZTogdmFsdWVzLmZpbHRlcih2ID0+IHYgIT0gdmFsdWUpLAogICAgICAgIGZpZWxkCiAgICAgIH0pOwogICAgfTsKICAgIGNvbnN0IG9uSW5wdXRLZXlEb3duID0gZSA9PiB7CiAgICAgIHN3aXRjaCAoZS5rZXkpIHsKICAgICAgICBjYXNlICdBcnJvd1VwJzoKICAgICAgICBjYXNlICdBcnJvd0Rvd24nOgogICAgICAgICAgLy8gV2UgZG8gbm90IHdhbnQgdGhlIGN1cnNvciB0byBzZWVrIGluIHRoZSBzZWFyY2ggZmllbGQgd2hlbiB3ZSBwcmVzcyB1cCBhbmQgZG93bgogICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnQmFja3NwYWNlJzoKICAgICAgICAgIGlmICghZmlsdGVyICYmIHZhbHVlcy5sZW5ndGgpIHsKICAgICAgICAgICAgZGVzZWxlY3RWYWx1ZSh2YWx1ZXNbdmFsdWVzLmxlbmd0aCAtIDFdKTsKICAgICAgICAgIH0KICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ0VzY2FwZSc6CiAgICAgICAgICBzZXRJc0VzY2FwZUNsb3NlKHRydWUpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnRW50ZXInOgogICAgICAgICAgaWYgKGlzRXNjYXBlQ2xvc2VkKSB7CiAgICAgICAgICAgIHNldElzRXNjYXBlQ2xvc2UoZmFsc2UpOwogICAgICAgICAgfQogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH07CiAgICBjb25zdCBvblRhZ1JlbW92ZUNsaWNrID0gKGV2ZW50LCB2YWx1ZSkgPT4gewogICAgICBjb25zdCB7CiAgICAgICAgdGFyZ2V0CiAgICAgIH0gPSBldmVudDsKICAgICAgZGVzZWxlY3RWYWx1ZSh2YWx1ZSk7CgogICAgICAvLyByZXN0b3JlIGZvY3VzIGlmIHRoZXJlIGlzIG5vIG5leHQgc2libGluZyB0byBmb2N1cwogICAgICBjb25zdCBuZXh0VGFnID0gdGFyZ2V0LmNsb3Nlc3QoJy5manMtdGFnbGlzdC10YWcnKS5uZXh0U2libGluZzsKICAgICAgaWYgKCFuZXh0VGFnKSB7CiAgICAgICAgc2VhcmNoYmFyUmVmLmN1cnJlbnQuZm9jdXMoKTsKICAgICAgfQogICAgfTsKICAgIHJldHVybiBlJDIoImRpdiIsIHsKICAgICAgY2xhc3M6IGZvcm1GaWVsZENsYXNzZXModHlwZSQzLCB7CiAgICAgICAgZXJyb3JzLAogICAgICAgIGRpc2FibGVkCiAgICAgIH0pLAogICAgICBjaGlsZHJlbjogW2UkMihMYWJlbCwgewogICAgICAgIGxhYmVsOiBsYWJlbCwKICAgICAgICBpZDogcHJlZml4SWQoYCR7aWR9LXNlYXJjaGAsIGZvcm1JZCkKICAgICAgfSksIGUkMigiZGl2IiwgewogICAgICAgIGNsYXNzOiBjbGFzc05hbWVzKCdmanMtdGFnbGlzdCcsIHsKICAgICAgICAgICdkaXNhYmxlZCc6IGRpc2FibGVkCiAgICAgICAgfSksCiAgICAgICAgY2hpbGRyZW46IFshZGlzYWJsZWQgJiYgbG9hZFN0YXRlID09PSBMT0FEX1NUQVRFUy5MT0FERUQgJiYgZSQyKCJkaXYiLCB7CiAgICAgICAgICBjbGFzczogImZqcy10YWdsaXN0LXRhZ3MiLAogICAgICAgICAgY2hpbGRyZW46IHZhbHVlcy5tYXAodiA9PiB7CiAgICAgICAgICAgIHJldHVybiBlJDIoImRpdiIsIHsKICAgICAgICAgICAgICBjbGFzczogImZqcy10YWdsaXN0LXRhZyIsCiAgICAgICAgICAgICAgb25Nb3VzZURvd246IGUgPT4gZS5wcmV2ZW50RGVmYXVsdCgpLAogICAgICAgICAgICAgIGNoaWxkcmVuOiBbZSQyKCJzcGFuIiwgewogICAgICAgICAgICAgICAgY2xhc3M6ICJmanMtdGFnbGlzdC10YWctbGFiZWwiLAogICAgICAgICAgICAgICAgY2hpbGRyZW46IHZhbHVlVG9PcHRpb25NYXBbdl0gPyB2YWx1ZVRvT3B0aW9uTWFwW3ZdLmxhYmVsIDogYHVuZXhwZWN0ZWQgdmFsdWV7JHt2fX1gCiAgICAgICAgICAgICAgfSksIGUkMigiYnV0dG9uIiwgewogICAgICAgICAgICAgICAgdHlwZTogImJ1dHRvbiIsCiAgICAgICAgICAgICAgICB0aXRsZTogIlJlbW92ZSB0YWciLAogICAgICAgICAgICAgICAgY2xhc3M6ICJmanMtdGFnbGlzdC10YWctcmVtb3ZlIiwKICAgICAgICAgICAgICAgIG9uQ2xpY2s6IGV2ZW50ID0+IG9uVGFnUmVtb3ZlQ2xpY2soZXZlbnQsIHYpLAogICAgICAgICAgICAgICAgY2hpbGRyZW46IGUkMihDbG9zZUljb24sIHt9KQogICAgICAgICAgICAgIH0pXQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pCiAgICAgICAgfSksIGUkMigiaW5wdXQiLCB7CiAgICAgICAgICBkaXNhYmxlZDogZGlzYWJsZWQsCiAgICAgICAgICBjbGFzczogImZqcy10YWdsaXN0LWlucHV0IiwKICAgICAgICAgIHJlZjogc2VhcmNoYmFyUmVmLAogICAgICAgICAgaWQ6IHByZWZpeElkKGAke2lkfS1zZWFyY2hgLCBmb3JtSWQpLAogICAgICAgICAgb25DaGFuZ2U6IG9uRmlsdGVyQ2hhbmdlLAogICAgICAgICAgdHlwZTogInRleHQiLAogICAgICAgICAgdmFsdWU6IGZpbHRlciwKICAgICAgICAgIHBsYWNlaG9sZGVyOiAnU2VhcmNoJywKICAgICAgICAgIGF1dG9Db21wbGV0ZTogIm9mZiIsCiAgICAgICAgICBvbktleURvd246IGUgPT4gb25JbnB1dEtleURvd24oZSksCiAgICAgICAgICBvbk1vdXNlRG93bjogKCkgPT4gc2V0SXNFc2NhcGVDbG9zZShmYWxzZSksCiAgICAgICAgICBvbkZvY3VzOiAoKSA9PiBzZXRJc0Ryb3Bkb3duRXhwYW5kZWQodHJ1ZSksCiAgICAgICAgICBvbkJsdXI6ICgpID0+IHsKICAgICAgICAgICAgc2V0SXNEcm9wZG93bkV4cGFuZGVkKGZhbHNlKTsKICAgICAgICAgICAgc2V0RmlsdGVyKCcnKTsKICAgICAgICAgIH0KICAgICAgICB9KV0KICAgICAgfSksIGUkMigiZGl2IiwgewogICAgICAgIGNsYXNzOiAiZmpzLXRhZ2xpc3QtYW5jaG9yIiwKICAgICAgICBjaGlsZHJlbjogIWRpc2FibGVkICYmIGxvYWRTdGF0ZSA9PT0gTE9BRF9TVEFURVMuTE9BREVEICYmIGlzRHJvcGRvd25FeHBhbmRlZCAmJiAhaXNFc2NhcGVDbG9zZWQgJiYgZSQyKERyb3Bkb3duTGlzdCwgewogICAgICAgICAgdmFsdWVzOiBmaWx0ZXJlZE9wdGlvbnMsCiAgICAgICAgICBnZXRMYWJlbDogbyA9PiBvLmxhYmVsLAogICAgICAgICAgb25WYWx1ZVNlbGVjdGVkOiBvID0+IHNlbGVjdFZhbHVlKG8udmFsdWUpLAogICAgICAgICAgZW1wdHlMaXN0TWVzc2FnZTogaGFzT3B0aW9uc0xlZnQgPyAnTm8gcmVzdWx0cycgOiAnQWxsIHZhbHVlcyBzZWxlY3RlZCcsCiAgICAgICAgICBsaXN0ZW5lckVsZW1lbnQ6IHNlYXJjaGJhclJlZi5jdXJyZW50CiAgICAgICAgfSkKICAgICAgfSksIGUkMihEZXNjcmlwdGlvbiwgewogICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbgogICAgICB9KSwgZSQyKEVycm9ycywgewogICAgICAgIGVycm9yczogZXJyb3JzCiAgICAgIH0pXQogICAgfSk7CiAgfQogIFRhZ2xpc3QuY3JlYXRlID0gZnVuY3Rpb24gKG9wdGlvbnMgPSB7fSkgewogICAgaWYgKG9wdGlvbnMudmFsdWVzS2V5KSByZXR1cm4gb3B0aW9uczsKICAgIHJldHVybiB7CiAgICAgIHZhbHVlczogW3sKICAgICAgICBsYWJlbDogJ1ZhbHVlJywKICAgICAgICB2YWx1ZTogJ3ZhbHVlJwogICAgICB9XSwKICAgICAgLi4ub3B0aW9ucwogICAgfTsKICB9OwogIFRhZ2xpc3QudHlwZSA9IHR5cGUkMzsKICBUYWdsaXN0LmxhYmVsID0gJ1RhZ2xpc3QnOwogIFRhZ2xpc3Qua2V5ZWQgPSB0cnVlOwogIFRhZ2xpc3QuZW1wdHlWYWx1ZSA9IFtdOwogIFRhZ2xpc3Quc2FuaXRpemVWYWx1ZSA9IHNhbml0aXplTXVsdGlTZWxlY3RWYWx1ZTsKCiAgZnVuY3Rpb24gX2V4dGVuZHMkZCgpIHsgX2V4dGVuZHMkZCA9IE9iamVjdC5hc3NpZ24gPyBPYmplY3QuYXNzaWduLmJpbmQoKSA6IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9OyByZXR1cm4gX2V4dGVuZHMkZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9CiAgdmFyIEJ1dHRvbkljb24gPSAoKHsKICAgIHN0eWxlcyA9IHt9LAogICAgLi4ucHJvcHMKICB9KSA9PiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgic3ZnIiwgX2V4dGVuZHMkZCh7CiAgICB4bWxuczogImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiwKICAgIHdpZHRoOiAiNTQiLAogICAgaGVpZ2h0OiAiNTQiCiAgfSwgcHJvcHMpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgicGF0aCIsIHsKICAgIGZpbGxSdWxlOiAiZXZlbm9kZCIsCiAgICBkOiAiTTQ1IDE3YTMgMyAwIDAxMyAzdjE0YTMgMyAwIDAxLTMgM0g5YTMgMyAwIDAxLTMtM1YyMGEzIDMgMCAwMTMtM2gzNnptLTkgOC44ODlIMTh2Mi4yMjJoMThWMjUuODl6IgogIH0pKSk7CgogIGZ1bmN0aW9uIF9leHRlbmRzJGMoKSB7IF9leHRlbmRzJGMgPSBPYmplY3QuYXNzaWduID8gT2JqZWN0LmFzc2lnbi5iaW5kKCkgOiBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTsgcmV0dXJuIF9leHRlbmRzJGMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfQogIHZhciBDaGVja2JveEljb24gPSAoKHsKICAgIHN0eWxlcyA9IHt9LAogICAgLi4ucHJvcHMKICB9KSA9PiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgic3ZnIiwgX2V4dGVuZHMkYyh7CiAgICB4bWxuczogImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiwKICAgIHdpZHRoOiAiNTQiLAogICAgaGVpZ2h0OiAiNTQiCiAgfSwgcHJvcHMpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgicGF0aCIsIHsKICAgIGQ6ICJNMzQgMThIMjBhMiAyIDAgMDAtMiAydjE0YTIgMiAwIDAwMiAyaDE0YTIgMiAwIDAwMi0yVjIwYTIgMiAwIDAwLTItMnptLTkgMTRsLTUtNSAxLjQxLTEuNDFMMjUgMjkuMTdsNy41OS03LjU5TDM0IDIzbC05IDl6IgogIH0pKSk7CgogIGZ1bmN0aW9uIF9leHRlbmRzJGIoKSB7IF9leHRlbmRzJGIgPSBPYmplY3QuYXNzaWduID8gT2JqZWN0LmFzc2lnbi5iaW5kKCkgOiBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTsgcmV0dXJuIF9leHRlbmRzJGIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfQogIHZhciBDaGVja2xpc3RJY29uID0gKCh7CiAgICBzdHlsZXMgPSB7fSwKICAgIC4uLnByb3BzCiAgfSkgPT4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInN2ZyIsIF9leHRlbmRzJGIoewogICAgd2lkdGg6ICI1NCIsCiAgICBoZWlnaHQ6ICI1NCIsCiAgICBmaWxsOiAibm9uZSIsCiAgICB4bWxuczogImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIH0sIHByb3BzKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInBhdGgiLCB7CiAgICBmaWxsUnVsZTogImV2ZW5vZGQiLAogICAgY2xpcFJ1bGU6ICJldmVub2RkIiwKICAgIGQ6ICJNMTkgMjRoLTZ2Nmg2di02em0tNi0yYTIgMiAwIDAwLTIgMnY2YTIgMiAwIDAwMiAyaDZhMiAyIDAgMDAyLTJ2LTZhMiAyIDAgMDAtMi0yaC02em02IDE4aC02djZoNnYtNnptLTYtMmEyIDIgMCAwMC0yIDJ2NmEyIDIgMCAwMDIgMmg2YTIgMiAwIDAwMi0ydi02YTIgMiAwIDAwLTItMmgtNnptNi0zMGgtNnY2aDZWOHptLTYtMmEyIDIgMCAwMC0yIDJ2NmEyIDIgMCAwMDIgMmg2YTIgMiAwIDAwMi0yVjhhMiAyIDAgMDAtMi0yaC02eiIsCiAgICBmaWxsOiAiIzIyMjQyQSIKICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInBhdGgiLCB7CiAgICBkOiAiTTI2IDI2YTEgMSAwIDAxMS0xaDE1YTEgMSAwIDAxMSAxdjJhMSAxIDAgMDEtMSAxSDI3YTEgMSAwIDAxLTEtMXYtMnptMCAxNmExIDEgMCAwMTEtMWgxNWExIDEgMCAwMTEgMXYyYTEgMSAwIDAxLTEgMUgyN2ExIDEgMCAwMS0xLTF2LTJ6bTAtMzJhMSAxIDAgMDExLTFoMTVhMSAxIDAgMDExIDF2MmExIDEgMCAwMS0xIDFIMjdhMSAxIDAgMDEtMS0xdi0yeiIsCiAgICBmaWxsOiAiIzIyMjQyQSIKICB9KSkpOwoKICBmdW5jdGlvbiBfZXh0ZW5kcyRhKCkgeyBfZXh0ZW5kcyRhID0gT2JqZWN0LmFzc2lnbiA/IE9iamVjdC5hc3NpZ24uYmluZCgpIDogZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07IHJldHVybiBfZXh0ZW5kcyRhLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH0KICB2YXIgRGF0ZXRpbWVJY29uID0gKCh7CiAgICBzdHlsZXMgPSB7fSwKICAgIC4uLnByb3BzCiAgfSkgPT4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInN2ZyIsIF9leHRlbmRzJGEoewogICAgeG1sbnM6ICJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsCiAgICB3aWR0aDogIjU0IiwKICAgIGhlaWdodDogIjU0IiwKICAgIGZpbGw6ICJub25lIgogIH0sIHByb3BzKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInBhdGgiLCB7CiAgICBmaWxsOiAiIzAwMCIsCiAgICBmaWxsUnVsZTogImV2ZW5vZGQiLAogICAgZDogIk0zNy45MDggMTMuNDE4aC01LjAwNHYtMi4zNTRoLTEuNzY2djIuMzU0SDIxLjEzdi0yLjM1NGgtMS43NjZ2Mi4zNTRIMTQuMzZjLTEuMTMyIDAtMi4wNi45MjgtMi4wNiAyLjA2djIzLjU0OWMwIDEuMTMyLjkyOCAyLjA2IDIuMDYgMi4wNmg2Ljc3di0xLjc2NmgtNi4zNThhLjcwNy43MDcgMCAwMS0uNzA2LS43MDZWMTUuODljMC0uMzkuMzE2LS43MDcuNzA2LS43MDdoNC41OTJ2Mi4zNTVoMS43NjZ2LTIuMzU1aDEwLjAwOHYyLjM1NWgxLjc2NnYtMi4zNTVoNC41OTJjLjM5IDAgLjcwNy4zMTcuNzA3LjcwN3Y2LjM1OGgxLjc2NXYtNi43N2MwLTEuMTMzLS45MjctMi4wNi0yLjA2LTIuMDZ6IiwKICAgIGNsaXBSdWxlOiAiZXZlbm9kZCIKICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInBhdGgiLCB7CiAgICBmaWxsOiAiIzAwMCIsCiAgICBkOiAiTTM1LjEzIDM3LjYwM2wxLjIzNy0xLjIzNy0zLjQ2OC0zLjQ3NXYtNS45MjZoLTEuNzU0djYuNjU0bDMuOTg0IDMuOTg0eiIKICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInBhdGgiLCB7CiAgICBmaWxsOiAiIzAwMCIsCiAgICBmaWxsUnVsZTogImV2ZW5vZGQiLAogICAgZDogIk0yMy4wOCAzNi45NjJhOS42NzggOS42NzggMCAxMDE3Ljg4My03LjQwOCA5LjY3OCA5LjY3OCAwIDAwLTE3Ljg4MiA3LjQwOHptNC41NC0xMC4yOTJhNy45MjQgNy45MjQgMCAxMTguODA1IDEzLjE3N0E3LjkyNCA3LjkyNCAwIDAxMjcuNjIgMjYuNjd6IiwKICAgIGNsaXBSdWxlOiAiZXZlbm9kZCIKICB9KSkpOwoKICBmdW5jdGlvbiBfZXh0ZW5kcyQ5KCkgeyBfZXh0ZW5kcyQ5ID0gT2JqZWN0LmFzc2lnbiA/IE9iamVjdC5hc3NpZ24uYmluZCgpIDogZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07IHJldHVybiBfZXh0ZW5kcyQ5LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH0KICB2YXIgVGFnbGlzdEljb24gPSAoKHsKICAgIHN0eWxlcyA9IHt9LAogICAgLi4ucHJvcHMKICB9KSA9PiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgic3ZnIiwgX2V4dGVuZHMkOSh7CiAgICB3aWR0aDogIjU0IiwKICAgIGhlaWdodDogIjU0IiwKICAgIGZpbGw6ICJub25lIiwKICAgIHhtbG5zOiAiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgfSwgcHJvcHMpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgicGF0aCIsIHsKICAgIGZpbGxSdWxlOiAiZXZlbm9kZCIsCiAgICBjbGlwUnVsZTogImV2ZW5vZGQiLAogICAgZDogIk00NSAxNmEzIDMgMCAwMTMgM3YxNmEzIDMgMCAwMS0zIDNIOWEzIDMgMCAwMS0zLTNWMTlhMyAzIDAgMDEzLTNoMzZ6bTAgMkg5YTEgMSAwIDAwLTEgMXYxNmExIDEgMCAwMDEgMWgzNmExIDEgMCAwMDEtMVYxOWExIDEgMCAwMC0xLTF6IiwKICAgIGZpbGw6ICIjMDAwIgogIH0pLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgicGF0aCIsIHsKICAgIGQ6ICJNMTEgMjJhMSAxIDAgMDExLTFoMTlhMSAxIDAgMDExIDF2MTBhMSAxIDAgMDEtMSAxSDEyYTEgMSAwIDAxLTEtMVYyMnoiLAogICAgZmlsbDogIiM1MDU1NjIiCiAgfSkpKTsKCiAgZnVuY3Rpb24gX2V4dGVuZHMkOCgpIHsgX2V4dGVuZHMkOCA9IE9iamVjdC5hc3NpZ24gPyBPYmplY3QuYXNzaWduLmJpbmQoKSA6IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9OyByZXR1cm4gX2V4dGVuZHMkOC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9CiAgdmFyIEZvcm1JY29uID0gKCh7CiAgICBzdHlsZXMgPSB7fSwKICAgIC4uLnByb3BzCiAgfSkgPT4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInN2ZyIsIF9leHRlbmRzJDgoewogICAgeG1sbnM6ICJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsCiAgICB3aWR0aDogIjU0IiwKICAgIGhlaWdodDogIjU0IgogIH0sIHByb3BzKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInJlY3QiLCB7CiAgICB4OiAiMTUiLAogICAgeTogIjE3IiwKICAgIHdpZHRoOiAiMjQiLAogICAgaGVpZ2h0OiAiNCIsCiAgICByeDogIjEiCiAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJyZWN0IiwgewogICAgeDogIjE1IiwKICAgIHk6ICIyNSIsCiAgICB3aWR0aDogIjI0IiwKICAgIGhlaWdodDogIjQiLAogICAgcng6ICIxIgogIH0pLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgicmVjdCIsIHsKICAgIHg6ICIxNSIsCiAgICB5OiAiMzMiLAogICAgd2lkdGg6ICIxMyIsCiAgICBoZWlnaHQ6ICI0IiwKICAgIHJ4OiAiMSIKICB9KSkpOwoKICBmdW5jdGlvbiBfZXh0ZW5kcyQ3KCkgeyBfZXh0ZW5kcyQ3ID0gT2JqZWN0LmFzc2lnbiA/IE9iamVjdC5hc3NpZ24uYmluZCgpIDogZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07IHJldHVybiBfZXh0ZW5kcyQ3LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH0KICB2YXIgQ29sdW1uc0ljb24gPSAoKHsKICAgIHN0eWxlcyA9IHt9LAogICAgLi4ucHJvcHMKICB9KSA9PiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgic3ZnIiwgX2V4dGVuZHMkNyh7CiAgICB4bWxuczogImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiwKICAgIHdpZHRoOiAiNTQiLAogICAgaGVpZ2h0OiAiNTQiCiAgfSwgcHJvcHMpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgicGF0aCIsIHsKICAgIGZpbGxSdWxlOiAiZXZlbm9kZCIsCiAgICBkOiAiTTggMzN2NWExIDEgMCAwMDEgMWg0djJIOWEzIDMgMCAwMS0zLTN2LTVoMnptMTggNnYySDE1di0yaDExem0xMyAwdjJIMjh2LTJoMTF6bTktNnY1YTMgMyAwIDAxLTMgM2gtNHYtMmg0YTEgMSAwIDAwLjk5My0uODgzTDQ2IDM4di01aDJ6TTggMjJ2OUg2di05aDJ6bTQwIDB2OWgtMnYtOWgyem0tMzUtOXYySDlhMSAxIDAgMDAtLjk5My44ODNMOCAxNnY0SDZ2LTRhMyAzIDAgMDEzLTNoNHptMzIgMGEzIDMgMCAwMTMgM3Y0aC0ydi00YTEgMSAwIDAwLS44ODMtLjk5M0w0NSAxNWgtNHYtMmg0em0tNiAwdjJIMjh2LTJoMTF6bS0xMyAwdjJIMTV2LTJoMTF6IgogIH0pKSk7CgogIGZ1bmN0aW9uIF9leHRlbmRzJDYoKSB7IF9leHRlbmRzJDYgPSBPYmplY3QuYXNzaWduID8gT2JqZWN0LmFzc2lnbi5iaW5kKCkgOiBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTsgcmV0dXJuIF9leHRlbmRzJDYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfQogIHZhciBOdW1iZXJJY29uID0gKCh7CiAgICBzdHlsZXMgPSB7fSwKICAgIC4uLnByb3BzCiAgfSkgPT4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInN2ZyIsIF9leHRlbmRzJDYoewogICAgeG1sbnM6ICJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsCiAgICB3aWR0aDogIjU0IiwKICAgIGhlaWdodDogIjU0IgogIH0sIHByb3BzKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInBhdGgiLCB7CiAgICBmaWxsUnVsZTogImV2ZW5vZGQiLAogICAgZDogIk00NSAxNmEzIDMgMCAwMTMgM3YxNmEzIDMgMCAwMS0zIDNIOWEzIDMgMCAwMS0zLTNWMTlhMyAzIDAgMDEzLTNoMzZ6bTAgMkg5YTEgMSAwIDAwLTEgMXYxNmExIDEgMCAwMDEgMWgzNmExIDEgMCAwMDEtMVYxOWExIDEgMCAwMC0xLTF6TTM1IDI4LjQ0NGg3bC0zLjUgNC0zLjUtNHpNMzUgMjZoN2wtMy41LTQtMy41IDR6IgogIH0pKSk7CgogIGZ1bmN0aW9uIF9leHRlbmRzJDUoKSB7IF9leHRlbmRzJDUgPSBPYmplY3QuYXNzaWduID8gT2JqZWN0LmFzc2lnbi5iaW5kKCkgOiBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTsgcmV0dXJuIF9leHRlbmRzJDUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfQogIHZhciBSYWRpb0ljb24gPSAoKHsKICAgIHN0eWxlcyA9IHt9LAogICAgLi4ucHJvcHMKICB9KSA9PiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgic3ZnIiwgX2V4dGVuZHMkNSh7CiAgICB4bWxuczogImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiwKICAgIHdpZHRoOiAiNTQiLAogICAgaGVpZ2h0OiAiNTQiCiAgfSwgcHJvcHMpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgicGF0aCIsIHsKICAgIGQ6ICJNMjcgMjJjLTIuNzYgMC01IDIuMjQtNSA1czIuMjQgNSA1IDUgNS0yLjI0IDUtNS0yLjI0LTUtNS01em0wLTVjLTUuNTIgMC0xMCA0LjQ4LTEwIDEwczQuNDggMTAgMTAgMTAgMTAtNC40OCAxMC0xMC00LjQ4LTEwLTEwLTEwem0wIDE4Yy00LjQyIDAtOC0zLjU4LTgtOHMzLjU4LTggOC04IDggMy41OCA4IDgtMy41OCA4LTggOHoiCiAgfSkpKTsKCiAgZnVuY3Rpb24gX2V4dGVuZHMkNCgpIHsgX2V4dGVuZHMkNCA9IE9iamVjdC5hc3NpZ24gPyBPYmplY3QuYXNzaWduLmJpbmQoKSA6IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9OyByZXR1cm4gX2V4dGVuZHMkNC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9CiAgdmFyIFNlbGVjdEljb24gPSAoKHsKICAgIHN0eWxlcyA9IHt9LAogICAgLi4ucHJvcHMKICB9KSA9PiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgic3ZnIiwgX2V4dGVuZHMkNCh7CiAgICB4bWxuczogImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiwKICAgIHdpZHRoOiAiNTQiLAogICAgaGVpZ2h0OiAiNTQiCiAgfSwgcHJvcHMpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgicGF0aCIsIHsKICAgIGZpbGxSdWxlOiAiZXZlbm9kZCIsCiAgICBkOiAiTTQ1IDE2YTMgMyAwIDAxMyAzdjE2YTMgMyAwIDAxLTMgM0g5YTMgMyAwIDAxLTMtM1YxOWEzIDMgMCAwMTMtM2gzNnptMCAySDlhMSAxIDAgMDAtMSAxdjE2YTEgMSAwIDAwMSAxaDM2YTEgMSAwIDAwMS0xVjE5YTEgMSAwIDAwLTEtMXptLTEyIDdoOWwtNC41IDYtNC41LTZ6IgogIH0pKSk7CgogIGZ1bmN0aW9uIF9leHRlbmRzJDMoKSB7IF9leHRlbmRzJDMgPSBPYmplY3QuYXNzaWduID8gT2JqZWN0LmFzc2lnbi5iaW5kKCkgOiBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTsgcmV0dXJuIF9leHRlbmRzJDMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfQogIHZhciBUZXh0SWNvbiA9ICgoewogICAgc3R5bGVzID0ge30sCiAgICAuLi5wcm9wcwogIH0pID0+IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJzdmciLCBfZXh0ZW5kcyQzKHsKICAgIHhtbG5zOiAiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLAogICAgd2lkdGg6ICI1NCIsCiAgICBoZWlnaHQ6ICI1NCIKICB9LCBwcm9wcyksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJwYXRoIiwgewogICAgZDogIk0yMC41OCAzMy43N2gtM2wtMS4xOC0zLjA4SDExbC0xLjEgMy4wOEg3bDUuMjctMTMuNTRoMi44OXptLTUtNS4zNmwtMS44Ni01LTEuODMgNXpNMjIgMjAuMjNoNS40MWExNS40NyAxNS40NyAwIDAxMi40LjE0IDMuNDIgMy40MiAwIDAxMS40MS41NSAzLjQ3IDMuNDcgMCAwMTEgMS4xNCAzIDMgMCAwMS40MiAxLjU4IDMuMjYgMy4yNiAwIDAxLTEuOTEgMi45NCAzLjYzIDMuNjMgMCAwMTEuOTEgMS4yMiAzLjI4IDMuMjggMCAwMS42NiAyIDQgNCAwIDAxLS40MyAxLjggMy42MyAzLjYzIDAgMDEtMS4wOSAxLjQgMy44OSAzLjg5IDAgMDEtMS44My42NXEtLjY5LjA3LTMuMy4wOUgyMnptMi43MyAyLjI1djMuMTNoMy44YTEuNzkgMS43OSAwIDAwMS4xLS40OSAxLjQxIDEuNDEgMCAwMC40MS0xIDEuNDkgMS40OSAwIDAwLS4zNS0xIDEuNTQgMS41NCAwIDAwLTEtLjQ4Yy0uMjcgMC0xLjA1LS4wNS0yLjM0LS4wNXptMCA1LjM5djMuNjJoMi41N2ExMS41MiAxMS41MiAwIDAwMS44OC0uMDkgMS42NSAxLjY1IDAgMDAxLS41NCAxLjYgMS42IDAgMDAuMzgtMS4xNCAxLjc1IDEuNzUgMCAwMC0uMjktMSAxLjY5IDEuNjkgMCAwMC0uODYtLjYyIDkuMjggOS4yOCAwIDAwLTIuNDEtLjIzek00NC4zNSAyOC43OWwyLjY1Ljg0YTUuOTQgNS45NCAwIDAxLTIgMy4yOUE1Ljc0IDUuNzQgMCAwMTQxLjM4IDM0YTUuODcgNS44NyAwIDAxLTQuNDQtMS44NCA3LjA5IDcuMDkgMCAwMS0xLjczLTVBNy40MyA3LjQzIDAgMDEzNyAyMS44NyA2IDYgMCAwMTQxLjU0IDIwYTUuNjQgNS42NCAwIDAxNCAxLjQ3QTUuMzMgNS4zMyAwIDAxNDcgMjRsLTIuNy42NWEyLjggMi44IDAgMDAtMi44Ni0yLjI3QTMuMDkgMy4wOSAwIDAwMzkgMjMuNDJhNS4zMSA1LjMxIDAgMDAtLjkzIDMuNSA1LjYyIDUuNjIgMCAwMC45MyAzLjY1IDMgMyAwIDAwMi40IDEuMDkgMi43MiAyLjcyIDAgMDAxLjgyLS42NiA0IDQgMCAwMDEuMTMtMi4yMXoiCiAgfSkpKTsKCiAgZnVuY3Rpb24gX2V4dGVuZHMkMigpIHsgX2V4dGVuZHMkMiA9IE9iamVjdC5hc3NpZ24gPyBPYmplY3QuYXNzaWduLmJpbmQoKSA6IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9OyByZXR1cm4gX2V4dGVuZHMkMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9CiAgdmFyIFRleHRmaWVsZEljb24gPSAoKHsKICAgIHN0eWxlcyA9IHt9LAogICAgLi4ucHJvcHMKICB9KSA9PiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgic3ZnIiwgX2V4dGVuZHMkMih7CiAgICB4bWxuczogImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiwKICAgIHdpZHRoOiAiNTQiLAogICAgaGVpZ2h0OiAiNTQiCiAgfSwgcHJvcHMpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgicGF0aCIsIHsKICAgIGZpbGxSdWxlOiAiZXZlbm9kZCIsCiAgICBkOiAiTTQ1IDE2YTMgMyAwIDAxMyAzdjE2YTMgMyAwIDAxLTMgM0g5YTMgMyAwIDAxLTMtM1YxOWEzIDMgMCAwMTMtM2gzNnptMCAySDlhMSAxIDAgMDAtMSAxdjE2YTEgMSAwIDAwMSAxaDM2YTEgMSAwIDAwMS0xVjE5YTEgMSAwIDAwLTEtMXptLTMyIDR2MTBoLTJWMjJoMnoiCiAgfSkpKTsKCiAgZnVuY3Rpb24gX2V4dGVuZHMkMSgpIHsgX2V4dGVuZHMkMSA9IE9iamVjdC5hc3NpZ24gPyBPYmplY3QuYXNzaWduLmJpbmQoKSA6IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9OyByZXR1cm4gX2V4dGVuZHMkMS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9CiAgdmFyIFRleHRhcmVhSWNvbiA9ICgoewogICAgc3R5bGVzID0ge30sCiAgICAuLi5wcm9wcwogIH0pID0+IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJzdmciLCBfZXh0ZW5kcyQxKHsKICAgIHhtbG5zOiAiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLAogICAgd2lkdGg6ICI1NCIsCiAgICBoZWlnaHQ6ICI1NCIKICB9LCBwcm9wcyksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJwYXRoIiwgewogICAgZmlsbFJ1bGU6ICJldmVub2RkIiwKICAgIGQ6ICJNNDUgMTNhMyAzIDAgMDEzIDN2MjJhMyAzIDAgMDEtMyAzSDlhMyAzIDAgMDEtMy0zVjE2YTMgMyAwIDAxMy0zaDM2em0wIDJIOWExIDEgMCAwMC0xIDF2MjJhMSAxIDAgMDAxIDFoMzZhMSAxIDAgMDAxLTFWMTZhMSAxIDAgMDAtMS0xem0tMS4xMzYgMTUuNWwuODQ4Ljg0OS02LjM2MyA2LjM2My0uODQ5LS44NDggNi4zNjQtNi4zNjR6bS4yNjQgMy41bC44NDkuODQ5LTIuODI4IDIuODI4LS44NDktLjg0OUw0NC4xMjggMzR6TTEzIDE5djEwaC0yVjE5aDJ6IgogIH0pKSk7CgogIGZ1bmN0aW9uIF9leHRlbmRzKCkgeyBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gPyBPYmplY3QuYXNzaWduLmJpbmQoKSA6IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9OyByZXR1cm4gX2V4dGVuZHMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfQogIHZhciBJbWFnZUljb24gPSAoKHsKICAgIHN0eWxlcyA9IHt9LAogICAgLi4ucHJvcHMKICB9KSA9PiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgic3ZnIiwgX2V4dGVuZHMoewogICAgd2lkdGg6ICI1NCIsCiAgICBoZWlnaHQ6ICI1NCIsCiAgICBmaWxsOiAibm9uZSIsCiAgICB4bWxuczogImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIH0sIHByb3BzKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInBhdGgiLCB7CiAgICBmaWxsUnVsZTogImV2ZW5vZGQiLAogICAgY2xpcFJ1bGU6ICJldmVub2RkIiwKICAgIGQ6ICJNMzQuNjM2IDIxLjkxQTMuODE4IDMuODE4IDAgMTEyNyAyMS45MDhhMy44MTggMy44MTggMCAwMTcuNjM2IDB6bS0yIDBBMS44MTggMS44MTggMCAxMTI5IDIxLjkwOGExLjgxOCAxLjgxOCAwIDAxMy42MzYgMHoiLAogICAgZmlsbDogIiMwMDAiCiAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJwYXRoIiwgewogICAgZmlsbFJ1bGU6ICJldmVub2RkIiwKICAgIGNsaXBSdWxlOiAiZXZlbm9kZCIsCiAgICBkOiAiTTE1IDEzYTIgMiAwIDAwLTIgMnYyNGEyIDIgMCAwMDIgMmgyNGEyIDIgMCAwMDItMlYxNWEyIDIgMCAwMC0yLTJIMTV6bTI0IDJIMTV2MTIuNDVsNC43MS00LjcwOWExLjkxIDEuOTEgMCAwMTIuNzAyIDBsNi42OTUgNi42OTUgMi42NTYtMS43N2ExLjkxIDEuOTEgMCAwMTIuNDExLjIzOUwzOSAzMi43M1YxNXpNMTUgMzl2LTguNzU0Yy4wNi0uMDM4LjExNi0uMDgzLjE2OC0uMTM1bDUuODkzLTUuODkzIDYuNjg0IDYuNjg1YTEuOTExIDEuOTExIDAgMDAyLjQxLjIzOGwyLjY1Ny0xLjc3IDYuMDIgNi4wMmMuMDUyLjA1MS4xMDguMDk3LjE2OC4xMzVWMzlIMTV6IiwKICAgIGZpbGw6ICIjMDAwIgogIH0pKSk7CgogIGNvbnN0IGljb25zQnlUeXBlID0gewogICAgYnV0dG9uOiBCdXR0b25JY29uLAogICAgY2hlY2tib3g6IENoZWNrYm94SWNvbiwKICAgIGNoZWNrbGlzdDogQ2hlY2tsaXN0SWNvbiwKICAgIGNvbHVtbnM6IENvbHVtbnNJY29uLAogICAgZGF0ZXRpbWU6IERhdGV0aW1lSWNvbiwKICAgIGltYWdlOiBJbWFnZUljb24sCiAgICBudW1iZXI6IE51bWJlckljb24sCiAgICByYWRpbzogUmFkaW9JY29uLAogICAgc2VsZWN0OiBTZWxlY3RJY29uLAogICAgdGFnbGlzdDogVGFnbGlzdEljb24sCiAgICB0ZXh0OiBUZXh0SWNvbiwKICAgIHRleHRmaWVsZDogVGV4dGZpZWxkSWNvbiwKICAgIHRleHRhcmVhOiBUZXh0YXJlYUljb24sCiAgICBkZWZhdWx0OiBGb3JtSWNvbgogIH07CgogIGNvbnN0IHR5cGUkMiA9ICd0ZXh0JzsKICBmdW5jdGlvbiBUZXh0KHByb3BzKSB7CiAgICBjb25zdCB7CiAgICAgIGZpZWxkLAogICAgICBkaXNhYmxlZAogICAgfSA9IHByb3BzOwogICAgY29uc3QgewogICAgICB0ZXh0ID0gJycKICAgIH0gPSBmaWVsZDsKICAgIGNvbnN0IHRleHRWYWx1ZSA9IHVzZUV4cHJlc3Npb25WYWx1ZSh0ZXh0KSB8fCAnJzsKICAgIHJldHVybiBlJDIoImRpdiIsIHsKICAgICAgY2xhc3M6IGZvcm1GaWVsZENsYXNzZXModHlwZSQyKSwKICAgICAgY2hpbGRyZW46IHJlbmRlclRleHQoZmllbGQsIHRleHRWYWx1ZSwgZGlzYWJsZWQpCiAgICB9KTsKICB9CiAgVGV4dC5jcmVhdGUgPSBmdW5jdGlvbiAob3B0aW9ucyA9IHt9KSB7CiAgICByZXR1cm4gewogICAgICB0ZXh0OiAnIyBUZXh0JywKICAgICAgLi4ub3B0aW9ucwogICAgfTsKICB9OwogIFRleHQudHlwZSA9IHR5cGUkMjsKICBUZXh0LmtleWVkID0gZmFsc2U7CgogIC8vIGhlbHBlciAvLy8vLy8vLy8vLy8vLwoKICBmdW5jdGlvbiByZW5kZXJUZXh0KGZpZWxkLCBjb250ZW50LCBkaXNhYmxlZCkgewogICAgY29uc3QgewogICAgICB0ZXh0CiAgICB9ID0gZmllbGQ7CiAgICBjb25zdCBJY29uID0gaWNvbnNCeVR5cGVbJ3RleHQnXTsKICAgIGlmIChkaXNhYmxlZCkgewogICAgICBpZiAoIXRleHQpIHsKICAgICAgICByZXR1cm4gZSQyKCJkaXYiLCB7CiAgICAgICAgICBjbGFzczogImZqcy1mb3JtLWZpZWxkLXBsYWNlaG9sZGVyIiwKICAgICAgICAgIGNoaWxkcmVuOiBbZSQyKEljb24sIHsKICAgICAgICAgICAgdmlld0JveDogIjAgMCA1NCA1NCIKICAgICAgICAgIH0pLCAiVGV4dCB2aWV3IGlzIGVtcHR5Il0KICAgICAgICB9KTsKICAgICAgfQogICAgICBpZiAoaXNFeHByZXNzaW9uJDIodGV4dCkpIHsKICAgICAgICByZXR1cm4gZSQyKCJkaXYiLCB7CiAgICAgICAgICBjbGFzczogImZqcy1mb3JtLWZpZWxkLXBsYWNlaG9sZGVyIiwKICAgICAgICAgIGNoaWxkcmVuOiBbZSQyKEljb24sIHsKICAgICAgICAgICAgdmlld0JveDogIjAgMCA1NCA1NCIKICAgICAgICAgIH0pLCAiVGV4dCB2aWV3IGlzIHBvcHVsYXRlZCBieSBhbiBleHByZXNzaW9uIl0KICAgICAgICB9KTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIGUkMihNYXJrdXAsIHsKICAgICAgbWFya3VwOiBzYWZlTWFya2Rvd24oY29udGVudCksCiAgICAgIHRyaW06IGZhbHNlCiAgICB9KTsKICB9CgogIGNvbnN0IHR5cGUkMSA9ICd0ZXh0ZmllbGQnOwogIGZ1bmN0aW9uIFRleHRmaWVsZChwcm9wcykgewogICAgY29uc3QgewogICAgICBkaXNhYmxlZCwKICAgICAgZXJyb3JzID0gW10sCiAgICAgIGZpZWxkLAogICAgICB2YWx1ZSA9ICcnCiAgICB9ID0gcHJvcHM7CiAgICBjb25zdCB7CiAgICAgIGRlc2NyaXB0aW9uLAogICAgICBpZCwKICAgICAgbGFiZWwsCiAgICAgIGFwcGVhcmFuY2UgPSB7fSwKICAgICAgdmFsaWRhdGUgPSB7fQogICAgfSA9IGZpZWxkOwogICAgY29uc3QgewogICAgICBwcmVmaXhBZG9ybmVyLAogICAgICBzdWZmaXhBZG9ybmVyCiAgICB9ID0gYXBwZWFyYW5jZTsKICAgIGNvbnN0IHsKICAgICAgcmVxdWlyZWQKICAgIH0gPSB2YWxpZGF0ZTsKICAgIGNvbnN0IG9uQ2hhbmdlID0gKHsKICAgICAgdGFyZ2V0CiAgICB9KSA9PiB7CiAgICAgIHByb3BzLm9uQ2hhbmdlKHsKICAgICAgICBmaWVsZCwKICAgICAgICB2YWx1ZTogdGFyZ2V0LnZhbHVlCiAgICAgIH0pOwogICAgfTsKICAgIGNvbnN0IHsKICAgICAgZm9ybUlkCiAgICB9ID0gRiQxKEZvcm1Db250ZXh0KTsKICAgIHJldHVybiBlJDIoImRpdiIsIHsKICAgICAgY2xhc3M6IGZvcm1GaWVsZENsYXNzZXModHlwZSQxLCB7CiAgICAgICAgZXJyb3JzLAogICAgICAgIGRpc2FibGVkCiAgICAgIH0pLAogICAgICBjaGlsZHJlbjogW2UkMihMYWJlbCwgewogICAgICAgIGlkOiBwcmVmaXhJZChpZCwgZm9ybUlkKSwKICAgICAgICBsYWJlbDogbGFiZWwsCiAgICAgICAgcmVxdWlyZWQ6IHJlcXVpcmVkCiAgICAgIH0pLCBlJDIoSW5wdXRBZG9ybmVyLCB7CiAgICAgICAgZGlzYWJsZWQ6IGRpc2FibGVkLAogICAgICAgIHByZTogcHJlZml4QWRvcm5lciwKICAgICAgICBwb3N0OiBzdWZmaXhBZG9ybmVyLAogICAgICAgIGNoaWxkcmVuOiBlJDIoImlucHV0IiwgewogICAgICAgICAgY2xhc3M6ICJmanMtaW5wdXQiLAogICAgICAgICAgZGlzYWJsZWQ6IGRpc2FibGVkLAogICAgICAgICAgaWQ6IHByZWZpeElkKGlkLCBmb3JtSWQpLAogICAgICAgICAgb25JbnB1dDogb25DaGFuZ2UsCiAgICAgICAgICB0eXBlOiAidGV4dCIsCiAgICAgICAgICB2YWx1ZTogdmFsdWUKICAgICAgICB9KQogICAgICB9KSwgZSQyKERlc2NyaXB0aW9uLCB7CiAgICAgICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uCiAgICAgIH0pLCBlJDIoRXJyb3JzLCB7CiAgICAgICAgZXJyb3JzOiBlcnJvcnMKICAgICAgfSldCiAgICB9KTsKICB9CiAgVGV4dGZpZWxkLmNyZWF0ZSA9IGZ1bmN0aW9uIChvcHRpb25zID0ge30pIHsKICAgIHJldHVybiB7CiAgICAgIC4uLm9wdGlvbnMKICAgIH07CiAgfTsKICBUZXh0ZmllbGQudHlwZSA9IHR5cGUkMTsKICBUZXh0ZmllbGQubGFiZWwgPSAnVGV4dCBmaWVsZCc7CiAgVGV4dGZpZWxkLmtleWVkID0gdHJ1ZTsKICBUZXh0ZmllbGQuZW1wdHlWYWx1ZSA9ICcnOwogIFRleHRmaWVsZC5zYW5pdGl6ZVZhbHVlID0gKHsKICAgIHZhbHVlCiAgfSkgPT4gaXNBcnJheSQyKHZhbHVlKSB8fCBpc09iamVjdCh2YWx1ZSkgPyAnJyA6IFN0cmluZyh2YWx1ZSk7CgogIGNvbnN0IHR5cGUgPSAndGV4dGFyZWEnOwogIGZ1bmN0aW9uIFRleHRhcmVhKHByb3BzKSB7CiAgICBjb25zdCB7CiAgICAgIGRpc2FibGVkLAogICAgICBlcnJvcnMgPSBbXSwKICAgICAgZmllbGQsCiAgICAgIHZhbHVlID0gJycKICAgIH0gPSBwcm9wczsKICAgIGNvbnN0IHsKICAgICAgZGVzY3JpcHRpb24sCiAgICAgIGlkLAogICAgICBsYWJlbCwKICAgICAgdmFsaWRhdGUgPSB7fQogICAgfSA9IGZpZWxkOwogICAgY29uc3QgewogICAgICByZXF1aXJlZAogICAgfSA9IHZhbGlkYXRlOwogICAgY29uc3QgdGV4dGFyZWFSZWYgPSBzKCk7CiAgICBjb25zdCBvbklucHV0ID0gKHsKICAgICAgdGFyZ2V0CiAgICB9KSA9PiB7CiAgICAgIHByb3BzLm9uQ2hhbmdlKHsKICAgICAgICBmaWVsZCwKICAgICAgICB2YWx1ZTogdGFyZ2V0LnZhbHVlCiAgICAgIH0pOwogICAgfTsKICAgIGNvbnN0IGF1dG9TaXplVGV4dGFyZWEgPSBBJDEodGV4dGFyZWEgPT4gewogICAgICAvLyBFbnN1cmVzIHRoZSB0ZXh0YXJlYSBzaHJpbmtzIGJhY2ssIGFuZCBpbXByb3ZlcyByZXNpemluZyBiZWhhdmlvciBjb25zaXN0ZW5jeQogICAgICB0ZXh0YXJlYS5zdHlsZS5oZWlnaHQgPSAnMHB4JzsKICAgICAgY29uc3QgY29tcHV0ZWQgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0ZXh0YXJlYSk7CiAgICAgIGNvbnN0IGNhbGN1bGF0ZWRIZWlnaHQgPSBwYXJzZUludChjb21wdXRlZC5nZXRQcm9wZXJ0eVZhbHVlKCdib3JkZXItdG9wLXdpZHRoJykpICsgcGFyc2VJbnQoY29tcHV0ZWQuZ2V0UHJvcGVydHlWYWx1ZSgncGFkZGluZy10b3AnKSkgKyB0ZXh0YXJlYS5zY3JvbGxIZWlnaHQgKyBwYXJzZUludChjb21wdXRlZC5nZXRQcm9wZXJ0eVZhbHVlKCdwYWRkaW5nLWJvdHRvbScpKSArIHBhcnNlSW50KGNvbXB1dGVkLmdldFByb3BlcnR5VmFsdWUoJ2JvcmRlci1ib3R0b20td2lkdGgnKSk7CiAgICAgIGNvbnN0IG1pbkhlaWdodCA9IDc1OwogICAgICBjb25zdCBtYXhIZWlnaHQgPSAzNTA7CiAgICAgIGNvbnN0IGRpc3BsYXlIZWlnaHQgPSBNYXRoLm1heChNYXRoLm1pbihjYWxjdWxhdGVkSGVpZ2h0LCBtYXhIZWlnaHQpLCBtaW5IZWlnaHQpOwogICAgICB0ZXh0YXJlYS5zdHlsZS5oZWlnaHQgPSBgJHtkaXNwbGF5SGVpZ2h0fXB4YDsKCiAgICAgIC8vIE92ZXJmbG93IGlzIGhpZGRlbiBieSBkZWZhdWx0IHRvIGhpZGUgc2Nyb2xsYmFyIGZsaWNrZXJpbmcKICAgICAgdGV4dGFyZWEuc3R5bGUub3ZlcmZsb3cgPSBjYWxjdWxhdGVkSGVpZ2h0ID4gbWF4SGVpZ2h0ID8gJ3Zpc2libGUnIDogJ2hpZGRlbic7CiAgICB9LCBbXSk7CiAgICB5KCgpID0+IHsKICAgICAgYXV0b1NpemVUZXh0YXJlYSh0ZXh0YXJlYVJlZi5jdXJyZW50KTsKICAgIH0sIFthdXRvU2l6ZVRleHRhcmVhLCB2YWx1ZV0pOwogICAgY29uc3QgewogICAgICBmb3JtSWQKICAgIH0gPSBGJDEoRm9ybUNvbnRleHQpOwogICAgcmV0dXJuIGUkMigiZGl2IiwgewogICAgICBjbGFzczogZm9ybUZpZWxkQ2xhc3Nlcyh0eXBlLCB7CiAgICAgICAgZXJyb3JzLAogICAgICAgIGRpc2FibGVkCiAgICAgIH0pLAogICAgICBjaGlsZHJlbjogW2UkMihMYWJlbCwgewogICAgICAgIGlkOiBwcmVmaXhJZChpZCwgZm9ybUlkKSwKICAgICAgICBsYWJlbDogbGFiZWwsCiAgICAgICAgcmVxdWlyZWQ6IHJlcXVpcmVkCiAgICAgIH0pLCBlJDIoInRleHRhcmVhIiwgewogICAgICAgIGNsYXNzOiAiZmpzLXRleHRhcmVhIiwKICAgICAgICBkaXNhYmxlZDogZGlzYWJsZWQsCiAgICAgICAgaWQ6IHByZWZpeElkKGlkLCBmb3JtSWQpLAogICAgICAgIG9uSW5wdXQ6IG9uSW5wdXQsCiAgICAgICAgdmFsdWU6IHZhbHVlLAogICAgICAgIHJlZjogdGV4dGFyZWFSZWYKICAgICAgfSksIGUkMihEZXNjcmlwdGlvbiwgewogICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbgogICAgICB9KSwgZSQyKEVycm9ycywgewogICAgICAgIGVycm9yczogZXJyb3JzCiAgICAgIH0pXQogICAgfSk7CiAgfQogIFRleHRhcmVhLmNyZWF0ZSA9IGZ1bmN0aW9uIChvcHRpb25zID0ge30pIHsKICAgIHJldHVybiB7CiAgICAgIC4uLm9wdGlvbnMKICAgIH07CiAgfTsKICBUZXh0YXJlYS50eXBlID0gdHlwZTsKICBUZXh0YXJlYS5sYWJlbCA9ICdUZXh0IGFyZWEnOwogIFRleHRhcmVhLmtleWVkID0gdHJ1ZTsKICBUZXh0YXJlYS5lbXB0eVZhbHVlID0gJyc7CiAgVGV4dGFyZWEuc2FuaXRpemVWYWx1ZSA9ICh7CiAgICB2YWx1ZQogIH0pID0+IGlzQXJyYXkkMih2YWx1ZSkgfHwgaXNPYmplY3QodmFsdWUpID8gJycgOiBTdHJpbmcodmFsdWUpOwoKICBjb25zdCBmb3JtRmllbGRzID0gW0J1dHRvbiwgQ2hlY2tib3gsIENoZWNrbGlzdCwgRGVmYXVsdCwgSW1hZ2UsIE51bWJlcmZpZWxkLCBEYXRldGltZSwgUmFkaW8sIFNlbGVjdCwgVGFnbGlzdCwgVGV4dCwgVGV4dGZpZWxkLCBUZXh0YXJlYV07CgogIGNsYXNzIEZvcm1GaWVsZHMgewogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHRoaXMuX2Zvcm1GaWVsZHMgPSB7fTsKICAgICAgZm9ybUZpZWxkcy5mb3JFYWNoKGZvcm1GaWVsZCA9PiB7CiAgICAgICAgY29uc3QgewogICAgICAgICAgdHlwZQogICAgICAgIH0gPSBmb3JtRmllbGQ7CiAgICAgICAgdGhpcy5yZWdpc3Rlcih0eXBlLCBmb3JtRmllbGQpOwogICAgICB9KTsKICAgIH0KICAgIHJlZ2lzdGVyKHR5cGUsIGZvcm1GaWVsZCkgewogICAgICB0aGlzLl9mb3JtRmllbGRzW3R5cGVdID0gZm9ybUZpZWxkOwogICAgfQogICAgZ2V0KHR5cGUpIHsKICAgICAgcmV0dXJuIHRoaXMuX2Zvcm1GaWVsZHNbdHlwZV07CiAgICB9CiAgfQoKICBmdW5jdGlvbiBSZW5kZXJlcihjb25maWcsIGV2ZW50QnVzLCBmb3JtLCBpbmplY3RvcikgewogICAgY29uc3QgQXBwID0gKCkgPT4gewogICAgICBjb25zdCBbc3RhdGUsIHNldFN0YXRlXSA9IGwkMShmb3JtLl9nZXRTdGF0ZSgpKTsKICAgICAgY29uc3QgZm9ybUNvbnRleHQgPSB7CiAgICAgICAgZ2V0U2VydmljZSh0eXBlLCBzdHJpY3QgPSB0cnVlKSB7CiAgICAgICAgICByZXR1cm4gaW5qZWN0b3IuZ2V0KHR5cGUsIHN0cmljdCk7CiAgICAgICAgfSwKICAgICAgICBmb3JtSWQ6IGZvcm0uX2lkCiAgICAgIH07CiAgICAgIGV2ZW50QnVzLm9uKCdjaGFuZ2VkJywgbmV3U3RhdGUgPT4gewogICAgICAgIHNldFN0YXRlKG5ld1N0YXRlKTsKICAgICAgfSk7CiAgICAgIGNvbnN0IG9uQ2hhbmdlID0gQSQxKHVwZGF0ZSA9PiBmb3JtLl91cGRhdGUodXBkYXRlKSwgW2Zvcm1dKTsKICAgICAgY29uc3QgewogICAgICAgIHByb3BlcnRpZXMKICAgICAgfSA9IHN0YXRlOwogICAgICBjb25zdCB7CiAgICAgICAgcmVhZE9ubHkKICAgICAgfSA9IHByb3BlcnRpZXM7CiAgICAgIGNvbnN0IG9uU3VibWl0ID0gQSQxKCgpID0+IHsKICAgICAgICBpZiAoIXJlYWRPbmx5KSB7CiAgICAgICAgICBmb3JtLnN1Ym1pdCgpOwogICAgICAgIH0KICAgICAgfSwgW2Zvcm0sIHJlYWRPbmx5XSk7CiAgICAgIGNvbnN0IG9uUmVzZXQgPSBBJDEoKCkgPT4gZm9ybS5yZXNldCgpLCBbZm9ybV0pOwogICAgICBjb25zdCB7CiAgICAgICAgc2NoZW1hCiAgICAgIH0gPSBzdGF0ZTsKICAgICAgaWYgKCFzY2hlbWEpIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQogICAgICByZXR1cm4gZSQyKEZvcm1Db250ZXh0LlByb3ZpZGVyLCB7CiAgICAgICAgdmFsdWU6IGZvcm1Db250ZXh0LAogICAgICAgIGNoaWxkcmVuOiBlJDIoRm9ybUNvbXBvbmVudCwgewogICAgICAgICAgb25DaGFuZ2U6IG9uQ2hhbmdlLAogICAgICAgICAgb25TdWJtaXQ6IG9uU3VibWl0LAogICAgICAgICAgb25SZXNldDogb25SZXNldAogICAgICAgIH0pCiAgICAgIH0pOwogICAgfTsKICAgIGNvbnN0IHsKICAgICAgY29udGFpbmVyCiAgICB9ID0gY29uZmlnOwogICAgZXZlbnRCdXMub24oJ2Zvcm0uaW5pdCcsICgpID0+IHsKICAgICAgUyQxKGUkMihBcHAsIHt9KSwgY29udGFpbmVyKTsKICAgIH0pOwogICAgZXZlbnRCdXMub24oJ2Zvcm0uZGVzdHJveScsICgpID0+IHsKICAgICAgUyQxKG51bGwsIGNvbnRhaW5lcik7CiAgICB9KTsKICB9CiAgUmVuZGVyZXIuJGluamVjdCA9IFsnY29uZmlnLnJlbmRlcmVyJywgJ2V2ZW50QnVzJywgJ2Zvcm0nLCAnaW5qZWN0b3InXTsKCiAgdmFyIHJlbmRlck1vZHVsZSA9IHsKICAgIF9faW5pdF9fOiBbJ2Zvcm1GaWVsZHMnLCAncmVuZGVyZXInXSwKICAgIGZvcm1GaWVsZHM6IFsndHlwZScsIEZvcm1GaWVsZHNdLAogICAgcmVuZGVyZXI6IFsndHlwZScsIFJlbmRlcmVyXQogIH07CgogIHZhciBjb3JlID0gewogICAgX19kZXBlbmRzX186IFtpbXBvcnRNb2R1bGUsIHJlbmRlck1vZHVsZV0sCiAgICBjb25kaXRpb25DaGVja2VyOiBbJ3R5cGUnLCBDb25kaXRpb25DaGVja2VyXSwKICAgIGV2ZW50QnVzOiBbJ3R5cGUnLCBFdmVudEJ1c10sCiAgICBmb3JtRmllbGRSZWdpc3RyeTogWyd0eXBlJywgRm9ybUZpZWxkUmVnaXN0cnldLAogICAgdmFsaWRhdG9yOiBbJ3R5cGUnLCBWYWxpZGF0b3JdCiAgfTsKCiAgLyoqDQogICAqIEB0eXBlZGVmIHsgaW1wb3J0KCcuL3R5cGVzJykuSW5qZWN0b3IgfSBJbmplY3Rvcg0KICAgKiBAdHlwZWRlZiB7IGltcG9ydCgnLi90eXBlcycpLkRhdGEgfSBEYXRhDQogICAqIEB0eXBlZGVmIHsgaW1wb3J0KCcuL3R5cGVzJykuRXJyb3JzIH0gRXJyb3JzDQogICAqIEB0eXBlZGVmIHsgaW1wb3J0KCcuL3R5cGVzJykuU2NoZW1hIH0gU2NoZW1hDQogICAqIEB0eXBlZGVmIHsgaW1wb3J0KCcuL3R5cGVzJykuRm9ybVByb3BlcnRpZXMgfSBGb3JtUHJvcGVydGllcw0KICAgKiBAdHlwZWRlZiB7IGltcG9ydCgnLi90eXBlcycpLkZvcm1Qcm9wZXJ0eSB9IEZvcm1Qcm9wZXJ0eQ0KICAgKiBAdHlwZWRlZiB7IGltcG9ydCgnLi90eXBlcycpLkZvcm1FdmVudCB9IEZvcm1FdmVudA0KICAgKiBAdHlwZWRlZiB7IGltcG9ydCgnLi90eXBlcycpLkZvcm1PcHRpb25zIH0gRm9ybU9wdGlvbnMNCiAgICoNCiAgICogQHR5cGVkZWYgeyB7DQogICAqICAgZGF0YTogRGF0YSwNCiAgICogICBpbml0aWFsRGF0YTogRGF0YSwNCiAgICogICBlcnJvcnM6IEVycm9ycywNCiAgICogICBwcm9wZXJ0aWVzOiBGb3JtUHJvcGVydGllcywNCiAgICogICBzY2hlbWE6IFNjaGVtYQ0KICAgKiB9IH0gU3RhdGUNCiAgICoNCiAgICogQHR5cGVkZWYgeyAodHlwZTpGb3JtRXZlbnQsIHByaW9yaXR5Om51bWJlciwgaGFuZGxlcjpGdW5jdGlvbikgPT4gdm9pZCB9IE9uRXZlbnRXaXRoUHJpb3JpdHkNCiAgICogQHR5cGVkZWYgeyAodHlwZTpGb3JtRXZlbnQsIGhhbmRsZXI6RnVuY3Rpb24pID0+IHZvaWQgfSBPbkV2ZW50V2l0aE91dFByaW9yaXR5DQogICAqIEB0eXBlZGVmIHsgT25FdmVudFdpdGhQcmlvcml0eSAmIE9uRXZlbnRXaXRoT3V0UHJpb3JpdHkgfSBPbkV2ZW50VHlwZQ0KICAgKi8KCiAgY29uc3QgaWRzID0gbmV3IElkcyhbMzIsIDM2LCAxXSk7CgogIC8qKg0KICAgKiBUaGUgZm9ybS4NCiAgICovCiAgY2xhc3MgRm9ybSB7CiAgICAvKioNCiAgICAgKiBAY29uc3RydWN0b3INCiAgICAgKiBAcGFyYW0ge0Zvcm1PcHRpb25zfSBvcHRpb25zDQogICAgICovCiAgICBjb25zdHJ1Y3RvcihvcHRpb25zID0ge30pIHsKICAgICAgLyoqDQogICAgICAgKiBAcHVibGljDQogICAgICAgKiBAdHlwZSB7T25FdmVudFR5cGV9DQogICAgICAgKi8KICAgICAgdGhpcy5vbiA9IHRoaXMuX29uRXZlbnQ7CgogICAgICAvKioNCiAgICAgICAqIEBwdWJsaWMNCiAgICAgICAqIEB0eXBlIHtTdHJpbmd9DQogICAgICAgKi8KICAgICAgdGhpcy5faWQgPSBpZHMubmV4dCgpOwoKICAgICAgLyoqDQogICAgICAgKiBAcHJpdmF0ZQ0KICAgICAgICogQHR5cGUge0VsZW1lbnR9DQogICAgICAgKi8KICAgICAgdGhpcy5fY29udGFpbmVyID0gY3JlYXRlRm9ybUNvbnRhaW5lcigpOwogICAgICBjb25zdCB7CiAgICAgICAgY29udGFpbmVyLAogICAgICAgIGluamVjdG9yID0gdGhpcy5fY3JlYXRlSW5qZWN0b3Iob3B0aW9ucywgdGhpcy5fY29udGFpbmVyKSwKICAgICAgICBwcm9wZXJ0aWVzID0ge30KICAgICAgfSA9IG9wdGlvbnM7CgogICAgICAvKioNCiAgICAgICAqIEBwcml2YXRlDQogICAgICAgKiBAdHlwZSB7U3RhdGV9DQogICAgICAgKi8KICAgICAgdGhpcy5fc3RhdGUgPSB7CiAgICAgICAgaW5pdGlhbERhdGE6IG51bGwsCiAgICAgICAgZGF0YTogbnVsbCwKICAgICAgICBwcm9wZXJ0aWVzLAogICAgICAgIGVycm9yczoge30sCiAgICAgICAgc2NoZW1hOiBudWxsCiAgICAgIH07CiAgICAgIHRoaXMuZ2V0ID0gaW5qZWN0b3IuZ2V0OwogICAgICB0aGlzLmludm9rZSA9IGluamVjdG9yLmludm9rZTsKICAgICAgdGhpcy5nZXQoJ2V2ZW50QnVzJykuZmlyZSgnZm9ybS5pbml0Jyk7CiAgICAgIGlmIChjb250YWluZXIpIHsKICAgICAgICB0aGlzLmF0dGFjaFRvKGNvbnRhaW5lcik7CiAgICAgIH0KICAgIH0KICAgIGNsZWFyKCkgewogICAgICAvLyBjbGVhciBmb3JtIHNlcnZpY2VzCiAgICAgIHRoaXMuX2VtaXQoJ2RpYWdyYW0uY2xlYXInKTsKCiAgICAgIC8vIGNsZWFyIGRpYWdyYW0gc2VydmljZXMgKGUuZy4gRXZlbnRCdXMpCiAgICAgIHRoaXMuX2VtaXQoJ2Zvcm0uY2xlYXInKTsKICAgIH0KCiAgICAvKioNCiAgICAgKiBEZXN0cm95IHRoZSBmb3JtLCByZW1vdmluZyBpdCBmcm9tIERPTSwNCiAgICAgKiBpZiBhdHRhY2hlZC4NCiAgICAgKi8KICAgIGRlc3Ryb3koKSB7CiAgICAgIC8vIGRlc3Ryb3kgZm9ybSBzZXJ2aWNlcwogICAgICB0aGlzLmdldCgnZXZlbnRCdXMnKS5maXJlKCdmb3JtLmRlc3Ryb3knKTsKCiAgICAgIC8vIGRlc3Ryb3kgZGlhZ3JhbSBzZXJ2aWNlcyAoZS5nLiBFdmVudEJ1cykKICAgICAgdGhpcy5nZXQoJ2V2ZW50QnVzJykuZmlyZSgnZGlhZ3JhbS5kZXN0cm95Jyk7CiAgICAgIHRoaXMuX2RldGFjaChmYWxzZSk7CiAgICB9CgogICAgLyoqDQogICAgICogT3BlbiBhIGZvcm0gc2NoZW1hIHdpdGggdGhlIGdpdmVuIGluaXRpYWwgZGF0YS4NCiAgICAgKg0KICAgICAqIEBwYXJhbSB7U2NoZW1hfSBzY2hlbWENCiAgICAgKiBAcGFyYW0ge0RhdGF9IFtkYXRhXQ0KICAgICAqDQogICAgICogQHJldHVybiBQcm9taXNlPHsgd2FybmluZ3M6IEFycmF5PGFueT4gfT4NCiAgICAgKi8KICAgIGltcG9ydFNjaGVtYShzY2hlbWEsIGRhdGEgPSB7fSkgewogICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgICAgIHRyeSB7CiAgICAgICAgICB0aGlzLmNsZWFyKCk7CiAgICAgICAgICBjb25zdCB7CiAgICAgICAgICAgIHNjaGVtYTogaW1wb3J0ZWRTY2hlbWEsCiAgICAgICAgICAgIGRhdGE6IGluaXRpYWxpemVkRGF0YSwKICAgICAgICAgICAgd2FybmluZ3MKICAgICAgICAgIH0gPSB0aGlzLmdldCgnaW1wb3J0ZXInKS5pbXBvcnRTY2hlbWEoc2NoZW1hLCBkYXRhKTsKICAgICAgICAgIHRoaXMuX3NldFN0YXRlKHsKICAgICAgICAgICAgZGF0YTogaW5pdGlhbGl6ZWREYXRhLAogICAgICAgICAgICBlcnJvcnM6IHt9LAogICAgICAgICAgICBzY2hlbWE6IGltcG9ydGVkU2NoZW1hLAogICAgICAgICAgICBpbml0aWFsRGF0YTogY2xvbmUoaW5pdGlhbGl6ZWREYXRhKQogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLl9lbWl0KCdpbXBvcnQuZG9uZScsIHsKICAgICAgICAgICAgd2FybmluZ3MKICAgICAgICAgIH0pOwogICAgICAgICAgcmV0dXJuIHJlc29sdmUoewogICAgICAgICAgICB3YXJuaW5ncwogICAgICAgICAgfSk7CiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgIHRoaXMuX2VtaXQoJ2ltcG9ydC5kb25lJywgewogICAgICAgICAgICBlcnJvciwKICAgICAgICAgICAgd2FybmluZ3M6IGVycm9yLndhcm5pbmdzIHx8IFtdCiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybiByZWplY3QoZXJyb3IpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CgogICAgLyoqDQogICAgICogU3VibWl0IHRoZSBmb3JtLCB0cmlnZ2VyaW5nIGFsbCBmaWVsZCB2YWxpZGF0aW9ucy4NCiAgICAgKg0KICAgICAqIEByZXR1cm5zIHsgeyBkYXRhOiBEYXRhLCBlcnJvcnM6IEVycm9ycyB9IH0NCiAgICAgKi8KICAgIHN1Ym1pdCgpIHsKICAgICAgY29uc3QgewogICAgICAgIHByb3BlcnRpZXMKICAgICAgfSA9IHRoaXMuX2dldFN0YXRlKCk7CiAgICAgIGlmIChwcm9wZXJ0aWVzLnJlYWRPbmx5KSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdmb3JtIGlzIHJlYWQtb25seScpOwogICAgICB9CiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLl9nZXRTdWJtaXREYXRhKCk7CiAgICAgIGNvbnN0IGVycm9ycyA9IHRoaXMudmFsaWRhdGUoKTsKICAgICAgY29uc3QgZmlsdGVyZWRFcnJvcnMgPSB0aGlzLl9hcHBseUNvbmRpdGlvbnMoZXJyb3JzLCBkYXRhKTsKICAgICAgY29uc3QgcmVzdWx0ID0gewogICAgICAgIGRhdGEsCiAgICAgICAgZXJyb3JzOiBmaWx0ZXJlZEVycm9ycwogICAgICB9OwogICAgICB0aGlzLl9lbWl0KCdzdWJtaXQnLCByZXN1bHQpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgcmVzZXQoKSB7CiAgICAgIHRoaXMuX2VtaXQoJ3Jlc2V0Jyk7CiAgICAgIHRoaXMuX3NldFN0YXRlKHsKICAgICAgICBkYXRhOiBjbG9uZSh0aGlzLl9zdGF0ZS5pbml0aWFsRGF0YSksCiAgICAgICAgZXJyb3JzOiB7fQogICAgICB9KTsKICAgIH0KCiAgICAvKioNCiAgICAgKiBAcmV0dXJucyB7RXJyb3JzfQ0KICAgICAqLwogICAgdmFsaWRhdGUoKSB7CiAgICAgIGNvbnN0IGZvcm1GaWVsZFJlZ2lzdHJ5ID0gdGhpcy5nZXQoJ2Zvcm1GaWVsZFJlZ2lzdHJ5JyksCiAgICAgICAgdmFsaWRhdG9yID0gdGhpcy5nZXQoJ3ZhbGlkYXRvcicpOwogICAgICBjb25zdCB7CiAgICAgICAgZGF0YQogICAgICB9ID0gdGhpcy5fZ2V0U3RhdGUoKTsKICAgICAgY29uc3QgZXJyb3JzID0gZm9ybUZpZWxkUmVnaXN0cnkuZ2V0QWxsKCkucmVkdWNlKChlcnJvcnMsIGZpZWxkKSA9PiB7CiAgICAgICAgY29uc3QgewogICAgICAgICAgZGlzYWJsZWQsCiAgICAgICAgICBfcGF0aAogICAgICAgIH0gPSBmaWVsZDsKICAgICAgICBpZiAoZGlzYWJsZWQpIHsKICAgICAgICAgIHJldHVybiBlcnJvcnM7CiAgICAgICAgfQogICAgICAgIGNvbnN0IHZhbHVlID0gZ2V0KGRhdGEsIF9wYXRoKTsKICAgICAgICBjb25zdCBmaWVsZEVycm9ycyA9IHZhbGlkYXRvci52YWxpZGF0ZUZpZWxkKGZpZWxkLCB2YWx1ZSk7CiAgICAgICAgcmV0dXJuIHNldChlcnJvcnMsIFtwYXRoU3RyaW5naWZ5KF9wYXRoKV0sIGZpZWxkRXJyb3JzLmxlbmd0aCA/IGZpZWxkRXJyb3JzIDogdW5kZWZpbmVkKTsKICAgICAgfSwgLyoqIEB0eXBlIHtFcnJvcnN9ICove30pOwogICAgICB0aGlzLl9zZXRTdGF0ZSh7CiAgICAgICAgZXJyb3JzCiAgICAgIH0pOwogICAgICByZXR1cm4gZXJyb3JzOwogICAgfQoKICAgIC8qKg0KICAgICAqIEBwYXJhbSB7RWxlbWVudHxzdHJpbmd9IHBhcmVudE5vZGUNCiAgICAgKi8KICAgIGF0dGFjaFRvKHBhcmVudE5vZGUpIHsKICAgICAgaWYgKCFwYXJlbnROb2RlKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdwYXJlbnROb2RlIHJlcXVpcmVkJyk7CiAgICAgIH0KICAgICAgdGhpcy5kZXRhY2goKTsKICAgICAgaWYgKGlzU3RyaW5nJDIocGFyZW50Tm9kZSkpIHsKICAgICAgICBwYXJlbnROb2RlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihwYXJlbnROb2RlKTsKICAgICAgfQogICAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLl9jb250YWluZXI7CiAgICAgIHBhcmVudE5vZGUuYXBwZW5kQ2hpbGQoY29udGFpbmVyKTsKICAgICAgdGhpcy5fZW1pdCgnYXR0YWNoJyk7CiAgICB9CiAgICBkZXRhY2goKSB7CiAgICAgIHRoaXMuX2RldGFjaCgpOwogICAgfQoKICAgIC8qKg0KICAgICAqIEBwcml2YXRlDQogICAgICoNCiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtlbWl0XQ0KICAgICAqLwogICAgX2RldGFjaChlbWl0ID0gdHJ1ZSkgewogICAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLl9jb250YWluZXIsCiAgICAgICAgcGFyZW50Tm9kZSA9IGNvbnRhaW5lci5wYXJlbnROb2RlOwogICAgICBpZiAoIXBhcmVudE5vZGUpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKGVtaXQpIHsKICAgICAgICB0aGlzLl9lbWl0KCdkZXRhY2gnKTsKICAgICAgfQogICAgICBwYXJlbnROb2RlLnJlbW92ZUNoaWxkKGNvbnRhaW5lcik7CiAgICB9CgogICAgLyoqDQogICAgICogQHBhcmFtIHtGb3JtUHJvcGVydHl9IHByb3BlcnR5DQogICAgICogQHBhcmFtIHthbnl9IHZhbHVlDQogICAgICovCiAgICBzZXRQcm9wZXJ0eShwcm9wZXJ0eSwgdmFsdWUpIHsKICAgICAgY29uc3QgcHJvcGVydGllcyA9IHNldCh0aGlzLl9nZXRTdGF0ZSgpLnByb3BlcnRpZXMsIFtwcm9wZXJ0eV0sIHZhbHVlKTsKICAgICAgdGhpcy5fc2V0U3RhdGUoewogICAgICAgIHByb3BlcnRpZXMKICAgICAgfSk7CiAgICB9CgogICAgLyoqDQogICAgICogQHBhcmFtIHtGb3JtRXZlbnR9IHR5cGUNCiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyDQogICAgICovCiAgICBvZmYodHlwZSwgaGFuZGxlcikgewogICAgICB0aGlzLmdldCgnZXZlbnRCdXMnKS5vZmYodHlwZSwgaGFuZGxlcik7CiAgICB9CgogICAgLyoqDQogICAgICogQHByaXZhdGUNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7Rm9ybU9wdGlvbnN9IG9wdGlvbnMNCiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGNvbnRhaW5lcg0KICAgICAqDQogICAgICogQHJldHVybnMge0luamVjdG9yfQ0KICAgICAqLwogICAgX2NyZWF0ZUluamVjdG9yKG9wdGlvbnMsIGNvbnRhaW5lcikgewogICAgICBjb25zdCB7CiAgICAgICAgYWRkaXRpb25hbE1vZHVsZXMgPSBbXSwKICAgICAgICBtb2R1bGVzID0gW10KICAgICAgfSA9IG9wdGlvbnM7CiAgICAgIGNvbnN0IGNvbmZpZyA9IHsKICAgICAgICByZW5kZXJlcjogewogICAgICAgICAgY29udGFpbmVyCiAgICAgICAgfQogICAgICB9OwogICAgICByZXR1cm4gY3JlYXRlSW5qZWN0b3IoW3sKICAgICAgICBjb25maWc6IFsndmFsdWUnLCBjb25maWddCiAgICAgIH0sIHsKICAgICAgICBmb3JtOiBbJ3ZhbHVlJywgdGhpc10KICAgICAgfSwgY29yZSwgLi4ubW9kdWxlcywgLi4uYWRkaXRpb25hbE1vZHVsZXNdKTsKICAgIH0KCiAgICAvKioNCiAgICAgKiBAcHJpdmF0ZQ0KICAgICAqLwogICAgX2VtaXQodHlwZSwgZGF0YSkgewogICAgICB0aGlzLmdldCgnZXZlbnRCdXMnKS5maXJlKHR5cGUsIGRhdGEpOwogICAgfQoKICAgIC8qKg0KICAgICAqIEBpbnRlcm5hbA0KICAgICAqDQogICAgICogQHBhcmFtIHsgeyBhZGQ/OiBib29sZWFuLCBmaWVsZDogYW55LCByZW1vdmU/OiBudW1iZXIsIHZhbHVlPzogYW55IH0gfSB1cGRhdGUNCiAgICAgKi8KICAgIF91cGRhdGUodXBkYXRlKSB7CiAgICAgIGNvbnN0IHsKICAgICAgICBmaWVsZCwKICAgICAgICB2YWx1ZQogICAgICB9ID0gdXBkYXRlOwogICAgICBjb25zdCB7CiAgICAgICAgX3BhdGgKICAgICAgfSA9IGZpZWxkOwogICAgICBsZXQgewogICAgICAgIGRhdGEsCiAgICAgICAgZXJyb3JzCiAgICAgIH0gPSB0aGlzLl9nZXRTdGF0ZSgpOwogICAgICBjb25zdCB2YWxpZGF0b3IgPSB0aGlzLmdldCgndmFsaWRhdG9yJyk7CiAgICAgIGNvbnN0IGZpZWxkRXJyb3JzID0gdmFsaWRhdG9yLnZhbGlkYXRlRmllbGQoZmllbGQsIHZhbHVlKTsKICAgICAgc2V0KGRhdGEsIF9wYXRoLCB2YWx1ZSk7CiAgICAgIHNldChlcnJvcnMsIFtwYXRoU3RyaW5naWZ5KF9wYXRoKV0sIGZpZWxkRXJyb3JzLmxlbmd0aCA/IGZpZWxkRXJyb3JzIDogdW5kZWZpbmVkKTsKICAgICAgdGhpcy5fc2V0U3RhdGUoewogICAgICAgIGRhdGE6IGNsb25lKGRhdGEpLAogICAgICAgIGVycm9yczogY2xvbmUoZXJyb3JzKQogICAgICB9KTsKICAgIH0KCiAgICAvKioNCiAgICAgKiBAaW50ZXJuYWwNCiAgICAgKi8KICAgIF9nZXRTdGF0ZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuX3N0YXRlOwogICAgfQoKICAgIC8qKg0KICAgICAqIEBpbnRlcm5hbA0KICAgICAqLwogICAgX3NldFN0YXRlKHN0YXRlKSB7CiAgICAgIHRoaXMuX3N0YXRlID0gewogICAgICAgIC4uLnRoaXMuX3N0YXRlLAogICAgICAgIC4uLnN0YXRlCiAgICAgIH07CiAgICAgIHRoaXMuX2VtaXQoJ2NoYW5nZWQnLCB0aGlzLl9nZXRTdGF0ZSgpKTsKICAgIH0KCiAgICAvKioNCiAgICAgKiBAaW50ZXJuYWwNCiAgICAgKi8KICAgIF9vbkV2ZW50KHR5cGUsIHByaW9yaXR5LCBoYW5kbGVyKSB7CiAgICAgIHRoaXMuZ2V0KCdldmVudEJ1cycpLm9uKHR5cGUsIHByaW9yaXR5LCBoYW5kbGVyKTsKICAgIH0KCiAgICAvKioNCiAgICAgKiBAaW50ZXJuYWwNCiAgICAgKi8KICAgIF9nZXRTdWJtaXREYXRhKCkgewogICAgICBjb25zdCBmb3JtRmllbGRSZWdpc3RyeSA9IHRoaXMuZ2V0KCdmb3JtRmllbGRSZWdpc3RyeScpOwogICAgICBjb25zdCBmb3JtRGF0YSA9IHRoaXMuX2dldFN0YXRlKCkuZGF0YTsKICAgICAgY29uc3Qgc3VibWl0RGF0YSA9IGZvcm1GaWVsZFJlZ2lzdHJ5LmdldEFsbCgpLnJlZHVjZSgocHJldmlvdXMsIGZpZWxkKSA9PiB7CiAgICAgICAgY29uc3QgewogICAgICAgICAgZGlzYWJsZWQsCiAgICAgICAgICBfcGF0aAogICAgICAgIH0gPSBmaWVsZDsKCiAgICAgICAgLy8gZG8gbm90IHN1Ym1pdCBkaXNhYmxlZCBmb3JtIGZpZWxkcwogICAgICAgIGlmIChkaXNhYmxlZCB8fCAhX3BhdGgpIHsKICAgICAgICAgIHJldHVybiBwcmV2aW91czsKICAgICAgICB9CiAgICAgICAgY29uc3QgdmFsdWUgPSBnZXQoZm9ybURhdGEsIF9wYXRoKTsKICAgICAgICByZXR1cm4gewogICAgICAgICAgLi4ucHJldmlvdXMsCiAgICAgICAgICBbX3BhdGhbMF1dOiB2YWx1ZQogICAgICAgIH07CiAgICAgIH0sIHt9KTsKICAgICAgY29uc3QgZmlsdGVyZWRTdWJtaXREYXRhID0gdGhpcy5fYXBwbHlDb25kaXRpb25zKHN1Ym1pdERhdGEsIGZvcm1EYXRhKTsKICAgICAgcmV0dXJuIGZpbHRlcmVkU3VibWl0RGF0YTsKICAgIH0KCiAgICAvKioNCiAgICAgKiBAaW50ZXJuYWwNCiAgICAgKi8KICAgIF9hcHBseUNvbmRpdGlvbnModG9GaWx0ZXIsIGRhdGEpIHsKICAgICAgY29uc3QgY29uZGl0aW9uQ2hlY2tlciA9IHRoaXMuZ2V0KCdjb25kaXRpb25DaGVja2VyJyk7CiAgICAgIHJldHVybiBjb25kaXRpb25DaGVja2VyLmFwcGx5Q29uZGl0aW9ucyh0b0ZpbHRlciwgZGF0YSk7CiAgICB9CiAgfQoKICBjb25zdCBzY2hlbWFWZXJzaW9uID0gNjsKCiAgLyoqDQogICAqIEB0eXBlZGVmIHsgaW1wb3J0KCcuL3R5cGVzJykuQ3JlYXRlRm9ybU9wdGlvbnMgfSBDcmVhdGVGb3JtT3B0aW9ucw0KICAgKi8KCiAgLyoqDQogICAqIENyZWF0ZSBhIGZvcm0uDQogICAqDQogICAqIEBwYXJhbSB7Q3JlYXRlRm9ybU9wdGlvbnN9IG9wdGlvbnMNCiAgICoNCiAgICogQHJldHVybiB7UHJvbWlzZTxGb3JtPn0NCiAgICovCiAgZnVuY3Rpb24gY3JlYXRlRm9ybShvcHRpb25zKSB7CiAgICBjb25zdCB7CiAgICAgIGRhdGEsCiAgICAgIHNjaGVtYSwKICAgICAgLi4ucmVzdAogICAgfSA9IG9wdGlvbnM7CiAgICBjb25zdCBmb3JtID0gbmV3IEZvcm0ocmVzdCk7CiAgICByZXR1cm4gZm9ybS5pbXBvcnRTY2hlbWEoc2NoZW1hLCBkYXRhKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIGZvcm07CiAgICB9KTsKICB9CgogIGV4cG9ydHMuRm9ybSA9IEZvcm07CiAgZXhwb3J0cy5jcmVhdGVGb3JtID0gY3JlYXRlRm9ybTsKICBleHBvcnRzLmdldFNjaGVtYVZhcmlhYmxlcyA9IGdldFNjaGVtYVZhcmlhYmxlczsKICBleHBvcnRzLnNjaGVtYVZlcnNpb24gPSBzY2hlbWFWZXJzaW9uOwoKICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pOwoKfSkpKTsK</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPBody>
        <TcpPackets>
          <PacketInfo time="519321109" offset="0" length="586" />
          <PacketInfo time="519321125" offset="586" length="277870" />
        </TcpPackets>
      </HTTPResponse>
    </HTTPTask>
    <HTTPTask id="381" hostname="dev.bluealgo.com" path="https://dev.bluealgo.com/favicon.ico" url="https://dev.bluealgo.com/favicon.ico" ip="144.126.253.3" port="443" connectionId="32" origin="HTML" frame="1" startDateTime="2024-02-15T10:57:48.209+05:30" startTime="519321921" endTime="519321921">
      <HTTPRequest method="GET">
        <HTTPHeaders>
          <HTTPHeaderEntity name="sec-ch-ua" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ik5vdCBBKEJyYW5kIjt2PSI5OSIsICJHb29nbGUgQ2hyb21lIjt2PSIxMjEiLCAiQ2hyb21pdW0iO3Y9IjEyMSI=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="sec-ch-ua-mobile" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>PzA=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="User-Agent" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEyMS4wLjAuMCBTYWZhcmkvNTM3LjM2</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="sec-ch-ua-platform" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>IldpbmRvd3Mi</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aW1hZ2UvYXZpZixpbWFnZS93ZWJwLGltYWdlL2FwbmcsaW1hZ2Uvc3ZnK3htbCxpbWFnZS8qLCovKjtxPTAuOA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Sec-Fetch-Site" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>c2FtZS1vcmlnaW4=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Sec-Fetch-Mode" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bm8tY29ycw==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Sec-Fetch-Dest" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aW1hZ2U=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Referer" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cHM6Ly9kZXYuYmx1ZWFsZ28uY29tL3NtYXJ0Zm9ybXVwL2xvYWRpbmRleD9vcHBvcnR1bml0eUlkPTAwNjBvMDAwMDFlU0lKMEFBTyZjdXN0b21lcmlkPWN1c3QxMDA1JmFjY2Vzc3Rva2VuPXVYQ3haUktVLU1mMndpVGczX0E4ZFB1OTU3dGFMWHhQ</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Encoding" index="9">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Language" index="10">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZW4tVVMsZW47cT0wLjk=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Host" index="11">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZGV2LmJsdWVhbGdvLmNvbQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0VUIGh0dHBzOi8vZGV2LmJsdWVhbGdvLmNvbS9mYXZpY29uLmljbyBIVFRQLzEuMQ0Kc2VjLWNoLXVhOiAiTm90IEEoQnJhbmQiO3Y9Ijk5IiwgIkdvb2dsZSBDaHJvbWUiO3Y9IjEyMSIsICJDaHJvbWl1bSI7dj0iMTIxIg0Kc2VjLWNoLXVhLW1vYmlsZTogPzANClVzZXItQWdlbnQ6IE1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS8xMjEuMC4wLjAgU2FmYXJpLzUzNy4zNg0Kc2VjLWNoLXVhLXBsYXRmb3JtOiAiV2luZG93cyINCkFjY2VwdDogaW1hZ2UvYXZpZixpbWFnZS93ZWJwLGltYWdlL2FwbmcsaW1hZ2Uvc3ZnK3htbCxpbWFnZS8qLCovKjtxPTAuOA0KU2VjLUZldGNoLVNpdGU6IHNhbWUtb3JpZ2luDQpTZWMtRmV0Y2gtTW9kZTogbm8tY29ycw0KU2VjLUZldGNoLURlc3Q6IGltYWdlDQpSZWZlcmVyOiBodHRwczovL2Rldi5ibHVlYWxnby5jb20vc21hcnRmb3JtdXAvbG9hZGluZGV4P29wcG9ydHVuaXR5SWQ9MDA2MG8wMDAwMWVTSUowQUFPJmN1c3RvbWVyaWQ9Y3VzdDEwMDUmYWNjZXNzdG9rZW49dVhDeFpSS1UtTWYyd2lUZzNfQThkUHU5NTd0YUxYeFANCkFjY2VwdC1FbmNvZGluZzogZ3ppcCwgZGVmbGF0ZQ0KQWNjZXB0LUxhbmd1YWdlOiBlbi1VUyxlbjtxPTAuOQ0KSG9zdDogZGV2LmJsdWVhbGdvLmNvbQ0KDQo=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
      </HTTPRequest>
      <HTTPResponse>
        <contentLenght>1085</contentLenght>
        <HTTPHeaders>
          <HTTPHeaderEntity name="Date" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VGh1LCAxNSBGZWIgMjAyNCAwNToxODo1OCBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Type" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>dGV4dC9odG1sO2NoYXJzZXQ9dXRmLTg=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Length" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MTA4NQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Connection" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Language" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZW4=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Strict-Transport-Security" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bWF4LWFnZT0xNTcyNDgwMDsgaW5jbHVkZVN1YkRvbWFpbnM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SFRUUC8xLjEgNDA0IA0KRGF0ZTogVGh1LCAxNSBGZWIgMjAyNCAwNToxODo1OCBHTVQNCkNvbnRlbnQtVHlwZTogdGV4dC9odG1sO2NoYXJzZXQ9dXRmLTgNCkNvbnRlbnQtTGVuZ3RoOiAxMDg1DQpDb25uZWN0aW9uOiBrZWVwLWFsaXZlDQpDb250ZW50LUxhbmd1YWdlOiBlbg0KU3RyaWN0LVRyYW5zcG9ydC1TZWN1cml0eTogbWF4LWFnZT0xNTcyNDgwMDsgaW5jbHVkZVN1YkRvbWFpbnMNCg0K</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPBody>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>PCFkb2N0eXBlIGh0bWw+PGh0bWwgbGFuZz0iZW4iPjxoZWFkPjx0aXRsZT5IVFRQIFN0YXR1cyA0MDQg4oCTIE5vdCBGb3VuZDwvdGl0bGU+PHN0eWxlIHR5cGU9InRleHQvY3NzIj5oMSB7Zm9udC1mYW1pbHk6VGFob21hLEFyaWFsLHNhbnMtc2VyaWY7Y29sb3I6d2hpdGU7YmFja2dyb3VuZC1jb2xvcjojNTI1RDc2O2ZvbnQtc2l6ZToyMnB4O30gaDIge2ZvbnQtZmFtaWx5OlRhaG9tYSxBcmlhbCxzYW5zLXNlcmlmO2NvbG9yOndoaXRlO2JhY2tncm91bmQtY29sb3I6IzUyNUQ3Njtmb250LXNpemU6MTZweDt9IGgzIHtmb250LWZhbWlseTpUYWhvbWEsQXJpYWwsc2Fucy1zZXJpZjtjb2xvcjp3aGl0ZTtiYWNrZ3JvdW5kLWNvbG9yOiM1MjVENzY7Zm9udC1zaXplOjE0cHg7fSBib2R5IHtmb250LWZhbWlseTpUYWhvbWEsQXJpYWwsc2Fucy1zZXJpZjtjb2xvcjpibGFjaztiYWNrZ3JvdW5kLWNvbG9yOndoaXRlO30gYiB7Zm9udC1mYW1pbHk6VGFob21hLEFyaWFsLHNhbnMtc2VyaWY7Y29sb3I6d2hpdGU7YmFja2dyb3VuZC1jb2xvcjojNTI1RDc2O30gcCB7Zm9udC1mYW1pbHk6VGFob21hLEFyaWFsLHNhbnMtc2VyaWY7YmFja2dyb3VuZDp3aGl0ZTtjb2xvcjpibGFjaztmb250LXNpemU6MTJweDt9IGEge2NvbG9yOmJsYWNrO30gYS5uYW1lIHtjb2xvcjpibGFjazt9IC5saW5lIHtoZWlnaHQ6MXB4O2JhY2tncm91bmQtY29sb3I6IzUyNUQ3Njtib3JkZXI6bm9uZTt9PC9zdHlsZT48L2hlYWQ+PGJvZHk+PGgxPkhUVFAgU3RhdHVzIDQwNCDigJMgTm90IEZvdW5kPC9oMT48aHIgY2xhc3M9ImxpbmUiIC8+PHA+PGI+VHlwZTwvYj4gU3RhdHVzIFJlcG9ydDwvcD48cD48Yj5NZXNzYWdlPC9iPiAmIzQ3O2Zhdmljb24uaWNvPC9wPjxwPjxiPkRlc2NyaXB0aW9uPC9iPiBUaGUgb3JpZ2luIHNlcnZlciBkaWQgbm90IGZpbmQgYSBjdXJyZW50IHJlcHJlc2VudGF0aW9uIGZvciB0aGUgdGFyZ2V0IHJlc291cmNlIG9yIGlzIG5vdCB3aWxsaW5nIHRvIGRpc2Nsb3NlIHRoYXQgb25lIGV4aXN0cy48L3A+PGhyIGNsYXNzPSJsaW5lIiAvPjxoMz5BcGFjaGUgVG9tY2F0LzguNS40NTwvaDM+PC9ib2R5PjwvaHRtbD4=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPBody>
        <TcpPackets>
          <PacketInfo time="519321921" offset="0" length="225" />
          <PacketInfo time="519321921" offset="225" length="1085" />
        </TcpPackets>
      </HTTPResponse>
    </HTTPTask>
  </HTTPTask>
  <HTTPTask id="391" hostname="cdn.jsdelivr.net" path="https://cdn.jsdelivr.net/npm/intl-tel-input@18.2.1/build/img/flags.png?1" url="https://cdn.jsdelivr.net/npm/intl-tel-input@18.2.1/build/img/flags.png?1" ip="[2a04:4e42:42:0:0:0:0:485]" port="443" connectionId="34" origin="ExtraRes" frame="1" startDateTime="2024-02-15T10:57:48.217+05:30" startTime="519323000" endTime="519323000">
    <QueryString>
      <HTTPDataSet>
        <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
          <ActualData>MQ==</ActualData>
        </HTTPData>
      </HTTPDataSet>
      <IsExternalData>false</IsExternalData>
    </QueryString>
    <HTTPSplittedQueryStrings>
      <HTTPHeaderEntity name="" index="0">
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>MQ==</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </HTTPHeaderEntity>
    </HTTPSplittedQueryStrings>
    <HTTPRequest method="GET">
      <HTTPHeaders>
        <HTTPHeaderEntity name="sec-ch-ua" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ik5vdCBBKEJyYW5kIjt2PSI5OSIsICJHb29nbGUgQ2hyb21lIjt2PSIxMjEiLCAiQ2hyb21pdW0iO3Y9IjEyMSI=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="sec-ch-ua-mobile" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>PzA=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="User-Agent" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEyMS4wLjAuMCBTYWZhcmkvNTM3LjM2</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="sec-ch-ua-platform" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>IldpbmRvd3Mi</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aW1hZ2UvYXZpZixpbWFnZS93ZWJwLGltYWdlL2FwbmcsaW1hZ2Uvc3ZnK3htbCxpbWFnZS8qLCovKjtxPTAuOA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Sec-Fetch-Site" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Y3Jvc3Mtc2l0ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Sec-Fetch-Mode" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bm8tY29ycw==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Sec-Fetch-Dest" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aW1hZ2U=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Referer" index="8">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L25wbS9pbnRsLXRlbC1pbnB1dEAxOC4yLjEvYnVpbGQvY3NzL2ludGxUZWxJbnB1dC5taW4uY3Nz</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Encoding" index="9">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Language" index="10">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>ZW4tVVMsZW47cT0wLjk=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Host" index="11">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Y2RuLmpzZGVsaXZyLm5ldA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>R0VUIGh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vaW50bC10ZWwtaW5wdXRAMTguMi4xL2J1aWxkL2ltZy9mbGFncy5wbmc/MSBIVFRQLzEuMQ0Kc2VjLWNoLXVhOiAiTm90IEEoQnJhbmQiO3Y9Ijk5IiwgIkdvb2dsZSBDaHJvbWUiO3Y9IjEyMSIsICJDaHJvbWl1bSI7dj0iMTIxIg0Kc2VjLWNoLXVhLW1vYmlsZTogPzANClVzZXItQWdlbnQ6IE1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS8xMjEuMC4wLjAgU2FmYXJpLzUzNy4zNg0Kc2VjLWNoLXVhLXBsYXRmb3JtOiAiV2luZG93cyINCkFjY2VwdDogaW1hZ2UvYXZpZixpbWFnZS93ZWJwLGltYWdlL2FwbmcsaW1hZ2Uvc3ZnK3htbCxpbWFnZS8qLCovKjtxPTAuOA0KU2VjLUZldGNoLVNpdGU6IGNyb3NzLXNpdGUNClNlYy1GZXRjaC1Nb2RlOiBuby1jb3JzDQpTZWMtRmV0Y2gtRGVzdDogaW1hZ2UNClJlZmVyZXI6IGh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vaW50bC10ZWwtaW5wdXRAMTguMi4xL2J1aWxkL2Nzcy9pbnRsVGVsSW5wdXQubWluLmNzcw0KQWNjZXB0LUVuY29kaW5nOiBnemlwLCBkZWZsYXRlDQpBY2NlcHQtTGFuZ3VhZ2U6IGVuLVVTLGVuO3E9MC45DQpIb3N0OiBjZG4uanNkZWxpdnIubmV0DQoNCg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
    </HTTPRequest>
    <HTTPResponse>
      <contentLenght>70325</contentLenght>
      <HTTPHeaders>
        <HTTPHeaderEntity name="Connection" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Length" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>NzAzMjU=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Access-Control-Allow-Origin" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Kg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Access-Control-Expose-Headers" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Kg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Timing-Allow-Origin" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Kg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Cache-Control" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>cHVibGljLCBtYXgtYWdlPTMxNTM2MDAwLCBzLW1heGFnZT0zMTUzNjAwMCwgaW1tdXRhYmxl</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Cross-Origin-Resource-Policy" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Y3Jvc3Mtb3JpZ2lu</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="X-Content-Type-Options" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bm9zbmlmZg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Strict-Transport-Security" index="8">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bWF4LWFnZT0zMTUzNjAwMDsgaW5jbHVkZVN1YkRvbWFpbnM7IHByZWxvYWQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Type" index="9">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aW1hZ2UvcG5n</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="X-JSD-Version" index="10">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MTguMi4x</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="X-JSD-Version-Type" index="11">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>dmVyc2lvbg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="ETag" index="12">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Vy8iMTEyYjUtdEZHMDIwTVhTY3hBekNwZkp4K1lCOG9oOGRNIg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Ranges" index="13">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ynl0ZXM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Date" index="14">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VGh1LCAxNSBGZWIgMjAyNCAwNToxODo1OSBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Age" index="15">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>NjIyMjc1NQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="X-Served-By" index="16">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Y2FjaGUtZnJhLWVkZGY4MjMwMTA1LUZSQSwgY2FjaGUtZGVsMjE3NTAtREVM</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="X-Cache" index="17">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SElULCBISVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Vary" index="18">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>QWNjZXB0LUVuY29kaW5n</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="alt-svc" index="19">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aDM9Ijo0NDMiO21hPTg2NDAwLGgzLTI5PSI6NDQzIjttYT04NjQwMCxoMy0yNz0iOjQ0MyI7bWE9ODY0MDA=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SFRUUC8xLjEgMjAwIE9LDQpDb25uZWN0aW9uOiBrZWVwLWFsaXZlDQpDb250ZW50LUxlbmd0aDogNzAzMjUNCkFjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbjogKg0KQWNjZXNzLUNvbnRyb2wtRXhwb3NlLUhlYWRlcnM6ICoNClRpbWluZy1BbGxvdy1PcmlnaW46ICoNCkNhY2hlLUNvbnRyb2w6IHB1YmxpYywgbWF4LWFnZT0zMTUzNjAwMCwgcy1tYXhhZ2U9MzE1MzYwMDAsIGltbXV0YWJsZQ0KQ3Jvc3MtT3JpZ2luLVJlc291cmNlLVBvbGljeTogY3Jvc3Mtb3JpZ2luDQpYLUNvbnRlbnQtVHlwZS1PcHRpb25zOiBub3NuaWZmDQpTdHJpY3QtVHJhbnNwb3J0LVNlY3VyaXR5OiBtYXgtYWdlPTMxNTM2MDAwOyBpbmNsdWRlU3ViRG9tYWluczsgcHJlbG9hZA0KQ29udGVudC1UeXBlOiBpbWFnZS9wbmcNClgtSlNELVZlcnNpb246IDE4LjIuMQ0KWC1KU0QtVmVyc2lvbi1UeXBlOiB2ZXJzaW9uDQpFVGFnOiBXLyIxMTJiNS10RkcwMjBNWFNjeEF6Q3BmSngrWUI4b2g4ZE0iDQpBY2NlcHQtUmFuZ2VzOiBieXRlcw0KRGF0ZTogVGh1LCAxNSBGZWIgMjAyNCAwNToxODo1OSBHTVQNCkFnZTogNjIyMjc1NQ0KWC1TZXJ2ZWQtQnk6IGNhY2hlLWZyYS1lZGRmODIzMDEwNS1GUkEsIGNhY2hlLWRlbDIxNzUwLURFTA0KWC1DYWNoZTogSElULCBISVQNClZhcnk6IEFjY2VwdC1FbmNvZGluZw0KYWx0LXN2YzogaDM9Ijo0NDMiO21hPTg2NDAwLGgzLTI5PSI6NDQzIjttYT04NjQwMCxoMy0yNz0iOjQ0MyI7bWE9ODY0MDANCg0K</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
      <HTTPBody>
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>iVBORw0KGgoAAAANSUhEUgAAFoIAAAAPCAYAAABubhlzAAESfElEQVR42uydd3wc1bn3v2dmtq96b7ZsuffewPTee68JIRAghSSQxk0jCaHcFCCBEAKEXg02NYCxDTbGvXdZsq3ey/admfP+Matmq6xkiQv3vefzsXe1O3vmzClPf36PeO32B2XB3Ak8uKKWxRsbeHfkQYRQOGNPDqcltPKz0/I46M3gmie2ogfCoCogASEBYu9F7L2E4nsFQLL9qdgF1scCiSkED/zXs9x8zVJMvevPhAYN/06n6lcFYIJA0LlNZIOI3U52/nxvkp0zLx5JcYqDAbWHNrfdqEu/CmAC53js/CnDjS+qo8TubioCryn4wYn5vF2UiBIxMBUl9iCx7n6/RgCca0uQ70ZbMXoZghL7iSl7vkYFzrIlsCTaKgBeufUPctj8yTy0vJQlGytYPMIPisK5u+2ckhDlp2eM4ZAnlev+8RnRQBhFVRAKiNj4pJSYpkRKgRASWfJYt/Mr+zmd4si/BcBuUiWD2MbSIADWuab22q+U1tdCWMtjDUj0eP2sYGw//Guv7KHD9lcVgYls77fjaTudibb2jdEC4EevlQzqPDx4yYjYjW7uo1/ZzUpJVAy8RCiwhZmcpjB3tIeZE7NY+NgfBMDq5CmDOt55TVsEwLs3/k66J4/m32vh082t/KtglTVNu2ewML2VG453sN+ezfcfq6GpMdz+e7tdASASMQ/bcT8WACf8d7GUEjTV+twwpLUsQgxovJ/8YKT1w5tel4dPZ4qzlTfP+CNjnzxItFrF/wsPZy/9OcVNuSDMbk5Dp/bPi60v3zk4qPPL2cOsfoselUiJx21j1uRMstLceIyV/Pj0vzE+vw7TPHKLAgSjGjc+eh2vrJwNqtnxRfFt1tVjfimP2FeG4Ppj9/PoTV/gVmUXGhMwBLf9cy7PfDYSVHnknOz5tfXBd84b3Hn422LREwmbMMrOyw9nM2m0A8OIjUiR6GUawf9OxSyzI5Suv0lZv0wANE6cPKjjTNm+VcTmalD7FbFFOLxfKSWRkmJa316E7/23iZTuBynjPh9jdpYJAF+kVTr8JlV/f46qf75EtLoeoakgREw0kF0ZPAIprPdSN7BlpZF10+Xk3HotYY+C155gXfyHC7ufBxNGewK8OXsn47xBJPGNV5ta03EeDqfjhuTai8fx2L3H43bZut4uGML/qz8SfvNdhKIcMT9pOz/vkw+fmhDhR2eMw+9OwPXAX/D4WzFVzaK8pmlNkap08BQh2uljsPx0KfUSMKqRMmDxLOEA4UAIG6AgpQlIBBIpunLuw8frKqwWANsnDhvUfTZx+0EB8Eb+uEHt96KyXdYDPLFA9sLcD+MBsnve27l9a5X15YixklkLYXgRqLbYb2XvNLu39keL/8j1PYtMbeKhbJeJReycqEhpItqkLwfQrCI+S0H8tE4A/Mc7VXY+w0JRKPjZrTzQKHjj/bU8+/MryHr0SRrWbkFR1T6He5rPknPueHnLoK7bw5dPEQClP7hbCrsd36efEdpbjFCUo+p3RnWpANiUWCD7JYD28XTTWg51K/dSVATvvQejR3dijsHYYXJ1UkD2wplnQnFxt3Ivv0QqwKRkGJMIWxthT2vsZqJnMc0e+y5y+Bb/VVu/sc0vJZrQMVCRUul7+8a2ucfu59zsd7kj8jAZ75Qy5l1rHpj6awmSZFeInGQf+2tSCBsaCIHDNPhF/SYuaD0EwJsJBdybNo2w0st+2/RfVr+PnhzfPpMWZb8oW+FPEzRyncKicNaBwWw1aXk9SOZvVnS/bv3TVSxa+8vDdB5p8Rt1+rXYzn0MYXN3+V1AD3PLymd4dt9nxJSqw2T9pwemo2kKZnMAzeMEQPeHEElu6yGlhFJLR2P+C+1r306yTMm1Z43ksbtn43ZqA5IV+Nl13c7lWbtquGd5CQ6jQ2iUEoRdkvfDAKlnRmI8X3TLexvyR8s2uhVbRlBApOrIVhXCAqHET3dTy/b2SWsHtB9mMqSywlZSpeHSiGQ7cZo+1CQF2ShxjBFEmiXUg1khMCNhRq54D++xxyANA7rps8u6pfxhcGXnxp8KgIdz58jn3PPZYBtOVAqQ5tH1u/uH1njnPTy44119h9Xv+Htkh02qkxwwQN2P7ZZuYp/3sPRO2YJz+AGEPQym0kGS287D4ZKIBInEq8Jot8mWVgUzdkX53UsHJvNL2eOGF0K074ebfveK/M7FC5g6OgflKPlul33G4J63tunqVYZOjHLXqaOpTsmgKTOHBLvKM69+ToLXzdWXzCDoFzz54qfk5yZywRnTqa33cdM1xwmAjRUB+XGxn/0NUQwpUWKPMVBbwN/Oy+nWJiJjdDj/57eRf9e3qXnuTUq+/xukrsd1rzaZX/vOPNk9y5aYhuCikU1MqdoLGfeyJaWONzYtR4npE901/W+rra8mf6PnddMNrj93Po/+6gac0uDgd39BwytvoWg985AZjXusfm+e2ft+MA2KMgp473uPMDprmCW39jIfbftslXtwdZQFAUtHkcWDzC+KYlN/54bBPRf/PUMAbEgZM6j9tq3bT13J8rlwK4dMY1DP8ZbUCbK0CHZNhJLRkqoc8CVC1B67SIKQov19X7LqxxfsGNL9YL9vmuz2SdrtF7IrZZeiQ2rsZkSRn2yynmjm473bjrtjGL3xqfXfHtJ+u+NDDzz9EXf/6S2kaTBrUiFvP3IrWWkJ/eIXvcq/iVHuPmUUddn5vJU7DUVVEVIipAnC0gGkBClUpBAIKfnXOflH9ruhgsVFARCiR7kaRYBhgtJmuxegWLqSkAJZ+ncB8OPFxX36EjqZavqk7Q+cV9Tt/EYNya9e2UHmPx/n3Obd/HzalXz3Zxcxf2Ri//jxEMmpQ9bvv24YXDoZ07N23fJzmXnqsdQVjeIf723lpcVrKatoAAkOl52Hv3Uc855/yhIVr76RO55YQTgYQagKeekJnFuUxJUpOsMT7HjOPJH0E+cJgPXJo6WI6YJmjBR4Z+gA+DZY/LHXv0XMt6dYW25m094j94Npgq6DzdZxTp95Bm65xXr/2GNw/fUd6xCNgqZZ+/ew/fDc0gz51z2pbGx0xnwevfu6+mrhuzf1KaeawSAtP/gtwefeskwj15xP4p/uQelsI+lh/w4Vf+tuvG0fmbqOHgoRrK6xxpuVieZ0tss7velZQ2WjH6p5OLxfKUGaktQzwuT/KIji6Go7DRoKt+6bxHNVBTH96bCOb386Rh/+IIViIusSuOKSz9m1J49NO/IQyQHLFFGXwJknb8UwBf9ZNgklrdUyOzV5mDX5IEUjqnn5jXmI9BakqUCxpW+Ovf9cmZH4LkIYR6W2tbUVN1tPkHDdImmYJhPzE3n+u3N5ZvkB/vzOHoQQDGRJ/c9dPEA+pOC0mSS5otT6nLF7dwhCssTiQ2f+fdMRgzJMk5NGp/K9E/JxaEoXH1tYN/nLsjKW7m1A7Ubfe+/WaQLg3pHnyi1K8lELwQKYYjbxi/1Lety/pg6pZ4bJvzuAotEvu3qb3eiME46V4684jWiuk52NLVS1thDRIygCFNFG2Sx5TMbhw9pxx9+62KMGq7XZo4bKp81HZYPLN0/J79V2KvswpYs+7KkUPjW44y290dpn4+cPLp2MySU90fV/f17C7c+vI6ybnc4bONQIjxz7D64b82n38zCLo7ZN9za/mU8cqc/rpsEVo4/hv4+7AYdqO+zLCLx3P2x9D9Qj9XrxE8uWHgrrgzpep0Oz7DDpE2WfPol+0PrpddsFQPPVg3uOk57fO6T2qPUpgzvemY3WeIueOmFQ+y2+0Yp1UC76p+yq+0huO20sPzuwEnP1OjbfcSfXLS6hoSWEEof93nzjJuuiv552pH4hTa4dfxqPnfg93DbHEfrFwV/fR/1b73SrX8zY/oVlfxh7rFQcDrJ/fCvJ55+BkuDp4iM2w8WYwbXWX67ZqI4iOvuMTZ+fprc+oOqBv2GGwkzZ/ZkAqH81RyYmqCxv9PDnQ+l80ujBr6sxGUl2Tyml5ej1aAYnpvj5fkEdx6f4aWk1SLu0UgA84c2Xb4Sb+SzqpxVzkEjE0MmpQ2X/HSo6qUx5ZlD7NbdcH7P/JsvOtllhRWCAAdE0E0bq2MMKjrlRGholymIXTl20xx62/abD/tskAE59frx8aGQpkxODGFFr66pK2296573dzsPUmLHt7z3xTdkpflda9hfADGsUJYd4bGwxe5Y08cOHIBSxfqEIMNuCb8799+DuhyXXCUslNmWbbN5Zruv8vvNnh3/X9r6tD6WNOI1Lk8wvgBxvzJ4nj07J+P2nA/LzClWxdk7IsIKMXSodO4N2P2/h4kUyzeZjU2sBRptC35Pdr8uJ6uGZLj1uSPXN+ryiQe03rbxYANy8TvZpl+scQ92XHvCPWbELJv5XF4eaNf8KXWLX+tNi/sLIR+NkuV8jKgUpapQ0JYqBQHWoNNapYEJbyISidRxDI2qFEyiqxNQFpgEpmSbqqbFYqLHfllj7GdM0mW+Lcq/bR6KQAyKgc9a8ZvWb/sfBPcd1dwsA44O0Qe1XPb3e2meDrAe02Sf/NW1w+/3GJqvfSgZ3HnKw5mH52MGNRT1+99ZBpw/tvsLT3ugmbljlupnLefyqh3EI/bAzLSj5dQENb6egaEfKWG1x+hX3FEq5PTo4csNEG7m/LR1SG3i3tknAfG8J8oHfQTTSL/+09umGjpiKWNeKIrr4KtqTHzr7rdr4KCZCmpimHUw7RQkVfKPgE37+rKUDlFw4ViZcpOKapxLaYtL4tyjRfR19KcmCrIesuaj+YRSzqeM72yhByndsOKcqBD83aH3DYMSi3QIg/Z0F8sjplVzpaeGBlFqciuximzTDUPagi4b3HQhFHEGe2/aZuZY+dU0ZB6tsa8ps64o9hdOPWDpNmryVO42fTL6YiOhqS7VLuG/r65xfsQldUY+4zZjSjQIg6cff6IO3dbW89LU1mh/4V8xX2I3sG5N3hGkiAwYI1YrJFxLFoWL2JhOtt2Tfx8+aLv92fAZb8lzInnJd+tOuetOyEeQPH1RaNr3swMBkM01BticLEZuvDjm0zUZrmqY0wmFCzS04kxJRHY7DlSbCxQcovuxmIiUHEX3E5LbZNGrGDS4Pytxl0Z0tybMGtd8pTev61AntQIFiJ9syAFNl6hwyI0Ti0Am55fQj+zUMrp97Mo9e833cdkfXXLZAkIPf6zl2pZ0P8S0JkODWmT62gfpmB7sPJKIbSvuj5HnhxbNMChJkrzl5AEX/ss7br2adLh9cMByfTUGJmpiK6JR0NoD258et8c7+lWyPuzNie0iNxW0IpcN21qbzIDEb/eRNHM5fb5zDnFdfofa1/6C6nUgk0xpj6zb7dXkEUZRqx2oqZkwOjlPrXGv5REovsg/KPit8w6Ko/PSwfStNshMyeOeGPzMjd1y77VNKiS1m29xQsYuzn/4+Va21HJHI84d1PeeZGAbXTDmRf555Gw6tK38P61Fueu9RntvyCXR3ln+6yOr326sGV5Z+fMGQ5lcMVV7B8Om/e1sVPLo/cdgyrao6qH/4QyiIk09M/OXgzmFML3vluw/KlAkjeXFzNZ9tq+RPk5oA+N46F3MybFw1qwBHgcnMeb8i2V3dZ7dKLP6rS7/bK7gvMwDAXYc05qTauGZOPhU2Dz9+ZQONzUHLiHI4XRAdFqE2HrM/Z6QEUFJTULwezPoGjOZmvJdcSPqf7kc4HP2zB3Xjxz5cpmmjqeG9+6i46gaie/f1ybvGNFRYOb7JRUfERUrDJOnqi8j6071HxASYwSDVP/gFzc+/gVCPlJnHNln6/4bkwbWbz4jFYZxvT5TfcqaRr9gwOtmBRQ+CozwsHOwIO3SMx7yzYrv8yyuHWLaxmUjEsNb7aGSk1Vd0Wbc2WWRvWQln3nU1xeWl7WvU03p2+0SflA2pvXjWmcPkKXWSW276KZv+s5iH67awfdr1VI08r2MSJRDTQWxEMEwwVCdI6zOp2josut+dN0B7m4itnYilW0mEiNmKOsV/nTH3ZXlb8d+YV78KVUZpy+Ad6Mqlxn76dEGRfKCmgu3h4KDazbm5G9krJg8UNcN778Lo1vjda+3+28d72Q/yiFH03b4thjT3sLv9a0Si7HjtfT697x/4Kmr6lX92V+3qoY2DO5y/xWLMrjl+F3+/aTkuuzEg3XflnGNlu44Xo1dSShTTRACGIhBCscRF0bf9+5g1nw2tP+nZ0gH024O3SADXxrAQLpk2uPLDa1YcXOIVH8npIxLYVOqjOaCT5NaYPiKBdftb8IUMuuA/HG6fN1WSnQHOHLuJG2a9g6FXcNbFsZy7hfcdsR+SXDqP33CAS2c3ItsUbQGG36B5SQ1NL1djBoxu6fvY/RbfPP+cSfKmzXYKmxWL9Ak4mpCqdp3vOy8eMd5ELcjTJzzKhSPWs6hkJjcsu40W3RXfDf92ZbtdV5oSNBUlOxMZCGI2NMZyn/uftxFPjnZv/pnO6esWTkpX+awzP+5sBukwHYgBnYuhksmH6hwPe2fBoPZ78OxVcY23P7JOF7rzu+OPpL9Scs04wWMnKLi0rv2YIZOmX9cTeNMXo79dvy+I+alO/GPxoM7DJ3db8eNz7jluUPtd81sr3sc985cyXPomRsN2kPqgySV333SM/PtkgxY7R090AG61zvG6NiQJDRQXGL5OJooBtFltPz391cHlFx9cKgCa/v2crP3ZPZjNLSgJXtCNdp/0QHLQRlUfGlL/7QnXvzOo/S575uwBxMmGUGwapm6i6WEMVUO25bhJacktMfr72u33yoK5U3hw5QEWb67g3fwWEIIzSz2c5g7xs1PGcNCbxjVPrWzHLuvehR6TkHfF8qvH3NS9fHbcHh67aSVue9e8KSMs2P9QPrXvp3Yrny3wWfKDOv4yaTT5uPqSE3nurz/CBEpv+B4Nz7yAPnYsVyWOoqS+BaGpsXz3PvbIHst/u7nNthuLl2ijhYaAB6cn8sI4b/+0mL9b2DnPZQ+uHHVN1ab2czyY/badYzHi1naWkZrkJhiKEgxHuz1rsk2ONAUO1STBHaEh4OgSP9DG5y8f7ZXfGZ5IQZNCtFV2YIgNkPC0YeiI3x4rpYC76iLMDZiE1HE4nEFu9pbR4LAjDIN2z35bwEBvcvsvPu2Hvzn+iKI2f3NnftyyZg3hQ4dIO+ccFIcDMxxmz003UfXcc8SraR0fu/khd9ag7oeCgIV1U/GT++Q7GQ5+dv991FZXgxBcfMnF3Hv6BTj/9gLhsqqYrBefrDamYm1ceW0/PWUUhzLzuU4bT1SonWIEY2cTEwXJePd+9gWHEfrmhNjNH20zxCOEQO2EYWZNvUIRtbzLI4ymrk+9vg0NpDf5THZOaJMSFUmLruBQJL8Z1sDEXdV882et7NxvWDE2AmLqJFz94eDyzedPHdI4w6HKE7vwgntkR1xaJ50BSBI6F6kNpGlm3JhVx774eO8YhANtMQzCoRqvaVreMmmamKZp5b8pKoffK379IhbV9fclMs/tIN3lYEujDxXw2qz8OsOUtEb1/nX+bUsukaU92M8Akn4Jyb+ip1iwdl1izI865fLB6NxW3rx7FePyWy08nm43o2RXi+CClS72tiodAKAA91pYAHLdIMfEzmLgurAwu9gWO4wJHbihbWvfnlMVwybDQk3tEo/ZIf+2XSdAKF3ysdpiNveMLhjUeRiz15Khz8tNlCc2ZbBATcSjqHHY/+O0jYy+WGKYXHvRiTz222/jlCYHf3AP9S+8gZaWAgiMxqa47ZHtfus2m6GUYErGjEwHAXv217djneTrrTxa/wnDdB9mH8/R1u+os56X8ejW3ez/bj/f9+7VQ6qjdI4N7uw762J4kRJpGghVQxqG5RuJYad0jh/uEhv84zMlmBSm5vBfJ13OOT6B/twzhPfstHzr/cRRKfzMiu/JuT/+c2zZmSysX8MSTdulBiEtTOKqn1jL+uTLT8o//OcP7Df2gTrwMIO2pr1Q7eLcbYf490mprLhyDklP/RMEvHZlHqePTWRxi4cXluxEhCOdHJiyU1CC7ISw288jNGhbRTL46QRtXVvgV1pqOprXC4pADwahutZK4u6DbFzvTOGgGWWzETpy8lXIyRC4XVYfgaCkslaid4PPMUl1cr0zhSXRVgBeqoFztpby1Em5rLp6IQn//DdCCF6+aiKnjcvg7WaVF5dshNi6maYEn96x2xQF3JoFjiDFoC1Pz8LpUCxOXwerE482YjEhh4OUxnM6u/lsXKKNS0cmoAjB+roQX9SGqA8ZVuCQGIQkg0E5E4fLwhIFAw9R8rQwY5NhaqGH6VNHMnrGKBzpdqIJDooWnAiP/WFIR/dRRRLH2cu5f66TrSeNovD9T8Ew+McFUSaPy2JlUzKfrahFD0Y6jd/k2GPzAVi69EAn5Up09dUhmGAPEJGC3aYLja4Gkv+fmj8Q5YtN1Vxxzijqm2bz6CdX84NTn6Uou6FHMOjBPHdH2REIgcuQpEatPhtsgqD6VThfX9+mpabhnDiF0JZNRA6UDEiKuH/Dzzh3xBVM+f71JM6bQcWjz9C87AtkJIJUFDBNZCyKUigx4B3DRNhtJJ9yDLm3XY9z3mQ2t25m8e6XvrZz2YUPX7WQhCc7+PDp4zJ4s0XjnbfW8I1wBKEoSCmJ6jqq24VQBFFfAE1TjwBsceS8gxGpwYhsB30PRLcio9uR+kGk2YA0AgjVDjiQUrXet58HSwkbZL/fV6vJDlCn0W5LttobcFoSczy0oWQ31FXB+GkwZQ6kZnSgNA/RcNvEgjbBXsaUEwWjPTAJGyj7nfBpCjTYgbqv5fKoXo8VqGizDWq/d9uu6PV70+xq4+5bf3sgvsVraYE337T+vuACSEyMj/9IODkPvjcFKv1wyjB4Yiesr+tBaLbEHI7Nsf5cWtGtmNP+jJrQOSl7Bevrp1EfTuvZth+7XhUGk1O3c6Pn3xy/5QPUD1torVS7XGfTTM6bvouzpu7hgXePZX1pXvdipez8KgftTJ+YJvhpkUq2Q2DKNrB0MIOSlsUhml8Jfi3OQH90NKEqKGGdCy+eh9drBcz6fEHeemcDpl07UqKPJb867ArBsPGVp9VSAnaJkmogqzRQJerYCMY+O7JGi/Eq8b9cpBNIA9LPjhAZmwzZKu5P6lBn2rEfkIQrTMKLQNZ3Ay3RCy8vGpkyqKMsXm+9zo8UM0av5l3HZN5PnUMoI8+CJOjb7NFtK9099DM8Kj+FvMwEVm8tJxw1BkUXj1Tm0lifjiOvDPe47TgLyhH2KNI8MqC/w9go0QREJcxOMkm1ST6qV1HEwOik7HY/SIQ4ksG9uWI7pZWN3HrxfE6fOxaPy/41ppOZLG4ULFq6g4KCMIpN5YoLZ4Cp8tTbL1LWUMOCmbMZnz2G5Su2dzHYTs5ykOPVWH0oyOqyII1Bo6P4xlfQFtBjOn97cpakO9+S5Cso58uBiwRSfLnP05ea9L+NJ53hcJOtqjwVbGWLERkcCCIgtcH6N3kj+D2C2iw4NBxKiySHRkBtFvi9kmin3I54gKGHbj/Inj8SEhFMRrRmWx8nVCFdTQPf14eBNWckWHb82taErtUD+u1DGaJ+vwS6vqQRXvtkD+5zJyA8biQQsiUhTdUask3ijLa0obsMSK5GCDRVYHd7CUatgG6XzSQaDqGb8UeRyhhI0vBUK+H7YGN4wAGd/9cGtz1U7+SUt1czI3c7d86cwpm/vJiXlu/i7Y+30NAYOOyMWO+zMxI4pSCBc1NMZuQ68MyazU5XKotX7O+g+xKakjWcEwxy3GFME+y5FgGwpVv92HMt3avr3wJbuomiQGXAQWiHSnKT3v3ZLS6GdevgrLN6tym02SDefRdmzYJRo4649qL8Vgo9UR7ek8r7VR78uoIihniPxvQ6bUbMT2OX8BU1OwohqFu3nool71C3YwcA6RMmkHvu2WTNnzcge6kEMEzMaNRK/rJp//tpggBpKMyeVcxlp2xl17A6an0OyhsSkEDR+HKuOG0TkahKcVUKxZUpgCS3oI4rTtvE8IJ69h3IYMP+LDpHjZY1XI/LfpAE1+ZBZVuGKTHNznEiFsCDApwwIYPpI5L75QL53XMD4EOx2IlIIMrMtM2s94+gOpSKcIjYcw79ntmkJPOGmt/r8YwnPDhmohzydsmuajb9+XkyTs/l3LPH0DqmgHUNdrY0+ClvbSEYDQEGCsphplF5VAD4si1GIib8x7s2Q+XT5kv24wig2ZtEaXIBDQkJNNlcZDc3MbFhH4mtLYMvdvdDBvu/NnTtR3/d/aXd64i1NHsMuP1fY4/60uby/9M24uk/U/fki1T85k+0LFtF5nduwD1lghVoB0TryvGt+g1CSjzHPI6aX2QRH8MgsHkHNX9/Bt/y1SQcP4/0b14J82cBcP2DjVx6nIszZhk8OT7EB/UJPFOZzOctbgJtcZBdUhgEbtVgfmKA63OaOD2tFQIRXvg4xKsrOnxXMzUXo1UHJ+sB3g63sE4P4vtSOOvgN1VVMQyjz8++fCPk0PXahmLdmX8JA5SIIOPSMDIo8H/oQAkJhM2yPbQX7O4m1ODD+hSOa0niBwXlfC/3EEl2MCKWIqqKrqYncfREo8O4KSWKsIoNSkPlihE13GI7yDO/D/PU253u1xajEGvXFsjuaVEssKy/tO/ZTjRfSolpmqiqyurVqwmHwxx//PFWgkkXkEvrGRRFYcWKFaiqyjHHHINhGKiHJ8nvrof6IMzJg/Hp4NDoE+ntqPlFN3oAEhmFKaNSSfAorNrVZNnwDwOOG+eqYYK3nG2+fAzZc1kONeYB6ABy7CNFTMr/8dMmBu10SkxgtNuiM7v9Kmq80DftMRQGCfYgKa4m6gMp+KIuDKnGV62wm1bm1zj2lQIqQk5+lLqLP6QV0yBUXBNHsGOjg+LPbDQc0lBsknCjhrCbCCnwpJiYuiDUpJI4LMKo44JMmS86yUIwIj+DSWNyWbWhGHeml4Ir5pLssg/MB3TRa19D6vt1bP83E/EQhKhuFT5QlfhJlNwexXgr2GvMk3THgGT8smfmGUvA+fpusdiz6SZJKS5CYZ1gMNoxmW2xje2YQiZgIg0b0nST563lmpwVXJK2nCw1yM9j3YY2mkSKJa7ZJp6zFNLutNH6hkHgUwMZAumTRPbHctR8lmwj7OBeqJJwsYoZktT/IUpwrYnZIv/Hj2HnULVYLmO/SLziMbAPCxHa5RnSY90ZALpDVGuTewYQJyUlQhHIqEGqy8Uxs7wsnOIh2bTx0oYmPl5Tg+KOgUG3FbLp5h4XbGqmsD7C345L5z8TEgk6lE75XwN/XsUYGr2nv7KZ1E2UcBQ0G0gTaRhIp+0I8E4jEqG1rp6W5mYSIxESMzNR7LbB2aRfVXbUj/VNRGGBzU22YiMcAzIerTqoMu2sigZoGQQ9d6B2D7tNcsP5e2hsdrLnYAJjhjeRnhxm855Umn12hKZhH5aFI0WLWz24akc1w1pC/OKEkVQkOVHCBqbCIDgwrLMopCA9yfLt17V4LT1SdOgMiqoggxFM3eScS+fzqzF20v5wP7Xrd6ImedGDIdSI3oMOIFCkwfC0A+QkVtIaSmBfzUiChpujCuT5klpxfRkhPcLUnNH/J0d9Rdp5rQfOHKb7xi8PN77weULOc/W3rNjH8c8ZLL/mf2xMy2qjzC8p52fT09g7vwj/tmVg6Dx0WiGTx2ayrkWwdvtGpkwLg5u4EVSX1UaZX1zOT6ems/+YIhI+/BgMk/8+tZCJRZls8As+W7mXaDDSDtoOMCXDDcCW2sARiertJ9PhwDl/LrbCYQQ/WYGxZdugcgshBOGwVUjF4bB9JffSUFGfJZEWys0otznTmao5u/IUIY7kMxK0NKvgm94keuSJZ8wIMmnkeF5cGuCpt/ez50CLlQsn+NLjsGIS5FH5Qwfavpc4gQ0zsyibVMR+sYDj1ztJV1J4OcZ/vJFqcuQhaqIp2PVWJssN7DHG0GpLZ4KyjYN6HuVJcyzgfTlAmU4IVFOgS4EntYY03cnBpiTrCNqMLnaT/2Sdyu7EsVx18AWuOPgi+cFDmIOw/85OSiPb5uCBmjKW+1rQv65E/XBRoI0+fgXDXaSUGFEdaZrIr+YQB9+E0hkIBcA0UVAJpDqJ2CClXsfQLZtA52u/VhswphfbiWIXUULSjo7WI4bFYQr0YYahLoywm+u6thSvjTNmpnOoLkSzP0qaV+OMGensqwrgCxpd423bmqmQ6AhxYtE2Lp68DIe6n5c3qHxxIA041APBllwwo4nTJrbE8kWtGL5oVZimV6tp/bgBsz2XoWed6O1ROhVeyS0bbcysUi2oj6+0CcsCgbafcRJKbg6R9z9CS0vBKKuAYKjjHPeThw7IP2OC1GP30WK6lqQbcDQLMLqxzmDVakuOWjDPRkq6Cl9FyiP79hQMZI7/p8yd0rTsCFZu/f9OSAjDHBofupY+DTWhkEjFcqJl/8EMVAxKv9/ZauWrPjLFwK8NvgCvOMCWDmZwkPCrh4gHJl17NbYRI6i54/uEd+9BTU5GmmaH7/Mrlj/Q2JrYK02QnXTG/tje+kV/VRUzEoGo5M6fnsO6jZUsXbwOJcFhFbLoRL9eqFM4d1sJzyzM5dPLjyPxyScBePXS8Zw+OoMlPo0X3tnYgV2GRIaxENakaQUAO2Kghl9nH51s400SW3Y6RlMrMhgGVXTyd/T/+RT70OSNDlk2Vyc9PTsjkbp6H8FgpD1nssu+lQIhYWxeE5ccX8xnW3NYti035hDq2l7f76NSNfjxMalM99sI7dEx/G2gvkfj9xBg6AQdqaiuYTS0VpDk0DEMBYRkeHI2LeEAhjRpDrV2gEEf1dx3Gnc3f/f5e9MkWFxM1dNP49+yBVtmJgmzZg1+nGObPewoZBHfc4s47cwTsP3oJ/z6sYcpKd7Pm28sQg9H+MWNF5Lx0nuE95Z0X9gvXnp2GObPaeMyebsRXvx4N8wrApc7FmPUAQYt9UQ01c+38l7gvw/czIHDToYQgvx8F+PGpQKwa1cDZWXBQWdTVk6bQAoLrlUiqYuozE0O8/OkGra9XMfZjwRpbJUoMTefNIeeVrqdg9tfIAa9OFR5YgBOp63dN9t5LTVFI23aNDI8tvhn7cXH+09M+3lEhmq8RjRMU3UxweZKVJuL1PxJaE4vn6yrYf3uRpQBnuUJKQnUBsMIKXHbbRZJEG1+cDG0MW2d+v6653b12x9uSjDsKEJYRTgME6lFrfxoKbrMS1PVBtB9eDLnotod7TYmAUQiQWpLlpGQOoLEzPFI00BRFCQqUgiMSIRA7RdI1UNy9oz+cbQuZpv41mfhlVFK9leyZU0T8xvTmKF5cQoFo02+FOKrZzOUErtNpSA7icaWIEiYODqT4kONhML6oPGEji1/pH7S3+JLQ6r8C0G0qhzfFyvQUtKsDSAEZjCA4nBiBnyWHGEYCM1GwglnIpzObmnFSHeY0qCN0oYqfvHhs+yZeiI33HgjqR9+RGDlCmQo0A5WPqQ2XGBSKxRFoTUmfjcB+RHYbYeq2HXXXXgdhQUjeXnpL8lN+5Qk79HRP+2pwCeUrdTZ/alkZpKNmn3lljGr9gA73owyRYG/eh3MUEfREFXRNBMRduEoPIhqSJoPZKM4rUTLAT31UWoGQoBd0dBUG8oAmEGkr/5tdhyFRYRaW9EyMsE00UNlOEYUgRoCU++VEY1UHXzTmcpvAtXUyQ6Djt0GE4pUpozVGD3cEkT3HjDYsltnR7FBJNrRR7pQ+aYzlZFqR9X5x31bKPsszI4VkklJTmr2WkblObXlbF0UYrwCD3ldrFQTqQ9Dgldy/LxUErx2UFRaWwIs29yCLyAsMO9eWhQIxN6XAMNj7w8AI9qEN6A3N3JUDHKYpYz/OuE0cWRFiFTZMcNKLGYtDiNtJ0bWuUJTkl3hlzPSuKTQiyKgLmyyrTHMayU+PqkMsrsl2iFA9EFIh25COgM/R8jTIoxNhmmFHqZNGc6YWWPInTIa78jhlNdVsnPtcrYvWUzhvFMpPOH0IR/vPc0vom+CpG2CEzSQJZY6lN9Ygr4Ojo1KCiMu/iMX4usUlbFtW20Mx1ygaYJIpKt3UlMFY1Q/5+37hLBqxxx+HAeijqPP95D9vTY+hmE39L73YAeCef/oWcy5FQrrPP/WHi45cxQ+27n8brHBL85/kZFZ9UMGBj0YzF4A85p0vlkRZarPop2bvSpP5tpYnRRn1bQvfdyHaWdftbk1TQJrV9P4r8cI79jGwBg3LK/4gM31azm14DzOn3MVo6b/kfo33qfqsRcI7tmPc/QIvDMngwDfuq2Eig/gGldE9i1Xk3bRGVTZG3l231/58NBimsINX1vF6h++zZR9FmHnCsnkJAc1e8sAmFtbxrY3woxXBSd7NA7YBNGmMMqkMUx9/W9UvvEB0aZWCr99JTtv+BH6sjUoid4OhdqQaI4cVHs2cHLMiGlgRCowg9tQvIcI7fgUs3UXzonN6DUHEZpplcvEgRB2hNCOJF5DBnQsv7wDFqvunqAaXJZbxw8KLZn1T6V5vFKRTqsRc8L2pRi2NsPaFbB/N0ydixg/FUeip72S9mDKkYdzZl0k0SROQrpmkGCuRQ2vwnQXwdoIjhVVgB1pN7+25yJaW4dis2GGw4Pa7zplZI/bQlEFoyc4GTfViSIUdm4Osmd7CNMwj44OC2EBMN1zT4xp2+HKK+P6qUuBS0dChQ8e2woLc+HsYbChztrGNmBYAhgSDgWsVwRsa4zV0xKgCThMzEEVOlnOGnJc1dw86mle1C5hXcN0qkMZhAxXN6DRkhxPFZenvc6llS+R+upBQjsUIlEF1dWxzxQBhqHQEnRS3eIlEHa0d6UcpvgLIazPejllZvwExDLQpAh+P1ZjaqISC7qwzrEMS1qXBGl+PoDZ2MfZtNth6lQLWKulBTZvhkjkSz8D8epoy0UCARNu/9Yp7C6uZtV6y8g8fUIBt3/rFB5/5hOCZlcjtV1TmDE2hWljUnj/80pKK318VZ2ZUoJIMdAWBNBmhogsScDYaUdf70QdEYUkA2OP4399tJ4QEjMq0Jsge3qQ5pUahteF3a8j6wWeURrmCAO9vhP/iUM+e/+1ywd1nKNH3BI7u4JU08c1/lWc6zxIwsLrSLngQrT0DETc9SI7WmHeTXHQgJ4DrOMRDcYXZTBvWgGbdldbQNCdKzAMVFcQEhm1oR8YRYI+hoa9+7CP2YYjvwxhj2KaAltM1I/GqstLIEmTnJthkKhJ5iZbQNBHJ0tZAQzR1gp0Xw2O9NEIu/eIq3TDZM3OQxx4tJFNeyr4xrmzGZ6d8pV1YvzDv4WylRF2fnqYDF1XzvY3w0wQkmNSvPx77Nk0qXZWrdxLjfcTosOaqJabWLq1kmCtm5zsTAKBUCdeJsj0apw11sv4DAfLSv1srw4T1iWKIr5yQJ6mIXrZ2gJbuY1Ru9LAW8KuUSEkClaM2FdoXWVnw9uRCkcboGpvZ1F+idgxXY6aIjqqtHQSXv7HzAyyvxfGN0gVmKU5yfVoPB9q5WMzSlhTO3hNzAkWrw4UiUS63N+mS9LskBGFCfsguk3QHLCAoA8VQkmR5FBhHMDQQ7wfbL3Qe7NuDM6SE0ky3QgBTSJAaMRSlPS9PQadR3rTV7GCLRaMKuZAfRoFqZbNw6npDE+vZ9W+ok5ALvGs5VD1e+ROGujWf9y/hfLPwuxYAZOSO+j6nLpytr0ZZpw0eSg7jT8qZ9CqqmgNjcxa/mu0pEbsikK4wcGmhT+F9GQ6V8eM2/ehJVEfCONOG843v3k+Rekme1rTKWuxsfTZh2mqqwFbP4LdBKS6rV1zsCn8f/geX5H2zNZaPkz1cFIgwvn1a5iS7eW3x07l6jOm8uonO0lN9baLlqkpHq6dV8jpNj/Tsj0kz5vOHm86Ly7fxTsfraC8qqmDTkrJhsxEXj8hi2uKyjg/v4psRwTZCSShuxwTISRVYTuLy7J5tjifi+uqObWx/siB19TAE0/Ap59a+umVV1q6a7cGlahViOqxx2DhQvjhDyErqys9U2BeWpAR06uZUZrIE/uTKfXbUWLJCkMpJ9hPteQuWTtA3vsltWBDI6UbN9ISO7y+jRtJOWbBwNizYRDYuY+mj1YSKj6A4naRMHsqSSfOw5aW8tWeiKNqBugqC2buwwgpjMivYezwasqrrUDy2RMP4HaGcNoFsyceoPhgKiAYV1hFfk4dZhSOnbmX9XuywN5B1/3hkRyq/yajs3+DTRu8Anh5KU5MKclMcqApgiS3jbxUF6oiOHVqFhfOyesfEHR/+ZCaSH1Y4nGrHH/MXOrXlDE+PcS4EVNZvmozQu3/uRwYaLmwZIEebidMydgEUBHsapWYiuhxu/ZX+x/IDi+yOSloNdnyQjGLVqzjhIsc/OjEQqJ549geLmR9Sw4b6iOUNDfTHA5YwWV0FGKiLfC7H0FdbSDQIjkJ4fFgVlVbyRtxKABD5dO293BvIbonHz19foSc6nD0oIiaFI8Yz8MzryKnYjfVGQkkKW7S1r1BYvGOnpWheGz9sofiK3HMr9C0/xN2hrA98lLpl6veKjFkUbsNI8GJ2uBD2iSGzY4a0gcFHKqP3N4v1R71f4DNQ9s882bimjyelg+WUfPoU5Rc/13SrrmYtGsuwZ6XTbgCGtcEUKIm9iITZz5Eyquof+416p97A1tmGvn3/YzE009A8bjb+337ixBLN4VZMMHO9ae4OXNWmDMnt/J+vZdnKlJY1QkQug0A+obcRs5I84E/zPsrwjzzUYBVOyIEwrILoU4UKifbE5ituVmnB1gSbmGDGSZk12KMNv49E4nDxyUNg1B5DaH91p52jszHmZeJUAcen6cqCjNmzKCkpAS1udmSEJOSGDFiBBvWr8cwj+IcCyAVyIu9Lyfu2sjuOBJo+xOC6uv8mza5oj1DxjKsabUqZkih4QMw/UCVagHwITtiDmOgcuIww6Jig+ZIhF/uymZRfR4/zd3GZcMSkSboUT+KUFFivcS3K+p7Joqx+wqk5ZcKq6S7o/xu9H5ydzby7T/A7kM2bDbQ9Wj7z2ZMhg1brW7+vPKxI/oV6WkowwqQjU2YBw72a/8+e5gcpqoqjY2NPPHEE7S0tFBZWckVV1yBaZpWcfnYdYqi8NJLL/HCCy8wbtw4Zs6cidPpxDRNlM4JahKoDcCH++FQM8zJx5aVMGAfQKSfesBnaiINukDqBp60BM6/uIpUh8rWigxaGhtA07ok3AZNG62G88i17jSnRa5a5iWW0qi7WNlURLPh6hMM2hwivklf/Fp0SkAcJF4oJdg1gbpvpSUrFxyPrsv4xy0Fs4eXcMaEHbT4oni9Dt7YMI2tVQUDNpeYgD+qQEQlpAM6mNJEs0v2f+6gaq9C/uwwpjBJTYPs8RHKyyQRQ2IXCgdXu2hpsLFnmYtpx/i79D1v6gi+cekx1Db6CO87QO3ij4moytGZIs2hkUvUoQLiN82vVb8PEuxDN5btxYvEUVncj9RlRRcV6yvo/xVgmIKSSgfNzW6cLoHT4ScvMxLjdPH1cUTCEhKSFWtvz9BAA9bolvOr6UhgNPm/wZivmxQVpnDj2eMpq/Xx/Pu7aW0Jg6Z0mioL2kyaGpgectx1XJ21hMvSl1PgCBFJH4k24UL460PtG8dskvg/NAiuMXDNV3Efp2ArFPjeNohWSELrrHNjRsCWK/Ceo2IbJmh9yyD4uYHZfJiwNZQ6ZV/LKEHacqzhRCvjxoCwClwItPQonjktRPa76ONYH+UzyHaxMsVhyV+NYVsMS1AiZZxg0G2ynrDkDkWzcd8VLi4da7K5cT9ObyIXjhb8NqeQvywpBZdmAWX0kB9jM2FOaYDh9RVMKwvy1II0Dqba24GSBuooXz02eXAnsfJQ/220IZPEdA+eY0YTqa0FzYY9KZmWFbvwt4YtUPVYCzU109zURK3fh2ma2J1O3OlpRz1sc0jBxeWAbbHQ4ZPvi4/YgGNsbtKFRlRKxsVANvfqYTKExjE2Nx9FfUQHhX/0NwlckJvhY+zwZn7+yFgEBndes4WFM6v43h8X8P6qAoQiUD0e1AQ7Is4F8dlVFh5q5t9LdvDz44v4YlgyIqTHCrwcJTEwFeaOLOOyuVuRwKtfTGb1/nwQll1aKAKz0UdSQQb3XD2Hq0o20nLnszT4w2gpiUTqG0jJyUP73pVw182WnNzpFhoRrjxhCbdf/B47d/iYMNbG8m1T+P2L19Hgz0LEUYj7y4+utVprOMCbO5ZhSpOx6cNw2hz/szx4iA7w1812mKUHlbNaD42cGGq8e1Kw4dRl4cYn1nhyF5t7ZB23LpJ8fFGvPHoo2s01O1CIIhsg95CHpWNqQEhOWl+HURNgbKtgohkmSUY7ikTE02/dDvRaCG1VKFQFgQMWoNrYxloC6yRFusllhuA/uPB1qgBm0mYOsqRRQ8qu6ywlKALF60GvrkUGgxYpMSVEokc9TVJKmlsDrPjCKop83NwJJCW4v3J6gozHriA62RXinBgTWKcH+Zm/km86UznHkYgjJiG3gSd3Xg9hh5xbgrSstNG01AZq9wDLwjWFYW6VH12pc+bcFJ5YUs6rHx2kuj7YlkQx6Ju8A+DKxKHZMaSJ3qkIX2f95sta3xPPuJSMgmRSR45mitdFWuJwautTQAdMg8zWbUwIf4Y9XEilKKCqrgaPaCSQMYuQbCbHqKZVSaUleWwXuTI+mc7JcpFExCG54OQdvPLJMI4bb0NGXCRUNaJlV7B5/SgEHYA3phCUuAu5f+xdfJJxIt+qfYnTcqtIdImBpUm+/377fM/xJvIXexF/r63gxdZGfIoFxjsQut6jnV92vB4e7nNUBQRjP06wtTAzfS2jk/bRGvWyrnY2xS1FSKnG1bEZ7Vvi68t33S+/wf9nzWg/I8KyZdnt6JNy0YkihUlguBPb/jqo8yE0la9rAKODMNPtmxitFbMxOoWd0fEYaL0bBPrypXX33WF0srwhzH2vlZDo0rjltHzeWV/H71/bjz9idsS6txMThURHkJOKtnPxlGU4lH18sEtjVYkHX1ihe9w8q+jLpPwgPzitmmS3gSkt/SawuYXG56sIbm2NhbYcVqig7V+nzw0F1uYalCeY3LjFznmlDjyGivlVLTZrmihFhdjPOZ3w60sQDgdoGmpBHmZjM7K2DjkAgKb++WcsjFCPwyQ7U6IqgkONgmBYgNIVEDUUc+0LBTZ/2sJ//dLyoT706yDzz05BfsWmuTOvabd1t73GNqRQlCPAz75quknnYh31NQcBSM8Z0V4g9qua5zRQEK0FY+YN6jjWs7Kd5gl7MvbCC9AyZhE99D7J0e0kJ6iY9N+nVLxnDwBJUcEdWzQcQvLRPB84jCNYTXd8vifev+qw+zhHWUDQMgrhsq+uzm4aBu5jF5C35A1qfnAXvsVLUJKTEYqCiAGvWDloXw1bwHWnv9arrqQIgSolhmFYsXiKguyl0PcP3+gf/V2pJlIf0clOT0NJ0KBxFUVaAyvzU5CaBvUtGJ0Y578a11F2MMzu5TAj0UHNPqvfBTVl7HgtzGQV/upxMkNJo8EQCFNQNFzF7YigCSe+MOwpi4DyFS0VEodM0v6x044tI5Xky84k8MVmQlv3YPp9HJddT+qk2n6Jeo/GXqf97u7BfZ5rLwbAPX9+HLbmmBYu4gAY/vzzdpHfripEDJOd+6qQEnIyEmnxh/GHIh06sKmQkRDkyhP2csu52whFNf713vgeu9cNWLEryIHman54UTqXXuWFjTq+HTpmYOCA0EJKpKaS7q+lsCSAVwkgnAHsk5PJdKXhsbtpCDRz3PBprCzbRmOwBVRtgPnMspN6aHRR7dpKicfje5aRCBWPPkrtSy9hhkKU3nMPY598EsewYYO259vl2TZZpK2wfD8JpTQMQks+4uTj5pLx/bv4xVP/YOOGDby1eDG1DQ3ce8W1jHr/c4LrtiCV+EEeH/e30bMj89q2vhlmvDR5KDOVz9RTaKBNZhQ4RISw6eIbw/7FLv8YvrfzPhTVf8Q6eTw2Tj65gCuvHIsQ8MILu3n99f20thqDNMUdgNNIiYbEpwtMFO4saOKcumruv7OJ15brCGG5vQzTer3pAsnji4aW7D3yh8Glxd/4gfW8Q5UnRpdIha7vpCmJtvqI6trgxBj0xPtlfHxiKMcrTZPWugMUf/5PmsuWY/fkMnzWt8gadwqfrKvhycXFqEr/19YbiVBT14jbbiNLmijRcDudMk2JjPYPBLe1f2av9iILQnx5mAFDpVL1N2fJ7bUxYmINPj2ALRxBTUjg0LZMAj7ziMrp0ZCPytW34U4Zg5o4heSc6diSZ+BNzicSDtK462FsOSNJyHwUIRT8zRVEGtfTVLkRs2Ur/sbdZM99pP/zpMX82nr8BbL/9O8QJ86xMemyAJuKA6xe4+GYljSmaR4cXQChv1oioRACu12lqSKE1+OgxRdG141B4wltsSfpKU40TSE9yYmqKkgpMSXUNQbRDZO6xhCdrSHiS8M57bTwQmCGQ4S2rENNSUO43GgZuRbmmGxESUjEnplDtKyUaE0ldIkH7zq+P+YcYJE/g7fqEqloqudPq95i46hpfP/sU5g5ajSRJW8SrSgb8tJeEihzQl4UZrXCGB2KddiVBHWdXNuqTePE2ccyxnYfByufIT/4PNmmz/IvDaBp30o5jUsvH8NFqUHe29VEfuY6pIRN3/gWC6u28drWRl7eFcJHHehhsvI8DB/rICBDFGrJrM2rp67YRaTei1SNuJ9WN20EA4lIwO1qQVUHhmie6U3ld2d9l9bheQMCtbz+gfN6VHwT0jM46fyzCK9djhkOoze6LIE64CccjHDy5ZexvHUzrY11YLN12aCdF3au5uZSexL/DDcQjfHo3AyFOZNtXH6WgwlFlhF7R7HOy++GaWqRHKg0kdIKqrnUnsRczd1l696WNotLrprMBamSD3bWkJO5GSklO266gQVV+3h9cyWv7mrCRxlIE5uq8/SfriSt9UNIn0h9dASjT3kIpJ2+3JJ+4G0sMOgvgEmxz7cBc7FAoM8Bknvp42fDBxesitJH42KkUoLqNEla2IrRotL4UTJmQIk/Zk1KJiTbMSXsao4gTShKsXNMlgtNsQSqDKfKiTlu5mU4WVUT4oYV1ZQHjG4pRt/3FF2d2nELY9ZvFEw8hA4Dfi5kzKwx5EwZTWJRIWpyEjicIATV5Qf503/dya7tG3A7naRMPZGysrIuxvmhaPcW3MhxM9NYmNLEll3NFKWuA1Wj+IyrmeLfx8qdYZbsVGkQIVRVkJPjoaoqQE1NEJBMmJDGhAnpLFq0F8PomCNFQLKikxxoIqLZSVJ0FOHEkPLoCPjh4C9SIKVyRIFcKRWsElTxzdtfFv2zN66POnokwu3C2FeC9Pn77O/W7jaclER1k8UflzB/ejaTx17Or96Q/PKilygaJDBoGXOICAGNAevZU9wKQhmgu1EI5jXpPLI7xAS/2T79k3wm01sNbh/r5PPkr1ZisDy80qyIv9rW3ubaL2eQqopn4Yloaek0PvU4vqUfHiYgxdmNUGmJNPHavmdYV7OSC4uu5cRrzmTssXNoWrGaxOPm4NOt1Llc7Vu0LP+C5OPnER2Ryrvl77Go+FlKW/YhhEAd7CIBX2K7OW0Ol149mQtSLD6cnbUZpGTLTTdwbOVeXtpSzX07a/g2pbgMA83rQikcRs3eXYSrDjIi706cacm0GEaXaknz589l6pTJTJ8+jUmTJjFh4iTS0jJRbflojgLMQ/U0/GEv4YAg57fX4Zok0RvXIqObQd+D1CvBaAAMELZOyvoQ7X3THPLT1XauhIQZiT5uH1ZNTqODD96ZDMCl46s5dnwpjxzMYkOLh/aw595AcKSEuipY9g72kq2cecYwTpvrxetS+uUfur5vnaW9ApcpBT7HBRipd6N5CmkBZNN63DWlaDufRaq1CEV24TlxK1b9BLEeKoVNaJrlJBrkSoGaMLudX0UVnHaxi9MulQTZC3qUUy4YxYevJfDOK02YZv8dbpgmrFljAQkfPAj1scTaHTvgn//sABvurQssI+olIyG1BYblwqIqaytrwE3jYFwSvLof6iOQZIOqENSErLWckAwTUmFRaQwkupMpb176Or4/7u9MS97KxKRdPFNyJY/t/YYFBN0ukIDbHuCUjE+4MfoU497bQORzg0CzimKXuKeZ+E7KgN9YDvV7vn0cQoDbPh9DNbn2EhvhqGq5C/QoUxdVIddZACdTx2Tx0wuPxdBsPcqpv/5O/FavucmC34/TmJGkdADNCJARSet7IZqfDWA2yb6V3eRkeOABmDUL1q2Dyy6zQLe+5NajjvatG1hQaelor+1ppjlSwrmnTWFXcRXvvb0ePJbGX7m/GnnOTE45cRJL3tvY5YyrquC0uTlcfGIBpZV+Sit8X46MM1ByYZPYTvFjOymAccCGsd2BDAvMLuC4X1GH7CBOnkzQaDE8yLtqCFTbEZNcGDsjBDaZGDOSUEQUhSCizZ6gKH2CNBSqTUO63rbcXFL9rZh/ux+5YQXJ37qZwLQFRISGMljODSkQCjhtEUJRm1V5VPTT2Sng0/UH2LijEq9TY8b4HDbtrqLRNzjFCBwOmDE+gw8/hfr9uTiHleOesJ2Z4w5y64gQzbrgyTKN/UFL4m+ICj5uULljWJTJCSYnpKisbFbi4sVSSqRuVf0TioY0dXR/LaGydURbDuEZeSJCc/ZoLFaAmkYfjy1azdbiKm67ZAELp47AYR+4zjRskPfWwdjrNz3TuPySyZyTZPKfXbXkJG1GINnwjes5pnofr26s4MOKMFO9HrKcTsxoCx9vq2af+hFZ3kzmjj+O8emFhPUoNu3I+dUUweh0OzmJGpurQnxaGuBQs941yP8rEDx20cjuz7FUJPYKjRMX2UgOjEIYuzhpfStcECGSqyPM7sf++kCI9qBEYks0CRPrBSeV+eDFDwgsnI9j4mgUh71PKl9wfXOPJphusKXj8H71fUmzT2Xz9nSSkz0EQhH0aICpE5pJcMehG+vhIdkPph4dmo0mLLtlrqJxqzOBk3KzcF59Gc7C4SAlZjhMpKoae3YWisPRp45w/fXXd7GBaAXgPgP0AwLhBVeGRHsHkvfA6D2gqwKft2dgaN0GslMW1lDth7/NqexmaiRljen8Y9PxOIWLySOKUYRk84EiQmUncPP8HeSn1FlgsPHogDEZ3KYaOBSTSNSGaSqsKykEICPBRyRqw63phE2FaAxQKh4c6MHqNxLtusdVRWCYHbZniUQ3DHTd6JdOfGvSDC693LKNvL+zhpzUTUhg+003cEzVPl7ZUMaS8igJqKiAMA0mFzWTG9hBhAgHPVlsFREseEe9X3K15fuoaDcYrG/K45LZ5cwxD/Hc5gwCpjMuG62UsktAwPYqf4fIQgfYxte9UvSXZCAdkvbITcda7EpRUNK8CLeE8kpmTUlm2pWzCJSUUxmJAIIF2W7mnzkWeyiIa/I4AnYnDZtKmOSGyedNQQi4+UcdwQiGFKxtSGZ9cyIvHsjjG0UHOTuvhnR71EoVVDoUfYGkLmLjnfJM/lU8jDX1SUhDcIHsQfd0u2HCBKishNGjoTc5X1Wta0aNsn7jdncr90kJWU6D28c0MjUlzF/2pLK8xk1EiiNk9UHZs0KAISAa68sQ8cvsX2aihBBEg0EqPvmEmm078cbGWCMlFZ98Qt5JJ6C5XP2ydzZ9+Bll9/0d/7bdyEgUIQR1Ly4h7cLTyLv7Fhy5WV8R2+lgz6UH4ZT85ZlzMK5ZzpY9uaxYOwrFGwIheWnJCUhpFah5+e1ZKEl+pBQs/XwGUT2RqWMreOTZ4xGJwa58VEga/HOpbLqUvNR/Ig+DihADJCcvfG8uUoLLrpKd4uTKY4Zx0qRMDFOyeF0F1zy8ZkBWh3j5UCtloJiE9TAH9yiMGH4qrS0ODm2pwOMO4Q96EUq8e0C08+QOv5IY2Lnton9LRiXBcRekoml2WFTLjkajHUSmNwNQm3wYRFJv6uQqtnZQK4U2c13/ib+JRFMEs51JjKrysPrRJtZ8tp2LLtrKcRM9nJCURUvqGPabo9joL2BtA+xuaqHW7yNqRFCEtJLsZd92pc7JdCIzA+f3b0c2NhH688NgGEhV7ZNeDpVP+4nxyd3uAr8p8emSTLvSRW2riZh4NYFH6R5Kq11OfbxnxWhc1ODHa3eQkRlGEsZnd5P3/duQDlvPM3nDDfEZD02JEmOcpjTbgTH74hvD7v3Z4NKxC876P5msUzvvxKx4SE/cBHjx+l66khD2OAhPG4O7aBRidAbKP98laAsRHpaPZ8XWPoGgZRz6cTtgqBE//Rkye9QQ8flzR5yE2+bqFhC+I3BZtFW07+SPlO0yY1sMWMgI82eWf23t64rbRfKFZ+KZO6Md4LnlP8vJvP0b2EfnomhpCB0UZwqNb75PzcNPEq2paweMtrXJbIdNZiAs+WhjmFU7IsyfYOeGU9ycMSvMGZN8vFfv5bmqFCRwbXYjZ6b5IBDm/eU9AEB3o18moHCSPYFZmosddoXoifNJOG4ealJiB2/qo3W2w3TXjHCE2kUfU/b3lwnsLbVUkNGF5N96ORkXnozq6L0oUnJaWo9qXVZeHhNzcphaYencm3NzqVMUvPv398gvmurr+17TCcA1sVcB7AT+DWzv+6ePHny1Rz20jTNGnZafxRaKgR33ktDVNrumYaDY7UjTxAiHEYqK6rQjwybR9CBZPw2RNtfSDetWB6j+nRNbiwscCkYogjQNVIcDoaqYnUA9zLCfiRlj+PH0q3hl/xpuKU3hWX8mDxx7J+PSxmDoAXQziibi9bpkHvngsp0wWABfhsCMapye38RPUkp59wk/P1qcxB0/+BHC8PGXv/6VaDSKpsH3boIfHOsk/5q2oj91XWibMqwA9513IOvrUQqHE/rXv4l+8HG/YwA62xvbQKCllLhi+pl/5258q9YA4F0wl4SJ40jwesnLy6OhoYHHHnuM73//+0f01WHwMmBLDZm6mx8/+F2yc3IsOaSf7fp7l/WuB3QXi2ul1JJrC7Nuu59wIEq6sNNCW/Hyjs2nCQObMHoARBUkqiGuzf6cW/I+pSKSxM/3XcAHDZMstboXkfdxT2Gfz+Z1Wz5oXyAO23bTXgCcd97Rp/1nX6AKm9AocKW2y4A9trvujMuklKZGWLPoeQBG/2A+VbotPo1IWMuRkaQze1yIUMTEppl8ssc4KltVG1gnikTpVCVbqJJQg0a0VSEpNURT0GDkKUGycqGmSaVslZNoCJJGhAhXOQjUKIhO7joZNfhicwlNrQH27K9mckYK6WfPJdltH5i75oUHAUhKiKMYXj/8Qs1WLUL2+IYGlE8Zlj+4He7+AoCEgkHud4vV70N9IMZqmkZefj7NTU00NTcPShZYWw+tMZOi1/hqRlcIJIGwwpuLckhutmz8jUkJ3HRj+cAOnmxn8IjjbQgDpDv23bE2hEvBfDMUA38QMPiYbP8jTRGQnOzk2xdM5MfXzKSuKUhTc4g3l+8npJtWYr0wkaYNTCeZrnouT3+Hy9OXMjI5ihx2DPYZN5A5/TwUVzpgAUGrWQIZsmKwpB/87xsEVxu4Zqm4T1YJbTQRsWPumKTgnKEQLZG0vKpjNoHQQLhB2AXCCRwY4nmI51wknWFtl7qn+nUepARbdgTHqCCKx4DA4Mctd07IS7AbeG06BQkBAA61uvFFNVojagwMuj82fAlS4RdnpjOlYAu/q8xhYkEhpRU6LcW7ueNYP+9tT2dPSR3CqVnxN91QDBHzHWe1Gty6oo7J5SH+dkI6n47yEtVERzH3fhKau2+Y0NuB7sX40MMBXra1X7JZqygHI4o90UnzyVPIWfUOKWY1e+cvxLFuP/6mYBdAdbvHg9vnJ0k38Ljd2LvxxwykPabnDCGtBV3AspGCXelHZiXI2NopgiPyWsbVSU7YL9tybnttOYqNVKERQXKxI4lcxdKxxqsOXg83kyo0chQbB82BxzeYhk5zVSl1FWXkjp2Gy+aM+7eRqIoUEo8rSlOrxqFqL/sOJdLss8f8MRLD58ewheL2d6sSmh0qOU0R/vbObh46ZhgvTM7GLgUqAqOfpRPbpW4psGkGC0Yf5IaFmwAob0hk/cFsosKGiEYxAxEWnDqNPyzIZPRzz1D53kqU5ESE24lRW0/+qSex887T+JX4or3/R5yLY8+qEC2q4qJvLsPtCPHmIpgyPsrNF64moylM45Ip2JS+J+Hmdl+W8aXyvV21pWyo2IUQCtuqi5mVP+F/lA8XpjnikFHaYiv61otL2+d1iIqfDFVeAaBJkzHhJltuxDd3Urh+/LJQwxmfXv67f+xOHL7SM+q2gP+MR+AR0bPwOsjtnwUzOG72cGYlQsnOGvL9paCpVFx5AqMjdWzZ18Cu5kN8Vywlox/C8r8KprNwRiGzvLCtuJqMlP2gqdSechJF/npW76/ng31NtJRXIoRJQZKD+mCUbbUBkDArPxFDSjaWtx5WgV2AbhD86BNMnx/F6wFVJbxhE3V3/XxQhPmSg9X85cl3ACjISWPaxBFfOdk2++7b+2AGUSLNzSg2BZvbi1T60Gd/8YMuf1ZKnYeCtew2wnzTmUK2Yo8BQXTk8zlHGrgnGLgn6DiGGQhV0rTU3j0wiGJDRqsQoV1MyQlx/7dHc96xc/nbG8V8+EU1/mB00PNi2mxwRVn5jCscwyebV6MbQTShYFMUIqaB8SUDNv73M3+kOieVOy67g3VrP2bjli+oyTkfJp0LikKGO8RMZzGOpjCJ4UYmpOxCKIKAs5HxngPsjo5mv92BLdKKrjrayUJcMt3uRvyyEk31sa6llbS8ckaluKiRu5g7yUVmRoDbN3SnakuiQmVV6nx2ZkznvKkRbj5ZZWaRik0V/SNNnQq1m0Cu3cFPswo4pWg0zeeegVo4vAvoZrz0tVs7f+ynGpCfIpiSDUYzBPeC44BE6EfDJCDTVcWPp97P5aNeId1ZR9S0sbl+Cr/f8DM+KDsjLjDopPN6B/8XQrSDl2uqGivi3EuHDz7apwFE8P8PJnRCmzwtBAKTqA7l0QrU9FZUKWkOuckMqiSgI6X59StAHxuuW/FzrHMlpzs/QvivYr8+koDUehW5MpJSSfEkIgT4QkFcdgc2VbOKlApQhEIwEqK8oZaoHu0+FkFKFMAwJYawXtXDbaI9AkAn4AsrqEpbPaHu+hd4nQbfP62aSflBTARm0KD14wYaX61Cr4q0Fz1o9wmaElQFNSUF+9ixuGZMh7vu6nhyKalIkPz37DAHpmZy55SLGZFWgDmQtb/qnO7lMyks7aYtlqvL37Jf66tkZSJsGmZ5JSgKRnEJyrAC0AZua4nbPyPLEMJEBuHbF0pOm6lhRqOs2GJw34sOFE9XF/63v93J/tBo8N3vWHLHU09FeOpNBkx5hkomb8cVMQ30pcvQ125AybF4lFlZjTZ7BraTT0Ao/Ztr80tEvJadeGVFySZKdn4KwIjxC8ktnDqIYG1tse+Dyz0cmtVfWI9/3X5x4u2DOoaHY7bdNvv7sNRampzp+LzXkpsmubGwlQW+3djNKKaIX06dHgOCNgV4dMHtWzRuzvZjP+MQwtnhU1MENLRY71MTLRLW3WdtLaPTiggFFDu4xg4eEPT4XG+fOntHeZi+AU12djpvpmmi5eeT8/y/qX/gzzQ+cD+mqlp5NYbRHn/TXzl/KNrFxX85knFirYVLQFSHJpvA6/ZgNPoQUdC8nczEh8EV/bAv+nt4voYoh1AU+/CRJEzNJlz1KvVpeSy89mw2rdhCXeUmhKsj9uHm7AVces1kLkoyeG9PLXlZ65ESNn/rJhaW7+a17VW8vKcZX3k5oIOw89gNTZw8Lsy+Q5+wuWI6V/x9Errphy8Dg6Qj/BFME0MIDMDAeu0CvCl6was4zL4upURLTSLtW5eRcsVZhI6bRc1/P42xai0XFFbxjXk1R+IX9dLapOrhl547uM9/rfUyevHi3idJrwczECMWLtDSe+elGRaFcNk1po7PZ9OOQwSjFv5Wl+JapsAmJMdNKeNHl27khCnlOG0mn27LIRTWei2enZ2djV83+e1Lrew4IcwPL0on5xg7zZ9GCOzqBAjdD77TJh7VGCp7C/3oQqE56oWQJOI1qA80EQq1Mj1rNKvLd3TdA/0FRW7736ZinzsT2/TpSNMgunEz+tpNEDWQcSAVCbudvNtvR0aj+DZvZsS99+LIyxsUmtQm0yopyTiOOwZ1xHCMQ+VE1qzHKK/oKGwc57O3+aoCy1czqaGJv954C/+V/BKfLF3Kqs8+446mJn5783eYnZJE4KOV7eevrzW8LXkGl1zeiZ6lbUJKOuTJjeW8ejBMq1Ri/M7A0JO4JPctMuz1bG2dRMBwgbQju4kNcLs1RoxIYs4cSzb7/PMqXC6N1lb9qAlQm89QQiwuHmrDCuO8Or/KqKPlw2oufjDAoRrZno5kGILhmZL773agHnM+jy96ZUjJ5LUXxeHFNTsJE33s2m/8wLIpDF2eWM/F56SUmNEopjYIMNCx9VKQJGgqOhKvpqApguaIgYLApxuY9BVPPzTjNU2TpsqdtJS9T17WIerrSqg/OJmsMQv59sWjuOik/sXXzLbqqPHi5LwYLrxAktgNYevfSM+Nm15atKaxtpSAr47cwukIocStc0lpxX913qpmnKR7qMSRuP3hlAEGiqaQnrWGETnjmJtQwNvFH1C+93xoNbvMuzQN0guPIxz4JQ1bfkukcgNK/WKkmkRT0T04U8bjcdloritGq60m2LQTfd9vEGYL9XUN2B1e0qbcQ/qI4+PzIcqOpXdOsmJoQxsdHRELfcxxRa3kpfcijNulsGC6xugr/azdHeDzdR4W+tKYrLmxDxi8kLh8Wh02nE7FmHoreCAE4YjBzn215GQl4nHbKTnUYOUKten2R8l/C7K9ZKS6cDs1nA6VuoZQ+5gUJBNHpRKJGvgCOvVNQQ5W+rof7xDpKOKwXDR73nCS7/gFNk1D0VQUh2rVJA/7EK5ETENiTppOuKUZbPYuyk3nrp5/powLTvUxqSCLf1Wnsy8AH+xay966cm6ecSqX33ob7nfeJrh+DTIy+GWPZadwlloHLHHA5xGY2gI73VDl7CrCm62tBCt3I1Y/y+iZN7Jt0xh2PPZXsksPoA7AZKFdMCMD997dnLusnA9bE3ltlBUIcdkP3+XsqancMS+T06r28E40AqoN2Rgi2yXJTTuW7Y1rOSZjFMu2NVMTZ1avEJL6+gIq9hbhDyQiVB23t5nM4QewiWC/HyDR4eXCySfDqKIBLcD1PQmQUjJ1xnRykxII1VThOfkMVJcLs7UFe+FIgv95j1zhZGrBeD6rX9ZRWbSbCuU2IbjYkcQuM8InulUVNiFBZc5kG9Mnargd1spNn6hRUmby+RYTqg0w4VjNxcWOJGyiqxPq/Bn5uPbs5fxP9vGxz86LRTpIyVU/eJ6zpuVy+7x8Tqlu5J2IDqqKP6xRd2ALaQkuOLiFusbdBCIuUPQ+jV0KUAe8CaQBb8U+TwNeAC6g75CGxWlzB/fkxICgZQ9B8m2cQnWbJM724d/uwjMxgGeKn5YvEjqFj/VFOgU2IbhjUjKfVgXZXB/iqqIEMpzqEb90awpTUh0UeW2UB/R2Q3xninPpjPTe+YRpoAcarcPpToGYUbanFXow9lqo+JikNjF9uINZx09kzNzx5EwejXfkMNSkJLA72gFg2ivCAIqqMvm4UwgYOr5WH/NPP5fCwsL2/tOvvmBw1+0xK4NnWpGb4P4DfGd1iNUNXh4aaRnjfvjHUuZNTOKiyZKJZYdQdInX6+bss4t46aVdNDeHsdlU6uoCrFtXhXlYpFbUMFltJKFMOJMwKutDXtRBMOfePvPtI/aFxxYiL7EBieX4SHb7uX7yUmoCSfTlMn7kX9br1Rs/7ZEziPRU7BOyiby9BCUrEyUznejylWAYPe6IW3sQIAD8/igbt9ei6ybjR13K/e9q/PiMZxmV03DUYNDSgA07QxTmqny4xjLinDrHzYEKAzmA2DCnIflmRZQJfhNDgBSi3XA9wW/yzYooGxNUQuqX6+btWQfoBAJtj72PiE40qvdxnvn237+cBzAMgutW0/T80wQ3rB0QCHQbjxQIJJLSln08svl3rKpYylVjb2byTZcjEZS/Y5UETD/7IlxjCtlav4EX1/2B9TWriJpRFKEM3GHzFfFh3zA9i8TdO7hm6T7+47PzelEYpOSy7z3NudNy+c78ApIqyjGjUSQSm8vLrqWv89nwgxwcdyLKik/Is9uPUC7XrdvAunUbgGcASE5KYfy0SZw3ooiFM2chsrPImpBBirsIp2Mc4TUtaO4iHFN+hhH1Y0T2IfWdoG9HRrYAlvE14bTWwZ2AXTGj8eUXDW6/f/7jkUYLKUiz6VyfW8NN+dW8/8FEfvL8PKobrQTB7NQgd1+zmudO284Th7J4piKT+qjW4aHobasZOuH9+1nxbAkppQncfV0GYwrjT2S6nt7t9rK9vJCwqoE6xyEdRejVH+KqrCcQUolW7MLlP2CZYw8P8u9DsbLiS00L6bsfOpjHaR+Sc+EsGgmqQqh4/yAHnBxZecg0YfQkO5de6UGpOkRtuIrG2kPkmQHOvng2e7Y52LklhKLGB8rfhW++8w7cd58F+NymAD72GLS0wE9+Aldf3WsXYROe3A1jkmCMG/YF4fVi67sCL1w6Eu78HDbVQ5ITzh4GL+2H5gjYFKgLwbraI4vW6tLGu+WncWLWp8xK3UhDOIUXSi+hKZLcfmxUYTA5dTvf8D7NCZs/QPlPK4EKFVBw5BuYpybwwdQzeSF0BTAbsICg285aR7EUaxPLYIiKbStoXGtdMmV0Jmd84xiEy8mAgaBje2NGouD3YzXmJisxvhL7Ogq+D8M0PR3AqJcxo0Qc6+b1gsdjvf4PgbT1qKN9P6ajzc/nlNom3tJ1UpM8LP9sB7gdKA5bu8Nwx+4Kjl8wruszCAhFDJZtqKGyLsiegy1fYlCX7PBiyfjPkWxU0Ve7MWs0jJ0WCDSA8FqBWLJm4EP5ujQpFNRwhESXTui8VNwjVZzv1KLOc2KbYRLa10J4p0CiEtq8FaFqmMFgn0HDh7559ZAJu87Ro8n94Q+JVFVR9cgjNC1fQcv6jWzNmsKTnoUcUNP6X4TsiOwaSW5KM6GIxvD0JsoaknDYdMoakvq3xkLQ5AvT4gtz+RmTuO2audz79+W8v3LfUdEAESMp/pDBko8qLEfR1Cx27vMSWZrDmWMWEzQPsdOncFKqTkWlRjgGzlsfgc0tCs1RQYvRc/HxLiDQpo7UQzSueYpQ+SZUTzpGoJ5o4348o08hefpVaMnDe5WdRcx4G9UNPlm/j+Lyem44exZXnTaN7LTEAc3D04O8vU6Kvd558XSc1VX8ZGk577VoPF+QjB7R+cFjyzhrSg7fXDiJtI17WbSvCtWuUZCVxpkzTmHZ5140eyOKLcj+gwdoCWoYPYEDSfDaBAsK3BSl2ll1MMDashBNIaO9Mi5xOBAOX6ueiVH/grsBplTt7f5+CozYlcaIyhxKRw6jSg0xd18zjl21lCj1iB7kvdc76Xw9y70m0pQdgKfSQOr6wAJFY54ZRcI5B+CaXVA2SkPkZmD6AujVddgKcjrmu4f9m39NyxEHMBBUaW614XIaJHqj9Kuw7OM9LFGnPnTDRiQa4cOl6QhFYdIEP5GoDTpVz+6RFn30+yEhv2lXX9wnZTL0AEIoKKqzb4b4+INdyTASj6Iyu66JxLVbKDz3PNxTJ+NbvxHf2vU484eTdPKJCFvv4PGHJybYJ4LZImgrUGloAtskSbTMkr9VA5KaIbkZRu+R6KrA75HUZVqA0HvGauwb4xny/XDt8JYjZ1Q1WNQ4DrfpYt6Y7SgxQOoFY7bzxb7xjCOdC0fsQxpq3DogwITsKvJSGnl/26Qu6ll5UxKVTUmcPmkbFY0pbC7P69ceGYx+b/3dS4dNr2DL3vKYP0OhtKKRu/70Ji6HrV/s+Irjx5BQUc4lz+/jI5+dV4qcICVX3PMmZ0/L5bY5RZwjDrBU11FN0Fw2dk67CnVdBc3RIHvOG4urJYEWXUftdFj7lKvbfR9RkIIUl2DBWJP/fPY+poiQO+x8chJVDtRaNbJkL3ReAGluGxHDpDVsEDY6bOeJDhW7qtAQiPYr+FgIjnDc/v+AI13k8A9qfzE1mnnPP91FtGxsm1fTtHx5UZ1otQU6VnXX7xF2m6VzmJYjvkARDO9hASSQYNPxmQqf1aawvj6J5zIa+eaog5yaUoe6xfqdMUXyYWM6T+4bxue1KQRNBYTELnoxIickwAUXwOzZMGZM73K+oljXJSVBXp712254dFtgsUORnJIVYJQ3wpP7k3m2NInKsIYrav0mbLfuJeJIeDVbWrufGGHZBIh0ClCL6MgWH2ZUhz4SuVLOCvcpdwdC1njdzjiS8F7q3Uiv2GxkBiNMLDtEc6yc+XAMMoMRFJutXzp0cG8JZfc/jm/9NoSqIGJrZzS3UPvCYmxZGeT98CYUR9/2taQrBtl2+o8HhvYgN39hFWrQVd5/r4lGfxAiVZjNseCgiMqny5ut9QqvwGwDFDYEO7YHqSwNgf4pstk4IkBZSo2KxouYnKMwr7C5C1C0lFFMI2RhEytORKcCh921z3kWgD0VrUgg2WNjWLqLutYweypaMQG7pjA2N6Ff/sEV/bHv1DTydkQHoeLQbGSkbCHq2UnO8CwSDikcWFsO7ilgxhf7oBtRWlrrEehEDB2n3YvDkXTUDi0XJscfPw7nVBua5uL4xnRKFm0hiNpn4LEQgqA0eTvczMpogGudKcwQLloMlX0hh5WdOkAfk0RiSEmSpnI66ZRu8vL8nkY+O8nPpWcdYETmAWbKT5hhT+XKYSOpKBzDlmA+65rsbGnwU97aQjAabE/k6FGfEwLcLghH0GZMx3bCQvS161HHjkEGgpjlFchotFceP1Q+7etyPd3eryFqUhcxGOPRqI5Yz5dlV9jj10m3q6TalF59FbIX4FBXIMB45SXEgVIAMgtHIC+/HNzunulwGxC07Jmie1waN185mjDVmNLEJXL4x4t78Qf1PtWXtPPP5P/a0LWn7pnSs/gRi7feuMfSmaaPSewSj93tej3Ymy0U7P4wZk0Zcm8ZjpGXwYXHolQ2k7DnAEowDFrvhMN2/MW9Sg/hiE51TZN1LjKTY0XQehnwyw8NqT0qtQ99XtABvtUZ6L/HkOy/W3z+53NuR1PU9t92xnsFkJEIRk2tFcyZkY6w23sxBxn8mXssue9wIG4pu9iFZNs1pokp/+cVmPYEacCWl032j24l8dTjqXn0acru+i3ehXOxFZwOdqj572fwffoF3uPmkf/Af+GeMsFKNpa9J4MEwpKPN4ZZtT3MvPF2bjvXyxXzopyTZsnIXqGzeHWIR5f4WL0zQjDSB++VEueEMagJXvxrNpIgVObrAnXNTry2BDK+fS3uY+a0y5f9scMcfquGDz9n30//TLC0rH1vhStrCR2sRPW6ST/7+F710H/dfXePOpLD6YQ1a8iOFbAc7XLBnDncuGBBj7LVRe0J6z0pCFjJYwXA1tiNRgDXAfdhKXq92Zdb9vRIeyJJbuzNfqpnTAMpyfp0O5EkD/bmAKIPPuRJ9NJaXonmdJA2YhhRn5/WsgoETvK/nUH+GS3IxmYwwXt6ElpxItX/XYvpC5GQn4vN66G55CB6KExCXg60Wnsnw5POm2c/xF2f/ZkNlZuZkz2Jt3f9h+WV3+POGdfyo+lX4bU7MQeS6Nwm48T8uYqQmBEVj2bys8kHmXWonHt+I/lsK8ybN44fff9WGhqb+McTr5CWUsJffy44piaV0ruyACsprfOelFJiO/5YzP0lhJ5/Bdv8OdiOnY++ag0yEOj3eIUQRKNRMjIyMAyDKZMnc/7551O35H0O/PL3GE3NmEKgJSUx7Nc/5exzz6F4XzEfLf2YxMTEGHh17/wjMaxy4ehjKBo1akD05vq+9IDDYnHfjugoqoKpqJyf6OcyRxCH0Hk+JcT9TR4UjMOk1LZTKg5XvMm0+Rjrribb0UK63dJlch3NzPAeYrM/l6jsmV780zuyRznY5bBx3slTOemUaQjgzY828dbHmwmGo32uoevO7/bK2w4F67h/4zPUR3z8bOLpLMyc0Lt/pBcg6DYAHUUReOr2s2nlx5YMfu1+lKRxlm1H9BHtEaskuLq4gNYmH3rYj+JIYnNNtmW4Pgqe1lN+kqJKhGZiT9Gp2+CkcpyONyFKdppK8lxIzDaprVapXCrwJptd+pg0vgCB4GBFI9mZyeRrOk0ffEZUHF2S2StPnd/r94ZusGHjBgBmTJ+B2gcox+knWet21udFg8zhrcKNiU/8eXC7LbQ8Zac/9pfB7bfg9bguGzt2LLl5eWzbupXTTjuNZcuWUTPAwuUyVuSgDbtxj9faw7OaLFnDCtsQXx17s4DmkKA1mIISDGOaCmqig0i04ugQnFQQ+Spmro0NFZkEsTF/YgVaXQRUQb8qWn7JTR7Fb9TYwiqKsIpgCVCEiWlqYHpJtdVzSdo7XJm5gnF5DuwTr8I795vYh81BCht7DrXwxcZt7f1m/9WO6QezRWI0ScxGiV4PRp1Er5C45igkXWPx2ebndKIHJMIB3nM0tHRQUgRqkkBJEigeYN7Qzt2SYEq3fK1Nb9EUB3M8pwCwpuwddDMc0297SsBrbJ9g95RW1MQooe1uXNN8RLe4hiTsSgIOzcRr07FrKopjMgD2YCledCKmIGwo/TsepkRoNs4fD4sOTeH5dw/w/I/CrFyznydWK5w3WXLe5CAP7lNRkBhC9IgcL4RACnAYkpN3+yiqDfP0/FRenJNCTaKto0pqP0bY5OwqqymxnA0j1ocqJGMdlpy8O5yAEePNakw7Nnu4V7/ypBQFQzcJmG7MvJHYopsJ6Q6cMbCwLrYHt4vkrEwcDjuu5GQ0l3NQ1v4fet6Qng9DgU9GKiwZrx6m50gKErNIcHrYV3+IiBFtXz8p4NydBgtLDbTDQknOsSUcafdRVBKFihuFOlOn1tTbpdhCxU4AkxNtHuq7yT14OxpffHqgtZJNH/6LT9/7mLlnX8vJF90Qp44hqKjz8P6qYZxz/AGWrs3lb69O4sm3TKrrXdbOM0H6fJiaEj+bEJIEXcPINUmOwE8/LuZ46WTbOXMIRCO4FRWjHyfi0U79GlLQGnRQ1mTZ3FqDTgthvzWAPdnLd79xAreFDhC5+9eUV9Zjz0gl2tyM1+kl8Re38+zZqfxu9zM011a193+ZZtF4w4DmqQdJSw3R3AwV1dDYZMUeHz9rB2Kpjifat9+/DQhayx3bszMP0ZFv0mav6rHjHXHN09qyHTQEmjnUXMOr2z5mas6Y/sV4D3Jb+sOJvfNoM0QgEkRKicfuAtXV62hH3me9Dll+xRDlFaAq4LRjH1tIRmoS8zfuTCzy7btkcrhh7tJww8ufJ4942r/vo10c96zBimu7/PT2k3cc6Z9h4IWLH4khc52zwImteRd/WlXBxkaD30yzCnD+etHbzBqXyXlj08mp8WNrQ02NEwx60oh0fKXl3Lm5go2NOj/JteCd7v/7cuaMzeLcMWmM8jSDaWJXBAuyXXxRDSVhC6zoQFOoC75TFxD+aBSjrh6EwAhZSfn6oTL00qOvqCGEIDc7lQWzxiKA3OzUr2RB85yf3NHz7gw3YuxfRNmiMtxFSaROdiOKrgBHas+S9GFA0GAVsf0k0UaLZnCFP8hU1eLn0oSEuToZ14Rw5JnY0kyEHWzpIcIHVYJ7VKRymD1O6sjwfmTNI+h6PY6s73LqnDOYOXYUi5cJ/vFcBQf318atg8WFdSclKd5Ebrngej5cu4xAKAACxhWM5JLjz+a15e+wrXTP0ABQ99AiJ53AeVVhhqkJnKBmoU9bwDPObJACt+njWyM+YryzkeI9k3lw1EdkOlp4fvc0zhq5HkXA53vP4paUl9hSn8v7+gXo/ZXpzAghn4u0QCbXn9tEY2UBWbYcXt25k/zteSjShtEtQgckOCV+3cG/Nzj5vEJwwyl2rjzexrD0Nr90/8+JKSUuVeWEiIltTymu885HmTKp/3bHw+38bUAzwKnDNI6JeHDWGKjAoXkKSYUB0j/RUcwBFIOSoCo614x+llsmPo7XZuX2ugizMGcV98y8l+KWIvY2j+uz47x7H+r1++bWFvYe2I9pmIwdMYqkxD7i1HsDgv7/sC3Rstt5dlQIhutRikJBollpCBNcFSY1YRsfOVLRZPw2w6feLv4KWTogIh3sixaRJFo5qBegy97t/JqqMia3kFHZBSiKoL61GYdmQ1FUonqE1mCAZE8CzQEfda1NPQJB56U5+fbp+fzzw3KeeL+MkTlu7jhnGI++V0ZZbYREZ3wA0N3S/ZjB+JJZjVw8qxEhIFIVpvGVKlo/bkAGzY5CvobZAf48ZgzueXNxzZuHY8wY1OTkTkDQxPBIIGiXvOCs4JD6OQ8sXMjsvAEUTLnKekl1tB7GegSJtiB21YrhsKs6qY5WNEW3CiL20Ro6sXOzugap64ikRKQ/gDIsHyUpAf1QWe8gSb20uP0zUd3yAQudncFkGmrT0IRkdVAFsQcTW5c9++9/d7x3qx4yUxqRwGvvphAwBr6/h0omf+7jfZYdSUhmv/w2KWtXYrvofBAQff0tqvdXsFYdRqSffo/L8s8eVKrwJ77o0T/VxWZUu5eqnS8hhCAlPZuc4VM6wK6PAgxaIAnEwjZctqNyA8XsgzKG2S6ZlGfJlWtKgiiijcz0bo8vue0PfZJRLcGaG701/iJsEsHw1FruuegFypvSeGDJxeyrdfP7KskJTRrfqvgPhcHqduyNfpj0kUJiiwrsH+bgdESxn3kIYbPGWFYFT8dqNN9yKeTnQFnlYZ9l99C5YoE/R2uhre7B0Ra4fOXXx/R+HI0A4XA9Ag27IwlFdfV6x8n/pt1uRkinactr1BX/h5yrvoV9xKPU/fznGHX1KAkJVvxMPwefevVF3RlXeuCtom++G4sj+uJ+7xF9moAbyVbF5E0Txp92No8+/Ai1mzdR/Ne/UvfZ+2h4kYQxAYGtU/a2r3f62ylf49SaRhYHdArzBPmRDbQUz8CYdS1le6rYv+ULphh72ZclOdipdvgF0/Jw7dnNuSuK+TDg4NVhVoLl5Xe/wFmTc7hjdh6ntdF1VSB1FYe3ntYSP75DzXjT/LGCh19OU6SJYZo4NBUUBRuQqIFJlKg0UTrnIUrZzu9km52sPQ63q91MCIFeWUt43wEMfxC9vonQ9r1gmIQNhZao1k8iZh2sJW9+OCTzoKWn92Kg9iF1J9BhTxeaC1Rvn/2GogZbd5UT1jvsyjX1rdacmYLspCC3nLOdm8/aRk5SEGlaGzwrOUCiN0xD0I7lOO06Vy6Xi+uuu445c+bwy1/+ksde386O/WEe/G42M2/2ENgZpemjMIGd+oD4jkuRpPkEIUWiCBM0G02+OjLdadw0+xK21ZZQ11qHsDs7YQnFT/XaJH2pKrguPx/H6adi7C9Byc3HdeF5BJ75N8EXFllFc3uBgw7u3WvNpaKQfOKJuMeNw5aeTri8HDMcxmg9SmwZKRGpKST89E7ss2YQfPMdzIZGlPQ0zMYmpM/XBaBVxMuLFIXQll3kt/r409VX8vv0dN5Y9Abbt23jjgf+wD233cGZyWcSfvM/SF2PxU723Pv5C8fgKi/n/Gf3xuiZAyklV/98EWdNz+P2OSM5xSjl7agBTjAMO4gI79Ufj0OJUukbg6L5mZi0luLgcEKH9e/36+zd28yaNdUA7N3bjN+vHxWXa6MhbTGSqpCETYHfEFyX4+eGcBVP/7aBxxZFMaUlBhumJdtfeYrkjh/k87zrx/x9xwXAK0elv/XVWl42e5V1FKcbWZCDotqQpQcxY7auvtpQ5YmZphmL2e98JmOnTlVw5eXgTT5KX7HsOCMTU+wUJtjY1RxFCEh3qGS7HBgS9rdE2NoYadf76BajdWjGKxSB5vAgFCehIJimDUXRMA2Dqroguw60xH1uu/gYT5zLl9naXNemqRMJtVK6421a6vbiScwgITkPVVXjojsREw4FBAVuayLb3rviAHl++pPJveoUohONasvd753tbO2f7TSqg1BQFKj3q5ySOZkUezLhgNKDRGn59vInXIInaThVGx6gpmEHw3Nbeeedl7jvZRci6gGRCPb7+fElPs6d4mN/WRB38mTyZv2U1Px5YPZeMreLDmgIUMF9vEVBQ5scYIBUO+Sjnui4TYPzTrAxeZRKeZ3k6UVhjpupMepqHyu3+1m1wctcfwrJitYvKqcoiiUHK0rH0VJixh9FaY87krECFfa8HNyTxwMQ2LqTSHllt+PO11vbN6dEMjMlAWSYYKi5PR4jx/BjO8qAFJdDI8FtY9OuOgxTEgpHyU9qIRC1Uevz4HGpqIpg2rh0AsFoP3SUo2x/f+CIPWCaJtu2b6fVH2DSxLGU7KvhxRe3YbPZQFGJhoJceeVkRoxMYdu+EhLcVUyaNAlFUY6Q0978PMyWklpuOCPIL2cHeMmfxUf1HvbXVvDb5a+wcfxcbr/0IsZPngrlcXhkPt8yILrj0CE9oIAJdYbJUhO8BgyPqYm1bVu/ppaGJ/5KOPsV9HcqmXPt/eyfNIcn77yTbevW9huTR7vriS+oCSpETAVhb+barZYAHtUbWLSkgvfXpJDhiTk+TMmdY5biSL+SisIcjhtxDnnlJcwavpy7tp0UV8KfbtiorcxBFKeSkxxANu0k4E6h1pNPplE6EKvNoJd8tAKiHbg9HlZ/soyFZ52HHDuBaOl+1PQMcDhIPuZEvti3Aff8ybgcboKm3r2TLabbpQmVG705lAyfxsHkTPxZgo9RKN6mdGLFUCpN/NNMRI5keFMNNx7YRJopLXtfp+e8+x9LqQmasXULceNWi6lH9DCLFlfw/hf7yfDarFhnTRBuirCjCsZmJUPiTHaUFBNu3IyS6Omz2rQAHEAI+JAO26MCTIh91+cSDFGhcKVHBTeWTKVI3CPCGE0avs8TSZzfgn+9F3QlvmA1ATuaI5T4ovxmZhohQ5LrVnG0AdDGBJs2ZuxQBLnunjn97EJvr4TAX7WH2l1PAZAx40Y82WOGJqxFCPzNVTQe/JgTTprCsMwIBw9UkZefaxHSWBvx0M8H976P/Q6AXz1eQkNQozGkIkSQO+oLAKgMNVK6t4EPPnORoDoIGBGMlgjPPbeNQMBKNM/OdgOS0tLmbtZPoEjJZtJiNdePLoikrf3WfOHIKYyA2ChpqnFhNAsS1wb4nvvtuATo9loyPZX+kCYIFVOoSFSkUKzXGIDBgCK5FUF9Y4hN22tJTnKgKWfw8FKVO056mlE5DUelqCgabCmJsGO/SYPPohDvfmZVuVIGkAieFpVM9RlW4Hon5UHGDGNTfQZpUUn5lwwErfQWGSgkaKBMsLL/zG120ImrMmpxc+2X9AAKtmEjcB9zHEZ9HaFtW6y9NmAyIlBQMaTOqqqPSXWmMT55MkIoDD/t7JjAZlUgfv/A66ys/BibYkcRav+3sAAUi6Z/VYoZFz3wAAcDJldIhW/bFRIqLT78ii5p2hrA92EqkzwaTdLAUBQiEZ3MhiampKSRVX2IoqY06n0BFFXpskfefzWVbdsMNm7X2bwtzO59jXy+/FO2LP+Mbzz9EqtTnGjeVKZNnczEgxuYuquaxHt+yKhwDm67G0WbArQ5xiRtpRoy72gc3An4q/Uy7Xe/HNx+2wIVO1U6PyalhR+PKOeU9EbKGsaytu5yJs33MD0qKK9qpuSAjz/+ey6zxlbyhwmlnJTWzIMleaxsSrBM21/ynmmz27fvVVOiixSQAWz+T9CTrsNQspC73kUdMRdOuR6zdDWUbQO7q8uA8791WRdBQSiChCljYdlu62i4nWRdcCreqeOJCxXtr1YgcHbLziF2foBqxmjjEFpuxk62U5CVRqgpyjEZ+QRSS2kqc5Cflc6oSSF2bh6gx7CoCJKToXNiVl0dZGZa38VBs9bVwZVLIcMJFQFo7CE5vCUCz+3FCiKQkG3hm1Pa2v24NSVKdSiDH264l2GeQ7jVYOwZJTmeKi5Pe51LK18i9dWDhHYoRCMqWpKJfb7KrhPm8JTtRj6qOpFAxN3ep9ptoGDMKagonehJjPYrCooyQCUsljAyOUHwu7Eax6YeBgJtSPzLQjQ+6ceosYy1Pd7GbrfWCay1aZNhbTbr77ZD2NTUAeg9xC0eHS3do2F32HC5bLSEdctg1DZWVaE1HMXtsqE5tPZASGJV6VZureezLXUdnwllyBDlZAxI355rKXKRCrUfBFWCCZF3vaALi4drEpFh9SWDoss+i5+48LVqAjB1FR2VvJPDtKzVMId5sDsNoiGFhJkK5m6dyDqNitt/3Kde3taiB0uGbMxGS0s7EztqR18bSR2W0tWELKMUZpo0+j34wzkU5EZJdgdweLwWUmMf+6J4TVe91jQlu0vqePW9bZQcajzqSJGCbBfjRiXw8Uqr3FmCU7EcKcLEiNrQwi4cNhO3TZBrunEYkO8No0qBAixrVCmvEpiSXqu1SVNH99XQuvNdwlXb8RcvI1y1OWZANtEScsg49VfYUkd0AS7uzbXSpvceqGrkweeXs3lfBd+5aAEzxuZh0/pXdrJwiPbY4s+LWXOgiRnzxnHfxDz++f56Gnw+vnnqeFwOG3e9X8xwj50ZE3Ox2W1s3naQzIwxvHbPTJoCAV74wMBmCzNhTDZ+f4jnj5hXE9PvJ3rgIPZRRWR7HJw7NoHxGQ6WlwTYVRshYhALxIhP5+nOR9eVXcaKfvRn32Xc26PejrcEKVbjCjVSkt3KDBXwXggZI3pJav4pAN+58uRebZ1TxxSwp7gUDwYJx8wlIyGhd3vJn37b62MM98H1uwTr0yVvzXBw+rQxaLoDNcEbt/O+s4jgD8G+LTb2bHeSmSOZPL+VlASz/zkN3Sa1Wk6sYCSJelcyoVHTSfBGaHKuIxS1gQh3SCQ9DX7HkiE5FwV/vrdXnhoN1hIN1SOEQHOkYnNl9E7oDgOCbldOzNi/TttIRnTMULijCnc/+bKaDabPyldU0qz3XU+L7HgvbWB4IZyNbClE1o9GVg8DzhnS/XAElrOMiV+qpDXspLo5hbxUS76qbEijJexEqhKpgBEPT+lkpDjUkEqd34PZDfKqiWRLWT7BsONI5fFL6Pdfr63snuZYKALUNfl4Ycmafu/fNbkTOJhiIkccx0U2hbdVa9znG9DUHOAfaakUnD0be0sIHYkZiXDCJzuw7SujQI0wprWKP88aiUh0dQGzj9f3YdmLFPx+PxlqhGNGmujRCF8IL+FAa8xf0zvBt6mCyTkeav0RtlcFuszwsBQHGR47q0qbiRg99/Poxwe7rouETQdaOS22YoGwwWtrq9lQ0tyvwgFft/bO6DWD2t+4njSVNhAgtYeKzjJ2jdJ3IToT+PaoUqQBf9o/kqApWFqdxqqGFG5rPMgPFEv2/tOOQh5NGU4oagFAo/SS5Pzww0fS4Y8/7nj/xRegx7S9Dz+0ik61y3uiT8DiNp6GlIzw6PxkfD3TksL8ZVsqzq2WXLJumI2wJmJYSL3PQfOtP+8q7NgkwiaREQGGSXTHbhwXWH1E1m2g5c5fgqog7BIZFRDtXm/P+0Gg53mPFcpettbS1U+YbUdR+jBtvUSvvhFFCCoUeAOT1phPIkE3uUiBIiHi1p0l0Pzx5/g3bY/ptl31NDMQoGHxh6RffjauouF99vdE+smDfNKGGAi65qV2eWhfNDYhMdVQFTC6EMYWWtt0tw77DlhBhQD1dVDfh4wW1VOpbbyVc07LY3yWs71gb8BXyc7KjYTNMFPy5pDgzes1aOieGBD0957ejCklE/ITGfudBBavq+Dh9/ahqYIfnTuW31w2sV+4QE/c0j8+pChgRk3yMjTSHM1kTXahOlX2bIhihkPgjtfXAi3+RsqrdjM8OUqzz0dpKIHC3ElHZ/aR4NQEeSOHk2NPQdcldQUNODVBMJ74UylxIFBiPnenENgELG1N4LF9KUTV/gb/lXXaDhaNsviiZITdSX4km61L/PxqTR3nXB7lomMlarQOd7SG0axhtObl3IwcGrLHsssczzr/JFZVVLG7D7+Y44LzUEZaG1dW14IQuO79JUJKwi+/TuT1N5GG0SPPGDqf9oBUm6P7jR5F1tUiNc26srYGoUfj6jfXbOlR10x3uLnwhHSKy/ZjU20Mz83goze2UOfrGSyygv9rX0ZLTbT1wIslpRUBDlSFePXjqnaaMTzbSWGu27KbDGT/mRLX9lrEsTOwZWeAqqJ7nBiffN6DH6Jrc33zd93yZoBIJMrOTaU0N1syRkOSmxnTCrHbbT3v/e88NKT2qGEP/rpneU1CS9iPKhQMaeKxu2gKtmJIk3R3EoroZj5iwZHprpRe5ym8cxORHZafzz5hPI5p0+Jan5On5R8xt+PyUxCHrPepiS5OmJJHSyAcF/jOx299CTb2NjBoacn37hmTGfbX39Ly0adU3f8o+somEKClJZP/4H+ReMpCFI+7HZS5O/vel97a7TGyf+A7vZHzFh+Vzy2JgUArndZLEiwto/K5JSQvnIktqef4tMzHH+/xOz+wsa6OtBkzANi2YQPTP/+c5KMZdD4wOiZb7ood2nxgZOy1j1AGHbUbnicJJ3sov/oMUj9aTeDYWWBKGqobaDh1PnnPv4ejMdCrXBl6/EXyy/eiexPZm1xAkhkhv2Iv0YREdmfkU1UXZWKuVdRve/loms+wMXpmGbbWFspzR9OsOBjddBDN10J13mg45wQALh99Gk2hZhbteofhmeNpjQTA6SFgBvn1igf4V/ES/nDMd7k6aRa61IkbCrA9EAGEMBEmmBGNWZk+fp1byq43m7nsn9Dst+xfxcV7+O2991NX18xlFzTyveNVnG/ms2NRMorT7PEeIikBkZlh+VdtGkpuLgMNupBSoqoqN954I6OKiigoLCTU2ELJ/X/B8AWwJSfhlVHCrc3U3fcA6cfM5ZwLL2DGzBkcu3Ahpmn2mZRnWvmBR93itke12dWawhSPmsTW+f+PvbOOk6Q69/73VFV7j/vMzrr7wrKLu0vQBEKAQIQIRG/85ubGjeiNQEhCggQP7rDoCrDuOrLj2jPT3l1y3j+qx3ZHemanF7jvPXyWmWmpOnXkkd95nt+Ti7AE+2UXbNuNzHOkgMXRLbc8LcpcXxOvBOahIGlNZtOh+1iZU8WOSBkjWWpDJnanZN+ZJ8zjF1+/kinl+QAcv2wGoWiSZ1/flgqXHeGsaQSdHdRjPFi3hi09dSQtnTc7dnNswUy8mmt8cj6FzWQ7oO2d5zl/pR2f0fbO82RdNJeexOjHw2Vm2I7d7RHs6ppP70GhVzXxER7zym1OEztQUGjuSnLMDQlOPE1D1Z1UTrawSKBkCXa/qmKZh+uhv3/y9EE2jtcyKNATKOPFDO+z7Ydzz5g+4sci0Qg1+18E4LSTyvF6fWldvirizoh6VKdM+l9ne4sJu44kKaDFLUgokjqPfeVsXeKyBKUJiVOOfHhxVDFoCR7NIuCI0lKSS8LyscTfiVOTRxavZ4GsMTCmOGko9eBUTEyXQNliQNImxH4/cd6J3uS+4Rjk01Dxge44dzyxE92SNLaHef7tGmJxCSKLbKWdy/Ke4/opGzh2finZy7+Huuhqkv4p7KuP8ObDu3hxXTXv7mijpSPygd1HP+4+HG/Nd+VT6inFkhZ5znwW+04E4BXnVXQlAihCoSXWQiARGOKKXX3GgmdRGEdpEqPNge/EHsItGnRkQBBYkO0wcKk6QqvkO+dfY+OYj96DS9aQ7RC0G84xxD9JEBpSBtnQVcemHceSo7pYeMwJXJc1jYfXvsWb9cdQMnstaAZS5jJawo5I2QISybSAztdfbmNJY4zbTy1k0xQv5ljj8sWALCgJ2YpOqRZnbyIbKSBb6NxasAcEfLdpKQHpREiY5QrRYrjptpwD4i7GYZulvubE4piWTRTVvcQ7opqZjqW0DhVAJASa10OWx50qsCIG+5/j9dOOAjFJb9pTnx1oWUzJLeNjS87j+f1rSUrTfk8cjqsc2r7jLRkGg+kvaDWwLdG8fe8N9aTP9IweYxaPB4kGmghHQkjNSyDQTjDYmRY54zmKTYalrxaE8yyWWA2EelxYlmBuSggXOTz4co5FzfOkbVs5FMHT4W6mfqQJX5uL1voSzn97H/kbd/EDs4mDVgKfULHGIdstS+Hl7bNI6CpCVXhzx1T0zhgLTpzJT8+fycrnnqLloeexPB60HD9Geycly4+l/VtX8rW8nTzzzoMINIQ3p//uvYViLPpIYnrzlfvy3KUAS7H/pbksi7/92DCLziJZs4XoOzYI5F15Kc5pS0EMI8T+PHcU+SMwLJNIMkZPPIJD0WgNddIdD72n+mdaoXvYXSelhZ4Is6m5CaRgTvFUHE4HQoweh5ep/IpM5RUIjwvvicdTcOtHcUwupefvj6M+8gLn19dXzkt0f3lJPHDG6/HAXet9JY/FvitbefNuyZs3HnY5TRVMKrVRpIaWHgxz/LL1rBX/SWfSpPIEE00VFGn28/zjYoluWuTl+Clw22jWKLVPB9scD75DT1LSk7RQFMH3UscfHXqM6rp2Xlrvw+cQxE27qOmTVUGSAwjA2iPJIfTggC0n+nNNJfY5tqJqE7IM8rJ9/MfNH7L3pNs5CEfFsmzSyffaNh4OV5AmRt1LBN59meTeCMFGIKqQ58hDnX3N8LJlGNz4qquuQgL/+de/c5Mzj0tc2bhUgZprkahR0bIlzjKIVyvorQrOMovo3tHy2Hr1oCDHjHFJcBMzm16ns74hbZz50vSUBCfMW8bimfP5/b//1rdm8vzZzKqcjt87Qt6xkZnk7C9c81XcUkF3aFQsWMA1psmB3SH21yRxRNtpboyxJzmTRYVNnDC1k4OhHLKyNeaXhXi2Zi77wuWUKs10UoTh9I/ZprOkQNEEi6bV88+qmzh1vqC2u4KcQo1s811czgqicXXQVKkKeJxwyXIHdW0WG2pM9rVY/PCBOKu2GHx6di1nR97Bb0WHLT4yoo0rpe3jqY4xrc90jLqKbPjMEsGiJ4vQS85D5IO6/0WCc+vJ2m3gaRrfdQs8HVw85Zk+EuhBeqlgCyeXrbGJoEeJiVRcrmHxBiEEgcYQLZEGjESSwlAxeUVF4yf0FP2770iJIj8o7fsuuwiHKgTJuMFHlpTwy3k6PaqCu2IaSvRttl88j+8/sweHz4WVZn7JLbdtyJAjooxrPUakn1fjZ7IhsYIuK5ekdI84w6pQcGoaDk1LERVreF0esr1+gtEQCT1JMBrG7XDiGEGvBsI6z7zbTkcwacfFBnWeeLsTMxnh0gVbuWo8BNB9Pq9g4aQYXz6vlRy3SXhLmK5/tRDbFkrF90sQg8mfvccfj2v2HJTcnFEKxcrU0YNARaAe4bT96/Q/HHJ1gSZMFuXVIyUcW1DNX0/5C4ZUB2TzDd8u+F0/iGVVHyTxxPNoC+ehr34bq6UNGeiGpG7bI5k8nxGgCIlpaZSFmpiqCJ6v1uhusEmcbGhGDInaRk0Pf3jAXjsJ03FEEidTNvktf1wHEvK9Gnd1dVE0uRJ1io2XycmV1DZ2882/bSAQNcbU/R8v+vqEioXf8r1hcWiBIBjuoergPnqaq2jtUu1YhKYD9Gx+k/kzF5OXW9BHtDVmX1tCRIc3m+zvnloBziOCwyWKgOIcjSy3whnzbDsmGLcIxS3agkaqSN3wA9724uoRlKpECMg72T7x61rtsI/yxosj9cZB9IZDjBOPHrQ/DtkymgZ7UimLveFlQ702ZI0OA5LNE3t2snBq9ogHCbvqqqk6WIuqOJk9o5S5lUsgDSmqCIUDa9fw6KP3klV4DFm7X+XSG2+g8unHabz5FvTNW3Dl+MfMv1F5WByRRDcNDgSaqMgqIMvtG1REPhSP0BjqZGZ+eUq/HTJiqTgid7bNqyF0iXCCUSbxeyWrWgVPe8opnjebFjPInmgD0y48nunLpuH6nwLan7kHtXwO/vKlRF94EWklEaqAYK/8XUVbTI4eJysk2R6TH5zSxt9bGtlZcAXuYw3O4X/45JRWvvpEPnUDAmK+8fdXaYtLklJBOBLcsNvG75JGF48/08gL62so8ml92JYVhbp2J6+V70KfNZP5LSWYIRMlV2AdBTd3SkUx8YJcumMJHn52DTqCbtNDfNHxGAUFhHqMPnkuhEDG4rb/rSigqQiXw85bOAQn6P07sbeGxi//BMXtAsPEkoJ79lfy1qtTxki/YBPx3/bzOzPjz48kfqwYwowjk432Z53loMQQaRBBW1ISThzCDp8igV4xq50fXP8OZy5twCmkTa+UOmupKApz/Jw2aluz6augO6A5nc4+H0TTHBN3VittE9iLBW0G3UIlP8vE0gChEtWjPL77VZrDAXDYZMMDQKGxaja0WTNwnnMWsQcfwnXWmWjTJqPOmIbvS7eiv7sZc281Ix0qbb/gggHCzeYaaPz97/t0td7WNu6x6dXVnvPPxnPx+QR//CuiDz5q58Foml34ZOZ0u0BjV8oeTMcv7A2uVBWStQ1k/+UhfvLxyynNL+Bv995DY3093/rFz2j77Oe4/obLMR98BjMSQ44Qs/4NdQZtvunoF69EOBVuSqmC5EnweDDKC2YehSsXQ08cDEGRswOQtCeLAUlF1h4MS+PTFQ/yu7pPUTtoZwiiUZNXX2+kpTUGwK7dAaJRsw9HGs/Y9sbRI20Wsa6kQqnL4rbKDvLWt3LzL8JsqbJQFdAUMExBQbbkJ7fC5EvO49bmb7GpeS6KYwC+bmWGgKHzP4cXVsLlJOtzN7PDW8mUadPJaVpNz5/+B5kYK6fHxOWJTZ85qe/93o/11sLNwiRZ30RP88QoGLcqOL7ITW3YwK8Jpvgd5LkU3KpCY8Tg+CIP+4M68RFul6n+CqGQXTyL4nnX0lH9Ou6iSZTNOx/NlcVjr+7mr09Wp3zh938TQLC7ldq969ANidNbQvWu1ykun8mkGSem9f0dPQq/3OPgW3NtnfTzPQ6+MVdnRf7oJWE/85eLh93L+T43BflesnNtgqBgT4zOQJRAOD7COt0+Jl+49ww3llDoicXIzvWQ484jmkwQiSt9BWx6Wyyp88SmWhZV5LGrOZusgqvIs96ku/tlfOYBPOE5+Nx2TGG4J0aWdYDu7i5yJl1GzoLPUVA2ndq2AFvrA1x67MxRx9cxTcc1R0fxW/hOt4mgjUYVK6yQ2OtAr3GM+P2iPMHMySrb9pscu0BjW5bgr/9OMqVM4bxTNBZ/NszuvWHikTRV7bP2j5uzJJaEY5oPEnzoSaJIjEAXjrJiFJcLI9BNLymso7QY75IF5F11cZ9OlaaJ0dJ2mG77U+drg9fXavv9T8r+03aHlBSasXHjnUIIqhqCVDcEMUz75N7rMLhozl68DoNn9sxiV1shAsGaLS2pM7Khca3KYXIdxt0OIYJWFIV9+/bR2tqKqmp0B9qprwvzx9/voXKyGwHU1cU48cTJ5OWZJKJRoqEgTqeTefPmYaXI/we26haLXz4Y5MLqJB+7IMqCilLua8ujKRHjka1vsLutjsvnriR/8iImmkxOpFz2Kd0K33rNgyMu+HFPjDfjJmcuhK+fZOOIy3rX/9RpKMctpr3zOSrK5+KcMhXZ2jLu+2sNCYdN1iAkliUJ6v3Ou5rvJR6JUB+SSMXFLH8Hk8q93HagipIZ9cikSmhfgi+XQeXeAPVWcRrnVQrhaB4en4JlaOB1gEslEsnHMuvH/ADBYJBVjz9OqLSUifTmTNNkSlkZFfk5+K/+MOGtm0jWHQSh4lm8GP8111ER2EHIm8vryMEa9ZDDXBuXESyQghtcefxm8VXUOtzUdUusQ2LPFAWsSQJvSZwb3nmABVL0YToDl21DQkFoCqogNW8pSFaAlp9FPBKlLiTtgHwpkarGD/+8BfP334VIkp/c/iioTtvYGaVakEjBHm7shI+BtabcqfdGEzzXLHprQjfOg1vsnwet+PAHAE4onayz+dEsEkEFb55JiapTr8Wxkko6khGkJGlJHq4O8eGpfhYXuAbl4R/63D6H4FNzc3i3M0F1aGyAKtIi2lFNsvEpG1yefBq+kplpHRjWWn5qLT/PHbDwHail4u59zMmFpVN9LF1cwezlsylbPIvsGVNRc3PA7cHhzsaSKvFANUUFgrnLLsfldg8ScarXkxFDq6rL2XdM53arrDjfDvx58YVaYjGTro54KgTT3kGRSP9hdVNTeJDjNNS0xQw5ISBh3yHQz71DH69IgRUXNoP/7/wg0nXV7HX71tzECOuvFbVnDeKsfMyqA8jmrTB7lMtuHhWdpDuc5PnXD/LRS2ZT03Umv33Z4qvn3sOM0sC49ZtAcMJiD8+9FcSfY3vG7T0mF57iY33j/55j2AP5IwTgqBLHcXGmnWYHUh98Q0Hf4LbJD0cdQOV/xwAJQTjQRv3TTzPjyqvtvf7vh6i85JIji7wXgA5mvYbh0rDeJ4/bHTcp1KAEE9My+viK8gUU57kxQj10dEsUlwOn6qIjUMvLid3MKp9H8RT4beOTnNjWwEzNTWLAgcC5pzk492wnmJJYyEdji8XOAxZ7tluILQ6u2i9xBnuIv/oq+16Pc3fYwa5VL1EwqYRjly1m6dIlLFq0iEWLF1NZObV/+2cmNwctQ3oCIFc1+fKUZj5d2UKZ066CtWp9MWvfTQJxirLdTK7MZsHiQvbuyWX93kmcvKCRCwu7WJYd5m/1pfz2YBnd5giHN6qGa8pkTj1/Mset9POuovD2wbH0ctdh52m9GKREIKQk6r6AcOHPwCVwNjwC4Va0rMnEl12Ku24zzncfQ412g3I4yeozMw+vHG8cCLB9bz3xeJInVu9iZ2URcnbemMb2F1//bEbmLF5VjSUtNvhiHJjrGjdZQF9rH13/OLNyyF5cSW1zAKHCsvMXk3QnUUTz+O6pKHDttfZEfv3rNokw2ITDt90GH/0o1NamJbvaEtAWH2yy1IfhkWq4abb9c2MA+swcAU2xEc0cdOngb1U30BorJtfZgyUFHmeUc4pe4yb9H8x9fhPJdSbRHhXFKfEuNQmcP5lHyq7hoc4raY6U2hceoHr2de4bXv7GkujJYF9ngskgscB+O3JurHZD6pB5rl/wozkaZxYoNpFMb8FTSxJdnaDrrxHMZguhjFLpeMkSe078fpv8uZeke8YMuO8+0HUIh+15XL/+qOiGdHy0hohAxpLU1LVzyoqZPPnwWshJ2Zo9UU45dwlVdR0YoX4/Z6aZcvjNwYdgxT0O9APZJJxqRpL5XJNMiq6z+9F2n5tkS3o2iwC78m5I6XeInRbqtCTmPieyQxsXqfP2xuIJfsK2jK4HSyaQLkmizUHrJ8MEtzlQzvIS/keEZINEnpCLhoogxvuCDlAIjJ4e6r77XYRloQDZp51K0advpmzpiZwutL5CO+m0qRWfBuDJryzpXxnSxIptB+dxKFpOv19lhpCJKhTPQptNdIT7LHz0cB9n24E2tu1PVTNXBmAz4/H9gjq7D4QwJXhcCpPKvazf2pXafir3vHAcX3BIcpKCO1cdQ01Sp2fxDlwVDehaEtOyCaE1wcg2sLTo2XQ/Ha/9AjMeSBEKApaFs3AOvhmnY8V7kKaBUNSUOBRpTKNAFYJoQuepN3exp66DL1+4lEtmF+BQRNozmCmbe9KyORx7uoeag+1sWn+A5Svn4vO5qKpqIdQZ4iOnzyVpwcG6dhTL4pilM8lxx4i+9nMUU2HFoq/R3J1FQ23rkH20QiGCjz1B+MWXybnmI/jPPxeH2828IheV2Q42NEV5+kA9bdFIWkHHk3/8tSFf96+w17X/mIVM/tFXSZtd7tYbANiWO3RWqVQEe2bFOKNMZVK0nuNb4ECJh9dnxUjmdiBGuc9vvnXtiLJ5f1sdrzz7Ev5kDydfeimzr7tqZP0xChH07B7Ij8NrFZKgatHz0LM0b6yl6OufxHv8klSV8+FX7kAo1QJaOgtpq04SCs2iZNliWkJv4nHX4HUZgz4/qr5oG55AIBJSOVC3AOfU82g1TdpqkkzN2UyXrBhJw2dU/CruYUgyUnPTU7eWSMAO8vTlL6R41kdIe0CkRJEQdgj2rpyB+5PnsJEm2NyElUyQnKTgLDERO1eNud/6HnAtB8UPil+ilUHsBdmnKwzFQdjrp72glLqyqdRUzqSufBrtBaVEvH4MzTGogn2m1kP4GecQa08yq6uR0mQX3XE/3kgcIaArlkVpsotZ2xsJNriHwcyHxqI9ziQLKxvYVFdJinn1kBN4QU/cwzGT61hfO4WY7kyr/5m67kS1ZqcfvwuyBZhSkkiJFI+ArJwsDF2nIZTEoWmolknM4WX/Dddy1tsbeK3pdXaddgx05IOZHCQt0jr7CEqEUwNNJdrTQWTPi1SX+ciJ12E03UNXTw+o2qgmgW5KtjdH7MS9Q84+6roStAR19FGSE6t+f/dhr801TRYk2nFjckbzdmrvbeLA//JsldnuaEau+/bHbuwLZKkozWXl0ml4k3Fi2/eQdHsQfh/N3/gpICn9zffwTqtA6+4hvHU38dw8tkcFTZ3hVGV4YPNzg64fjagUhHRUYTEwAFga9BW/lcYYJu9rXxvF0LL6ic8ffBAefnhccCnCLj7ic0guLw0xdaNF+9sewqaCJ+nh9VkudG30fieeWTXQREUpN3F/NIJQ7fMP13yBtjQVgKntB3OfbbuakHjAh9WkDglvqyNgkcGgxZOvJbjvGft8pKnH5LIzXORlj+4oBh94aMgRMZNJshqbOXfaLFq1biSSUiOPrMZmuu97ANXpHNHPiO7an5prk0R9E+4ZU4a0F6WUKD4Pka27kUl9VL/jj3fv+GBuaCewHPsQ+ACocbhgtsLXP+Ng4Vw7kHLbXsltt+u8+LocPYm7t8iYAusbEvx1bZBffCgLr9NOwkmohWxpbiRqRllSeT5O1WMX+x3FBwrH7WSLaMLAkpAwLMIJA0UI7l9dx9q9HePyt9M9gxcOFYSCpQdQgnUc3DuV0mPP5exTOzkYFHSEkinncHTILJGMYZoWDsWNYrYRjpnoRmJcAaIDhUXMgL1bD6AXziEU6SG0vZb46PFqffMmpOQsp5/TnH682KSDIVOlOuFGVz8Ais00wePGecmFmFU1JJ9/0Y6dKMhHqmoqGF+zA5OHMTAzdaZ9T1NkSPkeMSVhU1LcM7iYeFvSwq8KfOrIvv0DD+wZdqVJy2KOZxbLkjsB2OyZxd6nGxDK6Fj6XeHHh3E5JC5XLom6LPa89RQKkpJTDH4ffpZEuHtY3/v81M9X1r/2wZKPCxZM7PV27nxvYEBg874Q9zzXyLI5dtLU7x6s5YYLK5hW7h3/RaV9xpLId5Hcvh/ln0+iJE3UZHJQ8edhm8M1xGXtZIlAZ5RgWOdAtX1wNHNWGYGQTlmZb9QC8JnCo4aKpbGkJGHqNPS0sae9Dq/Dhd/pYVJOMc/VrifPncWH5p2EqjrGjeHicmF02tiS0+VKq5gIwB0Vh5PquDv3YlYfxAiGmb5zM78qyEHmpYcMznqv92OqSOqRYMFel+CE+U5uPNvL+ctd4HXxYIef+1rykMD1pV1csDLMaYucvLAhwd2vRFm7K0k0IYfWm0IQ370fISUKgqBLsGtqNvolp5F1yvGoOT3IrS8d8aPrnd1EdlWn9sjA+ERbR0R2VaN3do9IBB2pqhp2K7cCa4HjoraPt66nh/KeHko5wpDZpG1bcm7qQnuBhWPwgQ6ZfrBIlBUgzzmZ9hWL0YoLAWifNw01O5vEqvW4umoBdVgJ8djubrpi+TjaBYW+ThKGSSCWj7NdUNAUIJG0uKvHDnovzOnB5VR4Ju5At/LJD3bj0hSeiWjoVj55Pd3D9N3+D9MCzQWFhZjVdcTv/xbhYAkJRaZ/ZJayqxUhsXQFBfjKvBYuj9Tzm/9K8sRq+yO9+TDt7V08/tif+PbNcS5xuWj/wWyaDjhx5Zp2nyK9vuDgfa8/+xLKxz6C7zc/w2psIvHAI8hQ2A5wH+N+U1LfsSyLk04+GUVReP7V3egdURa7JZFkjL9mHcsbBTO4rm0dk995h+kXnM+0SZV9Qd6jkfIVRxIkn11FV8nOVDL2+FrafoBTQyYkxy9ycU55N2+3u0DAORXdNC1w8U6NieIcaLNJBqNOvavaoipegOyejYJFezKLhNSwpGBjaApxqY1r1zk0lXNOmttHAg0wpTyfc06ay0urd6KPQgp1eIHMfjLXg5E21rTvpi3eg0MoPFX/NicWzuGMkkVDfjcd/BoEObFOCD3PTTfZ+vEfrzwPsRvoUQoYjc3rrx2rJlS9XHwY/jIEtGPYvlEypJHokOxeo5BTbvLC7/xMmm9w0kdjtO52YhkCyxg8h/5Hnz5sXwcmQi2OsvalJdm370AKmhoDwcIHDM988bNfek/uu3fvXiLhMLFYjEcefuQw8szxmDkNHqjxKmSn6sm9m6cwNSopSaS7t46WSSbwueHcxQ3U1ho4tE7mzWjCoY3ztLnXrzBB7jJwaFGOX14HlsTabNAdc5ErkgPswffH2ut2QJNPYDmOoEOawv6aTn593waiCUEkqOJVurkk70VuXnCAk1fOxXns7QSLz2RTm8brT1bz8ppH2bi7lUAgZg+GS0N4nH0rsOWLSWQcZFJC0sa8lVzwLFfRygWxdy3MgI39Jg9I3McomM2S8DMGVncqdMMJwikQ7syPoznAKpIp2aYpHs6bdAnHFx2PV/OR77RjJL+z5PtEjQhvt7/Nv6ruQ5e2zTDsDFgCNU9H8ZgoXiszAREp4pWEzGJZ+UxKs/OYnFcAwCkzZtMSLOTt2iog3n/ml5YJKJGGQm28ks+c3s0Pn8qlq6uLjm6T0rJcFpdvY1VVKcgOpEifhF0IOz/Jp0su2xpkXmuS356Uz9MzvGmFvQ9XsEKXKif4OtAE7IjnELU0VoXKbD/E0kAKFrh7OM7bwcPdU47MNus9K1Qh0p3kq8/cRpe+F2NOLle89Ce+Gj7VrnAoh7B3JphNfs7kzgm9Xlt9OrJesnLSAhQh2N5SNQThxPCLwa0c/byFWLSbA51h2goX4FzgoHDWXHQjmpbN+7dvLB/w6KJvbxzqeymKjhnU0+5TpCRM4NQODpr5lM4u5qafttHxT8G8Bg+/V0r4ZrSGDVZwlNEcRqEpFrXd2TRuWIYVjWOqLm765HF8Ky+M8yc/p35XLY7CXGQ0ijNpUvi5G3j+Y3P4bv3jNG7aj+LJRgqBlP1488NTHCnbTqB3FXBFMIBTmpipo0fDhDfq8ugq8+IYwxQ7J80Zej+31hB+9R7i21+1RWmkh4LPHY+jZNq410FLqIPqQCNdMZtxqDMWpK679chjzTOFowqFqJ4kFtmBaWlEkxXkutS0DJFM5VdkKq9ARuNYnd0Yja3oCZ1gT5RgTxxL0SgyY9r54bpjK/XwvDIjcuGq52+7o8PhWw10A/xx1fxecJQZ0wr59aXnAXD7L1+kqqYjPfK7oTCFrADFQIkYzG/mS6lRKSPjMn3res9xhI3ntg3kJFEVAsEYgQE5wrEU8e7AMxuGsjsO86dBkZL6LJXNxU7kWIchFTa+Y2/dIX5qf8xQb1+U5g7clZW4VHX08X6nNcP7RhymsySAHka2biLU7sU8ZhF6PIborCG3bSNMuxic2YOfbxQf+MUX7WJHTabOb2Lt7DcTfMKdj3jZRfeLEt8Sg8KrElhxQce/Xah+acc1HLp9hYZwTYfiWxEkkEwl/PoG2v/+AKHX1uALh/ErEyyjBCyYMZ9sXzZmLy4nYMO+7XzrLz+hvadr2HkM/OofGZk3VXEgXE7isRhZ2dmEe3rI9voQ0VbCUXi9rZIy0cTKyUGkBeGwRbYM0NIh2dHgZWHsTYJJyY7sxTCALD9dvE1xqlhxldq2XIrL6il3HUD1F7Au7MZyOInFnKAZh+D7cNOZTj59npPWLslvn0zw/BaDuAmrthts3prF5S1RvrD/90yO1qZ/7p4K5Q5pkvXHFBK59lgUdz0M2IscgvXJ4dyDYa4/OQt6whY9WYW0n3gTEpjcvAmnfpD4FMZHBA1kaSGKPUMnYLnUBKWe5tS5yshjEU+OTDienZPHNH0elmWSk5M/6udH96P+/2qe1GpUBSRNHVd+Fq4zVxJ7ay3JcJyilefg6NFQzG14cYxYlEQCvREJsWRmiOIXOGuO+Bo5tNObHDjc6bglJYoQtHZ30hUJkuPNIqYnCcYjdAa7caga8WSc1p4AsUS83y86RG+E4iZr93bbclQqYEYo0d7h1gvfGCcBdO9gC/xuky+f18aCgghdz3TS9VALenMcoamo+Xm45szGu/J4m/x57hyUnBwQAtOyiBgJeuJhWkMBmkIdQ5//JAwqotmcVj6bXa9uYoccP7n3+ZXbh8GJ7dDFEk+QUt/YYxXUWTOQSMyqGvvcyONBKS4CJEpeztjBun3vjklf4NDsXAq34OmNGr+4aD6X+h389IXXQNMG1lMF4AYGx/VK/chg73sybJPrpo3dJw0LEChZfkQykbKN/dAFScMiaVpjOo/xqpkB9oauV2rx9uY17Nj8MrlOk8icW0DAgca1tO1/kGCwhwvOvIzx1g5ImpJVDZLfbbVn+Uu64OKyI3+WyfkOrjg2h4WT7LEq9Gs8trGHtqAxer8OYc8TKdxcSomr2KTgDJ380+zF5y6HztccJNqUFJY5/GmCQFIXKOSHj11LVzibmKEwa6bFTdOSnBhWcMrzCI+JEfyX/bC6FOgOi+Q5zeintwAK6HbfDTd84dP2gxhu6EwO/ZocgOoeyb46UsO6PdzGi7Xb0ISb/DI36Ser6oSlTmDlx1l5yplsWLMHI9SAc+lJTHv2MZq+9m1qHn/JzvMZA3fVoXFECUPntert3LXhGU6dtpSPLjmbQq+dS9kR7eGBvW/yZs0WPrH8Ys6cfgwubehYIssERZXoxZJkkaR4isWzVTp/jXo587iFaMDmHVv5r29+my/ceivReJwzfvQbdhcaxAJtxGtrSeTHcAVVrMRADFZFaIwuf1WVQERhc52Ox+vjotkepJBs3+Jj20GdQHRwQbIGXU1xl6Wua/RvEDU/i3gk0i/XJeCJ859/m8pHv6xiCMl3/jYZPHGkPDoYZl1TB0LA06vW88Sza1JGmxucedBigKGDqiDjCfweF9/55g3kZfnQDYMd+xu48+5nwOu2Y1EHAhVWKoZn/U7QDVDt2BVLKuwMZPNynX9c/U2MmVw1vdYRHqF6prSQ4QPImG0/CM8ChD8fEh1p6Iv+eI/iAj+RiI6px7jilBq++7H1zC3vtgvEHhIC5nOYfPzc3byyZRIdYZd9/jFgofX09PCPf/yDe+65j3i0g89emc9XryigrEfQcmeE6B4DK2pj5mPRm71cB/VRwZZSLwnVTU28BxGT4FcI6wnCiRjC4RpQwG/sgrBXC2iL52HV14PTgePYY4j+9R+4zjsb10XnoS2ci7m3asRY+tgw8V+H6qZxN4cD58rlWJ0B4q+/ZcdaKwqYJmpFGdlfvRUrEiH0y99jtXekffbSOydSVdE7ulDveICvXHMxhV/8Er+543a6u7r4+f/8no7rb+ALn/0ojrsfR+8IIFNnG4fOaaPmR+Sk5I6UBHsnxwlqtp94Uqe+O4nmkFi6m8uKXkIIiztrbwEJn5v5S97uXs6Xd92GqvX0+0O9/AMSRKOkvcUmoMk3LfIkSBQmE8DJ2PwxkSrYqiLRJQQMhYsK4nzJ2crLt3fw87sTxBKgqXbKsmkKzj5W8t1vFPBWxef56r4biZoOFFcPFv38VwsKaydULvR6DDX68D6pv7KSnA9/lH2bNpKj5VBy+YfZ+8jjRKqrRl17mcoTu/G4iiG3pQRUJB6jGEVaR2qGgASXInCpCqoiOLXUwxS/g+lZDl5ojNAeN5ns13Apgrglh92MmeqvoihkF1Yya+X1VMw7F6fbjyenFNXp4sZLpnP6cSVjko8XvGL/fGnNQ++J5SeFj5iVjT83G9XoJtx9ACPiSs/ys+DpJpWnmjTmZNkC4qkmjXnZFsvyRt+/yaG4qixJUZ6PGZPziCUN6hojKV3nY8aULKz6LtoDkRHx+vSxUw3ikhOnJ1kwq4Kn9zexotzPGTNnMDVs8NI6ULR+38LndtEeM/n31mYm58RZvXMNZ80/m6m+AqYkm/nJqeVoDtO275MqxRUWStmxvBW/hraNIb50ZoSIIajqSqa3EQzwrEjgPz+Klm/3QvtqD+EXvSR2OkbVRj1hSV2zRUGOoLxIkBwgc5QUVhv0CIJjPOL/VN1u+84Ne2h++fl+Q0NKTAnSSHGCWhLXlEnkX3MZgUdsvs/8ay7D6AygN7ce1vPJRjht2DOt3IkhbSd7TfT63g7FYnFpKwtL2yj2RfG5kvx9/TLqunMxTTmi1lczyAfXb58myM3NRVFUdMNEqCqm08OyE0pwOgU1D7UgVAVDN8jJycGyTBKJkQPgwnF45K04uw+28sUPx7ltfpSf1JeyK+xmW1M1O1tqUTIY8+A0BJN6VJwxcHUIiIOvB6Zbg71OaRrkLzqPnNxziNZHWHPPn4n/8bfcePAgas7Y76sJxU6llFZq9kV/qrtpWLZToQGGRaN0sc59EdmRXfS8OA+nw8X0knqebjmRgKbb0m80J1Y18GUFUfQGnEoHVqGCZrnweTtQNX3MD9DW1sZ/fuc77BeCiZweKSW7du1i8tRJRFe9gG5ZOErLUPMKsBIJYq+/QmxpKTvbag8JjBWHCy7RKwwszj2wht0FU3h89ulDAvGWBQqCCw6s5dwDa+grXXOINFJSQftWb1WLAW8bqU2hqHYwtrRAeB1s2dLDD275HqCwY0cEkeVGpoLmRzs3cWDnXwigl0btOGBB6r3R2p/On9jDxgfvtX9+Xa8d9hDIIeCTx5lEAiqPPQfLKiRlQYNHQmEbWxqDtMx3qRS41AFMEIOFba8TqgnBwnwXpW6V6pA+tpsIBW/hdCIVqQrNhdPHQBDbm+YiCOFhj+FlT4fk6Q4T34ZaKu45nBi6fPEsshUnDT0BDGFR4MzD6ck5SoHAsu9nfr6bL9x6LADr322hsTHM4Qmx9ueLiuzEw/b22Jgc0iMlxsv/VnRIoFoYku6HPZjdgvwbo+AV6Q3fF+wfd50ZHXmM5DaEoiAL0kQBHkhTiSZN/vXkXq66YCYRx8X85CmD/7rsfsryguOWlxWFGhLYVZNMgd+q/do4xr7TIdjqV1kYtmwYo7eCTaqi8la/Sqfj6EPD119ROOKKnpSX4EfF9tr8rwXFNJS7Rp6xtfaPyu7ghPZz2PhPy0KvqyG65k2SB2vGXI1wqHm3pIVDcXJc6SlcMOVKXA4f/smTUTW7yqp/8mRcbh8XTLmSrngHG9vWols6Ckr6jqEAq1Ml/HgWwZBrDDHYLRldD6oiMLADmu3A4JQOBnRDIlQNTbWTaQy3Rk5VJ67/fpR/nWZgOAQnvuWkot6J7nEOInSLhiSWtA/2NQ1mTFaZOVPlssshUQfNt3lw6wrxpCDhlnQ2tVCzJU7dwYPUHTzI40/YSUOa5mLmzOn8r2oCekJxGhvDSEwaG0OIPR1k+TSWr5jE3DmF6QeCCAEFJbBkJcl5S3g+28dze8ajL54asCc4LJDalF7Cef+JaG3C2VSHPvWjGDnlOLc8S+F9X0VBIgwdXF67WvwhgQg/+MOTQ+69pGliWpJ7Hn0TVXkfkckbBpbbweOzHTw21ztCWm2abc1IcyjZv8Ngb20NZuIg6/Z1I6Xg+GQd/uy57N+hjw+hltLefBddZP8dTMno7Gz7NU0b3VYSwxslhoS/7YHJfjAlJAcItaLU2Xp7fPjrJkw3LbFSG9jQs1mUt5NP+v/J6VtfRHkpRLRJBRRck0ysc7J4ecl53BW5ke31CzClOmSfvvzSl4e9n6ZLLm8KsTy1Lt9tWs/jr+7BcIixBV7ZGTrM8MEPZ6ucX6SgCIEUqcqFUhJ7O0nXnRGM+jRIoHvnZOlSyDnEC/b5YPHi3hMd+3NHqaXjowkB0utk9foqrv7Qcq645iTeenc/IDjlgmXk5Xh58K3d4HNB6izst9F/DTmoOWudtO91p3TqBNvwUmBG+ufBjIzFrxGHJMZKpC4wNnrAtInIxTgiNz76p2sneMZ+l9H1MO2tFxGWREYlUlOo8EhkRCJV0PI8RFZvpvFLX0cokoo//hrPMUuxYjF7IQ3VTjnJ9nMnT5vYju4dQPYTj2PGonTnTyL7MzcjLruc7sIiBHJMJNCDtuQdvx28tKwgQvGmkIRe5akjrShCWZW+D20qfevLMOknExWCIzmiDEcNwhEbwLUMyZ7qEOaAtbyhppTP/fkiFCBs2HK1uakCV0UDvvk7cU1qAKduk6GPoC+E6sRdthDVV4hlhFKAainOghnkH/8ZsuZfjFA1RAoTGNOZsOwPWU7u2k37hmdpdEUYi+h2TJrgDZHi0d2/u54qQGgqeXl+9uyqRzct3F4XXq+TzVsPopsW2dleTEWwZ1ctoaTJZqsYVVMJB9pJmgYlRdkkoocfJChuN2ZHB4ndu7FCYYSjH7GK0cV+6yVWm0/QbHalNZ5lt1w/glqTeObOwDtvZvrjkCKCfmzrGyOoTAUuTXLxng403+W8PivKgx07EZ27Rp+3EXw8IQR6qJPczkZakhECwU700lmpYIj3rvUFa5gKsdYKAm0dtOp5lIeKiehT0H1N4DLGdM1r7/ziMPdSWDHpAEuMet4xd6GqCZZ36PzlzQt4t2EmQgw3ft/ItJszPHImLSwjTi/qbZnxFFasjL6GUxhKU7bGv5blsmquRWLzg7DRGoxnbpbj6rNRA5F7LRxTJWYbhN900N3pp33K0MTPeiowTchUzWspEYes2Uysh7bv+YZ83UOMz+c8yZ3xi1jrnYdAUhlt5/M1T+J5O0YrwwVWBYcRCoLRNFBfrW8p0hPsE3jdT1x10iHfEWzb38j6HQfBkhTm+Tn3xLl4XI60dMVdO2+35Y5lYtJfr6RXO1vQR6zs7KvGLdGcTp6oVtgfcZP0nMXenhNwKMlUgRgx5rMPkEgDphQLSrreYldsBi61hClaJ9NzkuxudSLUEQJlU5h+R1TvW9uuFKll0pQEE/bTCUa2X7/e+OoQ8yLQUjbUtV1bsbrEIQnYw7fffkBhGzNDoby3/uVNyktzufjsxSyaXIo4WE/z25vZ0hLhRcPH+SfPZZbLARLWNoZ47e0NXHXGPOZVlCPXb8FqCfNul8Kq+hBNgcGkmwrwz8bJJCQkpIpHsTihOMAnZ9ZxTn4H6lb7mb61ZD/HBrr4+4HJrGvPI2YpA85S30OoLGVyCicsmh+jM1tQF3VglLvRtd6CDO8jRpRUy/IKcv0Ke6ttmZ7n95DlTa+PLZ8cvriZXwhmS8gtNxASipqTyNaXaX9hdLK9/Td+rU8AFV17KbPv+c3Q9rwQGMEwzX+8m4af/tnGL/43tiSwE8QKkCfALK/g21donDhPYCRspX3aiQKnqnGgJsne6lE4KOXwf1pSkkzqLPcsQhEqlm6fOwghRk2IvuiYUqSEKUVe/C6NeRVZXHxMWeq64z8bHMsZPA5oatK4rLiZ/cEOwgfaWe5VcSQLbPwjDcRGALn+Ag7sWsdBWUIgpKFHQmT78xEpiuHxCog4Cu++s48phfVMcvRw73qISf/g4hKjdC5PaH3PIU05GAIfrx+QIpPrLXpUk4yz3tvFlPMjfP9CwbRiBSEFUisg6pxOkzKbbbFJbGh3si0QoTHUTUxvZtQIBylJPvsCoqgQdc7svgUodYPkPfejv/qGzZAx4lhk5kz707u7h526gbbxaK8f2r7ylddGGA7JpEIHV87MAuDfBzpo6GhJC6ersIY/yzRDcXb/+16K6AQEHf++l3mhTlSpj7oBfvvgnz5Y8vGBByb2er049lG3IQTTKzz4vRpXn23LzQP1UaZXeMaF2/bavxIJisDx4kaMUxWiK6bhf3UHQippCQ0xzA4UQ6QziL5/IlU8YAQ9n2E8amBLGEme27uOTU376I6HcWkOVk5awIFAI+sbdnNs+RziehLnCETQRmsrQtP6N32f0Wc/pVpQgHvJkr7fzY6OwZ8dOH5Gvw/t/ONfDr+XJTFicTAMYn+9F01T31eWY58uFwJMk+jWXbT96Z+E31yH/7QTKP78jbbv/+d/Uv+1H5B16gkU33Ij3sXz7UwIaSfLHrquvS7BifOdfLyXANrn4oVOP3dX57E26CWaCtxe0+PlhOwoN5Z3cf5pYc5f7hqeEDrl9yoSgi6FDRVOnp7jYdMkF3F9M6zadFRJGd93rQE4CJQD/hRwUJZ6LY0abMMRaSjlxQiXE/+cmf1kPPm5xAPdKOXFyN21w34foNDnZHqRE920CEYS+JwOphVnoRsmwUgcr0dl6iRbp/eEEpimxbw8Pw5NpSccxzAt5pVl4VAVgtH+wOSH9r/EF5d+lMvnXsSapm14syvBZeK3TL60WuGrW7PIjkNI7cQpxyJrbUzNSqhMy43zi+l1BF/p4MrfQ3vQtmNFny0MF5wFP7kxStmb5VTfW4iFxJ1ngiUGF2grGhwLZUUixB97CnXrDqyODqyag4iSMRRrbdo/zDza9wyoPv6acwo3Wbt43TGFf2YdC6qTxhwHl6s+/JAWOZIXwdnOLK6LqCR+9HsOCnFEp6Xp+gECMA3J1BKNyYsFybCGIgSTKwXTdmq8s99AOPu/bEgVQ6pDaitDKuyPFuNWdHxqEp+apDZeQEMij/cNC0qqG0lLZ0PgAPWRNiQWUVMnZMTZE2zkpKJ5OBVtSJk72r52qDDfXMfS03dRVmjL32tP38UWuY5m9WIMc2T3o8KMZOyxpRRg2YW4eoteS1PgzjNxBE0iu/yseUFj5tlR8soUajf6cPrDbFwtCHVJnDkm7kKLAdx9FFx29sR29L7b0tKn69ev59lnnwXg0ksv5bTTTktrrsqjxoR2t5fHaH9Qz8i8heozU9gz70PTR10vXVIiRD455I9qT3U9VT3itZwSju2WxFRBOBXmU5qA5d0Spxz9eKH0W1+YuIf/9ujk2i6HxbmnRdhZ3goC5s+MpnhXxbjkTV8LS+R+k7KiBDjAeD2JI3aITHgfiEoBvJmr8KP5DuLG6IXNBrWXBvppEjQH7R0Cl9XG1WVb+eIJAU44ZTmhym/zTngmr7zZwmvrXmHjriaiPQmbrcilIbLcfecdA01Os7WfFFjJAe8JKt6TFPQ6SfgZE71J4qi0F1lih4UVkPgvVvGe5iC6xiK2zsTqARmV7wnELISgMdrIXfvvIm7GuXLqlaj24RAezc1zDc/yQPX9tMfb++Iqhlf0ErNLw4qoaC4dMhRuKYGpBcV8+9zLKc3OxeuwC7h++9zLaAl286V/383WxroxJCjaxSOw3Ly01sv8S+r4zUe8dAe76GnexB3XBmlO5PLPV3tAyUbayWBj3By2z+lsjlHwfCMluSpGGrh3w5B9lUQsldqkny8W7+LZnkm8Eyni+WC5LU9VnZW+Ji7KaeCBwHQiljps5YX0MVpQVEE4lOR7HedyTWkFS9qy+GnrVBLRBIo2OK9DZIhs9s7vvjCh15t3wQQZcSPgpke7+Xz5FBeG6ezJJSd7CeUzZ5CVVUgsnS9HoowGS6fqCIypOZpd5JWWk1x+JdMWz2L/vX8hv7kLzWmhmjJVRHa8MkxBqBZ6T4yKuZX8+MpFXLD+TTp+9AhhqeAozEXv7KJwxkyS3/kY357Vyj+3/gmZMFC8uVhYh+V53LqiP1FXM0vZuiHJqVYD+w7qrN2msFHm87PoNALHu9MT2/eM/LbRXkfy4I6+ArfJgzsw2uuOiAh6f2c9reFO8jxZaIrG/KKpJIwELs3Je9VqOuIjvm8abopzzrGx74iTrkT8PbU9MpZXYEni72ynY+d+Otx+HqU40uKa8Y7fqbfLlKkiQMQVFUtwFtIygBcGbUxF4nEpFOfba9XjUuws/fFizsPVgJOD0jrHh2WPEKIuRe+nBmOUK0psjOid1uioRYsGmCBsKXby7dNz0cfa17fsH9d+4Xej+nxTS3L59Ze/wtSS3NFF/IJ578naNdGoMubQ3GYSyfehWB48XWF0Yz4z0FDTtA9LSkqIRCLU1NjEpFOnTgXgkdpaqswkt3oKWKJ5iGzViO7W8MwyERo4iiyE045lH6QmpQGOYoTIJbZ7L533PkzXE89htLaDoiBUNSM1RAAqSyqYUzGN5s5WUDViepL6jpb+TSU4DGvp+vXdGemLqirouo7X5yMUCpGdnUNH+158kXoKzSbmTjY5L/8gu9rK+H37bBJxi7Dl5vb6+dTGcriseDXPJi8k4iwctLnGEv+FMGk/OJM5eVtp7d5MNJoNXYt5fPt8pLAGW7kCQjHJgUYTl2arzN0HzbFw9I2wbyV1WfCHJfDo/E5iB+5B7JeH2VfyCPxSS8KOZsGM9iTS1LEkOGUSWXxkbm7IyKItVsQCdh/2XsJ00RIrS6sozWd+9M7oz2DZ9oGiho6o00IIVIeGUBT+l0bfDPXQfUT+qCpmPAG5fjzlZaiWhTplEua6KlDtwuQMY5PKIa6biXb/9M8ckVciGIxlLRnms0nTYM2ezZDKLXOoKoZp2kWMpERTFHTTLhKvm8YIzysAhWxHjDNn7OTKxa/jUg/w4u5xEkAPeJorj+vi0opmOu9sJPhqD4o7m6yTj8V7/PF4Vq5EzJxO0u+lS4/TEmqjvnk7tYEmqgKN1HY1Ud/TRmu4i1Aicvgo9SRhfSeN+w/ys/u3HlHRS4AX6hcd0nuBJkwW5dVT4g3SGs1me1clhlRJ72TFJpb2//bHAwXBkLwnY2rPPTg2DEDakQFCtWgPu/nGL7ejqIJgVEWkEmUGRgv/hc9M6H64J9M2eUouJiV0Ov10rXudg2E7bmDK9k10Lj6dpMwctjHW9ti+4CF7zyaC3lHdQFdngKzJMzAMty3ufCW0NO/glb0HiVZ0D8Dy5JhkilsTTMuGZKoI57RsgVslPWxhBL286WCMKYVOlk6xfZmNB2NsOhjDOiIdB3q3ghEUeCfberMt6ETvVtLeNhLBwc5ipK8dc+q7tE6t445sjT/lpxeDM5yPEtYkdy4xeGWqD2pmHTYNvcvXqh75NbvtzOg621EbHFHLaFQyuzhg2xRWBTtqQ6STpKGHXiTSvJ+lOWeTHa4n1xA01ayiYFEh7eocvuY/h1W5BbhdWnoyufXHQ77sVDXieoJdrTXMLKjAMwD/8GhOmoLt7GqtIa4ncKrayJ6sofPc7HkkDckntu1BNqtIaetJj9dLYWEhZWVlmKlYSCsBSp2K9ewrvDx1CtWz5nDThv1ojD1fQ0pJU4/GU7vyuPy0KMs9AUzDwPRHefLtXJp6NIQiBvnqEptbAzHY/jQN07ZzVFIxPQLhFNR2xvnnL+1ExuZQAuFOcZ8dhYOgZG9slRAIn9teP5aFjMdtmasoyHiSBfOmUVleyB13P8tvf/gZJk0q5o5/vchll5zCm5v2Egj02NwDqeZf0X24UQRYimDpTJ1AZXhMqQgvZXgcPvT7D40ilPQB8/EoCEd6sqw//Japk4rwUsflK9fy8XP2kuPR7fihYYIGz1zSyJcu28bPHzqGiK4elrvR1tbGlDKN71xXyFXT/PCcTvOuQwigx0rQLO16IpUeyfLaKC0iTq5fIt0CLBBCRWpqKkxMTpAtLscM8Y+Gl39g3CNAKgIzGsO653E+ftm5lHzzO/zwT/9DY309f/77X2m5/Aq+85mrybnvGZK19bYxfyg2J02kOfSwmSkSD6GBoWcDkqfbzyNoZHFG8bOUudr47v5v4VKjoIUGFa69nzsHz4lx+BM4MSghOEZpJVGlJGgoeFXJTyYHWFrVyvd+EeSVjSaKYoc+GqbA64Jv3Sg59fqV/LT727y0+3iEM4xwxLCkY9AieODKH03o/Cz+Q+psYjg7CqhE8j+ag7z8fDb/+9/Ipcv4L0WhntGPYzOVJyb27h1yb/SK4uhEbJzUhJspH2RGtoNKn4N9wSTHFroIxC1ciq0QTXmIk3xovzLU32fXNA4g4y9MiasekN0IRYzbr/h8y9HPeJRAdrafBQsXcuC1B2ir72LpNZ8mKzs/PRtYQKlbkueEzqT93HlO+zVlnB1yuTRmVObS3hWhqr67z2ZsaQ8xozKPGZNyCUUSdgG1YYZ6TNgpCjm+GGeXTSI3uA/Ztp3z8it40B0DxcOhlbAXV+TxnSe38cKtpxNoXc0bu9Zw/qdvIy7/QseGDVjGbNuHdu2ncPoychZ/jjfueoaehMk1K6aiKcrodEqp0Ha9zkHgz9mohSZZF9hnaLENLgJ/ysZsV1M6efjrRGLwxKtJrr3QydqtJqGI5OYrncysVHm3TuE7m/PomlUMPkea+tHGNpVkclS1KoQYM/5vpVv04Aj09MDcvBn5AU6eWsey8mYKfTEkgvnFHVy+YA9P755DQ082hqUcdayg9+zCNE1M0yQYDOJyOtHcLgqMRn5ScA/iDXvyF+XpFMQriSRnE4tGSCST5OXlYZomiqKMK+/vyJhk0p1rac+36L+pdchNhUPDM3cRrU11VHfcyfTceyj9TnjcMUlan5EpOOSEtD+hRKaqUkfjXv74704EFRjxGoQicHk8JEwXUnGDGD18wpIasXg+Ea2MsKMUhCSa9OOOJbFk/bgEdlLXMSZ4MnTTJDcvj4ULFhB+8QmUKdPA0FHcLuK1NcR372Lhuf/BuugBdD0JqWCtw8cx9VJqw3iNOB/f+RxzTl6MtWjRkFl8yvbtHP/4c3iNOFIoQ1YL7k2Q7D3YO1TQ9FbNlam/pWUhslzs2JsiNchy9ZFApyPpnMDJ2FRNvQesi4CVpBc041CNjGyaKjk0w7uqwoxSeGgtnH+SweXX2/18fjVUmYkxYoSCxojBmtYYV03LshWMlMMmmsQMa1iAb31teGT3zCrBmPwZJNAezYPU58eeFtdLDK0OQQx9sJ8YeloWixaWMnVBGa7sOLqvBS2nnyzPjMYyJO76+9vZGecPf9jY9/vw4layeHERAKtWHRzyM5qSyEhv/0u59rD++xxxPrXoFfyvR9ClSuw4F3fWnktbNCeNA5C77PFV00n/lmP32tPQ+Lph8dSqGk5YVsrC2Vfz/cckX7/o33aUzjiaxymYWebg7e22YXbGAjce5/jUZlwV/L3cwbKQyfyI1XcAIyTs8in8vdxBXD360MTufG3kfjtNft5YjgQOuDRqR/l8b/vr469OaD/PH+4NVcWz/HgUr4+uf/yF8Ksv26UAx2GQSeykyanZM7l8xvWcUX4BjtoA3W++ROlpK3BqdvWc0inzCT70ErNOXcl3lt/Ga43P83jVvdQGD6SSdtNMAEqC2aBiBrS0DeOj4TAKKYckuFBSAWBS9hOcKpqDc1ryOO0huwyEC0HUcXjyqaJC7zGqlBBPSKw4yG5QPVD6kyhGFLIV0HxwN1n0dPqparDYucdk6w6DbXuSbN2eYM+e/gCOqC4yMAIQiyczNsbdpsqPqyfxWiCHr09r5JyiLk5a1ExZXozWoBew7ZiesEX1rmqKrtpJUsLLHXn8qqaCNd1ZDJk6lJUD85bC4hWQX4QUgvgRmikDTWkbdxYohiTpXoQhpuBruh/v+pdQnvoZHVf/CrO7A2PxOVhS4N61CqE5+4t/DFhQ//2FSw+7lyHhiVWb2L6nnusvP5lZlUXINKOWvvlFO/jrm7fdMaFz9ZUbrrD1cFEhwuPCSlRhGUzgfpWHqTJFEezbGefpfzm5+Kpyzpmbg4UkpLt49O4e9u+M2cmuYpz6My8Prr8e9u2z/549e2IC4AXoEqpCHMYPsjiFN61qHM34k5T5Wri64N98uPlB8h+pI75LQU+qaDkWzhNU9py+gn84buKVljOIJr0jerMHug4MO+oOA0IJNwLb1wklghzoakPXxkJIav9vihe+P0vjkhI1lfSVCqi1JLENSQJ3hNFrTduxTefiwSBs2QJ+PzgcMGOGTQIdiUBVFeg6hMP9ZN5HRTcM76P17m9L2hWfI8Eoz7ywmYXzK/nQuUsBqDnYzuq1+4gEYwhPPwnfbKt1aN+6R6J3Z8pcl5hhQes9NkO5GRZHtvCB3kjm8YqGnU2lfJCa/+QTh14npg3AWkkDodmFm9yLF+I97ti+90ZqlX//18R2NEUsrSDpVP0851rEC74VxN/KQ7z12vAHqmk249O3DlgHFlZ8BzgmI9S8PlI6y+wBvQbFvTCFOIwgb++1i0xdfFLVhA7DM3sH7FUkXqfCBWeU8vKadoJhfQDhiiTaS0Kd8p2koRGvnUaicVKKEHoXrkkNCMfIdpI2+SR85/8Sd7QZM9KGd+qJOAvnoGWVIlHoDnbi9fhwudKvuNcb4Oa2dE7sqeOjbduZF2nHkhZj8ZZLJ5qHKWXSzJhZRjCSoKIwi1AsiS/LTSJpUJLrJ5rU8Wd7kUCez01cNwiHXVTm5JEdUjClSrNaSoHbJsFN6kMYcA4HvrPPwr10KY7KSSiqRsyMsa5jE3+rfoDXW9cQNWNpg9rNf7p36P29YglZxy0muvsAPa+/zVijvJQRgnQsE/QKnQNqJxRMRc/rQHTtHvE7vV5dw7d+PKLBWjBzCqeedAZx4PV3O7n30fuOiLxwXw4E3HBGo+DJOQo5V19E2ZUutNLCvjEWo9jQg8yFXIW86Uny9u7F3L8HjikBTRny8yO1HW3D6AtLIc8X5MTyGibV1GJZFo7KJPvbitnZWgrKyDb1DTfcMKHb4p577JDQeDw+whhZOLLnYJi2MHZmzSWeSIyezAyYQrClws0/luexrdyNJSzQJ8J/sydCVzS62/y0y1LqyqdSs2Qm9RVThyV+VqRNVDPIEBjwe6bWw3AqxUJwUvcOpu9sYp+30ra5ovWUJQNYYy/HTkx3sL1+EjnuBKGEq9cgHGRb5bgTbK+fREx3pKdbJ/C6t//nNYMhIkXwq7tXsWHHQaS0mFqexy+/chkl+VlpibS7fnBdPzbCQHrEoUzg/gAnRUgUy2Lb9OUIIXAZCVBsKmsx4LnSPfuwyxxL9nQ6+PKjGm5vKyBIxhLEDA00O0BwZKhUpPx5G+NZUGqTh29pCqeOyEafrNsqzjz8uqbJBT17mR9v5+HchdR6Ckhb5G56nQ9iUzKU/vbZ607h0pUzmBcLEHnpJV5rCvFUt8IrdSG6w+2sWFDZxxMQCIT527/e5N/PbuCSs5dwzeknc1w0wPwN2znPm+TlsJe/7hnsqURNFUW1OLmwi0/MqOOiijYKnbp9LnpKn9DgGn8zZ5d28GxjMXdVTebdzhy7+Meh7Ve/GtIX7Pv9nXfgoVQV9KuvhpUrB79/qID70pdGXcMSiciWZH8qzlyZ4Nv5CfIiuTzf5CNiKChieCIm18VnHQIESGSDRCYFmBb6rr1g2CReiSdm4Zg/B1QF4ZQ4jxe2nzfw0vfvGhWLVBRBQaHKVRfadm5BoYohlEGVu4dtMX1EkS8Bl5Q4wwIZT6aNCMX2VPUlgyQamnHPmILiHDpINbJzH9Hte4nvr0WoI+vkz35i4YTuh1//6ChtaAm0YlcGngkrzhEsnyrQY72yXqCHJccsFKxcqrC32krjgvaPlRUuPr8yBw86Mmm/ZsSiOBW3TbQdiyF9vmEJQAa239+0DJCoisDn0rhwWRlnLiwZ92M/8Y2x6iEQWERlNn6nRqB1LlV7Pcye8wadxoX299PElj1uH/PmLCdmxHB6s8j25OJ1+5ByjETQh+FRUBNz8PwLPahCsjPsZ0DmehrmiOiPN5io5ZW6r4qgyzB4W3ajL+3mY1dYrFjgQ3GW0K3OptqayeZIEetbYG93kPZIG7qZRBGgCIEm7AS+keUjyMZmkk88g+erX8B54XlYTS2os2eizJoJL7/aP6+j4VpM7Jl2crjxT5NQfbTxHXpMoL5d5zdtztTfRiomevSLW8P5IFIiEgbzVrWwoG+9tCAUYdvVo9hShmnwgWqLFvG/oUkpqW6MEY4aPPSKXSQuFDWoboyxdFb2+IMBU7iaYhjIdzejZrkRloA08z/jxvDolTfLidfvZOp0e295/S68WU7i+uiIV6bwqEjkcOJJ3TSY7CuiYmYBmqLiUDX8DjemlCzIm4zP4cZKGkRGIK3s+I//QPj9hzjKA/zpgQm1A88HpUxFBg/wrQZgDslbD090dWsC7YVV6Ptr8NzwESJZOWmfOXLzqxlfp33j2thC532P0nnfYziKC5j0i++Sfd7pKD6bfGXy739E8MXXafvTP6j5+BcpuO5KCq67Ckd5yWHXunilmw+f6uH85W7wOnm+M4u7q3NZN4AAuldsR02VVV1ZrAvahNAfL+vmvFNDnLvczQsb4jzyZoxn3on3CeqgS7Ch3Mkzcz1sKHcSdim2ANcn9jzdUZCLb/50wtv3pojQRb8NA/jmT8dRkDviNXzTZgz7XomAkzo68Hrt8T0xO4eSwkK8I6mLmlHw+i7gXuB6IMf2sQgB96XeG6Vph0UmSsyCbHI+fTUyP5fC/HwioTAIgc/vpwPI+fTVmFt2o3YGh7VkcrK9dHaFcTg0KssLiCd12juCOJ0OKssLSOombZ0hBFBUkI3TodLaESIYSVBUmI3b6aC1I0gomqQgr7+oWHu0g8ue+Q++suQ6HE6FtZ27WVGTwy/Xu1nSBl0uaHODJt1jMrKkAdJSuXZ6J5/VarnvVwk2NJ3IrMVOsppqqK627Y4sv+Rbt8CnZ/vo/F0Fezd6ceYYOBSBNJVU4mX/hH75pM8OvQctC0oEomyMUclb1/XbECmZoigKb775FtOmVHL2knK+OWkRN3bOQHhdaFLHCPfgLi4gb8WxHKytoa6+gVNOOQXLsg6LqRHATMXJx9x5nO3w41NULMM4YlQi7VhcCXgED65N8Mjb7RwzvwtFCDbs1DEtCR5hJ2ikmkfRyVLjh091ClSTQMxysDVUiSIgKVNvpOETDdV0w+TlNXu47OxlTCm3AxAONgV4ec1udMMcVSkPZxsG9RidiTBzsitojwfxOV2sKJyNbpl0JyMUu3NGtUcPfXwLQYHSzjFZj5LvdhOybLlTWGxxjONRtugraTGLRoyLz1QMmQL4HBY9polbAzRQhIKRFMw4MY4QDtr3uCgot4i1anTvcVNaoRNrV9n/bBaJHpW8UotZp8awBuBH7Y+/kpH+jmS/tbe286977kMaFgh48P4HWDB/AcVpELzftrlrQvv5sdTPC15pzsw4KJlhds27bOaEXm8kIuheeaOk1KXRm/g1MJRmlHVf/q0vTlxnRyOCTokrTYElc8N9r0k5FgU3WC/1L14JHSZma9z2KTpkn2iUhzrK7zEhdLcm2OVTiJvjJOCQAplQ8Cg9XD6jjs+fqjNvySnslMfz9R0OXvtHLdv3bEAPxWwSAbcDkevpi7mSEtuOPzQfRICSI/Acp+C7UEFxC0KPmUTfMpFxUJzgXm7vm+gqE6NZ0nOPgfcUlawrVXznKUSes4itt7CCmR9k1RxaIndF2ni86hFOLj4Zf7Zd3Ko12srjVY8SiLbhEKPQBiqS2HY/8X1eZFJBzTYx2hygTbAMSv1rDwfZWFfN8dNmsb2n296XOblsrKumPRzsK2qU1gV7bQ+nYGNVF5+/18OHl5dzeXacnfvb+XtVGaFEPtFAFzhkitQtPWJKmTrDjQFvKRb/Ui126RZKu4HrCAdidaSQqc4wXyvZSdTUaNLts4ByRwyvanBXxyxWRwpH3C5jyZOSCIQmqW7V+VnnEoRl2QWWHQJLinHnRYylzZ0SOLqCR9jFXd5p2MHMgkksKp3BlpYDaRelTTiOvqx0uvzMrJhNsS8faUly8ovRjPRAdDUrKyN9auiW5BUHuaZ4PfHuVexqbSY3VMzaXJ3vmz3UOfx4nNlpq5l4zI7xFKoC8SSWIbnk8pX8cK6Lojv+ROParSj5eQhDh64glR/+EO98/kS+3f0iu97eiOLKApcHS5qDcaBebGcgvqwq3NU5hX91FBKdGeWdTiccyCKuaROmGB1Fk3FPWUisp83GkaYsxFE0+Yh8rpWVC5lx8SS2NO0lYepcPPcUHKrGtub975keP/PXO0eXx71E+0KkPbyZyq/IVF4BfXaWIM9IsMzo1O7zTTt4X+6in1uewkbMpP3wRhz0iJKqPnDIMYpgX20nX/jJcwDsq+08jPBpzMo1IzJ0tGLsQzdznLezUkfq410Ru/ePnGdtWhLDNJFTJuOcVt5/34R9R8V1dInWh8UFNC/7neewxRREmi1UaaE6l3G86yxmOjz9Zv0IuILb7ebmm29m/fr1PP/88wghuOACu3rCHXfcwUYzxnciLXzSnc/FrmxcuiC2X8U12STZOrStLqNb0TucdD3xDoH7HiF+oMY+++pPQpn4pShhR9VOHKrGZy69gQONNTR02vFOQoDf4yVu6DbR6aF3z1AxB5FMoiGQpoXLkpjhMC6Xh1juNHLCtczy1HFMZRddUQerWubTEsuiTGuj0tPBp5duJSwLWNd6EZbqGVTIIO1zdynAYbGn3ospSvG0Hkci4iLL8KFKN4ZqDVE5TtDUJfna3+NoKoR1wJK4HYKT5ml8enaIsyNe/NaXRo8F/IJdUMkUkrVlcNtywZoKBUuY9FUpm0AZVBcEWW7RXNrIslV/RbEgMacJX6mF567xX7czXsgzBy/muOIN+B3RQW9v6VzK6uaT0pKv97xwMFP41f83XM8jtWjcPttUhYC4TrI7iJqU6LEEpp5EGGD1RLCiCSKa2oexj9ZccmJtj94T2HmuvUdtbGLJZB9oHj8sSkX222ND2Mp9OJ4ryqnTdnPlotdwqdW8tFtlbe2REEDb7dhJET5bWoPxUA+xyAwcNy5FX7aQxvJCmkhQGzxI9bo11AQaaUgRPgfjYWJGwiZO7z3rFYfEmFhAQwTe7oDGKIZkQnhSPvb6Fw5RH4JsR4w/nXQXF/m2sLFzOres+QRB3ZOmz3yzrc5nz8iM/TAmrpTUcLoUOgJBG590akhLpmKB+5kd3GSGayJTNrkjleevJyyeLljAs3ML2RC3uT6Wz52MlV+C3qnjSDNvpZcZJJI0MzIOj+0PDX3fkBuz26DUW0UiS0VRoCtaRWNYIGQlrVXRwwofjcVFKHDDd1KYZoH7yIy1XmI8M1Vk97Xd4T6Ty5QD1uBI69e0DjX1+n/XId4MHa/Z+GW8GZucVJGjw9pSIF1hzNKtmJM2ID0B2g1o6zyyeetxSv680OCPCy0iCR8Z2iYT1j7y32tGhcgE9j75G9VIWZ3e/rBKyct5CXHwBTpbi1iQOEjRYoM12xJ84bt/Y/O2ekRO7pjN70PjiIQQzMwp4ydnfoo8TxZmwiCiR1K+nMX5045jZelcZuSUEYvFhvWnhAqKoTBlbxcSiLQonO9y4FYsHtm6iaC04e7v/+RHHH/KKQSamtjz7f+g/a57cbu8VKoSzR1DTcpBuHi//BVDyN9e90OmeJEFaw/msrzHi1z9FlJKmkPZrKnKwRIgFDnkdRkmv7r/b4m0BMINzTF7Qdok0Cms+2jQ3CqH5ijJvqIdfT0QEE/oxCJx5s+byt7qJhJJnelTSmkPBIckDJ/8XzXD3vIWVfCpMfLkFPXafRny89fVrMsclJ0KuI53b+Rzl29hybROapuyUu/LwSFxfT6LRFHg/ONqCUY1Hn97GlXNOX2yU1PhxFkevn5SPss6HUTWxTEj4yeAHiB+bXtUgYZSJz2qRtxKoJoSmxShz2gZ1iZN2/5BYGzbjeuiC2DdO+gbN+G98XrUGdMwa2oxduzBPskZYyHaiWy6TvLtDbjPPRP3GacQfeBRMAzQNMyWVoK/+SMyHMYKBsdfDK431ts0iT/6PBeefRJFX/82/3Xnn9m5YwcPP/wwbR0d/PD6a5jy5OvEt+1BqmMoJiQEAgtpePhw6RPsjU5lafYOFCzWdq/AIwyQGkkch8XpLKI5zfkcK2Ao6TQUVuYk+VZ2G/sfbeeKP8XoDNprW0qbBHrpTMmPv+mjceHHuar6FjpiuSjubqRUkWgMqpgHLCrKjD9f6xj+uVvaGrjn/rs566wzyT75BB569VU2tNYRHyltMpUOlKk8McWpHbUtEjEsqkMGSwpcPN8QIWJIfFqEpJQcV+xiRyBJxLBG3B+Z6u+N3387I9dNupWjJ4P6QugE3a27aTrwGsTiZPunUl9zkLxig0mV7lEvowq4uNykPqazqcvu/03TdC4uN0lHHTsO8V+klBT43Qgs6hsCKKl79O6L+oYABTlu8v1O2jrDh8lwPU1fuPc1KQXCZfHUmx5e2+zllDk5aIrFn/d46QkqCK85KDYNYEFpFh87tpxcn4sFUxfwzPY3ePLVeznGeAbHbA/hXR0AZM3pId72BOH6M3EIhS+es4BpxTnUtHUzM9+VjohFSoFMCIQCiT32ehYKyIRIG4OJJeC19QZnrtC4+UoXm+sVfrk3l455ZTA1a1BO+ZiMEEaHQ4UQJA42EHjwCfKuuhiAwINPkDjYMKQ/eDQ1spTgdhicMKWeIn8US9pBZIqQnDSlHr8zyV/eWU5n1DvsOA+V6zBBWC+WZaGqKuXl5SQSCQw9SWcwRHZ3K6fO2Y3hEUghcAZ16G6mM1iGZll4vV7Ky8tRVRv7VIaI9/O74cIVbi67IJ8tvlLuq86jKaGhCFhUNp1L5h5PtsM/qs/2zZ89m9E5Mg2TNzes5sFV36OicDU5/iM7w9EGnWKK4RZ2SnIoEhMBmIgsp23EWsmURErPmdIUnVkzttCaNYmm5jlIKSmbvo+i4ibMnbwvWq9A3LRlC03F+ayYNYdEUidZd5DkwVoc02bgX7acxsYqNsX39Qun3l00zEaWgBQKZV0t3LDlScqvPxZHWekgQ19vbqHp3icJdbUgUwtVDKexxAj+waADR5kig5Yobhswsiw5gARajGp4OrEDSacA21KvT6GfGFry/mqKgJMWw7QKe3hLCqC5HRIJ2x8fU5VXAfURg7v2BVlR7KbSp/WN7VBCe21rnF3dQx+ePLKpY9Sb9ZK5SNl9BCM7EjG0yh7Dw54OyTMdJv71B5ns2MeC/DdYOdPH8kVlfd+q+Y+fZHyu4nGTJ5880GeAjPRMb73VMKJqvHHq7ye0b72h93/cePFhXnyuJ8QFZZuYSxiBpDvq4+7tZ1LdVT5stdX+dlfvbL9XQi6lsHW27u5AANMmX8lfXldoD8pxrTsFuOL0LHoS9nevOD0LfbxZNlLydo7KrXPcfLJJZ0nYPmzY6lf5e7mDt3PUtKuoT6yVJEZ0z+sTTurirj7gKV1TbkpX6Oj03zSJvPUaXXfdQWLXjnGRQAOY0iTXlc85lR/i0unXUqrn0XnfC7TccT+xfdW4Z0zBf4xNcBHetIN41UE8s6dR+tmPceEVF3DMCcfzZNX9vFz/FN2JQNoiTSj2QhMK74s2MLFiuKXYCz4JaQNtIaeFTW9kB3MpqYS1QckMcvDfQrEJEURq2csYqJrt1BkhgS4kfj8sX6yyfLmKUFzoUS8d7RZ7D1qc8SH7dOcLb0ye4BGwwaD/+sMrmRvg1AH2G13Z7Ah7uaG8jZsrW/nqh1fzqwdPpCngQVVhcnGSL1yxGl9xK9/eO5W7m4rp1LX+6n4D52faHFh+CkyZAaqDPoqYI5Qng84fTEgqhZi+6fQ4P4/V1YVZeSq6pxzPvV+n4LHvESuZTeyGX6JJHbn7DUSKBHpg8RCAiw/sGCRqhCLIPvcUqhoq2V/bymUnz2fBvj1EahpIh1Hqm6mfLdnzMjJtVjiCaehIZWLJGwypDCfWePqREPt2+5i9yA8S9u1IsndHGMscW9DtsM59UdGQDv8Rr+8hYlLeah5FbVjgdUY5u+g1btL/wdznN5FcZxLtUVGcEu9Sk8D5k3mk7Boe6ryS5khpyocbDcBShtVumhhs7woh0ISCle5ZSCobtsIN/zVT44pSFS0VLNxLthbfqhO4PYJeZfYftKTTtm6Fj3zE/r2kBO67DxYvtkmgr7sOWlPkyd3dR1c7jOKj2XHhEuFx0d4V4dU3d9noPIBhIlQF4XEOCvowh1N+IpOxzgKZFCTrtb7JFM4jHpYjlLUTSyyXaR9WmsPYWpZlHwYn9T7yWKnrfe+N1q9aMzcj/V3nnMF93hPY5JiCnhBQPzF758o79x3y/AZl+XuIJLxEEw7cToN8X4j6DhdSHEj7uvd878UJff78Q4JnE4bknc0BYgOrRQgxePEMJM8S0iaErplOorEC95SD+BdvG1m/WZLahI/yijMpLyrD6fYCAl1P0thcTWPLQZYsWJEeEfSAALfyRJDLOnZzUWA/BUbUDspQ1DHtQ+fkzOyL/VUtlJbm8u/nNxGMJFm2sJK8HC8PPbMB3TA5btk0BPD8qu1oiuDE42bQXNXMrvXvku11c8zp57BtVxN7atsHFXLuO9gQAveSxQhFwTIN9oaq+FftYzxc9wzNsVYURUERatqIe913f3W43JCSSd+5hazjFhPetIO6//oN0jDHZCYM71mmjAJLDAkrjHaL9r/eN6JMKrj2Cqbc9DHiQuXtp+/inqfW9Ea1js8j8MPdcyXX7YHCTQm0LfswSioQPjdKbtao/R0k71QgJ8DkBUlyyrLIVXqIF7eByxizzFaGC0pVTfa2l/NK9nwWuraho/B6bAF728tR1OH9496puP322yd0P/QSQd98880jj5OlYyRssgXNlYtQXGmNyAtz/Nx3TC71uc5+g3MCFHIgO5+aylnsmbGQ6spZtBaVE/Jlo6eKJAop0yJ+PlrrYTjsrU9mJgNMSth+syVSZHVjQewGOIOV+QHK87po6l5orxvRfzMFwaJJ9TR15RForBjdv5jg6zodhyfBq0q/YyIQaKqKpqljtM9GT3oSYqCuspOtPWay18K0D6QP88tHt6t7C3SRwlVilkKsJ7WXFa0/0X0sUZgSAlF9zMbijC99fLDckPDCxmYmvxRgejzAa2WLmHXJqUwvdKdHhvP09/ggtvpg2QRf0T5L+d6pU4g8/zIHQkke6NJ4ujpGY3vITkDzOA+XM4qgpbWHv97/Js+/voNrLjmOT3/4Q5xddYDFL6/mr4P8Yclx+d1cN6OBSye1UOpKIqXoC4KQ5oAtiSBfNbhhSiPnlrbzVEMp91ZNQj1U76QSxBDC9kcbG+3iUppmv5adDf/+t/2Zc86Bj388Fa1l2MWoKiogN7d/7Y5CBN27XrUSiVamI4BTrCSzkgmW5uTwt+pcDkZsDEwMQSKVc/tPhhaSQiBjcULf/SWYtk3vXH4MWT/+BsLj7q+Kdmi7/w8A3LK6dERbKNBj4ZhjX+DXNZL8gDLKtmsbVd5IwFIhnAe54fRtKMAuyJMiOut5dR2RLbvwr1hy2HfNeILAky+TbGxBOLRRMQz/vFf5QLc2oAfyjhNoisAwbSJvW9ZJHIogz5++gVGc6OaW7S9S1hima8DoqpZFUcovVh1OutNkzv/BIzsHuERyyMLKmcJ3+qsgSHBY/ODtM21cV1X40forkA6LsVZWqqiY1RdILoQgYVhp9laiIEdUedvC/r7PiuESBlLvj9UPGWtTECQti03JIFWTujj9Chdnn7EA3T+XNxNT2diTzabOJDU9PfQk6pHStMmuhMChiL7EA5nufDs0HCuWo86djbl3P/rqtSiVFYheuTwGW2Eiz7R5D/Jce83zgUGL6T7+sH5sagyFIgbAJWIQFpqOPfl/7SivBWDZ7Czys6fyyKoWAL58zVSmlLqPiPi91zuQApyRBM5wYnAy7ijt5n/9ZMRrJxMGbW09tk4pzsF5QEvLbM8UHvX5z39+GFxCGfTIh9b86C24PFwLPfDAoCSjETd0Ohs/1T7bmHXYOrj0mAo+PP0AsrWd6gXLuG1zF8Fo4r2LYzlETlqRaB/Bs97WcRjBc+/zKV4PuZdfgG/lMX2E0cGX3qD4lpsGEUYD3P21PLKzVN7o8vG73YW81uUjYqgpRXjIDkglFkVNlVWBLN4OejkjL8KXKzu49iyVi1e4Kfiwfbi3sczJY/M9rJ7qIuRSBhrWE65MtWw/ZdddQvCd7cRqG2AAEbRn6iTKrrsELds/spn3o88MKx8URWPay6txhOzrTrvyLKLnnEzYMoZ/lOu+MXrHdwK/AialbtQApBku8mr27MPxcKcHcedakpaJ0+nESBFyaKpKUk/iVFSkcxoiK3b4fgnaCaBPvbyF44+ZQUdrN48+u56CXD8nHTeL5tZuHn12A9l+Nycut8k/H3rqXYLhOCcun0FhfhZPPL+Jzq4wJx03i7xcH0+/vGXAJGWxK7Cfz6/5Bq7IbMLrjsWqm861ikkoH1QJY+Ois89DClwmP5pRy6RdrXz2V5JdB1UeeOBWrrn6w5xx5tlUVx9kxTHwi1sVFu0tYv9XitBjCu58w2YdsvqLdg3UwffWi2EkrzIBW1lgGAb33HMPTz31FIsWL+YH3/8+v/rsMdz8m7WEesIYAvzZbn722ePJzfVy991Ps2rVK+zfv5/rr78eTRuc8HKWw8+N7nzmqy5bVkg5QTZFOn6A7PMHFKfElJL1W1Ixoh6BooElB+/7PbFi2g0vxhBkNb1yxo6NOTS2YZTiZsPoEgm8um4337zt31x29lIAnnhlC6+u2zNAtMlh8dnhiAmyVTeXTVrBsQUziBtJsjQX3194DU6hoqGkX0jgkCcMGg7uNz4HHEJIbgiCOEa3JzOkhib5DNZ8pB5dCvJUiarMIB+B6lJZsMJg/nID1RlDWmAlBYrDxkmkIezaDKotly0T8or7x6b4qnMntqP32+dYL9VvGHaAwqEwOSdMY2m5TWKVNXUKqwO78Ot1o2KglbHMEERUhT5YBWHeC8vIEFCYlBzbY0/SQY/AEDbP6/t2jOTYYzDEAgejnkrI9CZCLHDAY+/R8/fq9kOrZ6bZctQY58zv4YpjFDzFK3i0ZRIv3B5jz4ENEA6BwyZ/VvJ8gF1wQFoge7GnXrl+iJ/gXqaQdYWK53iV+DaLzt/o6AdkX9ya8Auc01OenF8guyVSh8gqk+RBi7zPOyj4toPYOpPQYybUZnYcv/TIMKvBEuQtn0bZCbno69YDkrIF0/nsjql0bWgZ1n/62IAFGts+2D7WsBAVE+9rA4QTCV4/sJu6rk7aw3ZseJE/i+rONsKJRB+WObr9MtD2kAjNQajdwV1Pd3Dfq62YVglmTAEtAE5lwGfFKATL/YV8G5H8W7V4WrHoSBVfG7M/OIRdoaNwX9c09iayuTS3nnmubgC2xPN5qruSd6MF6IwGUI0tT0pKgaJJpIwgFYGiKFiyN5Y/85LctI6erO23AwV13S3ct/l5stw+nEIlael9uQ4jLYX7rvRMbOfuSO9jTqePwmJf//Y2YmkJTee0aZmx+fwuFtZ76PlWFcItmJun4v2Ug3kfW84duoFPqJhjWEFnnPNHe+y7I+RUFPKf1y7nurptBL96Ly3BGI6iApJd3eQWFuP878/z2xPh99vvIB4MonjzsLBsMqyBvsdwmLKUmEIQLcmC0iziMnUkMY54+H2h6qFXnMciedkniZalCrOt/BDdHgtCNYw38tLrcDM5txSnqhHTE3gcrvfO4Eq12s7MsF5lKr8iU3kFCIFz/kxyb7gYtTCP055+3eV9bddHszuT5tM5M390XPu7da/NuAZev3ZEPC+pm2zc0di/Zv8XnAH0mncbWmNH7iOMYzxUdTSL2bLzAHpjkaXE7AkSW2MTOHlOOgE1J/uonccMhw+owEkLi+gKnsz6PZ1YUrJyfhEnLCxEkTKtWJpkMskjjzxCV5cdR+dyuXjiiSeIx+N932+WBr+OtbPPTPAJdz4lhoNkswJNNhHfoRMYequBtr88THj1ZmQyCYqSsSJD/YcICut2bebZNS/x4bMuxe1yc/8rj1Pf0UJZXiFIyYsb3kQ3jCFUQWbmsecn/4mWrWAaOi6fk2iLjmPS6YjixezOOpsHOy3KD7SyuLCdpaWrqe90k+M1bYbEhEFNtAiHqeOREXRFHUBimkb8l+wn/UpI2F5dCPuKbYJExQLNGtqwEbCjwWJrrYkQAkURzC5XufFsJx89zcHkwnkIMT+VvTdKS8X5/Hsm/PZYwf68Ack+YuKFSnMEtnZaKNMCtG5+mAvrBU53Au9qE3fL+K9rWhr37b+eMm8LV898iEJ3B7rlYGvnYn666TscCM5K73k0hf9rmWsP/+TGfntO1cjvbKL2yTsxnGVo/kLqn/4ry6as5OH/uRXF0kfVHVedZefS/1fs8Qnt53cP8XUzq2z77d98fw5+l5eBZcCEEGS7vXRFQzQH2lMxtEOPy9+v+hM5rioe26bx2gE/wfiREUD3tuumtBHtzuXpJfOoLvZRLcMcrH6Sxs3tdEeDxPQ45kDC54GVkoUyvF22qwfWd0LXxBJ5BxKHFNORAsPSSJo2nUzS1AgksgjpnrEeWGXO4kobA6CPK0Wkzo+kJY9q7EmmbPLb6p7ug0n8bS6qZy3jVcM+F5+u6Uzf/QYnRhJpr+Pe0+DPP1qdkXFQxBAcJkLgLltCqKOKmlATZZ59aJpgX6uJmTuH7PIFKEdQDFUCk/yCySmozwRk8sjXsKYIdjbFeXmnjeWV5znQFIFujn7t4vNOHvF9V4lFos5+1pyFEnfRKHr26V22lV9wAGPKaqy8WnufSoGSRo7wcK3XPvvzQoPbF5lEHMBR4tg9kra7KZyR62ZlL2fyqREqAs9gxDrIKsrlvteX8a1fvkZ7RzdqrgdpmmkPT68XNFQckcTO3baGIUBXhIIpRy5dkghCAgeLoh1IIIoDqUtORMEbauNhkaRawpsPvsjCqIvqX/+KztUvopFNJCGZ3tjBDCCJ45DCnAPlrxhGRYs+dWZJk988sI+s4iaQEGoPo/g0BMohdvdA7jIxum8sUvzwqdw2aY1fTozPkZUjqigpQfG4qNpVzYzyFfzw69eT4/MQjsb54qcu5VNf+g3d7V0It2uQb2v6hgeNXal/42lf/9bNE/r411zzZL/jnlF1L0kkNR5+dQ4PWgJFkShCpkwliRBy6NdUC6dmkePRB13uyul+Pj8pm8qtgkhIP2IC6ENbTCgc9GkEBRQlJYo1hH18xPaHgrG/luTLr+K55mrM6hqMmjoAov+8B+NALYL3zj/rzdWNvfgKjmMW4/vkDSgFBejbdmB192Dsr8I8UD0hOGCvDJJIoi+9xfJAD3/4zBf47kP3snb1al5/9VW+1N3Nj2+6mcX5uUTffCfNuZAD9J0CwiDX0c0DzVeQrYXoTJSwLzwXtDASpZ8JfBz44ZjWlyX4QnmQSztb+O1PunlwlY0Baapdj0oRgs9fKbnu1rn8Sf8W/9p5LmhxFFcYS2r9eQyHysoMmfZ/+ckIuaBSx+3+K7nGqwifyjEL9vP77yZGtM8/8Q27o5nKE3PkZB810FgCa9tilHtVlhW42NWdZE93kvm5TgJxk7Vtsf5pGWZIMtXfX33lmAldtx9/5UjB8fHo6P4fmsuH21WIr3gmMmFhaW6cTkdavqAFTPJILi4zePCgTRz9vflJJnnk6AXkgO/GNh3WMaVRIJoF51tD5QtJ1I2bkZbEGsLo/u80fWHRh53aZ+GqzyKsS57bYMdDC7eJ6jcxTTtXtz+9SVKU7eWWs+YDcNycEzh106PQ/BBy1oVkdT+AmF0HCHxZGu7ia6je9gdOrzyVsxZNwzJNphRmM6Uwe9QCZVLa8kgtMUnWagTuyAIE/vOjqMUmVo86arh7eZHgzBUOFs9S2NGk8Js9ObTMKYPpOeBInX1YMpMKD72ljejWnX1kpNHtu9Fb2t7TPJfeW1d15rGpsZyzZlbbOUCpoAEhoKEnm1DCOWJMxHC5DhNpK5SUlBAKhSjMz6epq5vA3l2YoWyshL0/knFQpaCkqIjS3Bw6AwFKSkqGjZuZXqpw4/l+ph1XzL8iJbzS6CNhCvxuDxfPW8GHKs9g/7sGu2qC77nPes/j9/Czl35GtXkAao+8lqfGgR+JI5CX4/pmVk4nPn8nxcW1gMTvDyJUCFA4Bkgvk/6a7W4219Sw/t13ue7GjyHjcUjEQVVwzpmHX3WyoX4dzY42hJZegpEYkJgYWvUWPf98gJKvfR7FZbtqViJBxz8fILTqrb7kxeGEgqy5fVzjYI1jDj3AGdhk0NuBF1KvHwcswiazHC0cKPuaowsH6QY8+BJMLrUN3vYu8HnghMW2sNt+YAySUUpQBG+1xfnCunZOL/UggVynwoI8J8sK3LhUe75aYgYPV4cI9lblOGT+Rt+w6R1gH97uHNf4mkAPsF2H7a3wYCswoEBax7+eyNAMfV2MbVzslhzlTCOQLMoYuHDo30JYh8JSNjmdsNI+AHniE1szsy+qbkn7uu018PKGibmtU4FT57v7fh83EXRKVq7L1diSpZKv2+MZcAhiqnhvSKBHdErsPpmDNJRIG8SxlKP0LIqC97jjEYpC9wP3EF331hhZ8e12Wvl5XDLtGhZnLSH+9nYO/Onn9Lz+Tl/gS3x/DbG91SlwV4CiENtTRe03fkbXc69RfsvH+fTxX+T4ktN4quZB3mAfH8R2fPe2jEycd1prRq57356Jlo82EfQjL+7I3IbrjVxG0mmo/O5gGW92ZXPrynr+PvsJdu62DzMXzGulOS/O9dtnsSnos3E2MQzYX7NXUDPxFamlXe0DkJiePCLOLxO1Lib7rfvRY2uReWW433kQNAdaIkz2ntdI3P0VKJ2REhO2c9VHZJVqDX99ePCoKAqVpcV9skVG47Q+8TJd724bU9BZJJ7MyKxN+e0vMrJ+l1sjHDobYG2C+o32fHuE5BhlZGP3xeH8iqoqm5zpSNv3x2f3jjYrK4o38DH3g5yx7XmUl0JEm1RAwTXJxDoni5eXnMddkRvZXr8AU6ZPcvm5io5h/T1VF8z25mNhl+yb441zc3kA0zF8WNyXBm4MCSUu+M5MlWvKVTvvpJcEGklip07g9jDJvcbYSKB7DcO2tn5920ukq+v2673vHU1McQw+mhzD6+/luXovB7WU4j0P8rmpe/uEXu+uo2B7pf1+7++KMur3zr/qoYx09wtN7wp4d8Kvu21v22Eruquwi6SuUpoTZm9DNj5XkvrOPKSMpn3d3z20bIJ7mtIONVeKXl+5YZwxTxKIHYDYqpE/5/NmUVk+jbqGKjoDrZSX2uzLTS11xOMxJk+agc+blRaGJQGHNFkWaubatu0cG27GIU07mGI8ZGgZSlK745c3DOrKuqcGv//WIXGorz06+O+nnvj1sGPQi7shBIFEN882r+Ku6gfZ1r0bS1qoitr/mTHgg0MbfgOFtkxhOemPg/Hnt0fsxL9T/+Dbg/CbUcWONnwFWEvY1XVk6j+h2BXKx0UEbVcvwRKSZ6ZArR/OiBnIpnaUGTPRSgr7x3mE8W64L3vQUPpkEEUI3PSgCBPnjiDdOAkKR5ods4H7bzS/MSLeoNRIiqQXUwgMQsyQ60cEpn7e66t5vRnZF/fee29Grvuzt/cKMlC8d3FwtWDnapu8ZwJbptbD7K6mo2ZK7WopZX9bMcunHqSxO5f2kB1pWpQVpiK3mzf2zkG3lPfNdWUatumo9tRFFRkZ33TtajlBn+nVD1JKagOJPvGVrs645azBFRQMS9LSEe67v9elctVxJRw/Lb0AjVv5YLavvTrRBNYfBqDwjOOHnYgEcPPX/tD/wubnBsuWg/CrdfCr7xz+XVMIjmkLcuLrXZS9myBhOWgq1wCJ3mTvKUe5bRQN/lugNwkuUDpZGg0Tb1MxhyK9D4XgiSdg1Sr43Odg5Upb9w6pqC1Yvx5uvx3OOguuvBKystIeKSFIBWCm8CIVSt0mX5wdYElenP/Zl8+bbV6Slh3gMXBtK9nD38dyaDCwwrxTQ2T7UTyjV02/d2/e6PbEwJZmMttsIiNvTBPYOF4H2May41W1NP7yL1R8+3P4Fs1FcTqQUmJ0B+l87AXa7nkMmdTTwuJe2Pw4H+gmgRhUbbEIRiXZXoFu2JLVoQpCpqQq24IK+3N9/4ZoTsvkhppnOXHX/UTM5LBoR3wM3dvblJkim+M5g5cTpGPFOALYl1rdKBx5/KYAFlvd9Lphx3TtG7ojq1L/xtmq9DhbchWKzpvB5RfNJpRVya8CTrbVRGgMBYnpnYCFIhSbADq11+SAQLixBlUZGzdjdXRg7tqN1diEbGvDam6x5e+o18rMmTZnT8qIHdXWdstRhRLFKH7fqGjM7574PyZooO3Tdw05Dn/mbv7M+JM3AkF92Pfys53k5zj7RM6y2dkgoTsNUr5lHTszMm/3rn1q9AXXu94a0meZyxQe1VvgaeIVkbQroU5wW7Wl4bD7zCn29tX3CARjvL6tke5Q/H1B0BJ5eyMdf3+A0Btv4z91JZNu+x7exfPtALCBWOAADM9RUUrp1z5H9jmn0Xb73TR866dkPf8qhZ/8aN91Cz7cPODhxnZmHAGeSf07tH16907B7qMkewXkn3MCM3/2ZRpuf4jo/lobu5o1lUmfu5r8c04YdQo/seEXwy6/Ik8RhR6Tq3tyAXjI003Htl20x9qPfGl00FvzZ0ztlskfHrqzTdaQXIt9rxXMgYIhOr3Djnx85u4vi2fuHvzWs4dAdS89MPjvt58+5O+hFoQWQ0g/xpbT0XcsQ+g+mlwJwJk2meVQ7dFpO3nl3ihfvleQNKGkJI/GxjpWvfo2SBdf+hR84wwX8bvK2bEqC0eWhdMvkaboL2LOEMHTT9+QsU0vpcThcNDU1ER5eTmNDQ089thjXHPFFcyanMPLG20y9bOPLWf57CKefPJJWltbWLRoEYFAAIfDgWVZg/r8ih4Wr+gTn/Q7Vj/AGuG1gWuy9kOXi9oMjO2nwtUjC6xH9vHus7bSy44muG6U6/UmRMV+8z/DquESaWEle/ilFHQkO1HfvJN8R5ZdpG2U69+5/IPF/uU8e09G+nvw53dmpL8feeWHIyoOxS0wZ9r2haq08bd33k3LubEyNW0Zuu4ntqzLyIWrPvHSUV2/EnBZsCQo+1J7c/UB5DfvxaZ46Yohb3vPKrjnl8M9RZ39b3i3hPIf1U7c4zz2PhIiY3yqG09WSFiV/OxdH9tr4xDaDg4L3C7UPL9dAM+SWKYcXKy6d6yH2VPTHt8rGAmePAicPcJ7q47usJ23fhj8XKh4ls6Bx18h+I/7bdv3po9ymjGH2KaNo/qGcw5uGXqA6rfB24f7dUngq6l/YxdvglA8xrqa/VhSMq+kHBDsbm3kndoDhOKx0XGtjR8Xo+GP44387PX/kkg2Cov7VIsNikRPcciMpyhQbtwYdiPsiOWzP5CLW7F1UNxSSUiBT1gMN3Hd47TNDrXP5BDjlsn2o5Y5E3zFwf6qasEZ1RZlwcNjNqVsBASniMOx6bkdEnUIw3XNCufEdveOzI5v8ac/nRH1J1SLwNYsMFUUwyL/loMUf3ofFbwzXpEOwKnnLOX7KwuY9+C/aH72LcjJQs3yYnR0UnHm6ez/+oV8h7WsWfs6QvMivFlYljl6ke1bVmVkHK5++9aR7bZpKZyq4x/QnkbE5c82HNbPFuDY/5x3ZB399uNDPv99PMV9fGX8181QHk+m8isylVcg3E58l5xE9scuRrhdqIV5LN62z63U7b9BQ3qeLlz+37du/XXVH09/EF6/ZvCXd/4gI4OozOA9jUcZzWY/zPZqqhr6ui3AW5n3IQY2/eBBum63/U9tUjnq4kVHzaZr/vkfRjSTTzUsZgXsE+HyiJv4ZoWmNK9tmia7d/eDsJMmTbLv2dw86HMxJI8ke6iyktziLmBp1NPXgUMnKfeCy46+iyUE3ZEQP7r7t0QSMc5beSY/vXk+LV3trNn6Nn97+j6iycRRxen1tx5FnmWHnVghMLcLPMEcphbPQKgq3e7jeTjsYJrSRWVWkKDDTVx3EbWyiCQl0ummKOnGJRIkLUn1GPdbOrbbUO8ZFqAo5CpxPrQkyc1naRw7I4YDgewYuy34+cfeFRn1LVPAtQW8VgtVuTpLKwzObIYpj0vcB+2U5PHaIAhoi5fyw03/zbN1FzIr5wAhPYsN7cupCs5Aor7vyR7/f2hXnrk0ZcfbWL0ZncX6//wN/uOm4pu/iPrf/Y7FV3yKk+YtRFpW2vr8Cn3jhPazlwj6f9ZNnuARqBvxXRWBU7EjYGSfuSZwO5z43V7bpx4B17ziwy9nZJV/5Rd3Zmb3vNQsMiZvDpGiggFVSsWAv98HcmG89tlo8VmZ4qLJlE1+defW/j8CkmTPPpbOPRGA4/esxRnsGpOG6CWCvmd9e6ZMmsNWGVKieAuoWHgR89Ueehr3IKTCwuOmoYliQk5f7yfHPTua0g+AKIIUsdoR2kKmZHdTou9KPbH0CwZN+9O308LkhnP1D2tP23Z8+MGvZ2T9/uJvazKT+50paZIx7g0LT/apqLknE41H+e4fNvCbv2zAVOIoWW4sc0ChrjG0TMURrfxGKidB9IlxemtTrlDgU0C7CbHk70i88TtmLIU5JwNWcND3+njYfzl2+SsHyNpQ28CRHKLtueODZXWOtDlTfDaWJcHvoTnQw81f+g0//PbH2bHnII88+Sa4naCp9vgMuNZ/vL1ggjtqY02XXHZOZsbhzszjMHtrxxqpNXx7aH9YPLR/4uNGhASpQKFpcGlTnJ6cSSSTnejlsm8PTcS5g0DYuZ2mRfyhJzFr63AsW4bZ1kH0H3djrN+CMGXqk8NPzWmZtuaEQAa6CP3017hOPQl12hSU/DyMA9XIaLQ/Z3mCMAwhBFJViG3YyvSeIL+/5uP8OD+fZ559ls2bNnFrzy/578/eyhk5WSSef73/i5+aLtKxGx8Z8Frneyh2/lHZQuTVdj78ywh1bbIvxcgwBZOLJT//mobz9Cu5tuY/qA1OQnEFkULBQkstwmE4dDK0Gm66WhnF1olhWTb3w4qFAiFGZpb/xDfsM4dM5Ym1r3736Exkat33JC0ergkzJ9tJKEWw1hI12RdM2n+PQpSeqf4umJYZgun6i9a9B3pekl0wnay8SQT37yfW0kjJ0mMQQiCEkq7gZXaWxXEF9vqbnWWlvWcuSx4cQbKIUSTP4e//9xh94d4rmUO8bg7jE9uxogLLMinKyeE7V3+XpzY8gW/2pRjd75Dvftv2zLzHsdd7CXfvh798akm/Mz0WuS4kZrtK19+ysQL2fOgNWn+F6lEG+qs3uNnVpPD7PVk0ziqDE3NtwsJeAmiRaVVnX19vbKanPlXoVFFS6+vwew+bY5URcEcS0x08s2cWTtXk5Kl1WFIQN1T2dxTwVu1kkqY64hBlLNdhwPh1d3ej6zpZOTnIlhYmnXgSngVPoCeTKELg9LiJ+v2E4jGysytpaW2lp6eHvLy8wzg8LjvBxWXn5NJUWsIPWgs5ELW5BGYUlXHjsvOYEp/Dvf9zgFWrD5KMG+85rvXJqz85oT3Q3jt0DrL8PX0+0PuhbtxhQk1KorEY0XfXEne4EHoSgZP4/j2oPWEiU5OgmKlKRWk4ewMEgNQN2v/5EJ4lC8m9yI6kC778Ju3/fAipG4iUUHg/NA36KLqXARcP+N3L+7fFErB3oD7tgq4QeMdZIilqSp6pj/BSQxQpQRXw4Wl+/nCiC5cKMRMeqArxcnNs2HUgPmgVrZUPVhXXAld7hgTCMJbScJ8VH4BSeJkQ6xLmTnH2/T4Rjk9MFTSqIn1Q7f0I9I1xeWWyGYFO4ju3YTQ1jHuSvnHMT3FFLFp+dzctf3sQvbUToamgqvbSVxRE75zJVCqZqiINk64X3iS8eScln7qaJZ+7nrnH/JQf8gf+rx0lOz8jakJkvuMpomQJbAz6+eJuDx8p7+ArF9mg0G9rK3h4dxkhUx2eADrTzQIcEsuAROPZePfU4K/5KM6OWuKn3EDsvE9jbH0OZ7QbNBdWVgHO6g2wfx24/fTBtvIQeXKoHj7kb/vjSqpC9BgCNj9g9sgv9AfTX9+SUZkSX/yAbuM/tX8W/6vtxHcK9KSKlmPhPEFlz+kr+IfjJl5pOYNo0puyRdK/7i2ThoesZVLQ5PXRhQ34zfUmOLOiE+EcXod8acBcFDjhmzNUrp+k4RpIAi0kiT0GgT9HSOwYBwn0UEZIOAyRiP1TSv6v/e9rn+qe2OD4TBNBD7Wm0y36M9J+qKru+mBN3KEks1JS35mPUCRR3UUk4aQznGXr8DHYFT/6x/ET3NGjpx36KzEKJpVPJS+3kPaOJjoDdjREfm4hRYXl+Lz+vrUwbJGwFAl0vh7jwsA+rujYTXkyZNvgQhm/RfQBdGcFgoSZYH1gK3+tup+XW98iYkRQhYoilJRZKY5oH0s5lK8/PiKy98QvHUoGHVG/BYaQbCmQhIr8fO6j5+EtmdxPzD3Kt+vvzpngAeglgn595GEYSCCXRsr8z/9PBR+Vlqn1cDT9bd1SsSwFp0NHFRbHTq0FoLErH6dDJ2Fo/UXExHt43f+P220fmnFURsguFjVYFv7/4KI0hMo/UP2VAnK7DVgNndIJUuA/VgcJ4Y0OEIz8tyJxC4n7/7V35lFyFuUa/1V9vc6amYQMk51AgCiyKVwEcuMFRQGvIgQNcEBROKABL+BNgES8ihtcFEWQ5YDKpsgmkXCRIBwQA4QsQhYCyWSZJCSZJZnp2bp7uvurun983T09ySw9M71O6jknJz0909X1Vb311vMu9ZaM9STJpiIYhA0bYPNmqKuDT32q/0LQtu38zebNUFsLZ589pELQfS1+BXik5nM1QWaURXlwayV/rK+kIexKjWgOLsyWBnf87y2dvjAPdbUViP5KcPXAq2/SvauBMZ89Hd/hU1ChEB0r1tL+2tvEWtvS5lBSyKJe14npfmeNZvHLNt/4qgtPQh604LnFNitWaZgKuhRoAtb0PcGfaVrNJVtewI1Cu9wZmfZHrzk5o8877dbCkMGh+A8Avr91ScZW0FM5eMZnjq5h5tyzaJ7g43/3tNOwqYlILIIUzgE+lwDih1BTx2E4hWiEEGilsNetx167PllENvraG8kk/aKL3RsYDAGX/3jt0PbffHNWVxoX/+iUE32jFNl6Mpnip9XaiUnKFB0oEn8jZVrxX5Xlcdj2jeuQXi8TfnA9Y778BWR5aTy5sHcR6FQO5zyUpOTETzDlVz8i8NelNNxxLx3/fGfUyYnl9VBz4VlUnno84a1OkW/f9En4Jo5HWNagnw909RMb1BANB9muY9SXO2O8L6Zxt7oI2qG88fag7OeZrME6lCfFtms6euVsaK4FbxjtDYKSiGEeqE88xc3fDbL8AxBCIyU0Nu5l0aLbOP20Gi4/ZyNfZhx1N9QQbHbhrbYRSoBKjUnk1vhKrk3g6quv5qabbqK9vZ1I/MaME44Yx4kzDunFf0OhEBs2bGDmzJnMmzfvAJ5s0IOruuoHl53OxPgN3l6iEHT4zrsHlMVxQiBxcokVmqAJyw8JJ694JivC3BYNpqlJhsY4zMrLHyMU8WIYiXKfMln8xszKaMRdd/x3vxNrH0TjYLv6UV0uF+GVq7G37UB1dgHQ9ZsHsQ6bgu1xQSxWEEorNQ9kX1cHL3+4luXb6gBo7w4Rs+1B8z+yCa0djbIXzQtS8Yyl2B0/dzyCzBJuf3hDGjtQT6WRwb7pqiKV3x83zMxwixt7jaGl4YwtmjO26CHbPonCFKljL7XI61pJtQHyCgkiIvBMDTLx9noq/qODWCtoukekUx6d1EXslvv5qL4Rz7hqYh3t+D0lVN48jz99aTw/3vgwbU27kSWVTsGqRBForfNyRmZT57bBJi2hSMymPRTxklk7uDHgz8M9V4BS6GDYuQzX40Z1hSAW46hIwHNx2+avebTyPTHti7esf33uB8f8+2PwxqVmkgvVmhACV20t/pNPcqhUbW1OuUfD7fcMqlL88e606OGrlnHjxtHR0cG+ffv63RlXx0Is6mrgW75qvuitwIuI+7ULYQ+SbGvaxY0P/ISHljxOzZixNLW1ULernq7ucM/6zdHcqZBA79FEwwJlaVRY0G75afSOZWKpizKX5M2uiawQkolaILzQZVv43ZJWtyIQjlJaKQnGbALhaM5sZ7eOcVLLSq5s/jNnBRqoWCHoVk6xoAI2+UFDDNgaALlD41oGJe0ZkMzEvfXRCl7ffSav7z6z9+/SFaflc43zIYuIxnpsQ61srBIfx83/Pa3bt0N3jOMWPEbl0ccQjcYQUoCtBrTzkus4S/riN2/mthB0c0eA5vbW/mW8yPOwDEYN2c8KJ7dT46FaY7W3MWvVS3G6rrGFNTxukNMSVc7/dlkNH6pqOmqdnOKKEh8x4UrWIh8xxxHZ6HlP/kSPfh38i37y2j3p99eY1cMxcLLSrK00LkuyY0+Q79zyN/7vpfeRFR6kdKNs1RPnLpAY9bOH/1f/XD4uYu54HmRMaxASrQaKLtxlZGsoOiIhCxp2NQeYc9a/cfWCuymrqmDWSTP53ZOvgMd9gG/vt+8fluG+OOeqtz+9xExLFqHjRXbbI370GSdSVl3LltWr0B27oMoFts6kdDlRk6gismwF0XgxWGc/tRhe1nTm/UwAqjVAaPELPdwm2/nXlkW4rp5xf3iO275zMW6vh2efeZZtW7Yy/xe387MFN3Hu2K/AbcWZE7jk1l089HwEWzlH75UCrQUXfkbzvQWT+HPJDdy1/kK0sJG+NpR29eijHPqLEmh9diiZojrvpOf0Jx7IZXJc3BejWbU33Jv3JQpADzJf2ervl254Y7TsxMna58LyUDq+Fn/5GCzLNaRYo9ZQ7YHrZzi+y2pP+mE5u8h8Ecm8BQQIia1s/FXTmH3yJZR5S6madQcN7/4cgNrj53Pdo3U0dE+jZOyRKKXi9qyjcwbT8yK+d6qAc+104rZ71WqRuEFhsCH+1dt+dn98IvqkseCzegpAZ+16p372OyEKrsamM4eanYExvFw3nUmV7byzcyKNHWXsbKvgo7aKnOcEH7i2NBUVFbS1tbFu3TpHJkpKaCgrJxwOY9s2pd4SSqWLWDTEuvXrqa6upqKios81fMnXJ/Fc1yH8dWcFXVGB1+3mjCOO46KjPs+OFZIfPraCrfWtzjkSa/S5sV2FI3yFxtLjCea7d9EVCxB0exCxGGiN9nigK0TIVwuHlcYVCGlreRFf/LGmvTTeeR++GdMBaLzzfmJNexGWVRAJ7H35lkqAS1JeF/Qc9oFAh/NvWI6i+PxG4g8b1ZrdYZuntzkNrm2J8Ex9J8GYSouQFcsGX0z4w9brM9ziA8ZjMWTdOYzP3Pv8QR0k/timFpGl9ZuVdss85SNrdyuw8J+w8BqzXkYB0crdPtFTELpDSX63s4Y39jmFwuqCvngB6DwGVzxAiwuxbCwl295BqE7w+NHeMqzGLfiX/BL3vu3g8oBWTuDSV+I8VzKJ98B5Sh3fAZ0RYnQffjy+fadJJgLc9zUTDEmkW1NyvE3LF6bwdO1cntx3AXu6Du3lIBkKBrJx1X5iKXC+Ip0c5XEe+N50i29NduFPLQKNJlIXo+W+TsJropmR30AA5s+Higpob3d+Nhh1KLa0rSFxsVmnpd9w683FpROXXyv6Mxs6RtCstkZHFowQgrLScspKjyIWc4IIrnSK3iR0uFIcHdrLRU3rOLVtB34dc4LAYmTBXnFicZ0itrVNfddH/Kn+OZ7c8TwfhfYgkVjxG2RNkYgs2hc6zmP3E5l0xlxY2ena4AnNKRzbHJgvHJGyinxBxCPLNoJldUcAEI45oZemjnJ2tFT1iF7aOilz7Q7GS1ath0P/fKMRRIOR8XWhiqq/nwzUHbgu3hjizwNh/Hi48ko44QQ45xxwD8Dx3G447zzweJyC0ePHZ4Bnxvc5rTmsNMqimfs4sSrM3Zuq+Verz4lzpYnI331ON48fBlcoUo6utSb4/iZCH2xGeNygFCoSdW71HsWXsfWH5hb42T0xdjVoTjvJScp5a5XikadsmuqBMmAqsKvvz8/s2M41HzzBId2tqHhiUCZG5sFXthrlW4R46fVl4qXXl+V0TWNZyTi/7qeIqMHAODawygxWEeL51xpHofE4+kXxSFPdz9E7G5c543Dpq2Yw+vWlWPin1OKfUjssV0Z/SBR8bvDE39AQVdG0CkVkL/Va5PhzI8StTwt4+oC3RxrVcIpAO6+VcuK1c84O8P3zu6hYMo01z1RilSi8Y2y07cQJNKSVlJ9NLmbbNtXV1Vx++eVEIhFmz56NUgqtQaVcpKWUYu7cuUyYMAEpJX6/H9u2sSyrMIrEFZofJltLwJKDNqcKyPg/sXWT2TfT4kjDG6bZG9dlZ3y/Pt3M26DTKfabOWFIosHol/0+bivSALEYsXUfOmQz7pvVXUHnPZm6Vgrg3E1KMWhbKVqCncn381kEGpxCcx8IzeOWzTKpCeEM30i1yykbA0Z4ye5lSUnZ0cNeXLlzr9y/tM+WH3nwFR654uaCmze706J8VhsTb6/HOy1CrMXJW0jWshhmu4FbfoXtcuMZW4nd1kb1scew7+avMr9qAy+8/SQCF7JkDErbvScjT/rBktawZWlU4IFTRTbXbjbbzeS5Ah2J0rn4VaRSWGPHEHzlbWK7mxFSMiPa7prbvvk8l1a+Mz91x0L9xqVrxWl/gDcvNxtAAUIDVkUFVdde7fgP/CV9HVHJ3r5lybT6mJTTYa6DOXPmOEv4gYHPfO7RMX4ZamaT3c03fdUcKt3YefYzJQvASkkwGmXNto0959GlUzAy15xRloKYKHCjsSREm8BG4LIs2mMCr9uiqkTisSRdGjoiMWpKLGJaM9bnwmcJAhGb1oiiW2c/219qzdTQdi7e8Sfm7niCSaGdqI0MKQ8mz8ZP8uyY3o90iEy1fzDs4UUKV1xPCiHQUoBS+CZMoHZ8DdpWCI8brRUul5XM/UqdwoTN6fCA7HuOclb/Zii82OR5GBSA/ycbnPwAz5gQydI1I8q1E7m/JDasLULChSgtATRtGkSeChemNzxDPweTwFublptFkU0svTArAuOyLF5/p54rb36BzZv3YlX5UYpkvSg9xPh6ti2MR5fOSbsP6fXaFIIekpWdkAVL0hEM88jif/CF2SfS2NTCY3/9J9LjdvIehMiJ/n1v0e1mWrJtrglBaSiKWt1Kh2sz5U27EZ8oz8JFeT31FgRWCqfXWeX4w9ksRbwgaNIKGaahcOTulUN7qCbgihd7vdXc2MiV37u+qOXsgcWRpBvIVlBVDj+61mLGlz7H1bsX8N6umUhvu1OCBneCeMYHP/dy0bTQ5GwNTij32weGfH4087ju4qMz2t6NL+VXNyc4mruqCqqqkrZYupwtYaucNFbtx/t12t9fNOwluV85nFYiUcqmpmKs8zy+EiZ/+jYAPB4vv/6yJByNIUnhwFoPbvMm7N6+HP1D0Fe73moRvNVidMkA4yuFpiXk563tk3ll83S6Ih6E0CP3F2TIByClZPLkydTU1BAIBIhGo1T7/Y5PQPf4OCpqa6msrMTj8SCl7HMN37hnKvUhN0oLJoyp5pJjz+AE7wks/v1OXnh5M8GuaDzRZXT6B11G6gdRcLEoOhrFDncnb/NS3d3omELbsbhgqGGpbiElXe+9T/NDjwPQ9d76IR0gzvmmGP+/qsg3rZERMHptWq/tCbG8MYQGwrZ2ErkGKAL9izmHmUhDFhHT7uw0/NAFB8xbKzD7tylvnNsOmMK24oBbDw0MDAwyvBdrp+hzXcgXf68AAoGb/LCsGtHmAp9CU4FAg9uFa8daXNtWo72lvQwaoTVolfJM5tCOwcCwIxLPJIX92QqWHvd5Hu66jHU7P46trYIk5ddOs7hiskWJFU9AivfP3qsIPNJFeFW0TwN9WIhEYOVKIyQHkz1mYKBFkYuzOMBm6q8A9EB68szAVi5qWseRoX1IQAt5UPKJpXv+wb11D7N837vY2jYFoHMqzMPnIEJn/9BThts1ApVNUdJidKyHlPz6po7yA3m6KKB2DQyysggMetkvhx8OU6c6hZ4H2kaEcC42uuACcLkyZvuIeNtKQ4lLc/6kTqaXRrlrUzWPp9tARBD7l1MBzv0xcdBMs0i5zVtH4v6LPBy4LCTUbYOf3m1TM85GCGhshmA4/stO4P3+P3v1h09ybOvG5IUdmRrFX79YV1Rj+LdvH9/no78M3GS0Zm70srETDQ4yXDN3Wkbbu2e1GVMDg4PWrBuBDzATUGu/bjZwnPzlxIFvvxtuuxG+NaOcLbdOZtNmN74q2/Eh2SKlCGH+7PXEAVkpJUopTjnlFGc+lYoXQzwwx0wpxaxZs5KvpZRm4gfht7lSAwYGBgYGBvnY60T8UHmy4HOCO6RsWiKL++Lwut3DbxJcRufxYo4E/i4Uj1uKjdIZUytD/VGW4WvkSgYNUcs4xl7cRO0tO5GlCrsNhKsnnXtEY15Wiguwu0IcMudcVtxwBt/d8ji7Vm9CllSiBT1FoPsqEmNgkA8bHojsaKD1/qcQlkRFoqB0vAAlTI12Wl9r33K2C+Wd9MnbFuIbs5rs1sE3GMl24fVgeT0pE5w7XZOLb9Fas3Tp0uTrwRBC83SkjS12hHn+sRzn8hfWpFlW77kaAEfsXZaVIVbNGv0edIcF0tbY7cA0KHVLaks9tEViNAWjKA2H+F2UuiURpXFLgUbTHrHZ1RkhZuucCMFZjX9n3pZ7OWXfW1g6ik3eXdj5wVWGRIwKuxfQSoMlEZaFViqZn+ToOI3Ocx9H9feNVtx70QED2Q6cf3fip9XAN804FYF+KM6uJ/IDdZLb5DNemXUql+7lSgYFhQefepcFP32ZQHs3VqUfZavkJcuFmFtYVd5uJi2fXChhUwtBNBqDaIw172+jMxQiEgqDx923TXff89mx3yIRMy9ZdTo4W5bVbVNdtxIXbkSZq+dyhqz4Ugq0APQo4ieFBimd6VYKZk63eOjn5ayccgXnffgdupUb6QugtAXInhuk8rk/hc2cFaMtu+DSDBeCvqwAhnmEYy2EcOwURq99An1fXiSllZKfaeN2u5Ovj55yaC8/e+rl1waFMqea1pCfV7ccRijqStrY+Zyi/WVESonf78fn8/WSo4Fe7y+nAFuDXkBx2NgaFn3mIkoaJ/KL21bz7toGh2pLOaoDAWbVGexvm+jBbJehCJAwMmZgYJBXldYbHzvCw5N3H8oxM7zYduLWKU3sIxehO6tRH3kQ++WlVq1+3egxAwODvODlsuN0L2NISiYv/DZ3tAr+8tJKHls0l5rf/o6WlWuR1uCBw7M61xh9VsTYdM5k3XzuNO72XMuShnPoipSOLGvtR8XpgdEjuCjX2CYGBgYGBkPB8jHH9tpztHZ2oUmL5jFpwVU0Pb6Ybdfdio7F0gpsnBJYa/YhAwMDg1EIvV8EMmprfvjUBsY/9AD/2baRRcdfxHcXns+np1ekZ7cUabT81PnLMpri9tYdp5t908DAwMDAwMBgBAh3xzLKz3xel+FnRQx5/kO9Yo5aa+addRQLt7+JWr6KNdfewGXPb6OlPYyUg0+1+ssVRh4MDAwMDAwMDAoQOp1KaGnCXJJqYGBgYGAw+lG++OMZ4Q4d571veEMOkK1zBV+Zeb0+KdSMTGRo9zGbAtjpLtVLyqYu3e6tnM/ya9abGTHIpamTiUYmSzdX+qr5QbDR6CwDAwMDAwODguLkxYbLXvwoo/koj54zyfAzAwMDAwMDAwMDg4MUur4P/2/incr/gTE/pL+i6CavxWA04Ihz/jiAja1xSls4xczTuWxp84uXmHVRhPh/cnzqhmbWV+QAAAAASUVORK5CYII=</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </HTTPBody>
      <TcpPackets>
        <PacketInfo time="519323000" offset="0" length="747" />
        <PacketInfo time="519323000" offset="747" length="70325" />
      </TcpPackets>
    </HTTPResponse>
  </HTTPTask>
  <HTTPTask id="396" hostname="dev.bluealgo.com" path="https://dev.bluealgo.com/smartformup/ui/lock-ic.png" url="https://dev.bluealgo.com/smartformup/ui/lock-ic.png" ip="144.126.253.3" port="443" connectionId="35" origin="ExtraRes" frame="1" startDateTime="2024-02-15T10:57:48.229+05:30" startTime="519323203" endTime="519323203">
    <HTTPRequest method="GET">
      <HTTPHeaders>
        <HTTPHeaderEntity name="sec-ch-ua" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ik5vdCBBKEJyYW5kIjt2PSI5OSIsICJHb29nbGUgQ2hyb21lIjt2PSIxMjEiLCAiQ2hyb21pdW0iO3Y9IjEyMSI=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="sec-ch-ua-mobile" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>PzA=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="User-Agent" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEyMS4wLjAuMCBTYWZhcmkvNTM3LjM2</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="sec-ch-ua-platform" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>IldpbmRvd3Mi</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aW1hZ2UvYXZpZixpbWFnZS93ZWJwLGltYWdlL2FwbmcsaW1hZ2Uvc3ZnK3htbCxpbWFnZS8qLCovKjtxPTAuOA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Sec-Fetch-Site" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>c2FtZS1vcmlnaW4=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Sec-Fetch-Mode" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bm8tY29ycw==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Sec-Fetch-Dest" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aW1hZ2U=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Referer" index="8">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aHR0cHM6Ly9kZXYuYmx1ZWFsZ28uY29tL3NtYXJ0Zm9ybXVwL3VpL3N0eWxlcy5jc3M=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Encoding" index="9">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Language" index="10">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>ZW4tVVMsZW47cT0wLjk=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Cookie" index="11">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SlNFU1NJT05JRD0zRDVFOEZFODBBNEYzNEY5QkM0OEI2RTc0ODhCOEY5MQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Host" index="12">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>ZGV2LmJsdWVhbGdvLmNvbQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>R0VUIGh0dHBzOi8vZGV2LmJsdWVhbGdvLmNvbS9zbWFydGZvcm11cC91aS9sb2NrLWljLnBuZyBIVFRQLzEuMQ0Kc2VjLWNoLXVhOiAiTm90IEEoQnJhbmQiO3Y9Ijk5IiwgIkdvb2dsZSBDaHJvbWUiO3Y9IjEyMSIsICJDaHJvbWl1bSI7dj0iMTIxIg0Kc2VjLWNoLXVhLW1vYmlsZTogPzANClVzZXItQWdlbnQ6IE1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS8xMjEuMC4wLjAgU2FmYXJpLzUzNy4zNg0Kc2VjLWNoLXVhLXBsYXRmb3JtOiAiV2luZG93cyINCkFjY2VwdDogaW1hZ2UvYXZpZixpbWFnZS93ZWJwLGltYWdlL2FwbmcsaW1hZ2Uvc3ZnK3htbCxpbWFnZS8qLCovKjtxPTAuOA0KU2VjLUZldGNoLVNpdGU6IHNhbWUtb3JpZ2luDQpTZWMtRmV0Y2gtTW9kZTogbm8tY29ycw0KU2VjLUZldGNoLURlc3Q6IGltYWdlDQpSZWZlcmVyOiBodHRwczovL2Rldi5ibHVlYWxnby5jb20vc21hcnRmb3JtdXAvdWkvc3R5bGVzLmNzcw0KQWNjZXB0LUVuY29kaW5nOiBnemlwLCBkZWZsYXRlDQpBY2NlcHQtTGFuZ3VhZ2U6IGVuLVVTLGVuO3E9MC45DQpDb29raWU6IEpTRVNTSU9OSUQ9M0Q1RThGRTgwQTRGMzRGOUJDNDhCNkU3NDg4QjhGOTENCkhvc3Q6IGRldi5ibHVlYWxnby5jb20NCg0K</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
        <HTTPCookies>
          <HTTPHeaderEntity name="JSESSIONID" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>M0Q1RThGRTgwQTRGMzRGOUJDNDhCNkU3NDg4QjhGOTE=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
        </HTTPCookies>
      </HTTPHeaders>
    </HTTPRequest>
    <HTTPResponse>
      <contentLenght>5593</contentLenght>
      <HTTPHeaders>
        <HTTPHeaderEntity name="Date" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VGh1LCAxNSBGZWIgMjAyNCAwNToxODo1OSBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Type" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aW1hZ2UvcG5n</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Length" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>NTU5Mw==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Connection" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Access-Control-Allow-Origin" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Kg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Ranges" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ynl0ZXM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="ETag" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Vy8iNTU5My0xNzAzNTg5MDUyMDAwIg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Last-Modified" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VHVlLCAyNiBEZWMgMjAyMyAxMToxMDo1MiBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Strict-Transport-Security" index="8">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bWF4LWFnZT0xNTcyNDgwMDsgaW5jbHVkZVN1YkRvbWFpbnM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SFRUUC8xLjEgMjAwIA0KRGF0ZTogVGh1LCAxNSBGZWIgMjAyNCAwNToxODo1OSBHTVQNCkNvbnRlbnQtVHlwZTogaW1hZ2UvcG5nDQpDb250ZW50LUxlbmd0aDogNTU5Mw0KQ29ubmVjdGlvbjoga2VlcC1hbGl2ZQ0KQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luOiAqDQpBY2NlcHQtUmFuZ2VzOiBieXRlcw0KRVRhZzogVy8iNTU5My0xNzAzNTg5MDUyMDAwIg0KTGFzdC1Nb2RpZmllZDogVHVlLCAyNiBEZWMgMjAyMyAxMToxMDo1MiBHTVQNClN0cmljdC1UcmFuc3BvcnQtU2VjdXJpdHk6IG1heC1hZ2U9MTU3MjQ4MDA7IGluY2x1ZGVTdWJEb21haW5zDQoNCg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
      <HTTPBody>
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAMAAADDpiTIAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAA6PAAAOjwHjOWJ6AAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAtBQTFRF////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAjcMAnQAAAO90Uk5TAAECAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHiAhIiMkJSYnKCkqKywtLi8wMTIzNDU2Nzg5Ojs9Pj9AQUJERUZHSUpMTU5PUFFSU1RVVldZWltcXV9gYWJjZGVmZ2hpamxtbm9wcXJzdHV2d3h5ent8fX5/gIGCg4aHiImKi4yNjo+RkpOUlZaXmJmam5ydnp+goaKjpKWmp6ipqqutrq+wsbKztLW2uLm6u7y9vr/AwcLDxcbHyMnKzM3Oz9DR0tPU1dbX2Nna29zd3+Dh4uPk5ebn6Onq6+zt7u/w8fLz9PX29/j5+vv8/f55IfRLAAARgElEQVR42u3d+3+WdR3H8WsbG4PhhiIgEjQwcZzyFIxDEockwAMigkOy1ETCQrQEsjgYCOUpSRumuXUgZSDGZGToTMRChymMQOYBEIEBN9z3/f0X+iHr0UFx2/fzvb6H6/X+C+735/OEXfd1X4coSlLade1XPn76rIUrH6/Z0vDe8RMf5/h7DVtqHl+5cNb08eX9uraLSHApGDxtcc3Ow6pFObyzZvG0wQVMLYjklE78ftX2U6rVObW96vsTS3OYoL8pGn3bqpeOKK0ceWnVbaOLmKV/GTS3NqWEkqqdO4iJepQzpzz2jhLOO49NOZPJepDcoQu2pJWRpLcsGJrLhF3OORVP7VdGs/+pinOYs6Nf9a7ZkFExJLPhGr4iupcLlr2vYsv7yy5g4i6lY8ULKua8UNGRuTuSix88pCzk0IMXM3v7KbnlFWUtr9xSwgasZmBls7Ka5sqBbMFa+j2VUdaTeaofm7CSvqvTyomkV/dlG7Gn96pTypmcWtWbjcSacx9IKaeSeuBcthJbuq84rpzL8RXd2Uws6bK0WTmZ5qVd2I7xFMw/rJzN4fn8SmA4I95QTueN4ezIYIofzCrHk73/DPZkKpP2Kg+yZwKbMpJzfqM8SRXfB+STc+OHypscuIGFCecLm5RX2cjZYcm0u+u48izH5uaxN6kMfk15mFf6szmZTGtWXubIFHYnkPyVytss405j/S9/LyiPU9eNDWqe+t2nvM7ecnaok1tPKs+TuoUttjkdfqkCyOoObLJt6bNNBZFXS9llW3L5QRVIDl7ONlt/7n9BRgWTzAIeNdPK5D6qgsqjPFigdWd/qlVgqc5nqy1PYY0KLjWF7LWl6fS8CjDPd2KzLUvnF1WQebEzu21Jum1TgWYbvwy0ID0bVLBp6Ml+P/P03y4VcHb1YcOnT/93VNB5h8uETpuLP1CB5wMeLHSaDDqkgs8hHjv86cd/e1QCsocjwU/JGdtUIrKNuwc/Me2eVQnJs1wr+klZpRKTVWz7//M9laB8j33/b67LJglA9jo2/t+5LKUSldRl7Pw/c8FBlbAc5IHz/5Huu1TisounSPw7HV9WCczLvHDg4+T8XiUyv+dS4X9mjkpo5rD7KIqii1JJBZC6iO1HUccdKrHZwWFAFP1cJTg/Z//XqETnmqTvv/eHyQbwYcLfNJFn5QEwTZtW3Tt/9szJXx02sHfvgcO+Onnm7Pn3rtrUZOOzvJDsp8ktjHfaJxvWLK4Y+qmveisZWrF4TUPMDyVZmOT9j4jxtU8n6uaPaNENmvkj5tediO9zpUckd/+dG+Macv2iMa16UEuHMYvq48LZmNw7xuK5B/x41aTitny64klV8Tygtjqp+58Zx3RfvEnjH1jnm2K5T3VmMvff1fxNAHsWab/Vs98i89eqH+rKKUADya4ZJ/Jcltxxa0xfrpbIE4JfMjvVzK8Hy33Wwb82+8Sq7JeSt/+cl4we9j9ZJvtxy540+qXgpeRdGjDD4DhPVZ4v/4HPrzT5suIZSdt/8bvmhvm4oZvw+zxu7jO/W5wwAMuNjbJhlLlPPcrc00uWJ2v/ZaZOuB83+/LWgvmmzg2dLEsUgOcMjfG580x/8vOMffQk7f9KQ39Ip8bx4acaOny5Mjn7L9xlZIJVMf2q0rnKyMfflZxHiS4w8nPvt+Ir8C0jPxcvSMr+ex8zML2dl8RZ4ZKdBiocS8rlYSaeBPG7kng7lPzOQImEPDeih/z/nyct3GMzR/6b7IkeiQCwVHxwdt7NVr5XvMjSJOy/5CPxc3+97DTpJX5e8KOSBACYJz21+i62qnSpl+4yL/z9t5e++n5Dkb0yRRuEyzS1Dx7AN6TP/hTYbFMgfU7oG6HvP/dvsgO73/LbuHLvl+3zt9DfLna17LwcuK1G+OamqwMHIPs0oB+7UOnHopVeDnv/XxEd1pNOXEmX86Roqa8EDUD0edAbC9woVbBRstWzIe//QslJverMZXTFr0r2ujBgAL+S/PncoRPnPSQvcPhVuPs/U/B5YPv7udSs3365ZqkzgwXwTcHf/4a7VW244G+D3wwWwGa5ITn3jEXBp11uDnX/veTuBnzavXZPi5XL9goUwB1iI9p9lnvtztotVu+OQAG8JjWgU8NdrDdc7N7B18Lc/8DQ/4XI/Q83MEgAi6XGs97Re6lz1ks1XBzi/nOkHgm272xXK569T6hiY4iPCxgp9c/jWnc7XivVcWSAAB4Wmk2tyyVrhUo+FN7+8w8InQJ0+jZqqdveD+QHB2CC0L+Ne92uea9QzQnBARC6enJvJ7drdhK6W6QqtP0XCt0QOsX1olNkeh4L7V7xUUIXAbnfVOjyoFGBAfiByFQy/d1v2l/mmZI/CAxAnchUvHiutswz0OsCOwSQuSX8iz50/aJI1RNhHQTIHALU+FG2hoMAQ4cAw/woO4yDADOHAM/70vZ5DgKMHAKM8aXuGA4C/icid4TV+9NX5MERId0jdo/EQK7wp+8VEn3vCQiAxPXg73r0is08iafJBnR1uMghwAqfGq/gIED8EOASnxpfwkGA9CHAG35VfoODAOHvxXf5VfmuJJ33+MwIPBku69mDlHsL3AbXFMr+i5N4Xkzi3GcoL5K6VGAWX/et9NcFSl8aCIBp+qNIe/eK9c4CL5qcxpcAD08DC54ODuVrgMAFwR7eLCdwK2QolwZv1R/FWP9aj9VvvTUQAEe1J5Hq6F/rjvpPxDoaxv57JvR3EYFfwHoGAUDgl4CFPvYWeIp0GL8G3JzQu6UF7oe/OQgA92nPobnAx94FzdrF7wsCwLqkXh+pfzZ4XRAA3tKew8N+Ftd/JMZbIey/QP+c6Bw/m+s/PDRdEACAXvrHQuP9bD5ev3kIzwwt0x9DXz+b99VvXhYAgCH65wHz/Gyep38ucEgAAEZrT+F1X6u/rl19dAAAJmlPYY2v1ddoV58UAAD9y0GW+Fp9CZeERBJngm/0tfqNnAuOoui72lO4ytfqV2lX/24AAPQvCBvra3X9a0JCuChsufYUyn2tXq5dfXkAAB7RnkJ/X6v3167+SAAA9F8W6e35UP2z4CG8RHKt9hRKfK1eol19bQAANmlPIc/X6nna1TcFAODPCb42Vvt66D8HAGBHgm+S1b4tekcAAHbpDqHR3+7a78naFQCARgAksjtDAABDAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB0BwDdGQLdGQLdGQLdGQLdGQLdGQLdGQLdGQLdGQLdGQLdGQLdGQLdGQLdGQLdGQLdGQLdGQLdLSa/z9Dyf0X7kelN5d5GsPvQPvl+7L7n3F/U7U4rIp707rpfzO3p9vbzJjzD7s0qeGaCu2/Q6bBwLxsyn70LO7i5/yE7WE482THExeO+H/Gff3x/CH7k3BFh/62sJc5sdex1qgP2s5N4s3+AS/vvu4+NxJ19fd3Zf69G9hF/Gp15p3L3N9mGjbzZ3Y39525hF3byp1wnAMxhE7Yy24kDwGYWYStHP29//zmb2IO9PGcfwM1swWZusL3/LodZgs0cLLEMYB47sJs5li8A2M0K7Gan3a+CV7EB25loFQBfAayn1ub+BzF/+xloEcBKxm8/Ky0C2M747We7vf2fnWX89pM92xqAK5m+C7nSGoAVDN+FrLAGgAtBnchWW/svyTB8F5Kx9XtAObN3I+WWAHyN0buRr1kCcAOjdyO2LgqYy+jdyFxLAJYyejey1BKARxm9G3nUEoCnGb0beZqLAZKdTZYA1DF6N1IHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMDoAUAA4GGyf699+DsTL7rw41w04faHNu7OACARAJqfuHpg4SfVKRxw1eojAAgbQGZjRafTVSqaviEDgGABvD7vc5/d6ty5fwFAkADeHt/SYuPeBEBwAI4vLGx5s/Z3HwNAWADW9Wldt9K1AAgIQOOk1reb1AiAUADUFLWlXlENAMIAUNmubf3aVQIgBAAar1VcCgDvAWRv16l4exYAfgM4OV2v4/STAPAZQHaibsmJWQB4DOCH+i1/CAB/AdTm6rfMrQWArwD2dZOo2W0fAPwEkP6yTM8vpwHgJYB5UkXnAcBHAOtzpIrmrAeAfwAyZXJNyzIA8A7AE5JVnwCAbwDS50tWPT8NAM8ArJbtuhoAfgE4dZ5s1/NOAcArAI9Jl30MAD4BSJdKly1NA8AjAH+Ub/tHAHgE4E75tncCwCMAg+XbDgaAPwD2mqi7FwDeAHjERN1HAOANgCtM1L0CAL4ASHUyUbdTCgCeANhspu9mAHgCoNJM30oAeAJgkZm+iwDgCYBZZvrOAoAnACab6TsZAJ4AGGGm7wgAeAKg1EzfUgB4AqDQTN9CAPgB4JCpwocA4AWAlKnCKQD48SfgLDN9z+JPgCcABpjpOwAAngAYY6bvGAB4AuB6M32vB4AnAO4w0/cOAHgCYIWZvisA4AmAKjN9qwDgCYB6M33rAeAJgExXE3W7ZgDgCQA1w0TdGQoAvgD4rYm6vwWANwCOtJdv2/4IALwBoC6Xb3u5AoA/AB6Sb/sQADwCsEe+7R4AeARADZcuO1wBwCcAtdJlawHgFQA1TrbrOAUAvwBszZGsmrMVAJ4BUFMlq05VAPANwM58uab5OwHgHQB1q1zTWxUA/APwXrFU0eL3AOAhALUuV6Zn7joFAB8BqGUyPZcpAPgJQM2UqDlTAcBXAKmR+i1HpgDgLQD1QaluydIPFAD8BaD+eoZexzP+qgDgMwBVodexQgHAbwCa14fOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJIHYLZex9kA8BzAEr2OSwDgOYDVeh1XA8BzAI16HRsB4DkAdalOxUsVAHwHsEyn4jIAeA/gaI+2N+xxFADeA1A/a3vDnykA+A8gPbqtBUenARAAAHWgb9v69T2gABACANXQqy31ejUoAIQBQDUNaX27IU0KAKEAUMcWFLWuW9GCYwoA4QBQqum27i1v1v22Jp+6AaBFyWy+u2LMhZ+ZMRV3b8741QwACQ8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAnD4bGb0b2WgJQDWjdyPVlgA8wOjdyAOWANzD6N3IPZYAzGL0bmSWJQBTGb0bmWoJwFhG70bGWgIwiNG7kUGWAOR9xOxdyEd5lgBE6xm+C1lva//RnQzfhdxpDcAwhu9ChlkDkN/M9O2nOd8aAH4OciEb7e0/+jbjt59vWwTQmb8B1nO0xCIAX96rFnIetLl/TgbaT5lVAFwWZjt/sLv/aDIrsJsJlgG0284ObObVXMsAoqEZtmAv6Ysj67mPNdjLUvv7jzruZA+28lYHBwBEo7Nswk6yoyIn8lNWYSc/cWP/US53iFhJda4jAKL8tWwj/qzNj5xJYS37iDu1hZFDKdrCRuLNlqLIqRQu57tAnMf/ywsj1zKqkb3ElcZRkYMprmQz8aSyOHIzl1WfZDumc7L6ssjddJv3NisymbfndYvcTs7Im5ZU17/PqqTzfn31kptG5kjv6x+Ng/RtvYrM4gAAAABJRU5ErkJggg==</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </HTTPBody>
      <TcpPackets>
        <PacketInfo time="519323203" offset="0" length="319" />
        <PacketInfo time="519323203" offset="319" length="5593" />
      </TcpPackets>
    </HTTPResponse>
  </HTTPTask>
  <HTTPTask id="496" hostname="dev.bluealgo.com" path="https://dev.bluealgo.com/smartformup/ui/marked.png" url="https://dev.bluealgo.com/smartformup/ui/marked.png" ip="144.126.253.3" port="443" connectionId="55" origin="ExtraRes" frame="1" startDateTime="2024-02-15T10:57:49.453+05:30" startTime="519706421" endTime="519706421">
    <HTTPRequest method="GET">
      <HTTPHeaders>
        <HTTPHeaderEntity name="sec-ch-ua" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ik5vdCBBKEJyYW5kIjt2PSI5OSIsICJHb29nbGUgQ2hyb21lIjt2PSIxMjEiLCAiQ2hyb21pdW0iO3Y9IjEyMSI=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="sec-ch-ua-mobile" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>PzA=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="User-Agent" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEyMS4wLjAuMCBTYWZhcmkvNTM3LjM2</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="sec-ch-ua-platform" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>IldpbmRvd3Mi</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aW1hZ2UvYXZpZixpbWFnZS93ZWJwLGltYWdlL2FwbmcsaW1hZ2Uvc3ZnK3htbCxpbWFnZS8qLCovKjtxPTAuOA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Sec-Fetch-Site" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>c2FtZS1vcmlnaW4=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Sec-Fetch-Mode" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bm8tY29ycw==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Sec-Fetch-Dest" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aW1hZ2U=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Referer" index="8">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aHR0cHM6Ly9kZXYuYmx1ZWFsZ28uY29tL3NtYXJ0Zm9ybXVwL3VpL3N0eWxlcy5jc3M=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Encoding" index="9">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Language" index="10">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>ZW4tVVMsZW47cT0wLjk=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Cookie" index="11">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SlNFU1NJT05JRD0zRDVFOEZFODBBNEYzNEY5QkM0OEI2RTc0ODhCOEY5MQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Host" index="12">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>ZGV2LmJsdWVhbGdvLmNvbQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>R0VUIGh0dHBzOi8vZGV2LmJsdWVhbGdvLmNvbS9zbWFydGZvcm11cC91aS9tYXJrZWQucG5nIEhUVFAvMS4xDQpzZWMtY2gtdWE6ICJOb3QgQShCcmFuZCI7dj0iOTkiLCAiR29vZ2xlIENocm9tZSI7dj0iMTIxIiwgIkNocm9taXVtIjt2PSIxMjEiDQpzZWMtY2gtdWEtbW9iaWxlOiA/MA0KVXNlci1BZ2VudDogTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEyMS4wLjAuMCBTYWZhcmkvNTM3LjM2DQpzZWMtY2gtdWEtcGxhdGZvcm06ICJXaW5kb3dzIg0KQWNjZXB0OiBpbWFnZS9hdmlmLGltYWdlL3dlYnAsaW1hZ2UvYXBuZyxpbWFnZS9zdmcreG1sLGltYWdlLyosKi8qO3E9MC44DQpTZWMtRmV0Y2gtU2l0ZTogc2FtZS1vcmlnaW4NClNlYy1GZXRjaC1Nb2RlOiBuby1jb3JzDQpTZWMtRmV0Y2gtRGVzdDogaW1hZ2UNClJlZmVyZXI6IGh0dHBzOi8vZGV2LmJsdWVhbGdvLmNvbS9zbWFydGZvcm11cC91aS9zdHlsZXMuY3NzDQpBY2NlcHQtRW5jb2Rpbmc6IGd6aXAsIGRlZmxhdGUNCkFjY2VwdC1MYW5ndWFnZTogZW4tVVMsZW47cT0wLjkNCkNvb2tpZTogSlNFU1NJT05JRD0zRDVFOEZFODBBNEYzNEY5QkM0OEI2RTc0ODhCOEY5MQ0KSG9zdDogZGV2LmJsdWVhbGdvLmNvbQ0KDQo=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
        <HTTPCookies>
          <HTTPHeaderEntity name="JSESSIONID" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>M0Q1RThGRTgwQTRGMzRGOUJDNDhCNkU3NDg4QjhGOTE=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
        </HTTPCookies>
      </HTTPHeaders>
    </HTTPRequest>
    <HTTPResponse>
      <contentLenght>841</contentLenght>
      <HTTPHeaders>
        <HTTPHeaderEntity name="Date" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VGh1LCAxNSBGZWIgMjAyNCAwNToyNToyMiBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Type" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aW1hZ2UvcG5n</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Length" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>ODQx</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Connection" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Access-Control-Allow-Origin" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Kg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Ranges" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ynl0ZXM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="ETag" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Vy8iODQxLTE3MDM1ODkwNTIwMDAi</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Last-Modified" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VHVlLCAyNiBEZWMgMjAyMyAxMToxMDo1MiBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Strict-Transport-Security" index="8">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bWF4LWFnZT0xNTcyNDgwMDsgaW5jbHVkZVN1YkRvbWFpbnM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SFRUUC8xLjEgMjAwIA0KRGF0ZTogVGh1LCAxNSBGZWIgMjAyNCAwNToyNToyMiBHTVQNCkNvbnRlbnQtVHlwZTogaW1hZ2UvcG5nDQpDb250ZW50LUxlbmd0aDogODQxDQpDb25uZWN0aW9uOiBrZWVwLWFsaXZlDQpBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW46ICoNCkFjY2VwdC1SYW5nZXM6IGJ5dGVzDQpFVGFnOiBXLyI4NDEtMTcwMzU4OTA1MjAwMCINCkxhc3QtTW9kaWZpZWQ6IFR1ZSwgMjYgRGVjIDIwMjMgMTE6MTA6NTIgR01UDQpTdHJpY3QtVHJhbnNwb3J0LVNlY3VyaXR5OiBtYXgtYWdlPTE1NzI0ODAwOyBpbmNsdWRlU3ViRG9tYWlucw0KDQo=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
      <HTTPBody>
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC+0lEQVR4nO1ZTW/TQBC1gHLgyMeJwr8Alf/QQouEQPBDQPyA8iFugFpU+gHHIkigLRcOkThk36QWEom5wYHEu62g5ZxwWTROU4ni1Lv2xg5SRhopkWPve5PZmbdjzxvZyEaW2Vb16lEK6RIk7kLitZD0BYp+CYnf7HufA74W/WYbE1rrI17RVgtr56BwH4pCKNI2LhS1oHAPLYznDvyj+nQGip4JhY4t8H+JoCMk5nzpn84FPEm6CUW7WYHHENkRobgxMOC+9segsOAaOA4SkTTPa7kFL/0TkHg/aPDouaQNXtNd5PMEr3qOD0EQHM9MII+0Qd90wlwm8FVJt4oCjx6JsHY9FXgK6ZRQ+Fk0ASjaTVViuc7nCXTt23r/6xJP7cC3MO6iSZn6UuOFvly+qmfxID6NFDq+9M9bRD+SB7mAXw664CdL05H3I8Gywwg8i6yuTskBfGPlL/Ds/P3d19h0Clk0JhKIVGUBkZ8sTeup8ox+Xl/qe091a/Nicvqw3B1C8OjKjDuJBITCmyLAL9QXE+8Vkl4lE+CDxxCCB7ukenIKWUjlPpvNeMNOlWf0YmPZ+BncWE1SyKj+P9x8ZBy9zJFXPUfbCQEGbwqEwV956wI8mRFISiFOG9NU6HXYLGkD6xQy2MQmKbESvHQYeTLfxKZl9LDUGAh4ZVhGbRpZv8oS26QahzcpmBG4nUxgGxM2D437J1xHHnteU7ULhmIOTZsHx6WMa/BC4bvxNC+amFkucJCES/DoTvJmjcBnOdD0SLgGD4V2tVk969kYTwTSLMZ7IklVpoj+Y8/Wqs3qyWE41AuFndRzU55VFk2AtuhaKvD7JCTNFxZ9SU+8rMbnUKGoVAD49YquHPPcDXdpIz/wWHM23N0nof2xtJXJNm0qriIfZzyrHEh1kviRecPazE153McNJjt4tLnOc9n28jbujiw7bLVTlCoKTZYH1h12EMYii4dOPLdhzc4HDz7ZRS/wupKET3mf+RpLYlaVQ/GadWQj8/5/+wO4yRM6vdI5mQAAAABJRU5ErkJggg==</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </HTTPBody>
      <TcpPackets>
        <PacketInfo time="519706421" offset="0" length="317" />
        <PacketInfo time="519706421" offset="317" length="841" />
      </TcpPackets>
    </HTTPResponse>
  </HTTPTask>
</HTTPSnapshot>