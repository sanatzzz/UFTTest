<?xml version="1.0" encoding="utf-8"?>
<HTTPSnapshot xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" id="1">
  <HTTPTask id="1" hostname="dev.bluealgo.com" path="/smartformup/loadindex?opportunityId=0060o00001eSIJ0AAO&amp;customerid=cust1005&amp;accesstoken=RFpSQVUIgd4Y_oYNL81naExVLAYgKQt7" url="https://dev.bluealgo.com/smartformup/loadindex?opportunityId=0060o00001eSIJ0AAO&amp;customerid=cust1005&amp;accesstoken=RFpSQVUIgd4Y_oYNL81naExVLAYgKQt7" ip="144.126.253.3" port="443" client_ip="192.168.0.112" client_port="64262" connectionId="2220" origin="Primary" encodingType="ANSI" startDateTime="2024-02-16T16:37:19.713+05:30" startTime="2584" endTime="2785" blockedTime="-1" dnsTime="2" connectTime="66" sendTime="4294967295" waitTime="4294967295" receiveTime="14" sslNegotiateTime="38" responseBodySize="4047">
    <QueryString>
      <HTTPDataSet>
        <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
          <ActualData>b3Bwb3J0dW5pdHlJZD0wMDYwbzAwMDAxZVNJSjBBQU8mY3VzdG9tZXJpZD1jdXN0MTAwNSZhY2Nlc3N0b2tlbj1SRnBTUVZVSWdkNFlfb1lOTDgxbmFFeFZMQVlnS1F0Nw==</ActualData>
        </HTTPData>
      </HTTPDataSet>
      <IsExternalData>false</IsExternalData>
    </QueryString>
    <HTTPSplittedQueryStrings>
      <HTTPHeaderEntity name="opportunityId" index="0">
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>MDA2MG8wMDAwMWVTSUowQUFP</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </HTTPHeaderEntity>
      <HTTPHeaderEntity name="customerid" index="1">
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>Y3VzdDEwMDU=</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </HTTPHeaderEntity>
      <HTTPHeaderEntity name="accesstoken" index="2">
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>UkZwU1FWVUlnZDRZX29ZTkw4MW5hRXhWTEFZZ0tRdDc=</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </HTTPHeaderEntity>
    </HTTPSplittedQueryStrings>
    <HTTPRequest method="GET">
      <HTTPHeaders>
        <HTTPHeaderEntity name=":method" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>R0VU</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name=":scheme" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aHR0cHM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name=":path" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>L3NtYXJ0Zm9ybXVwL2xvYWRpbmRleD9vcHBvcnR1bml0eUlkPTAwNjBvMDAwMDFlU0lKMEFBTyZjdXN0b21lcmlkPWN1c3QxMDA1JmFjY2Vzc3Rva2VuPVJGcFNRVlVJZ2Q0WV9vWU5MODFuYUV4VkxBWWdLUXQ3</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name=":authority" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>ZGV2LmJsdWVhbGdvLmNvbQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Language" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>ZW4tVVMsZW47cT0wLjk=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="User-Agent" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEyMS4wLjAuMCBTYWZhcmkvNTM3LjM2</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Encoding" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ki8q</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Om1ldGhvZDogR0VUDQo6c2NoZW1lOiBodHRwcw0KOnBhdGg6IC9zbWFydGZvcm11cC9sb2FkaW5kZXg/b3Bwb3J0dW5pdHlJZD0wMDYwbzAwMDAxZVNJSjBBQU8mY3VzdG9tZXJpZD1jdXN0MTAwNSZhY2Nlc3N0b2tlbj1SRnBTUVZVSWdkNFlfb1lOTDgxbmFFeFZMQVlnS1F0Nw0KOmF1dGhvcml0eTogZGV2LmJsdWVhbGdvLmNvbQ0KQWNjZXB0LUxhbmd1YWdlOiBlbi1VUyxlbjtxPTAuOQ0KVXNlci1BZ2VudDogTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEyMS4wLjAuMCBTYWZhcmkvNTM3LjM2DQpBY2NlcHQtRW5jb2Rpbmc6IGd6aXAsIGRlZmxhdGUNCkFjY2VwdDogKi8qDQoNCg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
      <HTTPPropertySet>
        <HTTPProperty name="StreamID">1</HTTPProperty>
        <HTTPProperty name="TotalHeadersSize">218</HTTPProperty>
      </HTTPPropertySet>
    </HTTPRequest>
    <HTTPResponse>
      <contentLenght>4483</contentLenght>
      <HTTPHeaders>
        <HTTPHeaderEntity name="Status" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MjAw</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="date" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>RnJpLCAxNiBGZWIgMjAyNCAxMTowNzoxOSBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="content-type" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>dGV4dC9odG1sO2NoYXJzZXQ9SVNPLTg4NTktMQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="content-length" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>NDQ4Mw==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="access-control-allow-origin" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Kg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="set-cookie" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SlNFU1NJT05JRD1COEI5REUyNDA1ODE3RDYwMjlFQzM0QzA3NDlEQjJFRjsgUGF0aD0vc21hcnRmb3JtdXA7IEh0dHBPbmx5</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="strict-transport-security" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bWF4LWFnZT0xNTcyNDgwMDsgaW5jbHVkZVN1YkRvbWFpbnM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SFRUUC8yLjAgMjAwDQpTdGF0dXM6IDIwMA0KZGF0ZTogRnJpLCAxNiBGZWIgMjAyNCAxMTowNzoxOSBHTVQNCmNvbnRlbnQtdHlwZTogdGV4dC9odG1sO2NoYXJzZXQ9SVNPLTg4NTktMQ0KY29udGVudC1sZW5ndGg6IDQ0ODMNCmFjY2Vzcy1jb250cm9sLWFsbG93LW9yaWdpbjogKg0Kc2V0LWNvb2tpZTogSlNFU1NJT05JRD1COEI5REUyNDA1ODE3RDYwMjlFQzM0QzA3NDlEQjJFRjsgUGF0aD0vc21hcnRmb3JtdXA7IEh0dHBPbmx5DQpzdHJpY3QtdHJhbnNwb3J0LXNlY3VyaXR5OiBtYXgtYWdlPTE1NzI0ODAwOyBpbmNsdWRlU3ViRG9tYWlucw0KDQo=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
      <HTTPBody>
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>CgoKPCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImVuIj4KPGhlYWQ+CjxtZXRhIGNoYXJzZXQ9IlVURi04IiAvPgo8bWV0YSBodHRwLWVxdWl2PSJYLVVBLUNvbXBhdGlibGUiIGNvbnRlbnQ9IklFPWVkZ2UiIC8+CjxtZXRhIG5hbWU9InZpZXdwb3J0IiBjb250ZW50PSJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MS4wIiAvPgo8bGluayBocmVmPSJzdHlsZXMuY3NzIiByZWw9InN0eWxlc2hlZXQiIC8+Cgo8bGluayByZWw9InByZWNvbm5lY3QiIGhyZWY9Imh0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb20iIC8+CjxsaW5rIHJlbD0icHJlY29ubmVjdCIgaHJlZj0iaHR0cHM6Ly9mb250cy5nc3RhdGljLmNvbSIgY3Jvc3NvcmlnaW4gLz4KPGxpbmsKCWhyZWY9Imh0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb20vY3NzMj9mYW1pbHk9Um9ib3RvOndnaHRAMzAwOzQwMDs1MDA7NzAwJmRpc3BsYXk9c3dhcCIKCXJlbD0ic3R5bGVzaGVldCIgLz4KCjxsaW5rCglocmVmPSJodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2NzczI/ZmFtaWx5PUlCTStQbGV4K1NhbnM6aXRhbCx3Z2h0QDAsNDAwOzAsNjAwOzEsNDAwJmRpc3BsYXk9c3dhcCIKCXJlbD0ic3R5bGVzaGVldCIgLz4KCjwhLS0gIDxsaW5rIGhyZWY9Imh0dHBzOi8vdW5wa2cuY29tL0BicG1uLWlvL2Zvcm0tanMvZGlzdC9hc3NldHMvZm9ybS1qcy5jc3MiIHJlbD0ic3R5bGVzaGVldCI+ICAtLT4KPGxpbmsKCWhyZWY9Imh0dHBzOi8vdW5wa2cuY29tL0BicG1uLWlvL2Zvcm0tanMvZGlzdC9hc3NldHMvZmxhdHBpY2tyL2xpZ2h0LmNzcyIKCXJlbD0ic3R5bGVzaGVldCIgLz4KPGxpbmsgcmVsPSJzdHlsZXNoZWV0IgoJaHJlZj0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvZm9udC1hd2Vzb21lLzYuMy4wL2Nzcy9hbGwubWluLmNzcyIKCWludGVncml0eT0ic2hhNTEyLVN6bHJ4V1VscGZ1elErcGNVQ29zeGNnbFFSTkFxL0RaalZzQzBsRTQweHNBRHNmZVFvRXlwRStlbndjT2lHamsvYlN1R0dLSEV5alNvUTF6VmlzYW5RPT0iCgljcm9zc29yaWdpbj0iYW5vbnltb3VzIiByZWZlcnJlcnBvbGljeT0ibm8tcmVmZXJyZXIiIC8+Cjx0aXRsZT5Gb3JtPC90aXRsZT4KPC9oZWFkPgo8c3R5bGU+Ci5wb3B1cC1vdXRlci13cmFwcGVyIHsKCXBvc2l0aW9uOiBhYnNvbHV0ZTsKCXRvcDogMDsKCWxlZnQ6IDA7Cglib3R0b206IDA7CglyaWdodDogMDsKCWJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC4yKTsKfQoKLnBvcHVwLXdyYXBwZXIgewoJcG9zaXRpb246IGFic29sdXRlOwoJdG9wOiA1MCU7CglsZWZ0OiA1MCU7Cgl0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTsKCWZvbnQtZmFtaWx5OiBBcmlhbCwgSGVsdmV0aWNhLCBzYW5zLXNlcmlmOwoJbWF4LXdpZHRoOiA1MCU7CgltYXJnaW46IDIwcHggYXV0bzsKCXBhZGRpbmc6IDIwcHg7CgliYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTsKCS8qIGJhY2tncm91bmQtY29sb3I6IHJnYigyMzUsIDIzNSwgMjM1KTsgKi8KCS8qIGJveC1zaGFkb3c6IDJweCAycHggNXB4IHdoaXRlOyAqLwoJYm9yZGVyLXJhZGl1czogMTBweDsKfQoKLnBvcHVwLXdyYXBwZXItaW5uZXIgewoJZGlzcGxheTogZmxleDsKCWZsZXgtZGlyZWN0aW9uOiBjb2x1bW47Cn0KCi5wb3B1cC1oZWFkZXItdGVtcGxhdGUgewoJZGlzcGxheTogZmxleDsKCWZsZXgtZGlyZWN0aW9uOiByb3c7CglqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47CgltYXJnaW4tYm90dG9tOiAyMHB4Owp9CgoucG9wdXAtYm9keSB7CglkaXNwbGF5OiBmbGV4OwoJZmxleC1kaXJlY3Rpb246IHJvdzsKCWp1c3RpZnktY29udGVudDogY2VudGVyOwp9CgoucG9wdXAtYm9keS1jb250ZW50IHsKCWRpc3BsYXk6IGZsZXg7CglmbGV4LWRpcmVjdGlvbjogY29sdW1uOwoJcm93LWdhcDogMjBweDsKfQoKLnBvcHVwLW1haW4tc2VjdGlvbiB7CglkaXNwbGF5OiBmbGV4OwoJZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKCWFsaWduLWl0ZW1zOiBjZW50ZXI7Cglib3JkZXItdG9wOiA1cHggc29saWQgIzI1QUU4ODsKCWJvcmRlci1ib3R0b206IDFweCBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuMik7Cglib3JkZXItbGVmdDogMXB4IHNvbGlkIHJnYmEoMCwgMCwgMCwgMC4xKTsKCWJvcmRlci1yaWdodDogMXB4IHNvbGlkIHJnYmEoMCwgMCwgMCwgMC4xKTsKCWJhY2tncm91bmQtY29sb3I6IHdoaXRlOwoJcGFkZGluZzogNDBweCAzMHB4IDIwcHg7Cn0KCi5wb3B1cC1hY3Rpb24tYnRucy13cmFwcGVyIHsKCWRpc3BsYXk6IGZsZXg7CglqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKCWNvbHVtbi1nYXA6IDEwcHg7Cn0KCi5wb3B1cC1mb290ZXItdGVtcGxhdGUgewoJZGlzcGxheTogZmxleDsKCWp1c3RpZnktY29udGVudDogZmxleC1lbmQ7CglmbGV4LWRpcmVjdGlvbjogY29sdW1uOwoJcm93LWdhcDogMTBweDsKCWFsaWduLWl0ZW1zOiBmbGV4LWVuZDsKfQoKLmJyYWRzLXRleHQgewoJZm9udC1zaXplOiAwLjhlbTsKfQoKLnBvcHVwLWFjdGlvbi1idG5zIHsKCXBhZGRpbmc6IDEwcHggMjBweDsKCWJvcmRlci1yYWRpdXM6IDIwcHg7Cglib3JkZXI6IG5vbmU7Cgljb2xvcjogcmdiYSgwLCAwLCAwLCAwLjgpOwp9CgoucG9wdXAtYWN0aW9uLWJ0bnM6aG92ZXIgewoJb3BhY2l0eTogMC45OwoJY3Vyc29yOiBwb2ludGVyOwp9CgpidXR0b24uY2xvc2UtYnRuIHsKCWJhY2tncm91bmQtY29sb3I6ICNmYjRjOTU7Cn0KCmJ1dHRvbi5leHBsb3JlLWJ0biB7CgliYWNrZ3JvdW5kLWNvbG9yOiAjZmZiMTAwOwp9CgouZmEtYnJhbmRzIHsKCWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuOCk7CgltYXJnaW4tcmlnaHQ6IDVweDsKfQoKLmZhLWxpbmtlZGluIHsKCW1hcmdpbi1yaWdodDogMHB4Owp9CgoucG9wdXAtbWFpbi1zZWN0aW9uIGgzIHsKCW1hcmdpbi1ib3R0b206IDBweDsKCWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuOCk7Cglmb250LXdlaWdodDogNDAwOwp9CgoucG9wdXAtbWFpbi1zZWN0aW9uIHAgewoJZm9udC1zaXplOiAwLjhlbTsKfQoKLmhpZGVQb3B1cCB7CglkaXNwbGF5OiBub25lOwp9Cjwvc3R5bGU+Cjxib2R5IG9ubG9hZD0ib3BlblBvcHVwKCkiPgoKCTxkaXYgY2xhc3M9InBvcHVwLW91dGVyLXdyYXBwZXIgaGlkZVBvcHVwIiBpZD0icG9wdXAiPgoJCTxkaXYgY2xhc3M9InBvcHVwLXdyYXBwZXIiPgoJCQk8ZGl2IGNsYXNzPSJwb3B1cC13cmFwcGVyLWlubmVyIj4KCQkJCQoJCQkJPGRpdiBjbGFzcz0icG9wdXAtYm9keSI+CgkJCQkJPGRpdiBjbGFzcz0icG9wdXAtYm9keS1jb250ZW50Ij4KCQkJCQkJPGRpdiBjbGFzcz0icG9wdXAtbWFpbi1zZWN0aW9uIj4KCQkJCQkJCTxkaXYgY2xhc3M9InN1Y2Nlc3MtaWNvbi13cmFwcGVyIj4KCQkJCQkJCQk8aW1nIHdpZHRoPSI1MHB4IiBoZWlnaHQ9IjUwcHgiIHNyYz0idWkvZXJyb3Iuc3ZnIiBhbHQ9IiI+CgkJCQkJCQk8L2Rpdj4KCQkJCQkJCTxkaXY+CgkJCQkJCQkJPGgzPkVSUk9SITwvaDM+CgkJCQkJCQk8L2Rpdj4KCQkJCQkJCTxkaXY+CgkJCQkJCQkJCgkJCQkJCQkJPGgzPgoJCQkJCQkJCQlTb3JyeSBsaW5rIGV4cGlyZSEKCQkJCQkJCQk8L2gzPgoJCQkJCQkJPC9kaXY+CgkJCQkJCQk8ZGl2PgoJCQkJCQkJCTxwPgoJCQkJCQkJCQlQbGVhc2UgY29udGFjdCB0byBzeXN0ZW0gYWRtaW4hCgkJCQkJCQkJPC9wPgoJCQkJCQkJPC9kaXY+CgkJCQkJCTwvZGl2PgoJCQkJCQkKCQkJCQk8L2Rpdj4KCQkJCTwvZGl2PgoJCQkJCgkJCTwvZGl2PgoJCTwvZGl2PgoJPC9kaXY+CjwvYm9keT4KPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPgoJZnVuY3Rpb24gb3BlblBvcHVwKCkgewoJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwb3B1cCcpLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGVQb3B1cCcpOwoJfQoJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Nsb3NlQnRuJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHsKCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncG9wdXAnKS5jbGFzc0xpc3QuYWRkKCdoaWRlUG9wdXAnKTsKCX0pOwoKCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdleHBsb3JlQnRuJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHsKCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncG9wdXAnKS5jbGFzc0xpc3QuYWRkKCdoaWRlUG9wdXAnKTsKCX0pOwo8L3NjcmlwdD4KPHNjcmlwdAoJc3JjPSJodHRwczovL3VucGtnLmNvbS9AYnBtbi1pby9mb3JtLWpzQDAuMTAuMC9kaXN0L2Zvcm0tdmlld2VyLnVtZC5qcyI+PC9zY3JpcHQ+Cgo8c2NyaXB0CglzcmM9Imh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vc2lnbmF0dXJlX3BhZEA0LjAuMC9kaXN0L3NpZ25hdHVyZV9wYWQudW1kLm1pbi5qcyI+PC9zY3JpcHQ+CjxzY3JpcHQgc3JjPSJ1aS9sb2FkRm9ybS5qcyI+PC9zY3JpcHQ+CjxzY3JpcHQgc3JjPSJ1aS9zY3JpcHQuanMiPjwvc2NyaXB0Pgo8L2h0bWw+Cg==</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </HTTPBody>
      <HTTPPropertySet>
        <HTTPProperty name="StreamID">1</HTTPProperty>
        <HTTPProperty name="TotalHeadersSize">189</HTTPProperty>
      </HTTPPropertySet>
    </HTTPResponse>
    <HTTPTask id="2" hostname="dev.bluealgo.com" path="/smartformup/styles.css" url="https://dev.bluealgo.com/smartformup/styles.css" ip="144.126.253.3" port="443" client_ip="192.168.0.112" client_port="64262" connectionId="2220" origin="HTML" encodingType="ANSI" ordinal="1" startDateTime="2024-02-16T16:37:19.900+05:30" startTime="2770" endTime="2909" blockedTime="-1" dnsTime="-1" connectTime="-2" sendTime="4294967295" waitTime="4294967295" receiveTime="1" sslNegotiateTime="-1" responseBodySize="135">
      <HTTPRequest method="GET">
        <HTTPHeaders>
          <HTTPHeaderEntity name=":method" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0VU</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name=":scheme" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cHM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name=":path" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>L3NtYXJ0Zm9ybXVwL3N0eWxlcy5jc3M=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name=":authority" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZGV2LmJsdWVhbGdvLmNvbQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Referer" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cHM6Ly9kZXYuYmx1ZWFsZ28uY29tL3NtYXJ0Zm9ybXVwL2xvYWRpbmRleD9vcHBvcnR1bml0eUlkPTAwNjBvMDAwMDFlU0lKMEFBTyZjdXN0b21lcmlkPWN1c3QxMDA1JmFjY2Vzc3Rva2VuPVJGcFNRVlVJZ2Q0WV9vWU5MODFuYUV4VkxBWWdLUXQ3</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Language" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZW4tVVMsZW47cT0wLjk=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="User-Agent" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEyMS4wLjAuMCBTYWZhcmkvNTM3LjM2</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Encoding" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ki8q</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="cookie" index="9">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SlNFU1NJT05JRD1COEI5REUyNDA1ODE3RDYwMjlFQzM0QzA3NDlEQjJFRg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Om1ldGhvZDogR0VUDQo6c2NoZW1lOiBodHRwcw0KOnBhdGg6IC9zbWFydGZvcm11cC9zdHlsZXMuY3NzDQo6YXV0aG9yaXR5OiBkZXYuYmx1ZWFsZ28uY29tDQpSZWZlcmVyOiBodHRwczovL2Rldi5ibHVlYWxnby5jb20vc21hcnRmb3JtdXAvbG9hZGluZGV4P29wcG9ydHVuaXR5SWQ9MDA2MG8wMDAwMWVTSUowQUFPJmN1c3RvbWVyaWQ9Y3VzdDEwMDUmYWNjZXNzdG9rZW49UkZwU1FWVUlnZDRZX29ZTkw4MW5hRXhWTEFZZ0tRdDcNCkFjY2VwdC1MYW5ndWFnZTogZW4tVVMsZW47cT0wLjkNClVzZXItQWdlbnQ6IE1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS8xMjEuMC4wLjAgU2FmYXJpLzUzNy4zNg0KQWNjZXB0LUVuY29kaW5nOiBnemlwLCBkZWZsYXRlDQpBY2NlcHQ6ICovKg0KY29va2llOiBKU0VTU0lPTklEPUI4QjlERTI0MDU4MTdENjAyOUVDMzRDMDc0OURCMkVGDQoNCg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
          <HTTPCookies>
            <HTTPHeaderEntity name="JSESSIONID" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>QjhCOURFMjQwNTgxN0Q2MDI5RUMzNEMwNzQ5REIyRUY=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
          </HTTPCookies>
        </HTTPHeaders>
        <HTTPPropertySet>
          <HTTPProperty name="StreamID">3</HTTPProperty>
          <HTTPProperty name="TotalHeadersSize">175</HTTPProperty>
        </HTTPPropertySet>
      </HTTPRequest>
      <HTTPResponse>
        <contentLenght>1100</contentLenght>
        <HTTPHeaders>
          <HTTPHeaderEntity name="Status" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>NDA0</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="date" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>RnJpLCAxNiBGZWIgMjAyNCAxMTowNzoxOSBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="content-type" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>dGV4dC9odG1sO2NoYXJzZXQ9dXRmLTg=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="content-length" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MTEwMA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="access-control-allow-origin" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Kg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="content-language" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZW4=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="strict-transport-security" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bWF4LWFnZT0xNTcyNDgwMDsgaW5jbHVkZVN1YkRvbWFpbnM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SFRUUC8yLjAgNDA0DQpTdGF0dXM6IDQwNA0KZGF0ZTogRnJpLCAxNiBGZWIgMjAyNCAxMTowNzoxOSBHTVQNCmNvbnRlbnQtdHlwZTogdGV4dC9odG1sO2NoYXJzZXQ9dXRmLTgNCmNvbnRlbnQtbGVuZ3RoOiAxMTAwDQphY2Nlc3MtY29udHJvbC1hbGxvdy1vcmlnaW46ICoNCmNvbnRlbnQtbGFuZ3VhZ2U6IGVuDQpzdHJpY3QtdHJhbnNwb3J0LXNlY3VyaXR5OiBtYXgtYWdlPTE1NzI0ODAwOyBpbmNsdWRlU3ViRG9tYWlucw0KDQo=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPBody>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>PCFkb2N0eXBlIGh0bWw+PGh0bWwgbGFuZz0iZW4iPjxoZWFkPjx0aXRsZT5IVFRQIFN0YXR1cyA0MDQg4oCTIE5vdCBGb3VuZDwvdGl0bGU+PHN0eWxlIHR5cGU9InRleHQvY3NzIj5oMSB7Zm9udC1mYW1pbHk6VGFob21hLEFyaWFsLHNhbnMtc2VyaWY7Y29sb3I6d2hpdGU7YmFja2dyb3VuZC1jb2xvcjojNTI1RDc2O2ZvbnQtc2l6ZToyMnB4O30gaDIge2ZvbnQtZmFtaWx5OlRhaG9tYSxBcmlhbCxzYW5zLXNlcmlmO2NvbG9yOndoaXRlO2JhY2tncm91bmQtY29sb3I6IzUyNUQ3Njtmb250LXNpemU6MTZweDt9IGgzIHtmb250LWZhbWlseTpUYWhvbWEsQXJpYWwsc2Fucy1zZXJpZjtjb2xvcjp3aGl0ZTtiYWNrZ3JvdW5kLWNvbG9yOiM1MjVENzY7Zm9udC1zaXplOjE0cHg7fSBib2R5IHtmb250LWZhbWlseTpUYWhvbWEsQXJpYWwsc2Fucy1zZXJpZjtjb2xvcjpibGFjaztiYWNrZ3JvdW5kLWNvbG9yOndoaXRlO30gYiB7Zm9udC1mYW1pbHk6VGFob21hLEFyaWFsLHNhbnMtc2VyaWY7Y29sb3I6d2hpdGU7YmFja2dyb3VuZC1jb2xvcjojNTI1RDc2O30gcCB7Zm9udC1mYW1pbHk6VGFob21hLEFyaWFsLHNhbnMtc2VyaWY7YmFja2dyb3VuZDp3aGl0ZTtjb2xvcjpibGFjaztmb250LXNpemU6MTJweDt9IGEge2NvbG9yOmJsYWNrO30gYS5uYW1lIHtjb2xvcjpibGFjazt9IC5saW5lIHtoZWlnaHQ6MXB4O2JhY2tncm91bmQtY29sb3I6IzUyNUQ3Njtib3JkZXI6bm9uZTt9PC9zdHlsZT48L2hlYWQ+PGJvZHk+PGgxPkhUVFAgU3RhdHVzIDQwNCDigJMgTm90IEZvdW5kPC9oMT48aHIgY2xhc3M9ImxpbmUiIC8+PHA+PGI+VHlwZTwvYj4gU3RhdHVzIFJlcG9ydDwvcD48cD48Yj5NZXNzYWdlPC9iPiAmIzQ3O3NtYXJ0Zm9ybXVwJiM0NztzdHlsZXMuY3NzPC9wPjxwPjxiPkRlc2NyaXB0aW9uPC9iPiBUaGUgb3JpZ2luIHNlcnZlciBkaWQgbm90IGZpbmQgYSBjdXJyZW50IHJlcHJlc2VudGF0aW9uIGZvciB0aGUgdGFyZ2V0IHJlc291cmNlIG9yIGlzIG5vdCB3aWxsaW5nIHRvIGRpc2Nsb3NlIHRoYXQgb25lIGV4aXN0cy48L3A+PGhyIGNsYXNzPSJsaW5lIiAvPjxoMz5BcGFjaGUgVG9tY2F0LzguNS40NTwvaDM+PC9ib2R5PjwvaHRtbD4=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPBody>
        <HTTPPropertySet>
          <HTTPProperty name="StreamID">3</HTTPProperty>
          <HTTPProperty name="TotalHeadersSize">135</HTTPProperty>
        </HTTPPropertySet>
      </HTTPResponse>
    </HTTPTask>
    <HTTPTask id="3" hostname="fonts.googleapis.com" path="/css2?family=Roboto:wght@300;400;500;700&amp;display=swap" url="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&amp;display=swap" ip="142.250.192.42" port="443" client_ip="192.168.0.112" client_port="64264" connectionId="2400" origin="HTML" encodingType="ANSI" ordinal="2" startDateTime="2024-02-16T16:37:19.927+05:30" startTime="2799" endTime="3109" blockedTime="-1" dnsTime="33" connectTime="172" sendTime="4294967295" waitTime="4294967295" receiveTime="2" sslNegotiateTime="82" responseBodySize="828">
      <QueryString>
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>ZmFtaWx5PVJvYm90bzp3Z2h0QDMwMDs0MDA7NTAwOzcwMCZkaXNwbGF5PXN3YXA=</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </QueryString>
      <HTTPSplittedQueryStrings>
        <HTTPHeaderEntity name="family" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Um9ib3RvOndnaHRAMzAwOzQwMDs1MDA7NzAw</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="display" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>c3dhcA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
      </HTTPSplittedQueryStrings>
      <HTTPRequest method="GET">
        <HTTPHeaders>
          <HTTPHeaderEntity name=":method" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0VU</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name=":scheme" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cHM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name=":path" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>L2NzczI/ZmFtaWx5PVJvYm90bzp3Z2h0QDMwMDs0MDA7NTAwOzcwMCZkaXNwbGF5PXN3YXA=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name=":authority" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Zm9udHMuZ29vZ2xlYXBpcy5jb20=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Referer" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cHM6Ly9kZXYuYmx1ZWFsZ28uY29tL3NtYXJ0Zm9ybXVwL2xvYWRpbmRleD9vcHBvcnR1bml0eUlkPTAwNjBvMDAwMDFlU0lKMEFBTyZjdXN0b21lcmlkPWN1c3QxMDA1JmFjY2Vzc3Rva2VuPVJGcFNRVlVJZ2Q0WV9vWU5MODFuYUV4VkxBWWdLUXQ3</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Language" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZW4tVVMsZW47cT0wLjk=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="User-Agent" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEyMS4wLjAuMCBTYWZhcmkvNTM3LjM2</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Encoding" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ki8q</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Om1ldGhvZDogR0VUDQo6c2NoZW1lOiBodHRwcw0KOnBhdGg6IC9jc3MyP2ZhbWlseT1Sb2JvdG86d2dodEAzMDA7NDAwOzUwMDs3MDAmZGlzcGxheT1zd2FwDQo6YXV0aG9yaXR5OiBmb250cy5nb29nbGVhcGlzLmNvbQ0KUmVmZXJlcjogaHR0cHM6Ly9kZXYuYmx1ZWFsZ28uY29tL3NtYXJ0Zm9ybXVwL2xvYWRpbmRleD9vcHBvcnR1bml0eUlkPTAwNjBvMDAwMDFlU0lKMEFBTyZjdXN0b21lcmlkPWN1c3QxMDA1JmFjY2Vzc3Rva2VuPVJGcFNRVlVJZ2Q0WV9vWU5MODFuYUV4VkxBWWdLUXQ3DQpBY2NlcHQtTGFuZ3VhZ2U6IGVuLVVTLGVuO3E9MC45DQpVc2VyLUFnZW50OiBNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvMTIxLjAuMC4wIFNhZmFyaS81MzcuMzYNCkFjY2VwdC1FbmNvZGluZzogZ3ppcCwgZGVmbGF0ZQ0KQWNjZXB0OiAqLyoNCg0K</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPPropertySet>
          <HTTPProperty name="StreamID">3</HTTPProperty>
          <HTTPProperty name="TotalHeadersSize">55</HTTPProperty>
        </HTTPPropertySet>
      </HTTPRequest>
      <HTTPResponse>
        <contentLenght>0</contentLenght>
        <HTTPHeaders>
          <HTTPHeaderEntity name="Status" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MjAw</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="content-type" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>dGV4dC9jc3M7IGNoYXJzZXQ9dXRmLTg=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="access-control-allow-origin" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Kg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="timing-allow-origin" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Kg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="link" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>PGh0dHBzOi8vZm9udHMuZ3N0YXRpYy5jb20+OyByZWw9cHJlY29ubmVjdDsgY3Jvc3NvcmlnaW4=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="strict-transport-security" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bWF4LWFnZT0zMTUzNjAwMA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="expires" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>RnJpLCAxNiBGZWIgMjAyNCAxMTowNzoyMCBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="date" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>RnJpLCAxNiBGZWIgMjAyNCAxMTowNzoyMCBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="cache-control" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>cHJpdmF0ZSwgbWF4LWFnZT04NjQwMCwgc3RhbGUtd2hpbGUtcmV2YWxpZGF0ZT02MDQ4MDA=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="last-modified" index="9">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>RnJpLCAxNiBGZWIgMjAyNCAxMTowMjozMiBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="cross-origin-opener-policy" index="10">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>c2FtZS1vcmlnaW4tYWxsb3ctcG9wdXBz</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="cross-origin-resource-policy" index="11">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Y3Jvc3Mtb3JpZ2lu</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="content-encoding" index="12">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="server" index="13">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>RVNG</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="x-xss-protection" index="14">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="x-frame-options" index="15">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>U0FNRU9SSUdJTg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="x-content-type-options" index="16">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bm9zbmlmZg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="alt-svc" index="17">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aDM9Ijo0NDMiOyBtYT0yNTkyMDAwLGgzLTI5PSI6NDQzIjsgbWE9MjU5MjAwMA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SFRUUC8yLjAgMjAwDQpTdGF0dXM6IDIwMA0KY29udGVudC10eXBlOiB0ZXh0L2NzczsgY2hhcnNldD11dGYtOA0KYWNjZXNzLWNvbnRyb2wtYWxsb3ctb3JpZ2luOiAqDQp0aW1pbmctYWxsb3ctb3JpZ2luOiAqDQpsaW5rOiA8aHR0cHM6Ly9mb250cy5nc3RhdGljLmNvbT47IHJlbD1wcmVjb25uZWN0OyBjcm9zc29yaWdpbg0Kc3RyaWN0LXRyYW5zcG9ydC1zZWN1cml0eTogbWF4LWFnZT0zMTUzNjAwMA0KZXhwaXJlczogRnJpLCAxNiBGZWIgMjAyNCAxMTowNzoyMCBHTVQNCmRhdGU6IEZyaSwgMTYgRmViIDIwMjQgMTE6MDc6MjAgR01UDQpjYWNoZS1jb250cm9sOiBwcml2YXRlLCBtYXgtYWdlPTg2NDAwLCBzdGFsZS13aGlsZS1yZXZhbGlkYXRlPTYwNDgwMA0KbGFzdC1tb2RpZmllZDogRnJpLCAxNiBGZWIgMjAyNCAxMTowMjozMiBHTVQNCmNyb3NzLW9yaWdpbi1vcGVuZXItcG9saWN5OiBzYW1lLW9yaWdpbi1hbGxvdy1wb3B1cHMNCmNyb3NzLW9yaWdpbi1yZXNvdXJjZS1wb2xpY3k6IGNyb3NzLW9yaWdpbg0KY29udGVudC1lbmNvZGluZzogZ3ppcA0Kc2VydmVyOiBFU0YNCngteHNzLXByb3RlY3Rpb246IDANCngtZnJhbWUtb3B0aW9uczogU0FNRU9SSUdJTg0KeC1jb250ZW50LXR5cGUtb3B0aW9uczogbm9zbmlmZg0KYWx0LXN2YzogaDM9Ijo0NDMiOyBtYT0yNTkyMDAwLGgzLTI5PSI6NDQzIjsgbWE9MjU5MjAwMA0KDQo=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPBody>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>LyogY3lyaWxsaWMtZXh0ICovCkBmb250LWZhY2UgewogIGZvbnQtZmFtaWx5OiAnUm9ib3RvJzsKICBmb250LXN0eWxlOiBub3JtYWw7CiAgZm9udC13ZWlnaHQ6IDMwMDsKICBmb250LWRpc3BsYXk6IHN3YXA7CiAgc3JjOiB1cmwoaHR0cHM6Ly9mb250cy5nc3RhdGljLmNvbS9zL3JvYm90by92MzAvS0ZPbENucUV1OTJGcjFNbVNVNWZDUmM0RXNBLndvZmYyKSBmb3JtYXQoJ3dvZmYyJyk7CiAgdW5pY29kZS1yYW5nZTogVSswNDYwLTA1MkYsIFUrMUM4MC0xQzg4LCBVKzIwQjQsIFUrMkRFMC0yREZGLCBVK0E2NDAtQTY5RiwgVStGRTJFLUZFMkY7Cn0KLyogY3lyaWxsaWMgKi8KQGZvbnQtZmFjZSB7CiAgZm9udC1mYW1pbHk6ICdSb2JvdG8nOwogIGZvbnQtc3R5bGU6IG5vcm1hbDsKICBmb250LXdlaWdodDogMzAwOwogIGZvbnQtZGlzcGxheTogc3dhcDsKICBzcmM6IHVybChodHRwczovL2ZvbnRzLmdzdGF0aWMuY29tL3Mvcm9ib3RvL3YzMC9LRk9sQ25xRXU5MkZyMU1tU1U1ZkFCYzRFc0Eud29mZjIpIGZvcm1hdCgnd29mZjInKTsKICB1bmljb2RlLXJhbmdlOiBVKzAzMDEsIFUrMDQwMC0wNDVGLCBVKzA0OTAtMDQ5MSwgVSswNEIwLTA0QjEsIFUrMjExNjsKfQovKiBncmVlay1leHQgKi8KQGZvbnQtZmFjZSB7CiAgZm9udC1mYW1pbHk6ICdSb2JvdG8nOwogIGZvbnQtc3R5bGU6IG5vcm1hbDsKICBmb250LXdlaWdodDogMzAwOwogIGZvbnQtZGlzcGxheTogc3dhcDsKICBzcmM6IHVybChodHRwczovL2ZvbnRzLmdzdGF0aWMuY29tL3Mvcm9ib3RvL3YzMC9LRk9sQ25xRXU5MkZyMU1tU1U1ZkNCYzRFc0Eud29mZjIpIGZvcm1hdCgnd29mZjInKTsKICB1bmljb2RlLXJhbmdlOiBVKzFGMDAtMUZGRjsKfQovKiBncmVlayAqLwpAZm9udC1mYWNlIHsKICBmb250LWZhbWlseTogJ1JvYm90byc7CiAgZm9udC1zdHlsZTogbm9ybWFsOwogIGZvbnQtd2VpZ2h0OiAzMDA7CiAgZm9udC1kaXNwbGF5OiBzd2FwOwogIHNyYzogdXJsKGh0dHBzOi8vZm9udHMuZ3N0YXRpYy5jb20vcy9yb2JvdG8vdjMwL0tGT2xDbnFFdTkyRnIxTW1TVTVmQnhjNEVzQS53b2ZmMikgZm9ybWF0KCd3b2ZmMicpOwogIHVuaWNvZGUtcmFuZ2U6IFUrMDM3MC0wMzc3LCBVKzAzN0EtMDM3RiwgVSswMzg0LTAzOEEsIFUrMDM4QywgVSswMzhFLTAzQTEsIFUrMDNBMy0wM0ZGOwp9Ci8qIHZpZXRuYW1lc2UgKi8KQGZvbnQtZmFjZSB7CiAgZm9udC1mYW1pbHk6ICdSb2JvdG8nOwogIGZvbnQtc3R5bGU6IG5vcm1hbDsKICBmb250LXdlaWdodDogMzAwOwogIGZvbnQtZGlzcGxheTogc3dhcDsKICBzcmM6IHVybChodHRwczovL2ZvbnRzLmdzdGF0aWMuY29tL3Mvcm9ib3RvL3YzMC9LRk9sQ25xRXU5MkZyMU1tU1U1ZkN4YzRFc0Eud29mZjIpIGZvcm1hdCgnd29mZjInKTsKICB1bmljb2RlLXJhbmdlOiBVKzAxMDItMDEwMywgVSswMTEwLTAxMTEsIFUrMDEyOC0wMTI5LCBVKzAxNjgtMDE2OSwgVSswMUEwLTAxQTEsIFUrMDFBRi0wMUIwLCBVKzAzMDAtMDMwMSwgVSswMzAzLTAzMDQsIFUrMDMwOC0wMzA5LCBVKzAzMjMsIFUrMDMyOSwgVSsxRUEwLTFFRjksIFUrMjBBQjsKfQovKiBsYXRpbi1leHQgKi8KQGZvbnQtZmFjZSB7CiAgZm9udC1mYW1pbHk6ICdSb2JvdG8nOwogIGZvbnQtc3R5bGU6IG5vcm1hbDsKICBmb250LXdlaWdodDogMzAwOwogIGZvbnQtZGlzcGxheTogc3dhcDsKICBzcmM6IHVybChodHRwczovL2ZvbnRzLmdzdGF0aWMuY29tL3Mvcm9ib3RvL3YzMC9LRk9sQ25xRXU5MkZyMU1tU1U1ZkNoYzRFc0Eud29mZjIpIGZvcm1hdCgnd29mZjInKTsKICB1bmljb2RlLXJhbmdlOiBVKzAxMDAtMDJBRiwgVSswMzA0LCBVKzAzMDgsIFUrMDMyOSwgVSsxRTAwLTFFOUYsIFUrMUVGMi0xRUZGLCBVKzIwMjAsIFUrMjBBMC0yMEFCLCBVKzIwQUQtMjBDMCwgVSsyMTEzLCBVKzJDNjAtMkM3RiwgVStBNzIwLUE3RkY7Cn0KLyogbGF0aW4gKi8KQGZvbnQtZmFjZSB7CiAgZm9udC1mYW1pbHk6ICdSb2JvdG8nOwogIGZvbnQtc3R5bGU6IG5vcm1hbDsKICBmb250LXdlaWdodDogMzAwOwogIGZvbnQtZGlzcGxheTogc3dhcDsKICBzcmM6IHVybChodHRwczovL2ZvbnRzLmdzdGF0aWMuY29tL3Mvcm9ib3RvL3YzMC9LRk9sQ25xRXU5MkZyMU1tU1U1ZkJCYzQud29mZjIpIGZvcm1hdCgnd29mZjInKTsKICB1bmljb2RlLXJhbmdlOiBVKzAwMDAtMDBGRiwgVSswMTMxLCBVKzAxNTItMDE1MywgVSswMkJCLTAyQkMsIFUrMDJDNiwgVSswMkRBLCBVKzAyREMsIFUrMDMwNCwgVSswMzA4LCBVKzAzMjksIFUrMjAwMC0yMDZGLCBVKzIwNzQsIFUrMjBBQywgVSsyMTIyLCBVKzIxOTEsIFUrMjE5MywgVSsyMjEyLCBVKzIyMTUsIFUrRkVGRiwgVStGRkZEOwp9Ci8qIGN5cmlsbGljLWV4dCAqLwpAZm9udC1mYWNlIHsKICBmb250LWZhbWlseTogJ1JvYm90byc7CiAgZm9udC1zdHlsZTogbm9ybWFsOwogIGZvbnQtd2VpZ2h0OiA0MDA7CiAgZm9udC1kaXNwbGF5OiBzd2FwOwogIHNyYzogdXJsKGh0dHBzOi8vZm9udHMuZ3N0YXRpYy5jb20vcy9yb2JvdG8vdjMwL0tGT21DbnFFdTkyRnIxTXU3MnhLT3pZLndvZmYyKSBmb3JtYXQoJ3dvZmYyJyk7CiAgdW5pY29kZS1yYW5nZTogVSswNDYwLTA1MkYsIFUrMUM4MC0xQzg4LCBVKzIwQjQsIFUrMkRFMC0yREZGLCBVK0E2NDAtQTY5RiwgVStGRTJFLUZFMkY7Cn0KLyogY3lyaWxsaWMgKi8KQGZvbnQtZmFjZSB7CiAgZm9udC1mYW1pbHk6ICdSb2JvdG8nOwogIGZvbnQtc3R5bGU6IG5vcm1hbDsKICBmb250LXdlaWdodDogNDAwOwogIGZvbnQtZGlzcGxheTogc3dhcDsKICBzcmM6IHVybChodHRwczovL2ZvbnRzLmdzdGF0aWMuY29tL3Mvcm9ib3RvL3YzMC9LRk9tQ25xRXU5MkZyMU11NW14S096WS53b2ZmMikgZm9ybWF0KCd3b2ZmMicpOwogIHVuaWNvZGUtcmFuZ2U6IFUrMDMwMSwgVSswNDAwLTA0NUYsIFUrMDQ5MC0wNDkxLCBVKzA0QjAtMDRCMSwgVSsyMTE2Owp9Ci8qIGdyZWVrLWV4dCAqLwpAZm9udC1mYWNlIHsKICBmb250LWZhbWlseTogJ1JvYm90byc7CiAgZm9udC1zdHlsZTogbm9ybWFsOwogIGZvbnQtd2VpZ2h0OiA0MDA7CiAgZm9udC1kaXNwbGF5OiBzd2FwOwogIHNyYzogdXJsKGh0dHBzOi8vZm9udHMuZ3N0YXRpYy5jb20vcy9yb2JvdG8vdjMwL0tGT21DbnFFdTkyRnIxTXU3bXhLT3pZLndvZmYyKSBmb3JtYXQoJ3dvZmYyJyk7CiAgdW5pY29kZS1yYW5nZTogVSsxRjAwLTFGRkY7Cn0KLyogZ3JlZWsgKi8KQGZvbnQtZmFjZSB7CiAgZm9udC1mYW1pbHk6ICdSb2JvdG8nOwogIGZvbnQtc3R5bGU6IG5vcm1hbDsKICBmb250LXdlaWdodDogNDAwOwogIGZvbnQtZGlzcGxheTogc3dhcDsKICBzcmM6IHVybChodHRwczovL2ZvbnRzLmdzdGF0aWMuY29tL3Mvcm9ib3RvL3YzMC9LRk9tQ25xRXU5MkZyMU11NFd4S096WS53b2ZmMikgZm9ybWF0KCd3b2ZmMicpOwogIHVuaWNvZGUtcmFuZ2U6IFUrMDM3MC0wMzc3LCBVKzAzN0EtMDM3RiwgVSswMzg0LTAzOEEsIFUrMDM4QywgVSswMzhFLTAzQTEsIFUrMDNBMy0wM0ZGOwp9Ci8qIHZpZXRuYW1lc2UgKi8KQGZvbnQtZmFjZSB7CiAgZm9udC1mYW1pbHk6ICdSb2JvdG8nOwogIGZvbnQtc3R5bGU6IG5vcm1hbDsKICBmb250LXdlaWdodDogNDAwOwogIGZvbnQtZGlzcGxheTogc3dhcDsKICBzcmM6IHVybChodHRwczovL2ZvbnRzLmdzdGF0aWMuY29tL3Mvcm9ib3RvL3YzMC9LRk9tQ25xRXU5MkZyMU11N1d4S096WS53b2ZmMikgZm9ybWF0KCd3b2ZmMicpOwogIHVuaWNvZGUtcmFuZ2U6IFUrMDEwMi0wMTAzLCBVKzAxMTAtMDExMSwgVSswMTI4LTAxMjksIFUrMDE2OC0wMTY5LCBVKzAxQTAtMDFBMSwgVSswMUFGLTAxQjAsIFUrMDMwMC0wMzAxLCBVKzAzMDMtMDMwNCwgVSswMzA4LTAzMDksIFUrMDMyMywgVSswMzI5LCBVKzFFQTAtMUVGOSwgVSsyMEFCOwp9Ci8qIGxhdGluLWV4dCAqLwpAZm9udC1mYWNlIHsKICBmb250LWZhbWlseTogJ1JvYm90byc7CiAgZm9udC1zdHlsZTogbm9ybWFsOwogIGZvbnQtd2VpZ2h0OiA0MDA7CiAgZm9udC1kaXNwbGF5OiBzd2FwOwogIHNyYzogdXJsKGh0dHBzOi8vZm9udHMuZ3N0YXRpYy5jb20vcy9yb2JvdG8vdjMwL0tGT21DbnFFdTkyRnIxTXU3R3hLT3pZLndvZmYyKSBmb3JtYXQoJ3dvZmYyJyk7CiAgdW5pY29kZS1yYW5nZTogVSswMTAwLTAyQUYsIFUrMDMwNCwgVSswMzA4LCBVKzAzMjksIFUrMUUwMC0xRTlGLCBVKzFFRjItMUVGRiwgVSsyMDIwLCBVKzIwQTAtMjBBQiwgVSsyMEFELTIwQzAsIFUrMjExMywgVSsyQzYwLTJDN0YsIFUrQTcyMC1BN0ZGOwp9Ci8qIGxhdGluICovCkBmb250LWZhY2UgewogIGZvbnQtZmFtaWx5OiAnUm9ib3RvJzsKICBmb250LXN0eWxlOiBub3JtYWw7CiAgZm9udC13ZWlnaHQ6IDQwMDsKICBmb250LWRpc3BsYXk6IHN3YXA7CiAgc3JjOiB1cmwoaHR0cHM6Ly9mb250cy5nc3RhdGljLmNvbS9zL3JvYm90by92MzAvS0ZPbUNucUV1OTJGcjFNdTRteEsud29mZjIpIGZvcm1hdCgnd29mZjInKTsKICB1bmljb2RlLXJhbmdlOiBVKzAwMDAtMDBGRiwgVSswMTMxLCBVKzAxNTItMDE1MywgVSswMkJCLTAyQkMsIFUrMDJDNiwgVSswMkRBLCBVKzAyREMsIFUrMDMwNCwgVSswMzA4LCBVKzAzMjksIFUrMjAwMC0yMDZGLCBVKzIwNzQsIFUrMjBBQywgVSsyMTIyLCBVKzIxOTEsIFUrMjE5MywgVSsyMjEyLCBVKzIyMTUsIFUrRkVGRiwgVStGRkZEOwp9Ci8qIGN5cmlsbGljLWV4dCAqLwpAZm9udC1mYWNlIHsKICBmb250LWZhbWlseTogJ1JvYm90byc7CiAgZm9udC1zdHlsZTogbm9ybWFsOwogIGZvbnQtd2VpZ2h0OiA1MDA7CiAgZm9udC1kaXNwbGF5OiBzd2FwOwogIHNyYzogdXJsKGh0dHBzOi8vZm9udHMuZ3N0YXRpYy5jb20vcy9yb2JvdG8vdjMwL0tGT2xDbnFFdTkyRnIxTW1FVTlmQ1JjNEVzQS53b2ZmMikgZm9ybWF0KCd3b2ZmMicpOwogIHVuaWNvZGUtcmFuZ2U6IFUrMDQ2MC0wNTJGLCBVKzFDODAtMUM4OCwgVSsyMEI0LCBVKzJERTAtMkRGRiwgVStBNjQwLUE2OUYsIFUrRkUyRS1GRTJGOwp9Ci8qIGN5cmlsbGljICovCkBmb250LWZhY2UgewogIGZvbnQtZmFtaWx5OiAnUm9ib3RvJzsKICBmb250LXN0eWxlOiBub3JtYWw7CiAgZm9udC13ZWlnaHQ6IDUwMDsKICBmb250LWRpc3BsYXk6IHN3YXA7CiAgc3JjOiB1cmwoaHR0cHM6Ly9mb250cy5nc3RhdGljLmNvbS9zL3JvYm90by92MzAvS0ZPbENucUV1OTJGcjFNbUVVOWZBQmM0RXNBLndvZmYyKSBmb3JtYXQoJ3dvZmYyJyk7CiAgdW5pY29kZS1yYW5nZTogVSswMzAxLCBVKzA0MDAtMDQ1RiwgVSswNDkwLTA0OTEsIFUrMDRCMC0wNEIxLCBVKzIxMTY7Cn0KLyogZ3JlZWstZXh0ICovCkBmb250LWZhY2UgewogIGZvbnQtZmFtaWx5OiAnUm9ib3RvJzsKICBmb250LXN0eWxlOiBub3JtYWw7CiAgZm9udC13ZWlnaHQ6IDUwMDsKICBmb250LWRpc3BsYXk6IHN3YXA7CiAgc3JjOiB1cmwoaHR0cHM6Ly9mb250cy5nc3RhdGljLmNvbS9zL3JvYm90by92MzAvS0ZPbENucUV1OTJGcjFNbUVVOWZDQmM0RXNBLndvZmYyKSBmb3JtYXQoJ3dvZmYyJyk7CiAgdW5pY29kZS1yYW5nZTogVSsxRjAwLTFGRkY7Cn0KLyogZ3JlZWsgKi8KQGZvbnQtZmFjZSB7CiAgZm9udC1mYW1pbHk6ICdSb2JvdG8nOwogIGZvbnQtc3R5bGU6IG5vcm1hbDsKICBmb250LXdlaWdodDogNTAwOwogIGZvbnQtZGlzcGxheTogc3dhcDsKICBzcmM6IHVybChodHRwczovL2ZvbnRzLmdzdGF0aWMuY29tL3Mvcm9ib3RvL3YzMC9LRk9sQ25xRXU5MkZyMU1tRVU5ZkJ4YzRFc0Eud29mZjIpIGZvcm1hdCgnd29mZjInKTsKICB1bmljb2RlLXJhbmdlOiBVKzAzNzAtMDM3NywgVSswMzdBLTAzN0YsIFUrMDM4NC0wMzhBLCBVKzAzOEMsIFUrMDM4RS0wM0ExLCBVKzAzQTMtMDNGRjsKfQovKiB2aWV0bmFtZXNlICovCkBmb250LWZhY2UgewogIGZvbnQtZmFtaWx5OiAnUm9ib3RvJzsKICBmb250LXN0eWxlOiBub3JtYWw7CiAgZm9udC13ZWlnaHQ6IDUwMDsKICBmb250LWRpc3BsYXk6IHN3YXA7CiAgc3JjOiB1cmwoaHR0cHM6Ly9mb250cy5nc3RhdGljLmNvbS9zL3JvYm90by92MzAvS0ZPbENucUV1OTJGcjFNbUVVOWZDeGM0RXNBLndvZmYyKSBmb3JtYXQoJ3dvZmYyJyk7CiAgdW5pY29kZS1yYW5nZTogVSswMTAyLTAxMDMsIFUrMDExMC0wMTExLCBVKzAxMjgtMDEyOSwgVSswMTY4LTAxNjksIFUrMDFBMC0wMUExLCBVKzAxQUYtMDFCMCwgVSswMzAwLTAzMDEsIFUrMDMwMy0wMzA0LCBVKzAzMDgtMDMwOSwgVSswMzIzLCBVKzAzMjksIFUrMUVBMC0xRUY5LCBVKzIwQUI7Cn0KLyogbGF0aW4tZXh0ICovCkBmb250LWZhY2UgewogIGZvbnQtZmFtaWx5OiAnUm9ib3RvJzsKICBmb250LXN0eWxlOiBub3JtYWw7CiAgZm9udC13ZWlnaHQ6IDUwMDsKICBmb250LWRpc3BsYXk6IHN3YXA7CiAgc3JjOiB1cmwoaHR0cHM6Ly9mb250cy5nc3RhdGljLmNvbS9zL3JvYm90by92MzAvS0ZPbENucUV1OTJGcjFNbUVVOWZDaGM0RXNBLndvZmYyKSBmb3JtYXQoJ3dvZmYyJyk7CiAgdW5pY29kZS1yYW5nZTogVSswMTAwLTAyQUYsIFUrMDMwNCwgVSswMzA4LCBVKzAzMjksIFUrMUUwMC0xRTlGLCBVKzFFRjItMUVGRiwgVSsyMDIwLCBVKzIwQTAtMjBBQiwgVSsyMEFELTIwQzAsIFUrMjExMywgVSsyQzYwLTJDN0YsIFUrQTcyMC1BN0ZGOwp9Ci8qIGxhdGluICovCkBmb250LWZhY2UgewogIGZvbnQtZmFtaWx5OiAnUm9ib3RvJzsKICBmb250LXN0eWxlOiBub3JtYWw7CiAgZm9udC13ZWlnaHQ6IDUwMDsKICBmb250LWRpc3BsYXk6IHN3YXA7CiAgc3JjOiB1cmwoaHR0cHM6Ly9mb250cy5nc3RhdGljLmNvbS9zL3JvYm90by92MzAvS0ZPbENucUV1OTJGcjFNbUVVOWZCQmM0LndvZmYyKSBmb3JtYXQoJ3dvZmYyJyk7CiAgdW5pY29kZS1yYW5nZTogVSswMDAwLTAwRkYsIFUrMDEzMSwgVSswMTUyLTAxNTMsIFUrMDJCQi0wMkJDLCBVKzAyQzYsIFUrMDJEQSwgVSswMkRDLCBVKzAzMDQsIFUrMDMwOCwgVSswMzI5LCBVKzIwMDAtMjA2RiwgVSsyMDc0LCBVKzIwQUMsIFUrMjEyMiwgVSsyMTkxLCBVKzIxOTMsIFUrMjIxMiwgVSsyMjE1LCBVK0ZFRkYsIFUrRkZGRDsKfQovKiBjeXJpbGxpYy1leHQgKi8KQGZvbnQtZmFjZSB7CiAgZm9udC1mYW1pbHk6ICdSb2JvdG8nOwogIGZvbnQtc3R5bGU6IG5vcm1hbDsKICBmb250LXdlaWdodDogNzAwOwogIGZvbnQtZGlzcGxheTogc3dhcDsKICBzcmM6IHVybChodHRwczovL2ZvbnRzLmdzdGF0aWMuY29tL3Mvcm9ib3RvL3YzMC9LRk9sQ25xRXU5MkZyMU1tV1VsZkNSYzRFc0Eud29mZjIpIGZvcm1hdCgnd29mZjInKTsKICB1bmljb2RlLXJhbmdlOiBVKzA0NjAtMDUyRiwgVSsxQzgwLTFDODgsIFUrMjBCNCwgVSsyREUwLTJERkYsIFUrQTY0MC1BNjlGLCBVK0ZFMkUtRkUyRjsKfQovKiBjeXJpbGxpYyAqLwpAZm9udC1mYWNlIHsKICBmb250LWZhbWlseTogJ1JvYm90byc7CiAgZm9udC1zdHlsZTogbm9ybWFsOwogIGZvbnQtd2VpZ2h0OiA3MDA7CiAgZm9udC1kaXNwbGF5OiBzd2FwOwogIHNyYzogdXJsKGh0dHBzOi8vZm9udHMuZ3N0YXRpYy5jb20vcy9yb2JvdG8vdjMwL0tGT2xDbnFFdTkyRnIxTW1XVWxmQUJjNEVzQS53b2ZmMikgZm9ybWF0KCd3b2ZmMicpOwogIHVuaWNvZGUtcmFuZ2U6IFUrMDMwMSwgVSswNDAwLTA0NUYsIFUrMDQ5MC0wNDkxLCBVKzA0QjAtMDRCMSwgVSsyMTE2Owp9Ci8qIGdyZWVrLWV4dCAqLwpAZm9udC1mYWNlIHsKICBmb250LWZhbWlseTogJ1JvYm90byc7CiAgZm9udC1zdHlsZTogbm9ybWFsOwogIGZvbnQtd2VpZ2h0OiA3MDA7CiAgZm9udC1kaXNwbGF5OiBzd2FwOwogIHNyYzogdXJsKGh0dHBzOi8vZm9udHMuZ3N0YXRpYy5jb20vcy9yb2JvdG8vdjMwL0tGT2xDbnFFdTkyRnIxTW1XVWxmQ0JjNEVzQS53b2ZmMikgZm9ybWF0KCd3b2ZmMicpOwogIHVuaWNvZGUtcmFuZ2U6IFUrMUYwMC0xRkZGOwp9Ci8qIGdyZWVrICovCkBmb250LWZhY2UgewogIGZvbnQtZmFtaWx5OiAnUm9ib3RvJzsKICBmb250LXN0eWxlOiBub3JtYWw7CiAgZm9udC13ZWlnaHQ6IDcwMDsKICBmb250LWRpc3BsYXk6IHN3YXA7CiAgc3JjOiB1cmwoaHR0cHM6Ly9mb250cy5nc3RhdGljLmNvbS9zL3JvYm90by92MzAvS0ZPbENucUV1OTJGcjFNbVdVbGZCeGM0RXNBLndvZmYyKSBmb3JtYXQoJ3dvZmYyJyk7CiAgdW5pY29kZS1yYW5nZTogVSswMzcwLTAzNzcsIFUrMDM3QS0wMzdGLCBVKzAzODQtMDM4QSwgVSswMzhDLCBVKzAzOEUtMDNBMSwgVSswM0EzLTAzRkY7Cn0KLyogdmlldG5hbWVzZSAqLwpAZm9udC1mYWNlIHsKICBmb250LWZhbWlseTogJ1JvYm90byc7CiAgZm9udC1zdHlsZTogbm9ybWFsOwogIGZvbnQtd2VpZ2h0OiA3MDA7CiAgZm9udC1kaXNwbGF5OiBzd2FwOwogIHNyYzogdXJsKGh0dHBzOi8vZm9udHMuZ3N0YXRpYy5jb20vcy9yb2JvdG8vdjMwL0tGT2xDbnFFdTkyRnIxTW1XVWxmQ3hjNEVzQS53b2ZmMikgZm9ybWF0KCd3b2ZmMicpOwogIHVuaWNvZGUtcmFuZ2U6IFUrMDEwMi0wMTAzLCBVKzAxMTAtMDExMSwgVSswMTI4LTAxMjksIFUrMDE2OC0wMTY5LCBVKzAxQTAtMDFBMSwgVSswMUFGLTAxQjAsIFUrMDMwMC0wMzAxLCBVKzAzMDMtMDMwNCwgVSswMzA4LTAzMDksIFUrMDMyMywgVSswMzI5LCBVKzFFQTAtMUVGOSwgVSsyMEFCOwp9Ci8qIGxhdGluLWV4dCAqLwpAZm9udC1mYWNlIHsKICBmb250LWZhbWlseTogJ1JvYm90byc7CiAgZm9udC1zdHlsZTogbm9ybWFsOwogIGZvbnQtd2VpZ2h0OiA3MDA7CiAgZm9udC1kaXNwbGF5OiBzd2FwOwogIHNyYzogdXJsKGh0dHBzOi8vZm9udHMuZ3N0YXRpYy5jb20vcy9yb2JvdG8vdjMwL0tGT2xDbnFFdTkyRnIxTW1XVWxmQ2hjNEVzQS53b2ZmMikgZm9ybWF0KCd3b2ZmMicpOwogIHVuaWNvZGUtcmFuZ2U6IFUrMDEwMC0wMkFGLCBVKzAzMDQsIFUrMDMwOCwgVSswMzI5LCBVKzFFMDAtMUU5RiwgVSsxRUYyLTFFRkYsIFUrMjAyMCwgVSsyMEEwLTIwQUIsIFUrMjBBRC0yMEMwLCBVKzIxMTMsIFUrMkM2MC0yQzdGLCBVK0E3MjAtQTdGRjsKfQovKiBsYXRpbiAqLwpAZm9udC1mYWNlIHsKICBmb250LWZhbWlseTogJ1JvYm90byc7CiAgZm9udC1zdHlsZTogbm9ybWFsOwogIGZvbnQtd2VpZ2h0OiA3MDA7CiAgZm9udC1kaXNwbGF5OiBzd2FwOwogIHNyYzogdXJsKGh0dHBzOi8vZm9udHMuZ3N0YXRpYy5jb20vcy9yb2JvdG8vdjMwL0tGT2xDbnFFdTkyRnIxTW1XVWxmQkJjNC53b2ZmMikgZm9ybWF0KCd3b2ZmMicpOwogIHVuaWNvZGUtcmFuZ2U6IFUrMDAwMC0wMEZGLCBVKzAxMzEsIFUrMDE1Mi0wMTUzLCBVKzAyQkItMDJCQywgVSswMkM2LCBVKzAyREEsIFUrMDJEQywgVSswMzA0LCBVKzAzMDgsIFUrMDMyOSwgVSsyMDAwLTIwNkYsIFUrMjA3NCwgVSsyMEFDLCBVKzIxMjIsIFUrMjE5MSwgVSsyMTkzLCBVKzIyMTIsIFUrMjIxNSwgVStGRUZGLCBVK0ZGRkQ7Cn0K</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPBody>
        <HTTPPropertySet>
          <HTTPProperty name="StreamID">3</HTTPProperty>
          <HTTPProperty name="TotalHeadersSize">65</HTTPProperty>
        </HTTPPropertySet>
      </HTTPResponse>
    </HTTPTask>
    <HTTPTask id="4" hostname="fonts.googleapis.com" path="/css2?family=IBM+Plex+Sans:ital,wght@0,400;0,600;1,400&amp;display=swap" url="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:ital,wght@0,400;0,600;1,400&amp;display=swap" ip="142.250.192.42" port="443" client_ip="192.168.0.112" client_port="64264" connectionId="2400" origin="HTML" encodingType="ANSI" ordinal="3" startDateTime="2024-02-16T16:37:19.962+05:30" startTime="2833" endTime="3104" blockedTime="-1" dnsTime="1" connectTime="164" sendTime="4294967295" waitTime="4294967295" receiveTime="3" sslNegotiateTime="73" responseBodySize="1134">
      <QueryString>
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>ZmFtaWx5PUlCTStQbGV4K1NhbnM6aXRhbCx3Z2h0QDAsNDAwOzAsNjAwOzEsNDAwJmRpc3BsYXk9c3dhcA==</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </QueryString>
      <HTTPSplittedQueryStrings>
        <HTTPHeaderEntity name="family" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SUJNK1BsZXgrU2FuczppdGFsLHdnaHRAMCw0MDA7MCw2MDA7MSw0MDA=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="display" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>c3dhcA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
      </HTTPSplittedQueryStrings>
      <HTTPRequest method="GET">
        <HTTPHeaders>
          <HTTPHeaderEntity name=":method" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0VU</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name=":scheme" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cHM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name=":path" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>L2NzczI/ZmFtaWx5PUlCTStQbGV4K1NhbnM6aXRhbCx3Z2h0QDAsNDAwOzAsNjAwOzEsNDAwJmRpc3BsYXk9c3dhcA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name=":authority" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Zm9udHMuZ29vZ2xlYXBpcy5jb20=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Referer" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cHM6Ly9kZXYuYmx1ZWFsZ28uY29tL3NtYXJ0Zm9ybXVwL2xvYWRpbmRleD9vcHBvcnR1bml0eUlkPTAwNjBvMDAwMDFlU0lKMEFBTyZjdXN0b21lcmlkPWN1c3QxMDA1JmFjY2Vzc3Rva2VuPVJGcFNRVlVJZ2Q0WV9vWU5MODFuYUV4VkxBWWdLUXQ3</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Language" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZW4tVVMsZW47cT0wLjk=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="User-Agent" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEyMS4wLjAuMCBTYWZhcmkvNTM3LjM2</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Encoding" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ki8q</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Om1ldGhvZDogR0VUDQo6c2NoZW1lOiBodHRwcw0KOnBhdGg6IC9jc3MyP2ZhbWlseT1JQk0rUGxleCtTYW5zOml0YWwsd2dodEAwLDQwMDswLDYwMDsxLDQwMCZkaXNwbGF5PXN3YXANCjphdXRob3JpdHk6IGZvbnRzLmdvb2dsZWFwaXMuY29tDQpSZWZlcmVyOiBodHRwczovL2Rldi5ibHVlYWxnby5jb20vc21hcnRmb3JtdXAvbG9hZGluZGV4P29wcG9ydHVuaXR5SWQ9MDA2MG8wMDAwMWVTSUowQUFPJmN1c3RvbWVyaWQ9Y3VzdDEwMDUmYWNjZXNzdG9rZW49UkZwU1FWVUlnZDRZX29ZTkw4MW5hRXhWTEFZZ0tRdDcNCkFjY2VwdC1MYW5ndWFnZTogZW4tVVMsZW47cT0wLjkNClVzZXItQWdlbnQ6IE1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS8xMjEuMC4wLjAgU2FmYXJpLzUzNy4zNg0KQWNjZXB0LUVuY29kaW5nOiBnemlwLCBkZWZsYXRlDQpBY2NlcHQ6ICovKg0KDQo=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPPropertySet>
          <HTTPProperty name="StreamID">1</HTTPProperty>
          <HTTPProperty name="TotalHeadersSize">292</HTTPProperty>
        </HTTPPropertySet>
      </HTTPRequest>
      <HTTPResponse>
        <contentLenght>0</contentLenght>
        <HTTPHeaders>
          <HTTPHeaderEntity name="Status" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MjAw</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="content-type" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>dGV4dC9jc3M7IGNoYXJzZXQ9dXRmLTg=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="access-control-allow-origin" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Kg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="timing-allow-origin" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Kg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="link" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>PGh0dHBzOi8vZm9udHMuZ3N0YXRpYy5jb20+OyByZWw9cHJlY29ubmVjdDsgY3Jvc3NvcmlnaW4=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="strict-transport-security" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bWF4LWFnZT0zMTUzNjAwMA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="expires" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>RnJpLCAxNiBGZWIgMjAyNCAxMTowNzoyMCBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="date" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>RnJpLCAxNiBGZWIgMjAyNCAxMTowNzoyMCBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="cache-control" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>cHJpdmF0ZSwgbWF4LWFnZT04NjQwMCwgc3RhbGUtd2hpbGUtcmV2YWxpZGF0ZT02MDQ4MDA=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="last-modified" index="9">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>RnJpLCAxNiBGZWIgMjAyNCAxMTowNzoyMCBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="cross-origin-resource-policy" index="10">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Y3Jvc3Mtb3JpZ2lu</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="cross-origin-opener-policy" index="11">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>c2FtZS1vcmlnaW4tYWxsb3ctcG9wdXBz</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="content-encoding" index="12">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="server" index="13">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>RVNG</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="x-xss-protection" index="14">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="x-frame-options" index="15">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>U0FNRU9SSUdJTg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="x-content-type-options" index="16">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bm9zbmlmZg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="alt-svc" index="17">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aDM9Ijo0NDMiOyBtYT0yNTkyMDAwLGgzLTI5PSI6NDQzIjsgbWE9MjU5MjAwMA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SFRUUC8yLjAgMjAwDQpTdGF0dXM6IDIwMA0KY29udGVudC10eXBlOiB0ZXh0L2NzczsgY2hhcnNldD11dGYtOA0KYWNjZXNzLWNvbnRyb2wtYWxsb3ctb3JpZ2luOiAqDQp0aW1pbmctYWxsb3ctb3JpZ2luOiAqDQpsaW5rOiA8aHR0cHM6Ly9mb250cy5nc3RhdGljLmNvbT47IHJlbD1wcmVjb25uZWN0OyBjcm9zc29yaWdpbg0Kc3RyaWN0LXRyYW5zcG9ydC1zZWN1cml0eTogbWF4LWFnZT0zMTUzNjAwMA0KZXhwaXJlczogRnJpLCAxNiBGZWIgMjAyNCAxMTowNzoyMCBHTVQNCmRhdGU6IEZyaSwgMTYgRmViIDIwMjQgMTE6MDc6MjAgR01UDQpjYWNoZS1jb250cm9sOiBwcml2YXRlLCBtYXgtYWdlPTg2NDAwLCBzdGFsZS13aGlsZS1yZXZhbGlkYXRlPTYwNDgwMA0KbGFzdC1tb2RpZmllZDogRnJpLCAxNiBGZWIgMjAyNCAxMTowNzoyMCBHTVQNCmNyb3NzLW9yaWdpbi1yZXNvdXJjZS1wb2xpY3k6IGNyb3NzLW9yaWdpbg0KY3Jvc3Mtb3JpZ2luLW9wZW5lci1wb2xpY3k6IHNhbWUtb3JpZ2luLWFsbG93LXBvcHVwcw0KY29udGVudC1lbmNvZGluZzogZ3ppcA0Kc2VydmVyOiBFU0YNCngteHNzLXByb3RlY3Rpb246IDANCngtZnJhbWUtb3B0aW9uczogU0FNRU9SSUdJTg0KeC1jb250ZW50LXR5cGUtb3B0aW9uczogbm9zbmlmZg0KYWx0LXN2YzogaDM9Ijo0NDMiOyBtYT0yNTkyMDAwLGgzLTI5PSI6NDQzIjsgbWE9MjU5MjAwMA0KDQo=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPBody>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>LyogY3lyaWxsaWMtZXh0ICovCkBmb250LWZhY2UgewogIGZvbnQtZmFtaWx5OiAnSUJNIFBsZXggU2Fucyc7CiAgZm9udC1zdHlsZTogaXRhbGljOwogIGZvbnQtd2VpZ2h0OiA0MDA7CiAgZm9udC1kaXNwbGF5OiBzd2FwOwogIHNyYzogdXJsKGh0dHBzOi8vZm9udHMuZ3N0YXRpYy5jb20vcy9pYm1wbGV4c2Fucy92MTkvellYLUtWRWxNWVlhSmU4YnBMSG5Dd0RLaGRUdUdxWkpTZFkud29mZjIpIGZvcm1hdCgnd29mZjInKTsKICB1bmljb2RlLXJhbmdlOiBVKzA0NjAtMDUyRiwgVSsxQzgwLTFDODgsIFUrMjBCNCwgVSsyREUwLTJERkYsIFUrQTY0MC1BNjlGLCBVK0ZFMkUtRkUyRjsKfQovKiBjeXJpbGxpYyAqLwpAZm9udC1mYWNlIHsKICBmb250LWZhbWlseTogJ0lCTSBQbGV4IFNhbnMnOwogIGZvbnQtc3R5bGU6IGl0YWxpYzsKICBmb250LXdlaWdodDogNDAwOwogIGZvbnQtZGlzcGxheTogc3dhcDsKICBzcmM6IHVybChodHRwczovL2ZvbnRzLmdzdGF0aWMuY29tL3MvaWJtcGxleHNhbnMvdjE5L3pZWC1LVkVsTVlZYUplOGJwTEhuQ3dES2hkVHVFNlpKU2RZLndvZmYyKSBmb3JtYXQoJ3dvZmYyJyk7CiAgdW5pY29kZS1yYW5nZTogVSswMzAxLCBVKzA0MDAtMDQ1RiwgVSswNDkwLTA0OTEsIFUrMDRCMC0wNEIxLCBVKzIxMTY7Cn0KLyogZ3JlZWsgKi8KQGZvbnQtZmFjZSB7CiAgZm9udC1mYW1pbHk6ICdJQk0gUGxleCBTYW5zJzsKICBmb250LXN0eWxlOiBpdGFsaWM7CiAgZm9udC13ZWlnaHQ6IDQwMDsKICBmb250LWRpc3BsYXk6IHN3YXA7CiAgc3JjOiB1cmwoaHR0cHM6Ly9mb250cy5nc3RhdGljLmNvbS9zL2libXBsZXhzYW5zL3YxOS96WVgtS1ZFbE1ZWWFKZThicExIbkN3REtoZFR1RktaSlNkWS53b2ZmMikgZm9ybWF0KCd3b2ZmMicpOwogIHVuaWNvZGUtcmFuZ2U6IFUrMDM3MC0wMzc3LCBVKzAzN0EtMDM3RiwgVSswMzg0LTAzOEEsIFUrMDM4QywgVSswMzhFLTAzQTEsIFUrMDNBMy0wM0ZGOwp9Ci8qIHZpZXRuYW1lc2UgKi8KQGZvbnQtZmFjZSB7CiAgZm9udC1mYW1pbHk6ICdJQk0gUGxleCBTYW5zJzsKICBmb250LXN0eWxlOiBpdGFsaWM7CiAgZm9udC13ZWlnaHQ6IDQwMDsKICBmb250LWRpc3BsYXk6IHN3YXA7CiAgc3JjOiB1cmwoaHR0cHM6Ly9mb250cy5nc3RhdGljLmNvbS9zL2libXBsZXhzYW5zL3YxOS96WVgtS1ZFbE1ZWWFKZThicExIbkN3REtoZFR1R0taSlNkWS53b2ZmMikgZm9ybWF0KCd3b2ZmMicpOwogIHVuaWNvZGUtcmFuZ2U6IFUrMDEwMi0wMTAzLCBVKzAxMTAtMDExMSwgVSswMTI4LTAxMjksIFUrMDE2OC0wMTY5LCBVKzAxQTAtMDFBMSwgVSswMUFGLTAxQjAsIFUrMDMwMC0wMzAxLCBVKzAzMDMtMDMwNCwgVSswMzA4LTAzMDksIFUrMDMyMywgVSswMzI5LCBVKzFFQTAtMUVGOSwgVSsyMEFCOwp9Ci8qIGxhdGluLWV4dCAqLwpAZm9udC1mYWNlIHsKICBmb250LWZhbWlseTogJ0lCTSBQbGV4IFNhbnMnOwogIGZvbnQtc3R5bGU6IGl0YWxpYzsKICBmb250LXdlaWdodDogNDAwOwogIGZvbnQtZGlzcGxheTogc3dhcDsKICBzcmM6IHVybChodHRwczovL2ZvbnRzLmdzdGF0aWMuY29tL3MvaWJtcGxleHNhbnMvdjE5L3pZWC1LVkVsTVlZYUplOGJwTEhuQ3dES2hkVHVHYVpKU2RZLndvZmYyKSBmb3JtYXQoJ3dvZmYyJyk7CiAgdW5pY29kZS1yYW5nZTogVSswMTAwLTAyQUYsIFUrMDMwNCwgVSswMzA4LCBVKzAzMjksIFUrMUUwMC0xRTlGLCBVKzFFRjItMUVGRiwgVSsyMDIwLCBVKzIwQTAtMjBBQiwgVSsyMEFELTIwQzAsIFUrMjExMywgVSsyQzYwLTJDN0YsIFUrQTcyMC1BN0ZGOwp9Ci8qIGxhdGluICovCkBmb250LWZhY2UgewogIGZvbnQtZmFtaWx5OiAnSUJNIFBsZXggU2Fucyc7CiAgZm9udC1zdHlsZTogaXRhbGljOwogIGZvbnQtd2VpZ2h0OiA0MDA7CiAgZm9udC1kaXNwbGF5OiBzd2FwOwogIHNyYzogdXJsKGh0dHBzOi8vZm9udHMuZ3N0YXRpYy5jb20vcy9pYm1wbGV4c2Fucy92MTkvellYLUtWRWxNWVlhSmU4YnBMSG5Dd0RLaGRUdUY2Wkoud29mZjIpIGZvcm1hdCgnd29mZjInKTsKICB1bmljb2RlLXJhbmdlOiBVKzAwMDAtMDBGRiwgVSswMTMxLCBVKzAxNTItMDE1MywgVSswMkJCLTAyQkMsIFUrMDJDNiwgVSswMkRBLCBVKzAyREMsIFUrMDMwNCwgVSswMzA4LCBVKzAzMjksIFUrMjAwMC0yMDZGLCBVKzIwNzQsIFUrMjBBQywgVSsyMTIyLCBVKzIxOTEsIFUrMjE5MywgVSsyMjEyLCBVKzIyMTUsIFUrRkVGRiwgVStGRkZEOwp9Ci8qIGN5cmlsbGljLWV4dCAqLwpAZm9udC1mYWNlIHsKICBmb250LWZhbWlseTogJ0lCTSBQbGV4IFNhbnMnOwogIGZvbnQtc3R5bGU6IG5vcm1hbDsKICBmb250LXdlaWdodDogNDAwOwogIGZvbnQtZGlzcGxheTogc3dhcDsKICBzcmM6IHVybChodHRwczovL2ZvbnRzLmdzdGF0aWMuY29tL3MvaWJtcGxleHNhbnMvdjE5L3pZWGdLVkVsTVlZYUplOGJwTEhuQ3dES2hkemVGYjVOLndvZmYyKSBmb3JtYXQoJ3dvZmYyJyk7CiAgdW5pY29kZS1yYW5nZTogVSswNDYwLTA1MkYsIFUrMUM4MC0xQzg4LCBVKzIwQjQsIFUrMkRFMC0yREZGLCBVK0E2NDAtQTY5RiwgVStGRTJFLUZFMkY7Cn0KLyogY3lyaWxsaWMgKi8KQGZvbnQtZmFjZSB7CiAgZm9udC1mYW1pbHk6ICdJQk0gUGxleCBTYW5zJzsKICBmb250LXN0eWxlOiBub3JtYWw7CiAgZm9udC13ZWlnaHQ6IDQwMDsKICBmb250LWRpc3BsYXk6IHN3YXA7CiAgc3JjOiB1cmwoaHR0cHM6Ly9mb250cy5nc3RhdGljLmNvbS9zL2libXBsZXhzYW5zL3YxOS96WVhnS1ZFbE1ZWWFKZThicExIbkN3REtoZFhlRmI1Ti53b2ZmMikgZm9ybWF0KCd3b2ZmMicpOwogIHVuaWNvZGUtcmFuZ2U6IFUrMDMwMSwgVSswNDAwLTA0NUYsIFUrMDQ5MC0wNDkxLCBVKzA0QjAtMDRCMSwgVSsyMTE2Owp9Ci8qIGdyZWVrICovCkBmb250LWZhY2UgewogIGZvbnQtZmFtaWx5OiAnSUJNIFBsZXggU2Fucyc7CiAgZm9udC1zdHlsZTogbm9ybWFsOwogIGZvbnQtd2VpZ2h0OiA0MDA7CiAgZm9udC1kaXNwbGF5OiBzd2FwOwogIHNyYzogdXJsKGh0dHBzOi8vZm9udHMuZ3N0YXRpYy5jb20vcy9pYm1wbGV4c2Fucy92MTkvellYZ0tWRWxNWVlhSmU4YnBMSG5Dd0RLaGRMZUZiNU4ud29mZjIpIGZvcm1hdCgnd29mZjInKTsKICB1bmljb2RlLXJhbmdlOiBVKzAzNzAtMDM3NywgVSswMzdBLTAzN0YsIFUrMDM4NC0wMzhBLCBVKzAzOEMsIFUrMDM4RS0wM0ExLCBVKzAzQTMtMDNGRjsKfQovKiB2aWV0bmFtZXNlICovCkBmb250LWZhY2UgewogIGZvbnQtZmFtaWx5OiAnSUJNIFBsZXggU2Fucyc7CiAgZm9udC1zdHlsZTogbm9ybWFsOwogIGZvbnQtd2VpZ2h0OiA0MDA7CiAgZm9udC1kaXNwbGF5OiBzd2FwOwogIHNyYzogdXJsKGh0dHBzOi8vZm9udHMuZ3N0YXRpYy5jb20vcy9pYm1wbGV4c2Fucy92MTkvellYZ0tWRWxNWVlhSmU4YnBMSG5Dd0RLaGQ3ZUZiNU4ud29mZjIpIGZvcm1hdCgnd29mZjInKTsKICB1bmljb2RlLXJhbmdlOiBVKzAxMDItMDEwMywgVSswMTEwLTAxMTEsIFUrMDEyOC0wMTI5LCBVKzAxNjgtMDE2OSwgVSswMUEwLTAxQTEsIFUrMDFBRi0wMUIwLCBVKzAzMDAtMDMwMSwgVSswMzAzLTAzMDQsIFUrMDMwOC0wMzA5LCBVKzAzMjMsIFUrMDMyOSwgVSsxRUEwLTFFRjksIFUrMjBBQjsKfQovKiBsYXRpbi1leHQgKi8KQGZvbnQtZmFjZSB7CiAgZm9udC1mYW1pbHk6ICdJQk0gUGxleCBTYW5zJzsKICBmb250LXN0eWxlOiBub3JtYWw7CiAgZm9udC13ZWlnaHQ6IDQwMDsKICBmb250LWRpc3BsYXk6IHN3YXA7CiAgc3JjOiB1cmwoaHR0cHM6Ly9mb250cy5nc3RhdGljLmNvbS9zL2libXBsZXhzYW5zL3YxOS96WVhnS1ZFbE1ZWWFKZThicExIbkN3REtoZF9lRmI1Ti53b2ZmMikgZm9ybWF0KCd3b2ZmMicpOwogIHVuaWNvZGUtcmFuZ2U6IFUrMDEwMC0wMkFGLCBVKzAzMDQsIFUrMDMwOCwgVSswMzI5LCBVKzFFMDAtMUU5RiwgVSsxRUYyLTFFRkYsIFUrMjAyMCwgVSsyMEEwLTIwQUIsIFUrMjBBRC0yMEMwLCBVKzIxMTMsIFUrMkM2MC0yQzdGLCBVK0E3MjAtQTdGRjsKfQovKiBsYXRpbiAqLwpAZm9udC1mYWNlIHsKICBmb250LWZhbWlseTogJ0lCTSBQbGV4IFNhbnMnOwogIGZvbnQtc3R5bGU6IG5vcm1hbDsKICBmb250LXdlaWdodDogNDAwOwogIGZvbnQtZGlzcGxheTogc3dhcDsKICBzcmM6IHVybChodHRwczovL2ZvbnRzLmdzdGF0aWMuY29tL3MvaWJtcGxleHNhbnMvdjE5L3pZWGdLVkVsTVlZYUplOGJwTEhuQ3dES2hkSGVGUS53b2ZmMikgZm9ybWF0KCd3b2ZmMicpOwogIHVuaWNvZGUtcmFuZ2U6IFUrMDAwMC0wMEZGLCBVKzAxMzEsIFUrMDE1Mi0wMTUzLCBVKzAyQkItMDJCQywgVSswMkM2LCBVKzAyREEsIFUrMDJEQywgVSswMzA0LCBVKzAzMDgsIFUrMDMyOSwgVSsyMDAwLTIwNkYsIFUrMjA3NCwgVSsyMEFDLCBVKzIxMjIsIFUrMjE5MSwgVSsyMTkzLCBVKzIyMTIsIFUrMjIxNSwgVStGRUZGLCBVK0ZGRkQ7Cn0KLyogY3lyaWxsaWMtZXh0ICovCkBmb250LWZhY2UgewogIGZvbnQtZmFtaWx5OiAnSUJNIFBsZXggU2Fucyc7CiAgZm9udC1zdHlsZTogbm9ybWFsOwogIGZvbnQtd2VpZ2h0OiA2MDA7CiAgZm9udC1kaXNwbGF5OiBzd2FwOwogIHNyYzogdXJsKGh0dHBzOi8vZm9udHMuZ3N0YXRpYy5jb20vcy9pYm1wbGV4c2Fucy92MTkvellYOUtWRWxNWVlhSmU4YnBMSG5Dd0RLalE3NkFJeHNkT19xLndvZmYyKSBmb3JtYXQoJ3dvZmYyJyk7CiAgdW5pY29kZS1yYW5nZTogVSswNDYwLTA1MkYsIFUrMUM4MC0xQzg4LCBVKzIwQjQsIFUrMkRFMC0yREZGLCBVK0E2NDAtQTY5RiwgVStGRTJFLUZFMkY7Cn0KLyogY3lyaWxsaWMgKi8KQGZvbnQtZmFjZSB7CiAgZm9udC1mYW1pbHk6ICdJQk0gUGxleCBTYW5zJzsKICBmb250LXN0eWxlOiBub3JtYWw7CiAgZm9udC13ZWlnaHQ6IDYwMDsKICBmb250LWRpc3BsYXk6IHN3YXA7CiAgc3JjOiB1cmwoaHR0cHM6Ly9mb250cy5nc3RhdGljLmNvbS9zL2libXBsZXhzYW5zL3YxOS96WVg5S1ZFbE1ZWWFKZThicExIbkN3REtqUTc2QUlWc2RPX3Eud29mZjIpIGZvcm1hdCgnd29mZjInKTsKICB1bmljb2RlLXJhbmdlOiBVKzAzMDEsIFUrMDQwMC0wNDVGLCBVKzA0OTAtMDQ5MSwgVSswNEIwLTA0QjEsIFUrMjExNjsKfQovKiBncmVlayAqLwpAZm9udC1mYWNlIHsKICBmb250LWZhbWlseTogJ0lCTSBQbGV4IFNhbnMnOwogIGZvbnQtc3R5bGU6IG5vcm1hbDsKICBmb250LXdlaWdodDogNjAwOwogIGZvbnQtZGlzcGxheTogc3dhcDsKICBzcmM6IHVybChodHRwczovL2ZvbnRzLmdzdGF0aWMuY29tL3MvaWJtcGxleHNhbnMvdjE5L3pZWDlLVkVsTVlZYUplOGJwTEhuQ3dES2pRNzZBSUpzZE9fcS53b2ZmMikgZm9ybWF0KCd3b2ZmMicpOwogIHVuaWNvZGUtcmFuZ2U6IFUrMDM3MC0wMzc3LCBVKzAzN0EtMDM3RiwgVSswMzg0LTAzOEEsIFUrMDM4QywgVSswMzhFLTAzQTEsIFUrMDNBMy0wM0ZGOwp9Ci8qIHZpZXRuYW1lc2UgKi8KQGZvbnQtZmFjZSB7CiAgZm9udC1mYW1pbHk6ICdJQk0gUGxleCBTYW5zJzsKICBmb250LXN0eWxlOiBub3JtYWw7CiAgZm9udC13ZWlnaHQ6IDYwMDsKICBmb250LWRpc3BsYXk6IHN3YXA7CiAgc3JjOiB1cmwoaHR0cHM6Ly9mb250cy5nc3RhdGljLmNvbS9zL2libXBsZXhzYW5zL3YxOS96WVg5S1ZFbE1ZWWFKZThicExIbkN3REtqUTc2QUk1c2RPX3Eud29mZjIpIGZvcm1hdCgnd29mZjInKTsKICB1bmljb2RlLXJhbmdlOiBVKzAxMDItMDEwMywgVSswMTEwLTAxMTEsIFUrMDEyOC0wMTI5LCBVKzAxNjgtMDE2OSwgVSswMUEwLTAxQTEsIFUrMDFBRi0wMUIwLCBVKzAzMDAtMDMwMSwgVSswMzAzLTAzMDQsIFUrMDMwOC0wMzA5LCBVKzAzMjMsIFUrMDMyOSwgVSsxRUEwLTFFRjksIFUrMjBBQjsKfQovKiBsYXRpbi1leHQgKi8KQGZvbnQtZmFjZSB7CiAgZm9udC1mYW1pbHk6ICdJQk0gUGxleCBTYW5zJzsKICBmb250LXN0eWxlOiBub3JtYWw7CiAgZm9udC13ZWlnaHQ6IDYwMDsKICBmb250LWRpc3BsYXk6IHN3YXA7CiAgc3JjOiB1cmwoaHR0cHM6Ly9mb250cy5nc3RhdGljLmNvbS9zL2libXBsZXhzYW5zL3YxOS96WVg5S1ZFbE1ZWWFKZThicExIbkN3REtqUTc2QUk5c2RPX3Eud29mZjIpIGZvcm1hdCgnd29mZjInKTsKICB1bmljb2RlLXJhbmdlOiBVKzAxMDAtMDJBRiwgVSswMzA0LCBVKzAzMDgsIFUrMDMyOSwgVSsxRTAwLTFFOUYsIFUrMUVGMi0xRUZGLCBVKzIwMjAsIFUrMjBBMC0yMEFCLCBVKzIwQUQtMjBDMCwgVSsyMTEzLCBVKzJDNjAtMkM3RiwgVStBNzIwLUE3RkY7Cn0KLyogbGF0aW4gKi8KQGZvbnQtZmFjZSB7CiAgZm9udC1mYW1pbHk6ICdJQk0gUGxleCBTYW5zJzsKICBmb250LXN0eWxlOiBub3JtYWw7CiAgZm9udC13ZWlnaHQ6IDYwMDsKICBmb250LWRpc3BsYXk6IHN3YXA7CiAgc3JjOiB1cmwoaHR0cHM6Ly9mb250cy5nc3RhdGljLmNvbS9zL2libXBsZXhzYW5zL3YxOS96WVg5S1ZFbE1ZWWFKZThicExIbkN3REtqUTc2QUlGc2RBLndvZmYyKSBmb3JtYXQoJ3dvZmYyJyk7CiAgdW5pY29kZS1yYW5nZTogVSswMDAwLTAwRkYsIFUrMDEzMSwgVSswMTUyLTAxNTMsIFUrMDJCQi0wMkJDLCBVKzAyQzYsIFUrMDJEQSwgVSswMkRDLCBVKzAzMDQsIFUrMDMwOCwgVSswMzI5LCBVKzIwMDAtMjA2RiwgVSsyMDc0LCBVKzIwQUMsIFUrMjEyMiwgVSsyMTkxLCBVKzIxOTMsIFUrMjIxMiwgVSsyMjE1LCBVK0ZFRkYsIFUrRkZGRDsKfQo=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPBody>
        <HTTPPropertySet>
          <HTTPProperty name="StreamID">1</HTTPProperty>
          <HTTPProperty name="TotalHeadersSize">398</HTTPProperty>
        </HTTPPropertySet>
      </HTTPResponse>
    </HTTPTask>
    <HTTPTask id="5" hostname="unpkg.com" path="/@bpmn-io/form-js/dist/assets/flatpickr/light.css" url="https://unpkg.com/@bpmn-io/form-js/dist/assets/flatpickr/light.css" ip="104.16.124.175" port="443" client_ip="192.168.0.112" client_port="64265" connectionId="2408" origin="HTML" encodingType="ANSI" ordinal="4" startDateTime="2024-02-16T16:37:19.963+05:30" startTime="2835" endTime="3150" blockedTime="-1" dnsTime="33" connectTime="114" sendTime="4294967295" waitTime="4294967295" receiveTime="30" sslNegotiateTime="57" responseBodySize="272">
      <HTTPRequest method="GET">
        <HTTPHeaders>
          <HTTPHeaderEntity name=":method" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0VU</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name=":scheme" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cHM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name=":path" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>L0BicG1uLWlvL2Zvcm0tanMvZGlzdC9hc3NldHMvZmxhdHBpY2tyL2xpZ2h0LmNzcw==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name=":authority" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>dW5wa2cuY29t</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Referer" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cHM6Ly9kZXYuYmx1ZWFsZ28uY29tL3NtYXJ0Zm9ybXVwL2xvYWRpbmRleD9vcHBvcnR1bml0eUlkPTAwNjBvMDAwMDFlU0lKMEFBTyZjdXN0b21lcmlkPWN1c3QxMDA1JmFjY2Vzc3Rva2VuPVJGcFNRVlVJZ2Q0WV9vWU5MODFuYUV4VkxBWWdLUXQ3</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Language" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZW4tVVMsZW47cT0wLjk=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="User-Agent" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEyMS4wLjAuMCBTYWZhcmkvNTM3LjM2</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Encoding" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ki8q</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Om1ldGhvZDogR0VUDQo6c2NoZW1lOiBodHRwcw0KOnBhdGg6IC9AYnBtbi1pby9mb3JtLWpzL2Rpc3QvYXNzZXRzL2ZsYXRwaWNrci9saWdodC5jc3MNCjphdXRob3JpdHk6IHVucGtnLmNvbQ0KUmVmZXJlcjogaHR0cHM6Ly9kZXYuYmx1ZWFsZ28uY29tL3NtYXJ0Zm9ybXVwL2xvYWRpbmRleD9vcHBvcnR1bml0eUlkPTAwNjBvMDAwMDFlU0lKMEFBTyZjdXN0b21lcmlkPWN1c3QxMDA1JmFjY2Vzc3Rva2VuPVJGcFNRVlVJZ2Q0WV9vWU5MODFuYUV4VkxBWWdLUXQ3DQpBY2NlcHQtTGFuZ3VhZ2U6IGVuLVVTLGVuO3E9MC45DQpVc2VyLUFnZW50OiBNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvMTIxLjAuMC4wIFNhZmFyaS81MzcuMzYNCkFjY2VwdC1FbmNvZGluZzogZ3ppcCwgZGVmbGF0ZQ0KQWNjZXB0OiAqLyoNCg0K</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPPropertySet>
          <HTTPProperty name="StreamID">1</HTTPProperty>
          <HTTPProperty name="TotalHeadersSize">268</HTTPProperty>
        </HTTPPropertySet>
      </HTTPRequest>
      <HTTPResponse>
        <contentLenght>0</contentLenght>
        <HTTPHeaders>
          <HTTPHeaderEntity name="Status" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MzAy</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="date" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>RnJpLCAxNiBGZWIgMjAyNCAxMTowNzoyMCBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="content-type" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>dGV4dC9wbGFpbjsgY2hhcnNldD11dGYtOA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="access-control-allow-origin" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Kg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="cache-control" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>cHVibGljLCBzLW1heGFnZT02MDAsIG1heC1hZ2U9NjA=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="location" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>L0BicG1uLWlvL2Zvcm0tanNAMS43LjAvZGlzdC9hc3NldHMvZmxhdHBpY2tyL2xpZ2h0LmNzcw==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="vary" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>QWNjZXB0LCBBY2NlcHQtRW5jb2Rpbmc=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="content-encoding" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="via" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MS4xIGZseS5pbw==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="fly-request-id" index="9">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MDFIUFJTSldONTc5WEZWVjZGWDJBOVZWOEUtYm9t</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="cf-cache-status" index="10">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>RVhQSVJFRA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="strict-transport-security" index="11">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bWF4LWFnZT0zMTUzNjAwMDsgaW5jbHVkZVN1YkRvbWFpbnM7IHByZWxvYWQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="x-content-type-options" index="12">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bm9zbmlmZg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="server" index="13">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Y2xvdWRmbGFyZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="cf-ray" index="14">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ODU2NTUzOGE4ZDUyNmVjYS1CT00=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SFRUUC8yLjAgMzAyDQpTdGF0dXM6IDMwMg0KZGF0ZTogRnJpLCAxNiBGZWIgMjAyNCAxMTowNzoyMCBHTVQNCmNvbnRlbnQtdHlwZTogdGV4dC9wbGFpbjsgY2hhcnNldD11dGYtOA0KYWNjZXNzLWNvbnRyb2wtYWxsb3ctb3JpZ2luOiAqDQpjYWNoZS1jb250cm9sOiBwdWJsaWMsIHMtbWF4YWdlPTYwMCwgbWF4LWFnZT02MA0KbG9jYXRpb246IC9AYnBtbi1pby9mb3JtLWpzQDEuNy4wL2Rpc3QvYXNzZXRzL2ZsYXRwaWNrci9saWdodC5jc3MNCnZhcnk6IEFjY2VwdCwgQWNjZXB0LUVuY29kaW5nDQpjb250ZW50LWVuY29kaW5nOiBnemlwDQp2aWE6IDEuMSBmbHkuaW8NCmZseS1yZXF1ZXN0LWlkOiAwMUhQUlNKV041NzlYRlZWNkZYMkE5VlY4RS1ib20NCmNmLWNhY2hlLXN0YXR1czogRVhQSVJFRA0Kc3RyaWN0LXRyYW5zcG9ydC1zZWN1cml0eTogbWF4LWFnZT0zMTUzNjAwMDsgaW5jbHVkZVN1YkRvbWFpbnM7IHByZWxvYWQNCngtY29udGVudC10eXBlLW9wdGlvbnM6IG5vc25pZmYNCnNlcnZlcjogY2xvdWRmbGFyZQ0KY2YtcmF5OiA4NTY1NTM4YThkNTI2ZWNhLUJPTQ0KDQo=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPBody>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Rm91bmQuIFJlZGlyZWN0aW5nIHRvIC9AYnBtbi1pby9mb3JtLWpzQDEuNy4wL2Rpc3QvYXNzZXRzL2ZsYXRwaWNrci9saWdodC5jc3M=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPBody>
        <HTTPPropertySet>
          <HTTPProperty name="StreamID">1</HTTPProperty>
          <HTTPProperty name="TotalHeadersSize">175</HTTPProperty>
        </HTTPPropertySet>
      </HTTPResponse>
      <HTTPTask id="15" hostname="unpkg.com" path="/@bpmn-io/form-js@1.7.0/dist/assets/flatpickr/light.css" url="https://unpkg.com/@bpmn-io/form-js@1.7.0/dist/assets/flatpickr/light.css" ip="104.16.124.175" port="443" client_ip="192.168.0.112" client_port="64265" connectionId="2408" origin="Redirection" encodingType="ANSI" startDateTime="2024-02-16T16:37:20.280+05:30" startTime="3151" endTime="3226" blockedTime="-1" dnsTime="-1" connectTime="-2" sendTime="4294967295" waitTime="4294967295" receiveTime="22" sslNegotiateTime="-1" responseBodySize="5067">
        <HTTPRequest method="GET">
          <HTTPHeaders>
            <HTTPHeaderEntity name=":method" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>R0VU</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name=":scheme" index="1">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>aHR0cHM=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name=":path" index="2">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>L0BicG1uLWlvL2Zvcm0tanNAMS43LjAvZGlzdC9hc3NldHMvZmxhdHBpY2tyL2xpZ2h0LmNzcw==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name=":authority" index="3">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>dW5wa2cuY29t</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Referer" index="4">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>aHR0cHM6Ly9kZXYuYmx1ZWFsZ28uY29tL3NtYXJ0Zm9ybXVwL2xvYWRpbmRleD9vcHBvcnR1bml0eUlkPTAwNjBvMDAwMDFlU0lKMEFBTyZjdXN0b21lcmlkPWN1c3QxMDA1JmFjY2Vzc3Rva2VuPVJGcFNRVlVJZ2Q0WV9vWU5MODFuYUV4VkxBWWdLUXQ3</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Accept-Language" index="5">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>ZW4tVVMsZW47cT0wLjk=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="User-Agent" index="6">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEyMS4wLjAuMCBTYWZhcmkvNTM3LjM2</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Accept-Encoding" index="7">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="Accept" index="8">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>Ki8q</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPAllHeaders>
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>Om1ldGhvZDogR0VUDQo6c2NoZW1lOiBodHRwcw0KOnBhdGg6IC9AYnBtbi1pby9mb3JtLWpzQDEuNy4wL2Rpc3QvYXNzZXRzL2ZsYXRwaWNrci9saWdodC5jc3MNCjphdXRob3JpdHk6IHVucGtnLmNvbQ0KUmVmZXJlcjogaHR0cHM6Ly9kZXYuYmx1ZWFsZ28uY29tL3NtYXJ0Zm9ybXVwL2xvYWRpbmRleD9vcHBvcnR1bml0eUlkPTAwNjBvMDAwMDFlU0lKMEFBTyZjdXN0b21lcmlkPWN1c3QxMDA1JmFjY2Vzc3Rva2VuPVJGcFNRVlVJZ2Q0WV9vWU5MODFuYUV4VkxBWWdLUXQ3DQpBY2NlcHQtTGFuZ3VhZ2U6IGVuLVVTLGVuO3E9MC45DQpVc2VyLUFnZW50OiBNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvMTIxLjAuMC4wIFNhZmFyaS81MzcuMzYNCkFjY2VwdC1FbmNvZGluZzogZ3ppcCwgZGVmbGF0ZQ0KQWNjZXB0OiAqLyoNCg0K</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPAllHeaders>
          </HTTPHeaders>
          <HTTPPropertySet>
            <HTTPProperty name="StreamID">5</HTTPProperty>
            <HTTPProperty name="TotalHeadersSize">56</HTTPProperty>
          </HTTPPropertySet>
        </HTTPRequest>
        <HTTPResponse>
          <contentLenght>0</contentLenght>
          <HTTPHeaders>
            <HTTPHeaderEntity name="Status" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>MjAw</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="date" index="1">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>RnJpLCAxNiBGZWIgMjAyNCAxMTowNzoyMCBHTVQ=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="content-type" index="2">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>dGV4dC9jc3M7IGNoYXJzZXQ9dXRmLTg=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="access-control-allow-origin" index="3">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>Kg==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="content-encoding" index="4">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>Z3ppcA==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="cache-control" index="5">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>cHVibGljLCBtYXgtYWdlPTMxNTM2MDAw</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="last-modified" index="6">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>U2F0LCAyNiBPY3QgMTk4NSAwODoxNTowMCBHTVQ=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="etag" index="7">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>IjRiMzgtWmhmTnV6YVVxMi9TUnY0RGZENU1GTEI0eGhzIg==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="via" index="8">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>MS4xIGZseS5pbw==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="fly-request-id" index="9">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>MDFIUE5ONTY3REM2MEFDUFlGNDBNMFRUREstYm9t</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="cf-cache-status" index="10">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>SElU</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="age" index="11">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>MTA1MzAw</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="vary" index="12">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>QWNjZXB0LUVuY29kaW5n</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="strict-transport-security" index="13">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>bWF4LWFnZT0zMTUzNjAwMDsgaW5jbHVkZVN1YkRvbWFpbnM7IHByZWxvYWQ=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="x-content-type-options" index="14">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>bm9zbmlmZg==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="server" index="15">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>Y2xvdWRmbGFyZQ==</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="cf-ray" index="16">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>ODU2NTUzOGI5ZjFlNmVjYS1CT00=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPAllHeaders>
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>SFRUUC8yLjAgMjAwDQpTdGF0dXM6IDIwMA0KZGF0ZTogRnJpLCAxNiBGZWIgMjAyNCAxMTowNzoyMCBHTVQNCmNvbnRlbnQtdHlwZTogdGV4dC9jc3M7IGNoYXJzZXQ9dXRmLTgNCmFjY2Vzcy1jb250cm9sLWFsbG93LW9yaWdpbjogKg0KY29udGVudC1lbmNvZGluZzogZ3ppcA0KY2FjaGUtY29udHJvbDogcHVibGljLCBtYXgtYWdlPTMxNTM2MDAwDQpsYXN0LW1vZGlmaWVkOiBTYXQsIDI2IE9jdCAxOTg1IDA4OjE1OjAwIEdNVA0KZXRhZzogIjRiMzgtWmhmTnV6YVVxMi9TUnY0RGZENU1GTEI0eGhzIg0KdmlhOiAxLjEgZmx5LmlvDQpmbHktcmVxdWVzdC1pZDogMDFIUE5ONTY3REM2MEFDUFlGNDBNMFRUREstYm9tDQpjZi1jYWNoZS1zdGF0dXM6IEhJVA0KYWdlOiAxMDUzMDANCnZhcnk6IEFjY2VwdC1FbmNvZGluZw0Kc3RyaWN0LXRyYW5zcG9ydC1zZWN1cml0eTogbWF4LWFnZT0zMTUzNjAwMDsgaW5jbHVkZVN1YkRvbWFpbnM7IHByZWxvYWQNCngtY29udGVudC10eXBlLW9wdGlvbnM6IG5vc25pZmYNCnNlcnZlcjogY2xvdWRmbGFyZQ0KY2YtcmF5OiA4NTY1NTM4YjlmMWU2ZWNhLUJPTQ0KDQo=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPAllHeaders>
          </HTTPHeaders>
          <HTTPBody>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>LmZsYXRwaWNrci1jYWxlbmRhciB7CiAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7CiAgb3BhY2l0eTogMDsKICBkaXNwbGF5OiBub25lOwogIHRleHQtYWxpZ246IGNlbnRlcjsKICB2aXNpYmlsaXR5OiBoaWRkZW47CiAgcGFkZGluZzogMDsKICAtd2Via2l0LWFuaW1hdGlvbjogbm9uZTsKICAgICAgICAgIGFuaW1hdGlvbjogbm9uZTsKICBkaXJlY3Rpb246IGx0cjsKICBib3JkZXI6IDA7CiAgZm9udC1zaXplOiAxNHB4OwogIGxpbmUtaGVpZ2h0OiAyNHB4OwogIGJvcmRlci1yYWRpdXM6IDVweDsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgd2lkdGg6IDMwNy44NzVweDsKICAtd2Via2l0LWJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94OwogIC1tcy10b3VjaC1hY3Rpb246IG1hbmlwdWxhdGlvbjsKICAgICAgdG91Y2gtYWN0aW9uOiBtYW5pcHVsYXRpb247CiAgLXdlYmtpdC1ib3gtc2hhZG93OiAwIDNweCAxM3B4IHJnYmEoMCwwLDAsMC4wOCk7CiAgICAgICAgICBib3gtc2hhZG93OiAwIDNweCAxM3B4IHJnYmEoMCwwLDAsMC4wOCk7Cn0KLmZsYXRwaWNrci1jYWxlbmRhci5vcGVuLAouZmxhdHBpY2tyLWNhbGVuZGFyLmlubGluZSB7CiAgb3BhY2l0eTogMTsKICBtYXgtaGVpZ2h0OiA2NDBweDsKICB2aXNpYmlsaXR5OiB2aXNpYmxlOwp9Ci5mbGF0cGlja3ItY2FsZW5kYXIub3BlbiB7CiAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogIHotaW5kZXg6IDk5OTk5Owp9Ci5mbGF0cGlja3ItY2FsZW5kYXIuYW5pbWF0ZS5vcGVuIHsKICAtd2Via2l0LWFuaW1hdGlvbjogZnBGYWRlSW5Eb3duIDMwMG1zIGN1YmljLWJlemllcigwLjIzLCAxLCAwLjMyLCAxKTsKICAgICAgICAgIGFuaW1hdGlvbjogZnBGYWRlSW5Eb3duIDMwMG1zIGN1YmljLWJlemllcigwLjIzLCAxLCAwLjMyLCAxKTsKfQouZmxhdHBpY2tyLWNhbGVuZGFyLmlubGluZSB7CiAgZGlzcGxheTogYmxvY2s7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIHRvcDogMnB4Owp9Ci5mbGF0cGlja3ItY2FsZW5kYXIuc3RhdGljIHsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgdG9wOiBjYWxjKDEwMCUgKyAycHgpOwp9Ci5mbGF0cGlja3ItY2FsZW5kYXIuc3RhdGljLm9wZW4gewogIHotaW5kZXg6IDk5OTsKICBkaXNwbGF5OiBibG9jazsKfQouZmxhdHBpY2tyLWNhbGVuZGFyLm11bHRpTW9udGggLmZsYXRwaWNrci1kYXlzIC5kYXlDb250YWluZXI6bnRoLWNoaWxkKG4rMSkgLmZsYXRwaWNrci1kYXkuaW5SYW5nZTpudGgtY2hpbGQoN24rNykgewogIC13ZWJraXQtYm94LXNoYWRvdzogbm9uZSAhaW1wb3J0YW50OwogICAgICAgICAgYm94LXNoYWRvdzogbm9uZSAhaW1wb3J0YW50Owp9Ci5mbGF0cGlja3ItY2FsZW5kYXIubXVsdGlNb250aCAuZmxhdHBpY2tyLWRheXMgLmRheUNvbnRhaW5lcjpudGgtY2hpbGQobisyKSAuZmxhdHBpY2tyLWRheS5pblJhbmdlOm50aC1jaGlsZCg3bisxKSB7CiAgLXdlYmtpdC1ib3gtc2hhZG93OiAtMnB4IDAgMCAjZTZlNmU2LCA1cHggMCAwICNlNmU2ZTY7CiAgICAgICAgICBib3gtc2hhZG93OiAtMnB4IDAgMCAjZTZlNmU2LCA1cHggMCAwICNlNmU2ZTY7Cn0KLmZsYXRwaWNrci1jYWxlbmRhciAuaGFzV2Vla3MgLmRheUNvbnRhaW5lciwKLmZsYXRwaWNrci1jYWxlbmRhciAuaGFzVGltZSAuZGF5Q29udGFpbmVyIHsKICBib3JkZXItYm90dG9tOiAwOwogIGJvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOiAwOwogIGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IDA7Cn0KLmZsYXRwaWNrci1jYWxlbmRhciAuaGFzV2Vla3MgLmRheUNvbnRhaW5lciB7CiAgYm9yZGVyLWxlZnQ6IDA7Cn0KLmZsYXRwaWNrci1jYWxlbmRhci5oYXNUaW1lIC5mbGF0cGlja3ItdGltZSB7CiAgaGVpZ2h0OiA0MHB4OwogIGJvcmRlci10b3A6IDFweCBzb2xpZCAjZWNlZWYxOwp9Ci5mbGF0cGlja3ItY2FsZW5kYXIuaGFzVGltZSAuZmxhdHBpY2tyLWlubmVyQ29udGFpbmVyIHsKICBib3JkZXItYm90dG9tOiAwOwp9Ci5mbGF0cGlja3ItY2FsZW5kYXIuaGFzVGltZSAuZmxhdHBpY2tyLXRpbWUgewogIGJvcmRlcjogMXB4IHNvbGlkICNlY2VlZjE7Cn0KLmZsYXRwaWNrci1jYWxlbmRhci5ub0NhbGVuZGFyLmhhc1RpbWUgLmZsYXRwaWNrci10aW1lIHsKICBoZWlnaHQ6IGF1dG87Cn0KLmZsYXRwaWNrci1jYWxlbmRhcjpiZWZvcmUsCi5mbGF0cGlja3ItY2FsZW5kYXI6YWZ0ZXIgewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICBkaXNwbGF5OiBibG9jazsKICBwb2ludGVyLWV2ZW50czogbm9uZTsKICBib3JkZXI6IHNvbGlkIHRyYW5zcGFyZW50OwogIGNvbnRlbnQ6ICcnOwogIGhlaWdodDogMDsKICB3aWR0aDogMDsKICBsZWZ0OiAyMnB4Owp9Ci5mbGF0cGlja3ItY2FsZW5kYXIucmlnaHRNb3N0OmJlZm9yZSwKLmZsYXRwaWNrci1jYWxlbmRhci5hcnJvd1JpZ2h0OmJlZm9yZSwKLmZsYXRwaWNrci1jYWxlbmRhci5yaWdodE1vc3Q6YWZ0ZXIsCi5mbGF0cGlja3ItY2FsZW5kYXIuYXJyb3dSaWdodDphZnRlciB7CiAgbGVmdDogYXV0bzsKICByaWdodDogMjJweDsKfQouZmxhdHBpY2tyLWNhbGVuZGFyLmFycm93Q2VudGVyOmJlZm9yZSwKLmZsYXRwaWNrci1jYWxlbmRhci5hcnJvd0NlbnRlcjphZnRlciB7CiAgbGVmdDogNTAlOwogIHJpZ2h0OiA1MCU7Cn0KLmZsYXRwaWNrci1jYWxlbmRhcjpiZWZvcmUgewogIGJvcmRlci13aWR0aDogNXB4OwogIG1hcmdpbjogMCAtNXB4Owp9Ci5mbGF0cGlja3ItY2FsZW5kYXI6YWZ0ZXIgewogIGJvcmRlci13aWR0aDogNHB4OwogIG1hcmdpbjogMCAtNHB4Owp9Ci5mbGF0cGlja3ItY2FsZW5kYXIuYXJyb3dUb3A6YmVmb3JlLAouZmxhdHBpY2tyLWNhbGVuZGFyLmFycm93VG9wOmFmdGVyIHsKICBib3R0b206IDEwMCU7Cn0KLmZsYXRwaWNrci1jYWxlbmRhci5hcnJvd1RvcDpiZWZvcmUgewogIGJvcmRlci1ib3R0b20tY29sb3I6ICNlY2VlZjE7Cn0KLmZsYXRwaWNrci1jYWxlbmRhci5hcnJvd1RvcDphZnRlciB7CiAgYm9yZGVyLWJvdHRvbS1jb2xvcjogI2VjZWVmMTsKfQouZmxhdHBpY2tyLWNhbGVuZGFyLmFycm93Qm90dG9tOmJlZm9yZSwKLmZsYXRwaWNrci1jYWxlbmRhci5hcnJvd0JvdHRvbTphZnRlciB7CiAgdG9wOiAxMDAlOwp9Ci5mbGF0cGlja3ItY2FsZW5kYXIuYXJyb3dCb3R0b206YmVmb3JlIHsKICBib3JkZXItdG9wLWNvbG9yOiAjZWNlZWYxOwp9Ci5mbGF0cGlja3ItY2FsZW5kYXIuYXJyb3dCb3R0b206YWZ0ZXIgewogIGJvcmRlci10b3AtY29sb3I6ICNlY2VlZjE7Cn0KLmZsYXRwaWNrci1jYWxlbmRhcjpmb2N1cyB7CiAgb3V0bGluZTogMDsKfQouZmxhdHBpY2tyLXdyYXBwZXIgewogIHBvc2l0aW9uOiByZWxhdGl2ZTsKICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7Cn0KLmZsYXRwaWNrci1tb250aHMgewogIGRpc3BsYXk6IC13ZWJraXQtYm94OwogIGRpc3BsYXk6IC13ZWJraXQtZmxleDsKICBkaXNwbGF5OiAtbXMtZmxleGJveDsKICBkaXNwbGF5OiBmbGV4Owp9Ci5mbGF0cGlja3ItbW9udGhzIC5mbGF0cGlja3ItbW9udGggewogIGJvcmRlci1yYWRpdXM6IDVweCA1cHggMCAwOwogIGJhY2tncm91bmQ6ICNlY2VlZjE7CiAgY29sb3I6ICM1YTYxNzE7CiAgZmlsbDogIzVhNjE3MTsKICBoZWlnaHQ6IDM0cHg7CiAgbGluZS1oZWlnaHQ6IDE7CiAgdGV4dC1hbGlnbjogY2VudGVyOwogIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lOwogICAgIC1tb3otdXNlci1zZWxlY3Q6IG5vbmU7CiAgICAgIC1tcy11c2VyLXNlbGVjdDogbm9uZTsKICAgICAgICAgIHVzZXItc2VsZWN0OiBub25lOwogIG92ZXJmbG93OiBoaWRkZW47CiAgLXdlYmtpdC1ib3gtZmxleDogMTsKICAtd2Via2l0LWZsZXg6IDE7CiAgICAgIC1tcy1mbGV4OiAxOwogICAgICAgICAgZmxleDogMTsKfQouZmxhdHBpY2tyLW1vbnRocyAuZmxhdHBpY2tyLXByZXYtbW9udGgsCi5mbGF0cGlja3ItbW9udGhzIC5mbGF0cGlja3ItbmV4dC1tb250aCB7CiAgLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTsKICAgICAtbW96LXVzZXItc2VsZWN0OiBub25lOwogICAgICAtbXMtdXNlci1zZWxlY3Q6IG5vbmU7CiAgICAgICAgICB1c2VyLXNlbGVjdDogbm9uZTsKICB0ZXh0LWRlY29yYXRpb246IG5vbmU7CiAgY3Vyc29yOiBwb2ludGVyOwogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB0b3A6IDA7CiAgaGVpZ2h0OiAzNHB4OwogIHBhZGRpbmc6IDEwcHg7CiAgei1pbmRleDogMzsKICBjb2xvcjogIzVhNjE3MTsKICBmaWxsOiAjNWE2MTcxOwp9Ci5mbGF0cGlja3ItbW9udGhzIC5mbGF0cGlja3ItcHJldi1tb250aC5mbGF0cGlja3ItZGlzYWJsZWQsCi5mbGF0cGlja3ItbW9udGhzIC5mbGF0cGlja3ItbmV4dC1tb250aC5mbGF0cGlja3ItZGlzYWJsZWQgewogIGRpc3BsYXk6IG5vbmU7Cn0KLmZsYXRwaWNrci1tb250aHMgLmZsYXRwaWNrci1wcmV2LW1vbnRoIGksCi5mbGF0cGlja3ItbW9udGhzIC5mbGF0cGlja3ItbmV4dC1tb250aCBpIHsKICBwb3NpdGlvbjogcmVsYXRpdmU7Cn0KLmZsYXRwaWNrci1tb250aHMgLmZsYXRwaWNrci1wcmV2LW1vbnRoLmZsYXRwaWNrci1wcmV2LW1vbnRoLAouZmxhdHBpY2tyLW1vbnRocyAuZmxhdHBpY2tyLW5leHQtbW9udGguZmxhdHBpY2tyLXByZXYtbW9udGggewovKgogICAgICAvKnJ0bDpiZWdpbjppZ25vcmUqLwovKgogICAgICAqLwogIGxlZnQ6IDA7Ci8qCiAgICAgIC8qcnRsOmVuZDppZ25vcmUqLwovKgogICAgICAqLwp9Ci8qCiAgICAgIC8qcnRsOmJlZ2luOmlnbm9yZSovCi8qCiAgICAgIC8qcnRsOmVuZDppZ25vcmUqLwouZmxhdHBpY2tyLW1vbnRocyAuZmxhdHBpY2tyLXByZXYtbW9udGguZmxhdHBpY2tyLW5leHQtbW9udGgsCi5mbGF0cGlja3ItbW9udGhzIC5mbGF0cGlja3ItbmV4dC1tb250aC5mbGF0cGlja3ItbmV4dC1tb250aCB7Ci8qCiAgICAgIC8qcnRsOmJlZ2luOmlnbm9yZSovCi8qCiAgICAgICovCiAgcmlnaHQ6IDA7Ci8qCiAgICAgIC8qcnRsOmVuZDppZ25vcmUqLwovKgogICAgICAqLwp9Ci8qCiAgICAgIC8qcnRsOmJlZ2luOmlnbm9yZSovCi8qCiAgICAgIC8qcnRsOmVuZDppZ25vcmUqLwouZmxhdHBpY2tyLW1vbnRocyAuZmxhdHBpY2tyLXByZXYtbW9udGg6aG92ZXIsCi5mbGF0cGlja3ItbW9udGhzIC5mbGF0cGlja3ItbmV4dC1tb250aDpob3ZlciB7CiAgY29sb3I6ICNiYmI7Cn0KLmZsYXRwaWNrci1tb250aHMgLmZsYXRwaWNrci1wcmV2LW1vbnRoOmhvdmVyIHN2ZywKLmZsYXRwaWNrci1tb250aHMgLmZsYXRwaWNrci1uZXh0LW1vbnRoOmhvdmVyIHN2ZyB7CiAgZmlsbDogI2Y2NDc0NzsKfQouZmxhdHBpY2tyLW1vbnRocyAuZmxhdHBpY2tyLXByZXYtbW9udGggc3ZnLAouZmxhdHBpY2tyLW1vbnRocyAuZmxhdHBpY2tyLW5leHQtbW9udGggc3ZnIHsKICB3aWR0aDogMTRweDsKICBoZWlnaHQ6IDE0cHg7Cn0KLmZsYXRwaWNrci1tb250aHMgLmZsYXRwaWNrci1wcmV2LW1vbnRoIHN2ZyBwYXRoLAouZmxhdHBpY2tyLW1vbnRocyAuZmxhdHBpY2tyLW5leHQtbW9udGggc3ZnIHBhdGggewogIC13ZWJraXQtdHJhbnNpdGlvbjogZmlsbCAwLjFzOwogIHRyYW5zaXRpb246IGZpbGwgMC4xczsKICBmaWxsOiBpbmhlcml0Owp9Ci5udW1JbnB1dFdyYXBwZXIgewogIHBvc2l0aW9uOiByZWxhdGl2ZTsKICBoZWlnaHQ6IGF1dG87Cn0KLm51bUlucHV0V3JhcHBlciBpbnB1dCwKLm51bUlucHV0V3JhcHBlciBzcGFuIHsKICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7Cn0KLm51bUlucHV0V3JhcHBlciBpbnB1dCB7CiAgd2lkdGg6IDEwMCU7Cn0KLm51bUlucHV0V3JhcHBlciBpbnB1dDo6LW1zLWNsZWFyIHsKICBkaXNwbGF5OiBub25lOwp9Ci5udW1JbnB1dFdyYXBwZXIgaW5wdXQ6Oi13ZWJraXQtb3V0ZXItc3Bpbi1idXR0b24sCi5udW1JbnB1dFdyYXBwZXIgaW5wdXQ6Oi13ZWJraXQtaW5uZXItc3Bpbi1idXR0b24gewogIG1hcmdpbjogMDsKICAtd2Via2l0LWFwcGVhcmFuY2U6IG5vbmU7Cn0KLm51bUlucHV0V3JhcHBlciBzcGFuIHsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgcmlnaHQ6IDA7CiAgd2lkdGg6IDE0cHg7CiAgcGFkZGluZzogMCA0cHggMCAycHg7CiAgaGVpZ2h0OiA1MCU7CiAgbGluZS1oZWlnaHQ6IDUwJTsKICBvcGFjaXR5OiAwOwogIGN1cnNvcjogcG9pbnRlcjsKICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDcyLDcyLDcyLDAuMTUpOwogIC13ZWJraXQtYm94LXNpemluZzogYm9yZGVyLWJveDsKICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7Cn0KLm51bUlucHV0V3JhcHBlciBzcGFuOmhvdmVyIHsKICBiYWNrZ3JvdW5kOiByZ2JhKDAsMCwwLDAuMSk7Cn0KLm51bUlucHV0V3JhcHBlciBzcGFuOmFjdGl2ZSB7CiAgYmFja2dyb3VuZDogcmdiYSgwLDAsMCwwLjIpOwp9Ci5udW1JbnB1dFdyYXBwZXIgc3BhbjphZnRlciB7CiAgZGlzcGxheTogYmxvY2s7CiAgY29udGVudDogIiI7CiAgcG9zaXRpb246IGFic29sdXRlOwp9Ci5udW1JbnB1dFdyYXBwZXIgc3Bhbi5hcnJvd1VwIHsKICB0b3A6IDA7CiAgYm9yZGVyLWJvdHRvbTogMDsKfQoubnVtSW5wdXRXcmFwcGVyIHNwYW4uYXJyb3dVcDphZnRlciB7CiAgYm9yZGVyLWxlZnQ6IDRweCBzb2xpZCB0cmFuc3BhcmVudDsKICBib3JkZXItcmlnaHQ6IDRweCBzb2xpZCB0cmFuc3BhcmVudDsKICBib3JkZXItYm90dG9tOiA0cHggc29saWQgcmdiYSg3Miw3Miw3MiwwLjYpOwogIHRvcDogMjYlOwp9Ci5udW1JbnB1dFdyYXBwZXIgc3Bhbi5hcnJvd0Rvd24gewogIHRvcDogNTAlOwp9Ci5udW1JbnB1dFdyYXBwZXIgc3Bhbi5hcnJvd0Rvd246YWZ0ZXIgewogIGJvcmRlci1sZWZ0OiA0cHggc29saWQgdHJhbnNwYXJlbnQ7CiAgYm9yZGVyLXJpZ2h0OiA0cHggc29saWQgdHJhbnNwYXJlbnQ7CiAgYm9yZGVyLXRvcDogNHB4IHNvbGlkIHJnYmEoNzIsNzIsNzIsMC42KTsKICB0b3A6IDQwJTsKfQoubnVtSW5wdXRXcmFwcGVyIHNwYW4gc3ZnIHsKICB3aWR0aDogaW5oZXJpdDsKICBoZWlnaHQ6IGF1dG87Cn0KLm51bUlucHV0V3JhcHBlciBzcGFuIHN2ZyBwYXRoIHsKICBmaWxsOiByZ2JhKDkwLDk3LDExMywwLjUpOwp9Ci5udW1JbnB1dFdyYXBwZXI6aG92ZXIgewogIGJhY2tncm91bmQ6IHJnYmEoMCwwLDAsMC4wNSk7Cn0KLm51bUlucHV0V3JhcHBlcjpob3ZlciBzcGFuIHsKICBvcGFjaXR5OiAxOwp9Ci5mbGF0cGlja3ItY3VycmVudC1tb250aCB7CiAgZm9udC1zaXplOiAxMzUlOwogIGxpbmUtaGVpZ2h0OiBpbmhlcml0OwogIGZvbnQtd2VpZ2h0OiAzMDA7CiAgY29sb3I6IGluaGVyaXQ7CiAgcG9zaXRpb246IGFic29sdXRlOwogIHdpZHRoOiA3NSU7CiAgbGVmdDogMTIuNSU7CiAgcGFkZGluZzogNy40OHB4IDAgMCAwOwogIGxpbmUtaGVpZ2h0OiAxOwogIGhlaWdodDogMzRweDsKICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgdGV4dC1hbGlnbjogY2VudGVyOwogIC13ZWJraXQtdHJhbnNmb3JtOiB0cmFuc2xhdGUzZCgwcHgsIDBweCwgMHB4KTsKICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlM2QoMHB4LCAwcHgsIDBweCk7Cn0KLmZsYXRwaWNrci1jdXJyZW50LW1vbnRoIHNwYW4uY3VyLW1vbnRoIHsKICBmb250LWZhbWlseTogaW5oZXJpdDsKICBmb250LXdlaWdodDogNzAwOwogIGNvbG9yOiBpbmhlcml0OwogIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICBtYXJnaW4tbGVmdDogMC41Y2g7CiAgcGFkZGluZzogMDsKfQouZmxhdHBpY2tyLWN1cnJlbnQtbW9udGggc3Bhbi5jdXItbW9udGg6aG92ZXIgewogIGJhY2tncm91bmQ6IHJnYmEoMCwwLDAsMC4wNSk7Cn0KLmZsYXRwaWNrci1jdXJyZW50LW1vbnRoIC5udW1JbnB1dFdyYXBwZXIgewogIHdpZHRoOiA2Y2g7CiAgd2lkdGg6IDdjaFwwOwogIGRpc3BsYXk6IGlubGluZS1ibG9jazsKfQouZmxhdHBpY2tyLWN1cnJlbnQtbW9udGggLm51bUlucHV0V3JhcHBlciBzcGFuLmFycm93VXA6YWZ0ZXIgewogIGJvcmRlci1ib3R0b20tY29sb3I6ICM1YTYxNzE7Cn0KLmZsYXRwaWNrci1jdXJyZW50LW1vbnRoIC5udW1JbnB1dFdyYXBwZXIgc3Bhbi5hcnJvd0Rvd246YWZ0ZXIgewogIGJvcmRlci10b3AtY29sb3I6ICM1YTYxNzE7Cn0KLmZsYXRwaWNrci1jdXJyZW50LW1vbnRoIGlucHV0LmN1ci15ZWFyIHsKICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDsKICAtd2Via2l0LWJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94OwogIGNvbG9yOiBpbmhlcml0OwogIGN1cnNvcjogdGV4dDsKICBwYWRkaW5nOiAwIDAgMCAwLjVjaDsKICBtYXJnaW46IDA7CiAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogIGZvbnQtc2l6ZTogaW5oZXJpdDsKICBmb250LWZhbWlseTogaW5oZXJpdDsKICBmb250LXdlaWdodDogMzAwOwogIGxpbmUtaGVpZ2h0OiBpbmhlcml0OwogIGhlaWdodDogYXV0bzsKICBib3JkZXI6IDA7CiAgYm9yZGVyLXJhZGl1czogMDsKICB2ZXJ0aWNhbC1hbGlnbjogaW5pdGlhbDsKICAtd2Via2l0LWFwcGVhcmFuY2U6IHRleHRmaWVsZDsKICAtbW96LWFwcGVhcmFuY2U6IHRleHRmaWVsZDsKICBhcHBlYXJhbmNlOiB0ZXh0ZmllbGQ7Cn0KLmZsYXRwaWNrci1jdXJyZW50LW1vbnRoIGlucHV0LmN1ci15ZWFyOmZvY3VzIHsKICBvdXRsaW5lOiAwOwp9Ci5mbGF0cGlja3ItY3VycmVudC1tb250aCBpbnB1dC5jdXIteWVhcltkaXNhYmxlZF0sCi5mbGF0cGlja3ItY3VycmVudC1tb250aCBpbnB1dC5jdXIteWVhcltkaXNhYmxlZF06aG92ZXIgewogIGZvbnQtc2l6ZTogMTAwJTsKICBjb2xvcjogcmdiYSg5MCw5NywxMTMsMC41KTsKICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDsKICBwb2ludGVyLWV2ZW50czogbm9uZTsKfQouZmxhdHBpY2tyLWN1cnJlbnQtbW9udGggLmZsYXRwaWNrci1tb250aERyb3Bkb3duLW1vbnRocyB7CiAgYXBwZWFyYW5jZTogbWVudWxpc3Q7CiAgYmFja2dyb3VuZDogI2VjZWVmMTsKICBib3JkZXI6IG5vbmU7CiAgYm9yZGVyLXJhZGl1czogMDsKICBib3gtc2l6aW5nOiBib3JkZXItYm94OwogIGNvbG9yOiBpbmhlcml0OwogIGN1cnNvcjogcG9pbnRlcjsKICBmb250LXNpemU6IGluaGVyaXQ7CiAgZm9udC1mYW1pbHk6IGluaGVyaXQ7CiAgZm9udC13ZWlnaHQ6IDMwMDsKICBoZWlnaHQ6IGF1dG87CiAgbGluZS1oZWlnaHQ6IGluaGVyaXQ7CiAgbWFyZ2luOiAtMXB4IDAgMCAwOwogIG91dGxpbmU6IG5vbmU7CiAgcGFkZGluZzogMCAwIDAgMC41Y2g7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIHZlcnRpY2FsLWFsaWduOiBpbml0aWFsOwogIC13ZWJraXQtYm94LXNpemluZzogYm9yZGVyLWJveDsKICAtd2Via2l0LWFwcGVhcmFuY2U6IG1lbnVsaXN0OwogIC1tb3otYXBwZWFyYW5jZTogbWVudWxpc3Q7CiAgd2lkdGg6IGF1dG87Cn0KLmZsYXRwaWNrci1jdXJyZW50LW1vbnRoIC5mbGF0cGlja3ItbW9udGhEcm9wZG93bi1tb250aHM6Zm9jdXMsCi5mbGF0cGlja3ItY3VycmVudC1tb250aCAuZmxhdHBpY2tyLW1vbnRoRHJvcGRvd24tbW9udGhzOmFjdGl2ZSB7CiAgb3V0bGluZTogbm9uZTsKfQouZmxhdHBpY2tyLWN1cnJlbnQtbW9udGggLmZsYXRwaWNrci1tb250aERyb3Bkb3duLW1vbnRoczpob3ZlciB7CiAgYmFja2dyb3VuZDogcmdiYSgwLDAsMCwwLjA1KTsKfQouZmxhdHBpY2tyLWN1cnJlbnQtbW9udGggLmZsYXRwaWNrci1tb250aERyb3Bkb3duLW1vbnRocyAuZmxhdHBpY2tyLW1vbnRoRHJvcGRvd24tbW9udGggewogIGJhY2tncm91bmQtY29sb3I6ICNlY2VlZjE7CiAgb3V0bGluZTogbm9uZTsKICBwYWRkaW5nOiAwOwp9Ci5mbGF0cGlja3Itd2Vla2RheXMgewogIGJhY2tncm91bmQ6ICNlY2VlZjE7CiAgdGV4dC1hbGlnbjogY2VudGVyOwogIG92ZXJmbG93OiBoaWRkZW47CiAgd2lkdGg6IDEwMCU7CiAgZGlzcGxheTogLXdlYmtpdC1ib3g7CiAgZGlzcGxheTogLXdlYmtpdC1mbGV4OwogIGRpc3BsYXk6IC1tcy1mbGV4Ym94OwogIGRpc3BsYXk6IGZsZXg7CiAgLXdlYmtpdC1ib3gtYWxpZ246IGNlbnRlcjsKICAtd2Via2l0LWFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgIC1tcy1mbGV4LWFsaWduOiBjZW50ZXI7CiAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogIGhlaWdodDogMjhweDsKfQouZmxhdHBpY2tyLXdlZWtkYXlzIC5mbGF0cGlja3Itd2Vla2RheWNvbnRhaW5lciB7CiAgZGlzcGxheTogLXdlYmtpdC1ib3g7CiAgZGlzcGxheTogLXdlYmtpdC1mbGV4OwogIGRpc3BsYXk6IC1tcy1mbGV4Ym94OwogIGRpc3BsYXk6IGZsZXg7CiAgLXdlYmtpdC1ib3gtZmxleDogMTsKICAtd2Via2l0LWZsZXg6IDE7CiAgICAgIC1tcy1mbGV4OiAxOwogICAgICAgICAgZmxleDogMTsKfQpzcGFuLmZsYXRwaWNrci13ZWVrZGF5IHsKICBjdXJzb3I6IGRlZmF1bHQ7CiAgZm9udC1zaXplOiA5MCU7CiAgYmFja2dyb3VuZDogI2VjZWVmMTsKICBjb2xvcjogIzVhNjE3MTsKICBsaW5lLWhlaWdodDogMTsKICBtYXJnaW46IDA7CiAgdGV4dC1hbGlnbjogY2VudGVyOwogIGRpc3BsYXk6IGJsb2NrOwogIC13ZWJraXQtYm94LWZsZXg6IDE7CiAgLXdlYmtpdC1mbGV4OiAxOwogICAgICAtbXMtZmxleDogMTsKICAgICAgICAgIGZsZXg6IDE7CiAgZm9udC13ZWlnaHQ6IGJvbGRlcjsKfQouZGF5Q29udGFpbmVyLAouZmxhdHBpY2tyLXdlZWtzIHsKICBwYWRkaW5nOiAxcHggMCAwIDA7Cn0KLmZsYXRwaWNrci1kYXlzIHsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgb3ZlcmZsb3c6IGhpZGRlbjsKICBkaXNwbGF5OiAtd2Via2l0LWJveDsKICBkaXNwbGF5OiAtd2Via2l0LWZsZXg7CiAgZGlzcGxheTogLW1zLWZsZXhib3g7CiAgZGlzcGxheTogZmxleDsKICAtd2Via2l0LWJveC1hbGlnbjogc3RhcnQ7CiAgLXdlYmtpdC1hbGlnbi1pdGVtczogZmxleC1zdGFydDsKICAgICAgLW1zLWZsZXgtYWxpZ246IHN0YXJ0OwogICAgICAgICAgYWxpZ24taXRlbXM6IGZsZXgtc3RhcnQ7CiAgd2lkdGg6IDMwNy44NzVweDsKICBib3JkZXItbGVmdDogMXB4IHNvbGlkICNlY2VlZjE7CiAgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgI2VjZWVmMTsKfQouZmxhdHBpY2tyLWRheXM6Zm9jdXMgewogIG91dGxpbmU6IDA7Cn0KLmRheUNvbnRhaW5lciB7CiAgcGFkZGluZzogMDsKICBvdXRsaW5lOiAwOwogIHRleHQtYWxpZ246IGxlZnQ7CiAgd2lkdGg6IDMwNy44NzVweDsKICBtaW4td2lkdGg6IDMwNy44NzVweDsKICBtYXgtd2lkdGg6IDMwNy44NzVweDsKICAtd2Via2l0LWJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94OwogIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICBkaXNwbGF5OiAtbXMtZmxleGJveDsKICBkaXNwbGF5OiAtd2Via2l0LWJveDsKICBkaXNwbGF5OiAtd2Via2l0LWZsZXg7CiAgZGlzcGxheTogZmxleDsKICAtd2Via2l0LWZsZXgtd3JhcDogd3JhcDsKICAgICAgICAgIGZsZXgtd3JhcDogd3JhcDsKICAtbXMtZmxleC13cmFwOiB3cmFwOwogIC1tcy1mbGV4LXBhY2s6IGp1c3RpZnk7CiAgLXdlYmtpdC1qdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWFyb3VuZDsKICAgICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYXJvdW5kOwogIC13ZWJraXQtdHJhbnNmb3JtOiB0cmFuc2xhdGUzZCgwcHgsIDBweCwgMHB4KTsKICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlM2QoMHB4LCAwcHgsIDBweCk7CiAgb3BhY2l0eTogMTsKfQouZGF5Q29udGFpbmVyICsgLmRheUNvbnRhaW5lciB7CiAgLXdlYmtpdC1ib3gtc2hhZG93OiAtMXB4IDAgMCAjZWNlZWYxOwogICAgICAgICAgYm94LXNoYWRvdzogLTFweCAwIDAgI2VjZWVmMTsKfQouZmxhdHBpY2tyLWRheSB7CiAgYmFja2dyb3VuZDogbm9uZTsKICBib3JkZXI6IDFweCBzb2xpZCB0cmFuc3BhcmVudDsKICBib3JkZXItcmFkaXVzOiAxNTBweDsKICAtd2Via2l0LWJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94OwogIGNvbG9yOiAjNDg0ODQ4OwogIGN1cnNvcjogcG9pbnRlcjsKICBmb250LXdlaWdodDogNDAwOwogIHdpZHRoOiAxNC4yODU3MTQzJTsKICAtd2Via2l0LWZsZXgtYmFzaXM6IDE0LjI4NTcxNDMlOwogICAgICAtbXMtZmxleC1wcmVmZXJyZWQtc2l6ZTogMTQuMjg1NzE0MyU7CiAgICAgICAgICBmbGV4LWJhc2lzOiAxNC4yODU3MTQzJTsKICBtYXgtd2lkdGg6IDM5cHg7CiAgaGVpZ2h0OiAzOXB4OwogIGxpbmUtaGVpZ2h0OiAzOXB4OwogIG1hcmdpbjogMDsKICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIC13ZWJraXQtYm94LXBhY2s6IGNlbnRlcjsKICAtd2Via2l0LWp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgICAtbXMtZmxleC1wYWNrOiBjZW50ZXI7CiAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICB0ZXh0LWFsaWduOiBjZW50ZXI7Cn0KLmZsYXRwaWNrci1kYXkuaW5SYW5nZSwKLmZsYXRwaWNrci1kYXkucHJldk1vbnRoRGF5LmluUmFuZ2UsCi5mbGF0cGlja3ItZGF5Lm5leHRNb250aERheS5pblJhbmdlLAouZmxhdHBpY2tyLWRheS50b2RheS5pblJhbmdlLAouZmxhdHBpY2tyLWRheS5wcmV2TW9udGhEYXkudG9kYXkuaW5SYW5nZSwKLmZsYXRwaWNrci1kYXkubmV4dE1vbnRoRGF5LnRvZGF5LmluUmFuZ2UsCi5mbGF0cGlja3ItZGF5OmhvdmVyLAouZmxhdHBpY2tyLWRheS5wcmV2TW9udGhEYXk6aG92ZXIsCi5mbGF0cGlja3ItZGF5Lm5leHRNb250aERheTpob3ZlciwKLmZsYXRwaWNrci1kYXk6Zm9jdXMsCi5mbGF0cGlja3ItZGF5LnByZXZNb250aERheTpmb2N1cywKLmZsYXRwaWNrci1kYXkubmV4dE1vbnRoRGF5OmZvY3VzIHsKICBjdXJzb3I6IHBvaW50ZXI7CiAgb3V0bGluZTogMDsKICBiYWNrZ3JvdW5kOiAjZTJlMmUyOwogIGJvcmRlci1jb2xvcjogI2UyZTJlMjsKfQouZmxhdHBpY2tyLWRheS50b2RheSB7CiAgYm9yZGVyLWNvbG9yOiAjYmJiOwp9Ci5mbGF0cGlja3ItZGF5LnRvZGF5OmhvdmVyLAouZmxhdHBpY2tyLWRheS50b2RheTpmb2N1cyB7CiAgYm9yZGVyLWNvbG9yOiAjYmJiOwogIGJhY2tncm91bmQ6ICNiYmI7CiAgY29sb3I6ICNmZmY7Cn0KLmZsYXRwaWNrci1kYXkuc2VsZWN0ZWQsCi5mbGF0cGlja3ItZGF5LnN0YXJ0UmFuZ2UsCi5mbGF0cGlja3ItZGF5LmVuZFJhbmdlLAouZmxhdHBpY2tyLWRheS5zZWxlY3RlZC5pblJhbmdlLAouZmxhdHBpY2tyLWRheS5zdGFydFJhbmdlLmluUmFuZ2UsCi5mbGF0cGlja3ItZGF5LmVuZFJhbmdlLmluUmFuZ2UsCi5mbGF0cGlja3ItZGF5LnNlbGVjdGVkOmZvY3VzLAouZmxhdHBpY2tyLWRheS5zdGFydFJhbmdlOmZvY3VzLAouZmxhdHBpY2tyLWRheS5lbmRSYW5nZTpmb2N1cywKLmZsYXRwaWNrci1kYXkuc2VsZWN0ZWQ6aG92ZXIsCi5mbGF0cGlja3ItZGF5LnN0YXJ0UmFuZ2U6aG92ZXIsCi5mbGF0cGlja3ItZGF5LmVuZFJhbmdlOmhvdmVyLAouZmxhdHBpY2tyLWRheS5zZWxlY3RlZC5wcmV2TW9udGhEYXksCi5mbGF0cGlja3ItZGF5LnN0YXJ0UmFuZ2UucHJldk1vbnRoRGF5LAouZmxhdHBpY2tyLWRheS5lbmRSYW5nZS5wcmV2TW9udGhEYXksCi5mbGF0cGlja3ItZGF5LnNlbGVjdGVkLm5leHRNb250aERheSwKLmZsYXRwaWNrci1kYXkuc3RhcnRSYW5nZS5uZXh0TW9udGhEYXksCi5mbGF0cGlja3ItZGF5LmVuZFJhbmdlLm5leHRNb250aERheSB7CiAgYmFja2dyb3VuZDogI2ZmNWE1ZjsKICAtd2Via2l0LWJveC1zaGFkb3c6IG5vbmU7CiAgICAgICAgICBib3gtc2hhZG93OiBub25lOwogIGNvbG9yOiAjZmZmOwogIGJvcmRlci1jb2xvcjogI2ZmNWE1ZjsKfQouZmxhdHBpY2tyLWRheS5zZWxlY3RlZC5zdGFydFJhbmdlLAouZmxhdHBpY2tyLWRheS5zdGFydFJhbmdlLnN0YXJ0UmFuZ2UsCi5mbGF0cGlja3ItZGF5LmVuZFJhbmdlLnN0YXJ0UmFuZ2UgewogIGJvcmRlci1yYWRpdXM6IDUwcHggMCAwIDUwcHg7Cn0KLmZsYXRwaWNrci1kYXkuc2VsZWN0ZWQuZW5kUmFuZ2UsCi5mbGF0cGlja3ItZGF5LnN0YXJ0UmFuZ2UuZW5kUmFuZ2UsCi5mbGF0cGlja3ItZGF5LmVuZFJhbmdlLmVuZFJhbmdlIHsKICBib3JkZXItcmFkaXVzOiAwIDUwcHggNTBweCAwOwp9Ci5mbGF0cGlja3ItZGF5LnNlbGVjdGVkLnN0YXJ0UmFuZ2UgKyAuZW5kUmFuZ2U6bm90KDpudGgtY2hpbGQoN24rMSkpLAouZmxhdHBpY2tyLWRheS5zdGFydFJhbmdlLnN0YXJ0UmFuZ2UgKyAuZW5kUmFuZ2U6bm90KDpudGgtY2hpbGQoN24rMSkpLAouZmxhdHBpY2tyLWRheS5lbmRSYW5nZS5zdGFydFJhbmdlICsgLmVuZFJhbmdlOm5vdCg6bnRoLWNoaWxkKDduKzEpKSB7CiAgLXdlYmtpdC1ib3gtc2hhZG93OiAtMTBweCAwIDAgI2ZmNWE1ZjsKICAgICAgICAgIGJveC1zaGFkb3c6IC0xMHB4IDAgMCAjZmY1YTVmOwp9Ci5mbGF0cGlja3ItZGF5LnNlbGVjdGVkLnN0YXJ0UmFuZ2UuZW5kUmFuZ2UsCi5mbGF0cGlja3ItZGF5LnN0YXJ0UmFuZ2Uuc3RhcnRSYW5nZS5lbmRSYW5nZSwKLmZsYXRwaWNrci1kYXkuZW5kUmFuZ2Uuc3RhcnRSYW5nZS5lbmRSYW5nZSB7CiAgYm9yZGVyLXJhZGl1czogNTBweDsKfQouZmxhdHBpY2tyLWRheS5pblJhbmdlIHsKICBib3JkZXItcmFkaXVzOiAwOwogIC13ZWJraXQtYm94LXNoYWRvdzogLTVweCAwIDAgI2UyZTJlMiwgNXB4IDAgMCAjZTJlMmUyOwogICAgICAgICAgYm94LXNoYWRvdzogLTVweCAwIDAgI2UyZTJlMiwgNXB4IDAgMCAjZTJlMmUyOwp9Ci5mbGF0cGlja3ItZGF5LmZsYXRwaWNrci1kaXNhYmxlZCwKLmZsYXRwaWNrci1kYXkuZmxhdHBpY2tyLWRpc2FibGVkOmhvdmVyLAouZmxhdHBpY2tyLWRheS5wcmV2TW9udGhEYXksCi5mbGF0cGlja3ItZGF5Lm5leHRNb250aERheSwKLmZsYXRwaWNrci1kYXkubm90QWxsb3dlZCwKLmZsYXRwaWNrci1kYXkubm90QWxsb3dlZC5wcmV2TW9udGhEYXksCi5mbGF0cGlja3ItZGF5Lm5vdEFsbG93ZWQubmV4dE1vbnRoRGF5IHsKICBjb2xvcjogcmdiYSg3Miw3Miw3MiwwLjMpOwogIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50OwogIGJvcmRlci1jb2xvcjogdHJhbnNwYXJlbnQ7CiAgY3Vyc29yOiBkZWZhdWx0Owp9Ci5mbGF0cGlja3ItZGF5LmZsYXRwaWNrci1kaXNhYmxlZCwKLmZsYXRwaWNrci1kYXkuZmxhdHBpY2tyLWRpc2FibGVkOmhvdmVyIHsKICBjdXJzb3I6IG5vdC1hbGxvd2VkOwogIGNvbG9yOiByZ2JhKDcyLDcyLDcyLDAuMSk7Cn0KLmZsYXRwaWNrci1kYXkud2Vlay5zZWxlY3RlZCB7CiAgYm9yZGVyLXJhZGl1czogMDsKICAtd2Via2l0LWJveC1zaGFkb3c6IC01cHggMCAwICNmZjVhNWYsIDVweCAwIDAgI2ZmNWE1ZjsKICAgICAgICAgIGJveC1zaGFkb3c6IC01cHggMCAwICNmZjVhNWYsIDVweCAwIDAgI2ZmNWE1ZjsKfQouZmxhdHBpY2tyLWRheS5oaWRkZW4gewogIHZpc2liaWxpdHk6IGhpZGRlbjsKfQoucmFuZ2VNb2RlIC5mbGF0cGlja3ItZGF5IHsKICBtYXJnaW4tdG9wOiAxcHg7Cn0KLmZsYXRwaWNrci13ZWVrd3JhcHBlciB7CiAgZmxvYXQ6IGxlZnQ7Cn0KLmZsYXRwaWNrci13ZWVrd3JhcHBlciAuZmxhdHBpY2tyLXdlZWtzIHsKICBwYWRkaW5nOiAwIDEycHg7CiAgYm9yZGVyLWxlZnQ6IDFweCBzb2xpZCAjZWNlZWYxOwp9Ci5mbGF0cGlja3Itd2Vla3dyYXBwZXIgLmZsYXRwaWNrci13ZWVrZGF5IHsKICBmbG9hdDogbm9uZTsKICB3aWR0aDogMTAwJTsKICBsaW5lLWhlaWdodDogMjhweDsKfQouZmxhdHBpY2tyLXdlZWt3cmFwcGVyIHNwYW4uZmxhdHBpY2tyLWRheSwKLmZsYXRwaWNrci13ZWVrd3JhcHBlciBzcGFuLmZsYXRwaWNrci1kYXk6aG92ZXIgewogIGRpc3BsYXk6IGJsb2NrOwogIHdpZHRoOiAxMDAlOwogIG1heC13aWR0aDogbm9uZTsKICBjb2xvcjogcmdiYSg3Miw3Miw3MiwwLjMpOwogIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50OwogIGN1cnNvcjogZGVmYXVsdDsKICBib3JkZXI6IG5vbmU7Cn0KLmZsYXRwaWNrci1pbm5lckNvbnRhaW5lciB7CiAgZGlzcGxheTogYmxvY2s7CiAgZGlzcGxheTogLXdlYmtpdC1ib3g7CiAgZGlzcGxheTogLXdlYmtpdC1mbGV4OwogIGRpc3BsYXk6IC1tcy1mbGV4Ym94OwogIGRpc3BsYXk6IGZsZXg7CiAgLXdlYmtpdC1ib3gtc2l6aW5nOiBib3JkZXItYm94OwogICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDsKICBvdmVyZmxvdzogaGlkZGVuOwogIGJhY2tncm91bmQ6ICNmZmY7CiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNlY2VlZjE7Cn0KLmZsYXRwaWNrci1yQ29udGFpbmVyIHsKICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgcGFkZGluZzogMDsKICAtd2Via2l0LWJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94Owp9Ci5mbGF0cGlja3ItdGltZSB7CiAgdGV4dC1hbGlnbjogY2VudGVyOwogIG91dGxpbmU6IDA7CiAgZGlzcGxheTogYmxvY2s7CiAgaGVpZ2h0OiAwOwogIGxpbmUtaGVpZ2h0OiA0MHB4OwogIG1heC1oZWlnaHQ6IDQwcHg7CiAgLXdlYmtpdC1ib3gtc2l6aW5nOiBib3JkZXItYm94OwogICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDsKICBvdmVyZmxvdzogaGlkZGVuOwogIGRpc3BsYXk6IC13ZWJraXQtYm94OwogIGRpc3BsYXk6IC13ZWJraXQtZmxleDsKICBkaXNwbGF5OiAtbXMtZmxleGJveDsKICBkaXNwbGF5OiBmbGV4OwogIGJhY2tncm91bmQ6ICNmZmY7CiAgYm9yZGVyLXJhZGl1czogMCAwIDVweCA1cHg7Cn0KLmZsYXRwaWNrci10aW1lOmFmdGVyIHsKICBjb250ZW50OiAiIjsKICBkaXNwbGF5OiB0YWJsZTsKICBjbGVhcjogYm90aDsKfQouZmxhdHBpY2tyLXRpbWUgLm51bUlucHV0V3JhcHBlciB7CiAgLXdlYmtpdC1ib3gtZmxleDogMTsKICAtd2Via2l0LWZsZXg6IDE7CiAgICAgIC1tcy1mbGV4OiAxOwogICAgICAgICAgZmxleDogMTsKICB3aWR0aDogNDAlOwogIGhlaWdodDogNDBweDsKICBmbG9hdDogbGVmdDsKfQouZmxhdHBpY2tyLXRpbWUgLm51bUlucHV0V3JhcHBlciBzcGFuLmFycm93VXA6YWZ0ZXIgewogIGJvcmRlci1ib3R0b20tY29sb3I6ICM0ODQ4NDg7Cn0KLmZsYXRwaWNrci10aW1lIC5udW1JbnB1dFdyYXBwZXIgc3Bhbi5hcnJvd0Rvd246YWZ0ZXIgewogIGJvcmRlci10b3AtY29sb3I6ICM0ODQ4NDg7Cn0KLmZsYXRwaWNrci10aW1lLmhhc1NlY29uZHMgLm51bUlucHV0V3JhcHBlciB7CiAgd2lkdGg6IDI2JTsKfQouZmxhdHBpY2tyLXRpbWUudGltZTI0aHIgLm51bUlucHV0V3JhcHBlciB7CiAgd2lkdGg6IDQ5JTsKfQouZmxhdHBpY2tyLXRpbWUgaW5wdXQgewogIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50OwogIC13ZWJraXQtYm94LXNoYWRvdzogbm9uZTsKICAgICAgICAgIGJveC1zaGFkb3c6IG5vbmU7CiAgYm9yZGVyOiAwOwogIGJvcmRlci1yYWRpdXM6IDA7CiAgdGV4dC1hbGlnbjogY2VudGVyOwogIG1hcmdpbjogMDsKICBwYWRkaW5nOiAwOwogIGhlaWdodDogaW5oZXJpdDsKICBsaW5lLWhlaWdodDogaW5oZXJpdDsKICBjb2xvcjogIzQ4NDg0ODsKICBmb250LXNpemU6IDE0cHg7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIC13ZWJraXQtYm94LXNpemluZzogYm9yZGVyLWJveDsKICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgLXdlYmtpdC1hcHBlYXJhbmNlOiB0ZXh0ZmllbGQ7CiAgLW1vei1hcHBlYXJhbmNlOiB0ZXh0ZmllbGQ7CiAgYXBwZWFyYW5jZTogdGV4dGZpZWxkOwp9Ci5mbGF0cGlja3ItdGltZSBpbnB1dC5mbGF0cGlja3ItaG91ciB7CiAgZm9udC13ZWlnaHQ6IGJvbGQ7Cn0KLmZsYXRwaWNrci10aW1lIGlucHV0LmZsYXRwaWNrci1taW51dGUsCi5mbGF0cGlja3ItdGltZSBpbnB1dC5mbGF0cGlja3Itc2Vjb25kIHsKICBmb250LXdlaWdodDogNDAwOwp9Ci5mbGF0cGlja3ItdGltZSBpbnB1dDpmb2N1cyB7CiAgb3V0bGluZTogMDsKICBib3JkZXI6IDA7Cn0KLmZsYXRwaWNrci10aW1lIC5mbGF0cGlja3ItdGltZS1zZXBhcmF0b3IsCi5mbGF0cGlja3ItdGltZSAuZmxhdHBpY2tyLWFtLXBtIHsKICBoZWlnaHQ6IGluaGVyaXQ7CiAgZmxvYXQ6IGxlZnQ7CiAgbGluZS1oZWlnaHQ6IGluaGVyaXQ7CiAgY29sb3I6ICM0ODQ4NDg7CiAgZm9udC13ZWlnaHQ6IGJvbGQ7CiAgd2lkdGg6IDIlOwogIC13ZWJraXQtdXNlci1zZWxlY3Q6IG5vbmU7CiAgICAgLW1vei11c2VyLXNlbGVjdDogbm9uZTsKICAgICAgLW1zLXVzZXItc2VsZWN0OiBub25lOwogICAgICAgICAgdXNlci1zZWxlY3Q6IG5vbmU7CiAgLXdlYmtpdC1hbGlnbi1zZWxmOiBjZW50ZXI7CiAgICAgIC1tcy1mbGV4LWl0ZW0tYWxpZ246IGNlbnRlcjsKICAgICAgICAgIGFsaWduLXNlbGY6IGNlbnRlcjsKfQouZmxhdHBpY2tyLXRpbWUgLmZsYXRwaWNrci1hbS1wbSB7CiAgb3V0bGluZTogMDsKICB3aWR0aDogMTglOwogIGN1cnNvcjogcG9pbnRlcjsKICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgZm9udC13ZWlnaHQ6IDQwMDsKfQouZmxhdHBpY2tyLXRpbWUgaW5wdXQ6aG92ZXIsCi5mbGF0cGlja3ItdGltZSAuZmxhdHBpY2tyLWFtLXBtOmhvdmVyLAouZmxhdHBpY2tyLXRpbWUgaW5wdXQ6Zm9jdXMsCi5mbGF0cGlja3ItdGltZSAuZmxhdHBpY2tyLWFtLXBtOmZvY3VzIHsKICBiYWNrZ3JvdW5kOiAjZWFlYWVhOwp9Ci5mbGF0cGlja3ItaW5wdXRbcmVhZG9ubHldIHsKICBjdXJzb3I6IHBvaW50ZXI7Cn0KQC13ZWJraXQta2V5ZnJhbWVzIGZwRmFkZUluRG93biB7CiAgZnJvbSB7CiAgICBvcGFjaXR5OiAwOwogICAgLXdlYmtpdC10cmFuc2Zvcm06IHRyYW5zbGF0ZTNkKDAsIC0yMHB4LCAwKTsKICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUzZCgwLCAtMjBweCwgMCk7CiAgfQogIHRvIHsKICAgIG9wYWNpdHk6IDE7CiAgICAtd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlM2QoMCwgMCwgMCk7CiAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlM2QoMCwgMCwgMCk7CiAgfQp9CkBrZXlmcmFtZXMgZnBGYWRlSW5Eb3duIHsKICBmcm9tIHsKICAgIG9wYWNpdHk6IDA7CiAgICAtd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlM2QoMCwgLTIwcHgsIDApOwogICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZTNkKDAsIC0yMHB4LCAwKTsKICB9CiAgdG8gewogICAgb3BhY2l0eTogMTsKICAgIC13ZWJraXQtdHJhbnNmb3JtOiB0cmFuc2xhdGUzZCgwLCAwLCAwKTsKICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUzZCgwLCAwLCAwKTsKICB9Cn0Kc3Bhbi5mbGF0cGlja3ItZGF5LnNlbGVjdGVkIHsKICBmb250LXdlaWdodDogYm9sZDsKfQo=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPBody>
          <HTTPPropertySet>
            <HTTPProperty name="StreamID">5</HTTPProperty>
            <HTTPProperty name="TotalHeadersSize">113</HTTPProperty>
          </HTTPPropertySet>
        </HTTPResponse>
      </HTTPTask>
    </HTTPTask>
    <HTTPTask id="6" hostname="cdnjs.cloudflare.com" path="/ajax/libs/font-awesome/6.3.0/css/all.min.css" url="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css" ip="104.17.24.14" port="443" client_ip="192.168.0.112" client_port="64266" connectionId="2396" origin="HTML" encodingType="ANSI" ordinal="5" startDateTime="2024-02-16T16:37:19.998+05:30" startTime="2869" endTime="3053" blockedTime="-1" dnsTime="9" connectTime="112" sendTime="4294967295" waitTime="4294967295" receiveTime="6" sslNegotiateTime="63" responseBodySize="21133">
      <HTTPRequest method="GET">
        <HTTPHeaders>
          <HTTPHeaderEntity name=":method" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0VU</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name=":scheme" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cHM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name=":path" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>L2FqYXgvbGlicy9mb250LWF3ZXNvbWUvNi4zLjAvY3NzL2FsbC5taW4uY3Nz</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name=":authority" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Y2RuanMuY2xvdWRmbGFyZS5jb20=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Referer" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cHM6Ly9kZXYuYmx1ZWFsZ28uY29tL3NtYXJ0Zm9ybXVwL2xvYWRpbmRleD9vcHBvcnR1bml0eUlkPTAwNjBvMDAwMDFlU0lKMEFBTyZjdXN0b21lcmlkPWN1c3QxMDA1JmFjY2Vzc3Rva2VuPVJGcFNRVlVJZ2Q0WV9vWU5MODFuYUV4VkxBWWdLUXQ3</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Language" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZW4tVVMsZW47cT0wLjk=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="User-Agent" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEyMS4wLjAuMCBTYWZhcmkvNTM3LjM2</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Encoding" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ki8q</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Om1ldGhvZDogR0VUDQo6c2NoZW1lOiBodHRwcw0KOnBhdGg6IC9hamF4L2xpYnMvZm9udC1hd2Vzb21lLzYuMy4wL2Nzcy9hbGwubWluLmNzcw0KOmF1dGhvcml0eTogY2RuanMuY2xvdWRmbGFyZS5jb20NClJlZmVyZXI6IGh0dHBzOi8vZGV2LmJsdWVhbGdvLmNvbS9zbWFydGZvcm11cC9sb2FkaW5kZXg/b3Bwb3J0dW5pdHlJZD0wMDYwbzAwMDAxZVNJSjBBQU8mY3VzdG9tZXJpZD1jdXN0MTAwNSZhY2Nlc3N0b2tlbj1SRnBTUVZVSWdkNFlfb1lOTDgxbmFFeFZMQVlnS1F0Nw0KQWNjZXB0LUxhbmd1YWdlOiBlbi1VUyxlbjtxPTAuOQ0KVXNlci1BZ2VudDogTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEyMS4wLjAuMCBTYWZhcmkvNTM3LjM2DQpBY2NlcHQtRW5jb2Rpbmc6IGd6aXAsIGRlZmxhdGUNCkFjY2VwdDogKi8qDQoNCg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPPropertySet>
          <HTTPProperty name="StreamID">1</HTTPProperty>
          <HTTPProperty name="TotalHeadersSize">272</HTTPProperty>
        </HTTPPropertySet>
      </HTTPRequest>
      <HTTPResponse>
        <contentLenght>21631</contentLenght>
        <HTTPHeaders>
          <HTTPHeaderEntity name="Status" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MjAw</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="date" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>RnJpLCAxNiBGZWIgMjAyNCAxMTowNzoyMCBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="content-type" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>dGV4dC9jc3M7IGNoYXJzZXQ9dXRmLTg=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="content-length" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MjE2MzE=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="access-control-allow-origin" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Kg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="cache-control" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>cHVibGljLCBtYXgtYWdlPTMwNjcyMDAw</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="content-encoding" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="etag" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>IjYzZTJhZjM0LTU0N2Yi</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="last-modified" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VHVlLCAwNyBGZWIgMjAyMyAyMDowNjoxMiBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="cf-cdnjs-via" index="9">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Y2Z3b3JrZXIva3Y=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="cross-origin-resource-policy" index="10">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Y3Jvc3Mtb3JpZ2lu</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="timing-allow-origin" index="11">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Kg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="x-content-type-options" index="12">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bm9zbmlmZg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="vary" index="13">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>QWNjZXB0LUVuY29kaW5n</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="cf-cache-status" index="14">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SElU</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="age" index="15">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>NDE4OTgxNQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="expires" index="16">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>V2VkLCAwNSBGZWIgMjAyNSAxMTowNzoyMCBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="accept-ranges" index="17">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ynl0ZXM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="report-to" index="18">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>eyJlbmRwb2ludHMiOlt7InVybCI6Imh0dHBzOlwvXC9hLm5lbC5jbG91ZGZsYXJlLmNvbVwvcmVwb3J0XC92Mz9zPUNtdDgwVzA5QWtScHExVlE4SFBqV1dpWjQwaEx5aXBtZGo5SElPOU51bWV1WnNnUlFlb0w1OXNjRG1lJTJCZmlKdmpLSGNLeFlEQTJJRkZKY1ZoRSUyRldUVWVSQ1dwTlBabjlqTUdZWnNIM2trQ2RabWdPdUVibzQlMkZiTnNVZHclMkJtSTdpUFFrMHhOSCJ9XSwiZ3JvdXAiOiJjZi1uZWwiLCJtYXhfYWdlIjo2MDQ4MDB9</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="nel" index="19">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>eyJzdWNjZXNzX2ZyYWN0aW9uIjowLjAxLCJyZXBvcnRfdG8iOiJjZi1uZWwiLCJtYXhfYWdlIjo2MDQ4MDB9</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="strict-transport-security" index="20">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bWF4LWFnZT0xNTc4MDAwMA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="server" index="21">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Y2xvdWRmbGFyZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="cf-ray" index="22">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ODU2NTUzOGE4ZjU2MmU4Zi1CT00=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="alt-svc" index="23">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aDM9Ijo0NDMiOyBtYT04NjQwMA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SFRUUC8yLjAgMjAwDQpTdGF0dXM6IDIwMA0KZGF0ZTogRnJpLCAxNiBGZWIgMjAyNCAxMTowNzoyMCBHTVQNCmNvbnRlbnQtdHlwZTogdGV4dC9jc3M7IGNoYXJzZXQ9dXRmLTgNCmNvbnRlbnQtbGVuZ3RoOiAyMTYzMQ0KYWNjZXNzLWNvbnRyb2wtYWxsb3ctb3JpZ2luOiAqDQpjYWNoZS1jb250cm9sOiBwdWJsaWMsIG1heC1hZ2U9MzA2NzIwMDANCmNvbnRlbnQtZW5jb2Rpbmc6IGd6aXANCmV0YWc6ICI2M2UyYWYzNC01NDdmIg0KbGFzdC1tb2RpZmllZDogVHVlLCAwNyBGZWIgMjAyMyAyMDowNjoxMiBHTVQNCmNmLWNkbmpzLXZpYTogY2Z3b3JrZXIva3YNCmNyb3NzLW9yaWdpbi1yZXNvdXJjZS1wb2xpY3k6IGNyb3NzLW9yaWdpbg0KdGltaW5nLWFsbG93LW9yaWdpbjogKg0KeC1jb250ZW50LXR5cGUtb3B0aW9uczogbm9zbmlmZg0KdmFyeTogQWNjZXB0LUVuY29kaW5nDQpjZi1jYWNoZS1zdGF0dXM6IEhJVA0KYWdlOiA0MTg5ODE1DQpleHBpcmVzOiBXZWQsIDA1IEZlYiAyMDI1IDExOjA3OjIwIEdNVA0KYWNjZXB0LXJhbmdlczogYnl0ZXMNCnJlcG9ydC10bzogeyJlbmRwb2ludHMiOlt7InVybCI6Imh0dHBzOlwvXC9hLm5lbC5jbG91ZGZsYXJlLmNvbVwvcmVwb3J0XC92Mz9zPUNtdDgwVzA5QWtScHExVlE4SFBqV1dpWjQwaEx5aXBtZGo5SElPOU51bWV1WnNnUlFlb0w1OXNjRG1lJTJCZmlKdmpLSGNLeFlEQTJJRkZKY1ZoRSUyRldUVWVSQ1dwTlBabjlqTUdZWnNIM2trQ2RabWdPdUVibzQlMkZiTnNVZHclMkJtSTdpUFFrMHhOSCJ9XSwiZ3JvdXAiOiJjZi1uZWwiLCJtYXhfYWdlIjo2MDQ4MDB9DQpuZWw6IHsic3VjY2Vzc19mcmFjdGlvbiI6MC4wMSwicmVwb3J0X3RvIjoiY2YtbmVsIiwibWF4X2FnZSI6NjA0ODAwfQ0Kc3RyaWN0LXRyYW5zcG9ydC1zZWN1cml0eTogbWF4LWFnZT0xNTc4MDAwMA0Kc2VydmVyOiBjbG91ZGZsYXJlDQpjZi1yYXk6IDg1NjU1MzhhOGY1NjJlOGYtQk9NDQphbHQtc3ZjOiBoMz0iOjQ0MyI7IG1hPTg2NDAwDQoNCg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPBody>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>LyohCiAqIEZvbnQgQXdlc29tZSBGcmVlIDYuMy4wIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tCiAqIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgKEljb25zOiBDQyBCWSA0LjAsIEZvbnRzOiBTSUwgT0ZMIDEuMSwgQ29kZTogTUlUIExpY2Vuc2UpCiAqIENvcHlyaWdodCAyMDIzIEZvbnRpY29ucywgSW5jLgogKi8KLmZhe2ZvbnQtZmFtaWx5OnZhcigtLWZhLXN0eWxlLWZhbWlseSwiRm9udCBBd2Vzb21lIDYgRnJlZSIpO2ZvbnQtd2VpZ2h0OnZhcigtLWZhLXN0eWxlLDkwMCl9LmZhLC5mYS1icmFuZHMsLmZhLWNsYXNzaWMsLmZhLXJlZ3VsYXIsLmZhLXNoYXJwLC5mYS1zb2xpZCwuZmFiLC5mYXIsLmZhc3stbW96LW9zeC1mb250LXNtb290aGluZzpncmF5c2NhbGU7LXdlYmtpdC1mb250LXNtb290aGluZzphbnRpYWxpYXNlZDtkaXNwbGF5OnZhcigtLWZhLWRpc3BsYXksaW5saW5lLWJsb2NrKTtmb250LXN0eWxlOm5vcm1hbDtmb250LXZhcmlhbnQ6bm9ybWFsO2xpbmUtaGVpZ2h0OjE7dGV4dC1yZW5kZXJpbmc6YXV0b30uZmEtY2xhc3NpYywuZmEtcmVndWxhciwuZmEtc29saWQsLmZhciwuZmFze2ZvbnQtZmFtaWx5OiJGb250IEF3ZXNvbWUgNiBGcmVlIn0uZmEtYnJhbmRzLC5mYWJ7Zm9udC1mYW1pbHk6IkZvbnQgQXdlc29tZSA2IEJyYW5kcyJ9LmZhLTF4e2ZvbnQtc2l6ZToxZW19LmZhLTJ4e2ZvbnQtc2l6ZToyZW19LmZhLTN4e2ZvbnQtc2l6ZTozZW19LmZhLTR4e2ZvbnQtc2l6ZTo0ZW19LmZhLTV4e2ZvbnQtc2l6ZTo1ZW19LmZhLTZ4e2ZvbnQtc2l6ZTo2ZW19LmZhLTd4e2ZvbnQtc2l6ZTo3ZW19LmZhLTh4e2ZvbnQtc2l6ZTo4ZW19LmZhLTl4e2ZvbnQtc2l6ZTo5ZW19LmZhLTEweHtmb250LXNpemU6MTBlbX0uZmEtMnhze2ZvbnQtc2l6ZTouNjI1ZW07bGluZS1oZWlnaHQ6LjFlbTt2ZXJ0aWNhbC1hbGlnbjouMjI1ZW19LmZhLXhze2ZvbnQtc2l6ZTouNzVlbTtsaW5lLWhlaWdodDouMDgzMzNlbTt2ZXJ0aWNhbC1hbGlnbjouMTI1ZW19LmZhLXNte2ZvbnQtc2l6ZTouODc1ZW07bGluZS1oZWlnaHQ6LjA3MTQzZW07dmVydGljYWwtYWxpZ246LjA1MzU3ZW19LmZhLWxne2ZvbnQtc2l6ZToxLjI1ZW07bGluZS1oZWlnaHQ6LjA1ZW07dmVydGljYWwtYWxpZ246LS4wNzVlbX0uZmEteGx7Zm9udC1zaXplOjEuNWVtO2xpbmUtaGVpZ2h0Oi4wNDE2N2VtO3ZlcnRpY2FsLWFsaWduOi0uMTI1ZW19LmZhLTJ4bHtmb250LXNpemU6MmVtO2xpbmUtaGVpZ2h0Oi4wMzEyNWVtO3ZlcnRpY2FsLWFsaWduOi0uMTg3NWVtfS5mYS1md3t0ZXh0LWFsaWduOmNlbnRlcjt3aWR0aDoxLjI1ZW19LmZhLXVse2xpc3Qtc3R5bGUtdHlwZTpub25lO21hcmdpbi1sZWZ0OnZhcigtLWZhLWxpLW1hcmdpbiwyLjVlbSk7cGFkZGluZy1sZWZ0OjB9LmZhLXVsPmxpe3Bvc2l0aW9uOnJlbGF0aXZlfS5mYS1saXtsZWZ0OmNhbGModmFyKC0tZmEtbGktd2lkdGgsIDJlbSkqLTEpO3Bvc2l0aW9uOmFic29sdXRlO3RleHQtYWxpZ246Y2VudGVyO3dpZHRoOnZhcigtLWZhLWxpLXdpZHRoLDJlbSk7bGluZS1oZWlnaHQ6aW5oZXJpdH0uZmEtYm9yZGVye2JvcmRlci1yYWRpdXM6dmFyKC0tZmEtYm9yZGVyLXJhZGl1cywuMWVtKTtib3JkZXI6dmFyKC0tZmEtYm9yZGVyLXdpZHRoLC4wOGVtKSB2YXIoLS1mYS1ib3JkZXItc3R5bGUsc29saWQpIHZhcigtLWZhLWJvcmRlci1jb2xvciwjZWVlKTtwYWRkaW5nOnZhcigtLWZhLWJvcmRlci1wYWRkaW5nLC4yZW0gLjI1ZW0gLjE1ZW0pfS5mYS1wdWxsLWxlZnR7ZmxvYXQ6bGVmdDttYXJnaW4tcmlnaHQ6dmFyKC0tZmEtcHVsbC1tYXJnaW4sLjNlbSl9LmZhLXB1bGwtcmlnaHR7ZmxvYXQ6cmlnaHQ7bWFyZ2luLWxlZnQ6dmFyKC0tZmEtcHVsbC1tYXJnaW4sLjNlbSl9LmZhLWJlYXR7LXdlYmtpdC1hbmltYXRpb24tbmFtZTpmYS1iZWF0O2FuaW1hdGlvbi1uYW1lOmZhLWJlYXQ7LXdlYmtpdC1hbmltYXRpb24tZGVsYXk6dmFyKC0tZmEtYW5pbWF0aW9uLWRlbGF5LDBzKTthbmltYXRpb24tZGVsYXk6dmFyKC0tZmEtYW5pbWF0aW9uLWRlbGF5LDBzKTstd2Via2l0LWFuaW1hdGlvbi1kaXJlY3Rpb246dmFyKC0tZmEtYW5pbWF0aW9uLWRpcmVjdGlvbixub3JtYWwpO2FuaW1hdGlvbi1kaXJlY3Rpb246dmFyKC0tZmEtYW5pbWF0aW9uLWRpcmVjdGlvbixub3JtYWwpOy13ZWJraXQtYW5pbWF0aW9uLWR1cmF0aW9uOnZhcigtLWZhLWFuaW1hdGlvbi1kdXJhdGlvbiwxcyk7YW5pbWF0aW9uLWR1cmF0aW9uOnZhcigtLWZhLWFuaW1hdGlvbi1kdXJhdGlvbiwxcyk7LXdlYmtpdC1hbmltYXRpb24taXRlcmF0aW9uLWNvdW50OnZhcigtLWZhLWFuaW1hdGlvbi1pdGVyYXRpb24tY291bnQsaW5maW5pdGUpO2FuaW1hdGlvbi1pdGVyYXRpb24tY291bnQ6dmFyKC0tZmEtYW5pbWF0aW9uLWl0ZXJhdGlvbi1jb3VudCxpbmZpbml0ZSk7LXdlYmtpdC1hbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOnZhcigtLWZhLWFuaW1hdGlvbi10aW1pbmcsZWFzZS1pbi1vdXQpO2FuaW1hdGlvbi10aW1pbmctZnVuY3Rpb246dmFyKC0tZmEtYW5pbWF0aW9uLXRpbWluZyxlYXNlLWluLW91dCl9LmZhLWJvdW5jZXstd2Via2l0LWFuaW1hdGlvbi1uYW1lOmZhLWJvdW5jZTthbmltYXRpb24tbmFtZTpmYS1ib3VuY2U7LXdlYmtpdC1hbmltYXRpb24tZGVsYXk6dmFyKC0tZmEtYW5pbWF0aW9uLWRlbGF5LDBzKTthbmltYXRpb24tZGVsYXk6dmFyKC0tZmEtYW5pbWF0aW9uLWRlbGF5LDBzKTstd2Via2l0LWFuaW1hdGlvbi1kaXJlY3Rpb246dmFyKC0tZmEtYW5pbWF0aW9uLWRpcmVjdGlvbixub3JtYWwpO2FuaW1hdGlvbi1kaXJlY3Rpb246dmFyKC0tZmEtYW5pbWF0aW9uLWRpcmVjdGlvbixub3JtYWwpOy13ZWJraXQtYW5pbWF0aW9uLWR1cmF0aW9uOnZhcigtLWZhLWFuaW1hdGlvbi1kdXJhdGlvbiwxcyk7YW5pbWF0aW9uLWR1cmF0aW9uOnZhcigtLWZhLWFuaW1hdGlvbi1kdXJhdGlvbiwxcyk7LXdlYmtpdC1hbmltYXRpb24taXRlcmF0aW9uLWNvdW50OnZhcigtLWZhLWFuaW1hdGlvbi1pdGVyYXRpb24tY291bnQsaW5maW5pdGUpO2FuaW1hdGlvbi1pdGVyYXRpb24tY291bnQ6dmFyKC0tZmEtYW5pbWF0aW9uLWl0ZXJhdGlvbi1jb3VudCxpbmZpbml0ZSk7LXdlYmtpdC1hbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOnZhcigtLWZhLWFuaW1hdGlvbi10aW1pbmcsY3ViaWMtYmV6aWVyKC4yOCwuODQsLjQyLDEpKTthbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOnZhcigtLWZhLWFuaW1hdGlvbi10aW1pbmcsY3ViaWMtYmV6aWVyKC4yOCwuODQsLjQyLDEpKX0uZmEtZmFkZXstd2Via2l0LWFuaW1hdGlvbi1uYW1lOmZhLWZhZGU7YW5pbWF0aW9uLW5hbWU6ZmEtZmFkZTstd2Via2l0LWFuaW1hdGlvbi1pdGVyYXRpb24tY291bnQ6dmFyKC0tZmEtYW5pbWF0aW9uLWl0ZXJhdGlvbi1jb3VudCxpbmZpbml0ZSk7YW5pbWF0aW9uLWl0ZXJhdGlvbi1jb3VudDp2YXIoLS1mYS1hbmltYXRpb24taXRlcmF0aW9uLWNvdW50LGluZmluaXRlKTstd2Via2l0LWFuaW1hdGlvbi10aW1pbmctZnVuY3Rpb246dmFyKC0tZmEtYW5pbWF0aW9uLXRpbWluZyxjdWJpYy1iZXppZXIoLjQsMCwuNiwxKSk7YW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjp2YXIoLS1mYS1hbmltYXRpb24tdGltaW5nLGN1YmljLWJlemllciguNCwwLC42LDEpKX0uZmEtYmVhdC1mYWRlLC5mYS1mYWRley13ZWJraXQtYW5pbWF0aW9uLWRlbGF5OnZhcigtLWZhLWFuaW1hdGlvbi1kZWxheSwwcyk7YW5pbWF0aW9uLWRlbGF5OnZhcigtLWZhLWFuaW1hdGlvbi1kZWxheSwwcyk7LXdlYmtpdC1hbmltYXRpb24tZGlyZWN0aW9uOnZhcigtLWZhLWFuaW1hdGlvbi1kaXJlY3Rpb24sbm9ybWFsKTthbmltYXRpb24tZGlyZWN0aW9uOnZhcigtLWZhLWFuaW1hdGlvbi1kaXJlY3Rpb24sbm9ybWFsKTstd2Via2l0LWFuaW1hdGlvbi1kdXJhdGlvbjp2YXIoLS1mYS1hbmltYXRpb24tZHVyYXRpb24sMXMpO2FuaW1hdGlvbi1kdXJhdGlvbjp2YXIoLS1mYS1hbmltYXRpb24tZHVyYXRpb24sMXMpfS5mYS1iZWF0LWZhZGV7LXdlYmtpdC1hbmltYXRpb24tbmFtZTpmYS1iZWF0LWZhZGU7YW5pbWF0aW9uLW5hbWU6ZmEtYmVhdC1mYWRlOy13ZWJraXQtYW5pbWF0aW9uLWl0ZXJhdGlvbi1jb3VudDp2YXIoLS1mYS1hbmltYXRpb24taXRlcmF0aW9uLWNvdW50LGluZmluaXRlKTthbmltYXRpb24taXRlcmF0aW9uLWNvdW50OnZhcigtLWZhLWFuaW1hdGlvbi1pdGVyYXRpb24tY291bnQsaW5maW5pdGUpOy13ZWJraXQtYW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjp2YXIoLS1mYS1hbmltYXRpb24tdGltaW5nLGN1YmljLWJlemllciguNCwwLC42LDEpKTthbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOnZhcigtLWZhLWFuaW1hdGlvbi10aW1pbmcsY3ViaWMtYmV6aWVyKC40LDAsLjYsMSkpfS5mYS1mbGlwey13ZWJraXQtYW5pbWF0aW9uLW5hbWU6ZmEtZmxpcDthbmltYXRpb24tbmFtZTpmYS1mbGlwOy13ZWJraXQtYW5pbWF0aW9uLWRlbGF5OnZhcigtLWZhLWFuaW1hdGlvbi1kZWxheSwwcyk7YW5pbWF0aW9uLWRlbGF5OnZhcigtLWZhLWFuaW1hdGlvbi1kZWxheSwwcyk7LXdlYmtpdC1hbmltYXRpb24tZGlyZWN0aW9uOnZhcigtLWZhLWFuaW1hdGlvbi1kaXJlY3Rpb24sbm9ybWFsKTthbmltYXRpb24tZGlyZWN0aW9uOnZhcigtLWZhLWFuaW1hdGlvbi1kaXJlY3Rpb24sbm9ybWFsKTstd2Via2l0LWFuaW1hdGlvbi1kdXJhdGlvbjp2YXIoLS1mYS1hbmltYXRpb24tZHVyYXRpb24sMXMpO2FuaW1hdGlvbi1kdXJhdGlvbjp2YXIoLS1mYS1hbmltYXRpb24tZHVyYXRpb24sMXMpOy13ZWJraXQtYW5pbWF0aW9uLWl0ZXJhdGlvbi1jb3VudDp2YXIoLS1mYS1hbmltYXRpb24taXRlcmF0aW9uLWNvdW50LGluZmluaXRlKTthbmltYXRpb24taXRlcmF0aW9uLWNvdW50OnZhcigtLWZhLWFuaW1hdGlvbi1pdGVyYXRpb24tY291bnQsaW5maW5pdGUpOy13ZWJraXQtYW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjp2YXIoLS1mYS1hbmltYXRpb24tdGltaW5nLGVhc2UtaW4tb3V0KTthbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOnZhcigtLWZhLWFuaW1hdGlvbi10aW1pbmcsZWFzZS1pbi1vdXQpfS5mYS1zaGFrZXstd2Via2l0LWFuaW1hdGlvbi1uYW1lOmZhLXNoYWtlO2FuaW1hdGlvbi1uYW1lOmZhLXNoYWtlOy13ZWJraXQtYW5pbWF0aW9uLWR1cmF0aW9uOnZhcigtLWZhLWFuaW1hdGlvbi1kdXJhdGlvbiwxcyk7YW5pbWF0aW9uLWR1cmF0aW9uOnZhcigtLWZhLWFuaW1hdGlvbi1kdXJhdGlvbiwxcyk7LXdlYmtpdC1hbmltYXRpb24taXRlcmF0aW9uLWNvdW50OnZhcigtLWZhLWFuaW1hdGlvbi1pdGVyYXRpb24tY291bnQsaW5maW5pdGUpO2FuaW1hdGlvbi1pdGVyYXRpb24tY291bnQ6dmFyKC0tZmEtYW5pbWF0aW9uLWl0ZXJhdGlvbi1jb3VudCxpbmZpbml0ZSk7LXdlYmtpdC1hbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOnZhcigtLWZhLWFuaW1hdGlvbi10aW1pbmcsbGluZWFyKTthbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOnZhcigtLWZhLWFuaW1hdGlvbi10aW1pbmcsbGluZWFyKX0uZmEtc2hha2UsLmZhLXNwaW57LXdlYmtpdC1hbmltYXRpb24tZGVsYXk6dmFyKC0tZmEtYW5pbWF0aW9uLWRlbGF5LDBzKTthbmltYXRpb24tZGVsYXk6dmFyKC0tZmEtYW5pbWF0aW9uLWRlbGF5LDBzKTstd2Via2l0LWFuaW1hdGlvbi1kaXJlY3Rpb246dmFyKC0tZmEtYW5pbWF0aW9uLWRpcmVjdGlvbixub3JtYWwpO2FuaW1hdGlvbi1kaXJlY3Rpb246dmFyKC0tZmEtYW5pbWF0aW9uLWRpcmVjdGlvbixub3JtYWwpfS5mYS1zcGluey13ZWJraXQtYW5pbWF0aW9uLW5hbWU6ZmEtc3BpbjthbmltYXRpb24tbmFtZTpmYS1zcGluOy13ZWJraXQtYW5pbWF0aW9uLWR1cmF0aW9uOnZhcigtLWZhLWFuaW1hdGlvbi1kdXJhdGlvbiwycyk7YW5pbWF0aW9uLWR1cmF0aW9uOnZhcigtLWZhLWFuaW1hdGlvbi1kdXJhdGlvbiwycyk7LXdlYmtpdC1hbmltYXRpb24taXRlcmF0aW9uLWNvdW50OnZhcigtLWZhLWFuaW1hdGlvbi1pdGVyYXRpb24tY291bnQsaW5maW5pdGUpO2FuaW1hdGlvbi1pdGVyYXRpb24tY291bnQ6dmFyKC0tZmEtYW5pbWF0aW9uLWl0ZXJhdGlvbi1jb3VudCxpbmZpbml0ZSk7LXdlYmtpdC1hbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOnZhcigtLWZhLWFuaW1hdGlvbi10aW1pbmcsbGluZWFyKTthbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOnZhcigtLWZhLWFuaW1hdGlvbi10aW1pbmcsbGluZWFyKX0uZmEtc3Bpbi1yZXZlcnNley0tZmEtYW5pbWF0aW9uLWRpcmVjdGlvbjpyZXZlcnNlfS5mYS1wdWxzZSwuZmEtc3Bpbi1wdWxzZXstd2Via2l0LWFuaW1hdGlvbi1uYW1lOmZhLXNwaW47YW5pbWF0aW9uLW5hbWU6ZmEtc3Bpbjstd2Via2l0LWFuaW1hdGlvbi1kaXJlY3Rpb246dmFyKC0tZmEtYW5pbWF0aW9uLWRpcmVjdGlvbixub3JtYWwpO2FuaW1hdGlvbi1kaXJlY3Rpb246dmFyKC0tZmEtYW5pbWF0aW9uLWRpcmVjdGlvbixub3JtYWwpOy13ZWJraXQtYW5pbWF0aW9uLWR1cmF0aW9uOnZhcigtLWZhLWFuaW1hdGlvbi1kdXJhdGlvbiwxcyk7YW5pbWF0aW9uLWR1cmF0aW9uOnZhcigtLWZhLWFuaW1hdGlvbi1kdXJhdGlvbiwxcyk7LXdlYmtpdC1hbmltYXRpb24taXRlcmF0aW9uLWNvdW50OnZhcigtLWZhLWFuaW1hdGlvbi1pdGVyYXRpb24tY291bnQsaW5maW5pdGUpO2FuaW1hdGlvbi1pdGVyYXRpb24tY291bnQ6dmFyKC0tZmEtYW5pbWF0aW9uLWl0ZXJhdGlvbi1jb3VudCxpbmZpbml0ZSk7LXdlYmtpdC1hbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOnZhcigtLWZhLWFuaW1hdGlvbi10aW1pbmcsc3RlcHMoOCkpO2FuaW1hdGlvbi10aW1pbmctZnVuY3Rpb246dmFyKC0tZmEtYW5pbWF0aW9uLXRpbWluZyxzdGVwcyg4KSl9QG1lZGlhIChwcmVmZXJzLXJlZHVjZWQtbW90aW9uOnJlZHVjZSl7LmZhLWJlYXQsLmZhLWJlYXQtZmFkZSwuZmEtYm91bmNlLC5mYS1mYWRlLC5mYS1mbGlwLC5mYS1wdWxzZSwuZmEtc2hha2UsLmZhLXNwaW4sLmZhLXNwaW4tcHVsc2V7LXdlYmtpdC1hbmltYXRpb24tZGVsYXk6LTFtczthbmltYXRpb24tZGVsYXk6LTFtczstd2Via2l0LWFuaW1hdGlvbi1kdXJhdGlvbjoxbXM7YW5pbWF0aW9uLWR1cmF0aW9uOjFtczstd2Via2l0LWFuaW1hdGlvbi1pdGVyYXRpb24tY291bnQ6MTthbmltYXRpb24taXRlcmF0aW9uLWNvdW50OjE7LXdlYmtpdC10cmFuc2l0aW9uLWRlbGF5OjBzO3RyYW5zaXRpb24tZGVsYXk6MHM7LXdlYmtpdC10cmFuc2l0aW9uLWR1cmF0aW9uOjBzO3RyYW5zaXRpb24tZHVyYXRpb246MHN9fUAtd2Via2l0LWtleWZyYW1lcyBmYS1iZWF0ezAlLDkwJXstd2Via2l0LXRyYW5zZm9ybTpzY2FsZSgxKTt0cmFuc2Zvcm06c2NhbGUoMSl9NDUley13ZWJraXQtdHJhbnNmb3JtOnNjYWxlKHZhcigtLWZhLWJlYXQtc2NhbGUsMS4yNSkpO3RyYW5zZm9ybTpzY2FsZSh2YXIoLS1mYS1iZWF0LXNjYWxlLDEuMjUpKX19QGtleWZyYW1lcyBmYS1iZWF0ezAlLDkwJXstd2Via2l0LXRyYW5zZm9ybTpzY2FsZSgxKTt0cmFuc2Zvcm06c2NhbGUoMSl9NDUley13ZWJraXQtdHJhbnNmb3JtOnNjYWxlKHZhcigtLWZhLWJlYXQtc2NhbGUsMS4yNSkpO3RyYW5zZm9ybTpzY2FsZSh2YXIoLS1mYS1iZWF0LXNjYWxlLDEuMjUpKX19QC13ZWJraXQta2V5ZnJhbWVzIGZhLWJvdW5jZXswJXstd2Via2l0LXRyYW5zZm9ybTpzY2FsZSgxKSB0cmFuc2xhdGVZKDApO3RyYW5zZm9ybTpzY2FsZSgxKSB0cmFuc2xhdGVZKDApfTEwJXstd2Via2l0LXRyYW5zZm9ybTpzY2FsZSh2YXIoLS1mYS1ib3VuY2Utc3RhcnQtc2NhbGUteCwxLjEpLHZhcigtLWZhLWJvdW5jZS1zdGFydC1zY2FsZS15LC45KSkgdHJhbnNsYXRlWSgwKTt0cmFuc2Zvcm06c2NhbGUodmFyKC0tZmEtYm91bmNlLXN0YXJ0LXNjYWxlLXgsMS4xKSx2YXIoLS1mYS1ib3VuY2Utc3RhcnQtc2NhbGUteSwuOSkpIHRyYW5zbGF0ZVkoMCl9MzAley13ZWJraXQtdHJhbnNmb3JtOnNjYWxlKHZhcigtLWZhLWJvdW5jZS1qdW1wLXNjYWxlLXgsLjkpLHZhcigtLWZhLWJvdW5jZS1qdW1wLXNjYWxlLXksMS4xKSkgdHJhbnNsYXRlWSh2YXIoLS1mYS1ib3VuY2UtaGVpZ2h0LC0uNWVtKSk7dHJhbnNmb3JtOnNjYWxlKHZhcigtLWZhLWJvdW5jZS1qdW1wLXNjYWxlLXgsLjkpLHZhcigtLWZhLWJvdW5jZS1qdW1wLXNjYWxlLXksMS4xKSkgdHJhbnNsYXRlWSh2YXIoLS1mYS1ib3VuY2UtaGVpZ2h0LC0uNWVtKSl9NTAley13ZWJraXQtdHJhbnNmb3JtOnNjYWxlKHZhcigtLWZhLWJvdW5jZS1sYW5kLXNjYWxlLXgsMS4wNSksdmFyKC0tZmEtYm91bmNlLWxhbmQtc2NhbGUteSwuOTUpKSB0cmFuc2xhdGVZKDApO3RyYW5zZm9ybTpzY2FsZSh2YXIoLS1mYS1ib3VuY2UtbGFuZC1zY2FsZS14LDEuMDUpLHZhcigtLWZhLWJvdW5jZS1sYW5kLXNjYWxlLXksLjk1KSkgdHJhbnNsYXRlWSgwKX01NyV7LXdlYmtpdC10cmFuc2Zvcm06c2NhbGUoMSkgdHJhbnNsYXRlWSh2YXIoLS1mYS1ib3VuY2UtcmVib3VuZCwtLjEyNWVtKSk7dHJhbnNmb3JtOnNjYWxlKDEpIHRyYW5zbGF0ZVkodmFyKC0tZmEtYm91bmNlLXJlYm91bmQsLS4xMjVlbSkpfTY0JXstd2Via2l0LXRyYW5zZm9ybTpzY2FsZSgxKSB0cmFuc2xhdGVZKDApO3RyYW5zZm9ybTpzY2FsZSgxKSB0cmFuc2xhdGVZKDApfXRvey13ZWJraXQtdHJhbnNmb3JtOnNjYWxlKDEpIHRyYW5zbGF0ZVkoMCk7dHJhbnNmb3JtOnNjYWxlKDEpIHRyYW5zbGF0ZVkoMCl9fUBrZXlmcmFtZXMgZmEtYm91bmNlezAley13ZWJraXQtdHJhbnNmb3JtOnNjYWxlKDEpIHRyYW5zbGF0ZVkoMCk7dHJhbnNmb3JtOnNjYWxlKDEpIHRyYW5zbGF0ZVkoMCl9MTAley13ZWJraXQtdHJhbnNmb3JtOnNjYWxlKHZhcigtLWZhLWJvdW5jZS1zdGFydC1zY2FsZS14LDEuMSksdmFyKC0tZmEtYm91bmNlLXN0YXJ0LXNjYWxlLXksLjkpKSB0cmFuc2xhdGVZKDApO3RyYW5zZm9ybTpzY2FsZSh2YXIoLS1mYS1ib3VuY2Utc3RhcnQtc2NhbGUteCwxLjEpLHZhcigtLWZhLWJvdW5jZS1zdGFydC1zY2FsZS15LC45KSkgdHJhbnNsYXRlWSgwKX0zMCV7LXdlYmtpdC10cmFuc2Zvcm06c2NhbGUodmFyKC0tZmEtYm91bmNlLWp1bXAtc2NhbGUteCwuOSksdmFyKC0tZmEtYm91bmNlLWp1bXAtc2NhbGUteSwxLjEpKSB0cmFuc2xhdGVZKHZhcigtLWZhLWJvdW5jZS1oZWlnaHQsLS41ZW0pKTt0cmFuc2Zvcm06c2NhbGUodmFyKC0tZmEtYm91bmNlLWp1bXAtc2NhbGUteCwuOSksdmFyKC0tZmEtYm91bmNlLWp1bXAtc2NhbGUteSwxLjEpKSB0cmFuc2xhdGVZKHZhcigtLWZhLWJvdW5jZS1oZWlnaHQsLS41ZW0pKX01MCV7LXdlYmtpdC10cmFuc2Zvcm06c2NhbGUodmFyKC0tZmEtYm91bmNlLWxhbmQtc2NhbGUteCwxLjA1KSx2YXIoLS1mYS1ib3VuY2UtbGFuZC1zY2FsZS15LC45NSkpIHRyYW5zbGF0ZVkoMCk7dHJhbnNmb3JtOnNjYWxlKHZhcigtLWZhLWJvdW5jZS1sYW5kLXNjYWxlLXgsMS4wNSksdmFyKC0tZmEtYm91bmNlLWxhbmQtc2NhbGUteSwuOTUpKSB0cmFuc2xhdGVZKDApfTU3JXstd2Via2l0LXRyYW5zZm9ybTpzY2FsZSgxKSB0cmFuc2xhdGVZKHZhcigtLWZhLWJvdW5jZS1yZWJvdW5kLC0uMTI1ZW0pKTt0cmFuc2Zvcm06c2NhbGUoMSkgdHJhbnNsYXRlWSh2YXIoLS1mYS1ib3VuY2UtcmVib3VuZCwtLjEyNWVtKSl9NjQley13ZWJraXQtdHJhbnNmb3JtOnNjYWxlKDEpIHRyYW5zbGF0ZVkoMCk7dHJhbnNmb3JtOnNjYWxlKDEpIHRyYW5zbGF0ZVkoMCl9dG97LXdlYmtpdC10cmFuc2Zvcm06c2NhbGUoMSkgdHJhbnNsYXRlWSgwKTt0cmFuc2Zvcm06c2NhbGUoMSkgdHJhbnNsYXRlWSgwKX19QC13ZWJraXQta2V5ZnJhbWVzIGZhLWZhZGV7NTAle29wYWNpdHk6dmFyKC0tZmEtZmFkZS1vcGFjaXR5LC40KX19QGtleWZyYW1lcyBmYS1mYWRlezUwJXtvcGFjaXR5OnZhcigtLWZhLWZhZGUtb3BhY2l0eSwuNCl9fUAtd2Via2l0LWtleWZyYW1lcyBmYS1iZWF0LWZhZGV7MCUsdG97b3BhY2l0eTp2YXIoLS1mYS1iZWF0LWZhZGUtb3BhY2l0eSwuNCk7LXdlYmtpdC10cmFuc2Zvcm06c2NhbGUoMSk7dHJhbnNmb3JtOnNjYWxlKDEpfTUwJXtvcGFjaXR5OjE7LXdlYmtpdC10cmFuc2Zvcm06c2NhbGUodmFyKC0tZmEtYmVhdC1mYWRlLXNjYWxlLDEuMTI1KSk7dHJhbnNmb3JtOnNjYWxlKHZhcigtLWZhLWJlYXQtZmFkZS1zY2FsZSwxLjEyNSkpfX1Aa2V5ZnJhbWVzIGZhLWJlYXQtZmFkZXswJSx0b3tvcGFjaXR5OnZhcigtLWZhLWJlYXQtZmFkZS1vcGFjaXR5LC40KTstd2Via2l0LXRyYW5zZm9ybTpzY2FsZSgxKTt0cmFuc2Zvcm06c2NhbGUoMSl9NTAle29wYWNpdHk6MTstd2Via2l0LXRyYW5zZm9ybTpzY2FsZSh2YXIoLS1mYS1iZWF0LWZhZGUtc2NhbGUsMS4xMjUpKTt0cmFuc2Zvcm06c2NhbGUodmFyKC0tZmEtYmVhdC1mYWRlLXNjYWxlLDEuMTI1KSl9fUAtd2Via2l0LWtleWZyYW1lcyBmYS1mbGlwezUwJXstd2Via2l0LXRyYW5zZm9ybTpyb3RhdGUzZCh2YXIoLS1mYS1mbGlwLXgsMCksdmFyKC0tZmEtZmxpcC15LDEpLHZhcigtLWZhLWZsaXAteiwwKSx2YXIoLS1mYS1mbGlwLWFuZ2xlLC0xODBkZWcpKTt0cmFuc2Zvcm06cm90YXRlM2QodmFyKC0tZmEtZmxpcC14LDApLHZhcigtLWZhLWZsaXAteSwxKSx2YXIoLS1mYS1mbGlwLXosMCksdmFyKC0tZmEtZmxpcC1hbmdsZSwtMTgwZGVnKSl9fUBrZXlmcmFtZXMgZmEtZmxpcHs1MCV7LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlM2QodmFyKC0tZmEtZmxpcC14LDApLHZhcigtLWZhLWZsaXAteSwxKSx2YXIoLS1mYS1mbGlwLXosMCksdmFyKC0tZmEtZmxpcC1hbmdsZSwtMTgwZGVnKSk7dHJhbnNmb3JtOnJvdGF0ZTNkKHZhcigtLWZhLWZsaXAteCwwKSx2YXIoLS1mYS1mbGlwLXksMSksdmFyKC0tZmEtZmxpcC16LDApLHZhcigtLWZhLWZsaXAtYW5nbGUsLTE4MGRlZykpfX1ALXdlYmtpdC1rZXlmcmFtZXMgZmEtc2hha2V7MCV7LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlKC0xNWRlZyk7dHJhbnNmb3JtOnJvdGF0ZSgtMTVkZWcpfTQley13ZWJraXQtdHJhbnNmb3JtOnJvdGF0ZSgxNWRlZyk7dHJhbnNmb3JtOnJvdGF0ZSgxNWRlZyl9OCUsMjQley13ZWJraXQtdHJhbnNmb3JtOnJvdGF0ZSgtMThkZWcpO3RyYW5zZm9ybTpyb3RhdGUoLTE4ZGVnKX0xMiUsMjgley13ZWJraXQtdHJhbnNmb3JtOnJvdGF0ZSgxOGRlZyk7dHJhbnNmb3JtOnJvdGF0ZSgxOGRlZyl9MTYley13ZWJraXQtdHJhbnNmb3JtOnJvdGF0ZSgtMjJkZWcpO3RyYW5zZm9ybTpyb3RhdGUoLTIyZGVnKX0yMCV7LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlKDIyZGVnKTt0cmFuc2Zvcm06cm90YXRlKDIyZGVnKX0zMiV7LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlKC0xMmRlZyk7dHJhbnNmb3JtOnJvdGF0ZSgtMTJkZWcpfTM2JXstd2Via2l0LXRyYW5zZm9ybTpyb3RhdGUoMTJkZWcpO3RyYW5zZm9ybTpyb3RhdGUoMTJkZWcpfTQwJSx0b3std2Via2l0LXRyYW5zZm9ybTpyb3RhdGUoMGRlZyk7dHJhbnNmb3JtOnJvdGF0ZSgwZGVnKX19QGtleWZyYW1lcyBmYS1zaGFrZXswJXstd2Via2l0LXRyYW5zZm9ybTpyb3RhdGUoLTE1ZGVnKTt0cmFuc2Zvcm06cm90YXRlKC0xNWRlZyl9NCV7LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlKDE1ZGVnKTt0cmFuc2Zvcm06cm90YXRlKDE1ZGVnKX04JSwyNCV7LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlKC0xOGRlZyk7dHJhbnNmb3JtOnJvdGF0ZSgtMThkZWcpfTEyJSwyOCV7LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlKDE4ZGVnKTt0cmFuc2Zvcm06cm90YXRlKDE4ZGVnKX0xNiV7LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlKC0yMmRlZyk7dHJhbnNmb3JtOnJvdGF0ZSgtMjJkZWcpfTIwJXstd2Via2l0LXRyYW5zZm9ybTpyb3RhdGUoMjJkZWcpO3RyYW5zZm9ybTpyb3RhdGUoMjJkZWcpfTMyJXstd2Via2l0LXRyYW5zZm9ybTpyb3RhdGUoLTEyZGVnKTt0cmFuc2Zvcm06cm90YXRlKC0xMmRlZyl9MzYley13ZWJraXQtdHJhbnNmb3JtOnJvdGF0ZSgxMmRlZyk7dHJhbnNmb3JtOnJvdGF0ZSgxMmRlZyl9NDAlLHRvey13ZWJraXQtdHJhbnNmb3JtOnJvdGF0ZSgwZGVnKTt0cmFuc2Zvcm06cm90YXRlKDBkZWcpfX1ALXdlYmtpdC1rZXlmcmFtZXMgZmEtc3BpbnswJXstd2Via2l0LXRyYW5zZm9ybTpyb3RhdGUoMGRlZyk7dHJhbnNmb3JtOnJvdGF0ZSgwZGVnKX10b3std2Via2l0LXRyYW5zZm9ybTpyb3RhdGUoMXR1cm4pO3RyYW5zZm9ybTpyb3RhdGUoMXR1cm4pfX1Aa2V5ZnJhbWVzIGZhLXNwaW57MCV7LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlKDBkZWcpO3RyYW5zZm9ybTpyb3RhdGUoMGRlZyl9dG97LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlKDF0dXJuKTt0cmFuc2Zvcm06cm90YXRlKDF0dXJuKX19LmZhLXJvdGF0ZS05MHstd2Via2l0LXRyYW5zZm9ybTpyb3RhdGUoOTBkZWcpO3RyYW5zZm9ybTpyb3RhdGUoOTBkZWcpfS5mYS1yb3RhdGUtMTgwey13ZWJraXQtdHJhbnNmb3JtOnJvdGF0ZSgxODBkZWcpO3RyYW5zZm9ybTpyb3RhdGUoMTgwZGVnKX0uZmEtcm90YXRlLTI3MHstd2Via2l0LXRyYW5zZm9ybTpyb3RhdGUoMjcwZGVnKTt0cmFuc2Zvcm06cm90YXRlKDI3MGRlZyl9LmZhLWZsaXAtaG9yaXpvbnRhbHstd2Via2l0LXRyYW5zZm9ybTpzY2FsZVgoLTEpO3RyYW5zZm9ybTpzY2FsZVgoLTEpfS5mYS1mbGlwLXZlcnRpY2Fsey13ZWJraXQtdHJhbnNmb3JtOnNjYWxlWSgtMSk7dHJhbnNmb3JtOnNjYWxlWSgtMSl9LmZhLWZsaXAtYm90aCwuZmEtZmxpcC1ob3Jpem9udGFsLmZhLWZsaXAtdmVydGljYWx7LXdlYmtpdC10cmFuc2Zvcm06c2NhbGUoLTEpO3RyYW5zZm9ybTpzY2FsZSgtMSl9LmZhLXJvdGF0ZS1ieXstd2Via2l0LXRyYW5zZm9ybTpyb3RhdGUodmFyKC0tZmEtcm90YXRlLWFuZ2xlLG5vbmUpKTt0cmFuc2Zvcm06cm90YXRlKHZhcigtLWZhLXJvdGF0ZS1hbmdsZSxub25lKSl9LmZhLXN0YWNre2Rpc3BsYXk6aW5saW5lLWJsb2NrO2hlaWdodDoyZW07bGluZS1oZWlnaHQ6MmVtO3Bvc2l0aW9uOnJlbGF0aXZlO3ZlcnRpY2FsLWFsaWduOm1pZGRsZTt3aWR0aDoyLjVlbX0uZmEtc3RhY2stMXgsLmZhLXN0YWNrLTJ4e2xlZnQ6MDtwb3NpdGlvbjphYnNvbHV0ZTt0ZXh0LWFsaWduOmNlbnRlcjt3aWR0aDoxMDAlO3otaW5kZXg6dmFyKC0tZmEtc3RhY2stei1pbmRleCxhdXRvKX0uZmEtc3RhY2stMXh7bGluZS1oZWlnaHQ6aW5oZXJpdH0uZmEtc3RhY2stMnh7Zm9udC1zaXplOjJlbX0uZmEtaW52ZXJzZXtjb2xvcjp2YXIoLS1mYS1pbnZlcnNlLCNmZmYpfQoKLmZhLTA6YmVmb3Jle2NvbnRlbnQ6IlwzMCJ9LmZhLTE6YmVmb3Jle2NvbnRlbnQ6IlwzMSJ9LmZhLTI6YmVmb3Jle2NvbnRlbnQ6IlwzMiJ9LmZhLTM6YmVmb3Jle2NvbnRlbnQ6IlwzMyJ9LmZhLTQ6YmVmb3Jle2NvbnRlbnQ6IlwzNCJ9LmZhLTU6YmVmb3Jle2NvbnRlbnQ6IlwzNSJ9LmZhLTY6YmVmb3Jle2NvbnRlbnQ6IlwzNiJ9LmZhLTc6YmVmb3Jle2NvbnRlbnQ6IlwzNyJ9LmZhLTg6YmVmb3Jle2NvbnRlbnQ6IlwzOCJ9LmZhLTk6YmVmb3Jle2NvbnRlbnQ6IlwzOSJ9LmZhLWZpbGwtZHJpcDpiZWZvcmV7Y29udGVudDoiXGY1NzYifS5mYS1hcnJvd3MtdG8tY2lyY2xlOmJlZm9yZXtjb250ZW50OiJcZTRiZCJ9LmZhLWNoZXZyb24tY2lyY2xlLXJpZ2h0OmJlZm9yZSwuZmEtY2lyY2xlLWNoZXZyb24tcmlnaHQ6YmVmb3Jle2NvbnRlbnQ6IlxmMTM4In0uZmEtYXQ6YmVmb3Jle2NvbnRlbnQ6Ilw0MCJ9LmZhLXRyYXNoLWFsdDpiZWZvcmUsLmZhLXRyYXNoLWNhbjpiZWZvcmV7Y29udGVudDoiXGYyZWQifS5mYS10ZXh0LWhlaWdodDpiZWZvcmV7Y29udGVudDoiXGYwMzQifS5mYS11c2VyLXRpbWVzOmJlZm9yZSwuZmEtdXNlci14bWFyazpiZWZvcmV7Y29udGVudDoiXGYyMzUifS5mYS1zdGV0aG9zY29wZTpiZWZvcmV7Y29udGVudDoiXGYwZjEifS5mYS1jb21tZW50LWFsdDpiZWZvcmUsLmZhLW1lc3NhZ2U6YmVmb3Jle2NvbnRlbnQ6IlxmMjdhIn0uZmEtaW5mbzpiZWZvcmV7Y29udGVudDoiXGYxMjkifS5mYS1jb21wcmVzcy1hbHQ6YmVmb3JlLC5mYS1kb3duLWxlZnQtYW5kLXVwLXJpZ2h0LXRvLWNlbnRlcjpiZWZvcmV7Y29udGVudDoiXGY0MjIifS5mYS1leHBsb3Npb246YmVmb3Jle2NvbnRlbnQ6IlxlNGU5In0uZmEtZmlsZS1hbHQ6YmVmb3JlLC5mYS1maWxlLWxpbmVzOmJlZm9yZSwuZmEtZmlsZS10ZXh0OmJlZm9yZXtjb250ZW50OiJcZjE1YyJ9LmZhLXdhdmUtc3F1YXJlOmJlZm9yZXtjb250ZW50OiJcZjgzZSJ9LmZhLXJpbmc6YmVmb3Jle2NvbnRlbnQ6IlxmNzBiIn0uZmEtYnVpbGRpbmctdW46YmVmb3Jle2NvbnRlbnQ6IlxlNGQ5In0uZmEtZGljZS10aHJlZTpiZWZvcmV7Y29udGVudDoiXGY1MjcifS5mYS1jYWxlbmRhci1hbHQ6YmVmb3JlLC5mYS1jYWxlbmRhci1kYXlzOmJlZm9yZXtjb250ZW50OiJcZjA3MyJ9LmZhLWFuY2hvci1jaXJjbGUtY2hlY2s6YmVmb3Jle2NvbnRlbnQ6IlxlNGFhIn0uZmEtYnVpbGRpbmctY2lyY2xlLWFycm93LXJpZ2h0OmJlZm9yZXtjb250ZW50OiJcZTRkMSJ9LmZhLXZvbGxleWJhbGwtYmFsbDpiZWZvcmUsLmZhLXZvbGxleWJhbGw6YmVmb3Jle2NvbnRlbnQ6IlxmNDVmIn0uZmEtYXJyb3dzLXVwLXRvLWxpbmU6YmVmb3Jle2NvbnRlbnQ6IlxlNGMyIn0uZmEtc29ydC1kZXNjOmJlZm9yZSwuZmEtc29ydC1kb3duOmJlZm9yZXtjb250ZW50OiJcZjBkZCJ9LmZhLWNpcmNsZS1taW51czpiZWZvcmUsLmZhLW1pbnVzLWNpcmNsZTpiZWZvcmV7Y29udGVudDoiXGYwNTYifS5mYS1kb29yLW9wZW46YmVmb3Jle2NvbnRlbnQ6IlxmNTJiIn0uZmEtcmlnaHQtZnJvbS1icmFja2V0OmJlZm9yZSwuZmEtc2lnbi1vdXQtYWx0OmJlZm9yZXtjb250ZW50OiJcZjJmNSJ9LmZhLWF0b206YmVmb3Jle2NvbnRlbnQ6IlxmNWQyIn0uZmEtc29hcDpiZWZvcmV7Y29udGVudDoiXGUwNmUifS5mYS1oZWFydC1tdXNpYy1jYW1lcmEtYm9sdDpiZWZvcmUsLmZhLWljb25zOmJlZm9yZXtjb250ZW50OiJcZjg2ZCJ9LmZhLW1pY3JvcGhvbmUtYWx0LXNsYXNoOmJlZm9yZSwuZmEtbWljcm9waG9uZS1saW5lcy1zbGFzaDpiZWZvcmV7Y29udGVudDoiXGY1MzkifS5mYS1icmlkZ2UtY2lyY2xlLWNoZWNrOmJlZm9yZXtjb250ZW50OiJcZTRjOSJ9LmZhLXB1bXAtbWVkaWNhbDpiZWZvcmV7Y29udGVudDoiXGUwNmEifS5mYS1maW5nZXJwcmludDpiZWZvcmV7Y29udGVudDoiXGY1NzcifS5mYS1oYW5kLXBvaW50LXJpZ2h0OmJlZm9yZXtjb250ZW50OiJcZjBhNCJ9LmZhLW1hZ25pZnlpbmctZ2xhc3MtbG9jYXRpb246YmVmb3JlLC5mYS1zZWFyY2gtbG9jYXRpb246YmVmb3Jle2NvbnRlbnQ6IlxmNjg5In0uZmEtZm9yd2FyZC1zdGVwOmJlZm9yZSwuZmEtc3RlcC1mb3J3YXJkOmJlZm9yZXtjb250ZW50OiJcZjA1MSJ9LmZhLWZhY2Utc21pbGUtYmVhbTpiZWZvcmUsLmZhLXNtaWxlLWJlYW06YmVmb3Jle2NvbnRlbnQ6IlxmNWI4In0uZmEtZmxhZy1jaGVja2VyZWQ6YmVmb3Jle2NvbnRlbnQ6IlxmMTFlIn0uZmEtZm9vdGJhbGwtYmFsbDpiZWZvcmUsLmZhLWZvb3RiYWxsOmJlZm9yZXtjb250ZW50OiJcZjQ0ZSJ9LmZhLXNjaG9vbC1jaXJjbGUtZXhjbGFtYXRpb246YmVmb3Jle2NvbnRlbnQ6IlxlNTZjIn0uZmEtY3JvcDpiZWZvcmV7Y29udGVudDoiXGYxMjUifS5mYS1hbmdsZS1kb3VibGUtZG93bjpiZWZvcmUsLmZhLWFuZ2xlcy1kb3duOmJlZm9yZXtjb250ZW50OiJcZjEwMyJ9LmZhLXVzZXJzLXJlY3RhbmdsZTpiZWZvcmV7Y29udGVudDoiXGU1OTQifS5mYS1wZW9wbGUtcm9vZjpiZWZvcmV7Y29udGVudDoiXGU1MzcifS5mYS1wZW9wbGUtbGluZTpiZWZvcmV7Y29udGVudDoiXGU1MzQifS5mYS1iZWVyLW11Zy1lbXB0eTpiZWZvcmUsLmZhLWJlZXI6YmVmb3Jle2NvbnRlbnQ6IlxmMGZjIn0uZmEtZGlhZ3JhbS1wcmVkZWNlc3NvcjpiZWZvcmV7Y29udGVudDoiXGU0NzcifS5mYS1hcnJvdy11cC1sb25nOmJlZm9yZSwuZmEtbG9uZy1hcnJvdy11cDpiZWZvcmV7Y29udGVudDoiXGYxNzYifS5mYS1idXJuOmJlZm9yZSwuZmEtZmlyZS1mbGFtZS1zaW1wbGU6YmVmb3Jle2NvbnRlbnQ6IlxmNDZhIn0uZmEtbWFsZTpiZWZvcmUsLmZhLXBlcnNvbjpiZWZvcmV7Y29udGVudDoiXGYxODMifS5mYS1sYXB0b3A6YmVmb3Jle2NvbnRlbnQ6IlxmMTA5In0uZmEtZmlsZS1jc3Y6YmVmb3Jle2NvbnRlbnQ6IlxmNmRkIn0uZmEtbWVub3JhaDpiZWZvcmV7Y29udGVudDoiXGY2NzYifS5mYS10cnVjay1wbGFuZTpiZWZvcmV7Y29udGVudDoiXGU1OGYifS5mYS1yZWNvcmQtdmlueWw6YmVmb3Jle2NvbnRlbnQ6IlxmOGQ5In0uZmEtZmFjZS1ncmluLXN0YXJzOmJlZm9yZSwuZmEtZ3Jpbi1zdGFyczpiZWZvcmV7Y29udGVudDoiXGY1ODcifS5mYS1ib25nOmJlZm9yZXtjb250ZW50OiJcZjU1YyJ9LmZhLXBhc3RhZmFyaWFuaXNtOmJlZm9yZSwuZmEtc3BhZ2hldHRpLW1vbnN0ZXItZmx5aW5nOmJlZm9yZXtjb250ZW50OiJcZjY3YiJ9LmZhLWFycm93LWRvd24tdXAtYWNyb3NzLWxpbmU6YmVmb3Jle2NvbnRlbnQ6IlxlNGFmIn0uZmEtc3Bvb246YmVmb3JlLC5mYS11dGVuc2lsLXNwb29uOmJlZm9yZXtjb250ZW50OiJcZjJlNSJ9LmZhLWphci13aGVhdDpiZWZvcmV7Y29udGVudDoiXGU1MTcifS5mYS1lbnZlbG9wZXMtYnVsazpiZWZvcmUsLmZhLW1haWwtYnVsazpiZWZvcmV7Y29udGVudDoiXGY2NzQifS5mYS1maWxlLWNpcmNsZS1leGNsYW1hdGlvbjpiZWZvcmV7Y29udGVudDoiXGU0ZWIifS5mYS1jaXJjbGUtaDpiZWZvcmUsLmZhLWhvc3BpdGFsLXN5bWJvbDpiZWZvcmV7Y29udGVudDoiXGY0N2UifS5mYS1wYWdlcjpiZWZvcmV7Y29udGVudDoiXGY4MTUifS5mYS1hZGRyZXNzLWJvb2s6YmVmb3JlLC5mYS1jb250YWN0LWJvb2s6YmVmb3Jle2NvbnRlbnQ6IlxmMmI5In0uZmEtc3RyaWtldGhyb3VnaDpiZWZvcmV7Y29udGVudDoiXGYwY2MifS5mYS1rOmJlZm9yZXtjb250ZW50OiJcNGIifS5mYS1sYW5kbWFyay1mbGFnOmJlZm9yZXtjb250ZW50OiJcZTUxYyJ9LmZhLXBlbmNpbC1hbHQ6YmVmb3JlLC5mYS1wZW5jaWw6YmVmb3Jle2NvbnRlbnQ6IlxmMzAzIn0uZmEtYmFja3dhcmQ6YmVmb3Jle2NvbnRlbnQ6IlxmMDRhIn0uZmEtY2FyZXQtcmlnaHQ6YmVmb3Jle2NvbnRlbnQ6IlxmMGRhIn0uZmEtY29tbWVudHM6YmVmb3Jle2NvbnRlbnQ6IlxmMDg2In0uZmEtZmlsZS1jbGlwYm9hcmQ6YmVmb3JlLC5mYS1wYXN0ZTpiZWZvcmV7Y29udGVudDoiXGYwZWEifS5mYS1jb2RlLXB1bGwtcmVxdWVzdDpiZWZvcmV7Y29udGVudDoiXGUxM2MifS5mYS1jbGlwYm9hcmQtbGlzdDpiZWZvcmV7Y29udGVudDoiXGY0NmQifS5mYS10cnVjay1sb2FkaW5nOmJlZm9yZSwuZmEtdHJ1Y2stcmFtcC1ib3g6YmVmb3Jle2NvbnRlbnQ6IlxmNGRlIn0uZmEtdXNlci1jaGVjazpiZWZvcmV7Y29udGVudDoiXGY0ZmMifS5mYS12aWFsLXZpcnVzOmJlZm9yZXtjb250ZW50OiJcZTU5NyJ9LmZhLXNoZWV0LXBsYXN0aWM6YmVmb3Jle2NvbnRlbnQ6IlxlNTcxIn0uZmEtYmxvZzpiZWZvcmV7Y29udGVudDoiXGY3ODEifS5mYS11c2VyLW5pbmphOmJlZm9yZXtjb250ZW50OiJcZjUwNCJ9LmZhLXBlcnNvbi1hcnJvdy11cC1mcm9tLWxpbmU6YmVmb3Jle2NvbnRlbnQ6IlxlNTM5In0uZmEtc2Nyb2xsLXRvcmFoOmJlZm9yZSwuZmEtdG9yYWg6YmVmb3Jle2NvbnRlbnQ6IlxmNmEwIn0uZmEtYnJvb20tYmFsbDpiZWZvcmUsLmZhLXF1aWRkaXRjaC1icm9vbS1iYWxsOmJlZm9yZSwuZmEtcXVpZGRpdGNoOmJlZm9yZXtjb250ZW50OiJcZjQ1OCJ9LmZhLXRvZ2dsZS1vZmY6YmVmb3Jle2NvbnRlbnQ6IlxmMjA0In0uZmEtYXJjaGl2ZTpiZWZvcmUsLmZhLWJveC1hcmNoaXZlOmJlZm9yZXtjb250ZW50OiJcZjE4NyJ9LmZhLXBlcnNvbi1kcm93bmluZzpiZWZvcmV7Y29udGVudDoiXGU1NDUifS5mYS1hcnJvdy1kb3duLTktMTpiZWZvcmUsLmZhLXNvcnQtbnVtZXJpYy1kZXNjOmJlZm9yZSwuZmEtc29ydC1udW1lcmljLWRvd24tYWx0OmJlZm9yZXtjb250ZW50OiJcZjg4NiJ9LmZhLWZhY2UtZ3Jpbi10b25ndWUtc3F1aW50OmJlZm9yZSwuZmEtZ3Jpbi10b25ndWUtc3F1aW50OmJlZm9yZXtjb250ZW50OiJcZjU4YSJ9LmZhLXNwcmF5LWNhbjpiZWZvcmV7Y29udGVudDoiXGY1YmQifS5mYS10cnVjay1tb25zdGVyOmJlZm9yZXtjb250ZW50OiJcZjYzYiJ9LmZhLXc6YmVmb3Jle2NvbnRlbnQ6Ilw1NyJ9LmZhLWVhcnRoLWFmcmljYTpiZWZvcmUsLmZhLWdsb2JlLWFmcmljYTpiZWZvcmV7Y29udGVudDoiXGY1N2MifS5mYS1yYWluYm93OmJlZm9yZXtjb250ZW50OiJcZjc1YiJ9LmZhLWNpcmNsZS1ub3RjaDpiZWZvcmV7Y29udGVudDoiXGYxY2UifS5mYS10YWJsZXQtYWx0OmJlZm9yZSwuZmEtdGFibGV0LXNjcmVlbi1idXR0b246YmVmb3Jle2NvbnRlbnQ6IlxmM2ZhIn0uZmEtcGF3OmJlZm9yZXtjb250ZW50OiJcZjFiMCJ9LmZhLWNsb3VkOmJlZm9yZXtjb250ZW50OiJcZjBjMiJ9LmZhLXRyb3dlbC1icmlja3M6YmVmb3Jle2NvbnRlbnQ6IlxlNThhIn0uZmEtZmFjZS1mbHVzaGVkOmJlZm9yZSwuZmEtZmx1c2hlZDpiZWZvcmV7Y29udGVudDoiXGY1NzkifS5mYS1ob3NwaXRhbC11c2VyOmJlZm9yZXtjb250ZW50OiJcZjgwZCJ9LmZhLXRlbnQtYXJyb3ctbGVmdC1yaWdodDpiZWZvcmV7Y29udGVudDoiXGU1N2YifS5mYS1nYXZlbDpiZWZvcmUsLmZhLWxlZ2FsOmJlZm9yZXtjb250ZW50OiJcZjBlMyJ9LmZhLWJpbm9jdWxhcnM6YmVmb3Jle2NvbnRlbnQ6IlxmMWU1In0uZmEtbWljcm9waG9uZS1zbGFzaDpiZWZvcmV7Y29udGVudDoiXGYxMzEifS5mYS1ib3gtdGlzc3VlOmJlZm9yZXtjb250ZW50OiJcZTA1YiJ9LmZhLW1vdG9yY3ljbGU6YmVmb3Jle2NvbnRlbnQ6IlxmMjFjIn0uZmEtYmVsbC1jb25jaWVyZ2U6YmVmb3JlLC5mYS1jb25jaWVyZ2UtYmVsbDpiZWZvcmV7Y29udGVudDoiXGY1NjIifS5mYS1wZW4tcnVsZXI6YmVmb3JlLC5mYS1wZW5jaWwtcnVsZXI6YmVmb3Jle2NvbnRlbnQ6IlxmNWFlIn0uZmEtcGVvcGxlLWFycm93cy1sZWZ0LXJpZ2h0OmJlZm9yZSwuZmEtcGVvcGxlLWFycm93czpiZWZvcmV7Y29udGVudDoiXGUwNjgifS5mYS1tYXJzLWFuZC12ZW51cy1idXJzdDpiZWZvcmV7Y29udGVudDoiXGU1MjMifS5mYS1jYXJldC1zcXVhcmUtcmlnaHQ6YmVmb3JlLC5mYS1zcXVhcmUtY2FyZXQtcmlnaHQ6YmVmb3Jle2NvbnRlbnQ6IlxmMTUyIn0uZmEtY3V0OmJlZm9yZSwuZmEtc2Npc3NvcnM6YmVmb3Jle2NvbnRlbnQ6IlxmMGM0In0uZmEtc3VuLXBsYW50LXdpbHQ6YmVmb3Jle2NvbnRlbnQ6IlxlNTdhIn0uZmEtdG9pbGV0cy1wb3J0YWJsZTpiZWZvcmV7Y29udGVudDoiXGU1ODQifS5mYS1ob2NrZXktcHVjazpiZWZvcmV7Y29udGVudDoiXGY0NTMifS5mYS10YWJsZTpiZWZvcmV7Y29udGVudDoiXGYwY2UifS5mYS1tYWduaWZ5aW5nLWdsYXNzLWFycm93LXJpZ2h0OmJlZm9yZXtjb250ZW50OiJcZTUyMSJ9LmZhLWRpZ2l0YWwtdGFjaG9ncmFwaDpiZWZvcmUsLmZhLXRhY2hvZ3JhcGgtZGlnaXRhbDpiZWZvcmV7Y29udGVudDoiXGY1NjYifS5mYS11c2Vycy1zbGFzaDpiZWZvcmV7Y29udGVudDoiXGUwNzMifS5mYS1jbG92ZXI6YmVmb3Jle2NvbnRlbnQ6IlxlMTM5In0uZmEtbWFpbC1yZXBseTpiZWZvcmUsLmZhLXJlcGx5OmJlZm9yZXtjb250ZW50OiJcZjNlNSJ9LmZhLXN0YXItYW5kLWNyZXNjZW50OmJlZm9yZXtjb250ZW50OiJcZjY5OSJ9LmZhLWhvdXNlLWZpcmU6YmVmb3Jle2NvbnRlbnQ6IlxlNTBjIn0uZmEtbWludXMtc3F1YXJlOmJlZm9yZSwuZmEtc3F1YXJlLW1pbnVzOmJlZm9yZXtjb250ZW50OiJcZjE0NiJ9LmZhLWhlbGljb3B0ZXI6YmVmb3Jle2NvbnRlbnQ6IlxmNTMzIn0uZmEtY29tcGFzczpiZWZvcmV7Y29udGVudDoiXGYxNGUifS5mYS1jYXJldC1zcXVhcmUtZG93bjpiZWZvcmUsLmZhLXNxdWFyZS1jYXJldC1kb3duOmJlZm9yZXtjb250ZW50OiJcZjE1MCJ9LmZhLWZpbGUtY2lyY2xlLXF1ZXN0aW9uOmJlZm9yZXtjb250ZW50OiJcZTRlZiJ9LmZhLWxhcHRvcC1jb2RlOmJlZm9yZXtjb250ZW50OiJcZjVmYyJ9LmZhLXN3YXRjaGJvb2s6YmVmb3Jle2NvbnRlbnQ6IlxmNWMzIn0uZmEtcHJlc2NyaXB0aW9uLWJvdHRsZTpiZWZvcmV7Y29udGVudDoiXGY0ODUifS5mYS1iYXJzOmJlZm9yZSwuZmEtbmF2aWNvbjpiZWZvcmV7Y29udGVudDoiXGYwYzkifS5mYS1wZW9wbGUtZ3JvdXA6YmVmb3Jle2NvbnRlbnQ6IlxlNTMzIn0uZmEtaG91cmdsYXNzLTM6YmVmb3JlLC5mYS1ob3VyZ2xhc3MtZW5kOmJlZm9yZXtjb250ZW50OiJcZjI1MyJ9LmZhLWhlYXJ0LWJyb2tlbjpiZWZvcmUsLmZhLWhlYXJ0LWNyYWNrOmJlZm9yZXtjb250ZW50OiJcZjdhOSJ9LmZhLWV4dGVybmFsLWxpbmstc3F1YXJlLWFsdDpiZWZvcmUsLmZhLXNxdWFyZS11cC1yaWdodDpiZWZvcmV7Y29udGVudDoiXGYzNjAifS5mYS1mYWNlLWtpc3MtYmVhbTpiZWZvcmUsLmZhLWtpc3MtYmVhbTpiZWZvcmV7Y29udGVudDoiXGY1OTcifS5mYS1maWxtOmJlZm9yZXtjb250ZW50OiJcZjAwOCJ9LmZhLXJ1bGVyLWhvcml6b250YWw6YmVmb3Jle2NvbnRlbnQ6IlxmNTQ3In0uZmEtcGVvcGxlLXJvYmJlcnk6YmVmb3Jle2NvbnRlbnQ6IlxlNTM2In0uZmEtbGlnaHRidWxiOmJlZm9yZXtjb250ZW50OiJcZjBlYiJ9LmZhLWNhcmV0LWxlZnQ6YmVmb3Jle2NvbnRlbnQ6IlxmMGQ5In0uZmEtY2lyY2xlLWV4Y2xhbWF0aW9uOmJlZm9yZSwuZmEtZXhjbGFtYXRpb24tY2lyY2xlOmJlZm9yZXtjb250ZW50OiJcZjA2YSJ9LmZhLXNjaG9vbC1jaXJjbGUteG1hcms6YmVmb3Jle2NvbnRlbnQ6IlxlNTZkIn0uZmEtYXJyb3ctcmlnaHQtZnJvbS1icmFja2V0OmJlZm9yZSwuZmEtc2lnbi1vdXQ6YmVmb3Jle2NvbnRlbnQ6IlxmMDhiIn0uZmEtY2hldnJvbi1jaXJjbGUtZG93bjpiZWZvcmUsLmZhLWNpcmNsZS1jaGV2cm9uLWRvd246YmVmb3Jle2NvbnRlbnQ6IlxmMTNhIn0uZmEtdW5sb2NrLWFsdDpiZWZvcmUsLmZhLXVubG9jay1rZXlob2xlOmJlZm9yZXtjb250ZW50OiJcZjEzZSJ9LmZhLWNsb3VkLXNob3dlcnMtaGVhdnk6YmVmb3Jle2NvbnRlbnQ6IlxmNzQwIn0uZmEtaGVhZHBob25lcy1hbHQ6YmVmb3JlLC5mYS1oZWFkcGhvbmVzLXNpbXBsZTpiZWZvcmV7Y29udGVudDoiXGY1OGYifS5mYS1zaXRlbWFwOmJlZm9yZXtjb250ZW50OiJcZjBlOCJ9LmZhLWNpcmNsZS1kb2xsYXItdG8tc2xvdDpiZWZvcmUsLmZhLWRvbmF0ZTpiZWZvcmV7Y29udGVudDoiXGY0YjkifS5mYS1tZW1vcnk6YmVmb3Jle2NvbnRlbnQ6IlxmNTM4In0uZmEtcm9hZC1zcGlrZXM6YmVmb3Jle2NvbnRlbnQ6IlxlNTY4In0uZmEtZmlyZS1idXJuZXI6YmVmb3Jle2NvbnRlbnQ6IlxlNGYxIn0uZmEtZmxhZzpiZWZvcmV7Y29udGVudDoiXGYwMjQifS5mYS1oYW51a2lhaDpiZWZvcmV7Y29udGVudDoiXGY2ZTYifS5mYS1mZWF0aGVyOmJlZm9yZXtjb250ZW50OiJcZjUyZCJ9LmZhLXZvbHVtZS1kb3duOmJlZm9yZSwuZmEtdm9sdW1lLWxvdzpiZWZvcmV7Y29udGVudDoiXGYwMjcifS5mYS1jb21tZW50LXNsYXNoOmJlZm9yZXtjb250ZW50OiJcZjRiMyJ9LmZhLWNsb3VkLXN1bi1yYWluOmJlZm9yZXtjb250ZW50OiJcZjc0MyJ9LmZhLWNvbXByZXNzOmJlZm9yZXtjb250ZW50OiJcZjA2NiJ9LmZhLXdoZWF0LWFsdDpiZWZvcmUsLmZhLXdoZWF0LWF3bjpiZWZvcmV7Y29udGVudDoiXGUyY2QifS5mYS1hbmtoOmJlZm9yZXtjb250ZW50OiJcZjY0NCJ9LmZhLWhhbmRzLWhvbGRpbmctY2hpbGQ6YmVmb3Jle2NvbnRlbnQ6IlxlNGZhIn0uZmEtYXN0ZXJpc2s6YmVmb3Jle2NvbnRlbnQ6IlwyYSJ9LmZhLWNoZWNrLXNxdWFyZTpiZWZvcmUsLmZhLXNxdWFyZS1jaGVjazpiZWZvcmV7Y29udGVudDoiXGYxNGEifS5mYS1wZXNldGEtc2lnbjpiZWZvcmV7Y29udGVudDoiXGUyMjEifS5mYS1oZWFkZXI6YmVmb3JlLC5mYS1oZWFkaW5nOmJlZm9yZXtjb250ZW50OiJcZjFkYyJ9LmZhLWdob3N0OmJlZm9yZXtjb250ZW50OiJcZjZlMiJ9LmZhLWxpc3Qtc3F1YXJlczpiZWZvcmUsLmZhLWxpc3Q6YmVmb3Jle2NvbnRlbnQ6IlxmMDNhIn0uZmEtcGhvbmUtc3F1YXJlLWFsdDpiZWZvcmUsLmZhLXNxdWFyZS1waG9uZS1mbGlwOmJlZm9yZXtjb250ZW50OiJcZjg3YiJ9LmZhLWNhcnQtcGx1czpiZWZvcmV7Y29udGVudDoiXGYyMTcifS5mYS1nYW1lcGFkOmJlZm9yZXtjb250ZW50OiJcZjExYiJ9LmZhLWNpcmNsZS1kb3Q6YmVmb3JlLC5mYS1kb3QtY2lyY2xlOmJlZm9yZXtjb250ZW50OiJcZjE5MiJ9LmZhLWRpenp5OmJlZm9yZSwuZmEtZmFjZS1kaXp6eTpiZWZvcmV7Y29udGVudDoiXGY1NjcifS5mYS1lZ2c6YmVmb3Jle2NvbnRlbnQ6IlxmN2ZiIn0uZmEtaG91c2UtbWVkaWNhbC1jaXJjbGUteG1hcms6YmVmb3Jle2NvbnRlbnQ6IlxlNTEzIn0uZmEtY2FtcGdyb3VuZDpiZWZvcmV7Y29udGVudDoiXGY2YmIifS5mYS1mb2xkZXItcGx1czpiZWZvcmV7Y29udGVudDoiXGY2NWUifS5mYS1mdXRib2wtYmFsbDpiZWZvcmUsLmZhLWZ1dGJvbDpiZWZvcmUsLmZhLXNvY2Nlci1iYWxsOmJlZm9yZXtjb250ZW50OiJcZjFlMyJ9LmZhLXBhaW50LWJydXNoOmJlZm9yZSwuZmEtcGFpbnRicnVzaDpiZWZvcmV7Y29udGVudDoiXGYxZmMifS5mYS1sb2NrOmJlZm9yZXtjb250ZW50OiJcZjAyMyJ9LmZhLWdhcy1wdW1wOmJlZm9yZXtjb250ZW50OiJcZjUyZiJ9LmZhLWhvdC10dWItcGVyc29uOmJlZm9yZSwuZmEtaG90LXR1YjpiZWZvcmV7Y29udGVudDoiXGY1OTMifS5mYS1tYXAtbG9jYXRpb246YmVmb3JlLC5mYS1tYXAtbWFya2VkOmJlZm9yZXtjb250ZW50OiJcZjU5ZiJ9LmZhLWhvdXNlLWZsb29kLXdhdGVyOmJlZm9yZXtjb250ZW50OiJcZTUwZSJ9LmZhLXRyZWU6YmVmb3Jle2NvbnRlbnQ6IlxmMWJiIn0uZmEtYnJpZGdlLWxvY2s6YmVmb3Jle2NvbnRlbnQ6IlxlNGNjIn0uZmEtc2Fjay1kb2xsYXI6YmVmb3Jle2NvbnRlbnQ6IlxmODFkIn0uZmEtZWRpdDpiZWZvcmUsLmZhLXBlbi10by1zcXVhcmU6YmVmb3Jle2NvbnRlbnQ6IlxmMDQ0In0uZmEtY2FyLXNpZGU6YmVmb3Jle2NvbnRlbnQ6IlxmNWU0In0uZmEtc2hhcmUtYWx0OmJlZm9yZSwuZmEtc2hhcmUtbm9kZXM6YmVmb3Jle2NvbnRlbnQ6IlxmMWUwIn0uZmEtaGVhcnQtY2lyY2xlLW1pbnVzOmJlZm9yZXtjb250ZW50OiJcZTRmZiJ9LmZhLWhvdXJnbGFzcy0yOmJlZm9yZSwuZmEtaG91cmdsYXNzLWhhbGY6YmVmb3Jle2NvbnRlbnQ6IlxmMjUyIn0uZmEtbWljcm9zY29wZTpiZWZvcmV7Y29udGVudDoiXGY2MTAifS5mYS1zaW5rOmJlZm9yZXtjb250ZW50OiJcZTA2ZCJ9LmZhLWJhZy1zaG9wcGluZzpiZWZvcmUsLmZhLXNob3BwaW5nLWJhZzpiZWZvcmV7Y29udGVudDoiXGYyOTAifS5mYS1hcnJvdy1kb3duLXotYTpiZWZvcmUsLmZhLXNvcnQtYWxwaGEtZGVzYzpiZWZvcmUsLmZhLXNvcnQtYWxwaGEtZG93bi1hbHQ6YmVmb3Jle2NvbnRlbnQ6IlxmODgxIn0uZmEtbWl0dGVuOmJlZm9yZXtjb250ZW50OiJcZjdiNSJ9LmZhLXBlcnNvbi1yYXlzOmJlZm9yZXtjb250ZW50OiJcZTU0ZCJ9LmZhLXVzZXJzOmJlZm9yZXtjb250ZW50OiJcZjBjMCJ9LmZhLWV5ZS1zbGFzaDpiZWZvcmV7Y29udGVudDoiXGYwNzAifS5mYS1mbGFzay12aWFsOmJlZm9yZXtjb250ZW50OiJcZTRmMyJ9LmZhLWhhbmQtcGFwZXI6YmVmb3JlLC5mYS1oYW5kOmJlZm9yZXtjb250ZW50OiJcZjI1NiJ9LmZhLW9tOmJlZm9yZXtjb250ZW50OiJcZjY3OSJ9LmZhLXdvcm06YmVmb3Jle2NvbnRlbnQ6IlxlNTk5In0uZmEtaG91c2UtY2lyY2xlLXhtYXJrOmJlZm9yZXtjb250ZW50OiJcZTUwYiJ9LmZhLXBsdWc6YmVmb3Jle2NvbnRlbnQ6IlxmMWU2In0uZmEtY2hldnJvbi11cDpiZWZvcmV7Y29udGVudDoiXGYwNzcifS5mYS1oYW5kLXNwb2NrOmJlZm9yZXtjb250ZW50OiJcZjI1OSJ9LmZhLXN0b3B3YXRjaDpiZWZvcmV7Y29udGVudDoiXGYyZjIifS5mYS1mYWNlLWtpc3M6YmVmb3JlLC5mYS1raXNzOmJlZm9yZXtjb250ZW50OiJcZjU5NiJ9LmZhLWJyaWRnZS1jaXJjbGUteG1hcms6YmVmb3Jle2NvbnRlbnQ6IlxlNGNiIn0uZmEtZmFjZS1ncmluLXRvbmd1ZTpiZWZvcmUsLmZhLWdyaW4tdG9uZ3VlOmJlZm9yZXtjb250ZW50OiJcZjU4OSJ9LmZhLWNoZXNzLWJpc2hvcDpiZWZvcmV7Y29udGVudDoiXGY0M2EifS5mYS1mYWNlLWdyaW4td2luazpiZWZvcmUsLmZhLWdyaW4td2luazpiZWZvcmV7Y29udGVudDoiXGY1OGMifS5mYS1kZWFmOmJlZm9yZSwuZmEtZGVhZm5lc3M6YmVmb3JlLC5mYS1lYXItZGVhZjpiZWZvcmUsLmZhLWhhcmQtb2YtaGVhcmluZzpiZWZvcmV7Y29udGVudDoiXGYyYTQifS5mYS1yb2FkLWNpcmNsZS1jaGVjazpiZWZvcmV7Y29udGVudDoiXGU1NjQifS5mYS1kaWNlLWZpdmU6YmVmb3Jle2NvbnRlbnQ6IlxmNTIzIn0uZmEtcnNzLXNxdWFyZTpiZWZvcmUsLmZhLXNxdWFyZS1yc3M6YmVmb3Jle2NvbnRlbnQ6IlxmMTQzIn0uZmEtbGFuZC1taW5lLW9uOmJlZm9yZXtjb250ZW50OiJcZTUxYiJ9LmZhLWktY3Vyc29yOmJlZm9yZXtjb250ZW50OiJcZjI0NiJ9LmZhLXN0YW1wOmJlZm9yZXtjb250ZW50OiJcZjViZiJ9LmZhLXN0YWlyczpiZWZvcmV7Y29udGVudDoiXGUyODkifS5mYS1pOmJlZm9yZXtjb250ZW50OiJcNDkifS5mYS1ocnl2bmlhLXNpZ246YmVmb3JlLC5mYS1ocnl2bmlhOmJlZm9yZXtjb250ZW50OiJcZjZmMiJ9LmZhLXBpbGxzOmJlZm9yZXtjb250ZW50OiJcZjQ4NCJ9LmZhLWZhY2UtZ3Jpbi13aWRlOmJlZm9yZSwuZmEtZ3Jpbi1hbHQ6YmVmb3Jle2NvbnRlbnQ6IlxmNTgxIn0uZmEtdG9vdGg6YmVmb3Jle2NvbnRlbnQ6IlxmNWM5In0uZmEtdjpiZWZvcmV7Y29udGVudDoiXDU2In0uZmEtYmFuZ2xhZGVzaGktdGFrYS1zaWduOmJlZm9yZXtjb250ZW50OiJcZTJlNiJ9LmZhLWJpY3ljbGU6YmVmb3Jle2NvbnRlbnQ6IlxmMjA2In0uZmEtcm9kLWFzY2xlcGl1czpiZWZvcmUsLmZhLXJvZC1zbmFrZTpiZWZvcmUsLmZhLXN0YWZmLWFlc2N1bGFwaXVzOmJlZm9yZSwuZmEtc3RhZmYtc25ha2U6YmVmb3Jle2NvbnRlbnQ6IlxlNTc5In0uZmEtaGVhZC1zaWRlLWNvdWdoLXNsYXNoOmJlZm9yZXtjb250ZW50OiJcZTA2MiJ9LmZhLWFtYnVsYW5jZTpiZWZvcmUsLmZhLXRydWNrLW1lZGljYWw6YmVmb3Jle2NvbnRlbnQ6IlxmMGY5In0uZmEtd2hlYXQtYXduLWNpcmNsZS1leGNsYW1hdGlvbjpiZWZvcmV7Y29udGVudDoiXGU1OTgifS5mYS1zbm93bWFuOmJlZm9yZXtjb250ZW50OiJcZjdkMCJ9LmZhLW1vcnRhci1wZXN0bGU6YmVmb3Jle2NvbnRlbnQ6IlxmNWE3In0uZmEtcm9hZC1iYXJyaWVyOmJlZm9yZXtjb250ZW50OiJcZTU2MiJ9LmZhLXNjaG9vbDpiZWZvcmV7Y29udGVudDoiXGY1NDkifS5mYS1pZ2xvbzpiZWZvcmV7Y29udGVudDoiXGY3YWUifS5mYS1qb2ludDpiZWZvcmV7Y29udGVudDoiXGY1OTUifS5mYS1hbmdsZS1yaWdodDpiZWZvcmV7Y29udGVudDoiXGYxMDUifS5mYS1ob3JzZTpiZWZvcmV7Y29udGVudDoiXGY2ZjAifS5mYS1xOmJlZm9yZXtjb250ZW50OiJcNTEifS5mYS1nOmJlZm9yZXtjb250ZW50OiJcNDcifS5mYS1ub3Rlcy1tZWRpY2FsOmJlZm9yZXtjb250ZW50OiJcZjQ4MSJ9LmZhLXRlbXBlcmF0dXJlLTI6YmVmb3JlLC5mYS10ZW1wZXJhdHVyZS1oYWxmOmJlZm9yZSwuZmEtdGhlcm1vbWV0ZXItMjpiZWZvcmUsLmZhLXRoZXJtb21ldGVyLWhhbGY6YmVmb3Jle2NvbnRlbnQ6IlxmMmM5In0uZmEtZG9uZy1zaWduOmJlZm9yZXtjb250ZW50OiJcZTE2OSJ9LmZhLWNhcHN1bGVzOmJlZm9yZXtjb250ZW50OiJcZjQ2YiJ9LmZhLXBvby1ib2x0OmJlZm9yZSwuZmEtcG9vLXN0b3JtOmJlZm9yZXtjb250ZW50OiJcZjc1YSJ9LmZhLWZhY2UtZnJvd24tb3BlbjpiZWZvcmUsLmZhLWZyb3duLW9wZW46YmVmb3Jle2NvbnRlbnQ6IlxmNTdhIn0uZmEtaGFuZC1wb2ludC11cDpiZWZvcmV7Y29udGVudDoiXGYwYTYifS5mYS1tb25leS1iaWxsOmJlZm9yZXtjb250ZW50OiJcZjBkNiJ9LmZhLWJvb2ttYXJrOmJlZm9yZXtjb250ZW50OiJcZjAyZSJ9LmZhLWFsaWduLWp1c3RpZnk6YmVmb3Jle2NvbnRlbnQ6IlxmMDM5In0uZmEtdW1icmVsbGEtYmVhY2g6YmVmb3Jle2NvbnRlbnQ6IlxmNWNhIn0uZmEtaGVsbWV0LXVuOmJlZm9yZXtjb250ZW50OiJcZTUwMyJ9LmZhLWJ1bGxzZXllOmJlZm9yZXtjb250ZW50OiJcZjE0MCJ9LmZhLWJhY29uOmJlZm9yZXtjb250ZW50OiJcZjdlNSJ9LmZhLWhhbmQtcG9pbnQtZG93bjpiZWZvcmV7Y29udGVudDoiXGYwYTcifS5mYS1hcnJvdy11cC1mcm9tLWJyYWNrZXQ6YmVmb3Jle2NvbnRlbnQ6IlxlMDlhIn0uZmEtZm9sZGVyLWJsYW5rOmJlZm9yZSwuZmEtZm9sZGVyOmJlZm9yZXtjb250ZW50OiJcZjA3YiJ9LmZhLWZpbGUtbWVkaWNhbC1hbHQ6YmVmb3JlLC5mYS1maWxlLXdhdmVmb3JtOmJlZm9yZXtjb250ZW50OiJcZjQ3OCJ9LmZhLXJhZGlhdGlvbjpiZWZvcmV7Y29udGVudDoiXGY3YjkifS5mYS1jaGFydC1zaW1wbGU6YmVmb3Jle2NvbnRlbnQ6IlxlNDczIn0uZmEtbWFycy1zdHJva2U6YmVmb3Jle2NvbnRlbnQ6IlxmMjI5In0uZmEtdmlhbDpiZWZvcmV7Y29udGVudDoiXGY0OTIifS5mYS1kYXNoYm9hcmQ6YmVmb3JlLC5mYS1nYXVnZS1tZWQ6YmVmb3JlLC5mYS1nYXVnZTpiZWZvcmUsLmZhLXRhY2hvbWV0ZXItYWx0LWF2ZXJhZ2U6YmVmb3Jle2NvbnRlbnQ6IlxmNjI0In0uZmEtbWFnaWMtd2FuZC1zcGFya2xlczpiZWZvcmUsLmZhLXdhbmQtbWFnaWMtc3BhcmtsZXM6YmVmb3Jle2NvbnRlbnQ6IlxlMmNhIn0uZmEtZTpiZWZvcmV7Y29udGVudDoiXDQ1In0uZmEtcGVuLWFsdDpiZWZvcmUsLmZhLXBlbi1jbGlwOmJlZm9yZXtjb250ZW50OiJcZjMwNSJ9LmZhLWJyaWRnZS1jaXJjbGUtZXhjbGFtYXRpb246YmVmb3Jle2NvbnRlbnQ6IlxlNGNhIn0uZmEtdXNlcjpiZWZvcmV7Y29udGVudDoiXGYwMDcifS5mYS1zY2hvb2wtY2lyY2xlLWNoZWNrOmJlZm9yZXtjb250ZW50OiJcZTU2YiJ9LmZhLWR1bXBzdGVyOmJlZm9yZXtjb250ZW50OiJcZjc5MyJ9LmZhLXNodXR0bGUtdmFuOmJlZm9yZSwuZmEtdmFuLXNodXR0bGU6YmVmb3Jle2NvbnRlbnQ6IlxmNWI2In0uZmEtYnVpbGRpbmctdXNlcjpiZWZvcmV7Y29udGVudDoiXGU0ZGEifS5mYS1jYXJldC1zcXVhcmUtbGVmdDpiZWZvcmUsLmZhLXNxdWFyZS1jYXJldC1sZWZ0OmJlZm9yZXtjb250ZW50OiJcZjE5MSJ9LmZhLWhpZ2hsaWdodGVyOmJlZm9yZXtjb250ZW50OiJcZjU5MSJ9LmZhLWtleTpiZWZvcmV7Y29udGVudDoiXGYwODQifS5mYS1idWxsaG9ybjpiZWZvcmV7Y29udGVudDoiXGYwYTEifS5mYS1nbG9iZTpiZWZvcmV7Y29udGVudDoiXGYwYWMifS5mYS1zeW5hZ29ndWU6YmVmb3Jle2NvbnRlbnQ6IlxmNjliIn0uZmEtcGVyc29uLWhhbGYtZHJlc3M6YmVmb3Jle2NvbnRlbnQ6IlxlNTQ4In0uZmEtcm9hZC1icmlkZ2U6YmVmb3Jle2NvbnRlbnQ6IlxlNTYzIn0uZmEtbG9jYXRpb24tYXJyb3c6YmVmb3Jle2NvbnRlbnQ6IlxmMTI0In0uZmEtYzpiZWZvcmV7Y29udGVudDoiXDQzIn0uZmEtdGFibGV0LWJ1dHRvbjpiZWZvcmV7Y29udGVudDoiXGYxMGEifS5mYS1idWlsZGluZy1sb2NrOmJlZm9yZXtjb250ZW50OiJcZTRkNiJ9LmZhLXBpenphLXNsaWNlOmJlZm9yZXtjb250ZW50OiJcZjgxOCJ9LmZhLW1vbmV5LWJpbGwtd2F2ZTpiZWZvcmV7Y29udGVudDoiXGY1M2EifS5mYS1hcmVhLWNoYXJ0OmJlZm9yZSwuZmEtY2hhcnQtYXJlYTpiZWZvcmV7Y29udGVudDoiXGYxZmUifS5mYS1ob3VzZS1mbGFnOmJlZm9yZXtjb250ZW50OiJcZTUwZCJ9LmZhLXBlcnNvbi1jaXJjbGUtbWludXM6YmVmb3Jle2NvbnRlbnQ6IlxlNTQwIn0uZmEtYmFuOmJlZm9yZSwuZmEtY2FuY2VsOmJlZm9yZXtjb250ZW50OiJcZjA1ZSJ9LmZhLWNhbWVyYS1yb3RhdGU6YmVmb3Jle2NvbnRlbnQ6IlxlMGQ4In0uZmEtYWlyLWZyZXNoZW5lcjpiZWZvcmUsLmZhLXNwcmF5LWNhbi1zcGFya2xlczpiZWZvcmV7Y29udGVudDoiXGY1ZDAifS5mYS1zdGFyOmJlZm9yZXtjb250ZW50OiJcZjAwNSJ9LmZhLXJlcGVhdDpiZWZvcmV7Y29udGVudDoiXGYzNjMifS5mYS1jcm9zczpiZWZvcmV7Y29udGVudDoiXGY2NTQifS5mYS1ib3g6YmVmb3Jle2NvbnRlbnQ6IlxmNDY2In0uZmEtdmVudXMtbWFyczpiZWZvcmV7Y29udGVudDoiXGYyMjgifS5mYS1hcnJvdy1wb2ludGVyOmJlZm9yZSwuZmEtbW91c2UtcG9pbnRlcjpiZWZvcmV7Y29udGVudDoiXGYyNDUifS5mYS1leHBhbmQtYXJyb3dzLWFsdDpiZWZvcmUsLmZhLW1heGltaXplOmJlZm9yZXtjb250ZW50OiJcZjMxZSJ9LmZhLWNoYXJnaW5nLXN0YXRpb246YmVmb3Jle2NvbnRlbnQ6IlxmNWU3In0uZmEtc2hhcGVzOmJlZm9yZSwuZmEtdHJpYW5nbGUtY2lyY2xlLXNxdWFyZTpiZWZvcmV7Y29udGVudDoiXGY2MWYifS5mYS1yYW5kb206YmVmb3JlLC5mYS1zaHVmZmxlOmJlZm9yZXtjb250ZW50OiJcZjA3NCJ9LmZhLXBlcnNvbi1ydW5uaW5nOmJlZm9yZSwuZmEtcnVubmluZzpiZWZvcmV7Y29udGVudDoiXGY3MGMifS5mYS1tb2JpbGUtcmV0cm86YmVmb3Jle2NvbnRlbnQ6IlxlNTI3In0uZmEtZ3JpcC1saW5lcy12ZXJ0aWNhbDpiZWZvcmV7Y29udGVudDoiXGY3YTUifS5mYS1zcGlkZXI6YmVmb3Jle2NvbnRlbnQ6IlxmNzE3In0uZmEtaGFuZHMtYm91bmQ6YmVmb3Jle2NvbnRlbnQ6IlxlNGY5In0uZmEtZmlsZS1pbnZvaWNlLWRvbGxhcjpiZWZvcmV7Y29udGVudDoiXGY1NzEifS5mYS1wbGFuZS1jaXJjbGUtZXhjbGFtYXRpb246YmVmb3Jle2NvbnRlbnQ6IlxlNTU2In0uZmEteC1yYXk6YmVmb3Jle2NvbnRlbnQ6IlxmNDk3In0uZmEtc3BlbGwtY2hlY2s6YmVmb3Jle2NvbnRlbnQ6IlxmODkxIn0uZmEtc2xhc2g6YmVmb3Jle2NvbnRlbnQ6IlxmNzE1In0uZmEtY29tcHV0ZXItbW91c2U6YmVmb3JlLC5mYS1tb3VzZTpiZWZvcmV7Y29udGVudDoiXGY4Y2MifS5mYS1hcnJvdy1yaWdodC10by1icmFja2V0OmJlZm9yZSwuZmEtc2lnbi1pbjpiZWZvcmV7Y29udGVudDoiXGYwOTAifS5mYS1zaG9wLXNsYXNoOmJlZm9yZSwuZmEtc3RvcmUtYWx0LXNsYXNoOmJlZm9yZXtjb250ZW50OiJcZTA3MCJ9LmZhLXNlcnZlcjpiZWZvcmV7Y29udGVudDoiXGYyMzMifS5mYS12aXJ1cy1jb3ZpZC1zbGFzaDpiZWZvcmV7Y29udGVudDoiXGU0YTkifS5mYS1zaG9wLWxvY2s6YmVmb3Jle2NvbnRlbnQ6IlxlNGE1In0uZmEtaG91cmdsYXNzLTE6YmVmb3JlLC5mYS1ob3VyZ2xhc3Mtc3RhcnQ6YmVmb3Jle2NvbnRlbnQ6IlxmMjUxIn0uZmEtYmxlbmRlci1waG9uZTpiZWZvcmV7Y29udGVudDoiXGY2YjYifS5mYS1idWlsZGluZy13aGVhdDpiZWZvcmV7Y29udGVudDoiXGU0ZGIifS5mYS1wZXJzb24tYnJlYXN0ZmVlZGluZzpiZWZvcmV7Y29udGVudDoiXGU1M2EifS5mYS1yaWdodC10by1icmFja2V0OmJlZm9yZSwuZmEtc2lnbi1pbi1hbHQ6YmVmb3Jle2NvbnRlbnQ6IlxmMmY2In0uZmEtdmVudXM6YmVmb3Jle2NvbnRlbnQ6IlxmMjIxIn0uZmEtcGFzc3BvcnQ6YmVmb3Jle2NvbnRlbnQ6IlxmNWFiIn0uZmEtaGVhcnQtcHVsc2U6YmVmb3JlLC5mYS1oZWFydGJlYXQ6YmVmb3Jle2NvbnRlbnQ6IlxmMjFlIn0uZmEtcGVvcGxlLWNhcnJ5LWJveDpiZWZvcmUsLmZhLXBlb3BsZS1jYXJyeTpiZWZvcmV7Y29udGVudDoiXGY0Y2UifS5mYS10ZW1wZXJhdHVyZS1oaWdoOmJlZm9yZXtjb250ZW50OiJcZjc2OSJ9LmZhLW1pY3JvY2hpcDpiZWZvcmV7Y29udGVudDoiXGYyZGIifS5mYS1jcm93bjpiZWZvcmV7Y29udGVudDoiXGY1MjEifS5mYS13ZWlnaHQtaGFuZ2luZzpiZWZvcmV7Y29udGVudDoiXGY1Y2QifS5mYS14bWFya3MtbGluZXM6YmVmb3Jle2NvbnRlbnQ6IlxlNTlhIn0uZmEtZmlsZS1wcmVzY3JpcHRpb246YmVmb3Jle2NvbnRlbnQ6IlxmNTcyIn0uZmEtd2VpZ2h0LXNjYWxlOmJlZm9yZSwuZmEtd2VpZ2h0OmJlZm9yZXtjb250ZW50OiJcZjQ5NiJ9LmZhLXVzZXItZnJpZW5kczpiZWZvcmUsLmZhLXVzZXItZ3JvdXA6YmVmb3Jle2NvbnRlbnQ6IlxmNTAwIn0uZmEtYXJyb3ctdXAtYS16OmJlZm9yZSwuZmEtc29ydC1hbHBoYS11cDpiZWZvcmV7Y29udGVudDoiXGYxNWUifS5mYS1jaGVzcy1rbmlnaHQ6YmVmb3Jle2NvbnRlbnQ6IlxmNDQxIn0uZmEtZmFjZS1sYXVnaC1zcXVpbnQ6YmVmb3JlLC5mYS1sYXVnaC1zcXVpbnQ6YmVmb3Jle2NvbnRlbnQ6IlxmNTliIn0uZmEtd2hlZWxjaGFpcjpiZWZvcmV7Y29udGVudDoiXGYxOTMifS5mYS1hcnJvdy1jaXJjbGUtdXA6YmVmb3JlLC5mYS1jaXJjbGUtYXJyb3ctdXA6YmVmb3Jle2NvbnRlbnQ6IlxmMGFhIn0uZmEtdG9nZ2xlLW9uOmJlZm9yZXtjb250ZW50OiJcZjIwNSJ9LmZhLXBlcnNvbi13YWxraW5nOmJlZm9yZSwuZmEtd2Fsa2luZzpiZWZvcmV7Y29udGVudDoiXGY1NTQifS5mYS1sOmJlZm9yZXtjb250ZW50OiJcNGMifS5mYS1maXJlOmJlZm9yZXtjb250ZW50OiJcZjA2ZCJ9LmZhLWJlZC1wdWxzZTpiZWZvcmUsLmZhLXByb2NlZHVyZXM6YmVmb3Jle2NvbnRlbnQ6IlxmNDg3In0uZmEtc2h1dHRsZS1zcGFjZTpiZWZvcmUsLmZhLXNwYWNlLXNodXR0bGU6YmVmb3Jle2NvbnRlbnQ6IlxmMTk3In0uZmEtZmFjZS1sYXVnaDpiZWZvcmUsLmZhLWxhdWdoOmJlZm9yZXtjb250ZW50OiJcZjU5OSJ9LmZhLWZvbGRlci1vcGVuOmJlZm9yZXtjb250ZW50OiJcZjA3YyJ9LmZhLWhlYXJ0LWNpcmNsZS1wbHVzOmJlZm9yZXtjb250ZW50OiJcZTUwMCJ9LmZhLWNvZGUtZm9yazpiZWZvcmV7Y29udGVudDoiXGUxM2IifS5mYS1jaXR5OmJlZm9yZXtjb250ZW50OiJcZjY0ZiJ9LmZhLW1pY3JvcGhvbmUtYWx0OmJlZm9yZSwuZmEtbWljcm9waG9uZS1saW5lczpiZWZvcmV7Y29udGVudDoiXGYzYzkifS5mYS1wZXBwZXItaG90OmJlZm9yZXtjb250ZW50OiJcZjgxNiJ9LmZhLXVubG9jazpiZWZvcmV7Y29udGVudDoiXGYwOWMifS5mYS1jb2xvbi1zaWduOmJlZm9yZXtjb250ZW50OiJcZTE0MCJ9LmZhLWhlYWRzZXQ6YmVmb3Jle2NvbnRlbnQ6IlxmNTkwIn0uZmEtc3RvcmUtc2xhc2g6YmVmb3Jle2NvbnRlbnQ6IlxlMDcxIn0uZmEtcm9hZC1jaXJjbGUteG1hcms6YmVmb3Jle2NvbnRlbnQ6IlxlNTY2In0uZmEtdXNlci1taW51czpiZWZvcmV7Y29udGVudDoiXGY1MDMifS5mYS1tYXJzLXN0cm9rZS11cDpiZWZvcmUsLmZhLW1hcnMtc3Ryb2tlLXY6YmVmb3Jle2NvbnRlbnQ6IlxmMjJhIn0uZmEtY2hhbXBhZ25lLWdsYXNzZXM6YmVmb3JlLC5mYS1nbGFzcy1jaGVlcnM6YmVmb3Jle2NvbnRlbnQ6IlxmNzlmIn0uZmEtY2xpcGJvYXJkOmJlZm9yZXtjb250ZW50OiJcZjMyOCJ9LmZhLWhvdXNlLWNpcmNsZS1leGNsYW1hdGlvbjpiZWZvcmV7Y29udGVudDoiXGU1MGEifS5mYS1maWxlLWFycm93LXVwOmJlZm9yZSwuZmEtZmlsZS11cGxvYWQ6YmVmb3Jle2NvbnRlbnQ6IlxmNTc0In0uZmEtd2lmaS0zOmJlZm9yZSwuZmEtd2lmaS1zdHJvbmc6YmVmb3JlLC5mYS13aWZpOmJlZm9yZXtjb250ZW50OiJcZjFlYiJ9LmZhLWJhdGg6YmVmb3JlLC5mYS1iYXRodHViOmJlZm9yZXtjb250ZW50OiJcZjJjZCJ9LmZhLXVuZGVybGluZTpiZWZvcmV7Y29udGVudDoiXGYwY2QifS5mYS11c2VyLWVkaXQ6YmVmb3JlLC5mYS11c2VyLXBlbjpiZWZvcmV7Y29udGVudDoiXGY0ZmYifS5mYS1zaWduYXR1cmU6YmVmb3Jle2NvbnRlbnQ6IlxmNWI3In0uZmEtc3Ryb29wd2FmZWw6YmVmb3Jle2NvbnRlbnQ6IlxmNTUxIn0uZmEtYm9sZDpiZWZvcmV7Y29udGVudDoiXGYwMzIifS5mYS1hbmNob3ItbG9jazpiZWZvcmV7Y29udGVudDoiXGU0YWQifS5mYS1idWlsZGluZy1uZ286YmVmb3Jle2NvbnRlbnQ6IlxlNGQ3In0uZmEtbWFuYXQtc2lnbjpiZWZvcmV7Y29udGVudDoiXGUxZDUifS5mYS1ub3QtZXF1YWw6YmVmb3Jle2NvbnRlbnQ6IlxmNTNlIn0uZmEtYm9yZGVyLXN0eWxlOmJlZm9yZSwuZmEtYm9yZGVyLXRvcC1sZWZ0OmJlZm9yZXtjb250ZW50OiJcZjg1MyJ9LmZhLW1hcC1sb2NhdGlvbi1kb3Q6YmVmb3JlLC5mYS1tYXAtbWFya2VkLWFsdDpiZWZvcmV7Y29udGVudDoiXGY1YTAifS5mYS1qZWRpOmJlZm9yZXtjb250ZW50OiJcZjY2OSJ9LmZhLXBvbGw6YmVmb3JlLC5mYS1zcXVhcmUtcG9sbC12ZXJ0aWNhbDpiZWZvcmV7Y29udGVudDoiXGY2ODEifS5mYS1tdWctaG90OmJlZm9yZXtjb250ZW50OiJcZjdiNiJ9LmZhLWJhdHRlcnktY2FyOmJlZm9yZSwuZmEtY2FyLWJhdHRlcnk6YmVmb3Jle2NvbnRlbnQ6IlxmNWRmIn0uZmEtZ2lmdDpiZWZvcmV7Y29udGVudDoiXGYwNmIifS5mYS1kaWNlLXR3bzpiZWZvcmV7Y29udGVudDoiXGY1MjgifS5mYS1jaGVzcy1xdWVlbjpiZWZvcmV7Y29udGVudDoiXGY0NDUifS5mYS1nbGFzc2VzOmJlZm9yZXtjb250ZW50OiJcZjUzMCJ9LmZhLWNoZXNzLWJvYXJkOmJlZm9yZXtjb250ZW50OiJcZjQzYyJ9LmZhLWJ1aWxkaW5nLWNpcmNsZS1jaGVjazpiZWZvcmV7Y29udGVudDoiXGU0ZDIifS5mYS1wZXJzb24tY2hhbGtib2FyZDpiZWZvcmV7Y29udGVudDoiXGU1M2QifS5mYS1tYXJzLXN0cm9rZS1oOmJlZm9yZSwuZmEtbWFycy1zdHJva2UtcmlnaHQ6YmVmb3Jle2NvbnRlbnQ6IlxmMjJiIn0uZmEtaGFuZC1iYWNrLWZpc3Q6YmVmb3JlLC5mYS1oYW5kLXJvY2s6YmVmb3Jle2NvbnRlbnQ6IlxmMjU1In0uZmEtY2FyZXQtc3F1YXJlLXVwOmJlZm9yZSwuZmEtc3F1YXJlLWNhcmV0LXVwOmJlZm9yZXtjb250ZW50OiJcZjE1MSJ9LmZhLWNsb3VkLXNob3dlcnMtd2F0ZXI6YmVmb3Jle2NvbnRlbnQ6IlxlNGU0In0uZmEtYmFyLWNoYXJ0OmJlZm9yZSwuZmEtY2hhcnQtYmFyOmJlZm9yZXtjb250ZW50OiJcZjA4MCJ9LmZhLWhhbmRzLWJ1YmJsZXM6YmVmb3JlLC5mYS1oYW5kcy13YXNoOmJlZm9yZXtjb250ZW50OiJcZTA1ZSJ9LmZhLWxlc3MtdGhhbi1lcXVhbDpiZWZvcmV7Y29udGVudDoiXGY1MzcifS5mYS10cmFpbjpiZWZvcmV7Y29udGVudDoiXGYyMzgifS5mYS1leWUtbG93LXZpc2lvbjpiZWZvcmUsLmZhLWxvdy12aXNpb246YmVmb3Jle2NvbnRlbnQ6IlxmMmE4In0uZmEtY3JvdzpiZWZvcmV7Y29udGVudDoiXGY1MjAifS5mYS1zYWlsYm9hdDpiZWZvcmV7Y29udGVudDoiXGU0NDUifS5mYS13aW5kb3ctcmVzdG9yZTpiZWZvcmV7Y29udGVudDoiXGYyZDIifS5mYS1wbHVzLXNxdWFyZTpiZWZvcmUsLmZhLXNxdWFyZS1wbHVzOmJlZm9yZXtjb250ZW50OiJcZjBmZSJ9LmZhLXRvcmlpLWdhdGU6YmVmb3Jle2NvbnRlbnQ6IlxmNmExIn0uZmEtZnJvZzpiZWZvcmV7Y29udGVudDoiXGY1MmUifS5mYS1idWNrZXQ6YmVmb3Jle2NvbnRlbnQ6IlxlNGNmIn0uZmEtaW1hZ2U6YmVmb3Jle2NvbnRlbnQ6IlxmMDNlIn0uZmEtbWljcm9waG9uZTpiZWZvcmV7Y29udGVudDoiXGYxMzAifS5mYS1jb3c6YmVmb3Jle2NvbnRlbnQ6IlxmNmM4In0uZmEtY2FyZXQtdXA6YmVmb3Jle2NvbnRlbnQ6IlxmMGQ4In0uZmEtc2NyZXdkcml2ZXI6YmVmb3Jle2NvbnRlbnQ6IlxmNTRhIn0uZmEtZm9sZGVyLWNsb3NlZDpiZWZvcmV7Y29udGVudDoiXGUxODUifS5mYS1ob3VzZS10c3VuYW1pOmJlZm9yZXtjb250ZW50OiJcZTUxNSJ9LmZhLXNxdWFyZS1uZmk6YmVmb3Jle2NvbnRlbnQ6IlxlNTc2In0uZmEtYXJyb3ctdXAtZnJvbS1ncm91bmQtd2F0ZXI6YmVmb3Jle2NvbnRlbnQ6IlxlNGI1In0uZmEtZ2xhc3MtbWFydGluaS1hbHQ6YmVmb3JlLC5mYS1tYXJ0aW5pLWdsYXNzOmJlZm9yZXtjb250ZW50OiJcZjU3YiJ9LmZhLXJvdGF0ZS1iYWNrOmJlZm9yZSwuZmEtcm90YXRlLWJhY2t3YXJkOmJlZm9yZSwuZmEtcm90YXRlLWxlZnQ6YmVmb3JlLC5mYS11bmRvLWFsdDpiZWZvcmV7Y29udGVudDoiXGYyZWEifS5mYS1jb2x1bW5zOmJlZm9yZSwuZmEtdGFibGUtY29sdW1uczpiZWZvcmV7Y29udGVudDoiXGYwZGIifS5mYS1sZW1vbjpiZWZvcmV7Y29udGVudDoiXGYwOTQifS5mYS1oZWFkLXNpZGUtbWFzazpiZWZvcmV7Y29udGVudDoiXGUwNjMifS5mYS1oYW5kc2hha2U6YmVmb3Jle2NvbnRlbnQ6IlxmMmI1In0uZmEtZ2VtOmJlZm9yZXtjb250ZW50OiJcZjNhNSJ9LmZhLWRvbGx5LWJveDpiZWZvcmUsLmZhLWRvbGx5OmJlZm9yZXtjb250ZW50OiJcZjQ3MiJ9LmZhLXNtb2tpbmc6YmVmb3Jle2NvbnRlbnQ6IlxmNDhkIn0uZmEtY29tcHJlc3MtYXJyb3dzLWFsdDpiZWZvcmUsLmZhLW1pbmltaXplOmJlZm9yZXtjb250ZW50OiJcZjc4YyJ9LmZhLW1vbnVtZW50OmJlZm9yZXtjb250ZW50OiJcZjVhNiJ9LmZhLXNub3dwbG93OmJlZm9yZXtjb250ZW50OiJcZjdkMiJ9LmZhLWFuZ2xlLWRvdWJsZS1yaWdodDpiZWZvcmUsLmZhLWFuZ2xlcy1yaWdodDpiZWZvcmV7Y29udGVudDoiXGYxMDEifS5mYS1jYW5uYWJpczpiZWZvcmV7Y29udGVudDoiXGY1NWYifS5mYS1jaXJjbGUtcGxheTpiZWZvcmUsLmZhLXBsYXktY2lyY2xlOmJlZm9yZXtjb250ZW50OiJcZjE0NCJ9LmZhLXRhYmxldHM6YmVmb3Jle2NvbnRlbnQ6IlxmNDkwIn0uZmEtZXRoZXJuZXQ6YmVmb3Jle2NvbnRlbnQ6IlxmNzk2In0uZmEtZXVyOmJlZm9yZSwuZmEtZXVyby1zaWduOmJlZm9yZSwuZmEtZXVybzpiZWZvcmV7Y29udGVudDoiXGYxNTMifS5mYS1jaGFpcjpiZWZvcmV7Y29udGVudDoiXGY2YzAifS5mYS1jaGVjay1jaXJjbGU6YmVmb3JlLC5mYS1jaXJjbGUtY2hlY2s6YmVmb3Jle2NvbnRlbnQ6IlxmMDU4In0uZmEtY2lyY2xlLXN0b3A6YmVmb3JlLC5mYS1zdG9wLWNpcmNsZTpiZWZvcmV7Y29udGVudDoiXGYyOGQifS5mYS1jb21wYXNzLWRyYWZ0aW5nOmJlZm9yZSwuZmEtZHJhZnRpbmctY29tcGFzczpiZWZvcmV7Y29udGVudDoiXGY1NjgifS5mYS1wbGF0ZS13aGVhdDpiZWZvcmV7Y29udGVudDoiXGU1NWEifS5mYS1pY2ljbGVzOmJlZm9yZXtjb250ZW50OiJcZjdhZCJ9LmZhLXBlcnNvbi1zaGVsdGVyOmJlZm9yZXtjb250ZW50OiJcZTU0ZiJ9LmZhLW5ldXRlcjpiZWZvcmV7Y29udGVudDoiXGYyMmMifS5mYS1pZC1iYWRnZTpiZWZvcmV7Y29udGVudDoiXGYyYzEifS5mYS1tYXJrZXI6YmVmb3Jle2NvbnRlbnQ6IlxmNWExIn0uZmEtZmFjZS1sYXVnaC1iZWFtOmJlZm9yZSwuZmEtbGF1Z2gtYmVhbTpiZWZvcmV7Y29udGVudDoiXGY1OWEifS5mYS1oZWxpY29wdGVyLXN5bWJvbDpiZWZvcmV7Y29udGVudDoiXGU1MDIifS5mYS11bml2ZXJzYWwtYWNjZXNzOmJlZm9yZXtjb250ZW50OiJcZjI5YSJ9LmZhLWNoZXZyb24tY2lyY2xlLXVwOmJlZm9yZSwuZmEtY2lyY2xlLWNoZXZyb24tdXA6YmVmb3Jle2NvbnRlbnQ6IlxmMTM5In0uZmEtbGFyaS1zaWduOmJlZm9yZXtjb250ZW50OiJcZTFjOCJ9LmZhLXZvbGNhbm86YmVmb3Jle2NvbnRlbnQ6IlxmNzcwIn0uZmEtcGVyc29uLXdhbGtpbmctZGFzaGVkLWxpbmUtYXJyb3ctcmlnaHQ6YmVmb3Jle2NvbnRlbnQ6IlxlNTUzIn0uZmEtZ2JwOmJlZm9yZSwuZmEtcG91bmQtc2lnbjpiZWZvcmUsLmZhLXN0ZXJsaW5nLXNpZ246YmVmb3Jle2NvbnRlbnQ6IlxmMTU0In0uZmEtdmlydXNlczpiZWZvcmV7Y29udGVudDoiXGUwNzYifS5mYS1zcXVhcmUtcGVyc29uLWNvbmZpbmVkOmJlZm9yZXtjb250ZW50OiJcZTU3NyJ9LmZhLXVzZXItdGllOmJlZm9yZXtjb250ZW50OiJcZjUwOCJ9LmZhLWFycm93LWRvd24tbG9uZzpiZWZvcmUsLmZhLWxvbmctYXJyb3ctZG93bjpiZWZvcmV7Y29udGVudDoiXGYxNzUifS5mYS10ZW50LWFycm93LWRvd24tdG8tbGluZTpiZWZvcmV7Y29udGVudDoiXGU1N2UifS5mYS1jZXJ0aWZpY2F0ZTpiZWZvcmV7Y29udGVudDoiXGYwYTMifS5mYS1tYWlsLXJlcGx5LWFsbDpiZWZvcmUsLmZhLXJlcGx5LWFsbDpiZWZvcmV7Y29udGVudDoiXGYxMjIifS5mYS1zdWl0Y2FzZTpiZWZvcmV7Y29udGVudDoiXGYwZjIifS5mYS1wZXJzb24tc2thdGluZzpiZWZvcmUsLmZhLXNrYXRpbmc6YmVmb3Jle2NvbnRlbnQ6IlxmN2M1In0uZmEtZmlsdGVyLWNpcmNsZS1kb2xsYXI6YmVmb3JlLC5mYS1mdW5uZWwtZG9sbGFyOmJlZm9yZXtjb250ZW50OiJcZjY2MiJ9LmZhLWNhbWVyYS1yZXRybzpiZWZvcmV7Y29udGVudDoiXGYwODMifS5mYS1hcnJvdy1jaXJjbGUtZG93bjpiZWZvcmUsLmZhLWNpcmNsZS1hcnJvdy1kb3duOmJlZm9yZXtjb250ZW50OiJcZjBhYiJ9LmZhLWFycm93LXJpZ2h0LXRvLWZpbGU6YmVmb3JlLC5mYS1maWxlLWltcG9ydDpiZWZvcmV7Y29udGVudDoiXGY1NmYifS5mYS1leHRlcm5hbC1saW5rLXNxdWFyZTpiZWZvcmUsLmZhLXNxdWFyZS1hcnJvdy11cC1yaWdodDpiZWZvcmV7Y29udGVudDoiXGYxNGMifS5mYS1ib3gtb3BlbjpiZWZvcmV7Y29udGVudDoiXGY0OWUifS5mYS1zY3JvbGw6YmVmb3Jle2NvbnRlbnQ6IlxmNzBlIn0uZmEtc3BhOmJlZm9yZXtjb250ZW50OiJcZjViYiJ9LmZhLWxvY2F0aW9uLXBpbi1sb2NrOmJlZm9yZXtjb250ZW50OiJcZTUxZiJ9LmZhLXBhdXNlOmJlZm9yZXtjb250ZW50OiJcZjA0YyJ9LmZhLWhpbGwtYXZhbGFuY2hlOmJlZm9yZXtjb250ZW50OiJcZTUwNyJ9LmZhLXRlbXBlcmF0dXJlLTA6YmVmb3JlLC5mYS10ZW1wZXJhdHVyZS1lbXB0eTpiZWZvcmUsLmZhLXRoZXJtb21ldGVyLTA6YmVmb3JlLC5mYS10aGVybW9tZXRlci1lbXB0eTpiZWZvcmV7Y29udGVudDoiXGYyY2IifS5mYS1ib21iOmJlZm9yZXtjb250ZW50OiJcZjFlMiJ9LmZhLXJlZ2lzdGVyZWQ6YmVmb3Jle2NvbnRlbnQ6IlxmMjVkIn0uZmEtYWRkcmVzcy1jYXJkOmJlZm9yZSwuZmEtY29udGFjdC1jYXJkOmJlZm9yZSwuZmEtdmNhcmQ6YmVmb3Jle2NvbnRlbnQ6IlxmMmJiIn0uZmEtYmFsYW5jZS1zY2FsZS1yaWdodDpiZWZvcmUsLmZhLXNjYWxlLXVuYmFsYW5jZWQtZmxpcDpiZWZvcmV7Y29udGVudDoiXGY1MTYifS5mYS1zdWJzY3JpcHQ6YmVmb3Jle2NvbnRlbnQ6IlxmMTJjIn0uZmEtZGlhbW9uZC10dXJuLXJpZ2h0OmJlZm9yZSwuZmEtZGlyZWN0aW9uczpiZWZvcmV7Y29udGVudDoiXGY1ZWIifS5mYS1idXJzdDpiZWZvcmV7Y29udGVudDoiXGU0ZGMifS5mYS1ob3VzZS1sYXB0b3A6YmVmb3JlLC5mYS1sYXB0b3AtaG91c2U6YmVmb3Jle2NvbnRlbnQ6IlxlMDY2In0uZmEtZmFjZS10aXJlZDpiZWZvcmUsLmZhLXRpcmVkOmJlZm9yZXtjb250ZW50OiJcZjVjOCJ9LmZhLW1vbmV5LWJpbGxzOmJlZm9yZXtjb250ZW50OiJcZTFmMyJ9LmZhLXNtb2c6YmVmb3Jle2NvbnRlbnQ6IlxmNzVmIn0uZmEtY3J1dGNoOmJlZm9yZXtjb250ZW50OiJcZjdmNyJ9LmZhLWNsb3VkLWFycm93LXVwOmJlZm9yZSwuZmEtY2xvdWQtdXBsb2FkLWFsdDpiZWZvcmUsLmZhLWNsb3VkLXVwbG9hZDpiZWZvcmV7Y29udGVudDoiXGYwZWUifS5mYS1wYWxldHRlOmJlZm9yZXtjb250ZW50OiJcZjUzZiJ9LmZhLWFycm93cy10dXJuLXJpZ2h0OmJlZm9yZXtjb250ZW50OiJcZTRjMCJ9LmZhLXZlc3Q6YmVmb3Jle2NvbnRlbnQ6IlxlMDg1In0uZmEtZmVycnk6YmVmb3Jle2NvbnRlbnQ6IlxlNGVhIn0uZmEtYXJyb3dzLWRvd24tdG8tcGVvcGxlOmJlZm9yZXtjb250ZW50OiJcZTRiOSJ9LmZhLXNlZWRsaW5nOmJlZm9yZSwuZmEtc3Byb3V0OmJlZm9yZXtjb250ZW50OiJcZjRkOCJ9LmZhLWFycm93cy1hbHQtaDpiZWZvcmUsLmZhLWxlZnQtcmlnaHQ6YmVmb3Jle2NvbnRlbnQ6IlxmMzM3In0uZmEtYm94ZXMtcGFja2luZzpiZWZvcmV7Y29udGVudDoiXGU0YzcifS5mYS1hcnJvdy1jaXJjbGUtbGVmdDpiZWZvcmUsLmZhLWNpcmNsZS1hcnJvdy1sZWZ0OmJlZm9yZXtjb250ZW50OiJcZjBhOCJ9LmZhLWdyb3VwLWFycm93cy1yb3RhdGU6YmVmb3Jle2NvbnRlbnQ6IlxlNGY2In0uZmEtYm93bC1mb29kOmJlZm9yZXtjb250ZW50OiJcZTRjNiJ9LmZhLWNhbmR5LWNhbmU6YmVmb3Jle2NvbnRlbnQ6IlxmNzg2In0uZmEtYXJyb3ctZG93bi13aWRlLXNob3J0OmJlZm9yZSwuZmEtc29ydC1hbW91bnQtYXNjOmJlZm9yZSwuZmEtc29ydC1hbW91bnQtZG93bjpiZWZvcmV7Y29udGVudDoiXGYxNjAifS5mYS1jbG91ZC1ib2x0OmJlZm9yZSwuZmEtdGh1bmRlcnN0b3JtOmJlZm9yZXtjb250ZW50OiJcZjc2YyJ9LmZhLXJlbW92ZS1mb3JtYXQ6YmVmb3JlLC5mYS10ZXh0LXNsYXNoOmJlZm9yZXtjb250ZW50OiJcZjg3ZCJ9LmZhLWZhY2Utc21pbGUtd2luazpiZWZvcmUsLmZhLXNtaWxlLXdpbms6YmVmb3Jle2NvbnRlbnQ6IlxmNGRhIn0uZmEtZmlsZS13b3JkOmJlZm9yZXtjb250ZW50OiJcZjFjMiJ9LmZhLWZpbGUtcG93ZXJwb2ludDpiZWZvcmV7Y29udGVudDoiXGYxYzQifS5mYS1hcnJvd3MtaDpiZWZvcmUsLmZhLWFycm93cy1sZWZ0LXJpZ2h0OmJlZm9yZXtjb250ZW50OiJcZjA3ZSJ9LmZhLWhvdXNlLWxvY2s6YmVmb3Jle2NvbnRlbnQ6IlxlNTEwIn0uZmEtY2xvdWQtYXJyb3ctZG93bjpiZWZvcmUsLmZhLWNsb3VkLWRvd25sb2FkLWFsdDpiZWZvcmUsLmZhLWNsb3VkLWRvd25sb2FkOmJlZm9yZXtjb250ZW50OiJcZjBlZCJ9LmZhLWNoaWxkcmVuOmJlZm9yZXtjb250ZW50OiJcZTRlMSJ9LmZhLWJsYWNrYm9hcmQ6YmVmb3JlLC5mYS1jaGFsa2JvYXJkOmJlZm9yZXtjb250ZW50OiJcZjUxYiJ9LmZhLXVzZXItYWx0LXNsYXNoOmJlZm9yZSwuZmEtdXNlci1sYXJnZS1zbGFzaDpiZWZvcmV7Y29udGVudDoiXGY0ZmEifS5mYS1lbnZlbG9wZS1vcGVuOmJlZm9yZXtjb250ZW50OiJcZjJiNiJ9LmZhLWhhbmRzaGFrZS1hbHQtc2xhc2g6YmVmb3JlLC5mYS1oYW5kc2hha2Utc2ltcGxlLXNsYXNoOmJlZm9yZXtjb250ZW50OiJcZTA1ZiJ9LmZhLW1hdHRyZXNzLXBpbGxvdzpiZWZvcmV7Y29udGVudDoiXGU1MjUifS5mYS1ndWFyYW5pLXNpZ246YmVmb3Jle2NvbnRlbnQ6IlxlMTlhIn0uZmEtYXJyb3dzLXJvdGF0ZTpiZWZvcmUsLmZhLXJlZnJlc2g6YmVmb3JlLC5mYS1zeW5jOmJlZm9yZXtjb250ZW50OiJcZjAyMSJ9LmZhLWZpcmUtZXh0aW5ndWlzaGVyOmJlZm9yZXtjb250ZW50OiJcZjEzNCJ9LmZhLWNydXplaXJvLXNpZ246YmVmb3Jle2NvbnRlbnQ6IlxlMTUyIn0uZmEtZ3JlYXRlci10aGFuLWVxdWFsOmJlZm9yZXtjb250ZW50OiJcZjUzMiJ9LmZhLXNoaWVsZC1hbHQ6YmVmb3JlLC5mYS1zaGllbGQtaGFsdmVkOmJlZm9yZXtjb250ZW50OiJcZjNlZCJ9LmZhLWF0bGFzOmJlZm9yZSwuZmEtYm9vay1hdGxhczpiZWZvcmV7Y29udGVudDoiXGY1NTgifS5mYS12aXJ1czpiZWZvcmV7Y29udGVudDoiXGUwNzQifS5mYS1lbnZlbG9wZS1jaXJjbGUtY2hlY2s6YmVmb3Jle2NvbnRlbnQ6IlxlNGU4In0uZmEtbGF5ZXItZ3JvdXA6YmVmb3Jle2NvbnRlbnQ6IlxmNWZkIn0uZmEtYXJyb3dzLXRvLWRvdDpiZWZvcmV7Y29udGVudDoiXGU0YmUifS5mYS1hcmNod2F5OmJlZm9yZXtjb250ZW50OiJcZjU1NyJ9LmZhLWhlYXJ0LWNpcmNsZS1jaGVjazpiZWZvcmV7Y29udGVudDoiXGU0ZmQifS5mYS1ob3VzZS1jaGltbmV5LWNyYWNrOmJlZm9yZSwuZmEtaG91c2UtZGFtYWdlOmJlZm9yZXtjb250ZW50OiJcZjZmMSJ9LmZhLWZpbGUtYXJjaGl2ZTpiZWZvcmUsLmZhLWZpbGUtemlwcGVyOmJlZm9yZXtjb250ZW50OiJcZjFjNiJ9LmZhLXNxdWFyZTpiZWZvcmV7Y29udGVudDoiXGYwYzgifS5mYS1nbGFzcy1tYXJ0aW5pOmJlZm9yZSwuZmEtbWFydGluaS1nbGFzcy1lbXB0eTpiZWZvcmV7Y29udGVudDoiXGYwMDAifS5mYS1jb3VjaDpiZWZvcmV7Y29udGVudDoiXGY0YjgifS5mYS1jZWRpLXNpZ246YmVmb3Jle2NvbnRlbnQ6IlxlMGRmIn0uZmEtaXRhbGljOmJlZm9yZXtjb250ZW50OiJcZjAzMyJ9LmZhLWNodXJjaDpiZWZvcmV7Y29udGVudDoiXGY1MWQifS5mYS1jb21tZW50cy1kb2xsYXI6YmVmb3Jle2NvbnRlbnQ6IlxmNjUzIn0uZmEtZGVtb2NyYXQ6YmVmb3Jle2NvbnRlbnQ6IlxmNzQ3In0uZmEtejpiZWZvcmV7Y29udGVudDoiXDVhIn0uZmEtcGVyc29uLXNraWluZzpiZWZvcmUsLmZhLXNraWluZzpiZWZvcmV7Y29udGVudDoiXGY3YzkifS5mYS1yb2FkLWxvY2s6YmVmb3Jle2NvbnRlbnQ6IlxlNTY3In0uZmEtYTpiZWZvcmV7Y29udGVudDoiXDQxIn0uZmEtdGVtcGVyYXR1cmUtYXJyb3ctZG93bjpiZWZvcmUsLmZhLXRlbXBlcmF0dXJlLWRvd246YmVmb3Jle2NvbnRlbnQ6IlxlMDNmIn0uZmEtZmVhdGhlci1hbHQ6YmVmb3JlLC5mYS1mZWF0aGVyLXBvaW50ZWQ6YmVmb3Jle2NvbnRlbnQ6IlxmNTZiIn0uZmEtcDpiZWZvcmV7Y29udGVudDoiXDUwIn0uZmEtc25vd2ZsYWtlOmJlZm9yZXtjb250ZW50OiJcZjJkYyJ9LmZhLW5ld3NwYXBlcjpiZWZvcmV7Y29udGVudDoiXGYxZWEifS5mYS1hZDpiZWZvcmUsLmZhLXJlY3RhbmdsZS1hZDpiZWZvcmV7Y29udGVudDoiXGY2NDEifS5mYS1hcnJvdy1jaXJjbGUtcmlnaHQ6YmVmb3JlLC5mYS1jaXJjbGUtYXJyb3ctcmlnaHQ6YmVmb3Jle2NvbnRlbnQ6IlxmMGE5In0uZmEtZmlsdGVyLWNpcmNsZS14bWFyazpiZWZvcmV7Y29udGVudDoiXGUxN2IifS5mYS1sb2N1c3Q6YmVmb3Jle2NvbnRlbnQ6IlxlNTIwIn0uZmEtc29ydDpiZWZvcmUsLmZhLXVuc29ydGVkOmJlZm9yZXtjb250ZW50OiJcZjBkYyJ9LmZhLWxpc3QtMS0yOmJlZm9yZSwuZmEtbGlzdC1udW1lcmljOmJlZm9yZSwuZmEtbGlzdC1vbDpiZWZvcmV7Y29udGVudDoiXGYwY2IifS5mYS1wZXJzb24tZHJlc3MtYnVyc3Q6YmVmb3Jle2NvbnRlbnQ6IlxlNTQ0In0uZmEtbW9uZXktY2hlY2stYWx0OmJlZm9yZSwuZmEtbW9uZXktY2hlY2stZG9sbGFyOmJlZm9yZXtjb250ZW50OiJcZjUzZCJ9LmZhLXZlY3Rvci1zcXVhcmU6YmVmb3Jle2NvbnRlbnQ6IlxmNWNiIn0uZmEtYnJlYWQtc2xpY2U6YmVmb3Jle2NvbnRlbnQ6IlxmN2VjIn0uZmEtbGFuZ3VhZ2U6YmVmb3Jle2NvbnRlbnQ6IlxmMWFiIn0uZmEtZmFjZS1raXNzLXdpbmstaGVhcnQ6YmVmb3JlLC5mYS1raXNzLXdpbmstaGVhcnQ6YmVmb3Jle2NvbnRlbnQ6IlxmNTk4In0uZmEtZmlsdGVyOmJlZm9yZXtjb250ZW50OiJcZjBiMCJ9LmZhLXF1ZXN0aW9uOmJlZm9yZXtjb250ZW50OiJcM2YifS5mYS1maWxlLXNpZ25hdHVyZTpiZWZvcmV7Y29udGVudDoiXGY1NzMifS5mYS1hcnJvd3MtYWx0OmJlZm9yZSwuZmEtdXAtZG93bi1sZWZ0LXJpZ2h0OmJlZm9yZXtjb250ZW50OiJcZjBiMiJ9LmZhLWhvdXNlLWNoaW1uZXktdXNlcjpiZWZvcmV7Y29udGVudDoiXGUwNjUifS5mYS1oYW5kLWhvbGRpbmctaGVhcnQ6YmVmb3Jle2NvbnRlbnQ6IlxmNGJlIn0uZmEtcHV6emxlLXBpZWNlOmJlZm9yZXtjb250ZW50OiJcZjEyZSJ9LmZhLW1vbmV5LWNoZWNrOmJlZm9yZXtjb250ZW50OiJcZjUzYyJ9LmZhLXN0YXItaGFsZi1hbHQ6YmVmb3JlLC5mYS1zdGFyLWhhbGYtc3Ryb2tlOmJlZm9yZXtjb250ZW50OiJcZjVjMCJ9LmZhLWNvZGU6YmVmb3Jle2NvbnRlbnQ6IlxmMTIxIn0uZmEtZ2xhc3Mtd2hpc2tleTpiZWZvcmUsLmZhLXdoaXNrZXktZ2xhc3M6YmVmb3Jle2NvbnRlbnQ6IlxmN2EwIn0uZmEtYnVpbGRpbmctY2lyY2xlLWV4Y2xhbWF0aW9uOmJlZm9yZXtjb250ZW50OiJcZTRkMyJ9LmZhLW1hZ25pZnlpbmctZ2xhc3MtY2hhcnQ6YmVmb3Jle2NvbnRlbnQ6IlxlNTIyIn0uZmEtYXJyb3ctdXAtcmlnaHQtZnJvbS1zcXVhcmU6YmVmb3JlLC5mYS1leHRlcm5hbC1saW5rOmJlZm9yZXtjb250ZW50OiJcZjA4ZSJ9LmZhLWN1YmVzLXN0YWNrZWQ6YmVmb3Jle2NvbnRlbnQ6IlxlNGU2In0uZmEta3J3OmJlZm9yZSwuZmEtd29uLXNpZ246YmVmb3JlLC5mYS13b246YmVmb3Jle2NvbnRlbnQ6IlxmMTU5In0uZmEtdmlydXMtY292aWQ6YmVmb3Jle2NvbnRlbnQ6IlxlNGE4In0uZmEtYXVzdHJhbC1zaWduOmJlZm9yZXtjb250ZW50OiJcZTBhOSJ9LmZhLWY6YmVmb3Jle2NvbnRlbnQ6Ilw0NiJ9LmZhLWxlYWY6YmVmb3Jle2NvbnRlbnQ6IlxmMDZjIn0uZmEtcm9hZDpiZWZvcmV7Y29udGVudDoiXGYwMTgifS5mYS1jYWI6YmVmb3JlLC5mYS10YXhpOmJlZm9yZXtjb250ZW50OiJcZjFiYSJ9LmZhLXBlcnNvbi1jaXJjbGUtcGx1czpiZWZvcmV7Y29udGVudDoiXGU1NDEifS5mYS1jaGFydC1waWU6YmVmb3JlLC5mYS1waWUtY2hhcnQ6YmVmb3Jle2NvbnRlbnQ6IlxmMjAwIn0uZmEtYm9sdC1saWdodG5pbmc6YmVmb3Jle2NvbnRlbnQ6IlxlMGI3In0uZmEtc2Fjay14bWFyazpiZWZvcmV7Y29udGVudDoiXGU1NmEifS5mYS1maWxlLWV4Y2VsOmJlZm9yZXtjb250ZW50OiJcZjFjMyJ9LmZhLWZpbGUtY29udHJhY3Q6YmVmb3Jle2NvbnRlbnQ6IlxmNTZjIn0uZmEtZmlzaC1maW5zOmJlZm9yZXtjb250ZW50OiJcZTRmMiJ9LmZhLWJ1aWxkaW5nLWZsYWc6YmVmb3Jle2NvbnRlbnQ6IlxlNGQ1In0uZmEtZmFjZS1ncmluLWJlYW06YmVmb3JlLC5mYS1ncmluLWJlYW06YmVmb3Jle2NvbnRlbnQ6IlxmNTgyIn0uZmEtb2JqZWN0LXVuZ3JvdXA6YmVmb3Jle2NvbnRlbnQ6IlxmMjQ4In0uZmEtcG9vcDpiZWZvcmV7Y29udGVudDoiXGY2MTkifS5mYS1sb2NhdGlvbi1waW46YmVmb3JlLC5mYS1tYXAtbWFya2VyOmJlZm9yZXtjb250ZW50OiJcZjA0MSJ9LmZhLWthYWJhOmJlZm9yZXtjb250ZW50OiJcZjY2YiJ9LmZhLXRvaWxldC1wYXBlcjpiZWZvcmV7Y29udGVudDoiXGY3MWUifS5mYS1oYXJkLWhhdDpiZWZvcmUsLmZhLWhhdC1oYXJkOmJlZm9yZSwuZmEtaGVsbWV0LXNhZmV0eTpiZWZvcmV7Y29udGVudDoiXGY4MDcifS5mYS1lamVjdDpiZWZvcmV7Y29udGVudDoiXGYwNTIifS5mYS1hcnJvdy1hbHQtY2lyY2xlLXJpZ2h0OmJlZm9yZSwuZmEtY2lyY2xlLXJpZ2h0OmJlZm9yZXtjb250ZW50OiJcZjM1YSJ9LmZhLXBsYW5lLWNpcmNsZS1jaGVjazpiZWZvcmV7Y29udGVudDoiXGU1NTUifS5mYS1mYWNlLXJvbGxpbmctZXllczpiZWZvcmUsLmZhLW1laC1yb2xsaW5nLWV5ZXM6YmVmb3Jle2NvbnRlbnQ6IlxmNWE1In0uZmEtb2JqZWN0LWdyb3VwOmJlZm9yZXtjb250ZW50OiJcZjI0NyJ9LmZhLWNoYXJ0LWxpbmU6YmVmb3JlLC5mYS1saW5lLWNoYXJ0OmJlZm9yZXtjb250ZW50OiJcZjIwMSJ9LmZhLW1hc2stdmVudGlsYXRvcjpiZWZvcmV7Y29udGVudDoiXGU1MjQifS5mYS1hcnJvdy1yaWdodDpiZWZvcmV7Y29udGVudDoiXGYwNjEifS5mYS1tYXAtc2lnbnM6YmVmb3JlLC5mYS1zaWducy1wb3N0OmJlZm9yZXtjb250ZW50OiJcZjI3NyJ9LmZhLWNhc2gtcmVnaXN0ZXI6YmVmb3Jle2NvbnRlbnQ6IlxmNzg4In0uZmEtcGVyc29uLWNpcmNsZS1xdWVzdGlvbjpiZWZvcmV7Y29udGVudDoiXGU1NDIifS5mYS1oOmJlZm9yZXtjb250ZW50OiJcNDgifS5mYS10YXJwOmJlZm9yZXtjb250ZW50OiJcZTU3YiJ9LmZhLXNjcmV3ZHJpdmVyLXdyZW5jaDpiZWZvcmUsLmZhLXRvb2xzOmJlZm9yZXtjb250ZW50OiJcZjdkOSJ9LmZhLWFycm93cy10by1leWU6YmVmb3Jle2NvbnRlbnQ6IlxlNGJmIn0uZmEtcGx1Zy1jaXJjbGUtYm9sdDpiZWZvcmV7Y29udGVudDoiXGU1NWIifS5mYS1oZWFydDpiZWZvcmV7Y29udGVudDoiXGYwMDQifS5mYS1tYXJzLWFuZC12ZW51czpiZWZvcmV7Y29udGVudDoiXGYyMjQifS5mYS1ob21lLXVzZXI6YmVmb3JlLC5mYS1ob3VzZS11c2VyOmJlZm9yZXtjb250ZW50OiJcZTFiMCJ9LmZhLWR1bXBzdGVyLWZpcmU6YmVmb3Jle2NvbnRlbnQ6IlxmNzk0In0uZmEtaG91c2UtY3JhY2s6YmVmb3Jle2NvbnRlbnQ6IlxlM2IxIn0uZmEtY29ja3RhaWw6YmVmb3JlLC5mYS1tYXJ0aW5pLWdsYXNzLWNpdHJ1czpiZWZvcmV7Y29udGVudDoiXGY1NjEifS5mYS1mYWNlLXN1cnByaXNlOmJlZm9yZSwuZmEtc3VycHJpc2U6YmVmb3Jle2NvbnRlbnQ6IlxmNWMyIn0uZmEtYm90dGxlLXdhdGVyOmJlZm9yZXtjb250ZW50OiJcZTRjNSJ9LmZhLWNpcmNsZS1wYXVzZTpiZWZvcmUsLmZhLXBhdXNlLWNpcmNsZTpiZWZvcmV7Y29udGVudDoiXGYyOGIifS5mYS10b2lsZXQtcGFwZXItc2xhc2g6YmVmb3Jle2NvbnRlbnQ6IlxlMDcyIn0uZmEtYXBwbGUtYWx0OmJlZm9yZSwuZmEtYXBwbGUtd2hvbGU6YmVmb3Jle2NvbnRlbnQ6IlxmNWQxIn0uZmEta2l0Y2hlbi1zZXQ6YmVmb3Jle2NvbnRlbnQ6IlxlNTFhIn0uZmEtcjpiZWZvcmV7Y29udGVudDoiXDUyIn0uZmEtdGVtcGVyYXR1cmUtMTpiZWZvcmUsLmZhLXRlbXBlcmF0dXJlLXF1YXJ0ZXI6YmVmb3JlLC5mYS10aGVybW9tZXRlci0xOmJlZm9yZSwuZmEtdGhlcm1vbWV0ZXItcXVhcnRlcjpiZWZvcmV7Y29udGVudDoiXGYyY2EifS5mYS1jdWJlOmJlZm9yZXtjb250ZW50OiJcZjFiMiJ9LmZhLWJpdGNvaW4tc2lnbjpiZWZvcmV7Y29udGVudDoiXGUwYjQifS5mYS1zaGllbGQtZG9nOmJlZm9yZXtjb250ZW50OiJcZTU3MyJ9LmZhLXNvbGFyLXBhbmVsOmJlZm9yZXtjb250ZW50OiJcZjViYSJ9LmZhLWxvY2stb3BlbjpiZWZvcmV7Y29udGVudDoiXGYzYzEifS5mYS1lbGV2YXRvcjpiZWZvcmV7Y29udGVudDoiXGUxNmQifS5mYS1tb25leS1iaWxsLXRyYW5zZmVyOmJlZm9yZXtjb250ZW50OiJcZTUyOCJ9LmZhLW1vbmV5LWJpbGwtdHJlbmQtdXA6YmVmb3Jle2NvbnRlbnQ6IlxlNTI5In0uZmEtaG91c2UtZmxvb2Qtd2F0ZXItY2lyY2xlLWFycm93LXJpZ2h0OmJlZm9yZXtjb250ZW50OiJcZTUwZiJ9LmZhLXBvbGwtaDpiZWZvcmUsLmZhLXNxdWFyZS1wb2xsLWhvcml6b250YWw6YmVmb3Jle2NvbnRlbnQ6IlxmNjgyIn0uZmEtY2lyY2xlOmJlZm9yZXtjb250ZW50OiJcZjExMSJ9LmZhLWJhY2t3YXJkLWZhc3Q6YmVmb3JlLC5mYS1mYXN0LWJhY2t3YXJkOmJlZm9yZXtjb250ZW50OiJcZjA0OSJ9LmZhLXJlY3ljbGU6YmVmb3Jle2NvbnRlbnQ6IlxmMWI4In0uZmEtdXNlci1hc3Ryb25hdXQ6YmVmb3Jle2NvbnRlbnQ6IlxmNGZiIn0uZmEtcGxhbmUtc2xhc2g6YmVmb3Jle2NvbnRlbnQ6IlxlMDY5In0uZmEtdHJhZGVtYXJrOmJlZm9yZXtjb250ZW50OiJcZjI1YyJ9LmZhLWJhc2tldGJhbGwtYmFsbDpiZWZvcmUsLmZhLWJhc2tldGJhbGw6YmVmb3Jle2NvbnRlbnQ6IlxmNDM0In0uZmEtc2F0ZWxsaXRlLWRpc2g6YmVmb3Jle2NvbnRlbnQ6IlxmN2MwIn0uZmEtYXJyb3ctYWx0LWNpcmNsZS11cDpiZWZvcmUsLmZhLWNpcmNsZS11cDpiZWZvcmV7Y29udGVudDoiXGYzNWIifS5mYS1tb2JpbGUtYWx0OmJlZm9yZSwuZmEtbW9iaWxlLXNjcmVlbi1idXR0b246YmVmb3Jle2NvbnRlbnQ6IlxmM2NkIn0uZmEtdm9sdW1lLWhpZ2g6YmVmb3JlLC5mYS12b2x1bWUtdXA6YmVmb3Jle2NvbnRlbnQ6IlxmMDI4In0uZmEtdXNlcnMtcmF5czpiZWZvcmV7Y29udGVudDoiXGU1OTMifS5mYS13YWxsZXQ6YmVmb3Jle2NvbnRlbnQ6IlxmNTU1In0uZmEtY2xpcGJvYXJkLWNoZWNrOmJlZm9yZXtjb250ZW50OiJcZjQ2YyJ9LmZhLWZpbGUtYXVkaW86YmVmb3Jle2NvbnRlbnQ6IlxmMWM3In0uZmEtYnVyZ2VyOmJlZm9yZSwuZmEtaGFtYnVyZ2VyOmJlZm9yZXtjb250ZW50OiJcZjgwNSJ9LmZhLXdyZW5jaDpiZWZvcmV7Y29udGVudDoiXGYwYWQifS5mYS1idWdzOmJlZm9yZXtjb250ZW50OiJcZTRkMCJ9LmZhLXJ1cGVlLXNpZ246YmVmb3JlLC5mYS1ydXBlZTpiZWZvcmV7Y29udGVudDoiXGYxNTYifS5mYS1maWxlLWltYWdlOmJlZm9yZXtjb250ZW50OiJcZjFjNSJ9LmZhLWNpcmNsZS1xdWVzdGlvbjpiZWZvcmUsLmZhLXF1ZXN0aW9uLWNpcmNsZTpiZWZvcmV7Y29udGVudDoiXGYwNTkifS5mYS1wbGFuZS1kZXBhcnR1cmU6YmVmb3Jle2NvbnRlbnQ6IlxmNWIwIn0uZmEtaGFuZHNoYWtlLXNsYXNoOmJlZm9yZXtjb250ZW50OiJcZTA2MCJ9LmZhLWJvb2stYm9va21hcms6YmVmb3Jle2NvbnRlbnQ6IlxlMGJiIn0uZmEtY29kZS1icmFuY2g6YmVmb3Jle2NvbnRlbnQ6IlxmMTI2In0uZmEtaGF0LWNvd2JveTpiZWZvcmV7Y29udGVudDoiXGY4YzAifS5mYS1icmlkZ2U6YmVmb3Jle2NvbnRlbnQ6IlxlNGM4In0uZmEtcGhvbmUtYWx0OmJlZm9yZSwuZmEtcGhvbmUtZmxpcDpiZWZvcmV7Y29udGVudDoiXGY4NzkifS5mYS10cnVjay1mcm9udDpiZWZvcmV7Y29udGVudDoiXGUyYjcifS5mYS1jYXQ6YmVmb3Jle2NvbnRlbnQ6IlxmNmJlIn0uZmEtYW5jaG9yLWNpcmNsZS1leGNsYW1hdGlvbjpiZWZvcmV7Y29udGVudDoiXGU0YWIifS5mYS10cnVjay1maWVsZDpiZWZvcmV7Y29udGVudDoiXGU1OGQifS5mYS1yb3V0ZTpiZWZvcmV7Y29udGVudDoiXGY0ZDcifS5mYS1jbGlwYm9hcmQtcXVlc3Rpb246YmVmb3Jle2NvbnRlbnQ6IlxlNGUzIn0uZmEtcGFub3JhbWE6YmVmb3Jle2NvbnRlbnQ6IlxlMjA5In0uZmEtY29tbWVudC1tZWRpY2FsOmJlZm9yZXtjb250ZW50OiJcZjdmNSJ9LmZhLXRlZXRoLW9wZW46YmVmb3Jle2NvbnRlbnQ6IlxmNjJmIn0uZmEtZmlsZS1jaXJjbGUtbWludXM6YmVmb3Jle2NvbnRlbnQ6IlxlNGVkIn0uZmEtdGFnczpiZWZvcmV7Y29udGVudDoiXGYwMmMifS5mYS13aW5lLWdsYXNzOmJlZm9yZXtjb250ZW50OiJcZjRlMyJ9LmZhLWZhc3QtZm9yd2FyZDpiZWZvcmUsLmZhLWZvcndhcmQtZmFzdDpiZWZvcmV7Y29udGVudDoiXGYwNTAifS5mYS1mYWNlLW1laC1ibGFuazpiZWZvcmUsLmZhLW1laC1ibGFuazpiZWZvcmV7Y29udGVudDoiXGY1YTQifS5mYS1wYXJraW5nOmJlZm9yZSwuZmEtc3F1YXJlLXBhcmtpbmc6YmVmb3Jle2NvbnRlbnQ6IlxmNTQwIn0uZmEtaG91c2Utc2lnbmFsOmJlZm9yZXtjb250ZW50OiJcZTAxMiJ9LmZhLWJhcnMtcHJvZ3Jlc3M6YmVmb3JlLC5mYS10YXNrcy1hbHQ6YmVmb3Jle2NvbnRlbnQ6IlxmODI4In0uZmEtZmF1Y2V0LWRyaXA6YmVmb3Jle2NvbnRlbnQ6IlxlMDA2In0uZmEtY2FydC1mbGF0YmVkOmJlZm9yZSwuZmEtZG9sbHktZmxhdGJlZDpiZWZvcmV7Y29udGVudDoiXGY0NzQifS5mYS1iYW4tc21va2luZzpiZWZvcmUsLmZhLXNtb2tpbmctYmFuOmJlZm9yZXtjb250ZW50OiJcZjU0ZCJ9LmZhLXRlcm1pbmFsOmJlZm9yZXtjb250ZW50OiJcZjEyMCJ9LmZhLW1vYmlsZS1idXR0b246YmVmb3Jle2NvbnRlbnQ6IlxmMTBiIn0uZmEtaG91c2UtbWVkaWNhbC1mbGFnOmJlZm9yZXtjb250ZW50OiJcZTUxNCJ9LmZhLWJhc2tldC1zaG9wcGluZzpiZWZvcmUsLmZhLXNob3BwaW5nLWJhc2tldDpiZWZvcmV7Y29udGVudDoiXGYyOTEifS5mYS10YXBlOmJlZm9yZXtjb250ZW50OiJcZjRkYiJ9LmZhLWJ1cy1hbHQ6YmVmb3JlLC5mYS1idXMtc2ltcGxlOmJlZm9yZXtjb250ZW50OiJcZjU1ZSJ9LmZhLWV5ZTpiZWZvcmV7Y29udGVudDoiXGYwNmUifS5mYS1mYWNlLXNhZC1jcnk6YmVmb3JlLC5mYS1zYWQtY3J5OmJlZm9yZXtjb250ZW50OiJcZjViMyJ9LmZhLWF1ZGlvLWRlc2NyaXB0aW9uOmJlZm9yZXtjb250ZW50OiJcZjI5ZSJ9LmZhLXBlcnNvbi1taWxpdGFyeS10by1wZXJzb246YmVmb3Jle2NvbnRlbnQ6IlxlNTRjIn0uZmEtZmlsZS1zaGllbGQ6YmVmb3Jle2NvbnRlbnQ6IlxlNGYwIn0uZmEtdXNlci1zbGFzaDpiZWZvcmV7Y29udGVudDoiXGY1MDYifS5mYS1wZW46YmVmb3Jle2NvbnRlbnQ6IlxmMzA0In0uZmEtdG93ZXItb2JzZXJ2YXRpb246YmVmb3Jle2NvbnRlbnQ6IlxlNTg2In0uZmEtZmlsZS1jb2RlOmJlZm9yZXtjb250ZW50OiJcZjFjOSJ9LmZhLXNpZ25hbC01OmJlZm9yZSwuZmEtc2lnbmFsLXBlcmZlY3Q6YmVmb3JlLC5mYS1zaWduYWw6YmVmb3Jle2NvbnRlbnQ6IlxmMDEyIn0uZmEtYnVzOmJlZm9yZXtjb250ZW50OiJcZjIwNyJ9LmZhLWhlYXJ0LWNpcmNsZS14bWFyazpiZWZvcmV7Y29udGVudDoiXGU1MDEifS5mYS1ob21lLWxnOmJlZm9yZSwuZmEtaG91c2UtY2hpbW5leTpiZWZvcmV7Y29udGVudDoiXGUzYWYifS5mYS13aW5kb3ctbWF4aW1pemU6YmVmb3Jle2NvbnRlbnQ6IlxmMmQwIn0uZmEtZmFjZS1mcm93bjpiZWZvcmUsLmZhLWZyb3duOmJlZm9yZXtjb250ZW50OiJcZjExOSJ9LmZhLXByZXNjcmlwdGlvbjpiZWZvcmV7Y29udGVudDoiXGY1YjEifS5mYS1zaG9wOmJlZm9yZSwuZmEtc3RvcmUtYWx0OmJlZm9yZXtjb250ZW50OiJcZjU0ZiJ9LmZhLWZsb3BweS1kaXNrOmJlZm9yZSwuZmEtc2F2ZTpiZWZvcmV7Y29udGVudDoiXGYwYzcifS5mYS12aWhhcmE6YmVmb3Jle2NvbnRlbnQ6IlxmNmE3In0uZmEtYmFsYW5jZS1zY2FsZS1sZWZ0OmJlZm9yZSwuZmEtc2NhbGUtdW5iYWxhbmNlZDpiZWZvcmV7Y29udGVudDoiXGY1MTUifS5mYS1zb3J0LWFzYzpiZWZvcmUsLmZhLXNvcnQtdXA6YmVmb3Jle2NvbnRlbnQ6IlxmMGRlIn0uZmEtY29tbWVudC1kb3RzOmJlZm9yZSwuZmEtY29tbWVudGluZzpiZWZvcmV7Y29udGVudDoiXGY0YWQifS5mYS1wbGFudC13aWx0OmJlZm9yZXtjb250ZW50OiJcZTVhYSJ9LmZhLWRpYW1vbmQ6YmVmb3Jle2NvbnRlbnQ6IlxmMjE5In0uZmEtZmFjZS1ncmluLXNxdWludDpiZWZvcmUsLmZhLWdyaW4tc3F1aW50OmJlZm9yZXtjb250ZW50OiJcZjU4NSJ9LmZhLWhhbmQtaG9sZGluZy1kb2xsYXI6YmVmb3JlLC5mYS1oYW5kLWhvbGRpbmctdXNkOmJlZm9yZXtjb250ZW50OiJcZjRjMCJ9LmZhLWJhY3Rlcml1bTpiZWZvcmV7Y29udGVudDoiXGUwNWEifS5mYS1oYW5kLXBvaW50ZXI6YmVmb3Jle2NvbnRlbnQ6IlxmMjVhIn0uZmEtZHJ1bS1zdGVlbHBhbjpiZWZvcmV7Y29udGVudDoiXGY1NmEifS5mYS1oYW5kLXNjaXNzb3JzOmJlZm9yZXtjb250ZW50OiJcZjI1NyJ9LmZhLWhhbmRzLXByYXlpbmc6YmVmb3JlLC5mYS1wcmF5aW5nLWhhbmRzOmJlZm9yZXtjb250ZW50OiJcZjY4NCJ9LmZhLWFycm93LXJpZ2h0LXJvdGF0ZTpiZWZvcmUsLmZhLWFycm93LXJvdGF0ZS1mb3J3YXJkOmJlZm9yZSwuZmEtYXJyb3ctcm90YXRlLXJpZ2h0OmJlZm9yZSwuZmEtcmVkbzpiZWZvcmV7Y29udGVudDoiXGYwMWUifS5mYS1iaW9oYXphcmQ6YmVmb3Jle2NvbnRlbnQ6IlxmNzgwIn0uZmEtbG9jYXRpb24tY3Jvc3NoYWlyczpiZWZvcmUsLmZhLWxvY2F0aW9uOmJlZm9yZXtjb250ZW50OiJcZjYwMSJ9LmZhLW1hcnMtZG91YmxlOmJlZm9yZXtjb250ZW50OiJcZjIyNyJ9LmZhLWNoaWxkLWRyZXNzOmJlZm9yZXtjb250ZW50OiJcZTU5YyJ9LmZhLXVzZXJzLWJldHdlZW4tbGluZXM6YmVmb3Jle2NvbnRlbnQ6IlxlNTkxIn0uZmEtbHVuZ3MtdmlydXM6YmVmb3Jle2NvbnRlbnQ6IlxlMDY3In0uZmEtZmFjZS1ncmluLXRlYXJzOmJlZm9yZSwuZmEtZ3Jpbi10ZWFyczpiZWZvcmV7Y29udGVudDoiXGY1ODgifS5mYS1waG9uZTpiZWZvcmV7Y29udGVudDoiXGYwOTUifS5mYS1jYWxlbmRhci10aW1lczpiZWZvcmUsLmZhLWNhbGVuZGFyLXhtYXJrOmJlZm9yZXtjb250ZW50OiJcZjI3MyJ9LmZhLWNoaWxkLXJlYWNoaW5nOmJlZm9yZXtjb250ZW50OiJcZTU5ZCJ9LmZhLWhlYWQtc2lkZS12aXJ1czpiZWZvcmV7Y29udGVudDoiXGUwNjQifS5mYS11c2VyLWNvZzpiZWZvcmUsLmZhLXVzZXItZ2VhcjpiZWZvcmV7Y29udGVudDoiXGY0ZmUifS5mYS1hcnJvdy11cC0xLTk6YmVmb3JlLC5mYS1zb3J0LW51bWVyaWMtdXA6YmVmb3Jle2NvbnRlbnQ6IlxmMTYzIn0uZmEtZG9vci1jbG9zZWQ6YmVmb3Jle2NvbnRlbnQ6IlxmNTJhIn0uZmEtc2hpZWxkLXZpcnVzOmJlZm9yZXtjb250ZW50OiJcZTA2YyJ9LmZhLWRpY2Utc2l4OmJlZm9yZXtjb250ZW50OiJcZjUyNiJ9LmZhLW1vc3F1aXRvLW5ldDpiZWZvcmV7Y29udGVudDoiXGU1MmMifS5mYS1icmlkZ2Utd2F0ZXI6YmVmb3Jle2NvbnRlbnQ6IlxlNGNlIn0uZmEtcGVyc29uLWJvb3RoOmJlZm9yZXtjb250ZW50OiJcZjc1NiJ9LmZhLXRleHQtd2lkdGg6YmVmb3Jle2NvbnRlbnQ6IlxmMDM1In0uZmEtaGF0LXdpemFyZDpiZWZvcmV7Y29udGVudDoiXGY2ZTgifS5mYS1wZW4tZmFuY3k6YmVmb3Jle2NvbnRlbnQ6IlxmNWFjIn0uZmEtZGlnZ2luZzpiZWZvcmUsLmZhLXBlcnNvbi1kaWdnaW5nOmJlZm9yZXtjb250ZW50OiJcZjg1ZSJ9LmZhLXRyYXNoOmJlZm9yZXtjb250ZW50OiJcZjFmOCJ9LmZhLWdhdWdlLXNpbXBsZS1tZWQ6YmVmb3JlLC5mYS1nYXVnZS1zaW1wbGU6YmVmb3JlLC5mYS10YWNob21ldGVyLWF2ZXJhZ2U6YmVmb3Jle2NvbnRlbnQ6IlxmNjI5In0uZmEtYm9vay1tZWRpY2FsOmJlZm9yZXtjb250ZW50OiJcZjdlNiJ9LmZhLXBvbzpiZWZvcmV7Y29udGVudDoiXGYyZmUifS5mYS1xdW90ZS1yaWdodC1hbHQ6YmVmb3JlLC5mYS1xdW90ZS1yaWdodDpiZWZvcmV7Y29udGVudDoiXGYxMGUifS5mYS1zaGlydDpiZWZvcmUsLmZhLXQtc2hpcnQ6YmVmb3JlLC5mYS10c2hpcnQ6YmVmb3Jle2NvbnRlbnQ6IlxmNTUzIn0uZmEtY3ViZXM6YmVmb3Jle2NvbnRlbnQ6IlxmMWIzIn0uZmEtZGl2aWRlOmJlZm9yZXtjb250ZW50OiJcZjUyOSJ9LmZhLXRlbmdlLXNpZ246YmVmb3JlLC5mYS10ZW5nZTpiZWZvcmV7Y29udGVudDoiXGY3ZDcifS5mYS1oZWFkcGhvbmVzOmJlZm9yZXtjb250ZW50OiJcZjAyNSJ9LmZhLWhhbmRzLWhvbGRpbmc6YmVmb3Jle2NvbnRlbnQ6IlxmNGMyIn0uZmEtaGFuZHMtY2xhcHBpbmc6YmVmb3Jle2NvbnRlbnQ6IlxlMWE4In0uZmEtcmVwdWJsaWNhbjpiZWZvcmV7Y29udGVudDoiXGY3NWUifS5mYS1hcnJvdy1sZWZ0OmJlZm9yZXtjb250ZW50OiJcZjA2MCJ9LmZhLXBlcnNvbi1jaXJjbGUteG1hcms6YmVmb3Jle2NvbnRlbnQ6IlxlNTQzIn0uZmEtcnVsZXI6YmVmb3Jle2NvbnRlbnQ6IlxmNTQ1In0uZmEtYWxpZ24tbGVmdDpiZWZvcmV7Y29udGVudDoiXGYwMzYifS5mYS1kaWNlLWQ2OmJlZm9yZXtjb250ZW50OiJcZjZkMSJ9LmZhLXJlc3Ryb29tOmJlZm9yZXtjb250ZW50OiJcZjdiZCJ9LmZhLWo6YmVmb3Jle2NvbnRlbnQ6Ilw0YSJ9LmZhLXVzZXJzLXZpZXdmaW5kZXI6YmVmb3Jle2NvbnRlbnQ6IlxlNTk1In0uZmEtZmlsZS12aWRlbzpiZWZvcmV7Y29udGVudDoiXGYxYzgifS5mYS1leHRlcm5hbC1saW5rLWFsdDpiZWZvcmUsLmZhLXVwLXJpZ2h0LWZyb20tc3F1YXJlOmJlZm9yZXtjb250ZW50OiJcZjM1ZCJ9LmZhLXRhYmxlLWNlbGxzOmJlZm9yZSwuZmEtdGg6YmVmb3Jle2NvbnRlbnQ6IlxmMDBhIn0uZmEtZmlsZS1wZGY6YmVmb3Jle2NvbnRlbnQ6IlxmMWMxIn0uZmEtYmlibGU6YmVmb3JlLC5mYS1ib29rLWJpYmxlOmJlZm9yZXtjb250ZW50OiJcZjY0NyJ9LmZhLW86YmVmb3Jle2NvbnRlbnQ6Ilw0ZiJ9LmZhLW1lZGtpdDpiZWZvcmUsLmZhLXN1aXRjYXNlLW1lZGljYWw6YmVmb3Jle2NvbnRlbnQ6IlxmMGZhIn0uZmEtdXNlci1zZWNyZXQ6YmVmb3Jle2NvbnRlbnQ6IlxmMjFiIn0uZmEtb3R0ZXI6YmVmb3Jle2NvbnRlbnQ6IlxmNzAwIn0uZmEtZmVtYWxlOmJlZm9yZSwuZmEtcGVyc29uLWRyZXNzOmJlZm9yZXtjb250ZW50OiJcZjE4MiJ9LmZhLWNvbW1lbnQtZG9sbGFyOmJlZm9yZXtjb250ZW50OiJcZjY1MSJ9LmZhLWJyaWVmY2FzZS1jbG9jazpiZWZvcmUsLmZhLWJ1c2luZXNzLXRpbWU6YmVmb3Jle2NvbnRlbnQ6IlxmNjRhIn0uZmEtdGFibGUtY2VsbHMtbGFyZ2U6YmVmb3JlLC5mYS10aC1sYXJnZTpiZWZvcmV7Y29udGVudDoiXGYwMDkifS5mYS1ib29rLXRhbmFraDpiZWZvcmUsLmZhLXRhbmFraDpiZWZvcmV7Y29udGVudDoiXGY4MjcifS5mYS1waG9uZS12b2x1bWU6YmVmb3JlLC5mYS12b2x1bWUtY29udHJvbC1waG9uZTpiZWZvcmV7Y29udGVudDoiXGYyYTAifS5mYS1oYXQtY293Ym95LXNpZGU6YmVmb3Jle2NvbnRlbnQ6IlxmOGMxIn0uZmEtY2xpcGJvYXJkLXVzZXI6YmVmb3Jle2NvbnRlbnQ6IlxmN2YzIn0uZmEtY2hpbGQ6YmVmb3Jle2NvbnRlbnQ6IlxmMWFlIn0uZmEtbGlyYS1zaWduOmJlZm9yZXtjb250ZW50OiJcZjE5NSJ9LmZhLXNhdGVsbGl0ZTpiZWZvcmV7Y29udGVudDoiXGY3YmYifS5mYS1wbGFuZS1sb2NrOmJlZm9yZXtjb250ZW50OiJcZTU1OCJ9LmZhLXRhZzpiZWZvcmV7Y29udGVudDoiXGYwMmIifS5mYS1jb21tZW50OmJlZm9yZXtjb250ZW50OiJcZjA3NSJ9LmZhLWJpcnRoZGF5LWNha2U6YmVmb3JlLC5mYS1jYWtlLWNhbmRsZXM6YmVmb3JlLC5mYS1jYWtlOmJlZm9yZXtjb250ZW50OiJcZjFmZCJ9LmZhLWVudmVsb3BlOmJlZm9yZXtjb250ZW50OiJcZjBlMCJ9LmZhLWFuZ2xlLWRvdWJsZS11cDpiZWZvcmUsLmZhLWFuZ2xlcy11cDpiZWZvcmV7Y29udGVudDoiXGYxMDIifS5mYS1wYXBlcmNsaXA6YmVmb3Jle2NvbnRlbnQ6IlxmMGM2In0uZmEtYXJyb3ctcmlnaHQtdG8tY2l0eTpiZWZvcmV7Y29udGVudDoiXGU0YjMifS5mYS1yaWJib246YmVmb3Jle2NvbnRlbnQ6IlxmNGQ2In0uZmEtbHVuZ3M6YmVmb3Jle2NvbnRlbnQ6IlxmNjA0In0uZmEtYXJyb3ctdXAtOS0xOmJlZm9yZSwuZmEtc29ydC1udW1lcmljLXVwLWFsdDpiZWZvcmV7Y29udGVudDoiXGY4ODcifS5mYS1saXRlY29pbi1zaWduOmJlZm9yZXtjb250ZW50OiJcZTFkMyJ9LmZhLWJvcmRlci1ub25lOmJlZm9yZXtjb250ZW50OiJcZjg1MCJ9LmZhLWNpcmNsZS1ub2RlczpiZWZvcmV7Y29udGVudDoiXGU0ZTIifS5mYS1wYXJhY2h1dGUtYm94OmJlZm9yZXtjb250ZW50OiJcZjRjZCJ9LmZhLWluZGVudDpiZWZvcmV7Y29udGVudDoiXGYwM2MifS5mYS10cnVjay1maWVsZC11bjpiZWZvcmV7Y29udGVudDoiXGU1OGUifS5mYS1ob3VyZ2xhc3MtZW1wdHk6YmVmb3JlLC5mYS1ob3VyZ2xhc3M6YmVmb3Jle2NvbnRlbnQ6IlxmMjU0In0uZmEtbW91bnRhaW46YmVmb3Jle2NvbnRlbnQ6IlxmNmZjIn0uZmEtdXNlci1kb2N0b3I6YmVmb3JlLC5mYS11c2VyLW1kOmJlZm9yZXtjb250ZW50OiJcZjBmMCJ9LmZhLWNpcmNsZS1pbmZvOmJlZm9yZSwuZmEtaW5mby1jaXJjbGU6YmVmb3Jle2NvbnRlbnQ6IlxmMDVhIn0uZmEtY2xvdWQtbWVhdGJhbGw6YmVmb3Jle2NvbnRlbnQ6IlxmNzNiIn0uZmEtY2FtZXJhLWFsdDpiZWZvcmUsLmZhLWNhbWVyYTpiZWZvcmV7Y29udGVudDoiXGYwMzAifS5mYS1zcXVhcmUtdmlydXM6YmVmb3Jle2NvbnRlbnQ6IlxlNTc4In0uZmEtbWV0ZW9yOmJlZm9yZXtjb250ZW50OiJcZjc1MyJ9LmZhLWNhci1vbjpiZWZvcmV7Y29udGVudDoiXGU0ZGQifS5mYS1zbGVpZ2g6YmVmb3Jle2NvbnRlbnQ6IlxmN2NjIn0uZmEtYXJyb3ctZG93bi0xLTk6YmVmb3JlLC5mYS1zb3J0LW51bWVyaWMtYXNjOmJlZm9yZSwuZmEtc29ydC1udW1lcmljLWRvd246YmVmb3Jle2NvbnRlbnQ6IlxmMTYyIn0uZmEtaGFuZC1ob2xkaW5nLWRyb3BsZXQ6YmVmb3JlLC5mYS1oYW5kLWhvbGRpbmctd2F0ZXI6YmVmb3Jle2NvbnRlbnQ6IlxmNGMxIn0uZmEtd2F0ZXI6YmVmb3Jle2NvbnRlbnQ6IlxmNzczIn0uZmEtY2FsZW5kYXItY2hlY2s6YmVmb3Jle2NvbnRlbnQ6IlxmMjc0In0uZmEtYnJhaWxsZTpiZWZvcmV7Y29udGVudDoiXGYyYTEifS5mYS1wcmVzY3JpcHRpb24tYm90dGxlLWFsdDpiZWZvcmUsLmZhLXByZXNjcmlwdGlvbi1ib3R0bGUtbWVkaWNhbDpiZWZvcmV7Y29udGVudDoiXGY0ODYifS5mYS1sYW5kbWFyazpiZWZvcmV7Y29udGVudDoiXGY2NmYifS5mYS10cnVjazpiZWZvcmV7Y29udGVudDoiXGYwZDEifS5mYS1jcm9zc2hhaXJzOmJlZm9yZXtjb250ZW50OiJcZjA1YiJ9LmZhLXBlcnNvbi1jYW5lOmJlZm9yZXtjb250ZW50OiJcZTUzYyJ9LmZhLXRlbnQ6YmVmb3Jle2NvbnRlbnQ6IlxlNTdkIn0uZmEtdmVzdC1wYXRjaGVzOmJlZm9yZXtjb250ZW50OiJcZTA4NiJ9LmZhLWNoZWNrLWRvdWJsZTpiZWZvcmV7Y29udGVudDoiXGY1NjAifS5mYS1hcnJvdy1kb3duLWEtejpiZWZvcmUsLmZhLXNvcnQtYWxwaGEtYXNjOmJlZm9yZSwuZmEtc29ydC1hbHBoYS1kb3duOmJlZm9yZXtjb250ZW50OiJcZjE1ZCJ9LmZhLW1vbmV5LWJpbGwtd2hlYXQ6YmVmb3Jle2NvbnRlbnQ6IlxlNTJhIn0uZmEtY29va2llOmJlZm9yZXtjb250ZW50OiJcZjU2MyJ9LmZhLWFycm93LWxlZnQtcm90YXRlOmJlZm9yZSwuZmEtYXJyb3ctcm90YXRlLWJhY2s6YmVmb3JlLC5mYS1hcnJvdy1yb3RhdGUtYmFja3dhcmQ6YmVmb3JlLC5mYS1hcnJvdy1yb3RhdGUtbGVmdDpiZWZvcmUsLmZhLXVuZG86YmVmb3Jle2NvbnRlbnQ6IlxmMGUyIn0uZmEtaGFyZC1kcml2ZTpiZWZvcmUsLmZhLWhkZDpiZWZvcmV7Y29udGVudDoiXGYwYTAifS5mYS1mYWNlLWdyaW4tc3F1aW50LXRlYXJzOmJlZm9yZSwuZmEtZ3Jpbi1zcXVpbnQtdGVhcnM6YmVmb3Jle2NvbnRlbnQ6IlxmNTg2In0uZmEtZHVtYmJlbGw6YmVmb3Jle2NvbnRlbnQ6IlxmNDRiIn0uZmEtbGlzdC1hbHQ6YmVmb3JlLC5mYS1yZWN0YW5nbGUtbGlzdDpiZWZvcmV7Y29udGVudDoiXGYwMjIifS5mYS10YXJwLWRyb3BsZXQ6YmVmb3Jle2NvbnRlbnQ6IlxlNTdjIn0uZmEtaG91c2UtbWVkaWNhbC1jaXJjbGUtY2hlY2s6YmVmb3Jle2NvbnRlbnQ6IlxlNTExIn0uZmEtcGVyc29uLXNraWluZy1ub3JkaWM6YmVmb3JlLC5mYS1za2lpbmctbm9yZGljOmJlZm9yZXtjb250ZW50OiJcZjdjYSJ9LmZhLWNhbGVuZGFyLXBsdXM6YmVmb3Jle2NvbnRlbnQ6IlxmMjcxIn0uZmEtcGxhbmUtYXJyaXZhbDpiZWZvcmV7Y29udGVudDoiXGY1YWYifS5mYS1hcnJvdy1hbHQtY2lyY2xlLWxlZnQ6YmVmb3JlLC5mYS1jaXJjbGUtbGVmdDpiZWZvcmV7Y29udGVudDoiXGYzNTkifS5mYS1zdWJ3YXk6YmVmb3JlLC5mYS10cmFpbi1zdWJ3YXk6YmVmb3Jle2NvbnRlbnQ6IlxmMjM5In0uZmEtY2hhcnQtZ2FudHQ6YmVmb3Jle2NvbnRlbnQ6IlxlMGU0In0uZmEtaW5kaWFuLXJ1cGVlLXNpZ246YmVmb3JlLC5mYS1pbmRpYW4tcnVwZWU6YmVmb3JlLC5mYS1pbnI6YmVmb3Jle2NvbnRlbnQ6IlxlMWJjIn0uZmEtY3JvcC1hbHQ6YmVmb3JlLC5mYS1jcm9wLXNpbXBsZTpiZWZvcmV7Y29udGVudDoiXGY1NjUifS5mYS1tb25leS1iaWxsLTE6YmVmb3JlLC5mYS1tb25leS1iaWxsLWFsdDpiZWZvcmV7Y29udGVudDoiXGYzZDEifS5mYS1sZWZ0LWxvbmc6YmVmb3JlLC5mYS1sb25nLWFycm93LWFsdC1sZWZ0OmJlZm9yZXtjb250ZW50OiJcZjMwYSJ9LmZhLWRuYTpiZWZvcmV7Y29udGVudDoiXGY0NzEifS5mYS12aXJ1cy1zbGFzaDpiZWZvcmV7Y29udGVudDoiXGUwNzUifS5mYS1taW51czpiZWZvcmUsLmZhLXN1YnRyYWN0OmJlZm9yZXtjb250ZW50OiJcZjA2OCJ9LmZhLWNoZXNzOmJlZm9yZXtjb250ZW50OiJcZjQzOSJ9LmZhLWFycm93LWxlZnQtbG9uZzpiZWZvcmUsLmZhLWxvbmctYXJyb3ctbGVmdDpiZWZvcmV7Y29udGVudDoiXGYxNzcifS5mYS1wbHVnLWNpcmNsZS1jaGVjazpiZWZvcmV7Y29udGVudDoiXGU1NWMifS5mYS1zdHJlZXQtdmlldzpiZWZvcmV7Y29udGVudDoiXGYyMWQifS5mYS1mcmFuYy1zaWduOmJlZm9yZXtjb250ZW50OiJcZTE4ZiJ9LmZhLXZvbHVtZS1vZmY6YmVmb3Jle2NvbnRlbnQ6IlxmMDI2In0uZmEtYW1lcmljYW4tc2lnbi1sYW5ndWFnZS1pbnRlcnByZXRpbmc6YmVmb3JlLC5mYS1hc2wtaW50ZXJwcmV0aW5nOmJlZm9yZSwuZmEtaGFuZHMtYW1lcmljYW4tc2lnbi1sYW5ndWFnZS1pbnRlcnByZXRpbmc6YmVmb3JlLC5mYS1oYW5kcy1hc2wtaW50ZXJwcmV0aW5nOmJlZm9yZXtjb250ZW50OiJcZjJhMyJ9LmZhLWNvZzpiZWZvcmUsLmZhLWdlYXI6YmVmb3Jle2NvbnRlbnQ6IlxmMDEzIn0uZmEtZHJvcGxldC1zbGFzaDpiZWZvcmUsLmZhLXRpbnQtc2xhc2g6YmVmb3Jle2NvbnRlbnQ6IlxmNWM3In0uZmEtbW9zcXVlOmJlZm9yZXtjb250ZW50OiJcZjY3OCJ9LmZhLW1vc3F1aXRvOmJlZm9yZXtjb250ZW50OiJcZTUyYiJ9LmZhLXN0YXItb2YtZGF2aWQ6YmVmb3Jle2NvbnRlbnQ6IlxmNjlhIn0uZmEtcGVyc29uLW1pbGl0YXJ5LXJpZmxlOmJlZm9yZXtjb250ZW50OiJcZTU0YiJ9LmZhLWNhcnQtc2hvcHBpbmc6YmVmb3JlLC5mYS1zaG9wcGluZy1jYXJ0OmJlZm9yZXtjb250ZW50OiJcZjA3YSJ9LmZhLXZpYWxzOmJlZm9yZXtjb250ZW50OiJcZjQ5MyJ9LmZhLXBsdWctY2lyY2xlLXBsdXM6YmVmb3Jle2NvbnRlbnQ6IlxlNTVmIn0uZmEtcGxhY2Utb2Ytd29yc2hpcDpiZWZvcmV7Y29udGVudDoiXGY2N2YifS5mYS1ncmlwLXZlcnRpY2FsOmJlZm9yZXtjb250ZW50OiJcZjU4ZSJ9LmZhLWFycm93LXR1cm4tdXA6YmVmb3JlLC5mYS1sZXZlbC11cDpiZWZvcmV7Y29udGVudDoiXGYxNDgifS5mYS11OmJlZm9yZXtjb250ZW50OiJcNTUifS5mYS1zcXVhcmUtcm9vdC1hbHQ6YmVmb3JlLC5mYS1zcXVhcmUtcm9vdC12YXJpYWJsZTpiZWZvcmV7Y29udGVudDoiXGY2OTgifS5mYS1jbG9jay1mb3VyOmJlZm9yZSwuZmEtY2xvY2s6YmVmb3Jle2NvbnRlbnQ6IlxmMDE3In0uZmEtYmFja3dhcmQtc3RlcDpiZWZvcmUsLmZhLXN0ZXAtYmFja3dhcmQ6YmVmb3Jle2NvbnRlbnQ6IlxmMDQ4In0uZmEtcGFsbGV0OmJlZm9yZXtjb250ZW50OiJcZjQ4MiJ9LmZhLWZhdWNldDpiZWZvcmV7Y29udGVudDoiXGUwMDUifS5mYS1iYXNlYmFsbC1iYXQtYmFsbDpiZWZvcmV7Y29udGVudDoiXGY0MzIifS5mYS1zOmJlZm9yZXtjb250ZW50OiJcNTMifS5mYS10aW1lbGluZTpiZWZvcmV7Y29udGVudDoiXGUyOWMifS5mYS1rZXlib2FyZDpiZWZvcmV7Y29udGVudDoiXGYxMWMifS5mYS1jYXJldC1kb3duOmJlZm9yZXtjb250ZW50OiJcZjBkNyJ9LmZhLWNsaW5pYy1tZWRpY2FsOmJlZm9yZSwuZmEtaG91c2UtY2hpbW5leS1tZWRpY2FsOmJlZm9yZXtjb250ZW50OiJcZjdmMiJ9LmZhLXRlbXBlcmF0dXJlLTM6YmVmb3JlLC5mYS10ZW1wZXJhdHVyZS10aHJlZS1xdWFydGVyczpiZWZvcmUsLmZhLXRoZXJtb21ldGVyLTM6YmVmb3JlLC5mYS10aGVybW9tZXRlci10aHJlZS1xdWFydGVyczpiZWZvcmV7Y29udGVudDoiXGYyYzgifS5mYS1tb2JpbGUtYW5kcm9pZC1hbHQ6YmVmb3JlLC5mYS1tb2JpbGUtc2NyZWVuOmJlZm9yZXtjb250ZW50OiJcZjNjZiJ9LmZhLXBsYW5lLXVwOmJlZm9yZXtjb250ZW50OiJcZTIyZCJ9LmZhLXBpZ2d5LWJhbms6YmVmb3Jle2NvbnRlbnQ6IlxmNGQzIn0uZmEtYmF0dGVyeS0zOmJlZm9yZSwuZmEtYmF0dGVyeS1oYWxmOmJlZm9yZXtjb250ZW50OiJcZjI0MiJ9LmZhLW1vdW50YWluLWNpdHk6YmVmb3Jle2NvbnRlbnQ6IlxlNTJlIn0uZmEtY29pbnM6YmVmb3Jle2NvbnRlbnQ6IlxmNTFlIn0uZmEta2hhbmRhOmJlZm9yZXtjb250ZW50OiJcZjY2ZCJ9LmZhLXNsaWRlcnMtaDpiZWZvcmUsLmZhLXNsaWRlcnM6YmVmb3Jle2NvbnRlbnQ6IlxmMWRlIn0uZmEtZm9sZGVyLXRyZWU6YmVmb3Jle2NvbnRlbnQ6IlxmODAyIn0uZmEtbmV0d29yay13aXJlZDpiZWZvcmV7Y29udGVudDoiXGY2ZmYifS5mYS1tYXAtcGluOmJlZm9yZXtjb250ZW50OiJcZjI3NiJ9LmZhLWhhbXNhOmJlZm9yZXtjb250ZW50OiJcZjY2NSJ9LmZhLWNlbnQtc2lnbjpiZWZvcmV7Y29udGVudDoiXGUzZjUifS5mYS1mbGFzazpiZWZvcmV7Y29udGVudDoiXGYwYzMifS5mYS1wZXJzb24tcHJlZ25hbnQ6YmVmb3Jle2NvbnRlbnQ6IlxlMzFlIn0uZmEtd2FuZC1zcGFya2xlczpiZWZvcmV7Y29udGVudDoiXGY3MmIifS5mYS1lbGxpcHNpcy12OmJlZm9yZSwuZmEtZWxsaXBzaXMtdmVydGljYWw6YmVmb3Jle2NvbnRlbnQ6IlxmMTQyIn0uZmEtdGlja2V0OmJlZm9yZXtjb250ZW50OiJcZjE0NSJ9LmZhLXBvd2VyLW9mZjpiZWZvcmV7Y29udGVudDoiXGYwMTEifS5mYS1sb25nLWFycm93LWFsdC1yaWdodDpiZWZvcmUsLmZhLXJpZ2h0LWxvbmc6YmVmb3Jle2NvbnRlbnQ6IlxmMzBiIn0uZmEtZmxhZy11c2E6YmVmb3Jle2NvbnRlbnQ6IlxmNzRkIn0uZmEtbGFwdG9wLWZpbGU6YmVmb3Jle2NvbnRlbnQ6IlxlNTFkIn0uZmEtdGVsZXR5cGU6YmVmb3JlLC5mYS10dHk6YmVmb3Jle2NvbnRlbnQ6IlxmMWU0In0uZmEtZGlhZ3JhbS1uZXh0OmJlZm9yZXtjb250ZW50OiJcZTQ3NiJ9LmZhLXBlcnNvbi1yaWZsZTpiZWZvcmV7Y29udGVudDoiXGU1NGUifS5mYS1ob3VzZS1tZWRpY2FsLWNpcmNsZS1leGNsYW1hdGlvbjpiZWZvcmV7Y29udGVudDoiXGU1MTIifS5mYS1jbG9zZWQtY2FwdGlvbmluZzpiZWZvcmV7Y29udGVudDoiXGYyMGEifS5mYS1oaWtpbmc6YmVmb3JlLC5mYS1wZXJzb24taGlraW5nOmJlZm9yZXtjb250ZW50OiJcZjZlYyJ9LmZhLXZlbnVzLWRvdWJsZTpiZWZvcmV7Y29udGVudDoiXGYyMjYifS5mYS1pbWFnZXM6YmVmb3Jle2NvbnRlbnQ6IlxmMzAyIn0uZmEtY2FsY3VsYXRvcjpiZWZvcmV7Y29udGVudDoiXGYxZWMifS5mYS1wZW9wbGUtcHVsbGluZzpiZWZvcmV7Y29udGVudDoiXGU1MzUifS5mYS1uOmJlZm9yZXtjb250ZW50OiJcNGUifS5mYS1jYWJsZS1jYXI6YmVmb3JlLC5mYS10cmFtOmJlZm9yZXtjb250ZW50OiJcZjdkYSJ9LmZhLWNsb3VkLXJhaW46YmVmb3Jle2NvbnRlbnQ6IlxmNzNkIn0uZmEtYnVpbGRpbmctY2lyY2xlLXhtYXJrOmJlZm9yZXtjb250ZW50OiJcZTRkNCJ9LmZhLXNoaXA6YmVmb3Jle2NvbnRlbnQ6IlxmMjFhIn0uZmEtYXJyb3dzLWRvd24tdG8tbGluZTpiZWZvcmV7Y29udGVudDoiXGU0YjgifS5mYS1kb3dubG9hZDpiZWZvcmV7Y29udGVudDoiXGYwMTkifS5mYS1mYWNlLWdyaW46YmVmb3JlLC5mYS1ncmluOmJlZm9yZXtjb250ZW50OiJcZjU4MCJ9LmZhLWJhY2tzcGFjZTpiZWZvcmUsLmZhLWRlbGV0ZS1sZWZ0OmJlZm9yZXtjb250ZW50OiJcZjU1YSJ9LmZhLWV5ZS1kcm9wcGVyLWVtcHR5OmJlZm9yZSwuZmEtZXllLWRyb3BwZXI6YmVmb3JlLC5mYS1leWVkcm9wcGVyOmJlZm9yZXtjb250ZW50OiJcZjFmYiJ9LmZhLWZpbGUtY2lyY2xlLWNoZWNrOmJlZm9yZXtjb250ZW50OiJcZTVhMCJ9LmZhLWZvcndhcmQ6YmVmb3Jle2NvbnRlbnQ6IlxmMDRlIn0uZmEtbW9iaWxlLWFuZHJvaWQ6YmVmb3JlLC5mYS1tb2JpbGUtcGhvbmU6YmVmb3JlLC5mYS1tb2JpbGU6YmVmb3Jle2NvbnRlbnQ6IlxmM2NlIn0uZmEtZmFjZS1tZWg6YmVmb3JlLC5mYS1tZWg6YmVmb3Jle2NvbnRlbnQ6IlxmMTFhIn0uZmEtYWxpZ24tY2VudGVyOmJlZm9yZXtjb250ZW50OiJcZjAzNyJ9LmZhLWJvb2stZGVhZDpiZWZvcmUsLmZhLWJvb2stc2t1bGw6YmVmb3Jle2NvbnRlbnQ6IlxmNmI3In0uZmEtZHJpdmVycy1saWNlbnNlOmJlZm9yZSwuZmEtaWQtY2FyZDpiZWZvcmV7Y29udGVudDoiXGYyYzIifS5mYS1kZWRlbnQ6YmVmb3JlLC5mYS1vdXRkZW50OmJlZm9yZXtjb250ZW50OiJcZjAzYiJ9LmZhLWhlYXJ0LWNpcmNsZS1leGNsYW1hdGlvbjpiZWZvcmV7Y29udGVudDoiXGU0ZmUifS5mYS1ob21lLWFsdDpiZWZvcmUsLmZhLWhvbWUtbGctYWx0OmJlZm9yZSwuZmEtaG9tZTpiZWZvcmUsLmZhLWhvdXNlOmJlZm9yZXtjb250ZW50OiJcZjAxNSJ9LmZhLWNhbGVuZGFyLXdlZWs6YmVmb3Jle2NvbnRlbnQ6IlxmNzg0In0uZmEtbGFwdG9wLW1lZGljYWw6YmVmb3Jle2NvbnRlbnQ6IlxmODEyIn0uZmEtYjpiZWZvcmV7Y29udGVudDoiXDQyIn0uZmEtZmlsZS1tZWRpY2FsOmJlZm9yZXtjb250ZW50OiJcZjQ3NyJ9LmZhLWRpY2Utb25lOmJlZm9yZXtjb250ZW50OiJcZjUyNSJ9LmZhLWtpd2ktYmlyZDpiZWZvcmV7Y29udGVudDoiXGY1MzUifS5mYS1hcnJvdy1yaWdodC1hcnJvdy1sZWZ0OmJlZm9yZSwuZmEtZXhjaGFuZ2U6YmVmb3Jle2NvbnRlbnQ6IlxmMGVjIn0uZmEtcmVkby1hbHQ6YmVmb3JlLC5mYS1yb3RhdGUtZm9yd2FyZDpiZWZvcmUsLmZhLXJvdGF0ZS1yaWdodDpiZWZvcmV7Y29udGVudDoiXGYyZjkifS5mYS1jdXRsZXJ5OmJlZm9yZSwuZmEtdXRlbnNpbHM6YmVmb3Jle2NvbnRlbnQ6IlxmMmU3In0uZmEtYXJyb3ctdXAtd2lkZS1zaG9ydDpiZWZvcmUsLmZhLXNvcnQtYW1vdW50LXVwOmJlZm9yZXtjb250ZW50OiJcZjE2MSJ9LmZhLW1pbGwtc2lnbjpiZWZvcmV7Y29udGVudDoiXGUxZWQifS5mYS1ib3dsLXJpY2U6YmVmb3Jle2NvbnRlbnQ6IlxlMmViIn0uZmEtc2t1bGw6YmVmb3Jle2NvbnRlbnQ6IlxmNTRjIn0uZmEtYnJvYWRjYXN0LXRvd2VyOmJlZm9yZSwuZmEtdG93ZXItYnJvYWRjYXN0OmJlZm9yZXtjb250ZW50OiJcZjUxOSJ9LmZhLXRydWNrLXBpY2t1cDpiZWZvcmV7Y29udGVudDoiXGY2M2MifS5mYS1sb25nLWFycm93LWFsdC11cDpiZWZvcmUsLmZhLXVwLWxvbmc6YmVmb3Jle2NvbnRlbnQ6IlxmMzBjIn0uZmEtc3RvcDpiZWZvcmV7Y29udGVudDoiXGYwNGQifS5mYS1jb2RlLW1lcmdlOmJlZm9yZXtjb250ZW50OiJcZjM4NyJ9LmZhLXVwbG9hZDpiZWZvcmV7Y29udGVudDoiXGYwOTMifS5mYS1odXJyaWNhbmU6YmVmb3Jle2NvbnRlbnQ6IlxmNzUxIn0uZmEtbW91bmQ6YmVmb3Jle2NvbnRlbnQ6IlxlNTJkIn0uZmEtdG9pbGV0LXBvcnRhYmxlOmJlZm9yZXtjb250ZW50OiJcZTU4MyJ9LmZhLWNvbXBhY3QtZGlzYzpiZWZvcmV7Y29udGVudDoiXGY1MWYifS5mYS1maWxlLWFycm93LWRvd246YmVmb3JlLC5mYS1maWxlLWRvd25sb2FkOmJlZm9yZXtjb250ZW50OiJcZjU2ZCJ9LmZhLWNhcmF2YW46YmVmb3Jle2NvbnRlbnQ6IlxmOGZmIn0uZmEtc2hpZWxkLWNhdDpiZWZvcmV7Y29udGVudDoiXGU1NzIifS5mYS1ib2x0OmJlZm9yZSwuZmEtemFwOmJlZm9yZXtjb250ZW50OiJcZjBlNyJ9LmZhLWdsYXNzLXdhdGVyOmJlZm9yZXtjb250ZW50OiJcZTRmNCJ9LmZhLW9pbC13ZWxsOmJlZm9yZXtjb250ZW50OiJcZTUzMiJ9LmZhLXZhdWx0OmJlZm9yZXtjb250ZW50OiJcZTJjNSJ9LmZhLW1hcnM6YmVmb3Jle2NvbnRlbnQ6IlxmMjIyIn0uZmEtdG9pbGV0OmJlZm9yZXtjb250ZW50OiJcZjdkOCJ9LmZhLXBsYW5lLWNpcmNsZS14bWFyazpiZWZvcmV7Y29udGVudDoiXGU1NTcifS5mYS1jbnk6YmVmb3JlLC5mYS1qcHk6YmVmb3JlLC5mYS1ybWI6YmVmb3JlLC5mYS15ZW4tc2lnbjpiZWZvcmUsLmZhLXllbjpiZWZvcmV7Y29udGVudDoiXGYxNTcifS5mYS1yb3VibGU6YmVmb3JlLC5mYS1ydWI6YmVmb3JlLC5mYS1ydWJsZS1zaWduOmJlZm9yZSwuZmEtcnVibGU6YmVmb3Jle2NvbnRlbnQ6IlxmMTU4In0uZmEtc3VuOmJlZm9yZXtjb250ZW50OiJcZjE4NSJ9LmZhLWd1aXRhcjpiZWZvcmV7Y29udGVudDoiXGY3YTYifS5mYS1mYWNlLWxhdWdoLXdpbms6YmVmb3JlLC5mYS1sYXVnaC13aW5rOmJlZm9yZXtjb250ZW50OiJcZjU5YyJ9LmZhLWhvcnNlLWhlYWQ6YmVmb3Jle2NvbnRlbnQ6IlxmN2FiIn0uZmEtYm9yZS1ob2xlOmJlZm9yZXtjb250ZW50OiJcZTRjMyJ9LmZhLWluZHVzdHJ5OmJlZm9yZXtjb250ZW50OiJcZjI3NSJ9LmZhLWFycm93LWFsdC1jaXJjbGUtZG93bjpiZWZvcmUsLmZhLWNpcmNsZS1kb3duOmJlZm9yZXtjb250ZW50OiJcZjM1OCJ9LmZhLWFycm93cy10dXJuLXRvLWRvdHM6YmVmb3Jle2NvbnRlbnQ6IlxlNGMxIn0uZmEtZmxvcmluLXNpZ246YmVmb3Jle2NvbnRlbnQ6IlxlMTg0In0uZmEtYXJyb3ctZG93bi1zaG9ydC13aWRlOmJlZm9yZSwuZmEtc29ydC1hbW91bnQtZGVzYzpiZWZvcmUsLmZhLXNvcnQtYW1vdW50LWRvd24tYWx0OmJlZm9yZXtjb250ZW50OiJcZjg4NCJ9LmZhLWxlc3MtdGhhbjpiZWZvcmV7Y29udGVudDoiXDNjIn0uZmEtYW5nbGUtZG93bjpiZWZvcmV7Y29udGVudDoiXGYxMDcifS5mYS1jYXItdHVubmVsOmJlZm9yZXtjb250ZW50OiJcZTRkZSJ9LmZhLWhlYWQtc2lkZS1jb3VnaDpiZWZvcmV7Y29udGVudDoiXGUwNjEifS5mYS1ncmlwLWxpbmVzOmJlZm9yZXtjb250ZW50OiJcZjdhNCJ9LmZhLXRodW1icy1kb3duOmJlZm9yZXtjb250ZW50OiJcZjE2NSJ9LmZhLXVzZXItbG9jazpiZWZvcmV7Y29udGVudDoiXGY1MDIifS5mYS1hcnJvdy1yaWdodC1sb25nOmJlZm9yZSwuZmEtbG9uZy1hcnJvdy1yaWdodDpiZWZvcmV7Y29udGVudDoiXGYxNzgifS5mYS1hbmNob3ItY2lyY2xlLXhtYXJrOmJlZm9yZXtjb250ZW50OiJcZTRhYyJ9LmZhLWVsbGlwc2lzLWg6YmVmb3JlLC5mYS1lbGxpcHNpczpiZWZvcmV7Y29udGVudDoiXGYxNDEifS5mYS1jaGVzcy1wYXduOmJlZm9yZXtjb250ZW50OiJcZjQ0MyJ9LmZhLWZpcnN0LWFpZDpiZWZvcmUsLmZhLWtpdC1tZWRpY2FsOmJlZm9yZXtjb250ZW50OiJcZjQ3OSJ9LmZhLXBlcnNvbi10aHJvdWdoLXdpbmRvdzpiZWZvcmV7Y29udGVudDoiXGU1YTkifS5mYS10b29sYm94OmJlZm9yZXtjb250ZW50OiJcZjU1MiJ9LmZhLWhhbmRzLWhvbGRpbmctY2lyY2xlOmJlZm9yZXtjb250ZW50OiJcZTRmYiJ9LmZhLWJ1ZzpiZWZvcmV7Y29udGVudDoiXGYxODgifS5mYS1jcmVkaXQtY2FyZC1hbHQ6YmVmb3JlLC5mYS1jcmVkaXQtY2FyZDpiZWZvcmV7Y29udGVudDoiXGYwOWQifS5mYS1hdXRvbW9iaWxlOmJlZm9yZSwuZmEtY2FyOmJlZm9yZXtjb250ZW50OiJcZjFiOSJ9LmZhLWhhbmQtaG9sZGluZy1oYW5kOmJlZm9yZXtjb250ZW50OiJcZTRmNyJ9LmZhLWJvb2stb3Blbi1yZWFkZXI6YmVmb3JlLC5mYS1ib29rLXJlYWRlcjpiZWZvcmV7Y29udGVudDoiXGY1ZGEifS5mYS1tb3VudGFpbi1zdW46YmVmb3Jle2NvbnRlbnQ6IlxlNTJmIn0uZmEtYXJyb3dzLWxlZnQtcmlnaHQtdG8tbGluZTpiZWZvcmV7Y29udGVudDoiXGU0YmEifS5mYS1kaWNlLWQyMDpiZWZvcmV7Y29udGVudDoiXGY2Y2YifS5mYS10cnVjay1kcm9wbGV0OmJlZm9yZXtjb250ZW50OiJcZTU4YyJ9LmZhLWZpbGUtY2lyY2xlLXhtYXJrOmJlZm9yZXtjb250ZW50OiJcZTVhMSJ9LmZhLXRlbXBlcmF0dXJlLWFycm93LXVwOmJlZm9yZSwuZmEtdGVtcGVyYXR1cmUtdXA6YmVmb3Jle2NvbnRlbnQ6IlxlMDQwIn0uZmEtbWVkYWw6YmVmb3Jle2NvbnRlbnQ6IlxmNWEyIn0uZmEtYmVkOmJlZm9yZXtjb250ZW50OiJcZjIzNiJ9LmZhLWgtc3F1YXJlOmJlZm9yZSwuZmEtc3F1YXJlLWg6YmVmb3Jle2NvbnRlbnQ6IlxmMGZkIn0uZmEtcG9kY2FzdDpiZWZvcmV7Y29udGVudDoiXGYyY2UifS5mYS10ZW1wZXJhdHVyZS00OmJlZm9yZSwuZmEtdGVtcGVyYXR1cmUtZnVsbDpiZWZvcmUsLmZhLXRoZXJtb21ldGVyLTQ6YmVmb3JlLC5mYS10aGVybW9tZXRlci1mdWxsOmJlZm9yZXtjb250ZW50OiJcZjJjNyJ9LmZhLWJlbGw6YmVmb3Jle2NvbnRlbnQ6IlxmMGYzIn0uZmEtc3VwZXJzY3JpcHQ6YmVmb3Jle2NvbnRlbnQ6IlxmMTJiIn0uZmEtcGx1Zy1jaXJjbGUteG1hcms6YmVmb3Jle2NvbnRlbnQ6IlxlNTYwIn0uZmEtc3Rhci1vZi1saWZlOmJlZm9yZXtjb250ZW50OiJcZjYyMSJ9LmZhLXBob25lLXNsYXNoOmJlZm9yZXtjb250ZW50OiJcZjNkZCJ9LmZhLXBhaW50LXJvbGxlcjpiZWZvcmV7Y29udGVudDoiXGY1YWEifS5mYS1oYW5kcy1oZWxwaW5nOmJlZm9yZSwuZmEtaGFuZHNoYWtlLWFuZ2xlOmJlZm9yZXtjb250ZW50OiJcZjRjNCJ9LmZhLWxvY2F0aW9uLWRvdDpiZWZvcmUsLmZhLW1hcC1tYXJrZXItYWx0OmJlZm9yZXtjb250ZW50OiJcZjNjNSJ9LmZhLWZpbGU6YmVmb3Jle2NvbnRlbnQ6IlxmMTViIn0uZmEtZ3JlYXRlci10aGFuOmJlZm9yZXtjb250ZW50OiJcM2UifS5mYS1wZXJzb24tc3dpbW1pbmc6YmVmb3JlLC5mYS1zd2ltbWVyOmJlZm9yZXtjb250ZW50OiJcZjVjNCJ9LmZhLWFycm93LWRvd246YmVmb3Jle2NvbnRlbnQ6IlxmMDYzIn0uZmEtZHJvcGxldDpiZWZvcmUsLmZhLXRpbnQ6YmVmb3Jle2NvbnRlbnQ6IlxmMDQzIn0uZmEtZXJhc2VyOmJlZm9yZXtjb250ZW50OiJcZjEyZCJ9LmZhLWVhcnRoLWFtZXJpY2E6YmVmb3JlLC5mYS1lYXJ0aC1hbWVyaWNhczpiZWZvcmUsLmZhLWVhcnRoOmJlZm9yZSwuZmEtZ2xvYmUtYW1lcmljYXM6YmVmb3Jle2NvbnRlbnQ6IlxmNTdkIn0uZmEtcGVyc29uLWJ1cnN0OmJlZm9yZXtjb250ZW50OiJcZTUzYiJ9LmZhLWRvdmU6YmVmb3Jle2NvbnRlbnQ6IlxmNGJhIn0uZmEtYmF0dGVyeS0wOmJlZm9yZSwuZmEtYmF0dGVyeS1lbXB0eTpiZWZvcmV7Y29udGVudDoiXGYyNDQifS5mYS1zb2NrczpiZWZvcmV7Y29udGVudDoiXGY2OTYifS5mYS1pbmJveDpiZWZvcmV7Y29udGVudDoiXGYwMWMifS5mYS1zZWN0aW9uOmJlZm9yZXtjb250ZW50OiJcZTQ0NyJ9LmZhLWdhdWdlLWhpZ2g6YmVmb3JlLC5mYS10YWNob21ldGVyLWFsdC1mYXN0OmJlZm9yZSwuZmEtdGFjaG9tZXRlci1hbHQ6YmVmb3Jle2NvbnRlbnQ6IlxmNjI1In0uZmEtZW52ZWxvcGUtb3Blbi10ZXh0OmJlZm9yZXtjb250ZW50OiJcZjY1OCJ9LmZhLWhvc3BpdGFsLWFsdDpiZWZvcmUsLmZhLWhvc3BpdGFsLXdpZGU6YmVmb3JlLC5mYS1ob3NwaXRhbDpiZWZvcmV7Y29udGVudDoiXGYwZjgifS5mYS13aW5lLWJvdHRsZTpiZWZvcmV7Y29udGVudDoiXGY3MmYifS5mYS1jaGVzcy1yb29rOmJlZm9yZXtjb250ZW50OiJcZjQ0NyJ9LmZhLWJhcnMtc3RhZ2dlcmVkOmJlZm9yZSwuZmEtcmVvcmRlcjpiZWZvcmUsLmZhLXN0cmVhbTpiZWZvcmV7Y29udGVudDoiXGY1NTAifS5mYS1kaGFybWFjaGFrcmE6YmVmb3Jle2NvbnRlbnQ6IlxmNjU1In0uZmEtaG90ZG9nOmJlZm9yZXtjb250ZW50OiJcZjgwZiJ9LmZhLWJsaW5kOmJlZm9yZSwuZmEtcGVyc29uLXdhbGtpbmctd2l0aC1jYW5lOmJlZm9yZXtjb250ZW50OiJcZjI5ZCJ9LmZhLWRydW06YmVmb3Jle2NvbnRlbnQ6IlxmNTY5In0uZmEtaWNlLWNyZWFtOmJlZm9yZXtjb250ZW50OiJcZjgxMCJ9LmZhLWhlYXJ0LWNpcmNsZS1ib2x0OmJlZm9yZXtjb250ZW50OiJcZTRmYyJ9LmZhLWZheDpiZWZvcmV7Y29udGVudDoiXGYxYWMifS5mYS1wYXJhZ3JhcGg6YmVmb3Jle2NvbnRlbnQ6IlxmMWRkIn0uZmEtY2hlY2stdG8tc2xvdDpiZWZvcmUsLmZhLXZvdGUteWVhOmJlZm9yZXtjb250ZW50OiJcZjc3MiJ9LmZhLXN0YXItaGFsZjpiZWZvcmV7Y29udGVudDoiXGYwODkifS5mYS1ib3hlcy1hbHQ6YmVmb3JlLC5mYS1ib3hlcy1zdGFja2VkOmJlZm9yZSwuZmEtYm94ZXM6YmVmb3Jle2NvbnRlbnQ6IlxmNDY4In0uZmEtY2hhaW46YmVmb3JlLC5mYS1saW5rOmJlZm9yZXtjb250ZW50OiJcZjBjMSJ9LmZhLWFzc2lzdGl2ZS1saXN0ZW5pbmctc3lzdGVtczpiZWZvcmUsLmZhLWVhci1saXN0ZW46YmVmb3Jle2NvbnRlbnQ6IlxmMmEyIn0uZmEtdHJlZS1jaXR5OmJlZm9yZXtjb250ZW50OiJcZTU4NyJ9LmZhLXBsYXk6YmVmb3Jle2NvbnRlbnQ6IlxmMDRiIn0uZmEtZm9udDpiZWZvcmV7Y29udGVudDoiXGYwMzEifS5mYS1ydXBpYWgtc2lnbjpiZWZvcmV7Y29udGVudDoiXGUyM2QifS5mYS1tYWduaWZ5aW5nLWdsYXNzOmJlZm9yZSwuZmEtc2VhcmNoOmJlZm9yZXtjb250ZW50OiJcZjAwMiJ9LmZhLXBpbmctcG9uZy1wYWRkbGUtYmFsbDpiZWZvcmUsLmZhLXRhYmxlLXRlbm5pcy1wYWRkbGUtYmFsbDpiZWZvcmUsLmZhLXRhYmxlLXRlbm5pczpiZWZvcmV7Y29udGVudDoiXGY0NWQifS5mYS1kaWFnbm9zZXM6YmVmb3JlLC5mYS1wZXJzb24tZG90cy1mcm9tLWxpbmU6YmVmb3Jle2NvbnRlbnQ6IlxmNDcwIn0uZmEtdHJhc2gtY2FuLWFycm93LXVwOmJlZm9yZSwuZmEtdHJhc2gtcmVzdG9yZS1hbHQ6YmVmb3Jle2NvbnRlbnQ6IlxmODJhIn0uZmEtbmFpcmEtc2lnbjpiZWZvcmV7Y29udGVudDoiXGUxZjYifS5mYS1jYXJ0LWFycm93LWRvd246YmVmb3Jle2NvbnRlbnQ6IlxmMjE4In0uZmEtd2Fsa2llLXRhbGtpZTpiZWZvcmV7Y29udGVudDoiXGY4ZWYifS5mYS1maWxlLWVkaXQ6YmVmb3JlLC5mYS1maWxlLXBlbjpiZWZvcmV7Y29udGVudDoiXGYzMWMifS5mYS1yZWNlaXB0OmJlZm9yZXtjb250ZW50OiJcZjU0MyJ9LmZhLXBlbi1zcXVhcmU6YmVmb3JlLC5mYS1wZW5jaWwtc3F1YXJlOmJlZm9yZSwuZmEtc3F1YXJlLXBlbjpiZWZvcmV7Y29udGVudDoiXGYxNGIifS5mYS1zdWl0Y2FzZS1yb2xsaW5nOmJlZm9yZXtjb250ZW50OiJcZjVjMSJ9LmZhLXBlcnNvbi1jaXJjbGUtZXhjbGFtYXRpb246YmVmb3Jle2NvbnRlbnQ6IlxlNTNmIn0uZmEtY2hldnJvbi1kb3duOmJlZm9yZXtjb250ZW50OiJcZjA3OCJ9LmZhLWJhdHRlcnktNTpiZWZvcmUsLmZhLWJhdHRlcnktZnVsbDpiZWZvcmUsLmZhLWJhdHRlcnk6YmVmb3Jle2NvbnRlbnQ6IlxmMjQwIn0uZmEtc2t1bGwtY3Jvc3Nib25lczpiZWZvcmV7Y29udGVudDoiXGY3MTQifS5mYS1jb2RlLWNvbXBhcmU6YmVmb3Jle2NvbnRlbnQ6IlxlMTNhIn0uZmEtbGlzdC1kb3RzOmJlZm9yZSwuZmEtbGlzdC11bDpiZWZvcmV7Y29udGVudDoiXGYwY2EifS5mYS1zY2hvb2wtbG9jazpiZWZvcmV7Y29udGVudDoiXGU1NmYifS5mYS10b3dlci1jZWxsOmJlZm9yZXtjb250ZW50OiJcZTU4NSJ9LmZhLWRvd24tbG9uZzpiZWZvcmUsLmZhLWxvbmctYXJyb3ctYWx0LWRvd246YmVmb3Jle2NvbnRlbnQ6IlxmMzA5In0uZmEtcmFua2luZy1zdGFyOmJlZm9yZXtjb250ZW50OiJcZTU2MSJ9LmZhLWNoZXNzLWtpbmc6YmVmb3Jle2NvbnRlbnQ6IlxmNDNmIn0uZmEtcGVyc29uLWhhcmFzc2luZzpiZWZvcmV7Y29udGVudDoiXGU1NDkifS5mYS1icmF6aWxpYW4tcmVhbC1zaWduOmJlZm9yZXtjb250ZW50OiJcZTQ2YyJ9LmZhLWxhbmRtYXJrLWFsdDpiZWZvcmUsLmZhLWxhbmRtYXJrLWRvbWU6YmVmb3Jle2NvbnRlbnQ6IlxmNzUyIn0uZmEtYXJyb3ctdXA6YmVmb3Jle2NvbnRlbnQ6IlxmMDYyIn0uZmEtdGVsZXZpc2lvbjpiZWZvcmUsLmZhLXR2LWFsdDpiZWZvcmUsLmZhLXR2OmJlZm9yZXtjb250ZW50OiJcZjI2YyJ9LmZhLXNocmltcDpiZWZvcmV7Y29udGVudDoiXGU0NDgifS5mYS1saXN0LWNoZWNrOmJlZm9yZSwuZmEtdGFza3M6YmVmb3Jle2NvbnRlbnQ6IlxmMGFlIn0uZmEtanVnLWRldGVyZ2VudDpiZWZvcmV7Y29udGVudDoiXGU1MTkifS5mYS1jaXJjbGUtdXNlcjpiZWZvcmUsLmZhLXVzZXItY2lyY2xlOmJlZm9yZXtjb250ZW50OiJcZjJiZCJ9LmZhLXVzZXItc2hpZWxkOmJlZm9yZXtjb250ZW50OiJcZjUwNSJ9LmZhLXdpbmQ6YmVmb3Jle2NvbnRlbnQ6IlxmNzJlIn0uZmEtY2FyLWJ1cnN0OmJlZm9yZSwuZmEtY2FyLWNyYXNoOmJlZm9yZXtjb250ZW50OiJcZjVlMSJ9LmZhLXk6YmVmb3Jle2NvbnRlbnQ6Ilw1OSJ9LmZhLXBlcnNvbi1zbm93Ym9hcmRpbmc6YmVmb3JlLC5mYS1zbm93Ym9hcmRpbmc6YmVmb3Jle2NvbnRlbnQ6IlxmN2NlIn0uZmEtc2hpcHBpbmctZmFzdDpiZWZvcmUsLmZhLXRydWNrLWZhc3Q6YmVmb3Jle2NvbnRlbnQ6IlxmNDhiIn0uZmEtZmlzaDpiZWZvcmV7Y29udGVudDoiXGY1NzgifS5mYS11c2VyLWdyYWR1YXRlOmJlZm9yZXtjb250ZW50OiJcZjUwMSJ9LmZhLWFkanVzdDpiZWZvcmUsLmZhLWNpcmNsZS1oYWxmLXN0cm9rZTpiZWZvcmV7Y29udGVudDoiXGYwNDIifS5mYS1jbGFwcGVyYm9hcmQ6YmVmb3Jle2NvbnRlbnQ6IlxlMTMxIn0uZmEtY2lyY2xlLXJhZGlhdGlvbjpiZWZvcmUsLmZhLXJhZGlhdGlvbi1hbHQ6YmVmb3Jle2NvbnRlbnQ6IlxmN2JhIn0uZmEtYmFzZWJhbGwtYmFsbDpiZWZvcmUsLmZhLWJhc2ViYWxsOmJlZm9yZXtjb250ZW50OiJcZjQzMyJ9LmZhLWpldC1maWdodGVyLXVwOmJlZm9yZXtjb250ZW50OiJcZTUxOCJ9LmZhLWRpYWdyYW0tcHJvamVjdDpiZWZvcmUsLmZhLXByb2plY3QtZGlhZ3JhbTpiZWZvcmV7Y29udGVudDoiXGY1NDIifS5mYS1jb3B5OmJlZm9yZXtjb250ZW50OiJcZjBjNSJ9LmZhLXZvbHVtZS1tdXRlOmJlZm9yZSwuZmEtdm9sdW1lLXRpbWVzOmJlZm9yZSwuZmEtdm9sdW1lLXhtYXJrOmJlZm9yZXtjb250ZW50OiJcZjZhOSJ9LmZhLWhhbmQtc3BhcmtsZXM6YmVmb3Jle2NvbnRlbnQ6IlxlMDVkIn0uZmEtZ3JpcC1ob3Jpem9udGFsOmJlZm9yZSwuZmEtZ3JpcDpiZWZvcmV7Y29udGVudDoiXGY1OGQifS5mYS1zaGFyZS1mcm9tLXNxdWFyZTpiZWZvcmUsLmZhLXNoYXJlLXNxdWFyZTpiZWZvcmV7Y29udGVudDoiXGYxNGQifS5mYS1jaGlsZC1jb21iYXRhbnQ6YmVmb3JlLC5mYS1jaGlsZC1yaWZsZTpiZWZvcmV7Y29udGVudDoiXGU0ZTAifS5mYS1ndW46YmVmb3Jle2NvbnRlbnQ6IlxlMTliIn0uZmEtcGhvbmUtc3F1YXJlOmJlZm9yZSwuZmEtc3F1YXJlLXBob25lOmJlZm9yZXtjb250ZW50OiJcZjA5OCJ9LmZhLWFkZDpiZWZvcmUsLmZhLXBsdXM6YmVmb3Jle2NvbnRlbnQ6IlwyYiJ9LmZhLWV4cGFuZDpiZWZvcmV7Y29udGVudDoiXGYwNjUifS5mYS1jb21wdXRlcjpiZWZvcmV7Y29udGVudDoiXGU0ZTUifS5mYS1jbG9zZTpiZWZvcmUsLmZhLW11bHRpcGx5OmJlZm9yZSwuZmEtcmVtb3ZlOmJlZm9yZSwuZmEtdGltZXM6YmVmb3JlLC5mYS14bWFyazpiZWZvcmV7Y29udGVudDoiXGYwMGQifS5mYS1hcnJvd3MtdXAtZG93bi1sZWZ0LXJpZ2h0OmJlZm9yZSwuZmEtYXJyb3dzOmJlZm9yZXtjb250ZW50OiJcZjA0NyJ9LmZhLWNoYWxrYm9hcmQtdGVhY2hlcjpiZWZvcmUsLmZhLWNoYWxrYm9hcmQtdXNlcjpiZWZvcmV7Y29udGVudDoiXGY1MWMifS5mYS1wZXNvLXNpZ246YmVmb3Jle2NvbnRlbnQ6IlxlMjIyIn0uZmEtYnVpbGRpbmctc2hpZWxkOmJlZm9yZXtjb250ZW50OiJcZTRkOCJ9LmZhLWJhYnk6YmVmb3Jle2NvbnRlbnQ6IlxmNzdjIn0uZmEtdXNlcnMtbGluZTpiZWZvcmV7Y29udGVudDoiXGU1OTIifS5mYS1xdW90ZS1sZWZ0LWFsdDpiZWZvcmUsLmZhLXF1b3RlLWxlZnQ6YmVmb3Jle2NvbnRlbnQ6IlxmMTBkIn0uZmEtdHJhY3RvcjpiZWZvcmV7Y29udGVudDoiXGY3MjIifS5mYS10cmFzaC1hcnJvdy11cDpiZWZvcmUsLmZhLXRyYXNoLXJlc3RvcmU6YmVmb3Jle2NvbnRlbnQ6IlxmODI5In0uZmEtYXJyb3ctZG93bi11cC1sb2NrOmJlZm9yZXtjb250ZW50OiJcZTRiMCJ9LmZhLWxpbmVzLWxlYW5pbmc6YmVmb3Jle2NvbnRlbnQ6IlxlNTFlIn0uZmEtcnVsZXItY29tYmluZWQ6YmVmb3Jle2NvbnRlbnQ6IlxmNTQ2In0uZmEtY29weXJpZ2h0OmJlZm9yZXtjb250ZW50OiJcZjFmOSJ9LmZhLWVxdWFsczpiZWZvcmV7Y29udGVudDoiXDNkIn0uZmEtYmxlbmRlcjpiZWZvcmV7Y29udGVudDoiXGY1MTcifS5mYS10ZWV0aDpiZWZvcmV7Y29udGVudDoiXGY2MmUifS5mYS1pbHM6YmVmb3JlLC5mYS1zaGVrZWwtc2lnbjpiZWZvcmUsLmZhLXNoZWtlbDpiZWZvcmUsLmZhLXNoZXFlbC1zaWduOmJlZm9yZSwuZmEtc2hlcWVsOmJlZm9yZXtjb250ZW50OiJcZjIwYiJ9LmZhLW1hcDpiZWZvcmV7Y29udGVudDoiXGYyNzkifS5mYS1yb2NrZXQ6YmVmb3Jle2NvbnRlbnQ6IlxmMTM1In0uZmEtcGhvdG8tZmlsbTpiZWZvcmUsLmZhLXBob3RvLXZpZGVvOmJlZm9yZXtjb250ZW50OiJcZjg3YyJ9LmZhLWZvbGRlci1taW51czpiZWZvcmV7Y29udGVudDoiXGY2NWQifS5mYS1zdG9yZTpiZWZvcmV7Y29udGVudDoiXGY1NGUifS5mYS1hcnJvdy10cmVuZC11cDpiZWZvcmV7Y29udGVudDoiXGUwOTgifS5mYS1wbHVnLWNpcmNsZS1taW51czpiZWZvcmV7Y29udGVudDoiXGU1NWUifS5mYS1zaWduLWhhbmdpbmc6YmVmb3JlLC5mYS1zaWduOmJlZm9yZXtjb250ZW50OiJcZjRkOSJ9LmZhLWJlemllci1jdXJ2ZTpiZWZvcmV7Y29udGVudDoiXGY1NWIifS5mYS1iZWxsLXNsYXNoOmJlZm9yZXtjb250ZW50OiJcZjFmNiJ9LmZhLXRhYmxldC1hbmRyb2lkOmJlZm9yZSwuZmEtdGFibGV0OmJlZm9yZXtjb250ZW50OiJcZjNmYiJ9LmZhLXNjaG9vbC1mbGFnOmJlZm9yZXtjb250ZW50OiJcZTU2ZSJ9LmZhLWZpbGw6YmVmb3Jle2NvbnRlbnQ6IlxmNTc1In0uZmEtYW5nbGUtdXA6YmVmb3Jle2NvbnRlbnQ6IlxmMTA2In0uZmEtZHJ1bXN0aWNrLWJpdGU6YmVmb3Jle2NvbnRlbnQ6IlxmNmQ3In0uZmEtaG9sbHktYmVycnk6YmVmb3Jle2NvbnRlbnQ6IlxmN2FhIn0uZmEtY2hldnJvbi1sZWZ0OmJlZm9yZXtjb250ZW50OiJcZjA1MyJ9LmZhLWJhY3RlcmlhOmJlZm9yZXtjb250ZW50OiJcZTA1OSJ9LmZhLWhhbmQtbGl6YXJkOmJlZm9yZXtjb250ZW50OiJcZjI1OCJ9LmZhLW5vdGRlZjpiZWZvcmV7Y29udGVudDoiXGUxZmUifS5mYS1kaXNlYXNlOmJlZm9yZXtjb250ZW50OiJcZjdmYSJ9LmZhLWJyaWVmY2FzZS1tZWRpY2FsOmJlZm9yZXtjb250ZW50OiJcZjQ2OSJ9LmZhLWdlbmRlcmxlc3M6YmVmb3Jle2NvbnRlbnQ6IlxmMjJkIn0uZmEtY2hldnJvbi1yaWdodDpiZWZvcmV7Y29udGVudDoiXGYwNTQifS5mYS1yZXR3ZWV0OmJlZm9yZXtjb250ZW50OiJcZjA3OSJ9LmZhLWNhci1hbHQ6YmVmb3JlLC5mYS1jYXItcmVhcjpiZWZvcmV7Y29udGVudDoiXGY1ZGUifS5mYS1wdW1wLXNvYXA6YmVmb3Jle2NvbnRlbnQ6IlxlMDZiIn0uZmEtdmlkZW8tc2xhc2g6YmVmb3Jle2NvbnRlbnQ6IlxmNGUyIn0uZmEtYmF0dGVyeS0yOmJlZm9yZSwuZmEtYmF0dGVyeS1xdWFydGVyOmJlZm9yZXtjb250ZW50OiJcZjI0MyJ9LmZhLXJhZGlvOmJlZm9yZXtjb250ZW50OiJcZjhkNyJ9LmZhLWJhYnktY2FycmlhZ2U6YmVmb3JlLC5mYS1jYXJyaWFnZS1iYWJ5OmJlZm9yZXtjb250ZW50OiJcZjc3ZCJ9LmZhLXRyYWZmaWMtbGlnaHQ6YmVmb3Jle2NvbnRlbnQ6IlxmNjM3In0uZmEtdGhlcm1vbWV0ZXI6YmVmb3Jle2NvbnRlbnQ6IlxmNDkxIn0uZmEtdnItY2FyZGJvYXJkOmJlZm9yZXtjb250ZW50OiJcZjcyOSJ9LmZhLWhhbmQtbWlkZGxlLWZpbmdlcjpiZWZvcmV7Y29udGVudDoiXGY4MDYifS5mYS1wZXJjZW50OmJlZm9yZSwuZmEtcGVyY2VudGFnZTpiZWZvcmV7Y29udGVudDoiXDI1In0uZmEtdHJ1Y2stbW92aW5nOmJlZm9yZXtjb250ZW50OiJcZjRkZiJ9LmZhLWdsYXNzLXdhdGVyLWRyb3BsZXQ6YmVmb3Jle2NvbnRlbnQ6IlxlNGY1In0uZmEtZGlzcGxheTpiZWZvcmV7Y29udGVudDoiXGUxNjMifS5mYS1mYWNlLXNtaWxlOmJlZm9yZSwuZmEtc21pbGU6YmVmb3Jle2NvbnRlbnQ6IlxmMTE4In0uZmEtdGh1bWItdGFjazpiZWZvcmUsLmZhLXRodW1idGFjazpiZWZvcmV7Y29udGVudDoiXGYwOGQifS5mYS10cm9waHk6YmVmb3Jle2NvbnRlbnQ6IlxmMDkxIn0uZmEtcGVyc29uLXByYXlpbmc6YmVmb3JlLC5mYS1wcmF5OmJlZm9yZXtjb250ZW50OiJcZjY4MyJ9LmZhLWhhbW1lcjpiZWZvcmV7Y29udGVudDoiXGY2ZTMifS5mYS1oYW5kLXBlYWNlOmJlZm9yZXtjb250ZW50OiJcZjI1YiJ9LmZhLXJvdGF0ZTpiZWZvcmUsLmZhLXN5bmMtYWx0OmJlZm9yZXtjb250ZW50OiJcZjJmMSJ9LmZhLXNwaW5uZXI6YmVmb3Jle2NvbnRlbnQ6IlxmMTEwIn0uZmEtcm9ib3Q6YmVmb3Jle2NvbnRlbnQ6IlxmNTQ0In0uZmEtcGVhY2U6YmVmb3Jle2NvbnRlbnQ6IlxmNjdjIn0uZmEtY29nczpiZWZvcmUsLmZhLWdlYXJzOmJlZm9yZXtjb250ZW50OiJcZjA4NSJ9LmZhLXdhcmVob3VzZTpiZWZvcmV7Y29udGVudDoiXGY0OTQifS5mYS1hcnJvdy11cC1yaWdodC1kb3RzOmJlZm9yZXtjb250ZW50OiJcZTRiNyJ9LmZhLXNwbG90Y2g6YmVmb3Jle2NvbnRlbnQ6IlxmNWJjIn0uZmEtZmFjZS1ncmluLWhlYXJ0czpiZWZvcmUsLmZhLWdyaW4taGVhcnRzOmJlZm9yZXtjb250ZW50OiJcZjU4NCJ9LmZhLWRpY2UtZm91cjpiZWZvcmV7Y29udGVudDoiXGY1MjQifS5mYS1zaW0tY2FyZDpiZWZvcmV7Y29udGVudDoiXGY3YzQifS5mYS10cmFuc2dlbmRlci1hbHQ6YmVmb3JlLC5mYS10cmFuc2dlbmRlcjpiZWZvcmV7Y29udGVudDoiXGYyMjUifS5mYS1tZXJjdXJ5OmJlZm9yZXtjb250ZW50OiJcZjIyMyJ9LmZhLWFycm93LXR1cm4tZG93bjpiZWZvcmUsLmZhLWxldmVsLWRvd246YmVmb3Jle2NvbnRlbnQ6IlxmMTQ5In0uZmEtcGVyc29uLWZhbGxpbmctYnVyc3Q6YmVmb3Jle2NvbnRlbnQ6IlxlNTQ3In0uZmEtYXdhcmQ6YmVmb3Jle2NvbnRlbnQ6IlxmNTU5In0uZmEtdGlja2V0LWFsdDpiZWZvcmUsLmZhLXRpY2tldC1zaW1wbGU6YmVmb3Jle2NvbnRlbnQ6IlxmM2ZmIn0uZmEtYnVpbGRpbmc6YmVmb3Jle2NvbnRlbnQ6IlxmMWFkIn0uZmEtYW5nbGUtZG91YmxlLWxlZnQ6YmVmb3JlLC5mYS1hbmdsZXMtbGVmdDpiZWZvcmV7Y29udGVudDoiXGYxMDAifS5mYS1xcmNvZGU6YmVmb3Jle2NvbnRlbnQ6IlxmMDI5In0uZmEtY2xvY2stcm90YXRlLWxlZnQ6YmVmb3JlLC5mYS1oaXN0b3J5OmJlZm9yZXtjb250ZW50OiJcZjFkYSJ9LmZhLWZhY2UtZ3Jpbi1iZWFtLXN3ZWF0OmJlZm9yZSwuZmEtZ3Jpbi1iZWFtLXN3ZWF0OmJlZm9yZXtjb250ZW50OiJcZjU4MyJ9LmZhLWFycm93LXJpZ2h0LWZyb20tZmlsZTpiZWZvcmUsLmZhLWZpbGUtZXhwb3J0OmJlZm9yZXtjb250ZW50OiJcZjU2ZSJ9LmZhLXNoaWVsZC1ibGFuazpiZWZvcmUsLmZhLXNoaWVsZDpiZWZvcmV7Y29udGVudDoiXGYxMzIifS5mYS1hcnJvdy11cC1zaG9ydC13aWRlOmJlZm9yZSwuZmEtc29ydC1hbW91bnQtdXAtYWx0OmJlZm9yZXtjb250ZW50OiJcZjg4NSJ9LmZhLWhvdXNlLW1lZGljYWw6YmVmb3Jle2NvbnRlbnQ6IlxlM2IyIn0uZmEtZ29sZi1iYWxsLXRlZTpiZWZvcmUsLmZhLWdvbGYtYmFsbDpiZWZvcmV7Y29udGVudDoiXGY0NTAifS5mYS1jaGV2cm9uLWNpcmNsZS1sZWZ0OmJlZm9yZSwuZmEtY2lyY2xlLWNoZXZyb24tbGVmdDpiZWZvcmV7Y29udGVudDoiXGYxMzcifS5mYS1ob3VzZS1jaGltbmV5LXdpbmRvdzpiZWZvcmV7Y29udGVudDoiXGUwMGQifS5mYS1wZW4tbmliOmJlZm9yZXtjb250ZW50OiJcZjVhZCJ9LmZhLXRlbnQtYXJyb3ctdHVybi1sZWZ0OmJlZm9yZXtjb250ZW50OiJcZTU4MCJ9LmZhLXRlbnRzOmJlZm9yZXtjb250ZW50OiJcZTU4MiJ9LmZhLW1hZ2ljOmJlZm9yZSwuZmEtd2FuZC1tYWdpYzpiZWZvcmV7Y29udGVudDoiXGYwZDAifS5mYS1kb2c6YmVmb3Jle2NvbnRlbnQ6IlxmNmQzIn0uZmEtY2Fycm90OmJlZm9yZXtjb250ZW50OiJcZjc4NyJ9LmZhLW1vb246YmVmb3Jle2NvbnRlbnQ6IlxmMTg2In0uZmEtd2luZS1nbGFzcy1hbHQ6YmVmb3JlLC5mYS13aW5lLWdsYXNzLWVtcHR5OmJlZm9yZXtjb250ZW50OiJcZjVjZSJ9LmZhLWNoZWVzZTpiZWZvcmV7Y29udGVudDoiXGY3ZWYifS5mYS15aW4teWFuZzpiZWZvcmV7Y29udGVudDoiXGY2YWQifS5mYS1tdXNpYzpiZWZvcmV7Y29udGVudDoiXGYwMDEifS5mYS1jb2RlLWNvbW1pdDpiZWZvcmV7Y29udGVudDoiXGYzODYifS5mYS10ZW1wZXJhdHVyZS1sb3c6YmVmb3Jle2NvbnRlbnQ6IlxmNzZiIn0uZmEtYmlraW5nOmJlZm9yZSwuZmEtcGVyc29uLWJpa2luZzpiZWZvcmV7Y29udGVudDoiXGY4NGEifS5mYS1icm9vbTpiZWZvcmV7Y29udGVudDoiXGY1MWEifS5mYS1zaGllbGQtaGVhcnQ6YmVmb3Jle2NvbnRlbnQ6IlxlNTc0In0uZmEtZ29wdXJhbTpiZWZvcmV7Y29udGVudDoiXGY2NjQifS5mYS1lYXJ0aC1vY2VhbmlhOmJlZm9yZSwuZmEtZ2xvYmUtb2NlYW5pYTpiZWZvcmV7Y29udGVudDoiXGU0N2IifS5mYS1zcXVhcmUteG1hcms6YmVmb3JlLC5mYS10aW1lcy1zcXVhcmU6YmVmb3JlLC5mYS14bWFyay1zcXVhcmU6YmVmb3Jle2NvbnRlbnQ6IlxmMmQzIn0uZmEtaGFzaHRhZzpiZWZvcmV7Y29udGVudDoiXDIzIn0uZmEtZXhwYW5kLWFsdDpiZWZvcmUsLmZhLXVwLXJpZ2h0LWFuZC1kb3duLWxlZnQtZnJvbS1jZW50ZXI6YmVmb3Jle2NvbnRlbnQ6IlxmNDI0In0uZmEtb2lsLWNhbjpiZWZvcmV7Y29udGVudDoiXGY2MTMifS5mYS10OmJlZm9yZXtjb250ZW50OiJcNTQifS5mYS1oaXBwbzpiZWZvcmV7Y29udGVudDoiXGY2ZWQifS5mYS1jaGFydC1jb2x1bW46YmVmb3Jle2NvbnRlbnQ6IlxlMGUzIn0uZmEtaW5maW5pdHk6YmVmb3Jle2NvbnRlbnQ6IlxmNTM0In0uZmEtdmlhbC1jaXJjbGUtY2hlY2s6YmVmb3Jle2NvbnRlbnQ6IlxlNTk2In0uZmEtcGVyc29uLWFycm93LWRvd24tdG8tbGluZTpiZWZvcmV7Y29udGVudDoiXGU1MzgifS5mYS12b2ljZW1haWw6YmVmb3Jle2NvbnRlbnQ6IlxmODk3In0uZmEtZmFuOmJlZm9yZXtjb250ZW50OiJcZjg2MyJ9LmZhLXBlcnNvbi13YWxraW5nLWx1Z2dhZ2U6YmVmb3Jle2NvbnRlbnQ6IlxlNTU0In0uZmEtYXJyb3dzLWFsdC12OmJlZm9yZSwuZmEtdXAtZG93bjpiZWZvcmV7Y29udGVudDoiXGYzMzgifS5mYS1jbG91ZC1tb29uLXJhaW46YmVmb3Jle2NvbnRlbnQ6IlxmNzNjIn0uZmEtY2FsZW5kYXI6YmVmb3Jle2NvbnRlbnQ6IlxmMTMzIn0uZmEtdHJhaWxlcjpiZWZvcmV7Y29udGVudDoiXGUwNDEifS5mYS1iYWhhaTpiZWZvcmUsLmZhLWhheWthbDpiZWZvcmV7Y29udGVudDoiXGY2NjYifS5mYS1zZC1jYXJkOmJlZm9yZXtjb250ZW50OiJcZjdjMiJ9LmZhLWRyYWdvbjpiZWZvcmV7Y29udGVudDoiXGY2ZDUifS5mYS1zaG9lLXByaW50czpiZWZvcmV7Y29udGVudDoiXGY1NGIifS5mYS1jaXJjbGUtcGx1czpiZWZvcmUsLmZhLXBsdXMtY2lyY2xlOmJlZm9yZXtjb250ZW50OiJcZjA1NSJ9LmZhLWZhY2UtZ3Jpbi10b25ndWUtd2luazpiZWZvcmUsLmZhLWdyaW4tdG9uZ3VlLXdpbms6YmVmb3Jle2NvbnRlbnQ6IlxmNThiIn0uZmEtaGFuZC1ob2xkaW5nOmJlZm9yZXtjb250ZW50OiJcZjRiZCJ9LmZhLXBsdWctY2lyY2xlLWV4Y2xhbWF0aW9uOmJlZm9yZXtjb250ZW50OiJcZTU1ZCJ9LmZhLWNoYWluLWJyb2tlbjpiZWZvcmUsLmZhLWNoYWluLXNsYXNoOmJlZm9yZSwuZmEtbGluay1zbGFzaDpiZWZvcmUsLmZhLXVubGluazpiZWZvcmV7Y29udGVudDoiXGYxMjcifS5mYS1jbG9uZTpiZWZvcmV7Y29udGVudDoiXGYyNGQifS5mYS1wZXJzb24td2Fsa2luZy1hcnJvdy1sb29wLWxlZnQ6YmVmb3Jle2NvbnRlbnQ6IlxlNTUxIn0uZmEtYXJyb3ctdXAtei1hOmJlZm9yZSwuZmEtc29ydC1hbHBoYS11cC1hbHQ6YmVmb3Jle2NvbnRlbnQ6IlxmODgyIn0uZmEtZmlyZS1hbHQ6YmVmb3JlLC5mYS1maXJlLWZsYW1lLWN1cnZlZDpiZWZvcmV7Y29udGVudDoiXGY3ZTQifS5mYS10b3JuYWRvOmJlZm9yZXtjb250ZW50OiJcZjc2ZiJ9LmZhLWZpbGUtY2lyY2xlLXBsdXM6YmVmb3Jle2NvbnRlbnQ6IlxlNDk0In0uZmEtYm9vay1xdXJhbjpiZWZvcmUsLmZhLXF1cmFuOmJlZm9yZXtjb250ZW50OiJcZjY4NyJ9LmZhLWFuY2hvcjpiZWZvcmV7Y29udGVudDoiXGYxM2QifS5mYS1ib3JkZXItYWxsOmJlZm9yZXtjb250ZW50OiJcZjg0YyJ9LmZhLWFuZ3J5OmJlZm9yZSwuZmEtZmFjZS1hbmdyeTpiZWZvcmV7Y29udGVudDoiXGY1NTYifS5mYS1jb29raWUtYml0ZTpiZWZvcmV7Y29udGVudDoiXGY1NjQifS5mYS1hcnJvdy10cmVuZC1kb3duOmJlZm9yZXtjb250ZW50OiJcZTA5NyJ9LmZhLWZlZWQ6YmVmb3JlLC5mYS1yc3M6YmVmb3Jle2NvbnRlbnQ6IlxmMDllIn0uZmEtZHJhdy1wb2x5Z29uOmJlZm9yZXtjb250ZW50OiJcZjVlZSJ9LmZhLWJhbGFuY2Utc2NhbGU6YmVmb3JlLC5mYS1zY2FsZS1iYWxhbmNlZDpiZWZvcmV7Y29udGVudDoiXGYyNGUifS5mYS1nYXVnZS1zaW1wbGUtaGlnaDpiZWZvcmUsLmZhLXRhY2hvbWV0ZXItZmFzdDpiZWZvcmUsLmZhLXRhY2hvbWV0ZXI6YmVmb3Jle2NvbnRlbnQ6IlxmNjJhIn0uZmEtc2hvd2VyOmJlZm9yZXtjb250ZW50OiJcZjJjYyJ9LmZhLWRlc2t0b3AtYWx0OmJlZm9yZSwuZmEtZGVza3RvcDpiZWZvcmV7Y29udGVudDoiXGYzOTAifS5mYS1tOmJlZm9yZXtjb250ZW50OiJcNGQifS5mYS10YWJsZS1saXN0OmJlZm9yZSwuZmEtdGgtbGlzdDpiZWZvcmV7Y29udGVudDoiXGYwMGIifS5mYS1jb21tZW50LXNtczpiZWZvcmUsLmZhLXNtczpiZWZvcmV7Y29udGVudDoiXGY3Y2QifS5mYS1ib29rOmJlZm9yZXtjb250ZW50OiJcZjAyZCJ9LmZhLXVzZXItcGx1czpiZWZvcmV7Y29udGVudDoiXGYyMzQifS5mYS1jaGVjazpiZWZvcmV7Y29udGVudDoiXGYwMGMifS5mYS1iYXR0ZXJ5LTQ6YmVmb3JlLC5mYS1iYXR0ZXJ5LXRocmVlLXF1YXJ0ZXJzOmJlZm9yZXtjb250ZW50OiJcZjI0MSJ9LmZhLWhvdXNlLWNpcmNsZS1jaGVjazpiZWZvcmV7Y29udGVudDoiXGU1MDkifS5mYS1hbmdsZS1sZWZ0OmJlZm9yZXtjb250ZW50OiJcZjEwNCJ9LmZhLWRpYWdyYW0tc3VjY2Vzc29yOmJlZm9yZXtjb250ZW50OiJcZTQ3YSJ9LmZhLXRydWNrLWFycm93LXJpZ2h0OmJlZm9yZXtjb250ZW50OiJcZTU4YiJ9LmZhLWFycm93cy1zcGxpdC11cC1hbmQtbGVmdDpiZWZvcmV7Y29udGVudDoiXGU0YmMifS5mYS1maXN0LXJhaXNlZDpiZWZvcmUsLmZhLWhhbmQtZmlzdDpiZWZvcmV7Y29udGVudDoiXGY2ZGUifS5mYS1jbG91ZC1tb29uOmJlZm9yZXtjb250ZW50OiJcZjZjMyJ9LmZhLWJyaWVmY2FzZTpiZWZvcmV7Y29udGVudDoiXGYwYjEifS5mYS1wZXJzb24tZmFsbGluZzpiZWZvcmV7Y29udGVudDoiXGU1NDYifS5mYS1pbWFnZS1wb3J0cmFpdDpiZWZvcmUsLmZhLXBvcnRyYWl0OmJlZm9yZXtjb250ZW50OiJcZjNlMCJ9LmZhLXVzZXItdGFnOmJlZm9yZXtjb250ZW50OiJcZjUwNyJ9LmZhLXJ1ZzpiZWZvcmV7Y29udGVudDoiXGU1NjkifS5mYS1lYXJ0aC1ldXJvcGU6YmVmb3JlLC5mYS1nbG9iZS1ldXJvcGU6YmVmb3Jle2NvbnRlbnQ6IlxmN2EyIn0uZmEtY2FydC1mbGF0YmVkLXN1aXRjYXNlOmJlZm9yZSwuZmEtbHVnZ2FnZS1jYXJ0OmJlZm9yZXtjb250ZW50OiJcZjU5ZCJ9LmZhLXJlY3RhbmdsZS10aW1lczpiZWZvcmUsLmZhLXJlY3RhbmdsZS14bWFyazpiZWZvcmUsLmZhLXRpbWVzLXJlY3RhbmdsZTpiZWZvcmUsLmZhLXdpbmRvdy1jbG9zZTpiZWZvcmV7Y29udGVudDoiXGY0MTAifS5mYS1iYWh0LXNpZ246YmVmb3Jle2NvbnRlbnQ6IlxlMGFjIn0uZmEtYm9vay1vcGVuOmJlZm9yZXtjb250ZW50OiJcZjUxOCJ9LmZhLWJvb2stam91cm5hbC13aGlsbHM6YmVmb3JlLC5mYS1qb3VybmFsLXdoaWxsczpiZWZvcmV7Y29udGVudDoiXGY2NmEifS5mYS1oYW5kY3VmZnM6YmVmb3Jle2NvbnRlbnQ6IlxlNGY4In0uZmEtZXhjbGFtYXRpb24tdHJpYW5nbGU6YmVmb3JlLC5mYS10cmlhbmdsZS1leGNsYW1hdGlvbjpiZWZvcmUsLmZhLXdhcm5pbmc6YmVmb3Jle2NvbnRlbnQ6IlxmMDcxIn0uZmEtZGF0YWJhc2U6YmVmb3Jle2NvbnRlbnQ6IlxmMWMwIn0uZmEtYXJyb3ctdHVybi1yaWdodDpiZWZvcmUsLmZhLW1haWwtZm9yd2FyZDpiZWZvcmUsLmZhLXNoYXJlOmJlZm9yZXtjb250ZW50OiJcZjA2NCJ9LmZhLWJvdHRsZS1kcm9wbGV0OmJlZm9yZXtjb250ZW50OiJcZTRjNCJ9LmZhLW1hc2stZmFjZTpiZWZvcmV7Y29udGVudDoiXGUxZDcifS5mYS1oaWxsLXJvY2tzbGlkZTpiZWZvcmV7Y29udGVudDoiXGU1MDgifS5mYS1leGNoYW5nZS1hbHQ6YmVmb3JlLC5mYS1yaWdodC1sZWZ0OmJlZm9yZXtjb250ZW50OiJcZjM2MiJ9LmZhLXBhcGVyLXBsYW5lOmJlZm9yZXtjb250ZW50OiJcZjFkOCJ9LmZhLXJvYWQtY2lyY2xlLWV4Y2xhbWF0aW9uOmJlZm9yZXtjb250ZW50OiJcZTU2NSJ9LmZhLWR1bmdlb246YmVmb3Jle2NvbnRlbnQ6IlxmNmQ5In0uZmEtYWxpZ24tcmlnaHQ6YmVmb3Jle2NvbnRlbnQ6IlxmMDM4In0uZmEtbW9uZXktYmlsbC0xLXdhdmU6YmVmb3JlLC5mYS1tb25leS1iaWxsLXdhdmUtYWx0OmJlZm9yZXtjb250ZW50OiJcZjUzYiJ9LmZhLWxpZmUtcmluZzpiZWZvcmV7Y29udGVudDoiXGYxY2QifS5mYS1oYW5kczpiZWZvcmUsLmZhLXNpZ24tbGFuZ3VhZ2U6YmVmb3JlLC5mYS1zaWduaW5nOmJlZm9yZXtjb250ZW50OiJcZjJhNyJ9LmZhLWNhbGVuZGFyLWRheTpiZWZvcmV7Y29udGVudDoiXGY3ODMifS5mYS1sYWRkZXItd2F0ZXI6YmVmb3JlLC5mYS1zd2ltbWluZy1wb29sOmJlZm9yZSwuZmEtd2F0ZXItbGFkZGVyOmJlZm9yZXtjb250ZW50OiJcZjVjNSJ9LmZhLWFycm93cy11cC1kb3duOmJlZm9yZSwuZmEtYXJyb3dzLXY6YmVmb3Jle2NvbnRlbnQ6IlxmMDdkIn0uZmEtZmFjZS1ncmltYWNlOmJlZm9yZSwuZmEtZ3JpbWFjZTpiZWZvcmV7Y29udGVudDoiXGY1N2YifS5mYS13aGVlbGNoYWlyLWFsdDpiZWZvcmUsLmZhLXdoZWVsY2hhaXItbW92ZTpiZWZvcmV7Y29udGVudDoiXGUyY2UifS5mYS1sZXZlbC1kb3duLWFsdDpiZWZvcmUsLmZhLXR1cm4tZG93bjpiZWZvcmV7Y29udGVudDoiXGYzYmUifS5mYS1wZXJzb24td2Fsa2luZy1hcnJvdy1yaWdodDpiZWZvcmV7Y29udGVudDoiXGU1NTIifS5mYS1lbnZlbG9wZS1zcXVhcmU6YmVmb3JlLC5mYS1zcXVhcmUtZW52ZWxvcGU6YmVmb3Jle2NvbnRlbnQ6IlxmMTk5In0uZmEtZGljZTpiZWZvcmV7Y29udGVudDoiXGY1MjIifS5mYS1ib3dsaW5nLWJhbGw6YmVmb3Jle2NvbnRlbnQ6IlxmNDM2In0uZmEtYnJhaW46YmVmb3Jle2NvbnRlbnQ6IlxmNWRjIn0uZmEtYmFuZC1haWQ6YmVmb3JlLC5mYS1iYW5kYWdlOmJlZm9yZXtjb250ZW50OiJcZjQ2MiJ9LmZhLWNhbGVuZGFyLW1pbnVzOmJlZm9yZXtjb250ZW50OiJcZjI3MiJ9LmZhLWNpcmNsZS14bWFyazpiZWZvcmUsLmZhLXRpbWVzLWNpcmNsZTpiZWZvcmUsLmZhLXhtYXJrLWNpcmNsZTpiZWZvcmV7Y29udGVudDoiXGYwNTcifS5mYS1naWZ0czpiZWZvcmV7Y29udGVudDoiXGY3OWMifS5mYS1ob3RlbDpiZWZvcmV7Y29udGVudDoiXGY1OTQifS5mYS1lYXJ0aC1hc2lhOmJlZm9yZSwuZmEtZ2xvYmUtYXNpYTpiZWZvcmV7Y29udGVudDoiXGY1N2UifS5mYS1pZC1jYXJkLWFsdDpiZWZvcmUsLmZhLWlkLWNhcmQtY2xpcDpiZWZvcmV7Y29udGVudDoiXGY0N2YifS5mYS1tYWduaWZ5aW5nLWdsYXNzLXBsdXM6YmVmb3JlLC5mYS1zZWFyY2gtcGx1czpiZWZvcmV7Y29udGVudDoiXGYwMGUifS5mYS10aHVtYnMtdXA6YmVmb3Jle2NvbnRlbnQ6IlxmMTY0In0uZmEtdXNlci1jbG9jazpiZWZvcmV7Y29udGVudDoiXGY0ZmQifS5mYS1hbGxlcmdpZXM6YmVmb3JlLC5mYS1oYW5kLWRvdHM6YmVmb3Jle2NvbnRlbnQ6IlxmNDYxIn0uZmEtZmlsZS1pbnZvaWNlOmJlZm9yZXtjb250ZW50OiJcZjU3MCJ9LmZhLXdpbmRvdy1taW5pbWl6ZTpiZWZvcmV7Y29udGVudDoiXGYyZDEifS5mYS1jb2ZmZWU6YmVmb3JlLC5mYS1tdWctc2F1Y2VyOmJlZm9yZXtjb250ZW50OiJcZjBmNCJ9LmZhLWJydXNoOmJlZm9yZXtjb250ZW50OiJcZjU1ZCJ9LmZhLW1hc2s6YmVmb3Jle2NvbnRlbnQ6IlxmNmZhIn0uZmEtbWFnbmlmeWluZy1nbGFzcy1taW51czpiZWZvcmUsLmZhLXNlYXJjaC1taW51czpiZWZvcmV7Y29udGVudDoiXGYwMTAifS5mYS1ydWxlci12ZXJ0aWNhbDpiZWZvcmV7Y29udGVudDoiXGY1NDgifS5mYS11c2VyLWFsdDpiZWZvcmUsLmZhLXVzZXItbGFyZ2U6YmVmb3Jle2NvbnRlbnQ6IlxmNDA2In0uZmEtdHJhaW4tdHJhbTpiZWZvcmV7Y29udGVudDoiXGU1YjQifS5mYS11c2VyLW51cnNlOmJlZm9yZXtjb250ZW50OiJcZjgyZiJ9LmZhLXN5cmluZ2U6YmVmb3Jle2NvbnRlbnQ6IlxmNDhlIn0uZmEtY2xvdWQtc3VuOmJlZm9yZXtjb250ZW50OiJcZjZjNCJ9LmZhLXN0b3B3YXRjaC0yMDpiZWZvcmV7Y29udGVudDoiXGUwNmYifS5mYS1zcXVhcmUtZnVsbDpiZWZvcmV7Y29udGVudDoiXGY0NWMifS5mYS1tYWduZXQ6YmVmb3Jle2NvbnRlbnQ6IlxmMDc2In0uZmEtamFyOmJlZm9yZXtjb250ZW50OiJcZTUxNiJ9LmZhLW5vdGUtc3RpY2t5OmJlZm9yZSwuZmEtc3RpY2t5LW5vdGU6YmVmb3Jle2NvbnRlbnQ6IlxmMjQ5In0uZmEtYnVnLXNsYXNoOmJlZm9yZXtjb250ZW50OiJcZTQ5MCJ9LmZhLWFycm93LXVwLWZyb20td2F0ZXItcHVtcDpiZWZvcmV7Y29udGVudDoiXGU0YjYifS5mYS1ib25lOmJlZm9yZXtjb250ZW50OiJcZjVkNyJ9LmZhLXVzZXItaW5qdXJlZDpiZWZvcmV7Y29udGVudDoiXGY3MjgifS5mYS1mYWNlLXNhZC10ZWFyOmJlZm9yZSwuZmEtc2FkLXRlYXI6YmVmb3Jle2NvbnRlbnQ6IlxmNWI0In0uZmEtcGxhbmU6YmVmb3Jle2NvbnRlbnQ6IlxmMDcyIn0uZmEtdGVudC1hcnJvd3MtZG93bjpiZWZvcmV7Y29udGVudDoiXGU1ODEifS5mYS1leGNsYW1hdGlvbjpiZWZvcmV7Y29udGVudDoiXDIxIn0uZmEtYXJyb3dzLXNwaW46YmVmb3Jle2NvbnRlbnQ6IlxlNGJiIn0uZmEtcHJpbnQ6YmVmb3Jle2NvbnRlbnQ6IlxmMDJmIn0uZmEtdHJ5OmJlZm9yZSwuZmEtdHVya2lzaC1saXJhLXNpZ246YmVmb3JlLC5mYS10dXJraXNoLWxpcmE6YmVmb3Jle2NvbnRlbnQ6IlxlMmJiIn0uZmEtZG9sbGFyLXNpZ246YmVmb3JlLC5mYS1kb2xsYXI6YmVmb3JlLC5mYS11c2Q6YmVmb3Jle2NvbnRlbnQ6IlwyNCJ9LmZhLXg6YmVmb3Jle2NvbnRlbnQ6Ilw1OCJ9LmZhLW1hZ25pZnlpbmctZ2xhc3MtZG9sbGFyOmJlZm9yZSwuZmEtc2VhcmNoLWRvbGxhcjpiZWZvcmV7Y29udGVudDoiXGY2ODgifS5mYS11c2Vycy1jb2c6YmVmb3JlLC5mYS11c2Vycy1nZWFyOmJlZm9yZXtjb250ZW50OiJcZjUwOSJ9LmZhLXBlcnNvbi1taWxpdGFyeS1wb2ludGluZzpiZWZvcmV7Y29udGVudDoiXGU1NGEifS5mYS1iYW5rOmJlZm9yZSwuZmEtYnVpbGRpbmctY29sdW1uczpiZWZvcmUsLmZhLWluc3RpdHV0aW9uOmJlZm9yZSwuZmEtbXVzZXVtOmJlZm9yZSwuZmEtdW5pdmVyc2l0eTpiZWZvcmV7Y29udGVudDoiXGYxOWMifS5mYS11bWJyZWxsYTpiZWZvcmV7Y29udGVudDoiXGYwZTkifS5mYS10cm93ZWw6YmVmb3Jle2NvbnRlbnQ6IlxlNTg5In0uZmEtZDpiZWZvcmV7Y29udGVudDoiXDQ0In0uZmEtc3RhcGxlcjpiZWZvcmV7Y29udGVudDoiXGU1YWYifS5mYS1tYXNrcy10aGVhdGVyOmJlZm9yZSwuZmEtdGhlYXRlci1tYXNrczpiZWZvcmV7Y29udGVudDoiXGY2MzAifS5mYS1raXAtc2lnbjpiZWZvcmV7Y29udGVudDoiXGUxYzQifS5mYS1oYW5kLXBvaW50LWxlZnQ6YmVmb3Jle2NvbnRlbnQ6IlxmMGE1In0uZmEtaGFuZHNoYWtlLWFsdDpiZWZvcmUsLmZhLWhhbmRzaGFrZS1zaW1wbGU6YmVmb3Jle2NvbnRlbnQ6IlxmNGM2In0uZmEtZmlnaHRlci1qZXQ6YmVmb3JlLC5mYS1qZXQtZmlnaHRlcjpiZWZvcmV7Y29udGVudDoiXGYwZmIifS5mYS1zaGFyZS1hbHQtc3F1YXJlOmJlZm9yZSwuZmEtc3F1YXJlLXNoYXJlLW5vZGVzOmJlZm9yZXtjb250ZW50OiJcZjFlMSJ9LmZhLWJhcmNvZGU6YmVmb3Jle2NvbnRlbnQ6IlxmMDJhIn0uZmEtcGx1cy1taW51czpiZWZvcmV7Y29udGVudDoiXGU0M2MifS5mYS12aWRlby1jYW1lcmE6YmVmb3JlLC5mYS12aWRlbzpiZWZvcmV7Y29udGVudDoiXGYwM2QifS5mYS1ncmFkdWF0aW9uLWNhcDpiZWZvcmUsLmZhLW1vcnRhci1ib2FyZDpiZWZvcmV7Y29udGVudDoiXGYxOWQifS5mYS1oYW5kLWhvbGRpbmctbWVkaWNhbDpiZWZvcmV7Y29udGVudDoiXGUwNWMifS5mYS1wZXJzb24tY2lyY2xlLWNoZWNrOmJlZm9yZXtjb250ZW50OiJcZTUzZSJ9LmZhLWxldmVsLXVwLWFsdDpiZWZvcmUsLmZhLXR1cm4tdXA6YmVmb3Jle2NvbnRlbnQ6IlxmM2JmIn0KLmZhLXNyLW9ubHksLmZhLXNyLW9ubHktZm9jdXNhYmxlOm5vdCg6Zm9jdXMpLC5zci1vbmx5LC5zci1vbmx5LWZvY3VzYWJsZTpub3QoOmZvY3VzKXtwb3NpdGlvbjphYnNvbHV0ZTt3aWR0aDoxcHg7aGVpZ2h0OjFweDtwYWRkaW5nOjA7bWFyZ2luOi0xcHg7b3ZlcmZsb3c6aGlkZGVuO2NsaXA6cmVjdCgwLDAsMCwwKTt3aGl0ZS1zcGFjZTpub3dyYXA7Ym9yZGVyLXdpZHRoOjB9Omhvc3QsOnJvb3R7LS1mYS1zdHlsZS1mYW1pbHktYnJhbmRzOiJGb250IEF3ZXNvbWUgNiBCcmFuZHMiOy0tZmEtZm9udC1icmFuZHM6bm9ybWFsIDQwMCAxZW0vMSAiRm9udCBBd2Vzb21lIDYgQnJhbmRzIn1AZm9udC1mYWNle2ZvbnQtZmFtaWx5OiJGb250IEF3ZXNvbWUgNiBCcmFuZHMiO2ZvbnQtc3R5bGU6bm9ybWFsO2ZvbnQtd2VpZ2h0OjQwMDtmb250LWRpc3BsYXk6YmxvY2s7c3JjOnVybCguLi93ZWJmb250cy9mYS1icmFuZHMtNDAwLndvZmYyKSBmb3JtYXQoIndvZmYyIiksdXJsKC4uL3dlYmZvbnRzL2ZhLWJyYW5kcy00MDAudHRmKSBmb3JtYXQoInRydWV0eXBlIil9LmZhLWJyYW5kcywuZmFie2ZvbnQtd2VpZ2h0OjQwMH0uZmEtbW9uZXJvOmJlZm9yZXtjb250ZW50OiJcZjNkMCJ9LmZhLWhvb2xpOmJlZm9yZXtjb250ZW50OiJcZjQyNyJ9LmZhLXllbHA6YmVmb3Jle2NvbnRlbnQ6IlxmMWU5In0uZmEtY2MtdmlzYTpiZWZvcmV7Y29udGVudDoiXGYxZjAifS5mYS1sYXN0Zm06YmVmb3Jle2NvbnRlbnQ6IlxmMjAyIn0uZmEtc2hvcHdhcmU6YmVmb3Jle2NvbnRlbnQ6IlxmNWI1In0uZmEtY3JlYXRpdmUtY29tbW9ucy1uYzpiZWZvcmV7Y29udGVudDoiXGY0ZTgifS5mYS1hd3M6YmVmb3Jle2NvbnRlbnQ6IlxmMzc1In0uZmEtcmVkaGF0OmJlZm9yZXtjb250ZW50OiJcZjdiYyJ9LmZhLXlvYXN0OmJlZm9yZXtjb250ZW50OiJcZjJiMSJ9LmZhLWNsb3VkZmxhcmU6YmVmb3Jle2NvbnRlbnQ6IlxlMDdkIn0uZmEtdXBzOmJlZm9yZXtjb250ZW50OiJcZjdlMCJ9LmZhLXdwZXhwbG9yZXI6YmVmb3Jle2NvbnRlbnQ6IlxmMmRlIn0uZmEtZHlhbG9nOmJlZm9yZXtjb250ZW50OiJcZjM5OSJ9LmZhLWJpdHk6YmVmb3Jle2NvbnRlbnQ6IlxmMzdhIn0uZmEtc3RhY2twYXRoOmJlZm9yZXtjb250ZW50OiJcZjg0MiJ9LmZhLWJ1eXNlbGxhZHM6YmVmb3Jle2NvbnRlbnQ6IlxmMjBkIn0uZmEtZmlyc3Qtb3JkZXI6YmVmb3Jle2NvbnRlbnQ6IlxmMmIwIn0uZmEtbW9keDpiZWZvcmV7Y29udGVudDoiXGYyODUifS5mYS1ndWlsZGVkOmJlZm9yZXtjb250ZW50OiJcZTA3ZSJ9LmZhLXZudjpiZWZvcmV7Y29udGVudDoiXGY0MGIifS5mYS1qcy1zcXVhcmU6YmVmb3JlLC5mYS1zcXVhcmUtanM6YmVmb3Jle2NvbnRlbnQ6IlxmM2I5In0uZmEtbWljcm9zb2Z0OmJlZm9yZXtjb250ZW50OiJcZjNjYSJ9LmZhLXFxOmJlZm9yZXtjb250ZW50OiJcZjFkNiJ9LmZhLW9yY2lkOmJlZm9yZXtjb250ZW50OiJcZjhkMiJ9LmZhLWphdmE6YmVmb3Jle2NvbnRlbnQ6IlxmNGU0In0uZmEtaW52aXNpb246YmVmb3Jle2NvbnRlbnQ6IlxmN2IwIn0uZmEtY3JlYXRpdmUtY29tbW9ucy1wZC1hbHQ6YmVmb3Jle2NvbnRlbnQ6IlxmNGVkIn0uZmEtY2VudGVyY29kZTpiZWZvcmV7Y29udGVudDoiXGYzODAifS5mYS1nbGlkZS1nOmJlZm9yZXtjb250ZW50OiJcZjJhNiJ9LmZhLWRydXBhbDpiZWZvcmV7Y29udGVudDoiXGYxYTkifS5mYS1oaXJlLWEtaGVscGVyOmJlZm9yZXtjb250ZW50OiJcZjNiMCJ9LmZhLWNyZWF0aXZlLWNvbW1vbnMtYnk6YmVmb3Jle2NvbnRlbnQ6IlxmNGU3In0uZmEtdW5pdHk6YmVmb3Jle2NvbnRlbnQ6IlxlMDQ5In0uZmEtd2htY3M6YmVmb3Jle2NvbnRlbnQ6IlxmNDBkIn0uZmEtcm9ja2V0Y2hhdDpiZWZvcmV7Y29udGVudDoiXGYzZTgifS5mYS12azpiZWZvcmV7Y29udGVudDoiXGYxODkifS5mYS11bnRhcHBkOmJlZm9yZXtjb250ZW50OiJcZjQwNSJ9LmZhLW1haWxjaGltcDpiZWZvcmV7Y29udGVudDoiXGY1OWUifS5mYS1jc3MzLWFsdDpiZWZvcmV7Y29udGVudDoiXGYzOGIifS5mYS1yZWRkaXQtc3F1YXJlOmJlZm9yZSwuZmEtc3F1YXJlLXJlZGRpdDpiZWZvcmV7Y29udGVudDoiXGYxYTIifS5mYS12aW1lby12OmJlZm9yZXtjb250ZW50OiJcZjI3ZCJ9LmZhLWNvbnRhbzpiZWZvcmV7Y29udGVudDoiXGYyNmQifS5mYS1zcXVhcmUtZm9udC1hd2Vzb21lOmJlZm9yZXtjb250ZW50OiJcZTVhZCJ9LmZhLWRlc2twcm86YmVmb3Jle2NvbnRlbnQ6IlxmMzhmIn0uZmEtc2lzdHJpeDpiZWZvcmV7Y29udGVudDoiXGYzZWUifS5mYS1pbnN0YWdyYW0tc3F1YXJlOmJlZm9yZSwuZmEtc3F1YXJlLWluc3RhZ3JhbTpiZWZvcmV7Y29udGVudDoiXGUwNTUifS5mYS1iYXR0bGUtbmV0OmJlZm9yZXtjb250ZW50OiJcZjgzNSJ9LmZhLXRoZS1yZWQteWV0aTpiZWZvcmV7Y29udGVudDoiXGY2OWQifS5mYS1oYWNrZXItbmV3cy1zcXVhcmU6YmVmb3JlLC5mYS1zcXVhcmUtaGFja2VyLW5ld3M6YmVmb3Jle2NvbnRlbnQ6IlxmM2FmIn0uZmEtZWRnZTpiZWZvcmV7Y29udGVudDoiXGYyODIifS5mYS1uYXBzdGVyOmJlZm9yZXtjb250ZW50OiJcZjNkMiJ9LmZhLXNuYXBjaGF0LXNxdWFyZTpiZWZvcmUsLmZhLXNxdWFyZS1zbmFwY2hhdDpiZWZvcmV7Y29udGVudDoiXGYyYWQifS5mYS1nb29nbGUtcGx1cy1nOmJlZm9yZXtjb250ZW50OiJcZjBkNSJ9LmZhLWFydHN0YXRpb246YmVmb3Jle2NvbnRlbnQ6IlxmNzdhIn0uZmEtbWFya2Rvd246YmVmb3Jle2NvbnRlbnQ6IlxmNjBmIn0uZmEtc291cmNldHJlZTpiZWZvcmV7Y29udGVudDoiXGY3ZDMifS5mYS1nb29nbGUtcGx1czpiZWZvcmV7Y29udGVudDoiXGYyYjMifS5mYS1kaWFzcG9yYTpiZWZvcmV7Y29udGVudDoiXGY3OTEifS5mYS1mb3Vyc3F1YXJlOmJlZm9yZXtjb250ZW50OiJcZjE4MCJ9LmZhLXN0YWNrLW92ZXJmbG93OmJlZm9yZXtjb250ZW50OiJcZjE2YyJ9LmZhLWdpdGh1Yi1hbHQ6YmVmb3Jle2NvbnRlbnQ6IlxmMTEzIn0uZmEtcGhvZW5peC1zcXVhZHJvbjpiZWZvcmV7Y29udGVudDoiXGY1MTEifS5mYS1wYWdlbGluZXM6YmVmb3Jle2NvbnRlbnQ6IlxmMThjIn0uZmEtYWxnb2xpYTpiZWZvcmV7Y29udGVudDoiXGYzNmMifS5mYS1yZWQtcml2ZXI6YmVmb3Jle2NvbnRlbnQ6IlxmM2UzIn0uZmEtY3JlYXRpdmUtY29tbW9ucy1zYTpiZWZvcmV7Y29udGVudDoiXGY0ZWYifS5mYS1zYWZhcmk6YmVmb3Jle2NvbnRlbnQ6IlxmMjY3In0uZmEtZ29vZ2xlOmJlZm9yZXtjb250ZW50OiJcZjFhMCJ9LmZhLWZvbnQtYXdlc29tZS1hbHQ6YmVmb3JlLC5mYS1zcXVhcmUtZm9udC1hd2Vzb21lLXN0cm9rZTpiZWZvcmV7Y29udGVudDoiXGYzNWMifS5mYS1hdGxhc3NpYW46YmVmb3Jle2NvbnRlbnQ6IlxmNzdiIn0uZmEtbGlua2VkaW4taW46YmVmb3Jle2NvbnRlbnQ6IlxmMGUxIn0uZmEtZGlnaXRhbC1vY2VhbjpiZWZvcmV7Y29udGVudDoiXGYzOTEifS5mYS1uaW1ibHI6YmVmb3Jle2NvbnRlbnQ6IlxmNWE4In0uZmEtY2hyb21lY2FzdDpiZWZvcmV7Y29udGVudDoiXGY4MzgifS5mYS1ldmVybm90ZTpiZWZvcmV7Y29udGVudDoiXGY4MzkifS5mYS1oYWNrZXItbmV3czpiZWZvcmV7Y29udGVudDoiXGYxZDQifS5mYS1jcmVhdGl2ZS1jb21tb25zLXNhbXBsaW5nOmJlZm9yZXtjb250ZW50OiJcZjRmMCJ9LmZhLWFkdmVyc2FsOmJlZm9yZXtjb250ZW50OiJcZjM2YSJ9LmZhLWNyZWF0aXZlLWNvbW1vbnM6YmVmb3Jle2NvbnRlbnQ6IlxmMjVlIn0uZmEtd2F0Y2htYW4tbW9uaXRvcmluZzpiZWZvcmV7Y29udGVudDoiXGUwODcifS5mYS1mb250aWNvbnM6YmVmb3Jle2NvbnRlbnQ6IlxmMjgwIn0uZmEtd2VpeGluOmJlZm9yZXtjb250ZW50OiJcZjFkNyJ9LmZhLXNoaXJ0c2luYnVsazpiZWZvcmV7Y29udGVudDoiXGYyMTQifS5mYS1jb2RlcGVuOmJlZm9yZXtjb250ZW50OiJcZjFjYiJ9LmZhLWdpdC1hbHQ6YmVmb3Jle2NvbnRlbnQ6IlxmODQxIn0uZmEtbHlmdDpiZWZvcmV7Y29udGVudDoiXGYzYzMifS5mYS1yZXY6YmVmb3Jle2NvbnRlbnQ6IlxmNWIyIn0uZmEtd2luZG93czpiZWZvcmV7Y29udGVudDoiXGYxN2EifS5mYS13aXphcmRzLW9mLXRoZS1jb2FzdDpiZWZvcmV7Y29udGVudDoiXGY3MzAifS5mYS1zcXVhcmUtdmlhZGVvOmJlZm9yZSwuZmEtdmlhZGVvLXNxdWFyZTpiZWZvcmV7Y29udGVudDoiXGYyYWEifS5mYS1tZWV0dXA6YmVmb3Jle2NvbnRlbnQ6IlxmMmUwIn0uZmEtY2VudG9zOmJlZm9yZXtjb250ZW50OiJcZjc4OSJ9LmZhLWFkbjpiZWZvcmV7Y29udGVudDoiXGYxNzAifS5mYS1jbG91ZHNtaXRoOmJlZm9yZXtjb250ZW50OiJcZjM4NCJ9LmZhLXBpZWQtcGlwZXItYWx0OmJlZm9yZXtjb250ZW50OiJcZjFhOCJ9LmZhLWRyaWJiYmxlLXNxdWFyZTpiZWZvcmUsLmZhLXNxdWFyZS1kcmliYmJsZTpiZWZvcmV7Y29udGVudDoiXGYzOTcifS5mYS1jb2RpZXBpZTpiZWZvcmV7Y29udGVudDoiXGYyODQifS5mYS1ub2RlOmJlZm9yZXtjb250ZW50OiJcZjQxOSJ9LmZhLW1peDpiZWZvcmV7Y29udGVudDoiXGYzY2IifS5mYS1zdGVhbTpiZWZvcmV7Y29udGVudDoiXGYxYjYifS5mYS1jYy1hcHBsZS1wYXk6YmVmb3Jle2NvbnRlbnQ6IlxmNDE2In0uZmEtc2NyaWJkOmJlZm9yZXtjb250ZW50OiJcZjI4YSJ9LmZhLW9wZW5pZDpiZWZvcmV7Y29udGVudDoiXGYxOWIifS5mYS1pbnN0YWxvZDpiZWZvcmV7Y29udGVudDoiXGUwODEifS5mYS1leHBlZGl0ZWRzc2w6YmVmb3Jle2NvbnRlbnQ6IlxmMjNlIn0uZmEtc2VsbGNhc3Q6YmVmb3Jle2NvbnRlbnQ6IlxmMmRhIn0uZmEtc3F1YXJlLXR3aXR0ZXI6YmVmb3JlLC5mYS10d2l0dGVyLXNxdWFyZTpiZWZvcmV7Y29udGVudDoiXGYwODEifS5mYS1yLXByb2plY3Q6YmVmb3Jle2NvbnRlbnQ6IlxmNGY3In0uZmEtZGVsaWNpb3VzOmJlZm9yZXtjb250ZW50OiJcZjFhNSJ9LmZhLWZyZWVic2Q6YmVmb3Jle2NvbnRlbnQ6IlxmM2E0In0uZmEtdnVlanM6YmVmb3Jle2NvbnRlbnQ6IlxmNDFmIn0uZmEtYWNjdXNvZnQ6YmVmb3Jle2NvbnRlbnQ6IlxmMzY5In0uZmEtaW94aG9zdDpiZWZvcmV7Y29udGVudDoiXGYyMDgifS5mYS1mb250aWNvbnMtZmk6YmVmb3Jle2NvbnRlbnQ6IlxmM2EyIn0uZmEtYXBwLXN0b3JlOmJlZm9yZXtjb250ZW50OiJcZjM2ZiJ9LmZhLWNjLW1hc3RlcmNhcmQ6YmVmb3Jle2NvbnRlbnQ6IlxmMWYxIn0uZmEtaXR1bmVzLW5vdGU6YmVmb3Jle2NvbnRlbnQ6IlxmM2I1In0uZmEtZ29sYW5nOmJlZm9yZXtjb250ZW50OiJcZTQwZiJ9LmZhLWtpY2tzdGFydGVyOmJlZm9yZXtjb250ZW50OiJcZjNiYiJ9LmZhLWdyYXY6YmVmb3Jle2NvbnRlbnQ6IlxmMmQ2In0uZmEtd2VpYm86YmVmb3Jle2NvbnRlbnQ6IlxmMThhIn0uZmEtdW5jaGFydGVkOmJlZm9yZXtjb250ZW50OiJcZTA4NCJ9LmZhLWZpcnN0ZHJhZnQ6YmVmb3Jle2NvbnRlbnQ6IlxmM2ExIn0uZmEtc3F1YXJlLXlvdXR1YmU6YmVmb3JlLC5mYS15b3V0dWJlLXNxdWFyZTpiZWZvcmV7Y29udGVudDoiXGY0MzEifS5mYS13aWtpcGVkaWEtdzpiZWZvcmV7Y29udGVudDoiXGYyNjYifS5mYS1yZW5kYWN0OmJlZm9yZSwuZmEtd3ByZXNzcjpiZWZvcmV7Y29udGVudDoiXGYzZTQifS5mYS1hbmdlbGxpc3Q6YmVmb3Jle2NvbnRlbnQ6IlxmMjA5In0uZmEtZ2FsYWN0aWMtcmVwdWJsaWM6YmVmb3Jle2NvbnRlbnQ6IlxmNTBjIn0uZmEtbmZjLWRpcmVjdGlvbmFsOmJlZm9yZXtjb250ZW50OiJcZTUzMCJ9LmZhLXNreXBlOmJlZm9yZXtjb250ZW50OiJcZjE3ZSJ9LmZhLWpvZ2V0OmJlZm9yZXtjb250ZW50OiJcZjNiNyJ9LmZhLWZlZG9yYTpiZWZvcmV7Y29udGVudDoiXGY3OTgifS5mYS1zdHJpcGUtczpiZWZvcmV7Y29udGVudDoiXGY0MmEifS5mYS1tZXRhOmJlZm9yZXtjb250ZW50OiJcZTQ5YiJ9LmZhLWxhcmF2ZWw6YmVmb3Jle2NvbnRlbnQ6IlxmM2JkIn0uZmEtaG90amFyOmJlZm9yZXtjb250ZW50OiJcZjNiMSJ9LmZhLWJsdWV0b290aC1iOmJlZm9yZXtjb250ZW50OiJcZjI5NCJ9LmZhLXN0aWNrZXItbXVsZTpiZWZvcmV7Y29udGVudDoiXGYzZjcifS5mYS1jcmVhdGl2ZS1jb21tb25zLXplcm86YmVmb3Jle2NvbnRlbnQ6IlxmNGYzIn0uZmEtaGlwczpiZWZvcmV7Y29udGVudDoiXGY0NTIifS5mYS1iZWhhbmNlOmJlZm9yZXtjb250ZW50OiJcZjFiNCJ9LmZhLXJlZGRpdDpiZWZvcmV7Y29udGVudDoiXGYxYTEifS5mYS1kaXNjb3JkOmJlZm9yZXtjb250ZW50OiJcZjM5MiJ9LmZhLWNocm9tZTpiZWZvcmV7Y29udGVudDoiXGYyNjgifS5mYS1hcHAtc3RvcmUtaW9zOmJlZm9yZXtjb250ZW50OiJcZjM3MCJ9LmZhLWNjLWRpc2NvdmVyOmJlZm9yZXtjb250ZW50OiJcZjFmMiJ9LmZhLXdwYmVnaW5uZXI6YmVmb3Jle2NvbnRlbnQ6IlxmMjk3In0uZmEtY29uZmx1ZW5jZTpiZWZvcmV7Y29udGVudDoiXGY3OGQifS5mYS1tZGI6YmVmb3Jle2NvbnRlbnQ6IlxmOGNhIn0uZmEtZG9jaHViOmJlZm9yZXtjb250ZW50OiJcZjM5NCJ9LmZhLWFjY2Vzc2libGUtaWNvbjpiZWZvcmV7Y29udGVudDoiXGYzNjgifS5mYS1lYmF5OmJlZm9yZXtjb250ZW50OiJcZjRmNCJ9LmZhLWFtYXpvbjpiZWZvcmV7Y29udGVudDoiXGYyNzAifS5mYS11bnNwbGFzaDpiZWZvcmV7Y29udGVudDoiXGUwN2MifS5mYS15YXJuOmJlZm9yZXtjb250ZW50OiJcZjdlMyJ9LmZhLXNxdWFyZS1zdGVhbTpiZWZvcmUsLmZhLXN0ZWFtLXNxdWFyZTpiZWZvcmV7Y29udGVudDoiXGYxYjcifS5mYS01MDBweDpiZWZvcmV7Y29udGVudDoiXGYyNmUifS5mYS1zcXVhcmUtdmltZW86YmVmb3JlLC5mYS12aW1lby1zcXVhcmU6YmVmb3Jle2NvbnRlbnQ6IlxmMTk0In0uZmEtYXN5bW1ldHJpazpiZWZvcmV7Y29udGVudDoiXGYzNzIifS5mYS1mb250LWF3ZXNvbWUtZmxhZzpiZWZvcmUsLmZhLWZvbnQtYXdlc29tZS1sb2dvLWZ1bGw6YmVmb3JlLC5mYS1mb250LWF3ZXNvbWU6YmVmb3Jle2NvbnRlbnQ6IlxmMmI0In0uZmEtZ3JhdGlwYXk6YmVmb3Jle2NvbnRlbnQ6IlxmMTg0In0uZmEtYXBwbGU6YmVmb3Jle2NvbnRlbnQ6IlxmMTc5In0uZmEtaGl2ZTpiZWZvcmV7Y29udGVudDoiXGUwN2YifS5mYS1naXRrcmFrZW46YmVmb3Jle2NvbnRlbnQ6IlxmM2E2In0uZmEta2V5YmFzZTpiZWZvcmV7Y29udGVudDoiXGY0ZjUifS5mYS1hcHBsZS1wYXk6YmVmb3Jle2NvbnRlbnQ6IlxmNDE1In0uZmEtcGFkbGV0OmJlZm9yZXtjb250ZW50OiJcZTRhMCJ9LmZhLWFtYXpvbi1wYXk6YmVmb3Jle2NvbnRlbnQ6IlxmNDJjIn0uZmEtZ2l0aHViLXNxdWFyZTpiZWZvcmUsLmZhLXNxdWFyZS1naXRodWI6YmVmb3Jle2NvbnRlbnQ6IlxmMDkyIn0uZmEtc3R1bWJsZXVwb246YmVmb3Jle2NvbnRlbnQ6IlxmMWE0In0uZmEtZmVkZXg6YmVmb3Jle2NvbnRlbnQ6IlxmNzk3In0uZmEtcGhvZW5peC1mcmFtZXdvcms6YmVmb3Jle2NvbnRlbnQ6IlxmM2RjIn0uZmEtc2hvcGlmeTpiZWZvcmV7Y29udGVudDoiXGUwNTcifS5mYS1uZW9zOmJlZm9yZXtjb250ZW50OiJcZjYxMiJ9LmZhLWhhY2tlcnJhbms6YmVmb3Jle2NvbnRlbnQ6IlxmNWY3In0uZmEtcmVzZWFyY2hnYXRlOmJlZm9yZXtjb250ZW50OiJcZjRmOCJ9LmZhLXN3aWZ0OmJlZm9yZXtjb250ZW50OiJcZjhlMSJ9LmZhLWFuZ3VsYXI6YmVmb3Jle2NvbnRlbnQ6IlxmNDIwIn0uZmEtc3BlYWthcDpiZWZvcmV7Y29udGVudDoiXGYzZjMifS5mYS1hbmdyeWNyZWF0aXZlOmJlZm9yZXtjb250ZW50OiJcZjM2ZSJ9LmZhLXktY29tYmluYXRvcjpiZWZvcmV7Y29udGVudDoiXGYyM2IifS5mYS1lbXBpcmU6YmVmb3Jle2NvbnRlbnQ6IlxmMWQxIn0uZmEtZW52aXJhOmJlZm9yZXtjb250ZW50OiJcZjI5OSJ9LmZhLWdpdGxhYi1zcXVhcmU6YmVmb3JlLC5mYS1zcXVhcmUtZ2l0bGFiOmJlZm9yZXtjb250ZW50OiJcZTVhZSJ9LmZhLXN0dWRpb3ZpbmFyaTpiZWZvcmV7Y29udGVudDoiXGYzZjgifS5mYS1waWVkLXBpcGVyOmJlZm9yZXtjb250ZW50OiJcZjJhZSJ9LmZhLXdvcmRwcmVzczpiZWZvcmV7Y29udGVudDoiXGYxOWEifS5mYS1wcm9kdWN0LWh1bnQ6YmVmb3Jle2NvbnRlbnQ6IlxmMjg4In0uZmEtZmlyZWZveDpiZWZvcmV7Y29udGVudDoiXGYyNjkifS5mYS1saW5vZGU6YmVmb3Jle2NvbnRlbnQ6IlxmMmI4In0uZmEtZ29vZHJlYWRzOmJlZm9yZXtjb250ZW50OiJcZjNhOCJ9LmZhLW9kbm9rbGFzc25pa2ktc3F1YXJlOmJlZm9yZSwuZmEtc3F1YXJlLW9kbm9rbGFzc25pa2k6YmVmb3Jle2NvbnRlbnQ6IlxmMjY0In0uZmEtanNmaWRkbGU6YmVmb3Jle2NvbnRlbnQ6IlxmMWNjIn0uZmEtc2l0aDpiZWZvcmV7Y29udGVudDoiXGY1MTIifS5mYS10aGVtZWlzbGU6YmVmb3Jle2NvbnRlbnQ6IlxmMmIyIn0uZmEtcGFnZTQ6YmVmb3Jle2NvbnRlbnQ6IlxmM2Q3In0uZmEtaGFzaG5vZGU6YmVmb3Jle2NvbnRlbnQ6IlxlNDk5In0uZmEtcmVhY3Q6YmVmb3Jle2NvbnRlbnQ6IlxmNDFiIn0uZmEtY2MtcGF5cGFsOmJlZm9yZXtjb250ZW50OiJcZjFmNCJ9LmZhLXNxdWFyZXNwYWNlOmJlZm9yZXtjb250ZW50OiJcZjViZSJ9LmZhLWNjLXN0cmlwZTpiZWZvcmV7Y29udGVudDoiXGYxZjUifS5mYS1jcmVhdGl2ZS1jb21tb25zLXNoYXJlOmJlZm9yZXtjb250ZW50OiJcZjRmMiJ9LmZhLWJpdGNvaW46YmVmb3Jle2NvbnRlbnQ6IlxmMzc5In0uZmEta2V5Y2RuOmJlZm9yZXtjb250ZW50OiJcZjNiYSJ9LmZhLW9wZXJhOmJlZm9yZXtjb250ZW50OiJcZjI2YSJ9LmZhLWl0Y2gtaW86YmVmb3Jle2NvbnRlbnQ6IlxmODNhIn0uZmEtdW1icmFjbzpiZWZvcmV7Y29udGVudDoiXGY4ZTgifS5mYS1nYWxhY3RpYy1zZW5hdGU6YmVmb3Jle2NvbnRlbnQ6IlxmNTBkIn0uZmEtdWJ1bnR1OmJlZm9yZXtjb250ZW50OiJcZjdkZiJ9LmZhLWRyYWZ0MmRpZ2l0YWw6YmVmb3Jle2NvbnRlbnQ6IlxmMzk2In0uZmEtc3RyaXBlOmJlZm9yZXtjb250ZW50OiJcZjQyOSJ9LmZhLWhvdXp6OmJlZm9yZXtjb250ZW50OiJcZjI3YyJ9LmZhLWdnOmJlZm9yZXtjb250ZW50OiJcZjI2MCJ9LmZhLWRobDpiZWZvcmV7Y29udGVudDoiXGY3OTAifS5mYS1waW50ZXJlc3Qtc3F1YXJlOmJlZm9yZSwuZmEtc3F1YXJlLXBpbnRlcmVzdDpiZWZvcmV7Y29udGVudDoiXGYwZDMifS5mYS14aW5nOmJlZm9yZXtjb250ZW50OiJcZjE2OCJ9LmZhLWJsYWNrYmVycnk6YmVmb3Jle2NvbnRlbnQ6IlxmMzdiIn0uZmEtY3JlYXRpdmUtY29tbW9ucy1wZDpiZWZvcmV7Y29udGVudDoiXGY0ZWMifS5mYS1wbGF5c3RhdGlvbjpiZWZvcmV7Y29udGVudDoiXGYzZGYifS5mYS1xdWluc2NhcGU6YmVmb3Jle2NvbnRlbnQ6IlxmNDU5In0uZmEtbGVzczpiZWZvcmV7Y29udGVudDoiXGY0MWQifS5mYS1ibG9nZ2VyLWI6YmVmb3Jle2NvbnRlbnQ6IlxmMzdkIn0uZmEtb3BlbmNhcnQ6YmVmb3Jle2NvbnRlbnQ6IlxmMjNkIn0uZmEtdmluZTpiZWZvcmV7Y29udGVudDoiXGYxY2EifS5mYS1wYXlwYWw6YmVmb3Jle2NvbnRlbnQ6IlxmMWVkIn0uZmEtZ2l0bGFiOmJlZm9yZXtjb250ZW50OiJcZjI5NiJ9LmZhLXR5cG8zOmJlZm9yZXtjb250ZW50OiJcZjQyYiJ9LmZhLXJlZGRpdC1hbGllbjpiZWZvcmV7Y29udGVudDoiXGYyODEifS5mYS15YWhvbzpiZWZvcmV7Y29udGVudDoiXGYxOWUifS5mYS1kYWlseW1vdGlvbjpiZWZvcmV7Y29udGVudDoiXGUwNTIifS5mYS1hZmZpbGlhdGV0aGVtZTpiZWZvcmV7Y29udGVudDoiXGYzNmIifS5mYS1waWVkLXBpcGVyLXBwOmJlZm9yZXtjb250ZW50OiJcZjFhNyJ9LmZhLWJvb3RzdHJhcDpiZWZvcmV7Y29udGVudDoiXGY4MzYifS5mYS1vZG5va2xhc3NuaWtpOmJlZm9yZXtjb250ZW50OiJcZjI2MyJ9LmZhLW5mYy1zeW1ib2w6YmVmb3Jle2NvbnRlbnQ6IlxlNTMxIn0uZmEtZXRoZXJldW06YmVmb3Jle2NvbnRlbnQ6IlxmNDJlIn0uZmEtc3BlYWtlci1kZWNrOmJlZm9yZXtjb250ZW50OiJcZjgzYyJ9LmZhLWNyZWF0aXZlLWNvbW1vbnMtbmMtZXU6YmVmb3Jle2NvbnRlbnQ6IlxmNGU5In0uZmEtcGF0cmVvbjpiZWZvcmV7Y29udGVudDoiXGYzZDkifS5mYS1hdmlhbmV4OmJlZm9yZXtjb250ZW50OiJcZjM3NCJ9LmZhLWVsbG86YmVmb3Jle2NvbnRlbnQ6IlxmNWYxIn0uZmEtZ29mb3JlOmJlZm9yZXtjb250ZW50OiJcZjNhNyJ9LmZhLWJpbW9iamVjdDpiZWZvcmV7Y29udGVudDoiXGYzNzgifS5mYS1mYWNlYm9vay1mOmJlZm9yZXtjb250ZW50OiJcZjM5ZSJ9LmZhLWdvb2dsZS1wbHVzLXNxdWFyZTpiZWZvcmUsLmZhLXNxdWFyZS1nb29nbGUtcGx1czpiZWZvcmV7Y29udGVudDoiXGYwZDQifS5mYS1tYW5kYWxvcmlhbjpiZWZvcmV7Y29udGVudDoiXGY1MGYifS5mYS1maXJzdC1vcmRlci1hbHQ6YmVmb3Jle2NvbnRlbnQ6IlxmNTBhIn0uZmEtb3NpOmJlZm9yZXtjb250ZW50OiJcZjQxYSJ9LmZhLWdvb2dsZS13YWxsZXQ6YmVmb3Jle2NvbnRlbnQ6IlxmMWVlIn0uZmEtZC1hbmQtZC1iZXlvbmQ6YmVmb3Jle2NvbnRlbnQ6IlxmNmNhIn0uZmEtcGVyaXNjb3BlOmJlZm9yZXtjb250ZW50OiJcZjNkYSJ9LmZhLWZ1bGNydW06YmVmb3Jle2NvbnRlbnQ6IlxmNTBiIn0uZmEtY2xvdWRzY2FsZTpiZWZvcmV7Y29udGVudDoiXGYzODMifS5mYS1mb3J1bWJlZTpiZWZvcmV7Y29udGVudDoiXGYyMTEifS5mYS1taXp1bmk6YmVmb3Jle2NvbnRlbnQ6IlxmM2NjIn0uZmEtc2NobGl4OmJlZm9yZXtjb250ZW50OiJcZjNlYSJ9LmZhLXNxdWFyZS14aW5nOmJlZm9yZSwuZmEteGluZy1zcXVhcmU6YmVmb3Jle2NvbnRlbnQ6IlxmMTY5In0uZmEtYmFuZGNhbXA6YmVmb3Jle2NvbnRlbnQ6IlxmMmQ1In0uZmEtd3Bmb3JtczpiZWZvcmV7Y29udGVudDoiXGYyOTgifS5mYS1jbG91ZHZlcnNpZnk6YmVmb3Jle2NvbnRlbnQ6IlxmMzg1In0uZmEtdXNwczpiZWZvcmV7Y29udGVudDoiXGY3ZTEifS5mYS1tZWdhcG9ydDpiZWZvcmV7Y29udGVudDoiXGY1YTMifS5mYS1tYWdlbnRvOmJlZm9yZXtjb250ZW50OiJcZjNjNCJ9LmZhLXNwb3RpZnk6YmVmb3Jle2NvbnRlbnQ6IlxmMWJjIn0uZmEtb3B0aW4tbW9uc3RlcjpiZWZvcmV7Y29udGVudDoiXGYyM2MifS5mYS1mbHk6YmVmb3Jle2NvbnRlbnQ6IlxmNDE3In0uZmEtYXZpYXRvOmJlZm9yZXtjb250ZW50OiJcZjQyMSJ9LmZhLWl0dW5lczpiZWZvcmV7Y29udGVudDoiXGYzYjQifS5mYS1jdXR0bGVmaXNoOmJlZm9yZXtjb250ZW50OiJcZjM4YyJ9LmZhLWJsb2dnZXI6YmVmb3Jle2NvbnRlbnQ6IlxmMzdjIn0uZmEtZmxpY2tyOmJlZm9yZXtjb250ZW50OiJcZjE2ZSJ9LmZhLXZpYmVyOmJlZm9yZXtjb250ZW50OiJcZjQwOSJ9LmZhLXNvdW5kY2xvdWQ6YmVmb3Jle2NvbnRlbnQ6IlxmMWJlIn0uZmEtZGlnZzpiZWZvcmV7Y29udGVudDoiXGYxYTYifS5mYS10ZW5jZW50LXdlaWJvOmJlZm9yZXtjb250ZW50OiJcZjFkNSJ9LmZhLXN5bWZvbnk6YmVmb3Jle2NvbnRlbnQ6IlxmODNkIn0uZmEtbWF4Y2RuOmJlZm9yZXtjb250ZW50OiJcZjEzNiJ9LmZhLWV0c3k6YmVmb3Jle2NvbnRlbnQ6IlxmMmQ3In0uZmEtZmFjZWJvb2stbWVzc2VuZ2VyOmJlZm9yZXtjb250ZW50OiJcZjM5ZiJ9LmZhLWF1ZGlibGU6YmVmb3Jle2NvbnRlbnQ6IlxmMzczIn0uZmEtdGhpbmstcGVha3M6YmVmb3Jle2NvbnRlbnQ6IlxmNzMxIn0uZmEtYmlsaWJpbGk6YmVmb3Jle2NvbnRlbnQ6IlxlM2Q5In0uZmEtZXJsYW5nOmJlZm9yZXtjb250ZW50OiJcZjM5ZCJ9LmZhLWNvdHRvbi1idXJlYXU6YmVmb3Jle2NvbnRlbnQ6IlxmODllIn0uZmEtZGFzaGN1YmU6YmVmb3Jle2NvbnRlbnQ6IlxmMjEwIn0uZmEtNDItZ3JvdXA6YmVmb3JlLC5mYS1pbm5vc29mdDpiZWZvcmV7Y29udGVudDoiXGUwODAifS5mYS1zdGFjay1leGNoYW5nZTpiZWZvcmV7Y29udGVudDoiXGYxOGQifS5mYS1lbGVtZW50b3I6YmVmb3Jle2NvbnRlbnQ6IlxmNDMwIn0uZmEtcGllZC1waXBlci1zcXVhcmU6YmVmb3JlLC5mYS1zcXVhcmUtcGllZC1waXBlcjpiZWZvcmV7Y29udGVudDoiXGUwMWUifS5mYS1jcmVhdGl2ZS1jb21tb25zLW5kOmJlZm9yZXtjb250ZW50OiJcZjRlYiJ9LmZhLXBhbGZlZDpiZWZvcmV7Y29udGVudDoiXGYzZDgifS5mYS1zdXBlcnBvd2VyczpiZWZvcmV7Y29udGVudDoiXGYyZGQifS5mYS1yZXNvbHZpbmc6YmVmb3Jle2NvbnRlbnQ6IlxmM2U3In0uZmEteGJveDpiZWZvcmV7Y29udGVudDoiXGY0MTIifS5mYS1zZWFyY2hlbmdpbjpiZWZvcmV7Y29udGVudDoiXGYzZWIifS5mYS10aWt0b2s6YmVmb3Jle2NvbnRlbnQ6IlxlMDdiIn0uZmEtZmFjZWJvb2stc3F1YXJlOmJlZm9yZSwuZmEtc3F1YXJlLWZhY2Vib29rOmJlZm9yZXtjb250ZW50OiJcZjA4MiJ9LmZhLXJlbnJlbjpiZWZvcmV7Y29udGVudDoiXGYxOGIifS5mYS1saW51eDpiZWZvcmV7Y29udGVudDoiXGYxN2MifS5mYS1nbGlkZTpiZWZvcmV7Y29udGVudDoiXGYyYTUifS5mYS1saW5rZWRpbjpiZWZvcmV7Y29udGVudDoiXGYwOGMifS5mYS1odWJzcG90OmJlZm9yZXtjb250ZW50OiJcZjNiMiJ9LmZhLWRlcGxveWRvZzpiZWZvcmV7Y29udGVudDoiXGYzOGUifS5mYS10d2l0Y2g6YmVmb3Jle2NvbnRlbnQ6IlxmMWU4In0uZmEtcmF2ZWxyeTpiZWZvcmV7Y29udGVudDoiXGYyZDkifS5mYS1taXhlcjpiZWZvcmV7Y29udGVudDoiXGUwNTYifS5mYS1sYXN0Zm0tc3F1YXJlOmJlZm9yZSwuZmEtc3F1YXJlLWxhc3RmbTpiZWZvcmV7Y29udGVudDoiXGYyMDMifS5mYS12aW1lbzpiZWZvcmV7Y29udGVudDoiXGY0MGEifS5mYS1tZW5kZWxleTpiZWZvcmV7Y29udGVudDoiXGY3YjMifS5mYS11bmlyZWdpc3RyeTpiZWZvcmV7Y29udGVudDoiXGY0MDQifS5mYS1maWdtYTpiZWZvcmV7Y29udGVudDoiXGY3OTkifS5mYS1jcmVhdGl2ZS1jb21tb25zLXJlbWl4OmJlZm9yZXtjb250ZW50OiJcZjRlZSJ9LmZhLWNjLWFtYXpvbi1wYXk6YmVmb3Jle2NvbnRlbnQ6IlxmNDJkIn0uZmEtZHJvcGJveDpiZWZvcmV7Y29udGVudDoiXGYxNmIifS5mYS1pbnN0YWdyYW06YmVmb3Jle2NvbnRlbnQ6IlxmMTZkIn0uZmEtY21wbGlkOmJlZm9yZXtjb250ZW50OiJcZTM2MCJ9LmZhLWZhY2Vib29rOmJlZm9yZXtjb250ZW50OiJcZjA5YSJ9LmZhLWdyaXBmaXJlOmJlZm9yZXtjb250ZW50OiJcZjNhYyJ9LmZhLWplZGktb3JkZXI6YmVmb3Jle2NvbnRlbnQ6IlxmNTBlIn0uZmEtdWlraXQ6YmVmb3Jle2NvbnRlbnQ6IlxmNDAzIn0uZmEtZm9ydC1hd2Vzb21lLWFsdDpiZWZvcmV7Y29udGVudDoiXGYzYTMifS5mYS1waGFicmljYXRvcjpiZWZvcmV7Y29udGVudDoiXGYzZGIifS5mYS11c3N1bm5haDpiZWZvcmV7Y29udGVudDoiXGY0MDcifS5mYS1lYXJseWJpcmRzOmJlZm9yZXtjb250ZW50OiJcZjM5YSJ9LmZhLXRyYWRlLWZlZGVyYXRpb246YmVmb3Jle2NvbnRlbnQ6IlxmNTEzIn0uZmEtYXV0b3ByZWZpeGVyOmJlZm9yZXtjb250ZW50OiJcZjQxYyJ9LmZhLXdoYXRzYXBwOmJlZm9yZXtjb250ZW50OiJcZjIzMiJ9LmZhLXNsaWRlc2hhcmU6YmVmb3Jle2NvbnRlbnQ6IlxmMWU3In0uZmEtZ29vZ2xlLXBsYXk6YmVmb3Jle2NvbnRlbnQ6IlxmM2FiIn0uZmEtdmlhZGVvOmJlZm9yZXtjb250ZW50OiJcZjJhOSJ9LmZhLWxpbmU6YmVmb3Jle2NvbnRlbnQ6IlxmM2MwIn0uZmEtZ29vZ2xlLWRyaXZlOmJlZm9yZXtjb250ZW50OiJcZjNhYSJ9LmZhLXNlcnZpY2VzdGFjazpiZWZvcmV7Y29udGVudDoiXGYzZWMifS5mYS1zaW1wbHlidWlsdDpiZWZvcmV7Y29udGVudDoiXGYyMTUifS5mYS1iaXRidWNrZXQ6YmVmb3Jle2NvbnRlbnQ6IlxmMTcxIn0uZmEtaW1kYjpiZWZvcmV7Y29udGVudDoiXGYyZDgifS5mYS1kZWV6ZXI6YmVmb3Jle2NvbnRlbnQ6IlxlMDc3In0uZmEtcmFzcGJlcnJ5LXBpOmJlZm9yZXtjb250ZW50OiJcZjdiYiJ9LmZhLWppcmE6YmVmb3Jle2NvbnRlbnQ6IlxmN2IxIn0uZmEtZG9ja2VyOmJlZm9yZXtjb250ZW50OiJcZjM5NSJ9LmZhLXNjcmVlbnBhbDpiZWZvcmV7Y29udGVudDoiXGU1NzAifS5mYS1ibHVldG9vdGg6YmVmb3Jle2NvbnRlbnQ6IlxmMjkzIn0uZmEtZ2l0dGVyOmJlZm9yZXtjb250ZW50OiJcZjQyNiJ9LmZhLWQtYW5kLWQ6YmVmb3Jle2NvbnRlbnQ6IlxmMzhkIn0uZmEtbWljcm9ibG9nOmJlZm9yZXtjb250ZW50OiJcZTAxYSJ9LmZhLWNjLWRpbmVycy1jbHViOmJlZm9yZXtjb250ZW50OiJcZjI0YyJ9LmZhLWdnLWNpcmNsZTpiZWZvcmV7Y29udGVudDoiXGYyNjEifS5mYS1waWVkLXBpcGVyLWhhdDpiZWZvcmV7Y29udGVudDoiXGY0ZTUifS5mYS1raWNrc3RhcnRlci1rOmJlZm9yZXtjb250ZW50OiJcZjNiYyJ9LmZhLXlhbmRleDpiZWZvcmV7Y29udGVudDoiXGY0MTMifS5mYS1yZWFkbWU6YmVmb3Jle2NvbnRlbnQ6IlxmNGQ1In0uZmEtaHRtbDU6YmVmb3Jle2NvbnRlbnQ6IlxmMTNiIn0uZmEtc2VsbHN5OmJlZm9yZXtjb250ZW50OiJcZjIxMyJ9LmZhLXNhc3M6YmVmb3Jle2NvbnRlbnQ6IlxmNDFlIn0uZmEtd2lyc2luZGhhbmR3ZXJrOmJlZm9yZSwuZmEtd3NoOmJlZm9yZXtjb250ZW50OiJcZTJkMCJ9LmZhLWJ1cm9tb2JlbGV4cGVydGU6YmVmb3Jle2NvbnRlbnQ6IlxmMzdmIn0uZmEtc2FsZXNmb3JjZTpiZWZvcmV7Y29udGVudDoiXGY4M2IifS5mYS1vY3RvcHVzLWRlcGxveTpiZWZvcmV7Y29udGVudDoiXGUwODIifS5mYS1tZWRhcHBzOmJlZm9yZXtjb250ZW50OiJcZjNjNiJ9LmZhLW5zODpiZWZvcmV7Y29udGVudDoiXGYzZDUifS5mYS1waW50ZXJlc3QtcDpiZWZvcmV7Y29udGVudDoiXGYyMzEifS5mYS1hcHBlcjpiZWZvcmV7Y29udGVudDoiXGYzNzEifS5mYS1mb3J0LWF3ZXNvbWU6YmVmb3Jle2NvbnRlbnQ6IlxmMjg2In0uZmEtd2F6ZTpiZWZvcmV7Y29udGVudDoiXGY4M2YifS5mYS1jYy1qY2I6YmVmb3Jle2NvbnRlbnQ6IlxmMjRiIn0uZmEtc25hcGNoYXQtZ2hvc3Q6YmVmb3JlLC5mYS1zbmFwY2hhdDpiZWZvcmV7Y29udGVudDoiXGYyYWIifS5mYS1mYW50YXN5LWZsaWdodC1nYW1lczpiZWZvcmV7Y29udGVudDoiXGY2ZGMifS5mYS1ydXN0OmJlZm9yZXtjb250ZW50OiJcZTA3YSJ9LmZhLXdpeDpiZWZvcmV7Y29udGVudDoiXGY1Y2YifS5mYS1iZWhhbmNlLXNxdWFyZTpiZWZvcmUsLmZhLXNxdWFyZS1iZWhhbmNlOmJlZm9yZXtjb250ZW50OiJcZjFiNSJ9LmZhLXN1cHBsZTpiZWZvcmV7Y29udGVudDoiXGYzZjkifS5mYS1yZWJlbDpiZWZvcmV7Y29udGVudDoiXGYxZDAifS5mYS1jc3MzOmJlZm9yZXtjb250ZW50OiJcZjEzYyJ9LmZhLXN0YXlsaW5rZWQ6YmVmb3Jle2NvbnRlbnQ6IlxmM2Y1In0uZmEta2FnZ2xlOmJlZm9yZXtjb250ZW50OiJcZjVmYSJ9LmZhLXNwYWNlLWF3ZXNvbWU6YmVmb3Jle2NvbnRlbnQ6IlxlNWFjIn0uZmEtZGV2aWFudGFydDpiZWZvcmV7Y29udGVudDoiXGYxYmQifS5mYS1jcGFuZWw6YmVmb3Jle2NvbnRlbnQ6IlxmMzg4In0uZmEtZ29vZHJlYWRzLWc6YmVmb3Jle2NvbnRlbnQ6IlxmM2E5In0uZmEtZ2l0LXNxdWFyZTpiZWZvcmUsLmZhLXNxdWFyZS1naXQ6YmVmb3Jle2NvbnRlbnQ6IlxmMWQyIn0uZmEtc3F1YXJlLXR1bWJscjpiZWZvcmUsLmZhLXR1bWJsci1zcXVhcmU6YmVmb3Jle2NvbnRlbnQ6IlxmMTc0In0uZmEtdHJlbGxvOmJlZm9yZXtjb250ZW50OiJcZjE4MSJ9LmZhLWNyZWF0aXZlLWNvbW1vbnMtbmMtanA6YmVmb3Jle2NvbnRlbnQ6IlxmNGVhIn0uZmEtZ2V0LXBvY2tldDpiZWZvcmV7Y29udGVudDoiXGYyNjUifS5mYS1wZXJieXRlOmJlZm9yZXtjb250ZW50OiJcZTA4MyJ9LmZhLWdydW50OmJlZm9yZXtjb250ZW50OiJcZjNhZCJ9LmZhLXdlZWJseTpiZWZvcmV7Y29udGVudDoiXGY1Y2MifS5mYS1jb25uZWN0ZGV2ZWxvcDpiZWZvcmV7Y29udGVudDoiXGYyMGUifS5mYS1sZWFucHViOmJlZm9yZXtjb250ZW50OiJcZjIxMiJ9LmZhLWJsYWNrLXRpZTpiZWZvcmV7Y29udGVudDoiXGYyN2UifS5mYS10aGVtZWNvOmJlZm9yZXtjb250ZW50OiJcZjVjNiJ9LmZhLXB5dGhvbjpiZWZvcmV7Y29udGVudDoiXGYzZTIifS5mYS1hbmRyb2lkOmJlZm9yZXtjb250ZW50OiJcZjE3YiJ9LmZhLWJvdHM6YmVmb3Jle2NvbnRlbnQ6IlxlMzQwIn0uZmEtZnJlZS1jb2RlLWNhbXA6YmVmb3Jle2NvbnRlbnQ6IlxmMmM1In0uZmEtaG9ybmJpbGw6YmVmb3Jle2NvbnRlbnQ6IlxmNTkyIn0uZmEtanM6YmVmb3Jle2NvbnRlbnQ6IlxmM2I4In0uZmEtaWRlYWw6YmVmb3Jle2NvbnRlbnQ6IlxlMDEzIn0uZmEtZ2l0OmJlZm9yZXtjb250ZW50OiJcZjFkMyJ9LmZhLWRldjpiZWZvcmV7Y29udGVudDoiXGY2Y2MifS5mYS1za2V0Y2g6YmVmb3Jle2NvbnRlbnQ6IlxmN2M2In0uZmEteWFuZGV4LWludGVybmF0aW9uYWw6YmVmb3Jle2NvbnRlbnQ6IlxmNDE0In0uZmEtY2MtYW1leDpiZWZvcmV7Y29udGVudDoiXGYxZjMifS5mYS11YmVyOmJlZm9yZXtjb250ZW50OiJcZjQwMiJ9LmZhLWdpdGh1YjpiZWZvcmV7Y29udGVudDoiXGYwOWIifS5mYS1waHA6YmVmb3Jle2NvbnRlbnQ6IlxmNDU3In0uZmEtYWxpcGF5OmJlZm9yZXtjb250ZW50OiJcZjY0MiJ9LmZhLXlvdXR1YmU6YmVmb3Jle2NvbnRlbnQ6IlxmMTY3In0uZmEtc2t5YXRsYXM6YmVmb3Jle2NvbnRlbnQ6IlxmMjE2In0uZmEtZmlyZWZveC1icm93c2VyOmJlZm9yZXtjb250ZW50OiJcZTAwNyJ9LmZhLXJlcGx5ZDpiZWZvcmV7Y29udGVudDoiXGYzZTYifS5mYS1zdXNlOmJlZm9yZXtjb250ZW50OiJcZjdkNiJ9LmZhLWplbmtpbnM6YmVmb3Jle2NvbnRlbnQ6IlxmM2I2In0uZmEtdHdpdHRlcjpiZWZvcmV7Y29udGVudDoiXGYwOTkifS5mYS1yb2Nrcm1zOmJlZm9yZXtjb250ZW50OiJcZjNlOSJ9LmZhLXBpbnRlcmVzdDpiZWZvcmV7Y29udGVudDoiXGYwZDIifS5mYS1idWZmZXI6YmVmb3Jle2NvbnRlbnQ6IlxmODM3In0uZmEtbnBtOmJlZm9yZXtjb250ZW50OiJcZjNkNCJ9LmZhLXlhbW1lcjpiZWZvcmV7Y29udGVudDoiXGY4NDAifS5mYS1idGM6YmVmb3Jle2NvbnRlbnQ6IlxmMTVhIn0uZmEtZHJpYmJibGU6YmVmb3Jle2NvbnRlbnQ6IlxmMTdkIn0uZmEtc3R1bWJsZXVwb24tY2lyY2xlOmJlZm9yZXtjb250ZW50OiJcZjFhMyJ9LmZhLWludGVybmV0LWV4cGxvcmVyOmJlZm9yZXtjb250ZW50OiJcZjI2YiJ9LmZhLXN0dWJiZXI6YmVmb3Jle2NvbnRlbnQ6IlxlNWM3In0uZmEtdGVsZWdyYW0tcGxhbmU6YmVmb3JlLC5mYS10ZWxlZ3JhbTpiZWZvcmV7Y29udGVudDoiXGYyYzYifS5mYS1vbGQtcmVwdWJsaWM6YmVmb3Jle2NvbnRlbnQ6IlxmNTEwIn0uZmEtb2R5c2VlOmJlZm9yZXtjb250ZW50OiJcZTVjNiJ9LmZhLXNxdWFyZS13aGF0c2FwcDpiZWZvcmUsLmZhLXdoYXRzYXBwLXNxdWFyZTpiZWZvcmV7Y29udGVudDoiXGY0MGMifS5mYS1ub2RlLWpzOmJlZm9yZXtjb250ZW50OiJcZjNkMyJ9LmZhLWVkZ2UtbGVnYWN5OmJlZm9yZXtjb250ZW50OiJcZTA3OCJ9LmZhLXNsYWNrLWhhc2g6YmVmb3JlLC5mYS1zbGFjazpiZWZvcmV7Y29udGVudDoiXGYxOTgifS5mYS1tZWRydDpiZWZvcmV7Y29udGVudDoiXGYzYzgifS5mYS11c2I6YmVmb3Jle2NvbnRlbnQ6IlxmMjg3In0uZmEtdHVtYmxyOmJlZm9yZXtjb250ZW50OiJcZjE3MyJ9LmZhLXZhYWRpbjpiZWZvcmV7Y29udGVudDoiXGY0MDgifS5mYS1xdW9yYTpiZWZvcmV7Y29udGVudDoiXGYyYzQifS5mYS1yZWFjdGV1cm9wZTpiZWZvcmV7Y29udGVudDoiXGY3NWQifS5mYS1tZWRpdW0tbTpiZWZvcmUsLmZhLW1lZGl1bTpiZWZvcmV7Y29udGVudDoiXGYyM2EifS5mYS1hbWlsaWE6YmVmb3Jle2NvbnRlbnQ6IlxmMzZkIn0uZmEtbWl4Y2xvdWQ6YmVmb3Jle2NvbnRlbnQ6IlxmMjg5In0uZmEtZmxpcGJvYXJkOmJlZm9yZXtjb250ZW50OiJcZjQ0ZCJ9LmZhLXZpYWNvaW46YmVmb3Jle2NvbnRlbnQ6IlxmMjM3In0uZmEtY3JpdGljYWwtcm9sZTpiZWZvcmV7Y29udGVudDoiXGY2YzkifS5mYS1zaXRyb3g6YmVmb3Jle2NvbnRlbnQ6IlxlNDRhIn0uZmEtZGlzY291cnNlOmJlZm9yZXtjb250ZW50OiJcZjM5MyJ9LmZhLWpvb21sYTpiZWZvcmV7Y29udGVudDoiXGYxYWEifS5mYS1tYXN0b2RvbjpiZWZvcmV7Y29udGVudDoiXGY0ZjYifS5mYS1haXJibmI6YmVmb3Jle2NvbnRlbnQ6IlxmODM0In0uZmEtd29sZi1wYWNrLWJhdHRhbGlvbjpiZWZvcmV7Y29udGVudDoiXGY1MTQifS5mYS1idXktbi1sYXJnZTpiZWZvcmV7Y29udGVudDoiXGY4YTYifS5mYS1ndWxwOmJlZm9yZXtjb250ZW50OiJcZjNhZSJ9LmZhLWNyZWF0aXZlLWNvbW1vbnMtc2FtcGxpbmctcGx1czpiZWZvcmV7Y29udGVudDoiXGY0ZjEifS5mYS1zdHJhdmE6YmVmb3Jle2NvbnRlbnQ6IlxmNDI4In0uZmEtZW1iZXI6YmVmb3Jle2NvbnRlbnQ6IlxmNDIzIn0uZmEtY2FuYWRpYW4tbWFwbGUtbGVhZjpiZWZvcmV7Y29udGVudDoiXGY3ODUifS5mYS10ZWFtc3BlYWs6YmVmb3Jle2NvbnRlbnQ6IlxmNGY5In0uZmEtcHVzaGVkOmJlZm9yZXtjb250ZW50OiJcZjNlMSJ9LmZhLXdvcmRwcmVzcy1zaW1wbGU6YmVmb3Jle2NvbnRlbnQ6IlxmNDExIn0uZmEtbnV0cml0aW9uaXg6YmVmb3Jle2NvbnRlbnQ6IlxmM2Q2In0uZmEtd29kdTpiZWZvcmV7Y29udGVudDoiXGUwODgifS5mYS1nb29nbGUtcGF5OmJlZm9yZXtjb250ZW50OiJcZTA3OSJ9LmZhLWludGVyY29tOmJlZm9yZXtjb250ZW50OiJcZjdhZiJ9LmZhLXpoaWh1OmJlZm9yZXtjb250ZW50OiJcZjYzZiJ9LmZhLWtvcnZ1ZTpiZWZvcmV7Y29udGVudDoiXGY0MmYifS5mYS1waXg6YmVmb3Jle2NvbnRlbnQ6IlxlNDNhIn0uZmEtc3RlYW0tc3ltYm9sOmJlZm9yZXtjb250ZW50OiJcZjNmNiJ9Omhvc3QsOnJvb3R7LS1mYS1mb250LXJlZ3VsYXI6bm9ybWFsIDQwMCAxZW0vMSAiRm9udCBBd2Vzb21lIDYgRnJlZSJ9QGZvbnQtZmFjZXtmb250LWZhbWlseToiRm9udCBBd2Vzb21lIDYgRnJlZSI7Zm9udC1zdHlsZTpub3JtYWw7Zm9udC13ZWlnaHQ6NDAwO2ZvbnQtZGlzcGxheTpibG9jaztzcmM6dXJsKC4uL3dlYmZvbnRzL2ZhLXJlZ3VsYXItNDAwLndvZmYyKSBmb3JtYXQoIndvZmYyIiksdXJsKC4uL3dlYmZvbnRzL2ZhLXJlZ3VsYXItNDAwLnR0ZikgZm9ybWF0KCJ0cnVldHlwZSIpfS5mYS1yZWd1bGFyLC5mYXJ7Zm9udC13ZWlnaHQ6NDAwfTpob3N0LDpyb290ey0tZmEtc3R5bGUtZmFtaWx5LWNsYXNzaWM6IkZvbnQgQXdlc29tZSA2IEZyZWUiOy0tZmEtZm9udC1zb2xpZDpub3JtYWwgOTAwIDFlbS8xICJGb250IEF3ZXNvbWUgNiBGcmVlIn1AZm9udC1mYWNle2ZvbnQtZmFtaWx5OiJGb250IEF3ZXNvbWUgNiBGcmVlIjtmb250LXN0eWxlOm5vcm1hbDtmb250LXdlaWdodDo5MDA7Zm9udC1kaXNwbGF5OmJsb2NrO3NyYzp1cmwoLi4vd2ViZm9udHMvZmEtc29saWQtOTAwLndvZmYyKSBmb3JtYXQoIndvZmYyIiksdXJsKC4uL3dlYmZvbnRzL2ZhLXNvbGlkLTkwMC50dGYpIGZvcm1hdCgidHJ1ZXR5cGUiKX0uZmEtc29saWQsLmZhc3tmb250LXdlaWdodDo5MDB9QGZvbnQtZmFjZXtmb250LWZhbWlseToiRm9udCBBd2Vzb21lIDUgQnJhbmRzIjtmb250LWRpc3BsYXk6YmxvY2s7Zm9udC13ZWlnaHQ6NDAwO3NyYzp1cmwoLi4vd2ViZm9udHMvZmEtYnJhbmRzLTQwMC53b2ZmMikgZm9ybWF0KCJ3b2ZmMiIpLHVybCguLi93ZWJmb250cy9mYS1icmFuZHMtNDAwLnR0ZikgZm9ybWF0KCJ0cnVldHlwZSIpfUBmb250LWZhY2V7Zm9udC1mYW1pbHk6IkZvbnQgQXdlc29tZSA1IEZyZWUiO2ZvbnQtZGlzcGxheTpibG9jaztmb250LXdlaWdodDo5MDA7c3JjOnVybCguLi93ZWJmb250cy9mYS1zb2xpZC05MDAud29mZjIpIGZvcm1hdCgid29mZjIiKSx1cmwoLi4vd2ViZm9udHMvZmEtc29saWQtOTAwLnR0ZikgZm9ybWF0KCJ0cnVldHlwZSIpfUBmb250LWZhY2V7Zm9udC1mYW1pbHk6IkZvbnQgQXdlc29tZSA1IEZyZWUiO2ZvbnQtZGlzcGxheTpibG9jaztmb250LXdlaWdodDo0MDA7c3JjOnVybCguLi93ZWJmb250cy9mYS1yZWd1bGFyLTQwMC53b2ZmMikgZm9ybWF0KCJ3b2ZmMiIpLHVybCguLi93ZWJmb250cy9mYS1yZWd1bGFyLTQwMC50dGYpIGZvcm1hdCgidHJ1ZXR5cGUiKX1AZm9udC1mYWNle2ZvbnQtZmFtaWx5OiJGb250QXdlc29tZSI7Zm9udC1kaXNwbGF5OmJsb2NrO3NyYzp1cmwoLi4vd2ViZm9udHMvZmEtc29saWQtOTAwLndvZmYyKSBmb3JtYXQoIndvZmYyIiksdXJsKC4uL3dlYmZvbnRzL2ZhLXNvbGlkLTkwMC50dGYpIGZvcm1hdCgidHJ1ZXR5cGUiKX1AZm9udC1mYWNle2ZvbnQtZmFtaWx5OiJGb250QXdlc29tZSI7Zm9udC1kaXNwbGF5OmJsb2NrO3NyYzp1cmwoLi4vd2ViZm9udHMvZmEtYnJhbmRzLTQwMC53b2ZmMikgZm9ybWF0KCJ3b2ZmMiIpLHVybCguLi93ZWJmb250cy9mYS1icmFuZHMtNDAwLnR0ZikgZm9ybWF0KCJ0cnVldHlwZSIpfUBmb250LWZhY2V7Zm9udC1mYW1pbHk6IkZvbnRBd2Vzb21lIjtmb250LWRpc3BsYXk6YmxvY2s7c3JjOnVybCguLi93ZWJmb250cy9mYS1yZWd1bGFyLTQwMC53b2ZmMikgZm9ybWF0KCJ3b2ZmMiIpLHVybCguLi93ZWJmb250cy9mYS1yZWd1bGFyLTQwMC50dGYpIGZvcm1hdCgidHJ1ZXR5cGUiKTt1bmljb2RlLXJhbmdlOnUrZjAwMyx1K2YwMDYsdStmMDE0LHUrZjAxNi1mMDE3LHUrZjAxYS1mMDFiLHUrZjAxZCx1K2YwMjIsdStmMDNlLHUrZjA0NCx1K2YwNDYsdStmMDVjLWYwNWQsdStmMDZlLHUrZjA3MCx1K2YwODctZjA4OCx1K2YwOGEsdStmMDk0LHUrZjA5Ni1mMDk3LHUrZjA5ZCx1K2YwYTAsdStmMGEyLHUrZjBhNC1mMGE3LHUrZjBjNSx1K2YwYzcsdStmMGU1LWYwZTYsdStmMGViLHUrZjBmNi1mMGY4LHUrZjEwYyx1K2YxMTQtZjExNSx1K2YxMTgtZjExYSx1K2YxMWMtZjExZCx1K2YxMzMsdStmMTQ3LHUrZjE0ZSx1K2YxNTAtZjE1Mix1K2YxODUtZjE4Nix1K2YxOGUsdStmMTkwLWYxOTIsdStmMTk2LHUrZjFjMS1mMWM5LHUrZjFkOSx1K2YxZGIsdStmMWUzLHUrZjFlYSx1K2YxZjcsdStmMWY5LHUrZjIwYSx1K2YyNDctZjI0OCx1K2YyNGEsdStmMjRkLHUrZjI1NS1mMjViLHUrZjI1ZCx1K2YyNzEtZjI3NCx1K2YyNzgsdStmMjdiLHUrZjI4Yyx1K2YyOGUsdStmMjljLHUrZjJiNSx1K2YyYjcsdStmMmJhLHUrZjJiYyx1K2YyYmUsdStmMmMwLWYyYzEsdStmMmMzLHUrZjJkMCx1K2YyZDIsdStmMmQ0LHUrZjJkY31AZm9udC1mYWNle2ZvbnQtZmFtaWx5OiJGb250QXdlc29tZSI7Zm9udC1kaXNwbGF5OmJsb2NrO3NyYzp1cmwoLi4vd2ViZm9udHMvZmEtdjRjb21wYXRpYmlsaXR5LndvZmYyKSBmb3JtYXQoIndvZmYyIiksdXJsKC4uL3dlYmZvbnRzL2ZhLXY0Y29tcGF0aWJpbGl0eS50dGYpIGZvcm1hdCgidHJ1ZXR5cGUiKTt1bmljb2RlLXJhbmdlOnUrZjA0MSx1K2YwNDcsdStmMDY1LWYwNjYsdStmMDdkLWYwN2UsdStmMDgwLHUrZjA4Yix1K2YwOGUsdStmMDkwLHUrZjA5YSx1K2YwYWMsdStmMGFlLHUrZjBiMix1K2YwZDAsdStmMGQ2LHUrZjBlNCx1K2YwZWMsdStmMTBhLWYxMGIsdStmMTIzLHUrZjEzZSx1K2YxNDgtZjE0OSx1K2YxNGMsdStmMTU2LHUrZjE1ZSx1K2YxNjAtZjE2MSx1K2YxNjMsdStmMTc1LWYxNzgsdStmMTk1LHUrZjFmOCx1K2YyMTksdStmMjdhfQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPBody>
        <HTTPPropertySet>
          <HTTPProperty name="StreamID">1</HTTPProperty>
          <HTTPProperty name="TotalHeadersSize">625</HTTPProperty>
        </HTTPPropertySet>
      </HTTPResponse>
    </HTTPTask>
    <HTTPTask id="7" hostname="dev.bluealgo.com" path="/smartformup/ui/error.svg" url="https://dev.bluealgo.com/smartformup/ui/error.svg" ip="144.126.253.3" port="443" client_ip="192.168.0.112" client_port="64262" connectionId="2220" origin="HTML" encodingType="ANSI" ordinal="6" startDateTime="2024-02-16T16:37:19.903+05:30" startTime="2774" endTime="2975" blockedTime="-1" dnsTime="-1" connectTime="-2" sendTime="4294967295" waitTime="4294967295" receiveTime="2" sslNegotiateTime="-1" responseBodySize="184">
      <HTTPRequest method="GET">
        <HTTPHeaders>
          <HTTPHeaderEntity name=":method" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0VU</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name=":scheme" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cHM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name=":path" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>L3NtYXJ0Zm9ybXVwL3VpL2Vycm9yLnN2Zw==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name=":authority" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZGV2LmJsdWVhbGdvLmNvbQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Referer" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cHM6Ly9kZXYuYmx1ZWFsZ28uY29tL3NtYXJ0Zm9ybXVwL2xvYWRpbmRleD9vcHBvcnR1bml0eUlkPTAwNjBvMDAwMDFlU0lKMEFBTyZjdXN0b21lcmlkPWN1c3QxMDA1JmFjY2Vzc3Rva2VuPVJGcFNRVlVJZ2Q0WV9vWU5MODFuYUV4VkxBWWdLUXQ3</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Language" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZW4tVVMsZW47cT0wLjk=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="User-Agent" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEyMS4wLjAuMCBTYWZhcmkvNTM3LjM2</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Encoding" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ki8q</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="cookie" index="9">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SlNFU1NJT05JRD1COEI5REUyNDA1ODE3RDYwMjlFQzM0QzA3NDlEQjJFRg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Om1ldGhvZDogR0VUDQo6c2NoZW1lOiBodHRwcw0KOnBhdGg6IC9zbWFydGZvcm11cC91aS9lcnJvci5zdmcNCjphdXRob3JpdHk6IGRldi5ibHVlYWxnby5jb20NClJlZmVyZXI6IGh0dHBzOi8vZGV2LmJsdWVhbGdvLmNvbS9zbWFydGZvcm11cC9sb2FkaW5kZXg/b3Bwb3J0dW5pdHlJZD0wMDYwbzAwMDAxZVNJSjBBQU8mY3VzdG9tZXJpZD1jdXN0MTAwNSZhY2Nlc3N0b2tlbj1SRnBTUVZVSWdkNFlfb1lOTDgxbmFFeFZMQVlnS1F0Nw0KQWNjZXB0LUxhbmd1YWdlOiBlbi1VUyxlbjtxPTAuOQ0KVXNlci1BZ2VudDogTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEyMS4wLjAuMCBTYWZhcmkvNTM3LjM2DQpBY2NlcHQtRW5jb2Rpbmc6IGd6aXAsIGRlZmxhdGUNCkFjY2VwdDogKi8qDQpjb29raWU6IEpTRVNTSU9OSUQ9QjhCOURFMjQwNTgxN0Q2MDI5RUMzNEMwNzQ5REIyRUYNCg0K</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
          <HTTPCookies>
            <HTTPHeaderEntity name="JSESSIONID" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>QjhCOURFMjQwNTgxN0Q2MDI5RUMzNEMwNzQ5REIyRUY=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
          </HTTPCookies>
        </HTTPHeaders>
        <HTTPPropertySet>
          <HTTPProperty name="StreamID">5</HTTPProperty>
          <HTTPProperty name="TotalHeadersSize">34</HTTPProperty>
        </HTTPPropertySet>
      </HTTPRequest>
      <HTTPResponse>
        <contentLenght>606</contentLenght>
        <HTTPHeaders>
          <HTTPHeaderEntity name="Status" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MjAw</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="date" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>RnJpLCAxNiBGZWIgMjAyNCAxMTowNzoxOSBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="content-type" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aW1hZ2Uvc3ZnK3htbA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="content-length" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>NjA2</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="access-control-allow-origin" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Kg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="accept-ranges" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ynl0ZXM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="etag" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Vy8iNjA2LTE3MDM1ODkwNTIwMDAi</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="last-modified" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VHVlLCAyNiBEZWMgMjAyMyAxMToxMDo1MiBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="strict-transport-security" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bWF4LWFnZT0xNTcyNDgwMDsgaW5jbHVkZVN1YkRvbWFpbnM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SFRUUC8yLjAgMjAwDQpTdGF0dXM6IDIwMA0KZGF0ZTogRnJpLCAxNiBGZWIgMjAyNCAxMTowNzoxOSBHTVQNCmNvbnRlbnQtdHlwZTogaW1hZ2Uvc3ZnK3htbA0KY29udGVudC1sZW5ndGg6IDYwNg0KYWNjZXNzLWNvbnRyb2wtYWxsb3ctb3JpZ2luOiAqDQphY2NlcHQtcmFuZ2VzOiBieXRlcw0KZXRhZzogVy8iNjA2LTE3MDM1ODkwNTIwMDAiDQpsYXN0LW1vZGlmaWVkOiBUdWUsIDI2IERlYyAyMDIzIDExOjEwOjUyIEdNVA0Kc3RyaWN0LXRyYW5zcG9ydC1zZWN1cml0eTogbWF4LWFnZT0xNTcyNDgwMDsgaW5jbHVkZVN1YkRvbWFpbnMNCg0K</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPBody>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIFVwbG9hZGVkIHRvOiBTVkcgUmVwbywgd3d3LnN2Z3JlcG8uY29tLCBHZW5lcmF0b3I6IFNWRyBSZXBvIE1peGVyIFRvb2xzIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkNhcGFfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgCgkgdmlld0JveD0iMCAwIDUwIDUwIiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPGNpcmNsZSBzdHlsZT0iZmlsbDojRDc1QTRBOyIgY3g9IjI1IiBjeT0iMjUiIHI9IjI1Ii8+Cjxwb2x5bGluZSBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojRkZGRkZGO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjEwOyIgcG9pbnRzPSIxNiwzNCAyNSwyNSAzNCwxNiAKCSIvPgo8cG9seWxpbmUgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6I0ZGRkZGRjtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDoxMDsiIHBvaW50cz0iMTYsMTYgMjUsMjUgMzQsMzQgCgkiLz4KPC9zdmc+</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPBody>
        <HTTPPropertySet>
          <HTTPProperty name="StreamID">5</HTTPProperty>
          <HTTPProperty name="TotalHeadersSize">184</HTTPProperty>
        </HTTPPropertySet>
      </HTTPResponse>
    </HTTPTask>
    <HTTPTask id="11" hostname="unpkg.com" path="/@bpmn-io/form-js@0.10.0/dist/form-viewer.umd.js" url="https://unpkg.com/@bpmn-io/form-js@0.10.0/dist/form-viewer.umd.js" ip="104.16.124.175" port="443" client_ip="192.168.0.112" client_port="64265" connectionId="2408" origin="HTML" encodingType="ANSI" ordinal="7" startDateTime="2024-02-16T16:37:20.031+05:30" startTime="2903" endTime="3262" blockedTime="-1" dnsTime="1" connectTime="119" sendTime="4294967295" waitTime="4294967295" receiveTime="135" sslNegotiateTime="92" responseBodySize="278139">
      <HTTPRequest method="GET">
        <HTTPHeaders>
          <HTTPHeaderEntity name=":method" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0VU</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name=":scheme" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cHM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name=":path" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>L0BicG1uLWlvL2Zvcm0tanNAMC4xMC4wL2Rpc3QvZm9ybS12aWV3ZXIudW1kLmpz</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name=":authority" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>dW5wa2cuY29t</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Referer" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cHM6Ly9kZXYuYmx1ZWFsZ28uY29tL3NtYXJ0Zm9ybXVwL2xvYWRpbmRleD9vcHBvcnR1bml0eUlkPTAwNjBvMDAwMDFlU0lKMEFBTyZjdXN0b21lcmlkPWN1c3QxMDA1JmFjY2Vzc3Rva2VuPVJGcFNRVlVJZ2Q0WV9vWU5MODFuYUV4VkxBWWdLUXQ3</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Language" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZW4tVVMsZW47cT0wLjk=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="User-Agent" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEyMS4wLjAuMCBTYWZhcmkvNTM3LjM2</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Encoding" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ki8q</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Om1ldGhvZDogR0VUDQo6c2NoZW1lOiBodHRwcw0KOnBhdGg6IC9AYnBtbi1pby9mb3JtLWpzQDAuMTAuMC9kaXN0L2Zvcm0tdmlld2VyLnVtZC5qcw0KOmF1dGhvcml0eTogdW5wa2cuY29tDQpSZWZlcmVyOiBodHRwczovL2Rldi5ibHVlYWxnby5jb20vc21hcnRmb3JtdXAvbG9hZGluZGV4P29wcG9ydHVuaXR5SWQ9MDA2MG8wMDAwMWVTSUowQUFPJmN1c3RvbWVyaWQ9Y3VzdDEwMDUmYWNjZXNzdG9rZW49UkZwU1FWVUlnZDRZX29ZTkw4MW5hRXhWTEFZZ0tRdDcNCkFjY2VwdC1MYW5ndWFnZTogZW4tVVMsZW47cT0wLjkNClVzZXItQWdlbnQ6IE1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS8xMjEuMC4wLjAgU2FmYXJpLzUzNy4zNg0KQWNjZXB0LUVuY29kaW5nOiBnemlwLCBkZWZsYXRlDQpBY2NlcHQ6ICovKg0KDQo=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPPropertySet>
          <HTTPProperty name="StreamID">3</HTTPProperty>
          <HTTPProperty name="TotalHeadersSize">52</HTTPProperty>
        </HTTPPropertySet>
      </HTTPRequest>
      <HTTPResponse>
        <contentLenght>0</contentLenght>
        <HTTPHeaders>
          <HTTPHeaderEntity name="Status" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MjAw</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="date" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>RnJpLCAxNiBGZWIgMjAyNCAxMTowNzoyMCBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="content-type" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>YXBwbGljYXRpb24vamF2YXNjcmlwdDsgY2hhcnNldD11dGYtOA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="access-control-allow-origin" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Kg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="content-encoding" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="cache-control" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>cHVibGljLCBtYXgtYWdlPTMxNTM2MDAw</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="last-modified" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>U2F0LCAyNiBPY3QgMTk4NSAwODoxNTowMCBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="etag" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ImMzMzBjLWFxZFUyTmFtYk9vbnJ2UGxnUExOQ2U2N1lzOCI=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="via" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MS4xIGZseS5pbw==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="fly-request-id" index="9">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MDFIUE5LVFBSOVhYWDI5U0FaNVZFUkNYUzItYm9t</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="cf-cache-status" index="10">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SElU</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="age" index="11">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MTA2Njkz</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="vary" index="12">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>QWNjZXB0LUVuY29kaW5n</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="strict-transport-security" index="13">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bWF4LWFnZT0zMTUzNjAwMDsgaW5jbHVkZVN1YkRvbWFpbnM7IHByZWxvYWQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="x-content-type-options" index="14">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bm9zbmlmZg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="server" index="15">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Y2xvdWRmbGFyZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="cf-ray" index="16">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ODU2NTUzOGFmZGVlNmVjYS1CT00=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SFRUUC8yLjAgMjAwDQpTdGF0dXM6IDIwMA0KZGF0ZTogRnJpLCAxNiBGZWIgMjAyNCAxMTowNzoyMCBHTVQNCmNvbnRlbnQtdHlwZTogYXBwbGljYXRpb24vamF2YXNjcmlwdDsgY2hhcnNldD11dGYtOA0KYWNjZXNzLWNvbnRyb2wtYWxsb3ctb3JpZ2luOiAqDQpjb250ZW50LWVuY29kaW5nOiBnemlwDQpjYWNoZS1jb250cm9sOiBwdWJsaWMsIG1heC1hZ2U9MzE1MzYwMDANCmxhc3QtbW9kaWZpZWQ6IFNhdCwgMjYgT2N0IDE5ODUgMDg6MTU6MDAgR01UDQpldGFnOiAiYzMzMGMtYXFkVTJOYW1iT29ucnZQbGdQTE5DZTY3WXM4Ig0KdmlhOiAxLjEgZmx5LmlvDQpmbHktcmVxdWVzdC1pZDogMDFIUE5LVFBSOVhYWDI5U0FaNVZFUkNYUzItYm9tDQpjZi1jYWNoZS1zdGF0dXM6IEhJVA0KYWdlOiAxMDY2OTMNCnZhcnk6IEFjY2VwdC1FbmNvZGluZw0Kc3RyaWN0LXRyYW5zcG9ydC1zZWN1cml0eTogbWF4LWFnZT0zMTUzNjAwMDsgaW5jbHVkZVN1YkRvbWFpbnM7IHByZWxvYWQNCngtY29udGVudC10eXBlLW9wdGlvbnM6IG5vc25pZmYNCnNlcnZlcjogY2xvdWRmbGFyZQ0KY2YtcmF5OiA4NTY1NTM4YWZkZWU2ZWNhLUJPTQ0KDQo=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPBody>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>KGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHsKICB0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgPyBmYWN0b3J5KGV4cG9ydHMpIDoKICB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoWydleHBvcnRzJ10sIGZhY3RvcnkpIDoKICAoZ2xvYmFsID0gdHlwZW9mIGdsb2JhbFRoaXMgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsVGhpcyA6IGdsb2JhbCB8fCBzZWxmLCBmYWN0b3J5KGdsb2JhbC5Gb3JtVmlld2VyID0ge30pKTsKfSh0aGlzLCAoZnVuY3Rpb24gKGV4cG9ydHMpIHsgJ3VzZSBzdHJpY3QnOwoKICBmdW5jdGlvbiBjcmVhdGVDb21tb25qc01vZHVsZShmbiwgbW9kdWxlKSB7CiAgCXJldHVybiBtb2R1bGUgPSB7IGV4cG9ydHM6IHt9IH0sIGZuKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMpLCBtb2R1bGUuZXhwb3J0czsKICB9CgogIHZhciBoYXRfMSA9IGNyZWF0ZUNvbW1vbmpzTW9kdWxlKGZ1bmN0aW9uIChtb2R1bGUpIHsKICB2YXIgaGF0ID0gbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoYml0cywgYmFzZSkgewogICAgICBpZiAoIWJhc2UpIGJhc2UgPSAxNjsKICAgICAgaWYgKGJpdHMgPT09IHVuZGVmaW5lZCkgYml0cyA9IDEyODsKICAgICAgaWYgKGJpdHMgPD0gMCkgcmV0dXJuICcwJzsKICAgICAgCiAgICAgIHZhciBkaWdpdHMgPSBNYXRoLmxvZyhNYXRoLnBvdygyLCBiaXRzKSkgLyBNYXRoLmxvZyhiYXNlKTsKICAgICAgZm9yICh2YXIgaSA9IDI7IGRpZ2l0cyA9PT0gSW5maW5pdHk7IGkgKj0gMikgewogICAgICAgICAgZGlnaXRzID0gTWF0aC5sb2coTWF0aC5wb3coMiwgYml0cyAvIGkpKSAvIE1hdGgubG9nKGJhc2UpICogaTsKICAgICAgfQogICAgICAKICAgICAgdmFyIHJlbSA9IGRpZ2l0cyAtIE1hdGguZmxvb3IoZGlnaXRzKTsKICAgICAgCiAgICAgIHZhciByZXMgPSAnJzsKICAgICAgCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgTWF0aC5mbG9vcihkaWdpdHMpOyBpKyspIHsKICAgICAgICAgIHZhciB4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogYmFzZSkudG9TdHJpbmcoYmFzZSk7CiAgICAgICAgICByZXMgPSB4ICsgcmVzOwogICAgICB9CiAgICAgIAogICAgICBpZiAocmVtKSB7CiAgICAgICAgICB2YXIgYiA9IE1hdGgucG93KGJhc2UsIHJlbSk7CiAgICAgICAgICB2YXIgeCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGIpLnRvU3RyaW5nKGJhc2UpOwogICAgICAgICAgcmVzID0geCArIHJlczsKICAgICAgfQogICAgICAKICAgICAgdmFyIHBhcnNlZCA9IHBhcnNlSW50KHJlcywgYmFzZSk7CiAgICAgIGlmIChwYXJzZWQgIT09IEluZmluaXR5ICYmIHBhcnNlZCA+PSBNYXRoLnBvdygyLCBiaXRzKSkgewogICAgICAgICAgcmV0dXJuIGhhdChiaXRzLCBiYXNlKQogICAgICB9CiAgICAgIGVsc2UgcmV0dXJuIHJlczsKICB9OwoKICBoYXQucmFjayA9IGZ1bmN0aW9uIChiaXRzLCBiYXNlLCBleHBhbmRCeSkgewogICAgICB2YXIgZm4gPSBmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgdmFyIGl0ZXJzID0gMDsKICAgICAgICAgIGRvIHsKICAgICAgICAgICAgICBpZiAoaXRlcnMgKysgPiAxMCkgewogICAgICAgICAgICAgICAgICBpZiAoZXhwYW5kQnkpIGJpdHMgKz0gZXhwYW5kQnk7CiAgICAgICAgICAgICAgICAgIGVsc2UgdGhyb3cgbmV3IEVycm9yKCd0b28gbWFueSBJRCBjb2xsaXNpb25zLCB1c2UgbW9yZSBiaXRzJykKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgdmFyIGlkID0gaGF0KGJpdHMsIGJhc2UpOwogICAgICAgICAgfSB3aGlsZSAoT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwoaGF0cywgaWQpKTsKICAgICAgICAgIAogICAgICAgICAgaGF0c1tpZF0gPSBkYXRhOwogICAgICAgICAgcmV0dXJuIGlkOwogICAgICB9OwogICAgICB2YXIgaGF0cyA9IGZuLmhhdHMgPSB7fTsKICAgICAgCiAgICAgIGZuLmdldCA9IGZ1bmN0aW9uIChpZCkgewogICAgICAgICAgcmV0dXJuIGZuLmhhdHNbaWRdOwogICAgICB9OwogICAgICAKICAgICAgZm4uc2V0ID0gZnVuY3Rpb24gKGlkLCB2YWx1ZSkgewogICAgICAgICAgZm4uaGF0c1tpZF0gPSB2YWx1ZTsKICAgICAgICAgIHJldHVybiBmbjsKICAgICAgfTsKICAgICAgCiAgICAgIGZuLmJpdHMgPSBiaXRzIHx8IDEyODsKICAgICAgZm4uYmFzZSA9IGJhc2UgfHwgMTY7CiAgICAgIHJldHVybiBmbjsKICB9OwogIH0pOwoKICAvKioKICAgKiBDcmVhdGUgYSBuZXcgaWQgZ2VuZXJhdG9yIC8gY2FjaGUgaW5zdGFuY2UuCiAgICoKICAgKiBZb3UgbWF5IG9wdGlvbmFsbHkgcHJvdmlkZSBhIHNlZWQgdGhhdCBpcyB1c2VkIGludGVybmFsbHkuCiAgICoKICAgKiBAcGFyYW0ge1NlZWR9IHNlZWQKICAgKi8KCiAgZnVuY3Rpb24gSWRzKHNlZWQpIHsKICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBJZHMpKSB7CiAgICAgIHJldHVybiBuZXcgSWRzKHNlZWQpOwogICAgfQoKICAgIHNlZWQgPSBzZWVkIHx8IFsxMjgsIDM2LCAxXTsKICAgIHRoaXMuX3NlZWQgPSBzZWVkLmxlbmd0aCA/IGhhdF8xLnJhY2soc2VlZFswXSwgc2VlZFsxXSwgc2VlZFsyXSkgOiBzZWVkOwogIH0KICAvKioKICAgKiBHZW5lcmF0ZSBhIG5leHQgaWQuCiAgICoKICAgKiBAcGFyYW0ge09iamVjdH0gW2VsZW1lbnRdIGVsZW1lbnQgdG8gYmluZCB0aGUgaWQgdG8KICAgKgogICAqIEByZXR1cm4ge1N0cmluZ30gaWQKICAgKi8KCiAgSWRzLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgIHJldHVybiB0aGlzLl9zZWVkKGVsZW1lbnQgfHwgdHJ1ZSk7CiAgfTsKICAvKioKICAgKiBHZW5lcmF0ZSBhIG5leHQgaWQgd2l0aCBhIGdpdmVuIHByZWZpeC4KICAgKgogICAqIEBwYXJhbSB7T2JqZWN0fSBbZWxlbWVudF0gZWxlbWVudCB0byBiaW5kIHRoZSBpZCB0bwogICAqCiAgICogQHJldHVybiB7U3RyaW5nfSBpZAogICAqLwoKCiAgSWRzLnByb3RvdHlwZS5uZXh0UHJlZml4ZWQgPSBmdW5jdGlvbiAocHJlZml4LCBlbGVtZW50KSB7CiAgICB2YXIgaWQ7CgogICAgZG8gewogICAgICBpZCA9IHByZWZpeCArIHRoaXMubmV4dCh0cnVlKTsKICAgIH0gd2hpbGUgKHRoaXMuYXNzaWduZWQoaWQpKTsgLy8gY2xhaW0ge3ByZWZpeH17cmFuZG9tfQoKCiAgICB0aGlzLmNsYWltKGlkLCBlbGVtZW50KTsgLy8gcmV0dXJuCgogICAgcmV0dXJuIGlkOwogIH07CiAgLyoqCiAgICogTWFudWFsbHkgY2xhaW0gYW4gZXhpc3RpbmcgaWQuCiAgICoKICAgKiBAcGFyYW0ge1N0cmluZ30gaWQKICAgKiBAcGFyYW0ge1N0cmluZ30gW2VsZW1lbnRdIGVsZW1lbnQgdGhlIGlkIGlzIGNsYWltZWQgYnkKICAgKi8KCgogIElkcy5wcm90b3R5cGUuY2xhaW0gPSBmdW5jdGlvbiAoaWQsIGVsZW1lbnQpIHsKICAgIHRoaXMuX3NlZWQuc2V0KGlkLCBlbGVtZW50IHx8IHRydWUpOwogIH07CiAgLyoqCiAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiBpZCBoYXMgYWxyZWFkeSBiZWVuIGFzc2lnbmVkLgogICAqCiAgICogQHBhcmFtICB7U3RyaW5nfSBpZAogICAqIEByZXR1cm4ge0Jvb2xlYW59CiAgICovCgoKICBJZHMucHJvdG90eXBlLmFzc2lnbmVkID0gZnVuY3Rpb24gKGlkKSB7CiAgICByZXR1cm4gdGhpcy5fc2VlZC5nZXQoaWQpIHx8IGZhbHNlOwogIH07CiAgLyoqCiAgICogVW5jbGFpbSBhbiBpZC4KICAgKgogICAqIEBwYXJhbSAge1N0cmluZ30gaWQgdGhlIGlkIHRvIHVuY2xhaW0KICAgKi8KCgogIElkcy5wcm90b3R5cGUudW5jbGFpbSA9IGZ1bmN0aW9uIChpZCkgewogICAgZGVsZXRlIHRoaXMuX3NlZWQuaGF0c1tpZF07CiAgfTsKICAvKioKICAgKiBDbGVhciBhbGwgY2xhaW1lZCBpZHMuCiAgICovCgoKICBJZHMucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkgewogICAgdmFyIGhhdHMgPSB0aGlzLl9zZWVkLmhhdHMsCiAgICAgICAgaWQ7CgogICAgZm9yIChpZCBpbiBoYXRzKSB7CiAgICAgIHRoaXMudW5jbGFpbShpZCk7CiAgICB9CiAgfTsKCiAgLyoqCiAgICogRmxhdHRlbiBhcnJheSwgb25lIGxldmVsIGRlZXAuCiAgICoKICAgKiBAcGFyYW0ge0FycmF5PD8+fSBhcnIKICAgKgogICAqIEByZXR1cm4ge0FycmF5PD8+fQogICAqLwoKICBjb25zdCBuYXRpdmVUb1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7CiAgY29uc3QgbmF0aXZlSGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5OwoKICBmdW5jdGlvbiBpc1VuZGVmaW5lZCQxKG9iaikgewogICAgcmV0dXJuIG9iaiA9PT0gdW5kZWZpbmVkOwogIH0KCiAgZnVuY3Rpb24gaXNEZWZpbmVkKG9iaikgewogICAgcmV0dXJuIG9iaiAhPT0gdW5kZWZpbmVkOwogIH0KCiAgZnVuY3Rpb24gaXNOaWwob2JqKSB7CiAgICByZXR1cm4gb2JqID09IG51bGw7CiAgfQoKICBmdW5jdGlvbiBpc0FycmF5JDIob2JqKSB7CiAgICByZXR1cm4gbmF0aXZlVG9TdHJpbmcuY2FsbChvYmopID09PSAnW29iamVjdCBBcnJheV0nOwogIH0KCiAgZnVuY3Rpb24gaXNPYmplY3Qob2JqKSB7CiAgICByZXR1cm4gbmF0aXZlVG9TdHJpbmcuY2FsbChvYmopID09PSAnW29iamVjdCBPYmplY3RdJzsKICB9CgogIGZ1bmN0aW9uIGlzTnVtYmVyJDIob2JqKSB7CiAgICByZXR1cm4gbmF0aXZlVG9TdHJpbmcuY2FsbChvYmopID09PSAnW29iamVjdCBOdW1iZXJdJzsKICB9CgogIGZ1bmN0aW9uIGlzRnVuY3Rpb24ob2JqKSB7CiAgICBjb25zdCB0YWcgPSBuYXRpdmVUb1N0cmluZy5jYWxsKG9iaik7CgogICAgcmV0dXJuICgKICAgICAgdGFnID09PSAnW29iamVjdCBGdW5jdGlvbl0nIHx8CiAgICAgIHRhZyA9PT0gJ1tvYmplY3QgQXN5bmNGdW5jdGlvbl0nIHx8CiAgICAgIHRhZyA9PT0gJ1tvYmplY3QgR2VuZXJhdG9yRnVuY3Rpb25dJyB8fAogICAgICB0YWcgPT09ICdbb2JqZWN0IEFzeW5jR2VuZXJhdG9yRnVuY3Rpb25dJyB8fAogICAgICB0YWcgPT09ICdbb2JqZWN0IFByb3h5XScKICAgICk7CiAgfQoKICBmdW5jdGlvbiBpc1N0cmluZyQyKG9iaikgewogICAgcmV0dXJuIG5hdGl2ZVRvU3RyaW5nLmNhbGwob2JqKSA9PT0gJ1tvYmplY3QgU3RyaW5nXSc7CiAgfQoKICAvKioKICAgKiBSZXR1cm4gdHJ1ZSwgaWYgdGFyZ2V0IG93bnMgYSBwcm9wZXJ0eSB3aXRoIHRoZSBnaXZlbiBrZXkuCiAgICoKICAgKiBAcGFyYW0ge09iamVjdH0gdGFyZ2V0CiAgICogQHBhcmFtIHtTdHJpbmd9IGtleQogICAqCiAgICogQHJldHVybiB7Qm9vbGVhbn0KICAgKi8KICBmdW5jdGlvbiBoYXModGFyZ2V0LCBrZXkpIHsKICAgIHJldHVybiBuYXRpdmVIYXNPd25Qcm9wZXJ0eS5jYWxsKHRhcmdldCwga2V5KTsKICB9CgoKICAvKioKICAgKiBJdGVyYXRlIG92ZXIgY29sbGVjdGlvbjsgcmV0dXJuaW5nIHNvbWV0aGluZwogICAqIChub24tdW5kZWZpbmVkKSB3aWxsIHN0b3AgaXRlcmF0aW9uLgogICAqCiAgICogQHBhcmFtICB7QXJyYXl8T2JqZWN0fSBjb2xsZWN0aW9uCiAgICogQHBhcmFtICB7RnVuY3Rpb259IGl0ZXJhdG9yCiAgICoKICAgKiBAcmV0dXJuIHtPYmplY3R9IHJldHVybiByZXN1bHQgdGhhdCBzdG9wcGVkIHRoZSBpdGVyYXRpb24KICAgKi8KICBmdW5jdGlvbiBmb3JFYWNoKGNvbGxlY3Rpb24sIGl0ZXJhdG9yKSB7CgogICAgbGV0IHZhbCwKICAgICAgICByZXN1bHQ7CgogICAgaWYgKGlzVW5kZWZpbmVkJDEoY29sbGVjdGlvbikpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIGNvbnN0IGNvbnZlcnRLZXkgPSBpc0FycmF5JDIoY29sbGVjdGlvbikgPyB0b051bSA6IGlkZW50aXR5OwoKICAgIGZvciAobGV0IGtleSBpbiBjb2xsZWN0aW9uKSB7CgogICAgICBpZiAoaGFzKGNvbGxlY3Rpb24sIGtleSkpIHsKICAgICAgICB2YWwgPSBjb2xsZWN0aW9uW2tleV07CgogICAgICAgIHJlc3VsdCA9IGl0ZXJhdG9yKHZhbCwgY29udmVydEtleShrZXkpKTsKCiAgICAgICAgaWYgKHJlc3VsdCA9PT0gZmFsc2UpIHsKICAgICAgICAgIHJldHVybiB2YWw7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQoKCiAgZnVuY3Rpb24gaWRlbnRpdHkoYXJnKSB7CiAgICByZXR1cm4gYXJnOwogIH0KCiAgZnVuY3Rpb24gdG9OdW0oYXJnKSB7CiAgICByZXR1cm4gTnVtYmVyKGFyZyk7CiAgfQoKICAvKioKICAgKiBCaW5kIGZ1bmN0aW9uIGFnYWluc3QgdGFyZ2V0IDx0aGlzPi4KICAgKgogICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBmbgogICAqIEBwYXJhbSAge09iamVjdH0gICB0YXJnZXQKICAgKgogICAqIEByZXR1cm4ge0Z1bmN0aW9ufSBib3VuZCBmdW5jdGlvbgogICAqLwogIGZ1bmN0aW9uIGJpbmQoZm4sIHRhcmdldCkgewogICAgcmV0dXJuIGZuLmJpbmQodGFyZ2V0KTsKICB9CgogIC8qKgogICAqIENvbnZlbmllbmNlIHdyYXBwZXIgZm9yIGBPYmplY3QuYXNzaWduYC4KICAgKgogICAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXQKICAgKiBAcGFyYW0gey4uLk9iamVjdH0gb3RoZXJzCiAgICoKICAgKiBAcmV0dXJuIHtPYmplY3R9IHRoZSB0YXJnZXQKICAgKi8KICBmdW5jdGlvbiBhc3NpZ24odGFyZ2V0LCAuLi5vdGhlcnMpIHsKICAgIHJldHVybiBPYmplY3QuYXNzaWduKHRhcmdldCwgLi4ub3RoZXJzKTsKICB9CgogIC8qKgogICAqIFNldHMgYSBuZXN0ZWQgcHJvcGVydHkgb2YgYSBnaXZlbiBvYmplY3QgdG8gdGhlIHNwZWNpZmllZCB2YWx1ZS4KICAgKgogICAqIFRoaXMgbXV0YXRlcyB0aGUgb2JqZWN0IGFuZCByZXR1cm5zIGl0LgogICAqCiAgICogQHBhcmFtIHtPYmplY3R9IHRhcmdldCBUaGUgdGFyZ2V0IG9mIHRoZSBzZXQgb3BlcmF0aW9uLgogICAqIEBwYXJhbSB7KHN0cmluZ3xudW1iZXIpW119IHBhdGggVGhlIHBhdGggdG8gdGhlIG5lc3RlZCB2YWx1ZS4KICAgKiBAcGFyYW0ge2FueX0gdmFsdWUgVGhlIHZhbHVlIHRvIHNldC4KICAgKi8KICBmdW5jdGlvbiBzZXQodGFyZ2V0LCBwYXRoLCB2YWx1ZSkgewoKICAgIGxldCBjdXJyZW50VGFyZ2V0ID0gdGFyZ2V0OwoKICAgIGZvckVhY2gocGF0aCwgZnVuY3Rpb24oa2V5LCBpZHgpIHsKCiAgICAgIGlmICh0eXBlb2Yga2V5ICE9PSAnbnVtYmVyJyAmJiB0eXBlb2Yga2V5ICE9PSAnc3RyaW5nJykgewogICAgICAgIHRocm93IG5ldyBFcnJvcignaWxsZWdhbCBrZXkgdHlwZTogJyArIHR5cGVvZiBrZXkgKyAnLiBLZXkgc2hvdWxkIGJlIG9mIHR5cGUgbnVtYmVyIG9yIHN0cmluZy4nKTsKICAgICAgfQoKICAgICAgaWYgKGtleSA9PT0gJ2NvbnN0cnVjdG9yJykgewogICAgICAgIHRocm93IG5ldyBFcnJvcignaWxsZWdhbCBrZXk6IGNvbnN0cnVjdG9yJyk7CiAgICAgIH0KCiAgICAgIGlmIChrZXkgPT09ICdfX3Byb3RvX18nKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdpbGxlZ2FsIGtleTogX19wcm90b19fJyk7CiAgICAgIH0KCiAgICAgIGxldCBuZXh0S2V5ID0gcGF0aFtpZHggKyAxXTsKICAgICAgbGV0IG5leHRUYXJnZXQgPSBjdXJyZW50VGFyZ2V0W2tleV07CgogICAgICBpZiAoaXNEZWZpbmVkKG5leHRLZXkpICYmIGlzTmlsKG5leHRUYXJnZXQpKSB7CiAgICAgICAgbmV4dFRhcmdldCA9IGN1cnJlbnRUYXJnZXRba2V5XSA9IGlzTmFOKCtuZXh0S2V5KSA/IHt9IDogW107CiAgICAgIH0KCiAgICAgIGlmIChpc1VuZGVmaW5lZCQxKG5leHRLZXkpKSB7CiAgICAgICAgaWYgKGlzVW5kZWZpbmVkJDEodmFsdWUpKSB7CiAgICAgICAgICBkZWxldGUgY3VycmVudFRhcmdldFtrZXldOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjdXJyZW50VGFyZ2V0W2tleV0gPSB2YWx1ZTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY3VycmVudFRhcmdldCA9IG5leHRUYXJnZXQ7CiAgICAgIH0KICAgIH0pOwoKICAgIHJldHVybiB0YXJnZXQ7CiAgfQoKCiAgLyoqCiAgICogR2V0cyBhIG5lc3RlZCBwcm9wZXJ0eSBvZiBhIGdpdmVuIG9iamVjdC4KICAgKgogICAqIEBwYXJhbSB7T2JqZWN0fSB0YXJnZXQgVGhlIHRhcmdldCBvZiB0aGUgZ2V0IG9wZXJhdGlvbi4KICAgKiBAcGFyYW0geyhzdHJpbmd8bnVtYmVyKVtdfSBwYXRoIFRoZSBwYXRoIHRvIHRoZSBuZXN0ZWQgdmFsdWUuCiAgICogQHBhcmFtIHthbnl9IFtkZWZhdWx0VmFsdWVdIFRoZSB2YWx1ZSB0byByZXR1cm4gaWYgbm8gdmFsdWUgZXhpc3RzLgogICAqLwogIGZ1bmN0aW9uIGdldCh0YXJnZXQsIHBhdGgsIGRlZmF1bHRWYWx1ZSkgewoKICAgIGxldCBjdXJyZW50VGFyZ2V0ID0gdGFyZ2V0OwoKICAgIGZvckVhY2gocGF0aCwgZnVuY3Rpb24oa2V5KSB7CgogICAgICAvLyBhY2Nlc3NpbmcgbmlsIHByb3BlcnR5IHlpZWxkcyA8dW5kZWZpbmVkPgogICAgICBpZiAoaXNOaWwoY3VycmVudFRhcmdldCkpIHsKICAgICAgICBjdXJyZW50VGFyZ2V0ID0gdW5kZWZpbmVkOwoKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIGN1cnJlbnRUYXJnZXQgPSBjdXJyZW50VGFyZ2V0W2tleV07CiAgICB9KTsKCiAgICByZXR1cm4gaXNVbmRlZmluZWQkMShjdXJyZW50VGFyZ2V0KSA/IGRlZmF1bHRWYWx1ZSA6IGN1cnJlbnRUYXJnZXQ7CiAgfQoKICAvLyB0aGVzZSBhcmVuJ3QgcmVhbGx5IHByaXZhdGUsIGJ1dCBub3IgYXJlIHRoZXkgcmVhbGx5IHVzZWZ1bCB0byBkb2N1bWVudAoKICAvKioKICAgKiBAcHJpdmF0ZQogICAqLwogIGNsYXNzIEx1eG9uRXJyb3IgZXh0ZW5kcyBFcnJvciB7fQoKICAvKioKICAgKiBAcHJpdmF0ZQogICAqLwogIGNsYXNzIEludmFsaWREYXRlVGltZUVycm9yIGV4dGVuZHMgTHV4b25FcnJvciB7CiAgICBjb25zdHJ1Y3RvcihyZWFzb24pIHsKICAgICAgc3VwZXIoYEludmFsaWQgRGF0ZVRpbWU6ICR7cmVhc29uLnRvTWVzc2FnZSgpfWApOwogICAgfQogIH0KCiAgLyoqCiAgICogQHByaXZhdGUKICAgKi8KICBjbGFzcyBJbnZhbGlkSW50ZXJ2YWxFcnJvciBleHRlbmRzIEx1eG9uRXJyb3IgewogICAgY29uc3RydWN0b3IocmVhc29uKSB7CiAgICAgIHN1cGVyKGBJbnZhbGlkIEludGVydmFsOiAke3JlYXNvbi50b01lc3NhZ2UoKX1gKTsKICAgIH0KICB9CgogIC8qKgogICAqIEBwcml2YXRlCiAgICovCiAgY2xhc3MgSW52YWxpZER1cmF0aW9uRXJyb3IgZXh0ZW5kcyBMdXhvbkVycm9yIHsKICAgIGNvbnN0cnVjdG9yKHJlYXNvbikgewogICAgICBzdXBlcihgSW52YWxpZCBEdXJhdGlvbjogJHtyZWFzb24udG9NZXNzYWdlKCl9YCk7CiAgICB9CiAgfQoKICAvKioKICAgKiBAcHJpdmF0ZQogICAqLwogIGNsYXNzIENvbmZsaWN0aW5nU3BlY2lmaWNhdGlvbkVycm9yIGV4dGVuZHMgTHV4b25FcnJvciB7fQoKICAvKioKICAgKiBAcHJpdmF0ZQogICAqLwogIGNsYXNzIEludmFsaWRVbml0RXJyb3IgZXh0ZW5kcyBMdXhvbkVycm9yIHsKICAgIGNvbnN0cnVjdG9yKHVuaXQpIHsKICAgICAgc3VwZXIoYEludmFsaWQgdW5pdCAke3VuaXR9YCk7CiAgICB9CiAgfQoKICAvKioKICAgKiBAcHJpdmF0ZQogICAqLwogIGNsYXNzIEludmFsaWRBcmd1bWVudEVycm9yIGV4dGVuZHMgTHV4b25FcnJvciB7fQoKICAvKioKICAgKiBAcHJpdmF0ZQogICAqLwogIGNsYXNzIFpvbmVJc0Fic3RyYWN0RXJyb3IgZXh0ZW5kcyBMdXhvbkVycm9yIHsKICAgIGNvbnN0cnVjdG9yKCkgewogICAgICBzdXBlcigiWm9uZSBpcyBhbiBhYnN0cmFjdCBjbGFzcyIpOwogICAgfQogIH0KCiAgLyoqCiAgICogQHByaXZhdGUKICAgKi8KCiAgY29uc3QgbiQzID0gIm51bWVyaWMiLAogICAgcyQyID0gInNob3J0IiwKICAgIGwkMyA9ICJsb25nIjsKCiAgY29uc3QgREFURV9TSE9SVCA9IHsKICAgIHllYXI6IG4kMywKICAgIG1vbnRoOiBuJDMsCiAgICBkYXk6IG4kMywKICB9OwoKICBjb25zdCBEQVRFX01FRCA9IHsKICAgIHllYXI6IG4kMywKICAgIG1vbnRoOiBzJDIsCiAgICBkYXk6IG4kMywKICB9OwoKICBjb25zdCBEQVRFX01FRF9XSVRIX1dFRUtEQVkgPSB7CiAgICB5ZWFyOiBuJDMsCiAgICBtb250aDogcyQyLAogICAgZGF5OiBuJDMsCiAgICB3ZWVrZGF5OiBzJDIsCiAgfTsKCiAgY29uc3QgREFURV9GVUxMID0gewogICAgeWVhcjogbiQzLAogICAgbW9udGg6IGwkMywKICAgIGRheTogbiQzLAogIH07CgogIGNvbnN0IERBVEVfSFVHRSA9IHsKICAgIHllYXI6IG4kMywKICAgIG1vbnRoOiBsJDMsCiAgICBkYXk6IG4kMywKICAgIHdlZWtkYXk6IGwkMywKICB9OwoKICBjb25zdCBUSU1FX1NJTVBMRSA9IHsKICAgIGhvdXI6IG4kMywKICAgIG1pbnV0ZTogbiQzLAogIH07CgogIGNvbnN0IFRJTUVfV0lUSF9TRUNPTkRTID0gewogICAgaG91cjogbiQzLAogICAgbWludXRlOiBuJDMsCiAgICBzZWNvbmQ6IG4kMywKICB9OwoKICBjb25zdCBUSU1FX1dJVEhfU0hPUlRfT0ZGU0VUID0gewogICAgaG91cjogbiQzLAogICAgbWludXRlOiBuJDMsCiAgICBzZWNvbmQ6IG4kMywKICAgIHRpbWVab25lTmFtZTogcyQyLAogIH07CgogIGNvbnN0IFRJTUVfV0lUSF9MT05HX09GRlNFVCA9IHsKICAgIGhvdXI6IG4kMywKICAgIG1pbnV0ZTogbiQzLAogICAgc2Vjb25kOiBuJDMsCiAgICB0aW1lWm9uZU5hbWU6IGwkMywKICB9OwoKICBjb25zdCBUSU1FXzI0X1NJTVBMRSA9IHsKICAgIGhvdXI6IG4kMywKICAgIG1pbnV0ZTogbiQzLAogICAgaG91ckN5Y2xlOiAiaDIzIiwKICB9OwoKICBjb25zdCBUSU1FXzI0X1dJVEhfU0VDT05EUyA9IHsKICAgIGhvdXI6IG4kMywKICAgIG1pbnV0ZTogbiQzLAogICAgc2Vjb25kOiBuJDMsCiAgICBob3VyQ3ljbGU6ICJoMjMiLAogIH07CgogIGNvbnN0IFRJTUVfMjRfV0lUSF9TSE9SVF9PRkZTRVQgPSB7CiAgICBob3VyOiBuJDMsCiAgICBtaW51dGU6IG4kMywKICAgIHNlY29uZDogbiQzLAogICAgaG91ckN5Y2xlOiAiaDIzIiwKICAgIHRpbWVab25lTmFtZTogcyQyLAogIH07CgogIGNvbnN0IFRJTUVfMjRfV0lUSF9MT05HX09GRlNFVCA9IHsKICAgIGhvdXI6IG4kMywKICAgIG1pbnV0ZTogbiQzLAogICAgc2Vjb25kOiBuJDMsCiAgICBob3VyQ3ljbGU6ICJoMjMiLAogICAgdGltZVpvbmVOYW1lOiBsJDMsCiAgfTsKCiAgY29uc3QgREFURVRJTUVfU0hPUlQgPSB7CiAgICB5ZWFyOiBuJDMsCiAgICBtb250aDogbiQzLAogICAgZGF5OiBuJDMsCiAgICBob3VyOiBuJDMsCiAgICBtaW51dGU6IG4kMywKICB9OwoKICBjb25zdCBEQVRFVElNRV9TSE9SVF9XSVRIX1NFQ09ORFMgPSB7CiAgICB5ZWFyOiBuJDMsCiAgICBtb250aDogbiQzLAogICAgZGF5OiBuJDMsCiAgICBob3VyOiBuJDMsCiAgICBtaW51dGU6IG4kMywKICAgIHNlY29uZDogbiQzLAogIH07CgogIGNvbnN0IERBVEVUSU1FX01FRCA9IHsKICAgIHllYXI6IG4kMywKICAgIG1vbnRoOiBzJDIsCiAgICBkYXk6IG4kMywKICAgIGhvdXI6IG4kMywKICAgIG1pbnV0ZTogbiQzLAogIH07CgogIGNvbnN0IERBVEVUSU1FX01FRF9XSVRIX1NFQ09ORFMgPSB7CiAgICB5ZWFyOiBuJDMsCiAgICBtb250aDogcyQyLAogICAgZGF5OiBuJDMsCiAgICBob3VyOiBuJDMsCiAgICBtaW51dGU6IG4kMywKICAgIHNlY29uZDogbiQzLAogIH07CgogIGNvbnN0IERBVEVUSU1FX01FRF9XSVRIX1dFRUtEQVkgPSB7CiAgICB5ZWFyOiBuJDMsCiAgICBtb250aDogcyQyLAogICAgZGF5OiBuJDMsCiAgICB3ZWVrZGF5OiBzJDIsCiAgICBob3VyOiBuJDMsCiAgICBtaW51dGU6IG4kMywKICB9OwoKICBjb25zdCBEQVRFVElNRV9GVUxMID0gewogICAgeWVhcjogbiQzLAogICAgbW9udGg6IGwkMywKICAgIGRheTogbiQzLAogICAgaG91cjogbiQzLAogICAgbWludXRlOiBuJDMsCiAgICB0aW1lWm9uZU5hbWU6IHMkMiwKICB9OwoKICBjb25zdCBEQVRFVElNRV9GVUxMX1dJVEhfU0VDT05EUyA9IHsKICAgIHllYXI6IG4kMywKICAgIG1vbnRoOiBsJDMsCiAgICBkYXk6IG4kMywKICAgIGhvdXI6IG4kMywKICAgIG1pbnV0ZTogbiQzLAogICAgc2Vjb25kOiBuJDMsCiAgICB0aW1lWm9uZU5hbWU6IHMkMiwKICB9OwoKICBjb25zdCBEQVRFVElNRV9IVUdFID0gewogICAgeWVhcjogbiQzLAogICAgbW9udGg6IGwkMywKICAgIGRheTogbiQzLAogICAgd2Vla2RheTogbCQzLAogICAgaG91cjogbiQzLAogICAgbWludXRlOiBuJDMsCiAgICB0aW1lWm9uZU5hbWU6IGwkMywKICB9OwoKICBjb25zdCBEQVRFVElNRV9IVUdFX1dJVEhfU0VDT05EUyA9IHsKICAgIHllYXI6IG4kMywKICAgIG1vbnRoOiBsJDMsCiAgICBkYXk6IG4kMywKICAgIHdlZWtkYXk6IGwkMywKICAgIGhvdXI6IG4kMywKICAgIG1pbnV0ZTogbiQzLAogICAgc2Vjb25kOiBuJDMsCiAgICB0aW1lWm9uZU5hbWU6IGwkMywKICB9OwoKICAvKgogICAgVGhpcyBpcyBqdXN0IGEganVuayBkcmF3ZXIsIGNvbnRhaW5pbmcgYW55dGhpbmcgdXNlZCBhY3Jvc3MgbXVsdGlwbGUgY2xhc3Nlcy4KICAgIEJlY2F1c2UgTHV4b24gaXMgc21hbGwoaXNoKSwgdGhpcyBzaG91bGQgc3RheSBzbWFsbCBhbmQgd2Ugd29uJ3Qgd29ycnkgYWJvdXQgc3BsaXR0aW5nCiAgICBpdCB1cCBpbnRvLCBzYXksIHBhcnNpbmdVdGlsLmpzIGFuZCBiYXNpY1V0aWwuanMgYW5kIHNvIG9uLiBCdXQgdGhleSBhcmUgZGl2aWRlZCB1cCBieSBmZWF0dXJlIGFyZWEuCiAgKi8KCiAgLyoqCiAgICogQHByaXZhdGUKICAgKi8KCiAgLy8gVFlQRVMKCiAgZnVuY3Rpb24gaXNVbmRlZmluZWQobykgewogICAgcmV0dXJuIHR5cGVvZiBvID09PSAidW5kZWZpbmVkIjsKICB9CgogIGZ1bmN0aW9uIGlzTnVtYmVyJDEobykgewogICAgcmV0dXJuIHR5cGVvZiBvID09PSAibnVtYmVyIjsKICB9CgogIGZ1bmN0aW9uIGlzSW50ZWdlcihvKSB7CiAgICByZXR1cm4gdHlwZW9mIG8gPT09ICJudW1iZXIiICYmIG8gJSAxID09PSAwOwogIH0KCiAgZnVuY3Rpb24gaXNTdHJpbmckMShvKSB7CiAgICByZXR1cm4gdHlwZW9mIG8gPT09ICJzdHJpbmciOwogIH0KCiAgZnVuY3Rpb24gaXNEYXRlKG8pIHsKICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykgPT09ICJbb2JqZWN0IERhdGVdIjsKICB9CgogIC8vIENBUEFCSUxJVElFUwoKICBmdW5jdGlvbiBoYXNSZWxhdGl2ZSgpIHsKICAgIHRyeSB7CiAgICAgIHJldHVybiB0eXBlb2YgSW50bCAhPT0gInVuZGVmaW5lZCIgJiYgISFJbnRsLlJlbGF0aXZlVGltZUZvcm1hdDsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogIH0KCiAgLy8gT0JKRUNUUyBBTkQgQVJSQVlTCgogIGZ1bmN0aW9uIG1heWJlQXJyYXkodGhpbmcpIHsKICAgIHJldHVybiBBcnJheS5pc0FycmF5KHRoaW5nKSA/IHRoaW5nIDogW3RoaW5nXTsKICB9CgogIGZ1bmN0aW9uIGJlc3RCeShhcnIsIGJ5LCBjb21wYXJlKSB7CiAgICBpZiAoYXJyLmxlbmd0aCA9PT0gMCkgewogICAgICByZXR1cm4gdW5kZWZpbmVkOwogICAgfQogICAgcmV0dXJuIGFyci5yZWR1Y2UoKGJlc3QsIG5leHQpID0+IHsKICAgICAgY29uc3QgcGFpciA9IFtieShuZXh0KSwgbmV4dF07CiAgICAgIGlmICghYmVzdCkgewogICAgICAgIHJldHVybiBwYWlyOwogICAgICB9IGVsc2UgaWYgKGNvbXBhcmUoYmVzdFswXSwgcGFpclswXSkgPT09IGJlc3RbMF0pIHsKICAgICAgICByZXR1cm4gYmVzdDsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gcGFpcjsKICAgICAgfQogICAgfSwgbnVsbClbMV07CiAgfQoKICBmdW5jdGlvbiBwaWNrKG9iaiwga2V5cykgewogICAgcmV0dXJuIGtleXMucmVkdWNlKChhLCBrKSA9PiB7CiAgICAgIGFba10gPSBvYmpba107CiAgICAgIHJldHVybiBhOwogICAgfSwge30pOwogIH0KCiAgZnVuY3Rpb24gaGFzT3duUHJvcGVydHkob2JqLCBwcm9wKSB7CiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7CiAgfQoKICAvLyBOVU1CRVJTIEFORCBTVFJJTkdTCgogIGZ1bmN0aW9uIGludGVnZXJCZXR3ZWVuKHRoaW5nLCBib3R0b20sIHRvcCkgewogICAgcmV0dXJuIGlzSW50ZWdlcih0aGluZykgJiYgdGhpbmcgPj0gYm90dG9tICYmIHRoaW5nIDw9IHRvcDsKICB9CgogIC8vIHggJSBuIGJ1dCB0YWtlcyB0aGUgc2lnbiBvZiBuIGluc3RlYWQgb2YgeAogIGZ1bmN0aW9uIGZsb29yTW9kKHgsIG4pIHsKICAgIHJldHVybiB4IC0gbiAqIE1hdGguZmxvb3IoeCAvIG4pOwogIH0KCiAgZnVuY3Rpb24gcGFkU3RhcnQoaW5wdXQsIG4gPSAyKSB7CiAgICBjb25zdCBpc05lZyA9IGlucHV0IDwgMDsKICAgIGxldCBwYWRkZWQ7CiAgICBpZiAoaXNOZWcpIHsKICAgICAgcGFkZGVkID0gIi0iICsgKCIiICsgLWlucHV0KS5wYWRTdGFydChuLCAiMCIpOwogICAgfSBlbHNlIHsKICAgICAgcGFkZGVkID0gKCIiICsgaW5wdXQpLnBhZFN0YXJ0KG4sICIwIik7CiAgICB9CiAgICByZXR1cm4gcGFkZGVkOwogIH0KCiAgZnVuY3Rpb24gcGFyc2VJbnRlZ2VyKHN0cmluZykgewogICAgaWYgKGlzVW5kZWZpbmVkKHN0cmluZykgfHwgc3RyaW5nID09PSBudWxsIHx8IHN0cmluZyA9PT0gIiIpIHsKICAgICAgcmV0dXJuIHVuZGVmaW5lZDsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBwYXJzZUludChzdHJpbmcsIDEwKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIHBhcnNlRmxvYXRpbmcoc3RyaW5nKSB7CiAgICBpZiAoaXNVbmRlZmluZWQoc3RyaW5nKSB8fCBzdHJpbmcgPT09IG51bGwgfHwgc3RyaW5nID09PSAiIikgewogICAgICByZXR1cm4gdW5kZWZpbmVkOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHBhcnNlRmxvYXQoc3RyaW5nKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIHBhcnNlTWlsbGlzKGZyYWN0aW9uKSB7CiAgICAvLyBSZXR1cm4gdW5kZWZpbmVkIChpbnN0ZWFkIG9mIDApIGluIHRoZXNlIGNhc2VzLCB3aGVyZSBmcmFjdGlvbiBpcyBub3Qgc2V0CiAgICBpZiAoaXNVbmRlZmluZWQoZnJhY3Rpb24pIHx8IGZyYWN0aW9uID09PSBudWxsIHx8IGZyYWN0aW9uID09PSAiIikgewogICAgICByZXR1cm4gdW5kZWZpbmVkOwogICAgfSBlbHNlIHsKICAgICAgY29uc3QgZiA9IHBhcnNlRmxvYXQoIjAuIiArIGZyYWN0aW9uKSAqIDEwMDA7CiAgICAgIHJldHVybiBNYXRoLmZsb29yKGYpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gcm91bmRUbyhudW1iZXIsIGRpZ2l0cywgdG93YXJkWmVybyA9IGZhbHNlKSB7CiAgICBjb25zdCBmYWN0b3IgPSAxMCAqKiBkaWdpdHMsCiAgICAgIHJvdW5kZXIgPSB0b3dhcmRaZXJvID8gTWF0aC50cnVuYyA6IE1hdGgucm91bmQ7CiAgICByZXR1cm4gcm91bmRlcihudW1iZXIgKiBmYWN0b3IpIC8gZmFjdG9yOwogIH0KCiAgLy8gREFURSBCQVNJQ1MKCiAgZnVuY3Rpb24gaXNMZWFwWWVhcih5ZWFyKSB7CiAgICByZXR1cm4geWVhciAlIDQgPT09IDAgJiYgKHllYXIgJSAxMDAgIT09IDAgfHwgeWVhciAlIDQwMCA9PT0gMCk7CiAgfQoKICBmdW5jdGlvbiBkYXlzSW5ZZWFyKHllYXIpIHsKICAgIHJldHVybiBpc0xlYXBZZWFyKHllYXIpID8gMzY2IDogMzY1OwogIH0KCiAgZnVuY3Rpb24gZGF5c0luTW9udGgoeWVhciwgbW9udGgpIHsKICAgIGNvbnN0IG1vZE1vbnRoID0gZmxvb3JNb2QobW9udGggLSAxLCAxMikgKyAxLAogICAgICBtb2RZZWFyID0geWVhciArIChtb250aCAtIG1vZE1vbnRoKSAvIDEyOwoKICAgIGlmIChtb2RNb250aCA9PT0gMikgewogICAgICByZXR1cm4gaXNMZWFwWWVhcihtb2RZZWFyKSA/IDI5IDogMjg7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gWzMxLCBudWxsLCAzMSwgMzAsIDMxLCAzMCwgMzEsIDMxLCAzMCwgMzEsIDMwLCAzMV1bbW9kTW9udGggLSAxXTsKICAgIH0KICB9CgogIC8vIGNvdmVydCBhIGNhbGVuZGFyIG9iamVjdCB0byBhIGxvY2FsIHRpbWVzdGFtcCAoZXBvY2gsIGJ1dCB3aXRoIHRoZSBvZmZzZXQgYmFrZWQgaW4pCiAgZnVuY3Rpb24gb2JqVG9Mb2NhbFRTKG9iaikgewogICAgbGV0IGQgPSBEYXRlLlVUQygKICAgICAgb2JqLnllYXIsCiAgICAgIG9iai5tb250aCAtIDEsCiAgICAgIG9iai5kYXksCiAgICAgIG9iai5ob3VyLAogICAgICBvYmoubWludXRlLAogICAgICBvYmouc2Vjb25kLAogICAgICBvYmoubWlsbGlzZWNvbmQKICAgICk7CgogICAgLy8gZm9yIGxlZ2FjeSByZWFzb25zLCB5ZWFycyBiZXR3ZWVuIDAgYW5kIDk5IGFyZSBpbnRlcnByZXRlZCBhcyAxOVhYOyByZXZlcnQgdGhhdAogICAgaWYgKG9iai55ZWFyIDwgMTAwICYmIG9iai55ZWFyID49IDApIHsKICAgICAgZCA9IG5ldyBEYXRlKGQpOwogICAgICBkLnNldFVUQ0Z1bGxZZWFyKGQuZ2V0VVRDRnVsbFllYXIoKSAtIDE5MDApOwogICAgfQogICAgcmV0dXJuICtkOwogIH0KCiAgZnVuY3Rpb24gd2Vla3NJbldlZWtZZWFyKHdlZWtZZWFyKSB7CiAgICBjb25zdCBwMSA9CiAgICAgICAgKHdlZWtZZWFyICsKICAgICAgICAgIE1hdGguZmxvb3Iod2Vla1llYXIgLyA0KSAtCiAgICAgICAgICBNYXRoLmZsb29yKHdlZWtZZWFyIC8gMTAwKSArCiAgICAgICAgICBNYXRoLmZsb29yKHdlZWtZZWFyIC8gNDAwKSkgJQogICAgICAgIDcsCiAgICAgIGxhc3QgPSB3ZWVrWWVhciAtIDEsCiAgICAgIHAyID0gKGxhc3QgKyBNYXRoLmZsb29yKGxhc3QgLyA0KSAtIE1hdGguZmxvb3IobGFzdCAvIDEwMCkgKyBNYXRoLmZsb29yKGxhc3QgLyA0MDApKSAlIDc7CiAgICByZXR1cm4gcDEgPT09IDQgfHwgcDIgPT09IDMgPyA1MyA6IDUyOwogIH0KCiAgZnVuY3Rpb24gdW50cnVuY2F0ZVllYXIoeWVhcikgewogICAgaWYgKHllYXIgPiA5OSkgewogICAgICByZXR1cm4geWVhcjsKICAgIH0gZWxzZSByZXR1cm4geWVhciA+IDYwID8gMTkwMCArIHllYXIgOiAyMDAwICsgeWVhcjsKICB9CgogIC8vIFBBUlNJTkcKCiAgZnVuY3Rpb24gcGFyc2Vab25lSW5mbyh0cywgb2Zmc2V0Rm9ybWF0LCBsb2NhbGUsIHRpbWVab25lID0gbnVsbCkgewogICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHRzKSwKICAgICAgaW50bE9wdHMgPSB7CiAgICAgICAgaG91ckN5Y2xlOiAiaDIzIiwKICAgICAgICB5ZWFyOiAibnVtZXJpYyIsCiAgICAgICAgbW9udGg6ICIyLWRpZ2l0IiwKICAgICAgICBkYXk6ICIyLWRpZ2l0IiwKICAgICAgICBob3VyOiAiMi1kaWdpdCIsCiAgICAgICAgbWludXRlOiAiMi1kaWdpdCIsCiAgICAgIH07CgogICAgaWYgKHRpbWVab25lKSB7CiAgICAgIGludGxPcHRzLnRpbWVab25lID0gdGltZVpvbmU7CiAgICB9CgogICAgY29uc3QgbW9kaWZpZWQgPSB7IHRpbWVab25lTmFtZTogb2Zmc2V0Rm9ybWF0LCAuLi5pbnRsT3B0cyB9OwoKICAgIGNvbnN0IHBhcnNlZCA9IG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KGxvY2FsZSwgbW9kaWZpZWQpCiAgICAgIC5mb3JtYXRUb1BhcnRzKGRhdGUpCiAgICAgIC5maW5kKChtKSA9PiBtLnR5cGUudG9Mb3dlckNhc2UoKSA9PT0gInRpbWV6b25lbmFtZSIpOwogICAgcmV0dXJuIHBhcnNlZCA/IHBhcnNlZC52YWx1ZSA6IG51bGw7CiAgfQoKICAvLyBzaWduZWRPZmZzZXQoJy01JywgJzMwJykgLT4gLTMzMAogIGZ1bmN0aW9uIHNpZ25lZE9mZnNldChvZmZIb3VyU3RyLCBvZmZNaW51dGVTdHIpIHsKICAgIGxldCBvZmZIb3VyID0gcGFyc2VJbnQob2ZmSG91clN0ciwgMTApOwoKICAgIC8vIGRvbid0IHx8IHRoaXMgYmVjYXVzZSB3ZSB3YW50IHRvIHByZXNlcnZlIC0wCiAgICBpZiAoTnVtYmVyLmlzTmFOKG9mZkhvdXIpKSB7CiAgICAgIG9mZkhvdXIgPSAwOwogICAgfQoKICAgIGNvbnN0IG9mZk1pbiA9IHBhcnNlSW50KG9mZk1pbnV0ZVN0ciwgMTApIHx8IDAsCiAgICAgIG9mZk1pblNpZ25lZCA9IG9mZkhvdXIgPCAwIHx8IE9iamVjdC5pcyhvZmZIb3VyLCAtMCkgPyAtb2ZmTWluIDogb2ZmTWluOwogICAgcmV0dXJuIG9mZkhvdXIgKiA2MCArIG9mZk1pblNpZ25lZDsKICB9CgogIC8vIENPRVJDSU9OCgogIGZ1bmN0aW9uIGFzTnVtYmVyKHZhbHVlKSB7CiAgICBjb25zdCBudW1lcmljVmFsdWUgPSBOdW1iZXIodmFsdWUpOwogICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gImJvb2xlYW4iIHx8IHZhbHVlID09PSAiIiB8fCBOdW1iZXIuaXNOYU4obnVtZXJpY1ZhbHVlKSkKICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKGBJbnZhbGlkIHVuaXQgdmFsdWUgJHt2YWx1ZX1gKTsKICAgIHJldHVybiBudW1lcmljVmFsdWU7CiAgfQoKICBmdW5jdGlvbiBub3JtYWxpemVPYmplY3Qob2JqLCBub3JtYWxpemVyKSB7CiAgICBjb25zdCBub3JtYWxpemVkID0ge307CiAgICBmb3IgKGNvbnN0IHUgaW4gb2JqKSB7CiAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eShvYmosIHUpKSB7CiAgICAgICAgY29uc3QgdiA9IG9ialt1XTsKICAgICAgICBpZiAodiA9PT0gdW5kZWZpbmVkIHx8IHYgPT09IG51bGwpIGNvbnRpbnVlOwogICAgICAgIG5vcm1hbGl6ZWRbbm9ybWFsaXplcih1KV0gPSBhc051bWJlcih2KTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIG5vcm1hbGl6ZWQ7CiAgfQoKICBmdW5jdGlvbiBmb3JtYXRPZmZzZXQob2Zmc2V0LCBmb3JtYXQpIHsKICAgIGNvbnN0IGhvdXJzID0gTWF0aC50cnVuYyhNYXRoLmFicyhvZmZzZXQgLyA2MCkpLAogICAgICBtaW51dGVzID0gTWF0aC50cnVuYyhNYXRoLmFicyhvZmZzZXQgJSA2MCkpLAogICAgICBzaWduID0gb2Zmc2V0ID49IDAgPyAiKyIgOiAiLSI7CgogICAgc3dpdGNoIChmb3JtYXQpIHsKICAgICAgY2FzZSAic2hvcnQiOgogICAgICAgIHJldHVybiBgJHtzaWdufSR7cGFkU3RhcnQoaG91cnMsIDIpfToke3BhZFN0YXJ0KG1pbnV0ZXMsIDIpfWA7CiAgICAgIGNhc2UgIm5hcnJvdyI6CiAgICAgICAgcmV0dXJuIGAke3NpZ259JHtob3Vyc30ke21pbnV0ZXMgPiAwID8gYDoke21pbnV0ZXN9YCA6ICIifWA7CiAgICAgIGNhc2UgInRlY2hpZSI6CiAgICAgICAgcmV0dXJuIGAke3NpZ259JHtwYWRTdGFydChob3VycywgMil9JHtwYWRTdGFydChtaW51dGVzLCAyKX1gOwogICAgICBkZWZhdWx0OgogICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKGBWYWx1ZSBmb3JtYXQgJHtmb3JtYXR9IGlzIG91dCBvZiByYW5nZSBmb3IgcHJvcGVydHkgZm9ybWF0YCk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiB0aW1lT2JqZWN0KG9iaikgewogICAgcmV0dXJuIHBpY2sob2JqLCBbImhvdXIiLCAibWludXRlIiwgInNlY29uZCIsICJtaWxsaXNlY29uZCJdKTsKICB9CgogIGNvbnN0IGlhbmFSZWdleCA9CiAgICAvW0EtWmEtel8rLV17MSwyNTZ9KD86Oj9cL1tBLVphLXowLTlfKy1dezEsMjU2fSg/OlwvW0EtWmEtejAtOV8rLV17MSwyNTZ9KT8pPy87CgogIC8qKgogICAqIEBwcml2YXRlCiAgICovCgogIGNvbnN0IG1vbnRoc0xvbmcgPSBbCiAgICAiSmFudWFyeSIsCiAgICAiRmVicnVhcnkiLAogICAgIk1hcmNoIiwKICAgICJBcHJpbCIsCiAgICAiTWF5IiwKICAgICJKdW5lIiwKICAgICJKdWx5IiwKICAgICJBdWd1c3QiLAogICAgIlNlcHRlbWJlciIsCiAgICAiT2N0b2JlciIsCiAgICAiTm92ZW1iZXIiLAogICAgIkRlY2VtYmVyIiwKICBdOwoKICBjb25zdCBtb250aHNTaG9ydCA9IFsKICAgICJKYW4iLAogICAgIkZlYiIsCiAgICAiTWFyIiwKICAgICJBcHIiLAogICAgIk1heSIsCiAgICAiSnVuIiwKICAgICJKdWwiLAogICAgIkF1ZyIsCiAgICAiU2VwIiwKICAgICJPY3QiLAogICAgIk5vdiIsCiAgICAiRGVjIiwKICBdOwoKICBjb25zdCBtb250aHNOYXJyb3cgPSBbIkoiLCAiRiIsICJNIiwgIkEiLCAiTSIsICJKIiwgIkoiLCAiQSIsICJTIiwgIk8iLCAiTiIsICJEIl07CgogIGZ1bmN0aW9uIG1vbnRocyhsZW5ndGgpIHsKICAgIHN3aXRjaCAobGVuZ3RoKSB7CiAgICAgIGNhc2UgIm5hcnJvdyI6CiAgICAgICAgcmV0dXJuIFsuLi5tb250aHNOYXJyb3ddOwogICAgICBjYXNlICJzaG9ydCI6CiAgICAgICAgcmV0dXJuIFsuLi5tb250aHNTaG9ydF07CiAgICAgIGNhc2UgImxvbmciOgogICAgICAgIHJldHVybiBbLi4ubW9udGhzTG9uZ107CiAgICAgIGNhc2UgIm51bWVyaWMiOgogICAgICAgIHJldHVybiBbIjEiLCAiMiIsICIzIiwgIjQiLCAiNSIsICI2IiwgIjciLCAiOCIsICI5IiwgIjEwIiwgIjExIiwgIjEyIl07CiAgICAgIGNhc2UgIjItZGlnaXQiOgogICAgICAgIHJldHVybiBbIjAxIiwgIjAyIiwgIjAzIiwgIjA0IiwgIjA1IiwgIjA2IiwgIjA3IiwgIjA4IiwgIjA5IiwgIjEwIiwgIjExIiwgIjEyIl07CiAgICAgIGRlZmF1bHQ6CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgfQoKICBjb25zdCB3ZWVrZGF5c0xvbmcgPSBbCiAgICAiTW9uZGF5IiwKICAgICJUdWVzZGF5IiwKICAgICJXZWRuZXNkYXkiLAogICAgIlRodXJzZGF5IiwKICAgICJGcmlkYXkiLAogICAgIlNhdHVyZGF5IiwKICAgICJTdW5kYXkiLAogIF07CgogIGNvbnN0IHdlZWtkYXlzU2hvcnQgPSBbIk1vbiIsICJUdWUiLCAiV2VkIiwgIlRodSIsICJGcmkiLCAiU2F0IiwgIlN1biJdOwoKICBjb25zdCB3ZWVrZGF5c05hcnJvdyA9IFsiTSIsICJUIiwgIlciLCAiVCIsICJGIiwgIlMiLCAiUyJdOwoKICBmdW5jdGlvbiB3ZWVrZGF5cyhsZW5ndGgpIHsKICAgIHN3aXRjaCAobGVuZ3RoKSB7CiAgICAgIGNhc2UgIm5hcnJvdyI6CiAgICAgICAgcmV0dXJuIFsuLi53ZWVrZGF5c05hcnJvd107CiAgICAgIGNhc2UgInNob3J0IjoKICAgICAgICByZXR1cm4gWy4uLndlZWtkYXlzU2hvcnRdOwogICAgICBjYXNlICJsb25nIjoKICAgICAgICByZXR1cm4gWy4uLndlZWtkYXlzTG9uZ107CiAgICAgIGNhc2UgIm51bWVyaWMiOgogICAgICAgIHJldHVybiBbIjEiLCAiMiIsICIzIiwgIjQiLCAiNSIsICI2IiwgIjciXTsKICAgICAgZGVmYXVsdDoKICAgICAgICByZXR1cm4gbnVsbDsKICAgIH0KICB9CgogIGNvbnN0IG1lcmlkaWVtcyA9IFsiQU0iLCAiUE0iXTsKCiAgY29uc3QgZXJhc0xvbmcgPSBbIkJlZm9yZSBDaHJpc3QiLCAiQW5ubyBEb21pbmkiXTsKCiAgY29uc3QgZXJhc1Nob3J0ID0gWyJCQyIsICJBRCJdOwoKICBjb25zdCBlcmFzTmFycm93ID0gWyJCIiwgIkEiXTsKCiAgZnVuY3Rpb24gZXJhcyhsZW5ndGgpIHsKICAgIHN3aXRjaCAobGVuZ3RoKSB7CiAgICAgIGNhc2UgIm5hcnJvdyI6CiAgICAgICAgcmV0dXJuIFsuLi5lcmFzTmFycm93XTsKICAgICAgY2FzZSAic2hvcnQiOgogICAgICAgIHJldHVybiBbLi4uZXJhc1Nob3J0XTsKICAgICAgY2FzZSAibG9uZyI6CiAgICAgICAgcmV0dXJuIFsuLi5lcmFzTG9uZ107CiAgICAgIGRlZmF1bHQ6CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBtZXJpZGllbUZvckRhdGVUaW1lKGR0KSB7CiAgICByZXR1cm4gbWVyaWRpZW1zW2R0LmhvdXIgPCAxMiA/IDAgOiAxXTsKICB9CgogIGZ1bmN0aW9uIHdlZWtkYXlGb3JEYXRlVGltZShkdCwgbGVuZ3RoKSB7CiAgICByZXR1cm4gd2Vla2RheXMobGVuZ3RoKVtkdC53ZWVrZGF5IC0gMV07CiAgfQoKICBmdW5jdGlvbiBtb250aEZvckRhdGVUaW1lKGR0LCBsZW5ndGgpIHsKICAgIHJldHVybiBtb250aHMobGVuZ3RoKVtkdC5tb250aCAtIDFdOwogIH0KCiAgZnVuY3Rpb24gZXJhRm9yRGF0ZVRpbWUoZHQsIGxlbmd0aCkgewogICAgcmV0dXJuIGVyYXMobGVuZ3RoKVtkdC55ZWFyIDwgMCA/IDAgOiAxXTsKICB9CgogIGZ1bmN0aW9uIGZvcm1hdFJlbGF0aXZlVGltZSh1bml0LCBjb3VudCwgbnVtZXJpYyA9ICJhbHdheXMiLCBuYXJyb3cgPSBmYWxzZSkgewogICAgY29uc3QgdW5pdHMgPSB7CiAgICAgIHllYXJzOiBbInllYXIiLCAieXIuIl0sCiAgICAgIHF1YXJ0ZXJzOiBbInF1YXJ0ZXIiLCAicXRyLiJdLAogICAgICBtb250aHM6IFsibW9udGgiLCAibW8uIl0sCiAgICAgIHdlZWtzOiBbIndlZWsiLCAid2suIl0sCiAgICAgIGRheXM6IFsiZGF5IiwgImRheSIsICJkYXlzIl0sCiAgICAgIGhvdXJzOiBbImhvdXIiLCAiaHIuIl0sCiAgICAgIG1pbnV0ZXM6IFsibWludXRlIiwgIm1pbi4iXSwKICAgICAgc2Vjb25kczogWyJzZWNvbmQiLCAic2VjLiJdLAogICAgfTsKCiAgICBjb25zdCBsYXN0YWJsZSA9IFsiaG91cnMiLCAibWludXRlcyIsICJzZWNvbmRzIl0uaW5kZXhPZih1bml0KSA9PT0gLTE7CgogICAgaWYgKG51bWVyaWMgPT09ICJhdXRvIiAmJiBsYXN0YWJsZSkgewogICAgICBjb25zdCBpc0RheSA9IHVuaXQgPT09ICJkYXlzIjsKICAgICAgc3dpdGNoIChjb3VudCkgewogICAgICAgIGNhc2UgMToKICAgICAgICAgIHJldHVybiBpc0RheSA/ICJ0b21vcnJvdyIgOiBgbmV4dCAke3VuaXRzW3VuaXRdWzBdfWA7CiAgICAgICAgY2FzZSAtMToKICAgICAgICAgIHJldHVybiBpc0RheSA/ICJ5ZXN0ZXJkYXkiIDogYGxhc3QgJHt1bml0c1t1bml0XVswXX1gOwogICAgICAgIGNhc2UgMDoKICAgICAgICAgIHJldHVybiBpc0RheSA/ICJ0b2RheSIgOiBgdGhpcyAke3VuaXRzW3VuaXRdWzBdfWA7CiAgICAgIH0KICAgIH0KCiAgICBjb25zdCBpc0luUGFzdCA9IE9iamVjdC5pcyhjb3VudCwgLTApIHx8IGNvdW50IDwgMCwKICAgICAgZm10VmFsdWUgPSBNYXRoLmFicyhjb3VudCksCiAgICAgIHNpbmd1bGFyID0gZm10VmFsdWUgPT09IDEsCiAgICAgIGxpbFVuaXRzID0gdW5pdHNbdW5pdF0sCiAgICAgIGZtdFVuaXQgPSBuYXJyb3cKICAgICAgICA/IHNpbmd1bGFyCiAgICAgICAgICA/IGxpbFVuaXRzWzFdCiAgICAgICAgICA6IGxpbFVuaXRzWzJdIHx8IGxpbFVuaXRzWzFdCiAgICAgICAgOiBzaW5ndWxhcgogICAgICAgID8gdW5pdHNbdW5pdF1bMF0KICAgICAgICA6IHVuaXQ7CiAgICByZXR1cm4gaXNJblBhc3QgPyBgJHtmbXRWYWx1ZX0gJHtmbXRVbml0fSBhZ29gIDogYGluICR7Zm10VmFsdWV9ICR7Zm10VW5pdH1gOwogIH0KCiAgZnVuY3Rpb24gc3RyaW5naWZ5VG9rZW5zKHNwbGl0cywgdG9rZW5Ub1N0cmluZykgewogICAgbGV0IHMgPSAiIjsKICAgIGZvciAoY29uc3QgdG9rZW4gb2Ygc3BsaXRzKSB7CiAgICAgIGlmICh0b2tlbi5saXRlcmFsKSB7CiAgICAgICAgcyArPSB0b2tlbi52YWw7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcyArPSB0b2tlblRvU3RyaW5nKHRva2VuLnZhbCk7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBzOwogIH0KCiAgY29uc3QgbWFjcm9Ub2tlblRvRm9ybWF0T3B0cyA9IHsKICAgIEQ6IERBVEVfU0hPUlQsCiAgICBERDogREFURV9NRUQsCiAgICBEREQ6IERBVEVfRlVMTCwKICAgIEREREQ6IERBVEVfSFVHRSwKICAgIHQ6IFRJTUVfU0lNUExFLAogICAgdHQ6IFRJTUVfV0lUSF9TRUNPTkRTLAogICAgdHR0OiBUSU1FX1dJVEhfU0hPUlRfT0ZGU0VULAogICAgdHR0dDogVElNRV9XSVRIX0xPTkdfT0ZGU0VULAogICAgVDogVElNRV8yNF9TSU1QTEUsCiAgICBUVDogVElNRV8yNF9XSVRIX1NFQ09ORFMsCiAgICBUVFQ6IFRJTUVfMjRfV0lUSF9TSE9SVF9PRkZTRVQsCiAgICBUVFRUOiBUSU1FXzI0X1dJVEhfTE9OR19PRkZTRVQsCiAgICBmOiBEQVRFVElNRV9TSE9SVCwKICAgIGZmOiBEQVRFVElNRV9NRUQsCiAgICBmZmY6IERBVEVUSU1FX0ZVTEwsCiAgICBmZmZmOiBEQVRFVElNRV9IVUdFLAogICAgRjogREFURVRJTUVfU0hPUlRfV0lUSF9TRUNPTkRTLAogICAgRkY6IERBVEVUSU1FX01FRF9XSVRIX1NFQ09ORFMsCiAgICBGRkY6IERBVEVUSU1FX0ZVTExfV0lUSF9TRUNPTkRTLAogICAgRkZGRjogREFURVRJTUVfSFVHRV9XSVRIX1NFQ09ORFMsCiAgfTsKCiAgLyoqCiAgICogQHByaXZhdGUKICAgKi8KCiAgY2xhc3MgRm9ybWF0dGVyIHsKICAgIHN0YXRpYyBjcmVhdGUobG9jYWxlLCBvcHRzID0ge30pIHsKICAgICAgcmV0dXJuIG5ldyBGb3JtYXR0ZXIobG9jYWxlLCBvcHRzKTsKICAgIH0KCiAgICBzdGF0aWMgcGFyc2VGb3JtYXQoZm10KSB7CiAgICAgIGxldCBjdXJyZW50ID0gbnVsbCwKICAgICAgICBjdXJyZW50RnVsbCA9ICIiLAogICAgICAgIGJyYWNrZXRlZCA9IGZhbHNlOwogICAgICBjb25zdCBzcGxpdHMgPSBbXTsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmbXQubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBjID0gZm10LmNoYXJBdChpKTsKICAgICAgICBpZiAoYyA9PT0gIiciKSB7CiAgICAgICAgICBpZiAoY3VycmVudEZ1bGwubGVuZ3RoID4gMCkgewogICAgICAgICAgICBzcGxpdHMucHVzaCh7IGxpdGVyYWw6IGJyYWNrZXRlZCwgdmFsOiBjdXJyZW50RnVsbCB9KTsKICAgICAgICAgIH0KICAgICAgICAgIGN1cnJlbnQgPSBudWxsOwogICAgICAgICAgY3VycmVudEZ1bGwgPSAiIjsKICAgICAgICAgIGJyYWNrZXRlZCA9ICFicmFja2V0ZWQ7CiAgICAgICAgfSBlbHNlIGlmIChicmFja2V0ZWQpIHsKICAgICAgICAgIGN1cnJlbnRGdWxsICs9IGM7CiAgICAgICAgfSBlbHNlIGlmIChjID09PSBjdXJyZW50KSB7CiAgICAgICAgICBjdXJyZW50RnVsbCArPSBjOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAoY3VycmVudEZ1bGwubGVuZ3RoID4gMCkgewogICAgICAgICAgICBzcGxpdHMucHVzaCh7IGxpdGVyYWw6IGZhbHNlLCB2YWw6IGN1cnJlbnRGdWxsIH0pOwogICAgICAgICAgfQogICAgICAgICAgY3VycmVudEZ1bGwgPSBjOwogICAgICAgICAgY3VycmVudCA9IGM7CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAoY3VycmVudEZ1bGwubGVuZ3RoID4gMCkgewogICAgICAgIHNwbGl0cy5wdXNoKHsgbGl0ZXJhbDogYnJhY2tldGVkLCB2YWw6IGN1cnJlbnRGdWxsIH0pOwogICAgICB9CgogICAgICByZXR1cm4gc3BsaXRzOwogICAgfQoKICAgIHN0YXRpYyBtYWNyb1Rva2VuVG9Gb3JtYXRPcHRzKHRva2VuKSB7CiAgICAgIHJldHVybiBtYWNyb1Rva2VuVG9Gb3JtYXRPcHRzW3Rva2VuXTsKICAgIH0KCiAgICBjb25zdHJ1Y3Rvcihsb2NhbGUsIGZvcm1hdE9wdHMpIHsKICAgICAgdGhpcy5vcHRzID0gZm9ybWF0T3B0czsKICAgICAgdGhpcy5sb2MgPSBsb2NhbGU7CiAgICAgIHRoaXMuc3lzdGVtTG9jID0gbnVsbDsKICAgIH0KCiAgICBmb3JtYXRXaXRoU3lzdGVtRGVmYXVsdChkdCwgb3B0cykgewogICAgICBpZiAodGhpcy5zeXN0ZW1Mb2MgPT09IG51bGwpIHsKICAgICAgICB0aGlzLnN5c3RlbUxvYyA9IHRoaXMubG9jLnJlZGVmYXVsdFRvU3lzdGVtKCk7CiAgICAgIH0KICAgICAgY29uc3QgZGYgPSB0aGlzLnN5c3RlbUxvYy5kdEZvcm1hdHRlcihkdCwgeyAuLi50aGlzLm9wdHMsIC4uLm9wdHMgfSk7CiAgICAgIHJldHVybiBkZi5mb3JtYXQoKTsKICAgIH0KCiAgICBmb3JtYXREYXRlVGltZShkdCwgb3B0cyA9IHt9KSB7CiAgICAgIGNvbnN0IGRmID0gdGhpcy5sb2MuZHRGb3JtYXR0ZXIoZHQsIHsgLi4udGhpcy5vcHRzLCAuLi5vcHRzIH0pOwogICAgICByZXR1cm4gZGYuZm9ybWF0KCk7CiAgICB9CgogICAgZm9ybWF0RGF0ZVRpbWVQYXJ0cyhkdCwgb3B0cyA9IHt9KSB7CiAgICAgIGNvbnN0IGRmID0gdGhpcy5sb2MuZHRGb3JtYXR0ZXIoZHQsIHsgLi4udGhpcy5vcHRzLCAuLi5vcHRzIH0pOwogICAgICByZXR1cm4gZGYuZm9ybWF0VG9QYXJ0cygpOwogICAgfQoKICAgIHJlc29sdmVkT3B0aW9ucyhkdCwgb3B0cyA9IHt9KSB7CiAgICAgIGNvbnN0IGRmID0gdGhpcy5sb2MuZHRGb3JtYXR0ZXIoZHQsIHsgLi4udGhpcy5vcHRzLCAuLi5vcHRzIH0pOwogICAgICByZXR1cm4gZGYucmVzb2x2ZWRPcHRpb25zKCk7CiAgICB9CgogICAgbnVtKG4sIHAgPSAwKSB7CiAgICAgIC8vIHdlIGdldCBzb21lIHBlcmYgb3V0IG9mIGRvaW5nIHRoaXMgaGVyZSwgYW5ub3lpbmdseQogICAgICBpZiAodGhpcy5vcHRzLmZvcmNlU2ltcGxlKSB7CiAgICAgICAgcmV0dXJuIHBhZFN0YXJ0KG4sIHApOwogICAgICB9CgogICAgICBjb25zdCBvcHRzID0geyAuLi50aGlzLm9wdHMgfTsKCiAgICAgIGlmIChwID4gMCkgewogICAgICAgIG9wdHMucGFkVG8gPSBwOwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5sb2MubnVtYmVyRm9ybWF0dGVyKG9wdHMpLmZvcm1hdChuKTsKICAgIH0KCiAgICBmb3JtYXREYXRlVGltZUZyb21TdHJpbmcoZHQsIGZtdCkgewogICAgICBjb25zdCBrbm93bkVuZ2xpc2ggPSB0aGlzLmxvYy5saXN0aW5nTW9kZSgpID09PSAiZW4iLAogICAgICAgIHVzZURhdGVUaW1lRm9ybWF0dGVyID0gdGhpcy5sb2Mub3V0cHV0Q2FsZW5kYXIgJiYgdGhpcy5sb2Mub3V0cHV0Q2FsZW5kYXIgIT09ICJncmVnb3J5IiwKICAgICAgICBzdHJpbmcgPSAob3B0cywgZXh0cmFjdCkgPT4gdGhpcy5sb2MuZXh0cmFjdChkdCwgb3B0cywgZXh0cmFjdCksCiAgICAgICAgZm9ybWF0T2Zmc2V0ID0gKG9wdHMpID0+IHsKICAgICAgICAgIGlmIChkdC5pc09mZnNldEZpeGVkICYmIGR0Lm9mZnNldCA9PT0gMCAmJiBvcHRzLmFsbG93WikgewogICAgICAgICAgICByZXR1cm4gIloiOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBkdC5pc1ZhbGlkID8gZHQuem9uZS5mb3JtYXRPZmZzZXQoZHQudHMsIG9wdHMuZm9ybWF0KSA6ICIiOwogICAgICAgIH0sCiAgICAgICAgbWVyaWRpZW0gPSAoKSA9PgogICAgICAgICAga25vd25FbmdsaXNoCiAgICAgICAgICAgID8gbWVyaWRpZW1Gb3JEYXRlVGltZShkdCkKICAgICAgICAgICAgOiBzdHJpbmcoeyBob3VyOiAibnVtZXJpYyIsIGhvdXJDeWNsZTogImgxMiIgfSwgImRheXBlcmlvZCIpLAogICAgICAgIG1vbnRoID0gKGxlbmd0aCwgc3RhbmRhbG9uZSkgPT4KICAgICAgICAgIGtub3duRW5nbGlzaAogICAgICAgICAgICA/IG1vbnRoRm9yRGF0ZVRpbWUoZHQsIGxlbmd0aCkKICAgICAgICAgICAgOiBzdHJpbmcoc3RhbmRhbG9uZSA/IHsgbW9udGg6IGxlbmd0aCB9IDogeyBtb250aDogbGVuZ3RoLCBkYXk6ICJudW1lcmljIiB9LCAibW9udGgiKSwKICAgICAgICB3ZWVrZGF5ID0gKGxlbmd0aCwgc3RhbmRhbG9uZSkgPT4KICAgICAgICAgIGtub3duRW5nbGlzaAogICAgICAgICAgICA/IHdlZWtkYXlGb3JEYXRlVGltZShkdCwgbGVuZ3RoKQogICAgICAgICAgICA6IHN0cmluZygKICAgICAgICAgICAgICAgIHN0YW5kYWxvbmUgPyB7IHdlZWtkYXk6IGxlbmd0aCB9IDogeyB3ZWVrZGF5OiBsZW5ndGgsIG1vbnRoOiAibG9uZyIsIGRheTogIm51bWVyaWMiIH0sCiAgICAgICAgICAgICAgICAid2Vla2RheSIKICAgICAgICAgICAgICApLAogICAgICAgIG1heWJlTWFjcm8gPSAodG9rZW4pID0+IHsKICAgICAgICAgIGNvbnN0IGZvcm1hdE9wdHMgPSBGb3JtYXR0ZXIubWFjcm9Ub2tlblRvRm9ybWF0T3B0cyh0b2tlbik7CiAgICAgICAgICBpZiAoZm9ybWF0T3B0cykgewogICAgICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXRXaXRoU3lzdGVtRGVmYXVsdChkdCwgZm9ybWF0T3B0cyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gdG9rZW47CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBlcmEgPSAobGVuZ3RoKSA9PgogICAgICAgICAga25vd25FbmdsaXNoID8gZXJhRm9yRGF0ZVRpbWUoZHQsIGxlbmd0aCkgOiBzdHJpbmcoeyBlcmE6IGxlbmd0aCB9LCAiZXJhIiksCiAgICAgICAgdG9rZW5Ub1N0cmluZyA9ICh0b2tlbikgPT4gewogICAgICAgICAgLy8gV2hlcmUgcG9zc2libGU6IGh0dHA6Ly9jbGRyLnVuaWNvZGUub3JnL3RyYW5zbGF0aW9uL2RhdGUtdGltZS0xL2RhdGUtdGltZSNUT0MtU3RhbmRhbG9uZS12cy4tRm9ybWF0LVN0eWxlcwogICAgICAgICAgc3dpdGNoICh0b2tlbikgewogICAgICAgICAgICAvLyBtcwogICAgICAgICAgICBjYXNlICJTIjoKICAgICAgICAgICAgICByZXR1cm4gdGhpcy5udW0oZHQubWlsbGlzZWNvbmQpOwogICAgICAgICAgICBjYXNlICJ1IjoKICAgICAgICAgICAgLy8gZmFsbHMgdGhyb3VnaAogICAgICAgICAgICBjYXNlICJTU1MiOgogICAgICAgICAgICAgIHJldHVybiB0aGlzLm51bShkdC5taWxsaXNlY29uZCwgMyk7CiAgICAgICAgICAgIC8vIHNlY29uZHMKICAgICAgICAgICAgY2FzZSAicyI6CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubnVtKGR0LnNlY29uZCk7CiAgICAgICAgICAgIGNhc2UgInNzIjoKICAgICAgICAgICAgICByZXR1cm4gdGhpcy5udW0oZHQuc2Vjb25kLCAyKTsKICAgICAgICAgICAgLy8gZnJhY3Rpb25hbCBzZWNvbmRzCiAgICAgICAgICAgIGNhc2UgInV1IjoKICAgICAgICAgICAgICByZXR1cm4gdGhpcy5udW0oTWF0aC5mbG9vcihkdC5taWxsaXNlY29uZCAvIDEwKSwgMik7CiAgICAgICAgICAgIGNhc2UgInV1dSI6CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubnVtKE1hdGguZmxvb3IoZHQubWlsbGlzZWNvbmQgLyAxMDApKTsKICAgICAgICAgICAgLy8gbWludXRlcwogICAgICAgICAgICBjYXNlICJtIjoKICAgICAgICAgICAgICByZXR1cm4gdGhpcy5udW0oZHQubWludXRlKTsKICAgICAgICAgICAgY2FzZSAibW0iOgogICAgICAgICAgICAgIHJldHVybiB0aGlzLm51bShkdC5taW51dGUsIDIpOwogICAgICAgICAgICAvLyBob3VycwogICAgICAgICAgICBjYXNlICJoIjoKICAgICAgICAgICAgICByZXR1cm4gdGhpcy5udW0oZHQuaG91ciAlIDEyID09PSAwID8gMTIgOiBkdC5ob3VyICUgMTIpOwogICAgICAgICAgICBjYXNlICJoaCI6CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubnVtKGR0LmhvdXIgJSAxMiA9PT0gMCA/IDEyIDogZHQuaG91ciAlIDEyLCAyKTsKICAgICAgICAgICAgY2FzZSAiSCI6CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubnVtKGR0LmhvdXIpOwogICAgICAgICAgICBjYXNlICJISCI6CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubnVtKGR0LmhvdXIsIDIpOwogICAgICAgICAgICAvLyBvZmZzZXQKICAgICAgICAgICAgY2FzZSAiWiI6CiAgICAgICAgICAgICAgLy8gbGlrZSArNgogICAgICAgICAgICAgIHJldHVybiBmb3JtYXRPZmZzZXQoeyBmb3JtYXQ6ICJuYXJyb3ciLCBhbGxvd1o6IHRoaXMub3B0cy5hbGxvd1ogfSk7CiAgICAgICAgICAgIGNhc2UgIlpaIjoKICAgICAgICAgICAgICAvLyBsaWtlICswNjowMAogICAgICAgICAgICAgIHJldHVybiBmb3JtYXRPZmZzZXQoeyBmb3JtYXQ6ICJzaG9ydCIsIGFsbG93WjogdGhpcy5vcHRzLmFsbG93WiB9KTsKICAgICAgICAgICAgY2FzZSAiWlpaIjoKICAgICAgICAgICAgICAvLyBsaWtlICswNjAwCiAgICAgICAgICAgICAgcmV0dXJuIGZvcm1hdE9mZnNldCh7IGZvcm1hdDogInRlY2hpZSIsIGFsbG93WjogdGhpcy5vcHRzLmFsbG93WiB9KTsKICAgICAgICAgICAgY2FzZSAiWlpaWiI6CiAgICAgICAgICAgICAgLy8gbGlrZSBFU1QKICAgICAgICAgICAgICByZXR1cm4gZHQuem9uZS5vZmZzZXROYW1lKGR0LnRzLCB7IGZvcm1hdDogInNob3J0IiwgbG9jYWxlOiB0aGlzLmxvYy5sb2NhbGUgfSk7CiAgICAgICAgICAgIGNhc2UgIlpaWlpaIjoKICAgICAgICAgICAgICAvLyBsaWtlIEVhc3Rlcm4gU3RhbmRhcmQgVGltZQogICAgICAgICAgICAgIHJldHVybiBkdC56b25lLm9mZnNldE5hbWUoZHQudHMsIHsgZm9ybWF0OiAibG9uZyIsIGxvY2FsZTogdGhpcy5sb2MubG9jYWxlIH0pOwogICAgICAgICAgICAvLyB6b25lCiAgICAgICAgICAgIGNhc2UgInoiOgogICAgICAgICAgICAgIC8vIGxpa2UgQW1lcmljYS9OZXdfWW9yawogICAgICAgICAgICAgIHJldHVybiBkdC56b25lTmFtZTsKICAgICAgICAgICAgLy8gbWVyaWRpZW1zCiAgICAgICAgICAgIGNhc2UgImEiOgogICAgICAgICAgICAgIHJldHVybiBtZXJpZGllbSgpOwogICAgICAgICAgICAvLyBkYXRlcwogICAgICAgICAgICBjYXNlICJkIjoKICAgICAgICAgICAgICByZXR1cm4gdXNlRGF0ZVRpbWVGb3JtYXR0ZXIgPyBzdHJpbmcoeyBkYXk6ICJudW1lcmljIiB9LCAiZGF5IikgOiB0aGlzLm51bShkdC5kYXkpOwogICAgICAgICAgICBjYXNlICJkZCI6CiAgICAgICAgICAgICAgcmV0dXJuIHVzZURhdGVUaW1lRm9ybWF0dGVyID8gc3RyaW5nKHsgZGF5OiAiMi1kaWdpdCIgfSwgImRheSIpIDogdGhpcy5udW0oZHQuZGF5LCAyKTsKICAgICAgICAgICAgLy8gd2Vla2RheXMgLSBzdGFuZGFsb25lCiAgICAgICAgICAgIGNhc2UgImMiOgogICAgICAgICAgICAgIC8vIGxpa2UgMQogICAgICAgICAgICAgIHJldHVybiB0aGlzLm51bShkdC53ZWVrZGF5KTsKICAgICAgICAgICAgY2FzZSAiY2NjIjoKICAgICAgICAgICAgICAvLyBsaWtlICdUdWVzJwogICAgICAgICAgICAgIHJldHVybiB3ZWVrZGF5KCJzaG9ydCIsIHRydWUpOwogICAgICAgICAgICBjYXNlICJjY2NjIjoKICAgICAgICAgICAgICAvLyBsaWtlICdUdWVzZGF5JwogICAgICAgICAgICAgIHJldHVybiB3ZWVrZGF5KCJsb25nIiwgdHJ1ZSk7CiAgICAgICAgICAgIGNhc2UgImNjY2NjIjoKICAgICAgICAgICAgICAvLyBsaWtlICdUJwogICAgICAgICAgICAgIHJldHVybiB3ZWVrZGF5KCJuYXJyb3ciLCB0cnVlKTsKICAgICAgICAgICAgLy8gd2Vla2RheXMgLSBmb3JtYXQKICAgICAgICAgICAgY2FzZSAiRSI6CiAgICAgICAgICAgICAgLy8gbGlrZSAxCiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubnVtKGR0LndlZWtkYXkpOwogICAgICAgICAgICBjYXNlICJFRUUiOgogICAgICAgICAgICAgIC8vIGxpa2UgJ1R1ZXMnCiAgICAgICAgICAgICAgcmV0dXJuIHdlZWtkYXkoInNob3J0IiwgZmFsc2UpOwogICAgICAgICAgICBjYXNlICJFRUVFIjoKICAgICAgICAgICAgICAvLyBsaWtlICdUdWVzZGF5JwogICAgICAgICAgICAgIHJldHVybiB3ZWVrZGF5KCJsb25nIiwgZmFsc2UpOwogICAgICAgICAgICBjYXNlICJFRUVFRSI6CiAgICAgICAgICAgICAgLy8gbGlrZSAnVCcKICAgICAgICAgICAgICByZXR1cm4gd2Vla2RheSgibmFycm93IiwgZmFsc2UpOwogICAgICAgICAgICAvLyBtb250aHMgLSBzdGFuZGFsb25lCiAgICAgICAgICAgIGNhc2UgIkwiOgogICAgICAgICAgICAgIC8vIGxpa2UgMQogICAgICAgICAgICAgIHJldHVybiB1c2VEYXRlVGltZUZvcm1hdHRlcgogICAgICAgICAgICAgICAgPyBzdHJpbmcoeyBtb250aDogIm51bWVyaWMiLCBkYXk6ICJudW1lcmljIiB9LCAibW9udGgiKQogICAgICAgICAgICAgICAgOiB0aGlzLm51bShkdC5tb250aCk7CiAgICAgICAgICAgIGNhc2UgIkxMIjoKICAgICAgICAgICAgICAvLyBsaWtlIDAxLCBkb2Vzbid0IHNlZW0gdG8gd29yawogICAgICAgICAgICAgIHJldHVybiB1c2VEYXRlVGltZUZvcm1hdHRlcgogICAgICAgICAgICAgICAgPyBzdHJpbmcoeyBtb250aDogIjItZGlnaXQiLCBkYXk6ICJudW1lcmljIiB9LCAibW9udGgiKQogICAgICAgICAgICAgICAgOiB0aGlzLm51bShkdC5tb250aCwgMik7CiAgICAgICAgICAgIGNhc2UgIkxMTCI6CiAgICAgICAgICAgICAgLy8gbGlrZSBKYW4KICAgICAgICAgICAgICByZXR1cm4gbW9udGgoInNob3J0IiwgdHJ1ZSk7CiAgICAgICAgICAgIGNhc2UgIkxMTEwiOgogICAgICAgICAgICAgIC8vIGxpa2UgSmFudWFyeQogICAgICAgICAgICAgIHJldHVybiBtb250aCgibG9uZyIsIHRydWUpOwogICAgICAgICAgICBjYXNlICJMTExMTCI6CiAgICAgICAgICAgICAgLy8gbGlrZSBKCiAgICAgICAgICAgICAgcmV0dXJuIG1vbnRoKCJuYXJyb3ciLCB0cnVlKTsKICAgICAgICAgICAgLy8gbW9udGhzIC0gZm9ybWF0CiAgICAgICAgICAgIGNhc2UgIk0iOgogICAgICAgICAgICAgIC8vIGxpa2UgMQogICAgICAgICAgICAgIHJldHVybiB1c2VEYXRlVGltZUZvcm1hdHRlcgogICAgICAgICAgICAgICAgPyBzdHJpbmcoeyBtb250aDogIm51bWVyaWMiIH0sICJtb250aCIpCiAgICAgICAgICAgICAgICA6IHRoaXMubnVtKGR0Lm1vbnRoKTsKICAgICAgICAgICAgY2FzZSAiTU0iOgogICAgICAgICAgICAgIC8vIGxpa2UgMDEKICAgICAgICAgICAgICByZXR1cm4gdXNlRGF0ZVRpbWVGb3JtYXR0ZXIKICAgICAgICAgICAgICAgID8gc3RyaW5nKHsgbW9udGg6ICIyLWRpZ2l0IiB9LCAibW9udGgiKQogICAgICAgICAgICAgICAgOiB0aGlzLm51bShkdC5tb250aCwgMik7CiAgICAgICAgICAgIGNhc2UgIk1NTSI6CiAgICAgICAgICAgICAgLy8gbGlrZSBKYW4KICAgICAgICAgICAgICByZXR1cm4gbW9udGgoInNob3J0IiwgZmFsc2UpOwogICAgICAgICAgICBjYXNlICJNTU1NIjoKICAgICAgICAgICAgICAvLyBsaWtlIEphbnVhcnkKICAgICAgICAgICAgICByZXR1cm4gbW9udGgoImxvbmciLCBmYWxzZSk7CiAgICAgICAgICAgIGNhc2UgIk1NTU1NIjoKICAgICAgICAgICAgICAvLyBsaWtlIEoKICAgICAgICAgICAgICByZXR1cm4gbW9udGgoIm5hcnJvdyIsIGZhbHNlKTsKICAgICAgICAgICAgLy8geWVhcnMKICAgICAgICAgICAgY2FzZSAieSI6CiAgICAgICAgICAgICAgLy8gbGlrZSAyMDE0CiAgICAgICAgICAgICAgcmV0dXJuIHVzZURhdGVUaW1lRm9ybWF0dGVyID8gc3RyaW5nKHsgeWVhcjogIm51bWVyaWMiIH0sICJ5ZWFyIikgOiB0aGlzLm51bShkdC55ZWFyKTsKICAgICAgICAgICAgY2FzZSAieXkiOgogICAgICAgICAgICAgIC8vIGxpa2UgMTQKICAgICAgICAgICAgICByZXR1cm4gdXNlRGF0ZVRpbWVGb3JtYXR0ZXIKICAgICAgICAgICAgICAgID8gc3RyaW5nKHsgeWVhcjogIjItZGlnaXQiIH0sICJ5ZWFyIikKICAgICAgICAgICAgICAgIDogdGhpcy5udW0oZHQueWVhci50b1N0cmluZygpLnNsaWNlKC0yKSwgMik7CiAgICAgICAgICAgIGNhc2UgInl5eXkiOgogICAgICAgICAgICAgIC8vIGxpa2UgMDAxMgogICAgICAgICAgICAgIHJldHVybiB1c2VEYXRlVGltZUZvcm1hdHRlcgogICAgICAgICAgICAgICAgPyBzdHJpbmcoeyB5ZWFyOiAibnVtZXJpYyIgfSwgInllYXIiKQogICAgICAgICAgICAgICAgOiB0aGlzLm51bShkdC55ZWFyLCA0KTsKICAgICAgICAgICAgY2FzZSAieXl5eXl5IjoKICAgICAgICAgICAgICAvLyBsaWtlIDAwMDAxMgogICAgICAgICAgICAgIHJldHVybiB1c2VEYXRlVGltZUZvcm1hdHRlcgogICAgICAgICAgICAgICAgPyBzdHJpbmcoeyB5ZWFyOiAibnVtZXJpYyIgfSwgInllYXIiKQogICAgICAgICAgICAgICAgOiB0aGlzLm51bShkdC55ZWFyLCA2KTsKICAgICAgICAgICAgLy8gZXJhcwogICAgICAgICAgICBjYXNlICJHIjoKICAgICAgICAgICAgICAvLyBsaWtlIEFECiAgICAgICAgICAgICAgcmV0dXJuIGVyYSgic2hvcnQiKTsKICAgICAgICAgICAgY2FzZSAiR0ciOgogICAgICAgICAgICAgIC8vIGxpa2UgQW5ubyBEb21pbmkKICAgICAgICAgICAgICByZXR1cm4gZXJhKCJsb25nIik7CiAgICAgICAgICAgIGNhc2UgIkdHR0dHIjoKICAgICAgICAgICAgICByZXR1cm4gZXJhKCJuYXJyb3ciKTsKICAgICAgICAgICAgY2FzZSAia2siOgogICAgICAgICAgICAgIHJldHVybiB0aGlzLm51bShkdC53ZWVrWWVhci50b1N0cmluZygpLnNsaWNlKC0yKSwgMik7CiAgICAgICAgICAgIGNhc2UgImtra2siOgogICAgICAgICAgICAgIHJldHVybiB0aGlzLm51bShkdC53ZWVrWWVhciwgNCk7CiAgICAgICAgICAgIGNhc2UgIlciOgogICAgICAgICAgICAgIHJldHVybiB0aGlzLm51bShkdC53ZWVrTnVtYmVyKTsKICAgICAgICAgICAgY2FzZSAiV1ciOgogICAgICAgICAgICAgIHJldHVybiB0aGlzLm51bShkdC53ZWVrTnVtYmVyLCAyKTsKICAgICAgICAgICAgY2FzZSAibyI6CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubnVtKGR0Lm9yZGluYWwpOwogICAgICAgICAgICBjYXNlICJvb28iOgogICAgICAgICAgICAgIHJldHVybiB0aGlzLm51bShkdC5vcmRpbmFsLCAzKTsKICAgICAgICAgICAgY2FzZSAicSI6CiAgICAgICAgICAgICAgLy8gbGlrZSAxCiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubnVtKGR0LnF1YXJ0ZXIpOwogICAgICAgICAgICBjYXNlICJxcSI6CiAgICAgICAgICAgICAgLy8gbGlrZSAwMQogICAgICAgICAgICAgIHJldHVybiB0aGlzLm51bShkdC5xdWFydGVyLCAyKTsKICAgICAgICAgICAgY2FzZSAiWCI6CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubnVtKE1hdGguZmxvb3IoZHQudHMgLyAxMDAwKSk7CiAgICAgICAgICAgIGNhc2UgIngiOgogICAgICAgICAgICAgIHJldHVybiB0aGlzLm51bShkdC50cyk7CiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgcmV0dXJuIG1heWJlTWFjcm8odG9rZW4pOwogICAgICAgICAgfQogICAgICAgIH07CgogICAgICByZXR1cm4gc3RyaW5naWZ5VG9rZW5zKEZvcm1hdHRlci5wYXJzZUZvcm1hdChmbXQpLCB0b2tlblRvU3RyaW5nKTsKICAgIH0KCiAgICBmb3JtYXREdXJhdGlvbkZyb21TdHJpbmcoZHVyLCBmbXQpIHsKICAgICAgY29uc3QgdG9rZW5Ub0ZpZWxkID0gKHRva2VuKSA9PiB7CiAgICAgICAgICBzd2l0Y2ggKHRva2VuWzBdKSB7CiAgICAgICAgICAgIGNhc2UgIlMiOgogICAgICAgICAgICAgIHJldHVybiAibWlsbGlzZWNvbmQiOwogICAgICAgICAgICBjYXNlICJzIjoKICAgICAgICAgICAgICByZXR1cm4gInNlY29uZCI7CiAgICAgICAgICAgIGNhc2UgIm0iOgogICAgICAgICAgICAgIHJldHVybiAibWludXRlIjsKICAgICAgICAgICAgY2FzZSAiaCI6CiAgICAgICAgICAgICAgcmV0dXJuICJob3VyIjsKICAgICAgICAgICAgY2FzZSAiZCI6CiAgICAgICAgICAgICAgcmV0dXJuICJkYXkiOwogICAgICAgICAgICBjYXNlICJ3IjoKICAgICAgICAgICAgICByZXR1cm4gIndlZWsiOwogICAgICAgICAgICBjYXNlICJNIjoKICAgICAgICAgICAgICByZXR1cm4gIm1vbnRoIjsKICAgICAgICAgICAgY2FzZSAieSI6CiAgICAgICAgICAgICAgcmV0dXJuICJ5ZWFyIjsKICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHRva2VuVG9TdHJpbmcgPSAobGlsZHVyKSA9PiAodG9rZW4pID0+IHsKICAgICAgICAgIGNvbnN0IG1hcHBlZCA9IHRva2VuVG9GaWVsZCh0b2tlbik7CiAgICAgICAgICBpZiAobWFwcGVkKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLm51bShsaWxkdXIuZ2V0KG1hcHBlZCksIHRva2VuLmxlbmd0aCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gdG9rZW47CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICB0b2tlbnMgPSBGb3JtYXR0ZXIucGFyc2VGb3JtYXQoZm10KSwKICAgICAgICByZWFsVG9rZW5zID0gdG9rZW5zLnJlZHVjZSgKICAgICAgICAgIChmb3VuZCwgeyBsaXRlcmFsLCB2YWwgfSkgPT4gKGxpdGVyYWwgPyBmb3VuZCA6IGZvdW5kLmNvbmNhdCh2YWwpKSwKICAgICAgICAgIFtdCiAgICAgICAgKSwKICAgICAgICBjb2xsYXBzZWQgPSBkdXIuc2hpZnRUbyguLi5yZWFsVG9rZW5zLm1hcCh0b2tlblRvRmllbGQpLmZpbHRlcigodCkgPT4gdCkpOwogICAgICByZXR1cm4gc3RyaW5naWZ5VG9rZW5zKHRva2VucywgdG9rZW5Ub1N0cmluZyhjb2xsYXBzZWQpKTsKICAgIH0KICB9CgogIGNsYXNzIEludmFsaWQgewogICAgY29uc3RydWN0b3IocmVhc29uLCBleHBsYW5hdGlvbikgewogICAgICB0aGlzLnJlYXNvbiA9IHJlYXNvbjsKICAgICAgdGhpcy5leHBsYW5hdGlvbiA9IGV4cGxhbmF0aW9uOwogICAgfQoKICAgIHRvTWVzc2FnZSgpIHsKICAgICAgaWYgKHRoaXMuZXhwbGFuYXRpb24pIHsKICAgICAgICByZXR1cm4gYCR7dGhpcy5yZWFzb259OiAke3RoaXMuZXhwbGFuYXRpb259YDsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gdGhpcy5yZWFzb247CiAgICAgIH0KICAgIH0KICB9CgogIC8qKgogICAqIEBpbnRlcmZhY2UKICAgKi8KICBjbGFzcyBab25lIHsKICAgIC8qKgogICAgICogVGhlIHR5cGUgb2Ygem9uZQogICAgICogQGFic3RyYWN0CiAgICAgKiBAdHlwZSB7c3RyaW5nfQogICAgICovCiAgICBnZXQgdHlwZSgpIHsKICAgICAgdGhyb3cgbmV3IFpvbmVJc0Fic3RyYWN0RXJyb3IoKTsKICAgIH0KCiAgICAvKioKICAgICAqIFRoZSBuYW1lIG9mIHRoaXMgem9uZS4KICAgICAqIEBhYnN0cmFjdAogICAgICogQHR5cGUge3N0cmluZ30KICAgICAqLwogICAgZ2V0IG5hbWUoKSB7CiAgICAgIHRocm93IG5ldyBab25lSXNBYnN0cmFjdEVycm9yKCk7CiAgICB9CgogICAgZ2V0IGlhbmFOYW1lKCkgewogICAgICByZXR1cm4gdGhpcy5uYW1lOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBvZmZzZXQgaXMga25vd24gdG8gYmUgZml4ZWQgZm9yIHRoZSB3aG9sZSB5ZWFyLgogICAgICogQGFic3RyYWN0CiAgICAgKiBAdHlwZSB7Ym9vbGVhbn0KICAgICAqLwogICAgZ2V0IGlzVW5pdmVyc2FsKCkgewogICAgICB0aHJvdyBuZXcgWm9uZUlzQWJzdHJhY3RFcnJvcigpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyB0aGUgb2Zmc2V0J3MgY29tbW9uIG5hbWUgKHN1Y2ggYXMgRVNUKSBhdCB0aGUgc3BlY2lmaWVkIHRpbWVzdGFtcAogICAgICogQGFic3RyYWN0CiAgICAgKiBAcGFyYW0ge251bWJlcn0gdHMgLSBFcG9jaCBtaWxsaXNlY29uZHMgZm9yIHdoaWNoIHRvIGdldCB0aGUgbmFtZQogICAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBPcHRpb25zIHRvIGFmZmVjdCB0aGUgZm9ybWF0CiAgICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0cy5mb3JtYXQgLSBXaGF0IHN0eWxlIG9mIG9mZnNldCB0byByZXR1cm4uIEFjY2VwdHMgJ2xvbmcnIG9yICdzaG9ydCcuCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0cy5sb2NhbGUgLSBXaGF0IGxvY2FsZSB0byByZXR1cm4gdGhlIG9mZnNldCBuYW1lIGluLgogICAgICogQHJldHVybiB7c3RyaW5nfQogICAgICovCiAgICBvZmZzZXROYW1lKHRzLCBvcHRzKSB7CiAgICAgIHRocm93IG5ldyBab25lSXNBYnN0cmFjdEVycm9yKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSBvZmZzZXQncyB2YWx1ZSBhcyBhIHN0cmluZwogICAgICogQGFic3RyYWN0CiAgICAgKiBAcGFyYW0ge251bWJlcn0gdHMgLSBFcG9jaCBtaWxsaXNlY29uZHMgZm9yIHdoaWNoIHRvIGdldCB0aGUgb2Zmc2V0CiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZm9ybWF0IC0gV2hhdCBzdHlsZSBvZiBvZmZzZXQgdG8gcmV0dXJuLgogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgIEFjY2VwdHMgJ25hcnJvdycsICdzaG9ydCcsIG9yICd0ZWNoaWUnLiBSZXR1cm5pbmcgJys2JywgJyswNjowMCcsIG9yICcrMDYwMCcgcmVzcGVjdGl2ZWx5CiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9CiAgICAgKi8KICAgIGZvcm1hdE9mZnNldCh0cywgZm9ybWF0KSB7CiAgICAgIHRocm93IG5ldyBab25lSXNBYnN0cmFjdEVycm9yKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIG9mZnNldCBpbiBtaW51dGVzIGZvciB0aGlzIHpvbmUgYXQgdGhlIHNwZWNpZmllZCB0aW1lc3RhbXAuCiAgICAgKiBAYWJzdHJhY3QKICAgICAqIEBwYXJhbSB7bnVtYmVyfSB0cyAtIEVwb2NoIG1pbGxpc2Vjb25kcyBmb3Igd2hpY2ggdG8gY29tcHV0ZSB0aGUgb2Zmc2V0CiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9CiAgICAgKi8KICAgIG9mZnNldCh0cykgewogICAgICB0aHJvdyBuZXcgWm9uZUlzQWJzdHJhY3RFcnJvcigpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHdoZXRoZXIgdGhpcyBab25lIGlzIGVxdWFsIHRvIGFub3RoZXIgem9uZQogICAgICogQGFic3RyYWN0CiAgICAgKiBAcGFyYW0ge1pvbmV9IG90aGVyWm9uZSAtIHRoZSB6b25lIHRvIGNvbXBhcmUKICAgICAqIEByZXR1cm4ge2Jvb2xlYW59CiAgICAgKi8KICAgIGVxdWFscyhvdGhlclpvbmUpIHsKICAgICAgdGhyb3cgbmV3IFpvbmVJc0Fic3RyYWN0RXJyb3IoKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB3aGV0aGVyIHRoaXMgWm9uZSBpcyB2YWxpZC4KICAgICAqIEBhYnN0cmFjdAogICAgICogQHR5cGUge2Jvb2xlYW59CiAgICAgKi8KICAgIGdldCBpc1ZhbGlkKCkgewogICAgICB0aHJvdyBuZXcgWm9uZUlzQWJzdHJhY3RFcnJvcigpOwogICAgfQogIH0KCiAgbGV0IHNpbmdsZXRvbiQxID0gbnVsbDsKCiAgLyoqCiAgICogUmVwcmVzZW50cyB0aGUgbG9jYWwgem9uZSBmb3IgdGhpcyBKYXZhU2NyaXB0IGVudmlyb25tZW50LgogICAqIEBpbXBsZW1lbnRzIHtab25lfQogICAqLwogIGNsYXNzIFN5c3RlbVpvbmUgZXh0ZW5kcyBab25lIHsKICAgIC8qKgogICAgICogR2V0IGEgc2luZ2xldG9uIGluc3RhbmNlIG9mIHRoZSBsb2NhbCB6b25lCiAgICAgKiBAcmV0dXJuIHtTeXN0ZW1ab25lfQogICAgICovCiAgICBzdGF0aWMgZ2V0IGluc3RhbmNlKCkgewogICAgICBpZiAoc2luZ2xldG9uJDEgPT09IG51bGwpIHsKICAgICAgICBzaW5nbGV0b24kMSA9IG5ldyBTeXN0ZW1ab25lKCk7CiAgICAgIH0KICAgICAgcmV0dXJuIHNpbmdsZXRvbiQxOwogICAgfQoKICAgIC8qKiBAb3ZlcnJpZGUgKiovCiAgICBnZXQgdHlwZSgpIHsKICAgICAgcmV0dXJuICJzeXN0ZW0iOwogICAgfQoKICAgIC8qKiBAb3ZlcnJpZGUgKiovCiAgICBnZXQgbmFtZSgpIHsKICAgICAgcmV0dXJuIG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KCkucmVzb2x2ZWRPcHRpb25zKCkudGltZVpvbmU7CiAgICB9CgogICAgLyoqIEBvdmVycmlkZSAqKi8KICAgIGdldCBpc1VuaXZlcnNhbCgpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIC8qKiBAb3ZlcnJpZGUgKiovCiAgICBvZmZzZXROYW1lKHRzLCB7IGZvcm1hdCwgbG9jYWxlIH0pIHsKICAgICAgcmV0dXJuIHBhcnNlWm9uZUluZm8odHMsIGZvcm1hdCwgbG9jYWxlKTsKICAgIH0KCiAgICAvKiogQG92ZXJyaWRlICoqLwogICAgZm9ybWF0T2Zmc2V0KHRzLCBmb3JtYXQpIHsKICAgICAgcmV0dXJuIGZvcm1hdE9mZnNldCh0aGlzLm9mZnNldCh0cyksIGZvcm1hdCk7CiAgICB9CgogICAgLyoqIEBvdmVycmlkZSAqKi8KICAgIG9mZnNldCh0cykgewogICAgICByZXR1cm4gLW5ldyBEYXRlKHRzKS5nZXRUaW1lem9uZU9mZnNldCgpOwogICAgfQoKICAgIC8qKiBAb3ZlcnJpZGUgKiovCiAgICBlcXVhbHMob3RoZXJab25lKSB7CiAgICAgIHJldHVybiBvdGhlclpvbmUudHlwZSA9PT0gInN5c3RlbSI7CiAgICB9CgogICAgLyoqIEBvdmVycmlkZSAqKi8KICAgIGdldCBpc1ZhbGlkKCkgewogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICB9CgogIGxldCBkdGZDYWNoZSA9IHt9OwogIGZ1bmN0aW9uIG1ha2VEVEYoem9uZSkgewogICAgaWYgKCFkdGZDYWNoZVt6b25lXSkgewogICAgICBkdGZDYWNoZVt6b25lXSA9IG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KCJlbi1VUyIsIHsKICAgICAgICBob3VyMTI6IGZhbHNlLAogICAgICAgIHRpbWVab25lOiB6b25lLAogICAgICAgIHllYXI6ICJudW1lcmljIiwKICAgICAgICBtb250aDogIjItZGlnaXQiLAogICAgICAgIGRheTogIjItZGlnaXQiLAogICAgICAgIGhvdXI6ICIyLWRpZ2l0IiwKICAgICAgICBtaW51dGU6ICIyLWRpZ2l0IiwKICAgICAgICBzZWNvbmQ6ICIyLWRpZ2l0IiwKICAgICAgICBlcmE6ICJzaG9ydCIsCiAgICAgIH0pOwogICAgfQogICAgcmV0dXJuIGR0ZkNhY2hlW3pvbmVdOwogIH0KCiAgY29uc3QgdHlwZVRvUG9zID0gewogICAgeWVhcjogMCwKICAgIG1vbnRoOiAxLAogICAgZGF5OiAyLAogICAgZXJhOiAzLAogICAgaG91cjogNCwKICAgIG1pbnV0ZTogNSwKICAgIHNlY29uZDogNiwKICB9OwoKICBmdW5jdGlvbiBoYWNreU9mZnNldChkdGYsIGRhdGUpIHsKICAgIGNvbnN0IGZvcm1hdHRlZCA9IGR0Zi5mb3JtYXQoZGF0ZSkucmVwbGFjZSgvXHUyMDBFL2csICIiKSwKICAgICAgcGFyc2VkID0gLyhcZCspXC8oXGQrKVwvKFxkKykgKEFEfEJDKSw/IChcZCspOihcZCspOihcZCspLy5leGVjKGZvcm1hdHRlZCksCiAgICAgIFssIGZNb250aCwgZkRheSwgZlllYXIsIGZhZE9yQmMsIGZIb3VyLCBmTWludXRlLCBmU2Vjb25kXSA9IHBhcnNlZDsKICAgIHJldHVybiBbZlllYXIsIGZNb250aCwgZkRheSwgZmFkT3JCYywgZkhvdXIsIGZNaW51dGUsIGZTZWNvbmRdOwogIH0KCiAgZnVuY3Rpb24gcGFydHNPZmZzZXQoZHRmLCBkYXRlKSB7CiAgICBjb25zdCBmb3JtYXR0ZWQgPSBkdGYuZm9ybWF0VG9QYXJ0cyhkYXRlKTsKICAgIGNvbnN0IGZpbGxlZCA9IFtdOwogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmb3JtYXR0ZWQubGVuZ3RoOyBpKyspIHsKICAgICAgY29uc3QgeyB0eXBlLCB2YWx1ZSB9ID0gZm9ybWF0dGVkW2ldOwogICAgICBjb25zdCBwb3MgPSB0eXBlVG9Qb3NbdHlwZV07CgogICAgICBpZiAodHlwZSA9PT0gImVyYSIpIHsKICAgICAgICBmaWxsZWRbcG9zXSA9IHZhbHVlOwogICAgICB9IGVsc2UgaWYgKCFpc1VuZGVmaW5lZChwb3MpKSB7CiAgICAgICAgZmlsbGVkW3Bvc10gPSBwYXJzZUludCh2YWx1ZSwgMTApOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gZmlsbGVkOwogIH0KCiAgbGV0IGlhbmFab25lQ2FjaGUgPSB7fTsKICAvKioKICAgKiBBIHpvbmUgaWRlbnRpZmllZCBieSBhbiBJQU5BIGlkZW50aWZpZXIsIGxpa2UgQW1lcmljYS9OZXdfWW9yawogICAqIEBpbXBsZW1lbnRzIHtab25lfQogICAqLwogIGNsYXNzIElBTkFab25lIGV4dGVuZHMgWm9uZSB7CiAgICAvKioKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIC0gWm9uZSBuYW1lCiAgICAgKiBAcmV0dXJuIHtJQU5BWm9uZX0KICAgICAqLwogICAgc3RhdGljIGNyZWF0ZShuYW1lKSB7CiAgICAgIGlmICghaWFuYVpvbmVDYWNoZVtuYW1lXSkgewogICAgICAgIGlhbmFab25lQ2FjaGVbbmFtZV0gPSBuZXcgSUFOQVpvbmUobmFtZSk7CiAgICAgIH0KICAgICAgcmV0dXJuIGlhbmFab25lQ2FjaGVbbmFtZV07CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXNldCBsb2NhbCBjYWNoZXMuIFNob3VsZCBvbmx5IGJlIG5lY2Vzc2FyeSBpbiB0ZXN0aW5nIHNjZW5hcmlvcy4KICAgICAqIEByZXR1cm4ge3ZvaWR9CiAgICAgKi8KICAgIHN0YXRpYyByZXNldENhY2hlKCkgewogICAgICBpYW5hWm9uZUNhY2hlID0ge307CiAgICAgIGR0ZkNhY2hlID0ge307CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhlIHByb3ZpZGVkIHN0cmluZyBpcyBhIHZhbGlkIHNwZWNpZmllci4gVGhpcyBvbmx5IGNoZWNrcyB0aGUgc3RyaW5nJ3MgZm9ybWF0LCBub3QgdGhhdCB0aGUgc3BlY2lmaWVyIGlkZW50aWZpZXMgYSBrbm93biB6b25lOyBzZWUgaXNWYWxpZFpvbmUgZm9yIHRoYXQuCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcyAtIFRoZSBzdHJpbmcgdG8gY2hlY2sgdmFsaWRpdHkgb24KICAgICAqIEBleGFtcGxlIElBTkFab25lLmlzVmFsaWRTcGVjaWZpZXIoIkFtZXJpY2EvTmV3X1lvcmsiKSAvLz0+IHRydWUKICAgICAqIEBleGFtcGxlIElBTkFab25lLmlzVmFsaWRTcGVjaWZpZXIoIlNwb3J0fn5ibG9ycCIpIC8vPT4gZmFsc2UKICAgICAqIEBkZXByZWNhdGVkIFRoaXMgbWV0aG9kIHJldHVybnMgZmFsc2UgZm9yIHNvbWUgdmFsaWQgSUFOQSBuYW1lcy4gVXNlIGlzVmFsaWRab25lIGluc3RlYWQuCiAgICAgKiBAcmV0dXJuIHtib29sZWFufQogICAgICovCiAgICBzdGF0aWMgaXNWYWxpZFNwZWNpZmllcihzKSB7CiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWRab25lKHMpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBwcm92aWRlZCBzdHJpbmcgaWRlbnRpZmllcyBhIHJlYWwgem9uZQogICAgICogQHBhcmFtIHtzdHJpbmd9IHpvbmUgLSBUaGUgc3RyaW5nIHRvIGNoZWNrCiAgICAgKiBAZXhhbXBsZSBJQU5BWm9uZS5pc1ZhbGlkWm9uZSgiQW1lcmljYS9OZXdfWW9yayIpIC8vPT4gdHJ1ZQogICAgICogQGV4YW1wbGUgSUFOQVpvbmUuaXNWYWxpZFpvbmUoIkZhbnRhc2lhL0Nhc3RsZSIpIC8vPT4gZmFsc2UKICAgICAqIEBleGFtcGxlIElBTkFab25lLmlzVmFsaWRab25lKCJTcG9ydH5+YmxvcnAiKSAvLz0+IGZhbHNlCiAgICAgKiBAcmV0dXJuIHtib29sZWFufQogICAgICovCiAgICBzdGF0aWMgaXNWYWxpZFpvbmUoem9uZSkgewogICAgICBpZiAoIXpvbmUpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgdHJ5IHsKICAgICAgICBuZXcgSW50bC5EYXRlVGltZUZvcm1hdCgiZW4tVVMiLCB7IHRpbWVab25lOiB6b25lIH0pLmZvcm1hdCgpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICB9CgogICAgY29uc3RydWN0b3IobmFtZSkgewogICAgICBzdXBlcigpOwogICAgICAvKiogQHByaXZhdGUgKiovCiAgICAgIHRoaXMuem9uZU5hbWUgPSBuYW1lOwogICAgICAvKiogQHByaXZhdGUgKiovCiAgICAgIHRoaXMudmFsaWQgPSBJQU5BWm9uZS5pc1ZhbGlkWm9uZShuYW1lKTsKICAgIH0KCiAgICAvKiogQG92ZXJyaWRlICoqLwogICAgZ2V0IHR5cGUoKSB7CiAgICAgIHJldHVybiAiaWFuYSI7CiAgICB9CgogICAgLyoqIEBvdmVycmlkZSAqKi8KICAgIGdldCBuYW1lKCkgewogICAgICByZXR1cm4gdGhpcy56b25lTmFtZTsKICAgIH0KCiAgICAvKiogQG92ZXJyaWRlICoqLwogICAgZ2V0IGlzVW5pdmVyc2FsKCkgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgLyoqIEBvdmVycmlkZSAqKi8KICAgIG9mZnNldE5hbWUodHMsIHsgZm9ybWF0LCBsb2NhbGUgfSkgewogICAgICByZXR1cm4gcGFyc2Vab25lSW5mbyh0cywgZm9ybWF0LCBsb2NhbGUsIHRoaXMubmFtZSk7CiAgICB9CgogICAgLyoqIEBvdmVycmlkZSAqKi8KICAgIGZvcm1hdE9mZnNldCh0cywgZm9ybWF0KSB7CiAgICAgIHJldHVybiBmb3JtYXRPZmZzZXQodGhpcy5vZmZzZXQodHMpLCBmb3JtYXQpOwogICAgfQoKICAgIC8qKiBAb3ZlcnJpZGUgKiovCiAgICBvZmZzZXQodHMpIHsKICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHRzKTsKCiAgICAgIGlmIChpc05hTihkYXRlKSkgcmV0dXJuIE5hTjsKCiAgICAgIGNvbnN0IGR0ZiA9IG1ha2VEVEYodGhpcy5uYW1lKTsKICAgICAgbGV0IFt5ZWFyLCBtb250aCwgZGF5LCBhZE9yQmMsIGhvdXIsIG1pbnV0ZSwgc2Vjb25kXSA9IGR0Zi5mb3JtYXRUb1BhcnRzCiAgICAgICAgPyBwYXJ0c09mZnNldChkdGYsIGRhdGUpCiAgICAgICAgOiBoYWNreU9mZnNldChkdGYsIGRhdGUpOwoKICAgICAgaWYgKGFkT3JCYyA9PT0gIkJDIikgewogICAgICAgIHllYXIgPSAtTWF0aC5hYnMoeWVhcikgKyAxOwogICAgICB9CgogICAgICAvLyBiZWNhdXNlIHdlJ3JlIHVzaW5nIGhvdXIxMiBhbmQgaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9MTAyNTU2NCZjYW49MiZxPSUyMjI0JTNBMDAlMjIlMjBkYXRldGltZWZvcm1hdAogICAgICBjb25zdCBhZGp1c3RlZEhvdXIgPSBob3VyID09PSAyNCA/IDAgOiBob3VyOwoKICAgICAgY29uc3QgYXNVVEMgPSBvYmpUb0xvY2FsVFMoewogICAgICAgIHllYXIsCiAgICAgICAgbW9udGgsCiAgICAgICAgZGF5LAogICAgICAgIGhvdXI6IGFkanVzdGVkSG91ciwKICAgICAgICBtaW51dGUsCiAgICAgICAgc2Vjb25kLAogICAgICAgIG1pbGxpc2Vjb25kOiAwLAogICAgICB9KTsKCiAgICAgIGxldCBhc1RTID0gK2RhdGU7CiAgICAgIGNvbnN0IG92ZXIgPSBhc1RTICUgMTAwMDsKICAgICAgYXNUUyAtPSBvdmVyID49IDAgPyBvdmVyIDogMTAwMCArIG92ZXI7CiAgICAgIHJldHVybiAoYXNVVEMgLSBhc1RTKSAvICg2MCAqIDEwMDApOwogICAgfQoKICAgIC8qKiBAb3ZlcnJpZGUgKiovCiAgICBlcXVhbHMob3RoZXJab25lKSB7CiAgICAgIHJldHVybiBvdGhlclpvbmUudHlwZSA9PT0gImlhbmEiICYmIG90aGVyWm9uZS5uYW1lID09PSB0aGlzLm5hbWU7CiAgICB9CgogICAgLyoqIEBvdmVycmlkZSAqKi8KICAgIGdldCBpc1ZhbGlkKCkgewogICAgICByZXR1cm4gdGhpcy52YWxpZDsKICAgIH0KICB9CgogIGxldCBzaW5nbGV0b24gPSBudWxsOwoKICAvKioKICAgKiBBIHpvbmUgd2l0aCBhIGZpeGVkIG9mZnNldCAobWVhbmluZyBubyBEU1QpCiAgICogQGltcGxlbWVudHMge1pvbmV9CiAgICovCiAgY2xhc3MgRml4ZWRPZmZzZXRab25lIGV4dGVuZHMgWm9uZSB7CiAgICAvKioKICAgICAqIEdldCBhIHNpbmdsZXRvbiBpbnN0YW5jZSBvZiBVVEMKICAgICAqIEByZXR1cm4ge0ZpeGVkT2Zmc2V0Wm9uZX0KICAgICAqLwogICAgc3RhdGljIGdldCB1dGNJbnN0YW5jZSgpIHsKICAgICAgaWYgKHNpbmdsZXRvbiA9PT0gbnVsbCkgewogICAgICAgIHNpbmdsZXRvbiA9IG5ldyBGaXhlZE9mZnNldFpvbmUoMCk7CiAgICAgIH0KICAgICAgcmV0dXJuIHNpbmdsZXRvbjsKICAgIH0KCiAgICAvKioKICAgICAqIEdldCBhbiBpbnN0YW5jZSB3aXRoIGEgc3BlY2lmaWVkIG9mZnNldAogICAgICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCAtIFRoZSBvZmZzZXQgaW4gbWludXRlcwogICAgICogQHJldHVybiB7Rml4ZWRPZmZzZXRab25lfQogICAgICovCiAgICBzdGF0aWMgaW5zdGFuY2Uob2Zmc2V0KSB7CiAgICAgIHJldHVybiBvZmZzZXQgPT09IDAgPyBGaXhlZE9mZnNldFpvbmUudXRjSW5zdGFuY2UgOiBuZXcgRml4ZWRPZmZzZXRab25lKG9mZnNldCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQgYW4gaW5zdGFuY2Ugb2YgRml4ZWRPZmZzZXRab25lIGZyb20gYSBVVEMgb2Zmc2V0IHN0cmluZywgbGlrZSAiVVRDKzYiCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcyAtIFRoZSBvZmZzZXQgc3RyaW5nIHRvIHBhcnNlCiAgICAgKiBAZXhhbXBsZSBGaXhlZE9mZnNldFpvbmUucGFyc2VTcGVjaWZpZXIoIlVUQys2IikKICAgICAqIEBleGFtcGxlIEZpeGVkT2Zmc2V0Wm9uZS5wYXJzZVNwZWNpZmllcigiVVRDKzA2IikKICAgICAqIEBleGFtcGxlIEZpeGVkT2Zmc2V0Wm9uZS5wYXJzZVNwZWNpZmllcigiVVRDLTY6MDAiKQogICAgICogQHJldHVybiB7Rml4ZWRPZmZzZXRab25lfQogICAgICovCiAgICBzdGF0aWMgcGFyc2VTcGVjaWZpZXIocykgewogICAgICBpZiAocykgewogICAgICAgIGNvbnN0IHIgPSBzLm1hdGNoKC9edXRjKD86KFsrLV1cZHsxLDJ9KSg/OjooXGR7Mn0pKT8pPyQvaSk7CiAgICAgICAgaWYgKHIpIHsKICAgICAgICAgIHJldHVybiBuZXcgRml4ZWRPZmZzZXRab25lKHNpZ25lZE9mZnNldChyWzFdLCByWzJdKSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBudWxsOwogICAgfQoKICAgIGNvbnN0cnVjdG9yKG9mZnNldCkgewogICAgICBzdXBlcigpOwogICAgICAvKiogQHByaXZhdGUgKiovCiAgICAgIHRoaXMuZml4ZWQgPSBvZmZzZXQ7CiAgICB9CgogICAgLyoqIEBvdmVycmlkZSAqKi8KICAgIGdldCB0eXBlKCkgewogICAgICByZXR1cm4gImZpeGVkIjsKICAgIH0KCiAgICAvKiogQG92ZXJyaWRlICoqLwogICAgZ2V0IG5hbWUoKSB7CiAgICAgIHJldHVybiB0aGlzLmZpeGVkID09PSAwID8gIlVUQyIgOiBgVVRDJHtmb3JtYXRPZmZzZXQodGhpcy5maXhlZCwgIm5hcnJvdyIpfWA7CiAgICB9CgogICAgZ2V0IGlhbmFOYW1lKCkgewogICAgICBpZiAodGhpcy5maXhlZCA9PT0gMCkgewogICAgICAgIHJldHVybiAiRXRjL1VUQyI7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIGBFdGMvR01UJHtmb3JtYXRPZmZzZXQoLXRoaXMuZml4ZWQsICJuYXJyb3ciKX1gOwogICAgICB9CiAgICB9CgogICAgLyoqIEBvdmVycmlkZSAqKi8KICAgIG9mZnNldE5hbWUoKSB7CiAgICAgIHJldHVybiB0aGlzLm5hbWU7CiAgICB9CgogICAgLyoqIEBvdmVycmlkZSAqKi8KICAgIGZvcm1hdE9mZnNldCh0cywgZm9ybWF0KSB7CiAgICAgIHJldHVybiBmb3JtYXRPZmZzZXQodGhpcy5maXhlZCwgZm9ybWF0KTsKICAgIH0KCiAgICAvKiogQG92ZXJyaWRlICoqLwogICAgZ2V0IGlzVW5pdmVyc2FsKCkgewogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKiogQG92ZXJyaWRlICoqLwogICAgb2Zmc2V0KCkgewogICAgICByZXR1cm4gdGhpcy5maXhlZDsKICAgIH0KCiAgICAvKiogQG92ZXJyaWRlICoqLwogICAgZXF1YWxzKG90aGVyWm9uZSkgewogICAgICByZXR1cm4gb3RoZXJab25lLnR5cGUgPT09ICJmaXhlZCIgJiYgb3RoZXJab25lLmZpeGVkID09PSB0aGlzLmZpeGVkOwogICAgfQoKICAgIC8qKiBAb3ZlcnJpZGUgKiovCiAgICBnZXQgaXNWYWxpZCgpIHsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgfQoKICAvKioKICAgKiBBIHpvbmUgdGhhdCBmYWlsZWQgdG8gcGFyc2UuIFlvdSBzaG91bGQgbmV2ZXIgbmVlZCB0byBpbnN0YW50aWF0ZSB0aGlzLgogICAqIEBpbXBsZW1lbnRzIHtab25lfQogICAqLwogIGNsYXNzIEludmFsaWRab25lIGV4dGVuZHMgWm9uZSB7CiAgICBjb25zdHJ1Y3Rvcih6b25lTmFtZSkgewogICAgICBzdXBlcigpOwogICAgICAvKiogIEBwcml2YXRlICovCiAgICAgIHRoaXMuem9uZU5hbWUgPSB6b25lTmFtZTsKICAgIH0KCiAgICAvKiogQG92ZXJyaWRlICoqLwogICAgZ2V0IHR5cGUoKSB7CiAgICAgIHJldHVybiAiaW52YWxpZCI7CiAgICB9CgogICAgLyoqIEBvdmVycmlkZSAqKi8KICAgIGdldCBuYW1lKCkgewogICAgICByZXR1cm4gdGhpcy56b25lTmFtZTsKICAgIH0KCiAgICAvKiogQG92ZXJyaWRlICoqLwogICAgZ2V0IGlzVW5pdmVyc2FsKCkgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgLyoqIEBvdmVycmlkZSAqKi8KICAgIG9mZnNldE5hbWUoKSB7CiAgICAgIHJldHVybiBudWxsOwogICAgfQoKICAgIC8qKiBAb3ZlcnJpZGUgKiovCiAgICBmb3JtYXRPZmZzZXQoKSB7CiAgICAgIHJldHVybiAiIjsKICAgIH0KCiAgICAvKiogQG92ZXJyaWRlICoqLwogICAgb2Zmc2V0KCkgewogICAgICByZXR1cm4gTmFOOwogICAgfQoKICAgIC8qKiBAb3ZlcnJpZGUgKiovCiAgICBlcXVhbHMoKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICAvKiogQG92ZXJyaWRlICoqLwogICAgZ2V0IGlzVmFsaWQoKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICB9CgogIC8qKgogICAqIEBwcml2YXRlCiAgICovCgogIGZ1bmN0aW9uIG5vcm1hbGl6ZVpvbmUoaW5wdXQsIGRlZmF1bHRab25lKSB7CiAgICBpZiAoaXNVbmRlZmluZWQoaW5wdXQpIHx8IGlucHV0ID09PSBudWxsKSB7CiAgICAgIHJldHVybiBkZWZhdWx0Wm9uZTsKICAgIH0gZWxzZSBpZiAoaW5wdXQgaW5zdGFuY2VvZiBab25lKSB7CiAgICAgIHJldHVybiBpbnB1dDsKICAgIH0gZWxzZSBpZiAoaXNTdHJpbmckMShpbnB1dCkpIHsKICAgICAgY29uc3QgbG93ZXJlZCA9IGlucHV0LnRvTG93ZXJDYXNlKCk7CiAgICAgIGlmIChsb3dlcmVkID09PSAiZGVmYXVsdCIpIHJldHVybiBkZWZhdWx0Wm9uZTsKICAgICAgZWxzZSBpZiAobG93ZXJlZCA9PT0gImxvY2FsIiB8fCBsb3dlcmVkID09PSAic3lzdGVtIikgcmV0dXJuIFN5c3RlbVpvbmUuaW5zdGFuY2U7CiAgICAgIGVsc2UgaWYgKGxvd2VyZWQgPT09ICJ1dGMiIHx8IGxvd2VyZWQgPT09ICJnbXQiKSByZXR1cm4gRml4ZWRPZmZzZXRab25lLnV0Y0luc3RhbmNlOwogICAgICBlbHNlIHJldHVybiBGaXhlZE9mZnNldFpvbmUucGFyc2VTcGVjaWZpZXIobG93ZXJlZCkgfHwgSUFOQVpvbmUuY3JlYXRlKGlucHV0KTsKICAgIH0gZWxzZSBpZiAoaXNOdW1iZXIkMShpbnB1dCkpIHsKICAgICAgcmV0dXJuIEZpeGVkT2Zmc2V0Wm9uZS5pbnN0YW5jZShpbnB1dCk7CiAgICB9IGVsc2UgaWYgKHR5cGVvZiBpbnB1dCA9PT0gIm9iamVjdCIgJiYgaW5wdXQub2Zmc2V0ICYmIHR5cGVvZiBpbnB1dC5vZmZzZXQgPT09ICJudW1iZXIiKSB7CiAgICAgIC8vIFRoaXMgaXMgZHVtYiwgYnV0IHRoZSBpbnN0YW5jZW9mIGNoZWNrIGFib3ZlIGRvZXNuJ3Qgc2VlbSB0byByZWFsbHkgd29yawogICAgICAvLyBzbyB3ZSdyZSBkdWNrIGNoZWNraW5nIGl0CiAgICAgIHJldHVybiBpbnB1dDsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBuZXcgSW52YWxpZFpvbmUoaW5wdXQpOwogICAgfQogIH0KCiAgbGV0IG5vdyA9ICgpID0+IERhdGUubm93KCksCiAgICBkZWZhdWx0Wm9uZSA9ICJzeXN0ZW0iLAogICAgZGVmYXVsdExvY2FsZSA9IG51bGwsCiAgICBkZWZhdWx0TnVtYmVyaW5nU3lzdGVtID0gbnVsbCwKICAgIGRlZmF1bHRPdXRwdXRDYWxlbmRhciA9IG51bGwsCiAgICB0aHJvd09uSW52YWxpZDsKCiAgLyoqCiAgICogU2V0dGluZ3MgY29udGFpbnMgc3RhdGljIGdldHRlcnMgYW5kIHNldHRlcnMgdGhhdCBjb250cm9sIEx1eG9uJ3Mgb3ZlcmFsbCBiZWhhdmlvci4gTHV4b24gaXMgYSBzaW1wbGUgbGlicmFyeSB3aXRoIGZldyBvcHRpb25zLCBidXQgdGhlIG9uZXMgaXQgZG9lcyBoYXZlIGxpdmUgaGVyZS4KICAgKi8KICBjbGFzcyBTZXR0aW5ncyB7CiAgICAvKioKICAgICAqIEdldCB0aGUgY2FsbGJhY2sgZm9yIHJldHVybmluZyB0aGUgY3VycmVudCB0aW1lc3RhbXAuCiAgICAgKiBAdHlwZSB7ZnVuY3Rpb259CiAgICAgKi8KICAgIHN0YXRpYyBnZXQgbm93KCkgewogICAgICByZXR1cm4gbm93OwogICAgfQoKICAgIC8qKgogICAgICogU2V0IHRoZSBjYWxsYmFjayBmb3IgcmV0dXJuaW5nIHRoZSBjdXJyZW50IHRpbWVzdGFtcC4KICAgICAqIFRoZSBmdW5jdGlvbiBzaG91bGQgcmV0dXJuIGEgbnVtYmVyLCB3aGljaCB3aWxsIGJlIGludGVycHJldGVkIGFzIGFuIEVwb2NoIG1pbGxpc2Vjb25kIGNvdW50CiAgICAgKiBAdHlwZSB7ZnVuY3Rpb259CiAgICAgKiBAZXhhbXBsZSBTZXR0aW5ncy5ub3cgPSAoKSA9PiBEYXRlLm5vdygpICsgMzAwMCAvLyBwcmV0ZW5kIGl0IGlzIDMgc2Vjb25kcyBpbiB0aGUgZnV0dXJlCiAgICAgKiBAZXhhbXBsZSBTZXR0aW5ncy5ub3cgPSAoKSA9PiAwIC8vIGFsd2F5cyBwcmV0ZW5kIGl0J3MgSmFuIDEsIDE5NzAgYXQgbWlkbmlnaHQgaW4gVVRDIHRpbWUKICAgICAqLwogICAgc3RhdGljIHNldCBub3cobikgewogICAgICBub3cgPSBuOwogICAgfQoKICAgIC8qKgogICAgICogU2V0IHRoZSBkZWZhdWx0IHRpbWUgem9uZSB0byBjcmVhdGUgRGF0ZVRpbWVzIGluLiBEb2VzIG5vdCBhZmZlY3QgZXhpc3RpbmcgaW5zdGFuY2VzLgogICAgICogVXNlIHRoZSB2YWx1ZSAic3lzdGVtIiB0byByZXNldCB0aGlzIHZhbHVlIHRvIHRoZSBzeXN0ZW0ncyB0aW1lIHpvbmUuCiAgICAgKiBAdHlwZSB7c3RyaW5nfQogICAgICovCiAgICBzdGF0aWMgc2V0IGRlZmF1bHRab25lKHpvbmUpIHsKICAgICAgZGVmYXVsdFpvbmUgPSB6b25lOwogICAgfQoKICAgIC8qKgogICAgICogR2V0IHRoZSBkZWZhdWx0IHRpbWUgem9uZSBvYmplY3QgY3VycmVudGx5IHVzZWQgdG8gY3JlYXRlIERhdGVUaW1lcy4gRG9lcyBub3QgYWZmZWN0IGV4aXN0aW5nIGluc3RhbmNlcy4KICAgICAqIFRoZSBkZWZhdWx0IHZhbHVlIGlzIHRoZSBzeXN0ZW0ncyB0aW1lIHpvbmUgKHRoZSBvbmUgc2V0IG9uIHRoZSBtYWNoaW5lIHRoYXQgcnVucyB0aGlzIGNvZGUpLgogICAgICogQHR5cGUge1pvbmV9CiAgICAgKi8KICAgIHN0YXRpYyBnZXQgZGVmYXVsdFpvbmUoKSB7CiAgICAgIHJldHVybiBub3JtYWxpemVab25lKGRlZmF1bHRab25lLCBTeXN0ZW1ab25lLmluc3RhbmNlKTsKICAgIH0KCiAgICAvKioKICAgICAqIEdldCB0aGUgZGVmYXVsdCBsb2NhbGUgdG8gY3JlYXRlIERhdGVUaW1lcyB3aXRoLiBEb2VzIG5vdCBhZmZlY3QgZXhpc3RpbmcgaW5zdGFuY2VzLgogICAgICogQHR5cGUge3N0cmluZ30KICAgICAqLwogICAgc3RhdGljIGdldCBkZWZhdWx0TG9jYWxlKCkgewogICAgICByZXR1cm4gZGVmYXVsdExvY2FsZTsKICAgIH0KCiAgICAvKioKICAgICAqIFNldCB0aGUgZGVmYXVsdCBsb2NhbGUgdG8gY3JlYXRlIERhdGVUaW1lcyB3aXRoLiBEb2VzIG5vdCBhZmZlY3QgZXhpc3RpbmcgaW5zdGFuY2VzLgogICAgICogQHR5cGUge3N0cmluZ30KICAgICAqLwogICAgc3RhdGljIHNldCBkZWZhdWx0TG9jYWxlKGxvY2FsZSkgewogICAgICBkZWZhdWx0TG9jYWxlID0gbG9jYWxlOwogICAgfQoKICAgIC8qKgogICAgICogR2V0IHRoZSBkZWZhdWx0IG51bWJlcmluZyBzeXN0ZW0gdG8gY3JlYXRlIERhdGVUaW1lcyB3aXRoLiBEb2VzIG5vdCBhZmZlY3QgZXhpc3RpbmcgaW5zdGFuY2VzLgogICAgICogQHR5cGUge3N0cmluZ30KICAgICAqLwogICAgc3RhdGljIGdldCBkZWZhdWx0TnVtYmVyaW5nU3lzdGVtKCkgewogICAgICByZXR1cm4gZGVmYXVsdE51bWJlcmluZ1N5c3RlbTsKICAgIH0KCiAgICAvKioKICAgICAqIFNldCB0aGUgZGVmYXVsdCBudW1iZXJpbmcgc3lzdGVtIHRvIGNyZWF0ZSBEYXRlVGltZXMgd2l0aC4gRG9lcyBub3QgYWZmZWN0IGV4aXN0aW5nIGluc3RhbmNlcy4KICAgICAqIEB0eXBlIHtzdHJpbmd9CiAgICAgKi8KICAgIHN0YXRpYyBzZXQgZGVmYXVsdE51bWJlcmluZ1N5c3RlbShudW1iZXJpbmdTeXN0ZW0pIHsKICAgICAgZGVmYXVsdE51bWJlcmluZ1N5c3RlbSA9IG51bWJlcmluZ1N5c3RlbTsKICAgIH0KCiAgICAvKioKICAgICAqIEdldCB0aGUgZGVmYXVsdCBvdXRwdXQgY2FsZW5kYXIgdG8gY3JlYXRlIERhdGVUaW1lcyB3aXRoLiBEb2VzIG5vdCBhZmZlY3QgZXhpc3RpbmcgaW5zdGFuY2VzLgogICAgICogQHR5cGUge3N0cmluZ30KICAgICAqLwogICAgc3RhdGljIGdldCBkZWZhdWx0T3V0cHV0Q2FsZW5kYXIoKSB7CiAgICAgIHJldHVybiBkZWZhdWx0T3V0cHV0Q2FsZW5kYXI7CiAgICB9CgogICAgLyoqCiAgICAgKiBTZXQgdGhlIGRlZmF1bHQgb3V0cHV0IGNhbGVuZGFyIHRvIGNyZWF0ZSBEYXRlVGltZXMgd2l0aC4gRG9lcyBub3QgYWZmZWN0IGV4aXN0aW5nIGluc3RhbmNlcy4KICAgICAqIEB0eXBlIHtzdHJpbmd9CiAgICAgKi8KICAgIHN0YXRpYyBzZXQgZGVmYXVsdE91dHB1dENhbGVuZGFyKG91dHB1dENhbGVuZGFyKSB7CiAgICAgIGRlZmF1bHRPdXRwdXRDYWxlbmRhciA9IG91dHB1dENhbGVuZGFyOwogICAgfQoKICAgIC8qKgogICAgICogR2V0IHdoZXRoZXIgTHV4b24gd2lsbCB0aHJvdyB3aGVuIGl0IGVuY291bnRlcnMgaW52YWxpZCBEYXRlVGltZXMsIER1cmF0aW9ucywgb3IgSW50ZXJ2YWxzCiAgICAgKiBAdHlwZSB7Ym9vbGVhbn0KICAgICAqLwogICAgc3RhdGljIGdldCB0aHJvd09uSW52YWxpZCgpIHsKICAgICAgcmV0dXJuIHRocm93T25JbnZhbGlkOwogICAgfQoKICAgIC8qKgogICAgICogU2V0IHdoZXRoZXIgTHV4b24gd2lsbCB0aHJvdyB3aGVuIGl0IGVuY291bnRlcnMgaW52YWxpZCBEYXRlVGltZXMsIER1cmF0aW9ucywgb3IgSW50ZXJ2YWxzCiAgICAgKiBAdHlwZSB7Ym9vbGVhbn0KICAgICAqLwogICAgc3RhdGljIHNldCB0aHJvd09uSW52YWxpZCh0KSB7CiAgICAgIHRocm93T25JbnZhbGlkID0gdDsKICAgIH0KCiAgICAvKioKICAgICAqIFJlc2V0IEx1eG9uJ3MgZ2xvYmFsIGNhY2hlcy4gU2hvdWxkIG9ubHkgYmUgbmVjZXNzYXJ5IGluIHRlc3Rpbmcgc2NlbmFyaW9zLgogICAgICogQHJldHVybiB7dm9pZH0KICAgICAqLwogICAgc3RhdGljIHJlc2V0Q2FjaGVzKCkgewogICAgICBMb2NhbGUucmVzZXRDYWNoZSgpOwogICAgICBJQU5BWm9uZS5yZXNldENhY2hlKCk7CiAgICB9CiAgfQoKICAvLyB0b2RvIC0gcmVtYXAgY2FjaGluZwoKICBsZXQgaW50bExGQ2FjaGUgPSB7fTsKICBmdW5jdGlvbiBnZXRDYWNoZWRMRihsb2NTdHJpbmcsIG9wdHMgPSB7fSkgewogICAgY29uc3Qga2V5ID0gSlNPTi5zdHJpbmdpZnkoW2xvY1N0cmluZywgb3B0c10pOwogICAgbGV0IGR0ZiA9IGludGxMRkNhY2hlW2tleV07CiAgICBpZiAoIWR0ZikgewogICAgICBkdGYgPSBuZXcgSW50bC5MaXN0Rm9ybWF0KGxvY1N0cmluZywgb3B0cyk7CiAgICAgIGludGxMRkNhY2hlW2tleV0gPSBkdGY7CiAgICB9CiAgICByZXR1cm4gZHRmOwogIH0KCiAgbGV0IGludGxEVENhY2hlID0ge307CiAgZnVuY3Rpb24gZ2V0Q2FjaGVkRFRGKGxvY1N0cmluZywgb3B0cyA9IHt9KSB7CiAgICBjb25zdCBrZXkgPSBKU09OLnN0cmluZ2lmeShbbG9jU3RyaW5nLCBvcHRzXSk7CiAgICBsZXQgZHRmID0gaW50bERUQ2FjaGVba2V5XTsKICAgIGlmICghZHRmKSB7CiAgICAgIGR0ZiA9IG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KGxvY1N0cmluZywgb3B0cyk7CiAgICAgIGludGxEVENhY2hlW2tleV0gPSBkdGY7CiAgICB9CiAgICByZXR1cm4gZHRmOwogIH0KCiAgbGV0IGludGxOdW1DYWNoZSA9IHt9OwogIGZ1bmN0aW9uIGdldENhY2hlZElORihsb2NTdHJpbmcsIG9wdHMgPSB7fSkgewogICAgY29uc3Qga2V5ID0gSlNPTi5zdHJpbmdpZnkoW2xvY1N0cmluZywgb3B0c10pOwogICAgbGV0IGluZiA9IGludGxOdW1DYWNoZVtrZXldOwogICAgaWYgKCFpbmYpIHsKICAgICAgaW5mID0gbmV3IEludGwuTnVtYmVyRm9ybWF0KGxvY1N0cmluZywgb3B0cyk7CiAgICAgIGludGxOdW1DYWNoZVtrZXldID0gaW5mOwogICAgfQogICAgcmV0dXJuIGluZjsKICB9CgogIGxldCBpbnRsUmVsQ2FjaGUgPSB7fTsKICBmdW5jdGlvbiBnZXRDYWNoZWRSVEYobG9jU3RyaW5nLCBvcHRzID0ge30pIHsKICAgIGNvbnN0IHsgYmFzZSwgLi4uY2FjaGVLZXlPcHRzIH0gPSBvcHRzOyAvLyBleGNsdWRlIGBiYXNlYCBmcm9tIHRoZSBvcHRpb25zCiAgICBjb25zdCBrZXkgPSBKU09OLnN0cmluZ2lmeShbbG9jU3RyaW5nLCBjYWNoZUtleU9wdHNdKTsKICAgIGxldCBpbmYgPSBpbnRsUmVsQ2FjaGVba2V5XTsKICAgIGlmICghaW5mKSB7CiAgICAgIGluZiA9IG5ldyBJbnRsLlJlbGF0aXZlVGltZUZvcm1hdChsb2NTdHJpbmcsIG9wdHMpOwogICAgICBpbnRsUmVsQ2FjaGVba2V5XSA9IGluZjsKICAgIH0KICAgIHJldHVybiBpbmY7CiAgfQoKICBsZXQgc3lzTG9jYWxlQ2FjaGUgPSBudWxsOwogIGZ1bmN0aW9uIHN5c3RlbUxvY2FsZSgpIHsKICAgIGlmIChzeXNMb2NhbGVDYWNoZSkgewogICAgICByZXR1cm4gc3lzTG9jYWxlQ2FjaGU7CiAgICB9IGVsc2UgewogICAgICBzeXNMb2NhbGVDYWNoZSA9IG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KCkucmVzb2x2ZWRPcHRpb25zKCkubG9jYWxlOwogICAgICByZXR1cm4gc3lzTG9jYWxlQ2FjaGU7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBwYXJzZUxvY2FsZVN0cmluZyhsb2NhbGVTdHIpIHsKICAgIC8vIEkgcmVhbGx5IHdhbnQgdG8gYXZvaWQgd3JpdGluZyBhIEJDUCA0NyBwYXJzZXIKICAgIC8vIHNlZSwgZS5nLiBodHRwczovL2dpdGh1Yi5jb20vd29vb3JtL2JjcC00NwogICAgLy8gSW5zdGVhZCwgd2UnbGwgZG8gdGhpczoKCiAgICAvLyBhKSBpZiB0aGUgc3RyaW5nIGhhcyBubyAtdSBleHRlbnNpb25zLCBqdXN0IGxlYXZlIGl0IGFsb25lCiAgICAvLyBiKSBpZiBpdCBkb2VzLCB1c2UgSW50bCB0byByZXNvbHZlIGV2ZXJ5dGhpbmcKICAgIC8vIGMpIGlmIEludGwgZmFpbHMsIHRyeSBhZ2FpbiB3aXRob3V0IHRoZSAtdQoKICAgIGNvbnN0IHVJbmRleCA9IGxvY2FsZVN0ci5pbmRleE9mKCItdS0iKTsKICAgIGlmICh1SW5kZXggPT09IC0xKSB7CiAgICAgIHJldHVybiBbbG9jYWxlU3RyXTsKICAgIH0gZWxzZSB7CiAgICAgIGxldCBvcHRpb25zOwogICAgICBjb25zdCBzbWFsbGVyID0gbG9jYWxlU3RyLnN1YnN0cmluZygwLCB1SW5kZXgpOwogICAgICB0cnkgewogICAgICAgIG9wdGlvbnMgPSBnZXRDYWNoZWREVEYobG9jYWxlU3RyKS5yZXNvbHZlZE9wdGlvbnMoKTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIG9wdGlvbnMgPSBnZXRDYWNoZWREVEYoc21hbGxlcikucmVzb2x2ZWRPcHRpb25zKCk7CiAgICAgIH0KCiAgICAgIGNvbnN0IHsgbnVtYmVyaW5nU3lzdGVtLCBjYWxlbmRhciB9ID0gb3B0aW9uczsKICAgICAgLy8gcmV0dXJuIHRoZSBzbWFsbGVyIG9uZSBzbyB0aGF0IHdlIGNhbiBhcHBlbmQgdGhlIGNhbGVuZGFyIGFuZCBudW1iZXJpbmcgb3ZlcnJpZGVzIHRvIGl0CiAgICAgIHJldHVybiBbc21hbGxlciwgbnVtYmVyaW5nU3lzdGVtLCBjYWxlbmRhcl07CiAgICB9CiAgfQoKICBmdW5jdGlvbiBpbnRsQ29uZmlnU3RyaW5nKGxvY2FsZVN0ciwgbnVtYmVyaW5nU3lzdGVtLCBvdXRwdXRDYWxlbmRhcikgewogICAgaWYgKG91dHB1dENhbGVuZGFyIHx8IG51bWJlcmluZ1N5c3RlbSkgewogICAgICBsb2NhbGVTdHIgKz0gIi11IjsKCiAgICAgIGlmIChvdXRwdXRDYWxlbmRhcikgewogICAgICAgIGxvY2FsZVN0ciArPSBgLWNhLSR7b3V0cHV0Q2FsZW5kYXJ9YDsKICAgICAgfQoKICAgICAgaWYgKG51bWJlcmluZ1N5c3RlbSkgewogICAgICAgIGxvY2FsZVN0ciArPSBgLW51LSR7bnVtYmVyaW5nU3lzdGVtfWA7CiAgICAgIH0KICAgICAgcmV0dXJuIGxvY2FsZVN0cjsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBsb2NhbGVTdHI7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBtYXBNb250aHMoZikgewogICAgY29uc3QgbXMgPSBbXTsKICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IDEyOyBpKyspIHsKICAgICAgY29uc3QgZHQgPSBEYXRlVGltZS51dGMoMjAxNiwgaSwgMSk7CiAgICAgIG1zLnB1c2goZihkdCkpOwogICAgfQogICAgcmV0dXJuIG1zOwogIH0KCiAgZnVuY3Rpb24gbWFwV2Vla2RheXMoZikgewogICAgY29uc3QgbXMgPSBbXTsKICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IDc7IGkrKykgewogICAgICBjb25zdCBkdCA9IERhdGVUaW1lLnV0YygyMDE2LCAxMSwgMTMgKyBpKTsKICAgICAgbXMucHVzaChmKGR0KSk7CiAgICB9CiAgICByZXR1cm4gbXM7CiAgfQoKICBmdW5jdGlvbiBsaXN0U3R1ZmYobG9jLCBsZW5ndGgsIGRlZmF1bHRPSywgZW5nbGlzaEZuLCBpbnRsRm4pIHsKICAgIGNvbnN0IG1vZGUgPSBsb2MubGlzdGluZ01vZGUoZGVmYXVsdE9LKTsKCiAgICBpZiAobW9kZSA9PT0gImVycm9yIikgewogICAgICByZXR1cm4gbnVsbDsKICAgIH0gZWxzZSBpZiAobW9kZSA9PT0gImVuIikgewogICAgICByZXR1cm4gZW5nbGlzaEZuKGxlbmd0aCk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gaW50bEZuKGxlbmd0aCk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBzdXBwb3J0c0Zhc3ROdW1iZXJzKGxvYykgewogICAgaWYgKGxvYy5udW1iZXJpbmdTeXN0ZW0gJiYgbG9jLm51bWJlcmluZ1N5c3RlbSAhPT0gImxhdG4iKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiAoCiAgICAgICAgbG9jLm51bWJlcmluZ1N5c3RlbSA9PT0gImxhdG4iIHx8CiAgICAgICAgIWxvYy5sb2NhbGUgfHwKICAgICAgICBsb2MubG9jYWxlLnN0YXJ0c1dpdGgoImVuIikgfHwKICAgICAgICBuZXcgSW50bC5EYXRlVGltZUZvcm1hdChsb2MuaW50bCkucmVzb2x2ZWRPcHRpb25zKCkubnVtYmVyaW5nU3lzdGVtID09PSAibGF0biIKICAgICAgKTsKICAgIH0KICB9CgogIC8qKgogICAqIEBwcml2YXRlCiAgICovCgogIGNsYXNzIFBvbHlOdW1iZXJGb3JtYXR0ZXIgewogICAgY29uc3RydWN0b3IoaW50bCwgZm9yY2VTaW1wbGUsIG9wdHMpIHsKICAgICAgdGhpcy5wYWRUbyA9IG9wdHMucGFkVG8gfHwgMDsKICAgICAgdGhpcy5mbG9vciA9IG9wdHMuZmxvb3IgfHwgZmFsc2U7CgogICAgICBjb25zdCB7IHBhZFRvLCBmbG9vciwgLi4ub3RoZXJPcHRzIH0gPSBvcHRzOwoKICAgICAgaWYgKCFmb3JjZVNpbXBsZSB8fCBPYmplY3Qua2V5cyhvdGhlck9wdHMpLmxlbmd0aCA+IDApIHsKICAgICAgICBjb25zdCBpbnRsT3B0cyA9IHsgdXNlR3JvdXBpbmc6IGZhbHNlLCAuLi5vcHRzIH07CiAgICAgICAgaWYgKG9wdHMucGFkVG8gPiAwKSBpbnRsT3B0cy5taW5pbXVtSW50ZWdlckRpZ2l0cyA9IG9wdHMucGFkVG87CiAgICAgICAgdGhpcy5pbmYgPSBnZXRDYWNoZWRJTkYoaW50bCwgaW50bE9wdHMpOwogICAgICB9CiAgICB9CgogICAgZm9ybWF0KGkpIHsKICAgICAgaWYgKHRoaXMuaW5mKSB7CiAgICAgICAgY29uc3QgZml4ZWQgPSB0aGlzLmZsb29yID8gTWF0aC5mbG9vcihpKSA6IGk7CiAgICAgICAgcmV0dXJuIHRoaXMuaW5mLmZvcm1hdChmaXhlZCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gdG8gbWF0Y2ggdGhlIGJyb3dzZXIncyBudW1iZXJmb3JtYXR0ZXIgZGVmYXVsdHMKICAgICAgICBjb25zdCBmaXhlZCA9IHRoaXMuZmxvb3IgPyBNYXRoLmZsb29yKGkpIDogcm91bmRUbyhpLCAzKTsKICAgICAgICByZXR1cm4gcGFkU3RhcnQoZml4ZWQsIHRoaXMucGFkVG8pOwogICAgICB9CiAgICB9CiAgfQoKICAvKioKICAgKiBAcHJpdmF0ZQogICAqLwoKICBjbGFzcyBQb2x5RGF0ZUZvcm1hdHRlciB7CiAgICBjb25zdHJ1Y3RvcihkdCwgaW50bCwgb3B0cykgewogICAgICB0aGlzLm9wdHMgPSBvcHRzOwoKICAgICAgbGV0IHo7CiAgICAgIGlmIChkdC56b25lLmlzVW5pdmVyc2FsKSB7CiAgICAgICAgLy8gVVRDLTggb3IgRXRjL1VUQy04IGFyZSBub3QgcGFydCBvZiB0emRhdGEsIG9ubHkgRXRjL0dNVCs4IGFuZCB0aGUgbGlrZS4KICAgICAgICAvLyBUaGF0IGlzIHdoeSBmaXhlZC1vZmZzZXQgVFogaXMgc2V0IHRvIHRoYXQgdW5sZXNzIGl0IGlzOgogICAgICAgIC8vIDEuIFJlcHJlc2VudGluZyBvZmZzZXQgMCB3aGVuIFVUQyBpcyB1c2VkIHRvIG1haW50YWluIHByZXZpb3VzIGJlaGF2aW9yIGFuZCBkb2VzIG5vdCBiZWNvbWUgR01ULgogICAgICAgIC8vIDIuIFVuc3VwcG9ydGVkIGJ5IHRoZSBicm93c2VyOgogICAgICAgIC8vICAgIC0gc29tZSBkbyBub3Qgc3VwcG9ydCBFdGMvCiAgICAgICAgLy8gICAgLSA8IEV0Yy9HTVQtMTQsID4gRXRjL0dNVCsxMiwgYW5kIDMwLW1pbnV0ZSBvciA0NS1taW51dGUgb2Zmc2V0cyBhcmUgbm90IHBhcnQgb2YgdHpkYXRhCiAgICAgICAgY29uc3QgZ210T2Zmc2V0ID0gLTEgKiAoZHQub2Zmc2V0IC8gNjApOwogICAgICAgIGNvbnN0IG9mZnNldFogPSBnbXRPZmZzZXQgPj0gMCA/IGBFdGMvR01UKyR7Z210T2Zmc2V0fWAgOiBgRXRjL0dNVCR7Z210T2Zmc2V0fWA7CiAgICAgICAgaWYgKGR0Lm9mZnNldCAhPT0gMCAmJiBJQU5BWm9uZS5jcmVhdGUob2Zmc2V0WikudmFsaWQpIHsKICAgICAgICAgIHogPSBvZmZzZXRaOwogICAgICAgICAgdGhpcy5kdCA9IGR0OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvLyBOb3QgYWxsIGZpeGVkLW9mZnNldCB6b25lcyBsaWtlIEV0Yy8rNDozMCBhcmUgcHJlc2VudCBpbiB0emRhdGEuCiAgICAgICAgICAvLyBTbyB3ZSBoYXZlIHRvIG1ha2UgZG8uIFR3byBjYXNlczoKICAgICAgICAgIC8vIDEuIFRoZSBmb3JtYXQgb3B0aW9ucyB0ZWxsIHVzIHRvIHNob3cgdGhlIHpvbmUuIFdlIGNhbid0IGRvIHRoYXQsIHNvIHRoZSBiZXN0CiAgICAgICAgICAvLyB3ZSBjYW4gZG8gaXMgZm9ybWF0IHRoZSBkYXRlIGluIFVUQy4KICAgICAgICAgIC8vIDIuIFRoZSBmb3JtYXQgb3B0aW9ucyBkb24ndCB0ZWxsIHVzIHRvIHNob3cgdGhlIHpvbmUuIFRoZW4gd2UgY2FuIGFkanVzdCB0aGVtCiAgICAgICAgICAvLyB0aGUgdGltZSBhbmQgdGVsbCB0aGUgZm9ybWF0dGVyIHRvIHNob3cgaXQgdG8gdXMgaW4gVVRDLCBzbyB0aGF0IHRoZSB0aW1lIGlzIHJpZ2h0CiAgICAgICAgICAvLyBhbmQgdGhlIGJhZCB6b25lIGRvZXNuJ3Qgc2hvdyB1cC4KICAgICAgICAgIHogPSAiVVRDIjsKICAgICAgICAgIGlmIChvcHRzLnRpbWVab25lTmFtZSkgewogICAgICAgICAgICB0aGlzLmR0ID0gZHQ7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLmR0ID0gZHQub2Zmc2V0ID09PSAwID8gZHQgOiBEYXRlVGltZS5mcm9tTWlsbGlzKGR0LnRzICsgZHQub2Zmc2V0ICogNjAgKiAxMDAwKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAoZHQuem9uZS50eXBlID09PSAic3lzdGVtIikgewogICAgICAgIHRoaXMuZHQgPSBkdDsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmR0ID0gZHQ7CiAgICAgICAgeiA9IGR0LnpvbmUubmFtZTsKICAgICAgfQoKICAgICAgY29uc3QgaW50bE9wdHMgPSB7IC4uLnRoaXMub3B0cyB9OwogICAgICBpZiAoeikgewogICAgICAgIGludGxPcHRzLnRpbWVab25lID0gejsKICAgICAgfQogICAgICB0aGlzLmR0ZiA9IGdldENhY2hlZERURihpbnRsLCBpbnRsT3B0cyk7CiAgICB9CgogICAgZm9ybWF0KCkgewogICAgICByZXR1cm4gdGhpcy5kdGYuZm9ybWF0KHRoaXMuZHQudG9KU0RhdGUoKSk7CiAgICB9CgogICAgZm9ybWF0VG9QYXJ0cygpIHsKICAgICAgcmV0dXJuIHRoaXMuZHRmLmZvcm1hdFRvUGFydHModGhpcy5kdC50b0pTRGF0ZSgpKTsKICAgIH0KCiAgICByZXNvbHZlZE9wdGlvbnMoKSB7CiAgICAgIHJldHVybiB0aGlzLmR0Zi5yZXNvbHZlZE9wdGlvbnMoKTsKICAgIH0KICB9CgogIC8qKgogICAqIEBwcml2YXRlCiAgICovCiAgY2xhc3MgUG9seVJlbEZvcm1hdHRlciB7CiAgICBjb25zdHJ1Y3RvcihpbnRsLCBpc0VuZ2xpc2gsIG9wdHMpIHsKICAgICAgdGhpcy5vcHRzID0geyBzdHlsZTogImxvbmciLCAuLi5vcHRzIH07CiAgICAgIGlmICghaXNFbmdsaXNoICYmIGhhc1JlbGF0aXZlKCkpIHsKICAgICAgICB0aGlzLnJ0ZiA9IGdldENhY2hlZFJURihpbnRsLCBvcHRzKTsKICAgICAgfQogICAgfQoKICAgIGZvcm1hdChjb3VudCwgdW5pdCkgewogICAgICBpZiAodGhpcy5ydGYpIHsKICAgICAgICByZXR1cm4gdGhpcy5ydGYuZm9ybWF0KGNvdW50LCB1bml0KTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gZm9ybWF0UmVsYXRpdmVUaW1lKHVuaXQsIGNvdW50LCB0aGlzLm9wdHMubnVtZXJpYywgdGhpcy5vcHRzLnN0eWxlICE9PSAibG9uZyIpOwogICAgICB9CiAgICB9CgogICAgZm9ybWF0VG9QYXJ0cyhjb3VudCwgdW5pdCkgewogICAgICBpZiAodGhpcy5ydGYpIHsKICAgICAgICByZXR1cm4gdGhpcy5ydGYuZm9ybWF0VG9QYXJ0cyhjb3VudCwgdW5pdCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9CiAgICB9CiAgfQoKICAvKioKICAgKiBAcHJpdmF0ZQogICAqLwoKICBjbGFzcyBMb2NhbGUgewogICAgc3RhdGljIGZyb21PcHRzKG9wdHMpIHsKICAgICAgcmV0dXJuIExvY2FsZS5jcmVhdGUob3B0cy5sb2NhbGUsIG9wdHMubnVtYmVyaW5nU3lzdGVtLCBvcHRzLm91dHB1dENhbGVuZGFyLCBvcHRzLmRlZmF1bHRUb0VOKTsKICAgIH0KCiAgICBzdGF0aWMgY3JlYXRlKGxvY2FsZSwgbnVtYmVyaW5nU3lzdGVtLCBvdXRwdXRDYWxlbmRhciwgZGVmYXVsdFRvRU4gPSBmYWxzZSkgewogICAgICBjb25zdCBzcGVjaWZpZWRMb2NhbGUgPSBsb2NhbGUgfHwgU2V0dGluZ3MuZGVmYXVsdExvY2FsZTsKICAgICAgLy8gdGhlIHN5c3RlbSBsb2NhbGUgaXMgdXNlZnVsIGZvciBodW1hbiByZWFkYWJsZSBzdHJpbmdzIGJ1dCBhbm5veWluZyBmb3IgcGFyc2luZy9mb3JtYXR0aW5nIGtub3duIGZvcm1hdHMKICAgICAgY29uc3QgbG9jYWxlUiA9IHNwZWNpZmllZExvY2FsZSB8fCAoZGVmYXVsdFRvRU4gPyAiZW4tVVMiIDogc3lzdGVtTG9jYWxlKCkpOwogICAgICBjb25zdCBudW1iZXJpbmdTeXN0ZW1SID0gbnVtYmVyaW5nU3lzdGVtIHx8IFNldHRpbmdzLmRlZmF1bHROdW1iZXJpbmdTeXN0ZW07CiAgICAgIGNvbnN0IG91dHB1dENhbGVuZGFyUiA9IG91dHB1dENhbGVuZGFyIHx8IFNldHRpbmdzLmRlZmF1bHRPdXRwdXRDYWxlbmRhcjsKICAgICAgcmV0dXJuIG5ldyBMb2NhbGUobG9jYWxlUiwgbnVtYmVyaW5nU3lzdGVtUiwgb3V0cHV0Q2FsZW5kYXJSLCBzcGVjaWZpZWRMb2NhbGUpOwogICAgfQoKICAgIHN0YXRpYyByZXNldENhY2hlKCkgewogICAgICBzeXNMb2NhbGVDYWNoZSA9IG51bGw7CiAgICAgIGludGxEVENhY2hlID0ge307CiAgICAgIGludGxOdW1DYWNoZSA9IHt9OwogICAgICBpbnRsUmVsQ2FjaGUgPSB7fTsKICAgIH0KCiAgICBzdGF0aWMgZnJvbU9iamVjdCh7IGxvY2FsZSwgbnVtYmVyaW5nU3lzdGVtLCBvdXRwdXRDYWxlbmRhciB9ID0ge30pIHsKICAgICAgcmV0dXJuIExvY2FsZS5jcmVhdGUobG9jYWxlLCBudW1iZXJpbmdTeXN0ZW0sIG91dHB1dENhbGVuZGFyKTsKICAgIH0KCiAgICBjb25zdHJ1Y3Rvcihsb2NhbGUsIG51bWJlcmluZywgb3V0cHV0Q2FsZW5kYXIsIHNwZWNpZmllZExvY2FsZSkgewogICAgICBjb25zdCBbcGFyc2VkTG9jYWxlLCBwYXJzZWROdW1iZXJpbmdTeXN0ZW0sIHBhcnNlZE91dHB1dENhbGVuZGFyXSA9IHBhcnNlTG9jYWxlU3RyaW5nKGxvY2FsZSk7CgogICAgICB0aGlzLmxvY2FsZSA9IHBhcnNlZExvY2FsZTsKICAgICAgdGhpcy5udW1iZXJpbmdTeXN0ZW0gPSBudW1iZXJpbmcgfHwgcGFyc2VkTnVtYmVyaW5nU3lzdGVtIHx8IG51bGw7CiAgICAgIHRoaXMub3V0cHV0Q2FsZW5kYXIgPSBvdXRwdXRDYWxlbmRhciB8fCBwYXJzZWRPdXRwdXRDYWxlbmRhciB8fCBudWxsOwogICAgICB0aGlzLmludGwgPSBpbnRsQ29uZmlnU3RyaW5nKHRoaXMubG9jYWxlLCB0aGlzLm51bWJlcmluZ1N5c3RlbSwgdGhpcy5vdXRwdXRDYWxlbmRhcik7CgogICAgICB0aGlzLndlZWtkYXlzQ2FjaGUgPSB7IGZvcm1hdDoge30sIHN0YW5kYWxvbmU6IHt9IH07CiAgICAgIHRoaXMubW9udGhzQ2FjaGUgPSB7IGZvcm1hdDoge30sIHN0YW5kYWxvbmU6IHt9IH07CiAgICAgIHRoaXMubWVyaWRpZW1DYWNoZSA9IG51bGw7CiAgICAgIHRoaXMuZXJhQ2FjaGUgPSB7fTsKCiAgICAgIHRoaXMuc3BlY2lmaWVkTG9jYWxlID0gc3BlY2lmaWVkTG9jYWxlOwogICAgICB0aGlzLmZhc3ROdW1iZXJzQ2FjaGVkID0gbnVsbDsKICAgIH0KCiAgICBnZXQgZmFzdE51bWJlcnMoKSB7CiAgICAgIGlmICh0aGlzLmZhc3ROdW1iZXJzQ2FjaGVkID09IG51bGwpIHsKICAgICAgICB0aGlzLmZhc3ROdW1iZXJzQ2FjaGVkID0gc3VwcG9ydHNGYXN0TnVtYmVycyh0aGlzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXMuZmFzdE51bWJlcnNDYWNoZWQ7CiAgICB9CgogICAgbGlzdGluZ01vZGUoKSB7CiAgICAgIGNvbnN0IGlzQWN0dWFsbHlFbiA9IHRoaXMuaXNFbmdsaXNoKCk7CiAgICAgIGNvbnN0IGhhc05vV2VpcmRuZXNzID0KICAgICAgICAodGhpcy5udW1iZXJpbmdTeXN0ZW0gPT09IG51bGwgfHwgdGhpcy5udW1iZXJpbmdTeXN0ZW0gPT09ICJsYXRuIikgJiYKICAgICAgICAodGhpcy5vdXRwdXRDYWxlbmRhciA9PT0gbnVsbCB8fCB0aGlzLm91dHB1dENhbGVuZGFyID09PSAiZ3JlZ29yeSIpOwogICAgICByZXR1cm4gaXNBY3R1YWxseUVuICYmIGhhc05vV2VpcmRuZXNzID8gImVuIiA6ICJpbnRsIjsKICAgIH0KCiAgICBjbG9uZShhbHRzKSB7CiAgICAgIGlmICghYWx0cyB8fCBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhhbHRzKS5sZW5ndGggPT09IDApIHsKICAgICAgICByZXR1cm4gdGhpczsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gTG9jYWxlLmNyZWF0ZSgKICAgICAgICAgIGFsdHMubG9jYWxlIHx8IHRoaXMuc3BlY2lmaWVkTG9jYWxlLAogICAgICAgICAgYWx0cy5udW1iZXJpbmdTeXN0ZW0gfHwgdGhpcy5udW1iZXJpbmdTeXN0ZW0sCiAgICAgICAgICBhbHRzLm91dHB1dENhbGVuZGFyIHx8IHRoaXMub3V0cHV0Q2FsZW5kYXIsCiAgICAgICAgICBhbHRzLmRlZmF1bHRUb0VOIHx8IGZhbHNlCiAgICAgICAgKTsKICAgICAgfQogICAgfQoKICAgIHJlZGVmYXVsdFRvRU4oYWx0cyA9IHt9KSB7CiAgICAgIHJldHVybiB0aGlzLmNsb25lKHsgLi4uYWx0cywgZGVmYXVsdFRvRU46IHRydWUgfSk7CiAgICB9CgogICAgcmVkZWZhdWx0VG9TeXN0ZW0oYWx0cyA9IHt9KSB7CiAgICAgIHJldHVybiB0aGlzLmNsb25lKHsgLi4uYWx0cywgZGVmYXVsdFRvRU46IGZhbHNlIH0pOwogICAgfQoKICAgIG1vbnRocyhsZW5ndGgsIGZvcm1hdCA9IGZhbHNlLCBkZWZhdWx0T0sgPSB0cnVlKSB7CiAgICAgIHJldHVybiBsaXN0U3R1ZmYodGhpcywgbGVuZ3RoLCBkZWZhdWx0T0ssIG1vbnRocywgKCkgPT4gewogICAgICAgIGNvbnN0IGludGwgPSBmb3JtYXQgPyB7IG1vbnRoOiBsZW5ndGgsIGRheTogIm51bWVyaWMiIH0gOiB7IG1vbnRoOiBsZW5ndGggfSwKICAgICAgICAgIGZvcm1hdFN0ciA9IGZvcm1hdCA/ICJmb3JtYXQiIDogInN0YW5kYWxvbmUiOwogICAgICAgIGlmICghdGhpcy5tb250aHNDYWNoZVtmb3JtYXRTdHJdW2xlbmd0aF0pIHsKICAgICAgICAgIHRoaXMubW9udGhzQ2FjaGVbZm9ybWF0U3RyXVtsZW5ndGhdID0gbWFwTW9udGhzKChkdCkgPT4gdGhpcy5leHRyYWN0KGR0LCBpbnRsLCAibW9udGgiKSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiB0aGlzLm1vbnRoc0NhY2hlW2Zvcm1hdFN0cl1bbGVuZ3RoXTsKICAgICAgfSk7CiAgICB9CgogICAgd2Vla2RheXMobGVuZ3RoLCBmb3JtYXQgPSBmYWxzZSwgZGVmYXVsdE9LID0gdHJ1ZSkgewogICAgICByZXR1cm4gbGlzdFN0dWZmKHRoaXMsIGxlbmd0aCwgZGVmYXVsdE9LLCB3ZWVrZGF5cywgKCkgPT4gewogICAgICAgIGNvbnN0IGludGwgPSBmb3JtYXQKICAgICAgICAgICAgPyB7IHdlZWtkYXk6IGxlbmd0aCwgeWVhcjogIm51bWVyaWMiLCBtb250aDogImxvbmciLCBkYXk6ICJudW1lcmljIiB9CiAgICAgICAgICAgIDogeyB3ZWVrZGF5OiBsZW5ndGggfSwKICAgICAgICAgIGZvcm1hdFN0ciA9IGZvcm1hdCA/ICJmb3JtYXQiIDogInN0YW5kYWxvbmUiOwogICAgICAgIGlmICghdGhpcy53ZWVrZGF5c0NhY2hlW2Zvcm1hdFN0cl1bbGVuZ3RoXSkgewogICAgICAgICAgdGhpcy53ZWVrZGF5c0NhY2hlW2Zvcm1hdFN0cl1bbGVuZ3RoXSA9IG1hcFdlZWtkYXlzKChkdCkgPT4KICAgICAgICAgICAgdGhpcy5leHRyYWN0KGR0LCBpbnRsLCAid2Vla2RheSIpCiAgICAgICAgICApOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdGhpcy53ZWVrZGF5c0NhY2hlW2Zvcm1hdFN0cl1bbGVuZ3RoXTsKICAgICAgfSk7CiAgICB9CgogICAgbWVyaWRpZW1zKGRlZmF1bHRPSyA9IHRydWUpIHsKICAgICAgcmV0dXJuIGxpc3RTdHVmZigKICAgICAgICB0aGlzLAogICAgICAgIHVuZGVmaW5lZCwKICAgICAgICBkZWZhdWx0T0ssCiAgICAgICAgKCkgPT4gbWVyaWRpZW1zLAogICAgICAgICgpID0+IHsKICAgICAgICAgIC8vIEluIHRoZW9yeSB0aGVyZSBjb3VsZCBiZSBhcmliaXRyYXJ5IGRheSBwZXJpb2RzLiBXZSdyZSBnb25uYSBhc3N1bWUgdGhlcmUgYXJlIGV4YWN0bHkgdHdvCiAgICAgICAgICAvLyBmb3IgQU0gYW5kIFBNLiBUaGlzIGlzIHByb2JhYmx5IHdyb25nLCBidXQgaXQncyBtYWtlcyBwYXJzaW5nIHdheSBlYXNpZXIuCiAgICAgICAgICBpZiAoIXRoaXMubWVyaWRpZW1DYWNoZSkgewogICAgICAgICAgICBjb25zdCBpbnRsID0geyBob3VyOiAibnVtZXJpYyIsIGhvdXJDeWNsZTogImgxMiIgfTsKICAgICAgICAgICAgdGhpcy5tZXJpZGllbUNhY2hlID0gW0RhdGVUaW1lLnV0YygyMDE2LCAxMSwgMTMsIDkpLCBEYXRlVGltZS51dGMoMjAxNiwgMTEsIDEzLCAxOSldLm1hcCgKICAgICAgICAgICAgICAoZHQpID0+IHRoaXMuZXh0cmFjdChkdCwgaW50bCwgImRheXBlcmlvZCIpCiAgICAgICAgICAgICk7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIHRoaXMubWVyaWRpZW1DYWNoZTsKICAgICAgICB9CiAgICAgICk7CiAgICB9CgogICAgZXJhcyhsZW5ndGgsIGRlZmF1bHRPSyA9IHRydWUpIHsKICAgICAgcmV0dXJuIGxpc3RTdHVmZih0aGlzLCBsZW5ndGgsIGRlZmF1bHRPSywgZXJhcywgKCkgPT4gewogICAgICAgIGNvbnN0IGludGwgPSB7IGVyYTogbGVuZ3RoIH07CgogICAgICAgIC8vIFRoaXMgaXMgcHJvYmxlbWF0aWMuIERpZmZlcmVudCBjYWxlbmRhcnMgYXJlIGdvaW5nIHRvIGRlZmluZSBlcmFzIHRvdGFsbHkgZGlmZmVyZW50bHkuIFdoYXQgSSBuZWVkIGlzIHRoZSBtaW5pbXVtIHNldCBvZiBkYXRlcwogICAgICAgIC8vIHRvIGRlZmluaXRlbHkgZW51bWVyYXRlIHRoZW0uCiAgICAgICAgaWYgKCF0aGlzLmVyYUNhY2hlW2xlbmd0aF0pIHsKICAgICAgICAgIHRoaXMuZXJhQ2FjaGVbbGVuZ3RoXSA9IFtEYXRlVGltZS51dGMoLTQwLCAxLCAxKSwgRGF0ZVRpbWUudXRjKDIwMTcsIDEsIDEpXS5tYXAoKGR0KSA9PgogICAgICAgICAgICB0aGlzLmV4dHJhY3QoZHQsIGludGwsICJlcmEiKQogICAgICAgICAgKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiB0aGlzLmVyYUNhY2hlW2xlbmd0aF07CiAgICAgIH0pOwogICAgfQoKICAgIGV4dHJhY3QoZHQsIGludGxPcHRzLCBmaWVsZCkgewogICAgICBjb25zdCBkZiA9IHRoaXMuZHRGb3JtYXR0ZXIoZHQsIGludGxPcHRzKSwKICAgICAgICByZXN1bHRzID0gZGYuZm9ybWF0VG9QYXJ0cygpLAogICAgICAgIG1hdGNoaW5nID0gcmVzdWx0cy5maW5kKChtKSA9PiBtLnR5cGUudG9Mb3dlckNhc2UoKSA9PT0gZmllbGQpOwogICAgICByZXR1cm4gbWF0Y2hpbmcgPyBtYXRjaGluZy52YWx1ZSA6IG51bGw7CiAgICB9CgogICAgbnVtYmVyRm9ybWF0dGVyKG9wdHMgPSB7fSkgewogICAgICAvLyB0aGlzIGZvcmNlc2ltcGxlIG9wdGlvbiBpcyBuZXZlciB1c2VkICh0aGUgb25seSBjYWxsZXIgc2hvcnQtY2lyY3VpdHMgb24gaXQsIGJ1dCBpdCBzZWVtcyBzYWZlciB0byBsZWF2ZSkKICAgICAgLy8gKGluIGNvbnRyYXN0LCB0aGUgcmVzdCBvZiB0aGUgY29uZGl0aW9uIGlzIHVzZWQgaGVhdmlseSkKICAgICAgcmV0dXJuIG5ldyBQb2x5TnVtYmVyRm9ybWF0dGVyKHRoaXMuaW50bCwgb3B0cy5mb3JjZVNpbXBsZSB8fCB0aGlzLmZhc3ROdW1iZXJzLCBvcHRzKTsKICAgIH0KCiAgICBkdEZvcm1hdHRlcihkdCwgaW50bE9wdHMgPSB7fSkgewogICAgICByZXR1cm4gbmV3IFBvbHlEYXRlRm9ybWF0dGVyKGR0LCB0aGlzLmludGwsIGludGxPcHRzKTsKICAgIH0KCiAgICByZWxGb3JtYXR0ZXIob3B0cyA9IHt9KSB7CiAgICAgIHJldHVybiBuZXcgUG9seVJlbEZvcm1hdHRlcih0aGlzLmludGwsIHRoaXMuaXNFbmdsaXNoKCksIG9wdHMpOwogICAgfQoKICAgIGxpc3RGb3JtYXR0ZXIob3B0cyA9IHt9KSB7CiAgICAgIHJldHVybiBnZXRDYWNoZWRMRih0aGlzLmludGwsIG9wdHMpOwogICAgfQoKICAgIGlzRW5nbGlzaCgpIHsKICAgICAgcmV0dXJuICgKICAgICAgICB0aGlzLmxvY2FsZSA9PT0gImVuIiB8fAogICAgICAgIHRoaXMubG9jYWxlLnRvTG93ZXJDYXNlKCkgPT09ICJlbi11cyIgfHwKICAgICAgICBuZXcgSW50bC5EYXRlVGltZUZvcm1hdCh0aGlzLmludGwpLnJlc29sdmVkT3B0aW9ucygpLmxvY2FsZS5zdGFydHNXaXRoKCJlbi11cyIpCiAgICAgICk7CiAgICB9CgogICAgZXF1YWxzKG90aGVyKSB7CiAgICAgIHJldHVybiAoCiAgICAgICAgdGhpcy5sb2NhbGUgPT09IG90aGVyLmxvY2FsZSAmJgogICAgICAgIHRoaXMubnVtYmVyaW5nU3lzdGVtID09PSBvdGhlci5udW1iZXJpbmdTeXN0ZW0gJiYKICAgICAgICB0aGlzLm91dHB1dENhbGVuZGFyID09PSBvdGhlci5vdXRwdXRDYWxlbmRhcgogICAgICApOwogICAgfQogIH0KCiAgLyoKICAgKiBUaGlzIGZpbGUgaGFuZGxlcyBwYXJzaW5nIGZvciB3ZWxsLXNwZWNpZmllZCBmb3JtYXRzLiBIZXJlJ3MgaG93IGl0IHdvcmtzOgogICAqIFR3byB0aGluZ3MgZ28gaW50byBwYXJzaW5nOiBhIHJlZ2V4IHRvIG1hdGNoIHdpdGggYW5kIGFuIGV4dHJhY3RvciB0byB0YWtlIGFwYXJ0IHRoZSBncm91cHMgaW4gdGhlIG1hdGNoLgogICAqIEFuIGV4dHJhY3RvciBpcyBqdXN0IGEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhIHJlZ2V4IG1hdGNoIGFycmF5IGFuZCByZXR1cm5zIGEgeyB5ZWFyOiAuLi4sIG1vbnRoOiAuLi4gfSBvYmplY3QKICAgKiBwYXJzZSgpIGRvZXMgdGhlIHdvcmsgb2YgZXhlY3V0aW5nIHRoZSByZWdleCBhbmQgYXBwbHlpbmcgdGhlIGV4dHJhY3Rvci4gSXQgdGFrZXMgbXVsdGlwbGUgcmVnZXgvZXh0cmFjdG9yIHBhaXJzIHRvIHRyeSBpbiBzZXF1ZW5jZS4KICAgKiBFeHRyYWN0b3JzIGNhbiB0YWtlIGEgImN1cnNvciIgcmVwcmVzZW50aW5nIHRoZSBvZmZzZXQgaW4gdGhlIG1hdGNoIHRvIGxvb2sgYXQuIFRoaXMgbWFrZXMgaXQgZWFzeSB0byBjb21iaW5lIGV4dHJhY3RvcnMuCiAgICogY29tYmluZUV4dHJhY3RvcnMoKSBkb2VzIHRoZSB3b3JrIG9mIGNvbWJpbmluZyB0aGVtLCBrZWVwaW5nIHRyYWNrIG9mIHRoZSBjdXJzb3IgdGhyb3VnaCBtdWx0aXBsZSBleHRyYWN0aW9ucy4KICAgKiBTb21lIGV4dHJhY3Rpb25zIGFyZSBzdXBlciBkdW1iIGFuZCBzaW1wbGVQYXJzZSBhbmQgZnJvbVN0cmluZ3MgaGVscCBEUlkgdGhlbS4KICAgKi8KCiAgZnVuY3Rpb24gY29tYmluZVJlZ2V4ZXMoLi4ucmVnZXhlcykgewogICAgY29uc3QgZnVsbCA9IHJlZ2V4ZXMucmVkdWNlKChmLCByKSA9PiBmICsgci5zb3VyY2UsICIiKTsKICAgIHJldHVybiBSZWdFeHAoYF4ke2Z1bGx9JGApOwogIH0KCiAgZnVuY3Rpb24gY29tYmluZUV4dHJhY3RvcnMoLi4uZXh0cmFjdG9ycykgewogICAgcmV0dXJuIChtKSA9PgogICAgICBleHRyYWN0b3JzCiAgICAgICAgLnJlZHVjZSgKICAgICAgICAgIChbbWVyZ2VkVmFscywgbWVyZ2VkWm9uZSwgY3Vyc29yXSwgZXgpID0+IHsKICAgICAgICAgICAgY29uc3QgW3ZhbCwgem9uZSwgbmV4dF0gPSBleChtLCBjdXJzb3IpOwogICAgICAgICAgICByZXR1cm4gW3sgLi4ubWVyZ2VkVmFscywgLi4udmFsIH0sIHpvbmUgfHwgbWVyZ2VkWm9uZSwgbmV4dF07CiAgICAgICAgICB9LAogICAgICAgICAgW3t9LCBudWxsLCAxXQogICAgICAgICkKICAgICAgICAuc2xpY2UoMCwgMik7CiAgfQoKICBmdW5jdGlvbiBwYXJzZSQxKHMsIC4uLnBhdHRlcm5zKSB7CiAgICBpZiAocyA9PSBudWxsKSB7CiAgICAgIHJldHVybiBbbnVsbCwgbnVsbF07CiAgICB9CgogICAgZm9yIChjb25zdCBbcmVnZXgsIGV4dHJhY3Rvcl0gb2YgcGF0dGVybnMpIHsKICAgICAgY29uc3QgbSA9IHJlZ2V4LmV4ZWMocyk7CiAgICAgIGlmIChtKSB7CiAgICAgICAgcmV0dXJuIGV4dHJhY3RvcihtKTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIFtudWxsLCBudWxsXTsKICB9CgogIGZ1bmN0aW9uIHNpbXBsZVBhcnNlKC4uLmtleXMpIHsKICAgIHJldHVybiAobWF0Y2gsIGN1cnNvcikgPT4gewogICAgICBjb25zdCByZXQgPSB7fTsKICAgICAgbGV0IGk7CgogICAgICBmb3IgKGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykgewogICAgICAgIHJldFtrZXlzW2ldXSA9IHBhcnNlSW50ZWdlcihtYXRjaFtjdXJzb3IgKyBpXSk7CiAgICAgIH0KICAgICAgcmV0dXJuIFtyZXQsIG51bGwsIGN1cnNvciArIGldOwogICAgfTsKICB9CgogIC8vIElTTyBhbmQgU1FMIHBhcnNpbmcKICBjb25zdCBvZmZzZXRSZWdleCA9IC8oPzooWil8KFsrLV1cZFxkKSg/Ojo/KFxkXGQpKT8pLzsKICBjb25zdCBpc29FeHRlbmRlZFpvbmUgPSBgKD86JHtvZmZzZXRSZWdleC5zb3VyY2V9Pyg/OlxcWygke2lhbmFSZWdleC5zb3VyY2V9KVxcXSk/KT9gOwogIGNvbnN0IGlzb1RpbWVCYXNlUmVnZXggPSAvKFxkXGQpKD86Oj8oXGRcZCkoPzo6PyhcZFxkKSg/OlsuLF0oXGR7MSwzMH0pKT8pPyk/LzsKICBjb25zdCBpc29UaW1lUmVnZXggPSBSZWdFeHAoYCR7aXNvVGltZUJhc2VSZWdleC5zb3VyY2V9JHtpc29FeHRlbmRlZFpvbmV9YCk7CiAgY29uc3QgaXNvVGltZUV4dGVuc2lvblJlZ2V4ID0gUmVnRXhwKGAoPzpUJHtpc29UaW1lUmVnZXguc291cmNlfSk/YCk7CiAgY29uc3QgaXNvWW1kUmVnZXggPSAvKFsrLV1cZHs2fXxcZHs0fSkoPzotPyhcZFxkKSg/Oi0/KFxkXGQpKT8pPy87CiAgY29uc3QgaXNvV2Vla1JlZ2V4ID0gLyhcZHs0fSktP1coXGRcZCkoPzotPyhcZCkpPy87CiAgY29uc3QgaXNvT3JkaW5hbFJlZ2V4ID0gLyhcZHs0fSktPyhcZHszfSkvOwogIGNvbnN0IGV4dHJhY3RJU09XZWVrRGF0YSA9IHNpbXBsZVBhcnNlKCJ3ZWVrWWVhciIsICJ3ZWVrTnVtYmVyIiwgIndlZWtEYXkiKTsKICBjb25zdCBleHRyYWN0SVNPT3JkaW5hbERhdGEgPSBzaW1wbGVQYXJzZSgieWVhciIsICJvcmRpbmFsIik7CiAgY29uc3Qgc3FsWW1kUmVnZXggPSAvKFxkezR9KS0oXGRcZCktKFxkXGQpLzsgLy8gZHVtYmVkLWRvd24gdmVyc2lvbiBvZiB0aGUgSVNPIG9uZQogIGNvbnN0IHNxbFRpbWVSZWdleCA9IFJlZ0V4cCgKICAgIGAke2lzb1RpbWVCYXNlUmVnZXguc291cmNlfSA/KD86JHtvZmZzZXRSZWdleC5zb3VyY2V9fCgke2lhbmFSZWdleC5zb3VyY2V9KSk/YAogICk7CiAgY29uc3Qgc3FsVGltZUV4dGVuc2lvblJlZ2V4ID0gUmVnRXhwKGAoPzogJHtzcWxUaW1lUmVnZXguc291cmNlfSk/YCk7CgogIGZ1bmN0aW9uIGludCQxKG1hdGNoLCBwb3MsIGZhbGxiYWNrKSB7CiAgICBjb25zdCBtID0gbWF0Y2hbcG9zXTsKICAgIHJldHVybiBpc1VuZGVmaW5lZChtKSA/IGZhbGxiYWNrIDogcGFyc2VJbnRlZ2VyKG0pOwogIH0KCiAgZnVuY3Rpb24gZXh0cmFjdElTT1ltZChtYXRjaCwgY3Vyc29yKSB7CiAgICBjb25zdCBpdGVtID0gewogICAgICB5ZWFyOiBpbnQkMShtYXRjaCwgY3Vyc29yKSwKICAgICAgbW9udGg6IGludCQxKG1hdGNoLCBjdXJzb3IgKyAxLCAxKSwKICAgICAgZGF5OiBpbnQkMShtYXRjaCwgY3Vyc29yICsgMiwgMSksCiAgICB9OwoKICAgIHJldHVybiBbaXRlbSwgbnVsbCwgY3Vyc29yICsgM107CiAgfQoKICBmdW5jdGlvbiBleHRyYWN0SVNPVGltZShtYXRjaCwgY3Vyc29yKSB7CiAgICBjb25zdCBpdGVtID0gewogICAgICBob3VyczogaW50JDEobWF0Y2gsIGN1cnNvciwgMCksCiAgICAgIG1pbnV0ZXM6IGludCQxKG1hdGNoLCBjdXJzb3IgKyAxLCAwKSwKICAgICAgc2Vjb25kczogaW50JDEobWF0Y2gsIGN1cnNvciArIDIsIDApLAogICAgICBtaWxsaXNlY29uZHM6IHBhcnNlTWlsbGlzKG1hdGNoW2N1cnNvciArIDNdKSwKICAgIH07CgogICAgcmV0dXJuIFtpdGVtLCBudWxsLCBjdXJzb3IgKyA0XTsKICB9CgogIGZ1bmN0aW9uIGV4dHJhY3RJU09PZmZzZXQobWF0Y2gsIGN1cnNvcikgewogICAgY29uc3QgbG9jYWwgPSAhbWF0Y2hbY3Vyc29yXSAmJiAhbWF0Y2hbY3Vyc29yICsgMV0sCiAgICAgIGZ1bGxPZmZzZXQgPSBzaWduZWRPZmZzZXQobWF0Y2hbY3Vyc29yICsgMV0sIG1hdGNoW2N1cnNvciArIDJdKSwKICAgICAgem9uZSA9IGxvY2FsID8gbnVsbCA6IEZpeGVkT2Zmc2V0Wm9uZS5pbnN0YW5jZShmdWxsT2Zmc2V0KTsKICAgIHJldHVybiBbe30sIHpvbmUsIGN1cnNvciArIDNdOwogIH0KCiAgZnVuY3Rpb24gZXh0cmFjdElBTkFab25lKG1hdGNoLCBjdXJzb3IpIHsKICAgIGNvbnN0IHpvbmUgPSBtYXRjaFtjdXJzb3JdID8gSUFOQVpvbmUuY3JlYXRlKG1hdGNoW2N1cnNvcl0pIDogbnVsbDsKICAgIHJldHVybiBbe30sIHpvbmUsIGN1cnNvciArIDFdOwogIH0KCiAgLy8gSVNPIHRpbWUgcGFyc2luZwoKICBjb25zdCBpc29UaW1lT25seSA9IFJlZ0V4cChgXlQ/JHtpc29UaW1lQmFzZVJlZ2V4LnNvdXJjZX0kYCk7CgogIC8vIElTTyBkdXJhdGlvbiBwYXJzaW5nCgogIGNvbnN0IGlzb0R1cmF0aW9uID0KICAgIC9eLT9QKD86KD86KC0/XGR7MSwyMH0oPzpcLlxkezEsMjB9KT8pWSk/KD86KC0/XGR7MSwyMH0oPzpcLlxkezEsMjB9KT8pTSk/KD86KC0/XGR7MSwyMH0oPzpcLlxkezEsMjB9KT8pVyk/KD86KC0/XGR7MSwyMH0oPzpcLlxkezEsMjB9KT8pRCk/KD86VCg/OigtP1xkezEsMjB9KD86XC5cZHsxLDIwfSk/KUgpPyg/OigtP1xkezEsMjB9KD86XC5cZHsxLDIwfSk/KU0pPyg/OigtP1xkezEsMjB9KSg/OlsuLF0oLT9cZHsxLDIwfSkpP1MpPyk/KSQvOwoKICBmdW5jdGlvbiBleHRyYWN0SVNPRHVyYXRpb24obWF0Y2gpIHsKICAgIGNvbnN0IFtzLCB5ZWFyU3RyLCBtb250aFN0ciwgd2Vla1N0ciwgZGF5U3RyLCBob3VyU3RyLCBtaW51dGVTdHIsIHNlY29uZFN0ciwgbWlsbGlzZWNvbmRzU3RyXSA9CiAgICAgIG1hdGNoOwoKICAgIGNvbnN0IGhhc05lZ2F0aXZlUHJlZml4ID0gc1swXSA9PT0gIi0iOwogICAgY29uc3QgbmVnYXRpdmVTZWNvbmRzID0gc2Vjb25kU3RyICYmIHNlY29uZFN0clswXSA9PT0gIi0iOwoKICAgIGNvbnN0IG1heWJlTmVnYXRlID0gKG51bSwgZm9yY2UgPSBmYWxzZSkgPT4KICAgICAgbnVtICE9PSB1bmRlZmluZWQgJiYgKGZvcmNlIHx8IChudW0gJiYgaGFzTmVnYXRpdmVQcmVmaXgpKSA/IC1udW0gOiBudW07CgogICAgcmV0dXJuIFsKICAgICAgewogICAgICAgIHllYXJzOiBtYXliZU5lZ2F0ZShwYXJzZUZsb2F0aW5nKHllYXJTdHIpKSwKICAgICAgICBtb250aHM6IG1heWJlTmVnYXRlKHBhcnNlRmxvYXRpbmcobW9udGhTdHIpKSwKICAgICAgICB3ZWVrczogbWF5YmVOZWdhdGUocGFyc2VGbG9hdGluZyh3ZWVrU3RyKSksCiAgICAgICAgZGF5czogbWF5YmVOZWdhdGUocGFyc2VGbG9hdGluZyhkYXlTdHIpKSwKICAgICAgICBob3VyczogbWF5YmVOZWdhdGUocGFyc2VGbG9hdGluZyhob3VyU3RyKSksCiAgICAgICAgbWludXRlczogbWF5YmVOZWdhdGUocGFyc2VGbG9hdGluZyhtaW51dGVTdHIpKSwKICAgICAgICBzZWNvbmRzOiBtYXliZU5lZ2F0ZShwYXJzZUZsb2F0aW5nKHNlY29uZFN0ciksIHNlY29uZFN0ciA9PT0gIi0wIiksCiAgICAgICAgbWlsbGlzZWNvbmRzOiBtYXliZU5lZ2F0ZShwYXJzZU1pbGxpcyhtaWxsaXNlY29uZHNTdHIpLCBuZWdhdGl2ZVNlY29uZHMpLAogICAgICB9LAogICAgXTsKICB9CgogIC8vIFRoZXNlIGFyZSBhIGxpdHRsZSBicmFpbmRlYWQuIEVEVCAqc2hvdWxkKiB0ZWxsIHVzIHRoYXQgd2UncmUgaW4sIHNheSwgQW1lcmljYS9OZXdfWW9yawogIC8vIGFuZCBub3QganVzdCB0aGF0IHdlJ3JlIGluIC0yNDAgKnJpZ2h0IG5vdyouIEJ1dCBzaW5jZSBJIGRvbid0IHRoaW5rIHRoZXNlIGFyZSB1c2VkIHRoYXQgb2Z0ZW4KICAvLyBJJ20ganVzdCBnb2luZyB0byBpZ25vcmUgdGhhdAogIGNvbnN0IG9ic09mZnNldHMgPSB7CiAgICBHTVQ6IDAsCiAgICBFRFQ6IC00ICogNjAsCiAgICBFU1Q6IC01ICogNjAsCiAgICBDRFQ6IC01ICogNjAsCiAgICBDU1Q6IC02ICogNjAsCiAgICBNRFQ6IC02ICogNjAsCiAgICBNU1Q6IC03ICogNjAsCiAgICBQRFQ6IC03ICogNjAsCiAgICBQU1Q6IC04ICogNjAsCiAgfTsKCiAgZnVuY3Rpb24gZnJvbVN0cmluZ3Mod2Vla2RheVN0ciwgeWVhclN0ciwgbW9udGhTdHIsIGRheVN0ciwgaG91clN0ciwgbWludXRlU3RyLCBzZWNvbmRTdHIpIHsKICAgIGNvbnN0IHJlc3VsdCA9IHsKICAgICAgeWVhcjogeWVhclN0ci5sZW5ndGggPT09IDIgPyB1bnRydW5jYXRlWWVhcihwYXJzZUludGVnZXIoeWVhclN0cikpIDogcGFyc2VJbnRlZ2VyKHllYXJTdHIpLAogICAgICBtb250aDogbW9udGhzU2hvcnQuaW5kZXhPZihtb250aFN0cikgKyAxLAogICAgICBkYXk6IHBhcnNlSW50ZWdlcihkYXlTdHIpLAogICAgICBob3VyOiBwYXJzZUludGVnZXIoaG91clN0ciksCiAgICAgIG1pbnV0ZTogcGFyc2VJbnRlZ2VyKG1pbnV0ZVN0ciksCiAgICB9OwoKICAgIGlmIChzZWNvbmRTdHIpIHJlc3VsdC5zZWNvbmQgPSBwYXJzZUludGVnZXIoc2Vjb25kU3RyKTsKICAgIGlmICh3ZWVrZGF5U3RyKSB7CiAgICAgIHJlc3VsdC53ZWVrZGF5ID0KICAgICAgICB3ZWVrZGF5U3RyLmxlbmd0aCA+IDMKICAgICAgICAgID8gd2Vla2RheXNMb25nLmluZGV4T2Yod2Vla2RheVN0cikgKyAxCiAgICAgICAgICA6IHdlZWtkYXlzU2hvcnQuaW5kZXhPZih3ZWVrZGF5U3RyKSArIDE7CiAgICB9CgogICAgcmV0dXJuIHJlc3VsdDsKICB9CgogIC8vIFJGQyAyODIyLzUzMjIKICBjb25zdCByZmMyODIyID0KICAgIC9eKD86KE1vbnxUdWV8V2VkfFRodXxGcml8U2F0fFN1biksXHMpPyhcZHsxLDJ9KVxzKEphbnxGZWJ8TWFyfEFwcnxNYXl8SnVufEp1bHxBdWd8U2VwfE9jdHxOb3Z8RGVjKVxzKFxkezIsNH0pXHMoXGRcZCk6KFxkXGQpKD86OihcZFxkKSk/XHMoPzooVVR8R01UfFtFQ01QXVtTRF1UKXwoW1p6XSl8KD86KFsrLV1cZFxkKShcZFxkKSkpJC87CgogIGZ1bmN0aW9uIGV4dHJhY3RSRkMyODIyKG1hdGNoKSB7CiAgICBjb25zdCBbCiAgICAgICAgLAogICAgICAgIHdlZWtkYXlTdHIsCiAgICAgICAgZGF5U3RyLAogICAgICAgIG1vbnRoU3RyLAogICAgICAgIHllYXJTdHIsCiAgICAgICAgaG91clN0ciwKICAgICAgICBtaW51dGVTdHIsCiAgICAgICAgc2Vjb25kU3RyLAogICAgICAgIG9ic09mZnNldCwKICAgICAgICBtaWxPZmZzZXQsCiAgICAgICAgb2ZmSG91clN0ciwKICAgICAgICBvZmZNaW51dGVTdHIsCiAgICAgIF0gPSBtYXRjaCwKICAgICAgcmVzdWx0ID0gZnJvbVN0cmluZ3Mod2Vla2RheVN0ciwgeWVhclN0ciwgbW9udGhTdHIsIGRheVN0ciwgaG91clN0ciwgbWludXRlU3RyLCBzZWNvbmRTdHIpOwoKICAgIGxldCBvZmZzZXQ7CiAgICBpZiAob2JzT2Zmc2V0KSB7CiAgICAgIG9mZnNldCA9IG9ic09mZnNldHNbb2JzT2Zmc2V0XTsKICAgIH0gZWxzZSBpZiAobWlsT2Zmc2V0KSB7CiAgICAgIG9mZnNldCA9IDA7CiAgICB9IGVsc2UgewogICAgICBvZmZzZXQgPSBzaWduZWRPZmZzZXQob2ZmSG91clN0ciwgb2ZmTWludXRlU3RyKTsKICAgIH0KCiAgICByZXR1cm4gW3Jlc3VsdCwgbmV3IEZpeGVkT2Zmc2V0Wm9uZShvZmZzZXQpXTsKICB9CgogIGZ1bmN0aW9uIHByZXByb2Nlc3NSRkMyODIyKHMpIHsKICAgIC8vIFJlbW92ZSBjb21tZW50cyBhbmQgZm9sZGluZyB3aGl0ZXNwYWNlIGFuZCByZXBsYWNlIG11bHRpcGxlLXNwYWNlcyB3aXRoIGEgc2luZ2xlIHNwYWNlCiAgICByZXR1cm4gcwogICAgICAucmVwbGFjZSgvXChbXildKlwpfFtcblx0XS9nLCAiICIpCiAgICAgIC5yZXBsYWNlKC8oXHNccyspL2csICIgIikKICAgICAgLnRyaW0oKTsKICB9CgogIC8vIGh0dHAgZGF0ZQoKICBjb25zdCByZmMxMTIzID0KICAgICAgL14oTW9ufFR1ZXxXZWR8VGh1fEZyaXxTYXR8U3VuKSwgKFxkXGQpIChKYW58RmVifE1hcnxBcHJ8TWF5fEp1bnxKdWx8QXVnfFNlcHxPY3R8Tm92fERlYykgKFxkezR9KSAoXGRcZCk6KFxkXGQpOihcZFxkKSBHTVQkLywKICAgIHJmYzg1MCA9CiAgICAgIC9eKE1vbmRheXxUdWVzZGF5fFdlZG5lc2RheXxUaHVyc2RheXxGcmlkYXl8U2F0dXJkYXl8U3VuZGF5KSwgKFxkXGQpLShKYW58RmVifE1hcnxBcHJ8TWF5fEp1bnxKdWx8QXVnfFNlcHxPY3R8Tm92fERlYyktKFxkXGQpIChcZFxkKTooXGRcZCk6KFxkXGQpIEdNVCQvLAogICAgYXNjaWkgPQogICAgICAvXihNb258VHVlfFdlZHxUaHV8RnJpfFNhdHxTdW4pIChKYW58RmVifE1hcnxBcHJ8TWF5fEp1bnxKdWx8QXVnfFNlcHxPY3R8Tm92fERlYykgKCBcZHxcZFxkKSAoXGRcZCk6KFxkXGQpOihcZFxkKSAoXGR7NH0pJC87CgogIGZ1bmN0aW9uIGV4dHJhY3RSRkMxMTIzT3I4NTAobWF0Y2gpIHsKICAgIGNvbnN0IFssIHdlZWtkYXlTdHIsIGRheVN0ciwgbW9udGhTdHIsIHllYXJTdHIsIGhvdXJTdHIsIG1pbnV0ZVN0ciwgc2Vjb25kU3RyXSA9IG1hdGNoLAogICAgICByZXN1bHQgPSBmcm9tU3RyaW5ncyh3ZWVrZGF5U3RyLCB5ZWFyU3RyLCBtb250aFN0ciwgZGF5U3RyLCBob3VyU3RyLCBtaW51dGVTdHIsIHNlY29uZFN0cik7CiAgICByZXR1cm4gW3Jlc3VsdCwgRml4ZWRPZmZzZXRab25lLnV0Y0luc3RhbmNlXTsKICB9CgogIGZ1bmN0aW9uIGV4dHJhY3RBU0NJSShtYXRjaCkgewogICAgY29uc3QgWywgd2Vla2RheVN0ciwgbW9udGhTdHIsIGRheVN0ciwgaG91clN0ciwgbWludXRlU3RyLCBzZWNvbmRTdHIsIHllYXJTdHJdID0gbWF0Y2gsCiAgICAgIHJlc3VsdCA9IGZyb21TdHJpbmdzKHdlZWtkYXlTdHIsIHllYXJTdHIsIG1vbnRoU3RyLCBkYXlTdHIsIGhvdXJTdHIsIG1pbnV0ZVN0ciwgc2Vjb25kU3RyKTsKICAgIHJldHVybiBbcmVzdWx0LCBGaXhlZE9mZnNldFpvbmUudXRjSW5zdGFuY2VdOwogIH0KCiAgY29uc3QgaXNvWW1kV2l0aFRpbWVFeHRlbnNpb25SZWdleCA9IGNvbWJpbmVSZWdleGVzKGlzb1ltZFJlZ2V4LCBpc29UaW1lRXh0ZW5zaW9uUmVnZXgpOwogIGNvbnN0IGlzb1dlZWtXaXRoVGltZUV4dGVuc2lvblJlZ2V4ID0gY29tYmluZVJlZ2V4ZXMoaXNvV2Vla1JlZ2V4LCBpc29UaW1lRXh0ZW5zaW9uUmVnZXgpOwogIGNvbnN0IGlzb09yZGluYWxXaXRoVGltZUV4dGVuc2lvblJlZ2V4ID0gY29tYmluZVJlZ2V4ZXMoaXNvT3JkaW5hbFJlZ2V4LCBpc29UaW1lRXh0ZW5zaW9uUmVnZXgpOwogIGNvbnN0IGlzb1RpbWVDb21iaW5lZFJlZ2V4ID0gY29tYmluZVJlZ2V4ZXMoaXNvVGltZVJlZ2V4KTsKCiAgY29uc3QgZXh0cmFjdElTT1ltZFRpbWVBbmRPZmZzZXQgPSBjb21iaW5lRXh0cmFjdG9ycygKICAgIGV4dHJhY3RJU09ZbWQsCiAgICBleHRyYWN0SVNPVGltZSwKICAgIGV4dHJhY3RJU09PZmZzZXQsCiAgICBleHRyYWN0SUFOQVpvbmUKICApOwogIGNvbnN0IGV4dHJhY3RJU09XZWVrVGltZUFuZE9mZnNldCA9IGNvbWJpbmVFeHRyYWN0b3JzKAogICAgZXh0cmFjdElTT1dlZWtEYXRhLAogICAgZXh0cmFjdElTT1RpbWUsCiAgICBleHRyYWN0SVNPT2Zmc2V0LAogICAgZXh0cmFjdElBTkFab25lCiAgKTsKICBjb25zdCBleHRyYWN0SVNPT3JkaW5hbERhdGVBbmRUaW1lID0gY29tYmluZUV4dHJhY3RvcnMoCiAgICBleHRyYWN0SVNPT3JkaW5hbERhdGEsCiAgICBleHRyYWN0SVNPVGltZSwKICAgIGV4dHJhY3RJU09PZmZzZXQsCiAgICBleHRyYWN0SUFOQVpvbmUKICApOwogIGNvbnN0IGV4dHJhY3RJU09UaW1lQW5kT2Zmc2V0ID0gY29tYmluZUV4dHJhY3RvcnMoCiAgICBleHRyYWN0SVNPVGltZSwKICAgIGV4dHJhY3RJU09PZmZzZXQsCiAgICBleHRyYWN0SUFOQVpvbmUKICApOwoKICAvKgogICAqIEBwcml2YXRlCiAgICovCgogIGZ1bmN0aW9uIHBhcnNlSVNPRGF0ZShzKSB7CiAgICByZXR1cm4gcGFyc2UkMSgKICAgICAgcywKICAgICAgW2lzb1ltZFdpdGhUaW1lRXh0ZW5zaW9uUmVnZXgsIGV4dHJhY3RJU09ZbWRUaW1lQW5kT2Zmc2V0XSwKICAgICAgW2lzb1dlZWtXaXRoVGltZUV4dGVuc2lvblJlZ2V4LCBleHRyYWN0SVNPV2Vla1RpbWVBbmRPZmZzZXRdLAogICAgICBbaXNvT3JkaW5hbFdpdGhUaW1lRXh0ZW5zaW9uUmVnZXgsIGV4dHJhY3RJU09PcmRpbmFsRGF0ZUFuZFRpbWVdLAogICAgICBbaXNvVGltZUNvbWJpbmVkUmVnZXgsIGV4dHJhY3RJU09UaW1lQW5kT2Zmc2V0XQogICAgKTsKICB9CgogIGZ1bmN0aW9uIHBhcnNlUkZDMjgyMkRhdGUocykgewogICAgcmV0dXJuIHBhcnNlJDEocHJlcHJvY2Vzc1JGQzI4MjIocyksIFtyZmMyODIyLCBleHRyYWN0UkZDMjgyMl0pOwogIH0KCiAgZnVuY3Rpb24gcGFyc2VIVFRQRGF0ZShzKSB7CiAgICByZXR1cm4gcGFyc2UkMSgKICAgICAgcywKICAgICAgW3JmYzExMjMsIGV4dHJhY3RSRkMxMTIzT3I4NTBdLAogICAgICBbcmZjODUwLCBleHRyYWN0UkZDMTEyM09yODUwXSwKICAgICAgW2FzY2lpLCBleHRyYWN0QVNDSUldCiAgICApOwogIH0KCiAgZnVuY3Rpb24gcGFyc2VJU09EdXJhdGlvbihzKSB7CiAgICByZXR1cm4gcGFyc2UkMShzLCBbaXNvRHVyYXRpb24sIGV4dHJhY3RJU09EdXJhdGlvbl0pOwogIH0KCiAgY29uc3QgZXh0cmFjdElTT1RpbWVPbmx5ID0gY29tYmluZUV4dHJhY3RvcnMoZXh0cmFjdElTT1RpbWUpOwoKICBmdW5jdGlvbiBwYXJzZUlTT1RpbWVPbmx5KHMpIHsKICAgIHJldHVybiBwYXJzZSQxKHMsIFtpc29UaW1lT25seSwgZXh0cmFjdElTT1RpbWVPbmx5XSk7CiAgfQoKICBjb25zdCBzcWxZbWRXaXRoVGltZUV4dGVuc2lvblJlZ2V4ID0gY29tYmluZVJlZ2V4ZXMoc3FsWW1kUmVnZXgsIHNxbFRpbWVFeHRlbnNpb25SZWdleCk7CiAgY29uc3Qgc3FsVGltZUNvbWJpbmVkUmVnZXggPSBjb21iaW5lUmVnZXhlcyhzcWxUaW1lUmVnZXgpOwoKICBjb25zdCBleHRyYWN0SVNPVGltZU9mZnNldEFuZElBTkFab25lID0gY29tYmluZUV4dHJhY3RvcnMoCiAgICBleHRyYWN0SVNPVGltZSwKICAgIGV4dHJhY3RJU09PZmZzZXQsCiAgICBleHRyYWN0SUFOQVpvbmUKICApOwoKICBmdW5jdGlvbiBwYXJzZVNRTChzKSB7CiAgICByZXR1cm4gcGFyc2UkMSgKICAgICAgcywKICAgICAgW3NxbFltZFdpdGhUaW1lRXh0ZW5zaW9uUmVnZXgsIGV4dHJhY3RJU09ZbWRUaW1lQW5kT2Zmc2V0XSwKICAgICAgW3NxbFRpbWVDb21iaW5lZFJlZ2V4LCBleHRyYWN0SVNPVGltZU9mZnNldEFuZElBTkFab25lXQogICAgKTsKICB9CgogIGNvbnN0IElOVkFMSUQkMyA9ICJJbnZhbGlkIER1cmF0aW9uIjsKCiAgLy8gdW5pdCBjb252ZXJzaW9uIGNvbnN0YW50cwogIGNvbnN0IGxvd09yZGVyTWF0cml4ID0gewogICAgICB3ZWVrczogewogICAgICAgIGRheXM6IDcsCiAgICAgICAgaG91cnM6IDcgKiAyNCwKICAgICAgICBtaW51dGVzOiA3ICogMjQgKiA2MCwKICAgICAgICBzZWNvbmRzOiA3ICogMjQgKiA2MCAqIDYwLAogICAgICAgIG1pbGxpc2Vjb25kczogNyAqIDI0ICogNjAgKiA2MCAqIDEwMDAsCiAgICAgIH0sCiAgICAgIGRheXM6IHsKICAgICAgICBob3VyczogMjQsCiAgICAgICAgbWludXRlczogMjQgKiA2MCwKICAgICAgICBzZWNvbmRzOiAyNCAqIDYwICogNjAsCiAgICAgICAgbWlsbGlzZWNvbmRzOiAyNCAqIDYwICogNjAgKiAxMDAwLAogICAgICB9LAogICAgICBob3VyczogeyBtaW51dGVzOiA2MCwgc2Vjb25kczogNjAgKiA2MCwgbWlsbGlzZWNvbmRzOiA2MCAqIDYwICogMTAwMCB9LAogICAgICBtaW51dGVzOiB7IHNlY29uZHM6IDYwLCBtaWxsaXNlY29uZHM6IDYwICogMTAwMCB9LAogICAgICBzZWNvbmRzOiB7IG1pbGxpc2Vjb25kczogMTAwMCB9LAogICAgfSwKICAgIGNhc3VhbE1hdHJpeCA9IHsKICAgICAgeWVhcnM6IHsKICAgICAgICBxdWFydGVyczogNCwKICAgICAgICBtb250aHM6IDEyLAogICAgICAgIHdlZWtzOiA1MiwKICAgICAgICBkYXlzOiAzNjUsCiAgICAgICAgaG91cnM6IDM2NSAqIDI0LAogICAgICAgIG1pbnV0ZXM6IDM2NSAqIDI0ICogNjAsCiAgICAgICAgc2Vjb25kczogMzY1ICogMjQgKiA2MCAqIDYwLAogICAgICAgIG1pbGxpc2Vjb25kczogMzY1ICogMjQgKiA2MCAqIDYwICogMTAwMCwKICAgICAgfSwKICAgICAgcXVhcnRlcnM6IHsKICAgICAgICBtb250aHM6IDMsCiAgICAgICAgd2Vla3M6IDEzLAogICAgICAgIGRheXM6IDkxLAogICAgICAgIGhvdXJzOiA5MSAqIDI0LAogICAgICAgIG1pbnV0ZXM6IDkxICogMjQgKiA2MCwKICAgICAgICBzZWNvbmRzOiA5MSAqIDI0ICogNjAgKiA2MCwKICAgICAgICBtaWxsaXNlY29uZHM6IDkxICogMjQgKiA2MCAqIDYwICogMTAwMCwKICAgICAgfSwKICAgICAgbW9udGhzOiB7CiAgICAgICAgd2Vla3M6IDQsCiAgICAgICAgZGF5czogMzAsCiAgICAgICAgaG91cnM6IDMwICogMjQsCiAgICAgICAgbWludXRlczogMzAgKiAyNCAqIDYwLAogICAgICAgIHNlY29uZHM6IDMwICogMjQgKiA2MCAqIDYwLAogICAgICAgIG1pbGxpc2Vjb25kczogMzAgKiAyNCAqIDYwICogNjAgKiAxMDAwLAogICAgICB9LAoKICAgICAgLi4ubG93T3JkZXJNYXRyaXgsCiAgICB9LAogICAgZGF5c0luWWVhckFjY3VyYXRlID0gMTQ2MDk3LjAgLyA0MDAsCiAgICBkYXlzSW5Nb250aEFjY3VyYXRlID0gMTQ2MDk3LjAgLyA0ODAwLAogICAgYWNjdXJhdGVNYXRyaXggPSB7CiAgICAgIHllYXJzOiB7CiAgICAgICAgcXVhcnRlcnM6IDQsCiAgICAgICAgbW9udGhzOiAxMiwKICAgICAgICB3ZWVrczogZGF5c0luWWVhckFjY3VyYXRlIC8gNywKICAgICAgICBkYXlzOiBkYXlzSW5ZZWFyQWNjdXJhdGUsCiAgICAgICAgaG91cnM6IGRheXNJblllYXJBY2N1cmF0ZSAqIDI0LAogICAgICAgIG1pbnV0ZXM6IGRheXNJblllYXJBY2N1cmF0ZSAqIDI0ICogNjAsCiAgICAgICAgc2Vjb25kczogZGF5c0luWWVhckFjY3VyYXRlICogMjQgKiA2MCAqIDYwLAogICAgICAgIG1pbGxpc2Vjb25kczogZGF5c0luWWVhckFjY3VyYXRlICogMjQgKiA2MCAqIDYwICogMTAwMCwKICAgICAgfSwKICAgICAgcXVhcnRlcnM6IHsKICAgICAgICBtb250aHM6IDMsCiAgICAgICAgd2Vla3M6IGRheXNJblllYXJBY2N1cmF0ZSAvIDI4LAogICAgICAgIGRheXM6IGRheXNJblllYXJBY2N1cmF0ZSAvIDQsCiAgICAgICAgaG91cnM6IChkYXlzSW5ZZWFyQWNjdXJhdGUgKiAyNCkgLyA0LAogICAgICAgIG1pbnV0ZXM6IChkYXlzSW5ZZWFyQWNjdXJhdGUgKiAyNCAqIDYwKSAvIDQsCiAgICAgICAgc2Vjb25kczogKGRheXNJblllYXJBY2N1cmF0ZSAqIDI0ICogNjAgKiA2MCkgLyA0LAogICAgICAgIG1pbGxpc2Vjb25kczogKGRheXNJblllYXJBY2N1cmF0ZSAqIDI0ICogNjAgKiA2MCAqIDEwMDApIC8gNCwKICAgICAgfSwKICAgICAgbW9udGhzOiB7CiAgICAgICAgd2Vla3M6IGRheXNJbk1vbnRoQWNjdXJhdGUgLyA3LAogICAgICAgIGRheXM6IGRheXNJbk1vbnRoQWNjdXJhdGUsCiAgICAgICAgaG91cnM6IGRheXNJbk1vbnRoQWNjdXJhdGUgKiAyNCwKICAgICAgICBtaW51dGVzOiBkYXlzSW5Nb250aEFjY3VyYXRlICogMjQgKiA2MCwKICAgICAgICBzZWNvbmRzOiBkYXlzSW5Nb250aEFjY3VyYXRlICogMjQgKiA2MCAqIDYwLAogICAgICAgIG1pbGxpc2Vjb25kczogZGF5c0luTW9udGhBY2N1cmF0ZSAqIDI0ICogNjAgKiA2MCAqIDEwMDAsCiAgICAgIH0sCiAgICAgIC4uLmxvd09yZGVyTWF0cml4LAogICAgfTsKCiAgLy8gdW5pdHMgb3JkZXJlZCBieSBzaXplCiAgY29uc3Qgb3JkZXJlZFVuaXRzJDEgPSBbCiAgICAieWVhcnMiLAogICAgInF1YXJ0ZXJzIiwKICAgICJtb250aHMiLAogICAgIndlZWtzIiwKICAgICJkYXlzIiwKICAgICJob3VycyIsCiAgICAibWludXRlcyIsCiAgICAic2Vjb25kcyIsCiAgICAibWlsbGlzZWNvbmRzIiwKICBdOwoKICBjb25zdCByZXZlcnNlVW5pdHMgPSBvcmRlcmVkVW5pdHMkMS5zbGljZSgwKS5yZXZlcnNlKCk7CgogIC8vIGNsb25lIHJlYWxseSBtZWFucyAiY3JlYXRlIGFub3RoZXIgaW5zdGFuY2UganVzdCBsaWtlIHRoaXMgb25lLCBidXQgd2l0aCB0aGVzZSBjaGFuZ2VzIgogIGZ1bmN0aW9uIGNsb25lJDIoZHVyLCBhbHRzLCBjbGVhciA9IGZhbHNlKSB7CiAgICAvLyBkZWVwIG1lcmdlIGZvciB2YWxzCiAgICBjb25zdCBjb25mID0gewogICAgICB2YWx1ZXM6IGNsZWFyID8gYWx0cy52YWx1ZXMgOiB7IC4uLmR1ci52YWx1ZXMsIC4uLihhbHRzLnZhbHVlcyB8fCB7fSkgfSwKICAgICAgbG9jOiBkdXIubG9jLmNsb25lKGFsdHMubG9jKSwKICAgICAgY29udmVyc2lvbkFjY3VyYWN5OiBhbHRzLmNvbnZlcnNpb25BY2N1cmFjeSB8fCBkdXIuY29udmVyc2lvbkFjY3VyYWN5LAogICAgICBtYXRyaXg6IGFsdHMubWF0cml4IHx8IGR1ci5tYXRyaXgsCiAgICB9OwogICAgcmV0dXJuIG5ldyBEdXJhdGlvbihjb25mKTsKICB9CgogIGZ1bmN0aW9uIGFudGlUcnVuYyhuKSB7CiAgICByZXR1cm4gbiA8IDAgPyBNYXRoLmZsb29yKG4pIDogTWF0aC5jZWlsKG4pOwogIH0KCiAgLy8gTkI6IG11dGF0ZXMgcGFyYW1ldGVycwogIGZ1bmN0aW9uIGNvbnZlcnQobWF0cml4LCBmcm9tTWFwLCBmcm9tVW5pdCwgdG9NYXAsIHRvVW5pdCkgewogICAgY29uc3QgY29udiA9IG1hdHJpeFt0b1VuaXRdW2Zyb21Vbml0XSwKICAgICAgcmF3ID0gZnJvbU1hcFtmcm9tVW5pdF0gLyBjb252LAogICAgICBzYW1lU2lnbiA9IE1hdGguc2lnbihyYXcpID09PSBNYXRoLnNpZ24odG9NYXBbdG9Vbml0XSksCiAgICAgIC8vIG9rLCBzbyB0aGlzIGlzIHdpbGQsIGJ1dCBzZWUgdGhlIG1hdHJpeCBpbiB0aGUgdGVzdHMKICAgICAgYWRkZWQgPQogICAgICAgICFzYW1lU2lnbiAmJiB0b01hcFt0b1VuaXRdICE9PSAwICYmIE1hdGguYWJzKHJhdykgPD0gMSA/IGFudGlUcnVuYyhyYXcpIDogTWF0aC50cnVuYyhyYXcpOwogICAgdG9NYXBbdG9Vbml0XSArPSBhZGRlZDsKICAgIGZyb21NYXBbZnJvbVVuaXRdIC09IGFkZGVkICogY29udjsKICB9CgogIC8vIE5COiBtdXRhdGVzIHBhcmFtZXRlcnMKICBmdW5jdGlvbiBub3JtYWxpemVWYWx1ZXMobWF0cml4LCB2YWxzKSB7CiAgICByZXZlcnNlVW5pdHMucmVkdWNlKChwcmV2aW91cywgY3VycmVudCkgPT4gewogICAgICBpZiAoIWlzVW5kZWZpbmVkKHZhbHNbY3VycmVudF0pKSB7CiAgICAgICAgaWYgKHByZXZpb3VzKSB7CiAgICAgICAgICBjb252ZXJ0KG1hdHJpeCwgdmFscywgcHJldmlvdXMsIHZhbHMsIGN1cnJlbnQpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gY3VycmVudDsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gcHJldmlvdXM7CiAgICAgIH0KICAgIH0sIG51bGwpOwogIH0KCiAgLyoqCiAgICogQSBEdXJhdGlvbiBvYmplY3QgcmVwcmVzZW50cyBhIHBlcmlvZCBvZiB0aW1lLCBsaWtlICIyIG1vbnRocyIgb3IgIjEgZGF5LCAxIGhvdXIiLiBDb25jZXB0dWFsbHksIGl0J3MganVzdCBhIG1hcCBvZiB1bml0cyB0byB0aGVpciBxdWFudGl0aWVzLCBhY2NvbXBhbmllZCBieSBzb21lIGFkZGl0aW9uYWwgY29uZmlndXJhdGlvbiBhbmQgbWV0aG9kcyBmb3IgY3JlYXRpbmcsIHBhcnNpbmcsIGludGVycm9nYXRpbmcsIHRyYW5zZm9ybWluZywgYW5kIGZvcm1hdHRpbmcgdGhlbS4gVGhleSBjYW4gYmUgdXNlZCBvbiB0aGVpciBvd24gb3IgaW4gY29uanVuY3Rpb24gd2l0aCBvdGhlciBMdXhvbiB0eXBlczsgZm9yIGV4YW1wbGUsIHlvdSBjYW4gdXNlIHtAbGluayBEYXRlVGltZSNwbHVzfSB0byBhZGQgYSBEdXJhdGlvbiBvYmplY3QgdG8gYSBEYXRlVGltZSwgcHJvZHVjaW5nIGFub3RoZXIgRGF0ZVRpbWUuCiAgICoKICAgKiBIZXJlIGlzIGEgYnJpZWYgb3ZlcnZpZXcgb2YgY29tbW9ubHkgdXNlZCBtZXRob2RzIGFuZCBnZXR0ZXJzIGluIER1cmF0aW9uOgogICAqCiAgICogKiAqKkNyZWF0aW9uKiogVG8gY3JlYXRlIGEgRHVyYXRpb24sIHVzZSB7QGxpbmsgRHVyYXRpb24uZnJvbU1pbGxpc30sIHtAbGluayBEdXJhdGlvbi5mcm9tT2JqZWN0fSwgb3Ige0BsaW5rIER1cmF0aW9uLmZyb21JU099LgogICAqICogKipVbml0IHZhbHVlcyoqIFNlZSB0aGUge0BsaW5rIER1cmF0aW9uI3llYXJzfSwge0BsaW5rIER1cmF0aW9uI21vbnRoc30sIHtAbGluayBEdXJhdGlvbiN3ZWVrc30sIHtAbGluayBEdXJhdGlvbiNkYXlzfSwge0BsaW5rIER1cmF0aW9uI2hvdXJzfSwge0BsaW5rIER1cmF0aW9uI21pbnV0ZXN9LCB7QGxpbmsgRHVyYXRpb24jc2Vjb25kc30sIHtAbGluayBEdXJhdGlvbiNtaWxsaXNlY29uZHN9IGFjY2Vzc29ycy4KICAgKiAqICoqQ29uZmlndXJhdGlvbioqIFNlZSAge0BsaW5rIER1cmF0aW9uI2xvY2FsZX0gYW5kIHtAbGluayBEdXJhdGlvbiNudW1iZXJpbmdTeXN0ZW19IGFjY2Vzc29ycy4KICAgKiAqICoqVHJhbnNmb3JtYXRpb24qKiBUbyBjcmVhdGUgbmV3IER1cmF0aW9ucyBvdXQgb2Ygb2xkIG9uZXMgdXNlIHtAbGluayBEdXJhdGlvbiNwbHVzfSwge0BsaW5rIER1cmF0aW9uI21pbnVzfSwge0BsaW5rIER1cmF0aW9uI25vcm1hbGl6ZX0sIHtAbGluayBEdXJhdGlvbiNzZXR9LCB7QGxpbmsgRHVyYXRpb24jcmVjb25maWd1cmV9LCB7QGxpbmsgRHVyYXRpb24jc2hpZnRUb30sIGFuZCB7QGxpbmsgRHVyYXRpb24jbmVnYXRlfS4KICAgKiAqICoqT3V0cHV0KiogVG8gY29udmVydCB0aGUgRHVyYXRpb24gaW50byBvdGhlciByZXByZXNlbnRhdGlvbnMsIHNlZSB7QGxpbmsgRHVyYXRpb24jYXN9LCB7QGxpbmsgRHVyYXRpb24jdG9JU099LCB7QGxpbmsgRHVyYXRpb24jdG9Gb3JtYXR9LCBhbmQge0BsaW5rIER1cmF0aW9uI3RvSlNPTn0KICAgKgogICAqIFRoZXJlJ3MgYXJlIG1vcmUgbWV0aG9kcyBkb2N1bWVudGVkIGJlbG93LiBJbiBhZGRpdGlvbiwgZm9yIG1vcmUgaW5mb3JtYXRpb24gb24gc3VidGxlciB0b3BpY3MgbGlrZSBpbnRlcm5hdGlvbmFsaXphdGlvbiBhbmQgdmFsaWRpdHksIHNlZSB0aGUgZXh0ZXJuYWwgZG9jdW1lbnRhdGlvbi4KICAgKi8KICBjbGFzcyBEdXJhdGlvbiB7CiAgICAvKioKICAgICAqIEBwcml2YXRlCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGNvbmZpZykgewogICAgICBjb25zdCBhY2N1cmF0ZSA9IGNvbmZpZy5jb252ZXJzaW9uQWNjdXJhY3kgPT09ICJsb25ndGVybSIgfHwgZmFsc2U7CiAgICAgIGxldCBtYXRyaXggPSBhY2N1cmF0ZSA/IGFjY3VyYXRlTWF0cml4IDogY2FzdWFsTWF0cml4OwoKICAgICAgaWYgKGNvbmZpZy5tYXRyaXgpIHsKICAgICAgICBtYXRyaXggPSBjb25maWcubWF0cml4OwogICAgICB9CgogICAgICAvKioKICAgICAgICogQGFjY2VzcyBwcml2YXRlCiAgICAgICAqLwogICAgICB0aGlzLnZhbHVlcyA9IGNvbmZpZy52YWx1ZXM7CiAgICAgIC8qKgogICAgICAgKiBAYWNjZXNzIHByaXZhdGUKICAgICAgICovCiAgICAgIHRoaXMubG9jID0gY29uZmlnLmxvYyB8fCBMb2NhbGUuY3JlYXRlKCk7CiAgICAgIC8qKgogICAgICAgKiBAYWNjZXNzIHByaXZhdGUKICAgICAgICovCiAgICAgIHRoaXMuY29udmVyc2lvbkFjY3VyYWN5ID0gYWNjdXJhdGUgPyAibG9uZ3Rlcm0iIDogImNhc3VhbCI7CiAgICAgIC8qKgogICAgICAgKiBAYWNjZXNzIHByaXZhdGUKICAgICAgICovCiAgICAgIHRoaXMuaW52YWxpZCA9IGNvbmZpZy5pbnZhbGlkIHx8IG51bGw7CiAgICAgIC8qKgogICAgICAgKiBAYWNjZXNzIHByaXZhdGUKICAgICAgICovCiAgICAgIHRoaXMubWF0cml4ID0gbWF0cml4OwogICAgICAvKioKICAgICAgICogQGFjY2VzcyBwcml2YXRlCiAgICAgICAqLwogICAgICB0aGlzLmlzTHV4b25EdXJhdGlvbiA9IHRydWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBDcmVhdGUgRHVyYXRpb24gZnJvbSBhIG51bWJlciBvZiBtaWxsaXNlY29uZHMuCiAgICAgKiBAcGFyYW0ge251bWJlcn0gY291bnQgb2YgbWlsbGlzZWNvbmRzCiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnMgZm9yIHBhcnNpbmcKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NhbGU9J2VuLVVTJ10gLSB0aGUgbG9jYWxlIHRvIHVzZQogICAgICogQHBhcmFtIHtzdHJpbmd9IG9wdHMubnVtYmVyaW5nU3lzdGVtIC0gdGhlIG51bWJlcmluZyBzeXN0ZW0gdG8gdXNlCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMuY29udmVyc2lvbkFjY3VyYWN5PSdjYXN1YWwnXSAtIHRoZSBjb252ZXJzaW9uIHN5c3RlbSB0byB1c2UKICAgICAqIEByZXR1cm4ge0R1cmF0aW9ufQogICAgICovCiAgICBzdGF0aWMgZnJvbU1pbGxpcyhjb3VudCwgb3B0cykgewogICAgICByZXR1cm4gRHVyYXRpb24uZnJvbU9iamVjdCh7IG1pbGxpc2Vjb25kczogY291bnQgfSwgb3B0cyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBDcmVhdGUgYSBEdXJhdGlvbiBmcm9tIGEgSmF2YVNjcmlwdCBvYmplY3Qgd2l0aCBrZXlzIGxpa2UgJ3llYXJzJyBhbmQgJ2hvdXJzJy4KICAgICAqIElmIHRoaXMgb2JqZWN0IGlzIGVtcHR5IHRoZW4gYSB6ZXJvIG1pbGxpc2Vjb25kcyBkdXJhdGlvbiBpcyByZXR1cm5lZC4KICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmogLSB0aGUgb2JqZWN0IHRvIGNyZWF0ZSB0aGUgRGF0ZVRpbWUgZnJvbQogICAgICogQHBhcmFtIHtudW1iZXJ9IG9iai55ZWFycwogICAgICogQHBhcmFtIHtudW1iZXJ9IG9iai5xdWFydGVycwogICAgICogQHBhcmFtIHtudW1iZXJ9IG9iai5tb250aHMKICAgICAqIEBwYXJhbSB7bnVtYmVyfSBvYmoud2Vla3MKICAgICAqIEBwYXJhbSB7bnVtYmVyfSBvYmouZGF5cwogICAgICogQHBhcmFtIHtudW1iZXJ9IG9iai5ob3VycwogICAgICogQHBhcmFtIHtudW1iZXJ9IG9iai5taW51dGVzCiAgICAgKiBAcGFyYW0ge251bWJlcn0gb2JqLnNlY29uZHMKICAgICAqIEBwYXJhbSB7bnVtYmVyfSBvYmoubWlsbGlzZWNvbmRzCiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdHM9W11dIC0gb3B0aW9ucyBmb3IgY3JlYXRpbmcgdGhpcyBEdXJhdGlvbgogICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmxvY2FsZT0nZW4tVVMnXSAtIHRoZSBsb2NhbGUgdG8gdXNlCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0cy5udW1iZXJpbmdTeXN0ZW0gLSB0aGUgbnVtYmVyaW5nIHN5c3RlbSB0byB1c2UKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5jb252ZXJzaW9uQWNjdXJhY3k9J2Nhc3VhbCddIC0gdGhlIHByZXNldCBjb252ZXJzaW9uIHN5c3RlbSB0byB1c2UKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5tYXRyaXg9T2JqZWN0XSAtIHRoZSBjdXN0b20gY29udmVyc2lvbiBzeXN0ZW0gdG8gdXNlCiAgICAgKiBAcmV0dXJuIHtEdXJhdGlvbn0KICAgICAqLwogICAgc3RhdGljIGZyb21PYmplY3Qob2JqLCBvcHRzID0ge30pIHsKICAgICAgaWYgKG9iaiA9PSBudWxsIHx8IHR5cGVvZiBvYmogIT09ICJvYmplY3QiKSB7CiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKAogICAgICAgICAgYER1cmF0aW9uLmZyb21PYmplY3Q6IGFyZ3VtZW50IGV4cGVjdGVkIHRvIGJlIGFuIG9iamVjdCwgZ290ICR7CiAgICAgICAgICBvYmogPT09IG51bGwgPyAibnVsbCIgOiB0eXBlb2Ygb2JqCiAgICAgICAgfWAKICAgICAgICApOwogICAgICB9CgogICAgICByZXR1cm4gbmV3IER1cmF0aW9uKHsKICAgICAgICB2YWx1ZXM6IG5vcm1hbGl6ZU9iamVjdChvYmosIER1cmF0aW9uLm5vcm1hbGl6ZVVuaXQpLAogICAgICAgIGxvYzogTG9jYWxlLmZyb21PYmplY3Qob3B0cyksCiAgICAgICAgY29udmVyc2lvbkFjY3VyYWN5OiBvcHRzLmNvbnZlcnNpb25BY2N1cmFjeSwKICAgICAgICBtYXRyaXg6IG9wdHMubWF0cml4LAogICAgICB9KTsKICAgIH0KCiAgICAvKioKICAgICAqIENyZWF0ZSBhIER1cmF0aW9uIGZyb20gRHVyYXRpb25MaWtlLgogICAgICoKICAgICAqIEBwYXJhbSB7T2JqZWN0IHwgbnVtYmVyIHwgRHVyYXRpb259IGR1cmF0aW9uTGlrZQogICAgICogT25lIG9mOgogICAgICogLSBvYmplY3Qgd2l0aCBrZXlzIGxpa2UgJ3llYXJzJyBhbmQgJ2hvdXJzJy4KICAgICAqIC0gbnVtYmVyIHJlcHJlc2VudGluZyBtaWxsaXNlY29uZHMKICAgICAqIC0gRHVyYXRpb24gaW5zdGFuY2UKICAgICAqIEByZXR1cm4ge0R1cmF0aW9ufQogICAgICovCiAgICBzdGF0aWMgZnJvbUR1cmF0aW9uTGlrZShkdXJhdGlvbkxpa2UpIHsKICAgICAgaWYgKGlzTnVtYmVyJDEoZHVyYXRpb25MaWtlKSkgewogICAgICAgIHJldHVybiBEdXJhdGlvbi5mcm9tTWlsbGlzKGR1cmF0aW9uTGlrZSk7CiAgICAgIH0gZWxzZSBpZiAoRHVyYXRpb24uaXNEdXJhdGlvbihkdXJhdGlvbkxpa2UpKSB7CiAgICAgICAgcmV0dXJuIGR1cmF0aW9uTGlrZTsKICAgICAgfSBlbHNlIGlmICh0eXBlb2YgZHVyYXRpb25MaWtlID09PSAib2JqZWN0IikgewogICAgICAgIHJldHVybiBEdXJhdGlvbi5mcm9tT2JqZWN0KGR1cmF0aW9uTGlrZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKAogICAgICAgICAgYFVua25vd24gZHVyYXRpb24gYXJndW1lbnQgJHtkdXJhdGlvbkxpa2V9IG9mIHR5cGUgJHt0eXBlb2YgZHVyYXRpb25MaWtlfWAKICAgICAgICApOwogICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBDcmVhdGUgYSBEdXJhdGlvbiBmcm9tIGFuIElTTyA4NjAxIGR1cmF0aW9uIHN0cmluZy4KICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IC0gdGV4dCB0byBwYXJzZQogICAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zIGZvciBwYXJzaW5nCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jYWxlPSdlbi1VUyddIC0gdGhlIGxvY2FsZSB0byB1c2UKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRzLm51bWJlcmluZ1N5c3RlbSAtIHRoZSBudW1iZXJpbmcgc3lzdGVtIHRvIHVzZQogICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmNvbnZlcnNpb25BY2N1cmFjeT0nY2FzdWFsJ10gLSB0aGUgcHJlc2V0IGNvbnZlcnNpb24gc3lzdGVtIHRvIHVzZQogICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLm1hdHJpeD1PYmplY3RdIC0gdGhlIHByZXNldCBjb252ZXJzaW9uIHN5c3RlbSB0byB1c2UKICAgICAqIEBzZWUgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSVNPXzg2MDEjRHVyYXRpb25zCiAgICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tSVNPKCdQM1k2TTFXNERUMTJIMzBNNVMnKS50b09iamVjdCgpIC8vPT4geyB5ZWFyczogMywgbW9udGhzOiA2LCB3ZWVrczogMSwgZGF5czogNCwgaG91cnM6IDEyLCBtaW51dGVzOiAzMCwgc2Vjb25kczogNSB9CiAgICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tSVNPKCdQVDIzSCcpLnRvT2JqZWN0KCkgLy89PiB7IGhvdXJzOiAyMyB9CiAgICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tSVNPKCdQNVkzTScpLnRvT2JqZWN0KCkgLy89PiB7IHllYXJzOiA1LCBtb250aHM6IDMgfQogICAgICogQHJldHVybiB7RHVyYXRpb259CiAgICAgKi8KICAgIHN0YXRpYyBmcm9tSVNPKHRleHQsIG9wdHMpIHsKICAgICAgY29uc3QgW3BhcnNlZF0gPSBwYXJzZUlTT0R1cmF0aW9uKHRleHQpOwogICAgICBpZiAocGFyc2VkKSB7CiAgICAgICAgcmV0dXJuIER1cmF0aW9uLmZyb21PYmplY3QocGFyc2VkLCBvcHRzKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gRHVyYXRpb24uaW52YWxpZCgidW5wYXJzYWJsZSIsIGB0aGUgaW5wdXQgIiR7dGV4dH0iIGNhbid0IGJlIHBhcnNlZCBhcyBJU08gODYwMWApOwogICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBDcmVhdGUgYSBEdXJhdGlvbiBmcm9tIGFuIElTTyA4NjAxIHRpbWUgc3RyaW5nLgogICAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgLSB0ZXh0IHRvIHBhcnNlCiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnMgZm9yIHBhcnNpbmcKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NhbGU9J2VuLVVTJ10gLSB0aGUgbG9jYWxlIHRvIHVzZQogICAgICogQHBhcmFtIHtzdHJpbmd9IG9wdHMubnVtYmVyaW5nU3lzdGVtIC0gdGhlIG51bWJlcmluZyBzeXN0ZW0gdG8gdXNlCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMuY29udmVyc2lvbkFjY3VyYWN5PSdjYXN1YWwnXSAtIHRoZSBwcmVzZXQgY29udmVyc2lvbiBzeXN0ZW0gdG8gdXNlCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubWF0cml4PU9iamVjdF0gLSB0aGUgY29udmVyc2lvbiBzeXN0ZW0gdG8gdXNlCiAgICAgKiBAc2VlIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT184NjAxI1RpbWVzCiAgICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tSVNPVGltZSgnMTE6MjI6MzMuNDQ0JykudG9PYmplY3QoKSAvLz0+IHsgaG91cnM6IDExLCBtaW51dGVzOiAyMiwgc2Vjb25kczogMzMsIG1pbGxpc2Vjb25kczogNDQ0IH0KICAgICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21JU09UaW1lKCcxMTowMCcpLnRvT2JqZWN0KCkgLy89PiB7IGhvdXJzOiAxMSwgbWludXRlczogMCwgc2Vjb25kczogMCB9CiAgICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tSVNPVGltZSgnVDExOjAwJykudG9PYmplY3QoKSAvLz0+IHsgaG91cnM6IDExLCBtaW51dGVzOiAwLCBzZWNvbmRzOiAwIH0KICAgICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21JU09UaW1lKCcxMTAwJykudG9PYmplY3QoKSAvLz0+IHsgaG91cnM6IDExLCBtaW51dGVzOiAwLCBzZWNvbmRzOiAwIH0KICAgICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21JU09UaW1lKCdUMTEwMCcpLnRvT2JqZWN0KCkgLy89PiB7IGhvdXJzOiAxMSwgbWludXRlczogMCwgc2Vjb25kczogMCB9CiAgICAgKiBAcmV0dXJuIHtEdXJhdGlvbn0KICAgICAqLwogICAgc3RhdGljIGZyb21JU09UaW1lKHRleHQsIG9wdHMpIHsKICAgICAgY29uc3QgW3BhcnNlZF0gPSBwYXJzZUlTT1RpbWVPbmx5KHRleHQpOwogICAgICBpZiAocGFyc2VkKSB7CiAgICAgICAgcmV0dXJuIER1cmF0aW9uLmZyb21PYmplY3QocGFyc2VkLCBvcHRzKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gRHVyYXRpb24uaW52YWxpZCgidW5wYXJzYWJsZSIsIGB0aGUgaW5wdXQgIiR7dGV4dH0iIGNhbid0IGJlIHBhcnNlZCBhcyBJU08gODYwMWApOwogICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBDcmVhdGUgYW4gaW52YWxpZCBEdXJhdGlvbi4KICAgICAqIEBwYXJhbSB7c3RyaW5nfSByZWFzb24gLSBzaW1wbGUgc3RyaW5nIG9mIHdoeSB0aGlzIGRhdGV0aW1lIGlzIGludmFsaWQuIFNob3VsZCBub3QgY29udGFpbiBwYXJhbWV0ZXJzIG9yIGFueXRoaW5nIGVsc2UgZGF0YS1kZXBlbmRlbnQKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbZXhwbGFuYXRpb249bnVsbF0gLSBsb25nZXIgZXhwbGFuYXRpb24sIG1heSBpbmNsdWRlIHBhcmFtZXRlcnMgYW5kIG90aGVyIHVzZWZ1bCBkZWJ1Z2dpbmcgaW5mb3JtYXRpb24KICAgICAqIEByZXR1cm4ge0R1cmF0aW9ufQogICAgICovCiAgICBzdGF0aWMgaW52YWxpZChyZWFzb24sIGV4cGxhbmF0aW9uID0gbnVsbCkgewogICAgICBpZiAoIXJlYXNvbikgewogICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcigibmVlZCB0byBzcGVjaWZ5IGEgcmVhc29uIHRoZSBEdXJhdGlvbiBpcyBpbnZhbGlkIik7CiAgICAgIH0KCiAgICAgIGNvbnN0IGludmFsaWQgPSByZWFzb24gaW5zdGFuY2VvZiBJbnZhbGlkID8gcmVhc29uIDogbmV3IEludmFsaWQocmVhc29uLCBleHBsYW5hdGlvbik7CgogICAgICBpZiAoU2V0dGluZ3MudGhyb3dPbkludmFsaWQpIHsKICAgICAgICB0aHJvdyBuZXcgSW52YWxpZER1cmF0aW9uRXJyb3IoaW52YWxpZCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIG5ldyBEdXJhdGlvbih7IGludmFsaWQgfSk7CiAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIEBwcml2YXRlCiAgICAgKi8KICAgIHN0YXRpYyBub3JtYWxpemVVbml0KHVuaXQpIHsKICAgICAgY29uc3Qgbm9ybWFsaXplZCA9IHsKICAgICAgICB5ZWFyOiAieWVhcnMiLAogICAgICAgIHllYXJzOiAieWVhcnMiLAogICAgICAgIHF1YXJ0ZXI6ICJxdWFydGVycyIsCiAgICAgICAgcXVhcnRlcnM6ICJxdWFydGVycyIsCiAgICAgICAgbW9udGg6ICJtb250aHMiLAogICAgICAgIG1vbnRoczogIm1vbnRocyIsCiAgICAgICAgd2VlazogIndlZWtzIiwKICAgICAgICB3ZWVrczogIndlZWtzIiwKICAgICAgICBkYXk6ICJkYXlzIiwKICAgICAgICBkYXlzOiAiZGF5cyIsCiAgICAgICAgaG91cjogImhvdXJzIiwKICAgICAgICBob3VyczogImhvdXJzIiwKICAgICAgICBtaW51dGU6ICJtaW51dGVzIiwKICAgICAgICBtaW51dGVzOiAibWludXRlcyIsCiAgICAgICAgc2Vjb25kOiAic2Vjb25kcyIsCiAgICAgICAgc2Vjb25kczogInNlY29uZHMiLAogICAgICAgIG1pbGxpc2Vjb25kOiAibWlsbGlzZWNvbmRzIiwKICAgICAgICBtaWxsaXNlY29uZHM6ICJtaWxsaXNlY29uZHMiLAogICAgICB9W3VuaXQgPyB1bml0LnRvTG93ZXJDYXNlKCkgOiB1bml0XTsKCiAgICAgIGlmICghbm9ybWFsaXplZCkgdGhyb3cgbmV3IEludmFsaWRVbml0RXJyb3IodW5pdCk7CgogICAgICByZXR1cm4gbm9ybWFsaXplZDsKICAgIH0KCiAgICAvKioKICAgICAqIENoZWNrIGlmIGFuIG9iamVjdCBpcyBhIER1cmF0aW9uLiBXb3JrcyBhY3Jvc3MgY29udGV4dCBib3VuZGFyaWVzCiAgICAgKiBAcGFyYW0ge29iamVjdH0gbwogICAgICogQHJldHVybiB7Ym9vbGVhbn0KICAgICAqLwogICAgc3RhdGljIGlzRHVyYXRpb24obykgewogICAgICByZXR1cm4gKG8gJiYgby5pc0x1eG9uRHVyYXRpb24pIHx8IGZhbHNlOwogICAgfQoKICAgIC8qKgogICAgICogR2V0ICB0aGUgbG9jYWxlIG9mIGEgRHVyYXRpb24sIHN1Y2ggJ2VuLUdCJwogICAgICogQHR5cGUge3N0cmluZ30KICAgICAqLwogICAgZ2V0IGxvY2FsZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMubG9jLmxvY2FsZSA6IG51bGw7CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQgdGhlIG51bWJlcmluZyBzeXN0ZW0gb2YgYSBEdXJhdGlvbiwgc3VjaCAnYmVuZycuIFRoZSBudW1iZXJpbmcgc3lzdGVtIGlzIHVzZWQgd2hlbiBmb3JtYXR0aW5nIHRoZSBEdXJhdGlvbgogICAgICoKICAgICAqIEB0eXBlIHtzdHJpbmd9CiAgICAgKi8KICAgIGdldCBudW1iZXJpbmdTeXN0ZW0oKSB7CiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLmxvYy5udW1iZXJpbmdTeXN0ZW0gOiBudWxsOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIER1cmF0aW9uIGZvcm1hdHRlZCBhY2NvcmRpbmcgdG8gdGhlIHNwZWNpZmllZCBmb3JtYXQgc3RyaW5nLiBZb3UgbWF5IHVzZSB0aGVzZSB0b2tlbnM6CiAgICAgKiAqIGBTYCBmb3IgbWlsbGlzZWNvbmRzCiAgICAgKiAqIGBzYCBmb3Igc2Vjb25kcwogICAgICogKiBgbWAgZm9yIG1pbnV0ZXMKICAgICAqICogYGhgIGZvciBob3VycwogICAgICogKiBgZGAgZm9yIGRheXMKICAgICAqICogYHdgIGZvciB3ZWVrcwogICAgICogKiBgTWAgZm9yIG1vbnRocwogICAgICogKiBgeWAgZm9yIHllYXJzCiAgICAgKiBOb3RlczoKICAgICAqICogQWRkIHBhZGRpbmcgYnkgcmVwZWF0aW5nIHRoZSB0b2tlbiwgZS5nLiAieXkiIHBhZHMgdGhlIHllYXJzIHRvIHR3byBkaWdpdHMsICJoaGhoIiBwYWRzIHRoZSBob3VycyBvdXQgdG8gZm91ciBkaWdpdHMKICAgICAqICogVG9rZW5zIGNhbiBiZSBlc2NhcGVkIGJ5IHdyYXBwaW5nIHdpdGggc2luZ2xlIHF1b3Rlcy4KICAgICAqICogVGhlIGR1cmF0aW9uIHdpbGwgYmUgY29udmVydGVkIHRvIHRoZSBzZXQgb2YgdW5pdHMgaW4gdGhlIGZvcm1hdCBzdHJpbmcgdXNpbmcge0BsaW5rIER1cmF0aW9uI3NoaWZ0VG99IGFuZCB0aGUgRHVyYXRpb25zJ3MgY29udmVyc2lvbiBhY2N1cmFjeSBzZXR0aW5nLgogICAgICogQHBhcmFtIHtzdHJpbmd9IGZtdCAtIHRoZSBmb3JtYXQgc3RyaW5nCiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnMKICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuZmxvb3I9dHJ1ZV0gLSBmbG9vciBudW1lcmljYWwgdmFsdWVzCiAgICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgeWVhcnM6IDEsIGRheXM6IDYsIHNlY29uZHM6IDIgfSkudG9Gb3JtYXQoInkgZCBzIikgLy89PiAiMSA2IDIiCiAgICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgeWVhcnM6IDEsIGRheXM6IDYsIHNlY29uZHM6IDIgfSkudG9Gb3JtYXQoInl5IGRkIHNzcyIpIC8vPT4gIjAxIDA2IDAwMiIKICAgICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyB5ZWFyczogMSwgZGF5czogNiwgc2Vjb25kczogMiB9KS50b0Zvcm1hdCgiTSBTIikgLy89PiAiMTIgNTE4NDAyMDAwIgogICAgICogQHJldHVybiB7c3RyaW5nfQogICAgICovCiAgICB0b0Zvcm1hdChmbXQsIG9wdHMgPSB7fSkgewogICAgICAvLyByZXZlcnNlLWNvbXBhdCBzaW5jZSAxLjI7IHdlIGFsd2F5cyByb3VuZCBkb3duIG5vdywgbmV2ZXIgdXAsIGFuZCB3ZSBkbyBpdCBieSBkZWZhdWx0CiAgICAgIGNvbnN0IGZtdE9wdHMgPSB7CiAgICAgICAgLi4ub3B0cywKICAgICAgICBmbG9vcjogb3B0cy5yb3VuZCAhPT0gZmFsc2UgJiYgb3B0cy5mbG9vciAhPT0gZmFsc2UsCiAgICAgIH07CiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQKICAgICAgICA/IEZvcm1hdHRlci5jcmVhdGUodGhpcy5sb2MsIGZtdE9wdHMpLmZvcm1hdER1cmF0aW9uRnJvbVN0cmluZyh0aGlzLCBmbXQpCiAgICAgICAgOiBJTlZBTElEJDM7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGEgRHVyYXRpb24gd2l0aCBhbGwgdW5pdHMgaW5jbHVkZWQuCiAgICAgKiBUbyBtb2RpZnkgaXRzIGJlaGF2aW9yIHVzZSB0aGUgYGxpc3RTdHlsZWAgYW5kIGFueSBJbnRsLk51bWJlckZvcm1hdCBvcHRpb24sIHRob3VnaCBgdW5pdERpc3BsYXlgIGlzIGVzcGVjaWFsbHkgcmVsZXZhbnQuCiAgICAgKiBAc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0ludGwvTnVtYmVyRm9ybWF0CiAgICAgKiBAcGFyYW0gb3B0cyAtIE9uIG9wdGlvbiBvYmplY3QgdG8gb3ZlcnJpZGUgdGhlIGZvcm1hdHRpbmcuIEFjY2VwdHMgdGhlIHNhbWUga2V5cyBhcyB0aGUgb3B0aW9ucyBwYXJhbWV0ZXIgb2YgdGhlIG5hdGl2ZSBgSW50Lk51bWJlckZvcm1hdGAgY29uc3RydWN0b3IsIGFzIHdlbGwgYXMgYGxpc3RTdHlsZWAuCiAgICAgKiBAZXhhbXBsZQogICAgICogYGBganMKICAgICAqIHZhciBkdXIgPSBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgZGF5czogMSwgaG91cnM6IDUsIG1pbnV0ZXM6IDYgfSkKICAgICAqIGR1ci50b0h1bWFuKCkgLy89PiAnMSBkYXksIDUgaG91cnMsIDYgbWludXRlcycKICAgICAqIGR1ci50b0h1bWFuKHsgbGlzdFN0eWxlOiAibG9uZyIgfSkgLy89PiAnMSBkYXksIDUgaG91cnMsIGFuZCA2IG1pbnV0ZXMnCiAgICAgKiBkdXIudG9IdW1hbih7IHVuaXREaXNwbGF5OiAic2hvcnQiIH0pIC8vPT4gJzEgZGF5LCA1IGhyLCA2IG1pbicKICAgICAqIGBgYAogICAgICovCiAgICB0b0h1bWFuKG9wdHMgPSB7fSkgewogICAgICBjb25zdCBsID0gb3JkZXJlZFVuaXRzJDEKICAgICAgICAubWFwKCh1bml0KSA9PiB7CiAgICAgICAgICBjb25zdCB2YWwgPSB0aGlzLnZhbHVlc1t1bml0XTsKICAgICAgICAgIGlmIChpc1VuZGVmaW5lZCh2YWwpKSB7CiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHRoaXMubG9jCiAgICAgICAgICAgIC5udW1iZXJGb3JtYXR0ZXIoeyBzdHlsZTogInVuaXQiLCB1bml0RGlzcGxheTogImxvbmciLCAuLi5vcHRzLCB1bml0OiB1bml0LnNsaWNlKDAsIC0xKSB9KQogICAgICAgICAgICAuZm9ybWF0KHZhbCk7CiAgICAgICAgfSkKICAgICAgICAuZmlsdGVyKChuKSA9PiBuKTsKCiAgICAgIHJldHVybiB0aGlzLmxvYwogICAgICAgIC5saXN0Rm9ybWF0dGVyKHsgdHlwZTogImNvbmp1bmN0aW9uIiwgc3R5bGU6IG9wdHMubGlzdFN0eWxlIHx8ICJuYXJyb3ciLCAuLi5vcHRzIH0pCiAgICAgICAgLmZvcm1hdChsKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgYSBKYXZhU2NyaXB0IG9iamVjdCB3aXRoIHRoaXMgRHVyYXRpb24ncyB2YWx1ZXMuCiAgICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgeWVhcnM6IDEsIGRheXM6IDYsIHNlY29uZHM6IDIgfSkudG9PYmplY3QoKSAvLz0+IHsgeWVhcnM6IDEsIGRheXM6IDYsIHNlY29uZHM6IDIgfQogICAgICogQHJldHVybiB7T2JqZWN0fQogICAgICovCiAgICB0b09iamVjdCgpIHsKICAgICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiB7fTsKICAgICAgcmV0dXJuIHsgLi4udGhpcy52YWx1ZXMgfTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgYW4gSVNPIDg2MDEtY29tcGxpYW50IHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIER1cmF0aW9uLgogICAgICogQHNlZSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9JU09fODYwMSNEdXJhdGlvbnMKICAgICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyB5ZWFyczogMywgc2Vjb25kczogNDUgfSkudG9JU08oKSAvLz0+ICdQM1lUNDVTJwogICAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7IG1vbnRoczogNCwgc2Vjb25kczogNDUgfSkudG9JU08oKSAvLz0+ICdQNE1UNDVTJwogICAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7IG1vbnRoczogNSB9KS50b0lTTygpIC8vPT4gJ1A1TScKICAgICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyBtaW51dGVzOiA1IH0pLnRvSVNPKCkgLy89PiAnUFQ1TScKICAgICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyBtaWxsaXNlY29uZHM6IDYgfSkudG9JU08oKSAvLz0+ICdQVDAuMDA2UycKICAgICAqIEByZXR1cm4ge3N0cmluZ30KICAgICAqLwogICAgdG9JU08oKSB7CiAgICAgIC8vIHdlIGNvdWxkIHVzZSB0aGUgZm9ybWF0dGVyLCBidXQgdGhpcyBpcyBhbiBlYXNpZXIgd2F5IHRvIGdldCB0aGUgbWluaW11bSBzdHJpbmcKICAgICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiBudWxsOwoKICAgICAgbGV0IHMgPSAiUCI7CiAgICAgIGlmICh0aGlzLnllYXJzICE9PSAwKSBzICs9IHRoaXMueWVhcnMgKyAiWSI7CiAgICAgIGlmICh0aGlzLm1vbnRocyAhPT0gMCB8fCB0aGlzLnF1YXJ0ZXJzICE9PSAwKSBzICs9IHRoaXMubW9udGhzICsgdGhpcy5xdWFydGVycyAqIDMgKyAiTSI7CiAgICAgIGlmICh0aGlzLndlZWtzICE9PSAwKSBzICs9IHRoaXMud2Vla3MgKyAiVyI7CiAgICAgIGlmICh0aGlzLmRheXMgIT09IDApIHMgKz0gdGhpcy5kYXlzICsgIkQiOwogICAgICBpZiAodGhpcy5ob3VycyAhPT0gMCB8fCB0aGlzLm1pbnV0ZXMgIT09IDAgfHwgdGhpcy5zZWNvbmRzICE9PSAwIHx8IHRoaXMubWlsbGlzZWNvbmRzICE9PSAwKQogICAgICAgIHMgKz0gIlQiOwogICAgICBpZiAodGhpcy5ob3VycyAhPT0gMCkgcyArPSB0aGlzLmhvdXJzICsgIkgiOwogICAgICBpZiAodGhpcy5taW51dGVzICE9PSAwKSBzICs9IHRoaXMubWludXRlcyArICJNIjsKICAgICAgaWYgKHRoaXMuc2Vjb25kcyAhPT0gMCB8fCB0aGlzLm1pbGxpc2Vjb25kcyAhPT0gMCkKICAgICAgICAvLyB0aGlzIHdpbGwgaGFuZGxlICJmbG9hdGluZyBwb2ludCBtYWRuZXNzIiBieSByZW1vdmluZyBleHRyYSBkZWNpbWFsIHBsYWNlcwogICAgICAgIC8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzU4ODAwNC9pcy1mbG9hdGluZy1wb2ludC1tYXRoLWJyb2tlbgogICAgICAgIHMgKz0gcm91bmRUbyh0aGlzLnNlY29uZHMgKyB0aGlzLm1pbGxpc2Vjb25kcyAvIDEwMDAsIDMpICsgIlMiOwogICAgICBpZiAocyA9PT0gIlAiKSBzICs9ICJUMFMiOwogICAgICByZXR1cm4gczsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgYW4gSVNPIDg2MDEtY29tcGxpYW50IHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIER1cmF0aW9uLCBmb3JtYXR0ZWQgYXMgYSB0aW1lIG9mIGRheS4KICAgICAqIE5vdGUgdGhhdCB0aGlzIHdpbGwgcmV0dXJuIG51bGwgaWYgdGhlIGR1cmF0aW9uIGlzIGludmFsaWQsIG5lZ2F0aXZlLCBvciBlcXVhbCB0byBvciBncmVhdGVyIHRoYW4gMjQgaG91cnMuCiAgICAgKiBAc2VlIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT184NjAxI1RpbWVzCiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnMKICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuc3VwcHJlc3NNaWxsaXNlY29uZHM9ZmFsc2VdIC0gZXhjbHVkZSBtaWxsaXNlY29uZHMgZnJvbSB0aGUgZm9ybWF0IGlmIHRoZXkncmUgMAogICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5zdXBwcmVzc1NlY29uZHM9ZmFsc2VdIC0gZXhjbHVkZSBzZWNvbmRzIGZyb20gdGhlIGZvcm1hdCBpZiB0aGV5J3JlIDAKICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuaW5jbHVkZVByZWZpeD1mYWxzZV0gLSBpbmNsdWRlIHRoZSBgVGAgcHJlZml4CiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMuZm9ybWF0PSdleHRlbmRlZCddIC0gY2hvb3NlIGJldHdlZW4gdGhlIGJhc2ljIGFuZCBleHRlbmRlZCBmb3JtYXQKICAgICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyBob3VyczogMTEgfSkudG9JU09UaW1lKCkgLy89PiAnMTE6MDA6MDAuMDAwJwogICAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7IGhvdXJzOiAxMSB9KS50b0lTT1RpbWUoeyBzdXBwcmVzc01pbGxpc2Vjb25kczogdHJ1ZSB9KSAvLz0+ICcxMTowMDowMCcKICAgICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyBob3VyczogMTEgfSkudG9JU09UaW1lKHsgc3VwcHJlc3NTZWNvbmRzOiB0cnVlIH0pIC8vPT4gJzExOjAwJwogICAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7IGhvdXJzOiAxMSB9KS50b0lTT1RpbWUoeyBpbmNsdWRlUHJlZml4OiB0cnVlIH0pIC8vPT4gJ1QxMTowMDowMC4wMDAnCiAgICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgaG91cnM6IDExIH0pLnRvSVNPVGltZSh7IGZvcm1hdDogJ2Jhc2ljJyB9KSAvLz0+ICcxMTAwMDAuMDAwJwogICAgICogQHJldHVybiB7c3RyaW5nfQogICAgICovCiAgICB0b0lTT1RpbWUob3B0cyA9IHt9KSB7CiAgICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gbnVsbDsKCiAgICAgIGNvbnN0IG1pbGxpcyA9IHRoaXMudG9NaWxsaXMoKTsKICAgICAgaWYgKG1pbGxpcyA8IDAgfHwgbWlsbGlzID49IDg2NDAwMDAwKSByZXR1cm4gbnVsbDsKCiAgICAgIG9wdHMgPSB7CiAgICAgICAgc3VwcHJlc3NNaWxsaXNlY29uZHM6IGZhbHNlLAogICAgICAgIHN1cHByZXNzU2Vjb25kczogZmFsc2UsCiAgICAgICAgaW5jbHVkZVByZWZpeDogZmFsc2UsCiAgICAgICAgZm9ybWF0OiAiZXh0ZW5kZWQiLAogICAgICAgIC4uLm9wdHMsCiAgICAgIH07CgogICAgICBjb25zdCB2YWx1ZSA9IHRoaXMuc2hpZnRUbygiaG91cnMiLCAibWludXRlcyIsICJzZWNvbmRzIiwgIm1pbGxpc2Vjb25kcyIpOwoKICAgICAgbGV0IGZtdCA9IG9wdHMuZm9ybWF0ID09PSAiYmFzaWMiID8gImhobW0iIDogImhoOm1tIjsKCiAgICAgIGlmICghb3B0cy5zdXBwcmVzc1NlY29uZHMgfHwgdmFsdWUuc2Vjb25kcyAhPT0gMCB8fCB2YWx1ZS5taWxsaXNlY29uZHMgIT09IDApIHsKICAgICAgICBmbXQgKz0gb3B0cy5mb3JtYXQgPT09ICJiYXNpYyIgPyAic3MiIDogIjpzcyI7CiAgICAgICAgaWYgKCFvcHRzLnN1cHByZXNzTWlsbGlzZWNvbmRzIHx8IHZhbHVlLm1pbGxpc2Vjb25kcyAhPT0gMCkgewogICAgICAgICAgZm10ICs9ICIuU1NTIjsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGxldCBzdHIgPSB2YWx1ZS50b0Zvcm1hdChmbXQpOwoKICAgICAgaWYgKG9wdHMuaW5jbHVkZVByZWZpeCkgewogICAgICAgIHN0ciA9ICJUIiArIHN0cjsKICAgICAgfQoKICAgICAgcmV0dXJuIHN0cjsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgYW4gSVNPIDg2MDEgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBEdXJhdGlvbiBhcHByb3ByaWF0ZSBmb3IgdXNlIGluIEpTT04uCiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9CiAgICAgKi8KICAgIHRvSlNPTigpIHsKICAgICAgcmV0dXJuIHRoaXMudG9JU08oKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgYW4gSVNPIDg2MDEgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBEdXJhdGlvbiBhcHByb3ByaWF0ZSBmb3IgdXNlIGluIGRlYnVnZ2luZy4KICAgICAqIEByZXR1cm4ge3N0cmluZ30KICAgICAqLwogICAgdG9TdHJpbmcoKSB7CiAgICAgIHJldHVybiB0aGlzLnRvSVNPKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIGFuIG1pbGxpc2Vjb25kcyB2YWx1ZSBvZiB0aGlzIER1cmF0aW9uLgogICAgICogQHJldHVybiB7bnVtYmVyfQogICAgICovCiAgICB0b01pbGxpcygpIHsKICAgICAgcmV0dXJuIHRoaXMuYXMoIm1pbGxpc2Vjb25kcyIpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyBhbiBtaWxsaXNlY29uZHMgdmFsdWUgb2YgdGhpcyBEdXJhdGlvbi4gQWxpYXMgb2Yge0BsaW5rIHRvTWlsbGlzfQogICAgICogQHJldHVybiB7bnVtYmVyfQogICAgICovCiAgICB2YWx1ZU9mKCkgewogICAgICByZXR1cm4gdGhpcy50b01pbGxpcygpOwogICAgfQoKICAgIC8qKgogICAgICogTWFrZSB0aGlzIER1cmF0aW9uIGxvbmdlciBieSB0aGUgc3BlY2lmaWVkIGFtb3VudC4gUmV0dXJuIGEgbmV3bHktY29uc3RydWN0ZWQgRHVyYXRpb24uCiAgICAgKiBAcGFyYW0ge0R1cmF0aW9ufE9iamVjdHxudW1iZXJ9IGR1cmF0aW9uIC0gVGhlIGFtb3VudCB0byBhZGQuIEVpdGhlciBhIEx1eG9uIER1cmF0aW9uLCBhIG51bWJlciBvZiBtaWxsaXNlY29uZHMsIHRoZSBvYmplY3QgYXJndW1lbnQgdG8gRHVyYXRpb24uZnJvbU9iamVjdCgpCiAgICAgKiBAcmV0dXJuIHtEdXJhdGlvbn0KICAgICAqLwogICAgcGx1cyhkdXJhdGlvbikgewogICAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIHRoaXM7CgogICAgICBjb25zdCBkdXIgPSBEdXJhdGlvbi5mcm9tRHVyYXRpb25MaWtlKGR1cmF0aW9uKSwKICAgICAgICByZXN1bHQgPSB7fTsKCiAgICAgIGZvciAoY29uc3QgayBvZiBvcmRlcmVkVW5pdHMkMSkgewogICAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eShkdXIudmFsdWVzLCBrKSB8fCBoYXNPd25Qcm9wZXJ0eSh0aGlzLnZhbHVlcywgaykpIHsKICAgICAgICAgIHJlc3VsdFtrXSA9IGR1ci5nZXQoaykgKyB0aGlzLmdldChrKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBjbG9uZSQyKHRoaXMsIHsgdmFsdWVzOiByZXN1bHQgfSwgdHJ1ZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBNYWtlIHRoaXMgRHVyYXRpb24gc2hvcnRlciBieSB0aGUgc3BlY2lmaWVkIGFtb3VudC4gUmV0dXJuIGEgbmV3bHktY29uc3RydWN0ZWQgRHVyYXRpb24uCiAgICAgKiBAcGFyYW0ge0R1cmF0aW9ufE9iamVjdHxudW1iZXJ9IGR1cmF0aW9uIC0gVGhlIGFtb3VudCB0byBzdWJ0cmFjdC4gRWl0aGVyIGEgTHV4b24gRHVyYXRpb24sIGEgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcywgdGhlIG9iamVjdCBhcmd1bWVudCB0byBEdXJhdGlvbi5mcm9tT2JqZWN0KCkKICAgICAqIEByZXR1cm4ge0R1cmF0aW9ufQogICAgICovCiAgICBtaW51cyhkdXJhdGlvbikgewogICAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIHRoaXM7CgogICAgICBjb25zdCBkdXIgPSBEdXJhdGlvbi5mcm9tRHVyYXRpb25MaWtlKGR1cmF0aW9uKTsKICAgICAgcmV0dXJuIHRoaXMucGx1cyhkdXIubmVnYXRlKCkpOwogICAgfQoKICAgIC8qKgogICAgICogU2NhbGUgdGhpcyBEdXJhdGlvbiBieSB0aGUgc3BlY2lmaWVkIGFtb3VudC4gUmV0dXJuIGEgbmV3bHktY29uc3RydWN0ZWQgRHVyYXRpb24uCiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBmbiAtIFRoZSBmdW5jdGlvbiB0byBhcHBseSB0byBlYWNoIHVuaXQuIEFyaXR5IGlzIDEgb3IgMjogdGhlIHZhbHVlIG9mIHRoZSB1bml0IGFuZCwgb3B0aW9uYWxseSwgdGhlIHVuaXQgbmFtZS4gTXVzdCByZXR1cm4gYSBudW1iZXIuCiAgICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgaG91cnM6IDEsIG1pbnV0ZXM6IDMwIH0pLm1hcFVuaXRzKHggPT4geCAqIDIpIC8vPT4geyBob3VyczogMiwgbWludXRlczogNjAgfQogICAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7IGhvdXJzOiAxLCBtaW51dGVzOiAzMCB9KS5tYXBVbml0cygoeCwgdSkgPT4gdSA9PT0gImhvdXJzIiA/IHggKiAyIDogeCkgLy89PiB7IGhvdXJzOiAyLCBtaW51dGVzOiAzMCB9CiAgICAgKiBAcmV0dXJuIHtEdXJhdGlvbn0KICAgICAqLwogICAgbWFwVW5pdHMoZm4pIHsKICAgICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiB0aGlzOwogICAgICBjb25zdCByZXN1bHQgPSB7fTsKICAgICAgZm9yIChjb25zdCBrIG9mIE9iamVjdC5rZXlzKHRoaXMudmFsdWVzKSkgewogICAgICAgIHJlc3VsdFtrXSA9IGFzTnVtYmVyKGZuKHRoaXMudmFsdWVzW2tdLCBrKSk7CiAgICAgIH0KICAgICAgcmV0dXJuIGNsb25lJDIodGhpcywgeyB2YWx1ZXM6IHJlc3VsdCB9LCB0cnVlKTsKICAgIH0KCiAgICAvKioKICAgICAqIEdldCB0aGUgdmFsdWUgb2YgdW5pdC4KICAgICAqIEBwYXJhbSB7c3RyaW5nfSB1bml0IC0gYSB1bml0IHN1Y2ggYXMgJ21pbnV0ZScgb3IgJ2RheScKICAgICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3Qoe3llYXJzOiAyLCBkYXlzOiAzfSkuZ2V0KCd5ZWFycycpIC8vPT4gMgogICAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7eWVhcnM6IDIsIGRheXM6IDN9KS5nZXQoJ21vbnRocycpIC8vPT4gMAogICAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7eWVhcnM6IDIsIGRheXM6IDN9KS5nZXQoJ2RheXMnKSAvLz0+IDMKICAgICAqIEByZXR1cm4ge251bWJlcn0KICAgICAqLwogICAgZ2V0KHVuaXQpIHsKICAgICAgcmV0dXJuIHRoaXNbRHVyYXRpb24ubm9ybWFsaXplVW5pdCh1bml0KV07CiAgICB9CgogICAgLyoqCiAgICAgKiAiU2V0IiB0aGUgdmFsdWVzIG9mIHNwZWNpZmllZCB1bml0cy4gUmV0dXJuIGEgbmV3bHktY29uc3RydWN0ZWQgRHVyYXRpb24uCiAgICAgKiBAcGFyYW0ge09iamVjdH0gdmFsdWVzIC0gYSBtYXBwaW5nIG9mIHVuaXRzIHRvIG51bWJlcnMKICAgICAqIEBleGFtcGxlIGR1ci5zZXQoeyB5ZWFyczogMjAxNyB9KQogICAgICogQGV4YW1wbGUgZHVyLnNldCh7IGhvdXJzOiA4LCBtaW51dGVzOiAzMCB9KQogICAgICogQHJldHVybiB7RHVyYXRpb259CiAgICAgKi8KICAgIHNldCh2YWx1ZXMpIHsKICAgICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiB0aGlzOwoKICAgICAgY29uc3QgbWl4ZWQgPSB7IC4uLnRoaXMudmFsdWVzLCAuLi5ub3JtYWxpemVPYmplY3QodmFsdWVzLCBEdXJhdGlvbi5ub3JtYWxpemVVbml0KSB9OwogICAgICByZXR1cm4gY2xvbmUkMih0aGlzLCB7IHZhbHVlczogbWl4ZWQgfSk7CiAgICB9CgogICAgLyoqCiAgICAgKiAiU2V0IiB0aGUgbG9jYWxlIGFuZC9vciBudW1iZXJpbmdTeXN0ZW0uICBSZXR1cm5zIGEgbmV3bHktY29uc3RydWN0ZWQgRHVyYXRpb24uCiAgICAgKiBAZXhhbXBsZSBkdXIucmVjb25maWd1cmUoeyBsb2NhbGU6ICdlbi1HQicgfSkKICAgICAqIEByZXR1cm4ge0R1cmF0aW9ufQogICAgICovCiAgICByZWNvbmZpZ3VyZSh7IGxvY2FsZSwgbnVtYmVyaW5nU3lzdGVtLCBjb252ZXJzaW9uQWNjdXJhY3ksIG1hdHJpeCB9ID0ge30pIHsKICAgICAgY29uc3QgbG9jID0gdGhpcy5sb2MuY2xvbmUoeyBsb2NhbGUsIG51bWJlcmluZ1N5c3RlbSB9KTsKICAgICAgY29uc3Qgb3B0cyA9IHsgbG9jLCBtYXRyaXgsIGNvbnZlcnNpb25BY2N1cmFjeSB9OwogICAgICByZXR1cm4gY2xvbmUkMih0aGlzLCBvcHRzKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB0aGUgbGVuZ3RoIG9mIHRoZSBkdXJhdGlvbiBpbiB0aGUgc3BlY2lmaWVkIHVuaXQuCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdW5pdCAtIGEgdW5pdCBzdWNoIGFzICdtaW51dGVzJyBvciAnZGF5cycKICAgICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3Qoe3llYXJzOiAxfSkuYXMoJ2RheXMnKSAvLz0+IDM2NQogICAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7eWVhcnM6IDF9KS5hcygnbW9udGhzJykgLy89PiAxMgogICAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7aG91cnM6IDYwfSkuYXMoJ2RheXMnKSAvLz0+IDIuNQogICAgICogQHJldHVybiB7bnVtYmVyfQogICAgICovCiAgICBhcyh1bml0KSB7CiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLnNoaWZ0VG8odW5pdCkuZ2V0KHVuaXQpIDogTmFOOwogICAgfQoKICAgIC8qKgogICAgICogUmVkdWNlIHRoaXMgRHVyYXRpb24gdG8gaXRzIGNhbm9uaWNhbCByZXByZXNlbnRhdGlvbiBpbiBpdHMgY3VycmVudCB1bml0cy4KICAgICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyB5ZWFyczogMiwgZGF5czogNTAwMCB9KS5ub3JtYWxpemUoKS50b09iamVjdCgpIC8vPT4geyB5ZWFyczogMTUsIGRheXM6IDI1NSB9CiAgICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgaG91cnM6IDEyLCBtaW51dGVzOiAtNDUgfSkubm9ybWFsaXplKCkudG9PYmplY3QoKSAvLz0+IHsgaG91cnM6IDExLCBtaW51dGVzOiAxNSB9CiAgICAgKiBAcmV0dXJuIHtEdXJhdGlvbn0KICAgICAqLwogICAgbm9ybWFsaXplKCkgewogICAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIHRoaXM7CiAgICAgIGNvbnN0IHZhbHMgPSB0aGlzLnRvT2JqZWN0KCk7CiAgICAgIG5vcm1hbGl6ZVZhbHVlcyh0aGlzLm1hdHJpeCwgdmFscyk7CiAgICAgIHJldHVybiBjbG9uZSQyKHRoaXMsIHsgdmFsdWVzOiB2YWxzIH0sIHRydWUpOwogICAgfQoKICAgIC8qKgogICAgICogQ29udmVydCB0aGlzIER1cmF0aW9uIGludG8gaXRzIHJlcHJlc2VudGF0aW9uIGluIGEgZGlmZmVyZW50IHNldCBvZiB1bml0cy4KICAgICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyBob3VyczogMSwgc2Vjb25kczogMzAgfSkuc2hpZnRUbygnbWludXRlcycsICdtaWxsaXNlY29uZHMnKS50b09iamVjdCgpIC8vPT4geyBtaW51dGVzOiA2MCwgbWlsbGlzZWNvbmRzOiAzMDAwMCB9CiAgICAgKiBAcmV0dXJuIHtEdXJhdGlvbn0KICAgICAqLwogICAgc2hpZnRUbyguLi51bml0cykgewogICAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIHRoaXM7CgogICAgICBpZiAodW5pdHMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH0KCiAgICAgIHVuaXRzID0gdW5pdHMubWFwKCh1KSA9PiBEdXJhdGlvbi5ub3JtYWxpemVVbml0KHUpKTsKCiAgICAgIGNvbnN0IGJ1aWx0ID0ge30sCiAgICAgICAgYWNjdW11bGF0ZWQgPSB7fSwKICAgICAgICB2YWxzID0gdGhpcy50b09iamVjdCgpOwogICAgICBsZXQgbGFzdFVuaXQ7CgogICAgICBmb3IgKGNvbnN0IGsgb2Ygb3JkZXJlZFVuaXRzJDEpIHsKICAgICAgICBpZiAodW5pdHMuaW5kZXhPZihrKSA+PSAwKSB7CiAgICAgICAgICBsYXN0VW5pdCA9IGs7CgogICAgICAgICAgbGV0IG93biA9IDA7CgogICAgICAgICAgLy8gYW55dGhpbmcgd2UgaGF2ZW4ndCBib2lsZWQgZG93biB5ZXQgc2hvdWxkIGdldCBib2lsZWQgdG8gdGhpcyB1bml0CiAgICAgICAgICBmb3IgKGNvbnN0IGFrIGluIGFjY3VtdWxhdGVkKSB7CiAgICAgICAgICAgIG93biArPSB0aGlzLm1hdHJpeFtha11ba10gKiBhY2N1bXVsYXRlZFtha107CiAgICAgICAgICAgIGFjY3VtdWxhdGVkW2FrXSA9IDA7CiAgICAgICAgICB9CgogICAgICAgICAgLy8gcGx1cyBhbnl0aGluZyB0aGF0J3MgYWxyZWFkeSBpbiB0aGlzIHVuaXQKICAgICAgICAgIGlmIChpc051bWJlciQxKHZhbHNba10pKSB7CiAgICAgICAgICAgIG93biArPSB2YWxzW2tdOwogICAgICAgICAgfQoKICAgICAgICAgIGNvbnN0IGkgPSBNYXRoLnRydW5jKG93bik7CiAgICAgICAgICBidWlsdFtrXSA9IGk7CiAgICAgICAgICBhY2N1bXVsYXRlZFtrXSA9IChvd24gKiAxMDAwIC0gaSAqIDEwMDApIC8gMTAwMDsKCiAgICAgICAgICAvLyBwbHVzIGFueXRoaW5nIGZ1cnRoZXIgZG93biB0aGUgY2hhaW4gdGhhdCBzaG91bGQgYmUgcm9sbGVkIHVwIGluIHRvIHRoaXMKICAgICAgICAgIGZvciAoY29uc3QgZG93biBpbiB2YWxzKSB7CiAgICAgICAgICAgIGlmIChvcmRlcmVkVW5pdHMkMS5pbmRleE9mKGRvd24pID4gb3JkZXJlZFVuaXRzJDEuaW5kZXhPZihrKSkgewogICAgICAgICAgICAgIGNvbnZlcnQodGhpcy5tYXRyaXgsIHZhbHMsIGRvd24sIGJ1aWx0LCBrKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgLy8gb3RoZXJ3aXNlLCBrZWVwIGl0IGluIHRoZSB3aW5ncyB0byBib2lsIGl0IGxhdGVyCiAgICAgICAgfSBlbHNlIGlmIChpc051bWJlciQxKHZhbHNba10pKSB7CiAgICAgICAgICBhY2N1bXVsYXRlZFtrXSA9IHZhbHNba107CiAgICAgICAgfQogICAgICB9CgogICAgICAvLyBhbnl0aGluZyBsZWZ0b3ZlciBiZWNvbWVzIHRoZSBkZWNpbWFsIGZvciB0aGUgbGFzdCB1bml0CiAgICAgIC8vIGxhc3RVbml0IG11c3QgYmUgZGVmaW5lZCBzaW5jZSB1bml0cyBpcyBub3QgZW1wdHkKICAgICAgZm9yIChjb25zdCBrZXkgaW4gYWNjdW11bGF0ZWQpIHsKICAgICAgICBpZiAoYWNjdW11bGF0ZWRba2V5XSAhPT0gMCkgewogICAgICAgICAgYnVpbHRbbGFzdFVuaXRdICs9CiAgICAgICAgICAgIGtleSA9PT0gbGFzdFVuaXQgPyBhY2N1bXVsYXRlZFtrZXldIDogYWNjdW11bGF0ZWRba2V5XSAvIHRoaXMubWF0cml4W2xhc3RVbml0XVtrZXldOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIGNsb25lJDIodGhpcywgeyB2YWx1ZXM6IGJ1aWx0IH0sIHRydWUpLm5vcm1hbGl6ZSgpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHRoZSBuZWdhdGl2ZSBvZiB0aGlzIER1cmF0aW9uLgogICAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7IGhvdXJzOiAxLCBzZWNvbmRzOiAzMCB9KS5uZWdhdGUoKS50b09iamVjdCgpIC8vPT4geyBob3VyczogLTEsIHNlY29uZHM6IC0zMCB9CiAgICAgKiBAcmV0dXJuIHtEdXJhdGlvbn0KICAgICAqLwogICAgbmVnYXRlKCkgewogICAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIHRoaXM7CiAgICAgIGNvbnN0IG5lZ2F0ZWQgPSB7fTsKICAgICAgZm9yIChjb25zdCBrIG9mIE9iamVjdC5rZXlzKHRoaXMudmFsdWVzKSkgewogICAgICAgIG5lZ2F0ZWRba10gPSB0aGlzLnZhbHVlc1trXSA9PT0gMCA/IDAgOiAtdGhpcy52YWx1ZXNba107CiAgICAgIH0KICAgICAgcmV0dXJuIGNsb25lJDIodGhpcywgeyB2YWx1ZXM6IG5lZ2F0ZWQgfSwgdHJ1ZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQgdGhlIHllYXJzLgogICAgICogQHR5cGUge251bWJlcn0KICAgICAqLwogICAgZ2V0IHllYXJzKCkgewogICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy52YWx1ZXMueWVhcnMgfHwgMCA6IE5hTjsKICAgIH0KCiAgICAvKioKICAgICAqIEdldCB0aGUgcXVhcnRlcnMuCiAgICAgKiBAdHlwZSB7bnVtYmVyfQogICAgICovCiAgICBnZXQgcXVhcnRlcnMoKSB7CiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLnZhbHVlcy5xdWFydGVycyB8fCAwIDogTmFOOwogICAgfQoKICAgIC8qKgogICAgICogR2V0IHRoZSBtb250aHMuCiAgICAgKiBAdHlwZSB7bnVtYmVyfQogICAgICovCiAgICBnZXQgbW9udGhzKCkgewogICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy52YWx1ZXMubW9udGhzIHx8IDAgOiBOYU47CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQgdGhlIHdlZWtzCiAgICAgKiBAdHlwZSB7bnVtYmVyfQogICAgICovCiAgICBnZXQgd2Vla3MoKSB7CiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLnZhbHVlcy53ZWVrcyB8fCAwIDogTmFOOwogICAgfQoKICAgIC8qKgogICAgICogR2V0IHRoZSBkYXlzLgogICAgICogQHR5cGUge251bWJlcn0KICAgICAqLwogICAgZ2V0IGRheXMoKSB7CiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLnZhbHVlcy5kYXlzIHx8IDAgOiBOYU47CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQgdGhlIGhvdXJzLgogICAgICogQHR5cGUge251bWJlcn0KICAgICAqLwogICAgZ2V0IGhvdXJzKCkgewogICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy52YWx1ZXMuaG91cnMgfHwgMCA6IE5hTjsKICAgIH0KCiAgICAvKioKICAgICAqIEdldCB0aGUgbWludXRlcy4KICAgICAqIEB0eXBlIHtudW1iZXJ9CiAgICAgKi8KICAgIGdldCBtaW51dGVzKCkgewogICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy52YWx1ZXMubWludXRlcyB8fCAwIDogTmFOOwogICAgfQoKICAgIC8qKgogICAgICogR2V0IHRoZSBzZWNvbmRzLgogICAgICogQHJldHVybiB7bnVtYmVyfQogICAgICovCiAgICBnZXQgc2Vjb25kcygpIHsKICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMudmFsdWVzLnNlY29uZHMgfHwgMCA6IE5hTjsKICAgIH0KCiAgICAvKioKICAgICAqIEdldCB0aGUgbWlsbGlzZWNvbmRzLgogICAgICogQHJldHVybiB7bnVtYmVyfQogICAgICovCiAgICBnZXQgbWlsbGlzZWNvbmRzKCkgewogICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy52YWx1ZXMubWlsbGlzZWNvbmRzIHx8IDAgOiBOYU47CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhlIER1cmF0aW9uIGlzIGludmFsaWQuIEludmFsaWQgZHVyYXRpb25zIGFyZSByZXR1cm5lZCBieSBkaWZmIG9wZXJhdGlvbnMKICAgICAqIG9uIGludmFsaWQgRGF0ZVRpbWVzIG9yIEludGVydmFscy4KICAgICAqIEByZXR1cm4ge2Jvb2xlYW59CiAgICAgKi8KICAgIGdldCBpc1ZhbGlkKCkgewogICAgICByZXR1cm4gdGhpcy5pbnZhbGlkID09PSBudWxsOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyBhbiBlcnJvciBjb2RlIGlmIHRoaXMgRHVyYXRpb24gYmVjYW1lIGludmFsaWQsIG9yIG51bGwgaWYgdGhlIER1cmF0aW9uIGlzIHZhbGlkCiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9CiAgICAgKi8KICAgIGdldCBpbnZhbGlkUmVhc29uKCkgewogICAgICByZXR1cm4gdGhpcy5pbnZhbGlkID8gdGhpcy5pbnZhbGlkLnJlYXNvbiA6IG51bGw7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIGFuIGV4cGxhbmF0aW9uIG9mIHdoeSB0aGlzIER1cmF0aW9uIGJlY2FtZSBpbnZhbGlkLCBvciBudWxsIGlmIHRoZSBEdXJhdGlvbiBpcyB2YWxpZAogICAgICogQHR5cGUge3N0cmluZ30KICAgICAqLwogICAgZ2V0IGludmFsaWRFeHBsYW5hdGlvbigpIHsKICAgICAgcmV0dXJuIHRoaXMuaW52YWxpZCA/IHRoaXMuaW52YWxpZC5leHBsYW5hdGlvbiA6IG51bGw7CiAgICB9CgogICAgLyoqCiAgICAgKiBFcXVhbGl0eSBjaGVjawogICAgICogVHdvIER1cmF0aW9ucyBhcmUgZXF1YWwgaWZmIHRoZXkgaGF2ZSB0aGUgc2FtZSB1bml0cyBhbmQgdGhlIHNhbWUgdmFsdWVzIGZvciBlYWNoIHVuaXQuCiAgICAgKiBAcGFyYW0ge0R1cmF0aW9ufSBvdGhlcgogICAgICogQHJldHVybiB7Ym9vbGVhbn0KICAgICAqLwogICAgZXF1YWxzKG90aGVyKSB7CiAgICAgIGlmICghdGhpcy5pc1ZhbGlkIHx8ICFvdGhlci5pc1ZhbGlkKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICBpZiAoIXRoaXMubG9jLmVxdWFscyhvdGhlci5sb2MpKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICBmdW5jdGlvbiBlcSh2MSwgdjIpIHsKICAgICAgICAvLyBDb25zaWRlciAwIGFuZCB1bmRlZmluZWQgYXMgZXF1YWwKICAgICAgICBpZiAodjEgPT09IHVuZGVmaW5lZCB8fCB2MSA9PT0gMCkgcmV0dXJuIHYyID09PSB1bmRlZmluZWQgfHwgdjIgPT09IDA7CiAgICAgICAgcmV0dXJuIHYxID09PSB2MjsKICAgICAgfQoKICAgICAgZm9yIChjb25zdCB1IG9mIG9yZGVyZWRVbml0cyQxKSB7CiAgICAgICAgaWYgKCFlcSh0aGlzLnZhbHVlc1t1XSwgb3RoZXIudmFsdWVzW3VdKSkgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICB9CgogIGNvbnN0IElOVkFMSUQkMiA9ICJJbnZhbGlkIEludGVydmFsIjsKCiAgLy8gY2hlY2tzIGlmIHRoZSBzdGFydCBpcyBlcXVhbCB0byBvciBiZWZvcmUgdGhlIGVuZAogIGZ1bmN0aW9uIHZhbGlkYXRlU3RhcnRFbmQoc3RhcnQsIGVuZCkgewogICAgaWYgKCFzdGFydCB8fCAhc3RhcnQuaXNWYWxpZCkgewogICAgICByZXR1cm4gSW50ZXJ2YWwuaW52YWxpZCgibWlzc2luZyBvciBpbnZhbGlkIHN0YXJ0Iik7CiAgICB9IGVsc2UgaWYgKCFlbmQgfHwgIWVuZC5pc1ZhbGlkKSB7CiAgICAgIHJldHVybiBJbnRlcnZhbC5pbnZhbGlkKCJtaXNzaW5nIG9yIGludmFsaWQgZW5kIik7CiAgICB9IGVsc2UgaWYgKGVuZCA8IHN0YXJ0KSB7CiAgICAgIHJldHVybiBJbnRlcnZhbC5pbnZhbGlkKAogICAgICAgICJlbmQgYmVmb3JlIHN0YXJ0IiwKICAgICAgICBgVGhlIGVuZCBvZiBhbiBpbnRlcnZhbCBtdXN0IGJlIGFmdGVyIGl0cyBzdGFydCwgYnV0IHlvdSBoYWQgc3RhcnQ9JHtzdGFydC50b0lTTygpfSBhbmQgZW5kPSR7ZW5kLnRvSVNPKCl9YAogICAgICApOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgfQoKICAvKioKICAgKiBBbiBJbnRlcnZhbCBvYmplY3QgcmVwcmVzZW50cyBhIGhhbGYtb3BlbiBpbnRlcnZhbCBvZiB0aW1lLCB3aGVyZSBlYWNoIGVuZHBvaW50IGlzIGEge0BsaW5rIERhdGVUaW1lfS4gQ29uY2VwdHVhbGx5LCBpdCdzIGEgY29udGFpbmVyIGZvciB0aG9zZSB0d28gZW5kcG9pbnRzLCBhY2NvbXBhbmllZCBieSBtZXRob2RzIGZvciBjcmVhdGluZywgcGFyc2luZywgaW50ZXJyb2dhdGluZywgY29tcGFyaW5nLCB0cmFuc2Zvcm1pbmcsIGFuZCBmb3JtYXR0aW5nIHRoZW0uCiAgICoKICAgKiBIZXJlIGlzIGEgYnJpZWYgb3ZlcnZpZXcgb2YgdGhlIG1vc3QgY29tbW9ubHkgdXNlZCBtZXRob2RzIGFuZCBnZXR0ZXJzIGluIEludGVydmFsOgogICAqCiAgICogKiAqKkNyZWF0aW9uKiogVG8gY3JlYXRlIGFuIEludGVydmFsLCB1c2Uge0BsaW5rIEludGVydmFsLmZyb21EYXRlVGltZXN9LCB7QGxpbmsgSW50ZXJ2YWwuYWZ0ZXJ9LCB7QGxpbmsgSW50ZXJ2YWwuYmVmb3JlfSwgb3Ige0BsaW5rIEludGVydmFsLmZyb21JU099LgogICAqICogKipBY2Nlc3NvcnMqKiBVc2Uge0BsaW5rIEludGVydmFsI3N0YXJ0fSBhbmQge0BsaW5rIEludGVydmFsI2VuZH0gdG8gZ2V0IHRoZSBzdGFydCBhbmQgZW5kLgogICAqICogKipJbnRlcnJvZ2F0aW9uKiogVG8gYW5hbHl6ZSB0aGUgSW50ZXJ2YWwsIHVzZSB7QGxpbmsgSW50ZXJ2YWwjY291bnR9LCB7QGxpbmsgSW50ZXJ2YWwjbGVuZ3RofSwge0BsaW5rIEludGVydmFsI2hhc1NhbWV9LCB7QGxpbmsgSW50ZXJ2YWwjY29udGFpbnN9LCB7QGxpbmsgSW50ZXJ2YWwjaXNBZnRlcn0sIG9yIHtAbGluayBJbnRlcnZhbCNpc0JlZm9yZX0uCiAgICogKiAqKlRyYW5zZm9ybWF0aW9uKiogVG8gY3JlYXRlIG90aGVyIEludGVydmFscyBvdXQgb2YgdGhpcyBvbmUsIHVzZSB7QGxpbmsgSW50ZXJ2YWwjc2V0fSwge0BsaW5rIEludGVydmFsI3NwbGl0QXR9LCB7QGxpbmsgSW50ZXJ2YWwjc3BsaXRCeX0sIHtAbGluayBJbnRlcnZhbCNkaXZpZGVFcXVhbGx5fSwge0BsaW5rIEludGVydmFsLm1lcmdlfSwge0BsaW5rIEludGVydmFsLnhvcn0sIHtAbGluayBJbnRlcnZhbCN1bmlvbn0sIHtAbGluayBJbnRlcnZhbCNpbnRlcnNlY3Rpb259LCBvciB7QGxpbmsgSW50ZXJ2YWwjZGlmZmVyZW5jZX0uCiAgICogKiAqKkNvbXBhcmlzb24qKiBUbyBjb21wYXJlIHRoaXMgSW50ZXJ2YWwgdG8gYW5vdGhlciBvbmUsIHVzZSB7QGxpbmsgSW50ZXJ2YWwjZXF1YWxzfSwge0BsaW5rIEludGVydmFsI292ZXJsYXBzfSwge0BsaW5rIEludGVydmFsI2FidXRzU3RhcnR9LCB7QGxpbmsgSW50ZXJ2YWwjYWJ1dHNFbmR9LCB7QGxpbmsgSW50ZXJ2YWwjZW5ndWxmc30KICAgKiAqICoqT3V0cHV0KiogVG8gY29udmVydCB0aGUgSW50ZXJ2YWwgaW50byBvdGhlciByZXByZXNlbnRhdGlvbnMsIHNlZSB7QGxpbmsgSW50ZXJ2YWwjdG9TdHJpbmd9LCB7QGxpbmsgSW50ZXJ2YWwjdG9JU099LCB7QGxpbmsgSW50ZXJ2YWwjdG9JU09EYXRlfSwge0BsaW5rIEludGVydmFsI3RvSVNPVGltZX0sIHtAbGluayBJbnRlcnZhbCN0b0Zvcm1hdH0sIGFuZCB7QGxpbmsgSW50ZXJ2YWwjdG9EdXJhdGlvbn0uCiAgICovCiAgY2xhc3MgSW50ZXJ2YWwgewogICAgLyoqCiAgICAgKiBAcHJpdmF0ZQogICAgICovCiAgICBjb25zdHJ1Y3Rvcihjb25maWcpIHsKICAgICAgLyoqCiAgICAgICAqIEBhY2Nlc3MgcHJpdmF0ZQogICAgICAgKi8KICAgICAgdGhpcy5zID0gY29uZmlnLnN0YXJ0OwogICAgICAvKioKICAgICAgICogQGFjY2VzcyBwcml2YXRlCiAgICAgICAqLwogICAgICB0aGlzLmUgPSBjb25maWcuZW5kOwogICAgICAvKioKICAgICAgICogQGFjY2VzcyBwcml2YXRlCiAgICAgICAqLwogICAgICB0aGlzLmludmFsaWQgPSBjb25maWcuaW52YWxpZCB8fCBudWxsOwogICAgICAvKioKICAgICAgICogQGFjY2VzcyBwcml2YXRlCiAgICAgICAqLwogICAgICB0aGlzLmlzTHV4b25JbnRlcnZhbCA9IHRydWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBDcmVhdGUgYW4gaW52YWxpZCBJbnRlcnZhbC4KICAgICAqIEBwYXJhbSB7c3RyaW5nfSByZWFzb24gLSBzaW1wbGUgc3RyaW5nIG9mIHdoeSB0aGlzIEludGVydmFsIGlzIGludmFsaWQuIFNob3VsZCBub3QgY29udGFpbiBwYXJhbWV0ZXJzIG9yIGFueXRoaW5nIGVsc2UgZGF0YS1kZXBlbmRlbnQKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbZXhwbGFuYXRpb249bnVsbF0gLSBsb25nZXIgZXhwbGFuYXRpb24sIG1heSBpbmNsdWRlIHBhcmFtZXRlcnMgYW5kIG90aGVyIHVzZWZ1bCBkZWJ1Z2dpbmcgaW5mb3JtYXRpb24KICAgICAqIEByZXR1cm4ge0ludGVydmFsfQogICAgICovCiAgICBzdGF0aWMgaW52YWxpZChyZWFzb24sIGV4cGxhbmF0aW9uID0gbnVsbCkgewogICAgICBpZiAoIXJlYXNvbikgewogICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcigibmVlZCB0byBzcGVjaWZ5IGEgcmVhc29uIHRoZSBJbnRlcnZhbCBpcyBpbnZhbGlkIik7CiAgICAgIH0KCiAgICAgIGNvbnN0IGludmFsaWQgPSByZWFzb24gaW5zdGFuY2VvZiBJbnZhbGlkID8gcmVhc29uIDogbmV3IEludmFsaWQocmVhc29uLCBleHBsYW5hdGlvbik7CgogICAgICBpZiAoU2V0dGluZ3MudGhyb3dPbkludmFsaWQpIHsKICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEludGVydmFsRXJyb3IoaW52YWxpZCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIG5ldyBJbnRlcnZhbCh7IGludmFsaWQgfSk7CiAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIENyZWF0ZSBhbiBJbnRlcnZhbCBmcm9tIGEgc3RhcnQgRGF0ZVRpbWUgYW5kIGFuIGVuZCBEYXRlVGltZS4gSW5jbHVzaXZlIG9mIHRoZSBzdGFydCBidXQgbm90IHRoZSBlbmQuCiAgICAgKiBAcGFyYW0ge0RhdGVUaW1lfERhdGV8T2JqZWN0fSBzdGFydAogICAgICogQHBhcmFtIHtEYXRlVGltZXxEYXRlfE9iamVjdH0gZW5kCiAgICAgKiBAcmV0dXJuIHtJbnRlcnZhbH0KICAgICAqLwogICAgc3RhdGljIGZyb21EYXRlVGltZXMoc3RhcnQsIGVuZCkgewogICAgICBjb25zdCBidWlsdFN0YXJ0ID0gZnJpZW5kbHlEYXRlVGltZShzdGFydCksCiAgICAgICAgYnVpbHRFbmQgPSBmcmllbmRseURhdGVUaW1lKGVuZCk7CgogICAgICBjb25zdCB2YWxpZGF0ZUVycm9yID0gdmFsaWRhdGVTdGFydEVuZChidWlsdFN0YXJ0LCBidWlsdEVuZCk7CgogICAgICBpZiAodmFsaWRhdGVFcnJvciA9PSBudWxsKSB7CiAgICAgICAgcmV0dXJuIG5ldyBJbnRlcnZhbCh7CiAgICAgICAgICBzdGFydDogYnVpbHRTdGFydCwKICAgICAgICAgIGVuZDogYnVpbHRFbmQsCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHZhbGlkYXRlRXJyb3I7CiAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIENyZWF0ZSBhbiBJbnRlcnZhbCBmcm9tIGEgc3RhcnQgRGF0ZVRpbWUgYW5kIGEgRHVyYXRpb24gdG8gZXh0ZW5kIHRvLgogICAgICogQHBhcmFtIHtEYXRlVGltZXxEYXRlfE9iamVjdH0gc3RhcnQKICAgICAqIEBwYXJhbSB7RHVyYXRpb258T2JqZWN0fG51bWJlcn0gZHVyYXRpb24gLSB0aGUgbGVuZ3RoIG9mIHRoZSBJbnRlcnZhbC4KICAgICAqIEByZXR1cm4ge0ludGVydmFsfQogICAgICovCiAgICBzdGF0aWMgYWZ0ZXIoc3RhcnQsIGR1cmF0aW9uKSB7CiAgICAgIGNvbnN0IGR1ciA9IER1cmF0aW9uLmZyb21EdXJhdGlvbkxpa2UoZHVyYXRpb24pLAogICAgICAgIGR0ID0gZnJpZW5kbHlEYXRlVGltZShzdGFydCk7CiAgICAgIHJldHVybiBJbnRlcnZhbC5mcm9tRGF0ZVRpbWVzKGR0LCBkdC5wbHVzKGR1cikpOwogICAgfQoKICAgIC8qKgogICAgICogQ3JlYXRlIGFuIEludGVydmFsIGZyb20gYW4gZW5kIERhdGVUaW1lIGFuZCBhIER1cmF0aW9uIHRvIGV4dGVuZCBiYWNrd2FyZHMgdG8uCiAgICAgKiBAcGFyYW0ge0RhdGVUaW1lfERhdGV8T2JqZWN0fSBlbmQKICAgICAqIEBwYXJhbSB7RHVyYXRpb258T2JqZWN0fG51bWJlcn0gZHVyYXRpb24gLSB0aGUgbGVuZ3RoIG9mIHRoZSBJbnRlcnZhbC4KICAgICAqIEByZXR1cm4ge0ludGVydmFsfQogICAgICovCiAgICBzdGF0aWMgYmVmb3JlKGVuZCwgZHVyYXRpb24pIHsKICAgICAgY29uc3QgZHVyID0gRHVyYXRpb24uZnJvbUR1cmF0aW9uTGlrZShkdXJhdGlvbiksCiAgICAgICAgZHQgPSBmcmllbmRseURhdGVUaW1lKGVuZCk7CiAgICAgIHJldHVybiBJbnRlcnZhbC5mcm9tRGF0ZVRpbWVzKGR0Lm1pbnVzKGR1ciksIGR0KTsKICAgIH0KCiAgICAvKioKICAgICAqIENyZWF0ZSBhbiBJbnRlcnZhbCBmcm9tIGFuIElTTyA4NjAxIHN0cmluZy4KICAgICAqIEFjY2VwdHMgYDxzdGFydD4vPGVuZD5gLCBgPHN0YXJ0Pi88ZHVyYXRpb24+YCwgYW5kIGA8ZHVyYXRpb24+LzxlbmQ+YCBmb3JtYXRzLgogICAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgLSB0aGUgSVNPIHN0cmluZyB0byBwYXJzZQogICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRzXSAtIG9wdGlvbnMgdG8gcGFzcyB7QGxpbmsgRGF0ZVRpbWUjZnJvbUlTT30gYW5kIG9wdGlvbmFsbHkge0BsaW5rIER1cmF0aW9uI2Zyb21JU099CiAgICAgKiBAc2VlIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT184NjAxI1RpbWVfaW50ZXJ2YWxzCiAgICAgKiBAcmV0dXJuIHtJbnRlcnZhbH0KICAgICAqLwogICAgc3RhdGljIGZyb21JU08odGV4dCwgb3B0cykgewogICAgICBjb25zdCBbcywgZV0gPSAodGV4dCB8fCAiIikuc3BsaXQoIi8iLCAyKTsKICAgICAgaWYgKHMgJiYgZSkgewogICAgICAgIGxldCBzdGFydCwgc3RhcnRJc1ZhbGlkOwogICAgICAgIHRyeSB7CiAgICAgICAgICBzdGFydCA9IERhdGVUaW1lLmZyb21JU08ocywgb3B0cyk7CiAgICAgICAgICBzdGFydElzVmFsaWQgPSBzdGFydC5pc1ZhbGlkOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIHN0YXJ0SXNWYWxpZCA9IGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgbGV0IGVuZCwgZW5kSXNWYWxpZDsKICAgICAgICB0cnkgewogICAgICAgICAgZW5kID0gRGF0ZVRpbWUuZnJvbUlTTyhlLCBvcHRzKTsKICAgICAgICAgIGVuZElzVmFsaWQgPSBlbmQuaXNWYWxpZDsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICBlbmRJc1ZhbGlkID0gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICBpZiAoc3RhcnRJc1ZhbGlkICYmIGVuZElzVmFsaWQpIHsKICAgICAgICAgIHJldHVybiBJbnRlcnZhbC5mcm9tRGF0ZVRpbWVzKHN0YXJ0LCBlbmQpOwogICAgICAgIH0KCiAgICAgICAgaWYgKHN0YXJ0SXNWYWxpZCkgewogICAgICAgICAgY29uc3QgZHVyID0gRHVyYXRpb24uZnJvbUlTTyhlLCBvcHRzKTsKICAgICAgICAgIGlmIChkdXIuaXNWYWxpZCkgewogICAgICAgICAgICByZXR1cm4gSW50ZXJ2YWwuYWZ0ZXIoc3RhcnQsIGR1cik7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmIChlbmRJc1ZhbGlkKSB7CiAgICAgICAgICBjb25zdCBkdXIgPSBEdXJhdGlvbi5mcm9tSVNPKHMsIG9wdHMpOwogICAgICAgICAgaWYgKGR1ci5pc1ZhbGlkKSB7CiAgICAgICAgICAgIHJldHVybiBJbnRlcnZhbC5iZWZvcmUoZW5kLCBkdXIpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gSW50ZXJ2YWwuaW52YWxpZCgidW5wYXJzYWJsZSIsIGB0aGUgaW5wdXQgIiR7dGV4dH0iIGNhbid0IGJlIHBhcnNlZCBhcyBJU08gODYwMWApOwogICAgfQoKICAgIC8qKgogICAgICogQ2hlY2sgaWYgYW4gb2JqZWN0IGlzIGFuIEludGVydmFsLiBXb3JrcyBhY3Jvc3MgY29udGV4dCBib3VuZGFyaWVzCiAgICAgKiBAcGFyYW0ge29iamVjdH0gbwogICAgICogQHJldHVybiB7Ym9vbGVhbn0KICAgICAqLwogICAgc3RhdGljIGlzSW50ZXJ2YWwobykgewogICAgICByZXR1cm4gKG8gJiYgby5pc0x1eG9uSW50ZXJ2YWwpIHx8IGZhbHNlOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyB0aGUgc3RhcnQgb2YgdGhlIEludGVydmFsCiAgICAgKiBAdHlwZSB7RGF0ZVRpbWV9CiAgICAgKi8KICAgIGdldCBzdGFydCgpIHsKICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMucyA6IG51bGw7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSBlbmQgb2YgdGhlIEludGVydmFsCiAgICAgKiBAdHlwZSB7RGF0ZVRpbWV9CiAgICAgKi8KICAgIGdldCBlbmQoKSB7CiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLmUgOiBudWxsOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyB3aGV0aGVyIHRoaXMgSW50ZXJ2YWwncyBlbmQgaXMgYXQgbGVhc3QgaXRzIHN0YXJ0LCBtZWFuaW5nIHRoYXQgdGhlIEludGVydmFsIGlzbid0ICdiYWNrd2FyZHMnLgogICAgICogQHR5cGUge2Jvb2xlYW59CiAgICAgKi8KICAgIGdldCBpc1ZhbGlkKCkgewogICAgICByZXR1cm4gdGhpcy5pbnZhbGlkUmVhc29uID09PSBudWxsOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyBhbiBlcnJvciBjb2RlIGlmIHRoaXMgSW50ZXJ2YWwgaXMgaW52YWxpZCwgb3IgbnVsbCBpZiB0aGUgSW50ZXJ2YWwgaXMgdmFsaWQKICAgICAqIEB0eXBlIHtzdHJpbmd9CiAgICAgKi8KICAgIGdldCBpbnZhbGlkUmVhc29uKCkgewogICAgICByZXR1cm4gdGhpcy5pbnZhbGlkID8gdGhpcy5pbnZhbGlkLnJlYXNvbiA6IG51bGw7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIGFuIGV4cGxhbmF0aW9uIG9mIHdoeSB0aGlzIEludGVydmFsIGJlY2FtZSBpbnZhbGlkLCBvciBudWxsIGlmIHRoZSBJbnRlcnZhbCBpcyB2YWxpZAogICAgICogQHR5cGUge3N0cmluZ30KICAgICAqLwogICAgZ2V0IGludmFsaWRFeHBsYW5hdGlvbigpIHsKICAgICAgcmV0dXJuIHRoaXMuaW52YWxpZCA/IHRoaXMuaW52YWxpZC5leHBsYW5hdGlvbiA6IG51bGw7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSBsZW5ndGggb2YgdGhlIEludGVydmFsIGluIHRoZSBzcGVjaWZpZWQgdW5pdC4KICAgICAqIEBwYXJhbSB7c3RyaW5nfSB1bml0IC0gdGhlIHVuaXQgKHN1Y2ggYXMgJ2hvdXJzJyBvciAnZGF5cycpIHRvIHJldHVybiB0aGUgbGVuZ3RoIGluLgogICAgICogQHJldHVybiB7bnVtYmVyfQogICAgICovCiAgICBsZW5ndGgodW5pdCA9ICJtaWxsaXNlY29uZHMiKSB7CiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLnRvRHVyYXRpb24oLi4uW3VuaXRdKS5nZXQodW5pdCkgOiBOYU47CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSBjb3VudCBvZiBtaW51dGVzLCBob3VycywgZGF5cywgbW9udGhzLCBvciB5ZWFycyBpbmNsdWRlZCBpbiB0aGUgSW50ZXJ2YWwsIGV2ZW4gaW4gcGFydC4KICAgICAqIFVubGlrZSB7QGxpbmsgSW50ZXJ2YWwjbGVuZ3RofSB0aGlzIGNvdW50cyBzZWN0aW9ucyBvZiB0aGUgY2FsZW5kYXIsIG5vdCBwZXJpb2RzIG9mIHRpbWUsIGUuZy4gc3BlY2lmeWluZyAnZGF5JwogICAgICogYXNrcyAnd2hhdCBkYXRlcyBhcmUgaW5jbHVkZWQgaW4gdGhpcyBpbnRlcnZhbD8nLCBub3QgJ2hvdyBtYW55IGRheXMgbG9uZyBpcyB0aGlzIGludGVydmFsPycKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbdW5pdD0nbWlsbGlzZWNvbmRzJ10gLSB0aGUgdW5pdCBvZiB0aW1lIHRvIGNvdW50LgogICAgICogQHJldHVybiB7bnVtYmVyfQogICAgICovCiAgICBjb3VudCh1bml0ID0gIm1pbGxpc2Vjb25kcyIpIHsKICAgICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiBOYU47CiAgICAgIGNvbnN0IHN0YXJ0ID0gdGhpcy5zdGFydC5zdGFydE9mKHVuaXQpLAogICAgICAgIGVuZCA9IHRoaXMuZW5kLnN0YXJ0T2YodW5pdCk7CiAgICAgIHJldHVybiBNYXRoLmZsb29yKGVuZC5kaWZmKHN0YXJ0LCB1bml0KS5nZXQodW5pdCkpICsgMTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgd2hldGhlciB0aGlzIEludGVydmFsJ3Mgc3RhcnQgYW5kIGVuZCBhcmUgYm90aCBpbiB0aGUgc2FtZSB1bml0IG9mIHRpbWUKICAgICAqIEBwYXJhbSB7c3RyaW5nfSB1bml0IC0gdGhlIHVuaXQgb2YgdGltZSB0byBjaGVjayBzYW1lbmVzcyBvbgogICAgICogQHJldHVybiB7Ym9vbGVhbn0KICAgICAqLwogICAgaGFzU2FtZSh1bml0KSB7CiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLmlzRW1wdHkoKSB8fCB0aGlzLmUubWludXMoMSkuaGFzU2FtZSh0aGlzLnMsIHVuaXQpIDogZmFsc2U7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gd2hldGhlciB0aGlzIEludGVydmFsIGhhcyB0aGUgc2FtZSBzdGFydCBhbmQgZW5kIERhdGVUaW1lcy4KICAgICAqIEByZXR1cm4ge2Jvb2xlYW59CiAgICAgKi8KICAgIGlzRW1wdHkoKSB7CiAgICAgIHJldHVybiB0aGlzLnMudmFsdWVPZigpID09PSB0aGlzLmUudmFsdWVPZigpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHdoZXRoZXIgdGhpcyBJbnRlcnZhbCdzIHN0YXJ0IGlzIGFmdGVyIHRoZSBzcGVjaWZpZWQgRGF0ZVRpbWUuCiAgICAgKiBAcGFyYW0ge0RhdGVUaW1lfSBkYXRlVGltZQogICAgICogQHJldHVybiB7Ym9vbGVhbn0KICAgICAqLwogICAgaXNBZnRlcihkYXRlVGltZSkgewogICAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIGZhbHNlOwogICAgICByZXR1cm4gdGhpcy5zID4gZGF0ZVRpbWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gd2hldGhlciB0aGlzIEludGVydmFsJ3MgZW5kIGlzIGJlZm9yZSB0aGUgc3BlY2lmaWVkIERhdGVUaW1lLgogICAgICogQHBhcmFtIHtEYXRlVGltZX0gZGF0ZVRpbWUKICAgICAqIEByZXR1cm4ge2Jvb2xlYW59CiAgICAgKi8KICAgIGlzQmVmb3JlKGRhdGVUaW1lKSB7CiAgICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gZmFsc2U7CiAgICAgIHJldHVybiB0aGlzLmUgPD0gZGF0ZVRpbWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gd2hldGhlciB0aGlzIEludGVydmFsIGNvbnRhaW5zIHRoZSBzcGVjaWZpZWQgRGF0ZVRpbWUuCiAgICAgKiBAcGFyYW0ge0RhdGVUaW1lfSBkYXRlVGltZQogICAgICogQHJldHVybiB7Ym9vbGVhbn0KICAgICAqLwogICAgY29udGFpbnMoZGF0ZVRpbWUpIHsKICAgICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiBmYWxzZTsKICAgICAgcmV0dXJuIHRoaXMucyA8PSBkYXRlVGltZSAmJiB0aGlzLmUgPiBkYXRlVGltZTsKICAgIH0KCiAgICAvKioKICAgICAqICJTZXRzIiB0aGUgc3RhcnQgYW5kL29yIGVuZCBkYXRlcy4gUmV0dXJucyBhIG5ld2x5LWNvbnN0cnVjdGVkIEludGVydmFsLgogICAgICogQHBhcmFtIHtPYmplY3R9IHZhbHVlcyAtIHRoZSB2YWx1ZXMgdG8gc2V0CiAgICAgKiBAcGFyYW0ge0RhdGVUaW1lfSB2YWx1ZXMuc3RhcnQgLSB0aGUgc3RhcnRpbmcgRGF0ZVRpbWUKICAgICAqIEBwYXJhbSB7RGF0ZVRpbWV9IHZhbHVlcy5lbmQgLSB0aGUgZW5kaW5nIERhdGVUaW1lCiAgICAgKiBAcmV0dXJuIHtJbnRlcnZhbH0KICAgICAqLwogICAgc2V0KHsgc3RhcnQsIGVuZCB9ID0ge30pIHsKICAgICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiB0aGlzOwogICAgICByZXR1cm4gSW50ZXJ2YWwuZnJvbURhdGVUaW1lcyhzdGFydCB8fCB0aGlzLnMsIGVuZCB8fCB0aGlzLmUpOwogICAgfQoKICAgIC8qKgogICAgICogU3BsaXQgdGhpcyBJbnRlcnZhbCBhdCBlYWNoIG9mIHRoZSBzcGVjaWZpZWQgRGF0ZVRpbWVzCiAgICAgKiBAcGFyYW0gey4uLkRhdGVUaW1lfSBkYXRlVGltZXMgLSB0aGUgdW5pdCBvZiB0aW1lIHRvIGNvdW50LgogICAgICogQHJldHVybiB7QXJyYXl9CiAgICAgKi8KICAgIHNwbGl0QXQoLi4uZGF0ZVRpbWVzKSB7CiAgICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gW107CiAgICAgIGNvbnN0IHNvcnRlZCA9IGRhdGVUaW1lcwogICAgICAgICAgLm1hcChmcmllbmRseURhdGVUaW1lKQogICAgICAgICAgLmZpbHRlcigoZCkgPT4gdGhpcy5jb250YWlucyhkKSkKICAgICAgICAgIC5zb3J0KCksCiAgICAgICAgcmVzdWx0cyA9IFtdOwogICAgICBsZXQgeyBzIH0gPSB0aGlzLAogICAgICAgIGkgPSAwOwoKICAgICAgd2hpbGUgKHMgPCB0aGlzLmUpIHsKICAgICAgICBjb25zdCBhZGRlZCA9IHNvcnRlZFtpXSB8fCB0aGlzLmUsCiAgICAgICAgICBuZXh0ID0gK2FkZGVkID4gK3RoaXMuZSA/IHRoaXMuZSA6IGFkZGVkOwogICAgICAgIHJlc3VsdHMucHVzaChJbnRlcnZhbC5mcm9tRGF0ZVRpbWVzKHMsIG5leHQpKTsKICAgICAgICBzID0gbmV4dDsKICAgICAgICBpICs9IDE7CiAgICAgIH0KCiAgICAgIHJldHVybiByZXN1bHRzOwogICAgfQoKICAgIC8qKgogICAgICogU3BsaXQgdGhpcyBJbnRlcnZhbCBpbnRvIHNtYWxsZXIgSW50ZXJ2YWxzLCBlYWNoIG9mIHRoZSBzcGVjaWZpZWQgbGVuZ3RoLgogICAgICogTGVmdCBvdmVyIHRpbWUgaXMgZ3JvdXBlZCBpbnRvIGEgc21hbGxlciBpbnRlcnZhbAogICAgICogQHBhcmFtIHtEdXJhdGlvbnxPYmplY3R8bnVtYmVyfSBkdXJhdGlvbiAtIFRoZSBsZW5ndGggb2YgZWFjaCByZXN1bHRpbmcgaW50ZXJ2YWwuCiAgICAgKiBAcmV0dXJuIHtBcnJheX0KICAgICAqLwogICAgc3BsaXRCeShkdXJhdGlvbikgewogICAgICBjb25zdCBkdXIgPSBEdXJhdGlvbi5mcm9tRHVyYXRpb25MaWtlKGR1cmF0aW9uKTsKCiAgICAgIGlmICghdGhpcy5pc1ZhbGlkIHx8ICFkdXIuaXNWYWxpZCB8fCBkdXIuYXMoIm1pbGxpc2Vjb25kcyIpID09PSAwKSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9CgogICAgICBsZXQgeyBzIH0gPSB0aGlzLAogICAgICAgIGlkeCA9IDEsCiAgICAgICAgbmV4dDsKCiAgICAgIGNvbnN0IHJlc3VsdHMgPSBbXTsKICAgICAgd2hpbGUgKHMgPCB0aGlzLmUpIHsKICAgICAgICBjb25zdCBhZGRlZCA9IHRoaXMuc3RhcnQucGx1cyhkdXIubWFwVW5pdHMoKHgpID0+IHggKiBpZHgpKTsKICAgICAgICBuZXh0ID0gK2FkZGVkID4gK3RoaXMuZSA/IHRoaXMuZSA6IGFkZGVkOwogICAgICAgIHJlc3VsdHMucHVzaChJbnRlcnZhbC5mcm9tRGF0ZVRpbWVzKHMsIG5leHQpKTsKICAgICAgICBzID0gbmV4dDsKICAgICAgICBpZHggKz0gMTsKICAgICAgfQoKICAgICAgcmV0dXJuIHJlc3VsdHM7CiAgICB9CgogICAgLyoqCiAgICAgKiBTcGxpdCB0aGlzIEludGVydmFsIGludG8gdGhlIHNwZWNpZmllZCBudW1iZXIgb2Ygc21hbGxlciBpbnRlcnZhbHMuCiAgICAgKiBAcGFyYW0ge251bWJlcn0gbnVtYmVyT2ZQYXJ0cyAtIFRoZSBudW1iZXIgb2YgSW50ZXJ2YWxzIHRvIGRpdmlkZSB0aGUgSW50ZXJ2YWwgaW50by4KICAgICAqIEByZXR1cm4ge0FycmF5fQogICAgICovCiAgICBkaXZpZGVFcXVhbGx5KG51bWJlck9mUGFydHMpIHsKICAgICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiBbXTsKICAgICAgcmV0dXJuIHRoaXMuc3BsaXRCeSh0aGlzLmxlbmd0aCgpIC8gbnVtYmVyT2ZQYXJ0cykuc2xpY2UoMCwgbnVtYmVyT2ZQYXJ0cyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gd2hldGhlciB0aGlzIEludGVydmFsIG92ZXJsYXBzIHdpdGggdGhlIHNwZWNpZmllZCBJbnRlcnZhbAogICAgICogQHBhcmFtIHtJbnRlcnZhbH0gb3RoZXIKICAgICAqIEByZXR1cm4ge2Jvb2xlYW59CiAgICAgKi8KICAgIG92ZXJsYXBzKG90aGVyKSB7CiAgICAgIHJldHVybiB0aGlzLmUgPiBvdGhlci5zICYmIHRoaXMucyA8IG90aGVyLmU7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gd2hldGhlciB0aGlzIEludGVydmFsJ3MgZW5kIGlzIGFkamFjZW50IHRvIHRoZSBzcGVjaWZpZWQgSW50ZXJ2YWwncyBzdGFydC4KICAgICAqIEBwYXJhbSB7SW50ZXJ2YWx9IG90aGVyCiAgICAgKiBAcmV0dXJuIHtib29sZWFufQogICAgICovCiAgICBhYnV0c1N0YXJ0KG90aGVyKSB7CiAgICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gZmFsc2U7CiAgICAgIHJldHVybiArdGhpcy5lID09PSArb3RoZXIuczsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB3aGV0aGVyIHRoaXMgSW50ZXJ2YWwncyBzdGFydCBpcyBhZGphY2VudCB0byB0aGUgc3BlY2lmaWVkIEludGVydmFsJ3MgZW5kLgogICAgICogQHBhcmFtIHtJbnRlcnZhbH0gb3RoZXIKICAgICAqIEByZXR1cm4ge2Jvb2xlYW59CiAgICAgKi8KICAgIGFidXRzRW5kKG90aGVyKSB7CiAgICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gZmFsc2U7CiAgICAgIHJldHVybiArb3RoZXIuZSA9PT0gK3RoaXMuczsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB3aGV0aGVyIHRoaXMgSW50ZXJ2YWwgZW5ndWxmcyB0aGUgc3RhcnQgYW5kIGVuZCBvZiB0aGUgc3BlY2lmaWVkIEludGVydmFsLgogICAgICogQHBhcmFtIHtJbnRlcnZhbH0gb3RoZXIKICAgICAqIEByZXR1cm4ge2Jvb2xlYW59CiAgICAgKi8KICAgIGVuZ3VsZnMob3RoZXIpIHsKICAgICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiBmYWxzZTsKICAgICAgcmV0dXJuIHRoaXMucyA8PSBvdGhlci5zICYmIHRoaXMuZSA+PSBvdGhlci5lOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHdoZXRoZXIgdGhpcyBJbnRlcnZhbCBoYXMgdGhlIHNhbWUgc3RhcnQgYW5kIGVuZCBhcyB0aGUgc3BlY2lmaWVkIEludGVydmFsLgogICAgICogQHBhcmFtIHtJbnRlcnZhbH0gb3RoZXIKICAgICAqIEByZXR1cm4ge2Jvb2xlYW59CiAgICAgKi8KICAgIGVxdWFscyhvdGhlcikgewogICAgICBpZiAoIXRoaXMuaXNWYWxpZCB8fCAhb3RoZXIuaXNWYWxpZCkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXMucy5lcXVhbHMob3RoZXIucykgJiYgdGhpcy5lLmVxdWFscyhvdGhlci5lKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiBhbiBJbnRlcnZhbCByZXByZXNlbnRpbmcgdGhlIGludGVyc2VjdGlvbiBvZiB0aGlzIEludGVydmFsIGFuZCB0aGUgc3BlY2lmaWVkIEludGVydmFsLgogICAgICogU3BlY2lmaWNhbGx5LCB0aGUgcmVzdWx0aW5nIEludGVydmFsIGhhcyB0aGUgbWF4aW11bSBzdGFydCB0aW1lIGFuZCB0aGUgbWluaW11bSBlbmQgdGltZSBvZiB0aGUgdHdvIEludGVydmFscy4KICAgICAqIFJldHVybnMgbnVsbCBpZiB0aGUgaW50ZXJzZWN0aW9uIGlzIGVtcHR5LCBtZWFuaW5nLCB0aGUgaW50ZXJ2YWxzIGRvbid0IGludGVyc2VjdC4KICAgICAqIEBwYXJhbSB7SW50ZXJ2YWx9IG90aGVyCiAgICAgKiBAcmV0dXJuIHtJbnRlcnZhbH0KICAgICAqLwogICAgaW50ZXJzZWN0aW9uKG90aGVyKSB7CiAgICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gdGhpczsKICAgICAgY29uc3QgcyA9IHRoaXMucyA+IG90aGVyLnMgPyB0aGlzLnMgOiBvdGhlci5zLAogICAgICAgIGUgPSB0aGlzLmUgPCBvdGhlci5lID8gdGhpcy5lIDogb3RoZXIuZTsKCiAgICAgIGlmIChzID49IGUpIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gSW50ZXJ2YWwuZnJvbURhdGVUaW1lcyhzLCBlKTsKICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIGFuIEludGVydmFsIHJlcHJlc2VudGluZyB0aGUgdW5pb24gb2YgdGhpcyBJbnRlcnZhbCBhbmQgdGhlIHNwZWNpZmllZCBJbnRlcnZhbC4KICAgICAqIFNwZWNpZmljYWxseSwgdGhlIHJlc3VsdGluZyBJbnRlcnZhbCBoYXMgdGhlIG1pbmltdW0gc3RhcnQgdGltZSBhbmQgdGhlIG1heGltdW0gZW5kIHRpbWUgb2YgdGhlIHR3byBJbnRlcnZhbHMuCiAgICAgKiBAcGFyYW0ge0ludGVydmFsfSBvdGhlcgogICAgICogQHJldHVybiB7SW50ZXJ2YWx9CiAgICAgKi8KICAgIHVuaW9uKG90aGVyKSB7CiAgICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gdGhpczsKICAgICAgY29uc3QgcyA9IHRoaXMucyA8IG90aGVyLnMgPyB0aGlzLnMgOiBvdGhlci5zLAogICAgICAgIGUgPSB0aGlzLmUgPiBvdGhlci5lID8gdGhpcy5lIDogb3RoZXIuZTsKICAgICAgcmV0dXJuIEludGVydmFsLmZyb21EYXRlVGltZXMocywgZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBNZXJnZSBhbiBhcnJheSBvZiBJbnRlcnZhbHMgaW50byBhIGVxdWl2YWxlbnQgbWluaW1hbCBzZXQgb2YgSW50ZXJ2YWxzLgogICAgICogQ29tYmluZXMgb3ZlcmxhcHBpbmcgYW5kIGFkamFjZW50IEludGVydmFscy4KICAgICAqIEBwYXJhbSB7QXJyYXl9IGludGVydmFscwogICAgICogQHJldHVybiB7QXJyYXl9CiAgICAgKi8KICAgIHN0YXRpYyBtZXJnZShpbnRlcnZhbHMpIHsKICAgICAgY29uc3QgW2ZvdW5kLCBmaW5hbF0gPSBpbnRlcnZhbHMKICAgICAgICAuc29ydCgoYSwgYikgPT4gYS5zIC0gYi5zKQogICAgICAgIC5yZWR1Y2UoCiAgICAgICAgICAoW3NvZmFyLCBjdXJyZW50XSwgaXRlbSkgPT4gewogICAgICAgICAgICBpZiAoIWN1cnJlbnQpIHsKICAgICAgICAgICAgICByZXR1cm4gW3NvZmFyLCBpdGVtXTsKICAgICAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50Lm92ZXJsYXBzKGl0ZW0pIHx8IGN1cnJlbnQuYWJ1dHNTdGFydChpdGVtKSkgewogICAgICAgICAgICAgIHJldHVybiBbc29mYXIsIGN1cnJlbnQudW5pb24oaXRlbSldOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHJldHVybiBbc29mYXIuY29uY2F0KFtjdXJyZW50XSksIGl0ZW1dOwogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgW1tdLCBudWxsXQogICAgICAgICk7CiAgICAgIGlmIChmaW5hbCkgewogICAgICAgIGZvdW5kLnB1c2goZmluYWwpOwogICAgICB9CiAgICAgIHJldHVybiBmb3VuZDsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiBhbiBhcnJheSBvZiBJbnRlcnZhbHMgcmVwcmVzZW50aW5nIHRoZSBzcGFucyBvZiB0aW1lIHRoYXQgb25seSBhcHBlYXIgaW4gb25lIG9mIHRoZSBzcGVjaWZpZWQgSW50ZXJ2YWxzLgogICAgICogQHBhcmFtIHtBcnJheX0gaW50ZXJ2YWxzCiAgICAgKiBAcmV0dXJuIHtBcnJheX0KICAgICAqLwogICAgc3RhdGljIHhvcihpbnRlcnZhbHMpIHsKICAgICAgbGV0IHN0YXJ0ID0gbnVsbCwKICAgICAgICBjdXJyZW50Q291bnQgPSAwOwogICAgICBjb25zdCByZXN1bHRzID0gW10sCiAgICAgICAgZW5kcyA9IGludGVydmFscy5tYXAoKGkpID0+IFsKICAgICAgICAgIHsgdGltZTogaS5zLCB0eXBlOiAicyIgfSwKICAgICAgICAgIHsgdGltZTogaS5lLCB0eXBlOiAiZSIgfSwKICAgICAgICBdKSwKICAgICAgICBmbGF0dGVuZWQgPSBBcnJheS5wcm90b3R5cGUuY29uY2F0KC4uLmVuZHMpLAogICAgICAgIGFyciA9IGZsYXR0ZW5lZC5zb3J0KChhLCBiKSA9PiBhLnRpbWUgLSBiLnRpbWUpOwoKICAgICAgZm9yIChjb25zdCBpIG9mIGFycikgewogICAgICAgIGN1cnJlbnRDb3VudCArPSBpLnR5cGUgPT09ICJzIiA/IDEgOiAtMTsKCiAgICAgICAgaWYgKGN1cnJlbnRDb3VudCA9PT0gMSkgewogICAgICAgICAgc3RhcnQgPSBpLnRpbWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmIChzdGFydCAmJiArc3RhcnQgIT09ICtpLnRpbWUpIHsKICAgICAgICAgICAgcmVzdWx0cy5wdXNoKEludGVydmFsLmZyb21EYXRlVGltZXMoc3RhcnQsIGkudGltZSkpOwogICAgICAgICAgfQoKICAgICAgICAgIHN0YXJ0ID0gbnVsbDsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBJbnRlcnZhbC5tZXJnZShyZXN1bHRzKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiBhbiBJbnRlcnZhbCByZXByZXNlbnRpbmcgdGhlIHNwYW4gb2YgdGltZSBpbiB0aGlzIEludGVydmFsIHRoYXQgZG9lc24ndCBvdmVybGFwIHdpdGggYW55IG9mIHRoZSBzcGVjaWZpZWQgSW50ZXJ2YWxzLgogICAgICogQHBhcmFtIHsuLi5JbnRlcnZhbH0gaW50ZXJ2YWxzCiAgICAgKiBAcmV0dXJuIHtBcnJheX0KICAgICAqLwogICAgZGlmZmVyZW5jZSguLi5pbnRlcnZhbHMpIHsKICAgICAgcmV0dXJuIEludGVydmFsLnhvcihbdGhpc10uY29uY2F0KGludGVydmFscykpCiAgICAgICAgLm1hcCgoaSkgPT4gdGhpcy5pbnRlcnNlY3Rpb24oaSkpCiAgICAgICAgLmZpbHRlcigoaSkgPT4gaSAmJiAhaS5pc0VtcHR5KCkpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIEludGVydmFsIGFwcHJvcHJpYXRlIGZvciBkZWJ1Z2dpbmcuCiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9CiAgICAgKi8KICAgIHRvU3RyaW5nKCkgewogICAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIElOVkFMSUQkMjsKICAgICAgcmV0dXJuIGBbJHt0aGlzLnMudG9JU08oKX0g4oCTICR7dGhpcy5lLnRvSVNPKCl9KWA7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIGFuIElTTyA4NjAxLWNvbXBsaWFudCBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBJbnRlcnZhbC4KICAgICAqIEBzZWUgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSVNPXzg2MDEjVGltZV9pbnRlcnZhbHMKICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gVGhlIHNhbWUgb3B0aW9ucyBhcyB7QGxpbmsgRGF0ZVRpbWUjdG9JU099CiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9CiAgICAgKi8KICAgIHRvSVNPKG9wdHMpIHsKICAgICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiBJTlZBTElEJDI7CiAgICAgIHJldHVybiBgJHt0aGlzLnMudG9JU08ob3B0cyl9LyR7dGhpcy5lLnRvSVNPKG9wdHMpfWA7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIGFuIElTTyA4NjAxLWNvbXBsaWFudCBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgZGF0ZSBvZiB0aGlzIEludGVydmFsLgogICAgICogVGhlIHRpbWUgY29tcG9uZW50cyBhcmUgaWdub3JlZC4KICAgICAqIEBzZWUgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSVNPXzg2MDEjVGltZV9pbnRlcnZhbHMKICAgICAqIEByZXR1cm4ge3N0cmluZ30KICAgICAqLwogICAgdG9JU09EYXRlKCkgewogICAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIElOVkFMSUQkMjsKICAgICAgcmV0dXJuIGAke3RoaXMucy50b0lTT0RhdGUoKX0vJHt0aGlzLmUudG9JU09EYXRlKCl9YDsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgYW4gSVNPIDg2MDEtY29tcGxpYW50IHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aW1lIG9mIHRoaXMgSW50ZXJ2YWwuCiAgICAgKiBUaGUgZGF0ZSBjb21wb25lbnRzIGFyZSBpZ25vcmVkLgogICAgICogQHNlZSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9JU09fODYwMSNUaW1lX2ludGVydmFscwogICAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBUaGUgc2FtZSBvcHRpb25zIGFzIHtAbGluayBEYXRlVGltZSN0b0lTT30KICAgICAqIEByZXR1cm4ge3N0cmluZ30KICAgICAqLwogICAgdG9JU09UaW1lKG9wdHMpIHsKICAgICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiBJTlZBTElEJDI7CiAgICAgIHJldHVybiBgJHt0aGlzLnMudG9JU09UaW1lKG9wdHMpfS8ke3RoaXMuZS50b0lTT1RpbWUob3B0cyl9YDsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBJbnRlcnZhbCBmb3JtYXR0ZWQgYWNjb3JkaW5nIHRvIHRoZSBzcGVjaWZpZWQgZm9ybWF0IHN0cmluZy4KICAgICAqIEBwYXJhbSB7c3RyaW5nfSBkYXRlRm9ybWF0IC0gdGhlIGZvcm1hdCBzdHJpbmcuIFRoaXMgc3RyaW5nIGZvcm1hdHMgdGhlIHN0YXJ0IGFuZCBlbmQgdGltZS4gU2VlIHtAbGluayBEYXRlVGltZSN0b0Zvcm1hdH0gZm9yIGRldGFpbHMuCiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnMKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5zZXBhcmF0b3IgPSAgJyDigJMgJ10gLSBhIHNlcGFyYXRvciB0byBwbGFjZSBiZXR3ZWVuIHRoZSBzdGFydCBhbmQgZW5kIHJlcHJlc2VudGF0aW9ucwogICAgICogQHJldHVybiB7c3RyaW5nfQogICAgICovCiAgICB0b0Zvcm1hdChkYXRlRm9ybWF0LCB7IHNlcGFyYXRvciA9ICIg4oCTICIgfSA9IHt9KSB7CiAgICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gSU5WQUxJRCQyOwogICAgICByZXR1cm4gYCR7dGhpcy5zLnRvRm9ybWF0KGRhdGVGb3JtYXQpfSR7c2VwYXJhdG9yfSR7dGhpcy5lLnRvRm9ybWF0KGRhdGVGb3JtYXQpfWA7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gYSBEdXJhdGlvbiByZXByZXNlbnRpbmcgdGhlIHRpbWUgc3Bhbm5lZCBieSB0aGlzIGludGVydmFsLgogICAgICogQHBhcmFtIHtzdHJpbmd8c3RyaW5nW119IFt1bml0PVsnbWlsbGlzZWNvbmRzJ11dIC0gdGhlIHVuaXQgb3IgdW5pdHMgKHN1Y2ggYXMgJ2hvdXJzJyBvciAnZGF5cycpIHRvIGluY2x1ZGUgaW4gdGhlIGR1cmF0aW9uLgogICAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zIHRoYXQgYWZmZWN0IHRoZSBjcmVhdGlvbiBvZiB0aGUgRHVyYXRpb24KICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5jb252ZXJzaW9uQWNjdXJhY3k9J2Nhc3VhbCddIC0gdGhlIGNvbnZlcnNpb24gc3lzdGVtIHRvIHVzZQogICAgICogQGV4YW1wbGUgSW50ZXJ2YWwuZnJvbURhdGVUaW1lcyhkdDEsIGR0MikudG9EdXJhdGlvbigpLnRvT2JqZWN0KCkgLy89PiB7IG1pbGxpc2Vjb25kczogODg0ODkyNTcgfQogICAgICogQGV4YW1wbGUgSW50ZXJ2YWwuZnJvbURhdGVUaW1lcyhkdDEsIGR0MikudG9EdXJhdGlvbignZGF5cycpLnRvT2JqZWN0KCkgLy89PiB7IGRheXM6IDEuMDI0MTgxMjE1Mjc3Nzc3OCB9CiAgICAgKiBAZXhhbXBsZSBJbnRlcnZhbC5mcm9tRGF0ZVRpbWVzKGR0MSwgZHQyKS50b0R1cmF0aW9uKFsnaG91cnMnLCAnbWludXRlcyddKS50b09iamVjdCgpIC8vPT4geyBob3VyczogMjQsIG1pbnV0ZXM6IDM0LjgyMDk1IH0KICAgICAqIEBleGFtcGxlIEludGVydmFsLmZyb21EYXRlVGltZXMoZHQxLCBkdDIpLnRvRHVyYXRpb24oWydob3VycycsICdtaW51dGVzJywgJ3NlY29uZHMnXSkudG9PYmplY3QoKSAvLz0+IHsgaG91cnM6IDI0LCBtaW51dGVzOiAzNCwgc2Vjb25kczogNDkuMjU3IH0KICAgICAqIEBleGFtcGxlIEludGVydmFsLmZyb21EYXRlVGltZXMoZHQxLCBkdDIpLnRvRHVyYXRpb24oJ3NlY29uZHMnKS50b09iamVjdCgpIC8vPT4geyBzZWNvbmRzOiA4ODQ4OS4yNTcgfQogICAgICogQHJldHVybiB7RHVyYXRpb259CiAgICAgKi8KICAgIHRvRHVyYXRpb24odW5pdCwgb3B0cykgewogICAgICBpZiAoIXRoaXMuaXNWYWxpZCkgewogICAgICAgIHJldHVybiBEdXJhdGlvbi5pbnZhbGlkKHRoaXMuaW52YWxpZFJlYXNvbik7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMuZS5kaWZmKHRoaXMucywgdW5pdCwgb3B0cyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSdW4gbWFwRm4gb24gdGhlIGludGVydmFsIHN0YXJ0IGFuZCBlbmQsIHJldHVybmluZyBhIG5ldyBJbnRlcnZhbCBmcm9tIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWVzCiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBtYXBGbgogICAgICogQHJldHVybiB7SW50ZXJ2YWx9CiAgICAgKiBAZXhhbXBsZSBJbnRlcnZhbC5mcm9tRGF0ZVRpbWVzKGR0MSwgZHQyKS5tYXBFbmRwb2ludHMoZW5kcG9pbnQgPT4gZW5kcG9pbnQudG9VVEMoKSkKICAgICAqIEBleGFtcGxlIEludGVydmFsLmZyb21EYXRlVGltZXMoZHQxLCBkdDIpLm1hcEVuZHBvaW50cyhlbmRwb2ludCA9PiBlbmRwb2ludC5wbHVzKHsgaG91cnM6IDIgfSkpCiAgICAgKi8KICAgIG1hcEVuZHBvaW50cyhtYXBGbikgewogICAgICByZXR1cm4gSW50ZXJ2YWwuZnJvbURhdGVUaW1lcyhtYXBGbih0aGlzLnMpLCBtYXBGbih0aGlzLmUpKTsKICAgIH0KICB9CgogIC8qKgogICAqIFRoZSBJbmZvIGNsYXNzIGNvbnRhaW5zIHN0YXRpYyBtZXRob2RzIGZvciByZXRyaWV2aW5nIGdlbmVyYWwgdGltZSBhbmQgZGF0ZSByZWxhdGVkIGRhdGEuIEZvciBleGFtcGxlLCBpdCBoYXMgbWV0aG9kcyBmb3IgZmluZGluZyBvdXQgaWYgYSB0aW1lIHpvbmUgaGFzIGEgRFNULCBmb3IgbGlzdGluZyB0aGUgbW9udGhzIGluIGFueSBzdXBwb3J0ZWQgbG9jYWxlLCBhbmQgZm9yIGRpc2NvdmVyaW5nIHdoaWNoIG9mIEx1eG9uIGZlYXR1cmVzIGFyZSBhdmFpbGFibGUgaW4gdGhlIGN1cnJlbnQgZW52aXJvbm1lbnQuCiAgICovCiAgY2xhc3MgSW5mbyB7CiAgICAvKioKICAgICAqIFJldHVybiB3aGV0aGVyIHRoZSBzcGVjaWZpZWQgem9uZSBjb250YWlucyBhIERTVC4KICAgICAqIEBwYXJhbSB7c3RyaW5nfFpvbmV9IFt6b25lPSdsb2NhbCddIC0gWm9uZSB0byBjaGVjay4gRGVmYXVsdHMgdG8gdGhlIGVudmlyb25tZW50J3MgbG9jYWwgem9uZS4KICAgICAqIEByZXR1cm4ge2Jvb2xlYW59CiAgICAgKi8KICAgIHN0YXRpYyBoYXNEU1Qoem9uZSA9IFNldHRpbmdzLmRlZmF1bHRab25lKSB7CiAgICAgIGNvbnN0IHByb3RvID0gRGF0ZVRpbWUubm93KCkuc2V0Wm9uZSh6b25lKS5zZXQoeyBtb250aDogMTIgfSk7CgogICAgICByZXR1cm4gIXpvbmUuaXNVbml2ZXJzYWwgJiYgcHJvdG8ub2Zmc2V0ICE9PSBwcm90by5zZXQoeyBtb250aDogNiB9KS5vZmZzZXQ7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gd2hldGhlciB0aGUgc3BlY2lmaWVkIHpvbmUgaXMgYSB2YWxpZCBJQU5BIHNwZWNpZmllci4KICAgICAqIEBwYXJhbSB7c3RyaW5nfSB6b25lIC0gWm9uZSB0byBjaGVjawogICAgICogQHJldHVybiB7Ym9vbGVhbn0KICAgICAqLwogICAgc3RhdGljIGlzVmFsaWRJQU5BWm9uZSh6b25lKSB7CiAgICAgIHJldHVybiBJQU5BWm9uZS5pc1ZhbGlkWm9uZSh6b25lKTsKICAgIH0KCiAgICAvKioKICAgICAqIENvbnZlcnRzIHRoZSBpbnB1dCBpbnRvIGEge0BsaW5rIFpvbmV9IGluc3RhbmNlLgogICAgICoKICAgICAqICogSWYgYGlucHV0YCBpcyBhbHJlYWR5IGEgWm9uZSBpbnN0YW5jZSwgaXQgaXMgcmV0dXJuZWQgdW5jaGFuZ2VkLgogICAgICogKiBJZiBgaW5wdXRgIGlzIGEgc3RyaW5nIGNvbnRhaW5pbmcgYSB2YWxpZCB0aW1lIHpvbmUgbmFtZSwgYSBab25lIGluc3RhbmNlCiAgICAgKiAgIHdpdGggdGhhdCBuYW1lIGlzIHJldHVybmVkLgogICAgICogKiBJZiBgaW5wdXRgIGlzIGEgc3RyaW5nIHRoYXQgZG9lc24ndCByZWZlciB0byBhIGtub3duIHRpbWUgem9uZSwgYSBab25lCiAgICAgKiAgIGluc3RhbmNlIHdpdGgge0BsaW5rIFpvbmUjaXNWYWxpZH0gPT0gZmFsc2UgaXMgcmV0dXJuZWQuCiAgICAgKiAqIElmIGBpbnB1dCBpcyBhIG51bWJlciwgYSBab25lIGluc3RhbmNlIHdpdGggdGhlIHNwZWNpZmllZCBmaXhlZCBvZmZzZXQKICAgICAqICAgaW4gbWludXRlcyBpcyByZXR1cm5lZC4KICAgICAqICogSWYgYGlucHV0YCBpcyBgbnVsbGAgb3IgYHVuZGVmaW5lZGAsIHRoZSBkZWZhdWx0IHpvbmUgaXMgcmV0dXJuZWQuCiAgICAgKiBAcGFyYW0ge3N0cmluZ3xab25lfG51bWJlcn0gW2lucHV0XSAtIHRoZSB2YWx1ZSB0byBiZSBjb252ZXJ0ZWQKICAgICAqIEByZXR1cm4ge1pvbmV9CiAgICAgKi8KICAgIHN0YXRpYyBub3JtYWxpemVab25lKGlucHV0KSB7CiAgICAgIHJldHVybiBub3JtYWxpemVab25lKGlucHV0LCBTZXR0aW5ncy5kZWZhdWx0Wm9uZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gYW4gYXJyYXkgb2Ygc3RhbmRhbG9uZSBtb250aCBuYW1lcy4KICAgICAqIEBzZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvRGF0ZVRpbWVGb3JtYXQKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbbGVuZ3RoPSdsb25nJ10gLSB0aGUgbGVuZ3RoIG9mIHRoZSBtb250aCByZXByZXNlbnRhdGlvbiwgc3VjaCBhcyAibnVtZXJpYyIsICIyLWRpZ2l0IiwgIm5hcnJvdyIsICJzaG9ydCIsICJsb25nIgogICAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jYWxlXSAtIHRoZSBsb2NhbGUgY29kZQogICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLm51bWJlcmluZ1N5c3RlbT1udWxsXSAtIHRoZSBudW1iZXJpbmcgc3lzdGVtCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jT2JqPW51bGxdIC0gYW4gZXhpc3RpbmcgbG9jYWxlIG9iamVjdCB0byB1c2UKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5vdXRwdXRDYWxlbmRhcj0nZ3JlZ29yeSddIC0gdGhlIGNhbGVuZGFyCiAgICAgKiBAZXhhbXBsZSBJbmZvLm1vbnRocygpWzBdIC8vPT4gJ0phbnVhcnknCiAgICAgKiBAZXhhbXBsZSBJbmZvLm1vbnRocygnc2hvcnQnKVswXSAvLz0+ICdKYW4nCiAgICAgKiBAZXhhbXBsZSBJbmZvLm1vbnRocygnbnVtZXJpYycpWzBdIC8vPT4gJzEnCiAgICAgKiBAZXhhbXBsZSBJbmZvLm1vbnRocygnc2hvcnQnLCB7IGxvY2FsZTogJ2ZyLUNBJyB9IClbMF0gLy89PiAnamFudi4nCiAgICAgKiBAZXhhbXBsZSBJbmZvLm1vbnRocygnbnVtZXJpYycsIHsgbG9jYWxlOiAnYXInIH0pWzBdIC8vPT4gJ9mhJwogICAgICogQGV4YW1wbGUgSW5mby5tb250aHMoJ2xvbmcnLCB7IG91dHB1dENhbGVuZGFyOiAnaXNsYW1pYycgfSlbMF0gLy89PiAnUmFiacq7IEknCiAgICAgKiBAcmV0dXJuIHtBcnJheX0KICAgICAqLwogICAgc3RhdGljIG1vbnRocygKICAgICAgbGVuZ3RoID0gImxvbmciLAogICAgICB7IGxvY2FsZSA9IG51bGwsIG51bWJlcmluZ1N5c3RlbSA9IG51bGwsIGxvY09iaiA9IG51bGwsIG91dHB1dENhbGVuZGFyID0gImdyZWdvcnkiIH0gPSB7fQogICAgKSB7CiAgICAgIHJldHVybiAobG9jT2JqIHx8IExvY2FsZS5jcmVhdGUobG9jYWxlLCBudW1iZXJpbmdTeXN0ZW0sIG91dHB1dENhbGVuZGFyKSkubW9udGhzKGxlbmd0aCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gYW4gYXJyYXkgb2YgZm9ybWF0IG1vbnRoIG5hbWVzLgogICAgICogRm9ybWF0IG1vbnRocyBkaWZmZXIgZnJvbSBzdGFuZGFsb25lIG1vbnRocyBpbiB0aGF0IHRoZXkncmUgbWVhbnQgdG8gYXBwZWFyIG5leHQgdG8gdGhlIGRheSBvZiB0aGUgbW9udGguIEluIHNvbWUgbGFuZ3VhZ2VzLCB0aGF0CiAgICAgKiBjaGFuZ2VzIHRoZSBzdHJpbmcuCiAgICAgKiBTZWUge0BsaW5rIEluZm8jbW9udGhzfQogICAgICogQHBhcmFtIHtzdHJpbmd9IFtsZW5ndGg9J2xvbmcnXSAtIHRoZSBsZW5ndGggb2YgdGhlIG1vbnRoIHJlcHJlc2VudGF0aW9uLCBzdWNoIGFzICJudW1lcmljIiwgIjItZGlnaXQiLCAibmFycm93IiwgInNob3J0IiwgImxvbmciCiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnMKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NhbGVdIC0gdGhlIGxvY2FsZSBjb2RlCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubnVtYmVyaW5nU3lzdGVtPW51bGxdIC0gdGhlIG51bWJlcmluZyBzeXN0ZW0KICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NPYmo9bnVsbF0gLSBhbiBleGlzdGluZyBsb2NhbGUgb2JqZWN0IHRvIHVzZQogICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLm91dHB1dENhbGVuZGFyPSdncmVnb3J5J10gLSB0aGUgY2FsZW5kYXIKICAgICAqIEByZXR1cm4ge0FycmF5fQogICAgICovCiAgICBzdGF0aWMgbW9udGhzRm9ybWF0KAogICAgICBsZW5ndGggPSAibG9uZyIsCiAgICAgIHsgbG9jYWxlID0gbnVsbCwgbnVtYmVyaW5nU3lzdGVtID0gbnVsbCwgbG9jT2JqID0gbnVsbCwgb3V0cHV0Q2FsZW5kYXIgPSAiZ3JlZ29yeSIgfSA9IHt9CiAgICApIHsKICAgICAgcmV0dXJuIChsb2NPYmogfHwgTG9jYWxlLmNyZWF0ZShsb2NhbGUsIG51bWJlcmluZ1N5c3RlbSwgb3V0cHV0Q2FsZW5kYXIpKS5tb250aHMobGVuZ3RoLCB0cnVlKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiBhbiBhcnJheSBvZiBzdGFuZGFsb25lIHdlZWsgbmFtZXMuCiAgICAgKiBAc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0RhdGVUaW1lRm9ybWF0CiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW2xlbmd0aD0nbG9uZyddIC0gdGhlIGxlbmd0aCBvZiB0aGUgd2Vla2RheSByZXByZXNlbnRhdGlvbiwgc3VjaCBhcyAibmFycm93IiwgInNob3J0IiwgImxvbmciLgogICAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jYWxlXSAtIHRoZSBsb2NhbGUgY29kZQogICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLm51bWJlcmluZ1N5c3RlbT1udWxsXSAtIHRoZSBudW1iZXJpbmcgc3lzdGVtCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jT2JqPW51bGxdIC0gYW4gZXhpc3RpbmcgbG9jYWxlIG9iamVjdCB0byB1c2UKICAgICAqIEBleGFtcGxlIEluZm8ud2Vla2RheXMoKVswXSAvLz0+ICdNb25kYXknCiAgICAgKiBAZXhhbXBsZSBJbmZvLndlZWtkYXlzKCdzaG9ydCcpWzBdIC8vPT4gJ01vbicKICAgICAqIEBleGFtcGxlIEluZm8ud2Vla2RheXMoJ3Nob3J0JywgeyBsb2NhbGU6ICdmci1DQScgfSlbMF0gLy89PiAnbHVuLicKICAgICAqIEBleGFtcGxlIEluZm8ud2Vla2RheXMoJ3Nob3J0JywgeyBsb2NhbGU6ICdhcicgfSlbMF0gLy89PiAn2KfZhNin2KvZhtmK2YYnCiAgICAgKiBAcmV0dXJuIHtBcnJheX0KICAgICAqLwogICAgc3RhdGljIHdlZWtkYXlzKGxlbmd0aCA9ICJsb25nIiwgeyBsb2NhbGUgPSBudWxsLCBudW1iZXJpbmdTeXN0ZW0gPSBudWxsLCBsb2NPYmogPSBudWxsIH0gPSB7fSkgewogICAgICByZXR1cm4gKGxvY09iaiB8fCBMb2NhbGUuY3JlYXRlKGxvY2FsZSwgbnVtYmVyaW5nU3lzdGVtLCBudWxsKSkud2Vla2RheXMobGVuZ3RoKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiBhbiBhcnJheSBvZiBmb3JtYXQgd2VlayBuYW1lcy4KICAgICAqIEZvcm1hdCB3ZWVrZGF5cyBkaWZmZXIgZnJvbSBzdGFuZGFsb25lIHdlZWtkYXlzIGluIHRoYXQgdGhleSdyZSBtZWFudCB0byBhcHBlYXIgbmV4dCB0byBtb3JlIGRhdGUgaW5mb3JtYXRpb24uIEluIHNvbWUgbGFuZ3VhZ2VzLCB0aGF0CiAgICAgKiBjaGFuZ2VzIHRoZSBzdHJpbmcuCiAgICAgKiBTZWUge0BsaW5rIEluZm8jd2Vla2RheXN9CiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW2xlbmd0aD0nbG9uZyddIC0gdGhlIGxlbmd0aCBvZiB0aGUgbW9udGggcmVwcmVzZW50YXRpb24sIHN1Y2ggYXMgIm5hcnJvdyIsICJzaG9ydCIsICJsb25nIi4KICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9ucwogICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmxvY2FsZT1udWxsXSAtIHRoZSBsb2NhbGUgY29kZQogICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLm51bWJlcmluZ1N5c3RlbT1udWxsXSAtIHRoZSBudW1iZXJpbmcgc3lzdGVtCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jT2JqPW51bGxdIC0gYW4gZXhpc3RpbmcgbG9jYWxlIG9iamVjdCB0byB1c2UKICAgICAqIEByZXR1cm4ge0FycmF5fQogICAgICovCiAgICBzdGF0aWMgd2Vla2RheXNGb3JtYXQoCiAgICAgIGxlbmd0aCA9ICJsb25nIiwKICAgICAgeyBsb2NhbGUgPSBudWxsLCBudW1iZXJpbmdTeXN0ZW0gPSBudWxsLCBsb2NPYmogPSBudWxsIH0gPSB7fQogICAgKSB7CiAgICAgIHJldHVybiAobG9jT2JqIHx8IExvY2FsZS5jcmVhdGUobG9jYWxlLCBudW1iZXJpbmdTeXN0ZW0sIG51bGwpKS53ZWVrZGF5cyhsZW5ndGgsIHRydWUpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIGFuIGFycmF5IG9mIG1lcmlkaWVtcy4KICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9ucwogICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmxvY2FsZV0gLSB0aGUgbG9jYWxlIGNvZGUKICAgICAqIEBleGFtcGxlIEluZm8ubWVyaWRpZW1zKCkgLy89PiBbICdBTScsICdQTScgXQogICAgICogQGV4YW1wbGUgSW5mby5tZXJpZGllbXMoeyBsb2NhbGU6ICdteScgfSkgLy89PiBbICfhgJThgLbhgJThgIDhgLonLCAn4YCK4YCU4YCxJyBdCiAgICAgKiBAcmV0dXJuIHtBcnJheX0KICAgICAqLwogICAgc3RhdGljIG1lcmlkaWVtcyh7IGxvY2FsZSA9IG51bGwgfSA9IHt9KSB7CiAgICAgIHJldHVybiBMb2NhbGUuY3JlYXRlKGxvY2FsZSkubWVyaWRpZW1zKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gYW4gYXJyYXkgb2YgZXJhcywgc3VjaCBhcyBbJ0JDJywgJ0FEJ10uIFRoZSBsb2NhbGUgY2FuIGJlIHNwZWNpZmllZCwgYnV0IHRoZSBjYWxlbmRhciBzeXN0ZW0gaXMgYWx3YXlzIEdyZWdvcmlhbi4KICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbbGVuZ3RoPSdzaG9ydCddIC0gdGhlIGxlbmd0aCBvZiB0aGUgZXJhIHJlcHJlc2VudGF0aW9uLCBzdWNoIGFzICJzaG9ydCIgb3IgImxvbmciLgogICAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jYWxlXSAtIHRoZSBsb2NhbGUgY29kZQogICAgICogQGV4YW1wbGUgSW5mby5lcmFzKCkgLy89PiBbICdCQycsICdBRCcgXQogICAgICogQGV4YW1wbGUgSW5mby5lcmFzKCdsb25nJykgLy89PiBbICdCZWZvcmUgQ2hyaXN0JywgJ0Fubm8gRG9taW5pJyBdCiAgICAgKiBAZXhhbXBsZSBJbmZvLmVyYXMoJ2xvbmcnLCB7IGxvY2FsZTogJ2ZyJyB9KSAvLz0+IFsgJ2F2YW50IErDqXN1cy1DaHJpc3QnLCAnYXByw6hzIErDqXN1cy1DaHJpc3QnIF0KICAgICAqIEByZXR1cm4ge0FycmF5fQogICAgICovCiAgICBzdGF0aWMgZXJhcyhsZW5ndGggPSAic2hvcnQiLCB7IGxvY2FsZSA9IG51bGwgfSA9IHt9KSB7CiAgICAgIHJldHVybiBMb2NhbGUuY3JlYXRlKGxvY2FsZSwgbnVsbCwgImdyZWdvcnkiKS5lcmFzKGxlbmd0aCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIHNldCBvZiBhdmFpbGFibGUgZmVhdHVyZXMgaW4gdGhpcyBlbnZpcm9ubWVudC4KICAgICAqIFNvbWUgZmVhdHVyZXMgb2YgTHV4b24gYXJlIG5vdCBhdmFpbGFibGUgaW4gYWxsIGVudmlyb25tZW50cy4gRm9yIGV4YW1wbGUsIG9uIG9sZGVyIGJyb3dzZXJzLCByZWxhdGl2ZSB0aW1lIGZvcm1hdHRpbmcgc3VwcG9ydCBpcyBub3QgYXZhaWxhYmxlLiBVc2UgdGhpcyBmdW5jdGlvbiB0byBmaWd1cmUgb3V0IGlmIHRoYXQncyB0aGUgY2FzZS4KICAgICAqIEtleXM6CiAgICAgKiAqIGByZWxhdGl2ZWA6IHdoZXRoZXIgdGhpcyBlbnZpcm9ubWVudCBzdXBwb3J0cyByZWxhdGl2ZSB0aW1lIGZvcm1hdHRpbmcKICAgICAqIEBleGFtcGxlIEluZm8uZmVhdHVyZXMoKSAvLz0+IHsgcmVsYXRpdmU6IGZhbHNlIH0KICAgICAqIEByZXR1cm4ge09iamVjdH0KICAgICAqLwogICAgc3RhdGljIGZlYXR1cmVzKCkgewogICAgICByZXR1cm4geyByZWxhdGl2ZTogaGFzUmVsYXRpdmUoKSB9OwogICAgfQogIH0KCiAgZnVuY3Rpb24gZGF5RGlmZihlYXJsaWVyLCBsYXRlcikgewogICAgY29uc3QgdXRjRGF5U3RhcnQgPSAoZHQpID0+IGR0LnRvVVRDKDAsIHsga2VlcExvY2FsVGltZTogdHJ1ZSB9KS5zdGFydE9mKCJkYXkiKS52YWx1ZU9mKCksCiAgICAgIG1zID0gdXRjRGF5U3RhcnQobGF0ZXIpIC0gdXRjRGF5U3RhcnQoZWFybGllcik7CiAgICByZXR1cm4gTWF0aC5mbG9vcihEdXJhdGlvbi5mcm9tTWlsbGlzKG1zKS5hcygiZGF5cyIpKTsKICB9CgogIGZ1bmN0aW9uIGhpZ2hPcmRlckRpZmZzKGN1cnNvciwgbGF0ZXIsIHVuaXRzKSB7CiAgICBjb25zdCBkaWZmZXJzID0gWwogICAgICBbInllYXJzIiwgKGEsIGIpID0+IGIueWVhciAtIGEueWVhcl0sCiAgICAgIFsicXVhcnRlcnMiLCAoYSwgYikgPT4gYi5xdWFydGVyIC0gYS5xdWFydGVyICsgKGIueWVhciAtIGEueWVhcikgKiA0XSwKICAgICAgWyJtb250aHMiLCAoYSwgYikgPT4gYi5tb250aCAtIGEubW9udGggKyAoYi55ZWFyIC0gYS55ZWFyKSAqIDEyXSwKICAgICAgWwogICAgICAgICJ3ZWVrcyIsCiAgICAgICAgKGEsIGIpID0+IHsKICAgICAgICAgIGNvbnN0IGRheXMgPSBkYXlEaWZmKGEsIGIpOwogICAgICAgICAgcmV0dXJuIChkYXlzIC0gKGRheXMgJSA3KSkgLyA3OwogICAgICAgIH0sCiAgICAgIF0sCiAgICAgIFsiZGF5cyIsIGRheURpZmZdLAogICAgXTsKCiAgICBjb25zdCByZXN1bHRzID0ge307CiAgICBsZXQgbG93ZXN0T3JkZXIsIGhpZ2hXYXRlcjsKCiAgICBmb3IgKGNvbnN0IFt1bml0LCBkaWZmZXJdIG9mIGRpZmZlcnMpIHsKICAgICAgaWYgKHVuaXRzLmluZGV4T2YodW5pdCkgPj0gMCkgewogICAgICAgIGxvd2VzdE9yZGVyID0gdW5pdDsKCiAgICAgICAgbGV0IGRlbHRhID0gZGlmZmVyKGN1cnNvciwgbGF0ZXIpOwogICAgICAgIGhpZ2hXYXRlciA9IGN1cnNvci5wbHVzKHsgW3VuaXRdOiBkZWx0YSB9KTsKCiAgICAgICAgaWYgKGhpZ2hXYXRlciA+IGxhdGVyKSB7CiAgICAgICAgICBjdXJzb3IgPSBjdXJzb3IucGx1cyh7IFt1bml0XTogZGVsdGEgLSAxIH0pOwogICAgICAgICAgZGVsdGEgLT0gMTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY3Vyc29yID0gaGlnaFdhdGVyOwogICAgICAgIH0KCiAgICAgICAgcmVzdWx0c1t1bml0XSA9IGRlbHRhOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIFtjdXJzb3IsIHJlc3VsdHMsIGhpZ2hXYXRlciwgbG93ZXN0T3JkZXJdOwogIH0KCiAgZnVuY3Rpb24gZGlmZiAoZWFybGllciwgbGF0ZXIsIHVuaXRzLCBvcHRzKSB7CiAgICBsZXQgW2N1cnNvciwgcmVzdWx0cywgaGlnaFdhdGVyLCBsb3dlc3RPcmRlcl0gPSBoaWdoT3JkZXJEaWZmcyhlYXJsaWVyLCBsYXRlciwgdW5pdHMpOwoKICAgIGNvbnN0IHJlbWFpbmluZ01pbGxpcyA9IGxhdGVyIC0gY3Vyc29yOwoKICAgIGNvbnN0IGxvd2VyT3JkZXJVbml0cyA9IHVuaXRzLmZpbHRlcigKICAgICAgKHUpID0+IFsiaG91cnMiLCAibWludXRlcyIsICJzZWNvbmRzIiwgIm1pbGxpc2Vjb25kcyJdLmluZGV4T2YodSkgPj0gMAogICAgKTsKCiAgICBpZiAobG93ZXJPcmRlclVuaXRzLmxlbmd0aCA9PT0gMCkgewogICAgICBpZiAoaGlnaFdhdGVyIDwgbGF0ZXIpIHsKICAgICAgICBoaWdoV2F0ZXIgPSBjdXJzb3IucGx1cyh7IFtsb3dlc3RPcmRlcl06IDEgfSk7CiAgICAgIH0KCiAgICAgIGlmIChoaWdoV2F0ZXIgIT09IGN1cnNvcikgewogICAgICAgIHJlc3VsdHNbbG93ZXN0T3JkZXJdID0gKHJlc3VsdHNbbG93ZXN0T3JkZXJdIHx8IDApICsgcmVtYWluaW5nTWlsbGlzIC8gKGhpZ2hXYXRlciAtIGN1cnNvcik7CiAgICAgIH0KICAgIH0KCiAgICBjb25zdCBkdXJhdGlvbiA9IER1cmF0aW9uLmZyb21PYmplY3QocmVzdWx0cywgb3B0cyk7CgogICAgaWYgKGxvd2VyT3JkZXJVbml0cy5sZW5ndGggPiAwKSB7CiAgICAgIHJldHVybiBEdXJhdGlvbi5mcm9tTWlsbGlzKHJlbWFpbmluZ01pbGxpcywgb3B0cykKICAgICAgICAuc2hpZnRUbyguLi5sb3dlck9yZGVyVW5pdHMpCiAgICAgICAgLnBsdXMoZHVyYXRpb24pOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIGR1cmF0aW9uOwogICAgfQogIH0KCiAgY29uc3QgbnVtYmVyaW5nU3lzdGVtcyA9IHsKICAgIGFyYWI6ICJbXHUwNjYwLVx1MDY2OV0iLAogICAgYXJhYmV4dDogIltcdTA2RjAtXHUwNkY5XSIsCiAgICBiYWxpOiAiW1x1MUI1MC1cdTFCNTldIiwKICAgIGJlbmc6ICJbXHUwOUU2LVx1MDlFRl0iLAogICAgZGV2YTogIltcdTA5NjYtXHUwOTZGXSIsCiAgICBmdWxsd2lkZTogIltcdUZGMTAtXHVGRjE5XSIsCiAgICBndWpyOiAiW1x1MEFFNi1cdTBBRUZdIiwKICAgIGhhbmlkZWM6ICJb44CHfOS4gHzkuox85LiJfOWbm3zkupR85YWtfOS4g3zlhat85LmdXSIsCiAgICBraG1yOiAiW1x1MTdFMC1cdTE3RTldIiwKICAgIGtuZGE6ICJbXHUwQ0U2LVx1MENFRl0iLAogICAgbGFvbzogIltcdTBFRDAtXHUwRUQ5XSIsCiAgICBsaW1iOiAiW1x1MTk0Ni1cdTE5NEZdIiwKICAgIG1seW06ICJbXHUwRDY2LVx1MEQ2Rl0iLAogICAgbW9uZzogIltcdTE4MTAtXHUxODE5XSIsCiAgICBteW1yOiAiW1x1MTA0MC1cdTEwNDldIiwKICAgIG9yeWE6ICJbXHUwQjY2LVx1MEI2Rl0iLAogICAgdGFtbGRlYzogIltcdTBCRTYtXHUwQkVGXSIsCiAgICB0ZWx1OiAiW1x1MEM2Ni1cdTBDNkZdIiwKICAgIHRoYWk6ICJbXHUwRTUwLVx1MEU1OV0iLAogICAgdGlidDogIltcdTBGMjAtXHUwRjI5XSIsCiAgICBsYXRuOiAiXFxkIiwKICB9OwoKICBjb25zdCBudW1iZXJpbmdTeXN0ZW1zVVRGMTYgPSB7CiAgICBhcmFiOiBbMTYzMiwgMTY0MV0sCiAgICBhcmFiZXh0OiBbMTc3NiwgMTc4NV0sCiAgICBiYWxpOiBbNjk5MiwgNzAwMV0sCiAgICBiZW5nOiBbMjUzNCwgMjU0M10sCiAgICBkZXZhOiBbMjQwNiwgMjQxNV0sCiAgICBmdWxsd2lkZTogWzY1Mjk2LCA2NTMwM10sCiAgICBndWpyOiBbMjc5MCwgMjc5OV0sCiAgICBraG1yOiBbNjExMiwgNjEyMV0sCiAgICBrbmRhOiBbMzMwMiwgMzMxMV0sCiAgICBsYW9vOiBbMzc5MiwgMzgwMV0sCiAgICBsaW1iOiBbNjQ3MCwgNjQ3OV0sCiAgICBtbHltOiBbMzQzMCwgMzQzOV0sCiAgICBtb25nOiBbNjE2MCwgNjE2OV0sCiAgICBteW1yOiBbNDE2MCwgNDE2OV0sCiAgICBvcnlhOiBbMjkxOCwgMjkyN10sCiAgICB0YW1sZGVjOiBbMzA0NiwgMzA1NV0sCiAgICB0ZWx1OiBbMzE3NCwgMzE4M10sCiAgICB0aGFpOiBbMzY2NCwgMzY3M10sCiAgICB0aWJ0OiBbMzg3MiwgMzg4MV0sCiAgfTsKCiAgY29uc3QgaGFuaWRlY0NoYXJzID0gbnVtYmVyaW5nU3lzdGVtcy5oYW5pZGVjLnJlcGxhY2UoL1tcW3xcXV0vZywgIiIpLnNwbGl0KCIiKTsKCiAgZnVuY3Rpb24gcGFyc2VEaWdpdHMoc3RyKSB7CiAgICBsZXQgdmFsdWUgPSBwYXJzZUludChzdHIsIDEwKTsKICAgIGlmIChpc05hTih2YWx1ZSkpIHsKICAgICAgdmFsdWUgPSAiIjsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBjb2RlID0gc3RyLmNoYXJDb2RlQXQoaSk7CgogICAgICAgIGlmIChzdHJbaV0uc2VhcmNoKG51bWJlcmluZ1N5c3RlbXMuaGFuaWRlYykgIT09IC0xKSB7CiAgICAgICAgICB2YWx1ZSArPSBoYW5pZGVjQ2hhcnMuaW5kZXhPZihzdHJbaV0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBudW1iZXJpbmdTeXN0ZW1zVVRGMTYpIHsKICAgICAgICAgICAgY29uc3QgW21pbiwgbWF4XSA9IG51bWJlcmluZ1N5c3RlbXNVVEYxNltrZXldOwogICAgICAgICAgICBpZiAoY29kZSA+PSBtaW4gJiYgY29kZSA8PSBtYXgpIHsKICAgICAgICAgICAgICB2YWx1ZSArPSBjb2RlIC0gbWluOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBwYXJzZUludCh2YWx1ZSwgMTApOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHZhbHVlOwogICAgfQogIH0KCiAgZnVuY3Rpb24gZGlnaXRSZWdleCh7IG51bWJlcmluZ1N5c3RlbSB9LCBhcHBlbmQgPSAiIikgewogICAgcmV0dXJuIG5ldyBSZWdFeHAoYCR7bnVtYmVyaW5nU3lzdGVtc1tudW1iZXJpbmdTeXN0ZW0gfHwgImxhdG4iXX0ke2FwcGVuZH1gKTsKICB9CgogIGNvbnN0IE1JU1NJTkdfRlRQID0gIm1pc3NpbmcgSW50bC5EYXRlVGltZUZvcm1hdC5mb3JtYXRUb1BhcnRzIHN1cHBvcnQiOwoKICBmdW5jdGlvbiBpbnRVbml0KHJlZ2V4LCBwb3N0ID0gKGkpID0+IGkpIHsKICAgIHJldHVybiB7IHJlZ2V4LCBkZXNlcjogKFtzXSkgPT4gcG9zdChwYXJzZURpZ2l0cyhzKSkgfTsKICB9CgogIGNvbnN0IE5CU1AgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDE2MCk7CiAgY29uc3Qgc3BhY2VPck5CU1AgPSBgWyAke05CU1B9XWA7CiAgY29uc3Qgc3BhY2VPck5CU1BSZWdFeHAgPSBuZXcgUmVnRXhwKHNwYWNlT3JOQlNQLCAiZyIpOwoKICBmdW5jdGlvbiBmaXhMaXN0UmVnZXgocykgewogICAgLy8gbWFrZSBkb3RzIG9wdGlvbmFsIGFuZCBhbHNvIG1ha2UgdGhlbSBsaXRlcmFsCiAgICAvLyBtYWtlIHNwYWNlIGFuZCBub24gYnJlYWthYmxlIHNwYWNlIGNoYXJhY3RlcnMgaW50ZXJjaGFuZ2VhYmxlCiAgICByZXR1cm4gcy5yZXBsYWNlKC9cLi9nLCAiXFwuPyIpLnJlcGxhY2Uoc3BhY2VPck5CU1BSZWdFeHAsIHNwYWNlT3JOQlNQKTsKICB9CgogIGZ1bmN0aW9uIHN0cmlwSW5zZW5zaXRpdml0aWVzKHMpIHsKICAgIHJldHVybiBzCiAgICAgIC5yZXBsYWNlKC9cLi9nLCAiIikgLy8gaWdub3JlIGRvdHMgdGhhdCB3ZXJlIG1hZGUgb3B0aW9uYWwKICAgICAgLnJlcGxhY2Uoc3BhY2VPck5CU1BSZWdFeHAsICIgIikgLy8gaW50ZXJjaGFuZ2Ugc3BhY2UgYW5kIG5ic3AKICAgICAgLnRvTG93ZXJDYXNlKCk7CiAgfQoKICBmdW5jdGlvbiBvbmVPZihzdHJpbmdzLCBzdGFydEluZGV4KSB7CiAgICBpZiAoc3RyaW5ncyA9PT0gbnVsbCkgewogICAgICByZXR1cm4gbnVsbDsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgcmVnZXg6IFJlZ0V4cChzdHJpbmdzLm1hcChmaXhMaXN0UmVnZXgpLmpvaW4oInwiKSksCiAgICAgICAgZGVzZXI6IChbc10pID0+CiAgICAgICAgICBzdHJpbmdzLmZpbmRJbmRleCgoaSkgPT4gc3RyaXBJbnNlbnNpdGl2aXRpZXMocykgPT09IHN0cmlwSW5zZW5zaXRpdml0aWVzKGkpKSArIHN0YXJ0SW5kZXgsCiAgICAgIH07CiAgICB9CiAgfQoKICBmdW5jdGlvbiBvZmZzZXQocmVnZXgsIGdyb3VwcykgewogICAgcmV0dXJuIHsgcmVnZXgsIGRlc2VyOiAoWywgaCwgbV0pID0+IHNpZ25lZE9mZnNldChoLCBtKSwgZ3JvdXBzIH07CiAgfQoKICBmdW5jdGlvbiBzaW1wbGUocmVnZXgpIHsKICAgIHJldHVybiB7IHJlZ2V4LCBkZXNlcjogKFtzXSkgPT4gcyB9OwogIH0KCiAgZnVuY3Rpb24gZXNjYXBlVG9rZW4odmFsdWUpIHsKICAgIHJldHVybiB2YWx1ZS5yZXBsYWNlKC9bXC1cW1xde30oKSorPy4sXFxcXiR8I1xzXS9nLCAiXFwkJiIpOwogIH0KCiAgZnVuY3Rpb24gdW5pdEZvclRva2VuKHRva2VuLCBsb2MpIHsKICAgIGNvbnN0IG9uZSA9IGRpZ2l0UmVnZXgobG9jKSwKICAgICAgdHdvID0gZGlnaXRSZWdleChsb2MsICJ7Mn0iKSwKICAgICAgdGhyZWUgPSBkaWdpdFJlZ2V4KGxvYywgInszfSIpLAogICAgICBmb3VyID0gZGlnaXRSZWdleChsb2MsICJ7NH0iKSwKICAgICAgc2l4ID0gZGlnaXRSZWdleChsb2MsICJ7Nn0iKSwKICAgICAgb25lT3JUd28gPSBkaWdpdFJlZ2V4KGxvYywgInsxLDJ9IiksCiAgICAgIG9uZVRvVGhyZWUgPSBkaWdpdFJlZ2V4KGxvYywgInsxLDN9IiksCiAgICAgIG9uZVRvU2l4ID0gZGlnaXRSZWdleChsb2MsICJ7MSw2fSIpLAogICAgICBvbmVUb05pbmUgPSBkaWdpdFJlZ2V4KGxvYywgInsxLDl9IiksCiAgICAgIHR3b1RvRm91ciA9IGRpZ2l0UmVnZXgobG9jLCAiezIsNH0iKSwKICAgICAgZm91clRvU2l4ID0gZGlnaXRSZWdleChsb2MsICJ7NCw2fSIpLAogICAgICBsaXRlcmFsID0gKHQpID0+ICh7IHJlZ2V4OiBSZWdFeHAoZXNjYXBlVG9rZW4odC52YWwpKSwgZGVzZXI6IChbc10pID0+IHMsIGxpdGVyYWw6IHRydWUgfSksCiAgICAgIHVuaXRhdGUgPSAodCkgPT4gewogICAgICAgIGlmICh0b2tlbi5saXRlcmFsKSB7CiAgICAgICAgICByZXR1cm4gbGl0ZXJhbCh0KTsKICAgICAgICB9CiAgICAgICAgc3dpdGNoICh0LnZhbCkgewogICAgICAgICAgLy8gZXJhCiAgICAgICAgICBjYXNlICJHIjoKICAgICAgICAgICAgcmV0dXJuIG9uZU9mKGxvYy5lcmFzKCJzaG9ydCIsIGZhbHNlKSwgMCk7CiAgICAgICAgICBjYXNlICJHRyI6CiAgICAgICAgICAgIHJldHVybiBvbmVPZihsb2MuZXJhcygibG9uZyIsIGZhbHNlKSwgMCk7CiAgICAgICAgICAvLyB5ZWFycwogICAgICAgICAgY2FzZSAieSI6CiAgICAgICAgICAgIHJldHVybiBpbnRVbml0KG9uZVRvU2l4KTsKICAgICAgICAgIGNhc2UgInl5IjoKICAgICAgICAgICAgcmV0dXJuIGludFVuaXQodHdvVG9Gb3VyLCB1bnRydW5jYXRlWWVhcik7CiAgICAgICAgICBjYXNlICJ5eXl5IjoKICAgICAgICAgICAgcmV0dXJuIGludFVuaXQoZm91cik7CiAgICAgICAgICBjYXNlICJ5eXl5eSI6CiAgICAgICAgICAgIHJldHVybiBpbnRVbml0KGZvdXJUb1NpeCk7CiAgICAgICAgICBjYXNlICJ5eXl5eXkiOgogICAgICAgICAgICByZXR1cm4gaW50VW5pdChzaXgpOwogICAgICAgICAgLy8gbW9udGhzCiAgICAgICAgICBjYXNlICJNIjoKICAgICAgICAgICAgcmV0dXJuIGludFVuaXQob25lT3JUd28pOwogICAgICAgICAgY2FzZSAiTU0iOgogICAgICAgICAgICByZXR1cm4gaW50VW5pdCh0d28pOwogICAgICAgICAgY2FzZSAiTU1NIjoKICAgICAgICAgICAgcmV0dXJuIG9uZU9mKGxvYy5tb250aHMoInNob3J0IiwgdHJ1ZSwgZmFsc2UpLCAxKTsKICAgICAgICAgIGNhc2UgIk1NTU0iOgogICAgICAgICAgICByZXR1cm4gb25lT2YobG9jLm1vbnRocygibG9uZyIsIHRydWUsIGZhbHNlKSwgMSk7CiAgICAgICAgICBjYXNlICJMIjoKICAgICAgICAgICAgcmV0dXJuIGludFVuaXQob25lT3JUd28pOwogICAgICAgICAgY2FzZSAiTEwiOgogICAgICAgICAgICByZXR1cm4gaW50VW5pdCh0d28pOwogICAgICAgICAgY2FzZSAiTExMIjoKICAgICAgICAgICAgcmV0dXJuIG9uZU9mKGxvYy5tb250aHMoInNob3J0IiwgZmFsc2UsIGZhbHNlKSwgMSk7CiAgICAgICAgICBjYXNlICJMTExMIjoKICAgICAgICAgICAgcmV0dXJuIG9uZU9mKGxvYy5tb250aHMoImxvbmciLCBmYWxzZSwgZmFsc2UpLCAxKTsKICAgICAgICAgIC8vIGRhdGVzCiAgICAgICAgICBjYXNlICJkIjoKICAgICAgICAgICAgcmV0dXJuIGludFVuaXQob25lT3JUd28pOwogICAgICAgICAgY2FzZSAiZGQiOgogICAgICAgICAgICByZXR1cm4gaW50VW5pdCh0d28pOwogICAgICAgICAgLy8gb3JkaW5hbHMKICAgICAgICAgIGNhc2UgIm8iOgogICAgICAgICAgICByZXR1cm4gaW50VW5pdChvbmVUb1RocmVlKTsKICAgICAgICAgIGNhc2UgIm9vbyI6CiAgICAgICAgICAgIHJldHVybiBpbnRVbml0KHRocmVlKTsKICAgICAgICAgIC8vIHRpbWUKICAgICAgICAgIGNhc2UgIkhIIjoKICAgICAgICAgICAgcmV0dXJuIGludFVuaXQodHdvKTsKICAgICAgICAgIGNhc2UgIkgiOgogICAgICAgICAgICByZXR1cm4gaW50VW5pdChvbmVPclR3byk7CiAgICAgICAgICBjYXNlICJoaCI6CiAgICAgICAgICAgIHJldHVybiBpbnRVbml0KHR3byk7CiAgICAgICAgICBjYXNlICJoIjoKICAgICAgICAgICAgcmV0dXJuIGludFVuaXQob25lT3JUd28pOwogICAgICAgICAgY2FzZSAibW0iOgogICAgICAgICAgICByZXR1cm4gaW50VW5pdCh0d28pOwogICAgICAgICAgY2FzZSAibSI6CiAgICAgICAgICAgIHJldHVybiBpbnRVbml0KG9uZU9yVHdvKTsKICAgICAgICAgIGNhc2UgInEiOgogICAgICAgICAgICByZXR1cm4gaW50VW5pdChvbmVPclR3byk7CiAgICAgICAgICBjYXNlICJxcSI6CiAgICAgICAgICAgIHJldHVybiBpbnRVbml0KHR3byk7CiAgICAgICAgICBjYXNlICJzIjoKICAgICAgICAgICAgcmV0dXJuIGludFVuaXQob25lT3JUd28pOwogICAgICAgICAgY2FzZSAic3MiOgogICAgICAgICAgICByZXR1cm4gaW50VW5pdCh0d28pOwogICAgICAgICAgY2FzZSAiUyI6CiAgICAgICAgICAgIHJldHVybiBpbnRVbml0KG9uZVRvVGhyZWUpOwogICAgICAgICAgY2FzZSAiU1NTIjoKICAgICAgICAgICAgcmV0dXJuIGludFVuaXQodGhyZWUpOwogICAgICAgICAgY2FzZSAidSI6CiAgICAgICAgICAgIHJldHVybiBzaW1wbGUob25lVG9OaW5lKTsKICAgICAgICAgIGNhc2UgInV1IjoKICAgICAgICAgICAgcmV0dXJuIHNpbXBsZShvbmVPclR3byk7CiAgICAgICAgICBjYXNlICJ1dXUiOgogICAgICAgICAgICByZXR1cm4gaW50VW5pdChvbmUpOwogICAgICAgICAgLy8gbWVyaWRpZW0KICAgICAgICAgIGNhc2UgImEiOgogICAgICAgICAgICByZXR1cm4gb25lT2YobG9jLm1lcmlkaWVtcygpLCAwKTsKICAgICAgICAgIC8vIHdlZWtZZWFyIChrKQogICAgICAgICAgY2FzZSAia2trayI6CiAgICAgICAgICAgIHJldHVybiBpbnRVbml0KGZvdXIpOwogICAgICAgICAgY2FzZSAia2siOgogICAgICAgICAgICByZXR1cm4gaW50VW5pdCh0d29Ub0ZvdXIsIHVudHJ1bmNhdGVZZWFyKTsKICAgICAgICAgIC8vIHdlZWtOdW1iZXIgKFcpCiAgICAgICAgICBjYXNlICJXIjoKICAgICAgICAgICAgcmV0dXJuIGludFVuaXQob25lT3JUd28pOwogICAgICAgICAgY2FzZSAiV1ciOgogICAgICAgICAgICByZXR1cm4gaW50VW5pdCh0d28pOwogICAgICAgICAgLy8gd2Vla2RheXMKICAgICAgICAgIGNhc2UgIkUiOgogICAgICAgICAgY2FzZSAiYyI6CiAgICAgICAgICAgIHJldHVybiBpbnRVbml0KG9uZSk7CiAgICAgICAgICBjYXNlICJFRUUiOgogICAgICAgICAgICByZXR1cm4gb25lT2YobG9jLndlZWtkYXlzKCJzaG9ydCIsIGZhbHNlLCBmYWxzZSksIDEpOwogICAgICAgICAgY2FzZSAiRUVFRSI6CiAgICAgICAgICAgIHJldHVybiBvbmVPZihsb2Mud2Vla2RheXMoImxvbmciLCBmYWxzZSwgZmFsc2UpLCAxKTsKICAgICAgICAgIGNhc2UgImNjYyI6CiAgICAgICAgICAgIHJldHVybiBvbmVPZihsb2Mud2Vla2RheXMoInNob3J0IiwgdHJ1ZSwgZmFsc2UpLCAxKTsKICAgICAgICAgIGNhc2UgImNjY2MiOgogICAgICAgICAgICByZXR1cm4gb25lT2YobG9jLndlZWtkYXlzKCJsb25nIiwgdHJ1ZSwgZmFsc2UpLCAxKTsKICAgICAgICAgIC8vIG9mZnNldC96b25lCiAgICAgICAgICBjYXNlICJaIjoKICAgICAgICAgIGNhc2UgIlpaIjoKICAgICAgICAgICAgcmV0dXJuIG9mZnNldChuZXcgUmVnRXhwKGAoWystXSR7b25lT3JUd28uc291cmNlfSkoPzo6KCR7dHdvLnNvdXJjZX0pKT9gKSwgMik7CiAgICAgICAgICBjYXNlICJaWloiOgogICAgICAgICAgICByZXR1cm4gb2Zmc2V0KG5ldyBSZWdFeHAoYChbKy1dJHtvbmVPclR3by5zb3VyY2V9KSgke3R3by5zb3VyY2V9KT9gKSwgMik7CiAgICAgICAgICAvLyB3ZSBkb24ndCBzdXBwb3J0IFpaWlogKFBTVCkgb3IgWlpaWlogKFBhY2lmaWMgU3RhbmRhcmQgVGltZSkgaW4gcGFyc2luZwogICAgICAgICAgLy8gYmVjYXVzZSB3ZSBkb24ndCBoYXZlIGFueSB3YXkgdG8gZmlndXJlIG91dCB3aGF0IHRoZXkgYXJlCiAgICAgICAgICBjYXNlICJ6IjoKICAgICAgICAgICAgcmV0dXJuIHNpbXBsZSgvW2Etel8rLS9dezEsMjU2fT8vaSk7CiAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICByZXR1cm4gbGl0ZXJhbCh0KTsKICAgICAgICB9CiAgICAgIH07CgogICAgY29uc3QgdW5pdCA9IHVuaXRhdGUodG9rZW4pIHx8IHsKICAgICAgaW52YWxpZFJlYXNvbjogTUlTU0lOR19GVFAsCiAgICB9OwoKICAgIHVuaXQudG9rZW4gPSB0b2tlbjsKCiAgICByZXR1cm4gdW5pdDsKICB9CgogIGNvbnN0IHBhcnRUeXBlU3R5bGVUb1Rva2VuVmFsID0gewogICAgeWVhcjogewogICAgICAiMi1kaWdpdCI6ICJ5eSIsCiAgICAgIG51bWVyaWM6ICJ5eXl5eSIsCiAgICB9LAogICAgbW9udGg6IHsKICAgICAgbnVtZXJpYzogIk0iLAogICAgICAiMi1kaWdpdCI6ICJNTSIsCiAgICAgIHNob3J0OiAiTU1NIiwKICAgICAgbG9uZzogIk1NTU0iLAogICAgfSwKICAgIGRheTogewogICAgICBudW1lcmljOiAiZCIsCiAgICAgICIyLWRpZ2l0IjogImRkIiwKICAgIH0sCiAgICB3ZWVrZGF5OiB7CiAgICAgIHNob3J0OiAiRUVFIiwKICAgICAgbG9uZzogIkVFRUUiLAogICAgfSwKICAgIGRheXBlcmlvZDogImEiLAogICAgZGF5UGVyaW9kOiAiYSIsCiAgICBob3VyOiB7CiAgICAgIG51bWVyaWM6ICJoIiwKICAgICAgIjItZGlnaXQiOiAiaGgiLAogICAgfSwKICAgIG1pbnV0ZTogewogICAgICBudW1lcmljOiAibSIsCiAgICAgICIyLWRpZ2l0IjogIm1tIiwKICAgIH0sCiAgICBzZWNvbmQ6IHsKICAgICAgbnVtZXJpYzogInMiLAogICAgICAiMi1kaWdpdCI6ICJzcyIsCiAgICB9LAogICAgdGltZVpvbmVOYW1lOiB7CiAgICAgIGxvbmc6ICJaWlpaWiIsCiAgICAgIHNob3J0OiAiWlpaIiwKICAgIH0sCiAgfTsKCiAgZnVuY3Rpb24gdG9rZW5Gb3JQYXJ0KHBhcnQsIGxvY2FsZSwgZm9ybWF0T3B0cykgewogICAgY29uc3QgeyB0eXBlLCB2YWx1ZSB9ID0gcGFydDsKCiAgICBpZiAodHlwZSA9PT0gImxpdGVyYWwiKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgbGl0ZXJhbDogdHJ1ZSwKICAgICAgICB2YWw6IHZhbHVlLAogICAgICB9OwogICAgfQoKICAgIGNvbnN0IHN0eWxlID0gZm9ybWF0T3B0c1t0eXBlXTsKCiAgICBsZXQgdmFsID0gcGFydFR5cGVTdHlsZVRvVG9rZW5WYWxbdHlwZV07CiAgICBpZiAodHlwZW9mIHZhbCA9PT0gIm9iamVjdCIpIHsKICAgICAgdmFsID0gdmFsW3N0eWxlXTsKICAgIH0KCiAgICBpZiAodmFsKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgbGl0ZXJhbDogZmFsc2UsCiAgICAgICAgdmFsLAogICAgICB9OwogICAgfQoKICAgIHJldHVybiB1bmRlZmluZWQ7CiAgfQoKICBmdW5jdGlvbiBidWlsZFJlZ2V4KHVuaXRzKSB7CiAgICBjb25zdCByZSA9IHVuaXRzLm1hcCgodSkgPT4gdS5yZWdleCkucmVkdWNlKChmLCByKSA9PiBgJHtmfSgke3Iuc291cmNlfSlgLCAiIik7CiAgICByZXR1cm4gW2BeJHtyZX0kYCwgdW5pdHNdOwogIH0KCiAgZnVuY3Rpb24gbWF0Y2goaW5wdXQsIHJlZ2V4LCBoYW5kbGVycykgewogICAgY29uc3QgbWF0Y2hlcyA9IGlucHV0Lm1hdGNoKHJlZ2V4KTsKCiAgICBpZiAobWF0Y2hlcykgewogICAgICBjb25zdCBhbGwgPSB7fTsKICAgICAgbGV0IG1hdGNoSW5kZXggPSAxOwogICAgICBmb3IgKGNvbnN0IGkgaW4gaGFuZGxlcnMpIHsKICAgICAgICBpZiAoaGFzT3duUHJvcGVydHkoaGFuZGxlcnMsIGkpKSB7CiAgICAgICAgICBjb25zdCBoID0gaGFuZGxlcnNbaV0sCiAgICAgICAgICAgIGdyb3VwcyA9IGguZ3JvdXBzID8gaC5ncm91cHMgKyAxIDogMTsKICAgICAgICAgIGlmICghaC5saXRlcmFsICYmIGgudG9rZW4pIHsKICAgICAgICAgICAgYWxsW2gudG9rZW4udmFsWzBdXSA9IGguZGVzZXIobWF0Y2hlcy5zbGljZShtYXRjaEluZGV4LCBtYXRjaEluZGV4ICsgZ3JvdXBzKSk7CiAgICAgICAgICB9CiAgICAgICAgICBtYXRjaEluZGV4ICs9IGdyb3VwczsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIFttYXRjaGVzLCBhbGxdOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIFttYXRjaGVzLCB7fV07CiAgICB9CiAgfQoKICBmdW5jdGlvbiBkYXRlVGltZUZyb21NYXRjaGVzKG1hdGNoZXMpIHsKICAgIGNvbnN0IHRvRmllbGQgPSAodG9rZW4pID0+IHsKICAgICAgc3dpdGNoICh0b2tlbikgewogICAgICAgIGNhc2UgIlMiOgogICAgICAgICAgcmV0dXJuICJtaWxsaXNlY29uZCI7CiAgICAgICAgY2FzZSAicyI6CiAgICAgICAgICByZXR1cm4gInNlY29uZCI7CiAgICAgICAgY2FzZSAibSI6CiAgICAgICAgICByZXR1cm4gIm1pbnV0ZSI7CiAgICAgICAgY2FzZSAiaCI6CiAgICAgICAgY2FzZSAiSCI6CiAgICAgICAgICByZXR1cm4gImhvdXIiOwogICAgICAgIGNhc2UgImQiOgogICAgICAgICAgcmV0dXJuICJkYXkiOwogICAgICAgIGNhc2UgIm8iOgogICAgICAgICAgcmV0dXJuICJvcmRpbmFsIjsKICAgICAgICBjYXNlICJMIjoKICAgICAgICBjYXNlICJNIjoKICAgICAgICAgIHJldHVybiAibW9udGgiOwogICAgICAgIGNhc2UgInkiOgogICAgICAgICAgcmV0dXJuICJ5ZWFyIjsKICAgICAgICBjYXNlICJFIjoKICAgICAgICBjYXNlICJjIjoKICAgICAgICAgIHJldHVybiAid2Vla2RheSI7CiAgICAgICAgY2FzZSAiVyI6CiAgICAgICAgICByZXR1cm4gIndlZWtOdW1iZXIiOwogICAgICAgIGNhc2UgImsiOgogICAgICAgICAgcmV0dXJuICJ3ZWVrWWVhciI7CiAgICAgICAgY2FzZSAicSI6CiAgICAgICAgICByZXR1cm4gInF1YXJ0ZXIiOwogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQogICAgfTsKCiAgICBsZXQgem9uZSA9IG51bGw7CiAgICBsZXQgc3BlY2lmaWNPZmZzZXQ7CiAgICBpZiAoIWlzVW5kZWZpbmVkKG1hdGNoZXMueikpIHsKICAgICAgem9uZSA9IElBTkFab25lLmNyZWF0ZShtYXRjaGVzLnopOwogICAgfQoKICAgIGlmICghaXNVbmRlZmluZWQobWF0Y2hlcy5aKSkgewogICAgICBpZiAoIXpvbmUpIHsKICAgICAgICB6b25lID0gbmV3IEZpeGVkT2Zmc2V0Wm9uZShtYXRjaGVzLlopOwogICAgICB9CiAgICAgIHNwZWNpZmljT2Zmc2V0ID0gbWF0Y2hlcy5aOwogICAgfQoKICAgIGlmICghaXNVbmRlZmluZWQobWF0Y2hlcy5xKSkgewogICAgICBtYXRjaGVzLk0gPSAobWF0Y2hlcy5xIC0gMSkgKiAzICsgMTsKICAgIH0KCiAgICBpZiAoIWlzVW5kZWZpbmVkKG1hdGNoZXMuaCkpIHsKICAgICAgaWYgKG1hdGNoZXMuaCA8IDEyICYmIG1hdGNoZXMuYSA9PT0gMSkgewogICAgICAgIG1hdGNoZXMuaCArPSAxMjsKICAgICAgfSBlbHNlIGlmIChtYXRjaGVzLmggPT09IDEyICYmIG1hdGNoZXMuYSA9PT0gMCkgewogICAgICAgIG1hdGNoZXMuaCA9IDA7CiAgICAgIH0KICAgIH0KCiAgICBpZiAobWF0Y2hlcy5HID09PSAwICYmIG1hdGNoZXMueSkgewogICAgICBtYXRjaGVzLnkgPSAtbWF0Y2hlcy55OwogICAgfQoKICAgIGlmICghaXNVbmRlZmluZWQobWF0Y2hlcy51KSkgewogICAgICBtYXRjaGVzLlMgPSBwYXJzZU1pbGxpcyhtYXRjaGVzLnUpOwogICAgfQoKICAgIGNvbnN0IHZhbHMgPSBPYmplY3Qua2V5cyhtYXRjaGVzKS5yZWR1Y2UoKHIsIGspID0+IHsKICAgICAgY29uc3QgZiA9IHRvRmllbGQoayk7CiAgICAgIGlmIChmKSB7CiAgICAgICAgcltmXSA9IG1hdGNoZXNba107CiAgICAgIH0KCiAgICAgIHJldHVybiByOwogICAgfSwge30pOwoKICAgIHJldHVybiBbdmFscywgem9uZSwgc3BlY2lmaWNPZmZzZXRdOwogIH0KCiAgbGV0IGR1bW15RGF0ZVRpbWVDYWNoZSA9IG51bGw7CgogIGZ1bmN0aW9uIGdldER1bW15RGF0ZVRpbWUoKSB7CiAgICBpZiAoIWR1bW15RGF0ZVRpbWVDYWNoZSkgewogICAgICBkdW1teURhdGVUaW1lQ2FjaGUgPSBEYXRlVGltZS5mcm9tTWlsbGlzKDE1NTU1NTU1NTU1NTUpOwogICAgfQoKICAgIHJldHVybiBkdW1teURhdGVUaW1lQ2FjaGU7CiAgfQoKICBmdW5jdGlvbiBtYXliZUV4cGFuZE1hY3JvVG9rZW4odG9rZW4sIGxvY2FsZSkgewogICAgaWYgKHRva2VuLmxpdGVyYWwpIHsKICAgICAgcmV0dXJuIHRva2VuOwogICAgfQoKICAgIGNvbnN0IGZvcm1hdE9wdHMgPSBGb3JtYXR0ZXIubWFjcm9Ub2tlblRvRm9ybWF0T3B0cyh0b2tlbi52YWwpOwogICAgY29uc3QgdG9rZW5zID0gZm9ybWF0T3B0c1RvVG9rZW5zKGZvcm1hdE9wdHMsIGxvY2FsZSk7CgogICAgaWYgKHRva2VucyA9PSBudWxsIHx8IHRva2Vucy5pbmNsdWRlcyh1bmRlZmluZWQpKSB7CiAgICAgIHJldHVybiB0b2tlbjsKICAgIH0KCiAgICByZXR1cm4gdG9rZW5zOwogIH0KCiAgZnVuY3Rpb24gZXhwYW5kTWFjcm9Ub2tlbnModG9rZW5zLCBsb2NhbGUpIHsKICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUuY29uY2F0KC4uLnRva2Vucy5tYXAoKHQpID0+IG1heWJlRXhwYW5kTWFjcm9Ub2tlbih0LCBsb2NhbGUpKSk7CiAgfQoKICAvKioKICAgKiBAcHJpdmF0ZQogICAqLwoKICBmdW5jdGlvbiBleHBsYWluRnJvbVRva2Vucyhsb2NhbGUsIGlucHV0LCBmb3JtYXQpIHsKICAgIGNvbnN0IHRva2VucyA9IGV4cGFuZE1hY3JvVG9rZW5zKEZvcm1hdHRlci5wYXJzZUZvcm1hdChmb3JtYXQpLCBsb2NhbGUpLAogICAgICB1bml0cyA9IHRva2Vucy5tYXAoKHQpID0+IHVuaXRGb3JUb2tlbih0LCBsb2NhbGUpKSwKICAgICAgZGlzcXVhbGlmeWluZ1VuaXQgPSB1bml0cy5maW5kKCh0KSA9PiB0LmludmFsaWRSZWFzb24pOwoKICAgIGlmIChkaXNxdWFsaWZ5aW5nVW5pdCkgewogICAgICByZXR1cm4geyBpbnB1dCwgdG9rZW5zLCBpbnZhbGlkUmVhc29uOiBkaXNxdWFsaWZ5aW5nVW5pdC5pbnZhbGlkUmVhc29uIH07CiAgICB9IGVsc2UgewogICAgICBjb25zdCBbcmVnZXhTdHJpbmcsIGhhbmRsZXJzXSA9IGJ1aWxkUmVnZXgodW5pdHMpLAogICAgICAgIHJlZ2V4ID0gUmVnRXhwKHJlZ2V4U3RyaW5nLCAiaSIpLAogICAgICAgIFtyYXdNYXRjaGVzLCBtYXRjaGVzXSA9IG1hdGNoKGlucHV0LCByZWdleCwgaGFuZGxlcnMpLAogICAgICAgIFtyZXN1bHQsIHpvbmUsIHNwZWNpZmljT2Zmc2V0XSA9IG1hdGNoZXMKICAgICAgICAgID8gZGF0ZVRpbWVGcm9tTWF0Y2hlcyhtYXRjaGVzKQogICAgICAgICAgOiBbbnVsbCwgbnVsbCwgdW5kZWZpbmVkXTsKICAgICAgaWYgKGhhc093blByb3BlcnR5KG1hdGNoZXMsICJhIikgJiYgaGFzT3duUHJvcGVydHkobWF0Y2hlcywgIkgiKSkgewogICAgICAgIHRocm93IG5ldyBDb25mbGljdGluZ1NwZWNpZmljYXRpb25FcnJvcigKICAgICAgICAgICJDYW4ndCBpbmNsdWRlIG1lcmlkaWVtIHdoZW4gc3BlY2lmeWluZyAyNC1ob3VyIGZvcm1hdCIKICAgICAgICApOwogICAgICB9CiAgICAgIHJldHVybiB7IGlucHV0LCB0b2tlbnMsIHJlZ2V4LCByYXdNYXRjaGVzLCBtYXRjaGVzLCByZXN1bHQsIHpvbmUsIHNwZWNpZmljT2Zmc2V0IH07CiAgICB9CiAgfQoKICBmdW5jdGlvbiBwYXJzZUZyb21Ub2tlbnMobG9jYWxlLCBpbnB1dCwgZm9ybWF0KSB7CiAgICBjb25zdCB7IHJlc3VsdCwgem9uZSwgc3BlY2lmaWNPZmZzZXQsIGludmFsaWRSZWFzb24gfSA9IGV4cGxhaW5Gcm9tVG9rZW5zKGxvY2FsZSwgaW5wdXQsIGZvcm1hdCk7CiAgICByZXR1cm4gW3Jlc3VsdCwgem9uZSwgc3BlY2lmaWNPZmZzZXQsIGludmFsaWRSZWFzb25dOwogIH0KCiAgZnVuY3Rpb24gZm9ybWF0T3B0c1RvVG9rZW5zKGZvcm1hdE9wdHMsIGxvY2FsZSkgewogICAgaWYgKCFmb3JtYXRPcHRzKSB7CiAgICAgIHJldHVybiBudWxsOwogICAgfQoKICAgIGNvbnN0IGZvcm1hdHRlciA9IEZvcm1hdHRlci5jcmVhdGUobG9jYWxlLCBmb3JtYXRPcHRzKTsKICAgIGNvbnN0IHBhcnRzID0gZm9ybWF0dGVyLmZvcm1hdERhdGVUaW1lUGFydHMoZ2V0RHVtbXlEYXRlVGltZSgpKTsKICAgIHJldHVybiBwYXJ0cy5tYXAoKHApID0+IHRva2VuRm9yUGFydChwLCBsb2NhbGUsIGZvcm1hdE9wdHMpKTsKICB9CgogIGNvbnN0IG5vbkxlYXBMYWRkZXIgPSBbMCwgMzEsIDU5LCA5MCwgMTIwLCAxNTEsIDE4MSwgMjEyLCAyNDMsIDI3MywgMzA0LCAzMzRdLAogICAgbGVhcExhZGRlciA9IFswLCAzMSwgNjAsIDkxLCAxMjEsIDE1MiwgMTgyLCAyMTMsIDI0NCwgMjc0LCAzMDUsIDMzNV07CgogIGZ1bmN0aW9uIHVuaXRPdXRPZlJhbmdlKHVuaXQsIHZhbHVlKSB7CiAgICByZXR1cm4gbmV3IEludmFsaWQoCiAgICAgICJ1bml0IG91dCBvZiByYW5nZSIsCiAgICAgIGB5b3Ugc3BlY2lmaWVkICR7dmFsdWV9IChvZiB0eXBlICR7dHlwZW9mIHZhbHVlfSkgYXMgYSAke3VuaXR9LCB3aGljaCBpcyBpbnZhbGlkYAogICAgKTsKICB9CgogIGZ1bmN0aW9uIGRheU9mV2Vlayh5ZWFyLCBtb250aCwgZGF5KSB7CiAgICBjb25zdCBkID0gbmV3IERhdGUoRGF0ZS5VVEMoeWVhciwgbW9udGggLSAxLCBkYXkpKTsKCiAgICBpZiAoeWVhciA8IDEwMCAmJiB5ZWFyID49IDApIHsKICAgICAgZC5zZXRVVENGdWxsWWVhcihkLmdldFVUQ0Z1bGxZZWFyKCkgLSAxOTAwKTsKICAgIH0KCiAgICBjb25zdCBqcyA9IGQuZ2V0VVRDRGF5KCk7CgogICAgcmV0dXJuIGpzID09PSAwID8gNyA6IGpzOwogIH0KCiAgZnVuY3Rpb24gY29tcHV0ZU9yZGluYWwoeWVhciwgbW9udGgsIGRheSkgewogICAgcmV0dXJuIGRheSArIChpc0xlYXBZZWFyKHllYXIpID8gbGVhcExhZGRlciA6IG5vbkxlYXBMYWRkZXIpW21vbnRoIC0gMV07CiAgfQoKICBmdW5jdGlvbiB1bmNvbXB1dGVPcmRpbmFsKHllYXIsIG9yZGluYWwpIHsKICAgIGNvbnN0IHRhYmxlID0gaXNMZWFwWWVhcih5ZWFyKSA/IGxlYXBMYWRkZXIgOiBub25MZWFwTGFkZGVyLAogICAgICBtb250aDAgPSB0YWJsZS5maW5kSW5kZXgoKGkpID0+IGkgPCBvcmRpbmFsKSwKICAgICAgZGF5ID0gb3JkaW5hbCAtIHRhYmxlW21vbnRoMF07CiAgICByZXR1cm4geyBtb250aDogbW9udGgwICsgMSwgZGF5IH07CiAgfQoKICAvKioKICAgKiBAcHJpdmF0ZQogICAqLwoKICBmdW5jdGlvbiBncmVnb3JpYW5Ub1dlZWsoZ3JlZ09iaikgewogICAgY29uc3QgeyB5ZWFyLCBtb250aCwgZGF5IH0gPSBncmVnT2JqLAogICAgICBvcmRpbmFsID0gY29tcHV0ZU9yZGluYWwoeWVhciwgbW9udGgsIGRheSksCiAgICAgIHdlZWtkYXkgPSBkYXlPZldlZWsoeWVhciwgbW9udGgsIGRheSk7CgogICAgbGV0IHdlZWtOdW1iZXIgPSBNYXRoLmZsb29yKChvcmRpbmFsIC0gd2Vla2RheSArIDEwKSAvIDcpLAogICAgICB3ZWVrWWVhcjsKCiAgICBpZiAod2Vla051bWJlciA8IDEpIHsKICAgICAgd2Vla1llYXIgPSB5ZWFyIC0gMTsKICAgICAgd2Vla051bWJlciA9IHdlZWtzSW5XZWVrWWVhcih3ZWVrWWVhcik7CiAgICB9IGVsc2UgaWYgKHdlZWtOdW1iZXIgPiB3ZWVrc0luV2Vla1llYXIoeWVhcikpIHsKICAgICAgd2Vla1llYXIgPSB5ZWFyICsgMTsKICAgICAgd2Vla051bWJlciA9IDE7CiAgICB9IGVsc2UgewogICAgICB3ZWVrWWVhciA9IHllYXI7CiAgICB9CgogICAgcmV0dXJuIHsgd2Vla1llYXIsIHdlZWtOdW1iZXIsIHdlZWtkYXksIC4uLnRpbWVPYmplY3QoZ3JlZ09iaikgfTsKICB9CgogIGZ1bmN0aW9uIHdlZWtUb0dyZWdvcmlhbih3ZWVrRGF0YSkgewogICAgY29uc3QgeyB3ZWVrWWVhciwgd2Vla051bWJlciwgd2Vla2RheSB9ID0gd2Vla0RhdGEsCiAgICAgIHdlZWtkYXlPZkphbjQgPSBkYXlPZldlZWsod2Vla1llYXIsIDEsIDQpLAogICAgICB5ZWFySW5EYXlzID0gZGF5c0luWWVhcih3ZWVrWWVhcik7CgogICAgbGV0IG9yZGluYWwgPSB3ZWVrTnVtYmVyICogNyArIHdlZWtkYXkgLSB3ZWVrZGF5T2ZKYW40IC0gMywKICAgICAgeWVhcjsKCiAgICBpZiAob3JkaW5hbCA8IDEpIHsKICAgICAgeWVhciA9IHdlZWtZZWFyIC0gMTsKICAgICAgb3JkaW5hbCArPSBkYXlzSW5ZZWFyKHllYXIpOwogICAgfSBlbHNlIGlmIChvcmRpbmFsID4geWVhckluRGF5cykgewogICAgICB5ZWFyID0gd2Vla1llYXIgKyAxOwogICAgICBvcmRpbmFsIC09IGRheXNJblllYXIod2Vla1llYXIpOwogICAgfSBlbHNlIHsKICAgICAgeWVhciA9IHdlZWtZZWFyOwogICAgfQoKICAgIGNvbnN0IHsgbW9udGgsIGRheSB9ID0gdW5jb21wdXRlT3JkaW5hbCh5ZWFyLCBvcmRpbmFsKTsKICAgIHJldHVybiB7IHllYXIsIG1vbnRoLCBkYXksIC4uLnRpbWVPYmplY3Qod2Vla0RhdGEpIH07CiAgfQoKICBmdW5jdGlvbiBncmVnb3JpYW5Ub09yZGluYWwoZ3JlZ0RhdGEpIHsKICAgIGNvbnN0IHsgeWVhciwgbW9udGgsIGRheSB9ID0gZ3JlZ0RhdGE7CiAgICBjb25zdCBvcmRpbmFsID0gY29tcHV0ZU9yZGluYWwoeWVhciwgbW9udGgsIGRheSk7CiAgICByZXR1cm4geyB5ZWFyLCBvcmRpbmFsLCAuLi50aW1lT2JqZWN0KGdyZWdEYXRhKSB9OwogIH0KCiAgZnVuY3Rpb24gb3JkaW5hbFRvR3JlZ29yaWFuKG9yZGluYWxEYXRhKSB7CiAgICBjb25zdCB7IHllYXIsIG9yZGluYWwgfSA9IG9yZGluYWxEYXRhOwogICAgY29uc3QgeyBtb250aCwgZGF5IH0gPSB1bmNvbXB1dGVPcmRpbmFsKHllYXIsIG9yZGluYWwpOwogICAgcmV0dXJuIHsgeWVhciwgbW9udGgsIGRheSwgLi4udGltZU9iamVjdChvcmRpbmFsRGF0YSkgfTsKICB9CgogIGZ1bmN0aW9uIGhhc0ludmFsaWRXZWVrRGF0YShvYmopIHsKICAgIGNvbnN0IHZhbGlkWWVhciA9IGlzSW50ZWdlcihvYmoud2Vla1llYXIpLAogICAgICB2YWxpZFdlZWsgPSBpbnRlZ2VyQmV0d2VlbihvYmoud2Vla051bWJlciwgMSwgd2Vla3NJbldlZWtZZWFyKG9iai53ZWVrWWVhcikpLAogICAgICB2YWxpZFdlZWtkYXkgPSBpbnRlZ2VyQmV0d2VlbihvYmoud2Vla2RheSwgMSwgNyk7CgogICAgaWYgKCF2YWxpZFllYXIpIHsKICAgICAgcmV0dXJuIHVuaXRPdXRPZlJhbmdlKCJ3ZWVrWWVhciIsIG9iai53ZWVrWWVhcik7CiAgICB9IGVsc2UgaWYgKCF2YWxpZFdlZWspIHsKICAgICAgcmV0dXJuIHVuaXRPdXRPZlJhbmdlKCJ3ZWVrIiwgb2JqLndlZWspOwogICAgfSBlbHNlIGlmICghdmFsaWRXZWVrZGF5KSB7CiAgICAgIHJldHVybiB1bml0T3V0T2ZSYW5nZSgid2Vla2RheSIsIG9iai53ZWVrZGF5KTsKICAgIH0gZWxzZSByZXR1cm4gZmFsc2U7CiAgfQoKICBmdW5jdGlvbiBoYXNJbnZhbGlkT3JkaW5hbERhdGEob2JqKSB7CiAgICBjb25zdCB2YWxpZFllYXIgPSBpc0ludGVnZXIob2JqLnllYXIpLAogICAgICB2YWxpZE9yZGluYWwgPSBpbnRlZ2VyQmV0d2VlbihvYmoub3JkaW5hbCwgMSwgZGF5c0luWWVhcihvYmoueWVhcikpOwoKICAgIGlmICghdmFsaWRZZWFyKSB7CiAgICAgIHJldHVybiB1bml0T3V0T2ZSYW5nZSgieWVhciIsIG9iai55ZWFyKTsKICAgIH0gZWxzZSBpZiAoIXZhbGlkT3JkaW5hbCkgewogICAgICByZXR1cm4gdW5pdE91dE9mUmFuZ2UoIm9yZGluYWwiLCBvYmoub3JkaW5hbCk7CiAgICB9IGVsc2UgcmV0dXJuIGZhbHNlOwogIH0KCiAgZnVuY3Rpb24gaGFzSW52YWxpZEdyZWdvcmlhbkRhdGEob2JqKSB7CiAgICBjb25zdCB2YWxpZFllYXIgPSBpc0ludGVnZXIob2JqLnllYXIpLAogICAgICB2YWxpZE1vbnRoID0gaW50ZWdlckJldHdlZW4ob2JqLm1vbnRoLCAxLCAxMiksCiAgICAgIHZhbGlkRGF5ID0gaW50ZWdlckJldHdlZW4ob2JqLmRheSwgMSwgZGF5c0luTW9udGgob2JqLnllYXIsIG9iai5tb250aCkpOwoKICAgIGlmICghdmFsaWRZZWFyKSB7CiAgICAgIHJldHVybiB1bml0T3V0T2ZSYW5nZSgieWVhciIsIG9iai55ZWFyKTsKICAgIH0gZWxzZSBpZiAoIXZhbGlkTW9udGgpIHsKICAgICAgcmV0dXJuIHVuaXRPdXRPZlJhbmdlKCJtb250aCIsIG9iai5tb250aCk7CiAgICB9IGVsc2UgaWYgKCF2YWxpZERheSkgewogICAgICByZXR1cm4gdW5pdE91dE9mUmFuZ2UoImRheSIsIG9iai5kYXkpOwogICAgfSBlbHNlIHJldHVybiBmYWxzZTsKICB9CgogIGZ1bmN0aW9uIGhhc0ludmFsaWRUaW1lRGF0YShvYmopIHsKICAgIGNvbnN0IHsgaG91ciwgbWludXRlLCBzZWNvbmQsIG1pbGxpc2Vjb25kIH0gPSBvYmo7CiAgICBjb25zdCB2YWxpZEhvdXIgPQogICAgICAgIGludGVnZXJCZXR3ZWVuKGhvdXIsIDAsIDIzKSB8fAogICAgICAgIChob3VyID09PSAyNCAmJiBtaW51dGUgPT09IDAgJiYgc2Vjb25kID09PSAwICYmIG1pbGxpc2Vjb25kID09PSAwKSwKICAgICAgdmFsaWRNaW51dGUgPSBpbnRlZ2VyQmV0d2VlbihtaW51dGUsIDAsIDU5KSwKICAgICAgdmFsaWRTZWNvbmQgPSBpbnRlZ2VyQmV0d2VlbihzZWNvbmQsIDAsIDU5KSwKICAgICAgdmFsaWRNaWxsaXNlY29uZCA9IGludGVnZXJCZXR3ZWVuKG1pbGxpc2Vjb25kLCAwLCA5OTkpOwoKICAgIGlmICghdmFsaWRIb3VyKSB7CiAgICAgIHJldHVybiB1bml0T3V0T2ZSYW5nZSgiaG91ciIsIGhvdXIpOwogICAgfSBlbHNlIGlmICghdmFsaWRNaW51dGUpIHsKICAgICAgcmV0dXJuIHVuaXRPdXRPZlJhbmdlKCJtaW51dGUiLCBtaW51dGUpOwogICAgfSBlbHNlIGlmICghdmFsaWRTZWNvbmQpIHsKICAgICAgcmV0dXJuIHVuaXRPdXRPZlJhbmdlKCJzZWNvbmQiLCBzZWNvbmQpOwogICAgfSBlbHNlIGlmICghdmFsaWRNaWxsaXNlY29uZCkgewogICAgICByZXR1cm4gdW5pdE91dE9mUmFuZ2UoIm1pbGxpc2Vjb25kIiwgbWlsbGlzZWNvbmQpOwogICAgfSBlbHNlIHJldHVybiBmYWxzZTsKICB9CgogIGNvbnN0IElOVkFMSUQkMSA9ICJJbnZhbGlkIERhdGVUaW1lIjsKICBjb25zdCBNQVhfREFURSA9IDguNjRlMTU7CgogIGZ1bmN0aW9uIHVuc3VwcG9ydGVkWm9uZSh6b25lKSB7CiAgICByZXR1cm4gbmV3IEludmFsaWQoInVuc3VwcG9ydGVkIHpvbmUiLCBgdGhlIHpvbmUgIiR7em9uZS5uYW1lfSIgaXMgbm90IHN1cHBvcnRlZGApOwogIH0KCiAgLy8gd2UgY2FjaGUgd2VlayBkYXRhIG9uIHRoZSBEVCBvYmplY3QgYW5kIHRoaXMgaW50ZXJtZWRpYXRlcyB0aGUgY2FjaGUKICBmdW5jdGlvbiBwb3NzaWJseUNhY2hlZFdlZWtEYXRhKGR0KSB7CiAgICBpZiAoZHQud2Vla0RhdGEgPT09IG51bGwpIHsKICAgICAgZHQud2Vla0RhdGEgPSBncmVnb3JpYW5Ub1dlZWsoZHQuYyk7CiAgICB9CiAgICByZXR1cm4gZHQud2Vla0RhdGE7CiAgfQoKICAvLyBjbG9uZSByZWFsbHkgbWVhbnMsICJtYWtlIGEgbmV3IG9iamVjdCB3aXRoIHRoZXNlIG1vZGlmaWNhdGlvbnMiLiBhbGwgInNldHRlcnMiIHJlYWxseSB1c2UgdGhpcwogIC8vIHRvIGNyZWF0ZSBhIG5ldyBvYmplY3Qgd2hpbGUgb25seSBjaGFuZ2luZyBzb21lIG9mIHRoZSBwcm9wZXJ0aWVzCiAgZnVuY3Rpb24gY2xvbmUkMShpbnN0LCBhbHRzKSB7CiAgICBjb25zdCBjdXJyZW50ID0gewogICAgICB0czogaW5zdC50cywKICAgICAgem9uZTogaW5zdC56b25lLAogICAgICBjOiBpbnN0LmMsCiAgICAgIG86IGluc3QubywKICAgICAgbG9jOiBpbnN0LmxvYywKICAgICAgaW52YWxpZDogaW5zdC5pbnZhbGlkLAogICAgfTsKICAgIHJldHVybiBuZXcgRGF0ZVRpbWUoeyAuLi5jdXJyZW50LCAuLi5hbHRzLCBvbGQ6IGN1cnJlbnQgfSk7CiAgfQoKICAvLyBmaW5kIHRoZSByaWdodCBvZmZzZXQgYSBnaXZlbiBsb2NhbCB0aW1lLiBUaGUgbyBpbnB1dCBpcyBvdXIgZ3Vlc3MsIHdoaWNoIGRldGVybWluZXMgd2hpY2gKICAvLyBvZmZzZXQgd2UnbGwgcGljayBpbiBhbWJpZ3VvdXMgY2FzZXMgKGUuZy4gdGhlcmUgYXJlIHR3byAzIEFNcyBiL2MgRmFsbGJhY2sgRFNUKQogIGZ1bmN0aW9uIGZpeE9mZnNldChsb2NhbFRTLCBvLCB0eikgewogICAgLy8gT3VyIFVUQyB0aW1lIGlzIGp1c3QgYSBndWVzcyBiZWNhdXNlIG91ciBvZmZzZXQgaXMganVzdCBhIGd1ZXNzCiAgICBsZXQgdXRjR3Vlc3MgPSBsb2NhbFRTIC0gbyAqIDYwICogMTAwMDsKCiAgICAvLyBUZXN0IHdoZXRoZXIgdGhlIHpvbmUgbWF0Y2hlcyB0aGUgb2Zmc2V0IGZvciB0aGlzIHRzCiAgICBjb25zdCBvMiA9IHR6Lm9mZnNldCh1dGNHdWVzcyk7CgogICAgLy8gSWYgc28sIG9mZnNldCBkaWRuJ3QgY2hhbmdlIGFuZCB3ZSdyZSBkb25lCiAgICBpZiAobyA9PT0gbzIpIHsKICAgICAgcmV0dXJuIFt1dGNHdWVzcywgb107CiAgICB9CgogICAgLy8gSWYgbm90LCBjaGFuZ2UgdGhlIHRzIGJ5IHRoZSBkaWZmZXJlbmNlIGluIHRoZSBvZmZzZXQKICAgIHV0Y0d1ZXNzIC09IChvMiAtIG8pICogNjAgKiAxMDAwOwoKICAgIC8vIElmIHRoYXQgZ2l2ZXMgdXMgdGhlIGxvY2FsIHRpbWUgd2Ugd2FudCwgd2UncmUgZG9uZQogICAgY29uc3QgbzMgPSB0ei5vZmZzZXQodXRjR3Vlc3MpOwogICAgaWYgKG8yID09PSBvMykgewogICAgICByZXR1cm4gW3V0Y0d1ZXNzLCBvMl07CiAgICB9CgogICAgLy8gSWYgaXQncyBkaWZmZXJlbnQsIHdlJ3JlIGluIGEgaG9sZSB0aW1lLiBUaGUgb2Zmc2V0IGhhcyBjaGFuZ2VkLCBidXQgdGhlIHdlIGRvbid0IGFkanVzdCB0aGUgdGltZQogICAgcmV0dXJuIFtsb2NhbFRTIC0gTWF0aC5taW4obzIsIG8zKSAqIDYwICogMTAwMCwgTWF0aC5tYXgobzIsIG8zKV07CiAgfQoKICAvLyBjb252ZXJ0IGFuIGVwb2NoIHRpbWVzdGFtcCBpbnRvIGEgY2FsZW5kYXIgb2JqZWN0IHdpdGggdGhlIGdpdmVuIG9mZnNldAogIGZ1bmN0aW9uIHRzVG9PYmoodHMsIG9mZnNldCkgewogICAgdHMgKz0gb2Zmc2V0ICogNjAgKiAxMDAwOwoKICAgIGNvbnN0IGQgPSBuZXcgRGF0ZSh0cyk7CgogICAgcmV0dXJuIHsKICAgICAgeWVhcjogZC5nZXRVVENGdWxsWWVhcigpLAogICAgICBtb250aDogZC5nZXRVVENNb250aCgpICsgMSwKICAgICAgZGF5OiBkLmdldFVUQ0RhdGUoKSwKICAgICAgaG91cjogZC5nZXRVVENIb3VycygpLAogICAgICBtaW51dGU6IGQuZ2V0VVRDTWludXRlcygpLAogICAgICBzZWNvbmQ6IGQuZ2V0VVRDU2Vjb25kcygpLAogICAgICBtaWxsaXNlY29uZDogZC5nZXRVVENNaWxsaXNlY29uZHMoKSwKICAgIH07CiAgfQoKICAvLyBjb252ZXJ0IGEgY2FsZW5kYXIgb2JqZWN0IHRvIGEgZXBvY2ggdGltZXN0YW1wCiAgZnVuY3Rpb24gb2JqVG9UUyhvYmosIG9mZnNldCwgem9uZSkgewogICAgcmV0dXJuIGZpeE9mZnNldChvYmpUb0xvY2FsVFMob2JqKSwgb2Zmc2V0LCB6b25lKTsKICB9CgogIC8vIGNyZWF0ZSBhIG5ldyBEVCBpbnN0YW5jZSBieSBhZGRpbmcgYSBkdXJhdGlvbiwgYWRqdXN0aW5nIGZvciBEU1RzCiAgZnVuY3Rpb24gYWRqdXN0VGltZShpbnN0LCBkdXIpIHsKICAgIGNvbnN0IG9QcmUgPSBpbnN0Lm8sCiAgICAgIHllYXIgPSBpbnN0LmMueWVhciArIE1hdGgudHJ1bmMoZHVyLnllYXJzKSwKICAgICAgbW9udGggPSBpbnN0LmMubW9udGggKyBNYXRoLnRydW5jKGR1ci5tb250aHMpICsgTWF0aC50cnVuYyhkdXIucXVhcnRlcnMpICogMywKICAgICAgYyA9IHsKICAgICAgICAuLi5pbnN0LmMsCiAgICAgICAgeWVhciwKICAgICAgICBtb250aCwKICAgICAgICBkYXk6CiAgICAgICAgICBNYXRoLm1pbihpbnN0LmMuZGF5LCBkYXlzSW5Nb250aCh5ZWFyLCBtb250aCkpICsKICAgICAgICAgIE1hdGgudHJ1bmMoZHVyLmRheXMpICsKICAgICAgICAgIE1hdGgudHJ1bmMoZHVyLndlZWtzKSAqIDcsCiAgICAgIH0sCiAgICAgIG1pbGxpc1RvQWRkID0gRHVyYXRpb24uZnJvbU9iamVjdCh7CiAgICAgICAgeWVhcnM6IGR1ci55ZWFycyAtIE1hdGgudHJ1bmMoZHVyLnllYXJzKSwKICAgICAgICBxdWFydGVyczogZHVyLnF1YXJ0ZXJzIC0gTWF0aC50cnVuYyhkdXIucXVhcnRlcnMpLAogICAgICAgIG1vbnRoczogZHVyLm1vbnRocyAtIE1hdGgudHJ1bmMoZHVyLm1vbnRocyksCiAgICAgICAgd2Vla3M6IGR1ci53ZWVrcyAtIE1hdGgudHJ1bmMoZHVyLndlZWtzKSwKICAgICAgICBkYXlzOiBkdXIuZGF5cyAtIE1hdGgudHJ1bmMoZHVyLmRheXMpLAogICAgICAgIGhvdXJzOiBkdXIuaG91cnMsCiAgICAgICAgbWludXRlczogZHVyLm1pbnV0ZXMsCiAgICAgICAgc2Vjb25kczogZHVyLnNlY29uZHMsCiAgICAgICAgbWlsbGlzZWNvbmRzOiBkdXIubWlsbGlzZWNvbmRzLAogICAgICB9KS5hcygibWlsbGlzZWNvbmRzIiksCiAgICAgIGxvY2FsVFMgPSBvYmpUb0xvY2FsVFMoYyk7CgogICAgbGV0IFt0cywgb10gPSBmaXhPZmZzZXQobG9jYWxUUywgb1ByZSwgaW5zdC56b25lKTsKCiAgICBpZiAobWlsbGlzVG9BZGQgIT09IDApIHsKICAgICAgdHMgKz0gbWlsbGlzVG9BZGQ7CiAgICAgIC8vIHRoYXQgY291bGQgaGF2ZSBjaGFuZ2VkIHRoZSBvZmZzZXQgYnkgZ29pbmcgb3ZlciBhIERTVCwgYnV0IHdlIHdhbnQgdG8ga2VlcCB0aGUgdHMgdGhlIHNhbWUKICAgICAgbyA9IGluc3Quem9uZS5vZmZzZXQodHMpOwogICAgfQoKICAgIHJldHVybiB7IHRzLCBvIH07CiAgfQoKICAvLyBoZWxwZXIgdXNlZnVsIGluIHR1cm5pbmcgdGhlIHJlc3VsdHMgb2YgcGFyc2luZyBpbnRvIHJlYWwgZGF0ZXMKICAvLyBieSBoYW5kbGluZyB0aGUgem9uZSBvcHRpb25zCiAgZnVuY3Rpb24gcGFyc2VEYXRhVG9EYXRlVGltZShwYXJzZWQsIHBhcnNlZFpvbmUsIG9wdHMsIGZvcm1hdCwgdGV4dCwgc3BlY2lmaWNPZmZzZXQpIHsKICAgIGNvbnN0IHsgc2V0Wm9uZSwgem9uZSB9ID0gb3B0czsKICAgIGlmIChwYXJzZWQgJiYgT2JqZWN0LmtleXMocGFyc2VkKS5sZW5ndGggIT09IDApIHsKICAgICAgY29uc3QgaW50ZXJwcmV0YXRpb25ab25lID0gcGFyc2VkWm9uZSB8fCB6b25lLAogICAgICAgIGluc3QgPSBEYXRlVGltZS5mcm9tT2JqZWN0KHBhcnNlZCwgewogICAgICAgICAgLi4ub3B0cywKICAgICAgICAgIHpvbmU6IGludGVycHJldGF0aW9uWm9uZSwKICAgICAgICAgIHNwZWNpZmljT2Zmc2V0LAogICAgICAgIH0pOwogICAgICByZXR1cm4gc2V0Wm9uZSA/IGluc3QgOiBpbnN0LnNldFpvbmUoem9uZSk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gRGF0ZVRpbWUuaW52YWxpZCgKICAgICAgICBuZXcgSW52YWxpZCgidW5wYXJzYWJsZSIsIGB0aGUgaW5wdXQgIiR7dGV4dH0iIGNhbid0IGJlIHBhcnNlZCBhcyAke2Zvcm1hdH1gKQogICAgICApOwogICAgfQogIH0KCiAgLy8gaWYgeW91IHdhbnQgdG8gb3V0cHV0IGEgdGVjaG5pY2FsIGZvcm1hdCAoZS5nLiBSRkMgMjgyMiksIHRoaXMgaGVscGVyCiAgLy8gaGVscHMgaGFuZGxlIHRoZSBkZXRhaWxzCiAgZnVuY3Rpb24gdG9UZWNoRm9ybWF0KGR0LCBmb3JtYXQsIGFsbG93WiA9IHRydWUpIHsKICAgIHJldHVybiBkdC5pc1ZhbGlkCiAgICAgID8gRm9ybWF0dGVyLmNyZWF0ZShMb2NhbGUuY3JlYXRlKCJlbi1VUyIpLCB7CiAgICAgICAgICBhbGxvd1osCiAgICAgICAgICBmb3JjZVNpbXBsZTogdHJ1ZSwKICAgICAgICB9KS5mb3JtYXREYXRlVGltZUZyb21TdHJpbmcoZHQsIGZvcm1hdCkKICAgICAgOiBudWxsOwogIH0KCiAgZnVuY3Rpb24gdG9JU09EYXRlKG8sIGV4dGVuZGVkKSB7CiAgICBjb25zdCBsb25nRm9ybWF0ID0gby5jLnllYXIgPiA5OTk5IHx8IG8uYy55ZWFyIDwgMDsKICAgIGxldCBjID0gIiI7CiAgICBpZiAobG9uZ0Zvcm1hdCAmJiBvLmMueWVhciA+PSAwKSBjICs9ICIrIjsKICAgIGMgKz0gcGFkU3RhcnQoby5jLnllYXIsIGxvbmdGb3JtYXQgPyA2IDogNCk7CgogICAgaWYgKGV4dGVuZGVkKSB7CiAgICAgIGMgKz0gIi0iOwogICAgICBjICs9IHBhZFN0YXJ0KG8uYy5tb250aCk7CiAgICAgIGMgKz0gIi0iOwogICAgICBjICs9IHBhZFN0YXJ0KG8uYy5kYXkpOwogICAgfSBlbHNlIHsKICAgICAgYyArPSBwYWRTdGFydChvLmMubW9udGgpOwogICAgICBjICs9IHBhZFN0YXJ0KG8uYy5kYXkpOwogICAgfQogICAgcmV0dXJuIGM7CiAgfQoKICBmdW5jdGlvbiB0b0lTT1RpbWUoCiAgICBvLAogICAgZXh0ZW5kZWQsCiAgICBzdXBwcmVzc1NlY29uZHMsCiAgICBzdXBwcmVzc01pbGxpc2Vjb25kcywKICAgIGluY2x1ZGVPZmZzZXQsCiAgICBleHRlbmRlZFpvbmUKICApIHsKICAgIGxldCBjID0gcGFkU3RhcnQoby5jLmhvdXIpOwogICAgaWYgKGV4dGVuZGVkKSB7CiAgICAgIGMgKz0gIjoiOwogICAgICBjICs9IHBhZFN0YXJ0KG8uYy5taW51dGUpOwogICAgICBpZiAoby5jLnNlY29uZCAhPT0gMCB8fCAhc3VwcHJlc3NTZWNvbmRzKSB7CiAgICAgICAgYyArPSAiOiI7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIGMgKz0gcGFkU3RhcnQoby5jLm1pbnV0ZSk7CiAgICB9CgogICAgaWYgKG8uYy5zZWNvbmQgIT09IDAgfHwgIXN1cHByZXNzU2Vjb25kcykgewogICAgICBjICs9IHBhZFN0YXJ0KG8uYy5zZWNvbmQpOwoKICAgICAgaWYgKG8uYy5taWxsaXNlY29uZCAhPT0gMCB8fCAhc3VwcHJlc3NNaWxsaXNlY29uZHMpIHsKICAgICAgICBjICs9ICIuIjsKICAgICAgICBjICs9IHBhZFN0YXJ0KG8uYy5taWxsaXNlY29uZCwgMyk7CiAgICAgIH0KICAgIH0KCiAgICBpZiAoaW5jbHVkZU9mZnNldCkgewogICAgICBpZiAoby5pc09mZnNldEZpeGVkICYmIG8ub2Zmc2V0ID09PSAwICYmICFleHRlbmRlZFpvbmUpIHsKICAgICAgICBjICs9ICJaIjsKICAgICAgfSBlbHNlIGlmIChvLm8gPCAwKSB7CiAgICAgICAgYyArPSAiLSI7CiAgICAgICAgYyArPSBwYWRTdGFydChNYXRoLnRydW5jKC1vLm8gLyA2MCkpOwogICAgICAgIGMgKz0gIjoiOwogICAgICAgIGMgKz0gcGFkU3RhcnQoTWF0aC50cnVuYygtby5vICUgNjApKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjICs9ICIrIjsKICAgICAgICBjICs9IHBhZFN0YXJ0KE1hdGgudHJ1bmMoby5vIC8gNjApKTsKICAgICAgICBjICs9ICI6IjsKICAgICAgICBjICs9IHBhZFN0YXJ0KE1hdGgudHJ1bmMoby5vICUgNjApKTsKICAgICAgfQogICAgfQoKICAgIGlmIChleHRlbmRlZFpvbmUpIHsKICAgICAgYyArPSAiWyIgKyBvLnpvbmUuaWFuYU5hbWUgKyAiXSI7CiAgICB9CiAgICByZXR1cm4gYzsKICB9CgogIC8vIGRlZmF1bHRzIGZvciB1bnNwZWNpZmllZCB1bml0cyBpbiB0aGUgc3VwcG9ydGVkIGNhbGVuZGFycwogIGNvbnN0IGRlZmF1bHRVbml0VmFsdWVzID0gewogICAgICBtb250aDogMSwKICAgICAgZGF5OiAxLAogICAgICBob3VyOiAwLAogICAgICBtaW51dGU6IDAsCiAgICAgIHNlY29uZDogMCwKICAgICAgbWlsbGlzZWNvbmQ6IDAsCiAgICB9LAogICAgZGVmYXVsdFdlZWtVbml0VmFsdWVzID0gewogICAgICB3ZWVrTnVtYmVyOiAxLAogICAgICB3ZWVrZGF5OiAxLAogICAgICBob3VyOiAwLAogICAgICBtaW51dGU6IDAsCiAgICAgIHNlY29uZDogMCwKICAgICAgbWlsbGlzZWNvbmQ6IDAsCiAgICB9LAogICAgZGVmYXVsdE9yZGluYWxVbml0VmFsdWVzID0gewogICAgICBvcmRpbmFsOiAxLAogICAgICBob3VyOiAwLAogICAgICBtaW51dGU6IDAsCiAgICAgIHNlY29uZDogMCwKICAgICAgbWlsbGlzZWNvbmQ6IDAsCiAgICB9OwoKICAvLyBVbml0cyBpbiB0aGUgc3VwcG9ydGVkIGNhbGVuZGFycywgc29ydGVkIGJ5IGJpZ25lc3MKICBjb25zdCBvcmRlcmVkVW5pdHMgPSBbInllYXIiLCAibW9udGgiLCAiZGF5IiwgImhvdXIiLCAibWludXRlIiwgInNlY29uZCIsICJtaWxsaXNlY29uZCJdLAogICAgb3JkZXJlZFdlZWtVbml0cyA9IFsKICAgICAgIndlZWtZZWFyIiwKICAgICAgIndlZWtOdW1iZXIiLAogICAgICAid2Vla2RheSIsCiAgICAgICJob3VyIiwKICAgICAgIm1pbnV0ZSIsCiAgICAgICJzZWNvbmQiLAogICAgICAibWlsbGlzZWNvbmQiLAogICAgXSwKICAgIG9yZGVyZWRPcmRpbmFsVW5pdHMgPSBbInllYXIiLCAib3JkaW5hbCIsICJob3VyIiwgIm1pbnV0ZSIsICJzZWNvbmQiLCAibWlsbGlzZWNvbmQiXTsKCiAgLy8gc3RhbmRhcmRpemUgY2FzZSBhbmQgcGx1cmFsaXR5IGluIHVuaXRzCiAgZnVuY3Rpb24gbm9ybWFsaXplVW5pdCh1bml0KSB7CiAgICBjb25zdCBub3JtYWxpemVkID0gewogICAgICB5ZWFyOiAieWVhciIsCiAgICAgIHllYXJzOiAieWVhciIsCiAgICAgIG1vbnRoOiAibW9udGgiLAogICAgICBtb250aHM6ICJtb250aCIsCiAgICAgIGRheTogImRheSIsCiAgICAgIGRheXM6ICJkYXkiLAogICAgICBob3VyOiAiaG91ciIsCiAgICAgIGhvdXJzOiAiaG91ciIsCiAgICAgIG1pbnV0ZTogIm1pbnV0ZSIsCiAgICAgIG1pbnV0ZXM6ICJtaW51dGUiLAogICAgICBxdWFydGVyOiAicXVhcnRlciIsCiAgICAgIHF1YXJ0ZXJzOiAicXVhcnRlciIsCiAgICAgIHNlY29uZDogInNlY29uZCIsCiAgICAgIHNlY29uZHM6ICJzZWNvbmQiLAogICAgICBtaWxsaXNlY29uZDogIm1pbGxpc2Vjb25kIiwKICAgICAgbWlsbGlzZWNvbmRzOiAibWlsbGlzZWNvbmQiLAogICAgICB3ZWVrZGF5OiAid2Vla2RheSIsCiAgICAgIHdlZWtkYXlzOiAid2Vla2RheSIsCiAgICAgIHdlZWtudW1iZXI6ICJ3ZWVrTnVtYmVyIiwKICAgICAgd2Vla3NudW1iZXI6ICJ3ZWVrTnVtYmVyIiwKICAgICAgd2Vla251bWJlcnM6ICJ3ZWVrTnVtYmVyIiwKICAgICAgd2Vla3llYXI6ICJ3ZWVrWWVhciIsCiAgICAgIHdlZWt5ZWFyczogIndlZWtZZWFyIiwKICAgICAgb3JkaW5hbDogIm9yZGluYWwiLAogICAgfVt1bml0LnRvTG93ZXJDYXNlKCldOwoKICAgIGlmICghbm9ybWFsaXplZCkgdGhyb3cgbmV3IEludmFsaWRVbml0RXJyb3IodW5pdCk7CgogICAgcmV0dXJuIG5vcm1hbGl6ZWQ7CiAgfQoKICAvLyB0aGlzIGlzIGEgZHVtYmVkIGRvd24gdmVyc2lvbiBvZiBmcm9tT2JqZWN0KCkgdGhhdCBydW5zIGFib3V0IDYwJSBmYXN0ZXIKICAvLyBidXQgZG9lc24ndCBkbyBhbnkgdmFsaWRhdGlvbiwgbWFrZXMgYSBidW5jaCBvZiBhc3N1bXB0aW9ucyBhYm91dCB3aGF0IHVuaXRzCiAgLy8gYXJlIHByZXNlbnQsIGFuZCBzbyBvbi4KICBmdW5jdGlvbiBxdWlja0RUKG9iaiwgb3B0cykgewogICAgY29uc3Qgem9uZSA9IG5vcm1hbGl6ZVpvbmUob3B0cy56b25lLCBTZXR0aW5ncy5kZWZhdWx0Wm9uZSksCiAgICAgIGxvYyA9IExvY2FsZS5mcm9tT2JqZWN0KG9wdHMpLAogICAgICB0c05vdyA9IFNldHRpbmdzLm5vdygpOwoKICAgIGxldCB0cywgbzsKCiAgICAvLyBhc3N1bWUgd2UgaGF2ZSB0aGUgaGlnaGVyLW9yZGVyIHVuaXRzCiAgICBpZiAoIWlzVW5kZWZpbmVkKG9iai55ZWFyKSkgewogICAgICBmb3IgKGNvbnN0IHUgb2Ygb3JkZXJlZFVuaXRzKSB7CiAgICAgICAgaWYgKGlzVW5kZWZpbmVkKG9ialt1XSkpIHsKICAgICAgICAgIG9ialt1XSA9IGRlZmF1bHRVbml0VmFsdWVzW3VdOwogICAgICAgIH0KICAgICAgfQoKICAgICAgY29uc3QgaW52YWxpZCA9IGhhc0ludmFsaWRHcmVnb3JpYW5EYXRhKG9iaikgfHwgaGFzSW52YWxpZFRpbWVEYXRhKG9iaik7CiAgICAgIGlmIChpbnZhbGlkKSB7CiAgICAgICAgcmV0dXJuIERhdGVUaW1lLmludmFsaWQoaW52YWxpZCk7CiAgICAgIH0KCiAgICAgIGNvbnN0IG9mZnNldFByb3ZpcyA9IHpvbmUub2Zmc2V0KHRzTm93KTsKICAgICAgW3RzLCBvXSA9IG9ialRvVFMob2JqLCBvZmZzZXRQcm92aXMsIHpvbmUpOwogICAgfSBlbHNlIHsKICAgICAgdHMgPSB0c05vdzsKICAgIH0KCiAgICByZXR1cm4gbmV3IERhdGVUaW1lKHsgdHMsIHpvbmUsIGxvYywgbyB9KTsKICB9CgogIGZ1bmN0aW9uIGRpZmZSZWxhdGl2ZShzdGFydCwgZW5kLCBvcHRzKSB7CiAgICBjb25zdCByb3VuZCA9IGlzVW5kZWZpbmVkKG9wdHMucm91bmQpID8gdHJ1ZSA6IG9wdHMucm91bmQsCiAgICAgIGZvcm1hdCA9IChjLCB1bml0KSA9PiB7CiAgICAgICAgYyA9IHJvdW5kVG8oYywgcm91bmQgfHwgb3B0cy5jYWxlbmRhcnkgPyAwIDogMiwgdHJ1ZSk7CiAgICAgICAgY29uc3QgZm9ybWF0dGVyID0gZW5kLmxvYy5jbG9uZShvcHRzKS5yZWxGb3JtYXR0ZXIob3B0cyk7CiAgICAgICAgcmV0dXJuIGZvcm1hdHRlci5mb3JtYXQoYywgdW5pdCk7CiAgICAgIH0sCiAgICAgIGRpZmZlciA9ICh1bml0KSA9PiB7CiAgICAgICAgaWYgKG9wdHMuY2FsZW5kYXJ5KSB7CiAgICAgICAgICBpZiAoIWVuZC5oYXNTYW1lKHN0YXJ0LCB1bml0KSkgewogICAgICAgICAgICByZXR1cm4gZW5kLnN0YXJ0T2YodW5pdCkuZGlmZihzdGFydC5zdGFydE9mKHVuaXQpLCB1bml0KS5nZXQodW5pdCk7CiAgICAgICAgICB9IGVsc2UgcmV0dXJuIDA7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBlbmQuZGlmZihzdGFydCwgdW5pdCkuZ2V0KHVuaXQpOwogICAgICAgIH0KICAgICAgfTsKCiAgICBpZiAob3B0cy51bml0KSB7CiAgICAgIHJldHVybiBmb3JtYXQoZGlmZmVyKG9wdHMudW5pdCksIG9wdHMudW5pdCk7CiAgICB9CgogICAgZm9yIChjb25zdCB1bml0IG9mIG9wdHMudW5pdHMpIHsKICAgICAgY29uc3QgY291bnQgPSBkaWZmZXIodW5pdCk7CiAgICAgIGlmIChNYXRoLmFicyhjb3VudCkgPj0gMSkgewogICAgICAgIHJldHVybiBmb3JtYXQoY291bnQsIHVuaXQpOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gZm9ybWF0KHN0YXJ0ID4gZW5kID8gLTAgOiAwLCBvcHRzLnVuaXRzW29wdHMudW5pdHMubGVuZ3RoIC0gMV0pOwogIH0KCiAgZnVuY3Rpb24gbGFzdE9wdHMoYXJnTGlzdCkgewogICAgbGV0IG9wdHMgPSB7fSwKICAgICAgYXJnczsKICAgIGlmIChhcmdMaXN0Lmxlbmd0aCA+IDAgJiYgdHlwZW9mIGFyZ0xpc3RbYXJnTGlzdC5sZW5ndGggLSAxXSA9PT0gIm9iamVjdCIpIHsKICAgICAgb3B0cyA9IGFyZ0xpc3RbYXJnTGlzdC5sZW5ndGggLSAxXTsKICAgICAgYXJncyA9IEFycmF5LmZyb20oYXJnTGlzdCkuc2xpY2UoMCwgYXJnTGlzdC5sZW5ndGggLSAxKTsKICAgIH0gZWxzZSB7CiAgICAgIGFyZ3MgPSBBcnJheS5mcm9tKGFyZ0xpc3QpOwogICAgfQogICAgcmV0dXJuIFtvcHRzLCBhcmdzXTsKICB9CgogIC8qKgogICAqIEEgRGF0ZVRpbWUgaXMgYW4gaW1tdXRhYmxlIGRhdGEgc3RydWN0dXJlIHJlcHJlc2VudGluZyBhIHNwZWNpZmljIGRhdGUgYW5kIHRpbWUgYW5kIGFjY29tcGFueWluZyBtZXRob2RzLiBJdCBjb250YWlucyBjbGFzcyBhbmQgaW5zdGFuY2UgbWV0aG9kcyBmb3IgY3JlYXRpbmcsIHBhcnNpbmcsIGludGVycm9nYXRpbmcsIHRyYW5zZm9ybWluZywgYW5kIGZvcm1hdHRpbmcgdGhlbS4KICAgKgogICAqIEEgRGF0ZVRpbWUgY29tcHJpc2VzIG9mOgogICAqICogQSB0aW1lc3RhbXAuIEVhY2ggRGF0ZVRpbWUgaW5zdGFuY2UgcmVmZXJzIHRvIGEgc3BlY2lmaWMgbWlsbGlzZWNvbmQgb2YgdGhlIFVuaXggZXBvY2guCiAgICogKiBBIHRpbWUgem9uZS4gRWFjaCBpbnN0YW5jZSBpcyBjb25zaWRlcmVkIGluIHRoZSBjb250ZXh0IG9mIGEgc3BlY2lmaWMgem9uZSAoYnkgZGVmYXVsdCB0aGUgbG9jYWwgc3lzdGVtJ3Mgem9uZSkuCiAgICogKiBDb25maWd1cmF0aW9uIHByb3BlcnRpZXMgdGhhdCBlZmZlY3QgaG93IG91dHB1dCBzdHJpbmdzIGFyZSBmb3JtYXR0ZWQsIHN1Y2ggYXMgYGxvY2FsZWAsIGBudW1iZXJpbmdTeXN0ZW1gLCBhbmQgYG91dHB1dENhbGVuZGFyYC4KICAgKgogICAqIEhlcmUgaXMgYSBicmllZiBvdmVydmlldyBvZiB0aGUgbW9zdCBjb21tb25seSB1c2VkIGZ1bmN0aW9uYWxpdHkgaXQgcHJvdmlkZXM6CiAgICoKICAgKiAqICoqQ3JlYXRpb24qKjogVG8gY3JlYXRlIGEgRGF0ZVRpbWUgZnJvbSBpdHMgY29tcG9uZW50cywgdXNlIG9uZSBvZiBpdHMgZmFjdG9yeSBjbGFzcyBtZXRob2RzOiB7QGxpbmsgRGF0ZVRpbWUubG9jYWx9LCB7QGxpbmsgRGF0ZVRpbWUudXRjfSwgYW5kIChtb3N0IGZsZXhpYmx5KSB7QGxpbmsgRGF0ZVRpbWUuZnJvbU9iamVjdH0uIFRvIGNyZWF0ZSBvbmUgZnJvbSBhIHN0YW5kYXJkIHN0cmluZyBmb3JtYXQsIHVzZSB7QGxpbmsgRGF0ZVRpbWUuZnJvbUlTT30sIHtAbGluayBEYXRlVGltZS5mcm9tSFRUUH0sIGFuZCB7QGxpbmsgRGF0ZVRpbWUuZnJvbVJGQzI4MjJ9LiBUbyBjcmVhdGUgb25lIGZyb20gYSBjdXN0b20gc3RyaW5nIGZvcm1hdCwgdXNlIHtAbGluayBEYXRlVGltZS5mcm9tRm9ybWF0fS4gVG8gY3JlYXRlIG9uZSBmcm9tIGEgbmF0aXZlIEpTIGRhdGUsIHVzZSB7QGxpbmsgRGF0ZVRpbWUuZnJvbUpTRGF0ZX0uCiAgICogKiAqKkdyZWdvcmlhbiBjYWxlbmRhciBhbmQgdGltZSoqOiBUbyBleGFtaW5lIHRoZSBHcmVnb3JpYW4gcHJvcGVydGllcyBvZiBhIERhdGVUaW1lIGluZGl2aWR1YWxseSAoaS5lIGFzIG9wcG9zZWQgdG8gY29sbGVjdGl2ZWx5IHRocm91Z2gge0BsaW5rIERhdGVUaW1lI3RvT2JqZWN0fSksIHVzZSB0aGUge0BsaW5rIERhdGVUaW1lI3llYXJ9LCB7QGxpbmsgRGF0ZVRpbWUjbW9udGh9LAogICAqIHtAbGluayBEYXRlVGltZSNkYXl9LCB7QGxpbmsgRGF0ZVRpbWUjaG91cn0sIHtAbGluayBEYXRlVGltZSNtaW51dGV9LCB7QGxpbmsgRGF0ZVRpbWUjc2Vjb25kfSwge0BsaW5rIERhdGVUaW1lI21pbGxpc2Vjb25kfSBhY2Nlc3NvcnMuCiAgICogKiAqKldlZWsgY2FsZW5kYXIqKjogRm9yIElTTyB3ZWVrIGNhbGVuZGFyIGF0dHJpYnV0ZXMsIHNlZSB0aGUge0BsaW5rIERhdGVUaW1lI3dlZWtZZWFyfSwge0BsaW5rIERhdGVUaW1lI3dlZWtOdW1iZXJ9LCBhbmQge0BsaW5rIERhdGVUaW1lI3dlZWtkYXl9IGFjY2Vzc29ycy4KICAgKiAqICoqQ29uZmlndXJhdGlvbioqIFNlZSB0aGUge0BsaW5rIERhdGVUaW1lI2xvY2FsZX0gYW5kIHtAbGluayBEYXRlVGltZSNudW1iZXJpbmdTeXN0ZW19IGFjY2Vzc29ycy4KICAgKiAqICoqVHJhbnNmb3JtYXRpb24qKjogVG8gdHJhbnNmb3JtIHRoZSBEYXRlVGltZSBpbnRvIG90aGVyIERhdGVUaW1lcywgdXNlIHtAbGluayBEYXRlVGltZSNzZXR9LCB7QGxpbmsgRGF0ZVRpbWUjcmVjb25maWd1cmV9LCB7QGxpbmsgRGF0ZVRpbWUjc2V0Wm9uZX0sIHtAbGluayBEYXRlVGltZSNzZXRMb2NhbGV9LCB7QGxpbmsgRGF0ZVRpbWUucGx1c30sIHtAbGluayBEYXRlVGltZSNtaW51c30sIHtAbGluayBEYXRlVGltZSNlbmRPZn0sIHtAbGluayBEYXRlVGltZSNzdGFydE9mfSwge0BsaW5rIERhdGVUaW1lI3RvVVRDfSwgYW5kIHtAbGluayBEYXRlVGltZSN0b0xvY2FsfS4KICAgKiAqICoqT3V0cHV0Kio6IFRvIGNvbnZlcnQgdGhlIERhdGVUaW1lIHRvIG90aGVyIHJlcHJlc2VudGF0aW9ucywgdXNlIHRoZSB7QGxpbmsgRGF0ZVRpbWUjdG9SZWxhdGl2ZX0sIHtAbGluayBEYXRlVGltZSN0b1JlbGF0aXZlQ2FsZW5kYXJ9LCB7QGxpbmsgRGF0ZVRpbWUjdG9KU09OfSwge0BsaW5rIERhdGVUaW1lI3RvSVNPfSwge0BsaW5rIERhdGVUaW1lI3RvSFRUUH0sIHtAbGluayBEYXRlVGltZSN0b09iamVjdH0sIHtAbGluayBEYXRlVGltZSN0b1JGQzI4MjJ9LCB7QGxpbmsgRGF0ZVRpbWUjdG9TdHJpbmd9LCB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbGVTdHJpbmd9LCB7QGxpbmsgRGF0ZVRpbWUjdG9Gb3JtYXR9LCB7QGxpbmsgRGF0ZVRpbWUjdG9NaWxsaXN9IGFuZCB7QGxpbmsgRGF0ZVRpbWUjdG9KU0RhdGV9LgogICAqCiAgICogVGhlcmUncyBwbGVudHkgb3RoZXJzIGRvY3VtZW50ZWQgYmVsb3cuIEluIGFkZGl0aW9uLCBmb3IgbW9yZSBpbmZvcm1hdGlvbiBvbiBzdWJ0bGVyIHRvcGljcyBsaWtlIGludGVybmF0aW9uYWxpemF0aW9uLCB0aW1lIHpvbmVzLCBhbHRlcm5hdGl2ZSBjYWxlbmRhcnMsIHZhbGlkaXR5LCBhbmQgc28gb24sIHNlZSB0aGUgZXh0ZXJuYWwgZG9jdW1lbnRhdGlvbi4KICAgKi8KICBjbGFzcyBEYXRlVGltZSB7CiAgICAvKioKICAgICAqIEBhY2Nlc3MgcHJpdmF0ZQogICAgICovCiAgICBjb25zdHJ1Y3Rvcihjb25maWcpIHsKICAgICAgY29uc3Qgem9uZSA9IGNvbmZpZy56b25lIHx8IFNldHRpbmdzLmRlZmF1bHRab25lOwoKICAgICAgbGV0IGludmFsaWQgPQogICAgICAgIGNvbmZpZy5pbnZhbGlkIHx8CiAgICAgICAgKE51bWJlci5pc05hTihjb25maWcudHMpID8gbmV3IEludmFsaWQoImludmFsaWQgaW5wdXQiKSA6IG51bGwpIHx8CiAgICAgICAgKCF6b25lLmlzVmFsaWQgPyB1bnN1cHBvcnRlZFpvbmUoem9uZSkgOiBudWxsKTsKICAgICAgLyoqCiAgICAgICAqIEBhY2Nlc3MgcHJpdmF0ZQogICAgICAgKi8KICAgICAgdGhpcy50cyA9IGlzVW5kZWZpbmVkKGNvbmZpZy50cykgPyBTZXR0aW5ncy5ub3coKSA6IGNvbmZpZy50czsKCiAgICAgIGxldCBjID0gbnVsbCwKICAgICAgICBvID0gbnVsbDsKICAgICAgaWYgKCFpbnZhbGlkKSB7CiAgICAgICAgY29uc3QgdW5jaGFuZ2VkID0gY29uZmlnLm9sZCAmJiBjb25maWcub2xkLnRzID09PSB0aGlzLnRzICYmIGNvbmZpZy5vbGQuem9uZS5lcXVhbHMoem9uZSk7CgogICAgICAgIGlmICh1bmNoYW5nZWQpIHsKICAgICAgICAgIFtjLCBvXSA9IFtjb25maWcub2xkLmMsIGNvbmZpZy5vbGQub107CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnN0IG90ID0gem9uZS5vZmZzZXQodGhpcy50cyk7CiAgICAgICAgICBjID0gdHNUb09iaih0aGlzLnRzLCBvdCk7CiAgICAgICAgICBpbnZhbGlkID0gTnVtYmVyLmlzTmFOKGMueWVhcikgPyBuZXcgSW52YWxpZCgiaW52YWxpZCBpbnB1dCIpIDogbnVsbDsKICAgICAgICAgIGMgPSBpbnZhbGlkID8gbnVsbCA6IGM7CiAgICAgICAgICBvID0gaW52YWxpZCA/IG51bGwgOiBvdDsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIC8qKgogICAgICAgKiBAYWNjZXNzIHByaXZhdGUKICAgICAgICovCiAgICAgIHRoaXMuX3pvbmUgPSB6b25lOwogICAgICAvKioKICAgICAgICogQGFjY2VzcyBwcml2YXRlCiAgICAgICAqLwogICAgICB0aGlzLmxvYyA9IGNvbmZpZy5sb2MgfHwgTG9jYWxlLmNyZWF0ZSgpOwogICAgICAvKioKICAgICAgICogQGFjY2VzcyBwcml2YXRlCiAgICAgICAqLwogICAgICB0aGlzLmludmFsaWQgPSBpbnZhbGlkOwogICAgICAvKioKICAgICAgICogQGFjY2VzcyBwcml2YXRlCiAgICAgICAqLwogICAgICB0aGlzLndlZWtEYXRhID0gbnVsbDsKICAgICAgLyoqCiAgICAgICAqIEBhY2Nlc3MgcHJpdmF0ZQogICAgICAgKi8KICAgICAgdGhpcy5jID0gYzsKICAgICAgLyoqCiAgICAgICAqIEBhY2Nlc3MgcHJpdmF0ZQogICAgICAgKi8KICAgICAgdGhpcy5vID0gbzsKICAgICAgLyoqCiAgICAgICAqIEBhY2Nlc3MgcHJpdmF0ZQogICAgICAgKi8KICAgICAgdGhpcy5pc0x1eG9uRGF0ZVRpbWUgPSB0cnVlOwogICAgfQoKICAgIC8vIENPTlNUUlVDVAoKICAgIC8qKgogICAgICogQ3JlYXRlIGEgRGF0ZVRpbWUgZm9yIHRoZSBjdXJyZW50IGluc3RhbnQsIGluIHRoZSBzeXN0ZW0ncyB0aW1lIHpvbmUuCiAgICAgKgogICAgICogVXNlIFNldHRpbmdzIHRvIG92ZXJyaWRlIHRoZXNlIGRlZmF1bHQgdmFsdWVzIGlmIG5lZWRlZC4KICAgICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnRvSVNPKCkgLy9+PiBub3cgaW4gdGhlIElTTyBmb3JtYXQKICAgICAqIEByZXR1cm4ge0RhdGVUaW1lfQogICAgICovCiAgICBzdGF0aWMgbm93KCkgewogICAgICByZXR1cm4gbmV3IERhdGVUaW1lKHt9KTsKICAgIH0KCiAgICAvKioKICAgICAqIENyZWF0ZSBhIGxvY2FsIERhdGVUaW1lCiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3llYXJdIC0gVGhlIGNhbGVuZGFyIHllYXIuIElmIG9taXR0ZWQgKGFzIGluLCBjYWxsIGBsb2NhbCgpYCB3aXRoIG5vIGFyZ3VtZW50cyksIHRoZSBjdXJyZW50IHRpbWUgd2lsbCBiZSB1c2VkCiAgICAgKiBAcGFyYW0ge251bWJlcn0gW21vbnRoPTFdIC0gVGhlIG1vbnRoLCAxLWluZGV4ZWQKICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbZGF5PTFdIC0gVGhlIGRheSBvZiB0aGUgbW9udGgsIDEtaW5kZXhlZAogICAgICogQHBhcmFtIHtudW1iZXJ9IFtob3VyPTBdIC0gVGhlIGhvdXIgb2YgdGhlIGRheSwgaW4gMjQtaG91ciB0aW1lCiAgICAgKiBAcGFyYW0ge251bWJlcn0gW21pbnV0ZT0wXSAtIFRoZSBtaW51dGUgb2YgdGhlIGhvdXIsIG1lYW5pbmcgYSBudW1iZXIgYmV0d2VlbiAwIGFuZCA1OQogICAgICogQHBhcmFtIHtudW1iZXJ9IFtzZWNvbmQ9MF0gLSBUaGUgc2Vjb25kIG9mIHRoZSBtaW51dGUsIG1lYW5pbmcgYSBudW1iZXIgYmV0d2VlbiAwIGFuZCA1OQogICAgICogQHBhcmFtIHtudW1iZXJ9IFttaWxsaXNlY29uZD0wXSAtIFRoZSBtaWxsaXNlY29uZCBvZiB0aGUgc2Vjb25kLCBtZWFuaW5nIGEgbnVtYmVyIGJldHdlZW4gMCBhbmQgOTk5CiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vfj4gbm93CiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCh7IHpvbmU6ICJBbWVyaWNhL05ld19Zb3JrIiB9KSAgICAgIC8vfj4gbm93LCBpbiBVUyBlYXN0IGNvYXN0IHRpbWUKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9+PiAyMDE3LTAxLTAxVDAwOjAwOjAwCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCAzKSAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vfj4gMjAxNy0wMy0wMVQwMDowMDowMAogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgMywgMTIsIHsgbG9jYWxlOiAiZnIiIH0pICAgICAvL34+IDIwMTctMDMtMTJUMDA6MDA6MDAsIHdpdGggYSBGcmVuY2ggbG9jYWxlCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCAzLCAxMiwgNSkgICAgICAgICAgICAgICAgICAgIC8vfj4gMjAxNy0wMy0xMlQwNTowMDowMAogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgMywgMTIsIDUsIHsgem9uZTogInV0YyIgfSkgICAvL34+IDIwMTctMDMtMTJUMDU6MDA6MDAsIGluIFVUQwogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgMywgMTIsIDUsIDQ1KSAgICAgICAgICAgICAgICAvL34+IDIwMTctMDMtMTJUMDU6NDU6MDAKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDMsIDEyLCA1LCA0NSwgMTApICAgICAgICAgICAgLy9+PiAyMDE3LTAzLTEyVDA1OjQ1OjEwCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCAzLCAxMiwgNSwgNDUsIDEwLCA3NjUpICAgICAgIC8vfj4gMjAxNy0wMy0xMlQwNTo0NToxMC43NjUKICAgICAqIEByZXR1cm4ge0RhdGVUaW1lfQogICAgICovCiAgICBzdGF0aWMgbG9jYWwoKSB7CiAgICAgIGNvbnN0IFtvcHRzLCBhcmdzXSA9IGxhc3RPcHRzKGFyZ3VtZW50cyksCiAgICAgICAgW3llYXIsIG1vbnRoLCBkYXksIGhvdXIsIG1pbnV0ZSwgc2Vjb25kLCBtaWxsaXNlY29uZF0gPSBhcmdzOwogICAgICByZXR1cm4gcXVpY2tEVCh7IHllYXIsIG1vbnRoLCBkYXksIGhvdXIsIG1pbnV0ZSwgc2Vjb25kLCBtaWxsaXNlY29uZCB9LCBvcHRzKTsKICAgIH0KCiAgICAvKioKICAgICAqIENyZWF0ZSBhIERhdGVUaW1lIGluIFVUQwogICAgICogQHBhcmFtIHtudW1iZXJ9IFt5ZWFyXSAtIFRoZSBjYWxlbmRhciB5ZWFyLiBJZiBvbWl0dGVkIChhcyBpbiwgY2FsbCBgdXRjKClgIHdpdGggbm8gYXJndW1lbnRzKSwgdGhlIGN1cnJlbnQgdGltZSB3aWxsIGJlIHVzZWQKICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbbW9udGg9MV0gLSBUaGUgbW9udGgsIDEtaW5kZXhlZAogICAgICogQHBhcmFtIHtudW1iZXJ9IFtkYXk9MV0gLSBUaGUgZGF5IG9mIHRoZSBtb250aAogICAgICogQHBhcmFtIHtudW1iZXJ9IFtob3VyPTBdIC0gVGhlIGhvdXIgb2YgdGhlIGRheSwgaW4gMjQtaG91ciB0aW1lCiAgICAgKiBAcGFyYW0ge251bWJlcn0gW21pbnV0ZT0wXSAtIFRoZSBtaW51dGUgb2YgdGhlIGhvdXIsIG1lYW5pbmcgYSBudW1iZXIgYmV0d2VlbiAwIGFuZCA1OQogICAgICogQHBhcmFtIHtudW1iZXJ9IFtzZWNvbmQ9MF0gLSBUaGUgc2Vjb25kIG9mIHRoZSBtaW51dGUsIG1lYW5pbmcgYSBudW1iZXIgYmV0d2VlbiAwIGFuZCA1OQogICAgICogQHBhcmFtIHtudW1iZXJ9IFttaWxsaXNlY29uZD0wXSAtIFRoZSBtaWxsaXNlY29uZCBvZiB0aGUgc2Vjb25kLCBtZWFuaW5nIGEgbnVtYmVyIGJldHdlZW4gMCBhbmQgOTk5CiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIGNvbmZpZ3VyYXRpb24gb3B0aW9ucyBmb3IgdGhlIERhdGVUaW1lCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMubG9jYWxlXSAtIGEgbG9jYWxlIHRvIHNldCBvbiB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGluc3RhbmNlCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMub3V0cHV0Q2FsZW5kYXJdIC0gdGhlIG91dHB1dCBjYWxlbmRhciB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZQogICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLm51bWJlcmluZ1N5c3RlbV0gLSB0aGUgbnVtYmVyaW5nIHN5c3RlbSB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZQogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9+PiBub3cKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygyMDE3KSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vfj4gMjAxNy0wMS0wMVQwMDowMDowMFoKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygyMDE3LCAzKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vfj4gMjAxNy0wMy0wMVQwMDowMDowMFoKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygyMDE3LCAzLCAxMikgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vfj4gMjAxNy0wMy0xMlQwMDowMDowMFoKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygyMDE3LCAzLCAxMiwgNSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vfj4gMjAxNy0wMy0xMlQwNTowMDowMFoKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygyMDE3LCAzLCAxMiwgNSwgNDUpICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vfj4gMjAxNy0wMy0xMlQwNTo0NTowMFoKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygyMDE3LCAzLCAxMiwgNSwgNDUsIHsgbG9jYWxlOiAiZnIiIH0pICAgICAgICAgIC8vfj4gMjAxNy0wMy0xMlQwNTo0NTowMFogd2l0aCBhIEZyZW5jaCBsb2NhbGUKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygyMDE3LCAzLCAxMiwgNSwgNDUsIDEwKSAgICAgICAgICAgICAgICAgICAgICAgIC8vfj4gMjAxNy0wMy0xMlQwNTo0NToxMFoKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygyMDE3LCAzLCAxMiwgNSwgNDUsIDEwLCA3NjUsIHsgbG9jYWxlOiAiZnIiIH0pIC8vfj4gMjAxNy0wMy0xMlQwNTo0NToxMC43NjVaIHdpdGggYSBGcmVuY2ggbG9jYWxlCiAgICAgKiBAcmV0dXJuIHtEYXRlVGltZX0KICAgICAqLwogICAgc3RhdGljIHV0YygpIHsKICAgICAgY29uc3QgW29wdHMsIGFyZ3NdID0gbGFzdE9wdHMoYXJndW1lbnRzKSwKICAgICAgICBbeWVhciwgbW9udGgsIGRheSwgaG91ciwgbWludXRlLCBzZWNvbmQsIG1pbGxpc2Vjb25kXSA9IGFyZ3M7CgogICAgICBvcHRzLnpvbmUgPSBGaXhlZE9mZnNldFpvbmUudXRjSW5zdGFuY2U7CiAgICAgIHJldHVybiBxdWlja0RUKHsgeWVhciwgbW9udGgsIGRheSwgaG91ciwgbWludXRlLCBzZWNvbmQsIG1pbGxpc2Vjb25kIH0sIG9wdHMpOwogICAgfQoKICAgIC8qKgogICAgICogQ3JlYXRlIGEgRGF0ZVRpbWUgZnJvbSBhIEphdmFTY3JpcHQgRGF0ZSBvYmplY3QuIFVzZXMgdGhlIGRlZmF1bHQgem9uZS4KICAgICAqIEBwYXJhbSB7RGF0ZX0gZGF0ZSAtIGEgSmF2YVNjcmlwdCBEYXRlIG9iamVjdAogICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgLSBjb25maWd1cmF0aW9uIG9wdGlvbnMgZm9yIHRoZSBEYXRlVGltZQogICAgICogQHBhcmFtIHtzdHJpbmd8Wm9uZX0gW29wdGlvbnMuem9uZT0nbG9jYWwnXSAtIHRoZSB6b25lIHRvIHBsYWNlIHRoZSBEYXRlVGltZSBpbnRvCiAgICAgKiBAcmV0dXJuIHtEYXRlVGltZX0KICAgICAqLwogICAgc3RhdGljIGZyb21KU0RhdGUoZGF0ZSwgb3B0aW9ucyA9IHt9KSB7CiAgICAgIGNvbnN0IHRzID0gaXNEYXRlKGRhdGUpID8gZGF0ZS52YWx1ZU9mKCkgOiBOYU47CiAgICAgIGlmIChOdW1iZXIuaXNOYU4odHMpKSB7CiAgICAgICAgcmV0dXJuIERhdGVUaW1lLmludmFsaWQoImludmFsaWQgaW5wdXQiKTsKICAgICAgfQoKICAgICAgY29uc3Qgem9uZVRvVXNlID0gbm9ybWFsaXplWm9uZShvcHRpb25zLnpvbmUsIFNldHRpbmdzLmRlZmF1bHRab25lKTsKICAgICAgaWYgKCF6b25lVG9Vc2UuaXNWYWxpZCkgewogICAgICAgIHJldHVybiBEYXRlVGltZS5pbnZhbGlkKHVuc3VwcG9ydGVkWm9uZSh6b25lVG9Vc2UpKTsKICAgICAgfQoKICAgICAgcmV0dXJuIG5ldyBEYXRlVGltZSh7CiAgICAgICAgdHM6IHRzLAogICAgICAgIHpvbmU6IHpvbmVUb1VzZSwKICAgICAgICBsb2M6IExvY2FsZS5mcm9tT2JqZWN0KG9wdGlvbnMpLAogICAgICB9KTsKICAgIH0KCiAgICAvKioKICAgICAqIENyZWF0ZSBhIERhdGVUaW1lIGZyb20gYSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHNpbmNlIHRoZSBlcG9jaCAobWVhbmluZyBzaW5jZSAxIEphbnVhcnkgMTk3MCAwMDowMDowMCBVVEMpLiBVc2VzIHRoZSBkZWZhdWx0IHpvbmUuCiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWlsbGlzZWNvbmRzIC0gYSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHNpbmNlIDE5NzAgVVRDCiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIGNvbmZpZ3VyYXRpb24gb3B0aW9ucyBmb3IgdGhlIERhdGVUaW1lCiAgICAgKiBAcGFyYW0ge3N0cmluZ3xab25lfSBbb3B0aW9ucy56b25lPSdsb2NhbCddIC0gdGhlIHpvbmUgdG8gcGxhY2UgdGhlIERhdGVUaW1lIGludG8KICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5sb2NhbGVdIC0gYSBsb2NhbGUgdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2UKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLm91dHB1dENhbGVuZGFyIC0gdGhlIG91dHB1dCBjYWxlbmRhciB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZQogICAgICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMubnVtYmVyaW5nU3lzdGVtIC0gdGhlIG51bWJlcmluZyBzeXN0ZW0gdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2UKICAgICAqIEByZXR1cm4ge0RhdGVUaW1lfQogICAgICovCiAgICBzdGF0aWMgZnJvbU1pbGxpcyhtaWxsaXNlY29uZHMsIG9wdGlvbnMgPSB7fSkgewogICAgICBpZiAoIWlzTnVtYmVyJDEobWlsbGlzZWNvbmRzKSkgewogICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcigKICAgICAgICAgIGBmcm9tTWlsbGlzIHJlcXVpcmVzIGEgbnVtZXJpY2FsIGlucHV0LCBidXQgcmVjZWl2ZWQgYSAke3R5cGVvZiBtaWxsaXNlY29uZHN9IHdpdGggdmFsdWUgJHttaWxsaXNlY29uZHN9YAogICAgICAgICk7CiAgICAgIH0gZWxzZSBpZiAobWlsbGlzZWNvbmRzIDwgLU1BWF9EQVRFIHx8IG1pbGxpc2Vjb25kcyA+IE1BWF9EQVRFKSB7CiAgICAgICAgLy8gdGhpcyBpc24ndCBwZXJmZWN0IGJlY2F1c2UgYmVjYXVzZSB3ZSBjYW4gc3RpbGwgZW5kIHVwIG91dCBvZiByYW5nZSBiZWNhdXNlIG9mIGFkZGl0aW9uYWwgc2hpZnRpbmcsIGJ1dCBpdCdzIGEgc3RhcnQKICAgICAgICByZXR1cm4gRGF0ZVRpbWUuaW52YWxpZCgiVGltZXN0YW1wIG91dCBvZiByYW5nZSIpOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBuZXcgRGF0ZVRpbWUoewogICAgICAgICAgdHM6IG1pbGxpc2Vjb25kcywKICAgICAgICAgIHpvbmU6IG5vcm1hbGl6ZVpvbmUob3B0aW9ucy56b25lLCBTZXR0aW5ncy5kZWZhdWx0Wm9uZSksCiAgICAgICAgICBsb2M6IExvY2FsZS5mcm9tT2JqZWN0KG9wdGlvbnMpLAogICAgICAgIH0pOwogICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBDcmVhdGUgYSBEYXRlVGltZSBmcm9tIGEgbnVtYmVyIG9mIHNlY29uZHMgc2luY2UgdGhlIGVwb2NoIChtZWFuaW5nIHNpbmNlIDEgSmFudWFyeSAxOTcwIDAwOjAwOjAwIFVUQykuIFVzZXMgdGhlIGRlZmF1bHQgem9uZS4KICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzZWNvbmRzIC0gYSBudW1iZXIgb2Ygc2Vjb25kcyBzaW5jZSAxOTcwIFVUQwogICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgLSBjb25maWd1cmF0aW9uIG9wdGlvbnMgZm9yIHRoZSBEYXRlVGltZQogICAgICogQHBhcmFtIHtzdHJpbmd8Wm9uZX0gW29wdGlvbnMuem9uZT0nbG9jYWwnXSAtIHRoZSB6b25lIHRvIHBsYWNlIHRoZSBEYXRlVGltZSBpbnRvCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMubG9jYWxlXSAtIGEgbG9jYWxlIHRvIHNldCBvbiB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGluc3RhbmNlCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0aW9ucy5vdXRwdXRDYWxlbmRhciAtIHRoZSBvdXRwdXQgY2FsZW5kYXIgdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2UKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLm51bWJlcmluZ1N5c3RlbSAtIHRoZSBudW1iZXJpbmcgc3lzdGVtIHRvIHNldCBvbiB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGluc3RhbmNlCiAgICAgKiBAcmV0dXJuIHtEYXRlVGltZX0KICAgICAqLwogICAgc3RhdGljIGZyb21TZWNvbmRzKHNlY29uZHMsIG9wdGlvbnMgPSB7fSkgewogICAgICBpZiAoIWlzTnVtYmVyJDEoc2Vjb25kcykpIHsKICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoImZyb21TZWNvbmRzIHJlcXVpcmVzIGEgbnVtZXJpY2FsIGlucHV0Iik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIG5ldyBEYXRlVGltZSh7CiAgICAgICAgICB0czogc2Vjb25kcyAqIDEwMDAsCiAgICAgICAgICB6b25lOiBub3JtYWxpemVab25lKG9wdGlvbnMuem9uZSwgU2V0dGluZ3MuZGVmYXVsdFpvbmUpLAogICAgICAgICAgbG9jOiBMb2NhbGUuZnJvbU9iamVjdChvcHRpb25zKSwKICAgICAgICB9KTsKICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogQ3JlYXRlIGEgRGF0ZVRpbWUgZnJvbSBhIEphdmFTY3JpcHQgb2JqZWN0IHdpdGgga2V5cyBsaWtlICd5ZWFyJyBhbmQgJ2hvdXInIHdpdGggcmVhc29uYWJsZSBkZWZhdWx0cy4KICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmogLSB0aGUgb2JqZWN0IHRvIGNyZWF0ZSB0aGUgRGF0ZVRpbWUgZnJvbQogICAgICogQHBhcmFtIHtudW1iZXJ9IG9iai55ZWFyIC0gYSB5ZWFyLCBzdWNoIGFzIDE5ODcKICAgICAqIEBwYXJhbSB7bnVtYmVyfSBvYmoubW9udGggLSBhIG1vbnRoLCAxLTEyCiAgICAgKiBAcGFyYW0ge251bWJlcn0gb2JqLmRheSAtIGEgZGF5IG9mIHRoZSBtb250aCwgMS0zMSwgZGVwZW5kaW5nIG9uIHRoZSBtb250aAogICAgICogQHBhcmFtIHtudW1iZXJ9IG9iai5vcmRpbmFsIC0gZGF5IG9mIHRoZSB5ZWFyLCAxLTM2NSBvciAzNjYKICAgICAqIEBwYXJhbSB7bnVtYmVyfSBvYmoud2Vla1llYXIgLSBhbiBJU08gd2VlayB5ZWFyCiAgICAgKiBAcGFyYW0ge251bWJlcn0gb2JqLndlZWtOdW1iZXIgLSBhbiBJU08gd2VlayBudW1iZXIsIGJldHdlZW4gMSBhbmQgNTIgb3IgNTMsIGRlcGVuZGluZyBvbiB0aGUgeWVhcgogICAgICogQHBhcmFtIHtudW1iZXJ9IG9iai53ZWVrZGF5IC0gYW4gSVNPIHdlZWtkYXksIDEtNywgd2hlcmUgMSBpcyBNb25kYXkgYW5kIDcgaXMgU3VuZGF5CiAgICAgKiBAcGFyYW0ge251bWJlcn0gb2JqLmhvdXIgLSBob3VyIG9mIHRoZSBkYXksIDAtMjMKICAgICAqIEBwYXJhbSB7bnVtYmVyfSBvYmoubWludXRlIC0gbWludXRlIG9mIHRoZSBob3VyLCAwLTU5CiAgICAgKiBAcGFyYW0ge251bWJlcn0gb2JqLnNlY29uZCAtIHNlY29uZCBvZiB0aGUgbWludXRlLCAwLTU5CiAgICAgKiBAcGFyYW0ge251bWJlcn0gb2JqLm1pbGxpc2Vjb25kIC0gbWlsbGlzZWNvbmQgb2YgdGhlIHNlY29uZCwgMC05OTkKICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9ucyBmb3IgY3JlYXRpbmcgdGhpcyBEYXRlVGltZQogICAgICogQHBhcmFtIHtzdHJpbmd8Wm9uZX0gW29wdHMuem9uZT0nbG9jYWwnXSAtIGludGVycHJldCB0aGUgbnVtYmVycyBpbiB0aGUgY29udGV4dCBvZiBhIHBhcnRpY3VsYXIgem9uZS4gQ2FuIHRha2UgYW55IHZhbHVlIHRha2VuIGFzIHRoZSBmaXJzdCBhcmd1bWVudCB0byBzZXRab25lKCkKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NhbGU9J3N5c3RlbSdzIGxvY2FsZSddIC0gYSBsb2NhbGUgdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2UKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRzLm91dHB1dENhbGVuZGFyIC0gdGhlIG91dHB1dCBjYWxlbmRhciB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZQogICAgICogQHBhcmFtIHtzdHJpbmd9IG9wdHMubnVtYmVyaW5nU3lzdGVtIC0gdGhlIG51bWJlcmluZyBzeXN0ZW0gdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2UKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21PYmplY3QoeyB5ZWFyOiAxOTgyLCBtb250aDogNSwgZGF5OiAyNX0pLnRvSVNPRGF0ZSgpIC8vPT4gJzE5ODItMDUtMjUnCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tT2JqZWN0KHsgeWVhcjogMTk4MiB9KS50b0lTT0RhdGUoKSAvLz0+ICcxOTgyLTAxLTAxJwogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbU9iamVjdCh7IGhvdXI6IDEwLCBtaW51dGU6IDI2LCBzZWNvbmQ6IDYgfSkgLy9+PiB0b2RheSBhdCAxMDoyNjowNgogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbU9iamVjdCh7IGhvdXI6IDEwLCBtaW51dGU6IDI2LCBzZWNvbmQ6IDYgfSwgeyB6b25lOiAndXRjJyB9KSwKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21PYmplY3QoeyBob3VyOiAxMCwgbWludXRlOiAyNiwgc2Vjb25kOiA2IH0sIHsgem9uZTogJ2xvY2FsJyB9KQogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbU9iamVjdCh7IGhvdXI6IDEwLCBtaW51dGU6IDI2LCBzZWNvbmQ6IDYgfSwgeyB6b25lOiAnQW1lcmljYS9OZXdfWW9yaycgfSkKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21PYmplY3QoeyB3ZWVrWWVhcjogMjAxNiwgd2Vla051bWJlcjogMiwgd2Vla2RheTogMyB9KS50b0lTT0RhdGUoKSAvLz0+ICcyMDE2LTAxLTEzJwogICAgICogQHJldHVybiB7RGF0ZVRpbWV9CiAgICAgKi8KICAgIHN0YXRpYyBmcm9tT2JqZWN0KG9iaiwgb3B0cyA9IHt9KSB7CiAgICAgIG9iaiA9IG9iaiB8fCB7fTsKICAgICAgY29uc3Qgem9uZVRvVXNlID0gbm9ybWFsaXplWm9uZShvcHRzLnpvbmUsIFNldHRpbmdzLmRlZmF1bHRab25lKTsKICAgICAgaWYgKCF6b25lVG9Vc2UuaXNWYWxpZCkgewogICAgICAgIHJldHVybiBEYXRlVGltZS5pbnZhbGlkKHVuc3VwcG9ydGVkWm9uZSh6b25lVG9Vc2UpKTsKICAgICAgfQoKICAgICAgY29uc3QgdHNOb3cgPSBTZXR0aW5ncy5ub3coKSwKICAgICAgICBvZmZzZXRQcm92aXMgPSAhaXNVbmRlZmluZWQob3B0cy5zcGVjaWZpY09mZnNldCkKICAgICAgICAgID8gb3B0cy5zcGVjaWZpY09mZnNldAogICAgICAgICAgOiB6b25lVG9Vc2Uub2Zmc2V0KHRzTm93KSwKICAgICAgICBub3JtYWxpemVkID0gbm9ybWFsaXplT2JqZWN0KG9iaiwgbm9ybWFsaXplVW5pdCksCiAgICAgICAgY29udGFpbnNPcmRpbmFsID0gIWlzVW5kZWZpbmVkKG5vcm1hbGl6ZWQub3JkaW5hbCksCiAgICAgICAgY29udGFpbnNHcmVnb3JZZWFyID0gIWlzVW5kZWZpbmVkKG5vcm1hbGl6ZWQueWVhciksCiAgICAgICAgY29udGFpbnNHcmVnb3JNRCA9ICFpc1VuZGVmaW5lZChub3JtYWxpemVkLm1vbnRoKSB8fCAhaXNVbmRlZmluZWQobm9ybWFsaXplZC5kYXkpLAogICAgICAgIGNvbnRhaW5zR3JlZ29yID0gY29udGFpbnNHcmVnb3JZZWFyIHx8IGNvbnRhaW5zR3JlZ29yTUQsCiAgICAgICAgZGVmaW5pdGVXZWVrRGVmID0gbm9ybWFsaXplZC53ZWVrWWVhciB8fCBub3JtYWxpemVkLndlZWtOdW1iZXIsCiAgICAgICAgbG9jID0gTG9jYWxlLmZyb21PYmplY3Qob3B0cyk7CgogICAgICAvLyBjYXNlczoKICAgICAgLy8ganVzdCBhIHdlZWtkYXkgLT4gdGhpcyB3ZWVrJ3MgaW5zdGFuY2Ugb2YgdGhhdCB3ZWVrZGF5LCBubyB3b3JyaWVzCiAgICAgIC8vIChncmVnb3JpYW4gZGF0YSBvciBvcmRpbmFsKSArICh3ZWVrWWVhciBvciB3ZWVrTnVtYmVyKSAtPiBlcnJvcgogICAgICAvLyAoZ3JlZ29yaWFuIG1vbnRoIG9yIGRheSkgKyBvcmRpbmFsIC0+IGVycm9yCiAgICAgIC8vIG90aGVyd2lzZSBqdXN0IHVzZSB3ZWVrcyBvciBvcmRpbmFscyBvciBncmVnb3JpYW4sIGRlcGVuZGluZyBvbiB3aGF0J3Mgc3BlY2lmaWVkCgogICAgICBpZiAoKGNvbnRhaW5zR3JlZ29yIHx8IGNvbnRhaW5zT3JkaW5hbCkgJiYgZGVmaW5pdGVXZWVrRGVmKSB7CiAgICAgICAgdGhyb3cgbmV3IENvbmZsaWN0aW5nU3BlY2lmaWNhdGlvbkVycm9yKAogICAgICAgICAgIkNhbid0IG1peCB3ZWVrWWVhci93ZWVrTnVtYmVyIHVuaXRzIHdpdGggeWVhci9tb250aC9kYXkgb3Igb3JkaW5hbHMiCiAgICAgICAgKTsKICAgICAgfQoKICAgICAgaWYgKGNvbnRhaW5zR3JlZ29yTUQgJiYgY29udGFpbnNPcmRpbmFsKSB7CiAgICAgICAgdGhyb3cgbmV3IENvbmZsaWN0aW5nU3BlY2lmaWNhdGlvbkVycm9yKCJDYW4ndCBtaXggb3JkaW5hbCBkYXRlcyB3aXRoIG1vbnRoL2RheSIpOwogICAgICB9CgogICAgICBjb25zdCB1c2VXZWVrRGF0YSA9IGRlZmluaXRlV2Vla0RlZiB8fCAobm9ybWFsaXplZC53ZWVrZGF5ICYmICFjb250YWluc0dyZWdvcik7CgogICAgICAvLyBjb25maWd1cmUgb3Vyc2VsdmVzIHRvIGRlYWwgd2l0aCBncmVnb3JpYW4gZGF0ZXMgb3Igd2VlayBzdHVmZgogICAgICBsZXQgdW5pdHMsCiAgICAgICAgZGVmYXVsdFZhbHVlcywKICAgICAgICBvYmpOb3cgPSB0c1RvT2JqKHRzTm93LCBvZmZzZXRQcm92aXMpOwogICAgICBpZiAodXNlV2Vla0RhdGEpIHsKICAgICAgICB1bml0cyA9IG9yZGVyZWRXZWVrVW5pdHM7CiAgICAgICAgZGVmYXVsdFZhbHVlcyA9IGRlZmF1bHRXZWVrVW5pdFZhbHVlczsKICAgICAgICBvYmpOb3cgPSBncmVnb3JpYW5Ub1dlZWsob2JqTm93KTsKICAgICAgfSBlbHNlIGlmIChjb250YWluc09yZGluYWwpIHsKICAgICAgICB1bml0cyA9IG9yZGVyZWRPcmRpbmFsVW5pdHM7CiAgICAgICAgZGVmYXVsdFZhbHVlcyA9IGRlZmF1bHRPcmRpbmFsVW5pdFZhbHVlczsKICAgICAgICBvYmpOb3cgPSBncmVnb3JpYW5Ub09yZGluYWwob2JqTm93KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB1bml0cyA9IG9yZGVyZWRVbml0czsKICAgICAgICBkZWZhdWx0VmFsdWVzID0gZGVmYXVsdFVuaXRWYWx1ZXM7CiAgICAgIH0KCiAgICAgIC8vIHNldCBkZWZhdWx0IHZhbHVlcyBmb3IgbWlzc2luZyBzdHVmZgogICAgICBsZXQgZm91bmRGaXJzdCA9IGZhbHNlOwogICAgICBmb3IgKGNvbnN0IHUgb2YgdW5pdHMpIHsKICAgICAgICBjb25zdCB2ID0gbm9ybWFsaXplZFt1XTsKICAgICAgICBpZiAoIWlzVW5kZWZpbmVkKHYpKSB7CiAgICAgICAgICBmb3VuZEZpcnN0ID0gdHJ1ZTsKICAgICAgICB9IGVsc2UgaWYgKGZvdW5kRmlyc3QpIHsKICAgICAgICAgIG5vcm1hbGl6ZWRbdV0gPSBkZWZhdWx0VmFsdWVzW3VdOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBub3JtYWxpemVkW3VdID0gb2JqTm93W3VdOwogICAgICAgIH0KICAgICAgfQoKICAgICAgLy8gbWFrZSBzdXJlIHRoZSB2YWx1ZXMgd2UgaGF2ZSBhcmUgaW4gcmFuZ2UKICAgICAgY29uc3QgaGlnaGVyT3JkZXJJbnZhbGlkID0gdXNlV2Vla0RhdGEKICAgICAgICAgID8gaGFzSW52YWxpZFdlZWtEYXRhKG5vcm1hbGl6ZWQpCiAgICAgICAgICA6IGNvbnRhaW5zT3JkaW5hbAogICAgICAgICAgPyBoYXNJbnZhbGlkT3JkaW5hbERhdGEobm9ybWFsaXplZCkKICAgICAgICAgIDogaGFzSW52YWxpZEdyZWdvcmlhbkRhdGEobm9ybWFsaXplZCksCiAgICAgICAgaW52YWxpZCA9IGhpZ2hlck9yZGVySW52YWxpZCB8fCBoYXNJbnZhbGlkVGltZURhdGEobm9ybWFsaXplZCk7CgogICAgICBpZiAoaW52YWxpZCkgewogICAgICAgIHJldHVybiBEYXRlVGltZS5pbnZhbGlkKGludmFsaWQpOwogICAgICB9CgogICAgICAvLyBjb21wdXRlIHRoZSBhY3R1YWwgdGltZQogICAgICBjb25zdCBncmVnb3JpYW4gPSB1c2VXZWVrRGF0YQogICAgICAgICAgPyB3ZWVrVG9HcmVnb3JpYW4obm9ybWFsaXplZCkKICAgICAgICAgIDogY29udGFpbnNPcmRpbmFsCiAgICAgICAgICA/IG9yZGluYWxUb0dyZWdvcmlhbihub3JtYWxpemVkKQogICAgICAgICAgOiBub3JtYWxpemVkLAogICAgICAgIFt0c0ZpbmFsLCBvZmZzZXRGaW5hbF0gPSBvYmpUb1RTKGdyZWdvcmlhbiwgb2Zmc2V0UHJvdmlzLCB6b25lVG9Vc2UpLAogICAgICAgIGluc3QgPSBuZXcgRGF0ZVRpbWUoewogICAgICAgICAgdHM6IHRzRmluYWwsCiAgICAgICAgICB6b25lOiB6b25lVG9Vc2UsCiAgICAgICAgICBvOiBvZmZzZXRGaW5hbCwKICAgICAgICAgIGxvYywKICAgICAgICB9KTsKCiAgICAgIC8vIGdyZWdvcmlhbiBkYXRhICsgd2Vla2RheSBzZXJ2ZXMgb25seSB0byB2YWxpZGF0ZQogICAgICBpZiAobm9ybWFsaXplZC53ZWVrZGF5ICYmIGNvbnRhaW5zR3JlZ29yICYmIG9iai53ZWVrZGF5ICE9PSBpbnN0LndlZWtkYXkpIHsKICAgICAgICByZXR1cm4gRGF0ZVRpbWUuaW52YWxpZCgKICAgICAgICAgICJtaXNtYXRjaGVkIHdlZWtkYXkiLAogICAgICAgICAgYHlvdSBjYW4ndCBzcGVjaWZ5IGJvdGggYSB3ZWVrZGF5IG9mICR7bm9ybWFsaXplZC53ZWVrZGF5fSBhbmQgYSBkYXRlIG9mICR7aW5zdC50b0lTTygpfWAKICAgICAgICApOwogICAgICB9CgogICAgICByZXR1cm4gaW5zdDsKICAgIH0KCiAgICAvKioKICAgICAqIENyZWF0ZSBhIERhdGVUaW1lIGZyb20gYW4gSVNPIDg2MDEgc3RyaW5nCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCAtIHRoZSBJU08gc3RyaW5nCiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnMgdG8gYWZmZWN0IHRoZSBjcmVhdGlvbgogICAgICogQHBhcmFtIHtzdHJpbmd8Wm9uZX0gW29wdHMuem9uZT0nbG9jYWwnXSAtIHVzZSB0aGlzIHpvbmUgaWYgbm8gb2Zmc2V0IGlzIHNwZWNpZmllZCBpbiB0aGUgaW5wdXQgc3RyaW5nIGl0c2VsZi4gV2lsbCBhbHNvIGNvbnZlcnQgdGhlIHRpbWUgdG8gdGhpcyB6b25lCiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLnNldFpvbmU9ZmFsc2VdIC0gb3ZlcnJpZGUgdGhlIHpvbmUgd2l0aCBhIGZpeGVkLW9mZnNldCB6b25lIHNwZWNpZmllZCBpbiB0aGUgc3RyaW5nIGl0c2VsZiwgaWYgaXQgc3BlY2lmaWVzIG9uZQogICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmxvY2FsZT0nc3lzdGVtJ3MgbG9jYWxlJ10gLSBhIGxvY2FsZSB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZQogICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLm91dHB1dENhbGVuZGFyXSAtIHRoZSBvdXRwdXQgY2FsZW5kYXIgdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2UKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5udW1iZXJpbmdTeXN0ZW1dIC0gdGhlIG51bWJlcmluZyBzeXN0ZW0gdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2UKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21JU08oJzIwMTYtMDUtMjVUMDk6MDg6MzQuMTIzJykKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21JU08oJzIwMTYtMDUtMjVUMDk6MDg6MzQuMTIzKzA2OjAwJykKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21JU08oJzIwMTYtMDUtMjVUMDk6MDg6MzQuMTIzKzA2OjAwJywge3NldFpvbmU6IHRydWV9KQogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbUlTTygnMjAxNi0wNS0yNVQwOTowODozNC4xMjMnLCB7em9uZTogJ3V0Yyd9KQogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbUlTTygnMjAxNi1XMDUtNCcpCiAgICAgKiBAcmV0dXJuIHtEYXRlVGltZX0KICAgICAqLwogICAgc3RhdGljIGZyb21JU08odGV4dCwgb3B0cyA9IHt9KSB7CiAgICAgIGNvbnN0IFt2YWxzLCBwYXJzZWRab25lXSA9IHBhcnNlSVNPRGF0ZSh0ZXh0KTsKICAgICAgcmV0dXJuIHBhcnNlRGF0YVRvRGF0ZVRpbWUodmFscywgcGFyc2VkWm9uZSwgb3B0cywgIklTTyA4NjAxIiwgdGV4dCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBDcmVhdGUgYSBEYXRlVGltZSBmcm9tIGFuIFJGQyAyODIyIHN0cmluZwogICAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgLSB0aGUgUkZDIDI4MjIgc3RyaW5nCiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnMgdG8gYWZmZWN0IHRoZSBjcmVhdGlvbgogICAgICogQHBhcmFtIHtzdHJpbmd8Wm9uZX0gW29wdHMuem9uZT0nbG9jYWwnXSAtIGNvbnZlcnQgdGhlIHRpbWUgdG8gdGhpcyB6b25lLiBTaW5jZSB0aGUgb2Zmc2V0IGlzIGFsd2F5cyBzcGVjaWZpZWQgaW4gdGhlIHN0cmluZyBpdHNlbGYsIHRoaXMgaGFzIG5vIGVmZmVjdCBvbiB0aGUgaW50ZXJwcmV0YXRpb24gb2Ygc3RyaW5nLCBtZXJlbHkgdGhlIHpvbmUgdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpcyBleHByZXNzZWQgaW4uCiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLnNldFpvbmU9ZmFsc2VdIC0gb3ZlcnJpZGUgdGhlIHpvbmUgd2l0aCBhIGZpeGVkLW9mZnNldCB6b25lIHNwZWNpZmllZCBpbiB0aGUgc3RyaW5nIGl0c2VsZiwgaWYgaXQgc3BlY2lmaWVzIG9uZQogICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmxvY2FsZT0nc3lzdGVtJ3MgbG9jYWxlJ10gLSBhIGxvY2FsZSB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZQogICAgICogQHBhcmFtIHtzdHJpbmd9IG9wdHMub3V0cHV0Q2FsZW5kYXIgLSB0aGUgb3V0cHV0IGNhbGVuZGFyIHRvIHNldCBvbiB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGluc3RhbmNlCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0cy5udW1iZXJpbmdTeXN0ZW0gLSB0aGUgbnVtYmVyaW5nIHN5c3RlbSB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZQogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbVJGQzI4MjIoJzI1IE5vdiAyMDE2IDEzOjIzOjEyIEdNVCcpCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tUkZDMjgyMignRnJpLCAyNSBOb3YgMjAxNiAxMzoyMzoxMiArMDYwMCcpCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tUkZDMjgyMignMjUgTm92IDIwMTYgMTM6MjMgWicpCiAgICAgKiBAcmV0dXJuIHtEYXRlVGltZX0KICAgICAqLwogICAgc3RhdGljIGZyb21SRkMyODIyKHRleHQsIG9wdHMgPSB7fSkgewogICAgICBjb25zdCBbdmFscywgcGFyc2VkWm9uZV0gPSBwYXJzZVJGQzI4MjJEYXRlKHRleHQpOwogICAgICByZXR1cm4gcGFyc2VEYXRhVG9EYXRlVGltZSh2YWxzLCBwYXJzZWRab25lLCBvcHRzLCAiUkZDIDI4MjIiLCB0ZXh0KTsKICAgIH0KCiAgICAvKioKICAgICAqIENyZWF0ZSBhIERhdGVUaW1lIGZyb20gYW4gSFRUUCBoZWFkZXIgZGF0ZQogICAgICogQHNlZSBodHRwczovL3d3dy53My5vcmcvUHJvdG9jb2xzL3JmYzI2MTYvcmZjMjYxNi1zZWMzLmh0bWwjc2VjMy4zLjEKICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IC0gdGhlIEhUVFAgaGVhZGVyIGRhdGUKICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9ucyB0byBhZmZlY3QgdGhlIGNyZWF0aW9uCiAgICAgKiBAcGFyYW0ge3N0cmluZ3xab25lfSBbb3B0cy56b25lPSdsb2NhbCddIC0gY29udmVydCB0aGUgdGltZSB0byB0aGlzIHpvbmUuIFNpbmNlIEhUVFAgZGF0ZXMgYXJlIGFsd2F5cyBpbiBVVEMsIHRoaXMgaGFzIG5vIGVmZmVjdCBvbiB0aGUgaW50ZXJwcmV0YXRpb24gb2Ygc3RyaW5nLCBtZXJlbHkgdGhlIHpvbmUgdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpcyBleHByZXNzZWQgaW4uCiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLnNldFpvbmU9ZmFsc2VdIC0gb3ZlcnJpZGUgdGhlIHpvbmUgd2l0aCB0aGUgZml4ZWQtb2Zmc2V0IHpvbmUgc3BlY2lmaWVkIGluIHRoZSBzdHJpbmcuIEZvciBIVFRQIGRhdGVzLCB0aGlzIGlzIGFsd2F5cyBVVEMsIHNvIHRoaXMgb3B0aW9uIGlzIGVxdWl2YWxlbnQgdG8gc2V0dGluZyB0aGUgYHpvbmVgIG9wdGlvbiB0byAndXRjJywgYnV0IHRoaXMgb3B0aW9uIGlzIGluY2x1ZGVkIGZvciBjb25zaXN0ZW5jeSB3aXRoIHNpbWlsYXIgbWV0aG9kcy4KICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NhbGU9J3N5c3RlbSdzIGxvY2FsZSddIC0gYSBsb2NhbGUgdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2UKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRzLm91dHB1dENhbGVuZGFyIC0gdGhlIG91dHB1dCBjYWxlbmRhciB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZQogICAgICogQHBhcmFtIHtzdHJpbmd9IG9wdHMubnVtYmVyaW5nU3lzdGVtIC0gdGhlIG51bWJlcmluZyBzeXN0ZW0gdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2UKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21IVFRQKCdTdW4sIDA2IE5vdiAxOTk0IDA4OjQ5OjM3IEdNVCcpCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tSFRUUCgnU3VuZGF5LCAwNi1Ob3YtOTQgMDg6NDk6MzcgR01UJykKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21IVFRQKCdTdW4gTm92ICA2IDA4OjQ5OjM3IDE5OTQnKQogICAgICogQHJldHVybiB7RGF0ZVRpbWV9CiAgICAgKi8KICAgIHN0YXRpYyBmcm9tSFRUUCh0ZXh0LCBvcHRzID0ge30pIHsKICAgICAgY29uc3QgW3ZhbHMsIHBhcnNlZFpvbmVdID0gcGFyc2VIVFRQRGF0ZSh0ZXh0KTsKICAgICAgcmV0dXJuIHBhcnNlRGF0YVRvRGF0ZVRpbWUodmFscywgcGFyc2VkWm9uZSwgb3B0cywgIkhUVFAiLCBvcHRzKTsKICAgIH0KCiAgICAvKioKICAgICAqIENyZWF0ZSBhIERhdGVUaW1lIGZyb20gYW4gaW5wdXQgc3RyaW5nIGFuZCBmb3JtYXQgc3RyaW5nLgogICAgICogRGVmYXVsdHMgdG8gZW4tVVMgaWYgbm8gbG9jYWxlIGhhcyBiZWVuIHNwZWNpZmllZCwgcmVnYXJkbGVzcyBvZiB0aGUgc3lzdGVtJ3MgbG9jYWxlLiBGb3IgYSB0YWJsZSBvZiB0b2tlbnMgYW5kIHRoZWlyIGludGVycHJldGF0aW9ucywgc2VlIFtoZXJlXShodHRwczovL21vbWVudC5naXRodWIuaW8vbHV4b24vIy9wYXJzaW5nP2lkPXRhYmxlLW9mLXRva2VucykuCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCAtIHRoZSBzdHJpbmcgdG8gcGFyc2UKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBmbXQgLSB0aGUgZm9ybWF0IHRoZSBzdHJpbmcgaXMgZXhwZWN0ZWQgdG8gYmUgaW4gKHNlZSB0aGUgbGluayBiZWxvdyBmb3IgdGhlIGZvcm1hdHMpCiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnMgdG8gYWZmZWN0IHRoZSBjcmVhdGlvbgogICAgICogQHBhcmFtIHtzdHJpbmd8Wm9uZX0gW29wdHMuem9uZT0nbG9jYWwnXSAtIHVzZSB0aGlzIHpvbmUgaWYgbm8gb2Zmc2V0IGlzIHNwZWNpZmllZCBpbiB0aGUgaW5wdXQgc3RyaW5nIGl0c2VsZi4gV2lsbCBhbHNvIGNvbnZlcnQgdGhlIERhdGVUaW1lIHRvIHRoaXMgem9uZQogICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5zZXRab25lPWZhbHNlXSAtIG92ZXJyaWRlIHRoZSB6b25lIHdpdGggYSB6b25lIHNwZWNpZmllZCBpbiB0aGUgc3RyaW5nIGl0c2VsZiwgaWYgaXQgc3BlY2lmaWVzIG9uZQogICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmxvY2FsZT0nZW4tVVMnXSAtIGEgbG9jYWxlIHN0cmluZyB0byB1c2Ugd2hlbiBwYXJzaW5nLiBXaWxsIGFsc28gc2V0IHRoZSBEYXRlVGltZSB0byB0aGlzIGxvY2FsZQogICAgICogQHBhcmFtIHtzdHJpbmd9IG9wdHMubnVtYmVyaW5nU3lzdGVtIC0gdGhlIG51bWJlcmluZyBzeXN0ZW0gdG8gdXNlIHdoZW4gcGFyc2luZy4gV2lsbCBhbHNvIHNldCB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIHRvIHRoaXMgbnVtYmVyaW5nIHN5c3RlbQogICAgICogQHBhcmFtIHtzdHJpbmd9IG9wdHMub3V0cHV0Q2FsZW5kYXIgLSB0aGUgb3V0cHV0IGNhbGVuZGFyIHRvIHNldCBvbiB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGluc3RhbmNlCiAgICAgKiBAcmV0dXJuIHtEYXRlVGltZX0KICAgICAqLwogICAgc3RhdGljIGZyb21Gb3JtYXQodGV4dCwgZm10LCBvcHRzID0ge30pIHsKICAgICAgaWYgKGlzVW5kZWZpbmVkKHRleHQpIHx8IGlzVW5kZWZpbmVkKGZtdCkpIHsKICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoImZyb21Gb3JtYXQgcmVxdWlyZXMgYW4gaW5wdXQgc3RyaW5nIGFuZCBhIGZvcm1hdCIpOwogICAgICB9CgogICAgICBjb25zdCB7IGxvY2FsZSA9IG51bGwsIG51bWJlcmluZ1N5c3RlbSA9IG51bGwgfSA9IG9wdHMsCiAgICAgICAgbG9jYWxlVG9Vc2UgPSBMb2NhbGUuZnJvbU9wdHMoewogICAgICAgICAgbG9jYWxlLAogICAgICAgICAgbnVtYmVyaW5nU3lzdGVtLAogICAgICAgICAgZGVmYXVsdFRvRU46IHRydWUsCiAgICAgICAgfSksCiAgICAgICAgW3ZhbHMsIHBhcnNlZFpvbmUsIHNwZWNpZmljT2Zmc2V0LCBpbnZhbGlkXSA9IHBhcnNlRnJvbVRva2Vucyhsb2NhbGVUb1VzZSwgdGV4dCwgZm10KTsKICAgICAgaWYgKGludmFsaWQpIHsKICAgICAgICByZXR1cm4gRGF0ZVRpbWUuaW52YWxpZChpbnZhbGlkKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gcGFyc2VEYXRhVG9EYXRlVGltZSh2YWxzLCBwYXJzZWRab25lLCBvcHRzLCBgZm9ybWF0ICR7Zm10fWAsIHRleHQsIHNwZWNpZmljT2Zmc2V0KTsKICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogQGRlcHJlY2F0ZWQgdXNlIGZyb21Gb3JtYXQgaW5zdGVhZAogICAgICovCiAgICBzdGF0aWMgZnJvbVN0cmluZyh0ZXh0LCBmbXQsIG9wdHMgPSB7fSkgewogICAgICByZXR1cm4gRGF0ZVRpbWUuZnJvbUZvcm1hdCh0ZXh0LCBmbXQsIG9wdHMpOwogICAgfQoKICAgIC8qKgogICAgICogQ3JlYXRlIGEgRGF0ZVRpbWUgZnJvbSBhIFNRTCBkYXRlLCB0aW1lLCBvciBkYXRldGltZQogICAgICogRGVmYXVsdHMgdG8gZW4tVVMgaWYgbm8gbG9jYWxlIGhhcyBiZWVuIHNwZWNpZmllZCwgcmVnYXJkbGVzcyBvZiB0aGUgc3lzdGVtJ3MgbG9jYWxlCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCAtIHRoZSBzdHJpbmcgdG8gcGFyc2UKICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9ucyB0byBhZmZlY3QgdGhlIGNyZWF0aW9uCiAgICAgKiBAcGFyYW0ge3N0cmluZ3xab25lfSBbb3B0cy56b25lPSdsb2NhbCddIC0gdXNlIHRoaXMgem9uZSBpZiBubyBvZmZzZXQgaXMgc3BlY2lmaWVkIGluIHRoZSBpbnB1dCBzdHJpbmcgaXRzZWxmLiBXaWxsIGFsc28gY29udmVydCB0aGUgRGF0ZVRpbWUgdG8gdGhpcyB6b25lCiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLnNldFpvbmU9ZmFsc2VdIC0gb3ZlcnJpZGUgdGhlIHpvbmUgd2l0aCBhIHpvbmUgc3BlY2lmaWVkIGluIHRoZSBzdHJpbmcgaXRzZWxmLCBpZiBpdCBzcGVjaWZpZXMgb25lCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jYWxlPSdlbi1VUyddIC0gYSBsb2NhbGUgc3RyaW5nIHRvIHVzZSB3aGVuIHBhcnNpbmcuIFdpbGwgYWxzbyBzZXQgdGhlIERhdGVUaW1lIHRvIHRoaXMgbG9jYWxlCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0cy5udW1iZXJpbmdTeXN0ZW0gLSB0aGUgbnVtYmVyaW5nIHN5c3RlbSB0byB1c2Ugd2hlbiBwYXJzaW5nLiBXaWxsIGFsc28gc2V0IHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgdG8gdGhpcyBudW1iZXJpbmcgc3lzdGVtCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0cy5vdXRwdXRDYWxlbmRhciAtIHRoZSBvdXRwdXQgY2FsZW5kYXIgdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2UKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21TUUwoJzIwMTctMDUtMTUnKQogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbVNRTCgnMjAxNy0wNS0xNSAwOToxMjozNCcpCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tU1FMKCcyMDE3LTA1LTE1IDA5OjEyOjM0LjM0MicpCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tU1FMKCcyMDE3LTA1LTE1IDA5OjEyOjM0LjM0MiswNjowMCcpCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tU1FMKCcyMDE3LTA1LTE1IDA5OjEyOjM0LjM0MiBBbWVyaWNhL0xvc19BbmdlbGVzJykKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21TUUwoJzIwMTctMDUtMTUgMDk6MTI6MzQuMzQyIEFtZXJpY2EvTG9zX0FuZ2VsZXMnLCB7IHNldFpvbmU6IHRydWUgfSkKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21TUUwoJzIwMTctMDUtMTUgMDk6MTI6MzQuMzQyJywgeyB6b25lOiAnQW1lcmljYS9Mb3NfQW5nZWxlcycgfSkKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21TUUwoJzA5OjEyOjM0LjM0MicpCiAgICAgKiBAcmV0dXJuIHtEYXRlVGltZX0KICAgICAqLwogICAgc3RhdGljIGZyb21TUUwodGV4dCwgb3B0cyA9IHt9KSB7CiAgICAgIGNvbnN0IFt2YWxzLCBwYXJzZWRab25lXSA9IHBhcnNlU1FMKHRleHQpOwogICAgICByZXR1cm4gcGFyc2VEYXRhVG9EYXRlVGltZSh2YWxzLCBwYXJzZWRab25lLCBvcHRzLCAiU1FMIiwgdGV4dCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBDcmVhdGUgYW4gaW52YWxpZCBEYXRlVGltZS4KICAgICAqIEBwYXJhbSB7RGF0ZVRpbWV9IHJlYXNvbiAtIHNpbXBsZSBzdHJpbmcgb2Ygd2h5IHRoaXMgRGF0ZVRpbWUgaXMgaW52YWxpZC4gU2hvdWxkIG5vdCBjb250YWluIHBhcmFtZXRlcnMgb3IgYW55dGhpbmcgZWxzZSBkYXRhLWRlcGVuZGVudAogICAgICogQHBhcmFtIHtzdHJpbmd9IFtleHBsYW5hdGlvbj1udWxsXSAtIGxvbmdlciBleHBsYW5hdGlvbiwgbWF5IGluY2x1ZGUgcGFyYW1ldGVycyBhbmQgb3RoZXIgdXNlZnVsIGRlYnVnZ2luZyBpbmZvcm1hdGlvbgogICAgICogQHJldHVybiB7RGF0ZVRpbWV9CiAgICAgKi8KICAgIHN0YXRpYyBpbnZhbGlkKHJlYXNvbiwgZXhwbGFuYXRpb24gPSBudWxsKSB7CiAgICAgIGlmICghcmVhc29uKSB7CiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKCJuZWVkIHRvIHNwZWNpZnkgYSByZWFzb24gdGhlIERhdGVUaW1lIGlzIGludmFsaWQiKTsKICAgICAgfQoKICAgICAgY29uc3QgaW52YWxpZCA9IHJlYXNvbiBpbnN0YW5jZW9mIEludmFsaWQgPyByZWFzb24gOiBuZXcgSW52YWxpZChyZWFzb24sIGV4cGxhbmF0aW9uKTsKCiAgICAgIGlmIChTZXR0aW5ncy50aHJvd09uSW52YWxpZCkgewogICAgICAgIHRocm93IG5ldyBJbnZhbGlkRGF0ZVRpbWVFcnJvcihpbnZhbGlkKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gbmV3IERhdGVUaW1lKHsgaW52YWxpZCB9KTsKICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogQ2hlY2sgaWYgYW4gb2JqZWN0IGlzIGFuIGluc3RhbmNlIG9mIERhdGVUaW1lLiBXb3JrcyBhY3Jvc3MgY29udGV4dCBib3VuZGFyaWVzCiAgICAgKiBAcGFyYW0ge29iamVjdH0gbwogICAgICogQHJldHVybiB7Ym9vbGVhbn0KICAgICAqLwogICAgc3RhdGljIGlzRGF0ZVRpbWUobykgewogICAgICByZXR1cm4gKG8gJiYgby5pc0x1eG9uRGF0ZVRpbWUpIHx8IGZhbHNlOwogICAgfQoKICAgIC8qKgogICAgICogUHJvZHVjZSB0aGUgZm9ybWF0IHN0cmluZyBmb3IgYSBzZXQgb2Ygb3B0aW9ucwogICAgICogQHBhcmFtIGZvcm1hdE9wdHMKICAgICAqIEBwYXJhbSBsb2NhbGVPcHRzCiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfQogICAgICovCiAgICBzdGF0aWMgcGFyc2VGb3JtYXRGb3JPcHRzKGZvcm1hdE9wdHMsIGxvY2FsZU9wdHMgPSB7fSkgewogICAgICBjb25zdCB0b2tlbkxpc3QgPSBmb3JtYXRPcHRzVG9Ub2tlbnMoZm9ybWF0T3B0cywgTG9jYWxlLmZyb21PYmplY3QobG9jYWxlT3B0cykpOwogICAgICByZXR1cm4gIXRva2VuTGlzdCA/IG51bGwgOiB0b2tlbkxpc3QubWFwKCh0KSA9PiAodCA/IHQudmFsIDogbnVsbCkpLmpvaW4oIiIpOwogICAgfQoKICAgIC8qKgogICAgICogUHJvZHVjZSB0aGUgdGhlIGZ1bGx5IGV4cGFuZGVkIGZvcm1hdCB0b2tlbiBmb3IgdGhlIGxvY2FsZQogICAgICogRG9lcyBOT1QgcXVvdGUgY2hhcmFjdGVycywgc28gcXVvdGVkIHRva2VucyB3aWxsIG5vdCByb3VuZCB0cmlwIGNvcnJlY3RseQogICAgICogQHBhcmFtIGZtdAogICAgICogQHBhcmFtIGxvY2FsZU9wdHMKICAgICAqIEByZXR1cm5zIHtzdHJpbmd9CiAgICAgKi8KICAgIHN0YXRpYyBleHBhbmRGb3JtYXQoZm10LCBsb2NhbGVPcHRzID0ge30pIHsKICAgICAgY29uc3QgZXhwYW5kZWQgPSBleHBhbmRNYWNyb1Rva2VucyhGb3JtYXR0ZXIucGFyc2VGb3JtYXQoZm10KSwgTG9jYWxlLmZyb21PYmplY3QobG9jYWxlT3B0cykpOwogICAgICByZXR1cm4gZXhwYW5kZWQubWFwKCh0KSA9PiB0LnZhbCkuam9pbigiIik7CiAgICB9CgogICAgLy8gSU5GTwoKICAgIC8qKgogICAgICogR2V0IHRoZSB2YWx1ZSBvZiB1bml0LgogICAgICogQHBhcmFtIHtzdHJpbmd9IHVuaXQgLSBhIHVuaXQgc3VjaCBhcyAnbWludXRlJyBvciAnZGF5JwogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgNywgNCkuZ2V0KCdtb250aCcpOyAvLz0+IDcKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDcsIDQpLmdldCgnZGF5Jyk7IC8vPT4gNAogICAgICogQHJldHVybiB7bnVtYmVyfQogICAgICovCiAgICBnZXQodW5pdCkgewogICAgICByZXR1cm4gdGhpc1t1bml0XTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgd2hldGhlciB0aGUgRGF0ZVRpbWUgaXMgdmFsaWQuIEludmFsaWQgRGF0ZVRpbWVzIG9jY3VyIHdoZW46CiAgICAgKiAqIFRoZSBEYXRlVGltZSB3YXMgY3JlYXRlZCBmcm9tIGludmFsaWQgY2FsZW5kYXIgaW5mb3JtYXRpb24sIHN1Y2ggYXMgdGhlIDEzdGggbW9udGggb3IgRmVicnVhcnkgMzAKICAgICAqICogVGhlIERhdGVUaW1lIHdhcyBjcmVhdGVkIGJ5IGFuIG9wZXJhdGlvbiBvbiBhbm90aGVyIGludmFsaWQgZGF0ZQogICAgICogQHR5cGUge2Jvb2xlYW59CiAgICAgKi8KICAgIGdldCBpc1ZhbGlkKCkgewogICAgICByZXR1cm4gdGhpcy5pbnZhbGlkID09PSBudWxsOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyBhbiBlcnJvciBjb2RlIGlmIHRoaXMgRGF0ZVRpbWUgaXMgaW52YWxpZCwgb3IgbnVsbCBpZiB0aGUgRGF0ZVRpbWUgaXMgdmFsaWQKICAgICAqIEB0eXBlIHtzdHJpbmd9CiAgICAgKi8KICAgIGdldCBpbnZhbGlkUmVhc29uKCkgewogICAgICByZXR1cm4gdGhpcy5pbnZhbGlkID8gdGhpcy5pbnZhbGlkLnJlYXNvbiA6IG51bGw7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIGFuIGV4cGxhbmF0aW9uIG9mIHdoeSB0aGlzIERhdGVUaW1lIGJlY2FtZSBpbnZhbGlkLCBvciBudWxsIGlmIHRoZSBEYXRlVGltZSBpcyB2YWxpZAogICAgICogQHR5cGUge3N0cmluZ30KICAgICAqLwogICAgZ2V0IGludmFsaWRFeHBsYW5hdGlvbigpIHsKICAgICAgcmV0dXJuIHRoaXMuaW52YWxpZCA/IHRoaXMuaW52YWxpZC5leHBsYW5hdGlvbiA6IG51bGw7CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQgdGhlIGxvY2FsZSBvZiBhIERhdGVUaW1lLCBzdWNoICdlbi1HQicuIFRoZSBsb2NhbGUgaXMgdXNlZCB3aGVuIGZvcm1hdHRpbmcgdGhlIERhdGVUaW1lCiAgICAgKgogICAgICogQHR5cGUge3N0cmluZ30KICAgICAqLwogICAgZ2V0IGxvY2FsZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMubG9jLmxvY2FsZSA6IG51bGw7CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQgdGhlIG51bWJlcmluZyBzeXN0ZW0gb2YgYSBEYXRlVGltZSwgc3VjaCAnYmVuZycuIFRoZSBudW1iZXJpbmcgc3lzdGVtIGlzIHVzZWQgd2hlbiBmb3JtYXR0aW5nIHRoZSBEYXRlVGltZQogICAgICoKICAgICAqIEB0eXBlIHtzdHJpbmd9CiAgICAgKi8KICAgIGdldCBudW1iZXJpbmdTeXN0ZW0oKSB7CiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLmxvYy5udW1iZXJpbmdTeXN0ZW0gOiBudWxsOwogICAgfQoKICAgIC8qKgogICAgICogR2V0IHRoZSBvdXRwdXQgY2FsZW5kYXIgb2YgYSBEYXRlVGltZSwgc3VjaCAnaXNsYW1pYycuIFRoZSBvdXRwdXQgY2FsZW5kYXIgaXMgdXNlZCB3aGVuIGZvcm1hdHRpbmcgdGhlIERhdGVUaW1lCiAgICAgKgogICAgICogQHR5cGUge3N0cmluZ30KICAgICAqLwogICAgZ2V0IG91dHB1dENhbGVuZGFyKCkgewogICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy5sb2Mub3V0cHV0Q2FsZW5kYXIgOiBudWxsOwogICAgfQoKICAgIC8qKgogICAgICogR2V0IHRoZSB0aW1lIHpvbmUgYXNzb2NpYXRlZCB3aXRoIHRoaXMgRGF0ZVRpbWUuCiAgICAgKiBAdHlwZSB7Wm9uZX0KICAgICAqLwogICAgZ2V0IHpvbmUoKSB7CiAgICAgIHJldHVybiB0aGlzLl96b25lOwogICAgfQoKICAgIC8qKgogICAgICogR2V0IHRoZSBuYW1lIG9mIHRoZSB0aW1lIHpvbmUuCiAgICAgKiBAdHlwZSB7c3RyaW5nfQogICAgICovCiAgICBnZXQgem9uZU5hbWUoKSB7CiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLnpvbmUubmFtZSA6IG51bGw7CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQgdGhlIHllYXIKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDUsIDI1KS55ZWFyIC8vPT4gMjAxNwogICAgICogQHR5cGUge251bWJlcn0KICAgICAqLwogICAgZ2V0IHllYXIoKSB7CiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLmMueWVhciA6IE5hTjsKICAgIH0KCiAgICAvKioKICAgICAqIEdldCB0aGUgcXVhcnRlcgogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgNSwgMjUpLnF1YXJ0ZXIgLy89PiAyCiAgICAgKiBAdHlwZSB7bnVtYmVyfQogICAgICovCiAgICBnZXQgcXVhcnRlcigpIHsKICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IE1hdGguY2VpbCh0aGlzLmMubW9udGggLyAzKSA6IE5hTjsKICAgIH0KCiAgICAvKioKICAgICAqIEdldCB0aGUgbW9udGggKDEtMTIpLgogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgNSwgMjUpLm1vbnRoIC8vPT4gNQogICAgICogQHR5cGUge251bWJlcn0KICAgICAqLwogICAgZ2V0IG1vbnRoKCkgewogICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy5jLm1vbnRoIDogTmFOOwogICAgfQoKICAgIC8qKgogICAgICogR2V0IHRoZSBkYXkgb2YgdGhlIG1vbnRoICgxLTMwaXNoKS4KICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDUsIDI1KS5kYXkgLy89PiAyNQogICAgICogQHR5cGUge251bWJlcn0KICAgICAqLwogICAgZ2V0IGRheSgpIHsKICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMuYy5kYXkgOiBOYU47CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQgdGhlIGhvdXIgb2YgdGhlIGRheSAoMC0yMykuCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCA1LCAyNSwgOSkuaG91ciAvLz0+IDkKICAgICAqIEB0eXBlIHtudW1iZXJ9CiAgICAgKi8KICAgIGdldCBob3VyKCkgewogICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy5jLmhvdXIgOiBOYU47CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQgdGhlIG1pbnV0ZSBvZiB0aGUgaG91ciAoMC01OSkuCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCA1LCAyNSwgOSwgMzApLm1pbnV0ZSAvLz0+IDMwCiAgICAgKiBAdHlwZSB7bnVtYmVyfQogICAgICovCiAgICBnZXQgbWludXRlKCkgewogICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy5jLm1pbnV0ZSA6IE5hTjsKICAgIH0KCiAgICAvKioKICAgICAqIEdldCB0aGUgc2Vjb25kIG9mIHRoZSBtaW51dGUgKDAtNTkpLgogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgNSwgMjUsIDksIDMwLCA1Mikuc2Vjb25kIC8vPT4gNTIKICAgICAqIEB0eXBlIHtudW1iZXJ9CiAgICAgKi8KICAgIGdldCBzZWNvbmQoKSB7CiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLmMuc2Vjb25kIDogTmFOOwogICAgfQoKICAgIC8qKgogICAgICogR2V0IHRoZSBtaWxsaXNlY29uZCBvZiB0aGUgc2Vjb25kICgwLTk5OSkuCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCA1LCAyNSwgOSwgMzAsIDUyLCA2NTQpLm1pbGxpc2Vjb25kIC8vPT4gNjU0CiAgICAgKiBAdHlwZSB7bnVtYmVyfQogICAgICovCiAgICBnZXQgbWlsbGlzZWNvbmQoKSB7CiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLmMubWlsbGlzZWNvbmQgOiBOYU47CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQgdGhlIHdlZWsgeWVhcgogICAgICogQHNlZSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9JU09fd2Vla19kYXRlCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE0LCAxMiwgMzEpLndlZWtZZWFyIC8vPT4gMjAxNQogICAgICogQHR5cGUge251bWJlcn0KICAgICAqLwogICAgZ2V0IHdlZWtZZWFyKCkgewogICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gcG9zc2libHlDYWNoZWRXZWVrRGF0YSh0aGlzKS53ZWVrWWVhciA6IE5hTjsKICAgIH0KCiAgICAvKioKICAgICAqIEdldCB0aGUgd2VlayBudW1iZXIgb2YgdGhlIHdlZWsgeWVhciAoMS01MmlzaCkuCiAgICAgKiBAc2VlIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT193ZWVrX2RhdGUKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDUsIDI1KS53ZWVrTnVtYmVyIC8vPT4gMjEKICAgICAqIEB0eXBlIHtudW1iZXJ9CiAgICAgKi8KICAgIGdldCB3ZWVrTnVtYmVyKCkgewogICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gcG9zc2libHlDYWNoZWRXZWVrRGF0YSh0aGlzKS53ZWVrTnVtYmVyIDogTmFOOwogICAgfQoKICAgIC8qKgogICAgICogR2V0IHRoZSBkYXkgb2YgdGhlIHdlZWsuCiAgICAgKiAxIGlzIE1vbmRheSBhbmQgNyBpcyBTdW5kYXkKICAgICAqIEBzZWUgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSVNPX3dlZWtfZGF0ZQogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNCwgMTEsIDMxKS53ZWVrZGF5IC8vPT4gNAogICAgICogQHR5cGUge251bWJlcn0KICAgICAqLwogICAgZ2V0IHdlZWtkYXkoKSB7CiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyBwb3NzaWJseUNhY2hlZFdlZWtEYXRhKHRoaXMpLndlZWtkYXkgOiBOYU47CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQgdGhlIG9yZGluYWwgKG1lYW5pbmcgdGhlIGRheSBvZiB0aGUgeWVhcikKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDUsIDI1KS5vcmRpbmFsIC8vPT4gMTQ1CiAgICAgKiBAdHlwZSB7bnVtYmVyfERhdGVUaW1lfQogICAgICovCiAgICBnZXQgb3JkaW5hbCgpIHsKICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IGdyZWdvcmlhblRvT3JkaW5hbCh0aGlzLmMpLm9yZGluYWwgOiBOYU47CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQgdGhlIGh1bWFuIHJlYWRhYmxlIHNob3J0IG1vbnRoIG5hbWUsIHN1Y2ggYXMgJ09jdCcuCiAgICAgKiBEZWZhdWx0cyB0byB0aGUgc3lzdGVtJ3MgbG9jYWxlIGlmIG5vIGxvY2FsZSBoYXMgYmVlbiBzcGVjaWZpZWQKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDEwLCAzMCkubW9udGhTaG9ydCAvLz0+IE9jdAogICAgICogQHR5cGUge3N0cmluZ30KICAgICAqLwogICAgZ2V0IG1vbnRoU2hvcnQoKSB7CiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyBJbmZvLm1vbnRocygic2hvcnQiLCB7IGxvY09iajogdGhpcy5sb2MgfSlbdGhpcy5tb250aCAtIDFdIDogbnVsbDsKICAgIH0KCiAgICAvKioKICAgICAqIEdldCB0aGUgaHVtYW4gcmVhZGFibGUgbG9uZyBtb250aCBuYW1lLCBzdWNoIGFzICdPY3RvYmVyJy4KICAgICAqIERlZmF1bHRzIHRvIHRoZSBzeXN0ZW0ncyBsb2NhbGUgaWYgbm8gbG9jYWxlIGhhcyBiZWVuIHNwZWNpZmllZAogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgMTAsIDMwKS5tb250aExvbmcgLy89PiBPY3RvYmVyCiAgICAgKiBAdHlwZSB7c3RyaW5nfQogICAgICovCiAgICBnZXQgbW9udGhMb25nKCkgewogICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gSW5mby5tb250aHMoImxvbmciLCB7IGxvY09iajogdGhpcy5sb2MgfSlbdGhpcy5tb250aCAtIDFdIDogbnVsbDsKICAgIH0KCiAgICAvKioKICAgICAqIEdldCB0aGUgaHVtYW4gcmVhZGFibGUgc2hvcnQgd2Vla2RheSwgc3VjaCBhcyAnTW9uJy4KICAgICAqIERlZmF1bHRzIHRvIHRoZSBzeXN0ZW0ncyBsb2NhbGUgaWYgbm8gbG9jYWxlIGhhcyBiZWVuIHNwZWNpZmllZAogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgMTAsIDMwKS53ZWVrZGF5U2hvcnQgLy89PiBNb24KICAgICAqIEB0eXBlIHtzdHJpbmd9CiAgICAgKi8KICAgIGdldCB3ZWVrZGF5U2hvcnQoKSB7CiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyBJbmZvLndlZWtkYXlzKCJzaG9ydCIsIHsgbG9jT2JqOiB0aGlzLmxvYyB9KVt0aGlzLndlZWtkYXkgLSAxXSA6IG51bGw7CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQgdGhlIGh1bWFuIHJlYWRhYmxlIGxvbmcgd2Vla2RheSwgc3VjaCBhcyAnTW9uZGF5Jy4KICAgICAqIERlZmF1bHRzIHRvIHRoZSBzeXN0ZW0ncyBsb2NhbGUgaWYgbm8gbG9jYWxlIGhhcyBiZWVuIHNwZWNpZmllZAogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgMTAsIDMwKS53ZWVrZGF5TG9uZyAvLz0+IE1vbmRheQogICAgICogQHR5cGUge3N0cmluZ30KICAgICAqLwogICAgZ2V0IHdlZWtkYXlMb25nKCkgewogICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gSW5mby53ZWVrZGF5cygibG9uZyIsIHsgbG9jT2JqOiB0aGlzLmxvYyB9KVt0aGlzLndlZWtkYXkgLSAxXSA6IG51bGw7CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQgdGhlIFVUQyBvZmZzZXQgb2YgdGhpcyBEYXRlVGltZSBpbiBtaW51dGVzCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS5vZmZzZXQgLy89PiAtMjQwCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS51dGMoKS5vZmZzZXQgLy89PiAwCiAgICAgKiBAdHlwZSB7bnVtYmVyfQogICAgICovCiAgICBnZXQgb2Zmc2V0KCkgewogICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gK3RoaXMubyA6IE5hTjsKICAgIH0KCiAgICAvKioKICAgICAqIEdldCB0aGUgc2hvcnQgaHVtYW4gbmFtZSBmb3IgdGhlIHpvbmUncyBjdXJyZW50IG9mZnNldCwgZm9yIGV4YW1wbGUgIkVTVCIgb3IgIkVEVCIuCiAgICAgKiBEZWZhdWx0cyB0byB0aGUgc3lzdGVtJ3MgbG9jYWxlIGlmIG5vIGxvY2FsZSBoYXMgYmVlbiBzcGVjaWZpZWQKICAgICAqIEB0eXBlIHtzdHJpbmd9CiAgICAgKi8KICAgIGdldCBvZmZzZXROYW1lU2hvcnQoKSB7CiAgICAgIGlmICh0aGlzLmlzVmFsaWQpIHsKICAgICAgICByZXR1cm4gdGhpcy56b25lLm9mZnNldE5hbWUodGhpcy50cywgewogICAgICAgICAgZm9ybWF0OiAic2hvcnQiLAogICAgICAgICAgbG9jYWxlOiB0aGlzLmxvY2FsZSwKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogR2V0IHRoZSBsb25nIGh1bWFuIG5hbWUgZm9yIHRoZSB6b25lJ3MgY3VycmVudCBvZmZzZXQsIGZvciBleGFtcGxlICJFYXN0ZXJuIFN0YW5kYXJkIFRpbWUiIG9yICJFYXN0ZXJuIERheWxpZ2h0IFRpbWUiLgogICAgICogRGVmYXVsdHMgdG8gdGhlIHN5c3RlbSdzIGxvY2FsZSBpZiBubyBsb2NhbGUgaGFzIGJlZW4gc3BlY2lmaWVkCiAgICAgKiBAdHlwZSB7c3RyaW5nfQogICAgICovCiAgICBnZXQgb2Zmc2V0TmFtZUxvbmcoKSB7CiAgICAgIGlmICh0aGlzLmlzVmFsaWQpIHsKICAgICAgICByZXR1cm4gdGhpcy56b25lLm9mZnNldE5hbWUodGhpcy50cywgewogICAgICAgICAgZm9ybWF0OiAibG9uZyIsCiAgICAgICAgICBsb2NhbGU6IHRoaXMubG9jYWxlLAogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQgd2hldGhlciB0aGlzIHpvbmUncyBvZmZzZXQgZXZlciBjaGFuZ2VzLCBhcyBpbiBhIERTVC4KICAgICAqIEB0eXBlIHtib29sZWFufQogICAgICovCiAgICBnZXQgaXNPZmZzZXRGaXhlZCgpIHsKICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMuem9uZS5pc1VuaXZlcnNhbCA6IG51bGw7CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQgd2hldGhlciB0aGUgRGF0ZVRpbWUgaXMgaW4gYSBEU1QuCiAgICAgKiBAdHlwZSB7Ym9vbGVhbn0KICAgICAqLwogICAgZ2V0IGlzSW5EU1QoKSB7CiAgICAgIGlmICh0aGlzLmlzT2Zmc2V0Rml4ZWQpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuICgKICAgICAgICAgIHRoaXMub2Zmc2V0ID4gdGhpcy5zZXQoeyBtb250aDogMSwgZGF5OiAxIH0pLm9mZnNldCB8fAogICAgICAgICAgdGhpcy5vZmZzZXQgPiB0aGlzLnNldCh7IG1vbnRoOiA1IH0pLm9mZnNldAogICAgICAgICk7CiAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIERhdGVUaW1lIGlzIGluIGEgbGVhcCB5ZWFyLCBmYWxzZSBvdGhlcndpc2UKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTYpLmlzSW5MZWFwWWVhciAvLz0+IHRydWUKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTMpLmlzSW5MZWFwWWVhciAvLz0+IGZhbHNlCiAgICAgKiBAdHlwZSB7Ym9vbGVhbn0KICAgICAqLwogICAgZ2V0IGlzSW5MZWFwWWVhcigpIHsKICAgICAgcmV0dXJuIGlzTGVhcFllYXIodGhpcy55ZWFyKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgdGhlIG51bWJlciBvZiBkYXlzIGluIHRoaXMgRGF0ZVRpbWUncyBtb250aAogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNiwgMikuZGF5c0luTW9udGggLy89PiAyOQogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNiwgMykuZGF5c0luTW9udGggLy89PiAzMQogICAgICogQHR5cGUge251bWJlcn0KICAgICAqLwogICAgZ2V0IGRheXNJbk1vbnRoKCkgewogICAgICByZXR1cm4gZGF5c0luTW9udGgodGhpcy55ZWFyLCB0aGlzLm1vbnRoKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgdGhlIG51bWJlciBvZiBkYXlzIGluIHRoaXMgRGF0ZVRpbWUncyB5ZWFyCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE2KS5kYXlzSW5ZZWFyIC8vPT4gMzY2CiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDEzKS5kYXlzSW5ZZWFyIC8vPT4gMzY1CiAgICAgKiBAdHlwZSB7bnVtYmVyfQogICAgICovCiAgICBnZXQgZGF5c0luWWVhcigpIHsKICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IGRheXNJblllYXIodGhpcy55ZWFyKSA6IE5hTjsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgdGhlIG51bWJlciBvZiB3ZWVrcyBpbiB0aGlzIERhdGVUaW1lJ3MgeWVhcgogICAgICogQHNlZSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9JU09fd2Vla19kYXRlCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDA0KS53ZWVrc0luV2Vla1llYXIgLy89PiA1MwogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxMykud2Vla3NJbldlZWtZZWFyIC8vPT4gNTIKICAgICAqIEB0eXBlIHtudW1iZXJ9CiAgICAgKi8KICAgIGdldCB3ZWVrc0luV2Vla1llYXIoKSB7CiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB3ZWVrc0luV2Vla1llYXIodGhpcy53ZWVrWWVhcikgOiBOYU47CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSByZXNvbHZlZCBJbnRsIG9wdGlvbnMgZm9yIHRoaXMgRGF0ZVRpbWUuCiAgICAgKiBUaGlzIGlzIHVzZWZ1bCBpbiB1bmRlcnN0YW5kaW5nIHRoZSBiZWhhdmlvciBvZiBmb3JtYXR0aW5nIG1ldGhvZHMKICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gdGhlIHNhbWUgb3B0aW9ucyBhcyB0b0xvY2FsZVN0cmluZwogICAgICogQHJldHVybiB7T2JqZWN0fQogICAgICovCiAgICByZXNvbHZlZExvY2FsZU9wdGlvbnMob3B0cyA9IHt9KSB7CiAgICAgIGNvbnN0IHsgbG9jYWxlLCBudW1iZXJpbmdTeXN0ZW0sIGNhbGVuZGFyIH0gPSBGb3JtYXR0ZXIuY3JlYXRlKAogICAgICAgIHRoaXMubG9jLmNsb25lKG9wdHMpLAogICAgICAgIG9wdHMKICAgICAgKS5yZXNvbHZlZE9wdGlvbnModGhpcyk7CiAgICAgIHJldHVybiB7IGxvY2FsZSwgbnVtYmVyaW5nU3lzdGVtLCBvdXRwdXRDYWxlbmRhcjogY2FsZW5kYXIgfTsKICAgIH0KCiAgICAvLyBUUkFOU0ZPUk0KCiAgICAvKioKICAgICAqICJTZXQiIHRoZSBEYXRlVGltZSdzIHpvbmUgdG8gVVRDLiBSZXR1cm5zIGEgbmV3bHktY29uc3RydWN0ZWQgRGF0ZVRpbWUuCiAgICAgKgogICAgICogRXF1aXZhbGVudCB0byB7QGxpbmsgRGF0ZVRpbWUjc2V0Wm9uZX0oJ3V0YycpCiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29mZnNldD0wXSAtIG9wdGlvbmFsbHksIGFuIG9mZnNldCBmcm9tIFVUQyBpbiBtaW51dGVzCiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdHM9e31dIC0gb3B0aW9ucyB0byBwYXNzIHRvIGBzZXRab25lKClgCiAgICAgKiBAcmV0dXJuIHtEYXRlVGltZX0KICAgICAqLwogICAgdG9VVEMob2Zmc2V0ID0gMCwgb3B0cyA9IHt9KSB7CiAgICAgIHJldHVybiB0aGlzLnNldFpvbmUoRml4ZWRPZmZzZXRab25lLmluc3RhbmNlKG9mZnNldCksIG9wdHMpOwogICAgfQoKICAgIC8qKgogICAgICogIlNldCIgdGhlIERhdGVUaW1lJ3Mgem9uZSB0byB0aGUgaG9zdCdzIGxvY2FsIHpvbmUuIFJldHVybnMgYSBuZXdseS1jb25zdHJ1Y3RlZCBEYXRlVGltZS4KICAgICAqCiAgICAgKiBFcXVpdmFsZW50IHRvIGBzZXRab25lKCdsb2NhbCcpYAogICAgICogQHJldHVybiB7RGF0ZVRpbWV9CiAgICAgKi8KICAgIHRvTG9jYWwoKSB7CiAgICAgIHJldHVybiB0aGlzLnNldFpvbmUoU2V0dGluZ3MuZGVmYXVsdFpvbmUpOwogICAgfQoKICAgIC8qKgogICAgICogIlNldCIgdGhlIERhdGVUaW1lJ3Mgem9uZSB0byBzcGVjaWZpZWQgem9uZS4gUmV0dXJucyBhIG5ld2x5LWNvbnN0cnVjdGVkIERhdGVUaW1lLgogICAgICoKICAgICAqIEJ5IGRlZmF1bHQsIHRoZSBzZXR0ZXIga2VlcHMgdGhlIHVuZGVybHlpbmcgdGltZSB0aGUgc2FtZSAoYXMgaW4sIHRoZSBzYW1lIHRpbWVzdGFtcCksIGJ1dCB0aGUgbmV3IGluc3RhbmNlIHdpbGwgcmVwb3J0IGRpZmZlcmVudCBsb2NhbCB0aW1lcyBhbmQgY29uc2lkZXIgRFNUcyB3aGVuIG1ha2luZyBjb21wdXRhdGlvbnMsIGFzIHdpdGgge0BsaW5rIERhdGVUaW1lI3BsdXN9LiBZb3UgbWF5IHdpc2ggdG8gdXNlIHtAbGluayBEYXRlVGltZSN0b0xvY2FsfSBhbmQge0BsaW5rIERhdGVUaW1lI3RvVVRDfSB3aGljaCBwcm92aWRlIHNpbXBsZSBjb252ZW5pZW5jZSB3cmFwcGVycyBmb3IgY29tbW9ubHkgdXNlZCB6b25lcy4KICAgICAqIEBwYXJhbSB7c3RyaW5nfFpvbmV9IFt6b25lPSdsb2NhbCddIC0gYSB6b25lIGlkZW50aWZpZXIuIEFzIGEgc3RyaW5nLCB0aGF0IGNhbiBiZSBhbnkgSUFOQSB6b25lIHN1cHBvcnRlZCBieSB0aGUgaG9zdCBlbnZpcm9ubWVudCwgb3IgYSBmaXhlZC1vZmZzZXQgbmFtZSBvZiB0aGUgZm9ybSAnVVRDKzMnLCBvciB0aGUgc3RyaW5ncyAnbG9jYWwnIG9yICd1dGMnLiBZb3UgbWF5IGFsc28gc3VwcGx5IGFuIGluc3RhbmNlIG9mIGEge0BsaW5rIERhdGVUaW1lI1pvbmV9IGNsYXNzLgogICAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zCiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLmtlZXBMb2NhbFRpbWU9ZmFsc2VdIC0gSWYgdHJ1ZSwgYWRqdXN0IHRoZSB1bmRlcmx5aW5nIHRpbWUgc28gdGhhdCB0aGUgbG9jYWwgdGltZSBzdGF5cyB0aGUgc2FtZSwgYnV0IGluIHRoZSB0YXJnZXQgem9uZS4gWW91IHNob3VsZCByYXJlbHkgbmVlZCB0aGlzLgogICAgICogQHJldHVybiB7RGF0ZVRpbWV9CiAgICAgKi8KICAgIHNldFpvbmUoem9uZSwgeyBrZWVwTG9jYWxUaW1lID0gZmFsc2UsIGtlZXBDYWxlbmRhclRpbWUgPSBmYWxzZSB9ID0ge30pIHsKICAgICAgem9uZSA9IG5vcm1hbGl6ZVpvbmUoem9uZSwgU2V0dGluZ3MuZGVmYXVsdFpvbmUpOwogICAgICBpZiAoem9uZS5lcXVhbHModGhpcy56b25lKSkgewogICAgICAgIHJldHVybiB0aGlzOwogICAgICB9IGVsc2UgaWYgKCF6b25lLmlzVmFsaWQpIHsKICAgICAgICByZXR1cm4gRGF0ZVRpbWUuaW52YWxpZCh1bnN1cHBvcnRlZFpvbmUoem9uZSkpOwogICAgICB9IGVsc2UgewogICAgICAgIGxldCBuZXdUUyA9IHRoaXMudHM7CiAgICAgICAgaWYgKGtlZXBMb2NhbFRpbWUgfHwga2VlcENhbGVuZGFyVGltZSkgewogICAgICAgICAgY29uc3Qgb2Zmc2V0R3Vlc3MgPSB6b25lLm9mZnNldCh0aGlzLnRzKTsKICAgICAgICAgIGNvbnN0IGFzT2JqID0gdGhpcy50b09iamVjdCgpOwogICAgICAgICAgW25ld1RTXSA9IG9ialRvVFMoYXNPYmosIG9mZnNldEd1ZXNzLCB6b25lKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGNsb25lJDEodGhpcywgeyB0czogbmV3VFMsIHpvbmUgfSk7CiAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqICJTZXQiIHRoZSBsb2NhbGUsIG51bWJlcmluZ1N5c3RlbSwgb3Igb3V0cHV0Q2FsZW5kYXIuIFJldHVybnMgYSBuZXdseS1jb25zdHJ1Y3RlZCBEYXRlVGltZS4KICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wZXJ0aWVzIC0gdGhlIHByb3BlcnRpZXMgdG8gc2V0CiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCA1LCAyNSkucmVjb25maWd1cmUoeyBsb2NhbGU6ICdlbi1HQicgfSkKICAgICAqIEByZXR1cm4ge0RhdGVUaW1lfQogICAgICovCiAgICByZWNvbmZpZ3VyZSh7IGxvY2FsZSwgbnVtYmVyaW5nU3lzdGVtLCBvdXRwdXRDYWxlbmRhciB9ID0ge30pIHsKICAgICAgY29uc3QgbG9jID0gdGhpcy5sb2MuY2xvbmUoeyBsb2NhbGUsIG51bWJlcmluZ1N5c3RlbSwgb3V0cHV0Q2FsZW5kYXIgfSk7CiAgICAgIHJldHVybiBjbG9uZSQxKHRoaXMsIHsgbG9jIH0pOwogICAgfQoKICAgIC8qKgogICAgICogIlNldCIgdGhlIGxvY2FsZS4gUmV0dXJucyBhIG5ld2x5LWNvbnN0cnVjdGVkIERhdGVUaW1lLgogICAgICogSnVzdCBhIGNvbnZlbmllbnQgYWxpYXMgZm9yIHJlY29uZmlndXJlKHsgbG9jYWxlIH0pCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCA1LCAyNSkuc2V0TG9jYWxlKCdlbi1HQicpCiAgICAgKiBAcmV0dXJuIHtEYXRlVGltZX0KICAgICAqLwogICAgc2V0TG9jYWxlKGxvY2FsZSkgewogICAgICByZXR1cm4gdGhpcy5yZWNvbmZpZ3VyZSh7IGxvY2FsZSB9KTsKICAgIH0KCiAgICAvKioKICAgICAqICJTZXQiIHRoZSB2YWx1ZXMgb2Ygc3BlY2lmaWVkIHVuaXRzLiBSZXR1cm5zIGEgbmV3bHktY29uc3RydWN0ZWQgRGF0ZVRpbWUuCiAgICAgKiBZb3UgY2FuIG9ubHkgc2V0IHVuaXRzIHdpdGggdGhpcyBtZXRob2Q7IGZvciAic2V0dGluZyIgbWV0YWRhdGEsIHNlZSB7QGxpbmsgRGF0ZVRpbWUjcmVjb25maWd1cmV9IGFuZCB7QGxpbmsgRGF0ZVRpbWUjc2V0Wm9uZX0uCiAgICAgKiBAcGFyYW0ge09iamVjdH0gdmFsdWVzIC0gYSBtYXBwaW5nIG9mIHVuaXRzIHRvIG51bWJlcnMKICAgICAqIEBleGFtcGxlIGR0LnNldCh7IHllYXI6IDIwMTcgfSkKICAgICAqIEBleGFtcGxlIGR0LnNldCh7IGhvdXI6IDgsIG1pbnV0ZTogMzAgfSkKICAgICAqIEBleGFtcGxlIGR0LnNldCh7IHdlZWtkYXk6IDUgfSkKICAgICAqIEBleGFtcGxlIGR0LnNldCh7IHllYXI6IDIwMDUsIG9yZGluYWw6IDIzNCB9KQogICAgICogQHJldHVybiB7RGF0ZVRpbWV9CiAgICAgKi8KICAgIHNldCh2YWx1ZXMpIHsKICAgICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiB0aGlzOwoKICAgICAgY29uc3Qgbm9ybWFsaXplZCA9IG5vcm1hbGl6ZU9iamVjdCh2YWx1ZXMsIG5vcm1hbGl6ZVVuaXQpLAogICAgICAgIHNldHRpbmdXZWVrU3R1ZmYgPQogICAgICAgICAgIWlzVW5kZWZpbmVkKG5vcm1hbGl6ZWQud2Vla1llYXIpIHx8CiAgICAgICAgICAhaXNVbmRlZmluZWQobm9ybWFsaXplZC53ZWVrTnVtYmVyKSB8fAogICAgICAgICAgIWlzVW5kZWZpbmVkKG5vcm1hbGl6ZWQud2Vla2RheSksCiAgICAgICAgY29udGFpbnNPcmRpbmFsID0gIWlzVW5kZWZpbmVkKG5vcm1hbGl6ZWQub3JkaW5hbCksCiAgICAgICAgY29udGFpbnNHcmVnb3JZZWFyID0gIWlzVW5kZWZpbmVkKG5vcm1hbGl6ZWQueWVhciksCiAgICAgICAgY29udGFpbnNHcmVnb3JNRCA9ICFpc1VuZGVmaW5lZChub3JtYWxpemVkLm1vbnRoKSB8fCAhaXNVbmRlZmluZWQobm9ybWFsaXplZC5kYXkpLAogICAgICAgIGNvbnRhaW5zR3JlZ29yID0gY29udGFpbnNHcmVnb3JZZWFyIHx8IGNvbnRhaW5zR3JlZ29yTUQsCiAgICAgICAgZGVmaW5pdGVXZWVrRGVmID0gbm9ybWFsaXplZC53ZWVrWWVhciB8fCBub3JtYWxpemVkLndlZWtOdW1iZXI7CgogICAgICBpZiAoKGNvbnRhaW5zR3JlZ29yIHx8IGNvbnRhaW5zT3JkaW5hbCkgJiYgZGVmaW5pdGVXZWVrRGVmKSB7CiAgICAgICAgdGhyb3cgbmV3IENvbmZsaWN0aW5nU3BlY2lmaWNhdGlvbkVycm9yKAogICAgICAgICAgIkNhbid0IG1peCB3ZWVrWWVhci93ZWVrTnVtYmVyIHVuaXRzIHdpdGggeWVhci9tb250aC9kYXkgb3Igb3JkaW5hbHMiCiAgICAgICAgKTsKICAgICAgfQoKICAgICAgaWYgKGNvbnRhaW5zR3JlZ29yTUQgJiYgY29udGFpbnNPcmRpbmFsKSB7CiAgICAgICAgdGhyb3cgbmV3IENvbmZsaWN0aW5nU3BlY2lmaWNhdGlvbkVycm9yKCJDYW4ndCBtaXggb3JkaW5hbCBkYXRlcyB3aXRoIG1vbnRoL2RheSIpOwogICAgICB9CgogICAgICBsZXQgbWl4ZWQ7CiAgICAgIGlmIChzZXR0aW5nV2Vla1N0dWZmKSB7CiAgICAgICAgbWl4ZWQgPSB3ZWVrVG9HcmVnb3JpYW4oeyAuLi5ncmVnb3JpYW5Ub1dlZWsodGhpcy5jKSwgLi4ubm9ybWFsaXplZCB9KTsKICAgICAgfSBlbHNlIGlmICghaXNVbmRlZmluZWQobm9ybWFsaXplZC5vcmRpbmFsKSkgewogICAgICAgIG1peGVkID0gb3JkaW5hbFRvR3JlZ29yaWFuKHsgLi4uZ3JlZ29yaWFuVG9PcmRpbmFsKHRoaXMuYyksIC4uLm5vcm1hbGl6ZWQgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbWl4ZWQgPSB7IC4uLnRoaXMudG9PYmplY3QoKSwgLi4ubm9ybWFsaXplZCB9OwoKICAgICAgICAvLyBpZiB3ZSBkaWRuJ3Qgc2V0IHRoZSBkYXkgYnV0IHdlIGVuZGVkIHVwIG9uIGFuIG92ZXJmbG93IGRhdGUsCiAgICAgICAgLy8gdXNlIHRoZSBsYXN0IGRheSBvZiB0aGUgcmlnaHQgbW9udGgKICAgICAgICBpZiAoaXNVbmRlZmluZWQobm9ybWFsaXplZC5kYXkpKSB7CiAgICAgICAgICBtaXhlZC5kYXkgPSBNYXRoLm1pbihkYXlzSW5Nb250aChtaXhlZC55ZWFyLCBtaXhlZC5tb250aCksIG1peGVkLmRheSk7CiAgICAgICAgfQogICAgICB9CgogICAgICBjb25zdCBbdHMsIG9dID0gb2JqVG9UUyhtaXhlZCwgdGhpcy5vLCB0aGlzLnpvbmUpOwogICAgICByZXR1cm4gY2xvbmUkMSh0aGlzLCB7IHRzLCBvIH0pOwogICAgfQoKICAgIC8qKgogICAgICogQWRkIGEgcGVyaW9kIG9mIHRpbWUgdG8gdGhpcyBEYXRlVGltZSBhbmQgcmV0dXJuIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUKICAgICAqCiAgICAgKiBBZGRpbmcgaG91cnMsIG1pbnV0ZXMsIHNlY29uZHMsIG9yIG1pbGxpc2Vjb25kcyBpbmNyZWFzZXMgdGhlIHRpbWVzdGFtcCBieSB0aGUgcmlnaHQgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcy4gQWRkaW5nIGRheXMsIG1vbnRocywgb3IgeWVhcnMgc2hpZnRzIHRoZSBjYWxlbmRhciwgYWNjb3VudGluZyBmb3IgRFNUcyBhbmQgbGVhcCB5ZWFycyBhbG9uZyB0aGUgd2F5LiBUaHVzLCBgZHQucGx1cyh7IGhvdXJzOiAyNCB9KWAgbWF5IHJlc3VsdCBpbiBhIGRpZmZlcmVudCB0aW1lIHRoYW4gYGR0LnBsdXMoeyBkYXlzOiAxIH0pYCBpZiB0aGVyZSdzIGEgRFNUIHNoaWZ0IGluIGJldHdlZW4uCiAgICAgKiBAcGFyYW0ge0R1cmF0aW9ufE9iamVjdHxudW1iZXJ9IGR1cmF0aW9uIC0gVGhlIGFtb3VudCB0byBhZGQuIEVpdGhlciBhIEx1eG9uIER1cmF0aW9uLCBhIG51bWJlciBvZiBtaWxsaXNlY29uZHMsIHRoZSBvYmplY3QgYXJndW1lbnQgdG8gRHVyYXRpb24uZnJvbU9iamVjdCgpCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS5wbHVzKDEyMykgLy9+PiBpbiAxMjMgbWlsbGlzZWNvbmRzCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS5wbHVzKHsgbWludXRlczogMTUgfSkgLy9+PiBpbiAxNSBtaW51dGVzCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS5wbHVzKHsgZGF5czogMSB9KSAvL34+IHRoaXMgdGltZSB0b21vcnJvdwogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkucGx1cyh7IGRheXM6IC0xIH0pIC8vfj4gdGhpcyB0aW1lIHllc3RlcmRheQogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkucGx1cyh7IGhvdXJzOiAzLCBtaW51dGVzOiAxMyB9KSAvL34+IGluIDMgaHIsIDEzIG1pbgogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkucGx1cyhEdXJhdGlvbi5mcm9tT2JqZWN0KHsgaG91cnM6IDMsIG1pbnV0ZXM6IDEzIH0pKSAvL34+IGluIDMgaHIsIDEzIG1pbgogICAgICogQHJldHVybiB7RGF0ZVRpbWV9CiAgICAgKi8KICAgIHBsdXMoZHVyYXRpb24pIHsKICAgICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiB0aGlzOwogICAgICBjb25zdCBkdXIgPSBEdXJhdGlvbi5mcm9tRHVyYXRpb25MaWtlKGR1cmF0aW9uKTsKICAgICAgcmV0dXJuIGNsb25lJDEodGhpcywgYWRqdXN0VGltZSh0aGlzLCBkdXIpKTsKICAgIH0KCiAgICAvKioKICAgICAqIFN1YnRyYWN0IGEgcGVyaW9kIG9mIHRpbWUgdG8gdGhpcyBEYXRlVGltZSBhbmQgcmV0dXJuIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUKICAgICAqIFNlZSB7QGxpbmsgRGF0ZVRpbWUjcGx1c30KICAgICAqIEBwYXJhbSB7RHVyYXRpb258T2JqZWN0fG51bWJlcn0gZHVyYXRpb24gLSBUaGUgYW1vdW50IHRvIHN1YnRyYWN0LiBFaXRoZXIgYSBMdXhvbiBEdXJhdGlvbiwgYSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzLCB0aGUgb2JqZWN0IGFyZ3VtZW50IHRvIER1cmF0aW9uLmZyb21PYmplY3QoKQogICAgIEByZXR1cm4ge0RhdGVUaW1lfQogICAgICovCiAgICBtaW51cyhkdXJhdGlvbikgewogICAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIHRoaXM7CiAgICAgIGNvbnN0IGR1ciA9IER1cmF0aW9uLmZyb21EdXJhdGlvbkxpa2UoZHVyYXRpb24pLm5lZ2F0ZSgpOwogICAgICByZXR1cm4gY2xvbmUkMSh0aGlzLCBhZGp1c3RUaW1lKHRoaXMsIGR1cikpOwogICAgfQoKICAgIC8qKgogICAgICogIlNldCIgdGhpcyBEYXRlVGltZSB0byB0aGUgYmVnaW5uaW5nIG9mIGEgdW5pdCBvZiB0aW1lLgogICAgICogQHBhcmFtIHtzdHJpbmd9IHVuaXQgLSBUaGUgdW5pdCB0byBnbyB0byB0aGUgYmVnaW5uaW5nIG9mLiBDYW4gYmUgJ3llYXInLCAncXVhcnRlcicsICdtb250aCcsICd3ZWVrJywgJ2RheScsICdob3VyJywgJ21pbnV0ZScsICdzZWNvbmQnLCBvciAnbWlsbGlzZWNvbmQnLgogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNCwgMywgMykuc3RhcnRPZignbW9udGgnKS50b0lTT0RhdGUoKTsgLy89PiAnMjAxNC0wMy0wMScKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTQsIDMsIDMpLnN0YXJ0T2YoJ3llYXInKS50b0lTT0RhdGUoKTsgLy89PiAnMjAxNC0wMS0wMScKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTQsIDMsIDMpLnN0YXJ0T2YoJ3dlZWsnKS50b0lTT0RhdGUoKTsgLy89PiAnMjAxNC0wMy0wMycsIHdlZWtzIGFsd2F5cyBzdGFydCBvbiBNb25kYXlzCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE0LCAzLCAzLCA1LCAzMCkuc3RhcnRPZignZGF5JykudG9JU09UaW1lKCk7IC8vPT4gJzAwOjAwLjAwMC0wNTowMCcKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTQsIDMsIDMsIDUsIDMwKS5zdGFydE9mKCdob3VyJykudG9JU09UaW1lKCk7IC8vPT4gJzA1OjAwOjAwLjAwMC0wNTowMCcKICAgICAqIEByZXR1cm4ge0RhdGVUaW1lfQogICAgICovCiAgICBzdGFydE9mKHVuaXQpIHsKICAgICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiB0aGlzOwogICAgICBjb25zdCBvID0ge30sCiAgICAgICAgbm9ybWFsaXplZFVuaXQgPSBEdXJhdGlvbi5ub3JtYWxpemVVbml0KHVuaXQpOwogICAgICBzd2l0Y2ggKG5vcm1hbGl6ZWRVbml0KSB7CiAgICAgICAgY2FzZSAieWVhcnMiOgogICAgICAgICAgby5tb250aCA9IDE7CiAgICAgICAgLy8gZmFsbHMgdGhyb3VnaAogICAgICAgIGNhc2UgInF1YXJ0ZXJzIjoKICAgICAgICBjYXNlICJtb250aHMiOgogICAgICAgICAgby5kYXkgPSAxOwogICAgICAgIC8vIGZhbGxzIHRocm91Z2gKICAgICAgICBjYXNlICJ3ZWVrcyI6CiAgICAgICAgY2FzZSAiZGF5cyI6CiAgICAgICAgICBvLmhvdXIgPSAwOwogICAgICAgIC8vIGZhbGxzIHRocm91Z2gKICAgICAgICBjYXNlICJob3VycyI6CiAgICAgICAgICBvLm1pbnV0ZSA9IDA7CiAgICAgICAgLy8gZmFsbHMgdGhyb3VnaAogICAgICAgIGNhc2UgIm1pbnV0ZXMiOgogICAgICAgICAgby5zZWNvbmQgPSAwOwogICAgICAgIC8vIGZhbGxzIHRocm91Z2gKICAgICAgICBjYXNlICJzZWNvbmRzIjoKICAgICAgICAgIG8ubWlsbGlzZWNvbmQgPSAwOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgLy8gbm8gZGVmYXVsdCwgaW52YWxpZCB1bml0cyB0aHJvdyBpbiBub3JtYWxpemVVbml0KCkKICAgICAgfQoKICAgICAgaWYgKG5vcm1hbGl6ZWRVbml0ID09PSAid2Vla3MiKSB7CiAgICAgICAgby53ZWVrZGF5ID0gMTsKICAgICAgfQoKICAgICAgaWYgKG5vcm1hbGl6ZWRVbml0ID09PSAicXVhcnRlcnMiKSB7CiAgICAgICAgY29uc3QgcSA9IE1hdGguY2VpbCh0aGlzLm1vbnRoIC8gMyk7CiAgICAgICAgby5tb250aCA9IChxIC0gMSkgKiAzICsgMTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXMuc2V0KG8pOwogICAgfQoKICAgIC8qKgogICAgICogIlNldCIgdGhpcyBEYXRlVGltZSB0byB0aGUgZW5kIChtZWFuaW5nIHRoZSBsYXN0IG1pbGxpc2Vjb25kKSBvZiBhIHVuaXQgb2YgdGltZQogICAgICogQHBhcmFtIHtzdHJpbmd9IHVuaXQgLSBUaGUgdW5pdCB0byBnbyB0byB0aGUgZW5kIG9mLiBDYW4gYmUgJ3llYXInLCAncXVhcnRlcicsICdtb250aCcsICd3ZWVrJywgJ2RheScsICdob3VyJywgJ21pbnV0ZScsICdzZWNvbmQnLCBvciAnbWlsbGlzZWNvbmQnLgogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNCwgMywgMykuZW5kT2YoJ21vbnRoJykudG9JU08oKTsgLy89PiAnMjAxNC0wMy0zMVQyMzo1OTo1OS45OTktMDU6MDAnCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE0LCAzLCAzKS5lbmRPZigneWVhcicpLnRvSVNPKCk7IC8vPT4gJzIwMTQtMTItMzFUMjM6NTk6NTkuOTk5LTA1OjAwJwogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNCwgMywgMykuZW5kT2YoJ3dlZWsnKS50b0lTTygpOyAvLyA9PiAnMjAxNC0wMy0wOVQyMzo1OTo1OS45OTktMDU6MDAnLCB3ZWVrcyBzdGFydCBvbiBNb25kYXlzCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE0LCAzLCAzLCA1LCAzMCkuZW5kT2YoJ2RheScpLnRvSVNPKCk7IC8vPT4gJzIwMTQtMDMtMDNUMjM6NTk6NTkuOTk5LTA1OjAwJwogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNCwgMywgMywgNSwgMzApLmVuZE9mKCdob3VyJykudG9JU08oKTsgLy89PiAnMjAxNC0wMy0wM1QwNTo1OTo1OS45OTktMDU6MDAnCiAgICAgKiBAcmV0dXJuIHtEYXRlVGltZX0KICAgICAqLwogICAgZW5kT2YodW5pdCkgewogICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkCiAgICAgICAgPyB0aGlzLnBsdXMoeyBbdW5pdF06IDEgfSkKICAgICAgICAgICAgLnN0YXJ0T2YodW5pdCkKICAgICAgICAgICAgLm1pbnVzKDEpCiAgICAgICAgOiB0aGlzOwogICAgfQoKICAgIC8vIE9VVFBVVAoKICAgIC8qKgogICAgICogUmV0dXJucyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIERhdGVUaW1lIGZvcm1hdHRlZCBhY2NvcmRpbmcgdG8gdGhlIHNwZWNpZmllZCBmb3JtYXQgc3RyaW5nLgogICAgICogKipZb3UgbWF5IG5vdCB3YW50IHRoaXMuKiogU2VlIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9yIGEgbW9yZSBmbGV4aWJsZSBmb3JtYXR0aW5nIHRvb2wuIEZvciBhIHRhYmxlIG9mIHRva2VucyBhbmQgdGhlaXIgaW50ZXJwcmV0YXRpb25zLCBzZWUgW2hlcmVdKGh0dHBzOi8vbW9tZW50LmdpdGh1Yi5pby9sdXhvbi8jL2Zvcm1hdHRpbmc/aWQ9dGFibGUtb2YtdG9rZW5zKS4KICAgICAqIERlZmF1bHRzIHRvIGVuLVVTIGlmIG5vIGxvY2FsZSBoYXMgYmVlbiBzcGVjaWZpZWQsIHJlZ2FyZGxlc3Mgb2YgdGhlIHN5c3RlbSdzIGxvY2FsZS4KICAgICAqIEBwYXJhbSB7c3RyaW5nfSBmbXQgLSB0aGUgZm9ybWF0IHN0cmluZwogICAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRzIHRvIG92ZXJyaWRlIHRoZSBjb25maWd1cmF0aW9uIG9wdGlvbnMgb24gdGhpcyBEYXRlVGltZQogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkudG9Gb3JtYXQoJ3l5eXkgTExMIGRkJykgLy89PiAnMjAxNyBBcHIgMjInCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS5zZXRMb2NhbGUoJ2ZyJykudG9Gb3JtYXQoJ3l5eXkgTExMIGRkJykgLy89PiAnMjAxNyBhdnIuIDIyJwogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkudG9Gb3JtYXQoJ3l5eXkgTExMIGRkJywgeyBsb2NhbGU6ICJmciIgfSkgLy89PiAnMjAxNyBhdnIuIDIyJwogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkudG9Gb3JtYXQoIkhIICdob3VycyBhbmQnIG1tICdtaW51dGVzJyIpIC8vPT4gJzIwIGhvdXJzIGFuZCA1NSBtaW51dGVzJwogICAgICogQHJldHVybiB7c3RyaW5nfQogICAgICovCiAgICB0b0Zvcm1hdChmbXQsIG9wdHMgPSB7fSkgewogICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkCiAgICAgICAgPyBGb3JtYXR0ZXIuY3JlYXRlKHRoaXMubG9jLnJlZGVmYXVsdFRvRU4ob3B0cykpLmZvcm1hdERhdGVUaW1lRnJvbVN0cmluZyh0aGlzLCBmbXQpCiAgICAgICAgOiBJTlZBTElEJDE7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIGEgbG9jYWxpemVkIHN0cmluZyByZXByZXNlbnRpbmcgdGhpcyBkYXRlLiBBY2NlcHRzIHRoZSBzYW1lIG9wdGlvbnMgYXMgdGhlIEludGwuRGF0ZVRpbWVGb3JtYXQgY29uc3RydWN0b3IgYW5kIGFueSBwcmVzZXRzIGRlZmluZWQgYnkgTHV4b24sIHN1Y2ggYXMgYERhdGVUaW1lLkRBVEVfRlVMTGAgb3IgYERhdGVUaW1lLlRJTUVfU0lNUExFYC4KICAgICAqIFRoZSBleGFjdCBiZWhhdmlvciBvZiB0aGlzIG1ldGhvZCBpcyBicm93c2VyLXNwZWNpZmljLCBidXQgaW4gZ2VuZXJhbCBpdCB3aWxsIHJldHVybiBhbiBhcHByb3ByaWF0ZSByZXByZXNlbnRhdGlvbgogICAgICogb2YgdGhlIERhdGVUaW1lIGluIHRoZSBhc3NpZ25lZCBsb2NhbGUuCiAgICAgKiBEZWZhdWx0cyB0byB0aGUgc3lzdGVtJ3MgbG9jYWxlIGlmIG5vIGxvY2FsZSBoYXMgYmVlbiBzcGVjaWZpZWQKICAgICAqIEBzZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvRGF0ZVRpbWVGb3JtYXQKICAgICAqIEBwYXJhbSBmb3JtYXRPcHRzIHtPYmplY3R9IC0gSW50bC5EYXRlVGltZUZvcm1hdCBjb25zdHJ1Y3RvciBvcHRpb25zIGFuZCBjb25maWd1cmF0aW9uIG9wdGlvbnMKICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0cyB0byBvdmVycmlkZSB0aGUgY29uZmlndXJhdGlvbiBvcHRpb25zIG9uIHRoaXMgRGF0ZVRpbWUKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnRvTG9jYWxlU3RyaW5nKCk7IC8vPT4gNC8yMC8yMDE3CiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS5zZXRMb2NhbGUoJ2VuLWdiJykudG9Mb2NhbGVTdHJpbmcoKTsgLy89PiAnMjAvMDQvMjAxNycKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnRvTG9jYWxlU3RyaW5nKERhdGVUaW1lLkRBVEVfRlVMTCk7IC8vPT4gJ0FwcmlsIDIwLCAyMDE3JwogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkudG9Mb2NhbGVTdHJpbmcoRGF0ZVRpbWUuREFURV9GVUxMLCB7IGxvY2FsZTogJ2ZyJyB9KTsgLy89PiAnMjggYW/Du3QgMjAyMicKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnRvTG9jYWxlU3RyaW5nKERhdGVUaW1lLlRJTUVfU0lNUExFKTsgLy89PiAnMTE6MzIgQU0nCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS50b0xvY2FsZVN0cmluZyhEYXRlVGltZS5EQVRFVElNRV9TSE9SVCk7IC8vPT4gJzQvMjAvMjAxNywgMTE6MzIgQU0nCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS50b0xvY2FsZVN0cmluZyh7IHdlZWtkYXk6ICdsb25nJywgbW9udGg6ICdsb25nJywgZGF5OiAnMi1kaWdpdCcgfSk7IC8vPT4gJ1RodXJzZGF5LCBBcHJpbCAyMCcKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnRvTG9jYWxlU3RyaW5nKHsgd2Vla2RheTogJ3Nob3J0JywgbW9udGg6ICdzaG9ydCcsIGRheTogJzItZGlnaXQnLCBob3VyOiAnMi1kaWdpdCcsIG1pbnV0ZTogJzItZGlnaXQnIH0pOyAvLz0+ICdUaHUsIEFwciAyMCwgMTE6MjcgQU0nCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS50b0xvY2FsZVN0cmluZyh7IGhvdXI6ICcyLWRpZ2l0JywgbWludXRlOiAnMi1kaWdpdCcsIGhvdXJDeWNsZTogJ2gyMycgfSk7IC8vPT4gJzExOjMyJwogICAgICogQHJldHVybiB7c3RyaW5nfQogICAgICovCiAgICB0b0xvY2FsZVN0cmluZyhmb3JtYXRPcHRzID0gREFURV9TSE9SVCwgb3B0cyA9IHt9KSB7CiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQKICAgICAgICA/IEZvcm1hdHRlci5jcmVhdGUodGhpcy5sb2MuY2xvbmUob3B0cyksIGZvcm1hdE9wdHMpLmZvcm1hdERhdGVUaW1lKHRoaXMpCiAgICAgICAgOiBJTlZBTElEJDE7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIGFuIGFycmF5IG9mIGZvcm1hdCAicGFydHMiLCBtZWFuaW5nIGluZGl2aWR1YWwgdG9rZW5zIGFsb25nIHdpdGggbWV0YWRhdGEuIFRoaXMgaXMgYWxsb3dzIGNhbGxlcnMgdG8gcG9zdC1wcm9jZXNzIGluZGl2aWR1YWwgc2VjdGlvbnMgb2YgdGhlIGZvcm1hdHRlZCBvdXRwdXQuCiAgICAgKiBEZWZhdWx0cyB0byB0aGUgc3lzdGVtJ3MgbG9jYWxlIGlmIG5vIGxvY2FsZSBoYXMgYmVlbiBzcGVjaWZpZWQKICAgICAqIEBzZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvRGF0ZVRpbWVGb3JtYXQvZm9ybWF0VG9QYXJ0cwogICAgICogQHBhcmFtIG9wdHMge09iamVjdH0gLSBJbnRsLkRhdGVUaW1lRm9ybWF0IGNvbnN0cnVjdG9yIG9wdGlvbnMsIHNhbWUgYXMgYHRvTG9jYWxlU3RyaW5nYC4KICAgICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnRvTG9jYWxlUGFydHMoKTsgLy89PiBbCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy89PiAgIHsgdHlwZTogJ2RheScsIHZhbHVlOiAnMjUnIH0sCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy89PiAgIHsgdHlwZTogJ2xpdGVyYWwnLCB2YWx1ZTogJy8nIH0sCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy89PiAgIHsgdHlwZTogJ21vbnRoJywgdmFsdWU6ICcwNScgfSwKICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLz0+ICAgeyB0eXBlOiAnbGl0ZXJhbCcsIHZhbHVlOiAnLycgfSwKICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLz0+ICAgeyB0eXBlOiAneWVhcicsIHZhbHVlOiAnMTk4MicgfQogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vPT4gXQogICAgICovCiAgICB0b0xvY2FsZVBhcnRzKG9wdHMgPSB7fSkgewogICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkCiAgICAgICAgPyBGb3JtYXR0ZXIuY3JlYXRlKHRoaXMubG9jLmNsb25lKG9wdHMpLCBvcHRzKS5mb3JtYXREYXRlVGltZVBhcnRzKHRoaXMpCiAgICAgICAgOiBbXTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgYW4gSVNPIDg2MDEtY29tcGxpYW50IHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIERhdGVUaW1lCiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnMKICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuc3VwcHJlc3NNaWxsaXNlY29uZHM9ZmFsc2VdIC0gZXhjbHVkZSBtaWxsaXNlY29uZHMgZnJvbSB0aGUgZm9ybWF0IGlmIHRoZXkncmUgMAogICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5zdXBwcmVzc1NlY29uZHM9ZmFsc2VdIC0gZXhjbHVkZSBzZWNvbmRzIGZyb20gdGhlIGZvcm1hdCBpZiB0aGV5J3JlIDAKICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuaW5jbHVkZU9mZnNldD10cnVlXSAtIGluY2x1ZGUgdGhlIG9mZnNldCwgc3VjaCBhcyAnWicgb3IgJy0wNDowMCcKICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuZXh0ZW5kZWRab25lPWZhbHNlXSAtIGFkZCB0aGUgdGltZSB6b25lIGZvcm1hdCBleHRlbnNpb24KICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5mb3JtYXQ9J2V4dGVuZGVkJ10gLSBjaG9vc2UgYmV0d2VlbiB0aGUgYmFzaWMgYW5kIGV4dGVuZGVkIGZvcm1hdAogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKDE5ODMsIDUsIDI1KS50b0lTTygpIC8vPT4gJzE5ODItMDUtMjVUMDA6MDA6MDAuMDAwWicKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnRvSVNPKCkgLy89PiAnMjAxNy0wNC0yMlQyMDo0NzowNS4zMzUtMDQ6MDAnCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS50b0lTTyh7IGluY2x1ZGVPZmZzZXQ6IGZhbHNlIH0pIC8vPT4gJzIwMTctMDQtMjJUMjA6NDc6MDUuMzM1JwogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkudG9JU08oeyBmb3JtYXQ6ICdiYXNpYycgfSkgLy89PiAnMjAxNzA0MjJUMjA0NzA1LjMzNS0wNDAwJwogICAgICogQHJldHVybiB7c3RyaW5nfQogICAgICovCiAgICB0b0lTTyh7CiAgICAgIGZvcm1hdCA9ICJleHRlbmRlZCIsCiAgICAgIHN1cHByZXNzU2Vjb25kcyA9IGZhbHNlLAogICAgICBzdXBwcmVzc01pbGxpc2Vjb25kcyA9IGZhbHNlLAogICAgICBpbmNsdWRlT2Zmc2V0ID0gdHJ1ZSwKICAgICAgZXh0ZW5kZWRab25lID0gZmFsc2UsCiAgICB9ID0ge30pIHsKICAgICAgaWYgKCF0aGlzLmlzVmFsaWQpIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQoKICAgICAgY29uc3QgZXh0ID0gZm9ybWF0ID09PSAiZXh0ZW5kZWQiOwoKICAgICAgbGV0IGMgPSB0b0lTT0RhdGUodGhpcywgZXh0KTsKICAgICAgYyArPSAiVCI7CiAgICAgIGMgKz0gdG9JU09UaW1lKHRoaXMsIGV4dCwgc3VwcHJlc3NTZWNvbmRzLCBzdXBwcmVzc01pbGxpc2Vjb25kcywgaW5jbHVkZU9mZnNldCwgZXh0ZW5kZWRab25lKTsKICAgICAgcmV0dXJuIGM7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIGFuIElTTyA4NjAxLWNvbXBsaWFudCBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBEYXRlVGltZSdzIGRhdGUgY29tcG9uZW50CiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnMKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5mb3JtYXQ9J2V4dGVuZGVkJ10gLSBjaG9vc2UgYmV0d2VlbiB0aGUgYmFzaWMgYW5kIGV4dGVuZGVkIGZvcm1hdAogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKDE5ODIsIDUsIDI1KS50b0lTT0RhdGUoKSAvLz0+ICcxOTgyLTA1LTI1JwogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKDE5ODIsIDUsIDI1KS50b0lTT0RhdGUoeyBmb3JtYXQ6ICdiYXNpYycgfSkgLy89PiAnMTk4MjA1MjUnCiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9CiAgICAgKi8KICAgIHRvSVNPRGF0ZSh7IGZvcm1hdCA9ICJleHRlbmRlZCIgfSA9IHt9KSB7CiAgICAgIGlmICghdGhpcy5pc1ZhbGlkKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KCiAgICAgIHJldHVybiB0b0lTT0RhdGUodGhpcywgZm9ybWF0ID09PSAiZXh0ZW5kZWQiKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgYW4gSVNPIDg2MDEtY29tcGxpYW50IHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIERhdGVUaW1lJ3Mgd2VlayBkYXRlCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS51dGMoMTk4MiwgNSwgMjUpLnRvSVNPV2Vla0RhdGUoKSAvLz0+ICcxOTgyLVcyMS0yJwogICAgICogQHJldHVybiB7c3RyaW5nfQogICAgICovCiAgICB0b0lTT1dlZWtEYXRlKCkgewogICAgICByZXR1cm4gdG9UZWNoRm9ybWF0KHRoaXMsICJra2trLSdXJ1dXLWMiKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgYW4gSVNPIDg2MDEtY29tcGxpYW50IHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIERhdGVUaW1lJ3MgdGltZSBjb21wb25lbnQKICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9ucwogICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5zdXBwcmVzc01pbGxpc2Vjb25kcz1mYWxzZV0gLSBleGNsdWRlIG1pbGxpc2Vjb25kcyBmcm9tIHRoZSBmb3JtYXQgaWYgdGhleSdyZSAwCiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLnN1cHByZXNzU2Vjb25kcz1mYWxzZV0gLSBleGNsdWRlIHNlY29uZHMgZnJvbSB0aGUgZm9ybWF0IGlmIHRoZXkncmUgMAogICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5pbmNsdWRlT2Zmc2V0PXRydWVdIC0gaW5jbHVkZSB0aGUgb2Zmc2V0LCBzdWNoIGFzICdaJyBvciAnLTA0OjAwJwogICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5leHRlbmRlZFpvbmU9dHJ1ZV0gLSBhZGQgdGhlIHRpbWUgem9uZSBmb3JtYXQgZXh0ZW5zaW9uCiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLmluY2x1ZGVQcmVmaXg9ZmFsc2VdIC0gaW5jbHVkZSB0aGUgYFRgIHByZWZpeAogICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmZvcm1hdD0nZXh0ZW5kZWQnXSAtIGNob29zZSBiZXR3ZWVuIHRoZSBiYXNpYyBhbmQgZXh0ZW5kZWQgZm9ybWF0CiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS51dGMoKS5zZXQoeyBob3VyOiA3LCBtaW51dGU6IDM0IH0pLnRvSVNPVGltZSgpIC8vPT4gJzA3OjM0OjE5LjM2MVonCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS51dGMoKS5zZXQoeyBob3VyOiA3LCBtaW51dGU6IDM0LCBzZWNvbmRzOiAwLCBtaWxsaXNlY29uZHM6IDAgfSkudG9JU09UaW1lKHsgc3VwcHJlc3NTZWNvbmRzOiB0cnVlIH0pIC8vPT4gJzA3OjM0WicKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygpLnNldCh7IGhvdXI6IDcsIG1pbnV0ZTogMzQgfSkudG9JU09UaW1lKHsgZm9ybWF0OiAnYmFzaWMnIH0pIC8vPT4gJzA3MzQxOS4zNjFaJwogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKCkuc2V0KHsgaG91cjogNywgbWludXRlOiAzNCB9KS50b0lTT1RpbWUoeyBpbmNsdWRlUHJlZml4OiB0cnVlIH0pIC8vPT4gJ1QwNzozNDoxOS4zNjFaJwogICAgICogQHJldHVybiB7c3RyaW5nfQogICAgICovCiAgICB0b0lTT1RpbWUoewogICAgICBzdXBwcmVzc01pbGxpc2Vjb25kcyA9IGZhbHNlLAogICAgICBzdXBwcmVzc1NlY29uZHMgPSBmYWxzZSwKICAgICAgaW5jbHVkZU9mZnNldCA9IHRydWUsCiAgICAgIGluY2x1ZGVQcmVmaXggPSBmYWxzZSwKICAgICAgZXh0ZW5kZWRab25lID0gZmFsc2UsCiAgICAgIGZvcm1hdCA9ICJleHRlbmRlZCIsCiAgICB9ID0ge30pIHsKICAgICAgaWYgKCF0aGlzLmlzVmFsaWQpIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQoKICAgICAgbGV0IGMgPSBpbmNsdWRlUHJlZml4ID8gIlQiIDogIiI7CiAgICAgIHJldHVybiAoCiAgICAgICAgYyArCiAgICAgICAgdG9JU09UaW1lKAogICAgICAgICAgdGhpcywKICAgICAgICAgIGZvcm1hdCA9PT0gImV4dGVuZGVkIiwKICAgICAgICAgIHN1cHByZXNzU2Vjb25kcywKICAgICAgICAgIHN1cHByZXNzTWlsbGlzZWNvbmRzLAogICAgICAgICAgaW5jbHVkZU9mZnNldCwKICAgICAgICAgIGV4dGVuZGVkWm9uZQogICAgICAgICkKICAgICAgKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgYW4gUkZDIDI4MjItY29tcGF0aWJsZSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBEYXRlVGltZQogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKDIwMTQsIDcsIDEzKS50b1JGQzI4MjIoKSAvLz0+ICdTdW4sIDEzIEp1bCAyMDE0IDAwOjAwOjAwICswMDAwJwogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNCwgNywgMTMpLnRvUkZDMjgyMigpIC8vPT4gJ1N1biwgMTMgSnVsIDIwMTQgMDA6MDA6MDAgLTA0MDAnCiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9CiAgICAgKi8KICAgIHRvUkZDMjgyMigpIHsKICAgICAgcmV0dXJuIHRvVGVjaEZvcm1hdCh0aGlzLCAiRUVFLCBkZCBMTEwgeXl5eSBISDptbTpzcyBaWloiLCBmYWxzZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgRGF0ZVRpbWUgYXBwcm9wcmlhdGUgZm9yIHVzZSBpbiBIVFRQIGhlYWRlcnMuIFRoZSBvdXRwdXQgaXMgYWx3YXlzIGV4cHJlc3NlZCBpbiBHTVQuCiAgICAgKiBTcGVjaWZpY2FsbHksIHRoZSBzdHJpbmcgY29uZm9ybXMgdG8gUkZDIDExMjMuCiAgICAgKiBAc2VlIGh0dHBzOi8vd3d3LnczLm9yZy9Qcm90b2NvbHMvcmZjMjYxNi9yZmMyNjE2LXNlYzMuaHRtbCNzZWMzLjMuMQogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKDIwMTQsIDcsIDEzKS50b0hUVFAoKSAvLz0+ICdTdW4sIDEzIEp1bCAyMDE0IDAwOjAwOjAwIEdNVCcKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygyMDE0LCA3LCAxMywgMTkpLnRvSFRUUCgpIC8vPT4gJ1N1biwgMTMgSnVsIDIwMTQgMTk6MDA6MDAgR01UJwogICAgICogQHJldHVybiB7c3RyaW5nfQogICAgICovCiAgICB0b0hUVFAoKSB7CiAgICAgIHJldHVybiB0b1RlY2hGb3JtYXQodGhpcy50b1VUQygpLCAiRUVFLCBkZCBMTEwgeXl5eSBISDptbTpzcyAnR01UJyIpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIERhdGVUaW1lIGFwcHJvcHJpYXRlIGZvciB1c2UgaW4gU1FMIERhdGUKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygyMDE0LCA3LCAxMykudG9TUUxEYXRlKCkgLy89PiAnMjAxNC0wNy0xMycKICAgICAqIEByZXR1cm4ge3N0cmluZ30KICAgICAqLwogICAgdG9TUUxEYXRlKCkgewogICAgICBpZiAoIXRoaXMuaXNWYWxpZCkgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICAgIHJldHVybiB0b0lTT0RhdGUodGhpcywgdHJ1ZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgRGF0ZVRpbWUgYXBwcm9wcmlhdGUgZm9yIHVzZSBpbiBTUUwgVGltZQogICAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zCiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLmluY2x1ZGVab25lPWZhbHNlXSAtIGluY2x1ZGUgdGhlIHpvbmUsIHN1Y2ggYXMgJ0FtZXJpY2EvTmV3X1lvcmsnLiBPdmVycmlkZXMgaW5jbHVkZU9mZnNldC4KICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuaW5jbHVkZU9mZnNldD10cnVlXSAtIGluY2x1ZGUgdGhlIG9mZnNldCwgc3VjaCBhcyAnWicgb3IgJy0wNDowMCcKICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuaW5jbHVkZU9mZnNldFNwYWNlPXRydWVdIC0gaW5jbHVkZSB0aGUgc3BhY2UgYmV0d2VlbiB0aGUgdGltZSBhbmQgdGhlIG9mZnNldCwgc3VjaCBhcyAnMDU6MTU6MTYuMzQ1IC0wNDowMCcKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygpLnRvU1FMKCkgLy89PiAnMDU6MTU6MTYuMzQ1JwogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkudG9TUUwoKSAvLz0+ICcwNToxNToxNi4zNDUgLTA0OjAwJwogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkudG9TUUwoeyBpbmNsdWRlT2Zmc2V0OiBmYWxzZSB9KSAvLz0+ICcwNToxNToxNi4zNDUnCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS50b1NRTCh7IGluY2x1ZGVab25lOiBmYWxzZSB9KSAvLz0+ICcwNToxNToxNi4zNDUgQW1lcmljYS9OZXdfWW9yaycKICAgICAqIEByZXR1cm4ge3N0cmluZ30KICAgICAqLwogICAgdG9TUUxUaW1lKHsgaW5jbHVkZU9mZnNldCA9IHRydWUsIGluY2x1ZGVab25lID0gZmFsc2UsIGluY2x1ZGVPZmZzZXRTcGFjZSA9IHRydWUgfSA9IHt9KSB7CiAgICAgIGxldCBmbXQgPSAiSEg6bW06c3MuU1NTIjsKCiAgICAgIGlmIChpbmNsdWRlWm9uZSB8fCBpbmNsdWRlT2Zmc2V0KSB7CiAgICAgICAgaWYgKGluY2x1ZGVPZmZzZXRTcGFjZSkgewogICAgICAgICAgZm10ICs9ICIgIjsKICAgICAgICB9CiAgICAgICAgaWYgKGluY2x1ZGVab25lKSB7CiAgICAgICAgICBmbXQgKz0gInoiOwogICAgICAgIH0gZWxzZSBpZiAoaW5jbHVkZU9mZnNldCkgewogICAgICAgICAgZm10ICs9ICJaWiI7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gdG9UZWNoRm9ybWF0KHRoaXMsIGZtdCwgdHJ1ZSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgRGF0ZVRpbWUgYXBwcm9wcmlhdGUgZm9yIHVzZSBpbiBTUUwgRGF0ZVRpbWUKICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9ucwogICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5pbmNsdWRlWm9uZT1mYWxzZV0gLSBpbmNsdWRlIHRoZSB6b25lLCBzdWNoIGFzICdBbWVyaWNhL05ld19Zb3JrJy4gT3ZlcnJpZGVzIGluY2x1ZGVPZmZzZXQuCiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLmluY2x1ZGVPZmZzZXQ9dHJ1ZV0gLSBpbmNsdWRlIHRoZSBvZmZzZXQsIHN1Y2ggYXMgJ1onIG9yICctMDQ6MDAnCiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLmluY2x1ZGVPZmZzZXRTcGFjZT10cnVlXSAtIGluY2x1ZGUgdGhlIHNwYWNlIGJldHdlZW4gdGhlIHRpbWUgYW5kIHRoZSBvZmZzZXQsIHN1Y2ggYXMgJzA1OjE1OjE2LjM0NSAtMDQ6MDAnCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS51dGMoMjAxNCwgNywgMTMpLnRvU1FMKCkgLy89PiAnMjAxNC0wNy0xMyAwMDowMDowMC4wMDAgWicKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTQsIDcsIDEzKS50b1NRTCgpIC8vPT4gJzIwMTQtMDctMTMgMDA6MDA6MDAuMDAwIC0wNDowMCcKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTQsIDcsIDEzKS50b1NRTCh7IGluY2x1ZGVPZmZzZXQ6IGZhbHNlIH0pIC8vPT4gJzIwMTQtMDctMTMgMDA6MDA6MDAuMDAwJwogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNCwgNywgMTMpLnRvU1FMKHsgaW5jbHVkZVpvbmU6IHRydWUgfSkgLy89PiAnMjAxNC0wNy0xMyAwMDowMDowMC4wMDAgQW1lcmljYS9OZXdfWW9yaycKICAgICAqIEByZXR1cm4ge3N0cmluZ30KICAgICAqLwogICAgdG9TUUwob3B0cyA9IHt9KSB7CiAgICAgIGlmICghdGhpcy5pc1ZhbGlkKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KCiAgICAgIHJldHVybiBgJHt0aGlzLnRvU1FMRGF0ZSgpfSAke3RoaXMudG9TUUxUaW1lKG9wdHMpfWA7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgRGF0ZVRpbWUgYXBwcm9wcmlhdGUgZm9yIGRlYnVnZ2luZwogICAgICogQHJldHVybiB7c3RyaW5nfQogICAgICovCiAgICB0b1N0cmluZygpIHsKICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMudG9JU08oKSA6IElOVkFMSUQkMTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgdGhlIGVwb2NoIG1pbGxpc2Vjb25kcyBvZiB0aGlzIERhdGVUaW1lLiBBbGlhcyBvZiB7QGxpbmsgRGF0ZVRpbWUjdG9NaWxsaXN9CiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9CiAgICAgKi8KICAgIHZhbHVlT2YoKSB7CiAgICAgIHJldHVybiB0aGlzLnRvTWlsbGlzKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSBlcG9jaCBtaWxsaXNlY29uZHMgb2YgdGhpcyBEYXRlVGltZS4KICAgICAqIEByZXR1cm4ge251bWJlcn0KICAgICAqLwogICAgdG9NaWxsaXMoKSB7CiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLnRzIDogTmFOOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyB0aGUgZXBvY2ggc2Vjb25kcyBvZiB0aGlzIERhdGVUaW1lLgogICAgICogQHJldHVybiB7bnVtYmVyfQogICAgICovCiAgICB0b1NlY29uZHMoKSB7CiAgICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLnRzIC8gMTAwMCA6IE5hTjsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgdGhlIGVwb2NoIHNlY29uZHMgKGFzIGEgd2hvbGUgbnVtYmVyKSBvZiB0aGlzIERhdGVUaW1lLgogICAgICogQHJldHVybiB7bnVtYmVyfQogICAgICovCiAgICB0b1VuaXhJbnRlZ2VyKCkgewogICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gTWF0aC5mbG9vcih0aGlzLnRzIC8gMTAwMCkgOiBOYU47CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIGFuIElTTyA4NjAxIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgRGF0ZVRpbWUgYXBwcm9wcmlhdGUgZm9yIHVzZSBpbiBKU09OLgogICAgICogQHJldHVybiB7c3RyaW5nfQogICAgICovCiAgICB0b0pTT04oKSB7CiAgICAgIHJldHVybiB0aGlzLnRvSVNPKCk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm5zIGEgQlNPTiBzZXJpYWxpemFibGUgZXF1aXZhbGVudCB0byB0aGlzIERhdGVUaW1lLgogICAgICogQHJldHVybiB7RGF0ZX0KICAgICAqLwogICAgdG9CU09OKCkgewogICAgICByZXR1cm4gdGhpcy50b0pTRGF0ZSgpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJucyBhIEphdmFTY3JpcHQgb2JqZWN0IHdpdGggdGhpcyBEYXRlVGltZSdzIHllYXIsIG1vbnRoLCBkYXksIGFuZCBzbyBvbi4KICAgICAqIEBwYXJhbSBvcHRzIC0gb3B0aW9ucyBmb3IgZ2VuZXJhdGluZyB0aGUgb2JqZWN0CiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLmluY2x1ZGVDb25maWc9ZmFsc2VdIC0gaW5jbHVkZSBjb25maWd1cmF0aW9uIGF0dHJpYnV0ZXMgaW4gdGhlIG91dHB1dAogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkudG9PYmplY3QoKSAvLz0+IHsgeWVhcjogMjAxNywgbW9udGg6IDQsIGRheTogMjIsIGhvdXI6IDIwLCBtaW51dGU6IDQ5LCBzZWNvbmQ6IDQyLCBtaWxsaXNlY29uZDogMjY4IH0KICAgICAqIEByZXR1cm4ge09iamVjdH0KICAgICAqLwogICAgdG9PYmplY3Qob3B0cyA9IHt9KSB7CiAgICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4ge307CgogICAgICBjb25zdCBiYXNlID0geyAuLi50aGlzLmMgfTsKCiAgICAgIGlmIChvcHRzLmluY2x1ZGVDb25maWcpIHsKICAgICAgICBiYXNlLm91dHB1dENhbGVuZGFyID0gdGhpcy5vdXRwdXRDYWxlbmRhcjsKICAgICAgICBiYXNlLm51bWJlcmluZ1N5c3RlbSA9IHRoaXMubG9jLm51bWJlcmluZ1N5c3RlbTsKICAgICAgICBiYXNlLmxvY2FsZSA9IHRoaXMubG9jLmxvY2FsZTsKICAgICAgfQogICAgICByZXR1cm4gYmFzZTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgYSBKYXZhU2NyaXB0IERhdGUgZXF1aXZhbGVudCB0byB0aGlzIERhdGVUaW1lLgogICAgICogQHJldHVybiB7RGF0ZX0KICAgICAqLwogICAgdG9KU0RhdGUoKSB7CiAgICAgIHJldHVybiBuZXcgRGF0ZSh0aGlzLmlzVmFsaWQgPyB0aGlzLnRzIDogTmFOKTsKICAgIH0KCiAgICAvLyBDT01QQVJFCgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiB0d28gRGF0ZVRpbWVzIGFzIGEgRHVyYXRpb24uCiAgICAgKiBAcGFyYW0ge0RhdGVUaW1lfSBvdGhlckRhdGVUaW1lIC0gdGhlIERhdGVUaW1lIHRvIGNvbXBhcmUgdGhpcyBvbmUgdG8KICAgICAqIEBwYXJhbSB7c3RyaW5nfHN0cmluZ1tdfSBbdW5pdD1bJ21pbGxpc2Vjb25kcyddXSAtIHRoZSB1bml0IG9yIGFycmF5IG9mIHVuaXRzIChzdWNoIGFzICdob3Vycycgb3IgJ2RheXMnKSB0byBpbmNsdWRlIGluIHRoZSBkdXJhdGlvbi4KICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9ucyB0aGF0IGFmZmVjdCB0aGUgY3JlYXRpb24gb2YgdGhlIER1cmF0aW9uCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMuY29udmVyc2lvbkFjY3VyYWN5PSdjYXN1YWwnXSAtIHRoZSBjb252ZXJzaW9uIHN5c3RlbSB0byB1c2UKICAgICAqIEBleGFtcGxlCiAgICAgKiB2YXIgaTEgPSBEYXRlVGltZS5mcm9tSVNPKCcxOTgyLTA1LTI1VDA5OjQ1JyksCiAgICAgKiAgICAgaTIgPSBEYXRlVGltZS5mcm9tSVNPKCcxOTgzLTEwLTE0VDEwOjMwJyk7CiAgICAgKiBpMi5kaWZmKGkxKS50b09iamVjdCgpIC8vPT4geyBtaWxsaXNlY29uZHM6IDQzODA3NTAwMDAwIH0KICAgICAqIGkyLmRpZmYoaTEsICdob3VycycpLnRvT2JqZWN0KCkgLy89PiB7IGhvdXJzOiAxMjE2OC43NSB9CiAgICAgKiBpMi5kaWZmKGkxLCBbJ21vbnRocycsICdkYXlzJ10pLnRvT2JqZWN0KCkgLy89PiB7IG1vbnRoczogMTYsIGRheXM6IDE5LjAzMTI1IH0KICAgICAqIGkyLmRpZmYoaTEsIFsnbW9udGhzJywgJ2RheXMnLCAnaG91cnMnXSkudG9PYmplY3QoKSAvLz0+IHsgbW9udGhzOiAxNiwgZGF5czogMTksIGhvdXJzOiAwLjc1IH0KICAgICAqIEByZXR1cm4ge0R1cmF0aW9ufQogICAgICovCiAgICBkaWZmKG90aGVyRGF0ZVRpbWUsIHVuaXQgPSAibWlsbGlzZWNvbmRzIiwgb3B0cyA9IHt9KSB7CiAgICAgIGlmICghdGhpcy5pc1ZhbGlkIHx8ICFvdGhlckRhdGVUaW1lLmlzVmFsaWQpIHsKICAgICAgICByZXR1cm4gRHVyYXRpb24uaW52YWxpZCgiY3JlYXRlZCBieSBkaWZmaW5nIGFuIGludmFsaWQgRGF0ZVRpbWUiKTsKICAgICAgfQoKICAgICAgY29uc3QgZHVyT3B0cyA9IHsgbG9jYWxlOiB0aGlzLmxvY2FsZSwgbnVtYmVyaW5nU3lzdGVtOiB0aGlzLm51bWJlcmluZ1N5c3RlbSwgLi4ub3B0cyB9OwoKICAgICAgY29uc3QgdW5pdHMgPSBtYXliZUFycmF5KHVuaXQpLm1hcChEdXJhdGlvbi5ub3JtYWxpemVVbml0KSwKICAgICAgICBvdGhlcklzTGF0ZXIgPSBvdGhlckRhdGVUaW1lLnZhbHVlT2YoKSA+IHRoaXMudmFsdWVPZigpLAogICAgICAgIGVhcmxpZXIgPSBvdGhlcklzTGF0ZXIgPyB0aGlzIDogb3RoZXJEYXRlVGltZSwKICAgICAgICBsYXRlciA9IG90aGVySXNMYXRlciA/IG90aGVyRGF0ZVRpbWUgOiB0aGlzLAogICAgICAgIGRpZmZlZCA9IGRpZmYoZWFybGllciwgbGF0ZXIsIHVuaXRzLCBkdXJPcHRzKTsKCiAgICAgIHJldHVybiBvdGhlcklzTGF0ZXIgPyBkaWZmZWQubmVnYXRlKCkgOiBkaWZmZWQ7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiB0aGlzIERhdGVUaW1lIGFuZCByaWdodCBub3cuCiAgICAgKiBTZWUge0BsaW5rIERhdGVUaW1lI2RpZmZ9CiAgICAgKiBAcGFyYW0ge3N0cmluZ3xzdHJpbmdbXX0gW3VuaXQ9WydtaWxsaXNlY29uZHMnXV0gLSB0aGUgdW5pdCBvciB1bml0cyB1bml0cyAoc3VjaCBhcyAnaG91cnMnIG9yICdkYXlzJykgdG8gaW5jbHVkZSBpbiB0aGUgZHVyYXRpb24KICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9ucyB0aGF0IGFmZmVjdCB0aGUgY3JlYXRpb24gb2YgdGhlIER1cmF0aW9uCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMuY29udmVyc2lvbkFjY3VyYWN5PSdjYXN1YWwnXSAtIHRoZSBjb252ZXJzaW9uIHN5c3RlbSB0byB1c2UKICAgICAqIEByZXR1cm4ge0R1cmF0aW9ufQogICAgICovCiAgICBkaWZmTm93KHVuaXQgPSAibWlsbGlzZWNvbmRzIiwgb3B0cyA9IHt9KSB7CiAgICAgIHJldHVybiB0aGlzLmRpZmYoRGF0ZVRpbWUubm93KCksIHVuaXQsIG9wdHMpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIGFuIEludGVydmFsIHNwYW5uaW5nIGJldHdlZW4gdGhpcyBEYXRlVGltZSBhbmQgYW5vdGhlciBEYXRlVGltZQogICAgICogQHBhcmFtIHtEYXRlVGltZX0gb3RoZXJEYXRlVGltZSAtIHRoZSBvdGhlciBlbmQgcG9pbnQgb2YgdGhlIEludGVydmFsCiAgICAgKiBAcmV0dXJuIHtJbnRlcnZhbH0KICAgICAqLwogICAgdW50aWwob3RoZXJEYXRlVGltZSkgewogICAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gSW50ZXJ2YWwuZnJvbURhdGVUaW1lcyh0aGlzLCBvdGhlckRhdGVUaW1lKSA6IHRoaXM7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gd2hldGhlciB0aGlzIERhdGVUaW1lIGlzIGluIHRoZSBzYW1lIHVuaXQgb2YgdGltZSBhcyBhbm90aGVyIERhdGVUaW1lLgogICAgICogSGlnaGVyLW9yZGVyIHVuaXRzIG11c3QgYWxzbyBiZSBpZGVudGljYWwgZm9yIHRoaXMgZnVuY3Rpb24gdG8gcmV0dXJuIGB0cnVlYC4KICAgICAqIE5vdGUgdGhhdCB0aW1lIHpvbmVzIGFyZSAqKmlnbm9yZWQqKiBpbiB0aGlzIGNvbXBhcmlzb24sIHdoaWNoIGNvbXBhcmVzIHRoZSAqKmxvY2FsKiogY2FsZW5kYXIgdGltZS4gVXNlIHtAbGluayBEYXRlVGltZSNzZXRab25lfSB0byBjb252ZXJ0IG9uZSBvZiB0aGUgZGF0ZXMgaWYgbmVlZGVkLgogICAgICogQHBhcmFtIHtEYXRlVGltZX0gb3RoZXJEYXRlVGltZSAtIHRoZSBvdGhlciBEYXRlVGltZQogICAgICogQHBhcmFtIHtzdHJpbmd9IHVuaXQgLSB0aGUgdW5pdCBvZiB0aW1lIHRvIGNoZWNrIHNhbWVuZXNzIG9uCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS5oYXNTYW1lKG90aGVyRFQsICdkYXknKTsgLy9+PiB0cnVlIGlmIG90aGVyRFQgaXMgaW4gdGhlIHNhbWUgY3VycmVudCBjYWxlbmRhciBkYXkKICAgICAqIEByZXR1cm4ge2Jvb2xlYW59CiAgICAgKi8KICAgIGhhc1NhbWUob3RoZXJEYXRlVGltZSwgdW5pdCkgewogICAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIGZhbHNlOwoKICAgICAgY29uc3QgaW5wdXRNcyA9IG90aGVyRGF0ZVRpbWUudmFsdWVPZigpOwogICAgICBjb25zdCBhZGp1c3RlZFRvWm9uZSA9IHRoaXMuc2V0Wm9uZShvdGhlckRhdGVUaW1lLnpvbmUsIHsga2VlcExvY2FsVGltZTogdHJ1ZSB9KTsKICAgICAgcmV0dXJuIGFkanVzdGVkVG9ab25lLnN0YXJ0T2YodW5pdCkgPD0gaW5wdXRNcyAmJiBpbnB1dE1zIDw9IGFkanVzdGVkVG9ab25lLmVuZE9mKHVuaXQpOwogICAgfQoKICAgIC8qKgogICAgICogRXF1YWxpdHkgY2hlY2sKICAgICAqIFR3byBEYXRlVGltZXMgYXJlIGVxdWFsIGlmZiB0aGV5IHJlcHJlc2VudCB0aGUgc2FtZSBtaWxsaXNlY29uZCwgaGF2ZSB0aGUgc2FtZSB6b25lIGFuZCBsb2NhdGlvbiwgYW5kIGFyZSBib3RoIHZhbGlkLgogICAgICogVG8gY29tcGFyZSBqdXN0IHRoZSBtaWxsaXNlY29uZCB2YWx1ZXMsIHVzZSBgK2R0MSA9PT0gK2R0MmAuCiAgICAgKiBAcGFyYW0ge0RhdGVUaW1lfSBvdGhlciAtIHRoZSBvdGhlciBEYXRlVGltZQogICAgICogQHJldHVybiB7Ym9vbGVhbn0KICAgICAqLwogICAgZXF1YWxzKG90aGVyKSB7CiAgICAgIHJldHVybiAoCiAgICAgICAgdGhpcy5pc1ZhbGlkICYmCiAgICAgICAgb3RoZXIuaXNWYWxpZCAmJgogICAgICAgIHRoaXMudmFsdWVPZigpID09PSBvdGhlci52YWx1ZU9mKCkgJiYKICAgICAgICB0aGlzLnpvbmUuZXF1YWxzKG90aGVyLnpvbmUpICYmCiAgICAgICAgdGhpcy5sb2MuZXF1YWxzKG90aGVyLmxvYykKICAgICAgKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSB0aGlzIHRpbWUgcmVsYXRpdmUgdG8gbm93LCBzdWNoIGFzICJpbiB0d28gZGF5cyIuIENhbiBvbmx5IGludGVybmF0aW9uYWxpemUgaWYgeW91cgogICAgICogcGxhdGZvcm0gc3VwcG9ydHMgSW50bC5SZWxhdGl2ZVRpbWVGb3JtYXQuIFJvdW5kcyBkb3duIGJ5IGRlZmF1bHQuCiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIG9wdGlvbnMgdGhhdCBhZmZlY3QgdGhlIG91dHB1dAogICAgICogQHBhcmFtIHtEYXRlVGltZX0gW29wdGlvbnMuYmFzZT1EYXRlVGltZS5ub3coKV0gLSB0aGUgRGF0ZVRpbWUgdG8gdXNlIGFzIHRoZSBiYXNpcyB0byB3aGljaCB0aGlzIHRpbWUgaXMgY29tcGFyZWQuIERlZmF1bHRzIHRvIG5vdy4KICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5zdHlsZT0ibG9uZyJdIC0gdGhlIHN0eWxlIG9mIHVuaXRzLCBtdXN0IGJlICJsb25nIiwgInNob3J0Iiwgb3IgIm5hcnJvdyIKICAgICAqIEBwYXJhbSB7c3RyaW5nfHN0cmluZ1tdfSBvcHRpb25zLnVuaXQgLSB1c2UgYSBzcGVjaWZpYyB1bml0IG9yIGFycmF5IG9mIHVuaXRzOyBpZiBvbWl0dGVkLCBvciBhbiBhcnJheSwgdGhlIG1ldGhvZCB3aWxsIHBpY2sgdGhlIGJlc3QgdW5pdC4gVXNlIGFuIGFycmF5IG9yIG9uZSBvZiAieWVhcnMiLCAicXVhcnRlcnMiLCAibW9udGhzIiwgIndlZWtzIiwgImRheXMiLCAiaG91cnMiLCAibWludXRlcyIsIG9yICJzZWNvbmRzIgogICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5yb3VuZD10cnVlXSAtIHdoZXRoZXIgdG8gcm91bmQgdGhlIG51bWJlcnMgaW4gdGhlIG91dHB1dC4KICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5wYWRkaW5nPTBdIC0gcGFkZGluZyBpbiBtaWxsaXNlY29uZHMuIFRoaXMgYWxsb3dzIHlvdSB0byByb3VuZCB1cCB0aGUgcmVzdWx0IGlmIGl0IGZpdHMgaW5zaWRlIHRoZSB0aHJlc2hvbGQuIERvbid0IHVzZSBpbiBjb21iaW5hdGlvbiB3aXRoIHtyb3VuZDogZmFsc2V9IGJlY2F1c2UgdGhlIGRlY2ltYWwgb3V0cHV0IHdpbGwgaW5jbHVkZSB0aGUgcGFkZGluZy4KICAgICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLmxvY2FsZSAtIG92ZXJyaWRlIHRoZSBsb2NhbGUgb2YgdGhpcyBEYXRlVGltZQogICAgICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMubnVtYmVyaW5nU3lzdGVtIC0gb3ZlcnJpZGUgdGhlIG51bWJlcmluZ1N5c3RlbSBvZiB0aGlzIERhdGVUaW1lLiBUaGUgSW50bCBzeXN0ZW0gbWF5IGNob29zZSBub3QgdG8gaG9ub3IgdGhpcwogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkucGx1cyh7IGRheXM6IDEgfSkudG9SZWxhdGl2ZSgpIC8vPT4gImluIDEgZGF5IgogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkuc2V0TG9jYWxlKCJlcyIpLnRvUmVsYXRpdmUoeyBkYXlzOiAxIH0pIC8vPT4gImRlbnRybyBkZSAxIGTDrWEiCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS5wbHVzKHsgZGF5czogMSB9KS50b1JlbGF0aXZlKHsgbG9jYWxlOiAiZnIiIH0pIC8vPT4gImRhbnMgMjMgaGV1cmVzIgogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkubWludXMoeyBkYXlzOiAyIH0pLnRvUmVsYXRpdmUoKSAvLz0+ICIyIGRheXMgYWdvIgogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkubWludXMoeyBkYXlzOiAyIH0pLnRvUmVsYXRpdmUoeyB1bml0OiAiaG91cnMiIH0pIC8vPT4gIjQ4IGhvdXJzIGFnbyIKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLm1pbnVzKHsgaG91cnM6IDM2IH0pLnRvUmVsYXRpdmUoeyByb3VuZDogZmFsc2UgfSkgLy89PiAiMS41IGRheXMgYWdvIgogICAgICovCiAgICB0b1JlbGF0aXZlKG9wdGlvbnMgPSB7fSkgewogICAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIG51bGw7CiAgICAgIGNvbnN0IGJhc2UgPSBvcHRpb25zLmJhc2UgfHwgRGF0ZVRpbWUuZnJvbU9iamVjdCh7fSwgeyB6b25lOiB0aGlzLnpvbmUgfSksCiAgICAgICAgcGFkZGluZyA9IG9wdGlvbnMucGFkZGluZyA/ICh0aGlzIDwgYmFzZSA/IC1vcHRpb25zLnBhZGRpbmcgOiBvcHRpb25zLnBhZGRpbmcpIDogMDsKICAgICAgbGV0IHVuaXRzID0gWyJ5ZWFycyIsICJtb250aHMiLCAiZGF5cyIsICJob3VycyIsICJtaW51dGVzIiwgInNlY29uZHMiXTsKICAgICAgbGV0IHVuaXQgPSBvcHRpb25zLnVuaXQ7CiAgICAgIGlmIChBcnJheS5pc0FycmF5KG9wdGlvbnMudW5pdCkpIHsKICAgICAgICB1bml0cyA9IG9wdGlvbnMudW5pdDsKICAgICAgICB1bml0ID0gdW5kZWZpbmVkOwogICAgICB9CiAgICAgIHJldHVybiBkaWZmUmVsYXRpdmUoYmFzZSwgdGhpcy5wbHVzKHBhZGRpbmcpLCB7CiAgICAgICAgLi4ub3B0aW9ucywKICAgICAgICBudW1lcmljOiAiYWx3YXlzIiwKICAgICAgICB1bml0cywKICAgICAgICB1bml0LAogICAgICB9KTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBkYXRlIHJlbGF0aXZlIHRvIHRvZGF5LCBzdWNoIGFzICJ5ZXN0ZXJkYXkiIG9yICJuZXh0IG1vbnRoIi4KICAgICAqIE9ubHkgaW50ZXJuYXRpb25hbGl6ZXMgb24gcGxhdGZvcm1zIHRoYXQgc3VwcG9ydHMgSW50bC5SZWxhdGl2ZVRpbWVGb3JtYXQuCiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIG9wdGlvbnMgdGhhdCBhZmZlY3QgdGhlIG91dHB1dAogICAgICogQHBhcmFtIHtEYXRlVGltZX0gW29wdGlvbnMuYmFzZT1EYXRlVGltZS5ub3coKV0gLSB0aGUgRGF0ZVRpbWUgdG8gdXNlIGFzIHRoZSBiYXNpcyB0byB3aGljaCB0aGlzIHRpbWUgaXMgY29tcGFyZWQuIERlZmF1bHRzIHRvIG5vdy4KICAgICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLmxvY2FsZSAtIG92ZXJyaWRlIHRoZSBsb2NhbGUgb2YgdGhpcyBEYXRlVGltZQogICAgICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMudW5pdCAtIHVzZSBhIHNwZWNpZmljIHVuaXQ7IGlmIG9taXR0ZWQsIHRoZSBtZXRob2Qgd2lsbCBwaWNrIHRoZSB1bml0LiBVc2Ugb25lIG9mICJ5ZWFycyIsICJxdWFydGVycyIsICJtb250aHMiLCAid2Vla3MiLCBvciAiZGF5cyIKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLm51bWJlcmluZ1N5c3RlbSAtIG92ZXJyaWRlIHRoZSBudW1iZXJpbmdTeXN0ZW0gb2YgdGhpcyBEYXRlVGltZS4gVGhlIEludGwgc3lzdGVtIG1heSBjaG9vc2Ugbm90IHRvIGhvbm9yIHRoaXMKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnBsdXMoeyBkYXlzOiAxIH0pLnRvUmVsYXRpdmVDYWxlbmRhcigpIC8vPT4gInRvbW9ycm93IgogICAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkuc2V0TG9jYWxlKCJlcyIpLnBsdXMoeyBkYXlzOiAxIH0pLnRvUmVsYXRpdmUoKSAvLz0+ICIibWHDsWFuYSIKICAgICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnBsdXMoeyBkYXlzOiAxIH0pLnRvUmVsYXRpdmVDYWxlbmRhcih7IGxvY2FsZTogImZyIiB9KSAvLz0+ICJkZW1haW4iCiAgICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS5taW51cyh7IGRheXM6IDIgfSkudG9SZWxhdGl2ZUNhbGVuZGFyKCkgLy89PiAiMiBkYXlzIGFnbyIKICAgICAqLwogICAgdG9SZWxhdGl2ZUNhbGVuZGFyKG9wdGlvbnMgPSB7fSkgewogICAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIG51bGw7CgogICAgICByZXR1cm4gZGlmZlJlbGF0aXZlKG9wdGlvbnMuYmFzZSB8fCBEYXRlVGltZS5mcm9tT2JqZWN0KHt9LCB7IHpvbmU6IHRoaXMuem9uZSB9KSwgdGhpcywgewogICAgICAgIC4uLm9wdGlvbnMsCiAgICAgICAgbnVtZXJpYzogImF1dG8iLAogICAgICAgIHVuaXRzOiBbInllYXJzIiwgIm1vbnRocyIsICJkYXlzIl0sCiAgICAgICAgY2FsZW5kYXJ5OiB0cnVlLAogICAgICB9KTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHVybiB0aGUgbWluIG9mIHNldmVyYWwgZGF0ZSB0aW1lcwogICAgICogQHBhcmFtIHsuLi5EYXRlVGltZX0gZGF0ZVRpbWVzIC0gdGhlIERhdGVUaW1lcyBmcm9tIHdoaWNoIHRvIGNob29zZSB0aGUgbWluaW11bQogICAgICogQHJldHVybiB7RGF0ZVRpbWV9IHRoZSBtaW4gRGF0ZVRpbWUsIG9yIHVuZGVmaW5lZCBpZiBjYWxsZWQgd2l0aCBubyBhcmd1bWVudAogICAgICovCiAgICBzdGF0aWMgbWluKC4uLmRhdGVUaW1lcykgewogICAgICBpZiAoIWRhdGVUaW1lcy5ldmVyeShEYXRlVGltZS5pc0RhdGVUaW1lKSkgewogICAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcigibWluIHJlcXVpcmVzIGFsbCBhcmd1bWVudHMgYmUgRGF0ZVRpbWVzIik7CiAgICAgIH0KICAgICAgcmV0dXJuIGJlc3RCeShkYXRlVGltZXMsIChpKSA9PiBpLnZhbHVlT2YoKSwgTWF0aC5taW4pOwogICAgfQoKICAgIC8qKgogICAgICogUmV0dXJuIHRoZSBtYXggb2Ygc2V2ZXJhbCBkYXRlIHRpbWVzCiAgICAgKiBAcGFyYW0gey4uLkRhdGVUaW1lfSBkYXRlVGltZXMgLSB0aGUgRGF0ZVRpbWVzIGZyb20gd2hpY2ggdG8gY2hvb3NlIHRoZSBtYXhpbXVtCiAgICAgKiBAcmV0dXJuIHtEYXRlVGltZX0gdGhlIG1heCBEYXRlVGltZSwgb3IgdW5kZWZpbmVkIGlmIGNhbGxlZCB3aXRoIG5vIGFyZ3VtZW50CiAgICAgKi8KICAgIHN0YXRpYyBtYXgoLi4uZGF0ZVRpbWVzKSB7CiAgICAgIGlmICghZGF0ZVRpbWVzLmV2ZXJ5KERhdGVUaW1lLmlzRGF0ZVRpbWUpKSB7CiAgICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKCJtYXggcmVxdWlyZXMgYWxsIGFyZ3VtZW50cyBiZSBEYXRlVGltZXMiKTsKICAgICAgfQogICAgICByZXR1cm4gYmVzdEJ5KGRhdGVUaW1lcywgKGkpID0+IGkudmFsdWVPZigpLCBNYXRoLm1heCk7CiAgICB9CgogICAgLy8gTUlTQwoKICAgIC8qKgogICAgICogRXhwbGFpbiBob3cgYSBzdHJpbmcgd291bGQgYmUgcGFyc2VkIGJ5IGZyb21Gb3JtYXQoKQogICAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgLSB0aGUgc3RyaW5nIHRvIHBhcnNlCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZm10IC0gdGhlIGZvcm1hdCB0aGUgc3RyaW5nIGlzIGV4cGVjdGVkIHRvIGJlIGluIChzZWUgZGVzY3JpcHRpb24pCiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIG9wdGlvbnMgdGFrZW4gYnkgZnJvbUZvcm1hdCgpCiAgICAgKiBAcmV0dXJuIHtPYmplY3R9CiAgICAgKi8KICAgIHN0YXRpYyBmcm9tRm9ybWF0RXhwbGFpbih0ZXh0LCBmbXQsIG9wdGlvbnMgPSB7fSkgewogICAgICBjb25zdCB7IGxvY2FsZSA9IG51bGwsIG51bWJlcmluZ1N5c3RlbSA9IG51bGwgfSA9IG9wdGlvbnMsCiAgICAgICAgbG9jYWxlVG9Vc2UgPSBMb2NhbGUuZnJvbU9wdHMoewogICAgICAgICAgbG9jYWxlLAogICAgICAgICAgbnVtYmVyaW5nU3lzdGVtLAogICAgICAgICAgZGVmYXVsdFRvRU46IHRydWUsCiAgICAgICAgfSk7CiAgICAgIHJldHVybiBleHBsYWluRnJvbVRva2Vucyhsb2NhbGVUb1VzZSwgdGV4dCwgZm10KTsKICAgIH0KCiAgICAvKioKICAgICAqIEBkZXByZWNhdGVkIHVzZSBmcm9tRm9ybWF0RXhwbGFpbiBpbnN0ZWFkCiAgICAgKi8KICAgIHN0YXRpYyBmcm9tU3RyaW5nRXhwbGFpbih0ZXh0LCBmbXQsIG9wdGlvbnMgPSB7fSkgewogICAgICByZXR1cm4gRGF0ZVRpbWUuZnJvbUZvcm1hdEV4cGxhaW4odGV4dCwgZm10LCBvcHRpb25zKTsKICAgIH0KCiAgICAvLyBGT1JNQVQgUFJFU0VUUwoKICAgIC8qKgogICAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAxMC8xNC8xOTgzCiAgICAgKiBAdHlwZSB7T2JqZWN0fQogICAgICovCiAgICBzdGF0aWMgZ2V0IERBVEVfU0hPUlQoKSB7CiAgICAgIHJldHVybiBEQVRFX1NIT1JUOwogICAgfQoKICAgIC8qKgogICAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAnT2N0IDE0LCAxOTgzJwogICAgICogQHR5cGUge09iamVjdH0KICAgICAqLwogICAgc3RhdGljIGdldCBEQVRFX01FRCgpIHsKICAgICAgcmV0dXJuIERBVEVfTUVEOwogICAgfQoKICAgIC8qKgogICAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAnRnJpLCBPY3QgMTQsIDE5ODMnCiAgICAgKiBAdHlwZSB7T2JqZWN0fQogICAgICovCiAgICBzdGF0aWMgZ2V0IERBVEVfTUVEX1dJVEhfV0VFS0RBWSgpIHsKICAgICAgcmV0dXJuIERBVEVfTUVEX1dJVEhfV0VFS0RBWTsKICAgIH0KCiAgICAvKioKICAgICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJ09jdG9iZXIgMTQsIDE5ODMnCiAgICAgKiBAdHlwZSB7T2JqZWN0fQogICAgICovCiAgICBzdGF0aWMgZ2V0IERBVEVfRlVMTCgpIHsKICAgICAgcmV0dXJuIERBVEVfRlVMTDsKICAgIH0KCiAgICAvKioKICAgICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJ1R1ZXNkYXksIE9jdG9iZXIgMTQsIDE5ODMnCiAgICAgKiBAdHlwZSB7T2JqZWN0fQogICAgICovCiAgICBzdGF0aWMgZ2V0IERBVEVfSFVHRSgpIHsKICAgICAgcmV0dXJuIERBVEVfSFVHRTsKICAgIH0KCiAgICAvKioKICAgICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJzA5OjMwIEFNJy4gT25seSAxMi1ob3VyIGlmIHRoZSBsb2NhbGUgaXMuCiAgICAgKiBAdHlwZSB7T2JqZWN0fQogICAgICovCiAgICBzdGF0aWMgZ2V0IFRJTUVfU0lNUExFKCkgewogICAgICByZXR1cm4gVElNRV9TSU1QTEU7CiAgICB9CgogICAgLyoqCiAgICAgKiB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbGVTdHJpbmd9IGZvcm1hdCBsaWtlICcwOTozMDoyMyBBTScuIE9ubHkgMTItaG91ciBpZiB0aGUgbG9jYWxlIGlzLgogICAgICogQHR5cGUge09iamVjdH0KICAgICAqLwogICAgc3RhdGljIGdldCBUSU1FX1dJVEhfU0VDT05EUygpIHsKICAgICAgcmV0dXJuIFRJTUVfV0lUSF9TRUNPTkRTOwogICAgfQoKICAgIC8qKgogICAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAnMDk6MzA6MjMgQU0gRURUJy4gT25seSAxMi1ob3VyIGlmIHRoZSBsb2NhbGUgaXMuCiAgICAgKiBAdHlwZSB7T2JqZWN0fQogICAgICovCiAgICBzdGF0aWMgZ2V0IFRJTUVfV0lUSF9TSE9SVF9PRkZTRVQoKSB7CiAgICAgIHJldHVybiBUSU1FX1dJVEhfU0hPUlRfT0ZGU0VUOwogICAgfQoKICAgIC8qKgogICAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAnMDk6MzA6MjMgQU0gRWFzdGVybiBEYXlsaWdodCBUaW1lJy4gT25seSAxMi1ob3VyIGlmIHRoZSBsb2NhbGUgaXMuCiAgICAgKiBAdHlwZSB7T2JqZWN0fQogICAgICovCiAgICBzdGF0aWMgZ2V0IFRJTUVfV0lUSF9MT05HX09GRlNFVCgpIHsKICAgICAgcmV0dXJuIFRJTUVfV0lUSF9MT05HX09GRlNFVDsKICAgIH0KCiAgICAvKioKICAgICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJzA5OjMwJywgYWx3YXlzIDI0LWhvdXIuCiAgICAgKiBAdHlwZSB7T2JqZWN0fQogICAgICovCiAgICBzdGF0aWMgZ2V0IFRJTUVfMjRfU0lNUExFKCkgewogICAgICByZXR1cm4gVElNRV8yNF9TSU1QTEU7CiAgICB9CgogICAgLyoqCiAgICAgKiB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbGVTdHJpbmd9IGZvcm1hdCBsaWtlICcwOTozMDoyMycsIGFsd2F5cyAyNC1ob3VyLgogICAgICogQHR5cGUge09iamVjdH0KICAgICAqLwogICAgc3RhdGljIGdldCBUSU1FXzI0X1dJVEhfU0VDT05EUygpIHsKICAgICAgcmV0dXJuIFRJTUVfMjRfV0lUSF9TRUNPTkRTOwogICAgfQoKICAgIC8qKgogICAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAnMDk6MzA6MjMgRURUJywgYWx3YXlzIDI0LWhvdXIuCiAgICAgKiBAdHlwZSB7T2JqZWN0fQogICAgICovCiAgICBzdGF0aWMgZ2V0IFRJTUVfMjRfV0lUSF9TSE9SVF9PRkZTRVQoKSB7CiAgICAgIHJldHVybiBUSU1FXzI0X1dJVEhfU0hPUlRfT0ZGU0VUOwogICAgfQoKICAgIC8qKgogICAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAnMDk6MzA6MjMgRWFzdGVybiBEYXlsaWdodCBUaW1lJywgYWx3YXlzIDI0LWhvdXIuCiAgICAgKiBAdHlwZSB7T2JqZWN0fQogICAgICovCiAgICBzdGF0aWMgZ2V0IFRJTUVfMjRfV0lUSF9MT05HX09GRlNFVCgpIHsKICAgICAgcmV0dXJuIFRJTUVfMjRfV0lUSF9MT05HX09GRlNFVDsKICAgIH0KCiAgICAvKioKICAgICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJzEwLzE0LzE5ODMsIDk6MzAgQU0nLiBPbmx5IDEyLWhvdXIgaWYgdGhlIGxvY2FsZSBpcy4KICAgICAqIEB0eXBlIHtPYmplY3R9CiAgICAgKi8KICAgIHN0YXRpYyBnZXQgREFURVRJTUVfU0hPUlQoKSB7CiAgICAgIHJldHVybiBEQVRFVElNRV9TSE9SVDsKICAgIH0KCiAgICAvKioKICAgICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJzEwLzE0LzE5ODMsIDk6MzA6MzMgQU0nLiBPbmx5IDEyLWhvdXIgaWYgdGhlIGxvY2FsZSBpcy4KICAgICAqIEB0eXBlIHtPYmplY3R9CiAgICAgKi8KICAgIHN0YXRpYyBnZXQgREFURVRJTUVfU0hPUlRfV0lUSF9TRUNPTkRTKCkgewogICAgICByZXR1cm4gREFURVRJTUVfU0hPUlRfV0lUSF9TRUNPTkRTOwogICAgfQoKICAgIC8qKgogICAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAnT2N0IDE0LCAxOTgzLCA5OjMwIEFNJy4gT25seSAxMi1ob3VyIGlmIHRoZSBsb2NhbGUgaXMuCiAgICAgKiBAdHlwZSB7T2JqZWN0fQogICAgICovCiAgICBzdGF0aWMgZ2V0IERBVEVUSU1FX01FRCgpIHsKICAgICAgcmV0dXJuIERBVEVUSU1FX01FRDsKICAgIH0KCiAgICAvKioKICAgICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJ09jdCAxNCwgMTk4MywgOTozMDozMyBBTScuIE9ubHkgMTItaG91ciBpZiB0aGUgbG9jYWxlIGlzLgogICAgICogQHR5cGUge09iamVjdH0KICAgICAqLwogICAgc3RhdGljIGdldCBEQVRFVElNRV9NRURfV0lUSF9TRUNPTkRTKCkgewogICAgICByZXR1cm4gREFURVRJTUVfTUVEX1dJVEhfU0VDT05EUzsKICAgIH0KCiAgICAvKioKICAgICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJ0ZyaSwgMTQgT2N0IDE5ODMsIDk6MzAgQU0nLiBPbmx5IDEyLWhvdXIgaWYgdGhlIGxvY2FsZSBpcy4KICAgICAqIEB0eXBlIHtPYmplY3R9CiAgICAgKi8KICAgIHN0YXRpYyBnZXQgREFURVRJTUVfTUVEX1dJVEhfV0VFS0RBWSgpIHsKICAgICAgcmV0dXJuIERBVEVUSU1FX01FRF9XSVRIX1dFRUtEQVk7CiAgICB9CgogICAgLyoqCiAgICAgKiB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbGVTdHJpbmd9IGZvcm1hdCBsaWtlICdPY3RvYmVyIDE0LCAxOTgzLCA5OjMwIEFNIEVEVCcuIE9ubHkgMTItaG91ciBpZiB0aGUgbG9jYWxlIGlzLgogICAgICogQHR5cGUge09iamVjdH0KICAgICAqLwogICAgc3RhdGljIGdldCBEQVRFVElNRV9GVUxMKCkgewogICAgICByZXR1cm4gREFURVRJTUVfRlVMTDsKICAgIH0KCiAgICAvKioKICAgICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJ09jdG9iZXIgMTQsIDE5ODMsIDk6MzA6MzMgQU0gRURUJy4gT25seSAxMi1ob3VyIGlmIHRoZSBsb2NhbGUgaXMuCiAgICAgKiBAdHlwZSB7T2JqZWN0fQogICAgICovCiAgICBzdGF0aWMgZ2V0IERBVEVUSU1FX0ZVTExfV0lUSF9TRUNPTkRTKCkgewogICAgICByZXR1cm4gREFURVRJTUVfRlVMTF9XSVRIX1NFQ09ORFM7CiAgICB9CgogICAgLyoqCiAgICAgKiB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbGVTdHJpbmd9IGZvcm1hdCBsaWtlICdGcmlkYXksIE9jdG9iZXIgMTQsIDE5ODMsIDk6MzAgQU0gRWFzdGVybiBEYXlsaWdodCBUaW1lJy4gT25seSAxMi1ob3VyIGlmIHRoZSBsb2NhbGUgaXMuCiAgICAgKiBAdHlwZSB7T2JqZWN0fQogICAgICovCiAgICBzdGF0aWMgZ2V0IERBVEVUSU1FX0hVR0UoKSB7CiAgICAgIHJldHVybiBEQVRFVElNRV9IVUdFOwogICAgfQoKICAgIC8qKgogICAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAnRnJpZGF5LCBPY3RvYmVyIDE0LCAxOTgzLCA5OjMwOjMzIEFNIEVhc3Rlcm4gRGF5bGlnaHQgVGltZScuIE9ubHkgMTItaG91ciBpZiB0aGUgbG9jYWxlIGlzLgogICAgICogQHR5cGUge09iamVjdH0KICAgICAqLwogICAgc3RhdGljIGdldCBEQVRFVElNRV9IVUdFX1dJVEhfU0VDT05EUygpIHsKICAgICAgcmV0dXJuIERBVEVUSU1FX0hVR0VfV0lUSF9TRUNPTkRTOwogICAgfQogIH0KCiAgLyoqCiAgICogQHByaXZhdGUKICAgKi8KICBmdW5jdGlvbiBmcmllbmRseURhdGVUaW1lKGRhdGVUaW1laXNoKSB7CiAgICBpZiAoRGF0ZVRpbWUuaXNEYXRlVGltZShkYXRlVGltZWlzaCkpIHsKICAgICAgcmV0dXJuIGRhdGVUaW1laXNoOwogICAgfSBlbHNlIGlmIChkYXRlVGltZWlzaCAmJiBkYXRlVGltZWlzaC52YWx1ZU9mICYmIGlzTnVtYmVyJDEoZGF0ZVRpbWVpc2gudmFsdWVPZigpKSkgewogICAgICByZXR1cm4gRGF0ZVRpbWUuZnJvbUpTRGF0ZShkYXRlVGltZWlzaCk7CiAgICB9IGVsc2UgaWYgKGRhdGVUaW1laXNoICYmIHR5cGVvZiBkYXRlVGltZWlzaCA9PT0gIm9iamVjdCIpIHsKICAgICAgcmV0dXJuIERhdGVUaW1lLmZyb21PYmplY3QoZGF0ZVRpbWVpc2gpOwogICAgfSBlbHNlIHsKICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKAogICAgICAgIGBVbmtub3duIGRhdGV0aW1lIGFyZ3VtZW50OiAke2RhdGVUaW1laXNofSwgb2YgdHlwZSAke3R5cGVvZiBkYXRlVGltZWlzaH1gCiAgICAgICk7CiAgICB9CiAgfQoKICAvLyBGSVhNRSBwcm9maWxlIGFkZGluZyBhIHBlci1UcmVlIFRyZWVOb2RlIGNhY2hlLCB2YWxpZGF0aW5nIGl0IGJ5CiAgLy8gcGFyZW50IHBvaW50ZXIKICAvLy8gVGhlIGRlZmF1bHQgbWF4aW11bSBsZW5ndGggb2YgYSBgVHJlZUJ1ZmZlcmAgbm9kZS4KICBjb25zdCBEZWZhdWx0QnVmZmVyTGVuZ3RoID0gMTAyNDsKICBsZXQgbmV4dFByb3BJRCA9IDA7CiAgY2xhc3MgUmFuZ2UkMSB7CiAgICAgIGNvbnN0cnVjdG9yKGZyb20sIHRvKSB7CiAgICAgICAgICB0aGlzLmZyb20gPSBmcm9tOwogICAgICAgICAgdGhpcy50byA9IHRvOwogICAgICB9CiAgfQogIC8vLyBFYWNoIFtub2RlIHR5cGVdKCNjb21tb24uTm9kZVR5cGUpIG9yIFtpbmRpdmlkdWFsIHRyZWVdKCNjb21tb24uVHJlZSkKICAvLy8gY2FuIGhhdmUgbWV0YWRhdGEgYXNzb2NpYXRlZCB3aXRoIGl0IGluIHByb3BzLiBJbnN0YW5jZXMgb2YgdGhpcwogIC8vLyBjbGFzcyByZXByZXNlbnQgcHJvcCBuYW1lcy4KICBjbGFzcyBOb2RlUHJvcCB7CiAgICAgIC8vLyBDcmVhdGUgYSBuZXcgbm9kZSBwcm9wIHR5cGUuCiAgICAgIGNvbnN0cnVjdG9yKGNvbmZpZyA9IHt9KSB7CiAgICAgICAgICB0aGlzLmlkID0gbmV4dFByb3BJRCsrOwogICAgICAgICAgdGhpcy5wZXJOb2RlID0gISFjb25maWcucGVyTm9kZTsKICAgICAgICAgIHRoaXMuZGVzZXJpYWxpemUgPSBjb25maWcuZGVzZXJpYWxpemUgfHwgKCgpID0+IHsKICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIlRoaXMgbm9kZSB0eXBlIGRvZXNuJ3QgZGVmaW5lIGEgZGVzZXJpYWxpemUgZnVuY3Rpb24iKTsKICAgICAgICAgIH0pOwogICAgICB9CiAgICAgIC8vLyBUaGlzIGlzIG1lYW50IHRvIGJlIHVzZWQgd2l0aAogICAgICAvLy8gW2BOb2RlU2V0LmV4dGVuZGBdKCNjb21tb24uTm9kZVNldC5leHRlbmQpIG9yCiAgICAgIC8vLyBbYExSUGFyc2VyLmNvbmZpZ3VyZWBdKCNsci5QYXJzZXJDb25maWcucHJvcHMpIHRvIGNvbXB1dGUKICAgICAgLy8vIHByb3AgdmFsdWVzIGZvciBlYWNoIG5vZGUgdHlwZSBpbiB0aGUgc2V0LiBUYWtlcyBhIFttYXRjaAogICAgICAvLy8gb2JqZWN0XSgjY29tbW9uLk5vZGVUeXBlXm1hdGNoKSBvciBmdW5jdGlvbiB0aGF0IHJldHVybnMgdW5kZWZpbmVkCiAgICAgIC8vLyBpZiB0aGUgbm9kZSB0eXBlIGRvZXNuJ3QgZ2V0IHRoaXMgcHJvcCwgYW5kIHRoZSBwcm9wJ3MgdmFsdWUgaWYKICAgICAgLy8vIGl0IGRvZXMuCiAgICAgIGFkZChtYXRjaCkgewogICAgICAgICAgaWYgKHRoaXMucGVyTm9kZSkKICAgICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQ2FuJ3QgYWRkIHBlci1ub2RlIHByb3BzIHRvIG5vZGUgdHlwZXMiKTsKICAgICAgICAgIGlmICh0eXBlb2YgbWF0Y2ggIT0gImZ1bmN0aW9uIikKICAgICAgICAgICAgICBtYXRjaCA9IE5vZGVUeXBlLm1hdGNoKG1hdGNoKTsKICAgICAgICAgIHJldHVybiAodHlwZSkgPT4gewogICAgICAgICAgICAgIGxldCByZXN1bHQgPSBtYXRjaCh0eXBlKTsKICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0ID09PSB1bmRlZmluZWQgPyBudWxsIDogW3RoaXMsIHJlc3VsdF07CiAgICAgICAgICB9OwogICAgICB9CiAgfQogIC8vLyBQcm9wIHRoYXQgaXMgdXNlZCB0byBkZXNjcmliZSBtYXRjaGluZyBkZWxpbWl0ZXJzLiBGb3Igb3BlbmluZwogIC8vLyBkZWxpbWl0ZXJzLCB0aGlzIGhvbGRzIGFuIGFycmF5IG9mIG5vZGUgbmFtZXMgKHdyaXR0ZW4gYXMgYQogIC8vLyBzcGFjZS1zZXBhcmF0ZWQgc3RyaW5nIHdoZW4gZGVjbGFyaW5nIHRoaXMgcHJvcCBpbiBhIGdyYW1tYXIpCiAgLy8vIGZvciB0aGUgbm9kZSB0eXBlcyBvZiBjbG9zaW5nIGRlbGltaXRlcnMgdGhhdCBtYXRjaCBpdC4KICBOb2RlUHJvcC5jbG9zZWRCeSA9IG5ldyBOb2RlUHJvcCh7IGRlc2VyaWFsaXplOiBzdHIgPT4gc3RyLnNwbGl0KCIgIikgfSk7CiAgLy8vIFRoZSBpbnZlcnNlIG9mIFtgY2xvc2VkQnlgXSgjY29tbW9uLk5vZGVQcm9wXmNsb3NlZEJ5KS4gVGhpcyBpcwogIC8vLyBhdHRhY2hlZCB0byBjbG9zaW5nIGRlbGltaXRlcnMsIGhvbGRpbmcgYW4gYXJyYXkgb2Ygbm9kZSBuYW1lcwogIC8vLyBvZiB0eXBlcyBvZiBtYXRjaGluZyBvcGVuaW5nIGRlbGltaXRlcnMuCiAgTm9kZVByb3Aub3BlbmVkQnkgPSBuZXcgTm9kZVByb3AoeyBkZXNlcmlhbGl6ZTogc3RyID0+IHN0ci5zcGxpdCgiICIpIH0pOwogIC8vLyBVc2VkIHRvIGFzc2lnbiBub2RlIHR5cGVzIHRvIGdyb3VwcyAoZm9yIGV4YW1wbGUsIGFsbCBub2RlCiAgLy8vIHR5cGVzIHRoYXQgcmVwcmVzZW50IGFuIGV4cHJlc3Npb24gY291bGQgYmUgdGFnZ2VkIHdpdGggYW4KICAvLy8gYCJFeHByZXNzaW9uImAgZ3JvdXApLgogIE5vZGVQcm9wLmdyb3VwID0gbmV3IE5vZGVQcm9wKHsgZGVzZXJpYWxpemU6IHN0ciA9PiBzdHIuc3BsaXQoIiAiKSB9KTsKICAvLy8gVGhlIGhhc2ggb2YgdGhlIFtjb250ZXh0XSgjbHIuQ29udGV4dFRyYWNrZXIuY29uc3RydWN0b3IpCiAgLy8vIHRoYXQgdGhlIG5vZGUgd2FzIHBhcnNlZCBpbiwgaWYgYW55LiBVc2VkIHRvIGxpbWl0IHJldXNlIG9mCiAgLy8vIGNvbnRleHR1YWwgbm9kZXMuCiAgTm9kZVByb3AuY29udGV4dEhhc2ggPSBuZXcgTm9kZVByb3AoeyBwZXJOb2RlOiB0cnVlIH0pOwogIC8vLyBUaGUgZGlzdGFuY2UgYmV5b25kIHRoZSBlbmQgb2YgdGhlIG5vZGUgdGhhdCB0aGUgdG9rZW5pemVyCiAgLy8vIGxvb2tlZCBhaGVhZCBmb3IgYW55IG9mIHRoZSB0b2tlbnMgaW5zaWRlIHRoZSBub2RlLiAoVGhlIExSCiAgLy8vIHBhcnNlciBvbmx5IHN0b3JlcyB0aGlzIHdoZW4gaXQgaXMgbGFyZ2VyIHRoYW4gMjUsIGZvcgogIC8vLyBlZmZpY2llbmN5IHJlYXNvbnMuKQogIE5vZGVQcm9wLmxvb2tBaGVhZCA9IG5ldyBOb2RlUHJvcCh7IHBlck5vZGU6IHRydWUgfSk7CiAgLy8vIFRoaXMgcGVyLW5vZGUgcHJvcCBpcyB1c2VkIHRvIHJlcGxhY2UgYSBnaXZlbiBub2RlLCBvciBwYXJ0IG9mIGEKICAvLy8gbm9kZSwgd2l0aCBhbm90aGVyIHRyZWUuIFRoaXMgaXMgdXNlZnVsIHRvIGluY2x1ZGUgdHJlZXMgZnJvbQogIC8vLyBkaWZmZXJlbnQgbGFuZ3VhZ2VzIGluIG1peGVkLWxhbmd1YWdlIHBhcnNlcnMuCiAgTm9kZVByb3AubW91bnRlZCA9IG5ldyBOb2RlUHJvcCh7IHBlck5vZGU6IHRydWUgfSk7CiAgY29uc3Qgbm9Qcm9wcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7CiAgLy8vIEVhY2ggbm9kZSBpbiBhIHN5bnRheCB0cmVlIGhhcyBhIG5vZGUgdHlwZSBhc3NvY2lhdGVkIHdpdGggaXQuCiAgY2xhc3MgTm9kZVR5cGUgewogICAgICAvLy8gQGludGVybmFsCiAgICAgIGNvbnN0cnVjdG9yKAogICAgICAvLy8gVGhlIG5hbWUgb2YgdGhlIG5vZGUgdHlwZS4gTm90IG5lY2Vzc2FyaWx5IHVuaXF1ZSwgYnV0IGlmIHRoZQogICAgICAvLy8gZ3JhbW1hciB3YXMgd3JpdHRlbiBwcm9wZXJseSwgZGlmZmVyZW50IG5vZGUgdHlwZXMgd2l0aCB0aGUKICAgICAgLy8vIHNhbWUgbmFtZSB3aXRoaW4gYSBub2RlIHNldCBzaG91bGQgcGxheSB0aGUgc2FtZSBzZW1hbnRpYwogICAgICAvLy8gcm9sZS4KICAgICAgbmFtZSwgCiAgICAgIC8vLyBAaW50ZXJuYWwKICAgICAgcHJvcHMsIAogICAgICAvLy8gVGhlIGlkIG9mIHRoaXMgbm9kZSBpbiBpdHMgc2V0LiBDb3JyZXNwb25kcyB0byB0aGUgdGVybSBpZHMKICAgICAgLy8vIHVzZWQgaW4gdGhlIHBhcnNlci4KICAgICAgaWQsIAogICAgICAvLy8gQGludGVybmFsCiAgICAgIGZsYWdzID0gMCkgewogICAgICAgICAgdGhpcy5uYW1lID0gbmFtZTsKICAgICAgICAgIHRoaXMucHJvcHMgPSBwcm9wczsKICAgICAgICAgIHRoaXMuaWQgPSBpZDsKICAgICAgICAgIHRoaXMuZmxhZ3MgPSBmbGFnczsKICAgICAgfQogICAgICAvLy8gRGVmaW5lIGEgbm9kZSB0eXBlLgogICAgICBzdGF0aWMgZGVmaW5lKHNwZWMpIHsKICAgICAgICAgIGxldCBwcm9wcyA9IHNwZWMucHJvcHMgJiYgc3BlYy5wcm9wcy5sZW5ndGggPyBPYmplY3QuY3JlYXRlKG51bGwpIDogbm9Qcm9wczsKICAgICAgICAgIGxldCBmbGFncyA9IChzcGVjLnRvcCA/IDEgLyogVG9wICovIDogMCkgfCAoc3BlYy5za2lwcGVkID8gMiAvKiBTa2lwcGVkICovIDogMCkgfAogICAgICAgICAgICAgIChzcGVjLmVycm9yID8gNCAvKiBFcnJvciAqLyA6IDApIHwgKHNwZWMubmFtZSA9PSBudWxsID8gOCAvKiBBbm9ueW1vdXMgKi8gOiAwKTsKICAgICAgICAgIGxldCB0eXBlID0gbmV3IE5vZGVUeXBlKHNwZWMubmFtZSB8fCAiIiwgcHJvcHMsIHNwZWMuaWQsIGZsYWdzKTsKICAgICAgICAgIGlmIChzcGVjLnByb3BzKQogICAgICAgICAgICAgIGZvciAobGV0IHNyYyBvZiBzcGVjLnByb3BzKSB7CiAgICAgICAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShzcmMpKQogICAgICAgICAgICAgICAgICAgICAgc3JjID0gc3JjKHR5cGUpOwogICAgICAgICAgICAgICAgICBpZiAoc3JjKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAoc3JjWzBdLnBlck5vZGUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkNhbid0IHN0b3JlIGEgcGVyLW5vZGUgcHJvcCBvbiBhIG5vZGUgdHlwZSIpOwogICAgICAgICAgICAgICAgICAgICAgcHJvcHNbc3JjWzBdLmlkXSA9IHNyY1sxXTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiB0eXBlOwogICAgICB9CiAgICAgIC8vLyBSZXRyaWV2ZXMgYSBub2RlIHByb3AgZm9yIHRoaXMgdHlwZS4gV2lsbCByZXR1cm4gYHVuZGVmaW5lZGAgaWYKICAgICAgLy8vIHRoZSBwcm9wIGlzbid0IHByZXNlbnQgb24gdGhpcyBub2RlLgogICAgICBwcm9wKHByb3ApIHsgcmV0dXJuIHRoaXMucHJvcHNbcHJvcC5pZF07IH0KICAgICAgLy8vIFRydWUgd2hlbiB0aGlzIGlzIHRoZSB0b3Agbm9kZSBvZiBhIGdyYW1tYXIuCiAgICAgIGdldCBpc1RvcCgpIHsgcmV0dXJuICh0aGlzLmZsYWdzICYgMSAvKiBUb3AgKi8pID4gMDsgfQogICAgICAvLy8gVHJ1ZSB3aGVuIHRoaXMgbm9kZSBpcyBwcm9kdWNlZCBieSBhIHNraXAgcnVsZS4KICAgICAgZ2V0IGlzU2tpcHBlZCgpIHsgcmV0dXJuICh0aGlzLmZsYWdzICYgMiAvKiBTa2lwcGVkICovKSA+IDA7IH0KICAgICAgLy8vIEluZGljYXRlcyB3aGV0aGVyIHRoaXMgaXMgYW4gZXJyb3Igbm9kZS4KICAgICAgZ2V0IGlzRXJyb3IoKSB7IHJldHVybiAodGhpcy5mbGFncyAmIDQgLyogRXJyb3IgKi8pID4gMDsgfQogICAgICAvLy8gV2hlbiB0cnVlLCB0aGlzIG5vZGUgdHlwZSBkb2Vzbid0IGNvcnJlc3BvbmQgdG8gYSB1c2VyLWRlY2xhcmVkCiAgICAgIC8vLyBuYW1lZCBub2RlLCBmb3IgZXhhbXBsZSBiZWNhdXNlIGl0IGlzIHVzZWQgdG8gY2FjaGUgcmVwZXRpdGlvbi4KICAgICAgZ2V0IGlzQW5vbnltb3VzKCkgeyByZXR1cm4gKHRoaXMuZmxhZ3MgJiA4IC8qIEFub255bW91cyAqLykgPiAwOyB9CiAgICAgIC8vLyBSZXR1cm5zIHRydWUgd2hlbiB0aGlzIG5vZGUncyBuYW1lIG9yIG9uZSBvZiBpdHMKICAgICAgLy8vIFtncm91cHNdKCNjb21tb24uTm9kZVByb3BeZ3JvdXApIG1hdGNoZXMgdGhlIGdpdmVuIHN0cmluZy4KICAgICAgaXMobmFtZSkgewogICAgICAgICAgaWYgKHR5cGVvZiBuYW1lID09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgICAgaWYgKHRoaXMubmFtZSA9PSBuYW1lKQogICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICBsZXQgZ3JvdXAgPSB0aGlzLnByb3AoTm9kZVByb3AuZ3JvdXApOwogICAgICAgICAgICAgIHJldHVybiBncm91cCA/IGdyb3VwLmluZGV4T2YobmFtZSkgPiAtMSA6IGZhbHNlOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHRoaXMuaWQgPT0gbmFtZTsKICAgICAgfQogICAgICAvLy8gQ3JlYXRlIGEgZnVuY3Rpb24gZnJvbSBub2RlIHR5cGVzIHRvIGFyYml0cmFyeSB2YWx1ZXMgYnkKICAgICAgLy8vIHNwZWNpZnlpbmcgYW4gb2JqZWN0IHdob3NlIHByb3BlcnR5IG5hbWVzIGFyZSBub2RlIG9yCiAgICAgIC8vLyBbZ3JvdXBdKCNjb21tb24uTm9kZVByb3BeZ3JvdXApIG5hbWVzLiBPZnRlbiB1c2VmdWwgd2l0aAogICAgICAvLy8gW2BOb2RlUHJvcC5hZGRgXSgjY29tbW9uLk5vZGVQcm9wLmFkZCkuIFlvdSBjYW4gcHV0IG11bHRpcGxlCiAgICAgIC8vLyBuYW1lcywgc2VwYXJhdGVkIGJ5IHNwYWNlcywgaW4gYSBzaW5nbGUgcHJvcGVydHkgbmFtZSB0byBtYXAKICAgICAgLy8vIG11bHRpcGxlIG5vZGUgbmFtZXMgdG8gYSBzaW5nbGUgdmFsdWUuCiAgICAgIHN0YXRpYyBtYXRjaChtYXApIHsKICAgICAgICAgIGxldCBkaXJlY3QgPSBPYmplY3QuY3JlYXRlKG51bGwpOwogICAgICAgICAgZm9yIChsZXQgcHJvcCBpbiBtYXApCiAgICAgICAgICAgICAgZm9yIChsZXQgbmFtZSBvZiBwcm9wLnNwbGl0KCIgIikpCiAgICAgICAgICAgICAgICAgIGRpcmVjdFtuYW1lXSA9IG1hcFtwcm9wXTsKICAgICAgICAgIHJldHVybiAobm9kZSkgPT4gewogICAgICAgICAgICAgIGZvciAobGV0IGdyb3VwcyA9IG5vZGUucHJvcChOb2RlUHJvcC5ncm91cCksIGkgPSAtMTsgaSA8IChncm91cHMgPyBncm91cHMubGVuZ3RoIDogMCk7IGkrKykgewogICAgICAgICAgICAgICAgICBsZXQgZm91bmQgPSBkaXJlY3RbaSA8IDAgPyBub2RlLm5hbWUgOiBncm91cHNbaV1dOwogICAgICAgICAgICAgICAgICBpZiAoZm91bmQpCiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZm91bmQ7CiAgICAgICAgICAgICAgfQogICAgICAgICAgfTsKICAgICAgfQogIH0KICAvLy8gQW4gZW1wdHkgZHVtbXkgbm9kZSB0eXBlIHRvIHVzZSB3aGVuIG5vIGFjdHVhbCB0eXBlIGlzIGF2YWlsYWJsZS4KICBOb2RlVHlwZS5ub25lID0gbmV3IE5vZGVUeXBlKCIiLCBPYmplY3QuY3JlYXRlKG51bGwpLCAwLCA4IC8qIEFub255bW91cyAqLyk7CiAgLy8vIEEgbm9kZSBzZXQgaG9sZHMgYSBjb2xsZWN0aW9uIG9mIG5vZGUgdHlwZXMuIEl0IGlzIHVzZWQgdG8KICAvLy8gY29tcGFjdGx5IHJlcHJlc2VudCB0cmVlcyBieSBzdG9yaW5nIHRoZWlyIHR5cGUgaWRzLCByYXRoZXIgdGhhbiBhCiAgLy8vIGZ1bGwgcG9pbnRlciB0byB0aGUgdHlwZSBvYmplY3QsIGluIGEgbnVtZXJpYyBhcnJheS4gRWFjaCBwYXJzZXIKICAvLy8gW2hhc10oI2xyLkxSUGFyc2VyLm5vZGVTZXQpIGEgbm9kZSBzZXQsIGFuZCBbdHJlZQogIC8vLyBidWZmZXJzXSgjY29tbW9uLlRyZWVCdWZmZXIpIGNhbiBvbmx5IHN0b3JlIGNvbGxlY3Rpb25zIG9mIG5vZGVzCiAgLy8vIGZyb20gdGhlIHNhbWUgc2V0LiBBIHNldCBjYW4gaGF2ZSBhIG1heGltdW0gb2YgMioqMTYgKDY1NTM2KSBub2RlCiAgLy8vIHR5cGVzIGluIGl0LCBzbyB0aGF0IHRoZSBpZHMgZml0IGludG8gMTYtYml0IHR5cGVkIGFycmF5IHNsb3RzLgogIGNsYXNzIE5vZGVTZXQgewogICAgICAvLy8gQ3JlYXRlIGEgc2V0IHdpdGggdGhlIGdpdmVuIHR5cGVzLiBUaGUgYGlkYCBwcm9wZXJ0eSBvZiBlYWNoCiAgICAgIC8vLyB0eXBlIHNob3VsZCBjb3JyZXNwb25kIHRvIGl0cyBwb3NpdGlvbiB3aXRoaW4gdGhlIGFycmF5LgogICAgICBjb25zdHJ1Y3RvcigKICAgICAgLy8vIFRoZSBub2RlIHR5cGVzIGluIHRoaXMgc2V0LCBieSBpZC4KICAgICAgdHlwZXMpIHsKICAgICAgICAgIHRoaXMudHlwZXMgPSB0eXBlczsKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdHlwZXMubGVuZ3RoOyBpKyspCiAgICAgICAgICAgICAgaWYgKHR5cGVzW2ldLmlkICE9IGkpCiAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCJOb2RlIHR5cGUgaWRzIHNob3VsZCBjb3JyZXNwb25kIHRvIGFycmF5IHBvc2l0aW9ucyB3aGVuIGNyZWF0aW5nIGEgbm9kZSBzZXQiKTsKICAgICAgfQogICAgICAvLy8gQ3JlYXRlIGEgY29weSBvZiB0aGlzIHNldCB3aXRoIHNvbWUgbm9kZSBwcm9wZXJ0aWVzIGFkZGVkLiBUaGUKICAgICAgLy8vIGFyZ3VtZW50cyB0byB0aGlzIG1ldGhvZCBjYW4gYmUgY3JlYXRlZCB3aXRoCiAgICAgIC8vLyBbYE5vZGVQcm9wLmFkZGBdKCNjb21tb24uTm9kZVByb3AuYWRkKS4KICAgICAgZXh0ZW5kKC4uLnByb3BzKSB7CiAgICAgICAgICBsZXQgbmV3VHlwZXMgPSBbXTsKICAgICAgICAgIGZvciAobGV0IHR5cGUgb2YgdGhpcy50eXBlcykgewogICAgICAgICAgICAgIGxldCBuZXdQcm9wcyA9IG51bGw7CiAgICAgICAgICAgICAgZm9yIChsZXQgc291cmNlIG9mIHByb3BzKSB7CiAgICAgICAgICAgICAgICAgIGxldCBhZGQgPSBzb3VyY2UodHlwZSk7CiAgICAgICAgICAgICAgICAgIGlmIChhZGQpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmICghbmV3UHJvcHMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3UHJvcHMgPSBPYmplY3QuYXNzaWduKHt9LCB0eXBlLnByb3BzKTsKICAgICAgICAgICAgICAgICAgICAgIG5ld1Byb3BzW2FkZFswXS5pZF0gPSBhZGRbMV07CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgbmV3VHlwZXMucHVzaChuZXdQcm9wcyA/IG5ldyBOb2RlVHlwZSh0eXBlLm5hbWUsIG5ld1Byb3BzLCB0eXBlLmlkLCB0eXBlLmZsYWdzKSA6IHR5cGUpOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIG5ldyBOb2RlU2V0KG5ld1R5cGVzKTsKICAgICAgfQogIH0KICBjb25zdCBDYWNoZWROb2RlID0gbmV3IFdlYWtNYXAoKSwgQ2FjaGVkSW5uZXJOb2RlID0gbmV3IFdlYWtNYXAoKTsKICAvLy8gT3B0aW9ucyB0aGF0IGNvbnRyb2wgaXRlcmF0aW9uLiBDYW4gYmUgY29tYmluZWQgd2l0aCB0aGUgYHxgCiAgLy8vIG9wZXJhdG9yIHRvIGVuYWJsZSBtdWx0aXBsZSBvbmVzLgogIHZhciBJdGVyTW9kZTsKICAoZnVuY3Rpb24gKEl0ZXJNb2RlKSB7CiAgICAgIC8vLyBXaGVuIGVuYWJsZWQsIGl0ZXJhdGlvbiB3aWxsIG9ubHkgdmlzaXQgW2BUcmVlYF0oI2NvbW1vbi5UcmVlKQogICAgICAvLy8gb2JqZWN0cywgbm90IG5vZGVzIHBhY2tlZCBpbnRvCiAgICAgIC8vLyBbYFRyZWVCdWZmZXJgXSgjY29tbW9uLlRyZWVCdWZmZXIpcy4KICAgICAgSXRlck1vZGVbSXRlck1vZGVbIkV4Y2x1ZGVCdWZmZXJzIl0gPSAxXSA9ICJFeGNsdWRlQnVmZmVycyI7CiAgICAgIC8vLyBFbmFibGUgdGhpcyB0byBtYWtlIGl0ZXJhdGlvbiBpbmNsdWRlIGFub255bW91cyBub2RlcyAoc3VjaCBhcwogICAgICAvLy8gdGhlIG5vZGVzIHRoYXQgd3JhcCByZXBlYXRlZCBncmFtbWFyIGNvbnN0cnVjdHMgaW50byBhIGJhbGFuY2VkCiAgICAgIC8vLyB0cmVlKS4KICAgICAgSXRlck1vZGVbSXRlck1vZGVbIkluY2x1ZGVBbm9ueW1vdXMiXSA9IDJdID0gIkluY2x1ZGVBbm9ueW1vdXMiOwogICAgICAvLy8gQnkgZGVmYXVsdCwgcmVndWxhciBbbW91bnRlZF0oI2NvbW1vbi5Ob2RlUHJvcF5tb3VudGVkKSBub2RlcwogICAgICAvLy8gcmVwbGFjZSB0aGVpciBiYXNlIG5vZGUgaW4gaXRlcmF0aW9uLiBFbmFibGUgdGhpcyB0byBpZ25vcmUgdGhlbQogICAgICAvLy8gaW5zdGVhZC4KICAgICAgSXRlck1vZGVbSXRlck1vZGVbIklnbm9yZU1vdW50cyJdID0gNF0gPSAiSWdub3JlTW91bnRzIjsKICAgICAgLy8vIFRoaXMgb3B0aW9uIG9ubHkgYXBwbGllcyBpbgogICAgICAvLy8gW2BlbnRlcmBdKCNjb21tb24uU3ludGF4Tm9kZS5lbnRlciktc3R5bGUgbWV0aG9kcy4gSXQgdGVsbHMgdGhlCiAgICAgIC8vLyBsaWJyYXJ5IHRvIG5vdCBlbnRlciBtb3VudGVkIG92ZXJsYXlzIGlmIG9uZSBjb3ZlcnMgdGhlIGdpdmVuCiAgICAgIC8vLyBwb3NpdGlvbi4KICAgICAgSXRlck1vZGVbSXRlck1vZGVbIklnbm9yZU92ZXJsYXlzIl0gPSA4XSA9ICJJZ25vcmVPdmVybGF5cyI7CiAgfSkoSXRlck1vZGUgfHwgKEl0ZXJNb2RlID0ge30pKTsKICAvLy8gQSBwaWVjZSBvZiBzeW50YXggdHJlZS4gVGhlcmUgYXJlIHR3byB3YXlzIHRvIGFwcHJvYWNoIHRoZXNlCiAgLy8vIHRyZWVzOiB0aGUgd2F5IHRoZXkgYXJlIGFjdHVhbGx5IHN0b3JlZCBpbiBtZW1vcnksIGFuZCB0aGUKICAvLy8gY29udmVuaWVudCB3YXkuCiAgLy8vCiAgLy8vIFN5bnRheCB0cmVlcyBhcmUgc3RvcmVkIGFzIGEgdHJlZSBvZiBgVHJlZWAgYW5kIGBUcmVlQnVmZmVyYAogIC8vLyBvYmplY3RzLiBCeSBwYWNraW5nIGRldGFpbCBpbmZvcm1hdGlvbiBpbnRvIGBUcmVlQnVmZmVyYCBsZWFmCiAgLy8vIG5vZGVzLCB0aGUgcmVwcmVzZW50YXRpb24gaXMgbWFkZSBhIGxvdCBtb3JlIG1lbW9yeS1lZmZpY2llbnQuCiAgLy8vCiAgLy8vIEhvd2V2ZXIsIHdoZW4geW91IHdhbnQgdG8gYWN0dWFsbHkgd29yayB3aXRoIHRyZWUgbm9kZXMsIHRoaXMKICAvLy8gcmVwcmVzZW50YXRpb24gaXMgdmVyeSBhd2t3YXJkLCBzbyBtb3N0IGNsaWVudCBjb2RlIHdpbGwgd2FudCB0bwogIC8vLyB1c2UgdGhlIFtgVHJlZUN1cnNvcmBdKCNjb21tb24uVHJlZUN1cnNvcikgb3IKICAvLy8gW2BTeW50YXhOb2RlYF0oI2NvbW1vbi5TeW50YXhOb2RlKSBpbnRlcmZhY2UgaW5zdGVhZCwgd2hpY2ggcHJvdmlkZXMKICAvLy8gYSB2aWV3IG9uIHNvbWUgcGFydCBvZiB0aGlzIGRhdGEgc3RydWN0dXJlLCBhbmQgY2FuIGJlIHVzZWQgdG8KICAvLy8gbW92ZSBhcm91bmQgdG8gYWRqYWNlbnQgbm9kZXMuCiAgY2xhc3MgVHJlZSB7CiAgICAgIC8vLyBDb25zdHJ1Y3QgYSBuZXcgdHJlZS4gU2VlIGFsc28gW2BUcmVlLmJ1aWxkYF0oI2NvbW1vbi5UcmVlXmJ1aWxkKS4KICAgICAgY29uc3RydWN0b3IoCiAgICAgIC8vLyBUaGUgdHlwZSBvZiB0aGUgdG9wIG5vZGUuCiAgICAgIHR5cGUsIAogICAgICAvLy8gVGhpcyBub2RlJ3MgY2hpbGQgbm9kZXMuCiAgICAgIGNoaWxkcmVuLCAKICAgICAgLy8vIFRoZSBwb3NpdGlvbnMgKG9mZnNldHMgcmVsYXRpdmUgdG8gdGhlIHN0YXJ0IG9mIHRoaXMgdHJlZSkgb2YKICAgICAgLy8vIHRoZSBjaGlsZHJlbi4KICAgICAgcG9zaXRpb25zLCAKICAgICAgLy8vIFRoZSB0b3RhbCBsZW5ndGggb2YgdGhpcyB0cmVlCiAgICAgIGxlbmd0aCwgCiAgICAgIC8vLyBQZXItbm9kZSBbbm9kZSBwcm9wc10oI2NvbW1vbi5Ob2RlUHJvcCkgdG8gYXNzb2NpYXRlIHdpdGggdGhpcyBub2RlLgogICAgICBwcm9wcykgewogICAgICAgICAgdGhpcy50eXBlID0gdHlwZTsKICAgICAgICAgIHRoaXMuY2hpbGRyZW4gPSBjaGlsZHJlbjsKICAgICAgICAgIHRoaXMucG9zaXRpb25zID0gcG9zaXRpb25zOwogICAgICAgICAgdGhpcy5sZW5ndGggPSBsZW5ndGg7CiAgICAgICAgICAvLy8gQGludGVybmFsCiAgICAgICAgICB0aGlzLnByb3BzID0gbnVsbDsKICAgICAgICAgIGlmIChwcm9wcyAmJiBwcm9wcy5sZW5ndGgpIHsKICAgICAgICAgICAgICB0aGlzLnByb3BzID0gT2JqZWN0LmNyZWF0ZShudWxsKTsKICAgICAgICAgICAgICBmb3IgKGxldCBbcHJvcCwgdmFsdWVdIG9mIHByb3BzKQogICAgICAgICAgICAgICAgICB0aGlzLnByb3BzW3R5cGVvZiBwcm9wID09ICJudW1iZXIiID8gcHJvcCA6IHByb3AuaWRdID0gdmFsdWU7CiAgICAgICAgICB9CiAgICAgIH0KICAgICAgLy8vIEBpbnRlcm5hbAogICAgICB0b1N0cmluZygpIHsKICAgICAgICAgIGxldCBtb3VudGVkID0gdGhpcy5wcm9wKE5vZGVQcm9wLm1vdW50ZWQpOwogICAgICAgICAgaWYgKG1vdW50ZWQgJiYgIW1vdW50ZWQub3ZlcmxheSkKICAgICAgICAgICAgICByZXR1cm4gbW91bnRlZC50cmVlLnRvU3RyaW5nKCk7CiAgICAgICAgICBsZXQgY2hpbGRyZW4gPSAiIjsKICAgICAgICAgIGZvciAobGV0IGNoIG9mIHRoaXMuY2hpbGRyZW4pIHsKICAgICAgICAgICAgICBsZXQgc3RyID0gY2gudG9TdHJpbmcoKTsKICAgICAgICAgICAgICBpZiAoc3RyKSB7CiAgICAgICAgICAgICAgICAgIGlmIChjaGlsZHJlbikKICAgICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuICs9ICIsIjsKICAgICAgICAgICAgICAgICAgY2hpbGRyZW4gKz0gc3RyOwogICAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiAhdGhpcy50eXBlLm5hbWUgPyBjaGlsZHJlbiA6CiAgICAgICAgICAgICAgKC9cVy8udGVzdCh0aGlzLnR5cGUubmFtZSkgJiYgIXRoaXMudHlwZS5pc0Vycm9yID8gSlNPTi5zdHJpbmdpZnkodGhpcy50eXBlLm5hbWUpIDogdGhpcy50eXBlLm5hbWUpICsKICAgICAgICAgICAgICAgICAgKGNoaWxkcmVuLmxlbmd0aCA/ICIoIiArIGNoaWxkcmVuICsgIikiIDogIiIpOwogICAgICB9CiAgICAgIC8vLyBHZXQgYSBbdHJlZSBjdXJzb3JdKCNjb21tb24uVHJlZUN1cnNvcikgcG9zaXRpb25lZCBhdCB0aGUgdG9wIG9mCiAgICAgIC8vLyB0aGUgdHJlZS4gTW9kZSBjYW4gYmUgdXNlZCB0byBbY29udHJvbF0oI2NvbW1vbi5JdGVyTW9kZSkgd2hpY2gKICAgICAgLy8vIG5vZGVzIHRoZSBjdXJzb3IgdmlzaXRzLgogICAgICBjdXJzb3IobW9kZSA9IDApIHsKICAgICAgICAgIHJldHVybiBuZXcgVHJlZUN1cnNvcih0aGlzLnRvcE5vZGUsIG1vZGUpOwogICAgICB9CiAgICAgIC8vLyBHZXQgYSBbdHJlZSBjdXJzb3JdKCNjb21tb24uVHJlZUN1cnNvcikgcG9pbnRpbmcgaW50byB0aGlzIHRyZWUKICAgICAgLy8vIGF0IHRoZSBnaXZlbiBwb3NpdGlvbiBhbmQgc2lkZSAoc2VlCiAgICAgIC8vLyBbYG1vdmVUb2BdKCNjb21tb24uVHJlZUN1cnNvci5tb3ZlVG8pLgogICAgICBjdXJzb3JBdChwb3MsIHNpZGUgPSAwLCBtb2RlID0gMCkgewogICAgICAgICAgbGV0IHNjb3BlID0gQ2FjaGVkTm9kZS5nZXQodGhpcykgfHwgdGhpcy50b3BOb2RlOwogICAgICAgICAgbGV0IGN1cnNvciA9IG5ldyBUcmVlQ3Vyc29yKHNjb3BlKTsKICAgICAgICAgIGN1cnNvci5tb3ZlVG8ocG9zLCBzaWRlKTsKICAgICAgICAgIENhY2hlZE5vZGUuc2V0KHRoaXMsIGN1cnNvci5fdHJlZSk7CiAgICAgICAgICByZXR1cm4gY3Vyc29yOwogICAgICB9CiAgICAgIC8vLyBHZXQgYSBbc3ludGF4IG5vZGVdKCNjb21tb24uU3ludGF4Tm9kZSkgb2JqZWN0IGZvciB0aGUgdG9wIG9mIHRoZQogICAgICAvLy8gdHJlZS4KICAgICAgZ2V0IHRvcE5vZGUoKSB7CiAgICAgICAgICByZXR1cm4gbmV3IFRyZWVOb2RlKHRoaXMsIDAsIDAsIG51bGwpOwogICAgICB9CiAgICAgIC8vLyBHZXQgdGhlIFtzeW50YXggbm9kZV0oI2NvbW1vbi5TeW50YXhOb2RlKSBhdCB0aGUgZ2l2ZW4gcG9zaXRpb24uCiAgICAgIC8vLyBJZiBgc2lkZWAgaXMgLTEsIHRoaXMgd2lsbCBtb3ZlIGludG8gbm9kZXMgdGhhdCBlbmQgYXQgdGhlCiAgICAgIC8vLyBwb3NpdGlvbi4gSWYgMSwgaXQnbGwgbW92ZSBpbnRvIG5vZGVzIHRoYXQgc3RhcnQgYXQgdGhlCiAgICAgIC8vLyBwb3NpdGlvbi4gV2l0aCAwLCBpdCdsbCBvbmx5IGVudGVyIG5vZGVzIHRoYXQgY292ZXIgdGhlIHBvc2l0aW9uCiAgICAgIC8vLyBmcm9tIGJvdGggc2lkZXMuCiAgICAgIC8vLwogICAgICAvLy8gTm90ZSB0aGF0IHRoaXMgd2lsbCBub3QgZW50ZXIKICAgICAgLy8vIFtvdmVybGF5c10oI2NvbW1vbi5Nb3VudGVkVHJlZS5vdmVybGF5KSwgYW5kIHlvdSBvZnRlbiB3YW50CiAgICAgIC8vLyBbYHJlc29sdmVJbm5lcmBdKCNjb21tb24uVHJlZS5yZXNvbHZlSW5uZXIpIGluc3RlYWQuCiAgICAgIHJlc29sdmUocG9zLCBzaWRlID0gMCkgewogICAgICAgICAgbGV0IG5vZGUgPSByZXNvbHZlTm9kZShDYWNoZWROb2RlLmdldCh0aGlzKSB8fCB0aGlzLnRvcE5vZGUsIHBvcywgc2lkZSwgZmFsc2UpOwogICAgICAgICAgQ2FjaGVkTm9kZS5zZXQodGhpcywgbm9kZSk7CiAgICAgICAgICByZXR1cm4gbm9kZTsKICAgICAgfQogICAgICAvLy8gTGlrZSBbYHJlc29sdmVgXSgjY29tbW9uLlRyZWUucmVzb2x2ZSksIGJ1dCB3aWxsIGVudGVyCiAgICAgIC8vLyBbb3ZlcmxhaWRdKCNjb21tb24uTW91bnRlZFRyZWUub3ZlcmxheSkgbm9kZXMsIHByb2R1Y2luZyBhIHN5bnRheCBub2RlCiAgICAgIC8vLyBwb2ludGluZyBpbnRvIHRoZSBpbm5lcm1vc3Qgb3ZlcmxhaWQgdHJlZSBhdCB0aGUgZ2l2ZW4gcG9zaXRpb24KICAgICAgLy8vICh3aXRoIHBhcmVudCBsaW5rcyBnb2luZyB0aHJvdWdoIGFsbCBwYXJlbnQgc3RydWN0dXJlLCBpbmNsdWRpbmcKICAgICAgLy8vIHRoZSBob3N0IHRyZWVzKS4KICAgICAgcmVzb2x2ZUlubmVyKHBvcywgc2lkZSA9IDApIHsKICAgICAgICAgIGxldCBub2RlID0gcmVzb2x2ZU5vZGUoQ2FjaGVkSW5uZXJOb2RlLmdldCh0aGlzKSB8fCB0aGlzLnRvcE5vZGUsIHBvcywgc2lkZSwgdHJ1ZSk7CiAgICAgICAgICBDYWNoZWRJbm5lck5vZGUuc2V0KHRoaXMsIG5vZGUpOwogICAgICAgICAgcmV0dXJuIG5vZGU7CiAgICAgIH0KICAgICAgLy8vIEl0ZXJhdGUgb3ZlciB0aGUgdHJlZSBhbmQgaXRzIGNoaWxkcmVuLCBjYWxsaW5nIGBlbnRlcmAgZm9yIGFueQogICAgICAvLy8gbm9kZSB0aGF0IHRvdWNoZXMgdGhlIGBmcm9tYC9gdG9gIHJlZ2lvbiAoaWYgZ2l2ZW4pIGJlZm9yZQogICAgICAvLy8gcnVubmluZyBvdmVyIHN1Y2ggYSBub2RlJ3MgY2hpbGRyZW4sIGFuZCBgbGVhdmVgIChpZiBnaXZlbikgd2hlbgogICAgICAvLy8gbGVhdmluZyB0aGUgbm9kZS4gV2hlbiBgZW50ZXJgIHJldHVybnMgYGZhbHNlYCwgdGhhdCBub2RlIHdpbGwKICAgICAgLy8vIG5vdCBoYXZlIGl0cyBjaGlsZHJlbiBpdGVyYXRlZCBvdmVyIChvciBgbGVhdmVgIGNhbGxlZCkuCiAgICAgIGl0ZXJhdGUoc3BlYykgewogICAgICAgICAgbGV0IHsgZW50ZXIsIGxlYXZlLCBmcm9tID0gMCwgdG8gPSB0aGlzLmxlbmd0aCB9ID0gc3BlYzsKICAgICAgICAgIGZvciAobGV0IGMgPSB0aGlzLmN1cnNvcigoc3BlYy5tb2RlIHx8IDApIHwgSXRlck1vZGUuSW5jbHVkZUFub255bW91cyk7OykgewogICAgICAgICAgICAgIGxldCBlbnRlcmVkID0gZmFsc2U7CiAgICAgICAgICAgICAgaWYgKGMuZnJvbSA8PSB0byAmJiBjLnRvID49IGZyb20gJiYgKGMudHlwZS5pc0Fub255bW91cyB8fCBlbnRlcihjKSAhPT0gZmFsc2UpKSB7CiAgICAgICAgICAgICAgICAgIGlmIChjLmZpcnN0Q2hpbGQoKSkKICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICBlbnRlcmVkID0gdHJ1ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgZm9yICg7OykgewogICAgICAgICAgICAgICAgICBpZiAoZW50ZXJlZCAmJiBsZWF2ZSAmJiAhYy50eXBlLmlzQW5vbnltb3VzKQogICAgICAgICAgICAgICAgICAgICAgbGVhdmUoYyk7CiAgICAgICAgICAgICAgICAgIGlmIChjLm5leHRTaWJsaW5nKCkpCiAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgaWYgKCFjLnBhcmVudCgpKQogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICBlbnRlcmVkID0gdHJ1ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgIH0KICAgICAgLy8vIEdldCB0aGUgdmFsdWUgb2YgdGhlIGdpdmVuIFtub2RlIHByb3BdKCNjb21tb24uTm9kZVByb3ApIGZvciB0aGlzCiAgICAgIC8vLyBub2RlLiBXb3JrcyB3aXRoIGJvdGggcGVyLW5vZGUgYW5kIHBlci10eXBlIHByb3BzLgogICAgICBwcm9wKHByb3ApIHsKICAgICAgICAgIHJldHVybiAhcHJvcC5wZXJOb2RlID8gdGhpcy50eXBlLnByb3AocHJvcCkgOiB0aGlzLnByb3BzID8gdGhpcy5wcm9wc1twcm9wLmlkXSA6IHVuZGVmaW5lZDsKICAgICAgfQogICAgICAvLy8gUmV0dXJucyB0aGUgbm9kZSdzIFtwZXItbm9kZSBwcm9wc10oI2NvbW1vbi5Ob2RlUHJvcC5wZXJOb2RlKSBpbiBhCiAgICAgIC8vLyBmb3JtYXQgdGhhdCBjYW4gYmUgcGFzc2VkIHRvIHRoZSBbYFRyZWVgXSgjY29tbW9uLlRyZWUpCiAgICAgIC8vLyBjb25zdHJ1Y3Rvci4KICAgICAgZ2V0IHByb3BWYWx1ZXMoKSB7CiAgICAgICAgICBsZXQgcmVzdWx0ID0gW107CiAgICAgICAgICBpZiAodGhpcy5wcm9wcykKICAgICAgICAgICAgICBmb3IgKGxldCBpZCBpbiB0aGlzLnByb3BzKQogICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChbK2lkLCB0aGlzLnByb3BzW2lkXV0pOwogICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgfQogICAgICAvLy8gQmFsYW5jZSB0aGUgZGlyZWN0IGNoaWxkcmVuIG9mIHRoaXMgdHJlZSwgcHJvZHVjaW5nIGEgY29weSBvZgogICAgICAvLy8gd2hpY2ggbWF5IGhhdmUgY2hpbGRyZW4gZ3JvdXBlZCBpbnRvIHN1YnRyZWVzIHdpdGggdHlwZQogICAgICAvLy8gW2BOb2RlVHlwZS5ub25lYF0oI2NvbW1vbi5Ob2RlVHlwZV5ub25lKS4KICAgICAgYmFsYW5jZShjb25maWcgPSB7fSkgewogICAgICAgICAgcmV0dXJuIHRoaXMuY2hpbGRyZW4ubGVuZ3RoIDw9IDggLyogQnJhbmNoRmFjdG9yICovID8gdGhpcyA6CiAgICAgICAgICAgICAgYmFsYW5jZVJhbmdlKE5vZGVUeXBlLm5vbmUsIHRoaXMuY2hpbGRyZW4sIHRoaXMucG9zaXRpb25zLCAwLCB0aGlzLmNoaWxkcmVuLmxlbmd0aCwgMCwgdGhpcy5sZW5ndGgsIChjaGlsZHJlbiwgcG9zaXRpb25zLCBsZW5ndGgpID0+IG5ldyBUcmVlKHRoaXMudHlwZSwgY2hpbGRyZW4sIHBvc2l0aW9ucywgbGVuZ3RoLCB0aGlzLnByb3BWYWx1ZXMpLCBjb25maWcubWFrZVRyZWUgfHwgKChjaGlsZHJlbiwgcG9zaXRpb25zLCBsZW5ndGgpID0+IG5ldyBUcmVlKE5vZGVUeXBlLm5vbmUsIGNoaWxkcmVuLCBwb3NpdGlvbnMsIGxlbmd0aCkpKTsKICAgICAgfQogICAgICAvLy8gQnVpbGQgYSB0cmVlIGZyb20gYSBwb3N0Zml4LW9yZGVyZWQgYnVmZmVyIG9mIG5vZGUgaW5mb3JtYXRpb24sCiAgICAgIC8vLyBvciBhIGN1cnNvciBvdmVyIHN1Y2ggYSBidWZmZXIuCiAgICAgIHN0YXRpYyBidWlsZChkYXRhKSB7IHJldHVybiBidWlsZFRyZWUoZGF0YSk7IH0KICB9CiAgLy8vIFRoZSBlbXB0eSB0cmVlCiAgVHJlZS5lbXB0eSA9IG5ldyBUcmVlKE5vZGVUeXBlLm5vbmUsIFtdLCBbXSwgMCk7CiAgY2xhc3MgRmxhdEJ1ZmZlckN1cnNvciB7CiAgICAgIGNvbnN0cnVjdG9yKGJ1ZmZlciwgaW5kZXgpIHsKICAgICAgICAgIHRoaXMuYnVmZmVyID0gYnVmZmVyOwogICAgICAgICAgdGhpcy5pbmRleCA9IGluZGV4OwogICAgICB9CiAgICAgIGdldCBpZCgpIHsgcmV0dXJuIHRoaXMuYnVmZmVyW3RoaXMuaW5kZXggLSA0XTsgfQogICAgICBnZXQgc3RhcnQoKSB7IHJldHVybiB0aGlzLmJ1ZmZlclt0aGlzLmluZGV4IC0gM107IH0KICAgICAgZ2V0IGVuZCgpIHsgcmV0dXJuIHRoaXMuYnVmZmVyW3RoaXMuaW5kZXggLSAyXTsgfQogICAgICBnZXQgc2l6ZSgpIHsgcmV0dXJuIHRoaXMuYnVmZmVyW3RoaXMuaW5kZXggLSAxXTsgfQogICAgICBnZXQgcG9zKCkgeyByZXR1cm4gdGhpcy5pbmRleDsgfQogICAgICBuZXh0KCkgeyB0aGlzLmluZGV4IC09IDQ7IH0KICAgICAgZm9yaygpIHsgcmV0dXJuIG5ldyBGbGF0QnVmZmVyQ3Vyc29yKHRoaXMuYnVmZmVyLCB0aGlzLmluZGV4KTsgfQogIH0KICAvLy8gVHJlZSBidWZmZXJzIGNvbnRhaW4gKHR5cGUsIHN0YXJ0LCBlbmQsIGVuZEluZGV4KSBxdWFkcyBmb3IgZWFjaAogIC8vLyBub2RlLiBJbiBzdWNoIGEgYnVmZmVyLCBub2RlcyBhcmUgc3RvcmVkIGluIHByZWZpeCBvcmRlciAocGFyZW50cwogIC8vLyBiZWZvcmUgY2hpbGRyZW4sIHdpdGggdGhlIGVuZEluZGV4IG9mIHRoZSBwYXJlbnQgaW5kaWNhdGluZyB3aGljaAogIC8vLyBjaGlsZHJlbiBiZWxvbmcgdG8gaXQpLgogIGNsYXNzIFRyZWVCdWZmZXIgewogICAgICAvLy8gQ3JlYXRlIGEgdHJlZSBidWZmZXIuCiAgICAgIGNvbnN0cnVjdG9yKAogICAgICAvLy8gVGhlIGJ1ZmZlcidzIGNvbnRlbnQuCiAgICAgIGJ1ZmZlciwgCiAgICAgIC8vLyBUaGUgdG90YWwgbGVuZ3RoIG9mIHRoZSBncm91cCBvZiBub2RlcyBpbiB0aGUgYnVmZmVyLgogICAgICBsZW5ndGgsIAogICAgICAvLy8gVGhlIG5vZGUgc2V0IHVzZWQgaW4gdGhpcyBidWZmZXIuCiAgICAgIHNldCkgewogICAgICAgICAgdGhpcy5idWZmZXIgPSBidWZmZXI7CiAgICAgICAgICB0aGlzLmxlbmd0aCA9IGxlbmd0aDsKICAgICAgICAgIHRoaXMuc2V0ID0gc2V0OwogICAgICB9CiAgICAgIC8vLyBAaW50ZXJuYWwKICAgICAgZ2V0IHR5cGUoKSB7IHJldHVybiBOb2RlVHlwZS5ub25lOyB9CiAgICAgIC8vLyBAaW50ZXJuYWwKICAgICAgdG9TdHJpbmcoKSB7CiAgICAgICAgICBsZXQgcmVzdWx0ID0gW107CiAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5idWZmZXIubGVuZ3RoOykgewogICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHRoaXMuY2hpbGRTdHJpbmcoaW5kZXgpKTsKICAgICAgICAgICAgICBpbmRleCA9IHRoaXMuYnVmZmVyW2luZGV4ICsgM107CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gcmVzdWx0LmpvaW4oIiwiKTsKICAgICAgfQogICAgICAvLy8gQGludGVybmFsCiAgICAgIGNoaWxkU3RyaW5nKGluZGV4KSB7CiAgICAgICAgICBsZXQgaWQgPSB0aGlzLmJ1ZmZlcltpbmRleF0sIGVuZEluZGV4ID0gdGhpcy5idWZmZXJbaW5kZXggKyAzXTsKICAgICAgICAgIGxldCB0eXBlID0gdGhpcy5zZXQudHlwZXNbaWRdLCByZXN1bHQgPSB0eXBlLm5hbWU7CiAgICAgICAgICBpZiAoL1xXLy50ZXN0KHJlc3VsdCkgJiYgIXR5cGUuaXNFcnJvcikKICAgICAgICAgICAgICByZXN1bHQgPSBKU09OLnN0cmluZ2lmeShyZXN1bHQpOwogICAgICAgICAgaW5kZXggKz0gNDsKICAgICAgICAgIGlmIChlbmRJbmRleCA9PSBpbmRleCkKICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICAgICAgbGV0IGNoaWxkcmVuID0gW107CiAgICAgICAgICB3aGlsZSAoaW5kZXggPCBlbmRJbmRleCkgewogICAgICAgICAgICAgIGNoaWxkcmVuLnB1c2godGhpcy5jaGlsZFN0cmluZyhpbmRleCkpOwogICAgICAgICAgICAgIGluZGV4ID0gdGhpcy5idWZmZXJbaW5kZXggKyAzXTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiByZXN1bHQgKyAiKCIgKyBjaGlsZHJlbi5qb2luKCIsIikgKyAiKSI7CiAgICAgIH0KICAgICAgLy8vIEBpbnRlcm5hbAogICAgICBmaW5kQ2hpbGQoc3RhcnRJbmRleCwgZW5kSW5kZXgsIGRpciwgcG9zLCBzaWRlKSB7CiAgICAgICAgICBsZXQgeyBidWZmZXIgfSA9IHRoaXMsIHBpY2sgPSAtMTsKICAgICAgICAgIGZvciAobGV0IGkgPSBzdGFydEluZGV4OyBpICE9IGVuZEluZGV4OyBpID0gYnVmZmVyW2kgKyAzXSkgewogICAgICAgICAgICAgIGlmIChjaGVja1NpZGUoc2lkZSwgcG9zLCBidWZmZXJbaSArIDFdLCBidWZmZXJbaSArIDJdKSkgewogICAgICAgICAgICAgICAgICBwaWNrID0gaTsKICAgICAgICAgICAgICAgICAgaWYgKGRpciA+IDApCiAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gcGljazsKICAgICAgfQogICAgICAvLy8gQGludGVybmFsCiAgICAgIHNsaWNlKHN0YXJ0SSwgZW5kSSwgZnJvbSwgdG8pIHsKICAgICAgICAgIGxldCBiID0gdGhpcy5idWZmZXI7CiAgICAgICAgICBsZXQgY29weSA9IG5ldyBVaW50MTZBcnJheShlbmRJIC0gc3RhcnRJKTsKICAgICAgICAgIGZvciAobGV0IGkgPSBzdGFydEksIGogPSAwOyBpIDwgZW5kSTspIHsKICAgICAgICAgICAgICBjb3B5W2orK10gPSBiW2krK107CiAgICAgICAgICAgICAgY29weVtqKytdID0gYltpKytdIC0gZnJvbTsKICAgICAgICAgICAgICBjb3B5W2orK10gPSBiW2krK10gLSBmcm9tOwogICAgICAgICAgICAgIGNvcHlbaisrXSA9IGJbaSsrXSAtIHN0YXJ0STsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBuZXcgVHJlZUJ1ZmZlcihjb3B5LCB0byAtIGZyb20sIHRoaXMuc2V0KTsKICAgICAgfQogIH0KICBmdW5jdGlvbiBjaGVja1NpZGUoc2lkZSwgcG9zLCBmcm9tLCB0bykgewogICAgICBzd2l0Y2ggKHNpZGUpIHsKICAgICAgICAgIGNhc2UgLTIgLyogQmVmb3JlICovOiByZXR1cm4gZnJvbSA8IHBvczsKICAgICAgICAgIGNhc2UgLTEgLyogQXRPckJlZm9yZSAqLzogcmV0dXJuIHRvID49IHBvcyAmJiBmcm9tIDwgcG9zOwogICAgICAgICAgY2FzZSAwIC8qIEFyb3VuZCAqLzogcmV0dXJuIGZyb20gPCBwb3MgJiYgdG8gPiBwb3M7CiAgICAgICAgICBjYXNlIDEgLyogQXRPckFmdGVyICovOiByZXR1cm4gZnJvbSA8PSBwb3MgJiYgdG8gPiBwb3M7CiAgICAgICAgICBjYXNlIDIgLyogQWZ0ZXIgKi86IHJldHVybiB0byA+IHBvczsKICAgICAgICAgIGNhc2UgNCAvKiBEb250Q2FyZSAqLzogcmV0dXJuIHRydWU7CiAgICAgIH0KICB9CiAgZnVuY3Rpb24gZW50ZXJVbmZpbmlzaGVkTm9kZXNCZWZvcmUobm9kZSwgcG9zKSB7CiAgICAgIGxldCBzY2FuID0gbm9kZS5jaGlsZEJlZm9yZShwb3MpOwogICAgICB3aGlsZSAoc2NhbikgewogICAgICAgICAgbGV0IGxhc3QgPSBzY2FuLmxhc3RDaGlsZDsKICAgICAgICAgIGlmICghbGFzdCB8fCBsYXN0LnRvICE9IHNjYW4udG8pCiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBpZiAobGFzdC50eXBlLmlzRXJyb3IgJiYgbGFzdC5mcm9tID09IGxhc3QudG8pIHsKICAgICAgICAgICAgICBub2RlID0gc2NhbjsKICAgICAgICAgICAgICBzY2FuID0gbGFzdC5wcmV2U2libGluZzsKICAgICAgICAgIH0KICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgIHNjYW4gPSBsYXN0OwogICAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBub2RlOwogIH0KICBmdW5jdGlvbiByZXNvbHZlTm9kZShub2RlLCBwb3MsIHNpZGUsIG92ZXJsYXlzKSB7CiAgICAgIHZhciBfYTsKICAgICAgLy8gTW92ZSB1cCB0byBhIG5vZGUgdGhhdCBhY3R1YWxseSBob2xkcyB0aGUgcG9zaXRpb24sIGlmIHBvc3NpYmxlCiAgICAgIHdoaWxlIChub2RlLmZyb20gPT0gbm9kZS50byB8fAogICAgICAgICAgKHNpZGUgPCAxID8gbm9kZS5mcm9tID49IHBvcyA6IG5vZGUuZnJvbSA+IHBvcykgfHwKICAgICAgICAgIChzaWRlID4gLTEgPyBub2RlLnRvIDw9IHBvcyA6IG5vZGUudG8gPCBwb3MpKSB7CiAgICAgICAgICBsZXQgcGFyZW50ID0gIW92ZXJsYXlzICYmIG5vZGUgaW5zdGFuY2VvZiBUcmVlTm9kZSAmJiBub2RlLmluZGV4IDwgMCA/IG51bGwgOiBub2RlLnBhcmVudDsKICAgICAgICAgIGlmICghcGFyZW50KQogICAgICAgICAgICAgIHJldHVybiBub2RlOwogICAgICAgICAgbm9kZSA9IHBhcmVudDsKICAgICAgfQogICAgICBsZXQgbW9kZSA9IG92ZXJsYXlzID8gMCA6IEl0ZXJNb2RlLklnbm9yZU92ZXJsYXlzOwogICAgICAvLyBNdXN0IGdvIHVwIG91dCBvZiBvdmVybGF5cyB3aGVuIHRob3NlIGRvIG5vdCBvdmVybGFwIHdpdGggcG9zCiAgICAgIGlmIChvdmVybGF5cykKICAgICAgICAgIGZvciAobGV0IHNjYW4gPSBub2RlLCBwYXJlbnQgPSBzY2FuLnBhcmVudDsgcGFyZW50OyBzY2FuID0gcGFyZW50LCBwYXJlbnQgPSBzY2FuLnBhcmVudCkgewogICAgICAgICAgICAgIGlmIChzY2FuIGluc3RhbmNlb2YgVHJlZU5vZGUgJiYgc2Nhbi5pbmRleCA8IDAgJiYgKChfYSA9IHBhcmVudC5lbnRlcihwb3MsIHNpZGUsIG1vZGUpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZnJvbSkgIT0gc2Nhbi5mcm9tKQogICAgICAgICAgICAgICAgICBub2RlID0gcGFyZW50OwogICAgICAgICAgfQogICAgICBmb3IgKDs7KSB7CiAgICAgICAgICBsZXQgaW5uZXIgPSBub2RlLmVudGVyKHBvcywgc2lkZSwgbW9kZSk7CiAgICAgICAgICBpZiAoIWlubmVyKQogICAgICAgICAgICAgIHJldHVybiBub2RlOwogICAgICAgICAgbm9kZSA9IGlubmVyOwogICAgICB9CiAgfQogIGNsYXNzIFRyZWVOb2RlIHsKICAgICAgY29uc3RydWN0b3IoX3RyZWUsIGZyb20sIAogICAgICAvLyBJbmRleCBpbiBwYXJlbnQgbm9kZSwgc2V0IHRvIC0xIGlmIHRoZSBub2RlIGlzIG5vdCBhIGRpcmVjdCBjaGlsZCBvZiBfcGFyZW50Lm5vZGUgKG92ZXJsYXkpCiAgICAgIGluZGV4LCBfcGFyZW50KSB7CiAgICAgICAgICB0aGlzLl90cmVlID0gX3RyZWU7CiAgICAgICAgICB0aGlzLmZyb20gPSBmcm9tOwogICAgICAgICAgdGhpcy5pbmRleCA9IGluZGV4OwogICAgICAgICAgdGhpcy5fcGFyZW50ID0gX3BhcmVudDsKICAgICAgfQogICAgICBnZXQgdHlwZSgpIHsgcmV0dXJuIHRoaXMuX3RyZWUudHlwZTsgfQogICAgICBnZXQgbmFtZSgpIHsgcmV0dXJuIHRoaXMuX3RyZWUudHlwZS5uYW1lOyB9CiAgICAgIGdldCB0bygpIHsgcmV0dXJuIHRoaXMuZnJvbSArIHRoaXMuX3RyZWUubGVuZ3RoOyB9CiAgICAgIG5leHRDaGlsZChpLCBkaXIsIHBvcywgc2lkZSwgbW9kZSA9IDApIHsKICAgICAgICAgIGZvciAobGV0IHBhcmVudCA9IHRoaXM7OykgewogICAgICAgICAgICAgIGZvciAobGV0IHsgY2hpbGRyZW4sIHBvc2l0aW9ucyB9ID0gcGFyZW50Ll90cmVlLCBlID0gZGlyID4gMCA/IGNoaWxkcmVuLmxlbmd0aCA6IC0xOyBpICE9IGU7IGkgKz0gZGlyKSB7CiAgICAgICAgICAgICAgICAgIGxldCBuZXh0ID0gY2hpbGRyZW5baV0sIHN0YXJ0ID0gcG9zaXRpb25zW2ldICsgcGFyZW50LmZyb207CiAgICAgICAgICAgICAgICAgIGlmICghY2hlY2tTaWRlKHNpZGUsIHBvcywgc3RhcnQsIHN0YXJ0ICsgbmV4dC5sZW5ndGgpKQogICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgIGlmIChuZXh0IGluc3RhbmNlb2YgVHJlZUJ1ZmZlcikgewogICAgICAgICAgICAgICAgICAgICAgaWYgKG1vZGUgJiBJdGVyTW9kZS5FeGNsdWRlQnVmZmVycykKICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICAgIGxldCBpbmRleCA9IG5leHQuZmluZENoaWxkKDAsIG5leHQuYnVmZmVyLmxlbmd0aCwgZGlyLCBwb3MgLSBzdGFydCwgc2lkZSk7CiAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXggPiAtMSkKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEJ1ZmZlck5vZGUobmV3IEJ1ZmZlckNvbnRleHQocGFyZW50LCBuZXh0LCBpLCBzdGFydCksIG51bGwsIGluZGV4KTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBlbHNlIGlmICgobW9kZSAmIEl0ZXJNb2RlLkluY2x1ZGVBbm9ueW1vdXMpIHx8ICghbmV4dC50eXBlLmlzQW5vbnltb3VzIHx8IGhhc0NoaWxkKG5leHQpKSkgewogICAgICAgICAgICAgICAgICAgICAgbGV0IG1vdW50ZWQ7CiAgICAgICAgICAgICAgICAgICAgICBpZiAoIShtb2RlICYgSXRlck1vZGUuSWdub3JlTW91bnRzKSAmJgogICAgICAgICAgICAgICAgICAgICAgICAgIG5leHQucHJvcHMgJiYgKG1vdW50ZWQgPSBuZXh0LnByb3AoTm9kZVByb3AubW91bnRlZCkpICYmICFtb3VudGVkLm92ZXJsYXkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBUcmVlTm9kZShtb3VudGVkLnRyZWUsIHN0YXJ0LCBpLCBwYXJlbnQpOwogICAgICAgICAgICAgICAgICAgICAgbGV0IGlubmVyID0gbmV3IFRyZWVOb2RlKG5leHQsIHN0YXJ0LCBpLCBwYXJlbnQpOwogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChtb2RlICYgSXRlck1vZGUuSW5jbHVkZUFub255bW91cykgfHwgIWlubmVyLnR5cGUuaXNBbm9ueW1vdXMgPyBpbm5lcgogICAgICAgICAgICAgICAgICAgICAgICAgIDogaW5uZXIubmV4dENoaWxkKGRpciA8IDAgPyBuZXh0LmNoaWxkcmVuLmxlbmd0aCAtIDEgOiAwLCBkaXIsIHBvcywgc2lkZSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKChtb2RlICYgSXRlck1vZGUuSW5jbHVkZUFub255bW91cykgfHwgIXBhcmVudC50eXBlLmlzQW5vbnltb3VzKQogICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgICBpZiAocGFyZW50LmluZGV4ID49IDApCiAgICAgICAgICAgICAgICAgIGkgPSBwYXJlbnQuaW5kZXggKyBkaXI7CiAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICBpID0gZGlyIDwgMCA/IC0xIDogcGFyZW50Ll9wYXJlbnQuX3RyZWUuY2hpbGRyZW4ubGVuZ3RoOwogICAgICAgICAgICAgIHBhcmVudCA9IHBhcmVudC5fcGFyZW50OwogICAgICAgICAgICAgIGlmICghcGFyZW50KQogICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgIH0KICAgICAgfQogICAgICBnZXQgZmlyc3RDaGlsZCgpIHsgcmV0dXJuIHRoaXMubmV4dENoaWxkKDAsIDEsIDAsIDQgLyogRG9udENhcmUgKi8pOyB9CiAgICAgIGdldCBsYXN0Q2hpbGQoKSB7IHJldHVybiB0aGlzLm5leHRDaGlsZCh0aGlzLl90cmVlLmNoaWxkcmVuLmxlbmd0aCAtIDEsIC0xLCAwLCA0IC8qIERvbnRDYXJlICovKTsgfQogICAgICBjaGlsZEFmdGVyKHBvcykgeyByZXR1cm4gdGhpcy5uZXh0Q2hpbGQoMCwgMSwgcG9zLCAyIC8qIEFmdGVyICovKTsgfQogICAgICBjaGlsZEJlZm9yZShwb3MpIHsgcmV0dXJuIHRoaXMubmV4dENoaWxkKHRoaXMuX3RyZWUuY2hpbGRyZW4ubGVuZ3RoIC0gMSwgLTEsIHBvcywgLTIgLyogQmVmb3JlICovKTsgfQogICAgICBlbnRlcihwb3MsIHNpZGUsIG1vZGUgPSAwKSB7CiAgICAgICAgICBsZXQgbW91bnRlZDsKICAgICAgICAgIGlmICghKG1vZGUgJiBJdGVyTW9kZS5JZ25vcmVPdmVybGF5cykgJiYgKG1vdW50ZWQgPSB0aGlzLl90cmVlLnByb3AoTm9kZVByb3AubW91bnRlZCkpICYmIG1vdW50ZWQub3ZlcmxheSkgewogICAgICAgICAgICAgIGxldCByUG9zID0gcG9zIC0gdGhpcy5mcm9tOwogICAgICAgICAgICAgIGZvciAobGV0IHsgZnJvbSwgdG8gfSBvZiBtb3VudGVkLm92ZXJsYXkpIHsKICAgICAgICAgICAgICAgICAgaWYgKChzaWRlID4gMCA/IGZyb20gPD0gclBvcyA6IGZyb20gPCByUG9zKSAmJgogICAgICAgICAgICAgICAgICAgICAgKHNpZGUgPCAwID8gdG8gPj0gclBvcyA6IHRvID4gclBvcykpCiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFRyZWVOb2RlKG1vdW50ZWQudHJlZSwgbW91bnRlZC5vdmVybGF5WzBdLmZyb20gKyB0aGlzLmZyb20sIC0xLCB0aGlzKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gdGhpcy5uZXh0Q2hpbGQoMCwgMSwgcG9zLCBzaWRlLCBtb2RlKTsKICAgICAgfQogICAgICBuZXh0U2lnbmlmaWNhbnRQYXJlbnQoKSB7CiAgICAgICAgICBsZXQgdmFsID0gdGhpczsKICAgICAgICAgIHdoaWxlICh2YWwudHlwZS5pc0Fub255bW91cyAmJiB2YWwuX3BhcmVudCkKICAgICAgICAgICAgICB2YWwgPSB2YWwuX3BhcmVudDsKICAgICAgICAgIHJldHVybiB2YWw7CiAgICAgIH0KICAgICAgZ2V0IHBhcmVudCgpIHsKICAgICAgICAgIHJldHVybiB0aGlzLl9wYXJlbnQgPyB0aGlzLl9wYXJlbnQubmV4dFNpZ25pZmljYW50UGFyZW50KCkgOiBudWxsOwogICAgICB9CiAgICAgIGdldCBuZXh0U2libGluZygpIHsKICAgICAgICAgIHJldHVybiB0aGlzLl9wYXJlbnQgJiYgdGhpcy5pbmRleCA+PSAwID8gdGhpcy5fcGFyZW50Lm5leHRDaGlsZCh0aGlzLmluZGV4ICsgMSwgMSwgMCwgNCAvKiBEb250Q2FyZSAqLykgOiBudWxsOwogICAgICB9CiAgICAgIGdldCBwcmV2U2libGluZygpIHsKICAgICAgICAgIHJldHVybiB0aGlzLl9wYXJlbnQgJiYgdGhpcy5pbmRleCA+PSAwID8gdGhpcy5fcGFyZW50Lm5leHRDaGlsZCh0aGlzLmluZGV4IC0gMSwgLTEsIDAsIDQgLyogRG9udENhcmUgKi8pIDogbnVsbDsKICAgICAgfQogICAgICBjdXJzb3IobW9kZSA9IDApIHsgcmV0dXJuIG5ldyBUcmVlQ3Vyc29yKHRoaXMsIG1vZGUpOyB9CiAgICAgIGdldCB0cmVlKCkgeyByZXR1cm4gdGhpcy5fdHJlZTsgfQogICAgICB0b1RyZWUoKSB7IHJldHVybiB0aGlzLl90cmVlOyB9CiAgICAgIHJlc29sdmUocG9zLCBzaWRlID0gMCkgewogICAgICAgICAgcmV0dXJuIHJlc29sdmVOb2RlKHRoaXMsIHBvcywgc2lkZSwgZmFsc2UpOwogICAgICB9CiAgICAgIHJlc29sdmVJbm5lcihwb3MsIHNpZGUgPSAwKSB7CiAgICAgICAgICByZXR1cm4gcmVzb2x2ZU5vZGUodGhpcywgcG9zLCBzaWRlLCB0cnVlKTsKICAgICAgfQogICAgICBlbnRlclVuZmluaXNoZWROb2Rlc0JlZm9yZShwb3MpIHsgcmV0dXJuIGVudGVyVW5maW5pc2hlZE5vZGVzQmVmb3JlKHRoaXMsIHBvcyk7IH0KICAgICAgZ2V0Q2hpbGQodHlwZSwgYmVmb3JlID0gbnVsbCwgYWZ0ZXIgPSBudWxsKSB7CiAgICAgICAgICBsZXQgciA9IGdldENoaWxkcmVuKHRoaXMsIHR5cGUsIGJlZm9yZSwgYWZ0ZXIpOwogICAgICAgICAgcmV0dXJuIHIubGVuZ3RoID8gclswXSA6IG51bGw7CiAgICAgIH0KICAgICAgZ2V0Q2hpbGRyZW4odHlwZSwgYmVmb3JlID0gbnVsbCwgYWZ0ZXIgPSBudWxsKSB7CiAgICAgICAgICByZXR1cm4gZ2V0Q2hpbGRyZW4odGhpcywgdHlwZSwgYmVmb3JlLCBhZnRlcik7CiAgICAgIH0KICAgICAgLy8vIEBpbnRlcm5hbAogICAgICB0b1N0cmluZygpIHsgcmV0dXJuIHRoaXMuX3RyZWUudG9TdHJpbmcoKTsgfQogICAgICBnZXQgbm9kZSgpIHsgcmV0dXJuIHRoaXM7IH0KICAgICAgbWF0Y2hDb250ZXh0KGNvbnRleHQpIHsgcmV0dXJuIG1hdGNoTm9kZUNvbnRleHQodGhpcywgY29udGV4dCk7IH0KICB9CiAgZnVuY3Rpb24gZ2V0Q2hpbGRyZW4obm9kZSwgdHlwZSwgYmVmb3JlLCBhZnRlcikgewogICAgICBsZXQgY3VyID0gbm9kZS5jdXJzb3IoKSwgcmVzdWx0ID0gW107CiAgICAgIGlmICghY3VyLmZpcnN0Q2hpbGQoKSkKICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgIGlmIChiZWZvcmUgIT0gbnVsbCkKICAgICAgICAgIHdoaWxlICghY3VyLnR5cGUuaXMoYmVmb3JlKSkKICAgICAgICAgICAgICBpZiAoIWN1ci5uZXh0U2libGluZygpKQogICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICBmb3IgKDs7KSB7CiAgICAgICAgICBpZiAoYWZ0ZXIgIT0gbnVsbCAmJiBjdXIudHlwZS5pcyhhZnRlcikpCiAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgICAgIGlmIChjdXIudHlwZS5pcyh0eXBlKSkKICAgICAgICAgICAgICByZXN1bHQucHVzaChjdXIubm9kZSk7CiAgICAgICAgICBpZiAoIWN1ci5uZXh0U2libGluZygpKQogICAgICAgICAgICAgIHJldHVybiBhZnRlciA9PSBudWxsID8gcmVzdWx0IDogW107CiAgICAgIH0KICB9CiAgZnVuY3Rpb24gbWF0Y2hOb2RlQ29udGV4dChub2RlLCBjb250ZXh0LCBpID0gY29udGV4dC5sZW5ndGggLSAxKSB7CiAgICAgIGZvciAobGV0IHAgPSBub2RlLnBhcmVudDsgaSA+PSAwOyBwID0gcC5wYXJlbnQpIHsKICAgICAgICAgIGlmICghcCkKICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICBpZiAoIXAudHlwZS5pc0Fub255bW91cykgewogICAgICAgICAgICAgIGlmIChjb250ZXh0W2ldICYmIGNvbnRleHRbaV0gIT0gcC5uYW1lKQogICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgaS0tOwogICAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiB0cnVlOwogIH0KICBjbGFzcyBCdWZmZXJDb250ZXh0IHsKICAgICAgY29uc3RydWN0b3IocGFyZW50LCBidWZmZXIsIGluZGV4LCBzdGFydCkgewogICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7CiAgICAgICAgICB0aGlzLmJ1ZmZlciA9IGJ1ZmZlcjsKICAgICAgICAgIHRoaXMuaW5kZXggPSBpbmRleDsKICAgICAgICAgIHRoaXMuc3RhcnQgPSBzdGFydDsKICAgICAgfQogIH0KICBjbGFzcyBCdWZmZXJOb2RlIHsKICAgICAgY29uc3RydWN0b3IoY29udGV4dCwgX3BhcmVudCwgaW5kZXgpIHsKICAgICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7CiAgICAgICAgICB0aGlzLl9wYXJlbnQgPSBfcGFyZW50OwogICAgICAgICAgdGhpcy5pbmRleCA9IGluZGV4OwogICAgICAgICAgdGhpcy50eXBlID0gY29udGV4dC5idWZmZXIuc2V0LnR5cGVzW2NvbnRleHQuYnVmZmVyLmJ1ZmZlcltpbmRleF1dOwogICAgICB9CiAgICAgIGdldCBuYW1lKCkgeyByZXR1cm4gdGhpcy50eXBlLm5hbWU7IH0KICAgICAgZ2V0IGZyb20oKSB7IHJldHVybiB0aGlzLmNvbnRleHQuc3RhcnQgKyB0aGlzLmNvbnRleHQuYnVmZmVyLmJ1ZmZlclt0aGlzLmluZGV4ICsgMV07IH0KICAgICAgZ2V0IHRvKCkgeyByZXR1cm4gdGhpcy5jb250ZXh0LnN0YXJ0ICsgdGhpcy5jb250ZXh0LmJ1ZmZlci5idWZmZXJbdGhpcy5pbmRleCArIDJdOyB9CiAgICAgIGNoaWxkKGRpciwgcG9zLCBzaWRlKSB7CiAgICAgICAgICBsZXQgeyBidWZmZXIgfSA9IHRoaXMuY29udGV4dDsKICAgICAgICAgIGxldCBpbmRleCA9IGJ1ZmZlci5maW5kQ2hpbGQodGhpcy5pbmRleCArIDQsIGJ1ZmZlci5idWZmZXJbdGhpcy5pbmRleCArIDNdLCBkaXIsIHBvcyAtIHRoaXMuY29udGV4dC5zdGFydCwgc2lkZSk7CiAgICAgICAgICByZXR1cm4gaW5kZXggPCAwID8gbnVsbCA6IG5ldyBCdWZmZXJOb2RlKHRoaXMuY29udGV4dCwgdGhpcywgaW5kZXgpOwogICAgICB9CiAgICAgIGdldCBmaXJzdENoaWxkKCkgeyByZXR1cm4gdGhpcy5jaGlsZCgxLCAwLCA0IC8qIERvbnRDYXJlICovKTsgfQogICAgICBnZXQgbGFzdENoaWxkKCkgeyByZXR1cm4gdGhpcy5jaGlsZCgtMSwgMCwgNCAvKiBEb250Q2FyZSAqLyk7IH0KICAgICAgY2hpbGRBZnRlcihwb3MpIHsgcmV0dXJuIHRoaXMuY2hpbGQoMSwgcG9zLCAyIC8qIEFmdGVyICovKTsgfQogICAgICBjaGlsZEJlZm9yZShwb3MpIHsgcmV0dXJuIHRoaXMuY2hpbGQoLTEsIHBvcywgLTIgLyogQmVmb3JlICovKTsgfQogICAgICBlbnRlcihwb3MsIHNpZGUsIG1vZGUgPSAwKSB7CiAgICAgICAgICBpZiAobW9kZSAmIEl0ZXJNb2RlLkV4Y2x1ZGVCdWZmZXJzKQogICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgbGV0IHsgYnVmZmVyIH0gPSB0aGlzLmNvbnRleHQ7CiAgICAgICAgICBsZXQgaW5kZXggPSBidWZmZXIuZmluZENoaWxkKHRoaXMuaW5kZXggKyA0LCBidWZmZXIuYnVmZmVyW3RoaXMuaW5kZXggKyAzXSwgc2lkZSA+IDAgPyAxIDogLTEsIHBvcyAtIHRoaXMuY29udGV4dC5zdGFydCwgc2lkZSk7CiAgICAgICAgICByZXR1cm4gaW5kZXggPCAwID8gbnVsbCA6IG5ldyBCdWZmZXJOb2RlKHRoaXMuY29udGV4dCwgdGhpcywgaW5kZXgpOwogICAgICB9CiAgICAgIGdldCBwYXJlbnQoKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5fcGFyZW50IHx8IHRoaXMuY29udGV4dC5wYXJlbnQubmV4dFNpZ25pZmljYW50UGFyZW50KCk7CiAgICAgIH0KICAgICAgZXh0ZXJuYWxTaWJsaW5nKGRpcikgewogICAgICAgICAgcmV0dXJuIHRoaXMuX3BhcmVudCA/IG51bGwgOiB0aGlzLmNvbnRleHQucGFyZW50Lm5leHRDaGlsZCh0aGlzLmNvbnRleHQuaW5kZXggKyBkaXIsIGRpciwgMCwgNCAvKiBEb250Q2FyZSAqLyk7CiAgICAgIH0KICAgICAgZ2V0IG5leHRTaWJsaW5nKCkgewogICAgICAgICAgbGV0IHsgYnVmZmVyIH0gPSB0aGlzLmNvbnRleHQ7CiAgICAgICAgICBsZXQgYWZ0ZXIgPSBidWZmZXIuYnVmZmVyW3RoaXMuaW5kZXggKyAzXTsKICAgICAgICAgIGlmIChhZnRlciA8ICh0aGlzLl9wYXJlbnQgPyBidWZmZXIuYnVmZmVyW3RoaXMuX3BhcmVudC5pbmRleCArIDNdIDogYnVmZmVyLmJ1ZmZlci5sZW5ndGgpKQogICAgICAgICAgICAgIHJldHVybiBuZXcgQnVmZmVyTm9kZSh0aGlzLmNvbnRleHQsIHRoaXMuX3BhcmVudCwgYWZ0ZXIpOwogICAgICAgICAgcmV0dXJuIHRoaXMuZXh0ZXJuYWxTaWJsaW5nKDEpOwogICAgICB9CiAgICAgIGdldCBwcmV2U2libGluZygpIHsKICAgICAgICAgIGxldCB7IGJ1ZmZlciB9ID0gdGhpcy5jb250ZXh0OwogICAgICAgICAgbGV0IHBhcmVudFN0YXJ0ID0gdGhpcy5fcGFyZW50ID8gdGhpcy5fcGFyZW50LmluZGV4ICsgNCA6IDA7CiAgICAgICAgICBpZiAodGhpcy5pbmRleCA9PSBwYXJlbnRTdGFydCkKICAgICAgICAgICAgICByZXR1cm4gdGhpcy5leHRlcm5hbFNpYmxpbmcoLTEpOwogICAgICAgICAgcmV0dXJuIG5ldyBCdWZmZXJOb2RlKHRoaXMuY29udGV4dCwgdGhpcy5fcGFyZW50LCBidWZmZXIuZmluZENoaWxkKHBhcmVudFN0YXJ0LCB0aGlzLmluZGV4LCAtMSwgMCwgNCAvKiBEb250Q2FyZSAqLykpOwogICAgICB9CiAgICAgIGN1cnNvcihtb2RlID0gMCkgeyByZXR1cm4gbmV3IFRyZWVDdXJzb3IodGhpcywgbW9kZSk7IH0KICAgICAgZ2V0IHRyZWUoKSB7IHJldHVybiBudWxsOyB9CiAgICAgIHRvVHJlZSgpIHsKICAgICAgICAgIGxldCBjaGlsZHJlbiA9IFtdLCBwb3NpdGlvbnMgPSBbXTsKICAgICAgICAgIGxldCB7IGJ1ZmZlciB9ID0gdGhpcy5jb250ZXh0OwogICAgICAgICAgbGV0IHN0YXJ0SSA9IHRoaXMuaW5kZXggKyA0LCBlbmRJID0gYnVmZmVyLmJ1ZmZlclt0aGlzLmluZGV4ICsgM107CiAgICAgICAgICBpZiAoZW5kSSA+IHN0YXJ0SSkgewogICAgICAgICAgICAgIGxldCBmcm9tID0gYnVmZmVyLmJ1ZmZlclt0aGlzLmluZGV4ICsgMV0sIHRvID0gYnVmZmVyLmJ1ZmZlclt0aGlzLmluZGV4ICsgMl07CiAgICAgICAgICAgICAgY2hpbGRyZW4ucHVzaChidWZmZXIuc2xpY2Uoc3RhcnRJLCBlbmRJLCBmcm9tLCB0bykpOwogICAgICAgICAgICAgIHBvc2l0aW9ucy5wdXNoKDApOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIG5ldyBUcmVlKHRoaXMudHlwZSwgY2hpbGRyZW4sIHBvc2l0aW9ucywgdGhpcy50byAtIHRoaXMuZnJvbSk7CiAgICAgIH0KICAgICAgcmVzb2x2ZShwb3MsIHNpZGUgPSAwKSB7CiAgICAgICAgICByZXR1cm4gcmVzb2x2ZU5vZGUodGhpcywgcG9zLCBzaWRlLCBmYWxzZSk7CiAgICAgIH0KICAgICAgcmVzb2x2ZUlubmVyKHBvcywgc2lkZSA9IDApIHsKICAgICAgICAgIHJldHVybiByZXNvbHZlTm9kZSh0aGlzLCBwb3MsIHNpZGUsIHRydWUpOwogICAgICB9CiAgICAgIGVudGVyVW5maW5pc2hlZE5vZGVzQmVmb3JlKHBvcykgeyByZXR1cm4gZW50ZXJVbmZpbmlzaGVkTm9kZXNCZWZvcmUodGhpcywgcG9zKTsgfQogICAgICAvLy8gQGludGVybmFsCiAgICAgIHRvU3RyaW5nKCkgeyByZXR1cm4gdGhpcy5jb250ZXh0LmJ1ZmZlci5jaGlsZFN0cmluZyh0aGlzLmluZGV4KTsgfQogICAgICBnZXRDaGlsZCh0eXBlLCBiZWZvcmUgPSBudWxsLCBhZnRlciA9IG51bGwpIHsKICAgICAgICAgIGxldCByID0gZ2V0Q2hpbGRyZW4odGhpcywgdHlwZSwgYmVmb3JlLCBhZnRlcik7CiAgICAgICAgICByZXR1cm4gci5sZW5ndGggPyByWzBdIDogbnVsbDsKICAgICAgfQogICAgICBnZXRDaGlsZHJlbih0eXBlLCBiZWZvcmUgPSBudWxsLCBhZnRlciA9IG51bGwpIHsKICAgICAgICAgIHJldHVybiBnZXRDaGlsZHJlbih0aGlzLCB0eXBlLCBiZWZvcmUsIGFmdGVyKTsKICAgICAgfQogICAgICBnZXQgbm9kZSgpIHsgcmV0dXJuIHRoaXM7IH0KICAgICAgbWF0Y2hDb250ZXh0KGNvbnRleHQpIHsgcmV0dXJuIG1hdGNoTm9kZUNvbnRleHQodGhpcywgY29udGV4dCk7IH0KICB9CiAgLy8vIEEgdHJlZSBjdXJzb3Igb2JqZWN0IGZvY3VzZXMgb24gYSBnaXZlbiBub2RlIGluIGEgc3ludGF4IHRyZWUsIGFuZAogIC8vLyBhbGxvd3MgeW91IHRvIG1vdmUgdG8gYWRqYWNlbnQgbm9kZXMuCiAgY2xhc3MgVHJlZUN1cnNvciB7CiAgICAgIC8vLyBAaW50ZXJuYWwKICAgICAgY29uc3RydWN0b3Iobm9kZSwgCiAgICAgIC8vLyBAaW50ZXJuYWwKICAgICAgbW9kZSA9IDApIHsKICAgICAgICAgIHRoaXMubW9kZSA9IG1vZGU7CiAgICAgICAgICAvLy8gQGludGVybmFsCiAgICAgICAgICB0aGlzLmJ1ZmZlciA9IG51bGw7CiAgICAgICAgICB0aGlzLnN0YWNrID0gW107CiAgICAgICAgICAvLy8gQGludGVybmFsCiAgICAgICAgICB0aGlzLmluZGV4ID0gMDsKICAgICAgICAgIHRoaXMuYnVmZmVyTm9kZSA9IG51bGw7CiAgICAgICAgICBpZiAobm9kZSBpbnN0YW5jZW9mIFRyZWVOb2RlKSB7CiAgICAgICAgICAgICAgdGhpcy55aWVsZE5vZGUobm9kZSk7CiAgICAgICAgICB9CiAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICB0aGlzLl90cmVlID0gbm9kZS5jb250ZXh0LnBhcmVudDsKICAgICAgICAgICAgICB0aGlzLmJ1ZmZlciA9IG5vZGUuY29udGV4dDsKICAgICAgICAgICAgICBmb3IgKGxldCBuID0gbm9kZS5fcGFyZW50OyBuOyBuID0gbi5fcGFyZW50KQogICAgICAgICAgICAgICAgICB0aGlzLnN0YWNrLnVuc2hpZnQobi5pbmRleCk7CiAgICAgICAgICAgICAgdGhpcy5idWZmZXJOb2RlID0gbm9kZTsKICAgICAgICAgICAgICB0aGlzLnlpZWxkQnVmKG5vZGUuaW5kZXgpOwogICAgICAgICAgfQogICAgICB9CiAgICAgIC8vLyBTaG9ydGhhbmQgZm9yIGAudHlwZS5uYW1lYC4KICAgICAgZ2V0IG5hbWUoKSB7IHJldHVybiB0aGlzLnR5cGUubmFtZTsgfQogICAgICB5aWVsZE5vZGUobm9kZSkgewogICAgICAgICAgaWYgKCFub2RlKQogICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIHRoaXMuX3RyZWUgPSBub2RlOwogICAgICAgICAgdGhpcy50eXBlID0gbm9kZS50eXBlOwogICAgICAgICAgdGhpcy5mcm9tID0gbm9kZS5mcm9tOwogICAgICAgICAgdGhpcy50byA9IG5vZGUudG87CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgICB5aWVsZEJ1ZihpbmRleCwgdHlwZSkgewogICAgICAgICAgdGhpcy5pbmRleCA9IGluZGV4OwogICAgICAgICAgbGV0IHsgc3RhcnQsIGJ1ZmZlciB9ID0gdGhpcy5idWZmZXI7CiAgICAgICAgICB0aGlzLnR5cGUgPSB0eXBlIHx8IGJ1ZmZlci5zZXQudHlwZXNbYnVmZmVyLmJ1ZmZlcltpbmRleF1dOwogICAgICAgICAgdGhpcy5mcm9tID0gc3RhcnQgKyBidWZmZXIuYnVmZmVyW2luZGV4ICsgMV07CiAgICAgICAgICB0aGlzLnRvID0gc3RhcnQgKyBidWZmZXIuYnVmZmVyW2luZGV4ICsgMl07CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgICB5aWVsZChub2RlKSB7CiAgICAgICAgICBpZiAoIW5vZGUpCiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgaWYgKG5vZGUgaW5zdGFuY2VvZiBUcmVlTm9kZSkgewogICAgICAgICAgICAgIHRoaXMuYnVmZmVyID0gbnVsbDsKICAgICAgICAgICAgICByZXR1cm4gdGhpcy55aWVsZE5vZGUobm9kZSk7CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLmJ1ZmZlciA9IG5vZGUuY29udGV4dDsKICAgICAgICAgIHJldHVybiB0aGlzLnlpZWxkQnVmKG5vZGUuaW5kZXgsIG5vZGUudHlwZSk7CiAgICAgIH0KICAgICAgLy8vIEBpbnRlcm5hbAogICAgICB0b1N0cmluZygpIHsKICAgICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlciA/IHRoaXMuYnVmZmVyLmJ1ZmZlci5jaGlsZFN0cmluZyh0aGlzLmluZGV4KSA6IHRoaXMuX3RyZWUudG9TdHJpbmcoKTsKICAgICAgfQogICAgICAvLy8gQGludGVybmFsCiAgICAgIGVudGVyQ2hpbGQoZGlyLCBwb3MsIHNpZGUpIHsKICAgICAgICAgIGlmICghdGhpcy5idWZmZXIpCiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMueWllbGQodGhpcy5fdHJlZS5uZXh0Q2hpbGQoZGlyIDwgMCA/IHRoaXMuX3RyZWUuX3RyZWUuY2hpbGRyZW4ubGVuZ3RoIC0gMSA6IDAsIGRpciwgcG9zLCBzaWRlLCB0aGlzLm1vZGUpKTsKICAgICAgICAgIGxldCB7IGJ1ZmZlciB9ID0gdGhpcy5idWZmZXI7CiAgICAgICAgICBsZXQgaW5kZXggPSBidWZmZXIuZmluZENoaWxkKHRoaXMuaW5kZXggKyA0LCBidWZmZXIuYnVmZmVyW3RoaXMuaW5kZXggKyAzXSwgZGlyLCBwb3MgLSB0aGlzLmJ1ZmZlci5zdGFydCwgc2lkZSk7CiAgICAgICAgICBpZiAoaW5kZXggPCAwKQogICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIHRoaXMuc3RhY2sucHVzaCh0aGlzLmluZGV4KTsKICAgICAgICAgIHJldHVybiB0aGlzLnlpZWxkQnVmKGluZGV4KTsKICAgICAgfQogICAgICAvLy8gTW92ZSB0aGUgY3Vyc29yIHRvIHRoaXMgbm9kZSdzIGZpcnN0IGNoaWxkLiBXaGVuIHRoaXMgcmV0dXJucwogICAgICAvLy8gZmFsc2UsIHRoZSBub2RlIGhhcyBubyBjaGlsZCwgYW5kIHRoZSBjdXJzb3IgaGFzIG5vdCBiZWVuIG1vdmVkLgogICAgICBmaXJzdENoaWxkKCkgeyByZXR1cm4gdGhpcy5lbnRlckNoaWxkKDEsIDAsIDQgLyogRG9udENhcmUgKi8pOyB9CiAgICAgIC8vLyBNb3ZlIHRoZSBjdXJzb3IgdG8gdGhpcyBub2RlJ3MgbGFzdCBjaGlsZC4KICAgICAgbGFzdENoaWxkKCkgeyByZXR1cm4gdGhpcy5lbnRlckNoaWxkKC0xLCAwLCA0IC8qIERvbnRDYXJlICovKTsgfQogICAgICAvLy8gTW92ZSB0aGUgY3Vyc29yIHRvIHRoZSBmaXJzdCBjaGlsZCB0aGF0IGVuZHMgYWZ0ZXIgYHBvc2AuCiAgICAgIGNoaWxkQWZ0ZXIocG9zKSB7IHJldHVybiB0aGlzLmVudGVyQ2hpbGQoMSwgcG9zLCAyIC8qIEFmdGVyICovKTsgfQogICAgICAvLy8gTW92ZSB0byB0aGUgbGFzdCBjaGlsZCB0aGF0IHN0YXJ0cyBiZWZvcmUgYHBvc2AuCiAgICAgIGNoaWxkQmVmb3JlKHBvcykgeyByZXR1cm4gdGhpcy5lbnRlckNoaWxkKC0xLCBwb3MsIC0yIC8qIEJlZm9yZSAqLyk7IH0KICAgICAgLy8vIE1vdmUgdGhlIGN1cnNvciB0byB0aGUgY2hpbGQgYXJvdW5kIGBwb3NgLiBJZiBzaWRlIGlzIC0xIHRoZQogICAgICAvLy8gY2hpbGQgbWF5IGVuZCBhdCB0aGF0IHBvc2l0aW9uLCB3aGVuIDEgaXQgbWF5IHN0YXJ0IHRoZXJlLiBUaGlzCiAgICAgIC8vLyB3aWxsIGFsc28gZW50ZXIgW292ZXJsYWlkXSgjY29tbW9uLk1vdW50ZWRUcmVlLm92ZXJsYXkpCiAgICAgIC8vLyBbbW91bnRlZF0oI2NvbW1vbi5Ob2RlUHJvcF5tb3VudGVkKSB0cmVlcyB1bmxlc3MgYG92ZXJsYXlzYCBpcwogICAgICAvLy8gc2V0IHRvIGZhbHNlLgogICAgICBlbnRlcihwb3MsIHNpZGUsIG1vZGUgPSB0aGlzLm1vZGUpIHsKICAgICAgICAgIGlmICghdGhpcy5idWZmZXIpCiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMueWllbGQodGhpcy5fdHJlZS5lbnRlcihwb3MsIHNpZGUsIG1vZGUpKTsKICAgICAgICAgIHJldHVybiBtb2RlICYgSXRlck1vZGUuRXhjbHVkZUJ1ZmZlcnMgPyBmYWxzZSA6IHRoaXMuZW50ZXJDaGlsZCgxLCBwb3MsIHNpZGUpOwogICAgICB9CiAgICAgIC8vLyBNb3ZlIHRvIHRoZSBub2RlJ3MgcGFyZW50IG5vZGUsIGlmIHRoaXMgaXNuJ3QgdGhlIHRvcCBub2RlLgogICAgICBwYXJlbnQoKSB7CiAgICAgICAgICBpZiAoIXRoaXMuYnVmZmVyKQogICAgICAgICAgICAgIHJldHVybiB0aGlzLnlpZWxkTm9kZSgodGhpcy5tb2RlICYgSXRlck1vZGUuSW5jbHVkZUFub255bW91cykgPyB0aGlzLl90cmVlLl9wYXJlbnQgOiB0aGlzLl90cmVlLnBhcmVudCk7CiAgICAgICAgICBpZiAodGhpcy5zdGFjay5sZW5ndGgpCiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMueWllbGRCdWYodGhpcy5zdGFjay5wb3AoKSk7CiAgICAgICAgICBsZXQgcGFyZW50ID0gKHRoaXMubW9kZSAmIEl0ZXJNb2RlLkluY2x1ZGVBbm9ueW1vdXMpID8gdGhpcy5idWZmZXIucGFyZW50IDogdGhpcy5idWZmZXIucGFyZW50Lm5leHRTaWduaWZpY2FudFBhcmVudCgpOwogICAgICAgICAgdGhpcy5idWZmZXIgPSBudWxsOwogICAgICAgICAgcmV0dXJuIHRoaXMueWllbGROb2RlKHBhcmVudCk7CiAgICAgIH0KICAgICAgLy8vIEBpbnRlcm5hbAogICAgICBzaWJsaW5nKGRpcikgewogICAgICAgICAgaWYgKCF0aGlzLmJ1ZmZlcikKICAgICAgICAgICAgICByZXR1cm4gIXRoaXMuX3RyZWUuX3BhcmVudCA/IGZhbHNlCiAgICAgICAgICAgICAgICAgIDogdGhpcy55aWVsZCh0aGlzLl90cmVlLmluZGV4IDwgMCA/IG51bGwKICAgICAgICAgICAgICAgICAgICAgIDogdGhpcy5fdHJlZS5fcGFyZW50Lm5leHRDaGlsZCh0aGlzLl90cmVlLmluZGV4ICsgZGlyLCBkaXIsIDAsIDQgLyogRG9udENhcmUgKi8sIHRoaXMubW9kZSkpOwogICAgICAgICAgbGV0IHsgYnVmZmVyIH0gPSB0aGlzLmJ1ZmZlciwgZCA9IHRoaXMuc3RhY2subGVuZ3RoIC0gMTsKICAgICAgICAgIGlmIChkaXIgPCAwKSB7CiAgICAgICAgICAgICAgbGV0IHBhcmVudFN0YXJ0ID0gZCA8IDAgPyAwIDogdGhpcy5zdGFja1tkXSArIDQ7CiAgICAgICAgICAgICAgaWYgKHRoaXMuaW5kZXggIT0gcGFyZW50U3RhcnQpCiAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnlpZWxkQnVmKGJ1ZmZlci5maW5kQ2hpbGQocGFyZW50U3RhcnQsIHRoaXMuaW5kZXgsIC0xLCAwLCA0IC8qIERvbnRDYXJlICovKSk7CiAgICAgICAgICB9CiAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICBsZXQgYWZ0ZXIgPSBidWZmZXIuYnVmZmVyW3RoaXMuaW5kZXggKyAzXTsKICAgICAgICAgICAgICBpZiAoYWZ0ZXIgPCAoZCA8IDAgPyBidWZmZXIuYnVmZmVyLmxlbmd0aCA6IGJ1ZmZlci5idWZmZXJbdGhpcy5zdGFja1tkXSArIDNdKSkKICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMueWllbGRCdWYoYWZ0ZXIpOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGQgPCAwID8gdGhpcy55aWVsZCh0aGlzLmJ1ZmZlci5wYXJlbnQubmV4dENoaWxkKHRoaXMuYnVmZmVyLmluZGV4ICsgZGlyLCBkaXIsIDAsIDQgLyogRG9udENhcmUgKi8sIHRoaXMubW9kZSkpIDogZmFsc2U7CiAgICAgIH0KICAgICAgLy8vIE1vdmUgdG8gdGhpcyBub2RlJ3MgbmV4dCBzaWJsaW5nLCBpZiBhbnkuCiAgICAgIG5leHRTaWJsaW5nKCkgeyByZXR1cm4gdGhpcy5zaWJsaW5nKDEpOyB9CiAgICAgIC8vLyBNb3ZlIHRvIHRoaXMgbm9kZSdzIHByZXZpb3VzIHNpYmxpbmcsIGlmIGFueS4KICAgICAgcHJldlNpYmxpbmcoKSB7IHJldHVybiB0aGlzLnNpYmxpbmcoLTEpOyB9CiAgICAgIGF0TGFzdE5vZGUoZGlyKSB7CiAgICAgICAgICBsZXQgaW5kZXgsIHBhcmVudCwgeyBidWZmZXIgfSA9IHRoaXM7CiAgICAgICAgICBpZiAoYnVmZmVyKSB7CiAgICAgICAgICAgICAgaWYgKGRpciA+IDApIHsKICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaW5kZXggPCBidWZmZXIuYnVmZmVyLmJ1ZmZlci5sZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuaW5kZXg7IGkrKykKICAgICAgICAgICAgICAgICAgICAgIGlmIChidWZmZXIuYnVmZmVyLmJ1ZmZlcltpICsgM10gPCB0aGlzLmluZGV4KQogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgKHsgaW5kZXgsIHBhcmVudCB9ID0gYnVmZmVyKTsKICAgICAgICAgIH0KICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICh7IGluZGV4LCBfcGFyZW50OiBwYXJlbnQgfSA9IHRoaXMuX3RyZWUpOwogICAgICAgICAgfQogICAgICAgICAgZm9yICg7IHBhcmVudDsgeyBpbmRleCwgX3BhcmVudDogcGFyZW50IH0gPSBwYXJlbnQpIHsKICAgICAgICAgICAgICBpZiAoaW5kZXggPiAtMSkKICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IGluZGV4ICsgZGlyLCBlID0gZGlyIDwgMCA/IC0xIDogcGFyZW50Ll90cmVlLmNoaWxkcmVuLmxlbmd0aDsgaSAhPSBlOyBpICs9IGRpcikgewogICAgICAgICAgICAgICAgICAgICAgbGV0IGNoaWxkID0gcGFyZW50Ll90cmVlLmNoaWxkcmVuW2ldOwogICAgICAgICAgICAgICAgICAgICAgaWYgKCh0aGlzLm1vZGUgJiBJdGVyTW9kZS5JbmNsdWRlQW5vbnltb3VzKSB8fAogICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkIGluc3RhbmNlb2YgVHJlZUJ1ZmZlciB8fAogICAgICAgICAgICAgICAgICAgICAgICAgICFjaGlsZC50eXBlLmlzQW5vbnltb3VzIHx8CiAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzQ2hpbGQoY2hpbGQpKQogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgICAgbW92ZShkaXIsIGVudGVyKSB7CiAgICAgICAgICBpZiAoZW50ZXIgJiYgdGhpcy5lbnRlckNoaWxkKGRpciwgMCwgNCAvKiBEb250Q2FyZSAqLykpCiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICBmb3IgKDs7KSB7CiAgICAgICAgICAgICAgaWYgKHRoaXMuc2libGluZyhkaXIpKQogICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICBpZiAodGhpcy5hdExhc3ROb2RlKGRpcikgfHwgIXRoaXMucGFyZW50KCkpCiAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KICAgICAgfQogICAgICAvLy8gTW92ZSB0byB0aGUgbmV4dCBub2RlIGluIGEKICAgICAgLy8vIFtwcmUtb3JkZXJdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1RyZWVfdHJhdmVyc2FsI1ByZS1vcmRlcl8oTkxSKSkKICAgICAgLy8vIHRyYXZlcnNhbCwgZ29pbmcgZnJvbSBhIG5vZGUgdG8gaXRzIGZpcnN0IGNoaWxkIG9yLCBpZiB0aGUKICAgICAgLy8vIGN1cnJlbnQgbm9kZSBpcyBlbXB0eSBvciBgZW50ZXJgIGlzIGZhbHNlLCBpdHMgbmV4dCBzaWJsaW5nIG9yCiAgICAgIC8vLyB0aGUgbmV4dCBzaWJsaW5nIG9mIHRoZSBmaXJzdCBwYXJlbnQgbm9kZSB0aGF0IGhhcyBvbmUuCiAgICAgIG5leHQoZW50ZXIgPSB0cnVlKSB7IHJldHVybiB0aGlzLm1vdmUoMSwgZW50ZXIpOyB9CiAgICAgIC8vLyBNb3ZlIHRvIHRoZSBuZXh0IG5vZGUgaW4gYSBsYXN0LXRvLWZpcnN0IHByZS1vcmRlciB0cmF2ZXJhbC4gQQogICAgICAvLy8gbm9kZSBpcyBmb2xsb3dlZCBieSBpdHMgbGFzdCBjaGlsZCBvciwgaWYgaXQgaGFzIG5vbmUsIGl0cwogICAgICAvLy8gcHJldmlvdXMgc2libGluZyBvciB0aGUgcHJldmlvdXMgc2libGluZyBvZiB0aGUgZmlyc3QgcGFyZW50CiAgICAgIC8vLyBub2RlIHRoYXQgaGFzIG9uZS4KICAgICAgcHJldihlbnRlciA9IHRydWUpIHsgcmV0dXJuIHRoaXMubW92ZSgtMSwgZW50ZXIpOyB9CiAgICAgIC8vLyBNb3ZlIHRoZSBjdXJzb3IgdG8gdGhlIGlubmVybW9zdCBub2RlIHRoYXQgY292ZXJzIGBwb3NgLiBJZgogICAgICAvLy8gYHNpZGVgIGlzIC0xLCBpdCB3aWxsIGVudGVyIG5vZGVzIHRoYXQgZW5kIGF0IGBwb3NgLiBJZiBpdCBpcyAxLAogICAgICAvLy8gaXQgd2lsbCBlbnRlciBub2RlcyB0aGF0IHN0YXJ0IGF0IGBwb3NgLgogICAgICBtb3ZlVG8ocG9zLCBzaWRlID0gMCkgewogICAgICAgICAgLy8gTW92ZSB1cCB0byBhIG5vZGUgdGhhdCBhY3R1YWxseSBob2xkcyB0aGUgcG9zaXRpb24sIGlmIHBvc3NpYmxlCiAgICAgICAgICB3aGlsZSAodGhpcy5mcm9tID09IHRoaXMudG8gfHwKICAgICAgICAgICAgICAoc2lkZSA8IDEgPyB0aGlzLmZyb20gPj0gcG9zIDogdGhpcy5mcm9tID4gcG9zKSB8fAogICAgICAgICAgICAgIChzaWRlID4gLTEgPyB0aGlzLnRvIDw9IHBvcyA6IHRoaXMudG8gPCBwb3MpKQogICAgICAgICAgICAgIGlmICghdGhpcy5wYXJlbnQoKSkKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAvLyBUaGVuIHNjYW4gZG93biBpbnRvIGNoaWxkIG5vZGVzIGFzIGZhciBhcyBwb3NzaWJsZQogICAgICAgICAgd2hpbGUgKHRoaXMuZW50ZXJDaGlsZCgxLCBwb3MsIHNpZGUpKSB7IH0KICAgICAgICAgIHJldHVybiB0aGlzOwogICAgICB9CiAgICAgIC8vLyBHZXQgYSBbc3ludGF4IG5vZGVdKCNjb21tb24uU3ludGF4Tm9kZSkgYXQgdGhlIGN1cnNvcidzIGN1cnJlbnQKICAgICAgLy8vIHBvc2l0aW9uLgogICAgICBnZXQgbm9kZSgpIHsKICAgICAgICAgIGlmICghdGhpcy5idWZmZXIpCiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3RyZWU7CiAgICAgICAgICBsZXQgY2FjaGUgPSB0aGlzLmJ1ZmZlck5vZGUsIHJlc3VsdCA9IG51bGwsIGRlcHRoID0gMDsKICAgICAgICAgIGlmIChjYWNoZSAmJiBjYWNoZS5jb250ZXh0ID09IHRoaXMuYnVmZmVyKSB7CiAgICAgICAgICAgICAgc2NhbjogZm9yIChsZXQgaW5kZXggPSB0aGlzLmluZGV4LCBkID0gdGhpcy5zdGFjay5sZW5ndGg7IGQgPj0gMDspIHsKICAgICAgICAgICAgICAgICAgZm9yIChsZXQgYyA9IGNhY2hlOyBjOyBjID0gYy5fcGFyZW50KQogICAgICAgICAgICAgICAgICAgICAgaWYgKGMuaW5kZXggPT0gaW5kZXgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXggPT0gdGhpcy5pbmRleCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gYzsKICAgICAgICAgICAgICAgICAgICAgICAgICBkZXB0aCA9IGQgKyAxOwogICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrIHNjYW47CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGluZGV4ID0gdGhpcy5zdGFja1stLWRdOwogICAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGZvciAobGV0IGkgPSBkZXB0aDsgaSA8IHRoaXMuc3RhY2subGVuZ3RoOyBpKyspCiAgICAgICAgICAgICAgcmVzdWx0ID0gbmV3IEJ1ZmZlck5vZGUodGhpcy5idWZmZXIsIHJlc3VsdCwgdGhpcy5zdGFja1tpXSk7CiAgICAgICAgICByZXR1cm4gdGhpcy5idWZmZXJOb2RlID0gbmV3IEJ1ZmZlck5vZGUodGhpcy5idWZmZXIsIHJlc3VsdCwgdGhpcy5pbmRleCk7CiAgICAgIH0KICAgICAgLy8vIEdldCB0aGUgW3RyZWVdKCNjb21tb24uVHJlZSkgdGhhdCByZXByZXNlbnRzIHRoZSBjdXJyZW50IG5vZGUsIGlmCiAgICAgIC8vLyBhbnkuIFdpbGwgcmV0dXJuIG51bGwgd2hlbiB0aGUgbm9kZSBpcyBpbiBhIFt0cmVlCiAgICAgIC8vLyBidWZmZXJdKCNjb21tb24uVHJlZUJ1ZmZlcikuCiAgICAgIGdldCB0cmVlKCkgewogICAgICAgICAgcmV0dXJuIHRoaXMuYnVmZmVyID8gbnVsbCA6IHRoaXMuX3RyZWUuX3RyZWU7CiAgICAgIH0KICAgICAgLy8vIEl0ZXJhdGUgb3ZlciB0aGUgY3VycmVudCBub2RlIGFuZCBhbGwgaXRzIGRlc2NlbmRhbnRzLCBjYWxsaW5nCiAgICAgIC8vLyBgZW50ZXJgIHdoZW4gZW50ZXJpbmcgYSBub2RlIGFuZCBgbGVhdmVgLCBpZiBnaXZlbiwgd2hlbiBsZWF2aW5nCiAgICAgIC8vLyBvbmUuIFdoZW4gYGVudGVyYCByZXR1cm5zIGBmYWxzZWAsIGFueSBjaGlsZHJlbiBvZiB0aGF0IG5vZGUgYXJlCiAgICAgIC8vLyBza2lwcGVkLCBhbmQgYGxlYXZlYCBpc24ndCBjYWxsZWQgZm9yIGl0LgogICAgICBpdGVyYXRlKGVudGVyLCBsZWF2ZSkgewogICAgICAgICAgZm9yIChsZXQgZGVwdGggPSAwOzspIHsKICAgICAgICAgICAgICBsZXQgbXVzdExlYXZlID0gZmFsc2U7CiAgICAgICAgICAgICAgaWYgKHRoaXMudHlwZS5pc0Fub255bW91cyB8fCBlbnRlcih0aGlzKSAhPT0gZmFsc2UpIHsKICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZmlyc3RDaGlsZCgpKSB7CiAgICAgICAgICAgICAgICAgICAgICBkZXB0aCsrOwogICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnR5cGUuaXNBbm9ueW1vdXMpCiAgICAgICAgICAgICAgICAgICAgICBtdXN0TGVhdmUgPSB0cnVlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBmb3IgKDs7KSB7CiAgICAgICAgICAgICAgICAgIGlmIChtdXN0TGVhdmUgJiYgbGVhdmUpCiAgICAgICAgICAgICAgICAgICAgICBsZWF2ZSh0aGlzKTsKICAgICAgICAgICAgICAgICAgbXVzdExlYXZlID0gdGhpcy50eXBlLmlzQW5vbnltb3VzOwogICAgICAgICAgICAgICAgICBpZiAodGhpcy5uZXh0U2libGluZygpKQogICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIGlmICghZGVwdGgpCiAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50KCk7CiAgICAgICAgICAgICAgICAgIGRlcHRoLS07CiAgICAgICAgICAgICAgICAgIG11c3RMZWF2ZSA9IHRydWU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICB9CiAgICAgIC8vLyBUZXN0IHdoZXRoZXIgdGhlIGN1cnJlbnQgbm9kZSBtYXRjaGVzIGEgZ2l2ZW4gY29udGV4dOKAlGEgc2VxdWVuY2UKICAgICAgLy8vIG9mIGRpcmVjdCBwYXJlbnQgbm9kZSBuYW1lcy4gRW1wdHkgc3RyaW5ncyBpbiB0aGUgY29udGV4dCBhcnJheQogICAgICAvLy8gYXJlIHRyZWF0ZWQgYXMgd2lsZGNhcmRzLgogICAgICBtYXRjaENvbnRleHQoY29udGV4dCkgewogICAgICAgICAgaWYgKCF0aGlzLmJ1ZmZlcikKICAgICAgICAgICAgICByZXR1cm4gbWF0Y2hOb2RlQ29udGV4dCh0aGlzLm5vZGUsIGNvbnRleHQpOwogICAgICAgICAgbGV0IHsgYnVmZmVyIH0gPSB0aGlzLmJ1ZmZlciwgeyB0eXBlcyB9ID0gYnVmZmVyLnNldDsKICAgICAgICAgIGZvciAobGV0IGkgPSBjb250ZXh0Lmxlbmd0aCAtIDEsIGQgPSB0aGlzLnN0YWNrLmxlbmd0aCAtIDE7IGkgPj0gMDsgZC0tKSB7CiAgICAgICAgICAgICAgaWYgKGQgPCAwKQogICAgICAgICAgICAgICAgICByZXR1cm4gbWF0Y2hOb2RlQ29udGV4dCh0aGlzLm5vZGUsIGNvbnRleHQsIGkpOwogICAgICAgICAgICAgIGxldCB0eXBlID0gdHlwZXNbYnVmZmVyLmJ1ZmZlclt0aGlzLnN0YWNrW2RdXV07CiAgICAgICAgICAgICAgaWYgKCF0eXBlLmlzQW5vbnltb3VzKSB7CiAgICAgICAgICAgICAgICAgIGlmIChjb250ZXh0W2ldICYmIGNvbnRleHRbaV0gIT0gdHlwZS5uYW1lKQogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgICBpLS07CiAgICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICB9CiAgZnVuY3Rpb24gaGFzQ2hpbGQodHJlZSkgewogICAgICByZXR1cm4gdHJlZS5jaGlsZHJlbi5zb21lKGNoID0+IGNoIGluc3RhbmNlb2YgVHJlZUJ1ZmZlciB8fCAhY2gudHlwZS5pc0Fub255bW91cyB8fCBoYXNDaGlsZChjaCkpOwogIH0KICBmdW5jdGlvbiBidWlsZFRyZWUoZGF0YSkgewogICAgICB2YXIgX2E7CiAgICAgIGxldCB7IGJ1ZmZlciwgbm9kZVNldCwgbWF4QnVmZmVyTGVuZ3RoID0gRGVmYXVsdEJ1ZmZlckxlbmd0aCwgcmV1c2VkID0gW10sIG1pblJlcGVhdFR5cGUgPSBub2RlU2V0LnR5cGVzLmxlbmd0aCB9ID0gZGF0YTsKICAgICAgbGV0IGN1cnNvciA9IEFycmF5LmlzQXJyYXkoYnVmZmVyKSA/IG5ldyBGbGF0QnVmZmVyQ3Vyc29yKGJ1ZmZlciwgYnVmZmVyLmxlbmd0aCkgOiBidWZmZXI7CiAgICAgIGxldCB0eXBlcyA9IG5vZGVTZXQudHlwZXM7CiAgICAgIGxldCBjb250ZXh0SGFzaCA9IDAsIGxvb2tBaGVhZCA9IDA7CiAgICAgIGZ1bmN0aW9uIHRha2VOb2RlKHBhcmVudFN0YXJ0LCBtaW5Qb3MsIGNoaWxkcmVuLCBwb3NpdGlvbnMsIGluUmVwZWF0KSB7CiAgICAgICAgICBsZXQgeyBpZCwgc3RhcnQsIGVuZCwgc2l6ZSB9ID0gY3Vyc29yOwogICAgICAgICAgbGV0IGxvb2tBaGVhZEF0U3RhcnQgPSBsb29rQWhlYWQ7CiAgICAgICAgICB3aGlsZSAoc2l6ZSA8IDApIHsKICAgICAgICAgICAgICBjdXJzb3IubmV4dCgpOwogICAgICAgICAgICAgIGlmIChzaXplID09IC0xIC8qIFJldXNlICovKSB7CiAgICAgICAgICAgICAgICAgIGxldCBub2RlID0gcmV1c2VkW2lkXTsKICAgICAgICAgICAgICAgICAgY2hpbGRyZW4ucHVzaChub2RlKTsKICAgICAgICAgICAgICAgICAgcG9zaXRpb25zLnB1c2goc3RhcnQgLSBwYXJlbnRTdGFydCk7CiAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgZWxzZSBpZiAoc2l6ZSA9PSAtMyAvKiBDb250ZXh0Q2hhbmdlICovKSB7IC8vIENvbnRleHQgY2hhbmdlCiAgICAgICAgICAgICAgICAgIGNvbnRleHRIYXNoID0gaWQ7CiAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgZWxzZSBpZiAoc2l6ZSA9PSAtNCAvKiBMb29rQWhlYWQgKi8pIHsKICAgICAgICAgICAgICAgICAgbG9va0FoZWFkID0gaWQ7CiAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKGBVbnJlY29nbml6ZWQgcmVjb3JkIHNpemU6ICR7c2l6ZX1gKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBsZXQgdHlwZSA9IHR5cGVzW2lkXSwgbm9kZSwgYnVmZmVyOwogICAgICAgICAgbGV0IHN0YXJ0UG9zID0gc3RhcnQgLSBwYXJlbnRTdGFydDsKICAgICAgICAgIGlmIChlbmQgLSBzdGFydCA8PSBtYXhCdWZmZXJMZW5ndGggJiYgKGJ1ZmZlciA9IGZpbmRCdWZmZXJTaXplKGN1cnNvci5wb3MgLSBtaW5Qb3MsIGluUmVwZWF0KSkpIHsKICAgICAgICAgICAgICAvLyBTbWFsbCBlbm91Z2ggZm9yIGEgYnVmZmVyLCBhbmQgbm8gcmV1c2VkIG5vZGVzIGluc2lkZQogICAgICAgICAgICAgIGxldCBkYXRhID0gbmV3IFVpbnQxNkFycmF5KGJ1ZmZlci5zaXplIC0gYnVmZmVyLnNraXApOwogICAgICAgICAgICAgIGxldCBlbmRQb3MgPSBjdXJzb3IucG9zIC0gYnVmZmVyLnNpemUsIGluZGV4ID0gZGF0YS5sZW5ndGg7CiAgICAgICAgICAgICAgd2hpbGUgKGN1cnNvci5wb3MgPiBlbmRQb3MpCiAgICAgICAgICAgICAgICAgIGluZGV4ID0gY29weVRvQnVmZmVyKGJ1ZmZlci5zdGFydCwgZGF0YSwgaW5kZXgpOwogICAgICAgICAgICAgIG5vZGUgPSBuZXcgVHJlZUJ1ZmZlcihkYXRhLCBlbmQgLSBidWZmZXIuc3RhcnQsIG5vZGVTZXQpOwogICAgICAgICAgICAgIHN0YXJ0UG9zID0gYnVmZmVyLnN0YXJ0IC0gcGFyZW50U3RhcnQ7CiAgICAgICAgICB9CiAgICAgICAgICBlbHNlIHsgLy8gTWFrZSBpdCBhIG5vZGUKICAgICAgICAgICAgICBsZXQgZW5kUG9zID0gY3Vyc29yLnBvcyAtIHNpemU7CiAgICAgICAgICAgICAgY3Vyc29yLm5leHQoKTsKICAgICAgICAgICAgICBsZXQgbG9jYWxDaGlsZHJlbiA9IFtdLCBsb2NhbFBvc2l0aW9ucyA9IFtdOwogICAgICAgICAgICAgIGxldCBsb2NhbEluUmVwZWF0ID0gaWQgPj0gbWluUmVwZWF0VHlwZSA/IGlkIDogLTE7CiAgICAgICAgICAgICAgbGV0IGxhc3RHcm91cCA9IDAsIGxhc3RFbmQgPSBlbmQ7CiAgICAgICAgICAgICAgd2hpbGUgKGN1cnNvci5wb3MgPiBlbmRQb3MpIHsKICAgICAgICAgICAgICAgICAgaWYgKGxvY2FsSW5SZXBlYXQgPj0gMCAmJiBjdXJzb3IuaWQgPT0gbG9jYWxJblJlcGVhdCAmJiBjdXJzb3Iuc2l6ZSA+PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAoY3Vyc29yLmVuZCA8PSBsYXN0RW5kIC0gbWF4QnVmZmVyTGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgbWFrZVJlcGVhdExlYWYobG9jYWxDaGlsZHJlbiwgbG9jYWxQb3NpdGlvbnMsIHN0YXJ0LCBsYXN0R3JvdXAsIGN1cnNvci5lbmQsIGxhc3RFbmQsIGxvY2FsSW5SZXBlYXQsIGxvb2tBaGVhZEF0U3RhcnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RHcm91cCA9IGxvY2FsQ2hpbGRyZW4ubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RFbmQgPSBjdXJzb3IuZW5kOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgY3Vyc29yLm5leHQoKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgIHRha2VOb2RlKHN0YXJ0LCBlbmRQb3MsIGxvY2FsQ2hpbGRyZW4sIGxvY2FsUG9zaXRpb25zLCBsb2NhbEluUmVwZWF0KTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAobG9jYWxJblJlcGVhdCA+PSAwICYmIGxhc3RHcm91cCA+IDAgJiYgbGFzdEdyb3VwIDwgbG9jYWxDaGlsZHJlbi5sZW5ndGgpCiAgICAgICAgICAgICAgICAgIG1ha2VSZXBlYXRMZWFmKGxvY2FsQ2hpbGRyZW4sIGxvY2FsUG9zaXRpb25zLCBzdGFydCwgbGFzdEdyb3VwLCBzdGFydCwgbGFzdEVuZCwgbG9jYWxJblJlcGVhdCwgbG9va0FoZWFkQXRTdGFydCk7CiAgICAgICAgICAgICAgbG9jYWxDaGlsZHJlbi5yZXZlcnNlKCk7CiAgICAgICAgICAgICAgbG9jYWxQb3NpdGlvbnMucmV2ZXJzZSgpOwogICAgICAgICAgICAgIGlmIChsb2NhbEluUmVwZWF0ID4gLTEgJiYgbGFzdEdyb3VwID4gMCkgewogICAgICAgICAgICAgICAgICBsZXQgbWFrZSA9IG1ha2VCYWxhbmNlZCh0eXBlKTsKICAgICAgICAgICAgICAgICAgbm9kZSA9IGJhbGFuY2VSYW5nZSh0eXBlLCBsb2NhbENoaWxkcmVuLCBsb2NhbFBvc2l0aW9ucywgMCwgbG9jYWxDaGlsZHJlbi5sZW5ndGgsIDAsIGVuZCAtIHN0YXJ0LCBtYWtlLCBtYWtlKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgIG5vZGUgPSBtYWtlVHJlZSh0eXBlLCBsb2NhbENoaWxkcmVuLCBsb2NhbFBvc2l0aW9ucywgZW5kIC0gc3RhcnQsIGxvb2tBaGVhZEF0U3RhcnQgLSBlbmQpOwogICAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGNoaWxkcmVuLnB1c2gobm9kZSk7CiAgICAgICAgICBwb3NpdGlvbnMucHVzaChzdGFydFBvcyk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gbWFrZUJhbGFuY2VkKHR5cGUpIHsKICAgICAgICAgIHJldHVybiAoY2hpbGRyZW4sIHBvc2l0aW9ucywgbGVuZ3RoKSA9PiB7CiAgICAgICAgICAgICAgbGV0IGxvb2tBaGVhZCA9IDAsIGxhc3RJID0gY2hpbGRyZW4ubGVuZ3RoIC0gMSwgbGFzdCwgbG9va0FoZWFkUHJvcDsKICAgICAgICAgICAgICBpZiAobGFzdEkgPj0gMCAmJiAobGFzdCA9IGNoaWxkcmVuW2xhc3RJXSkgaW5zdGFuY2VvZiBUcmVlKSB7CiAgICAgICAgICAgICAgICAgIGlmICghbGFzdEkgJiYgbGFzdC50eXBlID09IHR5cGUgJiYgbGFzdC5sZW5ndGggPT0gbGVuZ3RoKQogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxhc3Q7CiAgICAgICAgICAgICAgICAgIGlmIChsb29rQWhlYWRQcm9wID0gbGFzdC5wcm9wKE5vZGVQcm9wLmxvb2tBaGVhZCkpCiAgICAgICAgICAgICAgICAgICAgICBsb29rQWhlYWQgPSBwb3NpdGlvbnNbbGFzdEldICsgbGFzdC5sZW5ndGggKyBsb29rQWhlYWRQcm9wOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICByZXR1cm4gbWFrZVRyZWUodHlwZSwgY2hpbGRyZW4sIHBvc2l0aW9ucywgbGVuZ3RoLCBsb29rQWhlYWQpOwogICAgICAgICAgfTsKICAgICAgfQogICAgICBmdW5jdGlvbiBtYWtlUmVwZWF0TGVhZihjaGlsZHJlbiwgcG9zaXRpb25zLCBiYXNlLCBpLCBmcm9tLCB0bywgdHlwZSwgbG9va0FoZWFkKSB7CiAgICAgICAgICBsZXQgbG9jYWxDaGlsZHJlbiA9IFtdLCBsb2NhbFBvc2l0aW9ucyA9IFtdOwogICAgICAgICAgd2hpbGUgKGNoaWxkcmVuLmxlbmd0aCA+IGkpIHsKICAgICAgICAgICAgICBsb2NhbENoaWxkcmVuLnB1c2goY2hpbGRyZW4ucG9wKCkpOwogICAgICAgICAgICAgIGxvY2FsUG9zaXRpb25zLnB1c2gocG9zaXRpb25zLnBvcCgpICsgYmFzZSAtIGZyb20pOwogICAgICAgICAgfQogICAgICAgICAgY2hpbGRyZW4ucHVzaChtYWtlVHJlZShub2RlU2V0LnR5cGVzW3R5cGVdLCBsb2NhbENoaWxkcmVuLCBsb2NhbFBvc2l0aW9ucywgdG8gLSBmcm9tLCBsb29rQWhlYWQgLSB0bykpOwogICAgICAgICAgcG9zaXRpb25zLnB1c2goZnJvbSAtIGJhc2UpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIG1ha2VUcmVlKHR5cGUsIGNoaWxkcmVuLCBwb3NpdGlvbnMsIGxlbmd0aCwgbG9va0FoZWFkID0gMCwgcHJvcHMpIHsKICAgICAgICAgIGlmIChjb250ZXh0SGFzaCkgewogICAgICAgICAgICAgIGxldCBwYWlyID0gW05vZGVQcm9wLmNvbnRleHRIYXNoLCBjb250ZXh0SGFzaF07CiAgICAgICAgICAgICAgcHJvcHMgPSBwcm9wcyA/IFtwYWlyXS5jb25jYXQocHJvcHMpIDogW3BhaXJdOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGxvb2tBaGVhZCA+IDI1KSB7CiAgICAgICAgICAgICAgbGV0IHBhaXIgPSBbTm9kZVByb3AubG9va0FoZWFkLCBsb29rQWhlYWRdOwogICAgICAgICAgICAgIHByb3BzID0gcHJvcHMgPyBbcGFpcl0uY29uY2F0KHByb3BzKSA6IFtwYWlyXTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBuZXcgVHJlZSh0eXBlLCBjaGlsZHJlbiwgcG9zaXRpb25zLCBsZW5ndGgsIHByb3BzKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBmaW5kQnVmZmVyU2l6ZShtYXhTaXplLCBpblJlcGVhdCkgewogICAgICAgICAgLy8gU2NhbiB0aHJvdWdoIHRoZSBidWZmZXIgdG8gZmluZCBwcmV2aW91cyBzaWJsaW5ncyB0aGF0IGZpdAogICAgICAgICAgLy8gdG9nZXRoZXIgaW4gYSBUcmVlQnVmZmVyLCBhbmQgZG9uJ3QgY29udGFpbiBhbnkgcmV1c2VkIG5vZGVzCiAgICAgICAgICAvLyAod2hpY2ggY2FuJ3QgYmUgc3RvcmVkIGluIGEgYnVmZmVyKS4KICAgICAgICAgIC8vIElmIGBpblJlcGVhdGAgaXMgPiAtMSwgaWdub3JlIG5vZGUgYm91bmRhcmllcyBvZiB0aGF0IHR5cGUgZm9yCiAgICAgICAgICAvLyBuZXN0aW5nLCBidXQgbWFrZSBzdXJlIHRoZSBlbmQgZmFsbHMgZWl0aGVyIGF0IHRoZSBzdGFydAogICAgICAgICAgLy8gKGBtYXhTaXplYCkgb3IgYmVmb3JlIHN1Y2ggYSBub2RlLgogICAgICAgICAgbGV0IGZvcmsgPSBjdXJzb3IuZm9yaygpOwogICAgICAgICAgbGV0IHNpemUgPSAwLCBzdGFydCA9IDAsIHNraXAgPSAwLCBtaW5TdGFydCA9IGZvcmsuZW5kIC0gbWF4QnVmZmVyTGVuZ3RoOwogICAgICAgICAgbGV0IHJlc3VsdCA9IHsgc2l6ZTogMCwgc3RhcnQ6IDAsIHNraXA6IDAgfTsKICAgICAgICAgIHNjYW46IGZvciAobGV0IG1pblBvcyA9IGZvcmsucG9zIC0gbWF4U2l6ZTsgZm9yay5wb3MgPiBtaW5Qb3M7KSB7CiAgICAgICAgICAgICAgbGV0IG5vZGVTaXplID0gZm9yay5zaXplOwogICAgICAgICAgICAgIC8vIFByZXRlbmQgbmVzdGVkIHJlcGVhdCBub2RlcyBvZiB0aGUgc2FtZSB0eXBlIGRvbid0IGV4aXN0CiAgICAgICAgICAgICAgaWYgKGZvcmsuaWQgPT0gaW5SZXBlYXQgJiYgbm9kZVNpemUgPj0gMCkgewogICAgICAgICAgICAgICAgICAvLyBFeGNlcHQgdGhhdCB3ZSBzdG9yZSB0aGUgY3VycmVudCBzdGF0ZSBhcyBhIHZhbGlkIHJldHVybgogICAgICAgICAgICAgICAgICAvLyB2YWx1ZS4KICAgICAgICAgICAgICAgICAgcmVzdWx0LnNpemUgPSBzaXplOwogICAgICAgICAgICAgICAgICByZXN1bHQuc3RhcnQgPSBzdGFydDsKICAgICAgICAgICAgICAgICAgcmVzdWx0LnNraXAgPSBza2lwOwogICAgICAgICAgICAgICAgICBza2lwICs9IDQ7CiAgICAgICAgICAgICAgICAgIHNpemUgKz0gNDsKICAgICAgICAgICAgICAgICAgZm9yay5uZXh0KCk7CiAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBsZXQgc3RhcnRQb3MgPSBmb3JrLnBvcyAtIG5vZGVTaXplOwogICAgICAgICAgICAgIGlmIChub2RlU2l6ZSA8IDAgfHwgc3RhcnRQb3MgPCBtaW5Qb3MgfHwgZm9yay5zdGFydCA8IG1pblN0YXJ0KQogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICBsZXQgbG9jYWxTa2lwcGVkID0gZm9yay5pZCA+PSBtaW5SZXBlYXRUeXBlID8gNCA6IDA7CiAgICAgICAgICAgICAgbGV0IG5vZGVTdGFydCA9IGZvcmsuc3RhcnQ7CiAgICAgICAgICAgICAgZm9yay5uZXh0KCk7CiAgICAgICAgICAgICAgd2hpbGUgKGZvcmsucG9zID4gc3RhcnRQb3MpIHsKICAgICAgICAgICAgICAgICAgaWYgKGZvcmsuc2l6ZSA8IDApIHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChmb3JrLnNpemUgPT0gLTMgLyogQ29udGV4dENoYW5nZSAqLykKICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFNraXBwZWQgKz0gNDsKICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhayBzY2FuOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGZvcmsuaWQgPj0gbWluUmVwZWF0VHlwZSkgewogICAgICAgICAgICAgICAgICAgICAgbG9jYWxTa2lwcGVkICs9IDQ7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgZm9yay5uZXh0KCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHN0YXJ0ID0gbm9kZVN0YXJ0OwogICAgICAgICAgICAgIHNpemUgKz0gbm9kZVNpemU7CiAgICAgICAgICAgICAgc2tpcCArPSBsb2NhbFNraXBwZWQ7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoaW5SZXBlYXQgPCAwIHx8IHNpemUgPT0gbWF4U2l6ZSkgewogICAgICAgICAgICAgIHJlc3VsdC5zaXplID0gc2l6ZTsKICAgICAgICAgICAgICByZXN1bHQuc3RhcnQgPSBzdGFydDsKICAgICAgICAgICAgICByZXN1bHQuc2tpcCA9IHNraXA7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gcmVzdWx0LnNpemUgPiA0ID8gcmVzdWx0IDogdW5kZWZpbmVkOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGNvcHlUb0J1ZmZlcihidWZmZXJTdGFydCwgYnVmZmVyLCBpbmRleCkgewogICAgICAgICAgbGV0IHsgaWQsIHN0YXJ0LCBlbmQsIHNpemUgfSA9IGN1cnNvcjsKICAgICAgICAgIGN1cnNvci5uZXh0KCk7CiAgICAgICAgICBpZiAoc2l6ZSA+PSAwICYmIGlkIDwgbWluUmVwZWF0VHlwZSkgewogICAgICAgICAgICAgIGxldCBzdGFydEluZGV4ID0gaW5kZXg7CiAgICAgICAgICAgICAgaWYgKHNpemUgPiA0KSB7CiAgICAgICAgICAgICAgICAgIGxldCBlbmRQb3MgPSBjdXJzb3IucG9zIC0gKHNpemUgLSA0KTsKICAgICAgICAgICAgICAgICAgd2hpbGUgKGN1cnNvci5wb3MgPiBlbmRQb3MpCiAgICAgICAgICAgICAgICAgICAgICBpbmRleCA9IGNvcHlUb0J1ZmZlcihidWZmZXJTdGFydCwgYnVmZmVyLCBpbmRleCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGJ1ZmZlclstLWluZGV4XSA9IHN0YXJ0SW5kZXg7CiAgICAgICAgICAgICAgYnVmZmVyWy0taW5kZXhdID0gZW5kIC0gYnVmZmVyU3RhcnQ7CiAgICAgICAgICAgICAgYnVmZmVyWy0taW5kZXhdID0gc3RhcnQgLSBidWZmZXJTdGFydDsKICAgICAgICAgICAgICBidWZmZXJbLS1pbmRleF0gPSBpZDsKICAgICAgICAgIH0KICAgICAgICAgIGVsc2UgaWYgKHNpemUgPT0gLTMgLyogQ29udGV4dENoYW5nZSAqLykgewogICAgICAgICAgICAgIGNvbnRleHRIYXNoID0gaWQ7CiAgICAgICAgICB9CiAgICAgICAgICBlbHNlIGlmIChzaXplID09IC00IC8qIExvb2tBaGVhZCAqLykgewogICAgICAgICAgICAgIGxvb2tBaGVhZCA9IGlkOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGluZGV4OwogICAgICB9CiAgICAgIGxldCBjaGlsZHJlbiA9IFtdLCBwb3NpdGlvbnMgPSBbXTsKICAgICAgd2hpbGUgKGN1cnNvci5wb3MgPiAwKQogICAgICAgICAgdGFrZU5vZGUoZGF0YS5zdGFydCB8fCAwLCBkYXRhLmJ1ZmZlclN0YXJ0IHx8IDAsIGNoaWxkcmVuLCBwb3NpdGlvbnMsIC0xKTsKICAgICAgbGV0IGxlbmd0aCA9IChfYSA9IGRhdGEubGVuZ3RoKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAoY2hpbGRyZW4ubGVuZ3RoID8gcG9zaXRpb25zWzBdICsgY2hpbGRyZW5bMF0ubGVuZ3RoIDogMCk7CiAgICAgIHJldHVybiBuZXcgVHJlZSh0eXBlc1tkYXRhLnRvcElEXSwgY2hpbGRyZW4ucmV2ZXJzZSgpLCBwb3NpdGlvbnMucmV2ZXJzZSgpLCBsZW5ndGgpOwogIH0KICBjb25zdCBub2RlU2l6ZUNhY2hlID0gbmV3IFdlYWtNYXA7CiAgZnVuY3Rpb24gbm9kZVNpemUoYmFsYW5jZVR5cGUsIG5vZGUpIHsKICAgICAgaWYgKCFiYWxhbmNlVHlwZS5pc0Fub255bW91cyB8fCBub2RlIGluc3RhbmNlb2YgVHJlZUJ1ZmZlciB8fCBub2RlLnR5cGUgIT0gYmFsYW5jZVR5cGUpCiAgICAgICAgICByZXR1cm4gMTsKICAgICAgbGV0IHNpemUgPSBub2RlU2l6ZUNhY2hlLmdldChub2RlKTsKICAgICAgaWYgKHNpemUgPT0gbnVsbCkgewogICAgICAgICAgc2l6ZSA9IDE7CiAgICAgICAgICBmb3IgKGxldCBjaGlsZCBvZiBub2RlLmNoaWxkcmVuKSB7CiAgICAgICAgICAgICAgaWYgKGNoaWxkLnR5cGUgIT0gYmFsYW5jZVR5cGUgfHwgIShjaGlsZCBpbnN0YW5jZW9mIFRyZWUpKSB7CiAgICAgICAgICAgICAgICAgIHNpemUgPSAxOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgc2l6ZSArPSBub2RlU2l6ZShiYWxhbmNlVHlwZSwgY2hpbGQpOwogICAgICAgICAgfQogICAgICAgICAgbm9kZVNpemVDYWNoZS5zZXQobm9kZSwgc2l6ZSk7CiAgICAgIH0KICAgICAgcmV0dXJuIHNpemU7CiAgfQogIGZ1bmN0aW9uIGJhbGFuY2VSYW5nZSgKICAvLyBUaGUgdHlwZSB0aGUgYmFsYW5jZWQgdHJlZSdzIGlubmVyIG5vZGVzLgogIGJhbGFuY2VUeXBlLCAKICAvLyBUaGUgZGlyZWN0IGNoaWxkcmVuIGFuZCB0aGVpciBwb3NpdGlvbnMKICBjaGlsZHJlbiwgcG9zaXRpb25zLCAKICAvLyBUaGUgaW5kZXggcmFuZ2UgaW4gY2hpbGRyZW4vcG9zaXRpb25zIHRvIHVzZQogIGZyb20sIHRvLCAKICAvLyBUaGUgc3RhcnQgcG9zaXRpb24gb2YgdGhlIG5vZGVzLCByZWxhdGl2ZSB0byB0aGVpciBwYXJlbnQuCiAgc3RhcnQsIAogIC8vIExlbmd0aCBvZiB0aGUgb3V0ZXIgbm9kZQogIGxlbmd0aCwgCiAgLy8gRnVuY3Rpb24gdG8gYnVpbGQgdGhlIHRvcCBub2RlIG9mIHRoZSBiYWxhbmNlZCB0cmVlCiAgbWtUb3AsIAogIC8vIEZ1bmN0aW9uIHRvIGJ1aWxkIGludGVybmFsIG5vZGVzIGZvciB0aGUgYmFsYW5jZWQgdHJlZQogIG1rVHJlZSkgewogICAgICBsZXQgdG90YWwgPSAwOwogICAgICBmb3IgKGxldCBpID0gZnJvbTsgaSA8IHRvOyBpKyspCiAgICAgICAgICB0b3RhbCArPSBub2RlU2l6ZShiYWxhbmNlVHlwZSwgY2hpbGRyZW5baV0pOwogICAgICBsZXQgbWF4Q2hpbGQgPSBNYXRoLmNlaWwoKHRvdGFsICogMS41KSAvIDggLyogQnJhbmNoRmFjdG9yICovKTsKICAgICAgbGV0IGxvY2FsQ2hpbGRyZW4gPSBbXSwgbG9jYWxQb3NpdGlvbnMgPSBbXTsKICAgICAgZnVuY3Rpb24gZGl2aWRlKGNoaWxkcmVuLCBwb3NpdGlvbnMsIGZyb20sIHRvLCBvZmZzZXQpIHsKICAgICAgICAgIGZvciAobGV0IGkgPSBmcm9tOyBpIDwgdG87KSB7CiAgICAgICAgICAgICAgbGV0IGdyb3VwRnJvbSA9IGksIGdyb3VwU3RhcnQgPSBwb3NpdGlvbnNbaV0sIGdyb3VwU2l6ZSA9IG5vZGVTaXplKGJhbGFuY2VUeXBlLCBjaGlsZHJlbltpXSk7CiAgICAgICAgICAgICAgaSsrOwogICAgICAgICAgICAgIGZvciAoOyBpIDwgdG87IGkrKykgewogICAgICAgICAgICAgICAgICBsZXQgbmV4dFNpemUgPSBub2RlU2l6ZShiYWxhbmNlVHlwZSwgY2hpbGRyZW5baV0pOwogICAgICAgICAgICAgICAgICBpZiAoZ3JvdXBTaXplICsgbmV4dFNpemUgPj0gbWF4Q2hpbGQpCiAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgZ3JvdXBTaXplICs9IG5leHRTaXplOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoaSA9PSBncm91cEZyb20gKyAxKSB7CiAgICAgICAgICAgICAgICAgIGlmIChncm91cFNpemUgPiBtYXhDaGlsZCkgewogICAgICAgICAgICAgICAgICAgICAgbGV0IG9ubHkgPSBjaGlsZHJlbltncm91cEZyb21dOyAvLyBPbmx5IHRyZWVzIGNhbiBoYXZlIGEgc2l6ZSA+IDEKICAgICAgICAgICAgICAgICAgICAgIGRpdmlkZShvbmx5LmNoaWxkcmVuLCBvbmx5LnBvc2l0aW9ucywgMCwgb25seS5jaGlsZHJlbi5sZW5ndGgsIHBvc2l0aW9uc1tncm91cEZyb21dICsgb2Zmc2V0KTsKICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGxvY2FsQ2hpbGRyZW4ucHVzaChjaGlsZHJlbltncm91cEZyb21dKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgIGxldCBsZW5ndGggPSBwb3NpdGlvbnNbaSAtIDFdICsgY2hpbGRyZW5baSAtIDFdLmxlbmd0aCAtIGdyb3VwU3RhcnQ7CiAgICAgICAgICAgICAgICAgIGxvY2FsQ2hpbGRyZW4ucHVzaChiYWxhbmNlUmFuZ2UoYmFsYW5jZVR5cGUsIGNoaWxkcmVuLCBwb3NpdGlvbnMsIGdyb3VwRnJvbSwgaSwgZ3JvdXBTdGFydCwgbGVuZ3RoLCBudWxsLCBta1RyZWUpKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgbG9jYWxQb3NpdGlvbnMucHVzaChncm91cFN0YXJ0ICsgb2Zmc2V0IC0gc3RhcnQpOwogICAgICAgICAgfQogICAgICB9CiAgICAgIGRpdmlkZShjaGlsZHJlbiwgcG9zaXRpb25zLCBmcm9tLCB0bywgMCk7CiAgICAgIHJldHVybiAobWtUb3AgfHwgbWtUcmVlKShsb2NhbENoaWxkcmVuLCBsb2NhbFBvc2l0aW9ucywgbGVuZ3RoKTsKICB9CiAgLy8vIEEgc3VwZXJjbGFzcyB0aGF0IHBhcnNlcnMgc2hvdWxkIGV4dGVuZC4KICBjbGFzcyBQYXJzZXIgewogICAgICAvLy8gU3RhcnQgYSBwYXJzZSwgcmV0dXJuaW5nIGEgW3BhcnRpYWwgcGFyc2VdKCNjb21tb24uUGFydGlhbFBhcnNlKQogICAgICAvLy8gb2JqZWN0LiBbYGZyYWdtZW50c2BdKCNjb21tb24uVHJlZUZyYWdtZW50KSBjYW4gYmUgcGFzc2VkIGluIHRvCiAgICAgIC8vLyBtYWtlIHRoZSBwYXJzZSBpbmNyZW1lbnRhbC4KICAgICAgLy8vCiAgICAgIC8vLyBCeSBkZWZhdWx0LCB0aGUgZW50aXJlIGlucHV0IGlzIHBhcnNlZC4gWW91IGNhbiBwYXNzIGByYW5nZXNgLAogICAgICAvLy8gd2hpY2ggc2hvdWxkIGJlIGEgc29ydGVkIGFycmF5IG9mIG5vbi1lbXB0eSwgbm9uLW92ZXJsYXBwaW5nCiAgICAgIC8vLyByYW5nZXMsIHRvIHBhcnNlIG9ubHkgdGhvc2UgcmFuZ2VzLiBUaGUgdHJlZSByZXR1cm5lZCBpbiB0aGF0CiAgICAgIC8vLyBjYXNlIHdpbGwgc3RhcnQgYXQgYHJhbmdlc1swXS5mcm9tYC4KICAgICAgc3RhcnRQYXJzZShpbnB1dCwgZnJhZ21lbnRzLCByYW5nZXMpIHsKICAgICAgICAgIGlmICh0eXBlb2YgaW5wdXQgPT0gInN0cmluZyIpCiAgICAgICAgICAgICAgaW5wdXQgPSBuZXcgU3RyaW5nSW5wdXQoaW5wdXQpOwogICAgICAgICAgcmFuZ2VzID0gIXJhbmdlcyA/IFtuZXcgUmFuZ2UkMSgwLCBpbnB1dC5sZW5ndGgpXSA6IHJhbmdlcy5sZW5ndGggPyByYW5nZXMubWFwKHIgPT4gbmV3IFJhbmdlJDEoci5mcm9tLCByLnRvKSkgOiBbbmV3IFJhbmdlJDEoMCwgMCldOwogICAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlUGFyc2UoaW5wdXQsIGZyYWdtZW50cyB8fCBbXSwgcmFuZ2VzKTsKICAgICAgfQogICAgICAvLy8gUnVuIGEgZnVsbCBwYXJzZSwgcmV0dXJuaW5nIHRoZSByZXN1bHRpbmcgdHJlZS4KICAgICAgcGFyc2UoaW5wdXQsIGZyYWdtZW50cywgcmFuZ2VzKSB7CiAgICAgICAgICBsZXQgcGFyc2UgPSB0aGlzLnN0YXJ0UGFyc2UoaW5wdXQsIGZyYWdtZW50cywgcmFuZ2VzKTsKICAgICAgICAgIGZvciAoOzspIHsKICAgICAgICAgICAgICBsZXQgZG9uZSA9IHBhcnNlLmFkdmFuY2UoKTsKICAgICAgICAgICAgICBpZiAoZG9uZSkKICAgICAgICAgICAgICAgICAgcmV0dXJuIGRvbmU7CiAgICAgICAgICB9CiAgICAgIH0KICB9CiAgY2xhc3MgU3RyaW5nSW5wdXQgewogICAgICBjb25zdHJ1Y3RvcihzdHJpbmcpIHsKICAgICAgICAgIHRoaXMuc3RyaW5nID0gc3RyaW5nOwogICAgICB9CiAgICAgIGdldCBsZW5ndGgoKSB7IHJldHVybiB0aGlzLnN0cmluZy5sZW5ndGg7IH0KICAgICAgY2h1bmsoZnJvbSkgeyByZXR1cm4gdGhpcy5zdHJpbmcuc2xpY2UoZnJvbSk7IH0KICAgICAgZ2V0IGxpbmVDaHVua3MoKSB7IHJldHVybiBmYWxzZTsgfQogICAgICByZWFkKGZyb20sIHRvKSB7IHJldHVybiB0aGlzLnN0cmluZy5zbGljZShmcm9tLCB0byk7IH0KICB9CiAgbmV3IE5vZGVQcm9wKHsgcGVyTm9kZTogdHJ1ZSB9KTsKCiAgLy8vIEEgcGFyc2Ugc3RhY2suIFRoZXNlIGFyZSB1c2VkIGludGVybmFsbHkgYnkgdGhlIHBhcnNlciB0byB0cmFjawogIC8vLyBwYXJzaW5nIHByb2dyZXNzLiBUaGV5IGFsc28gcHJvdmlkZSBzb21lIHByb3BlcnRpZXMgYW5kIG1ldGhvZHMKICAvLy8gdGhhdCBleHRlcm5hbCBjb2RlIHN1Y2ggYXMgYSB0b2tlbml6ZXIgY2FuIHVzZSB0byBnZXQgaW5mb3JtYXRpb24KICAvLy8gYWJvdXQgdGhlIHBhcnNlIHN0YXRlLgogIGNsYXNzIFN0YWNrIHsKICAgICAgLy8vIEBpbnRlcm5hbAogICAgICBjb25zdHJ1Y3RvcigKICAgICAgLy8vIFRoZSBwYXJzZSB0aGF0IHRoaXMgc3RhY2sgaXMgcGFydCBvZiBAaW50ZXJuYWwKICAgICAgcCwgCiAgICAgIC8vLyBIb2xkcyBzdGF0ZSwgaW5wdXQgcG9zLCBidWZmZXIgaW5kZXggdHJpcGxldHMgZm9yIGFsbCBidXQgdGhlCiAgICAgIC8vLyB0b3Agc3RhdGUgQGludGVybmFsCiAgICAgIHN0YWNrLCAKICAgICAgLy8vIFRoZSBjdXJyZW50IHBhcnNlIHN0YXRlIEBpbnRlcm5hbAogICAgICBzdGF0ZSwgCiAgICAgIC8vIFRoZSBwb3NpdGlvbiBhdCB3aGljaCB0aGUgbmV4dCByZWR1Y2Ugc2hvdWxkIHRha2UgcGxhY2UuIFRoaXMKICAgICAgLy8gY2FuIGJlIGxlc3MgdGhhbiBgdGhpcy5wb3NgIHdoZW4gc2tpcHBlZCBleHByZXNzaW9ucyBoYXZlIGJlZW4KICAgICAgLy8gYWRkZWQgdG8gdGhlIHN0YWNrICh3aGljaCBzaG91bGQgYmUgbW92ZWQgb3V0c2lkZSBvZiB0aGUgbmV4dAogICAgICAvLyByZWR1Y3Rpb24pCiAgICAgIC8vLyBAaW50ZXJuYWwKICAgICAgcmVkdWNlUG9zLCAKICAgICAgLy8vIFRoZSBpbnB1dCBwb3NpdGlvbiB1cCB0byB3aGljaCB0aGlzIHN0YWNrIGhhcyBwYXJzZWQuCiAgICAgIHBvcywgCiAgICAgIC8vLyBUaGUgZHluYW1pYyBzY29yZSBvZiB0aGUgc3RhY2ssIGluY2x1ZGluZyBkeW5hbWljIHByZWNlZGVuY2UKICAgICAgLy8vIGFuZCBlcnJvci1yZWNvdmVyeSBwZW5hbHRpZXMKICAgICAgLy8vIEBpbnRlcm5hbAogICAgICBzY29yZSwgCiAgICAgIC8vIFRoZSBvdXRwdXQgYnVmZmVyLiBIb2xkcyAodHlwZSwgc3RhcnQsIGVuZCwgc2l6ZSkgcXVhZHMKICAgICAgLy8gcmVwcmVzZW50aW5nIG5vZGVzIGNyZWF0ZWQgYnkgdGhlIHBhcnNlciwgd2hlcmUgYHNpemVgIGlzCiAgICAgIC8vIGFtb3VudCBvZiBidWZmZXIgYXJyYXkgZW50cmllcyBjb3ZlcmVkIGJ5IHRoaXMgbm9kZS4KICAgICAgLy8vIEBpbnRlcm5hbAogICAgICBidWZmZXIsIAogICAgICAvLyBUaGUgYmFzZSBvZmZzZXQgb2YgdGhlIGJ1ZmZlci4gV2hlbiBzdGFja3MgYXJlIHNwbGl0LCB0aGUgc3BsaXQKICAgICAgLy8gaW5zdGFuY2Ugc2hhcmVkIHRoZSBidWZmZXIgaGlzdG9yeSB3aXRoIGl0cyBwYXJlbnQgdXAgdG8KICAgICAgLy8gYGJ1ZmZlckJhc2VgLCB3aGljaCBpcyB0aGUgYWJzb2x1dGUgb2Zmc2V0IChpbmNsdWRpbmcgdGhlCiAgICAgIC8vIG9mZnNldCBvZiBwcmV2aW91cyBzcGxpdHMpIGludG8gdGhlIGJ1ZmZlciBhdCB3aGljaCB0aGlzIHN0YWNrCiAgICAgIC8vIHN0YXJ0cyB3cml0aW5nLgogICAgICAvLy8gQGludGVybmFsCiAgICAgIGJ1ZmZlckJhc2UsIAogICAgICAvLy8gQGludGVybmFsCiAgICAgIGN1ckNvbnRleHQsIAogICAgICAvLy8gQGludGVybmFsCiAgICAgIGxvb2tBaGVhZCA9IDAsIAogICAgICAvLyBBIHBhcmVudCBzdGFjayBmcm9tIHdoaWNoIHRoaXMgd2FzIHNwbGl0IG9mZiwgaWYgYW55LiBUaGlzIGlzCiAgICAgIC8vIHNldCB1cCBzbyB0aGF0IGl0IGFsd2F5cyBwb2ludHMgdG8gYSBzdGFjayB0aGF0IGhhcyBzb21lCiAgICAgIC8vIGFkZGl0aW9uYWwgYnVmZmVyIGNvbnRlbnQsIG5ldmVyIHRvIGEgc3RhY2sgd2l0aCBhbiBlcXVhbAogICAgICAvLyBgYnVmZmVyQmFzZWAuCiAgICAgIC8vLyBAaW50ZXJuYWwKICAgICAgcGFyZW50KSB7CiAgICAgICAgICB0aGlzLnAgPSBwOwogICAgICAgICAgdGhpcy5zdGFjayA9IHN0YWNrOwogICAgICAgICAgdGhpcy5zdGF0ZSA9IHN0YXRlOwogICAgICAgICAgdGhpcy5yZWR1Y2VQb3MgPSByZWR1Y2VQb3M7CiAgICAgICAgICB0aGlzLnBvcyA9IHBvczsKICAgICAgICAgIHRoaXMuc2NvcmUgPSBzY29yZTsKICAgICAgICAgIHRoaXMuYnVmZmVyID0gYnVmZmVyOwogICAgICAgICAgdGhpcy5idWZmZXJCYXNlID0gYnVmZmVyQmFzZTsKICAgICAgICAgIHRoaXMuY3VyQ29udGV4dCA9IGN1ckNvbnRleHQ7CiAgICAgICAgICB0aGlzLmxvb2tBaGVhZCA9IGxvb2tBaGVhZDsKICAgICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50OwogICAgICB9CiAgICAgIC8vLyBAaW50ZXJuYWwKICAgICAgdG9TdHJpbmcoKSB7CiAgICAgICAgICByZXR1cm4gYFske3RoaXMuc3RhY2suZmlsdGVyKChfLCBpKSA9PiBpICUgMyA9PSAwKS5jb25jYXQodGhpcy5zdGF0ZSl9XUAke3RoaXMucG9zfSR7dGhpcy5zY29yZSA/ICIhIiArIHRoaXMuc2NvcmUgOiAiIn1gOwogICAgICB9CiAgICAgIC8vIFN0YXJ0IGFuIGVtcHR5IHN0YWNrCiAgICAgIC8vLyBAaW50ZXJuYWwKICAgICAgc3RhdGljIHN0YXJ0KHAsIHN0YXRlLCBwb3MgPSAwKSB7CiAgICAgICAgICBsZXQgY3ggPSBwLnBhcnNlci5jb250ZXh0OwogICAgICAgICAgcmV0dXJuIG5ldyBTdGFjayhwLCBbXSwgc3RhdGUsIHBvcywgcG9zLCAwLCBbXSwgMCwgY3ggPyBuZXcgU3RhY2tDb250ZXh0KGN4LCBjeC5zdGFydCkgOiBudWxsLCAwLCBudWxsKTsKICAgICAgfQogICAgICAvLy8gVGhlIHN0YWNrJ3MgY3VycmVudCBbY29udGV4dF0oI2xyLkNvbnRleHRUcmFja2VyKSB2YWx1ZSwgaWYKICAgICAgLy8vIGFueS4gSXRzIHR5cGUgd2lsbCBkZXBlbmQgb24gdGhlIGNvbnRleHQgdHJhY2tlcidzIHR5cGUKICAgICAgLy8vIHBhcmFtZXRlciwgb3IgaXQgd2lsbCBiZSBgbnVsbGAgaWYgdGhlcmUgaXMgbm8gY29udGV4dAogICAgICAvLy8gdHJhY2tlci4KICAgICAgZ2V0IGNvbnRleHQoKSB7IHJldHVybiB0aGlzLmN1ckNvbnRleHQgPyB0aGlzLmN1ckNvbnRleHQuY29udGV4dCA6IG51bGw7IH0KICAgICAgLy8gUHVzaCBhIHN0YXRlIG9udG8gdGhlIHN0YWNrLCB0cmFja2luZyBpdHMgc3RhcnQgcG9zaXRpb24gYXMgd2VsbAogICAgICAvLyBhcyB0aGUgYnVmZmVyIGJhc2UgYXQgdGhhdCBwb2ludC4KICAgICAgLy8vIEBpbnRlcm5hbAogICAgICBwdXNoU3RhdGUoc3RhdGUsIHN0YXJ0KSB7CiAgICAgICAgICB0aGlzLnN0YWNrLnB1c2godGhpcy5zdGF0ZSwgc3RhcnQsIHRoaXMuYnVmZmVyQmFzZSArIHRoaXMuYnVmZmVyLmxlbmd0aCk7CiAgICAgICAgICB0aGlzLnN0YXRlID0gc3RhdGU7CiAgICAgIH0KICAgICAgLy8gQXBwbHkgYSByZWR1Y2UgYWN0aW9uCiAgICAgIC8vLyBAaW50ZXJuYWwKICAgICAgcmVkdWNlKGFjdGlvbikgewogICAgICAgICAgbGV0IGRlcHRoID0gYWN0aW9uID4+IDE5IC8qIFJlZHVjZURlcHRoU2hpZnQgKi8sIHR5cGUgPSBhY3Rpb24gJiA2NTUzNSAvKiBWYWx1ZU1hc2sgKi87CiAgICAgICAgICBsZXQgeyBwYXJzZXIgfSA9IHRoaXMucDsKICAgICAgICAgIGxldCBkUHJlYyA9IHBhcnNlci5keW5hbWljUHJlY2VkZW5jZSh0eXBlKTsKICAgICAgICAgIGlmIChkUHJlYykKICAgICAgICAgICAgICB0aGlzLnNjb3JlICs9IGRQcmVjOwogICAgICAgICAgaWYgKGRlcHRoID09IDApIHsKICAgICAgICAgICAgICB0aGlzLnB1c2hTdGF0ZShwYXJzZXIuZ2V0R290byh0aGlzLnN0YXRlLCB0eXBlLCB0cnVlKSwgdGhpcy5yZWR1Y2VQb3MpOwogICAgICAgICAgICAgIC8vIFplcm8tZGVwdGggcmVkdWN0aW9ucyBhcmUgYSBzcGVjaWFsIGNhc2XigJR0aGV5IGFkZCBzdHVmZiB0bwogICAgICAgICAgICAgIC8vIHRoZSBzdGFjayB3aXRob3V0IHBvcHBpbmcgYW55dGhpbmcgb2ZmLgogICAgICAgICAgICAgIGlmICh0eXBlIDwgcGFyc2VyLm1pblJlcGVhdFRlcm0pCiAgICAgICAgICAgICAgICAgIHRoaXMuc3RvcmVOb2RlKHR5cGUsIHRoaXMucmVkdWNlUG9zLCB0aGlzLnJlZHVjZVBvcywgNCwgdHJ1ZSk7CiAgICAgICAgICAgICAgdGhpcy5yZWR1Y2VDb250ZXh0KHR5cGUsIHRoaXMucmVkdWNlUG9zKTsKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICAvLyBGaW5kIHRoZSBiYXNlIGluZGV4IGludG8gYHRoaXMuc3RhY2tgLCBjb250ZW50IGFmdGVyIHdoaWNoIHdpbGwKICAgICAgICAgIC8vIGJlIGRyb3BwZWQuIE5vdGUgdGhhdCB3aXRoIGBTdGF5RmxhZ2AgcmVkdWN0aW9ucyB3ZSBuZWVkIHRvCiAgICAgICAgICAvLyBjb25zdW1lIHR3byBleHRyYSBmcmFtZXMgKHRoZSBkdW1teSBwYXJlbnQgbm9kZSBmb3IgdGhlIHNraXBwZWQKICAgICAgICAgIC8vIGV4cHJlc3Npb24gYW5kIHRoZSBzdGF0ZSB0aGF0IHdlJ2xsIGJlIHN0YXlpbmcgaW4sIHdoaWNoIHNob3VsZAogICAgICAgICAgLy8gYmUgbW92ZWQgdG8gYHRoaXMuc3RhdGVgKS4KICAgICAgICAgIGxldCBiYXNlID0gdGhpcy5zdGFjay5sZW5ndGggLSAoKGRlcHRoIC0gMSkgKiAzKSAtIChhY3Rpb24gJiAyNjIxNDQgLyogU3RheUZsYWcgKi8gPyA2IDogMCk7CiAgICAgICAgICBsZXQgc3RhcnQgPSB0aGlzLnN0YWNrW2Jhc2UgLSAyXTsKICAgICAgICAgIGxldCBidWZmZXJCYXNlID0gdGhpcy5zdGFja1tiYXNlIC0gMV0sIGNvdW50ID0gdGhpcy5idWZmZXJCYXNlICsgdGhpcy5idWZmZXIubGVuZ3RoIC0gYnVmZmVyQmFzZTsKICAgICAgICAgIC8vIFN0b3JlIG5vcm1hbCB0ZXJtcyBvciBgUiAtPiBSIFJgIHJlcGVhdCByZWR1Y3Rpb25zCiAgICAgICAgICBpZiAodHlwZSA8IHBhcnNlci5taW5SZXBlYXRUZXJtIHx8IChhY3Rpb24gJiAxMzEwNzIgLyogUmVwZWF0RmxhZyAqLykpIHsKICAgICAgICAgICAgICBsZXQgcG9zID0gcGFyc2VyLnN0YXRlRmxhZyh0aGlzLnN0YXRlLCAxIC8qIFNraXBwZWQgKi8pID8gdGhpcy5wb3MgOiB0aGlzLnJlZHVjZVBvczsKICAgICAgICAgICAgICB0aGlzLnN0b3JlTm9kZSh0eXBlLCBzdGFydCwgcG9zLCBjb3VudCArIDQsIHRydWUpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGFjdGlvbiAmIDI2MjE0NCAvKiBTdGF5RmxhZyAqLykgewogICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSB0aGlzLnN0YWNrW2Jhc2VdOwogICAgICAgICAgfQogICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgbGV0IGJhc2VTdGF0ZUlEID0gdGhpcy5zdGFja1tiYXNlIC0gM107CiAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IHBhcnNlci5nZXRHb3RvKGJhc2VTdGF0ZUlELCB0eXBlLCB0cnVlKTsKICAgICAgICAgIH0KICAgICAgICAgIHdoaWxlICh0aGlzLnN0YWNrLmxlbmd0aCA+IGJhc2UpCiAgICAgICAgICAgICAgdGhpcy5zdGFjay5wb3AoKTsKICAgICAgICAgIHRoaXMucmVkdWNlQ29udGV4dCh0eXBlLCBzdGFydCk7CiAgICAgIH0KICAgICAgLy8gU2hpZnQgYSB2YWx1ZSBpbnRvIHRoZSBidWZmZXIKICAgICAgLy8vIEBpbnRlcm5hbAogICAgICBzdG9yZU5vZGUodGVybSwgc3RhcnQsIGVuZCwgc2l6ZSA9IDQsIGlzUmVkdWNlID0gZmFsc2UpIHsKICAgICAgICAgIGlmICh0ZXJtID09IDAgLyogRXJyICovICYmCiAgICAgICAgICAgICAgKCF0aGlzLnN0YWNrLmxlbmd0aCB8fCB0aGlzLnN0YWNrW3RoaXMuc3RhY2subGVuZ3RoIC0gMV0gPCB0aGlzLmJ1ZmZlci5sZW5ndGggKyB0aGlzLmJ1ZmZlckJhc2UpKSB7CiAgICAgICAgICAgICAgLy8gVHJ5IHRvIG9taXQvbWVyZ2UgYWRqYWNlbnQgZXJyb3Igbm9kZXMKICAgICAgICAgICAgICBsZXQgY3VyID0gdGhpcywgdG9wID0gdGhpcy5idWZmZXIubGVuZ3RoOwogICAgICAgICAgICAgIGlmICh0b3AgPT0gMCAmJiBjdXIucGFyZW50KSB7CiAgICAgICAgICAgICAgICAgIHRvcCA9IGN1ci5idWZmZXJCYXNlIC0gY3VyLnBhcmVudC5idWZmZXJCYXNlOwogICAgICAgICAgICAgICAgICBjdXIgPSBjdXIucGFyZW50OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAodG9wID4gMCAmJiBjdXIuYnVmZmVyW3RvcCAtIDRdID09IDAgLyogRXJyICovICYmIGN1ci5idWZmZXJbdG9wIC0gMV0gPiAtMSkgewogICAgICAgICAgICAgICAgICBpZiAoc3RhcnQgPT0gZW5kKQogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICBpZiAoY3VyLmJ1ZmZlclt0b3AgLSAyXSA+PSBzdGFydCkgewogICAgICAgICAgICAgICAgICAgICAgY3VyLmJ1ZmZlclt0b3AgLSAyXSA9IGVuZDsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGlmICghaXNSZWR1Y2UgfHwgdGhpcy5wb3MgPT0gZW5kKSB7IC8vIFNpbXBsZSBjYXNlLCBqdXN0IGFwcGVuZAogICAgICAgICAgICAgIHRoaXMuYnVmZmVyLnB1c2godGVybSwgc3RhcnQsIGVuZCwgc2l6ZSk7CiAgICAgICAgICB9CiAgICAgICAgICBlbHNlIHsgLy8gVGhlcmUgbWF5IGJlIHNraXBwZWQgbm9kZXMgdGhhdCBoYXZlIHRvIGJlIG1vdmVkIGZvcndhcmQKICAgICAgICAgICAgICBsZXQgaW5kZXggPSB0aGlzLmJ1ZmZlci5sZW5ndGg7CiAgICAgICAgICAgICAgaWYgKGluZGV4ID4gMCAmJiB0aGlzLmJ1ZmZlcltpbmRleCAtIDRdICE9IDAgLyogRXJyICovKQogICAgICAgICAgICAgICAgICB3aGlsZSAoaW5kZXggPiAwICYmIHRoaXMuYnVmZmVyW2luZGV4IC0gMl0gPiBlbmQpIHsKICAgICAgICAgICAgICAgICAgICAgIC8vIE1vdmUgdGhpcyByZWNvcmQgZm9yd2FyZAogICAgICAgICAgICAgICAgICAgICAgdGhpcy5idWZmZXJbaW5kZXhdID0gdGhpcy5idWZmZXJbaW5kZXggLSA0XTsKICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYnVmZmVyW2luZGV4ICsgMV0gPSB0aGlzLmJ1ZmZlcltpbmRleCAtIDNdOwogICAgICAgICAgICAgICAgICAgICAgdGhpcy5idWZmZXJbaW5kZXggKyAyXSA9IHRoaXMuYnVmZmVyW2luZGV4IC0gMl07CiAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJ1ZmZlcltpbmRleCArIDNdID0gdGhpcy5idWZmZXJbaW5kZXggLSAxXTsKICAgICAgICAgICAgICAgICAgICAgIGluZGV4IC09IDQ7CiAgICAgICAgICAgICAgICAgICAgICBpZiAoc2l6ZSA+IDQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZSAtPSA0OwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgdGhpcy5idWZmZXJbaW5kZXhdID0gdGVybTsKICAgICAgICAgICAgICB0aGlzLmJ1ZmZlcltpbmRleCArIDFdID0gc3RhcnQ7CiAgICAgICAgICAgICAgdGhpcy5idWZmZXJbaW5kZXggKyAyXSA9IGVuZDsKICAgICAgICAgICAgICB0aGlzLmJ1ZmZlcltpbmRleCArIDNdID0gc2l6ZTsKICAgICAgICAgIH0KICAgICAgfQogICAgICAvLyBBcHBseSBhIHNoaWZ0IGFjdGlvbgogICAgICAvLy8gQGludGVybmFsCiAgICAgIHNoaWZ0KGFjdGlvbiwgbmV4dCwgbmV4dEVuZCkgewogICAgICAgICAgbGV0IHN0YXJ0ID0gdGhpcy5wb3M7CiAgICAgICAgICBpZiAoYWN0aW9uICYgMTMxMDcyIC8qIEdvdG9GbGFnICovKSB7CiAgICAgICAgICAgICAgdGhpcy5wdXNoU3RhdGUoYWN0aW9uICYgNjU1MzUgLyogVmFsdWVNYXNrICovLCB0aGlzLnBvcyk7CiAgICAgICAgICB9CiAgICAgICAgICBlbHNlIGlmICgoYWN0aW9uICYgMjYyMTQ0IC8qIFN0YXlGbGFnICovKSA9PSAwKSB7IC8vIFJlZ3VsYXIgc2hpZnQKICAgICAgICAgICAgICBsZXQgbmV4dFN0YXRlID0gYWN0aW9uLCB7IHBhcnNlciB9ID0gdGhpcy5wOwogICAgICAgICAgICAgIGlmIChuZXh0RW5kID4gdGhpcy5wb3MgfHwgbmV4dCA8PSBwYXJzZXIubWF4Tm9kZSkgewogICAgICAgICAgICAgICAgICB0aGlzLnBvcyA9IG5leHRFbmQ7CiAgICAgICAgICAgICAgICAgIGlmICghcGFyc2VyLnN0YXRlRmxhZyhuZXh0U3RhdGUsIDEgLyogU2tpcHBlZCAqLykpCiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZHVjZVBvcyA9IG5leHRFbmQ7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHRoaXMucHVzaFN0YXRlKG5leHRTdGF0ZSwgc3RhcnQpOwogICAgICAgICAgICAgIHRoaXMuc2hpZnRDb250ZXh0KG5leHQsIHN0YXJ0KTsKICAgICAgICAgICAgICBpZiAobmV4dCA8PSBwYXJzZXIubWF4Tm9kZSkKICAgICAgICAgICAgICAgICAgdGhpcy5idWZmZXIucHVzaChuZXh0LCBzdGFydCwgbmV4dEVuZCwgNCk7CiAgICAgICAgICB9CiAgICAgICAgICBlbHNlIHsgLy8gU2hpZnQtYW5kLXN0YXksIHdoaWNoIG1lYW5zIHRoaXMgaXMgYSBza2lwcGVkIHRva2VuCiAgICAgICAgICAgICAgdGhpcy5wb3MgPSBuZXh0RW5kOwogICAgICAgICAgICAgIHRoaXMuc2hpZnRDb250ZXh0KG5leHQsIHN0YXJ0KTsKICAgICAgICAgICAgICBpZiAobmV4dCA8PSB0aGlzLnAucGFyc2VyLm1heE5vZGUpCiAgICAgICAgICAgICAgICAgIHRoaXMuYnVmZmVyLnB1c2gobmV4dCwgc3RhcnQsIG5leHRFbmQsIDQpOwogICAgICAgICAgfQogICAgICB9CiAgICAgIC8vIEFwcGx5IGFuIGFjdGlvbgogICAgICAvLy8gQGludGVybmFsCiAgICAgIGFwcGx5KGFjdGlvbiwgbmV4dCwgbmV4dEVuZCkgewogICAgICAgICAgaWYgKGFjdGlvbiAmIDY1NTM2IC8qIFJlZHVjZUZsYWcgKi8pCiAgICAgICAgICAgICAgdGhpcy5yZWR1Y2UoYWN0aW9uKTsKICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICB0aGlzLnNoaWZ0KGFjdGlvbiwgbmV4dCwgbmV4dEVuZCk7CiAgICAgIH0KICAgICAgLy8gQWRkIGEgcHJlYnVpbHQgKHJldXNlZCkgbm9kZSBpbnRvIHRoZSBidWZmZXIuCiAgICAgIC8vLyBAaW50ZXJuYWwKICAgICAgdXNlTm9kZSh2YWx1ZSwgbmV4dCkgewogICAgICAgICAgbGV0IGluZGV4ID0gdGhpcy5wLnJldXNlZC5sZW5ndGggLSAxOwogICAgICAgICAgaWYgKGluZGV4IDwgMCB8fCB0aGlzLnAucmV1c2VkW2luZGV4XSAhPSB2YWx1ZSkgewogICAgICAgICAgICAgIHRoaXMucC5yZXVzZWQucHVzaCh2YWx1ZSk7CiAgICAgICAgICAgICAgaW5kZXgrKzsKICAgICAgICAgIH0KICAgICAgICAgIGxldCBzdGFydCA9IHRoaXMucG9zOwogICAgICAgICAgdGhpcy5yZWR1Y2VQb3MgPSB0aGlzLnBvcyA9IHN0YXJ0ICsgdmFsdWUubGVuZ3RoOwogICAgICAgICAgdGhpcy5wdXNoU3RhdGUobmV4dCwgc3RhcnQpOwogICAgICAgICAgdGhpcy5idWZmZXIucHVzaChpbmRleCwgc3RhcnQsIHRoaXMucmVkdWNlUG9zLCAtMSAvKiBzaXplID09IC0xIG1lYW5zIHRoaXMgaXMgYSByZXVzZWQgdmFsdWUgKi8pOwogICAgICAgICAgaWYgKHRoaXMuY3VyQ29udGV4dCkKICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRleHQodGhpcy5jdXJDb250ZXh0LnRyYWNrZXIucmV1c2UodGhpcy5jdXJDb250ZXh0LmNvbnRleHQsIHZhbHVlLCB0aGlzLCB0aGlzLnAuc3RyZWFtLnJlc2V0KHRoaXMucG9zIC0gdmFsdWUubGVuZ3RoKSkpOwogICAgICB9CiAgICAgIC8vIFNwbGl0IHRoZSBzdGFjay4gRHVlIHRvIHRoZSBidWZmZXIgc2hhcmluZyBhbmQgdGhlIGZhY3QKICAgICAgLy8gdGhhdCBgdGhpcy5zdGFja2AgdGVuZHMgdG8gc3RheSBxdWl0ZSBzaGFsbG93LCB0aGlzIGlzbid0IHZlcnkKICAgICAgLy8gZXhwZW5zaXZlLgogICAgICAvLy8gQGludGVybmFsCiAgICAgIHNwbGl0KCkgewogICAgICAgICAgbGV0IHBhcmVudCA9IHRoaXM7CiAgICAgICAgICBsZXQgb2ZmID0gcGFyZW50LmJ1ZmZlci5sZW5ndGg7CiAgICAgICAgICAvLyBCZWNhdXNlIHRoZSB0b3Agb2YgdGhlIGJ1ZmZlciAoYWZ0ZXIgdGhpcy5wb3MpIG1heSBiZSBtdXRhdGVkCiAgICAgICAgICAvLyB0byByZW9yZGVyIHJlZHVjdGlvbnMgYW5kIHNraXBwZWQgdG9rZW5zLCBhbmQgc2hhcmVkIGJ1ZmZlcnMKICAgICAgICAgIC8vIHNob3VsZCBiZSBpbW11dGFibGUsIHRoaXMgY29waWVzIGFueSBvdXRzdGFuZGluZyBza2lwcGVkIHRva2VucwogICAgICAgICAgLy8gdG8gdGhlIG5ldyBidWZmZXIsIGFuZCBwdXRzIHRoZSBiYXNlIHBvaW50ZXIgYmVmb3JlIHRoZW0uCiAgICAgICAgICB3aGlsZSAob2ZmID4gMCAmJiBwYXJlbnQuYnVmZmVyW29mZiAtIDJdID4gcGFyZW50LnJlZHVjZVBvcykKICAgICAgICAgICAgICBvZmYgLT0gNDsKICAgICAgICAgIGxldCBidWZmZXIgPSBwYXJlbnQuYnVmZmVyLnNsaWNlKG9mZiksIGJhc2UgPSBwYXJlbnQuYnVmZmVyQmFzZSArIG9mZjsKICAgICAgICAgIC8vIE1ha2Ugc3VyZSBwYXJlbnQgcG9pbnRzIHRvIGFuIGFjdHVhbCBwYXJlbnQgd2l0aCBjb250ZW50LCBpZiB0aGVyZSBpcyBzdWNoIGEgcGFyZW50LgogICAgICAgICAgd2hpbGUgKHBhcmVudCAmJiBiYXNlID09IHBhcmVudC5idWZmZXJCYXNlKQogICAgICAgICAgICAgIHBhcmVudCA9IHBhcmVudC5wYXJlbnQ7CiAgICAgICAgICByZXR1cm4gbmV3IFN0YWNrKHRoaXMucCwgdGhpcy5zdGFjay5zbGljZSgpLCB0aGlzLnN0YXRlLCB0aGlzLnJlZHVjZVBvcywgdGhpcy5wb3MsIHRoaXMuc2NvcmUsIGJ1ZmZlciwgYmFzZSwgdGhpcy5jdXJDb250ZXh0LCB0aGlzLmxvb2tBaGVhZCwgcGFyZW50KTsKICAgICAgfQogICAgICAvLyBUcnkgdG8gcmVjb3ZlciBmcm9tIGFuIGVycm9yIGJ5ICdkZWxldGluZycgKGlnbm9yaW5nKSBvbmUgdG9rZW4uCiAgICAgIC8vLyBAaW50ZXJuYWwKICAgICAgcmVjb3ZlckJ5RGVsZXRlKG5leHQsIG5leHRFbmQpIHsKICAgICAgICAgIGxldCBpc05vZGUgPSBuZXh0IDw9IHRoaXMucC5wYXJzZXIubWF4Tm9kZTsKICAgICAgICAgIGlmIChpc05vZGUpCiAgICAgICAgICAgICAgdGhpcy5zdG9yZU5vZGUobmV4dCwgdGhpcy5wb3MsIG5leHRFbmQsIDQpOwogICAgICAgICAgdGhpcy5zdG9yZU5vZGUoMCAvKiBFcnIgKi8sIHRoaXMucG9zLCBuZXh0RW5kLCBpc05vZGUgPyA4IDogNCk7CiAgICAgICAgICB0aGlzLnBvcyA9IHRoaXMucmVkdWNlUG9zID0gbmV4dEVuZDsKICAgICAgICAgIHRoaXMuc2NvcmUgLT0gMTkwIC8qIERlbGV0ZSAqLzsKICAgICAgfQogICAgICAvLy8gQ2hlY2sgaWYgdGhlIGdpdmVuIHRlcm0gd291bGQgYmUgYWJsZSB0byBiZSBzaGlmdGVkIChvcHRpb25hbGx5CiAgICAgIC8vLyBhZnRlciBzb21lIHJlZHVjdGlvbnMpIG9uIHRoaXMgc3RhY2suIFRoaXMgY2FuIGJlIHVzZWZ1bCBmb3IKICAgICAgLy8vIGV4dGVybmFsIHRva2VuaXplcnMgdGhhdCB3YW50IHRvIG1ha2Ugc3VyZSB0aGV5IG9ubHkgcHJvdmlkZSBhCiAgICAgIC8vLyBnaXZlbiB0b2tlbiB3aGVuIGl0IGFwcGxpZXMuCiAgICAgIGNhblNoaWZ0KHRlcm0pIHsKICAgICAgICAgIGZvciAobGV0IHNpbSA9IG5ldyBTaW11bGF0ZWRTdGFjayh0aGlzKTs7KSB7CiAgICAgICAgICAgICAgbGV0IGFjdGlvbiA9IHRoaXMucC5wYXJzZXIuc3RhdGVTbG90KHNpbS5zdGF0ZSwgNCAvKiBEZWZhdWx0UmVkdWNlICovKSB8fCB0aGlzLnAucGFyc2VyLmhhc0FjdGlvbihzaW0uc3RhdGUsIHRlcm0pOwogICAgICAgICAgICAgIGlmIChhY3Rpb24gPT0gMCkKICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgIGlmICgoYWN0aW9uICYgNjU1MzYgLyogUmVkdWNlRmxhZyAqLykgPT0gMCkKICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgc2ltLnJlZHVjZShhY3Rpb24pOwogICAgICAgICAgfQogICAgICB9CiAgICAgIC8vIEFwcGx5IHVwIHRvIFJlY292ZXIuTWF4TmV4dCByZWNvdmVyeSBhY3Rpb25zIHRoYXQgY29uY2VwdHVhbGx5CiAgICAgIC8vIGluc2VydHMgc29tZSBtaXNzaW5nIHRva2VuIG9yIHJ1bGUuCiAgICAgIC8vLyBAaW50ZXJuYWwKICAgICAgcmVjb3ZlckJ5SW5zZXJ0KG5leHQpIHsKICAgICAgICAgIGlmICh0aGlzLnN0YWNrLmxlbmd0aCA+PSAzMDAgLyogTWF4SW5zZXJ0U3RhY2tEZXB0aCAqLykKICAgICAgICAgICAgICByZXR1cm4gW107CiAgICAgICAgICBsZXQgbmV4dFN0YXRlcyA9IHRoaXMucC5wYXJzZXIubmV4dFN0YXRlcyh0aGlzLnN0YXRlKTsKICAgICAgICAgIGlmIChuZXh0U3RhdGVzLmxlbmd0aCA+IDQgLyogTWF4TmV4dCAqLyA8PCAxIHx8IHRoaXMuc3RhY2subGVuZ3RoID49IDEyMCAvKiBEYW1wZW5JbnNlcnRTdGFja0RlcHRoICovKSB7CiAgICAgICAgICAgICAgbGV0IGJlc3QgPSBbXTsKICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgczsgaSA8IG5leHRTdGF0ZXMubGVuZ3RoOyBpICs9IDIpIHsKICAgICAgICAgICAgICAgICAgaWYgKChzID0gbmV4dFN0YXRlc1tpICsgMV0pICE9IHRoaXMuc3RhdGUgJiYgdGhpcy5wLnBhcnNlci5oYXNBY3Rpb24ocywgbmV4dCkpCiAgICAgICAgICAgICAgICAgICAgICBiZXN0LnB1c2gobmV4dFN0YXRlc1tpXSwgcyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmICh0aGlzLnN0YWNrLmxlbmd0aCA8IDEyMCAvKiBEYW1wZW5JbnNlcnRTdGFja0RlcHRoICovKQogICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgYmVzdC5sZW5ndGggPCA0IC8qIE1heE5leHQgKi8gPDwgMSAmJiBpIDwgbmV4dFN0YXRlcy5sZW5ndGg7IGkgKz0gMikgewogICAgICAgICAgICAgICAgICAgICAgbGV0IHMgPSBuZXh0U3RhdGVzW2kgKyAxXTsKICAgICAgICAgICAgICAgICAgICAgIGlmICghYmVzdC5zb21lKCh2LCBpKSA9PiAoaSAmIDEpICYmIHYgPT0gcykpCiAgICAgICAgICAgICAgICAgICAgICAgICAgYmVzdC5wdXNoKG5leHRTdGF0ZXNbaV0sIHMpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgbmV4dFN0YXRlcyA9IGJlc3Q7CiAgICAgICAgICB9CiAgICAgICAgICBsZXQgcmVzdWx0ID0gW107CiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5leHRTdGF0ZXMubGVuZ3RoICYmIHJlc3VsdC5sZW5ndGggPCA0IC8qIE1heE5leHQgKi87IGkgKz0gMikgewogICAgICAgICAgICAgIGxldCBzID0gbmV4dFN0YXRlc1tpICsgMV07CiAgICAgICAgICAgICAgaWYgKHMgPT0gdGhpcy5zdGF0ZSkKICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgbGV0IHN0YWNrID0gdGhpcy5zcGxpdCgpOwogICAgICAgICAgICAgIHN0YWNrLnB1c2hTdGF0ZShzLCB0aGlzLnBvcyk7CiAgICAgICAgICAgICAgc3RhY2suc3RvcmVOb2RlKDAgLyogRXJyICovLCBzdGFjay5wb3MsIHN0YWNrLnBvcywgNCwgdHJ1ZSk7CiAgICAgICAgICAgICAgc3RhY2suc2hpZnRDb250ZXh0KG5leHRTdGF0ZXNbaV0sIHRoaXMucG9zKTsKICAgICAgICAgICAgICBzdGFjay5zY29yZSAtPSAyMDAgLyogSW5zZXJ0ICovOwogICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHN0YWNrKTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgIH0KICAgICAgLy8gRm9yY2UgYSByZWR1Y2UsIGlmIHBvc3NpYmxlLiBSZXR1cm4gZmFsc2UgaWYgdGhhdCBjYW4ndAogICAgICAvLyBiZSBkb25lLgogICAgICAvLy8gQGludGVybmFsCiAgICAgIGZvcmNlUmVkdWNlKCkgewogICAgICAgICAgbGV0IHJlZHVjZSA9IHRoaXMucC5wYXJzZXIuc3RhdGVTbG90KHRoaXMuc3RhdGUsIDUgLyogRm9yY2VkUmVkdWNlICovKTsKICAgICAgICAgIGlmICgocmVkdWNlICYgNjU1MzYgLyogUmVkdWNlRmxhZyAqLykgPT0gMCkKICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICBsZXQgeyBwYXJzZXIgfSA9IHRoaXMucDsKICAgICAgICAgIGlmICghcGFyc2VyLnZhbGlkQWN0aW9uKHRoaXMuc3RhdGUsIHJlZHVjZSkpIHsKICAgICAgICAgICAgICBsZXQgZGVwdGggPSByZWR1Y2UgPj4gMTkgLyogUmVkdWNlRGVwdGhTaGlmdCAqLywgdGVybSA9IHJlZHVjZSAmIDY1NTM1IC8qIFZhbHVlTWFzayAqLzsKICAgICAgICAgICAgICBsZXQgdGFyZ2V0ID0gdGhpcy5zdGFjay5sZW5ndGggLSBkZXB0aCAqIDM7CiAgICAgICAgICAgICAgaWYgKHRhcmdldCA8IDAgfHwgcGFyc2VyLmdldEdvdG8odGhpcy5zdGFja1t0YXJnZXRdLCB0ZXJtLCBmYWxzZSkgPCAwKQogICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgdGhpcy5zdG9yZU5vZGUoMCAvKiBFcnIgKi8sIHRoaXMucmVkdWNlUG9zLCB0aGlzLnJlZHVjZVBvcywgNCwgdHJ1ZSk7CiAgICAgICAgICAgICAgdGhpcy5zY29yZSAtPSAxMDAgLyogUmVkdWNlICovOwogICAgICAgICAgfQogICAgICAgICAgdGhpcy5yZWR1Y2VQb3MgPSB0aGlzLnBvczsKICAgICAgICAgIHRoaXMucmVkdWNlKHJlZHVjZSk7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgICAvLy8gQGludGVybmFsCiAgICAgIGZvcmNlQWxsKCkgewogICAgICAgICAgd2hpbGUgKCF0aGlzLnAucGFyc2VyLnN0YXRlRmxhZyh0aGlzLnN0YXRlLCAyIC8qIEFjY2VwdGluZyAqLykpIHsKICAgICAgICAgICAgICBpZiAoIXRoaXMuZm9yY2VSZWR1Y2UoKSkgewogICAgICAgICAgICAgICAgICB0aGlzLnN0b3JlTm9kZSgwIC8qIEVyciAqLywgdGhpcy5wb3MsIHRoaXMucG9zLCA0LCB0cnVlKTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH0KICAgICAgLy8vIENoZWNrIHdoZXRoZXIgdGhpcyBzdGF0ZSBoYXMgbm8gZnVydGhlciBhY3Rpb25zIChhc3N1bWVkIHRvIGJlIGEgZGlyZWN0IGRlc2NlbmRhbnQgb2YgdGhlCiAgICAgIC8vLyB0b3Agc3RhdGUsIHNpbmNlIGFueSBvdGhlciBzdGF0ZXMgbXVzdCBiZSBhYmxlIHRvIGNvbnRpbnVlCiAgICAgIC8vLyBzb21laG93KS4gQGludGVybmFsCiAgICAgIGdldCBkZWFkRW5kKCkgewogICAgICAgICAgaWYgKHRoaXMuc3RhY2subGVuZ3RoICE9IDMpCiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgbGV0IHsgcGFyc2VyIH0gPSB0aGlzLnA7CiAgICAgICAgICByZXR1cm4gcGFyc2VyLmRhdGFbcGFyc2VyLnN0YXRlU2xvdCh0aGlzLnN0YXRlLCAxIC8qIEFjdGlvbnMgKi8pXSA9PSA2NTUzNSAvKiBFbmQgKi8gJiYKICAgICAgICAgICAgICAhcGFyc2VyLnN0YXRlU2xvdCh0aGlzLnN0YXRlLCA0IC8qIERlZmF1bHRSZWR1Y2UgKi8pOwogICAgICB9CiAgICAgIC8vLyBSZXN0YXJ0IHRoZSBzdGFjayAocHV0IGl0IGJhY2sgaW4gaXRzIHN0YXJ0IHN0YXRlKS4gT25seSBzYWZlCiAgICAgIC8vLyB3aGVuIHRoaXMuc3RhY2subGVuZ3RoID09IDMgKHN0YXRlIGlzIGRpcmVjdGx5IGJlbG93IHRoZSB0b3AKICAgICAgLy8vIHN0YXRlKS4gQGludGVybmFsCiAgICAgIHJlc3RhcnQoKSB7CiAgICAgICAgICB0aGlzLnN0YXRlID0gdGhpcy5zdGFja1swXTsKICAgICAgICAgIHRoaXMuc3RhY2subGVuZ3RoID0gMDsKICAgICAgfQogICAgICAvLy8gQGludGVybmFsCiAgICAgIHNhbWVTdGF0ZShvdGhlcikgewogICAgICAgICAgaWYgKHRoaXMuc3RhdGUgIT0gb3RoZXIuc3RhdGUgfHwgdGhpcy5zdGFjay5sZW5ndGggIT0gb3RoZXIuc3RhY2subGVuZ3RoKQogICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zdGFjay5sZW5ndGg7IGkgKz0gMykKICAgICAgICAgICAgICBpZiAodGhpcy5zdGFja1tpXSAhPSBvdGhlci5zdGFja1tpXSkKICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgICAgLy8vIEdldCB0aGUgcGFyc2VyIHVzZWQgYnkgdGhpcyBzdGFjay4KICAgICAgZ2V0IHBhcnNlcigpIHsgcmV0dXJuIHRoaXMucC5wYXJzZXI7IH0KICAgICAgLy8vIFRlc3Qgd2hldGhlciBhIGdpdmVuIGRpYWxlY3QgKGJ5IG51bWVyaWMgSUQsIGFzIGV4cG9ydGVkIGZyb20KICAgICAgLy8vIHRoZSB0ZXJtcyBmaWxlKSBpcyBlbmFibGVkLgogICAgICBkaWFsZWN0RW5hYmxlZChkaWFsZWN0SUQpIHsgcmV0dXJuIHRoaXMucC5wYXJzZXIuZGlhbGVjdC5mbGFnc1tkaWFsZWN0SURdOyB9CiAgICAgIHNoaWZ0Q29udGV4dCh0ZXJtLCBzdGFydCkgewogICAgICAgICAgaWYgKHRoaXMuY3VyQ29udGV4dCkKICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRleHQodGhpcy5jdXJDb250ZXh0LnRyYWNrZXIuc2hpZnQodGhpcy5jdXJDb250ZXh0LmNvbnRleHQsIHRlcm0sIHRoaXMsIHRoaXMucC5zdHJlYW0ucmVzZXQoc3RhcnQpKSk7CiAgICAgIH0KICAgICAgcmVkdWNlQ29udGV4dCh0ZXJtLCBzdGFydCkgewogICAgICAgICAgaWYgKHRoaXMuY3VyQ29udGV4dCkKICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRleHQodGhpcy5jdXJDb250ZXh0LnRyYWNrZXIucmVkdWNlKHRoaXMuY3VyQ29udGV4dC5jb250ZXh0LCB0ZXJtLCB0aGlzLCB0aGlzLnAuc3RyZWFtLnJlc2V0KHN0YXJ0KSkpOwogICAgICB9CiAgICAgIC8vLyBAaW50ZXJuYWwKICAgICAgZW1pdENvbnRleHQoKSB7CiAgICAgICAgICBsZXQgbGFzdCA9IHRoaXMuYnVmZmVyLmxlbmd0aCAtIDE7CiAgICAgICAgICBpZiAobGFzdCA8IDAgfHwgdGhpcy5idWZmZXJbbGFzdF0gIT0gLTMpCiAgICAgICAgICAgICAgdGhpcy5idWZmZXIucHVzaCh0aGlzLmN1ckNvbnRleHQuaGFzaCwgdGhpcy5yZWR1Y2VQb3MsIHRoaXMucmVkdWNlUG9zLCAtMyk7CiAgICAgIH0KICAgICAgLy8vIEBpbnRlcm5hbAogICAgICBlbWl0TG9va0FoZWFkKCkgewogICAgICAgICAgbGV0IGxhc3QgPSB0aGlzLmJ1ZmZlci5sZW5ndGggLSAxOwogICAgICAgICAgaWYgKGxhc3QgPCAwIHx8IHRoaXMuYnVmZmVyW2xhc3RdICE9IC00KQogICAgICAgICAgICAgIHRoaXMuYnVmZmVyLnB1c2godGhpcy5sb29rQWhlYWQsIHRoaXMucmVkdWNlUG9zLCB0aGlzLnJlZHVjZVBvcywgLTQpOwogICAgICB9CiAgICAgIHVwZGF0ZUNvbnRleHQoY29udGV4dCkgewogICAgICAgICAgaWYgKGNvbnRleHQgIT0gdGhpcy5jdXJDb250ZXh0LmNvbnRleHQpIHsKICAgICAgICAgICAgICBsZXQgbmV3Q3ggPSBuZXcgU3RhY2tDb250ZXh0KHRoaXMuY3VyQ29udGV4dC50cmFja2VyLCBjb250ZXh0KTsKICAgICAgICAgICAgICBpZiAobmV3Q3guaGFzaCAhPSB0aGlzLmN1ckNvbnRleHQuaGFzaCkKICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0Q29udGV4dCgpOwogICAgICAgICAgICAgIHRoaXMuY3VyQ29udGV4dCA9IG5ld0N4OwogICAgICAgICAgfQogICAgICB9CiAgICAgIC8vLyBAaW50ZXJuYWwKICAgICAgc2V0TG9va0FoZWFkKGxvb2tBaGVhZCkgewogICAgICAgICAgaWYgKGxvb2tBaGVhZCA+IHRoaXMubG9va0FoZWFkKSB7CiAgICAgICAgICAgICAgdGhpcy5lbWl0TG9va0FoZWFkKCk7CiAgICAgICAgICAgICAgdGhpcy5sb29rQWhlYWQgPSBsb29rQWhlYWQ7CiAgICAgICAgICB9CiAgICAgIH0KICAgICAgLy8vIEBpbnRlcm5hbAogICAgICBjbG9zZSgpIHsKICAgICAgICAgIGlmICh0aGlzLmN1ckNvbnRleHQgJiYgdGhpcy5jdXJDb250ZXh0LnRyYWNrZXIuc3RyaWN0KQogICAgICAgICAgICAgIHRoaXMuZW1pdENvbnRleHQoKTsKICAgICAgICAgIGlmICh0aGlzLmxvb2tBaGVhZCA+IDApCiAgICAgICAgICAgICAgdGhpcy5lbWl0TG9va0FoZWFkKCk7CiAgICAgIH0KICB9CiAgY2xhc3MgU3RhY2tDb250ZXh0IHsKICAgICAgY29uc3RydWN0b3IodHJhY2tlciwgY29udGV4dCkgewogICAgICAgICAgdGhpcy50cmFja2VyID0gdHJhY2tlcjsKICAgICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7CiAgICAgICAgICB0aGlzLmhhc2ggPSB0cmFja2VyLnN0cmljdCA/IHRyYWNrZXIuaGFzaChjb250ZXh0KSA6IDA7CiAgICAgIH0KICB9CiAgdmFyIFJlY292ZXI7CiAgKGZ1bmN0aW9uIChSZWNvdmVyKSB7CiAgICAgIFJlY292ZXJbUmVjb3ZlclsiSW5zZXJ0Il0gPSAyMDBdID0gIkluc2VydCI7CiAgICAgIFJlY292ZXJbUmVjb3ZlclsiRGVsZXRlIl0gPSAxOTBdID0gIkRlbGV0ZSI7CiAgICAgIFJlY292ZXJbUmVjb3ZlclsiUmVkdWNlIl0gPSAxMDBdID0gIlJlZHVjZSI7CiAgICAgIFJlY292ZXJbUmVjb3ZlclsiTWF4TmV4dCJdID0gNF0gPSAiTWF4TmV4dCI7CiAgICAgIFJlY292ZXJbUmVjb3ZlclsiTWF4SW5zZXJ0U3RhY2tEZXB0aCJdID0gMzAwXSA9ICJNYXhJbnNlcnRTdGFja0RlcHRoIjsKICAgICAgUmVjb3ZlcltSZWNvdmVyWyJEYW1wZW5JbnNlcnRTdGFja0RlcHRoIl0gPSAxMjBdID0gIkRhbXBlbkluc2VydFN0YWNrRGVwdGgiOwogIH0pKFJlY292ZXIgfHwgKFJlY292ZXIgPSB7fSkpOwogIC8vIFVzZWQgdG8gY2hlYXBseSBydW4gc29tZSByZWR1Y3Rpb25zIHRvIHNjYW4gYWhlYWQgd2l0aG91dCBtdXRhdGluZwogIC8vIGFuIGVudGlyZSBzdGFjawogIGNsYXNzIFNpbXVsYXRlZFN0YWNrIHsKICAgICAgY29uc3RydWN0b3Ioc3RhcnQpIHsKICAgICAgICAgIHRoaXMuc3RhcnQgPSBzdGFydDsKICAgICAgICAgIHRoaXMuc3RhdGUgPSBzdGFydC5zdGF0ZTsKICAgICAgICAgIHRoaXMuc3RhY2sgPSBzdGFydC5zdGFjazsKICAgICAgICAgIHRoaXMuYmFzZSA9IHRoaXMuc3RhY2subGVuZ3RoOwogICAgICB9CiAgICAgIHJlZHVjZShhY3Rpb24pIHsKICAgICAgICAgIGxldCB0ZXJtID0gYWN0aW9uICYgNjU1MzUgLyogVmFsdWVNYXNrICovLCBkZXB0aCA9IGFjdGlvbiA+PiAxOSAvKiBSZWR1Y2VEZXB0aFNoaWZ0ICovOwogICAgICAgICAgaWYgKGRlcHRoID09IDApIHsKICAgICAgICAgICAgICBpZiAodGhpcy5zdGFjayA9PSB0aGlzLnN0YXJ0LnN0YWNrKQogICAgICAgICAgICAgICAgICB0aGlzLnN0YWNrID0gdGhpcy5zdGFjay5zbGljZSgpOwogICAgICAgICAgICAgIHRoaXMuc3RhY2sucHVzaCh0aGlzLnN0YXRlLCAwLCAwKTsKICAgICAgICAgICAgICB0aGlzLmJhc2UgKz0gMzsKICAgICAgICAgIH0KICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgIHRoaXMuYmFzZSAtPSAoZGVwdGggLSAxKSAqIDM7CiAgICAgICAgICB9CiAgICAgICAgICBsZXQgZ290byA9IHRoaXMuc3RhcnQucC5wYXJzZXIuZ2V0R290byh0aGlzLnN0YWNrW3RoaXMuYmFzZSAtIDNdLCB0ZXJtLCB0cnVlKTsKICAgICAgICAgIHRoaXMuc3RhdGUgPSBnb3RvOwogICAgICB9CiAgfQogIC8vIFRoaXMgaXMgZ2l2ZW4gdG8gYFRyZWUuYnVpbGRgIHRvIGJ1aWxkIGEgYnVmZmVyLCBhbmQgZW5jYXBzdWxhdGVzCiAgLy8gdGhlIHBhcmVudC1zdGFjay13YWxraW5nIG5lY2Vzc2FyeSB0byByZWFkIHRoZSBub2Rlcy4KICBjbGFzcyBTdGFja0J1ZmZlckN1cnNvciB7CiAgICAgIGNvbnN0cnVjdG9yKHN0YWNrLCBwb3MsIGluZGV4KSB7CiAgICAgICAgICB0aGlzLnN0YWNrID0gc3RhY2s7CiAgICAgICAgICB0aGlzLnBvcyA9IHBvczsKICAgICAgICAgIHRoaXMuaW5kZXggPSBpbmRleDsKICAgICAgICAgIHRoaXMuYnVmZmVyID0gc3RhY2suYnVmZmVyOwogICAgICAgICAgaWYgKHRoaXMuaW5kZXggPT0gMCkKICAgICAgICAgICAgICB0aGlzLm1heWJlTmV4dCgpOwogICAgICB9CiAgICAgIHN0YXRpYyBjcmVhdGUoc3RhY2ssIHBvcyA9IHN0YWNrLmJ1ZmZlckJhc2UgKyBzdGFjay5idWZmZXIubGVuZ3RoKSB7CiAgICAgICAgICByZXR1cm4gbmV3IFN0YWNrQnVmZmVyQ3Vyc29yKHN0YWNrLCBwb3MsIHBvcyAtIHN0YWNrLmJ1ZmZlckJhc2UpOwogICAgICB9CiAgICAgIG1heWJlTmV4dCgpIHsKICAgICAgICAgIGxldCBuZXh0ID0gdGhpcy5zdGFjay5wYXJlbnQ7CiAgICAgICAgICBpZiAobmV4dCAhPSBudWxsKSB7CiAgICAgICAgICAgICAgdGhpcy5pbmRleCA9IHRoaXMuc3RhY2suYnVmZmVyQmFzZSAtIG5leHQuYnVmZmVyQmFzZTsKICAgICAgICAgICAgICB0aGlzLnN0YWNrID0gbmV4dDsKICAgICAgICAgICAgICB0aGlzLmJ1ZmZlciA9IG5leHQuYnVmZmVyOwogICAgICAgICAgfQogICAgICB9CiAgICAgIGdldCBpZCgpIHsgcmV0dXJuIHRoaXMuYnVmZmVyW3RoaXMuaW5kZXggLSA0XTsgfQogICAgICBnZXQgc3RhcnQoKSB7IHJldHVybiB0aGlzLmJ1ZmZlclt0aGlzLmluZGV4IC0gM107IH0KICAgICAgZ2V0IGVuZCgpIHsgcmV0dXJuIHRoaXMuYnVmZmVyW3RoaXMuaW5kZXggLSAyXTsgfQogICAgICBnZXQgc2l6ZSgpIHsgcmV0dXJuIHRoaXMuYnVmZmVyW3RoaXMuaW5kZXggLSAxXTsgfQogICAgICBuZXh0KCkgewogICAgICAgICAgdGhpcy5pbmRleCAtPSA0OwogICAgICAgICAgdGhpcy5wb3MgLT0gNDsKICAgICAgICAgIGlmICh0aGlzLmluZGV4ID09IDApCiAgICAgICAgICAgICAgdGhpcy5tYXliZU5leHQoKTsKICAgICAgfQogICAgICBmb3JrKCkgewogICAgICAgICAgcmV0dXJuIG5ldyBTdGFja0J1ZmZlckN1cnNvcih0aGlzLnN0YWNrLCB0aGlzLnBvcywgdGhpcy5pbmRleCk7CiAgICAgIH0KICB9CgogIGNsYXNzIENhY2hlZFRva2VuIHsKICAgICAgY29uc3RydWN0b3IoKSB7CiAgICAgICAgICB0aGlzLnN0YXJ0ID0gLTE7CiAgICAgICAgICB0aGlzLnZhbHVlID0gLTE7CiAgICAgICAgICB0aGlzLmVuZCA9IC0xOwogICAgICAgICAgdGhpcy5leHRlbmRlZCA9IC0xOwogICAgICAgICAgdGhpcy5sb29rQWhlYWQgPSAwOwogICAgICAgICAgdGhpcy5tYXNrID0gMDsKICAgICAgICAgIHRoaXMuY29udGV4dCA9IDA7CiAgICAgIH0KICB9CiAgY29uc3QgbnVsbFRva2VuID0gbmV3IENhY2hlZFRva2VuOwogIC8vLyBbVG9rZW5pemVyc10oI2xyLkV4dGVybmFsVG9rZW5pemVyKSBpbnRlcmFjdCB3aXRoIHRoZSBpbnB1dAogIC8vLyB0aHJvdWdoIHRoaXMgaW50ZXJmYWNlLiBJdCBwcmVzZW50cyB0aGUgaW5wdXQgYXMgYSBzdHJlYW0gb2YKICAvLy8gY2hhcmFjdGVycywgdHJhY2tpbmcgbG9va2FoZWFkIGFuZCBoaWRpbmcgdGhlIGNvbXBsZXhpdHkgb2YKICAvLy8gW3Jhbmdlc10oI2NvbW1vbi5QYXJzZXIucGFyc2VecmFuZ2VzKSBmcm9tIHRva2VuaXplciBjb2RlLgogIGNsYXNzIElucHV0U3RyZWFtIHsKICAgICAgLy8vIEBpbnRlcm5hbAogICAgICBjb25zdHJ1Y3RvcigKICAgICAgLy8vIEBpbnRlcm5hbAogICAgICBpbnB1dCwgCiAgICAgIC8vLyBAaW50ZXJuYWwKICAgICAgcmFuZ2VzKSB7CiAgICAgICAgICB0aGlzLmlucHV0ID0gaW5wdXQ7CiAgICAgICAgICB0aGlzLnJhbmdlcyA9IHJhbmdlczsKICAgICAgICAgIC8vLyBAaW50ZXJuYWwKICAgICAgICAgIHRoaXMuY2h1bmsgPSAiIjsKICAgICAgICAgIC8vLyBAaW50ZXJuYWwKICAgICAgICAgIHRoaXMuY2h1bmtPZmYgPSAwOwogICAgICAgICAgLy8vIEJhY2t1cCBjaHVuawogICAgICAgICAgdGhpcy5jaHVuazIgPSAiIjsKICAgICAgICAgIHRoaXMuY2h1bmsyUG9zID0gMDsKICAgICAgICAgIC8vLyBUaGUgY2hhcmFjdGVyIGNvZGUgb2YgdGhlIG5leHQgY29kZSB1bml0IGluIHRoZSBpbnB1dCwgb3IgLTEKICAgICAgICAgIC8vLyB3aGVuIHRoZSBzdHJlYW0gaXMgYXQgdGhlIGVuZCBvZiB0aGUgaW5wdXQuCiAgICAgICAgICB0aGlzLm5leHQgPSAtMTsKICAgICAgICAgIC8vLyBAaW50ZXJuYWwKICAgICAgICAgIHRoaXMudG9rZW4gPSBudWxsVG9rZW47CiAgICAgICAgICB0aGlzLnJhbmdlSW5kZXggPSAwOwogICAgICAgICAgdGhpcy5wb3MgPSB0aGlzLmNodW5rUG9zID0gcmFuZ2VzWzBdLmZyb207CiAgICAgICAgICB0aGlzLnJhbmdlID0gcmFuZ2VzWzBdOwogICAgICAgICAgdGhpcy5lbmQgPSByYW5nZXNbcmFuZ2VzLmxlbmd0aCAtIDFdLnRvOwogICAgICAgICAgdGhpcy5yZWFkTmV4dCgpOwogICAgICB9CiAgICAgIC8vLyBAaW50ZXJuYWwKICAgICAgcmVzb2x2ZU9mZnNldChvZmZzZXQsIGFzc29jKSB7CiAgICAgICAgICBsZXQgcmFuZ2UgPSB0aGlzLnJhbmdlLCBpbmRleCA9IHRoaXMucmFuZ2VJbmRleDsKICAgICAgICAgIGxldCBwb3MgPSB0aGlzLnBvcyArIG9mZnNldDsKICAgICAgICAgIHdoaWxlIChwb3MgPCByYW5nZS5mcm9tKSB7CiAgICAgICAgICAgICAgaWYgKCFpbmRleCkKICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgICAgbGV0IG5leHQgPSB0aGlzLnJhbmdlc1stLWluZGV4XTsKICAgICAgICAgICAgICBwb3MgLT0gcmFuZ2UuZnJvbSAtIG5leHQudG87CiAgICAgICAgICAgICAgcmFuZ2UgPSBuZXh0OwogICAgICAgICAgfQogICAgICAgICAgd2hpbGUgKGFzc29jIDwgMCA/IHBvcyA+IHJhbmdlLnRvIDogcG9zID49IHJhbmdlLnRvKSB7CiAgICAgICAgICAgICAgaWYgKGluZGV4ID09IHRoaXMucmFuZ2VzLmxlbmd0aCAtIDEpCiAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICAgIGxldCBuZXh0ID0gdGhpcy5yYW5nZXNbKytpbmRleF07CiAgICAgICAgICAgICAgcG9zICs9IG5leHQuZnJvbSAtIHJhbmdlLnRvOwogICAgICAgICAgICAgIHJhbmdlID0gbmV4dDsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBwb3M7CiAgICAgIH0KICAgICAgLy8vIEBpbnRlcm5hbAogICAgICBjbGlwUG9zKHBvcykgewogICAgICAgICAgaWYgKHBvcyA+PSB0aGlzLnJhbmdlLmZyb20gJiYgcG9zIDwgdGhpcy5yYW5nZS50bykKICAgICAgICAgICAgICByZXR1cm4gcG9zOwogICAgICAgICAgZm9yIChsZXQgcmFuZ2Ugb2YgdGhpcy5yYW5nZXMpCiAgICAgICAgICAgICAgaWYgKHJhbmdlLnRvID4gcG9zKQogICAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5tYXgocG9zLCByYW5nZS5mcm9tKTsKICAgICAgICAgIHJldHVybiB0aGlzLmVuZDsKICAgICAgfQogICAgICAvLy8gTG9vayBhdCBhIGNvZGUgdW5pdCBuZWFyIHRoZSBzdHJlYW0gcG9zaXRpb24uIGAucGVlaygwKWAgZXF1YWxzCiAgICAgIC8vLyBgLm5leHRgLCBgLnBlZWsoLTEpYCBnaXZlcyB5b3UgdGhlIHByZXZpb3VzIGNoYXJhY3RlciwgYW5kIHNvCiAgICAgIC8vLyBvbi4KICAgICAgLy8vCiAgICAgIC8vLyBOb3RlIHRoYXQgbG9va2luZyBhcm91bmQgZHVyaW5nIHRva2VuaXppbmcgY3JlYXRlcyBkZXBlbmRlbmNpZXMKICAgICAgLy8vIG9uIHBvdGVudGlhbGx5IGZhci1hd2F5IGNvbnRlbnQsIHdoaWNoIG1heSByZWR1Y2UgdGhlCiAgICAgIC8vLyBlZmZlY3RpdmVuZXNzIGluY3JlbWVudGFsIHBhcnNpbmfigJR3aGVuIGxvb2tpbmcgZm9yd2FyZOKAlG9yIGV2ZW4KICAgICAgLy8vIGNhdXNlIGludmFsaWQgcmVwYXJzZXMgd2hlbiBsb29raW5nIGJhY2t3YXJkIG1vcmUgdGhhbiAyNSBjb2RlCiAgICAgIC8vLyB1bml0cywgc2luY2UgdGhlIGxpYnJhcnkgZG9lcyBub3QgdHJhY2sgbG9va2JlaGluZC4KICAgICAgcGVlayhvZmZzZXQpIHsKICAgICAgICAgIGxldCBpZHggPSB0aGlzLmNodW5rT2ZmICsgb2Zmc2V0LCBwb3MsIHJlc3VsdDsKICAgICAgICAgIGlmIChpZHggPj0gMCAmJiBpZHggPCB0aGlzLmNodW5rLmxlbmd0aCkgewogICAgICAgICAgICAgIHBvcyA9IHRoaXMucG9zICsgb2Zmc2V0OwogICAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMuY2h1bmsuY2hhckNvZGVBdChpZHgpOwogICAgICAgICAgfQogICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgbGV0IHJlc29sdmVkID0gdGhpcy5yZXNvbHZlT2Zmc2V0KG9mZnNldCwgMSk7CiAgICAgICAgICAgICAgaWYgKHJlc29sdmVkID09IG51bGwpCiAgICAgICAgICAgICAgICAgIHJldHVybiAtMTsKICAgICAgICAgICAgICBwb3MgPSByZXNvbHZlZDsKICAgICAgICAgICAgICBpZiAocG9zID49IHRoaXMuY2h1bmsyUG9zICYmIHBvcyA8IHRoaXMuY2h1bmsyUG9zICsgdGhpcy5jaHVuazIubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMuY2h1bmsyLmNoYXJDb2RlQXQocG9zIC0gdGhpcy5jaHVuazJQb3MpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgbGV0IGkgPSB0aGlzLnJhbmdlSW5kZXgsIHJhbmdlID0gdGhpcy5yYW5nZTsKICAgICAgICAgICAgICAgICAgd2hpbGUgKHJhbmdlLnRvIDw9IHBvcykKICAgICAgICAgICAgICAgICAgICAgIHJhbmdlID0gdGhpcy5yYW5nZXNbKytpXTsKICAgICAgICAgICAgICAgICAgdGhpcy5jaHVuazIgPSB0aGlzLmlucHV0LmNodW5rKHRoaXMuY2h1bmsyUG9zID0gcG9zKTsKICAgICAgICAgICAgICAgICAgaWYgKHBvcyArIHRoaXMuY2h1bmsyLmxlbmd0aCA+IHJhbmdlLnRvKQogICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaHVuazIgPSB0aGlzLmNodW5rMi5zbGljZSgwLCByYW5nZS50byAtIHBvcyk7CiAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMuY2h1bmsyLmNoYXJDb2RlQXQoMCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgaWYgKHBvcyA+PSB0aGlzLnRva2VuLmxvb2tBaGVhZCkKICAgICAgICAgICAgICB0aGlzLnRva2VuLmxvb2tBaGVhZCA9IHBvcyArIDE7CiAgICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICB9CiAgICAgIC8vLyBBY2NlcHQgYSB0b2tlbi4gQnkgZGVmYXVsdCwgdGhlIGVuZCBvZiB0aGUgdG9rZW4gaXMgc2V0IHRvIHRoZQogICAgICAvLy8gY3VycmVudCBzdHJlYW0gcG9zaXRpb24sIGJ1dCB5b3UgY2FuIHBhc3MgYW4gb2Zmc2V0IChyZWxhdGl2ZSB0bwogICAgICAvLy8gdGhlIHN0cmVhbSBwb3NpdGlvbikgdG8gY2hhbmdlIHRoYXQuCiAgICAgIGFjY2VwdFRva2VuKHRva2VuLCBlbmRPZmZzZXQgPSAwKSB7CiAgICAgICAgICBsZXQgZW5kID0gZW5kT2Zmc2V0ID8gdGhpcy5yZXNvbHZlT2Zmc2V0KGVuZE9mZnNldCwgLTEpIDogdGhpcy5wb3M7CiAgICAgICAgICBpZiAoZW5kID09IG51bGwgfHwgZW5kIDwgdGhpcy50b2tlbi5zdGFydCkKICAgICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVG9rZW4gZW5kIG91dCBvZiBib3VuZHMiKTsKICAgICAgICAgIHRoaXMudG9rZW4udmFsdWUgPSB0b2tlbjsKICAgICAgICAgIHRoaXMudG9rZW4uZW5kID0gZW5kOwogICAgICB9CiAgICAgIGdldENodW5rKCkgewogICAgICAgICAgaWYgKHRoaXMucG9zID49IHRoaXMuY2h1bmsyUG9zICYmIHRoaXMucG9zIDwgdGhpcy5jaHVuazJQb3MgKyB0aGlzLmNodW5rMi5sZW5ndGgpIHsKICAgICAgICAgICAgICBsZXQgeyBjaHVuaywgY2h1bmtQb3MgfSA9IHRoaXM7CiAgICAgICAgICAgICAgdGhpcy5jaHVuayA9IHRoaXMuY2h1bmsyOwogICAgICAgICAgICAgIHRoaXMuY2h1bmtQb3MgPSB0aGlzLmNodW5rMlBvczsKICAgICAgICAgICAgICB0aGlzLmNodW5rMiA9IGNodW5rOwogICAgICAgICAgICAgIHRoaXMuY2h1bmsyUG9zID0gY2h1bmtQb3M7CiAgICAgICAgICAgICAgdGhpcy5jaHVua09mZiA9IHRoaXMucG9zIC0gdGhpcy5jaHVua1BvczsKICAgICAgICAgIH0KICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgIHRoaXMuY2h1bmsyID0gdGhpcy5jaHVuazsKICAgICAgICAgICAgICB0aGlzLmNodW5rMlBvcyA9IHRoaXMuY2h1bmtQb3M7CiAgICAgICAgICAgICAgbGV0IG5leHRDaHVuayA9IHRoaXMuaW5wdXQuY2h1bmsodGhpcy5wb3MpOwogICAgICAgICAgICAgIGxldCBlbmQgPSB0aGlzLnBvcyArIG5leHRDaHVuay5sZW5ndGg7CiAgICAgICAgICAgICAgdGhpcy5jaHVuayA9IGVuZCA+IHRoaXMucmFuZ2UudG8gPyBuZXh0Q2h1bmsuc2xpY2UoMCwgdGhpcy5yYW5nZS50byAtIHRoaXMucG9zKSA6IG5leHRDaHVuazsKICAgICAgICAgICAgICB0aGlzLmNodW5rUG9zID0gdGhpcy5wb3M7CiAgICAgICAgICAgICAgdGhpcy5jaHVua09mZiA9IDA7CiAgICAgICAgICB9CiAgICAgIH0KICAgICAgcmVhZE5leHQoKSB7CiAgICAgICAgICBpZiAodGhpcy5jaHVua09mZiA+PSB0aGlzLmNodW5rLmxlbmd0aCkgewogICAgICAgICAgICAgIHRoaXMuZ2V0Q2h1bmsoKTsKICAgICAgICAgICAgICBpZiAodGhpcy5jaHVua09mZiA9PSB0aGlzLmNodW5rLmxlbmd0aCkKICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubmV4dCA9IC0xOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHRoaXMubmV4dCA9IHRoaXMuY2h1bmsuY2hhckNvZGVBdCh0aGlzLmNodW5rT2ZmKTsKICAgICAgfQogICAgICAvLy8gTW92ZSB0aGUgc3RyZWFtIGZvcndhcmQgTiAoZGVmYXVsdHMgdG8gMSkgY29kZSB1bml0cy4gUmV0dXJucwogICAgICAvLy8gdGhlIG5ldyB2YWx1ZSBvZiBbYG5leHRgXSgjbHIuSW5wdXRTdHJlYW0ubmV4dCkuCiAgICAgIGFkdmFuY2UobiA9IDEpIHsKICAgICAgICAgIHRoaXMuY2h1bmtPZmYgKz0gbjsKICAgICAgICAgIHdoaWxlICh0aGlzLnBvcyArIG4gPj0gdGhpcy5yYW5nZS50bykgewogICAgICAgICAgICAgIGlmICh0aGlzLnJhbmdlSW5kZXggPT0gdGhpcy5yYW5nZXMubGVuZ3RoIC0gMSkKICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2V0RG9uZSgpOwogICAgICAgICAgICAgIG4gLT0gdGhpcy5yYW5nZS50byAtIHRoaXMucG9zOwogICAgICAgICAgICAgIHRoaXMucmFuZ2UgPSB0aGlzLnJhbmdlc1srK3RoaXMucmFuZ2VJbmRleF07CiAgICAgICAgICAgICAgdGhpcy5wb3MgPSB0aGlzLnJhbmdlLmZyb207CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLnBvcyArPSBuOwogICAgICAgICAgaWYgKHRoaXMucG9zID49IHRoaXMudG9rZW4ubG9va0FoZWFkKQogICAgICAgICAgICAgIHRoaXMudG9rZW4ubG9va0FoZWFkID0gdGhpcy5wb3MgKyAxOwogICAgICAgICAgcmV0dXJuIHRoaXMucmVhZE5leHQoKTsKICAgICAgfQogICAgICBzZXREb25lKCkgewogICAgICAgICAgdGhpcy5wb3MgPSB0aGlzLmNodW5rUG9zID0gdGhpcy5lbmQ7CiAgICAgICAgICB0aGlzLnJhbmdlID0gdGhpcy5yYW5nZXNbdGhpcy5yYW5nZUluZGV4ID0gdGhpcy5yYW5nZXMubGVuZ3RoIC0gMV07CiAgICAgICAgICB0aGlzLmNodW5rID0gIiI7CiAgICAgICAgICByZXR1cm4gdGhpcy5uZXh0ID0gLTE7CiAgICAgIH0KICAgICAgLy8vIEBpbnRlcm5hbAogICAgICByZXNldChwb3MsIHRva2VuKSB7CiAgICAgICAgICBpZiAodG9rZW4pIHsKICAgICAgICAgICAgICB0aGlzLnRva2VuID0gdG9rZW47CiAgICAgICAgICAgICAgdG9rZW4uc3RhcnQgPSBwb3M7CiAgICAgICAgICAgICAgdG9rZW4ubG9va0FoZWFkID0gcG9zICsgMTsKICAgICAgICAgICAgICB0b2tlbi52YWx1ZSA9IHRva2VuLmV4dGVuZGVkID0gLTE7CiAgICAgICAgICB9CiAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICB0aGlzLnRva2VuID0gbnVsbFRva2VuOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHRoaXMucG9zICE9IHBvcykgewogICAgICAgICAgICAgIHRoaXMucG9zID0gcG9zOwogICAgICAgICAgICAgIGlmIChwb3MgPT0gdGhpcy5lbmQpIHsKICAgICAgICAgICAgICAgICAgdGhpcy5zZXREb25lKCk7CiAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB3aGlsZSAocG9zIDwgdGhpcy5yYW5nZS5mcm9tKQogICAgICAgICAgICAgICAgICB0aGlzLnJhbmdlID0gdGhpcy5yYW5nZXNbLS10aGlzLnJhbmdlSW5kZXhdOwogICAgICAgICAgICAgIHdoaWxlIChwb3MgPj0gdGhpcy5yYW5nZS50bykKICAgICAgICAgICAgICAgICAgdGhpcy5yYW5nZSA9IHRoaXMucmFuZ2VzWysrdGhpcy5yYW5nZUluZGV4XTsKICAgICAgICAgICAgICBpZiAocG9zID49IHRoaXMuY2h1bmtQb3MgJiYgcG9zIDwgdGhpcy5jaHVua1BvcyArIHRoaXMuY2h1bmsubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgIHRoaXMuY2h1bmtPZmYgPSBwb3MgLSB0aGlzLmNodW5rUG9zOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgdGhpcy5jaHVuayA9ICIiOwogICAgICAgICAgICAgICAgICB0aGlzLmNodW5rT2ZmID0gMDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgdGhpcy5yZWFkTmV4dCgpOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH0KICAgICAgLy8vIEBpbnRlcm5hbAogICAgICByZWFkKGZyb20sIHRvKSB7CiAgICAgICAgICBpZiAoZnJvbSA+PSB0aGlzLmNodW5rUG9zICYmIHRvIDw9IHRoaXMuY2h1bmtQb3MgKyB0aGlzLmNodW5rLmxlbmd0aCkKICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jaHVuay5zbGljZShmcm9tIC0gdGhpcy5jaHVua1BvcywgdG8gLSB0aGlzLmNodW5rUG9zKTsKICAgICAgICAgIGlmIChmcm9tID49IHRoaXMuY2h1bmsyUG9zICYmIHRvIDw9IHRoaXMuY2h1bmsyUG9zICsgdGhpcy5jaHVuazIubGVuZ3RoKQogICAgICAgICAgICAgIHJldHVybiB0aGlzLmNodW5rMi5zbGljZShmcm9tIC0gdGhpcy5jaHVuazJQb3MsIHRvIC0gdGhpcy5jaHVuazJQb3MpOwogICAgICAgICAgaWYgKGZyb20gPj0gdGhpcy5yYW5nZS5mcm9tICYmIHRvIDw9IHRoaXMucmFuZ2UudG8pCiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5wdXQucmVhZChmcm9tLCB0byk7CiAgICAgICAgICBsZXQgcmVzdWx0ID0gIiI7CiAgICAgICAgICBmb3IgKGxldCByIG9mIHRoaXMucmFuZ2VzKSB7CiAgICAgICAgICAgICAgaWYgKHIuZnJvbSA+PSB0bykKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgaWYgKHIudG8gPiBmcm9tKQogICAgICAgICAgICAgICAgICByZXN1bHQgKz0gdGhpcy5pbnB1dC5yZWFkKE1hdGgubWF4KHIuZnJvbSwgZnJvbSksIE1hdGgubWluKHIudG8sIHRvKSk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICB9CiAgfQogIC8vLyBAaW50ZXJuYWwKICBjbGFzcyBUb2tlbkdyb3VwIHsKICAgICAgY29uc3RydWN0b3IoZGF0YSwgaWQpIHsKICAgICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7CiAgICAgICAgICB0aGlzLmlkID0gaWQ7CiAgICAgIH0KICAgICAgdG9rZW4oaW5wdXQsIHN0YWNrKSB7IHJlYWRUb2tlbih0aGlzLmRhdGEsIGlucHV0LCBzdGFjaywgdGhpcy5pZCk7IH0KICB9CiAgVG9rZW5Hcm91cC5wcm90b3R5cGUuY29udGV4dHVhbCA9IFRva2VuR3JvdXAucHJvdG90eXBlLmZhbGxiYWNrID0gVG9rZW5Hcm91cC5wcm90b3R5cGUuZXh0ZW5kID0gZmFsc2U7CiAgLy8vIGBAZXh0ZXJuYWwgdG9rZW5zYCBkZWNsYXJhdGlvbnMgaW4gdGhlIGdyYW1tYXIgc2hvdWxkIHJlc29sdmUgdG8KICAvLy8gYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy4KICBjbGFzcyBFeHRlcm5hbFRva2VuaXplciB7CiAgICAgIC8vLyBDcmVhdGUgYSB0b2tlbml6ZXIuIFRoZSBmaXJzdCBhcmd1bWVudCBpcyB0aGUgZnVuY3Rpb24gdGhhdCwKICAgICAgLy8vIGdpdmVuIGFuIGlucHV0IHN0cmVhbSwgc2NhbnMgZm9yIHRoZSB0eXBlcyBvZiB0b2tlbnMgaXQKICAgICAgLy8vIHJlY29nbml6ZXMgYXQgdGhlIHN0cmVhbSdzIHBvc2l0aW9uLCBhbmQgY2FsbHMKICAgICAgLy8vIFtgYWNjZXB0VG9rZW5gXSgjbHIuSW5wdXRTdHJlYW0uYWNjZXB0VG9rZW4pIHdoZW4gaXQgZmluZHMKICAgICAgLy8vIG9uZS4KICAgICAgY29uc3RydWN0b3IoCiAgICAgIC8vLyBAaW50ZXJuYWwKICAgICAgdG9rZW4sIG9wdGlvbnMgPSB7fSkgewogICAgICAgICAgdGhpcy50b2tlbiA9IHRva2VuOwogICAgICAgICAgdGhpcy5jb250ZXh0dWFsID0gISFvcHRpb25zLmNvbnRleHR1YWw7CiAgICAgICAgICB0aGlzLmZhbGxiYWNrID0gISFvcHRpb25zLmZhbGxiYWNrOwogICAgICAgICAgdGhpcy5leHRlbmQgPSAhIW9wdGlvbnMuZXh0ZW5kOwogICAgICB9CiAgfQogIC8vIFRva2VuaXplciBkYXRhIGlzIHN0b3JlZCBhIGJpZyB1aW50MTYgYXJyYXkgY29udGFpbmluZywgZm9yIGVhY2gKICAvLyBzdGF0ZToKICAvLwogIC8vICAtIEEgZ3JvdXAgYml0bWFzaywgaW5kaWNhdGluZyB3aGF0IHRva2VuIGdyb3VwcyBhcmUgcmVhY2hhYmxlIGZyb20KICAvLyAgICB0aGlzIHN0YXRlLCBzbyB0aGF0IHBhdGhzIHRoYXQgY2FuIG9ubHkgbGVhZCB0byB0b2tlbnMgbm90IGluCiAgLy8gICAgYW55IG9mIHRoZSBjdXJyZW50IGdyb3VwcyBjYW4gYmUgY3V0IG9mZiBlYXJseS4KICAvLwogIC8vICAtIFRoZSBwb3NpdGlvbiBvZiB0aGUgZW5kIG9mIHRoZSBzdGF0ZSdzIHNlcXVlbmNlIG9mIGFjY2VwdGluZwogIC8vICAgIHRva2VucwogIC8vCiAgLy8gIC0gVGhlIG51bWJlciBvZiBvdXRnb2luZyBlZGdlcyBmb3IgdGhlIHN0YXRlCiAgLy8KICAvLyAgLSBUaGUgYWNjZXB0aW5nIHRva2VucywgYXMgKHRva2VuIGlkLCBncm91cCBtYXNrKSBwYWlycwogIC8vCiAgLy8gIC0gVGhlIG91dGdvaW5nIGVkZ2VzLCBhcyAoc3RhcnQgY2hhcmFjdGVyLCBlbmQgY2hhcmFjdGVyLCBzdGF0ZQogIC8vICAgIGluZGV4KSB0cmlwbGVzLCB3aXRoIGVuZCBjaGFyYWN0ZXIgYmVpbmcgZXhjbHVzaXZlCiAgLy8KICAvLyBUaGlzIGZ1bmN0aW9uIGludGVycHJldHMgdGhhdCBkYXRhLCBydW5uaW5nIHRocm91Z2ggYSBzdHJlYW0gYXMKICAvLyBsb25nIGFzIG5ldyBzdGF0ZXMgd2l0aCB0aGUgYSBtYXRjaGluZyBncm91cCBtYXNrIGNhbiBiZSByZWFjaGVkLAogIC8vIGFuZCB1cGRhdGluZyBgaW5wdXQudG9rZW5gIHdoZW4gaXQgbWF0Y2hlcyBhIHRva2VuLgogIGZ1bmN0aW9uIHJlYWRUb2tlbihkYXRhLCBpbnB1dCwgc3RhY2ssIGdyb3VwKSB7CiAgICAgIGxldCBzdGF0ZSA9IDAsIGdyb3VwTWFzayA9IDEgPDwgZ3JvdXAsIHsgcGFyc2VyIH0gPSBzdGFjay5wLCB7IGRpYWxlY3QgfSA9IHBhcnNlcjsKICAgICAgc2NhbjogZm9yICg7OykgewogICAgICAgICAgaWYgKChncm91cE1hc2sgJiBkYXRhW3N0YXRlXSkgPT0gMCkKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgIGxldCBhY2NFbmQgPSBkYXRhW3N0YXRlICsgMV07CiAgICAgICAgICAvLyBDaGVjayB3aGV0aGVyIHRoaXMgc3RhdGUgY2FuIGxlYWQgdG8gYSB0b2tlbiBpbiB0aGUgY3VycmVudCBncm91cAogICAgICAgICAgLy8gQWNjZXB0IHRva2VucyBpbiB0aGlzIHN0YXRlLCBwb3NzaWJseSBvdmVyd3JpdGluZwogICAgICAgICAgLy8gbG93ZXItcHJlY2VkZW5jZSAvIHNob3J0ZXIgdG9rZW5zCiAgICAgICAgICBmb3IgKGxldCBpID0gc3RhdGUgKyAzOyBpIDwgYWNjRW5kOyBpICs9IDIpCiAgICAgICAgICAgICAgaWYgKChkYXRhW2kgKyAxXSAmIGdyb3VwTWFzaykgPiAwKSB7CiAgICAgICAgICAgICAgICAgIGxldCB0ZXJtID0gZGF0YVtpXTsKICAgICAgICAgICAgICAgICAgaWYgKGRpYWxlY3QuYWxsb3dzKHRlcm0pICYmCiAgICAgICAgICAgICAgICAgICAgICAoaW5wdXQudG9rZW4udmFsdWUgPT0gLTEgfHwgaW5wdXQudG9rZW4udmFsdWUgPT0gdGVybSB8fCBwYXJzZXIub3ZlcnJpZGVzKHRlcm0sIGlucHV0LnRva2VuLnZhbHVlKSkpIHsKICAgICAgICAgICAgICAgICAgICAgIGlucHV0LmFjY2VwdFRva2VuKHRlcm0pOwogICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICBsZXQgbmV4dCA9IGlucHV0Lm5leHQsIGxvdyA9IDAsIGhpZ2ggPSBkYXRhW3N0YXRlICsgMl07CiAgICAgICAgICAvLyBTcGVjaWFsIGNhc2UgZm9yIEVPRgogICAgICAgICAgaWYgKGlucHV0Lm5leHQgPCAwICYmIGhpZ2ggPiBsb3cgJiYgZGF0YVthY2NFbmQgKyBoaWdoICogMyAtIDNdID09IDY1NTM1IC8qIEVuZCAqLyAmJiBkYXRhW2FjY0VuZCArIGhpZ2ggKiAzIC0gM10gPT0gNjU1MzUgLyogRW5kICovKSB7CiAgICAgICAgICAgICAgc3RhdGUgPSBkYXRhW2FjY0VuZCArIGhpZ2ggKiAzIC0gMV07CiAgICAgICAgICAgICAgY29udGludWUgc2NhbjsKICAgICAgICAgIH0KICAgICAgICAgIC8vIERvIGEgYmluYXJ5IHNlYXJjaCBvbiB0aGUgc3RhdGUncyBlZGdlcwogICAgICAgICAgZm9yICg7IGxvdyA8IGhpZ2g7KSB7CiAgICAgICAgICAgICAgbGV0IG1pZCA9IChsb3cgKyBoaWdoKSA+PiAxOwogICAgICAgICAgICAgIGxldCBpbmRleCA9IGFjY0VuZCArIG1pZCArIChtaWQgPDwgMSk7CiAgICAgICAgICAgICAgbGV0IGZyb20gPSBkYXRhW2luZGV4XSwgdG8gPSBkYXRhW2luZGV4ICsgMV0gfHwgMHgxMDAwMDsKICAgICAgICAgICAgICBpZiAobmV4dCA8IGZyb20pCiAgICAgICAgICAgICAgICAgIGhpZ2ggPSBtaWQ7CiAgICAgICAgICAgICAgZWxzZSBpZiAobmV4dCA+PSB0bykKICAgICAgICAgICAgICAgICAgbG93ID0gbWlkICsgMTsKICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgc3RhdGUgPSBkYXRhW2luZGV4ICsgMl07CiAgICAgICAgICAgICAgICAgIGlucHV0LmFkdmFuY2UoKTsKICAgICAgICAgICAgICAgICAgY29udGludWUgc2NhbjsKICAgICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBicmVhazsKICAgICAgfQogIH0KCiAgLy8gU2VlIGxlemVyLWdlbmVyYXRvci9zcmMvZW5jb2RlLnRzIGZvciBjb21tZW50cyBhYm91dCB0aGUgZW5jb2RpbmcKICAvLyB1c2VkIGhlcmUKICBmdW5jdGlvbiBkZWNvZGVBcnJheShpbnB1dCwgVHlwZSA9IFVpbnQxNkFycmF5KSB7CiAgICAgIGlmICh0eXBlb2YgaW5wdXQgIT0gInN0cmluZyIpCiAgICAgICAgICByZXR1cm4gaW5wdXQ7CiAgICAgIGxldCBhcnJheSA9IG51bGw7CiAgICAgIGZvciAobGV0IHBvcyA9IDAsIG91dCA9IDA7IHBvcyA8IGlucHV0Lmxlbmd0aDspIHsKICAgICAgICAgIGxldCB2YWx1ZSA9IDA7CiAgICAgICAgICBmb3IgKDs7KSB7CiAgICAgICAgICAgICAgbGV0IG5leHQgPSBpbnB1dC5jaGFyQ29kZUF0KHBvcysrKSwgc3RvcCA9IGZhbHNlOwogICAgICAgICAgICAgIGlmIChuZXh0ID09IDEyNiAvKiBCaWdWYWxDb2RlICovKSB7CiAgICAgICAgICAgICAgICAgIHZhbHVlID0gNjU1MzUgLyogQmlnVmFsICovOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKG5leHQgPj0gOTIgLyogR2FwMiAqLykKICAgICAgICAgICAgICAgICAgbmV4dC0tOwogICAgICAgICAgICAgIGlmIChuZXh0ID49IDM0IC8qIEdhcDEgKi8pCiAgICAgICAgICAgICAgICAgIG5leHQtLTsKICAgICAgICAgICAgICBsZXQgZGlnaXQgPSBuZXh0IC0gMzIgLyogU3RhcnQgKi87CiAgICAgICAgICAgICAgaWYgKGRpZ2l0ID49IDQ2IC8qIEJhc2UgKi8pIHsKICAgICAgICAgICAgICAgICAgZGlnaXQgLT0gNDYgLyogQmFzZSAqLzsKICAgICAgICAgICAgICAgICAgc3RvcCA9IHRydWU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHZhbHVlICs9IGRpZ2l0OwogICAgICAgICAgICAgIGlmIChzdG9wKQogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB2YWx1ZSAqPSA0NiAvKiBCYXNlICovOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGFycmF5KQogICAgICAgICAgICAgIGFycmF5W291dCsrXSA9IHZhbHVlOwogICAgICAgICAgZWxzZQogICAgICAgICAgICAgIGFycmF5ID0gbmV3IFR5cGUodmFsdWUpOwogICAgICB9CiAgICAgIHJldHVybiBhcnJheTsKICB9CgogIC8vIEVudmlyb25tZW50IHZhcmlhYmxlIHVzZWQgdG8gY29udHJvbCBjb25zb2xlIG91dHB1dAogIGNvbnN0IHZlcmJvc2UgPSB0eXBlb2YgcHJvY2VzcyAhPSAidW5kZWZpbmVkIiAmJiBwcm9jZXNzLmVudiAmJiAvXGJwYXJzZVxiLy50ZXN0KHByb2Nlc3MuZW52LkxPRyk7CiAgbGV0IHN0YWNrSURzID0gbnVsbDsKICB2YXIgU2FmZXR5OwogIChmdW5jdGlvbiAoU2FmZXR5KSB7CiAgICAgIFNhZmV0eVtTYWZldHlbIk1hcmdpbiJdID0gMjVdID0gIk1hcmdpbiI7CiAgfSkoU2FmZXR5IHx8IChTYWZldHkgPSB7fSkpOwogIGZ1bmN0aW9uIGN1dEF0KHRyZWUsIHBvcywgc2lkZSkgewogICAgICBsZXQgY3Vyc29yID0gdHJlZS5jdXJzb3IoSXRlck1vZGUuSW5jbHVkZUFub255bW91cyk7CiAgICAgIGN1cnNvci5tb3ZlVG8ocG9zKTsKICAgICAgZm9yICg7OykgewogICAgICAgICAgaWYgKCEoc2lkZSA8IDAgPyBjdXJzb3IuY2hpbGRCZWZvcmUocG9zKSA6IGN1cnNvci5jaGlsZEFmdGVyKHBvcykpKQogICAgICAgICAgICAgIGZvciAoOzspIHsKICAgICAgICAgICAgICAgICAgaWYgKChzaWRlIDwgMCA/IGN1cnNvci50byA8IHBvcyA6IGN1cnNvci5mcm9tID4gcG9zKSAmJiAhY3Vyc29yLnR5cGUuaXNFcnJvcikKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzaWRlIDwgMCA/IE1hdGgubWF4KDAsIE1hdGgubWluKGN1cnNvci50byAtIDEsIHBvcyAtIDI1IC8qIE1hcmdpbiAqLykpCiAgICAgICAgICAgICAgICAgICAgICAgICAgOiBNYXRoLm1pbih0cmVlLmxlbmd0aCwgTWF0aC5tYXgoY3Vyc29yLmZyb20gKyAxLCBwb3MgKyAyNSAvKiBNYXJnaW4gKi8pKTsKICAgICAgICAgICAgICAgICAgaWYgKHNpZGUgPCAwID8gY3Vyc29yLnByZXZTaWJsaW5nKCkgOiBjdXJzb3IubmV4dFNpYmxpbmcoKSkKICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICBpZiAoIWN1cnNvci5wYXJlbnQoKSkKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzaWRlIDwgMCA/IDAgOiB0cmVlLmxlbmd0aDsKICAgICAgICAgICAgICB9CiAgICAgIH0KICB9CiAgY2xhc3MgRnJhZ21lbnRDdXJzb3IgewogICAgICBjb25zdHJ1Y3RvcihmcmFnbWVudHMsIG5vZGVTZXQpIHsKICAgICAgICAgIHRoaXMuZnJhZ21lbnRzID0gZnJhZ21lbnRzOwogICAgICAgICAgdGhpcy5ub2RlU2V0ID0gbm9kZVNldDsKICAgICAgICAgIHRoaXMuaSA9IDA7CiAgICAgICAgICB0aGlzLmZyYWdtZW50ID0gbnVsbDsKICAgICAgICAgIHRoaXMuc2FmZUZyb20gPSAtMTsKICAgICAgICAgIHRoaXMuc2FmZVRvID0gLTE7CiAgICAgICAgICB0aGlzLnRyZWVzID0gW107CiAgICAgICAgICB0aGlzLnN0YXJ0ID0gW107CiAgICAgICAgICB0aGlzLmluZGV4ID0gW107CiAgICAgICAgICB0aGlzLm5leHRGcmFnbWVudCgpOwogICAgICB9CiAgICAgIG5leHRGcmFnbWVudCgpIHsKICAgICAgICAgIGxldCBmciA9IHRoaXMuZnJhZ21lbnQgPSB0aGlzLmkgPT0gdGhpcy5mcmFnbWVudHMubGVuZ3RoID8gbnVsbCA6IHRoaXMuZnJhZ21lbnRzW3RoaXMuaSsrXTsKICAgICAgICAgIGlmIChmcikgewogICAgICAgICAgICAgIHRoaXMuc2FmZUZyb20gPSBmci5vcGVuU3RhcnQgPyBjdXRBdChmci50cmVlLCBmci5mcm9tICsgZnIub2Zmc2V0LCAxKSAtIGZyLm9mZnNldCA6IGZyLmZyb207CiAgICAgICAgICAgICAgdGhpcy5zYWZlVG8gPSBmci5vcGVuRW5kID8gY3V0QXQoZnIudHJlZSwgZnIudG8gKyBmci5vZmZzZXQsIC0xKSAtIGZyLm9mZnNldCA6IGZyLnRvOwogICAgICAgICAgICAgIHdoaWxlICh0aGlzLnRyZWVzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICB0aGlzLnRyZWVzLnBvcCgpOwogICAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0LnBvcCgpOwogICAgICAgICAgICAgICAgICB0aGlzLmluZGV4LnBvcCgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB0aGlzLnRyZWVzLnB1c2goZnIudHJlZSk7CiAgICAgICAgICAgICAgdGhpcy5zdGFydC5wdXNoKC1mci5vZmZzZXQpOwogICAgICAgICAgICAgIHRoaXMuaW5kZXgucHVzaCgwKTsKICAgICAgICAgICAgICB0aGlzLm5leHRTdGFydCA9IHRoaXMuc2FmZUZyb207CiAgICAgICAgICB9CiAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICB0aGlzLm5leHRTdGFydCA9IDFlOTsKICAgICAgICAgIH0KICAgICAgfQogICAgICAvLyBgcG9zYCBtdXN0IGJlID49IGFueSBwcmV2aW91c2x5IGdpdmVuIGBwb3NgIGZvciB0aGlzIGN1cnNvcgogICAgICBub2RlQXQocG9zKSB7CiAgICAgICAgICBpZiAocG9zIDwgdGhpcy5uZXh0U3RhcnQpCiAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICB3aGlsZSAodGhpcy5mcmFnbWVudCAmJiB0aGlzLnNhZmVUbyA8PSBwb3MpCiAgICAgICAgICAgICAgdGhpcy5uZXh0RnJhZ21lbnQoKTsKICAgICAgICAgIGlmICghdGhpcy5mcmFnbWVudCkKICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgIGZvciAoOzspIHsKICAgICAgICAgICAgICBsZXQgbGFzdCA9IHRoaXMudHJlZXMubGVuZ3RoIC0gMTsKICAgICAgICAgICAgICBpZiAobGFzdCA8IDApIHsgLy8gRW5kIG9mIHRyZWUKICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0RnJhZ21lbnQoKTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGxldCB0b3AgPSB0aGlzLnRyZWVzW2xhc3RdLCBpbmRleCA9IHRoaXMuaW5kZXhbbGFzdF07CiAgICAgICAgICAgICAgaWYgKGluZGV4ID09IHRvcC5jaGlsZHJlbi5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgdGhpcy50cmVlcy5wb3AoKTsKICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydC5wb3AoKTsKICAgICAgICAgICAgICAgICAgdGhpcy5pbmRleC5wb3AoKTsKICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGxldCBuZXh0ID0gdG9wLmNoaWxkcmVuW2luZGV4XTsKICAgICAgICAgICAgICBsZXQgc3RhcnQgPSB0aGlzLnN0YXJ0W2xhc3RdICsgdG9wLnBvc2l0aW9uc1tpbmRleF07CiAgICAgICAgICAgICAgaWYgKHN0YXJ0ID4gcG9zKSB7CiAgICAgICAgICAgICAgICAgIHRoaXMubmV4dFN0YXJ0ID0gc3RhcnQ7CiAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAobmV4dCBpbnN0YW5jZW9mIFRyZWUpIHsKICAgICAgICAgICAgICAgICAgaWYgKHN0YXJ0ID09IHBvcykgewogICAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXJ0IDwgdGhpcy5zYWZlRnJvbSkKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgIGxldCBlbmQgPSBzdGFydCArIG5leHQubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgICAgaWYgKGVuZCA8PSB0aGlzLnNhZmVUbykgewogICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBsb29rQWhlYWQgPSBuZXh0LnByb3AoTm9kZVByb3AubG9va0FoZWFkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWxvb2tBaGVhZCB8fCBlbmQgKyBsb29rQWhlYWQgPCB0aGlzLmZyYWdtZW50LnRvKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV4dDsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB0aGlzLmluZGV4W2xhc3RdKys7CiAgICAgICAgICAgICAgICAgIGlmIChzdGFydCArIG5leHQubGVuZ3RoID49IE1hdGgubWF4KHRoaXMuc2FmZUZyb20sIHBvcykpIHsgLy8gRW50ZXIgdGhpcyBub2RlCiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyZWVzLnB1c2gobmV4dCk7CiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0LnB1c2goc3RhcnQpOwogICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmRleC5wdXNoKDApOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICB0aGlzLmluZGV4W2xhc3RdKys7CiAgICAgICAgICAgICAgICAgIHRoaXMubmV4dFN0YXJ0ID0gc3RhcnQgKyBuZXh0Lmxlbmd0aDsKICAgICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgIH0KICB9CiAgY2xhc3MgVG9rZW5DYWNoZSB7CiAgICAgIGNvbnN0cnVjdG9yKHBhcnNlciwgc3RyZWFtKSB7CiAgICAgICAgICB0aGlzLnN0cmVhbSA9IHN0cmVhbTsKICAgICAgICAgIHRoaXMudG9rZW5zID0gW107CiAgICAgICAgICB0aGlzLm1haW5Ub2tlbiA9IG51bGw7CiAgICAgICAgICB0aGlzLmFjdGlvbnMgPSBbXTsKICAgICAgICAgIHRoaXMudG9rZW5zID0gcGFyc2VyLnRva2VuaXplcnMubWFwKF8gPT4gbmV3IENhY2hlZFRva2VuKTsKICAgICAgfQogICAgICBnZXRBY3Rpb25zKHN0YWNrKSB7CiAgICAgICAgICBsZXQgYWN0aW9uSW5kZXggPSAwOwogICAgICAgICAgbGV0IG1haW4gPSBudWxsOwogICAgICAgICAgbGV0IHsgcGFyc2VyIH0gPSBzdGFjay5wLCB7IHRva2VuaXplcnMgfSA9IHBhcnNlcjsKICAgICAgICAgIGxldCBtYXNrID0gcGFyc2VyLnN0YXRlU2xvdChzdGFjay5zdGF0ZSwgMyAvKiBUb2tlbml6ZXJNYXNrICovKTsKICAgICAgICAgIGxldCBjb250ZXh0ID0gc3RhY2suY3VyQ29udGV4dCA/IHN0YWNrLmN1ckNvbnRleHQuaGFzaCA6IDA7CiAgICAgICAgICBsZXQgbG9va0FoZWFkID0gMDsKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdG9rZW5pemVycy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgIGlmICgoKDEgPDwgaSkgJiBtYXNrKSA9PSAwKQogICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICBsZXQgdG9rZW5pemVyID0gdG9rZW5pemVyc1tpXSwgdG9rZW4gPSB0aGlzLnRva2Vuc1tpXTsKICAgICAgICAgICAgICBpZiAobWFpbiAmJiAhdG9rZW5pemVyLmZhbGxiYWNrKQogICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICBpZiAodG9rZW5pemVyLmNvbnRleHR1YWwgfHwgdG9rZW4uc3RhcnQgIT0gc3RhY2sucG9zIHx8IHRva2VuLm1hc2sgIT0gbWFzayB8fCB0b2tlbi5jb250ZXh0ICE9IGNvbnRleHQpIHsKICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDYWNoZWRUb2tlbih0b2tlbiwgdG9rZW5pemVyLCBzdGFjayk7CiAgICAgICAgICAgICAgICAgIHRva2VuLm1hc2sgPSBtYXNrOwogICAgICAgICAgICAgICAgICB0b2tlbi5jb250ZXh0ID0gY29udGV4dDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKHRva2VuLmxvb2tBaGVhZCA+IHRva2VuLmVuZCArIDI1IC8qIE1hcmdpbiAqLykKICAgICAgICAgICAgICAgICAgbG9va0FoZWFkID0gTWF0aC5tYXgodG9rZW4ubG9va0FoZWFkLCBsb29rQWhlYWQpOwogICAgICAgICAgICAgIGlmICh0b2tlbi52YWx1ZSAhPSAwIC8qIEVyciAqLykgewogICAgICAgICAgICAgICAgICBsZXQgc3RhcnRJbmRleCA9IGFjdGlvbkluZGV4OwogICAgICAgICAgICAgICAgICBpZiAodG9rZW4uZXh0ZW5kZWQgPiAtMSkKICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbkluZGV4ID0gdGhpcy5hZGRBY3Rpb25zKHN0YWNrLCB0b2tlbi5leHRlbmRlZCwgdG9rZW4uZW5kLCBhY3Rpb25JbmRleCk7CiAgICAgICAgICAgICAgICAgIGFjdGlvbkluZGV4ID0gdGhpcy5hZGRBY3Rpb25zKHN0YWNrLCB0b2tlbi52YWx1ZSwgdG9rZW4uZW5kLCBhY3Rpb25JbmRleCk7CiAgICAgICAgICAgICAgICAgIGlmICghdG9rZW5pemVyLmV4dGVuZCkgewogICAgICAgICAgICAgICAgICAgICAgbWFpbiA9IHRva2VuOwogICAgICAgICAgICAgICAgICAgICAgaWYgKGFjdGlvbkluZGV4ID4gc3RhcnRJbmRleCkKICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHdoaWxlICh0aGlzLmFjdGlvbnMubGVuZ3RoID4gYWN0aW9uSW5kZXgpCiAgICAgICAgICAgICAgdGhpcy5hY3Rpb25zLnBvcCgpOwogICAgICAgICAgaWYgKGxvb2tBaGVhZCkKICAgICAgICAgICAgICBzdGFjay5zZXRMb29rQWhlYWQobG9va0FoZWFkKTsKICAgICAgICAgIGlmICghbWFpbiAmJiBzdGFjay5wb3MgPT0gdGhpcy5zdHJlYW0uZW5kKSB7CiAgICAgICAgICAgICAgbWFpbiA9IG5ldyBDYWNoZWRUb2tlbjsKICAgICAgICAgICAgICBtYWluLnZhbHVlID0gc3RhY2sucC5wYXJzZXIuZW9mVGVybTsKICAgICAgICAgICAgICBtYWluLnN0YXJ0ID0gbWFpbi5lbmQgPSBzdGFjay5wb3M7CiAgICAgICAgICAgICAgYWN0aW9uSW5kZXggPSB0aGlzLmFkZEFjdGlvbnMoc3RhY2ssIG1haW4udmFsdWUsIG1haW4uZW5kLCBhY3Rpb25JbmRleCk7CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLm1haW5Ub2tlbiA9IG1haW47CiAgICAgICAgICByZXR1cm4gdGhpcy5hY3Rpb25zOwogICAgICB9CiAgICAgIGdldE1haW5Ub2tlbihzdGFjaykgewogICAgICAgICAgaWYgKHRoaXMubWFpblRva2VuKQogICAgICAgICAgICAgIHJldHVybiB0aGlzLm1haW5Ub2tlbjsKICAgICAgICAgIGxldCBtYWluID0gbmV3IENhY2hlZFRva2VuLCB7IHBvcywgcCB9ID0gc3RhY2s7CiAgICAgICAgICBtYWluLnN0YXJ0ID0gcG9zOwogICAgICAgICAgbWFpbi5lbmQgPSBNYXRoLm1pbihwb3MgKyAxLCBwLnN0cmVhbS5lbmQpOwogICAgICAgICAgbWFpbi52YWx1ZSA9IHBvcyA9PSBwLnN0cmVhbS5lbmQgPyBwLnBhcnNlci5lb2ZUZXJtIDogMCAvKiBFcnIgKi87CiAgICAgICAgICByZXR1cm4gbWFpbjsKICAgICAgfQogICAgICB1cGRhdGVDYWNoZWRUb2tlbih0b2tlbiwgdG9rZW5pemVyLCBzdGFjaykgewogICAgICAgICAgbGV0IHN0YXJ0ID0gdGhpcy5zdHJlYW0uY2xpcFBvcyhzdGFjay5wb3MpOwogICAgICAgICAgdG9rZW5pemVyLnRva2VuKHRoaXMuc3RyZWFtLnJlc2V0KHN0YXJ0LCB0b2tlbiksIHN0YWNrKTsKICAgICAgICAgIGlmICh0b2tlbi52YWx1ZSA+IC0xKSB7CiAgICAgICAgICAgICAgbGV0IHsgcGFyc2VyIH0gPSBzdGFjay5wOwogICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFyc2VyLnNwZWNpYWxpemVkLmxlbmd0aDsgaSsrKQogICAgICAgICAgICAgICAgICBpZiAocGFyc2VyLnNwZWNpYWxpemVkW2ldID09IHRva2VuLnZhbHVlKSB7CiAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVzdWx0ID0gcGFyc2VyLnNwZWNpYWxpemVyc1tpXSh0aGlzLnN0cmVhbS5yZWFkKHRva2VuLnN0YXJ0LCB0b2tlbi5lbmQpLCBzdGFjayk7CiAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0ID49IDAgJiYgc3RhY2sucC5wYXJzZXIuZGlhbGVjdC5hbGxvd3MocmVzdWx0ID4+IDEpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChyZXN1bHQgJiAxKSA9PSAwIC8qIFNwZWNpYWxpemUgKi8pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuLnZhbHVlID0gcmVzdWx0ID4+IDE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2tlbi5leHRlbmRlZCA9IHJlc3VsdCA+PiAxOwogICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICB0b2tlbi52YWx1ZSA9IDAgLyogRXJyICovOwogICAgICAgICAgICAgIHRva2VuLmVuZCA9IHRoaXMuc3RyZWFtLmNsaXBQb3Moc3RhcnQgKyAxKTsKICAgICAgICAgIH0KICAgICAgfQogICAgICBwdXRBY3Rpb24oYWN0aW9uLCB0b2tlbiwgZW5kLCBpbmRleCkgewogICAgICAgICAgLy8gRG9uJ3QgYWRkIGR1cGxpY2F0ZSBhY3Rpb25zCiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGluZGV4OyBpICs9IDMpCiAgICAgICAgICAgICAgaWYgKHRoaXMuYWN0aW9uc1tpXSA9PSBhY3Rpb24pCiAgICAgICAgICAgICAgICAgIHJldHVybiBpbmRleDsKICAgICAgICAgIHRoaXMuYWN0aW9uc1tpbmRleCsrXSA9IGFjdGlvbjsKICAgICAgICAgIHRoaXMuYWN0aW9uc1tpbmRleCsrXSA9IHRva2VuOwogICAgICAgICAgdGhpcy5hY3Rpb25zW2luZGV4KytdID0gZW5kOwogICAgICAgICAgcmV0dXJuIGluZGV4OwogICAgICB9CiAgICAgIGFkZEFjdGlvbnMoc3RhY2ssIHRva2VuLCBlbmQsIGluZGV4KSB7CiAgICAgICAgICBsZXQgeyBzdGF0ZSB9ID0gc3RhY2ssIHsgcGFyc2VyIH0gPSBzdGFjay5wLCB7IGRhdGEgfSA9IHBhcnNlcjsKICAgICAgICAgIGZvciAobGV0IHNldCA9IDA7IHNldCA8IDI7IHNldCsrKSB7CiAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IHBhcnNlci5zdGF0ZVNsb3Qoc3RhdGUsIHNldCA/IDIgLyogU2tpcCAqLyA6IDEgLyogQWN0aW9ucyAqLyk7OyBpICs9IDMpIHsKICAgICAgICAgICAgICAgICAgaWYgKGRhdGFbaV0gPT0gNjU1MzUgLyogRW5kICovKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YVtpICsgMV0gPT0gMSAvKiBOZXh0ICovKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IHBhaXIoZGF0YSwgaSArIDIpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4ID09IDAgJiYgZGF0YVtpICsgMV0gPT0gMiAvKiBPdGhlciAqLykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXggPSB0aGlzLnB1dEFjdGlvbihwYWlyKGRhdGEsIGkgKyAyKSwgdG9rZW4sIGVuZCwgaW5kZXgpOwogICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGlmIChkYXRhW2ldID09IHRva2VuKQogICAgICAgICAgICAgICAgICAgICAgaW5kZXggPSB0aGlzLnB1dEFjdGlvbihwYWlyKGRhdGEsIGkgKyAxKSwgdG9rZW4sIGVuZCwgaW5kZXgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBpbmRleDsKICAgICAgfQogIH0KICB2YXIgUmVjOwogIChmdW5jdGlvbiAoUmVjKSB7CiAgICAgIFJlY1tSZWNbIkRpc3RhbmNlIl0gPSA1XSA9ICJEaXN0YW5jZSI7CiAgICAgIFJlY1tSZWNbIk1heFJlbWFpbmluZ1BlclN0ZXAiXSA9IDNdID0gIk1heFJlbWFpbmluZ1BlclN0ZXAiOwogICAgICAvLyBXaGVuIHR3byBzdGFja3MgaGF2ZSBiZWVuIHJ1bm5pbmcgaW5kZXBlbmRlbnRseSBsb25nIGVub3VnaCB0bwogICAgICAvLyBhZGQgdGhpcyBtYW55IGVsZW1lbnRzIHRvIHRoZWlyIGJ1ZmZlcnMsIHBydW5lIG9uZS4KICAgICAgUmVjW1JlY1siTWluQnVmZmVyTGVuZ3RoUHJ1bmUiXSA9IDUwMF0gPSAiTWluQnVmZmVyTGVuZ3RoUHJ1bmUiOwogICAgICBSZWNbUmVjWyJGb3JjZVJlZHVjZUxpbWl0Il0gPSAxMF0gPSAiRm9yY2VSZWR1Y2VMaW1pdCI7CiAgICAgIC8vIE9uY2UgYSBzdGFjayByZWFjaGVzIHRoaXMgZGVwdGggKGluIC5zdGFjay5sZW5ndGgpIGZvcmNlLXJlZHVjZQogICAgICAvLyBpdCBiYWNrIHRvIEN1dFRvIHRvIGF2b2lkIGNyZWF0aW5nIHRyZWVzIHRoYXQgb3ZlcmZsb3cgdGhlIHN0YWNrCiAgICAgIC8vIG9uIHJlY3Vyc2l2ZSB0cmF2ZXJzYWwuCiAgICAgIFJlY1tSZWNbIkN1dERlcHRoIl0gPSAxNTAwMF0gPSAiQ3V0RGVwdGgiOwogICAgICBSZWNbUmVjWyJDdXRUbyJdID0gOTAwMF0gPSAiQ3V0VG8iOwogIH0pKFJlYyB8fCAoUmVjID0ge30pKTsKICBjbGFzcyBQYXJzZSB7CiAgICAgIGNvbnN0cnVjdG9yKHBhcnNlciwgaW5wdXQsIGZyYWdtZW50cywgcmFuZ2VzKSB7CiAgICAgICAgICB0aGlzLnBhcnNlciA9IHBhcnNlcjsKICAgICAgICAgIHRoaXMuaW5wdXQgPSBpbnB1dDsKICAgICAgICAgIHRoaXMucmFuZ2VzID0gcmFuZ2VzOwogICAgICAgICAgdGhpcy5yZWNvdmVyaW5nID0gMDsKICAgICAgICAgIHRoaXMubmV4dFN0YWNrSUQgPSAweDI2NTQ7IC8vIOKZlCwg4pmVLCDimZYsIOKZlywg4pmYLCDimZksIOKZoCwg4pmhLCDimaIsIOKZoywg4pmkLCDimaUsIOKZpiwg4pmnCiAgICAgICAgICB0aGlzLm1pblN0YWNrUG9zID0gMDsKICAgICAgICAgIHRoaXMucmV1c2VkID0gW107CiAgICAgICAgICB0aGlzLnN0b3BwZWRBdCA9IG51bGw7CiAgICAgICAgICB0aGlzLnN0cmVhbSA9IG5ldyBJbnB1dFN0cmVhbShpbnB1dCwgcmFuZ2VzKTsKICAgICAgICAgIHRoaXMudG9rZW5zID0gbmV3IFRva2VuQ2FjaGUocGFyc2VyLCB0aGlzLnN0cmVhbSk7CiAgICAgICAgICB0aGlzLnRvcFRlcm0gPSBwYXJzZXIudG9wWzFdOwogICAgICAgICAgbGV0IHsgZnJvbSB9ID0gcmFuZ2VzWzBdOwogICAgICAgICAgdGhpcy5zdGFja3MgPSBbU3RhY2suc3RhcnQodGhpcywgcGFyc2VyLnRvcFswXSwgZnJvbSldOwogICAgICAgICAgdGhpcy5mcmFnbWVudHMgPSBmcmFnbWVudHMubGVuZ3RoICYmIHRoaXMuc3RyZWFtLmVuZCAtIGZyb20gPiBwYXJzZXIuYnVmZmVyTGVuZ3RoICogNAogICAgICAgICAgICAgID8gbmV3IEZyYWdtZW50Q3Vyc29yKGZyYWdtZW50cywgcGFyc2VyLm5vZGVTZXQpIDogbnVsbDsKICAgICAgfQogICAgICBnZXQgcGFyc2VkUG9zKCkgewogICAgICAgICAgcmV0dXJuIHRoaXMubWluU3RhY2tQb3M7CiAgICAgIH0KICAgICAgLy8gTW92ZSB0aGUgcGFyc2VyIGZvcndhcmQuIFRoaXMgd2lsbCBwcm9jZXNzIGFsbCBwYXJzZSBzdGFja3MgYXQKICAgICAgLy8gYHRoaXMucG9zYCBhbmQgdHJ5IHRvIGFkdmFuY2UgdGhlbSB0byBhIGZ1cnRoZXIgcG9zaXRpb24uIElmIG5vCiAgICAgIC8vIHN0YWNrIGZvciBzdWNoIGEgcG9zaXRpb24gaXMgZm91bmQsIGl0J2xsIHN0YXJ0IGVycm9yLXJlY292ZXJ5LgogICAgICAvLwogICAgICAvLyBXaGVuIHRoZSBwYXJzZSBpcyBmaW5pc2hlZCwgdGhpcyB3aWxsIHJldHVybiBhIHN5bnRheCB0cmVlLiBXaGVuCiAgICAgIC8vIG5vdCwgaXQgcmV0dXJucyBgbnVsbGAuCiAgICAgIGFkdmFuY2UoKSB7CiAgICAgICAgICBsZXQgc3RhY2tzID0gdGhpcy5zdGFja3MsIHBvcyA9IHRoaXMubWluU3RhY2tQb3M7CiAgICAgICAgICAvLyBUaGlzIHdpbGwgaG9sZCBzdGFja3MgYmV5b25kIGBwb3NgLgogICAgICAgICAgbGV0IG5ld1N0YWNrcyA9IHRoaXMuc3RhY2tzID0gW107CiAgICAgICAgICBsZXQgc3RvcHBlZCwgc3RvcHBlZFRva2VuczsKICAgICAgICAgIC8vIEtlZXAgYWR2YW5jaW5nIGFueSBzdGFja3MgYXQgYHBvc2AgdW50aWwgdGhleSBlaXRoZXIgbW92ZQogICAgICAgICAgLy8gZm9yd2FyZCBvciBjYW4ndCBiZSBhZHZhbmNlZC4gR2F0aGVyIHN0YWNrcyB0aGF0IGNhbid0IGJlCiAgICAgICAgICAvLyBhZHZhbmNlZCBmdXJ0aGVyIGluIGBzdG9wcGVkYC4KICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RhY2tzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgbGV0IHN0YWNrID0gc3RhY2tzW2ldOwogICAgICAgICAgICAgIGZvciAoOzspIHsKICAgICAgICAgICAgICAgICAgdGhpcy50b2tlbnMubWFpblRva2VuID0gbnVsbDsKICAgICAgICAgICAgICAgICAgaWYgKHN0YWNrLnBvcyA+IHBvcykgewogICAgICAgICAgICAgICAgICAgICAgbmV3U3RhY2tzLnB1c2goc3RhY2spOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuYWR2YW5jZVN0YWNrKHN0YWNrLCBuZXdTdGFja3MsIHN0YWNrcykpIHsKICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgaWYgKCFzdG9wcGVkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgc3RvcHBlZCA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgICAgIHN0b3BwZWRUb2tlbnMgPSBbXTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIHN0b3BwZWQucHVzaChzdGFjayk7CiAgICAgICAgICAgICAgICAgICAgICBsZXQgdG9rID0gdGhpcy50b2tlbnMuZ2V0TWFpblRva2VuKHN0YWNrKTsKICAgICAgICAgICAgICAgICAgICAgIHN0b3BwZWRUb2tlbnMucHVzaCh0b2sudmFsdWUsIHRvay5lbmQpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGlmICghbmV3U3RhY2tzLmxlbmd0aCkgewogICAgICAgICAgICAgIGxldCBmaW5pc2hlZCA9IHN0b3BwZWQgJiYgZmluZEZpbmlzaGVkKHN0b3BwZWQpOwogICAgICAgICAgICAgIGlmIChmaW5pc2hlZCkKICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhY2tUb1RyZWUoZmluaXNoZWQpOwogICAgICAgICAgICAgIGlmICh0aGlzLnBhcnNlci5zdHJpY3QpIHsKICAgICAgICAgICAgICAgICAgaWYgKHZlcmJvc2UgJiYgc3RvcHBlZCkKICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJTdHVjayB3aXRoIHRva2VuICIgKyAodGhpcy50b2tlbnMubWFpblRva2VuID8gdGhpcy5wYXJzZXIuZ2V0TmFtZSh0aGlzLnRva2Vucy5tYWluVG9rZW4udmFsdWUpIDogIm5vbmUiKSk7CiAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBTeW50YXhFcnJvcigiTm8gcGFyc2UgYXQgIiArIHBvcyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmICghdGhpcy5yZWNvdmVyaW5nKQogICAgICAgICAgICAgICAgICB0aGlzLnJlY292ZXJpbmcgPSA1IC8qIERpc3RhbmNlICovOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHRoaXMucmVjb3ZlcmluZyAmJiBzdG9wcGVkKSB7CiAgICAgICAgICAgICAgbGV0IGZpbmlzaGVkID0gdGhpcy5zdG9wcGVkQXQgIT0gbnVsbCAmJiBzdG9wcGVkWzBdLnBvcyA+IHRoaXMuc3RvcHBlZEF0ID8gc3RvcHBlZFswXQogICAgICAgICAgICAgICAgICA6IHRoaXMucnVuUmVjb3Zlcnkoc3RvcHBlZCwgc3RvcHBlZFRva2VucywgbmV3U3RhY2tzKTsKICAgICAgICAgICAgICBpZiAoZmluaXNoZWQpCiAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YWNrVG9UcmVlKGZpbmlzaGVkLmZvcmNlQWxsKCkpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHRoaXMucmVjb3ZlcmluZykgewogICAgICAgICAgICAgIGxldCBtYXhSZW1haW5pbmcgPSB0aGlzLnJlY292ZXJpbmcgPT0gMSA/IDEgOiB0aGlzLnJlY292ZXJpbmcgKiAzIC8qIE1heFJlbWFpbmluZ1BlclN0ZXAgKi87CiAgICAgICAgICAgICAgaWYgKG5ld1N0YWNrcy5sZW5ndGggPiBtYXhSZW1haW5pbmcpIHsKICAgICAgICAgICAgICAgICAgbmV3U3RhY2tzLnNvcnQoKGEsIGIpID0+IGIuc2NvcmUgLSBhLnNjb3JlKTsKICAgICAgICAgICAgICAgICAgd2hpbGUgKG5ld1N0YWNrcy5sZW5ndGggPiBtYXhSZW1haW5pbmcpCiAgICAgICAgICAgICAgICAgICAgICBuZXdTdGFja3MucG9wKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmIChuZXdTdGFja3Muc29tZShzID0+IHMucmVkdWNlUG9zID4gcG9zKSkKICAgICAgICAgICAgICAgICAgdGhpcy5yZWNvdmVyaW5nLS07CiAgICAgICAgICB9CiAgICAgICAgICBlbHNlIGlmIChuZXdTdGFja3MubGVuZ3RoID4gMSkgewogICAgICAgICAgICAgIC8vIFBydW5lIHN0YWNrcyB0aGF0IGFyZSBpbiB0aGUgc2FtZSBzdGF0ZSwgb3IgdGhhdCBoYXZlIGJlZW4KICAgICAgICAgICAgICAvLyBydW5uaW5nIHdpdGhvdXQgc3BsaXR0aW5nIGZvciBhIHdoaWxlLCB0byBhdm9pZCBnZXR0aW5nIHN0dWNrCiAgICAgICAgICAgICAgLy8gd2l0aCBtdWx0aXBsZSBzdWNjZXNzZnVsIHN0YWNrcyBydW5uaW5nIGVuZGxlc3NseSBvbi4KICAgICAgICAgICAgICBvdXRlcjogZm9yIChsZXQgaSA9IDA7IGkgPCBuZXdTdGFja3MubGVuZ3RoIC0gMTsgaSsrKSB7CiAgICAgICAgICAgICAgICAgIGxldCBzdGFjayA9IG5ld1N0YWNrc1tpXTsKICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IGkgKyAxOyBqIDwgbmV3U3RhY2tzLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgICAgICAgICBsZXQgb3RoZXIgPSBuZXdTdGFja3Nbal07CiAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhY2suc2FtZVN0YXRlKG90aGVyKSB8fAogICAgICAgICAgICAgICAgICAgICAgICAgIHN0YWNrLmJ1ZmZlci5sZW5ndGggPiA1MDAgLyogTWluQnVmZmVyTGVuZ3RoUHJ1bmUgKi8gJiYgb3RoZXIuYnVmZmVyLmxlbmd0aCA+IDUwMCAvKiBNaW5CdWZmZXJMZW5ndGhQcnVuZSAqLykgewogICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoKHN0YWNrLnNjb3JlIC0gb3RoZXIuc2NvcmUpIHx8IChzdGFjay5idWZmZXIubGVuZ3RoIC0gb3RoZXIuYnVmZmVyLmxlbmd0aCkpID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdTdGFja3Muc3BsaWNlKGotLSwgMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdTdGFja3Muc3BsaWNlKGktLSwgMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlIG91dGVyOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHRoaXMubWluU3RhY2tQb3MgPSBuZXdTdGFja3NbMF0ucG9zOwogICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBuZXdTdGFja3MubGVuZ3RoOyBpKyspCiAgICAgICAgICAgICAgaWYgKG5ld1N0YWNrc1tpXS5wb3MgPCB0aGlzLm1pblN0YWNrUG9zKQogICAgICAgICAgICAgICAgICB0aGlzLm1pblN0YWNrUG9zID0gbmV3U3RhY2tzW2ldLnBvczsKICAgICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICAgIHN0b3BBdChwb3MpIHsKICAgICAgICAgIGlmICh0aGlzLnN0b3BwZWRBdCAhPSBudWxsICYmIHRoaXMuc3RvcHBlZEF0IDwgcG9zKQogICAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCJDYW4ndCBtb3ZlIHN0b3BwZWRBdCBmb3J3YXJkIik7CiAgICAgICAgICB0aGlzLnN0b3BwZWRBdCA9IHBvczsKICAgICAgfQogICAgICAvLyBSZXR1cm5zIGFuIHVwZGF0ZWQgdmVyc2lvbiBvZiB0aGUgZ2l2ZW4gc3RhY2ssIG9yIG51bGwgaWYgdGhlCiAgICAgIC8vIHN0YWNrIGNhbid0IGFkdmFuY2Ugbm9ybWFsbHkuIFdoZW4gYHNwbGl0YCBhbmQgYHN0YWNrc2AgYXJlCiAgICAgIC8vIGdpdmVuLCBzdGFja3Mgc3BsaXQgb2ZmIGJ5IGFtYmlndW91cyBvcGVyYXRpb25zIHdpbGwgYmUgcHVzaGVkIHRvCiAgICAgIC8vIGBzcGxpdGAsIG9yIGFkZGVkIHRvIGBzdGFja3NgIGlmIHRoZXkgbW92ZSBgcG9zYCBmb3J3YXJkLgogICAgICBhZHZhbmNlU3RhY2soc3RhY2ssIHN0YWNrcywgc3BsaXQpIHsKICAgICAgICAgIGxldCBzdGFydCA9IHN0YWNrLnBvcywgeyBwYXJzZXIgfSA9IHRoaXM7CiAgICAgICAgICBsZXQgYmFzZSA9IHZlcmJvc2UgPyB0aGlzLnN0YWNrSUQoc3RhY2spICsgIiAtPiAiIDogIiI7CiAgICAgICAgICBpZiAodGhpcy5zdG9wcGVkQXQgIT0gbnVsbCAmJiBzdGFydCA+IHRoaXMuc3RvcHBlZEF0KQogICAgICAgICAgICAgIHJldHVybiBzdGFjay5mb3JjZVJlZHVjZSgpID8gc3RhY2sgOiBudWxsOwogICAgICAgICAgaWYgKHRoaXMuZnJhZ21lbnRzKSB7CiAgICAgICAgICAgICAgbGV0IHN0cmljdEN4ID0gc3RhY2suY3VyQ29udGV4dCAmJiBzdGFjay5jdXJDb250ZXh0LnRyYWNrZXIuc3RyaWN0LCBjeEhhc2ggPSBzdHJpY3RDeCA/IHN0YWNrLmN1ckNvbnRleHQuaGFzaCA6IDA7CiAgICAgICAgICAgICAgZm9yIChsZXQgY2FjaGVkID0gdGhpcy5mcmFnbWVudHMubm9kZUF0KHN0YXJ0KTsgY2FjaGVkOykgewogICAgICAgICAgICAgICAgICBsZXQgbWF0Y2ggPSB0aGlzLnBhcnNlci5ub2RlU2V0LnR5cGVzW2NhY2hlZC50eXBlLmlkXSA9PSBjYWNoZWQudHlwZSA/IHBhcnNlci5nZXRHb3RvKHN0YWNrLnN0YXRlLCBjYWNoZWQudHlwZS5pZCkgOiAtMTsKICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoID4gLTEgJiYgY2FjaGVkLmxlbmd0aCAmJiAoIXN0cmljdEN4IHx8IChjYWNoZWQucHJvcChOb2RlUHJvcC5jb250ZXh0SGFzaCkgfHwgMCkgPT0gY3hIYXNoKSkgewogICAgICAgICAgICAgICAgICAgICAgc3RhY2sudXNlTm9kZShjYWNoZWQsIG1hdGNoKTsKICAgICAgICAgICAgICAgICAgICAgIGlmICh2ZXJib3NlKQogICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGJhc2UgKyB0aGlzLnN0YWNrSUQoc3RhY2spICsgYCAodmlhIHJldXNlIG9mICR7cGFyc2VyLmdldE5hbWUoY2FjaGVkLnR5cGUuaWQpfSlgKTsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGlmICghKGNhY2hlZCBpbnN0YW5jZW9mIFRyZWUpIHx8IGNhY2hlZC5jaGlsZHJlbi5sZW5ndGggPT0gMCB8fCBjYWNoZWQucG9zaXRpb25zWzBdID4gMCkKICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICBsZXQgaW5uZXIgPSBjYWNoZWQuY2hpbGRyZW5bMF07CiAgICAgICAgICAgICAgICAgIGlmIChpbm5lciBpbnN0YW5jZW9mIFRyZWUgJiYgY2FjaGVkLnBvc2l0aW9uc1swXSA9PSAwKQogICAgICAgICAgICAgICAgICAgICAgY2FjaGVkID0gaW5uZXI7CiAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGxldCBkZWZhdWx0UmVkdWNlID0gcGFyc2VyLnN0YXRlU2xvdChzdGFjay5zdGF0ZSwgNCAvKiBEZWZhdWx0UmVkdWNlICovKTsKICAgICAgICAgIGlmIChkZWZhdWx0UmVkdWNlID4gMCkgewogICAgICAgICAgICAgIHN0YWNrLnJlZHVjZShkZWZhdWx0UmVkdWNlKTsKICAgICAgICAgICAgICBpZiAodmVyYm9zZSkKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYmFzZSArIHRoaXMuc3RhY2tJRChzdGFjaykgKyBgICh2aWEgYWx3YXlzLXJlZHVjZSAke3BhcnNlci5nZXROYW1lKGRlZmF1bHRSZWR1Y2UgJiA2NTUzNSAvKiBWYWx1ZU1hc2sgKi8pfSlgKTsKICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChzdGFjay5zdGFjay5sZW5ndGggPj0gMTUwMDAgLyogQ3V0RGVwdGggKi8pIHsKICAgICAgICAgICAgICB3aGlsZSAoc3RhY2suc3RhY2subGVuZ3RoID4gOTAwMCAvKiBDdXRUbyAqLyAmJiBzdGFjay5mb3JjZVJlZHVjZSgpKSB7IH0KICAgICAgICAgIH0KICAgICAgICAgIGxldCBhY3Rpb25zID0gdGhpcy50b2tlbnMuZ2V0QWN0aW9ucyhzdGFjayk7CiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFjdGlvbnMubGVuZ3RoOykgewogICAgICAgICAgICAgIGxldCBhY3Rpb24gPSBhY3Rpb25zW2krK10sIHRlcm0gPSBhY3Rpb25zW2krK10sIGVuZCA9IGFjdGlvbnNbaSsrXTsKICAgICAgICAgICAgICBsZXQgbGFzdCA9IGkgPT0gYWN0aW9ucy5sZW5ndGggfHwgIXNwbGl0OwogICAgICAgICAgICAgIGxldCBsb2NhbFN0YWNrID0gbGFzdCA/IHN0YWNrIDogc3RhY2suc3BsaXQoKTsKICAgICAgICAgICAgICBsb2NhbFN0YWNrLmFwcGx5KGFjdGlvbiwgdGVybSwgZW5kKTsKICAgICAgICAgICAgICBpZiAodmVyYm9zZSkKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYmFzZSArIHRoaXMuc3RhY2tJRChsb2NhbFN0YWNrKSArIGAgKHZpYSAkeyhhY3Rpb24gJiA2NTUzNiAvKiBSZWR1Y2VGbGFnICovKSA9PSAwID8gInNoaWZ0IgogICAgICAgICAgICAgICAgICAgIDogYHJlZHVjZSBvZiAke3BhcnNlci5nZXROYW1lKGFjdGlvbiAmIDY1NTM1IC8qIFZhbHVlTWFzayAqLyl9YH0gZm9yICR7cGFyc2VyLmdldE5hbWUodGVybSl9IEAgJHtzdGFydH0ke2xvY2FsU3RhY2sgPT0gc3RhY2sgPyAiIiA6ICIsIHNwbGl0In0pYCk7CiAgICAgICAgICAgICAgaWYgKGxhc3QpCiAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgIGVsc2UgaWYgKGxvY2FsU3RhY2sucG9zID4gc3RhcnQpCiAgICAgICAgICAgICAgICAgIHN0YWNrcy5wdXNoKGxvY2FsU3RhY2spOwogICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgc3BsaXQucHVzaChsb2NhbFN0YWNrKTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICAvLyBBZHZhbmNlIGEgZ2l2ZW4gc3RhY2sgZm9yd2FyZCBhcyBmYXIgYXMgaXQgd2lsbCBnby4gUmV0dXJucyB0aGUKICAgICAgLy8gKHBvc3NpYmx5IHVwZGF0ZWQpIHN0YWNrIGlmIGl0IGdvdCBzdHVjaywgb3IgbnVsbCBpZiBpdCBtb3ZlZAogICAgICAvLyBmb3J3YXJkIGFuZCB3YXMgZ2l2ZW4gdG8gYHB1c2hTdGFja0RlZHVwYC4KICAgICAgYWR2YW5jZUZ1bGx5KHN0YWNrLCBuZXdTdGFja3MpIHsKICAgICAgICAgIGxldCBwb3MgPSBzdGFjay5wb3M7CiAgICAgICAgICBmb3IgKDs7KSB7CiAgICAgICAgICAgICAgaWYgKCF0aGlzLmFkdmFuY2VTdGFjayhzdGFjaywgbnVsbCwgbnVsbCkpCiAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICBpZiAoc3RhY2sucG9zID4gcG9zKSB7CiAgICAgICAgICAgICAgICAgIHB1c2hTdGFja0RlZHVwKHN0YWNrLCBuZXdTdGFja3MpOwogICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgIH0KICAgICAgcnVuUmVjb3Zlcnkoc3RhY2tzLCB0b2tlbnMsIG5ld1N0YWNrcykgewogICAgICAgICAgbGV0IGZpbmlzaGVkID0gbnVsbCwgcmVzdGFydGVkID0gZmFsc2U7CiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0YWNrcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgIGxldCBzdGFjayA9IHN0YWNrc1tpXSwgdG9rZW4gPSB0b2tlbnNbaSA8PCAxXSwgdG9rZW5FbmQgPSB0b2tlbnNbKGkgPDwgMSkgKyAxXTsKICAgICAgICAgICAgICBsZXQgYmFzZSA9IHZlcmJvc2UgPyB0aGlzLnN0YWNrSUQoc3RhY2spICsgIiAtPiAiIDogIiI7CiAgICAgICAgICAgICAgaWYgKHN0YWNrLmRlYWRFbmQpIHsKICAgICAgICAgICAgICAgICAgaWYgKHJlc3RhcnRlZCkKICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgICByZXN0YXJ0ZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICBzdGFjay5yZXN0YXJ0KCk7CiAgICAgICAgICAgICAgICAgIGlmICh2ZXJib3NlKQogICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYmFzZSArIHRoaXMuc3RhY2tJRChzdGFjaykgKyAiIChyZXN0YXJ0ZWQpIik7CiAgICAgICAgICAgICAgICAgIGxldCBkb25lID0gdGhpcy5hZHZhbmNlRnVsbHkoc3RhY2ssIG5ld1N0YWNrcyk7CiAgICAgICAgICAgICAgICAgIGlmIChkb25lKQogICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGxldCBmb3JjZSA9IHN0YWNrLnNwbGl0KCksIGZvcmNlQmFzZSA9IGJhc2U7CiAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGZvcmNlLmZvcmNlUmVkdWNlKCkgJiYgaiA8IDEwIC8qIEZvcmNlUmVkdWNlTGltaXQgKi87IGorKykgewogICAgICAgICAgICAgICAgICBpZiAodmVyYm9zZSkKICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGZvcmNlQmFzZSArIHRoaXMuc3RhY2tJRChmb3JjZSkgKyAiICh2aWEgZm9yY2UtcmVkdWNlKSIpOwogICAgICAgICAgICAgICAgICBsZXQgZG9uZSA9IHRoaXMuYWR2YW5jZUZ1bGx5KGZvcmNlLCBuZXdTdGFja3MpOwogICAgICAgICAgICAgICAgICBpZiAoZG9uZSkKICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICBpZiAodmVyYm9zZSkKICAgICAgICAgICAgICAgICAgICAgIGZvcmNlQmFzZSA9IHRoaXMuc3RhY2tJRChmb3JjZSkgKyAiIC0+ICI7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGZvciAobGV0IGluc2VydCBvZiBzdGFjay5yZWNvdmVyQnlJbnNlcnQodG9rZW4pKSB7CiAgICAgICAgICAgICAgICAgIGlmICh2ZXJib3NlKQogICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYmFzZSArIHRoaXMuc3RhY2tJRChpbnNlcnQpICsgIiAodmlhIHJlY292ZXItaW5zZXJ0KSIpOwogICAgICAgICAgICAgICAgICB0aGlzLmFkdmFuY2VGdWxseShpbnNlcnQsIG5ld1N0YWNrcyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmICh0aGlzLnN0cmVhbS5lbmQgPiBzdGFjay5wb3MpIHsKICAgICAgICAgICAgICAgICAgaWYgKHRva2VuRW5kID09IHN0YWNrLnBvcykgewogICAgICAgICAgICAgICAgICAgICAgdG9rZW5FbmQrKzsKICAgICAgICAgICAgICAgICAgICAgIHRva2VuID0gMCAvKiBFcnIgKi87CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgc3RhY2sucmVjb3ZlckJ5RGVsZXRlKHRva2VuLCB0b2tlbkVuZCk7CiAgICAgICAgICAgICAgICAgIGlmICh2ZXJib3NlKQogICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYmFzZSArIHRoaXMuc3RhY2tJRChzdGFjaykgKyBgICh2aWEgcmVjb3Zlci1kZWxldGUgJHt0aGlzLnBhcnNlci5nZXROYW1lKHRva2VuKX0pYCk7CiAgICAgICAgICAgICAgICAgIHB1c2hTdGFja0RlZHVwKHN0YWNrLCBuZXdTdGFja3MpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBlbHNlIGlmICghZmluaXNoZWQgfHwgZmluaXNoZWQuc2NvcmUgPCBzdGFjay5zY29yZSkgewogICAgICAgICAgICAgICAgICBmaW5pc2hlZCA9IHN0YWNrOwogICAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBmaW5pc2hlZDsKICAgICAgfQogICAgICAvLyBDb252ZXJ0IHRoZSBzdGFjaydzIGJ1ZmZlciB0byBhIHN5bnRheCB0cmVlLgogICAgICBzdGFja1RvVHJlZShzdGFjaykgewogICAgICAgICAgc3RhY2suY2xvc2UoKTsKICAgICAgICAgIHJldHVybiBUcmVlLmJ1aWxkKHsgYnVmZmVyOiBTdGFja0J1ZmZlckN1cnNvci5jcmVhdGUoc3RhY2spLAogICAgICAgICAgICAgIG5vZGVTZXQ6IHRoaXMucGFyc2VyLm5vZGVTZXQsCiAgICAgICAgICAgICAgdG9wSUQ6IHRoaXMudG9wVGVybSwKICAgICAgICAgICAgICBtYXhCdWZmZXJMZW5ndGg6IHRoaXMucGFyc2VyLmJ1ZmZlckxlbmd0aCwKICAgICAgICAgICAgICByZXVzZWQ6IHRoaXMucmV1c2VkLAogICAgICAgICAgICAgIHN0YXJ0OiB0aGlzLnJhbmdlc1swXS5mcm9tLAogICAgICAgICAgICAgIGxlbmd0aDogc3RhY2sucG9zIC0gdGhpcy5yYW5nZXNbMF0uZnJvbSwKICAgICAgICAgICAgICBtaW5SZXBlYXRUeXBlOiB0aGlzLnBhcnNlci5taW5SZXBlYXRUZXJtIH0pOwogICAgICB9CiAgICAgIHN0YWNrSUQoc3RhY2spIHsKICAgICAgICAgIGxldCBpZCA9IChzdGFja0lEcyB8fCAoc3RhY2tJRHMgPSBuZXcgV2Vha01hcCkpLmdldChzdGFjayk7CiAgICAgICAgICBpZiAoIWlkKQogICAgICAgICAgICAgIHN0YWNrSURzLnNldChzdGFjaywgaWQgPSBTdHJpbmcuZnJvbUNvZGVQb2ludCh0aGlzLm5leHRTdGFja0lEKyspKTsKICAgICAgICAgIHJldHVybiBpZCArIHN0YWNrOwogICAgICB9CiAgfQogIGZ1bmN0aW9uIHB1c2hTdGFja0RlZHVwKHN0YWNrLCBuZXdTdGFja3MpIHsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuZXdTdGFja3MubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGxldCBvdGhlciA9IG5ld1N0YWNrc1tpXTsKICAgICAgICAgIGlmIChvdGhlci5wb3MgPT0gc3RhY2sucG9zICYmIG90aGVyLnNhbWVTdGF0ZShzdGFjaykpIHsKICAgICAgICAgICAgICBpZiAobmV3U3RhY2tzW2ldLnNjb3JlIDwgc3RhY2suc2NvcmUpCiAgICAgICAgICAgICAgICAgIG5ld1N0YWNrc1tpXSA9IHN0YWNrOwogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgfQogICAgICBuZXdTdGFja3MucHVzaChzdGFjayk7CiAgfQogIGNsYXNzIERpYWxlY3QgewogICAgICBjb25zdHJ1Y3Rvcihzb3VyY2UsIGZsYWdzLCBkaXNhYmxlZCkgewogICAgICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7CiAgICAgICAgICB0aGlzLmZsYWdzID0gZmxhZ3M7CiAgICAgICAgICB0aGlzLmRpc2FibGVkID0gZGlzYWJsZWQ7CiAgICAgIH0KICAgICAgYWxsb3dzKHRlcm0pIHsgcmV0dXJuICF0aGlzLmRpc2FibGVkIHx8IHRoaXMuZGlzYWJsZWRbdGVybV0gPT0gMDsgfQogIH0KICBjb25zdCBpZCA9IHggPT4geDsKICAvLy8gQ29udGV4dCB0cmFja2VycyBhcmUgdXNlZCB0byB0cmFjayBzdGF0ZWZ1bCBjb250ZXh0IChzdWNoIGFzCiAgLy8vIGluZGVudGF0aW9uIGluIHRoZSBQeXRob24gZ3JhbW1hciwgb3IgcGFyZW50IGVsZW1lbnRzIGluIHRoZSBYTUwKICAvLy8gZ3JhbW1hcikgbmVlZGVkIGJ5IGV4dGVybmFsIHRva2VuaXplcnMuIFlvdSBkZWNsYXJlIHRoZW0gaW4gYQogIC8vLyBncmFtbWFyIGZpbGUgYXMgYEBjb250ZXh0IGV4cG9ydE5hbWUgZnJvbSAibW9kdWxlImAuCiAgLy8vCiAgLy8vIENvbnRleHQgdmFsdWVzIHNob3VsZCBiZSBpbW11dGFibGUsIGFuZCBjYW4gYmUgdXBkYXRlZCAocmVwbGFjZWQpCiAgLy8vIG9uIHNoaWZ0IG9yIHJlZHVjZSBhY3Rpb25zLgogIC8vLwogIC8vLyBUaGUgZXhwb3J0IHVzZWQgaW4gYSBgQGNvbnRleHRgIGRlY2xhcmF0aW9uIHNob3VsZCBiZSBvZiB0aGlzCiAgLy8vIHR5cGUuCiAgY2xhc3MgQ29udGV4dFRyYWNrZXIgewogICAgICAvLy8gRGVmaW5lIGEgY29udGV4dCB0cmFja2VyLgogICAgICBjb25zdHJ1Y3RvcihzcGVjKSB7CiAgICAgICAgICB0aGlzLnN0YXJ0ID0gc3BlYy5zdGFydDsKICAgICAgICAgIHRoaXMuc2hpZnQgPSBzcGVjLnNoaWZ0IHx8IGlkOwogICAgICAgICAgdGhpcy5yZWR1Y2UgPSBzcGVjLnJlZHVjZSB8fCBpZDsKICAgICAgICAgIHRoaXMucmV1c2UgPSBzcGVjLnJldXNlIHx8IGlkOwogICAgICAgICAgdGhpcy5oYXNoID0gc3BlYy5oYXNoIHx8ICgoKSA9PiAwKTsKICAgICAgICAgIHRoaXMuc3RyaWN0ID0gc3BlYy5zdHJpY3QgIT09IGZhbHNlOwogICAgICB9CiAgfQogIC8vLyBIb2xkcyB0aGUgcGFyc2UgdGFibGVzIGZvciBhIGdpdmVuIGdyYW1tYXIsIGFzIGdlbmVyYXRlZCBieQogIC8vLyBgbGV6ZXItZ2VuZXJhdG9yYCwgYW5kIHByb3ZpZGVzIFttZXRob2RzXSgjY29tbW9uLlBhcnNlcikgdG8gcGFyc2UKICAvLy8gY29udGVudCB3aXRoLgogIGNsYXNzIExSUGFyc2VyIGV4dGVuZHMgUGFyc2VyIHsKICAgICAgLy8vIEBpbnRlcm5hbAogICAgICBjb25zdHJ1Y3RvcihzcGVjKSB7CiAgICAgICAgICBzdXBlcigpOwogICAgICAgICAgLy8vIEBpbnRlcm5hbAogICAgICAgICAgdGhpcy53cmFwcGVycyA9IFtdOwogICAgICAgICAgaWYgKHNwZWMudmVyc2lvbiAhPSAxNCAvKiBWZXJzaW9uICovKQogICAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKGBQYXJzZXIgdmVyc2lvbiAoJHtzcGVjLnZlcnNpb259KSBkb2Vzbid0IG1hdGNoIHJ1bnRpbWUgdmVyc2lvbiAoJHsxNCAvKiBWZXJzaW9uICovfSlgKTsKICAgICAgICAgIGxldCBub2RlTmFtZXMgPSBzcGVjLm5vZGVOYW1lcy5zcGxpdCgiICIpOwogICAgICAgICAgdGhpcy5taW5SZXBlYXRUZXJtID0gbm9kZU5hbWVzLmxlbmd0aDsKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3BlYy5yZXBlYXROb2RlQ291bnQ7IGkrKykKICAgICAgICAgICAgICBub2RlTmFtZXMucHVzaCgiIik7CiAgICAgICAgICBsZXQgdG9wVGVybXMgPSBPYmplY3Qua2V5cyhzcGVjLnRvcFJ1bGVzKS5tYXAociA9PiBzcGVjLnRvcFJ1bGVzW3JdWzFdKTsKICAgICAgICAgIGxldCBub2RlUHJvcHMgPSBbXTsKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbm9kZU5hbWVzLmxlbmd0aDsgaSsrKQogICAgICAgICAgICAgIG5vZGVQcm9wcy5wdXNoKFtdKTsKICAgICAgICAgIGZ1bmN0aW9uIHNldFByb3Aobm9kZUlELCBwcm9wLCB2YWx1ZSkgewogICAgICAgICAgICAgIG5vZGVQcm9wc1tub2RlSURdLnB1c2goW3Byb3AsIHByb3AuZGVzZXJpYWxpemUoU3RyaW5nKHZhbHVlKSldKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChzcGVjLm5vZGVQcm9wcykKICAgICAgICAgICAgICBmb3IgKGxldCBwcm9wU3BlYyBvZiBzcGVjLm5vZGVQcm9wcykgewogICAgICAgICAgICAgICAgICBsZXQgcHJvcCA9IHByb3BTcGVjWzBdOwogICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHByb3AgPT0gInN0cmluZyIpCiAgICAgICAgICAgICAgICAgICAgICBwcm9wID0gTm9kZVByb3BbcHJvcF07CiAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgcHJvcFNwZWMubGVuZ3RoOykgewogICAgICAgICAgICAgICAgICAgICAgbGV0IG5leHQgPSBwcm9wU3BlY1tpKytdOwogICAgICAgICAgICAgICAgICAgICAgaWYgKG5leHQgPj0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHNldFByb3AobmV4dCwgcHJvcCwgcHJvcFNwZWNbaSsrXSk7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdmFsdWUgPSBwcm9wU3BlY1tpICsgLW5leHRdOwogICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAtbmV4dDsgaiA+IDA7IGotLSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0UHJvcChwcm9wU3BlY1tpKytdLCBwcm9wLCB2YWx1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgaSsrOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgdGhpcy5ub2RlU2V0ID0gbmV3IE5vZGVTZXQobm9kZU5hbWVzLm1hcCgobmFtZSwgaSkgPT4gTm9kZVR5cGUuZGVmaW5lKHsKICAgICAgICAgICAgICBuYW1lOiBpID49IHRoaXMubWluUmVwZWF0VGVybSA/IHVuZGVmaW5lZCA6IG5hbWUsCiAgICAgICAgICAgICAgaWQ6IGksCiAgICAgICAgICAgICAgcHJvcHM6IG5vZGVQcm9wc1tpXSwKICAgICAgICAgICAgICB0b3A6IHRvcFRlcm1zLmluZGV4T2YoaSkgPiAtMSwKICAgICAgICAgICAgICBlcnJvcjogaSA9PSAwLAogICAgICAgICAgICAgIHNraXBwZWQ6IHNwZWMuc2tpcHBlZE5vZGVzICYmIHNwZWMuc2tpcHBlZE5vZGVzLmluZGV4T2YoaSkgPiAtMQogICAgICAgICAgfSkpKTsKICAgICAgICAgIGlmIChzcGVjLnByb3BTb3VyY2VzKQogICAgICAgICAgICAgIHRoaXMubm9kZVNldCA9IHRoaXMubm9kZVNldC5leHRlbmQoLi4uc3BlYy5wcm9wU291cmNlcyk7CiAgICAgICAgICB0aGlzLnN0cmljdCA9IGZhbHNlOwogICAgICAgICAgdGhpcy5idWZmZXJMZW5ndGggPSBEZWZhdWx0QnVmZmVyTGVuZ3RoOwogICAgICAgICAgbGV0IHRva2VuQXJyYXkgPSBkZWNvZGVBcnJheShzcGVjLnRva2VuRGF0YSk7CiAgICAgICAgICB0aGlzLmNvbnRleHQgPSBzcGVjLmNvbnRleHQ7CiAgICAgICAgICB0aGlzLnNwZWNpYWxpemVyU3BlY3MgPSBzcGVjLnNwZWNpYWxpemVkIHx8IFtdOwogICAgICAgICAgdGhpcy5zcGVjaWFsaXplZCA9IG5ldyBVaW50MTZBcnJheSh0aGlzLnNwZWNpYWxpemVyU3BlY3MubGVuZ3RoKTsKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zcGVjaWFsaXplclNwZWNzLmxlbmd0aDsgaSsrKQogICAgICAgICAgICAgIHRoaXMuc3BlY2lhbGl6ZWRbaV0gPSB0aGlzLnNwZWNpYWxpemVyU3BlY3NbaV0udGVybTsKICAgICAgICAgIHRoaXMuc3BlY2lhbGl6ZXJzID0gdGhpcy5zcGVjaWFsaXplclNwZWNzLm1hcChnZXRTcGVjaWFsaXplcik7CiAgICAgICAgICB0aGlzLnN0YXRlcyA9IGRlY29kZUFycmF5KHNwZWMuc3RhdGVzLCBVaW50MzJBcnJheSk7CiAgICAgICAgICB0aGlzLmRhdGEgPSBkZWNvZGVBcnJheShzcGVjLnN0YXRlRGF0YSk7CiAgICAgICAgICB0aGlzLmdvdG8gPSBkZWNvZGVBcnJheShzcGVjLmdvdG8pOwogICAgICAgICAgdGhpcy5tYXhUZXJtID0gc3BlYy5tYXhUZXJtOwogICAgICAgICAgdGhpcy50b2tlbml6ZXJzID0gc3BlYy50b2tlbml6ZXJzLm1hcCh2YWx1ZSA9PiB0eXBlb2YgdmFsdWUgPT0gIm51bWJlciIgPyBuZXcgVG9rZW5Hcm91cCh0b2tlbkFycmF5LCB2YWx1ZSkgOiB2YWx1ZSk7CiAgICAgICAgICB0aGlzLnRvcFJ1bGVzID0gc3BlYy50b3BSdWxlczsKICAgICAgICAgIHRoaXMuZGlhbGVjdHMgPSBzcGVjLmRpYWxlY3RzIHx8IHt9OwogICAgICAgICAgdGhpcy5keW5hbWljUHJlY2VkZW5jZXMgPSBzcGVjLmR5bmFtaWNQcmVjZWRlbmNlcyB8fCBudWxsOwogICAgICAgICAgdGhpcy50b2tlblByZWNUYWJsZSA9IHNwZWMudG9rZW5QcmVjOwogICAgICAgICAgdGhpcy50ZXJtTmFtZXMgPSBzcGVjLnRlcm1OYW1lcyB8fCBudWxsOwogICAgICAgICAgdGhpcy5tYXhOb2RlID0gdGhpcy5ub2RlU2V0LnR5cGVzLmxlbmd0aCAtIDE7CiAgICAgICAgICB0aGlzLmRpYWxlY3QgPSB0aGlzLnBhcnNlRGlhbGVjdCgpOwogICAgICAgICAgdGhpcy50b3AgPSB0aGlzLnRvcFJ1bGVzW09iamVjdC5rZXlzKHRoaXMudG9wUnVsZXMpWzBdXTsKICAgICAgfQogICAgICBjcmVhdGVQYXJzZShpbnB1dCwgZnJhZ21lbnRzLCByYW5nZXMpIHsKICAgICAgICAgIGxldCBwYXJzZSA9IG5ldyBQYXJzZSh0aGlzLCBpbnB1dCwgZnJhZ21lbnRzLCByYW5nZXMpOwogICAgICAgICAgZm9yIChsZXQgdyBvZiB0aGlzLndyYXBwZXJzKQogICAgICAgICAgICAgIHBhcnNlID0gdyhwYXJzZSwgaW5wdXQsIGZyYWdtZW50cywgcmFuZ2VzKTsKICAgICAgICAgIHJldHVybiBwYXJzZTsKICAgICAgfQogICAgICAvLy8gR2V0IGEgZ290byB0YWJsZSBlbnRyeSBAaW50ZXJuYWwKICAgICAgZ2V0R290byhzdGF0ZSwgdGVybSwgbG9vc2UgPSBmYWxzZSkgewogICAgICAgICAgbGV0IHRhYmxlID0gdGhpcy5nb3RvOwogICAgICAgICAgaWYgKHRlcm0gPj0gdGFibGVbMF0pCiAgICAgICAgICAgICAgcmV0dXJuIC0xOwogICAgICAgICAgZm9yIChsZXQgcG9zID0gdGFibGVbdGVybSArIDFdOzspIHsKICAgICAgICAgICAgICBsZXQgZ3JvdXBUYWcgPSB0YWJsZVtwb3MrK10sIGxhc3QgPSBncm91cFRhZyAmIDE7CiAgICAgICAgICAgICAgbGV0IHRhcmdldCA9IHRhYmxlW3BvcysrXTsKICAgICAgICAgICAgICBpZiAobGFzdCAmJiBsb29zZSkKICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldDsKICAgICAgICAgICAgICBmb3IgKGxldCBlbmQgPSBwb3MgKyAoZ3JvdXBUYWcgPj4gMSk7IHBvcyA8IGVuZDsgcG9zKyspCiAgICAgICAgICAgICAgICAgIGlmICh0YWJsZVtwb3NdID09IHN0YXRlKQogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldDsKICAgICAgICAgICAgICBpZiAobGFzdCkKICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xOwogICAgICAgICAgfQogICAgICB9CiAgICAgIC8vLyBDaGVjayBpZiB0aGlzIHN0YXRlIGhhcyBhbiBhY3Rpb24gZm9yIGEgZ2l2ZW4gdGVybWluYWwgQGludGVybmFsCiAgICAgIGhhc0FjdGlvbihzdGF0ZSwgdGVybWluYWwpIHsKICAgICAgICAgIGxldCBkYXRhID0gdGhpcy5kYXRhOwogICAgICAgICAgZm9yIChsZXQgc2V0ID0gMDsgc2V0IDwgMjsgc2V0KyspIHsKICAgICAgICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5zdGF0ZVNsb3Qoc3RhdGUsIHNldCA/IDIgLyogU2tpcCAqLyA6IDEgLyogQWN0aW9ucyAqLyksIG5leHQ7OyBpICs9IDMpIHsKICAgICAgICAgICAgICAgICAgaWYgKChuZXh0ID0gZGF0YVtpXSkgPT0gNjU1MzUgLyogRW5kICovKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YVtpICsgMV0gPT0gMSAvKiBOZXh0ICovKQogICAgICAgICAgICAgICAgICAgICAgICAgIG5leHQgPSBkYXRhW2kgPSBwYWlyKGRhdGEsIGkgKyAyKV07CiAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChkYXRhW2kgKyAxXSA9PSAyIC8qIE90aGVyICovKQogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwYWlyKGRhdGEsIGkgKyAyKTsKICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBpZiAobmV4dCA9PSB0ZXJtaW5hbCB8fCBuZXh0ID09IDAgLyogRXJyICovKQogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhaXIoZGF0YSwgaSArIDEpOwogICAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiAwOwogICAgICB9CiAgICAgIC8vLyBAaW50ZXJuYWwKICAgICAgc3RhdGVTbG90KHN0YXRlLCBzbG90KSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZXNbKHN0YXRlICogNiAvKiBTaXplICovKSArIHNsb3RdOwogICAgICB9CiAgICAgIC8vLyBAaW50ZXJuYWwKICAgICAgc3RhdGVGbGFnKHN0YXRlLCBmbGFnKSB7CiAgICAgICAgICByZXR1cm4gKHRoaXMuc3RhdGVTbG90KHN0YXRlLCAwIC8qIEZsYWdzICovKSAmIGZsYWcpID4gMDsKICAgICAgfQogICAgICAvLy8gQGludGVybmFsCiAgICAgIHZhbGlkQWN0aW9uKHN0YXRlLCBhY3Rpb24pIHsKICAgICAgICAgIGlmIChhY3Rpb24gPT0gdGhpcy5zdGF0ZVNsb3Qoc3RhdGUsIDQgLyogRGVmYXVsdFJlZHVjZSAqLykpCiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5zdGF0ZVNsb3Qoc3RhdGUsIDEgLyogQWN0aW9ucyAqLyk7OyBpICs9IDMpIHsKICAgICAgICAgICAgICBpZiAodGhpcy5kYXRhW2ldID09IDY1NTM1IC8qIEVuZCAqLykgewogICAgICAgICAgICAgICAgICBpZiAodGhpcy5kYXRhW2kgKyAxXSA9PSAxIC8qIE5leHQgKi8pCiAgICAgICAgICAgICAgICAgICAgICBpID0gcGFpcih0aGlzLmRhdGEsIGkgKyAyKTsKICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoYWN0aW9uID09IHBhaXIodGhpcy5kYXRhLCBpICsgMSkpCiAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgfQogICAgICB9CiAgICAgIC8vLyBHZXQgdGhlIHN0YXRlcyB0aGF0IGNhbiBmb2xsb3cgdGhpcyBvbmUgdGhyb3VnaCBzaGlmdCBhY3Rpb25zIG9yCiAgICAgIC8vLyBnb3RvIGp1bXBzLiBAaW50ZXJuYWwKICAgICAgbmV4dFN0YXRlcyhzdGF0ZSkgewogICAgICAgICAgbGV0IHJlc3VsdCA9IFtdOwogICAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMuc3RhdGVTbG90KHN0YXRlLCAxIC8qIEFjdGlvbnMgKi8pOzsgaSArPSAzKSB7CiAgICAgICAgICAgICAgaWYgKHRoaXMuZGF0YVtpXSA9PSA2NTUzNSAvKiBFbmQgKi8pIHsKICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZGF0YVtpICsgMV0gPT0gMSAvKiBOZXh0ICovKQogICAgICAgICAgICAgICAgICAgICAgaSA9IHBhaXIodGhpcy5kYXRhLCBpICsgMik7CiAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoKHRoaXMuZGF0YVtpICsgMl0gJiAoNjU1MzYgLyogUmVkdWNlRmxhZyAqLyA+PiAxNikpID09IDApIHsKICAgICAgICAgICAgICAgICAgbGV0IHZhbHVlID0gdGhpcy5kYXRhW2kgKyAxXTsKICAgICAgICAgICAgICAgICAgaWYgKCFyZXN1bHQuc29tZSgodiwgaSkgPT4gKGkgJiAxKSAmJiB2ID09IHZhbHVlKSkKICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHRoaXMuZGF0YVtpXSwgdmFsdWUpOwogICAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgIH0KICAgICAgLy8vIEBpbnRlcm5hbAogICAgICBvdmVycmlkZXModG9rZW4sIHByZXYpIHsKICAgICAgICAgIGxldCBpUHJldiA9IGZpbmRPZmZzZXQodGhpcy5kYXRhLCB0aGlzLnRva2VuUHJlY1RhYmxlLCBwcmV2KTsKICAgICAgICAgIHJldHVybiBpUHJldiA8IDAgfHwgZmluZE9mZnNldCh0aGlzLmRhdGEsIHRoaXMudG9rZW5QcmVjVGFibGUsIHRva2VuKSA8IGlQcmV2OwogICAgICB9CiAgICAgIC8vLyBDb25maWd1cmUgdGhlIHBhcnNlci4gUmV0dXJucyBhIG5ldyBwYXJzZXIgaW5zdGFuY2UgdGhhdCBoYXMgdGhlCiAgICAgIC8vLyBnaXZlbiBzZXR0aW5ncyBtb2RpZmllZC4gU2V0dGluZ3Mgbm90IHByb3ZpZGVkIGluIGBjb25maWdgIGFyZQogICAgICAvLy8ga2VwdCBmcm9tIHRoZSBvcmlnaW5hbCBwYXJzZXIuCiAgICAgIGNvbmZpZ3VyZShjb25maWcpIHsKICAgICAgICAgIC8vIEhpZGVvdXMgcmVmbGVjdGlvbi1iYXNlZCBrbHVkZ2UgdG8gbWFrZSBpdCBlYXN5IHRvIGNyZWF0ZSBhCiAgICAgICAgICAvLyBzbGlnaHRseSBtb2RpZmllZCBjb3B5IG9mIGEgcGFyc2VyLgogICAgICAgICAgbGV0IGNvcHkgPSBPYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUoTFJQYXJzZXIucHJvdG90eXBlKSwgdGhpcyk7CiAgICAgICAgICBpZiAoY29uZmlnLnByb3BzKQogICAgICAgICAgICAgIGNvcHkubm9kZVNldCA9IHRoaXMubm9kZVNldC5leHRlbmQoLi4uY29uZmlnLnByb3BzKTsKICAgICAgICAgIGlmIChjb25maWcudG9wKSB7CiAgICAgICAgICAgICAgbGV0IGluZm8gPSB0aGlzLnRvcFJ1bGVzW2NvbmZpZy50b3BdOwogICAgICAgICAgICAgIGlmICghaW5mbykKICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoYEludmFsaWQgdG9wIHJ1bGUgbmFtZSAke2NvbmZpZy50b3B9YCk7CiAgICAgICAgICAgICAgY29weS50b3AgPSBpbmZvOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGNvbmZpZy50b2tlbml6ZXJzKQogICAgICAgICAgICAgIGNvcHkudG9rZW5pemVycyA9IHRoaXMudG9rZW5pemVycy5tYXAodCA9PiB7CiAgICAgICAgICAgICAgICAgIGxldCBmb3VuZCA9IGNvbmZpZy50b2tlbml6ZXJzLmZpbmQociA9PiByLmZyb20gPT0gdCk7CiAgICAgICAgICAgICAgICAgIHJldHVybiBmb3VuZCA/IGZvdW5kLnRvIDogdDsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgIGlmIChjb25maWcuc3BlY2lhbGl6ZXJzKSB7CiAgICAgICAgICAgICAgY29weS5zcGVjaWFsaXplcnMgPSB0aGlzLnNwZWNpYWxpemVycy5zbGljZSgpOwogICAgICAgICAgICAgIGNvcHkuc3BlY2lhbGl6ZXJTcGVjcyA9IHRoaXMuc3BlY2lhbGl6ZXJTcGVjcy5tYXAoKHMsIGkpID0+IHsKICAgICAgICAgICAgICAgICAgbGV0IGZvdW5kID0gY29uZmlnLnNwZWNpYWxpemVycy5maW5kKHIgPT4gci5mcm9tID09IHMuZXh0ZXJuYWwpOwogICAgICAgICAgICAgICAgICBpZiAoIWZvdW5kKQogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHM7CiAgICAgICAgICAgICAgICAgIGxldCBzcGVjID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBzKSwgeyBleHRlcm5hbDogZm91bmQudG8gfSk7CiAgICAgICAgICAgICAgICAgIGNvcHkuc3BlY2lhbGl6ZXJzW2ldID0gZ2V0U3BlY2lhbGl6ZXIoc3BlYyk7CiAgICAgICAgICAgICAgICAgIHJldHVybiBzcGVjOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGNvbmZpZy5jb250ZXh0VHJhY2tlcikKICAgICAgICAgICAgICBjb3B5LmNvbnRleHQgPSBjb25maWcuY29udGV4dFRyYWNrZXI7CiAgICAgICAgICBpZiAoY29uZmlnLmRpYWxlY3QpCiAgICAgICAgICAgICAgY29weS5kaWFsZWN0ID0gdGhpcy5wYXJzZURpYWxlY3QoY29uZmlnLmRpYWxlY3QpOwogICAgICAgICAgaWYgKGNvbmZpZy5zdHJpY3QgIT0gbnVsbCkKICAgICAgICAgICAgICBjb3B5LnN0cmljdCA9IGNvbmZpZy5zdHJpY3Q7CiAgICAgICAgICBpZiAoY29uZmlnLndyYXApCiAgICAgICAgICAgICAgY29weS53cmFwcGVycyA9IGNvcHkud3JhcHBlcnMuY29uY2F0KGNvbmZpZy53cmFwKTsKICAgICAgICAgIGlmIChjb25maWcuYnVmZmVyTGVuZ3RoICE9IG51bGwpCiAgICAgICAgICAgICAgY29weS5idWZmZXJMZW5ndGggPSBjb25maWcuYnVmZmVyTGVuZ3RoOwogICAgICAgICAgcmV0dXJuIGNvcHk7CiAgICAgIH0KICAgICAgLy8vIFRlbGxzIHlvdSB3aGV0aGVyIGFueSBbcGFyc2Ugd3JhcHBlcnNdKCNsci5QYXJzZXJDb25maWcud3JhcCkKICAgICAgLy8vIGFyZSByZWdpc3RlcmVkIGZvciB0aGlzIHBhcnNlci4KICAgICAgaGFzV3JhcHBlcnMoKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy53cmFwcGVycy5sZW5ndGggPiAwOwogICAgICB9CiAgICAgIC8vLyBSZXR1cm5zIHRoZSBuYW1lIGFzc29jaWF0ZWQgd2l0aCBhIGdpdmVuIHRlcm0uIFRoaXMgd2lsbCBvbmx5CiAgICAgIC8vLyB3b3JrIGZvciBhbGwgdGVybXMgd2hlbiB0aGUgcGFyc2VyIHdhcyBnZW5lcmF0ZWQgd2l0aCB0aGUKICAgICAgLy8vIGAtLW5hbWVzYCBvcHRpb24uIEJ5IGRlZmF1bHQsIG9ubHkgdGhlIG5hbWVzIG9mIHRhZ2dlZCB0ZXJtcyBhcmUKICAgICAgLy8vIHN0b3JlZC4KICAgICAgZ2V0TmFtZSh0ZXJtKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy50ZXJtTmFtZXMgPyB0aGlzLnRlcm1OYW1lc1t0ZXJtXSA6IFN0cmluZyh0ZXJtIDw9IHRoaXMubWF4Tm9kZSAmJiB0aGlzLm5vZGVTZXQudHlwZXNbdGVybV0ubmFtZSB8fCB0ZXJtKTsKICAgICAgfQogICAgICAvLy8gVGhlIGVvZiB0ZXJtIGlkIGlzIGFsd2F5cyBhbGxvY2F0ZWQgZGlyZWN0bHkgYWZ0ZXIgdGhlIG5vZGUKICAgICAgLy8vIHR5cGVzLiBAaW50ZXJuYWwKICAgICAgZ2V0IGVvZlRlcm0oKSB7IHJldHVybiB0aGlzLm1heE5vZGUgKyAxOyB9CiAgICAgIC8vLyBUaGUgdHlwZSBvZiB0b3Agbm9kZSBwcm9kdWNlZCBieSB0aGUgcGFyc2VyLgogICAgICBnZXQgdG9wTm9kZSgpIHsgcmV0dXJuIHRoaXMubm9kZVNldC50eXBlc1t0aGlzLnRvcFsxXV07IH0KICAgICAgLy8vIEBpbnRlcm5hbAogICAgICBkeW5hbWljUHJlY2VkZW5jZSh0ZXJtKSB7CiAgICAgICAgICBsZXQgcHJlYyA9IHRoaXMuZHluYW1pY1ByZWNlZGVuY2VzOwogICAgICAgICAgcmV0dXJuIHByZWMgPT0gbnVsbCA/IDAgOiBwcmVjW3Rlcm1dIHx8IDA7CiAgICAgIH0KICAgICAgLy8vIEBpbnRlcm5hbAogICAgICBwYXJzZURpYWxlY3QoZGlhbGVjdCkgewogICAgICAgICAgbGV0IHZhbHVlcyA9IE9iamVjdC5rZXlzKHRoaXMuZGlhbGVjdHMpLCBmbGFncyA9IHZhbHVlcy5tYXAoKCkgPT4gZmFsc2UpOwogICAgICAgICAgaWYgKGRpYWxlY3QpCiAgICAgICAgICAgICAgZm9yIChsZXQgcGFydCBvZiBkaWFsZWN0LnNwbGl0KCIgIikpIHsKICAgICAgICAgICAgICAgICAgbGV0IGlkID0gdmFsdWVzLmluZGV4T2YocGFydCk7CiAgICAgICAgICAgICAgICAgIGlmIChpZCA+PSAwKQogICAgICAgICAgICAgICAgICAgICAgZmxhZ3NbaWRdID0gdHJ1ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICBsZXQgZGlzYWJsZWQgPSBudWxsOwogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2YWx1ZXMubGVuZ3RoOyBpKyspCiAgICAgICAgICAgICAgaWYgKCFmbGFnc1tpXSkgewogICAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gdGhpcy5kaWFsZWN0c1t2YWx1ZXNbaV1dLCBpZDsgKGlkID0gdGhpcy5kYXRhW2orK10pICE9IDY1NTM1IC8qIEVuZCAqLzspCiAgICAgICAgICAgICAgICAgICAgICAoZGlzYWJsZWQgfHwgKGRpc2FibGVkID0gbmV3IFVpbnQ4QXJyYXkodGhpcy5tYXhUZXJtICsgMSkpKVtpZF0gPSAxOwogICAgICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBuZXcgRGlhbGVjdChkaWFsZWN0LCBmbGFncywgZGlzYWJsZWQpOwogICAgICB9CiAgICAgIC8vLyBVc2VkIGJ5IHRoZSBvdXRwdXQgb2YgdGhlIHBhcnNlciBnZW5lcmF0b3IuIE5vdCBhdmFpbGFibGUgdG8KICAgICAgLy8vIHVzZXIgY29kZS4KICAgICAgc3RhdGljIGRlc2VyaWFsaXplKHNwZWMpIHsKICAgICAgICAgIHJldHVybiBuZXcgTFJQYXJzZXIoc3BlYyk7CiAgICAgIH0KICB9CiAgZnVuY3Rpb24gcGFpcihkYXRhLCBvZmYpIHsgcmV0dXJuIGRhdGFbb2ZmXSB8IChkYXRhW29mZiArIDFdIDw8IDE2KTsgfQogIGZ1bmN0aW9uIGZpbmRPZmZzZXQoZGF0YSwgc3RhcnQsIHRlcm0pIHsKICAgICAgZm9yIChsZXQgaSA9IHN0YXJ0LCBuZXh0OyAobmV4dCA9IGRhdGFbaV0pICE9IDY1NTM1IC8qIEVuZCAqLzsgaSsrKQogICAgICAgICAgaWYgKG5leHQgPT0gdGVybSkKICAgICAgICAgICAgICByZXR1cm4gaSAtIHN0YXJ0OwogICAgICByZXR1cm4gLTE7CiAgfQogIGZ1bmN0aW9uIGZpbmRGaW5pc2hlZChzdGFja3MpIHsKICAgICAgbGV0IGJlc3QgPSBudWxsOwogICAgICBmb3IgKGxldCBzdGFjayBvZiBzdGFja3MpIHsKICAgICAgICAgIGxldCBzdG9wcGVkID0gc3RhY2sucC5zdG9wcGVkQXQ7CiAgICAgICAgICBpZiAoKHN0YWNrLnBvcyA9PSBzdGFjay5wLnN0cmVhbS5lbmQgfHwgc3RvcHBlZCAhPSBudWxsICYmIHN0YWNrLnBvcyA+IHN0b3BwZWQpICYmCiAgICAgICAgICAgICAgc3RhY2sucC5wYXJzZXIuc3RhdGVGbGFnKHN0YWNrLnN0YXRlLCAyIC8qIEFjY2VwdGluZyAqLykgJiYKICAgICAgICAgICAgICAoIWJlc3QgfHwgYmVzdC5zY29yZSA8IHN0YWNrLnNjb3JlKSkKICAgICAgICAgICAgICBiZXN0ID0gc3RhY2s7CiAgICAgIH0KICAgICAgcmV0dXJuIGJlc3Q7CiAgfQogIGZ1bmN0aW9uIGdldFNwZWNpYWxpemVyKHNwZWMpIHsKICAgICAgaWYgKHNwZWMuZXh0ZXJuYWwpIHsKICAgICAgICAgIGxldCBtYXNrID0gc3BlYy5leHRlbmQgPyAxIC8qIEV4dGVuZCAqLyA6IDAgLyogU3BlY2lhbGl6ZSAqLzsKICAgICAgICAgIHJldHVybiAodmFsdWUsIHN0YWNrKSA9PiAoc3BlYy5leHRlcm5hbCh2YWx1ZSwgc3RhY2spIDw8IDEpIHwgbWFzazsKICAgICAgfQogICAgICByZXR1cm4gc3BlYy5nZXQ7CiAgfQoKICBsZXQgbmV4dFRhZ0lEID0gMDsKICAvLy8gSGlnaGxpZ2h0aW5nIHRhZ3MgYXJlIG1hcmtlcnMgdGhhdCBkZW5vdGUgYSBoaWdobGlnaHRpbmcgY2F0ZWdvcnkuCiAgLy8vIFRoZXkgYXJlIFthc3NvY2lhdGVkXSgjaGlnaGxpZ2h0LnN0eWxlVGFncykgd2l0aCBwYXJ0cyBvZiBhIHN5bnRheAogIC8vLyB0cmVlIGJ5IGEgbGFuZ3VhZ2UgbW9kZSwgYW5kIHRoZW4gbWFwcGVkIHRvIGFuIGFjdHVhbCBDU1Mgc3R5bGUgYnkKICAvLy8gYSBbaGlnaGxpZ2h0ZXJdKCNoaWdobGlnaHQuSGlnaGxpZ2h0ZXIpLgogIC8vLwogIC8vLyBCZWNhdXNlIHN5bnRheCB0cmVlIG5vZGUgdHlwZXMgYW5kIGhpZ2hsaWdodCBzdHlsZXMgaGF2ZSB0byBiZQogIC8vLyBhYmxlIHRvIHRhbGsgdGhlIHNhbWUgbGFuZ3VhZ2UsIENvZGVNaXJyb3IgdXNlcyBhIG1vc3RseSBfY2xvc2VkXwogIC8vLyBbdm9jYWJ1bGFyeV0oI2hpZ2hsaWdodC50YWdzKSBvZiBzeW50YXggdGFncyAoYXMgb3Bwb3NlZCB0bwogIC8vLyB0cmFkaXRpb25hbCBvcGVuIHN0cmluZy1iYXNlZCBzeXN0ZW1zLCB3aGljaCBtYWtlIGl0IGhhcmQgZm9yCiAgLy8vIGhpZ2hsaWdodGluZyB0aGVtZXMgdG8gY292ZXIgYWxsIHRoZSB0b2tlbnMgcHJvZHVjZWQgYnkgdGhlCiAgLy8vIHZhcmlvdXMgbGFuZ3VhZ2VzKS4KICAvLy8KICAvLy8gSXQgX2lzXyBwb3NzaWJsZSB0byBbZGVmaW5lXSgjaGlnaGxpZ2h0LlRhZ15kZWZpbmUpIHlvdXIgb3duCiAgLy8vIGhpZ2hsaWdodGluZyB0YWdzIGZvciBzeXN0ZW0taW50ZXJuYWwgdXNlICh3aGVyZSB5b3UgY29udHJvbCBib3RoCiAgLy8vIHRoZSBsYW5ndWFnZSBwYWNrYWdlIGFuZCB0aGUgaGlnaGxpZ2h0ZXIpLCBidXQgc3VjaCB0YWdzIHdpbGwgbm90CiAgLy8vIGJlIHBpY2tlZCB1cCBieSByZWd1bGFyIGhpZ2hsaWdodGVycyAodGhvdWdoIHlvdSBjYW4gZGVyaXZlIHRoZW0KICAvLy8gZnJvbSBzdGFuZGFyZCB0YWdzIHRvIGFsbG93IGhpZ2hsaWdodGVycyB0byBmYWxsIGJhY2sgdG8gdGhvc2UpLgogIGNsYXNzIFRhZyB7CiAgICAgIC8vLyBAaW50ZXJuYWwKICAgICAgY29uc3RydWN0b3IoCiAgICAgIC8vLyBUaGUgc2V0IG9mIHRoaXMgdGFnIGFuZCBhbGwgaXRzIHBhcmVudCB0YWdzLCBzdGFydGluZyB3aXRoCiAgICAgIC8vLyB0aGlzIG9uZSBpdHNlbGYgYW5kIHNvcnRlZCBpbiBvcmRlciBvZiBkZWNyZWFzaW5nIHNwZWNpZmljaXR5LgogICAgICBzZXQsIAogICAgICAvLy8gVGhlIGJhc2UgdW5tb2RpZmllZCB0YWcgdGhhdCB0aGlzIG9uZSBpcyBiYXNlZCBvbiwgaWYgaXQncwogICAgICAvLy8gbW9kaWZpZWQgQGludGVybmFsCiAgICAgIGJhc2UsIAogICAgICAvLy8gVGhlIG1vZGlmaWVycyBhcHBsaWVkIHRvIHRoaXMuYmFzZSBAaW50ZXJuYWwKICAgICAgbW9kaWZpZWQpIHsKICAgICAgICAgIHRoaXMuc2V0ID0gc2V0OwogICAgICAgICAgdGhpcy5iYXNlID0gYmFzZTsKICAgICAgICAgIHRoaXMubW9kaWZpZWQgPSBtb2RpZmllZDsKICAgICAgICAgIC8vLyBAaW50ZXJuYWwKICAgICAgICAgIHRoaXMuaWQgPSBuZXh0VGFnSUQrKzsKICAgICAgfQogICAgICAvLy8gRGVmaW5lIGEgbmV3IHRhZy4gSWYgYHBhcmVudGAgaXMgZ2l2ZW4sIHRoZSB0YWcgaXMgdHJlYXRlZCBhcyBhCiAgICAgIC8vLyBzdWItdGFnIG9mIHRoYXQgcGFyZW50LCBhbmQKICAgICAgLy8vIFtoaWdobGlnaHRlcnNdKCNoaWdobGlnaHQudGFnSGlnaGxpZ2h0ZXIpIHRoYXQgZG9uJ3QgbWVudGlvbgogICAgICAvLy8gdGhpcyB0YWcgd2lsbCB0cnkgdG8gZmFsbCBiYWNrIHRvIHRoZSBwYXJlbnQgdGFnIChvciBncmFuZHBhcmVudAogICAgICAvLy8gdGFnLCBldGMpLgogICAgICBzdGF0aWMgZGVmaW5lKHBhcmVudCkgewogICAgICAgICAgaWYgKHBhcmVudCA9PT0gbnVsbCB8fCBwYXJlbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBhcmVudC5iYXNlKQogICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiQ2FuIG5vdCBkZXJpdmUgZnJvbSBhIG1vZGlmaWVkIHRhZyIpOwogICAgICAgICAgbGV0IHRhZyA9IG5ldyBUYWcoW10sIG51bGwsIFtdKTsKICAgICAgICAgIHRhZy5zZXQucHVzaCh0YWcpOwogICAgICAgICAgaWYgKHBhcmVudCkKICAgICAgICAgICAgICBmb3IgKGxldCB0IG9mIHBhcmVudC5zZXQpCiAgICAgICAgICAgICAgICAgIHRhZy5zZXQucHVzaCh0KTsKICAgICAgICAgIHJldHVybiB0YWc7CiAgICAgIH0KICAgICAgLy8vIERlZmluZSBhIHRhZyBfbW9kaWZpZXJfLCB3aGljaCBpcyBhIGZ1bmN0aW9uIHRoYXQsIGdpdmVuIGEgdGFnLAogICAgICAvLy8gd2lsbCByZXR1cm4gYSB0YWcgdGhhdCBpcyBhIHN1YnRhZyBvZiB0aGUgb3JpZ2luYWwuIEFwcGx5aW5nIHRoZQogICAgICAvLy8gc2FtZSBtb2RpZmllciB0byBhIHR3aWNlIHRhZyB3aWxsIHJldHVybiB0aGUgc2FtZSB2YWx1ZSAoYG0xKHQxKQogICAgICAvLy8gPT0gbTEodDEpYCkgYW5kIGFwcGx5aW5nIG11bHRpcGxlIG1vZGlmaWVycyB3aWxsLCByZWdhcmRsZXNzIG9yCiAgICAgIC8vLyBvcmRlciwgcHJvZHVjZSB0aGUgc2FtZSB0YWcgKGBtMShtMih0MSkpID09IG0yKG0xKHQxKSlgKS4KICAgICAgLy8vCiAgICAgIC8vLyBXaGVuIG11bHRpcGxlIG1vZGlmaWVycyBhcmUgYXBwbGllZCB0byBhIGdpdmVuIGJhc2UgdGFnLCBlYWNoCiAgICAgIC8vLyBzbWFsbGVyIHNldCBvZiBtb2RpZmllcnMgaXMgcmVnaXN0ZXJlZCBhcyBhIHBhcmVudCwgc28gdGhhdCBmb3IKICAgICAgLy8vIGV4YW1wbGUgYG0xKG0yKG0zKHQxKSkpYCBpcyBhIHN1YnR5cGUgb2YgYG0xKG0yKHQxKSlgLAogICAgICAvLy8gYG0xKG0zKHQxKWAsIGFuZCBzbyBvbi4KICAgICAgc3RhdGljIGRlZmluZU1vZGlmaWVyKCkgewogICAgICAgICAgbGV0IG1vZCA9IG5ldyBNb2RpZmllcjsKICAgICAgICAgIHJldHVybiAodGFnKSA9PiB7CiAgICAgICAgICAgICAgaWYgKHRhZy5tb2RpZmllZC5pbmRleE9mKG1vZCkgPiAtMSkKICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhZzsKICAgICAgICAgICAgICByZXR1cm4gTW9kaWZpZXIuZ2V0KHRhZy5iYXNlIHx8IHRhZywgdGFnLm1vZGlmaWVkLmNvbmNhdChtb2QpLnNvcnQoKGEsIGIpID0+IGEuaWQgLSBiLmlkKSk7CiAgICAgICAgICB9OwogICAgICB9CiAgfQogIGxldCBuZXh0TW9kaWZpZXJJRCA9IDA7CiAgY2xhc3MgTW9kaWZpZXIgewogICAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgICAgIHRoaXMuaW5zdGFuY2VzID0gW107CiAgICAgICAgICB0aGlzLmlkID0gbmV4dE1vZGlmaWVySUQrKzsKICAgICAgfQogICAgICBzdGF0aWMgZ2V0KGJhc2UsIG1vZHMpIHsKICAgICAgICAgIGlmICghbW9kcy5sZW5ndGgpCiAgICAgICAgICAgICAgcmV0dXJuIGJhc2U7CiAgICAgICAgICBsZXQgZXhpc3RzID0gbW9kc1swXS5pbnN0YW5jZXMuZmluZCh0ID0+IHQuYmFzZSA9PSBiYXNlICYmIHNhbWVBcnJheShtb2RzLCB0Lm1vZGlmaWVkKSk7CiAgICAgICAgICBpZiAoZXhpc3RzKQogICAgICAgICAgICAgIHJldHVybiBleGlzdHM7CiAgICAgICAgICBsZXQgc2V0ID0gW10sIHRhZyA9IG5ldyBUYWcoc2V0LCBiYXNlLCBtb2RzKTsKICAgICAgICAgIGZvciAobGV0IG0gb2YgbW9kcykKICAgICAgICAgICAgICBtLmluc3RhbmNlcy5wdXNoKHRhZyk7CiAgICAgICAgICBsZXQgY29uZmlncyA9IHBvd2VyU2V0KG1vZHMpOwogICAgICAgICAgZm9yIChsZXQgcGFyZW50IG9mIGJhc2Uuc2V0KQogICAgICAgICAgICAgIGlmICghcGFyZW50Lm1vZGlmaWVkLmxlbmd0aCkKICAgICAgICAgICAgICAgICAgZm9yIChsZXQgY29uZmlnIG9mIGNvbmZpZ3MpCiAgICAgICAgICAgICAgICAgICAgICBzZXQucHVzaChNb2RpZmllci5nZXQocGFyZW50LCBjb25maWcpKTsKICAgICAgICAgIHJldHVybiB0YWc7CiAgICAgIH0KICB9CiAgZnVuY3Rpb24gc2FtZUFycmF5KGEsIGIpIHsKICAgICAgcmV0dXJuIGEubGVuZ3RoID09IGIubGVuZ3RoICYmIGEuZXZlcnkoKHgsIGkpID0+IHggPT0gYltpXSk7CiAgfQogIGZ1bmN0aW9uIHBvd2VyU2V0KGFycmF5KSB7CiAgICAgIGxldCBzZXRzID0gW1tdXTsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykgewogICAgICAgICAgZm9yIChsZXQgaiA9IDAsIGUgPSBzZXRzLmxlbmd0aDsgaiA8IGU7IGorKykgewogICAgICAgICAgICAgIHNldHMucHVzaChzZXRzW2pdLmNvbmNhdChhcnJheVtpXSkpOwogICAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBzZXRzLnNvcnQoKGEsIGIpID0+IGIubGVuZ3RoIC0gYS5sZW5ndGgpOwogIH0KICAvLy8gVGhpcyBmdW5jdGlvbiBpcyB1c2VkIHRvIGFkZCBhIHNldCBvZiB0YWdzIHRvIGEgbGFuZ3VhZ2Ugc3ludGF4CiAgLy8vIHZpYSBbYE5vZGVTZXQuZXh0ZW5kYF0oI2NvbW1vbi5Ob2RlU2V0LmV4dGVuZCkgb3IKICAvLy8gW2BMUlBhcnNlci5jb25maWd1cmVgXSgjbHIuTFJQYXJzZXIuY29uZmlndXJlKS4KICAvLy8KICAvLy8gVGhlIGFyZ3VtZW50IG9iamVjdCBtYXBzIG5vZGUgc2VsZWN0b3JzIHRvIFtoaWdobGlnaHRpbmcKICAvLy8gdGFnc10oI2hpZ2hsaWdodC5UYWcpIG9yIGFycmF5cyBvZiB0YWdzLgogIC8vLwogIC8vLyBOb2RlIHNlbGVjdG9ycyBtYXkgaG9sZCBvbmUgb3IgbW9yZSAoc3BhY2Utc2VwYXJhdGVkKSBub2RlIHBhdGhzLgogIC8vLyBTdWNoIGEgcGF0aCBjYW4gYmUgYSBbbm9kZSBuYW1lXSgjY29tbW9uLk5vZGVUeXBlLm5hbWUpLCBvcgogIC8vLyBtdWx0aXBsZSBub2RlIG5hbWVzIChvciBgKmAgd2lsZGNhcmRzKSBzZXBhcmF0ZWQgYnkgc2xhc2gKICAvLy8gY2hhcmFjdGVycywgYXMgaW4gYCJCbG9jay9EZWNsYXJhdGlvbi9WYXJpYWJsZU5hbWUiYC4gU3VjaCBhIHBhdGgKICAvLy8gbWF0Y2hlcyB0aGUgZmluYWwgbm9kZSBidXQgb25seSBpZiBpdHMgZGlyZWN0IHBhcmVudCBub2RlcyBhcmUgdGhlCiAgLy8vIG90aGVyIG5vZGVzIG1lbnRpb25lZC4gQSBgKmAgaW4gc3VjaCBhIHBhdGggbWF0Y2hlcyBhbnkgcGFyZW50LAogIC8vLyBidXQgb25seSBhIHNpbmdsZSBsZXZlbOKAlHdpbGRjYXJkcyB0aGF0IG1hdGNoIG11bHRpcGxlIHBhcmVudHMKICAvLy8gYXJlbid0IHN1cHBvcnRlZCwgYm90aCBmb3IgZWZmaWNpZW5jeSByZWFzb25zIGFuZCBiZWNhdXNlIExlemVyCiAgLy8vIHRyZWVzIG1ha2UgaXQgcmF0aGVyIGhhcmQgdG8gcmVhc29uIGFib3V0IHdoYXQgdGhleSB3b3VsZCBtYXRjaC4pCiAgLy8vCiAgLy8vIEEgcGF0aCBjYW4gYmUgZW5kZWQgd2l0aCBgLy4uLmAgdG8gaW5kaWNhdGUgdGhhdCB0aGUgdGFnIGFzc2lnbmVkCiAgLy8vIHRvIHRoZSBub2RlIHNob3VsZCBhbHNvIGFwcGx5IHRvIGFsbCBjaGlsZCBub2RlcywgZXZlbiBpZiB0aGV5CiAgLy8vIG1hdGNoIHRoZWlyIG93biBzdHlsZSAoYnkgZGVmYXVsdCwgb25seSB0aGUgaW5uZXJtb3N0IHN0eWxlIGlzCiAgLy8vIHVzZWQpLgogIC8vLwogIC8vLyBXaGVuIGEgcGF0aCBlbmRzIGluIGAhYCwgYXMgaW4gYEF0dHJpYnV0ZSFgLCBubyBmdXJ0aGVyIG1hdGNoaW5nCiAgLy8vIGhhcHBlbnMgZm9yIHRoZSBub2RlJ3MgY2hpbGQgbm9kZXMsIGFuZCB0aGUgZW50aXJlIG5vZGUgZ2V0cyB0aGUKICAvLy8gZ2l2ZW4gc3R5bGUuCiAgLy8vCiAgLy8vIEluIHRoaXMgbm90YXRpb24sIG5vZGUgbmFtZXMgdGhhdCBjb250YWluIGAvYCwgYCFgLCBgKmAsIG9yIGAuLi5gCiAgLy8vIG11c3QgYmUgcXVvdGVkIGFzIEpTT04gc3RyaW5ncy4KICAvLy8KICAvLy8gRm9yIGV4YW1wbGU6CiAgLy8vCiAgLy8vIGBgYGphdmFzY3JpcHQKICAvLy8gcGFyc2VyLndpdGhQcm9wcygKICAvLy8gICBzdHlsZVRhZ3MoewogIC8vLyAgICAgLy8gU3R5bGUgTnVtYmVyIGFuZCBCaWdOdW1iZXIgbm9kZXMKICAvLy8gICAgICJOdW1iZXIgQmlnTnVtYmVyIjogdGFncy5udW1iZXIsCiAgLy8vICAgICAvLyBTdHlsZSBFc2NhcGUgbm9kZXMgd2hvc2UgcGFyZW50IGlzIFN0cmluZwogIC8vLyAgICAgIlN0cmluZy9Fc2NhcGUiOiB0YWdzLmVzY2FwZSwKICAvLy8gICAgIC8vIFN0eWxlIGFueXRoaW5nIGluc2lkZSBBdHRyaWJ1dGVzIG5vZGVzCiAgLy8vICAgICAiQXR0cmlidXRlcyEiOiB0YWdzLm1ldGEsCiAgLy8vICAgICAvLyBBZGQgYSBzdHlsZSB0byBhbGwgY29udGVudCBpbnNpZGUgSXRhbGljIG5vZGVzCiAgLy8vICAgICAiSXRhbGljLy4uLiI6IHRhZ3MuZW1waGFzaXMsCiAgLy8vICAgICAvLyBTdHlsZSBJbnZhbGlkU3RyaW5nIG5vZGVzIGFzIGJvdGggYHN0cmluZ2AgYW5kIGBpbnZhbGlkYAogIC8vLyAgICAgIkludmFsaWRTdHJpbmciOiBbdGFncy5zdHJpbmcsIHRhZ3MuaW52YWxpZF0sCiAgLy8vICAgICAvLyBTdHlsZSB0aGUgbm9kZSBuYW1lZCAiLyIgYXMgcHVuY3R1YXRpb24KICAvLy8gICAgICciLyInOiB0YWdzLnB1bmN0dWF0aW9uCiAgLy8vICAgfSkKICAvLy8gKQogIC8vLyBgYGAKICBmdW5jdGlvbiBzdHlsZVRhZ3Moc3BlYykgewogICAgICBsZXQgYnlOYW1lID0gT2JqZWN0LmNyZWF0ZShudWxsKTsKICAgICAgZm9yIChsZXQgcHJvcCBpbiBzcGVjKSB7CiAgICAgICAgICBsZXQgdGFncyA9IHNwZWNbcHJvcF07CiAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkodGFncykpCiAgICAgICAgICAgICAgdGFncyA9IFt0YWdzXTsKICAgICAgICAgIGZvciAobGV0IHBhcnQgb2YgcHJvcC5zcGxpdCgiICIpKQogICAgICAgICAgICAgIGlmIChwYXJ0KSB7CiAgICAgICAgICAgICAgICAgIGxldCBwaWVjZXMgPSBbXSwgbW9kZSA9IDIgLyogTm9ybWFsICovLCByZXN0ID0gcGFydDsKICAgICAgICAgICAgICAgICAgZm9yIChsZXQgcG9zID0gMDs7KSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdCA9PSAiLi4uIiAmJiBwb3MgPiAwICYmIHBvcyArIDMgPT0gcGFydC5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RlID0gMSAvKiBJbmhlcml0ICovOwogICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgbGV0IG0gPSAvXiIoPzpbXiJcXF18XFwuKSo/InxbXlwvIV0rLy5leGVjKHJlc3QpOwogICAgICAgICAgICAgICAgICAgICAgaWYgKCFtKQogICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCJJbnZhbGlkIHBhdGg6ICIgKyBwYXJ0KTsKICAgICAgICAgICAgICAgICAgICAgIHBpZWNlcy5wdXNoKG1bMF0gPT0gIioiID8gIiIgOiBtWzBdWzBdID09ICciJyA/IEpTT04ucGFyc2UobVswXSkgOiBtWzBdKTsKICAgICAgICAgICAgICAgICAgICAgIHBvcyArPSBtWzBdLmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICAgIGlmIChwb3MgPT0gcGFydC5sZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICBsZXQgbmV4dCA9IHBhcnRbcG9zKytdOwogICAgICAgICAgICAgICAgICAgICAgaWYgKHBvcyA9PSBwYXJ0Lmxlbmd0aCAmJiBuZXh0ID09ICIhIikgewogICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGUgPSAwIC8qIE9wYXF1ZSAqLzsKICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXh0ICE9ICIvIikKICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBwYXRoOiAiICsgcGFydCk7CiAgICAgICAgICAgICAgICAgICAgICByZXN0ID0gcGFydC5zbGljZShwb3MpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGxldCBsYXN0ID0gcGllY2VzLmxlbmd0aCAtIDEsIGlubmVyID0gcGllY2VzW2xhc3RdOwogICAgICAgICAgICAgICAgICBpZiAoIWlubmVyKQogICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkludmFsaWQgcGF0aDogIiArIHBhcnQpOwogICAgICAgICAgICAgICAgICBsZXQgcnVsZSA9IG5ldyBSdWxlKHRhZ3MsIG1vZGUsIGxhc3QgPiAwID8gcGllY2VzLnNsaWNlKDAsIGxhc3QpIDogbnVsbCk7CiAgICAgICAgICAgICAgICAgIGJ5TmFtZVtpbm5lcl0gPSBydWxlLnNvcnQoYnlOYW1lW2lubmVyXSk7CiAgICAgICAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBydWxlTm9kZVByb3AuYWRkKGJ5TmFtZSk7CiAgfQogIGNvbnN0IHJ1bGVOb2RlUHJvcCA9IG5ldyBOb2RlUHJvcCgpOwogIGNsYXNzIFJ1bGUgewogICAgICBjb25zdHJ1Y3Rvcih0YWdzLCBtb2RlLCBjb250ZXh0LCBuZXh0KSB7CiAgICAgICAgICB0aGlzLnRhZ3MgPSB0YWdzOwogICAgICAgICAgdGhpcy5tb2RlID0gbW9kZTsKICAgICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7CiAgICAgICAgICB0aGlzLm5leHQgPSBuZXh0OwogICAgICB9CiAgICAgIGdldCBvcGFxdWUoKSB7IHJldHVybiB0aGlzLm1vZGUgPT0gMCAvKiBPcGFxdWUgKi87IH0KICAgICAgZ2V0IGluaGVyaXQoKSB7IHJldHVybiB0aGlzLm1vZGUgPT0gMSAvKiBJbmhlcml0ICovOyB9CiAgICAgIHNvcnQob3RoZXIpIHsKICAgICAgICAgIGlmICghb3RoZXIgfHwgb3RoZXIuZGVwdGggPCB0aGlzLmRlcHRoKSB7CiAgICAgICAgICAgICAgdGhpcy5uZXh0ID0gb3RoZXI7CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgICAgICB9CiAgICAgICAgICBvdGhlci5uZXh0ID0gdGhpcy5zb3J0KG90aGVyLm5leHQpOwogICAgICAgICAgcmV0dXJuIG90aGVyOwogICAgICB9CiAgICAgIGdldCBkZXB0aCgpIHsgcmV0dXJuIHRoaXMuY29udGV4dCA/IHRoaXMuY29udGV4dC5sZW5ndGggOiAwOyB9CiAgfQogIFJ1bGUuZW1wdHkgPSBuZXcgUnVsZShbXSwgMiAvKiBOb3JtYWwgKi8sIG51bGwpOwogIC8vLyBEZWZpbmUgYSBbaGlnaGxpZ2h0ZXJdKCNoaWdobGlnaHQuSGlnaGxpZ2h0ZXIpIGZyb20gYW4gYXJyYXkgb2YKICAvLy8gdGFnL2NsYXNzIHBhaXJzLiBDbGFzc2VzIGFzc29jaWF0ZWQgd2l0aCBtb3JlIHNwZWNpZmljIHRhZ3Mgd2lsbAogIC8vLyB0YWtlIHByZWNlZGVuY2UuCiAgZnVuY3Rpb24gdGFnSGlnaGxpZ2h0ZXIodGFncywgb3B0aW9ucykgewogICAgICBsZXQgbWFwID0gT2JqZWN0LmNyZWF0ZShudWxsKTsKICAgICAgZm9yIChsZXQgc3R5bGUgb2YgdGFncykgewogICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHN0eWxlLnRhZykpCiAgICAgICAgICAgICAgbWFwW3N0eWxlLnRhZy5pZF0gPSBzdHlsZS5jbGFzczsKICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICBmb3IgKGxldCB0YWcgb2Ygc3R5bGUudGFnKQogICAgICAgICAgICAgICAgICBtYXBbdGFnLmlkXSA9IHN0eWxlLmNsYXNzOwogICAgICB9CiAgICAgIGxldCB7IHNjb3BlLCBhbGwgPSBudWxsIH0gPSBvcHRpb25zIHx8IHt9OwogICAgICByZXR1cm4gewogICAgICAgICAgc3R5bGU6ICh0YWdzKSA9PiB7CiAgICAgICAgICAgICAgbGV0IGNscyA9IGFsbDsKICAgICAgICAgICAgICBmb3IgKGxldCB0YWcgb2YgdGFncykgewogICAgICAgICAgICAgICAgICBmb3IgKGxldCBzdWIgb2YgdGFnLnNldCkgewogICAgICAgICAgICAgICAgICAgICAgbGV0IHRhZ0NsYXNzID0gbWFwW3N1Yi5pZF07CiAgICAgICAgICAgICAgICAgICAgICBpZiAodGFnQ2xhc3MpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBjbHMgPSBjbHMgPyBjbHMgKyAiICIgKyB0YWdDbGFzcyA6IHRhZ0NsYXNzOwogICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHJldHVybiBjbHM7CiAgICAgICAgICB9LAogICAgICAgICAgc2NvcGUKICAgICAgfTsKICB9CiAgY29uc3QgdCQzID0gVGFnLmRlZmluZTsKICBjb25zdCBjb21tZW50ID0gdCQzKCksIG5hbWUgPSB0JDMoKSwgdHlwZU5hbWUgPSB0JDMobmFtZSksIHByb3BlcnR5TmFtZSA9IHQkMyhuYW1lKSwgbGl0ZXJhbCA9IHQkMygpLCBzdHJpbmcgPSB0JDMobGl0ZXJhbCksIG51bWJlciA9IHQkMyhsaXRlcmFsKSwgY29udGVudCA9IHQkMygpLCBoZWFkaW5nID0gdCQzKGNvbnRlbnQpLCBrZXl3b3JkID0gdCQzKCksIG9wZXJhdG9yID0gdCQzKCksIHB1bmN0dWF0aW9uID0gdCQzKCksIGJyYWNrZXQgPSB0JDMocHVuY3R1YXRpb24pLCBtZXRhID0gdCQzKCk7CiAgLy8vIFRoZSBkZWZhdWx0IHNldCBvZiBoaWdobGlnaHRpbmcgW3RhZ3NdKCNoaWdobGlnaHQuVGFnKS4KICAvLy8KICAvLy8gVGhpcyBjb2xsZWN0aW9uIGlzIGhlYXZpbHkgYmlhc2VkIHRvd2FyZHMgcHJvZ3JhbW1pbmcgbGFuZ3VhZ2VzLAogIC8vLyBhbmQgbmVjZXNzYXJpbHkgaW5jb21wbGV0ZS4gQSBmdWxsIG9udG9sb2d5IG9mIHN5bnRhY3RpYwogIC8vLyBjb25zdHJ1Y3RzIHdvdWxkIGZpbGwgYSBzdGFjayBvZiBib29rcywgYW5kIGJlIGltcHJhY3RpY2FsIHRvCiAgLy8vIHdyaXRlIHRoZW1lcyBmb3IuIFNvIHRyeSB0byBtYWtlIGRvIHdpdGggdGhpcyBzZXQuIElmIGFsbCBlbHNlCiAgLy8vIGZhaWxzLCBbb3BlbiBhbgogIC8vLyBpc3N1ZV0oaHR0cHM6Ly9naXRodWIuY29tL2NvZGVtaXJyb3IvY29kZW1pcnJvci5uZXh0KSB0byBwcm9wb3NlIGEKICAvLy8gbmV3IHRhZywgb3IgW2RlZmluZV0oI2hpZ2hsaWdodC5UYWdeZGVmaW5lKSBhIGxvY2FsIGN1c3RvbSB0YWcgZm9yCiAgLy8vIHlvdXIgdXNlIGNhc2UuCiAgLy8vCiAgLy8vIE5vdGUgdGhhdCBpdCBpcyBub3Qgb2JsaWdhdG9yeSB0byBhbHdheXMgYXR0YWNoIHRoZSBtb3N0IHNwZWNpZmljCiAgLy8vIHRhZyBwb3NzaWJsZSB0byBhbiBlbGVtZW504oCUaWYgeW91ciBncmFtbWFyIGNhbid0IGVhc2lseQogIC8vLyBkaXN0aW5ndWlzaCBhIGNlcnRhaW4gdHlwZSBvZiBlbGVtZW50IChzdWNoIGFzIGEgbG9jYWwgdmFyaWFibGUpLAogIC8vLyBpdCBpcyBva2F5IHRvIHN0eWxlIGl0IGFzIGl0cyBtb3JlIGdlbmVyYWwgdmFyaWFudCAoYSB2YXJpYWJsZSkuCiAgLy8vIAogIC8vLyBGb3IgdGFncyB0aGF0IGV4dGVuZCBzb21lIHBhcmVudCB0YWcsIHRoZSBkb2N1bWVudGF0aW9uIGxpbmtzIHRvCiAgLy8vIHRoZSBwYXJlbnQuCiAgY29uc3QgdGFncyA9IHsKICAgICAgLy8vIEEgY29tbWVudC4KICAgICAgY29tbWVudCwKICAgICAgLy8vIEEgbGluZSBbY29tbWVudF0oI2hpZ2hsaWdodC50YWdzLmNvbW1lbnQpLgogICAgICBsaW5lQ29tbWVudDogdCQzKGNvbW1lbnQpLAogICAgICAvLy8gQSBibG9jayBbY29tbWVudF0oI2hpZ2hsaWdodC50YWdzLmNvbW1lbnQpLgogICAgICBibG9ja0NvbW1lbnQ6IHQkMyhjb21tZW50KSwKICAgICAgLy8vIEEgZG9jdW1lbnRhdGlvbiBbY29tbWVudF0oI2hpZ2hsaWdodC50YWdzLmNvbW1lbnQpLgogICAgICBkb2NDb21tZW50OiB0JDMoY29tbWVudCksCiAgICAgIC8vLyBBbnkga2luZCBvZiBpZGVudGlmaWVyLgogICAgICBuYW1lLAogICAgICAvLy8gVGhlIFtuYW1lXSgjaGlnaGxpZ2h0LnRhZ3MubmFtZSkgb2YgYSB2YXJpYWJsZS4KICAgICAgdmFyaWFibGVOYW1lOiB0JDMobmFtZSksCiAgICAgIC8vLyBBIHR5cGUgW25hbWVdKCNoaWdobGlnaHQudGFncy5uYW1lKS4KICAgICAgdHlwZU5hbWU6IHR5cGVOYW1lLAogICAgICAvLy8gQSB0YWcgbmFtZSAoc3VidGFnIG9mIFtgdHlwZU5hbWVgXSgjaGlnaGxpZ2h0LnRhZ3MudHlwZU5hbWUpKS4KICAgICAgdGFnTmFtZTogdCQzKHR5cGVOYW1lKSwKICAgICAgLy8vIEEgcHJvcGVydHkgb3IgZmllbGQgW25hbWVdKCNoaWdobGlnaHQudGFncy5uYW1lKS4KICAgICAgcHJvcGVydHlOYW1lOiBwcm9wZXJ0eU5hbWUsCiAgICAgIC8vLyBBbiBhdHRyaWJ1dGUgbmFtZSAoc3VidGFnIG9mIFtgcHJvcGVydHlOYW1lYF0oI2hpZ2hsaWdodC50YWdzLnByb3BlcnR5TmFtZSkpLgogICAgICBhdHRyaWJ1dGVOYW1lOiB0JDMocHJvcGVydHlOYW1lKSwKICAgICAgLy8vIFRoZSBbbmFtZV0oI2hpZ2hsaWdodC50YWdzLm5hbWUpIG9mIGEgY2xhc3MuCiAgICAgIGNsYXNzTmFtZTogdCQzKG5hbWUpLAogICAgICAvLy8gQSBsYWJlbCBbbmFtZV0oI2hpZ2hsaWdodC50YWdzLm5hbWUpLgogICAgICBsYWJlbE5hbWU6IHQkMyhuYW1lKSwKICAgICAgLy8vIEEgbmFtZXNwYWNlIFtuYW1lXSgjaGlnaGxpZ2h0LnRhZ3MubmFtZSkuCiAgICAgIG5hbWVzcGFjZTogdCQzKG5hbWUpLAogICAgICAvLy8gVGhlIFtuYW1lXSgjaGlnaGxpZ2h0LnRhZ3MubmFtZSkgb2YgYSBtYWNyby4KICAgICAgbWFjcm9OYW1lOiB0JDMobmFtZSksCiAgICAgIC8vLyBBIGxpdGVyYWwgdmFsdWUuCiAgICAgIGxpdGVyYWwsCiAgICAgIC8vLyBBIHN0cmluZyBbbGl0ZXJhbF0oI2hpZ2hsaWdodC50YWdzLmxpdGVyYWwpLgogICAgICBzdHJpbmcsCiAgICAgIC8vLyBBIGRvY3VtZW50YXRpb24gW3N0cmluZ10oI2hpZ2hsaWdodC50YWdzLnN0cmluZykuCiAgICAgIGRvY1N0cmluZzogdCQzKHN0cmluZyksCiAgICAgIC8vLyBBIGNoYXJhY3RlciBsaXRlcmFsIChzdWJ0YWcgb2YgW3N0cmluZ10oI2hpZ2hsaWdodC50YWdzLnN0cmluZykpLgogICAgICBjaGFyYWN0ZXI6IHQkMyhzdHJpbmcpLAogICAgICAvLy8gQW4gYXR0cmlidXRlIHZhbHVlIChzdWJ0YWcgb2YgW3N0cmluZ10oI2hpZ2hsaWdodC50YWdzLnN0cmluZykpLgogICAgICBhdHRyaWJ1dGVWYWx1ZTogdCQzKHN0cmluZyksCiAgICAgIC8vLyBBIG51bWJlciBbbGl0ZXJhbF0oI2hpZ2hsaWdodC50YWdzLmxpdGVyYWwpLgogICAgICBudW1iZXIsCiAgICAgIC8vLyBBbiBpbnRlZ2VyIFtudW1iZXJdKCNoaWdobGlnaHQudGFncy5udW1iZXIpIGxpdGVyYWwuCiAgICAgIGludGVnZXI6IHQkMyhudW1iZXIpLAogICAgICAvLy8gQSBmbG9hdGluZy1wb2ludCBbbnVtYmVyXSgjaGlnaGxpZ2h0LnRhZ3MubnVtYmVyKSBsaXRlcmFsLgogICAgICBmbG9hdDogdCQzKG51bWJlciksCiAgICAgIC8vLyBBIGJvb2xlYW4gW2xpdGVyYWxdKCNoaWdobGlnaHQudGFncy5saXRlcmFsKS4KICAgICAgYm9vbDogdCQzKGxpdGVyYWwpLAogICAgICAvLy8gUmVndWxhciBleHByZXNzaW9uIFtsaXRlcmFsXSgjaGlnaGxpZ2h0LnRhZ3MubGl0ZXJhbCkuCiAgICAgIHJlZ2V4cDogdCQzKGxpdGVyYWwpLAogICAgICAvLy8gQW4gZXNjYXBlIFtsaXRlcmFsXSgjaGlnaGxpZ2h0LnRhZ3MubGl0ZXJhbCksIGZvciBleGFtcGxlIGEKICAgICAgLy8vIGJhY2tzbGFzaCBlc2NhcGUgaW4gYSBzdHJpbmcuCiAgICAgIGVzY2FwZTogdCQzKGxpdGVyYWwpLAogICAgICAvLy8gQSBjb2xvciBbbGl0ZXJhbF0oI2hpZ2hsaWdodC50YWdzLmxpdGVyYWwpLgogICAgICBjb2xvcjogdCQzKGxpdGVyYWwpLAogICAgICAvLy8gQSBVUkwgW2xpdGVyYWxdKCNoaWdobGlnaHQudGFncy5saXRlcmFsKS4KICAgICAgdXJsOiB0JDMobGl0ZXJhbCksCiAgICAgIC8vLyBBIGxhbmd1YWdlIGtleXdvcmQuCiAgICAgIGtleXdvcmQsCiAgICAgIC8vLyBUaGUgW2tleXdvcmRdKCNoaWdobGlnaHQudGFncy5rZXl3b3JkKSBmb3IgdGhlIHNlbGYgb3IgdGhpcwogICAgICAvLy8gb2JqZWN0LgogICAgICBzZWxmOiB0JDMoa2V5d29yZCksCiAgICAgIC8vLyBUaGUgW2tleXdvcmRdKCNoaWdobGlnaHQudGFncy5rZXl3b3JkKSBmb3IgbnVsbC4KICAgICAgbnVsbDogdCQzKGtleXdvcmQpLAogICAgICAvLy8gQSBba2V5d29yZF0oI2hpZ2hsaWdodC50YWdzLmtleXdvcmQpIGRlbm90aW5nIHNvbWUgYXRvbWljIHZhbHVlLgogICAgICBhdG9tOiB0JDMoa2V5d29yZCksCiAgICAgIC8vLyBBIFtrZXl3b3JkXSgjaGlnaGxpZ2h0LnRhZ3Mua2V5d29yZCkgdGhhdCByZXByZXNlbnRzIGEgdW5pdC4KICAgICAgdW5pdDogdCQzKGtleXdvcmQpLAogICAgICAvLy8gQSBtb2RpZmllciBba2V5d29yZF0oI2hpZ2hsaWdodC50YWdzLmtleXdvcmQpLgogICAgICBtb2RpZmllcjogdCQzKGtleXdvcmQpLAogICAgICAvLy8gQSBba2V5d29yZF0oI2hpZ2hsaWdodC50YWdzLmtleXdvcmQpIHRoYXQgYWN0cyBhcyBhbiBvcGVyYXRvci4KICAgICAgb3BlcmF0b3JLZXl3b3JkOiB0JDMoa2V5d29yZCksCiAgICAgIC8vLyBBIGNvbnRyb2wtZmxvdyByZWxhdGVkIFtrZXl3b3JkXSgjaGlnaGxpZ2h0LnRhZ3Mua2V5d29yZCkuCiAgICAgIGNvbnRyb2xLZXl3b3JkOiB0JDMoa2V5d29yZCksCiAgICAgIC8vLyBBIFtrZXl3b3JkXSgjaGlnaGxpZ2h0LnRhZ3Mua2V5d29yZCkgdGhhdCBkZWZpbmVzIHNvbWV0aGluZy4KICAgICAgZGVmaW5pdGlvbktleXdvcmQ6IHQkMyhrZXl3b3JkKSwKICAgICAgLy8vIEEgW2tleXdvcmRdKCNoaWdobGlnaHQudGFncy5rZXl3b3JkKSByZWxhdGVkIHRvIGRlZmluaW5nIG9yCiAgICAgIC8vLyBpbnRlcmZhY2luZyB3aXRoIG1vZHVsZXMuCiAgICAgIG1vZHVsZUtleXdvcmQ6IHQkMyhrZXl3b3JkKSwKICAgICAgLy8vIEFuIG9wZXJhdG9yLgogICAgICBvcGVyYXRvciwKICAgICAgLy8vIEFuIFtvcGVyYXRvcl0oI2hpZ2hsaWdodC50YWdzLm9wZXJhdG9yKSB0aGF0IGRlcmVmZXJlbmNlcyBzb21ldGhpbmcuCiAgICAgIGRlcmVmT3BlcmF0b3I6IHQkMyhvcGVyYXRvciksCiAgICAgIC8vLyBBcml0aG1ldGljLXJlbGF0ZWQgW29wZXJhdG9yXSgjaGlnaGxpZ2h0LnRhZ3Mub3BlcmF0b3IpLgogICAgICBhcml0aG1ldGljT3BlcmF0b3I6IHQkMyhvcGVyYXRvciksCiAgICAgIC8vLyBMb2dpY2FsIFtvcGVyYXRvcl0oI2hpZ2hsaWdodC50YWdzLm9wZXJhdG9yKS4KICAgICAgbG9naWNPcGVyYXRvcjogdCQzKG9wZXJhdG9yKSwKICAgICAgLy8vIEJpdCBbb3BlcmF0b3JdKCNoaWdobGlnaHQudGFncy5vcGVyYXRvcikuCiAgICAgIGJpdHdpc2VPcGVyYXRvcjogdCQzKG9wZXJhdG9yKSwKICAgICAgLy8vIENvbXBhcmlzb24gW29wZXJhdG9yXSgjaGlnaGxpZ2h0LnRhZ3Mub3BlcmF0b3IpLgogICAgICBjb21wYXJlT3BlcmF0b3I6IHQkMyhvcGVyYXRvciksCiAgICAgIC8vLyBbT3BlcmF0b3JdKCNoaWdobGlnaHQudGFncy5vcGVyYXRvcikgdGhhdCB1cGRhdGVzIGl0cyBvcGVyYW5kLgogICAgICB1cGRhdGVPcGVyYXRvcjogdCQzKG9wZXJhdG9yKSwKICAgICAgLy8vIFtPcGVyYXRvcl0oI2hpZ2hsaWdodC50YWdzLm9wZXJhdG9yKSB0aGF0IGRlZmluZXMgc29tZXRoaW5nLgogICAgICBkZWZpbml0aW9uT3BlcmF0b3I6IHQkMyhvcGVyYXRvciksCiAgICAgIC8vLyBUeXBlLXJlbGF0ZWQgW29wZXJhdG9yXSgjaGlnaGxpZ2h0LnRhZ3Mub3BlcmF0b3IpLgogICAgICB0eXBlT3BlcmF0b3I6IHQkMyhvcGVyYXRvciksCiAgICAgIC8vLyBDb250cm9sLWZsb3cgW29wZXJhdG9yXSgjaGlnaGxpZ2h0LnRhZ3Mub3BlcmF0b3IpLgogICAgICBjb250cm9sT3BlcmF0b3I6IHQkMyhvcGVyYXRvciksCiAgICAgIC8vLyBQcm9ncmFtIG9yIG1hcmt1cCBwdW5jdHVhdGlvbi4KICAgICAgcHVuY3R1YXRpb24sCiAgICAgIC8vLyBbUHVuY3R1YXRpb25dKCNoaWdobGlnaHQudGFncy5wdW5jdHVhdGlvbikgdGhhdCBzZXBhcmF0ZXMKICAgICAgLy8vIHRoaW5ncy4KICAgICAgc2VwYXJhdG9yOiB0JDMocHVuY3R1YXRpb24pLAogICAgICAvLy8gQnJhY2tldC1zdHlsZSBbcHVuY3R1YXRpb25dKCNoaWdobGlnaHQudGFncy5wdW5jdHVhdGlvbikuCiAgICAgIGJyYWNrZXQsCiAgICAgIC8vLyBBbmdsZSBbYnJhY2tldHNdKCNoaWdobGlnaHQudGFncy5icmFja2V0KSAodXN1YWxseSBgPGAgYW5kIGA+YAogICAgICAvLy8gdG9rZW5zKS4KICAgICAgYW5nbGVCcmFja2V0OiB0JDMoYnJhY2tldCksCiAgICAgIC8vLyBTcXVhcmUgW2JyYWNrZXRzXSgjaGlnaGxpZ2h0LnRhZ3MuYnJhY2tldCkgKHVzdWFsbHkgYFtgIGFuZCBgXWAKICAgICAgLy8vIHRva2VucykuCiAgICAgIHNxdWFyZUJyYWNrZXQ6IHQkMyhicmFja2V0KSwKICAgICAgLy8vIFBhcmVudGhlc2VzICh1c3VhbGx5IGAoYCBhbmQgYClgIHRva2VucykuIFN1YnRhZyBvZgogICAgICAvLy8gW2JyYWNrZXRdKCNoaWdobGlnaHQudGFncy5icmFja2V0KS4KICAgICAgcGFyZW46IHQkMyhicmFja2V0KSwKICAgICAgLy8vIEJyYWNlcyAodXN1YWxseSBge2AgYW5kIGB9YCB0b2tlbnMpLiBTdWJ0YWcgb2YKICAgICAgLy8vIFticmFja2V0XSgjaGlnaGxpZ2h0LnRhZ3MuYnJhY2tldCkuCiAgICAgIGJyYWNlOiB0JDMoYnJhY2tldCksCiAgICAgIC8vLyBDb250ZW50LCBmb3IgZXhhbXBsZSBwbGFpbiB0ZXh0IGluIFhNTCBvciBtYXJrdXAgZG9jdW1lbnRzLgogICAgICBjb250ZW50LAogICAgICAvLy8gW0NvbnRlbnRdKCNoaWdobGlnaHQudGFncy5jb250ZW50KSB0aGF0IHJlcHJlc2VudHMgYSBoZWFkaW5nLgogICAgICBoZWFkaW5nLAogICAgICAvLy8gQSBsZXZlbCAxIFtoZWFkaW5nXSgjaGlnaGxpZ2h0LnRhZ3MuaGVhZGluZykuCiAgICAgIGhlYWRpbmcxOiB0JDMoaGVhZGluZyksCiAgICAgIC8vLyBBIGxldmVsIDIgW2hlYWRpbmddKCNoaWdobGlnaHQudGFncy5oZWFkaW5nKS4KICAgICAgaGVhZGluZzI6IHQkMyhoZWFkaW5nKSwKICAgICAgLy8vIEEgbGV2ZWwgMyBbaGVhZGluZ10oI2hpZ2hsaWdodC50YWdzLmhlYWRpbmcpLgogICAgICBoZWFkaW5nMzogdCQzKGhlYWRpbmcpLAogICAgICAvLy8gQSBsZXZlbCA0IFtoZWFkaW5nXSgjaGlnaGxpZ2h0LnRhZ3MuaGVhZGluZykuCiAgICAgIGhlYWRpbmc0OiB0JDMoaGVhZGluZyksCiAgICAgIC8vLyBBIGxldmVsIDUgW2hlYWRpbmddKCNoaWdobGlnaHQudGFncy5oZWFkaW5nKS4KICAgICAgaGVhZGluZzU6IHQkMyhoZWFkaW5nKSwKICAgICAgLy8vIEEgbGV2ZWwgNiBbaGVhZGluZ10oI2hpZ2hsaWdodC50YWdzLmhlYWRpbmcpLgogICAgICBoZWFkaW5nNjogdCQzKGhlYWRpbmcpLAogICAgICAvLy8gQSBwcm9zZSBzZXBhcmF0b3IgKHN1Y2ggYXMgYSBob3Jpem9udGFsIHJ1bGUpLgogICAgICBjb250ZW50U2VwYXJhdG9yOiB0JDMoY29udGVudCksCiAgICAgIC8vLyBbQ29udGVudF0oI2hpZ2hsaWdodC50YWdzLmNvbnRlbnQpIHRoYXQgcmVwcmVzZW50cyBhIGxpc3QuCiAgICAgIGxpc3Q6IHQkMyhjb250ZW50KSwKICAgICAgLy8vIFtDb250ZW50XSgjaGlnaGxpZ2h0LnRhZ3MuY29udGVudCkgdGhhdCByZXByZXNlbnRzIGEgcXVvdGUuCiAgICAgIHF1b3RlOiB0JDMoY29udGVudCksCiAgICAgIC8vLyBbQ29udGVudF0oI2hpZ2hsaWdodC50YWdzLmNvbnRlbnQpIHRoYXQgaXMgZW1waGFzaXplZC4KICAgICAgZW1waGFzaXM6IHQkMyhjb250ZW50KSwKICAgICAgLy8vIFtDb250ZW50XSgjaGlnaGxpZ2h0LnRhZ3MuY29udGVudCkgdGhhdCBpcyBzdHlsZWQgc3Ryb25nLgogICAgICBzdHJvbmc6IHQkMyhjb250ZW50KSwKICAgICAgLy8vIFtDb250ZW50XSgjaGlnaGxpZ2h0LnRhZ3MuY29udGVudCkgdGhhdCBpcyBwYXJ0IG9mIGEgbGluay4KICAgICAgbGluazogdCQzKGNvbnRlbnQpLAogICAgICAvLy8gW0NvbnRlbnRdKCNoaWdobGlnaHQudGFncy5jb250ZW50KSB0aGF0IGlzIHN0eWxlZCBhcyBjb2RlIG9yCiAgICAgIC8vLyBtb25vc3BhY2UuCiAgICAgIG1vbm9zcGFjZTogdCQzKGNvbnRlbnQpLAogICAgICAvLy8gW0NvbnRlbnRdKCNoaWdobGlnaHQudGFncy5jb250ZW50KSB0aGF0IGhhcyBhIHN0cmlrZS10aHJvdWdoCiAgICAgIC8vLyBzdHlsZS4KICAgICAgc3RyaWtldGhyb3VnaDogdCQzKGNvbnRlbnQpLAogICAgICAvLy8gSW5zZXJ0ZWQgdGV4dCBpbiBhIGNoYW5nZS10cmFja2luZyBmb3JtYXQuCiAgICAgIGluc2VydGVkOiB0JDMoKSwKICAgICAgLy8vIERlbGV0ZWQgdGV4dC4KICAgICAgZGVsZXRlZDogdCQzKCksCiAgICAgIC8vLyBDaGFuZ2VkIHRleHQuCiAgICAgIGNoYW5nZWQ6IHQkMygpLAogICAgICAvLy8gQW4gaW52YWxpZCBvciB1bnN5bnRhY3RpYyBlbGVtZW50LgogICAgICBpbnZhbGlkOiB0JDMoKSwKICAgICAgLy8vIE1ldGFkYXRhIG9yIG1ldGEtaW5zdHJ1Y3Rpb24uCiAgICAgIG1ldGEsCiAgICAgIC8vLyBbTWV0YWRhdGFdKCNoaWdobGlnaHQudGFncy5tZXRhKSB0aGF0IGFwcGxpZXMgdG8gdGhlIGVudGlyZQogICAgICAvLy8gZG9jdW1lbnQuCiAgICAgIGRvY3VtZW50TWV0YTogdCQzKG1ldGEpLAogICAgICAvLy8gW01ldGFkYXRhXSgjaGlnaGxpZ2h0LnRhZ3MubWV0YSkgdGhhdCBhbm5vdGF0ZXMgb3IgYWRkcwogICAgICAvLy8gYXR0cmlidXRlcyB0byBhIGdpdmVuIHN5bnRhY3RpYyBlbGVtZW50LgogICAgICBhbm5vdGF0aW9uOiB0JDMobWV0YSksCiAgICAgIC8vLyBQcm9jZXNzaW5nIGluc3RydWN0aW9uIG9yIHByZXByb2Nlc3NvciBkaXJlY3RpdmUuIFN1YnRhZyBvZgogICAgICAvLy8gW21ldGFdKCNoaWdobGlnaHQudGFncy5tZXRhKS4KICAgICAgcHJvY2Vzc2luZ0luc3RydWN0aW9uOiB0JDMobWV0YSksCiAgICAgIC8vLyBbTW9kaWZpZXJdKCNoaWdobGlnaHQuVGFnXmRlZmluZU1vZGlmaWVyKSB0aGF0IGluZGljYXRlcyB0aGF0IGEKICAgICAgLy8vIGdpdmVuIGVsZW1lbnQgaXMgYmVpbmcgZGVmaW5lZC4gRXhwZWN0ZWQgdG8gYmUgdXNlZCB3aXRoIHRoZQogICAgICAvLy8gdmFyaW91cyBbbmFtZV0oI2hpZ2hsaWdodC50YWdzLm5hbWUpIHRhZ3MuCiAgICAgIGRlZmluaXRpb246IFRhZy5kZWZpbmVNb2RpZmllcigpLAogICAgICAvLy8gW01vZGlmaWVyXSgjaGlnaGxpZ2h0LlRhZ15kZWZpbmVNb2RpZmllcikgdGhhdCBpbmRpY2F0ZXMgdGhhdAogICAgICAvLy8gc29tZXRoaW5nIGlzIGNvbnN0YW50LiBNb3N0bHkgZXhwZWN0ZWQgdG8gYmUgdXNlZCB3aXRoCiAgICAgIC8vLyBbdmFyaWFibGUgbmFtZXNdKCNoaWdobGlnaHQudGFncy52YXJpYWJsZU5hbWUpLgogICAgICBjb25zdGFudDogVGFnLmRlZmluZU1vZGlmaWVyKCksCiAgICAgIC8vLyBbTW9kaWZpZXJdKCNoaWdobGlnaHQuVGFnXmRlZmluZU1vZGlmaWVyKSB1c2VkIHRvIGluZGljYXRlIHRoYXQKICAgICAgLy8vIGEgW3ZhcmlhYmxlXSgjaGlnaGxpZ2h0LnRhZ3MudmFyaWFibGVOYW1lKSBvciBbcHJvcGVydHkKICAgICAgLy8vIG5hbWVdKCNoaWdobGlnaHQudGFncy5wcm9wZXJ0eU5hbWUpIGlzIGJlaW5nIGNhbGxlZCBvciBkZWZpbmVkCiAgICAgIC8vLyBhcyBhIGZ1bmN0aW9uLgogICAgICBmdW5jdGlvbjogVGFnLmRlZmluZU1vZGlmaWVyKCksCiAgICAgIC8vLyBbTW9kaWZpZXJdKCNoaWdobGlnaHQuVGFnXmRlZmluZU1vZGlmaWVyKSB0aGF0IGNhbiBiZSBhcHBsaWVkIHRvCiAgICAgIC8vLyBbbmFtZXNdKCNoaWdobGlnaHQudGFncy5uYW1lKSB0byBpbmRpY2F0ZSB0aGF0IHRoZXkgYmVsb25nIHRvCiAgICAgIC8vLyB0aGUgbGFuZ3VhZ2UncyBzdGFuZGFyZCBlbnZpcm9ubWVudC4KICAgICAgc3RhbmRhcmQ6IFRhZy5kZWZpbmVNb2RpZmllcigpLAogICAgICAvLy8gW01vZGlmaWVyXSgjaGlnaGxpZ2h0LlRhZ15kZWZpbmVNb2RpZmllcikgdGhhdCBpbmRpY2F0ZXMgYSBnaXZlbgogICAgICAvLy8gW25hbWVzXSgjaGlnaGxpZ2h0LnRhZ3MubmFtZSkgaXMgbG9jYWwgdG8gc29tZSBzY29wZS4KICAgICAgbG9jYWw6IFRhZy5kZWZpbmVNb2RpZmllcigpLAogICAgICAvLy8gQSBnZW5lcmljIHZhcmlhbnQgW21vZGlmaWVyXSgjaGlnaGxpZ2h0LlRhZ15kZWZpbmVNb2RpZmllcikgdGhhdAogICAgICAvLy8gY2FuIGJlIHVzZWQgdG8gdGFnIGxhbmd1YWdlLXNwZWNpZmljIGFsdGVybmF0aXZlIHZhcmlhbnRzIG9mCiAgICAgIC8vLyBzb21lIGNvbW1vbiB0YWcuIEl0IGlzIHJlY29tbWVuZGVkIGZvciB0aGVtZXMgdG8gZGVmaW5lIHNwZWNpYWwKICAgICAgLy8vIGZvcm1zIG9mIGF0IGxlYXN0IHRoZSBbc3RyaW5nXSgjaGlnaGxpZ2h0LnRhZ3Muc3RyaW5nKSBhbmQKICAgICAgLy8vIFt2YXJpYWJsZSBuYW1lXSgjaGlnaGxpZ2h0LnRhZ3MudmFyaWFibGVOYW1lKSB0YWdzLCBzaW5jZSB0aG9zZQogICAgICAvLy8gY29tZSB1cCBhIGxvdC4KICAgICAgc3BlY2lhbDogVGFnLmRlZmluZU1vZGlmaWVyKCkKICB9OwogIC8vLyBUaGlzIGlzIGEgaGlnaGxpZ2h0ZXIgdGhhdCBhZGRzIHN0YWJsZSwgcHJlZGljdGFibGUgY2xhc3NlcyB0bwogIC8vLyB0b2tlbnMsIGZvciBzdHlsaW5nIHdpdGggZXh0ZXJuYWwgQ1NTLgogIC8vLwogIC8vLyBUaGUgZm9sbG93aW5nIHRhZ3MgYXJlIG1hcHBlZCB0byB0aGVpciBuYW1lIHByZWZpeGVkIHdpdGggYCJ0b2stImAKICAvLy8gKGZvciBleGFtcGxlIGAidG9rLWNvbW1lbnQiYCk6CiAgLy8vCiAgLy8vICogW2BsaW5rYF0oI2hpZ2hsaWdodC50YWdzLmxpbmspCiAgLy8vICogW2BoZWFkaW5nYF0oI2hpZ2hsaWdodC50YWdzLmhlYWRpbmcpCiAgLy8vICogW2BlbXBoYXNpc2BdKCNoaWdobGlnaHQudGFncy5lbXBoYXNpcykKICAvLy8gKiBbYHN0cm9uZ2BdKCNoaWdobGlnaHQudGFncy5zdHJvbmcpCiAgLy8vICogW2BrZXl3b3JkYF0oI2hpZ2hsaWdodC50YWdzLmtleXdvcmQpCiAgLy8vICogW2BhdG9tYF0oI2hpZ2hsaWdodC50YWdzLmF0b20pCiAgLy8vICogW2Bib29sYF0oI2hpZ2hsaWdodC50YWdzLmJvb2wpCiAgLy8vICogW2B1cmxgXSgjaGlnaGxpZ2h0LnRhZ3MudXJsKQogIC8vLyAqIFtgbGFiZWxOYW1lYF0oI2hpZ2hsaWdodC50YWdzLmxhYmVsTmFtZSkKICAvLy8gKiBbYGluc2VydGVkYF0oI2hpZ2hsaWdodC50YWdzLmluc2VydGVkKQogIC8vLyAqIFtgZGVsZXRlZGBdKCNoaWdobGlnaHQudGFncy5kZWxldGVkKQogIC8vLyAqIFtgbGl0ZXJhbGBdKCNoaWdobGlnaHQudGFncy5saXRlcmFsKQogIC8vLyAqIFtgc3RyaW5nYF0oI2hpZ2hsaWdodC50YWdzLnN0cmluZykKICAvLy8gKiBbYG51bWJlcmBdKCNoaWdobGlnaHQudGFncy5udW1iZXIpCiAgLy8vICogW2B2YXJpYWJsZU5hbWVgXSgjaGlnaGxpZ2h0LnRhZ3MudmFyaWFibGVOYW1lKQogIC8vLyAqIFtgdHlwZU5hbWVgXSgjaGlnaGxpZ2h0LnRhZ3MudHlwZU5hbWUpCiAgLy8vICogW2BuYW1lc3BhY2VgXSgjaGlnaGxpZ2h0LnRhZ3MubmFtZXNwYWNlKQogIC8vLyAqIFtgY2xhc3NOYW1lYF0oI2hpZ2hsaWdodC50YWdzLmNsYXNzTmFtZSkKICAvLy8gKiBbYG1hY3JvTmFtZWBdKCNoaWdobGlnaHQudGFncy5tYWNyb05hbWUpCiAgLy8vICogW2Bwcm9wZXJ0eU5hbWVgXSgjaGlnaGxpZ2h0LnRhZ3MucHJvcGVydHlOYW1lKQogIC8vLyAqIFtgb3BlcmF0b3JgXSgjaGlnaGxpZ2h0LnRhZ3Mub3BlcmF0b3IpCiAgLy8vICogW2Bjb21tZW50YF0oI2hpZ2hsaWdodC50YWdzLmNvbW1lbnQpCiAgLy8vICogW2BtZXRhYF0oI2hpZ2hsaWdodC50YWdzLm1ldGEpCiAgLy8vICogW2BwdW5jdHVhdGlvbmBdKCNoaWdobGlnaHQudGFncy5wdW5jdHVhdGlvbikKICAvLy8gKiBbYGludmFsaWRgXSgjaGlnaGxpZ2h0LnRhZ3MuaW52YWxpZCkKICAvLy8KICAvLy8gSW4gYWRkaXRpb24sIHRoZXNlIG1hcHBpbmdzIGFyZSBwcm92aWRlZDoKICAvLy8KICAvLy8gKiBbYHJlZ2V4cGBdKCNoaWdobGlnaHQudGFncy5yZWdleHApLAogIC8vLyAgIFtgZXNjYXBlYF0oI2hpZ2hsaWdodC50YWdzLmVzY2FwZSksIGFuZAogIC8vLyAgIFtgc3BlY2lhbGBdKCNoaWdobGlnaHQudGFncy5zcGVjaWFsKVtgKHN0cmluZylgXSgjaGlnaGxpZ2h0LnRhZ3Muc3RyaW5nKQogIC8vLyAgIGFyZSBtYXBwZWQgdG8gYCJ0b2stc3RyaW5nMiJgCiAgLy8vICogW2BzcGVjaWFsYF0oI2hpZ2hsaWdodC50YWdzLnNwZWNpYWwpW2AodmFyaWFibGVOYW1lKWBdKCNoaWdobGlnaHQudGFncy52YXJpYWJsZU5hbWUpCiAgLy8vICAgdG8gYCJ0b2stdmFyaWFibGVOYW1lMiJgCiAgLy8vICogW2Bsb2NhbGBdKCNoaWdobGlnaHQudGFncy5sb2NhbClbYCh2YXJpYWJsZU5hbWUpYF0oI2hpZ2hsaWdodC50YWdzLnZhcmlhYmxlTmFtZSkKICAvLy8gICB0byBgInRvay12YXJpYWJsZU5hbWUgdG9rLWxvY2FsImAKICAvLy8gKiBbYGRlZmluaXRpb25gXSgjaGlnaGxpZ2h0LnRhZ3MuZGVmaW5pdGlvbilbYCh2YXJpYWJsZU5hbWUpYF0oI2hpZ2hsaWdodC50YWdzLnZhcmlhYmxlTmFtZSkKICAvLy8gICB0byBgInRvay12YXJpYWJsZU5hbWUgdG9rLWRlZmluaXRpb24iYAogIC8vLyAqIFtgZGVmaW5pdGlvbmBdKCNoaWdobGlnaHQudGFncy5kZWZpbml0aW9uKVtgKHByb3BlcnR5TmFtZSlgXSgjaGlnaGxpZ2h0LnRhZ3MucHJvcGVydHlOYW1lKQogIC8vLyAgIHRvIGAidG9rLXByb3BlcnR5TmFtZSB0b2stZGVmaW5pdGlvbiJgCiAgdGFnSGlnaGxpZ2h0ZXIoWwogICAgICB7IHRhZzogdGFncy5saW5rLCBjbGFzczogInRvay1saW5rIiB9LAogICAgICB7IHRhZzogdGFncy5oZWFkaW5nLCBjbGFzczogInRvay1oZWFkaW5nIiB9LAogICAgICB7IHRhZzogdGFncy5lbXBoYXNpcywgY2xhc3M6ICJ0b2stZW1waGFzaXMiIH0sCiAgICAgIHsgdGFnOiB0YWdzLnN0cm9uZywgY2xhc3M6ICJ0b2stc3Ryb25nIiB9LAogICAgICB7IHRhZzogdGFncy5rZXl3b3JkLCBjbGFzczogInRvay1rZXl3b3JkIiB9LAogICAgICB7IHRhZzogdGFncy5hdG9tLCBjbGFzczogInRvay1hdG9tIiB9LAogICAgICB7IHRhZzogdGFncy5ib29sLCBjbGFzczogInRvay1ib29sIiB9LAogICAgICB7IHRhZzogdGFncy51cmwsIGNsYXNzOiAidG9rLXVybCIgfSwKICAgICAgeyB0YWc6IHRhZ3MubGFiZWxOYW1lLCBjbGFzczogInRvay1sYWJlbE5hbWUiIH0sCiAgICAgIHsgdGFnOiB0YWdzLmluc2VydGVkLCBjbGFzczogInRvay1pbnNlcnRlZCIgfSwKICAgICAgeyB0YWc6IHRhZ3MuZGVsZXRlZCwgY2xhc3M6ICJ0b2stZGVsZXRlZCIgfSwKICAgICAgeyB0YWc6IHRhZ3MubGl0ZXJhbCwgY2xhc3M6ICJ0b2stbGl0ZXJhbCIgfSwKICAgICAgeyB0YWc6IHRhZ3Muc3RyaW5nLCBjbGFzczogInRvay1zdHJpbmciIH0sCiAgICAgIHsgdGFnOiB0YWdzLm51bWJlciwgY2xhc3M6ICJ0b2stbnVtYmVyIiB9LAogICAgICB7IHRhZzogW3RhZ3MucmVnZXhwLCB0YWdzLmVzY2FwZSwgdGFncy5zcGVjaWFsKHRhZ3Muc3RyaW5nKV0sIGNsYXNzOiAidG9rLXN0cmluZzIiIH0sCiAgICAgIHsgdGFnOiB0YWdzLnZhcmlhYmxlTmFtZSwgY2xhc3M6ICJ0b2stdmFyaWFibGVOYW1lIiB9LAogICAgICB7IHRhZzogdGFncy5sb2NhbCh0YWdzLnZhcmlhYmxlTmFtZSksIGNsYXNzOiAidG9rLXZhcmlhYmxlTmFtZSB0b2stbG9jYWwiIH0sCiAgICAgIHsgdGFnOiB0YWdzLmRlZmluaXRpb24odGFncy52YXJpYWJsZU5hbWUpLCBjbGFzczogInRvay12YXJpYWJsZU5hbWUgdG9rLWRlZmluaXRpb24iIH0sCiAgICAgIHsgdGFnOiB0YWdzLnNwZWNpYWwodGFncy52YXJpYWJsZU5hbWUpLCBjbGFzczogInRvay12YXJpYWJsZU5hbWUyIiB9LAogICAgICB7IHRhZzogdGFncy5kZWZpbml0aW9uKHRhZ3MucHJvcGVydHlOYW1lKSwgY2xhc3M6ICJ0b2stcHJvcGVydHlOYW1lIHRvay1kZWZpbml0aW9uIiB9LAogICAgICB7IHRhZzogdGFncy50eXBlTmFtZSwgY2xhc3M6ICJ0b2stdHlwZU5hbWUiIH0sCiAgICAgIHsgdGFnOiB0YWdzLm5hbWVzcGFjZSwgY2xhc3M6ICJ0b2stbmFtZXNwYWNlIiB9LAogICAgICB7IHRhZzogdGFncy5jbGFzc05hbWUsIGNsYXNzOiAidG9rLWNsYXNzTmFtZSIgfSwKICAgICAgeyB0YWc6IHRhZ3MubWFjcm9OYW1lLCBjbGFzczogInRvay1tYWNyb05hbWUiIH0sCiAgICAgIHsgdGFnOiB0YWdzLnByb3BlcnR5TmFtZSwgY2xhc3M6ICJ0b2stcHJvcGVydHlOYW1lIiB9LAogICAgICB7IHRhZzogdGFncy5vcGVyYXRvciwgY2xhc3M6ICJ0b2stb3BlcmF0b3IiIH0sCiAgICAgIHsgdGFnOiB0YWdzLmNvbW1lbnQsIGNsYXNzOiAidG9rLWNvbW1lbnQiIH0sCiAgICAgIHsgdGFnOiB0YWdzLm1ldGEsIGNsYXNzOiAidG9rLW1ldGEiIH0sCiAgICAgIHsgdGFnOiB0YWdzLmludmFsaWQsIGNsYXNzOiAidG9rLWludmFsaWQiIH0sCiAgICAgIHsgdGFnOiB0YWdzLnB1bmN0dWF0aW9uLCBjbGFzczogInRvay1wdW5jdHVhdGlvbiIgfQogIF0pOwoKICAvLyBUaGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSBsZXplci1nZW5lcmF0b3IuIFlvdSBwcm9iYWJseSBzaG91bGRuJ3QgZWRpdCBpdC4KICBjb25zdCBwcm9wZXJ0eUlkZW50aWZpZXIgPSAxNDcsCiAgICBpZGVudGlmaWVyID0gMTQ4LAogICAgbmFtZUlkZW50aWZpZXIgPSAxNDksCiAgICBpbnNlcnRTZW1pID0gMTUwLAogICAgZXhwcmVzc2lvbjAgPSAxNTQsCiAgICBGb3JFeHByZXNzaW9uID0gNCwKICAgIGZvckV4cHJlc3Npb25TdGFydCA9IDE1NywKICAgIEZvckluRXhwcmVzc2lvbiA9IDcsCiAgICBOYW1lID0gOCwKICAgIElkZW50aWZpZXIgPSA5LAogICAgQWRkaXRpb25hbElkZW50aWZpZXIgPSAxMCwKICAgIGZvckV4cHJlc3Npb25Cb2R5U3RhcnQgPSAxNjUsCiAgICBJZkV4cHJlc3Npb24gPSAxOCwKICAgIGlmRXhwcmVzc2lvblN0YXJ0ID0gMTY2LAogICAgUXVhbnRpZmllZEV4cHJlc3Npb24gPSAyMiwKICAgIHF1YW50aWZpZWRFeHByZXNzaW9uU3RhcnQgPSAxNjcsCiAgICBRdWFudGlmaWVkSW5FeHByZXNzaW9uID0gMjYsCiAgICBQb3NpdGl2ZVVuYXJ5VGVzdCA9IDM2LAogICAgQXJpdGhtZXRpY0V4cHJlc3Npb24gPSA0MCwKICAgIGFyaXRobWV0aWNQbHVzU3RhcnQgPSAxNzEsCiAgICBhcml0aG1ldGljVGltZXNTdGFydCA9IDE3MiwKICAgIGFyaXRobWV0aWNFeHBTdGFydCA9IDE3MywKICAgIGFyaXRobWV0aWNVbmFyeVN0YXJ0ID0gMTc0LAogICAgVmFyaWFibGVOYW1lID0gNDcsCiAgICBQYXRoRXhwcmVzc2lvbiA9IDY3LAogICAgcGF0aEV4cHJlc3Npb25TdGFydCA9IDE3OSwKICAgIEZpbHRlckV4cHJlc3Npb24gPSA2OSwKICAgIGZpbHRlckV4cHJlc3Npb25TdGFydCA9IDE4MCwKICAgIEZ1bmN0aW9uSW52b2NhdGlvbiA9IDcxLAogICAgZnVuY3Rpb25JbnZvY2F0aW9uU3RhcnQgPSAxODEsCiAgICBQYXJhbWV0ZXJOYW1lID0gMTAzLAogICAgbmlsID0gMTg2LAogICAgTnVtZXJpY0xpdGVyYWwgPSAxMDYsCiAgICBTdHJpbmdMaXRlcmFsID0gMTA3LAogICAgQm9vbGVhbkxpdGVyYWwgPSAxMDgsCiAgICBGdW5jdGlvbkRlZmluaXRpb24gPSAxMTcsCiAgICBmdW5jdGlvbkRlZmluaXRpb25TdGFydCA9IDE5NCwKICAgIENvbnRleHQgPSAxMjQsCiAgICBjb250ZXh0U3RhcnQgPSAxOTYsCiAgICBDb250ZXh0RW50cnkgPSAxMjUsCiAgICBQcm9wZXJ0eU5hbWUgPSAxMjcsCiAgICBQcm9wZXJ0eUlkZW50aWZpZXIgPSAxMjg7CgogIGNvbnN0IExPR19QQVJTRSA9IHR5cGVvZiBwcm9jZXNzICE9ICd1bmRlZmluZWQnICYmIHByb2Nlc3MuZW52ICYmIC9cYmZwYXJzZSg6ZGJnKT9cYi8udGVzdChwcm9jZXNzLmVudi5MT0cpOwogIGNvbnN0IExPR19QQVJTRV9ERUJVRyA9IHR5cGVvZiBwcm9jZXNzICE9ICd1bmRlZmluZWQnICYmIHByb2Nlc3MuZW52ICYmIC9cZnBhcnNlOmRiZ1xiLy50ZXN0KHByb2Nlc3MuZW52LkxPRyk7CiAgY29uc3QgTE9HX1ZBUlMgPSB0eXBlb2YgcHJvY2VzcyAhPSAndW5kZWZpbmVkJyAmJiBwcm9jZXNzLmVudiAmJiAvXGJjb250ZXh0P1xiLy50ZXN0KHByb2Nlc3MuZW52LkxPRyk7CgogIGNvbnN0IHNwYWNlQ2hhcnMgPSBbCiAgICA5LCAxMSwgMTIsIDMyLCAxMzMsIDE2MCwKICAgIDU3NjAsIDgxOTIsIDgxOTMsIDgxOTQsIDgxOTUsIDgxOTYsIDgxOTcsIDgxOTgsCiAgICA4MTk5LCA4MjAwLCA4MjAxLCA4MjAyLCA4MjMyLCA4MjMzLCA4MjM5LCA4Mjg3LCAxMjI4OAogIF07CgogIGNvbnN0IG5ld2xpbmVDaGFycyA9IGNoYXJzJDEoJ1xuXHInKTsKCiAgY29uc3QgYWRkaXRpb25hbE5hbWVDaGFycyA9IGNoYXJzJDEoIicuLy0rKiIpOwoKICAvKioKICAgKiBAcGFyYW0geyBzdHJpbmcgfSBzdHIKICAgKiBAcmV0dXJuIHsgbnVtYmVyW10gfQogICAqLwogIGZ1bmN0aW9uIGNoYXJzJDEoc3RyKSB7CiAgICByZXR1cm4gQXJyYXkuZnJvbShzdHIpLm1hcChzID0+IHMuY2hhckNvZGVBdCgwKSk7CiAgfQoKICAvKioKICAgKiBAcGFyYW0geyBudW1iZXIgfSBjaAogICAqIEByZXR1cm4geyBib29sZWFuIH0KICAgKi8KICBmdW5jdGlvbiBpc1N0YXJ0Q2hhcihjaCkgewogICAgcmV0dXJuICgKICAgICAgY2ggPT09IDYzIC8vID8KICAgICkgfHwgKAogICAgICBjaCA9PT0gOTUgLy8gXwogICAgKSB8fCAoCiAgICAgIGNoID49IDY1ICYmIGNoIDw9IDkwIC8vIEEtWgogICAgKSB8fCAoCiAgICAgIGNoID49IDk3ICYmIGNoIDw9IDEyMiAvLyBhLXoKICAgICkgfHwgKAogICAgICBjaCA+PSAxNjEgJiYgIWlzUGFydENoYXIoY2gpICYmICFpc1NwYWNlKGNoKQogICAgKTsKICB9CgogIC8qKgogICAqIEBwYXJhbSB7IG51bWJlciB9IGNoCiAgICogQHJldHVybiB7IGJvb2xlYW4gfQogICAqLwogIGZ1bmN0aW9uIGlzQWRkaXRpb25hbChjaCkgewogICAgcmV0dXJuIGFkZGl0aW9uYWxOYW1lQ2hhcnMuaW5jbHVkZXMoY2gpOwogIH0KCiAgLyoqCiAgICogQHBhcmFtIHsgbnVtYmVyIH0gY2gKICAgKiBAcmV0dXJuIHsgYm9vbGVhbiB9CiAgICovCiAgZnVuY3Rpb24gaXNQYXJ0Q2hhcihjaCkgewogICAgcmV0dXJuICgKICAgICAgY2ggPj0gNDggJiYgY2ggPD0gNTcgLy8gMC05CiAgICApIHx8ICgKICAgICAgY2ggPT09IDB4QjcKICAgICkgfHwgKAogICAgICBjaCA+PSAweDAzMDAgJiYgY2ggPD0gMHgwMzZGCiAgICApIHx8ICgKICAgICAgY2ggPj0gMHgyMDNGICYmIGNoIDw9IDB4MjA0MAogICAgKTsKICB9CgogIC8qKgogICAqIEBwYXJhbSB7IG51bWJlciB9IGNoCiAgICogQHJldHVybiB7IGJvb2xlYW4gfQogICAqLwogIGZ1bmN0aW9uIGlzU3BhY2UoY2gpIHsKICAgIHJldHVybiBzcGFjZUNoYXJzLmluY2x1ZGVzKGNoKTsKICB9CgogIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZQogIGZ1bmN0aW9uIGluZGVudChzdHIsIHNwYWNlcykgewogICAgcmV0dXJuIHNwYWNlcy5jb25jYXQoCiAgICAgIHN0ci5zcGxpdCgvXG4vZykuam9pbignXG4nICsgc3BhY2VzKQogICAgKTsKICB9CgogIC8qKgogICAqIEBwYXJhbSB7IGltcG9ydCgnQGxlemVyL2xyJykuSW5wdXRTdHJlYW0gfSBpbnB1dAogICAqIEBwYXJhbSAgeyBudW1iZXIgfSBbb2Zmc2V0XQogICAqIEBwYXJhbSB7IGJvb2xlYW4gfSBbaW5jbHVkZU9wZXJhdG9yc10KICAgKgogICAqIEByZXR1cm4geyB7IHRva2VuOiBzdHJpbmcsIG9mZnNldDogbnVtYmVyIH0gfCBudWxsIH0KICAgKi8KICBmdW5jdGlvbiBwYXJzZUFkZGl0aW9uYWxTeW1ib2woaW5wdXQsIG9mZnNldCA9IDApIHsKCiAgICBjb25zdCBuZXh0ID0gaW5wdXQucGVlayhvZmZzZXQpOwoKICAgIGlmIChpc0FkZGl0aW9uYWwobmV4dCkpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBvZmZzZXQ6IDEsCiAgICAgICAgdG9rZW46IFN0cmluZy5mcm9tQ2hhckNvZGUobmV4dCkKICAgICAgfTsKICAgIH0KCiAgICByZXR1cm4gbnVsbDsKICB9CgogIC8qKgogICAqIEBwYXJhbSB7IGltcG9ydCgnQGxlemVyL2xyJykuSW5wdXRTdHJlYW0gfSBpbnB1dAogICAqIEBwYXJhbSB7IG51bWJlciB9IFtvZmZzZXRdCiAgICogQHBhcmFtIHsgYm9vbGVhbiB9IFtuYW1lUGFydF0KICAgKgogICAqIEByZXR1cm4geyB7IHRva2VuOiBzdHJpbmcsIG9mZnNldDogbnVtYmVyIH0gfCBudWxsIH0KICAgKi8KICBmdW5jdGlvbiBwYXJzZUlkZW50aWZpZXIoaW5wdXQsIG9mZnNldCA9IDAsIG5hbWVQYXJ0ID0gZmFsc2UpIHsKICAgIGZvciAobGV0IGluc2lkZSA9IGZhbHNlLCBjaGFycyA9IFtdLCBpID0gMDs7IGkrKykgewogICAgICBjb25zdCBuZXh0ID0gaW5wdXQucGVlayhvZmZzZXQgKyBpKTsKCiAgICAgIGlmIChpc1N0YXJ0Q2hhcihuZXh0KSB8fCAoKGluc2lkZSB8fCBuYW1lUGFydCkgJiYgaXNQYXJ0Q2hhcihuZXh0KSkpIHsKICAgICAgICBpZiAoIWluc2lkZSkgewogICAgICAgICAgaW5zaWRlID0gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIGNoYXJzLnB1c2gobmV4dCk7CiAgICAgIH0gZWxzZSB7CgogICAgICAgIGlmIChjaGFycy5sZW5ndGgpIHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHRva2VuOiBTdHJpbmcuZnJvbUNoYXJDb2RlKC4uLmNoYXJzKSwKICAgICAgICAgICAgb2Zmc2V0OiBpCiAgICAgICAgICB9OwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KICAgIH0KICB9CgogIC8qKgogICAqIEBwYXJhbSB7IGltcG9ydCgnQGxlemVyL2xyJykuSW5wdXRTdHJlYW0gfSBpbnB1dAogICAqIEBwYXJhbSAgeyBudW1iZXIgfSBvZmZzZXQKICAgKgogICAqIEByZXR1cm4geyB7IHRva2VuOiBzdHJpbmcsIG9mZnNldDogbnVtYmVyIH0gfCBudWxsIH0KICAgKi8KICBmdW5jdGlvbiBwYXJzZVNwYWNlcyhpbnB1dCwgb2Zmc2V0KSB7CgogICAgZm9yIChsZXQgaW5zaWRlID0gZmFsc2UsIGkgPSAwOzsgaSsrKSB7CiAgICAgIGxldCBuZXh0ID0gaW5wdXQucGVlayhvZmZzZXQgKyBpKTsKCiAgICAgIGlmIChpc1NwYWNlKG5leHQpKSB7CiAgICAgICAgaWYgKCFpbnNpZGUpIHsKICAgICAgICAgIGluc2lkZSA9IHRydWU7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGlmIChpbnNpZGUpIHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHRva2VuOiAnICcsCiAgICAgICAgICAgIG9mZnNldDogaQogICAgICAgICAgfTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICB9CiAgfQoKICAvKioKICAgKiBQYXJzZSBhIG5hbWUgZnJvbSB0aGUgaW5wdXQgYW5kIHJldHVybiB0aGUgZmlyc3QgbWF0Y2gsIGlmIGFueS4KICAgKgogICAqIEBwYXJhbSB7IGltcG9ydCgnQGxlemVyL2xyJykuSW5wdXRTdHJlYW0gfSBpbnB1dAogICAqIEBwYXJhbSB7IFZhcmlhYmxlcyB9IHZhcmlhYmxlcwogICAqCiAgICogQHJldHVybiB7IHsgdG9rZW46IHN0cmluZywgb2Zmc2V0OiBudW1iZXIsIHRlcm06IG51bWJlciB9IHwgbnVsbCB9CiAgICovCiAgZnVuY3Rpb24gcGFyc2VOYW1lKGlucHV0LCB2YXJpYWJsZXMpIHsKICAgIGNvbnN0IGNvbnRleHRLZXlzID0gdmFyaWFibGVzLmNvbnRleHRLZXlzKCk7CgogICAgY29uc3Qgc3RhcnQgPSB2YXJpYWJsZXMudG9rZW5zOwoKICAgIGZvciAobGV0IGkgPSAwLCB0b2tlbnMgPSBbXSwgbmV4dE1hdGNoID0gbnVsbDs7KSB7CgogICAgICBjb25zdCBuYW1lUGFydCA9IChzdGFydC5sZW5ndGggKyB0b2tlbnMubGVuZ3RoKSA+IDA7CiAgICAgIGNvbnN0IG1heWJlU3BhY2UgPSB0b2tlbnMubGVuZ3RoID4gMDsKCiAgICAgIGNvbnN0IG1hdGNoID0gKAogICAgICAgIHBhcnNlSWRlbnRpZmllcihpbnB1dCwgaSwgbmFtZVBhcnQpIHx8CiAgICAgICAgbmFtZVBhcnQgJiYgcGFyc2VBZGRpdGlvbmFsU3ltYm9sKGlucHV0LCBpKSB8fAogICAgICAgIG1heWJlU3BhY2UgJiYgcGFyc2VTcGFjZXMoaW5wdXQsIGkpCiAgICAgICk7CgogICAgICAvLyBtYXRjaCBpcyByZXF1aXJlZAogICAgICBpZiAoIW1hdGNoKSB7CiAgICAgICAgcmV0dXJuIG5leHRNYXRjaDsKICAgICAgfQoKICAgICAgY29uc3QgewogICAgICAgIHRva2VuLAogICAgICAgIG9mZnNldAogICAgICB9ID0gbWF0Y2g7CgogICAgICBpICs9IG9mZnNldDsKCiAgICAgIGlmICh0b2tlbiA9PT0gJyAnKSB7CiAgICAgICAgY29udGludWU7CiAgICAgIH0KCiAgICAgIHRva2VucyA9IFsgLi4udG9rZW5zLCB0b2tlbiBdOwoKICAgICAgY29uc3QgbmFtZSA9IFsgLi4uc3RhcnQsIC4uLnRva2VucyBdLmpvaW4oJyAnKTsKCiAgICAgIGlmIChjb250ZXh0S2V5cy5zb21lKGVsID0+IGVsID09PSBuYW1lKSkgewogICAgICAgIGNvbnN0IHRva2VuID0gdG9rZW5zWzBdOwoKICAgICAgICBuZXh0TWF0Y2ggPSB7CiAgICAgICAgICB0b2tlbiwKICAgICAgICAgIG9mZnNldDogdG9rZW4ubGVuZ3RoLAogICAgICAgICAgdGVybTogbmFtZUlkZW50aWZpZXIKICAgICAgICB9OwogICAgICB9CgogICAgICBpZiAoZGF0ZVRpbWVJZGVudGlmaWVycy5zb21lKGVsID0+IGVsID09PSBuYW1lKSkgewogICAgICAgIGNvbnN0IHRva2VuID0gdG9rZW5zWzBdOwoKICAgICAgICAvLyBwYXJzZSBkYXRlIHRpbWUgaWRlbnRpZmllcnMgYXMgbm9ybWFsCiAgICAgICAgLy8gaWRlbnRpZmllcnMgdG8gYWxsb3cgc3BlY2lhbGl6YXRpb24gdG8ga2ljayBpbgogICAgICAgIC8vCiAgICAgICAgLy8gY2YuIGh0dHBzOi8vZ2l0aHViLmNvbS9uaWtrdS9sZXplci1mZWVsL2lzc3Vlcy84CiAgICAgICAgbmV4dE1hdGNoID0gewogICAgICAgICAgdG9rZW4sCiAgICAgICAgICBvZmZzZXQ6IHRva2VuLmxlbmd0aCwKICAgICAgICAgIHRlcm06IGlkZW50aWZpZXIKICAgICAgICB9OwogICAgICB9CgogICAgICBpZiAoCiAgICAgICAgIWNvbnRleHRLZXlzLnNvbWUoZWwgPT4gZWwuc3RhcnRzV2l0aChuYW1lKSkgJiYKICAgICAgICAhZGF0ZVRpbWVJZGVudGlmaWVycy5zb21lKGVsID0+IGVsLnN0YXJ0c1dpdGgobmFtZSkpCiAgICAgICkgewogICAgICAgIHJldHVybiBuZXh0TWF0Y2g7CiAgICAgIH0KICAgIH0KCiAgfQoKICBjb25zdCBpZGVudGlmaWVyc01hcCA9IHsKICAgIFsgaWRlbnRpZmllciBdOiAnaWRlbnRpZmllcicsCiAgICBbIG5hbWVJZGVudGlmaWVyIF06ICduYW1lSWRlbnRpZmllcicKICB9OwoKICBjb25zdCBpZGVudGlmaWVycyA9IG5ldyBFeHRlcm5hbFRva2VuaXplcigoaW5wdXQsIHN0YWNrKSA9PiB7CgogICAgTE9HX1BBUlNFX0RFQlVHICYmIGNvbnNvbGUubG9nKCclczogVCA8aWRlbnRpZmllciB8IG5hbWVJZGVudGlmaWVyPicsIGlucHV0LnBvcyk7CgogICAgY29uc3QgbmFtZU1hdGNoID0gcGFyc2VOYW1lKGlucHV0LCBzdGFjay5jb250ZXh0KTsKCiAgICBjb25zdCBzdGFydCA9IHN0YWNrLmNvbnRleHQudG9rZW5zOwoKICAgIGNvbnN0IG1hdGNoID0gbmFtZU1hdGNoIHx8IHBhcnNlSWRlbnRpZmllcihpbnB1dCwgMCwgc3RhcnQubGVuZ3RoID4gMCk7CgogICAgaWYgKG1hdGNoKSB7CiAgICAgIGlucHV0LmFkdmFuY2UobWF0Y2gub2Zmc2V0KTsKICAgICAgaW5wdXQuYWNjZXB0VG9rZW4obmFtZU1hdGNoID8gbmFtZU1hdGNoLnRlcm0gOiBpZGVudGlmaWVyKTsKCiAgICAgIExPR19QQVJTRSAmJiBjb25zb2xlLmxvZygnJXM6IE1BVENIIDwlcz4gPCVzPicsIGlucHV0LnBvcywgbmFtZU1hdGNoID8gaWRlbnRpZmllcnNNYXBbbmFtZU1hdGNoLnRlcm1dIDogJ2lkZW50aWZpZXInLCBtYXRjaC50b2tlbik7CiAgICB9CiAgfSwgeyBjb250ZXh0dWFsOiB0cnVlIH0pOwoKCiAgY29uc3QgcHJvcGVydHlJZGVudGlmaWVycyA9IG5ldyBFeHRlcm5hbFRva2VuaXplcigoaW5wdXQsIHN0YWNrKSA9PiB7CgogICAgTE9HX1BBUlNFX0RFQlVHICYmIGNvbnNvbGUubG9nKCclczogVCA8cHJvcGVydHlJZGVudGlmaWVyPicsIGlucHV0LnBvcyk7CgogICAgY29uc3Qgc3RhcnQgPSBzdGFjay5jb250ZXh0LnRva2VuczsKCiAgICBjb25zdCBtYXRjaCA9IHBhcnNlSWRlbnRpZmllcihpbnB1dCwgMCwgc3RhcnQubGVuZ3RoID4gMCk7CgogICAgaWYgKG1hdGNoKSB7CiAgICAgIGlucHV0LmFkdmFuY2UobWF0Y2gub2Zmc2V0KTsKICAgICAgaW5wdXQuYWNjZXB0VG9rZW4ocHJvcGVydHlJZGVudGlmaWVyKTsKCiAgICAgIExPR19QQVJTRSAmJiBjb25zb2xlLmxvZygnJXM6IE1BVENIIDxwcm9wZXJ0eUlkZW50aWZpZXI+IDwlcz4nLCBpbnB1dC5wb3MsIG1hdGNoLnRva2VuKTsKICAgIH0KICB9KTsKCgogIGNvbnN0IGluc2VydFNlbWljb2xvbiA9IG5ldyBFeHRlcm5hbFRva2VuaXplcigoaW5wdXQsIHN0YWNrKSA9PiB7CgogICAgTE9HX1BBUlNFX0RFQlVHICYmIGNvbnNvbGUubG9nKCclczogVCA8aW5zZXJ0U2VtaT4nLCBpbnB1dC5wb3MpOwoKICAgIGxldCBvZmZzZXQ7CiAgICBsZXQgaW5zZXJ0ID0gZmFsc2U7CgogICAgZm9yIChvZmZzZXQgPSAwOzsgb2Zmc2V0KyspIHsKICAgICAgY29uc3QgY2hhciA9IGlucHV0LnBlZWsob2Zmc2V0KTsKCiAgICAgIGlmIChzcGFjZUNoYXJzLmluY2x1ZGVzKGNoYXIpKSB7CiAgICAgICAgY29udGludWU7CiAgICAgIH0KCiAgICAgIGlmIChuZXdsaW5lQ2hhcnMuaW5jbHVkZXMoY2hhcikpIHsKICAgICAgICBpbnNlcnQgPSB0cnVlOwogICAgICB9CgogICAgICBicmVhazsKICAgIH0KCiAgICBpZiAoaW5zZXJ0KSB7CgogICAgICBjb25zdCBpZGVudGlmaWVyID0gcGFyc2VJZGVudGlmaWVyKGlucHV0LCBvZmZzZXQgKyAxKTsKICAgICAgY29uc3Qgc3BhY2VzID0gcGFyc2VTcGFjZXMoaW5wdXQsIG9mZnNldCArIDEpOwoKICAgICAgaWYgKHNwYWNlcyB8fCBpZGVudGlmaWVyICYmIC9eKHRoZW58ZWxzZXxyZXR1cm58c2F0aXNmaWVzKSQvLnRlc3QoaWRlbnRpZmllci50b2tlbikpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIExPR19QQVJTRSAmJiBjb25zb2xlLmxvZygnJXM6IE1BVENIIDxpbnNlcnRTZW1pPicsIGlucHV0LnBvcyk7CiAgICAgIGlucHV0LmFjY2VwdFRva2VuKGluc2VydFNlbWkpOwogICAgfQogIH0pOwoKICBjb25zdCBwcmVmaXhlZENvbnRleHRTdGFydHMgPSB7CiAgICBbIGZ1bmN0aW9uSW52b2NhdGlvblN0YXJ0IF06ICdGdW5jdGlvbkludm9jYXRpb24nLAogICAgWyBmaWx0ZXJFeHByZXNzaW9uU3RhcnQgXTogJ0ZpbHRlckV4cHJlc3Npb24nLAogICAgWyBwYXRoRXhwcmVzc2lvblN0YXJ0IF06ICdQYXRoRXhwcmVzc2lvbicKICB9OwoKICBjb25zdCBjb250ZXh0U3RhcnRzID0gewogICAgWyBjb250ZXh0U3RhcnQgXTogJ0NvbnRleHQnLAogICAgWyBmdW5jdGlvbkRlZmluaXRpb25TdGFydCBdOiAnRnVuY3Rpb25EZWZpbml0aW9uJywKICAgIFsgZm9yRXhwcmVzc2lvblN0YXJ0IF06ICdGb3JFeHByZXNzaW9uJywKICAgIFsgaWZFeHByZXNzaW9uU3RhcnQgXTogJ0lmRXhwcmVzc2lvbicsCiAgICBbIHF1YW50aWZpZWRFeHByZXNzaW9uU3RhcnQgXTogJ1F1YW50aWZpZWRFeHByZXNzaW9uJwogIH07CgogIGNvbnN0IGNvbnRleHRFbmRzID0gewogICAgWyBDb250ZXh0IF06ICdDb250ZXh0JywKICAgIFsgRnVuY3Rpb25EZWZpbml0aW9uIF06ICdGdW5jdGlvbkRlZmluaXRpb24nLAogICAgWyBGb3JFeHByZXNzaW9uIF06ICdGb3JFeHByZXNzaW9uJywKICAgIFsgSWZFeHByZXNzaW9uIF06ICdJZkV4cHJlc3Npb24nLAogICAgWyBRdWFudGlmaWVkRXhwcmVzc2lvbiBdOiAnUXVhbnRpZmllZEV4cHJlc3Npb24nLAogICAgWyBQYXRoRXhwcmVzc2lvbiBdOiAnUGF0aEV4cHJlc3Npb24nLAogICAgWyBGdW5jdGlvbkludm9jYXRpb24gXTogJ0Z1bmN0aW9uSW52b2NhdGlvbicsCiAgICBbIEZpbHRlckV4cHJlc3Npb24gXTogJ0ZpbHRlckV4cHJlc3Npb24nLAogICAgWyBBcml0aG1ldGljRXhwcmVzc2lvbiBdOiAnQXJpdGhtZXRpY0V4cHJlc3Npb24nCiAgfTsKCiAgY2xhc3MgVmFsdWVQcm9kdWNlciB7CgogICAgLyoqCiAgICAgKiBAcGFyYW0geyBGdW5jdGlvbiB9IGZuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGZuKSB7CiAgICAgIHRoaXMuZm4gPSBmbjsKICAgIH0KCiAgICBnZXQodmFyaWFibGVzKSB7CiAgICAgIHJldHVybiB0aGlzLmZuKHZhcmlhYmxlcyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBAcGFyYW0geyBGdW5jdGlvbiB9CiAgICAgKgogICAgICogQHJldHVybiB7IFZhbHVlUHJvZHVjZXIgfQogICAgICovCiAgICBzdGF0aWMgb2YoZm4pIHsKICAgICAgcmV0dXJuIG5ldyBWYWx1ZVByb2R1Y2VyKGZuKTsKICAgIH0KCiAgfQoKICBjb25zdCBkYXRlVGltZUxpdGVyYWxzID0gewogICAgJ2RhdGUgYW5kIHRpbWUnOiAxLAogICAgJ2RhdGUnOiAxLAogICAgJ3RpbWUnOiAxLAogICAgJ2R1cmF0aW9uJzogMQogIH07CgogIGNvbnN0IGRhdGVUaW1lSWRlbnRpZmllcnMgPSBPYmplY3Qua2V5cyhkYXRlVGltZUxpdGVyYWxzKTsKCiAgY2xhc3MgVmFyaWFibGVzIHsKCiAgICBjb25zdHJ1Y3Rvcih7CiAgICAgIG5hbWUgPSAnRXhwcmVzc2lvbnMnLAogICAgICB0b2tlbnMgPSBbXSwKICAgICAgY2hpbGRyZW4gPSBbXSwKICAgICAgcGFyZW50ID0gbnVsbCwKICAgICAgY29udGV4dCA9IHsgfSwKICAgICAgdmFsdWUsCiAgICAgIHJhdwogICAgfSA9IHt9KSB7CiAgICAgIHRoaXMubmFtZSA9IG5hbWU7CiAgICAgIHRoaXMudG9rZW5zID0gdG9rZW5zOwogICAgICB0aGlzLmNoaWxkcmVuID0gY2hpbGRyZW47CiAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50OwogICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0OwogICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CiAgICAgIHRoaXMucmF3ID0gcmF3OwogICAgfQoKICAgIGVudGVyU2NvcGUobmFtZSkgewoKICAgICAgY29uc3QgY2hpbGRTY29wZSA9IHRoaXMub2YoewogICAgICAgIG5hbWUsCiAgICAgICAgcGFyZW50OiB0aGlzCiAgICAgIH0pOwoKICAgICAgTE9HX1ZBUlMgJiYgY29uc29sZS5sb2coJ1slc10gZW50ZXInLCBjaGlsZFNjb3BlLnBhdGgsIGNoaWxkU2NvcGUuY29udGV4dCk7CgogICAgICByZXR1cm4gY2hpbGRTY29wZTsKICAgIH0KCiAgICBleGl0U2NvcGUoc3RyKSB7CgogICAgICBpZiAoIXRoaXMucGFyZW50KSB7CiAgICAgICAgTE9HX1ZBUlMgJiYgY29uc29sZS5sb2coJ1slc10gTk8gZXhpdCAlb1xuJXMnLCB0aGlzLnBhdGgsIHRoaXMuY29udGV4dCwgaW5kZW50KHN0ciwgJyAgJykpOwoKICAgICAgICByZXR1cm4gdGhpczsKICAgICAgfQoKICAgICAgTE9HX1ZBUlMgJiYgY29uc29sZS5sb2coJ1slc10gZXhpdCAlb1xuJXMnLCB0aGlzLnBhdGgsIHRoaXMuY29udGV4dCwgaW5kZW50KHN0ciwgJyAgJykpOwoKICAgICAgcmV0dXJuIHRoaXMucGFyZW50LnB1c2hDaGlsZCh0aGlzKTsKICAgIH0KCiAgICB0b2tlbihwYXJ0KSB7CgogICAgICBMT0dfVkFSUyAmJiBjb25zb2xlLmxvZygnWyVzXSB0b2tlbiA8JXM+ICsgPCVzPicsIHRoaXMucGF0aCwgdGhpcy50b2tlbnMuam9pbignICcpLCBwYXJ0KTsKCiAgICAgIHJldHVybiB0aGlzLmFzc2lnbih7CiAgICAgICAgdG9rZW5zOiBbIC4uLnRoaXMudG9rZW5zLCBwYXJ0IF0KICAgICAgfSk7CiAgICB9CgogICAgbGl0ZXJhbCh2YWx1ZSkgewoKICAgICAgTE9HX1ZBUlMgJiYgY29uc29sZS5sb2coJ1slc10gbGl0ZXJhbCAlbycsIHRoaXMucGF0aCwgdmFsdWUpOwoKICAgICAgcmV0dXJuIHRoaXMucHVzaENoaWxkKHRoaXMub2YoewogICAgICAgIG5hbWU6ICdMaXRlcmFsJywKICAgICAgICB2YWx1ZQogICAgICB9KSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gY29tcHV0ZWQgc2NvcGUgdmFsdWUKICAgICAqCiAgICAgKiBAcmV0dXJuIHthbnl9CiAgICAgKi8KICAgIGNvbXB1dGVkVmFsdWUoKSB7CiAgICAgIGZvciAobGV0IHNjb3BlID0gdGhpczs7c2NvcGUgPSBzY29wZS5jaGlsZHJlbi5zbGljZSgtMSlbMF0pIHsKCiAgICAgICAgaWYgKCFzY29wZSkgewogICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQoKICAgICAgICBpZiAoc2NvcGUudmFsdWUpIHsKICAgICAgICAgIHJldHVybiBzY29wZS52YWx1ZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBjb250ZXh0S2V5cygpIHsKICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHRoaXMuY29udGV4dCkubWFwKG5vcm1hbGl6ZUNvbnRleHRLZXkpOwogICAgfQoKICAgIGdldCBwYXRoKCkgewogICAgICByZXR1cm4gdGhpcy5wYXJlbnQ/LnBhdGg/LmNvbmNhdCgnID4gJywgdGhpcy5uYW1lKSB8fCB0aGlzLm5hbWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdmFsdWUgb2YgdmFyaWFibGUuCiAgICAgKgogICAgICogQHBhcmFtIHsgc3RyaW5nIH0gdmFyaWFibGUKICAgICAqIEByZXR1cm4geyBhbnkgfSB2YWx1ZQogICAgICovCiAgICBnZXQodmFyaWFibGUpIHsKCiAgICAgIGNvbnN0IG5hbWVzID0gWyB2YXJpYWJsZSwgdmFyaWFibGUgJiYgbm9ybWFsaXplQ29udGV4dEtleSh2YXJpYWJsZSkgXTsKCiAgICAgIGNvbnN0IGNvbnRleHRLZXkgPSBPYmplY3Qua2V5cyh0aGlzLmNvbnRleHQpLmZpbmQoCiAgICAgICAga2V5ID0+IG5hbWVzLmluY2x1ZGVzKG5vcm1hbGl6ZUNvbnRleHRLZXkoa2V5KSkKICAgICAgKTsKCiAgICAgIGlmICh0eXBlb2YgY29udGV4dEtleSA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICByZXR1cm4gdW5kZWZpbmVkOwogICAgICB9CgogICAgICBjb25zdCB2YWwgPSB0aGlzLmNvbnRleHRbY29udGV4dEtleV07CgogICAgICBpZiAodmFsIGluc3RhbmNlb2YgVmFsdWVQcm9kdWNlcikgewogICAgICAgIHJldHVybiB2YWwuZ2V0KHRoaXMpOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiB2YWw7CiAgICAgIH0KICAgIH0KCiAgICByZXNvbHZlTmFtZSgpIHsKCiAgICAgIGNvbnN0IHZhcmlhYmxlID0gdGhpcy50b2tlbnMuam9pbignICcpOwogICAgICBjb25zdCB0b2tlbnMgPSBbXTsKCiAgICAgIGNvbnN0IHBhcmVudFNjb3BlID0gdGhpcy5hc3NpZ24oewogICAgICAgIHRva2VucwogICAgICB9KTsKCiAgICAgIGNvbnN0IHZhcmlhYmxlU2NvcGUgPSB0aGlzLm9mKHsKICAgICAgICBuYW1lOiAnVmFyaWFibGVOYW1lJywKICAgICAgICBwYXJlbnQ6IHBhcmVudFNjb3BlLAogICAgICAgIHZhbHVlOiB0aGlzLmdldCh2YXJpYWJsZSksCiAgICAgICAgcmF3OiB2YXJpYWJsZQogICAgICB9KTsKCiAgICAgIExPR19WQVJTICYmIGNvbnNvbGUubG9nKCdbJXNdIHJlc29sdmUgbmFtZSA8JXM9JXM+JywgdmFyaWFibGVTY29wZS5wYXRoLCB2YXJpYWJsZSwgdGhpcy5nZXQodmFyaWFibGUpKTsKCiAgICAgIHJldHVybiBwYXJlbnRTY29wZS5wdXNoQ2hpbGQodmFyaWFibGVTY29wZSk7CiAgICB9CgogICAgcHVzaENoaWxkKGNoaWxkKSB7CgogICAgICBpZiAoIWNoaWxkKSB7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH0KCiAgICAgIGNvbnN0IHBhcmVudCA9IHRoaXMuYXNzaWduKHsKICAgICAgICBjaGlsZHJlbjogWyAuLi50aGlzLmNoaWxkcmVuLCBjaGlsZCBdCiAgICAgIH0pOwoKICAgICAgY2hpbGQucGFyZW50ID0gcGFyZW50OwoKICAgICAgcmV0dXJuIHBhcmVudDsKICAgIH0KCiAgICBwdXNoQ2hpbGRyZW4oY2hpbGRyZW4pIHsKCiAgICAgIGxldCBwYXJlbnQgPSB0aGlzOwoKICAgICAgZm9yIChjb25zdCBjaGlsZCBvZiBjaGlsZHJlbikgewogICAgICAgIHBhcmVudCA9IHBhcmVudC5wdXNoQ2hpbGQoY2hpbGQpOwogICAgICB9CgogICAgICByZXR1cm4gcGFyZW50OwogICAgfQoKICAgIGRlY2xhcmVOYW1lKCkgewoKICAgICAgaWYgKHRoaXMudG9rZW5zLmxlbmd0aCA9PT0gMCkgewogICAgICAgIHRocm93IEVycm9yKCdubyB0b2tlbnMgdG8gZGVjbGFyZSBuYW1lJyk7CiAgICAgIH0KCiAgICAgIGNvbnN0IHZhcmlhYmxlTmFtZSA9IHRoaXMudG9rZW5zLmpvaW4oJyAnKTsKCiAgICAgIExPR19WQVJTICYmIGNvbnNvbGUubG9nKCdbJXNdIGRlY2xhcmVOYW1lIDwlcz4nLCB0aGlzLnBhdGgsIHZhcmlhYmxlTmFtZSk7CgogICAgICByZXR1cm4gdGhpcy5hc3NpZ24oewogICAgICAgIHRva2VuczogW10KICAgICAgfSkucHVzaENoaWxkKAogICAgICAgIHRoaXMub2YoewogICAgICAgICAgbmFtZTogJ05hbWUnLAogICAgICAgICAgdmFsdWU6IHZhcmlhYmxlTmFtZQogICAgICAgIH0pCiAgICAgICk7CiAgICB9CgogICAgZGVmaW5lKG5hbWUsIHZhbHVlKSB7CgogICAgICBpZiAodHlwZW9mIG5hbWUgIT09ICdzdHJpbmcnKSB7CiAgICAgICAgTE9HX1ZBUlMgJiYgY29uc29sZS5sb2coJ1slc10gbm8gZGVmaW5lIDwlcz0lcz4nLCB0aGlzLnBhdGgsIG5hbWUsIHZhbHVlKTsKCiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH0KCiAgICAgIExPR19WQVJTICYmIGNvbnNvbGUubG9nKCdbJXNdIGRlZmluZSA8JXM9JXM+JywgdGhpcy5wYXRoLCBuYW1lLCB2YWx1ZSk7CgogICAgICBjb25zdCBjb250ZXh0ID0gewogICAgICAgIC4uLnRoaXMuY29udGV4dCwKICAgICAgICBbbmFtZV06IHZhbHVlCiAgICAgIH07CgogICAgICByZXR1cm4gdGhpcy5hc3NpZ24oewogICAgICAgIGNvbnRleHQKICAgICAgfSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBAcGFyYW0geyBSZWNvcmQ8c3RyaW5nLCBhbnk+IH0gW29wdGlvbnNdCiAgICAgKgogICAgICogQHJldHVybiB7IFZhcmlhYmxlcyB9CiAgICAgKi8KICAgIGFzc2lnbihvcHRpb25zID0ge30pIHsKCiAgICAgIHJldHVybiBWYXJpYWJsZXMub2YoewogICAgICAgIC4uLnRoaXMsCiAgICAgICAgLi4ub3B0aW9ucwogICAgICB9KTsKICAgIH0KCiAgICAvKioKICAgICAqIEBwYXJhbSB7IFJlY29yZDxzdHJpbmcsIGFueT4gfSBbb3B0aW9uc10KICAgICAqCiAgICAgKiBAcmV0dXJuIHsgVmFyaWFibGVzIH0KICAgICAqLwogICAgb2Yob3B0aW9ucyA9IHt9KSB7CgogICAgICBjb25zdCBkZWZhdWx0T3B0aW9ucyA9IHsKICAgICAgICBjb250ZXh0OiB0aGlzLmNvbnRleHQsCiAgICAgICAgcGFyZW50OiB0aGlzLnBhcmVudAogICAgICB9OwoKICAgICAgcmV0dXJuIFZhcmlhYmxlcy5vZih7CiAgICAgICAgLi4uZGVmYXVsdE9wdGlvbnMsCiAgICAgICAgLi4ub3B0aW9ucwogICAgICB9KTsKICAgIH0KCiAgICBzdGF0aWMgb2Yob3B0aW9ucykgewogICAgICBjb25zdCB7CiAgICAgICAgbmFtZSwKICAgICAgICB0b2tlbnMgPSBbXSwKICAgICAgICBjaGlsZHJlbiA9IFtdLAogICAgICAgIHBhcmVudCA9IG51bGwsCiAgICAgICAgY29udGV4dCA9IHt9LAogICAgICAgIHZhbHVlLAogICAgICAgIHJhdwogICAgICB9ID0gb3B0aW9uczsKCiAgICAgIHJldHVybiBuZXcgVmFyaWFibGVzKHsKICAgICAgICBuYW1lLAogICAgICAgIHRva2VuczogWyAuLi50b2tlbnMgXSwKICAgICAgICBjaGlsZHJlbjogWyAuLi5jaGlsZHJlbiBdLAogICAgICAgIGNvbnRleHQ6IHsKICAgICAgICAgIC4uLmNvbnRleHQKICAgICAgICB9LAogICAgICAgIHBhcmVudCwKICAgICAgICB2YWx1ZSwKICAgICAgICByYXcKICAgICAgfSk7CiAgICB9CgogIH0KCiAgLyoqCiAgICogQHBhcmFtIHsgc3RyaW5nIH0gbmFtZQogICAqCiAgICogQHJldHVybiB7IHN0cmluZyB9IG5vcm1hbGl6ZWROYW1lCiAgICovCiAgZnVuY3Rpb24gbm9ybWFsaXplQ29udGV4dEtleShuYW1lKSB7CiAgICByZXR1cm4gbmFtZS5yZXBsYWNlKC9ccyooWy4vXC0nKypdKVxzKi9nLCAnICQxICcpLnJlcGxhY2UoL1xzezIsfS9nLCAnICcpLnRyaW0oKTsKICB9CgogIC8qKgogICAqIFdyYXAgY2hpbGRyZW4gb2YgdmFyaWFibGVzIHVuZGVyIHRoZSBnaXZlbiBuYW1lZCBjaGlsZC4KICAgKgogICAqIEBwYXJhbSB7IFZhcmlhYmxlcyB9IHZhcmlhYmxlcwogICAqIEBwYXJhbSB7IHN0cmluZyB9IG5hbWUKICAgKiBAcGFyYW0geyBzdHJpbmcgfSBjb2RlCiAgICogQHJldHVybiB7IFZhcmlhYmxlcyB9CiAgICovCiAgZnVuY3Rpb24gd3JhcCh2YXJpYWJsZXMsIHNjb3BlTmFtZSwgY29kZSkgewoKICAgIGNvbnN0IHBhcnRzID0gdmFyaWFibGVzLmNoaWxkcmVuLmZpbHRlcihjID0+IGMubmFtZSAhPT0gc2NvcGVOYW1lKTsKICAgIGNvbnN0IGNoaWxkcmVuID0gdmFyaWFibGVzLmNoaWxkcmVuLmZpbHRlcihjID0+IGMubmFtZSA9PT0gc2NvcGVOYW1lKTsKCiAgICBjb25zdCBuYW1lUGFydCA9IHBhcnRzWzBdOwogICAgY29uc3QgdmFsdWVQYXJ0ID0gcGFydHNbTWF0aC5tYXgoMSwgcGFydHMubGVuZ3RoIC0gMSldOwoKICAgIGNvbnN0IG5hbWUgPSBuYW1lUGFydC5jb21wdXRlZFZhbHVlKCk7CiAgICBjb25zdCB2YWx1ZSA9IHZhbHVlUGFydD8uY29tcHV0ZWRWYWx1ZSgpIHx8IG51bGw7CgogICAgcmV0dXJuIHZhcmlhYmxlcwogICAgICAuYXNzaWduKHsKICAgICAgICBjaGlsZHJlbgogICAgICB9KQogICAgICAuZW50ZXJTY29wZShzY29wZU5hbWUpCiAgICAgIC5wdXNoQ2hpbGRyZW4ocGFydHMpCiAgICAgIC5leGl0U2NvcGUoY29kZSkKICAgICAgLmRlZmluZShuYW1lLCB2YWx1ZSk7CiAgfQoKICAvKioKICAgKiBAcGFyYW0geyBhbnkgfSBjb250ZXh0CiAgICoKICAgKiBAcmV0dXJuIHsgQ29udGV4dFRyYWNrZXI8VmFyaWFibGVzPiB9CiAgICovCiAgZnVuY3Rpb24gdHJhY2tWYXJpYWJsZXMoY29udGV4dCA9IHt9KSB7CgogICAgY29uc3Qgc3RhcnQgPSBWYXJpYWJsZXMub2YoewogICAgICBjb250ZXh0CiAgICB9KTsKCiAgICByZXR1cm4gbmV3IENvbnRleHRUcmFja2VyKHsKICAgICAgc3RhcnQsCiAgICAgIHJlZHVjZSh2YXJpYWJsZXMsIHRlcm0sIHN0YWNrLCBpbnB1dCkgewoKICAgICAgICBpZiAodGVybSA9PT0gQ29udGV4dCkgewogICAgICAgICAgdmFyaWFibGVzID0gdmFyaWFibGVzLmFzc2lnbih7CiAgICAgICAgICAgIHZhbHVlOiB2YXJpYWJsZXMuY29udGV4dAogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBpZiAodGVybSA9PT0gSWZFeHByZXNzaW9uKSB7CiAgICAgICAgICBjb25zdCBbIHRoZW5QYXJ0LCBlbHNlUGFydCBdID0gdmFyaWFibGVzLmNoaWxkcmVuLnNsaWNlKC0yKTsKCiAgICAgICAgICB2YXJpYWJsZXMgPSB2YXJpYWJsZXMuYXNzaWduKHsKICAgICAgICAgICAgdmFsdWU6IHsKICAgICAgICAgICAgICAuLi50aGVuUGFydD8uY29tcHV0ZWRWYWx1ZSgpLAogICAgICAgICAgICAgIC4uLmVsc2VQYXJ0Py5jb21wdXRlZFZhbHVlKCkKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBpZiAodGVybSA9PT0gRmlsdGVyRXhwcmVzc2lvbikgewogICAgICAgICAgY29uc3QgWyBzb3VyY2VQYXJ0LCBfIF0gPSB2YXJpYWJsZXMuY2hpbGRyZW4uc2xpY2UoLTIpOwoKICAgICAgICAgIHZhcmlhYmxlcyA9IHZhcmlhYmxlcy5hc3NpZ24oewogICAgICAgICAgICB2YWx1ZTogc291cmNlUGFydD8uY29tcHV0ZWRWYWx1ZSgpCiAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIGlmICh0ZXJtID09PSBGdW5jdGlvbkludm9jYXRpb24pIHsKCiAgICAgICAgICBjb25zdCBbCiAgICAgICAgICAgIG5hbWUsCiAgICAgICAgICAgIC4uLmFyZ3MKICAgICAgICAgIF0gPSB2YXJpYWJsZXMuY2hpbGRyZW47CgogICAgICAgICAgLy8gcHJlc2VydmUgdHlwZSBpbmZvcm1hdGlvbiB0aHJvdWdoIGBnZXQgdmFsdWUoY29udGV4dCwga2V5KWAgdXRpbGl0eQogICAgICAgICAgaWYgKG5hbWU/LnJhdyA9PT0gJ2dldCB2YWx1ZScpIHsKICAgICAgICAgICAgdmFyaWFibGVzID0gZ2V0Q29udGV4dFZhbHVlKHZhcmlhYmxlcywgYXJncyk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBjb25zdCBzdGFydCA9IGNvbnRleHRTdGFydHNbdGVybV07CgogICAgICAgIGlmIChzdGFydCkgewogICAgICAgICAgcmV0dXJuIHZhcmlhYmxlcy5lbnRlclNjb3BlKHN0YXJ0KTsKICAgICAgICB9CgogICAgICAgIGNvbnN0IHByZWZpeGVkU3RhcnQgPSBwcmVmaXhlZENvbnRleHRTdGFydHNbdGVybV07CgogICAgICAgIC8vIHB1bGwgPGV4cHJlc3Npb24+IGludG8gbmV3IDxwcmVmaXhlZFN0YXJ0PiBjb250ZXh0CiAgICAgICAgaWYgKHByZWZpeGVkU3RhcnQpIHsKCiAgICAgICAgICBjb25zdCBjaGlsZHJlbiA9IHZhcmlhYmxlcy5jaGlsZHJlbi5zbGljZSgwLCAtMSk7CiAgICAgICAgICBjb25zdCBsYXN0Q2hpbGQgPSB2YXJpYWJsZXMuY2hpbGRyZW4uc2xpY2UoLTEpWzBdOwoKICAgICAgICAgIHJldHVybiB2YXJpYWJsZXMuYXNzaWduKHsKICAgICAgICAgICAgY2hpbGRyZW4KICAgICAgICAgIH0pLmVudGVyU2NvcGUocHJlZml4ZWRTdGFydCkucHVzaENoaWxkKGxhc3RDaGlsZCkuYXNzaWduKHsKICAgICAgICAgICAgY29udGV4dDogewogICAgICAgICAgICAgIC4uLnZhcmlhYmxlcy5jb250ZXh0LAogICAgICAgICAgICAgIC4uLmxhc3RDaGlsZD8uY29tcHV0ZWRWYWx1ZSgpCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgY29uc3QgY29kZSA9IGlucHV0LnJlYWQoaW5wdXQucG9zLCBzdGFjay5wb3MpOwoKICAgICAgICBjb25zdCBlbmQgPSBjb250ZXh0RW5kc1t0ZXJtXTsKCiAgICAgICAgaWYgKGVuZCkgewogICAgICAgICAgcmV0dXJuIHZhcmlhYmxlcy5leGl0U2NvcGUoY29kZSk7CiAgICAgICAgfQoKICAgICAgICBpZiAodGVybSA9PT0gQ29udGV4dEVudHJ5KSB7CiAgICAgICAgICByZXR1cm4gd3JhcCh2YXJpYWJsZXMsICdDb250ZXh0RW50cnknLCBjb2RlKTsKICAgICAgICB9CgogICAgICAgIGlmICgKICAgICAgICAgIHRlcm0gPT09IEZvckluRXhwcmVzc2lvbiB8fAogICAgICAgICAgdGVybSA9PT0gUXVhbnRpZmllZEluRXhwcmVzc2lvbgogICAgICAgICkgewogICAgICAgICAgcmV0dXJuIHdyYXAodmFyaWFibGVzLCAnSW5FeHByZXNzaW9uJywgY29kZSk7CiAgICAgICAgfQoKICAgICAgICAvLyBkZWZpbmUgPHBhcnRpYWw+IHdpdGhpbiBGb3JFeHByZXNzaW9uIGJvZHkKICAgICAgICBpZiAodGVybSA9PT0gZm9yRXhwcmVzc2lvbkJvZHlTdGFydCkgewoKICAgICAgICAgIHJldHVybiB2YXJpYWJsZXMuZGVmaW5lKAogICAgICAgICAgICAncGFydGlhbCcsCiAgICAgICAgICAgIFZhbHVlUHJvZHVjZXIub2YodmFyaWFibGVzID0+IHsKICAgICAgICAgICAgICByZXR1cm4gdmFyaWFibGVzLmNoaWxkcmVuW3ZhcmlhYmxlcy5jaGlsZHJlbi5sZW5ndGggLSAxXT8uY29tcHV0ZWRWYWx1ZSgpOwogICAgICAgICAgICB9KQogICAgICAgICAgKTsKICAgICAgICB9CgogICAgICAgIGlmICgKICAgICAgICAgIHRlcm0gPT09IFBhcmFtZXRlck5hbWUKICAgICAgICApIHsKICAgICAgICAgIGNvbnN0IFsgbGVmdCBdID0gdmFyaWFibGVzLmNoaWxkcmVuLnNsaWNlKC0xKTsKCiAgICAgICAgICBjb25zdCBuYW1lID0gbGVmdC5jb21wdXRlZFZhbHVlKCk7CgogICAgICAgICAgLy8gVE9ETzogYXR0YWNoIHR5cGUgaW5mb3JtYXRpb24KICAgICAgICAgIHJldHVybiB2YXJpYWJsZXMuZGVmaW5lKG5hbWUsIDEpOwogICAgICAgIH0KCiAgICAgICAgLy8gcHVsbCA8ZXhwcmVzc2lvbj4gaW50byBBcml0aG1ldGljRXhwcmVzc2lvbiBjaGlsZAogICAgICAgIGlmICgKICAgICAgICAgIHRlcm0gPT09IGFyaXRobWV0aWNQbHVzU3RhcnQgfHwKICAgICAgICAgIHRlcm0gPT09IGFyaXRobWV0aWNUaW1lc1N0YXJ0IHx8CiAgICAgICAgICB0ZXJtID09PSBhcml0aG1ldGljRXhwU3RhcnQKICAgICAgICApIHsKICAgICAgICAgIGNvbnN0IGNoaWxkcmVuID0gdmFyaWFibGVzLmNoaWxkcmVuLnNsaWNlKDAsIC0xKTsKICAgICAgICAgIGNvbnN0IGxhc3RDaGlsZCA9IHZhcmlhYmxlcy5jaGlsZHJlbi5zbGljZSgtMSlbMF07CgogICAgICAgICAgcmV0dXJuIHZhcmlhYmxlcy5hc3NpZ24oewogICAgICAgICAgICBjaGlsZHJlbgogICAgICAgICAgfSkuZW50ZXJTY29wZSgnQXJpdGhtZXRpY0V4cHJlc3Npb24nKS5wdXNoQ2hpbGQobGFzdENoaWxkKTsKICAgICAgICB9CgogICAgICAgIGlmICh0ZXJtID09PSBhcml0aG1ldGljVW5hcnlTdGFydCkgewogICAgICAgICAgcmV0dXJuIHZhcmlhYmxlcy5lbnRlclNjb3BlKCdBcml0aG1ldGljRXhwcmVzc2lvbicpOwogICAgICAgIH0KCiAgICAgICAgaWYgKAogICAgICAgICAgdGVybSA9PT0gSWRlbnRpZmllciB8fAogICAgICAgICAgdGVybSA9PT0gQWRkaXRpb25hbElkZW50aWZpZXIgfHwKICAgICAgICAgIHRlcm0gPT09IFByb3BlcnR5SWRlbnRpZmllcgogICAgICAgICkgewogICAgICAgICAgcmV0dXJuIHZhcmlhYmxlcy50b2tlbihjb2RlKTsKICAgICAgICB9CgogICAgICAgIGlmICgKICAgICAgICAgIHRlcm0gPT09IFN0cmluZ0xpdGVyYWwKICAgICAgICApIHsKICAgICAgICAgIHJldHVybiB2YXJpYWJsZXMubGl0ZXJhbChjb2RlLnJlcGxhY2UoL14ifCIkL2csICcnKSk7CiAgICAgICAgfQoKICAgICAgICBpZiAodGVybSA9PT0gQm9vbGVhbkxpdGVyYWwpIHsKICAgICAgICAgIHJldHVybiB2YXJpYWJsZXMubGl0ZXJhbChjb2RlID09PSAndHJ1ZScgPyB0cnVlIDogZmFsc2UpOwogICAgICAgIH0KCiAgICAgICAgaWYgKHRlcm0gPT09IE51bWVyaWNMaXRlcmFsKSB7CiAgICAgICAgICByZXR1cm4gdmFyaWFibGVzLmxpdGVyYWwocGFyc2VGbG9hdChjb2RlKSk7CiAgICAgICAgfQoKICAgICAgICBpZiAodGVybSA9PT0gbmlsKSB7CiAgICAgICAgICByZXR1cm4gdmFyaWFibGVzLmxpdGVyYWwobnVsbCk7CiAgICAgICAgfQoKICAgICAgICBpZiAoCiAgICAgICAgICB0ZXJtID09PSBWYXJpYWJsZU5hbWUKICAgICAgICApIHsKICAgICAgICAgIHJldHVybiB2YXJpYWJsZXMucmVzb2x2ZU5hbWUoKTsKICAgICAgICB9CgogICAgICAgIGlmICgKICAgICAgICAgIHRlcm0gPT09IE5hbWUgfHwKICAgICAgICAgIHRlcm0gPT09IFByb3BlcnR5TmFtZQogICAgICAgICkgewogICAgICAgICAgcmV0dXJuIHZhcmlhYmxlcy5kZWNsYXJlTmFtZSgpOwogICAgICAgIH0KCiAgICAgICAgaWYgKAogICAgICAgICAgdGVybSA9PT0gZXhwcmVzc2lvbjAgfHwKICAgICAgICAgIHRlcm0gPT09IFBvc2l0aXZlVW5hcnlUZXN0CiAgICAgICAgKSB7CiAgICAgICAgICBpZiAodmFyaWFibGVzLnRva2Vucy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigndW5jbGVhcmVkIG5hbWUnKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmICh0ZXJtID09PSBleHByZXNzaW9uMCkgewoKICAgICAgICAgIGxldCBwYXJlbnQgPSB2YXJpYWJsZXM7CgogICAgICAgICAgd2hpbGUgKHBhcmVudC5wYXJlbnQpIHsKICAgICAgICAgICAgcGFyZW50ID0gcGFyZW50LmV4aXRTY29wZShjb2RlKTsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gcGFyZW50OwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHZhcmlhYmxlczsKICAgICAgfQogICAgfSk7CiAgfQoKICBjb25zdCB2YXJpYWJsZVRyYWNrZXIgPSB0cmFja1ZhcmlhYmxlcyh7fSk7CgoKICAvLyBoZWxwZXJzIC8vLy8vLy8vLy8vLy8vCgogIGZ1bmN0aW9uIGdldENvbnRleHRWYWx1ZSh2YXJpYWJsZXMsIGFyZ3MpIHsKCiAgICBpZiAoIWFyZ3MubGVuZ3RoKSB7CiAgICAgIHJldHVybiB2YXJpYWJsZXMuYXNzaWduKHsKICAgICAgICB2YWx1ZTogbnVsbAogICAgICB9KTsKICAgIH0KCiAgICBpZiAoYXJnc1swXS5uYW1lID09PSAnTmFtZScpIHsKICAgICAgYXJncyA9IGV4dHJhY3ROYW1lZEFyZ3MoYXJncywgWyAnbScsICdrZXknIF0pOwogICAgfQoKICAgIGlmIChhcmdzLmxlbmd0aCAhPT0gMikgewogICAgICByZXR1cm4gdmFyaWFibGVzLmFzc2lnbih7CiAgICAgICAgdmFsdWU6IG51bGwKICAgICAgfSk7CiAgICB9CgogICAgY29uc3QgWwogICAgICBjb250ZXh0LAogICAgICBrZXkKICAgIF0gPSBhcmdzOwoKICAgIGNvbnN0IGtleVZhbHVlID0ga2V5Py5jb21wdXRlZFZhbHVlKCk7CiAgICBjb25zdCBjb250ZXh0VmFsdWUgPSBjb250ZXh0Py5jb21wdXRlZFZhbHVlKCk7CgogICAgaWYgKAogICAgICAoIWNvbnRleHRWYWx1ZSB8fCB0eXBlb2YgY29udGV4dFZhbHVlICE9PSAnb2JqZWN0JykgfHwgdHlwZW9mIGtleVZhbHVlICE9PSAnc3RyaW5nJwogICAgKSB7CiAgICAgIHJldHVybiB2YXJpYWJsZXMuYXNzaWduKHsKICAgICAgICB2YWx1ZTogbnVsbAogICAgICB9KTsKICAgIH0KCiAgICByZXR1cm4gdmFyaWFibGVzLmFzc2lnbih7CiAgICAgIHZhbHVlOiBbIG5vcm1hbGl6ZUNvbnRleHRLZXkoa2V5VmFsdWUpLCBrZXlWYWx1ZSBdLnJlZHVjZSgodmFsdWUsIGtleVZhbHVlKSA9PiB7CiAgICAgICAgaWYgKGtleVZhbHVlIGluIGNvbnRleHRWYWx1ZSkgewogICAgICAgICAgcmV0dXJuIGNvbnRleHRWYWx1ZVtrZXlWYWx1ZV07CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gdmFsdWU7CiAgICAgIH0sIG51bGwpCiAgICB9KTsKICB9CgogIGZ1bmN0aW9uIGV4dHJhY3ROYW1lZEFyZ3MoYXJncywgYXJnTmFtZXMpIHsKCiAgICBjb25zdCBjb250ZXh0ID0ge307CgogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgaSArPSAyKSB7CiAgICAgIGNvbnN0IFsgbmFtZSwgdmFsdWUgXSA9IGFyZ3Muc2xpY2UoaSwgaSArIDIpOwoKICAgICAgY29udGV4dFtuYW1lLnZhbHVlXSA9IHZhbHVlOwogICAgfQoKICAgIHJldHVybiBhcmdOYW1lcy5tYXAobmFtZSA9PiBjb250ZXh0W25hbWVdKTsKICB9CgogIGNvbnN0IGZlZWxIaWdobGlnaHRpbmcgPSBzdHlsZVRhZ3MoewogICAgJ1N0cmluZ0xpdGVyYWwnOiB0YWdzLnN0cmluZywKICAgICdOdW1lcmljTGl0ZXJhbCc6IHRhZ3MubnVtYmVyLAogICAgJ0Jvb2xlYW5MaXRlcmFsJzogdGFncy5ib29sLAogICAgJ05hbWUgUXVhbGlmaWVkTmFtZSc6IHRhZ3MubmFtZSwKICAgICdDb21wYXJlT3AnOiB0YWdzLmNvbXBhcmVPcGVyYXRvciwKICAgICdBcml0aE9wJzogdGFncy5hcml0aG1ldGljT3BlcmF0b3IsCiAgICAnUHJvcGVydHlOYW1lIFBhdGhFeHByZXNzaW9uL05hbWUgS2V5JzogdGFncy5wcm9wZXJ0eU5hbWUsCiAgICAnZm9yIGlmIHRoZW4gZWxzZSBzb21lIGV2ZXJ5IHNhdGlzZmllcyBiZXR3ZWVuJzogdGFncy5jb250cm9sS2V5d29yZCwKICAgICdpbiByZXR1cm4gaW5zdGFuY2Ugb2YgYW5kIG9yJzogdGFncy5vcGVyYXRvcktleXdvcmQsCiAgICAnZnVuY3Rpb24nOiB0YWdzLmRlZmluaXRpb25LZXl3b3JkLAogICAgJ0Zvcm1hbFBhcmFtZXRlci9UeXBlISc6IHRhZ3MudHlwZU5hbWUsCiAgICAnYXMnOiB0YWdzLmtleXdvcmQsCiAgICAnV2lsZGNhcmQnOiB0YWdzLnNwZWNpYWwsCiAgICAnbnVsbCc6IHRhZ3MubnVsbCwKICAgICcsJzogdGFncy5zZXBhcmF0b3IsCiAgICAnWyBdJzogdGFncy5zcXVhcmVCcmFja2V0LAogICAgJ3sgfSc6IHRhZ3MuYnJhY2UsCiAgICAnKCApJzogdGFncy5wYXJlbiwKICAgICdMaW5lQ29tbWVudCc6IHRhZ3MubGluZUNvbW1lbnQsCiAgICAnQmxvY2tDb21tZW50JzogdGFncy5ibG9ja0NvbW1lbnQsCiAgICAnUGFyYW1ldGVyTmFtZSBWYXJpYWJsZU5hbWUgPyc6IHRhZ3MudmFyaWFibGVOYW1lLAogICAgJ0RhdGVUaW1lQ29uc3RydWN0b3IhIFNwZWNpYWxGdW5jdGlvbk5hbWUgQnVpbHRJbkZ1bmN0aW9uTmFtZSc6IHRhZ3MuZnVuY3Rpb24odGFncy5zcGVjaWFsKHRhZ3MudmFyaWFibGVOYW1lKSksCiAgICAnRnVuY3Rpb25JbnZvY2F0aW9uL1ZhcmlhYmxlTmFtZSc6IHRhZ3MuZnVuY3Rpb24odGFncy52YXJpYWJsZU5hbWUpLAogICAgJ0xpc3QgSW50ZXJ2YWwnOiB0YWdzLmxpc3QsCiAgICAnQnVpbHRJblR5cGUgTGlzdFR5cGUgQ29udGV4dFR5cGUgRnVuY3Rpb25UeXBlJzogdGFncy5mdW5jdGlvbih0YWdzLnR5cGVOYW1lKSwKICAgICdDb250ZXh0JzogdGFncy5kZWZpbml0aW9uKHRhZ3MubGl0ZXJhbCksCiAgICAnQ29udGV4dEVudHJ5L0tleSc6IHRhZ3MudmFyaWFibGVOYW1lLAogICAgJ0luRXhwcmVzc2lvbi9OYW1lJzogdGFncy5sb2NhbCh0YWdzLnZhcmlhYmxlTmFtZSksCiAgICAnUGFyYW1ldGVyTmFtZS9OYW1lJzogdGFncy5sb2NhbCh0YWdzLnZhcmlhYmxlTmFtZSksCiAgICAnSXRlcmF0aW9uQ29udGV4dC8iLi4iIEludGVydmFsLyIuLiIgIi4iJzogdGFncy5wdW5jdHVhdGlvbgogIH0pOwoKICAvLyBUaGlzIGZpbGUgd2FzIGdlbmVyYXRlZCBieSBsZXplci1nZW5lcmF0b3IuIFlvdSBwcm9iYWJseSBzaG91bGRuJ3QgZWRpdCBpdC4KICBjb25zdCBzcGVjX2lkZW50aWZpZXIgPSB7X19wcm90b19fOm51bGwsZm9yOjEwLCBpbjozMCwgcmV0dXJuOjM0LCBpZjozOCwgdGhlbjo0MCwgZWxzZTo0Miwgc29tZTo0NiwgZXZlcnk6NDgsIHNhdGlzZmllczo1NSwgb3I6NTgsIGFuZDo2MiwgYmV0d2Vlbjo3MCwgaW5zdGFuY2U6ODYsIG9mOjg5LCBkYXlzOjk5LCB0aW1lOjEwMSwgZHVyYXRpb246MTAzLCB5ZWFyczoxMDUsIG1vbnRoczoxMDcsIGRhdGU6MTA5LCBsaXN0OjExNSwgY29udGV4dDoxMjEsIGZ1bmN0aW9uOjEyOCwgc3RyaW5nOjE0NywgbGVuZ3RoOjE0OSwgdXBwZXI6MTUxLCBjYXNlOjE1MywgbG93ZXI6MTU1LCBzdWJzdHJpbmc6MTU3LCBiZWZvcmU6MTU5LCBhZnRlcjoxNjEsIHN0YXJ0czoxNjMsIHdpdGg6MTY1LCBlbmRzOjE2NywgY29udGFpbnM6MTY5LCBpbnNlcnQ6MTcxLCBpbmRleDoxNzMsIGRpc3RpbmN0OjE3NSwgdmFsdWVzOjE3NywgbWV0OjE3OSwgYnk6MTgxLCBvdmVybGFwczoxODMsIGZpbmlzaGVkOjE4NSwgc3RhcnRlZDoxODcsIGRheToxODksIHllYXI6MTkxLCB3ZWVrOjE5MywgbW9udGg6MTk1LCBnZXQ6MTk3LCB2YWx1ZToxOTksIGVudHJpZXM6MjAxLCBudWxsOjIxMCwgdHJ1ZTozODAsIGZhbHNlOjM4MCwgIj8iOjIyNCwgZXh0ZXJuYWw6MjQwLCBub3Q6MjYzfTsKICBjb25zdCBwYXJzZXIgPSBMUlBhcnNlci5kZXNlcmlhbGl6ZSh7CiAgICB2ZXJzaW9uOiAxNCwKICAgIHN0YXRlczogIiEmbk9gUVlPT08md1FZT09PT1FVJyNDZScjQ2VPJ1JRWU8nI0NgTyhbUV5PJyNGbE9PUVEnI0dRJyNHUU8qfFFZTycjR1FPYFFZTycjRFVPT1FVJyNGWicjRlpPLXJRXk8nI0RdT09RTycjR1gnI0dYTzF5UVdPJyNEdU9PUVUnI0VqJyNFak9PUVUnI0VrJyNFa09PUVUnI0VsJyNFbE8yT09XTycjRW9PMXlRV08nI0VtT09RVScjRW0nI0VtT09RVScjR18nI0dfT09RVScjR10nI0ddTzJUUVlPJyNFck9gUVlPJyNFc08ydVFZTycjRXRPMlRRWU8nI0VxT09RVScjRXEnI0VxT09RVScjRm4nI0ZuTzRaUV5PJyNGbk82dVFXTycjRXVPT1FQJyNHaCcjR2hPNnpRWE8nI0V8T09RVScjR2UnI0dlT09RVScjRm0nI0ZtT09RUScjRlUnI0ZVUWBRWU9PT09RUScjRm8nI0ZvT09RUScjRngnI0Z4T2BRWU8nI0NuT09RUScjRnknI0Z5TydSUVlPJyNDck83VlFZTycjRHZPN1tRWU8nI0R2TzdhUVlPJyNEdk83ZlFZTycjRHZPN25RWU8nI0R2TzdzUVlPJyNEdk83eFFZTycjRHZPN31RWU8nI0R2TzhTUVlPJyNEdk84WFFZTycjRHZPOF5RWU8nI0R2TzhjUVlPJyNEdk84aFFZTycjRHZPT1FVJyNHXicjR15POHBRWU8nI0VuT09RTycjRW4nI0VuT09RTycjR2YnI0dmTzpTUVlPJyNEUU86alFXTycjRnxPT1FPJyNEUycjRFNPOnVRWU8nI0dRUU9RV09PTzp8UVdPT087cFFZTycjQ2RPO31RWU8nI0ZxT09RUScjQ2MnI0NjTzxTUVlPJyNGcE9PUVEnI0NiJyNDYk88W1FZTyw1OHpPYFFZTyw1OWhPT1FRJyNGfScjRn1PT1FRJyNHTycjR09PT1FRJyNHUCcjR1BPYFFZTyw1OXBPYFFZTyw1OXBPYFFZTyw1OXBPT1FRJyNHVicjR1ZPJ1JRWU8sNTpdT09RUScjR1cnI0dXT2BRWU8sNTpfT09RUSw1PFcsNTxXT2BRWU8sNTlkT2BRWU8sNTlmT2BRWU8sNTloTzxhUVlPLDU5aE8/VlFZTyw1OXJPT1FVLDU7VSw1O1VPP1tRXk8sNTlwT09RVS1FOVgtRTlYT0NjUVlPJyNHWU9PUVUsNTphLDU6YU9PUVUsNTtaLDU7Wk9PUVUsNTtYLDU7WE9DalFeTycjRFtPR3FRV08nI0VqT09RVScjR2QnI0dkT0d2UVdPLDU7Xk9He1FZTyw1O19PSlpRXk8nI0RbT0plUVlPJyNHXU9Mc1FZTycjR1tPTVFRV08sNTtgT09RVSw1O10sNTtdT09RVSw1PFksNTxZT01WUVlPLDU7YU9PUVAnI0ZRJyNGUU9NeVFYTycjRlBPT1FPJyNGTycjRk9PTlFRV08nI0V9T05WUVdPJyNHaU9OX1FXTyw1O2hPT1FRLUU5Uy1FOVNPTmRRWU8sNTlZTzt9UVlPJyNGe09PUVEnI0N2JyNDdk9Oa1FZTycjRnpPT1FRJyNDdScjQ3VPTnNRWU8sNTleT054UVlPLDU6Yk9PUU8sNTpiLDU6Yk9OfVFZTyw1OmJPISBWUVlPLDU6Yk8hIFtRWU8sNTtZT2BRWU8nI0ZZTyEgYVFXTyw1PGhPYFFZT09PT1FSJyNDZicjQ2ZPT1FRJyNGVicjRlZPISFXUVlPLDU5T09gUVlPLDU8XU9PUVEnI0Z0JyNGdE8nUlFZTycjRldPISFoUVlPLDU8W09gUVlPMUcuZk9PUVEnI0Z3JyNGd08hIXBRXk8xRy9TTyEmX1FeTzFHL1tPISl8UV5PMUcvW08hMVlRXk8xRy9bT09RVTFHL3cxRy93TyExdlFZTzFHL3lPITVdUV5PMUcvT08hOVJRXk8xRy9RTyE6YVFZTzFHL1NPYFFZTzFHL1NPT1FVMUcvUzFHL1NPITpoUVlPMUcvXk8hO1NRXk8nI0NkT09RTycjRWcnI0VnTyE8ZlFXTycjRWZPITxrUVdPJyNHWk9PUU8nI0VlJyNFZU9PUU8nI0VoJyNFaE8hPHNRV08sNTx0TydSUVlPJyNGW08hPHhRXk8sNTl2TzJUUVlPMUcweE9PUVUxRzB5MUcweU9gUVlPJyNGYE8hQVBRV08sNTx2T09RVTFHMHoxRzB6TyFBW1FXTycjRXdPIUFnUVdPJyNHZ09PUU8nI0V2JyNFdk8hQW9RV08xRzB7T09RUCcjRmInI0ZiTyFBdFFYTyw1O2tPYFFZTyw1O2lPIUF7UVhPJyNGY08hQlRRV08sNT1UT09RVTFHMVMxRzFTT2BRWU8xRy50T2BRWU8sNTxnTydSUVlPJyNGWE8hQl1RWU8sNTxmT2BRWU8xRy54TyFCZVFZTzFHL3xPT1FPMUcvfDFHL3xPT1FPMUcwdDFHMHRPT1FPLDU7dCw1O3RPT1FPLUU5Vy1FOVdPIUJqUVdPT09PUVEtRTlULUU5VE8hQm9RWU8nI0NsT09RUTFHMXcxRzF3T09RUSw1O3IsNTtyT09RUS1FOVUtRTlVTyFCfFFeTzcrJFFPT1FVNyslZTcrJWVPYFFZTzcrJG5PIUVuUVlPLDU7X08hRXVRV083KyRuT09RVScjRFonI0RaTyFFelFZTycjRF5PIUZQUVlPJyNEXk8hRlVRWU8nI0ReTyFGWlFgTycjRGZPIUZgUWBPJyNEaU8hRmVRYE8nI0RtT09RVTcrJHg3KyR4T2BRWU8sNTtRTydSUVlPJyNGX08hRmpRV08sNTx1T09RVTFHMmAxRzJgT09RVSw1O3YsNTt2T09RVS1FOVktRTlZTyFGclFXTzcrJmRPIUZ9UVlPLDU7ek9PUU8tRTleLUU5Xk8hOmhRWU8sNTtjTydSUVlPJyNGYU8hR1tRV08sNT1STyFHZFFZTzcrJmdPT1FQLUU5YC1FOWBPIUdrUVlPMUcxVE9PUU8sNTt9LDU7fU9PUU8tRTlhLUU5YU8hS2RRXk83KyRgTyFLa1FZTzFHMlJPT1FRLDU7cyw1O3NPT1FRLUU5Vi1FOVZPIUt1UV5PNyskZE9PUU83KyVoNyslaE9gUVlPLDU5V08hTmdRXk88PEhZT09RVTw8SFk8PEhZTyMkVVFZTyw1OXhPIyRaUVlPLDU5eE8jJGBRWU8sNTl4TyMkZVFZTyw1OlFPJ1JRWU8sNTpUTyMlUFFiTyw1OlhPIyVXUVlPMUcwbE9PUU8sNTt5LDU7eU9PUU8tRTldLUU5XU9PUVU8PEpPPDxKT09PUU8xRzB9MUcwfU9PUU8sNTt7LDU7e09PUU8tRTlfLUU5X08jJWJRXk8nI0V5T09RVTw8SlI8PEpST2BRWU88PEpST2BRWU88PEd6TyMoU1FZTzFHLnJPIyheUVlPMUcvZE9PUVUxRy9kMUcvZE8jKGNRYk8nI0RdTyModFFgTycjRFtPIylQUWBPMUcvbE8jKVVRV08nI0RsTyMpWlFgTycjR1JPT1FPJyNEaycjRGtPIyljUWBPMUcvb09PUU8nI0RwJyNEcE8jKWhRYE8nI0dUT09RTycjRG8nI0RvTyMpcFFgTzFHL3NPT1FVQU4/bUFOP21PIyl1UV5PQU49Zk9PUVU3KyVPNyslT08jLGdRYE8sNTl2T09RVTcrJVc3KyVXTyMkZVFZTyw1OldPJ1JRWU8nI0ZdTyMsclFgTyw1PG1PT1FVNyslWjcrJVpPIyRlUVlPJyNGXk8jLHpRYE8sNTxvTyMtU1FgTzcrJV9PT1FPMUcvcjFHL3JPT1FPLDU7dyw1O3dPT1FPLUU5Wi1FOVpPT1FPLDU7eCw1O3hPT1FPLUU5Wy1FOVtPITpoUVlPPDxIeU9PUVVBTj5lQU4+ZU8jLVhRXk8nI0ZuT2BRWU8sNTloT2BRWU8sNTlwT2BRWU8sNTlwT2BRWU8sNTlwT2BRWU8sNTlkT2BRWU8sNTlmTzxhUVlPLDU5aE9gUVlPMUcuZk8jLXJRWU8xRy9TTyMvYFFZTzFHL1tPIzB8UVlPMUcvW08jM3dRWU8xRy9PTyM1bFFZTzFHL1FPJ1JRWU8nI0ZbT2BRWU8xRy50T2BRWU8xRy54TyM1fFFZTzcrJFFPYFFZTzcrJG5PIzZtUVlPNysmZ08jOGJRWU83KyRgTyM4aVFZTzcrJGBPIzhwUV5PNyskYE8jOHdRWU83KyRkTyM5aFFZTzw8SFlPIztVUVlPJyNFeU9gUVlPPDxKUk9gUVlPPDxHek8jO3VRWU9BTj1mTyMkZVFZTzw8SHlPYFFZTycjRFVPIzxmUV5PJyNEUU88W1FZTyw1OHpPIz9XUVlPLDU5WU8jP19RWU8sNTleTyM/ZFFZTzFHL1NPIz9rUVdPMUcwe09gUVlPMUcudE8jP3BRYE83KyVfT2BRWU8xRy50TydSUVlPJyNDYE9gUVlPJyNDbk8nUlFZTycjQ3JPYFFZTyw1OWhPTVZRWU8sNTthTyM/dVFZTyw1OVlPIz98UWBPMUcvc08jQFJRWU8sNTlZTyNAWVFXTycjRXVPYFFZTycjQ25PYFFZTyw1OWhPYFFZTyw1OXBPYFFZTyw1OXBPYFFZTyw1OXBPYFFZTyw1OWRPYFFZTyw1OWZPPGFRWU8sNTloT2BRWU8xRy5mTyNAX1FeTzFHL1NPI0BmUV5PMUcvW08jQG1RXk8xRy9bTyNAdFFeTzFHL09PI0FbUV5PMUcvUU9gUVlPMUcueE8jQnBRXk83KyRRT2BRWU83KyRuTyNFZVFZTzcrJmdPI0VsUV5PNyskZE8jSGFRXk88PEhZTyMlUFFiTyw1OlhPI0hoUV5PJyNFeU9gUVlPPDxKUlBgUVlPPDxHelAjS11RXk9BTj1mTyNMYFFeTycjRFFPYFFZTycjQ25PYFFZTycjRFVPPFtRWU8sNTh6TyQgVFFZTyw1OV5PJCBZUVlPMUcvU08kIGFRV08xRzB7TyQgZlFgTycjRG1PYFFZTyw1OWhPYFFZTyw1OXBPYFFZTyw1OXBPYFFZTyw1OXBPYFFZTyw1OWRPYFFZTyw1OWZPPGFRWU8sNTloT2BRWU8xRy5mTyQga1FZTzFHL1NPJCByUVlPMUcvW08kIHlRWU8xRy9bTyQhUVFZTzFHL09PJCFoUVlPMUcvUU9gUVlPMUcueE8kI3xRWU83KyRRT2BRWU83KyRuTyQkcFFZTzcrJmdPJCR3UVlPNyskZE8kJWtRWU88PEhZTyQlclFZTycjRXlPYFFZTzw8SlJQYFFZTzw8R3pQJCZmUVlPQU49Zk9gUVlPJyNEVU88W1FZTyw1OHpPJCdpUVlPLDU5Xk8kJ25RWU8xRy9TTyQndVFXTzFHMHtPJ1JRWU8nI0NgTydSUVlPJyNDck9gUVlPLDU5aE9NVlFZTyw1O2FPJCd6UVdPJyNFdU8nUlFZTycjQ2BPJ1JRWU8nI0NyTyQoUFFZTycjRFFPYFFZTyw1OWhPTVZRWU8sNTthTyQoalFXTycjRXUiLAogICAgc3RhdGVEYXRhOiAiJChvfk8kXk9TJF9PU1BPU1FPU35PVHJPWlVPW1RPY3NPZ3VPaHVPcmdPdWVPIVMhV08hVCFXTyFVd08hVyFWTyFafE8hYiFYTyFmZE8haGZPIWt4TyFteU8hb3lPIXB6TyFze08hdXtPIXd9TyF4IU9PIXkhUE8heyFRTyF9ek8jTyFRTyNQIVFPI1EhUk8jUyFTTyNUIVNPI1UhVE8jXSFVTyNkaU8jb2xPJFlRTyRaUU8lU1tPJVRdTyVVXk8lVl9Pfk9Uck9bVE9jc09ndU9odU9yZ091ZU8hUyFXTyFUIVdPIVV3TyFXIVZPIVp8TyFiIVhPIWZkTyFoZk8ha3hPIW15TyFveU8hcHpPIXN7TyF1e08hd31PIXghT08heSFQTyF7IVFPIX16TyNPIVFPI1AhUU8jUSFSTyNTIVNPI1QhU08jVSFUTyNdIVVPI2RpTyNvbE8kWVFPJFpRTyVTW08lVF1PJVVeTyVWX09+T1ohXU8jdyFfT35QJFVPJFlRTyRaUU9+T1ohZ09bIWdPXSFoT14haE9fIXVPbSFyT28hc09xIWZPciFmT3MhdE95IWlPeyF2TyFoIW9PJGYhbU91JHtYfk8kWyFxTyVeIXFPVCRgWGMkYFhnJGBYaCRgWCFTJGBYIVQkYFghVSRgWCFXJGBYIVokYFghYiRgWCFmJGBYIWskYFghbSRgWCFvJGBYIXAkYFghcyRgWCF1JGBYIXckYFgheCRgWCF5JGBYIXskYFghfSRgWCNPJGBYI1AkYFgjUSRgWCNTJGBYI1QkYFgjVSRgWCNdJGBYI2QkYFgjbyRgWCRXJGBYJFkkYFgkWiRgWCVTJGBYJVQkYFglVSRgWCVWJGBYflAnWk8lUyF3T1QkdFhaJHRYWyR0WGMkdFhnJHRYaCR0WHIkdFh1JHRYIVMkdFghVCR0WCFVJHRYIVckdFghWiR0WCFiJHRYIWYkdFghaCR0WCFrJHRYIW0kdFghbyR0WCFwJHRYIXMkdFghdSR0WCF3JHRYIXgkdFgheSR0WCF7JHRYIX0kdFgjTyR0WCNQJHRYI1EkdFgjUyR0WCNUJHRYI1UkdFgjXSR0WCNkJHRYI28kdFgkWSR0WCRaJHRYJVQkdFglVSR0WCVWJHRYfk8kWVFPJFpRT1QhUFhaIVBYWyFQWF0hUFheIVBYXyFQWGMhUFhnIVBYaCFQWG0hUFhvIVBYcSFQWHIhUFhzIVBYdSFQWHkhUFh7IVBYIVMhUFghVCFQWCFVIVBYIVchUFghWiFQWCFiIVBYIWYhUFghaCFQWCFrIVBYIW0hUFghbyFQWCFwIVBYIXMhUFghdSFQWCF3IVBYIXghUFgheSFQWCF7IVBYIX0hUFgjTyFQWCNQIVBYI1EhUFgjUyFQWCNUIVBYI1UhUFgjXSFQWCNkIVBYI28hUFgkVyFQWCRbIVBYJGYhUFglUyFQWCVUIVBYJVUhUFglViFQWCVeIVBYJGohUFgkaSFQWHchUFhkIVBYYSFQWCNuIVBYZSFQWGshUFh+T3Uhek9+TyVUXU9+T1ojUE8hUyFXTyFUIVdPIVchVk8kWVFPJFpRTyVTW08lVF1PJVVeTyVWX09+TyFmJU9QflBgTyRbI1lPWiRiWFskYlhdJGJYXiRiWF8kYlhtJGJYbyRiWHEkYlhyJGJYcyRiWHUkYlh5JGJYeyRiWCFmJGJYIWgkYlgkVyRiWCRmJGJYZSRiWH5PVCRiWGMkYlhnJGJYaCRiWCFTJGJYIVQkYlghVSRiWCFXJGJYIVokYlghYiRiWCFrJGJYIW0kYlghbyRiWCFwJGJYIXMkYlghdSRiWCF3JGJYIXgkYlgheSRiWCF7JGJYIX0kYlgjTyRiWCNQJGJYI1EkYlgjUyRiWCNUJGJYI1UkYlgjXSRiWCNkJGJYI28kYlgkWSRiWCRaJGJYJFskYlglUyRiWCVUJGJYJVUkYlglViRiWCVeJGJYflAyfE91I1pPfk8kWCNbTyVUXU8jbiVdUH5PbyNpT35PIWwjak9+TyFuI2pPfk8hcSNqTyFyI2pPfk8hdCNqT35PIXYjak9+TyFxI2pPfk98I2pPfk8heiNqT35PIXwjak9+T3wja09+T3wjbE9+TyNWI2pPI1cjak9+T28jbU91I2JYfk9aIWdPWyFnT10haE9eIWhPeSFpT3shdk8haCFvTyRmIW1PdSR7WCRXdFgkanRYd3RYIWZ0WGR0WGF0WCRpdFgjbnRYa3RYfk9fJ1VPbSdTT28nVE9xJ09PcidPT3Mnek9+UDh4TyRqI25PJFckcFh3JHBYfk8kVyN2WH5QKnxPdSNwT35PWiNxT1sjcU9dI3FPXiNxTyRZUU8kWlFPJGYjcU8kZyNxTyR2V1h+T19XWHdXWCRqV1h+UDtST18jdU9+TyRqI3ZPYSRkWH5PYSN5T35PVHJPWlVPW1RPY3NPZ3VPaHVPcmdPdSRUTyFTIVdPIVQhV08hVXdPIVchVk8hWnxPIWIhWE8hZmRPIWhmTyFreE8hbXlPIW95TyFwek8hc3tPIXV7TyF3fU8heCFPTyF5IVBPIXshUU8hfXpPI08hUU8jUCFRTyNRIVJPI1MhU08jVCFTTyNVIVRPI10hVU8jZGlPI29sTyRZUU8kWlFPJVNbTyVUXU8lVV5PJVZfT35PfCRWT35PeyF2TyFoIW9PJGYhbU9UeGFaeGFbeGFdeGFeeGFfeGFjeGFneGFoeGFteGFveGFxeGFyeGFzeGF1JHtYeXhhIVN4YSFUeGEhVXhhIVd4YSFaeGEhYnhhIWZ4YSFreGEhbXhhIW94YSFweGEhc3hhIXV4YSF3eGEheHhhIXl4YSF7eGEhfXhhI094YSNQeGEjUXhhI1N4YSNUeGEjVXhhI114YSNkeGEjb3hhJFd4YSRZeGEkWnhhJFt4YSVTeGElVHhhJVV4YSVWeGElXnhhJGp4YXd4YWR4YWF4YSRpeGEjbnhhZXhha3hhfk93JU9QflBgTyRmJF9PJGkhT1hUIU9YWiFPWFshT1hdIU9YXiFPWF8hT1hjIU9YZyFPWGghT1htIU9YbyFPWHEhT1hyIU9YcyFPWHUhT1h5IU9YeyFPWCFTIU9YIVQhT1ghVSFPWCFXIU9YIVohT1ghYiFPWCFmIU9YIWghT1ghayFPWCFtIU9YIW8hT1ghcCFPWCFzIU9YIXUhT1ghdyFPWCF4IU9YIXkhT1gheyFPWCF9IU9YI08hT1gjUCFPWCNRIU9YI1MhT1gjVCFPWCNVIU9YI10hT1gjZCFPWCNvIU9YJFchT1gkWSFPWCRaIU9YJFshT1glUyFPWCVUIU9YJVUhT1glViFPWCVeIU9YJGohT1h3IU9YZCFPWGEhT1gjbiFPWGUhT1hrIU9Yfk8lUyF3T35PJGkkYU9+T1ohZ09bIWdPXSFoT14haE9fJ1VPbSdTT28nVE9xJ09PcidPT3Mnek93JGJPeSFpT3shdk8haCFvTyRmIW1PdSR7WH5PJFsjWU9aJGJYWyRiWF0kYlheJGJYXyRiWG0kYlhvJGJYcSRiWHIkYlhzJGJYdSRiWHckYlh5JGJYeyRiWCFoJGJYIWYkYlgkaiRiWH5PJGYkX08kaSFPWH5QSVBPWiVQWFslUFhdJVBYXiVQWF8lUFhtJVBYbyVQWHElUFhyJVBYcyVQWHUlUFh3JVBYeSVQWHslUFghaCVQWCRmJVBYJGklV1ghZiVQWCRqJVBYfk9aIWdPWyFnT10haE9eIWhPXydVT20nU09vJ1RPcSdPT3InT09zJ3pPeSFpT3shdk8haCFvTyRmIW1PdSR7WH5PJGokY08hZiVPWHclT1h+UEtyTyFmJGVPfk8kWVFPJFpRT3clWlB+T1ojcU9bI3FPXSNxT14jcU8kWCNbTyRmI3FPJGcjcU9+TyR2I3NYflBNYk8kdiRsT35PJGokbU8jbiVdWH5PI24kb09+T2QkcE9+UEtyTyRqJHJPayRuWH5PayR0T35PIVYkdU9+TyNSJHZPI1Mkdk9+TyNSJHZPfk8hUyR3T35PJGojbk8kVyRwYXckcGF+T1ojcU9bI3FPXSNxT14jcU8kWVFPJFpRTyRmI3FPJGcjcU9+T19XYSR2V2F3V2EkaldhflAhIGxPJGojdk9hJGRhfk9aIWdPWyFnT10haE9eIWhPeSFpT3shdk8haCFvTyRmIW1PVHBpX3BpY3BpZ3BpaHBpbXBpb3BpcXBpcnBpc3BpdSR7WCFTcGkhVHBpIVVwaSFXcGkhWnBpIWJwaSFmcGkha3BpIW1waSFvcGkhcHBpIXNwaSF1cGkhd3BpIXhwaSF5cGkhe3BpIX1waSNPcGkjUHBpI1FwaSNTcGkjVHBpI1VwaSNdcGkjZHBpI29waSRXcGkkWXBpJFpwaSRbcGklU3BpJVRwaSVVcGklVnBpJV5waX5PXSFoT14haE95IWlPeyF2TyFoIW9PJGYhbU9UeGlaeGlbeGlfeGljeGlneGloeGlteGlveGlxeGlyeGlzeGl1JHtYIVN4aSFUeGkhVXhpIVd4aSFaeGkhYnhpIWZ4aSFreGkhbXhpIW94aSFweGkhc3hpIXV4aSF3eGkheHhpIXl4aSF7eGkhfXhpI094aSNQeGkjUXhpI1N4aSNUeGkjVXhpI114aSNkeGkjb3hpJFd4aSRZeGkkWnhpJFt4aSVTeGklVHhpJVV4aSVWeGklXnhpfk95IWlPeyF2TyFoIW9PJGYhbU9UeGlaeGlbeGldeGleeGlfeGljeGlneGloeGlteGlveGlxeGlyeGlzeGl1JHtYIVN4aSFUeGkhVXhpIVd4aSFaeGkhYnhpIWZ4aSFreGkhbXhpIW94aSFweGkhc3hpIXV4aSF3eGkheHhpIXl4aSF7eGkhfXhpI094aSNQeGkjUXhpI1N4aSNUeGkjVXhpI114aSNkeGkjb3hpJFd4aSRZeGkkWnhpJFt4aSVTeGklVHhpJVV4aSVWeGklXnhpfk97IXZPIWghb08kZiFtT1R4aVp4aVt4aV14aV54aV94aWN4aWd4aWh4aW14aW94aXF4aXJ4aXN4aXUke1ghU3hpIVR4aSFVeGkhV3hpIVp4aSFieGkhZnhpIWt4aSFteGkhb3hpIXB4aSFzeGkhdXhpIXd4aSF4eGkheXhpIXt4aSF9eGkjT3hpI1B4aSNReGkjU3hpI1R4aSNVeGkjXXhpI2R4aSNveGkkV3hpJFl4aSRaeGkkW3hpJVN4aSVUeGklVXhpJVZ4aSVeeGlleGl+T3l4aSRqeGl3eGlkeGlheGkkaXhpI254aWt4aX5QIS1rTyFmJVJPflBLck9aIWdPWyFnT10haE9eIWhPeSFpT3shdk8haCFvTyRmIW1PVGxpY2xpZ2xpaGxpbWxpdSR7WCFTbGkhVGxpIVVsaSFXbGkhWmxpIWJsaSFmbGkha2xpIW1saSFvbGkhcGxpIXNsaSF1bGkhd2xpIXhsaSF5bGkhe2xpIX1saSNPbGkjUGxpI1FsaSNTbGkjVGxpI1VsaSNdbGkjZGxpI29saSRXbGkkWWxpJFpsaSRbbGklU2xpJVRsaSVVbGklVmxpJV5saX5PXyF1T28hc09xIWZPciFmT3MhdE9+UCExfU9aIWdPWyFnT10haE9eIWhPeSFpT3shdk8haCFvTyRmIW1PVG5pY25pZ25paG5pbW5pb25pdSR7WCFTbmkhVG5pIVVuaSFXbmkhWm5pIWJuaSFmbmkha25pIW1uaSFvbmkhcG5pIXNuaSF1bmkhd25pIXhuaSF5bmkhe25pIX1uaSNPbmkjUG5pI1FuaSNTbmkjVG5pI1VuaSNdbmkjZG5pI29uaSRXbmkkWW5pJFpuaSRbbmklU25pJVRuaSVVbmklVm5pJV5uaX5PXyF1T3EhZk9yIWZPcyF0T35QITVwT1ohZ09bIWdPXSFoT14haE9fJ1VPbSdTT3EnT09yJ09Pcyd6T3khaU97IXZPIWghb08kZiFtT3Uke1h+T28lU09+UCE5Y08hUiVXTyFVJVhPIVclWU8hWiVaTyFeJVtPIWIlXU8kWVFPJFpRT35PWiN9WFsjfVhdI31YXiN9WF8jfVhtI31YbyN9WHEjfVhyI31YcyN9WHUjfVh3I31YeSN9WHsjfVghaCN9WCRZI31YJFojfVgkWyN9WCRmI31YJGojfVh+UDtSTyR2JV9Pfk8kaiVgT3ckfVh+T3clYk9+TyRmJF9PJGkhT2FUIU9hWiFPYVshT2FdIU9hXiFPYV8hT2FjIU9hZyFPYWghT2FtIU9hbyFPYXEhT2FyIU9hcyFPYXUhT2F5IU9heyFPYSFTIU9hIVQhT2EhVSFPYSFXIU9hIVohT2EhYiFPYSFmIU9hIWghT2EhayFPYSFtIU9hIW8hT2EhcCFPYSFzIU9hIXUhT2EhdyFPYSF4IU9hIXkhT2EheyFPYSF9IU9hI08hT2EjUCFPYSNRIU9hI1MhT2EjVCFPYSNVIU9hI10hT2EjZCFPYSNvIU9hJFchT2EkWSFPYSRaIU9hJFshT2ElUyFPYSVUIU9hJVUhT2ElViFPYSVeIU9hJGohT2F3IU9hZCFPYWEhT2EjbiFPYWUhT2FrIU9hfk8kaiRjTyFmJU9hdyVPYX5PJHYlaE93I2tYJGoja1h+TyRqJWlPdyVaWH5PdyVrT35PJHYjc2F+UE1iTyRYI1tPJVRdT35PJGokbU8jbiVdYX5PJGokck9rJG5hfk8hVCV1T35PdyFeT35PJGkldk9hYFgkamBYflBLck9UU3FjU3FnU3FoU3EhU1NxIVRTcSFVU3EhV1NxIVpTcSFiU3EhZlNxIWtTcSFtU3Ehb1NxIXBTcSFzU3EhdVNxIXdTcSF4U3EheVNxIXtTcSF9U3EjT1NxI1BTcSNRU3EjU1NxI1RTcSNVU3EjXVNxI2RTcSNvU3EkV1NxJFlTcSRaU3EkW1NxJVNTcSVUU3ElVVNxJVZTcSVeU3F+UCdaTyRqdFh+UEd7T3cleE9+T28leU9+T28lek9+T28le09+TyFbJXxPfk8hWyV9T35PIVsmT09+TyRqJWBPdyR9YX5PdyZTTyFmJlNPIWgmU09+TyFmJFNhJGokU2F3JFNhflBLck8kaiVpT3clWmF+TyNsJllPflBgTyNuI3FpJGojcWl+UEtyT1ohZ09bIWdPXSFoT14haE9fKFhPbShWT28oV09xKFJPcihST3MpaU95IWlPeyF2TyFoIW9PJGYhbU9UYnFjYnFnYnFoYnF1JHtYIVNicSFUYnEhVWJxIVdicSFaYnEhYmJxIWZicSFrYnEhbWJxIW9icSFwYnEhc2JxIXVicSF3YnEheGJxIXlicSF7YnEhfWJxI09icSNQYnEjUWJxI1NicSNUYnEjVWJxI11icSNkYnEjb2JxJFdicSRZYnEkWmJxJFticSVTYnElVGJxJVVicSVWYnElXmJxfk9lJlpPflAhR3VPayRvaSRqJG9pflBLck9UZnFjZnFnZnFoZnEhU2ZxIVRmcSFVZnEhV2ZxIVpmcSFiZnEhZmZxIWtmcSFtZnEhb2ZxIXBmcSFzZnEhdWZxIXdmcSF4ZnEheWZxIXtmcSF9ZnEjT2ZxI1BmcSNRZnEjU2ZxI1RmcSNVZnEjXWZxI2RmcSNvZnEkV2ZxJFlmcSRaZnEkW2ZxJVNmcSVUZnElVWZxJVZmcSVeZnF+UCdaT1ohZ09bIWdPXSFoT14haE95IWlPeyF2TyFoIW9PJGYhbU9UcHlfcHljcHlncHlocHltcHlvcHlxcHlycHlzcHl1JHtYIVNweSFUcHkhVXB5IVdweSFacHkhYnB5IWZweSFrcHkhbXB5IW9weSFwcHkhc3B5IXVweSF3cHkheHB5IXlweSF7cHkhfXB5I09weSNQcHkjUXB5I1NweSNUcHkjVXB5I11weSNkcHkjb3B5JFdweSRZcHkkWnB5JFtweSVTcHklVHB5JVVweSVWcHklXnB5fk8hUyZdT35PIVYmXU9+TyFTJl5Pfk8hUiVXTyFVJVhPIVclWU8hWiVaTyFeJVtPIWIock8kWVFPJFpRT35PIVgkd1B+UCMkZU93I1lpJGojWWl+UEtyT1QjbVhjI21YZyNtWGgjbVghUyNtWCFUI21YIVUjbVghVyNtWCFaI21YIWIjbVghZiNtWCFrI21YIW0jbVghbyNtWCFwI21YIXMjbVghdSNtWCF3I21YIXgjbVgheSNtWCF7I21YIX0jbVgjTyNtWCNQI21YI1EjbVgjUyNtWCNUI21YI1UjbVgjXSNtWCNkI21YI28jbVgkVyNtWCRZI21YJFojbVgkWyNtWCVTI21YJVQjbVglVSNtWCVWI21YJV4jbVh+UCdaT2FgaSRqYGl+UEtyTyFUJmxPfk8kWVFPJFpRTyFYIVBYJGYhUFgkaiFQWH5PJGYnXU8hWCFPWCRqIU9Yfk8hWCZuT35PJHYmb09+TyRqJnBPIVgkdVh+TyFYJnJPfk8kaiZzTyFYJHdYfk8hWCZ1T35PVGIhUmNiIVJnYiFSaGIhUiFTYiFSIVRiIVIhVWIhUiFXYiFSIVpiIVIhYmIhUiFmYiFSIWtiIVIhbWIhUiFvYiFSIXBiIVIhc2IhUiF1YiFSIXdiIVIheGIhUiF5YiFSIXtiIVIhfWIhUiNPYiFSI1BiIVIjUWIhUiNTYiFSI1RiIVIjVWIhUiNdYiFSI2RiIVIjb2IhUiRXYiFSJFliIVIkWmIhUiRbYiFSJVNiIVIlVGIhUiVVYiFSJVZiIVIlXmIhUn5QJ1pPJGYnXU8hWCFPYSRqIU9hfk8kaiZwTyFYJHVhfk8kaiZzTyFYJHdhfk8keCZ7T35PJGokYlhkJGJYdyRiWGEkYlgkaSRiWCNuJGJYayRiWH5QMnxPWiFnT1shZ09dIWhPXiFoT3khaU97IXZPIWghb08kZiFtT19waW1waW9waXFwaXJwaXNwaXUke1gkV3BpJGpwaXdwaSFmcGlkcGlhcGkkaXBpI25waWtwaX5PXSFoT14haE95IWlPeyF2TyFoIW9PJGYhbU9aeGlbeGlfeGlteGlveGlxeGlyeGlzeGl1JHtYJFd4aSRqeGl3eGkhZnhpZHhpYXhpJGl4aSNueGlreGl+T3khaU97IXZPIWghb08kZiFtT1p4aVt4aV14aV54aV94aW14aW94aXF4aXJ4aXN4aXUke1gkV3hpJGp4aXd4aSFmeGlkeGlheGkkaXhpI254aWt4aX5PWiFnT1shZ09dIWhPXiFoT3khaU97IXZPIWghb08kZiFtT21saXUke1gkV2xpJGpsaXdsaSFmbGlkbGlhbGkkaWxpI25saWtsaX5PXydVT28nVE9xJ09PcidPT3Mnek9+UCMyak9aIWdPWyFnT10haE9eIWhPeSFpT3shdk8haCFvTyRmIW1PbW5pb25pdSR7WCRXbmkkam5pd25pIWZuaWRuaWFuaSRpbmkjbm5pa25pfk9fJ1VPcSdPT3InT09zJ3pPflAjNFtPJFdTcSRqU3F3U3EhZlNxZFNxYVNxJGlTcSNuU3FrU3F+UEtyTyNsJ2lPflBgT1ohZ09bIWdPXSFoT14haE9fKHlPbSh3T28oeE9xKHNPcihzT3MpY095IWlPeyF2TyFoIW9PJGYhbU91JHtYJFdicSRqYnF3YnEhZmJxZGJxYWJxJGlicSNuYnFrYnF+T2Unak9+UCM2dE9lYnF+UCM2dE9lYnF+UCFHdU8kV2ZxJGpmcXdmcSFmZnFkZnFhZnEkaWZxI25mcWtmcX5QS3JPWiFnT1shZ09dIWhPXiFoT3khaU97IXZPIWghb08kZiFtT19weW1weW9weXFweXJweXNweXUke1gkV3B5JGpweXdweSFmcHlkcHlhcHkkaXB5I25weWtweX5PJFcjbVgkaiNtWHcjbVghZiNtWGQjbVhhI21YJGkjbVgjbiNtWGsjbVh+UEtyTyRXYiFSJGpiIVJ3YiFSIWZiIVJkYiFSYWIhUiRpYiFSI25iIVJrYiFSflBLck9UdFhjdFhndFhodFghU3RYIVR0WCFVdFghV3RYIVp0WCFidFghZnRYIWt0WCFtdFghb3RYIXB0WCFzdFghdXRYIXd0WCF4dFgheXRYIXt0WCF9dFgjT3RYI1B0WCNRdFgjU3RYI1R0WCNVdFgjXXRYI2R0WCNvdFgkV3RYJFl0WCRadFgkW3RYJVN0WCVUdFglVXRYJVZ0WCVedFh+UCdaT2QnXk9+UEtyT2snX09+T28nYU9+UCE5Y093J2JPfk8keCdsT35PZCd0T35QS3JPIVgndU9+T2Qndk9+UEtyT3Une09+T2VwaX5QISFwT2V4aX5QISZfT2V4aX5QISl8T18oWE9vKFdPcShST3IoUk9zKWlPZWxpflAhMX1PXyhYT3EoUk9yKFJPcylpT2VuaX5QITVwT1ohZ09bIWdPXSFoT14haE9fKFhPbShWT28oV09xKFJPcihST3MpaU95IWlPeyF2TyFoIW9PJGYhbU91JHtYfk9UU3FjU3FlU3FnU3FoU3EhU1NxIVRTcSFVU3EhV1NxIVpTcSFiU3EhZlNxIWtTcSFtU3Ehb1NxIXBTcSFzU3EhdVNxIXdTcSF4U3EheVNxIXtTcSF9U3EjT1NxI1BTcSNRU3EjU1NxI1RTcSNVU3EjXVNxI2RTcSNvU3EkV1NxJFlTcSRaU3EkW1NxJVNTcSVUU3ElVVNxJVZTcSVeU3F+UCNBb08jbChoT35QYE9UZnFjZnFlZnFnZnFoZnEhU2ZxIVRmcSFVZnEhV2ZxIVpmcSFiZnEhZmZxIWtmcSFtZnEhb2ZxIXBmcSFzZnEhdWZxIXdmcSF4ZnEheWZxIXtmcSF9ZnEjT2ZxI1BmcSNRZnEjU2ZxI1RmcSNVZnEjXWZxI2RmcSNvZnEkV2ZxJFlmcSRaZnEkW2ZxJVNmcSVUZnElVWZxJVZmcSVeZnF+UCNBb09lcHl+UCFOZ09UI21YYyNtWGUjbVhnI21YaCNtWCFTI21YIVQjbVghVSNtWCFXI21YIVojbVghYiNtWCFmI21YIWsjbVghbSNtWCFvI21YIXAjbVghcyNtWCF1I21YIXcjbVgheCNtWCF5I21YIXsjbVghfSNtWCNPI21YI1AjbVgjUSNtWCNTI21YI1QjbVgjVSNtWCNdI21YI2QjbVgjbyNtWCRXI21YJFkjbVgkWiNtWCRbI21YJVMjbVglVCNtWCVVI21YJVYjbVglXiNtWH5QI0FvT1ohZ09bIWdPXSFoT14haE9fKFhPbShWT28oV09xKFJPcihST3MpaU95IWlPeyF2TyFoIW9PJGYhbU91JHtYflFiIVJUdFhjdFhldFhndFhodFghU3RYIVR0WCFVdFghV3RYIVp0WCFidFghZnRYIWt0WCFtdFghb3RYIXB0WCFzdFghdXRYIXd0WCF4dFgheXRYIXt0WCF9dFgjT3RYI1B0WCNRdFgjU3RYI1R0WCNVdFgjXXRYI2R0WCNvdFgkV3RYJFl0WCRadFgkW3RYJVN0WCVUdFglVXRYJVZ0WCVedFh+UCNBb09rKGBPfk9vKGJPflAhOWNPdyhjT35PIVsoZk9+T2VwaX5QIy1yT2V4aX5QIy9gT2V4aX5QIzB8T18oeU9vKHhPcShzT3Ioc09zKWNPZWxpflAjMmpPXyh5T3Eoc09yKHNPcyljT2VuaX5QIzRbT1ohZ09bIWdPXSFoT14haE9fKHlPbSh3T28oeE9xKHNPcihzT3MpY095IWlPeyF2TyFoIW9PJGYhbU91JHtYfk9lU3EkV1NxJGpTcXdTcSFmU3FkU3FhU3EkaVNxI25TcWtTcX5QJCF7TyNsKVhPflBgT2VmcSRXZnEkamZxd2ZxIWZmcWRmcWFmcSRpZnEjbmZxa2ZxflAkIXtPZXB5flAjOWhPZSNtWCRXI21YJGojbVh3I21YIWYjbVhkI21YYSNtWCRpI21YI24jbVhrI21YflAkIXtPWiFnT1shZ09dIWhPXiFoT18oeU9tKHdPbyh4T3Eoc09yKHNPcyljT3khaU97IXZPIWghb08kZiFtT3Uke1h+UWIhUmspUU9+T28pU09+UCE5Y093KVRPfk91KWRPfk9fKHlPbSh3T28oeE9xKHNPcihzT3MpY09ldFh+UDh4T3Upak9+TyIsCiAgICBnb3RvOiAiITdmJV5QUFBQJV9QJ1gnZSduKForUlBQUFBQK1tQJV9QUFAlX1BQK18ra1AlX1AlX1AlX1BQUCt0UCxTUCVfUCVfUFAsXSxyLVYselBQUFBQUFAselBQLHpQL2wvbyx6UC91L3slX1AlX1AlXzBTUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUDF8MlAyVjF8UDJiNF8yYjJiNmM4YFAlXzpdJV88VjxWPlA+XVA+ZlBQPFY+cj54Nl8+fFA/VVA/WD9fP2Y/bD9yP3hCWEJkQmpCcEJ2QnxDU0NZUFBQUFBQUFBDYENkSFtKVUxVTFtQUExjUFBMaUx1TnUhIXUhIXshI1MhI1ghJG4hJlghJ3YhKXZQISl5UCEpfSEraCEtUiEueyEvUiEvVSVfIS9bITFVUFBQUCEzVkhbITNjITVjITVpITdjJG9pT1BWZWZxdCFmIWohayFsIXAhciFzIXQhdSF6I24jcCN0I3gkVCRjJGwkcCRxJHQlUyVfJWsldiZZJlonTydQJ1EnUidTJ1QnVSdWJ14nXydhJ2InaSdqJ20ndCd2J3gneihRKFIoUyhUKFUoVihXKFgoWShgKGIoYyhoKGkobChtKHModCh1KHYodyh4KHkoeilRKVMpVClYKVkpWyljKWlRIWVSUSdvJ3dRKG4pZlIpXSlhVyFjUid3KWEpZlIlTyN2WSFhUiN2J3cpYSlmWSNkdiRyJ3kpYilnXiRYIXojWiVgJWkneylkKWpUJmIlfSZwJWBXT1BWWGRlZmdxdCFmIWohayFsIW4hcCFyIXMhdCF1I24jcCN0I3gkVCRWJF8kYSRjJGwkcCRxJHQlUyVfJWglayV2JXwmTyZZJlomXyZvJnMmeydPJ1AnUSdSJ1MnVCdVJ1YnXSdeJ18nYSdiJ2knaidsJ20ndCd2J3gneihRKFIoUyhUKFUoVihXKFgoWShgKGIoYyhmKGgoaShsKG0ocyh0KHUodih3KHgoeSh6KVEpUylUKVgpWSlbKWMpaXQhYFJ2I1ojdiRyJWAlaSV9JnAndyd5J3spYSliKWQpZilnKWpVI3IhYCNzJFdSJFchelUjciFgI3MkV1QkaiNdJGtSJH0jdFEjaHZRJ3EneVEobylnUileKWJXI2Z2J3kpYilnUiVyJHJVIVpQI3AkVFckVSF1J1UoWCh5UiR4I25RIV5QUSR6I3BSJVUkVFElXiRWUSZUJWhRJmElfFUmZiZPJnMoZlEmdiZvVCZ8JnsnbFsjUWRlZmckVCRhYyVWJFYlaCV8Jk8mbyZzJnsnbChmIWJqT1ZxIWYhaiFrIWwhciFzIXUjeCRwJHQlUyVrJlkmWid0KFIoUyhUKFUoVihXKFgoWShgKGIoYyhoKGkobVsjT2RnJFYkYSVoJntVI1RlZiRUUSRPIW5TJWMkXyddWyZgJXwmTyZvJnMnbChmI1YmfVB0IXAhdCF6I24jcCN0JGMkbCRxJV8ldidPJ1AnUSdSJ1MnVCdVJ1YnXidfJ2EnYidpJ2onbSd2J3gneihRKGwocyh0KHUodih3KHgoeSh6KVEpUylUKVgpWSlbKWMpaVImZSV9USZjJX1SJncmcFEmaSZPUid9KGZTJmcmTyhmUiZ5JnMkb1lPUFZlZnF0IWYhaiFrIWwhcCFyIXMhdCF1IXojbiNwI3QjeCRUJGMkbCRwJHEkdCVTJV8layV2JlkmWidPJ1AnUSdSJ1MnVCdVJ1YnXidfJ2EnYidpJ2onbSd0J3YneCd6KFEoUihTKFQoVShWKFcoWChZKGAoYihjKGgoaShsKG0ocyh0KHUodih3KHgoeSh6KVEpUylUKVgpWSlbKWMpaVIkXiF6USRaIXpSJlElYFMkWSF6JWBaJGYjWiVpJ3spZClqJHViT1BWZGVmZ3F0IWYhaiFrIWwhcCFyIXMhdCF1IXojbiNwI3QjeCRUJGEkYyRsJHAkcSR0JVMlXyVrJXYmWSZaJ08nUCdRJ1InUydUJ1UnVideJ18nYSdiJ2knaidtJ3Qndid4J3ooUShSKFMoVChVKFYoVyhYKFkoYChiKGMoaChpKGwobShzKHQodSh2KHcoeCh5KHopUSlTKVQpWClZKVspYylpJHRiT1BWZGVmZ3F0IWYhaiFrIWwhcCFyIXMhdCF1IXojbiNwI3QjeCRUJGEkYyRsJHAkcSR0JVMlXyVrJXYmWSZaJ08nUCdRJ1InUydUJ1UnVideJ18nYSdiJ2knaidtJ3Qndid4J3ooUShSKFMoVChVKFYoVyhYKFkoYChiKGMoaChpKGwobShzKHQodSh2KHcoeCh5KHopUSlTKVQpWClZKVspYylpUSF8X1QjXm0kbSR1YE9QVmRlZmdxdCFmIWohayFsIXAhciFzIXQhdSF6I24jcCN0I3gkVCRhJGMkbCRwJHEkdCVTJV8layV2JlkmWidPJ1AnUSdSJ1MnVCdVJ1YnXidfJ2EnYidpJ2onbSd0J3YneCd6KFEoUihTKFQoVShWKFcoWChZKGAoYihjKGgoaShsKG0ocyh0KHUodih3KHgoeSh6KVEpUylUKVgpWSlbKWMpaSR1YU9QVmRlZmdxdCFmIWohayFsIXAhciFzIXQhdSF6I24jcCN0I3gkVCRhJGMkbCRwJHEkdCVTJV8layV2JlkmWidPJ1AnUSdSJ1MnVCdVJ1YnXidfJ2EnYidpJ2onbSd0J3YneCd6KFEoUihTKFQoVShWKFcoWChZKGAoYihjKGgoaShsKG0ocyh0KHUodih3KHgoeSh6KVEpUylUKVgpWSlbKWMpaSRvaE9QVmVmcXQhZiFqIWshbCFwIXIhcyF0IXUheiNuI3AjdCN4JFQkYyRsJHAkcSR0JVMlXyVrJXYmWSZaJ08nUCdRJ1InUydUJ1UnVideJ18nYSdiJ2knaidtJ3Qndid4J3ooUShSKFMoVChVKFYoVyhYKFkoYChiKGMoaChpKGwobShzKHQodSh2KHcoeCh5KHopUSlTKVQpWClZKVspYylpJG9uT1BWZWZxdCFmIWohayFsIXAhciFzIXQhdSF6I24jcCN0I3gkVCRjJGwkcCRxJHQlUyVfJWsldiZZJlonTydQJ1EnUidTJ1QnVSdWJ14nXydhJ2InaSdqJ20ndCd2J3gneihRKFIoUyhUKFUoVihXKFgoWShgKGIoYyhoKGkobChtKHModCh1KHYodyh4KHkoeilRKVMpVClYKVkpWyljKWlRJGkjWlEncyd7UShxKWpSKWApZFckZyNaJ3spZClqUiZVJWlXJlglaydiKGMpVFgmaiZZJ2koaClYUSNgbVIlbiRtVCNfbSRtUyNdbSRtVCRqI10ka1IhXlBRcU9SI2JxUyNzIWAkV1IkeyNzUSN3IWNSJVAjd1EkcyNmUiVzJHNRI28hWlIkeSNvJU9YT1BWZGVmZ3F0IWYhaiFrIWwhbiFwIXIhcyF0IXUheiNuI3AjdCN4JFQkViRfJGEkYyRsJHAkcSR0JVMlXyVoJWsldiZZJlomeydPJ1AnUSdSJ1MnVCdVJ1YnXidfJ2EnYidpJ2onbSd0J3YneCd6KFEoUihTKFQoVShWKFcoWChZKGAoYihjKGgoaShsKG0ocyh0KHUodih3KHgoeSh6KVEpUylUKVgpWSlbKWMpaVMheVgmX18mXyV8Jk8mbyZzJ10nbChmUyRgI08jVFMlZCRgJm1SJm0mYFEmcSZjUiZ4JnFRJnQmZ1ImeiZ0USVhJFpSJlIlYVEkZCNWUiVnJGRRJWokZ1ImViVqUSRrI11SJWwka1EkbiNgUiVvJG5UcE9xU1NPcVchWVAjbiNwJ1VXIXhWJ20obSlbUSNTZVMjVmYhelEjY3RRI3ohZlEjeyFqUSN8IWtXI30hbCdSKFUodlEkUCFwUSRRIXJRJFIhc1EkUyF0USR8I3RRJVEjeFElVCRUUSVmJGNRJW0kbFElcCRwUSVxJHFRJXQkdFEldyVTUSZQJV9TJlclayZZUSZbJXZRJmsmWlEnVydPUSdYJ1BRJ1knUVEnWidTUSdbJ1RRJ2AnVlEnYydeUSdkJ3ZRJ2UndFEnZidfUSdnJ2FTJ2gnYidpUSdrJ2pRJ24hdVEncCd4USdyJ3pRJ3woUVEoTyhsUShaKFJRKFsoU1EoXShUUSheKFZRKF8oV1EoYShZUShkKGBRKGUoYlMoZyhjKGhRKGooaVEoayhYUShwKWlRKHsoc1EofCh0USh9KHVRKU8od1EpUCh4USlSKHpRKVUpUVEpVilTUylXKVQpWFEpWilZUSlfKWNSKWgoeSRvb09QVmVmcXQhZiFqIWshbCFwIXIhcyF0IXUheiNuI3AjdCN4JFQkYyRsJHAkcSR0JVMlXyVrJXYmWSZaJ08nUCdRJ1InUydUJ1UnVideJ18nYSdiJ2knaidtJ3Qndid4J3ooUShSKFMoVChVKFYoVyhYKFkoYChiKGMoaChpKGwobShzKHQodSh2KHcoeCh5KHopUSlTKVQpWClZKVspYylpcFJPVnEhZiFqIWshbCFyIXMhdSN4JHQlUyVrJlkmWiFqJ3dQZWZ0IXAhdCF6I24jcCN0JFQkYyRsJHElXyV2J08nUCdRJ1InUydUJ1UnVidfJ2EnYidpJ2onbSd4J3ooUShsKWMpaXApYSdeJ3Yocyh0KHUodih3KHgoeSh6KVEpUylUKVgpWSlbcSlmJHAndChSKFMoVChVKFYoVyhYKFkoYChiKGMoaChpKG1YIWRSJ3cpYSlmWiFiUiN2J3cpYSlmUSN0IWFSJHEjZFEjeCFlUSdWJ29RKFkoblIoeildcHRPVnEhZiFqIWshbCFyIXMhdSN4JHQlUyVrJlkmWiFqJ3hQZWZ0IXAhdCF6I24jcCN0JFQkYyRsJHElXyV2J08nUCdRJ1InUydUJ1UnVidfJ2EnYidpJ2onbSd4J3ooUShsKWMpaXAoUSRwJ3QoUihTKFQoVShWKFcoWChZKGAoYihjKGgoaShtcShsJ14ndihzKHQodSh2KHcoeCh5KHopUSlTKVQpWClZKVtwdk9WcSFmIWohayFsIXIhcyF1I3gkdCVTJWsmWSZaIWoneVBlZnQhcCF0IXojbiNwI3QkVCRjJGwkcSVfJXYnTydQJ1EnUidTJ1QnVSdWJ18nYSdiJ2knaidtJ3gneihRKGwpYylpcCliJ14ndihzKHQodSh2KHcoeCh5KHopUSlTKVQpWClZKVtxKWckcCd0KFIoUyhUKFUoVihXKFgoWShgKGIoYyhoKGkobVgjZ3YneSliKWdaI2V2JHIneSliKWdWIVtQI3AkVGQhalMjeiRRJFIlUSV0JXcmVyZrJ24hVydQIVkjUyNWI2MkUCRTJHwlVCVmJW0lcSZQJlsnVydaJ1snYCdmJ2cnaCdrJ3Ancid8KE8ocClfZihTJXAnZShaKF4oXyhhKGQoZShnKGooa2codCdjJ2QoeylPKVApUilVKVYpVylaKWhmIWtTI3ojeyRRJFIlUSV0JXcmVyZrJ24hWSdRIVkjUyNWI2MkUCRTJHwlVCVmJW0lcSZQJlsnVydYJ1onWydgJ2YnZydoJ2sncCdyJ3woTyhwKV9oKFQlcCdlKFooWyheKF8oYShkKGUoZyhqKGtpKHUnYydkKHsofClPKVApUilVKVYpVylaKWhoIWxTI3ojeyN8JFEkUiVRJXQldyZXJmsnbiFbJ1IhWSNTI1YjYyRQJFMkfCVUJWYlbSVxJlAmWydXJ1gnWSdaJ1snYCdmJ2cnaCdrJ3Ancid8KE8ocClfaihVJXAnZShaKFsoXSheKF8oYShkKGUoZyhqKGtrKHYnYydkKHsofCh9KU8pUClSKVUpVilXKVopaHBWT1ZxIWYhaiFrIWwhciFzIXUjeCR0JVMlayZZJlohaidtUGVmdCFwIXQheiNuI3AjdCRUJGMkbCRxJV8ldidPJ1AnUSdSJ1MnVCdVJ1YnXydhJ2InaSdqJ20neCd6KFEobCljKWlwKG0kcCd0KFIoUyhUKFUoVihXKFgoWShgKGIoYyhoKGkobXEpWydeJ3Yocyh0KHUodih3KHgoeSh6KVEpUylUKVgpWSlbUiZkJX1UJmgmTyhmJFAhblMhWSF4I1MjViNjI3ojeyN8I30kUCRRJFIkUyR8JVElVCVmJW0lcCVxJXQldyZQJlcmWyZrJ1cnWCdZJ1onWydgJ2MnZCdlJ2YnZydoJ2snbidwJ3InfChPKFooWyhdKF4oXyhhKGQoZShnKGooayhwKHsofCh9KU8pUClSKVUpVilXKVopXyloJFAhcFMhWSF4I1MjViNjI3ojeyN8I30kUCRRJFIkUyR8JVElVCVmJW0lcCVxJXQldyZQJlcmWyZrJ1cnWCdZJ1onWydgJ2MnZCdlJ2YnZydoJ2snbidwJ3InfChPKFooWyhdKF4oXyhhKGQoZShnKGooayhwKHsofCh9KU8pUClSKVUpVilXKVopXyloJG9aT1BWZWZxdCFmIWohayFsIXAhciFzIXQhdSF6I24jcCN0I3gkVCRjJGwkcCRxJHQlUyVfJWsldiZZJlonTydQJ1EnUidTJ1QnVSdWJ14nXydhJ2InaSdqJ20ndCd2J3gneihRKFIoUyhUKFUoVihXKFgoWShgKGIoYyhoKGkobChtKHModCh1KHYodyh4KHkoeilRKVMpVClYKVkpWyljKWlRIXtaUiF9YFIkWyF6USNXZlIkXSF6JG9jT1BWZWZxdCFmIWohayFsIXAhciFzIXQhdSF6I24jcCN0I3gkVCRjJGwkcCRxJHQlUyVfJWsldiZZJlonTydQJ1EnUidTJ1QnVSdWJ14nXydhJ2InaSdqJ20ndCd2J3gneihRKFIoUyhUKFUoVihXKFgoWShgKGIoYyhoKGkobChtKHModCh1KHYodyh4KHkoeilRKVMpVClYKVkpWyljKWkkaGNPUFZxdCFmIWohayFsIXAhciFzIXQhdSF6I24jcCN0I3gkYyRsJHAkcSR0JVMlXyVrJXYmWSZaJ08nUCdRJ1InUydUJ1UnVideJ18nYSdiJ2knaidtJ3Qndid4J3ooUShSKFMoVChVKFYoVyhYKFkoYChiKGMoaChpKGwobShzKHQodSh2KHcoeCh5KHopUSlTKVQpWClZKVspYylpVSNRZGckYVYjVWVmJFRXI1JkZWYkVFEjWGdSJWUkYXBrT1ZxIWYhaiFrIWwhciFzIXUjeCR0JVMlayZZJlohaihQUGVmdCFwIXQheiNuI3AjdCRUJGMkbCRxJV8ldidPJ1AnUSdSJ1MnVCdVJ1YnXydhJ2InaSdqJ20neCd6KFEobCljKWlwKWUnXid2KHModCh1KHYodyh4KHkoeilRKVMpVClYKVkpW3EpayRwJ3QoUihTKFQoVShWKFcoWChZKGAoYihjKGgoaShtWCRoI1oneylkKWokb21PUFZlZnF0IWYhaiFrIWwhcCFyIXMhdCF1IXojbiNwI3QjeCRUJGMkbCRwJHEkdCVTJV8layV2JlkmWidPJ1AnUSdSJ1MnVCdVJ1YnXidfJ2EnYidpJ2onbSd0J3YneCd6KFEoUihTKFQoVShWKFcoWChZKGAoYihjKGgoaShsKG0ocyh0KHUodih3KHgoeSh6KVEpUylUKVgpWSlbKWMpaVIjYW0iLAogICAgbm9kZU5hbWVzOiAi4pqgIExpbmVDb21tZW50IEJsb2NrQ29tbWVudCBFeHByZXNzaW9ucyBGb3JFeHByZXNzaW9uIGZvciBJbkV4cHJlc3Npb25zIEluRXhwcmVzc2lvbiBOYW1lIElkZW50aWZpZXIgSWRlbnRpZmllciBBcml0aE9wIEFyaXRoT3AgQXJpdGhPcCBBcml0aE9wIGluIEl0ZXJhdGlvbkNvbnRleHQgcmV0dXJuIElmRXhwcmVzc2lvbiBpZiB0aGVuIGVsc2UgUXVhbnRpZmllZEV4cHJlc3Npb24gc29tZSBldmVyeSBJbkV4cHJlc3Npb25zIEluRXhwcmVzc2lvbiBzYXRpc2ZpZXMgRGlzanVuY3Rpb24gb3IgQ29uanVuY3Rpb24gYW5kIENvbXBhcmlzb24gQ29tcGFyZU9wIENvbXBhcmVPcCBiZXR3ZWVuIFBvc2l0aXZlVW5hcnlUZXN0ICggUG9zaXRpdmVVbmFyeVRlc3RzICkgQXJpdGhtZXRpY0V4cHJlc3Npb24gQXJpdGhPcCBJbnN0YW5jZU9mRXhwcmVzc2lvbiBpbnN0YW5jZSBvZiBUeXBlIFF1YWxpZmllZE5hbWUgVmFyaWFibGVOYW1lIFNwZWNpYWxUeXBlIGRheXMgdGltZSBkdXJhdGlvbiB5ZWFycyBtb250aHMgZGF0ZSA+IExpc3RUeXBlIGxpc3QgPCBDb250ZXh0VHlwZSBjb250ZXh0IENvbnRleHRFbnRyeVR5cGVzIENvbnRleHRFbnRyeVR5cGUgRnVuY3Rpb25UeXBlIGZ1bmN0aW9uIEFyZ3VtZW50VHlwZXMgQXJndW1lbnRUeXBlIFBhdGhFeHByZXNzaW9uIF0gRmlsdGVyRXhwcmVzc2lvbiBbIEZ1bmN0aW9uSW52b2NhdGlvbiBTcGVjaWFsRnVuY3Rpb25OYW1lIHN0cmluZyBsZW5ndGggdXBwZXIgY2FzZSBsb3dlciBzdWJzdHJpbmcgYmVmb3JlIGFmdGVyIHN0YXJ0cyB3aXRoIGVuZHMgY29udGFpbnMgaW5zZXJ0IGluZGV4IGRpc3RpbmN0IHZhbHVlcyBtZXQgYnkgb3ZlcmxhcHMgZmluaXNoZWQgc3RhcnRlZCBkYXkgeWVhciB3ZWVrIG1vbnRoIGdldCB2YWx1ZSBlbnRyaWVzIE5hbWVkUGFyYW1ldGVycyBOYW1lZFBhcmFtZXRlciBQYXJhbWV0ZXJOYW1lIFBvc2l0aW9uYWxQYXJhbWV0ZXJzIG51bGwgTnVtZXJpY0xpdGVyYWwgU3RyaW5nTGl0ZXJhbCBCb29sZWFuTGl0ZXJhbCBEYXRlVGltZUxpdGVyYWwgRGF0ZVRpbWVDb25zdHJ1Y3RvciBBdExpdGVyYWwgPyBTaW1wbGVQb3NpdGl2ZVVuYXJ5VGVzdCBJbnRlcnZhbCBQYXJlbnRoZXNpemVkRXhwcmVzc2lvbiBMaXN0IEZ1bmN0aW9uRGVmaW5pdGlvbiBGb3JtYWxQYXJhbWV0ZXJzIEZvcm1hbFBhcmFtZXRlciBleHRlcm5hbCBGdW5jdGlvbkJvZHkgfSB7IENvbnRleHQgQ29udGV4dEVudHJ5IEtleSBOYW1lIElkZW50aWZpZXIgVW5hcnlUZXN0cyBXaWxkY2FyZCBub3QiLAogICAgbWF4VGVybTogMTk4LAogICAgY29udGV4dDogdmFyaWFibGVUcmFja2VyLAogICAgbm9kZVByb3BzOiBbCiAgICAgIFsiZ3JvdXAiLCAtMTcsNCwxOCwyMiwyOCwzMCwzMiw0MCw0Miw2Nyw2OSw3MSwxMTIsMTEzLDExNSwxMTYsMTE3LDEyNCwiRXhwcmVzc2lvbiIsNDcsIkV4cHJlc3Npb24gRXhwcmVzc2lvbiIsLTUsMTA1LDEwNiwxMDcsMTA4LDEwOSwiRXhwcmVzc2lvbiBMaXRlcmFsIl0sCiAgICAgIFsiY2xvc2VkQnkiLCAzNywiKSIsNzAsIl0iLDEyMywifSJdLAogICAgICBbIm9wZW5lZEJ5IiwgMzksIigiLDY4LCJbIiwxMjIsInsiXQogICAgXSwKICAgIHByb3BTb3VyY2VzOiBbZmVlbEhpZ2hsaWdodGluZ10sCiAgICBza2lwcGVkTm9kZXM6IFswLDEsMl0sCiAgICByZXBlYXROb2RlQ291bnQ6IDE0LAogICAgdG9rZW5EYXRhOiAiKXh+UnVYWSNmWVokWlpbI2ZdXiRacHEjZnFyJGBycyRrd3glX3h5JWR5eiVpenslbnt8JXt8fSZRfSFPJlYhTyFQJmQhUCFRJnwhUSFbKFghWyFdKGohXSFeKG8hXiFfKHQhXyFgJGYhYCFhKVQhYiFjKV8hfSNPKWQjUCNRKWkjUSNSJXYjbyNwKW4jcSNyKXMkZiRnI2YjQlkjQlojZiRJUyRJXyNmJEl8JEl9JFokSX0kSk8kWiRKVCRKVSNmJEtWJEtXI2YmRlUmRlYjZj9IVD9IVSNmfiNrWSReflhZI2ZaWyNmcHEjZiRmJGcjZiNCWSNCWiNmJElTJElfI2YkSlQkSlUjZiRLViRLVyNmJkZVJkZWI2Y/SFQ/SFUjZn4kYE8kX35+JGNQIV8hYCRmfiRrT3F+fiRwVSVUfk9ZJGtaciRrcnMlU3MjTyRrI08jUCVYI1B+JGt+JVhPJVR+fiVbUE9+JGt+JWRPJGd+fiVpT3V+fiVuT3d+fiVzUF5+ensldn4le095fn4mUU9bfn4mVk8kan5SJltQWlAhYCFhJl9RJmRPJHhRfiZpUSRmfiFPIVAmbyFRIVsmdH4mdE8kaX5+JnlQJVN+IVEhWyZ0fidSUV1+ensnWCFQIVEnfH4nW1JPeidYensnZXt+J1h+J2hUT3onWHp7J2V7IVAnWCFQIVEndyFRfidYfid8T1F+fihSUVB+T1knfFp+J3x+KF5RJVN+IU8hUChkIVEhWyhYfihnUCFRIVsmdH4ob08kdn5+KHRPJV5+Uih7UCFbUXJQIV8hYClPUClUT3JQUilbUCFYUXJQIV8hYClPfilkTyVWfn4paU8haH5+KW5PIWZ+filzTyNvfn4peE8jbn4iLAogICAgdG9rZW5pemVyczogW3Byb3BlcnR5SWRlbnRpZmllcnMsIGlkZW50aWZpZXJzLCBpbnNlcnRTZW1pY29sb24sIDAsIDFdLAogICAgdG9wUnVsZXM6IHsiRXhwcmVzc2lvbnMiOlswLDNdLCJVbmFyeVRlc3RzIjpbMSwxMjldfSwKICAgIGR5bmFtaWNQcmVjZWRlbmNlczogeyIzMCI6LTEsIjcxIjotMSwiMTAxIjotMSwiMTU0IjotMX0sCiAgICBzcGVjaWFsaXplZDogW3t0ZXJtOiAxNDgsIGdldDogdmFsdWUgPT4gc3BlY19pZGVudGlmaWVyW3ZhbHVlXSB8fCAtMX1dLAogICAgdG9rZW5QcmVjOiAwCiAgfSk7CgogIGZ1bmN0aW9uIHBhcnNlUGFyYW1ldGVyTmFtZXMoZm4pIHsKICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZm4uJGFyZ3MpKSB7CiAgICAgICAgICByZXR1cm4gZm4uJGFyZ3M7CiAgICAgIH0KICAgICAgY29uc3QgY29kZSA9IGZuLnRvU3RyaW5nKCk7CiAgICAgIGNvbnN0IG1hdGNoID0gL14oPzpbXihdKlxzKik/XCgoW14pXSspP1wpLy5leGVjKGNvZGUpOwogICAgICBpZiAoIW1hdGNoKSB7CiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ZhaWxlZCB0byBwYXJzZSBwYXJhbXM6ICcgKyBjb2RlKTsKICAgICAgfQogICAgICBjb25zdCBbXywgcGFyYW1zXSA9IG1hdGNoOwogICAgICBpZiAoIXBhcmFtcykgewogICAgICAgICAgcmV0dXJuIFtdOwogICAgICB9CiAgICAgIHJldHVybiBwYXJhbXMuc3BsaXQoJywnKS5tYXAocCA9PiBwLnRyaW0oKSk7CiAgfQogIGZ1bmN0aW9uIG5vdEltcGxlbWVudGVkKHRoaW5nKSB7CiAgICAgIHJldHVybiBuZXcgRXJyb3IoYG5vdCBpbXBsZW1lbnRlZDogJHt0aGluZ31gKTsKICB9CiAgLyoqCiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUKICAgKiBAcGFyYW0ge1JlY29yZDxzdHJpbmcsIGFueT59IGNvbnRleHQKICAgKgogICAqIEByZXR1cm4ge2FueX0KICAgKi8KICBmdW5jdGlvbiBnZXRGcm9tQ29udGV4dChuYW1lLCBjb250ZXh0KSB7CiAgICAgIGlmIChbJ25pbCcsICdib29sZWFuJywgJ251bWJlcicsICdzdHJpbmcnXS5pbmNsdWRlcyhnZXRUeXBlKGNvbnRleHQpKSkgewogICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KICAgICAgaWYgKG5hbWUgaW4gY29udGV4dCkgewogICAgICAgICAgcmV0dXJuIGNvbnRleHRbbmFtZV07CiAgICAgIH0KICAgICAgY29uc3Qgbm9ybWFsaXplZE5hbWUgPSBub3JtYWxpemVDb250ZXh0S2V5KG5hbWUpOwogICAgICBpZiAobm9ybWFsaXplZE5hbWUgaW4gY29udGV4dCkgewogICAgICAgICAgcmV0dXJuIGNvbnRleHRbbm9ybWFsaXplZE5hbWVdOwogICAgICB9CiAgICAgIGNvbnN0IGVudHJ5ID0gT2JqZWN0LmVudHJpZXMoY29udGV4dCkuZmluZCgoW2tleV0pID0+IG5vcm1hbGl6ZWROYW1lID09PSBub3JtYWxpemVDb250ZXh0S2V5KGtleSkpOwogICAgICBpZiAoZW50cnkpIHsKICAgICAgICAgIHJldHVybiBlbnRyeVsxXTsKICAgICAgfQogICAgICByZXR1cm4gbnVsbDsKICB9CgogIGZ1bmN0aW9uIGlzRGF0ZVRpbWUob2JqKSB7CiAgICAgIHJldHVybiBEYXRlVGltZS5pc0RhdGVUaW1lKG9iaik7CiAgfQogIGZ1bmN0aW9uIGlzRHVyYXRpb24ob2JqKSB7CiAgICAgIHJldHVybiBEdXJhdGlvbi5pc0R1cmF0aW9uKG9iaik7CiAgfQogIGZ1bmN0aW9uIGR1cmF0aW9uJDEob3B0cykgewogICAgICBpZiAodHlwZW9mIG9wdHMgPT09ICdudW1iZXInKSB7CiAgICAgICAgICByZXR1cm4gRHVyYXRpb24uZnJvbU1pbGxpcyhvcHRzKTsKICAgICAgfQogICAgICByZXR1cm4gRHVyYXRpb24uZnJvbUlTTyhvcHRzKTsKICB9CiAgZnVuY3Rpb24gZGF0ZShzdHIgPSBudWxsLCB0aW1lID0gbnVsbCwgem9uZSA9IG51bGwpIHsKICAgICAgaWYgKHRpbWUpIHsKICAgICAgICAgIGlmIChzdHIpIHsKICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJzxzdHI+IGFuZCA8dGltZT4gcHJvdmlkZWQnKTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBkYXRlKGAxOTAwLTAxLTAxVCR7dGltZX1gKTsKICAgICAgfQogICAgICBpZiAodHlwZW9mIHN0ciA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgIGlmIChzdHIuc3RhcnRzV2l0aCgnLScpKSB7CiAgICAgICAgICAgICAgdGhyb3cgbm90SW1wbGVtZW50ZWQoJ25lZ2F0aXZlIGRhdGUnKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmICghc3RyLmluY2x1ZGVzKCdUJykpIHsKICAgICAgICAgICAgICAvLyByYXcgZGF0ZXMgYXJlIGluIFVUQyB0aW1lIHpvbmUKICAgICAgICAgICAgICByZXR1cm4gZGF0ZShzdHIgKyAnVDAwOjAwOjAwLjAwMFonKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChzdHIuaW5jbHVkZXMoJ0AnKSkgewogICAgICAgICAgICAgIGlmICh6b25lKSB7CiAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignPHpvbmU+IGFscmVhZHkgcHJvdmlkZWQnKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgY29uc3QgW2RhdGVQYXJ0LCB6b25lUGFydF0gPSBzdHIuc3BsaXQoJ0AnKTsKICAgICAgICAgICAgICByZXR1cm4gZGF0ZShkYXRlUGFydCwgbnVsbCwgSW5mby5ub3JtYWxpemVab25lKHpvbmVQYXJ0KSk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gRGF0ZVRpbWUuZnJvbUlTTyhzdHIudG9VcHBlckNhc2UoKSwgewogICAgICAgICAgICAgIHNldFpvbmU6IHRydWUsCiAgICAgICAgICAgICAgem9uZQogICAgICAgICAgfSk7CiAgICAgIH0KICAgICAgcmV0dXJuIERhdGVUaW1lLm5vdygpOwogIH0KCiAgZnVuY3Rpb24gaXNDb250ZXh0KGUpIHsKICAgICAgcmV0dXJuIE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSA9PT0gT2JqZWN0LnByb3RvdHlwZTsKICB9CiAgZnVuY3Rpb24gaXNBcnJheSQxKGUpIHsKICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoZSk7CiAgfQogIGZ1bmN0aW9uIGlzQm9vbGVhbihlKSB7CiAgICAgIHJldHVybiB0eXBlb2YgZSA9PT0gJ2Jvb2xlYW4nOwogIH0KICBmdW5jdGlvbiBnZXRUeXBlKGUpIHsKICAgICAgaWYgKGUgPT09IG51bGwgfHwgZSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICByZXR1cm4gJ25pbCc7CiAgICAgIH0KICAgICAgaWYgKGlzQm9vbGVhbihlKSkgewogICAgICAgICAgcmV0dXJuICdib29sZWFuJzsKICAgICAgfQogICAgICBpZiAoaXNOdW1iZXIoZSkpIHsKICAgICAgICAgIHJldHVybiAnbnVtYmVyJzsKICAgICAgfQogICAgICBpZiAoaXNTdHJpbmcoZSkpIHsKICAgICAgICAgIHJldHVybiAnc3RyaW5nJzsKICAgICAgfQogICAgICBpZiAoaXNDb250ZXh0KGUpKSB7CiAgICAgICAgICByZXR1cm4gJ2NvbnRleHQnOwogICAgICB9CiAgICAgIGlmIChpc0FycmF5JDEoZSkpIHsKICAgICAgICAgIHJldHVybiAnbGlzdCc7CiAgICAgIH0KICAgICAgaWYgKGlzRHVyYXRpb24oZSkpIHsKICAgICAgICAgIHJldHVybiAnZHVyYXRpb24nOwogICAgICB9CiAgICAgIGlmIChpc0RhdGVUaW1lKGUpKSB7CiAgICAgICAgICBpZiAoZS55ZWFyID09PSAxOTAwICYmCiAgICAgICAgICAgICAgZS5tb250aCA9PT0gMSAmJgogICAgICAgICAgICAgIGUuZGF5ID09PSAxKSB7CiAgICAgICAgICAgICAgcmV0dXJuICd0aW1lJzsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChlLmhvdXIgPT09IDAgJiYKICAgICAgICAgICAgICBlLm1pbnV0ZSA9PT0gMCAmJgogICAgICAgICAgICAgIGUuc2Vjb25kID09PSAwICYmCiAgICAgICAgICAgICAgZS5taWxsaXNlY29uZCA9PT0gMCAmJgogICAgICAgICAgICAgIGUuem9uZSA9PT0gRml4ZWRPZmZzZXRab25lLnV0Y0luc3RhbmNlKSB7CiAgICAgICAgICAgICAgcmV0dXJuICdkYXRlJzsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiAnZGF0ZSB0aW1lJzsKICAgICAgfQogICAgICBpZiAoZSBpbnN0YW5jZW9mIFJhbmdlKSB7CiAgICAgICAgICByZXR1cm4gJ3JhbmdlJzsKICAgICAgfQogICAgICBpZiAoZSBpbnN0YW5jZW9mIEZ1bmN0aW9uV3JhcHBlcikgewogICAgICAgICAgcmV0dXJuICdmdW5jdGlvbic7CiAgICAgIH0KICAgICAgcmV0dXJuICdsaXRlcmFsJzsKICB9CiAgZnVuY3Rpb24gaXNUeXBlKGVsLCB0eXBlKSB7CiAgICAgIHJldHVybiBnZXRUeXBlKGVsKSA9PT0gdHlwZTsKICB9CiAgZnVuY3Rpb24gdHlwZUNhc3Qob2JqLCB0eXBlKSB7CiAgICAgIGlmIChpc0RhdGVUaW1lKG9iaikpIHsKICAgICAgICAgIGlmICh0eXBlID09PSAndGltZScpIHsKICAgICAgICAgICAgICByZXR1cm4gb2JqLnNldCh7CiAgICAgICAgICAgICAgICAgIHllYXI6IDE5MDAsCiAgICAgICAgICAgICAgICAgIG1vbnRoOiAxLAogICAgICAgICAgICAgICAgICBkYXk6IDEKICAgICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIGlmICh0eXBlID09PSAnZGF0ZScpIHsKICAgICAgICAgICAgICByZXR1cm4gb2JqLnNldFpvbmUoJ3V0YycsIHsga2VlcExvY2FsVGltZTogdHJ1ZSB9KS5zdGFydE9mKCdkYXknKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmICh0eXBlID09PSAnZGF0ZSB0aW1lJykgewogICAgICAgICAgICAgIHJldHVybiBvYmo7CiAgICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIG51bGw7CiAgfQogIGNsYXNzIFJhbmdlIHsKICAgICAgY29uc3RydWN0b3IocHJvcHMpIHsKICAgICAgICAgIE9iamVjdC5hc3NpZ24odGhpcywgcHJvcHMpOwogICAgICB9CiAgfQogIGZ1bmN0aW9uIGlzTnVtYmVyKG9iaikgewogICAgICByZXR1cm4gdHlwZW9mIG9iaiA9PT0gJ251bWJlcic7CiAgfQogIGZ1bmN0aW9uIGlzU3RyaW5nKG9iaikgewogICAgICByZXR1cm4gdHlwZW9mIG9iaiA9PT0gJ3N0cmluZyc7CiAgfQogIGZ1bmN0aW9uIGVxdWFscyhhLCBiKSB7CiAgICAgIGlmIChhID09PSBudWxsICYmIGIgIT09IG51bGwgfHwKICAgICAgICAgIGEgIT09IG51bGwgJiYgYiA9PT0gbnVsbCkgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIGlmIChpc0FycmF5JDEoYSkgJiYgYS5sZW5ndGggPCAyKSB7CiAgICAgICAgICBhID0gYVswXTsKICAgICAgfQogICAgICBpZiAoaXNBcnJheSQxKGIpICYmIGIubGVuZ3RoIDwgMikgewogICAgICAgICAgYiA9IGJbMF07CiAgICAgIH0KICAgICAgY29uc3QgYVR5cGUgPSBnZXRUeXBlKGEpOwogICAgICBjb25zdCBiVHlwZSA9IGdldFR5cGUoYik7CiAgICAgIGlmIChhVHlwZSAhPT0gYlR5cGUpIHsKICAgICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICAgIGlmIChhVHlwZSA9PT0gJ25pbCcpIHsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICAgIGlmIChhVHlwZSA9PT0gJ2xpc3QnKSB7CiAgICAgICAgICBpZiAoYS5sZW5ndGggIT09IGIubGVuZ3RoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGEuZXZlcnkoKGVsZW1lbnQsIGlkeCkgPT4gZXF1YWxzKGVsZW1lbnQsIGJbaWR4XSkpOwogICAgICB9CiAgICAgIGlmIChhVHlwZSA9PT0gJ2RhdGUgdGltZScgfHwgYVR5cGUgPT09ICd0aW1lJyB8fCBhVHlwZSA9PT0gJ2RhdGUnKSB7CiAgICAgICAgICByZXR1cm4gKGEudG9VVEMoKS52YWx1ZU9mKCkgPT09IGIudG9VVEMoKS52YWx1ZU9mKCkpOwogICAgICB9CiAgICAgIGlmIChhVHlwZSA9PT0gJ2R1cmF0aW9uJykgewogICAgICAgICAgLy8geWVhcnMgYW5kIG1vbnRocyBkdXJhdGlvbiAtPiBtb250aHMKICAgICAgICAgIGlmIChNYXRoLmFicyhhLmFzKCdkYXlzJykpID4gMTgwKSB7CiAgICAgICAgICAgICAgcmV0dXJuIE1hdGgudHJ1bmMoYS5taW51cyhiKS5hcygnbW9udGhzJykpID09PSAwOwogICAgICAgICAgfQogICAgICAgICAgLy8gZGF5cyBhbmQgdGltZSBkdXJhdGlvbiAtPiBzZWNvbmRzCiAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICByZXR1cm4gTWF0aC50cnVuYyhhLm1pbnVzKGIpLmFzKCdzZWNvbmRzJykpID09PSAwOwogICAgICAgICAgfQogICAgICB9CiAgICAgIGlmIChhVHlwZSA9PT0gJ2NvbnRleHQnKSB7CiAgICAgICAgICBjb25zdCBhRW50cmllcyA9IE9iamVjdC5lbnRyaWVzKGEpOwogICAgICAgICAgY29uc3QgYkVudHJpZXMgPSBPYmplY3QuZW50cmllcyhiKTsKICAgICAgICAgIGlmIChhRW50cmllcy5sZW5ndGggIT09IGJFbnRyaWVzLmxlbmd0aCkgewogICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBhRW50cmllcy5ldmVyeSgoW2tleSwgdmFsdWVdKSA9PiBrZXkgaW4gYiAmJiBlcXVhbHModmFsdWUsIGJba2V5XSkpOwogICAgICB9CiAgICAgIGlmIChhVHlwZSA9PT0gJ3JhbmdlJykgewogICAgICAgICAgcmV0dXJuIFsKICAgICAgICAgICAgICBbYS5zdGFydCwgYi5zdGFydF0sCiAgICAgICAgICAgICAgW2EuZW5kLCBiLmVuZF0sCiAgICAgICAgICAgICAgW2FbJ3N0YXJ0IGluY2x1ZGVkJ10sIGJbJ3N0YXJ0IGluY2x1ZGVkJ11dLAogICAgICAgICAgICAgIFthWydlbmQgaW5jbHVkZWQnXSwgYlsnZW5kIGluY2x1ZGVkJ11dCiAgICAgICAgICBdLmV2ZXJ5KChbYSwgYl0pID0+IGEgPT09IGIpOwogICAgICB9CiAgICAgIGlmIChhID09IGIpIHsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICAgIHJldHVybiBhVHlwZSA9PT0gYlR5cGUgPyBmYWxzZSA6IG51bGw7CiAgfQogIGNsYXNzIEZ1bmN0aW9uV3JhcHBlciB7CiAgICAgIGNvbnN0cnVjdG9yKGZuLCBwYXJhbWV0ZXJOYW1lcykgewogICAgICAgICAgdGhpcy5mbiA9IGZuOwogICAgICAgICAgdGhpcy5wYXJhbWV0ZXJOYW1lcyA9IHBhcmFtZXRlck5hbWVzOwogICAgICB9CiAgICAgIGludm9rZShjb250ZXh0T3JBcmdzKSB7CiAgICAgICAgICBsZXQgcGFyYW1zOwogICAgICAgICAgaWYgKGlzQXJyYXkkMShjb250ZXh0T3JBcmdzKSkgewogICAgICAgICAgICAgIHBhcmFtcyA9IGNvbnRleHRPckFyZ3M7CiAgICAgICAgICB9CiAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICBwYXJhbXMgPSB0aGlzLnBhcmFtZXRlck5hbWVzLm1hcChuID0+IGNvbnRleHRPckFyZ3Nbbl0pOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHRoaXMuZm4uY2FsbChudWxsLCAuLi5wYXJhbXMpOwogICAgICB9CiAgfQoKICAvLyAxMC4zLjQgQnVpbHQtaW4gZnVuY3Rpb25zCiAgY29uc3QgYnVpbHRpbnMgPSB7CiAgICAgIC8vIDEwLjMuNC4xIENvbnZlcnNpb24gZnVuY3Rpb25zCiAgICAgICdudW1iZXInOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICB0aHJvdyBub3RJbXBsZW1lbnRlZCgnbnVtYmVyJyk7CiAgICAgIH0sCiAgICAgICdzdHJpbmcnOiBmbihmdW5jdGlvbiAoZnJvbSkgewogICAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggIT09IDEpIHsKICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiB0b1N0cmluZyhmcm9tKTsKICAgICAgfSwgWydhbnknXSksCiAgICAgIC8vIGRhdGUoZnJvbSkgPT4gZGF0ZSBzdHJpbmcKICAgICAgLy8gZGF0ZShmcm9tKSA9PiBkYXRlIGFuZCB0aW1lCiAgICAgIC8vIGRhdGUoeWVhciwgbW9udGgsIGRheSkKICAgICAgJ2RhdGUnOiBmbihmdW5jdGlvbiAoeWVhciwgbW9udGgsIGRheSwgZnJvbSkgewogICAgICAgICAgaWYgKCFmcm9tICYmICFpc051bWJlcih5ZWFyKSkgewogICAgICAgICAgICAgIGZyb20gPSB5ZWFyOwogICAgICAgICAgICAgIHllYXIgPSBudWxsOwogICAgICAgICAgfQogICAgICAgICAgbGV0IGQ7CiAgICAgICAgICBpZiAoaXNTdHJpbmcoZnJvbSkpIHsKICAgICAgICAgICAgICBkID0gZGF0ZShmcm9tKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChpc0RhdGVUaW1lKGZyb20pKSB7CiAgICAgICAgICAgICAgZCA9IGZyb207CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoeWVhcikgewogICAgICAgICAgICAgIGQgPSBkYXRlKCkuc2V0Wm9uZSgndXRjJykuc2V0KHsKICAgICAgICAgICAgICAgICAgeWVhciwKICAgICAgICAgICAgICAgICAgbW9udGgsCiAgICAgICAgICAgICAgICAgIGRheQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGQgJiYgaWZWYWxpZChkLnNldFpvbmUoJ3V0YycpLnN0YXJ0T2YoJ2RheScpKSB8fCBudWxsOwogICAgICB9LCBbJ2FueT8nLCAnbnVtYmVyPycsICdudW1iZXI/JywgJ2FueT8nXSksCiAgICAgIC8vIGRhdGUgYW5kIHRpbWUoZnJvbSkgPT4gZGF0ZSB0aW1lIHN0cmluZwogICAgICAvLyBkYXRlIGFuZCB0aW1lKGRhdGUsIHRpbWUpCiAgICAgICdkYXRlIGFuZCB0aW1lJzogZm4oZnVuY3Rpb24gKGQsIHRpbWUsIGZyb20pIHsKICAgICAgICAgIGxldCBkdDsKICAgICAgICAgIGlmIChpc0RhdGVUaW1lKGQpICYmIGlzRGF0ZVRpbWUodGltZSkpIHsKICAgICAgICAgICAgICBkdCA9IHRpbWUuc2V0KHsKICAgICAgICAgICAgICAgICAgeWVhcjogZC55ZWFyLAogICAgICAgICAgICAgICAgICBtb250aDogZC5tb250aCwKICAgICAgICAgICAgICAgICAgZGF5OiBkLmRheQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGlzU3RyaW5nKGQpKSB7CiAgICAgICAgICAgICAgZnJvbSA9IGQ7CiAgICAgICAgICAgICAgZCA9IG51bGw7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoaXNTdHJpbmcoZnJvbSkpIHsKICAgICAgICAgICAgICBkdCA9IGRhdGUoZnJvbSk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gZHQgJiYgaWZWYWxpZChkdCkgfHwgbnVsbDsKICAgICAgfSwgWydhbnk/JywgJ3RpbWU/JywgJ3N0cmluZz8nXSwgWydkYXRlJywgJ3RpbWUnLCAnZnJvbSddKSwKICAgICAgLy8gdGltZShmcm9tKSA9PiB0aW1lIHN0cmluZwogICAgICAvLyB0aW1lKGZyb20pID0+IHRpbWUsIGRhdGUgYW5kIHRpbWUKICAgICAgLy8gdGltZShob3VyLCBtaW51dGUsIHNlY29uZCwgb2Zmc2V0PykgPT4gLi4uCiAgICAgICd0aW1lJzogZm4oZnVuY3Rpb24gKGhvdXIsIG1pbnV0ZSwgc2Vjb25kLCBvZmZzZXQsIGZyb20pIHsKICAgICAgICAgIGxldCB0OwogICAgICAgICAgaWYgKG9mZnNldCkgewogICAgICAgICAgICAgIHRocm93IG5vdEltcGxlbWVudGVkKCd0aW1lKC4uLiwgb2Zmc2V0KScpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGlzU3RyaW5nKGhvdXIpIHx8IGlzRGF0ZVRpbWUoaG91cikpIHsKICAgICAgICAgICAgICBmcm9tID0gaG91cjsKICAgICAgICAgICAgICBob3VyID0gbnVsbDsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChpc1N0cmluZyhmcm9tKSkgewogICAgICAgICAgICAgIHQgPSBkYXRlKG51bGwsIGZyb20pOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGlzRGF0ZVRpbWUoZnJvbSkpIHsKICAgICAgICAgICAgICB0ID0gZnJvbS5zZXQoewogICAgICAgICAgICAgICAgICB5ZWFyOiAxOTAwLAogICAgICAgICAgICAgICAgICBtb250aDogMSwKICAgICAgICAgICAgICAgICAgZGF5OiAxCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoaXNOdW1iZXIoaG91cikpIHsKICAgICAgICAgICAgICAvLyBUT0RPOiBzdXBwb3J0IG9mZnNldCA9IGRheXMgYW5kIHRpbWUgZHVyYXRpb24KICAgICAgICAgICAgICB0ID0gZGF0ZSgpLnNldCh7CiAgICAgICAgICAgICAgICAgIGhvdXIsCiAgICAgICAgICAgICAgICAgIG1pbnV0ZSwKICAgICAgICAgICAgICAgICAgc2Vjb25kCiAgICAgICAgICAgICAgfSkuc2V0KHsKICAgICAgICAgICAgICAgICAgeWVhcjogMTkwMCwKICAgICAgICAgICAgICAgICAgbW9udGg6IDEsCiAgICAgICAgICAgICAgICAgIGRheTogMSwKICAgICAgICAgICAgICAgICAgbWlsbGlzZWNvbmQ6IDAKICAgICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiB0ICYmIGlmVmFsaWQodCkgfHwgbnVsbDsKICAgICAgfSwgWydhbnk/JywgJ251bWJlcj8nLCAnbnVtYmVyPycsICdhbnk/JywgJ2FueT8nXSksCiAgICAgICdkdXJhdGlvbic6IGZuKGZ1bmN0aW9uIChmcm9tKSB7CiAgICAgICAgICByZXR1cm4gaWZWYWxpZChkdXJhdGlvbiQxKGZyb20pKTsKICAgICAgfSwgWydzdHJpbmcnXSksCiAgICAgICd5ZWFycyBhbmQgbW9udGhzIGR1cmF0aW9uJzogZm4oZnVuY3Rpb24gKGZyb20sIHRvKSB7CiAgICAgICAgICByZXR1cm4gaWZWYWxpZCh0by5kaWZmKGZyb20sIFsneWVhcnMnLCAnbW9udGhzJ10pKTsKICAgICAgfSwgWydkYXRlJywgJ2RhdGUnXSksCiAgICAgICdAJzogZm4oZnVuY3Rpb24gKHN0cmluZykgewogICAgICAgICAgbGV0IHQ7CiAgICAgICAgICBpZiAoL14tP1AvLnRlc3Qoc3RyaW5nKSkgewogICAgICAgICAgICAgIHQgPSBkdXJhdGlvbiQxKHN0cmluZyk7CiAgICAgICAgICB9CiAgICAgICAgICBlbHNlIGlmICgvXltcZF17MSwyfTpbXGRdezEsMn06W1xkXXsxLDJ9Ly50ZXN0KHN0cmluZykpIHsKICAgICAgICAgICAgICB0ID0gZGF0ZShudWxsLCBzdHJpbmcpOwogICAgICAgICAgfQogICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgdCA9IGRhdGUoc3RyaW5nKTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiB0ICYmIGlmVmFsaWQodCkgfHwgbnVsbDsKICAgICAgfSwgWydzdHJpbmcnXSksCiAgICAgICdub3cnOiBmbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gZGF0ZSgpOwogICAgICB9LCBbXSksCiAgICAgICd0b2RheSc6IGZuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBkYXRlKCkuc3RhcnRPZignZGF5Jyk7CiAgICAgIH0sIFtdKSwKICAgICAgLy8gMTAuMy40LjIgQm9vbGVhbiBmdW5jdGlvbgogICAgICAnbm90JzogZm4oZnVuY3Rpb24gKGJvb2wpIHsKICAgICAgICAgIHJldHVybiBpc1R5cGUoYm9vbCwgJ2Jvb2xlYW4nKSA/ICFib29sIDogbnVsbDsKICAgICAgfSwgWydhbnknXSksCiAgICAgIC8vIDEwLjMuNC4zIFN0cmluZyBmdW5jdGlvbnMKICAgICAgJ3N1YnN0cmluZyc6IGZuKGZ1bmN0aW9uIChzdHJpbmcsIHN0YXJ0LCBsZW5ndGgpIHsKICAgICAgICAgIGNvbnN0IF9zdGFydCA9IChzdGFydCA8IDAgPyBzdHJpbmcubGVuZ3RoICsgc3RhcnQgOiBzdGFydCAtIDEpOwogICAgICAgICAgY29uc3QgYXJyID0gQXJyYXkuZnJvbShzdHJpbmcpOwogICAgICAgICAgcmV0dXJuICh0eXBlb2YgbGVuZ3RoICE9PSAndW5kZWZpbmVkJwogICAgICAgICAgICAgID8gYXJyLnNsaWNlKF9zdGFydCwgX3N0YXJ0ICsgbGVuZ3RoKQogICAgICAgICAgICAgIDogYXJyLnNsaWNlKF9zdGFydCkpLmpvaW4oJycpOwogICAgICB9LCBbJ3N0cmluZycsICdudW1iZXInLCAnbnVtYmVyPyddLCBbJ3N0cmluZycsICdzdGFydCBwb3NpdGlvbicsICdsZW5ndGgnXSksCiAgICAgICdzdHJpbmcgbGVuZ3RoJzogZm4oZnVuY3Rpb24gKHN0cmluZykgewogICAgICAgICAgcmV0dXJuIGNvdW50U3ltYm9scyhzdHJpbmcpOwogICAgICB9LCBbJ3N0cmluZyddKSwKICAgICAgJ3VwcGVyIGNhc2UnOiBmbihmdW5jdGlvbiAoc3RyaW5nKSB7CiAgICAgICAgICByZXR1cm4gc3RyaW5nLnRvVXBwZXJDYXNlKCk7CiAgICAgIH0sIFsnc3RyaW5nJ10pLAogICAgICAnbG93ZXIgY2FzZSc6IGZuKGZ1bmN0aW9uIChzdHJpbmcpIHsKICAgICAgICAgIHJldHVybiBzdHJpbmcudG9Mb3dlckNhc2UoKTsKICAgICAgfSwgWydzdHJpbmcnXSksCiAgICAgICdzdWJzdHJpbmcgYmVmb3JlJzogZm4oZnVuY3Rpb24gKHN0cmluZywgbWF0Y2gpIHsKICAgICAgICAgIGNvbnN0IGluZGV4ID0gc3RyaW5nLmluZGV4T2YobWF0Y2gpOwogICAgICAgICAgaWYgKGluZGV4ID09PSAtMSkgewogICAgICAgICAgICAgIHJldHVybiAnJzsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBzdHJpbmcuc3Vic3RyaW5nKDAsIGluZGV4KTsKICAgICAgfSwgWydzdHJpbmcnLCAnc3RyaW5nJ10pLAogICAgICAnc3Vic3RyaW5nIGFmdGVyJzogZm4oZnVuY3Rpb24gKHN0cmluZywgbWF0Y2gpIHsKICAgICAgICAgIGNvbnN0IGluZGV4ID0gc3RyaW5nLmluZGV4T2YobWF0Y2gpOwogICAgICAgICAgaWYgKGluZGV4ID09PSAtMSkgewogICAgICAgICAgICAgIHJldHVybiAnJzsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBzdHJpbmcuc3Vic3RyaW5nKGluZGV4ICsgbWF0Y2gubGVuZ3RoKTsKICAgICAgfSwgWydzdHJpbmcnLCAnc3RyaW5nJ10pLAogICAgICAncmVwbGFjZSc6IGZuKGZ1bmN0aW9uIChpbnB1dCwgcGF0dGVybiwgcmVwbGFjZW1lbnQsIGZsYWdzKSB7CiAgICAgICAgICByZXR1cm4gaW5wdXQucmVwbGFjZShuZXcgUmVnRXhwKHBhdHRlcm4sICd1ZycgKyAoZmxhZ3MgfHwgJycpLnJlcGxhY2UoL1t4XS9nLCAnJykpLCByZXBsYWNlbWVudC5yZXBsYWNlKC9cJDAvZywgJyQkJicpKTsKICAgICAgfSwgWydzdHJpbmcnLCAnc3RyaW5nJywgJ3N0cmluZycsICdzdHJpbmc/J10pLAogICAgICAnY29udGFpbnMnOiBmbihmdW5jdGlvbiAoc3RyaW5nLCBtYXRjaCkgewogICAgICAgICAgcmV0dXJuIHN0cmluZy5pbmNsdWRlcyhtYXRjaCk7CiAgICAgIH0sIFsnc3RyaW5nJywgJ3N0cmluZyddKSwKICAgICAgJ3N0YXJ0cyB3aXRoJzogZm4oZnVuY3Rpb24gKHN0cmluZywgbWF0Y2gpIHsKICAgICAgICAgIHJldHVybiBzdHJpbmcuc3RhcnRzV2l0aChtYXRjaCk7CiAgICAgIH0sIFsnc3RyaW5nJywgJ3N0cmluZyddKSwKICAgICAgJ2VuZHMgd2l0aCc6IGZuKGZ1bmN0aW9uIChzdHJpbmcsIG1hdGNoKSB7CiAgICAgICAgICByZXR1cm4gc3RyaW5nLmVuZHNXaXRoKG1hdGNoKTsKICAgICAgfSwgWydzdHJpbmcnLCAnc3RyaW5nJ10pLAogICAgICAnc3BsaXQnOiBmbihmdW5jdGlvbiAoc3RyaW5nLCBkZWxpbWl0ZXIpIHsKICAgICAgICAgIHJldHVybiBzdHJpbmcuc3BsaXQobmV3IFJlZ0V4cChkZWxpbWl0ZXIsICd1JykpOwogICAgICB9LCBbJ3N0cmluZycsICdzdHJpbmcnXSksCiAgICAgIC8vIDEwLjMuNC40IExpc3QgZnVuY3Rpb25zCiAgICAgICdsaXN0IGNvbnRhaW5zJzogZm4oZnVuY3Rpb24gKGxpc3QsIGVsZW1lbnQpIHsKICAgICAgICAgIHJldHVybiBsaXN0LnNvbWUoZWwgPT4gbWF0Y2hlcyhlbCwgZWxlbWVudCkpOwogICAgICB9LCBbJ2xpc3QnLCAnYW55PyddKSwKICAgICAgJ2NvdW50JzogZm4oZnVuY3Rpb24gKGxpc3QpIHsKICAgICAgICAgIHJldHVybiBsaXN0Lmxlbmd0aDsKICAgICAgfSwgWydsaXN0J10pLAogICAgICAnbWluJzogbGlzdEZuKGZ1bmN0aW9uIChsaXN0KSB7CiAgICAgICAgICByZXR1cm4gbGlzdC5yZWR1Y2UoKG1pbiwgZWwpID0+IG1pbiA9PT0gbnVsbCA/IGVsIDogTWF0aC5taW4obWluLCBlbCksIG51bGwpOwogICAgICB9LCAnbnVtYmVyJyksCiAgICAgICdtYXgnOiBsaXN0Rm4oZnVuY3Rpb24gKGxpc3QpIHsKICAgICAgICAgIHJldHVybiBsaXN0LnJlZHVjZSgobWF4LCBlbCkgPT4gbWF4ID09PSBudWxsID8gZWwgOiBNYXRoLm1heChtYXgsIGVsKSwgbnVsbCk7CiAgICAgIH0sICdudW1iZXInKSwKICAgICAgJ3N1bSc6IGxpc3RGbihmdW5jdGlvbiAobGlzdCkgewogICAgICAgICAgcmV0dXJuIHN1bShsaXN0KTsKICAgICAgfSwgJ251bWJlcicpLAogICAgICAnbWVhbic6IGxpc3RGbihmdW5jdGlvbiAobGlzdCkgewogICAgICAgICAgY29uc3QgcyA9IHN1bShsaXN0KTsKICAgICAgICAgIHJldHVybiBzID09PSBudWxsID8gcyA6IHMgLyBsaXN0Lmxlbmd0aDsKICAgICAgfSwgJ251bWJlcicpLAogICAgICAnYWxsJzogbGlzdEZuKGZ1bmN0aW9uIChsaXN0KSB7CiAgICAgICAgICBsZXQgbm9uQm9vbCA9IGZhbHNlOwogICAgICAgICAgZm9yIChjb25zdCBvIG9mIGxpc3QpIHsKICAgICAgICAgICAgICBpZiAobyA9PT0gZmFsc2UpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAodHlwZW9mIG8gIT09ICdib29sZWFuJykgewogICAgICAgICAgICAgICAgICBub25Cb29sID0gdHJ1ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gbm9uQm9vbCA/IG51bGwgOiB0cnVlOwogICAgICB9LCAnYW55PycpLAogICAgICAnYW55JzogbGlzdEZuKGZ1bmN0aW9uIChsaXN0KSB7CiAgICAgICAgICBsZXQgbm9uQm9vbCA9IGZhbHNlOwogICAgICAgICAgZm9yIChjb25zdCBvIG9mIGxpc3QpIHsKICAgICAgICAgICAgICBpZiAobyA9PT0gdHJ1ZSkgewogICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvICE9PSAnYm9vbGVhbicpIHsKICAgICAgICAgICAgICAgICAgbm9uQm9vbCA9IHRydWU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIG5vbkJvb2wgPyBudWxsIDogZmFsc2U7CiAgICAgIH0sICdhbnk/JyksCiAgICAgICdzdWJsaXN0JzogZm4oZnVuY3Rpb24gKGxpc3QsIHN0YXJ0LCBsZW5ndGgpIHsKICAgICAgICAgIGNvbnN0IF9zdGFydCA9IChzdGFydCA8IDAgPyBsaXN0Lmxlbmd0aCArIHN0YXJ0IDogc3RhcnQgLSAxKTsKICAgICAgICAgIHJldHVybiAodHlwZW9mIGxlbmd0aCAhPT0gJ3VuZGVmaW5lZCcKICAgICAgICAgICAgICA/IGxpc3Quc2xpY2UoX3N0YXJ0LCBfc3RhcnQgKyBsZW5ndGgpCiAgICAgICAgICAgICAgOiBsaXN0LnNsaWNlKF9zdGFydCkpOwogICAgICB9LCBbJ2xpc3QnLCAnbnVtYmVyJywgJ251bWJlcj8nXSksCiAgICAgICdhcHBlbmQnOiBmbihmdW5jdGlvbiAobGlzdCwgLi4uaXRlbXMpIHsKICAgICAgICAgIHJldHVybiBsaXN0LmNvbmNhdChpdGVtcyk7CiAgICAgIH0sIFsnbGlzdCcsICdhbnk/J10pLAogICAgICAnY29uY2F0ZW5hdGUnOiBmbihmdW5jdGlvbiAoLi4uYXJncykgewogICAgICAgICAgcmV0dXJuIGFyZ3MucmVkdWNlKChyZXN1bHQsIGFyZykgPT4gewogICAgICAgICAgICAgIHJldHVybiByZXN1bHQuY29uY2F0KGFyZyk7CiAgICAgICAgICB9LCBbXSk7CiAgICAgIH0sIFsnYW55J10pLAogICAgICAnaW5zZXJ0IGJlZm9yZSc6IGZuKGZ1bmN0aW9uIChsaXN0LCBwb3NpdGlvbiwgbmV3SXRlbSkgewogICAgICAgICAgcmV0dXJuIGxpc3Quc2xpY2UoMCwgcG9zaXRpb24gLSAxKS5jb25jYXQoW25ld0l0ZW1dLCBsaXN0LnNsaWNlKHBvc2l0aW9uIC0gMSkpOwogICAgICB9LCBbJ2xpc3QnLCAnbnVtYmVyJywgJ2FueT8nXSksCiAgICAgICdyZW1vdmUnOiBmbihmdW5jdGlvbiAobGlzdCwgcG9zaXRpb24pIHsKICAgICAgICAgIHJldHVybiBsaXN0LnNsaWNlKDAsIHBvc2l0aW9uIC0gMSkuY29uY2F0KGxpc3Quc2xpY2UocG9zaXRpb24pKTsKICAgICAgfSwgWydsaXN0JywgJ251bWJlciddKSwKICAgICAgJ3JldmVyc2UnOiBmbihmdW5jdGlvbiAobGlzdCkgewogICAgICAgICAgcmV0dXJuIGxpc3Quc2xpY2UoKS5yZXZlcnNlKCk7CiAgICAgIH0sIFsnbGlzdCddKSwKICAgICAgJ2luZGV4IG9mJzogZm4oZnVuY3Rpb24gKGxpc3QsIG1hdGNoKSB7CiAgICAgICAgICByZXR1cm4gbGlzdC5yZWR1Y2UoZnVuY3Rpb24gKHJlc3VsdCwgZWxlbWVudCwgaW5kZXgpIHsKICAgICAgICAgICAgICBpZiAobWF0Y2hlcyhlbGVtZW50LCBtYXRjaCkpIHsKICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goaW5kZXggKyAxKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgICAgIH0sIFtdKTsKICAgICAgfSwgWydsaXN0JywgJ2FueSddKSwKICAgICAgJ3VuaW9uJzogZm4oZnVuY3Rpb24gKC4uLl9saXN0cykgewogICAgICAgICAgdGhyb3cgbm90SW1wbGVtZW50ZWQoJ3VuaW9uJyk7CiAgICAgIH0sIFsnbGlzdCddKSwKICAgICAgJ2Rpc3RpbmN0IHZhbHVlcyc6IGZuKGZ1bmN0aW9uIChfbGlzdCkgewogICAgICAgICAgdGhyb3cgbm90SW1wbGVtZW50ZWQoJ2Rpc3RpbmN0IHZhbHVlcycpOwogICAgICB9LCBbJ2xpc3QnXSksCiAgICAgICdmbGF0dGVuJzogZm4oZnVuY3Rpb24gKGxpc3QpIHsKICAgICAgICAgIHJldHVybiBmbGF0dGVuKGxpc3QpOwogICAgICB9LCBbJ2xpc3QnXSksCiAgICAgICdwcm9kdWN0JzogbGlzdEZuKGZ1bmN0aW9uIChsaXN0KSB7CiAgICAgICAgICBpZiAobGlzdC5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBsaXN0LnJlZHVjZSgocmVzdWx0LCBuKSA9PiB7CiAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdCAqIG47CiAgICAgICAgICB9LCAxKTsKICAgICAgfSwgJ251bWJlcicpLAogICAgICAnbWVkaWFuJzogbGlzdEZuKGZ1bmN0aW9uIChsaXN0KSB7CiAgICAgICAgICBpZiAobGlzdC5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBtZWRpYW4obGlzdCk7CiAgICAgIH0sICdudW1iZXInKSwKICAgICAgJ3N0ZGRldic6IGxpc3RGbihmdW5jdGlvbiAobGlzdCkgewogICAgICAgICAgaWYgKGxpc3QubGVuZ3RoIDwgMikgewogICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHN0ZGRldihsaXN0KTsKICAgICAgfSwgJ251bWJlcicpLAogICAgICAnbW9kZSc6IGxpc3RGbihmdW5jdGlvbiAobGlzdCkgewogICAgICAgICAgcmV0dXJuIG1vZGUobGlzdCk7CiAgICAgIH0sICdudW1iZXInKSwKICAgICAgLy8gMTAuMy40LjUgTnVtZXJpYyBmdW5jdGlvbnMKICAgICAgJ2RlY2ltYWwnOiBmbihmdW5jdGlvbiAobiwgc2NhbGUpIHsKICAgICAgICAgIGlmICghc2NhbGUpIHsKICAgICAgICAgICAgICByZXR1cm4gcm91bmQkMShuKTsKICAgICAgICAgIH0KICAgICAgICAgIGNvbnN0IG9mZnNldCA9IE1hdGgucG93KDEwLCBzY2FsZSk7CiAgICAgICAgICByZXR1cm4gcm91bmQkMShuICogb2Zmc2V0KSAvIChvZmZzZXQpOwogICAgICB9LCBbJ251bWJlcicsICdudW1iZXInXSksCiAgICAgICdmbG9vcic6IGZuKGZ1bmN0aW9uIChuKSB7CiAgICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihuKTsKICAgICAgfSwgWydudW1iZXInXSksCiAgICAgICdjZWlsaW5nJzogZm4oZnVuY3Rpb24gKG4pIHsKICAgICAgICAgIHJldHVybiBNYXRoLmNlaWwobikgKyAwOwogICAgICB9LCBbJ251bWJlciddKSwKICAgICAgJ2Ficyc6IGZuKGZ1bmN0aW9uIChuKSB7CiAgICAgICAgICBpZiAodHlwZW9mIG4gIT09ICdudW1iZXInKSB7CiAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gTWF0aC5hYnMobik7CiAgICAgIH0sIFsnbnVtYmVyJ10pLAogICAgICAnbW9kdWxvJzogZm4oZnVuY3Rpb24gKGRpdmlkZW5kLCBkaXZpc29yKSB7CiAgICAgICAgICBpZiAoIWRpdmlzb3IpIHsKICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgIH0KICAgICAgICAgIGNvbnN0IGFkanVzdCA9IDEwMDAwMDAwMDA7CiAgICAgICAgICAvLyBjZi4gaHR0cHM6Ly9kdXN0aW5wZmlzdGVyLmdpdGh1Yi5pby8yMDE3LzA5LzAyL2pzLXdoYXRzLXdyb25nLXdpdGgtbW9kdWxvLwogICAgICAgICAgLy8KICAgICAgICAgIC8vIG5lZWQgdG8gcm91bmQgaGVyZSBhcyB1c2luZyB0aGlzIGN1c3RvbSBtb2R1bG8KICAgICAgICAgIC8vIHZhcmlhbnQgaXMgcHJvbmUgdG8gcm91bmRpbmcgZXJyb3JzCiAgICAgICAgICByZXR1cm4gTWF0aC5yb3VuZCgoZGl2aWRlbmQgJSBkaXZpc29yICsgZGl2aXNvcikgJSBkaXZpc29yICogYWRqdXN0KSAvIGFkanVzdDsKICAgICAgfSwgWydudW1iZXInLCAnbnVtYmVyJ10pLAogICAgICAnc3FydCc6IGZuKGZ1bmN0aW9uIChudW1iZXIpIHsKICAgICAgICAgIGlmIChudW1iZXIgPCAwKSB7CiAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KG51bWJlcik7CiAgICAgIH0sIFsnbnVtYmVyJ10pLAogICAgICAnbG9nJzogZm4oZnVuY3Rpb24gKG51bWJlcikgewogICAgICAgICAgaWYgKG51bWJlciA8PSAwKSB7CiAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gTWF0aC5sb2cobnVtYmVyKTsKICAgICAgfSwgWydudW1iZXInXSksCiAgICAgICdleHAnOiBmbihmdW5jdGlvbiAobnVtYmVyKSB7CiAgICAgICAgICByZXR1cm4gTWF0aC5leHAobnVtYmVyKTsKICAgICAgfSwgWydudW1iZXInXSksCiAgICAgICdvZGQnOiBmbihmdW5jdGlvbiAobnVtYmVyKSB7CiAgICAgICAgICByZXR1cm4gTWF0aC5hYnMobnVtYmVyKSAlIDIgPT09IDE7CiAgICAgIH0sIFsnbnVtYmVyJ10pLAogICAgICAnZXZlbic6IGZuKGZ1bmN0aW9uIChudW1iZXIpIHsKICAgICAgICAgIHJldHVybiBNYXRoLmFicyhudW1iZXIpICUgMiA9PT0gMDsKICAgICAgfSwgWydudW1iZXInXSksCiAgICAgIC8vIDEwLjMuNC42IERhdGUgYW5kIHRpbWUgZnVuY3Rpb25zCiAgICAgICdpcyc6IGZuKGZ1bmN0aW9uICh2YWx1ZTEsIHZhbHVlMikgewogICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZTEgPT09ICd1bmRlZmluZWQnIHx8IHR5cGVvZiB2YWx1ZTIgPT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGVxdWFscyh2YWx1ZTEsIHZhbHVlMik7CiAgICAgIH0sIFsnYW55PycsICdhbnk/J10pLAogICAgICAvLyAxMC4zLjQuNyBSYW5nZSBGdW5jdGlvbnMKICAgICAgJ2JlZm9yZSc6IGZuKGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgICByZXR1cm4gYmVmb3JlKGEsIGIpOwogICAgICB9LCBbJ2FueScsICdhbnknXSksCiAgICAgICdhZnRlcic6IGZuKGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgICByZXR1cm4gYmVmb3JlKGIsIGEpOwogICAgICB9LCBbJ2FueScsICdhbnknXSksCiAgICAgICdtZWV0cyc6IGZuKGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgICByZXR1cm4gbWVldHMoYSwgYik7CiAgICAgIH0sIFsncmFuZ2UnLCAncmFuZ2UnXSksCiAgICAgICdtZXQgYnknOiBmbihmdW5jdGlvbiAoYSwgYikgewogICAgICAgICAgcmV0dXJuIG1lZXRzKGIsIGEpOwogICAgICB9LCBbJ3JhbmdlJywgJ3JhbmdlJ10pLAogICAgICAnb3ZlcmxhcHMnOiBmbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICB0aHJvdyBub3RJbXBsZW1lbnRlZCgnb3ZlcmxhcHMnKTsKICAgICAgfSwgWydhbnk/J10pLAogICAgICAnb3ZlcmxhcHMgYmVmb3JlJzogZm4oZnVuY3Rpb24gKCkgewogICAgICAgICAgdGhyb3cgbm90SW1wbGVtZW50ZWQoJ292ZXJsYXBzIGJlZm9yZScpOwogICAgICB9LCBbJ2FueT8nXSksCiAgICAgICdvdmVybGFwcyBhZnRlcic6IGZuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHRocm93IG5vdEltcGxlbWVudGVkKCdvdmVybGFwcyBhZnRlcicpOwogICAgICB9LCBbJ2FueT8nXSksCiAgICAgICdmaW5pc2hlcyc6IGZuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHRocm93IG5vdEltcGxlbWVudGVkKCdmaW5pc2hlcycpOwogICAgICB9LCBbJ2FueT8nXSksCiAgICAgICdmaW5pc2hlZCBieSc6IGZuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHRocm93IG5vdEltcGxlbWVudGVkKCdmaW5pc2hlZCBieScpOwogICAgICB9LCBbJ2FueT8nXSksCiAgICAgICdpbmNsdWRlcyc6IGZuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHRocm93IG5vdEltcGxlbWVudGVkKCdpbmNsdWRlcycpOwogICAgICB9LCBbJ2FueT8nXSksCiAgICAgICdkdXJpbmcnOiBmbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICB0aHJvdyBub3RJbXBsZW1lbnRlZCgnZHVyaW5nJyk7CiAgICAgIH0sIFsnYW55PyddKSwKICAgICAgJ3N0YXJ0cyc6IGZuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHRocm93IG5vdEltcGxlbWVudGVkKCdzdGFydHMnKTsKICAgICAgfSwgWydhbnk/J10pLAogICAgICAnc3RhcnRlZCBieSc6IGZuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHRocm93IG5vdEltcGxlbWVudGVkKCdzdGFydGVkIGJ5Jyk7CiAgICAgIH0sIFsnYW55PyddKSwKICAgICAgJ2NvaW5jaWRlcyc6IGZuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHRocm93IG5vdEltcGxlbWVudGVkKCdjb2luY2lkZXMnKTsKICAgICAgfSwgWydhbnk/J10pLAogICAgICAvLyAxMC4zLjQuOCBUZW1wb3JhbCBidWlsdC1pbiBmdW5jdGlvbnMKICAgICAgJ2RheSBvZiB5ZWFyJzogZm4oZnVuY3Rpb24gKCkgewogICAgICAgICAgdGhyb3cgbm90SW1wbGVtZW50ZWQoJ2RheSBvZiB5ZWFyJyk7CiAgICAgIH0sIFsnYW55PyddKSwKICAgICAgJ2RheSBvZiB3ZWVrJzogZm4oZnVuY3Rpb24gKCkgewogICAgICAgICAgdGhyb3cgbm90SW1wbGVtZW50ZWQoJ2RheSBvZiB3ZWVrJyk7CiAgICAgIH0sIFsnYW55PyddKSwKICAgICAgJ21vbnRoIG9mIHllYXInOiBmbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICB0aHJvdyBub3RJbXBsZW1lbnRlZCgnbW9udGggb2YgeWVhcicpOwogICAgICB9LCBbJ2FueT8nXSksCiAgICAgICd3ZWVrIG9mIHllYXInOiBmbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICB0aHJvdyBub3RJbXBsZW1lbnRlZCgnd2VlayBvZiB5ZWFyJyk7CiAgICAgIH0sIFsnYW55PyddKSwKICAgICAgLy8gMTAuMy40LjkgU29ydAogICAgICAnc29ydCc6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHRocm93IG5vdEltcGxlbWVudGVkKCdzb3J0Jyk7CiAgICAgIH0sCiAgICAgIC8vIDEwLjMuNC4xMCBDb250ZXh0IGZ1bmN0aW9uCiAgICAgICdnZXQgdmFsdWUnOiBmbihmdW5jdGlvbiAobSwga2V5KSB7CiAgICAgICAgICByZXR1cm4gZ2V0RnJvbUNvbnRleHQoa2V5LCBtKTsKICAgICAgfSwgWydjb250ZXh0JywgJ3N0cmluZyddKSwKICAgICAgJ2dldCBlbnRyaWVzJzogZm4oZnVuY3Rpb24gKG0pIHsKICAgICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoICE9PSAxKSB7CiAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShtKSkgewogICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKG0pLm1hcCgoW2tleSwgdmFsdWVdKSA9PiAoeyBrZXksIHZhbHVlIH0pKTsKICAgICAgfSwgWydjb250ZXh0J10pLAogICAgICAnY29udGV4dCc6IGxpc3RGbihmdW5jdGlvbiAoX2NvbnRleHRzKSB7CiAgICAgICAgICB0aHJvdyBub3RJbXBsZW1lbnRlZCgnY29udGV4dCcpOwogICAgICB9LCAnY29udGV4dCcpLAogICAgICAnY29udGV4dCBtZXJnZSc6IGxpc3RGbihmdW5jdGlvbiAoX2NvbnRleHRzKSB7CiAgICAgICAgICB0aHJvdyBub3RJbXBsZW1lbnRlZCgnY29udGV4dCBtZXJnZScpOwogICAgICB9LCAnY29udGV4dCcpLAogICAgICAnY29udGV4dCBwdXQnOiBmbihmdW5jdGlvbiAoX2NvbnRleHQsIF9rZXlzLCBfdmFsdWUpIHsKICAgICAgICAgIHRocm93IG5vdEltcGxlbWVudGVkKCdjb250ZXh0IHB1dCcpOwogICAgICB9LCBbJ2NvbnRleHQnLCAnbGlzdCcsICdhbnknXSkKICB9OwogIGZ1bmN0aW9uIG1hdGNoZXMoYSwgYikgewogICAgICByZXR1cm4gYSA9PT0gYjsKICB9CiAgY29uc3QgRkFMU0UgPSB7fTsKICBmdW5jdGlvbiBjcmVhdGVBcmdUZXN0ZXIoYXJnKSB7CiAgICAgIGNvbnN0IG9wdGlvbmFsID0gYXJnLmVuZHNXaXRoKCc/Jyk7CiAgICAgIGNvbnN0IHR5cGUgPSBvcHRpb25hbCA/IGFyZy5zdWJzdHJpbmcoMCwgYXJnLmxlbmd0aCAtIDEpIDogYXJnOwogICAgICByZXR1cm4gZnVuY3Rpb24gKG9iaikgewogICAgICAgICAgY29uc3QgYXJyID0gQXJyYXkuaXNBcnJheShvYmopOwogICAgICAgICAgaWYgKHR5cGUgPT09ICdsaXN0JykgewogICAgICAgICAgICAgIGlmIChhcnIgfHwgb3B0aW9uYWwgJiYgdHlwZW9mIG9iaiA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIG9iajsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgIC8vIGltcGxpY2l0IGNvbnZlcnNpb24gb2JqID0+IFsgb2JqIF0KICAgICAgICAgICAgICAgICAgcmV0dXJuIFtvYmpdOwogICAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGlmICh0eXBlICE9PSAnYW55JyAmJiBhcnIgJiYgb2JqLmxlbmd0aCA9PT0gMSkgewogICAgICAgICAgICAgIC8vIGltcGxpY2l0IGNvbnZlcnNpb24gWyBvYmogXSA9PiBvYmoKICAgICAgICAgICAgICBvYmogPSBvYmpbMF07CiAgICAgICAgICB9CiAgICAgICAgICBpZiAodHlwZSA9PT0gJ3JhbmdlJykgewogICAgICAgICAgICAgIHJldHVybiBvYmogaW5zdGFuY2VvZiBSYW5nZSA/IG9iaiA6IEZBTFNFOwogICAgICAgICAgfQogICAgICAgICAgY29uc3Qgb2JqVHlwZSA9IGdldFR5cGUob2JqKTsKICAgICAgICAgIGlmIChvYmpUeXBlID09PSAnbmlsJykgewogICAgICAgICAgICAgIHJldHVybiAob3B0aW9uYWwgPyBvYmogOiBGQUxTRSk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAodHlwZSA9PT0gJ2FueScgfHwgdHlwZSA9PT0gb2JqVHlwZSkgewogICAgICAgICAgICAgIHJldHVybiBvYmo7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gdHlwZUNhc3Qob2JqLCB0eXBlKSB8fCBGQUxTRTsKICAgICAgfTsKICB9CiAgZnVuY3Rpb24gY3JlYXRlQXJnc1ZhbGlkYXRvcihhcmdEZWZpbml0aW9ucykgewogICAgICBjb25zdCB0ZXN0cyA9IGFyZ0RlZmluaXRpb25zLm1hcChjcmVhdGVBcmdUZXN0ZXIpOwogICAgICByZXR1cm4gZnVuY3Rpb24gKGFyZ3MpIHsKICAgICAgICAgIHdoaWxlIChhcmdzLmxlbmd0aCA8IGFyZ0RlZmluaXRpb25zLmxlbmd0aCkgewogICAgICAgICAgICAgIGFyZ3MucHVzaCh1bmRlZmluZWQpOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGFyZ3MucmVkdWNlKChyZXN1bHQsIGFyZywgaW5kZXgpID0+IHsKICAgICAgICAgICAgICBpZiAocmVzdWx0ID09PSBmYWxzZSkgewogICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBjb25zdCB0ZXN0ID0gdGVzdHNbaW5kZXhdOwogICAgICAgICAgICAgIGNvbnN0IGNvbnZlcnNpb24gPSB0ZXN0ID8gdGVzdChhcmcpIDogYXJnOwogICAgICAgICAgICAgIGlmIChjb252ZXJzaW9uID09PSBGQUxTRSkgewogICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGNvbnZlcnNpb24pOwogICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgICB9LCBbXSk7CiAgICAgIH07CiAgfQogIC8qKgogICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuRGVmaW5pdGlvbgogICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlCiAgICogQHBhcmFtIHtzdHJpbmdbXX0gW3BhcmFtZXRlck5hbWVzXQogICAqCiAgICogQHJldHVybiB7RnVuY3Rpb259CiAgICovCiAgZnVuY3Rpb24gbGlzdEZuKGZuRGVmaW5pdGlvbiwgdHlwZSwgcGFyYW1ldGVyTmFtZXMgPSBudWxsKSB7CiAgICAgIGNvbnN0IHRlc3RlciA9IGNyZWF0ZUFyZ1Rlc3Rlcih0eXBlKTsKICAgICAgY29uc3Qgd3JhcHBlZEZuID0gZnVuY3Rpb24gKC4uLmFyZ3MpIHsKICAgICAgICAgIGlmIChhcmdzLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgfQogICAgICAgICAgLy8gdW53cmFwIGZpcnN0IGFyZwogICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXJnc1swXSkgJiYgYXJncy5sZW5ndGggPT09IDEpIHsKICAgICAgICAgICAgICBhcmdzID0gYXJnc1swXTsKICAgICAgICAgIH0KICAgICAgICAgIGlmICghYXJncy5ldmVyeShhcmcgPT4gdGVzdGVyKGFyZykgIT09IEZBTFNFKSkgewogICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGZuRGVmaW5pdGlvbihhcmdzKTsKICAgICAgfTsKICAgICAgd3JhcHBlZEZuLiRhcmdzID0gcGFyYW1ldGVyTmFtZXMgfHwgcGFyc2VQYXJhbWV0ZXJOYW1lcyhmbkRlZmluaXRpb24pOwogICAgICByZXR1cm4gd3JhcHBlZEZuOwogIH0KICAvKioKICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbkRlZmluaXRpb24KICAgKiBAcGFyYW0ge3N0cmluZ1tdfSBhcmdEZWZpbml0aW9ucwogICAqIEBwYXJhbSB7c3RyaW5nW119IFtwYXJhbWV0ZXJOYW1lc10KICAgKgogICAqIEByZXR1cm4ge0Z1bmN0aW9ufQogICAqLwogIGZ1bmN0aW9uIGZuKGZuRGVmaW5pdGlvbiwgYXJnRGVmaW5pdGlvbnMsIHBhcmFtZXRlck5hbWVzID0gbnVsbCkgewogICAgICBjb25zdCBjaGVja0FyZ3MgPSBjcmVhdGVBcmdzVmFsaWRhdG9yKGFyZ0RlZmluaXRpb25zKTsKICAgICAgcGFyYW1ldGVyTmFtZXMgPSBwYXJhbWV0ZXJOYW1lcyB8fCBwYXJzZVBhcmFtZXRlck5hbWVzKGZuRGVmaW5pdGlvbik7CiAgICAgIGNvbnN0IHdyYXBwZWRGbiA9IGZ1bmN0aW9uICguLi5hcmdzKSB7CiAgICAgICAgICBjb25zdCBjb252ZXJ0ZWRBcmdzID0gY2hlY2tBcmdzKGFyZ3MpOwogICAgICAgICAgaWYgKCFjb252ZXJ0ZWRBcmdzKSB7CiAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gZm5EZWZpbml0aW9uKC4uLmNvbnZlcnRlZEFyZ3MpOwogICAgICB9OwogICAgICB3cmFwcGVkRm4uJGFyZ3MgPSBwYXJhbWV0ZXJOYW1lczsKICAgICAgcmV0dXJuIHdyYXBwZWRGbjsKICB9CiAgZnVuY3Rpb24gbWVldHMoYSwgYikgewogICAgICByZXR1cm4gWwogICAgICAgICAgKGEuZW5kID09PSBiLnN0YXJ0KSwKICAgICAgICAgIChhWydlbmQgaW5jbHVkZWQnXSA9PT0gdHJ1ZSksCiAgICAgICAgICAoYlsnc3RhcnQgaW5jbHVkZWQnXSA9PT0gdHJ1ZSkKICAgICAgXS5ldmVyeSh2ID0+IHYpOwogIH0KICBmdW5jdGlvbiBiZWZvcmUoYSwgYikgewogICAgICBpZiAoYSBpbnN0YW5jZW9mIFJhbmdlICYmIGIgaW5zdGFuY2VvZiBSYW5nZSkgewogICAgICAgICAgcmV0dXJuIChhLmVuZCA8IGIuc3RhcnQgfHwgKCFhWydlbmQgaW5jbHVkZWQnXSB8fCAhYlsnc3RhcnQgaW5jbHVkZWQnXSkgJiYgYS5lbmQgPT0gYi5zdGFydCk7CiAgICAgIH0KICAgICAgaWYgKGEgaW5zdGFuY2VvZiBSYW5nZSkgewogICAgICAgICAgcmV0dXJuIChhLmVuZCA8IGIgfHwgKCFhWydlbmQgaW5jbHVkZWQnXSAmJiBhLmVuZCA9PT0gYikpOwogICAgICB9CiAgICAgIGlmIChiIGluc3RhbmNlb2YgUmFuZ2UpIHsKICAgICAgICAgIHJldHVybiAoYi5zdGFydCA+IGEgfHwgKCFiWydzdGFydCBpbmNsdWRlZCddICYmIGIuc3RhcnQgPT09IGEpKTsKICAgICAgfQogICAgICByZXR1cm4gYSA8IGI7CiAgfQogIGZ1bmN0aW9uIHN1bShsaXN0KSB7CiAgICAgIHJldHVybiBsaXN0LnJlZHVjZSgoc3VtLCBlbCkgPT4gc3VtID09PSBudWxsID8gZWwgOiBzdW0gKyBlbCwgbnVsbCk7CiAgfQogIGZ1bmN0aW9uIGZsYXR0ZW4oW3gsIC4uLnhzXSkgewogICAgICByZXR1cm4gKHggIT09IHVuZGVmaW5lZAogICAgICAgICAgPyBbLi4uQXJyYXkuaXNBcnJheSh4KSA/IGZsYXR0ZW4oeCkgOiBbeF0sIC4uLmZsYXR0ZW4oeHMpXQogICAgICAgICAgOiBbXSk7CiAgfQogIGZ1bmN0aW9uIHRvS2V5U3RyaW5nKGtleSkgewogICAgICBpZiAodHlwZW9mIGtleSA9PT0gJ3N0cmluZycgJiYgL1xXLy50ZXN0KGtleSkpIHsKICAgICAgICAgIHJldHVybiB0b1N0cmluZyhrZXksIHRydWUpOwogICAgICB9CiAgICAgIHJldHVybiBrZXk7CiAgfQogIGZ1bmN0aW9uIHRvRGVlcFN0cmluZyhvYmopIHsKICAgICAgcmV0dXJuIHRvU3RyaW5nKG9iaiwgdHJ1ZSk7CiAgfQogIGZ1bmN0aW9uIGVzY2FwZVN0cihzdHIpIHsKICAgICAgcmV0dXJuIHN0ci5yZXBsYWNlKC8oInxcXCkvZywgJ1xcJDEnKTsKICB9CiAgZnVuY3Rpb24gdG9TdHJpbmcob2JqLCB3cmFwID0gZmFsc2UpIHsKICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kOwogICAgICBjb25zdCB0eXBlID0gZ2V0VHlwZShvYmopOwogICAgICBpZiAodHlwZSA9PT0gJ25pbCcpIHsKICAgICAgICAgIHJldHVybiAnbnVsbCc7CiAgICAgIH0KICAgICAgaWYgKHR5cGUgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICByZXR1cm4gd3JhcCA/IGAiJHtlc2NhcGVTdHIob2JqKX0iYCA6IG9iajsKICAgICAgfQogICAgICBpZiAodHlwZSA9PT0gJ2Jvb2xlYW4nIHx8IHR5cGUgPT09ICdudW1iZXInKSB7CiAgICAgICAgICByZXR1cm4gU3RyaW5nKG9iaik7CiAgICAgIH0KICAgICAgaWYgKHR5cGUgPT09ICdsaXN0JykgewogICAgICAgICAgcmV0dXJuICdbJyArIG9iai5tYXAodG9EZWVwU3RyaW5nKS5qb2luKCcsICcpICsgJ10nOwogICAgICB9CiAgICAgIGlmICh0eXBlID09PSAnY29udGV4dCcpIHsKICAgICAgICAgIHJldHVybiAneycgKyBPYmplY3QuZW50cmllcyhvYmopLm1hcCgoW2tleSwgdmFsdWVdKSA9PiB7CiAgICAgICAgICAgICAgcmV0dXJuIHRvS2V5U3RyaW5nKGtleSkgKyAnOiAnICsgdG9EZWVwU3RyaW5nKHZhbHVlKTsKICAgICAgICAgIH0pLmpvaW4oJywgJykgKyAnfSc7CiAgICAgIH0KICAgICAgaWYgKHR5cGUgPT09ICdkdXJhdGlvbicpIHsKICAgICAgICAgIHJldHVybiBvYmouc2hpZnRUbygneWVhcnMnLCAnbW9udGhzJywgJ2RheXMnLCAnaG91cnMnLCAnbWludXRlcycsICdzZWNvbmRzJykubm9ybWFsaXplKCkudG9JU08oKTsKICAgICAgfQogICAgICBpZiAodHlwZSA9PT0gJ2RhdGUgdGltZScpIHsKICAgICAgICAgIGlmICgoX2EgPSBvYmouem9uZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnpvbmVOYW1lKSB7CiAgICAgICAgICAgICAgcmV0dXJuIG9iai50b0lTTyh7IHN1cHByZXNzTWlsbGlzZWNvbmRzOiB0cnVlLCBpbmNsdWRlT2Zmc2V0OiBmYWxzZSB9KSArICdAJyArICgoX2IgPSBvYmouem9uZSkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLnpvbmVOYW1lKTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBvYmoudG9JU08oeyBzdXBwcmVzc01pbGxpc2Vjb25kczogdHJ1ZSB9KTsKICAgICAgfQogICAgICBpZiAodHlwZSA9PT0gJ2RhdGUnKSB7CiAgICAgICAgICByZXR1cm4gb2JqLnRvSVNPRGF0ZSgpOwogICAgICB9CiAgICAgIGlmICh0eXBlID09PSAncmFuZ2UnKSB7CiAgICAgICAgICByZXR1cm4gJzxyYW5nZT4nOwogICAgICB9CiAgICAgIGlmICh0eXBlID09PSAndGltZScpIHsKICAgICAgICAgIGlmICgoX2MgPSBvYmouem9uZSkgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLnpvbmVOYW1lKSB7CiAgICAgICAgICAgICAgcmV0dXJuIG9iai50b0lTT1RpbWUoeyBzdXBwcmVzc01pbGxpc2Vjb25kczogdHJ1ZSwgaW5jbHVkZU9mZnNldDogZmFsc2UgfSkgKyAnQCcgKyAoKF9kID0gb2JqLnpvbmUpID09PSBudWxsIHx8IF9kID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZC56b25lTmFtZSk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gb2JqLnRvSVNPVGltZSh7IHN1cHByZXNzTWlsbGlzZWNvbmRzOiB0cnVlIH0pOwogICAgICB9CiAgICAgIGlmICh0eXBlID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICByZXR1cm4gJzxmdW5jdGlvbj4nOwogICAgICB9CiAgICAgIHRocm93IG5vdEltcGxlbWVudGVkKCdzdHJpbmcoJyArIHR5cGUgKyAnKScpOwogIH0KICBmdW5jdGlvbiBjb3VudFN5bWJvbHMoc3RyKSB7CiAgICAgIC8vIGNmLiBodHRwczovL21hdGhpYXNieW5lbnMuYmUvbm90ZXMvamF2YXNjcmlwdC11bmljb2RlCiAgICAgIHJldHVybiBzdHIucmVwbGFjZSgvW1x1RDgwMC1cdURCRkZdW1x1REMwMC1cdURGRkZdL2csICdfJykubGVuZ3RoOwogIH0KICBmdW5jdGlvbiByb3VuZCQxKG4pIHsKICAgICAgY29uc3QgaW50ZWdyYWwgPSBNYXRoLnRydW5jKG4pOwogICAgICBpZiAobiAtIGludGVncmFsID4gLjUpIHsKICAgICAgICAgIHJldHVybiBpbnRlZ3JhbCArIDE7CiAgICAgIH0KICAgICAgZWxzZSB7CiAgICAgICAgICByZXR1cm4gaW50ZWdyYWw7CiAgICAgIH0KICB9CiAgLy8gYWRhcHRlZCBmcm9tIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS81MzU3NzE1OQogIGZ1bmN0aW9uIHN0ZGRldihhcnJheSkgewogICAgICBjb25zdCBuID0gYXJyYXkubGVuZ3RoOwogICAgICBjb25zdCBtZWFuID0gYXJyYXkucmVkdWNlKChhLCBiKSA9PiBhICsgYikgLyBuOwogICAgICByZXR1cm4gTWF0aC5zcXJ0KGFycmF5Lm1hcCh4ID0+IE1hdGgucG93KHggLSBtZWFuLCAyKSkucmVkdWNlKChhLCBiKSA9PiBhICsgYikgLyAobiAtIDEpKTsKICB9CiAgZnVuY3Rpb24gbWVkaWFuKGFycmF5KSB7CiAgICAgIGNvbnN0IG4gPSBhcnJheS5sZW5ndGg7CiAgICAgIGNvbnN0IHNvcnRlZCA9IGFycmF5LnNsaWNlKCkuc29ydCgpOwogICAgICBjb25zdCBtaWQgPSBuIC8gMiAtIDE7CiAgICAgIGNvbnN0IGluZGV4ID0gTWF0aC5jZWlsKG1pZCk7CiAgICAgIC8vIGV2ZW4KICAgICAgaWYgKG1pZCA9PT0gaW5kZXgpIHsKICAgICAgICAgIHJldHVybiAoc29ydGVkW2luZGV4XSArIHNvcnRlZFtpbmRleCArIDFdKSAvIDI7CiAgICAgIH0KICAgICAgLy8gdW5ldmVuCiAgICAgIHJldHVybiBzb3J0ZWRbaW5kZXhdOwogIH0KICBmdW5jdGlvbiBtb2RlKGFycmF5KSB7CiAgICAgIGlmIChhcnJheS5sZW5ndGggPCAyKSB7CiAgICAgICAgICByZXR1cm4gYXJyYXk7CiAgICAgIH0KICAgICAgY29uc3QgYnVja2V0cyA9IHt9OwogICAgICBmb3IgKGNvbnN0IG4gb2YgYXJyYXkpIHsKICAgICAgICAgIGJ1Y2tldHNbbl0gPSAoYnVja2V0c1tuXSB8fCAwKSArIDE7CiAgICAgIH0KICAgICAgY29uc3Qgc29ydGVkID0gT2JqZWN0LmVudHJpZXMoYnVja2V0cykuc29ydCgoYSwgYikgPT4gYlsxXSAtIGFbMV0pOwogICAgICByZXR1cm4gc29ydGVkLmZpbHRlcihzID0+IHNbMV0gPT09IHNvcnRlZFswXVsxXSkubWFwKGUgPT4gK2VbMF0pOwogIH0KICBmdW5jdGlvbiBpZlZhbGlkKG8pIHsKICAgICAgcmV0dXJuIG8uaXNWYWxpZCA/IG8gOiBudWxsOwogIH0KCiAgZnVuY3Rpb24gcGFyc2VFeHByZXNzaW9ucyhleHByZXNzaW9uLCBjb250ZXh0ID0ge30pIHsKICAgICAgcmV0dXJuIHBhcnNlci5jb25maWd1cmUoewogICAgICAgICAgdG9wOiAnRXhwcmVzc2lvbnMnLAogICAgICAgICAgY29udGV4dFRyYWNrZXI6IHRyYWNrVmFyaWFibGVzKGNvbnRleHQpCiAgICAgIH0pLnBhcnNlKGV4cHJlc3Npb24pOwogIH0KICBmdW5jdGlvbiBwYXJzZVVuYXJ5VGVzdHMoZXhwcmVzc2lvbiwgY29udGV4dCA9IHt9KSB7CiAgICAgIHJldHVybiBwYXJzZXIuY29uZmlndXJlKHsKICAgICAgICAgIHRvcDogJ1VuYXJ5VGVzdHMnLAogICAgICAgICAgY29udGV4dFRyYWNrZXI6IHRyYWNrVmFyaWFibGVzKGNvbnRleHQpCiAgICAgIH0pLnBhcnNlKGV4cHJlc3Npb24pOwogIH0KCiAgY2xhc3MgSW50ZXJwcmV0ZXIgewogICAgICBfYnVpbGRFeGVjdXRpb25UcmVlKHRyZWUsIGlucHV0KSB7CiAgICAgICAgICBjb25zdCByb290ID0geyBhcmdzOiBbXSwgbm9kZUlucHV0OiBpbnB1dCB9OwogICAgICAgICAgY29uc3Qgc3RhY2sgPSBbcm9vdF07CiAgICAgICAgICB0cmVlLml0ZXJhdGUoewogICAgICAgICAgICAgIGVudGVyKG5vZGVSZWYpIHsKICAgICAgICAgICAgICAgICAgY29uc3QgeyBpc0Vycm9yLCBpc1NraXBwZWQgfSA9IG5vZGVSZWYudHlwZTsKICAgICAgICAgICAgICAgICAgY29uc3QgeyBmcm9tLCB0byB9ID0gbm9kZVJlZjsKICAgICAgICAgICAgICAgICAgaWYgKGlzRXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgU3RhdGVtZW50IHVucGFyc2VhYmxlIGF0IFske2Zyb219LCAke3RvfV1gKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBpZiAoaXNTa2lwcGVkKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgY29uc3Qgbm9kZUlucHV0ID0gaW5wdXQuc2xpY2UoZnJvbSwgdG8pOwogICAgICAgICAgICAgICAgICBzdGFjay5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgIG5vZGVJbnB1dCwKICAgICAgICAgICAgICAgICAgICAgIGFyZ3M6IFtdCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgbGVhdmUobm9kZVJlZikgewogICAgICAgICAgICAgICAgICBpZiAobm9kZVJlZi50eXBlLmlzU2tpcHBlZCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGNvbnN0IHsgbm9kZUlucHV0LCBhcmdzIH0gPSBzdGFjay5wb3AoKTsKICAgICAgICAgICAgICAgICAgY29uc3QgcGFyZW50ID0gc3RhY2tbc3RhY2subGVuZ3RoIC0gMV07CiAgICAgICAgICAgICAgICAgIGNvbnN0IGV4cHIgPSBldmFsTm9kZShub2RlUmVmLCBub2RlSW5wdXQsIGFyZ3MpOwogICAgICAgICAgICAgICAgICBwYXJlbnQuYXJncy5wdXNoKGV4cHIpOwogICAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgICAgcmV0dXJuIHJvb3QuYXJnc1tyb290LmFyZ3MubGVuZ3RoIC0gMV07CiAgICAgIH0KICAgICAgZXZhbHVhdGUoZXhwcmVzc2lvbiwgY29udGV4dCA9IHt9KSB7CiAgICAgICAgICBjb25zdCBwYXJzZVRyZWUgPSBwYXJzZUV4cHJlc3Npb25zKGV4cHJlc3Npb24sIGNvbnRleHQpOwogICAgICAgICAgY29uc3Qgcm9vdCA9IHRoaXMuX2J1aWxkRXhlY3V0aW9uVHJlZShwYXJzZVRyZWUsIGV4cHJlc3Npb24pOwogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICBwYXJzZVRyZWUsCiAgICAgICAgICAgICAgcm9vdAogICAgICAgICAgfTsKICAgICAgfQogICAgICB1bmFyeVRlc3QoZXhwcmVzc2lvbiwgY29udGV4dCA9IHt9KSB7CiAgICAgICAgICBjb25zdCBwYXJzZVRyZWUgPSBwYXJzZVVuYXJ5VGVzdHMoZXhwcmVzc2lvbiwgY29udGV4dCk7CiAgICAgICAgICBjb25zdCByb290ID0gdGhpcy5fYnVpbGRFeGVjdXRpb25UcmVlKHBhcnNlVHJlZSwgZXhwcmVzc2lvbik7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgIHBhcnNlVHJlZSwKICAgICAgICAgICAgICByb290CiAgICAgICAgICB9OwogICAgICB9CiAgfQogIGNvbnN0IGludGVycHJldGVyID0gbmV3IEludGVycHJldGVyKCk7CiAgZnVuY3Rpb24gdW5hcnlUZXN0KGV4cHJlc3Npb24sIGNvbnRleHQgPSB7fSkgewogICAgICBjb25zdCB2YWx1ZSA9IGNvbnRleHRbJz8nXSB8fCBudWxsOwogICAgICBjb25zdCB7IHJvb3QgfSA9IGludGVycHJldGVyLnVuYXJ5VGVzdChleHByZXNzaW9uLCBjb250ZXh0KTsKICAgICAgLy8gcm9vdCA9IGZuKGN0eCkgPT4gdGVzdCh2YWwpCiAgICAgIGNvbnN0IHRlc3QgPSByb290KGNvbnRleHQpOwogICAgICByZXR1cm4gdGVzdCh2YWx1ZSk7CiAgfQogIGZ1bmN0aW9uIGV2YWx1YXRlKGV4cHJlc3Npb24sIGNvbnRleHQgPSB7fSkgewogICAgICBjb25zdCB7IHJvb3QgfSA9IGludGVycHJldGVyLmV2YWx1YXRlKGV4cHJlc3Npb24sIGNvbnRleHQpOwogICAgICAvLyByb290ID0gWyBmbihjdHgpIF0KICAgICAgY29uc3QgcmVzdWx0cyA9IHJvb3QoY29udGV4dCk7CiAgICAgIGlmIChyZXN1bHRzLmxlbmd0aCA9PT0gMSkgewogICAgICAgICAgcmV0dXJuIHJlc3VsdHNbMF07CiAgICAgIH0KICAgICAgZWxzZSB7CiAgICAgICAgICByZXR1cm4gcmVzdWx0czsKICAgICAgfQogIH0KICBmdW5jdGlvbiBldmFsTm9kZShub2RlLCBpbnB1dCwgYXJncykgewogICAgICBzd2l0Y2ggKG5vZGUubmFtZSkgewogICAgICAgICAgY2FzZSAnQXJpdGhPcCc6IHJldHVybiAoY29udGV4dCkgPT4gewogICAgICAgICAgICAgIGNvbnN0IG51bGxhYmxlID0gKG9wLCB0eXBlcyA9IFsnbnVtYmVyJ10pID0+IChhLCBiKSA9PiB7CiAgICAgICAgICAgICAgICAgIGNvbnN0IGxlZnQgPSBhKGNvbnRleHQpOwogICAgICAgICAgICAgICAgICBjb25zdCByaWdodCA9IGIoY29udGV4dCk7CiAgICAgICAgICAgICAgICAgIGlmIChpc0FycmF5JDEobGVmdCkpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGlmIChpc0FycmF5JDEocmlnaHQpKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBjb25zdCBsZWZ0VHlwZSA9IGdldFR5cGUobGVmdCk7CiAgICAgICAgICAgICAgICAgIGNvbnN0IHJpZ2h0VHlwZSA9IGdldFR5cGUocmlnaHQpOwogICAgICAgICAgICAgICAgICBpZiAobGVmdFR5cGUgIT09IHJpZ2h0VHlwZSB8fAogICAgICAgICAgICAgICAgICAgICAgIXR5cGVzLmluY2x1ZGVzKGxlZnRUeXBlKSkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgcmV0dXJuIG9wKGxlZnQsIHJpZ2h0KTsKICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIHN3aXRjaCAoaW5wdXQpIHsKICAgICAgICAgICAgICAgICAgY2FzZSAnKyc6IHJldHVybiBudWxsYWJsZSgoYSwgYikgPT4gYSArIGIsIFsnc3RyaW5nJywgJ251bWJlciddKTsKICAgICAgICAgICAgICAgICAgY2FzZSAnLSc6IHJldHVybiBudWxsYWJsZSgoYSwgYikgPT4gYSAtIGIpOwogICAgICAgICAgICAgICAgICBjYXNlICcqJzogcmV0dXJuIG51bGxhYmxlKChhLCBiKSA9PiBhICogYik7CiAgICAgICAgICAgICAgICAgIGNhc2UgJy8nOiByZXR1cm4gbnVsbGFibGUoKGEsIGIpID0+ICFiID8gbnVsbCA6IGEgLyBiKTsKICAgICAgICAgICAgICAgICAgY2FzZSAnKionOgogICAgICAgICAgICAgICAgICBjYXNlICdeJzogcmV0dXJuIG51bGxhYmxlKChhLCBiKSA9PiBNYXRoLnBvdyhhLCBiKSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgfTsKICAgICAgICAgIGNhc2UgJ0NvbXBhcmVPcCc6IHJldHVybiB0YWcoKCkgPT4gewogICAgICAgICAgICAgIHN3aXRjaCAoaW5wdXQpIHsKICAgICAgICAgICAgICAgICAgY2FzZSAnPic6IHJldHVybiAoYikgPT4gY3JlYXRlUmFuZ2UoYiwgbnVsbCwgZmFsc2UsIGZhbHNlKTsKICAgICAgICAgICAgICAgICAgY2FzZSAnPj0nOiByZXR1cm4gKGIpID0+IGNyZWF0ZVJhbmdlKGIsIG51bGwsIHRydWUsIGZhbHNlKTsKICAgICAgICAgICAgICAgICAgY2FzZSAnPCc6IHJldHVybiAoYikgPT4gY3JlYXRlUmFuZ2UobnVsbCwgYiwgZmFsc2UsIGZhbHNlKTsKICAgICAgICAgICAgICAgICAgY2FzZSAnPD0nOiByZXR1cm4gKGIpID0+IGNyZWF0ZVJhbmdlKG51bGwsIGIsIGZhbHNlLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgY2FzZSAnPSc6IHJldHVybiAoYikgPT4gKGEpID0+IGVxdWFscyhhLCBiKTsKICAgICAgICAgICAgICAgICAgY2FzZSAnIT0nOiByZXR1cm4gKGIpID0+IChhKSA9PiAhZXF1YWxzKGEsIGIpOwogICAgICAgICAgICAgIH0KICAgICAgICAgIH0sIFRlc3QoJ2Jvb2xlYW4nKSk7CiAgICAgICAgICBjYXNlICdXaWxkY2FyZCc6IHJldHVybiAoX2NvbnRleHQpID0+IHRydWU7CiAgICAgICAgICBjYXNlICdudWxsJzogcmV0dXJuIChfY29udGV4dCkgPT4gewogICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgfTsKICAgICAgICAgIGNhc2UgJ0Rpc2p1bmN0aW9uJzogcmV0dXJuIHRhZygoY29udGV4dCkgPT4gewogICAgICAgICAgICAgIGNvbnN0IGxlZnQgPSBhcmdzWzBdKGNvbnRleHQpOwogICAgICAgICAgICAgIGNvbnN0IHJpZ2h0ID0gYXJnc1syXShjb250ZXh0KTsKICAgICAgICAgICAgICBjb25zdCBtYXRyaXggPSBbCiAgICAgICAgICAgICAgICAgIFt0cnVlLCB0cnVlLCB0cnVlXSwKICAgICAgICAgICAgICAgICAgW3RydWUsIGZhbHNlLCB0cnVlXSwKICAgICAgICAgICAgICAgICAgW3RydWUsIG51bGwsIHRydWVdLAogICAgICAgICAgICAgICAgICBbZmFsc2UsIHRydWUsIHRydWVdLAogICAgICAgICAgICAgICAgICBbZmFsc2UsIGZhbHNlLCBmYWxzZV0sCiAgICAgICAgICAgICAgICAgIFtmYWxzZSwgbnVsbCwgbnVsbF0sCiAgICAgICAgICAgICAgICAgIFtudWxsLCB0cnVlLCB0cnVlXSwKICAgICAgICAgICAgICAgICAgW251bGwsIGZhbHNlLCBudWxsXSwKICAgICAgICAgICAgICAgICAgW251bGwsIG51bGwsIG51bGxdLAogICAgICAgICAgICAgIF07CiAgICAgICAgICAgICAgY29uc3QgYSA9IHR5cGVvZiBsZWZ0ID09PSAnYm9vbGVhbicgPyBsZWZ0IDogbnVsbDsKICAgICAgICAgICAgICBjb25zdCBiID0gdHlwZW9mIHJpZ2h0ID09PSAnYm9vbGVhbicgPyByaWdodCA6IG51bGw7CiAgICAgICAgICAgICAgcmV0dXJuIG1hdHJpeC5maW5kKGVsID0+IGVsWzBdID09PSBhICYmIGVsWzFdID09PSBiKVsyXTsKICAgICAgICAgIH0sIFRlc3QoJ2Jvb2xlYW4nKSk7CiAgICAgICAgICBjYXNlICdDb25qdW5jdGlvbic6IHJldHVybiB0YWcoKGNvbnRleHQpID0+IHsKICAgICAgICAgICAgICBjb25zdCBsZWZ0ID0gYXJnc1swXShjb250ZXh0KTsKICAgICAgICAgICAgICBjb25zdCByaWdodCA9IGFyZ3NbMl0oY29udGV4dCk7CiAgICAgICAgICAgICAgY29uc3QgbWF0cml4ID0gWwogICAgICAgICAgICAgICAgICBbdHJ1ZSwgdHJ1ZSwgdHJ1ZV0sCiAgICAgICAgICAgICAgICAgIFt0cnVlLCBmYWxzZSwgZmFsc2VdLAogICAgICAgICAgICAgICAgICBbdHJ1ZSwgbnVsbCwgbnVsbF0sCiAgICAgICAgICAgICAgICAgIFtmYWxzZSwgdHJ1ZSwgZmFsc2VdLAogICAgICAgICAgICAgICAgICBbZmFsc2UsIGZhbHNlLCBmYWxzZV0sCiAgICAgICAgICAgICAgICAgIFtmYWxzZSwgbnVsbCwgZmFsc2VdLAogICAgICAgICAgICAgICAgICBbbnVsbCwgdHJ1ZSwgbnVsbF0sCiAgICAgICAgICAgICAgICAgIFtudWxsLCBmYWxzZSwgZmFsc2VdLAogICAgICAgICAgICAgICAgICBbbnVsbCwgbnVsbCwgbnVsbF0sCiAgICAgICAgICAgICAgXTsKICAgICAgICAgICAgICBjb25zdCBhID0gdHlwZW9mIGxlZnQgPT09ICdib29sZWFuJyA/IGxlZnQgOiBudWxsOwogICAgICAgICAgICAgIGNvbnN0IGIgPSB0eXBlb2YgcmlnaHQgPT09ICdib29sZWFuJyA/IHJpZ2h0IDogbnVsbDsKICAgICAgICAgICAgICByZXR1cm4gbWF0cml4LmZpbmQoZWwgPT4gZWxbMF0gPT09IGEgJiYgZWxbMV0gPT09IGIpWzJdOwogICAgICAgICAgfSwgVGVzdCgnYm9vbGVhbicpKTsKICAgICAgICAgIGNhc2UgJ0NvbnRleHQnOiByZXR1cm4gKGNvbnRleHQpID0+IHsKICAgICAgICAgICAgICByZXR1cm4gYXJncy5zbGljZSgxLCAtMSkucmVkdWNlKChvYmosIGFyZykgPT4gewogICAgICAgICAgICAgICAgICBjb25zdCBba2V5LCB2YWx1ZV0gPSBhcmcoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBjb250ZXh0KSwgb2JqKSk7CiAgICAgICAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG9iaiksIHsgW2tleV06IHZhbHVlIH0pOwogICAgICAgICAgICAgIH0sIHt9KTsKICAgICAgICAgIH07CiAgICAgICAgICBjYXNlICdGdW5jdGlvbkJvZHknOiByZXR1cm4gYXJnc1swXTsKICAgICAgICAgIGNhc2UgJ0Zvcm1hbFBhcmFtZXRlcnMnOiByZXR1cm4gYXJnczsKICAgICAgICAgIGNhc2UgJ0Zvcm1hbFBhcmFtZXRlcic6IHJldHVybiBhcmdzWzBdOwogICAgICAgICAgY2FzZSAnUGFyYW1ldGVyTmFtZSc6IHJldHVybiBhcmdzLmpvaW4oJyAnKTsKICAgICAgICAgIGNhc2UgJ0Z1bmN0aW9uRGVmaW5pdGlvbic6IHJldHVybiAoY29udGV4dCkgPT4gewogICAgICAgICAgICAgIGNvbnN0IHBhcmFtZXRlck5hbWVzID0gYXJnc1syXTsKICAgICAgICAgICAgICBjb25zdCBmbkJvZHkgPSBhcmdzWzRdOwogICAgICAgICAgICAgIHJldHVybiB3cmFwRnVuY3Rpb24oKC4uLmFyZ3MpID0+IHsKICAgICAgICAgICAgICAgICAgY29uc3QgZm5Db250ZXh0ID0gcGFyYW1ldGVyTmFtZXMucmVkdWNlKChjb250ZXh0LCBuYW1lLCBpZHgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgIC8vIHN1cHBvcnQgcG9zaXRpb25hbCBwYXJhbWV0ZXJzCiAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0W25hbWVdID0gYXJnc1tpZHhdOwogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQ7CiAgICAgICAgICAgICAgICAgIH0sIE9iamVjdC5hc3NpZ24oe30sIGNvbnRleHQpKTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGZuQm9keShmbkNvbnRleHQpOwogICAgICAgICAgICAgIH0sIHBhcmFtZXRlck5hbWVzKTsKICAgICAgICAgIH07CiAgICAgICAgICBjYXNlICdDb250ZXh0RW50cnknOiByZXR1cm4gKGNvbnRleHQpID0+IHsKICAgICAgICAgICAgICBjb25zdCBrZXkgPSB0eXBlb2YgYXJnc1swXSA9PT0gJ2Z1bmN0aW9uJyA/IGFyZ3NbMF0oY29udGV4dCkgOiBhcmdzWzBdOwogICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gYXJnc1sxXShjb250ZXh0KTsKICAgICAgICAgICAgICByZXR1cm4gW2tleSwgdmFsdWVdOwogICAgICAgICAgfTsKICAgICAgICAgIGNhc2UgJ0tleSc6IHJldHVybiBhcmdzWzBdOwogICAgICAgICAgY2FzZSAnSWRlbnRpZmllcic6IHJldHVybiBpbnB1dDsKICAgICAgICAgIGNhc2UgJ1NwZWNpYWxGdW5jdGlvbk5hbWUnOiByZXR1cm4gKGNvbnRleHQpID0+IGdldEJ1aWx0aW4oaW5wdXQpOwogICAgICAgICAgLy8gcHJlc2VydmUgc3BhY2VzIGluIG5hbWUsIGJ1dCBjb21wYWN0IG11bHRpcGxlCiAgICAgICAgICAvLyBzcGFjZXMgaW50byBvbmUgKHRva2VuKQogICAgICAgICAgY2FzZSAnTmFtZSc6IHJldHVybiBpbnB1dC5yZXBsYWNlKC9cc3syLH0vZywgJyAnKTsKICAgICAgICAgIGNhc2UgJ1ZhcmlhYmxlTmFtZSc6IHJldHVybiAoY29udGV4dCkgPT4gewogICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBhcmdzLmpvaW4oJyAnKTsKICAgICAgICAgICAgICByZXR1cm4gZ2V0QnVpbHRpbihuYW1lKSB8fCBnZXRGcm9tQ29udGV4dChuYW1lLCBjb250ZXh0KTsKICAgICAgICAgIH07CiAgICAgICAgICBjYXNlICdRdWFsaWZpZWROYW1lJzogcmV0dXJuIChjb250ZXh0KSA9PiB7CiAgICAgICAgICAgICAgcmV0dXJuIGFyZ3MucmVkdWNlKChjb250ZXh0LCBhcmcpID0+IGFyZyhjb250ZXh0KSwgY29udGV4dCk7CiAgICAgICAgICB9OwogICAgICAgICAgY2FzZSAnPyc6IHJldHVybiAoY29udGV4dCkgPT4gZ2V0RnJvbUNvbnRleHQoJz8nLCBjb250ZXh0KTsKICAgICAgICAgIC8vIGV4cHJlc3Npb24KICAgICAgICAgIC8vIGV4cHJlc3Npb24gIi4uIiBleHByZXNzaW9uCiAgICAgICAgICBjYXNlICdJdGVyYXRpb25Db250ZXh0JzogcmV0dXJuIChjb250ZXh0KSA9PiB7CiAgICAgICAgICAgICAgY29uc3QgYSA9IGFyZ3NbMF0oY29udGV4dCk7CiAgICAgICAgICAgICAgY29uc3QgYiA9IGFyZ3NbMV0gJiYgYXJnc1sxXShjb250ZXh0KTsKICAgICAgICAgICAgICByZXR1cm4gYiA/IGNyZWF0ZVJhbmdlKGEsIGIpIDogYTsKICAgICAgICAgIH07CiAgICAgICAgICBjYXNlICdUeXBlJzogcmV0dXJuIGFyZ3NbMF07CiAgICAgICAgICBjYXNlICdJbkV4cHJlc3Npb25zJzogcmV0dXJuIChjb250ZXh0KSA9PiB7CiAgICAgICAgICAgICAgY29uc3QgaXRlcmF0aW9uQ29udGV4dHMgPSBhcmdzLm1hcChjdHggPT4gY3R4KGNvbnRleHQpKTsKICAgICAgICAgICAgICBpZiAoaXRlcmF0aW9uQ29udGV4dHMuc29tZShjdHggPT4gZ2V0VHlwZShjdHgpICE9PSAnbGlzdCcpKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICByZXR1cm4gY2FydGVzaWFuUHJvZHVjdChpdGVyYXRpb25Db250ZXh0cykubWFwKGN0eCA9PiB7CiAgICAgICAgICAgICAgICAgIGlmICghaXNBcnJheSQxKGN0eCkpIHsKICAgICAgICAgICAgICAgICAgICAgIGN0eCA9IFtjdHhdOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCBjb250ZXh0LCAuLi5jdHgpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgfTsKICAgICAgICAgIC8vIE5hbWUga3c8ImluIj4gRXhwcgogICAgICAgICAgY2FzZSAnSW5FeHByZXNzaW9uJzogcmV0dXJuIChjb250ZXh0KSA9PiB7CiAgICAgICAgICAgICAgcmV0dXJuIGV4dHJhY3RWYWx1ZShjb250ZXh0LCBhcmdzWzBdLCBhcmdzWzJdKTsKICAgICAgICAgIH07CiAgICAgICAgICBjYXNlICdTcGVjaWFsVHlwZSc6IHRocm93IG5vdEltcGxlbWVudGVkKCdTcGVjaWFsVHlwZScpOwogICAgICAgICAgY2FzZSAnSW5zdGFuY2VPZkV4cHJlc3Npb24nOiByZXR1cm4gdGFnKChjb250ZXh0KSA9PiB7CiAgICAgICAgICAgICAgY29uc3QgYSA9IGFyZ3NbMF0oY29udGV4dCk7CiAgICAgICAgICAgICAgY29uc3QgYiA9IGFyZ3NbM10oY29udGV4dCk7CiAgICAgICAgICAgICAgcmV0dXJuIGEgaW5zdGFuY2VvZiBiOwogICAgICAgICAgfSwgVGVzdCgnYm9vbGVhbicpKTsKICAgICAgICAgIGNhc2UgJ2V2ZXJ5JzogcmV0dXJuIHRhZygoY29udGV4dCkgPT4gewogICAgICAgICAgICAgIHJldHVybiAoX2NvbnRleHRzLCBfY29uZGl0aW9uKSA9PiB7CiAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRleHRzID0gX2NvbnRleHRzKGNvbnRleHQpOwogICAgICAgICAgICAgICAgICBpZiAoZ2V0VHlwZShjb250ZXh0cykgIT09ICdsaXN0JykgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRleHRzOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIHJldHVybiBjb250ZXh0cy5ldmVyeShjdHggPT4gaXNUcnV0aHkoX2NvbmRpdGlvbihjdHgpKSk7CiAgICAgICAgICAgICAgfTsKICAgICAgICAgIH0sIFRlc3QoJ2Jvb2xlYW4nKSk7CiAgICAgICAgICBjYXNlICdzb21lJzogcmV0dXJuIHRhZygoY29udGV4dCkgPT4gewogICAgICAgICAgICAgIHJldHVybiAoX2NvbnRleHRzLCBfY29uZGl0aW9uKSA9PiB7CiAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRleHRzID0gX2NvbnRleHRzKGNvbnRleHQpOwogICAgICAgICAgICAgICAgICBpZiAoZ2V0VHlwZShjb250ZXh0cykgIT09ICdsaXN0JykgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRleHRzOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIHJldHVybiBjb250ZXh0cy5zb21lKGN0eCA9PiBpc1RydXRoeShfY29uZGl0aW9uKGN0eCkpKTsKICAgICAgICAgICAgICB9OwogICAgICAgICAgfSwgVGVzdCgnYm9vbGVhbicpKTsKICAgICAgICAgIGNhc2UgJ051bWVyaWNMaXRlcmFsJzogcmV0dXJuIHRhZygoX2NvbnRleHQpID0+IGlucHV0LmluY2x1ZGVzKCcuJykgPyBwYXJzZUZsb2F0KGlucHV0KSA6IHBhcnNlSW50KGlucHV0KSwgJ251bWJlcicpOwogICAgICAgICAgY2FzZSAnQm9vbGVhbkxpdGVyYWwnOiByZXR1cm4gdGFnKChfY29udGV4dCkgPT4gaW5wdXQgPT09ICd0cnVlJyA/IHRydWUgOiBmYWxzZSwgJ2Jvb2xlYW4nKTsKICAgICAgICAgIGNhc2UgJ1N0cmluZ0xpdGVyYWwnOiByZXR1cm4gdGFnKChfY29udGV4dCkgPT4gcGFyc2VTdHJpbmcoaW5wdXQpLCAnc3RyaW5nJyk7CiAgICAgICAgICBjYXNlICdQb3NpdGlvbmFsUGFyYW1ldGVycyc6IHJldHVybiAoY29udGV4dCkgPT4gYXJncy5tYXAoYXJnID0+IGFyZyhjb250ZXh0KSk7CiAgICAgICAgICBjYXNlICdOYW1lZFBhcmFtZXRlcic6IHJldHVybiAoY29udGV4dCkgPT4gewogICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBhcmdzWzBdOwogICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gYXJnc1sxXShjb250ZXh0KTsKICAgICAgICAgICAgICByZXR1cm4gW25hbWUsIHZhbHVlXTsKICAgICAgICAgIH07CiAgICAgICAgICBjYXNlICdOYW1lZFBhcmFtZXRlcnMnOiByZXR1cm4gKGNvbnRleHQpID0+IGFyZ3MucmVkdWNlKChhcmdzLCBhcmcpID0+IHsKICAgICAgICAgICAgICBjb25zdCBbbmFtZSwgdmFsdWVdID0gYXJnKGNvbnRleHQpOwogICAgICAgICAgICAgIGFyZ3NbbmFtZV0gPSB2YWx1ZTsKICAgICAgICAgICAgICByZXR1cm4gYXJnczsKICAgICAgICAgIH0sIHt9KTsKICAgICAgICAgIGNhc2UgJ0RhdGVUaW1lQ29uc3RydWN0b3InOiByZXR1cm4gKGNvbnRleHQpID0+IHsKICAgICAgICAgICAgICByZXR1cm4gZ2V0QnVpbHRpbihpbnB1dCk7CiAgICAgICAgICB9OwogICAgICAgICAgY2FzZSAnRGF0ZVRpbWVMaXRlcmFsJzogcmV0dXJuIChjb250ZXh0KSA9PiB7CiAgICAgICAgICAgICAgLy8gQXRMaXRlcmFsCiAgICAgICAgICAgICAgaWYgKGFyZ3MubGVuZ3RoID09PSAxKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBhcmdzWzBdKGNvbnRleHQpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAvLyBGdW5jdGlvbkludm9jYXRpb24KICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgY29uc3Qgd3JhcHBlZEZuID0gd3JhcEZ1bmN0aW9uKGFyZ3NbMF0oY29udGV4dCkpOwogICAgICAgICAgICAgICAgICBpZiAoIXdyYXBwZWRGbikgewogICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZXZhbHVhdGUgJHtpbnB1dH06IFRhcmdldCBpcyBub3QgYSBmdW5jdGlvbmApOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRleHRPckFyZ3MgPSBhcmdzWzJdKGNvbnRleHQpOwogICAgICAgICAgICAgICAgICByZXR1cm4gd3JhcHBlZEZuLmludm9rZShjb250ZXh0T3JBcmdzKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICB9OwogICAgICAgICAgY2FzZSAnQXRMaXRlcmFsJzogcmV0dXJuIChjb250ZXh0KSA9PiB7CiAgICAgICAgICAgICAgY29uc3Qgd3JhcHBlZEZuID0gd3JhcEZ1bmN0aW9uKGdldEJ1aWx0aW4oJ0AnKSk7CiAgICAgICAgICAgICAgaWYgKCF3cmFwcGVkRm4pIHsKICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZXZhbHVhdGUgJHtpbnB1dH06IFRhcmdldCBpcyBub3QgYSBmdW5jdGlvbmApOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICByZXR1cm4gd3JhcHBlZEZuLmludm9rZShbYXJnc1swXShjb250ZXh0KV0pOwogICAgICAgICAgfTsKICAgICAgICAgIGNhc2UgJ0Z1bmN0aW9uSW52b2NhdGlvbic6IHJldHVybiAoY29udGV4dCkgPT4gewogICAgICAgICAgICAgIGNvbnN0IHdyYXBwZWRGbiA9IHdyYXBGdW5jdGlvbihhcmdzWzBdKGNvbnRleHQpKTsKICAgICAgICAgICAgICBpZiAoIXdyYXBwZWRGbikgewogICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBldmFsdWF0ZSAke2lucHV0fTogVGFyZ2V0IGlzIG5vdCBhIGZ1bmN0aW9uYCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGNvbnN0IGNvbnRleHRPckFyZ3MgPSBhcmdzWzJdKGNvbnRleHQpOwogICAgICAgICAgICAgIHJldHVybiB3cmFwcGVkRm4uaW52b2tlKGNvbnRleHRPckFyZ3MpOwogICAgICAgICAgfTsKICAgICAgICAgIGNhc2UgJ0lmRXhwcmVzc2lvbic6IHJldHVybiAoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIGNvbnN0IGlmQ29uZGl0aW9uID0gYXJnc1sxXTsKICAgICAgICAgICAgICBjb25zdCB0aGVuVmFsdWUgPSBhcmdzWzNdOwogICAgICAgICAgICAgIGNvbnN0IGVsc2VWYWx1ZSA9IGFyZ3NbNV07CiAgICAgICAgICAgICAgY29uc3QgdHlwZSA9IGNvYWxlY2Vuc2VUeXBlcyh0aGVuVmFsdWUsIGVsc2VWYWx1ZSk7CiAgICAgICAgICAgICAgcmV0dXJuIHRhZygoY29udGV4dCkgPT4gewogICAgICAgICAgICAgICAgICBpZiAoaXNUcnV0aHkoaWZDb25kaXRpb24oY29udGV4dCkpKSB7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhlblZhbHVlKGNvbnRleHQpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsc2VWYWx1ZSA/IGVsc2VWYWx1ZShjb250ZXh0KSA6IG51bGw7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9LCB0eXBlKTsKICAgICAgICAgIH0pKCk7CiAgICAgICAgICBjYXNlICdQYXJhbWV0ZXJzJzogcmV0dXJuIGFyZ3MubGVuZ3RoID09PSAzID8gYXJnc1sxXSA6IChfY29udGV4dCkgPT4gW107CiAgICAgICAgICBjYXNlICdDb21wYXJpc29uJzogcmV0dXJuIChjb250ZXh0KSA9PiB7CiAgICAgICAgICAgICAgY29uc3Qgb3BlcmF0b3IgPSBhcmdzWzFdOwogICAgICAgICAgICAgIC8vIGV4cHJlc3Npb24gIWNvbXBhcmUga3c8ImluIj4gUG9zaXRpdmVVbmFyeVRlc3QgfAogICAgICAgICAgICAgIC8vIGV4cHJlc3Npb24gIWNvbXBhcmUga3c8ImluIj4gIXVuYXJ5VGVzdCAiKCIgUG9zaXRpdmVVbmFyeVRlc3RzICIpIgogICAgICAgICAgICAgIGlmIChvcGVyYXRvciA9PT0gJ2luJykgewogICAgICAgICAgICAgICAgICByZXR1cm4gY29tcGFyZUluKGFyZ3NbMF0oY29udGV4dCksIChhcmdzWzNdIHx8IGFyZ3NbMl0pKGNvbnRleHQpKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgLy8gZXhwcmVzc2lvbiAhY29tcGFyZSBrdzwiYmV0d2VlbiI+IGV4cHJlc3Npb24ga3c8ImFuZCI+IGV4cHJlc3Npb24KICAgICAgICAgICAgICBpZiAob3BlcmF0b3IgPT09ICdiZXR3ZWVuJykgewogICAgICAgICAgICAgICAgICBjb25zdCBzdGFydCA9IGFyZ3NbMl0oY29udGV4dCk7CiAgICAgICAgICAgICAgICAgIGNvbnN0IGVuZCA9IGFyZ3NbNF0oY29udGV4dCk7CiAgICAgICAgICAgICAgICAgIGlmIChzdGFydCA9PT0gbnVsbCB8fCBlbmQgPT09IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIHJldHVybiBjcmVhdGVSYW5nZShzdGFydCwgZW5kKS5pbmNsdWRlcyhhcmdzWzBdKGNvbnRleHQpKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgLy8gZXhwcmVzc2lvbiAhY29tcGFyZSBDb21wYXJlT3A8Ij0iIHwgIiE9Ij4gZXhwcmVzc2lvbiB8CiAgICAgICAgICAgICAgLy8gZXhwcmVzc2lvbiAhY29tcGFyZSBDb21wYXJlT3A8R3QgfCBHdGUgfCBMdCB8IEx0ZT4gZXhwcmVzc2lvbiB8CiAgICAgICAgICAgICAgY29uc3QgbGVmdCA9IGFyZ3NbMF0oY29udGV4dCk7CiAgICAgICAgICAgICAgY29uc3QgcmlnaHQgPSBhcmdzWzJdKGNvbnRleHQpOwogICAgICAgICAgICAgIGNvbnN0IHRlc3QgPSBvcGVyYXRvcigpKHJpZ2h0KTsKICAgICAgICAgICAgICByZXR1cm4gY29tcGFyZVZhbHVlKHRlc3QsIGxlZnQpOwogICAgICAgICAgfTsKICAgICAgICAgIGNhc2UgJ1F1YW50aWZpZWRFeHByZXNzaW9uJzogcmV0dXJuIChjb250ZXh0KSA9PiB7CiAgICAgICAgICAgICAgY29uc3QgdGVzdEZuID0gYXJnc1swXShjb250ZXh0KTsKICAgICAgICAgICAgICBjb25zdCBjb250ZXh0cyA9IGFyZ3NbMV07CiAgICAgICAgICAgICAgY29uc3QgY29uZGl0aW9uID0gYXJnc1szXTsKICAgICAgICAgICAgICByZXR1cm4gdGVzdEZuKGNvbnRleHRzLCBjb25kaXRpb24pOwogICAgICAgICAgfTsKICAgICAgICAgIC8vIERNTiAxLjIgLSAxMC4zLjIuMTQKICAgICAgICAgIC8vIGt3PCJmb3IiPiBjb21tYVNlcDE8SW5FeHByZXNzaW9uPEl0ZXJhdGlvbkNvbnRleHQ+PiBrdzwicmV0dXJuIj4gZXhwcmVzc2lvbgogICAgICAgICAgY2FzZSAnRm9yRXhwcmVzc2lvbic6IHJldHVybiAoY29udGV4dCkgPT4gewogICAgICAgICAgICAgIGNvbnN0IGV4dHJhY3RvciA9IGFyZ3NbYXJncy5sZW5ndGggLSAxXTsKICAgICAgICAgICAgICBjb25zdCBpdGVyYXRpb25Db250ZXh0cyA9IGFyZ3NbMV0oY29udGV4dCk7CiAgICAgICAgICAgICAgaWYgKGdldFR5cGUoaXRlcmF0aW9uQ29udGV4dHMpICE9PSAnbGlzdCcpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZXJhdGlvbkNvbnRleHRzOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBjb25zdCBwYXJ0aWFsID0gW107CiAgICAgICAgICAgICAgZm9yIChjb25zdCBjdHggb2YgaXRlcmF0aW9uQ29udGV4dHMpIHsKICAgICAgICAgICAgICAgICAgcGFydGlhbC5wdXNoKGV4dHJhY3RvcihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGN0eCksIHsgcGFydGlhbCB9KSkpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICByZXR1cm4gcGFydGlhbDsKICAgICAgICAgIH07CiAgICAgICAgICBjYXNlICdBcml0aG1ldGljRXhwcmVzc2lvbic6IHJldHVybiAoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIC8vIGJpbmFyeSBleHByZXNzaW9uIChhICsgYikKICAgICAgICAgICAgICBpZiAoYXJncy5sZW5ndGggPT09IDMpIHsKICAgICAgICAgICAgICAgICAgY29uc3QgW2EsIG9wLCBiXSA9IGFyZ3M7CiAgICAgICAgICAgICAgICAgIHJldHVybiB0YWcoKGNvbnRleHQpID0+IHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvcChjb250ZXh0KShhLCBiKTsKICAgICAgICAgICAgICAgICAgfSwgY29hbGVjZW5zZVR5cGVzKGEsIGIpKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgLy8gdW5hcnkgZXhwcmVzc2lvbiAoLWIpCiAgICAgICAgICAgICAgaWYgKGFyZ3MubGVuZ3RoID09PSAyKSB7CiAgICAgICAgICAgICAgICAgIGNvbnN0IFtvcCwgdmFsdWVdID0gYXJnczsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhZygoY29udGV4dCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9wKGNvbnRleHQpKCgpID0+IDAsIHZhbHVlKTsKICAgICAgICAgICAgICAgICAgfSwgdmFsdWUudHlwZSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgfSkoKTsKICAgICAgICAgIGNhc2UgJ1Bvc2l0aXZlVW5hcnlUZXN0JzogcmV0dXJuIGFyZ3NbMF07CiAgICAgICAgICBjYXNlICdQYXJlbnRoZXNpemVkRXhwcmVzc2lvbic6IHJldHVybiBhcmdzWzFdOwogICAgICAgICAgY2FzZSAnUGF0aEV4cHJlc3Npb24nOiByZXR1cm4gKGNvbnRleHQpID0+IHsKICAgICAgICAgICAgICBjb25zdCBwYXRoVGFyZ2V0ID0gYXJnc1swXShjb250ZXh0KTsKICAgICAgICAgICAgICBjb25zdCBwYXRoUHJvcCA9IGFyZ3NbMV07CiAgICAgICAgICAgICAgaWYgKGlzQXJyYXkkMShwYXRoVGFyZ2V0KSkgewogICAgICAgICAgICAgICAgICByZXR1cm4gY29lcmNlU2luZ2xldG9uKHBhdGhUYXJnZXQubWFwKHBhdGhQcm9wKSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICByZXR1cm4gcGF0aFByb3AocGF0aFRhcmdldCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgfTsKICAgICAgICAgIC8vIGV4cHJlc3Npb24gIWZpbHRlciAiWyIgZXhwcmVzc2lvbiAiXSIKICAgICAgICAgIGNhc2UgJ0ZpbHRlckV4cHJlc3Npb24nOiByZXR1cm4gKGNvbnRleHQpID0+IHsKICAgICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBhcmdzWzBdKGNvbnRleHQpOwogICAgICAgICAgICAgIGNvbnN0IGZpbHRlckZuID0gYXJnc1syXTsKICAgICAgICAgICAgICBjb25zdCBmaWx0ZXJUYXJnZXQgPSBpc0FycmF5JDEodGFyZ2V0KSA/IHRhcmdldCA6IFt0YXJnZXRdOwogICAgICAgICAgICAgIC8vIG51bGxbLi5dCiAgICAgICAgICAgICAgaWYgKHRhcmdldCA9PT0gbnVsbCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgLy8gYVsxXQogICAgICAgICAgICAgIGlmIChmaWx0ZXJGbi50eXBlID09PSAnbnVtYmVyJykgewogICAgICAgICAgICAgICAgICBjb25zdCBpZHggPSBmaWx0ZXJGbihjb250ZXh0KTsKICAgICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBmaWx0ZXJUYXJnZXRbaWR4IDwgMCA/IGZpbHRlclRhcmdldC5sZW5ndGggKyBpZHggOiBpZHggLSAxXTsKICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIC8vIGFbdHJ1ZV0KICAgICAgICAgICAgICBpZiAoZmlsdGVyRm4udHlwZSA9PT0gJ2Jvb2xlYW4nKSB7CiAgICAgICAgICAgICAgICAgIGlmIChmaWx0ZXJGbihjb250ZXh0KSkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpbHRlclRhcmdldDsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbXTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoZmlsdGVyRm4udHlwZSA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBmaWx0ZXJGbihjb250ZXh0KTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpbHRlclRhcmdldC5maWx0ZXIoZWwgPT4gZWwgPT09IHZhbHVlKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgLy8gYVt0ZXN0XQogICAgICAgICAgICAgIHJldHVybiBmaWx0ZXJUYXJnZXQubWFwKGVsID0+IHsKICAgICAgICAgICAgICAgICAgY29uc3QgaXRlcmF0aW9uQ29udGV4dCA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBjb250ZXh0KSwgeyBpdGVtOiBlbCB9KSwgZWwpOwogICAgICAgICAgICAgICAgICBsZXQgcmVzdWx0ID0gZmlsdGVyRm4oaXRlcmF0aW9uQ29udGV4dCk7CiAgICAgICAgICAgICAgICAgIC8vIHRlc3QgaXMgZm4odmFsKSA9PiBib29sZWFuIFNpbXBsZVVuYXJ5VGVzdAogICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlc3VsdCA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0KGVsKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgUmFuZ2UpIHsKICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdC5pbmNsdWRlcyhlbCk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gdHJ1ZSkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgICAgICAgfSkuZmlsdGVyKGlzVHJ1dGh5KTsKICAgICAgICAgIH07CiAgICAgICAgICBjYXNlICdTaW1wbGVQb3NpdGl2ZVVuYXJ5VGVzdCc6IHJldHVybiB0YWcoKGNvbnRleHQpID0+IHsKICAgICAgICAgICAgICAvLyA8SW50ZXJ2YWw+CiAgICAgICAgICAgICAgaWYgKGFyZ3MubGVuZ3RoID09PSAxKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBhcmdzWzBdKGNvbnRleHQpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAvLyA8Q29tcGFyZU9wPiA8RXhwcj4KICAgICAgICAgICAgICByZXR1cm4gYXJnc1swXShjb250ZXh0KShhcmdzWzFdKGNvbnRleHQpKTsKICAgICAgICAgIH0sICd0ZXN0Jyk7CiAgICAgICAgICBjYXNlICdMaXN0JzogcmV0dXJuIChjb250ZXh0KSA9PiB7CiAgICAgICAgICAgICAgcmV0dXJuIGFyZ3Muc2xpY2UoMSwgLTEpLm1hcChhcmcgPT4gYXJnKGNvbnRleHQpKTsKICAgICAgICAgIH07CiAgICAgICAgICBjYXNlICdJbnRlcnZhbCc6IHJldHVybiB0YWcoKGNvbnRleHQpID0+IHsKICAgICAgICAgICAgICBjb25zdCBsZWZ0ID0gYXJnc1sxXShjb250ZXh0KTsKICAgICAgICAgICAgICBjb25zdCByaWdodCA9IGFyZ3NbMl0oY29udGV4dCk7CiAgICAgICAgICAgICAgY29uc3Qgc3RhcnRJbmNsdWRlZCA9IGxlZnQgIT09IG51bGwgJiYgYXJnc1swXSA9PT0gJ1snOwogICAgICAgICAgICAgIGNvbnN0IGVuZEluY2x1ZGVkID0gcmlnaHQgIT09IG51bGwgJiYgYXJnc1szXSA9PT0gJ10nOwogICAgICAgICAgICAgIHJldHVybiBjcmVhdGVSYW5nZShsZWZ0LCByaWdodCwgc3RhcnRJbmNsdWRlZCwgZW5kSW5jbHVkZWQpOwogICAgICAgICAgfSwgVGVzdCgnYm9vbGVhbicpKTsKICAgICAgICAgIGNhc2UgJ1Bvc2l0aXZlVW5hcnlUZXN0cyc6CiAgICAgICAgICBjYXNlICdFeHByZXNzaW9ucyc6IHJldHVybiAoY29udGV4dCkgPT4gewogICAgICAgICAgICAgIHJldHVybiBhcmdzLm1hcChhID0+IGEoY29udGV4dCkpOwogICAgICAgICAgfTsKICAgICAgICAgIGNhc2UgJ1VuYXJ5VGVzdHMnOiByZXR1cm4gKGNvbnRleHQpID0+IHsKICAgICAgICAgICAgICByZXR1cm4gKHZhbHVlID0gbnVsbCkgPT4gewogICAgICAgICAgICAgICAgICBjb25zdCBuZWdhdGUgPSBhcmdzWzBdID09PSAnbm90JzsKICAgICAgICAgICAgICAgICAgY29uc3QgdGVzdHMgPSBuZWdhdGUgPyBhcmdzLnNsaWNlKDIsIC0xKSA6IGFyZ3M7CiAgICAgICAgICAgICAgICAgIGNvbnN0IG1hdGNoZXMgPSB0ZXN0cy5tYXAodGVzdCA9PiB0ZXN0KGNvbnRleHQpKS5mbGF0KDEpLm1hcCh0ZXN0ID0+IHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0FycmF5JDEodGVzdCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVzdC5pbmNsdWRlcyh2YWx1ZSk7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICBpZiAodGVzdCA9PT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0ZXN0ID09PSAnYm9vbGVhbicpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVzdDsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb21wYXJlVmFsdWUodGVzdCwgdmFsdWUpOwogICAgICAgICAgICAgICAgICB9KS5yZWR1Y2UoY29tYmluZVJlc3VsdCwgdW5kZWZpbmVkKTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIG1hdGNoZXMgPT09IG51bGwgPyBudWxsIDogKG5lZ2F0ZSA/ICFtYXRjaGVzIDogbWF0Y2hlcyk7CiAgICAgICAgICAgICAgfTsKICAgICAgICAgIH07CiAgICAgICAgICBkZWZhdWx0OiByZXR1cm4gbm9kZS5uYW1lOwogICAgICB9CiAgfQogIGZ1bmN0aW9uIGdldEJ1aWx0aW4obmFtZSwgX2NvbnRleHQpIHsKICAgICAgcmV0dXJuIGdldEZyb21Db250ZXh0KG5hbWUsIGJ1aWx0aW5zKTsKICB9CiAgZnVuY3Rpb24gZXh0cmFjdFZhbHVlKGNvbnRleHQsIHByb3AsIF90YXJnZXQpIHsKICAgICAgY29uc3QgdGFyZ2V0ID0gX3RhcmdldChjb250ZXh0KTsKICAgICAgaWYgKFsnbGlzdCcsICdyYW5nZSddLmluY2x1ZGVzKGdldFR5cGUodGFyZ2V0KSkpIHsKICAgICAgICAgIHJldHVybiB0YXJnZXQubWFwKHQgPT4gKHsgW3Byb3BdOiB0IH0pKTsKICAgICAgfQogICAgICByZXR1cm4gbnVsbDsKICB9CiAgZnVuY3Rpb24gY29tcGFyZUluKHZhbHVlLCB0ZXN0cykgewogICAgICBpZiAoIWlzQXJyYXkkMSh0ZXN0cykpIHsKICAgICAgICAgIGlmIChnZXRUeXBlKHRlc3RzKSA9PT0gJ25pbCcpIHsKICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgIH0KICAgICAgICAgIHRlc3RzID0gW3Rlc3RzXTsKICAgICAgfQogICAgICByZXR1cm4gdGVzdHMuc29tZSh0ZXN0ID0+IGNvbXBhcmVWYWx1ZSh0ZXN0LCB2YWx1ZSkpOwogIH0KICBmdW5jdGlvbiBjb21wYXJlVmFsdWUodGVzdCwgdmFsdWUpIHsKICAgICAgaWYgKHR5cGVvZiB0ZXN0ID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICByZXR1cm4gdGVzdCh2YWx1ZSk7CiAgICAgIH0KICAgICAgaWYgKHRlc3QgaW5zdGFuY2VvZiBSYW5nZSkgewogICAgICAgICAgcmV0dXJuIHRlc3QuaW5jbHVkZXModmFsdWUpOwogICAgICB9CiAgICAgIHJldHVybiBlcXVhbHModGVzdCwgdmFsdWUpOwogIH0KICBjb25zdCBjaGFycyA9IEFycmF5LmZyb20oJ2FiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVonKTsKICBmdW5jdGlvbiBpc1R5cGVkKHR5cGUsIHZhbHVlcykgewogICAgICByZXR1cm4gKHZhbHVlcy5zb21lKGUgPT4gZ2V0VHlwZShlKSA9PT0gdHlwZSkgJiYKICAgICAgICAgIHZhbHVlcy5ldmVyeShlID0+IGUgPT09IG51bGwgfHwgZ2V0VHlwZShlKSA9PT0gdHlwZSkpOwogIH0KICBmdW5jdGlvbiBjcmVhdGVSYW5nZShzdGFydCwgZW5kLCBzdGFydEluY2x1ZGVkID0gdHJ1ZSwgZW5kSW5jbHVkZWQgPSB0cnVlKSB7CiAgICAgIGlmIChpc1R5cGVkKCdzdHJpbmcnLCBbc3RhcnQsIGVuZF0pKSB7CiAgICAgICAgICByZXR1cm4gY3JlYXRlU3RyaW5nUmFuZ2Uoc3RhcnQsIGVuZCwgc3RhcnRJbmNsdWRlZCwgZW5kSW5jbHVkZWQpOwogICAgICB9CiAgICAgIGlmIChpc1R5cGVkKCdudW1iZXInLCBbc3RhcnQsIGVuZF0pKSB7CiAgICAgICAgICByZXR1cm4gY3JlYXRlTnVtYmVyUmFuZ2Uoc3RhcnQsIGVuZCwgc3RhcnRJbmNsdWRlZCwgZW5kSW5jbHVkZWQpOwogICAgICB9CiAgICAgIGlmIChpc1R5cGVkKCdkdXJhdGlvbicsIFtzdGFydCwgZW5kXSkpIHsKICAgICAgICAgIHRocm93IG5vdEltcGxlbWVudGVkKCdyYW5nZTxkdXJhdGlvbj4nKTsKICAgICAgfQogICAgICBpZiAoaXNUeXBlZCgndGltZScsIFtzdGFydCwgZW5kXSkpIHsKICAgICAgICAgIHRocm93IG5vdEltcGxlbWVudGVkKCdyYW5nZTx0aW1lPicpOwogICAgICB9CiAgICAgIGlmIChpc1R5cGVkKCdkYXRlIHRpbWUnLCBbc3RhcnQsIGVuZF0pKSB7CiAgICAgICAgICB0aHJvdyBub3RJbXBsZW1lbnRlZCgncmFuZ2U8ZGF0ZSBhbmQgdGltZT4nKTsKICAgICAgfQogICAgICBpZiAoaXNUeXBlZCgnZGF0ZScsIFtzdGFydCwgZW5kXSkpIHsKICAgICAgICAgIHRocm93IG5vdEltcGxlbWVudGVkKCdyYW5nZTxkYXRlPicpOwogICAgICB9CiAgICAgIHRocm93IG5ldyBFcnJvcihgdW5zdXBwb3J0ZWQgcmFuZ2U6ICR7c3RhcnR9Li4ke2VuZH1gKTsKICB9CiAgZnVuY3Rpb24gbm9vcE1hcCgpIHsKICAgICAgcmV0dXJuICgpID0+IHsKICAgICAgICAgIHRocm93IG5ldyBFcnJvcigndW5zdXBwb3J0ZWQgcmFuZ2Ugb3BlcmF0aW9uOiBtYXAnKTsKICAgICAgfTsKICB9CiAgZnVuY3Rpb24gdmFsdWVzTWFwKHZhbHVlcykgewogICAgICByZXR1cm4gKGZuKSA9PiB2YWx1ZXMubWFwKGZuKTsKICB9CiAgZnVuY3Rpb24gdmFsdWVzSW5jbHVkZXModmFsdWVzKSB7CiAgICAgIHJldHVybiAodmFsdWUpID0+IHZhbHVlcy5pbmNsdWRlcyh2YWx1ZSk7CiAgfQogIGZ1bmN0aW9uIG51bWJlck1hcChzdGFydCwgZW5kLCBzdGFydEluY2x1ZGVkLCBlbmRJbmNsdWRlZCkgewogICAgICBjb25zdCBkaXJlY3Rpb24gPSBzdGFydCA+IGVuZCA/IC0xIDogMTsKICAgICAgcmV0dXJuIChmbikgPT4gewogICAgICAgICAgY29uc3QgcmVzdWx0ID0gW107CiAgICAgICAgICBmb3IgKGxldCBpID0gc3RhcnQ7OyBpICs9IGRpcmVjdGlvbikgewogICAgICAgICAgICAgIGlmIChpID09PSAwICYmICFzdGFydEluY2x1ZGVkKSB7CiAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoaSA9PT0gZW5kICYmICFlbmRJbmNsdWRlZCkgewogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcmVzdWx0LnB1c2goZm4oaSkpOwogICAgICAgICAgICAgIGlmIChpID09PSBlbmQpIHsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgfTsKICB9CiAgZnVuY3Rpb24gaW5jbHVkZXNTdGFydChuLCBpbmNsdXNpdmUpIHsKICAgICAgaWYgKGluY2x1c2l2ZSkgewogICAgICAgICAgcmV0dXJuICh2YWx1ZSkgPT4gbiA8PSB2YWx1ZTsKICAgICAgfQogICAgICBlbHNlIHsKICAgICAgICAgIHJldHVybiAodmFsdWUpID0+IG4gPCB2YWx1ZTsKICAgICAgfQogIH0KICBmdW5jdGlvbiBpbmNsdWRlc0VuZChuLCBpbmNsdXNpdmUpIHsKICAgICAgaWYgKGluY2x1c2l2ZSkgewogICAgICAgICAgcmV0dXJuICh2YWx1ZSkgPT4gbiA+PSB2YWx1ZTsKICAgICAgfQogICAgICBlbHNlIHsKICAgICAgICAgIHJldHVybiAodmFsdWUpID0+IG4gPiB2YWx1ZTsKICAgICAgfQogIH0KICBmdW5jdGlvbiBhbnlJbmNsdWRlcyhzdGFydCwgZW5kLCBzdGFydEluY2x1ZGVkLCBlbmRJbmNsdWRlZCkgewogICAgICBsZXQgdGVzdHMgPSBbXTsKICAgICAgaWYgKHN0YXJ0ICE9PSBudWxsICYmIGVuZCAhPT0gbnVsbCkgewogICAgICAgICAgaWYgKHN0YXJ0ID4gZW5kKSB7CiAgICAgICAgICAgICAgdGVzdHMgPSBbCiAgICAgICAgICAgICAgICAgIGluY2x1ZGVzU3RhcnQoZW5kLCBlbmRJbmNsdWRlZCksCiAgICAgICAgICAgICAgICAgIGluY2x1ZGVzRW5kKHN0YXJ0LCBzdGFydEluY2x1ZGVkKQogICAgICAgICAgICAgIF07CiAgICAgICAgICB9CiAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICB0ZXN0cyA9IFsKICAgICAgICAgICAgICAgICAgaW5jbHVkZXNTdGFydChzdGFydCwgc3RhcnRJbmNsdWRlZCksCiAgICAgICAgICAgICAgICAgIGluY2x1ZGVzRW5kKGVuZCwgZW5kSW5jbHVkZWQpCiAgICAgICAgICAgICAgXTsKICAgICAgICAgIH0KICAgICAgfQogICAgICBlbHNlIGlmIChlbmQgIT09IG51bGwpIHsKICAgICAgICAgIHRlc3RzID0gWwogICAgICAgICAgICAgIGluY2x1ZGVzRW5kKGVuZCwgZW5kSW5jbHVkZWQpCiAgICAgICAgICBdOwogICAgICB9CiAgICAgIGVsc2UgaWYgKHN0YXJ0ICE9PSBudWxsKSB7CiAgICAgICAgICB0ZXN0cyA9IFsKICAgICAgICAgICAgICBpbmNsdWRlc1N0YXJ0KHN0YXJ0LCBzdGFydEluY2x1ZGVkKQogICAgICAgICAgXTsKICAgICAgfQogICAgICByZXR1cm4gKHZhbHVlKSA9PiB0ZXN0cy5ldmVyeSh0ID0+IHQodmFsdWUpKTsKICB9CiAgZnVuY3Rpb24gY3JlYXRlU3RyaW5nUmFuZ2Uoc3RhcnQsIGVuZCwgc3RhcnRJbmNsdWRlZCA9IHRydWUsIGVuZEluY2x1ZGVkID0gdHJ1ZSkgewogICAgICBpZiAoc3RhcnQgIT09IG51bGwgJiYgIWNoYXJzLmluY2x1ZGVzKHN0YXJ0KSkgewogICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdpbGxlZ2FsIHJhbmdlIHN0YXJ0OiAnICsgc3RhcnQpOwogICAgICB9CiAgICAgIGlmIChlbmQgIT09IG51bGwgJiYgIWNoYXJzLmluY2x1ZGVzKGVuZCkpIHsKICAgICAgICAgIHRocm93IG5ldyBFcnJvcignaWxsZWdhbCByYW5nZSBlbmQ6ICcgKyBlbmQpOwogICAgICB9CiAgICAgIGxldCB2YWx1ZXM7CiAgICAgIGlmIChzdGFydCAhPT0gbnVsbCAmJiBlbmQgIT09IG51bGwpIHsKICAgICAgICAgIGxldCBzdGFydElkeCA9IGNoYXJzLmluZGV4T2Yoc3RhcnQpOwogICAgICAgICAgbGV0IGVuZElkeCA9IGNoYXJzLmluZGV4T2YoZW5kKTsKICAgICAgICAgIGNvbnN0IGRpcmVjdGlvbiA9IHN0YXJ0SWR4ID4gZW5kSWR4ID8gLTEgOiAxOwogICAgICAgICAgaWYgKHN0YXJ0SW5jbHVkZWQgPT09IGZhbHNlKSB7CiAgICAgICAgICAgICAgc3RhcnRJZHggKz0gZGlyZWN0aW9uOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGVuZEluY2x1ZGVkID09PSBmYWxzZSkgewogICAgICAgICAgICAgIGVuZElkeCAtPSBkaXJlY3Rpb247CiAgICAgICAgICB9CiAgICAgICAgICB2YWx1ZXMgPSBjaGFycy5zbGljZShzdGFydElkeCwgZW5kSWR4ICsgMSk7CiAgICAgIH0KICAgICAgY29uc3QgbWFwID0gdmFsdWVzID8gdmFsdWVzTWFwKHZhbHVlcykgOiBub29wTWFwKCk7CiAgICAgIGNvbnN0IGluY2x1ZGVzID0gdmFsdWVzID8gdmFsdWVzSW5jbHVkZXModmFsdWVzKSA6IGFueUluY2x1ZGVzKHN0YXJ0LCBlbmQsIHN0YXJ0SW5jbHVkZWQsIGVuZEluY2x1ZGVkKTsKICAgICAgcmV0dXJuIG5ldyBSYW5nZSh7CiAgICAgICAgICBzdGFydCwKICAgICAgICAgIGVuZCwKICAgICAgICAgICdzdGFydCBpbmNsdWRlZCc6IHN0YXJ0SW5jbHVkZWQsCiAgICAgICAgICAnZW5kIGluY2x1ZGVkJzogZW5kSW5jbHVkZWQsCiAgICAgICAgICBtYXAsCiAgICAgICAgICBpbmNsdWRlcwogICAgICB9KTsKICB9CiAgZnVuY3Rpb24gY3JlYXRlTnVtYmVyUmFuZ2Uoc3RhcnQsIGVuZCwgc3RhcnRJbmNsdWRlZCwgZW5kSW5jbHVkZWQpIHsKICAgICAgY29uc3QgbWFwID0gc3RhcnQgIT09IG51bGwgJiYgZW5kICE9PSBudWxsID8gbnVtYmVyTWFwKHN0YXJ0LCBlbmQsIHN0YXJ0SW5jbHVkZWQsIGVuZEluY2x1ZGVkKSA6IG5vb3BNYXAoKTsKICAgICAgY29uc3QgaW5jbHVkZXMgPSBhbnlJbmNsdWRlcyhzdGFydCwgZW5kLCBzdGFydEluY2x1ZGVkLCBlbmRJbmNsdWRlZCk7CiAgICAgIHJldHVybiBuZXcgUmFuZ2UoewogICAgICAgICAgc3RhcnQsCiAgICAgICAgICBlbmQsCiAgICAgICAgICAnc3RhcnQgaW5jbHVkZWQnOiBzdGFydEluY2x1ZGVkLAogICAgICAgICAgJ2VuZCBpbmNsdWRlZCc6IGVuZEluY2x1ZGVkLAogICAgICAgICAgbWFwLAogICAgICAgICAgaW5jbHVkZXMKICAgICAgfSk7CiAgfQogIGZ1bmN0aW9uIGNhcnRlc2lhblByb2R1Y3QoYXJyYXlzKSB7CiAgICAgIGlmIChhcnJheXMuc29tZShhcnIgPT4gZ2V0VHlwZShhcnIpID09PSAnbmlsJykpIHsKICAgICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICAgIGNvbnN0IGYgPSAoYSwgYikgPT4gW10uY29uY2F0KC4uLmEubWFwKGQgPT4gYi5tYXAoZSA9PiBbXS5jb25jYXQoZCwgZSkpKSk7CiAgICAgIGNvbnN0IGNhcnRlc2lhbiA9IChhLCBiLCAuLi5jKSA9PiAoYiA/IGNhcnRlc2lhbihmKGEsIGIpLCAuLi5jKSA6IGEgfHwgW10pOwogICAgICByZXR1cm4gY2FydGVzaWFuKC4uLmFycmF5cyk7CiAgfQogIGZ1bmN0aW9uIGNvYWxlY2Vuc2VUeXBlcyhhLCBiKSB7CiAgICAgIGlmICghYikgewogICAgICAgICAgcmV0dXJuIGEudHlwZTsKICAgICAgfQogICAgICBpZiAoYS50eXBlID09PSBiLnR5cGUpIHsKICAgICAgICAgIHJldHVybiBhLnR5cGU7CiAgICAgIH0KICAgICAgcmV0dXJuICdhbnknOwogIH0KICBmdW5jdGlvbiB0YWcoZm4sIHR5cGUpIHsKICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oZm4sIHsKICAgICAgICAgIHR5cGUsCiAgICAgICAgICB0b1N0cmluZygpIHsKICAgICAgICAgICAgICByZXR1cm4gYFRhZ2dlZEZ1bmN0aW9uWyR7dHlwZX1dICR7RnVuY3Rpb24ucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZm4pfWA7CiAgICAgICAgICB9CiAgICAgIH0pOwogIH0KICBmdW5jdGlvbiBjb21iaW5lUmVzdWx0KHJlc3VsdCwgbWF0Y2gpIHsKICAgICAgaWYgKCFyZXN1bHQpIHsKICAgICAgICAgIHJldHVybiBtYXRjaDsKICAgICAgfQogICAgICByZXR1cm4gcmVzdWx0OwogIH0KICBmdW5jdGlvbiBpc1RydXRoeShvYmopIHsKICAgICAgcmV0dXJuIG9iaiAhPT0gZmFsc2UgJiYgb2JqICE9PSBudWxsOwogIH0KICBmdW5jdGlvbiBUZXN0KHR5cGUpIHsKICAgICAgcmV0dXJuIGBUZXN0PCR7dHlwZX0+YDsKICB9CiAgLyoqCiAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4KICAgKiBAcGFyYW0ge3N0cmluZ1tdfSBbcGFyYW1ldGVyTmFtZXNdCiAgICoKICAgKiBAcmV0dXJuIHtGdW5jdGlvbldyYXBwZXJ9CiAgICovCiAgZnVuY3Rpb24gd3JhcEZ1bmN0aW9uKGZuLCBwYXJhbWV0ZXJOYW1lcyA9IG51bGwpIHsKICAgICAgaWYgKCFmbikgewogICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KICAgICAgaWYgKGZuIGluc3RhbmNlb2YgRnVuY3Rpb25XcmFwcGVyKSB7CiAgICAgICAgICByZXR1cm4gZm47CiAgICAgIH0KICAgICAgaWYgKGZuIGluc3RhbmNlb2YgUmFuZ2UpIHsKICAgICAgICAgIHJldHVybiBuZXcgRnVuY3Rpb25XcmFwcGVyKCh2YWx1ZSkgPT4gZm4uaW5jbHVkZXModmFsdWUpLCBbJ3ZhbHVlJ10pOwogICAgICB9CiAgICAgIHJldHVybiBuZXcgRnVuY3Rpb25XcmFwcGVyKGZuLCBwYXJhbWV0ZXJOYW1lcyB8fCBwYXJzZVBhcmFtZXRlck5hbWVzKGZuKSk7CiAgfQogIGZ1bmN0aW9uIGNvZXJjZVNpbmdsZXRvbih2YWx1ZXMpIHsKICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWVzKSAmJiB2YWx1ZXMubGVuZ3RoID09PSAxKSB7CiAgICAgICAgICByZXR1cm4gdmFsdWVzWzBdOwogICAgICB9CiAgICAgIGVsc2UgewogICAgICAgICAgcmV0dXJuIHZhbHVlczsKICAgICAgfQogIH0KICBmdW5jdGlvbiBwYXJzZVN0cmluZyhzdHIpIHsKICAgICAgaWYgKHN0ci5zdGFydHNXaXRoKCciJykpIHsKICAgICAgICAgIHN0ciA9IHN0ci5zbGljZSgxKTsKICAgICAgfQogICAgICBpZiAoc3RyLmVuZHNXaXRoKCciJykpIHsKICAgICAgICAgIHN0ciA9IHN0ci5zbGljZSgwLCAtMSk7CiAgICAgIH0KICAgICAgcmV0dXJuIHN0ci5yZXBsYWNlKC8oXFwiKXwoXFxcXCl8KFxcdVthLWZBLUYwLTldezUsNn0pfCgoPzpcXHVbYS1mQS1GMC05XXsxLDR9KSspL2lnLCBmdW5jdGlvbiAoc3Vic3RyaW5nLCAuLi5ncm91cHMpIHsKICAgICAgICAgIGNvbnN0IFtxdW90ZXMsIGVzY2FwZSwgY29kZVBvaW50LCBjaGFyQ29kZXNdID0gZ3JvdXBzOwogICAgICAgICAgaWYgKHF1b3RlcykgewogICAgICAgICAgICAgIHJldHVybiAnIic7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoZXNjYXBlKSB7CiAgICAgICAgICAgICAgcmV0dXJuICdcXCc7CiAgICAgICAgICB9CiAgICAgICAgICBjb25zdCBlc2NhcGVQYXR0ZXJuID0gL1xcdShbYS1mQS1GMC05XSspL2lnOwogICAgICAgICAgaWYgKGNvZGVQb2ludCkgewogICAgICAgICAgICAgIGNvbnN0IGNvZGVQb2ludE1hdGNoID0gZXNjYXBlUGF0dGVybi5leGVjKGNvZGVQb2ludCk7CiAgICAgICAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ29kZVBvaW50KHBhcnNlSW50KGNvZGVQb2ludE1hdGNoWzFdLCAxNikpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGNoYXJDb2RlcykgewogICAgICAgICAgICAgIGNvbnN0IGNoYXJzID0gW107CiAgICAgICAgICAgICAgbGV0IGNoYXJDb2RlTWF0Y2g7CiAgICAgICAgICAgICAgd2hpbGUgKChjaGFyQ29kZU1hdGNoID0gZXNjYXBlUGF0dGVybi5leGVjKHN1YnN0cmluZykpICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgICAgIGNoYXJzLnB1c2gocGFyc2VJbnQoY2hhckNvZGVNYXRjaFsxXSwgMTYpKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoLi4uY2hhcnMpOwogICAgICAgICAgfQogICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdpbGxlZ2FsIG1hdGNoJyk7CiAgICAgIH0pOwogIH0KCiAgLyoNCiAgICogIGJpZy5qcyB2Ni4yLjENCiAgICogIEEgc21hbGwsIGZhc3QsIGVhc3ktdG8tdXNlIGxpYnJhcnkgZm9yIGFyYml0cmFyeS1wcmVjaXNpb24gZGVjaW1hbCBhcml0aG1ldGljLg0KICAgKiAgQ29weXJpZ2h0IChjKSAyMDIyIE1pY2hhZWwgTWNsYXVnaGxpbg0KICAgKiAgaHR0cHM6Ly9naXRodWIuY29tL01pa2VNY2wvYmlnLmpzL0xJQ0VOQ0UubWQNCiAgICovDQoNCg0KICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogRURJVEFCTEUgREVGQVVMVFMgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovDQoNCg0KICAgIC8vIFRoZSBkZWZhdWx0IHZhbHVlcyBiZWxvdyBtdXN0IGJlIGludGVnZXJzIHdpdGhpbiB0aGUgc3RhdGVkIHJhbmdlcy4NCg0KICAgIC8qDQogICAgICogVGhlIG1heGltdW0gbnVtYmVyIG9mIGRlY2ltYWwgcGxhY2VzIChEUCkgb2YgdGhlIHJlc3VsdHMgb2Ygb3BlcmF0aW9ucyBpbnZvbHZpbmcgZGl2aXNpb246DQogICAgICogZGl2IGFuZCBzcXJ0LCBhbmQgcG93IHdpdGggbmVnYXRpdmUgZXhwb25lbnRzLg0KICAgICAqLw0KICB2YXIgRFAgPSAyMCwgICAgICAgICAgLy8gMCB0byBNQVhfRFANCg0KICAgIC8qDQogICAgICogVGhlIHJvdW5kaW5nIG1vZGUgKFJNKSB1c2VkIHdoZW4gcm91bmRpbmcgdG8gdGhlIGFib3ZlIGRlY2ltYWwgcGxhY2VzLg0KICAgICAqDQogICAgICogIDAgIFRvd2FyZHMgemVybyAoaS5lLiB0cnVuY2F0ZSwgbm8gcm91bmRpbmcpLiAgICAgICAoUk9VTkRfRE9XTikNCiAgICAgKiAgMSAgVG8gbmVhcmVzdCBuZWlnaGJvdXIuIElmIGVxdWlkaXN0YW50LCByb3VuZCB1cC4gIChST1VORF9IQUxGX1VQKQ0KICAgICAqICAyICBUbyBuZWFyZXN0IG5laWdoYm91ci4gSWYgZXF1aWRpc3RhbnQsIHRvIGV2ZW4uICAgKFJPVU5EX0hBTEZfRVZFTikNCiAgICAgKiAgMyAgQXdheSBmcm9tIHplcm8uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChST1VORF9VUCkNCiAgICAgKi8NCiAgICBSTSA9IDEsICAgICAgICAgICAgIC8vIDAsIDEsIDIgb3IgMw0KDQogICAgLy8gVGhlIG1heGltdW0gdmFsdWUgb2YgRFAgYW5kIEJpZy5EUC4NCiAgICBNQVhfRFAgPSAxRTYsICAgICAgIC8vIDAgdG8gMTAwMDAwMA0KDQogICAgLy8gVGhlIG1heGltdW0gbWFnbml0dWRlIG9mIHRoZSBleHBvbmVudCBhcmd1bWVudCB0byB0aGUgcG93IG1ldGhvZC4NCiAgICBNQVhfUE9XRVIgPSAxRTYsICAgIC8vIDEgdG8gMTAwMDAwMA0KDQogICAgLyoNCiAgICAgKiBUaGUgbmVnYXRpdmUgZXhwb25lbnQgKE5FKSBhdCBhbmQgYmVuZWF0aCB3aGljaCB0b1N0cmluZyByZXR1cm5zIGV4cG9uZW50aWFsIG5vdGF0aW9uLg0KICAgICAqIChKYXZhU2NyaXB0IG51bWJlcnM6IC03KQ0KICAgICAqIC0xMDAwMDAwIGlzIHRoZSBtaW5pbXVtIHJlY29tbWVuZGVkIGV4cG9uZW50IHZhbHVlIG9mIGEgQmlnLg0KICAgICAqLw0KICAgIE5FID0gLTcsICAgICAgICAgICAgLy8gMCB0byAtMTAwMDAwMA0KDQogICAgLyoNCiAgICAgKiBUaGUgcG9zaXRpdmUgZXhwb25lbnQgKFBFKSBhdCBhbmQgYWJvdmUgd2hpY2ggdG9TdHJpbmcgcmV0dXJucyBleHBvbmVudGlhbCBub3RhdGlvbi4NCiAgICAgKiAoSmF2YVNjcmlwdCBudW1iZXJzOiAyMSkNCiAgICAgKiAxMDAwMDAwIGlzIHRoZSBtYXhpbXVtIHJlY29tbWVuZGVkIGV4cG9uZW50IHZhbHVlIG9mIGEgQmlnLCBidXQgdGhpcyBsaW1pdCBpcyBub3QgZW5mb3JjZWQuDQogICAgICovDQogICAgUEUgPSAyMSwgICAgICAgICAgICAvLyAwIHRvIDEwMDAwMDANCg0KICAgIC8qDQogICAgICogV2hlbiB0cnVlLCBhbiBlcnJvciB3aWxsIGJlIHRocm93biBpZiBhIHByaW1pdGl2ZSBudW1iZXIgaXMgcGFzc2VkIHRvIHRoZSBCaWcgY29uc3RydWN0b3IsDQogICAgICogb3IgaWYgdmFsdWVPZiBpcyBjYWxsZWQsIG9yIGlmIHRvTnVtYmVyIGlzIGNhbGxlZCBvbiBhIEJpZyB3aGljaCBjYW5ub3QgYmUgY29udmVydGVkIHRvIGENCiAgICAgKiBwcmltaXRpdmUgbnVtYmVyIHdpdGhvdXQgYSBsb3NzIG9mIHByZWNpc2lvbi4NCiAgICAgKi8NCiAgICBTVFJJQ1QgPSBmYWxzZSwgICAgIC8vIHRydWUgb3IgZmFsc2UNCg0KDQogIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8NCg0KDQogICAgLy8gRXJyb3IgbWVzc2FnZXMuDQogICAgTkFNRSA9ICdbYmlnLmpzXSAnLA0KICAgIElOVkFMSUQgPSBOQU1FICsgJ0ludmFsaWQgJywNCiAgICBJTlZBTElEX0RQID0gSU5WQUxJRCArICdkZWNpbWFsIHBsYWNlcycsDQogICAgSU5WQUxJRF9STSA9IElOVkFMSUQgKyAncm91bmRpbmcgbW9kZScsDQogICAgRElWX0JZX1pFUk8gPSBOQU1FICsgJ0RpdmlzaW9uIGJ5IHplcm8nLA0KDQogICAgLy8gVGhlIHNoYXJlZCBwcm90b3R5cGUgb2JqZWN0Lg0KICAgIFAkMiA9IHt9LA0KICAgIFVOREVGSU5FRCA9IHZvaWQgMCwNCiAgICBOVU1FUklDID0gL14tPyhcZCsoXC5cZCopP3xcLlxkKykoZVsrLV0/XGQrKT8kL2k7DQoNCg0KICAvKg0KICAgKiBDcmVhdGUgYW5kIHJldHVybiBhIEJpZyBjb25zdHJ1Y3Rvci4NCiAgICovDQogIGZ1bmN0aW9uIF9CaWdfKCkgew0KDQogICAgLyoNCiAgICAgKiBUaGUgQmlnIGNvbnN0cnVjdG9yIGFuZCBleHBvcnRlZCBmdW5jdGlvbi4NCiAgICAgKiBDcmVhdGUgYW5kIHJldHVybiBhIG5ldyBpbnN0YW5jZSBvZiBhIEJpZyBudW1iZXIgb2JqZWN0Lg0KICAgICAqDQogICAgICogbiB7bnVtYmVyfHN0cmluZ3xCaWd9IEEgbnVtZXJpYyB2YWx1ZS4NCiAgICAgKi8NCiAgICBmdW5jdGlvbiBCaWcobikgew0KICAgICAgdmFyIHggPSB0aGlzOw0KDQogICAgICAvLyBFbmFibGUgY29uc3RydWN0b3IgdXNhZ2Ugd2l0aG91dCBuZXcuDQogICAgICBpZiAoISh4IGluc3RhbmNlb2YgQmlnKSkgcmV0dXJuIG4gPT09IFVOREVGSU5FRCA/IF9CaWdfKCkgOiBuZXcgQmlnKG4pOw0KDQogICAgICAvLyBEdXBsaWNhdGUuDQogICAgICBpZiAobiBpbnN0YW5jZW9mIEJpZykgew0KICAgICAgICB4LnMgPSBuLnM7DQogICAgICAgIHguZSA9IG4uZTsNCiAgICAgICAgeC5jID0gbi5jLnNsaWNlKCk7DQogICAgICB9IGVsc2Ugew0KICAgICAgICBpZiAodHlwZW9mIG4gIT09ICdzdHJpbmcnKSB7DQogICAgICAgICAgaWYgKEJpZy5zdHJpY3QgPT09IHRydWUgJiYgdHlwZW9mIG4gIT09ICdiaWdpbnQnKSB7DQogICAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoSU5WQUxJRCArICd2YWx1ZScpOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIC8vIE1pbnVzIHplcm8/DQogICAgICAgICAgbiA9IG4gPT09IDAgJiYgMSAvIG4gPCAwID8gJy0wJyA6IFN0cmluZyhuKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHBhcnNlKHgsIG4pOw0KICAgICAgfQ0KDQogICAgICAvLyBSZXRhaW4gYSByZWZlcmVuY2UgdG8gdGhpcyBCaWcgY29uc3RydWN0b3IuDQogICAgICAvLyBTaGFkb3cgQmlnLnByb3RvdHlwZS5jb25zdHJ1Y3RvciB3aGljaCBwb2ludHMgdG8gT2JqZWN0Lg0KICAgICAgeC5jb25zdHJ1Y3RvciA9IEJpZzsNCiAgICB9DQoNCiAgICBCaWcucHJvdG90eXBlID0gUCQyOw0KICAgIEJpZy5EUCA9IERQOw0KICAgIEJpZy5STSA9IFJNOw0KICAgIEJpZy5ORSA9IE5FOw0KICAgIEJpZy5QRSA9IFBFOw0KICAgIEJpZy5zdHJpY3QgPSBTVFJJQ1Q7DQogICAgQmlnLnJvdW5kRG93biA9IDA7DQogICAgQmlnLnJvdW5kSGFsZlVwID0gMTsNCiAgICBCaWcucm91bmRIYWxmRXZlbiA9IDI7DQogICAgQmlnLnJvdW5kVXAgPSAzOw0KDQogICAgcmV0dXJuIEJpZzsNCiAgfQ0KDQoNCiAgLyoNCiAgICogUGFyc2UgdGhlIG51bWJlciBvciBzdHJpbmcgdmFsdWUgcGFzc2VkIHRvIGEgQmlnIGNvbnN0cnVjdG9yLg0KICAgKg0KICAgKiB4IHtCaWd9IEEgQmlnIG51bWJlciBpbnN0YW5jZS4NCiAgICogbiB7bnVtYmVyfHN0cmluZ30gQSBudW1lcmljIHZhbHVlLg0KICAgKi8NCiAgZnVuY3Rpb24gcGFyc2UoeCwgbikgew0KICAgIHZhciBlLCBpLCBubDsNCg0KICAgIGlmICghTlVNRVJJQy50ZXN0KG4pKSB7DQogICAgICB0aHJvdyBFcnJvcihJTlZBTElEICsgJ251bWJlcicpOw0KICAgIH0NCg0KICAgIC8vIERldGVybWluZSBzaWduLg0KICAgIHgucyA9IG4uY2hhckF0KDApID09ICctJyA/IChuID0gbi5zbGljZSgxKSwgLTEpIDogMTsNCg0KICAgIC8vIERlY2ltYWwgcG9pbnQ/DQogICAgaWYgKChlID0gbi5pbmRleE9mKCcuJykpID4gLTEpIG4gPSBuLnJlcGxhY2UoJy4nLCAnJyk7DQoNCiAgICAvLyBFeHBvbmVudGlhbCBmb3JtPw0KICAgIGlmICgoaSA9IG4uc2VhcmNoKC9lL2kpKSA+IDApIHsNCg0KICAgICAgLy8gRGV0ZXJtaW5lIGV4cG9uZW50Lg0KICAgICAgaWYgKGUgPCAwKSBlID0gaTsNCiAgICAgIGUgKz0gK24uc2xpY2UoaSArIDEpOw0KICAgICAgbiA9IG4uc3Vic3RyaW5nKDAsIGkpOw0KICAgIH0gZWxzZSBpZiAoZSA8IDApIHsNCg0KICAgICAgLy8gSW50ZWdlci4NCiAgICAgIGUgPSBuLmxlbmd0aDsNCiAgICB9DQoNCiAgICBubCA9IG4ubGVuZ3RoOw0KDQogICAgLy8gRGV0ZXJtaW5lIGxlYWRpbmcgemVyb3MuDQogICAgZm9yIChpID0gMDsgaSA8IG5sICYmIG4uY2hhckF0KGkpID09ICcwJzspICsraTsNCg0KICAgIGlmIChpID09IG5sKSB7DQoNCiAgICAgIC8vIFplcm8uDQogICAgICB4LmMgPSBbeC5lID0gMF07DQogICAgfSBlbHNlIHsNCg0KICAgICAgLy8gRGV0ZXJtaW5lIHRyYWlsaW5nIHplcm9zLg0KICAgICAgZm9yICg7IG5sID4gMCAmJiBuLmNoYXJBdCgtLW5sKSA9PSAnMCc7KTsNCiAgICAgIHguZSA9IGUgLSBpIC0gMTsNCiAgICAgIHguYyA9IFtdOw0KDQogICAgICAvLyBDb252ZXJ0IHN0cmluZyB0byBhcnJheSBvZiBkaWdpdHMgd2l0aG91dCBsZWFkaW5nL3RyYWlsaW5nIHplcm9zLg0KICAgICAgZm9yIChlID0gMDsgaSA8PSBubDspIHguY1tlKytdID0gK24uY2hhckF0KGkrKyk7DQogICAgfQ0KDQogICAgcmV0dXJuIHg7DQogIH0NCg0KDQogIC8qDQogICAqIFJvdW5kIEJpZyB4IHRvIGEgbWF4aW11bSBvZiBzZCBzaWduaWZpY2FudCBkaWdpdHMgdXNpbmcgcm91bmRpbmcgbW9kZSBybS4NCiAgICoNCiAgICogeCB7QmlnfSBUaGUgQmlnIHRvIHJvdW5kLg0KICAgKiBzZCB7bnVtYmVyfSBTaWduaWZpY2FudCBkaWdpdHM6IGludGVnZXIsIDAgdG8gTUFYX0RQIGluY2x1c2l2ZS4NCiAgICogcm0ge251bWJlcn0gUm91bmRpbmcgbW9kZTogMCAoZG93biksIDEgKGhhbGYtdXApLCAyIChoYWxmLWV2ZW4pIG9yIDMgKHVwKS4NCiAgICogW21vcmVdIHtib29sZWFufSBXaGV0aGVyIHRoZSByZXN1bHQgb2YgZGl2aXNpb24gd2FzIHRydW5jYXRlZC4NCiAgICovDQogIGZ1bmN0aW9uIHJvdW5kKHgsIHNkLCBybSwgbW9yZSkgew0KICAgIHZhciB4YyA9IHguYzsNCg0KICAgIGlmIChybSA9PT0gVU5ERUZJTkVEKSBybSA9IHguY29uc3RydWN0b3IuUk07DQogICAgaWYgKHJtICE9PSAwICYmIHJtICE9PSAxICYmIHJtICE9PSAyICYmIHJtICE9PSAzKSB7DQogICAgICB0aHJvdyBFcnJvcihJTlZBTElEX1JNKTsNCiAgICB9DQoNCiAgICBpZiAoc2QgPCAxKSB7DQogICAgICBtb3JlID0NCiAgICAgICAgcm0gPT09IDMgJiYgKG1vcmUgfHwgISF4Y1swXSkgfHwgc2QgPT09IDAgJiYgKA0KICAgICAgICBybSA9PT0gMSAmJiB4Y1swXSA+PSA1IHx8DQogICAgICAgIHJtID09PSAyICYmICh4Y1swXSA+IDUgfHwgeGNbMF0gPT09IDUgJiYgKG1vcmUgfHwgeGNbMV0gIT09IFVOREVGSU5FRCkpDQogICAgICApOw0KDQogICAgICB4Yy5sZW5ndGggPSAxOw0KDQogICAgICBpZiAobW9yZSkgew0KDQogICAgICAgIC8vIDEsIDAuMSwgMC4wMSwgMC4wMDEsIDAuMDAwMSBldGMuDQogICAgICAgIHguZSA9IHguZSAtIHNkICsgMTsNCiAgICAgICAgeGNbMF0gPSAxOw0KICAgICAgfSBlbHNlIHsNCg0KICAgICAgICAvLyBaZXJvLg0KICAgICAgICB4Y1swXSA9IHguZSA9IDA7DQogICAgICB9DQogICAgfSBlbHNlIGlmIChzZCA8IHhjLmxlbmd0aCkgew0KDQogICAgICAvLyB4Y1tzZF0gaXMgdGhlIGRpZ2l0IGFmdGVyIHRoZSBkaWdpdCB0aGF0IG1heSBiZSByb3VuZGVkIHVwLg0KICAgICAgbW9yZSA9DQogICAgICAgIHJtID09PSAxICYmIHhjW3NkXSA+PSA1IHx8DQogICAgICAgIHJtID09PSAyICYmICh4Y1tzZF0gPiA1IHx8IHhjW3NkXSA9PT0gNSAmJg0KICAgICAgICAgIChtb3JlIHx8IHhjW3NkICsgMV0gIT09IFVOREVGSU5FRCB8fCB4Y1tzZCAtIDFdICYgMSkpIHx8DQogICAgICAgIHJtID09PSAzICYmIChtb3JlIHx8ICEheGNbMF0pOw0KDQogICAgICAvLyBSZW1vdmUgYW55IGRpZ2l0cyBhZnRlciB0aGUgcmVxdWlyZWQgcHJlY2lzaW9uLg0KICAgICAgeGMubGVuZ3RoID0gc2Q7DQoNCiAgICAgIC8vIFJvdW5kIHVwPw0KICAgICAgaWYgKG1vcmUpIHsNCg0KICAgICAgICAvLyBSb3VuZGluZyB1cCBtYXkgbWVhbiB0aGUgcHJldmlvdXMgZGlnaXQgaGFzIHRvIGJlIHJvdW5kZWQgdXAuDQogICAgICAgIGZvciAoOyArK3hjWy0tc2RdID4gOTspIHsNCiAgICAgICAgICB4Y1tzZF0gPSAwOw0KICAgICAgICAgIGlmIChzZCA9PT0gMCkgew0KICAgICAgICAgICAgKyt4LmU7DQogICAgICAgICAgICB4Yy51bnNoaWZ0KDEpOw0KICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIC8vIFJlbW92ZSB0cmFpbGluZyB6ZXJvcy4NCiAgICAgIGZvciAoc2QgPSB4Yy5sZW5ndGg7ICF4Y1stLXNkXTspIHhjLnBvcCgpOw0KICAgIH0NCg0KICAgIHJldHVybiB4Ow0KICB9DQoNCg0KICAvKg0KICAgKiBSZXR1cm4gYSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSB2YWx1ZSBvZiBCaWcgeCBpbiBub3JtYWwgb3IgZXhwb25lbnRpYWwgbm90YXRpb24uDQogICAqIEhhbmRsZXMgUC50b0V4cG9uZW50aWFsLCBQLnRvRml4ZWQsIFAudG9KU09OLCBQLnRvUHJlY2lzaW9uLCBQLnRvU3RyaW5nIGFuZCBQLnZhbHVlT2YuDQogICAqLw0KICBmdW5jdGlvbiBzdHJpbmdpZnkoeCwgZG9FeHBvbmVudGlhbCwgaXNOb256ZXJvKSB7DQogICAgdmFyIGUgPSB4LmUsDQogICAgICBzID0geC5jLmpvaW4oJycpLA0KICAgICAgbiA9IHMubGVuZ3RoOw0KDQogICAgLy8gRXhwb25lbnRpYWwgbm90YXRpb24/DQogICAgaWYgKGRvRXhwb25lbnRpYWwpIHsNCiAgICAgIHMgPSBzLmNoYXJBdCgwKSArIChuID4gMSA/ICcuJyArIHMuc2xpY2UoMSkgOiAnJykgKyAoZSA8IDAgPyAnZScgOiAnZSsnKSArIGU7DQoNCiAgICAvLyBOb3JtYWwgbm90YXRpb24uDQogICAgfSBlbHNlIGlmIChlIDwgMCkgew0KICAgICAgZm9yICg7ICsrZTspIHMgPSAnMCcgKyBzOw0KICAgICAgcyA9ICcwLicgKyBzOw0KICAgIH0gZWxzZSBpZiAoZSA+IDApIHsNCiAgICAgIGlmICgrK2UgPiBuKSB7DQogICAgICAgIGZvciAoZSAtPSBuOyBlLS07KSBzICs9ICcwJzsNCiAgICAgIH0gZWxzZSBpZiAoZSA8IG4pIHsNCiAgICAgICAgcyA9IHMuc2xpY2UoMCwgZSkgKyAnLicgKyBzLnNsaWNlKGUpOw0KICAgICAgfQ0KICAgIH0gZWxzZSBpZiAobiA+IDEpIHsNCiAgICAgIHMgPSBzLmNoYXJBdCgwKSArICcuJyArIHMuc2xpY2UoMSk7DQogICAgfQ0KDQogICAgcmV0dXJuIHgucyA8IDAgJiYgaXNOb256ZXJvID8gJy0nICsgcyA6IHM7DQogIH0NCg0KDQogIC8vIFByb3RvdHlwZS9pbnN0YW5jZSBtZXRob2RzDQoNCg0KICAvKg0KICAgKiBSZXR1cm4gYSBuZXcgQmlnIHdob3NlIHZhbHVlIGlzIHRoZSBhYnNvbHV0ZSB2YWx1ZSBvZiB0aGlzIEJpZy4NCiAgICovDQogIFAkMi5hYnMgPSBmdW5jdGlvbiAoKSB7DQogICAgdmFyIHggPSBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzKTsNCiAgICB4LnMgPSAxOw0KICAgIHJldHVybiB4Ow0KICB9Ow0KDQoNCiAgLyoNCiAgICogUmV0dXJuIDEgaWYgdGhlIHZhbHVlIG9mIHRoaXMgQmlnIGlzIGdyZWF0ZXIgdGhhbiB0aGUgdmFsdWUgb2YgQmlnIHksDQogICAqICAgICAgIC0xIGlmIHRoZSB2YWx1ZSBvZiB0aGlzIEJpZyBpcyBsZXNzIHRoYW4gdGhlIHZhbHVlIG9mIEJpZyB5LCBvcg0KICAgKiAgICAgICAgMCBpZiB0aGV5IGhhdmUgdGhlIHNhbWUgdmFsdWUuDQogICAqLw0KICBQJDIuY21wID0gZnVuY3Rpb24gKHkpIHsNCiAgICB2YXIgaXNuZWcsDQogICAgICB4ID0gdGhpcywNCiAgICAgIHhjID0geC5jLA0KICAgICAgeWMgPSAoeSA9IG5ldyB4LmNvbnN0cnVjdG9yKHkpKS5jLA0KICAgICAgaSA9IHgucywNCiAgICAgIGogPSB5LnMsDQogICAgICBrID0geC5lLA0KICAgICAgbCA9IHkuZTsNCg0KICAgIC8vIEVpdGhlciB6ZXJvPw0KICAgIGlmICgheGNbMF0gfHwgIXljWzBdKSByZXR1cm4gIXhjWzBdID8gIXljWzBdID8gMCA6IC1qIDogaTsNCg0KICAgIC8vIFNpZ25zIGRpZmZlcj8NCiAgICBpZiAoaSAhPSBqKSByZXR1cm4gaTsNCg0KICAgIGlzbmVnID0gaSA8IDA7DQoNCiAgICAvLyBDb21wYXJlIGV4cG9uZW50cy4NCiAgICBpZiAoayAhPSBsKSByZXR1cm4gayA+IGwgXiBpc25lZyA/IDEgOiAtMTsNCg0KICAgIGogPSAoayA9IHhjLmxlbmd0aCkgPCAobCA9IHljLmxlbmd0aCkgPyBrIDogbDsNCg0KICAgIC8vIENvbXBhcmUgZGlnaXQgYnkgZGlnaXQuDQogICAgZm9yIChpID0gLTE7ICsraSA8IGo7KSB7DQogICAgICBpZiAoeGNbaV0gIT0geWNbaV0pIHJldHVybiB4Y1tpXSA+IHljW2ldIF4gaXNuZWcgPyAxIDogLTE7DQogICAgfQ0KDQogICAgLy8gQ29tcGFyZSBsZW5ndGhzLg0KICAgIHJldHVybiBrID09IGwgPyAwIDogayA+IGwgXiBpc25lZyA/IDEgOiAtMTsNCiAgfTsNCg0KDQogIC8qDQogICAqIFJldHVybiBhIG5ldyBCaWcgd2hvc2UgdmFsdWUgaXMgdGhlIHZhbHVlIG9mIHRoaXMgQmlnIGRpdmlkZWQgYnkgdGhlIHZhbHVlIG9mIEJpZyB5LCByb3VuZGVkLA0KICAgKiBpZiBuZWNlc3NhcnksIHRvIGEgbWF4aW11bSBvZiBCaWcuRFAgZGVjaW1hbCBwbGFjZXMgdXNpbmcgcm91bmRpbmcgbW9kZSBCaWcuUk0uDQogICAqLw0KICBQJDIuZGl2ID0gZnVuY3Rpb24gKHkpIHsNCiAgICB2YXIgeCA9IHRoaXMsDQogICAgICBCaWcgPSB4LmNvbnN0cnVjdG9yLA0KICAgICAgYSA9IHguYywgICAgICAgICAgICAgICAgICAvLyBkaXZpZGVuZA0KICAgICAgYiA9ICh5ID0gbmV3IEJpZyh5KSkuYywgICAvLyBkaXZpc29yDQogICAgICBrID0geC5zID09IHkucyA/IDEgOiAtMSwNCiAgICAgIGRwID0gQmlnLkRQOw0KDQogICAgaWYgKGRwICE9PSB+fmRwIHx8IGRwIDwgMCB8fCBkcCA+IE1BWF9EUCkgew0KICAgICAgdGhyb3cgRXJyb3IoSU5WQUxJRF9EUCk7DQogICAgfQ0KDQogICAgLy8gRGl2aXNvciBpcyB6ZXJvPw0KICAgIGlmICghYlswXSkgew0KICAgICAgdGhyb3cgRXJyb3IoRElWX0JZX1pFUk8pOw0KICAgIH0NCg0KICAgIC8vIERpdmlkZW5kIGlzIDA/IFJldHVybiArLTAuDQogICAgaWYgKCFhWzBdKSB7DQogICAgICB5LnMgPSBrOw0KICAgICAgeS5jID0gW3kuZSA9IDBdOw0KICAgICAgcmV0dXJuIHk7DQogICAgfQ0KDQogICAgdmFyIGJsLCBidCwgbiwgY21wLCByaSwNCiAgICAgIGJ6ID0gYi5zbGljZSgpLA0KICAgICAgYWkgPSBibCA9IGIubGVuZ3RoLA0KICAgICAgYWwgPSBhLmxlbmd0aCwNCiAgICAgIHIgPSBhLnNsaWNlKDAsIGJsKSwgICAvLyByZW1haW5kZXINCiAgICAgIHJsID0gci5sZW5ndGgsDQogICAgICBxID0geSwgICAgICAgICAgICAgICAgLy8gcXVvdGllbnQNCiAgICAgIHFjID0gcS5jID0gW10sDQogICAgICBxaSA9IDAsDQogICAgICBwID0gZHAgKyAocS5lID0geC5lIC0geS5lKSArIDE7ICAgIC8vIHByZWNpc2lvbiBvZiB0aGUgcmVzdWx0DQoNCiAgICBxLnMgPSBrOw0KICAgIGsgPSBwIDwgMCA/IDAgOiBwOw0KDQogICAgLy8gQ3JlYXRlIHZlcnNpb24gb2YgZGl2aXNvciB3aXRoIGxlYWRpbmcgemVyby4NCiAgICBiei51bnNoaWZ0KDApOw0KDQogICAgLy8gQWRkIHplcm9zIHRvIG1ha2UgcmVtYWluZGVyIGFzIGxvbmcgYXMgZGl2aXNvci4NCiAgICBmb3IgKDsgcmwrKyA8IGJsOykgci5wdXNoKDApOw0KDQogICAgZG8gew0KDQogICAgICAvLyBuIGlzIGhvdyBtYW55IHRpbWVzIHRoZSBkaXZpc29yIGdvZXMgaW50byBjdXJyZW50IHJlbWFpbmRlci4NCiAgICAgIGZvciAobiA9IDA7IG4gPCAxMDsgbisrKSB7DQoNCiAgICAgICAgLy8gQ29tcGFyZSBkaXZpc29yIGFuZCByZW1haW5kZXIuDQogICAgICAgIGlmIChibCAhPSAocmwgPSByLmxlbmd0aCkpIHsNCiAgICAgICAgICBjbXAgPSBibCA+IHJsID8gMSA6IC0xOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGZvciAocmkgPSAtMSwgY21wID0gMDsgKytyaSA8IGJsOykgew0KICAgICAgICAgICAgaWYgKGJbcmldICE9IHJbcmldKSB7DQogICAgICAgICAgICAgIGNtcCA9IGJbcmldID4gcltyaV0gPyAxIDogLTE7DQogICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vIElmIGRpdmlzb3IgPCByZW1haW5kZXIsIHN1YnRyYWN0IGRpdmlzb3IgZnJvbSByZW1haW5kZXIuDQogICAgICAgIGlmIChjbXAgPCAwKSB7DQoNCiAgICAgICAgICAvLyBSZW1haW5kZXIgY2FuJ3QgYmUgbW9yZSB0aGFuIDEgZGlnaXQgbG9uZ2VyIHRoYW4gZGl2aXNvci4NCiAgICAgICAgICAvLyBFcXVhbGlzZSBsZW5ndGhzIHVzaW5nIGRpdmlzb3Igd2l0aCBleHRyYSBsZWFkaW5nIHplcm8/DQogICAgICAgICAgZm9yIChidCA9IHJsID09IGJsID8gYiA6IGJ6OyBybDspIHsNCiAgICAgICAgICAgIGlmIChyWy0tcmxdIDwgYnRbcmxdKSB7DQogICAgICAgICAgICAgIHJpID0gcmw7DQogICAgICAgICAgICAgIGZvciAoOyByaSAmJiAhclstLXJpXTspIHJbcmldID0gOTsNCiAgICAgICAgICAgICAgLS1yW3JpXTsNCiAgICAgICAgICAgICAgcltybF0gKz0gMTA7DQogICAgICAgICAgICB9DQogICAgICAgICAgICByW3JsXSAtPSBidFtybF07DQogICAgICAgICAgfQ0KDQogICAgICAgICAgZm9yICg7ICFyWzBdOykgci5zaGlmdCgpOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGJyZWFrOw0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIC8vIEFkZCB0aGUgZGlnaXQgbiB0byB0aGUgcmVzdWx0IGFycmF5Lg0KICAgICAgcWNbcWkrK10gPSBjbXAgPyBuIDogKytuOw0KDQogICAgICAvLyBVcGRhdGUgdGhlIHJlbWFpbmRlci4NCiAgICAgIGlmIChyWzBdICYmIGNtcCkgcltybF0gPSBhW2FpXSB8fCAwOw0KICAgICAgZWxzZSByID0gW2FbYWldXTsNCg0KICAgIH0gd2hpbGUgKChhaSsrIDwgYWwgfHwgclswXSAhPT0gVU5ERUZJTkVEKSAmJiBrLS0pOw0KDQogICAgLy8gTGVhZGluZyB6ZXJvPyBEbyBub3QgcmVtb3ZlIGlmIHJlc3VsdCBpcyBzaW1wbHkgemVybyAocWkgPT0gMSkuDQogICAgaWYgKCFxY1swXSAmJiBxaSAhPSAxKSB7DQoNCiAgICAgIC8vIFRoZXJlIGNhbid0IGJlIG1vcmUgdGhhbiBvbmUgemVyby4NCiAgICAgIHFjLnNoaWZ0KCk7DQogICAgICBxLmUtLTsNCiAgICAgIHAtLTsNCiAgICB9DQoNCiAgICAvLyBSb3VuZD8NCiAgICBpZiAocWkgPiBwKSByb3VuZChxLCBwLCBCaWcuUk0sIHJbMF0gIT09IFVOREVGSU5FRCk7DQoNCiAgICByZXR1cm4gcTsNCiAgfTsNCg0KDQogIC8qDQogICAqIFJldHVybiB0cnVlIGlmIHRoZSB2YWx1ZSBvZiB0aGlzIEJpZyBpcyBlcXVhbCB0byB0aGUgdmFsdWUgb2YgQmlnIHksIG90aGVyd2lzZSByZXR1cm4gZmFsc2UuDQogICAqLw0KICBQJDIuZXEgPSBmdW5jdGlvbiAoeSkgew0KICAgIHJldHVybiB0aGlzLmNtcCh5KSA9PT0gMDsNCiAgfTsNCg0KDQogIC8qDQogICAqIFJldHVybiB0cnVlIGlmIHRoZSB2YWx1ZSBvZiB0aGlzIEJpZyBpcyBncmVhdGVyIHRoYW4gdGhlIHZhbHVlIG9mIEJpZyB5LCBvdGhlcndpc2UgcmV0dXJuDQogICAqIGZhbHNlLg0KICAgKi8NCiAgUCQyLmd0ID0gZnVuY3Rpb24gKHkpIHsNCiAgICByZXR1cm4gdGhpcy5jbXAoeSkgPiAwOw0KICB9Ow0KDQoNCiAgLyoNCiAgICogUmV0dXJuIHRydWUgaWYgdGhlIHZhbHVlIG9mIHRoaXMgQmlnIGlzIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byB0aGUgdmFsdWUgb2YgQmlnIHksIG90aGVyd2lzZQ0KICAgKiByZXR1cm4gZmFsc2UuDQogICAqLw0KICBQJDIuZ3RlID0gZnVuY3Rpb24gKHkpIHsNCiAgICByZXR1cm4gdGhpcy5jbXAoeSkgPiAtMTsNCiAgfTsNCg0KDQogIC8qDQogICAqIFJldHVybiB0cnVlIGlmIHRoZSB2YWx1ZSBvZiB0aGlzIEJpZyBpcyBsZXNzIHRoYW4gdGhlIHZhbHVlIG9mIEJpZyB5LCBvdGhlcndpc2UgcmV0dXJuIGZhbHNlLg0KICAgKi8NCiAgUCQyLmx0ID0gZnVuY3Rpb24gKHkpIHsNCiAgICByZXR1cm4gdGhpcy5jbXAoeSkgPCAwOw0KICB9Ow0KDQoNCiAgLyoNCiAgICogUmV0dXJuIHRydWUgaWYgdGhlIHZhbHVlIG9mIHRoaXMgQmlnIGlzIGxlc3MgdGhhbiBvciBlcXVhbCB0byB0aGUgdmFsdWUgb2YgQmlnIHksIG90aGVyd2lzZQ0KICAgKiByZXR1cm4gZmFsc2UuDQogICAqLw0KICBQJDIubHRlID0gZnVuY3Rpb24gKHkpIHsNCiAgICByZXR1cm4gdGhpcy5jbXAoeSkgPCAxOw0KICB9Ow0KDQoNCiAgLyoNCiAgICogUmV0dXJuIGEgbmV3IEJpZyB3aG9zZSB2YWx1ZSBpcyB0aGUgdmFsdWUgb2YgdGhpcyBCaWcgbWludXMgdGhlIHZhbHVlIG9mIEJpZyB5Lg0KICAgKi8NCiAgUCQyLm1pbnVzID0gUCQyLnN1YiA9IGZ1bmN0aW9uICh5KSB7DQogICAgdmFyIGksIGosIHQsIHhsdHksDQogICAgICB4ID0gdGhpcywNCiAgICAgIEJpZyA9IHguY29uc3RydWN0b3IsDQogICAgICBhID0geC5zLA0KICAgICAgYiA9ICh5ID0gbmV3IEJpZyh5KSkuczsNCg0KICAgIC8vIFNpZ25zIGRpZmZlcj8NCiAgICBpZiAoYSAhPSBiKSB7DQogICAgICB5LnMgPSAtYjsNCiAgICAgIHJldHVybiB4LnBsdXMoeSk7DQogICAgfQ0KDQogICAgdmFyIHhjID0geC5jLnNsaWNlKCksDQogICAgICB4ZSA9IHguZSwNCiAgICAgIHljID0geS5jLA0KICAgICAgeWUgPSB5LmU7DQoNCiAgICAvLyBFaXRoZXIgemVybz8NCiAgICBpZiAoIXhjWzBdIHx8ICF5Y1swXSkgew0KICAgICAgaWYgKHljWzBdKSB7DQogICAgICAgIHkucyA9IC1iOw0KICAgICAgfSBlbHNlIGlmICh4Y1swXSkgew0KICAgICAgICB5ID0gbmV3IEJpZyh4KTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHkucyA9IDE7DQogICAgICB9DQogICAgICByZXR1cm4geTsNCiAgICB9DQoNCiAgICAvLyBEZXRlcm1pbmUgd2hpY2ggaXMgdGhlIGJpZ2dlciBudW1iZXIuIFByZXBlbmQgemVyb3MgdG8gZXF1YWxpc2UgZXhwb25lbnRzLg0KICAgIGlmIChhID0geGUgLSB5ZSkgew0KDQogICAgICBpZiAoeGx0eSA9IGEgPCAwKSB7DQogICAgICAgIGEgPSAtYTsNCiAgICAgICAgdCA9IHhjOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgeWUgPSB4ZTsNCiAgICAgICAgdCA9IHljOw0KICAgICAgfQ0KDQogICAgICB0LnJldmVyc2UoKTsNCiAgICAgIGZvciAoYiA9IGE7IGItLTspIHQucHVzaCgwKTsNCiAgICAgIHQucmV2ZXJzZSgpOw0KICAgIH0gZWxzZSB7DQoNCiAgICAgIC8vIEV4cG9uZW50cyBlcXVhbC4gQ2hlY2sgZGlnaXQgYnkgZGlnaXQuDQogICAgICBqID0gKCh4bHR5ID0geGMubGVuZ3RoIDwgeWMubGVuZ3RoKSA/IHhjIDogeWMpLmxlbmd0aDsNCg0KICAgICAgZm9yIChhID0gYiA9IDA7IGIgPCBqOyBiKyspIHsNCiAgICAgICAgaWYgKHhjW2JdICE9IHljW2JdKSB7DQogICAgICAgICAgeGx0eSA9IHhjW2JdIDwgeWNbYl07DQogICAgICAgICAgYnJlYWs7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQoNCiAgICAvLyB4IDwgeT8gUG9pbnQgeGMgdG8gdGhlIGFycmF5IG9mIHRoZSBiaWdnZXIgbnVtYmVyLg0KICAgIGlmICh4bHR5KSB7DQogICAgICB0ID0geGM7DQogICAgICB4YyA9IHljOw0KICAgICAgeWMgPSB0Ow0KICAgICAgeS5zID0gLXkuczsNCiAgICB9DQoNCiAgICAvKg0KICAgICAqIEFwcGVuZCB6ZXJvcyB0byB4YyBpZiBzaG9ydGVyLiBObyBuZWVkIHRvIGFkZCB6ZXJvcyB0byB5YyBpZiBzaG9ydGVyIGFzIHN1YnRyYWN0aW9uIG9ubHkNCiAgICAgKiBuZWVkcyB0byBzdGFydCBhdCB5Yy5sZW5ndGguDQogICAgICovDQogICAgaWYgKChiID0gKGogPSB5Yy5sZW5ndGgpIC0gKGkgPSB4Yy5sZW5ndGgpKSA+IDApIGZvciAoOyBiLS07KSB4Y1tpKytdID0gMDsNCg0KICAgIC8vIFN1YnRyYWN0IHljIGZyb20geGMuDQogICAgZm9yIChiID0gaTsgaiA+IGE7KSB7DQogICAgICBpZiAoeGNbLS1qXSA8IHljW2pdKSB7DQogICAgICAgIGZvciAoaSA9IGo7IGkgJiYgIXhjWy0taV07KSB4Y1tpXSA9IDk7DQogICAgICAgIC0teGNbaV07DQogICAgICAgIHhjW2pdICs9IDEwOw0KICAgICAgfQ0KDQogICAgICB4Y1tqXSAtPSB5Y1tqXTsNCiAgICB9DQoNCiAgICAvLyBSZW1vdmUgdHJhaWxpbmcgemVyb3MuDQogICAgZm9yICg7IHhjWy0tYl0gPT09IDA7KSB4Yy5wb3AoKTsNCg0KICAgIC8vIFJlbW92ZSBsZWFkaW5nIHplcm9zIGFuZCBhZGp1c3QgZXhwb25lbnQgYWNjb3JkaW5nbHkuDQogICAgZm9yICg7IHhjWzBdID09PSAwOykgew0KICAgICAgeGMuc2hpZnQoKTsNCiAgICAgIC0teWU7DQogICAgfQ0KDQogICAgaWYgKCF4Y1swXSkgew0KDQogICAgICAvLyBuIC0gbiA9ICswDQogICAgICB5LnMgPSAxOw0KDQogICAgICAvLyBSZXN1bHQgbXVzdCBiZSB6ZXJvLg0KICAgICAgeGMgPSBbeWUgPSAwXTsNCiAgICB9DQoNCiAgICB5LmMgPSB4YzsNCiAgICB5LmUgPSB5ZTsNCg0KICAgIHJldHVybiB5Ow0KICB9Ow0KDQoNCiAgLyoNCiAgICogUmV0dXJuIGEgbmV3IEJpZyB3aG9zZSB2YWx1ZSBpcyB0aGUgdmFsdWUgb2YgdGhpcyBCaWcgbW9kdWxvIHRoZSB2YWx1ZSBvZiBCaWcgeS4NCiAgICovDQogIFAkMi5tb2QgPSBmdW5jdGlvbiAoeSkgew0KICAgIHZhciB5Z3R4LA0KICAgICAgeCA9IHRoaXMsDQogICAgICBCaWcgPSB4LmNvbnN0cnVjdG9yLA0KICAgICAgYSA9IHgucywNCiAgICAgIGIgPSAoeSA9IG5ldyBCaWcoeSkpLnM7DQoNCiAgICBpZiAoIXkuY1swXSkgew0KICAgICAgdGhyb3cgRXJyb3IoRElWX0JZX1pFUk8pOw0KICAgIH0NCg0KICAgIHgucyA9IHkucyA9IDE7DQogICAgeWd0eCA9IHkuY21wKHgpID09IDE7DQogICAgeC5zID0gYTsNCiAgICB5LnMgPSBiOw0KDQogICAgaWYgKHlndHgpIHJldHVybiBuZXcgQmlnKHgpOw0KDQogICAgYSA9IEJpZy5EUDsNCiAgICBiID0gQmlnLlJNOw0KICAgIEJpZy5EUCA9IEJpZy5STSA9IDA7DQogICAgeCA9IHguZGl2KHkpOw0KICAgIEJpZy5EUCA9IGE7DQogICAgQmlnLlJNID0gYjsNCg0KICAgIHJldHVybiB0aGlzLm1pbnVzKHgudGltZXMoeSkpOw0KICB9Ow0KDQoNCiAgLyoNCiAgICogUmV0dXJuIGEgbmV3IEJpZyB3aG9zZSB2YWx1ZSBpcyB0aGUgdmFsdWUgb2YgdGhpcyBCaWcgbmVnYXRlZC4NCiAgICovDQogIFAkMi5uZWcgPSBmdW5jdGlvbiAoKSB7DQogICAgdmFyIHggPSBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzKTsNCiAgICB4LnMgPSAteC5zOw0KICAgIHJldHVybiB4Ow0KICB9Ow0KDQoNCiAgLyoNCiAgICogUmV0dXJuIGEgbmV3IEJpZyB3aG9zZSB2YWx1ZSBpcyB0aGUgdmFsdWUgb2YgdGhpcyBCaWcgcGx1cyB0aGUgdmFsdWUgb2YgQmlnIHkuDQogICAqLw0KICBQJDIucGx1cyA9IFAkMi5hZGQgPSBmdW5jdGlvbiAoeSkgew0KICAgIHZhciBlLCBrLCB0LA0KICAgICAgeCA9IHRoaXMsDQogICAgICBCaWcgPSB4LmNvbnN0cnVjdG9yOw0KDQogICAgeSA9IG5ldyBCaWcoeSk7DQoNCiAgICAvLyBTaWducyBkaWZmZXI/DQogICAgaWYgKHgucyAhPSB5LnMpIHsNCiAgICAgIHkucyA9IC15LnM7DQogICAgICByZXR1cm4geC5taW51cyh5KTsNCiAgICB9DQoNCiAgICB2YXIgeGUgPSB4LmUsDQogICAgICB4YyA9IHguYywNCiAgICAgIHllID0geS5lLA0KICAgICAgeWMgPSB5LmM7DQoNCiAgICAvLyBFaXRoZXIgemVybz8NCiAgICBpZiAoIXhjWzBdIHx8ICF5Y1swXSkgew0KICAgICAgaWYgKCF5Y1swXSkgew0KICAgICAgICBpZiAoeGNbMF0pIHsNCiAgICAgICAgICB5ID0gbmV3IEJpZyh4KTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB5LnMgPSB4LnM7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIHJldHVybiB5Ow0KICAgIH0NCg0KICAgIHhjID0geGMuc2xpY2UoKTsNCg0KICAgIC8vIFByZXBlbmQgemVyb3MgdG8gZXF1YWxpc2UgZXhwb25lbnRzLg0KICAgIC8vIE5vdGU6IHJldmVyc2UgZmFzdGVyIHRoYW4gdW5zaGlmdHMuDQogICAgaWYgKGUgPSB4ZSAtIHllKSB7DQogICAgICBpZiAoZSA+IDApIHsNCiAgICAgICAgeWUgPSB4ZTsNCiAgICAgICAgdCA9IHljOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgZSA9IC1lOw0KICAgICAgICB0ID0geGM7DQogICAgICB9DQoNCiAgICAgIHQucmV2ZXJzZSgpOw0KICAgICAgZm9yICg7IGUtLTspIHQucHVzaCgwKTsNCiAgICAgIHQucmV2ZXJzZSgpOw0KICAgIH0NCg0KICAgIC8vIFBvaW50IHhjIHRvIHRoZSBsb25nZXIgYXJyYXkuDQogICAgaWYgKHhjLmxlbmd0aCAtIHljLmxlbmd0aCA8IDApIHsNCiAgICAgIHQgPSB5YzsNCiAgICAgIHljID0geGM7DQogICAgICB4YyA9IHQ7DQogICAgfQ0KDQogICAgZSA9IHljLmxlbmd0aDsNCg0KICAgIC8vIE9ubHkgc3RhcnQgYWRkaW5nIGF0IHljLmxlbmd0aCAtIDEgYXMgdGhlIGZ1cnRoZXIgZGlnaXRzIG9mIHhjIGNhbiBiZSBsZWZ0IGFzIHRoZXkgYXJlLg0KICAgIGZvciAoayA9IDA7IGU7IHhjW2VdICU9IDEwKSBrID0gKHhjWy0tZV0gPSB4Y1tlXSArIHljW2VdICsgaykgLyAxMCB8IDA7DQoNCiAgICAvLyBObyBuZWVkIHRvIGNoZWNrIGZvciB6ZXJvLCBhcyAreCArICt5ICE9IDAgJiYgLXggKyAteSAhPSAwDQoNCiAgICBpZiAoaykgew0KICAgICAgeGMudW5zaGlmdChrKTsNCiAgICAgICsreWU7DQogICAgfQ0KDQogICAgLy8gUmVtb3ZlIHRyYWlsaW5nIHplcm9zLg0KICAgIGZvciAoZSA9IHhjLmxlbmd0aDsgeGNbLS1lXSA9PT0gMDspIHhjLnBvcCgpOw0KDQogICAgeS5jID0geGM7DQogICAgeS5lID0geWU7DQoNCiAgICByZXR1cm4geTsNCiAgfTsNCg0KDQogIC8qDQogICAqIFJldHVybiBhIEJpZyB3aG9zZSB2YWx1ZSBpcyB0aGUgdmFsdWUgb2YgdGhpcyBCaWcgcmFpc2VkIHRvIHRoZSBwb3dlciBuLg0KICAgKiBJZiBuIGlzIG5lZ2F0aXZlLCByb3VuZCB0byBhIG1heGltdW0gb2YgQmlnLkRQIGRlY2ltYWwgcGxhY2VzIHVzaW5nIHJvdW5kaW5nDQogICAqIG1vZGUgQmlnLlJNLg0KICAgKg0KICAgKiBuIHtudW1iZXJ9IEludGVnZXIsIC1NQVhfUE9XRVIgdG8gTUFYX1BPV0VSIGluY2x1c2l2ZS4NCiAgICovDQogIFAkMi5wb3cgPSBmdW5jdGlvbiAobikgew0KICAgIHZhciB4ID0gdGhpcywNCiAgICAgIG9uZSA9IG5ldyB4LmNvbnN0cnVjdG9yKCcxJyksDQogICAgICB5ID0gb25lLA0KICAgICAgaXNuZWcgPSBuIDwgMDsNCg0KICAgIGlmIChuICE9PSB+fm4gfHwgbiA8IC1NQVhfUE9XRVIgfHwgbiA+IE1BWF9QT1dFUikgew0KICAgICAgdGhyb3cgRXJyb3IoSU5WQUxJRCArICdleHBvbmVudCcpOw0KICAgIH0NCg0KICAgIGlmIChpc25lZykgbiA9IC1uOw0KDQogICAgZm9yICg7Oykgew0KICAgICAgaWYgKG4gJiAxKSB5ID0geS50aW1lcyh4KTsNCiAgICAgIG4gPj49IDE7DQogICAgICBpZiAoIW4pIGJyZWFrOw0KICAgICAgeCA9IHgudGltZXMoeCk7DQogICAgfQ0KDQogICAgcmV0dXJuIGlzbmVnID8gb25lLmRpdih5KSA6IHk7DQogIH07DQoNCg0KICAvKg0KICAgKiBSZXR1cm4gYSBuZXcgQmlnIHdob3NlIHZhbHVlIGlzIHRoZSB2YWx1ZSBvZiB0aGlzIEJpZyByb3VuZGVkIHRvIGEgbWF4aW11bSBwcmVjaXNpb24gb2Ygc2QNCiAgICogc2lnbmlmaWNhbnQgZGlnaXRzIHVzaW5nIHJvdW5kaW5nIG1vZGUgcm0sIG9yIEJpZy5STSBpZiBybSBpcyBub3Qgc3BlY2lmaWVkLg0KICAgKg0KICAgKiBzZCB7bnVtYmVyfSBTaWduaWZpY2FudCBkaWdpdHM6IGludGVnZXIsIDEgdG8gTUFYX0RQIGluY2x1c2l2ZS4NCiAgICogcm0/IHtudW1iZXJ9IFJvdW5kaW5nIG1vZGU6IDAgKGRvd24pLCAxIChoYWxmLXVwKSwgMiAoaGFsZi1ldmVuKSBvciAzICh1cCkuDQogICAqLw0KICBQJDIucHJlYyA9IGZ1bmN0aW9uIChzZCwgcm0pIHsNCiAgICBpZiAoc2QgIT09IH5+c2QgfHwgc2QgPCAxIHx8IHNkID4gTUFYX0RQKSB7DQogICAgICB0aHJvdyBFcnJvcihJTlZBTElEICsgJ3ByZWNpc2lvbicpOw0KICAgIH0NCiAgICByZXR1cm4gcm91bmQobmV3IHRoaXMuY29uc3RydWN0b3IodGhpcyksIHNkLCBybSk7DQogIH07DQoNCg0KICAvKg0KICAgKiBSZXR1cm4gYSBuZXcgQmlnIHdob3NlIHZhbHVlIGlzIHRoZSB2YWx1ZSBvZiB0aGlzIEJpZyByb3VuZGVkIHRvIGEgbWF4aW11bSBvZiBkcCBkZWNpbWFsIHBsYWNlcw0KICAgKiB1c2luZyByb3VuZGluZyBtb2RlIHJtLCBvciBCaWcuUk0gaWYgcm0gaXMgbm90IHNwZWNpZmllZC4NCiAgICogSWYgZHAgaXMgbmVnYXRpdmUsIHJvdW5kIHRvIGFuIGludGVnZXIgd2hpY2ggaXMgYSBtdWx0aXBsZSBvZiAxMCoqLWRwLg0KICAgKiBJZiBkcCBpcyBub3Qgc3BlY2lmaWVkLCByb3VuZCB0byAwIGRlY2ltYWwgcGxhY2VzLg0KICAgKg0KICAgKiBkcD8ge251bWJlcn0gSW50ZWdlciwgLU1BWF9EUCB0byBNQVhfRFAgaW5jbHVzaXZlLg0KICAgKiBybT8ge251bWJlcn0gUm91bmRpbmcgbW9kZTogMCAoZG93biksIDEgKGhhbGYtdXApLCAyIChoYWxmLWV2ZW4pIG9yIDMgKHVwKS4NCiAgICovDQogIFAkMi5yb3VuZCA9IGZ1bmN0aW9uIChkcCwgcm0pIHsNCiAgICBpZiAoZHAgPT09IFVOREVGSU5FRCkgZHAgPSAwOw0KICAgIGVsc2UgaWYgKGRwICE9PSB+fmRwIHx8IGRwIDwgLU1BWF9EUCB8fCBkcCA+IE1BWF9EUCkgew0KICAgICAgdGhyb3cgRXJyb3IoSU5WQUxJRF9EUCk7DQogICAgfQ0KICAgIHJldHVybiByb3VuZChuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzKSwgZHAgKyB0aGlzLmUgKyAxLCBybSk7DQogIH07DQoNCg0KICAvKg0KICAgKiBSZXR1cm4gYSBuZXcgQmlnIHdob3NlIHZhbHVlIGlzIHRoZSBzcXVhcmUgcm9vdCBvZiB0aGUgdmFsdWUgb2YgdGhpcyBCaWcsIHJvdW5kZWQsIGlmDQogICAqIG5lY2Vzc2FyeSwgdG8gYSBtYXhpbXVtIG9mIEJpZy5EUCBkZWNpbWFsIHBsYWNlcyB1c2luZyByb3VuZGluZyBtb2RlIEJpZy5STS4NCiAgICovDQogIFAkMi5zcXJ0ID0gZnVuY3Rpb24gKCkgew0KICAgIHZhciByLCBjLCB0LA0KICAgICAgeCA9IHRoaXMsDQogICAgICBCaWcgPSB4LmNvbnN0cnVjdG9yLA0KICAgICAgcyA9IHgucywNCiAgICAgIGUgPSB4LmUsDQogICAgICBoYWxmID0gbmV3IEJpZygnMC41Jyk7DQoNCiAgICAvLyBaZXJvPw0KICAgIGlmICgheC5jWzBdKSByZXR1cm4gbmV3IEJpZyh4KTsNCg0KICAgIC8vIE5lZ2F0aXZlPw0KICAgIGlmIChzIDwgMCkgew0KICAgICAgdGhyb3cgRXJyb3IoTkFNRSArICdObyBzcXVhcmUgcm9vdCcpOw0KICAgIH0NCg0KICAgIC8vIEVzdGltYXRlLg0KICAgIHMgPSBNYXRoLnNxcnQoeCArICcnKTsNCg0KICAgIC8vIE1hdGguc3FydCB1bmRlcmZsb3cvb3ZlcmZsb3c/DQogICAgLy8gUmUtZXN0aW1hdGU6IHBhc3MgeCBjb2VmZmljaWVudCB0byBNYXRoLnNxcnQgYXMgaW50ZWdlciwgdGhlbiBhZGp1c3QgdGhlIHJlc3VsdCBleHBvbmVudC4NCiAgICBpZiAocyA9PT0gMCB8fCBzID09PSAxIC8gMCkgew0KICAgICAgYyA9IHguYy5qb2luKCcnKTsNCiAgICAgIGlmICghKGMubGVuZ3RoICsgZSAmIDEpKSBjICs9ICcwJzsNCiAgICAgIHMgPSBNYXRoLnNxcnQoYyk7DQogICAgICBlID0gKChlICsgMSkgLyAyIHwgMCkgLSAoZSA8IDAgfHwgZSAmIDEpOw0KICAgICAgciA9IG5ldyBCaWcoKHMgPT0gMSAvIDAgPyAnNWUnIDogKHMgPSBzLnRvRXhwb25lbnRpYWwoKSkuc2xpY2UoMCwgcy5pbmRleE9mKCdlJykgKyAxKSkgKyBlKTsNCiAgICB9IGVsc2Ugew0KICAgICAgciA9IG5ldyBCaWcocyArICcnKTsNCiAgICB9DQoNCiAgICBlID0gci5lICsgKEJpZy5EUCArPSA0KTsNCg0KICAgIC8vIE5ld3Rvbi1SYXBoc29uIGl0ZXJhdGlvbi4NCiAgICBkbyB7DQogICAgICB0ID0gcjsNCiAgICAgIHIgPSBoYWxmLnRpbWVzKHQucGx1cyh4LmRpdih0KSkpOw0KICAgIH0gd2hpbGUgKHQuYy5zbGljZSgwLCBlKS5qb2luKCcnKSAhPT0gci5jLnNsaWNlKDAsIGUpLmpvaW4oJycpKTsNCg0KICAgIHJldHVybiByb3VuZChyLCAoQmlnLkRQIC09IDQpICsgci5lICsgMSwgQmlnLlJNKTsNCiAgfTsNCg0KDQogIC8qDQogICAqIFJldHVybiBhIG5ldyBCaWcgd2hvc2UgdmFsdWUgaXMgdGhlIHZhbHVlIG9mIHRoaXMgQmlnIHRpbWVzIHRoZSB2YWx1ZSBvZiBCaWcgeS4NCiAgICovDQogIFAkMi50aW1lcyA9IFAkMi5tdWwgPSBmdW5jdGlvbiAoeSkgew0KICAgIHZhciBjLA0KICAgICAgeCA9IHRoaXMsDQogICAgICBCaWcgPSB4LmNvbnN0cnVjdG9yLA0KICAgICAgeGMgPSB4LmMsDQogICAgICB5YyA9ICh5ID0gbmV3IEJpZyh5KSkuYywNCiAgICAgIGEgPSB4Yy5sZW5ndGgsDQogICAgICBiID0geWMubGVuZ3RoLA0KICAgICAgaSA9IHguZSwNCiAgICAgIGogPSB5LmU7DQoNCiAgICAvLyBEZXRlcm1pbmUgc2lnbiBvZiByZXN1bHQuDQogICAgeS5zID0geC5zID09IHkucyA/IDEgOiAtMTsNCg0KICAgIC8vIFJldHVybiBzaWduZWQgMCBpZiBlaXRoZXIgMC4NCiAgICBpZiAoIXhjWzBdIHx8ICF5Y1swXSkgew0KICAgICAgeS5jID0gW3kuZSA9IDBdOw0KICAgICAgcmV0dXJuIHk7DQogICAgfQ0KDQogICAgLy8gSW5pdGlhbGlzZSBleHBvbmVudCBvZiByZXN1bHQgYXMgeC5lICsgeS5lLg0KICAgIHkuZSA9IGkgKyBqOw0KDQogICAgLy8gSWYgYXJyYXkgeGMgaGFzIGZld2VyIGRpZ2l0cyB0aGFuIHljLCBzd2FwIHhjIGFuZCB5YywgYW5kIGxlbmd0aHMuDQogICAgaWYgKGEgPCBiKSB7DQogICAgICBjID0geGM7DQogICAgICB4YyA9IHljOw0KICAgICAgeWMgPSBjOw0KICAgICAgaiA9IGE7DQogICAgICBhID0gYjsNCiAgICAgIGIgPSBqOw0KICAgIH0NCg0KICAgIC8vIEluaXRpYWxpc2UgY29lZmZpY2llbnQgYXJyYXkgb2YgcmVzdWx0IHdpdGggemVyb3MuDQogICAgZm9yIChjID0gbmV3IEFycmF5KGogPSBhICsgYik7IGotLTspIGNbal0gPSAwOw0KDQogICAgLy8gTXVsdGlwbHkuDQoNCiAgICAvLyBpIGlzIGluaXRpYWxseSB4Yy5sZW5ndGguDQogICAgZm9yIChpID0gYjsgaS0tOykgew0KICAgICAgYiA9IDA7DQoNCiAgICAgIC8vIGEgaXMgeWMubGVuZ3RoLg0KICAgICAgZm9yIChqID0gYSArIGk7IGogPiBpOykgew0KDQogICAgICAgIC8vIEN1cnJlbnQgc3VtIG9mIHByb2R1Y3RzIGF0IHRoaXMgZGlnaXQgcG9zaXRpb24sIHBsdXMgY2FycnkuDQogICAgICAgIGIgPSBjW2pdICsgeWNbaV0gKiB4Y1tqIC0gaSAtIDFdICsgYjsNCiAgICAgICAgY1tqLS1dID0gYiAlIDEwOw0KDQogICAgICAgIC8vIGNhcnJ5DQogICAgICAgIGIgPSBiIC8gMTAgfCAwOw0KICAgICAgfQ0KDQogICAgICBjW2pdID0gYjsNCiAgICB9DQoNCiAgICAvLyBJbmNyZW1lbnQgcmVzdWx0IGV4cG9uZW50IGlmIHRoZXJlIGlzIGEgZmluYWwgY2FycnksIG90aGVyd2lzZSByZW1vdmUgbGVhZGluZyB6ZXJvLg0KICAgIGlmIChiKSArK3kuZTsNCiAgICBlbHNlIGMuc2hpZnQoKTsNCg0KICAgIC8vIFJlbW92ZSB0cmFpbGluZyB6ZXJvcy4NCiAgICBmb3IgKGkgPSBjLmxlbmd0aDsgIWNbLS1pXTspIGMucG9wKCk7DQogICAgeS5jID0gYzsNCg0KICAgIHJldHVybiB5Ow0KICB9Ow0KDQoNCiAgLyoNCiAgICogUmV0dXJuIGEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgdmFsdWUgb2YgdGhpcyBCaWcgaW4gZXhwb25lbnRpYWwgbm90YXRpb24gcm91bmRlZCB0byBkcCBmaXhlZA0KICAgKiBkZWNpbWFsIHBsYWNlcyB1c2luZyByb3VuZGluZyBtb2RlIHJtLCBvciBCaWcuUk0gaWYgcm0gaXMgbm90IHNwZWNpZmllZC4NCiAgICoNCiAgICogZHA/IHtudW1iZXJ9IERlY2ltYWwgcGxhY2VzOiBpbnRlZ2VyLCAwIHRvIE1BWF9EUCBpbmNsdXNpdmUuDQogICAqIHJtPyB7bnVtYmVyfSBSb3VuZGluZyBtb2RlOiAwIChkb3duKSwgMSAoaGFsZi11cCksIDIgKGhhbGYtZXZlbikgb3IgMyAodXApLg0KICAgKi8NCiAgUCQyLnRvRXhwb25lbnRpYWwgPSBmdW5jdGlvbiAoZHAsIHJtKSB7DQogICAgdmFyIHggPSB0aGlzLA0KICAgICAgbiA9IHguY1swXTsNCg0KICAgIGlmIChkcCAhPT0gVU5ERUZJTkVEKSB7DQogICAgICBpZiAoZHAgIT09IH5+ZHAgfHwgZHAgPCAwIHx8IGRwID4gTUFYX0RQKSB7DQogICAgICAgIHRocm93IEVycm9yKElOVkFMSURfRFApOw0KICAgICAgfQ0KICAgICAgeCA9IHJvdW5kKG5ldyB4LmNvbnN0cnVjdG9yKHgpLCArK2RwLCBybSk7DQogICAgICBmb3IgKDsgeC5jLmxlbmd0aCA8IGRwOykgeC5jLnB1c2goMCk7DQogICAgfQ0KDQogICAgcmV0dXJuIHN0cmluZ2lmeSh4LCB0cnVlLCAhIW4pOw0KICB9Ow0KDQoNCiAgLyoNCiAgICogUmV0dXJuIGEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgdmFsdWUgb2YgdGhpcyBCaWcgaW4gbm9ybWFsIG5vdGF0aW9uIHJvdW5kZWQgdG8gZHAgZml4ZWQNCiAgICogZGVjaW1hbCBwbGFjZXMgdXNpbmcgcm91bmRpbmcgbW9kZSBybSwgb3IgQmlnLlJNIGlmIHJtIGlzIG5vdCBzcGVjaWZpZWQuDQogICAqDQogICAqIGRwPyB7bnVtYmVyfSBEZWNpbWFsIHBsYWNlczogaW50ZWdlciwgMCB0byBNQVhfRFAgaW5jbHVzaXZlLg0KICAgKiBybT8ge251bWJlcn0gUm91bmRpbmcgbW9kZTogMCAoZG93biksIDEgKGhhbGYtdXApLCAyIChoYWxmLWV2ZW4pIG9yIDMgKHVwKS4NCiAgICoNCiAgICogKC0wKS50b0ZpeGVkKDApIGlzICcwJywgYnV0ICgtMC4xKS50b0ZpeGVkKDApIGlzICctMCcuDQogICAqICgtMCkudG9GaXhlZCgxKSBpcyAnMC4wJywgYnV0ICgtMC4wMSkudG9GaXhlZCgxKSBpcyAnLTAuMCcuDQogICAqLw0KICBQJDIudG9GaXhlZCA9IGZ1bmN0aW9uIChkcCwgcm0pIHsNCiAgICB2YXIgeCA9IHRoaXMsDQogICAgICBuID0geC5jWzBdOw0KDQogICAgaWYgKGRwICE9PSBVTkRFRklORUQpIHsNCiAgICAgIGlmIChkcCAhPT0gfn5kcCB8fCBkcCA8IDAgfHwgZHAgPiBNQVhfRFApIHsNCiAgICAgICAgdGhyb3cgRXJyb3IoSU5WQUxJRF9EUCk7DQogICAgICB9DQogICAgICB4ID0gcm91bmQobmV3IHguY29uc3RydWN0b3IoeCksIGRwICsgeC5lICsgMSwgcm0pOw0KDQogICAgICAvLyB4LmUgbWF5IGhhdmUgY2hhbmdlZCBpZiB0aGUgdmFsdWUgaXMgcm91bmRlZCB1cC4NCiAgICAgIGZvciAoZHAgPSBkcCArIHguZSArIDE7IHguYy5sZW5ndGggPCBkcDspIHguYy5wdXNoKDApOw0KICAgIH0NCg0KICAgIHJldHVybiBzdHJpbmdpZnkoeCwgZmFsc2UsICEhbik7DQogIH07DQoNCg0KICAvKg0KICAgKiBSZXR1cm4gYSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSB2YWx1ZSBvZiB0aGlzIEJpZy4NCiAgICogUmV0dXJuIGV4cG9uZW50aWFsIG5vdGF0aW9uIGlmIHRoaXMgQmlnIGhhcyBhIHBvc2l0aXZlIGV4cG9uZW50IGVxdWFsIHRvIG9yIGdyZWF0ZXIgdGhhbg0KICAgKiBCaWcuUEUsIG9yIGEgbmVnYXRpdmUgZXhwb25lbnQgZXF1YWwgdG8gb3IgbGVzcyB0aGFuIEJpZy5ORS4NCiAgICogT21pdCB0aGUgc2lnbiBmb3IgbmVnYXRpdmUgemVyby4NCiAgICovDQogIFAkMltTeW1ib2wuZm9yKCdub2RlanMudXRpbC5pbnNwZWN0LmN1c3RvbScpXSA9IFAkMi50b0pTT04gPSBQJDIudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7DQogICAgdmFyIHggPSB0aGlzLA0KICAgICAgQmlnID0geC5jb25zdHJ1Y3RvcjsNCiAgICByZXR1cm4gc3RyaW5naWZ5KHgsIHguZSA8PSBCaWcuTkUgfHwgeC5lID49IEJpZy5QRSwgISF4LmNbMF0pOw0KICB9Ow0KDQoNCiAgLyoNCiAgICogUmV0dXJuIHRoZSB2YWx1ZSBvZiB0aGlzIEJpZyBhcyBhIHByaW1pdHZlIG51bWJlci4NCiAgICovDQogIFAkMi50b051bWJlciA9IGZ1bmN0aW9uICgpIHsNCiAgICB2YXIgbiA9IE51bWJlcihzdHJpbmdpZnkodGhpcywgdHJ1ZSwgdHJ1ZSkpOw0KICAgIGlmICh0aGlzLmNvbnN0cnVjdG9yLnN0cmljdCA9PT0gdHJ1ZSAmJiAhdGhpcy5lcShuLnRvU3RyaW5nKCkpKSB7DQogICAgICB0aHJvdyBFcnJvcihOQU1FICsgJ0ltcHJlY2lzZSBjb252ZXJzaW9uJyk7DQogICAgfQ0KICAgIHJldHVybiBuOw0KICB9Ow0KDQoNCiAgLyoNCiAgICogUmV0dXJuIGEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgdmFsdWUgb2YgdGhpcyBCaWcgcm91bmRlZCB0byBzZCBzaWduaWZpY2FudCBkaWdpdHMgdXNpbmcNCiAgICogcm91bmRpbmcgbW9kZSBybSwgb3IgQmlnLlJNIGlmIHJtIGlzIG5vdCBzcGVjaWZpZWQuDQogICAqIFVzZSBleHBvbmVudGlhbCBub3RhdGlvbiBpZiBzZCBpcyBsZXNzIHRoYW4gdGhlIG51bWJlciBvZiBkaWdpdHMgbmVjZXNzYXJ5IHRvIHJlcHJlc2VudA0KICAgKiB0aGUgaW50ZWdlciBwYXJ0IG9mIHRoZSB2YWx1ZSBpbiBub3JtYWwgbm90YXRpb24uDQogICAqDQogICAqIHNkIHtudW1iZXJ9IFNpZ25pZmljYW50IGRpZ2l0czogaW50ZWdlciwgMSB0byBNQVhfRFAgaW5jbHVzaXZlLg0KICAgKiBybT8ge251bWJlcn0gUm91bmRpbmcgbW9kZTogMCAoZG93biksIDEgKGhhbGYtdXApLCAyIChoYWxmLWV2ZW4pIG9yIDMgKHVwKS4NCiAgICovDQogIFAkMi50b1ByZWNpc2lvbiA9IGZ1bmN0aW9uIChzZCwgcm0pIHsNCiAgICB2YXIgeCA9IHRoaXMsDQogICAgICBCaWcgPSB4LmNvbnN0cnVjdG9yLA0KICAgICAgbiA9IHguY1swXTsNCg0KICAgIGlmIChzZCAhPT0gVU5ERUZJTkVEKSB7DQogICAgICBpZiAoc2QgIT09IH5+c2QgfHwgc2QgPCAxIHx8IHNkID4gTUFYX0RQKSB7DQogICAgICAgIHRocm93IEVycm9yKElOVkFMSUQgKyAncHJlY2lzaW9uJyk7DQogICAgICB9DQogICAgICB4ID0gcm91bmQobmV3IEJpZyh4KSwgc2QsIHJtKTsNCiAgICAgIGZvciAoOyB4LmMubGVuZ3RoIDwgc2Q7KSB4LmMucHVzaCgwKTsNCiAgICB9DQoNCiAgICByZXR1cm4gc3RyaW5naWZ5KHgsIHNkIDw9IHguZSB8fCB4LmUgPD0gQmlnLk5FIHx8IHguZSA+PSBCaWcuUEUsICEhbik7DQogIH07DQoNCg0KICAvKg0KICAgKiBSZXR1cm4gYSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSB2YWx1ZSBvZiB0aGlzIEJpZy4NCiAgICogUmV0dXJuIGV4cG9uZW50aWFsIG5vdGF0aW9uIGlmIHRoaXMgQmlnIGhhcyBhIHBvc2l0aXZlIGV4cG9uZW50IGVxdWFsIHRvIG9yIGdyZWF0ZXIgdGhhbg0KICAgKiBCaWcuUEUsIG9yIGEgbmVnYXRpdmUgZXhwb25lbnQgZXF1YWwgdG8gb3IgbGVzcyB0aGFuIEJpZy5ORS4NCiAgICogSW5jbHVkZSB0aGUgc2lnbiBmb3IgbmVnYXRpdmUgemVyby4NCiAgICovDQogIFAkMi52YWx1ZU9mID0gZnVuY3Rpb24gKCkgew0KICAgIHZhciB4ID0gdGhpcywNCiAgICAgIEJpZyA9IHguY29uc3RydWN0b3I7DQogICAgaWYgKEJpZy5zdHJpY3QgPT09IHRydWUpIHsNCiAgICAgIHRocm93IEVycm9yKE5BTUUgKyAndmFsdWVPZiBkaXNhbGxvd2VkJyk7DQogICAgfQ0KICAgIHJldHVybiBzdHJpbmdpZnkoeCwgeC5lIDw9IEJpZy5ORSB8fCB4LmUgPj0gQmlnLlBFLCB0cnVlKTsNCiAgfTsNCg0KDQogIC8vIEV4cG9ydA0KDQoNCiAgdmFyIEJpZyA9IF9CaWdfKCk7CgogIHZhciBlJDQ9eyIiOlsiPGVtPiIsIjwvZW0+Il0sXzpbIjxzdHJvbmc+IiwiPC9zdHJvbmc+Il0sIioiOlsiPHN0cm9uZz4iLCI8L3N0cm9uZz4iXSwifiI6WyI8cz4iLCI8L3M+Il0sIlxuIjpbIjxiciAvPiJdLCIgIjpbIjxiciAvPiJdLCItIjpbIjxociAvPiJdfTtmdW5jdGlvbiBuJDIoZSl7cmV0dXJuIGUucmVwbGFjZShSZWdFeHAoIl4iKyhlLm1hdGNoKC9eKFx0fCApKy8pfHwiIilbMF0sImdtIiksIiIpfWZ1bmN0aW9uIHIkMihlKXtyZXR1cm4gKGUrIiIpLnJlcGxhY2UoLyIvZywiJnF1b3Q7IikucmVwbGFjZSgvPC9nLCImbHQ7IikucmVwbGFjZSgvPi9nLCImZ3Q7Iil9ZnVuY3Rpb24gdCQyKGEsbyl7dmFyIGMsbCxzLGcscCx1PS8oKD86XnxcbispKD86XG4tLS0rfFwqIFwqKD86IFwqKSspXG4pfCg/Ol5gYGAgKihcdyopXG4oW1xzXFNdKj8pXG5gYGAkKXwoKD86KD86XnxcbispKD86XHR8ICB7Mix9KS4rKStcbiopfCgoPzooPzpefFxuKShbPiorLV18XGQrXC4pXHMrLiopKyl8KD86IVxbKFteXF1dKj8pXF1cKChbXildKz8pXCkpfChcWyl8KFxdKD86XCgoW14pXSs/KVwpKT8pfCg/Oig/Ol58XG4rKShbXlxzXS4qKVxuKC17Myx9fD17Myx9KSg/OlxuK3wkKSl8KD86KD86XnxcbispKCN7MSw2fSlccyooLispKD86XG4rfCQpKXwoPzpgKFteYF0uKj8pYCl8KCAgXG5cbip8XG57Mix9fF9ffFwqXCp8W18qXXx+fil8PChbXj5dKyk+L2dtLGg9W10sbT0iIixpPW98fHt9LGY9MDtmdW5jdGlvbiBkKG4pe3ZhciByPWUkNFtuWzFdfHwiIl0sdD1oW2gubGVuZ3RoLTFdPT1uO3JldHVybiByP3JbMV0/KHQ/aC5wb3AoKTpoLnB1c2gobiksclswfHRdKTpyWzBdOm59ZnVuY3Rpb24gJCgpe2Zvcih2YXIgZT0iIjtoLmxlbmd0aDspZSs9ZChoW2gubGVuZ3RoLTFdKTtyZXR1cm4gZX1mb3IoYT1hLnJlcGxhY2UoL15cWyguKz8pXF06XHMqKC4rKSQvZ20sZnVuY3Rpb24oZSxuLHIpe3JldHVybiBpW24udG9Mb3dlckNhc2UoKV09ciwiIn0pLnJlcGxhY2UoL15cbit8XG4rJC9nLCIiKTtzPXUuZXhlYyhhKTspbD1hLnN1YnN0cmluZyhmLHMuaW5kZXgpLGY9dS5sYXN0SW5kZXgsYz1zWzBdLGwubWF0Y2goL1teXFxdKFxcXFwpKlxcJC8pfHwoKHA9c1szXXx8c1s0XSk/Yz0nPHByZSBjbGFzcz0iY29kZSAnKyhzWzRdPyJwb2V0cnkiOnNbMl0udG9Mb3dlckNhc2UoKSkrJyI+PGNvZGUnKyhzWzJdPycgY2xhc3M9Imxhbmd1YWdlLScrc1syXS50b0xvd2VyQ2FzZSgpKyciJzoiIikrIj4iK24kMihyJDIocCkucmVwbGFjZSgvXlxuK3xcbiskL2csIiIpKSsiPC9jb2RlPjwvcHJlPiI6KHA9c1s2XSk/KHAubWF0Y2goL1wuLykmJihzWzVdPXNbNV0ucmVwbGFjZSgvXlxkKy9nbSwiIikpLGc9dCQyKG4kMihzWzVdLnJlcGxhY2UoL15ccypbPiorLi1dL2dtLCIiKSkpLCI+Ij09cD9wPSJibG9ja3F1b3RlIjoocD1wLm1hdGNoKC9cLi8pPyJvbCI6InVsIixnPWcucmVwbGFjZSgvXiguKikoXG58JCkvZ20sIjxsaT4kMTwvbGk+IikpLGM9IjwiK3ArIj4iK2crIjwvIitwKyI+Iik6c1s4XT9jPSc8aW1nIHNyYz0iJytyJDIoc1s4XSkrJyIgYWx0PSInK3IkMihzWzddKSsnIj4nOnNbMTBdPyhtPW0ucmVwbGFjZSgiPGE+IiwnPGEgaHJlZj0iJytyJDIoc1sxMV18fGlbbC50b0xvd2VyQ2FzZSgpXSkrJyI+JyksYz0kKCkrIjwvYT4iKTpzWzE4XSYmL14oaHR0cHM/fG1haWx0byk6Ly50ZXN0KHNbMThdKT9jPSc8YSBocmVmPSInK3IkMihzWzE4XSkrJyI+JytyJDIoc1sxOF0pKyI8L2E+IjpzWzldP2M9IjxhPiI6c1sxMl18fHNbMTRdP2M9IjwiKyhwPSJoIisoc1sxNF0/c1sxNF0ubGVuZ3RoOnNbMTNdPiI9Ij8xOjIpKSsiPiIrdCQyKHNbMTJdfHxzWzE1XSxpKSsiPC8iK3ArIj4iOnNbMTZdP2M9Ijxjb2RlPiIrciQyKHNbMTZdKSsiPC9jb2RlPiI6KHNbMTddfHxzWzFdKSYmKGM9ZChzWzE3XXx8Ii0tIikpKSxtKz1sLG0rPWM7cmV0dXJuIChtK2Euc3Vic3RyaW5nKGYpKyQoKSkucmVwbGFjZSgvXlxuK3xcbiskL2csIiIpfQoKICB2YXIgY2xhc3NuYW1lcyA9IHtleHBvcnRzOiB7fX07CgogIC8qIQogICAgQ29weXJpZ2h0IChjKSAyMDE4IEplZCBXYXRzb24uCiAgICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UgKE1JVCksIHNlZQogICAgaHR0cDovL2plZHdhdHNvbi5naXRodWIuaW8vY2xhc3NuYW1lcwogICovCgogIChmdW5jdGlvbiAobW9kdWxlKSB7CiAgLyogZ2xvYmFsIGRlZmluZSAqLwoKICAoZnVuY3Rpb24gKCkgewoKICAJdmFyIGhhc093biA9IHt9Lmhhc093blByb3BlcnR5OwoKICAJZnVuY3Rpb24gY2xhc3NOYW1lcygpIHsKICAJCXZhciBjbGFzc2VzID0gW107CgogIAkJZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKICAJCQl2YXIgYXJnID0gYXJndW1lbnRzW2ldOwogIAkJCWlmICghYXJnKSBjb250aW51ZTsKCiAgCQkJdmFyIGFyZ1R5cGUgPSB0eXBlb2YgYXJnOwoKICAJCQlpZiAoYXJnVHlwZSA9PT0gJ3N0cmluZycgfHwgYXJnVHlwZSA9PT0gJ251bWJlcicpIHsKICAJCQkJY2xhc3Nlcy5wdXNoKGFyZyk7CiAgCQkJfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGFyZykpIHsKICAJCQkJaWYgKGFyZy5sZW5ndGgpIHsKICAJCQkJCXZhciBpbm5lciA9IGNsYXNzTmFtZXMuYXBwbHkobnVsbCwgYXJnKTsKICAJCQkJCWlmIChpbm5lcikgewogIAkJCQkJCWNsYXNzZXMucHVzaChpbm5lcik7CiAgCQkJCQl9CiAgCQkJCX0KICAJCQl9IGVsc2UgaWYgKGFyZ1R5cGUgPT09ICdvYmplY3QnKSB7CiAgCQkJCWlmIChhcmcudG9TdHJpbmcgPT09IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcpIHsKICAJCQkJCWZvciAodmFyIGtleSBpbiBhcmcpIHsKICAJCQkJCQlpZiAoaGFzT3duLmNhbGwoYXJnLCBrZXkpICYmIGFyZ1trZXldKSB7CiAgCQkJCQkJCWNsYXNzZXMucHVzaChrZXkpOwogIAkJCQkJCX0KICAJCQkJCX0KICAJCQkJfSBlbHNlIHsKICAJCQkJCWNsYXNzZXMucHVzaChhcmcudG9TdHJpbmcoKSk7CiAgCQkJCX0KICAJCQl9CiAgCQl9CgogIAkJcmV0dXJuIGNsYXNzZXMuam9pbignICcpOwogIAl9CgogIAlpZiAobW9kdWxlLmV4cG9ydHMpIHsKICAJCWNsYXNzTmFtZXMuZGVmYXVsdCA9IGNsYXNzTmFtZXM7CiAgCQltb2R1bGUuZXhwb3J0cyA9IGNsYXNzTmFtZXM7CiAgCX0gZWxzZSB7CiAgCQl3aW5kb3cuY2xhc3NOYW1lcyA9IGNsYXNzTmFtZXM7CiAgCX0KICB9KCkpOwogIH0oY2xhc3NuYW1lcykpOwoKICB2YXIgY2xhc3NOYW1lcyA9IGNsYXNzbmFtZXMuZXhwb3J0czsKCiAgdmFyIG4kMSxsJDIsdSQxLHQkMSxvJDMsciQxLGYkMSxlJDM9e30sYyQxPVtdLHMkMT0vYWNpdHxleCg/OnN8Z3xufHB8JCl8cnBofGdyaWR8b3dzfG1uY3xudHd8aW5lW2NoXXx6b298Xm9yZHxpdGVyYS9pO2Z1bmN0aW9uIGEkMihuLGwpe2Zvcih2YXIgdSBpbiBsKW5bdV09bFt1XTtyZXR1cm4gbn1mdW5jdGlvbiBoJDEobil7dmFyIGw9bi5wYXJlbnROb2RlO2wmJmwucmVtb3ZlQ2hpbGQobik7fWZ1bmN0aW9uIHYkMShsLHUsaSl7dmFyIHQsbyxyLGY9e307Zm9yKHIgaW4gdSkia2V5Ij09cj90PXVbcl06InJlZiI9PXI/bz11W3JdOmZbcl09dVtyXTtpZihhcmd1bWVudHMubGVuZ3RoPjImJihmLmNoaWxkcmVuPWFyZ3VtZW50cy5sZW5ndGg+Mz9uJDEuY2FsbChhcmd1bWVudHMsMik6aSksImZ1bmN0aW9uIj09dHlwZW9mIGwmJm51bGwhPWwuZGVmYXVsdFByb3BzKWZvcihyIGluIGwuZGVmYXVsdFByb3BzKXZvaWQgMD09PWZbcl0mJihmW3JdPWwuZGVmYXVsdFByb3BzW3JdKTtyZXR1cm4geSQxKGwsZix0LG8sbnVsbCl9ZnVuY3Rpb24geSQxKG4saSx0LG8scil7dmFyIGY9e3R5cGU6bixwcm9wczppLGtleTp0LHJlZjpvLF9fazpudWxsLF9fOm51bGwsX19iOjAsX19lOm51bGwsX19kOnZvaWQgMCxfX2M6bnVsbCxfX2g6bnVsbCxjb25zdHJ1Y3Rvcjp2b2lkIDAsX192Om51bGw9PXI/Kyt1JDE6cn07cmV0dXJuIG51bGwhPWwkMi52bm9kZSYmbCQyLnZub2RlKGYpLGZ9ZnVuY3Rpb24gcCQyKCl7cmV0dXJuIHtjdXJyZW50Om51bGx9fWZ1bmN0aW9uIGQkMShuKXtyZXR1cm4gbi5jaGlsZHJlbn1mdW5jdGlvbiBfJDEobixsKXt0aGlzLnByb3BzPW4sdGhpcy5jb250ZXh0PWw7fWZ1bmN0aW9uIGskMihuLGwpe2lmKG51bGw9PWwpcmV0dXJuIG4uX18/ayQyKG4uX18sbi5fXy5fX2suaW5kZXhPZihuKSsxKTpudWxsO2Zvcih2YXIgdTtsPG4uX19rLmxlbmd0aDtsKyspaWYobnVsbCE9KHU9bi5fX2tbbF0pJiZudWxsIT11Ll9fZSlyZXR1cm4gdS5fX2U7cmV0dXJuICJmdW5jdGlvbiI9PXR5cGVvZiBuLnR5cGU/ayQyKG4pOm51bGx9ZnVuY3Rpb24gYiQxKG4pe3ZhciBsLHU7aWYobnVsbCE9KG49bi5fXykmJm51bGwhPW4uX19jKXtmb3Iobi5fX2U9bi5fX2MuYmFzZT1udWxsLGw9MDtsPG4uX19rLmxlbmd0aDtsKyspaWYobnVsbCE9KHU9bi5fX2tbbF0pJiZudWxsIT11Ll9fZSl7bi5fX2U9bi5fX2MuYmFzZT11Ll9fZTticmVha31yZXR1cm4gYiQxKG4pfX1mdW5jdGlvbiBtJDEobil7KCFuLl9fZCYmKG4uX19kPSEwKSYmdCQxLnB1c2gobikmJiFnJDIuX19yKyt8fHIkMSE9PWwkMi5kZWJvdW5jZVJlbmRlcmluZykmJigociQxPWwkMi5kZWJvdW5jZVJlbmRlcmluZyl8fG8kMykoZyQyKTt9ZnVuY3Rpb24gZyQyKCl7Zm9yKHZhciBuO2ckMi5fX3I9dCQxLmxlbmd0aDspbj10JDEuc29ydChmdW5jdGlvbihuLGwpe3JldHVybiBuLl9fdi5fX2ItbC5fX3YuX19ifSksdCQxPVtdLG4uc29tZShmdW5jdGlvbihuKXt2YXIgbCx1LGksdCxvLHI7bi5fX2QmJihvPSh0PShsPW4pLl9fdikuX19lLChyPWwuX19QKSYmKHU9W10sKGk9YSQyKHt9LHQpKS5fX3Y9dC5fX3YrMSxqJDIocix0LGksbC5fX24sdm9pZCAwIT09ci5vd25lclNWR0VsZW1lbnQsbnVsbCE9dC5fX2g/W29dOm51bGwsdSxudWxsPT1vP2skMih0KTpvLHQuX19oKSx6JDEodSx0KSx0Ll9fZSE9byYmYiQxKHQpKSk7fSk7fWZ1bmN0aW9uIHckMihuLGwsdSxpLHQsbyxyLGYscyxhKXt2YXIgaCx2LHAsXyxiLG0sZyx3PWkmJmkuX19rfHxjJDEsQT13Lmxlbmd0aDtmb3IodS5fX2s9W10saD0wO2g8bC5sZW5ndGg7aCsrKWlmKG51bGwhPShfPXUuX19rW2hdPW51bGw9PShfPWxbaF0pfHwiYm9vbGVhbiI9PXR5cGVvZiBfP251bGw6InN0cmluZyI9PXR5cGVvZiBffHwibnVtYmVyIj09dHlwZW9mIF98fCJiaWdpbnQiPT10eXBlb2YgXz95JDEobnVsbCxfLG51bGwsbnVsbCxfKTpBcnJheS5pc0FycmF5KF8pP3kkMShkJDEse2NoaWxkcmVuOl99LG51bGwsbnVsbCxudWxsKTpfLl9fYj4wP3kkMShfLnR5cGUsXy5wcm9wcyxfLmtleSxudWxsLF8uX192KTpfKSl7aWYoXy5fXz11LF8uX19iPXUuX19iKzEsbnVsbD09PShwPXdbaF0pfHxwJiZfLmtleT09cC5rZXkmJl8udHlwZT09PXAudHlwZSl3W2hdPXZvaWQgMDtlbHNlIGZvcih2PTA7djxBO3YrKyl7aWYoKHA9d1t2XSkmJl8ua2V5PT1wLmtleSYmXy50eXBlPT09cC50eXBlKXt3W3ZdPXZvaWQgMDticmVha31wPW51bGw7fWokMihuLF8scD1wfHxlJDMsdCxvLHIsZixzLGEpLGI9Xy5fX2UsKHY9Xy5yZWYpJiZwLnJlZiE9diYmKGd8fChnPVtdKSxwLnJlZiYmZy5wdXNoKHAucmVmLG51bGwsXyksZy5wdXNoKHYsXy5fX2N8fGIsXykpLG51bGwhPWI/KG51bGw9PW0mJihtPWIpLCJmdW5jdGlvbiI9PXR5cGVvZiBfLnR5cGUmJm51bGwhPV8uX19rJiZfLl9faz09PXAuX19rP18uX19kPXM9eCQyKF8scyxuKTpzPVAkMShuLF8scCx3LGIscyksYXx8Im9wdGlvbiIhPT11LnR5cGU/ImZ1bmN0aW9uIj09dHlwZW9mIHUudHlwZSYmKHUuX19kPXMpOm4udmFsdWU9IiIpOnMmJnAuX19lPT1zJiZzLnBhcmVudE5vZGUhPW4mJihzPWskMihwKSk7fWZvcih1Ll9fZT1tLGg9QTtoLS07KW51bGwhPXdbaF0mJigiZnVuY3Rpb24iPT10eXBlb2YgdS50eXBlJiZudWxsIT13W2hdLl9fZSYmd1toXS5fX2U9PXUuX19kJiYodS5fX2Q9ayQyKGksaCsxKSksTiQxKHdbaF0sd1toXSkpO2lmKGcpZm9yKGg9MDtoPGcubGVuZ3RoO2grKylNJDEoZ1toXSxnWysraF0sZ1srK2hdKTt9ZnVuY3Rpb24geCQyKG4sbCx1KXt2YXIgaSx0O2ZvcihpPTA7aTxuLl9fay5sZW5ndGg7aSsrKSh0PW4uX19rW2ldKSYmKHQuX189bixsPSJmdW5jdGlvbiI9PXR5cGVvZiB0LnR5cGU/eCQyKHQsbCx1KTpQJDEodSx0LHQsbi5fX2ssdC5fX2UsbCkpO3JldHVybiBsfWZ1bmN0aW9uIEEkMihuLGwpe3JldHVybiBsPWx8fFtdLG51bGw9PW58fCJib29sZWFuIj09dHlwZW9mIG58fChBcnJheS5pc0FycmF5KG4pP24uc29tZShmdW5jdGlvbihuKXtBJDIobixsKTt9KTpsLnB1c2gobikpLGx9ZnVuY3Rpb24gUCQxKG4sbCx1LGksdCxvKXt2YXIgcixmLGU7aWYodm9pZCAwIT09bC5fX2Qpcj1sLl9fZCxsLl9fZD12b2lkIDA7ZWxzZSBpZihudWxsPT11fHx0IT1vfHxudWxsPT10LnBhcmVudE5vZGUpbjppZihudWxsPT1vfHxvLnBhcmVudE5vZGUhPT1uKW4uYXBwZW5kQ2hpbGQodCkscj1udWxsO2Vsc2Uge2ZvcihmPW8sZT0wOyhmPWYubmV4dFNpYmxpbmcpJiZlPGkubGVuZ3RoO2UrPTIpaWYoZj09dClicmVhayBuO24uaW5zZXJ0QmVmb3JlKHQsbykscj1vO31yZXR1cm4gdm9pZCAwIT09cj9yOnQubmV4dFNpYmxpbmd9ZnVuY3Rpb24gQyQxKG4sbCx1LGksdCl7dmFyIG87Zm9yKG8gaW4gdSkiY2hpbGRyZW4iPT09b3x8ImtleSI9PT1vfHxvIGluIGx8fEgkMShuLG8sbnVsbCx1W29dLGkpO2ZvcihvIGluIGwpdCYmImZ1bmN0aW9uIiE9dHlwZW9mIGxbb118fCJjaGlsZHJlbiI9PT1vfHwia2V5Ij09PW98fCJ2YWx1ZSI9PT1vfHwiY2hlY2tlZCI9PT1vfHx1W29dPT09bFtvXXx8SCQxKG4sbyxsW29dLHVbb10saSk7fWZ1bmN0aW9uICQkMShuLGwsdSl7Ii0iPT09bFswXT9uLnNldFByb3BlcnR5KGwsdSk6bltsXT1udWxsPT11PyIiOiJudW1iZXIiIT10eXBlb2YgdXx8cyQxLnRlc3QobCk/dTp1KyJweCI7fWZ1bmN0aW9uIEgkMShuLGwsdSxpLHQpe3ZhciBvO246aWYoInN0eWxlIj09PWwpaWYoInN0cmluZyI9PXR5cGVvZiB1KW4uc3R5bGUuY3NzVGV4dD11O2Vsc2Uge2lmKCJzdHJpbmciPT10eXBlb2YgaSYmKG4uc3R5bGUuY3NzVGV4dD1pPSIiKSxpKWZvcihsIGluIGkpdSYmbCBpbiB1fHwkJDEobi5zdHlsZSxsLCIiKTtpZih1KWZvcihsIGluIHUpaSYmdVtsXT09PWlbbF18fCQkMShuLnN0eWxlLGwsdVtsXSk7fWVsc2UgaWYoIm8iPT09bFswXSYmIm4iPT09bFsxXSlvPWwhPT0obD1sLnJlcGxhY2UoL0NhcHR1cmUkLywiIikpLGw9bC50b0xvd2VyQ2FzZSgpaW4gbj9sLnRvTG93ZXJDYXNlKCkuc2xpY2UoMik6bC5zbGljZSgyKSxuLmx8fChuLmw9e30pLG4ubFtsK29dPXUsdT9pfHxuLmFkZEV2ZW50TGlzdGVuZXIobCxvP1QkMjpJJDEsbyk6bi5yZW1vdmVFdmVudExpc3RlbmVyKGwsbz9UJDI6SSQxLG8pO2Vsc2UgaWYoImRhbmdlcm91c2x5U2V0SW5uZXJIVE1MIiE9PWwpe2lmKHQpbD1sLnJlcGxhY2UoL3hsaW5rW0g6aF0vLCJoIikucmVwbGFjZSgvc05hbWUkLywicyIpO2Vsc2UgaWYoImhyZWYiIT09bCYmImxpc3QiIT09bCYmImZvcm0iIT09bCYmInRhYkluZGV4IiE9PWwmJiJkb3dubG9hZCIhPT1sJiZsIGluIG4pdHJ5e25bbF09bnVsbD09dT8iIjp1O2JyZWFrIG59Y2F0Y2gobil7fSJmdW5jdGlvbiI9PXR5cGVvZiB1fHwobnVsbCE9dSYmKCExIT09dXx8ImEiPT09bFswXSYmInIiPT09bFsxXSk/bi5zZXRBdHRyaWJ1dGUobCx1KTpuLnJlbW92ZUF0dHJpYnV0ZShsKSk7fX1mdW5jdGlvbiBJJDEobil7dGhpcy5sW24udHlwZSshMV0obCQyLmV2ZW50P2wkMi5ldmVudChuKTpuKTt9ZnVuY3Rpb24gVCQyKG4pe3RoaXMubFtuLnR5cGUrITBdKGwkMi5ldmVudD9sJDIuZXZlbnQobik6bik7fWZ1bmN0aW9uIGokMihuLHUsaSx0LG8scixmLGUsYyl7dmFyIHMsaCx2LHkscCxrLGIsbSxnLHgsQSxQPXUudHlwZTtpZih2b2lkIDAhPT11LmNvbnN0cnVjdG9yKXJldHVybiBudWxsO251bGwhPWkuX19oJiYoYz1pLl9faCxlPXUuX19lPWkuX19lLHUuX19oPW51bGwscj1bZV0pLChzPWwkMi5fX2IpJiZzKHUpO3RyeXtuOmlmKCJmdW5jdGlvbiI9PXR5cGVvZiBQKXtpZihtPXUucHJvcHMsZz0ocz1QLmNvbnRleHRUeXBlKSYmdFtzLl9fY10seD1zP2c/Zy5wcm9wcy52YWx1ZTpzLl9fOnQsaS5fX2M/Yj0oaD11Ll9fYz1pLl9fYykuX189aC5fX0U6KCJwcm90b3R5cGUiaW4gUCYmUC5wcm90b3R5cGUucmVuZGVyP3UuX19jPWg9bmV3IFAobSx4KToodS5fX2M9aD1uZXcgXyQxKG0seCksaC5jb25zdHJ1Y3Rvcj1QLGgucmVuZGVyPU8kMSksZyYmZy5zdWIoaCksaC5wcm9wcz1tLGguc3RhdGV8fChoLnN0YXRlPXt9KSxoLmNvbnRleHQ9eCxoLl9fbj10LHY9aC5fX2Q9ITAsaC5fX2g9W10pLG51bGw9PWguX19zJiYoaC5fX3M9aC5zdGF0ZSksbnVsbCE9UC5nZXREZXJpdmVkU3RhdGVGcm9tUHJvcHMmJihoLl9fcz09aC5zdGF0ZSYmKGguX19zPWEkMih7fSxoLl9fcykpLGEkMihoLl9fcyxQLmdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcyhtLGguX19zKSkpLHk9aC5wcm9wcyxwPWguc3RhdGUsdiludWxsPT1QLmdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcyYmbnVsbCE9aC5jb21wb25lbnRXaWxsTW91bnQmJmguY29tcG9uZW50V2lsbE1vdW50KCksbnVsbCE9aC5jb21wb25lbnREaWRNb3VudCYmaC5fX2gucHVzaChoLmNvbXBvbmVudERpZE1vdW50KTtlbHNlIHtpZihudWxsPT1QLmdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcyYmbSE9PXkmJm51bGwhPWguY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyYmaC5jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG0seCksIWguX19lJiZudWxsIT1oLnNob3VsZENvbXBvbmVudFVwZGF0ZSYmITE9PT1oLnNob3VsZENvbXBvbmVudFVwZGF0ZShtLGguX19zLHgpfHx1Ll9fdj09PWkuX192KXtoLnByb3BzPW0saC5zdGF0ZT1oLl9fcyx1Ll9fdiE9PWkuX192JiYoaC5fX2Q9ITEpLGguX192PXUsdS5fX2U9aS5fX2UsdS5fX2s9aS5fX2ssdS5fX2suZm9yRWFjaChmdW5jdGlvbihuKXtuJiYobi5fXz11KTt9KSxoLl9faC5sZW5ndGgmJmYucHVzaChoKTticmVhayBufW51bGwhPWguY29tcG9uZW50V2lsbFVwZGF0ZSYmaC5jb21wb25lbnRXaWxsVXBkYXRlKG0saC5fX3MseCksbnVsbCE9aC5jb21wb25lbnREaWRVcGRhdGUmJmguX19oLnB1c2goZnVuY3Rpb24oKXtoLmNvbXBvbmVudERpZFVwZGF0ZSh5LHAsayk7fSk7fWguY29udGV4dD14LGgucHJvcHM9bSxoLnN0YXRlPWguX19zLChzPWwkMi5fX3IpJiZzKHUpLGguX19kPSExLGguX192PXUsaC5fX1A9bixzPWgucmVuZGVyKGgucHJvcHMsaC5zdGF0ZSxoLmNvbnRleHQpLGguc3RhdGU9aC5fX3MsbnVsbCE9aC5nZXRDaGlsZENvbnRleHQmJih0PWEkMihhJDIoe30sdCksaC5nZXRDaGlsZENvbnRleHQoKSkpLHZ8fG51bGw9PWguZ2V0U25hcHNob3RCZWZvcmVVcGRhdGV8fChrPWguZ2V0U25hcHNob3RCZWZvcmVVcGRhdGUoeSxwKSksQT1udWxsIT1zJiZzLnR5cGU9PT1kJDEmJm51bGw9PXMua2V5P3MucHJvcHMuY2hpbGRyZW46cyx3JDIobixBcnJheS5pc0FycmF5KEEpP0E6W0FdLHUsaSx0LG8scixmLGUsYyksaC5iYXNlPXUuX19lLHUuX19oPW51bGwsaC5fX2gubGVuZ3RoJiZmLnB1c2goaCksYiYmKGguX19FPWguX189bnVsbCksaC5fX2U9ITE7fWVsc2UgbnVsbD09ciYmdS5fX3Y9PT1pLl9fdj8odS5fX2s9aS5fX2ssdS5fX2U9aS5fX2UpOnUuX19lPUwkMShpLl9fZSx1LGksdCxvLHIsZixjKTsocz1sJDIuZGlmZmVkKSYmcyh1KTt9Y2F0Y2gobil7dS5fX3Y9bnVsbCwoY3x8bnVsbCE9cikmJih1Ll9fZT1lLHUuX19oPSEhYyxyW3IuaW5kZXhPZihlKV09bnVsbCksbCQyLl9fZShuLHUsaSk7fX1mdW5jdGlvbiB6JDEobix1KXtsJDIuX19jJiZsJDIuX19jKHUsbiksbi5zb21lKGZ1bmN0aW9uKHUpe3RyeXtuPXUuX19oLHUuX19oPVtdLG4uc29tZShmdW5jdGlvbihuKXtuLmNhbGwodSk7fSk7fWNhdGNoKG4pe2wkMi5fX2Uobix1Ll9fdik7fX0pO31mdW5jdGlvbiBMJDEobCx1LGksdCxvLHIsZixjKXt2YXIgcyxhLHYseT1pLnByb3BzLHA9dS5wcm9wcyxkPXUudHlwZSxfPTA7aWYoInN2ZyI9PT1kJiYobz0hMCksbnVsbCE9cilmb3IoO188ci5sZW5ndGg7XysrKWlmKChzPXJbX10pJiYocz09PWx8fChkP3MubG9jYWxOYW1lPT1kOjM9PXMubm9kZVR5cGUpKSl7bD1zLHJbX109bnVsbDticmVha31pZihudWxsPT1sKXtpZihudWxsPT09ZClyZXR1cm4gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUocCk7bD1vP2RvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLGQpOmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoZCxwLmlzJiZwKSxyPW51bGwsYz0hMTt9aWYobnVsbD09PWQpeT09PXB8fGMmJmwuZGF0YT09PXB8fChsLmRhdGE9cCk7ZWxzZSB7aWYocj1yJiZuJDEuY2FsbChsLmNoaWxkTm9kZXMpLGE9KHk9aS5wcm9wc3x8ZSQzKS5kYW5nZXJvdXNseVNldElubmVySFRNTCx2PXAuZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUwsIWMpe2lmKG51bGwhPXIpZm9yKHk9e30sXz0wO188bC5hdHRyaWJ1dGVzLmxlbmd0aDtfKyspeVtsLmF0dHJpYnV0ZXNbX10ubmFtZV09bC5hdHRyaWJ1dGVzW19dLnZhbHVlOyh2fHxhKSYmKHYmJihhJiZ2Ll9faHRtbD09YS5fX2h0bWx8fHYuX19odG1sPT09bC5pbm5lckhUTUwpfHwobC5pbm5lckhUTUw9diYmdi5fX2h0bWx8fCIiKSk7fWlmKEMkMShsLHAseSxvLGMpLHYpdS5fX2s9W107ZWxzZSBpZihfPXUucHJvcHMuY2hpbGRyZW4sdyQyKGwsQXJyYXkuaXNBcnJheShfKT9fOltfXSx1LGksdCxvJiYiZm9yZWlnbk9iamVjdCIhPT1kLHIsZixyP3JbMF06aS5fX2smJmskMihpLDApLGMpLG51bGwhPXIpZm9yKF89ci5sZW5ndGg7Xy0tOyludWxsIT1yW19dJiZoJDEocltfXSk7Y3x8KCJ2YWx1ZSJpbiBwJiZ2b2lkIDAhPT0oXz1wLnZhbHVlKSYmKF8hPT1sLnZhbHVlfHwicHJvZ3Jlc3MiPT09ZCYmIV8pJiZIJDEobCwidmFsdWUiLF8seS52YWx1ZSwhMSksImNoZWNrZWQiaW4gcCYmdm9pZCAwIT09KF89cC5jaGVja2VkKSYmXyE9PWwuY2hlY2tlZCYmSCQxKGwsImNoZWNrZWQiLF8seS5jaGVja2VkLCExKSk7fXJldHVybiBsfWZ1bmN0aW9uIE0kMShuLHUsaSl7dHJ5eyJmdW5jdGlvbiI9PXR5cGVvZiBuP24odSk6bi5jdXJyZW50PXU7fWNhdGNoKG4pe2wkMi5fX2UobixpKTt9fWZ1bmN0aW9uIE4kMShuLHUsaSl7dmFyIHQsbztpZihsJDIudW5tb3VudCYmbCQyLnVubW91bnQobiksKHQ9bi5yZWYpJiYodC5jdXJyZW50JiZ0LmN1cnJlbnQhPT1uLl9fZXx8TSQxKHQsbnVsbCx1KSksbnVsbCE9KHQ9bi5fX2MpKXtpZih0LmNvbXBvbmVudFdpbGxVbm1vdW50KXRyeXt0LmNvbXBvbmVudFdpbGxVbm1vdW50KCk7fWNhdGNoKG4pe2wkMi5fX2Uobix1KTt9dC5iYXNlPXQuX19QPW51bGw7fWlmKHQ9bi5fX2spZm9yKG89MDtvPHQubGVuZ3RoO28rKyl0W29dJiZOJDEodFtvXSx1LCJmdW5jdGlvbiIhPXR5cGVvZiBuLnR5cGUpO2l8fG51bGw9PW4uX19lfHxoJDEobi5fX2UpLG4uX19lPW4uX19kPXZvaWQgMDt9ZnVuY3Rpb24gTyQxKG4sbCx1KXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3RvcihuLHUpfWZ1bmN0aW9uIFMkMSh1LGksdCl7dmFyIG8scixmO2wkMi5fXyYmbCQyLl9fKHUsaSkscj0obz0iZnVuY3Rpb24iPT10eXBlb2YgdCk/bnVsbDp0JiZ0Ll9fa3x8aS5fX2ssZj1bXSxqJDIoaSx1PSghbyYmdHx8aSkuX19rPXYkMShkJDEsbnVsbCxbdV0pLHJ8fGUkMyxlJDMsdm9pZCAwIT09aS5vd25lclNWR0VsZW1lbnQsIW8mJnQ/W3RdOnI/bnVsbDppLmZpcnN0Q2hpbGQ/biQxLmNhbGwoaS5jaGlsZE5vZGVzKTpudWxsLGYsIW8mJnQ/dDpyP3IuX19lOmkuZmlyc3RDaGlsZCxvKSx6JDEoZix1KTt9ZnVuY3Rpb24gcSQxKG4sbCl7UyQxKG4sbCxxJDEpO31mdW5jdGlvbiBCJDEobCx1LGkpe3ZhciB0LG8scixmPWEkMih7fSxsLnByb3BzKTtmb3IociBpbiB1KSJrZXkiPT1yP3Q9dVtyXToicmVmIj09cj9vPXVbcl06ZltyXT11W3JdO3JldHVybiBhcmd1bWVudHMubGVuZ3RoPjImJihmLmNoaWxkcmVuPWFyZ3VtZW50cy5sZW5ndGg+Mz9uJDEuY2FsbChhcmd1bWVudHMsMik6aSkseSQxKGwudHlwZSxmLHR8fGwua2V5LG98fGwucmVmLG51bGwpfWZ1bmN0aW9uIEQkMShuLGwpe3ZhciB1PXtfX2M6bD0iX19jQyIrZiQxKyssX186bixDb25zdW1lcjpmdW5jdGlvbihuLGwpe3JldHVybiBuLmNoaWxkcmVuKGwpfSxQcm92aWRlcjpmdW5jdGlvbihuKXt2YXIgdSxpO3JldHVybiB0aGlzLmdldENoaWxkQ29udGV4dHx8KHU9W10sKGk9e30pW2xdPXRoaXMsdGhpcy5nZXRDaGlsZENvbnRleHQ9ZnVuY3Rpb24oKXtyZXR1cm4gaX0sdGhpcy5zaG91bGRDb21wb25lbnRVcGRhdGU9ZnVuY3Rpb24obil7dGhpcy5wcm9wcy52YWx1ZSE9PW4udmFsdWUmJnUuc29tZShtJDEpO30sdGhpcy5zdWI9ZnVuY3Rpb24obil7dS5wdXNoKG4pO3ZhciBsPW4uY29tcG9uZW50V2lsbFVubW91bnQ7bi5jb21wb25lbnRXaWxsVW5tb3VudD1mdW5jdGlvbigpe3Uuc3BsaWNlKHUuaW5kZXhPZihuKSwxKSxsJiZsLmNhbGwobik7fTt9KSxuLmNoaWxkcmVufX07cmV0dXJuIHUuUHJvdmlkZXIuX189dS5Db25zdW1lci5jb250ZXh0VHlwZT11fW4kMT1jJDEuc2xpY2UsbCQyPXtfX2U6ZnVuY3Rpb24obixsKXtmb3IodmFyIHUsaSx0O2w9bC5fXzspaWYoKHU9bC5fX2MpJiYhdS5fXyl0cnl7aWYoKGk9dS5jb25zdHJ1Y3RvcikmJm51bGwhPWkuZ2V0RGVyaXZlZFN0YXRlRnJvbUVycm9yJiYodS5zZXRTdGF0ZShpLmdldERlcml2ZWRTdGF0ZUZyb21FcnJvcihuKSksdD11Ll9fZCksbnVsbCE9dS5jb21wb25lbnREaWRDYXRjaCYmKHUuY29tcG9uZW50RGlkQ2F0Y2gobiksdD11Ll9fZCksdClyZXR1cm4gdS5fX0U9dX1jYXRjaChsKXtuPWw7fXRocm93IG59fSx1JDE9MCxfJDEucHJvdG90eXBlLnNldFN0YXRlPWZ1bmN0aW9uKG4sbCl7dmFyIHU7dT1udWxsIT10aGlzLl9fcyYmdGhpcy5fX3MhPT10aGlzLnN0YXRlP3RoaXMuX19zOnRoaXMuX19zPWEkMih7fSx0aGlzLnN0YXRlKSwiZnVuY3Rpb24iPT10eXBlb2YgbiYmKG49bihhJDIoe30sdSksdGhpcy5wcm9wcykpLG4mJmEkMih1LG4pLG51bGwhPW4mJnRoaXMuX192JiYobCYmdGhpcy5fX2gucHVzaChsKSxtJDEodGhpcykpO30sXyQxLnByb3RvdHlwZS5mb3JjZVVwZGF0ZT1mdW5jdGlvbihuKXt0aGlzLl9fdiYmKHRoaXMuX19lPSEwLG4mJnRoaXMuX19oLnB1c2gobiksbSQxKHRoaXMpKTt9LF8kMS5wcm90b3R5cGUucmVuZGVyPWQkMSx0JDE9W10sbyQzPSJmdW5jdGlvbiI9PXR5cGVvZiBQcm9taXNlP1Byb21pc2UucHJvdG90eXBlLnRoZW4uYmluZChQcm9taXNlLnJlc29sdmUoKSk6c2V0VGltZW91dCxnJDIuX19yPTAsZiQxPTA7CgogIHZhciBvJDI9MDtmdW5jdGlvbiBlJDIoXyxlLG4sdCxmKXt2YXIgbCxzLHU9e307Zm9yKHMgaW4gZSkicmVmIj09cz9sPWVbc106dVtzXT1lW3NdO3ZhciBhPXt0eXBlOl8scHJvcHM6dSxrZXk6bixyZWY6bCxfX2s6bnVsbCxfXzpudWxsLF9fYjowLF9fZTpudWxsLF9fZDp2b2lkIDAsX19jOm51bGwsX19oOm51bGwsY29uc3RydWN0b3I6dm9pZCAwLF9fdjotLW8kMixfX3NvdXJjZTp0LF9fc2VsZjpmfTtpZigiZnVuY3Rpb24iPT10eXBlb2YgXyYmKGw9Xy5kZWZhdWx0UHJvcHMpKWZvcihzIGluIGwpdm9pZCAwPT09dVtzXSYmKHVbc109bFtzXSk7cmV0dXJuIGwkMi52bm9kZSYmbCQyLnZub2RlKGEpLGF9CgogIHZhciB0LHUscixvJDE9MCxpJDE9W10sYz1sJDIuX19iLGY9bCQyLl9fcixlJDE9bCQyLmRpZmZlZCxhJDE9bCQyLl9fYyx2PWwkMi51bm1vdW50O2Z1bmN0aW9uIG0odCxyKXtsJDIuX19oJiZsJDIuX19oKHUsdCxvJDF8fHIpLG8kMT0wO3ZhciBpPXUuX19IfHwodS5fX0g9e19fOltdLF9faDpbXX0pO3JldHVybiB0Pj1pLl9fLmxlbmd0aCYmaS5fXy5wdXNoKHt9KSxpLl9fW3RdfWZ1bmN0aW9uIGwkMShuKXtyZXR1cm4gbyQxPTEscCQxKHckMSxuKX1mdW5jdGlvbiBwJDEobixyLG8pe3ZhciBpPW0odCsrLDIpO3JldHVybiBpLnQ9bixpLl9fY3x8KGkuX189W28/byhyKTp3JDEodm9pZCAwLHIpLGZ1bmN0aW9uKG4pe3ZhciB0PWkudChpLl9fWzBdLG4pO2kuX19bMF0hPT10JiYoaS5fXz1bdCxpLl9fWzFdXSxpLl9fYy5zZXRTdGF0ZSh7fSkpO31dLGkuX19jPXUpLGkuX199ZnVuY3Rpb24geShyLG8pe3ZhciBpPW0odCsrLDMpOyFsJDIuX19zJiZrJDEoaS5fX0gsbykmJihpLl9fPXIsaS5fX0g9byx1Ll9fSC5fX2gucHVzaChpKSk7fWZ1bmN0aW9uIGgocixvKXt2YXIgaT1tKHQrKyw0KTshbCQyLl9fcyYmayQxKGkuX19ILG8pJiYoaS5fXz1yLGkuX19IPW8sdS5fX2gucHVzaChpKSk7fWZ1bmN0aW9uIHMobil7cmV0dXJuIG8kMT01LGQoZnVuY3Rpb24oKXtyZXR1cm4ge2N1cnJlbnQ6bn19LFtdKX1mdW5jdGlvbiBfKG4sdCx1KXtvJDE9NixoKGZ1bmN0aW9uKCl7ImZ1bmN0aW9uIj09dHlwZW9mIG4/bih0KCkpOm4mJihuLmN1cnJlbnQ9dCgpKTt9LG51bGw9PXU/dTp1LmNvbmNhdChuKSk7fWZ1bmN0aW9uIGQobix1KXt2YXIgcj1tKHQrKyw3KTtyZXR1cm4gayQxKHIuX19ILHUpJiYoci5fXz1uKCksci5fX0g9dSxyLl9faD1uKSxyLl9ffWZ1bmN0aW9uIEEkMShuLHQpe3JldHVybiBvJDE9OCxkKGZ1bmN0aW9uKCl7cmV0dXJuIG59LHQpfWZ1bmN0aW9uIEYkMShuKXt2YXIgcj11LmNvbnRleHRbbi5fX2NdLG89bSh0KyssOSk7cmV0dXJuIG8uYz1uLHI/KG51bGw9PW8uX18mJihvLl9fPSEwLHIuc3ViKHUpKSxyLnByb3BzLnZhbHVlKTpuLl9ffWZ1bmN0aW9uIFQkMSh0LHUpe2wkMi51c2VEZWJ1Z1ZhbHVlJiZsJDIudXNlRGVidWdWYWx1ZSh1P3UodCk6dCk7fWZ1bmN0aW9uIHgkMSgpe2kkMS5mb3JFYWNoKGZ1bmN0aW9uKHQpe2lmKHQuX19QKXRyeXt0Ll9fSC5fX2guZm9yRWFjaChnJDEpLHQuX19ILl9faC5mb3JFYWNoKGokMSksdC5fX0guX19oPVtdO31jYXRjaCh1KXt0Ll9fSC5fX2g9W10sbCQyLl9fZSh1LHQuX192KTt9fSksaSQxPVtdO31sJDIuX19iPWZ1bmN0aW9uKG4pe3U9bnVsbCxjJiZjKG4pO30sbCQyLl9fcj1mdW5jdGlvbihuKXtmJiZmKG4pLHQ9MDt2YXIgcj0odT1uLl9fYykuX19IO3ImJihyLl9faC5mb3JFYWNoKGckMSksci5fX2guZm9yRWFjaChqJDEpLHIuX19oPVtdKTt9LGwkMi5kaWZmZWQ9ZnVuY3Rpb24odCl7ZSQxJiZlJDEodCk7dmFyIG89dC5fX2M7byYmby5fX0gmJm8uX19ILl9faC5sZW5ndGgmJigxIT09aSQxLnB1c2gobykmJnI9PT1sJDIucmVxdWVzdEFuaW1hdGlvbkZyYW1lfHwoKHI9bCQyLnJlcXVlc3RBbmltYXRpb25GcmFtZSl8fGZ1bmN0aW9uKG4pe3ZhciB0LHU9ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQociksYiYmY2FuY2VsQW5pbWF0aW9uRnJhbWUodCksc2V0VGltZW91dChuKTt9LHI9c2V0VGltZW91dCh1LDEwMCk7YiYmKHQ9cmVxdWVzdEFuaW1hdGlvbkZyYW1lKHUpKTt9KSh4JDEpKSx1PXZvaWQgMDt9LGwkMi5fX2M9ZnVuY3Rpb24odCx1KXt1LnNvbWUoZnVuY3Rpb24odCl7dHJ5e3QuX19oLmZvckVhY2goZyQxKSx0Ll9faD10Ll9faC5maWx0ZXIoZnVuY3Rpb24obil7cmV0dXJuICFuLl9ffHxqJDEobil9KTt9Y2F0Y2gocil7dS5zb21lKGZ1bmN0aW9uKG4pe24uX19oJiYobi5fX2g9W10pO30pLHU9W10sbCQyLl9fZShyLHQuX192KTt9fSksYSQxJiZhJDEodCx1KTt9LGwkMi51bm1vdW50PWZ1bmN0aW9uKHQpe3YmJnYodCk7dmFyIHU9dC5fX2M7aWYodSYmdS5fX0gpdHJ5e3UuX19ILl9fLmZvckVhY2goZyQxKTt9Y2F0Y2godCl7bCQyLl9fZSh0LHUuX192KTt9fTt2YXIgYj0iZnVuY3Rpb24iPT10eXBlb2YgcmVxdWVzdEFuaW1hdGlvbkZyYW1lO2Z1bmN0aW9uIGckMShuKXt2YXIgdD11OyJmdW5jdGlvbiI9PXR5cGVvZiBuLl9fYyYmbi5fX2MoKSx1PXQ7fWZ1bmN0aW9uIGokMShuKXt2YXIgdD11O24uX19jPW4uX18oKSx1PXQ7fWZ1bmN0aW9uIGskMShuLHQpe3JldHVybiAhbnx8bi5sZW5ndGghPT10Lmxlbmd0aHx8dC5zb21lKGZ1bmN0aW9uKHQsdSl7cmV0dXJuIHQhPT1uW3VdfSl9ZnVuY3Rpb24gdyQxKG4sdCl7cmV0dXJuICJmdW5jdGlvbiI9PXR5cGVvZiB0P3Qobik6dH0KCiAgZnVuY3Rpb24gUyhuLHQpe2Zvcih2YXIgZSBpbiB0KW5bZV09dFtlXTtyZXR1cm4gbn1mdW5jdGlvbiBDKG4sdCl7Zm9yKHZhciBlIGluIG4paWYoIl9fc291cmNlIiE9PWUmJiEoZSBpbiB0KSlyZXR1cm4gITA7Zm9yKHZhciByIGluIHQpaWYoIl9fc291cmNlIiE9PXImJm5bcl0hPT10W3JdKXJldHVybiAhMDtyZXR1cm4gITF9ZnVuY3Rpb24gRShuKXt0aGlzLnByb3BzPW47fWZ1bmN0aW9uIGcobix0KXtmdW5jdGlvbiBlKG4pe3ZhciBlPXRoaXMucHJvcHMucmVmLHI9ZT09bi5yZWY7cmV0dXJuICFyJiZlJiYoZS5jYWxsP2UobnVsbCk6ZS5jdXJyZW50PW51bGwpLHQ/IXQodGhpcy5wcm9wcyxuKXx8IXI6Qyh0aGlzLnByb3BzLG4pfWZ1bmN0aW9uIHIodCl7cmV0dXJuIHRoaXMuc2hvdWxkQ29tcG9uZW50VXBkYXRlPWUsdiQxKG4sdCl9cmV0dXJuIHIuZGlzcGxheU5hbWU9Ik1lbW8oIisobi5kaXNwbGF5TmFtZXx8bi5uYW1lKSsiKSIsci5wcm90b3R5cGUuaXNSZWFjdENvbXBvbmVudD0hMCxyLl9fZj0hMCxyfShFLnByb3RvdHlwZT1uZXcgXyQxKS5pc1B1cmVSZWFjdENvbXBvbmVudD0hMCxFLnByb3RvdHlwZS5zaG91bGRDb21wb25lbnRVcGRhdGU9ZnVuY3Rpb24obix0KXtyZXR1cm4gQyh0aGlzLnByb3BzLG4pfHxDKHRoaXMuc3RhdGUsdCl9O3ZhciB3PWwkMi5fX2I7bCQyLl9fYj1mdW5jdGlvbihuKXtuLnR5cGUmJm4udHlwZS5fX2YmJm4ucmVmJiYobi5wcm9wcy5yZWY9bi5yZWYsbi5yZWY9bnVsbCksdyYmdyhuKTt9O3ZhciBSPSJ1bmRlZmluZWQiIT10eXBlb2YgU3ltYm9sJiZTeW1ib2wuZm9yJiZTeW1ib2wuZm9yKCJyZWFjdC5mb3J3YXJkX3JlZiIpfHwzOTExO2Z1bmN0aW9uIHgobil7ZnVuY3Rpb24gdCh0LGUpe3ZhciByPVMoe30sdCk7cmV0dXJuIGRlbGV0ZSByLnJlZixuKHIsKGU9dC5yZWZ8fGUpJiYoIm9iamVjdCIhPXR5cGVvZiBlfHwiY3VycmVudCJpbiBlKT9lOm51bGwpfXJldHVybiB0LiQkdHlwZW9mPVIsdC5yZW5kZXI9dCx0LnByb3RvdHlwZS5pc1JlYWN0Q29tcG9uZW50PXQuX19mPSEwLHQuZGlzcGxheU5hbWU9IkZvcndhcmRSZWYoIisobi5kaXNwbGF5TmFtZXx8bi5uYW1lKSsiKSIsdH12YXIgTj1mdW5jdGlvbihuLHQpe3JldHVybiBudWxsPT1uP251bGw6QSQyKEEkMihuKS5tYXAodCkpfSxrPXttYXA6Tixmb3JFYWNoOk4sY291bnQ6ZnVuY3Rpb24obil7cmV0dXJuIG4/QSQyKG4pLmxlbmd0aDowfSxvbmx5OmZ1bmN0aW9uKG4pe3ZhciB0PUEkMihuKTtpZigxIT09dC5sZW5ndGgpdGhyb3cgIkNoaWxkcmVuLm9ubHkiO3JldHVybiB0WzBdfSx0b0FycmF5OkEkMn0sQT1sJDIuX19lO2wkMi5fX2U9ZnVuY3Rpb24obix0LGUpe2lmKG4udGhlbilmb3IodmFyIHIsdT10O3U9dS5fXzspaWYoKHI9dS5fX2MpJiZyLl9fYylyZXR1cm4gbnVsbD09dC5fX2UmJih0Ll9fZT1lLl9fZSx0Ll9faz1lLl9fayksci5fX2Mobix0KTtBKG4sdCxlKTt9O3ZhciBPPWwkMi51bm1vdW50O2Z1bmN0aW9uIEwoKXt0aGlzLl9fdT0wLHRoaXMudD1udWxsLHRoaXMuX19iPW51bGw7fWZ1bmN0aW9uIFUobil7dmFyIHQ9bi5fXy5fX2M7cmV0dXJuIHQmJnQuX19lJiZ0Ll9fZShuKX1mdW5jdGlvbiBGKG4pe3ZhciB0LGUscjtmdW5jdGlvbiB1KHUpe2lmKHR8fCh0PW4oKSkudGhlbihmdW5jdGlvbihuKXtlPW4uZGVmYXVsdHx8bjt9LGZ1bmN0aW9uKG4pe3I9bjt9KSxyKXRocm93IHI7aWYoIWUpdGhyb3cgdDtyZXR1cm4gdiQxKGUsdSl9cmV0dXJuIHUuZGlzcGxheU5hbWU9IkxhenkiLHUuX19mPSEwLHV9ZnVuY3Rpb24gTSgpe3RoaXMudT1udWxsLHRoaXMubz1udWxsO31sJDIudW5tb3VudD1mdW5jdGlvbihuKXt2YXIgdD1uLl9fYzt0JiZ0Ll9fUiYmdC5fX1IoKSx0JiYhMD09PW4uX19oJiYobi50eXBlPW51bGwpLE8mJk8obik7fSwoTC5wcm90b3R5cGU9bmV3IF8kMSkuX19jPWZ1bmN0aW9uKG4sdCl7dmFyIGU9dC5fX2Mscj10aGlzO251bGw9PXIudCYmKHIudD1bXSksci50LnB1c2goZSk7dmFyIHU9VShyLl9fdiksbz0hMSxpPWZ1bmN0aW9uKCl7b3x8KG89ITAsZS5fX1I9bnVsbCx1P3UobCk6bCgpKTt9O2UuX19SPWk7dmFyIGw9ZnVuY3Rpb24oKXtpZighLS1yLl9fdSl7aWYoci5zdGF0ZS5fX2Upe3ZhciBuPXIuc3RhdGUuX19lO3IuX192Ll9fa1swXT1mdW5jdGlvbiBuKHQsZSxyKXtyZXR1cm4gdCYmKHQuX192PW51bGwsdC5fX2s9dC5fX2smJnQuX19rLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gbih0LGUscil9KSx0Ll9fYyYmdC5fX2MuX19QPT09ZSYmKHQuX19lJiZyLmluc2VydEJlZm9yZSh0Ll9fZSx0Ll9fZCksdC5fX2MuX19lPSEwLHQuX19jLl9fUD1yKSksdH0obixuLl9fYy5fX1Asbi5fX2MuX19PKTt9dmFyIHQ7Zm9yKHIuc2V0U3RhdGUoe19fZTpyLl9fYj1udWxsfSk7dD1yLnQucG9wKCk7KXQuZm9yY2VVcGRhdGUoKTt9fSxmPSEwPT09dC5fX2g7ci5fX3UrK3x8Znx8ci5zZXRTdGF0ZSh7X19lOnIuX19iPXIuX192Ll9fa1swXX0pLG4udGhlbihpLGkpO30sTC5wcm90b3R5cGUuY29tcG9uZW50V2lsbFVubW91bnQ9ZnVuY3Rpb24oKXt0aGlzLnQ9W107fSxMLnByb3RvdHlwZS5yZW5kZXI9ZnVuY3Rpb24obix0KXtpZih0aGlzLl9fYil7aWYodGhpcy5fX3YuX19rKXt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSxyPXRoaXMuX192Ll9fa1swXS5fX2M7dGhpcy5fX3YuX19rWzBdPWZ1bmN0aW9uIG4odCxlLHIpe3JldHVybiB0JiYodC5fX2MmJnQuX19jLl9fSCYmKHQuX19jLl9fSC5fXy5mb3JFYWNoKGZ1bmN0aW9uKG4peyJmdW5jdGlvbiI9PXR5cGVvZiBuLl9fYyYmbi5fX2MoKTt9KSx0Ll9fYy5fX0g9bnVsbCksbnVsbCE9KHQ9Uyh7fSx0KSkuX19jJiYodC5fX2MuX19QPT09ciYmKHQuX19jLl9fUD1lKSx0Ll9fYz1udWxsKSx0Ll9faz10Ll9fayYmdC5fX2subWFwKGZ1bmN0aW9uKHQpe3JldHVybiBuKHQsZSxyKX0pKSx0fSh0aGlzLl9fYixlLHIuX19PPXIuX19QKTt9dGhpcy5fX2I9bnVsbDt9dmFyIHU9dC5fX2UmJnYkMShkJDEsbnVsbCxuLmZhbGxiYWNrKTtyZXR1cm4gdSYmKHUuX19oPW51bGwpLFt2JDEoZCQxLG51bGwsdC5fX2U/bnVsbDpuLmNoaWxkcmVuKSx1XX07dmFyIFQ9ZnVuY3Rpb24obix0LGUpe2lmKCsrZVsxXT09PWVbMF0mJm4uby5kZWxldGUodCksbi5wcm9wcy5yZXZlYWxPcmRlciYmKCJ0IiE9PW4ucHJvcHMucmV2ZWFsT3JkZXJbMF18fCFuLm8uc2l6ZSkpZm9yKGU9bi51O2U7KXtmb3IoO2UubGVuZ3RoPjM7KWUucG9wKCkoKTtpZihlWzFdPGVbMF0pYnJlYWs7bi51PWU9ZVsyXTt9fTtmdW5jdGlvbiBEKG4pe3JldHVybiB0aGlzLmdldENoaWxkQ29udGV4dD1mdW5jdGlvbigpe3JldHVybiBuLmNvbnRleHR9LG4uY2hpbGRyZW59ZnVuY3Rpb24gSShuKXt2YXIgdD10aGlzLGU9bi5pO3QuY29tcG9uZW50V2lsbFVubW91bnQ9ZnVuY3Rpb24oKXtTJDEobnVsbCx0LmwpLHQubD1udWxsLHQuaT1udWxsO30sdC5pJiZ0LmkhPT1lJiZ0LmNvbXBvbmVudFdpbGxVbm1vdW50KCksbi5fX3Y/KHQubHx8KHQuaT1lLHQubD17bm9kZVR5cGU6MSxwYXJlbnROb2RlOmUsY2hpbGROb2RlczpbXSxhcHBlbmRDaGlsZDpmdW5jdGlvbihuKXt0aGlzLmNoaWxkTm9kZXMucHVzaChuKSx0LmkuYXBwZW5kQ2hpbGQobik7fSxpbnNlcnRCZWZvcmU6ZnVuY3Rpb24obixlKXt0aGlzLmNoaWxkTm9kZXMucHVzaChuKSx0LmkuYXBwZW5kQ2hpbGQobik7fSxyZW1vdmVDaGlsZDpmdW5jdGlvbihuKXt0aGlzLmNoaWxkTm9kZXMuc3BsaWNlKHRoaXMuY2hpbGROb2Rlcy5pbmRleE9mKG4pPj4+MSwxKSx0LmkucmVtb3ZlQ2hpbGQobik7fX0pLFMkMSh2JDEoRCx7Y29udGV4dDp0LmNvbnRleHR9LG4uX192KSx0LmwpKTp0LmwmJnQuY29tcG9uZW50V2lsbFVubW91bnQoKTt9ZnVuY3Rpb24gVyhuLHQpe3JldHVybiB2JDEoSSx7X192Om4saTp0fSl9KE0ucHJvdG90eXBlPW5ldyBfJDEpLl9fZT1mdW5jdGlvbihuKXt2YXIgdD10aGlzLGU9VSh0Ll9fdikscj10Lm8uZ2V0KG4pO3JldHVybiByWzBdKyssZnVuY3Rpb24odSl7dmFyIG89ZnVuY3Rpb24oKXt0LnByb3BzLnJldmVhbE9yZGVyPyhyLnB1c2godSksVCh0LG4scikpOnUoKTt9O2U/ZShvKTpvKCk7fX0sTS5wcm90b3R5cGUucmVuZGVyPWZ1bmN0aW9uKG4pe3RoaXMudT1udWxsLHRoaXMubz1uZXcgTWFwO3ZhciB0PUEkMihuLmNoaWxkcmVuKTtuLnJldmVhbE9yZGVyJiYiYiI9PT1uLnJldmVhbE9yZGVyWzBdJiZ0LnJldmVyc2UoKTtmb3IodmFyIGU9dC5sZW5ndGg7ZS0tOyl0aGlzLm8uc2V0KHRbZV0sdGhpcy51PVsxLDAsdGhpcy51XSk7cmV0dXJuIG4uY2hpbGRyZW59LE0ucHJvdG90eXBlLmNvbXBvbmVudERpZFVwZGF0ZT1NLnByb3RvdHlwZS5jb21wb25lbnREaWRNb3VudD1mdW5jdGlvbigpe3ZhciBuPXRoaXM7dGhpcy5vLmZvckVhY2goZnVuY3Rpb24odCxlKXtUKG4sZSx0KTt9KTt9O3ZhciBqPSJ1bmRlZmluZWQiIT10eXBlb2YgU3ltYm9sJiZTeW1ib2wuZm9yJiZTeW1ib2wuZm9yKCJyZWFjdC5lbGVtZW50Iil8fDYwMTAzLFA9L14oPzphY2NlbnR8YWxpZ25tZW50fGFyYWJpY3xiYXNlbGluZXxjYXB8Y2xpcCg/IVBhdGhVKXxjb2xvcnxmaWxsfGZsb29kfGZvbnR8Z2x5cGgoPyFSKXxob3JpenxtYXJrZXIoPyFIfFd8VSl8b3ZlcmxpbmV8cGFpbnR8c3RvcHxzdHJpa2V0aHJvdWdofHN0cm9rZXx0ZXh0KD8hTCl8dW5kZXJsaW5lfHVuaWNvZGV8dW5pdHN8dnx2ZWN0b3J8dmVydHx3b3JkfHdyaXRpbmd8eCg/IUMpKVtBLVpdLyxWPWZ1bmN0aW9uKG4pe3JldHVybiAoInVuZGVmaW5lZCIhPXR5cGVvZiBTeW1ib2wmJiJzeW1ib2wiPT10eXBlb2YgU3ltYm9sKCk/L2ZpbHxjaGV8cmFkL2k6L2ZpbHxjaGV8cmEvaSkudGVzdChuKX07ZnVuY3Rpb24geihuLHQsZSl7cmV0dXJuIG51bGw9PXQuX19rJiYodC50ZXh0Q29udGVudD0iIiksUyQxKG4sdCksImZ1bmN0aW9uIj09dHlwZW9mIGUmJmUoKSxuP24uX19jOm51bGx9ZnVuY3Rpb24gQihuLHQsZSl7cmV0dXJuIHEkMShuLHQpLCJmdW5jdGlvbiI9PXR5cGVvZiBlJiZlKCksbj9uLl9fYzpudWxsfV8kMS5wcm90b3R5cGUuaXNSZWFjdENvbXBvbmVudD17fSxbImNvbXBvbmVudFdpbGxNb3VudCIsImNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMiLCJjb21wb25lbnRXaWxsVXBkYXRlIl0uZm9yRWFjaChmdW5jdGlvbihuKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoXyQxLnByb3RvdHlwZSxuLHtjb25maWd1cmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXNbIlVOU0FGRV8iK25dfSxzZXQ6ZnVuY3Rpb24odCl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsbix7Y29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOnR9KTt9fSk7fSk7dmFyIEg9bCQyLmV2ZW50O2Z1bmN0aW9uIFooKXt9ZnVuY3Rpb24gWSgpe3JldHVybiB0aGlzLmNhbmNlbEJ1YmJsZX1mdW5jdGlvbiAkKCl7cmV0dXJuIHRoaXMuZGVmYXVsdFByZXZlbnRlZH1sJDIuZXZlbnQ9ZnVuY3Rpb24obil7cmV0dXJuIEgmJihuPUgobikpLG4ucGVyc2lzdD1aLG4uaXNQcm9wYWdhdGlvblN0b3BwZWQ9WSxuLmlzRGVmYXVsdFByZXZlbnRlZD0kLG4ubmF0aXZlRXZlbnQ9bn07dmFyIHEsRz17Y29uZmlndXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNsYXNzfX0sSj1sJDIudm5vZGU7bCQyLnZub2RlPWZ1bmN0aW9uKG4pe3ZhciB0PW4udHlwZSxlPW4ucHJvcHMscj1lO2lmKCJzdHJpbmciPT10eXBlb2YgdCl7Zm9yKHZhciB1IGluIHI9e30sZSl7dmFyIG89ZVt1XTsidmFsdWUiPT09dSYmImRlZmF1bHRWYWx1ZSJpbiBlJiZudWxsPT1vfHwoImRlZmF1bHRWYWx1ZSI9PT11JiYidmFsdWUiaW4gZSYmbnVsbD09ZS52YWx1ZT91PSJ2YWx1ZSI6ImRvd25sb2FkIj09PXUmJiEwPT09bz9vPSIiOi9vbmRvdWJsZWNsaWNrL2kudGVzdCh1KT91PSJvbmRibGNsaWNrIjovXm9uY2hhbmdlKHRleHRhcmVhfGlucHV0KS9pLnRlc3QodSt0KSYmIVYoZS50eXBlKT91PSJvbmlucHV0IjovXm9uKEFuaXxUcmF8VG91fEJlZm9yZUlucCkvLnRlc3QodSk/dT11LnRvTG93ZXJDYXNlKCk6UC50ZXN0KHUpP3U9dS5yZXBsYWNlKC9bQS1aMC05XS8sIi0kJiIpLnRvTG93ZXJDYXNlKCk6bnVsbD09PW8mJihvPXZvaWQgMCksclt1XT1vKTt9InNlbGVjdCI9PXQmJnIubXVsdGlwbGUmJkFycmF5LmlzQXJyYXkoci52YWx1ZSkmJihyLnZhbHVlPUEkMihlLmNoaWxkcmVuKS5mb3JFYWNoKGZ1bmN0aW9uKG4pe24ucHJvcHMuc2VsZWN0ZWQ9LTEhPXIudmFsdWUuaW5kZXhPZihuLnByb3BzLnZhbHVlKTt9KSksInNlbGVjdCI9PXQmJm51bGwhPXIuZGVmYXVsdFZhbHVlJiYoci52YWx1ZT1BJDIoZS5jaGlsZHJlbikuZm9yRWFjaChmdW5jdGlvbihuKXtuLnByb3BzLnNlbGVjdGVkPXIubXVsdGlwbGU/LTEhPXIuZGVmYXVsdFZhbHVlLmluZGV4T2Yobi5wcm9wcy52YWx1ZSk6ci5kZWZhdWx0VmFsdWU9PW4ucHJvcHMudmFsdWU7fSkpLG4ucHJvcHM9cjt9dCYmZS5jbGFzcyE9ZS5jbGFzc05hbWUmJihHLmVudW1lcmFibGU9ImNsYXNzTmFtZSJpbiBlLG51bGwhPWUuY2xhc3NOYW1lJiYoci5jbGFzcz1lLmNsYXNzTmFtZSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHIsImNsYXNzTmFtZSIsRykpLG4uJCR0eXBlb2Y9aixKJiZKKG4pO307dmFyIEs9bCQyLl9fcjtsJDIuX19yPWZ1bmN0aW9uKG4pe0smJksobikscT1uLl9fYzt9O3ZhciBRPXtSZWFjdEN1cnJlbnREaXNwYXRjaGVyOntjdXJyZW50OntyZWFkQ29udGV4dDpmdW5jdGlvbihuKXtyZXR1cm4gcS5fX25bbi5fX2NdLnByb3BzLnZhbHVlfX19fTtmdW5jdGlvbiBubihuKXtyZXR1cm4gdiQxLmJpbmQobnVsbCxuKX1mdW5jdGlvbiB0bihuKXtyZXR1cm4gISFuJiZuLiQkdHlwZW9mPT09an1mdW5jdGlvbiBlbihuKXtyZXR1cm4gdG4obik/QiQxLmFwcGx5KG51bGwsYXJndW1lbnRzKTpufWZ1bmN0aW9uIHJuKG4pe3JldHVybiAhIW4uX19rJiYoUyQxKG51bGwsbiksITApfWZ1bmN0aW9uIHVuKG4pe3JldHVybiBuJiYobi5iYXNlfHwxPT09bi5ub2RlVHlwZSYmbil8fG51bGx9dmFyIG9uPWZ1bmN0aW9uKG4sdCl7cmV0dXJuIG4odCl9LGxuPWZ1bmN0aW9uKG4sdCl7cmV0dXJuIG4odCl9O3ZhciBSZWFjdCA9IHt1c2VTdGF0ZTpsJDEsdXNlUmVkdWNlcjpwJDEsdXNlRWZmZWN0OnksdXNlTGF5b3V0RWZmZWN0OmgsdXNlUmVmOnMsdXNlSW1wZXJhdGl2ZUhhbmRsZTpfLHVzZU1lbW86ZCx1c2VDYWxsYmFjazpBJDEsdXNlQ29udGV4dDpGJDEsdXNlRGVidWdWYWx1ZTpUJDEsdmVyc2lvbjoiMTcuMC4yIixDaGlsZHJlbjprLHJlbmRlcjp6LGh5ZHJhdGU6Qix1bm1vdW50Q29tcG9uZW50QXROb2RlOnJuLGNyZWF0ZVBvcnRhbDpXLGNyZWF0ZUVsZW1lbnQ6diQxLGNyZWF0ZUNvbnRleHQ6RCQxLGNyZWF0ZUZhY3Rvcnk6bm4sY2xvbmVFbGVtZW50OmVuLGNyZWF0ZVJlZjpwJDIsRnJhZ21lbnQ6ZCQxLGlzVmFsaWRFbGVtZW50OnRuLGZpbmRET01Ob2RlOnVuLENvbXBvbmVudDpfJDEsUHVyZUNvbXBvbmVudDpFLG1lbW86Zyxmb3J3YXJkUmVmOngsZmx1c2hTeW5jOmxuLHVuc3RhYmxlX2JhdGNoZWRVcGRhdGVzOm9uLFN0cmljdE1vZGU6ZCQxLFN1c3BlbnNlOkwsU3VzcGVuc2VMaXN0Ok0sbGF6eTpGLF9fU0VDUkVUX0lOVEVSTkFMU19ET19OT1RfVVNFX09SX1lPVV9XSUxMX0JFX0ZJUkVEOlF9OwoKICB2YXIgSE9PS1MgPSBbCiAgICAgICJvbkNoYW5nZSIsCiAgICAgICJvbkNsb3NlIiwKICAgICAgIm9uRGF5Q3JlYXRlIiwKICAgICAgIm9uRGVzdHJveSIsCiAgICAgICJvbktleURvd24iLAogICAgICAib25Nb250aENoYW5nZSIsCiAgICAgICJvbk9wZW4iLAogICAgICAib25QYXJzZUNvbmZpZyIsCiAgICAgICJvblJlYWR5IiwKICAgICAgIm9uVmFsdWVVcGRhdGUiLAogICAgICAib25ZZWFyQ2hhbmdlIiwKICAgICAgIm9uUHJlQ2FsZW5kYXJQb3NpdGlvbiIsCiAgXTsKICB2YXIgZGVmYXVsdHMgPSB7CiAgICAgIF9kaXNhYmxlOiBbXSwKICAgICAgYWxsb3dJbnB1dDogZmFsc2UsCiAgICAgIGFsbG93SW52YWxpZFByZWxvYWQ6IGZhbHNlLAogICAgICBhbHRGb3JtYXQ6ICJGIGosIFkiLAogICAgICBhbHRJbnB1dDogZmFsc2UsCiAgICAgIGFsdElucHV0Q2xhc3M6ICJmb3JtLWNvbnRyb2wgaW5wdXQiLAogICAgICBhbmltYXRlOiB0eXBlb2Ygd2luZG93ID09PSAib2JqZWN0IiAmJgogICAgICAgICAgd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiTVNJRSIpID09PSAtMSwKICAgICAgYXJpYURhdGVGb3JtYXQ6ICJGIGosIFkiLAogICAgICBhdXRvRmlsbERlZmF1bHRUaW1lOiB0cnVlLAogICAgICBjbGlja09wZW5zOiB0cnVlLAogICAgICBjbG9zZU9uU2VsZWN0OiB0cnVlLAogICAgICBjb25qdW5jdGlvbjogIiwgIiwKICAgICAgZGF0ZUZvcm1hdDogIlktbS1kIiwKICAgICAgZGVmYXVsdEhvdXI6IDEyLAogICAgICBkZWZhdWx0TWludXRlOiAwLAogICAgICBkZWZhdWx0U2Vjb25kczogMCwKICAgICAgZGlzYWJsZTogW10sCiAgICAgIGRpc2FibGVNb2JpbGU6IGZhbHNlLAogICAgICBlbmFibGVTZWNvbmRzOiBmYWxzZSwKICAgICAgZW5hYmxlVGltZTogZmFsc2UsCiAgICAgIGVycm9ySGFuZGxlcjogZnVuY3Rpb24gKGVycikgewogICAgICAgICAgcmV0dXJuIHR5cGVvZiBjb25zb2xlICE9PSAidW5kZWZpbmVkIiAmJiBjb25zb2xlLndhcm4oZXJyKTsKICAgICAgfSwKICAgICAgZ2V0V2VlazogZnVuY3Rpb24gKGdpdmVuRGF0ZSkgewogICAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZShnaXZlbkRhdGUuZ2V0VGltZSgpKTsKICAgICAgICAgIGRhdGUuc2V0SG91cnMoMCwgMCwgMCwgMCk7CiAgICAgICAgICBkYXRlLnNldERhdGUoZGF0ZS5nZXREYXRlKCkgKyAzIC0gKChkYXRlLmdldERheSgpICsgNikgJSA3KSk7CiAgICAgICAgICB2YXIgd2VlazEgPSBuZXcgRGF0ZShkYXRlLmdldEZ1bGxZZWFyKCksIDAsIDQpOwogICAgICAgICAgcmV0dXJuICgxICsKICAgICAgICAgICAgICBNYXRoLnJvdW5kKCgoZGF0ZS5nZXRUaW1lKCkgLSB3ZWVrMS5nZXRUaW1lKCkpIC8gODY0MDAwMDAgLQogICAgICAgICAgICAgICAgICAzICsKICAgICAgICAgICAgICAgICAgKCh3ZWVrMS5nZXREYXkoKSArIDYpICUgNykpIC8KICAgICAgICAgICAgICAgICAgNykpOwogICAgICB9LAogICAgICBob3VySW5jcmVtZW50OiAxLAogICAgICBpZ25vcmVkRm9jdXNFbGVtZW50czogW10sCiAgICAgIGlubGluZTogZmFsc2UsCiAgICAgIGxvY2FsZTogImRlZmF1bHQiLAogICAgICBtaW51dGVJbmNyZW1lbnQ6IDUsCiAgICAgIG1vZGU6ICJzaW5nbGUiLAogICAgICBtb250aFNlbGVjdG9yVHlwZTogImRyb3Bkb3duIiwKICAgICAgbmV4dEFycm93OiAiPHN2ZyB2ZXJzaW9uPScxLjEnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycgeG1sbnM6eGxpbms9J2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsnIHZpZXdCb3g9JzAgMCAxNyAxNyc+PGc+PC9nPjxwYXRoIGQ9J00xMy4yMDcgOC40NzJsLTcuODU0IDcuODU0LTAuNzA3LTAuNzA3IDcuMTQ2LTcuMTQ2LTcuMTQ2LTcuMTQ4IDAuNzA3LTAuNzA3IDcuODU0IDcuODU0eicgLz48L3N2Zz4iLAogICAgICBub0NhbGVuZGFyOiBmYWxzZSwKICAgICAgbm93OiBuZXcgRGF0ZSgpLAogICAgICBvbkNoYW5nZTogW10sCiAgICAgIG9uQ2xvc2U6IFtdLAogICAgICBvbkRheUNyZWF0ZTogW10sCiAgICAgIG9uRGVzdHJveTogW10sCiAgICAgIG9uS2V5RG93bjogW10sCiAgICAgIG9uTW9udGhDaGFuZ2U6IFtdLAogICAgICBvbk9wZW46IFtdLAogICAgICBvblBhcnNlQ29uZmlnOiBbXSwKICAgICAgb25SZWFkeTogW10sCiAgICAgIG9uVmFsdWVVcGRhdGU6IFtdLAogICAgICBvblllYXJDaGFuZ2U6IFtdLAogICAgICBvblByZUNhbGVuZGFyUG9zaXRpb246IFtdLAogICAgICBwbHVnaW5zOiBbXSwKICAgICAgcG9zaXRpb246ICJhdXRvIiwKICAgICAgcG9zaXRpb25FbGVtZW50OiB1bmRlZmluZWQsCiAgICAgIHByZXZBcnJvdzogIjxzdmcgdmVyc2lvbj0nMS4xJyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHhtbG5zOnhsaW5rPSdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rJyB2aWV3Qm94PScwIDAgMTcgMTcnPjxnPjwvZz48cGF0aCBkPSdNNS4yMDcgOC40NzFsNy4xNDYgNy4xNDctMC43MDcgMC43MDctNy44NTMtNy44NTQgNy44NTQtNy44NTMgMC43MDcgMC43MDctNy4xNDcgNy4xNDZ6JyAvPjwvc3ZnPiIsCiAgICAgIHNob3J0aGFuZEN1cnJlbnRNb250aDogZmFsc2UsCiAgICAgIHNob3dNb250aHM6IDEsCiAgICAgIHN0YXRpYzogZmFsc2UsCiAgICAgIHRpbWVfMjRocjogZmFsc2UsCiAgICAgIHdlZWtOdW1iZXJzOiBmYWxzZSwKICAgICAgd3JhcDogZmFsc2UsCiAgfTsKCiAgdmFyIGVuZ2xpc2ggPSB7CiAgICAgIHdlZWtkYXlzOiB7CiAgICAgICAgICBzaG9ydGhhbmQ6IFsiU3VuIiwgIk1vbiIsICJUdWUiLCAiV2VkIiwgIlRodSIsICJGcmkiLCAiU2F0Il0sCiAgICAgICAgICBsb25naGFuZDogWwogICAgICAgICAgICAgICJTdW5kYXkiLAogICAgICAgICAgICAgICJNb25kYXkiLAogICAgICAgICAgICAgICJUdWVzZGF5IiwKICAgICAgICAgICAgICAiV2VkbmVzZGF5IiwKICAgICAgICAgICAgICAiVGh1cnNkYXkiLAogICAgICAgICAgICAgICJGcmlkYXkiLAogICAgICAgICAgICAgICJTYXR1cmRheSIsCiAgICAgICAgICBdLAogICAgICB9LAogICAgICBtb250aHM6IHsKICAgICAgICAgIHNob3J0aGFuZDogWwogICAgICAgICAgICAgICJKYW4iLAogICAgICAgICAgICAgICJGZWIiLAogICAgICAgICAgICAgICJNYXIiLAogICAgICAgICAgICAgICJBcHIiLAogICAgICAgICAgICAgICJNYXkiLAogICAgICAgICAgICAgICJKdW4iLAogICAgICAgICAgICAgICJKdWwiLAogICAgICAgICAgICAgICJBdWciLAogICAgICAgICAgICAgICJTZXAiLAogICAgICAgICAgICAgICJPY3QiLAogICAgICAgICAgICAgICJOb3YiLAogICAgICAgICAgICAgICJEZWMiLAogICAgICAgICAgXSwKICAgICAgICAgIGxvbmdoYW5kOiBbCiAgICAgICAgICAgICAgIkphbnVhcnkiLAogICAgICAgICAgICAgICJGZWJydWFyeSIsCiAgICAgICAgICAgICAgIk1hcmNoIiwKICAgICAgICAgICAgICAiQXByaWwiLAogICAgICAgICAgICAgICJNYXkiLAogICAgICAgICAgICAgICJKdW5lIiwKICAgICAgICAgICAgICAiSnVseSIsCiAgICAgICAgICAgICAgIkF1Z3VzdCIsCiAgICAgICAgICAgICAgIlNlcHRlbWJlciIsCiAgICAgICAgICAgICAgIk9jdG9iZXIiLAogICAgICAgICAgICAgICJOb3ZlbWJlciIsCiAgICAgICAgICAgICAgIkRlY2VtYmVyIiwKICAgICAgICAgIF0sCiAgICAgIH0sCiAgICAgIGRheXNJbk1vbnRoOiBbMzEsIDI4LCAzMSwgMzAsIDMxLCAzMCwgMzEsIDMxLCAzMCwgMzEsIDMwLCAzMV0sCiAgICAgIGZpcnN0RGF5T2ZXZWVrOiAwLAogICAgICBvcmRpbmFsOiBmdW5jdGlvbiAobnRoKSB7CiAgICAgICAgICB2YXIgcyA9IG50aCAlIDEwMDsKICAgICAgICAgIGlmIChzID4gMyAmJiBzIDwgMjEpCiAgICAgICAgICAgICAgcmV0dXJuICJ0aCI7CiAgICAgICAgICBzd2l0Y2ggKHMgJSAxMCkgewogICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgcmV0dXJuICJzdCI7CiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICByZXR1cm4gIm5kIjsKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgIHJldHVybiAicmQiOwogICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgIHJldHVybiAidGgiOwogICAgICAgICAgfQogICAgICB9LAogICAgICByYW5nZVNlcGFyYXRvcjogIiB0byAiLAogICAgICB3ZWVrQWJicmV2aWF0aW9uOiAiV2siLAogICAgICBzY3JvbGxUaXRsZTogIlNjcm9sbCB0byBpbmNyZW1lbnQiLAogICAgICB0b2dnbGVUaXRsZTogIkNsaWNrIHRvIHRvZ2dsZSIsCiAgICAgIGFtUE06IFsiQU0iLCAiUE0iXSwKICAgICAgeWVhckFyaWFMYWJlbDogIlllYXIiLAogICAgICBtb250aEFyaWFMYWJlbDogIk1vbnRoIiwKICAgICAgaG91ckFyaWFMYWJlbDogIkhvdXIiLAogICAgICBtaW51dGVBcmlhTGFiZWw6ICJNaW51dGUiLAogICAgICB0aW1lXzI0aHI6IGZhbHNlLAogIH07CgogIHZhciBwYWQgPSBmdW5jdGlvbiAobnVtYmVyLCBsZW5ndGgpIHsKICAgICAgaWYgKGxlbmd0aCA9PT0gdm9pZCAwKSB7IGxlbmd0aCA9IDI7IH0KICAgICAgcmV0dXJuICgiMDAwIiArIG51bWJlcikuc2xpY2UobGVuZ3RoICogLTEpOwogIH07CiAgdmFyIGludCA9IGZ1bmN0aW9uIChib29sKSB7IHJldHVybiAoYm9vbCA9PT0gdHJ1ZSA/IDEgOiAwKTsgfTsKICBmdW5jdGlvbiBkZWJvdW5jZShmbiwgd2FpdCkgewogICAgICB2YXIgdDsKICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgICAgICB2YXIgYXJncyA9IGFyZ3VtZW50czsKICAgICAgICAgIGNsZWFyVGltZW91dCh0KTsKICAgICAgICAgIHQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIGZuLmFwcGx5KF90aGlzLCBhcmdzKTsgfSwgd2FpdCk7CiAgICAgIH07CiAgfQogIHZhciBhcnJheWlmeSA9IGZ1bmN0aW9uIChvYmopIHsKICAgICAgcmV0dXJuIG9iaiBpbnN0YW5jZW9mIEFycmF5ID8gb2JqIDogW29ial07CiAgfTsKCiAgZnVuY3Rpb24gdG9nZ2xlQ2xhc3MoZWxlbSwgY2xhc3NOYW1lLCBib29sKSB7CiAgICAgIGlmIChib29sID09PSB0cnVlKQogICAgICAgICAgcmV0dXJuIGVsZW0uY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpOwogICAgICBlbGVtLmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKTsKICB9CiAgZnVuY3Rpb24gY3JlYXRlRWxlbWVudCh0YWcsIGNsYXNzTmFtZSwgY29udGVudCkgewogICAgICB2YXIgZSA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZyk7CiAgICAgIGNsYXNzTmFtZSA9IGNsYXNzTmFtZSB8fCAiIjsKICAgICAgY29udGVudCA9IGNvbnRlbnQgfHwgIiI7CiAgICAgIGUuY2xhc3NOYW1lID0gY2xhc3NOYW1lOwogICAgICBpZiAoY29udGVudCAhPT0gdW5kZWZpbmVkKQogICAgICAgICAgZS50ZXh0Q29udGVudCA9IGNvbnRlbnQ7CiAgICAgIHJldHVybiBlOwogIH0KICBmdW5jdGlvbiBjbGVhck5vZGUobm9kZSkgewogICAgICB3aGlsZSAobm9kZS5maXJzdENoaWxkKQogICAgICAgICAgbm9kZS5yZW1vdmVDaGlsZChub2RlLmZpcnN0Q2hpbGQpOwogIH0KICBmdW5jdGlvbiBmaW5kUGFyZW50KG5vZGUsIGNvbmRpdGlvbikgewogICAgICBpZiAoY29uZGl0aW9uKG5vZGUpKQogICAgICAgICAgcmV0dXJuIG5vZGU7CiAgICAgIGVsc2UgaWYgKG5vZGUucGFyZW50Tm9kZSkKICAgICAgICAgIHJldHVybiBmaW5kUGFyZW50KG5vZGUucGFyZW50Tm9kZSwgY29uZGl0aW9uKTsKICAgICAgcmV0dXJuIHVuZGVmaW5lZDsKICB9CiAgZnVuY3Rpb24gY3JlYXRlTnVtYmVySW5wdXQoaW5wdXRDbGFzc05hbWUsIG9wdHMpIHsKICAgICAgdmFyIHdyYXBwZXIgPSBjcmVhdGVFbGVtZW50KCJkaXYiLCAibnVtSW5wdXRXcmFwcGVyIiksIG51bUlucHV0ID0gY3JlYXRlRWxlbWVudCgiaW5wdXQiLCAibnVtSW5wdXQgIiArIGlucHV0Q2xhc3NOYW1lKSwgYXJyb3dVcCA9IGNyZWF0ZUVsZW1lbnQoInNwYW4iLCAiYXJyb3dVcCIpLCBhcnJvd0Rvd24gPSBjcmVhdGVFbGVtZW50KCJzcGFuIiwgImFycm93RG93biIpOwogICAgICBpZiAobmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJNU0lFIDkuMCIpID09PSAtMSkgewogICAgICAgICAgbnVtSW5wdXQudHlwZSA9ICJudW1iZXIiOwogICAgICB9CiAgICAgIGVsc2UgewogICAgICAgICAgbnVtSW5wdXQudHlwZSA9ICJ0ZXh0IjsKICAgICAgICAgIG51bUlucHV0LnBhdHRlcm4gPSAiXFxkKiI7CiAgICAgIH0KICAgICAgaWYgKG9wdHMgIT09IHVuZGVmaW5lZCkKICAgICAgICAgIGZvciAodmFyIGtleSBpbiBvcHRzKQogICAgICAgICAgICAgIG51bUlucHV0LnNldEF0dHJpYnV0ZShrZXksIG9wdHNba2V5XSk7CiAgICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQobnVtSW5wdXQpOwogICAgICB3cmFwcGVyLmFwcGVuZENoaWxkKGFycm93VXApOwogICAgICB3cmFwcGVyLmFwcGVuZENoaWxkKGFycm93RG93bik7CiAgICAgIHJldHVybiB3cmFwcGVyOwogIH0KICBmdW5jdGlvbiBnZXRFdmVudFRhcmdldChldmVudCkgewogICAgICB0cnkgewogICAgICAgICAgaWYgKHR5cGVvZiBldmVudC5jb21wb3NlZFBhdGggPT09ICJmdW5jdGlvbiIpIHsKICAgICAgICAgICAgICB2YXIgcGF0aCA9IGV2ZW50LmNvbXBvc2VkUGF0aCgpOwogICAgICAgICAgICAgIHJldHVybiBwYXRoWzBdOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGV2ZW50LnRhcmdldDsKICAgICAgfQogICAgICBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgIHJldHVybiBldmVudC50YXJnZXQ7CiAgICAgIH0KICB9CgogIHZhciBkb05vdGhpbmcgPSBmdW5jdGlvbiAoKSB7IHJldHVybiB1bmRlZmluZWQ7IH07CiAgdmFyIG1vbnRoVG9TdHIgPSBmdW5jdGlvbiAobW9udGhOdW1iZXIsIHNob3J0aGFuZCwgbG9jYWxlKSB7IHJldHVybiBsb2NhbGUubW9udGhzW3Nob3J0aGFuZCA/ICJzaG9ydGhhbmQiIDogImxvbmdoYW5kIl1bbW9udGhOdW1iZXJdOyB9OwogIHZhciByZXZGb3JtYXQgPSB7CiAgICAgIEQ6IGRvTm90aGluZywKICAgICAgRjogZnVuY3Rpb24gKGRhdGVPYmosIG1vbnRoTmFtZSwgbG9jYWxlKSB7CiAgICAgICAgICBkYXRlT2JqLnNldE1vbnRoKGxvY2FsZS5tb250aHMubG9uZ2hhbmQuaW5kZXhPZihtb250aE5hbWUpKTsKICAgICAgfSwKICAgICAgRzogZnVuY3Rpb24gKGRhdGVPYmosIGhvdXIpIHsKICAgICAgICAgIGRhdGVPYmouc2V0SG91cnMoKGRhdGVPYmouZ2V0SG91cnMoKSA+PSAxMiA/IDEyIDogMCkgKyBwYXJzZUZsb2F0KGhvdXIpKTsKICAgICAgfSwKICAgICAgSDogZnVuY3Rpb24gKGRhdGVPYmosIGhvdXIpIHsKICAgICAgICAgIGRhdGVPYmouc2V0SG91cnMocGFyc2VGbG9hdChob3VyKSk7CiAgICAgIH0sCiAgICAgIEo6IGZ1bmN0aW9uIChkYXRlT2JqLCBkYXkpIHsKICAgICAgICAgIGRhdGVPYmouc2V0RGF0ZShwYXJzZUZsb2F0KGRheSkpOwogICAgICB9LAogICAgICBLOiBmdW5jdGlvbiAoZGF0ZU9iaiwgYW1QTSwgbG9jYWxlKSB7CiAgICAgICAgICBkYXRlT2JqLnNldEhvdXJzKChkYXRlT2JqLmdldEhvdXJzKCkgJSAxMikgKwogICAgICAgICAgICAgIDEyICogaW50KG5ldyBSZWdFeHAobG9jYWxlLmFtUE1bMV0sICJpIikudGVzdChhbVBNKSkpOwogICAgICB9LAogICAgICBNOiBmdW5jdGlvbiAoZGF0ZU9iaiwgc2hvcnRNb250aCwgbG9jYWxlKSB7CiAgICAgICAgICBkYXRlT2JqLnNldE1vbnRoKGxvY2FsZS5tb250aHMuc2hvcnRoYW5kLmluZGV4T2Yoc2hvcnRNb250aCkpOwogICAgICB9LAogICAgICBTOiBmdW5jdGlvbiAoZGF0ZU9iaiwgc2Vjb25kcykgewogICAgICAgICAgZGF0ZU9iai5zZXRTZWNvbmRzKHBhcnNlRmxvYXQoc2Vjb25kcykpOwogICAgICB9LAogICAgICBVOiBmdW5jdGlvbiAoXywgdW5peFNlY29uZHMpIHsgcmV0dXJuIG5ldyBEYXRlKHBhcnNlRmxvYXQodW5peFNlY29uZHMpICogMTAwMCk7IH0sCiAgICAgIFc6IGZ1bmN0aW9uIChkYXRlT2JqLCB3ZWVrTnVtLCBsb2NhbGUpIHsKICAgICAgICAgIHZhciB3ZWVrTnVtYmVyID0gcGFyc2VJbnQod2Vla051bSk7CiAgICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKGRhdGVPYmouZ2V0RnVsbFllYXIoKSwgMCwgMiArICh3ZWVrTnVtYmVyIC0gMSkgKiA3LCAwLCAwLCAwLCAwKTsKICAgICAgICAgIGRhdGUuc2V0RGF0ZShkYXRlLmdldERhdGUoKSAtIGRhdGUuZ2V0RGF5KCkgKyBsb2NhbGUuZmlyc3REYXlPZldlZWspOwogICAgICAgICAgcmV0dXJuIGRhdGU7CiAgICAgIH0sCiAgICAgIFk6IGZ1bmN0aW9uIChkYXRlT2JqLCB5ZWFyKSB7CiAgICAgICAgICBkYXRlT2JqLnNldEZ1bGxZZWFyKHBhcnNlRmxvYXQoeWVhcikpOwogICAgICB9LAogICAgICBaOiBmdW5jdGlvbiAoXywgSVNPRGF0ZSkgeyByZXR1cm4gbmV3IERhdGUoSVNPRGF0ZSk7IH0sCiAgICAgIGQ6IGZ1bmN0aW9uIChkYXRlT2JqLCBkYXkpIHsKICAgICAgICAgIGRhdGVPYmouc2V0RGF0ZShwYXJzZUZsb2F0KGRheSkpOwogICAgICB9LAogICAgICBoOiBmdW5jdGlvbiAoZGF0ZU9iaiwgaG91cikgewogICAgICAgICAgZGF0ZU9iai5zZXRIb3VycygoZGF0ZU9iai5nZXRIb3VycygpID49IDEyID8gMTIgOiAwKSArIHBhcnNlRmxvYXQoaG91cikpOwogICAgICB9LAogICAgICBpOiBmdW5jdGlvbiAoZGF0ZU9iaiwgbWludXRlcykgewogICAgICAgICAgZGF0ZU9iai5zZXRNaW51dGVzKHBhcnNlRmxvYXQobWludXRlcykpOwogICAgICB9LAogICAgICBqOiBmdW5jdGlvbiAoZGF0ZU9iaiwgZGF5KSB7CiAgICAgICAgICBkYXRlT2JqLnNldERhdGUocGFyc2VGbG9hdChkYXkpKTsKICAgICAgfSwKICAgICAgbDogZG9Ob3RoaW5nLAogICAgICBtOiBmdW5jdGlvbiAoZGF0ZU9iaiwgbW9udGgpIHsKICAgICAgICAgIGRhdGVPYmouc2V0TW9udGgocGFyc2VGbG9hdChtb250aCkgLSAxKTsKICAgICAgfSwKICAgICAgbjogZnVuY3Rpb24gKGRhdGVPYmosIG1vbnRoKSB7CiAgICAgICAgICBkYXRlT2JqLnNldE1vbnRoKHBhcnNlRmxvYXQobW9udGgpIC0gMSk7CiAgICAgIH0sCiAgICAgIHM6IGZ1bmN0aW9uIChkYXRlT2JqLCBzZWNvbmRzKSB7CiAgICAgICAgICBkYXRlT2JqLnNldFNlY29uZHMocGFyc2VGbG9hdChzZWNvbmRzKSk7CiAgICAgIH0sCiAgICAgIHU6IGZ1bmN0aW9uIChfLCB1bml4TWlsbFNlY29uZHMpIHsKICAgICAgICAgIHJldHVybiBuZXcgRGF0ZShwYXJzZUZsb2F0KHVuaXhNaWxsU2Vjb25kcykpOwogICAgICB9LAogICAgICB3OiBkb05vdGhpbmcsCiAgICAgIHk6IGZ1bmN0aW9uIChkYXRlT2JqLCB5ZWFyKSB7CiAgICAgICAgICBkYXRlT2JqLnNldEZ1bGxZZWFyKDIwMDAgKyBwYXJzZUZsb2F0KHllYXIpKTsKICAgICAgfSwKICB9OwogIHZhciB0b2tlblJlZ2V4ID0gewogICAgICBEOiAiIiwKICAgICAgRjogIiIsCiAgICAgIEc6ICIoXFxkXFxkfFxcZCkiLAogICAgICBIOiAiKFxcZFxcZHxcXGQpIiwKICAgICAgSjogIihcXGRcXGR8XFxkKVxcdysiLAogICAgICBLOiAiIiwKICAgICAgTTogIiIsCiAgICAgIFM6ICIoXFxkXFxkfFxcZCkiLAogICAgICBVOiAiKC4rKSIsCiAgICAgIFc6ICIoXFxkXFxkfFxcZCkiLAogICAgICBZOiAiKFxcZHs0fSkiLAogICAgICBaOiAiKC4rKSIsCiAgICAgIGQ6ICIoXFxkXFxkfFxcZCkiLAogICAgICBoOiAiKFxcZFxcZHxcXGQpIiwKICAgICAgaTogIihcXGRcXGR8XFxkKSIsCiAgICAgIGo6ICIoXFxkXFxkfFxcZCkiLAogICAgICBsOiAiIiwKICAgICAgbTogIihcXGRcXGR8XFxkKSIsCiAgICAgIG46ICIoXFxkXFxkfFxcZCkiLAogICAgICBzOiAiKFxcZFxcZHxcXGQpIiwKICAgICAgdTogIiguKykiLAogICAgICB3OiAiKFxcZFxcZHxcXGQpIiwKICAgICAgeTogIihcXGR7Mn0pIiwKICB9OwogIHZhciBmb3JtYXRzID0gewogICAgICBaOiBmdW5jdGlvbiAoZGF0ZSkgeyByZXR1cm4gZGF0ZS50b0lTT1N0cmluZygpOyB9LAogICAgICBEOiBmdW5jdGlvbiAoZGF0ZSwgbG9jYWxlLCBvcHRpb25zKSB7CiAgICAgICAgICByZXR1cm4gbG9jYWxlLndlZWtkYXlzLnNob3J0aGFuZFtmb3JtYXRzLncoZGF0ZSwgbG9jYWxlLCBvcHRpb25zKV07CiAgICAgIH0sCiAgICAgIEY6IGZ1bmN0aW9uIChkYXRlLCBsb2NhbGUsIG9wdGlvbnMpIHsKICAgICAgICAgIHJldHVybiBtb250aFRvU3RyKGZvcm1hdHMubihkYXRlLCBsb2NhbGUsIG9wdGlvbnMpIC0gMSwgZmFsc2UsIGxvY2FsZSk7CiAgICAgIH0sCiAgICAgIEc6IGZ1bmN0aW9uIChkYXRlLCBsb2NhbGUsIG9wdGlvbnMpIHsKICAgICAgICAgIHJldHVybiBwYWQoZm9ybWF0cy5oKGRhdGUsIGxvY2FsZSwgb3B0aW9ucykpOwogICAgICB9LAogICAgICBIOiBmdW5jdGlvbiAoZGF0ZSkgeyByZXR1cm4gcGFkKGRhdGUuZ2V0SG91cnMoKSk7IH0sCiAgICAgIEo6IGZ1bmN0aW9uIChkYXRlLCBsb2NhbGUpIHsKICAgICAgICAgIHJldHVybiBsb2NhbGUub3JkaW5hbCAhPT0gdW5kZWZpbmVkCiAgICAgICAgICAgICAgPyBkYXRlLmdldERhdGUoKSArIGxvY2FsZS5vcmRpbmFsKGRhdGUuZ2V0RGF0ZSgpKQogICAgICAgICAgICAgIDogZGF0ZS5nZXREYXRlKCk7CiAgICAgIH0sCiAgICAgIEs6IGZ1bmN0aW9uIChkYXRlLCBsb2NhbGUpIHsgcmV0dXJuIGxvY2FsZS5hbVBNW2ludChkYXRlLmdldEhvdXJzKCkgPiAxMSldOyB9LAogICAgICBNOiBmdW5jdGlvbiAoZGF0ZSwgbG9jYWxlKSB7CiAgICAgICAgICByZXR1cm4gbW9udGhUb1N0cihkYXRlLmdldE1vbnRoKCksIHRydWUsIGxvY2FsZSk7CiAgICAgIH0sCiAgICAgIFM6IGZ1bmN0aW9uIChkYXRlKSB7IHJldHVybiBwYWQoZGF0ZS5nZXRTZWNvbmRzKCkpOyB9LAogICAgICBVOiBmdW5jdGlvbiAoZGF0ZSkgeyByZXR1cm4gZGF0ZS5nZXRUaW1lKCkgLyAxMDAwOyB9LAogICAgICBXOiBmdW5jdGlvbiAoZGF0ZSwgXywgb3B0aW9ucykgewogICAgICAgICAgcmV0dXJuIG9wdGlvbnMuZ2V0V2VlayhkYXRlKTsKICAgICAgfSwKICAgICAgWTogZnVuY3Rpb24gKGRhdGUpIHsgcmV0dXJuIHBhZChkYXRlLmdldEZ1bGxZZWFyKCksIDQpOyB9LAogICAgICBkOiBmdW5jdGlvbiAoZGF0ZSkgeyByZXR1cm4gcGFkKGRhdGUuZ2V0RGF0ZSgpKTsgfSwKICAgICAgaDogZnVuY3Rpb24gKGRhdGUpIHsgcmV0dXJuIChkYXRlLmdldEhvdXJzKCkgJSAxMiA/IGRhdGUuZ2V0SG91cnMoKSAlIDEyIDogMTIpOyB9LAogICAgICBpOiBmdW5jdGlvbiAoZGF0ZSkgeyByZXR1cm4gcGFkKGRhdGUuZ2V0TWludXRlcygpKTsgfSwKICAgICAgajogZnVuY3Rpb24gKGRhdGUpIHsgcmV0dXJuIGRhdGUuZ2V0RGF0ZSgpOyB9LAogICAgICBsOiBmdW5jdGlvbiAoZGF0ZSwgbG9jYWxlKSB7CiAgICAgICAgICByZXR1cm4gbG9jYWxlLndlZWtkYXlzLmxvbmdoYW5kW2RhdGUuZ2V0RGF5KCldOwogICAgICB9LAogICAgICBtOiBmdW5jdGlvbiAoZGF0ZSkgeyByZXR1cm4gcGFkKGRhdGUuZ2V0TW9udGgoKSArIDEpOyB9LAogICAgICBuOiBmdW5jdGlvbiAoZGF0ZSkgeyByZXR1cm4gZGF0ZS5nZXRNb250aCgpICsgMTsgfSwKICAgICAgczogZnVuY3Rpb24gKGRhdGUpIHsgcmV0dXJuIGRhdGUuZ2V0U2Vjb25kcygpOyB9LAogICAgICB1OiBmdW5jdGlvbiAoZGF0ZSkgeyByZXR1cm4gZGF0ZS5nZXRUaW1lKCk7IH0sCiAgICAgIHc6IGZ1bmN0aW9uIChkYXRlKSB7IHJldHVybiBkYXRlLmdldERheSgpOyB9LAogICAgICB5OiBmdW5jdGlvbiAoZGF0ZSkgeyByZXR1cm4gU3RyaW5nKGRhdGUuZ2V0RnVsbFllYXIoKSkuc3Vic3RyaW5nKDIpOyB9LAogIH07CgogIHZhciBjcmVhdGVEYXRlRm9ybWF0dGVyID0gZnVuY3Rpb24gKF9hKSB7CiAgICAgIHZhciBfYiA9IF9hLmNvbmZpZywgY29uZmlnID0gX2IgPT09IHZvaWQgMCA/IGRlZmF1bHRzIDogX2IsIF9jID0gX2EubDEwbiwgbDEwbiA9IF9jID09PSB2b2lkIDAgPyBlbmdsaXNoIDogX2MsIF9kID0gX2EuaXNNb2JpbGUsIGlzTW9iaWxlID0gX2QgPT09IHZvaWQgMCA/IGZhbHNlIDogX2Q7CiAgICAgIHJldHVybiBmdW5jdGlvbiAoZGF0ZU9iaiwgZnJtdCwgb3ZlcnJpZGVMb2NhbGUpIHsKICAgICAgICAgIHZhciBsb2NhbGUgPSBvdmVycmlkZUxvY2FsZSB8fCBsMTBuOwogICAgICAgICAgaWYgKGNvbmZpZy5mb3JtYXREYXRlICE9PSB1bmRlZmluZWQgJiYgIWlzTW9iaWxlKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpZy5mb3JtYXREYXRlKGRhdGVPYmosIGZybXQsIGxvY2FsZSk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gZnJtdAogICAgICAgICAgICAgIC5zcGxpdCgiIikKICAgICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChjLCBpLCBhcnIpIHsKICAgICAgICAgICAgICByZXR1cm4gZm9ybWF0c1tjXSAmJiBhcnJbaSAtIDFdICE9PSAiXFwiCiAgICAgICAgICAgICAgICAgID8gZm9ybWF0c1tjXShkYXRlT2JqLCBsb2NhbGUsIGNvbmZpZykKICAgICAgICAgICAgICAgICAgOiBjICE9PSAiXFwiCiAgICAgICAgICAgICAgICAgICAgICA/IGMKICAgICAgICAgICAgICAgICAgICAgIDogIiI7CiAgICAgICAgICB9KQogICAgICAgICAgICAgIC5qb2luKCIiKTsKICAgICAgfTsKICB9OwogIHZhciBjcmVhdGVEYXRlUGFyc2VyID0gZnVuY3Rpb24gKF9hKSB7CiAgICAgIHZhciBfYiA9IF9hLmNvbmZpZywgY29uZmlnID0gX2IgPT09IHZvaWQgMCA/IGRlZmF1bHRzIDogX2IsIF9jID0gX2EubDEwbiwgbDEwbiA9IF9jID09PSB2b2lkIDAgPyBlbmdsaXNoIDogX2M7CiAgICAgIHJldHVybiBmdW5jdGlvbiAoZGF0ZSwgZ2l2ZW5Gb3JtYXQsIHRpbWVsZXNzLCBjdXN0b21Mb2NhbGUpIHsKICAgICAgICAgIGlmIChkYXRlICE9PSAwICYmICFkYXRlKQogICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7CiAgICAgICAgICB2YXIgbG9jYWxlID0gY3VzdG9tTG9jYWxlIHx8IGwxMG47CiAgICAgICAgICB2YXIgcGFyc2VkRGF0ZTsKICAgICAgICAgIHZhciBkYXRlT3JpZyA9IGRhdGU7CiAgICAgICAgICBpZiAoZGF0ZSBpbnN0YW5jZW9mIERhdGUpCiAgICAgICAgICAgICAgcGFyc2VkRGF0ZSA9IG5ldyBEYXRlKGRhdGUuZ2V0VGltZSgpKTsKICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBkYXRlICE9PSAic3RyaW5nIiAmJgogICAgICAgICAgICAgIGRhdGUudG9GaXhlZCAhPT0gdW5kZWZpbmVkKQogICAgICAgICAgICAgIHBhcnNlZERhdGUgPSBuZXcgRGF0ZShkYXRlKTsKICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBkYXRlID09PSAic3RyaW5nIikgewogICAgICAgICAgICAgIHZhciBmb3JtYXQgPSBnaXZlbkZvcm1hdCB8fCAoY29uZmlnIHx8IGRlZmF1bHRzKS5kYXRlRm9ybWF0OwogICAgICAgICAgICAgIHZhciBkYXRlc3RyID0gU3RyaW5nKGRhdGUpLnRyaW0oKTsKICAgICAgICAgICAgICBpZiAoZGF0ZXN0ciA9PT0gInRvZGF5IikgewogICAgICAgICAgICAgICAgICBwYXJzZWREYXRlID0gbmV3IERhdGUoKTsKICAgICAgICAgICAgICAgICAgdGltZWxlc3MgPSB0cnVlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBlbHNlIGlmIChjb25maWcgJiYgY29uZmlnLnBhcnNlRGF0ZSkgewogICAgICAgICAgICAgICAgICBwYXJzZWREYXRlID0gY29uZmlnLnBhcnNlRGF0ZShkYXRlLCBmb3JtYXQpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBlbHNlIGlmICgvWiQvLnRlc3QoZGF0ZXN0cikgfHwKICAgICAgICAgICAgICAgICAgL0dNVCQvLnRlc3QoZGF0ZXN0cikpIHsKICAgICAgICAgICAgICAgICAgcGFyc2VkRGF0ZSA9IG5ldyBEYXRlKGRhdGUpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgdmFyIG1hdGNoZWQgPSB2b2lkIDAsIG9wcyA9IFtdOwogICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbWF0Y2hJbmRleCA9IDAsIHJlZ2V4U3RyID0gIiI7IGkgPCBmb3JtYXQubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgIHZhciB0b2tlbiA9IGZvcm1hdFtpXTsKICAgICAgICAgICAgICAgICAgICAgIHZhciBpc0JhY2tTbGFzaCA9IHRva2VuID09PSAiXFwiOwogICAgICAgICAgICAgICAgICAgICAgdmFyIGVzY2FwZWQgPSBmb3JtYXRbaSAtIDFdID09PSAiXFwiIHx8IGlzQmFja1NsYXNoOwogICAgICAgICAgICAgICAgICAgICAgaWYgKHRva2VuUmVnZXhbdG9rZW5dICYmICFlc2NhcGVkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVnZXhTdHIgKz0gdG9rZW5SZWdleFt0b2tlbl07CiAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGNoID0gbmV3IFJlZ0V4cChyZWdleFN0cikuZXhlYyhkYXRlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2ggJiYgKG1hdGNoZWQgPSB0cnVlKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHNbdG9rZW4gIT09ICJZIiA/ICJwdXNoIiA6ICJ1bnNoaWZ0Il0oewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm46IHJldkZvcm1hdFt0b2tlbl0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWw6IG1hdGNoWysrbWF0Y2hJbmRleF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFpc0JhY2tTbGFzaCkKICAgICAgICAgICAgICAgICAgICAgICAgICByZWdleFN0ciArPSAiLiI7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgcGFyc2VkRGF0ZSA9CiAgICAgICAgICAgICAgICAgICAgICAhY29uZmlnIHx8ICFjb25maWcubm9DYWxlbmRhcgogICAgICAgICAgICAgICAgICAgICAgICAgID8gbmV3IERhdGUobmV3IERhdGUoKS5nZXRGdWxsWWVhcigpLCAwLCAxLCAwLCAwLCAwLCAwKQogICAgICAgICAgICAgICAgICAgICAgICAgIDogbmV3IERhdGUobmV3IERhdGUoKS5zZXRIb3VycygwLCAwLCAwLCAwKSk7CiAgICAgICAgICAgICAgICAgIG9wcy5mb3JFYWNoKGZ1bmN0aW9uIChfYSkgewogICAgICAgICAgICAgICAgICAgICAgdmFyIGZuID0gX2EuZm4sIHZhbCA9IF9hLnZhbDsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAocGFyc2VkRGF0ZSA9IGZuKHBhcnNlZERhdGUsIHZhbCwgbG9jYWxlKSB8fCBwYXJzZWREYXRlKTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIHBhcnNlZERhdGUgPSBtYXRjaGVkID8gcGFyc2VkRGF0ZSA6IHVuZGVmaW5lZDsKICAgICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoIShwYXJzZWREYXRlIGluc3RhbmNlb2YgRGF0ZSAmJiAhaXNOYU4ocGFyc2VkRGF0ZS5nZXRUaW1lKCkpKSkgewogICAgICAgICAgICAgIGNvbmZpZy5lcnJvckhhbmRsZXIobmV3IEVycm9yKCJJbnZhbGlkIGRhdGUgcHJvdmlkZWQ6ICIgKyBkYXRlT3JpZykpOwogICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAodGltZWxlc3MgPT09IHRydWUpCiAgICAgICAgICAgICAgcGFyc2VkRGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTsKICAgICAgICAgIHJldHVybiBwYXJzZWREYXRlOwogICAgICB9OwogIH07CiAgZnVuY3Rpb24gY29tcGFyZURhdGVzKGRhdGUxLCBkYXRlMiwgdGltZWxlc3MpIHsKICAgICAgaWYgKHRpbWVsZXNzID09PSB2b2lkIDApIHsgdGltZWxlc3MgPSB0cnVlOyB9CiAgICAgIGlmICh0aW1lbGVzcyAhPT0gZmFsc2UpIHsKICAgICAgICAgIHJldHVybiAobmV3IERhdGUoZGF0ZTEuZ2V0VGltZSgpKS5zZXRIb3VycygwLCAwLCAwLCAwKSAtCiAgICAgICAgICAgICAgbmV3IERhdGUoZGF0ZTIuZ2V0VGltZSgpKS5zZXRIb3VycygwLCAwLCAwLCAwKSk7CiAgICAgIH0KICAgICAgcmV0dXJuIGRhdGUxLmdldFRpbWUoKSAtIGRhdGUyLmdldFRpbWUoKTsKICB9CiAgdmFyIGlzQmV0d2VlbiA9IGZ1bmN0aW9uICh0cywgdHMxLCB0czIpIHsKICAgICAgcmV0dXJuIHRzID4gTWF0aC5taW4odHMxLCB0czIpICYmIHRzIDwgTWF0aC5tYXgodHMxLCB0czIpOwogIH07CiAgdmFyIGNhbGN1bGF0ZVNlY29uZHNTaW5jZU1pZG5pZ2h0ID0gZnVuY3Rpb24gKGhvdXJzLCBtaW51dGVzLCBzZWNvbmRzKSB7CiAgICAgIHJldHVybiBob3VycyAqIDM2MDAgKyBtaW51dGVzICogNjAgKyBzZWNvbmRzOwogIH07CiAgdmFyIHBhcnNlU2Vjb25kcyA9IGZ1bmN0aW9uIChzZWNvbmRzU2luY2VNaWRuaWdodCkgewogICAgICB2YXIgaG91cnMgPSBNYXRoLmZsb29yKHNlY29uZHNTaW5jZU1pZG5pZ2h0IC8gMzYwMCksIG1pbnV0ZXMgPSAoc2Vjb25kc1NpbmNlTWlkbmlnaHQgLSBob3VycyAqIDM2MDApIC8gNjA7CiAgICAgIHJldHVybiBbaG91cnMsIG1pbnV0ZXMsIHNlY29uZHNTaW5jZU1pZG5pZ2h0IC0gaG91cnMgKiAzNjAwIC0gbWludXRlcyAqIDYwXTsKICB9OwogIHZhciBkdXJhdGlvbiA9IHsKICAgICAgREFZOiA4NjQwMDAwMCwKICB9OwogIGZ1bmN0aW9uIGdldERlZmF1bHRIb3Vycyhjb25maWcpIHsKICAgICAgdmFyIGhvdXJzID0gY29uZmlnLmRlZmF1bHRIb3VyOwogICAgICB2YXIgbWludXRlcyA9IGNvbmZpZy5kZWZhdWx0TWludXRlOwogICAgICB2YXIgc2Vjb25kcyA9IGNvbmZpZy5kZWZhdWx0U2Vjb25kczsKICAgICAgaWYgKGNvbmZpZy5taW5EYXRlICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgIHZhciBtaW5Ib3VyID0gY29uZmlnLm1pbkRhdGUuZ2V0SG91cnMoKTsKICAgICAgICAgIHZhciBtaW5NaW51dGVzID0gY29uZmlnLm1pbkRhdGUuZ2V0TWludXRlcygpOwogICAgICAgICAgdmFyIG1pblNlY29uZHMgPSBjb25maWcubWluRGF0ZS5nZXRTZWNvbmRzKCk7CiAgICAgICAgICBpZiAoaG91cnMgPCBtaW5Ib3VyKSB7CiAgICAgICAgICAgICAgaG91cnMgPSBtaW5Ib3VyOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGhvdXJzID09PSBtaW5Ib3VyICYmIG1pbnV0ZXMgPCBtaW5NaW51dGVzKSB7CiAgICAgICAgICAgICAgbWludXRlcyA9IG1pbk1pbnV0ZXM7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoaG91cnMgPT09IG1pbkhvdXIgJiYgbWludXRlcyA9PT0gbWluTWludXRlcyAmJiBzZWNvbmRzIDwgbWluU2Vjb25kcykKICAgICAgICAgICAgICBzZWNvbmRzID0gY29uZmlnLm1pbkRhdGUuZ2V0U2Vjb25kcygpOwogICAgICB9CiAgICAgIGlmIChjb25maWcubWF4RGF0ZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICB2YXIgbWF4SHIgPSBjb25maWcubWF4RGF0ZS5nZXRIb3VycygpOwogICAgICAgICAgdmFyIG1heE1pbnV0ZXMgPSBjb25maWcubWF4RGF0ZS5nZXRNaW51dGVzKCk7CiAgICAgICAgICBob3VycyA9IE1hdGgubWluKGhvdXJzLCBtYXhIcik7CiAgICAgICAgICBpZiAoaG91cnMgPT09IG1heEhyKQogICAgICAgICAgICAgIG1pbnV0ZXMgPSBNYXRoLm1pbihtYXhNaW51dGVzLCBtaW51dGVzKTsKICAgICAgICAgIGlmIChob3VycyA9PT0gbWF4SHIgJiYgbWludXRlcyA9PT0gbWF4TWludXRlcykKICAgICAgICAgICAgICBzZWNvbmRzID0gY29uZmlnLm1heERhdGUuZ2V0U2Vjb25kcygpOwogICAgICB9CiAgICAgIHJldHVybiB7IGhvdXJzOiBob3VycywgbWludXRlczogbWludXRlcywgc2Vjb25kczogc2Vjb25kcyB9OwogIH0KCiAgaWYgKHR5cGVvZiBPYmplY3QuYXNzaWduICE9PSAiZnVuY3Rpb24iKSB7CiAgICAgIE9iamVjdC5hc3NpZ24gPSBmdW5jdGlvbiAodGFyZ2V0KSB7CiAgICAgICAgICB2YXIgYXJncyA9IFtdOwogICAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKICAgICAgICAgICAgICBhcmdzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldOwogICAgICAgICAgfQogICAgICAgICAgaWYgKCF0YXJnZXQpIHsKICAgICAgICAgICAgICB0aHJvdyBUeXBlRXJyb3IoIkNhbm5vdCBjb252ZXJ0IHVuZGVmaW5lZCBvciBudWxsIHRvIG9iamVjdCIpOwogICAgICAgICAgfQogICAgICAgICAgdmFyIF9sb29wXzEgPSBmdW5jdGlvbiAoc291cmNlKSB7CiAgICAgICAgICAgICAgaWYgKHNvdXJjZSkgewogICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhzb3VyY2UpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gKHRhcmdldFtrZXldID0gc291cmNlW2tleV0pOyB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICB9OwogICAgICAgICAgZm9yICh2YXIgX2EgPSAwLCBhcmdzXzEgPSBhcmdzOyBfYSA8IGFyZ3NfMS5sZW5ndGg7IF9hKyspIHsKICAgICAgICAgICAgICB2YXIgc291cmNlID0gYXJnc18xW19hXTsKICAgICAgICAgICAgICBfbG9vcF8xKHNvdXJjZSk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gdGFyZ2V0OwogICAgICB9OwogIH0KCiAgdmFyIF9fYXNzaWduID0gKHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19hc3NpZ24pIHx8IGZ1bmN0aW9uICgpIHsKICAgICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uKHQpIHsKICAgICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykgewogICAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07CiAgICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKQogICAgICAgICAgICAgICAgICB0W3BdID0gc1twXTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiB0OwogICAgICB9OwogICAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9OwogIHZhciBfX3NwcmVhZEFycmF5cyA9ICh1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fc3ByZWFkQXJyYXlzKSB8fCBmdW5jdGlvbiAoKSB7CiAgICAgIGZvciAodmFyIHMgPSAwLCBpID0gMCwgaWwgPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgaWw7IGkrKykgcyArPSBhcmd1bWVudHNbaV0ubGVuZ3RoOwogICAgICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspCiAgICAgICAgICBmb3IgKHZhciBhID0gYXJndW1lbnRzW2ldLCBqID0gMCwgamwgPSBhLmxlbmd0aDsgaiA8IGpsOyBqKyssIGsrKykKICAgICAgICAgICAgICByW2tdID0gYVtqXTsKICAgICAgcmV0dXJuIHI7CiAgfTsKICB2YXIgREVCT1VOQ0VEX0NIQU5HRV9NUyA9IDMwMDsKICBmdW5jdGlvbiBGbGF0cGlja3JJbnN0YW5jZShlbGVtZW50LCBpbnN0YW5jZUNvbmZpZykgewogICAgICB2YXIgc2VsZiA9IHsKICAgICAgICAgIGNvbmZpZzogX19hc3NpZ24oX19hc3NpZ24oe30sIGRlZmF1bHRzKSwgZmxhdHBpY2tyLmRlZmF1bHRDb25maWcpLAogICAgICAgICAgbDEwbjogZW5nbGlzaCwKICAgICAgfTsKICAgICAgc2VsZi5wYXJzZURhdGUgPSBjcmVhdGVEYXRlUGFyc2VyKHsgY29uZmlnOiBzZWxmLmNvbmZpZywgbDEwbjogc2VsZi5sMTBuIH0pOwogICAgICBzZWxmLl9oYW5kbGVycyA9IFtdOwogICAgICBzZWxmLnBsdWdpbkVsZW1lbnRzID0gW107CiAgICAgIHNlbGYubG9hZGVkUGx1Z2lucyA9IFtdOwogICAgICBzZWxmLl9iaW5kID0gYmluZDsKICAgICAgc2VsZi5fc2V0SG91cnNGcm9tRGF0ZSA9IHNldEhvdXJzRnJvbURhdGU7CiAgICAgIHNlbGYuX3Bvc2l0aW9uQ2FsZW5kYXIgPSBwb3NpdGlvbkNhbGVuZGFyOwogICAgICBzZWxmLmNoYW5nZU1vbnRoID0gY2hhbmdlTW9udGg7CiAgICAgIHNlbGYuY2hhbmdlWWVhciA9IGNoYW5nZVllYXI7CiAgICAgIHNlbGYuY2xlYXIgPSBjbGVhcjsKICAgICAgc2VsZi5jbG9zZSA9IGNsb3NlOwogICAgICBzZWxmLm9uTW91c2VPdmVyID0gb25Nb3VzZU92ZXI7CiAgICAgIHNlbGYuX2NyZWF0ZUVsZW1lbnQgPSBjcmVhdGVFbGVtZW50OwogICAgICBzZWxmLmNyZWF0ZURheSA9IGNyZWF0ZURheTsKICAgICAgc2VsZi5kZXN0cm95ID0gZGVzdHJveTsKICAgICAgc2VsZi5pc0VuYWJsZWQgPSBpc0VuYWJsZWQ7CiAgICAgIHNlbGYuanVtcFRvRGF0ZSA9IGp1bXBUb0RhdGU7CiAgICAgIHNlbGYudXBkYXRlVmFsdWUgPSB1cGRhdGVWYWx1ZTsKICAgICAgc2VsZi5vcGVuID0gb3BlbjsKICAgICAgc2VsZi5yZWRyYXcgPSByZWRyYXc7CiAgICAgIHNlbGYuc2V0ID0gc2V0OwogICAgICBzZWxmLnNldERhdGUgPSBzZXREYXRlOwogICAgICBzZWxmLnRvZ2dsZSA9IHRvZ2dsZTsKICAgICAgZnVuY3Rpb24gc2V0dXBIZWxwZXJGdW5jdGlvbnMoKSB7CiAgICAgICAgICBzZWxmLnV0aWxzID0gewogICAgICAgICAgICAgIGdldERheXNJbk1vbnRoOiBmdW5jdGlvbiAobW9udGgsIHlyKSB7CiAgICAgICAgICAgICAgICAgIGlmIChtb250aCA9PT0gdm9pZCAwKSB7IG1vbnRoID0gc2VsZi5jdXJyZW50TW9udGg7IH0KICAgICAgICAgICAgICAgICAgaWYgKHlyID09PSB2b2lkIDApIHsgeXIgPSBzZWxmLmN1cnJlbnRZZWFyOyB9CiAgICAgICAgICAgICAgICAgIGlmIChtb250aCA9PT0gMSAmJiAoKHlyICUgNCA9PT0gMCAmJiB5ciAlIDEwMCAhPT0gMCkgfHwgeXIgJSA0MDAgPT09IDApKQogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDI5OwogICAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5sMTBuLmRheXNJbk1vbnRoW21vbnRoXTsKICAgICAgICAgICAgICB9LAogICAgICAgICAgfTsKICAgICAgfQogICAgICBmdW5jdGlvbiBpbml0KCkgewogICAgICAgICAgc2VsZi5lbGVtZW50ID0gc2VsZi5pbnB1dCA9IGVsZW1lbnQ7CiAgICAgICAgICBzZWxmLmlzT3BlbiA9IGZhbHNlOwogICAgICAgICAgcGFyc2VDb25maWcoKTsKICAgICAgICAgIHNldHVwTG9jYWxlKCk7CiAgICAgICAgICBzZXR1cElucHV0cygpOwogICAgICAgICAgc2V0dXBEYXRlcygpOwogICAgICAgICAgc2V0dXBIZWxwZXJGdW5jdGlvbnMoKTsKICAgICAgICAgIGlmICghc2VsZi5pc01vYmlsZSkKICAgICAgICAgICAgICBidWlsZCgpOwogICAgICAgICAgYmluZEV2ZW50cygpOwogICAgICAgICAgaWYgKHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggfHwgc2VsZi5jb25maWcubm9DYWxlbmRhcikgewogICAgICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5lbmFibGVUaW1lKSB7CiAgICAgICAgICAgICAgICAgIHNldEhvdXJzRnJvbURhdGUoc2VsZi5jb25maWcubm9DYWxlbmRhciA/IHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqIDogdW5kZWZpbmVkKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgdXBkYXRlVmFsdWUoZmFsc2UpOwogICAgICAgICAgfQogICAgICAgICAgc2V0Q2FsZW5kYXJXaWR0aCgpOwogICAgICAgICAgdmFyIGlzU2FmYXJpID0gL14oKD8hY2hyb21lfGFuZHJvaWQpLikqc2FmYXJpL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTsKICAgICAgICAgIGlmICghc2VsZi5pc01vYmlsZSAmJiBpc1NhZmFyaSkgewogICAgICAgICAgICAgIHBvc2l0aW9uQ2FsZW5kYXIoKTsKICAgICAgICAgIH0KICAgICAgICAgIHRyaWdnZXJFdmVudCgib25SZWFkeSIpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGdldENsb3Nlc3RBY3RpdmVFbGVtZW50KCkgewogICAgICAgICAgdmFyIF9hOwogICAgICAgICAgcmV0dXJuICgoKF9hID0gc2VsZi5jYWxlbmRhckNvbnRhaW5lcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmdldFJvb3ROb2RlKCkpCiAgICAgICAgICAgICAgLmFjdGl2ZUVsZW1lbnQgfHwgZG9jdW1lbnQuYWN0aXZlRWxlbWVudCk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gYmluZFRvSW5zdGFuY2UoZm4pIHsKICAgICAgICAgIHJldHVybiBmbi5iaW5kKHNlbGYpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHNldENhbGVuZGFyV2lkdGgoKSB7CiAgICAgICAgICB2YXIgY29uZmlnID0gc2VsZi5jb25maWc7CiAgICAgICAgICBpZiAoY29uZmlnLndlZWtOdW1iZXJzID09PSBmYWxzZSAmJiBjb25maWcuc2hvd01vbnRocyA9PT0gMSkgewogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICAgIGVsc2UgaWYgKGNvbmZpZy5ub0NhbGVuZGFyICE9PSB0cnVlKSB7CiAgICAgICAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIGlmIChzZWxmLmNhbGVuZGFyQ29udGFpbmVyICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuc3R5bGUudmlzaWJpbGl0eSA9ICJoaWRkZW4iOwogICAgICAgICAgICAgICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBpZiAoc2VsZi5kYXlzQ29udGFpbmVyICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgICAgICAgIHZhciBkYXlzV2lkdGggPSAoc2VsZi5kYXlzLm9mZnNldFdpZHRoICsgMSkgKiBjb25maWcuc2hvd01vbnRoczsKICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZGF5c0NvbnRhaW5lci5zdHlsZS53aWR0aCA9IGRheXNXaWR0aCArICJweCI7CiAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnN0eWxlLndpZHRoID0KICAgICAgICAgICAgICAgICAgICAgICAgICBkYXlzV2lkdGggKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoc2VsZi53ZWVrV3JhcHBlciAhPT0gdW5kZWZpbmVkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHNlbGYud2Vla1dyYXBwZXIub2Zmc2V0V2lkdGgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogMCkgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAicHgiOwogICAgICAgICAgICAgICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgidmlzaWJpbGl0eSIpOwogICAgICAgICAgICAgICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgiZGlzcGxheSIpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gdXBkYXRlVGltZShlKSB7CiAgICAgICAgICBpZiAoc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICAgIHZhciBkZWZhdWx0RGF0ZSA9IHNlbGYuY29uZmlnLm1pbkRhdGUgPT09IHVuZGVmaW5lZCB8fAogICAgICAgICAgICAgICAgICBjb21wYXJlRGF0ZXMobmV3IERhdGUoKSwgc2VsZi5jb25maWcubWluRGF0ZSkgPj0gMAogICAgICAgICAgICAgICAgICA/IG5ldyBEYXRlKCkKICAgICAgICAgICAgICAgICAgOiBuZXcgRGF0ZShzZWxmLmNvbmZpZy5taW5EYXRlLmdldFRpbWUoKSk7CiAgICAgICAgICAgICAgdmFyIGRlZmF1bHRzID0gZ2V0RGVmYXVsdEhvdXJzKHNlbGYuY29uZmlnKTsKICAgICAgICAgICAgICBkZWZhdWx0RGF0ZS5zZXRIb3VycyhkZWZhdWx0cy5ob3VycywgZGVmYXVsdHMubWludXRlcywgZGVmYXVsdHMuc2Vjb25kcywgZGVmYXVsdERhdGUuZ2V0TWlsbGlzZWNvbmRzKCkpOwogICAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlcyA9IFtkZWZhdWx0RGF0ZV07CiAgICAgICAgICAgICAgc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmogPSBkZWZhdWx0RGF0ZTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChlICE9PSB1bmRlZmluZWQgJiYgZS50eXBlICE9PSAiYmx1ciIpIHsKICAgICAgICAgICAgICB0aW1lV3JhcHBlcihlKTsKICAgICAgICAgIH0KICAgICAgICAgIHZhciBwcmV2VmFsdWUgPSBzZWxmLl9pbnB1dC52YWx1ZTsKICAgICAgICAgIHNldEhvdXJzRnJvbUlucHV0cygpOwogICAgICAgICAgdXBkYXRlVmFsdWUoKTsKICAgICAgICAgIGlmIChzZWxmLl9pbnB1dC52YWx1ZSAhPT0gcHJldlZhbHVlKSB7CiAgICAgICAgICAgICAgc2VsZi5fZGVib3VuY2VkQ2hhbmdlKCk7CiAgICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gYW1wbTJtaWxpdGFyeShob3VyLCBhbVBNKSB7CiAgICAgICAgICByZXR1cm4gKGhvdXIgJSAxMikgKyAxMiAqIGludChhbVBNID09PSBzZWxmLmwxMG4uYW1QTVsxXSk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gbWlsaXRhcnkyYW1wbShob3VyKSB7CiAgICAgICAgICBzd2l0Y2ggKGhvdXIgJSAyNCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgICAgICByZXR1cm4gMTI7CiAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgcmV0dXJuIGhvdXIgJSAxMjsKICAgICAgICAgIH0KICAgICAgfQogICAgICBmdW5jdGlvbiBzZXRIb3Vyc0Zyb21JbnB1dHMoKSB7CiAgICAgICAgICBpZiAoc2VsZi5ob3VyRWxlbWVudCA9PT0gdW5kZWZpbmVkIHx8IHNlbGYubWludXRlRWxlbWVudCA9PT0gdW5kZWZpbmVkKQogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIHZhciBob3VycyA9IChwYXJzZUludChzZWxmLmhvdXJFbGVtZW50LnZhbHVlLnNsaWNlKC0yKSwgMTApIHx8IDApICUgMjQsIG1pbnV0ZXMgPSAocGFyc2VJbnQoc2VsZi5taW51dGVFbGVtZW50LnZhbHVlLCAxMCkgfHwgMCkgJSA2MCwgc2Vjb25kcyA9IHNlbGYuc2Vjb25kRWxlbWVudCAhPT0gdW5kZWZpbmVkCiAgICAgICAgICAgICAgPyAocGFyc2VJbnQoc2VsZi5zZWNvbmRFbGVtZW50LnZhbHVlLCAxMCkgfHwgMCkgJSA2MAogICAgICAgICAgICAgIDogMDsKICAgICAgICAgIGlmIChzZWxmLmFtUE0gIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgIGhvdXJzID0gYW1wbTJtaWxpdGFyeShob3Vycywgc2VsZi5hbVBNLnRleHRDb250ZW50KTsKICAgICAgICAgIH0KICAgICAgICAgIHZhciBsaW1pdE1pbkhvdXJzID0gc2VsZi5jb25maWcubWluVGltZSAhPT0gdW5kZWZpbmVkIHx8CiAgICAgICAgICAgICAgKHNlbGYuY29uZmlnLm1pbkRhdGUgJiYKICAgICAgICAgICAgICAgICAgc2VsZi5taW5EYXRlSGFzVGltZSAmJgogICAgICAgICAgICAgICAgICBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiAmJgogICAgICAgICAgICAgICAgICBjb21wYXJlRGF0ZXMoc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmosIHNlbGYuY29uZmlnLm1pbkRhdGUsIHRydWUpID09PQogICAgICAgICAgICAgICAgICAgICAgMCk7CiAgICAgICAgICB2YXIgbGltaXRNYXhIb3VycyA9IHNlbGYuY29uZmlnLm1heFRpbWUgIT09IHVuZGVmaW5lZCB8fAogICAgICAgICAgICAgIChzZWxmLmNvbmZpZy5tYXhEYXRlICYmCiAgICAgICAgICAgICAgICAgIHNlbGYubWF4RGF0ZUhhc1RpbWUgJiYKICAgICAgICAgICAgICAgICAgc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmogJiYKICAgICAgICAgICAgICAgICAgY29tcGFyZURhdGVzKHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqLCBzZWxmLmNvbmZpZy5tYXhEYXRlLCB0cnVlKSA9PT0KICAgICAgICAgICAgICAgICAgICAgIDApOwogICAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1heFRpbWUgIT09IHVuZGVmaW5lZCAmJgogICAgICAgICAgICAgIHNlbGYuY29uZmlnLm1pblRpbWUgIT09IHVuZGVmaW5lZCAmJgogICAgICAgICAgICAgIHNlbGYuY29uZmlnLm1pblRpbWUgPiBzZWxmLmNvbmZpZy5tYXhUaW1lKSB7CiAgICAgICAgICAgICAgdmFyIG1pbkJvdW5kID0gY2FsY3VsYXRlU2Vjb25kc1NpbmNlTWlkbmlnaHQoc2VsZi5jb25maWcubWluVGltZS5nZXRIb3VycygpLCBzZWxmLmNvbmZpZy5taW5UaW1lLmdldE1pbnV0ZXMoKSwgc2VsZi5jb25maWcubWluVGltZS5nZXRTZWNvbmRzKCkpOwogICAgICAgICAgICAgIHZhciBtYXhCb3VuZCA9IGNhbGN1bGF0ZVNlY29uZHNTaW5jZU1pZG5pZ2h0KHNlbGYuY29uZmlnLm1heFRpbWUuZ2V0SG91cnMoKSwgc2VsZi5jb25maWcubWF4VGltZS5nZXRNaW51dGVzKCksIHNlbGYuY29uZmlnLm1heFRpbWUuZ2V0U2Vjb25kcygpKTsKICAgICAgICAgICAgICB2YXIgY3VycmVudFRpbWUgPSBjYWxjdWxhdGVTZWNvbmRzU2luY2VNaWRuaWdodChob3VycywgbWludXRlcywgc2Vjb25kcyk7CiAgICAgICAgICAgICAgaWYgKGN1cnJlbnRUaW1lID4gbWF4Qm91bmQgJiYgY3VycmVudFRpbWUgPCBtaW5Cb3VuZCkgewogICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gcGFyc2VTZWNvbmRzKG1pbkJvdW5kKTsKICAgICAgICAgICAgICAgICAgaG91cnMgPSByZXN1bHRbMF07CiAgICAgICAgICAgICAgICAgIG1pbnV0ZXMgPSByZXN1bHRbMV07CiAgICAgICAgICAgICAgICAgIHNlY29uZHMgPSByZXN1bHRbMl07CiAgICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgaWYgKGxpbWl0TWF4SG91cnMpIHsKICAgICAgICAgICAgICAgICAgdmFyIG1heFRpbWUgPSBzZWxmLmNvbmZpZy5tYXhUaW1lICE9PSB1bmRlZmluZWQKICAgICAgICAgICAgICAgICAgICAgID8gc2VsZi5jb25maWcubWF4VGltZQogICAgICAgICAgICAgICAgICAgICAgOiBzZWxmLmNvbmZpZy5tYXhEYXRlOwogICAgICAgICAgICAgICAgICBob3VycyA9IE1hdGgubWluKGhvdXJzLCBtYXhUaW1lLmdldEhvdXJzKCkpOwogICAgICAgICAgICAgICAgICBpZiAoaG91cnMgPT09IG1heFRpbWUuZ2V0SG91cnMoKSkKICAgICAgICAgICAgICAgICAgICAgIG1pbnV0ZXMgPSBNYXRoLm1pbihtaW51dGVzLCBtYXhUaW1lLmdldE1pbnV0ZXMoKSk7CiAgICAgICAgICAgICAgICAgIGlmIChtaW51dGVzID09PSBtYXhUaW1lLmdldE1pbnV0ZXMoKSkKICAgICAgICAgICAgICAgICAgICAgIHNlY29uZHMgPSBNYXRoLm1pbihzZWNvbmRzLCBtYXhUaW1lLmdldFNlY29uZHMoKSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmIChsaW1pdE1pbkhvdXJzKSB7CiAgICAgICAgICAgICAgICAgIHZhciBtaW5UaW1lID0gc2VsZi5jb25maWcubWluVGltZSAhPT0gdW5kZWZpbmVkCiAgICAgICAgICAgICAgICAgICAgICA/IHNlbGYuY29uZmlnLm1pblRpbWUKICAgICAgICAgICAgICAgICAgICAgIDogc2VsZi5jb25maWcubWluRGF0ZTsKICAgICAgICAgICAgICAgICAgaG91cnMgPSBNYXRoLm1heChob3VycywgbWluVGltZS5nZXRIb3VycygpKTsKICAgICAgICAgICAgICAgICAgaWYgKGhvdXJzID09PSBtaW5UaW1lLmdldEhvdXJzKCkgJiYgbWludXRlcyA8IG1pblRpbWUuZ2V0TWludXRlcygpKQogICAgICAgICAgICAgICAgICAgICAgbWludXRlcyA9IG1pblRpbWUuZ2V0TWludXRlcygpOwogICAgICAgICAgICAgICAgICBpZiAobWludXRlcyA9PT0gbWluVGltZS5nZXRNaW51dGVzKCkpCiAgICAgICAgICAgICAgICAgICAgICBzZWNvbmRzID0gTWF0aC5tYXgoc2Vjb25kcywgbWluVGltZS5nZXRTZWNvbmRzKCkpOwogICAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHNldEhvdXJzKGhvdXJzLCBtaW51dGVzLCBzZWNvbmRzKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBzZXRIb3Vyc0Zyb21EYXRlKGRhdGVPYmopIHsKICAgICAgICAgIHZhciBkYXRlID0gZGF0ZU9iaiB8fCBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iajsKICAgICAgICAgIGlmIChkYXRlICYmIGRhdGUgaW5zdGFuY2VvZiBEYXRlKSB7CiAgICAgICAgICAgICAgc2V0SG91cnMoZGF0ZS5nZXRIb3VycygpLCBkYXRlLmdldE1pbnV0ZXMoKSwgZGF0ZS5nZXRTZWNvbmRzKCkpOwogICAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIHNldEhvdXJzKGhvdXJzLCBtaW51dGVzLCBzZWNvbmRzKSB7CiAgICAgICAgICBpZiAoc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmogIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgIHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqLnNldEhvdXJzKGhvdXJzICUgMjQsIG1pbnV0ZXMsIHNlY29uZHMgfHwgMCwgMCk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoIXNlbGYuaG91ckVsZW1lbnQgfHwgIXNlbGYubWludXRlRWxlbWVudCB8fCBzZWxmLmlzTW9iaWxlKQogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIHNlbGYuaG91ckVsZW1lbnQudmFsdWUgPSBwYWQoIXNlbGYuY29uZmlnLnRpbWVfMjRocgogICAgICAgICAgICAgID8gKCgxMiArIGhvdXJzKSAlIDEyKSArIDEyICogaW50KGhvdXJzICUgMTIgPT09IDApCiAgICAgICAgICAgICAgOiBob3Vycyk7CiAgICAgICAgICBzZWxmLm1pbnV0ZUVsZW1lbnQudmFsdWUgPSBwYWQobWludXRlcyk7CiAgICAgICAgICBpZiAoc2VsZi5hbVBNICE9PSB1bmRlZmluZWQpCiAgICAgICAgICAgICAgc2VsZi5hbVBNLnRleHRDb250ZW50ID0gc2VsZi5sMTBuLmFtUE1baW50KGhvdXJzID49IDEyKV07CiAgICAgICAgICBpZiAoc2VsZi5zZWNvbmRFbGVtZW50ICE9PSB1bmRlZmluZWQpCiAgICAgICAgICAgICAgc2VsZi5zZWNvbmRFbGVtZW50LnZhbHVlID0gcGFkKHNlY29uZHMpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIG9uWWVhcklucHV0KGV2ZW50KSB7CiAgICAgICAgICB2YXIgZXZlbnRUYXJnZXQgPSBnZXRFdmVudFRhcmdldChldmVudCk7CiAgICAgICAgICB2YXIgeWVhciA9IHBhcnNlSW50KGV2ZW50VGFyZ2V0LnZhbHVlKSArIChldmVudC5kZWx0YSB8fCAwKTsKICAgICAgICAgIGlmICh5ZWFyIC8gMTAwMCA+IDEgfHwKICAgICAgICAgICAgICAoZXZlbnQua2V5ID09PSAiRW50ZXIiICYmICEvW15cZF0vLnRlc3QoeWVhci50b1N0cmluZygpKSkpIHsKICAgICAgICAgICAgICBjaGFuZ2VZZWFyKHllYXIpOwogICAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIGJpbmQoZWxlbWVudCwgZXZlbnQsIGhhbmRsZXIsIG9wdGlvbnMpIHsKICAgICAgICAgIGlmIChldmVudCBpbnN0YW5jZW9mIEFycmF5KQogICAgICAgICAgICAgIHJldHVybiBldmVudC5mb3JFYWNoKGZ1bmN0aW9uIChldikgeyByZXR1cm4gYmluZChlbGVtZW50LCBldiwgaGFuZGxlciwgb3B0aW9ucyk7IH0pOwogICAgICAgICAgaWYgKGVsZW1lbnQgaW5zdGFuY2VvZiBBcnJheSkKICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudC5mb3JFYWNoKGZ1bmN0aW9uIChlbCkgeyByZXR1cm4gYmluZChlbCwgZXZlbnQsIGhhbmRsZXIsIG9wdGlvbnMpOyB9KTsKICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgaGFuZGxlciwgb3B0aW9ucyk7CiAgICAgICAgICBzZWxmLl9oYW5kbGVycy5wdXNoKHsKICAgICAgICAgICAgICByZW1vdmU6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgaGFuZGxlciwgb3B0aW9ucyk7IH0sCiAgICAgICAgICB9KTsKICAgICAgfQogICAgICBmdW5jdGlvbiB0cmlnZ2VyQ2hhbmdlKCkgewogICAgICAgICAgdHJpZ2dlckV2ZW50KCJvbkNoYW5nZSIpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGJpbmRFdmVudHMoKSB7CiAgICAgICAgICBpZiAoc2VsZi5jb25maWcud3JhcCkgewogICAgICAgICAgICAgIFsib3BlbiIsICJjbG9zZSIsICJ0b2dnbGUiLCAiY2xlYXIiXS5mb3JFYWNoKGZ1bmN0aW9uIChldnQpIHsKICAgICAgICAgICAgICAgICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChzZWxmLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgiW2RhdGEtIiArIGV2dCArICJdIiksIGZ1bmN0aW9uIChlbCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJpbmQoZWwsICJjbGljayIsIHNlbGZbZXZ0XSk7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHNlbGYuaXNNb2JpbGUpIHsKICAgICAgICAgICAgICBzZXR1cE1vYmlsZSgpOwogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICAgIHZhciBkZWJvdW5jZWRSZXNpemUgPSBkZWJvdW5jZShvblJlc2l6ZSwgNTApOwogICAgICAgICAgc2VsZi5fZGVib3VuY2VkQ2hhbmdlID0gZGVib3VuY2UodHJpZ2dlckNoYW5nZSwgREVCT1VOQ0VEX0NIQU5HRV9NUyk7CiAgICAgICAgICBpZiAoc2VsZi5kYXlzQ29udGFpbmVyICYmICEvaVBob25lfGlQYWR8aVBvZC9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpCiAgICAgICAgICAgICAgYmluZChzZWxmLmRheXNDb250YWluZXIsICJtb3VzZW92ZXIiLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICBpZiAoc2VsZi5jb25maWcubW9kZSA9PT0gInJhbmdlIikKICAgICAgICAgICAgICAgICAgICAgIG9uTW91c2VPdmVyKGdldEV2ZW50VGFyZ2V0KGUpKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgIGJpbmQoc2VsZi5faW5wdXQsICJrZXlkb3duIiwgb25LZXlEb3duKTsKICAgICAgICAgIGlmIChzZWxmLmNhbGVuZGFyQ29udGFpbmVyICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICBiaW5kKHNlbGYuY2FsZW5kYXJDb250YWluZXIsICJrZXlkb3duIiwgb25LZXlEb3duKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmICghc2VsZi5jb25maWcuaW5saW5lICYmICFzZWxmLmNvbmZpZy5zdGF0aWMpCiAgICAgICAgICAgICAgYmluZCh3aW5kb3csICJyZXNpemUiLCBkZWJvdW5jZWRSZXNpemUpOwogICAgICAgICAgaWYgKHdpbmRvdy5vbnRvdWNoc3RhcnQgIT09IHVuZGVmaW5lZCkKICAgICAgICAgICAgICBiaW5kKHdpbmRvdy5kb2N1bWVudCwgInRvdWNoc3RhcnQiLCBkb2N1bWVudENsaWNrKTsKICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICBiaW5kKHdpbmRvdy5kb2N1bWVudCwgIm1vdXNlZG93biIsIGRvY3VtZW50Q2xpY2spOwogICAgICAgICAgYmluZCh3aW5kb3cuZG9jdW1lbnQsICJmb2N1cyIsIGRvY3VtZW50Q2xpY2ssIHsgY2FwdHVyZTogdHJ1ZSB9KTsKICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5jbGlja09wZW5zID09PSB0cnVlKSB7CiAgICAgICAgICAgICAgYmluZChzZWxmLl9pbnB1dCwgImZvY3VzIiwgc2VsZi5vcGVuKTsKICAgICAgICAgICAgICBiaW5kKHNlbGYuX2lucHV0LCAiY2xpY2siLCBzZWxmLm9wZW4pOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHNlbGYuZGF5c0NvbnRhaW5lciAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgYmluZChzZWxmLm1vbnRoTmF2LCAiY2xpY2siLCBvbk1vbnRoTmF2Q2xpY2spOwogICAgICAgICAgICAgIGJpbmQoc2VsZi5tb250aE5hdiwgWyJrZXl1cCIsICJpbmNyZW1lbnQiXSwgb25ZZWFySW5wdXQpOwogICAgICAgICAgICAgIGJpbmQoc2VsZi5kYXlzQ29udGFpbmVyLCAiY2xpY2siLCBzZWxlY3REYXRlKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChzZWxmLnRpbWVDb250YWluZXIgIT09IHVuZGVmaW5lZCAmJgogICAgICAgICAgICAgIHNlbGYubWludXRlRWxlbWVudCAhPT0gdW5kZWZpbmVkICYmCiAgICAgICAgICAgICAgc2VsZi5ob3VyRWxlbWVudCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgdmFyIHNlbFRleHQgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICByZXR1cm4gZ2V0RXZlbnRUYXJnZXQoZSkuc2VsZWN0KCk7CiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICBiaW5kKHNlbGYudGltZUNvbnRhaW5lciwgWyJpbmNyZW1lbnQiXSwgdXBkYXRlVGltZSk7CiAgICAgICAgICAgICAgYmluZChzZWxmLnRpbWVDb250YWluZXIsICJibHVyIiwgdXBkYXRlVGltZSwgeyBjYXB0dXJlOiB0cnVlIH0pOwogICAgICAgICAgICAgIGJpbmQoc2VsZi50aW1lQ29udGFpbmVyLCAiY2xpY2siLCB0aW1lSW5jcmVtZW50KTsKICAgICAgICAgICAgICBiaW5kKFtzZWxmLmhvdXJFbGVtZW50LCBzZWxmLm1pbnV0ZUVsZW1lbnRdLCBbImZvY3VzIiwgImNsaWNrIl0sIHNlbFRleHQpOwogICAgICAgICAgICAgIGlmIChzZWxmLnNlY29uZEVsZW1lbnQgIT09IHVuZGVmaW5lZCkKICAgICAgICAgICAgICAgICAgYmluZChzZWxmLnNlY29uZEVsZW1lbnQsICJmb2N1cyIsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNlbGYuc2Vjb25kRWxlbWVudCAmJiBzZWxmLnNlY29uZEVsZW1lbnQuc2VsZWN0KCk7IH0pOwogICAgICAgICAgICAgIGlmIChzZWxmLmFtUE0gIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICBiaW5kKHNlbGYuYW1QTSwgImNsaWNrIiwgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVRpbWUoZSk7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5hbGxvd0lucHV0KSB7CiAgICAgICAgICAgICAgYmluZChzZWxmLl9pbnB1dCwgImJsdXIiLCBvbkJsdXIpOwogICAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIGp1bXBUb0RhdGUoanVtcERhdGUsIHRyaWdnZXJDaGFuZ2UpIHsKICAgICAgICAgIHZhciBqdW1wVG8gPSBqdW1wRGF0ZSAhPT0gdW5kZWZpbmVkCiAgICAgICAgICAgICAgPyBzZWxmLnBhcnNlRGF0ZShqdW1wRGF0ZSkKICAgICAgICAgICAgICA6IHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqIHx8CiAgICAgICAgICAgICAgICAgIChzZWxmLmNvbmZpZy5taW5EYXRlICYmIHNlbGYuY29uZmlnLm1pbkRhdGUgPiBzZWxmLm5vdwogICAgICAgICAgICAgICAgICAgICAgPyBzZWxmLmNvbmZpZy5taW5EYXRlCiAgICAgICAgICAgICAgICAgICAgICA6IHNlbGYuY29uZmlnLm1heERhdGUgJiYgc2VsZi5jb25maWcubWF4RGF0ZSA8IHNlbGYubm93CiAgICAgICAgICAgICAgICAgICAgICAgICAgPyBzZWxmLmNvbmZpZy5tYXhEYXRlCiAgICAgICAgICAgICAgICAgICAgICAgICAgOiBzZWxmLm5vdyk7CiAgICAgICAgICB2YXIgb2xkWWVhciA9IHNlbGYuY3VycmVudFllYXI7CiAgICAgICAgICB2YXIgb2xkTW9udGggPSBzZWxmLmN1cnJlbnRNb250aDsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgaWYgKGp1bXBUbyAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICAgIHNlbGYuY3VycmVudFllYXIgPSBqdW1wVG8uZ2V0RnVsbFllYXIoKTsKICAgICAgICAgICAgICAgICAgc2VsZi5jdXJyZW50TW9udGggPSBqdW1wVG8uZ2V0TW9udGgoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgIGUubWVzc2FnZSA9ICJJbnZhbGlkIGRhdGUgc3VwcGxpZWQ6ICIgKyBqdW1wVG87CiAgICAgICAgICAgICAgc2VsZi5jb25maWcuZXJyb3JIYW5kbGVyKGUpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHRyaWdnZXJDaGFuZ2UgJiYgc2VsZi5jdXJyZW50WWVhciAhPT0gb2xkWWVhcikgewogICAgICAgICAgICAgIHRyaWdnZXJFdmVudCgib25ZZWFyQ2hhbmdlIik7CiAgICAgICAgICAgICAgYnVpbGRNb250aFN3aXRjaCgpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHRyaWdnZXJDaGFuZ2UgJiYKICAgICAgICAgICAgICAoc2VsZi5jdXJyZW50WWVhciAhPT0gb2xkWWVhciB8fCBzZWxmLmN1cnJlbnRNb250aCAhPT0gb2xkTW9udGgpKSB7CiAgICAgICAgICAgICAgdHJpZ2dlckV2ZW50KCJvbk1vbnRoQ2hhbmdlIik7CiAgICAgICAgICB9CiAgICAgICAgICBzZWxmLnJlZHJhdygpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHRpbWVJbmNyZW1lbnQoZSkgewogICAgICAgICAgdmFyIGV2ZW50VGFyZ2V0ID0gZ2V0RXZlbnRUYXJnZXQoZSk7CiAgICAgICAgICBpZiAofmV2ZW50VGFyZ2V0LmNsYXNzTmFtZS5pbmRleE9mKCJhcnJvdyIpKQogICAgICAgICAgICAgIGluY3JlbWVudE51bUlucHV0KGUsIGV2ZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygiYXJyb3dVcCIpID8gMSA6IC0xKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBpbmNyZW1lbnROdW1JbnB1dChlLCBkZWx0YSwgaW5wdXRFbGVtKSB7CiAgICAgICAgICB2YXIgdGFyZ2V0ID0gZSAmJiBnZXRFdmVudFRhcmdldChlKTsKICAgICAgICAgIHZhciBpbnB1dCA9IGlucHV0RWxlbSB8fAogICAgICAgICAgICAgICh0YXJnZXQgJiYgdGFyZ2V0LnBhcmVudE5vZGUgJiYgdGFyZ2V0LnBhcmVudE5vZGUuZmlyc3RDaGlsZCk7CiAgICAgICAgICB2YXIgZXZlbnQgPSBjcmVhdGVFdmVudCgiaW5jcmVtZW50Iik7CiAgICAgICAgICBldmVudC5kZWx0YSA9IGRlbHRhOwogICAgICAgICAgaW5wdXQgJiYgaW5wdXQuZGlzcGF0Y2hFdmVudChldmVudCk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gYnVpbGQoKSB7CiAgICAgICAgICB2YXIgZnJhZ21lbnQgPSB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpOwogICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoImRpdiIsICJmbGF0cGlja3ItY2FsZW5kYXIiKTsKICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIudGFiSW5kZXggPSAtMTsKICAgICAgICAgIGlmICghc2VsZi5jb25maWcubm9DYWxlbmRhcikgewogICAgICAgICAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKGJ1aWxkTW9udGhOYXYoKSk7CiAgICAgICAgICAgICAgc2VsZi5pbm5lckNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoImRpdiIsICJmbGF0cGlja3ItaW5uZXJDb250YWluZXIiKTsKICAgICAgICAgICAgICBpZiAoc2VsZi5jb25maWcud2Vla051bWJlcnMpIHsKICAgICAgICAgICAgICAgICAgdmFyIF9hID0gYnVpbGRXZWVrcygpLCB3ZWVrV3JhcHBlciA9IF9hLndlZWtXcmFwcGVyLCB3ZWVrTnVtYmVycyA9IF9hLndlZWtOdW1iZXJzOwogICAgICAgICAgICAgICAgICBzZWxmLmlubmVyQ29udGFpbmVyLmFwcGVuZENoaWxkKHdlZWtXcmFwcGVyKTsKICAgICAgICAgICAgICAgICAgc2VsZi53ZWVrTnVtYmVycyA9IHdlZWtOdW1iZXJzOwogICAgICAgICAgICAgICAgICBzZWxmLndlZWtXcmFwcGVyID0gd2Vla1dyYXBwZXI7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHNlbGYuckNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoImRpdiIsICJmbGF0cGlja3ItckNvbnRhaW5lciIpOwogICAgICAgICAgICAgIHNlbGYuckNvbnRhaW5lci5hcHBlbmRDaGlsZChidWlsZFdlZWtkYXlzKCkpOwogICAgICAgICAgICAgIGlmICghc2VsZi5kYXlzQ29udGFpbmVyKSB7CiAgICAgICAgICAgICAgICAgIHNlbGYuZGF5c0NvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoImRpdiIsICJmbGF0cGlja3ItZGF5cyIpOwogICAgICAgICAgICAgICAgICBzZWxmLmRheXNDb250YWluZXIudGFiSW5kZXggPSAtMTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgYnVpbGREYXlzKCk7CiAgICAgICAgICAgICAgc2VsZi5yQ29udGFpbmVyLmFwcGVuZENoaWxkKHNlbGYuZGF5c0NvbnRhaW5lcik7CiAgICAgICAgICAgICAgc2VsZi5pbm5lckNvbnRhaW5lci5hcHBlbmRDaGlsZChzZWxmLnJDb250YWluZXIpOwogICAgICAgICAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKHNlbGYuaW5uZXJDb250YWluZXIpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHNlbGYuY29uZmlnLmVuYWJsZVRpbWUpIHsKICAgICAgICAgICAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChidWlsZFRpbWUoKSk7CiAgICAgICAgICB9CiAgICAgICAgICB0b2dnbGVDbGFzcyhzZWxmLmNhbGVuZGFyQ29udGFpbmVyLCAicmFuZ2VNb2RlIiwgc2VsZi5jb25maWcubW9kZSA9PT0gInJhbmdlIik7CiAgICAgICAgICB0b2dnbGVDbGFzcyhzZWxmLmNhbGVuZGFyQ29udGFpbmVyLCAiYW5pbWF0ZSIsIHNlbGYuY29uZmlnLmFuaW1hdGUgPT09IHRydWUpOwogICAgICAgICAgdG9nZ2xlQ2xhc3Moc2VsZi5jYWxlbmRhckNvbnRhaW5lciwgIm11bHRpTW9udGgiLCBzZWxmLmNvbmZpZy5zaG93TW9udGhzID4gMSk7CiAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLmFwcGVuZENoaWxkKGZyYWdtZW50KTsKICAgICAgICAgIHZhciBjdXN0b21BcHBlbmQgPSBzZWxmLmNvbmZpZy5hcHBlbmRUbyAhPT0gdW5kZWZpbmVkICYmCiAgICAgICAgICAgICAgc2VsZi5jb25maWcuYXBwZW5kVG8ubm9kZVR5cGUgIT09IHVuZGVmaW5lZDsKICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5pbmxpbmUgfHwgc2VsZi5jb25maWcuc3RhdGljKSB7CiAgICAgICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKHNlbGYuY29uZmlnLmlubGluZSA/ICJpbmxpbmUiIDogInN0YXRpYyIpOwogICAgICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5pbmxpbmUpIHsKICAgICAgICAgICAgICAgICAgaWYgKCFjdXN0b21BcHBlbmQgJiYgc2VsZi5lbGVtZW50LnBhcmVudE5vZGUpCiAgICAgICAgICAgICAgICAgICAgICBzZWxmLmVsZW1lbnQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoc2VsZi5jYWxlbmRhckNvbnRhaW5lciwgc2VsZi5faW5wdXQubmV4dFNpYmxpbmcpOwogICAgICAgICAgICAgICAgICBlbHNlIGlmIChzZWxmLmNvbmZpZy5hcHBlbmRUbyAhPT0gdW5kZWZpbmVkKQogICAgICAgICAgICAgICAgICAgICAgc2VsZi5jb25maWcuYXBwZW5kVG8uYXBwZW5kQ2hpbGQoc2VsZi5jYWxlbmRhckNvbnRhaW5lcik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5zdGF0aWMpIHsKICAgICAgICAgICAgICAgICAgdmFyIHdyYXBwZXIgPSBjcmVhdGVFbGVtZW50KCJkaXYiLCAiZmxhdHBpY2tyLXdyYXBwZXIiKTsKICAgICAgICAgICAgICAgICAgaWYgKHNlbGYuZWxlbWVudC5wYXJlbnROb2RlKQogICAgICAgICAgICAgICAgICAgICAgc2VsZi5lbGVtZW50LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHdyYXBwZXIsIHNlbGYuZWxlbWVudCk7CiAgICAgICAgICAgICAgICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQoc2VsZi5lbGVtZW50KTsKICAgICAgICAgICAgICAgICAgaWYgKHNlbGYuYWx0SW5wdXQpCiAgICAgICAgICAgICAgICAgICAgICB3cmFwcGVyLmFwcGVuZENoaWxkKHNlbGYuYWx0SW5wdXQpOwogICAgICAgICAgICAgICAgICB3cmFwcGVyLmFwcGVuZENoaWxkKHNlbGYuY2FsZW5kYXJDb250YWluZXIpOwogICAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGlmICghc2VsZi5jb25maWcuc3RhdGljICYmICFzZWxmLmNvbmZpZy5pbmxpbmUpCiAgICAgICAgICAgICAgKHNlbGYuY29uZmlnLmFwcGVuZFRvICE9PSB1bmRlZmluZWQKICAgICAgICAgICAgICAgICAgPyBzZWxmLmNvbmZpZy5hcHBlbmRUbwogICAgICAgICAgICAgICAgICA6IHdpbmRvdy5kb2N1bWVudC5ib2R5KS5hcHBlbmRDaGlsZChzZWxmLmNhbGVuZGFyQ29udGFpbmVyKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBjcmVhdGVEYXkoY2xhc3NOYW1lLCBkYXRlLCBfZGF5TnVtYmVyLCBpKSB7CiAgICAgICAgICB2YXIgZGF0ZUlzRW5hYmxlZCA9IGlzRW5hYmxlZChkYXRlLCB0cnVlKSwgZGF5RWxlbWVudCA9IGNyZWF0ZUVsZW1lbnQoInNwYW4iLCBjbGFzc05hbWUsIGRhdGUuZ2V0RGF0ZSgpLnRvU3RyaW5nKCkpOwogICAgICAgICAgZGF5RWxlbWVudC5kYXRlT2JqID0gZGF0ZTsKICAgICAgICAgIGRheUVsZW1lbnQuJGkgPSBpOwogICAgICAgICAgZGF5RWxlbWVudC5zZXRBdHRyaWJ1dGUoImFyaWEtbGFiZWwiLCBzZWxmLmZvcm1hdERhdGUoZGF0ZSwgc2VsZi5jb25maWcuYXJpYURhdGVGb3JtYXQpKTsKICAgICAgICAgIGlmIChjbGFzc05hbWUuaW5kZXhPZigiaGlkZGVuIikgPT09IC0xICYmCiAgICAgICAgICAgICAgY29tcGFyZURhdGVzKGRhdGUsIHNlbGYubm93KSA9PT0gMCkgewogICAgICAgICAgICAgIHNlbGYudG9kYXlEYXRlRWxlbSA9IGRheUVsZW1lbnQ7CiAgICAgICAgICAgICAgZGF5RWxlbWVudC5jbGFzc0xpc3QuYWRkKCJ0b2RheSIpOwogICAgICAgICAgICAgIGRheUVsZW1lbnQuc2V0QXR0cmlidXRlKCJhcmlhLWN1cnJlbnQiLCAiZGF0ZSIpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGRhdGVJc0VuYWJsZWQpIHsKICAgICAgICAgICAgICBkYXlFbGVtZW50LnRhYkluZGV4ID0gLTE7CiAgICAgICAgICAgICAgaWYgKGlzRGF0ZVNlbGVjdGVkKGRhdGUpKSB7CiAgICAgICAgICAgICAgICAgIGRheUVsZW1lbnQuY2xhc3NMaXN0LmFkZCgic2VsZWN0ZWQiKTsKICAgICAgICAgICAgICAgICAgc2VsZi5zZWxlY3RlZERhdGVFbGVtID0gZGF5RWxlbWVudDsKICAgICAgICAgICAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1vZGUgPT09ICJyYW5nZSIpIHsKICAgICAgICAgICAgICAgICAgICAgIHRvZ2dsZUNsYXNzKGRheUVsZW1lbnQsICJzdGFydFJhbmdlIiwgc2VsZi5zZWxlY3RlZERhdGVzWzBdICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGFyZURhdGVzKGRhdGUsIHNlbGYuc2VsZWN0ZWREYXRlc1swXSwgdHJ1ZSkgPT09IDApOwogICAgICAgICAgICAgICAgICAgICAgdG9nZ2xlQ2xhc3MoZGF5RWxlbWVudCwgImVuZFJhbmdlIiwgc2VsZi5zZWxlY3RlZERhdGVzWzFdICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGFyZURhdGVzKGRhdGUsIHNlbGYuc2VsZWN0ZWREYXRlc1sxXSwgdHJ1ZSkgPT09IDApOwogICAgICAgICAgICAgICAgICAgICAgaWYgKGNsYXNzTmFtZSA9PT0gIm5leHRNb250aERheSIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgZGF5RWxlbWVudC5jbGFzc0xpc3QuYWRkKCJpblJhbmdlIik7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICBkYXlFbGVtZW50LmNsYXNzTGlzdC5hZGQoImZsYXRwaWNrci1kaXNhYmxlZCIpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1vZGUgPT09ICJyYW5nZSIpIHsKICAgICAgICAgICAgICBpZiAoaXNEYXRlSW5SYW5nZShkYXRlKSAmJiAhaXNEYXRlU2VsZWN0ZWQoZGF0ZSkpCiAgICAgICAgICAgICAgICAgIGRheUVsZW1lbnQuY2xhc3NMaXN0LmFkZCgiaW5SYW5nZSIpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHNlbGYud2Vla051bWJlcnMgJiYKICAgICAgICAgICAgICBzZWxmLmNvbmZpZy5zaG93TW9udGhzID09PSAxICYmCiAgICAgICAgICAgICAgY2xhc3NOYW1lICE9PSAicHJldk1vbnRoRGF5IiAmJgogICAgICAgICAgICAgIGkgJSA3ID09PSA2KSB7CiAgICAgICAgICAgICAgc2VsZi53ZWVrTnVtYmVycy5pbnNlcnRBZGphY2VudEhUTUwoImJlZm9yZWVuZCIsICI8c3BhbiBjbGFzcz0nZmxhdHBpY2tyLWRheSc+IiArIHNlbGYuY29uZmlnLmdldFdlZWsoZGF0ZSkgKyAiPC9zcGFuPiIpOwogICAgICAgICAgfQogICAgICAgICAgdHJpZ2dlckV2ZW50KCJvbkRheUNyZWF0ZSIsIGRheUVsZW1lbnQpOwogICAgICAgICAgcmV0dXJuIGRheUVsZW1lbnQ7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZm9jdXNPbkRheUVsZW0odGFyZ2V0Tm9kZSkgewogICAgICAgICAgdGFyZ2V0Tm9kZS5mb2N1cygpOwogICAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1vZGUgPT09ICJyYW5nZSIpCiAgICAgICAgICAgICAgb25Nb3VzZU92ZXIodGFyZ2V0Tm9kZSk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZ2V0Rmlyc3RBdmFpbGFibGVEYXkoZGVsdGEpIHsKICAgICAgICAgIHZhciBzdGFydE1vbnRoID0gZGVsdGEgPiAwID8gMCA6IHNlbGYuY29uZmlnLnNob3dNb250aHMgLSAxOwogICAgICAgICAgdmFyIGVuZE1vbnRoID0gZGVsdGEgPiAwID8gc2VsZi5jb25maWcuc2hvd01vbnRocyA6IC0xOwogICAgICAgICAgZm9yICh2YXIgbSA9IHN0YXJ0TW9udGg7IG0gIT0gZW5kTW9udGg7IG0gKz0gZGVsdGEpIHsKICAgICAgICAgICAgICB2YXIgbW9udGggPSBzZWxmLmRheXNDb250YWluZXIuY2hpbGRyZW5bbV07CiAgICAgICAgICAgICAgdmFyIHN0YXJ0SW5kZXggPSBkZWx0YSA+IDAgPyAwIDogbW9udGguY2hpbGRyZW4ubGVuZ3RoIC0gMTsKICAgICAgICAgICAgICB2YXIgZW5kSW5kZXggPSBkZWx0YSA+IDAgPyBtb250aC5jaGlsZHJlbi5sZW5ndGggOiAtMTsKICAgICAgICAgICAgICBmb3IgKHZhciBpID0gc3RhcnRJbmRleDsgaSAhPSBlbmRJbmRleDsgaSArPSBkZWx0YSkgewogICAgICAgICAgICAgICAgICB2YXIgYyA9IG1vbnRoLmNoaWxkcmVuW2ldOwogICAgICAgICAgICAgICAgICBpZiAoYy5jbGFzc05hbWUuaW5kZXhPZigiaGlkZGVuIikgPT09IC0xICYmIGlzRW5hYmxlZChjLmRhdGVPYmopKQogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGM7CiAgICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDsKICAgICAgfQogICAgICBmdW5jdGlvbiBnZXROZXh0QXZhaWxhYmxlRGF5KGN1cnJlbnQsIGRlbHRhKSB7CiAgICAgICAgICB2YXIgZ2l2ZW5Nb250aCA9IGN1cnJlbnQuY2xhc3NOYW1lLmluZGV4T2YoIk1vbnRoIikgPT09IC0xCiAgICAgICAgICAgICAgPyBjdXJyZW50LmRhdGVPYmouZ2V0TW9udGgoKQogICAgICAgICAgICAgIDogc2VsZi5jdXJyZW50TW9udGg7CiAgICAgICAgICB2YXIgZW5kTW9udGggPSBkZWx0YSA+IDAgPyBzZWxmLmNvbmZpZy5zaG93TW9udGhzIDogLTE7CiAgICAgICAgICB2YXIgbG9vcERlbHRhID0gZGVsdGEgPiAwID8gMSA6IC0xOwogICAgICAgICAgZm9yICh2YXIgbSA9IGdpdmVuTW9udGggLSBzZWxmLmN1cnJlbnRNb250aDsgbSAhPSBlbmRNb250aDsgbSArPSBsb29wRGVsdGEpIHsKICAgICAgICAgICAgICB2YXIgbW9udGggPSBzZWxmLmRheXNDb250YWluZXIuY2hpbGRyZW5bbV07CiAgICAgICAgICAgICAgdmFyIHN0YXJ0SW5kZXggPSBnaXZlbk1vbnRoIC0gc2VsZi5jdXJyZW50TW9udGggPT09IG0KICAgICAgICAgICAgICAgICAgPyBjdXJyZW50LiRpICsgZGVsdGEKICAgICAgICAgICAgICAgICAgOiBkZWx0YSA8IDAKICAgICAgICAgICAgICAgICAgICAgID8gbW9udGguY2hpbGRyZW4ubGVuZ3RoIC0gMQogICAgICAgICAgICAgICAgICAgICAgOiAwOwogICAgICAgICAgICAgIHZhciBudW1Nb250aERheXMgPSBtb250aC5jaGlsZHJlbi5sZW5ndGg7CiAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IHN0YXJ0SW5kZXg7IGkgPj0gMCAmJiBpIDwgbnVtTW9udGhEYXlzICYmIGkgIT0gKGRlbHRhID4gMCA/IG51bU1vbnRoRGF5cyA6IC0xKTsgaSArPSBsb29wRGVsdGEpIHsKICAgICAgICAgICAgICAgICAgdmFyIGMgPSBtb250aC5jaGlsZHJlbltpXTsKICAgICAgICAgICAgICAgICAgaWYgKGMuY2xhc3NOYW1lLmluZGV4T2YoImhpZGRlbiIpID09PSAtMSAmJgogICAgICAgICAgICAgICAgICAgICAgaXNFbmFibGVkKGMuZGF0ZU9iaikgJiYKICAgICAgICAgICAgICAgICAgICAgIE1hdGguYWJzKGN1cnJlbnQuJGkgLSBpKSA+PSBNYXRoLmFicyhkZWx0YSkpCiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZm9jdXNPbkRheUVsZW0oYyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgc2VsZi5jaGFuZ2VNb250aChsb29wRGVsdGEpOwogICAgICAgICAgZm9jdXNPbkRheShnZXRGaXJzdEF2YWlsYWJsZURheShsb29wRGVsdGEpLCAwKTsKICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZm9jdXNPbkRheShjdXJyZW50LCBvZmZzZXQpIHsKICAgICAgICAgIHZhciBhY3RpdmVFbGVtZW50ID0gZ2V0Q2xvc2VzdEFjdGl2ZUVsZW1lbnQoKTsKICAgICAgICAgIHZhciBkYXlGb2N1c2VkID0gaXNJblZpZXcoYWN0aXZlRWxlbWVudCB8fCBkb2N1bWVudC5ib2R5KTsKICAgICAgICAgIHZhciBzdGFydEVsZW0gPSBjdXJyZW50ICE9PSB1bmRlZmluZWQKICAgICAgICAgICAgICA/IGN1cnJlbnQKICAgICAgICAgICAgICA6IGRheUZvY3VzZWQKICAgICAgICAgICAgICAgICAgPyBhY3RpdmVFbGVtZW50CiAgICAgICAgICAgICAgICAgIDogc2VsZi5zZWxlY3RlZERhdGVFbGVtICE9PSB1bmRlZmluZWQgJiYgaXNJblZpZXcoc2VsZi5zZWxlY3RlZERhdGVFbGVtKQogICAgICAgICAgICAgICAgICAgICAgPyBzZWxmLnNlbGVjdGVkRGF0ZUVsZW0KICAgICAgICAgICAgICAgICAgICAgIDogc2VsZi50b2RheURhdGVFbGVtICE9PSB1bmRlZmluZWQgJiYgaXNJblZpZXcoc2VsZi50b2RheURhdGVFbGVtKQogICAgICAgICAgICAgICAgICAgICAgICAgID8gc2VsZi50b2RheURhdGVFbGVtCiAgICAgICAgICAgICAgICAgICAgICAgICAgOiBnZXRGaXJzdEF2YWlsYWJsZURheShvZmZzZXQgPiAwID8gMSA6IC0xKTsKICAgICAgICAgIGlmIChzdGFydEVsZW0gPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgIHNlbGYuX2lucHV0LmZvY3VzKCk7CiAgICAgICAgICB9CiAgICAgICAgICBlbHNlIGlmICghZGF5Rm9jdXNlZCkgewogICAgICAgICAgICAgIGZvY3VzT25EYXlFbGVtKHN0YXJ0RWxlbSk7CiAgICAgICAgICB9CiAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICBnZXROZXh0QXZhaWxhYmxlRGF5KHN0YXJ0RWxlbSwgb2Zmc2V0KTsKICAgICAgICAgIH0KICAgICAgfQogICAgICBmdW5jdGlvbiBidWlsZE1vbnRoRGF5cyh5ZWFyLCBtb250aCkgewogICAgICAgICAgdmFyIGZpcnN0T2ZNb250aCA9IChuZXcgRGF0ZSh5ZWFyLCBtb250aCwgMSkuZ2V0RGF5KCkgLSBzZWxmLmwxMG4uZmlyc3REYXlPZldlZWsgKyA3KSAlIDc7CiAgICAgICAgICB2YXIgcHJldk1vbnRoRGF5cyA9IHNlbGYudXRpbHMuZ2V0RGF5c0luTW9udGgoKG1vbnRoIC0gMSArIDEyKSAlIDEyLCB5ZWFyKTsKICAgICAgICAgIHZhciBkYXlzSW5Nb250aCA9IHNlbGYudXRpbHMuZ2V0RGF5c0luTW9udGgobW9udGgsIHllYXIpLCBkYXlzID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSwgaXNNdWx0aU1vbnRoID0gc2VsZi5jb25maWcuc2hvd01vbnRocyA+IDEsIHByZXZNb250aERheUNsYXNzID0gaXNNdWx0aU1vbnRoID8gInByZXZNb250aERheSBoaWRkZW4iIDogInByZXZNb250aERheSIsIG5leHRNb250aERheUNsYXNzID0gaXNNdWx0aU1vbnRoID8gIm5leHRNb250aERheSBoaWRkZW4iIDogIm5leHRNb250aERheSI7CiAgICAgICAgICB2YXIgZGF5TnVtYmVyID0gcHJldk1vbnRoRGF5cyArIDEgLSBmaXJzdE9mTW9udGgsIGRheUluZGV4ID0gMDsKICAgICAgICAgIGZvciAoOyBkYXlOdW1iZXIgPD0gcHJldk1vbnRoRGF5czsgZGF5TnVtYmVyKyssIGRheUluZGV4KyspIHsKICAgICAgICAgICAgICBkYXlzLmFwcGVuZENoaWxkKGNyZWF0ZURheSgiZmxhdHBpY2tyLWRheSAiICsgcHJldk1vbnRoRGF5Q2xhc3MsIG5ldyBEYXRlKHllYXIsIG1vbnRoIC0gMSwgZGF5TnVtYmVyKSwgZGF5TnVtYmVyLCBkYXlJbmRleCkpOwogICAgICAgICAgfQogICAgICAgICAgZm9yIChkYXlOdW1iZXIgPSAxOyBkYXlOdW1iZXIgPD0gZGF5c0luTW9udGg7IGRheU51bWJlcisrLCBkYXlJbmRleCsrKSB7CiAgICAgICAgICAgICAgZGF5cy5hcHBlbmRDaGlsZChjcmVhdGVEYXkoImZsYXRwaWNrci1kYXkiLCBuZXcgRGF0ZSh5ZWFyLCBtb250aCwgZGF5TnVtYmVyKSwgZGF5TnVtYmVyLCBkYXlJbmRleCkpOwogICAgICAgICAgfQogICAgICAgICAgZm9yICh2YXIgZGF5TnVtID0gZGF5c0luTW9udGggKyAxOyBkYXlOdW0gPD0gNDIgLSBmaXJzdE9mTW9udGggJiYKICAgICAgICAgICAgICAoc2VsZi5jb25maWcuc2hvd01vbnRocyA9PT0gMSB8fCBkYXlJbmRleCAlIDcgIT09IDApOyBkYXlOdW0rKywgZGF5SW5kZXgrKykgewogICAgICAgICAgICAgIGRheXMuYXBwZW5kQ2hpbGQoY3JlYXRlRGF5KCJmbGF0cGlja3ItZGF5ICIgKyBuZXh0TW9udGhEYXlDbGFzcywgbmV3IERhdGUoeWVhciwgbW9udGggKyAxLCBkYXlOdW0gJSBkYXlzSW5Nb250aCksIGRheU51bSwgZGF5SW5kZXgpKTsKICAgICAgICAgIH0KICAgICAgICAgIHZhciBkYXlDb250YWluZXIgPSBjcmVhdGVFbGVtZW50KCJkaXYiLCAiZGF5Q29udGFpbmVyIik7CiAgICAgICAgICBkYXlDb250YWluZXIuYXBwZW5kQ2hpbGQoZGF5cyk7CiAgICAgICAgICByZXR1cm4gZGF5Q29udGFpbmVyOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGJ1aWxkRGF5cygpIHsKICAgICAgICAgIGlmIChzZWxmLmRheXNDb250YWluZXIgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICAgIGNsZWFyTm9kZShzZWxmLmRheXNDb250YWluZXIpOwogICAgICAgICAgaWYgKHNlbGYud2Vla051bWJlcnMpCiAgICAgICAgICAgICAgY2xlYXJOb2RlKHNlbGYud2Vla051bWJlcnMpOwogICAgICAgICAgdmFyIGZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7CiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlbGYuY29uZmlnLnNob3dNb250aHM7IGkrKykgewogICAgICAgICAgICAgIHZhciBkID0gbmV3IERhdGUoc2VsZi5jdXJyZW50WWVhciwgc2VsZi5jdXJyZW50TW9udGgsIDEpOwogICAgICAgICAgICAgIGQuc2V0TW9udGgoc2VsZi5jdXJyZW50TW9udGggKyBpKTsKICAgICAgICAgICAgICBmcmFnLmFwcGVuZENoaWxkKGJ1aWxkTW9udGhEYXlzKGQuZ2V0RnVsbFllYXIoKSwgZC5nZXRNb250aCgpKSk7CiAgICAgICAgICB9CiAgICAgICAgICBzZWxmLmRheXNDb250YWluZXIuYXBwZW5kQ2hpbGQoZnJhZyk7CiAgICAgICAgICBzZWxmLmRheXMgPSBzZWxmLmRheXNDb250YWluZXIuZmlyc3RDaGlsZDsKICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5tb2RlID09PSAicmFuZ2UiICYmIHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggPT09IDEpIHsKICAgICAgICAgICAgICBvbk1vdXNlT3ZlcigpOwogICAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIGJ1aWxkTW9udGhTd2l0Y2goKSB7CiAgICAgICAgICBpZiAoc2VsZi5jb25maWcuc2hvd01vbnRocyA+IDEgfHwKICAgICAgICAgICAgICBzZWxmLmNvbmZpZy5tb250aFNlbGVjdG9yVHlwZSAhPT0gImRyb3Bkb3duIikKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB2YXIgc2hvdWxkQnVpbGRNb250aCA9IGZ1bmN0aW9uIChtb250aCkgewogICAgICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5taW5EYXRlICE9PSB1bmRlZmluZWQgJiYKICAgICAgICAgICAgICAgICAgc2VsZi5jdXJyZW50WWVhciA9PT0gc2VsZi5jb25maWcubWluRGF0ZS5nZXRGdWxsWWVhcigpICYmCiAgICAgICAgICAgICAgICAgIG1vbnRoIDwgc2VsZi5jb25maWcubWluRGF0ZS5nZXRNb250aCgpKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcmV0dXJuICEoc2VsZi5jb25maWcubWF4RGF0ZSAhPT0gdW5kZWZpbmVkICYmCiAgICAgICAgICAgICAgICAgIHNlbGYuY3VycmVudFllYXIgPT09IHNlbGYuY29uZmlnLm1heERhdGUuZ2V0RnVsbFllYXIoKSAmJgogICAgICAgICAgICAgICAgICBtb250aCA+IHNlbGYuY29uZmlnLm1heERhdGUuZ2V0TW9udGgoKSk7CiAgICAgICAgICB9OwogICAgICAgICAgc2VsZi5tb250aHNEcm9wZG93bkNvbnRhaW5lci50YWJJbmRleCA9IC0xOwogICAgICAgICAgc2VsZi5tb250aHNEcm9wZG93bkNvbnRhaW5lci5pbm5lckhUTUwgPSAiIjsKICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMTI7IGkrKykgewogICAgICAgICAgICAgIGlmICghc2hvdWxkQnVpbGRNb250aChpKSkKICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgdmFyIG1vbnRoID0gY3JlYXRlRWxlbWVudCgib3B0aW9uIiwgImZsYXRwaWNrci1tb250aERyb3Bkb3duLW1vbnRoIik7CiAgICAgICAgICAgICAgbW9udGgudmFsdWUgPSBuZXcgRGF0ZShzZWxmLmN1cnJlbnRZZWFyLCBpKS5nZXRNb250aCgpLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgbW9udGgudGV4dENvbnRlbnQgPSBtb250aFRvU3RyKGksIHNlbGYuY29uZmlnLnNob3J0aGFuZEN1cnJlbnRNb250aCwgc2VsZi5sMTBuKTsKICAgICAgICAgICAgICBtb250aC50YWJJbmRleCA9IC0xOwogICAgICAgICAgICAgIGlmIChzZWxmLmN1cnJlbnRNb250aCA9PT0gaSkgewogICAgICAgICAgICAgICAgICBtb250aC5zZWxlY3RlZCA9IHRydWU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHNlbGYubW9udGhzRHJvcGRvd25Db250YWluZXIuYXBwZW5kQ2hpbGQobW9udGgpOwogICAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIGJ1aWxkTW9udGgoKSB7CiAgICAgICAgICB2YXIgY29udGFpbmVyID0gY3JlYXRlRWxlbWVudCgiZGl2IiwgImZsYXRwaWNrci1tb250aCIpOwogICAgICAgICAgdmFyIG1vbnRoTmF2RnJhZ21lbnQgPSB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpOwogICAgICAgICAgdmFyIG1vbnRoRWxlbWVudDsKICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5zaG93TW9udGhzID4gMSB8fAogICAgICAgICAgICAgIHNlbGYuY29uZmlnLm1vbnRoU2VsZWN0b3JUeXBlID09PSAic3RhdGljIikgewogICAgICAgICAgICAgIG1vbnRoRWxlbWVudCA9IGNyZWF0ZUVsZW1lbnQoInNwYW4iLCAiY3VyLW1vbnRoIik7CiAgICAgICAgICB9CiAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICBzZWxmLm1vbnRoc0Ryb3Bkb3duQ29udGFpbmVyID0gY3JlYXRlRWxlbWVudCgic2VsZWN0IiwgImZsYXRwaWNrci1tb250aERyb3Bkb3duLW1vbnRocyIpOwogICAgICAgICAgICAgIHNlbGYubW9udGhzRHJvcGRvd25Db250YWluZXIuc2V0QXR0cmlidXRlKCJhcmlhLWxhYmVsIiwgc2VsZi5sMTBuLm1vbnRoQXJpYUxhYmVsKTsKICAgICAgICAgICAgICBiaW5kKHNlbGYubW9udGhzRHJvcGRvd25Db250YWluZXIsICJjaGFuZ2UiLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZ2V0RXZlbnRUYXJnZXQoZSk7CiAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZE1vbnRoID0gcGFyc2VJbnQodGFyZ2V0LnZhbHVlLCAxMCk7CiAgICAgICAgICAgICAgICAgIHNlbGYuY2hhbmdlTW9udGgoc2VsZWN0ZWRNb250aCAtIHNlbGYuY3VycmVudE1vbnRoKTsKICAgICAgICAgICAgICAgICAgdHJpZ2dlckV2ZW50KCJvbk1vbnRoQ2hhbmdlIik7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgYnVpbGRNb250aFN3aXRjaCgpOwogICAgICAgICAgICAgIG1vbnRoRWxlbWVudCA9IHNlbGYubW9udGhzRHJvcGRvd25Db250YWluZXI7CiAgICAgICAgICB9CiAgICAgICAgICB2YXIgeWVhcklucHV0ID0gY3JlYXRlTnVtYmVySW5wdXQoImN1ci15ZWFyIiwgeyB0YWJpbmRleDogIi0xIiB9KTsKICAgICAgICAgIHZhciB5ZWFyRWxlbWVudCA9IHllYXJJbnB1dC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaW5wdXQiKVswXTsKICAgICAgICAgIHllYXJFbGVtZW50LnNldEF0dHJpYnV0ZSgiYXJpYS1sYWJlbCIsIHNlbGYubDEwbi55ZWFyQXJpYUxhYmVsKTsKICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5taW5EYXRlKSB7CiAgICAgICAgICAgICAgeWVhckVsZW1lbnQuc2V0QXR0cmlidXRlKCJtaW4iLCBzZWxmLmNvbmZpZy5taW5EYXRlLmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKSk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoc2VsZi5jb25maWcubWF4RGF0ZSkgewogICAgICAgICAgICAgIHllYXJFbGVtZW50LnNldEF0dHJpYnV0ZSgibWF4Iiwgc2VsZi5jb25maWcubWF4RGF0ZS5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCkpOwogICAgICAgICAgICAgIHllYXJFbGVtZW50LmRpc2FibGVkID0KICAgICAgICAgICAgICAgICAgISFzZWxmLmNvbmZpZy5taW5EYXRlICYmCiAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNvbmZpZy5taW5EYXRlLmdldEZ1bGxZZWFyKCkgPT09IHNlbGYuY29uZmlnLm1heERhdGUuZ2V0RnVsbFllYXIoKTsKICAgICAgICAgIH0KICAgICAgICAgIHZhciBjdXJyZW50TW9udGggPSBjcmVhdGVFbGVtZW50KCJkaXYiLCAiZmxhdHBpY2tyLWN1cnJlbnQtbW9udGgiKTsKICAgICAgICAgIGN1cnJlbnRNb250aC5hcHBlbmRDaGlsZChtb250aEVsZW1lbnQpOwogICAgICAgICAgY3VycmVudE1vbnRoLmFwcGVuZENoaWxkKHllYXJJbnB1dCk7CiAgICAgICAgICBtb250aE5hdkZyYWdtZW50LmFwcGVuZENoaWxkKGN1cnJlbnRNb250aCk7CiAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQobW9udGhOYXZGcmFnbWVudCk7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgIGNvbnRhaW5lcjogY29udGFpbmVyLAogICAgICAgICAgICAgIHllYXJFbGVtZW50OiB5ZWFyRWxlbWVudCwKICAgICAgICAgICAgICBtb250aEVsZW1lbnQ6IG1vbnRoRWxlbWVudCwKICAgICAgICAgIH07CiAgICAgIH0KICAgICAgZnVuY3Rpb24gYnVpbGRNb250aHMoKSB7CiAgICAgICAgICBjbGVhck5vZGUoc2VsZi5tb250aE5hdik7CiAgICAgICAgICBzZWxmLm1vbnRoTmF2LmFwcGVuZENoaWxkKHNlbGYucHJldk1vbnRoTmF2KTsKICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5zaG93TW9udGhzKSB7CiAgICAgICAgICAgICAgc2VsZi55ZWFyRWxlbWVudHMgPSBbXTsKICAgICAgICAgICAgICBzZWxmLm1vbnRoRWxlbWVudHMgPSBbXTsKICAgICAgICAgIH0KICAgICAgICAgIGZvciAodmFyIG0gPSBzZWxmLmNvbmZpZy5zaG93TW9udGhzOyBtLS07KSB7CiAgICAgICAgICAgICAgdmFyIG1vbnRoID0gYnVpbGRNb250aCgpOwogICAgICAgICAgICAgIHNlbGYueWVhckVsZW1lbnRzLnB1c2gobW9udGgueWVhckVsZW1lbnQpOwogICAgICAgICAgICAgIHNlbGYubW9udGhFbGVtZW50cy5wdXNoKG1vbnRoLm1vbnRoRWxlbWVudCk7CiAgICAgICAgICAgICAgc2VsZi5tb250aE5hdi5hcHBlbmRDaGlsZChtb250aC5jb250YWluZXIpOwogICAgICAgICAgfQogICAgICAgICAgc2VsZi5tb250aE5hdi5hcHBlbmRDaGlsZChzZWxmLm5leHRNb250aE5hdik7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gYnVpbGRNb250aE5hdigpIHsKICAgICAgICAgIHNlbGYubW9udGhOYXYgPSBjcmVhdGVFbGVtZW50KCJkaXYiLCAiZmxhdHBpY2tyLW1vbnRocyIpOwogICAgICAgICAgc2VsZi55ZWFyRWxlbWVudHMgPSBbXTsKICAgICAgICAgIHNlbGYubW9udGhFbGVtZW50cyA9IFtdOwogICAgICAgICAgc2VsZi5wcmV2TW9udGhOYXYgPSBjcmVhdGVFbGVtZW50KCJzcGFuIiwgImZsYXRwaWNrci1wcmV2LW1vbnRoIik7CiAgICAgICAgICBzZWxmLnByZXZNb250aE5hdi5pbm5lckhUTUwgPSBzZWxmLmNvbmZpZy5wcmV2QXJyb3c7CiAgICAgICAgICBzZWxmLm5leHRNb250aE5hdiA9IGNyZWF0ZUVsZW1lbnQoInNwYW4iLCAiZmxhdHBpY2tyLW5leHQtbW9udGgiKTsKICAgICAgICAgIHNlbGYubmV4dE1vbnRoTmF2LmlubmVySFRNTCA9IHNlbGYuY29uZmlnLm5leHRBcnJvdzsKICAgICAgICAgIGJ1aWxkTW9udGhzKCk7CiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2VsZiwgIl9oaWRlUHJldk1vbnRoQXJyb3ciLCB7CiAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBzZWxmLl9faGlkZVByZXZNb250aEFycm93OyB9LAogICAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKGJvb2wpIHsKICAgICAgICAgICAgICAgICAgaWYgKHNlbGYuX19oaWRlUHJldk1vbnRoQXJyb3cgIT09IGJvb2wpIHsKICAgICAgICAgICAgICAgICAgICAgIHRvZ2dsZUNsYXNzKHNlbGYucHJldk1vbnRoTmF2LCAiZmxhdHBpY2tyLWRpc2FibGVkIiwgYm9vbCk7CiAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9faGlkZVByZXZNb250aEFycm93ID0gYm9vbDsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0sCiAgICAgICAgICB9KTsKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzZWxmLCAiX2hpZGVOZXh0TW9udGhBcnJvdyIsIHsKICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNlbGYuX19oaWRlTmV4dE1vbnRoQXJyb3c7IH0sCiAgICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAoYm9vbCkgewogICAgICAgICAgICAgICAgICBpZiAoc2VsZi5fX2hpZGVOZXh0TW9udGhBcnJvdyAhPT0gYm9vbCkgewogICAgICAgICAgICAgICAgICAgICAgdG9nZ2xlQ2xhc3Moc2VsZi5uZXh0TW9udGhOYXYsICJmbGF0cGlja3ItZGlzYWJsZWQiLCBib29sKTsKICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX19oaWRlTmV4dE1vbnRoQXJyb3cgPSBib29sOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSwKICAgICAgICAgIH0pOwogICAgICAgICAgc2VsZi5jdXJyZW50WWVhckVsZW1lbnQgPSBzZWxmLnllYXJFbGVtZW50c1swXTsKICAgICAgICAgIHVwZGF0ZU5hdmlnYXRpb25DdXJyZW50TW9udGgoKTsKICAgICAgICAgIHJldHVybiBzZWxmLm1vbnRoTmF2OwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGJ1aWxkVGltZSgpIHsKICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuY2xhc3NMaXN0LmFkZCgiaGFzVGltZSIpOwogICAgICAgICAgaWYgKHNlbGYuY29uZmlnLm5vQ2FsZW5kYXIpCiAgICAgICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCJub0NhbGVuZGFyIik7CiAgICAgICAgICB2YXIgZGVmYXVsdHMgPSBnZXREZWZhdWx0SG91cnMoc2VsZi5jb25maWcpOwogICAgICAgICAgc2VsZi50aW1lQ29udGFpbmVyID0gY3JlYXRlRWxlbWVudCgiZGl2IiwgImZsYXRwaWNrci10aW1lIik7CiAgICAgICAgICBzZWxmLnRpbWVDb250YWluZXIudGFiSW5kZXggPSAtMTsKICAgICAgICAgIHZhciBzZXBhcmF0b3IgPSBjcmVhdGVFbGVtZW50KCJzcGFuIiwgImZsYXRwaWNrci10aW1lLXNlcGFyYXRvciIsICI6Iik7CiAgICAgICAgICB2YXIgaG91cklucHV0ID0gY3JlYXRlTnVtYmVySW5wdXQoImZsYXRwaWNrci1ob3VyIiwgewogICAgICAgICAgICAgICJhcmlhLWxhYmVsIjogc2VsZi5sMTBuLmhvdXJBcmlhTGFiZWwsCiAgICAgICAgICB9KTsKICAgICAgICAgIHNlbGYuaG91ckVsZW1lbnQgPSBob3VySW5wdXQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImlucHV0IilbMF07CiAgICAgICAgICB2YXIgbWludXRlSW5wdXQgPSBjcmVhdGVOdW1iZXJJbnB1dCgiZmxhdHBpY2tyLW1pbnV0ZSIsIHsKICAgICAgICAgICAgICAiYXJpYS1sYWJlbCI6IHNlbGYubDEwbi5taW51dGVBcmlhTGFiZWwsCiAgICAgICAgICB9KTsKICAgICAgICAgIHNlbGYubWludXRlRWxlbWVudCA9IG1pbnV0ZUlucHV0LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJpbnB1dCIpWzBdOwogICAgICAgICAgc2VsZi5ob3VyRWxlbWVudC50YWJJbmRleCA9IHNlbGYubWludXRlRWxlbWVudC50YWJJbmRleCA9IC0xOwogICAgICAgICAgc2VsZi5ob3VyRWxlbWVudC52YWx1ZSA9IHBhZChzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iagogICAgICAgICAgICAgID8gc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmouZ2V0SG91cnMoKQogICAgICAgICAgICAgIDogc2VsZi5jb25maWcudGltZV8yNGhyCiAgICAgICAgICAgICAgICAgID8gZGVmYXVsdHMuaG91cnMKICAgICAgICAgICAgICAgICAgOiBtaWxpdGFyeTJhbXBtKGRlZmF1bHRzLmhvdXJzKSk7CiAgICAgICAgICBzZWxmLm1pbnV0ZUVsZW1lbnQudmFsdWUgPSBwYWQoc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmoKICAgICAgICAgICAgICA/IHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqLmdldE1pbnV0ZXMoKQogICAgICAgICAgICAgIDogZGVmYXVsdHMubWludXRlcyk7CiAgICAgICAgICBzZWxmLmhvdXJFbGVtZW50LnNldEF0dHJpYnV0ZSgic3RlcCIsIHNlbGYuY29uZmlnLmhvdXJJbmNyZW1lbnQudG9TdHJpbmcoKSk7CiAgICAgICAgICBzZWxmLm1pbnV0ZUVsZW1lbnQuc2V0QXR0cmlidXRlKCJzdGVwIiwgc2VsZi5jb25maWcubWludXRlSW5jcmVtZW50LnRvU3RyaW5nKCkpOwogICAgICAgICAgc2VsZi5ob3VyRWxlbWVudC5zZXRBdHRyaWJ1dGUoIm1pbiIsIHNlbGYuY29uZmlnLnRpbWVfMjRociA/ICIwIiA6ICIxIik7CiAgICAgICAgICBzZWxmLmhvdXJFbGVtZW50LnNldEF0dHJpYnV0ZSgibWF4Iiwgc2VsZi5jb25maWcudGltZV8yNGhyID8gIjIzIiA6ICIxMiIpOwogICAgICAgICAgc2VsZi5ob3VyRWxlbWVudC5zZXRBdHRyaWJ1dGUoIm1heGxlbmd0aCIsICIyIik7CiAgICAgICAgICBzZWxmLm1pbnV0ZUVsZW1lbnQuc2V0QXR0cmlidXRlKCJtaW4iLCAiMCIpOwogICAgICAgICAgc2VsZi5taW51dGVFbGVtZW50LnNldEF0dHJpYnV0ZSgibWF4IiwgIjU5Iik7CiAgICAgICAgICBzZWxmLm1pbnV0ZUVsZW1lbnQuc2V0QXR0cmlidXRlKCJtYXhsZW5ndGgiLCAiMiIpOwogICAgICAgICAgc2VsZi50aW1lQ29udGFpbmVyLmFwcGVuZENoaWxkKGhvdXJJbnB1dCk7CiAgICAgICAgICBzZWxmLnRpbWVDb250YWluZXIuYXBwZW5kQ2hpbGQoc2VwYXJhdG9yKTsKICAgICAgICAgIHNlbGYudGltZUNvbnRhaW5lci5hcHBlbmRDaGlsZChtaW51dGVJbnB1dCk7CiAgICAgICAgICBpZiAoc2VsZi5jb25maWcudGltZV8yNGhyKQogICAgICAgICAgICAgIHNlbGYudGltZUNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCJ0aW1lMjRociIpOwogICAgICAgICAgaWYgKHNlbGYuY29uZmlnLmVuYWJsZVNlY29uZHMpIHsKICAgICAgICAgICAgICBzZWxmLnRpbWVDb250YWluZXIuY2xhc3NMaXN0LmFkZCgiaGFzU2Vjb25kcyIpOwogICAgICAgICAgICAgIHZhciBzZWNvbmRJbnB1dCA9IGNyZWF0ZU51bWJlcklucHV0KCJmbGF0cGlja3Itc2Vjb25kIik7CiAgICAgICAgICAgICAgc2VsZi5zZWNvbmRFbGVtZW50ID0gc2Vjb25kSW5wdXQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImlucHV0IilbMF07CiAgICAgICAgICAgICAgc2VsZi5zZWNvbmRFbGVtZW50LnZhbHVlID0gcGFkKHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqCiAgICAgICAgICAgICAgICAgID8gc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmouZ2V0U2Vjb25kcygpCiAgICAgICAgICAgICAgICAgIDogZGVmYXVsdHMuc2Vjb25kcyk7CiAgICAgICAgICAgICAgc2VsZi5zZWNvbmRFbGVtZW50LnNldEF0dHJpYnV0ZSgic3RlcCIsIHNlbGYubWludXRlRWxlbWVudC5nZXRBdHRyaWJ1dGUoInN0ZXAiKSk7CiAgICAgICAgICAgICAgc2VsZi5zZWNvbmRFbGVtZW50LnNldEF0dHJpYnV0ZSgibWluIiwgIjAiKTsKICAgICAgICAgICAgICBzZWxmLnNlY29uZEVsZW1lbnQuc2V0QXR0cmlidXRlKCJtYXgiLCAiNTkiKTsKICAgICAgICAgICAgICBzZWxmLnNlY29uZEVsZW1lbnQuc2V0QXR0cmlidXRlKCJtYXhsZW5ndGgiLCAiMiIpOwogICAgICAgICAgICAgIHNlbGYudGltZUNvbnRhaW5lci5hcHBlbmRDaGlsZChjcmVhdGVFbGVtZW50KCJzcGFuIiwgImZsYXRwaWNrci10aW1lLXNlcGFyYXRvciIsICI6IikpOwogICAgICAgICAgICAgIHNlbGYudGltZUNvbnRhaW5lci5hcHBlbmRDaGlsZChzZWNvbmRJbnB1dCk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoIXNlbGYuY29uZmlnLnRpbWVfMjRocikgewogICAgICAgICAgICAgIHNlbGYuYW1QTSA9IGNyZWF0ZUVsZW1lbnQoInNwYW4iLCAiZmxhdHBpY2tyLWFtLXBtIiwgc2VsZi5sMTBuLmFtUE1baW50KChzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iagogICAgICAgICAgICAgICAgICA/IHNlbGYuaG91ckVsZW1lbnQudmFsdWUKICAgICAgICAgICAgICAgICAgOiBzZWxmLmNvbmZpZy5kZWZhdWx0SG91cikgPiAxMSldKTsKICAgICAgICAgICAgICBzZWxmLmFtUE0udGl0bGUgPSBzZWxmLmwxMG4udG9nZ2xlVGl0bGU7CiAgICAgICAgICAgICAgc2VsZi5hbVBNLnRhYkluZGV4ID0gLTE7CiAgICAgICAgICAgICAgc2VsZi50aW1lQ29udGFpbmVyLmFwcGVuZENoaWxkKHNlbGYuYW1QTSk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gc2VsZi50aW1lQ29udGFpbmVyOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGJ1aWxkV2Vla2RheXMoKSB7CiAgICAgICAgICBpZiAoIXNlbGYud2Vla2RheUNvbnRhaW5lcikKICAgICAgICAgICAgICBzZWxmLndlZWtkYXlDb250YWluZXIgPSBjcmVhdGVFbGVtZW50KCJkaXYiLCAiZmxhdHBpY2tyLXdlZWtkYXlzIik7CiAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgY2xlYXJOb2RlKHNlbGYud2Vla2RheUNvbnRhaW5lcik7CiAgICAgICAgICBmb3IgKHZhciBpID0gc2VsZi5jb25maWcuc2hvd01vbnRoczsgaS0tOykgewogICAgICAgICAgICAgIHZhciBjb250YWluZXIgPSBjcmVhdGVFbGVtZW50KCJkaXYiLCAiZmxhdHBpY2tyLXdlZWtkYXljb250YWluZXIiKTsKICAgICAgICAgICAgICBzZWxmLndlZWtkYXlDb250YWluZXIuYXBwZW5kQ2hpbGQoY29udGFpbmVyKTsKICAgICAgICAgIH0KICAgICAgICAgIHVwZGF0ZVdlZWtkYXlzKCk7CiAgICAgICAgICByZXR1cm4gc2VsZi53ZWVrZGF5Q29udGFpbmVyOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHVwZGF0ZVdlZWtkYXlzKCkgewogICAgICAgICAgaWYgKCFzZWxmLndlZWtkYXlDb250YWluZXIpIHsKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICB2YXIgZmlyc3REYXlPZldlZWsgPSBzZWxmLmwxMG4uZmlyc3REYXlPZldlZWs7CiAgICAgICAgICB2YXIgd2Vla2RheXMgPSBfX3NwcmVhZEFycmF5cyhzZWxmLmwxMG4ud2Vla2RheXMuc2hvcnRoYW5kKTsKICAgICAgICAgIGlmIChmaXJzdERheU9mV2VlayA+IDAgJiYgZmlyc3REYXlPZldlZWsgPCB3ZWVrZGF5cy5sZW5ndGgpIHsKICAgICAgICAgICAgICB3ZWVrZGF5cyA9IF9fc3ByZWFkQXJyYXlzKHdlZWtkYXlzLnNwbGljZShmaXJzdERheU9mV2Vlaywgd2Vla2RheXMubGVuZ3RoKSwgd2Vla2RheXMuc3BsaWNlKDAsIGZpcnN0RGF5T2ZXZWVrKSk7CiAgICAgICAgICB9CiAgICAgICAgICBmb3IgKHZhciBpID0gc2VsZi5jb25maWcuc2hvd01vbnRoczsgaS0tOykgewogICAgICAgICAgICAgIHNlbGYud2Vla2RheUNvbnRhaW5lci5jaGlsZHJlbltpXS5pbm5lckhUTUwgPSAiXG4gICAgICA8c3BhbiBjbGFzcz0nZmxhdHBpY2tyLXdlZWtkYXknPlxuICAgICAgICAiICsgd2Vla2RheXMuam9pbigiPC9zcGFuPjxzcGFuIGNsYXNzPSdmbGF0cGlja3Itd2Vla2RheSc+IikgKyAiXG4gICAgICA8L3NwYW4+XG4gICAgICAiOwogICAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIGJ1aWxkV2Vla3MoKSB7CiAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoImhhc1dlZWtzIik7CiAgICAgICAgICB2YXIgd2Vla1dyYXBwZXIgPSBjcmVhdGVFbGVtZW50KCJkaXYiLCAiZmxhdHBpY2tyLXdlZWt3cmFwcGVyIik7CiAgICAgICAgICB3ZWVrV3JhcHBlci5hcHBlbmRDaGlsZChjcmVhdGVFbGVtZW50KCJzcGFuIiwgImZsYXRwaWNrci13ZWVrZGF5Iiwgc2VsZi5sMTBuLndlZWtBYmJyZXZpYXRpb24pKTsKICAgICAgICAgIHZhciB3ZWVrTnVtYmVycyA9IGNyZWF0ZUVsZW1lbnQoImRpdiIsICJmbGF0cGlja3Itd2Vla3MiKTsKICAgICAgICAgIHdlZWtXcmFwcGVyLmFwcGVuZENoaWxkKHdlZWtOdW1iZXJzKTsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgd2Vla1dyYXBwZXI6IHdlZWtXcmFwcGVyLAogICAgICAgICAgICAgIHdlZWtOdW1iZXJzOiB3ZWVrTnVtYmVycywKICAgICAgICAgIH07CiAgICAgIH0KICAgICAgZnVuY3Rpb24gY2hhbmdlTW9udGgodmFsdWUsIGlzT2Zmc2V0KSB7CiAgICAgICAgICBpZiAoaXNPZmZzZXQgPT09IHZvaWQgMCkgeyBpc09mZnNldCA9IHRydWU7IH0KICAgICAgICAgIHZhciBkZWx0YSA9IGlzT2Zmc2V0ID8gdmFsdWUgOiB2YWx1ZSAtIHNlbGYuY3VycmVudE1vbnRoOwogICAgICAgICAgaWYgKChkZWx0YSA8IDAgJiYgc2VsZi5faGlkZVByZXZNb250aEFycm93ID09PSB0cnVlKSB8fAogICAgICAgICAgICAgIChkZWx0YSA+IDAgJiYgc2VsZi5faGlkZU5leHRNb250aEFycm93ID09PSB0cnVlKSkKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICBzZWxmLmN1cnJlbnRNb250aCArPSBkZWx0YTsKICAgICAgICAgIGlmIChzZWxmLmN1cnJlbnRNb250aCA8IDAgfHwgc2VsZi5jdXJyZW50TW9udGggPiAxMSkgewogICAgICAgICAgICAgIHNlbGYuY3VycmVudFllYXIgKz0gc2VsZi5jdXJyZW50TW9udGggPiAxMSA/IDEgOiAtMTsKICAgICAgICAgICAgICBzZWxmLmN1cnJlbnRNb250aCA9IChzZWxmLmN1cnJlbnRNb250aCArIDEyKSAlIDEyOwogICAgICAgICAgICAgIHRyaWdnZXJFdmVudCgib25ZZWFyQ2hhbmdlIik7CiAgICAgICAgICAgICAgYnVpbGRNb250aFN3aXRjaCgpOwogICAgICAgICAgfQogICAgICAgICAgYnVpbGREYXlzKCk7CiAgICAgICAgICB0cmlnZ2VyRXZlbnQoIm9uTW9udGhDaGFuZ2UiKTsKICAgICAgICAgIHVwZGF0ZU5hdmlnYXRpb25DdXJyZW50TW9udGgoKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBjbGVhcih0cmlnZ2VyQ2hhbmdlRXZlbnQsIHRvSW5pdGlhbCkgewogICAgICAgICAgaWYgKHRyaWdnZXJDaGFuZ2VFdmVudCA9PT0gdm9pZCAwKSB7IHRyaWdnZXJDaGFuZ2VFdmVudCA9IHRydWU7IH0KICAgICAgICAgIGlmICh0b0luaXRpYWwgPT09IHZvaWQgMCkgeyB0b0luaXRpYWwgPSB0cnVlOyB9CiAgICAgICAgICBzZWxmLmlucHV0LnZhbHVlID0gIiI7CiAgICAgICAgICBpZiAoc2VsZi5hbHRJbnB1dCAhPT0gdW5kZWZpbmVkKQogICAgICAgICAgICAgIHNlbGYuYWx0SW5wdXQudmFsdWUgPSAiIjsKICAgICAgICAgIGlmIChzZWxmLm1vYmlsZUlucHV0ICE9PSB1bmRlZmluZWQpCiAgICAgICAgICAgICAgc2VsZi5tb2JpbGVJbnB1dC52YWx1ZSA9ICIiOwogICAgICAgICAgc2VsZi5zZWxlY3RlZERhdGVzID0gW107CiAgICAgICAgICBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiA9IHVuZGVmaW5lZDsKICAgICAgICAgIGlmICh0b0luaXRpYWwgPT09IHRydWUpIHsKICAgICAgICAgICAgICBzZWxmLmN1cnJlbnRZZWFyID0gc2VsZi5faW5pdGlhbERhdGUuZ2V0RnVsbFllYXIoKTsKICAgICAgICAgICAgICBzZWxmLmN1cnJlbnRNb250aCA9IHNlbGYuX2luaXRpYWxEYXRlLmdldE1vbnRoKCk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoc2VsZi5jb25maWcuZW5hYmxlVGltZSA9PT0gdHJ1ZSkgewogICAgICAgICAgICAgIHZhciBfYSA9IGdldERlZmF1bHRIb3VycyhzZWxmLmNvbmZpZyksIGhvdXJzID0gX2EuaG91cnMsIG1pbnV0ZXMgPSBfYS5taW51dGVzLCBzZWNvbmRzID0gX2Euc2Vjb25kczsKICAgICAgICAgICAgICBzZXRIb3Vycyhob3VycywgbWludXRlcywgc2Vjb25kcyk7CiAgICAgICAgICB9CiAgICAgICAgICBzZWxmLnJlZHJhdygpOwogICAgICAgICAgaWYgKHRyaWdnZXJDaGFuZ2VFdmVudCkKICAgICAgICAgICAgICB0cmlnZ2VyRXZlbnQoIm9uQ2hhbmdlIik7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gY2xvc2UoKSB7CiAgICAgICAgICBzZWxmLmlzT3BlbiA9IGZhbHNlOwogICAgICAgICAgaWYgKCFzZWxmLmlzTW9iaWxlKSB7CiAgICAgICAgICAgICAgaWYgKHNlbGYuY2FsZW5kYXJDb250YWluZXIgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoIm9wZW4iKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKHNlbGYuX2lucHV0ICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgICAgc2VsZi5faW5wdXQuY2xhc3NMaXN0LnJlbW92ZSgiYWN0aXZlIik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgdHJpZ2dlckV2ZW50KCJvbkNsb3NlIik7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZGVzdHJveSgpIHsKICAgICAgICAgIGlmIChzZWxmLmNvbmZpZyAhPT0gdW5kZWZpbmVkKQogICAgICAgICAgICAgIHRyaWdnZXJFdmVudCgib25EZXN0cm95Iik7CiAgICAgICAgICBmb3IgKHZhciBpID0gc2VsZi5faGFuZGxlcnMubGVuZ3RoOyBpLS07KSB7CiAgICAgICAgICAgICAgc2VsZi5faGFuZGxlcnNbaV0ucmVtb3ZlKCk7CiAgICAgICAgICB9CiAgICAgICAgICBzZWxmLl9oYW5kbGVycyA9IFtdOwogICAgICAgICAgaWYgKHNlbGYubW9iaWxlSW5wdXQpIHsKICAgICAgICAgICAgICBpZiAoc2VsZi5tb2JpbGVJbnB1dC5wYXJlbnROb2RlKQogICAgICAgICAgICAgICAgICBzZWxmLm1vYmlsZUlucHV0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc2VsZi5tb2JpbGVJbnB1dCk7CiAgICAgICAgICAgICAgc2VsZi5tb2JpbGVJbnB1dCA9IHVuZGVmaW5lZDsKICAgICAgICAgIH0KICAgICAgICAgIGVsc2UgaWYgKHNlbGYuY2FsZW5kYXJDb250YWluZXIgJiYgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5wYXJlbnROb2RlKSB7CiAgICAgICAgICAgICAgaWYgKHNlbGYuY29uZmlnLnN0YXRpYyAmJiBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnBhcmVudE5vZGUpIHsKICAgICAgICAgICAgICAgICAgdmFyIHdyYXBwZXIgPSBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnBhcmVudE5vZGU7CiAgICAgICAgICAgICAgICAgIHdyYXBwZXIubGFzdENoaWxkICYmIHdyYXBwZXIucmVtb3ZlQ2hpbGQod3JhcHBlci5sYXN0Q2hpbGQpOwogICAgICAgICAgICAgICAgICBpZiAod3JhcHBlci5wYXJlbnROb2RlKSB7CiAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAod3JhcHBlci5maXJzdENoaWxkKQogICAgICAgICAgICAgICAgICAgICAgICAgIHdyYXBwZXIucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUod3JhcHBlci5maXJzdENoaWxkLCB3cmFwcGVyKTsKICAgICAgICAgICAgICAgICAgICAgIHdyYXBwZXIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh3cmFwcGVyKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzZWxmLmNhbGVuZGFyQ29udGFpbmVyKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChzZWxmLmFsdElucHV0KSB7CiAgICAgICAgICAgICAgc2VsZi5pbnB1dC50eXBlID0gInRleHQiOwogICAgICAgICAgICAgIGlmIChzZWxmLmFsdElucHV0LnBhcmVudE5vZGUpCiAgICAgICAgICAgICAgICAgIHNlbGYuYWx0SW5wdXQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzZWxmLmFsdElucHV0KTsKICAgICAgICAgICAgICBkZWxldGUgc2VsZi5hbHRJbnB1dDsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChzZWxmLmlucHV0KSB7CiAgICAgICAgICAgICAgc2VsZi5pbnB1dC50eXBlID0gc2VsZi5pbnB1dC5fdHlwZTsKICAgICAgICAgICAgICBzZWxmLmlucHV0LmNsYXNzTGlzdC5yZW1vdmUoImZsYXRwaWNrci1pbnB1dCIpOwogICAgICAgICAgICAgIHNlbGYuaW5wdXQucmVtb3ZlQXR0cmlidXRlKCJyZWFkb25seSIpOwogICAgICAgICAgfQogICAgICAgICAgWwogICAgICAgICAgICAgICJfc2hvd1RpbWVJbnB1dCIsCiAgICAgICAgICAgICAgImxhdGVzdFNlbGVjdGVkRGF0ZU9iaiIsCiAgICAgICAgICAgICAgIl9oaWRlTmV4dE1vbnRoQXJyb3ciLAogICAgICAgICAgICAgICJfaGlkZVByZXZNb250aEFycm93IiwKICAgICAgICAgICAgICAiX19oaWRlTmV4dE1vbnRoQXJyb3ciLAogICAgICAgICAgICAgICJfX2hpZGVQcmV2TW9udGhBcnJvdyIsCiAgICAgICAgICAgICAgImlzTW9iaWxlIiwKICAgICAgICAgICAgICAiaXNPcGVuIiwKICAgICAgICAgICAgICAic2VsZWN0ZWREYXRlRWxlbSIsCiAgICAgICAgICAgICAgIm1pbkRhdGVIYXNUaW1lIiwKICAgICAgICAgICAgICAibWF4RGF0ZUhhc1RpbWUiLAogICAgICAgICAgICAgICJkYXlzIiwKICAgICAgICAgICAgICAiZGF5c0NvbnRhaW5lciIsCiAgICAgICAgICAgICAgIl9pbnB1dCIsCiAgICAgICAgICAgICAgIl9wb3NpdGlvbkVsZW1lbnQiLAogICAgICAgICAgICAgICJpbm5lckNvbnRhaW5lciIsCiAgICAgICAgICAgICAgInJDb250YWluZXIiLAogICAgICAgICAgICAgICJtb250aE5hdiIsCiAgICAgICAgICAgICAgInRvZGF5RGF0ZUVsZW0iLAogICAgICAgICAgICAgICJjYWxlbmRhckNvbnRhaW5lciIsCiAgICAgICAgICAgICAgIndlZWtkYXlDb250YWluZXIiLAogICAgICAgICAgICAgICJwcmV2TW9udGhOYXYiLAogICAgICAgICAgICAgICJuZXh0TW9udGhOYXYiLAogICAgICAgICAgICAgICJtb250aHNEcm9wZG93bkNvbnRhaW5lciIsCiAgICAgICAgICAgICAgImN1cnJlbnRNb250aEVsZW1lbnQiLAogICAgICAgICAgICAgICJjdXJyZW50WWVhckVsZW1lbnQiLAogICAgICAgICAgICAgICJuYXZpZ2F0aW9uQ3VycmVudE1vbnRoIiwKICAgICAgICAgICAgICAic2VsZWN0ZWREYXRlRWxlbSIsCiAgICAgICAgICAgICAgImNvbmZpZyIsCiAgICAgICAgICBdLmZvckVhY2goZnVuY3Rpb24gKGspIHsKICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICBkZWxldGUgc2VsZltrXTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgY2F0Y2ggKF8pIHsgfQogICAgICAgICAgfSk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gaXNDYWxlbmRhckVsZW0oZWxlbSkgewogICAgICAgICAgcmV0dXJuIHNlbGYuY2FsZW5kYXJDb250YWluZXIuY29udGFpbnMoZWxlbSk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZG9jdW1lbnRDbGljayhlKSB7CiAgICAgICAgICBpZiAoc2VsZi5pc09wZW4gJiYgIXNlbGYuY29uZmlnLmlubGluZSkgewogICAgICAgICAgICAgIHZhciBldmVudFRhcmdldF8xID0gZ2V0RXZlbnRUYXJnZXQoZSk7CiAgICAgICAgICAgICAgdmFyIGlzQ2FsZW5kYXJFbGVtZW50ID0gaXNDYWxlbmRhckVsZW0oZXZlbnRUYXJnZXRfMSk7CiAgICAgICAgICAgICAgdmFyIGlzSW5wdXQgPSBldmVudFRhcmdldF8xID09PSBzZWxmLmlucHV0IHx8CiAgICAgICAgICAgICAgICAgIGV2ZW50VGFyZ2V0XzEgPT09IHNlbGYuYWx0SW5wdXQgfHwKICAgICAgICAgICAgICAgICAgc2VsZi5lbGVtZW50LmNvbnRhaW5zKGV2ZW50VGFyZ2V0XzEpIHx8CiAgICAgICAgICAgICAgICAgIChlLnBhdGggJiYKICAgICAgICAgICAgICAgICAgICAgIGUucGF0aC5pbmRleE9mICYmCiAgICAgICAgICAgICAgICAgICAgICAofmUucGF0aC5pbmRleE9mKHNlbGYuaW5wdXQpIHx8CiAgICAgICAgICAgICAgICAgICAgICAgICAgfmUucGF0aC5pbmRleE9mKHNlbGYuYWx0SW5wdXQpKSk7CiAgICAgICAgICAgICAgdmFyIGxvc3RGb2N1cyA9ICFpc0lucHV0ICYmCiAgICAgICAgICAgICAgICAgICFpc0NhbGVuZGFyRWxlbWVudCAmJgogICAgICAgICAgICAgICAgICAhaXNDYWxlbmRhckVsZW0oZS5yZWxhdGVkVGFyZ2V0KTsKICAgICAgICAgICAgICB2YXIgaXNJZ25vcmVkID0gIXNlbGYuY29uZmlnLmlnbm9yZWRGb2N1c0VsZW1lbnRzLnNvbWUoZnVuY3Rpb24gKGVsZW0pIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsZW0uY29udGFpbnMoZXZlbnRUYXJnZXRfMSk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgaWYgKGxvc3RGb2N1cyAmJiBpc0lnbm9yZWQpIHsKICAgICAgICAgICAgICAgICAgaWYgKHNlbGYuY29uZmlnLmFsbG93SW5wdXQpIHsKICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2V0RGF0ZShzZWxmLl9pbnB1dC52YWx1ZSwgZmFsc2UsIHNlbGYuY29uZmlnLmFsdElucHV0CiAgICAgICAgICAgICAgICAgICAgICAgICAgPyBzZWxmLmNvbmZpZy5hbHRGb3JtYXQKICAgICAgICAgICAgICAgICAgICAgICAgICA6IHNlbGYuY29uZmlnLmRhdGVGb3JtYXQpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGlmIChzZWxmLnRpbWVDb250YWluZXIgIT09IHVuZGVmaW5lZCAmJgogICAgICAgICAgICAgICAgICAgICAgc2VsZi5taW51dGVFbGVtZW50ICE9PSB1bmRlZmluZWQgJiYKICAgICAgICAgICAgICAgICAgICAgIHNlbGYuaG91ckVsZW1lbnQgIT09IHVuZGVmaW5lZCAmJgogICAgICAgICAgICAgICAgICAgICAgc2VsZi5pbnB1dC52YWx1ZSAhPT0gIiIgJiYKICAgICAgICAgICAgICAgICAgICAgIHNlbGYuaW5wdXQudmFsdWUgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICAgICAgdXBkYXRlVGltZSgpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIHNlbGYuY2xvc2UoKTsKICAgICAgICAgICAgICAgICAgaWYgKHNlbGYuY29uZmlnICYmCiAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNvbmZpZy5tb2RlID09PSAicmFuZ2UiICYmCiAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoID09PSAxKQogICAgICAgICAgICAgICAgICAgICAgc2VsZi5jbGVhcihmYWxzZSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIGNoYW5nZVllYXIobmV3WWVhcikgewogICAgICAgICAgaWYgKCFuZXdZZWFyIHx8CiAgICAgICAgICAgICAgKHNlbGYuY29uZmlnLm1pbkRhdGUgJiYgbmV3WWVhciA8IHNlbGYuY29uZmlnLm1pbkRhdGUuZ2V0RnVsbFllYXIoKSkgfHwKICAgICAgICAgICAgICAoc2VsZi5jb25maWcubWF4RGF0ZSAmJiBuZXdZZWFyID4gc2VsZi5jb25maWcubWF4RGF0ZS5nZXRGdWxsWWVhcigpKSkKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB2YXIgbmV3WWVhck51bSA9IG5ld1llYXIsIGlzTmV3WWVhciA9IHNlbGYuY3VycmVudFllYXIgIT09IG5ld1llYXJOdW07CiAgICAgICAgICBzZWxmLmN1cnJlbnRZZWFyID0gbmV3WWVhck51bSB8fCBzZWxmLmN1cnJlbnRZZWFyOwogICAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1heERhdGUgJiYKICAgICAgICAgICAgICBzZWxmLmN1cnJlbnRZZWFyID09PSBzZWxmLmNvbmZpZy5tYXhEYXRlLmdldEZ1bGxZZWFyKCkpIHsKICAgICAgICAgICAgICBzZWxmLmN1cnJlbnRNb250aCA9IE1hdGgubWluKHNlbGYuY29uZmlnLm1heERhdGUuZ2V0TW9udGgoKSwgc2VsZi5jdXJyZW50TW9udGgpOwogICAgICAgICAgfQogICAgICAgICAgZWxzZSBpZiAoc2VsZi5jb25maWcubWluRGF0ZSAmJgogICAgICAgICAgICAgIHNlbGYuY3VycmVudFllYXIgPT09IHNlbGYuY29uZmlnLm1pbkRhdGUuZ2V0RnVsbFllYXIoKSkgewogICAgICAgICAgICAgIHNlbGYuY3VycmVudE1vbnRoID0gTWF0aC5tYXgoc2VsZi5jb25maWcubWluRGF0ZS5nZXRNb250aCgpLCBzZWxmLmN1cnJlbnRNb250aCk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoaXNOZXdZZWFyKSB7CiAgICAgICAgICAgICAgc2VsZi5yZWRyYXcoKTsKICAgICAgICAgICAgICB0cmlnZ2VyRXZlbnQoIm9uWWVhckNoYW5nZSIpOwogICAgICAgICAgICAgIGJ1aWxkTW9udGhTd2l0Y2goKTsKICAgICAgICAgIH0KICAgICAgfQogICAgICBmdW5jdGlvbiBpc0VuYWJsZWQoZGF0ZSwgdGltZWxlc3MpIHsKICAgICAgICAgIHZhciBfYTsKICAgICAgICAgIGlmICh0aW1lbGVzcyA9PT0gdm9pZCAwKSB7IHRpbWVsZXNzID0gdHJ1ZTsgfQogICAgICAgICAgdmFyIGRhdGVUb0NoZWNrID0gc2VsZi5wYXJzZURhdGUoZGF0ZSwgdW5kZWZpbmVkLCB0aW1lbGVzcyk7CiAgICAgICAgICBpZiAoKHNlbGYuY29uZmlnLm1pbkRhdGUgJiYKICAgICAgICAgICAgICBkYXRlVG9DaGVjayAmJgogICAgICAgICAgICAgIGNvbXBhcmVEYXRlcyhkYXRlVG9DaGVjaywgc2VsZi5jb25maWcubWluRGF0ZSwgdGltZWxlc3MgIT09IHVuZGVmaW5lZCA/IHRpbWVsZXNzIDogIXNlbGYubWluRGF0ZUhhc1RpbWUpIDwgMCkgfHwKICAgICAgICAgICAgICAoc2VsZi5jb25maWcubWF4RGF0ZSAmJgogICAgICAgICAgICAgICAgICBkYXRlVG9DaGVjayAmJgogICAgICAgICAgICAgICAgICBjb21wYXJlRGF0ZXMoZGF0ZVRvQ2hlY2ssIHNlbGYuY29uZmlnLm1heERhdGUsIHRpbWVsZXNzICE9PSB1bmRlZmluZWQgPyB0aW1lbGVzcyA6ICFzZWxmLm1heERhdGVIYXNUaW1lKSA+IDApKQogICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIGlmICghc2VsZi5jb25maWcuZW5hYmxlICYmIHNlbGYuY29uZmlnLmRpc2FibGUubGVuZ3RoID09PSAwKQogICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgaWYgKGRhdGVUb0NoZWNrID09PSB1bmRlZmluZWQpCiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgdmFyIGJvb2wgPSAhIXNlbGYuY29uZmlnLmVuYWJsZSwgYXJyYXkgPSAoX2EgPSBzZWxmLmNvbmZpZy5lbmFibGUpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHNlbGYuY29uZmlnLmRpc2FibGU7CiAgICAgICAgICBmb3IgKHZhciBpID0gMCwgZCA9IHZvaWQgMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgZCA9IGFycmF5W2ldOwogICAgICAgICAgICAgIGlmICh0eXBlb2YgZCA9PT0gImZ1bmN0aW9uIiAmJgogICAgICAgICAgICAgICAgICBkKGRhdGVUb0NoZWNrKSkKICAgICAgICAgICAgICAgICAgcmV0dXJuIGJvb2w7CiAgICAgICAgICAgICAgZWxzZSBpZiAoZCBpbnN0YW5jZW9mIERhdGUgJiYKICAgICAgICAgICAgICAgICAgZGF0ZVRvQ2hlY2sgIT09IHVuZGVmaW5lZCAmJgogICAgICAgICAgICAgICAgICBkLmdldFRpbWUoKSA9PT0gZGF0ZVRvQ2hlY2suZ2V0VGltZSgpKQogICAgICAgICAgICAgICAgICByZXR1cm4gYm9vbDsKICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgZCA9PT0gInN0cmluZyIpIHsKICAgICAgICAgICAgICAgICAgdmFyIHBhcnNlZCA9IHNlbGYucGFyc2VEYXRlKGQsIHVuZGVmaW5lZCwgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZWQgJiYgcGFyc2VkLmdldFRpbWUoKSA9PT0gZGF0ZVRvQ2hlY2suZ2V0VGltZSgpCiAgICAgICAgICAgICAgICAgICAgICA/IGJvb2wKICAgICAgICAgICAgICAgICAgICAgIDogIWJvb2w7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBkID09PSAib2JqZWN0IiAmJgogICAgICAgICAgICAgICAgICBkYXRlVG9DaGVjayAhPT0gdW5kZWZpbmVkICYmCiAgICAgICAgICAgICAgICAgIGQuZnJvbSAmJgogICAgICAgICAgICAgICAgICBkLnRvICYmCiAgICAgICAgICAgICAgICAgIGRhdGVUb0NoZWNrLmdldFRpbWUoKSA+PSBkLmZyb20uZ2V0VGltZSgpICYmCiAgICAgICAgICAgICAgICAgIGRhdGVUb0NoZWNrLmdldFRpbWUoKSA8PSBkLnRvLmdldFRpbWUoKSkKICAgICAgICAgICAgICAgICAgcmV0dXJuIGJvb2w7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gIWJvb2w7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gaXNJblZpZXcoZWxlbSkgewogICAgICAgICAgaWYgKHNlbGYuZGF5c0NvbnRhaW5lciAhPT0gdW5kZWZpbmVkKQogICAgICAgICAgICAgIHJldHVybiAoZWxlbS5jbGFzc05hbWUuaW5kZXhPZigiaGlkZGVuIikgPT09IC0xICYmCiAgICAgICAgICAgICAgICAgIGVsZW0uY2xhc3NOYW1lLmluZGV4T2YoImZsYXRwaWNrci1kaXNhYmxlZCIpID09PSAtMSAmJgogICAgICAgICAgICAgICAgICBzZWxmLmRheXNDb250YWluZXIuY29udGFpbnMoZWxlbSkpOwogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIG9uQmx1cihlKSB7CiAgICAgICAgICB2YXIgaXNJbnB1dCA9IGUudGFyZ2V0ID09PSBzZWxmLl9pbnB1dDsKICAgICAgICAgIHZhciB2YWx1ZUNoYW5nZWQgPSBzZWxmLl9pbnB1dC52YWx1ZS50cmltRW5kKCkgIT09IGdldERhdGVTdHIoKTsKICAgICAgICAgIGlmIChpc0lucHV0ICYmCiAgICAgICAgICAgICAgdmFsdWVDaGFuZ2VkICYmCiAgICAgICAgICAgICAgIShlLnJlbGF0ZWRUYXJnZXQgJiYgaXNDYWxlbmRhckVsZW0oZS5yZWxhdGVkVGFyZ2V0KSkpIHsKICAgICAgICAgICAgICBzZWxmLnNldERhdGUoc2VsZi5faW5wdXQudmFsdWUsIHRydWUsIGUudGFyZ2V0ID09PSBzZWxmLmFsdElucHV0CiAgICAgICAgICAgICAgICAgID8gc2VsZi5jb25maWcuYWx0Rm9ybWF0CiAgICAgICAgICAgICAgICAgIDogc2VsZi5jb25maWcuZGF0ZUZvcm1hdCk7CiAgICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gb25LZXlEb3duKGUpIHsKICAgICAgICAgIHZhciBldmVudFRhcmdldCA9IGdldEV2ZW50VGFyZ2V0KGUpOwogICAgICAgICAgdmFyIGlzSW5wdXQgPSBzZWxmLmNvbmZpZy53cmFwCiAgICAgICAgICAgICAgPyBlbGVtZW50LmNvbnRhaW5zKGV2ZW50VGFyZ2V0KQogICAgICAgICAgICAgIDogZXZlbnRUYXJnZXQgPT09IHNlbGYuX2lucHV0OwogICAgICAgICAgdmFyIGFsbG93SW5wdXQgPSBzZWxmLmNvbmZpZy5hbGxvd0lucHV0OwogICAgICAgICAgdmFyIGFsbG93S2V5ZG93biA9IHNlbGYuaXNPcGVuICYmICghYWxsb3dJbnB1dCB8fCAhaXNJbnB1dCk7CiAgICAgICAgICB2YXIgYWxsb3dJbmxpbmVLZXlkb3duID0gc2VsZi5jb25maWcuaW5saW5lICYmIGlzSW5wdXQgJiYgIWFsbG93SW5wdXQ7CiAgICAgICAgICBpZiAoZS5rZXlDb2RlID09PSAxMyAmJiBpc0lucHV0KSB7CiAgICAgICAgICAgICAgaWYgKGFsbG93SW5wdXQpIHsKICAgICAgICAgICAgICAgICAgc2VsZi5zZXREYXRlKHNlbGYuX2lucHV0LnZhbHVlLCB0cnVlLCBldmVudFRhcmdldCA9PT0gc2VsZi5hbHRJbnB1dAogICAgICAgICAgICAgICAgICAgICAgPyBzZWxmLmNvbmZpZy5hbHRGb3JtYXQKICAgICAgICAgICAgICAgICAgICAgIDogc2VsZi5jb25maWcuZGF0ZUZvcm1hdCk7CiAgICAgICAgICAgICAgICAgIHNlbGYuY2xvc2UoKTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGV2ZW50VGFyZ2V0LmJsdXIoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgIHNlbGYub3BlbigpOwogICAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGVsc2UgaWYgKGlzQ2FsZW5kYXJFbGVtKGV2ZW50VGFyZ2V0KSB8fAogICAgICAgICAgICAgIGFsbG93S2V5ZG93biB8fAogICAgICAgICAgICAgIGFsbG93SW5saW5lS2V5ZG93bikgewogICAgICAgICAgICAgIHZhciBpc1RpbWVPYmogPSAhIXNlbGYudGltZUNvbnRhaW5lciAmJgogICAgICAgICAgICAgICAgICBzZWxmLnRpbWVDb250YWluZXIuY29udGFpbnMoZXZlbnRUYXJnZXQpOwogICAgICAgICAgICAgIHN3aXRjaCAoZS5rZXlDb2RlKSB7CiAgICAgICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNUaW1lT2JqKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVRpbWUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICBmb2N1c0FuZENsb3NlKCk7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0RGF0ZShlKTsKICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICBjYXNlIDI3OgogICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgICAgICAgZm9jdXNBbmRDbG9zZSgpOwogICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgICAgY2FzZSA0NjoKICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0lucHV0ICYmICFzZWxmLmNvbmZpZy5hbGxvd0lucHV0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY2xlYXIoKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICBjYXNlIDM3OgogICAgICAgICAgICAgICAgICBjYXNlIDM5OgogICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc1RpbWVPYmogJiYgIWlzSW5wdXQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFjdGl2ZUVsZW1lbnQgPSBnZXRDbG9zZXN0QWN0aXZlRWxlbWVudCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWxmLmRheXNDb250YWluZXIgIT09IHVuZGVmaW5lZCAmJgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoYWxsb3dJbnB1dCA9PT0gZmFsc2UgfHwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChhY3RpdmVFbGVtZW50ICYmIGlzSW5WaWV3KGFjdGl2ZUVsZW1lbnQpKSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRlbHRhXzEgPSBlLmtleUNvZGUgPT09IDM5ID8gMSA6IC0xOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWUuY3RybEtleSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvY3VzT25EYXkodW5kZWZpbmVkLCBkZWx0YV8xKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlTW9udGgoZGVsdGFfMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb2N1c09uRGF5KGdldEZpcnN0QXZhaWxhYmxlRGF5KDEpLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHNlbGYuaG91ckVsZW1lbnQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5ob3VyRWxlbWVudC5mb2N1cygpOwogICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIGNhc2UgMzg6CiAgICAgICAgICAgICAgICAgIGNhc2UgNDA6CiAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgZGVsdGEgPSBlLmtleUNvZGUgPT09IDQwID8gMSA6IC0xOwogICAgICAgICAgICAgICAgICAgICAgaWYgKChzZWxmLmRheXNDb250YWluZXIgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudFRhcmdldC4kaSAhPT0gdW5kZWZpbmVkKSB8fAogICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50VGFyZ2V0ID09PSBzZWxmLmlucHV0IHx8CiAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRUYXJnZXQgPT09IHNlbGYuYWx0SW5wdXQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS5jdHJsS2V5KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZVllYXIoc2VsZi5jdXJyZW50WWVhciAtIGRlbHRhKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9jdXNPbkRheShnZXRGaXJzdEF2YWlsYWJsZURheSgxKSwgMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFpc1RpbWVPYmopCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvY3VzT25EYXkodW5kZWZpbmVkLCBkZWx0YSAqIDcpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZXZlbnRUYXJnZXQgPT09IHNlbGYuY3VycmVudFllYXJFbGVtZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlWWVhcihzZWxmLmN1cnJlbnRZZWFyIC0gZGVsdGEpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoc2VsZi5jb25maWcuZW5hYmxlVGltZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNUaW1lT2JqICYmIHNlbGYuaG91ckVsZW1lbnQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuaG91ckVsZW1lbnQuZm9jdXMoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVUaW1lKGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2RlYm91bmNlZENoYW5nZSgpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgICAgICAgIGlmIChpc1RpbWVPYmopIHsKICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbXMgPSBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuaG91ckVsZW1lbnQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubWludXRlRWxlbWVudCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zZWNvbmRFbGVtZW50LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmFtUE0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY29uY2F0KHNlbGYucGx1Z2luRWxlbWVudHMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHg7IH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gZWxlbXMuaW5kZXhPZihldmVudFRhcmdldCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgIT09IC0xKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSBlbGVtc1tpICsgKGUuc2hpZnRLZXkgPyAtMSA6IDEpXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGFyZ2V0IHx8IHNlbGYuX2lucHV0KS5mb2N1cygpOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFzZWxmLmNvbmZpZy5ub0NhbGVuZGFyICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5kYXlzQ29udGFpbmVyICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5kYXlzQ29udGFpbmVyLmNvbnRhaW5zKGV2ZW50VGFyZ2V0KSAmJgogICAgICAgICAgICAgICAgICAgICAgICAgIGUuc2hpZnRLZXkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5faW5wdXQuZm9jdXMoKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGlmIChzZWxmLmFtUE0gIT09IHVuZGVmaW5lZCAmJiBldmVudFRhcmdldCA9PT0gc2VsZi5hbVBNKSB7CiAgICAgICAgICAgICAgc3dpdGNoIChlLmtleSkgewogICAgICAgICAgICAgICAgICBjYXNlIHNlbGYubDEwbi5hbVBNWzBdLmNoYXJBdCgwKToKICAgICAgICAgICAgICAgICAgY2FzZSBzZWxmLmwxMG4uYW1QTVswXS5jaGFyQXQoMCkudG9Mb3dlckNhc2UoKToKICAgICAgICAgICAgICAgICAgICAgIHNlbGYuYW1QTS50ZXh0Q29udGVudCA9IHNlbGYubDEwbi5hbVBNWzBdOwogICAgICAgICAgICAgICAgICAgICAgc2V0SG91cnNGcm9tSW5wdXRzKCk7CiAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVWYWx1ZSgpOwogICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgIGNhc2Ugc2VsZi5sMTBuLmFtUE1bMV0uY2hhckF0KDApOgogICAgICAgICAgICAgICAgICBjYXNlIHNlbGYubDEwbi5hbVBNWzFdLmNoYXJBdCgwKS50b0xvd2VyQ2FzZSgpOgogICAgICAgICAgICAgICAgICAgICAgc2VsZi5hbVBNLnRleHRDb250ZW50ID0gc2VsZi5sMTBuLmFtUE1bMV07CiAgICAgICAgICAgICAgICAgICAgICBzZXRIb3Vyc0Zyb21JbnB1dHMoKTsKICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVZhbHVlKCk7CiAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoaXNJbnB1dCB8fCBpc0NhbGVuZGFyRWxlbShldmVudFRhcmdldCkpIHsKICAgICAgICAgICAgICB0cmlnZ2VyRXZlbnQoIm9uS2V5RG93biIsIGUpOwogICAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIG9uTW91c2VPdmVyKGVsZW0sIGNlbGxDbGFzcykgewogICAgICAgICAgaWYgKGNlbGxDbGFzcyA9PT0gdm9pZCAwKSB7IGNlbGxDbGFzcyA9ICJmbGF0cGlja3ItZGF5IjsgfQogICAgICAgICAgaWYgKHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggIT09IDEgfHwKICAgICAgICAgICAgICAoZWxlbSAmJgogICAgICAgICAgICAgICAgICAoIWVsZW0uY2xhc3NMaXN0LmNvbnRhaW5zKGNlbGxDbGFzcykgfHwKICAgICAgICAgICAgICAgICAgICAgIGVsZW0uY2xhc3NMaXN0LmNvbnRhaW5zKCJmbGF0cGlja3ItZGlzYWJsZWQiKSkpKQogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIHZhciBob3ZlckRhdGUgPSBlbGVtCiAgICAgICAgICAgICAgPyBlbGVtLmRhdGVPYmouZ2V0VGltZSgpCiAgICAgICAgICAgICAgOiBzZWxmLmRheXMuZmlyc3RFbGVtZW50Q2hpbGQuZGF0ZU9iai5nZXRUaW1lKCksIGluaXRpYWxEYXRlID0gc2VsZi5wYXJzZURhdGUoc2VsZi5zZWxlY3RlZERhdGVzWzBdLCB1bmRlZmluZWQsIHRydWUpLmdldFRpbWUoKSwgcmFuZ2VTdGFydERhdGUgPSBNYXRoLm1pbihob3ZlckRhdGUsIHNlbGYuc2VsZWN0ZWREYXRlc1swXS5nZXRUaW1lKCkpLCByYW5nZUVuZERhdGUgPSBNYXRoLm1heChob3ZlckRhdGUsIHNlbGYuc2VsZWN0ZWREYXRlc1swXS5nZXRUaW1lKCkpOwogICAgICAgICAgdmFyIGNvbnRhaW5zRGlzYWJsZWQgPSBmYWxzZTsKICAgICAgICAgIHZhciBtaW5SYW5nZSA9IDAsIG1heFJhbmdlID0gMDsKICAgICAgICAgIGZvciAodmFyIHQgPSByYW5nZVN0YXJ0RGF0ZTsgdCA8IHJhbmdlRW5kRGF0ZTsgdCArPSBkdXJhdGlvbi5EQVkpIHsKICAgICAgICAgICAgICBpZiAoIWlzRW5hYmxlZChuZXcgRGF0ZSh0KSwgdHJ1ZSkpIHsKICAgICAgICAgICAgICAgICAgY29udGFpbnNEaXNhYmxlZCA9CiAgICAgICAgICAgICAgICAgICAgICBjb250YWluc0Rpc2FibGVkIHx8ICh0ID4gcmFuZ2VTdGFydERhdGUgJiYgdCA8IHJhbmdlRW5kRGF0ZSk7CiAgICAgICAgICAgICAgICAgIGlmICh0IDwgaW5pdGlhbERhdGUgJiYgKCFtaW5SYW5nZSB8fCB0ID4gbWluUmFuZ2UpKQogICAgICAgICAgICAgICAgICAgICAgbWluUmFuZ2UgPSB0OwogICAgICAgICAgICAgICAgICBlbHNlIGlmICh0ID4gaW5pdGlhbERhdGUgJiYgKCFtYXhSYW5nZSB8fCB0IDwgbWF4UmFuZ2UpKQogICAgICAgICAgICAgICAgICAgICAgbWF4UmFuZ2UgPSB0OwogICAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHZhciBob3ZlcmFibGVDZWxscyA9IEFycmF5LmZyb20oc2VsZi5yQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoIio6bnRoLWNoaWxkKC1uKyIgKyBzZWxmLmNvbmZpZy5zaG93TW9udGhzICsgIikgPiAuIiArIGNlbGxDbGFzcykpOwogICAgICAgICAgaG92ZXJhYmxlQ2VsbHMuZm9yRWFjaChmdW5jdGlvbiAoZGF5RWxlbSkgewogICAgICAgICAgICAgIHZhciBkYXRlID0gZGF5RWxlbS5kYXRlT2JqOwogICAgICAgICAgICAgIHZhciB0aW1lc3RhbXAgPSBkYXRlLmdldFRpbWUoKTsKICAgICAgICAgICAgICB2YXIgb3V0T2ZSYW5nZSA9IChtaW5SYW5nZSA+IDAgJiYgdGltZXN0YW1wIDwgbWluUmFuZ2UpIHx8CiAgICAgICAgICAgICAgICAgIChtYXhSYW5nZSA+IDAgJiYgdGltZXN0YW1wID4gbWF4UmFuZ2UpOwogICAgICAgICAgICAgIGlmIChvdXRPZlJhbmdlKSB7CiAgICAgICAgICAgICAgICAgIGRheUVsZW0uY2xhc3NMaXN0LmFkZCgibm90QWxsb3dlZCIpOwogICAgICAgICAgICAgICAgICBbImluUmFuZ2UiLCAic3RhcnRSYW5nZSIsICJlbmRSYW5nZSJdLmZvckVhY2goZnVuY3Rpb24gKGMpIHsKICAgICAgICAgICAgICAgICAgICAgIGRheUVsZW0uY2xhc3NMaXN0LnJlbW92ZShjKTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgZWxzZSBpZiAoY29udGFpbnNEaXNhYmxlZCAmJiAhb3V0T2ZSYW5nZSkKICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgIFsic3RhcnRSYW5nZSIsICJpblJhbmdlIiwgImVuZFJhbmdlIiwgIm5vdEFsbG93ZWQiXS5mb3JFYWNoKGZ1bmN0aW9uIChjKSB7CiAgICAgICAgICAgICAgICAgIGRheUVsZW0uY2xhc3NMaXN0LnJlbW92ZShjKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBpZiAoZWxlbSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICAgIGVsZW0uY2xhc3NMaXN0LmFkZChob3ZlckRhdGUgPD0gc2VsZi5zZWxlY3RlZERhdGVzWzBdLmdldFRpbWUoKQogICAgICAgICAgICAgICAgICAgICAgPyAic3RhcnRSYW5nZSIKICAgICAgICAgICAgICAgICAgICAgIDogImVuZFJhbmdlIik7CiAgICAgICAgICAgICAgICAgIGlmIChpbml0aWFsRGF0ZSA8IGhvdmVyRGF0ZSAmJiB0aW1lc3RhbXAgPT09IGluaXRpYWxEYXRlKQogICAgICAgICAgICAgICAgICAgICAgZGF5RWxlbS5jbGFzc0xpc3QuYWRkKCJzdGFydFJhbmdlIik7CiAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGluaXRpYWxEYXRlID4gaG92ZXJEYXRlICYmIHRpbWVzdGFtcCA9PT0gaW5pdGlhbERhdGUpCiAgICAgICAgICAgICAgICAgICAgICBkYXlFbGVtLmNsYXNzTGlzdC5hZGQoImVuZFJhbmdlIik7CiAgICAgICAgICAgICAgICAgIGlmICh0aW1lc3RhbXAgPj0gbWluUmFuZ2UgJiYKICAgICAgICAgICAgICAgICAgICAgIChtYXhSYW5nZSA9PT0gMCB8fCB0aW1lc3RhbXAgPD0gbWF4UmFuZ2UpICYmCiAgICAgICAgICAgICAgICAgICAgICBpc0JldHdlZW4odGltZXN0YW1wLCBpbml0aWFsRGF0ZSwgaG92ZXJEYXRlKSkKICAgICAgICAgICAgICAgICAgICAgIGRheUVsZW0uY2xhc3NMaXN0LmFkZCgiaW5SYW5nZSIpOwogICAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIG9uUmVzaXplKCkgewogICAgICAgICAgaWYgKHNlbGYuaXNPcGVuICYmICFzZWxmLmNvbmZpZy5zdGF0aWMgJiYgIXNlbGYuY29uZmlnLmlubGluZSkKICAgICAgICAgICAgICBwb3NpdGlvbkNhbGVuZGFyKCk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gb3BlbihlLCBwb3NpdGlvbkVsZW1lbnQpIHsKICAgICAgICAgIGlmIChwb3NpdGlvbkVsZW1lbnQgPT09IHZvaWQgMCkgeyBwb3NpdGlvbkVsZW1lbnQgPSBzZWxmLl9wb3NpdGlvbkVsZW1lbnQ7IH0KICAgICAgICAgIGlmIChzZWxmLmlzTW9iaWxlID09PSB0cnVlKSB7CiAgICAgICAgICAgICAgaWYgKGUpIHsKICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgICB2YXIgZXZlbnRUYXJnZXQgPSBnZXRFdmVudFRhcmdldChlKTsKICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50VGFyZ2V0KSB7CiAgICAgICAgICAgICAgICAgICAgICBldmVudFRhcmdldC5ibHVyKCk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKHNlbGYubW9iaWxlSW5wdXQgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICBzZWxmLm1vYmlsZUlucHV0LmZvY3VzKCk7CiAgICAgICAgICAgICAgICAgIHNlbGYubW9iaWxlSW5wdXQuY2xpY2soKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgdHJpZ2dlckV2ZW50KCJvbk9wZW4iKTsKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICBlbHNlIGlmIChzZWxmLl9pbnB1dC5kaXNhYmxlZCB8fCBzZWxmLmNvbmZpZy5pbmxpbmUpIHsKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICB2YXIgd2FzT3BlbiA9IHNlbGYuaXNPcGVuOwogICAgICAgICAgc2VsZi5pc09wZW4gPSB0cnVlOwogICAgICAgICAgaWYgKCF3YXNPcGVuKSB7CiAgICAgICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCJvcGVuIik7CiAgICAgICAgICAgICAgc2VsZi5faW5wdXQuY2xhc3NMaXN0LmFkZCgiYWN0aXZlIik7CiAgICAgICAgICAgICAgdHJpZ2dlckV2ZW50KCJvbk9wZW4iKTsKICAgICAgICAgICAgICBwb3NpdGlvbkNhbGVuZGFyKHBvc2l0aW9uRWxlbWVudCk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoc2VsZi5jb25maWcuZW5hYmxlVGltZSA9PT0gdHJ1ZSAmJiBzZWxmLmNvbmZpZy5ub0NhbGVuZGFyID09PSB0cnVlKSB7CiAgICAgICAgICAgICAgaWYgKHNlbGYuY29uZmlnLmFsbG93SW5wdXQgPT09IGZhbHNlICYmCiAgICAgICAgICAgICAgICAgIChlID09PSB1bmRlZmluZWQgfHwKICAgICAgICAgICAgICAgICAgICAgICFzZWxmLnRpbWVDb250YWluZXIuY29udGFpbnMoZS5yZWxhdGVkVGFyZ2V0KSkpIHsKICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IHJldHVybiBzZWxmLmhvdXJFbGVtZW50LnNlbGVjdCgpOyB9LCA1MCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIG1pbk1heERhdGVTZXR0ZXIodHlwZSkgewogICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChkYXRlKSB7CiAgICAgICAgICAgICAgdmFyIGRhdGVPYmogPSAoc2VsZi5jb25maWdbIl8iICsgdHlwZSArICJEYXRlIl0gPSBzZWxmLnBhcnNlRGF0ZShkYXRlLCBzZWxmLmNvbmZpZy5kYXRlRm9ybWF0KSk7CiAgICAgICAgICAgICAgdmFyIGludmVyc2VEYXRlT2JqID0gc2VsZi5jb25maWdbIl8iICsgKHR5cGUgPT09ICJtaW4iID8gIm1heCIgOiAibWluIikgKyAiRGF0ZSJdOwogICAgICAgICAgICAgIGlmIChkYXRlT2JqICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgICAgc2VsZlt0eXBlID09PSAibWluIiA/ICJtaW5EYXRlSGFzVGltZSIgOiAibWF4RGF0ZUhhc1RpbWUiXSA9CiAgICAgICAgICAgICAgICAgICAgICBkYXRlT2JqLmdldEhvdXJzKCkgPiAwIHx8CiAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZU9iai5nZXRNaW51dGVzKCkgPiAwIHx8CiAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZU9iai5nZXRTZWNvbmRzKCkgPiAwOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoc2VsZi5zZWxlY3RlZERhdGVzKSB7CiAgICAgICAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlcyA9IHNlbGYuc2VsZWN0ZWREYXRlcy5maWx0ZXIoZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGlzRW5hYmxlZChkKTsgfSk7CiAgICAgICAgICAgICAgICAgIGlmICghc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCAmJiB0eXBlID09PSAibWluIikKICAgICAgICAgICAgICAgICAgICAgIHNldEhvdXJzRnJvbURhdGUoZGF0ZU9iaik7CiAgICAgICAgICAgICAgICAgIHVwZGF0ZVZhbHVlKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmIChzZWxmLmRheXNDb250YWluZXIpIHsKICAgICAgICAgICAgICAgICAgcmVkcmF3KCk7CiAgICAgICAgICAgICAgICAgIGlmIChkYXRlT2JqICE9PSB1bmRlZmluZWQpCiAgICAgICAgICAgICAgICAgICAgICBzZWxmLmN1cnJlbnRZZWFyRWxlbWVudFt0eXBlXSA9IGRhdGVPYmouZ2V0RnVsbFllYXIoKS50b1N0cmluZygpOwogICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICBzZWxmLmN1cnJlbnRZZWFyRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUodHlwZSk7CiAgICAgICAgICAgICAgICAgIHNlbGYuY3VycmVudFllYXJFbGVtZW50LmRpc2FibGVkID0KICAgICAgICAgICAgICAgICAgICAgICEhaW52ZXJzZURhdGVPYmogJiYKICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlT2JqICE9PSB1bmRlZmluZWQgJiYKICAgICAgICAgICAgICAgICAgICAgICAgICBpbnZlcnNlRGF0ZU9iai5nZXRGdWxsWWVhcigpID09PSBkYXRlT2JqLmdldEZ1bGxZZWFyKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgfTsKICAgICAgfQogICAgICBmdW5jdGlvbiBwYXJzZUNvbmZpZygpIHsKICAgICAgICAgIHZhciBib29sT3B0cyA9IFsKICAgICAgICAgICAgICAid3JhcCIsCiAgICAgICAgICAgICAgIndlZWtOdW1iZXJzIiwKICAgICAgICAgICAgICAiYWxsb3dJbnB1dCIsCiAgICAgICAgICAgICAgImFsbG93SW52YWxpZFByZWxvYWQiLAogICAgICAgICAgICAgICJjbGlja09wZW5zIiwKICAgICAgICAgICAgICAidGltZV8yNGhyIiwKICAgICAgICAgICAgICAiZW5hYmxlVGltZSIsCiAgICAgICAgICAgICAgIm5vQ2FsZW5kYXIiLAogICAgICAgICAgICAgICJhbHRJbnB1dCIsCiAgICAgICAgICAgICAgInNob3J0aGFuZEN1cnJlbnRNb250aCIsCiAgICAgICAgICAgICAgImlubGluZSIsCiAgICAgICAgICAgICAgInN0YXRpYyIsCiAgICAgICAgICAgICAgImVuYWJsZVNlY29uZHMiLAogICAgICAgICAgICAgICJkaXNhYmxlTW9iaWxlIiwKICAgICAgICAgIF07CiAgICAgICAgICB2YXIgdXNlckNvbmZpZyA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGVsZW1lbnQuZGF0YXNldCB8fCB7fSkpKSwgaW5zdGFuY2VDb25maWcpOwogICAgICAgICAgdmFyIGZvcm1hdHMgPSB7fTsKICAgICAgICAgIHNlbGYuY29uZmlnLnBhcnNlRGF0ZSA9IHVzZXJDb25maWcucGFyc2VEYXRlOwogICAgICAgICAgc2VsZi5jb25maWcuZm9ybWF0RGF0ZSA9IHVzZXJDb25maWcuZm9ybWF0RGF0ZTsKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzZWxmLmNvbmZpZywgImVuYWJsZSIsIHsKICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNlbGYuY29uZmlnLl9lbmFibGU7IH0sCiAgICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAoZGF0ZXMpIHsKICAgICAgICAgICAgICAgICAgc2VsZi5jb25maWcuX2VuYWJsZSA9IHBhcnNlRGF0ZVJ1bGVzKGRhdGVzKTsKICAgICAgICAgICAgICB9LAogICAgICAgICAgfSk7CiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2VsZi5jb25maWcsICJkaXNhYmxlIiwgewogICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gc2VsZi5jb25maWcuX2Rpc2FibGU7IH0sCiAgICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAoZGF0ZXMpIHsKICAgICAgICAgICAgICAgICAgc2VsZi5jb25maWcuX2Rpc2FibGUgPSBwYXJzZURhdGVSdWxlcyhkYXRlcyk7CiAgICAgICAgICAgICAgfSwKICAgICAgICAgIH0pOwogICAgICAgICAgdmFyIHRpbWVNb2RlID0gdXNlckNvbmZpZy5tb2RlID09PSAidGltZSI7CiAgICAgICAgICBpZiAoIXVzZXJDb25maWcuZGF0ZUZvcm1hdCAmJiAodXNlckNvbmZpZy5lbmFibGVUaW1lIHx8IHRpbWVNb2RlKSkgewogICAgICAgICAgICAgIHZhciBkZWZhdWx0RGF0ZUZvcm1hdCA9IGZsYXRwaWNrci5kZWZhdWx0Q29uZmlnLmRhdGVGb3JtYXQgfHwgZGVmYXVsdHMuZGF0ZUZvcm1hdDsKICAgICAgICAgICAgICBmb3JtYXRzLmRhdGVGb3JtYXQgPQogICAgICAgICAgICAgICAgICB1c2VyQ29uZmlnLm5vQ2FsZW5kYXIgfHwgdGltZU1vZGUKICAgICAgICAgICAgICAgICAgICAgID8gIkg6aSIgKyAodXNlckNvbmZpZy5lbmFibGVTZWNvbmRzID8gIjpTIiA6ICIiKQogICAgICAgICAgICAgICAgICAgICAgOiBkZWZhdWx0RGF0ZUZvcm1hdCArICIgSDppIiArICh1c2VyQ29uZmlnLmVuYWJsZVNlY29uZHMgPyAiOlMiIDogIiIpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHVzZXJDb25maWcuYWx0SW5wdXQgJiYKICAgICAgICAgICAgICAodXNlckNvbmZpZy5lbmFibGVUaW1lIHx8IHRpbWVNb2RlKSAmJgogICAgICAgICAgICAgICF1c2VyQ29uZmlnLmFsdEZvcm1hdCkgewogICAgICAgICAgICAgIHZhciBkZWZhdWx0QWx0Rm9ybWF0ID0gZmxhdHBpY2tyLmRlZmF1bHRDb25maWcuYWx0Rm9ybWF0IHx8IGRlZmF1bHRzLmFsdEZvcm1hdDsKICAgICAgICAgICAgICBmb3JtYXRzLmFsdEZvcm1hdCA9CiAgICAgICAgICAgICAgICAgIHVzZXJDb25maWcubm9DYWxlbmRhciB8fCB0aW1lTW9kZQogICAgICAgICAgICAgICAgICAgICAgPyAiaDppIiArICh1c2VyQ29uZmlnLmVuYWJsZVNlY29uZHMgPyAiOlMgSyIgOiAiIEsiKQogICAgICAgICAgICAgICAgICAgICAgOiBkZWZhdWx0QWx0Rm9ybWF0ICsgKCIgaDppIiArICh1c2VyQ29uZmlnLmVuYWJsZVNlY29uZHMgPyAiOlMiIDogIiIpICsgIiBLIik7CiAgICAgICAgICB9CiAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2VsZi5jb25maWcsICJtaW5EYXRlIiwgewogICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gc2VsZi5jb25maWcuX21pbkRhdGU7IH0sCiAgICAgICAgICAgICAgc2V0OiBtaW5NYXhEYXRlU2V0dGVyKCJtaW4iKSwKICAgICAgICAgIH0pOwogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNlbGYuY29uZmlnLCAibWF4RGF0ZSIsIHsKICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNlbGYuY29uZmlnLl9tYXhEYXRlOyB9LAogICAgICAgICAgICAgIHNldDogbWluTWF4RGF0ZVNldHRlcigibWF4IiksCiAgICAgICAgICB9KTsKICAgICAgICAgIHZhciBtaW5NYXhUaW1lU2V0dGVyID0gZnVuY3Rpb24gKHR5cGUpIHsgcmV0dXJuIGZ1bmN0aW9uICh2YWwpIHsKICAgICAgICAgICAgICBzZWxmLmNvbmZpZ1t0eXBlID09PSAibWluIiA/ICJfbWluVGltZSIgOiAiX21heFRpbWUiXSA9IHNlbGYucGFyc2VEYXRlKHZhbCwgIkg6aTpTIik7CiAgICAgICAgICB9OyB9OwogICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNlbGYuY29uZmlnLCAibWluVGltZSIsIHsKICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNlbGYuY29uZmlnLl9taW5UaW1lOyB9LAogICAgICAgICAgICAgIHNldDogbWluTWF4VGltZVNldHRlcigibWluIiksCiAgICAgICAgICB9KTsKICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzZWxmLmNvbmZpZywgIm1heFRpbWUiLCB7CiAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBzZWxmLmNvbmZpZy5fbWF4VGltZTsgfSwKICAgICAgICAgICAgICBzZXQ6IG1pbk1heFRpbWVTZXR0ZXIoIm1heCIpLAogICAgICAgICAgfSk7CiAgICAgICAgICBpZiAodXNlckNvbmZpZy5tb2RlID09PSAidGltZSIpIHsKICAgICAgICAgICAgICBzZWxmLmNvbmZpZy5ub0NhbGVuZGFyID0gdHJ1ZTsKICAgICAgICAgICAgICBzZWxmLmNvbmZpZy5lbmFibGVUaW1lID0gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICAgIE9iamVjdC5hc3NpZ24oc2VsZi5jb25maWcsIGZvcm1hdHMsIHVzZXJDb25maWcpOwogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBib29sT3B0cy5sZW5ndGg7IGkrKykKICAgICAgICAgICAgICBzZWxmLmNvbmZpZ1tib29sT3B0c1tpXV0gPQogICAgICAgICAgICAgICAgICBzZWxmLmNvbmZpZ1tib29sT3B0c1tpXV0gPT09IHRydWUgfHwKICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY29uZmlnW2Jvb2xPcHRzW2ldXSA9PT0gInRydWUiOwogICAgICAgICAgSE9PS1MuZmlsdGVyKGZ1bmN0aW9uIChob29rKSB7IHJldHVybiBzZWxmLmNvbmZpZ1tob29rXSAhPT0gdW5kZWZpbmVkOyB9KS5mb3JFYWNoKGZ1bmN0aW9uIChob29rKSB7CiAgICAgICAgICAgICAgc2VsZi5jb25maWdbaG9va10gPSBhcnJheWlmeShzZWxmLmNvbmZpZ1tob29rXSB8fCBbXSkubWFwKGJpbmRUb0luc3RhbmNlKTsKICAgICAgICAgIH0pOwogICAgICAgICAgc2VsZi5pc01vYmlsZSA9CiAgICAgICAgICAgICAgIXNlbGYuY29uZmlnLmRpc2FibGVNb2JpbGUgJiYKICAgICAgICAgICAgICAgICAgIXNlbGYuY29uZmlnLmlubGluZSAmJgogICAgICAgICAgICAgICAgICBzZWxmLmNvbmZpZy5tb2RlID09PSAic2luZ2xlIiAmJgogICAgICAgICAgICAgICAgICAhc2VsZi5jb25maWcuZGlzYWJsZS5sZW5ndGggJiYKICAgICAgICAgICAgICAgICAgIXNlbGYuY29uZmlnLmVuYWJsZSAmJgogICAgICAgICAgICAgICAgICAhc2VsZi5jb25maWcud2Vla051bWJlcnMgJiYKICAgICAgICAgICAgICAgICAgL0FuZHJvaWR8d2ViT1N8aVBob25lfGlQYWR8aVBvZHxCbGFja0JlcnJ5fElFTW9iaWxlfE9wZXJhIE1pbmkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpOwogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWxmLmNvbmZpZy5wbHVnaW5zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgdmFyIHBsdWdpbkNvbmYgPSBzZWxmLmNvbmZpZy5wbHVnaW5zW2ldKHNlbGYpIHx8IHt9OwogICAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBwbHVnaW5Db25mKSB7CiAgICAgICAgICAgICAgICAgIGlmIChIT09LUy5pbmRleE9mKGtleSkgPiAtMSkgewogICAgICAgICAgICAgICAgICAgICAgc2VsZi5jb25maWdba2V5XSA9IGFycmF5aWZ5KHBsdWdpbkNvbmZba2V5XSkKICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKGJpbmRUb0luc3RhbmNlKQogICAgICAgICAgICAgICAgICAgICAgICAgIC5jb25jYXQoc2VsZi5jb25maWdba2V5XSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIHVzZXJDb25maWdba2V5XSA9PT0gInVuZGVmaW5lZCIpCiAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNvbmZpZ1trZXldID0gcGx1Z2luQ29uZltrZXldOwogICAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGlmICghdXNlckNvbmZpZy5hbHRJbnB1dENsYXNzKSB7CiAgICAgICAgICAgICAgc2VsZi5jb25maWcuYWx0SW5wdXRDbGFzcyA9CiAgICAgICAgICAgICAgICAgIGdldElucHV0RWxlbSgpLmNsYXNzTmFtZSArICIgIiArIHNlbGYuY29uZmlnLmFsdElucHV0Q2xhc3M7CiAgICAgICAgICB9CiAgICAgICAgICB0cmlnZ2VyRXZlbnQoIm9uUGFyc2VDb25maWciKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBnZXRJbnB1dEVsZW0oKSB7CiAgICAgICAgICByZXR1cm4gc2VsZi5jb25maWcud3JhcAogICAgICAgICAgICAgID8gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCJbZGF0YS1pbnB1dF0iKQogICAgICAgICAgICAgIDogZWxlbWVudDsKICAgICAgfQogICAgICBmdW5jdGlvbiBzZXR1cExvY2FsZSgpIHsKICAgICAgICAgIGlmICh0eXBlb2Ygc2VsZi5jb25maWcubG9jYWxlICE9PSAib2JqZWN0IiAmJgogICAgICAgICAgICAgIHR5cGVvZiBmbGF0cGlja3IubDEwbnNbc2VsZi5jb25maWcubG9jYWxlXSA9PT0gInVuZGVmaW5lZCIpCiAgICAgICAgICAgICAgc2VsZi5jb25maWcuZXJyb3JIYW5kbGVyKG5ldyBFcnJvcigiZmxhdHBpY2tyOiBpbnZhbGlkIGxvY2FsZSAiICsgc2VsZi5jb25maWcubG9jYWxlKSk7CiAgICAgICAgICBzZWxmLmwxMG4gPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgZmxhdHBpY2tyLmwxMG5zLmRlZmF1bHQpLCAodHlwZW9mIHNlbGYuY29uZmlnLmxvY2FsZSA9PT0gIm9iamVjdCIKICAgICAgICAgICAgICA/IHNlbGYuY29uZmlnLmxvY2FsZQogICAgICAgICAgICAgIDogc2VsZi5jb25maWcubG9jYWxlICE9PSAiZGVmYXVsdCIKICAgICAgICAgICAgICAgICAgPyBmbGF0cGlja3IubDEwbnNbc2VsZi5jb25maWcubG9jYWxlXQogICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZCkpOwogICAgICAgICAgdG9rZW5SZWdleC5EID0gIigiICsgc2VsZi5sMTBuLndlZWtkYXlzLnNob3J0aGFuZC5qb2luKCJ8IikgKyAiKSI7CiAgICAgICAgICB0b2tlblJlZ2V4LmwgPSAiKCIgKyBzZWxmLmwxMG4ud2Vla2RheXMubG9uZ2hhbmQuam9pbigifCIpICsgIikiOwogICAgICAgICAgdG9rZW5SZWdleC5NID0gIigiICsgc2VsZi5sMTBuLm1vbnRocy5zaG9ydGhhbmQuam9pbigifCIpICsgIikiOwogICAgICAgICAgdG9rZW5SZWdleC5GID0gIigiICsgc2VsZi5sMTBuLm1vbnRocy5sb25naGFuZC5qb2luKCJ8IikgKyAiKSI7CiAgICAgICAgICB0b2tlblJlZ2V4LksgPSAiKCIgKyBzZWxmLmwxMG4uYW1QTVswXSArICJ8IiArIHNlbGYubDEwbi5hbVBNWzFdICsgInwiICsgc2VsZi5sMTBuLmFtUE1bMF0udG9Mb3dlckNhc2UoKSArICJ8IiArIHNlbGYubDEwbi5hbVBNWzFdLnRvTG93ZXJDYXNlKCkgKyAiKSI7CiAgICAgICAgICB2YXIgdXNlckNvbmZpZyA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCBpbnN0YW5jZUNvbmZpZyksIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZWxlbWVudC5kYXRhc2V0IHx8IHt9KSkpOwogICAgICAgICAgaWYgKHVzZXJDb25maWcudGltZV8yNGhyID09PSB1bmRlZmluZWQgJiYKICAgICAgICAgICAgICBmbGF0cGlja3IuZGVmYXVsdENvbmZpZy50aW1lXzI0aHIgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgIHNlbGYuY29uZmlnLnRpbWVfMjRociA9IHNlbGYubDEwbi50aW1lXzI0aHI7CiAgICAgICAgICB9CiAgICAgICAgICBzZWxmLmZvcm1hdERhdGUgPSBjcmVhdGVEYXRlRm9ybWF0dGVyKHNlbGYpOwogICAgICAgICAgc2VsZi5wYXJzZURhdGUgPSBjcmVhdGVEYXRlUGFyc2VyKHsgY29uZmlnOiBzZWxmLmNvbmZpZywgbDEwbjogc2VsZi5sMTBuIH0pOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHBvc2l0aW9uQ2FsZW5kYXIoY3VzdG9tUG9zaXRpb25FbGVtZW50KSB7CiAgICAgICAgICBpZiAodHlwZW9mIHNlbGYuY29uZmlnLnBvc2l0aW9uID09PSAiZnVuY3Rpb24iKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHZvaWQgc2VsZi5jb25maWcucG9zaXRpb24oc2VsZiwgY3VzdG9tUG9zaXRpb25FbGVtZW50KTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChzZWxmLmNhbGVuZGFyQ29udGFpbmVyID09PSB1bmRlZmluZWQpCiAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgdHJpZ2dlckV2ZW50KCJvblByZUNhbGVuZGFyUG9zaXRpb24iKTsKICAgICAgICAgIHZhciBwb3NpdGlvbkVsZW1lbnQgPSBjdXN0b21Qb3NpdGlvbkVsZW1lbnQgfHwgc2VsZi5fcG9zaXRpb25FbGVtZW50OwogICAgICAgICAgdmFyIGNhbGVuZGFySGVpZ2h0ID0gQXJyYXkucHJvdG90eXBlLnJlZHVjZS5jYWxsKHNlbGYuY2FsZW5kYXJDb250YWluZXIuY2hpbGRyZW4sIChmdW5jdGlvbiAoYWNjLCBjaGlsZCkgeyByZXR1cm4gYWNjICsgY2hpbGQub2Zmc2V0SGVpZ2h0OyB9KSwgMCksIGNhbGVuZGFyV2lkdGggPSBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLm9mZnNldFdpZHRoLCBjb25maWdQb3MgPSBzZWxmLmNvbmZpZy5wb3NpdGlvbi5zcGxpdCgiICIpLCBjb25maWdQb3NWZXJ0aWNhbCA9IGNvbmZpZ1Bvc1swXSwgY29uZmlnUG9zSG9yaXpvbnRhbCA9IGNvbmZpZ1Bvcy5sZW5ndGggPiAxID8gY29uZmlnUG9zWzFdIDogbnVsbCwgaW5wdXRCb3VuZHMgPSBwb3NpdGlvbkVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksIGRpc3RhbmNlRnJvbUJvdHRvbSA9IHdpbmRvdy5pbm5lckhlaWdodCAtIGlucHV0Qm91bmRzLmJvdHRvbSwgc2hvd09uVG9wID0gY29uZmlnUG9zVmVydGljYWwgPT09ICJhYm92ZSIgfHwKICAgICAgICAgICAgICAoY29uZmlnUG9zVmVydGljYWwgIT09ICJiZWxvdyIgJiYKICAgICAgICAgICAgICAgICAgZGlzdGFuY2VGcm9tQm90dG9tIDwgY2FsZW5kYXJIZWlnaHQgJiYKICAgICAgICAgICAgICAgICAgaW5wdXRCb3VuZHMudG9wID4gY2FsZW5kYXJIZWlnaHQpOwogICAgICAgICAgdmFyIHRvcCA9IHdpbmRvdy5wYWdlWU9mZnNldCArCiAgICAgICAgICAgICAgaW5wdXRCb3VuZHMudG9wICsKICAgICAgICAgICAgICAoIXNob3dPblRvcCA/IHBvc2l0aW9uRWxlbWVudC5vZmZzZXRIZWlnaHQgKyAyIDogLWNhbGVuZGFySGVpZ2h0IC0gMik7CiAgICAgICAgICB0b2dnbGVDbGFzcyhzZWxmLmNhbGVuZGFyQ29udGFpbmVyLCAiYXJyb3dUb3AiLCAhc2hvd09uVG9wKTsKICAgICAgICAgIHRvZ2dsZUNsYXNzKHNlbGYuY2FsZW5kYXJDb250YWluZXIsICJhcnJvd0JvdHRvbSIsIHNob3dPblRvcCk7CiAgICAgICAgICBpZiAoc2VsZi5jb25maWcuaW5saW5lKQogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIHZhciBsZWZ0ID0gd2luZG93LnBhZ2VYT2Zmc2V0ICsgaW5wdXRCb3VuZHMubGVmdDsKICAgICAgICAgIHZhciBpc0NlbnRlciA9IGZhbHNlOwogICAgICAgICAgdmFyIGlzUmlnaHQgPSBmYWxzZTsKICAgICAgICAgIGlmIChjb25maWdQb3NIb3Jpem9udGFsID09PSAiY2VudGVyIikgewogICAgICAgICAgICAgIGxlZnQgLT0gKGNhbGVuZGFyV2lkdGggLSBpbnB1dEJvdW5kcy53aWR0aCkgLyAyOwogICAgICAgICAgICAgIGlzQ2VudGVyID0gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICAgIGVsc2UgaWYgKGNvbmZpZ1Bvc0hvcml6b250YWwgPT09ICJyaWdodCIpIHsKICAgICAgICAgICAgICBsZWZ0IC09IGNhbGVuZGFyV2lkdGggLSBpbnB1dEJvdW5kcy53aWR0aDsKICAgICAgICAgICAgICBpc1JpZ2h0ID0gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICAgIHRvZ2dsZUNsYXNzKHNlbGYuY2FsZW5kYXJDb250YWluZXIsICJhcnJvd0xlZnQiLCAhaXNDZW50ZXIgJiYgIWlzUmlnaHQpOwogICAgICAgICAgdG9nZ2xlQ2xhc3Moc2VsZi5jYWxlbmRhckNvbnRhaW5lciwgImFycm93Q2VudGVyIiwgaXNDZW50ZXIpOwogICAgICAgICAgdG9nZ2xlQ2xhc3Moc2VsZi5jYWxlbmRhckNvbnRhaW5lciwgImFycm93UmlnaHQiLCBpc1JpZ2h0KTsKICAgICAgICAgIHZhciByaWdodCA9IHdpbmRvdy5kb2N1bWVudC5ib2R5Lm9mZnNldFdpZHRoIC0KICAgICAgICAgICAgICAod2luZG93LnBhZ2VYT2Zmc2V0ICsgaW5wdXRCb3VuZHMucmlnaHQpOwogICAgICAgICAgdmFyIHJpZ2h0TW9zdCA9IGxlZnQgKyBjYWxlbmRhcldpZHRoID4gd2luZG93LmRvY3VtZW50LmJvZHkub2Zmc2V0V2lkdGg7CiAgICAgICAgICB2YXIgY2VudGVyTW9zdCA9IHJpZ2h0ICsgY2FsZW5kYXJXaWR0aCA+IHdpbmRvdy5kb2N1bWVudC5ib2R5Lm9mZnNldFdpZHRoOwogICAgICAgICAgdG9nZ2xlQ2xhc3Moc2VsZi5jYWxlbmRhckNvbnRhaW5lciwgInJpZ2h0TW9zdCIsIHJpZ2h0TW9zdCk7CiAgICAgICAgICBpZiAoc2VsZi5jb25maWcuc3RhdGljKQogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuc3R5bGUudG9wID0gdG9wICsgInB4IjsKICAgICAgICAgIGlmICghcmlnaHRNb3N0KSB7CiAgICAgICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5zdHlsZS5sZWZ0ID0gbGVmdCArICJweCI7CiAgICAgICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5zdHlsZS5yaWdodCA9ICJhdXRvIjsKICAgICAgICAgIH0KICAgICAgICAgIGVsc2UgaWYgKCFjZW50ZXJNb3N0KSB7CiAgICAgICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5zdHlsZS5sZWZ0ID0gImF1dG8iOwogICAgICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuc3R5bGUucmlnaHQgPSByaWdodCArICJweCI7CiAgICAgICAgICB9CiAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICB2YXIgZG9jID0gZ2V0RG9jdW1lbnRTdHlsZVNoZWV0KCk7CiAgICAgICAgICAgICAgaWYgKGRvYyA9PT0gdW5kZWZpbmVkKQogICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgdmFyIGJvZHlXaWR0aCA9IHdpbmRvdy5kb2N1bWVudC5ib2R5Lm9mZnNldFdpZHRoOwogICAgICAgICAgICAgIHZhciBjZW50ZXJMZWZ0ID0gTWF0aC5tYXgoMCwgYm9keVdpZHRoIC8gMiAtIGNhbGVuZGFyV2lkdGggLyAyKTsKICAgICAgICAgICAgICB2YXIgY2VudGVyQmVmb3JlID0gIi5mbGF0cGlja3ItY2FsZW5kYXIuY2VudGVyTW9zdDpiZWZvcmUiOwogICAgICAgICAgICAgIHZhciBjZW50ZXJBZnRlciA9ICIuZmxhdHBpY2tyLWNhbGVuZGFyLmNlbnRlck1vc3Q6YWZ0ZXIiOwogICAgICAgICAgICAgIHZhciBjZW50ZXJJbmRleCA9IGRvYy5jc3NSdWxlcy5sZW5ndGg7CiAgICAgICAgICAgICAgdmFyIGNlbnRlclN0eWxlID0gIntsZWZ0OiIgKyBpbnB1dEJvdW5kcy5sZWZ0ICsgInB4O3JpZ2h0OmF1dG87fSI7CiAgICAgICAgICAgICAgdG9nZ2xlQ2xhc3Moc2VsZi5jYWxlbmRhckNvbnRhaW5lciwgInJpZ2h0TW9zdCIsIGZhbHNlKTsKICAgICAgICAgICAgICB0b2dnbGVDbGFzcyhzZWxmLmNhbGVuZGFyQ29udGFpbmVyLCAiY2VudGVyTW9zdCIsIHRydWUpOwogICAgICAgICAgICAgIGRvYy5pbnNlcnRSdWxlKGNlbnRlckJlZm9yZSArICIsIiArIGNlbnRlckFmdGVyICsgY2VudGVyU3R5bGUsIGNlbnRlckluZGV4KTsKICAgICAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnN0eWxlLmxlZnQgPSBjZW50ZXJMZWZ0ICsgInB4IjsKICAgICAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnN0eWxlLnJpZ2h0ID0gImF1dG8iOwogICAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIGdldERvY3VtZW50U3R5bGVTaGVldCgpIHsKICAgICAgICAgIHZhciBlZGl0YWJsZVNoZWV0ID0gbnVsbDsKICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZG9jdW1lbnQuc3R5bGVTaGVldHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICB2YXIgc2hlZXQgPSBkb2N1bWVudC5zdHlsZVNoZWV0c1tpXTsKICAgICAgICAgICAgICBpZiAoIXNoZWV0LmNzc1J1bGVzKQogICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICBzaGVldC5jc3NSdWxlczsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgY2F0Y2ggKGVycikgewogICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgZWRpdGFibGVTaGVldCA9IHNoZWV0OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGVkaXRhYmxlU2hlZXQgIT0gbnVsbCA/IGVkaXRhYmxlU2hlZXQgOiBjcmVhdGVTdHlsZVNoZWV0KCk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gY3JlYXRlU3R5bGVTaGVldCgpIHsKICAgICAgICAgIHZhciBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIik7CiAgICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlKTsKICAgICAgICAgIHJldHVybiBzdHlsZS5zaGVldDsKICAgICAgfQogICAgICBmdW5jdGlvbiByZWRyYXcoKSB7CiAgICAgICAgICBpZiAoc2VsZi5jb25maWcubm9DYWxlbmRhciB8fCBzZWxmLmlzTW9iaWxlKQogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIGJ1aWxkTW9udGhTd2l0Y2goKTsKICAgICAgICAgIHVwZGF0ZU5hdmlnYXRpb25DdXJyZW50TW9udGgoKTsKICAgICAgICAgIGJ1aWxkRGF5cygpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGZvY3VzQW5kQ2xvc2UoKSB7CiAgICAgICAgICBzZWxmLl9pbnB1dC5mb2N1cygpOwogICAgICAgICAgaWYgKHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIk1TSUUiKSAhPT0gLTEgfHwKICAgICAgICAgICAgICBuYXZpZ2F0b3IubXNNYXhUb3VjaFBvaW50cyAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgc2V0VGltZW91dChzZWxmLmNsb3NlLCAwKTsKICAgICAgICAgIH0KICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgIHNlbGYuY2xvc2UoKTsKICAgICAgICAgIH0KICAgICAgfQogICAgICBmdW5jdGlvbiBzZWxlY3REYXRlKGUpIHsKICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICB2YXIgaXNTZWxlY3RhYmxlID0gZnVuY3Rpb24gKGRheSkgewogICAgICAgICAgICAgIHJldHVybiBkYXkuY2xhc3NMaXN0ICYmCiAgICAgICAgICAgICAgICAgIGRheS5jbGFzc0xpc3QuY29udGFpbnMoImZsYXRwaWNrci1kYXkiKSAmJgogICAgICAgICAgICAgICAgICAhZGF5LmNsYXNzTGlzdC5jb250YWlucygiZmxhdHBpY2tyLWRpc2FibGVkIikgJiYKICAgICAgICAgICAgICAgICAgIWRheS5jbGFzc0xpc3QuY29udGFpbnMoIm5vdEFsbG93ZWQiKTsKICAgICAgICAgIH07CiAgICAgICAgICB2YXIgdCA9IGZpbmRQYXJlbnQoZ2V0RXZlbnRUYXJnZXQoZSksIGlzU2VsZWN0YWJsZSk7CiAgICAgICAgICBpZiAodCA9PT0gdW5kZWZpbmVkKQogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIHZhciB0YXJnZXQgPSB0OwogICAgICAgICAgdmFyIHNlbGVjdGVkRGF0ZSA9IChzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiA9IG5ldyBEYXRlKHRhcmdldC5kYXRlT2JqLmdldFRpbWUoKSkpOwogICAgICAgICAgdmFyIHNob3VsZENoYW5nZU1vbnRoID0gKHNlbGVjdGVkRGF0ZS5nZXRNb250aCgpIDwgc2VsZi5jdXJyZW50TW9udGggfHwKICAgICAgICAgICAgICBzZWxlY3RlZERhdGUuZ2V0TW9udGgoKSA+CiAgICAgICAgICAgICAgICAgIHNlbGYuY3VycmVudE1vbnRoICsgc2VsZi5jb25maWcuc2hvd01vbnRocyAtIDEpICYmCiAgICAgICAgICAgICAgc2VsZi5jb25maWcubW9kZSAhPT0gInJhbmdlIjsKICAgICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlRWxlbSA9IHRhcmdldDsKICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5tb2RlID09PSAic2luZ2xlIikKICAgICAgICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZXMgPSBbc2VsZWN0ZWREYXRlXTsKICAgICAgICAgIGVsc2UgaWYgKHNlbGYuY29uZmlnLm1vZGUgPT09ICJtdWx0aXBsZSIpIHsKICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWRJbmRleCA9IGlzRGF0ZVNlbGVjdGVkKHNlbGVjdGVkRGF0ZSk7CiAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkSW5kZXgpCiAgICAgICAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlcy5zcGxpY2UocGFyc2VJbnQoc2VsZWN0ZWRJbmRleCksIDEpOwogICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgc2VsZi5zZWxlY3RlZERhdGVzLnB1c2goc2VsZWN0ZWREYXRlKTsKICAgICAgICAgIH0KICAgICAgICAgIGVsc2UgaWYgKHNlbGYuY29uZmlnLm1vZGUgPT09ICJyYW5nZSIpIHsKICAgICAgICAgICAgICBpZiAoc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCA9PT0gMikgewogICAgICAgICAgICAgICAgICBzZWxmLmNsZWFyKGZhbHNlLCBmYWxzZSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqID0gc2VsZWN0ZWREYXRlOwogICAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlcy5wdXNoKHNlbGVjdGVkRGF0ZSk7CiAgICAgICAgICAgICAgaWYgKGNvbXBhcmVEYXRlcyhzZWxlY3RlZERhdGUsIHNlbGYuc2VsZWN0ZWREYXRlc1swXSwgdHJ1ZSkgIT09IDApCiAgICAgICAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlcy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiBhLmdldFRpbWUoKSAtIGIuZ2V0VGltZSgpOyB9KTsKICAgICAgICAgIH0KICAgICAgICAgIHNldEhvdXJzRnJvbUlucHV0cygpOwogICAgICAgICAgaWYgKHNob3VsZENoYW5nZU1vbnRoKSB7CiAgICAgICAgICAgICAgdmFyIGlzTmV3WWVhciA9IHNlbGYuY3VycmVudFllYXIgIT09IHNlbGVjdGVkRGF0ZS5nZXRGdWxsWWVhcigpOwogICAgICAgICAgICAgIHNlbGYuY3VycmVudFllYXIgPSBzZWxlY3RlZERhdGUuZ2V0RnVsbFllYXIoKTsKICAgICAgICAgICAgICBzZWxmLmN1cnJlbnRNb250aCA9IHNlbGVjdGVkRGF0ZS5nZXRNb250aCgpOwogICAgICAgICAgICAgIGlmIChpc05ld1llYXIpIHsKICAgICAgICAgICAgICAgICAgdHJpZ2dlckV2ZW50KCJvblllYXJDaGFuZ2UiKTsKICAgICAgICAgICAgICAgICAgYnVpbGRNb250aFN3aXRjaCgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB0cmlnZ2VyRXZlbnQoIm9uTW9udGhDaGFuZ2UiKTsKICAgICAgICAgIH0KICAgICAgICAgIHVwZGF0ZU5hdmlnYXRpb25DdXJyZW50TW9udGgoKTsKICAgICAgICAgIGJ1aWxkRGF5cygpOwogICAgICAgICAgdXBkYXRlVmFsdWUoKTsKICAgICAgICAgIGlmICghc2hvdWxkQ2hhbmdlTW9udGggJiYKICAgICAgICAgICAgICBzZWxmLmNvbmZpZy5tb2RlICE9PSAicmFuZ2UiICYmCiAgICAgICAgICAgICAgc2VsZi5jb25maWcuc2hvd01vbnRocyA9PT0gMSkKICAgICAgICAgICAgICBmb2N1c09uRGF5RWxlbSh0YXJnZXQpOwogICAgICAgICAgZWxzZSBpZiAoc2VsZi5zZWxlY3RlZERhdGVFbGVtICE9PSB1bmRlZmluZWQgJiYKICAgICAgICAgICAgICBzZWxmLmhvdXJFbGVtZW50ID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZUVsZW0gJiYgc2VsZi5zZWxlY3RlZERhdGVFbGVtLmZvY3VzKCk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoc2VsZi5ob3VyRWxlbWVudCAhPT0gdW5kZWZpbmVkKQogICAgICAgICAgICAgIHNlbGYuaG91ckVsZW1lbnQgIT09IHVuZGVmaW5lZCAmJiBzZWxmLmhvdXJFbGVtZW50LmZvY3VzKCk7CiAgICAgICAgICBpZiAoc2VsZi5jb25maWcuY2xvc2VPblNlbGVjdCkgewogICAgICAgICAgICAgIHZhciBzaW5nbGUgPSBzZWxmLmNvbmZpZy5tb2RlID09PSAic2luZ2xlIiAmJiAhc2VsZi5jb25maWcuZW5hYmxlVGltZTsKICAgICAgICAgICAgICB2YXIgcmFuZ2UgPSBzZWxmLmNvbmZpZy5tb2RlID09PSAicmFuZ2UiICYmCiAgICAgICAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggPT09IDIgJiYKICAgICAgICAgICAgICAgICAgIXNlbGYuY29uZmlnLmVuYWJsZVRpbWU7CiAgICAgICAgICAgICAgaWYgKHNpbmdsZSB8fCByYW5nZSkgewogICAgICAgICAgICAgICAgICBmb2N1c0FuZENsb3NlKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgdHJpZ2dlckNoYW5nZSgpOwogICAgICB9CiAgICAgIHZhciBDQUxMQkFDS1MgPSB7CiAgICAgICAgICBsb2NhbGU6IFtzZXR1cExvY2FsZSwgdXBkYXRlV2Vla2RheXNdLAogICAgICAgICAgc2hvd01vbnRoczogW2J1aWxkTW9udGhzLCBzZXRDYWxlbmRhcldpZHRoLCBidWlsZFdlZWtkYXlzXSwKICAgICAgICAgIG1pbkRhdGU6IFtqdW1wVG9EYXRlXSwKICAgICAgICAgIG1heERhdGU6IFtqdW1wVG9EYXRlXSwKICAgICAgICAgIHBvc2l0aW9uRWxlbWVudDogW3VwZGF0ZVBvc2l0aW9uRWxlbWVudF0sCiAgICAgICAgICBjbGlja09wZW5zOiBbCiAgICAgICAgICAgICAgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICBpZiAoc2VsZi5jb25maWcuY2xpY2tPcGVucyA9PT0gdHJ1ZSkgewogICAgICAgICAgICAgICAgICAgICAgYmluZChzZWxmLl9pbnB1dCwgImZvY3VzIiwgc2VsZi5vcGVuKTsKICAgICAgICAgICAgICAgICAgICAgIGJpbmQoc2VsZi5faW5wdXQsICJjbGljayIsIHNlbGYub3Blbik7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9pbnB1dC5yZW1vdmVFdmVudExpc3RlbmVyKCJmb2N1cyIsIHNlbGYub3Blbik7CiAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9pbnB1dC5yZW1vdmVFdmVudExpc3RlbmVyKCJjbGljayIsIHNlbGYub3Blbik7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9LAogICAgICAgICAgXSwKICAgICAgfTsKICAgICAgZnVuY3Rpb24gc2V0KG9wdGlvbiwgdmFsdWUpIHsKICAgICAgICAgIGlmIChvcHRpb24gIT09IG51bGwgJiYgdHlwZW9mIG9wdGlvbiA9PT0gIm9iamVjdCIpIHsKICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKHNlbGYuY29uZmlnLCBvcHRpb24pOwogICAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBvcHRpb24pIHsKICAgICAgICAgICAgICAgICAgaWYgKENBTExCQUNLU1trZXldICE9PSB1bmRlZmluZWQpCiAgICAgICAgICAgICAgICAgICAgICBDQUxMQkFDS1Nba2V5XS5mb3JFYWNoKGZ1bmN0aW9uICh4KSB7IHJldHVybiB4KCk7IH0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgIHNlbGYuY29uZmlnW29wdGlvbl0gPSB2YWx1ZTsKICAgICAgICAgICAgICBpZiAoQ0FMTEJBQ0tTW29wdGlvbl0gIT09IHVuZGVmaW5lZCkKICAgICAgICAgICAgICAgICAgQ0FMTEJBQ0tTW29wdGlvbl0uZm9yRWFjaChmdW5jdGlvbiAoeCkgeyByZXR1cm4geCgpOyB9KTsKICAgICAgICAgICAgICBlbHNlIGlmIChIT09LUy5pbmRleE9mKG9wdGlvbikgPiAtMSkKICAgICAgICAgICAgICAgICAgc2VsZi5jb25maWdbb3B0aW9uXSA9IGFycmF5aWZ5KHZhbHVlKTsKICAgICAgICAgIH0KICAgICAgICAgIHNlbGYucmVkcmF3KCk7CiAgICAgICAgICB1cGRhdGVWYWx1ZSh0cnVlKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBzZXRTZWxlY3RlZERhdGUoaW5wdXREYXRlLCBmb3JtYXQpIHsKICAgICAgICAgIHZhciBkYXRlcyA9IFtdOwogICAgICAgICAgaWYgKGlucHV0RGF0ZSBpbnN0YW5jZW9mIEFycmF5KQogICAgICAgICAgICAgIGRhdGVzID0gaW5wdXREYXRlLm1hcChmdW5jdGlvbiAoZCkgeyByZXR1cm4gc2VsZi5wYXJzZURhdGUoZCwgZm9ybWF0KTsgfSk7CiAgICAgICAgICBlbHNlIGlmIChpbnB1dERhdGUgaW5zdGFuY2VvZiBEYXRlIHx8IHR5cGVvZiBpbnB1dERhdGUgPT09ICJudW1iZXIiKQogICAgICAgICAgICAgIGRhdGVzID0gW3NlbGYucGFyc2VEYXRlKGlucHV0RGF0ZSwgZm9ybWF0KV07CiAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgaW5wdXREYXRlID09PSAic3RyaW5nIikgewogICAgICAgICAgICAgIHN3aXRjaCAoc2VsZi5jb25maWcubW9kZSkgewogICAgICAgICAgICAgICAgICBjYXNlICJzaW5nbGUiOgogICAgICAgICAgICAgICAgICBjYXNlICJ0aW1lIjoKICAgICAgICAgICAgICAgICAgICAgIGRhdGVzID0gW3NlbGYucGFyc2VEYXRlKGlucHV0RGF0ZSwgZm9ybWF0KV07CiAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgY2FzZSAibXVsdGlwbGUiOgogICAgICAgICAgICAgICAgICAgICAgZGF0ZXMgPSBpbnB1dERhdGUKICAgICAgICAgICAgICAgICAgICAgICAgICAuc3BsaXQoc2VsZi5jb25maWcuY29uanVuY3Rpb24pCiAgICAgICAgICAgICAgICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAoZGF0ZSkgeyByZXR1cm4gc2VsZi5wYXJzZURhdGUoZGF0ZSwgZm9ybWF0KTsgfSk7CiAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgY2FzZSAicmFuZ2UiOgogICAgICAgICAgICAgICAgICAgICAgZGF0ZXMgPSBpbnB1dERhdGUKICAgICAgICAgICAgICAgICAgICAgICAgICAuc3BsaXQoc2VsZi5sMTBuLnJhbmdlU2VwYXJhdG9yKQogICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKGRhdGUpIHsgcmV0dXJuIHNlbGYucGFyc2VEYXRlKGRhdGUsIGZvcm1hdCk7IH0pOwogICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgZWxzZQogICAgICAgICAgICAgIHNlbGYuY29uZmlnLmVycm9ySGFuZGxlcihuZXcgRXJyb3IoIkludmFsaWQgZGF0ZSBzdXBwbGllZDogIiArIEpTT04uc3RyaW5naWZ5KGlucHV0RGF0ZSkpKTsKICAgICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlcyA9IChzZWxmLmNvbmZpZy5hbGxvd0ludmFsaWRQcmVsb2FkCiAgICAgICAgICAgICAgPyBkYXRlcwogICAgICAgICAgICAgIDogZGF0ZXMuZmlsdGVyKGZ1bmN0aW9uIChkKSB7IHJldHVybiBkIGluc3RhbmNlb2YgRGF0ZSAmJiBpc0VuYWJsZWQoZCwgZmFsc2UpOyB9KSk7CiAgICAgICAgICBpZiAoc2VsZi5jb25maWcubW9kZSA9PT0gInJhbmdlIikKICAgICAgICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZXMuc29ydChmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gYS5nZXRUaW1lKCkgLSBiLmdldFRpbWUoKTsgfSk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gc2V0RGF0ZShkYXRlLCB0cmlnZ2VyQ2hhbmdlLCBmb3JtYXQpIHsKICAgICAgICAgIGlmICh0cmlnZ2VyQ2hhbmdlID09PSB2b2lkIDApIHsgdHJpZ2dlckNoYW5nZSA9IGZhbHNlOyB9CiAgICAgICAgICBpZiAoZm9ybWF0ID09PSB2b2lkIDApIHsgZm9ybWF0ID0gc2VsZi5jb25maWcuZGF0ZUZvcm1hdDsgfQogICAgICAgICAgaWYgKChkYXRlICE9PSAwICYmICFkYXRlKSB8fCAoZGF0ZSBpbnN0YW5jZW9mIEFycmF5ICYmIGRhdGUubGVuZ3RoID09PSAwKSkKICAgICAgICAgICAgICByZXR1cm4gc2VsZi5jbGVhcih0cmlnZ2VyQ2hhbmdlKTsKICAgICAgICAgIHNldFNlbGVjdGVkRGF0ZShkYXRlLCBmb3JtYXQpOwogICAgICAgICAgc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmogPQogICAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlc1tzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoIC0gMV07CiAgICAgICAgICBzZWxmLnJlZHJhdygpOwogICAgICAgICAganVtcFRvRGF0ZSh1bmRlZmluZWQsIHRyaWdnZXJDaGFuZ2UpOwogICAgICAgICAgc2V0SG91cnNGcm9tRGF0ZSgpOwogICAgICAgICAgaWYgKHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgICBzZWxmLmNsZWFyKGZhbHNlKTsKICAgICAgICAgIH0KICAgICAgICAgIHVwZGF0ZVZhbHVlKHRyaWdnZXJDaGFuZ2UpOwogICAgICAgICAgaWYgKHRyaWdnZXJDaGFuZ2UpCiAgICAgICAgICAgICAgdHJpZ2dlckV2ZW50KCJvbkNoYW5nZSIpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHBhcnNlRGF0ZVJ1bGVzKGFycikgewogICAgICAgICAgcmV0dXJuIGFycgogICAgICAgICAgICAgIC5zbGljZSgpCiAgICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAocnVsZSkgewogICAgICAgICAgICAgIGlmICh0eXBlb2YgcnVsZSA9PT0gInN0cmluZyIgfHwKICAgICAgICAgICAgICAgICAgdHlwZW9mIHJ1bGUgPT09ICJudW1iZXIiIHx8CiAgICAgICAgICAgICAgICAgIHJ1bGUgaW5zdGFuY2VvZiBEYXRlKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLnBhcnNlRGF0ZShydWxlLCB1bmRlZmluZWQsIHRydWUpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBlbHNlIGlmIChydWxlICYmCiAgICAgICAgICAgICAgICAgIHR5cGVvZiBydWxlID09PSAib2JqZWN0IiAmJgogICAgICAgICAgICAgICAgICBydWxlLmZyb20gJiYKICAgICAgICAgICAgICAgICAgcnVsZS50bykKICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgIGZyb206IHNlbGYucGFyc2VEYXRlKHJ1bGUuZnJvbSwgdW5kZWZpbmVkKSwKICAgICAgICAgICAgICAgICAgICAgIHRvOiBzZWxmLnBhcnNlRGF0ZShydWxlLnRvLCB1bmRlZmluZWQpLAogICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIHJldHVybiBydWxlOwogICAgICAgICAgfSkKICAgICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uICh4KSB7IHJldHVybiB4OyB9KTsKICAgICAgfQogICAgICBmdW5jdGlvbiBzZXR1cERhdGVzKCkgewogICAgICAgICAgc2VsZi5zZWxlY3RlZERhdGVzID0gW107CiAgICAgICAgICBzZWxmLm5vdyA9IHNlbGYucGFyc2VEYXRlKHNlbGYuY29uZmlnLm5vdykgfHwgbmV3IERhdGUoKTsKICAgICAgICAgIHZhciBwcmVsb2FkZWREYXRlID0gc2VsZi5jb25maWcuZGVmYXVsdERhdGUgfHwKICAgICAgICAgICAgICAoKHNlbGYuaW5wdXQubm9kZU5hbWUgPT09ICJJTlBVVCIgfHwKICAgICAgICAgICAgICAgICAgc2VsZi5pbnB1dC5ub2RlTmFtZSA9PT0gIlRFWFRBUkVBIikgJiYKICAgICAgICAgICAgICAgICAgc2VsZi5pbnB1dC5wbGFjZWhvbGRlciAmJgogICAgICAgICAgICAgICAgICBzZWxmLmlucHV0LnZhbHVlID09PSBzZWxmLmlucHV0LnBsYWNlaG9sZGVyCiAgICAgICAgICAgICAgICAgID8gbnVsbAogICAgICAgICAgICAgICAgICA6IHNlbGYuaW5wdXQudmFsdWUpOwogICAgICAgICAgaWYgKHByZWxvYWRlZERhdGUpCiAgICAgICAgICAgICAgc2V0U2VsZWN0ZWREYXRlKHByZWxvYWRlZERhdGUsIHNlbGYuY29uZmlnLmRhdGVGb3JtYXQpOwogICAgICAgICAgc2VsZi5faW5pdGlhbERhdGUgPQogICAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggPiAwCiAgICAgICAgICAgICAgICAgID8gc2VsZi5zZWxlY3RlZERhdGVzWzBdCiAgICAgICAgICAgICAgICAgIDogc2VsZi5jb25maWcubWluRGF0ZSAmJgogICAgICAgICAgICAgICAgICAgICAgc2VsZi5jb25maWcubWluRGF0ZS5nZXRUaW1lKCkgPiBzZWxmLm5vdy5nZXRUaW1lKCkKICAgICAgICAgICAgICAgICAgICAgID8gc2VsZi5jb25maWcubWluRGF0ZQogICAgICAgICAgICAgICAgICAgICAgOiBzZWxmLmNvbmZpZy5tYXhEYXRlICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jb25maWcubWF4RGF0ZS5nZXRUaW1lKCkgPCBzZWxmLm5vdy5nZXRUaW1lKCkKICAgICAgICAgICAgICAgICAgICAgICAgICA/IHNlbGYuY29uZmlnLm1heERhdGUKICAgICAgICAgICAgICAgICAgICAgICAgICA6IHNlbGYubm93OwogICAgICAgICAgc2VsZi5jdXJyZW50WWVhciA9IHNlbGYuX2luaXRpYWxEYXRlLmdldEZ1bGxZZWFyKCk7CiAgICAgICAgICBzZWxmLmN1cnJlbnRNb250aCA9IHNlbGYuX2luaXRpYWxEYXRlLmdldE1vbnRoKCk7CiAgICAgICAgICBpZiAoc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCA+IDApCiAgICAgICAgICAgICAgc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmogPSBzZWxmLnNlbGVjdGVkRGF0ZXNbMF07CiAgICAgICAgICBpZiAoc2VsZi5jb25maWcubWluVGltZSAhPT0gdW5kZWZpbmVkKQogICAgICAgICAgICAgIHNlbGYuY29uZmlnLm1pblRpbWUgPSBzZWxmLnBhcnNlRGF0ZShzZWxmLmNvbmZpZy5taW5UaW1lLCAiSDppIik7CiAgICAgICAgICBpZiAoc2VsZi5jb25maWcubWF4VGltZSAhPT0gdW5kZWZpbmVkKQogICAgICAgICAgICAgIHNlbGYuY29uZmlnLm1heFRpbWUgPSBzZWxmLnBhcnNlRGF0ZShzZWxmLmNvbmZpZy5tYXhUaW1lLCAiSDppIik7CiAgICAgICAgICBzZWxmLm1pbkRhdGVIYXNUaW1lID0KICAgICAgICAgICAgICAhIXNlbGYuY29uZmlnLm1pbkRhdGUgJiYKICAgICAgICAgICAgICAgICAgKHNlbGYuY29uZmlnLm1pbkRhdGUuZ2V0SG91cnMoKSA+IDAgfHwKICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY29uZmlnLm1pbkRhdGUuZ2V0TWludXRlcygpID4gMCB8fAogICAgICAgICAgICAgICAgICAgICAgc2VsZi5jb25maWcubWluRGF0ZS5nZXRTZWNvbmRzKCkgPiAwKTsKICAgICAgICAgIHNlbGYubWF4RGF0ZUhhc1RpbWUgPQogICAgICAgICAgICAgICEhc2VsZi5jb25maWcubWF4RGF0ZSAmJgogICAgICAgICAgICAgICAgICAoc2VsZi5jb25maWcubWF4RGF0ZS5nZXRIb3VycygpID4gMCB8fAogICAgICAgICAgICAgICAgICAgICAgc2VsZi5jb25maWcubWF4RGF0ZS5nZXRNaW51dGVzKCkgPiAwIHx8CiAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNvbmZpZy5tYXhEYXRlLmdldFNlY29uZHMoKSA+IDApOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHNldHVwSW5wdXRzKCkgewogICAgICAgICAgc2VsZi5pbnB1dCA9IGdldElucHV0RWxlbSgpOwogICAgICAgICAgaWYgKCFzZWxmLmlucHV0KSB7CiAgICAgICAgICAgICAgc2VsZi5jb25maWcuZXJyb3JIYW5kbGVyKG5ldyBFcnJvcigiSW52YWxpZCBpbnB1dCBlbGVtZW50IHNwZWNpZmllZCIpKTsKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICBzZWxmLmlucHV0Ll90eXBlID0gc2VsZi5pbnB1dC50eXBlOwogICAgICAgICAgc2VsZi5pbnB1dC50eXBlID0gInRleHQiOwogICAgICAgICAgc2VsZi5pbnB1dC5jbGFzc0xpc3QuYWRkKCJmbGF0cGlja3ItaW5wdXQiKTsKICAgICAgICAgIHNlbGYuX2lucHV0ID0gc2VsZi5pbnB1dDsKICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5hbHRJbnB1dCkgewogICAgICAgICAgICAgIHNlbGYuYWx0SW5wdXQgPSBjcmVhdGVFbGVtZW50KHNlbGYuaW5wdXQubm9kZU5hbWUsIHNlbGYuY29uZmlnLmFsdElucHV0Q2xhc3MpOwogICAgICAgICAgICAgIHNlbGYuX2lucHV0ID0gc2VsZi5hbHRJbnB1dDsKICAgICAgICAgICAgICBzZWxmLmFsdElucHV0LnBsYWNlaG9sZGVyID0gc2VsZi5pbnB1dC5wbGFjZWhvbGRlcjsKICAgICAgICAgICAgICBzZWxmLmFsdElucHV0LmRpc2FibGVkID0gc2VsZi5pbnB1dC5kaXNhYmxlZDsKICAgICAgICAgICAgICBzZWxmLmFsdElucHV0LnJlcXVpcmVkID0gc2VsZi5pbnB1dC5yZXF1aXJlZDsKICAgICAgICAgICAgICBzZWxmLmFsdElucHV0LnRhYkluZGV4ID0gc2VsZi5pbnB1dC50YWJJbmRleDsKICAgICAgICAgICAgICBzZWxmLmFsdElucHV0LnR5cGUgPSAidGV4dCI7CiAgICAgICAgICAgICAgc2VsZi5pbnB1dC5zZXRBdHRyaWJ1dGUoInR5cGUiLCAiaGlkZGVuIik7CiAgICAgICAgICAgICAgaWYgKCFzZWxmLmNvbmZpZy5zdGF0aWMgJiYgc2VsZi5pbnB1dC5wYXJlbnROb2RlKQogICAgICAgICAgICAgICAgICBzZWxmLmlucHV0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHNlbGYuYWx0SW5wdXQsIHNlbGYuaW5wdXQubmV4dFNpYmxpbmcpOwogICAgICAgICAgfQogICAgICAgICAgaWYgKCFzZWxmLmNvbmZpZy5hbGxvd0lucHV0KQogICAgICAgICAgICAgIHNlbGYuX2lucHV0LnNldEF0dHJpYnV0ZSgicmVhZG9ubHkiLCAicmVhZG9ubHkiKTsKICAgICAgICAgIHVwZGF0ZVBvc2l0aW9uRWxlbWVudCgpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHVwZGF0ZVBvc2l0aW9uRWxlbWVudCgpIHsKICAgICAgICAgIHNlbGYuX3Bvc2l0aW9uRWxlbWVudCA9IHNlbGYuY29uZmlnLnBvc2l0aW9uRWxlbWVudCB8fCBzZWxmLl9pbnB1dDsKICAgICAgfQogICAgICBmdW5jdGlvbiBzZXR1cE1vYmlsZSgpIHsKICAgICAgICAgIHZhciBpbnB1dFR5cGUgPSBzZWxmLmNvbmZpZy5lbmFibGVUaW1lCiAgICAgICAgICAgICAgPyBzZWxmLmNvbmZpZy5ub0NhbGVuZGFyCiAgICAgICAgICAgICAgICAgID8gInRpbWUiCiAgICAgICAgICAgICAgICAgIDogImRhdGV0aW1lLWxvY2FsIgogICAgICAgICAgICAgIDogImRhdGUiOwogICAgICAgICAgc2VsZi5tb2JpbGVJbnB1dCA9IGNyZWF0ZUVsZW1lbnQoImlucHV0Iiwgc2VsZi5pbnB1dC5jbGFzc05hbWUgKyAiIGZsYXRwaWNrci1tb2JpbGUiKTsKICAgICAgICAgIHNlbGYubW9iaWxlSW5wdXQudGFiSW5kZXggPSAxOwogICAgICAgICAgc2VsZi5tb2JpbGVJbnB1dC50eXBlID0gaW5wdXRUeXBlOwogICAgICAgICAgc2VsZi5tb2JpbGVJbnB1dC5kaXNhYmxlZCA9IHNlbGYuaW5wdXQuZGlzYWJsZWQ7CiAgICAgICAgICBzZWxmLm1vYmlsZUlucHV0LnJlcXVpcmVkID0gc2VsZi5pbnB1dC5yZXF1aXJlZDsKICAgICAgICAgIHNlbGYubW9iaWxlSW5wdXQucGxhY2Vob2xkZXIgPSBzZWxmLmlucHV0LnBsYWNlaG9sZGVyOwogICAgICAgICAgc2VsZi5tb2JpbGVGb3JtYXRTdHIgPQogICAgICAgICAgICAgIGlucHV0VHlwZSA9PT0gImRhdGV0aW1lLWxvY2FsIgogICAgICAgICAgICAgICAgICA/ICJZLW0tZFxcVEg6aTpTIgogICAgICAgICAgICAgICAgICA6IGlucHV0VHlwZSA9PT0gImRhdGUiCiAgICAgICAgICAgICAgICAgICAgICA/ICJZLW0tZCIKICAgICAgICAgICAgICAgICAgICAgIDogIkg6aTpTIjsKICAgICAgICAgIGlmIChzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgIHNlbGYubW9iaWxlSW5wdXQuZGVmYXVsdFZhbHVlID0gc2VsZi5tb2JpbGVJbnB1dC52YWx1ZSA9IHNlbGYuZm9ybWF0RGF0ZShzZWxmLnNlbGVjdGVkRGF0ZXNbMF0sIHNlbGYubW9iaWxlRm9ybWF0U3RyKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5taW5EYXRlKQogICAgICAgICAgICAgIHNlbGYubW9iaWxlSW5wdXQubWluID0gc2VsZi5mb3JtYXREYXRlKHNlbGYuY29uZmlnLm1pbkRhdGUsICJZLW0tZCIpOwogICAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1heERhdGUpCiAgICAgICAgICAgICAgc2VsZi5tb2JpbGVJbnB1dC5tYXggPSBzZWxmLmZvcm1hdERhdGUoc2VsZi5jb25maWcubWF4RGF0ZSwgIlktbS1kIik7CiAgICAgICAgICBpZiAoc2VsZi5pbnB1dC5nZXRBdHRyaWJ1dGUoInN0ZXAiKSkKICAgICAgICAgICAgICBzZWxmLm1vYmlsZUlucHV0LnN0ZXAgPSBTdHJpbmcoc2VsZi5pbnB1dC5nZXRBdHRyaWJ1dGUoInN0ZXAiKSk7CiAgICAgICAgICBzZWxmLmlucHV0LnR5cGUgPSAiaGlkZGVuIjsKICAgICAgICAgIGlmIChzZWxmLmFsdElucHV0ICE9PSB1bmRlZmluZWQpCiAgICAgICAgICAgICAgc2VsZi5hbHRJbnB1dC50eXBlID0gImhpZGRlbiI7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIGlmIChzZWxmLmlucHV0LnBhcmVudE5vZGUpCiAgICAgICAgICAgICAgICAgIHNlbGYuaW5wdXQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoc2VsZi5tb2JpbGVJbnB1dCwgc2VsZi5pbnB1dC5uZXh0U2libGluZyk7CiAgICAgICAgICB9CiAgICAgICAgICBjYXRjaCAoX2EpIHsgfQogICAgICAgICAgYmluZChzZWxmLm1vYmlsZUlucHV0LCAiY2hhbmdlIiwgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICBzZWxmLnNldERhdGUoZ2V0RXZlbnRUYXJnZXQoZSkudmFsdWUsIGZhbHNlLCBzZWxmLm1vYmlsZUZvcm1hdFN0cik7CiAgICAgICAgICAgICAgdHJpZ2dlckV2ZW50KCJvbkNoYW5nZSIpOwogICAgICAgICAgICAgIHRyaWdnZXJFdmVudCgib25DbG9zZSIpOwogICAgICAgICAgfSk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gdG9nZ2xlKGUpIHsKICAgICAgICAgIGlmIChzZWxmLmlzT3BlbiA9PT0gdHJ1ZSkKICAgICAgICAgICAgICByZXR1cm4gc2VsZi5jbG9zZSgpOwogICAgICAgICAgc2VsZi5vcGVuKGUpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHRyaWdnZXJFdmVudChldmVudCwgZGF0YSkgewogICAgICAgICAgaWYgKHNlbGYuY29uZmlnID09PSB1bmRlZmluZWQpCiAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgdmFyIGhvb2tzID0gc2VsZi5jb25maWdbZXZlbnRdOwogICAgICAgICAgaWYgKGhvb2tzICE9PSB1bmRlZmluZWQgJiYgaG9va3MubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBob29rc1tpXSAmJiBpIDwgaG9va3MubGVuZ3RoOyBpKyspCiAgICAgICAgICAgICAgICAgIGhvb2tzW2ldKHNlbGYuc2VsZWN0ZWREYXRlcywgc2VsZi5pbnB1dC52YWx1ZSwgc2VsZiwgZGF0YSk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoZXZlbnQgPT09ICJvbkNoYW5nZSIpIHsKICAgICAgICAgICAgICBzZWxmLmlucHV0LmRpc3BhdGNoRXZlbnQoY3JlYXRlRXZlbnQoImNoYW5nZSIpKTsKICAgICAgICAgICAgICBzZWxmLmlucHV0LmRpc3BhdGNoRXZlbnQoY3JlYXRlRXZlbnQoImlucHV0IikpOwogICAgICAgICAgfQogICAgICB9CiAgICAgIGZ1bmN0aW9uIGNyZWF0ZUV2ZW50KG5hbWUpIHsKICAgICAgICAgIHZhciBlID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoIkV2ZW50Iik7CiAgICAgICAgICBlLmluaXRFdmVudChuYW1lLCB0cnVlLCB0cnVlKTsKICAgICAgICAgIHJldHVybiBlOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGlzRGF0ZVNlbGVjdGVkKGRhdGUpIHsKICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgdmFyIHNlbGVjdGVkRGF0ZSA9IHNlbGYuc2VsZWN0ZWREYXRlc1tpXTsKICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWREYXRlIGluc3RhbmNlb2YgRGF0ZSAmJgogICAgICAgICAgICAgICAgICBjb21wYXJlRGF0ZXMoc2VsZWN0ZWREYXRlLCBkYXRlKSA9PT0gMCkKICAgICAgICAgICAgICAgICAgcmV0dXJuICIiICsgaTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBmdW5jdGlvbiBpc0RhdGVJblJhbmdlKGRhdGUpIHsKICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5tb2RlICE9PSAicmFuZ2UiIHx8IHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggPCAyKQogICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIHJldHVybiAoY29tcGFyZURhdGVzKGRhdGUsIHNlbGYuc2VsZWN0ZWREYXRlc1swXSkgPj0gMCAmJgogICAgICAgICAgICAgIGNvbXBhcmVEYXRlcyhkYXRlLCBzZWxmLnNlbGVjdGVkRGF0ZXNbMV0pIDw9IDApOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIHVwZGF0ZU5hdmlnYXRpb25DdXJyZW50TW9udGgoKSB7CiAgICAgICAgICBpZiAoc2VsZi5jb25maWcubm9DYWxlbmRhciB8fCBzZWxmLmlzTW9iaWxlIHx8ICFzZWxmLm1vbnRoTmF2KQogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIHNlbGYueWVhckVsZW1lbnRzLmZvckVhY2goZnVuY3Rpb24gKHllYXJFbGVtZW50LCBpKSB7CiAgICAgICAgICAgICAgdmFyIGQgPSBuZXcgRGF0ZShzZWxmLmN1cnJlbnRZZWFyLCBzZWxmLmN1cnJlbnRNb250aCwgMSk7CiAgICAgICAgICAgICAgZC5zZXRNb250aChzZWxmLmN1cnJlbnRNb250aCArIGkpOwogICAgICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5zaG93TW9udGhzID4gMSB8fAogICAgICAgICAgICAgICAgICBzZWxmLmNvbmZpZy5tb250aFNlbGVjdG9yVHlwZSA9PT0gInN0YXRpYyIpIHsKICAgICAgICAgICAgICAgICAgc2VsZi5tb250aEVsZW1lbnRzW2ldLnRleHRDb250ZW50ID0KICAgICAgICAgICAgICAgICAgICAgIG1vbnRoVG9TdHIoZC5nZXRNb250aCgpLCBzZWxmLmNvbmZpZy5zaG9ydGhhbmRDdXJyZW50TW9udGgsIHNlbGYubDEwbikgKyAiICI7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICBzZWxmLm1vbnRoc0Ryb3Bkb3duQ29udGFpbmVyLnZhbHVlID0gZC5nZXRNb250aCgpLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHllYXJFbGVtZW50LnZhbHVlID0gZC5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHNlbGYuX2hpZGVQcmV2TW9udGhBcnJvdyA9CiAgICAgICAgICAgICAgc2VsZi5jb25maWcubWluRGF0ZSAhPT0gdW5kZWZpbmVkICYmCiAgICAgICAgICAgICAgICAgIChzZWxmLmN1cnJlbnRZZWFyID09PSBzZWxmLmNvbmZpZy5taW5EYXRlLmdldEZ1bGxZZWFyKCkKICAgICAgICAgICAgICAgICAgICAgID8gc2VsZi5jdXJyZW50TW9udGggPD0gc2VsZi5jb25maWcubWluRGF0ZS5nZXRNb250aCgpCiAgICAgICAgICAgICAgICAgICAgICA6IHNlbGYuY3VycmVudFllYXIgPCBzZWxmLmNvbmZpZy5taW5EYXRlLmdldEZ1bGxZZWFyKCkpOwogICAgICAgICAgc2VsZi5faGlkZU5leHRNb250aEFycm93ID0KICAgICAgICAgICAgICBzZWxmLmNvbmZpZy5tYXhEYXRlICE9PSB1bmRlZmluZWQgJiYKICAgICAgICAgICAgICAgICAgKHNlbGYuY3VycmVudFllYXIgPT09IHNlbGYuY29uZmlnLm1heERhdGUuZ2V0RnVsbFllYXIoKQogICAgICAgICAgICAgICAgICAgICAgPyBzZWxmLmN1cnJlbnRNb250aCArIDEgPiBzZWxmLmNvbmZpZy5tYXhEYXRlLmdldE1vbnRoKCkKICAgICAgICAgICAgICAgICAgICAgIDogc2VsZi5jdXJyZW50WWVhciA+IHNlbGYuY29uZmlnLm1heERhdGUuZ2V0RnVsbFllYXIoKSk7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gZ2V0RGF0ZVN0cihzcGVjaWZpY0Zvcm1hdCkgewogICAgICAgICAgdmFyIGZvcm1hdCA9IHNwZWNpZmljRm9ybWF0IHx8CiAgICAgICAgICAgICAgKHNlbGYuY29uZmlnLmFsdElucHV0ID8gc2VsZi5jb25maWcuYWx0Rm9ybWF0IDogc2VsZi5jb25maWcuZGF0ZUZvcm1hdCk7CiAgICAgICAgICByZXR1cm4gc2VsZi5zZWxlY3RlZERhdGVzCiAgICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAoZE9iaikgeyByZXR1cm4gc2VsZi5mb3JtYXREYXRlKGRPYmosIGZvcm1hdCk7IH0pCiAgICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoZCwgaSwgYXJyKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuY29uZmlnLm1vZGUgIT09ICJyYW5nZSIgfHwKICAgICAgICAgICAgICAgICAgc2VsZi5jb25maWcuZW5hYmxlVGltZSB8fAogICAgICAgICAgICAgICAgICBhcnIuaW5kZXhPZihkKSA9PT0gaTsKICAgICAgICAgIH0pCiAgICAgICAgICAgICAgLmpvaW4oc2VsZi5jb25maWcubW9kZSAhPT0gInJhbmdlIgogICAgICAgICAgICAgID8gc2VsZi5jb25maWcuY29uanVuY3Rpb24KICAgICAgICAgICAgICA6IHNlbGYubDEwbi5yYW5nZVNlcGFyYXRvcik7CiAgICAgIH0KICAgICAgZnVuY3Rpb24gdXBkYXRlVmFsdWUodHJpZ2dlckNoYW5nZSkgewogICAgICAgICAgaWYgKHRyaWdnZXJDaGFuZ2UgPT09IHZvaWQgMCkgeyB0cmlnZ2VyQ2hhbmdlID0gdHJ1ZTsgfQogICAgICAgICAgaWYgKHNlbGYubW9iaWxlSW5wdXQgIT09IHVuZGVmaW5lZCAmJiBzZWxmLm1vYmlsZUZvcm1hdFN0cikgewogICAgICAgICAgICAgIHNlbGYubW9iaWxlSW5wdXQudmFsdWUgPQogICAgICAgICAgICAgICAgICBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiAhPT0gdW5kZWZpbmVkCiAgICAgICAgICAgICAgICAgICAgICA/IHNlbGYuZm9ybWF0RGF0ZShzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiwgc2VsZi5tb2JpbGVGb3JtYXRTdHIpCiAgICAgICAgICAgICAgICAgICAgICA6ICIiOwogICAgICAgICAgfQogICAgICAgICAgc2VsZi5pbnB1dC52YWx1ZSA9IGdldERhdGVTdHIoc2VsZi5jb25maWcuZGF0ZUZvcm1hdCk7CiAgICAgICAgICBpZiAoc2VsZi5hbHRJbnB1dCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgc2VsZi5hbHRJbnB1dC52YWx1ZSA9IGdldERhdGVTdHIoc2VsZi5jb25maWcuYWx0Rm9ybWF0KTsKICAgICAgICAgIH0KICAgICAgICAgIGlmICh0cmlnZ2VyQ2hhbmdlICE9PSBmYWxzZSkKICAgICAgICAgICAgICB0cmlnZ2VyRXZlbnQoIm9uVmFsdWVVcGRhdGUiKTsKICAgICAgfQogICAgICBmdW5jdGlvbiBvbk1vbnRoTmF2Q2xpY2soZSkgewogICAgICAgICAgdmFyIGV2ZW50VGFyZ2V0ID0gZ2V0RXZlbnRUYXJnZXQoZSk7CiAgICAgICAgICB2YXIgaXNQcmV2TW9udGggPSBzZWxmLnByZXZNb250aE5hdi5jb250YWlucyhldmVudFRhcmdldCk7CiAgICAgICAgICB2YXIgaXNOZXh0TW9udGggPSBzZWxmLm5leHRNb250aE5hdi5jb250YWlucyhldmVudFRhcmdldCk7CiAgICAgICAgICBpZiAoaXNQcmV2TW9udGggfHwgaXNOZXh0TW9udGgpIHsKICAgICAgICAgICAgICBjaGFuZ2VNb250aChpc1ByZXZNb250aCA/IC0xIDogMSk7CiAgICAgICAgICB9CiAgICAgICAgICBlbHNlIGlmIChzZWxmLnllYXJFbGVtZW50cy5pbmRleE9mKGV2ZW50VGFyZ2V0KSA+PSAwKSB7CiAgICAgICAgICAgICAgZXZlbnRUYXJnZXQuc2VsZWN0KCk7CiAgICAgICAgICB9CiAgICAgICAgICBlbHNlIGlmIChldmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoImFycm93VXAiKSkgewogICAgICAgICAgICAgIHNlbGYuY2hhbmdlWWVhcihzZWxmLmN1cnJlbnRZZWFyICsgMSk7CiAgICAgICAgICB9CiAgICAgICAgICBlbHNlIGlmIChldmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoImFycm93RG93biIpKSB7CiAgICAgICAgICAgICAgc2VsZi5jaGFuZ2VZZWFyKHNlbGYuY3VycmVudFllYXIgLSAxKTsKICAgICAgICAgIH0KICAgICAgfQogICAgICBmdW5jdGlvbiB0aW1lV3JhcHBlcihlKSB7CiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICB2YXIgaXNLZXlEb3duID0gZS50eXBlID09PSAia2V5ZG93biIsIGV2ZW50VGFyZ2V0ID0gZ2V0RXZlbnRUYXJnZXQoZSksIGlucHV0ID0gZXZlbnRUYXJnZXQ7CiAgICAgICAgICBpZiAoc2VsZi5hbVBNICE9PSB1bmRlZmluZWQgJiYgZXZlbnRUYXJnZXQgPT09IHNlbGYuYW1QTSkgewogICAgICAgICAgICAgIHNlbGYuYW1QTS50ZXh0Q29udGVudCA9CiAgICAgICAgICAgICAgICAgIHNlbGYubDEwbi5hbVBNW2ludChzZWxmLmFtUE0udGV4dENvbnRlbnQgPT09IHNlbGYubDEwbi5hbVBNWzBdKV07CiAgICAgICAgICB9CiAgICAgICAgICB2YXIgbWluID0gcGFyc2VGbG9hdChpbnB1dC5nZXRBdHRyaWJ1dGUoIm1pbiIpKSwgbWF4ID0gcGFyc2VGbG9hdChpbnB1dC5nZXRBdHRyaWJ1dGUoIm1heCIpKSwgc3RlcCA9IHBhcnNlRmxvYXQoaW5wdXQuZ2V0QXR0cmlidXRlKCJzdGVwIikpLCBjdXJWYWx1ZSA9IHBhcnNlSW50KGlucHV0LnZhbHVlLCAxMCksIGRlbHRhID0gZS5kZWx0YSB8fAogICAgICAgICAgICAgIChpc0tleURvd24gPyAoZS53aGljaCA9PT0gMzggPyAxIDogLTEpIDogMCk7CiAgICAgICAgICB2YXIgbmV3VmFsdWUgPSBjdXJWYWx1ZSArIHN0ZXAgKiBkZWx0YTsKICAgICAgICAgIGlmICh0eXBlb2YgaW5wdXQudmFsdWUgIT09ICJ1bmRlZmluZWQiICYmIGlucHV0LnZhbHVlLmxlbmd0aCA9PT0gMikgewogICAgICAgICAgICAgIHZhciBpc0hvdXJFbGVtID0gaW5wdXQgPT09IHNlbGYuaG91ckVsZW1lbnQsIGlzTWludXRlRWxlbSA9IGlucHV0ID09PSBzZWxmLm1pbnV0ZUVsZW1lbnQ7CiAgICAgICAgICAgICAgaWYgKG5ld1ZhbHVlIDwgbWluKSB7CiAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlID0KICAgICAgICAgICAgICAgICAgICAgIG1heCArCiAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWUgKwogICAgICAgICAgICAgICAgICAgICAgICAgIGludCghaXNIb3VyRWxlbSkgKwogICAgICAgICAgICAgICAgICAgICAgICAgIChpbnQoaXNIb3VyRWxlbSkgJiYgaW50KCFzZWxmLmFtUE0pKTsKICAgICAgICAgICAgICAgICAgaWYgKGlzTWludXRlRWxlbSkKICAgICAgICAgICAgICAgICAgICAgIGluY3JlbWVudE51bUlucHV0KHVuZGVmaW5lZCwgLTEsIHNlbGYuaG91ckVsZW1lbnQpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBlbHNlIGlmIChuZXdWYWx1ZSA+IG1heCkgewogICAgICAgICAgICAgICAgICBuZXdWYWx1ZSA9CiAgICAgICAgICAgICAgICAgICAgICBpbnB1dCA9PT0gc2VsZi5ob3VyRWxlbWVudCA/IG5ld1ZhbHVlIC0gbWF4IC0gaW50KCFzZWxmLmFtUE0pIDogbWluOwogICAgICAgICAgICAgICAgICBpZiAoaXNNaW51dGVFbGVtKQogICAgICAgICAgICAgICAgICAgICAgaW5jcmVtZW50TnVtSW5wdXQodW5kZWZpbmVkLCAxLCBzZWxmLmhvdXJFbGVtZW50KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKHNlbGYuYW1QTSAmJgogICAgICAgICAgICAgICAgICBpc0hvdXJFbGVtICYmCiAgICAgICAgICAgICAgICAgIChzdGVwID09PSAxCiAgICAgICAgICAgICAgICAgICAgICA/IG5ld1ZhbHVlICsgY3VyVmFsdWUgPT09IDIzCiAgICAgICAgICAgICAgICAgICAgICA6IE1hdGguYWJzKG5ld1ZhbHVlIC0gY3VyVmFsdWUpID4gc3RlcCkpIHsKICAgICAgICAgICAgICAgICAgc2VsZi5hbVBNLnRleHRDb250ZW50ID0KICAgICAgICAgICAgICAgICAgICAgIHNlbGYubDEwbi5hbVBNW2ludChzZWxmLmFtUE0udGV4dENvbnRlbnQgPT09IHNlbGYubDEwbi5hbVBNWzBdKV07CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlucHV0LnZhbHVlID0gcGFkKG5ld1ZhbHVlKTsKICAgICAgICAgIH0KICAgICAgfQogICAgICBpbml0KCk7CiAgICAgIHJldHVybiBzZWxmOwogIH0KICBmdW5jdGlvbiBfZmxhdHBpY2tyKG5vZGVMaXN0LCBjb25maWcpIHsKICAgICAgdmFyIG5vZGVzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlCiAgICAgICAgICAuY2FsbChub2RlTGlzdCkKICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHggaW5zdGFuY2VvZiBIVE1MRWxlbWVudDsgfSk7CiAgICAgIHZhciBpbnN0YW5jZXMgPSBbXTsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBub2Rlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgdmFyIG5vZGUgPSBub2Rlc1tpXTsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgaWYgKG5vZGUuZ2V0QXR0cmlidXRlKCJkYXRhLWZwLW9taXQiKSAhPT0gbnVsbCkKICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgaWYgKG5vZGUuX2ZsYXRwaWNrciAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICAgIG5vZGUuX2ZsYXRwaWNrci5kZXN0cm95KCk7CiAgICAgICAgICAgICAgICAgIG5vZGUuX2ZsYXRwaWNrciA9IHVuZGVmaW5lZDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgbm9kZS5fZmxhdHBpY2tyID0gRmxhdHBpY2tySW5zdGFuY2Uobm9kZSwgY29uZmlnIHx8IHt9KTsKICAgICAgICAgICAgICBpbnN0YW5jZXMucHVzaChub2RlLl9mbGF0cGlja3IpOwogICAgICAgICAgfQogICAgICAgICAgY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpOwogICAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBpbnN0YW5jZXMubGVuZ3RoID09PSAxID8gaW5zdGFuY2VzWzBdIDogaW5zdGFuY2VzOwogIH0KICBpZiAodHlwZW9mIEhUTUxFbGVtZW50ICE9PSAidW5kZWZpbmVkIiAmJgogICAgICB0eXBlb2YgSFRNTENvbGxlY3Rpb24gIT09ICJ1bmRlZmluZWQiICYmCiAgICAgIHR5cGVvZiBOb2RlTGlzdCAhPT0gInVuZGVmaW5lZCIpIHsKICAgICAgSFRNTENvbGxlY3Rpb24ucHJvdG90eXBlLmZsYXRwaWNrciA9IE5vZGVMaXN0LnByb3RvdHlwZS5mbGF0cGlja3IgPSBmdW5jdGlvbiAoY29uZmlnKSB7CiAgICAgICAgICByZXR1cm4gX2ZsYXRwaWNrcih0aGlzLCBjb25maWcpOwogICAgICB9OwogICAgICBIVE1MRWxlbWVudC5wcm90b3R5cGUuZmxhdHBpY2tyID0gZnVuY3Rpb24gKGNvbmZpZykgewogICAgICAgICAgcmV0dXJuIF9mbGF0cGlja3IoW3RoaXNdLCBjb25maWcpOwogICAgICB9OwogIH0KICB2YXIgZmxhdHBpY2tyID0gZnVuY3Rpb24gKHNlbGVjdG9yLCBjb25maWcpIHsKICAgICAgaWYgKHR5cGVvZiBzZWxlY3RvciA9PT0gInN0cmluZyIpIHsKICAgICAgICAgIHJldHVybiBfZmxhdHBpY2tyKHdpbmRvdy5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKSwgY29uZmlnKTsKICAgICAgfQogICAgICBlbHNlIGlmIChzZWxlY3RvciBpbnN0YW5jZW9mIE5vZGUpIHsKICAgICAgICAgIHJldHVybiBfZmxhdHBpY2tyKFtzZWxlY3Rvcl0sIGNvbmZpZyk7CiAgICAgIH0KICAgICAgZWxzZSB7CiAgICAgICAgICByZXR1cm4gX2ZsYXRwaWNrcihzZWxlY3RvciwgY29uZmlnKTsKICAgICAgfQogIH07CiAgZmxhdHBpY2tyLmRlZmF1bHRDb25maWcgPSB7fTsKICBmbGF0cGlja3IubDEwbnMgPSB7CiAgICAgIGVuOiBfX2Fzc2lnbih7fSwgZW5nbGlzaCksCiAgICAgIGRlZmF1bHQ6IF9fYXNzaWduKHt9LCBlbmdsaXNoKSwKICB9OwogIGZsYXRwaWNrci5sb2NhbGl6ZSA9IGZ1bmN0aW9uIChsMTBuKSB7CiAgICAgIGZsYXRwaWNrci5sMTBucy5kZWZhdWx0ID0gX19hc3NpZ24oX19hc3NpZ24oe30sIGZsYXRwaWNrci5sMTBucy5kZWZhdWx0KSwgbDEwbik7CiAgfTsKICBmbGF0cGlja3Iuc2V0RGVmYXVsdHMgPSBmdW5jdGlvbiAoY29uZmlnKSB7CiAgICAgIGZsYXRwaWNrci5kZWZhdWx0Q29uZmlnID0gX19hc3NpZ24oX19hc3NpZ24oe30sIGZsYXRwaWNrci5kZWZhdWx0Q29uZmlnKSwgY29uZmlnKTsKICB9OwogIGZsYXRwaWNrci5wYXJzZURhdGUgPSBjcmVhdGVEYXRlUGFyc2VyKHt9KTsKICBmbGF0cGlja3IuZm9ybWF0RGF0ZSA9IGNyZWF0ZURhdGVGb3JtYXR0ZXIoe30pOwogIGZsYXRwaWNrci5jb21wYXJlRGF0ZXMgPSBjb21wYXJlRGF0ZXM7CiAgaWYgKHR5cGVvZiBqUXVlcnkgIT09ICJ1bmRlZmluZWQiICYmIHR5cGVvZiBqUXVlcnkuZm4gIT09ICJ1bmRlZmluZWQiKSB7CiAgICAgIGpRdWVyeS5mbi5mbGF0cGlja3IgPSBmdW5jdGlvbiAoY29uZmlnKSB7CiAgICAgICAgICByZXR1cm4gX2ZsYXRwaWNrcih0aGlzLCBjb25maWcpOwogICAgICB9OwogIH0KICBEYXRlLnByb3RvdHlwZS5mcF9pbmNyID0gZnVuY3Rpb24gKGRheXMpIHsKICAgICAgcmV0dXJuIG5ldyBEYXRlKHRoaXMuZ2V0RnVsbFllYXIoKSwgdGhpcy5nZXRNb250aCgpLCB0aGlzLmdldERhdGUoKSArICh0eXBlb2YgZGF5cyA9PT0gInN0cmluZyIgPyBwYXJzZUludChkYXlzLCAxMCkgOiBkYXlzKSk7CiAgfTsKICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gInVuZGVmaW5lZCIpIHsKICAgICAgd2luZG93LmZsYXRwaWNrciA9IGZsYXRwaWNrcjsKICB9CgogIHZhciBlLG89e307ZnVuY3Rpb24gbihyLHQsZSl7aWYoMz09PXIubm9kZVR5cGUpe3ZhciBvPSJ0ZXh0Q29udGVudCJpbiByP3IudGV4dENvbnRlbnQ6ci5ub2RlVmFsdWV8fCIiO2lmKCExIT09bi5vcHRpb25zLnRyaW0pe3ZhciBhPTA9PT10fHx0PT09ZS5sZW5ndGgtMTtpZigoIShvPW8ubWF0Y2goL15bXHNcbl0rJC9nKSYmImFsbCIhPT1uLm9wdGlvbnMudHJpbT8iICI6by5yZXBsYWNlKC8oXltcc1xuXSt8W1xzXG5dKyQpL2csImFsbCI9PT1uLm9wdGlvbnMudHJpbXx8YT8iIjoiICIpKXx8IiAiPT09bykmJmUubGVuZ3RoPjEmJmEpcmV0dXJuIG51bGx9cmV0dXJuIG99aWYoMSE9PXIubm9kZVR5cGUpcmV0dXJuIG51bGw7dmFyIHA9U3RyaW5nKHIubm9kZU5hbWUpLnRvTG93ZXJDYXNlKCk7aWYoInNjcmlwdCI9PT1wJiYhbi5vcHRpb25zLmFsbG93U2NyaXB0cylyZXR1cm4gbnVsbDt2YXIgbCxzLHU9bi5oKHAsZnVuY3Rpb24ocil7dmFyIHQ9ciYmci5sZW5ndGg7aWYoIXQpcmV0dXJuIG51bGw7Zm9yKHZhciBlPXt9LG89MDtvPHQ7bysrKXt2YXIgYT1yW29dLGk9YS5uYW1lLHA9YS52YWx1ZTsib24iPT09aS5zdWJzdHJpbmcoMCwyKSYmbi5vcHRpb25zLmFsbG93RXZlbnRzJiYocD1uZXcgRnVuY3Rpb24ocCkpLGVbaV09cDt9cmV0dXJuIGV9KHIuYXR0cmlidXRlcyksKHM9KGw9ci5jaGlsZE5vZGVzKSYmQXJyYXkucHJvdG90eXBlLm1hcC5jYWxsKGwsbikuZmlsdGVyKGkpKSYmcy5sZW5ndGg/czpudWxsKTtyZXR1cm4gbi52aXNpdG9yJiZuLnZpc2l0b3IodSksdX12YXIgYSxpPWZ1bmN0aW9uKHIpe3JldHVybiByfSxwPXt9O2Z1bmN0aW9uIGwocil7dmFyIHQ9KHIudHlwZXx8IiIpLnRvTG93ZXJDYXNlKCksZT1sLm1hcDtlJiZlLmhhc093blByb3BlcnR5KHQpPyhyLnR5cGU9ZVt0XSxyLnByb3BzPU9iamVjdC5rZXlzKHIucHJvcHN8fHt9KS5yZWR1Y2UoZnVuY3Rpb24odCxlKXt2YXIgbztyZXR1cm4gdFsobz1lLG8ucmVwbGFjZSgvLSguKS9nLGZ1bmN0aW9uKHIsdCl7cmV0dXJuIHQudG9VcHBlckNhc2UoKX0pKV09ci5wcm9wc1tlXSx0fSx7fSkpOnIudHlwZT10LnJlcGxhY2UoL1teYS16MC05LV0vaSwiIik7fXZhciBNYXJrdXAgPSAoZnVuY3Rpb24odCl7ZnVuY3Rpb24gaSgpe3QuYXBwbHkodGhpcyxhcmd1bWVudHMpO31yZXR1cm4gdCYmKGkuX19wcm90b19fPXQpLChpLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQmJnQucHJvdG90eXBlKSkuY29uc3RydWN0b3I9aSxpLnNldFJldml2ZXI9ZnVuY3Rpb24ocil7YT1yO30saS5wcm90b3R5cGUuc2hvdWxkQ29tcG9uZW50VXBkYXRlPWZ1bmN0aW9uKHIpe3ZhciB0PXRoaXMucHJvcHM7cmV0dXJuIHIud3JhcCE9PXQud3JhcHx8ci50eXBlIT09dC50eXBlfHxyLm1hcmt1cCE9PXQubWFya3VwfSxpLnByb3RvdHlwZS5zZXRDb21wb25lbnRzPWZ1bmN0aW9uKHIpe2lmKHRoaXMubWFwPXt9LHIpZm9yKHZhciB0IGluIHIpaWYoci5oYXNPd25Qcm9wZXJ0eSh0KSl7dmFyIGU9dC5yZXBsYWNlKC8oW0EtWl0rKShbQS1aXVthLXowLTldKXwoW2EtejAtOV0rKShbQS1aXSkvZywiJDEkMy0kMiQ0IikudG9Mb3dlckNhc2UoKTt0aGlzLm1hcFtlXT1yW3RdO319LGkucHJvdG90eXBlLnJlbmRlcj1mdW5jdGlvbih0KXt2YXIgaT10LndyYXA7dm9pZCAwPT09aSYmKGk9ITApO3ZhciBzLHU9dC50eXBlLGM9dC5tYXJrdXAsbT10LmNvbXBvbmVudHMsdj10LnJldml2ZXIsZj10Lm9uRXJyb3IsZD10WyJhbGxvdy1zY3JpcHRzIl0saD10WyJhbGxvdy1ldmVudHMiXSx5PXQudHJpbSx3PWZ1bmN0aW9uKHIsdCl7dmFyIGU9e307Zm9yKHZhciBvIGluIHIpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHIsbykmJi0xPT09dC5pbmRleE9mKG8pJiYoZVtvXT1yW29dKTtyZXR1cm4gZX0odCxbIndyYXAiLCJ0eXBlIiwibWFya3VwIiwiY29tcG9uZW50cyIsInJldml2ZXIiLCJvbkVycm9yIiwiYWxsb3ctc2NyaXB0cyIsImFsbG93LWV2ZW50cyIsInRyaW0iXSksQz12fHx0aGlzLnJldml2ZXJ8fHRoaXMuY29uc3RydWN0b3IucHJvdG90eXBlLnJldml2ZXJ8fGF8fHYkMTt0aGlzLnNldENvbXBvbmVudHMobSk7dmFyIGc9e2FsbG93U2NyaXB0czpkLGFsbG93RXZlbnRzOmgsdHJpbTp5fTt0cnl7cz1mdW5jdGlvbihyLHQsYSxpLHMpe3ZhciB1PWZ1bmN0aW9uKHIsdCl7dmFyIG8sbixhLGkscD0iaHRtbCI9PT10PyJ0ZXh0L2h0bWwiOiJhcHBsaWNhdGlvbi94bWwiOyJodG1sIj09PXQ/KGk9ImJvZHkiLGE9IjwhRE9DVFlQRSBodG1sPlxuPGh0bWw+PGJvZHk+IityKyI8L2JvZHk+PC9odG1sPiIpOihpPSJ4bWwiLGE9Jzw/eG1sIHZlcnNpb249IjEuMCIgZW5jb2Rpbmc9IlVURi04Ij8+XG48eG1sPicrcisiPC94bWw+Iik7dHJ5e289KG5ldyBET01QYXJzZXIpLnBhcnNlRnJvbVN0cmluZyhhLHApO31jYXRjaChyKXtuPXI7fWlmKG98fCJodG1sIiE9PXR8fCgobz1lfHwoZT1mdW5jdGlvbigpe2lmKGRvY3VtZW50LmltcGxlbWVudGF0aW9uJiZkb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQpcmV0dXJuIGRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCgiIik7dmFyIHI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaWZyYW1lIik7cmV0dXJuIHIuc3R5bGUuY3NzVGV4dD0icG9zaXRpb246YWJzb2x1dGU7IGxlZnQ6MDsgdG9wOi05OTllbTsgd2lkdGg6MXB4OyBoZWlnaHQ6MXB4OyBvdmVyZmxvdzpoaWRkZW47IixyLnNldEF0dHJpYnV0ZSgic2FuZGJveCIsImFsbG93LWZvcm1zIiksZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChyKSxyLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnR9KCkpKS5vcGVuKCksby53cml0ZShhKSxvLmNsb3NlKCkpLG8pe3ZhciBsPW8uZ2V0RWxlbWVudHNCeVRhZ05hbWUoaSlbMF0scz1sLmZpcnN0Q2hpbGQ7cmV0dXJuIHImJiFzJiYobC5lcnJvcj0iRG9jdW1lbnQgcGFyc2UgZmFpbGVkLiIpLHMmJiJwYXJzZXJlcnJvciI9PT1TdHJpbmcocy5ub2RlTmFtZSkudG9Mb3dlckNhc2UoKSYmKHMucmVtb3ZlQ2hpbGQocy5maXJzdENoaWxkKSxzLnJlbW92ZUNoaWxkKHMubGFzdENoaWxkKSxsLmVycm9yPXMudGV4dENvbnRlbnR8fHMubm9kZVZhbHVlfHxufHwiVW5rbm93biBlcnJvciIsbC5yZW1vdmVDaGlsZChzKSksbH19KHIsdCk7aWYodSYmdS5lcnJvcil0aHJvdyBuZXcgRXJyb3IodS5lcnJvcik7dmFyIGM9dSYmdS5ib2R5fHx1O2wubWFwPWl8fHA7dmFyIG09YyYmZnVuY3Rpb24ocix0LGUsYSl7cmV0dXJuIG4udmlzaXRvcj10LG4uaD1lLG4ub3B0aW9ucz1hfHxvLG4ocil9KGMsbCxhLHMpO3JldHVybiBsLm1hcD1udWxsLG0mJm0ucHJvcHMmJm0ucHJvcHMuY2hpbGRyZW58fG51bGx9KGMsdSxDLHRoaXMubWFwLGcpO31jYXRjaChyKXtmP2Yoe2Vycm9yOnJ9KToidW5kZWZpbmVkIiE9dHlwZW9mIGNvbnNvbGUmJmNvbnNvbGUuZXJyb3ImJmNvbnNvbGUuZXJyb3IoInByZWFjdC1tYXJrdXA6ICIrcik7fWlmKCExPT09aSlyZXR1cm4gc3x8bnVsbDt2YXIgeD13Lmhhc093blByb3BlcnR5KCJjbGFzc05hbWUiKT8iY2xhc3NOYW1lIjoiY2xhc3MiLGI9d1t4XTtyZXR1cm4gYj9iLnNwbGljZT9iLnNwbGljZSgwLDAsIm1hcmt1cCIpOiJzdHJpbmciPT10eXBlb2YgYj93W3hdKz0iIG1hcmt1cCI6Im9iamVjdCI9PXR5cGVvZiBiJiYoYi5tYXJrdXA9ITApOndbeF09Im1hcmt1cCIsQygiZGl2Iix3LHN8fG51bGwpfSxpfShfJDEpKTsKCiAgY29uc3QgQ0xBU1NfUEFUVEVSTiA9IC9eY2xhc3NbIHtdLzsKCgogIC8qKgogICAqIEBwYXJhbSB7ZnVuY3Rpb259IGZuCiAgICoKICAgKiBAcmV0dXJuIHtib29sZWFufQogICAqLwogIGZ1bmN0aW9uIGlzQ2xhc3MoZm4pIHsKICAgIHJldHVybiBDTEFTU19QQVRURVJOLnRlc3QoZm4udG9TdHJpbmcoKSk7CiAgfQoKICAvKioKICAgKiBAcGFyYW0ge2FueX0gb2JqCiAgICoKICAgKiBAcmV0dXJuIHtib29sZWFufQogICAqLwogIGZ1bmN0aW9uIGlzQXJyYXkob2JqKSB7CiAgICByZXR1cm4gQXJyYXkuaXNBcnJheShvYmopOwogIH0KCiAgLyoqCiAgICogQHBhcmFtIHthbnl9IG9iagogICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wCiAgICoKICAgKiBAcmV0dXJuIHtib29sZWFufQogICAqLwogIGZ1bmN0aW9uIGhhc093blByb3Aob2JqLCBwcm9wKSB7CiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7CiAgfQoKICAvKioKICAgKiBAdHlwZWRlZiB7aW1wb3J0KCcuL2luZGV4JykuSW5qZWN0QW5ub3RhdGVkIH0gSW5qZWN0QW5ub3RhdGVkCiAgICovCgogIC8qKgogICAqIEB0ZW1wbGF0ZSBUCiAgICoKICAgKiBAcGFyYW1zIHtbLi4uc3RyaW5nW10sIFRdIHwgLi4uc3RyaW5nW10sIFR9IGFyZ3MKICAgKgogICAqIEByZXR1cm4ge1QgJiBJbmplY3RBbm5vdGF0ZWR9CiAgICovCiAgZnVuY3Rpb24gYW5ub3RhdGUoLi4uYXJncykgewoKICAgIGlmIChhcmdzLmxlbmd0aCA9PT0gMSAmJiBpc0FycmF5KGFyZ3NbMF0pKSB7CiAgICAgIGFyZ3MgPSBhcmdzWzBdOwogICAgfQoKICAgIGFyZ3MgPSBbIC4uLmFyZ3MgXTsKCiAgICBjb25zdCBmbiA9IGFyZ3MucG9wKCk7CgogICAgZm4uJGluamVjdCA9IGFyZ3M7CgogICAgcmV0dXJuIGZuOwogIH0KCgogIC8vIEN1cnJlbnQgbGltaXRhdGlvbnM6CiAgLy8gLSBjYW4ndCBwdXQgaW50byAiZnVuY3Rpb24gYXJnIiBjb21tZW50cwogIC8vIGZ1bmN0aW9uIC8qIChubyBwYXJlbnRoZXNpcyBsaWtlIHRoaXMpICovICgpe30KICAvLyBmdW5jdGlvbiBhYmMoIC8qIHh4IChubyBwYXJlbnRoZXNpcyBsaWtlIHRoaXMpICovIGEsIGIpIHt9CiAgLy8KICAvLyBKdXN0IHB1dCB0aGUgY29tbWVudCBiZWZvcmUgZnVuY3Rpb24gb3IgaW5zaWRlOgogIC8vIC8qICgoKHRoaXMgaXMgZmluZSkpKSAqLyBmdW5jdGlvbihhLCBiKSB7fQogIC8vIGZ1bmN0aW9uIGFiYyhhKSB7IC8qICgoKHRoaXMgaXMgZmluZSkpKSAqL30KICAvLwogIC8vIC0gY2FuJ3QgcmVsaWFibHkgYXV0by1hbm5vdGF0ZSBjb25zdHJ1Y3Rvcjsgd2UnbGwgbWF0Y2ggdGhlCiAgLy8gZmlyc3QgY29uc3RydWN0b3IoLi4uKSBwYXR0ZXJuIGZvdW5kIHdoaWNoIG1heSBiZSB0aGUgb25lCiAgLy8gb2YgYSBuZXN0ZWQgY2xhc3MsIHRvby4KCiAgY29uc3QgQ09OU1RSVUNUT1JfQVJHUyA9IC9jb25zdHJ1Y3RvclxzKlteKF0qXChccyooW14pXSopXCkvbTsKICBjb25zdCBGTl9BUkdTID0gL14oPzphc3luY1xzKyk/KD86ZnVuY3Rpb25ccypbXihdKik/KD86XChccyooW14pXSopXCl8KFx3KykpL207CiAgY29uc3QgRk5fQVJHID0gL1wvXCooW14qXSopXCpcLy9tOwoKICAvKioKICAgKiBAcGFyYW0ge3Vua25vd259IGZuCiAgICoKICAgKiBAcmV0dXJuIHtzdHJpbmdbXX0KICAgKi8KICBmdW5jdGlvbiBwYXJzZUFubm90YXRpb25zKGZuKSB7CgogICAgaWYgKHR5cGVvZiBmbiAhPT0gJ2Z1bmN0aW9uJykgewogICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBhbm5vdGF0ZSAiJHtmbn0iLiBFeHBlY3RlZCBhIGZ1bmN0aW9uIWApOwogICAgfQoKICAgIGNvbnN0IG1hdGNoID0gZm4udG9TdHJpbmcoKS5tYXRjaChpc0NsYXNzKGZuKSA/IENPTlNUUlVDVE9SX0FSR1MgOiBGTl9BUkdTKTsKCiAgICAvLyBtYXkgcGFyc2UgY2xhc3Mgd2l0aG91dCBjb25zdHJ1Y3RvcgogICAgaWYgKCFtYXRjaCkgewogICAgICByZXR1cm4gW107CiAgICB9CgogICAgY29uc3QgYXJncyA9IG1hdGNoWzFdIHx8IG1hdGNoWzJdOwoKICAgIHJldHVybiBhcmdzICYmIGFyZ3Muc3BsaXQoJywnKS5tYXAoYXJnID0+IHsKICAgICAgY29uc3QgYXJnTWF0Y2ggPSBhcmcubWF0Y2goRk5fQVJHKTsKICAgICAgcmV0dXJuIChhcmdNYXRjaCAmJiBhcmdNYXRjaFsxXSB8fCBhcmcpLnRyaW0oKTsKICAgIH0pIHx8IFtdOwogIH0KCiAgLyoqCiAgICogQHR5cGVkZWYgeyBpbXBvcnQoJy4vaW5kZXgnKS5Nb2R1bGVEZWNsYXJhdGlvbiB9IE1vZHVsZURlY2xhcmF0aW9uCiAgICogQHR5cGVkZWYgeyBpbXBvcnQoJy4vaW5kZXgnKS5Nb2R1bGVEZWZpbml0aW9uIH0gTW9kdWxlRGVmaW5pdGlvbgogICAqIEB0eXBlZGVmIHsgaW1wb3J0KCcuL2luZGV4JykuSW5qZWN0b3JDb250ZXh0IH0gSW5qZWN0b3JDb250ZXh0CiAgICovCgogIC8qKgogICAqIENyZWF0ZSBhIG5ldyBpbmplY3RvciB3aXRoIHRoZSBnaXZlbiBtb2R1bGVzLgogICAqCiAgICogQHBhcmFtIHtNb2R1bGVEZWZpbml0aW9uW119IG1vZHVsZXMKICAgKiBAcGFyYW0ge0luamVjdG9yQ29udGV4dH0gW3BhcmVudF0KICAgKi8KICBmdW5jdGlvbiBJbmplY3Rvcihtb2R1bGVzLCBwYXJlbnQpIHsKICAgIHBhcmVudCA9IHBhcmVudCB8fCB7CiAgICAgIGdldDogZnVuY3Rpb24obmFtZSwgc3RyaWN0KSB7CiAgICAgICAgY3VycmVudGx5UmVzb2x2aW5nLnB1c2gobmFtZSk7CgogICAgICAgIGlmIChzdHJpY3QgPT09IGZhbHNlKSB7CiAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhyb3cgZXJyb3IoYE5vIHByb3ZpZGVyIGZvciAiJHsgbmFtZSB9IiFgKTsKICAgICAgICB9CiAgICAgIH0KICAgIH07CgogICAgY29uc3QgY3VycmVudGx5UmVzb2x2aW5nID0gW107CiAgICBjb25zdCBwcm92aWRlcnMgPSB0aGlzLl9wcm92aWRlcnMgPSBPYmplY3QuY3JlYXRlKHBhcmVudC5fcHJvdmlkZXJzIHx8IG51bGwpOwogICAgY29uc3QgaW5zdGFuY2VzID0gdGhpcy5faW5zdGFuY2VzID0gT2JqZWN0LmNyZWF0ZShudWxsKTsKCiAgICBjb25zdCBzZWxmID0gaW5zdGFuY2VzLmluamVjdG9yID0gdGhpczsKCiAgICBjb25zdCBlcnJvciA9IGZ1bmN0aW9uKG1zZykgewogICAgICBjb25zdCBzdGFjayA9IGN1cnJlbnRseVJlc29sdmluZy5qb2luKCcgLT4gJyk7CiAgICAgIGN1cnJlbnRseVJlc29sdmluZy5sZW5ndGggPSAwOwogICAgICByZXR1cm4gbmV3IEVycm9yKHN0YWNrID8gYCR7IG1zZyB9IChSZXNvbHZpbmc6ICR7IHN0YWNrIH0pYCA6IG1zZyk7CiAgICB9OwoKICAgIC8qKgogICAgICogUmV0dXJuIGEgbmFtZWQgc2VydmljZS4KICAgICAqCiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZQogICAgICogQHBhcmFtIHtib29sZWFufSBbc3RyaWN0PXRydWVdIGlmIGZhbHNlLCByZXNvbHZlIG1pc3Npbmcgc2VydmljZXMgdG8gbnVsbAogICAgICoKICAgICAqIEByZXR1cm4ge2FueX0KICAgICAqLwogICAgZnVuY3Rpb24gZ2V0KG5hbWUsIHN0cmljdCkgewogICAgICBpZiAoIXByb3ZpZGVyc1tuYW1lXSAmJiBuYW1lLmluZGV4T2YoJy4nKSAhPT0gLTEpIHsKICAgICAgICBjb25zdCBwYXJ0cyA9IG5hbWUuc3BsaXQoJy4nKTsKICAgICAgICBsZXQgcGl2b3QgPSBnZXQocGFydHMuc2hpZnQoKSk7CgogICAgICAgIHdoaWxlIChwYXJ0cy5sZW5ndGgpIHsKICAgICAgICAgIHBpdm90ID0gcGl2b3RbcGFydHMuc2hpZnQoKV07CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gcGl2b3Q7CiAgICAgIH0KCiAgICAgIGlmIChoYXNPd25Qcm9wKGluc3RhbmNlcywgbmFtZSkpIHsKICAgICAgICByZXR1cm4gaW5zdGFuY2VzW25hbWVdOwogICAgICB9CgogICAgICBpZiAoaGFzT3duUHJvcChwcm92aWRlcnMsIG5hbWUpKSB7CiAgICAgICAgaWYgKGN1cnJlbnRseVJlc29sdmluZy5pbmRleE9mKG5hbWUpICE9PSAtMSkgewogICAgICAgICAgY3VycmVudGx5UmVzb2x2aW5nLnB1c2gobmFtZSk7CiAgICAgICAgICB0aHJvdyBlcnJvcignQ2Fubm90IHJlc29sdmUgY2lyY3VsYXIgZGVwZW5kZW5jeSEnKTsKICAgICAgICB9CgogICAgICAgIGN1cnJlbnRseVJlc29sdmluZy5wdXNoKG5hbWUpOwogICAgICAgIGluc3RhbmNlc1tuYW1lXSA9IHByb3ZpZGVyc1tuYW1lXVswXShwcm92aWRlcnNbbmFtZV1bMV0pOwogICAgICAgIGN1cnJlbnRseVJlc29sdmluZy5wb3AoKTsKCiAgICAgICAgcmV0dXJuIGluc3RhbmNlc1tuYW1lXTsKICAgICAgfQoKICAgICAgcmV0dXJuIHBhcmVudC5nZXQobmFtZSwgc3RyaWN0KTsKICAgIH0KCiAgICBmdW5jdGlvbiBmbkRlZihmbiwgbG9jYWxzKSB7CgogICAgICBpZiAodHlwZW9mIGxvY2FscyA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICBsb2NhbHMgPSB7fTsKICAgICAgfQoKICAgICAgaWYgKHR5cGVvZiBmbiAhPT0gJ2Z1bmN0aW9uJykgewogICAgICAgIGlmIChpc0FycmF5KGZuKSkgewogICAgICAgICAgZm4gPSBhbm5vdGF0ZShmbi5zbGljZSgpKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhyb3cgZXJyb3IoYENhbm5vdCBpbnZva2UgIiR7IGZuIH0iLiBFeHBlY3RlZCBhIGZ1bmN0aW9uIWApOwogICAgICAgIH0KICAgICAgfQoKICAgICAgY29uc3QgaW5qZWN0ID0gZm4uJGluamVjdCB8fCBwYXJzZUFubm90YXRpb25zKGZuKTsKICAgICAgY29uc3QgZGVwZW5kZW5jaWVzID0gaW5qZWN0Lm1hcChkZXAgPT4gewogICAgICAgIGlmIChoYXNPd25Qcm9wKGxvY2FscywgZGVwKSkgewogICAgICAgICAgcmV0dXJuIGxvY2Fsc1tkZXBdOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gZ2V0KGRlcCk7CiAgICAgICAgfQogICAgICB9KTsKCiAgICAgIHJldHVybiB7CiAgICAgICAgZm46IGZuLAogICAgICAgIGRlcGVuZGVuY2llczogZGVwZW5kZW5jaWVzCiAgICAgIH07CiAgICB9CgogICAgZnVuY3Rpb24gaW5zdGFudGlhdGUoVHlwZSkgewogICAgICBjb25zdCB7CiAgICAgICAgZm4sCiAgICAgICAgZGVwZW5kZW5jaWVzCiAgICAgIH0gPSBmbkRlZihUeXBlKTsKCiAgICAgIC8vIGluc3RhbnRpYXRlIHZhciBhcmdzIGNvbnN0cnVjdG9yCiAgICAgIGNvbnN0IENvbnN0cnVjdG9yID0gRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuYXBwbHkoZm4sIFsgbnVsbCBdLmNvbmNhdChkZXBlbmRlbmNpZXMpKTsKCiAgICAgIHJldHVybiBuZXcgQ29uc3RydWN0b3IoKTsKICAgIH0KCiAgICBmdW5jdGlvbiBpbnZva2UoZnVuYywgY29udGV4dCwgbG9jYWxzKSB7CiAgICAgIGNvbnN0IHsKICAgICAgICBmbiwKICAgICAgICBkZXBlbmRlbmNpZXMKICAgICAgfSA9IGZuRGVmKGZ1bmMsIGxvY2Fscyk7CgogICAgICByZXR1cm4gZm4uYXBwbHkoY29udGV4dCwgZGVwZW5kZW5jaWVzKTsKICAgIH0KCiAgICAvKioKICAgICAqIEBwYXJhbSB7SW5qZWN0b3J9IGNoaWxkSW5qZWN0b3IKICAgICAqCiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0KICAgICAqLwogICAgZnVuY3Rpb24gY3JlYXRlUHJpdmF0ZUluamVjdG9yRmFjdG9yeShjaGlsZEluamVjdG9yKSB7CiAgICAgIHJldHVybiBhbm5vdGF0ZShrZXkgPT4gY2hpbGRJbmplY3Rvci5nZXQoa2V5KSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBAcGFyYW0ge01vZHVsZURlZmluaXRpb25bXX0gbW9kdWxlcwogICAgICogQHBhcmFtIHtzdHJpbmdbXX0gW2ZvcmNlTmV3SW5zdGFuY2VzXQogICAgICoKICAgICAqIEByZXR1cm4ge0luamVjdG9yfQogICAgICovCiAgICBmdW5jdGlvbiBjcmVhdGVDaGlsZChtb2R1bGVzLCBmb3JjZU5ld0luc3RhbmNlcykgewogICAgICBpZiAoZm9yY2VOZXdJbnN0YW5jZXMgJiYgZm9yY2VOZXdJbnN0YW5jZXMubGVuZ3RoKSB7CiAgICAgICAgY29uc3QgZnJvbVBhcmVudE1vZHVsZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7CiAgICAgICAgY29uc3QgbWF0Y2hlZFNjb3BlcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7CgogICAgICAgIGNvbnN0IHByaXZhdGVJbmplY3RvcnNDYWNoZSA9IFtdOwogICAgICAgIGNvbnN0IHByaXZhdGVDaGlsZEluamVjdG9ycyA9IFtdOwogICAgICAgIGNvbnN0IHByaXZhdGVDaGlsZEZhY3RvcmllcyA9IFtdOwoKICAgICAgICBsZXQgcHJvdmlkZXI7CiAgICAgICAgbGV0IGNhY2hlSWR4OwogICAgICAgIGxldCBwcml2YXRlQ2hpbGRJbmplY3RvcjsKICAgICAgICBsZXQgcHJpdmF0ZUNoaWxkSW5qZWN0b3JGYWN0b3J5OwoKICAgICAgICBmb3IgKGxldCBuYW1lIGluIHByb3ZpZGVycykgewogICAgICAgICAgcHJvdmlkZXIgPSBwcm92aWRlcnNbbmFtZV07CgogICAgICAgICAgaWYgKGZvcmNlTmV3SW5zdGFuY2VzLmluZGV4T2YobmFtZSkgIT09IC0xKSB7CiAgICAgICAgICAgIGlmIChwcm92aWRlclsyXSA9PT0gJ3ByaXZhdGUnKSB7CiAgICAgICAgICAgICAgY2FjaGVJZHggPSBwcml2YXRlSW5qZWN0b3JzQ2FjaGUuaW5kZXhPZihwcm92aWRlclszXSk7CiAgICAgICAgICAgICAgaWYgKGNhY2hlSWR4ID09PSAtMSkgewogICAgICAgICAgICAgICAgcHJpdmF0ZUNoaWxkSW5qZWN0b3IgPSBwcm92aWRlclszXS5jcmVhdGVDaGlsZChbXSwgZm9yY2VOZXdJbnN0YW5jZXMpOwogICAgICAgICAgICAgICAgcHJpdmF0ZUNoaWxkSW5qZWN0b3JGYWN0b3J5ID0gY3JlYXRlUHJpdmF0ZUluamVjdG9yRmFjdG9yeShwcml2YXRlQ2hpbGRJbmplY3Rvcik7CiAgICAgICAgICAgICAgICBwcml2YXRlSW5qZWN0b3JzQ2FjaGUucHVzaChwcm92aWRlclszXSk7CiAgICAgICAgICAgICAgICBwcml2YXRlQ2hpbGRJbmplY3RvcnMucHVzaChwcml2YXRlQ2hpbGRJbmplY3Rvcik7CiAgICAgICAgICAgICAgICBwcml2YXRlQ2hpbGRGYWN0b3JpZXMucHVzaChwcml2YXRlQ2hpbGRJbmplY3RvckZhY3RvcnkpOwogICAgICAgICAgICAgICAgZnJvbVBhcmVudE1vZHVsZVtuYW1lXSA9IFsgcHJpdmF0ZUNoaWxkSW5qZWN0b3JGYWN0b3J5LCBuYW1lLCAncHJpdmF0ZScsIHByaXZhdGVDaGlsZEluamVjdG9yIF07CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGZyb21QYXJlbnRNb2R1bGVbbmFtZV0gPSBbIHByaXZhdGVDaGlsZEZhY3Rvcmllc1tjYWNoZUlkeF0sIG5hbWUsICdwcml2YXRlJywgcHJpdmF0ZUNoaWxkSW5qZWN0b3JzW2NhY2hlSWR4XSBdOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBmcm9tUGFyZW50TW9kdWxlW25hbWVdID0gWyBwcm92aWRlclsyXSwgcHJvdmlkZXJbMV0gXTsKICAgICAgICAgICAgfQogICAgICAgICAgICBtYXRjaGVkU2NvcGVzW25hbWVdID0gdHJ1ZTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoKHByb3ZpZGVyWzJdID09PSAnZmFjdG9yeScgfHwgcHJvdmlkZXJbMl0gPT09ICd0eXBlJykgJiYgcHJvdmlkZXJbMV0uJHNjb3BlKSB7CiAgICAgICAgICAgIC8qIGpzaGludCAtVzA4MyAqLwogICAgICAgICAgICBmb3JjZU5ld0luc3RhbmNlcy5mb3JFYWNoKHNjb3BlID0+IHsKICAgICAgICAgICAgICBpZiAocHJvdmlkZXJbMV0uJHNjb3BlLmluZGV4T2Yoc2NvcGUpICE9PSAtMSkgewogICAgICAgICAgICAgICAgZnJvbVBhcmVudE1vZHVsZVtuYW1lXSA9IFsgcHJvdmlkZXJbMl0sIHByb3ZpZGVyWzFdIF07CiAgICAgICAgICAgICAgICBtYXRjaGVkU2NvcGVzW3Njb3BlXSA9IHRydWU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZvcmNlTmV3SW5zdGFuY2VzLmZvckVhY2goc2NvcGUgPT4gewogICAgICAgICAgaWYgKCFtYXRjaGVkU2NvcGVzW3Njb3BlXSkgewogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHByb3ZpZGVyIGZvciAiJyArIHNjb3BlICsgJyIuIENhbm5vdCB1c2UgcHJvdmlkZXIgZnJvbSB0aGUgcGFyZW50IScpOwogICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICBtb2R1bGVzLnVuc2hpZnQoZnJvbVBhcmVudE1vZHVsZSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBuZXcgSW5qZWN0b3IobW9kdWxlcywgc2VsZik7CiAgICB9CgogICAgY29uc3QgZmFjdG9yeU1hcCA9IHsKICAgICAgZmFjdG9yeTogaW52b2tlLAogICAgICB0eXBlOiBpbnN0YW50aWF0ZSwKICAgICAgdmFsdWU6IGZ1bmN0aW9uKHZhbHVlKSB7CiAgICAgICAgcmV0dXJuIHZhbHVlOwogICAgICB9CiAgICB9OwoKICAgIC8qKgogICAgICogQHBhcmFtIHtNb2R1bGVEZWZpbml0aW9ufSBtb2R1bGVEZWZpbml0aW9uCiAgICAgKiBAcGFyYW0ge0luamVjdG9yfSBpbmplY3RvcgogICAgICovCiAgICBmdW5jdGlvbiBjcmVhdGVJbml0aWFsaXplcihtb2R1bGVEZWZpbml0aW9uLCBpbmplY3RvcikgewoKICAgICAgY29uc3QgaW5pdGlhbGl6ZXJzID0gbW9kdWxlRGVmaW5pdGlvbi5fX2luaXRfXyB8fCBbXTsKCiAgICAgIHJldHVybiBmdW5jdGlvbigpIHsKICAgICAgICBpbml0aWFsaXplcnMuZm9yRWFjaChpbml0aWFsaXplciA9PiB7CgogICAgICAgICAgLy8gZWFnZXJseSByZXNvbHZlIGNvbXBvbmVudCAoZm4gb3Igc3RyaW5nKQogICAgICAgICAgaWYgKHR5cGVvZiBpbml0aWFsaXplciA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgICAgaW5qZWN0b3IuZ2V0KGluaXRpYWxpemVyKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGluamVjdG9yLmludm9rZShpbml0aWFsaXplcik7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH07CiAgICB9CgogICAgLyoqCiAgICAgKiBAcGFyYW0ge01vZHVsZURlZmluaXRpb259IG1vZHVsZURlZmluaXRpb24KICAgICAqLwogICAgZnVuY3Rpb24gbG9hZE1vZHVsZShtb2R1bGVEZWZpbml0aW9uKSB7CgogICAgICBjb25zdCBtb2R1bGVFeHBvcnRzID0gbW9kdWxlRGVmaW5pdGlvbi5fX2V4cG9ydHNfXzsKCiAgICAgIC8vIHByaXZhdGUgbW9kdWxlCiAgICAgIGlmIChtb2R1bGVFeHBvcnRzKSB7CiAgICAgICAgY29uc3QgbmVzdGVkTW9kdWxlcyA9IG1vZHVsZURlZmluaXRpb24uX19tb2R1bGVzX187CgogICAgICAgIGNvbnN0IGNsb25lZE1vZHVsZSA9IE9iamVjdC5rZXlzKG1vZHVsZURlZmluaXRpb24pLnJlZHVjZSgoY2xvbmVkTW9kdWxlLCBrZXkpID0+IHsKCiAgICAgICAgICBpZiAoa2V5ICE9PSAnX19leHBvcnRzX18nICYmIGtleSAhPT0gJ19fbW9kdWxlc19fJyAmJiBrZXkgIT09ICdfX2luaXRfXycgJiYga2V5ICE9PSAnX19kZXBlbmRzX18nKSB7CiAgICAgICAgICAgIGNsb25lZE1vZHVsZVtrZXldID0gbW9kdWxlRGVmaW5pdGlvbltrZXldOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBjbG9uZWRNb2R1bGU7CiAgICAgICAgfSwgT2JqZWN0LmNyZWF0ZShudWxsKSk7CgogICAgICAgIGNvbnN0IGNoaWxkTW9kdWxlcyA9IChuZXN0ZWRNb2R1bGVzIHx8IFtdKS5jb25jYXQoY2xvbmVkTW9kdWxlKTsKCiAgICAgICAgY29uc3QgcHJpdmF0ZUluamVjdG9yID0gY3JlYXRlQ2hpbGQoY2hpbGRNb2R1bGVzKTsKICAgICAgICBjb25zdCBnZXRGcm9tUHJpdmF0ZUluamVjdG9yID0gYW5ub3RhdGUoZnVuY3Rpb24oa2V5KSB7CiAgICAgICAgICByZXR1cm4gcHJpdmF0ZUluamVjdG9yLmdldChrZXkpOwogICAgICAgIH0pOwoKICAgICAgICBtb2R1bGVFeHBvcnRzLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7CiAgICAgICAgICBwcm92aWRlcnNba2V5XSA9IFsgZ2V0RnJvbVByaXZhdGVJbmplY3Rvciwga2V5LCAncHJpdmF0ZScsIHByaXZhdGVJbmplY3RvciBdOwogICAgICAgIH0pOwoKICAgICAgICAvLyBlbnN1cmUgY2hpbGQgaW5qZWN0b3IgaW5pdGlhbGl6ZXMKICAgICAgICBjb25zdCBpbml0aWFsaXplcnMgPSAobW9kdWxlRGVmaW5pdGlvbi5fX2luaXRfXyB8fCBbXSkuc2xpY2UoKTsKCiAgICAgICAgaW5pdGlhbGl6ZXJzLnVuc2hpZnQoZnVuY3Rpb24oKSB7CiAgICAgICAgICBwcml2YXRlSW5qZWN0b3IuaW5pdCgpOwogICAgICAgIH0pOwoKICAgICAgICBtb2R1bGVEZWZpbml0aW9uID0gT2JqZWN0LmFzc2lnbih7fSwgbW9kdWxlRGVmaW5pdGlvbiwgewogICAgICAgICAgX19pbml0X186IGluaXRpYWxpemVycwogICAgICAgIH0pOwoKICAgICAgICByZXR1cm4gY3JlYXRlSW5pdGlhbGl6ZXIobW9kdWxlRGVmaW5pdGlvbiwgcHJpdmF0ZUluamVjdG9yKTsKICAgICAgfQoKICAgICAgLy8gbm9ybWFsIG1vZHVsZQogICAgICBPYmplY3Qua2V5cyhtb2R1bGVEZWZpbml0aW9uKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkgewoKICAgICAgICBpZiAoa2V5ID09PSAnX19pbml0X18nIHx8IGtleSA9PT0gJ19fZGVwZW5kc19fJykgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgaWYgKG1vZHVsZURlZmluaXRpb25ba2V5XVsyXSA9PT0gJ3ByaXZhdGUnKSB7CiAgICAgICAgICBwcm92aWRlcnNba2V5XSA9IG1vZHVsZURlZmluaXRpb25ba2V5XTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGNvbnN0IHR5cGUgPSBtb2R1bGVEZWZpbml0aW9uW2tleV1bMF07CiAgICAgICAgY29uc3QgdmFsdWUgPSBtb2R1bGVEZWZpbml0aW9uW2tleV1bMV07CgogICAgICAgIHByb3ZpZGVyc1trZXldID0gWyBmYWN0b3J5TWFwW3R5cGVdLCBhcnJheVVud3JhcCh0eXBlLCB2YWx1ZSksIHR5cGUgXTsKICAgICAgfSk7CgogICAgICByZXR1cm4gY3JlYXRlSW5pdGlhbGl6ZXIobW9kdWxlRGVmaW5pdGlvbiwgc2VsZik7CiAgICB9CgogICAgLyoqCiAgICAgKiBAcGFyYW0ge01vZHVsZURlZmluaXRpb25bXX0gbW9kdWxlRGVmaW5pdGlvbnMKICAgICAqIEBwYXJhbSB7TW9kdWxlRGVmaW5pdGlvbn0gbW9kdWxlRGVmaW5pdGlvbgogICAgICoKICAgICAqIEByZXR1cm4ge01vZHVsZURlZmluaXRpb25bXX0KICAgICAqLwogICAgZnVuY3Rpb24gcmVzb2x2ZURlcGVuZGVuY2llcyhtb2R1bGVEZWZpbml0aW9ucywgbW9kdWxlRGVmaW5pdGlvbikgewoKICAgICAgaWYgKG1vZHVsZURlZmluaXRpb25zLmluZGV4T2YobW9kdWxlRGVmaW5pdGlvbikgIT09IC0xKSB7CiAgICAgICAgcmV0dXJuIG1vZHVsZURlZmluaXRpb25zOwogICAgICB9CgogICAgICBtb2R1bGVEZWZpbml0aW9ucyA9IChtb2R1bGVEZWZpbml0aW9uLl9fZGVwZW5kc19fIHx8IFtdKS5yZWR1Y2UocmVzb2x2ZURlcGVuZGVuY2llcywgbW9kdWxlRGVmaW5pdGlvbnMpOwoKICAgICAgaWYgKG1vZHVsZURlZmluaXRpb25zLmluZGV4T2YobW9kdWxlRGVmaW5pdGlvbikgIT09IC0xKSB7CiAgICAgICAgcmV0dXJuIG1vZHVsZURlZmluaXRpb25zOwogICAgICB9CgogICAgICByZXR1cm4gbW9kdWxlRGVmaW5pdGlvbnMuY29uY2F0KG1vZHVsZURlZmluaXRpb24pOwogICAgfQoKICAgIC8qKgogICAgICogQHBhcmFtIHtNb2R1bGVEZWZpbml0aW9uW119IG1vZHVsZURlZmluaXRpb25zCiAgICAgKgogICAgICogQHJldHVybiB7ICgpID0+IHZvaWQgfSBpbml0aWFsaXplckZuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGJvb3RzdHJhcChtb2R1bGVEZWZpbml0aW9ucykgewoKICAgICAgY29uc3QgaW5pdGlhbGl6ZXJzID0gbW9kdWxlRGVmaW5pdGlvbnMKICAgICAgICAucmVkdWNlKHJlc29sdmVEZXBlbmRlbmNpZXMsIFtdKQogICAgICAgIC5tYXAobG9hZE1vZHVsZSk7CgogICAgICBsZXQgaW5pdGlhbGl6ZWQgPSBmYWxzZTsKCiAgICAgIHJldHVybiBmdW5jdGlvbigpIHsKCiAgICAgICAgaWYgKGluaXRpYWxpemVkKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBpbml0aWFsaXplZCA9IHRydWU7CgogICAgICAgIGluaXRpYWxpemVycy5mb3JFYWNoKGluaXRpYWxpemVyID0+IGluaXRpYWxpemVyKCkpOwogICAgICB9OwogICAgfQoKICAgIC8vIHB1YmxpYyBBUEkKICAgIHRoaXMuZ2V0ID0gZ2V0OwogICAgdGhpcy5pbnZva2UgPSBpbnZva2U7CiAgICB0aGlzLmluc3RhbnRpYXRlID0gaW5zdGFudGlhdGU7CiAgICB0aGlzLmNyZWF0ZUNoaWxkID0gY3JlYXRlQ2hpbGQ7CgogICAgLy8gc2V0dXAKICAgIHRoaXMuaW5pdCA9IGJvb3RzdHJhcChtb2R1bGVzKTsKICB9CgoKICAvLyBoZWxwZXJzIC8vLy8vLy8vLy8vLy8vLwoKICBmdW5jdGlvbiBhcnJheVVud3JhcCh0eXBlLCB2YWx1ZSkgewogICAgaWYgKHR5cGUgIT09ICd2YWx1ZScgJiYgaXNBcnJheSh2YWx1ZSkpIHsKICAgICAgdmFsdWUgPSBhbm5vdGF0ZSh2YWx1ZS5zbGljZSgpKTsKICAgIH0KCiAgICByZXR1cm4gdmFsdWU7CiAgfQoKICAvKioKICAgKiBAdHlwZWRlZiB7b2JqZWN0fSBDb25kaXRpb24KICAgKiBAcHJvcGVydHkge3N0cmluZ30gW2hpZGVdCiAgICovCgogIGNsYXNzIENvbmRpdGlvbkNoZWNrZXIgewogICAgY29uc3RydWN0b3IoZm9ybUZpZWxkUmVnaXN0cnksIGV2ZW50QnVzKSB7CiAgICAgIHRoaXMuX2Zvcm1GaWVsZFJlZ2lzdHJ5ID0gZm9ybUZpZWxkUmVnaXN0cnk7CiAgICAgIHRoaXMuX2V2ZW50QnVzID0gZXZlbnRCdXM7CiAgICB9CgogICAgLyoqCiAgICAgKiBGb3IgZ2l2ZW4gZGF0YSwgcmVtb3ZlIHByb3BlcnRpZXMgYmFzZWQgb24gY29uZGl0aW9uLgogICAgICoKICAgICAqIEBwYXJhbSB7T2JqZWN0PHN0cmluZywgYW55Pn0gcHJvcGVydGllcwogICAgICogQHBhcmFtIHtPYmplY3Q8c3RyaW5nLCBhbnk+fSBkYXRhCiAgICAgKi8KICAgIGFwcGx5Q29uZGl0aW9ucyhwcm9wZXJ0aWVzLCBkYXRhID0ge30pIHsKICAgICAgY29uc3QgY29uZGl0aW9ucyA9IHRoaXMuX2dldENvbmRpdGlvbnMoKTsKICAgICAgY29uc3QgbmV3UHJvcGVydGllcyA9IHsKICAgICAgICAuLi5wcm9wZXJ0aWVzCiAgICAgIH07CiAgICAgIGZvciAoY29uc3QgewogICAgICAgIGtleSwKICAgICAgICBjb25kaXRpb24KICAgICAgfSBvZiBjb25kaXRpb25zKSB7CiAgICAgICAgY29uc3Qgc2hvdWxkUmVtb3ZlID0gdGhpcy5fY2hlY2tIaWRlQ29uZGl0aW9uKGNvbmRpdGlvbiwgZGF0YSk7CiAgICAgICAgaWYgKHNob3VsZFJlbW92ZSkgewogICAgICAgICAgZGVsZXRlIG5ld1Byb3BlcnRpZXNba2V5XTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIG5ld1Byb3BlcnRpZXM7CiAgICB9CgogICAgLyoqCiAgICAgKiBDaGVjayBpZiBnaXZlbiBjb25kaXRpb24gaXMgbWV0LiBSZXR1cm5zIG51bGwgZm9yIGludmFsaWQvbWlzc2luZyBjb25kaXRpb25zLgogICAgICoKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjb25kaXRpb24KICAgICAqIEBwYXJhbSB7aW1wb3J0KCcuLi90eXBlcycpLkRhdGF9IFtkYXRhXQogICAgICoKICAgICAqIEByZXR1cm5zIHtib29sZWFufG51bGx9CiAgICAgKi8KICAgIGNoZWNrKGNvbmRpdGlvbiwgZGF0YSA9IHt9KSB7CiAgICAgIGlmICghY29uZGl0aW9uKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KICAgICAgaWYgKCFpc1N0cmluZyQyKGNvbmRpdGlvbikgfHwgIWNvbmRpdGlvbi5zdGFydHNXaXRoKCc9JykpIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQogICAgICB0cnkgewogICAgICAgIC8vIGN1dCBvZmYgaW5pdGlhbCAnPScKICAgICAgICBjb25zdCByZXN1bHQgPSB1bmFyeVRlc3QoY29uZGl0aW9uLnNsaWNlKDEpLCBkYXRhKTsKICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIHRoaXMuX2V2ZW50QnVzLmZpcmUoJ2Vycm9yJywgewogICAgICAgICAgZXJyb3IKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogQ2hlY2sgaWYgaGlkZSBjb25kaXRpb24gaXMgbWV0LgogICAgICoKICAgICAqIEBwYXJhbSB7Q29uZGl0aW9ufSBjb25kaXRpb24KICAgICAqIEBwYXJhbSB7T2JqZWN0PHN0cmluZywgYW55Pn0gZGF0YQogICAgICogQHJldHVybnMge2Jvb2xlYW59CiAgICAgKi8KICAgIF9jaGVja0hpZGVDb25kaXRpb24oY29uZGl0aW9uLCBkYXRhKSB7CiAgICAgIGlmICghY29uZGl0aW9uLmhpZGUpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5jaGVjayhjb25kaXRpb24uaGlkZSwgZGF0YSk7CiAgICAgIHJldHVybiByZXN1bHQgPT09IHRydWU7CiAgICB9CgogICAgLyoqCiAgICAgKiBFdmFsdWF0ZSBhbiBleHByZXNzaW9uLgogICAgICoKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBleHByZXNzaW9uCiAgICAgKiBAcGFyYW0ge2ltcG9ydCgnLi4vdHlwZXMnKS5EYXRhfSBbZGF0YV0KICAgICAqCiAgICAgKiBAcmV0dXJucyB7YW55fQogICAgICovCiAgICBldmFsdWF0ZShleHByZXNzaW9uLCBkYXRhID0ge30pIHsKICAgICAgaWYgKCFleHByZXNzaW9uKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KICAgICAgaWYgKCFpc1N0cmluZyQyKGV4cHJlc3Npb24pIHx8ICFleHByZXNzaW9uLnN0YXJ0c1dpdGgoJz0nKSkgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgcmVzdWx0ID0gZXZhbHVhdGUoZXhwcmVzc2lvbi5zbGljZSgxKSwgZGF0YSk7CiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICB0aGlzLl9ldmVudEJ1cy5maXJlKCdlcnJvcicsIHsKICAgICAgICAgIGVycm9yCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KICAgIH0KICAgIF9nZXRDb25kaXRpb25zKCkgewogICAgICBjb25zdCBmb3JtRmllbGRzID0gdGhpcy5fZm9ybUZpZWxkUmVnaXN0cnkuZ2V0QWxsKCk7CiAgICAgIHJldHVybiBmb3JtRmllbGRzLnJlZHVjZSgoY29uZGl0aW9ucywgZm9ybUZpZWxkKSA9PiB7CiAgICAgICAgY29uc3QgewogICAgICAgICAga2V5LAogICAgICAgICAgY29uZGl0aW9uYWw6IGNvbmRpdGlvbgogICAgICAgIH0gPSBmb3JtRmllbGQ7CiAgICAgICAgaWYgKGtleSAmJiBjb25kaXRpb24pIHsKICAgICAgICAgIHJldHVybiBbLi4uY29uZGl0aW9ucywgewogICAgICAgICAgICBrZXksCiAgICAgICAgICAgIGNvbmRpdGlvbgogICAgICAgICAgfV07CiAgICAgICAgfQogICAgICAgIHJldHVybiBjb25kaXRpb25zOwogICAgICB9LCBbXSk7CiAgICB9CiAgfQogIENvbmRpdGlvbkNoZWNrZXIuJGluamVjdCA9IFsnZm9ybUZpZWxkUmVnaXN0cnknLCAnZXZlbnRCdXMnXTsKCiAgdmFyIEZOX1JFRiA9ICdfX2ZuJzsKICB2YXIgREVGQVVMVF9QUklPUklUWSA9IDEwMDA7CiAgdmFyIHNsaWNlID0gQXJyYXkucHJvdG90eXBlLnNsaWNlOwoKICAvKioKICAgKiBBIGdlbmVyYWwgcHVycG9zZSBldmVudCBidXMuCiAgICoKICAgKiBUaGlzIGNvbXBvbmVudCBpcyB1c2VkIHRvIGNvbW11bmljYXRlIGFjcm9zcyBhIGRpYWdyYW0gaW5zdGFuY2UuCiAgICogT3RoZXIgcGFydHMgb2YgYSBkaWFncmFtIGNhbiB1c2UgaXQgdG8gbGlzdGVuIHRvIGFuZCBicm9hZGNhc3QgZXZlbnRzLgogICAqCiAgICoKICAgKiAjIyBSZWdpc3RlcmluZyBmb3IgRXZlbnRzCiAgICoKICAgKiBUaGUgZXZlbnQgYnVzIHByb3ZpZGVzIHRoZSB7QGxpbmsgRXZlbnRCdXMjb259IGFuZCB7QGxpbmsgRXZlbnRCdXMjb25jZX0KICAgKiBtZXRob2RzIHRvIHJlZ2lzdGVyIGZvciBldmVudHMuIHtAbGluayBFdmVudEJ1cyNvZmZ9IGNhbiBiZSB1c2VkIHRvCiAgICogcmVtb3ZlIGV2ZW50IHJlZ2lzdHJhdGlvbnMuIExpc3RlbmVycyByZWNlaXZlIGFuIGluc3RhbmNlIG9mIHtAbGluayBFdmVudH0KICAgKiBhcyB0aGUgZmlyc3QgYXJndW1lbnQuIEl0IGFsbG93cyB0aGVtIHRvIGhvb2sgaW50byB0aGUgZXZlbnQgZXhlY3V0aW9uLgogICAqCiAgICogYGBgamF2YXNjcmlwdAogICAqCiAgICogLy8gbGlzdGVuIGZvciBldmVudAogICAqIGV2ZW50QnVzLm9uKCdmb28nLCBmdW5jdGlvbihldmVudCkgewogICAqCiAgICogICAvLyBhY2Nlc3MgZXZlbnQgdHlwZQogICAqICAgZXZlbnQudHlwZTsgLy8gJ2ZvbycKICAgKgogICAqICAgLy8gc3RvcCBwcm9wYWdhdGlvbiB0byBvdGhlciBsaXN0ZW5lcnMKICAgKiAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwogICAqCiAgICogICAvLyBwcmV2ZW50IGV2ZW50IGRlZmF1bHQKICAgKiAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICogfSk7CiAgICoKICAgKiAvLyBsaXN0ZW4gZm9yIGV2ZW50IHdpdGggY3VzdG9tIHBheWxvYWQKICAgKiBldmVudEJ1cy5vbignYmFyJywgZnVuY3Rpb24oZXZlbnQsIHBheWxvYWQpIHsKICAgKiAgIGNvbnNvbGUubG9nKHBheWxvYWQpOwogICAqIH0pOwogICAqCiAgICogLy8gbGlzdGVuIGZvciBldmVudCByZXR1cm5pbmcgdmFsdWUKICAgKiBldmVudEJ1cy5vbignZm9vYmFyJywgZnVuY3Rpb24oZXZlbnQpIHsKICAgKgogICAqICAgLy8gc3RvcCBldmVudCBwcm9wYWdhdGlvbiArIHByZXZlbnQgZGVmYXVsdAogICAqICAgcmV0dXJuIGZhbHNlOwogICAqCiAgICogICAvLyBzdG9wIGV2ZW50IHByb3BhZ2F0aW9uICsgcmV0dXJuIGN1c3RvbSByZXN1bHQKICAgKiAgIHJldHVybiB7CiAgICogICAgIGNvbXBsZXg6ICdsaXN0ZW5pbmcgcmVzdWx0JwogICAqICAgfTsKICAgKiB9KTsKICAgKgogICAqCiAgICogLy8gbGlzdGVuIHdpdGggY3VzdG9tIHByaW9yaXR5IChkZWZhdWx0PTEwMDAsIGhpZ2hlciBpcyBiZXR0ZXIpCiAgICogZXZlbnRCdXMub24oJ3ByaW9yaXR5Zm9vJywgMTUwMCwgZnVuY3Rpb24oZXZlbnQpIHsKICAgKiAgIGNvbnNvbGUubG9nKCdpbnZva2VkIGZpcnN0IScpOwogICAqIH0pOwogICAqCiAgICoKICAgKiAvLyBsaXN0ZW4gZm9yIGV2ZW50IGFuZCBwYXNzIHRoZSBjb250ZXh0IChgdGhpc2ApCiAgICogZXZlbnRCdXMub24oJ2Zvb2JhcicsIGZ1bmN0aW9uKGV2ZW50KSB7CiAgICogICB0aGlzLmZvbygpOwogICAqIH0sIHRoaXMpOwogICAqIGBgYAogICAqCiAgICoKICAgKiAjIyBFbWl0dGluZyBFdmVudHMKICAgKgogICAqIEV2ZW50cyBjYW4gYmUgZW1pdHRlZCB2aWEgdGhlIGV2ZW50IGJ1cyB1c2luZyB7QGxpbmsgRXZlbnRCdXMjZmlyZX0uCiAgICoKICAgKiBgYGBqYXZhc2NyaXB0CiAgICoKICAgKiAvLyBmYWxzZSBpbmRpY2F0ZXMgdGhhdCB0aGUgZGVmYXVsdCBhY3Rpb24KICAgKiAvLyB3YXMgcHJldmVudGVkIGJ5IGxpc3RlbmVycwogICAqIGlmIChldmVudEJ1cy5maXJlKCdmb28nKSA9PT0gZmFsc2UpIHsKICAgKiAgIGNvbnNvbGUubG9nKCdkZWZhdWx0IGhhcyBiZWVuIHByZXZlbnRlZCEnKTsKICAgKiB9OwogICAqCiAgICoKICAgKiAvLyBjdXN0b20gYXJncyArIHJldHVybiB2YWx1ZSBsaXN0ZW5lcgogICAqIGV2ZW50QnVzLm9uKCdzdW0nLCBmdW5jdGlvbihldmVudCwgYSwgYikgewogICAqICAgcmV0dXJuIGEgKyBiOwogICAqIH0pOwogICAqCiAgICogLy8geW91IGNhbiBwYXNzIGN1c3RvbSBhcmd1bWVudHMgKyByZXRyaWV2ZSByZXN1bHQgdmFsdWVzLgogICAqIHZhciBzdW0gPSBldmVudEJ1cy5maXJlKCdzdW0nLCAxLCAyKTsKICAgKiBjb25zb2xlLmxvZyhzdW0pOyAvLyAzCiAgICogYGBgCiAgICovCiAgZnVuY3Rpb24gRXZlbnRCdXMoKSB7CiAgICB0aGlzLl9saXN0ZW5lcnMgPSB7fTsKCiAgICAvLyBjbGVhbnVwIG9uIGRlc3Ryb3kgb24gbG93ZXN0IHByaW9yaXR5IHRvIGFsbG93CiAgICAvLyBtZXNzYWdlIHBhc3NpbmcgdW50aWwgdGhlIGJpdHRlciBlbmQKICAgIHRoaXMub24oJ2RpYWdyYW0uZGVzdHJveScsIDEsIHRoaXMuX2Rlc3Ryb3ksIHRoaXMpOwogIH0KCiAgLyoqCiAgICogUmVnaXN0ZXIgYW4gZXZlbnQgbGlzdGVuZXIgZm9yIGV2ZW50cyB3aXRoIHRoZSBnaXZlbiBuYW1lLgogICAqCiAgICogVGhlIGNhbGxiYWNrIHdpbGwgYmUgaW52b2tlZCB3aXRoIGBldmVudCwgLi4uYWRkaXRpb25hbEFyZ3VtZW50c2AKICAgKiB0aGF0IGhhdmUgYmVlbiBwYXNzZWQgdG8ge0BsaW5rIEV2ZW50QnVzI2ZpcmV9LgogICAqCiAgICogUmV0dXJuaW5nIGZhbHNlIGZyb20gYSBsaXN0ZW5lciB3aWxsIHByZXZlbnQgdGhlIGV2ZW50cyBkZWZhdWx0IGFjdGlvbgogICAqIChpZiBhbnkgaXMgc3BlY2lmaWVkKS4gVG8gc3RvcCBhbiBldmVudCBmcm9tIGJlaW5nIHByb2Nlc3NlZCBmdXJ0aGVyIGluCiAgICogb3RoZXIgbGlzdGVuZXJzIGV4ZWN1dGUge0BsaW5rIEV2ZW50I3N0b3BQcm9wYWdhdGlvbn0uCiAgICoKICAgKiBSZXR1cm5pbmcgYW55dGhpbmcgYnV0IGB1bmRlZmluZWRgIGZyb20gYSBsaXN0ZW5lciB3aWxsIHN0b3AgdGhlIGxpc3RlbmVyIHByb3BhZ2F0aW9uLgogICAqCiAgICogQHBhcmFtIHtzdHJpbmd8QXJyYXk8c3RyaW5nPn0gZXZlbnRzCiAgICogQHBhcmFtIHtudW1iZXJ9IFtwcmlvcml0eT0xMDAwXSB0aGUgcHJpb3JpdHkgaW4gd2hpY2ggdGhpcyBsaXN0ZW5lciBpcyBjYWxsZWQsIGxhcmdlciBpcyBoaWdoZXIKICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjawogICAqIEBwYXJhbSB7T2JqZWN0fSBbdGhhdF0gUGFzcyBjb250ZXh0IChgdGhpc2ApIHRvIHRoZSBjYWxsYmFjawogICAqLwogIEV2ZW50QnVzLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uIChldmVudHMsIHByaW9yaXR5LCBjYWxsYmFjaywgdGhhdCkgewogICAgZXZlbnRzID0gaXNBcnJheSQyKGV2ZW50cykgPyBldmVudHMgOiBbZXZlbnRzXTsKICAgIGlmIChpc0Z1bmN0aW9uKHByaW9yaXR5KSkgewogICAgICB0aGF0ID0gY2FsbGJhY2s7CiAgICAgIGNhbGxiYWNrID0gcHJpb3JpdHk7CiAgICAgIHByaW9yaXR5ID0gREVGQVVMVF9QUklPUklUWTsKICAgIH0KICAgIGlmICghaXNOdW1iZXIkMihwcmlvcml0eSkpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdwcmlvcml0eSBtdXN0IGJlIGEgbnVtYmVyJyk7CiAgICB9CiAgICB2YXIgYWN0dWFsQ2FsbGJhY2sgPSBjYWxsYmFjazsKICAgIGlmICh0aGF0KSB7CiAgICAgIGFjdHVhbENhbGxiYWNrID0gYmluZChjYWxsYmFjaywgdGhhdCk7CgogICAgICAvLyBtYWtlIHN1cmUgd2UgcmVtZW1iZXIgYW5kIGFyZSBhYmxlIHRvIHJlbW92ZQogICAgICAvLyBib3VuZCBjYWxsYmFja3MgdmlhIHtAbGluayAjb2ZmfSB1c2luZyB0aGUgb3JpZ2luYWwKICAgICAgLy8gY2FsbGJhY2sKICAgICAgYWN0dWFsQ2FsbGJhY2tbRk5fUkVGXSA9IGNhbGxiYWNrW0ZOX1JFRl0gfHwgY2FsbGJhY2s7CiAgICB9CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICBldmVudHMuZm9yRWFjaChmdW5jdGlvbiAoZSkgewogICAgICBzZWxmLl9hZGRMaXN0ZW5lcihlLCB7CiAgICAgICAgcHJpb3JpdHk6IHByaW9yaXR5LAogICAgICAgIGNhbGxiYWNrOiBhY3R1YWxDYWxsYmFjaywKICAgICAgICBuZXh0OiBudWxsCiAgICAgIH0pOwogICAgfSk7CiAgfTsKCiAgLyoqCiAgICogUmVnaXN0ZXIgYW4gZXZlbnQgbGlzdGVuZXIgdGhhdCBpcyBleGVjdXRlZCBvbmx5IG9uY2UuCiAgICoKICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnQgdGhlIGV2ZW50IG5hbWUgdG8gcmVnaXN0ZXIgZm9yCiAgICogQHBhcmFtIHtudW1iZXJ9IFtwcmlvcml0eT0xMDAwXSB0aGUgcHJpb3JpdHkgaW4gd2hpY2ggdGhpcyBsaXN0ZW5lciBpcyBjYWxsZWQsIGxhcmdlciBpcyBoaWdoZXIKICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayB0aGUgY2FsbGJhY2sgdG8gZXhlY3V0ZQogICAqIEBwYXJhbSB7T2JqZWN0fSBbdGhhdF0gUGFzcyBjb250ZXh0IChgdGhpc2ApIHRvIHRoZSBjYWxsYmFjawogICAqLwogIEV2ZW50QnVzLnByb3RvdHlwZS5vbmNlID0gZnVuY3Rpb24gKGV2ZW50LCBwcmlvcml0eSwgY2FsbGJhY2ssIHRoYXQpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIGlmIChpc0Z1bmN0aW9uKHByaW9yaXR5KSkgewogICAgICB0aGF0ID0gY2FsbGJhY2s7CiAgICAgIGNhbGxiYWNrID0gcHJpb3JpdHk7CiAgICAgIHByaW9yaXR5ID0gREVGQVVMVF9QUklPUklUWTsKICAgIH0KICAgIGlmICghaXNOdW1iZXIkMihwcmlvcml0eSkpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdwcmlvcml0eSBtdXN0IGJlIGEgbnVtYmVyJyk7CiAgICB9CiAgICBmdW5jdGlvbiB3cmFwcGVkQ2FsbGJhY2soKSB7CiAgICAgIHdyYXBwZWRDYWxsYmFjay5fX2lzVG9tYiA9IHRydWU7CiAgICAgIHZhciByZXN1bHQgPSBjYWxsYmFjay5hcHBseSh0aGF0LCBhcmd1bWVudHMpOwogICAgICBzZWxmLm9mZihldmVudCwgd3JhcHBlZENhbGxiYWNrKTsKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KCiAgICAvLyBtYWtlIHN1cmUgd2UgcmVtZW1iZXIgYW5kIGFyZSBhYmxlIHRvIHJlbW92ZQogICAgLy8gYm91bmQgY2FsbGJhY2tzIHZpYSB7QGxpbmsgI29mZn0gdXNpbmcgdGhlIG9yaWdpbmFsCiAgICAvLyBjYWxsYmFjawogICAgd3JhcHBlZENhbGxiYWNrW0ZOX1JFRl0gPSBjYWxsYmFjazsKICAgIHRoaXMub24oZXZlbnQsIHByaW9yaXR5LCB3cmFwcGVkQ2FsbGJhY2spOwogIH07CgogIC8qKgogICAqIFJlbW92ZXMgZXZlbnQgbGlzdGVuZXJzIGJ5IGV2ZW50IGFuZCBjYWxsYmFjay4KICAgKgogICAqIElmIG5vIGNhbGxiYWNrIGlzIGdpdmVuLCBhbGwgbGlzdGVuZXJzIGZvciBhIGdpdmVuIGV2ZW50IG5hbWUgYXJlIGJlaW5nIHJlbW92ZWQuCiAgICoKICAgKiBAcGFyYW0ge3N0cmluZ3xBcnJheTxzdHJpbmc+fSBldmVudHMKICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2FsbGJhY2tdCiAgICovCiAgRXZlbnRCdXMucHJvdG90eXBlLm9mZiA9IGZ1bmN0aW9uIChldmVudHMsIGNhbGxiYWNrKSB7CiAgICBldmVudHMgPSBpc0FycmF5JDIoZXZlbnRzKSA/IGV2ZW50cyA6IFtldmVudHNdOwogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgZXZlbnRzLmZvckVhY2goZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgIHNlbGYuX3JlbW92ZUxpc3RlbmVyKGV2ZW50LCBjYWxsYmFjayk7CiAgICB9KTsKICB9OwoKICAvKioKICAgKiBDcmVhdGUgYW4gRXZlbnRCdXMgZXZlbnQuCiAgICoKICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YQogICAqCiAgICogQHJldHVybiB7T2JqZWN0fSBldmVudCwgcmVjb2duaXplZCBieSB0aGUgZXZlbnRCdXMKICAgKi8KICBFdmVudEJ1cy5wcm90b3R5cGUuY3JlYXRlRXZlbnQgPSBmdW5jdGlvbiAoZGF0YSkgewogICAgdmFyIGV2ZW50ID0gbmV3IEludGVybmFsRXZlbnQoKTsKICAgIGV2ZW50LmluaXQoZGF0YSk7CiAgICByZXR1cm4gZXZlbnQ7CiAgfTsKCiAgLyoqCiAgICogRmlyZXMgYSBuYW1lZCBldmVudC4KICAgKgogICAqIEBleGFtcGxlCiAgICoKICAgKiAvLyBmaXJlIGV2ZW50IGJ5IG5hbWUKICAgKiBldmVudHMuZmlyZSgnZm9vJyk7CiAgICoKICAgKiAvLyBmaXJlIGV2ZW50IG9iamVjdCB3aXRoIG5lc3RlZCB0eXBlCiAgICogdmFyIGV2ZW50ID0geyB0eXBlOiAnZm9vJyB9OwogICAqIGV2ZW50cy5maXJlKGV2ZW50KTsKICAgKgogICAqIC8vIGZpcmUgZXZlbnQgd2l0aCBleHBsaWNpdCB0eXBlCiAgICogdmFyIGV2ZW50ID0geyB4OiAxMCwgeTogMjAgfTsKICAgKiBldmVudHMuZmlyZSgnZWxlbWVudC5tb3ZlZCcsIGV2ZW50KTsKICAgKgogICAqIC8vIHBhc3MgYWRkaXRpb25hbCBhcmd1bWVudHMgdG8gdGhlIGV2ZW50CiAgICogZXZlbnRzLm9uKCdmb28nLCBmdW5jdGlvbihldmVudCwgYmFyKSB7CiAgICogICBhbGVydChiYXIpOwogICAqIH0pOwogICAqCiAgICogZXZlbnRzLmZpcmUoeyB0eXBlOiAnZm9vJyB9LCAnSSBhbSBiYXIhJyk7CiAgICoKICAgKiBAcGFyYW0ge3N0cmluZ30gW25hbWVdIHRoZSBvcHRpb25hbCBldmVudCBuYW1lCiAgICogQHBhcmFtIHtPYmplY3R9IFtldmVudF0gdGhlIGV2ZW50IG9iamVjdAogICAqIEBwYXJhbSB7Li4uT2JqZWN0fSBhZGRpdGlvbmFsIGFyZ3VtZW50cyB0byBiZSBwYXNzZWQgdG8gdGhlIGNhbGxiYWNrIGZ1bmN0aW9ucwogICAqCiAgICogQHJldHVybiB7Ym9vbGVhbn0gdGhlIGV2ZW50cyByZXR1cm4gdmFsdWUsIGlmIHNwZWNpZmllZCBvciBmYWxzZSBpZiB0aGUKICAgKiAgICAgICAgICAgICAgICAgICBkZWZhdWx0IGFjdGlvbiB3YXMgcHJldmVudGVkIGJ5IGxpc3RlbmVycwogICAqLwogIEV2ZW50QnVzLnByb3RvdHlwZS5maXJlID0gZnVuY3Rpb24gKHR5cGUsIGRhdGEpIHsKICAgIHZhciBldmVudCwgZmlyc3RMaXN0ZW5lciwgcmV0dXJuVmFsdWUsIGFyZ3M7CiAgICBhcmdzID0gc2xpY2UuY2FsbChhcmd1bWVudHMpOwogICAgaWYgKHR5cGVvZiB0eXBlID09PSAnb2JqZWN0JykgewogICAgICBkYXRhID0gdHlwZTsKICAgICAgdHlwZSA9IGRhdGEudHlwZTsKICAgIH0KICAgIGlmICghdHlwZSkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ25vIGV2ZW50IHR5cGUgc3BlY2lmaWVkJyk7CiAgICB9CiAgICBmaXJzdExpc3RlbmVyID0gdGhpcy5fbGlzdGVuZXJzW3R5cGVdOwogICAgaWYgKCFmaXJzdExpc3RlbmVyKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICAvLyB3ZSBtYWtlIHN1cmUgd2UgZmlyZSBpbnN0YW5jZXMgb2Ygb3VyIGhvbWUgbWFkZQogICAgLy8gZXZlbnRzIGhlcmUuIFdlIHdyYXAgdGhlbSBvbmx5IG9uY2UsIHRob3VnaAogICAgaWYgKGRhdGEgaW5zdGFuY2VvZiBJbnRlcm5hbEV2ZW50KSB7CiAgICAgIC8vIHdlIGFyZSBmaW5lLCB3ZSBhbHJlYWQgaGF2ZSBhbiBldmVudAogICAgICBldmVudCA9IGRhdGE7CiAgICB9IGVsc2UgewogICAgICBldmVudCA9IHRoaXMuY3JlYXRlRXZlbnQoZGF0YSk7CiAgICB9CgogICAgLy8gZW5zdXJlIHdlIHBhc3MgdGhlIGV2ZW50IGFzIHRoZSBmaXJzdCBwYXJhbWV0ZXIKICAgIGFyZ3NbMF0gPSBldmVudDsKCiAgICAvLyBvcmlnaW5hbCBldmVudCB0eXBlIChpbiBjYXNlIHdlIGRlbGVnYXRlKQogICAgdmFyIG9yaWdpbmFsVHlwZSA9IGV2ZW50LnR5cGU7CgogICAgLy8gdXBkYXRlIGV2ZW50IHR5cGUgYmVmb3JlIGRlbGVnYXRpb24KICAgIGlmICh0eXBlICE9PSBvcmlnaW5hbFR5cGUpIHsKICAgICAgZXZlbnQudHlwZSA9IHR5cGU7CiAgICB9CiAgICB0cnkgewogICAgICByZXR1cm5WYWx1ZSA9IHRoaXMuX2ludm9rZUxpc3RlbmVycyhldmVudCwgYXJncywgZmlyc3RMaXN0ZW5lcik7CiAgICB9IGZpbmFsbHkgewogICAgICAvLyByZXNldCBldmVudCB0eXBlIGFmdGVyIGRlbGVnYXRpb24KICAgICAgaWYgKHR5cGUgIT09IG9yaWdpbmFsVHlwZSkgewogICAgICAgIGV2ZW50LnR5cGUgPSBvcmlnaW5hbFR5cGU7CiAgICAgIH0KICAgIH0KCiAgICAvLyBzZXQgdGhlIHJldHVybiB2YWx1ZSB0byBmYWxzZSBpZiB0aGUgZXZlbnQgZGVmYXVsdAogICAgLy8gZ290IHByZXZlbnRlZCBhbmQgbm8gb3RoZXIgcmV0dXJuIHZhbHVlIGV4aXN0cwogICAgaWYgKHJldHVyblZhbHVlID09PSB1bmRlZmluZWQgJiYgZXZlbnQuZGVmYXVsdFByZXZlbnRlZCkgewogICAgICByZXR1cm5WYWx1ZSA9IGZhbHNlOwogICAgfQogICAgcmV0dXJuIHJldHVyblZhbHVlOwogIH07CiAgRXZlbnRCdXMucHJvdG90eXBlLmhhbmRsZUVycm9yID0gZnVuY3Rpb24gKGVycm9yKSB7CiAgICByZXR1cm4gdGhpcy5maXJlKCdlcnJvcicsIHsKICAgICAgZXJyb3I6IGVycm9yCiAgICB9KSA9PT0gZmFsc2U7CiAgfTsKICBFdmVudEJ1cy5wcm90b3R5cGUuX2Rlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7CiAgICB0aGlzLl9saXN0ZW5lcnMgPSB7fTsKICB9OwogIEV2ZW50QnVzLnByb3RvdHlwZS5faW52b2tlTGlzdGVuZXJzID0gZnVuY3Rpb24gKGV2ZW50LCBhcmdzLCBsaXN0ZW5lcikgewogICAgdmFyIHJldHVyblZhbHVlOwogICAgd2hpbGUgKGxpc3RlbmVyKSB7CiAgICAgIC8vIGhhbmRsZSBzdG9wcGVkIHByb3BhZ2F0aW9uCiAgICAgIGlmIChldmVudC5jYW5jZWxCdWJibGUpIHsKICAgICAgICBicmVhazsKICAgICAgfQogICAgICByZXR1cm5WYWx1ZSA9IHRoaXMuX2ludm9rZUxpc3RlbmVyKGV2ZW50LCBhcmdzLCBsaXN0ZW5lcik7CiAgICAgIGxpc3RlbmVyID0gbGlzdGVuZXIubmV4dDsKICAgIH0KICAgIHJldHVybiByZXR1cm5WYWx1ZTsKICB9OwogIEV2ZW50QnVzLnByb3RvdHlwZS5faW52b2tlTGlzdGVuZXIgPSBmdW5jdGlvbiAoZXZlbnQsIGFyZ3MsIGxpc3RlbmVyKSB7CiAgICB2YXIgcmV0dXJuVmFsdWU7CiAgICBpZiAobGlzdGVuZXIuY2FsbGJhY2suX19pc1RvbWIpIHsKICAgICAgcmV0dXJuIHJldHVyblZhbHVlOwogICAgfQogICAgdHJ5IHsKICAgICAgLy8gcmV0dXJuaW5nIGZhbHNlIHByZXZlbnRzIHRoZSBkZWZhdWx0IGFjdGlvbgogICAgICByZXR1cm5WYWx1ZSA9IGludm9rZUZ1bmN0aW9uKGxpc3RlbmVyLmNhbGxiYWNrLCBhcmdzKTsKCiAgICAgIC8vIHN0b3AgcHJvcGFnYXRpb24gb24gcmV0dXJuIHZhbHVlCiAgICAgIGlmIChyZXR1cm5WYWx1ZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgZXZlbnQucmV0dXJuVmFsdWUgPSByZXR1cm5WYWx1ZTsKICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgfQoKICAgICAgLy8gcHJldmVudCBkZWZhdWx0IG9uIHJldHVybiBmYWxzZQogICAgICBpZiAocmV0dXJuVmFsdWUgPT09IGZhbHNlKSB7CiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgfQogICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgaWYgKCF0aGlzLmhhbmRsZUVycm9yKGVycm9yKSkgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ3VuaGFuZGxlZCBlcnJvciBpbiBldmVudCBsaXN0ZW5lcicsIGVycm9yKTsKICAgICAgICB0aHJvdyBlcnJvcjsKICAgICAgfQogICAgfQogICAgcmV0dXJuIHJldHVyblZhbHVlOwogIH07CgogIC8qCiAgICogQWRkIG5ldyBsaXN0ZW5lciB3aXRoIGEgY2VydGFpbiBwcmlvcml0eSB0byB0aGUgbGlzdAogICAqIG9mIGxpc3RlbmVycyAoZm9yIHRoZSBnaXZlbiBldmVudCkuCiAgICoKICAgKiBUaGUgc2VtYW50aWNzIG9mIGxpc3RlbmVyIHJlZ2lzdHJhdGlvbiAvIGxpc3RlbmVyIGV4ZWN1dGlvbiBhcmUKICAgKiBmaXJzdCByZWdpc3RlciwgZmlyc3Qgc2VydmU6IE5ldyBsaXN0ZW5lcnMgd2lsbCBhbHdheXMgYmUgaW5zZXJ0ZWQKICAgKiBhZnRlciBleGlzdGluZyBsaXN0ZW5lcnMgd2l0aCB0aGUgc2FtZSBwcmlvcml0eS4KICAgKgogICAqIEV4YW1wbGU6IEluc2VydGluZyB0d28gbGlzdGVuZXJzIHdpdGggcHJpb3JpdHkgMTAwMCBhbmQgMTMwMAogICAqCiAgICogICAgKiBiZWZvcmU6IFsgMTUwMCwgMTUwMCwgMTAwMCwgMTAwMCBdCiAgICogICAgKiBhZnRlcjogWyAxNTAwLCAxNTAwLCAobmV3PTEzMDApLCAxMDAwLCAxMDAwLCAobmV3PTEwMDApIF0KICAgKgogICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudAogICAqIEBwYXJhbSB7T2JqZWN0fSBsaXN0ZW5lciB7IHByaW9yaXR5LCBjYWxsYmFjayB9CiAgICovCiAgRXZlbnRCdXMucHJvdG90eXBlLl9hZGRMaXN0ZW5lciA9IGZ1bmN0aW9uIChldmVudCwgbmV3TGlzdGVuZXIpIHsKICAgIHZhciBsaXN0ZW5lciA9IHRoaXMuX2dldExpc3RlbmVycyhldmVudCksCiAgICAgIHByZXZpb3VzTGlzdGVuZXI7CgogICAgLy8gbm8gcHJpb3IgbGlzdGVuZXJzCiAgICBpZiAoIWxpc3RlbmVyKSB7CiAgICAgIHRoaXMuX3NldExpc3RlbmVycyhldmVudCwgbmV3TGlzdGVuZXIpOwogICAgICByZXR1cm47CiAgICB9CgogICAgLy8gZW5zdXJlIHdlIG9yZGVyIGxpc3RlbmVycyBieSBwcmlvcml0eSBmcm9tCiAgICAvLyAwIChoaWdoKSB0byBuID4gMCAobG93KQogICAgd2hpbGUgKGxpc3RlbmVyKSB7CiAgICAgIGlmIChsaXN0ZW5lci5wcmlvcml0eSA8IG5ld0xpc3RlbmVyLnByaW9yaXR5KSB7CiAgICAgICAgbmV3TGlzdGVuZXIubmV4dCA9IGxpc3RlbmVyOwogICAgICAgIGlmIChwcmV2aW91c0xpc3RlbmVyKSB7CiAgICAgICAgICBwcmV2aW91c0xpc3RlbmVyLm5leHQgPSBuZXdMaXN0ZW5lcjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5fc2V0TGlzdGVuZXJzKGV2ZW50LCBuZXdMaXN0ZW5lcik7CiAgICAgICAgfQogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBwcmV2aW91c0xpc3RlbmVyID0gbGlzdGVuZXI7CiAgICAgIGxpc3RlbmVyID0gbGlzdGVuZXIubmV4dDsKICAgIH0KCiAgICAvLyBhZGQgbmV3IGxpc3RlbmVyIHRvIGJhY2sKICAgIHByZXZpb3VzTGlzdGVuZXIubmV4dCA9IG5ld0xpc3RlbmVyOwogIH07CiAgRXZlbnRCdXMucHJvdG90eXBlLl9nZXRMaXN0ZW5lcnMgPSBmdW5jdGlvbiAobmFtZSkgewogICAgcmV0dXJuIHRoaXMuX2xpc3RlbmVyc1tuYW1lXTsKICB9OwogIEV2ZW50QnVzLnByb3RvdHlwZS5fc2V0TGlzdGVuZXJzID0gZnVuY3Rpb24gKG5hbWUsIGxpc3RlbmVyKSB7CiAgICB0aGlzLl9saXN0ZW5lcnNbbmFtZV0gPSBsaXN0ZW5lcjsKICB9OwogIEV2ZW50QnVzLnByb3RvdHlwZS5fcmVtb3ZlTGlzdGVuZXIgPSBmdW5jdGlvbiAoZXZlbnQsIGNhbGxiYWNrKSB7CiAgICB2YXIgbGlzdGVuZXIgPSB0aGlzLl9nZXRMaXN0ZW5lcnMoZXZlbnQpLAogICAgICBuZXh0TGlzdGVuZXIsCiAgICAgIHByZXZpb3VzTGlzdGVuZXIsCiAgICAgIGxpc3RlbmVyQ2FsbGJhY2s7CiAgICBpZiAoIWNhbGxiYWNrKSB7CiAgICAgIC8vIGNsZWFyIGxpc3RlbmVycwogICAgICB0aGlzLl9zZXRMaXN0ZW5lcnMoZXZlbnQsIG51bGwpOwogICAgICByZXR1cm47CiAgICB9CiAgICB3aGlsZSAobGlzdGVuZXIpIHsKICAgICAgbmV4dExpc3RlbmVyID0gbGlzdGVuZXIubmV4dDsKICAgICAgbGlzdGVuZXJDYWxsYmFjayA9IGxpc3RlbmVyLmNhbGxiYWNrOwogICAgICBpZiAobGlzdGVuZXJDYWxsYmFjayA9PT0gY2FsbGJhY2sgfHwgbGlzdGVuZXJDYWxsYmFja1tGTl9SRUZdID09PSBjYWxsYmFjaykgewogICAgICAgIGlmIChwcmV2aW91c0xpc3RlbmVyKSB7CiAgICAgICAgICBwcmV2aW91c0xpc3RlbmVyLm5leHQgPSBuZXh0TGlzdGVuZXI7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIG5ldyBmaXJzdCBsaXN0ZW5lcgogICAgICAgICAgdGhpcy5fc2V0TGlzdGVuZXJzKGV2ZW50LCBuZXh0TGlzdGVuZXIpOwogICAgICAgIH0KICAgICAgfQogICAgICBwcmV2aW91c0xpc3RlbmVyID0gbGlzdGVuZXI7CiAgICAgIGxpc3RlbmVyID0gbmV4dExpc3RlbmVyOwogICAgfQogIH07CgogIC8qKgogICAqIEEgZXZlbnQgdGhhdCBpcyBlbWl0dGVkIHZpYSB0aGUgZXZlbnQgYnVzLgogICAqLwogIGZ1bmN0aW9uIEludGVybmFsRXZlbnQoKSB7fQogIEludGVybmFsRXZlbnQucHJvdG90eXBlLnN0b3BQcm9wYWdhdGlvbiA9IGZ1bmN0aW9uICgpIHsKICAgIHRoaXMuY2FuY2VsQnViYmxlID0gdHJ1ZTsKICB9OwogIEludGVybmFsRXZlbnQucHJvdG90eXBlLnByZXZlbnREZWZhdWx0ID0gZnVuY3Rpb24gKCkgewogICAgdGhpcy5kZWZhdWx0UHJldmVudGVkID0gdHJ1ZTsKICB9OwogIEludGVybmFsRXZlbnQucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoZGF0YSkgewogICAgYXNzaWduKHRoaXMsIGRhdGEgfHwge30pOwogIH07CgogIC8qKgogICAqIEludm9rZSBmdW5jdGlvbi4gQmUgZmFzdC4uLgogICAqCiAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4KICAgKiBAcGFyYW0ge0FycmF5PE9iamVjdD59IGFyZ3MKICAgKgogICAqIEByZXR1cm4ge0FueX0KICAgKi8KICBmdW5jdGlvbiBpbnZva2VGdW5jdGlvbihmbiwgYXJncykgewogICAgcmV0dXJuIGZuLmFwcGx5KG51bGwsIGFyZ3MpOwogIH0KCiAgZnVuY3Rpb24gY291bnREZWNpbWFscyhudW1iZXIpIHsKICAgIGNvbnN0IG51bSA9IEJpZyhudW1iZXIpOwogICAgaWYgKG51bS50b1N0cmluZygpID09PSBudW0udG9GaXhlZCgwKSkgcmV0dXJuIDA7CiAgICByZXR1cm4gbnVtLnRvRml4ZWQoKS5zcGxpdCgnLicpWzFdLmxlbmd0aCB8fCAwOwogIH0KICBmdW5jdGlvbiBpc1ZhbGlkTnVtYmVyKHZhbHVlKSB7CiAgICByZXR1cm4gKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgfHwgdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykgJiYgdmFsdWUgIT09ICcnICYmICFpc05hTihOdW1iZXIodmFsdWUpKTsKICB9CiAgZnVuY3Rpb24gd2lsbEtleVByb2R1Y2VWYWxpZE51bWJlcihrZXksIHByZXZpb3VzVmFsdWUsIGNhcmV0SW5kZXgsIHNlbGVjdGlvbldpZHRoLCBkZWNpbWFsRGlnaXRzKSB7CiAgICAvLyBEb3QgYW5kIGNvbW1hIGFyZSBib3RoIHRyZWF0ZWQgYXMgZG90CiAgICBwcmV2aW91c1ZhbHVlID0gcHJldmlvdXNWYWx1ZS5yZXBsYWNlKCcsJywgJy4nKTsKICAgIGNvbnN0IGlzRmlyc3REb3QgPSAhcHJldmlvdXNWYWx1ZS5pbmNsdWRlcygnLicpICYmIChrZXkgPT09ICcuJyB8fCBrZXkgPT09ICcsJyk7CiAgICBjb25zdCBpc0ZpcnN0TWludXMgPSAhcHJldmlvdXNWYWx1ZS5pbmNsdWRlcygnLScpICYmIGtleSA9PT0gJy0nICYmIGNhcmV0SW5kZXggPT09IDA7CiAgICBjb25zdCBrZXlwcmVzc0lzTnVtZXJpYyA9IC9eWzAtOV0kL2kudGVzdChrZXkpOwogICAgY29uc3QgZG90SW5kZXggPSBwcmV2aW91c1ZhbHVlID09PSB1bmRlZmluZWQgPyAtMSA6IHByZXZpb3VzVmFsdWUuaW5kZXhPZignLicpOwoKICAgIC8vIElmIHRoZSBjYXJldCBpcyBwb3NpdGlvbmVkIGFmdGVyIGEgZG90LCBhbmQgdGhlIGN1cnJlbnQgZGVjaW1hbCBkaWdpdHMgY291bnQgaXMgZXF1YWwgb3IgZ3JlYXRlciB0byB0aGUgbWF4aW11bSwgZGlzYWxsb3cgdGhlIGtleSBwcmVzcwogICAgY29uc3Qgb3ZlcmZsb3dzRGVjaW1hbFNwYWNlID0gdHlwZW9mIGRlY2ltYWxEaWdpdHMgPT09ICdudW1iZXInICYmIHNlbGVjdGlvbldpZHRoID09PSAwICYmIGRvdEluZGV4ICE9PSAtMSAmJiBwcmV2aW91c1ZhbHVlLmluY2x1ZGVzKCcuJykgJiYgcHJldmlvdXNWYWx1ZS5zcGxpdCgnLicpWzFdLmxlbmd0aCA+PSBkZWNpbWFsRGlnaXRzICYmIGNhcmV0SW5kZXggPiBkb3RJbmRleDsKICAgIGNvbnN0IGtleXByZXNzSXNBbGxvd2VkQ2hhciA9IGtleXByZXNzSXNOdW1lcmljIHx8IGRlY2ltYWxEaWdpdHMgIT09IDAgJiYgaXNGaXJzdERvdCB8fCBpc0ZpcnN0TWludXM7CiAgICByZXR1cm4ga2V5cHJlc3NJc0FsbG93ZWRDaGFyICYmICFvdmVyZmxvd3NEZWNpbWFsU3BhY2U7CiAgfQogIGZ1bmN0aW9uIGlzTnVsbEVxdWl2YWxlbnRWYWx1ZSh2YWx1ZSkgewogICAgcmV0dXJuIHZhbHVlID09PSB1bmRlZmluZWQgfHwgdmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09ICcnOwogIH0KCiAgY29uc3QgRU1BSUxfUEFUVEVSTiA9IC9eW2EtekEtWjAtOS4hIyQlJicqKy89P15fYHt8fX4tXStAW2EtekEtWjAtOV0oPzpbYS16QS1aMC05LV17MCw2MX1bYS16QS1aMC05XSk/KD86XC5bYS16QS1aMC05XSg/OlthLXpBLVowLTktXXswLDYxfVthLXpBLVowLTldKT8pKiQvOwogIGNvbnN0IFBIT05FX1BBVFRFUk4gPSAvKFwrfDAwKSgyOTd8OTN8MjQ0fDEyNjR8MzU4fDM1NXwzNzZ8OTcxfDU0fDM3NHwxNjg0fDEyNjh8NjF8NDN8OTk0fDI1N3wzMnwyMjl8MjI2fDg4MHwzNTl8OTczfDEyNDJ8Mzg3fDU5MHwzNzV8NTAxfDE0NDF8NTkxfDU1fDEyNDZ8NjczfDk3NXwyNjd8MjM2fDF8NjF8NDF8NTZ8ODZ8MjI1fDIzN3wyNDN8MjQyfDY4Mnw1N3wyNjl8MjM4fDUwNnw1M3w1OTk5fDYxfDEzNDV8MzU3fDQyMHw0OXwyNTN8MTc2N3w0NXwxODA5fDE4Mjl8MTg0OXwyMTN8NTkzfDIwfDI5MXwyMTJ8MzR8MzcyfDI1MXwzNTh8Njc5fDUwMHwzM3wyOTh8NjkxfDI0MXw0NHw5OTV8NDR8MjMzfDM1MHwyMjR8NTkwfDIyMHwyNDV8MjQwfDMwfDE0NzN8Mjk5fDUwMnw1OTR8MTY3MXw1OTJ8ODUyfDUwNHwzODV8NTA5fDM2fDYyfDQ0fDkxfDI0NnwzNTN8OTh8OTY0fDM1NHw5NzJ8Mzl8MTg3Nnw0NHw5NjJ8ODF8NzZ8Nzd8MjU0fDk5Nnw4NTV8Njg2fDE4Njl8ODJ8MzgzfDk2NXw4NTZ8OTYxfDIzMXwyMTh8MTc1OHw0MjN8OTR8MjY2fDM3MHwzNTJ8MzcxfDg1M3w1OTB8MjEyfDM3N3wzNzN8MjYxfDk2MHw1Mnw2OTJ8Mzg5fDIyM3wzNTZ8OTV8MzgyfDk3NnwxNjcwfDI1OHwyMjJ8MTY2NHw1OTZ8MjMwfDI2NXw2MHwyNjJ8MjY0fDY4N3wyMjd8NjcyfDIzNHw1MDV8NjgzfDMxfDQ3fDk3N3w2NzR8NjR8OTY4fDkyfDUwN3w2NHw1MXw2M3w2ODB8Njc1fDQ4fDE3ODd8MTkzOXw4NTB8MzUxfDU5NXw5NzB8Njg5fDk3NHwyNjJ8NDB8N3wyNTB8OTY2fDI0OXwyMjF8NjV8NTAwfDQ3Nzl8Njc3fDIzMnw1MDN8Mzc4fDI1Mnw1MDh8MzgxfDIxMXwyMzl8NTk3fDQyMXwzODZ8NDZ8MjY4fDE3MjF8MjQ4fDk2M3wxNjQ5fDIzNXwyMjh8NjZ8OTkyfDY5MHw5OTN8NjcwfDY3NnwxODY4fDIxNnw5MHw2ODh8ODg2fDI1NXwyNTZ8MzgwfDU5OHwxfDk5OHwzOTA2Njk4fDM3OXwxNzg0fDU4fDEyODR8MTM0MHw4NHw2Nzh8NjgxfDY4NXw5Njd8Mjd8MjYwfDI2MykoOVs5NzZdXGR8OFs5ODc1MzBdXGR8Nls5ODddXGR8NVs5MF1cZHw0MlxkfDNbODc1XVxkfDJbOTg2NTQzMjFdXGR8OVs4NTQzMjEwXXw4WzY0MjFdfDZbNjU0MzIxMF18NVs4NzY1NDMyMV18NFs5ODc2NTQzMTBdfDNbOTY0MzIxMF18Mls3MF18N3wxKVxkezQsMjB9JC87CiAgY2xhc3MgVmFsaWRhdG9yIHsKICAgIHZhbGlkYXRlRmllbGQoZmllbGQsIHZhbHVlKSB7CiAgICAgIGNvbnN0IHsKICAgICAgICB0eXBlLAogICAgICAgIHZhbGlkYXRlCiAgICAgIH0gPSBmaWVsZDsKICAgICAgbGV0IGVycm9ycyA9IFtdOwogICAgICBpZiAodHlwZSA9PT0gJ251bWJlcicpIHsKICAgICAgICBjb25zdCB7CiAgICAgICAgICBkZWNpbWFsRGlnaXRzLAogICAgICAgICAgc3RlcAogICAgICAgIH0gPSBmaWVsZDsKICAgICAgICBpZiAodmFsdWUgPT09ICdOYU4nKSB7CiAgICAgICAgICBlcnJvcnMgPSBbLi4uZXJyb3JzLCAnVmFsdWUgaXMgbm90IGEgbnVtYmVyLiddOwogICAgICAgIH0gZWxzZSBpZiAodmFsdWUpIHsKICAgICAgICAgIGlmIChkZWNpbWFsRGlnaXRzID49IDAgJiYgY291bnREZWNpbWFscyh2YWx1ZSkgPiBkZWNpbWFsRGlnaXRzKSB7CiAgICAgICAgICAgIGVycm9ycyA9IFsuLi5lcnJvcnMsICdWYWx1ZSBpcyBleHBlY3RlZCB0byAnICsgKGRlY2ltYWxEaWdpdHMgPT09IDAgPyAnYmUgYW4gaW50ZWdlcicgOiBgaGF2ZSBhdCBtb3N0ICR7ZGVjaW1hbERpZ2l0c30gZGVjaW1hbCBkaWdpdCR7ZGVjaW1hbERpZ2l0cyA+IDEgPyAncycgOiAnJ31gKSArICcuJ107CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoc3RlcCkgewogICAgICAgICAgICBjb25zdCBiaWdWYWx1ZSA9IEJpZyh2YWx1ZSk7CiAgICAgICAgICAgIGNvbnN0IGJpZ1N0ZXAgPSBCaWcoc3RlcCk7CiAgICAgICAgICAgIGNvbnN0IG9mZnNldCA9IGJpZ1ZhbHVlLm1vZChiaWdTdGVwKTsKICAgICAgICAgICAgaWYgKG9mZnNldC5jbXAoMCkgIT09IDApIHsKICAgICAgICAgICAgICBjb25zdCBwcmV2aW91c1ZhbHVlID0gYmlnVmFsdWUubWludXMob2Zmc2V0KTsKICAgICAgICAgICAgICBjb25zdCBuZXh0VmFsdWUgPSBwcmV2aW91c1ZhbHVlLnBsdXMoYmlnU3RlcCk7CiAgICAgICAgICAgICAgZXJyb3JzID0gWy4uLmVycm9ycywgYFBsZWFzZSBzZWxlY3QgYSB2YWxpZCB2YWx1ZSwgdGhlIHR3byBuZWFyZXN0IHZhbGlkIHZhbHVlcyBhcmUgJHtwcmV2aW91c1ZhbHVlfSBhbmQgJHtuZXh0VmFsdWV9LmBdOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmICghdmFsaWRhdGUpIHsKICAgICAgICByZXR1cm4gZXJyb3JzOwogICAgICB9CiAgICAgIGlmICh2YWxpZGF0ZS5wYXR0ZXJuICYmIHZhbHVlICYmICFuZXcgUmVnRXhwKHZhbGlkYXRlLnBhdHRlcm4pLnRlc3QodmFsdWUpKSB7CiAgICAgICAgZXJyb3JzID0gWy4uLmVycm9ycywgYEZpZWxkIG11c3QgbWF0Y2ggcGF0dGVybiAke3ZhbGlkYXRlLnBhdHRlcm59LmBdOwogICAgICB9CiAgICAgIGlmICh2YWxpZGF0ZS5yZXF1aXJlZCAmJiAoaXNOaWwodmFsdWUpIHx8IHZhbHVlID09PSAnJykpIHsKICAgICAgICBlcnJvcnMgPSBbLi4uZXJyb3JzLCAnRmllbGQgaXMgcmVxdWlyZWQuJ107CiAgICAgIH0KICAgICAgaWYgKCdtaW4nIGluIHZhbGlkYXRlICYmIHZhbHVlICYmIHZhbHVlIDwgdmFsaWRhdGUubWluKSB7CiAgICAgICAgZXJyb3JzID0gWy4uLmVycm9ycywgYEZpZWxkIG11c3QgaGF2ZSBtaW5pbXVtIHZhbHVlIG9mICR7dmFsaWRhdGUubWlufS5gXTsKICAgICAgfQogICAgICBpZiAoJ21heCcgaW4gdmFsaWRhdGUgJiYgdmFsdWUgJiYgdmFsdWUgPiB2YWxpZGF0ZS5tYXgpIHsKICAgICAgICBlcnJvcnMgPSBbLi4uZXJyb3JzLCBgRmllbGQgbXVzdCBoYXZlIG1heGltdW0gdmFsdWUgb2YgJHt2YWxpZGF0ZS5tYXh9LmBdOwogICAgICB9CiAgICAgIGlmICgnbWluTGVuZ3RoJyBpbiB2YWxpZGF0ZSAmJiB2YWx1ZSAmJiB2YWx1ZS50cmltKCkubGVuZ3RoIDwgdmFsaWRhdGUubWluTGVuZ3RoKSB7CiAgICAgICAgZXJyb3JzID0gWy4uLmVycm9ycywgYEZpZWxkIG11c3QgaGF2ZSBtaW5pbXVtIGxlbmd0aCBvZiAke3ZhbGlkYXRlLm1pbkxlbmd0aH0uYF07CiAgICAgIH0KICAgICAgaWYgKCdtYXhMZW5ndGgnIGluIHZhbGlkYXRlICYmIHZhbHVlICYmIHZhbHVlLnRyaW0oKS5sZW5ndGggPiB2YWxpZGF0ZS5tYXhMZW5ndGgpIHsKICAgICAgICBlcnJvcnMgPSBbLi4uZXJyb3JzLCBgRmllbGQgbXVzdCBoYXZlIG1heGltdW0gbGVuZ3RoIG9mICR7dmFsaWRhdGUubWF4TGVuZ3RofS5gXTsKICAgICAgfQogICAgICBpZiAoJ3ZhbGlkYXRpb25UeXBlJyBpbiB2YWxpZGF0ZSAmJiB2YWx1ZSAmJiB2YWxpZGF0ZS52YWxpZGF0aW9uVHlwZSA9PT0gJ3Bob25lJyAmJiAhUEhPTkVfUEFUVEVSTi50ZXN0KHZhbHVlKSkgewogICAgICAgIGVycm9ycyA9IFsuLi5lcnJvcnMsICdGaWVsZCBtdXN0IGJlIGEgdmFsaWQgIGludGVybmF0aW9uYWwgcGhvbmUgbnVtYmVyLiAoZS5nLiArNDkzMDY2NDA0MDkwMCknXTsKICAgICAgfQogICAgICBpZiAoJ3ZhbGlkYXRpb25UeXBlJyBpbiB2YWxpZGF0ZSAmJiB2YWx1ZSAmJiB2YWxpZGF0ZS52YWxpZGF0aW9uVHlwZSA9PT0gJ2VtYWlsJyAmJiAhRU1BSUxfUEFUVEVSTi50ZXN0KHZhbHVlKSkgewogICAgICAgIGVycm9ycyA9IFsuLi5lcnJvcnMsICdGaWVsZCBtdXN0IGJlIGEgdmFsaWQgZW1haWwuJ107CiAgICAgIH0KICAgICAgcmV0dXJuIGVycm9yczsKICAgIH0KICB9CiAgVmFsaWRhdG9yLiRpbmplY3QgPSBbXTsKCiAgY2xhc3MgRm9ybUZpZWxkUmVnaXN0cnkgewogICAgY29uc3RydWN0b3IoZXZlbnRCdXMpIHsKICAgICAgdGhpcy5fZXZlbnRCdXMgPSBldmVudEJ1czsKICAgICAgdGhpcy5fZm9ybUZpZWxkcyA9IHt9OwogICAgICBldmVudEJ1cy5vbignZm9ybS5jbGVhcicsICgpID0+IHRoaXMuY2xlYXIoKSk7CiAgICAgIHRoaXMuX2lkcyA9IG5ldyBJZHMoWzMyLCAzNiwgMV0pOwogICAgICB0aGlzLl9rZXlzID0gbmV3IElkcyhbMzIsIDM2LCAxXSk7CiAgICB9CiAgICBhZGQoZm9ybUZpZWxkKSB7CiAgICAgIGNvbnN0IHsKICAgICAgICBpZAogICAgICB9ID0gZm9ybUZpZWxkOwogICAgICBpZiAodGhpcy5fZm9ybUZpZWxkc1tpZF0pIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYGZvcm0gZmllbGQgd2l0aCBJRCAke2lkfSBhbHJlYWR5IGV4aXN0c2ApOwogICAgICB9CiAgICAgIHRoaXMuX2V2ZW50QnVzLmZpcmUoJ2Zvcm1GaWVsZC5hZGQnLCB7CiAgICAgICAgZm9ybUZpZWxkCiAgICAgIH0pOwogICAgICB0aGlzLl9mb3JtRmllbGRzW2lkXSA9IGZvcm1GaWVsZDsKICAgIH0KICAgIHJlbW92ZShmb3JtRmllbGQpIHsKICAgICAgY29uc3QgewogICAgICAgIGlkCiAgICAgIH0gPSBmb3JtRmllbGQ7CiAgICAgIGlmICghdGhpcy5fZm9ybUZpZWxkc1tpZF0pIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy5fZXZlbnRCdXMuZmlyZSgnZm9ybUZpZWxkLnJlbW92ZScsIHsKICAgICAgICBmb3JtRmllbGQKICAgICAgfSk7CiAgICAgIGRlbGV0ZSB0aGlzLl9mb3JtRmllbGRzW2lkXTsKICAgIH0KICAgIGdldChpZCkgewogICAgICByZXR1cm4gdGhpcy5fZm9ybUZpZWxkc1tpZF07CiAgICB9CiAgICBnZXRBbGwoKSB7CiAgICAgIHJldHVybiBPYmplY3QudmFsdWVzKHRoaXMuX2Zvcm1GaWVsZHMpOwogICAgfQogICAgZm9yRWFjaChjYWxsYmFjaykgewogICAgICB0aGlzLmdldEFsbCgpLmZvckVhY2goZm9ybUZpZWxkID0+IGNhbGxiYWNrKGZvcm1GaWVsZCkpOwogICAgfQogICAgY2xlYXIoKSB7CiAgICAgIHRoaXMuX2Zvcm1GaWVsZHMgPSB7fTsKICAgICAgdGhpcy5faWRzLmNsZWFyKCk7CiAgICAgIHRoaXMuX2tleXMuY2xlYXIoKTsKICAgIH0KICB9CiAgRm9ybUZpZWxkUmVnaXN0cnkuJGluamVjdCA9IFsnZXZlbnRCdXMnXTsKCiAgLyoqCiAgICogUmV0cmlldmUgdmFyaWFibGUgbmFtZXMgZnJvbSBnaXZlbiBGRUVMIHVuYXJ5IHRlc3QuCiAgICoKICAgKiBAcGFyYW0ge3N0cmluZ30gdW5hcnlUZXN0CiAgICogQHJldHVybnMge3N0cmluZ1tdfQogICAqLwogIGZ1bmN0aW9uIGdldFZhcmlhYmxlTmFtZXModW5hcnlUZXN0KSB7CiAgICBjb25zdCB0cmVlID0gcGFyc2VVbmFyeVRlc3RzKHVuYXJ5VGVzdCk7CiAgICBjb25zdCBjdXJzb3IgPSB0cmVlLmN1cnNvcigpOwogICAgY29uc3QgdmFyaWFibGVzID0gbmV3IFNldCgpOwogICAgZG8gewogICAgICBjb25zdCBub2RlID0gY3Vyc29yLm5vZGU7CiAgICAgIGlmIChub2RlLnR5cGUubmFtZSA9PT0gJ1ZhcmlhYmxlTmFtZScpIHsKICAgICAgICB2YXJpYWJsZXMuYWRkKHVuYXJ5VGVzdC5zbGljZShub2RlLmZyb20sIG5vZGUudG8pKTsKICAgICAgfQogICAgfSB3aGlsZSAoY3Vyc29yLm5leHQoKSk7CiAgICByZXR1cm4gQXJyYXkuZnJvbSh2YXJpYWJsZXMpOwogIH0KCiAgLyoqCiAgICogUmV0cmlldmUgdmFyaWFibGUgbmFtZXMgZnJvbSBnaXZlbiBGRUVMIGV4cHJlc3Npb24uCiAgICoKICAgKiBAcGFyYW0ge3N0cmluZ30gZXhwcmVzc2lvbgogICAqIEByZXR1cm5zIHtzdHJpbmdbXX0KICAgKi8KICBmdW5jdGlvbiBnZXRFeHByZXNzaW9uVmFyaWFibGVOYW1lcyhleHByZXNzaW9uKSB7CiAgICBjb25zdCB0cmVlID0gcGFyc2VFeHByZXNzaW9ucyhleHByZXNzaW9uKTsKICAgIGNvbnN0IGN1cnNvciA9IHRyZWUuY3Vyc29yKCk7CiAgICBjb25zdCB2YXJpYWJsZXMgPSBuZXcgU2V0KCk7CiAgICBkbyB7CiAgICAgIGNvbnN0IG5vZGUgPSBjdXJzb3Iubm9kZTsKICAgICAgaWYgKG5vZGUudHlwZS5uYW1lID09PSAnVmFyaWFibGVOYW1lJykgewogICAgICAgIHZhcmlhYmxlcy5hZGQoZXhwcmVzc2lvbi5zbGljZShub2RlLmZyb20sIG5vZGUudG8pKTsKICAgICAgfQogICAgfSB3aGlsZSAoY3Vyc29yLm5leHQoKSk7CiAgICByZXR1cm4gQXJyYXkuZnJvbSh2YXJpYWJsZXMpOwogIH0KICBmdW5jdGlvbiBpc0V4cHJlc3Npb24kMih2YWx1ZSkgewogICAgcmV0dXJuIGlzU3RyaW5nJDIodmFsdWUpICYmIHZhbHVlLnN0YXJ0c1dpdGgoJz0nKTsKICB9CgogIC8vIGNvbmZpZyAgLy8vLy8vLy8vLy8vLy8vLy8vLwoKICBjb25zdCBNSU5VVEVTX0lOX0RBWSA9IDYwICogMjQ7CiAgY29uc3QgREFURVRJTUVfU1VCVFlQRVMgPSB7CiAgICBEQVRFOiAnZGF0ZScsCiAgICBUSU1FOiAndGltZScsCiAgICBEQVRFVElNRTogJ2RhdGV0aW1lJwogIH07CiAgY29uc3QgVElNRV9TRVJJQUxJU0lOR19GT1JNQVRTID0gewogICAgVVRDX09GRlNFVDogJ3V0Y19vZmZzZXQnLAogICAgVVRDX05PUk1BTElaRUQ6ICd1dGNfbm9ybWFsaXplZCcsCiAgICBOT19USU1FWk9ORTogJ25vX3RpbWV6b25lJwogIH07CiAgY29uc3QgREFURVRJTUVfU1VCVFlQRV9QQVRIID0gWydzdWJ0eXBlJ107CiAgY29uc3QgREFURV9MQUJFTF9QQVRIID0gWydkYXRlTGFiZWwnXTsKCiAgZnVuY3Rpb24gY3JlYXRlSW5qZWN0b3IoYm9vdHN0cmFwTW9kdWxlcykgewogICAgY29uc3QgaW5qZWN0b3IgPSBuZXcgSW5qZWN0b3IoYm9vdHN0cmFwTW9kdWxlcyk7CiAgICBpbmplY3Rvci5pbml0KCk7CiAgICByZXR1cm4gaW5qZWN0b3I7CiAgfQoKICAvKioKICAgKiBAcGFyYW0ge3N0cmluZz99IHByZWZpeAogICAqCiAgICogQHJldHVybnMgRWxlbWVudAogICAqLwogIGZ1bmN0aW9uIGNyZWF0ZUZvcm1Db250YWluZXIocHJlZml4ID0gJ2ZqcycpIHsKICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoYCR7cHJlZml4fS1jb250YWluZXJgKTsKICAgIHJldHVybiBjb250YWluZXI7CiAgfQoKICBjb25zdCBFWFBSRVNTSU9OX1BST1BFUlRJRVMgPSBbJ2FsdCcsICdzb3VyY2UnLCAndGV4dCddOwogIGZ1bmN0aW9uIGZpbmRFcnJvcnMoZXJyb3JzLCBwYXRoKSB7CiAgICByZXR1cm4gZXJyb3JzW3BhdGhTdHJpbmdpZnkocGF0aCldOwogIH0KICBmdW5jdGlvbiBwYXRoU3RyaW5naWZ5KHBhdGgpIHsKICAgIGlmICghcGF0aCkgewogICAgICByZXR1cm4gJyc7CiAgICB9CiAgICByZXR1cm4gcGF0aC5qb2luKCcuJyk7CiAgfQogIGNvbnN0IGluZGljZXMgPSB7fTsKICBmdW5jdGlvbiBnZW5lcmF0ZUluZGV4Rm9yVHlwZSh0eXBlKSB7CiAgICBpZiAodHlwZSBpbiBpbmRpY2VzKSB7CiAgICAgIGluZGljZXNbdHlwZV0rKzsKICAgIH0gZWxzZSB7CiAgICAgIGluZGljZXNbdHlwZV0gPSAxOwogICAgfQogICAgcmV0dXJuIGluZGljZXNbdHlwZV07CiAgfQogIGZ1bmN0aW9uIGdlbmVyYXRlSWRGb3JUeXBlKHR5cGUpIHsKICAgIHJldHVybiBgJHt0eXBlfSR7Z2VuZXJhdGVJbmRleEZvclR5cGUodHlwZSl9YDsKICB9CgogIC8qKgogICAqIEB0ZW1wbGF0ZSBUCiAgICogQHBhcmFtIHtUfSBkYXRhCiAgICogQHBhcmFtIHsodGhpczogYW55LCBrZXk6IHN0cmluZywgdmFsdWU6IGFueSkgPT4gYW55fSBbcmVwbGFjZXJdCiAgICogQHJldHVybiB7VH0KICAgKi8KICBmdW5jdGlvbiBjbG9uZShkYXRhLCByZXBsYWNlcikgewogICAgcmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZGF0YSwgcmVwbGFjZXIpKTsKICB9CgogIC8qKgogICAqIFBhcnNlIHRoZSBzY2hlbWEgZm9yIGlucHV0IHZhcmlhYmxlcyBhIGZvcm0gbWlnaHQgbWFrZSB1c2Ugb2YKICAgKgogICAqIEBwYXJhbSB7YW55fSBzY2hlbWEKICAgKgogICAqIEByZXR1cm4ge3N0cmluZ1tdfQogICAqLwogIGZ1bmN0aW9uIGdldFNjaGVtYVZhcmlhYmxlcyhzY2hlbWEpIHsKICAgIGlmICghc2NoZW1hLmNvbXBvbmVudHMpIHsKICAgICAgcmV0dXJuIFtdOwogICAgfQogICAgY29uc3QgdmFyaWFibGVzID0gc2NoZW1hLmNvbXBvbmVudHMucmVkdWNlKCh2YXJpYWJsZXMsIGNvbXBvbmVudCkgPT4gewogICAgICBjb25zdCB7CiAgICAgICAga2V5LAogICAgICAgIHZhbHVlc0tleSwKICAgICAgICB0eXBlLAogICAgICAgIGNvbmRpdGlvbmFsCiAgICAgIH0gPSBjb21wb25lbnQ7CiAgICAgIGlmIChbJ2J1dHRvbiddLmluY2x1ZGVzKHR5cGUpKSB7CiAgICAgICAgcmV0dXJuIHZhcmlhYmxlczsKICAgICAgfQogICAgICBpZiAoa2V5KSB7CiAgICAgICAgdmFyaWFibGVzID0gWy4uLnZhcmlhYmxlcywga2V5XTsKICAgICAgfQogICAgICBpZiAodmFsdWVzS2V5KSB7CiAgICAgICAgdmFyaWFibGVzID0gWy4uLnZhcmlhYmxlcywgdmFsdWVzS2V5XTsKICAgICAgfQogICAgICBpZiAoY29uZGl0aW9uYWwgJiYgY29uZGl0aW9uYWwuaGlkZSkgewogICAgICAgIC8vIGN1dCBvZmYgaW5pdGlhbCAnPScKICAgICAgICBjb25zdCBjb25kaXRpb25WYXJpYWJsZXMgPSBnZXRWYXJpYWJsZU5hbWVzKGNvbmRpdGlvbmFsLmhpZGUuc2xpY2UoMSkpOwogICAgICAgIHZhcmlhYmxlcyA9IFsuLi52YXJpYWJsZXMsIC4uLmNvbmRpdGlvblZhcmlhYmxlc107CiAgICAgIH0KICAgICAgRVhQUkVTU0lPTl9QUk9QRVJUSUVTLmZvckVhY2gocHJvcCA9PiB7CiAgICAgICAgY29uc3QgcHJvcGVydHkgPSBjb21wb25lbnRbcHJvcF07CiAgICAgICAgaWYgKHByb3BlcnR5ICYmIGlzRXhwcmVzc2lvbiQxKHByb3BlcnR5KSkgewogICAgICAgICAgLy8gY3V0IG9mZiBpbml0aWFsICc9JwogICAgICAgICAgY29uc3QgZXhwcmVzc2lvblZhcmlhYmxlcyA9IGdldEV4cHJlc3Npb25WYXJpYWJsZU5hbWVzKHByb3BlcnR5LnNsaWNlKDEpKTsKICAgICAgICAgIHZhcmlhYmxlcyA9IFsuLi52YXJpYWJsZXMsIC4uLmV4cHJlc3Npb25WYXJpYWJsZXNdOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHJldHVybiB2YXJpYWJsZXM7CiAgICB9LCBbXSk7CgogICAgLy8gcmVtb3ZlIGR1cGxpY2F0ZXMKICAgIHJldHVybiBBcnJheS5mcm9tKG5ldyBTZXQodmFyaWFibGVzKSk7CiAgfQoKICAvLyBoZWxwZXIgLy8vLy8vLy8vLy8vLy8vCgogIGZ1bmN0aW9uIGlzRXhwcmVzc2lvbiQxKHZhbHVlKSB7CiAgICByZXR1cm4gaXNTdHJpbmckMih2YWx1ZSkgJiYgdmFsdWUuc3RhcnRzV2l0aCgnPScpOwogIH0KCiAgY2xhc3MgSW1wb3J0ZXIgewogICAgLyoqCiAgICAgKiBAY29uc3RydWN0b3IKICAgICAqIEBwYXJhbSB7IGltcG9ydCgnLi4vY29yZScpLkZvcm1GaWVsZFJlZ2lzdHJ5IH0gZm9ybUZpZWxkUmVnaXN0cnkKICAgICAqIEBwYXJhbSB7IGltcG9ydCgnLi4vcmVuZGVyL0Zvcm1GaWVsZHMnKS5kZWZhdWx0IH0gZm9ybUZpZWxkcwogICAgICovCiAgICBjb25zdHJ1Y3Rvcihmb3JtRmllbGRSZWdpc3RyeSwgZm9ybUZpZWxkcykgewogICAgICB0aGlzLl9mb3JtRmllbGRSZWdpc3RyeSA9IGZvcm1GaWVsZFJlZ2lzdHJ5OwogICAgICB0aGlzLl9mb3JtRmllbGRzID0gZm9ybUZpZWxkczsKICAgIH0KCiAgICAvKioKICAgICAqIEltcG9ydCBzY2hlbWEgYWRkaW5nIGBpZGAsIGBfcGFyZW50YCBhbmQgYF9wYXRoYAogICAgICogaW5mb3JtYXRpb24gdG8gZWFjaCBmaWVsZCBhbmQgYWRkaW5nIGl0IHRvIHRoZQogICAgICogZm9ybSBmaWVsZCByZWdpc3RyeS4KICAgICAqCiAgICAgKiBAcGFyYW0ge2FueX0gc2NoZW1hCiAgICAgKiBAcGFyYW0ge2FueX0gW2RhdGFdCiAgICAgKgogICAgICogQHJldHVybiB7IHsgd2FybmluZ3M6IEFycmF5PGFueT4sIHNjaGVtYTogYW55LCBkYXRhOiBhbnkgfSB9CiAgICAgKi8KICAgIGltcG9ydFNjaGVtYShzY2hlbWEsIGRhdGEgPSB7fSkgewogICAgICAvLyBUT0RPOiBBZGQgd2FybmluZ3MgLSBodHRwczovL2dpdGh1Yi5jb20vYnBtbi1pby9mb3JtLWpzL2lzc3Vlcy8yODkKICAgICAgY29uc3Qgd2FybmluZ3MgPSBbXTsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCBpbXBvcnRlZFNjaGVtYSA9IHRoaXMuaW1wb3J0Rm9ybUZpZWxkKGNsb25lKHNjaGVtYSkpLAogICAgICAgICAgaW5pdGlhbGl6ZWREYXRhID0gdGhpcy5pbml0aWFsaXplRmllbGRWYWx1ZXMoY2xvbmUoZGF0YSkpOwogICAgICAgIHJldHVybiB7CiAgICAgICAgICB3YXJuaW5ncywKICAgICAgICAgIHNjaGVtYTogaW1wb3J0ZWRTY2hlbWEsCiAgICAgICAgICBkYXRhOiBpbml0aWFsaXplZERhdGEKICAgICAgICB9OwogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBlcnIud2FybmluZ3MgPSB3YXJuaW5nczsKICAgICAgICB0aHJvdyBlcnI7CiAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIEBwYXJhbSB7YW55fSBmb3JtRmllbGQKICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbcGFyZW50SWRdCiAgICAgKgogICAgICogQHJldHVybiB7YW55fSBpbXBvcnRlZEZpZWxkCiAgICAgKi8KICAgIGltcG9ydEZvcm1GaWVsZChmb3JtRmllbGQsIHBhcmVudElkKSB7CiAgICAgIGNvbnN0IHsKICAgICAgICBjb21wb25lbnRzLAogICAgICAgIGtleSwKICAgICAgICB0eXBlLAogICAgICAgIGlkID0gZ2VuZXJhdGVJZEZvclR5cGUodHlwZSkKICAgICAgfSA9IGZvcm1GaWVsZDsKICAgICAgaWYgKHBhcmVudElkKSB7CiAgICAgICAgLy8gc2V0IGZvcm0gZmllbGQgcGFyZW50CiAgICAgICAgZm9ybUZpZWxkLl9wYXJlbnQgPSBwYXJlbnRJZDsKICAgICAgfQogICAgICBpZiAoIXRoaXMuX2Zvcm1GaWVsZHMuZ2V0KHR5cGUpKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBmb3JtIGZpZWxkIG9mIHR5cGUgPCR7dHlwZX0+IG5vdCBzdXBwb3J0ZWRgKTsKICAgICAgfQogICAgICBpZiAoa2V5KSB7CiAgICAgICAgLy8gdmFsaWRhdGUgPGtleT4gdW5pcXVlbmVzcwogICAgICAgIGlmICh0aGlzLl9mb3JtRmllbGRSZWdpc3RyeS5fa2V5cy5hc3NpZ25lZChrZXkpKSB7CiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYGZvcm0gZmllbGQgd2l0aCBrZXkgPCR7a2V5fT4gYWxyZWFkeSBleGlzdHNgKTsKICAgICAgICB9CiAgICAgICAgdGhpcy5fZm9ybUZpZWxkUmVnaXN0cnkuX2tleXMuY2xhaW0oa2V5LCBmb3JtRmllbGQpOwoKICAgICAgICAvLyBUT0RPOiBidXR0b25zIHNob3VsZCBub3QgaGF2ZSBrZXkKICAgICAgICBpZiAodHlwZSAhPT0gJ2J1dHRvbicpIHsKICAgICAgICAgIC8vIHNldCBmb3JtIGZpZWxkIHBhdGgKICAgICAgICAgIGZvcm1GaWVsZC5fcGF0aCA9IFtrZXldOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoaWQpIHsKICAgICAgICAvLyB2YWxpZGF0ZSA8aWQ+IHVuaXF1ZW5lc3MKICAgICAgICBpZiAodGhpcy5fZm9ybUZpZWxkUmVnaXN0cnkuX2lkcy5hc3NpZ25lZChpZCkpIHsKICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgZm9ybSBmaWVsZCB3aXRoIGlkIDwke2lkfT4gYWxyZWFkeSBleGlzdHNgKTsKICAgICAgICB9CiAgICAgICAgdGhpcy5fZm9ybUZpZWxkUmVnaXN0cnkuX2lkcy5jbGFpbShpZCwgZm9ybUZpZWxkKTsKICAgICAgfQoKICAgICAgLy8gc2V0IGZvcm0gZmllbGQgSUQKICAgICAgZm9ybUZpZWxkLmlkID0gaWQ7CiAgICAgIHRoaXMuX2Zvcm1GaWVsZFJlZ2lzdHJ5LmFkZChmb3JtRmllbGQpOwogICAgICBpZiAoY29tcG9uZW50cykgewogICAgICAgIHRoaXMuaW1wb3J0Rm9ybUZpZWxkcyhjb21wb25lbnRzLCBpZCk7CiAgICAgIH0KICAgICAgcmV0dXJuIGZvcm1GaWVsZDsKICAgIH0KICAgIGltcG9ydEZvcm1GaWVsZHMoY29tcG9uZW50cywgcGFyZW50SWQpIHsKICAgICAgY29tcG9uZW50cy5mb3JFYWNoKGNvbXBvbmVudCA9PiB7CiAgICAgICAgdGhpcy5pbXBvcnRGb3JtRmllbGQoY29tcG9uZW50LCBwYXJlbnRJZCk7CiAgICAgIH0pOwogICAgfQoKICAgIC8qKgogICAgICogQHBhcmFtIHtPYmplY3R9IGRhdGEKICAgICAqCiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IGluaXRpYWxpemVkRGF0YQogICAgICovCiAgICBpbml0aWFsaXplRmllbGRWYWx1ZXMoZGF0YSkgewogICAgICByZXR1cm4gdGhpcy5fZm9ybUZpZWxkUmVnaXN0cnkuZ2V0QWxsKCkucmVkdWNlKChpbml0aWFsaXplZERhdGEsIGZvcm1GaWVsZCkgPT4gewogICAgICAgIGNvbnN0IHsKICAgICAgICAgIGRlZmF1bHRWYWx1ZSwKICAgICAgICAgIF9wYXRoLAogICAgICAgICAgdHlwZQogICAgICAgIH0gPSBmb3JtRmllbGQ7CgogICAgICAgIC8vIHRyeSB0byBnZXQgdmFsdWUgZnJvbSBkYXRhCiAgICAgICAgLy8gaWYgdW5hdmFpbGFibGUgLSB0cnkgdG8gZ2V0IGRlZmF1bHQgdmFsdWUgZnJvbSBmb3JtIGZpZWxkCiAgICAgICAgLy8gaWYgdW5hdmFpbGFibGUgLSBnZXQgZW1wdHkgdmFsdWUgZnJvbSBmb3JtIGZpZWxkCgogICAgICAgIGlmIChfcGF0aCkgewogICAgICAgICAgY29uc3QgZmllbGRJbXBsZW1lbnRhdGlvbiA9IHRoaXMuX2Zvcm1GaWVsZHMuZ2V0KHR5cGUpOwogICAgICAgICAgbGV0IHZhbHVlRGF0YSA9IGdldChkYXRhLCBfcGF0aCk7CiAgICAgICAgICBpZiAoIWlzVW5kZWZpbmVkJDEodmFsdWVEYXRhKSAmJiBmaWVsZEltcGxlbWVudGF0aW9uLnNhbml0aXplVmFsdWUpIHsKICAgICAgICAgICAgdmFsdWVEYXRhID0gZmllbGRJbXBsZW1lbnRhdGlvbi5zYW5pdGl6ZVZhbHVlKHsKICAgICAgICAgICAgICBmb3JtRmllbGQsCiAgICAgICAgICAgICAgZGF0YSwKICAgICAgICAgICAgICB2YWx1ZTogdmFsdWVEYXRhCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgY29uc3QgaW5pdGlhbGl6ZWRGaWVsZFZhbHVlID0gIWlzVW5kZWZpbmVkJDEodmFsdWVEYXRhKSA/IHZhbHVlRGF0YSA6ICFpc1VuZGVmaW5lZCQxKGRlZmF1bHRWYWx1ZSkgPyBkZWZhdWx0VmFsdWUgOiBmaWVsZEltcGxlbWVudGF0aW9uLmVtcHR5VmFsdWU7CiAgICAgICAgICBpbml0aWFsaXplZERhdGEgPSB7CiAgICAgICAgICAgIC4uLmluaXRpYWxpemVkRGF0YSwKICAgICAgICAgICAgW19wYXRoWzBdXTogaW5pdGlhbGl6ZWRGaWVsZFZhbHVlCiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgICByZXR1cm4gaW5pdGlhbGl6ZWREYXRhOwogICAgICB9LCBkYXRhKTsKICAgIH0KICB9CiAgSW1wb3J0ZXIuJGluamVjdCA9IFsnZm9ybUZpZWxkUmVnaXN0cnknLCAnZm9ybUZpZWxkcyddOwoKICB2YXIgaW1wb3J0TW9kdWxlID0gewogICAgaW1wb3J0ZXI6IFsndHlwZScsIEltcG9ydGVyXQogIH07CgogIGNvbnN0IE5PREVfVFlQRV9URVhUID0gMywKICAgIE5PREVfVFlQRV9FTEVNRU5UID0gMTsKICBjb25zdCBBTExPV0VEX05PREVTID0gWydoMScsICdoMicsICdoMycsICdoNCcsICdoNScsICdoNicsICdzcGFuJywgJ2VtJywgJ2EnLCAncCcsICdkaXYnLCAndWwnLCAnb2wnLCAnbGknLCAnaHInLCAnYmxvY2txdW90ZScsICdpbWcnLCAncHJlJywgJ2NvZGUnLCAnYnInLCAnc3Ryb25nJ107CiAgY29uc3QgQUxMT1dFRF9BVFRSSUJVVEVTID0gWydhbGlnbicsICdhbHQnLCAnY2xhc3MnLCAnaHJlZicsICdpZCcsICduYW1lJywgJ3JlbCcsICd0YXJnZXQnLCAnc3JjJ107CiAgY29uc3QgQUxMT1dFRF9VUklfUEFUVEVSTiA9IC9eKD86KD86KD86ZnxodCl0cHM/fG1haWx0b3x0ZWx8Y2FsbHRvfGNpZHx4bXBwKTp8W15hLXpdfFthLXorLlwtXSsoPzpbXmEteisuXC06XXwkKSkvaTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11c2VsZXNzLWVzY2FwZQogIGNvbnN0IEFMTE9XRURfSU1BR0VfU1JDX1BBVFRFUk4gPSAvXihodHRwcz98ZGF0YSk6LiovaTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11c2VsZXNzLWVzY2FwZQogIGNvbnN0IEFUVFJfV0hJVEVTUEFDRV9QQVRURVJOID0gL1tcdTAwMDAtXHUwMDIwXHUwMEEwXHUxNjgwXHUxODBFXHUyMDAwLVx1MjAyOVx1MjA1Rlx1MzAwMF0vZzsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb250cm9sLXJlZ2V4CgogIGNvbnN0IEZPUk1fRUxFTUVOVCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2Zvcm0nKTsKCiAgLyoqCiAgICogU2FuaXRpemUgYSBIVE1MIHN0cmluZyBhbmQgcmV0dXJuIHRoZSBjbGVhbmVkLCBzYWZlIHZlcnNpb24uCiAgICoKICAgKiBAcGFyYW0ge3N0cmluZ30gaHRtbAogICAqIEByZXR1cm4ge3N0cmluZ30KICAgKi8KICBmdW5jdGlvbiBzYW5pdGl6ZUhUTUwoaHRtbCkgewogICAgY29uc3QgZG9jID0gbmV3IERPTVBhcnNlcigpLnBhcnNlRnJvbVN0cmluZyhgPCFET0NUWVBFIGh0bWw+XG48aHRtbD48Ym9keT48ZGl2PiR7aHRtbH1gLCAndGV4dC9odG1sJyk7CiAgICBkb2Mubm9ybWFsaXplKCk7CiAgICBjb25zdCBlbGVtZW50ID0gZG9jLmJvZHkuZmlyc3RDaGlsZDsKICAgIGlmIChlbGVtZW50KSB7CiAgICAgIHNhbml0aXplTm9kZSggLyoqIEB0eXBlIEVsZW1lbnQgKi9lbGVtZW50KTsKICAgICAgcmV0dXJuIG5ldyBYTUxTZXJpYWxpemVyKCkuc2VyaWFsaXplVG9TdHJpbmcoZWxlbWVudCk7CiAgICB9IGVsc2UgewogICAgICAvLyBoYW5kbGUgdGhlIGNhc2UgdGhhdCBkb2N1bWVudCBwYXJzaW5nCiAgICAgIC8vIGRvZXMgbm90IHdvcmsgYXQgYWxsLCBkdWUgdG8gSFRNTCBnaWJiZXJpc2gKICAgICAgcmV0dXJuICcnOwogICAgfQogIH0KICBmdW5jdGlvbiBzYW5pdGl6ZUltYWdlU291cmNlKHNyYykgewogICAgY29uc3QgdmFsaWQgPSBBTExPV0VEX0lNQUdFX1NSQ19QQVRURVJOLnRlc3Qoc3JjKTsKICAgIHJldHVybiB2YWxpZCA/IHNyYyA6ICcnOwogIH0KCiAgLyoqCiAgICogUmVjdXJzaXZlbHkgc2FuaXRpemUgYSBIVE1MIG5vZGUsIHBvdGVudGlhbGx5CiAgICogcmVtb3ZpbmcgaXQsIGl0cyBjaGlsZHJlbiBvciBhdHRyaWJ1dGVzLgogICAqCiAgICogSW5zcGlyZWQgYnkgaHR0cHM6Ly9naXRodWIuY29tL2RldmVsb3BpdC9zbmFya2Rvd24vaXNzdWVzLzcwCiAgICogYW5kIGh0dHBzOi8vZ2l0aHViLmNvbS9jdXJlNTMvRE9NUHVyaWZ5LiBTaW1wbGlmaWVkCiAgICogZm9yIG91ciB1c2UtY2FzZS4KICAgKgogICAqIEBwYXJhbSB7RWxlbWVudH0gbm9kZQogICAqLwogIGZ1bmN0aW9uIHNhbml0aXplTm9kZShub2RlKSB7CiAgICAvLyBhbGxvdyB0ZXh0IG5vZGVzCiAgICBpZiAobm9kZS5ub2RlVHlwZSA9PT0gTk9ERV9UWVBFX1RFWFQpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIC8vIGRpc2FsbG93IGFsbCBvdGhlciBub2RlcyBidXQgRWxlbWVudAogICAgaWYgKG5vZGUubm9kZVR5cGUgIT09IE5PREVfVFlQRV9FTEVNRU5UKSB7CiAgICAgIHJldHVybiBub2RlLnJlbW92ZSgpOwogICAgfQogICAgY29uc3QgbGNUYWcgPSBub2RlLnRhZ05hbWUudG9Mb3dlckNhc2UoKTsKCiAgICAvLyBkaXNhbGxvdyBub24td2hpdGVsaXN0ZWQgdGFncwogICAgaWYgKCFBTExPV0VEX05PREVTLmluY2x1ZGVzKGxjVGFnKSkgewogICAgICByZXR1cm4gbm9kZS5yZW1vdmUoKTsKICAgIH0KICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSBub2RlLmF0dHJpYnV0ZXM7CgogICAgLy8gY2xlYW4gYXR0cmlidXRlcwogICAgZm9yIChsZXQgaSA9IGF0dHJpYnV0ZXMubGVuZ3RoOyBpLS07KSB7CiAgICAgIGNvbnN0IGF0dHJpYnV0ZSA9IGF0dHJpYnV0ZXNbaV07CiAgICAgIGNvbnN0IG5hbWUgPSBhdHRyaWJ1dGUubmFtZTsKICAgICAgY29uc3QgbGNOYW1lID0gbmFtZS50b0xvd2VyQ2FzZSgpOwoKICAgICAgLy8gbm9ybWFsaXplIG5vZGUgdmFsdWUKICAgICAgY29uc3QgdmFsdWUgPSBhdHRyaWJ1dGUudmFsdWUudHJpbSgpOwogICAgICBub2RlLnJlbW92ZUF0dHJpYnV0ZShuYW1lKTsKICAgICAgY29uc3QgdmFsaWQgPSBpc1ZhbGlkQXR0cmlidXRlKGxjVGFnLCBsY05hbWUsIHZhbHVlKTsKICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUobmFtZSwgdmFsdWUpOwogICAgICB9CiAgICB9CgogICAgLy8gZm9yY2Ugbm9vcGVuZXIgb24gdGFyZ2V0PSJfYmxhbmsiIGxpbmtzCiAgICBpZiAobGNUYWcgPT09ICdhJyAmJiBub2RlLmdldEF0dHJpYnV0ZSgndGFyZ2V0JykgPT09ICdfYmxhbmsnICYmIG5vZGUuZ2V0QXR0cmlidXRlKCdyZWwnKSAhPT0gJ25vb3BlbmVyJykgewogICAgICBub2RlLnNldEF0dHJpYnV0ZSgncmVsJywgJ25vb3BlbmVyJyk7CiAgICB9CiAgICBmb3IgKGxldCBpID0gbm9kZS5jaGlsZE5vZGVzLmxlbmd0aDsgaS0tOykgewogICAgICBzYW5pdGl6ZU5vZGUoIC8qKiBAdHlwZSBFbGVtZW50ICovbm9kZS5jaGlsZE5vZGVzW2ldKTsKICAgIH0KICB9CgogIC8qKgogICAqIFZhbGlkYXRlcyBhdHRyaWJ1dGVzIGZvciB2YWxpZGl0eS4KICAgKgogICAqIEBwYXJhbSB7c3RyaW5nfSBsY1RhZwogICAqIEBwYXJhbSB7c3RyaW5nfSBsY05hbWUKICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUKICAgKiBAcmV0dXJuIHtib29sZWFufQogICAqLwogIGZ1bmN0aW9uIGlzVmFsaWRBdHRyaWJ1dGUobGNUYWcsIGxjTmFtZSwgdmFsdWUpIHsKICAgIC8vIGRpc2FsbG93IG1vc3QgYXR0cmlidXRlcyBiYXNlZCBvbiB3aGl0ZWxpc3QKICAgIGlmICghQUxMT1dFRF9BVFRSSUJVVEVTLmluY2x1ZGVzKGxjTmFtZSkpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIC8vIGRpc2FsbG93ICJET00gY2xvYmJlcmluZyIgLyBwb2x1dGlvbiBvZiBkb2N1bWVudCBhbmQgd3JhcHBpbmcgZm9ybSBlbGVtZW50cwogICAgaWYgKChsY05hbWUgPT09ICdpZCcgfHwgbGNOYW1lID09PSAnbmFtZScpICYmICh2YWx1ZSBpbiBkb2N1bWVudCB8fCB2YWx1ZSBpbiBGT1JNX0VMRU1FTlQpKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIGlmIChsY05hbWUgPT09ICd0YXJnZXQnICYmIHZhbHVlICE9PSAnX2JsYW5rJykgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgLy8gYWxsb3cgdmFsaWQgdXJsIGxpbmtzIG9ubHkKICAgIGlmIChsY05hbWUgPT09ICdocmVmJyAmJiAhQUxMT1dFRF9VUklfUEFUVEVSTi50ZXN0KHZhbHVlLnJlcGxhY2UoQVRUUl9XSElURVNQQUNFX1BBVFRFUk4sICcnKSkpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgcmV0dXJuIHRydWU7CiAgfQoKICBmdW5jdGlvbiBmb3JtRmllbGRDbGFzc2VzKHR5cGUsIHsKICAgIGVycm9ycyA9IFtdLAogICAgZGlzYWJsZWQgPSBmYWxzZQogIH0gPSB7fSkgewogICAgaWYgKCF0eXBlKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcigndHlwZSByZXF1aXJlZCcpOwogICAgfQogICAgcmV0dXJuIGNsYXNzTmFtZXMoJ2Zqcy1mb3JtLWZpZWxkJywgYGZqcy1mb3JtLWZpZWxkLSR7dHlwZX1gLCB7CiAgICAgICdmanMtaGFzLWVycm9ycyc6IGVycm9ycy5sZW5ndGggPiAwLAogICAgICAnZmpzLWRpc2FibGVkJzogZGlzYWJsZWQKICAgIH0pOwogIH0KICBmdW5jdGlvbiBwcmVmaXhJZChpZCwgZm9ybUlkKSB7CiAgICBpZiAoZm9ybUlkKSB7CiAgICAgIHJldHVybiBgZmpzLWZvcm0tJHtmb3JtSWR9LSR7aWR9YDsKICAgIH0KICAgIHJldHVybiBgZmpzLWZvcm0tJHtpZH1gOwogIH0KICBmdW5jdGlvbiBtYXJrZG93blRvSFRNTChtYXJrZG93bikgewogICAgY29uc3QgaHRtbHMgPSBtYXJrZG93bi50b1N0cmluZygpLnNwbGl0KC8oPzpccj9cbil7Mix9LykubWFwKGxpbmUgPT4gL14oKFxkKy4pfFs+PFxzIy0qXSkvLnRlc3QobGluZSkgPyB0JDIobGluZSkgOiBgPHA+JHt0JDIobGluZSl9PC9wPmApOwogICAgcmV0dXJuIGh0bWxzLmpvaW4oJ1xuXG4nKTsKICB9CgogIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vZGV2ZWxvcGl0L3NuYXJrZG93bi9pc3N1ZXMvNzAKICBmdW5jdGlvbiBzYWZlTWFya2Rvd24obWFya2Rvd24pIHsKICAgIGNvbnN0IGh0bWwgPSBtYXJrZG93blRvSFRNTChtYXJrZG93bik7CiAgICByZXR1cm4gc2FuaXRpemVIVE1MKGh0bWwpOwogIH0KCiAgLyoqCiAgICogU2FuaXRpemVzIGFuIGltYWdlIHNvdXJjZSB0byBlbnN1cmUgd2Ugb25seSBhbGxvdyBmb3IgZGF0YSBVUkkgYW5kIGxpbmtzCiAgICogdGhhdCBzdGFydCB3aXRoIGh0dHAocykuCiAgICoKICAgKiBOb3RlOiBNb3N0IGJyb3dzZXJzIGFueXdheSBkbyBub3Qgc3VwcG9ydCBzY3JpcHQgZXhlY3V0aW9uIGluIDxpbWc+IGVsZW1lbnRzLgogICAqCiAgICogQHBhcmFtIHtzdHJpbmd9IHNyYwogICAqIEByZXR1cm5zIHtzdHJpbmd9CiAgICovCiAgZnVuY3Rpb24gc2FmZUltYWdlU291cmNlKHNyYykgewogICAgcmV0dXJuIHNhbml0aXplSW1hZ2VTb3VyY2Uoc3JjKTsKICB9CgogIGNvbnN0IHR5cGUkYiA9ICdidXR0b24nOwogIGZ1bmN0aW9uIEJ1dHRvbihwcm9wcykgewogICAgY29uc3QgewogICAgICBkaXNhYmxlZCwKICAgICAgZmllbGQKICAgIH0gPSBwcm9wczsKICAgIGNvbnN0IHsKICAgICAgYWN0aW9uID0gJ3N1Ym1pdCcKICAgIH0gPSBmaWVsZDsKICAgIHJldHVybiBlJDIoImRpdiIsIHsKICAgICAgY2xhc3M6IGZvcm1GaWVsZENsYXNzZXModHlwZSRiKSwKICAgICAgY2hpbGRyZW46IGUkMigiYnV0dG9uIiwgewogICAgICAgIGNsYXNzOiAiZmpzLWJ1dHRvbiIsCiAgICAgICAgdHlwZTogYWN0aW9uLAogICAgICAgIGRpc2FibGVkOiBkaXNhYmxlZCwKICAgICAgICBjaGlsZHJlbjogZmllbGQubGFiZWwKICAgICAgfSkKICAgIH0pOwogIH0KICBCdXR0b24uY3JlYXRlID0gZnVuY3Rpb24gKG9wdGlvbnMgPSB7fSkgewogICAgcmV0dXJuIHsKICAgICAgYWN0aW9uOiAnc3VibWl0JywKICAgICAgLi4ub3B0aW9ucwogICAgfTsKICB9OwogIEJ1dHRvbi50eXBlID0gdHlwZSRiOwogIEJ1dHRvbi5sYWJlbCA9ICdCdXR0b24nOwogIEJ1dHRvbi5rZXllZCA9IHRydWU7CgogIGNvbnN0IEZvcm1SZW5kZXJDb250ZXh0ID0gRCQxKHsKICAgIEVtcHR5OiBwcm9wcyA9PiB7CiAgICAgIHJldHVybiBudWxsOwogICAgfSwKICAgIENoaWxkcmVuOiBwcm9wcyA9PiB7CiAgICAgIHJldHVybiBwcm9wcy5jaGlsZHJlbjsKICAgIH0sCiAgICBFbGVtZW50OiBwcm9wcyA9PiB7CiAgICAgIHJldHVybiBwcm9wcy5jaGlsZHJlbjsKICAgIH0KICB9KTsKCiAgLyoqCiAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUKICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtzdHJpY3RdCiAgICoKICAgKiBAcmV0dXJucyB7YW55fQogICAqLwogIGZ1bmN0aW9uIGdldFNlcnZpY2UodHlwZSwgc3RyaWN0KSB7fQogIGNvbnN0IEZvcm1Db250ZXh0ID0gRCQxKHsKICAgIGdldFNlcnZpY2UsCiAgICBmb3JtSWQ6IG51bGwKICB9KTsKCiAgZnVuY3Rpb24gRGVzY3JpcHRpb24ocHJvcHMpIHsKICAgIGNvbnN0IHsKICAgICAgZGVzY3JpcHRpb24KICAgIH0gPSBwcm9wczsKICAgIGlmICghZGVzY3JpcHRpb24pIHsKICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgICByZXR1cm4gZSQyKCJkaXYiLCB7CiAgICAgIGNsYXNzOiAiZmpzLWZvcm0tZmllbGQtZGVzY3JpcHRpb24iLAogICAgICBjaGlsZHJlbjogZGVzY3JpcHRpb24KICAgIH0pOwogIH0KCiAgZnVuY3Rpb24gRXJyb3JzKHByb3BzKSB7CiAgICBjb25zdCB7CiAgICAgIGVycm9ycwogICAgfSA9IHByb3BzOwogICAgaWYgKCFlcnJvcnMubGVuZ3RoKSB7CiAgICAgIHJldHVybiBudWxsOwogICAgfQogICAgcmV0dXJuIGUkMigiZGl2IiwgewogICAgICBjbGFzczogImZqcy1mb3JtLWZpZWxkLWVycm9yIiwKICAgICAgY2hpbGRyZW46IGUkMigidWwiLCB7CiAgICAgICAgY2hpbGRyZW46IGVycm9ycy5tYXAoZXJyb3IgPT4gewogICAgICAgICAgcmV0dXJuIGUkMigibGkiLCB7CiAgICAgICAgICAgIGNoaWxkcmVuOiBlcnJvcgogICAgICAgICAgfSk7CiAgICAgICAgfSkKICAgICAgfSkKICAgIH0pOwogIH0KCiAgZnVuY3Rpb24gTGFiZWwocHJvcHMpIHsKICAgIGNvbnN0IHsKICAgICAgaWQsCiAgICAgIGxhYmVsLAogICAgICBjb2xsYXBzZU9uRW1wdHkgPSB0cnVlLAogICAgICByZXF1aXJlZCA9IGZhbHNlCiAgICB9ID0gcHJvcHM7CiAgICByZXR1cm4gZSQyKCJsYWJlbCIsIHsKICAgICAgZm9yOiBpZCwKICAgICAgY2xhc3M6IGNsYXNzTmFtZXMoJ2Zqcy1mb3JtLWZpZWxkLWxhYmVsJywgewogICAgICAgICdmanMtaW5jb2xsYXBzaWJsZS1sYWJlbCc6ICFjb2xsYXBzZU9uRW1wdHkKICAgICAgfSwgcHJvcHNbJ2NsYXNzJ10pLAogICAgICBjaGlsZHJlbjogW3Byb3BzLmNoaWxkcmVuLCBsYWJlbCB8fCAnJywgcmVxdWlyZWQgJiYgZSQyKCJzcGFuIiwgewogICAgICAgIGNsYXNzOiAiZmpzLWFzdGVyaXgiLAogICAgICAgIGNoaWxkcmVuOiAiKiIKICAgICAgfSldCiAgICB9KTsKICB9CgogIGNvbnN0IHR5cGUkYSA9ICdjaGVja2JveCc7CiAgZnVuY3Rpb24gQ2hlY2tib3gocHJvcHMpIHsKICAgIGNvbnN0IHsKICAgICAgZGlzYWJsZWQsCiAgICAgIGVycm9ycyA9IFtdLAogICAgICBmaWVsZCwKICAgICAgdmFsdWUgPSBmYWxzZQogICAgfSA9IHByb3BzOwogICAgY29uc3QgewogICAgICBkZXNjcmlwdGlvbiwKICAgICAgaWQsCiAgICAgIGxhYmVsCiAgICB9ID0gZmllbGQ7CiAgICBjb25zdCBvbkNoYW5nZSA9ICh7CiAgICAgIHRhcmdldAogICAgfSkgPT4gewogICAgICBwcm9wcy5vbkNoYW5nZSh7CiAgICAgICAgZmllbGQsCiAgICAgICAgdmFsdWU6IHRhcmdldC5jaGVja2VkCiAgICAgIH0pOwogICAgfTsKICAgIGNvbnN0IHsKICAgICAgZm9ybUlkCiAgICB9ID0gRiQxKEZvcm1Db250ZXh0KTsKICAgIHJldHVybiBlJDIoImRpdiIsIHsKICAgICAgY2xhc3M6IGNsYXNzTmFtZXMoZm9ybUZpZWxkQ2xhc3Nlcyh0eXBlJGEsIHsKICAgICAgICBlcnJvcnMsCiAgICAgICAgZGlzYWJsZWQKICAgICAgfSksIHsKICAgICAgICAnZmpzLWNoZWNrZWQnOiB2YWx1ZQogICAgICB9KSwKICAgICAgY2hpbGRyZW46IFtlJDIoTGFiZWwsIHsKICAgICAgICBpZDogcHJlZml4SWQoaWQsIGZvcm1JZCksCiAgICAgICAgbGFiZWw6IGxhYmVsLAogICAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgICBjaGlsZHJlbjogZSQyKCJpbnB1dCIsIHsKICAgICAgICAgIGNoZWNrZWQ6IHZhbHVlLAogICAgICAgICAgY2xhc3M6ICJmanMtaW5wdXQiLAogICAgICAgICAgZGlzYWJsZWQ6IGRpc2FibGVkLAogICAgICAgICAgaWQ6IHByZWZpeElkKGlkLCBmb3JtSWQpLAogICAgICAgICAgdHlwZTogImNoZWNrYm94IiwKICAgICAgICAgIG9uQ2hhbmdlOiBvbkNoYW5nZQogICAgICAgIH0pCiAgICAgIH0pLCBlJDIoRGVzY3JpcHRpb24sIHsKICAgICAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24KICAgICAgfSksIGUkMihFcnJvcnMsIHsKICAgICAgICBlcnJvcnM6IGVycm9ycwogICAgICB9KV0KICAgIH0pOwogIH0KICBDaGVja2JveC5jcmVhdGUgPSBmdW5jdGlvbiAob3B0aW9ucyA9IHt9KSB7CiAgICByZXR1cm4gewogICAgICAuLi5vcHRpb25zCiAgICB9OwogIH07CiAgQ2hlY2tib3gudHlwZSA9IHR5cGUkYTsKICBDaGVja2JveC5sYWJlbCA9ICdDaGVja2JveCc7CiAgQ2hlY2tib3gua2V5ZWQgPSB0cnVlOwogIENoZWNrYm94LmVtcHR5VmFsdWUgPSBmYWxzZTsKICBDaGVja2JveC5zYW5pdGl6ZVZhbHVlID0gKHsKICAgIHZhbHVlCiAgfSkgPT4gdmFsdWUgPT09IHRydWU7CgogIGZ1bmN0aW9uIHVzZVNlcnZpY2UgKHR5cGUsIHN0cmljdCkgewogICAgY29uc3QgewogICAgICBnZXRTZXJ2aWNlCiAgICB9ID0gRiQxKEZvcm1Db250ZXh0KTsKICAgIHJldHVybiBnZXRTZXJ2aWNlKHR5cGUsIHN0cmljdCk7CiAgfQoKICAvKioKICAgKiBAZW51bSB7IFN0cmluZyB9CiAgICovCiAgY29uc3QgTE9BRF9TVEFURVMgPSB7CiAgICBMT0FESU5HOiAnbG9hZGluZycsCiAgICBMT0FERUQ6ICdsb2FkZWQnLAogICAgRVJST1I6ICdlcnJvcicKICB9OwoKICAvKioKICAgKiBAdHlwZWRlZiB7T2JqZWN0fSBWYWx1ZXNHZXR0ZXIKICAgKiBAcHJvcGVydHkge09iamVjdFtdfSB2YWx1ZXMgLSBUaGUgdmFsdWVzIGRhdGEKICAgKiBAcHJvcGVydHkgeyhMT0FEX1NUQVRFUyl9IHN0YXRlIC0gVGhlIHZhbHVlcyBkYXRhJ3MgbG9hZGluZyBzdGF0ZSwgdG8gdXNlIGZvciBjb25kaXRpb25hbCByZW5kZXJpbmcKICAgKi8KCiAgLyoqCiAgICogQSBob29rIHRvIGxvYWQgdmFsdWVzIGZvciBzaW5nbGUgYW5kIG11bHRpc2VsZWN0IGNvbXBvbmVudHMuCiAgICoKICAgKiBAcGFyYW0ge09iamVjdH0gZmllbGQgLSBUaGUgZm9ybSBmaWVsZCB0byBoYW5kbGUgdmFsdWVzIGZvcgogICAqIEByZXR1cm4ge1ZhbHVlc0dldHRlcn0gdmFsdWVzR2V0dGVyIC0gQSB2YWx1ZXMgZ2V0dGVyIG9iamVjdCBwcm92aWRpbmcgbG9hZGluZyBzdGF0ZSBhbmQgdmFsdWVzCiAgICovCiAgZnVuY3Rpb24gdXNlVmFsdWVzQXN5bmMgKGZpZWxkKSB7CiAgICBjb25zdCB7CiAgICAgIHZhbHVlc0tleSwKICAgICAgdmFsdWVzOiBzdGF0aWNWYWx1ZXMKICAgIH0gPSBmaWVsZDsKICAgIGNvbnN0IFt2YWx1ZXNHZXR0ZXIsIHNldFZhbHVlc0dldHRlcl0gPSBsJDEoewogICAgICB2YWx1ZXM6IFtdLAogICAgICBlcnJvcjogdW5kZWZpbmVkLAogICAgICBzdGF0ZTogTE9BRF9TVEFURVMuTE9BRElORwogICAgfSk7CiAgICBjb25zdCBpbml0aWFsRGF0YSA9IHVzZVNlcnZpY2UoJ2Zvcm0nKS5fZ2V0U3RhdGUoKS5pbml0aWFsRGF0YTsKICAgIHkoKCkgPT4gewogICAgICBsZXQgdmFsdWVzID0gW107CiAgICAgIGlmICh2YWx1ZXNLZXkgIT09IHVuZGVmaW5lZCkgewogICAgICAgIGNvbnN0IGtleWVkVmFsdWVzID0gKGluaXRpYWxEYXRhIHx8IHt9KVt2YWx1ZXNLZXldOwogICAgICAgIGlmIChrZXllZFZhbHVlcyAmJiBBcnJheS5pc0FycmF5KGtleWVkVmFsdWVzKSkgewogICAgICAgICAgdmFsdWVzID0ga2V5ZWRWYWx1ZXM7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKHN0YXRpY1ZhbHVlcyAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgdmFsdWVzID0gQXJyYXkuaXNBcnJheShzdGF0aWNWYWx1ZXMpID8gc3RhdGljVmFsdWVzIDogW107CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc2V0VmFsdWVzR2V0dGVyKGdldEVycm9yU3RhdGUoJ05vIHZhbHVlcyBzb3VyY2UgZGVmaW5lZCBpbiB0aGUgZm9ybSBkZWZpbml0aW9uJykpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBzZXRWYWx1ZXNHZXR0ZXIoYnVpbGRMb2FkZWRTdGF0ZSh2YWx1ZXMpKTsKICAgIH0sIFt2YWx1ZXNLZXksIHN0YXRpY1ZhbHVlcywgaW5pdGlhbERhdGFdKTsKICAgIHJldHVybiB2YWx1ZXNHZXR0ZXI7CiAgfQogIGNvbnN0IGdldEVycm9yU3RhdGUgPSBlcnJvciA9PiAoewogICAgdmFsdWVzOiBbXSwKICAgIGVycm9yLAogICAgc3RhdGU6IExPQURfU1RBVEVTLkVSUk9SCiAgfSk7CiAgY29uc3QgYnVpbGRMb2FkZWRTdGF0ZSA9IHZhbHVlcyA9PiAoewogICAgdmFsdWVzLAogICAgZXJyb3I6IHVuZGVmaW5lZCwKICAgIHN0YXRlOiBMT0FEX1NUQVRFUy5MT0FERUQKICB9KTsKCiAgY29uc3QgRU5URVJfS0VZRE9XTl9FVkVOVCA9IG5ldyBLZXlib2FyZEV2ZW50KCdrZXlkb3duJywgewogICAgY29kZTogJ0VudGVyJywKICAgIGtleTogJ0VudGVyJywKICAgIGNoYXJDb2RlOiAxMywKICAgIGtleUNvZGU6IDEzLAogICAgdmlldzogd2luZG93LAogICAgYnViYmxlczogdHJ1ZQogIH0pOwogIGZ1bmN0aW9uIGZvY3VzUmVsZXZhbnRGbGF0cGlja2VyRGF5KGZsYXRwaWNrckluc3RhbmNlKSB7CiAgICBpZiAoIWZsYXRwaWNrckluc3RhbmNlKSByZXR1cm47CiAgICAhZmxhdHBpY2tySW5zdGFuY2UuaXNPcGVuICYmIGZsYXRwaWNrckluc3RhbmNlLm9wZW4oKTsKICAgIGNvbnN0IGNvbnRhaW5lciA9IGZsYXRwaWNrckluc3RhbmNlLmNhbGVuZGFyQ29udGFpbmVyOwogICAgY29uc3QgZGF5VG9Gb2N1cyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZmxhdHBpY2tyLWRheS5zZWxlY3RlZCcpIHx8IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZmxhdHBpY2tyLWRheS50b2RheScpIHx8IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZmxhdHBpY2tyLWRheScpOwogICAgZGF5VG9Gb2N1cyAmJiBkYXlUb0ZvY3VzLmZvY3VzKCk7CiAgfQogIGZ1bmN0aW9uIGZvcm1hdFRpbWUodXNlMjRoLCBtaW51dGVzKSB7CiAgICBpZiAobWludXRlcyA9PT0gbnVsbCkgcmV0dXJuIG51bGw7CiAgICBjb25zdCB3cmFwcGVkTWludXRlcyA9IG1pbnV0ZXMgJSAoMjQgKiA2MCk7CiAgICBjb25zdCBtaW51dGUgPSBtaW51dGVzICUgNjA7CiAgICBsZXQgaG91ciA9IE1hdGguZmxvb3Iod3JhcHBlZE1pbnV0ZXMgLyA2MCk7CiAgICBpZiAodXNlMjRoKSB7CiAgICAgIHJldHVybiBfZ2V0WmVyb1BhZGRlZFN0cmluZyhob3VyKSArICc6JyArIF9nZXRaZXJvUGFkZGVkU3RyaW5nKG1pbnV0ZSk7CiAgICB9CiAgICBob3VyID0gaG91ciAlIDEyIHx8IDEyOwogICAgY29uc3QgaXNQTSA9IHdyYXBwZWRNaW51dGVzID49IDEyICogNjA7CiAgICByZXR1cm4gX2dldFplcm9QYWRkZWRTdHJpbmcoaG91cikgKyAnOicgKyBfZ2V0WmVyb1BhZGRlZFN0cmluZyhtaW51dGUpICsgJyAnICsgKGlzUE0gPyAnUE0nIDogJ0FNJyk7CiAgfQogIGZ1bmN0aW9uIHBhcnNlSW5wdXRUaW1lKHN0cmluZ1RpbWUpIHsKICAgIGxldCB3b3JraW5nU3RyaW5nID0gc3RyaW5nVGltZS50b0xvd2VyQ2FzZSgpOwogICAgY29uc3QgaXMxMmggPSB3b3JraW5nU3RyaW5nLmluY2x1ZGVzKCdhbScpIHx8IHdvcmtpbmdTdHJpbmcuaW5jbHVkZXMoJ3BtJyk7CiAgICBpZiAoaXMxMmgpIHsKICAgICAgY29uc3QgaXNQTSA9IHdvcmtpbmdTdHJpbmcuaW5jbHVkZXMoJ3BtJyk7CiAgICAgIGNvbnN0IGRpZ2l0cyA9IHdvcmtpbmdTdHJpbmcubWF0Y2goL1xkKy9nKTsKICAgICAgY29uc3QgZGlzcGxheUhvdXIgPSBwYXJzZUludChkaWdpdHM/LlswXSk7CiAgICAgIGNvbnN0IG1pbnV0ZSA9IHBhcnNlSW50KGRpZ2l0cz8uWzFdKSB8fCAwOwogICAgICBjb25zdCBpc1ZhbGlkRGlzcGxheUhvdXIgPSBpc051bWJlciQyKGRpc3BsYXlIb3VyKSAmJiBkaXNwbGF5SG91ciA+PSAxICYmIGRpc3BsYXlIb3VyIDw9IDEyOwogICAgICBjb25zdCBpc1ZhbGlkTWludXRlID0gbWludXRlID49IDAgJiYgbWludXRlIDw9IDU5OwogICAgICBpZiAoIWlzVmFsaWREaXNwbGF5SG91ciB8fCAhaXNWYWxpZE1pbnV0ZSkgcmV0dXJuIG51bGw7CiAgICAgIGNvbnN0IGhvdXIgPSBkaXNwbGF5SG91ciAlIDEyICsgKGlzUE0gPyAxMiA6IDApOwogICAgICByZXR1cm4gaG91ciAqIDYwICsgbWludXRlOwogICAgfSBlbHNlIHsKICAgICAgY29uc3QgZGlnaXRzID0gd29ya2luZ1N0cmluZy5tYXRjaCgvXGQrL2cpOwogICAgICBjb25zdCBob3VyID0gcGFyc2VJbnQoZGlnaXRzPy5bMF0pOwogICAgICBjb25zdCBtaW51dGUgPSBwYXJzZUludChkaWdpdHM/LlsxXSk7CiAgICAgIGNvbnN0IGlzVmFsaWRIb3VyID0gaXNOdW1iZXIkMihob3VyKSAmJiBob3VyID49IDAgJiYgaG91ciA8PSAyMzsKICAgICAgY29uc3QgaXNWYWxpZE1pbnV0ZSA9IGlzTnVtYmVyJDIobWludXRlKSAmJiBtaW51dGUgPj0gMCAmJiBtaW51dGUgPD0gNTk7CiAgICAgIGlmICghaXNWYWxpZEhvdXIgfHwgIWlzVmFsaWRNaW51dGUpIHJldHVybiBudWxsOwogICAgICByZXR1cm4gaG91ciAqIDYwICsgbWludXRlOwogICAgfQogIH0KICBmdW5jdGlvbiBzZXJpYWxpemVUaW1lKG1pbnV0ZXMsIG9mZnNldCwgdGltZVNlcmlhbGl6aW5nRm9ybWF0KSB7CiAgICBpZiAodGltZVNlcmlhbGl6aW5nRm9ybWF0ID09PSBUSU1FX1NFUklBTElTSU5HX0ZPUk1BVFMuVVRDX05PUk1BTElaRUQpIHsKICAgICAgY29uc3Qgbm9ybWFsaXplZE1pbnV0ZXMgPSAobWludXRlcyArIG9mZnNldCArIE1JTlVURVNfSU5fREFZKSAlIE1JTlVURVNfSU5fREFZOwogICAgICByZXR1cm4gX2dldFplcm9QYWRkZWRTdHJpbmcoTWF0aC5mbG9vcihub3JtYWxpemVkTWludXRlcyAvIDYwKSkgKyAnOicgKyBfZ2V0WmVyb1BhZGRlZFN0cmluZyhub3JtYWxpemVkTWludXRlcyAlIDYwKSArICdaJzsKICAgIH0KICAgIGNvbnN0IGJhc2VUaW1lID0gX2dldFplcm9QYWRkZWRTdHJpbmcoTWF0aC5mbG9vcihtaW51dGVzIC8gNjApKSArICc6JyArIF9nZXRaZXJvUGFkZGVkU3RyaW5nKG1pbnV0ZXMgJSA2MCk7CiAgICBjb25zdCBhZGRVVENPZmZzZXQgPSB0aW1lU2VyaWFsaXppbmdGb3JtYXQgPT09IFRJTUVfU0VSSUFMSVNJTkdfRk9STUFUUy5VVENfT0ZGU0VUOwogICAgcmV0dXJuIGJhc2VUaW1lICsgKGFkZFVUQ09mZnNldCA/IGZvcm1hdFRpbWV6b25lT2Zmc2V0KG9mZnNldCkgOiAnJyk7CiAgfQogIGZ1bmN0aW9uIHBhcnNlSXNvVGltZShpc29UaW1lU3RyaW5nKSB7CiAgICBpZiAoIWlzb1RpbWVTdHJpbmcpIHJldHVybiBudWxsOwogICAgY29uc3QgcGFyc2VCYXNpY01pbnV0ZXMgPSB0aW1lU3RyaW5nID0+IHsKICAgICAgY29uc3QgdGltZVNlZ21lbnRzID0gdGltZVN0cmluZy5zcGxpdCgnOicpOwogICAgICBjb25zdCBob3VyID0gcGFyc2VJbnQodGltZVNlZ21lbnRzWzBdKTsKICAgICAgY29uc3QgbWludXRlID0gdGltZVNlZ21lbnRzLmxlbmd0aCA+IDEgPyBwYXJzZUludCh0aW1lU2VnbWVudHNbMV0pIDogMDsKICAgICAgaWYgKGlzTmFOKGhvdXIpIHx8IGhvdXIgPCAwIHx8IGhvdXIgPiAyNCB8fCBpc05hTihtaW51dGUpIHx8IG1pbnV0ZSA8IDAgfHwgbWludXRlID4gNjApIHJldHVybiBudWxsOwogICAgICByZXR1cm4gaG91ciAqIDYwICsgbWludXRlOwogICAgfTsKICAgIGNvbnN0IGxvY2FsT2Zmc2V0ID0gbmV3IERhdGUoKS5nZXRUaW1lem9uZU9mZnNldCgpOwoKICAgIC8vIFBhcnNlIG5vcm1hbGl6ZWQgdGltZQogICAgaWYgKGlzb1RpbWVTdHJpbmcuaW5jbHVkZXMoJ1onKSkgewogICAgICBpc29UaW1lU3RyaW5nID0gaXNvVGltZVN0cmluZy5yZXBsYWNlKCdaJywgJycpOwogICAgICBjb25zdCBtaW51dGVzID0gcGFyc2VCYXNpY01pbnV0ZXMoaXNvVGltZVN0cmluZyk7CiAgICAgIGlmIChtaW51dGVzID09PSBudWxsKSByZXR1cm4gbnVsbDsKICAgICAgcmV0dXJuIChtaW51dGVzIC0gbG9jYWxPZmZzZXQgKyBNSU5VVEVTX0lOX0RBWSkgJSBNSU5VVEVTX0lOX0RBWTsKICAgIH0KCiAgICAvLyBQYXJzZSBvZmZzZXQgcG9zaXRpdmUgdGltZQogICAgZWxzZSBpZiAoaXNvVGltZVN0cmluZy5pbmNsdWRlcygnKycpKSB7CiAgICAgIGNvbnN0IFt0aW1lU3RyaW5nLCBvZmZzZXRTdHJpbmddID0gaXNvVGltZVN0cmluZy5zcGxpdCgnKycpOwogICAgICBjb25zdCBtaW51dGVzID0gcGFyc2VCYXNpY01pbnV0ZXModGltZVN0cmluZyk7CiAgICAgIGxldCBpbmJvdW5kT2Zmc2V0ID0gcGFyc2VCYXNpY01pbnV0ZXMob2Zmc2V0U3RyaW5nKTsKICAgICAgaWYgKG1pbnV0ZXMgPT09IG51bGwgfHwgaW5ib3VuZE9mZnNldCA9PT0gbnVsbCkgcmV0dXJuIG51bGw7CgogICAgICAvLyBUaGUgb2Zmc2V0IGlzIGZsaXBwZWQgZm9yIGNvbnNpc3RlbmN5IHdpdGggamF2YXNjcmlwdAogICAgICBpbmJvdW5kT2Zmc2V0ID0gLWluYm91bmRPZmZzZXQ7CiAgICAgIHJldHVybiAobWludXRlcyArIGluYm91bmRPZmZzZXQgLSBsb2NhbE9mZnNldCArIE1JTlVURVNfSU5fREFZKSAlIE1JTlVURVNfSU5fREFZOwogICAgfQoKICAgIC8vIFBhcnNlIG9mZnNldCBuZWdhdGl2ZSB0aW1lCiAgICBlbHNlIGlmIChpc29UaW1lU3RyaW5nLmluY2x1ZGVzKCctJykpIHsKICAgICAgY29uc3QgW3RpbWVTdHJpbmcsIG9mZnNldFN0cmluZ10gPSBpc29UaW1lU3RyaW5nLnNwbGl0KCctJyk7CiAgICAgIGNvbnN0IG1pbnV0ZXMgPSBwYXJzZUJhc2ljTWludXRlcyh0aW1lU3RyaW5nKTsKICAgICAgbGV0IGluYm91bmRPZmZzZXQgPSBwYXJzZUJhc2ljTWludXRlcyhvZmZzZXRTdHJpbmcpOwogICAgICBpZiAobWludXRlcyA9PT0gbnVsbCB8fCBpbmJvdW5kT2Zmc2V0ID09PSBudWxsKSByZXR1cm4gbnVsbDsKICAgICAgcmV0dXJuIChtaW51dGVzICsgaW5ib3VuZE9mZnNldCAtIGxvY2FsT2Zmc2V0ICsgTUlOVVRFU19JTl9EQVkpICUgTUlOVVRFU19JTl9EQVk7CiAgICB9CgogICAgLy8gRGVmYXVsdCB0byBsb2NhbCBwYXJzaW5nCiAgICBlbHNlIHsKICAgICAgcmV0dXJuIHBhcnNlQmFzaWNNaW51dGVzKGlzb1RpbWVTdHJpbmcpOwogICAgfQogIH0KICBmdW5jdGlvbiBzZXJpYWxpemVEYXRlKGRhdGUpIHsKICAgIHZhciBkID0gbmV3IERhdGUoZGF0ZSksCiAgICAgIG1vbnRoID0gJycgKyAoZC5nZXRNb250aCgpICsgMSksCiAgICAgIGRheSA9ICcnICsgZC5nZXREYXRlKCksCiAgICAgIHllYXIgPSBkLmdldEZ1bGxZZWFyKCk7CiAgICBpZiAobW9udGgubGVuZ3RoIDwgMikgbW9udGggPSAnMCcgKyBtb250aDsKICAgIGlmIChkYXkubGVuZ3RoIDwgMikgZGF5ID0gJzAnICsgZGF5OwogICAgcmV0dXJuIFt5ZWFyLCBtb250aCwgZGF5XS5qb2luKCctJyk7CiAgfQoKICAvLyB0aGlzIG1ldGhvZCBpcyB1c2VkIHRvIG1ha2UgdGhlIGBuZXcgRGF0ZSh2YWx1ZSlgIHBhcnNpbmcgYmVoYXZpb3Igc3RyaWN0ZXIKICBmdW5jdGlvbiBpc0RhdGVUaW1lSW5wdXRJbmZvcm1hdGlvblN1ZmZpY2llbnQodmFsdWUpIHsKICAgIGlmICghdmFsdWUgfHwgdHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJykgcmV0dXJuIGZhbHNlOwogICAgY29uc3Qgc2VnbWVudHMgPSB2YWx1ZS5zcGxpdCgnVCcpOwogICAgaWYgKHNlZ21lbnRzLmxlbmd0aCAhPSAyKSByZXR1cm4gZmFsc2U7CiAgICBjb25zdCBkYXRlTnVtYmVycyA9IHNlZ21lbnRzWzBdLnNwbGl0KCctJyk7CiAgICBpZiAoZGF0ZU51bWJlcnMubGVuZ3RoICE9IDMpIHJldHVybiBmYWxzZTsKICAgIHJldHVybiB0cnVlOwogIH0KCiAgLy8gdGhpcyBtZXRob2QgY2hlY2tzIGlmIHRoZSBkYXRlIGlzbid0IGEgZGF0ZXRpbWUsIG9yIGEgcGFydGlhbCBkYXRlCiAgZnVuY3Rpb24gaXNEYXRlSW5wdXRJbmZvcm1hdGlvbk1hdGNoaW5nKHZhbHVlKSB7CiAgICBpZiAoIXZhbHVlIHx8IHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHJldHVybiBmYWxzZTsKICAgIGlmICh2YWx1ZS5pbmNsdWRlcygnVCcpKSByZXR1cm4gZmFsc2U7CiAgICBjb25zdCBkYXRlTnVtYmVycyA9IHZhbHVlLnNwbGl0KCctJyk7CiAgICBpZiAoZGF0ZU51bWJlcnMubGVuZ3RoICE9IDMpIHJldHVybiBmYWxzZTsKICAgIHJldHVybiB0cnVlOwogIH0KICBmdW5jdGlvbiBzZXJpYWxpemVEYXRlVGltZShkYXRlLCB0aW1lLCB0aW1lU2VyaWFsaXppbmdGb3JtYXQpIHsKICAgIGNvbnN0IHdvcmtpbmdEYXRlID0gbmV3IERhdGUoKTsKICAgIHdvcmtpbmdEYXRlLnNldEZ1bGxZZWFyKGRhdGUuZ2V0RnVsbFllYXIoKSwgZGF0ZS5nZXRNb250aCgpLCBkYXRlLmdldERhdGUoKSk7CiAgICB3b3JraW5nRGF0ZS5zZXRIb3VycyhNYXRoLmZsb29yKHRpbWUgLyA2MCksIHRpbWUgJSA2MCwgMCwgMCk7CiAgICBpZiAodGltZVNlcmlhbGl6aW5nRm9ybWF0ID09PSBUSU1FX1NFUklBTElTSU5HX0ZPUk1BVFMuVVRDX05PUk1BTElaRUQpIHsKICAgICAgY29uc3QgdGltZXpvbmVPZmZzZXRNaW51dGVzID0gd29ya2luZ0RhdGUuZ2V0VGltZXpvbmVPZmZzZXQoKTsKICAgICAgY29uc3QgZGF5T2Zmc2V0ID0gdGltZSArIHRpbWV6b25lT2Zmc2V0TWludXRlcyA8IDAgPyAtMSA6IHRpbWUgKyB0aW1lem9uZU9mZnNldE1pbnV0ZXMgPiBNSU5VVEVTX0lOX0RBWSA/IDEgOiAwOwoKICAgICAgLy8gQXBwbHkgdGhlIGRhdGUgcm9sbG92ZXIgcHJlLWVtcHRpdmVseQogICAgICB3b3JraW5nRGF0ZS5zZXRIb3Vycyh3b3JraW5nRGF0ZS5nZXRIb3VycygpICsgZGF5T2Zmc2V0ICogMjQpOwogICAgfQogICAgcmV0dXJuIHNlcmlhbGl6ZURhdGUod29ya2luZ0RhdGUpICsgJ1QnICsgc2VyaWFsaXplVGltZSh0aW1lLCB3b3JraW5nRGF0ZS5nZXRUaW1lem9uZU9mZnNldCgpLCB0aW1lU2VyaWFsaXppbmdGb3JtYXQpOwogIH0KICBmdW5jdGlvbiBmb3JtYXRUaW1lem9uZU9mZnNldChtaW51dGVzKSB7CiAgICByZXR1cm4gX2dldFNpZ25lZFBhZGRlZEhvdXJzKG1pbnV0ZXMpICsgJzonICsgX2dldFplcm9QYWRkZWRTdHJpbmcoTWF0aC5hYnMobWludXRlcyAlIDYwKSk7CiAgfQogIGZ1bmN0aW9uIGlzSW52YWxpZERhdGVTdHJpbmcodmFsdWUpIHsKICAgIHJldHVybiBpc05hTihuZXcgRGF0ZShEYXRlLnBhcnNlKHZhbHVlKSkuZ2V0VGltZSgpKTsKICB9CiAgZnVuY3Rpb24gX2dldFNpZ25lZFBhZGRlZEhvdXJzKG1pbnV0ZXMpIHsKICAgIGlmIChtaW51dGVzID4gMCkgewogICAgICByZXR1cm4gJy0nICsgX2dldFplcm9QYWRkZWRTdHJpbmcoTWF0aC5mbG9vcihtaW51dGVzIC8gNjApKTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiAnKycgKyBfZ2V0WmVyb1BhZGRlZFN0cmluZyhNYXRoLmZsb29yKCgwIC0gbWludXRlcykgLyA2MCkpOwogICAgfQogIH0KICBmdW5jdGlvbiBfZ2V0WmVyb1BhZGRlZFN0cmluZyh0aW1lKSB7CiAgICByZXR1cm4gdGltZS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyk7CiAgfQoKICBmdW5jdGlvbiBzYW5pdGl6ZURhdGVUaW1lUGlja2VyVmFsdWUob3B0aW9ucykgewogICAgY29uc3QgewogICAgICBmb3JtRmllbGQsCiAgICAgIHZhbHVlCiAgICB9ID0gb3B0aW9uczsKICAgIGNvbnN0IHsKICAgICAgc3VidHlwZQogICAgfSA9IGZvcm1GaWVsZDsKICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnKSByZXR1cm4gbnVsbDsKICAgIGlmIChzdWJ0eXBlID09PSBEQVRFVElNRV9TVUJUWVBFUy5EQVRFICYmIChpc0ludmFsaWREYXRlU3RyaW5nKHZhbHVlKSB8fCAhaXNEYXRlSW5wdXRJbmZvcm1hdGlvbk1hdGNoaW5nKHZhbHVlKSkpIHJldHVybiBudWxsOwogICAgaWYgKHN1YnR5cGUgPT09IERBVEVUSU1FX1NVQlRZUEVTLlRJTUUgJiYgcGFyc2VJc29UaW1lKHZhbHVlKSA9PT0gbnVsbCkgcmV0dXJuIG51bGw7CiAgICBpZiAoc3VidHlwZSA9PT0gREFURVRJTUVfU1VCVFlQRVMuREFURVRJTUUgJiYgKGlzSW52YWxpZERhdGVTdHJpbmcodmFsdWUpIHx8ICFpc0RhdGVUaW1lSW5wdXRJbmZvcm1hdGlvblN1ZmZpY2llbnQodmFsdWUpKSkgcmV0dXJuIG51bGw7CiAgICByZXR1cm4gdmFsdWU7CiAgfQogIGZ1bmN0aW9uIHNhbml0aXplU2luZ2xlU2VsZWN0VmFsdWUob3B0aW9ucykgewogICAgY29uc3QgewogICAgICBmb3JtRmllbGQsCiAgICAgIGRhdGEsCiAgICAgIHZhbHVlCiAgICB9ID0gb3B0aW9uczsKICAgIGNvbnN0IHsKICAgICAgdmFsdWVzS2V5LAogICAgICB2YWx1ZXMKICAgIH0gPSBmb3JtRmllbGQ7CiAgICB0cnkgewogICAgICBjb25zdCB2YWxpZFZhbHVlcyA9ICh2YWx1ZXNLZXkgPyBnZXQoZGF0YSwgW3ZhbHVlc0tleV0pIDogdmFsdWVzKS5tYXAodiA9PiB2LnZhbHVlKSB8fCBbXTsKICAgICAgcmV0dXJuIHZhbGlkVmFsdWVzLmluY2x1ZGVzKHZhbHVlKSA/IHZhbHVlIDogbnVsbDsKICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgIC8vIHVzZSBkZWZhdWx0IHZhbHVlIGluIGNhc2Ugb2YgZm9ybWF0dGluZyBlcnJvcgogICAgICAvLyBUT0RPKEBTa2FpaXIpOiBsb2cgYSB3YXJuaW5nIHdoZW4gdGhpcyBoYXBwZW5zIC0gaHR0cHM6Ly9naXRodWIuY29tL2JwbW4taW8vZm9ybS1qcy9pc3N1ZXMvMjg5CiAgICAgIHJldHVybiBudWxsOwogICAgfQogIH0KICBmdW5jdGlvbiBzYW5pdGl6ZU11bHRpU2VsZWN0VmFsdWUob3B0aW9ucykgewogICAgY29uc3QgewogICAgICBmb3JtRmllbGQsCiAgICAgIGRhdGEsCiAgICAgIHZhbHVlCiAgICB9ID0gb3B0aW9uczsKICAgIGNvbnN0IHsKICAgICAgdmFsdWVzS2V5LAogICAgICB2YWx1ZXMKICAgIH0gPSBmb3JtRmllbGQ7CiAgICB0cnkgewogICAgICBjb25zdCB2YWxpZFZhbHVlcyA9ICh2YWx1ZXNLZXkgPyBnZXQoZGF0YSwgW3ZhbHVlc0tleV0pIDogdmFsdWVzKS5tYXAodiA9PiB2LnZhbHVlKSB8fCBbXTsKICAgICAgcmV0dXJuIHZhbHVlLmZpbHRlcih2ID0+IHZhbGlkVmFsdWVzLmluY2x1ZGVzKHYpKTsKICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgIC8vIHVzZSBkZWZhdWx0IHZhbHVlIGluIGNhc2Ugb2YgZm9ybWF0dGluZyBlcnJvcgogICAgICAvLyBUT0RPKEBTa2FpaXIpOiBsb2cgYSB3YXJuaW5nIHdoZW4gdGhpcyBoYXBwZW5zIC0gaHR0cHM6Ly9naXRodWIuY29tL2JwbW4taW8vZm9ybS1qcy9pc3N1ZXMvMjg5CiAgICAgIHJldHVybiBbXTsKICAgIH0KICB9CgogIGNvbnN0IHR5cGUkOSA9ICdjaGVja2xpc3QnOwogIGZ1bmN0aW9uIENoZWNrbGlzdChwcm9wcykgewogICAgY29uc3QgewogICAgICBkaXNhYmxlZCwKICAgICAgZXJyb3JzID0gW10sCiAgICAgIGZpZWxkLAogICAgICB2YWx1ZSA9IFtdCiAgICB9ID0gcHJvcHM7CiAgICBjb25zdCB7CiAgICAgIGRlc2NyaXB0aW9uLAogICAgICBpZCwKICAgICAgbGFiZWwKICAgIH0gPSBmaWVsZDsKICAgIGNvbnN0IHRvZ2dsZUNoZWNrYm94ID0gdiA9PiB7CiAgICAgIGxldCBuZXdWYWx1ZSA9IFsuLi52YWx1ZV07CiAgICAgIGlmICghbmV3VmFsdWUuaW5jbHVkZXModikpIHsKICAgICAgICBuZXdWYWx1ZS5wdXNoKHYpOwogICAgICB9IGVsc2UgewogICAgICAgIG5ld1ZhbHVlID0gbmV3VmFsdWUuZmlsdGVyKHggPT4geCAhPSB2KTsKICAgICAgfQogICAgICBwcm9wcy5vbkNoYW5nZSh7CiAgICAgICAgZmllbGQsCiAgICAgICAgdmFsdWU6IG5ld1ZhbHVlCiAgICAgIH0pOwogICAgfTsKICAgIGNvbnN0IHsKICAgICAgc3RhdGU6IGxvYWRTdGF0ZSwKICAgICAgdmFsdWVzOiBvcHRpb25zCiAgICB9ID0gdXNlVmFsdWVzQXN5bmMoZmllbGQpOwogICAgY29uc3QgewogICAgICBmb3JtSWQKICAgIH0gPSBGJDEoRm9ybUNvbnRleHQpOwogICAgcmV0dXJuIGUkMigiZGl2IiwgewogICAgICBjbGFzczogY2xhc3NOYW1lcyhmb3JtRmllbGRDbGFzc2VzKHR5cGUkOSwgewogICAgICAgIGVycm9ycywKICAgICAgICBkaXNhYmxlZAogICAgICB9KSksCiAgICAgIGNoaWxkcmVuOiBbZSQyKExhYmVsLCB7CiAgICAgICAgbGFiZWw6IGxhYmVsCiAgICAgIH0pLCBsb2FkU3RhdGUgPT0gTE9BRF9TVEFURVMuTE9BREVEICYmIG9wdGlvbnMubWFwKCh2LCBpbmRleCkgPT4gewogICAgICAgIHJldHVybiBlJDIoTGFiZWwsIHsKICAgICAgICAgIGlkOiBwcmVmaXhJZChgJHtpZH0tJHtpbmRleH1gLCBmb3JtSWQpLAogICAgICAgICAgbGFiZWw6IHYubGFiZWwsCiAgICAgICAgICBjbGFzczogY2xhc3NOYW1lcyh7CiAgICAgICAgICAgICdmanMtY2hlY2tlZCc6IHZhbHVlLmluY2x1ZGVzKHYudmFsdWUpCiAgICAgICAgICB9KSwKICAgICAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgICAgIGNoaWxkcmVuOiBlJDIoImlucHV0IiwgewogICAgICAgICAgICBjaGVja2VkOiB2YWx1ZS5pbmNsdWRlcyh2LnZhbHVlKSwKICAgICAgICAgICAgY2xhc3M6ICJmanMtaW5wdXQiLAogICAgICAgICAgICBkaXNhYmxlZDogZGlzYWJsZWQsCiAgICAgICAgICAgIGlkOiBwcmVmaXhJZChgJHtpZH0tJHtpbmRleH1gLCBmb3JtSWQpLAogICAgICAgICAgICB0eXBlOiAiY2hlY2tib3giLAogICAgICAgICAgICBvbkNsaWNrOiAoKSA9PiB0b2dnbGVDaGVja2JveCh2LnZhbHVlKQogICAgICAgICAgfSkKICAgICAgICB9LCBgJHtpZH0tJHtpbmRleH1gKTsKICAgICAgfSksIGUkMihEZXNjcmlwdGlvbiwgewogICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbgogICAgICB9KSwgZSQyKEVycm9ycywgewogICAgICAgIGVycm9yczogZXJyb3JzCiAgICAgIH0pXQogICAgfSk7CiAgfQogIENoZWNrbGlzdC5jcmVhdGUgPSBmdW5jdGlvbiAob3B0aW9ucyA9IHt9KSB7CiAgICBpZiAob3B0aW9ucy52YWx1ZXNLZXkpIHJldHVybiBvcHRpb25zOwogICAgcmV0dXJuIHsKICAgICAgdmFsdWVzOiBbewogICAgICAgIGxhYmVsOiAnVmFsdWUnLAogICAgICAgIHZhbHVlOiAndmFsdWUnCiAgICAgIH1dLAogICAgICAuLi5vcHRpb25zCiAgICB9OwogIH07CiAgQ2hlY2tsaXN0LnR5cGUgPSB0eXBlJDk7CiAgQ2hlY2tsaXN0LmxhYmVsID0gJ0NoZWNrbGlzdCc7CiAgQ2hlY2tsaXN0LmtleWVkID0gdHJ1ZTsKICBDaGVja2xpc3QuZW1wdHlWYWx1ZSA9IFtdOwogIENoZWNrbGlzdC5zYW5pdGl6ZVZhbHVlID0gc2FuaXRpemVNdWx0aVNlbGVjdFZhbHVlOwoKICAvKioKICAgKiBDaGVjayBpZiBjb25kaXRpb24gaXMgbWV0IHdpdGggZ2l2ZW4gdmFyaWFibGVzLgogICAqCiAgICogQHBhcmFtIHtzdHJpbmcgfCB1bmRlZmluZWR9IGNvbmRpdGlvbgogICAqIEBwYXJhbSB7aW1wb3J0KCcuLi8uLi90eXBlcycpLkRhdGF9IGRhdGEKICAgKgogICAqIEByZXR1cm5zIHtib29sZWFufSB0cnVlIGlmIGNvbmRpdGlvbiBpcyBtZXQgb3Igbm8gY29uZGl0aW9uIG9yIGNvbmRpdGlvbiBjaGVja2VyIGV4aXN0cwogICAqLwogIGZ1bmN0aW9uIHVzZUNvbmRpdGlvbihjb25kaXRpb24sIGRhdGEpIHsKICAgIGNvbnN0IGluaXRpYWxEYXRhID0gdXNlU2VydmljZSgnZm9ybScpLl9nZXRTdGF0ZSgpLmluaXRpYWxEYXRhOwogICAgY29uc3QgY29uZGl0aW9uQ2hlY2tlciA9IHVzZVNlcnZpY2UoJ2NvbmRpdGlvbkNoZWNrZXInLCBmYWxzZSk7CiAgICBpZiAoIWNvbmRpdGlvbkNoZWNrZXIpIHsKICAgICAgcmV0dXJuIG51bGw7CiAgICB9CgogICAgLy8gbWFrZSBzdXJlIHdlIGRvIG5vdCB1c2UgZGF0YSBmcm9tIGhpZGRlbiBmaWVsZHMKICAgIGNvbnN0IGZpbHRlcmVkRGF0YSA9IHsKICAgICAgLi4uaW5pdGlhbERhdGEsCiAgICAgIC4uLmNvbmRpdGlvbkNoZWNrZXIuYXBwbHlDb25kaXRpb25zKGRhdGEsIGRhdGEpCiAgICB9OwogICAgcmV0dXJuIGNvbmRpdGlvbkNoZWNrZXIuY2hlY2soY29uZGl0aW9uLCBmaWx0ZXJlZERhdGEpOwogIH0KCiAgY29uc3Qgbm9vcCQxID0gKCkgPT4gZmFsc2U7CiAgZnVuY3Rpb24gRm9ybUZpZWxkKHByb3BzKSB7CiAgICBjb25zdCB7CiAgICAgIGZpZWxkLAogICAgICBvbkNoYW5nZQogICAgfSA9IHByb3BzOwogICAgY29uc3QgewogICAgICBfcGF0aAogICAgfSA9IGZpZWxkOwogICAgY29uc3QgZm9ybUZpZWxkcyA9IHVzZVNlcnZpY2UoJ2Zvcm1GaWVsZHMnKSwKICAgICAgZm9ybSA9IHVzZVNlcnZpY2UoJ2Zvcm0nKTsKICAgIGNvbnN0IHsKICAgICAgZGF0YSwKICAgICAgZXJyb3JzLAogICAgICBwcm9wZXJ0aWVzCiAgICB9ID0gZm9ybS5fZ2V0U3RhdGUoKTsKICAgIGNvbnN0IHsKICAgICAgRWxlbWVudCwKICAgICAgRW1wdHkKICAgIH0gPSBGJDEoRm9ybVJlbmRlckNvbnRleHQpOwogICAgY29uc3QgRm9ybUZpZWxkQ29tcG9uZW50ID0gZm9ybUZpZWxkcy5nZXQoZmllbGQudHlwZSk7CiAgICBpZiAoIUZvcm1GaWVsZENvbXBvbmVudCkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoYGNhbm5vdCByZW5kZXIgZmllbGQgPCR7ZmllbGQudHlwZX0+YCk7CiAgICB9CiAgICBjb25zdCB2YWx1ZSA9IGdldChkYXRhLCBfcGF0aCk7CiAgICBjb25zdCBmaWVsZEVycm9ycyA9IGZpbmRFcnJvcnMoZXJyb3JzLCBfcGF0aCk7CiAgICBjb25zdCBkaXNhYmxlZCA9IHByb3BlcnRpZXMucmVhZE9ubHkgfHwgZmllbGQuZGlzYWJsZWQgfHwgZmFsc2U7CiAgICBjb25zdCBoaWRkZW4gPSB1c2VIaWRlQ29uZGl0aW9uKGZpZWxkLCBkYXRhKTsKICAgIGlmIChoaWRkZW4pIHsKICAgICAgcmV0dXJuIGUkMihFbXB0eSwge30pOwogICAgfQogICAgcmV0dXJuIGUkMihFbGVtZW50LCB7CiAgICAgIGZpZWxkOiBmaWVsZCwKICAgICAgY2hpbGRyZW46IGUkMihGb3JtRmllbGRDb21wb25lbnQsIHsKICAgICAgICAuLi5wcm9wcywKICAgICAgICBkaXNhYmxlZDogZGlzYWJsZWQsCiAgICAgICAgZXJyb3JzOiBmaWVsZEVycm9ycywKICAgICAgICBvbkNoYW5nZTogZGlzYWJsZWQgPyBub29wJDEgOiBvbkNoYW5nZSwKICAgICAgICB2YWx1ZTogdmFsdWUKICAgICAgfSkKICAgIH0pOwogIH0KICBmdW5jdGlvbiB1c2VIaWRlQ29uZGl0aW9uKGZpZWxkLCBkYXRhKSB7CiAgICBjb25zdCBoaWRlQ29uZGl0aW9uID0gZmllbGQuY29uZGl0aW9uYWwgJiYgZmllbGQuY29uZGl0aW9uYWwuaGlkZTsKICAgIHJldHVybiB1c2VDb25kaXRpb24oaGlkZUNvbmRpdGlvbiwgZGF0YSkgPT09IHRydWU7CiAgfQoKICBmdW5jdGlvbiBEZWZhdWx0KHByb3BzKSB7CiAgICBjb25zdCB7CiAgICAgIENoaWxkcmVuLAogICAgICBFbXB0eQogICAgfSA9IEYkMShGb3JtUmVuZGVyQ29udGV4dCk7CiAgICBjb25zdCB7CiAgICAgIGZpZWxkCiAgICB9ID0gcHJvcHM7CiAgICBjb25zdCB7CiAgICAgIGNvbXBvbmVudHMgPSBbXQogICAgfSA9IGZpZWxkOwogICAgcmV0dXJuIGUkMihDaGlsZHJlbiwgewogICAgICBjbGFzczogImZqcy12ZXJ0aWNhbC1sYXlvdXQiLAogICAgICBmaWVsZDogZmllbGQsCiAgICAgIGNoaWxkcmVuOiBbY29tcG9uZW50cy5tYXAoY2hpbGRGaWVsZCA9PiB7CiAgICAgICAgcmV0dXJuIHYkMShGb3JtRmllbGQsIHsKICAgICAgICAgIC4uLnByb3BzLAogICAgICAgICAga2V5OiBjaGlsZEZpZWxkLmlkLAogICAgICAgICAgZmllbGQ6IGNoaWxkRmllbGQKICAgICAgICB9KTsKICAgICAgfSksIGNvbXBvbmVudHMubGVuZ3RoID8gbnVsbCA6IGUkMihFbXB0eSwge30pXQogICAgfSk7CiAgfQogIERlZmF1bHQuY3JlYXRlID0gZnVuY3Rpb24gKG9wdGlvbnMgPSB7fSkgewogICAgcmV0dXJuIHsKICAgICAgY29tcG9uZW50czogW10sCiAgICAgIC4uLm9wdGlvbnMKICAgIH07CiAgfTsKICBEZWZhdWx0LnR5cGUgPSAnZGVmYXVsdCc7CiAgRGVmYXVsdC5rZXllZCA9IGZhbHNlOwoKICBmdW5jdGlvbiBfZXh0ZW5kcyRoKCkgeyBfZXh0ZW5kcyRoID0gT2JqZWN0LmFzc2lnbiA/IE9iamVjdC5hc3NpZ24uYmluZCgpIDogZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07IHJldHVybiBfZXh0ZW5kcyRoLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH0KICB2YXIgQ2FsZW5kYXJJY29uID0gKCh7CiAgICBzdHlsZXMgPSB7fSwKICAgIC4uLnByb3BzCiAgfSkgPT4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInN2ZyIsIF9leHRlbmRzJGgoewogICAgd2lkdGg6ICIxNCIsCiAgICBoZWlnaHQ6ICIxNSIsCiAgICB2aWV3Qm94OiAiMCAwIDI4IDMwIiwKICAgIGZpbGw6ICJub25lIiwKICAgIHhtbG5zOiAiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgfSwgcHJvcHMpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgicGF0aCIsIHsKICAgIGZpbGxSdWxlOiAiZXZlbm9kZCIsCiAgICBjbGlwUnVsZTogImV2ZW5vZGQiLAogICAgZDogIk0xOSAySDlWMEg3djJIMmEyIDIgMCAwMC0yIDJ2MjRhMiAyIDAgMDAyIDJoMjRhMiAyIDAgMDAyLTJWNGEyIDIgMCAwMC0yLTJoLTVWMGgtMnYyek03IDdWNEgydjVoMjRWNGgtNXYzaC0yVjRIOXYzSDd6bS01IDR2MTdoMjRWMTFIMnoiLAogICAgZmlsbDogIiMwMDAiCiAgfSkpKTsKCiAgZnVuY3Rpb24gSW5wdXRBZG9ybmVyKHByb3BzKSB7CiAgICBjb25zdCB7CiAgICAgIHByZSA9IG51bGwsCiAgICAgIHBvc3QgPSBudWxsLAogICAgICByb290UmVmLAogICAgICBpbnB1dFJlZiwKICAgICAgY2hpbGRyZW4sCiAgICAgIGRpc2FibGVkLAogICAgICBoYXNFcnJvcnMKICAgIH0gPSBwcm9wczsKICAgIGNvbnN0IG9uQWRvcm5tZW50Q2xpY2sgPSAoKSA9PiBpbnB1dFJlZj8uY3VycmVudD8uZm9jdXMoKTsKICAgIHJldHVybiBlJDIoImRpdiIsIHsKICAgICAgY2xhc3M6IGNsYXNzTmFtZXMoJ2Zqcy1pbnB1dC1ncm91cCcsIHsKICAgICAgICAnZGlzYWJsZWQnOiBkaXNhYmxlZAogICAgICB9LCB7CiAgICAgICAgJ2hhc0Vycm9ycyc6IGhhc0Vycm9ycwogICAgICB9KSwKICAgICAgcmVmOiByb290UmVmLAogICAgICBjaGlsZHJlbjogW3ByZSAhPT0gbnVsbCAmJiBlJDIoInNwYW4iLCB7CiAgICAgICAgY2xhc3M6ICJmanMtaW5wdXQtYWRvcm5tZW50IGJvcmRlci1yaWdodCBib3JkZXItcmFkaXVzLWxlZnQiLAogICAgICAgIG9uQ2xpY2s6IG9uQWRvcm5tZW50Q2xpY2ssCiAgICAgICAgY2hpbGRyZW46IFsiICIsIHByZSwgIiAiXQogICAgICB9KSwgY2hpbGRyZW4sIHBvc3QgIT09IG51bGwgJiYgZSQyKCJzcGFuIiwgewogICAgICAgIGNsYXNzOiAiZmpzLWlucHV0LWFkb3JubWVudCBib3JkZXItbGVmdCBib3JkZXItcmFkaXVzLXJpZ2h0IiwKICAgICAgICBvbkNsaWNrOiBvbkFkb3JubWVudENsaWNrLAogICAgICAgIGNoaWxkcmVuOiBbIiAiLCBwb3N0LCAiICJdCiAgICAgIH0pXQogICAgfSk7CiAgfQoKICBmdW5jdGlvbiBEYXRlcGlja2VyKHByb3BzKSB7CiAgICBjb25zdCB7CiAgICAgIGlkLAogICAgICBsYWJlbCwKICAgICAgY29sbGFwc2VMYWJlbE9uRW1wdHksCiAgICAgIGZvcm1JZCwKICAgICAgcmVxdWlyZWQsCiAgICAgIGRpc2FibGVkLAogICAgICBkaXNhbGxvd1Bhc3NlZERhdGVzLAogICAgICBkYXRlLAogICAgICBzZXREYXRlCiAgICB9ID0gcHJvcHM7CiAgICBjb25zdCBkYXRlSW5wdXRSZWYgPSBzKCk7CiAgICBjb25zdCBmb2N1c1Njb3BlUmVmID0gcygpOwogICAgY29uc3QgW2ZsYXRwaWNrckluc3RhbmNlLCBzZXRGbGF0cGlja3JJbnN0YW5jZV0gPSBsJDEobnVsbCk7CiAgICBjb25zdCBbaXNJbnB1dERpcnR5LCBzZXRJc0lucHV0RGlydHldID0gbCQxKGZhbHNlKTsKICAgIGNvbnN0IFtmb3JjZUZvY3VzQ2FsZW5kYXIsIHNldEZvcmNlRm9jdXNDYWxlbmRhcl0gPSBsJDEoZmFsc2UpOwoKICAgIC8vIHNob3J0cyB0aGUgZGF0ZSB2YWx1ZSBiYWNrIHRvIHRoZSBzb3VyY2UKICAgIHkoKCkgPT4gewogICAgICBpZiAoIWZsYXRwaWNrckluc3RhbmNlIHx8ICFmbGF0cGlja3JJbnN0YW5jZS5jb25maWcpIHJldHVybjsKICAgICAgZmxhdHBpY2tySW5zdGFuY2Uuc2V0RGF0ZShkYXRlLCB0cnVlKTsKICAgICAgc2V0SXNJbnB1dERpcnR5KGZhbHNlKTsKICAgIH0sIFtmbGF0cGlja3JJbnN0YW5jZSwgZGF0ZS50b1N0cmluZygpXSk7CiAgICB5KCgpID0+IHsKICAgICAgaWYgKCFmb3JjZUZvY3VzQ2FsZW5kYXIpIHJldHVybjsKICAgICAgZm9jdXNSZWxldmFudEZsYXRwaWNrZXJEYXkoZmxhdHBpY2tySW5zdGFuY2UpOwogICAgICBzZXRGb3JjZUZvY3VzQ2FsZW5kYXIoZmFsc2UpOwogICAgfSwgW2ZsYXRwaWNrckluc3RhbmNlLCBmb3JjZUZvY3VzQ2FsZW5kYXJdKTsKCiAgICAvLyBzZXR1cCBmbGF0cGlja3IgaW5zdGFuY2UKICAgIHkoKCkgPT4gewogICAgICBpZiAoZGlzYWJsZWQpIHsKICAgICAgICBzZXRGbGF0cGlja3JJbnN0YW5jZShudWxsKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgbGV0IGNvbmZpZyA9IHsKICAgICAgICBhbGxvd0lucHV0OiB0cnVlLAogICAgICAgIGRhdGVGb3JtYXQ6ICdtL2QvWScsCiAgICAgICAgc3RhdGljOiB0cnVlLAogICAgICAgIGNsaWNrT3BlbnM6IGZhbHNlLAogICAgICAgIGVycm9ySGFuZGxlcjogKCkgPT4gey8qIGRvIG5vdGhpbmcsIHdlIGV4cGVjdCB0aGUgdmFsdWVzIHRvIHNvbWV0aW1lcyBiZSBlcnJvbm91cyBhbmQgd2UgZG9uJ3Qgd2FudCB3YXJuaW5ncyBwb2xsdXRpbmcgdGhlIGNvbnNvbGUgKi99CiAgICAgIH07CiAgICAgIGlmIChkaXNhbGxvd1Bhc3NlZERhdGVzKSB7CiAgICAgICAgY29uZmlnID0gewogICAgICAgICAgLi4uY29uZmlnLAogICAgICAgICAgbWluRGF0ZTogJ3RvZGF5JwogICAgICAgIH07CiAgICAgIH0KICAgICAgY29uc3QgaW5zdGFuY2UgPSBmbGF0cGlja3IoZGF0ZUlucHV0UmVmLmN1cnJlbnQsIGNvbmZpZyk7CiAgICAgIHNldEZsYXRwaWNrckluc3RhbmNlKGluc3RhbmNlKTsKICAgICAgY29uc3Qgb25DYWxlbmRhckZvY3VzT3V0ID0gZSA9PiB7CiAgICAgICAgaWYgKCFpbnN0YW5jZS5jYWxlbmRhckNvbnRhaW5lci5jb250YWlucyhlLnJlbGF0ZWRUYXJnZXQpICYmIGUucmVsYXRlZFRhcmdldCAhPSBkYXRlSW5wdXRSZWYuY3VycmVudCkgewogICAgICAgICAgaW5zdGFuY2UuY2xvc2UoKTsKICAgICAgICB9CiAgICAgIH07CgogICAgICAvLyByZW1vdmUgZGlydHkgdGFnIHRvIGhhdmUgbW91c2UgZGF5IHNlbGVjdGlvbiBwcmlvcml0aXplIGlucHV0IGJsdXIKICAgICAgY29uc3Qgb25DYWxlbmRhck1vdXNlRG93biA9IGUgPT4gewogICAgICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2ZsYXRwaWNrci1kYXknKSkgewogICAgICAgICAgc2V0SXNJbnB1dERpcnR5KGZhbHNlKTsKICAgICAgICB9CiAgICAgIH07CgogICAgICAvLyB3aGVuIHRoZSBkcm9wZG93biBvZiB0aGUgZGF0ZXBpY2tyIG9wZW5zLCB3ZSByZWdpc3RlciBhIGZldyBldmVudCBoYW5kbGVycyB0byByZS1pbXBsZW1lbnQgc29tZSBvZiB0aGUKICAgICAgLy8gZmxhdHBpY2tlciBsb2dpYyB0aGF0IHdhcyBsb3N0IHdoZW4gc2V0dGluZyBhbGxvd0lucHV0IHRvIHRydWUKICAgICAgaW5zdGFuY2UuY29uZmlnLm9uT3BlbiA9IFsoKSA9PiBpbnN0YW5jZS5jYWxlbmRhckNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdmb2N1c291dCcsIG9uQ2FsZW5kYXJGb2N1c091dCksICgpID0+IGluc3RhbmNlLmNhbGVuZGFyQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIG9uQ2FsZW5kYXJNb3VzZURvd24pXTsKICAgICAgaW5zdGFuY2UuY29uZmlnLm9uQ2xvc2UgPSBbKCkgPT4gaW5zdGFuY2UuY2FsZW5kYXJDb250YWluZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignZm9jdXNvdXQnLCBvbkNhbGVuZGFyRm9jdXNPdXQpLCAoKSA9PiBpbnN0YW5jZS5jYWxlbmRhckNvbnRhaW5lci5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBvbkNhbGVuZGFyTW91c2VEb3duKV07CiAgICB9LCBbZGlzYWJsZWQsIGRpc2FsbG93UGFzc2VkRGF0ZXNdKTsKCiAgICAvLyBvbkNoYW5nZSBpcyB1cGRhdGVkIGR5bmFtaWNhbGx5LCBzbyBub3QgdG8gcmUtcmVuZGVyIHRoZSBmbGF0cGlja2VyIGV2ZXJ5IHRpbWUgaXQgY2hhbmdlcwogICAgeSgoKSA9PiB7CiAgICAgIGlmICghZmxhdHBpY2tySW5zdGFuY2UgfHwgIWZsYXRwaWNrckluc3RhbmNlLmNvbmZpZykgcmV0dXJuOwogICAgICBmbGF0cGlja3JJbnN0YW5jZS5jb25maWcub25DaGFuZ2UgPSBbZGF0ZSA9PiBzZXREYXRlKG5ldyBEYXRlKGRhdGUpKSwgKCkgPT4gc2V0SXNJbnB1dERpcnR5KGZhbHNlKV07CiAgICB9LCBbZmxhdHBpY2tySW5zdGFuY2UsIHNldERhdGVdKTsKICAgIGNvbnN0IG9uSW5wdXRLZXlEb3duID0gQSQxKGUgPT4gewogICAgICBpZiAoIWZsYXRwaWNrckluc3RhbmNlKSByZXR1cm47CiAgICAgIGlmIChlLmNvZGUgPT09ICdFc2NhcGUnKSB7CiAgICAgICAgZmxhdHBpY2tySW5zdGFuY2UuY2xvc2UoKTsKICAgICAgfQogICAgICBpZiAoZS5jb2RlID09PSAnQXJyb3dEb3duJykgewogICAgICAgIGlmIChpc0lucHV0RGlydHkpIHsKICAgICAgICAgIC8vIHRyaWdnZXIgYW4gZW50ZXIga2V5cHJlc3MgdG8gc3VibWl0IHRoZSBuZXcgaW5wdXQsIHRoZW4gZm9jdXMgY2FsZW5kYXIgZGF5IG9uIHRoZSBuZXh0IHJlbmRlciBjeWNsZQogICAgICAgICAgZGF0ZUlucHV0UmVmLmN1cnJlbnQuZGlzcGF0Y2hFdmVudChFTlRFUl9LRVlET1dOX0VWRU5UKTsKICAgICAgICAgIHNldElzSW5wdXREaXJ0eShmYWxzZSk7CiAgICAgICAgICBzZXRGb3JjZUZvY3VzQ2FsZW5kYXIodHJ1ZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIGZvY3VzIGNhbGVuZGFyIGRheSBpbW1lZGlhdGVseQogICAgICAgICAgZm9jdXNSZWxldmFudEZsYXRwaWNrZXJEYXkoZmxhdHBpY2tySW5zdGFuY2UpOwogICAgICAgIH0KICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgIH0KICAgICAgaWYgKGUuY29kZSA9PT0gJ0VudGVyJykgewogICAgICAgIHNldElzSW5wdXREaXJ0eShmYWxzZSk7CiAgICAgIH0KICAgIH0sIFtmbGF0cGlja3JJbnN0YW5jZSwgaXNJbnB1dERpcnR5XSk7CiAgICBjb25zdCBvbklucHV0Rm9jdXMgPSBBJDEoZSA9PiB7CiAgICAgIGlmICghZmxhdHBpY2tySW5zdGFuY2UgfHwgZm9jdXNTY29wZVJlZi5jdXJyZW50LmNvbnRhaW5zKGUucmVsYXRlZFRhcmdldCkpIHJldHVybjsKICAgICAgZmxhdHBpY2tySW5zdGFuY2Uub3BlbigpOwogICAgfSwgW2ZsYXRwaWNrckluc3RhbmNlXSk7CgogICAgLy8gc2ltdWxhdGUgYW4gZW50ZXIgcHJlc3Mgb24gYmx1ciB0byBtYWtlIHN1cmUgdGhlIGRhdGUgdmFsdWUgaXMgc3VibWl0dGVkIGluIGFsbCBzY2VuYXJpb3MKICAgIGNvbnN0IG9uSW5wdXRCbHVyID0gQSQxKGUgPT4gewogICAgICBpZiAoIWlzSW5wdXREaXJ0eSB8fCBlLnJlbGF0ZWRUYXJnZXQgJiYgZS5yZWxhdGVkVGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZmxhdHBpY2tyLWRheScpKSByZXR1cm47CiAgICAgIGRhdGVJbnB1dFJlZi5jdXJyZW50LmRpc3BhdGNoRXZlbnQoRU5URVJfS0VZRE9XTl9FVkVOVCk7CiAgICAgIHNldElzSW5wdXREaXJ0eShmYWxzZSk7CiAgICB9LCBbaXNJbnB1dERpcnR5XSk7CiAgICBjb25zdCBmdWxsSWQgPSBgJHtwcmVmaXhJZChpZCwgZm9ybUlkKX0tLWRhdGVgOwogICAgcmV0dXJuIGUkMigiZGl2IiwgewogICAgICBjbGFzczogImZqcy1kYXRldGltZS1zdWJzZWN0aW9uIiwKICAgICAgY2hpbGRyZW46IFtlJDIoTGFiZWwsIHsKICAgICAgICBpZDogZnVsbElkLAogICAgICAgIGxhYmVsOiBsYWJlbCwKICAgICAgICBjb2xsYXBzZU9uRW1wdHk6IGNvbGxhcHNlTGFiZWxPbkVtcHR5LAogICAgICAgIHJlcXVpcmVkOiByZXF1aXJlZAogICAgICB9KSwgZSQyKElucHV0QWRvcm5lciwgewogICAgICAgIHByZTogZSQyKENhbGVuZGFySWNvbiwge30pLAogICAgICAgIGRpc2FibGVkOiBkaXNhYmxlZCwKICAgICAgICByb290UmVmOiBmb2N1c1Njb3BlUmVmLAogICAgICAgIGlucHV0UmVmOiBkYXRlSW5wdXRSZWYsCiAgICAgICAgY2hpbGRyZW46IGUkMigiZGl2IiwgewogICAgICAgICAgY2xhc3M6ICJmanMtZGF0ZXBpY2tlciIsCiAgICAgICAgICBzdHlsZTogewogICAgICAgICAgICB3aWR0aDogJzEwMCUnCiAgICAgICAgICB9LAogICAgICAgICAgY2hpbGRyZW46IGUkMigiaW5wdXQiLCB7CiAgICAgICAgICAgIHJlZjogZGF0ZUlucHV0UmVmLAogICAgICAgICAgICB0eXBlOiAidGV4dCIsCiAgICAgICAgICAgIGlkOiBmdWxsSWQsCiAgICAgICAgICAgIGNsYXNzOiAnZmpzLWlucHV0JywKICAgICAgICAgICAgZGlzYWJsZWQ6IGRpc2FibGVkLAogICAgICAgICAgICBwbGFjZWhvbGRlcjogIm1tL2RkL3l5eXkiLAogICAgICAgICAgICBhdXRvQ29tcGxldGU6ICJmYWxzZSIsCiAgICAgICAgICAgIG9uRm9jdXM6IG9uSW5wdXRGb2N1cywKICAgICAgICAgICAgb25LZXlEb3duOiBvbklucHV0S2V5RG93biwKICAgICAgICAgICAgb25Nb3VzZURvd246IGUgPT4gIWZsYXRwaWNrckluc3RhbmNlLmlzT3BlbiAmJiBmbGF0cGlja3JJbnN0YW5jZS5vcGVuKCksCiAgICAgICAgICAgIG9uQmx1cjogb25JbnB1dEJsdXIsCiAgICAgICAgICAgIG9uSW5wdXQ6IGUgPT4gc2V0SXNJbnB1dERpcnR5KHRydWUpLAogICAgICAgICAgICAiZGF0YS1pbnB1dCI6IHRydWUKICAgICAgICAgIH0pCiAgICAgICAgfSkKICAgICAgfSldCiAgICB9KTsKICB9CgogIGZ1bmN0aW9uIF9leHRlbmRzJGcoKSB7IF9leHRlbmRzJGcgPSBPYmplY3QuYXNzaWduID8gT2JqZWN0LmFzc2lnbi5iaW5kKCkgOiBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTsgcmV0dXJuIF9leHRlbmRzJGcuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfQogIHZhciBDbG9ja0ljb24gPSAoKHsKICAgIHN0eWxlcyA9IHt9LAogICAgLi4ucHJvcHMKICB9KSA9PiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgic3ZnIiwgX2V4dGVuZHMkZyh7CiAgICB3aWR0aDogIjE2IiwKICAgIGhlaWdodDogIjE2IiwKICAgIHZpZXdCb3g6ICIwIDAgMjggMjkiLAogICAgZmlsbDogIm5vbmUiLAogICAgeG1sbnM6ICJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICB9LCBwcm9wcyksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJwYXRoIiwgewogICAgZDogIk0xMyAxNC40MUwxOC41OSAyMCAyMCAxOC41OWwtNS01LjAxVjVoLTJ2OS40MXoiLAogICAgZmlsbDogIiMwMDAiCiAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJwYXRoIiwgewogICAgZmlsbFJ1bGU6ICJldmVub2RkIiwKICAgIGNsaXBSdWxlOiAiZXZlbm9kZCIsCiAgICBkOiAiTTYuMjIyIDI1LjY0QTE0IDE0IDAgMTAyMS43NzggMi4zNiAxNCAxNCAwIDAwNi4yMjIgMjUuNjR6TTcuMzMzIDQuMDIzYTEyIDEyIDAgMTExMy4zMzQgMTkuOTU1QTEyIDEyIDAgMDE3LjMzMyA0LjAyMnoiLAogICAgZmlsbDogIiMwMDAiCiAgfSkpKTsKCiAgZnVuY3Rpb24gdXNlS2V5RG93bkFjdGlvbih0YXJnZXRLZXksIGFjdGlvbiwgbGlzdGVuZXJFbGVtZW50ID0gd2luZG93KSB7CiAgICBmdW5jdGlvbiBkb3duSGFuZGxlcih7CiAgICAgIGtleQogICAgfSkgewogICAgICBpZiAoa2V5ID09PSB0YXJnZXRLZXkpIHsKICAgICAgICBhY3Rpb24oKTsKICAgICAgfQogICAgfQogICAgeSgoKSA9PiB7CiAgICAgIGxpc3RlbmVyRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZG93bkhhbmRsZXIpOwogICAgICByZXR1cm4gKCkgPT4gewogICAgICAgIGxpc3RlbmVyRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZG93bkhhbmRsZXIpOwogICAgICB9OwogICAgfSk7CiAgfQoKICBjb25zdCBERUZBVUxUX0xBQkVMX0dFVFRFUiA9IHZhbHVlID0+IHZhbHVlOwogIGNvbnN0IE5PT1AgPSAoKSA9PiB7fTsKICBmdW5jdGlvbiBEcm9wZG93bkxpc3QocHJvcHMpIHsKICAgIGNvbnN0IHsKICAgICAga2V5RXZlbnRzTGlzdGVuZXIgPSB3aW5kb3csCiAgICAgIHZhbHVlcyA9IFtdLAogICAgICBnZXRMYWJlbCA9IERFRkFVTFRfTEFCRUxfR0VUVEVSLAogICAgICBvblZhbHVlU2VsZWN0ZWQgPSBOT09QLAogICAgICBoZWlnaHQgPSAyMzUsCiAgICAgIGVtcHR5TGlzdE1lc3NhZ2UgPSAnTm8gcmVzdWx0cycsCiAgICAgIGluaXRpYWxGb2N1c0luZGV4ID0gMAogICAgfSA9IHByb3BzOwogICAgY29uc3QgW21vdXNlQ29udHJvbCwgc2V0TW91c2VDb250cm9sXSA9IGwkMShmYWxzZSk7CiAgICBjb25zdCBbZm9jdXNlZFZhbHVlSW5kZXgsIHNldEZvY3VzZWRWYWx1ZUluZGV4XSA9IGwkMShpbml0aWFsRm9jdXNJbmRleCk7CiAgICBjb25zdCBbc21vb3RoU2Nyb2xsaW5nLCBzZXRTbW9vdGhTY3JvbGxpbmddID0gbCQxKGZhbHNlKTsKICAgIGNvbnN0IGRyb3Bkb3duQ29udGFpbmVyID0gcygpOwogICAgY29uc3QgbW91c2VTY3JlZW5Qb3MgPSBzKCk7CiAgICBjb25zdCBmb2N1c2VkSXRlbSA9IGQoKCkgPT4gdmFsdWVzLmxlbmd0aCA/IHZhbHVlc1tmb2N1c2VkVmFsdWVJbmRleF0gOiBudWxsLCBbZm9jdXNlZFZhbHVlSW5kZXgsIHZhbHVlc10pOwogICAgY29uc3QgY2hhbmdlRm9jdXNlZFZhbHVlSW5kZXggPSBBJDEoZGVsdGEgPT4gewogICAgICBzZXRGb2N1c2VkVmFsdWVJbmRleCh4ID0+IE1hdGgubWluKE1hdGgubWF4KDAsIHggKyBkZWx0YSksIHZhbHVlcy5sZW5ndGggLSAxKSk7CiAgICB9LCBbdmFsdWVzLmxlbmd0aF0pOwogICAgeSgoKSA9PiB7CiAgICAgIGlmIChmb2N1c2VkVmFsdWVJbmRleCA9PT0gMCkgcmV0dXJuOwogICAgICBpZiAoIWZvY3VzZWRWYWx1ZUluZGV4IHx8ICF2YWx1ZXMubGVuZ3RoKSB7CiAgICAgICAgc2V0Rm9jdXNlZFZhbHVlSW5kZXgoMCk7CiAgICAgIH0gZWxzZSBpZiAoZm9jdXNlZFZhbHVlSW5kZXggPj0gdmFsdWVzLmxlbmd0aCkgewogICAgICAgIHNldEZvY3VzZWRWYWx1ZUluZGV4KHZhbHVlcy5sZW5ndGggLSAxKTsKICAgICAgfQogICAgfSwgW2ZvY3VzZWRWYWx1ZUluZGV4LCB2YWx1ZXMubGVuZ3RoXSk7CiAgICB1c2VLZXlEb3duQWN0aW9uKCdBcnJvd1VwJywgKCkgPT4gewogICAgICBpZiAodmFsdWVzLmxlbmd0aCkgewogICAgICAgIGNoYW5nZUZvY3VzZWRWYWx1ZUluZGV4KC0xKTsKICAgICAgICBzZXRNb3VzZUNvbnRyb2woZmFsc2UpOwogICAgICB9CiAgICB9LCBrZXlFdmVudHNMaXN0ZW5lcik7CiAgICB1c2VLZXlEb3duQWN0aW9uKCdBcnJvd0Rvd24nLCAoKSA9PiB7CiAgICAgIGlmICh2YWx1ZXMubGVuZ3RoKSB7CiAgICAgICAgY2hhbmdlRm9jdXNlZFZhbHVlSW5kZXgoMSk7CiAgICAgICAgc2V0TW91c2VDb250cm9sKGZhbHNlKTsKICAgICAgfQogICAgfSwga2V5RXZlbnRzTGlzdGVuZXIpOwogICAgdXNlS2V5RG93bkFjdGlvbignRW50ZXInLCAoKSA9PiB7CiAgICAgIGlmIChmb2N1c2VkSXRlbSkgewogICAgICAgIG9uVmFsdWVTZWxlY3RlZChmb2N1c2VkSXRlbSk7CiAgICAgIH0KICAgIH0sIGtleUV2ZW50c0xpc3RlbmVyKTsKICAgIHkoKCkgPT4gewogICAgICBjb25zdCBpbmRpdmlkdWFsRW50cmllcyA9IGRyb3Bkb3duQ29udGFpbmVyLmN1cnJlbnQuY2hpbGRyZW47CiAgICAgIGlmIChpbmRpdmlkdWFsRW50cmllcy5sZW5ndGggJiYgIW1vdXNlQ29udHJvbCkgewogICAgICAgIGluZGl2aWR1YWxFbnRyaWVzW2ZvY3VzZWRWYWx1ZUluZGV4XS5zY3JvbGxJbnRvVmlldyh7CiAgICAgICAgICBibG9jazogJ25lYXJlc3QnLAogICAgICAgICAgaW5saW5lOiAnbmVhcmVzdCcKICAgICAgICB9KTsKICAgICAgfQogICAgfSwgW2ZvY3VzZWRWYWx1ZUluZGV4LCBtb3VzZUNvbnRyb2xdKTsKICAgIHkoKCkgPT4gewogICAgICBzZXRTbW9vdGhTY3JvbGxpbmcodHJ1ZSk7CiAgICB9LCBbXSk7CiAgICBjb25zdCBvbk1vdXNlTW92ZWRJbktleWJvYXJkTW9kZSA9IChldmVudCwgdmFsdWVJbmRleCkgPT4gewogICAgICBjb25zdCB1c2VyTW92ZWRDdXJzb3IgPSAhbW91c2VTY3JlZW5Qb3MuY3VycmVudCB8fCBtb3VzZVNjcmVlblBvcy5jdXJyZW50LnggIT09IGV2ZW50LnNjcmVlblggJiYgbW91c2VTY3JlZW5Qb3MuY3VycmVudC55ICE9PSBldmVudC5zY3JlZW5ZOwogICAgICBpZiAodXNlck1vdmVkQ3Vyc29yKSB7CiAgICAgICAgbW91c2VTY3JlZW5Qb3MuY3VycmVudCA9IHsKICAgICAgICAgIHg6IGV2ZW50LnNjcmVlblgsCiAgICAgICAgICB5OiBldmVudC5zY3JlZW5ZCiAgICAgICAgfTsKICAgICAgICBzZXRNb3VzZUNvbnRyb2wodHJ1ZSk7CiAgICAgICAgc2V0Rm9jdXNlZFZhbHVlSW5kZXgodmFsdWVJbmRleCk7CiAgICAgIH0KICAgIH07CiAgICByZXR1cm4gZSQyKCJkaXYiLCB7CiAgICAgIHJlZjogZHJvcGRvd25Db250YWluZXIsCiAgICAgIHRhYkluZGV4OiAtMSwKICAgICAgY2xhc3M6ICJmanMtZHJvcGRvd25saXN0IiwKICAgICAgc3R5bGU6IHsKICAgICAgICBtYXhIZWlnaHQ6IGhlaWdodCwKICAgICAgICBzY3JvbGxCZWhhdmlvcjogc21vb3RoU2Nyb2xsaW5nID8gJ3Ntb290aCcgOiAnYXV0bycKICAgICAgfSwKICAgICAgY2hpbGRyZW46IFt2YWx1ZXMubGVuZ3RoID4gMCAmJiB2YWx1ZXMubWFwKCh2LCBpKSA9PiB7CiAgICAgICAgcmV0dXJuIGUkMigiZGl2IiwgewogICAgICAgICAgY2xhc3M6IGNsYXNzTmFtZXMoJ2Zqcy1kcm9wZG93bmxpc3QtaXRlbScsIHsKICAgICAgICAgICAgJ2ZvY3VzZWQnOiBmb2N1c2VkVmFsdWVJbmRleCA9PT0gaQogICAgICAgICAgfSksCiAgICAgICAgICBvbk1vdXNlTW92ZTogbW91c2VDb250cm9sID8gdW5kZWZpbmVkIDogZSA9PiBvbk1vdXNlTW92ZWRJbktleWJvYXJkTW9kZShlLCBpKSwKICAgICAgICAgIG9uTW91c2VFbnRlcjogbW91c2VDb250cm9sID8gKCkgPT4gc2V0Rm9jdXNlZFZhbHVlSW5kZXgoaSkgOiB1bmRlZmluZWQsCiAgICAgICAgICBvbk1vdXNlRG93bjogZSA9PiB7CiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgb25WYWx1ZVNlbGVjdGVkKHYpOwogICAgICAgICAgfSwKICAgICAgICAgIGNoaWxkcmVuOiBnZXRMYWJlbCh2KQogICAgICAgIH0pOwogICAgICB9KSwgIXZhbHVlcy5sZW5ndGggJiYgZSQyKCJkaXYiLCB7CiAgICAgICAgY2xhc3M6ICJmanMtZHJvcGRvd25saXN0LWVtcHR5IiwKICAgICAgICBjaGlsZHJlbjogZW1wdHlMaXN0TWVzc2FnZQogICAgICB9KV0KICAgIH0pOwogIH0KCiAgZnVuY3Rpb24gVGltZXBpY2tlcihwcm9wcykgewogICAgY29uc3QgewogICAgICBpZCwKICAgICAgbGFiZWwsCiAgICAgIGNvbGxhcHNlTGFiZWxPbkVtcHR5LAogICAgICBmb3JtSWQsCiAgICAgIHJlcXVpcmVkLAogICAgICBkaXNhYmxlZCwKICAgICAgdXNlMjRoID0gZmFsc2UsCiAgICAgIHRpbWVJbnRlcnZhbCwKICAgICAgdGltZSwKICAgICAgc2V0VGltZQogICAgfSA9IHByb3BzOwogICAgY29uc3QgdGltZUlucHV0UmVmID0gcygpOwogICAgY29uc3QgW2Ryb3Bkb3duSXNPcGVuLCBzZXREcm9wZG93bklzT3Blbl0gPSBsJDEoZmFsc2UpOwogICAgY29uc3QgdXNlRHJvcGRvd24gPSBkKCgpID0+IHRpbWVJbnRlcnZhbCAhPT0gMSwgW3RpbWVJbnRlcnZhbF0pOwogICAgY29uc3QgW3Jhd1ZhbHVlLCBzZXRSYXdWYWx1ZV0gPSBsJDEoJycpOwoKICAgIC8vIHBvcHVsYXRlcyB2YWx1ZXMgZnJvbSBzb3VyY2UKICAgIHkoKCkgPT4gewogICAgICBpZiAodGltZSA9PT0gbnVsbCkgewogICAgICAgIHNldFJhd1ZhbHVlKCcnKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgY29uc3QgaW50ZXJ2YWxBZGp1c3RlZFRpbWUgPSB0aW1lIC0gdGltZSAlIHRpbWVJbnRlcnZhbDsKICAgICAgc2V0UmF3VmFsdWUoZm9ybWF0VGltZSh1c2UyNGgsIGludGVydmFsQWRqdXN0ZWRUaW1lKSk7CiAgICAgIGlmIChpbnRlcnZhbEFkanVzdGVkVGltZSAhPSB0aW1lKSB7CiAgICAgICAgc2V0VGltZShpbnRlcnZhbEFkanVzdGVkVGltZSk7CiAgICAgIH0KICAgIH0sIFt0aW1lLCBzZXRUaW1lLCB1c2UyNGgsIHRpbWVJbnRlcnZhbF0pOwogICAgY29uc3QgcHJvcGFnYXRlUmF3VG9NaW51dGUgPSBBJDEobmV3UmF3VmFsdWUgPT4gewogICAgICBjb25zdCBsb2NhbFJhd1ZhbHVlID0gbmV3UmF3VmFsdWUgfHwgcmF3VmFsdWU7CgogICAgICAvLyBJZiBubyByYXcgdmFsdWUgZXhpc3RzLCBzZXQgdGhlIG1pbnV0ZSB0byBudWxsCiAgICAgIGlmICghbG9jYWxSYXdWYWx1ZSkgewogICAgICAgIHNldFRpbWUobnVsbCk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGNvbnN0IG1pbnV0ZXMgPSBwYXJzZUlucHV0VGltZShsb2NhbFJhd1ZhbHVlKTsKCiAgICAgIC8vIElmIHJhdyBzdHJpbmcgY291bGRuJ3QgYmUgcGFyc2VkLCBjbGVhbiBldmVyeXRoaW5nIHVwCiAgICAgIGlmICghaXNOdW1iZXIkMihtaW51dGVzKSkgewogICAgICAgIHNldFJhd1ZhbHVlKCcnKTsKICAgICAgICBzZXRUaW1lKG51bGwpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgLy8gRW5mb3JjZSB0aGUgbWludXRlcyB0byBtYXRjaCB0aGUgdGltZUludGVydmFsCiAgICAgIGNvbnN0IGNvcnJlY3RlZE1pbnV0ZXMgPSBtaW51dGVzIC0gbWludXRlcyAlIHRpbWVJbnRlcnZhbDsKCiAgICAgIC8vIEVuZm9yY2UgdGhlIHJhdyB0ZXh0IHRvIGJlIGZvcm1hdHRlZCBwcm9wZXJseQogICAgICBzZXRSYXdWYWx1ZShmb3JtYXRUaW1lKHVzZTI0aCwgY29ycmVjdGVkTWludXRlcykpOwogICAgICBzZXRUaW1lKGNvcnJlY3RlZE1pbnV0ZXMpOwogICAgfSwgW3Jhd1ZhbHVlLCB0aW1lSW50ZXJ2YWwsIHVzZTI0aCwgc2V0VGltZV0pOwogICAgY29uc3QgdGltZU9wdGlvbnMgPSBkKCgpID0+IHsKICAgICAgY29uc3QgbWludXRlc0luRGF5ID0gMjQgKiA2MDsKICAgICAgY29uc3QgaW50ZXJ2YWxDb3VudCA9IE1hdGguZmxvb3IobWludXRlc0luRGF5IC8gdGltZUludGVydmFsKTsKICAgICAgcmV0dXJuIFsuLi5BcnJheShpbnRlcnZhbENvdW50KS5rZXlzKCldLm1hcChpbnRlcnZhbEluZGV4ID0+IGZvcm1hdFRpbWUodXNlMjRoLCBpbnRlcnZhbEluZGV4ICogdGltZUludGVydmFsKSk7CiAgICB9LCBbdGltZUludGVydmFsLCB1c2UyNGhdKTsKICAgIGNvbnN0IGluaXRpYWxGb2N1c0luZGV4ID0gZCgoKSA9PiB7CiAgICAgIC8vIGlmIHRoZXJlIGFyZSBubyBvcHRpb25zLCB0aGVyZSB3aWxsIG5vdCBiZSBhbnkgZm9jdXNpbmcKICAgICAgaWYgKCF0aW1lT3B0aW9ucyB8fCAhdGltZUludGVydmFsKSByZXR1cm4gbnVsbDsKCiAgICAgIC8vIGlmIHRoZXJlIGlzIGEgc2V0IG1pbnV0ZSB2YWx1ZSwgd2UgZm9jdXMgaXQgaW4gdGhlIGRyb3Bkb3duCiAgICAgIGlmICh0aW1lKSByZXR1cm4gdGltZSAvIHRpbWVJbnRlcnZhbDsKICAgICAgY29uc3QgY2FjaGVUaW1lID0gcGFyc2VJbnB1dFRpbWUocmF3VmFsdWUpOwoKICAgICAgLy8gaWYgdGhlcmUgaXMgYSB2YWxpZCB2YWx1ZSBpbiB0aGUgaW5wdXQgY2FjaGUsIHdlIHRyeSBhbmQgZm9jdXMgY2xvc2UgdG8gaXQKICAgICAgaWYgKGNhY2hlVGltZSkgewogICAgICAgIGNvbnN0IGZsb29yZWRDYWNoZVRpbWUgPSBjYWNoZVRpbWUgLSBjYWNoZVRpbWUgJSB0aW1lSW50ZXJ2YWw7CiAgICAgICAgcmV0dXJuIGZsb29yZWRDYWNoZVRpbWUgLyB0aW1lSW50ZXJ2YWw7CiAgICAgIH0KCiAgICAgIC8vIElmIHRoZXJlIGlzIG5vIHNldCB2YWx1ZSwgc2ltcGx5IGZvY3VzIHRoZSBtaWRkbGUgb2YgdGhlIGRyb3Bkb3duICgxMjowMCkKICAgICAgcmV0dXJuIE1hdGguZmxvb3IodGltZU9wdGlvbnMubGVuZ3RoIC8gMik7CiAgICB9LCBbcmF3VmFsdWUsIHRpbWUsIHRpbWVJbnRlcnZhbCwgdGltZU9wdGlvbnNdKTsKICAgIGNvbnN0IG9uSW5wdXRLZXlEb3duID0gZSA9PiB7CiAgICAgIHN3aXRjaCAoZS5rZXkpIHsKICAgICAgICBjYXNlICdBcnJvd1VwJzoKICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ0Fycm93RG93bic6CiAgICAgICAgICB1c2VEcm9wZG93biAmJiBzZXREcm9wZG93bklzT3Blbih0cnVlKTsKICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ0VzY2FwZSc6CiAgICAgICAgICB1c2VEcm9wZG93biAmJiBzZXREcm9wZG93bklzT3BlbihmYWxzZSk7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdFbnRlcic6CiAgICAgICAgICAhZHJvcGRvd25Jc09wZW4gJiYgcHJvcGFnYXRlUmF3VG9NaW51dGUoKTsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9OwogICAgY29uc3Qgb25JbnB1dEJsdXIgPSBlID0+IHsKICAgICAgc2V0RHJvcGRvd25Jc09wZW4oZmFsc2UpOwogICAgICBwcm9wYWdhdGVSYXdUb01pbnV0ZSgpOwogICAgfTsKICAgIGNvbnN0IG9uRHJvcGRvd25WYWx1ZVNlbGVjdGVkID0gdmFsdWUgPT4gewogICAgICBzZXREcm9wZG93bklzT3BlbihmYWxzZSk7CiAgICAgIHByb3BhZ2F0ZVJhd1RvTWludXRlKHZhbHVlKTsKICAgIH07CiAgICBjb25zdCBmdWxsSWQgPSBgJHtwcmVmaXhJZChpZCwgZm9ybUlkKX0tLXRpbWVgOwogICAgcmV0dXJuIGUkMigiZGl2IiwgewogICAgICBjbGFzczogImZqcy1kYXRldGltZS1zdWJzZWN0aW9uIiwKICAgICAgY2hpbGRyZW46IFtlJDIoTGFiZWwsIHsKICAgICAgICBpZDogZnVsbElkLAogICAgICAgIGxhYmVsOiBsYWJlbCwKICAgICAgICBjb2xsYXBzZU9uRW1wdHk6IGNvbGxhcHNlTGFiZWxPbkVtcHR5LAogICAgICAgIHJlcXVpcmVkOiByZXF1aXJlZAogICAgICB9KSwgZSQyKElucHV0QWRvcm5lciwgewogICAgICAgIHByZTogZSQyKENsb2NrSWNvbiwge30pLAogICAgICAgIGlucHV0UmVmOiB0aW1lSW5wdXRSZWYsCiAgICAgICAgZGlzYWJsZWQ6IGRpc2FibGVkLAogICAgICAgIGNoaWxkcmVuOiBlJDIoImRpdiIsIHsKICAgICAgICAgIGNsYXNzOiAiZmpzLXRpbWVwaWNrZXIgZmpzLXRpbWVwaWNrZXItYW5jaG9yIiwKICAgICAgICAgIGNoaWxkcmVuOiBbZSQyKCJpbnB1dCIsIHsKICAgICAgICAgICAgcmVmOiB0aW1lSW5wdXRSZWYsCiAgICAgICAgICAgIHR5cGU6ICJ0ZXh0IiwKICAgICAgICAgICAgaWQ6IGZ1bGxJZCwKICAgICAgICAgICAgY2xhc3M6ICJmanMtaW5wdXQiLAogICAgICAgICAgICB2YWx1ZTogcmF3VmFsdWUsCiAgICAgICAgICAgIGRpc2FibGVkOiBkaXNhYmxlZCwKICAgICAgICAgICAgcGxhY2Vob2xkZXI6IHVzZTI0aCA/ICdoaDptbScgOiAnaGg6bW0gP20nLAogICAgICAgICAgICBhdXRvQ29tcGxldGU6ICJmYWxzZSIsCiAgICAgICAgICAgIG9uRm9jdXM6ICgpID0+IHVzZURyb3Bkb3duICYmIHNldERyb3Bkb3duSXNPcGVuKHRydWUpLAogICAgICAgICAgICBvbkNsaWNrOiAoKSA9PiB1c2VEcm9wZG93biAmJiBzZXREcm9wZG93bklzT3Blbih0cnVlKQoKICAgICAgICAgICAgLy8gQHRzLWlnbm9yZQogICAgICAgICAgICAsCiAgICAgICAgICAgIG9uSW5wdXQ6IGUgPT4gewogICAgICAgICAgICAgIHNldFJhd1ZhbHVlKGUudGFyZ2V0LnZhbHVlKTsKICAgICAgICAgICAgICB1c2VEcm9wZG93biAmJiBzZXREcm9wZG93bklzT3BlbihmYWxzZSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG9uQmx1cjogb25JbnB1dEJsdXIsCiAgICAgICAgICAgIG9uS2V5RG93bjogb25JbnB1dEtleURvd24sCiAgICAgICAgICAgICJkYXRhLWlucHV0IjogdHJ1ZQogICAgICAgICAgfSksIGRyb3Bkb3duSXNPcGVuICYmIGUkMihEcm9wZG93bkxpc3QsIHsKICAgICAgICAgICAgdmFsdWVzOiB0aW1lT3B0aW9ucywKICAgICAgICAgICAgaGVpZ2h0OiAxNTAsCiAgICAgICAgICAgIG9uVmFsdWVTZWxlY3RlZDogb25Ecm9wZG93blZhbHVlU2VsZWN0ZWQsCiAgICAgICAgICAgIGxpc3RlbmVyRWxlbWVudDogdGltZUlucHV0UmVmLmN1cnJlbnQsCiAgICAgICAgICAgIGluaXRpYWxGb2N1c0luZGV4OiBpbml0aWFsRm9jdXNJbmRleAogICAgICAgICAgfSldCiAgICAgICAgfSkKICAgICAgfSldCiAgICB9KTsKICB9CgogIGNvbnN0IHR5cGUkOCA9ICdkYXRldGltZSc7CiAgZnVuY3Rpb24gRGF0ZXRpbWUocHJvcHMpIHsKICAgIGNvbnN0IHsKICAgICAgZGlzYWJsZWQsCiAgICAgIGVycm9ycyA9IFtdLAogICAgICBmaWVsZCwKICAgICAgb25DaGFuZ2UsCiAgICAgIHZhbHVlID0gJycKICAgIH0gPSBwcm9wczsKICAgIGNvbnN0IHsKICAgICAgZGVzY3JpcHRpb24sCiAgICAgIGlkLAogICAgICBkYXRlTGFiZWwsCiAgICAgIHRpbWVMYWJlbCwKICAgICAgdmFsaWRhdGUgPSB7fSwKICAgICAgc3VidHlwZSwKICAgICAgdXNlMjRoLAogICAgICBkaXNhbGxvd1Bhc3NlZERhdGVzLAogICAgICB0aW1lSW50ZXJ2YWwsCiAgICAgIHRpbWVTZXJpYWxpemluZ0Zvcm1hdAogICAgfSA9IGZpZWxkOwogICAgY29uc3QgewogICAgICByZXF1aXJlZAogICAgfSA9IHZhbGlkYXRlOwogICAgY29uc3QgewogICAgICBmb3JtSWQKICAgIH0gPSBGJDEoRm9ybUNvbnRleHQpOwogICAgY29uc3QgZ2V0TnVsbERhdGVUaW1lID0gKCkgPT4gKHsKICAgICAgZGF0ZTogbmV3IERhdGUoRGF0ZS5wYXJzZShudWxsKSksCiAgICAgIHRpbWU6IG51bGwKICAgIH0pOwogICAgY29uc3QgW2RhdGVUaW1lLCBzZXREYXRlVGltZV0gPSBsJDEoZ2V0TnVsbERhdGVUaW1lKCkpOwogICAgY29uc3QgW2RhdGVUaW1lVXBkYXRlUmVxdWVzdCwgc2V0RGF0ZVRpbWVVcGRhdGVSZXF1ZXN0XSA9IGwkMShudWxsKTsKICAgIGNvbnN0IGlzVmFsaWREYXRlID0gZGF0ZSA9PiBkYXRlICYmICFpc05hTihkYXRlLmdldFRpbWUoKSk7CiAgICBjb25zdCBpc1ZhbGlkVGltZSA9IHRpbWUgPT4gIWlzTmFOKHBhcnNlSW50KHRpbWUpKTsKICAgIGNvbnN0IHVzZURhdGVQaWNrZXIgPSBkKCgpID0+IHN1YnR5cGUgPT09IERBVEVUSU1FX1NVQlRZUEVTLkRBVEUgfHwgc3VidHlwZSA9PT0gREFURVRJTUVfU1VCVFlQRVMuREFURVRJTUUsIFtzdWJ0eXBlXSk7CiAgICBjb25zdCB1c2VUaW1lUGlja2VyID0gZCgoKSA9PiBzdWJ0eXBlID09PSBEQVRFVElNRV9TVUJUWVBFUy5USU1FIHx8IHN1YnR5cGUgPT09IERBVEVUSU1FX1NVQlRZUEVTLkRBVEVUSU1FLCBbc3VidHlwZV0pOwogICAgeSgoKSA9PiB7CiAgICAgIGxldCB7CiAgICAgICAgZGF0ZSwKICAgICAgICB0aW1lCiAgICAgIH0gPSBnZXROdWxsRGF0ZVRpbWUoKTsKICAgICAgaWYgKCFkaXNhYmxlZCkgewogICAgICAgIHN3aXRjaCAoc3VidHlwZSkgewogICAgICAgICAgY2FzZSBEQVRFVElNRV9TVUJUWVBFUy5EQVRFOgogICAgICAgICAgICB7CiAgICAgICAgICAgICAgZGF0ZSA9IG5ldyBEYXRlKERhdGUucGFyc2UodmFsdWUpKTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgY2FzZSBEQVRFVElNRV9TVUJUWVBFUy5USU1FOgogICAgICAgICAgICB7CiAgICAgICAgICAgICAgdGltZSA9IHBhcnNlSXNvVGltZSh2YWx1ZSk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgIGNhc2UgREFURVRJTUVfU1VCVFlQRVMuREFURVRJTUU6CiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBkYXRlID0gbmV3IERhdGUoRGF0ZS5wYXJzZSh2YWx1ZSkpOwogICAgICAgICAgICAgIHRpbWUgPSBpc1ZhbGlkRGF0ZShkYXRlKSA/IDYwICogZGF0ZS5nZXRIb3VycygpICsgZGF0ZS5nZXRNaW51dGVzKCkgOiBudWxsOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIHNldERhdGVUaW1lKHsKICAgICAgICBkYXRlLAogICAgICAgIHRpbWUKICAgICAgfSk7CiAgICB9LCBbc3VidHlwZSwgdmFsdWUsIGRpc2FibGVkXSk7CiAgICBjb25zdCBjb21wdXRlQW5kU2V0U3RhdGUgPSBBJDEoKHsKICAgICAgZGF0ZSwKICAgICAgdGltZQogICAgfSkgPT4gewogICAgICBsZXQgbmV3RGF0ZVRpbWVWYWx1ZSA9IG51bGw7CiAgICAgIGlmIChzdWJ0eXBlID09PSBEQVRFVElNRV9TVUJUWVBFUy5EQVRFICYmIGlzVmFsaWREYXRlKGRhdGUpKSB7CiAgICAgICAgbmV3RGF0ZVRpbWVWYWx1ZSA9IHNlcmlhbGl6ZURhdGUoZGF0ZSk7CiAgICAgIH0gZWxzZSBpZiAoc3VidHlwZSA9PT0gREFURVRJTUVfU1VCVFlQRVMuVElNRSAmJiBpc1ZhbGlkVGltZSh0aW1lKSkgewogICAgICAgIG5ld0RhdGVUaW1lVmFsdWUgPSBzZXJpYWxpemVUaW1lKHRpbWUsIG5ldyBEYXRlKCkuZ2V0VGltZXpvbmVPZmZzZXQoKSwgdGltZVNlcmlhbGl6aW5nRm9ybWF0KTsKICAgICAgfSBlbHNlIGlmIChzdWJ0eXBlID09PSBEQVRFVElNRV9TVUJUWVBFUy5EQVRFVElNRSAmJiBpc1ZhbGlkRGF0ZShkYXRlKSAmJiBpc1ZhbGlkVGltZSh0aW1lKSkgewogICAgICAgIG5ld0RhdGVUaW1lVmFsdWUgPSBzZXJpYWxpemVEYXRlVGltZShkYXRlLCB0aW1lLCB0aW1lU2VyaWFsaXppbmdGb3JtYXQpOwogICAgICB9CiAgICAgIG9uQ2hhbmdlKHsKICAgICAgICB2YWx1ZTogbmV3RGF0ZVRpbWVWYWx1ZSwKICAgICAgICBmaWVsZAogICAgICB9KTsKICAgIH0sIFtmaWVsZCwgb25DaGFuZ2UsIHN1YnR5cGUsIHRpbWVTZXJpYWxpemluZ0Zvcm1hdF0pOwogICAgeSgoKSA9PiB7CiAgICAgIGlmIChkYXRlVGltZVVwZGF0ZVJlcXVlc3QpIHsKICAgICAgICBpZiAoZGF0ZVRpbWVVcGRhdGVSZXF1ZXN0LnJlZnJlc2hPbmx5KSB7CiAgICAgICAgICBjb21wdXRlQW5kU2V0U3RhdGUoZGF0ZVRpbWUpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zdCBuZXdEYXRlVGltZSA9IHsKICAgICAgICAgICAgLi4uZGF0ZVRpbWUsCiAgICAgICAgICAgIC4uLmRhdGVUaW1lVXBkYXRlUmVxdWVzdAogICAgICAgICAgfTsKICAgICAgICAgIHNldERhdGVUaW1lKG5ld0RhdGVUaW1lKTsKICAgICAgICAgIGNvbXB1dGVBbmRTZXRTdGF0ZShuZXdEYXRlVGltZSk7CiAgICAgICAgfQogICAgICAgIHNldERhdGVUaW1lVXBkYXRlUmVxdWVzdChudWxsKTsKICAgICAgfQogICAgfSwgW2NvbXB1dGVBbmRTZXRTdGF0ZSwgZGF0ZVRpbWUsIGRhdGVUaW1lVXBkYXRlUmVxdWVzdF0pOwogICAgeSgoKSA9PiB7CiAgICAgIHNldERhdGVUaW1lVXBkYXRlUmVxdWVzdCh7CiAgICAgICAgcmVmcmVzaE9ubHk6IHRydWUKICAgICAgfSk7CiAgICB9LCBbdGltZVNlcmlhbGl6aW5nRm9ybWF0XSk7CiAgICBjb25zdCBhbGxFcnJvcnMgPSBkKCgpID0+IHsKICAgICAgaWYgKHJlcXVpcmVkIHx8IHN1YnR5cGUgIT09IERBVEVUSU1FX1NVQlRZUEVTLkRBVEVUSU1FKSByZXR1cm4gZXJyb3JzOwogICAgICBjb25zdCBpc09ubHlPbmVGaWVsZFNldCA9IGlzVmFsaWREYXRlKGRhdGVUaW1lLmRhdGUpICYmICFpc1ZhbGlkVGltZShkYXRlVGltZS50aW1lKSB8fCAhaXNWYWxpZERhdGUoZGF0ZVRpbWUuZGF0ZSkgJiYgaXNWYWxpZFRpbWUoZGF0ZVRpbWUudGltZSk7CiAgICAgIHJldHVybiBpc09ubHlPbmVGaWVsZFNldCA/IFsnRGF0ZSBhbmQgdGltZSBtdXN0IGJvdGggYmUgZW50ZXJlZC4nLCAuLi5lcnJvcnNdIDogZXJyb3JzOwogICAgfSwgW3JlcXVpcmVkLCBzdWJ0eXBlLCBkYXRlVGltZSwgZXJyb3JzXSk7CiAgICBjb25zdCBzZXREYXRlID0gQSQxKGRhdGUgPT4gewogICAgICBzZXREYXRlVGltZVVwZGF0ZVJlcXVlc3QocHJldiA9PiBwcmV2ID8gewogICAgICAgIC4uLnByZXYsCiAgICAgICAgZGF0ZQogICAgICB9IDogewogICAgICAgIGRhdGUKICAgICAgfSk7CiAgICB9LCBbXSk7CiAgICBjb25zdCBzZXRUaW1lID0gQSQxKHRpbWUgPT4gewogICAgICBzZXREYXRlVGltZVVwZGF0ZVJlcXVlc3QocHJldiA9PiBwcmV2ID8gewogICAgICAgIC4uLnByZXYsCiAgICAgICAgdGltZQogICAgICB9IDogewogICAgICAgIHRpbWUKICAgICAgfSk7CiAgICB9LCBbXSk7CiAgICBjb25zdCBkYXRlUGlja2VyUHJvcHMgPSB7CiAgICAgIGlkLAogICAgICBsYWJlbDogZGF0ZUxhYmVsLAogICAgICBjb2xsYXBzZUxhYmVsT25FbXB0eTogIXRpbWVMYWJlbCwKICAgICAgZm9ybUlkLAogICAgICByZXF1aXJlZCwKICAgICAgZGlzYWJsZWQsCiAgICAgIGRpc2FsbG93UGFzc2VkRGF0ZXMsCiAgICAgIGRhdGU6IGRhdGVUaW1lLmRhdGUsCiAgICAgIHNldERhdGUKICAgIH07CiAgICBjb25zdCB0aW1lUGlja2VyUHJvcHMgPSB7CiAgICAgIGlkLAogICAgICBsYWJlbDogdGltZUxhYmVsLAogICAgICBjb2xsYXBzZUxhYmVsT25FbXB0eTogIWRhdGVMYWJlbCwKICAgICAgZm9ybUlkLAogICAgICByZXF1aXJlZCwKICAgICAgZGlzYWJsZWQsCiAgICAgIHVzZTI0aCwKICAgICAgdGltZUludGVydmFsLAogICAgICB0aW1lOiBkYXRlVGltZS50aW1lLAogICAgICBzZXRUaW1lCiAgICB9OwogICAgcmV0dXJuIGUkMigiZGl2IiwgewogICAgICBjbGFzczogZm9ybUZpZWxkQ2xhc3Nlcyh0eXBlJDgsIHsKICAgICAgICBlcnJvcnM6IGFsbEVycm9ycywKICAgICAgICBkaXNhYmxlZAogICAgICB9KSwKICAgICAgY2hpbGRyZW46IFtlJDIoImRpdiIsIHsKICAgICAgICBjbGFzczogY2xhc3NOYW1lcygnZmpzLXZlcnRpY2FsLWdyb3VwJyksCiAgICAgICAgY2hpbGRyZW46IFt1c2VEYXRlUGlja2VyICYmIGUkMihEYXRlcGlja2VyLCB7CiAgICAgICAgICAuLi5kYXRlUGlja2VyUHJvcHMKICAgICAgICB9KSwgdXNlVGltZVBpY2tlciAmJiB1c2VEYXRlUGlja2VyICYmIGUkMigiZGl2IiwgewogICAgICAgICAgY2xhc3M6ICJmanMtZGF0ZXRpbWUtc2VwYXJhdG9yIgogICAgICAgIH0pLCB1c2VUaW1lUGlja2VyICYmIGUkMihUaW1lcGlja2VyLCB7CiAgICAgICAgICAuLi50aW1lUGlja2VyUHJvcHMKICAgICAgICB9KV0KICAgICAgfSksIGUkMihEZXNjcmlwdGlvbiwgewogICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbgogICAgICB9KSwgZSQyKEVycm9ycywgewogICAgICAgIGVycm9yczogYWxsRXJyb3JzCiAgICAgIH0pXQogICAgfSk7CiAgfQogIERhdGV0aW1lLmNyZWF0ZSA9IGZ1bmN0aW9uIChvcHRpb25zID0ge30pIHsKICAgIGNvbnN0IG5ld09wdGlvbnMgPSB7fTsKICAgIHNldChuZXdPcHRpb25zLCBEQVRFVElNRV9TVUJUWVBFX1BBVEgsIERBVEVUSU1FX1NVQlRZUEVTLkRBVEUpOwogICAgc2V0KG5ld09wdGlvbnMsIERBVEVfTEFCRUxfUEFUSCwgJ0RhdGUnKTsKICAgIHJldHVybiB7CiAgICAgIC4uLm5ld09wdGlvbnMsCiAgICAgIC4uLm9wdGlvbnMKICAgIH07CiAgfTsKICBEYXRldGltZS50eXBlID0gdHlwZSQ4OwogIERhdGV0aW1lLmtleWVkID0gdHJ1ZTsKICBEYXRldGltZS5lbXB0eVZhbHVlID0gbnVsbDsKICBEYXRldGltZS5zYW5pdGl6ZVZhbHVlID0gc2FuaXRpemVEYXRlVGltZVBpY2tlclZhbHVlOwoKICAvKioKICAgKiBUaGlzIGZpbGUgbXVzdCBub3QgYmUgY2hhbmdlZCBvciBleGNoYW5nZWQuCiAgICoKICAgKiBAc2VlIGh0dHA6Ly9icG1uLmlvL2xpY2Vuc2UgZm9yIG1vcmUgaW5mb3JtYXRpb24uCiAgICovCiAgZnVuY3Rpb24gTG9nbygpIHsKICAgIHJldHVybiBlJDIoInN2ZyIsIHsKICAgICAgeG1sbnM6ICJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsCiAgICAgIHZpZXdCb3g6ICIwIDAgMTQuMDIgNS41NyIsCiAgICAgIHdpZHRoOiAiNTMiLAogICAgICBoZWlnaHQ6ICIyMSIsCiAgICAgIHN0eWxlOiAidmVydGljYWwtYWxpZ246bWlkZGxlIiwKICAgICAgY2hpbGRyZW46IFtlJDIoInBhdGgiLCB7CiAgICAgICAgZmlsbDogImN1cnJlbnRDb2xvciIsCiAgICAgICAgZDogIk0xLjg4Ljkydi4xNGMwIC40MS0uMTMuNjgtLjQuOC4zMy4xNC40Ni40NC40Ni44NnYuMzNjMCAuNjEtLjMzLjk1LS45NS45NUgwVjBoLjk1Yy42NSAwIC45My4zLjkzLjkyek0uNjMuNTd2MS4wNmguMjRjLjI0IDAgLjM4LS4xLjM4LS40M1YuOThjMC0uMjgtLjEtLjQtLjMyLS40em0wIDEuNjN2MS4yMmguMzZjLjIgMCAuMzItLjEuMzItLjM5di0uMzVjMC0uMzctLjEyLS40OC0uNC0uNDhILjYzek00LjE4Ljk5di41MmMwIC42NC0uMzEuOTgtLjk0Ljk4aC0uM1Y0aC0uNjJWMGguOTJjLjYzIDAgLjk0LjM1Ljk0Ljk5ek0yLjk0LjU3djEuMzVoLjNjLjIgMCAuMy0uMDkuMy0uMzd2LS42YzAtLjI5LS4xLS4zOC0uMy0uMzhoLS4zem0yLjg5IDIuMjdMNi4yNSAwaC44OHY0aC0uNlYxLjEyTDYuMSAzLjk5aC0uNmwtLjQ2LTIuODJ2Mi44MmgtLjU1VjBoLjg3ek04LjE0IDEuMVY0aC0uNTZWMGguNzlMOSAyLjRWMGguNTZ2NGgtLjY0em0yLjQ5IDIuMjl2LjZoLS42di0uNnpNMTIuMTIgMWMwLS42My4zMy0xIC45NS0xIC42MSAwIC45NS4zNy45NSAxdjIuMDRjMCAuNjQtLjM0IDEtLjk1IDEtLjYyIDAtLjk1LS4zNy0uOTUtMXptLjYyIDIuMDhjMCAuMjguMTMuMzkuMzMuMzlzLjMyLS4xLjMyLS40Vi45OGMwLS4yOS0uMTItLjQtLjMyLS40cy0uMzMuMTEtLjMzLjR6IgogICAgICB9KSwgZSQyKCJwYXRoIiwgewogICAgICAgIGZpbGw6ICJjdXJyZW50Q29sb3IiLAogICAgICAgIGQ6ICJNMCA0LjUzaDE0LjAydjEuMDRIMHpNMTEuMDggMGguNjN2LjYyaC0uNjN6bS42MyA0VjFoLS42M3YyLjk4eiIKICAgICAgfSldCiAgICB9KTsKICB9CiAgZnVuY3Rpb24gTGlnaHRib3gocHJvcHMpIHsKICAgIGNvbnN0IHsKICAgICAgb3BlbgogICAgfSA9IHByb3BzOwogICAgaWYgKCFvcGVuKSB7CiAgICAgIHJldHVybiBudWxsOwogICAgfQogICAgcmV0dXJuIGUkMigiZGl2IiwgewogICAgICBjbGFzczogImZqcy1wb3dlcmVkLWJ5LWxpZ2h0Ym94IiwKICAgICAgc3R5bGU6ICJ6LWluZGV4OiAxMDA7IHBvc2l0aW9uOiBmaXhlZDsgdG9wOiAwOyBsZWZ0OiAwO3JpZ2h0OiAwOyBib3R0b206IDAiLAogICAgICBjaGlsZHJlbjogW2UkMigiZGl2IiwgewogICAgICAgIGNsYXNzOiAiYmFja2Ryb3AiLAogICAgICAgIHN0eWxlOiAid2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJTsgYmFja2dyb3VuZDogcmdiYSg0MCA0MCA0MCAvIDIwJSkiLAogICAgICAgIG9uQ2xpY2s6IHByb3BzLm9uQmFja2Ryb3BDbGljawogICAgICB9KSwgZSQyKCJkaXYiLCB7CiAgICAgICAgY2xhc3M6ICJub3RpY2UiLAogICAgICAgIHN0eWxlOiAicG9zaXRpb246IGFic29sdXRlOyBsZWZ0OiA1MCU7IHRvcDogNDAlOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlKTsgd2lkdGg6IDI2MHB4OyBwYWRkaW5nOiAxMHB4OyBiYWNrZ3JvdW5kOiB3aGl0ZTsgYm94LXNoYWRvdzogMCAgMXB4IDRweCByZ2JhKDAgMCAwIC8gMzAlKTsgZm9udC1mYW1pbHk6IEhlbHZldGljYSwgQXJpYWwsIHNhbnMtc2VyaWY7IGZvbnQtc2l6ZTogMTRweDsgZGlzcGxheTogZmxleDsgbGluZS1oZWlnaHQ6IDEuMyIsCiAgICAgICAgY2hpbGRyZW46IFtlJDIoImEiLCB7CiAgICAgICAgICBocmVmOiAiaHR0cHM6Ly9icG1uLmlvIiwKICAgICAgICAgIHRhcmdldDogIl9ibGFuayIsCiAgICAgICAgICByZWw6ICJub29wZW5lciIsCiAgICAgICAgICBzdHlsZTogIm1hcmdpbjogMTVweCAyMHB4IDE1cHggMTBweDsgYWxpZ24tc2VsZjogY2VudGVyOyBjb2xvcjogIzQwNDA0MCIsCiAgICAgICAgICBjaGlsZHJlbjogZSQyKExvZ28sIHt9KQogICAgICAgIH0pLCBlJDIoInNwYW4iLCB7CiAgICAgICAgICBjaGlsZHJlbjogWyJXZWItYmFzZWQgdG9vbGluZyBmb3IgQlBNTiwgRE1OLCBhbmQgZm9ybXMgcG93ZXJlZCBieSAiLCBlJDIoImEiLCB7CiAgICAgICAgICAgIGhyZWY6ICJodHRwczovL2JwbW4uaW8iLAogICAgICAgICAgICB0YXJnZXQ6ICJfYmxhbmsiLAogICAgICAgICAgICByZWw6ICJub29wZW5lciIsCiAgICAgICAgICAgIGNoaWxkcmVuOiAiYnBtbi5pbyIKICAgICAgICAgIH0pLCAiLiJdCiAgICAgICAgfSldCiAgICAgIH0pXQogICAgfSk7CiAgfQogIGZ1bmN0aW9uIExpbmsocHJvcHMpIHsKICAgIHJldHVybiBlJDIoImRpdiIsIHsKICAgICAgY2xhc3M6ICJmanMtcG93ZXJlZC1ieSBmanMtZm9ybS1maWVsZCIsCiAgICAgIHN0eWxlOiAidGV4dC1hbGlnbjogcmlnaHQiLAogICAgICBjaGlsZHJlbjogZSQyKCJhIiwgewogICAgICAgIGhyZWY6ICJodHRwczovL2JwbW4uaW8iLAogICAgICAgIHRhcmdldDogIl9ibGFuayIsCiAgICAgICAgcmVsOiAibm9vcGVuZXIiLAogICAgICAgIGNsYXNzOiAiZmpzLXBvd2VyZWQtYnktbGluayIsCiAgICAgICAgdGl0bGU6ICJQb3dlcmVkIGJ5IGJwbW4uaW8iLAogICAgICAgIHN0eWxlOiAiY29sb3I6ICM0MDQwNDAiLAogICAgICAgIG9uQ2xpY2s6IHByb3BzLm9uQ2xpY2ssCiAgICAgICAgY2hpbGRyZW46IGUkMihMb2dvLCB7fSkKICAgICAgfSkKICAgIH0pOwogIH0KICBmdW5jdGlvbiBQb3dlcmVkQnkocHJvcHMpIHsKICAgIGNvbnN0IFtvcGVuLCBzZXRPcGVuXSA9IGwkMShmYWxzZSk7CiAgICBmdW5jdGlvbiB0b2dnbGVPcGVuKG9wZW4pIHsKICAgICAgcmV0dXJuIGV2ZW50ID0+IHsKICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgIHNldE9wZW4ob3Blbik7CiAgICAgIH07CiAgICB9CiAgICByZXR1cm4gZSQyKGQkMSwgewogICAgICBjaGlsZHJlbjogW1coZSQyKExpZ2h0Ym94LCB7CiAgICAgICAgb3Blbjogb3BlbiwKICAgICAgICBvbkJhY2tkcm9wQ2xpY2s6IHRvZ2dsZU9wZW4oZmFsc2UpCiAgICAgIH0pLCBkb2N1bWVudC5ib2R5KSwgZSQyKExpbmssIHsKICAgICAgICBvbkNsaWNrOiB0b2dnbGVPcGVuKHRydWUpCiAgICAgIH0pXQogICAgfSk7CiAgfQoKICBjb25zdCBub29wID0gKCkgPT4ge307CiAgZnVuY3Rpb24gRm9ybUNvbXBvbmVudChwcm9wcykgewogICAgY29uc3QgZm9ybSA9IHVzZVNlcnZpY2UoJ2Zvcm0nKTsKICAgIGNvbnN0IHsKICAgICAgc2NoZW1hCiAgICB9ID0gZm9ybS5fZ2V0U3RhdGUoKTsKICAgIGNvbnN0IHsKICAgICAgb25TdWJtaXQgPSBub29wLAogICAgICBvblJlc2V0ID0gbm9vcCwKICAgICAgb25DaGFuZ2UgPSBub29wCiAgICB9ID0gcHJvcHM7CiAgICBjb25zdCBoYW5kbGVTdWJtaXQgPSBldmVudCA9PiB7CiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIG9uU3VibWl0KCk7CiAgICB9OwogICAgY29uc3QgaGFuZGxlUmVzZXQgPSBldmVudCA9PiB7CiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIG9uUmVzZXQoKTsKICAgIH07CiAgICByZXR1cm4gZSQyKCJmb3JtIiwgewogICAgICBjbGFzczogImZqcy1mb3JtIiwKICAgICAgb25TdWJtaXQ6IGhhbmRsZVN1Ym1pdCwKICAgICAgb25SZXNldDogaGFuZGxlUmVzZXQsCiAgICAgIG5vVmFsaWRhdGU6IHRydWUsCiAgICAgIGNoaWxkcmVuOiBbZSQyKEZvcm1GaWVsZCwgewogICAgICAgIGZpZWxkOiBzY2hlbWEsCiAgICAgICAgb25DaGFuZ2U6IG9uQ2hhbmdlCiAgICAgIH0pLCBlJDIoUG93ZXJlZEJ5LCB7fSldCiAgICB9KTsKICB9CgogIC8qKgogICAqCiAgICogQHBhcmFtIHtzdHJpbmcgfCB1bmRlZmluZWR9IGV4cHJlc3Npb24KICAgKiBAcGFyYW0ge2ltcG9ydCgnLi4vLi4vdHlwZXMnKS5EYXRhfSBkYXRhCiAgICovCiAgZnVuY3Rpb24gdXNlRXZhbHVhdGlvbihleHByZXNzaW9uLCBkYXRhKSB7CiAgICBjb25zdCBpbml0aWFsRGF0YSA9IHVzZVNlcnZpY2UoJ2Zvcm0nKS5fZ2V0U3RhdGUoKS5pbml0aWFsRGF0YTsKICAgIGNvbnN0IGNvbmRpdGlvbkNoZWNrZXIgPSB1c2VTZXJ2aWNlKCdjb25kaXRpb25DaGVja2VyJywgZmFsc2UpOwogICAgaWYgKCFjb25kaXRpb25DaGVja2VyKSB7CiAgICAgIHJldHVybiBudWxsOwogICAgfQoKICAgIC8vIG1ha2Ugc3VyZSB3ZSBkbyBub3QgdXNlIGRhdGEgZnJvbSBoaWRkZW4gZmllbGRzCiAgICBjb25zdCBmaWx0ZXJlZERhdGEgPSB7CiAgICAgIC4uLmluaXRpYWxEYXRhLAogICAgICAuLi5jb25kaXRpb25DaGVja2VyLmFwcGx5Q29uZGl0aW9ucyhkYXRhLCBkYXRhKQogICAgfTsKICAgIHJldHVybiBjb25kaXRpb25DaGVja2VyLmV2YWx1YXRlKGV4cHJlc3Npb24sIGZpbHRlcmVkRGF0YSk7CiAgfQoKICAvKioKICAgKgogICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZQogICAqLwogIGZ1bmN0aW9uIHVzZUV4cHJlc3Npb25WYWx1ZSh2YWx1ZSkgewogICAgY29uc3QgZm9ybURhdGEgPSB1c2VTZXJ2aWNlKCdmb3JtJykuX2dldFN0YXRlKCkuZGF0YTsKICAgIGlmICghaXNFeHByZXNzaW9uKHZhbHVlKSkgewogICAgICByZXR1cm4gdmFsdWU7CiAgICB9CgogICAgLy8gV2UgY2FuIGlnbm9yZSB0aGlzIGhvb2sgcnVsZSBhcyB3ZSBkbyBub3QgdXNlCiAgICAvLyBzdGF0ZSBvciBlZmZlY3RzIGluIG91ciBjdXN0b20gaG9va3MKICAgIC8qIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9ydWxlcy1vZi1ob29rcyAqLwogICAgcmV0dXJuIHVzZUV2YWx1YXRpb24odmFsdWUsIGZvcm1EYXRhKTsKICB9CgogIC8vIGhlbHBlciAvLy8vLy8vLy8vLy8vLy8KCiAgZnVuY3Rpb24gaXNFeHByZXNzaW9uKHZhbHVlKSB7CiAgICByZXR1cm4gaXNTdHJpbmckMih2YWx1ZSkgJiYgdmFsdWUuc3RhcnRzV2l0aCgnPScpOwogIH0KCiAgZnVuY3Rpb24gX2V4dGVuZHMkZigpIHsgX2V4dGVuZHMkZiA9IE9iamVjdC5hc3NpZ24gPyBPYmplY3QuYXNzaWduLmJpbmQoKSA6IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9OyByZXR1cm4gX2V4dGVuZHMkZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9CiAgdmFyIEltYWdlUGxhY2Vob2xkZXIgPSAoKHsKICAgIHN0eWxlcyA9IHt9LAogICAgLi4ucHJvcHMKICB9KSA9PiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgic3ZnIiwgX2V4dGVuZHMkZih7CiAgICB3aWR0aDogIjY0IiwKICAgIGhlaWdodDogIjY0IiwKICAgIHZpZXdCb3g6ICIwIDAgMTI4MCAxMjgwIiwKICAgIHhtbG5zOiAiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLAogICAgZmlsbFJ1bGU6ICJldmVub2RkIiwKICAgIGNsaXBSdWxlOiAiZXZlbm9kZCIsCiAgICBzdHJva2VMaW5lam9pbjogInJvdW5kIiwKICAgIHN0cm9rZU1pdGVybGltaXQ6ICIyIgogIH0sIHByb3BzKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInBhdGgiLCB7CiAgICBmaWxsOiAiI2U1ZTllZCIsCiAgICBkOiAiTTAgMGgxMjgwdjEyODBIMHoiCiAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJwYXRoIiwgewogICAgZDogIk05MTAgNDEwSDM3MHY0NzBoNTQwVjQxMHptLTU3LjMzMyA1Ny4zMzN2MzU1LjMzNEg0MjcuMzMzVjQ2Ny4zMzNoNDI1LjMzNHoiLAogICAgZmlsbDogIiNjYWQzZGIiCiAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJwYXRoIiwgewogICAgZDogIk04MTAgNzcwSDQ4MHYtNjBsMTAwLTE3MCAxMzAgMTcwIDEwMC02NXYxMjV6IiwKICAgIGZpbGw6ICIjY2FkM2RiIgogIH0pLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgiY2lyY2xlIiwgewogICAgY3g6ICI3NTAiLAogICAgY3k6ICI1NTAiLAogICAgcjogIjUwIiwKICAgIGZpbGw6ICIjY2FkM2RiIiwKICAgIHRyYW5zZm9ybTogInRyYW5zbGF0ZSgxMCAxMCkiCiAgfSkpKTsKCiAgY29uc3QgdHlwZSQ3ID0gJ2ltYWdlJzsKICBmdW5jdGlvbiBJbWFnZShwcm9wcykgewogICAgY29uc3QgewogICAgICBmaWVsZAogICAgfSA9IHByb3BzOwogICAgY29uc3QgewogICAgICBhbHQsCiAgICAgIGlkLAogICAgICBzb3VyY2UKICAgIH0gPSBmaWVsZDsKICAgIGNvbnN0IHNhZmVTb3VyY2UgPSBzYWZlSW1hZ2VTb3VyY2UodXNlRXhwcmVzc2lvblZhbHVlKHNvdXJjZSkpOwogICAgY29uc3QgYWx0VGV4dCA9IHVzZUV4cHJlc3Npb25WYWx1ZShhbHQpOwogICAgY29uc3QgewogICAgICBmb3JtSWQKICAgIH0gPSBGJDEoRm9ybUNvbnRleHQpOwogICAgcmV0dXJuIGUkMigiZGl2IiwgewogICAgICBjbGFzczogZm9ybUZpZWxkQ2xhc3Nlcyh0eXBlJDcpLAogICAgICBjaGlsZHJlbjogZSQyKCJkaXYiLCB7CiAgICAgICAgY2xhc3M6ICJmanMtaW1hZ2UtY29udGFpbmVyIiwKICAgICAgICBjaGlsZHJlbjogW3NhZmVTb3VyY2UgJiYgZSQyKCJpbWciLCB7CiAgICAgICAgICBhbHQ6IGFsdFRleHQsCiAgICAgICAgICBzcmM6IHNhZmVTb3VyY2UsCiAgICAgICAgICBjbGFzczogImZqcy1pbWFnZSIsCiAgICAgICAgICBpZDogcHJlZml4SWQoaWQsIGZvcm1JZCkKICAgICAgICB9KSwgIXNhZmVTb3VyY2UgJiYgZSQyKCJkaXYiLCB7CiAgICAgICAgICBjbGFzczogImZqcy1pbWFnZS1wbGFjZWhvbGRlciIsCiAgICAgICAgICBjaGlsZHJlbjogZSQyKEltYWdlUGxhY2Vob2xkZXIsIHsKICAgICAgICAgICAgYWx0OiAiVGhpcyBpcyBhbiBpbWFnZSBwbGFjZWhvbGRlciIKICAgICAgICAgIH0pCiAgICAgICAgfSldCiAgICAgIH0pCiAgICB9KTsKICB9CiAgSW1hZ2UuY3JlYXRlID0gZnVuY3Rpb24gKG9wdGlvbnMgPSB7fSkgewogICAgcmV0dXJuIHsKICAgICAgLi4ub3B0aW9ucwogICAgfTsKICB9OwogIEltYWdlLnR5cGUgPSB0eXBlJDc7CiAgSW1hZ2Uua2V5ZWQgPSBmYWxzZTsKCiAgY29uc3QgdHlwZSQ2ID0gJ251bWJlcic7CiAgZnVuY3Rpb24gTnVtYmVyZmllbGQocHJvcHMpIHsKICAgIGNvbnN0IHsKICAgICAgZGlzYWJsZWQsCiAgICAgIGVycm9ycyA9IFtdLAogICAgICBmaWVsZCwKICAgICAgdmFsdWUsCiAgICAgIG9uQ2hhbmdlCiAgICB9ID0gcHJvcHM7CiAgICBjb25zdCB7CiAgICAgIGRlc2NyaXB0aW9uLAogICAgICBpZCwKICAgICAgbGFiZWwsCiAgICAgIGFwcGVhcmFuY2UgPSB7fSwKICAgICAgdmFsaWRhdGUgPSB7fSwKICAgICAgZGVjaW1hbERpZ2l0cywKICAgICAgc2VyaWFsaXplVG9TdHJpbmcgPSBmYWxzZSwKICAgICAgaW5jcmVtZW50OiBpbmNyZW1lbnRWYWx1ZQogICAgfSA9IGZpZWxkOwogICAgY29uc3QgewogICAgICBwcmVmaXhBZG9ybmVyLAogICAgICBzdWZmaXhBZG9ybmVyCiAgICB9ID0gYXBwZWFyYW5jZTsKICAgIGNvbnN0IHsKICAgICAgcmVxdWlyZWQKICAgIH0gPSB2YWxpZGF0ZTsKICAgIGNvbnN0IGlucHV0UmVmID0gcygpOwogICAgY29uc3QgW3N0cmluZ1ZhbHVlQ2FjaGUsIHNldFN0cmluZ1ZhbHVlQ2FjaGVdID0gbCQxKCcnKTsKCiAgICAvLyBjaGVja3Mgd2hldGhlciB0aGUgdmFsdWUgY3VycmVudGx5IGluIHRoZSBmb3JtIGRhdGEgaXMgcHJhY3RpY2FsbHkgZGlmZmVyZW50IGZyb20gdGhlIG9uZSBpbiB0aGUgaW5wdXQgZmllbGQgY2FjaGUKICAgIC8vIHRoaXMgYWxsb3dzIHVzIHRvIGd1YXJhbnRlZSB0aGUgZmllbGQgYWx3YXlzIGRpc3BsYXlzIHZhbGlkIGZvcm0gZGF0YSwgYnV0IHdpdGhvdXQgYXV0by1zaW1wbGlmeWluZyB2YWx1ZXMgbGlrZSAxLjAwMCB0byAxCiAgICBjb25zdCBjYWNoZVZhbHVlTWF0Y2hlc1N0YXRlID0gZCgoKSA9PiBOdW1iZXJmaWVsZC5zYW5pdGl6ZVZhbHVlKHsKICAgICAgdmFsdWUsCiAgICAgIGZvcm1GaWVsZDogZmllbGQKICAgIH0pID09PSBOdW1iZXJmaWVsZC5zYW5pdGl6ZVZhbHVlKHsKICAgICAgdmFsdWU6IHN0cmluZ1ZhbHVlQ2FjaGUsCiAgICAgIGZvcm1GaWVsZDogZmllbGQKICAgIH0pLCBbc3RyaW5nVmFsdWVDYWNoZSwgdmFsdWUsIGZpZWxkXSk7CiAgICBjb25zdCBkaXNwbGF5VmFsdWUgPSBkKCgpID0+IHsKICAgICAgaWYgKHZhbHVlID09PSAnTmFOJykgcmV0dXJuICdOYU4nOwogICAgICByZXR1cm4gY2FjaGVWYWx1ZU1hdGNoZXNTdGF0ZSA/IHN0cmluZ1ZhbHVlQ2FjaGUgOiB2YWx1ZSB8fCB2YWx1ZSA9PT0gMCA/IEJpZyh2YWx1ZSkudG9GaXhlZCgpIDogJyc7CiAgICB9LCBbc3RyaW5nVmFsdWVDYWNoZSwgdmFsdWUsIGNhY2hlVmFsdWVNYXRjaGVzU3RhdGVdKTsKICAgIGNvbnN0IGFycm93SW5jcmVtZW50VmFsdWUgPSBkKCgpID0+IHsKICAgICAgaWYgKGluY3JlbWVudFZhbHVlKSByZXR1cm4gQmlnKGluY3JlbWVudFZhbHVlKTsKICAgICAgaWYgKGRlY2ltYWxEaWdpdHMpIHJldHVybiBCaWcoYDFlLSR7ZGVjaW1hbERpZ2l0c31gKTsKICAgICAgcmV0dXJuIEJpZygnMScpOwogICAgfSwgW2RlY2ltYWxEaWdpdHMsIGluY3JlbWVudFZhbHVlXSk7CiAgICBjb25zdCBzZXRWYWx1ZSA9IEEkMShzdHJpbmdWYWx1ZSA9PiB7CiAgICAgIGlmIChpc051bGxFcXVpdmFsZW50VmFsdWUoc3RyaW5nVmFsdWUpKSB7CiAgICAgICAgc2V0U3RyaW5nVmFsdWVDYWNoZSgnJyk7CiAgICAgICAgb25DaGFuZ2UoewogICAgICAgICAgZmllbGQsCiAgICAgICAgICB2YWx1ZTogbnVsbAogICAgICAgIH0pOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgLy8gdHJlYXQgY29tbWFzIGFzIGRvdHMKICAgICAgc3RyaW5nVmFsdWUgPSBzdHJpbmdWYWx1ZS5yZXBsYWNlQWxsKCcsJywgJy4nKTsKICAgICAgaWYgKGlzTmFOKE51bWJlcihzdHJpbmdWYWx1ZSkpKSB7CiAgICAgICAgc2V0U3RyaW5nVmFsdWVDYWNoZSgnTmFOJyk7CiAgICAgICAgb25DaGFuZ2UoewogICAgICAgICAgZmllbGQsCiAgICAgICAgICB2YWx1ZTogJ05hTicKICAgICAgICB9KTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgc2V0U3RyaW5nVmFsdWVDYWNoZShzdHJpbmdWYWx1ZSk7CiAgICAgIG9uQ2hhbmdlKHsKICAgICAgICBmaWVsZCwKICAgICAgICB2YWx1ZTogc2VyaWFsaXplVG9TdHJpbmcgPyBzdHJpbmdWYWx1ZSA6IE51bWJlcihzdHJpbmdWYWx1ZSkKICAgICAgfSk7CiAgICB9LCBbZmllbGQsIG9uQ2hhbmdlLCBzZXJpYWxpemVUb1N0cmluZ10pOwogICAgY29uc3QgaW5jcmVtZW50ID0gKCkgPT4gewogICAgICBjb25zdCBiYXNlID0gaXNWYWxpZE51bWJlcih2YWx1ZSkgPyBCaWcodmFsdWUpIDogQmlnKDApOwogICAgICBjb25zdCBzdGVwRmxvb3JlZFZhbHVlID0gYmFzZS5taW51cyhiYXNlLm1vZChhcnJvd0luY3JlbWVudFZhbHVlKSk7CgogICAgICAvLyBub3RlOiB0b0ZpeGVkKCkgYmVoYXZlcyBkaWZmZXJlbnRseSBpbiBiaWcuanMKICAgICAgc2V0VmFsdWUoc3RlcEZsb29yZWRWYWx1ZS5wbHVzKGFycm93SW5jcmVtZW50VmFsdWUpLnRvRml4ZWQoKSk7CiAgICB9OwogICAgY29uc3QgZGVjcmVtZW50ID0gKCkgPT4gewogICAgICBjb25zdCBiYXNlID0gaXNWYWxpZE51bWJlcih2YWx1ZSkgPyBCaWcodmFsdWUpIDogQmlnKDApOwogICAgICBjb25zdCBvZmZzZXQgPSBiYXNlLm1vZChhcnJvd0luY3JlbWVudFZhbHVlKTsKICAgICAgaWYgKG9mZnNldC5jbXAoMCkgPT09IDApIHsKICAgICAgICAvLyBpZiB3ZSdyZSBhbHJlYWR5IG9uIGEgdmFsaWQgc3RlcCwgZGVjcmVtZW50CiAgICAgICAgc2V0VmFsdWUoYmFzZS5taW51cyhhcnJvd0luY3JlbWVudFZhbHVlKS50b0ZpeGVkKCkpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIG90aGVyd2lzZSBmbG9vciB0byB0aGUgc3RlcAogICAgICAgIGNvbnN0IHN0ZXBGbG9vcmVkVmFsdWUgPSBiYXNlLm1pbnVzKGJhc2UubW9kKGFycm93SW5jcmVtZW50VmFsdWUpKTsKICAgICAgICBzZXRWYWx1ZShzdGVwRmxvb3JlZFZhbHVlLnRvRml4ZWQoKSk7CiAgICAgIH0KICAgIH07CiAgICBjb25zdCBvbktleURvd24gPSBlID0+IHsKICAgICAgLy8gZGVsZXRlIHRoZSBOYU4gc3RhdGUgYWxsIGF0IG9uY2Ugb24gYmFja3NwYWNlIG9yIGRlbGV0ZQogICAgICBpZiAodmFsdWUgPT09ICdOYU4nICYmIChlLmNvZGUgPT09ICdCYWNrc3BhY2UnIHx8IGUuY29kZSA9PT0gJ0RlbGV0ZScpKSB7CiAgICAgICAgc2V0VmFsdWUobnVsbCk7CiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAoZS5jb2RlID09PSAnQXJyb3dVcCcpIHsKICAgICAgICBpbmNyZW1lbnQoKTsKICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmIChlLmNvZGUgPT09ICdBcnJvd0Rvd24nKSB7CiAgICAgICAgZGVjcmVtZW50KCk7CiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgfTsKCiAgICAvLyBpbnRlcmNlcHQga2V5IHByZXNzZXMgd2hpY2ggd291bGQgbGVhZCB0byBhbiBpbnZhbGlkIG51bWJlcgogICAgY29uc3Qgb25LZXlQcmVzcyA9IGUgPT4gewogICAgICBjb25zdCBjYXJldEluZGV4ID0gaW5wdXRSZWYuY3VycmVudC5zZWxlY3Rpb25TdGFydDsKICAgICAgY29uc3Qgc2VsZWN0aW9uV2lkdGggPSBpbnB1dFJlZi5jdXJyZW50LnNlbGVjdGlvblN0YXJ0IC0gaW5wdXRSZWYuY3VycmVudC5zZWxlY3Rpb25FbmQ7CiAgICAgIGNvbnN0IHByZXZpb3VzVmFsdWUgPSBpbnB1dFJlZi5jdXJyZW50LnZhbHVlOwogICAgICBpZiAoIXdpbGxLZXlQcm9kdWNlVmFsaWROdW1iZXIoZS5rZXksIHByZXZpb3VzVmFsdWUsIGNhcmV0SW5kZXgsIHNlbGVjdGlvbldpZHRoLCBkZWNpbWFsRGlnaXRzKSkgewogICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgfQogICAgfTsKICAgIGNvbnN0IHsKICAgICAgZm9ybUlkCiAgICB9ID0gRiQxKEZvcm1Db250ZXh0KTsKICAgIHJldHVybiBlJDIoImRpdiIsIHsKICAgICAgY2xhc3M6IGZvcm1GaWVsZENsYXNzZXModHlwZSQ2LCB7CiAgICAgICAgZXJyb3JzLAogICAgICAgIGRpc2FibGVkCiAgICAgIH0pLAogICAgICBjaGlsZHJlbjogW2UkMihMYWJlbCwgewogICAgICAgIGlkOiBwcmVmaXhJZChpZCwgZm9ybUlkKSwKICAgICAgICBsYWJlbDogbGFiZWwsCiAgICAgICAgcmVxdWlyZWQ6IHJlcXVpcmVkCiAgICAgIH0pLCBlJDIoSW5wdXRBZG9ybmVyLCB7CiAgICAgICAgZGlzYWJsZWQ6IGRpc2FibGVkLAogICAgICAgIHByZTogcHJlZml4QWRvcm5lciwKICAgICAgICBwb3N0OiBzdWZmaXhBZG9ybmVyLAogICAgICAgIGNoaWxkcmVuOiBlJDIoImRpdiIsIHsKICAgICAgICAgIGNsYXNzOiBjbGFzc05hbWVzKCdmanMtdmVydGljYWwtZ3JvdXAnLCB7CiAgICAgICAgICAgICdkaXNhYmxlZCc6IGRpc2FibGVkCiAgICAgICAgICB9LCB7CiAgICAgICAgICAgICdoYXNFcnJvcnMnOiBlcnJvcnMubGVuZ3RoCiAgICAgICAgICB9KSwKICAgICAgICAgIGNoaWxkcmVuOiBbZSQyKCJpbnB1dCIsIHsKICAgICAgICAgICAgcmVmOiBpbnB1dFJlZiwKICAgICAgICAgICAgY2xhc3M6ICJmanMtaW5wdXQiLAogICAgICAgICAgICBkaXNhYmxlZDogZGlzYWJsZWQsCiAgICAgICAgICAgIGlkOiBwcmVmaXhJZChpZCwgZm9ybUlkKSwKICAgICAgICAgICAgb25LZXlEb3duOiBvbktleURvd24sCiAgICAgICAgICAgIG9uS2V5UHJlc3M6IG9uS2V5UHJlc3MKCiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmUKICAgICAgICAgICAgLAogICAgICAgICAgICBvbklucHV0OiBlID0+IHNldFZhbHVlKGUudGFyZ2V0LnZhbHVlKSwKICAgICAgICAgICAgdHlwZTogInRleHQiLAogICAgICAgICAgICBhdXRvQ29tcGxldGU6ICJvZmYiLAogICAgICAgICAgICBzdGVwOiBhcnJvd0luY3JlbWVudFZhbHVlLAogICAgICAgICAgICB2YWx1ZTogZGlzcGxheVZhbHVlCiAgICAgICAgICB9KSwgZSQyKCJkaXYiLCB7CiAgICAgICAgICAgIGNsYXNzOiBjbGFzc05hbWVzKCdmanMtbnVtYmVyLWFycm93LWNvbnRhaW5lcicsIHsKICAgICAgICAgICAgICAnZGlzYWJsZWQnOiBkaXNhYmxlZAogICAgICAgICAgICB9KSwKICAgICAgICAgICAgY2hpbGRyZW46IFtlJDIoImJ1dHRvbiIsIHsKICAgICAgICAgICAgICBjbGFzczogImZqcy1udW1iZXItYXJyb3ctdXAiLAogICAgICAgICAgICAgIG9uQ2xpY2s6ICgpID0+IGluY3JlbWVudCgpLAogICAgICAgICAgICAgIHRhYkluZGV4OiAtMSwKICAgICAgICAgICAgICBjaGlsZHJlbjogIlx1MDJDNCIKICAgICAgICAgICAgfSksIGUkMigiZGl2IiwgewogICAgICAgICAgICAgIGNsYXNzOiAiZmpzLW51bWJlci1hcnJvdy1zZXBhcmF0b3IiCiAgICAgICAgICAgIH0pLCBlJDIoImJ1dHRvbiIsIHsKICAgICAgICAgICAgICBjbGFzczogImZqcy1udW1iZXItYXJyb3ctZG93biIsCiAgICAgICAgICAgICAgb25DbGljazogKCkgPT4gZGVjcmVtZW50KCksCiAgICAgICAgICAgICAgdGFiSW5kZXg6IC0xLAogICAgICAgICAgICAgIGNoaWxkcmVuOiAiXHUwMkM1IgogICAgICAgICAgICB9KV0KICAgICAgICAgIH0pXQogICAgICAgIH0pCiAgICAgIH0pLCBlJDIoRGVzY3JpcHRpb24sIHsKICAgICAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24KICAgICAgfSksIGUkMihFcnJvcnMsIHsKICAgICAgICBlcnJvcnM6IGVycm9ycwogICAgICB9KV0KICAgIH0pOwogIH0KICBOdW1iZXJmaWVsZC5jcmVhdGUgPSAob3B0aW9ucyA9IHt9KSA9PiBvcHRpb25zOwogIE51bWJlcmZpZWxkLnNhbml0aXplVmFsdWUgPSAoewogICAgdmFsdWUsCiAgICBmb3JtRmllbGQKICB9KSA9PiB7CiAgICAvLyBudWxsIHN0YXRlIGlzIGFsbG93ZWQKICAgIGlmIChpc051bGxFcXVpdmFsZW50VmFsdWUodmFsdWUpKSByZXR1cm4gbnVsbDsKCiAgICAvLyBpZiBkYXRhIGNhbm5vdCBiZSBwYXJzZWQgYXMgYSB2YWxpZCBudW1iZXIsIGdvIGludG8gaW52YWxpZCBOYU4gc3RhdGUKICAgIGlmICghaXNWYWxpZE51bWJlcih2YWx1ZSkpIHJldHVybiAnTmFOJzsKCiAgICAvLyBvdGhlcndpc2UgcGFyc2UgdG8gZm9ybWF0dGluZyB0eXBlCiAgICByZXR1cm4gZm9ybUZpZWxkLnNlcmlhbGl6ZVRvU3RyaW5nID8gdmFsdWUudG9TdHJpbmcoKSA6IE51bWJlcih2YWx1ZSk7CiAgfTsKICBOdW1iZXJmaWVsZC50eXBlID0gdHlwZSQ2OwogIE51bWJlcmZpZWxkLmtleWVkID0gdHJ1ZTsKICBOdW1iZXJmaWVsZC5sYWJlbCA9ICdOdW1iZXInOwogIE51bWJlcmZpZWxkLmVtcHR5VmFsdWUgPSBudWxsOwoKICBjb25zdCB0eXBlJDUgPSAncmFkaW8nOwogIGZ1bmN0aW9uIFJhZGlvKHByb3BzKSB7CiAgICBjb25zdCB7CiAgICAgIGRpc2FibGVkLAogICAgICBlcnJvcnMgPSBbXSwKICAgICAgZmllbGQsCiAgICAgIHZhbHVlCiAgICB9ID0gcHJvcHM7CiAgICBjb25zdCB7CiAgICAgIGRlc2NyaXB0aW9uLAogICAgICBpZCwKICAgICAgbGFiZWwsCiAgICAgIHZhbGlkYXRlID0ge30KICAgIH0gPSBmaWVsZDsKICAgIGNvbnN0IHsKICAgICAgcmVxdWlyZWQKICAgIH0gPSB2YWxpZGF0ZTsKICAgIGNvbnN0IG9uQ2hhbmdlID0gdiA9PiB7CiAgICAgIHByb3BzLm9uQ2hhbmdlKHsKICAgICAgICBmaWVsZCwKICAgICAgICB2YWx1ZTogdgogICAgICB9KTsKICAgIH07CiAgICBjb25zdCB7CiAgICAgIHN0YXRlOiBsb2FkU3RhdGUsCiAgICAgIHZhbHVlczogb3B0aW9ucwogICAgfSA9IHVzZVZhbHVlc0FzeW5jKGZpZWxkKTsKICAgIGNvbnN0IHsKICAgICAgZm9ybUlkCiAgICB9ID0gRiQxKEZvcm1Db250ZXh0KTsKICAgIHJldHVybiBlJDIoImRpdiIsIHsKICAgICAgY2xhc3M6IGZvcm1GaWVsZENsYXNzZXModHlwZSQ1LCB7CiAgICAgICAgZXJyb3JzLAogICAgICAgIGRpc2FibGVkCiAgICAgIH0pLAogICAgICBjaGlsZHJlbjogW2UkMihMYWJlbCwgewogICAgICAgIGxhYmVsOiBsYWJlbCwKICAgICAgICByZXF1aXJlZDogcmVxdWlyZWQKICAgICAgfSksIGxvYWRTdGF0ZSA9PSBMT0FEX1NUQVRFUy5MT0FERUQgJiYgb3B0aW9ucy5tYXAoKG9wdGlvbiwgaW5kZXgpID0+IHsKICAgICAgICByZXR1cm4gZSQyKExhYmVsLCB7CiAgICAgICAgICBpZDogcHJlZml4SWQoYCR7aWR9LSR7aW5kZXh9YCwgZm9ybUlkKSwKICAgICAgICAgIGxhYmVsOiBvcHRpb24ubGFiZWwsCiAgICAgICAgICBjbGFzczogY2xhc3NOYW1lcyh7CiAgICAgICAgICAgICdmanMtY2hlY2tlZCc6IG9wdGlvbi52YWx1ZSA9PT0gdmFsdWUKICAgICAgICAgIH0pLAogICAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICAgICAgY2hpbGRyZW46IGUkMigiaW5wdXQiLCB7CiAgICAgICAgICAgIGNoZWNrZWQ6IG9wdGlvbi52YWx1ZSA9PT0gdmFsdWUsCiAgICAgICAgICAgIGNsYXNzOiAiZmpzLWlucHV0IiwKICAgICAgICAgICAgZGlzYWJsZWQ6IGRpc2FibGVkLAogICAgICAgICAgICBpZDogcHJlZml4SWQoYCR7aWR9LSR7aW5kZXh9YCwgZm9ybUlkKSwKICAgICAgICAgICAgdHlwZTogInJhZGlvIiwKICAgICAgICAgICAgb25DbGljazogKCkgPT4gb25DaGFuZ2Uob3B0aW9uLnZhbHVlKQogICAgICAgICAgfSkKICAgICAgICB9LCBgJHtpZH0tJHtpbmRleH1gKTsKICAgICAgfSksIGUkMihEZXNjcmlwdGlvbiwgewogICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbgogICAgICB9KSwgZSQyKEVycm9ycywgewogICAgICAgIGVycm9yczogZXJyb3JzCiAgICAgIH0pXQogICAgfSk7CiAgfQogIFJhZGlvLmNyZWF0ZSA9IGZ1bmN0aW9uIChvcHRpb25zID0ge30pIHsKICAgIGlmIChvcHRpb25zLnZhbHVlc0tleSkgcmV0dXJuIG9wdGlvbnM7CiAgICByZXR1cm4gewogICAgICB2YWx1ZXM6IFt7CiAgICAgICAgbGFiZWw6ICdWYWx1ZScsCiAgICAgICAgdmFsdWU6ICd2YWx1ZScKICAgICAgfV0sCiAgICAgIC4uLm9wdGlvbnMKICAgIH07CiAgfTsKICBSYWRpby50eXBlID0gdHlwZSQ1OwogIFJhZGlvLmxhYmVsID0gJ1JhZGlvJzsKICBSYWRpby5rZXllZCA9IHRydWU7CiAgUmFkaW8uZW1wdHlWYWx1ZSA9IG51bGw7CiAgUmFkaW8uc2FuaXRpemVWYWx1ZSA9IHNhbml0aXplU2luZ2xlU2VsZWN0VmFsdWU7CgogIGNvbnN0IHR5cGUkNCA9ICdzZWxlY3QnOwogIGZ1bmN0aW9uIFNlbGVjdChwcm9wcykgewogICAgY29uc3QgewogICAgICBkaXNhYmxlZCwKICAgICAgZXJyb3JzID0gW10sCiAgICAgIGZpZWxkLAogICAgICB2YWx1ZQogICAgfSA9IHByb3BzOwogICAgY29uc3QgewogICAgICBkZXNjcmlwdGlvbiwKICAgICAgaWQsCiAgICAgIGxhYmVsLAogICAgICB2YWxpZGF0ZSA9IHt9CiAgICB9ID0gZmllbGQ7CiAgICBjb25zdCB7CiAgICAgIHJlcXVpcmVkCiAgICB9ID0gdmFsaWRhdGU7CiAgICBjb25zdCBvbkNoYW5nZSA9ICh7CiAgICAgIHRhcmdldAogICAgfSkgPT4gewogICAgICBwcm9wcy5vbkNoYW5nZSh7CiAgICAgICAgZmllbGQsCiAgICAgICAgdmFsdWU6IHRhcmdldC52YWx1ZSA9PT0gJycgPyBudWxsIDogdGFyZ2V0LnZhbHVlCiAgICAgIH0pOwogICAgfTsKICAgIGNvbnN0IHsKICAgICAgc3RhdGU6IGxvYWRTdGF0ZSwKICAgICAgdmFsdWVzOiBvcHRpb25zCiAgICB9ID0gdXNlVmFsdWVzQXN5bmMoZmllbGQpOwogICAgY29uc3QgewogICAgICBmb3JtSWQKICAgIH0gPSBGJDEoRm9ybUNvbnRleHQpOwogICAgcmV0dXJuIGUkMigiZGl2IiwgewogICAgICBjbGFzczogZm9ybUZpZWxkQ2xhc3Nlcyh0eXBlJDQsIHsKICAgICAgICBlcnJvcnMsCiAgICAgICAgZGlzYWJsZWQKICAgICAgfSksCiAgICAgIGNoaWxkcmVuOiBbZSQyKExhYmVsLCB7CiAgICAgICAgaWQ6IHByZWZpeElkKGlkLCBmb3JtSWQpLAogICAgICAgIGxhYmVsOiBsYWJlbCwKICAgICAgICByZXF1aXJlZDogcmVxdWlyZWQKICAgICAgfSksIGUkMigic2VsZWN0IiwgewogICAgICAgIGNsYXNzOiAiZmpzLXNlbGVjdCIsCiAgICAgICAgZGlzYWJsZWQ6IGRpc2FibGVkLAogICAgICAgIGlkOiBwcmVmaXhJZChpZCwgZm9ybUlkKSwKICAgICAgICBvbkNoYW5nZTogb25DaGFuZ2UsCiAgICAgICAgdmFsdWU6IHZhbHVlIHx8ICcnLAogICAgICAgIGNoaWxkcmVuOiBbZSQyKCJvcHRpb24iLCB7CiAgICAgICAgICB2YWx1ZTogIiIKICAgICAgICB9KSwgbG9hZFN0YXRlID09IExPQURfU1RBVEVTLkxPQURFRCAmJiBvcHRpb25zLm1hcCgob3B0aW9uLCBpbmRleCkgPT4gewogICAgICAgICAgcmV0dXJuIGUkMigib3B0aW9uIiwgewogICAgICAgICAgICB2YWx1ZTogb3B0aW9uLnZhbHVlLAogICAgICAgICAgICBjaGlsZHJlbjogb3B0aW9uLmxhYmVsCiAgICAgICAgICB9LCBgJHtpZH0tJHtpbmRleH1gKTsKICAgICAgICB9KV0KICAgICAgfSksIGUkMihEZXNjcmlwdGlvbiwgewogICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbgogICAgICB9KSwgZSQyKEVycm9ycywgewogICAgICAgIGVycm9yczogZXJyb3JzCiAgICAgIH0pXQogICAgfSk7CiAgfQogIFNlbGVjdC5jcmVhdGUgPSBmdW5jdGlvbiAob3B0aW9ucyA9IHt9KSB7CiAgICBpZiAob3B0aW9ucy52YWx1ZXNLZXkpIHJldHVybiBvcHRpb25zOwogICAgcmV0dXJuIHsKICAgICAgdmFsdWVzOiBbewogICAgICAgIGxhYmVsOiAnVmFsdWUnLAogICAgICAgIHZhbHVlOiAndmFsdWUnCiAgICAgIH1dLAogICAgICAuLi5vcHRpb25zCiAgICB9OwogIH07CiAgU2VsZWN0LnR5cGUgPSB0eXBlJDQ7CiAgU2VsZWN0LmxhYmVsID0gJ1NlbGVjdCc7CiAgU2VsZWN0LmtleWVkID0gdHJ1ZTsKICBTZWxlY3QuZW1wdHlWYWx1ZSA9IG51bGw7CiAgU2VsZWN0LnNhbml0aXplVmFsdWUgPSBzYW5pdGl6ZVNpbmdsZVNlbGVjdFZhbHVlOwoKICBmdW5jdGlvbiBfZXh0ZW5kcyRlKCkgeyBfZXh0ZW5kcyRlID0gT2JqZWN0LmFzc2lnbiA/IE9iamVjdC5hc3NpZ24uYmluZCgpIDogZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07IHJldHVybiBfZXh0ZW5kcyRlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH0KICB2YXIgQ2xvc2VJY29uID0gKCh7CiAgICBzdHlsZXMgPSB7fSwKICAgIC4uLnByb3BzCiAgfSkgPT4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInN2ZyIsIF9leHRlbmRzJGUoewogICAgd2lkdGg6ICIxNiIsCiAgICBoZWlnaHQ6ICIxNiIsCiAgICBmaWxsOiAibm9uZSIsCiAgICB4bWxuczogImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIH0sIHByb3BzKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInBhdGgiLCB7CiAgICBmaWxsUnVsZTogImV2ZW5vZGQiLAogICAgY2xpcFJ1bGU6ICJldmVub2RkIiwKICAgIGQ6ICJNMTIgNC43bC0uNy0uN0w4IDcuMyA0LjcgNGwtLjcuN0w3LjMgOCA0IDExLjNsLjcuN0w4IDguN2wzLjMgMy4zLjctLjdMOC43IDggMTIgNC43eiIsCiAgICBmaWxsOiAiY3VycmVudENvbG9yIgogIH0pKSk7CgogIGNvbnN0IHR5cGUkMyA9ICd0YWdsaXN0JzsKICBmdW5jdGlvbiBUYWdsaXN0KHByb3BzKSB7CiAgICBjb25zdCB7CiAgICAgIGRpc2FibGVkLAogICAgICBlcnJvcnMgPSBbXSwKICAgICAgZmllbGQsCiAgICAgIHZhbHVlOiB2YWx1ZXMgPSBbXQogICAgfSA9IHByb3BzOwogICAgY29uc3QgewogICAgICBkZXNjcmlwdGlvbiwKICAgICAgaWQsCiAgICAgIGxhYmVsCiAgICB9ID0gZmllbGQ7CiAgICBjb25zdCB7CiAgICAgIGZvcm1JZAogICAgfSA9IEYkMShGb3JtQ29udGV4dCk7CiAgICBjb25zdCBbZmlsdGVyLCBzZXRGaWx0ZXJdID0gbCQxKCcnKTsKICAgIGNvbnN0IFtmaWx0ZXJlZE9wdGlvbnMsIHNldEZpbHRlcmVkT3B0aW9uc10gPSBsJDEoW10pOwogICAgY29uc3QgW2lzRHJvcGRvd25FeHBhbmRlZCwgc2V0SXNEcm9wZG93bkV4cGFuZGVkXSA9IGwkMShmYWxzZSk7CiAgICBjb25zdCBbaGFzT3B0aW9uc0xlZnQsIHNldEhhc09wdGlvbnNMZWZ0XSA9IGwkMSh0cnVlKTsKICAgIGNvbnN0IFtpc0VzY2FwZUNsb3NlZCwgc2V0SXNFc2NhcGVDbG9zZV0gPSBsJDEoZmFsc2UpOwogICAgY29uc3Qgc2VhcmNoYmFyUmVmID0gcygpOwogICAgY29uc3QgewogICAgICBzdGF0ZTogbG9hZFN0YXRlLAogICAgICB2YWx1ZXM6IG9wdGlvbnMKICAgIH0gPSB1c2VWYWx1ZXNBc3luYyhmaWVsZCk7CgogICAgLy8gV2UgY2FjaGUgYSBtYXAgb2Ygb3B0aW9uIHZhbHVlcyB0byB0aGVpciBpbmRleCBzbyB0aGF0IHdlIGRvbid0IG5lZWQgdG8gc2VhcmNoIHRoZSB3aG9sZSBvcHRpb25zIGFycmF5IGV2ZXJ5IHRpbWUgdG8gY29ycmVsYXRlIHRoZSBsYWJlbAogICAgY29uc3QgdmFsdWVUb09wdGlvbk1hcCA9IGQoKCkgPT4gT2JqZWN0LmFzc2lnbih7fSwgLi4ub3B0aW9ucy5tYXAoKG8sIHgpID0+ICh7CiAgICAgIFtvLnZhbHVlXTogb3B0aW9uc1t4XQogICAgfSkpKSwgW29wdGlvbnNdKTsKCiAgICAvLyBVc2FnZSBvZiBzdHJpbmdpZnkgaXMgbmVjZXNzYXJ5IGhlcmUgYmVjYXVzZSB3ZSB3YW50IHRoaXMgZWZmZWN0IHRvIG9ubHkgdHJpZ2dlciB3aGVuIHRoZXJlIGlzIGEgdmFsdWUgY2hhbmdlIHRvIHRoZSBhcnJheQogICAgeSgoKSA9PiB7CiAgICAgIGlmIChsb2FkU3RhdGUgPT09IExPQURfU1RBVEVTLkxPQURFRCkgewogICAgICAgIHNldEZpbHRlcmVkT3B0aW9ucyhvcHRpb25zLmZpbHRlcihvID0+IG8ubGFiZWwgJiYgby52YWx1ZSAmJiBvLmxhYmVsLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoZmlsdGVyLnRvTG93ZXJDYXNlKCkpICYmICF2YWx1ZXMuaW5jbHVkZXMoby52YWx1ZSkpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBzZXRGaWx0ZXJlZE9wdGlvbnMoW10pOwogICAgICB9CiAgICB9LCBbZmlsdGVyLCBKU09OLnN0cmluZ2lmeSh2YWx1ZXMpLCBvcHRpb25zLCBsb2FkU3RhdGVdKTsKICAgIHkoKCkgPT4gewogICAgICBzZXRIYXNPcHRpb25zTGVmdChvcHRpb25zLmxlbmd0aCA+IHZhbHVlcy5sZW5ndGgpOwogICAgfSwgW29wdGlvbnMubGVuZ3RoLCB2YWx1ZXMubGVuZ3RoXSk7CiAgICBjb25zdCBvbkZpbHRlckNoYW5nZSA9ICh7CiAgICAgIHRhcmdldAogICAgfSkgPT4gewogICAgICBzZXRJc0VzY2FwZUNsb3NlKGZhbHNlKTsKICAgICAgc2V0RmlsdGVyKHRhcmdldC52YWx1ZSk7CiAgICB9OwogICAgY29uc3Qgc2VsZWN0VmFsdWUgPSB2YWx1ZSA9PiB7CiAgICAgIGlmIChmaWx0ZXIpIHsKICAgICAgICBzZXRGaWx0ZXIoJycpOwogICAgICB9CgogICAgICAvLyBFbnN1cmUgdmFsdWVzIGNhbm5vdCBiZSBkb3VibGUgc2VsZWN0ZWQgZHVlIHRvIGxhdGVuY3kKICAgICAgaWYgKHZhbHVlcy5hdCgtMSkgPT09IHZhbHVlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHByb3BzLm9uQ2hhbmdlKHsKICAgICAgICB2YWx1ZTogWy4uLnZhbHVlcywgdmFsdWVdLAogICAgICAgIGZpZWxkCiAgICAgIH0pOwogICAgfTsKICAgIGNvbnN0IGRlc2VsZWN0VmFsdWUgPSB2YWx1ZSA9PiB7CiAgICAgIHByb3BzLm9uQ2hhbmdlKHsKICAgICAgICB2YWx1ZTogdmFsdWVzLmZpbHRlcih2ID0+IHYgIT0gdmFsdWUpLAogICAgICAgIGZpZWxkCiAgICAgIH0pOwogICAgfTsKICAgIGNvbnN0IG9uSW5wdXRLZXlEb3duID0gZSA9PiB7CiAgICAgIHN3aXRjaCAoZS5rZXkpIHsKICAgICAgICBjYXNlICdBcnJvd1VwJzoKICAgICAgICBjYXNlICdBcnJvd0Rvd24nOgogICAgICAgICAgLy8gV2UgZG8gbm90IHdhbnQgdGhlIGN1cnNvciB0byBzZWVrIGluIHRoZSBzZWFyY2ggZmllbGQgd2hlbiB3ZSBwcmVzcyB1cCBhbmQgZG93bgogICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnQmFja3NwYWNlJzoKICAgICAgICAgIGlmICghZmlsdGVyICYmIHZhbHVlcy5sZW5ndGgpIHsKICAgICAgICAgICAgZGVzZWxlY3RWYWx1ZSh2YWx1ZXNbdmFsdWVzLmxlbmd0aCAtIDFdKTsKICAgICAgICAgIH0KICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ0VzY2FwZSc6CiAgICAgICAgICBzZXRJc0VzY2FwZUNsb3NlKHRydWUpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnRW50ZXInOgogICAgICAgICAgaWYgKGlzRXNjYXBlQ2xvc2VkKSB7CiAgICAgICAgICAgIHNldElzRXNjYXBlQ2xvc2UoZmFsc2UpOwogICAgICAgICAgfQogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH07CiAgICBjb25zdCBvblRhZ1JlbW92ZUNsaWNrID0gKGV2ZW50LCB2YWx1ZSkgPT4gewogICAgICBjb25zdCB7CiAgICAgICAgdGFyZ2V0CiAgICAgIH0gPSBldmVudDsKICAgICAgZGVzZWxlY3RWYWx1ZSh2YWx1ZSk7CgogICAgICAvLyByZXN0b3JlIGZvY3VzIGlmIHRoZXJlIGlzIG5vIG5leHQgc2libGluZyB0byBmb2N1cwogICAgICBjb25zdCBuZXh0VGFnID0gdGFyZ2V0LmNsb3Nlc3QoJy5manMtdGFnbGlzdC10YWcnKS5uZXh0U2libGluZzsKICAgICAgaWYgKCFuZXh0VGFnKSB7CiAgICAgICAgc2VhcmNoYmFyUmVmLmN1cnJlbnQuZm9jdXMoKTsKICAgICAgfQogICAgfTsKICAgIHJldHVybiBlJDIoImRpdiIsIHsKICAgICAgY2xhc3M6IGZvcm1GaWVsZENsYXNzZXModHlwZSQzLCB7CiAgICAgICAgZXJyb3JzLAogICAgICAgIGRpc2FibGVkCiAgICAgIH0pLAogICAgICBjaGlsZHJlbjogW2UkMihMYWJlbCwgewogICAgICAgIGxhYmVsOiBsYWJlbCwKICAgICAgICBpZDogcHJlZml4SWQoYCR7aWR9LXNlYXJjaGAsIGZvcm1JZCkKICAgICAgfSksIGUkMigiZGl2IiwgewogICAgICAgIGNsYXNzOiBjbGFzc05hbWVzKCdmanMtdGFnbGlzdCcsIHsKICAgICAgICAgICdkaXNhYmxlZCc6IGRpc2FibGVkCiAgICAgICAgfSksCiAgICAgICAgY2hpbGRyZW46IFshZGlzYWJsZWQgJiYgbG9hZFN0YXRlID09PSBMT0FEX1NUQVRFUy5MT0FERUQgJiYgZSQyKCJkaXYiLCB7CiAgICAgICAgICBjbGFzczogImZqcy10YWdsaXN0LXRhZ3MiLAogICAgICAgICAgY2hpbGRyZW46IHZhbHVlcy5tYXAodiA9PiB7CiAgICAgICAgICAgIHJldHVybiBlJDIoImRpdiIsIHsKICAgICAgICAgICAgICBjbGFzczogImZqcy10YWdsaXN0LXRhZyIsCiAgICAgICAgICAgICAgb25Nb3VzZURvd246IGUgPT4gZS5wcmV2ZW50RGVmYXVsdCgpLAogICAgICAgICAgICAgIGNoaWxkcmVuOiBbZSQyKCJzcGFuIiwgewogICAgICAgICAgICAgICAgY2xhc3M6ICJmanMtdGFnbGlzdC10YWctbGFiZWwiLAogICAgICAgICAgICAgICAgY2hpbGRyZW46IHZhbHVlVG9PcHRpb25NYXBbdl0gPyB2YWx1ZVRvT3B0aW9uTWFwW3ZdLmxhYmVsIDogYHVuZXhwZWN0ZWQgdmFsdWV7JHt2fX1gCiAgICAgICAgICAgICAgfSksIGUkMigiYnV0dG9uIiwgewogICAgICAgICAgICAgICAgdHlwZTogImJ1dHRvbiIsCiAgICAgICAgICAgICAgICB0aXRsZTogIlJlbW92ZSB0YWciLAogICAgICAgICAgICAgICAgY2xhc3M6ICJmanMtdGFnbGlzdC10YWctcmVtb3ZlIiwKICAgICAgICAgICAgICAgIG9uQ2xpY2s6IGV2ZW50ID0+IG9uVGFnUmVtb3ZlQ2xpY2soZXZlbnQsIHYpLAogICAgICAgICAgICAgICAgY2hpbGRyZW46IGUkMihDbG9zZUljb24sIHt9KQogICAgICAgICAgICAgIH0pXQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pCiAgICAgICAgfSksIGUkMigiaW5wdXQiLCB7CiAgICAgICAgICBkaXNhYmxlZDogZGlzYWJsZWQsCiAgICAgICAgICBjbGFzczogImZqcy10YWdsaXN0LWlucHV0IiwKICAgICAgICAgIHJlZjogc2VhcmNoYmFyUmVmLAogICAgICAgICAgaWQ6IHByZWZpeElkKGAke2lkfS1zZWFyY2hgLCBmb3JtSWQpLAogICAgICAgICAgb25DaGFuZ2U6IG9uRmlsdGVyQ2hhbmdlLAogICAgICAgICAgdHlwZTogInRleHQiLAogICAgICAgICAgdmFsdWU6IGZpbHRlciwKICAgICAgICAgIHBsYWNlaG9sZGVyOiAnU2VhcmNoJywKICAgICAgICAgIGF1dG9Db21wbGV0ZTogIm9mZiIsCiAgICAgICAgICBvbktleURvd246IGUgPT4gb25JbnB1dEtleURvd24oZSksCiAgICAgICAgICBvbk1vdXNlRG93bjogKCkgPT4gc2V0SXNFc2NhcGVDbG9zZShmYWxzZSksCiAgICAgICAgICBvbkZvY3VzOiAoKSA9PiBzZXRJc0Ryb3Bkb3duRXhwYW5kZWQodHJ1ZSksCiAgICAgICAgICBvbkJsdXI6ICgpID0+IHsKICAgICAgICAgICAgc2V0SXNEcm9wZG93bkV4cGFuZGVkKGZhbHNlKTsKICAgICAgICAgICAgc2V0RmlsdGVyKCcnKTsKICAgICAgICAgIH0KICAgICAgICB9KV0KICAgICAgfSksIGUkMigiZGl2IiwgewogICAgICAgIGNsYXNzOiAiZmpzLXRhZ2xpc3QtYW5jaG9yIiwKICAgICAgICBjaGlsZHJlbjogIWRpc2FibGVkICYmIGxvYWRTdGF0ZSA9PT0gTE9BRF9TVEFURVMuTE9BREVEICYmIGlzRHJvcGRvd25FeHBhbmRlZCAmJiAhaXNFc2NhcGVDbG9zZWQgJiYgZSQyKERyb3Bkb3duTGlzdCwgewogICAgICAgICAgdmFsdWVzOiBmaWx0ZXJlZE9wdGlvbnMsCiAgICAgICAgICBnZXRMYWJlbDogbyA9PiBvLmxhYmVsLAogICAgICAgICAgb25WYWx1ZVNlbGVjdGVkOiBvID0+IHNlbGVjdFZhbHVlKG8udmFsdWUpLAogICAgICAgICAgZW1wdHlMaXN0TWVzc2FnZTogaGFzT3B0aW9uc0xlZnQgPyAnTm8gcmVzdWx0cycgOiAnQWxsIHZhbHVlcyBzZWxlY3RlZCcsCiAgICAgICAgICBsaXN0ZW5lckVsZW1lbnQ6IHNlYXJjaGJhclJlZi5jdXJyZW50CiAgICAgICAgfSkKICAgICAgfSksIGUkMihEZXNjcmlwdGlvbiwgewogICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbgogICAgICB9KSwgZSQyKEVycm9ycywgewogICAgICAgIGVycm9yczogZXJyb3JzCiAgICAgIH0pXQogICAgfSk7CiAgfQogIFRhZ2xpc3QuY3JlYXRlID0gZnVuY3Rpb24gKG9wdGlvbnMgPSB7fSkgewogICAgaWYgKG9wdGlvbnMudmFsdWVzS2V5KSByZXR1cm4gb3B0aW9uczsKICAgIHJldHVybiB7CiAgICAgIHZhbHVlczogW3sKICAgICAgICBsYWJlbDogJ1ZhbHVlJywKICAgICAgICB2YWx1ZTogJ3ZhbHVlJwogICAgICB9XSwKICAgICAgLi4ub3B0aW9ucwogICAgfTsKICB9OwogIFRhZ2xpc3QudHlwZSA9IHR5cGUkMzsKICBUYWdsaXN0LmxhYmVsID0gJ1RhZ2xpc3QnOwogIFRhZ2xpc3Qua2V5ZWQgPSB0cnVlOwogIFRhZ2xpc3QuZW1wdHlWYWx1ZSA9IFtdOwogIFRhZ2xpc3Quc2FuaXRpemVWYWx1ZSA9IHNhbml0aXplTXVsdGlTZWxlY3RWYWx1ZTsKCiAgZnVuY3Rpb24gX2V4dGVuZHMkZCgpIHsgX2V4dGVuZHMkZCA9IE9iamVjdC5hc3NpZ24gPyBPYmplY3QuYXNzaWduLmJpbmQoKSA6IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9OyByZXR1cm4gX2V4dGVuZHMkZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9CiAgdmFyIEJ1dHRvbkljb24gPSAoKHsKICAgIHN0eWxlcyA9IHt9LAogICAgLi4ucHJvcHMKICB9KSA9PiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgic3ZnIiwgX2V4dGVuZHMkZCh7CiAgICB4bWxuczogImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiwKICAgIHdpZHRoOiAiNTQiLAogICAgaGVpZ2h0OiAiNTQiCiAgfSwgcHJvcHMpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgicGF0aCIsIHsKICAgIGZpbGxSdWxlOiAiZXZlbm9kZCIsCiAgICBkOiAiTTQ1IDE3YTMgMyAwIDAxMyAzdjE0YTMgMyAwIDAxLTMgM0g5YTMgMyAwIDAxLTMtM1YyMGEzIDMgMCAwMTMtM2gzNnptLTkgOC44ODlIMTh2Mi4yMjJoMThWMjUuODl6IgogIH0pKSk7CgogIGZ1bmN0aW9uIF9leHRlbmRzJGMoKSB7IF9leHRlbmRzJGMgPSBPYmplY3QuYXNzaWduID8gT2JqZWN0LmFzc2lnbi5iaW5kKCkgOiBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTsgcmV0dXJuIF9leHRlbmRzJGMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfQogIHZhciBDaGVja2JveEljb24gPSAoKHsKICAgIHN0eWxlcyA9IHt9LAogICAgLi4ucHJvcHMKICB9KSA9PiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgic3ZnIiwgX2V4dGVuZHMkYyh7CiAgICB4bWxuczogImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiwKICAgIHdpZHRoOiAiNTQiLAogICAgaGVpZ2h0OiAiNTQiCiAgfSwgcHJvcHMpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgicGF0aCIsIHsKICAgIGQ6ICJNMzQgMThIMjBhMiAyIDAgMDAtMiAydjE0YTIgMiAwIDAwMiAyaDE0YTIgMiAwIDAwMi0yVjIwYTIgMiAwIDAwLTItMnptLTkgMTRsLTUtNSAxLjQxLTEuNDFMMjUgMjkuMTdsNy41OS03LjU5TDM0IDIzbC05IDl6IgogIH0pKSk7CgogIGZ1bmN0aW9uIF9leHRlbmRzJGIoKSB7IF9leHRlbmRzJGIgPSBPYmplY3QuYXNzaWduID8gT2JqZWN0LmFzc2lnbi5iaW5kKCkgOiBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTsgcmV0dXJuIF9leHRlbmRzJGIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfQogIHZhciBDaGVja2xpc3RJY29uID0gKCh7CiAgICBzdHlsZXMgPSB7fSwKICAgIC4uLnByb3BzCiAgfSkgPT4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInN2ZyIsIF9leHRlbmRzJGIoewogICAgd2lkdGg6ICI1NCIsCiAgICBoZWlnaHQ6ICI1NCIsCiAgICBmaWxsOiAibm9uZSIsCiAgICB4bWxuczogImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIH0sIHByb3BzKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInBhdGgiLCB7CiAgICBmaWxsUnVsZTogImV2ZW5vZGQiLAogICAgY2xpcFJ1bGU6ICJldmVub2RkIiwKICAgIGQ6ICJNMTkgMjRoLTZ2Nmg2di02em0tNi0yYTIgMiAwIDAwLTIgMnY2YTIgMiAwIDAwMiAyaDZhMiAyIDAgMDAyLTJ2LTZhMiAyIDAgMDAtMi0yaC02em02IDE4aC02djZoNnYtNnptLTYtMmEyIDIgMCAwMC0yIDJ2NmEyIDIgMCAwMDIgMmg2YTIgMiAwIDAwMi0ydi02YTIgMiAwIDAwLTItMmgtNnptNi0zMGgtNnY2aDZWOHptLTYtMmEyIDIgMCAwMC0yIDJ2NmEyIDIgMCAwMDIgMmg2YTIgMiAwIDAwMi0yVjhhMiAyIDAgMDAtMi0yaC02eiIsCiAgICBmaWxsOiAiIzIyMjQyQSIKICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInBhdGgiLCB7CiAgICBkOiAiTTI2IDI2YTEgMSAwIDAxMS0xaDE1YTEgMSAwIDAxMSAxdjJhMSAxIDAgMDEtMSAxSDI3YTEgMSAwIDAxLTEtMXYtMnptMCAxNmExIDEgMCAwMTEtMWgxNWExIDEgMCAwMTEgMXYyYTEgMSAwIDAxLTEgMUgyN2ExIDEgMCAwMS0xLTF2LTJ6bTAtMzJhMSAxIDAgMDExLTFoMTVhMSAxIDAgMDExIDF2MmExIDEgMCAwMS0xIDFIMjdhMSAxIDAgMDEtMS0xdi0yeiIsCiAgICBmaWxsOiAiIzIyMjQyQSIKICB9KSkpOwoKICBmdW5jdGlvbiBfZXh0ZW5kcyRhKCkgeyBfZXh0ZW5kcyRhID0gT2JqZWN0LmFzc2lnbiA/IE9iamVjdC5hc3NpZ24uYmluZCgpIDogZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07IHJldHVybiBfZXh0ZW5kcyRhLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH0KICB2YXIgRGF0ZXRpbWVJY29uID0gKCh7CiAgICBzdHlsZXMgPSB7fSwKICAgIC4uLnByb3BzCiAgfSkgPT4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInN2ZyIsIF9leHRlbmRzJGEoewogICAgeG1sbnM6ICJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsCiAgICB3aWR0aDogIjU0IiwKICAgIGhlaWdodDogIjU0IiwKICAgIGZpbGw6ICJub25lIgogIH0sIHByb3BzKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInBhdGgiLCB7CiAgICBmaWxsOiAiIzAwMCIsCiAgICBmaWxsUnVsZTogImV2ZW5vZGQiLAogICAgZDogIk0zNy45MDggMTMuNDE4aC01LjAwNHYtMi4zNTRoLTEuNzY2djIuMzU0SDIxLjEzdi0yLjM1NGgtMS43NjZ2Mi4zNTRIMTQuMzZjLTEuMTMyIDAtMi4wNi45MjgtMi4wNiAyLjA2djIzLjU0OWMwIDEuMTMyLjkyOCAyLjA2IDIuMDYgMi4wNmg2Ljc3di0xLjc2NmgtNi4zNThhLjcwNy43MDcgMCAwMS0uNzA2LS43MDZWMTUuODljMC0uMzkuMzE2LS43MDcuNzA2LS43MDdoNC41OTJ2Mi4zNTVoMS43NjZ2LTIuMzU1aDEwLjAwOHYyLjM1NWgxLjc2NnYtMi4zNTVoNC41OTJjLjM5IDAgLjcwNy4zMTcuNzA3LjcwN3Y2LjM1OGgxLjc2NXYtNi43N2MwLTEuMTMzLS45MjctMi4wNi0yLjA2LTIuMDZ6IiwKICAgIGNsaXBSdWxlOiAiZXZlbm9kZCIKICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInBhdGgiLCB7CiAgICBmaWxsOiAiIzAwMCIsCiAgICBkOiAiTTM1LjEzIDM3LjYwM2wxLjIzNy0xLjIzNy0zLjQ2OC0zLjQ3NXYtNS45MjZoLTEuNzU0djYuNjU0bDMuOTg0IDMuOTg0eiIKICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInBhdGgiLCB7CiAgICBmaWxsOiAiIzAwMCIsCiAgICBmaWxsUnVsZTogImV2ZW5vZGQiLAogICAgZDogIk0yMy4wOCAzNi45NjJhOS42NzggOS42NzggMCAxMDE3Ljg4My03LjQwOCA5LjY3OCA5LjY3OCAwIDAwLTE3Ljg4MiA3LjQwOHptNC41NC0xMC4yOTJhNy45MjQgNy45MjQgMCAxMTguODA1IDEzLjE3N0E3LjkyNCA3LjkyNCAwIDAxMjcuNjIgMjYuNjd6IiwKICAgIGNsaXBSdWxlOiAiZXZlbm9kZCIKICB9KSkpOwoKICBmdW5jdGlvbiBfZXh0ZW5kcyQ5KCkgeyBfZXh0ZW5kcyQ5ID0gT2JqZWN0LmFzc2lnbiA/IE9iamVjdC5hc3NpZ24uYmluZCgpIDogZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07IHJldHVybiBfZXh0ZW5kcyQ5LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH0KICB2YXIgVGFnbGlzdEljb24gPSAoKHsKICAgIHN0eWxlcyA9IHt9LAogICAgLi4ucHJvcHMKICB9KSA9PiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgic3ZnIiwgX2V4dGVuZHMkOSh7CiAgICB3aWR0aDogIjU0IiwKICAgIGhlaWdodDogIjU0IiwKICAgIGZpbGw6ICJub25lIiwKICAgIHhtbG5zOiAiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgfSwgcHJvcHMpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgicGF0aCIsIHsKICAgIGZpbGxSdWxlOiAiZXZlbm9kZCIsCiAgICBjbGlwUnVsZTogImV2ZW5vZGQiLAogICAgZDogIk00NSAxNmEzIDMgMCAwMTMgM3YxNmEzIDMgMCAwMS0zIDNIOWEzIDMgMCAwMS0zLTNWMTlhMyAzIDAgMDEzLTNoMzZ6bTAgMkg5YTEgMSAwIDAwLTEgMXYxNmExIDEgMCAwMDEgMWgzNmExIDEgMCAwMDEtMVYxOWExIDEgMCAwMC0xLTF6IiwKICAgIGZpbGw6ICIjMDAwIgogIH0pLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgicGF0aCIsIHsKICAgIGQ6ICJNMTEgMjJhMSAxIDAgMDExLTFoMTlhMSAxIDAgMDExIDF2MTBhMSAxIDAgMDEtMSAxSDEyYTEgMSAwIDAxLTEtMVYyMnoiLAogICAgZmlsbDogIiM1MDU1NjIiCiAgfSkpKTsKCiAgZnVuY3Rpb24gX2V4dGVuZHMkOCgpIHsgX2V4dGVuZHMkOCA9IE9iamVjdC5hc3NpZ24gPyBPYmplY3QuYXNzaWduLmJpbmQoKSA6IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9OyByZXR1cm4gX2V4dGVuZHMkOC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9CiAgdmFyIEZvcm1JY29uID0gKCh7CiAgICBzdHlsZXMgPSB7fSwKICAgIC4uLnByb3BzCiAgfSkgPT4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInN2ZyIsIF9leHRlbmRzJDgoewogICAgeG1sbnM6ICJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsCiAgICB3aWR0aDogIjU0IiwKICAgIGhlaWdodDogIjU0IgogIH0sIHByb3BzKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInJlY3QiLCB7CiAgICB4OiAiMTUiLAogICAgeTogIjE3IiwKICAgIHdpZHRoOiAiMjQiLAogICAgaGVpZ2h0OiAiNCIsCiAgICByeDogIjEiCiAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJyZWN0IiwgewogICAgeDogIjE1IiwKICAgIHk6ICIyNSIsCiAgICB3aWR0aDogIjI0IiwKICAgIGhlaWdodDogIjQiLAogICAgcng6ICIxIgogIH0pLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgicmVjdCIsIHsKICAgIHg6ICIxNSIsCiAgICB5OiAiMzMiLAogICAgd2lkdGg6ICIxMyIsCiAgICBoZWlnaHQ6ICI0IiwKICAgIHJ4OiAiMSIKICB9KSkpOwoKICBmdW5jdGlvbiBfZXh0ZW5kcyQ3KCkgeyBfZXh0ZW5kcyQ3ID0gT2JqZWN0LmFzc2lnbiA/IE9iamVjdC5hc3NpZ24uYmluZCgpIDogZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07IHJldHVybiBfZXh0ZW5kcyQ3LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH0KICB2YXIgQ29sdW1uc0ljb24gPSAoKHsKICAgIHN0eWxlcyA9IHt9LAogICAgLi4ucHJvcHMKICB9KSA9PiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgic3ZnIiwgX2V4dGVuZHMkNyh7CiAgICB4bWxuczogImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiwKICAgIHdpZHRoOiAiNTQiLAogICAgaGVpZ2h0OiAiNTQiCiAgfSwgcHJvcHMpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgicGF0aCIsIHsKICAgIGZpbGxSdWxlOiAiZXZlbm9kZCIsCiAgICBkOiAiTTggMzN2NWExIDEgMCAwMDEgMWg0djJIOWEzIDMgMCAwMS0zLTN2LTVoMnptMTggNnYySDE1di0yaDExem0xMyAwdjJIMjh2LTJoMTF6bTktNnY1YTMgMyAwIDAxLTMgM2gtNHYtMmg0YTEgMSAwIDAwLjk5My0uODgzTDQ2IDM4di01aDJ6TTggMjJ2OUg2di05aDJ6bTQwIDB2OWgtMnYtOWgyem0tMzUtOXYySDlhMSAxIDAgMDAtLjk5My44ODNMOCAxNnY0SDZ2LTRhMyAzIDAgMDEzLTNoNHptMzIgMGEzIDMgMCAwMTMgM3Y0aC0ydi00YTEgMSAwIDAwLS44ODMtLjk5M0w0NSAxNWgtNHYtMmg0em0tNiAwdjJIMjh2LTJoMTF6bS0xMyAwdjJIMTV2LTJoMTF6IgogIH0pKSk7CgogIGZ1bmN0aW9uIF9leHRlbmRzJDYoKSB7IF9leHRlbmRzJDYgPSBPYmplY3QuYXNzaWduID8gT2JqZWN0LmFzc2lnbi5iaW5kKCkgOiBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTsgcmV0dXJuIF9leHRlbmRzJDYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfQogIHZhciBOdW1iZXJJY29uID0gKCh7CiAgICBzdHlsZXMgPSB7fSwKICAgIC4uLnByb3BzCiAgfSkgPT4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInN2ZyIsIF9leHRlbmRzJDYoewogICAgeG1sbnM6ICJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsCiAgICB3aWR0aDogIjU0IiwKICAgIGhlaWdodDogIjU0IgogIH0sIHByb3BzKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInBhdGgiLCB7CiAgICBmaWxsUnVsZTogImV2ZW5vZGQiLAogICAgZDogIk00NSAxNmEzIDMgMCAwMTMgM3YxNmEzIDMgMCAwMS0zIDNIOWEzIDMgMCAwMS0zLTNWMTlhMyAzIDAgMDEzLTNoMzZ6bTAgMkg5YTEgMSAwIDAwLTEgMXYxNmExIDEgMCAwMDEgMWgzNmExIDEgMCAwMDEtMVYxOWExIDEgMCAwMC0xLTF6TTM1IDI4LjQ0NGg3bC0zLjUgNC0zLjUtNHpNMzUgMjZoN2wtMy41LTQtMy41IDR6IgogIH0pKSk7CgogIGZ1bmN0aW9uIF9leHRlbmRzJDUoKSB7IF9leHRlbmRzJDUgPSBPYmplY3QuYXNzaWduID8gT2JqZWN0LmFzc2lnbi5iaW5kKCkgOiBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTsgcmV0dXJuIF9leHRlbmRzJDUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfQogIHZhciBSYWRpb0ljb24gPSAoKHsKICAgIHN0eWxlcyA9IHt9LAogICAgLi4ucHJvcHMKICB9KSA9PiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgic3ZnIiwgX2V4dGVuZHMkNSh7CiAgICB4bWxuczogImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiwKICAgIHdpZHRoOiAiNTQiLAogICAgaGVpZ2h0OiAiNTQiCiAgfSwgcHJvcHMpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgicGF0aCIsIHsKICAgIGQ6ICJNMjcgMjJjLTIuNzYgMC01IDIuMjQtNSA1czIuMjQgNSA1IDUgNS0yLjI0IDUtNS0yLjI0LTUtNS01em0wLTVjLTUuNTIgMC0xMCA0LjQ4LTEwIDEwczQuNDggMTAgMTAgMTAgMTAtNC40OCAxMC0xMC00LjQ4LTEwLTEwLTEwem0wIDE4Yy00LjQyIDAtOC0zLjU4LTgtOHMzLjU4LTggOC04IDggMy41OCA4IDgtMy41OCA4LTggOHoiCiAgfSkpKTsKCiAgZnVuY3Rpb24gX2V4dGVuZHMkNCgpIHsgX2V4dGVuZHMkNCA9IE9iamVjdC5hc3NpZ24gPyBPYmplY3QuYXNzaWduLmJpbmQoKSA6IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9OyByZXR1cm4gX2V4dGVuZHMkNC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9CiAgdmFyIFNlbGVjdEljb24gPSAoKHsKICAgIHN0eWxlcyA9IHt9LAogICAgLi4ucHJvcHMKICB9KSA9PiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgic3ZnIiwgX2V4dGVuZHMkNCh7CiAgICB4bWxuczogImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiwKICAgIHdpZHRoOiAiNTQiLAogICAgaGVpZ2h0OiAiNTQiCiAgfSwgcHJvcHMpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgicGF0aCIsIHsKICAgIGZpbGxSdWxlOiAiZXZlbm9kZCIsCiAgICBkOiAiTTQ1IDE2YTMgMyAwIDAxMyAzdjE2YTMgMyAwIDAxLTMgM0g5YTMgMyAwIDAxLTMtM1YxOWEzIDMgMCAwMTMtM2gzNnptMCAySDlhMSAxIDAgMDAtMSAxdjE2YTEgMSAwIDAwMSAxaDM2YTEgMSAwIDAwMS0xVjE5YTEgMSAwIDAwLTEtMXptLTEyIDdoOWwtNC41IDYtNC41LTZ6IgogIH0pKSk7CgogIGZ1bmN0aW9uIF9leHRlbmRzJDMoKSB7IF9leHRlbmRzJDMgPSBPYmplY3QuYXNzaWduID8gT2JqZWN0LmFzc2lnbi5iaW5kKCkgOiBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTsgcmV0dXJuIF9leHRlbmRzJDMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfQogIHZhciBUZXh0SWNvbiA9ICgoewogICAgc3R5bGVzID0ge30sCiAgICAuLi5wcm9wcwogIH0pID0+IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJzdmciLCBfZXh0ZW5kcyQzKHsKICAgIHhtbG5zOiAiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLAogICAgd2lkdGg6ICI1NCIsCiAgICBoZWlnaHQ6ICI1NCIKICB9LCBwcm9wcyksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJwYXRoIiwgewogICAgZDogIk0yMC41OCAzMy43N2gtM2wtMS4xOC0zLjA4SDExbC0xLjEgMy4wOEg3bDUuMjctMTMuNTRoMi44OXptLTUtNS4zNmwtMS44Ni01LTEuODMgNXpNMjIgMjAuMjNoNS40MWExNS40NyAxNS40NyAwIDAxMi40LjE0IDMuNDIgMy40MiAwIDAxMS40MS41NSAzLjQ3IDMuNDcgMCAwMTEgMS4xNCAzIDMgMCAwMS40MiAxLjU4IDMuMjYgMy4yNiAwIDAxLTEuOTEgMi45NCAzLjYzIDMuNjMgMCAwMTEuOTEgMS4yMiAzLjI4IDMuMjggMCAwMS42NiAyIDQgNCAwIDAxLS40MyAxLjggMy42MyAzLjYzIDAgMDEtMS4wOSAxLjQgMy44OSAzLjg5IDAgMDEtMS44My42NXEtLjY5LjA3LTMuMy4wOUgyMnptMi43MyAyLjI1djMuMTNoMy44YTEuNzkgMS43OSAwIDAwMS4xLS40OSAxLjQxIDEuNDEgMCAwMC40MS0xIDEuNDkgMS40OSAwIDAwLS4zNS0xIDEuNTQgMS41NCAwIDAwLTEtLjQ4Yy0uMjcgMC0xLjA1LS4wNS0yLjM0LS4wNXptMCA1LjM5djMuNjJoMi41N2ExMS41MiAxMS41MiAwIDAwMS44OC0uMDkgMS42NSAxLjY1IDAgMDAxLS41NCAxLjYgMS42IDAgMDAuMzgtMS4xNCAxLjc1IDEuNzUgMCAwMC0uMjktMSAxLjY5IDEuNjkgMCAwMC0uODYtLjYyIDkuMjggOS4yOCAwIDAwLTIuNDEtLjIzek00NC4zNSAyOC43OWwyLjY1Ljg0YTUuOTQgNS45NCAwIDAxLTIgMy4yOUE1Ljc0IDUuNzQgMCAwMTQxLjM4IDM0YTUuODcgNS44NyAwIDAxLTQuNDQtMS44NCA3LjA5IDcuMDkgMCAwMS0xLjczLTVBNy40MyA3LjQzIDAgMDEzNyAyMS44NyA2IDYgMCAwMTQxLjU0IDIwYTUuNjQgNS42NCAwIDAxNCAxLjQ3QTUuMzMgNS4zMyAwIDAxNDcgMjRsLTIuNy42NWEyLjggMi44IDAgMDAtMi44Ni0yLjI3QTMuMDkgMy4wOSAwIDAwMzkgMjMuNDJhNS4zMSA1LjMxIDAgMDAtLjkzIDMuNSA1LjYyIDUuNjIgMCAwMC45MyAzLjY1IDMgMyAwIDAwMi40IDEuMDkgMi43MiAyLjcyIDAgMDAxLjgyLS42NiA0IDQgMCAwMDEuMTMtMi4yMXoiCiAgfSkpKTsKCiAgZnVuY3Rpb24gX2V4dGVuZHMkMigpIHsgX2V4dGVuZHMkMiA9IE9iamVjdC5hc3NpZ24gPyBPYmplY3QuYXNzaWduLmJpbmQoKSA6IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9OyByZXR1cm4gX2V4dGVuZHMkMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9CiAgdmFyIFRleHRmaWVsZEljb24gPSAoKHsKICAgIHN0eWxlcyA9IHt9LAogICAgLi4ucHJvcHMKICB9KSA9PiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgic3ZnIiwgX2V4dGVuZHMkMih7CiAgICB4bWxuczogImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiwKICAgIHdpZHRoOiAiNTQiLAogICAgaGVpZ2h0OiAiNTQiCiAgfSwgcHJvcHMpLCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgicGF0aCIsIHsKICAgIGZpbGxSdWxlOiAiZXZlbm9kZCIsCiAgICBkOiAiTTQ1IDE2YTMgMyAwIDAxMyAzdjE2YTMgMyAwIDAxLTMgM0g5YTMgMyAwIDAxLTMtM1YxOWEzIDMgMCAwMTMtM2gzNnptMCAySDlhMSAxIDAgMDAtMSAxdjE2YTEgMSAwIDAwMSAxaDM2YTEgMSAwIDAwMS0xVjE5YTEgMSAwIDAwLTEtMXptLTMyIDR2MTBoLTJWMjJoMnoiCiAgfSkpKTsKCiAgZnVuY3Rpb24gX2V4dGVuZHMkMSgpIHsgX2V4dGVuZHMkMSA9IE9iamVjdC5hc3NpZ24gPyBPYmplY3QuYXNzaWduLmJpbmQoKSA6IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9OyByZXR1cm4gX2V4dGVuZHMkMS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9CiAgdmFyIFRleHRhcmVhSWNvbiA9ICgoewogICAgc3R5bGVzID0ge30sCiAgICAuLi5wcm9wcwogIH0pID0+IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJzdmciLCBfZXh0ZW5kcyQxKHsKICAgIHhtbG5zOiAiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLAogICAgd2lkdGg6ICI1NCIsCiAgICBoZWlnaHQ6ICI1NCIKICB9LCBwcm9wcyksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJwYXRoIiwgewogICAgZmlsbFJ1bGU6ICJldmVub2RkIiwKICAgIGQ6ICJNNDUgMTNhMyAzIDAgMDEzIDN2MjJhMyAzIDAgMDEtMyAzSDlhMyAzIDAgMDEtMy0zVjE2YTMgMyAwIDAxMy0zaDM2em0wIDJIOWExIDEgMCAwMC0xIDF2MjJhMSAxIDAgMDAxIDFoMzZhMSAxIDAgMDAxLTFWMTZhMSAxIDAgMDAtMS0xem0tMS4xMzYgMTUuNWwuODQ4Ljg0OS02LjM2MyA2LjM2My0uODQ5LS44NDggNi4zNjQtNi4zNjR6bS4yNjQgMy41bC44NDkuODQ5LTIuODI4IDIuODI4LS44NDktLjg0OUw0NC4xMjggMzR6TTEzIDE5djEwaC0yVjE5aDJ6IgogIH0pKSk7CgogIGZ1bmN0aW9uIF9leHRlbmRzKCkgeyBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gPyBPYmplY3QuYXNzaWduLmJpbmQoKSA6IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9OyByZXR1cm4gX2V4dGVuZHMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfQogIHZhciBJbWFnZUljb24gPSAoKHsKICAgIHN0eWxlcyA9IHt9LAogICAgLi4ucHJvcHMKICB9KSA9PiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudCgic3ZnIiwgX2V4dGVuZHMoewogICAgd2lkdGg6ICI1NCIsCiAgICBoZWlnaHQ6ICI1NCIsCiAgICBmaWxsOiAibm9uZSIsCiAgICB4bWxuczogImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIH0sIHByb3BzKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoInBhdGgiLCB7CiAgICBmaWxsUnVsZTogImV2ZW5vZGQiLAogICAgY2xpcFJ1bGU6ICJldmVub2RkIiwKICAgIGQ6ICJNMzQuNjM2IDIxLjkxQTMuODE4IDMuODE4IDAgMTEyNyAyMS45MDhhMy44MTggMy44MTggMCAwMTcuNjM2IDB6bS0yIDBBMS44MTggMS44MTggMCAxMTI5IDIxLjkwOGExLjgxOCAxLjgxOCAwIDAxMy42MzYgMHoiLAogICAgZmlsbDogIiMwMDAiCiAgfSksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KCJwYXRoIiwgewogICAgZmlsbFJ1bGU6ICJldmVub2RkIiwKICAgIGNsaXBSdWxlOiAiZXZlbm9kZCIsCiAgICBkOiAiTTE1IDEzYTIgMiAwIDAwLTIgMnYyNGEyIDIgMCAwMDIgMmgyNGEyIDIgMCAwMDItMlYxNWEyIDIgMCAwMC0yLTJIMTV6bTI0IDJIMTV2MTIuNDVsNC43MS00LjcwOWExLjkxIDEuOTEgMCAwMTIuNzAyIDBsNi42OTUgNi42OTUgMi42NTYtMS43N2ExLjkxIDEuOTEgMCAwMTIuNDExLjIzOUwzOSAzMi43M1YxNXpNMTUgMzl2LTguNzU0Yy4wNi0uMDM4LjExNi0uMDgzLjE2OC0uMTM1bDUuODkzLTUuODkzIDYuNjg0IDYuNjg1YTEuOTExIDEuOTExIDAgMDAyLjQxLjIzOGwyLjY1Ny0xLjc3IDYuMDIgNi4wMmMuMDUyLjA1MS4xMDguMDk3LjE2OC4xMzVWMzlIMTV6IiwKICAgIGZpbGw6ICIjMDAwIgogIH0pKSk7CgogIGNvbnN0IGljb25zQnlUeXBlID0gewogICAgYnV0dG9uOiBCdXR0b25JY29uLAogICAgY2hlY2tib3g6IENoZWNrYm94SWNvbiwKICAgIGNoZWNrbGlzdDogQ2hlY2tsaXN0SWNvbiwKICAgIGNvbHVtbnM6IENvbHVtbnNJY29uLAogICAgZGF0ZXRpbWU6IERhdGV0aW1lSWNvbiwKICAgIGltYWdlOiBJbWFnZUljb24sCiAgICBudW1iZXI6IE51bWJlckljb24sCiAgICByYWRpbzogUmFkaW9JY29uLAogICAgc2VsZWN0OiBTZWxlY3RJY29uLAogICAgdGFnbGlzdDogVGFnbGlzdEljb24sCiAgICB0ZXh0OiBUZXh0SWNvbiwKICAgIHRleHRmaWVsZDogVGV4dGZpZWxkSWNvbiwKICAgIHRleHRhcmVhOiBUZXh0YXJlYUljb24sCiAgICBkZWZhdWx0OiBGb3JtSWNvbgogIH07CgogIGNvbnN0IHR5cGUkMiA9ICd0ZXh0JzsKICBmdW5jdGlvbiBUZXh0KHByb3BzKSB7CiAgICBjb25zdCB7CiAgICAgIGZpZWxkLAogICAgICBkaXNhYmxlZAogICAgfSA9IHByb3BzOwogICAgY29uc3QgewogICAgICB0ZXh0ID0gJycKICAgIH0gPSBmaWVsZDsKICAgIGNvbnN0IHRleHRWYWx1ZSA9IHVzZUV4cHJlc3Npb25WYWx1ZSh0ZXh0KSB8fCAnJzsKICAgIHJldHVybiBlJDIoImRpdiIsIHsKICAgICAgY2xhc3M6IGZvcm1GaWVsZENsYXNzZXModHlwZSQyKSwKICAgICAgY2hpbGRyZW46IHJlbmRlclRleHQoZmllbGQsIHRleHRWYWx1ZSwgZGlzYWJsZWQpCiAgICB9KTsKICB9CiAgVGV4dC5jcmVhdGUgPSBmdW5jdGlvbiAob3B0aW9ucyA9IHt9KSB7CiAgICByZXR1cm4gewogICAgICB0ZXh0OiAnIyBUZXh0JywKICAgICAgLi4ub3B0aW9ucwogICAgfTsKICB9OwogIFRleHQudHlwZSA9IHR5cGUkMjsKICBUZXh0LmtleWVkID0gZmFsc2U7CgogIC8vIGhlbHBlciAvLy8vLy8vLy8vLy8vLwoKICBmdW5jdGlvbiByZW5kZXJUZXh0KGZpZWxkLCBjb250ZW50LCBkaXNhYmxlZCkgewogICAgY29uc3QgewogICAgICB0ZXh0CiAgICB9ID0gZmllbGQ7CiAgICBjb25zdCBJY29uID0gaWNvbnNCeVR5cGVbJ3RleHQnXTsKICAgIGlmIChkaXNhYmxlZCkgewogICAgICBpZiAoIXRleHQpIHsKICAgICAgICByZXR1cm4gZSQyKCJkaXYiLCB7CiAgICAgICAgICBjbGFzczogImZqcy1mb3JtLWZpZWxkLXBsYWNlaG9sZGVyIiwKICAgICAgICAgIGNoaWxkcmVuOiBbZSQyKEljb24sIHsKICAgICAgICAgICAgdmlld0JveDogIjAgMCA1NCA1NCIKICAgICAgICAgIH0pLCAiVGV4dCB2aWV3IGlzIGVtcHR5Il0KICAgICAgICB9KTsKICAgICAgfQogICAgICBpZiAoaXNFeHByZXNzaW9uJDIodGV4dCkpIHsKICAgICAgICByZXR1cm4gZSQyKCJkaXYiLCB7CiAgICAgICAgICBjbGFzczogImZqcy1mb3JtLWZpZWxkLXBsYWNlaG9sZGVyIiwKICAgICAgICAgIGNoaWxkcmVuOiBbZSQyKEljb24sIHsKICAgICAgICAgICAgdmlld0JveDogIjAgMCA1NCA1NCIKICAgICAgICAgIH0pLCAiVGV4dCB2aWV3IGlzIHBvcHVsYXRlZCBieSBhbiBleHByZXNzaW9uIl0KICAgICAgICB9KTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIGUkMihNYXJrdXAsIHsKICAgICAgbWFya3VwOiBzYWZlTWFya2Rvd24oY29udGVudCksCiAgICAgIHRyaW06IGZhbHNlCiAgICB9KTsKICB9CgogIGNvbnN0IHR5cGUkMSA9ICd0ZXh0ZmllbGQnOwogIGZ1bmN0aW9uIFRleHRmaWVsZChwcm9wcykgewogICAgY29uc3QgewogICAgICBkaXNhYmxlZCwKICAgICAgZXJyb3JzID0gW10sCiAgICAgIGZpZWxkLAogICAgICB2YWx1ZSA9ICcnCiAgICB9ID0gcHJvcHM7CiAgICBjb25zdCB7CiAgICAgIGRlc2NyaXB0aW9uLAogICAgICBpZCwKICAgICAgbGFiZWwsCiAgICAgIGFwcGVhcmFuY2UgPSB7fSwKICAgICAgdmFsaWRhdGUgPSB7fQogICAgfSA9IGZpZWxkOwogICAgY29uc3QgewogICAgICBwcmVmaXhBZG9ybmVyLAogICAgICBzdWZmaXhBZG9ybmVyCiAgICB9ID0gYXBwZWFyYW5jZTsKICAgIGNvbnN0IHsKICAgICAgcmVxdWlyZWQKICAgIH0gPSB2YWxpZGF0ZTsKICAgIGNvbnN0IG9uQ2hhbmdlID0gKHsKICAgICAgdGFyZ2V0CiAgICB9KSA9PiB7CiAgICAgIHByb3BzLm9uQ2hhbmdlKHsKICAgICAgICBmaWVsZCwKICAgICAgICB2YWx1ZTogdGFyZ2V0LnZhbHVlCiAgICAgIH0pOwogICAgfTsKICAgIGNvbnN0IHsKICAgICAgZm9ybUlkCiAgICB9ID0gRiQxKEZvcm1Db250ZXh0KTsKICAgIHJldHVybiBlJDIoImRpdiIsIHsKICAgICAgY2xhc3M6IGZvcm1GaWVsZENsYXNzZXModHlwZSQxLCB7CiAgICAgICAgZXJyb3JzLAogICAgICAgIGRpc2FibGVkCiAgICAgIH0pLAogICAgICBjaGlsZHJlbjogW2UkMihMYWJlbCwgewogICAgICAgIGlkOiBwcmVmaXhJZChpZCwgZm9ybUlkKSwKICAgICAgICBsYWJlbDogbGFiZWwsCiAgICAgICAgcmVxdWlyZWQ6IHJlcXVpcmVkCiAgICAgIH0pLCBlJDIoSW5wdXRBZG9ybmVyLCB7CiAgICAgICAgZGlzYWJsZWQ6IGRpc2FibGVkLAogICAgICAgIHByZTogcHJlZml4QWRvcm5lciwKICAgICAgICBwb3N0OiBzdWZmaXhBZG9ybmVyLAogICAgICAgIGNoaWxkcmVuOiBlJDIoImlucHV0IiwgewogICAgICAgICAgY2xhc3M6ICJmanMtaW5wdXQiLAogICAgICAgICAgZGlzYWJsZWQ6IGRpc2FibGVkLAogICAgICAgICAgaWQ6IHByZWZpeElkKGlkLCBmb3JtSWQpLAogICAgICAgICAgb25JbnB1dDogb25DaGFuZ2UsCiAgICAgICAgICB0eXBlOiAidGV4dCIsCiAgICAgICAgICB2YWx1ZTogdmFsdWUKICAgICAgICB9KQogICAgICB9KSwgZSQyKERlc2NyaXB0aW9uLCB7CiAgICAgICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uCiAgICAgIH0pLCBlJDIoRXJyb3JzLCB7CiAgICAgICAgZXJyb3JzOiBlcnJvcnMKICAgICAgfSldCiAgICB9KTsKICB9CiAgVGV4dGZpZWxkLmNyZWF0ZSA9IGZ1bmN0aW9uIChvcHRpb25zID0ge30pIHsKICAgIHJldHVybiB7CiAgICAgIC4uLm9wdGlvbnMKICAgIH07CiAgfTsKICBUZXh0ZmllbGQudHlwZSA9IHR5cGUkMTsKICBUZXh0ZmllbGQubGFiZWwgPSAnVGV4dCBmaWVsZCc7CiAgVGV4dGZpZWxkLmtleWVkID0gdHJ1ZTsKICBUZXh0ZmllbGQuZW1wdHlWYWx1ZSA9ICcnOwogIFRleHRmaWVsZC5zYW5pdGl6ZVZhbHVlID0gKHsKICAgIHZhbHVlCiAgfSkgPT4gaXNBcnJheSQyKHZhbHVlKSB8fCBpc09iamVjdCh2YWx1ZSkgPyAnJyA6IFN0cmluZyh2YWx1ZSk7CgogIGNvbnN0IHR5cGUgPSAndGV4dGFyZWEnOwogIGZ1bmN0aW9uIFRleHRhcmVhKHByb3BzKSB7CiAgICBjb25zdCB7CiAgICAgIGRpc2FibGVkLAogICAgICBlcnJvcnMgPSBbXSwKICAgICAgZmllbGQsCiAgICAgIHZhbHVlID0gJycKICAgIH0gPSBwcm9wczsKICAgIGNvbnN0IHsKICAgICAgZGVzY3JpcHRpb24sCiAgICAgIGlkLAogICAgICBsYWJlbCwKICAgICAgdmFsaWRhdGUgPSB7fQogICAgfSA9IGZpZWxkOwogICAgY29uc3QgewogICAgICByZXF1aXJlZAogICAgfSA9IHZhbGlkYXRlOwogICAgY29uc3QgdGV4dGFyZWFSZWYgPSBzKCk7CiAgICBjb25zdCBvbklucHV0ID0gKHsKICAgICAgdGFyZ2V0CiAgICB9KSA9PiB7CiAgICAgIHByb3BzLm9uQ2hhbmdlKHsKICAgICAgICBmaWVsZCwKICAgICAgICB2YWx1ZTogdGFyZ2V0LnZhbHVlCiAgICAgIH0pOwogICAgfTsKICAgIGNvbnN0IGF1dG9TaXplVGV4dGFyZWEgPSBBJDEodGV4dGFyZWEgPT4gewogICAgICAvLyBFbnN1cmVzIHRoZSB0ZXh0YXJlYSBzaHJpbmtzIGJhY2ssIGFuZCBpbXByb3ZlcyByZXNpemluZyBiZWhhdmlvciBjb25zaXN0ZW5jeQogICAgICB0ZXh0YXJlYS5zdHlsZS5oZWlnaHQgPSAnMHB4JzsKICAgICAgY29uc3QgY29tcHV0ZWQgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0ZXh0YXJlYSk7CiAgICAgIGNvbnN0IGNhbGN1bGF0ZWRIZWlnaHQgPSBwYXJzZUludChjb21wdXRlZC5nZXRQcm9wZXJ0eVZhbHVlKCdib3JkZXItdG9wLXdpZHRoJykpICsgcGFyc2VJbnQoY29tcHV0ZWQuZ2V0UHJvcGVydHlWYWx1ZSgncGFkZGluZy10b3AnKSkgKyB0ZXh0YXJlYS5zY3JvbGxIZWlnaHQgKyBwYXJzZUludChjb21wdXRlZC5nZXRQcm9wZXJ0eVZhbHVlKCdwYWRkaW5nLWJvdHRvbScpKSArIHBhcnNlSW50KGNvbXB1dGVkLmdldFByb3BlcnR5VmFsdWUoJ2JvcmRlci1ib3R0b20td2lkdGgnKSk7CiAgICAgIGNvbnN0IG1pbkhlaWdodCA9IDc1OwogICAgICBjb25zdCBtYXhIZWlnaHQgPSAzNTA7CiAgICAgIGNvbnN0IGRpc3BsYXlIZWlnaHQgPSBNYXRoLm1heChNYXRoLm1pbihjYWxjdWxhdGVkSGVpZ2h0LCBtYXhIZWlnaHQpLCBtaW5IZWlnaHQpOwogICAgICB0ZXh0YXJlYS5zdHlsZS5oZWlnaHQgPSBgJHtkaXNwbGF5SGVpZ2h0fXB4YDsKCiAgICAgIC8vIE92ZXJmbG93IGlzIGhpZGRlbiBieSBkZWZhdWx0IHRvIGhpZGUgc2Nyb2xsYmFyIGZsaWNrZXJpbmcKICAgICAgdGV4dGFyZWEuc3R5bGUub3ZlcmZsb3cgPSBjYWxjdWxhdGVkSGVpZ2h0ID4gbWF4SGVpZ2h0ID8gJ3Zpc2libGUnIDogJ2hpZGRlbic7CiAgICB9LCBbXSk7CiAgICB5KCgpID0+IHsKICAgICAgYXV0b1NpemVUZXh0YXJlYSh0ZXh0YXJlYVJlZi5jdXJyZW50KTsKICAgIH0sIFthdXRvU2l6ZVRleHRhcmVhLCB2YWx1ZV0pOwogICAgY29uc3QgewogICAgICBmb3JtSWQKICAgIH0gPSBGJDEoRm9ybUNvbnRleHQpOwogICAgcmV0dXJuIGUkMigiZGl2IiwgewogICAgICBjbGFzczogZm9ybUZpZWxkQ2xhc3Nlcyh0eXBlLCB7CiAgICAgICAgZXJyb3JzLAogICAgICAgIGRpc2FibGVkCiAgICAgIH0pLAogICAgICBjaGlsZHJlbjogW2UkMihMYWJlbCwgewogICAgICAgIGlkOiBwcmVmaXhJZChpZCwgZm9ybUlkKSwKICAgICAgICBsYWJlbDogbGFiZWwsCiAgICAgICAgcmVxdWlyZWQ6IHJlcXVpcmVkCiAgICAgIH0pLCBlJDIoInRleHRhcmVhIiwgewogICAgICAgIGNsYXNzOiAiZmpzLXRleHRhcmVhIiwKICAgICAgICBkaXNhYmxlZDogZGlzYWJsZWQsCiAgICAgICAgaWQ6IHByZWZpeElkKGlkLCBmb3JtSWQpLAogICAgICAgIG9uSW5wdXQ6IG9uSW5wdXQsCiAgICAgICAgdmFsdWU6IHZhbHVlLAogICAgICAgIHJlZjogdGV4dGFyZWFSZWYKICAgICAgfSksIGUkMihEZXNjcmlwdGlvbiwgewogICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbgogICAgICB9KSwgZSQyKEVycm9ycywgewogICAgICAgIGVycm9yczogZXJyb3JzCiAgICAgIH0pXQogICAgfSk7CiAgfQogIFRleHRhcmVhLmNyZWF0ZSA9IGZ1bmN0aW9uIChvcHRpb25zID0ge30pIHsKICAgIHJldHVybiB7CiAgICAgIC4uLm9wdGlvbnMKICAgIH07CiAgfTsKICBUZXh0YXJlYS50eXBlID0gdHlwZTsKICBUZXh0YXJlYS5sYWJlbCA9ICdUZXh0IGFyZWEnOwogIFRleHRhcmVhLmtleWVkID0gdHJ1ZTsKICBUZXh0YXJlYS5lbXB0eVZhbHVlID0gJyc7CiAgVGV4dGFyZWEuc2FuaXRpemVWYWx1ZSA9ICh7CiAgICB2YWx1ZQogIH0pID0+IGlzQXJyYXkkMih2YWx1ZSkgfHwgaXNPYmplY3QodmFsdWUpID8gJycgOiBTdHJpbmcodmFsdWUpOwoKICBjb25zdCBmb3JtRmllbGRzID0gW0J1dHRvbiwgQ2hlY2tib3gsIENoZWNrbGlzdCwgRGVmYXVsdCwgSW1hZ2UsIE51bWJlcmZpZWxkLCBEYXRldGltZSwgUmFkaW8sIFNlbGVjdCwgVGFnbGlzdCwgVGV4dCwgVGV4dGZpZWxkLCBUZXh0YXJlYV07CgogIGNsYXNzIEZvcm1GaWVsZHMgewogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHRoaXMuX2Zvcm1GaWVsZHMgPSB7fTsKICAgICAgZm9ybUZpZWxkcy5mb3JFYWNoKGZvcm1GaWVsZCA9PiB7CiAgICAgICAgY29uc3QgewogICAgICAgICAgdHlwZQogICAgICAgIH0gPSBmb3JtRmllbGQ7CiAgICAgICAgdGhpcy5yZWdpc3Rlcih0eXBlLCBmb3JtRmllbGQpOwogICAgICB9KTsKICAgIH0KICAgIHJlZ2lzdGVyKHR5cGUsIGZvcm1GaWVsZCkgewogICAgICB0aGlzLl9mb3JtRmllbGRzW3R5cGVdID0gZm9ybUZpZWxkOwogICAgfQogICAgZ2V0KHR5cGUpIHsKICAgICAgcmV0dXJuIHRoaXMuX2Zvcm1GaWVsZHNbdHlwZV07CiAgICB9CiAgfQoKICBmdW5jdGlvbiBSZW5kZXJlcihjb25maWcsIGV2ZW50QnVzLCBmb3JtLCBpbmplY3RvcikgewogICAgY29uc3QgQXBwID0gKCkgPT4gewogICAgICBjb25zdCBbc3RhdGUsIHNldFN0YXRlXSA9IGwkMShmb3JtLl9nZXRTdGF0ZSgpKTsKICAgICAgY29uc3QgZm9ybUNvbnRleHQgPSB7CiAgICAgICAgZ2V0U2VydmljZSh0eXBlLCBzdHJpY3QgPSB0cnVlKSB7CiAgICAgICAgICByZXR1cm4gaW5qZWN0b3IuZ2V0KHR5cGUsIHN0cmljdCk7CiAgICAgICAgfSwKICAgICAgICBmb3JtSWQ6IGZvcm0uX2lkCiAgICAgIH07CiAgICAgIGV2ZW50QnVzLm9uKCdjaGFuZ2VkJywgbmV3U3RhdGUgPT4gewogICAgICAgIHNldFN0YXRlKG5ld1N0YXRlKTsKICAgICAgfSk7CiAgICAgIGNvbnN0IG9uQ2hhbmdlID0gQSQxKHVwZGF0ZSA9PiBmb3JtLl91cGRhdGUodXBkYXRlKSwgW2Zvcm1dKTsKICAgICAgY29uc3QgewogICAgICAgIHByb3BlcnRpZXMKICAgICAgfSA9IHN0YXRlOwogICAgICBjb25zdCB7CiAgICAgICAgcmVhZE9ubHkKICAgICAgfSA9IHByb3BlcnRpZXM7CiAgICAgIGNvbnN0IG9uU3VibWl0ID0gQSQxKCgpID0+IHsKICAgICAgICBpZiAoIXJlYWRPbmx5KSB7CiAgICAgICAgICBmb3JtLnN1Ym1pdCgpOwogICAgICAgIH0KICAgICAgfSwgW2Zvcm0sIHJlYWRPbmx5XSk7CiAgICAgIGNvbnN0IG9uUmVzZXQgPSBBJDEoKCkgPT4gZm9ybS5yZXNldCgpLCBbZm9ybV0pOwogICAgICBjb25zdCB7CiAgICAgICAgc2NoZW1hCiAgICAgIH0gPSBzdGF0ZTsKICAgICAgaWYgKCFzY2hlbWEpIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQogICAgICByZXR1cm4gZSQyKEZvcm1Db250ZXh0LlByb3ZpZGVyLCB7CiAgICAgICAgdmFsdWU6IGZvcm1Db250ZXh0LAogICAgICAgIGNoaWxkcmVuOiBlJDIoRm9ybUNvbXBvbmVudCwgewogICAgICAgICAgb25DaGFuZ2U6IG9uQ2hhbmdlLAogICAgICAgICAgb25TdWJtaXQ6IG9uU3VibWl0LAogICAgICAgICAgb25SZXNldDogb25SZXNldAogICAgICAgIH0pCiAgICAgIH0pOwogICAgfTsKICAgIGNvbnN0IHsKICAgICAgY29udGFpbmVyCiAgICB9ID0gY29uZmlnOwogICAgZXZlbnRCdXMub24oJ2Zvcm0uaW5pdCcsICgpID0+IHsKICAgICAgUyQxKGUkMihBcHAsIHt9KSwgY29udGFpbmVyKTsKICAgIH0pOwogICAgZXZlbnRCdXMub24oJ2Zvcm0uZGVzdHJveScsICgpID0+IHsKICAgICAgUyQxKG51bGwsIGNvbnRhaW5lcik7CiAgICB9KTsKICB9CiAgUmVuZGVyZXIuJGluamVjdCA9IFsnY29uZmlnLnJlbmRlcmVyJywgJ2V2ZW50QnVzJywgJ2Zvcm0nLCAnaW5qZWN0b3InXTsKCiAgdmFyIHJlbmRlck1vZHVsZSA9IHsKICAgIF9faW5pdF9fOiBbJ2Zvcm1GaWVsZHMnLCAncmVuZGVyZXInXSwKICAgIGZvcm1GaWVsZHM6IFsndHlwZScsIEZvcm1GaWVsZHNdLAogICAgcmVuZGVyZXI6IFsndHlwZScsIFJlbmRlcmVyXQogIH07CgogIHZhciBjb3JlID0gewogICAgX19kZXBlbmRzX186IFtpbXBvcnRNb2R1bGUsIHJlbmRlck1vZHVsZV0sCiAgICBjb25kaXRpb25DaGVja2VyOiBbJ3R5cGUnLCBDb25kaXRpb25DaGVja2VyXSwKICAgIGV2ZW50QnVzOiBbJ3R5cGUnLCBFdmVudEJ1c10sCiAgICBmb3JtRmllbGRSZWdpc3RyeTogWyd0eXBlJywgRm9ybUZpZWxkUmVnaXN0cnldLAogICAgdmFsaWRhdG9yOiBbJ3R5cGUnLCBWYWxpZGF0b3JdCiAgfTsKCiAgLyoqDQogICAqIEB0eXBlZGVmIHsgaW1wb3J0KCcuL3R5cGVzJykuSW5qZWN0b3IgfSBJbmplY3Rvcg0KICAgKiBAdHlwZWRlZiB7IGltcG9ydCgnLi90eXBlcycpLkRhdGEgfSBEYXRhDQogICAqIEB0eXBlZGVmIHsgaW1wb3J0KCcuL3R5cGVzJykuRXJyb3JzIH0gRXJyb3JzDQogICAqIEB0eXBlZGVmIHsgaW1wb3J0KCcuL3R5cGVzJykuU2NoZW1hIH0gU2NoZW1hDQogICAqIEB0eXBlZGVmIHsgaW1wb3J0KCcuL3R5cGVzJykuRm9ybVByb3BlcnRpZXMgfSBGb3JtUHJvcGVydGllcw0KICAgKiBAdHlwZWRlZiB7IGltcG9ydCgnLi90eXBlcycpLkZvcm1Qcm9wZXJ0eSB9IEZvcm1Qcm9wZXJ0eQ0KICAgKiBAdHlwZWRlZiB7IGltcG9ydCgnLi90eXBlcycpLkZvcm1FdmVudCB9IEZvcm1FdmVudA0KICAgKiBAdHlwZWRlZiB7IGltcG9ydCgnLi90eXBlcycpLkZvcm1PcHRpb25zIH0gRm9ybU9wdGlvbnMNCiAgICoNCiAgICogQHR5cGVkZWYgeyB7DQogICAqICAgZGF0YTogRGF0YSwNCiAgICogICBpbml0aWFsRGF0YTogRGF0YSwNCiAgICogICBlcnJvcnM6IEVycm9ycywNCiAgICogICBwcm9wZXJ0aWVzOiBGb3JtUHJvcGVydGllcywNCiAgICogICBzY2hlbWE6IFNjaGVtYQ0KICAgKiB9IH0gU3RhdGUNCiAgICoNCiAgICogQHR5cGVkZWYgeyAodHlwZTpGb3JtRXZlbnQsIHByaW9yaXR5Om51bWJlciwgaGFuZGxlcjpGdW5jdGlvbikgPT4gdm9pZCB9IE9uRXZlbnRXaXRoUHJpb3JpdHkNCiAgICogQHR5cGVkZWYgeyAodHlwZTpGb3JtRXZlbnQsIGhhbmRsZXI6RnVuY3Rpb24pID0+IHZvaWQgfSBPbkV2ZW50V2l0aE91dFByaW9yaXR5DQogICAqIEB0eXBlZGVmIHsgT25FdmVudFdpdGhQcmlvcml0eSAmIE9uRXZlbnRXaXRoT3V0UHJpb3JpdHkgfSBPbkV2ZW50VHlwZQ0KICAgKi8KCiAgY29uc3QgaWRzID0gbmV3IElkcyhbMzIsIDM2LCAxXSk7CgogIC8qKg0KICAgKiBUaGUgZm9ybS4NCiAgICovCiAgY2xhc3MgRm9ybSB7CiAgICAvKioNCiAgICAgKiBAY29uc3RydWN0b3INCiAgICAgKiBAcGFyYW0ge0Zvcm1PcHRpb25zfSBvcHRpb25zDQogICAgICovCiAgICBjb25zdHJ1Y3RvcihvcHRpb25zID0ge30pIHsKICAgICAgLyoqDQogICAgICAgKiBAcHVibGljDQogICAgICAgKiBAdHlwZSB7T25FdmVudFR5cGV9DQogICAgICAgKi8KICAgICAgdGhpcy5vbiA9IHRoaXMuX29uRXZlbnQ7CgogICAgICAvKioNCiAgICAgICAqIEBwdWJsaWMNCiAgICAgICAqIEB0eXBlIHtTdHJpbmd9DQogICAgICAgKi8KICAgICAgdGhpcy5faWQgPSBpZHMubmV4dCgpOwoKICAgICAgLyoqDQogICAgICAgKiBAcHJpdmF0ZQ0KICAgICAgICogQHR5cGUge0VsZW1lbnR9DQogICAgICAgKi8KICAgICAgdGhpcy5fY29udGFpbmVyID0gY3JlYXRlRm9ybUNvbnRhaW5lcigpOwogICAgICBjb25zdCB7CiAgICAgICAgY29udGFpbmVyLAogICAgICAgIGluamVjdG9yID0gdGhpcy5fY3JlYXRlSW5qZWN0b3Iob3B0aW9ucywgdGhpcy5fY29udGFpbmVyKSwKICAgICAgICBwcm9wZXJ0aWVzID0ge30KICAgICAgfSA9IG9wdGlvbnM7CgogICAgICAvKioNCiAgICAgICAqIEBwcml2YXRlDQogICAgICAgKiBAdHlwZSB7U3RhdGV9DQogICAgICAgKi8KICAgICAgdGhpcy5fc3RhdGUgPSB7CiAgICAgICAgaW5pdGlhbERhdGE6IG51bGwsCiAgICAgICAgZGF0YTogbnVsbCwKICAgICAgICBwcm9wZXJ0aWVzLAogICAgICAgIGVycm9yczoge30sCiAgICAgICAgc2NoZW1hOiBudWxsCiAgICAgIH07CiAgICAgIHRoaXMuZ2V0ID0gaW5qZWN0b3IuZ2V0OwogICAgICB0aGlzLmludm9rZSA9IGluamVjdG9yLmludm9rZTsKICAgICAgdGhpcy5nZXQoJ2V2ZW50QnVzJykuZmlyZSgnZm9ybS5pbml0Jyk7CiAgICAgIGlmIChjb250YWluZXIpIHsKICAgICAgICB0aGlzLmF0dGFjaFRvKGNvbnRhaW5lcik7CiAgICAgIH0KICAgIH0KICAgIGNsZWFyKCkgewogICAgICAvLyBjbGVhciBmb3JtIHNlcnZpY2VzCiAgICAgIHRoaXMuX2VtaXQoJ2RpYWdyYW0uY2xlYXInKTsKCiAgICAgIC8vIGNsZWFyIGRpYWdyYW0gc2VydmljZXMgKGUuZy4gRXZlbnRCdXMpCiAgICAgIHRoaXMuX2VtaXQoJ2Zvcm0uY2xlYXInKTsKICAgIH0KCiAgICAvKioNCiAgICAgKiBEZXN0cm95IHRoZSBmb3JtLCByZW1vdmluZyBpdCBmcm9tIERPTSwNCiAgICAgKiBpZiBhdHRhY2hlZC4NCiAgICAgKi8KICAgIGRlc3Ryb3koKSB7CiAgICAgIC8vIGRlc3Ryb3kgZm9ybSBzZXJ2aWNlcwogICAgICB0aGlzLmdldCgnZXZlbnRCdXMnKS5maXJlKCdmb3JtLmRlc3Ryb3knKTsKCiAgICAgIC8vIGRlc3Ryb3kgZGlhZ3JhbSBzZXJ2aWNlcyAoZS5nLiBFdmVudEJ1cykKICAgICAgdGhpcy5nZXQoJ2V2ZW50QnVzJykuZmlyZSgnZGlhZ3JhbS5kZXN0cm95Jyk7CiAgICAgIHRoaXMuX2RldGFjaChmYWxzZSk7CiAgICB9CgogICAgLyoqDQogICAgICogT3BlbiBhIGZvcm0gc2NoZW1hIHdpdGggdGhlIGdpdmVuIGluaXRpYWwgZGF0YS4NCiAgICAgKg0KICAgICAqIEBwYXJhbSB7U2NoZW1hfSBzY2hlbWENCiAgICAgKiBAcGFyYW0ge0RhdGF9IFtkYXRhXQ0KICAgICAqDQogICAgICogQHJldHVybiBQcm9taXNlPHsgd2FybmluZ3M6IEFycmF5PGFueT4gfT4NCiAgICAgKi8KICAgIGltcG9ydFNjaGVtYShzY2hlbWEsIGRhdGEgPSB7fSkgewogICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgICAgIHRyeSB7CiAgICAgICAgICB0aGlzLmNsZWFyKCk7CiAgICAgICAgICBjb25zdCB7CiAgICAgICAgICAgIHNjaGVtYTogaW1wb3J0ZWRTY2hlbWEsCiAgICAgICAgICAgIGRhdGE6IGluaXRpYWxpemVkRGF0YSwKICAgICAgICAgICAgd2FybmluZ3MKICAgICAgICAgIH0gPSB0aGlzLmdldCgnaW1wb3J0ZXInKS5pbXBvcnRTY2hlbWEoc2NoZW1hLCBkYXRhKTsKICAgICAgICAgIHRoaXMuX3NldFN0YXRlKHsKICAgICAgICAgICAgZGF0YTogaW5pdGlhbGl6ZWREYXRhLAogICAgICAgICAgICBlcnJvcnM6IHt9LAogICAgICAgICAgICBzY2hlbWE6IGltcG9ydGVkU2NoZW1hLAogICAgICAgICAgICBpbml0aWFsRGF0YTogY2xvbmUoaW5pdGlhbGl6ZWREYXRhKQogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLl9lbWl0KCdpbXBvcnQuZG9uZScsIHsKICAgICAgICAgICAgd2FybmluZ3MKICAgICAgICAgIH0pOwogICAgICAgICAgcmV0dXJuIHJlc29sdmUoewogICAgICAgICAgICB3YXJuaW5ncwogICAgICAgICAgfSk7CiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgIHRoaXMuX2VtaXQoJ2ltcG9ydC5kb25lJywgewogICAgICAgICAgICBlcnJvciwKICAgICAgICAgICAgd2FybmluZ3M6IGVycm9yLndhcm5pbmdzIHx8IFtdCiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybiByZWplY3QoZXJyb3IpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CgogICAgLyoqDQogICAgICogU3VibWl0IHRoZSBmb3JtLCB0cmlnZ2VyaW5nIGFsbCBmaWVsZCB2YWxpZGF0aW9ucy4NCiAgICAgKg0KICAgICAqIEByZXR1cm5zIHsgeyBkYXRhOiBEYXRhLCBlcnJvcnM6IEVycm9ycyB9IH0NCiAgICAgKi8KICAgIHN1Ym1pdCgpIHsKICAgICAgY29uc3QgewogICAgICAgIHByb3BlcnRpZXMKICAgICAgfSA9IHRoaXMuX2dldFN0YXRlKCk7CiAgICAgIGlmIChwcm9wZXJ0aWVzLnJlYWRPbmx5KSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdmb3JtIGlzIHJlYWQtb25seScpOwogICAgICB9CiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLl9nZXRTdWJtaXREYXRhKCk7CiAgICAgIGNvbnN0IGVycm9ycyA9IHRoaXMudmFsaWRhdGUoKTsKICAgICAgY29uc3QgZmlsdGVyZWRFcnJvcnMgPSB0aGlzLl9hcHBseUNvbmRpdGlvbnMoZXJyb3JzLCBkYXRhKTsKICAgICAgY29uc3QgcmVzdWx0ID0gewogICAgICAgIGRhdGEsCiAgICAgICAgZXJyb3JzOiBmaWx0ZXJlZEVycm9ycwogICAgICB9OwogICAgICB0aGlzLl9lbWl0KCdzdWJtaXQnLCByZXN1bHQpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgcmVzZXQoKSB7CiAgICAgIHRoaXMuX2VtaXQoJ3Jlc2V0Jyk7CiAgICAgIHRoaXMuX3NldFN0YXRlKHsKICAgICAgICBkYXRhOiBjbG9uZSh0aGlzLl9zdGF0ZS5pbml0aWFsRGF0YSksCiAgICAgICAgZXJyb3JzOiB7fQogICAgICB9KTsKICAgIH0KCiAgICAvKioNCiAgICAgKiBAcmV0dXJucyB7RXJyb3JzfQ0KICAgICAqLwogICAgdmFsaWRhdGUoKSB7CiAgICAgIGNvbnN0IGZvcm1GaWVsZFJlZ2lzdHJ5ID0gdGhpcy5nZXQoJ2Zvcm1GaWVsZFJlZ2lzdHJ5JyksCiAgICAgICAgdmFsaWRhdG9yID0gdGhpcy5nZXQoJ3ZhbGlkYXRvcicpOwogICAgICBjb25zdCB7CiAgICAgICAgZGF0YQogICAgICB9ID0gdGhpcy5fZ2V0U3RhdGUoKTsKICAgICAgY29uc3QgZXJyb3JzID0gZm9ybUZpZWxkUmVnaXN0cnkuZ2V0QWxsKCkucmVkdWNlKChlcnJvcnMsIGZpZWxkKSA9PiB7CiAgICAgICAgY29uc3QgewogICAgICAgICAgZGlzYWJsZWQsCiAgICAgICAgICBfcGF0aAogICAgICAgIH0gPSBmaWVsZDsKICAgICAgICBpZiAoZGlzYWJsZWQpIHsKICAgICAgICAgIHJldHVybiBlcnJvcnM7CiAgICAgICAgfQogICAgICAgIGNvbnN0IHZhbHVlID0gZ2V0KGRhdGEsIF9wYXRoKTsKICAgICAgICBjb25zdCBmaWVsZEVycm9ycyA9IHZhbGlkYXRvci52YWxpZGF0ZUZpZWxkKGZpZWxkLCB2YWx1ZSk7CiAgICAgICAgcmV0dXJuIHNldChlcnJvcnMsIFtwYXRoU3RyaW5naWZ5KF9wYXRoKV0sIGZpZWxkRXJyb3JzLmxlbmd0aCA/IGZpZWxkRXJyb3JzIDogdW5kZWZpbmVkKTsKICAgICAgfSwgLyoqIEB0eXBlIHtFcnJvcnN9ICove30pOwogICAgICB0aGlzLl9zZXRTdGF0ZSh7CiAgICAgICAgZXJyb3JzCiAgICAgIH0pOwogICAgICByZXR1cm4gZXJyb3JzOwogICAgfQoKICAgIC8qKg0KICAgICAqIEBwYXJhbSB7RWxlbWVudHxzdHJpbmd9IHBhcmVudE5vZGUNCiAgICAgKi8KICAgIGF0dGFjaFRvKHBhcmVudE5vZGUpIHsKICAgICAgaWYgKCFwYXJlbnROb2RlKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdwYXJlbnROb2RlIHJlcXVpcmVkJyk7CiAgICAgIH0KICAgICAgdGhpcy5kZXRhY2goKTsKICAgICAgaWYgKGlzU3RyaW5nJDIocGFyZW50Tm9kZSkpIHsKICAgICAgICBwYXJlbnROb2RlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihwYXJlbnROb2RlKTsKICAgICAgfQogICAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLl9jb250YWluZXI7CiAgICAgIHBhcmVudE5vZGUuYXBwZW5kQ2hpbGQoY29udGFpbmVyKTsKICAgICAgdGhpcy5fZW1pdCgnYXR0YWNoJyk7CiAgICB9CiAgICBkZXRhY2goKSB7CiAgICAgIHRoaXMuX2RldGFjaCgpOwogICAgfQoKICAgIC8qKg0KICAgICAqIEBwcml2YXRlDQogICAgICoNCiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtlbWl0XQ0KICAgICAqLwogICAgX2RldGFjaChlbWl0ID0gdHJ1ZSkgewogICAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLl9jb250YWluZXIsCiAgICAgICAgcGFyZW50Tm9kZSA9IGNvbnRhaW5lci5wYXJlbnROb2RlOwogICAgICBpZiAoIXBhcmVudE5vZGUpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKGVtaXQpIHsKICAgICAgICB0aGlzLl9lbWl0KCdkZXRhY2gnKTsKICAgICAgfQogICAgICBwYXJlbnROb2RlLnJlbW92ZUNoaWxkKGNvbnRhaW5lcik7CiAgICB9CgogICAgLyoqDQogICAgICogQHBhcmFtIHtGb3JtUHJvcGVydHl9IHByb3BlcnR5DQogICAgICogQHBhcmFtIHthbnl9IHZhbHVlDQogICAgICovCiAgICBzZXRQcm9wZXJ0eShwcm9wZXJ0eSwgdmFsdWUpIHsKICAgICAgY29uc3QgcHJvcGVydGllcyA9IHNldCh0aGlzLl9nZXRTdGF0ZSgpLnByb3BlcnRpZXMsIFtwcm9wZXJ0eV0sIHZhbHVlKTsKICAgICAgdGhpcy5fc2V0U3RhdGUoewogICAgICAgIHByb3BlcnRpZXMKICAgICAgfSk7CiAgICB9CgogICAgLyoqDQogICAgICogQHBhcmFtIHtGb3JtRXZlbnR9IHR5cGUNCiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyDQogICAgICovCiAgICBvZmYodHlwZSwgaGFuZGxlcikgewogICAgICB0aGlzLmdldCgnZXZlbnRCdXMnKS5vZmYodHlwZSwgaGFuZGxlcik7CiAgICB9CgogICAgLyoqDQogICAgICogQHByaXZhdGUNCiAgICAgKg0KICAgICAqIEBwYXJhbSB7Rm9ybU9wdGlvbnN9IG9wdGlvbnMNCiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGNvbnRhaW5lcg0KICAgICAqDQogICAgICogQHJldHVybnMge0luamVjdG9yfQ0KICAgICAqLwogICAgX2NyZWF0ZUluamVjdG9yKG9wdGlvbnMsIGNvbnRhaW5lcikgewogICAgICBjb25zdCB7CiAgICAgICAgYWRkaXRpb25hbE1vZHVsZXMgPSBbXSwKICAgICAgICBtb2R1bGVzID0gW10KICAgICAgfSA9IG9wdGlvbnM7CiAgICAgIGNvbnN0IGNvbmZpZyA9IHsKICAgICAgICByZW5kZXJlcjogewogICAgICAgICAgY29udGFpbmVyCiAgICAgICAgfQogICAgICB9OwogICAgICByZXR1cm4gY3JlYXRlSW5qZWN0b3IoW3sKICAgICAgICBjb25maWc6IFsndmFsdWUnLCBjb25maWddCiAgICAgIH0sIHsKICAgICAgICBmb3JtOiBbJ3ZhbHVlJywgdGhpc10KICAgICAgfSwgY29yZSwgLi4ubW9kdWxlcywgLi4uYWRkaXRpb25hbE1vZHVsZXNdKTsKICAgIH0KCiAgICAvKioNCiAgICAgKiBAcHJpdmF0ZQ0KICAgICAqLwogICAgX2VtaXQodHlwZSwgZGF0YSkgewogICAgICB0aGlzLmdldCgnZXZlbnRCdXMnKS5maXJlKHR5cGUsIGRhdGEpOwogICAgfQoKICAgIC8qKg0KICAgICAqIEBpbnRlcm5hbA0KICAgICAqDQogICAgICogQHBhcmFtIHsgeyBhZGQ/OiBib29sZWFuLCBmaWVsZDogYW55LCByZW1vdmU/OiBudW1iZXIsIHZhbHVlPzogYW55IH0gfSB1cGRhdGUNCiAgICAgKi8KICAgIF91cGRhdGUodXBkYXRlKSB7CiAgICAgIGNvbnN0IHsKICAgICAgICBmaWVsZCwKICAgICAgICB2YWx1ZQogICAgICB9ID0gdXBkYXRlOwogICAgICBjb25zdCB7CiAgICAgICAgX3BhdGgKICAgICAgfSA9IGZpZWxkOwogICAgICBsZXQgewogICAgICAgIGRhdGEsCiAgICAgICAgZXJyb3JzCiAgICAgIH0gPSB0aGlzLl9nZXRTdGF0ZSgpOwogICAgICBjb25zdCB2YWxpZGF0b3IgPSB0aGlzLmdldCgndmFsaWRhdG9yJyk7CiAgICAgIGNvbnN0IGZpZWxkRXJyb3JzID0gdmFsaWRhdG9yLnZhbGlkYXRlRmllbGQoZmllbGQsIHZhbHVlKTsKICAgICAgc2V0KGRhdGEsIF9wYXRoLCB2YWx1ZSk7CiAgICAgIHNldChlcnJvcnMsIFtwYXRoU3RyaW5naWZ5KF9wYXRoKV0sIGZpZWxkRXJyb3JzLmxlbmd0aCA/IGZpZWxkRXJyb3JzIDogdW5kZWZpbmVkKTsKICAgICAgdGhpcy5fc2V0U3RhdGUoewogICAgICAgIGRhdGE6IGNsb25lKGRhdGEpLAogICAgICAgIGVycm9yczogY2xvbmUoZXJyb3JzKQogICAgICB9KTsKICAgIH0KCiAgICAvKioNCiAgICAgKiBAaW50ZXJuYWwNCiAgICAgKi8KICAgIF9nZXRTdGF0ZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuX3N0YXRlOwogICAgfQoKICAgIC8qKg0KICAgICAqIEBpbnRlcm5hbA0KICAgICAqLwogICAgX3NldFN0YXRlKHN0YXRlKSB7CiAgICAgIHRoaXMuX3N0YXRlID0gewogICAgICAgIC4uLnRoaXMuX3N0YXRlLAogICAgICAgIC4uLnN0YXRlCiAgICAgIH07CiAgICAgIHRoaXMuX2VtaXQoJ2NoYW5nZWQnLCB0aGlzLl9nZXRTdGF0ZSgpKTsKICAgIH0KCiAgICAvKioNCiAgICAgKiBAaW50ZXJuYWwNCiAgICAgKi8KICAgIF9vbkV2ZW50KHR5cGUsIHByaW9yaXR5LCBoYW5kbGVyKSB7CiAgICAgIHRoaXMuZ2V0KCdldmVudEJ1cycpLm9uKHR5cGUsIHByaW9yaXR5LCBoYW5kbGVyKTsKICAgIH0KCiAgICAvKioNCiAgICAgKiBAaW50ZXJuYWwNCiAgICAgKi8KICAgIF9nZXRTdWJtaXREYXRhKCkgewogICAgICBjb25zdCBmb3JtRmllbGRSZWdpc3RyeSA9IHRoaXMuZ2V0KCdmb3JtRmllbGRSZWdpc3RyeScpOwogICAgICBjb25zdCBmb3JtRGF0YSA9IHRoaXMuX2dldFN0YXRlKCkuZGF0YTsKICAgICAgY29uc3Qgc3VibWl0RGF0YSA9IGZvcm1GaWVsZFJlZ2lzdHJ5LmdldEFsbCgpLnJlZHVjZSgocHJldmlvdXMsIGZpZWxkKSA9PiB7CiAgICAgICAgY29uc3QgewogICAgICAgICAgZGlzYWJsZWQsCiAgICAgICAgICBfcGF0aAogICAgICAgIH0gPSBmaWVsZDsKCiAgICAgICAgLy8gZG8gbm90IHN1Ym1pdCBkaXNhYmxlZCBmb3JtIGZpZWxkcwogICAgICAgIGlmIChkaXNhYmxlZCB8fCAhX3BhdGgpIHsKICAgICAgICAgIHJldHVybiBwcmV2aW91czsKICAgICAgICB9CiAgICAgICAgY29uc3QgdmFsdWUgPSBnZXQoZm9ybURhdGEsIF9wYXRoKTsKICAgICAgICByZXR1cm4gewogICAgICAgICAgLi4ucHJldmlvdXMsCiAgICAgICAgICBbX3BhdGhbMF1dOiB2YWx1ZQogICAgICAgIH07CiAgICAgIH0sIHt9KTsKICAgICAgY29uc3QgZmlsdGVyZWRTdWJtaXREYXRhID0gdGhpcy5fYXBwbHlDb25kaXRpb25zKHN1Ym1pdERhdGEsIGZvcm1EYXRhKTsKICAgICAgcmV0dXJuIGZpbHRlcmVkU3VibWl0RGF0YTsKICAgIH0KCiAgICAvKioNCiAgICAgKiBAaW50ZXJuYWwNCiAgICAgKi8KICAgIF9hcHBseUNvbmRpdGlvbnModG9GaWx0ZXIsIGRhdGEpIHsKICAgICAgY29uc3QgY29uZGl0aW9uQ2hlY2tlciA9IHRoaXMuZ2V0KCdjb25kaXRpb25DaGVja2VyJyk7CiAgICAgIHJldHVybiBjb25kaXRpb25DaGVja2VyLmFwcGx5Q29uZGl0aW9ucyh0b0ZpbHRlciwgZGF0YSk7CiAgICB9CiAgfQoKICBjb25zdCBzY2hlbWFWZXJzaW9uID0gNjsKCiAgLyoqDQogICAqIEB0eXBlZGVmIHsgaW1wb3J0KCcuL3R5cGVzJykuQ3JlYXRlRm9ybU9wdGlvbnMgfSBDcmVhdGVGb3JtT3B0aW9ucw0KICAgKi8KCiAgLyoqDQogICAqIENyZWF0ZSBhIGZvcm0uDQogICAqDQogICAqIEBwYXJhbSB7Q3JlYXRlRm9ybU9wdGlvbnN9IG9wdGlvbnMNCiAgICoNCiAgICogQHJldHVybiB7UHJvbWlzZTxGb3JtPn0NCiAgICovCiAgZnVuY3Rpb24gY3JlYXRlRm9ybShvcHRpb25zKSB7CiAgICBjb25zdCB7CiAgICAgIGRhdGEsCiAgICAgIHNjaGVtYSwKICAgICAgLi4ucmVzdAogICAgfSA9IG9wdGlvbnM7CiAgICBjb25zdCBmb3JtID0gbmV3IEZvcm0ocmVzdCk7CiAgICByZXR1cm4gZm9ybS5pbXBvcnRTY2hlbWEoc2NoZW1hLCBkYXRhKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIGZvcm07CiAgICB9KTsKICB9CgogIGV4cG9ydHMuRm9ybSA9IEZvcm07CiAgZXhwb3J0cy5jcmVhdGVGb3JtID0gY3JlYXRlRm9ybTsKICBleHBvcnRzLmdldFNjaGVtYVZhcmlhYmxlcyA9IGdldFNjaGVtYVZhcmlhYmxlczsKICBleHBvcnRzLnNjaGVtYVZlcnNpb24gPSBzY2hlbWFWZXJzaW9uOwoKICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pOwoKfSkpKTsK</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPBody>
        <HTTPPropertySet>
          <HTTPProperty name="StreamID">3</HTTPProperty>
          <HTTPProperty name="TotalHeadersSize">310</HTTPProperty>
        </HTTPPropertySet>
      </HTTPResponse>
    </HTTPTask>
    <HTTPTask id="12" hostname="cdn.jsdelivr.net" path="/npm/signature_pad@4.0.0/dist/signature_pad.umd.min.js" url="https://cdn.jsdelivr.net/npm/signature_pad@4.0.0/dist/signature_pad.umd.min.js" ip="151.101.153.229" port="443" client_ip="192.168.0.112" client_port="64267" connectionId="2420" origin="HTML" encodingType="ANSI" ordinal="8" startDateTime="2024-02-16T16:37:20.033+05:30" startTime="2904" endTime="3128" blockedTime="-1" dnsTime="1" connectTime="123" sendTime="4294967295" waitTime="4294967295" receiveTime="43" sslNegotiateTime="96" responseBodySize="135">
      <HTTPRequest method="GET">
        <HTTPHeaders>
          <HTTPHeaderEntity name=":method" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0VU</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name=":scheme" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cHM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name=":path" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>L25wbS9zaWduYXR1cmVfcGFkQDQuMC4wL2Rpc3Qvc2lnbmF0dXJlX3BhZC51bWQubWluLmpz</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name=":authority" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Y2RuLmpzZGVsaXZyLm5ldA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Referer" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cHM6Ly9kZXYuYmx1ZWFsZ28uY29tL3NtYXJ0Zm9ybXVwL2xvYWRpbmRleD9vcHBvcnR1bml0eUlkPTAwNjBvMDAwMDFlU0lKMEFBTyZjdXN0b21lcmlkPWN1c3QxMDA1JmFjY2Vzc3Rva2VuPVJGcFNRVlVJZ2Q0WV9vWU5MODFuYUV4VkxBWWdLUXQ3</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Language" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZW4tVVMsZW47cT0wLjk=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="User-Agent" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEyMS4wLjAuMCBTYWZhcmkvNTM3LjM2</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Encoding" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ki8q</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Om1ldGhvZDogR0VUDQo6c2NoZW1lOiBodHRwcw0KOnBhdGg6IC9ucG0vc2lnbmF0dXJlX3BhZEA0LjAuMC9kaXN0L3NpZ25hdHVyZV9wYWQudW1kLm1pbi5qcw0KOmF1dGhvcml0eTogY2RuLmpzZGVsaXZyLm5ldA0KUmVmZXJlcjogaHR0cHM6Ly9kZXYuYmx1ZWFsZ28uY29tL3NtYXJ0Zm9ybXVwL2xvYWRpbmRleD9vcHBvcnR1bml0eUlkPTAwNjBvMDAwMDFlU0lKMEFBTyZjdXN0b21lcmlkPWN1c3QxMDA1JmFjY2Vzc3Rva2VuPVJGcFNRVlVJZ2Q0WV9vWU5MODFuYUV4VkxBWWdLUXQ3DQpBY2NlcHQtTGFuZ3VhZ2U6IGVuLVVTLGVuO3E9MC45DQpVc2VyLUFnZW50OiBNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvMTIxLjAuMC4wIFNhZmFyaS81MzcuMzYNCkFjY2VwdC1FbmNvZGluZzogZ3ppcCwgZGVmbGF0ZQ0KQWNjZXB0OiAqLyoNCg0K</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPPropertySet>
          <HTTPProperty name="StreamID">3</HTTPProperty>
          <HTTPProperty name="TotalHeadersSize">162</HTTPProperty>
        </HTTPPropertySet>
      </HTTPRequest>
      <HTTPResponse>
        <contentLenght>3543</contentLenght>
        <HTTPHeaders>
          <HTTPHeaderEntity name="Status" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MjAw</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="access-control-allow-origin" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Kg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="access-control-expose-headers" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Kg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="timing-allow-origin" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Kg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="cache-control" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>cHVibGljLCBtYXgtYWdlPTMxNTM2MDAwLCBzLW1heGFnZT0zMTUzNjAwMCwgaW1tdXRhYmxl</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="cross-origin-resource-policy" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Y3Jvc3Mtb3JpZ2lu</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="x-content-type-options" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bm9zbmlmZg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="strict-transport-security" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bWF4LWFnZT0zMTUzNjAwMDsgaW5jbHVkZVN1YkRvbWFpbnM7IHByZWxvYWQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="content-type" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>YXBwbGljYXRpb24vamF2YXNjcmlwdDsgY2hhcnNldD11dGYtOA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="x-jsd-version" index="9">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>NC4wLjA=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="x-jsd-version-type" index="10">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>dmVyc2lvbg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="etag" index="11">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Vy8iMjhkNS1jaEkydElrRmxKQXBKKzBPL29IdkxPRHFma0Ei</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="content-encoding" index="12">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="accept-ranges" index="13">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ynl0ZXM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="date" index="14">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>RnJpLCAxNiBGZWIgMjAyNCAxMTowNzoyMCBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="age" index="15">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Mzg0MzE0Mg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="x-served-by" index="16">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Y2FjaGUtZnJhLWVkZGY4MjMwMTAwLUZSQSwgY2FjaGUtYm9tNDc0My1CT00=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="x-cache" index="17">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SElULCBISVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="vary" index="18">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>QWNjZXB0LUVuY29kaW5n</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="alt-svc" index="19">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aDM9Ijo0NDMiO21hPTg2NDAwLGgzLTI5PSI6NDQzIjttYT04NjQwMCxoMy0yNz0iOjQ0MyI7bWE9ODY0MDA=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="content-length" index="20">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MzU0Mw==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SFRUUC8yLjAgMjAwDQpTdGF0dXM6IDIwMA0KYWNjZXNzLWNvbnRyb2wtYWxsb3ctb3JpZ2luOiAqDQphY2Nlc3MtY29udHJvbC1leHBvc2UtaGVhZGVyczogKg0KdGltaW5nLWFsbG93LW9yaWdpbjogKg0KY2FjaGUtY29udHJvbDogcHVibGljLCBtYXgtYWdlPTMxNTM2MDAwLCBzLW1heGFnZT0zMTUzNjAwMCwgaW1tdXRhYmxlDQpjcm9zcy1vcmlnaW4tcmVzb3VyY2UtcG9saWN5OiBjcm9zcy1vcmlnaW4NCngtY29udGVudC10eXBlLW9wdGlvbnM6IG5vc25pZmYNCnN0cmljdC10cmFuc3BvcnQtc2VjdXJpdHk6IG1heC1hZ2U9MzE1MzYwMDA7IGluY2x1ZGVTdWJEb21haW5zOyBwcmVsb2FkDQpjb250ZW50LXR5cGU6IGFwcGxpY2F0aW9uL2phdmFzY3JpcHQ7IGNoYXJzZXQ9dXRmLTgNCngtanNkLXZlcnNpb246IDQuMC4wDQp4LWpzZC12ZXJzaW9uLXR5cGU6IHZlcnNpb24NCmV0YWc6IFcvIjI4ZDUtY2hJMnRJa0ZsSkFwSiswTy9vSHZMT0RxZmtBIg0KY29udGVudC1lbmNvZGluZzogZ3ppcA0KYWNjZXB0LXJhbmdlczogYnl0ZXMNCmRhdGU6IEZyaSwgMTYgRmViIDIwMjQgMTE6MDc6MjAgR01UDQphZ2U6IDM4NDMxNDINCngtc2VydmVkLWJ5OiBjYWNoZS1mcmEtZWRkZjgyMzAxMDAtRlJBLCBjYWNoZS1ib200NzQzLUJPTQ0KeC1jYWNoZTogSElULCBISVQNCnZhcnk6IEFjY2VwdC1FbmNvZGluZw0KYWx0LXN2YzogaDM9Ijo0NDMiO21hPTg2NDAwLGgzLTI5PSI6NDQzIjttYT04NjQwMCxoMy0yNz0iOjQ0MyI7bWE9ODY0MDANCmNvbnRlbnQtbGVuZ3RoOiAzNTQzDQoNCg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPBody>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>LyohCiAqIFNpZ25hdHVyZSBQYWQgdjQuMC4wIHwgaHR0cHM6Ly9naXRodWIuY29tL3N6aW1lay9zaWduYXR1cmVfcGFkCiAqIChjKSAyMDIxIFN6eW1vbiBOb3dhayB8IFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZQogKi8KIWZ1bmN0aW9uKHQsZSl7Im9iamVjdCI9PXR5cGVvZiBleHBvcnRzJiYidW5kZWZpbmVkIiE9dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz1lKCk6ImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoZSk6KHQ9InVuZGVmaW5lZCIhPXR5cGVvZiBnbG9iYWxUaGlzP2dsb2JhbFRoaXM6dHx8c2VsZikuU2lnbmF0dXJlUGFkPWUoKX0odGhpcywoZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7Y2xhc3MgdHtjb25zdHJ1Y3Rvcih0LGUsaSxuKXtpZihpc05hTih0KXx8aXNOYU4oZSkpdGhyb3cgbmV3IEVycm9yKGBQb2ludCBpcyBpbnZhbGlkOiAoJHt0fSwgJHtlfSlgKTt0aGlzLng9K3QsdGhpcy55PStlLHRoaXMucHJlc3N1cmU9aXx8MCx0aGlzLnRpbWU9bnx8RGF0ZS5ub3coKX1kaXN0YW5jZVRvKHQpe3JldHVybiBNYXRoLnNxcnQoTWF0aC5wb3codGhpcy54LXQueCwyKStNYXRoLnBvdyh0aGlzLnktdC55LDIpKX1lcXVhbHModCl7cmV0dXJuIHRoaXMueD09PXQueCYmdGhpcy55PT09dC55JiZ0aGlzLnByZXNzdXJlPT09dC5wcmVzc3VyZSYmdGhpcy50aW1lPT09dC50aW1lfXZlbG9jaXR5RnJvbSh0KXtyZXR1cm4gdGhpcy50aW1lIT09dC50aW1lP3RoaXMuZGlzdGFuY2VUbyh0KS8odGhpcy50aW1lLXQudGltZSk6MH19Y2xhc3MgZXtjb25zdHJ1Y3Rvcih0LGUsaSxuLHMsbyl7dGhpcy5zdGFydFBvaW50PXQsdGhpcy5jb250cm9sMj1lLHRoaXMuY29udHJvbDE9aSx0aGlzLmVuZFBvaW50PW4sdGhpcy5zdGFydFdpZHRoPXMsdGhpcy5lbmRXaWR0aD1vfXN0YXRpYyBmcm9tUG9pbnRzKHQsaSl7Y29uc3Qgbj10aGlzLmNhbGN1bGF0ZUNvbnRyb2xQb2ludHModFswXSx0WzFdLHRbMl0pLmMyLHM9dGhpcy5jYWxjdWxhdGVDb250cm9sUG9pbnRzKHRbMV0sdFsyXSx0WzNdKS5jMTtyZXR1cm4gbmV3IGUodFsxXSxuLHMsdFsyXSxpLnN0YXJ0LGkuZW5kKX1zdGF0aWMgY2FsY3VsYXRlQ29udHJvbFBvaW50cyhlLGksbil7Y29uc3Qgcz1lLngtaS54LG89ZS55LWkueSxoPWkueC1uLngscj1pLnktbi55LGE9KGUueCtpLngpLzIsZD0oZS55K2kueSkvMixsPShpLngrbi54KS8yLGM9KGkueStuLnkpLzIsdT1NYXRoLnNxcnQocypzK28qbyksdj1NYXRoLnNxcnQoaCpoK3IqciksbT12Lyh1K3YpLF89bCsoYS1sKSptLHA9YysoZC1jKSptLGc9aS54LV8seD1pLnktcDtyZXR1cm57YzE6bmV3IHQoYStnLGQreCksYzI6bmV3IHQobCtnLGMreCl9fWxlbmd0aCgpe2xldCB0LGUsaT0wO2ZvcihsZXQgbj0wO248PTEwO24rPTEpe2NvbnN0IHM9bi8xMCxvPXRoaXMucG9pbnQocyx0aGlzLnN0YXJ0UG9pbnQueCx0aGlzLmNvbnRyb2wxLngsdGhpcy5jb250cm9sMi54LHRoaXMuZW5kUG9pbnQueCksaD10aGlzLnBvaW50KHMsdGhpcy5zdGFydFBvaW50LnksdGhpcy5jb250cm9sMS55LHRoaXMuY29udHJvbDIueSx0aGlzLmVuZFBvaW50LnkpO2lmKG4+MCl7Y29uc3Qgbj1vLXQscz1oLWU7aSs9TWF0aC5zcXJ0KG4qbitzKnMpfXQ9byxlPWh9cmV0dXJuIGl9cG9pbnQodCxlLGksbixzKXtyZXR1cm4gZSooMS10KSooMS10KSooMS10KSszKmkqKDEtdCkqKDEtdCkqdCszKm4qKDEtdCkqdCp0K3MqdCp0KnR9fWNsYXNzIGkgZXh0ZW5kcyBFdmVudFRhcmdldHtjb25zdHJ1Y3Rvcih0LGU9e30pe3N1cGVyKCksdGhpcy5jYW52YXM9dCx0aGlzLm9wdGlvbnM9ZSx0aGlzLl9oYW5kbGVNb3VzZURvd249dD0+ezE9PT10LmJ1dHRvbnMmJih0aGlzLl9kcmF3bmluZ1N0cm9rZT0hMCx0aGlzLl9zdHJva2VCZWdpbih0KSl9LHRoaXMuX2hhbmRsZU1vdXNlTW92ZT10PT57dGhpcy5fZHJhd25pbmdTdHJva2UmJnRoaXMuX3N0cm9rZU1vdmVVcGRhdGUodCl9LHRoaXMuX2hhbmRsZU1vdXNlVXA9dD0+ezE9PT10LmJ1dHRvbnMmJnRoaXMuX2RyYXduaW5nU3Ryb2tlJiYodGhpcy5fZHJhd25pbmdTdHJva2U9ITEsdGhpcy5fc3Ryb2tlRW5kKHQpKX0sdGhpcy5faGFuZGxlVG91Y2hTdGFydD10PT57aWYodC5wcmV2ZW50RGVmYXVsdCgpLDE9PT10LnRhcmdldFRvdWNoZXMubGVuZ3RoKXtjb25zdCBlPXQuY2hhbmdlZFRvdWNoZXNbMF07dGhpcy5fc3Ryb2tlQmVnaW4oZSl9fSx0aGlzLl9oYW5kbGVUb3VjaE1vdmU9dD0+e3QucHJldmVudERlZmF1bHQoKTtjb25zdCBlPXQudGFyZ2V0VG91Y2hlc1swXTt0aGlzLl9zdHJva2VNb3ZlVXBkYXRlKGUpfSx0aGlzLl9oYW5kbGVUb3VjaEVuZD10PT57aWYodC50YXJnZXQ9PT10aGlzLmNhbnZhcyl7dC5wcmV2ZW50RGVmYXVsdCgpO2NvbnN0IGU9dC5jaGFuZ2VkVG91Y2hlc1swXTt0aGlzLl9zdHJva2VFbmQoZSl9fSx0aGlzLl9oYW5kbGVQb2ludGVyU3RhcnQ9dD0+e3RoaXMuX2RyYXduaW5nU3Ryb2tlPSEwLHQucHJldmVudERlZmF1bHQoKSx0aGlzLl9zdHJva2VCZWdpbih0KX0sdGhpcy5faGFuZGxlUG9pbnRlck1vdmU9dD0+e3RoaXMuX2RyYXduaW5nU3Ryb2tlJiYodC5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuX3N0cm9rZU1vdmVVcGRhdGUodCkpfSx0aGlzLl9oYW5kbGVQb2ludGVyRW5kPXQ9Pnt0aGlzLl9kcmF3bmluZ1N0cm9rZT0hMTt0LnRhcmdldD09PXRoaXMuY2FudmFzJiYodC5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuX3N0cm9rZUVuZCh0KSl9LHRoaXMudmVsb2NpdHlGaWx0ZXJXZWlnaHQ9ZS52ZWxvY2l0eUZpbHRlcldlaWdodHx8LjcsdGhpcy5taW5XaWR0aD1lLm1pbldpZHRofHwuNSx0aGlzLm1heFdpZHRoPWUubWF4V2lkdGh8fDIuNSx0aGlzLnRocm90dGxlPSJ0aHJvdHRsZSJpbiBlP2UudGhyb3R0bGU6MTYsdGhpcy5taW5EaXN0YW5jZT0ibWluRGlzdGFuY2UiaW4gZT9lLm1pbkRpc3RhbmNlOjUsdGhpcy5kb3RTaXplPWUuZG90U2l6ZXx8MCx0aGlzLnBlbkNvbG9yPWUucGVuQ29sb3J8fCJibGFjayIsdGhpcy5iYWNrZ3JvdW5kQ29sb3I9ZS5iYWNrZ3JvdW5kQ29sb3J8fCJyZ2JhKDAsMCwwLDApIix0aGlzLl9zdHJva2VNb3ZlVXBkYXRlPXRoaXMudGhyb3R0bGU/ZnVuY3Rpb24odCxlPTI1MCl7bGV0IGksbixzLG89MCxoPW51bGw7Y29uc3Qgcj0oKT0+e289RGF0ZS5ub3coKSxoPW51bGwsaT10LmFwcGx5KG4scyksaHx8KG49bnVsbCxzPVtdKX07cmV0dXJuIGZ1bmN0aW9uKC4uLmEpe2NvbnN0IGQ9RGF0ZS5ub3coKSxsPWUtKGQtbyk7cmV0dXJuIG49dGhpcyxzPWEsbDw9MHx8bD5lPyhoJiYoY2xlYXJUaW1lb3V0KGgpLGg9bnVsbCksbz1kLGk9dC5hcHBseShuLHMpLGh8fChuPW51bGwscz1bXSkpOmh8fChoPXdpbmRvdy5zZXRUaW1lb3V0KHIsbCkpLGl9fShpLnByb3RvdHlwZS5fc3Ryb2tlVXBkYXRlLHRoaXMudGhyb3R0bGUpOmkucHJvdG90eXBlLl9zdHJva2VVcGRhdGUsdGhpcy5fY3R4PXQuZ2V0Q29udGV4dCgiMmQiKSx0aGlzLmNsZWFyKCksdGhpcy5vbigpfWNsZWFyKCl7Y29uc3R7X2N0eDp0LGNhbnZhczplfT10aGlzO3QuZmlsbFN0eWxlPXRoaXMuYmFja2dyb3VuZENvbG9yLHQuY2xlYXJSZWN0KDAsMCxlLndpZHRoLGUuaGVpZ2h0KSx0LmZpbGxSZWN0KDAsMCxlLndpZHRoLGUuaGVpZ2h0KSx0aGlzLl9kYXRhPVtdLHRoaXMuX3Jlc2V0KCksdGhpcy5faXNFbXB0eT0hMH1mcm9tRGF0YVVSTCh0LGU9e30pe3JldHVybiBuZXcgUHJvbWlzZSgoaSxuKT0+e2NvbnN0IHM9bmV3IEltYWdlLG89ZS5yYXRpb3x8d2luZG93LmRldmljZVBpeGVsUmF0aW98fDEsaD1lLndpZHRofHx0aGlzLmNhbnZhcy53aWR0aC9vLHI9ZS5oZWlnaHR8fHRoaXMuY2FudmFzLmhlaWdodC9vLGE9ZS54T2Zmc2V0fHwwLGQ9ZS55T2Zmc2V0fHwwO3RoaXMuX3Jlc2V0KCkscy5vbmxvYWQ9KCk9Pnt0aGlzLl9jdHguZHJhd0ltYWdlKHMsYSxkLGgsciksaSgpfSxzLm9uZXJyb3I9dD0+e24odCl9LHMuY3Jvc3NPcmlnaW49ImFub255bW91cyIscy5zcmM9dCx0aGlzLl9pc0VtcHR5PSExfSl9dG9EYXRhVVJMKHQ9ImltYWdlL3BuZyIsZSl7c3dpdGNoKHQpe2Nhc2UiaW1hZ2Uvc3ZnK3htbCI6cmV0dXJuIHRoaXMuX3RvU1ZHKCk7ZGVmYXVsdDpyZXR1cm4gdGhpcy5jYW52YXMudG9EYXRhVVJMKHQsZSl9fW9uKCl7dGhpcy5jYW52YXMuc3R5bGUudG91Y2hBY3Rpb249Im5vbmUiLHRoaXMuY2FudmFzLnN0eWxlLm1zVG91Y2hBY3Rpb249Im5vbmUiLHdpbmRvdy5Qb2ludGVyRXZlbnQ/dGhpcy5faGFuZGxlUG9pbnRlckV2ZW50cygpOih0aGlzLl9oYW5kbGVNb3VzZUV2ZW50cygpLCJvbnRvdWNoc3RhcnQiaW4gd2luZG93JiZ0aGlzLl9oYW5kbGVUb3VjaEV2ZW50cygpKX1vZmYoKXt0aGlzLmNhbnZhcy5zdHlsZS50b3VjaEFjdGlvbj0iYXV0byIsdGhpcy5jYW52YXMuc3R5bGUubXNUb3VjaEFjdGlvbj0iYXV0byIsdGhpcy5jYW52YXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigicG9pbnRlcmRvd24iLHRoaXMuX2hhbmRsZVBvaW50ZXJTdGFydCksdGhpcy5jYW52YXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigicG9pbnRlcm1vdmUiLHRoaXMuX2hhbmRsZVBvaW50ZXJNb3ZlKSxkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJwb2ludGVydXAiLHRoaXMuX2hhbmRsZVBvaW50ZXJFbmQpLHRoaXMuY2FudmFzLnJlbW92ZUV2ZW50TGlzdGVuZXIoIm1vdXNlZG93biIsdGhpcy5faGFuZGxlTW91c2VEb3duKSx0aGlzLmNhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKCJtb3VzZW1vdmUiLHRoaXMuX2hhbmRsZU1vdXNlTW92ZSksZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigibW91c2V1cCIsdGhpcy5faGFuZGxlTW91c2VVcCksdGhpcy5jYW52YXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigidG91Y2hzdGFydCIsdGhpcy5faGFuZGxlVG91Y2hTdGFydCksdGhpcy5jYW52YXMucmVtb3ZlRXZlbnRMaXN0ZW5lcigidG91Y2htb3ZlIix0aGlzLl9oYW5kbGVUb3VjaE1vdmUpLHRoaXMuY2FudmFzLnJlbW92ZUV2ZW50TGlzdGVuZXIoInRvdWNoZW5kIix0aGlzLl9oYW5kbGVUb3VjaEVuZCl9aXNFbXB0eSgpe3JldHVybiB0aGlzLl9pc0VtcHR5fWZyb21EYXRhKHQse2NsZWFyOmU9ITB9PXt9KXtlJiZ0aGlzLmNsZWFyKCksdGhpcy5fZnJvbURhdGEodCx0aGlzLl9kcmF3Q3VydmUuYmluZCh0aGlzKSx0aGlzLl9kcmF3RG90LmJpbmQodGhpcykpLHRoaXMuX2RhdGE9ZT90OnRoaXMuX2RhdGEuY29uY2F0KHQpfXRvRGF0YSgpe3JldHVybiB0aGlzLl9kYXRhfV9zdHJva2VCZWdpbih0KXt0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCJiZWdpblN0cm9rZSIse2RldGFpbDp0fSkpO2NvbnN0IGU9e2RvdFNpemU6dGhpcy5kb3RTaXplLG1pbldpZHRoOnRoaXMubWluV2lkdGgsbWF4V2lkdGg6dGhpcy5tYXhXaWR0aCxwZW5Db2xvcjp0aGlzLnBlbkNvbG9yLHBvaW50czpbXX07dGhpcy5fZGF0YS5wdXNoKGUpLHRoaXMuX3Jlc2V0KCksdGhpcy5fc3Ryb2tlVXBkYXRlKHQpfV9zdHJva2VVcGRhdGUodCl7aWYoMD09PXRoaXMuX2RhdGEubGVuZ3RoKXJldHVybiB2b2lkIHRoaXMuX3N0cm9rZUJlZ2luKHQpO3RoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoImJlZm9yZVVwZGF0ZVN0cm9rZSIse2RldGFpbDp0fSkpO2NvbnN0IGU9dC5jbGllbnRYLGk9dC5jbGllbnRZLG49dm9pZCAwIT09dC5wcmVzc3VyZT90LnByZXNzdXJlOnZvaWQgMCE9PXQuZm9yY2U/dC5mb3JjZTowLHM9dGhpcy5fY3JlYXRlUG9pbnQoZSxpLG4pLG89dGhpcy5fZGF0YVt0aGlzLl9kYXRhLmxlbmd0aC0xXSxoPW8ucG9pbnRzLHI9aC5sZW5ndGg+MCYmaFtoLmxlbmd0aC0xXSxhPSEhciYmcy5kaXN0YW5jZVRvKHIpPD10aGlzLm1pbkRpc3RhbmNlLHtwZW5Db2xvcjpkLGRvdFNpemU6bCxtaW5XaWR0aDpjLG1heFdpZHRoOnV9PW87aWYoIXJ8fCFyfHwhYSl7Y29uc3QgdD10aGlzLl9hZGRQb2ludChzKTtyP3QmJnRoaXMuX2RyYXdDdXJ2ZSh0LHtwZW5Db2xvcjpkLGRvdFNpemU6bCxtaW5XaWR0aDpjLG1heFdpZHRoOnV9KTp0aGlzLl9kcmF3RG90KHMse3BlbkNvbG9yOmQsZG90U2l6ZTpsLG1pbldpZHRoOmMsbWF4V2lkdGg6dX0pLGgucHVzaCh7dGltZTpzLnRpbWUseDpzLngseTpzLnkscHJlc3N1cmU6cy5wcmVzc3VyZX0pfXRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoImFmdGVyVXBkYXRlU3Ryb2tlIix7ZGV0YWlsOnR9KSl9X3N0cm9rZUVuZCh0KXt0aGlzLl9zdHJva2VVcGRhdGUodCksdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgiZW5kU3Ryb2tlIix7ZGV0YWlsOnR9KSl9X2hhbmRsZVBvaW50ZXJFdmVudHMoKXt0aGlzLl9kcmF3bmluZ1N0cm9rZT0hMSx0aGlzLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCJwb2ludGVyZG93biIsdGhpcy5faGFuZGxlUG9pbnRlclN0YXJ0KSx0aGlzLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCJwb2ludGVybW92ZSIsdGhpcy5faGFuZGxlUG9pbnRlck1vdmUpLGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoInBvaW50ZXJ1cCIsdGhpcy5faGFuZGxlUG9pbnRlckVuZCl9X2hhbmRsZU1vdXNlRXZlbnRzKCl7dGhpcy5fZHJhd25pbmdTdHJva2U9ITEsdGhpcy5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcigibW91c2Vkb3duIix0aGlzLl9oYW5kbGVNb3VzZURvd24pLHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlbW92ZSIsdGhpcy5faGFuZGxlTW91c2VNb3ZlKSxkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJtb3VzZXVwIix0aGlzLl9oYW5kbGVNb3VzZVVwKX1faGFuZGxlVG91Y2hFdmVudHMoKXt0aGlzLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCJ0b3VjaHN0YXJ0Iix0aGlzLl9oYW5kbGVUb3VjaFN0YXJ0KSx0aGlzLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCJ0b3VjaG1vdmUiLHRoaXMuX2hhbmRsZVRvdWNoTW92ZSksdGhpcy5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcigidG91Y2hlbmQiLHRoaXMuX2hhbmRsZVRvdWNoRW5kKX1fcmVzZXQoKXt0aGlzLl9sYXN0UG9pbnRzPVtdLHRoaXMuX2xhc3RWZWxvY2l0eT0wLHRoaXMuX2xhc3RXaWR0aD0odGhpcy5taW5XaWR0aCt0aGlzLm1heFdpZHRoKS8yLHRoaXMuX2N0eC5maWxsU3R5bGU9dGhpcy5wZW5Db2xvcn1fY3JlYXRlUG9pbnQoZSxpLG4pe2NvbnN0IHM9dGhpcy5jYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7cmV0dXJuIG5ldyB0KGUtcy5sZWZ0LGktcy50b3AsbiwobmV3IERhdGUpLmdldFRpbWUoKSl9X2FkZFBvaW50KHQpe2NvbnN0e19sYXN0UG9pbnRzOml9PXRoaXM7aWYoaS5wdXNoKHQpLGkubGVuZ3RoPjIpezM9PT1pLmxlbmd0aCYmaS51bnNoaWZ0KGlbMF0pO2NvbnN0IHQ9dGhpcy5fY2FsY3VsYXRlQ3VydmVXaWR0aHMoaVsxXSxpWzJdKSxuPWUuZnJvbVBvaW50cyhpLHQpO3JldHVybiBpLnNoaWZ0KCksbn1yZXR1cm4gbnVsbH1fY2FsY3VsYXRlQ3VydmVXaWR0aHModCxlKXtjb25zdCBpPXRoaXMudmVsb2NpdHlGaWx0ZXJXZWlnaHQqZS52ZWxvY2l0eUZyb20odCkrKDEtdGhpcy52ZWxvY2l0eUZpbHRlcldlaWdodCkqdGhpcy5fbGFzdFZlbG9jaXR5LG49dGhpcy5fc3Ryb2tlV2lkdGgoaSkscz17ZW5kOm4sc3RhcnQ6dGhpcy5fbGFzdFdpZHRofTtyZXR1cm4gdGhpcy5fbGFzdFZlbG9jaXR5PWksdGhpcy5fbGFzdFdpZHRoPW4sc31fc3Ryb2tlV2lkdGgodCl7cmV0dXJuIE1hdGgubWF4KHRoaXMubWF4V2lkdGgvKHQrMSksdGhpcy5taW5XaWR0aCl9X2RyYXdDdXJ2ZVNlZ21lbnQodCxlLGkpe2NvbnN0IG49dGhpcy5fY3R4O24ubW92ZVRvKHQsZSksbi5hcmModCxlLGksMCwyKk1hdGguUEksITEpLHRoaXMuX2lzRW1wdHk9ITF9X2RyYXdDdXJ2ZSh0LGUpe2NvbnN0IGk9dGhpcy5fY3R4LG49dC5lbmRXaWR0aC10LnN0YXJ0V2lkdGgscz0yKk1hdGguY2VpbCh0Lmxlbmd0aCgpKTtpLmJlZ2luUGF0aCgpLGkuZmlsbFN0eWxlPWUucGVuQ29sb3I7Zm9yKGxldCBpPTA7aTxzO2krPTEpe2NvbnN0IG89aS9zLGg9bypvLHI9aCpvLGE9MS1vLGQ9YSphLGw9ZCphO2xldCBjPWwqdC5zdGFydFBvaW50Lng7Yys9MypkKm8qdC5jb250cm9sMS54LGMrPTMqYSpoKnQuY29udHJvbDIueCxjKz1yKnQuZW5kUG9pbnQueDtsZXQgdT1sKnQuc3RhcnRQb2ludC55O3UrPTMqZCpvKnQuY29udHJvbDEueSx1Kz0zKmEqaCp0LmNvbnRyb2wyLnksdSs9cip0LmVuZFBvaW50Lnk7Y29uc3Qgdj1NYXRoLm1pbih0LnN0YXJ0V2lkdGgrcipuLGUubWF4V2lkdGgpO3RoaXMuX2RyYXdDdXJ2ZVNlZ21lbnQoYyx1LHYpfWkuY2xvc2VQYXRoKCksaS5maWxsKCl9X2RyYXdEb3QodCxlKXtjb25zdCBpPXRoaXMuX2N0eCxuPWUuZG90U2l6ZT4wP2UuZG90U2l6ZTooZS5taW5XaWR0aCtlLm1heFdpZHRoKS8yO2kuYmVnaW5QYXRoKCksdGhpcy5fZHJhd0N1cnZlU2VnbWVudCh0LngsdC55LG4pLGkuY2xvc2VQYXRoKCksaS5maWxsU3R5bGU9ZS5wZW5Db2xvcixpLmZpbGwoKX1fZnJvbURhdGEoZSxpLG4pe2Zvcihjb25zdCBzIG9mIGUpe2NvbnN0e3BlbkNvbG9yOmUsZG90U2l6ZTpvLG1pbldpZHRoOmgsbWF4V2lkdGg6cixwb2ludHM6YX09cztpZihhLmxlbmd0aD4xKWZvcihsZXQgbj0wO248YS5sZW5ndGg7bis9MSl7Y29uc3Qgcz1hW25dLGQ9bmV3IHQocy54LHMueSxzLnByZXNzdXJlLHMudGltZSk7dGhpcy5wZW5Db2xvcj1lLDA9PT1uJiZ0aGlzLl9yZXNldCgpO2NvbnN0IGw9dGhpcy5fYWRkUG9pbnQoZCk7bCYmaShsLHtwZW5Db2xvcjplLGRvdFNpemU6byxtaW5XaWR0aDpoLG1heFdpZHRoOnJ9KX1lbHNlIHRoaXMuX3Jlc2V0KCksbihhWzBdLHtwZW5Db2xvcjplLGRvdFNpemU6byxtaW5XaWR0aDpoLG1heFdpZHRoOnJ9KX19X3RvU1ZHKCl7Y29uc3QgdD10aGlzLl9kYXRhLGU9TWF0aC5tYXgod2luZG93LmRldmljZVBpeGVsUmF0aW98fDEsMSksaT10aGlzLmNhbnZhcy53aWR0aC9lLG49dGhpcy5jYW52YXMuaGVpZ2h0L2Uscz1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiwic3ZnIik7cy5zZXRBdHRyaWJ1dGUoIndpZHRoIix0aGlzLmNhbnZhcy53aWR0aC50b1N0cmluZygpKSxzLnNldEF0dHJpYnV0ZSgiaGVpZ2h0Iix0aGlzLmNhbnZhcy5oZWlnaHQudG9TdHJpbmcoKSksdGhpcy5fZnJvbURhdGEodCwodCx7cGVuQ29sb3I6ZX0pPT57Y29uc3QgaT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJwYXRoIik7aWYoIShpc05hTih0LmNvbnRyb2wxLngpfHxpc05hTih0LmNvbnRyb2wxLnkpfHxpc05hTih0LmNvbnRyb2wyLngpfHxpc05hTih0LmNvbnRyb2wyLnkpKSl7Y29uc3Qgbj1gTSAke3Quc3RhcnRQb2ludC54LnRvRml4ZWQoMyl9LCR7dC5zdGFydFBvaW50LnkudG9GaXhlZCgzKX0gQyAke3QuY29udHJvbDEueC50b0ZpeGVkKDMpfSwke3QuY29udHJvbDEueS50b0ZpeGVkKDMpfSAke3QuY29udHJvbDIueC50b0ZpeGVkKDMpfSwke3QuY29udHJvbDIueS50b0ZpeGVkKDMpfSAke3QuZW5kUG9pbnQueC50b0ZpeGVkKDMpfSwke3QuZW5kUG9pbnQueS50b0ZpeGVkKDMpfWA7aS5zZXRBdHRyaWJ1dGUoImQiLG4pLGkuc2V0QXR0cmlidXRlKCJzdHJva2Utd2lkdGgiLCgyLjI1KnQuZW5kV2lkdGgpLnRvRml4ZWQoMykpLGkuc2V0QXR0cmlidXRlKCJzdHJva2UiLGUpLGkuc2V0QXR0cmlidXRlKCJmaWxsIiwibm9uZSIpLGkuc2V0QXR0cmlidXRlKCJzdHJva2UtbGluZWNhcCIsInJvdW5kIikscy5hcHBlbmRDaGlsZChpKX19LCh0LHtwZW5Db2xvcjplLGRvdFNpemU6aSxtaW5XaWR0aDpuLG1heFdpZHRoOm99KT0+e2NvbnN0IGg9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2lyY2xlIikscj1pPjA/aToobitvKS8yO2guc2V0QXR0cmlidXRlKCJyIixyLnRvU3RyaW5nKCkpLGguc2V0QXR0cmlidXRlKCJjeCIsdC54LnRvU3RyaW5nKCkpLGguc2V0QXR0cmlidXRlKCJjeSIsdC55LnRvU3RyaW5nKCkpLGguc2V0QXR0cmlidXRlKCJmaWxsIixlKSxzLmFwcGVuZENoaWxkKGgpfSk7Y29uc3Qgbz1gPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2aWV3Qm94PSIwIDAgJHt0aGlzLmNhbnZhcy53aWR0aH0gJHt0aGlzLmNhbnZhcy5oZWlnaHR9IiB3aWR0aD0iJHtpfSIgaGVpZ2h0PSIke259Ij5gO2xldCBoPXMuaW5uZXJIVE1MO2lmKHZvaWQgMD09PWgpe2NvbnN0IHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZHVtbXkiKSxlPXMuY2hpbGROb2Rlczt0LmlubmVySFRNTD0iIjtmb3IobGV0IGk9MDtpPGUubGVuZ3RoO2krPTEpdC5hcHBlbmRDaGlsZChlW2ldLmNsb25lTm9kZSghMCkpO2g9dC5pbm5lckhUTUx9cmV0dXJuImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsIitidG9hKG8raCsiPC9zdmc+Iil9fXJldHVybiBpfSkpOwovLyMgc291cmNlTWFwcGluZ1VSTD1zaWduYXR1cmVfcGFkLnVtZC5taW4uanMubWFwCg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPBody>
        <HTTPPropertySet>
          <HTTPProperty name="StreamID">3</HTTPProperty>
          <HTTPProperty name="TotalHeadersSize">135</HTTPProperty>
        </HTTPPropertySet>
      </HTTPResponse>
    </HTTPTask>
    <HTTPTask id="13" hostname="dev.bluealgo.com" path="/smartformup/ui/loadForm.js" url="https://dev.bluealgo.com/smartformup/ui/loadForm.js" ip="144.126.253.3" port="443" client_ip="192.168.0.112" client_port="64262" connectionId="2220" origin="HTML" encodingType="ANSI" ordinal="9" startDateTime="2024-02-16T16:37:19.909+05:30" startTime="2780" endTime="3257" blockedTime="-1" dnsTime="-1" connectTime="-2" sendTime="4294967295" waitTime="4294967295" receiveTime="283" sslNegotiateTime="-1" responseBodySize="178314">
      <HTTPRequest method="GET">
        <HTTPHeaders>
          <HTTPHeaderEntity name=":method" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0VU</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name=":scheme" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cHM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name=":path" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>L3NtYXJ0Zm9ybXVwL3VpL2xvYWRGb3JtLmpz</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name=":authority" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZGV2LmJsdWVhbGdvLmNvbQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Referer" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cHM6Ly9kZXYuYmx1ZWFsZ28uY29tL3NtYXJ0Zm9ybXVwL2xvYWRpbmRleD9vcHBvcnR1bml0eUlkPTAwNjBvMDAwMDFlU0lKMEFBTyZjdXN0b21lcmlkPWN1c3QxMDA1JmFjY2Vzc3Rva2VuPVJGcFNRVlVJZ2Q0WV9vWU5MODFuYUV4VkxBWWdLUXQ3</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Language" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZW4tVVMsZW47cT0wLjk=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="User-Agent" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEyMS4wLjAuMCBTYWZhcmkvNTM3LjM2</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Encoding" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ki8q</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="cookie" index="9">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SlNFU1NJT05JRD1COEI5REUyNDA1ODE3RDYwMjlFQzM0QzA3NDlEQjJFRg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Om1ldGhvZDogR0VUDQo6c2NoZW1lOiBodHRwcw0KOnBhdGg6IC9zbWFydGZvcm11cC91aS9sb2FkRm9ybS5qcw0KOmF1dGhvcml0eTogZGV2LmJsdWVhbGdvLmNvbQ0KUmVmZXJlcjogaHR0cHM6Ly9kZXYuYmx1ZWFsZ28uY29tL3NtYXJ0Zm9ybXVwL2xvYWRpbmRleD9vcHBvcnR1bml0eUlkPTAwNjBvMDAwMDFlU0lKMEFBTyZjdXN0b21lcmlkPWN1c3QxMDA1JmFjY2Vzc3Rva2VuPVJGcFNRVlVJZ2Q0WV9vWU5MODFuYUV4VkxBWWdLUXQ3DQpBY2NlcHQtTGFuZ3VhZ2U6IGVuLVVTLGVuO3E9MC45DQpVc2VyLUFnZW50OiBNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvMTIxLjAuMC4wIFNhZmFyaS81MzcuMzYNCkFjY2VwdC1FbmNvZGluZzogZ3ppcCwgZGVmbGF0ZQ0KQWNjZXB0OiAqLyoNCmNvb2tpZTogSlNFU1NJT05JRD1COEI5REUyNDA1ODE3RDYwMjlFQzM0QzA3NDlEQjJFRg0KDQo=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
          <HTTPCookies>
            <HTTPHeaderEntity name="JSESSIONID" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>QjhCOURFMjQwNTgxN0Q2MDI5RUMzNEMwNzQ5REIyRUY=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
          </HTTPCookies>
        </HTTPHeaders>
        <HTTPPropertySet>
          <HTTPProperty name="StreamID">11</HTTPProperty>
          <HTTPProperty name="TotalHeadersSize">36</HTTPProperty>
        </HTTPPropertySet>
      </HTTPRequest>
      <HTTPResponse>
        <contentLenght>180665</contentLenght>
        <HTTPHeaders>
          <HTTPHeaderEntity name="Status" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MjAw</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="date" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>RnJpLCAxNiBGZWIgMjAyNCAxMTowNzoxOSBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="content-type" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>YXBwbGljYXRpb24vamF2YXNjcmlwdA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="content-length" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MTgwNjY1</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="access-control-allow-origin" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Kg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="accept-ranges" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ynl0ZXM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="etag" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Vy8iMTgwNjY1LTE3MDU2MTMyOTQwMDAi</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="last-modified" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VGh1LCAxOCBKYW4gMjAyNCAyMToyODoxNCBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="strict-transport-security" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bWF4LWFnZT0xNTcyNDgwMDsgaW5jbHVkZVN1YkRvbWFpbnM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SFRUUC8yLjAgMjAwDQpTdGF0dXM6IDIwMA0KZGF0ZTogRnJpLCAxNiBGZWIgMjAyNCAxMTowNzoxOSBHTVQNCmNvbnRlbnQtdHlwZTogYXBwbGljYXRpb24vamF2YXNjcmlwdA0KY29udGVudC1sZW5ndGg6IDE4MDY2NQ0KYWNjZXNzLWNvbnRyb2wtYWxsb3ctb3JpZ2luOiAqDQphY2NlcHQtcmFuZ2VzOiBieXRlcw0KZXRhZzogVy8iMTgwNjY1LTE3MDU2MTMyOTQwMDAiDQpsYXN0LW1vZGlmaWVkOiBUaHUsIDE4IEphbiAyMDI0IDIxOjI4OjE0IEdNVA0Kc3RyaWN0LXRyYW5zcG9ydC1zZWN1cml0eTogbWF4LWFnZT0xNTcyNDgwMDsgaW5jbHVkZVN1YkRvbWFpbnMNCg0K</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPBody>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ly8gSW4gdGhpcyB2ZXJzaW9uIHRoZSAKCgpmdW5jdGlvbiByZW5kZXJBbGwoKSB7CgoJY29uc3QgbXlwcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewoJCXRyeSB7CgkJCWNvbnN0IHVybHMgPSBuZXcgVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmKTsKCQkJY29uc3Qgc2VhcmNoUGFyYW1zID0gdXJscy5zZWFyY2hQYXJhbXM7CgkJCWNvbnN0IG9wb3J0SWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgib3Bwb3J0dW5pdHlwYXNzIik7CgkJCWNvbnN0IHByb2plY3RpZEVsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwcm9qZWN0aWQiKTsKCgkJCW9wb3J0SWQudmFsdWUgPSBzZWFyY2hQYXJhbXMuZ2V0KCJvcHBvcnR1bml0eUlkIik7CgkJCXByb2plY3RpZEVsZS52YWx1ZSA9IHNlYXJjaFBhcmFtcy5nZXQoImN1c3RvbWVyaWQiKTsKCQkJLy8gY29uc3QgY2hlY2tCb3hUZXh0cyA9ICB7CgkJCS8vICAgcGFnZV90d286ICdJL1dlLCBoZXJlYnkgZGVjbGFyZSB0aGF0IHRoZSBLWUMgZG9jdW1lbnRzIHVwbG9hZGVkIGFyZSBnZW51aW5lIGFuZCBhdXRoZW50aWMuJywKCQkJLy8gICBwYWdlX2ZvdXI6ICdJL1dlIGFja25vd2xlZGdlIHRoYXQgd2UgaGF2ZSByZWFkIHRoZSBhYm92ZSBpbmZvcm1hdGlvbiBhbmQgYWdyZWUgdG8gcHJvY2VlZCBhY2NvcmRpbmdseS4nLAoJCQkvLyAgIHBhZ2VfZml2ZTogJ0kvV2UsIHByb3ZpZGUgY29uc2VudCB0byBwcm9jZWVkIHdpdGggdGhlIGFib3ZlIG1lbnRpb25lZCBjaGFubmVsIHBhcnRuZXIgZm9yIHRoZSBib29raW5nLicsCgkJCS8vICAgY29tbW9uOiAnSS9XZSwgY29uZmlybSB0aGF0IHRoZSBpbmZvcm1hdGlvbiBwcm92aWRlZCBieSBtZSBpcyBhY2N1cmF0ZSB0byB0aGUgYmVzdCBvZiBteS9vdXIga25vd2xlZGdlLicsCgkJCS8vICAgdGVybXM6ICdJL1dlIGFja25vd2xlZGdlIHRoYXQgd2UgaGF2ZSByZWFkIHRoZSBhYm92ZSB0ZXJtcyAmIGNvbmRpdGlvbnMgYW5kIGFncmVlIHRvIHByb2NlZWQgYWNjb3JkaW5nbHkuJywKCQkJLy8gICBwYWdlX25pbmU6ICdJL1dlLCBoYXZlIHJlYWQgYWxsIHRoZSB0ZXJtcyBhbmQgY29uZGl0aW9ucyBhbmQgYnkgZS1zaWduaW5nL3N1Ym1pdHRpbmcgdGhlIGRvY3VtZW50IGFncmVlIHRoYXQgYWxsIHRoZSBpbmZvcm1hdGlvbiBpbiB0aGUgZW50aXJldHkgb2YgdGhlIGRvY3VtZW50LCBhcyB2aXNpYmxlIGluIHRoZSBwcmV2aWV3LCBpcyBhY2N1cmF0ZS4nCgkJCS8vIH0KCgkJCWNvbnN0IHJlcXVlc3RPcHRpb25zID0gewoJCQkJbWV0aG9kOiAiUE9TVCIsCgkJCQlyZWRpcmVjdDogImZvbGxvdyIsCgkJCQlib2R5OiB7fSwKCQkJfTsKCgkJCWNvbnN0IG15RG9jdW1lbnRzID0ge307CgkJCS8vIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJteWRvY3VtZW50IiwgSlNPTi5zdHJpbmdpZnkobXlEb2N1bWVudHMpKTsKCQkJbXlkb2N1bWVudCA9IEpTT04uc3RyaW5naWZ5KG15RG9jdW1lbnRzKTsKCgkJCWZldGNoKHVzZXJGb3JtVVJsLCByZXF1ZXN0T3B0aW9ucykKCQkJCS50aGVuKChyZXNwb25zZSkgPT4gcmVzcG9uc2UuanNvbigpKQoJCQkJLnRoZW4oKGpzb24pID0+IHsKCQkJCQlzY2hlbWEgPSBqc29uOwoJCQkJCWxldCBwYWdlID0gMDsKCQkJCQlsZXQgY2hlY2tUZXh0ID0gc2NoZW1hWyJmaXJzdC1wYWdlIl1bIm90aGVyIl07CgoJCQkJCWNvbnN0IGtleXMgPSBbImZpcnN0LXBhZ2UiLCAiaWRlbnRpZmljYXRpb24iLCAiYXBwbGljYW50LWRldGFpbHMiLCAiYW5leHVyZS1hIiwgImJvb2tpbmctc291cmNlIiwgInNlbGYtZGVjbGFyYXRpb24iLCAidGVybXMtYW5kLWNvbmRpdGlvbnMiLCAiY2hlY2stbGlzdC1kb2N1bWVudHMiXTsKCQkJCQlteWd0Y25kZXRhaWxzID0gSlNPTi5wYXJzZSgKCQkJCQkJSlNPTi5zdHJpbmdpZnkoc2NoZW1hWyJ0ZXJtcy1hbmQtY29uZGl0aW9ucyJdKQoJCQkJCSk7CgoKCgkJCQkJY29uc3QgY3RuID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpOwoJCQkJCWZvciAoY29uc3Qga2V5IG9mIGtleXMpIHsKCQkJCQkJaWYgKGtleSA9PT0gImZpcnN0LXBhZ2UiKSB7CgkJCQkJCQkrK3BhZ2U7CgoJCQkJCQkJY29uc3QgcGFnZWxpc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCQkJCQkJCXBhZ2VsaXN0LnNldEF0dHJpYnV0ZSgiaWQiLCBgcGFnZS0xYCk7CgkJCQkJCQljb25zdCBpbm5lckNvbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCQkJCQkJCWlubmVyQ29udC5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgImhvbWVfY29udGFpbmVyIik7CgkJCQkJCQljb25zdCBpbnB1dEdycCA9IGNyZWF0ZUlucHV0R3JwKHNjaGVtYVtrZXldWyJmb3JtIl0pOwoJCQkJCQkJaW5wdXRHcnAuY2xhc3NMaXN0LmFkZCgicGFnZS0xLWZvcm0iKTsKCgkJCQkJCQljb25zdCBmY3RuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgkJCQkJCQlmY3RuLmNsYXNzTGlzdC5hZGQoInBhZ2UtMS1mb3JtLWN0biIpOwoKCQkJCQkJCWlucHV0R3JwCgkJCQkJCQkJLnF1ZXJ5U2VsZWN0b3JBbGwoImlucHV0LCB0ZXh0YXJlYSwgc2VsZWN0IikKCQkJCQkJCQkuZm9yRWFjaCgoZSkgPT4gewoJCQkJCQkJCQlpZiAoIWUuY2xhc3NMaXN0LmNvbnRhaW5zKCJub3RfZWRpdGFibGUiKSkgewoJCQkJCQkJCQkJZS5yZW1vdmVBdHRyaWJ1dGUoImRpc2FibGVkIik7CgkJCQkJCQkJCX0KCQkJCQkJCQl9KTsKCgkJCQkJCQlmY3RuLmFwcGVuZChpbnB1dEdycCk7CgoJCQkJCQkJY29uc3QgbmV3X2FkZGZvcm1saXN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgkJCQkJCQluZXdfYWRkZm9ybWxpc3Quc2V0QXR0cmlidXRlKCJpZCIsICJuZXdfYWRkZm9ybWxpc3QiKTsKCQkJCQkJCXZhciBjdXJyZW50X2FwcGxpY2FudCA9IDE7CgkJCQkJCQljb25zdCBhcHBfZGV0aWFscyA9IHNjaGVtYVsiZmlyc3QtcGFnZSJdWyJhcHBsaWNhbnRfZGV0YWlscyJdOwoKCQkJCQkJCWlmIChhcHBfZGV0aWFscy5sZW5ndGggPiAwKSB7CgkJCQkJCQkJZm9yIChsZXQgaSA9IDA7IGkgPCBhcHBfZGV0aWFscy5sZW5ndGg7IGkrKykgewoJCQkJCQkJCQljb25zdCBhcGN0X2xpc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCQkJCQkJCQkJYXBjdF9saXN0LnNldEF0dHJpYnV0ZSgiY2xhc3MiLCBgYXBjdF90eXBlX2RpdmApOwoKCQkJCQkJCQkJY29uc3QgbGFiZWxFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKTsKCQkJCQkJCQkJbGFiZWxFbC5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgImFwY3RfdHlwZV9sYWJsZSIpOwoJCQkJCQkJCQlsYWJlbEVsLmlubmVySFRNTCA9CgkJCQkJCQkJCQljdXJyZW50X2FwcGxpY2FudCA9PT0gMQoJCQkJCQkJCQkJCT8gIlByaW1hcnkgQXBwbGljYW50IgoJCQkJCQkJCQkJCTogYCR7cGFnZUluZm9bY3VycmVudF9hcHBsaWNhbnQgLSAyXX1gOwoKCQkJCQkJCQkJY29uc3QgYXB0X3R5cGUgPSBhcHBfZGV0aWFsc1tpXVsiQXBwbGljYW50X1R5cGUiXTsKCQkJCQkJCQkJY29uc3Qgc2VsZWN0X2VsZSA9IEFwcGxpY2FudENvbXAoCgkJCQkJCQkJCQlgYXBwbGljYW50XyR7Y3VycmVudF9hcHBsaWNhbnR9YCwKCQkJCQkJCQkJCWFwdF90eXBlCgkJCQkJCQkJCSk7CgoJCQkJCQkJCQlhcGN0X2xpc3QuYXBwZW5kQ2hpbGQobGFiZWxFbCk7CgkJCQkJCQkJCWFwY3RfbGlzdC5hcHBlbmRDaGlsZChzZWxlY3RfZWxlKTsKCgkJCQkJCQkJCWlmIChpID09PSBhcHBfZGV0aWFscy5sZW5ndGggLSAxKSB7CgkJCQkJCQkJCQljb25zdCBwbG1lbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCQkJCQkJCQkJCXBsbWVsZS5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgInBsbWZsZXhfaWNvbiIpOwoKCQkJCQkJCQkJCWxldCBwbHVzSWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKTsKCQkJCQkJCQkJCXBsdXNJY29uLnNldEF0dHJpYnV0ZSgiY2xhc3MiLCAibXlfdHlwZV9wbHVzIik7CgkJCQkJCQkJCQlwbHVzSWNvbi5pbm5lckhUTUwgPSAiKyI7CgoJCQkJCQkJCQkJcGx1c0ljb24gPSBBcHBQbHVzYXBwbGljYW50KHBsdXNJY29uLCBjdXJyZW50X2FwcGxpY2FudCk7CgkJCQkJCQkJCQlwbG1lbGUuYXBwZW5kQ2hpbGQocGx1c0ljb24pOwoJCQkJCQkJCQkJYXBjdF9saXN0LmFwcGVuZENoaWxkKHBsbWVsZSk7CgkJCQkJCQkJCX0KCgkJCQkJCQkJCW5ld19hZGRmb3JtbGlzdC5hcHBlbmQoYXBjdF9saXN0KTsKCQkJCQkJCQkJZmN0bi5hcHBlbmQobmV3X2FkZGZvcm1saXN0KTsKCQkJCQkJCQkJY3VycmVudF9hcHBsaWNhbnQrKzsKCQkJCQkJCQl9CgkJCQkJCQl9CgoJCQkJCQkJY29uc3QgaW1nID0gc2NoZW1hW2tleV1bImltYWdlIl07CgkJCQkJCQlpZiAoaW1nKSB7CgkJCQkJCQkJY29uc3QgbXlpbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwoJCQkJCQkJCW15aW1hZ2Uuc2V0QXR0cmlidXRlKCJjbGFzcyIsICJjb25fZGlzcGxheWltYWdlIik7CgkJCQkJCQkJY29uc3QgaW1nRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbWciKTsKCQkJCQkJCQlpbWdFbC5zcmMgPSBpbWcuc3JjOwoJCQkJCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwYW5uZWwtbG9nbyIpLnNyYyA9IGltZy5zcmM7CgkJCQkJCQkJaWYgKGltZy5pZCkgewoJCQkJCQkJCQlpbWdFbC5zZXRBdHRyaWJ1dGUoImlkIiwgaW1nLmlkKTsKCQkJCQkJCQl9CgkJCQkJCQkJbXlpbWFnZS5hcHBlbmRDaGlsZChpbWdFbCk7CgoJCQkJCQkJCWlubmVyQ29udC5hcHBlbmQobXlpbWFnZSk7CgkJCQkJCQl9CgkJCQkJCQlpbm5lckNvbnQuYXBwZW5kKGZjdG4pOwoJCQkJCQkJcGFnZWxpc3QuYXBwZW5kKGlubmVyQ29udCk7CgkJCQkJCQljdG4uYXBwZW5kKHBhZ2VsaXN0KTsKCgkJCQkJCQljb250aW51ZTsKCQkJCQkJfQoKCQkJCQkJaWYgKGtleSA9PT0gImlkZW50aWZpY2F0aW9uIikgewoJCQkJCQkJKytwYWdlOwoJCQkJCQkJY29uc3QgcGFnZUN0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwoJCQkJCQkJcGFnZUN0bi5zZXRBdHRyaWJ1dGUoImlkIiwgYHBhZ2UtJHtwYWdlfWApOwoJCQkJCQkJcGFnZUN0bi5jbGFzc0xpc3QuYWRkKCJoaWRkZW4iKTsKCQkJCQkJCWN0bi5hcHBlbmQocGFnZUN0bik7CgkJCQkJCQljb250aW51ZTsKCQkJCQkJfQoKCQkJCQkJaWYgKGtleSA9PT0gImFwcGxpY2FudC1kZXRhaWxzIikgewoJCQkJCQkJKytwYWdlOwoJCQkJCQkJY29uc3QgbXlzZWMgPSBzY2hlbWFbImFwcGxpY2FudC1kZXRhaWxzIl07CgkJCQkJCQljb25zdCBwYWdlQ3RuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgkJCQkJCQlwYWdlQ3RuLnNldEF0dHJpYnV0ZSgiaWQiLCBgcGFnZS0ke3BhZ2V9YCk7CgoJCQkJCQkJcGFnZUN0bi5jbGFzc0xpc3QuYWRkKCJoaWRkZW4iKTsKCQkJCQkJCWN0bi5hcHBlbmQocGFnZUN0bik7CgoKCQkJCQkJCS8vICsrcGFnZTsKCgkJCQkJCQkvLyBjb25zdCBwYWdlQ3RuQWxsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgkJCQkJCQkvLyBwYWdlQ3RuQWxsLnNldEF0dHJpYnV0ZSgiaWQiLCBgcGFnZS0ke3BhZ2V9YCk7CgkJCQkJCQkvLyBwYWdlQ3RuQWxsLmNsYXNzTGlzdC5hZGQoImhpZGRlbiIpOwoJCQkJCQkJLy8gcGFnZUN0bkFsbC5hcHBlbmQocmVuZGVyYWxsQWJvdXRTZWN0aW9uKHNjaGVtYVtrZXldKSk7CgoJCQkJCQkJLy8gY3RuLmFwcGVuZChwYWdlQ3RuLCBwYWdlQ3RuQWxsKTsKCQkJCQkJCWNvbnRpbnVlOwoJCQkJCQl9CgoJCQkJCQljb25zdCBwZXJQYWdlID0gc2NoZW1hW2tleV1bInBlci1wYWdlIl07CgoJCQkJCQlpZiAocGVyUGFnZSkgewoJCQkJCQkJY29uc3Qgcm91bmRzID0gTWF0aC5jZWlsKAoJCQkJCQkJCXNjaGVtYVtrZXldWyJzdWItc2VjdGlvbnMiXS5sZW5ndGggLyBwZXJQYWdlCgkJCQkJCQkpOwoJCQkJCQkJZm9yIChsZXQgaSA9IDA7IGkgPCByb3VuZHM7IGkrKykgewoJCQkJCQkJCXBhZ2UrKzsKCQkJCQkJCQljb25zdCBwYWdlQ3RuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgkJCQkJCQkJcGFnZUN0bi5zZXRBdHRyaWJ1dGUoImlkIiwgYHBhZ2UtJHtwYWdlfWApOwoJCQkJCQkJCXBhZ2VDdG4uY2xhc3NMaXN0LmFkZCgiaGlkZGVuIik7CgkJCQkJCQkJcGFnZUN0bi5hcHBlbmQoCgkJCQkJCQkJCXJlbmRlclNlY3Rpb24oewoJCQkJCQkJCQkJLi4uc2NoZW1hW2tleV0sCgkJCQkJCQkJCQkic3ViLXNlY3Rpb25zIjogc2NoZW1hW2tleV1bInN1Yi1zZWN0aW9ucyJdLnNwbGljZSgKCQkJCQkJCQkJCQkwLAoJCQkJCQkJCQkJCXBlclBhZ2UKCQkJCQkJCQkJCSksCgkJCQkJCQkJCQloZWFkaW5nOiBpID09IDAgPyBzY2hlbWFba2V5XVsiaGVhZGluZyJdIDogIiIsCgkJCQkJCQkJCX0pCgkJCQkJCQkJKTsKCQkJCQkJCQlpZiAoY2hlY2tUZXh0KSB7CgkJCQkJCQkJCXBhZ2VDdG4uYXBwZW5kKAoJCQkJCQkJCQkJYWNrbm9sZWRnZUNoZWNrKGNoZWNrQm94VGV4dHMudGVybXMsIGBhcHB0bmNfYWdncmVfJHtwYWdlfWApCgkJCQkJCQkJCSk7CgkJCQkJCQkJfQoJCQkJCQkJCWN0bi5hcHBlbmQocGFnZUN0bik7CgkJCQkJCQl9CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQlwYWdlKys7CgkJCQkJCQljb25zdCBwYWdlQ3RuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgkJCQkJCQlwYWdlQ3RuLnNldEF0dHJpYnV0ZSgiaWQiLCBgcGFnZS0ke3BhZ2V9YCk7CgkJCQkJCQlwYWdlQ3RuLmNsYXNzTGlzdC5hZGQoImhpZGRlbiIpOwoJCQkJCQkJcGFnZUN0bi5hcHBlbmQocmVuZGVyU2VjdGlvbihzY2hlbWFba2V5XSkpOwoJCQkJCQkJaWYgKGNoZWNrVGV4dCkgewoKCgkJCQkJCQkJaWYgKHBhZ2UgPT0gMTEpIHsKCQkJCQkJCQkJcGFnZUN0bi5hcHBlbmQoCgkJCQkJCQkJCQlhY2tub2xlZGdlQ2hlY2soY2hlY2tCb3hUZXh0cy5wYWdlX25pbmUsIGBhcHB0bmNfYWdncmVfJHtwYWdlfWApCgkJCQkJCQkJCSk7CgkJCQkJCQkJfSBlbHNlIGlmIChwYWdlID09PSA0KSB7CgkJCQkJCQkJCXBhZ2VDdG4uYXBwZW5kKAoJCQkJCQkJCQkJYWNrbm9sZWRnZUNoZWNrKGNoZWNrQm94VGV4dHMucGFnZV9mb3VyLCBgYXBwdG5jX2FnZ3JlXyR7cGFnZX1gKQoJCQkJCQkJCQkpOwoJCQkJCQkJCX0gZWxzZSBpZiAocGFnZSA9PT0gNSkgewoJCQkJCQkJCQljb25zdCBib29raW5nU3JjVHlwZSA9IHNjaGVtYVsnYm9va2luZy1zb3VyY2UnXVsnZm9ybSddWzBdWydkZWZhdWx0VmFsdWUnXTsKCQkJCQkJCQkJaWYgKGJvb2tpbmdTcmNUeXBlID09PSAnQ2hhbm5lbCBQYXJ0bmVyJykgewoJCQkJCQkJCQkJcGFnZUN0bi5hcHBlbmQoCgkJCQkJCQkJCQkJYWNrbm9sZWRnZUNoZWNrKGNoZWNrQm94VGV4dHMucGFnZV9maXZlLCBgYXBwdG5jX2FnZ3JlXyR7cGFnZX1gKQoJCQkJCQkJCQkJKTsKCQkJCQkJCQkJfQoJCQkJCQkJCQllbHNlIHsKCQkJCQkJCQkJCXBhZ2VDdG4uYXBwZW5kKAoJCQkJCQkJCQkJCWFja25vbGVkZ2VDaGVjayhjaGVja0JveFRleHRzLnBhZ2VfZml2ZV9jdXN0b20sIGBhcHB0bmNfYWdncmVfJHtwYWdlfWApCgkJCQkJCQkJCQkpOwoJCQkJCQkJCQl9CgkJCQkJCQkJfSBlbHNlIGlmIChwYWdlID09PSA4KSB7CgkJCQkJCQkJCXBhZ2VDdG4uYXBwZW5kKAoJCQkJCQkJCQkJYWNrbm9sZWRnZUNoZWNrKGNoZWNrQm94VGV4dHMucGFnZV9maXZlX2N1c3RvbSwgYGFwcHRuY19hZ2dyZV8ke3BhZ2V9YCkKCQkJCQkJCQkJKTsKCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQlwYWdlQ3RuLmFwcGVuZCgKCQkJCQkJCQkJCWFja25vbGVkZ2VDaGVjayhjaGVja1RleHQudGV4dCwgYGFwcHRuY19hZ2dyZV8ke3BhZ2V9YCkKCQkJCQkJCQkJKTsKCQkJCQkJCQl9CgkJCQkJCQl9CgkJCQkJCQlpZiAoa2V5ID09PSAnYm9va2luZy1zb3VyY2UnKSB7CgoJCQkJCQkJCSsrcGFnZTsKCgkJCQkJCQkJbGV0IGJvb2tBbXQgPSBzY2hlbWFbJ2FuZXh1cmUtYSddOwoKCQkJCQkJCQlib29rQW10WydzdWItc2VjdGlvbnMnXVtib29rQW10WydzdWItc2VjdGlvbnMnXS5sZW5ndGggLSAxXVsnc3ViLWhlYWRpbmcnXSA9ICdCT09LSU5HIEFNT1VOVCc7CgkJCQkJCQkJYm9va0FtdFsnc3ViLXNlY3Rpb25zJ11bYm9va0FtdFsnc3ViLXNlY3Rpb25zJ10ubGVuZ3RoIC0gMV0/LmZvcm0/Lm1hcCgodikgPT4geyBkZWxldGUgdi5kaXNhYmxlZDsgcmV0dXJuIHsgLi4udiB9IH0pCgkJCQkJCQkJY29uc3QgcGFnZUN0bkFsbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwoJCQkJCQkJCXBhZ2VDdG5BbGwuc2V0QXR0cmlidXRlKCJpZCIsIGBwYWdlLSR7cGFnZX1gKTsKCQkJCQkJCQlwYWdlQ3RuQWxsLmNsYXNzTGlzdC5hZGQoImhpZGRlbiIpOwoJCQkJCQkJCXBhZ2VDdG5BbGwuYXBwZW5kKHJlbmRlcmJvb2tpbmdBbW91bnRTZWN0aW9uKGJvb2tBbXQpKTsKCQkJCQkJCQlpZiAoY2hlY2tUZXh0KSB7CgkJCQkJCQkJCXBhZ2VDdG5BbGwuYXBwZW5kKAoJCQkJCQkJCQkJYWNrbm9sZWRnZUNoZWNrKGNoZWNrQm94VGV4dHMuY29tbW9uLCBgYXBwdG5jX2FnZ3JlXyR7cGFnZX1gKQoJCQkJCQkJCQkpOwoJCQkJCQkJCX0KCQkJCQkJCQkrK3BhZ2U7CgkJCQkJCQkJY29uc3QgcGFnZUN0bkFsbDIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCQkJCQkJCQlwYWdlQ3RuQWxsMi5zZXRBdHRyaWJ1dGUoImlkIiwgYHBhZ2UtJHtwYWdlfWApOwoJCQkJCQkJCXBhZ2VDdG5BbGwyLmNsYXNzTGlzdC5hZGQoImhpZGRlbiIpOwoJCQkJCQkJCXBhZ2VDdG5BbGwyLmFwcGVuZChyZW5kZXJhbGxBYm91dFNlY3Rpb24oc2NoZW1hWydhcHBsaWNhbnQtZGV0YWlscyddKSk7CgkJCQkJCQkJcGFnZUN0bkFsbDIuYXBwZW5kKAoJCQkJCQkJCQlhY2tub2xlZGdlQ2hlY2soY2hlY2tCb3hUZXh0cy5jb21tb24sIGBhcHB0bmNfYWdncmVfJHtwYWdlfWApCgkJCQkJCQkJKTsKCgkJCQkJCQkJY3RuLmFwcGVuZChwYWdlQ3RuLCBwYWdlQ3RuQWxsLCBwYWdlQ3RuQWxsMik7CgkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCWN0bi5hcHBlbmQocGFnZUN0bik7CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQl9CgoJCQkJCWNvbnN0IGZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJmb3JtIik7CgkJCQkJZm9ybS5wcmVwZW5kKGN0bik7CgoJCQkJCXJlc29sdmUocGFnZSk7CgkJCQl9KTsKCQkJLy8gLmNhdGNoKChlcnIpID0+IHtjb25zb2xlLmxvZyhlcnIpO3JlamVjdChmYWxzZSl9KTsKCQl9IGNhdGNoIChlcnIpIHsKCQkJY29uc29sZS5sb2coZXJyKTsKCQkJcmVqZWN0KGZhbHNlKTsKCQl9Cgl9KTsKCXJldHVybiBteXByb21pc2U7Cn0KCmZ1bmN0aW9uIGFja25vbGVkZ2VDaGVjayh0ZXh0LCBpZCkgewoJY29uc3QgY2hlY2tFbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCWNoZWNrRWxlLmNsYXNzTGlzdC5hZGQoImFja25vbGVkZ2UtZWxlbWVudCIpOwoJY29uc3QgaW5wdXRDdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCWlucHV0Q3RuLmNsYXNzTGlzdC5hZGQoImZpdGNvbnRlbnRfY2hlY2siLCAiYWNrbm9sZWRnZV9jaGVjayIpOwoKCWNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKTsKCWlucHV0LnNldEF0dHJpYnV0ZSgiaWQiLCBpZCk7CglpbnB1dC5jbGFzc0xpc3QuYWRkKCJ0bmNfYWdyZWUiKTsKCWlucHV0LnNldEF0dHJpYnV0ZSgibmFtZSIsIGlkKTsKCWlucHV0LnNldEF0dHJpYnV0ZSgidHlwZSIsICJjaGVja2JveCIpOwoKCWNvbnN0IGxhYmVsRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsYWJlbCIpOwoJbGFiZWxFbC5pbm5lclRleHQgPSB0ZXh0OwoJbGFiZWxFbC5zZXRBdHRyaWJ1dGUoImZvciIsIGlkKTsKCWxhYmVsRWwuY2xhc3NMaXN0LmFkZCgidG5jX2FncmVlVGV4dCIpOwoJbGFiZWxFbC5zdHlsZS5mb250V2VpZ2h0ID0gNTAwOwoJbGFiZWxFbC5zdHlsZS5mb250U2l6ZSA9ICIxNHB4IjsKCWlucHV0Lm9uY2hhbmdlID0gZnVuY3Rpb24gKCkgewoJCWxhYmVsRWwuc3R5bGUuY29sb3IgPSAiYmxhY2siOwoJfTsKCglpbnB1dEN0bi5hcHBlbmQoaW5wdXQsIGxhYmVsRWwpOwoJY2hlY2tFbGUuYXBwZW5kQ2hpbGQoaW5wdXRDdG4pOwoJcmV0dXJuIGNoZWNrRWxlOwp9CgpmdW5jdGlvbiBwYXltZW50RWRpdENoZWNrKHRleHQsIGlkLCBmb3JtLCBjb3VudCkgewoJY29uc3QgY2hlY2tFbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCWNoZWNrRWxlLmNsYXNzTGlzdC5hZGQoInBheW1lbnQtZWRpdC1lbGVtZW50Iik7Cgljb25zdCBpbnB1dEN0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwoJaW5wdXRDdG4uY2xhc3NMaXN0LmFkZCgiZml0Y29udGVudF9jaGVjayIsICJwYXltZW50X2NoZWNrIik7CgoJY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpOwoJaW5wdXQuc2V0QXR0cmlidXRlKCJpZCIsIGlkICsgJ18nICsgY291bnQpOwoJaW5wdXQuY2xhc3NMaXN0LmFkZCgicGF5bWVudF90b2dnbGUiKTsKCWlucHV0LnNldEF0dHJpYnV0ZSgibmFtZSIsIGlkICsgJ18nICsgY291bnQpOwoJaW5wdXQuc2V0QXR0cmlidXRlKCJ0eXBlIiwgImNoZWNrYm94Iik7CgoJY29uc3QgbGFiZWxFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxhYmVsIik7CglsYWJlbEVsLmlubmVyVGV4dCA9IHRleHQ7CglsYWJlbEVsLnNldEF0dHJpYnV0ZSgiZm9yIiwgaWQgKyAnXycgKyBjb3VudCk7CglsYWJlbEVsLmNsYXNzTGlzdC5hZGQoInBheW1lbnRfdG9nZ2xldGV4dCIpOwoJbGFiZWxFbC5zdHlsZS5mb250V2VpZ2h0ID0gNTAwOwoJbGFiZWxFbC5zdHlsZS5mb250U2l6ZSA9ICIxNHB4IjsKCWlucHV0Lm9uY2hhbmdlID0gZnVuY3Rpb24gKGV2ZW50KSB7CgkJaWYgKGV2ZW50LnRhcmdldC5jaGVja2VkID09IHRydWUpIHsKCQkJdmFyIGNscyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoYGJhbmstYW1vdW50LSR7Y291bnR9YCk7CgkJCXZhciBjbHMxID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShgYW1vdW50LWRhdGEtJHtjb3VudH1gKTsKCQkJZm9yICh2YXIgaSA9IDA7IGkgPCBjbHMubGVuZ3RoOyBpKyspIHsKCQkJCWNsc1tpXS5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7CgkJCQljbHNbaV0uY2xhc3NMaXN0LnJlbW92ZSgibm90X2VkaXRhYmxlIik7CgkJCX0KCQkJZm9yICh2YXIgaSA9IDA7IGkgPCBjbHMxLmxlbmd0aDsgaSsrKSB7CgkJCQljbHMxW2ldLnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTsKCQkJCWNsczFbaV0uY2xhc3NMaXN0LnJlbW92ZSgibm90X2VkaXRhYmxlIik7CgkJCX0KCQl9IGVsc2UgewoJCQl2YXIgY2xzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShgYmFuay1hbW91bnQtJHtjb3VudH1gKTsKCQkJdmFyIGNsczEgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGBhbW91bnQtZGF0YS0ke2NvdW50fWApOwoJCQlmb3IgKHZhciBpID0gMDsgaSA8IGNscy5sZW5ndGg7IGkrKykgewoJCQkJY2xzW2ldLnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCB0cnVlKTsKCQkJCWNsc1tpXS5jbGFzc0xpc3QuYWRkKCJub3RfZWRpdGFibGUiKTsKCQkJfQoJCQlmb3IgKHZhciBpID0gMDsgaSA8IGNsczEubGVuZ3RoOyBpKyspIHsKCQkJCWNsczFbaV0uc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsIHRydWUpOwoJCQkJY2xzMVtpXS5jbGFzc0xpc3QuYWRkKCJub3RfZWRpdGFibGUiKTsKCQkJfQoJCX0KCQlsYWJlbEVsLnN0eWxlLmNvbG9yID0gImJsYWNrIjsKCX07CgoJaW5wdXRDdG4uYXBwZW5kKGlucHV0LCBsYWJlbEVsKTsKCWNoZWNrRWxlLmFwcGVuZENoaWxkKGlucHV0Q3RuKTsKCXJldHVybiBjaGVja0VsZTsKfQoKZnVuY3Rpb24gQXBwbGljYW50Q29tcChpZCwgZGVmYXVsdHZhKSB7Cgljb25zdCBpbnB1dEN0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwoJaW5wdXRDdG4uY2xhc3NMaXN0LmFkZCgiaW5wdXRDdG4iKTsKCgl2YXIgYXBwbGljYW50X3R5cGUgPSBbCgkJeyBsYWJlbDogIkluZGl2aWR1YWwiLCB2YWx1ZTogIkluZGl2aWR1YWwiIH0sCgkJeyBsYWJlbDogIkNvbXBhbnkiLCB2YWx1ZTogIkNvbXBhbnkiIH0sCgldOwoKCWNvbnN0IHNlbGVjdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNlbGVjdCIpOwoKCXNlbGVjdC5zZXRBdHRyaWJ1dGUoImlkIiwgaWQpOwoKCXNlbGVjdC5zZXRBdHRyaWJ1dGUoIm5hbWUiLCAiYXBwbGljYW50X3R5cGVfaWR0Iik7CgoJZm9yIChjb25zdCBvcHRpb25WYWwgb2YgYXBwbGljYW50X3R5cGUpIHsKCQljb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJvcHRpb24iKTsKCQlvcHRpb24uc2V0QXR0cmlidXRlKCJ2YWx1ZSIsIG9wdGlvblZhbC52YWx1ZSk7CgkJb3B0aW9uLmlubmVyVGV4dCA9IG9wdGlvblZhbC5sYWJlbDsKCgkJaWYgKGRlZmF1bHR2YSkgewoJCQlpZiAoZGVmYXVsdHZhID09PSBvcHRpb25WYWwudmFsdWUpIHsKCQkJCW9wdGlvbi5zZXRBdHRyaWJ1dGUoInNlbGVjdGVkIiwgdHJ1ZSk7CgkJCX0KCQl9CgoJCXNlbGVjdC5hcHBlbmQob3B0aW9uKTsKCX0KCglpbnB1dEN0bi5hcHBlbmQoc2VsZWN0KTsKCXJldHVybiBpbnB1dEN0bjsKfQoKZnVuY3Rpb24gQXBwUGx1c2FwcGxpY2FudChlbGUsIGNvdW50KSB7CgllbGUub25jbGljayA9IGZ1bmN0aW9uIChlKSB7CgkJaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hcGN0X3R5cGVfZGl2JykubGVuZ3RoID49IDYpIHsKCQkJYWxlcnQoJ01heGltdW0gMyBhcHBsaWNhbnRzIGFyZSBhbGxvd2VkJyk7CgkJCXJldHVybjsKCQl9CgkJY29uc3QgcGFyZW50VGFyZ2V0ID0gaGFzU29tZVBhcmVudFRoZUNsYXNzKGUudGFyZ2V0LCAiYXBjdF90eXBlX2RpdiIpOwoKCQljb25zdCBteWVsZSA9IGUudGFyZ2V0OwoJCW15ZWxlLnJlbW92ZSgpOwoJCWNvdW50Kys7CgkJY29uc3QgYXBjdF9saXN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgkJYXBjdF9saXN0LnNldEF0dHJpYnV0ZSgiY2xhc3MiLCBgYXBjdF90eXBlX2RpdmApOwoKCQljb25zdCBsYWJlbEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpOwoJCWxhYmVsRWwuc2V0QXR0cmlidXRlKCJjbGFzcyIsICJhcGN0X3R5cGVfbGFibGUiKTsKCQlsYWJlbEVsLmlubmVySFRNTCA9IHBhZ2VJbmZvW2NvdW50IC0gMl07CgoJCWNvbnN0IHNlbGVjdF9lbGUgPSBBcHBsaWNhbnRDb21wKGBhcHBsaWNhbnRfJHtjb3VudH1gKTsKCgkJYXBjdF9saXN0LmFwcGVuZENoaWxkKGxhYmVsRWwpOwoJCWFwY3RfbGlzdC5hcHBlbmRDaGlsZChzZWxlY3RfZWxlKTsKCgkJYXBjdF9saXN0LmFwcGVuZENoaWxkKGxhYmVsRWwpOwoJCWFwY3RfbGlzdC5hcHBlbmRDaGlsZChzZWxlY3RfZWxlKTsKCgkJY29uc3QgcGxtZWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgkJcGxtZWxlLnNldEF0dHJpYnV0ZSgiY2xhc3MiLCAicGxtZmxleF9pY29uIik7CgoJCWxldCBtaW5JY29ubGFzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKTsKCQltaW5JY29ubGFzdC5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgIm15X3R5cGVfbWludXMiKTsKCQltaW5JY29ubGFzdC5pbm5lckhUTUwgPSAiLSI7CgoJCW1pbkljb25sYXN0Lm9uY2xpY2sgPSBmdW5jdGlvbiAoZSkgewoJCQljb25zdCByZW1vdmVFbGUgPSBoYXNTb21lUGFyZW50VGhlQ2xhc3MoZS50YXJnZXQsICJhcGN0X3R5cGVfZGl2Iik7CgkJCXJlbW92ZUVsZS5yZW1vdmUoKTsKCQkJcmVzZXRmZWN0b3IoKTsKCQl9OwoKCQlwbG1lbGUuYXBwZW5kQ2hpbGQobWluSWNvbmxhc3QpOwoKCQlpZiAoY291bnQgIT09IDYpIHsKCQkJbGV0IHBsdXNJY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpOwoJCQlwbHVzSWNvbi5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgIm15X3R5cGVfcGx1cyIpOwoJCQlwbHVzSWNvbi5pbm5lckhUTUwgPSAiKyI7CgkJCWFwY3RfbGlzdC5hcHBlbmRDaGlsZChwbHVzSWNvbik7CgkJCUFwcFBsdXNhcHBsaWNhbnQocGx1c0ljb24sIGNvdW50KTsKCQkJcGxtZWxlLmFwcGVuZENoaWxkKHBsdXNJY29uKTsKCQl9CgoJCWFwY3RfbGlzdC5hcHBlbmRDaGlsZChwbG1lbGUpOwoJCW5ld19hZGRmb3JtbGlzdC5hcHBlbmQoYXBjdF9saXN0KTsKCX07CgoJcmV0dXJuIGVsZTsKfQoKCgpmdW5jdGlvbiBwZGZUb0ltYWdlKGZpbGUpIHsKCXJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CgkJY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKCQlyZWFkZXIub25sb2FkID0gYXN5bmMgZnVuY3Rpb24gKCkgewoJCQl0cnkgewoJCQkJY29uc3QgdHlwZWRBcnJheSA9IG5ldyBVaW50OEFycmF5KHRoaXMucmVzdWx0KTsKCQkJCWNvbnN0IHBkZiA9IGF3YWl0IHBkZmpzTGliLmdldERvY3VtZW50KHsgZGF0YTogdHlwZWRBcnJheSB9KS5wcm9taXNlOwoJCQkJY29uc3QgcGFnZSA9IGF3YWl0IHBkZi5nZXRQYWdlKDEpOwoJCQkJY29uc3Qgdmlld3BvcnQgPSBwYWdlLmdldFZpZXdwb3J0KHsgc2NhbGU6IDMgfSk7CgkJCQljb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJjYW52YXMiKTsKCQkJCWNvbnN0IGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgiMmQiKTsKCQkJCWNhbnZhcy53aWR0aCA9IHZpZXdwb3J0LndpZHRoOwoJCQkJY2FudmFzLmhlaWdodCA9IHZpZXdwb3J0LmhlaWdodDsKCQkJCWNvbnN0IHJlbmRlckNvbnRleHQgPSB7CgkJCQkJY2FudmFzQ29udGV4dDogY29udGV4dCwKCQkJCQl2aWV3cG9ydDogdmlld3BvcnQsCgkJCQl9OwoJCQkJYXdhaXQgcGFnZS5yZW5kZXIocmVuZGVyQ29udGV4dCkucHJvbWlzZTsKCQkJCWNvbnN0IGltYWdlRGF0YVVybCA9IGNhbnZhcy50b0RhdGFVUkwoImltYWdlL3BuZyIpOwoJCQkJcmVzb2x2ZShpbWFnZURhdGFVcmwpOwoJCQl9IGNhdGNoIChlcnJvcikgewoJCQkJcmVqZWN0KGVycm9yKTsKCQkJfQoJCX07CgkJcmVhZGVyLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7CgkJCXJlamVjdChuZXcgRXJyb3IoIkVycm9yIHJlYWRpbmcgZmlsZSIpKTsKCQl9OwoJCXJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihmaWxlKTsKCX0pOwp9CgpmdW5jdGlvbiBwZGZCYXNlNjRUb0Jsb2IocGRmQmFzZTY0KSB7CgoJLy8gQ29udmVydCBiYXNlNjQgdG8gYmluYXJ5Cgljb25zdCBiaW5hcnlQREYgPSBhdG9iKHBkZkJhc2U2NCk7CgoJLy8gQ29udmVydCBiaW5hcnkgZGF0YSB0byBhIFVpbnQ4QXJyYXkKCWNvbnN0IHVpbnQ4QXJyYXkgPSBuZXcgVWludDhBcnJheShiaW5hcnlQREYubGVuZ3RoKTsKCWZvciAobGV0IGkgPSAwOyBpIDwgYmluYXJ5UERGLmxlbmd0aDsgaSsrKSB7CgkJdWludDhBcnJheVtpXSA9IGJpbmFyeVBERi5jaGFyQ29kZUF0KGkpOwoJfQoKCS8vIENyZWF0ZSBhIEJsb2IgZnJvbSB0aGUgVWludDhBcnJheQoJY29uc3QgYmxvYiA9IG5ldyBCbG9iKFt1aW50OEFycmF5XSwgeyB0eXBlOiAnYXBwbGljYXRpb24vcGRmJyB9KTsKCglyZXR1cm4gYmxvYjsKfQoKYXN5bmMgZnVuY3Rpb24gc2hvd1F1b3RhdGlvbigpIHsKCWNvbnN0IHF1b3RQZGZCYXNlNjQgPSBzY2hlbWFbJ2ZpcnN0LXBhZ2UnXVsncXVvdGF0aW9ucGRmJ107CglpZiAocXVvdFBkZkJhc2U2NC5pbmRleE9mKCcuanBnJykgIT0gLTEpIHsKCQlkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcXVvdC1kaWFsb2ctY29udGVudCcpLmlubmVySFRNTCA9IGA8aW1nIHNyYz0ke3F1b3RQZGZCYXNlNjR9IHN0eWxlPSd3aWR0aDo3MCUnPmA7CgkJZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3F1b3QtY29uc2VudC1kaWFsb2cnKS5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTsKCX0gZWxzZSB7CgkJY29uc3QgcGRmQmxvYiA9IHBkZkJhc2U2NFRvQmxvYihxdW90UGRmQmFzZTY0KTsKCgkJY29uc3QgZmlsZW5hbWUgPSAncXVvdGF0aW9uLnBkZic7CgoJCS8vQ3JlYXRlIGEgRmlsZSBvYmplY3Qgd2l0aCBNSU1FIHR5cGUgJ2FwcGxpY2F0aW9uL3BkZicKCQljb25zdCBmaWxlID0gbmV3IEZpbGUoW3BkZkJsb2JdLCBmaWxlbmFtZSwgeyB0eXBlOiAnYXBwbGljYXRpb24vcGRmJyB9KTsKCgkJcXVvdEltYWdlVVJMID0gYXdhaXQgcGRmVG9JbWFnZShmaWxlKTsKCQlkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcXVvdC1kaWFsb2ctY29udGVudCcpLmlubmVySFRNTCA9IGA8aW1nIHNyYz0ke3F1b3RJbWFnZVVSTH0gc3R5bGU9J3dpZHRoOjcwJSc+YDsKCQlkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcXVvdC1jb25zZW50LWRpYWxvZycpLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpOwoJfQp9CmZ1bmN0aW9uIHBkZlRvSW1hZ2VCbG9iKGZpbGUpIHsKCXJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CgkJY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKCQlyZWFkZXIub25sb2FkID0gYXN5bmMgZnVuY3Rpb24gKCkgewoJCQl0cnkgewoJCQkJY29uc3QgdHlwZWRBcnJheSA9IG5ldyBVaW50OEFycmF5KHRoaXMucmVzdWx0KTsKCQkJCWNvbnN0IHBkZiA9IGF3YWl0IHBkZmpzTGliLmdldERvY3VtZW50KHsgZGF0YTogdHlwZWRBcnJheSB9KS5wcm9taXNlOwoJCQkJY29uc3QgcGFnZSA9IGF3YWl0IHBkZi5nZXRQYWdlKDEpOwoJCQkJY29uc3Qgdmlld3BvcnQgPSBwYWdlLmdldFZpZXdwb3J0KHsgc2NhbGU6IDEgfSk7CgkJCQljb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJjYW52YXMiKTsKCQkJCWNvbnN0IGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgiMmQiKTsKCQkJCWNhbnZhcy53aWR0aCA9IHZpZXdwb3J0LndpZHRoOwoJCQkJY2FudmFzLmhlaWdodCA9IHZpZXdwb3J0LmhlaWdodDsKCQkJCWNvbnN0IHJlbmRlckNvbnRleHQgPSB7CgkJCQkJY2FudmFzQ29udGV4dDogY29udGV4dCwKCQkJCQl2aWV3cG9ydDogdmlld3BvcnQsCgkJCQl9OwoJCQkJYXdhaXQgcGFnZS5yZW5kZXIocmVuZGVyQ29udGV4dCkucHJvbWlzZTsKCQkJCWNhbnZhcy50b0Jsb2IoZnVuY3Rpb24gKGJsb2IpIHsKCQkJCQlyZXNvbHZlKGJsb2IpOwoJCQkJfSwgImltYWdlL3BuZyIpOwoJCQl9IGNhdGNoIChlcnJvcikgewoJCQkJcmVqZWN0KGVycm9yKTsKCQkJfQoJCX07CgkJcmVhZGVyLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7CgkJCXJlamVjdChuZXcgRXJyb3IoIkVycm9yIHJlYWRpbmcgZmlsZSIpKTsKCQl9OwoJCXJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihmaWxlKTsKCX0pOwp9CgoKCmZ1bmN0aW9uIGNyZWF0ZUlkZW50aWZpY2F0aW9uQ29sdW1uKHNjaGVtYSkgewoJY29uc3QgeyBmb3I6IG5hbWUsIHBob3RvUGlja2VyLCBreWMsIHNpZ25hdHVyZSB9ID0gc2NoZW1hOwoKCWNvbnN0IGNvbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwoJY29sLmNsYXNzTGlzdC5hZGQoImNvbCIpOwoKCWNvbnN0IHRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGFiZWwiKTsKCXRpdGxlLnN0eWxlLnNldFByb3BlcnR5KCJtYXJnaW4tYm90dG9tIiwgIjE1cHgiKTsKCXRpdGxlLnN0eWxlLnNldFByb3BlcnR5KCJmb250LXNpemUiLCAiMjBweCIpOwoJdGl0bGUuaW5uZXJUZXh0ID0gYXBwbGljYW50TnVtW25hbWVdOwoJY29sLmFwcGVuZCh0aXRsZSk7CgoJaWYgKHBob3RvUGlja2VyKSB7CgkJY29uc3QgeyBpZCwga2V5IH0gPSBwaG90b1BpY2tlcjsKCgkJY29uc3QgcGlja2VyQ3RuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgkJcGlja2VyQ3RuLmNsYXNzTGlzdC5hZGQoImZsZXgiLCAidXNlci1pbWctbGFiZWwiKTsKCQlwaWNrZXJDdG4uc3R5bGUuc2V0UHJvcGVydHkoIndpZHRoIiwgIjIxOHB4Iik7CgoJCWNvbnN0IGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGFiZWwiKTsKCQlsYWJlbC5zdHlsZS5zZXRQcm9wZXJ0eSgibWFyZ2luLXJpZ2h0IiwgIjEwcHgiKTsKCQkvLyBsYWJlbC5zZXRBdHRyaWJ1dGUoImZvciIsIGlkKTsKCgkJY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpOyAgIC8vIG1hbm9qIGt1bWFyIGRvYwoKCQljb25zdCBwcmV2aWV3SWQgPSBgJHtpZH0tcHJldmlld2A7CgoJCWlucHV0LnNldEF0dHJpYnV0ZSgiYWNjZXB0IiwgImltYWdlLyoiKTsKCQlpbnB1dC5zZXRBdHRyaWJ1dGUoInJlcXVpcmVkIiwgdHJ1ZSk7CgkJaW5wdXQuc2V0QXR0cmlidXRlKCJ0eXBlIiwgImZpbGUiKTsKCQlpbnB1dC5zZXRBdHRyaWJ1dGUoInJvbGUiLCAicGhvdG8tcGlja2VyIik7CgkJaW5wdXQuc2V0QXR0cmlidXRlKCJwcmV2aWV3LWlkIiwgcHJldmlld0lkKTsKCQlpbnB1dC5zZXRBdHRyaWJ1dGUoImlkIiwgaWQpOwoJCWlucHV0LnNldEF0dHJpYnV0ZSgibmFtZSIsIGtleSk7CgoJCWNvbnN0IGltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImltZyIpOwoJCWltZy5zcmMgPSAiY2FtZXJhLnN2ZyI7CgkJaW1nLnRpdGxlID0gIlRha2UgcGhvdG8iOwoJCWltZy5pZCA9IGAke2lkfS1pbWdgOwoKCQlpbWcuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBhc3luYyBmdW5jdGlvbiAoZXZlbnQpIHsKCQkJZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CgoJCQlsZXQgc3RyZWFtID0gbnVsbDsKCgkJCXRyeSB7CgkJCQlzdHJlYW0gPSBhd2FpdCBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSh7CgkJCQkJdmlkZW86IHRydWUsCgkJCQkJYXVkaW86IGZhbHNlLAoJCQkJfSk7CgkJCX0gY2F0Y2ggKGVycm9yKSB7CgoJCQkJcmV0dXJuOwoJCQl9CgoJCQljb25zdCB2aWRlb1BhcmVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGAke2lkfS1zdHJlYW1gKTsKCQkJdmlkZW9QYXJlbnQuc3R5bGUuZGlzcGxheSA9ICJmbGV4IjsKCQkJbGV0IHZpZGVvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYCR7aWR9LXZpZGVvYCk7CgkJCXZpZGVvLnNyY09iamVjdCA9IHN0cmVhbTsKCgkJCWNvbnN0IGNsaWNrQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYCR7aWR9LWNsaWNrLXBob3RvYCk7CgkJCWxldCBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgJHtpZH0tY2FudmFzYCk7CgkJCWxldCBjb3VudGVyID0gMDsKCQkJY2xpY2tCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBmdW5jdGlvbiAoZXYpIHsKCQkJCWNvdW50ZXIrKzsKCQkJCWlmIChjb3VudGVyID4gMSkgewoJCQkJCXJldHVybjsKCQkJCX0KCQkJCWV2LnN0b3BQcm9wYWdhdGlvbigpOwoJCQkJY2FudmFzCgkJCQkJLmdldENvbnRleHQoIjJkIikKCQkJCQkuZHJhd0ltYWdlKHZpZGVvLCAwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpOwoJCQkJbGV0IGltYWdlX2RhdGFfdXJsID0gY2FudmFzLnRvRGF0YVVSTCgiaW1hZ2UvanBlZyIpOwoKCQkJCS8vIGNvbnN0IG15SnNvbiA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oIm15ZG9jdW1lbnQiKSkgfHwgW107CgkJCQljb25zdCBteUpzb24gPSBKU09OLnBhcnNlKG15ZG9jdW1lbnQpIHx8IFtdOwoJCQkJbXlKc29uW2lkXSA9IGltYWdlX2RhdGFfdXJsOwoJCQkJLy8gbG9jYWxTdG9yYWdlLnNldEl0ZW0oIm15ZG9jdW1lbnQiLCBKU09OLnN0cmluZ2lmeShteUpzb24pKTsKCQkJCW15ZG9jdW1lbnQgPSBKU09OLnN0cmluZ2lmeShteUpzb24pOwoJCQkJY29uc3QgYnl0ZUNoYXJhY3RlcnMgPSBhdG9iKAoJCQkJCWltYWdlX2RhdGFfdXJsLnJlcGxhY2UoL15kYXRhOmltYWdlXC8/W0Etel0qO2Jhc2U2NCwvLCAiIikKCQkJCSk7CgkJCQljb25zdCBieXRlTnVtYmVycyA9IG5ldyBBcnJheShieXRlQ2hhcmFjdGVycy5sZW5ndGgpOwoJCQkJZm9yIChsZXQgaSA9IDA7IGkgPCBieXRlQ2hhcmFjdGVycy5sZW5ndGg7IGkrKykgewoJCQkJCWJ5dGVOdW1iZXJzW2ldID0gYnl0ZUNoYXJhY3RlcnMuY2hhckNvZGVBdChpKTsKCQkJCX0KCQkJCWNvbnN0IGJ5dGVBcnJheSA9IG5ldyBVaW50OEFycmF5KGJ5dGVOdW1iZXJzKTsKCQkJCWNvbnN0IGNvbnZGaWxlID0gbmV3IEZpbGUoCgkJCQkJW25ldyBCbG9iKFtieXRlQXJyYXldLCB7IHR5cGU6ICJpbWFnZS9qcGVnIiB9KV0sCgkJCQkJInVzZXJJbWFnZS5qcGVnIiwKCQkJCQl7IHR5cGU6ICJpbWFnZS9qcGVnIiB9CgkJCQkpOwoKCQkJCWNvbnN0IGRhdGFUcmFuc2ZlciA9IG5ldyBEYXRhVHJhbnNmZXIoKTsKCQkJCWRhdGFUcmFuc2Zlci5pdGVtcy5hZGQoY29udkZpbGUpOwoJCQkJY29uc3QgZmlsZUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpOwoJCQkJZmlsZUlucHV0LmZpbGVzID0gZGF0YVRyYW5zZmVyLmZpbGVzOwoKCQkJCWNvbnN0IHNob3dQcmV2aWV3ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocHJldmlld0lkKTsKCQkJCXNob3dQcmV2aWV3LnNyYyA9IGltYWdlX2RhdGFfdXJsOwoJCQkJdmlkZW9QYXJlbnQuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKCQkJCWlucHV0LnJlbW92ZUF0dHJpYnV0ZSgicmVxdWlyZWQiKTsKCgoKCQkJCS8vIE5ldyBMb2dpYyB0byBTdG9yZSBpbWFnZSBpbiBkYgoJCQkJY29uc3QgcHJldmlldyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHByZXZpZXdJZCk7CgkJCQlsZXQgc21Mb2FkZXIgPSBjcmVhdGVMb2FkZXIoKTsKCQkJCXByZXZpZXcuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCdhZnRlcmVuZCcsIHNtTG9hZGVyKTsKCQkJCWNvbnN0IHBpY2tlcklkID0gcHJldmlld0lkLnNwbGl0KCctcHJldmlldycpWzBdOwoJCQkJaW1hZ2VVcGxvYWRpbmcucHVzaChwaWNrZXJJZCk7CgoJCQkJY29uc3QgaW1nQmxvYiA9IG5ldyBCbG9iKFtpbWFnZV9kYXRhX3VybF0sIHsgdHlwZTogJ2ltYWdlL2pwZWcnIH0pOwoKCQkJCWNvbnN0IGZpbGUgPSBkYXRhVVJMdG9GaWxlKGltYWdlX2RhdGFfdXJsLCAndXNlci5qcGVnJyk7CgkJCQljb21wcmVzc0ltYWdlKGltYWdlX2RhdGFfdXJsLCBldiwgJycsIGZhbHNlLCBmaWxlKQoJCQkJCS50aGVuKHJlc3AgPT4gewoJCQkJCQlpZiAoKGZpbGUuc2l6ZSAvIDEwMjQpID49IDUwMCkgewoJCQkJCQkJbGV0IHR5cGUgPSBmaWxlLnR5cGUuc3BsaXQoJy8nKVsxXTsKCQkJCQkJCWZpbGUgPSBuZXcgRmlsZShbcmVzcF0sIGB1c2VyLiR7dHlwZX1gLCB7CgkJCQkJCQkJdHlwZTogcmVzcC50eXBlCgkJCQkJCQl9KTsKCQkJCQkJfQoKCQkJCQkJc3RvcmVJbWFnZUluREIoZmlsZSwgcGlja2VySWQsICd1c2VySW1hZ2UnKQoJCQkJCQkJLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSkKCQkJCQkJCS50aGVuKChyZXMpID0+IHsKCQkJCQkJCQlTdG9yZURvY3VtZW50TmFtZShwaWNrZXJJZCwgcmVzWydmaWxlX25hbWUnXSk7CgkJCQkJCQkJc21Mb2FkZXIuaW5uZXJIVE1MID0gJyc7CgkJCQkJCQkJaW1hZ2VVcGxvYWRpbmcgPSBpbWFnZVVwbG9hZGluZy5maWx0ZXIoeCA9PiB4ICE9IHBpY2tlcklkKTsKCQkJCQkJCX0pLmNhdGNoKGVyciA9PiB7CgkJCQkJCQkJc21Mb2FkZXIuaW5uZXJIVE1MID0gJyc7CgkJCQkJCQkJaW1hZ2VVcGxvYWRpbmcgPSBpbWFnZVVwbG9hZGluZy5maWx0ZXIoeCA9PiB4ICE9IHBpY2tlcklkKTsKCQkJCQkJCQlhbGVydChgQ291bGRuJ3QgdXBsb2FkIGltYWdlYCk7CgkJCQkJCQkJY29uc29sZS5sb2coZXJyKTsKCQkJCQkJCX0pCgkJCQkJfSkKCQkJCQkuY2F0Y2goZXJyID0+IHsKCQkJCQkJc21Mb2FkZXIuaW5uZXJIVE1MID0gJyc7CgkJCQkJCWltYWdlVXBsb2FkaW5nID0gaW1hZ2VVcGxvYWRpbmcuZmlsdGVyKHggPT4geCAhPSBwaWNrZXJJZCk7CgkJCQkJCWFsZXJ0KGBDb3VsZG4ndCB1cGxvYWQgaW1hZ2VgKTsKCQkJCQkJY29uc29sZS5sb2coZXJyKTsKCQkJCQl9KQoJCQl9KTsKCQl9KTsKCgkJbGFiZWwuYXBwZW5kKGltZyk7CgoJCXBpY2tlckN0bi5hcHBlbmQobGFiZWwsIGlucHV0KTsKCgkJY29uc3QgcHJldmlldyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImltZyIpOyAgLy8gdG8gYmUgdW5jb21tZW50ZWQKCQlwcmV2aWV3LmNsYXNzTGlzdC5hZGQoInBob3RvIik7CgkJcHJldmlldy5zZXRBdHRyaWJ1dGUoImlkIiwgcHJldmlld0lkKTsKCgkJY29uc3Qgc3RyZWFtUGFyZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgkJc3RyZWFtUGFyZW50LmlkID0gYCR7aWR9LXN0cmVhbWA7CgkJc3RyZWFtUGFyZW50LnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CgkJc3RyZWFtUGFyZW50LnN0eWxlLmZsZXhEaXJlY3Rpb24gPSAiY29sdW1uIjsKCQlzdHJlYW1QYXJlbnQuc3R5bGUuYWxpZ25JdGVtcyA9ICJjZW50ZXIiOwoJCXN0cmVhbVBhcmVudC5zdHlsZS5nYXAgPSAiNXB4IjsKCQlzdHJlYW1QYXJlbnQuc3R5bGUubWFyZ2luQm90dG9tID0gIjEwcHgiOwoJCXN0cmVhbVBhcmVudC5pbm5lckhUTUwgPSBgCiAgICA8dmlkZW8gaWQ9JHtgJHtpZH0tdmlkZW9gfSB3aWR0aD0iMjIwIiBoZWlnaHQ9ImF1dG8iIGF1dG9wbGF5PjwvdmlkZW8+CiAgICA8YnV0dG9uIGlkPSR7YCR7aWR9LWNsaWNrLXBob3RvYH0gdHlwZT0iYnV0dG9uIj5DbGljayBQaG90bzwvYnV0dG9uPgogICAgPGNhbnZhcyBpZD0ke2Ake2lkfS1jYW52YXNgfSB3aWR0aD0iMjIwIiBoZWlnaHQ9ImF1dG8iIHN0eWxlPSJkaXNwbGF5OiBub25lOyI+PC9jYW52YXM+CiAgICBgOwoJCWNvbC5hcHBlbmQocGlja2VyQ3RuLCBzdHJlYW1QYXJlbnQsIHByZXZpZXcpOwoJfQoKCWlmIChzaWduYXR1cmUpIHsKCQljb25zdCB7IGlkLCBrZXkgfSA9IHNpZ25hdHVyZTsKCgkJY29uc3Qgc2lnbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwoJCXNpZ24uY2xhc3NMaXN0LmFkZCgibXQtMTAiKTsKCQlzaWduLmlubmVySFRNTCA9IGAKICAgIDxidXR0b24gZm9yPSJjbGVhci1zaWduIiBjb250cm9sPSIke25hbWV9XyR7aWR9Ij54PC9idXR0b24+CiAgICA8Y2FudmFzCiAgICAgIGZvcj0ic2lnbiIKICAgICAgcmVxdWlyZWQKICAgICAgbmFtZT0iJHtrZXl9IgogICAgICBpZD0iJHtuYW1lfV8ke2lkfSIKICAgID48L2NhbnZhcz5gOwoKCQljb2wuYXBwZW5kKHNpZ24pOwoJfQoKCWNvbnN0IGZpbGVVcGxvYWQgPSBbXTsKCWlmIChreWMpIHsKCQljb25zdCB7IGZvcm0sIGRvY3VtZW50cywgdHlwZSB9ID0ga3ljOwoJCWZvcm0uZm9yRWFjaCgoZWxlbWVudCkgPT4gewoJCQlpZiAoZWxlbWVudD8udHlwZSA9PT0gImZpbGUiKSB7CgkJCQljb25zdCBmY3RuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgkJCQlmY3RuLmNsYXNzTGlzdC5hZGQoImZpbGUtdXBsb2FkIiwgImRvY3VtZW50X2ZpbGV1cGxvYWRfY2xhc3MiKTsKCgkJCQljb25zdCBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxhYmVsIik7CgkJCQlsYWJlbC5pbm5lclRleHQgPSBgJHtlbGVtZW50Py5sYWJlbH1gOwoKCQkJCWxldCBtYWluVXBsb2FkQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgkJCQltYWluVXBsb2FkQ29udGFpbmVyLnNldEF0dHJpYnV0ZSgiY2xhc3MiLCAibWFpblVwbG9hZF9jb250YWluZXIiKTsKCgkJCQljb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7CgkJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoInR5cGUiLCAiZmlsZSIpOwoJCQkJaW5wdXQuc2V0QXR0cmlidXRlKCJyZXF1aXJlZCIsIHRydWUpOwoKCQkJCWlmIChlbGVtZW50Py5pZCkgaW5wdXQuc2V0QXR0cmlidXRlKCJpZCIsIGVsZW1lbnQ/LmlkKTsKCQkJCWlmIChlbGVtZW50Py5rZXkpIGlucHV0LnNldEF0dHJpYnV0ZSgibmFtZSIsIGVsZW1lbnQ/LmtleSk7CgoJCQkJaW5wdXQub25jbGljayA9IChldikgPT4gewoKCQkJCQlldi50YXJnZXQudmFsdWUgPSBudWxsOwoJCQkJfTsKCgkJCQlpbnB1dC5hZGRFdmVudExpc3RlbmVyKCJjaGFuZ2UiLCBhc3luYyAoZXYpID0+IHsKCgkJCQkJLy8gaWYgKChldi50YXJnZXQuZmlsZXNbMF0uc2l6ZSkgLyAoMTAyNCAqIDEwMjQpID4gMSkgewoJCQkJCS8vIAlsZXQgbW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIubXl2ZXJNb2RhbCIpOwoJCQkJCS8vIAlsZXQgbW9kYWxUZXh0RWxlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5teXZlck1vZGFsIC5wb3B1cC1oZWFkZXIiKTsKCQkJCQkvLyAJbW9kYWxUZXh0RWxlbS5pbm5lclRleHQgPSAiTWF4aW11bSAxTUIgZmlsZSBzaXplIGlzIGFsbG93ZWQuIjsKCQkJCQkvLyAJbW9kYWwuY2xhc3NMaXN0LnRvZ2dsZSgic2hvdy1tb2RhbCIpOwoJCQkJCS8vIAkvLyBwcmV2aXdlQ29udGFpbmV0LmFwcGVuZCh2ZXJpZnlmYWlsc2ljb24oKSk7CgoJCQkJCS8vIAlkb2N1bWVudC5xdWVyeVNlbGVjdG9yKAoJCQkJCS8vIAkJIiNteVBvcHVwIC5kb2NfcmV1cGxvYWRCdG4iCgkJCQkJLy8gCSkub25jbGljayA9IGZ1bmN0aW9uICgpIHsKCQkJCQkvLyAJCWNvbnN0IGN1ckVsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnQuaWQpOwoJCQkJCS8vIAkJY29uc3QgdGFyZ2V0RWxlID0gaGFzU29tZU5leHRTaWJsaW5nVGhlQ2xhc3MoCgkJCQkJLy8gCQkJY3VyRWxlLAoJCQkJCS8vIAkJCSJwcmV2aWV3X2FjdGlvbmJ1dHRvbiIKCQkJCQkvLyAJCSk7CgkJCQkJLy8gCQljdXJFbGUudmFsdWUgPSBudWxsOwoJCQkJCS8vIAkJaWYgKHRhcmdldEVsZSkgewoJCQkJCS8vIAkJCXRhcmdldEVsZS5yZW1vdmUoKTsKCQkJCQkvLyAJCX0KCQkJCQkvLyAJCW1vZGFsLmNsYXNzTGlzdC50b2dnbGUoInNob3ctbW9kYWwiKTsKCQkJCQkvLyAJfTsKCgkJCQkJLy8gCWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoCgkJCQkJLy8gCQkiI215UG9wdXAgLmlnbm9yZVByX0J0biIKCQkJCQkvLyAJKS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTsKCQkJCQkvLyAJcmV0dXJuOwoJCQkJCS8vIH0KCgkJCQkJdHJ5IHsKCQkJCQkJaWYgKGV2LnRhcmdldC5uZXh0RWxlbWVudFNpYmxpbmcpIHsKCQkJCQkJCWV2LnRhcmdldC5uZXh0RWxlbWVudFNpYmxpbmcucmVtb3ZlKCk7CgkJCQkJCX0KCgkJCQkJCS8vIGNvbXByZXNzIHVwbG9hZGVkIGRvY3VtZW50cwoKCQkJCQkJbGV0IG15RmlsZVVSTCA9ICcnOwoJCQkJCQlsZXQgaW1hZ2VCbG9iID0gJyc7CgkJCQkJCS8vIENoZWNrIGlmIGN1cnJlbnQgZG9jdW1lbnQgaXMgcGRmCgkJCQkJCWlmIChldi50YXJnZXQuZmlsZXNbMF0udHlwZSA9PSAnYXBwbGljYXRpb24vcGRmJykgewoJCQkJCQkJdHJ5IHsKCQkJCQkJCQlteUZpbGVVUkwgPSBhd2FpdCBwZGZUb0ltYWdlKGV2LnRhcmdldC5maWxlc1swXSk7CgkJCQkJCQkJaW1hZ2VCbG9iID0gYXdhaXQgcGRmVG9JbWFnZUJsb2IoZXYudGFyZ2V0LmZpbGVzWzBdKTsKCgkJCQkJCQl9IGNhdGNoIChlcnJvcikgewoJCQkJCQkJCWNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNvbnZlcnRpbmcgUERGIHRvIGltYWdlOicsIGVycm9yKTsKCQkJCQkJCX0KCQkJCQkJfSBlbHNlIHsKCQkJCQkJCW15RmlsZVVSTCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoZXYudGFyZ2V0LmZpbGVzWzBdKTsKCQkJCQkJfQoKCQkJCQkJLy8gY29uc3QgbXlGaWxlVVJMID0gVVJMLmNyZWF0ZU9iamVjdFVSTChldi50YXJnZXQuZmlsZXNbMF0pOwoJCQkJCQlsZXQgcHJldml3ZUNvbnRhaW5ldCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwoJCQkJCQlwcmV2aXdlQ29udGFpbmV0LnNldEF0dHJpYnV0ZSgiY2xhc3MiLCAicHJldmlld19hY3Rpb25idXR0b24iKTsKCQkJCQkJY29uc3QgbGlua25hdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsKCQkJCQkJdmFyIGltZ2FkZGhhciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImltZyIpOwoJCQkJCQlsaW5rbmF2LnNldEF0dHJpYnV0ZSgiaHJlZiIsIG15RmlsZVVSTCk7CgkJCQkJCWltZ2FkZGhhci5zZXRBdHRyaWJ1dGUoImhlaWdodCIsIDUwKTsKCQkJCQkJaW1nYWRkaGFyLnNldEF0dHJpYnV0ZSgiY2xhc3MiLCAidXBsb2FkX2ltYWdlX3ByZXZpZXciKTsKCQkJCQkJaW1nYWRkaGFyLnNyYyA9IG15RmlsZVVSTDsKCQkJCQkJbGlua25hdi5zZXRBdHRyaWJ1dGUoInRhcmdldCIsICJfYmxhbmsiKTsKCQkJCQkJbGlua25hdi5hcHBlbmQoaW1nYWRkaGFyKTsKCQkJCQkJcHJldml3ZUNvbnRhaW5ldC5hcHBlbmQobGlua25hdik7CgoJCQkJCQlpZiAobXlGaWxlVVJMKSB7CgkJCQkJCQljb25zdCByZW1vdmVFbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCQkJCQkJCXJlbW92ZUVsZS5jbGFzc0xpc3QuYWRkKCJyZW1vdmVfcHJldmlld19lbGUiKTsKCQkJCQkJCWNvbnN0IG5ld1N1ZmYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJidXR0b24iKTsKCQkJCQkJCW5ld1N1ZmYuaW5uZXJIVE1MID0gIlgiOwoJCQkJCQkJcmVtb3ZlRWxlLmFwcGVuZENoaWxkKG5ld1N1ZmYpOwoKCQkJCQkJCXJlbW92ZUVsZS5vbmNsaWNrID0gZnVuY3Rpb24gKGUpIHsKCQkJCQkJCQljb25zdCBzZWxmRWxlID0gZS50YXJnZXQ7CgkJCQkJCQkJY29uc3QgdGFyZ2V0RWxlID0gaGFzU29tZVBhcmVudFRoZUNsYXNzKAoJCQkJCQkJCQlzZWxmRWxlLAoJCQkJCQkJCQkicHJldmlld19hY3Rpb25idXR0b24iCgkJCQkJCQkJKTsKCQkJCQkJCQlpbWFnZVVwbG9hZGluZyA9IGltYWdlVXBsb2FkaW5nLmZpbHRlcih4ID0+IHggIT0gdGFyZ2V0RWxlLnBhcmVudE5vZGUuY2hpbGRyZW5bMF0uaWQpOwoJCQkJCQkJCXRhcmdldEVsZS5yZW1vdmUoKTsKCQkJCQkJCQlpbnB1dC52YWx1ZSA9IG51bGw7CgoJCQkJCQkJfTsKCQkJCQkJCXByZXZpd2VDb250YWluZXQuYXBwZW5kKHJlbW92ZUVsZSk7CgkJCQkJCX0KCgkJCQkJCW1haW5VcGxvYWRDb250YWluZXIuYXBwZW5kKHByZXZpd2VDb250YWluZXQpOwoJCQkJCQlsZXQgc21Mb2FkZXIgPSBjcmVhdGVMb2FkZXIoKTsKCQkJCQkJcHJldml3ZUNvbnRhaW5ldC5hcHBlbmQoc21Mb2FkZXIpOwoJCQkJCQlpbWFnZVVwbG9hZGluZy5wdXNoKGVsZW1lbnQuaWQpOwoKCQkJCQkJY29uc3Qgc2hvd0ZhaWx1cmVGdW4gPSAoKSA9PiB7CgkJCQkJCQlzbUxvYWRlci5pbm5lckhUTUwgPSAnJzsKCQkJCQkJCWltYWdlVXBsb2FkaW5nID0gaW1hZ2VVcGxvYWRpbmcuZmlsdGVyKHggPT4geCAhPSBlbGVtZW50LmlkKTsKCQkJCQkJCWxldCBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5teXZlck1vZGFsIik7CgkJCQkJCQltb2RhbC5jbGFzc0xpc3QudG9nZ2xlKCJzaG93LW1vZGFsIik7CgkJCQkJCQlwcmV2aXdlQ29udGFpbmV0LmFwcGVuZCh2ZXJpZnlmYWlsc2ljb24oKSk7CgoJCQkJCQkJZG9jdW1lbnQucXVlcnlTZWxlY3RvcigKCQkJCQkJCQkiI215UG9wdXAgLmRvY19yZXVwbG9hZEJ0biIKCQkJCQkJCSkub25jbGljayA9IGZ1bmN0aW9uICgpIHsKCQkJCQkJCQljb25zdCBjdXJFbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGVtZW50LmlkKTsKCQkJCQkJCQljb25zdCB0YXJnZXRFbGUgPSBoYXNTb21lTmV4dFNpYmxpbmdUaGVDbGFzcygKCQkJCQkJCQkJY3VyRWxlLAoJCQkJCQkJCQkicHJldmlld19hY3Rpb25idXR0b24iCgkJCQkJCQkJKTsKCQkJCQkJCQljdXJFbGUudmFsdWUgPSBudWxsOwoJCQkJCQkJCWlmICh0YXJnZXRFbGUpIHsKCQkJCQkJCQkJaW1hZ2VVcGxvYWRpbmcgPSBpbWFnZVVwbG9hZGluZy5maWx0ZXIoeCA9PiB4ICE9IHRhcmdldEVsZS5wYXJlbnROb2RlLmNoaWxkcmVuWzBdLmlkKTsKCQkJCQkJCQkJdGFyZ2V0RWxlLnJlbW92ZSgpOwoJCQkJCQkJCX0KCQkJCQkJCQltb2RhbC5jbGFzc0xpc3QudG9nZ2xlKCJzaG93LW1vZGFsIik7CgkJCQkJCQl9OwoKCQkJCQkJCWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoCgkJCQkJCQkJIiNteVBvcHVwIC5pZ25vcmVQcl9CdG4iCgkJCQkJCQkpLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7CgkJCQkJCQkJY29uc3QgbXlpZ0lkID0gZWxlbWVudC5pZCArICJfaWdub3JlIjsKCQkJCQkJCQlpZ25vcmVEb2MgPSBpZ25vcmVEb2MuZmlsdGVyKChpZykgPT4gewoJCQkJCQkJCQlyZXR1cm4gaWcubmFtZSAhPSBteWlnSWQ7CgkJCQkJCQkJfSk7CgkJCQkJCQkJaWdub3JlRG9jLnB1c2goeyBuYW1lOiBteWlnSWQsIHZhbHVlOiAnJyB9KTsKCQkJCQkJCQltb2RhbC5jbGFzc0xpc3QudG9nZ2xlKCJzaG93LW1vZGFsIik7CgkJCQkJCQl9OwoJCQkJCQl9CgoJCQkJCQljb21wcmVzc0ltYWdlKG15RmlsZVVSTCwgZXYsIGltYWdlQmxvYikKCQkJCQkJCS50aGVuKChyZXMpID0+IHsKCQkJCQkJCQljb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOwoJCQkJCQkJCWlmIChldi50YXJnZXQuZmlsZXNbMF0udHlwZSA9PSAnYXBwbGljYXRpb24vcGRmJykgewoJCQkJCQkJCQlmb3JtRGF0YS5hcHBlbmQoInVwZCIsIGV2LnRhcmdldC5maWxlc1swXSk7CgkJCQkJCQkJfQoJCQkJCQkJCWVsc2UgewoJCQkJCQkJCQlsZXQgZmlsZTsKCQkJCQkJCQkJaWYgKChldi50YXJnZXQuZmlsZXNbMF0uc2l6ZSAvIDEwMjQpIDwgNTAwKSB7CgkJCQkJCQkJCQlmaWxlID0gZXYudGFyZ2V0LmZpbGVzWzBdOwoJCQkJCQkJCQl9CgkJCQkJCQkJCWVsc2UgewoJCQkJCQkJCQkJbGV0IHR5cGUgPSBldi50YXJnZXQuZmlsZXNbMF0udHlwZS5zcGxpdCgnLycpWzFdOwoJCQkJCQkJCQkJZmlsZSA9IG5ldyBGaWxlKFtyZXNdLCBgbmFtZS4ke3R5cGV9YCwgewoJCQkJCQkJCQkJCXR5cGU6IHJlcy50eXBlCgkJCQkJCQkJCQl9KTsKCQkJCQkJCQkJfQoKCQkJCQkJCQkJZm9ybURhdGEuYXBwZW5kKCJ1cGQiLCBmaWxlKTsKCQkJCQkJCQl9CgoKCQkJCQkJCQkvLyBmb3JtRGF0YS5hcHBlbmQoImZpbGUiLCByZXMpOwoJCQkJCQkJCWNvbnN0IGN1cnJldFZhbGlkRGF0YSA9IGdldEFwcGxpY2FudERhdGEobmFtZSk7CgkJCQkJCQkJdmVyaWZ5RG9jTmV3KGVsZW1lbnQuaWQsIGZvcm1EYXRhLCBuYW1lKQoJCQkJCQkJCQkudGhlbigocmVzKSA9PiB7CgkJCQkJCQkJCQlTdG9yZURvY3VtZW50TmFtZShlbGVtZW50LmlkLCByZXMudmFsdWUuZmlsZV9uYW1lKTsKCQkJCQkJCQkJCXNtTG9hZGVyLmlubmVySFRNTCA9ICcnOwoJCQkJCQkJCQkJaW1hZ2VVcGxvYWRpbmcgPSBpbWFnZVVwbG9hZGluZy5maWx0ZXIoeCA9PiB4ICE9IGVsZW1lbnQuaWQpOwoKCgkJCQkJCQkJCQlsZXQgbW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIubXl2ZXJNb2RhbCIpOwoJCQkJCQkJCQkJaWYgKHJlcyAmJiByZXMudmVyaWZpZWQpIHsKCgkJCQkJCQkJCQkJcHJldml3ZUNvbnRhaW5ldC5hcHBlbmQodmVyaWZpZWRpY29uKCkpOwoJCQkJCQkJCQkJCWNvbnN0IG15aWdJZCA9IGVsZW1lbnQuaWQgKyAiX2lnbm9yZSI7CgkJCQkJCQkJCQkJaWdub3JlRG9jID0gaWdub3JlRG9jLmZpbHRlcigoaWcpID0+IHsKCQkJCQkJCQkJCQkJcmV0dXJuIGlnLm5hbWUgIT0gbXlpZ0lkOwoJCQkJCQkJCQkJCX0pOwoJCQkJCQkJCQkJfSBlbHNlIHsKCgkJCQkJCQkJCQkJLy8gYWxlcnQoJ25vdCB0aGVuJyk7CgkJCQkJCQkJCQkJLy8gaWYgKAoJCQkJCQkJCQkJCS8vIAlyZXMgJiYKCQkJCQkJCQkJCQkvLyAJKHJlcy5tZXNzYWdlcy5sZW5ndGggPiAwIHx8IHJlcy52YWx1ZS5sZW5ndGggPiAwKQoJCQkJCQkJCQkJCS8vICkgewoJCQkJCQkJCQkJCS8vIAlsZXQgZGlzcGxheVRleHQgPSAiIjsKCQkJCQkJCQkJCQkvLyAJaWYgKHJlcy5tZXNzYWdlcy5sZW5ndGggPiAwKSB7CgkJCQkJCQkJCQkJLy8gCQlyZXMubWVzc2FnZXMuZm9yRWFjaCgobXl2KSA9PiB7CgkJCQkJCQkJCQkJLy8gCQkJZGlzcGxheVRleHQgPSBkaXNwbGF5VGV4dCArIG15diArICI8YnI+IjsKCQkJCQkJCQkJCQkvLyAJCX0pOwoJCQkJCQkJCQkJCS8vIAl9CgkJCQkJCQkJCQkJLy8gCWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoCgkJCQkJCQkJCQkJLy8gCQkiI215UG9wdXAgLnBvcHVwX3dhcm5pbmd0ZXh0IgoJCQkJCQkJCQkJCS8vIAkpLmlubmVySFRNTCA9IGRpc3BsYXlUZXh0OwoKCQkJCQkJCQkJCQkvLyAJZG9jdW1lbnQKCQkJCQkJCQkJCQkvLyAJCS5xdWVyeVNlbGVjdG9yKCIjbXlQb3B1cCAuaWdub3JlUHJfQnRuIikKCQkJCQkJCQkJCQkvLyAJCS5jbGFzc0xpc3QucmVtb3ZlKCJoaWRkZW4iKTsKCgkJCQkJCQkJCQkJLy8gCWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoCgkJCQkJCQkJCQkJLy8gCQkiI215UG9wdXAgLmlnbm9yZVByX0J0biIKCQkJCQkJCQkJCQkvLyAJKS5vbmNsaWNrID0gZnVuY3Rpb24gKCkgewoJCQkJCQkJCQkJCS8vIAkJY29uc3QgbXlpZ0lkID0gZWxlbWVudC5pZCArICJfaWdub3JlIjsKCQkJCQkJCQkJCQkvLyAJCWlnbm9yZURvYyA9IGlnbm9yZURvYy5maWx0ZXIoKGlnKSA9PiB7CgkJCQkJCQkJCQkJLy8gCQkJcmV0dXJuIGlnLm5hbWUgIT0gbXlpZ0lkOwoJCQkJCQkJCQkJCS8vIAkJfSk7CgkJCQkJCQkJCQkJLy8gCQlpZ25vcmVEb2MucHVzaCh7IG5hbWU6IG15aWdJZCwgdmFsdWU6IHJlcy52YWx1ZSB9KTsKCQkJCQkJCQkJCQkvLyAJCW1vZGFsLmNsYXNzTGlzdC50b2dnbGUoInNob3ctbW9kYWwiKTsKCQkJCQkJCQkJCQkvLyAJfTsKCQkJCQkJCQkJCQkvLyB9IGVsc2UgewoJCQkJCQkJCQkJCS8vIAlkb2N1bWVudC5xdWVyeVNlbGVjdG9yKAoJCQkJCQkJCQkJCS8vIAkJIiNteVBvcHVwIC5wb3B1cF93YXJuaW5ndGV4dCIKCQkJCQkJCQkJCQkvLyAJCS8vICkuaW5uZXJUZXh0ID0gIlBsZWFzZSB1cGxvYWQgcHJvcGVyIERvY3VtZW50LiI7CgkJCQkJCQkJCQkJLy8gCSkuaW5uZXJUZXh0ID0gIllvdSBjYW4gUHJvY2VlZCBNYW51YWxseS4iOwoKCgkJCQkJCQkJCQkJLy8gCWRvY3VtZW50CgkJCQkJCQkJCQkJLy8gCQkucXVlcnlTZWxlY3RvcigiI215UG9wdXAgLmlnbm9yZVByX0J0biIpCgkJCQkJCQkJCQkJLy8gCQkuY2xhc3NMaXN0LmFkZCgiaGlkZGVuIik7CgkJCQkJCQkJCQkJLy8gfQoJCQkJCQkJCQkJCS8vIG1vZGFsLmNsYXNzTGlzdC50b2dnbGUoInNob3ctbW9kYWwiKTsKCQkJCQkJCQkJCQkvLyBwcmV2aXdlQ29udGFpbmV0LmFwcGVuZCh2ZXJpZnlmYWlsc2ljb24oKSk7CgkJCQkJCQkJCQkJbW9kYWwuY2xhc3NMaXN0LnRvZ2dsZSgic2hvdy1tb2RhbCIpOwoJCQkJCQkJCQkJCS8vIHByZXZpd2VDb250YWluZXQuYXBwZW5kKHZlcmlmeWZhaWxzaWNvbigpKTsKCgkJCQkJCQkJCQkJZG9jdW1lbnQucXVlcnlTZWxlY3RvcigKCQkJCQkJCQkJCQkJIiNteVBvcHVwIC5kb2NfcmV1cGxvYWRCdG4iCgkJCQkJCQkJCQkJKS5vbmNsaWNrID0gZnVuY3Rpb24gKCkgewoJCQkJCQkJCQkJCQljb25zdCBjdXJFbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGVtZW50LmlkKTsKCQkJCQkJCQkJCQkJY29uc3QgdGFyZ2V0RWxlID0gaGFzU29tZU5leHRTaWJsaW5nVGhlQ2xhc3MoCgkJCQkJCQkJCQkJCQljdXJFbGUsCgkJCQkJCQkJCQkJCQkicHJldmlld19hY3Rpb25idXR0b24iCgkJCQkJCQkJCQkJCSk7CgkJCQkJCQkJCQkJCWN1ckVsZS52YWx1ZSA9IG51bGw7CgkJCQkJCQkJCQkJCWlmICh0YXJnZXRFbGUpIHsKCQkJCQkJCQkJCQkJCS8vIGNvbnNvbGUubG9nKGltYWdlVXBsb2FkaW5nKTsKCQkJCQkJCQkJCQkJCWltYWdlVXBsb2FkaW5nID0gaW1hZ2VVcGxvYWRpbmcuZmlsdGVyKHggPT4geCAhPSB0YXJnZXRFbGUucGFyZW50Tm9kZS5jaGlsZHJlblswXS5pZCk7CgkJCQkJCQkJCQkJCQkvLyBjb25zb2xlLmxvZyhpbWFnZVVwbG9hZGluZyk7CgkJCQkJCQkJCQkJCQl0YXJnZXRFbGUucmVtb3ZlKCk7CgkJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCQkJbW9kYWwuY2xhc3NMaXN0LnRvZ2dsZSgic2hvdy1tb2RhbCIpOwoJCQkJCQkJCQkJCX07CgoJCQkJCQkJCQkJCWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoCgkJCQkJCQkJCQkJCSIjbXlQb3B1cCAuaWdub3JlUHJfQnRuIgoJCQkJCQkJCQkJCSkub25jbGljayA9IGZ1bmN0aW9uICgpIHsKCQkJCQkJCQkJCQkJY29uc3QgbXlpZ0lkID0gZWxlbWVudC5pZCArICJfaWdub3JlIjsKCQkJCQkJCQkJCQkJaWdub3JlRG9jID0gaWdub3JlRG9jLmZpbHRlcigoaWcpID0+IHsKCQkJCQkJCQkJCQkJCXJldHVybiBpZy5uYW1lICE9IG15aWdJZDsKCQkJCQkJCQkJCQkJfSk7CgkJCQkJCQkJCQkJCWlnbm9yZURvYy5wdXNoKHsgbmFtZTogbXlpZ0lkLCB2YWx1ZTogcmVzLnZhbHVlIH0pOwoJCQkJCQkJCQkJCQltb2RhbC5jbGFzc0xpc3QudG9nZ2xlKCJzaG93LW1vZGFsIik7CgkJCQkJCQkJCQkJfTsKCQkJCQkJCQkJCX0KCgkJCQkJCQkJCQkvLyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKAoJCQkJCQkJCQkJLy8gCSIjbXlQb3B1cCAuZG9jX3JldXBsb2FkQnRuIgoJCQkJCQkJCQkJLy8gKS5vbmNsaWNrID0gZnVuY3Rpb24gKCkgewoJCQkJCQkJCQkJLy8gCWNvbnN0IGN1ckVsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnQuaWQpOwoJCQkJCQkJCQkJLy8gCWNvbnN0IHRhcmdldEVsZSA9IGhhc1NvbWVOZXh0U2libGluZ1RoZUNsYXNzKAoJCQkJCQkJCQkJLy8gCQljdXJFbGUsCgkJCQkJCQkJCQkvLyAJCSJwcmV2aWV3X2FjdGlvbmJ1dHRvbiIKCQkJCQkJCQkJCS8vIAkpOwoJCQkJCQkJCQkJLy8gCWN1ckVsZS52YWx1ZSA9IG51bGw7CgkJCQkJCQkJCQkvLyAJaWYgKHRhcmdldEVsZSkgewoJCQkJCQkJCQkJLy8gCQl0YXJnZXRFbGUucmVtb3ZlKCk7CgkJCQkJCQkJCQkvLyAJfQoJCQkJCQkJCQkJLy8gCW1vZGFsLmNsYXNzTGlzdC50b2dnbGUoInNob3ctbW9kYWwiKTsKCQkJCQkJCQkJCS8vIH07CgoJCQkJCQkJCQl9KQoJCQkJCQkJCQkuY2F0Y2goKGVycikgPT4gewoJCQkJCQkJCQkJc2hvd0ZhaWx1cmVGdW4oKTsKCQkJCQkJCQkJfSk7CgkJCQkJCQl9KQoJCQkJCQkJLmNhdGNoKChlcnIpID0+IHsKCQkJCQkJCQljb25zb2xlLmxvZyhlcnIpOwoJCQkJCQkJCXNob3dGYWlsdXJlRnVuKCk7CgkJCQkJCQl9KTsKCQkJCQl9IGNhdGNoIChlcnJvcikgewoJCQkJCQljb25zb2xlLmxvZyh7IGVycm9yIH0pOwoJCQkJCX0KCQkJCX0pOwoKCQkJCW1haW5VcGxvYWRDb250YWluZXIuYXBwZW5kKGlucHV0KTsKCQkJCWZjdG4uYXBwZW5kKGxhYmVsLCBtYWluVXBsb2FkQ29udGFpbmVyKTsKCgkJCQlmaWxlVXBsb2FkLnB1c2goZmN0bik7CgkJCX0gZWxzZSB7CgkJCQljb25zdCB7IGxhYmVsLCB0eXBlLCBpZCwga2V5LCB2YWxpZGF0ZSwgZGVmYXVsdFZhbHVlIH0gPSBlbGVtZW50OwoJCQkJaWYgKGxhYmVsID09ICdJIGRvIG5vdCBoYXZlIGEgQWFkaGFhciBjYXJkJykgewoJCQkJCWNvbnN0IGlucHV0Q3RuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgkJCQkJaW5wdXRDdG4uY2xhc3NMaXN0LmFkZCgiZml0Y29udGVudF9jaGVjayIsICJhYWRoYXJfY2hlY2siKTsKCQkJCQljb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7CgkJCQkJaW5wdXQuc2V0QXR0cmlidXRlKCJpZCIsIGlkKTsKCQkJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoIm5hbWUiLCBrZXkpOwoJCQkJCWlucHV0LnNldEF0dHJpYnV0ZSgidHlwZSIsIHR5cGUpOwoKCQkJCQljb25zdCBsYWJlbEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGFiZWwiKTsKCQkJCQlsYWJlbEVsLmlubmVyVGV4dCA9IGxhYmVsOwoJCQkJCWxhYmVsRWwuc2V0QXR0cmlidXRlKCJmb3IiLCBpZCk7CgkJCQkJaWYgKGRlZmF1bHRWYWx1ZSkgewoJCQkJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoImNoZWNrZWQiLCBkZWZhdWx0VmFsdWUpOwoJCQkJCX0KCgkJCQkJLy8gaW5wdXQuc2V0QXR0cmlidXRlKCJkaXNhYmxlZCIsIHRydWUpOwoJCQkJCS8vIGlucHV0LmNsYXNzTGlzdC5hZGQoIm5vdF9lZGl0YWJsZSIpOwoJCQkJCWlucHV0Lm9uY2hhbmdlID0gZnVuY3Rpb24gKGUpIHsKCQkJCQkJY29uc3QgdGVsRWxlID0gZS50YXJnZXQucGFyZW50RWxlbWVudC5uZXh0U2libGluZwoJCQkJCQljb25zdCB0YXJnZXRFbGUgPSBoYXNTb21lTmV4dFNpYmxpbmdUaGVDbGFzcygKCQkJCQkJCXRlbEVsZSwKCQkJCQkJCSJmaWxldXBsb2FkX2NvbnRpYW5lciIKCQkJCQkJKTsKCQkJCQkJY29uc3QgaGlkRWxlID0gdGFyZ2V0RWxlLnF1ZXJ5U2VsZWN0b3IoIi5hYWRoYXJmcm9udCIpOwoJCQkJCQljb25zdCBoaWRFbGViYWNrID0gdGFyZ2V0RWxlLnF1ZXJ5U2VsZWN0b3IoIi5hYWRoYXJiYWNrIik7CgkJCQkJCWlmIChoaWRFbGViYWNrKSB7CgkJCQkJCQlpZiAoZS50YXJnZXQuY2hlY2tlZCkgewoJCQkJCQkJCWhpZEVsZWJhY2suY2xhc3NMaXN0LmFkZCgiaGlkZGVuIik7CgkJCQkJCQkJaGlkRWxlYmFjay5xdWVyeVNlbGVjdG9yQWxsKCJpbnB1dCwgdGV4dGFyZWEsIHNlbGVjdCIpLmZvckVhY2goKGUpID0+IHsKCQkJCQkJCQkJZS5zZXRBdHRyaWJ1dGUoImRpc2FibGVkIiwgdHJ1ZSk7CgkJCQkJCQkJCWUuY2xhc3NMaXN0LmFkZCgibm90X2VkaXRhYmxlIik7CgkJCQkJCQkJfSk7CgkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCWhpZEVsZWJhY2suY2xhc3NMaXN0LnJlbW92ZSgiaGlkZGVuIik7CgkJCQkJCQkJaGlkRWxlYmFjay5xdWVyeVNlbGVjdG9yQWxsKCJpbnB1dCwgdGV4dGFyZWEsIHNlbGVjdCIpLmZvckVhY2goKGUpID0+IHsKCQkJCQkJCQkJZS5yZW1vdmVBdHRyaWJ1dGUoImRpc2FibGVkIik7CgkJCQkJCQkJCWUuY2xhc3NMaXN0LnJlbW92ZSgibm90X2VkaXRhYmxlIik7CgkJCQkJCQkJfSk7CgkJCQkJCQl9CgkJCQkJCX0KCgkJCQkJCWlmIChoaWRFbGUpIHsKCQkJCQkJCWlmIChlLnRhcmdldC5jaGVja2VkKSB7CgkJCQkJCQkJaGlkRWxlLmNsYXNzTGlzdC5hZGQoImhpZGRlbiIpOwoJCQkJCQkJCWhpZEVsZS5xdWVyeVNlbGVjdG9yQWxsKCJpbnB1dCwgdGV4dGFyZWEsIHNlbGVjdCIpLmZvckVhY2goKGUpID0+IHsKCQkJCQkJCQkJZS5zZXRBdHRyaWJ1dGUoImRpc2FibGVkIiwgdHJ1ZSk7CgkJCQkJCQkJCWUuY2xhc3NMaXN0LmFkZCgibm90X2VkaXRhYmxlIik7CgkJCQkJCQkJfSk7CgkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCWhpZEVsZS5jbGFzc0xpc3QucmVtb3ZlKCJoaWRkZW4iKTsKCQkJCQkJCQloaWRFbGUucXVlcnlTZWxlY3RvckFsbCgiaW5wdXQsIHRleHRhcmVhLCBzZWxlY3QiKS5mb3JFYWNoKChlKSA9PiB7CgkJCQkJCQkJCWUucmVtb3ZlQXR0cmlidXRlKCJkaXNhYmxlZCIpOwoJCQkJCQkJCQllLmNsYXNzTGlzdC5yZW1vdmUoIm5vdF9lZGl0YWJsZSIpOwoJCQkJCQkJCX0pOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfTsKCgkJCQkJaW5wdXRDdG4uYXBwZW5kKGlucHV0LCBsYWJlbEVsKTsKCQkJCQljb2wuYXBwZW5kKGlucHV0Q3RuKTsKCQkJCX0gZWxzZSB7CgkJCQkJY29uc3QgaW5wdXRDdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCQkJCQlpbnB1dEN0bi5jbGFzc0xpc3QuYWRkKCJmaXRjb250ZW50X2NoZWNrIiwgInBhbmNhcmRfY2hlY2siKTsKCQkJCQljb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7CgkJCQkJaW5wdXQuc2V0QXR0cmlidXRlKCJpZCIsIGlkKTsKCQkJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoIm5hbWUiLCBrZXkpOwoJCQkJCWlucHV0LnNldEF0dHJpYnV0ZSgidHlwZSIsIHR5cGUpOwoKCQkJCQljb25zdCBsYWJlbEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGFiZWwiKTsKCQkJCQlsYWJlbEVsLmlubmVyVGV4dCA9IGxhYmVsOwoJCQkJCWxhYmVsRWwuc2V0QXR0cmlidXRlKCJmb3IiLCBpZCk7CgkJCQkJaWYgKGRlZmF1bHRWYWx1ZSkgewoJCQkJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoImNoZWNrZWQiLCBkZWZhdWx0VmFsdWUpOwoJCQkJCX0KCgkJCQkJLy8gaW5wdXQuc2V0QXR0cmlidXRlKCJkaXNhYmxlZCIsIHRydWUpOwoJCQkJCS8vIGlucHV0LmNsYXNzTGlzdC5hZGQoIm5vdF9lZGl0YWJsZSIpOwoJCQkJCWlucHV0Lm9uY2hhbmdlID0gZnVuY3Rpb24gKGUpIHsKCQkJCQkJY29uc3QgdGVsRWxlID0gZS50YXJnZXQucGFyZW50RWxlbWVudC5uZXh0U2libGluZy5uZXh0U2libGluZwoJCQkJCQljb25zdCB0YXJnZXRFbGUgPSBoYXNTb21lTmV4dFNpYmxpbmdUaGVDbGFzcygKCQkJCQkJCXRlbEVsZSwKCQkJCQkJCSJmaWxldXBsb2FkX2NvbnRpYW5lciIKCQkJCQkJKTsKCQkJCQkJY29uc3QgaGlkRWxlID0gdGFyZ2V0RWxlLnF1ZXJ5U2VsZWN0b3IoIi5maWxlLXVwbG9hZCIpOwoJCQkJCQlpZiAoZS50YXJnZXQuY2hlY2tlZCAmJiBoaWRFbGUpIHsKCQkJCQkJCWhpZEVsZS5jbGFzc0xpc3QuYWRkKCJoaWRkZW4iKTsKCQkJCQkJCWhpZEVsZS5xdWVyeVNlbGVjdG9yQWxsKCJpbnB1dCwgdGV4dGFyZWEsIHNlbGVjdCIpLmZvckVhY2goKGUpID0+IHsKCQkJCQkJCQllLnNldEF0dHJpYnV0ZSgiZGlzYWJsZWQiLCB0cnVlKTsKCQkJCQkJCQllLmNsYXNzTGlzdC5hZGQoIm5vdF9lZGl0YWJsZSIpOwoJCQkJCQkJfSk7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQloaWRFbGUuY2xhc3NMaXN0LnJlbW92ZSgiaGlkZGVuIik7CgkJCQkJCQloaWRFbGUucXVlcnlTZWxlY3RvckFsbCgiaW5wdXQsIHRleHRhcmVhLCBzZWxlY3QiKS5mb3JFYWNoKChlKSA9PiB7CgkJCQkJCQkJZS5yZW1vdmVBdHRyaWJ1dGUoImRpc2FibGVkIik7CgkJCQkJCQkJZS5jbGFzc0xpc3QucmVtb3ZlKCJub3RfZWRpdGFibGUiKTsKCQkJCQkJCX0pOwoJCQkJCQl9CgkJCQkJfTsKCgkJCQkJaW5wdXRDdG4uYXBwZW5kKGlucHV0LCBsYWJlbEVsKTsKCQkJCQljb2wuYXBwZW5kKGlucHV0Q3RuKTsKCQkJCX0KCQkJfQoJCX0pOwoKCQlpZiAoZmlsZVVwbG9hZC5sZW5ndGggIT0gMCkgewoJCQljb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCQkJZGl2LnNldEF0dHJpYnV0ZSgiY2xhc3MiLCAiZmlsZXVwbG9hZF9jb250aWFuZXIiKTsKCQkJZGl2LmFwcGVuZCguLi5maWxlVXBsb2FkKTsKCQkJY29sLmFwcGVuZChkaXYpOwoJCX0KCgkJaWYgKGRvY3VtZW50cykgewoJCQljb25zdCBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxhYmVsIik7CgkJCWxhYmVsLnNldEF0dHJpYnV0ZSgiY2xhc3MiLCAib3RoZXJfZG9jdW1lbnRjbGFzcyIpOwoJCQlsYWJlbC5pbm5lclRleHQgPSAiT3RoZXIgRG9jdW1lbnQiOwoJCQljb2wuYXBwZW5kKGxhYmVsKTsKCgkJCWNvbnN0IGZpbGVEb2MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCQkJZmlsZURvYy5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgImRvY19zZWxlY3Rpb25fY29udGFpbmVyIik7CgkJCWNvbnN0IGxhYmVscGx1cyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxhYmVsIik7CgkJCWxhYmVscGx1cy5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgIm90aGVyX2RvY3VtZW50cGx1cyIpOwoJCQlsYWJlbHBsdXMuaW5uZXJUZXh0ID0gIisiOwoKCQkJLy8gb3RoZXJfZG9jdW1lbnRwbHVzCgkJCWxhYmVscGx1cy5vbmNsaWNrID0gZnVuY3Rpb24gKGUpIHsKCQkJCWlmIChoYXNTb21lUGFyZW50VGhlQ2xhc3MoZS50YXJnZXQsICJkb2Nfc2VsZWN0aW9uX2NvbnRhaW5lciIpKSB7CgkJCQkJY29uc3QgbWFpbmVsZW1lbnQgPSBoYXNTb21lUGFyZW50VGhlQ2xhc3MoCgkJCQkJCWUudGFyZ2V0LAoJCQkJCQkiZG9jX3NlbGVjdGlvbl9jb250YWluZXIiCgkJCQkJKTsKCQkJCQlpZiAobWFpbmVsZW1lbnQpIHsKCQkJCQkJY29uc3QgYWNoaXZlZEVsZSA9IGhhc1NvbWVTaWJsaW5nVGhlQ2xhc3MoCgkJCQkJCQltYWluZWxlbWVudCwKCQkJCQkJCSJmaWxldXBsb2FkX2NvbnRpYW5lciIKCQkJCQkJKTsKCgkJCQkJCWNvbnN0IHNlbGVjdHBlcmVudE5vZGUgPSBoYXNTb21lU2libGluZ1RoZUNsYXNzKAoJCQkJCQkJZS50YXJnZXQsCgkJCQkJCQkiaW5wdXRDdG4iCgkJCQkJCSk7CgkJCQkJCWNvbnN0IHNlbGVjdGNoaWxkTm9kZSA9IGhhc1NvbWVDaGlsZE5vZGUoCgkJCQkJCQlzZWxlY3RwZXJlbnROb2RlLAoJCQkJCQkJIlNFTEVDVCIKCQkJCQkJKTsKCQkJCQkJY29uc3QgbXlWYWx1ZSA9IHNlbGVjdGNoaWxkTm9kZS52YWx1ZTsKCQkJCQkJY29uc3QgZmlsZUN0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwoKCQkJCQkJY29uc3QgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsYWJlbCIpOwoJCQkJCQlsYWJlbC5pbm5lclRleHQgPSBteVZhbHVlOwoKCQkJCQkJZmlsZUN0bi5jbGFzc0xpc3QuYWRkKCJmaWxlLXVwbG9hZCIsIGAke215VmFsdWUucmVwbGFjZUFsbCgiICIsICIiKS50b0xvd2VyQ2FzZSgpfWApOwoKCQkJCQkJbGV0IG1haW5VcGxvYWRDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCQkJCQkJbWFpblVwbG9hZENvbnRhaW5lci5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgIm1haW5VcGxvYWRfY29udGFpbmVyIik7CgoJCQkJCQljb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7CgkJCQkJCWNvbnN0IG15aWQgPSBgJHtuYW1lfV8ke3R5cGV9XyR7bXlWYWx1ZQoJCQkJCQkJLnJlcGxhY2VBbGwoIiAiLCAiIikKCQkJCQkJCS50b0xvd2VyQ2FzZSgpfWA7CgkJCQkJCWlucHV0LnNldEF0dHJpYnV0ZSgidHlwZSIsICJmaWxlIik7CgkJCQkJCWlucHV0LnNldEF0dHJpYnV0ZSgicmVxdWlyZWQiLCB0cnVlKTsKCQkJCQkJaW5wdXQuc2V0QXR0cmlidXRlKCJpZCIsIG15aWQpOwoJCQkJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoIm5hbWUiLCBteWlkKTsKCgkJCQkJCWlucHV0Lm9uY2xpY2sgPSAoZXYpID0+IHsKCQkJCQkJCWV2LnRhcmdldC52YWx1ZSA9IG51bGw7CgkJCQkJCX07CgoJCQkJCQlpbnB1dC5hZGRFdmVudExpc3RlbmVyKCJjaGFuZ2UiLCBhc3luYyAoZXYpID0+IHsKCgkJCQkJCQl0cnkgewoJCQkJCQkJCWlmIChldi50YXJnZXQubmV4dEVsZW1lbnRTaWJsaW5nKSB7CgkJCQkJCQkJCWV2LnRhcmdldC5uZXh0RWxlbWVudFNpYmxpbmcucmVtb3ZlKCk7CgkJCQkJCQkJfQoKCQkJCQkJCQlsZXQgbXlGaWxlVVJMID0gJyc7CgkJCQkJCQkJbGV0IGltYWdlQmxvYiA9ICcnOwoJCQkJCQkJCS8vIENoZWNrIGlmIGN1cnJlbnQgZG9jdW1lbnQgaXMgcGRmCgkJCQkJCQkJaWYgKGV2LnRhcmdldC5maWxlc1swXS50eXBlID09ICdhcHBsaWNhdGlvbi9wZGYnKSB7CgkJCQkJCQkJCXRyeSB7CgkJCQkJCQkJCQlteUZpbGVVUkwgPSBhd2FpdCBwZGZUb0ltYWdlKGV2LnRhcmdldC5maWxlc1swXSkKCQkJCQkJCQkJCWltYWdlQmxvYiA9IGF3YWl0IHBkZlRvSW1hZ2VCbG9iKGV2LnRhcmdldC5maWxlc1swXSk7CgoJCQkJCQkJCQl9IGNhdGNoIChlcnJvcikgewoJCQkJCQkJCQkJY29uc29sZS5lcnJvcignRXJyb3IgY29udmVydGluZyBQREYgdG8gaW1hZ2U6JywgZXJyb3IpOwoJCQkJCQkJCQl9CgkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJbXlGaWxlVVJMID0gVVJMLmNyZWF0ZU9iamVjdFVSTChldi50YXJnZXQuZmlsZXNbMF0pOwoJCQkJCQkJCX0KCgkJCQkJCQkJbGV0IHByZXZpd2VDb250YWluZXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCQkJCQkJCQlwcmV2aXdlQ29udGFpbmV0LnNldEF0dHJpYnV0ZSgiY2xhc3MiLCAicHJldmlld19hY3Rpb25idXR0b24iKTsKCQkJCQkJCQljb25zdCBsaW5rbmF2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpOwoJCQkJCQkJCXZhciBpbWdhZGRoYXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbWciKTsKCQkJCQkJCQlsaW5rbmF2LnNldEF0dHJpYnV0ZSgiaHJlZiIsIG15RmlsZVVSTCk7CgkJCQkJCQkJaW1nYWRkaGFyLnNldEF0dHJpYnV0ZSgiaGVpZ2h0IiwgNTApOwoJCQkJCQkJCWltZ2FkZGhhci5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgInVwbG9hZF9pbWFnZV9wcmV2aWV3Iik7CgkJCQkJCQkJaW1nYWRkaGFyLnNyYyA9IG15RmlsZVVSTDsKCQkJCQkJCQlsaW5rbmF2LnNldEF0dHJpYnV0ZSgidGFyZ2V0IiwgIl9ibGFuayIpOwoJCQkJCQkJCWxpbmtuYXYuYXBwZW5kKGltZ2FkZGhhcik7CgkJCQkJCQkJcHJldml3ZUNvbnRhaW5ldC5hcHBlbmQobGlua25hdik7CgoJCQkJCQkJCWlmIChteUZpbGVVUkwpIHsKCQkJCQkJCQkJY29uc3QgcmVtb3ZlRWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgkJCQkJCQkJCXJlbW92ZUVsZS5jbGFzc0xpc3QuYWRkKCJyZW1vdmVfcHJldmlld19lbGUiKTsKCQkJCQkJCQkJY29uc3QgbmV3U3VmZiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIpOwoJCQkJCQkJCQluZXdTdWZmLmlubmVySFRNTCA9ICJYIjsKCQkJCQkJCQkJcmVtb3ZlRWxlLmFwcGVuZENoaWxkKG5ld1N1ZmYpOwoKCgkJCQkJCQkJCXJlbW92ZUVsZS5vbmNsaWNrID0gZnVuY3Rpb24gKGUpIHsKCQkJCQkJCQkJCWNvbnN0IHNlbGZFbGUgPSBlLnRhcmdldDsKCQkJCQkJCQkJCWNvbnN0IHRhcmdldEVsZSA9IGhhc1NvbWVQYXJlbnRUaGVDbGFzcygKCQkJCQkJCQkJCQlzZWxmRWxlLAoJCQkJCQkJCQkJCSJwcmV2aWV3X2FjdGlvbmJ1dHRvbiIKCQkJCQkJCQkJCSk7CgkJCQkJCQkJCQlpbWFnZVVwbG9hZGluZyA9IGltYWdlVXBsb2FkaW5nLmZpbHRlcih4ID0+IHggIT0gdGFyZ2V0RWxlLnBhcmVudE5vZGUuY2hpbGRyZW5bMF0uaWQpOwoJCQkJCQkJCQkJdGFyZ2V0RWxlLnJlbW92ZSgpOwoJCQkJCQkJCQkJaW5wdXQudmFsdWUgPSBudWxsOwoJCQkJCQkJCQl9OwoJCQkJCQkJCQlwcmV2aXdlQ29udGFpbmV0LmFwcGVuZChyZW1vdmVFbGUpOwoJCQkJCQkJCX0KCgkJCQkJCQkJbWFpblVwbG9hZENvbnRhaW5lci5hcHBlbmQocHJldml3ZUNvbnRhaW5ldCk7CgoJCQkJCQkJCWNvbXByZXNzSW1hZ2UobXlGaWxlVVJMLCBldiwgaW1hZ2VCbG9iKQoJCQkJCQkJCQkudGhlbigocmVzKSA9PiB7CgkJCQkJCQkJCQkvLyBzdG9yZURvY3VlbWVudChteWlkLCByZXMpOwoJCQkJCQkJCQkJY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsKCQkJCQkJCQkJCWlmIChldi50YXJnZXQuZmlsZXNbMF0udHlwZSA9PSAnYXBwbGljYXRpb24vcGRmJykgewoJCQkJCQkJCQkJCWZvcm1EYXRhLmFwcGVuZCgidXBkIiwgZXYudGFyZ2V0LmZpbGVzWzBdKTsKCQkJCQkJCQkJCX0KCQkJCQkJCQkJCWVsc2UgewoKCQkJCQkJCQkJCQlsZXQgZmlsZTsKCQkJCQkJCQkJCQlpZiAoKGV2LnRhcmdldC5maWxlc1swXS5zaXplIC8gMTAyNCkgPCA1MDApIHsKCQkJCQkJCQkJCQkJZmlsZSA9IGV2LnRhcmdldC5maWxlc1swXTsKCQkJCQkJCQkJCQl9CgkJCQkJCQkJCQkJZWxzZSB7CgkJCQkJCQkJCQkJCWxldCB0eXBlID0gZXYudGFyZ2V0LmZpbGVzWzBdLnR5cGUuc3BsaXQoJy8nKVsxXTsKCQkJCQkJCQkJCQkJZmlsZSA9IG5ldyBGaWxlKFtyZXNdLCBgbmFtZS4ke3R5cGV9YCwgewoJCQkJCQkJCQkJCQkJdHlwZTogcmVzLnR5cGUKCQkJCQkJCQkJCQkJfSk7CgkJCQkJCQkJCQkJfQoKCQkJCQkJCQkJCQlmb3JtRGF0YS5hcHBlbmQoInVwZCIsIGZpbGUpOwoJCQkJCQkJCQkJfQoJCQkJCQkJCQkJY29uc3QgY3VycmV0VmFsaWREYXRhID0gZ2V0QXBwbGljYW50RGF0YShuYW1lKTsKCgkJCQkJCQkJCQlsZXQgc21Mb2FkZXIgPSBjcmVhdGVMb2FkZXIoKTsKCQkJCQkJCQkJCXByZXZpd2VDb250YWluZXQuYXBwZW5kKHNtTG9hZGVyKTsKCQkJCQkJCQkJCWltYWdlVXBsb2FkaW5nLnB1c2gobXlpZCk7CgoJCQkJCQkJCQkJY29uc3Qgc2hvd0ZhaWx1cmVGdW4gPSAoKSA9PiB7CgkJCQkJCQkJCQkJbGV0IG1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLm15dmVyTW9kYWwiKTsKCQkJCQkJCQkJCQltb2RhbC5jbGFzc0xpc3QudG9nZ2xlKCJzaG93LW1vZGFsIik7CgkJCQkJCQkJCQkJcHJldml3ZUNvbnRhaW5ldC5hcHBlbmQodmVyaWZ5ZmFpbHNpY29uKCkpOwoKCQkJCQkJCQkJCQlkb2N1bWVudC5xdWVyeVNlbGVjdG9yKAoJCQkJCQkJCQkJCQkiI215UG9wdXAgLmRvY19yZXVwbG9hZEJ0biIKCQkJCQkJCQkJCQkpLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7CgkJCQkJCQkJCQkJCWNvbnN0IGN1ckVsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG15aWQpOwoJCQkJCQkJCQkJCQljb25zdCB0YXJnZXRFbGUgPSBoYXNTb21lTmV4dFNpYmxpbmdUaGVDbGFzcygKCQkJCQkJCQkJCQkJCWN1ckVsZSwKCQkJCQkJCQkJCQkJCSJwcmV2aWV3X2FjdGlvbmJ1dHRvbiIKCQkJCQkJCQkJCQkJKTsKCQkJCQkJCQkJCQkJY3VyRWxlLnZhbHVlID0gbnVsbDsKCQkJCQkJCQkJCQkJaWYgKHRhcmdldEVsZSkgewoJCQkJCQkJCQkJCQkJdGFyZ2V0RWxlLnJlbW92ZSgpOwoJCQkJCQkJCQkJCQl9CgkJCQkJCQkJCQkJCW1vZGFsLmNsYXNzTGlzdC50b2dnbGUoInNob3ctbW9kYWwiKTsKCQkJCQkJCQkJCQl9OwoKCQkJCQkJCQkJCQlkb2N1bWVudC5xdWVyeVNlbGVjdG9yKAoJCQkJCQkJCQkJCQkiI215UG9wdXAgLmlnbm9yZVByX0J0biIKCQkJCQkJCQkJCQkpLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7CgkJCQkJCQkJCQkJCWNvbnN0IG15aWdJZCA9IG15aWQgKyAiX2lnbm9yZSI7CgkJCQkJCQkJCQkJCWlnbm9yZURvYyA9IGlnbm9yZURvYy5maWx0ZXIoKGlnKSA9PiB7CgkJCQkJCQkJCQkJCQlyZXR1cm4gaWcubmFtZSAhPSBteWlnSWQ7CgkJCQkJCQkJCQkJCX0pOwoJCQkJCQkJCQkJCQlpZ25vcmVEb2MucHVzaCh7IG5hbWU6IG15aWdJZCwgdmFsdWU6ICcnIH0pOwoJCQkJCQkJCQkJCQltb2RhbC5jbGFzc0xpc3QudG9nZ2xlKCJzaG93LW1vZGFsIik7CgkJCQkJCQkJCQkJfTsKCQkJCQkJCQkJCX0KCgkJCQkJCQkJCQl2ZXJpZnlEb2NOZXcobXlpZCwgZm9ybURhdGEsIG5hbWUpCgkJCQkJCQkJCQkJLnRoZW4oKHJlcykgPT4gewoKCQkJCQkJCQkJCQkJU3RvcmVEb2N1bWVudE5hbWUobXlpZCwgcmVzLnZhbHVlLmZpbGVfbmFtZSk7CgkJCQkJCQkJCQkJCXNtTG9hZGVyLmlubmVySFRNTCA9ICcnOwoJCQkJCQkJCQkJCQlpbWFnZVVwbG9hZGluZyA9IGltYWdlVXBsb2FkaW5nLmZpbHRlcih4ID0+IHggIT0gbXlpZCk7CgkJCQkJCQkJCQkJCWxldCBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5teXZlck1vZGFsIik7CgkJCQkJCQkJCQkJCWlmIChyZXMgJiYgcmVzLnZlcmlmaWVkKSB7CgoJCQkJCQkJCQkJCQkJcHJldml3ZUNvbnRhaW5ldC5hcHBlbmQodmVyaWZpZWRpY29uKCkpOwoJCQkJCQkJCQkJCQkJY29uc3QgbXlpZ0lkID0gbXlpZCArICJfaWdub3JlIjsKCQkJCQkJCQkJCQkJCWlnbm9yZURvYyA9IGlnbm9yZURvYy5maWx0ZXIoKGlnKSA9PiB7CgkJCQkJCQkJCQkJCQkJcmV0dXJuIGlnLm5hbWUgIT0gbXlpZ0lkOwoJCQkJCQkJCQkJCQkJfSk7CgoJCQkJCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQkJCQkJc2hvd0ZhaWx1cmVGdW4oKTsKCQkJCQkJCQkJCQkJfQoKCQkJCQkJCQkJCQl9KQoJCQkJCQkJCQkJCS5jYXRjaCgoZXJyKSA9PiB7CgkJCQkJCQkJCQkJCVN0b3JlRG9jdW1lbnROYW1lKG15aWQsIGVyci52YWx1ZS5maWxlX25hbWUpOwoJCQkJCQkJCQkJCQlzbUxvYWRlci5pbm5lckhUTUwgPSAnJzsKCQkJCQkJCQkJCQkJaW1hZ2VVcGxvYWRpbmcgPSBpbWFnZVVwbG9hZGluZy5maWx0ZXIoeCA9PiB4ICE9IG15aWQpOwoJCQkJCQkJCQkJCQlzaG93RmFpbHVyZUZ1bigpOwoKCQkJCQkJCQkJCQl9KTsKCQkJCQkJCQkJfSkKCQkJCQkJCQkJLmNhdGNoKCgpID0+IHsKCQkJCQkJCQkJCXByZXZpd2VDb250YWluZXQuYXBwZW5kKHZlcmlmeWZhaWxzaWNvbigpKTsKCgkJCQkJCQkJCX0pOwoJCQkJCQkJfSBjYXRjaCAoZXJyb3IpIHsKCQkJCQkJCQljb25zb2xlLmxvZyh7IGVycm9yIH0pOwoKCQkJCQkJCX0KCQkJCQkJfSk7CgoJCQkJCQlsZXQgbWludXBsYW9kID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpOwoJCQkJCQltaW51cGxhb2Quc2V0QXR0cmlidXRlKCJjbGFzcyIsICJtaW51c191cGxvYWRjb250YWluZXIiKTsKCQkJCQkJbWludXBsYW9kLmlubmVySFRNTCA9ICItIjsKCgkJCQkJCW1pbnVwbGFvZC5vbmNsaWNrID0gZnVuY3Rpb24gKGUpIHsKCQkJCQkJCWNvbnN0IGRlbHRnZWxlID0gaGFzU29tZVBhcmVudFRoZUNsYXNzKGUudGFyZ2V0LCAiZmlsZS11cGxvYWQiKTsKCQkJCQkJCWRlbHRnZWxlLnJlbW92ZSgpOwoJCQkJCQl9OwoKCQkJCQkJbWFpblVwbG9hZENvbnRhaW5lci5hcHBlbmQoaW5wdXQpOwoJCQkJCQlmaWxlQ3RuLmFwcGVuZChsYWJlbCwgbWFpblVwbG9hZENvbnRhaW5lciwgbWludXBsYW9kKTsKCQkJCQkJYWNoaXZlZEVsZS5hcHBlbmQoZmlsZUN0bik7CgkJCQkJfQoJCQkJfQoJCQl9OwoKCQkJaWYgKCFkb2N1bWVudHMuZGlzYWJsZWQpIHsKCQkJCWNvbnN0IHsgaWQsIGtleSwgdmFsaWRhdGUsIGRlZmF1bHRWYWx1ZSwgZGlzYWJsZWQsIGVkaXRhYmxlLCB2YWx1ZXMgfSA9CgkJCQkJZG9jdW1lbnRzOwoKCQkJCWNvbnN0IGlucHV0Q3RuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgkJCQlpbnB1dEN0bi5jbGFzc0xpc3QuYWRkKCJpbnB1dEN0biIpOwoJCQkJY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzZWxlY3QiKTsKCQkJCWlucHV0LnNldEF0dHJpYnV0ZSgiaWQiLCBpZCk7CgkJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoIm5hbWUiLCBrZXkpOwoKCQkJCWNvbnN0IGxhYmVsRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsYWJlbCIpOwoJCQkJbGFiZWxFbC5zZXRBdHRyaWJ1dGUoImZvciIsIGlkKTsKCQkJCWlucHV0Q3RuLmFwcGVuZChsYWJlbEVsKTsKCgkJCQlmb3IgKGNvbnN0IG9wdGlvblZhbCBvZiB2YWx1ZXMpIHsKCQkJCQljb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJvcHRpb24iKTsKCQkJCQlvcHRpb24uc2V0QXR0cmlidXRlKCJ2YWx1ZSIsIG9wdGlvblZhbC52YWx1ZSk7CgkJCQkJb3B0aW9uLmlubmVyVGV4dCA9IG9wdGlvblZhbC5sYWJlbDsKCQkJCQlpbnB1dC5hcHBlbmQob3B0aW9uKTsKCQkJCX0KCgkJCQlpZiAodmFsaWRhdGUpIHsKCQkJCQlmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyh2YWxpZGF0ZSkpIHsKCQkJCQkJaW5wdXQuc2V0QXR0cmlidXRlKGtleSwgdmFsaWRhdGVba2V5XSk7CgkJCQkJfQoJCQkJfQoKCQkJCWlmIChlZGl0YWJsZSA9PT0gIk5vIikgewoJCQkJCWlucHV0LnNldEF0dHJpYnV0ZSgiZGlzYWJsZWQiLCB0cnVlKTsKCQkJCX0KCgkJCQlpZiAoZGlzYWJsZWQpIHsKCQkJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoImRpc2FibGVkIiwgZGlzYWJsZWQpOwoJCQkJCWlucHV0Q3RuLmNsYXNzTGlzdC5hZGQoImhpZGRlbiIpOwoJCQkJfQoKCQkJCWlucHV0Q3RuLmFwcGVuZChpbnB1dCk7CgkJCQlmaWxlRG9jLmFwcGVuZChpbnB1dEN0bik7CgkJCX0KCgkJCWZpbGVEb2MuYXBwZW5kKGxhYmVscGx1cyk7CgkJCWNvbC5hcHBlbmQobGFiZWwsIGZpbGVEb2MpOwoJCX0KCX0KCXJldHVybiBjb2w7Cn0KCmZ1bmN0aW9uIGRhdGFVUkx0b0ZpbGUoZGF0YXVybCwgZmlsZW5hbWUpIHsKCXZhciBhcnIgPSBkYXRhdXJsLnNwbGl0KCcsJyksCgkJbWltZSA9IGFyclswXS5tYXRjaCgvOiguKj8pOy8pWzFdLAoJCWJzdHIgPSBhdG9iKGFyclthcnIubGVuZ3RoIC0gMV0pLAoJCW4gPSBic3RyLmxlbmd0aCwKCQl1OGFyciA9IG5ldyBVaW50OEFycmF5KG4pOwoJd2hpbGUgKG4tLSkgewoJCXU4YXJyW25dID0gYnN0ci5jaGFyQ29kZUF0KG4pOwoJfQoJcmV0dXJuIG5ldyBGaWxlKFt1OGFycl0sIGZpbGVuYW1lLCB7IHR5cGU6IG1pbWUgfSk7Cn0KCmZ1bmN0aW9uIGNyZWF0ZUxvYWRlcigpIHsKCglsZXQgc21Mb2FkZXJXcmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CglzbUxvYWRlcldyYXBwZXIuY2xhc3NMaXN0LmFkZCgnc20tbG9hZGVyLXdyYXBwZXInKTsKCWxldCBzbUxvYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwoJc21Mb2FkZXIuY2xhc3NMaXN0LmFkZCgnc20tbG9hZGVyJyk7CglsZXQgc21Mb2FkZXJUZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CglzbUxvYWRlclRleHQuY2xhc3NMaXN0LmFkZCgnc20tbG9hZGVyLXRleHQnKTsKCXNtTG9hZGVyVGV4dC5pbm5lclRleHQgPSAnVXBsb2FkaW5nLi4uJzsKCXNtTG9hZGVyV3JhcHBlci5hcHBlbmRDaGlsZChzbUxvYWRlcik7CglzbUxvYWRlcldyYXBwZXIuYXBwZW5kQ2hpbGQoc21Mb2FkZXJUZXh0KTsKCglyZXR1cm4gc21Mb2FkZXJXcmFwcGVyOwp9CgpmdW5jdGlvbiBjcmVhdGVMaXN0KHNlY3Rpb24pIHsKCWNvbnN0IHsgbGlzdCwgaWQgfSA9IHNlY3Rpb247Cgljb25zdCBvbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9sIik7CgoJaWYgKGlkKSB7CgkJb2wuc2V0QXR0cmlidXRlKCJpZCIsIGlkKTsKCX0KCglmb3IgKGNvbnN0IGl0ZW0gb2YgbGlzdCkgewoJCWNvbnN0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGkiKTsKCQlsaS5jbGFzc0xpc3QuYWRkKCJpbnB1dC1ncm91cCIpOwoKCQlpdGVtLmZvckVhY2goKGkpID0+IHsKCQkJbGkuYXBwZW5kKGNyZWF0ZUlucHV0RWwoaSkpOwoJCX0pOwoKCQlvbC5hcHBlbmQobGkpOwoJfQoKCXJldHVybiBvbDsKfQoKZnVuY3Rpb24gY3JlYXRlSW5wdXRFbEJvb2tpbmcoc2NoZW1hLCBjb3VudCkgewoJY29uc3QgeyBsYWJlbCwgdHlwZSwgaWQsIGtleSwgdmFsaWRhdGUsIGRlZmF1bHRWYWx1ZSwgZGlzYWJsZWQsIGVkaXRhYmxlIH0gPQoJCXNjaGVtYTsKCglpZiAoZGlzYWJsZWQpIHsKCQlyZXR1cm4gbnVsbDsKCX0gZWxzZSB7CgoJCWNvbnN0IGlucHV0Q3RuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgkJaW5wdXRDdG4uY2xhc3NMaXN0LmFkZCgiaW5wdXRDdG4iKTsKCgoJCWlmIChzY2hlbWEuY2xhc3MpIHsKCQkJaW5wdXRDdG4uY2xhc3NMaXN0LmFkZChzY2hlbWEuY2xhc3MpOwoJCX0KCgkJaWYgKHR5cGUgPT0gIm51bWJlciIpIHsKCQkJY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpOwoJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoImlkIiwgaWQpOwoJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoIm5hbWUiLCBrZXkpOwoJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoInR5cGUiLCB0eXBlKTsKCQkJaW5wdXQuc2V0QXR0cmlidXRlKCJjbGFzcyIsIGNvdW50KTsKCQkJaW5wdXQuc2V0QXR0cmlidXRlKCJwbGFjZWhvbGRlciIsIGxhYmVsKTsKCgoJCQljb25zdCBsYWJlbEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGFiZWwiKTsKCQkJbGFiZWxFbC5pbm5lclRleHQgPSBsYWJlbDsKCQkJbGFiZWxFbC5zZXRBdHRyaWJ1dGUoImZvciIsIGlkKTsKCQkJaW5wdXRDdG4uYXBwZW5kKGxhYmVsRWwpOwoKCQkJaWYgKHZhbGlkYXRlKSB7CgkJCQlmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyh2YWxpZGF0ZSkpIHsKCQkJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoa2V5LCB2YWxpZGF0ZVtrZXldKTsKCQkJCX0KCQkJfQoJCQlpZiAoZGVmYXVsdFZhbHVlKSB7CgkJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoInZhbHVlIiwgZGVmYXVsdFZhbHVlKTsKCQkJfQoKCQkJaWYgKGRpc2FibGVkKSB7CgkJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoImRpc2FibGVkIiwgZGlzYWJsZWQpOwoJCQkJaW5wdXRDdG4uY2xhc3NMaXN0LmFkZCgiaGlkZGVuIik7CgkJCX0KCgkJCWlmIChlZGl0YWJsZSA9PT0gIk5vIikgewoJCQkJaW5wdXQuc2V0QXR0cmlidXRlKCJkaXNhYmxlZCIsIHRydWUpOwoJCQkJaW5wdXQuY2xhc3NMaXN0LmFkZCgibm90X2VkaXRhYmxlIik7CgkJCX0KCgkJCWlmIChzY2hlbWEuYXBwZWFyYW5jZSkgewoJCQkJY29uc3QgYXBwZWFyYW5jZSA9IHNjaGVtYS5hcHBlYXJhbmNlOwoJCQkJY29uc3QgcHJlc3VmRWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgkJCQlwcmVzdWZFbGUuc2V0QXR0cmlidXRlKCJjbGFzcyIsICJwcmVzdWZjb250YWluZXIiKTsKCgkJCQlpZiAoYXBwZWFyYW5jZVsicHJlZml4QWRvcm5lciJdKSB7CgkJCQkJY29uc3QgaW5wdXRwcmVmID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpOwoJCQkJCWlucHV0cHJlZi5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgImlucHV0cHJlZml4Iik7CgkJCQkJaW5wdXRwcmVmLmlubmVySFRNTCA9IGFwcGVhcmFuY2VbInByZWZpeEFkb3JuZXIiXTsKCQkJCQlwcmVzdWZFbGUuYXBwZW5kKGlucHV0cHJlZik7CgkJCQl9CgkJCQlwcmVzdWZFbGUuYXBwZW5kKGlucHV0KTsKCQkJCWlmIChhcHBlYXJhbmNlWyJzdWZmaXhBZG9ybmVyIl0pIHsKCQkJCQljb25zdCBpbnB1dHN1ZmYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIik7CgkJCQkJaW5wdXRzdWZmLnNldEF0dHJpYnV0ZSgiY2xhc3MiLCAiaW5wdXRzdWZmaXgiKTsKCQkJCQlpbnB1dHN1ZmYuaW5uZXJIVE1MID0gYXBwZWFyYW5jZVsic3VmZml4QWRvcm5lciJdOwoJCQkJCXByZXN1ZkVsZS5hcHBlbmQoaW5wdXRzdWZmKTsKCQkJCX0KCgkJCQlpbnB1dEN0bi5hcHBlbmQocHJlc3VmRWxlKTsKCQkJfSBlbHNlIHsKCQkJCWlucHV0Q3RuLmFwcGVuZChpbnB1dCk7CgkJCX0KCQl9IGVsc2UgaWYgKHR5cGUgPT0gInRleHRmaWVsZCIpIHsKCQkJY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpOwoJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoImlkIiwgYCR7aWR9LSR7Y291bnR9YCk7CgkJCWlucHV0LnNldEF0dHJpYnV0ZSgibmFtZSIsIGtleSk7CgkJCWlucHV0LnNldEF0dHJpYnV0ZSgidHlwZSIsIHR5cGUgPT0gInRleHRmaWVsZCIgPyAidGV4dCIgOiB0eXBlKTsKCQkJaW5wdXQuc2V0QXR0cmlidXRlKCJjbGFzcyIsIGBiYW5rLWFtb3VudC0ke2NvdW50fWApOwoJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoInBsYWNlaG9sZGVyIiwgbGFiZWwpOwoKCQkJY29uc3QgbGFiZWxFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxhYmVsIik7CgkJCWxhYmVsRWwuaW5uZXJUZXh0ID0gbGFiZWw7CgkJCWxhYmVsRWwuc2V0QXR0cmlidXRlKCJmb3IiLCBpZCk7CgkJCWlucHV0Q3RuLmFwcGVuZChsYWJlbEVsKTsKCgkJCWlmICh2YWxpZGF0ZSkgewoJCQkJZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXModmFsaWRhdGUpKSB7CgkJCQkJaW5wdXQuc2V0QXR0cmlidXRlKGtleSwgdmFsaWRhdGVba2V5XSk7CgkJCQl9CgkJCX0KCgkJCWlmIChkZWZhdWx0VmFsdWUpIHsKCQkJCWlucHV0LnNldEF0dHJpYnV0ZSgidmFsdWUiLCBkZWZhdWx0VmFsdWUpOwoJCQl9CgoJCQlpZiAoZGlzYWJsZWQpIHsKCQkJCWlucHV0LnNldEF0dHJpYnV0ZSgiZGlzYWJsZWQiLCBkaXNhYmxlZCk7CgkJCQlpbnB1dEN0bi5jbGFzc0xpc3QuYWRkKCJoaWRkZW4iKTsKCQkJfQoJCQlpZiAoZWRpdGFibGUgPT09ICJObyIpIHsKCQkJCWlucHV0LnNldEF0dHJpYnV0ZSgiZGlzYWJsZWQiLCB0cnVlKTsKCQkJCWlucHV0LmNsYXNzTGlzdC5hZGQoIm5vdF9lZGl0YWJsZSIpOwoJCQl9CgoJCQlpZiAoc2NoZW1hLmFwcGVhcmFuY2UpIHsKCQkJCWNvbnN0IGFwcGVhcmFuY2UgPSBzY2hlbWEuYXBwZWFyYW5jZTsKCQkJCWNvbnN0IHByZXN1ZkVsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwoJCQkJcHJlc3VmRWxlLnNldEF0dHJpYnV0ZSgiY2xhc3MiLCAicHJlc3VmY29udGFpbmVyIik7CgoJCQkJaWYgKGFwcGVhcmFuY2VbInByZWZpeEFkb3JuZXIiXSkgewoJCQkJCWNvbnN0IGlucHV0cHJlZiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKTsKCQkJCQlpbnB1dHByZWYuc2V0QXR0cmlidXRlKCJjbGFzcyIsICJpbnB1dHByZWZpeCIpOwoJCQkJCWlucHV0cHJlZi5pbm5lckhUTUwgPSBhcHBlYXJhbmNlWyJwcmVmaXhBZG9ybmVyIl07CgkJCQkJcHJlc3VmRWxlLmFwcGVuZChpbnB1dHByZWYpOwoJCQkJfQoJCQkJcHJlc3VmRWxlLmFwcGVuZChpbnB1dCk7CgkJCQlpZiAoYXBwZWFyYW5jZVsic3VmZml4QWRvcm5lciJdKSB7CgkJCQkJY29uc3QgaW5wdXRzdWZmID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpOwoJCQkJCWlucHV0c3VmZi5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgImlucHV0c3VmZml4Iik7CgkJCQkJaW5wdXRzdWZmLmlubmVySFRNTCA9IGFwcGVhcmFuY2VbInN1ZmZpeEFkb3JuZXIiXTsKCQkJCQlwcmVzdWZFbGUuYXBwZW5kKGlucHV0c3VmZik7CgkJCQl9CgoJCQkJaW5wdXRDdG4uYXBwZW5kKHByZXN1ZkVsZSk7CgkJCX0gZWxzZSB7CgkJCQlpbnB1dEN0bi5hcHBlbmQoaW5wdXQpOwoJCQl9CgoJCX0gZWxzZSBpZiAodHlwZSA9PSAiZGF0ZSIgfHwgdHlwZSA9PSAiZGF0ZXRpbWUiKSB7CgkJCWNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKTsKCQkJaW5wdXQuc2V0QXR0cmlidXRlKCJpZCIsIGAke2lkfS0ke2NvdW50fWApOwoJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoIm5hbWUiLCBrZXkpOwoJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoInR5cGUiLCBzY2hlbWEuc3VidHlwZSB8fCAiZGF0ZSIpOwoJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgYGFtb3VudC1kYXRhLSR7Y291bnR9YCk7CgkJCWlucHV0LnNldEF0dHJpYnV0ZSgicGxhY2Vob2xkZXIiLCBsYWJlbCk7CgoJCQljb25zdCBsYWJlbEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGFiZWwiKTsKCQkJbGFiZWxFbC5pbm5lclRleHQgPSBzY2hlbWEubGFiZWwgfHwgIiI7CgkJCWxhYmVsRWwuc2V0QXR0cmlidXRlKCJmb3IiLCBpZCk7CgoJCQljb25zdCB0b2RheSA9IG5ldyBEYXRlKCk7CgkJCWNvbnN0IHRvZGF5RGF0ZSA9CgkJCQl0b2RheS5nZXRGdWxsWWVhcigpICsKCQkJCSItIiArCgkJCQkoIjAiICsgKHRvZGF5LmdldE1vbnRoKCkgKyAxKSkuc2xpY2UoLTIpICsKCQkJCSItIiArCgkJCQkoIjAiICsgdG9kYXkuZ2V0RGF0ZSgpKS5zbGljZSgtMik7CgoJCQlpZiAoc2NoZW1hLmlzbnVsbCA9PSB1bmRlZmluZWQgfHwgc2NoZW1hLmlzbnVsbCA9PSBmYWxzZSkgewoJCQkJaWYgKGRlZmF1bHRWYWx1ZSkgewoJCQkJCWlucHV0LmRlZmF1bHRWYWx1ZSA9IGRlZmF1bHRWYWx1ZTsKCQkJCX0gZWxzZSB7CgkJCQkJaW5wdXQuZGVmYXVsdFZhbHVlID0gdG9kYXlEYXRlOwoJCQkJfQoJCQl9CgoJCQlpZiAodmFsaWRhdGUpIHsKCQkJCWZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKHZhbGlkYXRlKSkgewoJCQkJCWlucHV0LnNldEF0dHJpYnV0ZShrZXksIHZhbGlkYXRlW2tleV0pOwoJCQkJfQoJCQl9CgoJCQlpZiAoZWRpdGFibGUgPT09ICJObyIpIHsKCQkJCWlucHV0LnNldEF0dHJpYnV0ZSgiZGlzYWJsZWQiLCB0cnVlKTsKCQkJCWlucHV0LmNsYXNzTGlzdC5hZGQoIm5vdF9lZGl0YWJsZSIpOwoJCQl9CgoJCQlpZiAoZGlzYWJsZWQpIHsKCQkJCWlucHV0LnNldEF0dHJpYnV0ZSgiZGlzYWJsZWQiLCAhZGlzYWJsZWQpOwoJCQkJaW5wdXRDdG4uY2xhc3NMaXN0LmFkZCgiaGlkZGVuIik7CgkJCX0KCgkJCWlucHV0Q3RuLmFwcGVuZChsYWJlbEVsLCBpbnB1dCk7CgoKCgkJfSBlbHNlIGlmICh0eXBlID09ICJ0ZXh0IikgewoJCQlpbnB1dEN0bi5jbGFzc0xpc3QuYWRkKCJmb3JtLXRleHQiLCAicGwtMCIpOwoJCQljb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsYWJlbCIpOwoJCQlkaXYuaW5uZXJUZXh0ID0gc2NoZW1hLnRleHQgfHwgIiI7CgkJCWRpdi5jbGFzc0xpc3QuYWRkKCJ3LTEwMCIsICJ0ZXh0LXRpdGxlIik7CgkJCWlmIChpZCkgewoJCQkJZGl2LnNldEF0dHJpYnV0ZSgiaWQiLCBpZCk7CgkJCX0KCQkJaW5wdXRDdG4uYXBwZW5kKGRpdik7CgoKCQl9CgoJCXJldHVybiBpbnB1dEN0bjsKCX0KfQoKZnVuY3Rpb24gY3JlYXRlSW5wdXRFbChzY2hlbWEpIHsKCWNvbnN0IHsgbGFiZWwsIHR5cGUsIGlkLCBrZXksIHZhbGlkYXRlLCBkZWZhdWx0VmFsdWUsIGRpc2FibGVkLCBlZGl0YWJsZSB9ID0KCQlzY2hlbWE7CgoJaWYgKGRpc2FibGVkKSB7CgkJcmV0dXJuIG51bGw7Cgl9IGVsc2UgewoJCWlmICh0eXBlID09PSAibGlzdCIpIHsKCQkJcmV0dXJuIGNyZWF0ZUxpc3Qoc2NoZW1hKTsKCQl9CgoJCWNvbnN0IGlucHV0Q3RuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgkJaW5wdXRDdG4uY2xhc3NMaXN0LmFkZCgiaW5wdXRDdG4iKTsKCgkJaWYgKHR5cGUgPT09ICJjaGVja2JveCIpIHsKCQkJaW5wdXRDdG4uY2xhc3NMaXN0LmFkZCgiZml0Y29udGVudF9jaGVjayIpOwoJCX0KCgkJaWYgKHNjaGVtYS5jbGFzcykgewoJCQlpbnB1dEN0bi5jbGFzc0xpc3QuYWRkKHNjaGVtYS5jbGFzcyk7CgkJfQoKCQkvLyBpZiAodHlwZSA9PSAidGV4dGFyZWEiKSB7CgkJLy8gICBpbnB1dEN0bi5jbGFzc0xpc3QuYWRkKCJ3LTEwMCIpOwoJCS8vIH0KCgkJaWYgKHR5cGUgPT0gIm51bWJlciIpIHsKCQkJY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpOwoJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoImlkIiwgaWQpOwoJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoIm5hbWUiLCBrZXkpOwoJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoInR5cGUiLCB0eXBlKTsKCgkJCWNvbnN0IGxhYmVsRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsYWJlbCIpOwoJCQlsYWJlbEVsLmlubmVyVGV4dCA9IGxhYmVsOwoJCQlsYWJlbEVsLnNldEF0dHJpYnV0ZSgiZm9yIiwgaWQpOwoJCQlpbnB1dEN0bi5hcHBlbmQobGFiZWxFbCk7CgoJCQlpZiAodmFsaWRhdGUpIHsKCQkJCWZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKHZhbGlkYXRlKSkgewoJCQkJCWlucHV0LnNldEF0dHJpYnV0ZShrZXksIHZhbGlkYXRlW2tleV0pOwoJCQkJfQoJCQl9CgkJCWlmIChkZWZhdWx0VmFsdWUpIHsKCQkJCWlucHV0LnNldEF0dHJpYnV0ZSgidmFsdWUiLCBkZWZhdWx0VmFsdWUpOwoJCQl9CgoJCQlpZiAoZGlzYWJsZWQpIHsKCQkJCWlucHV0LnNldEF0dHJpYnV0ZSgiZGlzYWJsZWQiLCBkaXNhYmxlZCk7CgkJCQlpbnB1dEN0bi5jbGFzc0xpc3QuYWRkKCJoaWRkZW4iKTsKCQkJfQoKCQkJaWYgKGVkaXRhYmxlID09PSAiTm8iKSB7CgkJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoImRpc2FibGVkIiwgdHJ1ZSk7CgkJCQlpbnB1dC5jbGFzc0xpc3QuYWRkKCJub3RfZWRpdGFibGUiKTsKCQkJfQoKCQkJaWYgKHNjaGVtYS5hcHBlYXJhbmNlKSB7CgkJCQljb25zdCBhcHBlYXJhbmNlID0gc2NoZW1hLmFwcGVhcmFuY2U7CgkJCQljb25zdCBwcmVzdWZFbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCQkJCXByZXN1ZkVsZS5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgInByZXN1ZmNvbnRhaW5lciIpOwoKCQkJCWlmIChhcHBlYXJhbmNlWyJwcmVmaXhBZG9ybmVyIl0pIHsKCQkJCQljb25zdCBpbnB1dHByZWYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIik7CgkJCQkJaW5wdXRwcmVmLnNldEF0dHJpYnV0ZSgiY2xhc3MiLCAiaW5wdXRwcmVmaXgiKTsKCQkJCQlpbnB1dHByZWYuaW5uZXJIVE1MID0gYXBwZWFyYW5jZVsicHJlZml4QWRvcm5lciJdOwoJCQkJCXByZXN1ZkVsZS5hcHBlbmQoaW5wdXRwcmVmKTsKCQkJCX0KCQkJCXByZXN1ZkVsZS5hcHBlbmQoaW5wdXQpOwoJCQkJaWYgKGFwcGVhcmFuY2VbInN1ZmZpeEFkb3JuZXIiXSkgewoJCQkJCWNvbnN0IGlucHV0c3VmZiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKTsKCQkJCQlpbnB1dHN1ZmYuc2V0QXR0cmlidXRlKCJjbGFzcyIsICJpbnB1dHN1ZmZpeCIpOwoJCQkJCWlucHV0c3VmZi5pbm5lckhUTUwgPSBhcHBlYXJhbmNlWyJzdWZmaXhBZG9ybmVyIl07CgkJCQkJcHJlc3VmRWxlLmFwcGVuZChpbnB1dHN1ZmYpOwoJCQkJfQoKCQkJCWlucHV0Q3RuLmFwcGVuZChwcmVzdWZFbGUpOwoJCQl9IGVsc2UgewoJCQkJaW5wdXRDdG4uYXBwZW5kKGlucHV0KTsKCQkJfQoJCX0gZWxzZSBpZiAodHlwZSA9PSAidGV4dGZpZWxkIikgewoJCQljb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7CgkJCWlucHV0LnNldEF0dHJpYnV0ZSgiaWQiLCBpZCk7CgkJCWlucHV0LnNldEF0dHJpYnV0ZSgibmFtZSIsIGtleSk7CgkJCWlucHV0LnNldEF0dHJpYnV0ZSgidHlwZSIsIHR5cGUgPT0gInRleHRmaWVsZCIgPyAidGV4dCIgOiB0eXBlKTsKCgkJCWNvbnN0IGxhYmVsRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsYWJlbCIpOwoJCQlsYWJlbEVsLmlubmVyVGV4dCA9IGxhYmVsOwoJCQlsYWJlbEVsLnNldEF0dHJpYnV0ZSgiZm9yIiwgaWQpOwoJCQlpbnB1dEN0bi5hcHBlbmQobGFiZWxFbCk7CgoJCQlpZiAodmFsaWRhdGUpIHsKCQkJCWZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKHZhbGlkYXRlKSkgewoJCQkJCWlucHV0LnNldEF0dHJpYnV0ZShrZXksIHZhbGlkYXRlW2tleV0pOwoJCQkJfQoJCQl9CgoJCQlpZiAoZGVmYXVsdFZhbHVlKSB7CgkJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoInZhbHVlIiwgZGVmYXVsdFZhbHVlKTsKCQkJfQoKCQkJaWYgKGRpc2FibGVkKSB7CgkJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoImRpc2FibGVkIiwgZGlzYWJsZWQpOwoJCQkJaW5wdXRDdG4uY2xhc3NMaXN0LmFkZCgiaGlkZGVuIik7CgkJCX0KCQkJaWYgKGVkaXRhYmxlID09PSAiTm8iKSB7CgkJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoImRpc2FibGVkIiwgdHJ1ZSk7CgkJCQlpbnB1dC5jbGFzc0xpc3QuYWRkKCJub3RfZWRpdGFibGUiKTsKCQkJfQoKCQkJaWYgKHNjaGVtYS5hcHBlYXJhbmNlKSB7CgkJCQljb25zdCBhcHBlYXJhbmNlID0gc2NoZW1hLmFwcGVhcmFuY2U7CgkJCQljb25zdCBwcmVzdWZFbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCQkJCXByZXN1ZkVsZS5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgInByZXN1ZmNvbnRhaW5lciIpOwoKCQkJCWlmIChhcHBlYXJhbmNlWyJwcmVmaXhBZG9ybmVyIl0pIHsKCQkJCQljb25zdCBpbnB1dHByZWYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIik7CgkJCQkJaW5wdXRwcmVmLnNldEF0dHJpYnV0ZSgiY2xhc3MiLCAiaW5wdXRwcmVmaXgiKTsKCQkJCQlpbnB1dHByZWYuaW5uZXJIVE1MID0gYXBwZWFyYW5jZVsicHJlZml4QWRvcm5lciJdOwoJCQkJCXByZXN1ZkVsZS5hcHBlbmQoaW5wdXRwcmVmKTsKCQkJCX0KCQkJCXByZXN1ZkVsZS5hcHBlbmQoaW5wdXQpOwoJCQkJaWYgKGFwcGVhcmFuY2VbInN1ZmZpeEFkb3JuZXIiXSkgewoJCQkJCWNvbnN0IGlucHV0c3VmZiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKTsKCQkJCQlpbnB1dHN1ZmYuc2V0QXR0cmlidXRlKCJjbGFzcyIsICJpbnB1dHN1ZmZpeCIpOwoJCQkJCWlucHV0c3VmZi5pbm5lckhUTUwgPSBhcHBlYXJhbmNlWyJzdWZmaXhBZG9ybmVyIl07CgkJCQkJcHJlc3VmRWxlLmFwcGVuZChpbnB1dHN1ZmYpOwoJCQkJfQoKCQkJCWlucHV0Q3RuLmFwcGVuZChwcmVzdWZFbGUpOwoJCQl9IGVsc2UgewoJCQkJaW5wdXRDdG4uYXBwZW5kKGlucHV0KTsKCQkJfQoJCX0gZWxzZSBpZiAodHlwZSA9PSAidGV4dGFyZWEiKSB7CgkJCWNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGV4dGFyZWEiKTsKCQkJaW5wdXQuc2V0QXR0cmlidXRlKCJpZCIsIGlkKTsKCQkJaW5wdXQuc2V0QXR0cmlidXRlKCJuYW1lIiwga2V5KTsKCQkJaW5wdXQuc2V0QXR0cmlidXRlKCJ0eXBlIiwgdHlwZSk7CgoJCQljb25zdCBsYWJlbEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGFiZWwiKTsKCQkJbGFiZWxFbC5pbm5lclRleHQgPSBsYWJlbDsKCQkJbGFiZWxFbC5zZXRBdHRyaWJ1dGUoImZvciIsIGlkKTsKCQkJaW5wdXRDdG4uYXBwZW5kKGxhYmVsRWwpOwoKCQkJaWYgKGRlZmF1bHRWYWx1ZSkgewoJCQkJaW5wdXQuaW5uZXJUZXh0ID0gZGVmYXVsdFZhbHVlOwoJCQl9CgoJCQlpZiAodmFsaWRhdGUpIHsKCQkJCWZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKHZhbGlkYXRlKSkgewoJCQkJCWlucHV0LnNldEF0dHJpYnV0ZShrZXksIHZhbGlkYXRlW2tleV0pOwoJCQkJfQoJCQl9CgoJCQlpZiAoZWRpdGFibGUgPT09ICJObyIpIHsKCQkJCWlucHV0LnNldEF0dHJpYnV0ZSgiZGlzYWJsZWQiLCB0cnVlKTsKCQkJCWlucHV0LmNsYXNzTGlzdC5hZGQoIm5vdF9lZGl0YWJsZSIpOwoJCQl9CgoJCQlpZiAoZGlzYWJsZWQpIHsKCQkJCWlucHV0LnNldEF0dHJpYnV0ZSgiZGlzYWJsZWQiLCAhZGlzYWJsZWQpOwoJCQkJaW5wdXRDdG4uY2xhc3NMaXN0LmFkZCgiaGlkZGVuIik7CgkJCX0KCQkJaW5wdXRDdG4uYXBwZW5kKGlucHV0KTsKCQl9IGVsc2UgaWYgKHR5cGUgPT0gImRhdGUiIHx8IHR5cGUgPT0gImRhdGV0aW1lIikgewoJCQljb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7CgkJCWlucHV0LnNldEF0dHJpYnV0ZSgiaWQiLCBpZCk7CgkJCWlucHV0LnNldEF0dHJpYnV0ZSgibmFtZSIsIGtleSk7CgkJCWlucHV0LnNldEF0dHJpYnV0ZSgidHlwZSIsIHNjaGVtYS5zdWJ0eXBlIHx8ICJkYXRlIik7CgoJCQljb25zdCBsYWJlbEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGFiZWwiKTsKCQkJbGFiZWxFbC5pbm5lclRleHQgPSBzY2hlbWEubGFiZWwgfHwgIiI7CgkJCWxhYmVsRWwuc2V0QXR0cmlidXRlKCJmb3IiLCBpZCk7CgoJCQljb25zdCB0b2RheSA9IG5ldyBEYXRlKCk7CgkJCWNvbnN0IHRvZGF5RGF0ZSA9CgkJCQl0b2RheS5nZXRGdWxsWWVhcigpICsKCQkJCSItIiArCgkJCQkoIjAiICsgKHRvZGF5LmdldE1vbnRoKCkgKyAxKSkuc2xpY2UoLTIpICsKCQkJCSItIiArCgkJCQkoIjAiICsgdG9kYXkuZ2V0RGF0ZSgpKS5zbGljZSgtMik7CgoJCQlpZiAoc2NoZW1hLmlzbnVsbCA9PSB1bmRlZmluZWQgfHwgc2NoZW1hLmlzbnVsbCA9PSBmYWxzZSkgewoJCQkJaWYgKGRlZmF1bHRWYWx1ZSkgewoJCQkJCWlucHV0LmRlZmF1bHRWYWx1ZSA9IGRlZmF1bHRWYWx1ZTsKCQkJCX0gZWxzZSB7CgkJCQkJaW5wdXQuZGVmYXVsdFZhbHVlID0gdG9kYXlEYXRlOwoJCQkJfQoJCQl9CgoJCQlpZiAodmFsaWRhdGUpIHsKCQkJCWZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKHZhbGlkYXRlKSkgewoJCQkJCWlucHV0LnNldEF0dHJpYnV0ZShrZXksIHZhbGlkYXRlW2tleV0pOwoJCQkJfQoJCQl9CgoJCQlpZiAoZWRpdGFibGUgPT09ICJObyIpIHsKCQkJCWlucHV0LnNldEF0dHJpYnV0ZSgiZGlzYWJsZWQiLCB0cnVlKTsKCQkJCWlucHV0LmNsYXNzTGlzdC5hZGQoIm5vdF9lZGl0YWJsZSIpOwoJCQl9CgoJCQlpZiAoZGlzYWJsZWQpIHsKCQkJCWlucHV0LnNldEF0dHJpYnV0ZSgiZGlzYWJsZWQiLCAhZGlzYWJsZWQpOwoJCQkJaW5wdXRDdG4uY2xhc3NMaXN0LmFkZCgiaGlkZGVuIik7CgkJCX0KCgkJCWlucHV0Q3RuLmFwcGVuZChsYWJlbEVsLCBpbnB1dCk7CgkJfSBlbHNlIGlmICh0eXBlID09ICJjaGVja2JveCIpIHsKCQkJY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpOwoJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoImlkIiwgaWQpOwoJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoIm5hbWUiLCBrZXkpOwoJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoInR5cGUiLCB0eXBlKTsKCgkJCWNvbnN0IGxhYmVsRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsYWJlbCIpOwoJCQlsYWJlbEVsLmlubmVyVGV4dCA9IGxhYmVsOwoJCQlsYWJlbEVsLnNldEF0dHJpYnV0ZSgiZm9yIiwgaWQpOwoKCQkJaWYgKGRlZmF1bHRWYWx1ZSkgewoJCQkJaW5wdXQuc2V0QXR0cmlidXRlKCJjaGVja2VkIiwgZGVmYXVsdFZhbHVlKTsKCQkJfQoKCQkJaWYgKGVkaXRhYmxlID09PSAiTm8iKSB7CgkJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoImRpc2FibGVkIiwgdHJ1ZSk7CgkJCQlpbnB1dC5jbGFzc0xpc3QuYWRkKCJub3RfZWRpdGFibGUiKTsKCQkJfQoKCQkJaWYgKGRpc2FibGVkKSB7CgkJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoImRpc2FibGVkIiwgZGlzYWJsZWQpOwoJCQkJaW5wdXRDdG4uY2xhc3NMaXN0LmFkZCgiaGlkZGVuIik7CgkJCX0KCgkJCWlucHV0Q3RuLmFwcGVuZChpbnB1dCwgbGFiZWxFbCk7CgkJfSBlbHNlIGlmICh0eXBlID09ICJzZWxlY3QiKSB7CgkJCWNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic2VsZWN0Iik7CgkJCWlucHV0LnNldEF0dHJpYnV0ZSgiaWQiLCBpZCk7CgkJCWlucHV0LnNldEF0dHJpYnV0ZSgibmFtZSIsIGtleSk7CgkJCWNvbnN0IGxhYmVsRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsYWJlbCIpOwoJCQlsYWJlbEVsLnNldEF0dHJpYnV0ZSgiZm9yIiwgaWQpOwoJCQlsYWJlbEVsLmlubmVySFRNTCA9IHNjaGVtYS5sYWJlbAoJCQlpbnB1dEN0bi5hcHBlbmQobGFiZWxFbCk7CgoJCQljb25zdCBkZWZhdWx0T3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgib3B0aW9uIik7CgkJCWRlZmF1bHRPcHRpb24uc2V0QXR0cmlidXRlKCJ2YWx1ZSIsICIiKTsKCQkJZGVmYXVsdE9wdGlvbi50b2dnbGVBdHRyaWJ1dGUoImRpc2FibGVkIiwgdHJ1ZSk7CgkJCWRlZmF1bHRPcHRpb24udG9nZ2xlQXR0cmlidXRlKCJzZWxlY3RlZCIsIHRydWUpOwoJCQlkZWZhdWx0T3B0aW9uLmNsYXNzTGlzdC5hZGQoInNlbGVjdC1sYWJlbC1vcHRpb24iKTsKCQkJZGVmYXVsdE9wdGlvbi5pbm5lclRleHQgPSBsYWJlbDsKCgkJCWlucHV0LmFwcGVuZChkZWZhdWx0T3B0aW9uKTsKCgkJCWZvciAoY29uc3Qgb3B0aW9uVmFsIG9mIHNjaGVtYS52YWx1ZXMpIHsKCQkJCWNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9wdGlvbiIpOwoJCQkJb3B0aW9uLnNldEF0dHJpYnV0ZSgidmFsdWUiLCBvcHRpb25WYWwudmFsdWUpOwoJCQkJb3B0aW9uLmlubmVyVGV4dCA9IG9wdGlvblZhbC5sYWJlbDsKCQkJCWlucHV0LmFwcGVuZChvcHRpb24pOwoJCQl9CgoJCQlpZiAodmFsaWRhdGUpIHsKCQkJCWZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKHZhbGlkYXRlKSkgewoJCQkJCWlucHV0LnNldEF0dHJpYnV0ZShrZXksIHZhbGlkYXRlW2tleV0pOwoJCQkJfQoJCQl9CgoJCQlpZiAoZGVmYXVsdFZhbHVlKSB7CgkJCQlpbnB1dC52YWx1ZSA9IGRlZmF1bHRWYWx1ZTsKCQkJfQoKCQkJaWYgKGVkaXRhYmxlID09PSAiTm8iKSB7CgkJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoImRpc2FibGVkIiwgdHJ1ZSk7CgkJCQlpbnB1dC5jbGFzc0xpc3QuYWRkKCJub3RfZWRpdGFibGUiKTsKCQkJfQoKCQkJaWYgKGRpc2FibGVkKSB7CgkJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoImRpc2FibGVkIiwgZGlzYWJsZWQpOwoJCQkJaW5wdXRDdG4uY2xhc3NMaXN0LmFkZCgiaGlkZGVuIik7CgkJCX0KCgkJCWlucHV0Q3RuLmFwcGVuZChpbnB1dCk7CgkJfSBlbHNlIGlmICh0eXBlID09ICJyYWRpbyIpIHsKCQkJaWYgKGxhYmVsKSB7CgkJCQljb25zdCBsYWJlbEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGFiZWwiKTsKCQkJCWxhYmVsRWwuaW5uZXJUZXh0ID0gbGFiZWw7CgkJCQlpbnB1dEN0bi5hcHBlbmQobGFiZWxFbCk7CgkJCX0KCgkJCWlucHV0Q3RuLnNldEF0dHJpYnV0ZSgiaWQiLCBpZCk7CgkJCWlucHV0Q3RuLmNsYXNzTGlzdC5hZGQoImNoZWNrYm94LWN0biIpOwoKCQkJY29uc3Qgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgkJCXJvdy5jbGFzc0xpc3QuYWRkKCJjaGVja2JveC1yb3ciKTsKCQkJaW5wdXRDdG4uYXBwZW5kKHJvdyk7CgoJCQlpZiAoc2NoZW1hLnZhbHVlcy5sZW5ndGggPiAzKSB7CgkJCQlpbnB1dEN0bi5jbGFzc0xpc3QuYWRkKCJncmVhdGVfY2hlY2tib3giKTsKCQkJfQoKCQkJZm9yIChjb25zdCBvcHRpb24gb2Ygc2NoZW1hLnZhbHVlcykgewoJCQkJY29uc3QgaW5uZXJMYWJlbEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGFiZWwiKTsKCQkJCWNvbnN0IHNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIik7CgkJCQlzcGFuLmlubmVyVGV4dCA9IG9wdGlvbi5sYWJlbDsKCQkJCWlubmVyTGFiZWxFbC5hcHBlbmQoc3Bhbik7CgoJCQkJY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpOwoJCQkJaW5wdXQuc2V0QXR0cmlidXRlKCJkaXNhYmxlZCIsIHRydWUpOwoJCQkJaW5wdXQuc2V0QXR0cmlidXRlKCJuYW1lIiwga2V5KTsKCQkJCWlucHV0LnNldEF0dHJpYnV0ZSgidHlwZSIsIHR5cGUpOwoJCQkJaWYgKG9wdGlvbi5pZCkgewoJCQkJCWlucHV0LnNldEF0dHJpYnV0ZSgiaWQiLCBvcHRpb24uaWQpOwoJCQkJCWlucHV0LnNldEF0dHJpYnV0ZSgiY2xhc3MiLCBvcHRpb24uaWQpOwoJCQkJfQoJCQkJaW5wdXQuc2V0QXR0cmlidXRlKCJ2YWx1ZSIsIG9wdGlvbi52YWx1ZSk7CgoJCQkJaWYgKHZhbGlkYXRlKSB7CgkJCQkJZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXModmFsaWRhdGUpKSB7CgkJCQkJCWlucHV0LnNldEF0dHJpYnV0ZShrZXksIHZhbGlkYXRlW2tleV0pOwoJCQkJCX0KCQkJCX0KCgkJCQlpZiAoZGVmYXVsdFZhbHVlID09PSBvcHRpb24udmFsdWUpIHsKCQkJCQlpbnB1dC5jaGVja2VkID0gdHJ1ZTsKCQkJCX0KCgkJCQlpZiAoZWRpdGFibGUgPT09ICJObyIpIHsKCQkJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoImRpc2FibGVkIiwgdHJ1ZSk7CgkJCQkJaW5wdXQuY2xhc3NMaXN0LmFkZCgibm90X2VkaXRhYmxlIik7CgkJCQl9CgoJCQkJaWYgKGRpc2FibGVkKSB7CgkJCQkJaW5wdXQuc2V0QXR0cmlidXRlKCJkaXNhYmxlZCIsIGRpc2FibGVkKTsKCQkJCQlpbnB1dEN0bi5jbGFzc0xpc3QuYWRkKCJoaWRkZW4iKTsKCQkJCX0KCgkJCQlpbm5lckxhYmVsRWwuYXBwZW5kKGlucHV0KTsKCQkJCXJvdy5hcHBlbmQoaW5uZXJMYWJlbEVsKTsKCQkJfQoJCX0gZWxzZSBpZiAodHlwZSA9PSAiaW1hZ2UiKSB7CgkJCWNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW1nIik7CgoJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoImlkIiwgaWQpOwoJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoInNyYyIsIHNjaGVtYS5zb3VyY2UgPyBzY2hlbWEuc291cmNlIDogIiMiKTsKCQkJaW5wdXQuc2V0QXR0cmlidXRlKCJhbHQiLCBzY2hlbWEuYWx0ID8gc2NoZW1hLmFsdCA6ICIjIik7CgoJCQlyZXR1cm4gaW5wdXQ7CgkJfSBlbHNlIGlmICh0eXBlID09ICJjaGVja2xpc3QiKSB7CgkJCWNvbnN0IGlucHV0Y2hlY2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCQkJaW5wdXRjaGVjay5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgImlucHV0X2NoZWNrbGlzdCIpOwoJCQlpZiAobGFiZWwpIHsKCQkJCWNvbnN0IGxhYmVsRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsYWJlbCIpOwoJCQkJbGFiZWxFbC5pbm5lclRleHQgPSBsYWJlbDsKCQkJCWlucHV0Y2hlY2suYXBwZW5kKGxhYmVsRWwpOwoJCQl9CgoJCQlpbnB1dEN0bi5zZXRBdHRyaWJ1dGUoImlkIiwgaWQpOwoJCQlpbnB1dEN0bi5jbGFzc0xpc3QuYWRkKCJjaGVja2JveC1jdG4iKTsKCgkJCWNvbnN0IGNvbHVtbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwoJCQljb2x1bW4uY2xhc3NMaXN0LmFkZCgiY2hlY2tib3gtY29sdW1uIik7CgoJCQlmb3IgKGNvbnN0IG9wdGlvbiBvZiBzY2hlbWEudmFsdWVzKSB7CgkJCQljb25zdCByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCQkJCXJvdy5jbGFzc0xpc3QuYWRkKCJjaGVja2JveC1yYXciKTsKCgkJCQljb25zdCBpbm5lckxhYmVsRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsYWJlbCIpOwoJCQkJY29uc3Qgc3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKTsKCQkJCXNwYW4uaW5uZXJUZXh0ID0gb3B0aW9uLmxhYmVsOwoJCQkJaW5uZXJMYWJlbEVsLmFwcGVuZChzcGFuKTsKCgkJCQljb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7CgkJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoInR5cGUiLCAiY2hlY2tib3giKTsKCQkJCWlucHV0LnNldEF0dHJpYnV0ZSgibmFtZSIsIG9wdGlvbi5sYWJlbCk7CgkJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoInZhbHVlIiwgb3B0aW9uLnZhbHVlKTsKCgkJCQlpZiAoZWRpdGFibGUgPT09ICJObyIpIHsKCQkJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoImRpc2FibGVkIiwgdHJ1ZSk7CgkJCQkJaW5wdXQuY2xhc3NMaXN0LmFkZCgibm90X2VkaXRhYmxlIik7CgkJCQl9CgoJCQkJaWYgKGRpc2FibGVkKSB7CgkJCQkJaW5wdXQuc2V0QXR0cmlidXRlKCJkaXNhYmxlZCIsIGRpc2FibGVkKTsKCQkJCQlpbnB1dEN0bi5jbGFzc0xpc3QuYWRkKCJoaWRkZW4iKTsKCQkJCX0KCgkJCQlpZiAoZGVmYXVsdFZhbHVlID09PSBvcHRpb24udmFsdWUpIHsKCQkJCQlpbnB1dC5jaGVja2VkID0gdHJ1ZTsKCQkJCX0KCQkJCXJvdy5hcHBlbmQoaW5wdXQsIGlubmVyTGFiZWxFbCk7CgkJCQljb2x1bW4uYXBwZW5kQ2hpbGQocm93KTsKCQkJfQoKCQkJaW5wdXRjaGVjay5hcHBlbmRDaGlsZChjb2x1bW4pOwoJCQlpbnB1dEN0bi5hcHBlbmRDaGlsZChpbnB1dGNoZWNrKTsKCQl9IGVsc2UgaWYgKHR5cGUgPT0gInRleHQiKSB7CgoJCQlpbnB1dEN0bi5jbGFzc0xpc3QuYWRkKCJmb3JtLXRleHQiLCAicGwtMCIpOwoJCQljb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsYWJlbCIpOwoJCQlkaXYuaW5uZXJUZXh0ID0gc2NoZW1hLnRleHQgfHwgIiI7CgkJCWRpdi5jbGFzc0xpc3QuYWRkKCJ3LTEwMCIsICJ0ZXh0LXRpdGxlIik7CgkJCWlmIChpZCkgewoJCQkJZGl2LnNldEF0dHJpYnV0ZSgiaWQiLCBpZCk7CgkJCX0KCQkJaW5wdXRDdG4uYXBwZW5kKGRpdik7CgoKCgkJfSBlbHNlIGlmICh0eXBlID09ICJzaWduYXR1cmUiKSB7CgkJCWNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwoKCQkJZGl2LmNsYXNzTGlzdC5hZGQoImZsZXgtY29sIiwgIm10LTIwIiwgInctMTAwIik7CgoJCQlsZXQgcmVxdWlyZWQgPSBmYWxzZTsKCQkJaWYgKHZhbGlkYXRlICYmIHZhbGlkYXRlLnJlcXVpcmVkKSByZXF1aXJlZCA9IHRydWU7CgoJCQlkaXYuaW5uZXJIVE1MID0gYAogICAgICA8ZGl2PgogICAgICA8bGFiZWw+U2lnbmF0dXJlIDo8L2xhYmVsPgogICAgICA8ZGl2IGNsYXNzPSJtdC0xMCI+CiAgICAgICAgPCEtLSBuYW1lIGZvciB0aGlzIHdhc24ndCBwcm92aWRlZCBpbiB0aGUgc2NoZW1hIGpzb24gLS0+CiAgICAgICAgPGJ1dHRvbiBmb3I9ImNsZWFyLXNpZ24iIGNvbnRyb2w9IiR7aWR9Ij54PC9idXR0b24+CiAgICAgICAgPGNhbnZhcyBmb3I9InNpZ24iICR7cmVxdWlyZWQgPyAicmVxdWlyZWQiIDogIiIKCQkJCX0gbmFtZT0iJHtrZXl9IiBpZD0iJHtpZH0iPjwvY2FudmFzPgogICAgICA8L2Rpdj4KICAgICAgPC9kaXY+YDsKCgkJCXJldHVybiBkaXY7CgkJfQoKCQlpZiAoc2NoZW1hLm90aGVyICYmIHNjaGVtYS5vdGhlclsidHlwZSJdID09ICJjaGVja2JveCIpIHsKCQkJY29uc3QgaW5uZXJEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCQkJaW5uZXJEaXYuY2xhc3NMaXN0LmFkZCgiaW5uZXJfaW5wdXRjdG4iKTsKCQkJY29uc3QgaW5wdXRpbm5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7CgkJCWlucHV0aW5uZXIuc2V0QXR0cmlidXRlKCJ0eXBlIiwgc2NoZW1hLm90aGVyWyJ0eXBlIl0pOwoJCQlpbnB1dGlubmVyLnNldEF0dHJpYnV0ZSgiaWQiLCBgJHtpZH1faW5uZXJgKTsKCQkJaW5wdXRpbm5lci5zZXRBdHRyaWJ1dGUoImRhdGEtcmVmIiwgaWQpOwoKCQkJaW5wdXRpbm5lci5vbmNoYW5nZSA9IGZ1bmN0aW9uIChlKSB7CgkJCQljb25zdCBuZXdSZWZFbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzY2hlbWEub3RoZXJbImZvciJdKTsKCQkJCWlmIChuZXdSZWZFbGUpIHsKCQkJCQljb25zdCB0ZWxFbGUgPSBoYXNTb21lUGFyZW50VGhlQ2xhc3MobmV3UmVmRWxlLCAicGFuY2FyZF9jaGVjayIpOwoJCQkJCWNvbnN0IHRhcmdldEVsZSA9IGhhc1NvbWVOZXh0U2libGluZ1RoZUNsYXNzKAoJCQkJCQl0ZWxFbGUsCgkJCQkJCSJmaWxldXBsb2FkX2NvbnRpYW5lciIKCQkJCQkpOwoJCQkJCWNvbnN0IGhpZEVsZSA9IHRhcmdldEVsZS5xdWVyeVNlbGVjdG9yKCIuZmlsZS11cGxvYWQiKTsKCgkJCQkJaWYgKGUudGFyZ2V0LmNoZWNrZWQpIHsKCQkJCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpLnNldEF0dHJpYnV0ZSgiZGlzYWJsZWQiLCB0cnVlKTsKCQkJCQkJbmV3UmVmRWxlLmNoZWNrZWQgPSB0cnVlOwoJCQkJCQloaWRFbGUuY2xhc3NMaXN0LmFkZCgiaGlkZGVuIik7CgkJCQkJCWhpZEVsZS5xdWVyeVNlbGVjdG9yQWxsKCJpbnB1dCwgdGV4dGFyZWEsIHNlbGVjdCIpLmZvckVhY2goKGUpID0+IHsKCQkJCQkJCWUuc2V0QXR0cmlidXRlKCJkaXNhYmxlZCIsIHRydWUpOwoJCQkJCQkJZS5jbGFzc0xpc3QuYWRkKCJub3RfZWRpdGFibGUiKTsKCQkJCQkJfSk7CgkJCQkJfSBlbHNlIHsKCQkJCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpLnJlbW92ZUF0dHJpYnV0ZSgiZGlzYWJsZWQiKTsKCQkJCQkJbmV3UmVmRWxlLmNoZWNrZWQgPSBmYWxzZTsKCQkJCQkJaGlkRWxlLmNsYXNzTGlzdC5yZW1vdmUoImhpZGRlbiIsICJub3RfZWRpdGFibGUiKTsKCQkJCQkJaGlkRWxlLnF1ZXJ5U2VsZWN0b3JBbGwoImlucHV0LCB0ZXh0YXJlYSwgc2VsZWN0IikuZm9yRWFjaCgoZSkgPT4gewoJCQkJCQkJZS5yZW1vdmVBdHRyaWJ1dGUoImRpc2FibGVkIik7CgkJCQkJCQllLmNsYXNzTGlzdC5yZW1vdmUoIm5vdF9lZGl0YWJsZSIpOwoJCQkJCQl9KTsKCQkJCQl9CgkJCQl9CgkJCX07CgoJCQljb25zdCBsYWJlbEVsaW5uZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsYWJlbCIpOwoJCQlsYWJlbEVsaW5uZXIuaW5uZXJUZXh0ID0gc2NoZW1hLm90aGVyWyJsYWJlbCJdOwoJCQlsYWJlbEVsaW5uZXIuc2V0QXR0cmlidXRlKCJmb3IiLCBgJHtpZH1faW5uZXJgKTsKCQkJaW5uZXJEaXYuYXBwZW5kKGxhYmVsRWxpbm5lciwgaW5wdXRpbm5lcik7CgkJCWlucHV0Q3RuLmFwcGVuZChpbm5lckRpdik7CgkJCWlucHV0Q3RuLmNsYXNzTGlzdC5hZGQoInJlbGF0aW5lX2N0biIpOwoJCX0KCgkJcmV0dXJuIGlucHV0Q3RuOwoJfQp9CgpmdW5jdGlvbiBjcmVhdGVEYXRlU2lnbkZvb3RlcihpZCkgewoJY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpOwoJY29uc3QgdG9kYXlEYXRlID0KCQl0b2RheS5nZXRGdWxsWWVhcigpICsKCQkiLSIgKwoJCSgiMCIgKyAodG9kYXkuZ2V0TW9udGgoKSArIDEpKS5zbGljZSgtMikgKwoJCSItIiArCgkJKCIwIiArIHRvZGF5LmdldERhdGUoKSkuc2xpY2UoLTIpOwoKCWNvbnN0IGN0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwoJY3RuLmNsYXNzTGlzdC5hZGQoImRhdGUtc2lnbi1mb290ZXIiKTsKCgljdG4uaW5uZXJIVE1MID0gYAogIDxkaXYgY2xhc3M9ImlucHV0Q3RuIj4KICAgIDxsYWJlbCBmb3I9IiI+RGF0ZSA6PC9sYWJlbD4KICAgIDxpbnB1dCBkaXNhYmxlZCB0eXBlPSJkYXRlIiByZXF1aXJlZCB2YWx1ZT0nJHt0b2RheURhdGV9JyAvPgogIDwvZGl2PgoKICA8ZGl2IGNsYXNzPSJmbGV4LWNvbCBtdC0yMCI+CiAgICA8bGFiZWwgZm9yPSIke2lkfSI+U2lnbmF0dXJlIG9mIEFwcGxpY2FudCdzIDo8L2xhYmVsPgogICAgPGRpdiBjbGFzcz0ibXQtMTAiPgogICAgICA8YnV0dG9uIGZvcj0iY2xlYXItc2lnbiIgY29udHJvbD0iJHtpZH0iPng8L2J1dHRvbj4KICAgICAgPGNhbnZhcwogICAgICAgIHJlcXVpcmVkCiAgICAgICAgZm9yPSJzaWduIgogICAgICAgIG5hbWU9IiR7aWR9IgogICAgICAgIGlkPSIke2lkfSIKICAgICAgPjwvY2FudmFzPgogICAgPC9kaXY+CiAgPC9kaXY+YDsKCglyZXR1cm4gY3RuOwp9CgpmdW5jdGlvbiBjcmVhdGVJbnB1dEdycChmb3JtKSB7Cgljb25zdCBpbnB1dEdycCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwoJaW5wdXRHcnAuY2xhc3NMaXN0LmFkZCgiaW5wdXQtZ3JvdXAiKTsKCglmb3IgKGNvbnN0IGZvcm1FbCBvZiBmb3JtKSB7CgkJY29uc3QgaW5wdXRFbCA9IGNyZWF0ZUlucHV0RWwoZm9ybUVsKTsKCQlpZiAoaW5wdXRFbCkgaW5wdXRHcnAuYXBwZW5kQ2hpbGQoaW5wdXRFbCk7Cgl9CglyZXR1cm4gaW5wdXRHcnA7Cn0KCmZ1bmN0aW9uIHJlbmRlclNlY3Rpb24oc2VjdGlvbikgewoKCWNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTsKCgljb25zdCB7IGhlYWRpbmcsIGlubmVySFRNTCB9ID0gc2VjdGlvbjsKCS8vY29uc3QgZGF0ZVNpZ25Gb290ZXIgPSBzZWN0aW9uWyJkYXRlLXNpZ25hdHVyZS1mb290ZXIiXTsKCWNvbnN0IHN1YlNlY3Rpb25zID0gc2VjdGlvblsic3ViLXNlY3Rpb25zIl07CgoJY29uc3QgaGVhZGluZ0VMID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaDIiKTsKCWhlYWRpbmdFTC5pbm5lclRleHQgPSBoZWFkaW5nOwoJaWYgKGhlYWRpbmcpIGNvbnRhaW5lci5hcHBlbmRDaGlsZChoZWFkaW5nRUwpOwoKCWlmIChpbm5lckhUTUwpIHsKCQljb25zdCB0ZW1wID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgkJdGVtcC5pbm5lckhUTUwgPSBpbm5lckhUTUw7CgkJY29udGFpbmVyLmFwcGVuZCh0ZW1wKTsKCX0KCglpZiAoc3ViU2VjdGlvbnMpCgkJZm9yIChjb25zdCBzdWJTZWN0aW9uIG9mIHN1YlNlY3Rpb25zKSB7CgkJCWNvbnN0IHN1YkhlYWRpbmcgPSBzdWJTZWN0aW9uWyJzdWItaGVhZGluZyJdOwoJCQlpZiAoc3ViSGVhZGluZyAhPSAnQm9va2luZyBBbW91bnQgRGV0YWlsczonKSB7CgoJCQkJY29uc3QgY3RuTG9jYWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCQkJCWlmIChzdWJTZWN0aW9uLmlkKSBjdG5Mb2NhbC5zZXRBdHRyaWJ1dGUoImlkIiwgc3ViU2VjdGlvbi5pZCk7CgoJCQkJY29uc3Qgc3ViSGVhZGluZ0VsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaDMiKTsKCQkJCXN1YkhlYWRpbmdFbC5pbm5lclRleHQgPSBzdWJIZWFkaW5nOwoJCQkJY3RuTG9jYWwuYXBwZW5kQ2hpbGQoc3ViSGVhZGluZ0VsKTsKCQkJCWlmIChzdWJTZWN0aW9uLmNsYXNzKSBzdWJIZWFkaW5nRWwuY2xhc3NMaXN0LmFkZChzdWJTZWN0aW9uLmNsYXNzKTsKCgkJCQljb25zdCBmb3JtID0gc3ViU2VjdGlvblsiZm9ybSJdOwoKCQkJCWlmIChmb3JtKSB7CgkJCQkJY29uc3QgaW5wdXRHcnAgPSBjcmVhdGVJbnB1dEdycChmb3JtKTsKCQkJCQlpbnB1dEdycC5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgImFwcGxpY2FudF9pbnB1dGdyb3VwIik7CgkJCQkJaWYgKGlucHV0R3JwKSBjdG5Mb2NhbC5hcHBlbmRDaGlsZChpbnB1dEdycCk7CgkJCQl9CgoJCQkJY29uc3QgbGlzdCA9IHN1YlNlY3Rpb25bImxpc3QiXTsKCQkJCWlmIChsaXN0KSB7CgkJCQkJY29uc3Qgb2wgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJvbCIpOwoJCQkJCWZvciAoY29uc3QgaXRlbSBvZiBsaXN0KSB7CgkJCQkJCWNvbnN0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGkiKTsKCQkJCQkJbGkuaW5uZXJIVE1MID0gaXRlbTsKCQkJCQkJb2wuYXBwZW5kKGxpKTsKCQkJCQl9CgoJCQkJCWN0bkxvY2FsLmFwcGVuZENoaWxkKG9sKTsKCQkJCX0KCgkJCQljb25zdCBmaWxlVXBsb2FkcyA9IHN1YlNlY3Rpb25bImZpbGUtdXBsb2FkIl07CgkJCQlpZiAoZmlsZVVwbG9hZHMgJiYgZmlsZVVwbG9hZHMubGVuZ3RoICE9PSAwKSB7CgkJCQkJY29uc3QgaDQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJoNCIpOwoJCQkJCWg0LmlubmVyVGV4dCA9ICJLWUMgdXBsb2FkIjsKCQkJCQljb25zdCBjdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCQkJCQljdG4uY2xhc3NMaXN0LmFkZCgibWItNTAiKTsKCQkJCQloNC5jbGFzc0xpc3QuYWRkKCJreWMtdXBsb2FkIik7CgoJCQkJCWZvciAoY29uc3QgZmlsZSBvZiBmaWxlVXBsb2FkcykgewoJCQkJCQljb25zdCBmaWxlQ3RuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgkJCQkJCWZpbGVDdG4uY2xhc3NMaXN0LmFkZCgiZmlsZS11cGxvYWQiKTsKCgkJCQkJCWNvbnN0IGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGFiZWwiKTsKCQkJCQkJbGFiZWwuaW5uZXJUZXh0ID0gZmlsZS5maWxlOwoKCQkJCQkJY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpOwoJCQkJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoInR5cGUiLCAiZmlsZSIpOwoJCQkJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoIm5hbWUiLCBmaWxlLmtleSk7CgoJCQkJCQlmaWxlQ3RuLmFwcGVuZChsYWJlbCwgaW5wdXQpOwoKCQkJCQkJY3RuLmFwcGVuZChmaWxlQ3RuKTsKCQkJCQl9CgoJCQkJCWNvbnN0IGxheWVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgkJCQkJbGF5ZXIuYXBwZW5kKGg0LCBjdG4pOwoJCQkJCWN0bkxvY2FsLmFwcGVuZChsYXllcik7CgkJCQl9CgoJCQkJY29udGFpbmVyLmFwcGVuZChjdG5Mb2NhbCk7CgkJCX0KCQl9CgoJY29uc3QgZm9ybSA9IHNlY3Rpb25bImZvcm0iXTsKCWlmIChmb3JtKSB7CgkJY29uc3QgaW5wdXRHcnAgPSBjcmVhdGVJbnB1dEdycChmb3JtKTsKCQljb250YWluZXIuYXBwZW5kQ2hpbGQoaW5wdXRHcnApOwoJfQoKCWlmIChzZWN0aW9uLmhlYWRpbmcgPT09ICJBcHBsaWNhdGlvbiBEZXRhaWxzIikgewoJCXZhciBoZWFkQWRkQXBwbGljYW50QnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgkJaGVhZEFkZEFwcGxpY2FudEJ0bi5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgImFkZF9hcHBsaWNhbnRfY29udGlhbmVyIik7CgkJdmFyIGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsKCQl2YXIgdGV4dCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCJBREQgQVBQTElDQU5UIik7CgkJYnV0dG9uLmFwcGVuZENoaWxkKHRleHQpOwoJCWJ1dHRvbi5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgImFkZF9hcHBsaWNhbnRfYnV0dG9uIGhpZGRlbiIpOwoJCWJ1dHRvbi5zZXRBdHRyaWJ1dGUoImlkIiwgImFkZF9hcHBsaWNhbnRfYWN0aW9uIik7CgkJaGVhZEFkZEFwcGxpY2FudEJ0bi5hcHBlbmRDaGlsZChidXR0b24pOwoJCWNvbnRhaW5lci5hcHBlbmRDaGlsZChoZWFkQWRkQXBwbGljYW50QnRuKTsKCX0KCglsZXQgaXNDb25jZW50ID0gdHJ1ZTsKCWNvbnN0IGZpcl9wRGF0YSA9IHNjaGVtYVsiZmlyc3QtcGFnZSJdOwoKCWlmIChmaXJfcERhdGEpIHsKCQljb25zdCBmb3JtRGF0YSA9IGZpcl9wRGF0YVsiY29uc2VudGZvcm0iXTsgICAgIC8vIFRvIGJlIHVuY29tbWVudGVkCgkJLy8gY29uc3QgZm9ybURhdGEgPSB0cnVlOyAgICAgLy8gVG8gYmUgY29tbWVudGVkCgoJCWlmICghZm9ybURhdGEgfHwgZm9ybURhdGEgPT09ICJmYWxzZSIpIHsKCQkJaXNDb25jZW50ID0gZmFsc2U7CgkJfQoKCX0KCgkvLwoJY29uc3QgdmFsaWRDb25zZW50QW5kUXVvdCA9ICgpID0+IHsKCQljb25zdCBjaGVja2JveGVzID0gW107CgkJaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmV2aWV3LWJ0bicpKSB7CgkJCWNoZWNrYm94ZXMucHVzaChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29uc2VudENoZWNrJykpOwoJCX0KCQlpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3F1b3RhdGlvbi1idG4nKSkgewoJCQljaGVja2JveGVzLnB1c2goZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3F1b3QtY29uc2VudENoZWNrJykpOwoJCX0KCQlyZXR1cm4gY2hlY2tib3hlcy5ldmVyeShjaGVja2JveCA9PiBjaGVja2JveC5jaGVja2VkID09IHRydWUpOwoJfQoKCWNvbnN0IGVuYWJsZVN1Ym1pdEJ1dHRvbnMgPSAoKSA9PiB7CgkJLy9wcmV2aWV3QnV0dG9uLnNldEF0dHJpYnV0ZSgiY2xhc3MiLCAiZ3JlZW4iKTsKCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZm9ybS1idG4iKS5yZW1vdmVBdHRyaWJ1dGUoImRpc2FibGVkIik7CgkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInNpZ24tYnV0dG9uIikucmVtb3ZlQXR0cmlidXRlKCJkaXNhYmxlZCIpOwoJCS8vZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLmZhLWNoZWNrLWNpcmNsZSIpLmNsYXNzTGlzdC5yZW1vdmUoImhpZGRlbiIpOwoJCS8vcHJldmlld2ZhSWNvbi5jbGFzc0xpc3QucmVtb3ZlKCJoaWRkZW4iKTsKCX0KCgljb25zdCBkaXNhYmxlU3VibWl0QnV0dG9ucyA9ICgpID0+IHsKCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZm9ybS1idG4iKS5zZXRBdHRyaWJ1dGUoImRpc2FibGVkIiwgdHJ1ZSk7CgkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInNpZ24tYnV0dG9uIikuc2V0QXR0cmlidXRlKCJkaXNhYmxlZCIsIHRydWUpOwoJfQoJLy8gQWRkIFF1b3RhdGlvbiBQcmV2aWV3IEJ1dHRvbgoJaWYgKHNlY3Rpb24ucXVvdGFpb24gJiYgZmlyX3BEYXRhWydxdW90YXRpb25wZGYnXSkgewoJCWNvbnN0IHF1b3RhdGlvbkJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIpOwoJCXF1b3RhdGlvbkJ1dHRvbi5zZXRBdHRyaWJ1dGUoImlkIiwgInF1b3RhdGlvbi1idG4iKTsKCQlxdW90YXRpb25CdXR0b24uY2xhc3NMaXN0LmFkZCgnaGlkZGVuJywgJ2J0bi1jb21tb24nKTsKCQkvLyBwcmV2aWV3QnV0dG9uLnNldEF0dHJpYnV0ZSgiY2xhc3MiLCAiaGlkZGVuIik7CgkJcXVvdGF0aW9uQnV0dG9uLnNldEF0dHJpYnV0ZSgidHlwZSIsICJidXR0b24iKTsKCQlxdW90YXRpb25CdXR0b24uaW5uZXJUZXh0ID0gJ1ByZXZpZXcgUXVvdGF0aW9uJzsKCgkJLy8gdmFyIHByZXZpZXdmYUljb24gPSAnPGkgY2xhc3M9ImZhIGZhLWNoZWNrLWNpcmNsZSBoaWRkZW4iIGFyaWEtaGlkZGVuPSJ0cnVlIj48L2k+JzsKCgkJY29uc3QgaGVhZEFkZEFwcGxpY2FudHByZXZpZXcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCQloZWFkQWRkQXBwbGljYW50cHJldmlldy5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgImFwcGxpY2F0bl9wcmV2aWV3Iik7CgkJaGVhZEFkZEFwcGxpY2FudHByZXZpZXcuaW5uZXJUZXh0ID0gc2VjdGlvbi5xdW90YWlvbjsKCQljb250YWluZXIuYXBwZW5kQ2hpbGQoaGVhZEFkZEFwcGxpY2FudHByZXZpZXcpOwoJCWNvbnRhaW5lci5hcHBlbmRDaGlsZChxdW90YXRpb25CdXR0b24pOwoKCQkvLyBGb3IgUXVvdGF0aW9uIEZvcm0KCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncXVvdC1hY2NlcHRDb25zZW50JykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHsKCQkJbGV0IGNoZWNrYm94ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3F1b3QtY29uc2VudENoZWNrJyk7CgoJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncXVvdC1jb25zZW50Q2hlY2snKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkgewoJCQkJaWYgKGV2ZW50LnRhcmdldC5jaGVja2VkKSB7CgkJCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3F1b3QtYWNjZXB0VGV4dCcpLmNsYXNzTGlzdC5yZW1vdmUoJ3JlZEFsZXJ0Jyk7CgkJCQl9CgkJCQllbHNlIHsKCQkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncXVvdC1hY2NlcHRUZXh0JykuY2xhc3NMaXN0LmFkZCgncmVkQWxlcnQnKTsKCQkJCX0KCQkJfSk7CgkJCWlmIChjaGVja2JveC5jaGVja2VkKSB7CgkJCQlpZiAodmFsaWRDb25zZW50QW5kUXVvdCgpKSB7CgkJCQkJZW5hYmxlU3VibWl0QnV0dG9ucygpOwoJCQkJfQoJCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3F1b3QtYWNjZXB0VGV4dCcpLmNsYXNzTGlzdC5yZW1vdmUoJ3JlZEFsZXJ0Jyk7CgkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncXVvdC1jb25zZW50LWRpYWxvZycpLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpOwoJCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3F1b3RhdGlvbi1idG4nKS5jbGFzc0xpc3QuYWRkKCdjb25zZW50LXZlcmlmaWVkJyk7CgkJCX0gZWxzZSB7CgkJCQlkaXNhYmxlU3VibWl0QnV0dG9ucygpOwoJCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3F1b3QtYWNjZXB0VGV4dCcpLmNsYXNzTGlzdC5hZGQoJ3JlZEFsZXJ0Jyk7CgkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncXVvdGF0aW9uLWJ0bicpLmNsYXNzTGlzdC5yZW1vdmUoJ2NvbnNlbnQtdmVyaWZpZWQnKTsKCQkJfQoJCX0pOwoKCX0KCWlmIChzZWN0aW9uLnByZXZpZXcgJiYgaXNDb25jZW50KSB7CgkJY29uc3QgcHJldmlld0J1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIpOwoJCXByZXZpZXdCdXR0b24uc2V0QXR0cmlidXRlKCJpZCIsICJwcmV2aWV3LWJ0biIpOwoJCS8vIHByZXZpZXdCdXR0b24uc2V0QXR0cmlidXRlKCJjbGFzcyIsICJoaWRkZW4iKTsKCQlwcmV2aWV3QnV0dG9uLnNldEF0dHJpYnV0ZSgidHlwZSIsICJidXR0b24iKTsKCQlwcmV2aWV3QnV0dG9uLmlubmVyVGV4dCA9ICdQcmV2aWV3IENvbnNlbnQnOwoKCQljb25zdCBwcmV2aWV3ZmFJY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaSIpOwoJCXByZXZpZXdmYUljb24uc2V0QXR0cmlidXRlKCJpZCIsICJwcmV2aWV3LWJ0bi1pY29uIik7CgkJcHJldmlld2ZhSWNvbi5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgImZhIGZhLWNoZWNrLWNpcmNsZSBoaWRkZW4iKTsKCQlwcmV2aWV3ZmFJY29uLnNldEF0dHJpYnV0ZSgiYXJpYS1oaWRkZW4iLCB0cnVlKTsKCgkJLy8gdmFyIHByZXZpZXdmYUljb24gPSAnPGkgY2xhc3M9ImZhIGZhLWNoZWNrLWNpcmNsZSBoaWRkZW4iIGFyaWEtaGlkZGVuPSJ0cnVlIj48L2k+JzsKCgkJdmFyIGhlYWRBZGRBcHBsaWNhbnRwcmV2aWV3ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgkJaGVhZEFkZEFwcGxpY2FudHByZXZpZXcuc2V0QXR0cmlidXRlKCJjbGFzcyIsICJhcHBsaWNhdG5fcHJldmlldyIpOwoJCWhlYWRBZGRBcHBsaWNhbnRwcmV2aWV3LmlubmVyVGV4dCA9IHNlY3Rpb24ucHJldmlldzsKCQljb250YWluZXIuYXBwZW5kQ2hpbGQoaGVhZEFkZEFwcGxpY2FudHByZXZpZXcpOwoJCWNvbnRhaW5lci5hcHBlbmRDaGlsZChwcmV2aWV3QnV0dG9uKTsKCQljb250YWluZXIuYXBwZW5kQ2hpbGQocHJldmlld2ZhSWNvbik7CgoKCQlwcmV2aWV3QnV0dG9uLm9uY2xpY2sgPSBmdW5jdGlvbiAoZSkgewoKCQkJLy8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRlcicpLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGVMb2FkZXInKTsKCgkJCWUucHJldmVudERlZmF1bHQoKTsKCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnNlbnQtZGlhbG9nJykuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZUNvbnNlbnQnKTsKCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RpYWxvZy1jb250ZW50JykuaW5uZXJIVE1MID0gZmlsbEFsb3RlZXNEYXRhKCk7CgkJCS8vIGZpbGxwZGZDb250ZW50KHRydWUpLnRoZW4ocmVzID0+IHsKCQkJLy8gCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkZXInKS5jbGFzc0xpc3QuYWRkKCdoaWRlTG9hZGVyJyk7CgkJCS8vIH0pLmNhdGNoKGVyciA9PiB7CgkJCS8vIAlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZGVyJykuY2xhc3NMaXN0LmFkZCgnaGlkZUxvYWRlcicpOwoJCQkvLyB9KQoKCQl9CgoJCS8vIFZhbGlkIGNvbnNlbnQgYW5kIHF1b3RhdGlvbiBmb3JtCgoKCQkvLyBGb3IgQ29uc2VudCBGb3JtCgkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FjY2VwdENvbnNlbnQnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkgewoJCQlsZXQgY2hlY2tib3ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29uc2VudENoZWNrJyk7CgoJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29uc2VudENoZWNrJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHsKCQkJCWlmIChldmVudC50YXJnZXQuY2hlY2tlZCkgewoJCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhY2NlcHRUZXh0JykuY2xhc3NMaXN0LnJlbW92ZSgncmVkQWxlcnQnKTsKCQkJCX0KCQkJCWVsc2UgewoJCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhY2NlcHRUZXh0JykuY2xhc3NMaXN0LmFkZCgncmVkQWxlcnQnKTsKCQkJCX0KCQkJfSk7CgoKCQkJaWYgKGNoZWNrYm94LmNoZWNrZWQpIHsKCQkJCWlmICh2YWxpZENvbnNlbnRBbmRRdW90KCkpIHsKCQkJCQllbmFibGVTdWJtaXRCdXR0b25zKCk7CgkJCQl9CgkJCQkvLyBFbmFibGUgYnV0dG9uCgkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWNjZXB0VGV4dCcpLmNsYXNzTGlzdC5yZW1vdmUoJ3JlZEFsZXJ0Jyk7CgkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29uc2VudC1kaWFsb2cnKS5jbGFzc0xpc3QuYWRkKCdoaWRlQ29uc2VudCcpOwoJCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByZXZpZXctYnRuJykuY2xhc3NMaXN0LmFkZCgnY29uc2VudC12ZXJpZmllZCcpOwoJCQl9IGVsc2UgewoJCQkJZGlzYWJsZVN1Ym1pdEJ1dHRvbnMoKTsKCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhY2NlcHRUZXh0JykuY2xhc3NMaXN0LmFkZCgncmVkQWxlcnQnKTsKCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmV2aWV3LWJ0bicpLmNsYXNzTGlzdC5yZW1vdmUoJ2NvbnNlbnQtdmVyaWZpZWQnKTsKCQkJfQoJCX0pOwoKCX0KCgoKCXJldHVybiBjb250YWluZXI7Cn0KCi8vIGFrIApmdW5jdGlvbiBmaWxsQWxvdGVlc0RhdGEoKSB7CgoJbGV0IGlzQ29uY2VudCA9IHRydWU7Cgljb25zdCBmaXJfcERhdGEgPSBzY2hlbWFbImZpcnN0LXBhZ2UiXTsKCglsZXQgbXlxdW90YXRpb25QRGYgPSAiIjsKCWlmIChmaXJfcERhdGEpIHsKCQljb25zdCBmb3JtRGF0YSA9IGZpcl9wRGF0YVsiY29uc2VudGZvcm0iXTsgICAgIC8vIFRvIGJlIHVuY29tbWVudGVkCgkJLy8gY29uc3QgZm9ybURhdGEgPSB0cnVlOyAgICAgLy8gVG8gYmUgY29tbWVudGVkCgoJCWlmICghZm9ybURhdGEgfHwgZm9ybURhdGEgPT09ICJmYWxzZSIpIHsKCQkJaXNDb25jZW50ID0gZmFsc2U7CgkJfQoKCX0KCWNvbnN0IG15cHJldmlld0RldGFpbHMgPSBjcmVhdGVGdW5jdGlvbkRhdGEoKTsKCWxldCBhbGxvdGVlcyA9IG15cHJldmlld0RldGFpbHMuYXBwbGljYW50czsKCglsZXQgbmFtZXMgPSAnJzsKCWxldCBzaWduTGluZXMgPSAnJzsKCWxldCBjb3VudCA9IDE7CglsZXQgY291bnRTdHIgPSAnJzsKCWNvbnN0IHRvd2VyTmFtZSA9IHNjaGVtYVsnZmlyc3QtcGFnZSddWydmb3JtJ11bMV1bJ2RlZmF1bHRWYWx1ZSddCgljb25zdCB1bml0Tm8gPSB0b3dlck5hbWUgKyAnLScgKyBzY2hlbWFbJ2ZpcnN0LXBhZ2UnXVsnZm9ybSddWzJdWydkZWZhdWx0VmFsdWUnXTsKCWxldCB1bml0Tm9TdHIgPSAnJzsKCglmb3IgKGxldCBhbGxvdGVlIG9mIGFsbG90ZWVzKSB7CgkJbmFtZXMgKz0gYDxwPiR7YWxsb3RlZS5kYXRhLm5hbWV9PC9wPmA7CgkJdW5pdE5vU3RyICs9IGA8cD4ke3VuaXROb308L3A+YDsKCQlzaWduTGluZXMgKz0gYDxwPiR7Y291bnR9PC9wPmA7CgkJY291bnRTdHIgKz0gYDxwPiR7Y291bnR9PC9wPmA7CgkJY291bnQrKzsKCX0KCWlmICghaXNDb25jZW50KSB7CgkJZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLmNvbmNlbnRfbWFpbnNlYyIpLmNsYXNzTGlzdC5hZGQoImhpZGRlbiIpOwoJCXJldHVybiAnJzsKCX0gZWxzZSB7CgkJdHJ5IHsKCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FsbG90ZWVOYW1lJykuaW5uZXJIVE1MID0gbmFtZXM7CgkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhbGxvdGVlU2lnbicpLmlubmVySFRNTCA9IHNpZ25MaW5lczsKCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZsYXRObycpLmlubmVySFRNTCA9IHVuaXROb1N0cjsKCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FsbG90ZWVTck5vJykuaW5uZXJIVE1MID0gY291bnRTdHI7CgkJfSBjYXRjaCAoZXJyb3IpIHsKCgkJfQoJCS8vZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLmNvbmNlbnRfbWFpbnNlYyIpLmNsYXNzTGlzdC5yZW1vdmUoImhpZGRlbiIpOwoJCXJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29uY2VudF9tYWluc2VjJykuaW5uZXJIVE1MOwoJfQp9CgpmdW5jdGlvbiBoYXNTb21lUGFyZW50VGhlQ2xhc3MoZWxlbWVudCwgY2xhc3NuYW1lKSB7CglpZiAoZWxlbWVudC5jbGFzc05hbWUuc3BsaXQoIiAiKS5pbmRleE9mKGNsYXNzbmFtZSkgPj0gMCkgcmV0dXJuIGVsZW1lbnQ7CglyZXR1cm4gKAoJCWVsZW1lbnQucGFyZW50Tm9kZSAmJiBoYXNTb21lUGFyZW50VGhlQ2xhc3MoZWxlbWVudC5wYXJlbnROb2RlLCBjbGFzc25hbWUpCgkpOwp9CgpmdW5jdGlvbiBoYXNTb21lQ2hpbGROb2RlKGVsZW1lbnQsIGNsYXNzbmFtZSkgewoJY29uc3QgbXljaGlsZCA9IGVsZW1lbnQuY2hpbGROb2RlczsKCWlmIChteWNoaWxkKSB7CgkJZm9yIChsZXQgaSA9IDA7IGkgPCBteWNoaWxkLmxlbmd0aDsgaSsrKSB7CgkJCWlmIChteWNoaWxkW2ldLm5vZGVOYW1lID09IGNsYXNzbmFtZSkgewoJCQkJcmV0dXJuIG15Y2hpbGRbaV07CgkJCX0KCQl9Cgl9Cn0KCmZ1bmN0aW9uIGhhc1NvbWVTaWJsaW5nVGhlQ2xhc3MoZWxlbWVudCwgY2xhc3NuYW1lKSB7CglpZiAoZWxlbWVudC5jbGFzc05hbWUuc3BsaXQoIiAiKS5pbmRleE9mKGNsYXNzbmFtZSkgPj0gMCkgcmV0dXJuIGVsZW1lbnQ7CglyZXR1cm4gKAoJCWVsZW1lbnQucHJldmlvdXNFbGVtZW50U2libGluZyAmJgoJCWhhc1NvbWVTaWJsaW5nVGhlQ2xhc3MoZWxlbWVudC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLCBjbGFzc25hbWUpCgkpOwp9CgpmdW5jdGlvbiBoYXNTb21lTmV4dFNpYmxpbmdUaGVDbGFzcyhlbGVtZW50LCBjbGFzc25hbWUpIHsKCWlmIChlbGVtZW50LmNsYXNzTmFtZS5zcGxpdCgiICIpLmluZGV4T2YoY2xhc3NuYW1lKSA+PSAwKSByZXR1cm4gZWxlbWVudDsKCXJldHVybiAoCgkJZWxlbWVudC5uZXh0RWxlbWVudFNpYmxpbmcgJiYKCQloYXNTb21lU2libGluZ1RoZUNsYXNzKGVsZW1lbnQubmV4dEVsZW1lbnRTaWJsaW5nLCBjbGFzc25hbWUpCgkpOwp9CgpmdW5jdGlvbiByZW5kZXJhbGxBYm91dFNlY3Rpb24oU2VjdGlvbikgewoJY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpOwoJLy9jb25zdCBkYXRlU2lnbkZvb3RlciA9IFNlY3Rpb25bImRhdGUtc2lnbmF0dXJlLWZvb3RlciJdOwoKCWxldCBzdWJTZWN0aW9uID0gU2VjdGlvblsic3ViLXNlY3Rpb25zIl07CglzdWJTZWN0aW9uID0gc3ViU2VjdGlvbltzdWJTZWN0aW9uLmxlbmd0aCAtIDFdOwoJY29uc3Qgc3ViSGVhZGluZyA9IHN1YlNlY3Rpb25bInN1Yi1oZWFkaW5nIl07CgoJY29uc3QgY3RuTG9jYWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCWlmIChzdWJTZWN0aW9uLmlkKSBjdG5Mb2NhbC5zZXRBdHRyaWJ1dGUoImlkIiwgc3ViU2VjdGlvbi5pZCk7CgoJY29uc3Qgc3ViSGVhZGluZ0VsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaDMiKTsKCXN1YkhlYWRpbmdFbC5pbm5lclRleHQgPSBzdWJIZWFkaW5nOwoJY3RuTG9jYWwuYXBwZW5kQ2hpbGQoc3ViSGVhZGluZ0VsKTsKCWlmIChzdWJTZWN0aW9uLmNsYXNzKSBzdWJIZWFkaW5nRWwuY2xhc3NMaXN0LmFkZChzdWJTZWN0aW9uLmNsYXNzKTsKCgljb25zdCBmb3JtID0gc3ViU2VjdGlvblsiZm9ybSJdOwoKCWNvbnN0IGlucHV0R3JwID0gY3JlYXRlSW5wdXRHcnAoZm9ybSk7CglpbnB1dEdycC5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgImFwcGxpY2FudF9pbnB1dGdyb3VwIik7CglpZiAoaW5wdXRHcnApIGN0bkxvY2FsLmFwcGVuZENoaWxkKGlucHV0R3JwKTsKCgljb25zdCBsaXN0ID0gc3ViU2VjdGlvblsibGlzdCJdOwoJaWYgKGxpc3QpIHsKCQljb25zdCBvbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIm9sIik7CgkJZm9yIChjb25zdCBpdGVtIG9mIGxpc3QpIHsKCQkJY29uc3QgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsaSIpOwoJCQlsaS5pbm5lckhUTUwgPSBpdGVtOwoJCQlvbC5hcHBlbmQobGkpOwoJCX0KCgkJY3RuTG9jYWwuYXBwZW5kQ2hpbGQob2wpOwoJfQoKCWNvbnRhaW5lci5hcHBlbmQoY3RuTG9jYWwpOwoKCS8vIGlmIChkYXRlU2lnbkZvb3RlcikgewoJLy8gICBsZXQgZnRfaWQgPSAiIjsKCS8vICAgaWYgKHN1YkhlYWRpbmcpIHsKCS8vICAgICBmdF9pZCA9IHN1YkhlYWRpbmcudG9Mb3dlckNhc2UoKS5yZXBsYWNlQWxsKCIgIiwgIiIpOwoJLy8gICB9IGVsc2UgewoJLy8gICAgIGZ0X2lkID0gIiQiICsgbmV3IERhdGUoKS5nZXRVVENNaWxsaXNlY29uZHMoKSAqIE1hdGgucmFuZG9tKCk7CgkvLyAgIH0KCS8vICAgY29udGFpbmVyLmFwcGVuZChjcmVhdGVEYXRlU2lnbkZvb3RlcihmdF9pZCkpOwoJLy8gfQoKCXJldHVybiBjb250YWluZXI7Cn0KbGV0IHBheW1lbnRfc291cmNlX2NoZWNrID0gJ2NoZXF1ZSc7CmxldCBwYXltZW50U291cmNlQ291bnQgPSAwOwpmdW5jdGlvbiByZW5kZXJib29raW5nQW1vdW50U2VjdGlvbihTZWN0aW9uKSB7CglwYXltZW50U291cmNlQ291bnQrKzsKCWNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTsKCS8vY29uc3QgZGF0ZVNpZ25Gb290ZXIgPSBTZWN0aW9uWyJkYXRlLXNpZ25hdHVyZS1mb290ZXIiXTsKCWxldCBzdWJTZWN0aW9uID0gU2VjdGlvblsic3ViLXNlY3Rpb25zIl07CglzdWJTZWN0aW9uID0gc3ViU2VjdGlvbltzdWJTZWN0aW9uLmxlbmd0aCAtIDFdOwoJY29uc3Qgc3ViSGVhZGluZyA9IHN1YlNlY3Rpb25bInN1Yi1oZWFkaW5nIl07CgoJY29uc3QgY3RuTG9jYWxHbG9iYWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCWN0bkxvY2FsR2xvYmFsLnNldEF0dHJpYnV0ZSgiaWQiLCBgZ2xvYmFsLXJvdy0ke3BheW1lbnRTb3VyY2VDb3VudH1gKTsKCgljb25zdCBjdG5Mb2NhbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwoJY3RuTG9jYWwuc2V0QXR0cmlidXRlKCJpZCIsIGBoZWFkZXItcm93LSR7cGF5bWVudFNvdXJjZUNvdW50fWApOwoJaWYgKHN1YlNlY3Rpb24uaWQpIGN0bkxvY2FsLnNldEF0dHJpYnV0ZSgiaWQiLCBzdWJTZWN0aW9uLmlkKTsKCgljb25zdCBzdWJIZWFkaW5nRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJoMyIpOwoJc3ViSGVhZGluZ0VsLmlubmVyVGV4dCA9IHN1YkhlYWRpbmc7CgljdG5Mb2NhbC5hcHBlbmRDaGlsZChzdWJIZWFkaW5nRWwpOwoJaWYgKHN1YlNlY3Rpb24uY2xhc3MpIHN1YkhlYWRpbmdFbC5jbGFzc0xpc3QuYWRkKHN1YlNlY3Rpb24uY2xhc3MpOwoKCWNvbnN0IGZvcm0gPSBzdWJTZWN0aW9uWyJmb3JtIl07CgoJY29uc3QgaW5wdXRHcnAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCWlucHV0R3JwLmNsYXNzTGlzdC5hZGQoImlucHV0LWdyb3VwIik7CglsZXQgcGF5bWVudF9jaGVja190b2dnbGUgPSAnJzsKCWxldCBwYXltZW50X3NvdXJjZV91cGxvYWQgPSAnJwoJbGV0IHBheW1lbnRfc291cmNlID0gJyc7CglsZXQgbmV4dGZvcm1FbCA9ICcnOwoJbGV0IHBheW1lbnRfc291cmNlX2JhbmsgPSAnJzsKCWZvciAoY29uc3QgZm9ybUVsIG9mIGZvcm0pIHsKCQlpZiAoZm9ybUVsWyd0eXBlJ10gPT0gJ2NoZWNrYm94JykgewoJCQlwYXltZW50X2NoZWNrX3RvZ2dsZSA9IHBheW1lbnRFZGl0Q2hlY2soZm9ybUVsWydsYWJlbCddLCBmb3JtRWxbJ2lkJ10sIHN1YlNlY3Rpb25bImZvcm0iXSwgcGF5bWVudFNvdXJjZUNvdW50KTsKCQl9IGVsc2UgaWYgKGZvcm1FbFsndHlwZSddID09ICdmaWxlJykgewoJCQlwYXltZW50X3NvdXJjZV91cGxvYWQgPSB1cGxvYWRQYXltZW50U291cmNlKGZvcm1FbFsnbGFiZWwnXSwgZm9ybUVsWydpZCddLCBmb3JtRWwsIHBheW1lbnRTb3VyY2VDb3VudCk7CgkJfSBlbHNlIGlmIChmb3JtRWxbJ3R5cGUnXSA9PSAnc2VsZWN0JyAmJiAhZm9ybUVsWydpc2JhbmsnXSkgewoJCQluZXh0Zm9ybUVsID0gZm9ybUVsCgkJCXBheW1lbnRfc291cmNlID0gYWRkUGF5ZW1lbnRTb3VyY2UoZm9ybUVsWydsYWJlbCddLCBmb3JtRWxbJ2lkJ10sIGZvcm1FbCwgcGF5bWVudFNvdXJjZUNvdW50KTsKCQl9CgkJZWxzZSBpZiAoZm9ybUVsWyd0eXBlJ10gPT0gJ3NlbGVjdCcgJiYgZm9ybUVsWydpc2JhbmsnXSkgewoJCQlwYXltZW50X3NvdXJjZV9iYW5rID0gYWRkQmFua1NvdXJjZShmb3JtRWxbJ2xhYmVsJ10sIGZvcm1FbFsnaWQnXSwgZm9ybUVsLCBwYXltZW50U291cmNlQ291bnQsIGZvcm1FbFsna2V5J10pOwoJCX0KCQllbHNlIHsKCQkJY29uc3QgaW5wdXRFbCA9IGNyZWF0ZUlucHV0RWxCb29raW5nKGZvcm1FbCwgcGF5bWVudFNvdXJjZUNvdW50KTsKCQkJaWYgKGlucHV0RWwpIHsKCQkJCWlucHV0R3JwLmFwcGVuZENoaWxkKGlucHV0RWwpOwoJCQl9CgkJfQoJfQoJLy8gY29uc3QgaW5wdXRHcnAgPSBjcmVhdGVJbnB1dEdycChmb3JtKTsKCWlucHV0R3JwLnNldEF0dHJpYnV0ZSgiY2xhc3MiLCAiYXBwbGljYW50X2lucHV0Z3JvdXAiKTsKCS8vIGFkZCBlZGl0IHRvZ2dsZSBidXR0b25pZgoJaWYgKHBheW1lbnRfY2hlY2tfdG9nZ2xlKSBjdG5Mb2NhbEdsb2JhbC5hcHBlbmQocGF5bWVudF9jaGVja190b2dnbGUpOwoKCWlmIChwYXltZW50X3NvdXJjZV91cGxvYWQpIGlucHV0R3JwLmluc2VydEJlZm9yZShwYXltZW50X3NvdXJjZV91cGxvYWQsIGlucHV0R3JwLmZpcnN0Q2hpbGQpOwoKCWlmIChwYXltZW50X3NvdXJjZSkgaW5wdXRHcnAuaW5zZXJ0QmVmb3JlKHBheW1lbnRfc291cmNlLCBpbnB1dEdycC5maXJzdENoaWxkKTsKCglpZiAoaW5wdXRHcnApIGN0bkxvY2FsR2xvYmFsLmFwcGVuZENoaWxkKGlucHV0R3JwKTsKCglpZiAocGF5bWVudF9zb3VyY2VfYmFuaykKCQljdG5Mb2NhbEdsb2JhbC5hcHBlbmRDaGlsZChwYXltZW50X3NvdXJjZV9iYW5rKTsKCgljdG5Mb2NhbC5hcHBlbmRDaGlsZChjdG5Mb2NhbEdsb2JhbCkKCgoJY29uc3QgbGlzdCA9IHN1YlNlY3Rpb25bImxpc3QiXTsKCWlmIChsaXN0KSB7CgkJY29uc3Qgb2wgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJvbCIpOwoJCWZvciAoY29uc3QgaXRlbSBvZiBsaXN0KSB7CgkJCWNvbnN0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGkiKTsKCQkJbGkuaW5uZXJIVE1MID0gaXRlbTsKCQkJb2wuYXBwZW5kKGxpKTsKCQl9CgoJCWN0bkxvY2FsLmFwcGVuZENoaWxkKG9sKTsKCX0KCgljb25zdCBhZGRBbm90aGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CglhZGRBbm90aGVyLnNldEF0dHJpYnV0ZSgiY2xhc3MiLCBgYWRkX2Fub3RoZXJfdGV4dCBzZWN0aW9uX3RvX2hpZGVfJHtwYXltZW50U291cmNlQ291bnR9YCk7CglhZGRBbm90aGVyLmlubmVyVGV4dCA9ICJBZGQgYW5vdGhlciBQYXltZW50IFNvdXJjZSI7CglpZiAoYWRkQW5vdGhlcikgY3RuTG9jYWwuYXBwZW5kQ2hpbGQoYWRkQW5vdGhlcik7CgoJY29uc3QgcGF5bWVudF9zb3VyY2UyID0gYWRkUGF5ZW1lbnRTb3VyY2UobmV4dGZvcm1FbFsnbGFiZWwnXSwgbmV4dGZvcm1FbFsnaWQnXSwgbmV4dGZvcm1FbCwgcGF5bWVudFNvdXJjZUNvdW50KTsKCWlmIChwYXltZW50X3NvdXJjZTIpIGN0bkxvY2FsLmFwcGVuZENoaWxkKHBheW1lbnRfc291cmNlMik7CgoKCWNvbnN0IGZpbGVEb2MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCWZpbGVEb2Muc2V0QXR0cmlidXRlKCJjbGFzcyIsICJkb2Nfc2VsZWN0aW9uX2NvbnRhaW5lciIpOwoJLy8gPT09PT09PT09IEFkZCBwYXltZW50IHNvdXJjZSArIGljb24gPT09PT09PQoJY29uc3QgbGFiZWxwbHVzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGFiZWwiKTsKCWxhYmVscGx1cy5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgYG90aGVyX2RvY3VtZW50cGx1cyBzZWN0aW9uX3RvX2hpZGVfJHtwYXltZW50U291cmNlQ291bnR9YCk7CglsYWJlbHBsdXMuaW5uZXJUZXh0ID0gIisiOwoJbGFiZWxwbHVzLm9uY2xpY2sgPSBmdW5jdGlvbiAoZSkgewoJCXBheW1lbnRTb3VyY2VDb3VudCsrCgkJY29uc3QgdGVzdF9kID0gdGVzdEFkZChTZWN0aW9uLCBwYXltZW50U291cmNlQ291bnQpOwoKCQljb25zdCBsYWJlbG1pbnVzZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgkJbGFiZWxtaW51c2Rpdi5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgImRvY19zZWxlY3Rpb25fY29udGFpbmVyX3JlbW92ZSIpOwoJCWNvbnN0IGxhYmVsbWludXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsYWJlbCIpOwoJCWxhYmVsbWludXMuc2V0QXR0cmlidXRlKCJjbGFzcyIsIGBvdGhlcl9kb2N1bWVudG1pbnVzYCk7CgkJbGFiZWxtaW51cy5zZXRBdHRyaWJ1dGUoImlkIiwgYHJlbW92ZV8ke3BheW1lbnRTb3VyY2VDb3VudH1gKTsKCQlsYWJlbG1pbnVzLnNldEF0dHJpYnV0ZSgiZGF0YS1pZCIsIGAke3BheW1lbnRTb3VyY2VDb3VudH1gKTsKCgkJbGFiZWxtaW51cy5pbm5lclRleHQgPSAiLSI7CgkJbGFiZWxtaW51cy5vbmNsaWNrID0gZnVuY3Rpb24gKGUpIHsKCQkJY29uc3QgaGVhZGVyU2VjID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYGhlYWRlci1zZWMtJHskKHRoaXMpLmF0dHIoJ2RhdGEtaWQnKX1gKTsKCQkJaGVhZGVyU2VjLnJlbW92ZSgpOwoJCX07CgkJbGFiZWxtaW51c2Rpdi5hcHBlbmQobGFiZWxtaW51cykKCQl0ZXN0X2QuYXBwZW5kKGxhYmVsbWludXNkaXYpCgkJaW5wdXRHcnAuYXBwZW5kKHRlc3RfZCk7Cgl9OwoJaWYgKGxhYmVscGx1cykgewoJCWZpbGVEb2MuYXBwZW5kKGxhYmVscGx1cyk7CgkJY3RuTG9jYWwuYXBwZW5kQ2hpbGQoZmlsZURvYykKCX07CgoJLy8gRW5kcyBoZXJlCgoJaWYgKHBheW1lbnRTb3VyY2VDb3VudCA+IDEpIHsKCQljb25zdCBmaWxlRG9jQWdhaW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCQlmaWxlRG9jQWdhaW4uc2V0QXR0cmlidXRlKCJjbGFzcyIsICJkb2Nfc2VsZWN0aW9uX2NvbnRhaW5lciIpOwoKCQljb25zdCBsYWJlbG1pbnVzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGFiZWwiKTsKCQlsYWJlbG1pbnVzLnNldEF0dHJpYnV0ZSgiY2xhc3MiLCBgb3RoZXJfZG9jdW1lbnRwbHVzYCk7CgkJbGFiZWxtaW51cy5zZXRBdHRyaWJ1dGUoImlkIiwgYHJlbW92ZV8ke3BheW1lbnRTb3VyY2VDb3VudH1gKTsKCQlsYWJlbG1pbnVzLmlubmVyVGV4dCA9ICItIjsKCQlsYWJlbG1pbnVzLm9uY2xpY2sgPSBmdW5jdGlvbiAoZSkgewoJCQkkKGAjbmV3X3NvdXJjZV8ke3BhcnNlSW50KCQodGhpcykuYXR0cignaWQnKS5zcGxpdCgnXycpWzFdKSAtIDF9YCkuaHRtbCgnJyk7CgkJfTsKCgkJaWYgKGxhYmVsbWludXMpIHsKCQkJZmlsZURvY0FnYWluLmFwcGVuZChsYWJlbG1pbnVzKTsKCQkJY3RuTG9jYWwuYXBwZW5kQ2hpbGQoZmlsZURvY0FnYWluKQoJCX07Cgl9CgoJY29udGFpbmVyLmFwcGVuZChjdG5Mb2NhbCk7CgoJLy8gaWYgKGRhdGVTaWduRm9vdGVyKSB7CgkvLyAgIGxldCBmdF9pZCA9ICIiOwoJLy8gICBpZiAoc3ViSGVhZGluZykgewoJLy8gICAgIGZ0X2lkID0gc3ViSGVhZGluZy50b0xvd2VyQ2FzZSgpLnJlcGxhY2VBbGwoIiAiLCAiIik7CgkvLyAgIH0gZWxzZSB7CgkvLyAgICAgZnRfaWQgPSAiJCIgKyBuZXcgRGF0ZSgpLmdldFVUQ01pbGxpc2Vjb25kcygpICogTWF0aC5yYW5kb20oKTsKCS8vICAgfQoJLy8gICBjb250YWluZXIuYXBwZW5kKGNyZWF0ZURhdGVTaWduRm9vdGVyKGZ0X2lkKSk7CgkvLyB9CgoJcmV0dXJuIGNvbnRhaW5lcjsKfQoKZnVuY3Rpb24gdGVzdEFkZChkYXRhLCBjb3VudCkgewoJbGV0IHN1YlNlY3Rpb24gPSBkYXRhWyJzdWItc2VjdGlvbnMiXTsKCXN1YlNlY3Rpb24gPSBzdWJTZWN0aW9uW3N1YlNlY3Rpb24ubGVuZ3RoIC0gMV07Cgljb25zdCBzdWJIZWFkaW5nID0gc3ViU2VjdGlvblsic3ViLWhlYWRpbmciXTsKCgljb25zdCBjdG5Mb2NhbEdsb2JhbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwoJY3RuTG9jYWxHbG9iYWwuc2V0QXR0cmlidXRlKCJpZCIsIGBnbG9iYWwtcm93LSR7Y291bnR9YCk7CgoJY29uc3QgY3RuTG9jYWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCWN0bkxvY2FsLnNldEF0dHJpYnV0ZSgiaWQiLCBgaGVhZGVyLXNlYy0ke2NvdW50fWApOwoJaWYgKHN1YlNlY3Rpb24uaWQpIGN0bkxvY2FsLnNldEF0dHJpYnV0ZSgiaWQiLCBzdWJTZWN0aW9uLmlkKTsKCgljb25zdCBzdWJIZWFkaW5nRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJoMyIpOwoJc3ViSGVhZGluZ0VsLmlubmVyVGV4dCA9IHN1YkhlYWRpbmc7CgljdG5Mb2NhbC5hcHBlbmRDaGlsZChzdWJIZWFkaW5nRWwpOwoJaWYgKHN1YlNlY3Rpb24uY2xhc3MpIHN1YkhlYWRpbmdFbC5jbGFzc0xpc3QuYWRkKHN1YlNlY3Rpb24uY2xhc3MpOwoKCWNvbnN0IGZvcm0gPSBzdWJTZWN0aW9uWyJmb3JtIl07CgoJY29uc3QgaW5wdXRHcnAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCWlucHV0R3JwLmNsYXNzTGlzdC5hZGQoImlucHV0LWdyb3VwIik7CglsZXQgcGF5bWVudF9jaGVja190b2dnbGUgPSAnJzsKCWxldCBwYXltZW50X3NvdXJjZV91cGxvYWQgPSAnJwoJbGV0IHBheW1lbnRfc291cmNlID0gJyc7CglsZXQgbmV4dGZvcm1FbCA9ICcnOwoJZm9yIChjb25zdCBmb3JtRWwgb2YgZm9ybSkgewoJCWlmIChmb3JtRWxbJ3R5cGUnXSA9PSAnY2hlY2tib3gnKSB7CgkJCXBheW1lbnRfY2hlY2tfdG9nZ2xlID0gcGF5bWVudEVkaXRDaGVjayhmb3JtRWxbJ2xhYmVsJ10sIGZvcm1FbFsnaWQnXSwgc3ViU2VjdGlvblsiZm9ybSJdLCBjb3VudCk7CgkJfSBlbHNlIGlmIChmb3JtRWxbJ3R5cGUnXSA9PSAnZmlsZScpIHsKCQkJcGF5bWVudF9zb3VyY2VfdXBsb2FkID0gdXBsb2FkUGF5bWVudFNvdXJjZShmb3JtRWxbJ2xhYmVsJ10sIGZvcm1FbFsnaWQnXSwgZm9ybUVsLCBjb3VudCk7CgkJfSBlbHNlIGlmIChmb3JtRWxbJ3R5cGUnXSA9PSAnc2VsZWN0JykgewoJCQluZXh0Zm9ybUVsID0gZm9ybUVsCgkJCXBheW1lbnRfc291cmNlID0gYWRkUGF5ZW1lbnRTb3VyY2UoZm9ybUVsWydsYWJlbCddLCBmb3JtRWxbJ2lkJ10sIGZvcm1FbCwgY291bnQpOwoJCX0gZWxzZSB7CgkJCWNvbnN0IGlucHV0RWwgPSBjcmVhdGVJbnB1dEVsQm9va2luZyhmb3JtRWwsIGNvdW50KTsKCQkJaWYgKGlucHV0RWwpIHsKCQkJCWlucHV0R3JwLmFwcGVuZENoaWxkKGlucHV0RWwpOwoJCQl9CgkJfQoJfQoJLy8gY29uc3QgaW5wdXRHcnAgPSBjcmVhdGVJbnB1dEdycChmb3JtKTsKCWlucHV0R3JwLnNldEF0dHJpYnV0ZSgiY2xhc3MiLCAiYXBwbGljYW50X2lucHV0Z3JvdXAiKTsKCS8vIGFkZCBlZGl0IHRvZ2dsZSBidXR0b25pZgoJaWYgKHBheW1lbnRfY2hlY2tfdG9nZ2xlKSBjdG5Mb2NhbEdsb2JhbC5hcHBlbmQocGF5bWVudF9jaGVja190b2dnbGUpOwoKCWlmIChwYXltZW50X3NvdXJjZV91cGxvYWQpIGlucHV0R3JwLmluc2VydEJlZm9yZShwYXltZW50X3NvdXJjZV91cGxvYWQsIGlucHV0R3JwLmZpcnN0Q2hpbGQpOwoKCWlmIChwYXltZW50X3NvdXJjZSkgaW5wdXRHcnAuaW5zZXJ0QmVmb3JlKHBheW1lbnRfc291cmNlLCBpbnB1dEdycC5maXJzdENoaWxkKTsKCglpZiAoaW5wdXRHcnApIGN0bkxvY2FsR2xvYmFsLmFwcGVuZENoaWxkKGlucHV0R3JwKTsKCgljdG5Mb2NhbC5hcHBlbmRDaGlsZChjdG5Mb2NhbEdsb2JhbCkKCXJldHVybiBjdG5Mb2NhbDsKfQoKZnVuY3Rpb24gYWRkQmFua1NvdXJjZSh0ZXh0LCBpZCwgZGF0YSwgY291bnQsIGtleSkgewoJY29uc3QgaW5wdXRDdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCWlucHV0Q3RuLmNsYXNzTGlzdC5hZGQoImlucHV0Q3RuIik7CgoJY29uc3QgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsYWJlbCIpOwoJbGFiZWwuc2V0QXR0cmlidXRlKCJmb3IiLCBpZCk7CglsYWJlbC5pbm5lclRleHQgPSB0ZXh0OwoJaW5wdXRDdG4uYXBwZW5kKGxhYmVsKTsKCgoJY29uc3Qgc2VsZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic2VsZWN0Iik7Cgljb25zdCBkZWZhdWx0dmEgPSAnJzsKCS8vIHNlbGVjdC5zZXRBdHRyaWJ1dGUoImlkIiwgaWQgKyAnXycgKyBjb3VudCk7CgkvLyBzZWxlY3Quc2V0QXR0cmlidXRlKCJuYW1lIiwgaWQgKyAnXycgKyBjb3VudCk7CglzZWxlY3Quc2V0QXR0cmlidXRlKCJpZCIsIGAke2lkfS0ke2NvdW50fWApOwoJc2VsZWN0LnNldEF0dHJpYnV0ZSgibmFtZSIsIGtleSk7CglzZWxlY3Quc2V0QXR0cmlidXRlKCJwbGFjZWhvbGRlciIsICJCYW5rIik7Cglmb3IgKGNvbnN0IG9wdGlvblZhbCBvZiBkYXRhLnZhbHVlcykgewoJCWlmIChvcHRpb25WYWwudmFsdWUpIHsKCQkJY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgib3B0aW9uIik7CgkJCW9wdGlvbi5zZXRBdHRyaWJ1dGUoInZhbHVlIiwgb3B0aW9uVmFsLnZhbHVlKTsKCQkJb3B0aW9uLmlubmVyVGV4dCA9IG9wdGlvblZhbC5sYWJlbDsKCQkJaWYgKGRlZmF1bHR2YSkgewoJCQkJaWYgKGRlZmF1bHR2YSA9PT0gb3B0aW9uVmFsLnZhbHVlKSB7CgkJCQkJb3B0aW9uLnNldEF0dHJpYnV0ZSgic2VsZWN0ZWQiLCB0cnVlKTsKCQkJCX0KCQkJfQoJCQlzZWxlY3QuYXBwZW5kKG9wdGlvbik7CgkJfQoJfQoJc2VsZWN0Lm9uY2hhbmdlID0gZnVuY3Rpb24gKGUpIHsKCgkJLy8gcGF5bWVudF9zb3VyY2VfY2hlY2sgPSBlLnRhcmdldC52YWx1ZQoJCS8vIGRvY3VtZW50CgkJLy8gCS5xdWVyeVNlbGVjdG9yKGAucGF5bWVudF9maWxldXBsb2FkX2NsYXNzXyR7Y291bnR9YCkKCQkvLyAJLmNsYXNzTGlzdC5yZW1vdmUoImhpZGRlbiIpOwoJCS8vIGRvY3VtZW50CgkJLy8gCS5xdWVyeVNlbGVjdG9yKGAuZmlsZS11cGxvYWQtbGFibGUtJHtjb3VudH1gKS5pbm5lclRleHQgPSBwYXltZW50X3NvdXJjZV9jaGVjayAgLy8gYnkgbWFub2oKCgl9CglpbnB1dEN0bi5hcHBlbmQoc2VsZWN0KTsKCXJldHVybiBpbnB1dEN0bjsKfQoKZnVuY3Rpb24gYWRkUGF5ZW1lbnRTb3VyY2UodGV4dCwgaWQsIGRhdGEsIGNvdW50KSB7Cgljb25zdCBpbnB1dEN0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwoJaW5wdXRDdG4uY2xhc3NMaXN0LmFkZCgiaW5wdXRDdG4iKTsKCgljb25zdCBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxhYmVsIik7CglsYWJlbC5zZXRBdHRyaWJ1dGUoImZvciIsIGlkKTsKCWxhYmVsLmlubmVyVGV4dCA9IHRleHQ7CglpbnB1dEN0bi5hcHBlbmQobGFiZWwpOwoKCgljb25zdCBzZWxlY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzZWxlY3QiKTsKCWNvbnN0IGRlZmF1bHR2YSA9ICdjaGVxdWUnOwoJc2VsZWN0LnNldEF0dHJpYnV0ZSgiaWQiLCBpZCArICdfJyArIGNvdW50KTsKCXNlbGVjdC5zZXRBdHRyaWJ1dGUoIm5hbWUiLCBpZCArICdfJyArIGNvdW50KTsKCWZvciAoY29uc3Qgb3B0aW9uVmFsIG9mIGRhdGEudmFsdWVzKSB7CgkJaWYgKG9wdGlvblZhbC52YWx1ZSkgewoJCQljb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJvcHRpb24iKTsKCQkJb3B0aW9uLnNldEF0dHJpYnV0ZSgidmFsdWUiLCBvcHRpb25WYWwudmFsdWUpOwoJCQlvcHRpb24uaW5uZXJUZXh0ID0gb3B0aW9uVmFsLmxhYmVsOwoJCQlpZiAoZGVmYXVsdHZhKSB7CgkJCQlpZiAoZGVmYXVsdHZhID09PSBvcHRpb25WYWwudmFsdWUpIHsKCQkJCQlvcHRpb24uc2V0QXR0cmlidXRlKCJzZWxlY3RlZCIsIHRydWUpOwoJCQkJfQoJCQl9CgkJCXNlbGVjdC5hcHBlbmQob3B0aW9uKTsKCQl9Cgl9CglzZWxlY3Qub25jaGFuZ2UgPSBmdW5jdGlvbiAoZSkgewoKCQlwYXltZW50X3NvdXJjZV9jaGVjayA9IGUudGFyZ2V0LnZhbHVlCgkJZG9jdW1lbnQKCQkJLnF1ZXJ5U2VsZWN0b3IoYC5wYXltZW50X2ZpbGV1cGxvYWRfY2xhc3NfJHtjb3VudH1gKQoJCQkuY2xhc3NMaXN0LnJlbW92ZSgiaGlkZGVuIik7CgkJZG9jdW1lbnQKCQkJLnF1ZXJ5U2VsZWN0b3IoYC5maWxlLXVwbG9hZC1sYWJsZS0ke2NvdW50fWApLmlubmVyVGV4dCA9IHBheW1lbnRfc291cmNlX2NoZWNrICAvLyBieSBtYW5vagoKCgl9CglpbnB1dEN0bi5hcHBlbmQoc2VsZWN0KTsKCXJldHVybiBpbnB1dEN0bjsKfQpmdW5jdGlvbiB1cGxvYWRQYXltZW50U291cmNlKHRleHQsIGlkLCBkYXRhLCBjb3VudCkgewoKCWxldCBmaWxlVXBsb2FkUGF5bWVudCA9IFtdCgljb25zdCBmY3RuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CglmY3RuLmNsYXNzTGlzdC5hZGQoImZpbGUtdXBsb2FkIiwgImJhbmstc2xpcC11cGxvYWQiLCBgcGF5bWVudF9maWxldXBsb2FkX2NsYXNzXyR7Y291bnR9YCk7ICAvLyBSZW1vdmVkIGhpZGRlbiBjbGFzcyAvLyBtYW5vagoKCWNvbnN0IGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGFiZWwiKTsKCWxhYmVsLmNsYXNzTGlzdC5hZGQoYGZpbGUtdXBsb2FkLWxhYmxlLSR7Y291bnR9YCk7CgkvLyBsYWJlbC5pbm5lclRleHQgPSBwYXltZW50X3NvdXJjZV9jaGVjayA/IHBheW1lbnRfc291cmNlX2NoZWNrIDogJ2NoZXF1ZSc7ICAvLyBjb21tZW50ZWQgYnkgbWFub2oKCWxhYmVsLmlubmVyVGV4dCA9ICdjaGVxdWUnOyAgLy8gY2FuIGJlIHVuY29tbWVudGVkIGJ5IG1hbm9qCglwYXltZW50X3NvdXJjZV9jaGVjayA9ICdjaGVxdWUnOyAgLy8gY2FuIGJlIHVuY29tbWVudGVkIGJ5IG1hbm9qCgoJbGV0IG1haW5VcGxvYWRDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCW1haW5VcGxvYWRDb250YWluZXIuc2V0QXR0cmlidXRlKCJjbGFzcyIsICJtYWluVXBsb2FkX2NvbnRhaW5lcl9wYXltZW50Iik7CgoJY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpOwoJaW5wdXQuc2V0QXR0cmlidXRlKCJ0eXBlIiwgImZpbGUiKTsKCS8vIGlucHV0LnNldEF0dHJpYnV0ZSgicmVxdWlyZWQiLCB0cnVlKTsKCglpbnB1dC5zZXRBdHRyaWJ1dGUoImlkIiwgaWQpOwoJaW5wdXQuc2V0QXR0cmlidXRlKCJkYXRhLXJvdyIsIGNvdW50KTsKCWlucHV0LnNldEF0dHJpYnV0ZSgibmFtZSIsIGlkKTsKCglpbnB1dC5vbmNsaWNrID0gKGV2KSA9PiB7CgkJZXYudGFyZ2V0LnZhbHVlID0gbnVsbDsKCX07CglpbnB1dC5hZGRFdmVudExpc3RlbmVyKCJjaGFuZ2UiLCAoZXYpID0+IHsKCQl0cnkgewoJCQlpZiAoZXYudGFyZ2V0Lm5leHRFbGVtZW50U2libGluZykgewoJCQkJZXYudGFyZ2V0Lm5leHRFbGVtZW50U2libGluZy5yZW1vdmUoKTsKCQkJfQoKCQkJY29uc3Qgcm93VG9VcGRhdGUgPSAkKGV2LnRhcmdldCkuZGF0YSgncm93Jyk7CgkJCWNvbnNvbGUubG9nKHJvd1RvVXBkYXRlKTsKCQkJY29uc29sZS5sb2coZXYudGFyZ2V0KTsKCQkJY29uc3QgbXlGaWxlVVJMID0gVVJMLmNyZWF0ZU9iamVjdFVSTChldi50YXJnZXQuZmlsZXNbMF0pOwoJCQlsZXQgcHJldml3ZUNvbnRhaW5ldCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwoJCQlwcmV2aXdlQ29udGFpbmV0LnNldEF0dHJpYnV0ZSgiY2xhc3MiLCAicHJldmlld19hY3Rpb25idXR0b24iKTsKCQkJY29uc3QgbGlua25hdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsKCQkJdmFyIGltZ2FkZGhhciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImltZyIpOwoJCQlsaW5rbmF2LnNldEF0dHJpYnV0ZSgiaHJlZiIsIG15RmlsZVVSTCk7CgkJCWltZ2FkZGhhci5zZXRBdHRyaWJ1dGUoImhlaWdodCIsIDUwKTsKCQkJaW1nYWRkaGFyLnNldEF0dHJpYnV0ZSgiY2xhc3MiLCAidXBsb2FkX2ltYWdlX3ByZXZpZXciKTsKCQkJaW1nYWRkaGFyLnNyYyA9IG15RmlsZVVSTDsKCQkJbGlua25hdi5zZXRBdHRyaWJ1dGUoInRhcmdldCIsICJfYmxhbmsiKTsKCQkJbGlua25hdi5hcHBlbmQoaW1nYWRkaGFyKTsKCQkJcHJldml3ZUNvbnRhaW5ldC5hcHBlbmQobGlua25hdik7CgoJCQlpZiAobXlGaWxlVVJMKSB7CgkJCQljb25zdCByZW1vdmVFbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCQkJCXJlbW92ZUVsZS5jbGFzc0xpc3QuYWRkKCJyZW1vdmVfcHJldmlld19lbGUiKTsKCQkJCWNvbnN0IG5ld1N1ZmYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJidXR0b24iKTsKCQkJCW5ld1N1ZmYuaW5uZXJIVE1MID0gIlgiOwoJCQkJcmVtb3ZlRWxlLmFwcGVuZENoaWxkKG5ld1N1ZmYpOwoKCQkJCXJlbW92ZUVsZS5vbmNsaWNrID0gZnVuY3Rpb24gKGUpIHsKCQkJCQljb25zdCBzZWxmRWxlID0gZS50YXJnZXQ7CgkJCQkJY29uc3QgdGFyZ2V0RWxlID0gaGFzU29tZVBhcmVudFRoZUNsYXNzKAoJCQkJCQlzZWxmRWxlLAoJCQkJCQkicHJldmlld19hY3Rpb25idXR0b24iCgkJCQkJKTsKCQkJCQl0YXJnZXRFbGUucmVtb3ZlKCk7CgkJCQkJaW5wdXQudmFsdWUgPSBudWxsOwoJCQkJfTsKCQkJCXByZXZpd2VDb250YWluZXQuYXBwZW5kKHJlbW92ZUVsZSk7CgkJCX0KCQkJbWFpblVwbG9hZENvbnRhaW5lci5hcHBlbmQocHJldml3ZUNvbnRhaW5ldCk7CgkJCS8vIGxldCBzbUxvYWRlciA9IGNyZWF0ZUxvYWRlcigpOwoJCQkvLyBwcmV2aXdlQ29udGFpbmV0LmFwcGVuZChzbUxvYWRlcik7CgoJCQljb21wcmVzc0ltYWdlKG15RmlsZVVSTCwgZXYpCgkJCQkudGhlbigocmVzKSA9PiB7CgkJCQkJY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsKCQkJCQkvLyBzdG9yZURvY3VlbWVudFdpdGhPdXRCYXNlKCdiYWNrX2NoZWNrX3Bvc3QnLCByZXMpCgkJCQkJc3RvcmVEb2N1ZW1lbnQoYGJhY2tfY2hlY2tfcG9zdF8ke3Jvd1RvVXBkYXRlfWAsIHJlcykKCgkJCQkJY29uc3QgY3VycmVudF9wYXltZW50X3NvdXJjZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBwYXltZW50X3NvdXJjZV8ke3Jvd1RvVXBkYXRlfWApLnZhbHVlOwoJCQkJCXBheW1lbnRfc291cmNlX2NoZWNrID0gY3VycmVudF9wYXltZW50X3NvdXJjZTsKCgkJCQkJZm9ybURhdGEuYXBwZW5kKCJmaWxlIiwgcmVzKTsKCQkJCQl2ZXJpZnlQYXltZW50U291cmNlKHBheW1lbnRfc291cmNlX2NoZWNrLCBmb3JtRGF0YSwgcm93VG9VcGRhdGUpCgkJCQkJCS50aGVuKChyZXMpID0+IHsKCQkJCQkJCWxldCBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5teXZlck1vZGFsIik7CgkJCQkJCQlpZiAocmVzICYmIHJlcy52ZXJpZmllZCkgewoJCQkJCQkJCXByZXZpd2VDb250YWluZXQuYXBwZW5kKHZlcmlmaWVkaWNvbigpKTsKCgoJCQkJCQkJCWxldCBmaWxlOwoJCQkJCQkJCWlmICgoZXYudGFyZ2V0LmZpbGVzWzBdLnNpemUgLyAxMDI0KSA8IDUwMCkgewoJCQkJCQkJCQlmaWxlID0gZXYudGFyZ2V0LmZpbGVzWzBdOwoJCQkJCQkJCX0KCQkJCQkJCQllbHNlIHsKCQkJCQkJCQkJbGV0IHR5cGUgPSBldi50YXJnZXQuZmlsZXNbMF0udHlwZS5zcGxpdCgnLycpWzFdOwoJCQkJCQkJCQlmaWxlID0gbmV3IEZpbGUoW3Jlc10sIGBuYW1lLiR7dHlwZX1gLCB7CgkJCQkJCQkJCQl0eXBlOiByZXMudHlwZQoJCQkJCQkJCQl9KTsKCQkJCQkJCQl9CgoJCQkJCQkJCXN0b3JlSW1hZ2VJbkRCKGZpbGUsIGBwYXltZW50X3NvdXJjZV9pbWFnZV8ke3Jvd1RvVXBkYXRlfWAsIHBheW1lbnRfc291cmNlX2NoZWNrKQoJCQkJCQkJCQkudGhlbigocmVzcCkgPT4gcmVzcC5qc29uKCkpCgkJCQkJCQkJCS50aGVuKChyZXNwKSA9PiB7CgkJCQkJCQkJCQkvLyBTdG9yZURvY3VtZW50TmFtZShwaWNrZXIuaWQsIHJlc1snZmlsZV9uYW1lJ10pOwoJCQkJCQkJCQkJLy8gc21Mb2FkZXIuaW5uZXJIVE1MID0gJyc7CgkJCQkJCQkJCQkvLyBpbWFnZVVwbG9hZGluZyA9IGltYWdlVXBsb2FkaW5nLmZpbHRlcih4ID0+IHggIT0gcGlja2VyLmlkKTsKCgkJCQkJCQkJCQlpZiAoIWpzb25EYXRhWydwYXltZW50U291cmNlcyddLmZpbmQoeCA9PiB4LnJvd0lkID09IHJvd1RvVXBkYXRlKSkgewoJCQkJCQkJCQkJCWpzb25EYXRhWydwYXltZW50U291cmNlcyddLnB1c2goewoJCQkJCQkJCQkJCQkuLi5yZXMudmFsdWUsCgkJCQkJCQkJCQkJCSdpbWFnZVNyYyc6IHJlc3BbJ2ZpbGVfbmFtZSddLAoJCQkJCQkJCQkJCQkncm93SWQnOiByb3dUb1VwZGF0ZQoJCQkJCQkJCQkJCX0pCgkJCQkJCQkJCQl9CgkJCQkJCQkJCQljb25zb2xlLmxvZyhqc29uRGF0YVsncGF5bWVudFNvdXJjZXMnXSk7CgkJCQkJCQkJCX0pLmNhdGNoKGVyciA9PiB7CgkJCQkJCQkJCQkvLyBzbUxvYWRlci5pbm5lckhUTUwgPSAnJzsKCQkJCQkJCQkJCS8vIGltYWdlVXBsb2FkaW5nID0gaW1hZ2VVcGxvYWRpbmcuZmlsdGVyKHggPT4geCAhPSBwaWNrZXIuaWQpOwoJCQkJCQkJCQkJYWxlcnQoYENvdWxkbid0IHVwbG9hZCBpbWFnZWApOwoJCQkJCQkJCQl9KTsKCgoKCgkJCQkJCQkJY29uc3QgbXlpZ0lkID0gcGF5bWVudF9zb3VyY2VfY2hlY2sgKyAiX2lnbm9yZSI7CgkJCQkJCQkJaWdub3JlRG9jID0gaWdub3JlRG9jLmZpbHRlcigoaWcpID0+IHsKCQkJCQkJCQkJcmV0dXJuIGlnLm5hbWUgIT0gbXlpZ0lkOwoJCQkJCQkJCX0pOwoJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQlpZiAoCgkJCQkJCQkJCXJlcyAmJgoJCQkJCQkJCQkocmVzLm1lc3NhZ2VzLmxlbmd0aCA+IDAgfHwgcmVzLnZhbHVlLmxlbmd0aCA+IDApCgkJCQkJCQkJKSB7CgkJCQkJCQkJCWxldCBkaXNwbGF5VGV4dCA9ICIiOwoJCQkJCQkJCQlpZiAocmVzLm1lc3NhZ2VzLmxlbmd0aCA+IDApIHsKCQkJCQkJCQkJCXJlcy5tZXNzYWdlcy5mb3JFYWNoKChteXYpID0+IHsKCQkJCQkJCQkJCQlkaXNwbGF5VGV4dCA9IGRpc3BsYXlUZXh0ICsgbXl2ICsgIjxicj4iOwoJCQkJCQkJCQkJfSk7CgkJCQkJCQkJCX0KCQkJCQkJCQkJZG9jdW1lbnQucXVlcnlTZWxlY3RvcigKCQkJCQkJCQkJCSIjbXlQb3B1cCAucG9wdXBfd2FybmluZ3RleHQiCgkJCQkJCQkJCSkuaW5uZXJIVE1MID0gZGlzcGxheVRleHQ7CgoJCQkJCQkJCQlkb2N1bWVudAoJCQkJCQkJCQkJLnF1ZXJ5U2VsZWN0b3IoIiNteVBvcHVwIC5pZ25vcmVQcl9CdG4iKQoJCQkJCQkJCQkJLmNsYXNzTGlzdC5yZW1vdmUoImhpZGRlbiIpOwoKCQkJCQkJCQkJZG9jdW1lbnQucXVlcnlTZWxlY3RvcigKCQkJCQkJCQkJCSIjbXlQb3B1cCAuaWdub3JlUHJfQnRuIgoJCQkJCQkJCQkpLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7CgkJCQkJCQkJCQljb25zdCBteWlnSWQgPSBlbGVtZW50LmlkICsgIl9pZ25vcmUiOwoJCQkJCQkJCQkJaWdub3JlRG9jID0gaWdub3JlRG9jLmZpbHRlcigoaWcpID0+IHsKCQkJCQkJCQkJCQlyZXR1cm4gaWcubmFtZSAhPSBteWlnSWQ7CgkJCQkJCQkJCQl9KTsKCQkJCQkJCQkJCWlnbm9yZURvYy5wdXNoKHsgbmFtZTogbXlpZ0lkLCB2YWx1ZTogcmVzLnZhbHVlIH0pOwoJCQkJCQkJCQkJbW9kYWwuY2xhc3NMaXN0LnRvZ2dsZSgic2hvdy1tb2RhbCIpOwoJCQkJCQkJCQl9OwoJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoCgkJCQkJCQkJCQkiI215UG9wdXAgLnBvcHVwX3dhcm5pbmd0ZXh0IgoJCQkJCQkJCQkpLmlubmVyVGV4dCA9ICJQbGVhc2UgdXBsb2FkIHByb3BlciBQYXltZW50IHNvdXJjZS4iOwoKCQkJCQkJCQkJZG9jdW1lbnQKCQkJCQkJCQkJCS5xdWVyeVNlbGVjdG9yKCIjbXlQb3B1cCAuaWdub3JlUHJfQnRuIikKCQkJCQkJCQkJCS5jbGFzc0xpc3QuYWRkKCJoaWRkZW4iKTsKCQkJCQkJCQl9CgkJCQkJCQkJbW9kYWwuY2xhc3NMaXN0LnRvZ2dsZSgic2hvdy1tb2RhbCIpOwoJCQkJCQkJCXByZXZpd2VDb250YWluZXQuYXBwZW5kKHZlcmlmeWZhaWxzaWNvbigpKTsKCQkJCQkJCX0KCgkJCQkJCQlkb2N1bWVudC5xdWVyeVNlbGVjdG9yKAoJCQkJCQkJCSIjbXlQb3B1cCAuZG9jX3JldXBsb2FkQnRuIgoJCQkJCQkJKS5vbmNsaWNrID0gZnVuY3Rpb24gKCkgewoJCQkJCQkJCWNvbnN0IGN1ckVsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYXltZW50X3NvdXJjZV9pbWFnZScpOwoJCQkJCQkJCWNvbnN0IHRhcmdldEVsZSA9IGhhc1NvbWVOZXh0U2libGluZ1RoZUNsYXNzKAoJCQkJCQkJCQljdXJFbGUsCgkJCQkJCQkJCSJwcmV2aWV3X2FjdGlvbmJ1dHRvbiIKCQkJCQkJCQkpOwoJCQkJCQkJCWN1ckVsZS52YWx1ZSA9IG51bGw7CgkJCQkJCQkJaWYgKHRhcmdldEVsZSkgewoJCQkJCQkJCQl0YXJnZXRFbGUucmVtb3ZlKCk7CgkJCQkJCQkJfQoJCQkJCQkJCW1vZGFsLmNsYXNzTGlzdC50b2dnbGUoInNob3ctbW9kYWwiKTsKCQkJCQkJCX07CgkJCQkJCX0pCgkJCQkJCS5jYXRjaCgoZXJyb3IpID0+IHsKCQkJCQkJCWNvbnNvbGUubG9nKGVycm9yKQoJCQkJCQkJcHJldml3ZUNvbnRhaW5ldC5hcHBlbmQodmVyaWZ5ZmFpbHNpY29uKCkpOwoJCQkJCQl9KTsKCQkJCX0pCgkJCQkuY2F0Y2goKGVycm9yKSA9PiB7CgkJCQkJY29uc29sZS5sb2coZXJyb3IpCgkJCQkJcHJldml3ZUNvbnRhaW5ldC5hcHBlbmQodmVyaWZ5ZmFpbHNpY29uKCkpOwoJCQkJfSk7CgkJfSBjYXRjaCAoZXJyb3IpIHsKCQkJY29uc29sZS5sb2coeyBlcnJvciB9KTsKCQl9Cgl9KTsKCgltYWluVXBsb2FkQ29udGFpbmVyLmFwcGVuZChpbnB1dCk7CglmY3RuLmFwcGVuZChsYWJlbCwgbWFpblVwbG9hZENvbnRhaW5lcik7CglyZXR1cm4gZmN0bjsKCWZpbGVVcGxvYWRQYXltZW50LnB1c2goZmN0bik7Cn0KCmZ1bmN0aW9uIHNldERlZmF1bHRDb3VudHJ5KGNvdW50cnlOYW1lKSB7CglsZXQgY3VycmVudEFwcGxpY2FudCA9IHNjaGVtYVsnYXBwbGljYW50LWRldGFpbHMnXVsnc3ViLXNlY3Rpb25zJ107CgoJLy8gU2V0IGRlZmF1bHQgdmFsdWUgb2YgY291bnRyeSBmb3IgYWxsIGFwcGxpY2FudHMKCWZvciAobGV0IGkgPSAwOyBpIDwgY3VycmVudEFwcGxpY2FudC5sZW5ndGggLSAxOyBpKyspIHsKCQljdXJyZW50QXBwbGljYW50W2ldWydmb3JtJ11bMjBdLmRlZmF1bHRWYWx1ZSA9IGNvdW50cnlOYW1lOwoJfQoKfQpmdW5jdGlvbiByZW5kZXJJZGVudGlmaWNhdGlvbihpZGVudGlmaWNhdGlvbmNvbHMpIHsKCWNvbnN0IGZybWdycDEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgcGFnZS0yYCk7CgoJY29uc3QgaDIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJoMiIpOwoJaDIuaW5uZXJUZXh0ID0gIklkZW50aWZpY2F0aW9uIjsKCgljb25zdCBJQ3RuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CglJQ3RuLmNsYXNzTGlzdC5hZGQoImlkZW50aWZpY2F0aW9uLXNlY3Rpb24iKTsKCglmcm1ncnAxLmFwcGVuZChoMik7Cglmcm1ncnAxLmFwcGVuZChJQ3RuKTsKCglsZXQgY291bnQgPSBpZGVudGlmaWNhdGlvbmNvbHMubGVuZ3RoICUgMzsKCWNvdW50ID0KCQljb3VudCA+IDAKCQkJPyAoaWRlbnRpZmljYXRpb25jb2xzLmxlbmd0aCAtIGNvdW50KSAvIDMgKyAxCgkJCTogaWRlbnRpZmljYXRpb25jb2xzLmxlbmd0aCAvIDM7CgoJZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7CgkJY29uc3QgY291bnRMb2NhbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwoJCS8vIGNvdW50TG9jYWwuc2V0QXR0cmlidXRlKCJpZCIsIGBwYWdlNCR7aSArIDF9YCk7CgkJY291bnRMb2NhbC5zZXRBdHRyaWJ1dGUoImlkIiwgYHBhZ2UyJHtpICsgMX1gKTsKCQljb25zdCBpbm5lckN0bGNhbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwoJCS8vIGNvdW50TG9jYWwuY2xhc3NMaXN0LmFkZCgiaGlkZGVuIik7CgkJaW5uZXJDdGxjYWwuY2xhc3NMaXN0LmFkZCgibXlpZGVudGlmaWNhdGlvbnNlYyIpOwoJCWZvciAobGV0IHggPSAwOyB4IDwgMzsgeCsrKSB7CgkJCWlmIChpICogMyArIHggPCBpZGVudGlmaWNhdGlvbmNvbHMubGVuZ3RoKSB7CgkJCQlpbm5lckN0bGNhbC5hcHBlbmRDaGlsZCgKCQkJCQljcmVhdGVJZGVudGlmaWNhdGlvbkNvbHVtbihpZGVudGlmaWNhdGlvbmNvbHNbaSAqIDMgKyB4XSkKCQkJCSk7CgkJCX0KCQl9CgoKCQljb3VudExvY2FsLmFwcGVuZENoaWxkKGlubmVyQ3RsY2FsKTsKCQljb25zdCBjaGVja1RleHQgPSBzY2hlbWFbImZpcnN0LXBhZ2UiXVsib3RoZXIiXTsKCQlpZiAoY2hlY2tUZXh0KSB7CgkJCWNvdW50TG9jYWwuYXBwZW5kKAoJCQkJYWNrbm9sZWRnZUNoZWNrKGNoZWNrQm94VGV4dHMucGFnZV90d28sIGBhcHB0bmNfYWdncmVfNCR7aSArIDF9YCkKCQkJKTsKCQl9CgkJSUN0bi5hcHBlbmQoY291bnRMb2NhbCk7CgoJCS8vIEFkZGluZyBzcGVjaWFsIGNoZWNrYm94IHRvIDJuZCBzZWN0aW9uIG9mIHBhZ2UgMyBhcyBzdWdnZXN0ZWQgYnkgRGV2bmEKCQkvLyBUaGUgY2hlY2tib3ggdGV4dCBjYW4gYmUgZm91bmQgaW4gdGhlIGNvbmZpZy5qcyBmaWxlCgkJLy8gWW91IGNhbiBhbHNvIHBsYWNlIHRoaXMgY29kZSBhdCBjb3JyZWN0IHBsYWNlIHdoZXJlIG90aGVyIGNoZWNrYm94ZXMgYXJlIGFkZGVkCgkJLy8gSSBjb3VsZG4ndCBmaW5kIHRoZSBjb3JyZWN0IHBsYWNlIHRvIHB1dCBpdCBzbyBwbGFjaW5nIGhlcmUoSXQgd2lsbCB3b3JrIGJ0dykKCgkJY29uc3QgY2hlY2tib3hUeHQgPSBwYWdlM3RuYy50ZXh0OwoJCWNvbnN0IHBhZ2UzTGFzdFNlY3Rpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFnZS0zJykubGFzdENoaWxkOwoJCWNvbnN0IGNoZWNrYm94Q3VzdG9tSWQgPSAncGFnZTNfbGFzdF9jdXN0b21faWQnOwoJCWlmICghZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY2hlY2tib3hDdXN0b21JZCkpIHsKCQkJY29uc3QgY2hlY2tib3hDb250ID0gYWNrbm9sZWRnZUNoZWNrKGNoZWNrYm94VHh0LCBjaGVja2JveEN1c3RvbUlkKTsKCQkJaWYgKHBhZ2UzTGFzdFNlY3Rpb24pIHsKCQkJCXBhZ2UzTGFzdFNlY3Rpb24uYXBwZW5kQ2hpbGQoY2hlY2tib3hDb250KTsKCQkJfQoJCX0KCgl9CglyZXR1cm4gZnJtZ3JwMTsKfQoKZnVuY3Rpb24gcmVuZGVyYXBwbGljYW50U2VjdGlvbihzZWN0aW9uLCBjb3VudCwgcGVyUGFnZSkgewoJY29uc3QgYXBwbGljYW50X2RldCA9IHNjaGVtYVsiYXBwbGljYW50LWRldGFpbHMiXTsKCS8vY29uc3QgZGF0ZVNpZ25Gb290ZXIgPSBhcHBsaWNhbnRfZGV0WyJkYXRlLXNpZ25hdHVyZS1mb290ZXIiXTsKCgljb25zdCBoZWFkaW5nID0gYXBwbGljYW50X2RldFsiaGVhZGluZyJdOwoKCWNvbnN0IGhlYWRpbmdFTCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImgyIik7CgloZWFkaW5nRUwuaW5uZXJUZXh0ID0gaGVhZGluZzsKCgljb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7Cgljb250YWluZXIuYXBwZW5kKGhlYWRpbmdFTCk7CgoJZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7CgkJY29uc3QgY291bnRMb2NhbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwoJCS8vIGNvdW50TG9jYWwuc2V0QXR0cmlidXRlKCJpZCIsIGBwYWdlMiR7aSArIDF9YCk7CgkJY291bnRMb2NhbC5zZXRBdHRyaWJ1dGUoImlkIiwgYHBhZ2UzJHtpICsgMX1gKTsKCQkvLyBjb3VudExvY2FsLmNsYXNzTGlzdC5hZGQoImhpZGRlbiIpOwoJCWZvciAobGV0IHggPSAwOyB4IDwgcGVyUGFnZTsgeCsrKSB7CgkJCWlmIChpICogcGVyUGFnZSArIHggPCBzZWN0aW9uLmxlbmd0aCkgewoJCQkJY29uc3Qgc3ViSGVhZGluZyA9IHNlY3Rpb25baSAqIHBlclBhZ2UgKyB4XVsic3ViLWhlYWRpbmciXTsKCQkJCWNvbnN0IGN0bkxvY2FsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgkJCQlpZiAoc2VjdGlvbltpICogcGVyUGFnZSArIHhdLmlkKQoJCQkJCWN0bkxvY2FsLnNldEF0dHJpYnV0ZSgiaWQiLCBzZWN0aW9uW2kgKiBwZXJQYWdlICsgeF0uaWQpOwoJCQkJY3RuTG9jYWwuY2xhc3NMaXN0LmFkZCgiYXBwbGljYW50X2NvbnRhaW5lciIpOwoJCQkJY29uc3Qgc3ViSGVhZGluZ0VsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaDMiKTsKCQkJCXN1YkhlYWRpbmdFbC5pbm5lclRleHQgPSBzdWJIZWFkaW5nOwoJCQkJY3RuTG9jYWwuYXBwZW5kQ2hpbGQoc3ViSGVhZGluZ0VsKTsKCQkJCWlmIChzZWN0aW9uW2kgKiBwZXJQYWdlICsgeF0uY2xhc3MpCgkJCQkJc3ViSGVhZGluZ0VsLmNsYXNzTGlzdC5hZGQoc2VjdGlvbltpICogcGVyUGFnZSArIHhdLmNsYXNzKTsKCgkJCQljb25zdCBmb3JtID0gc2VjdGlvbltpICogcGVyUGFnZSArIHhdWyJmb3JtIl07CgoJCQkJY29uc3QgaW5wdXRHcnAgPSBjcmVhdGVJbnB1dEdycChmb3JtKTsKCQkJCWlucHV0R3JwLnNldEF0dHJpYnV0ZSgiY2xhc3MiLCAiYXBwbGljYW50X2lucHV0Z3JvdXAiKTsKCQkJCWlmIChpbnB1dEdycCkgY3RuTG9jYWwuYXBwZW5kQ2hpbGQoaW5wdXRHcnApOwoKCQkJCWNvbnN0IGxpc3QgPSBzZWN0aW9uW2kgKiBwZXJQYWdlICsgeF1bImxpc3QiXTsKCQkJCWlmIChsaXN0KSB7CgkJCQkJY29uc3Qgb2wgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJvbCIpOwoJCQkJCWZvciAoY29uc3QgaXRlbSBvZiBsaXN0KSB7CgkJCQkJCWNvbnN0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGkiKTsKCQkJCQkJbGkuaW5uZXJIVE1MID0gaXRlbTsKCQkJCQkJb2wuYXBwZW5kKGxpKTsKCQkJCQl9CgkJCQkJY3RuTG9jYWwuYXBwZW5kQ2hpbGQob2wpOwoJCQkJfQoJCQkJY291bnRMb2NhbC5hcHBlbmRDaGlsZChjdG5Mb2NhbCk7CgkJCX0KCgkJfQoJCWNvbnN0IGNoZWNrVGV4dCA9IHNjaGVtYVsiZmlyc3QtcGFnZSJdWyJvdGhlciJdOwoJCWlmIChjaGVja1RleHQpIHsKCQkJY291bnRMb2NhbC5hcHBlbmQoCgkJCQlhY2tub2xlZGdlQ2hlY2soY2hlY2tCb3hUZXh0cy5jb21tb24sIGBhcHB0bmNfYWdncmVfMiR7aSArIDF9YCkKCQkJKTsKCQl9CgkJY29udGFpbmVyLmFwcGVuZChjb3VudExvY2FsKTsKCX0KCglyZXR1cm4gY29udGFpbmVyOwp9CgpmdW5jdGlvbiB1cGRhdGVBY3Rpb24oZWxlbWVudCkgewoJZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCJpbnB1dFtudW1MZW5ndGhdIikuZm9yRWFjaCgoZWwpID0+IHsKCQljb25zdCBudW1MZW5ndGggPSBlbC5nZXRBdHRyaWJ1dGUoIm51bUxlbmd0aCIpOwoJCWVsLnNldEF0dHJpYnV0ZSgKCQkJIm9uaW52YWxpZCIsCgkJCWB0aGlzLnNldEN1c3RvbVZhbGlkaXR5KCdFbnRlciBhICR7bnVtTGVuZ3RofSBkaWdpdCBudW1iZXInKTtgCgkJKTsKCQllbC5zZXRBdHRyaWJ1dGUoIm9uaW5wdXQiLCAidGhpcy5zZXRDdXN0b21WYWxpZGl0eSgnJyk7Iik7CgkJZWwuc2V0QXR0cmlidXRlKCJvbnZhbGlkIiwgInRoaXMuc2V0Q3VzdG9tVmFsaWRpdHkoJycpOyIpOwoJCWVsLnNldEF0dHJpYnV0ZSgib25jaGFuZ2UiLCAidGhpcy5zZXRDdXN0b21WYWxpZGl0eSgnJyk7Iik7CgoJCWVsLnNldEF0dHJpYnV0ZSgibWluIiwgIjEiICsgIjAiLnJlcGVhdChudW1MZW5ndGggLSAxKSk7CgkJZWwuc2V0QXR0cmlidXRlKCJtYXgiLCAiOSIucmVwZWF0KG51bUxlbmd0aCkpOwoJfSk7CgoJZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCIuaW5wdXRDdG4iKS5mb3JFYWNoKChjdG4pID0+IHsKCQljdG4uYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCAoKSA9PiB7CgkJCWN0bi5xdWVyeVNlbGVjdG9yKCJpbnB1dCxzZWxlY3QsIHRleHRhcmVhIikuZm9jdXMoKTsKCQl9KTsKCQljb25zdCBsYWJlbCA9IGN0bi5xdWVyeVNlbGVjdG9yKCJsYWJlbCIpOwoJCWNvbnN0IGlucHV0ID0gY3RuLnF1ZXJ5U2VsZWN0b3IoCgkJCSdpbnB1dFt0eXBlPSJ0ZXh0Il0saW5wdXRbdHlwZT0ibnVtYmVyIl0saW5wdXRbdHlwZT0iZW1haWwiXSx0ZXh0YXJlYScKCQkpOwoKCQkvLyBpZiAoaW5wdXQgJiYgaW5wdXQudGFnTmFtZSA9PT0gIlRFWFRBUkVBIikgewoJCS8vICAgY3RuLmNsYXNzTGlzdC5hZGQoInctMTAwIik7CgkJLy8gfQoKCQlpZiAobGFiZWwgJiYgaW5wdXQpIHsKCQkJY29uc3QgdHlwZSA9IGlucHV0LmdldEF0dHJpYnV0ZSgidHlwZSIpOwoJCQlpZiAodHlwZSA9PT0gImNoZWNrYm94IikgewoJCQkJbGFiZWwuY2xhc3NMaXN0LmFkZCgiZmxleCIpOwoJCQl9CgoJCQlpZiAoCgkJCQljdG4ucXVlcnlTZWxlY3RvcigiLmlucHV0cHJlZml4IikgIT0gbnVsbCB8fAoJCQkJY3RuLnF1ZXJ5U2VsZWN0b3IoIi5pbnB1dHN1ZmZpeCIpICE9IG51bGwKCQkJKSB7CgkJCX0gZWxzZSB7CgkJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoInBsYWNlaG9sZGVyIiwgbGFiZWwuaW5uZXJUZXh0KTsKCQkJCWlmIChpbnB1dC52YWx1ZSA9PT0gIiIpIGxhYmVsLmNsYXNzTGlzdC5hZGQoImhpZGRlbiIpOwoKCQkJCWlucHV0LmFkZEV2ZW50TGlzdGVuZXIoImZvY3VzIiwgZnVuY3Rpb24gKCkgewoJCQkJCWlucHV0LnJlbW92ZUF0dHJpYnV0ZSgicGxhY2Vob2xkZXIiKTsKCQkJCQlsYWJlbC5jbGFzc0xpc3QucmVtb3ZlKCJoaWRkZW4iKTsKCQkJCX0pOwoJCQkJaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigiYmx1ciIsIGZ1bmN0aW9uICgpIHsKCQkJCQlpZiAoaW5wdXQudmFsdWUgPT0gIiIpIGxhYmVsLmNsYXNzTGlzdC5hZGQoImhpZGRlbiIpOwoJCQkJCWlucHV0LnNldEF0dHJpYnV0ZSgicGxhY2Vob2xkZXIiLCBsYWJlbC5pbm5lclRleHQpOwoJCQkJfSk7CgkJCX0KCQl9Cgl9KTsKCglsZXQgcGlja2VycyA9IGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbcm9sZT0icGhvdG8tcGlja2VyIl0nKTsKCWlmIChwaWNrZXJzKSB7CgkJcGlja2Vycy5mb3JFYWNoKChwaWNrZXIpID0+IHsKCQkJY29uc3QgcHJldmlldyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKAoJCQkJcGlja2VyLmdldEF0dHJpYnV0ZSgicHJldmlldy1pZCIpCgkJCSk7CgkJCXBpY2tlci5hZGRFdmVudExpc3RlbmVyKCJjaGFuZ2UiLCBhc3luYyBmdW5jdGlvbiAoZXYpIHsKCgkJCQkvLyBhbGVydCgndXBsb2FkIHBob3RvJyk7CgoJCQkJLy8gRXhwZXJpbWVudGFsIGNvZGUgdG8gcmVkdWNlIHBkZiBzaXplCgkJCQkvLyBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwoJCQkJLy8gY29uc3QgZmlsZSA9IGUudGFyZ2V0LmZpbGVzWzBdOwoJCQkJLy8gY29uc3QgbXlGaWxlVVJMID0gVVJMLmNyZWF0ZU9iamVjdFVSTChlLnRhcmdldC5maWxlc1swXSk7CgoJCQkJLy8gY29tcHJlc3NJbWFnZShteUZpbGVVUkwpLnRoZW4oKHJlcykgPT4gewoJCQkJLy8gCXJlYWRlci5yZWFkQXNEYXRhVVJMKHJlcyk7CgkJCQkvLyAJc3RvcmVEb2N1ZW1lbnQocGlja2VyLmlkLCByZXMpOwoKCQkJCS8vIH0pOwoKCQkJCS8vIHJlYWRlci5vbmxvYWRlbmQgPSBmdW5jdGlvbigpewoJCQkJLy8gCXByZXZpZXcuc3JjID0gcmVhZGVyLnJlc3VsdDsKCQkJCS8vIH0KCgoJCQkJY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKCQkJCWNvbnN0IGZpbGUgPSBldi50YXJnZXQuZmlsZXNbMF07CgkJCQlyZWFkZXIub25sb2FkID0gKGUpID0+IHsKCQkJCQlwcmV2aWV3LnNyYyA9IGUudGFyZ2V0LnJlc3VsdDsKCQkJCX07CgoJCQkJbGV0IG15RmlsZVVSTCA9ICcnOwoJCQkJLy8gQ2hlY2sgaWYgY3VycmVudCBkb2N1bWVudCBpcyBwZGYKCQkJCWlmIChldi50YXJnZXQuZmlsZXNbMF0udHlwZSA9PSAnYXBwbGljYXRpb24vcGRmJykgewoJCQkJCXRyeSB7CgkJCQkJCW15RmlsZVVSTCA9IGF3YWl0IHBkZlRvSW1hZ2UoZXYudGFyZ2V0LmZpbGVzWzBdKQoKCQkJCQl9IGNhdGNoIChlcnJvcikgewoJCQkJCQljb25zb2xlLmVycm9yKCdFcnJvciBjb252ZXJ0aW5nIFBERiB0byBpbWFnZTonLCBlcnJvcik7CgkJCQkJfQoJCQkJfSBlbHNlIHsKCQkJCQlteUZpbGVVUkwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGV2LnRhcmdldC5maWxlc1swXSk7CgkJCQl9CgkJCQlsZXQgc21Mb2FkZXIgPSBjcmVhdGVMb2FkZXIoKTsKCQkJCXByZXZpZXcuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCdhZnRlcmVuZCcsIHNtTG9hZGVyKTsKCQkJCWltYWdlVXBsb2FkaW5nLnB1c2gocGlja2VyLmlkKTsKCgoJCQkJY29tcHJlc3NJbWFnZShteUZpbGVVUkwsIGV2KQoJCQkJCS50aGVuKHJlc3AgPT4gewoKCQkJCQkJbGV0IGZpbGU7CgkJCQkJCWlmICgoZXYudGFyZ2V0LmZpbGVzWzBdLnNpemUgLyAxMDI0KSA8IDUwMCkgewoJCQkJCQkJZmlsZSA9IGV2LnRhcmdldC5maWxlc1swXTsKCQkJCQkJfQoJCQkJCQllbHNlIHsKCQkJCQkJCWxldCB0eXBlID0gZXYudGFyZ2V0LmZpbGVzWzBdLnR5cGUuc3BsaXQoJy8nKVsxXTsKCQkJCQkJCWZpbGUgPSBuZXcgRmlsZShbcmVzcF0sIGBuYW1lLiR7dHlwZX1gLCB7CgkJCQkJCQkJdHlwZTogcmVzcC50eXBlCgkJCQkJCQl9KTsKCQkJCQkJfQoKCQkJCQkJc3RvcmVJbWFnZUluREIoZmlsZSwgcGlja2VyLmlkLCAndXNlckltYWdlJykKCQkJCQkJCS50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpCgkJCQkJCQkudGhlbigocmVzKSA9PiB7CgkJCQkJCQkJU3RvcmVEb2N1bWVudE5hbWUocGlja2VyLmlkLCByZXNbJ2ZpbGVfbmFtZSddKTsKCQkJCQkJCQlzbUxvYWRlci5pbm5lckhUTUwgPSAnJzsKCQkJCQkJCQlpbWFnZVVwbG9hZGluZyA9IGltYWdlVXBsb2FkaW5nLmZpbHRlcih4ID0+IHggIT0gcGlja2VyLmlkKTsKCQkJCQkJCX0pLmNhdGNoKGVyciA9PiB7CgkJCQkJCQkJc21Mb2FkZXIuaW5uZXJIVE1MID0gJyc7CgkJCQkJCQkJaW1hZ2VVcGxvYWRpbmcgPSBpbWFnZVVwbG9hZGluZy5maWx0ZXIoeCA9PiB4ICE9IHBpY2tlci5pZCk7CgkJCQkJCQkJYWxlcnQoYENvdWxkbid0IHVwbG9hZCBpbWFnZWApOwoJCQkJCQkJfSkKCQkJCQl9KQoJCQkJCS5jYXRjaChlcnIgPT4gewoJCQkJCQlzbUxvYWRlci5pbm5lckhUTUwgPSAnJzsKCQkJCQkJaW1hZ2VVcGxvYWRpbmcgPSBpbWFnZVVwbG9hZGluZy5maWx0ZXIoeCA9PiB4ICE9IHBpY2tlci5pZCk7CgkJCQkJCWFsZXJ0KGBDb3VsZG4ndCB1cGxvYWQgaW1hZ2VgKTsKCQkJCQl9KQoKCgkJCQkvLyBjb21wcmVzc0ltYWdlKG15RmlsZVVSTCkudGhlbigocmVzKSA9PiB7CgkJCQkvLyAJc3RvcmVEb2N1ZW1lbnQocGlja2VyLmlkLCByZXMpOwoJCQkJLy8gfSk7CgoJCQkJcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZSk7CgoJCQl9KTsKCQl9KTsKCX0KCglsZXQgc2lnbmF0dXJlUGFkcyA9IHt9OwoJZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdjYW52YXNbZm9yPSJzaWduIl0nKS5mb3JFYWNoKChlKSA9PiB7CgkJc2lnbmF0dXJlUGFkc1tlLmlkXSA9IG5ldyBTaWduYXR1cmVQYWQoZSk7CgkJZS53aWR0aCA9IDIyMDsKCQllLmhlaWdodCA9IDgwOwoJfSk7CgoJZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdidXR0b25bZm9yPSJjbGVhci1zaWduIl0nKS5mb3JFYWNoKChlKSA9PiB7CgkJZS5vbmNsaWNrID0gKGV2KSA9PiB7CgkJCWV2LnByZXZlbnREZWZhdWx0KCk7CgkJCXNpZ25hdHVyZVBhZHNbZS5nZXRBdHRyaWJ1dGUoImNvbnRyb2wiKV0uY2xlYXIoKTsKCQl9OwoJfSk7CgoJcmV0dXJuIHNpZ25hdHVyZVBhZHM7Cn0KCgpmdW5jdGlvbiBzdG9yZUltYWdlSW5EQihpbWFnZSwgaWQsIGRvY1R5cGUgPSAnJykgewoKCWNvbnN0IHVybHMgPSBuZXcgVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmKTsKCWNvbnN0IHNlYXJjaFBhcmFtcyA9IHVybHMuc2VhcmNoUGFyYW1zOwoJY29uc3Qgb3Bwb3J0dW5pdHlJZCA9IHNlYXJjaFBhcmFtcy5nZXQoIm9wcG9ydHVuaXR5SWQiKSB8fCAnJzsKCWNvbnN0IGN1c3RvbWVySWQgPSBzZWFyY2hQYXJhbXMuZ2V0KCJjdXN0b21lcmlkIikgfHwgJyc7CgoJY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsKCWZvcm1EYXRhLmFwcGVuZCgnZG9jVHlwZScsIGRvY1R5cGUpOwoJZm9ybURhdGEuYXBwZW5kKCdhcHBsaWNhbnQnLCBgQSR7aWRbaWQubGVuZ3RoIC0gMV19YCk7Cglmb3JtRGF0YS5hcHBlbmQoJ29wcG9ydHVuaXR5SWQnLCBvcHBvcnR1bml0eUlkKTsKCWZvcm1EYXRhLmFwcGVuZCgnY3VzdG9tZXJJZCcsIGN1c3RvbWVySWQpOwoJLy8gZm9ybURhdGEuYXBwZW5kKCdpbWFnZUZpbGVEYXRhJywgaW1hZ2UpOwoJZm9ybURhdGEuYXBwZW5kKCd1cGQnLCBpbWFnZSk7CgoJcmV0dXJuIGZldGNoKGRvY1ZlcmlmaWNhdGlvbiwgewoJCW1ldGhvZDogJ1BPU1QnLAoJCWJvZHk6IGZvcm1EYXRhCgl9KTsKfQoKZnVuY3Rpb24gYWRkcmVzc0ZpZWxkKHNjaCkgewoJZm9yIChsZXQgaSA9IDA7IGkgPCBhZGRyZXNzLmxlbmd0aDsgaSsrKSB7CgkJaWYgKGFkZHJlc3NbaV0gPT0gc2NoKSB7CgkJCXJldHVybiB0cnVlOwoJCX0KCX0KCXJldHVybiBmYWxzZTsKfQoKZnVuY3Rpb24gYWFwcGxpY2F0bkZpZWxkKHNjaCkgewoJZm9yIChsZXQgaSA9IDA7IGkgPCBhcHBjdHR5cGUubGVuZ3RoOyBpKyspIHsKCQlpZiAoc2NoLmluY2x1ZGVzKGFwcGN0dHlwZVtpXSkpIHsKCQkJcmV0dXJuIGFwcGN0dHlwZVtpXTsKCQl9Cgl9CglyZXR1cm4gZmFsc2U7Cn0KCmZ1bmN0aW9uIGZpbmFsVHlwZSh0eXBlKSB7Cgljb25zdCB0c3QgPSB0eXBlLnRvTG93ZXJDYXNlKCk7CglpZiAodHN0LmluY2x1ZGVzKCJwYW5jYXJkIikpIHsKCQlyZXR1cm4gInBhbmNhcmQiOwoJfSBlbHNlIGlmICh0c3QuaW5jbHVkZXMoImFhZGhhYXJmcm9udCIpKSB7CgkJcmV0dXJuICJhYWRoYXJmcm9udCI7Cgl9IGVsc2UgaWYgKHRzdC5pbmNsdWRlcygiYWFkaGFhcmJhY2siKSkgewoJCXJldHVybiAiYWFkaGFyYmFjayI7Cgl9IGVsc2UgaWYgKHRzdC5pbmNsdWRlcygicGFzc3BvcnQiKSkgewoJCXJldHVybiAicGFzc3BvcnQiOwoJfSBlbHNlIGlmICh0c3QuaW5jbHVkZXMoImFhZGhhcnN0cmlwIikpIHsKCQlyZXR1cm4gImFhZGhhcnN0cmlwIjsKCX0gZWxzZSB7CgkJcmV0dXJuICJvdGhlciI7Cgl9Cn0KZnVuY3Rpb24gc3RyaW5nVG9EYXRlKF9kYXRlLCBfZm9ybWF0LCBfZGVsaW1pdGVyKSB7Cgl2YXIgZm9ybWF0TG93ZXJDYXNlID0gX2Zvcm1hdC50b0xvd2VyQ2FzZSgpOwoJdmFyIGZvcm1hdEl0ZW1zID0gZm9ybWF0TG93ZXJDYXNlLnNwbGl0KF9kZWxpbWl0ZXIpOwoJdmFyIGRhdGVJdGVtcyA9IF9kYXRlLnNwbGl0KF9kZWxpbWl0ZXIpOwoJdmFyIG1vbnRoSW5kZXggPSBmb3JtYXRJdGVtcy5pbmRleE9mKCJtbSIpOwoJdmFyIGRheUluZGV4ID0gZm9ybWF0SXRlbXMuaW5kZXhPZigiZGQiKTsKCXZhciB5ZWFySW5kZXggPSBmb3JtYXRJdGVtcy5pbmRleE9mKCJ5eXl5Iik7Cgl2YXIgbW9udGggPSBwYXJzZUludChkYXRlSXRlbXNbbW9udGhJbmRleF0pOwoJbW9udGggLT0gMTsKCXZhciBmb3JtYXRlZERhdGUgPSBuZXcgRGF0ZShkYXRlSXRlbXNbeWVhckluZGV4XSwgbW9udGgsIGRhdGVJdGVtc1tkYXlJbmRleF0pOwoJcmV0dXJuIGZvcm1hdGVkRGF0ZTsKfQpmdW5jdGlvbiBmb3JtYXREYXRlRG9iKGRhdGVTdHJpbmcpIHsKCWNvbnN0IHJlc3VsdDEgPSBzdHJpbmdUb0RhdGUoZGF0ZVN0cmluZywgImRkL01NL3l5eXkiLCAiLyIpOwoJdmFyIGQgPSByZXN1bHQxLAoJCW1vbnRoID0gJycgKyAoZC5nZXRNb250aCgpICsgMSksCgkJZGF5ID0gJycgKyBkLmdldERhdGUoKSwKCQl5ZWFyID0gZC5nZXRGdWxsWWVhcigpOwoKCWlmIChtb250aC5sZW5ndGggPCAyKQoJCW1vbnRoID0gJzAnICsgbW9udGg7CglpZiAoZGF5Lmxlbmd0aCA8IDIpCgkJZGF5ID0gJzAnICsgZGF5OwoJcmV0dXJuIFt5ZWFyLCBtb250aCwgZGF5XS5qb2luKCctJyk7Cn0KZnVuY3Rpb24gdmVyaWZ5RG9jKHR5cGUsIGRhdGEsIG15dmFsdWUpIHsKCWNvbnN0IG15cHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKCQlmdW5jdGlvbiBpbm5lclZhbGlkYXRpb24oKSB7CgkJCWNvbnN0IGZpbmFsVHAgPSBmYWxzZSB8fCBmaW5hbFR5cGUodHlwZSk7CgkJCWlmIChmaW5hbFRwID09PSAiYWFkaGFyZnJvbnQiKSB7CgkJCQljb25zdCBhcGlVcmwgPSBkb2NWZXJpZmljYXRpb24gKyAiL2FhZGhhci1mcm9udCI7CgkJCQlmZXRjaChhcGlVcmwsIHsKCQkJCQltZXRob2Q6ICJwb3N0IiwKCQkJCQlib2R5OiBkYXRhLAoJCQkJfSkKCQkJCQkudGhlbigocmVzKSA9PiByZXMuanNvbigpKQoJCQkJCS50aGVuKCh2YWx1ZSkgPT4gewoJCQkJCQl2YXIgZGV0YWlscyA9IHsKCQkJCQkJCXZlcmlmaWVkOiB0cnVlLAoJCQkJCQkJbWVzc2FnZXM6IFtdLAoJCQkJCQkJdmFsdWU6IG51bGwsCgkJCQkJCX07CgoJCQkJCQlzZWFyY2hVcGxvYWQodmFsdWUucmVzdWx0KQoJCQkJCQkJLnRoZW4oKHVwcmVzKSA9PiB7CgkJCQkJCQkJaWYgKHVwcmVzKSB7CgkJCQkJCQkJCXNldFRpbWVvdXQoKCkgPT4gewoJCQkJCQkJCQkJdmFyIGZhaWxlZFZhciA9IFtdOwoJCQkJCQkJCQkJdmFyIGlzTnVtYmVyRXJyID0gZmFsc2U7CgkJCQkJCQkJCQl2YXIgaXNOYW1lRXJyID0gZmFsc2U7CgkJCQkJCQkJCQlsZXQgaW1nTnVtID0gdmFsdWUubnVtYmVyOwoKCQkJCQkJCQkJCWxldCBmb3JtYXRBYWRoYXIgPSBteXZhbHVlLmFkZGhhcl9udW1iZXIKCQkJCQkJCQkJCQkubWF0Y2goLy57MSw0fS9nKQoJCQkJCQkJCQkJCS5qb2luKCIgIik7CgoJCQkJCQkJCQkJY29uc3QgdmVyaWZ5T25lID0gbmV3IFByb21pc2UoKHJlc28sIHJlamUpID0+IHsKCQkJCQkJCQkJCQlsZXQgcmVnZXggPSBuZXcgUmVnRXhwKAoJCQkJCQkJCQkJCQkvXlsyLTldezF9WzAtOV17M31cc1swLTldezR9XHNbMC05XXs0fSQvCgkJCQkJCQkJCQkJKTsKCQkJCQkJCQkJCQlpZiAocmVnZXgudGVzdChpbWdOdW0pKSB7CgkJCQkJCQkJCQkJCXZlcmlmeU15VmFsdWVzKGZvcm1hdEFhZGhhcikKCQkJCQkJCQkJCQkJCS50aGVuKChyZXNwKSA9PiB7CgkJCQkJCQkJCQkJCQkJaWYgKCFyZXNwKSB7CgkJCQkJCQkJCQkJCQkJCWZhaWxlZFZhci5wdXNoKCJBYWRoYXIgTnVtYmVyIik7CgkJCQkJCQkJCQkJCQkJCWlzTnVtYmVyRXJyID0gdHJ1ZTsKCQkJCQkJCQkJCQkJCQl9CgkJCQkJCQkJCQkJCQkJcmVzbyh0cnVlKTsKCQkJCQkJCQkJCQkJCX0pCgkJCQkJCQkJCQkJCQkuY2F0Y2goKCkgPT4gewoJCQkJCQkJCQkJCQkJCWZhaWxlZFZhci5wdXNoKCJBYWRoYXIgTnVtYmVyIik7CgkJCQkJCQkJCQkJCQkJaXNOdW1iZXJFcnIgPSB0cnVlOwoJCQkJCQkJCQkJCQkJCXJlc28odHJ1ZSk7CgkJCQkJCQkJCQkJCQl9KTsKCQkJCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQkJCQlmYWlsZWRWYXIucHVzaCgiQWFkaGFyIE51bWJlciIpOwoJCQkJCQkJCQkJCQlpc051bWJlckVyciA9IHRydWU7CgkJCQkJCQkJCQkJCXJlc28odHJ1ZSk7CgkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJfSk7CgoJCQkJCQkJCQkJY29uc3QgdmVyaWZ5VHdvID0gbmV3IFByb21pc2UoKHJlc28sIHJlamUpID0+IHsKCQkJCQkJCQkJCQlpZiAodmFsdWUubmFtZSkgewoJCQkJCQkJCQkJCQl2ZXJpZnlNeVZhbHVlcyhnZW5lcmF0ZU15VmFsdWUobXl2YWx1ZS5uYW1lKSkKCQkJCQkJCQkJCQkJCS50aGVuKChyZXNwKSA9PiB7CgkJCQkJCQkJCQkJCQkJaWYgKCFyZXNwKSB7CgkJCQkJCQkJCQkJCQkJCWZhaWxlZFZhci5wdXNoKCJBYWRoYXIgTmFtZSIpOwoJCQkJCQkJCQkJCQkJCQlpc05hbWVFcnIgPSB0cnVlOwoJCQkJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCQkJCQlyZXNvKHRydWUpOwoJCQkJCQkJCQkJCQkJfSkKCQkJCQkJCQkJCQkJCS5jYXRjaCgoKSA9PiB7CgkJCQkJCQkJCQkJCQkJZmFpbGVkVmFyLnB1c2goIkFhZGhhciBOYW1lIik7CgkJCQkJCQkJCQkJCQkJaXNOYW1lRXJyID0gdHJ1ZTsKCQkJCQkJCQkJCQkJCQlyZXNvKHRydWUpOwoJCQkJCQkJCQkJCQkJfSk7CgkJCQkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJCQkJZmFpbGVkVmFyLnB1c2goIkFhZGhhciBOYW1lIik7CgkJCQkJCQkJCQkJCWlzTmFtZUVyciA9IHRydWU7CgkJCQkJCQkJCQkJCXJlc28odHJ1ZSk7CgkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJfSk7CgoJCQkJCQkJCQkJUHJvbWlzZS5hbGwoW3ZlcmlmeU9uZSwgdmVyaWZ5VHdvXSkudGhlbigocHJhcmVzKSA9PiB7CgkJCQkJCQkJCQkJaWYgKGlzTnVtYmVyRXJyIHx8IGlzTmFtZUVycikgewoJCQkJCQkJCQkJCQlkZXRhaWxzLm1lc3NhZ2VzLnB1c2goCgkJCQkJCQkJCQkJCQlgJHtmYWlsZWRWYXIuam9pbigKCQkJCQkJCQkJCQkJCQkiIGFuZCAiCgkJCQkJCQkJCQkJCQkpfSBpbiB0aGUgVXBsb2FkZWQgZG9jdW1lbnQgZG9zZSBub3QgbWF0Y2ggd2l0aCB0aGUgZW50ZXJlZCBkZXRhaWxzLiR7aXNOdW1iZXJFcnIKCQkJCQkJCQkJCQkJCQk/IGA8YnI+VXBsb2FkZWQgQWFkaGFyIE51bWJlcjogJHtpbWdOdW19YAoJCQkJCQkJCQkJCQkJCTogIiIKCQkJCQkJCQkJCQkJCX0ke2lzTmFtZUVycgoJCQkJCQkJCQkJCQkJCT8gYDxicj5VcGxvYWRlZCBBYWRoYXIgTmFtZTogJHt2YWx1ZS5uYW1lfWAKCQkJCQkJCQkJCQkJCQk6ICIiCgkJCQkJCQkJCQkJCQl9JHtpc051bWJlckVycgoJCQkJCQkJCQkJCQkJCT8gYDxicj5FbnRlcmVkIEFhZGhhciBOdW1iZXIgaW4gdGhlIGZvcm06ICR7Zm9ybWF0QWFkaGFyfWAKCQkJCQkJCQkJCQkJCQk6ICIiCgkJCQkJCQkJCQkJCQl9JHtpc05hbWVFcnIKCQkJCQkJCQkJCQkJCQk/IGA8YnI+RW50ZXJlZCBBYWRoYXIgTmFtZSBpbiB0aGUgZm9ybTogJHtnZW5lcmF0ZU15VmFsdWUoCgkJCQkJCQkJCQkJCQkJCW15dmFsdWUubmFtZQoJCQkJCQkJCQkJCQkJCSl9YAoJCQkJCQkJCQkJCQkJCTogIiIKCQkJCQkJCQkJCQkJCX08YnI+YAoJCQkJCQkJCQkJCQkpOwoJCQkJCQkJCQkJCQlkZXRhaWxzLnZlcmlmaWVkID0gZmFsc2U7CgkJCQkJCQkJCQkJCWRldGFpbHMudmFsdWUgPSB2YWx1ZTsKCQkJCQkJCQkJCQl9CgkJCQkJCQkJCQkJcmVzb2x2ZShkZXRhaWxzKTsKCQkJCQkJCQkJCX0pOwoJCQkJCQkJCQl9LCAxNTAwKTsKCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQlyZXNvbHZlKGZhbHNlKTsKCQkJCQkJCQl9CgkJCQkJCQl9KQoJCQkJCQkJLmNhdGNoKCgpID0+IHsKCQkJCQkJCQlyZXNvbHZlKGZhbHNlKTsKCQkJCQkJCX0pOwoJCQkJCX0pCgkJCQkJLmNhdGNoKCgpID0+IHsKCQkJCQkJcmVzb2x2ZShmYWxzZSk7CgkJCQkJfSk7CgkJCX0gZWxzZSBpZiAoZmluYWxUcCA9PT0gImFhZGhhcmJhY2siKSB7CgkJCQljb25zdCBhcGlVcmwgPSBkb2NWZXJpZmljYXRpb24gKyAiL2FhZGhhci1iYWNrIjsKCQkJCWZldGNoKGFwaVVybCwgewoJCQkJCW1ldGhvZDogInBvc3QiLAoJCQkJCWJvZHk6IGRhdGEsCgkJCQl9KQoJCQkJCS50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpCgkJCQkJLnRoZW4oKHZhbHVlKSA9PiB7CgkJCQkJCXZhciBkZXRhaWxzID0gewoJCQkJCQkJdmVyaWZpZWQ6IHRydWUsCgkJCQkJCQltZXNzYWdlczogW10sCgkJCQkJCQl2YWx1ZTogbnVsbCwKCQkJCQkJfTsKCgkJCQkJCXZhciBhZGRyZXNzVmFsdWUgPSB2YWx1ZS5yZXN1bHQ7CgkJCQkJCWlmIChhZGRyZXNzVmFsdWUpIHsKCQkJCQkJCWFkZHJlc3NWYWx1ZSA9IGFkZHJlc3NWYWx1ZVswXQoJCQkJCQkJCT8gW2FkZHJlc3NWYWx1ZVswXS5uYW1lXQoJCQkJCQkJCTogYWRkcmVzc1ZhbHVlOwoJCQkJCQl9CgoJCQkJCQlzZWFyY2hVcGxvYWQoYWRkcmVzc1ZhbHVlKQoJCQkJCQkJLnRoZW4oKHVwcmVzKSA9PiB7CgkJCQkJCQkJaWYgKHVwcmVzKSB7CgkJCQkJCQkJCXNldFRpbWVvdXQoKCkgPT4gewoJCQkJCQkJCQkJY29uc3QgcHJvbWlzZUxwID0gW107CgkJCQkJCQkJCQljb25zdCBhZGRLZXkgPSBPYmplY3Qua2V5cyhteXZhbHVlLmFkZHJlc3MpOwoJCQkJCQkJCQkJZm9yIChsZXQgaSA9IDA7IGkgPCBhZGRLZXkubGVuZ3RoOyBpKyspIHsKCQkJCQkJCQkJCQlsZXQgdmVyaWZ5QWRkciA9IG5ldyBQcm9taXNlKChyZXNvLCByZWplKSA9PiB7CgkJCQkJCQkJCQkJCWlmICh2YWx1ZS5hZGRyZXNzKSB7CgkJCQkJCQkJCQkJCQl2ZXJpZnlNeVZhbHVlcyhteXZhbHVlLmFkZHJlc3NbYWRkS2V5W2ldXSkKCQkJCQkJCQkJCQkJCQkudGhlbigocmVzcCkgPT4gewoJCQkJCQkJCQkJCQkJCQlpZiAoIXJlc3ApIHsKCQkJCQkJCQkJCQkJCQkJCXJlc28oZmFsc2UpOwoJCQkJCQkJCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQkJCQkJCQkJcmVzbyh0cnVlKTsKCQkJCQkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJCQkJCX0pCgkJCQkJCQkJCQkJCQkJLmNhdGNoKCgpID0+IHJlc28oZmFsc2UpKTsKCQkJCQkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJCQkJCXJlc28oZmFsc2UpOwoJCQkJCQkJCQkJCQl9CgkJCQkJCQkJCQkJfSk7CgkJCQkJCQkJCQkJcHJvbWlzZUxwLnB1c2godmVyaWZ5QWRkcik7CgkJCQkJCQkJCQl9CgoJCQkJCQkJCQkJUHJvbWlzZS5hbGwocHJvbWlzZUxwKS50aGVuKChyZXMpID0+IHsKCQkJCQkJCQkJCQlpZiAocmVzLmpvaW4oIiIpLmluY2x1ZGVzKCJmYWxzZSIpKSB7CgkJCQkJCQkJCQkJCWRldGFpbHMubWVzc2FnZXMucHVzaCgKCQkJCQkJCQkJCQkJCWBBYWRoYXIgYWRkcmVzcyBpbiB0aGUgVXBsb2FkZWQgZG9jdW1lbnQgZG9zZSBub3QgbWF0Y2ggd2l0aCB0aGUgZW50ZXJlZCBkZXRhaWxzLiA8YnI+IFVwbG9hZGVkIEFhZGhhciBhZGRyZXNzOiAke3ZhbHVlLmFkZHJlc3MKCQkJCQkJCQkJCQkJCX0gIDxicj4gRW50ZXJlZCBBYWRoYXIgYWRkcmVzcyBpbiB0aGUgZm9ybTogJHtnZW5lcmF0ZU15VmFsdWUoCgkJCQkJCQkJCQkJCQkJbXl2YWx1ZS5hZGRyZXNzCgkJCQkJCQkJCQkJCQkpfSA8YnI+YAoJCQkJCQkJCQkJCQkpOwoJCQkJCQkJCQkJCQlkZXRhaWxzLnZlcmlmaWVkID0gZmFsc2U7CgkJCQkJCQkJCQkJCWRldGFpbHMudmFsdWUgPSB2YWx1ZTsKCQkJCQkJCQkJCQl9CgkJCQkJCQkJCQkJcmVzb2x2ZShkZXRhaWxzKTsKCQkJCQkJCQkJCX0pOwoJCQkJCQkJCQl9LCAxNTAwKTsKCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQlyZWplY3QoZmFsc2UpOwoJCQkJCQkJCX0KCQkJCQkJCX0pCgkJCQkJCQkuY2F0Y2goKCkgPT4gewoJCQkJCQkJCXJlamVjdChmYWxzZSk7CgkJCQkJCQl9KTsKCQkJCQl9KQoJCQkJCS5jYXRjaCgoZXJyKSA9PiB7CgkJCQkJCXJlc29sdmUoZmFsc2UpOwoJCQkJCX0pOwoJCQl9IGVsc2UgaWYgKGZpbmFsVHAgPT09ICJwYW5jYXJkIikgewoJCQkJY29uc3QgYXBpVXJsID0gZG9jVmVyaWZpY2F0aW9uICsgIi9wYW4iOwoJCQkJZmV0Y2goYXBpVXJsLCB7CgkJCQkJbWV0aG9kOiAicG9zdCIsCgkJCQkJYm9keTogZGF0YSwKCQkJCX0pCgkJCQkJLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSkKCQkJCQkudGhlbigodmFsdWUpID0+IHsKCQkJCQkJdmFyIGRldGFpbHMgPSB7CgkJCQkJCQl2ZXJpZmllZDogdHJ1ZSwKCQkJCQkJCW1lc3NhZ2VzOiBbXSwKCQkJCQkJCXZhbHVlOiBudWxsLAoJCQkJCQl9OwoKCgoKCQkJCQkJc2VhcmNoVXBsb2FkKHZhbHVlLnJlc3VsdCkKCQkJCQkJCS50aGVuKCh1cHJlcykgPT4gewoJCQkJCQkJCWlmICh1cHJlcykgewoJCQkJCQkJCQlzZXRUaW1lb3V0KCgpID0+IHsKCQkJCQkJCQkJCWNvbnN0IGZhaWxlZFZhciA9IFtdOwoJCQkJCQkJCQkJdmFyIGlzTnVtYmVyRXJyID0gZmFsc2U7CgkJCQkJCQkJCQl2YXIgaXNOYW1lRXJyID0gZmFsc2U7CgkJCQkJCQkJCQlsZXQgaW1nTnVtID0gdmFsdWUubnVtYmVyCgkJCQkJCQkJCQkJPyB2YWx1ZS5udW1iZXIucmVwbGFjZUFsbCgiICIsICIiKQoJCQkJCQkJCQkJCTogIiI7CgoJCQkJCQkJCQkJY29uc3QgdmVyaWZ5T25lID0gbmV3IFByb21pc2UoKHJlc28sIHJlamUpID0+IHsKCQkJCQkJCQkJCQlsZXQgcmVnZXggPSBuZXcgUmVnRXhwKC9eW0EtWl17NX1bMC05XXs0fVtBLVpdezF9JC8pOwoJCQkJCQkJCQkJCWlmIChyZWdleC50ZXN0KGltZ051bSkpIHsKCQkJCQkJCQkJCQkJdmVyaWZ5TXlWYWx1ZXMobXl2YWx1ZS5wYW5fbnVtYmVyKQoJCQkJCQkJCQkJCQkJLnRoZW4oKHJlc3ApID0+IHsKCQkJCQkJCQkJCQkJCQlpZiAoIXJlc3ApIHsKCQkJCQkJCQkJCQkJCQkJZmFpbGVkVmFyLnB1c2goIlBBTiBOdW1iZXIiKTsKCQkJCQkJCQkJCQkJCQkJaXNOdW1iZXJFcnIgPSB0cnVlOwoJCQkJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCQkJCQlyZXNvKHRydWUpOwoJCQkJCQkJCQkJCQkJfSkKCQkJCQkJCQkJCQkJCS5jYXRjaCgoKSA9PiB7CgkJCQkJCQkJCQkJCQkJZmFpbGVkVmFyLnB1c2goIlBBTiBOdW1iZXIiKTsKCQkJCQkJCQkJCQkJCQlpc051bWJlckVyciA9IHRydWU7CgkJCQkJCQkJCQkJCQkJcmVzbyh0cnVlKTsKCQkJCQkJCQkJCQkJCX0pOwoJCQkJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCQkJCWZhaWxlZFZhci5wdXNoKCJQQU4gTnVtYmVyIik7CgkJCQkJCQkJCQkJCWlzTnVtYmVyRXJyID0gdHJ1ZTsKCQkJCQkJCQkJCQkJcmVzbyh0cnVlKTsKCQkJCQkJCQkJCQl9CgkJCQkJCQkJCQl9KTsKCgkJCQkJCQkJCQljb25zdCB2ZXJpZnlUd28gPSBuZXcgUHJvbWlzZSgocmVzbywgcmVqZSkgPT4gewoJCQkJCQkJCQkJCWlmICh2YWx1ZS5uYW1lKSB7CgkJCQkJCQkJCQkJCXZlcmlmeU15VmFsdWVzKGdlbmVyYXRlTXlWYWx1ZShteXZhbHVlLm5hbWUpKQoJCQkJCQkJCQkJCQkJLnRoZW4oKHJlc3ApID0+IHsKCQkJCQkJCQkJCQkJCQlpZiAoIXJlc3ApIHsKCQkJCQkJCQkJCQkJCQkJZmFpbGVkVmFyLnB1c2goIlBBTiBOYW1lIik7CgkJCQkJCQkJCQkJCQkJCWlzTmFtZUVyciA9IHRydWU7CgkJCQkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJCQkJCXJlc28odHJ1ZSk7CgkJCQkJCQkJCQkJCQl9KQoJCQkJCQkJCQkJCQkJLmNhdGNoKCgpID0+IHsKCQkJCQkJCQkJCQkJCQlmYWlsZWRWYXIucHVzaCgiUEFOIE5hbWUiKTsKCQkJCQkJCQkJCQkJCQlpc05hbWVFcnIgPSB0cnVlOwoJCQkJCQkJCQkJCQkJCXJlc28odHJ1ZSk7CgkJCQkJCQkJCQkJCQl9KTsKCQkJCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQkJCQlmYWlsZWRWYXIucHVzaCgiUEFOIE5hbWUiKTsKCQkJCQkJCQkJCQkJaXNOYW1lRXJyID0gdHJ1ZTsKCQkJCQkJCQkJCQkJcmVzbyh0cnVlKTsKCQkJCQkJCQkJCQl9CgkJCQkJCQkJCQl9KTsKCgkJCQkJCQkJCQlQcm9taXNlLmFsbChbdmVyaWZ5T25lLCB2ZXJpZnlUd29dKS50aGVuKChwcmFyZXMpID0+IHsKCQkJCQkJCQkJCQlpZiAoaXNOYW1lRXJyIHx8IGlzTnVtYmVyRXJyKSB7CgkJCQkJCQkJCQkJCWRldGFpbHMubWVzc2FnZXMucHVzaCgKCQkJCQkJCQkJCQkJCWAke2ZhaWxlZFZhci5qb2luKAoJCQkJCQkJCQkJCQkJCSIgYW5kICIKCQkJCQkJCQkJCQkJCSl9IGluIHRoZSBVcGxvYWRlZCBkb2N1bWVudCBkb3NlIG5vdCBtYXRjaCB3aXRoIHRoZSBlbnRlcmVkIGRldGFpbHMuJHtpc051bWJlckVycgoJCQkJCQkJCQkJCQkJCT8gYDxicj5VcGxvYWRlZCBQQU4gTnVtYmVyOiAke2ltZ051bX1gCgkJCQkJCQkJCQkJCQkJOiAiIgoJCQkJCQkJCQkJCQkJfSR7aXNOYW1lRXJyCgkJCQkJCQkJCQkJCQkJPyBgPGJyPlVwbG9hZGVkIFBBTiBOYW1lOiAke3ZhbHVlLm5hbWV9YAoJCQkJCQkJCQkJCQkJCTogIiIKCQkJCQkJCQkJCQkJCX0ke2lzTnVtYmVyRXJyCgkJCQkJCQkJCQkJCQkJPyBgPGJyPkVudGVyZWQgUEFOIE51bWJlciBpbiB0aGUgZm9ybTogJHtteXZhbHVlLnBhbl9udW1iZXJ9YAoJCQkJCQkJCQkJCQkJCTogIiIKCQkJCQkJCQkJCQkJCX0ke2lzTmFtZUVycgoJCQkJCQkJCQkJCQkJCT8gYDxicj5FbnRlcmVkIFBBTiBOYW1lIGluIHRoZSBmb3JtOiAke2dlbmVyYXRlTXlWYWx1ZSgKCQkJCQkJCQkJCQkJCQkJbXl2YWx1ZS5uYW1lCgkJCQkJCQkJCQkJCQkJKX1gCgkJCQkJCQkJCQkJCQkJOiAiIgoJCQkJCQkJCQkJCQkJfTxicj5gCgkJCQkJCQkJCQkJCSk7CgkJCQkJCQkJCQkJCWRldGFpbHMudmVyaWZpZWQgPSBmYWxzZTsKCQkJCQkJCQkJCQkJZGV0YWlscy52YWx1ZSA9IHZhbHVlOwoJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCQlyZXNvbHZlKGRldGFpbHMpOwoJCQkJCQkJCQkJfSk7CgkJCQkJCQkJCX0sIDE1MDApOwoJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCXJlamVjdChmYWxzZSk7CgkJCQkJCQkJfQoJCQkJCQkJfSkKCQkJCQkJCS5jYXRjaCgoZXJyb3IpID0+IHsKCQkJCQkJCQljb25zb2xlLmxvZyhlcnJvcikKCQkJCQkJCQlyZWplY3QoZmFsc2UpOwoJCQkJCQkJfSk7CgkJCQkJfSkKCQkJCQkuY2F0Y2goKGVycm9yKSA9PiB7CgkJCQkJCWNvbnNvbGUubG9nKGVycm9yKQoJCQkJCQlyZWplY3QoZmFsc2UpOwoJCQkJCX0pOwoJCQl9IGVsc2UgaWYgKGZpbmFsVHAgPT09ICJwYXNzcG9ydCIpIHsKCQkJCWNvbnN0IGFwaVVybCA9IGRvY1ZlcmlmaWNhdGlvbiArICIvcGFzc3BvcnQiOwoJCQkJZmV0Y2goYXBpVXJsLCB7CgkJCQkJbWV0aG9kOiAicG9zdCIsCgkJCQkJYm9keTogZGF0YSwKCQkJCX0pCgkJCQkJLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSkKCQkJCQkudGhlbigodmFsdWUpID0+IHsKCQkJCQkJdmFyIGRldGFpbHMgPSB7CgkJCQkJCQl2ZXJpZmllZDogdHJ1ZSwKCQkJCQkJCW1lc3NhZ2VzOiBbXSwKCQkJCQkJCXZhbHVlOiBudWxsLAoJCQkJCQl9OwoKCQkJCQkJc2VhcmNoVXBsb2FkKHZhbHVlLnJlc3VsdCkKCQkJCQkJCS50aGVuKCh1cHJlcykgPT4gewoJCQkJCQkJCWlmICh1cHJlcykgewoJCQkJCQkJCQlzZXRUaW1lb3V0KCgpID0+IHsKCQkJCQkJCQkJCXZhciBpc05hbWVFcnIgPSBmYWxzZTsKCgkJCQkJCQkJCQljb25zdCB2ZXJpZnlUd28gPSBuZXcgUHJvbWlzZSgocmVzbywgcmVqZSkgPT4gewoJCQkJCQkJCQkJCWlmICh2YWx1ZS5uYW1lKSB7CgkJCQkJCQkJCQkJCXZlcmlmeU15VmFsdWVzKGdlbmVyYXRlTXlWYWx1ZShteXZhbHVlLm5hbWUpKQoJCQkJCQkJCQkJCQkJLnRoZW4oKHJlc3ApID0+IHsKCQkJCQkJCQkJCQkJCQlpZiAoIXJlc3ApIHsKCQkJCQkJCQkJCQkJCQkJaXNOYW1lRXJyID0gdHJ1ZTsKCQkJCQkJCQkJCQkJCQl9CgkJCQkJCQkJCQkJCQkJcmVzbyh0cnVlKTsKCQkJCQkJCQkJCQkJCX0pCgkJCQkJCQkJCQkJCQkuY2F0Y2goKCkgPT4gewoJCQkJCQkJCQkJCQkJCWlzTmFtZUVyciA9IHRydWU7CgkJCQkJCQkJCQkJCQkJcmVzbyh0cnVlKTsKCQkJCQkJCQkJCQkJCX0pOwoJCQkJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCQkJCWlzTmFtZUVyciA9IHRydWU7CgkJCQkJCQkJCQkJCXJlc28odHJ1ZSk7CgkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJfSk7CgoJCQkJCQkJCQkJUHJvbWlzZS5hbGwoW3ZlcmlmeVR3b10pLnRoZW4oKHByYXJlcykgPT4gewoJCQkJCQkJCQkJCWlmIChpc05hbWVFcnIpIHsKCQkJCQkJCQkJCQkJZGV0YWlscy5tZXNzYWdlcy5wdXNoKAoJCQkJCQkJCQkJCQkJYFBhc3Nwb3J0IE5hbWUgaW4gdGhlIFVwbG9hZGVkIGRvY3VtZW50IGRvc2Ugbm90IG1hdGNoIHdpdGggdGhlIGVudGVyZWQgZGV0YWlscy4ke2lzTmFtZUVycgoJCQkJCQkJCQkJCQkJCT8gYDxicj5VcGxvYWRlZCBQYXNzcG9ydCBOYW1lOiAke3ZhbHVlLm5hbWV9YAoJCQkJCQkJCQkJCQkJCTogIiIKCQkJCQkJCQkJCQkJCX0ke2lzTmFtZUVycgoJCQkJCQkJCQkJCQkJCT8gYDxicj5FbnRlcmVkIFBhc3Nwb3J0IE5hbWUgaW4gdGhlIGZvcm06ICR7Z2VuZXJhdGVNeVZhbHVlKAoJCQkJCQkJCQkJCQkJCQlteXZhbHVlLm5hbWUKCQkJCQkJCQkJCQkJCQkpfWAKCQkJCQkJCQkJCQkJCQk6ICIiCgkJCQkJCQkJCQkJCQl9PGJyPmAKCQkJCQkJCQkJCQkJKTsKCQkJCQkJCQkJCQkJZGV0YWlscy52ZXJpZmllZCA9IGZhbHNlOwoJCQkJCQkJCQkJCQlkZXRhaWxzLnZhbHVlID0gdmFsdWU7CgkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJCXJlc29sdmUoZGV0YWlscyk7CgkJCQkJCQkJCQl9KTsKCQkJCQkJCQkJfSwgMTUwMCk7CgkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJcmVzb2x2ZShmYWxzZSk7CgkJCQkJCQkJfQoJCQkJCQkJfSkKCQkJCQkJCS5jYXRjaCgoKSA9PiB7CgkJCQkJCQkJcmVzb2x2ZShmYWxzZSk7CgkJCQkJCQl9KTsKCQkJCQl9KQoJCQkJCS5jYXRjaCgoKSA9PiB7CgkJCQkJCXJlamVjdChmYWxzZSk7CgkJCQkJfSk7CgkJCX0gZWxzZSBpZiAoZmluYWxUcCA9PT0gIm90aGVyIikgewoJCQkJcmVzb2x2ZSh7CgkJCQkJdmVyaWZpZWQ6IHRydWUsCgkJCQkJbWVzc2FnZXM6IFtdLAoJCQkJCXZhbHVlOiBudWxsLAoJCQkJfSk7CgkJCX0KCQl9CgoJCWlubmVyVmFsaWRhdGlvbigpOwoJfSk7CglyZXR1cm4gbXlwcm9taXNlOwp9CmZ1bmN0aW9uIHZlcmlmeURvY05ldyh0eXBlLCBkYXRhLCBteXZhbHVlKSB7CgoJbGV0IGN1cnJlbnRBcHBsaWNhbnQgPSBzY2hlbWFbJ2FwcGxpY2FudC1kZXRhaWxzJ11bJ3N1Yi1zZWN0aW9ucyddOwoJY29uc3QgdXJscyA9IG5ldyBVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpOwoJY29uc3Qgc2VhcmNoUGFyYW1zID0gdXJscy5zZWFyY2hQYXJhbXM7CgoJY29uc3Qgb3Bwb3J0dW5pdHlJZCA9IHNlYXJjaFBhcmFtcy5nZXQoIm9wcG9ydHVuaXR5SWQiKSB8fCAnJzsKCWNvbnN0IGN1c3RvbWVySWQgPSBzZWFyY2hQYXJhbXMuZ2V0KCJjdXN0b21lcmlkIikgfHwgJyc7CglkYXRhLmFwcGVuZCgnYXBwbGljYW50JywgbXl2YWx1ZSk7CglkYXRhLmFwcGVuZCgnZG9jVHlwZScsIGZpbmFsVHlwZSh0eXBlKSB8fCAnJyk7CglkYXRhLmFwcGVuZCgnb3Bwb3J0dW5pdHlJZCcsIG9wcG9ydHVuaXR5SWQpOwoJZGF0YS5hcHBlbmQoJ2N1c3RvbWVySWQnLCBjdXN0b21lcklkKTsKCgoJY29uc3QgbXlwcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewoJCWZ1bmN0aW9uIGlubmVyVmFsaWRhdGlvbigpIHsKCQkJY29uc3QgZmluYWxUcCA9IGZhbHNlIHx8IGZpbmFsVHlwZSh0eXBlKTsKCgkJCXNldFRpbWVvdXQoKCkgPT4gewoJCQkJcmVqZWN0KGZhbHNlKTsKCQkJCS8vIGFsZXJ0KCJJdCBpcyB0YWtpbmcgdG9vIGxvbmcuIFBsZWFzZSBwcm9jZWVkIE1hbnVhbGx5LiIpOwoJCQl9LCAzMDAwMCk7CgoJCQlpZiAoZmluYWxUcCA9PT0gImFhZGhhcmZyb250IikgewoJCQkJLy8gY29uc3QgYXBpVXJsID0gZG9jVmVyaWZpY2F0aW9uICsgIi9hYWRoYXItZnJvbnQiOwoJCQkJY29uc3QgYXBpVXJsID0gZG9jVmVyaWZpY2F0aW9uOwoJCQkJbGV0IHJlc3A7CgkJCQlmZXRjaChhcGlVcmwsIHsKCQkJCQltZXRob2Q6ICJwb3N0IiwKCQkJCQlib2R5OiBkYXRhLAoJCQkJfSkKCQkJCQkudGhlbigocmVzKSA9PiByZXMuanNvbigpKQoJCQkJCS50aGVuKCh2YWx1ZSkgPT4gewoJCQkJCQl2YXIgZGV0YWlscyA9IHsKCQkJCQkJCXZlcmlmaWVkOiB0cnVlLAoJCQkJCQkJbWVzc2FnZXM6IFsnUGxlYXNlIHVwbG9hZCBhIGNsZWFyIEFhZGhhYXIgQ2FyZC4gQWFkaGFhciBudW1iZXIgY291bGQgbm90IGJlIHJlYWQgZnJvbSB0aGUgY3VycmVudCBJbWFnZS5Zb3UgbWF5IGNob29zZSB0byBlbnRlciBtYW51YWxseSBvbiB0aGUgbmV4dCBzY3JlZW4uJ10sCgkJCQkJCQl2YWx1ZTogdmFsdWUsCgkJCQkJCX07CgkJCQkJCXJlc3AgPSBkZXRhaWxzOwoJCQkJCQlsZXQgU0FMVVRBVElPTl9uZXcgPSAnTXIuJzsKCQkJCQkJaWYgKHZhbHVlLkdFTkRFUi50cmltKCkudG9Mb3dlckNhc2UoKSA9PSAnbWFsZScpIHsKCQkJCQkJCVNBTFVUQVRJT05fbmV3ID0gJ01yLic7CgkJCQkJCX0KCQkJCQkJaWYgKHZhbHVlLkdFTkRFUi50cmltKCkudG9Mb3dlckNhc2UoKSA9PSAnZmVtYWxlJykgewoJCQkJCQkJU0FMVVRBVElPTl9uZXcgPSAnTXMuJzsKCQkJCQkJfQoKCQkJCQkJLy8gU0VUIEVYVFJBQ1RFRCBEQVRBCgkJCQkJCWNvbnN0IGlkeCA9ICgrbXl2YWx1ZS50cmltKClbMV0pIC0gMTsKCQkJCQkJY3VycmVudEFwcGxpY2FudFtpZHhdWydmb3JtJ11bMF0uZGVmYXVsdFZhbHVlID0gU0FMVVRBVElPTl9uZXcKCQkJCQkJY3VycmVudEFwcGxpY2FudFtpZHhdWydmb3JtJ11bOV0uZGVmYXVsdFZhbHVlID0gdmFsdWVbJ0FBREhBUiBOTyddLnRyaW0oKQoKCQkJCQkJLy8gbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2lkRGV0YWlsc0ExJywgSlNPTi5zdHJpbmdpZnkoY3VycmVudEFwcGxpY2FudCkpOwoJCQkJCQlpZERldGFpbHNBMSA9IEpTT04uc3RyaW5naWZ5KGN1cnJlbnRBcHBsaWNhbnQpOwoJCQkJCQlyZXNvbHZlKGRldGFpbHMpOwoJCQkJCX0pCgkJCQkJLmNhdGNoKCgpID0+IHsKCQkJCQkJLy9yZXNvbHZlKGZhbHNlKTsKCQkJCQkJcmVzb2x2ZShyZXNwKTsKCQkJCQl9KTsKCQkJfSBlbHNlIGlmIChmaW5hbFRwID09PSAiYWFkaGFyYmFjayIpIHsKCQkJCS8vIGNvbnN0IGFwaVVybCA9IGRvY1ZlcmlmaWNhdGlvbiArICIvYWFkaGFyLWJhY2siOwoJCQkJY29uc3QgYXBpVXJsID0gZG9jVmVyaWZpY2F0aW9uOwoJCQkJZmV0Y2goYXBpVXJsLCB7CgkJCQkJbWV0aG9kOiAicG9zdCIsCgkJCQkJYm9keTogZGF0YSwKCQkJCX0pCgkJCQkJLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSkKCQkJCQkudGhlbigodmFsdWUpID0+IHsKCQkJCQkJdmFyIGRldGFpbHMgPSB7CgkJCQkJCQl2ZXJpZmllZDogdHJ1ZSwKCQkJCQkJCW1lc3NhZ2VzOiBbJ1BsZWFzZSB1cGxvYWQgYSBjbGVhciBBYWRoYWFyIENhcmQuIEFhZGhhYXIgbnVtYmVyIGNvdWxkIG5vdCBiZSByZWFkIGZyb20gdGhlIGN1cnJlbnQgSW1hZ2UuWW91IG1heSBjaG9vc2UgdG8gZW50ZXIgbWFudWFsbHkgb24gdGhlIG5leHQgc2NyZWVuLiddLAoJCQkJCQkJdmFsdWU6IHZhbHVlLAoJCQkJCQl9OwoJCQkJCQlyZXNwID0gZGV0YWlsczsKCgkJCQkJCWNvbnN0IGlkeCA9ICgrbXl2YWx1ZS50cmltKClbMV0pIC0gMTsKCQkJCQkJbGV0IFNBTFVUQVRJT05fbmV3ID0gJ01yLic7CgkJCQkJCWN1cnJlbnRBcHBsaWNhbnRbaWR4XVsnZm9ybSddWzBdLmRlZmF1bHRWYWx1ZSA9IFNBTFVUQVRJT05fbmV3CgkJCQkJCWN1cnJlbnRBcHBsaWNhbnRbaWR4XVsnZm9ybSddWzEzXS5kZWZhdWx0VmFsdWUgPSB2YWx1ZVsnSG91c2Vfbm8nXS50cmltKCk7CgkJCQkJCWN1cnJlbnRBcHBsaWNhbnRbaWR4XVsnZm9ybSddWzE0XS5kZWZhdWx0VmFsdWUgPSB2YWx1ZVsnQnVpbGRpbmdfbmFtZSddLnRyaW0oKTsKCQkJCQkJY3VycmVudEFwcGxpY2FudFtpZHhdWydmb3JtJ11bMTVdLmRlZmF1bHRWYWx1ZSA9IHZhbHVlWydsb2NhbGl0eSddLnRyaW0oKTsKCQkJCQkJY3VycmVudEFwcGxpY2FudFtpZHhdWydmb3JtJ11bMTZdLmRlZmF1bHRWYWx1ZSA9IHZhbHVlWydzdHJlZXQnXS50cmltKCk7CgkJCQkJCWN1cnJlbnRBcHBsaWNhbnRbaWR4XVsnZm9ybSddWzE3XS5kZWZhdWx0VmFsdWUgPSB2YWx1ZVsnY2l0eSddLnRyaW0oKTsKCQkJCQkJY3VycmVudEFwcGxpY2FudFtpZHhdWydmb3JtJ11bMThdLmRlZmF1bHRWYWx1ZSA9IHZhbHVlWydQSU4nXS50cmltKCk7CgkJCQkJCWN1cnJlbnRBcHBsaWNhbnRbaWR4XVsnZm9ybSddWzE5XS5kZWZhdWx0VmFsdWUgPSB2YWx1ZVsnc3RhdGUnXTsKCQkJCQkJY3VycmVudEFwcGxpY2FudFtpZHhdWydmb3JtJ11bMjBdLmRlZmF1bHRWYWx1ZSA9IHZhbHVlWydjb3VudHJ5J107ICAvLyBDb3VudHJ5CgoKCQkJCQkJLy8gbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2lkRGV0YWlsc0ExJywgSlNPTi5zdHJpbmdpZnkoY3VycmVudEFwcGxpY2FudCkpOwoJCQkJCQlpZERldGFpbHNBMSA9IEpTT04uc3RyaW5naWZ5KGN1cnJlbnRBcHBsaWNhbnQpOwoJCQkJCQlyZXNvbHZlKGRldGFpbHMpOwoJCQkJCX0pCgkJCQkJLmNhdGNoKChlcnJvcikgPT4gewoJCQkJCQkvL2NvbnNvbGUubG9nKGVycm9yKQoJCQkJCQkvL3Jlc29sdmUoZmFsc2UpOwoJCQkJCQlyZXNvbHZlKHJlc3ApOwoJCQkJCX0pOwoJCQl9IGVsc2UgaWYgKGZpbmFsVHAgPT09ICJwYW5jYXJkIikgewoKCQkJCWNvbnN0IGFwaVVybCA9IGRvY1ZlcmlmaWNhdGlvbjsKCQkJCWZldGNoKGFwaVVybCwgewoJCQkJCW1ldGhvZDogInBvc3QiLAoJCQkJCWJvZHk6IGRhdGEsCgkJCQl9KS50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSkKCQkJCQkudGhlbigodmFsdWUpID0+IHsKCQkJCQkJLy8gYWRkZWQgYnkgbWFub2oKCQkJCQkJaWYgKG15dmFsdWUgPT0gJ0ExJykgewoJCQkJCQkJY29uc3QgbmFtZV9mID0gJ1ByaW1hcnknCgkJCQkJCX0gZWxzZSB7CgkJCQkJCQljb25zdCBuYW1lX2YgPSAnSm9pbnQnCgkJCQkJCX0KCQkJCQkJdmFyIGRldGFpbHMgPSB7CgkJCQkJCQl2ZXJpZmllZDogdHJ1ZSwKCQkJCQkJCW1lc3NhZ2VzOiBbJ1BsZWFzZSB1cGxvYWQgYSBjbGVhciBQQU4gQ2FyZC4gUGFuIG51bWJlciBjb3VsZCBub3QgYmUgcmVhZCBmcm9tIHRoZSBjdXJyZW50IEltYWdlLllvdSBtYXkgY2hvb3NlIHRvIGVudGVyIG1hbnVhbGx5IG9uIHRoZSBuZXh0IHNjcmVlbi4nXSwKCQkJCQkJCXZhbHVlOiB2YWx1ZSwKCQkJCQkJfTsgcmVzcCA9IGRldGFpbHM7CgkJCQkJCWlmICh2YWx1ZS5udW1iZXIgPT0gJ04vQScpIHsKCQkJCQkJCWRldGFpbHMudmVyaWZpZWQgPSBmYWxzZQoJCQkJCQl9CgoJCQkJCQlpZiAobXl2YWx1ZSA9PSAnQTEnKSB7CgkJCQkJCQkvLyBQcmltYXJ5IEFwcGxpY2FudAoJCQkJCQkJY29uc3QgYWxsYWJvdXR5b3VEb2IgPSBjdXJyZW50QXBwbGljYW50W2N1cnJlbnRBcHBsaWNhbnQubGVuZ3RoIC0gMV07CgkJCQkJCQlsZXQgbXlOYW1lID0gdmFsdWUuTkFNRS50cmltKCkuc3BsaXQoIiAiKTsKCQkJCQkJCWNvbnN0IGN1cnJlbnRfbCA9IG15TmFtZS5sZW5ndGg7CgkJCQkJCQlsZXQgZG9iID0gdmFsdWUuRE9CLnRyaW0oKS5yZXBsYWNlQWxsKCcgJywgJy8nKTsKCQkJCQkJCWN1cnJlbnRBcHBsaWNhbnRbMF1bJ2Zvcm0nXVsxXS5kZWZhdWx0VmFsdWUgPSBteU5hbWVbMF07CgkJCQkJCQljdXJyZW50QXBwbGljYW50WzBdWydmb3JtJ11bMl0uZGVmYXVsdFZhbHVlID0gbXlOYW1lW2N1cnJlbnRfbCAtIDFdOwoJCQkJCQkJY3VycmVudEFwcGxpY2FudFswXVsnZm9ybSddWzhdLmRlZmF1bHRWYWx1ZSA9IHZhbHVlLlBBTl9OTzsKCQkJCQkJCWN1cnJlbnRBcHBsaWNhbnRbMF1bJ2Zvcm0nXVsxMF0uZGVmYXVsdFZhbHVlID0gZm9ybWF0RGF0ZURvYihkb2IpCgkJCQkJCQlhbGxhYm91dHlvdURvYlsnZm9ybSddWzBdLmRlZmF1bHRWYWx1ZSA9IGZvcm1hdERhdGVEb2IoZG9iKQoJCQkJCQl9CgkJCQkJCWVsc2UgewoJCQkJCQkJLy8gSm9pbnQgQXBwbGljYW50cwoJCQkJCQkJY29uc3QgaWR4ID0gKCtteXZhbHVlLnRyaW0oKVsxXSkgLSAxOwoJCQkJCQkJbGV0IG15TmFtZSA9IHZhbHVlLk5BTUUudHJpbSgpLnNwbGl0KCIgIik7CgkJCQkJCQljb25zdCBjdXJyZW50X2wgPSBteU5hbWUubGVuZ3RoOwoJCQkJCQkJbGV0IGRvYiA9IHZhbHVlLkRPQi50cmltKCkucmVwbGFjZUFsbCgnICcsICcvJyk7CgoJCQkJCQkJY3VycmVudEFwcGxpY2FudFtpZHhdWydmb3JtJ11bMV0uZGVmYXVsdFZhbHVlID0gbXlOYW1lWzBdCgkJCQkJCQljdXJyZW50QXBwbGljYW50W2lkeF1bJ2Zvcm0nXVsyXS5kZWZhdWx0VmFsdWUgPSBteU5hbWVbY3VycmVudF9sIC0gMV0KCQkJCQkJCWN1cnJlbnRBcHBsaWNhbnRbaWR4XVsnZm9ybSddWzhdLmRlZmF1bHRWYWx1ZSA9IHZhbHVlLlBBTl9OTzsKCQkJCQkJCWN1cnJlbnRBcHBsaWNhbnRbaWR4XVsnZm9ybSddWzEwXS5kZWZhdWx0VmFsdWUgPSBmb3JtYXREYXRlRG9iKGRvYikKCQkJCQkJfQoKCQkJCQkJLy8gbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2lkRGV0YWlsc0ExJywgSlNPTi5zdHJpbmdpZnkoY3VycmVudEFwcGxpY2FudCkpOwoJCQkJCQlpZERldGFpbHNBMSA9IEpTT04uc3RyaW5naWZ5KGN1cnJlbnRBcHBsaWNhbnQpOwoJCQkJCQlyZXNvbHZlKGRldGFpbHMpCgkJCQkJfSkKCQkJCQkuY2F0Y2goKGVycm9yKSA9PiB7CgkJCQkJCXJlc29sdmUocmVzcCk7CgkJCQkJCS8vY29uc29sZS5sb2coZXJyb3IpCgkJCQkJCS8vcmVqZWN0KGZhbHNlKTsKCQkJCQl9KTsKCQkJfSBlbHNlIGlmIChmaW5hbFRwID09PSAicGFzc3BvcnQiKSB7CgkJCQljb25zdCBhcGlVcmwgPSBkb2NWZXJpZmljYXRpb24gKyAiL3Bhc3Nwb3J0IjsKCQkJCWZldGNoKGFwaVVybCwgewoJCQkJCW1ldGhvZDogInBvc3QiLAoJCQkJCWJvZHk6IGRhdGEsCgkJCQl9KQoJCQkJCS50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpCgkJCQkJLnRoZW4oKHZhbHVlKSA9PiB7CgkJCQkJCXZhciBkZXRhaWxzID0gewoJCQkJCQkJdmVyaWZpZWQ6IHRydWUsCgkJCQkJCQltZXNzYWdlczogW10sCgkJCQkJCQl2YWx1ZTogbnVsbCwKCQkJCQkJfTsKCgkJCQkJCXNlYXJjaFVwbG9hZCh2YWx1ZS5yZXN1bHQpCgkJCQkJCQkudGhlbigodXByZXMpID0+IHsKCQkJCQkJCQlpZiAodXByZXMpIHsKCQkJCQkJCQkJc2V0VGltZW91dCgoKSA9PiB7CgkJCQkJCQkJCQl2YXIgaXNOYW1lRXJyID0gZmFsc2U7CgoJCQkJCQkJCQkJY29uc3QgdmVyaWZ5VHdvID0gbmV3IFByb21pc2UoKHJlc28sIHJlamUpID0+IHsKCQkJCQkJCQkJCQlpZiAodmFsdWUubmFtZSkgewoJCQkJCQkJCQkJCQl2ZXJpZnlNeVZhbHVlcyhnZW5lcmF0ZU15VmFsdWUobXl2YWx1ZS5uYW1lKSkKCQkJCQkJCQkJCQkJCS50aGVuKChyZXNwKSA9PiB7CgkJCQkJCQkJCQkJCQkJaWYgKCFyZXNwKSB7CgkJCQkJCQkJCQkJCQkJCWlzTmFtZUVyciA9IHRydWU7CgkJCQkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJCQkJCXJlc28odHJ1ZSk7CgkJCQkJCQkJCQkJCQl9KQoJCQkJCQkJCQkJCQkJLmNhdGNoKCgpID0+IHsKCQkJCQkJCQkJCQkJCQlpc05hbWVFcnIgPSB0cnVlOwoJCQkJCQkJCQkJCQkJCXJlc28odHJ1ZSk7CgkJCQkJCQkJCQkJCQl9KTsKCQkJCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQkJCQlpc05hbWVFcnIgPSB0cnVlOwoJCQkJCQkJCQkJCQlyZXNvKHRydWUpOwoJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCX0pOwoKCQkJCQkJCQkJCVByb21pc2UuYWxsKFt2ZXJpZnlUd29dKS50aGVuKChwcmFyZXMpID0+IHsKCQkJCQkJCQkJCQlpZiAoaXNOYW1lRXJyKSB7CgkJCQkJCQkJCQkJCWRldGFpbHMubWVzc2FnZXMucHVzaCgKCQkJCQkJCQkJCQkJCWBQYXNzcG9ydCBOYW1lIGluIHRoZSBVcGxvYWRlZCBkb2N1bWVudCBkb3NlIG5vdCBtYXRjaCB3aXRoIHRoZSBlbnRlcmVkIGRldGFpbHMuJHtpc05hbWVFcnIKCQkJCQkJCQkJCQkJCQk/IGA8YnI+VXBsb2FkZWQgUGFzc3BvcnQgTmFtZTogJHt2YWx1ZS5uYW1lfWAKCQkJCQkJCQkJCQkJCQk6ICIiCgkJCQkJCQkJCQkJCQl9JHtpc05hbWVFcnIKCQkJCQkJCQkJCQkJCQk/IGA8YnI+RW50ZXJlZCBQYXNzcG9ydCBOYW1lIGluIHRoZSBmb3JtOiAke2dlbmVyYXRlTXlWYWx1ZSgKCQkJCQkJCQkJCQkJCQkJbXl2YWx1ZS5uYW1lCgkJCQkJCQkJCQkJCQkJKX1gCgkJCQkJCQkJCQkJCQkJOiAiIgoJCQkJCQkJCQkJCQkJfTxicj5gCgkJCQkJCQkJCQkJCSk7CgkJCQkJCQkJCQkJCWRldGFpbHMudmVyaWZpZWQgPSBmYWxzZTsKCQkJCQkJCQkJCQkJZGV0YWlscy52YWx1ZSA9IHZhbHVlOwoJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCQlyZXNvbHZlKGRldGFpbHMpOwoJCQkJCQkJCQkJfSk7CgkJCQkJCQkJCX0sIDE1MDApOwoJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCXJlc29sdmUoZmFsc2UpOwoJCQkJCQkJCX0KCQkJCQkJCX0pCgkJCQkJCQkuY2F0Y2goKCkgPT4gewoJCQkJCQkJCXJlc29sdmUoZmFsc2UpOwoJCQkJCQkJfSk7CgkJCQkJfSkKCQkJCQkuY2F0Y2goKCkgPT4gewoJCQkJCQlyZWplY3QoZmFsc2UpOwoJCQkJCX0pOwoJCQl9IGVsc2UgaWYgKGZpbmFsVHAgPT09ICdhYWRoYXJzdHJpcCcpIHsKCQkJCWNvbnN0IGFwaVVybCA9IGRvY1ZlcmlmaWNhdGlvbjsKCgkJCQlmZXRjaChhcGlVcmwsIHsKCQkJCQltZXRob2Q6ICJwb3N0IiwKCQkJCQlib2R5OiBkYXRhLAoJCQkJfSkKCQkJCQkudGhlbigocmVzKSA9PiByZXMuanNvbigpKQoJCQkJCS50aGVuKCh2YWx1ZSkgPT4gewoJCQkJCQlsZXQgZGV0YWlscyA9IHsKCQkJCQkJCXZlcmlmaWVkOiB0cnVlLAoJCQkJCQkJbWVzc2FnZXM6IFsnUGxlYXNlIHVwbG9hZCBhIGNsZWFyIEFhZGhhYXIgQ2FyZC4gQWFkaGFhciBudW1iZXIgY291bGQgbm90IGJlIHJlYWQgZnJvbSB0aGUgY3VycmVudCBJbWFnZS5Zb3UgbWF5IGNob29zZSB0byBlbnRlciBtYW51YWxseSBvbiB0aGUgbmV4dCBzY3JlZW4uJ10sCgkJCQkJCQl2YWx1ZTogdmFsdWUsCgkJCQkJCX07CgkJCQkJCXJlc3AgPSBkZXRhaWxzOwoJCQkJCQkvLyBMb2dpYyBmb3IgQWFkaGFyIEZyb250CgkJCQkJCWxldCBTQUxVVEFUSU9OX25ldyA9ICdNci4nOwoJCQkJCQlpZiAodmFsdWUuR0VOREVSLnRyaW0oKS50b0xvd2VyQ2FzZSgpID09ICdtYWxlJykgewoJCQkJCQkJU0FMVVRBVElPTl9uZXcgPSAnTXIuJzsKCQkJCQkJfQoJCQkJCQlpZiAodmFsdWUuR0VOREVSLnRyaW0oKS50b0xvd2VyQ2FzZSgpID09ICdmZW1hbGUnKSB7CgkJCQkJCQlTQUxVVEFUSU9OX25ldyA9ICdNcy4nOwoJCQkJCQl9CgoJCQkJCQkvLyBHZXQgQXBwbGljYW50J3MgaW5kZXgKCQkJCQkJY29uc3QgaWR4ID0gKCtteXZhbHVlLnRyaW0oKVsxXSkgLSAxOwoKCQkJCQkJLy8gQUFESEFSIEZST05UCgkJCQkJCWN1cnJlbnRBcHBsaWNhbnRbaWR4XVsnZm9ybSddWzBdLmRlZmF1bHRWYWx1ZSA9IFNBTFVUQVRJT05fbmV3CgkJCQkJCWN1cnJlbnRBcHBsaWNhbnRbaWR4XVsnZm9ybSddWzldLmRlZmF1bHRWYWx1ZSA9IHZhbHVlWydBQURIQVIgTk8nXT8udHJpbSgpOwoKCQkJCQkJLy8gbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2lkRGV0YWlsc0ExJywgSlNPTi5zdHJpbmdpZnkoY3VycmVudEFwcGxpY2FudCkpOwoJCQkJCQlpZERldGFpbHNBMSA9IEpTT04uc3RyaW5naWZ5KGN1cnJlbnRBcHBsaWNhbnQpOwoKCQkJCQkJLy8gQUFESEFSIEJBQ0sKCQkJCQkJY3VycmVudEFwcGxpY2FudFtpZHhdWydmb3JtJ11bMTNdLmRlZmF1bHRWYWx1ZSA9IHZhbHVlWydIb3VzZSBubyddLnRyaW0oKTsgIC8vIEhvdXNlIE51bWJlcgoJCQkJCQljdXJyZW50QXBwbGljYW50W2lkeF1bJ2Zvcm0nXVsxNF0uZGVmYXVsdFZhbHVlID0gdmFsdWVbJ0J1aWxkaW5nX25hbWUnXS50cmltKCk7ICAvLyBCdWlsZGluZyBOYW1lCgkJCQkJCWN1cnJlbnRBcHBsaWNhbnRbaWR4XVsnZm9ybSddWzE1XS5kZWZhdWx0VmFsdWUgPSB2YWx1ZVsnbG9jYWxpdHknXS50cmltKCk7ICAvLyBsb2NhbGl0eSAKCQkJCQkJY3VycmVudEFwcGxpY2FudFtpZHhdWydmb3JtJ11bMTZdLmRlZmF1bHRWYWx1ZSA9IHZhbHVlWydzdHJlZXQnXS50cmltKCk7IC8vIHN0cmVldAoJCQkJCQljdXJyZW50QXBwbGljYW50W2lkeF1bJ2Zvcm0nXVsxN10uZGVmYXVsdFZhbHVlID0gdmFsdWVbJ2NpdHknXS50cmltKCk7IC8vIGNpdHkKCQkJCQkJY3VycmVudEFwcGxpY2FudFtpZHhdWydmb3JtJ11bMThdLmRlZmF1bHRWYWx1ZSA9IHZhbHVlWydQSU4nXS50cmltKCk7IC8vIFBvc3RhbCBDb2RlCgkJCQkJCWN1cnJlbnRBcHBsaWNhbnRbaWR4XVsnZm9ybSddWzE5XS5kZWZhdWx0VmFsdWUgPSB2YWx1ZVsnc3RhdGUnXTsgIC8vIFN0YXRlCgkJCQkJCWN1cnJlbnRBcHBsaWNhbnRbaWR4XVsnZm9ybSddWzIwXS5kZWZhdWx0VmFsdWUgPSB2YWx1ZVsnY291bnRyeSddOyAgLy8gQ291bnRyeQoJCQkJCQkvL3NldEdlb0xvY2F0aW9uKHZhbHVlWydMQVRJVFVERSddLCB2YWx1ZVsnTE9OR0lUVURFJ10sICdhcHBsaWNhbnRfaW5wdXRncm91cCcpOwoKCgkJCQkJCS8vIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdpZERldGFpbHNBMScsIEpTT04uc3RyaW5naWZ5KGN1cnJlbnRBcHBsaWNhbnQpKTsKCQkJCQkJaWREZXRhaWxzQTEgPSBKU09OLnN0cmluZ2lmeShjdXJyZW50QXBwbGljYW50KTsKCQkJCQkJcmVzb2x2ZShkZXRhaWxzKTsKCQkJCQl9KQoJCQkJCS5jYXRjaCgoZXJyKSA9PiB7CgkJCQkJCWNvbnNvbGUubG9nKGVycik7CgkJCQkJCS8vcmVzb2x2ZShmYWxzZSk7CgkJCQkJCXJlc29sdmUocmVzcCk7CgkJCQkJfSk7CgkJCX0gZWxzZSBpZiAoZmluYWxUcCA9PT0gIm90aGVyIikgewoJCQkJY29uc3QgYXBpVXJsID0gZG9jVmVyaWZpY2F0aW9uOwoJCQkJZmV0Y2goYXBpVXJsLCB7CgkJCQkJbWV0aG9kOiAicG9zdCIsCgkJCQkJYm9keTogZGF0YSwKCQkJCX0pCgkJCQkJLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSkKCQkJCQkudGhlbigodmFsdWUpID0+IHsKCQkJCQkJdmFyIGRldGFpbHMgPSB7CgkJCQkJCQl2ZXJpZmllZDogdHJ1ZSwKCQkJCQkJCW1lc3NhZ2VzOiBbJ1BsZWFzZSB1cGxvYWQgYSBjbGVhciBkb2N1bWVudC5Zb3UgbWF5IGNob29zZSB0byBlbnRlciBtYW51YWxseSBvbiB0aGUgbmV4dCBzY3JlZW4uJ10sCgkJCQkJCQl2YWx1ZTogdmFsdWUsCgkJCQkJCX07CgkJCQkJCXJlc3AgPSBkZXRhaWxzOwoKCQkJCQkJcmVzb2x2ZShkZXRhaWxzKTsKCQkJCQl9KQoJCQkJCS5jYXRjaCgoKSA9PiB7CgkJCQkJCXJlc29sdmUocmVzcCk7CgkJCQkJfSk7CgkJCX0KCQl9CgoJCWlubmVyVmFsaWRhdGlvbigpOwoJfSk7CglyZXR1cm4gbXlwcm9taXNlOwp9CgpmdW5jdGlvbiBzZXRHZW9Mb2NhdGlvbihsYXQsIGxuZywgcGFyZW50Q2xhc3MpIHsKCWxldCBjb250ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLiR7cGFyZW50Q2xhc3N9YCk7Cgljb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKCWRpdi5jbGFzc0xpc3QuYWRkKCdnb29nbGUtbWFwLWNvbnQnKTsKCWNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CglhLmhyZWYgPSBgaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS9tYXBzL0A/YXBpPTEmbWFwX2FjdGlvbj1tYXAmY2VudGVyPSR7bGF0fSwke2xuZ31gOwoJYS50YXJnZXQgPSAiX2JsYW5rIjsKCWNvbnN0IGltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpOwoKCgljb25zdCBnb29nbGVBUEkgPSBgaHR0cHM6Ly9tYXBzLmdvb2dsZWFwaXMuY29tL21hcHMvYXBpL3N0YXRpY21hcD9jZW50ZXI9JHtsYXR9LCR7bG5nfSZ6b29tPTE0JnNpemU9MjAweDIwMCZrZXk9QUl6YVN5RElTckt1M21PRUUxMDBEd0NEVXZOc1RlQ3NzY2lHaDRvYAoJZmV0Y2goZ29vZ2xlQVBJKQoJCS50aGVuKChyZXMpID0+IHJlcy5ibG9iKCkpCgkJLnRoZW4oKGJsb2IpID0+IHsKCQkJbGV0IGNvbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuJHtwYXJlbnRDbGFzc31gKTsKCQkJaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1c2VyTG9jYXRpb25Db250JykpIHsKCQkJCWNvbnQucmVtb3ZlQ2hpbGQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VzZXJMb2NhdGlvbkNvbnQnKSkKCQkJfQoJCQljb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKCQkJZGl2LmNsYXNzTGlzdC5hZGQoJ2dvb2dsZS1tYXAtY29udCcpOwoJCQlkaXYuc2V0QXR0cmlidXRlKCdpZCcsICd1c2VyTG9jYXRpb25Db250Jyk7CgkJCWNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CgkJCWEuaHJlZiA9IGBodHRwczovL3d3dy5nb29nbGUuY29tL21hcHMvQD9hcGk9MSZtYXBfYWN0aW9uPW1hcCZjZW50ZXI9JHtsYXR9LCR7bG5nfWA7CgkJCWEudGFyZ2V0ID0gIl9ibGFuayI7CgkJCWNvbnN0IGltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpOwoJCQlpbWcuc2V0QXR0cmlidXRlKCdpZCcsICd1c2VyTG9jYXRpb24nKTsKCQkJY29uc3QgaW1hZ2VVUkwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwoJCQlpbWcuc3JjID0gaW1hZ2VVUkw7CgkJCWltZy53aWR0aCA9ICcyMDAnOwoJCQlpbWcuaGVpZ2h0ID0gJzIwMCc7CgkJCWEuYXBwZW5kQ2hpbGQoaW1nKTsKCQkJZGl2LmFwcGVuZENoaWxkKGEpOwoJCQljb250LmFwcGVuZENoaWxkKGRpdik7CgoKCQl9KTsKfQpmdW5jdGlvbiB2ZXJpZnlQYXltZW50U291cmNlKHR5cGUsIGRhdGEsIHJvd1RvVXBkYXRlKSB7CgoJY29uc3QgbXlwcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewoJCWZ1bmN0aW9uIGlubmVyVmFsaWRhdGlvblBheW1lbnQoKSB7CgkJCWlmICh0eXBlID09ICdDaGVxdWUnKSB7CgkJCQlzZXRUaW1lb3V0KCgpID0+IHsKCgkJCQkJLy8gbGV0IG15RG9jID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbXlkb2N1bWVudCcpKTsKCQkJCQlsZXQgbXlEb2MgPSBKU09OLnBhcnNlKG15ZG9jdW1lbnQpOwoKCQkJCQljb25zdCBrZXlfaWQgPSBgYmFja19jaGVja19wb3N0XyR7cm93VG9VcGRhdGV9YDsKCQkJCQlteURvYyA9IG15RG9jW2tleV9pZF0uc3BsaXQoJywnKVsxXTsKCQkJCQkvLyBteURvYyA9IG15RG9jWydiYWNrX2NoZWNrX3Bvc3QnXQoKCQkJCQl2YXIgbXlIZWFkZXJzID0gbmV3IEhlYWRlcnMoKTsKCQkJCQlteUhlYWRlcnMuYXBwZW5kKCJ0b2tlbiIsICJjOTI3ZjhjNWY1NjEzOTkxYTYyYmUxZTc0ZjgwYWMxYiIpOwoJCQkJCW15SGVhZGVycy5hcHBlbmQoIkNvbnRlbnQtVHlwZSIsICJhcHBsaWNhdGlvbi9qc29uIik7CgoJCQkJCXZhciByYXcgPSBKU09OLnN0cmluZ2lmeSh7CgkJCQkJCSJyZXFfaWQiOiAiY2gtcmVxLTEiLAoJCQkJCQkiZG9jX3R5cGUiOiAiaW1hZ2UiLAoJCQkJCQkiYmxhbmtfY2hlcXVlIjogZmFsc2UsCgkJCQkJCSJkb2NfYmFzZTY0IjogbXlEb2MKCQkJCQl9KTsKCgkJCQkJdmFyIHJlcXVlc3RPcHRpb25zID0gewoJCQkJCQltZXRob2Q6ICdQT1NUJywKCQkJCQkJaGVhZGVyczogbXlIZWFkZXJzLAoJCQkJCQlib2R5OiByYXcsCgkJCQkJCXJlZGlyZWN0OiAnZm9sbG93JwoJCQkJCX07CgoJCQkJCWZldGNoKCJodHRwczovL3BpbmcuYXJ5YS5haS9hcGkvdjEvY2hlcXVlIiwgcmVxdWVzdE9wdGlvbnMpCgkJCQkJCS50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSkKCQkJCQkJLnRoZW4odmFsdWUgPT4gewoJCQkJCQkJbGV0IHJlc3VsdCA9IHZhbHVlPy5yZXN1bHQ7CgkJCQkJCQlmb3IgKGxldCBrZXkgaW4gcmVzdWx0KSB7CgkJCQkJCQkJaWYgKGtleSA9PSAnQW1vdW50IGluIFdvcmRzJykgewoJCQkJCQkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnRmllbGRfMHVvb2gxOC0nICsgcm93VG9VcGRhdGUpLnZhbHVlID0gcmVzdWx0W2tleV0KCQkJCQkJCQl9CgkJCQkJCQkJaWYgKGtleSA9PSAnQW1vdW50IGluIEZpZ3VyZXMnKSB7CgkJCQkJCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdGaWVsZF8wanB5YnVnLScgKyByb3dUb1VwZGF0ZSkudmFsdWUgPSByZXN1bHRba2V5XQoJCQkJCQkJCX0KCQkJCQkJCQlpZiAoa2V5ID09ICdCYW5rIE5hbWUnKSB7CgkJCQkJCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdGaWVsZF8wbDk4cG43LScgKyByb3dUb1VwZGF0ZSkudmFsdWUgPSByZXN1bHRba2V5XQoJCQkJCQkJCX0KCgkJCQkJCQkJLy8gQWRkZWQgYnkgbWFub2oKCQkJCQkJCQlpZiAoa2V5ID09ICdEYXRlJykgewoJCQkJCQkJCQlpZiAocmVzdWx0W2tleV0gPT0gIiIpIHsKCQkJCQkJCQkJCWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5hbW91bnQtZGF0YS0ke3Jvd1RvVXBkYXRlfWApLmNsYXNzTGlzdC5yZW1vdmUoJ25vdF9lZGl0YWJsZScpOwoJCQkJCQkJCQkJZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLmFtb3VudC1kYXRhLSR7cm93VG9VcGRhdGV9YCkuZGlzYWJsZWQgPSBmYWxzZTsKCgkJCQkJCQkJCX0KCQkJCQkJCQl9CgkJCQkJCQl9CgoJCQkJCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ0ZpZWxkXzBpMDdoNnMtJyArIHJvd1RvVXBkYXRlKS52YWx1ZSA9IHJlc3VsdFsnQ2hlcXVlIE5vJ107CgkJCQkJCQl2YXIgZGV0YWlscyA9IHsKCQkJCQkJCQl2ZXJpZmllZDogdHJ1ZSwKCQkJCQkJCQltZXNzYWdlczogW10sCgkJCQkJCQkJdmFsdWU6IHZhbHVlPy5yZXN1bHQsCgkJCQkJCQl9OwoJCQkJCQkJcmVzb2x2ZShkZXRhaWxzKTsKCQkJCQkJfSkuY2F0Y2goZXJyb3IgPT4gY29uc29sZS5sb2coJ2Vycm9yJywgZXJyb3IpKTsKCQkJCX0sIDUwMCk7CgkJCX0gZWxzZSBpZiAodHlwZSA9PSAnU3dpcGUnKSB7CgkJCQljb25zdCBhcGlVcmwgPSBleHRyYWN0UGF5bWVudFNvdXJjZSArICIvY2hhcmdlLXNsaXAiOwoJCQkJZmV0Y2goYXBpVXJsLCB7CgkJCQkJbWV0aG9kOiAicG9zdCIsCgkJCQkJYm9keTogZGF0YSwKCQkJCX0pLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSkKCQkJCQkudGhlbigodmFsdWUpID0+IHsKCQkJCQkJdmFyIGRldGFpbHMgPSB7CgkJCQkJCQl2ZXJpZmllZDogdHJ1ZSwKCQkJCQkJCW1lc3NhZ2VzOiBbXSwKCQkJCQkJCXZhbHVlOiBudWxsLAoJCQkJCQl9OwoJCQkJCQlsZXQgcmVzdWx0ID0gdmFsdWU/LnJlc3VsdDsKCQkJCQkJaWYgKHJlc3VsdC5hbW91bnQpIHsKCQkJCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdGaWVsZF8wdW9vaDE4LScgKyByb3dUb1VwZGF0ZSkudmFsdWUgPSAnJwoJCQkJCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ0ZpZWxkXzBqcHlidWctJyArIHJvd1RvVXBkYXRlKS52YWx1ZSA9IHJlc3VsdC5hbW91bnQKCQkJCQkJfQoJCQkJCQlpZiAocmVzdWx0Lm1lcmNoYW50UmVmTm8pIHsKCQkJCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdGaWVsZF8waTA3aDZzLScgKyByb3dUb1VwZGF0ZSkudmFsdWUgPSByZXN1bHQubWVyY2hhbnRSZWZObzsKCQkJCQkJfQoJCQkJCQlyZXNvbHZlKGRldGFpbHMpOwoJCQkJCX0pCgkJCQkJLmNhdGNoKChlcnJvcikgPT4gewoJCQkJCQljb25zb2xlLmxvZyhlcnJvcikKCQkJCQkJcmVzb2x2ZShmYWxzZSk7CgkJCQkJfSk7CgkJCX0gZWxzZSBpZiAodHlwZSA9PSAnUlRHUycpIHsKCQkJCWNvbnN0IGFwaVVybCA9IGV4dHJhY3RQYXltZW50U291cmNlICsgIi9jaGFyZ2Utc2xpcCI7CgkJCQlmZXRjaChhcGlVcmwsIHsKCQkJCQltZXRob2Q6ICJwb3N0IiwKCQkJCQlib2R5OiBkYXRhLAoJCQkJfSkudGhlbigocmVzKSA9PiByZXMuanNvbigpKQoJCQkJCS50aGVuKCh2YWx1ZSkgPT4gewoJCQkJCQl2YXIgZGV0YWlscyA9IHsKCQkJCQkJCXZlcmlmaWVkOiB0cnVlLAoJCQkJCQkJbWVzc2FnZXM6IFtdLAoJCQkJCQkJdmFsdWU6IG51bGwsCgkJCQkJCX07CgkJCQkJCWxldCByZXN1bHQgPSB2YWx1ZT8ucmVzdWx0OwoJCQkJCQlpZiAocmVzdWx0LmFtb3VudCkgewoJCQkJCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ0ZpZWxkXzB1b29oMTgtJyArIHJvd1RvVXBkYXRlKS52YWx1ZSA9ICcnCgkJCQkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnRmllbGRfMGpweWJ1Zy0nICsgcm93VG9VcGRhdGUpLnZhbHVlID0gcmVzdWx0LmFtb3VudAoJCQkJCQl9CgoJCQkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnRmllbGRfMGkwN2g2cy0nICsgcm93VG9VcGRhdGUpLnZhbHVlID0gcmVzdWx0Lm1lcmNoYW50UmVmTm87OwoJCQkJCQlyZXNvbHZlKGRldGFpbHMpOwoJCQkJCQkvLyByZXNvbHZlKGRldGFpbHMpOwoJCQkJCX0pCgkJCQkJLmNhdGNoKChlcnJvcikgPT4gewoJCQkJCQljb25zb2xlLmxvZyhlcnJvcikKCQkJCQkJcmVzb2x2ZShmYWxzZSk7CgkJCQkJfSk7CgkJCX0gZWxzZSBpZiAodHlwZSA9PSAnTkVGVCcpIHsKCQkJCWNvbnN0IGFwaVVybCA9IGV4dHJhY3RQYXltZW50U291cmNlICsgIi9jaGFyZ2Utc2xpcCI7CgkJCQlmZXRjaChhcGlVcmwsIHsKCQkJCQltZXRob2Q6ICJwb3N0IiwKCQkJCQlib2R5OiBkYXRhLAoJCQkJfSkudGhlbigocmVzKSA9PiByZXMuanNvbigpKQoJCQkJCS50aGVuKCh2YWx1ZSkgPT4gewoJCQkJCQl2YXIgZGV0YWlscyA9IHsKCQkJCQkJCXZlcmlmaWVkOiB0cnVlLAoJCQkJCQkJbWVzc2FnZXM6IFtdLAoJCQkJCQkJdmFsdWU6IG51bGwsCgkJCQkJCX07CgkJCQkJCWxldCByZXN1bHQgPSB2YWx1ZT8ucmVzdWx0OwoJCQkJCQlpZiAocmVzdWx0LmFtb3VudCkgewoJCQkJCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ0ZpZWxkXzB1b29oMTgtJyArIHJvd1RvVXBkYXRlKS52YWx1ZSA9ICcnCgkJCQkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnRmllbGRfMGpweWJ1Zy0nICsgcm93VG9VcGRhdGUpLnZhbHVlID0gcmVzdWx0LmFtb3VudAoJCQkJCQl9CgoJCQkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnRmllbGRfMGkwN2g2cy0nICsgcm93VG9VcGRhdGUpLnZhbHVlID0gcmVzdWx0Lm1lcmNoYW50UmVmTm87OwoJCQkJCQlyZXNvbHZlKGRldGFpbHMpOwoJCQkJCQkvLyByZXNvbHZlKGRldGFpbHMpOwoJCQkJCX0pCgkJCQkJLmNhdGNoKChlcnJvcikgPT4gewoJCQkJCQljb25zb2xlLmxvZyhlcnJvcikKCQkJCQkJcmVzb2x2ZShmYWxzZSk7CgkJCQkJfSk7CgkJCX0KCQkJZWxzZSBpZiAodHlwZSA9PSAnUmF6b3JwYXknKSB7CgkJCQljb25zdCBhcGlVcmwgPSBleHRyYWN0UGF5bWVudFNvdXJjZSArICIvY2hhcmdlLXNsaXAiOwoJCQkJZmV0Y2goYXBpVXJsLCB7CgkJCQkJbWV0aG9kOiAicG9zdCIsCgkJCQkJYm9keTogZGF0YSwKCQkJCX0pLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSkKCQkJCQkudGhlbigodmFsdWUpID0+IHsKCQkJCQkJdmFyIGRldGFpbHMgPSB7CgkJCQkJCQl2ZXJpZmllZDogdHJ1ZSwKCQkJCQkJCW1lc3NhZ2VzOiBbXSwKCQkJCQkJCXZhbHVlOiBudWxsLAoJCQkJCQl9OwoJCQkJCQlsZXQgcmVzdWx0ID0gdmFsdWU/LnJlc3VsdDsKCQkJCQkJaWYgKHJlc3VsdC5hbW91bnQpIHsKCQkJCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdGaWVsZF8wdW9vaDE4LScgKyByb3dUb1VwZGF0ZSkudmFsdWUgPSAnJwoJCQkJCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ0ZpZWxkXzBqcHlidWctJyArIHJvd1RvVXBkYXRlKS52YWx1ZSA9IHJlc3VsdC5hbW91bnQKCQkJCQkJfQoKCQkJCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ0ZpZWxkXzBpMDdoNnMtJyArIHJvd1RvVXBkYXRlKS52YWx1ZSA9IHJlc3VsdC5tZXJjaGFudFJlZk5vOzsKCQkJCQkJcmVzb2x2ZShkZXRhaWxzKTsKCQkJCQkJLy8gcmVzb2x2ZShkZXRhaWxzKTsKCQkJCQl9KQoJCQkJCS5jYXRjaCgoZXJyb3IpID0+IHsKCQkJCQkJY29uc29sZS5sb2coZXJyb3IpCgkJCQkJCXJlc29sdmUoZmFsc2UpOwoJCQkJCX0pOwoJCQl9IGVsc2UgewoJCQkJcmVzb2x2ZSh7CgkJCQkJdmVyaWZpZWQ6IHRydWUsCgkJCQkJbWVzc2FnZXM6IFtdLAoJCQkJCXZhbHVlOiBudWxsLAoJCQkJfSk7CgkJCX0KCQl9CgkJaW5uZXJWYWxpZGF0aW9uUGF5bWVudCgpOwoJfSk7CglyZXR1cm4gbXlwcm9taXNlOwoKfQoKZnVuY3Rpb24gbWF0Y2hOYW1lVmFsaWQobmFtZSwgY2hlY2spIHsKCWNvbnN0IGxpc3QgPSBPYmplY3Qua2V5cyhjaGVjayk7Cglmb3IgKGxldCBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHsKCQlpZiAoIW5hbWUuaW5jbHVkZXMoY2hlY2tbbGlzdFtpXV0pKSB7CgkJCXJldHVybiBmYWxzZTsKCQl9Cgl9CglyZXR1cm4gdHJ1ZTsKfQoKZnVuY3Rpb24gZ2VuZXJhdGVNeVZhbHVlKGNoZWNrKSB7Cgljb25zdCBsaXN0ID0gT2JqZWN0LmtleXMoY2hlY2spOwoJbGV0IE5hbWUgPSAiIjsKCWZvciAobGV0IGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykgewoJCU5hbWUgPSBOYW1lICsgKGkgPT0gMCA/ICIiIDogIiAiKSArIGNoZWNrW2xpc3RbaV1dOwoJfQoJcmV0dXJuIE5hbWU7Cn0KCmZ1bmN0aW9uIGdlbmVyYXRlQWRkcmVzc1ZhbHVlKGNoZWNrKSB7Cgljb25zdCBsaXN0ID0gT2JqZWN0LmtleXMoY2hlY2spOwoJbGV0IE5hbWUgPSAiIjsKCWZvciAobGV0IGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykgewoJCU5hbWUgPSBOYW1lICsgKGkgPT0gMCA/ICIiIDogIiwgIikgKyBjaGVja1tsaXN0W2ldXTsKCX0KCXJldHVybiBOYW1lOwp9CgpmdW5jdGlvbiB2ZXJpZmllZGljb24oKSB7Cgljb25zdCBjbG9zZUFjdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxhYmVsIik7CgljbG9zZUFjdGlvbi5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgImNvcnJlY3RfcHJldmlld2ljb24iKTsKCWNsb3NlQWN0aW9uLmlubmVyVGV4dCA9ICLinJMiOwoJcmV0dXJuIGNsb3NlQWN0aW9uOwp9CgpmdW5jdGlvbiB2ZXJpZnlmYWlsc2ljb24oKSB7Cgljb25zdCBjbG9zZUFjdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxhYmVsIik7CgljbG9zZUFjdGlvbi5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgImNsb3NlX3ByZXZpZXdpY29uIik7CgljbG9zZUFjdGlvbi5pbm5lclRleHQgPSAiWCI7CglyZXR1cm4gY2xvc2VBY3Rpb247Cn0KCmZ1bmN0aW9uIGdldEFwcGxpY2FudERhdGEodHlwZSkgewoJY29uc3QgcmV0VmFsdWUgPSB7fTsKCWNvbnN0IHNjaEFyciA9IHNjaGVtYVsiYXBwbGljYW50LWRldGFpbHMiXVsic3ViLXNlY3Rpb25zIl07Cglmb3IgKGxldCBpID0gMDsgaSA8IHNjaEFyci5sZW5ndGg7IGkrKykgewoJCWlmIChzY2hBcnJbaV0uQXBwbGljYW50X1Bvc2l0aW9uID09PSB0eXBlKSB7CgkJCWNvbnN0IGZpYXJyID0gT2JqZWN0LmtleXMobXlmaWVsZGRldCk7CgkJCWZpYXJyLmZvckVhY2goKGZpYSkgPT4gewoJCQkJY29uc3QgbXlzY2htYSA9IG15ZmllbGRkZXRbZmlhXTsKCQkJCWxldCBzdWJ2YWx1ZSA9IHt9OwoJCQkJZm9yIChsZXQgeCA9IDA7IHggPCBteXNjaG1hLmxlbmd0aDsgeCsrKSB7CgkJCQkJY29uc3QgZm9ybSA9IHNjaEFycltpXS5mb3JtOwoJCQkJCWZvcm0uZm9yRWFjaCgoZWxlbWVudCkgPT4gewoJCQkJCQlpZiAobXlzY2htYVt4XSA9PT0gZWxlbWVudC5sYWJlbCkgewoJCQkJCQkJaWYgKCFlbGVtZW50LmlkLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoInNoaXBwaW5nIikpIHsKCQkJCQkJCQljb25zdCBmaXZhbHVlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxlbWVudC5pZCkudmFsdWU7CgkJCQkJCQkJaWYgKGZpYSA9PT0gImFkZGhhcl9udW1iZXIiIHx8IGZpYSA9PT0gInBhbl9udW1iZXIiKSB7CgkJCQkJCQkJCXN1YnZhbHVlID0gZml2YWx1ZTsKCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQlzdWJ2YWx1ZVsKCQkJCQkJCQkJCWVsZW1lbnQubGFiZWwudHJpbSgpLnRvTG93ZXJDYXNlKCkucmVwbGFjZUFsbCgiICIsICIiKQoJCQkJCQkJCQldID0gZml2YWx1ZTsKCQkJCQkJCQl9CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQl9KTsKCgkJCQkJcmV0VmFsdWVbZmlhXSA9IHN1YnZhbHVlOwoJCQkJfQoJCQl9KTsKCQl9Cgl9CgoJcmV0dXJuIHJldFZhbHVlOwp9CgpmdW5jdGlvbiBjcmVhdGVFc2lnbkRhdGEoKSB7Cgljb25zdCBhcHBsaWNhbnRfZGV0YWlsc2NvbHMgPSBzY2hlbWFbImFwcGxpY2FudC1kZXRhaWxzIl1bInN1Yi1zZWN0aW9ucyJdOwoKCWlmIChhcHBsaWNhbnRfZGV0YWlsc2NvbHMubGVuZ3RoID4gMCkgewoJCWNvbnN0IG15QXJyID0gW107CgkJYXBwbGljYW50X2RldGFpbHNjb2xzLmZvckVhY2goKGFwZCwgaSkgPT4gewoJCQlpZiAoaSA8IGFwcGxpY2FudF9kZXRhaWxzY29scy5sZW5ndGggLSAxKSB7CgkJCQljb25zdCBmb3JtID0gYXBkWyJmb3JtIl07CgkJCQl2YXIgZGV0YWlscyA9ICIiOwoJCQkJZm9ybS5mb3JFYWNoKChmbykgPT4gewoJCQkJCWZvciAobGV0IHhvID0gMDsgeG8gPCBlc2lnbkRhdGEubGVuZ3RoOyB4bysrKSB7CgkJCQkJCWlmIChmby5sYWJlbCA9PT0gZXNpZ25EYXRhW3hvXSkgewoJCQkJCQkJY29uc3QgdmFsdWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChmby5pZCkudmFsdWU7CgkJCQkJCQlkZXRhaWxzID0gZGV0YWlscyArICIgIiArIHZhbHVlOwoJCQkJCQl9CgkJCQkJfQoJCQkJfSk7CgkJCQl2YXIgbXlvYmogPSB7CgkJCQkJdHlwZTogYXBkWyJBcHBsaWNhbnRfUG9zaXRpb24iXSwKCQkJCQl2YWx1ZTogZGV0YWlscywKCQkJCQl0eXBlOiBhcGQuQXBsaWNhbnRfVHlwZSwKCQkJCX07CgkJCQlteUFyci5wdXNoKG15b2JqKTsKCQkJfQoJCX0pOwoJCXJldHVybiBteUFycjsKCX0KfQoKZnVuY3Rpb24gcmVzZXRmZWN0b3IoKSB7Cgljb25zdCBteUVsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIi5hcGN0X3R5cGVfZGl2Iik7CglteUVsZS5mb3JFYWNoKChtZSwgaSkgPT4gewoJCWlmIChpID49IDEpIHsKCQkJY29uc3QgdGdlbGUgPSBtZS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJhcGN0X3R5cGVfbGFibGUiKVswXTsKCQkJaWYgKHRnZWxlKSB7CgkJCQl0Z2VsZS5pbm5lckhUTUwgPSBwYWdlSW5mb1tpIC0gMV07CgkJCX0KCgkJCWNvbnN0IHRnZWxlRmUgPSBtZS5xdWVyeVNlbGVjdG9yQWxsKCJzZWxlY3QiKVswXTsKCQkJaWYgKHRnZWxlRmUpIHsKCQkJCXRnZWxlRmUuc2V0QXR0cmlidXRlKCJpZCIsIGBhcHBsaWNhbnRfJHtpICsgMX1gKTsKCQkJfQoKCQkJaWYgKGkgPT09IG15RWxlLmxlbmd0aCAtIDEpIHsKCQkJCWNvbnN0IHBsbWVsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwoJCQkJcGxtZWxlLnNldEF0dHJpYnV0ZSgiY2xhc3MiLCAicGxtZmxleF9pY29uIik7CgoJCQkJY29uc3QgcGx1c0ljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIik7CgkJCQlwbHVzSWNvbi5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgIm15X3R5cGVfcGx1cyIpOwoJCQkJcGx1c0ljb24uaW5uZXJIVE1MID0gIisiOwoJCQkJY29uc3QgdGdjaGlsZCA9IG1lLmNoaWxkTm9kZXM7CgkJCQl0Z2NoaWxkWzJdLnJlbW92ZSgpOwoKCQkJCWNvbnN0IGFwcF9sZGV0ID0gc2NoZW1hWyJmaXJzdC1wYWdlIl1bImFwcGxpY2FudF9kZXRhaWxzIl07CgkJCQlpZiAoaSA+IGFwcF9sZGV0Lmxlbmd0aCAtIDEpIHsKCQkJCQljb25zdCBtaW5JY29ubGFzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKTsKCQkJCQltaW5JY29ubGFzdC5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgIm15X3R5cGVfbWludXMiKTsKCQkJCQltaW5JY29ubGFzdC5pbm5lckhUTUwgPSAiLSI7CgoJCQkJCW1pbkljb25sYXN0Lm9uY2xpY2sgPSBmdW5jdGlvbiAoZSkgewoJCQkJCQljb25zdCByZW1vdmVFbGUgPSBoYXNTb21lUGFyZW50VGhlQ2xhc3MoZS50YXJnZXQsICJhcGN0X3R5cGVfZGl2Iik7CgkJCQkJCXJlbW92ZUVsZS5yZW1vdmUoKTsKCQkJCQkJcmVzZXRmZWN0b3IoKTsKCQkJCQl9OwoJCQkJCXBsbWVsZS5hcHBlbmRDaGlsZChtaW5JY29ubGFzdCk7CgkJCQl9CgoJCQkJcGxtZWxlLmFwcGVuZENoaWxkKHBsdXNJY29uKTsKCQkJCW1lLmFwcGVuZChwbG1lbGUpOwoJCQkJQXBwUGx1c2FwcGxpY2FudChwbHVzSWNvbiwgbXlFbGUubGVuZ3RoKTsKCQkJfQoJCX0gZWxzZSB7CgkJCWlmIChpID09PSBteUVsZS5sZW5ndGggLSAxKSB7CgkJCQljb25zdCBwbG1lbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCQkJCXBsbWVsZS5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgInBsbWZsZXhfaWNvbiIpOwoKCQkJCWNvbnN0IHBsdXNJY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpOwoJCQkJcGx1c0ljb24uc2V0QXR0cmlidXRlKCJjbGFzcyIsICJteV90eXBlX3BsdXMiKTsKCQkJCXBsdXNJY29uLmlubmVySFRNTCA9ICIrIjsKCQkJCWNvbnN0IHRnY2hpbGQgPSBtZS5jaGlsZE5vZGVzOwoJCQkJdGdjaGlsZFsyXS5yZW1vdmUoKTsKCgkJCQlwbG1lbGUuYXBwZW5kQ2hpbGQocGx1c0ljb24pOwoJCQkJbWUuYXBwZW5kKHBsbWVsZSk7CgkJCQlBcHBQbHVzYXBwbGljYW50KHBsdXNJY29uLCBteUVsZS5sZW5ndGgpOwoJCQl9CgkJfQoJfSk7Cn0KCmZ1bmN0aW9uIHZlcmlmeU1pblJlcShlbGVtZW50KSB7Cgljb25zdCBteUVsZSA9IGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgiLmZpbGV1cGxvYWRfY29udGlhbmVyIik7CglsZXQgaXNWYWxpZCA9IHRydWU7Cglmb3IgKGxldCBpID0gMDsgaSA8IG15RWxlLmxlbmd0aDsgaSsrKSB7CgkJY29uc3QgbXljb3VudCA9IG15RWxlW2ldLnF1ZXJ5U2VsZWN0b3JBbGwoIi5maWxlLXVwbG9hZCIpLmxlbmd0aDsKCQljb25zdCBpc3RhcmdldCA9IG15RWxlW2ldLnF1ZXJ5U2VsZWN0b3IoIi5maWxldXBfdmFsaWRhdGlvbiIpOwoJCWlmIChpc3RhcmdldCkgewoJCQlpc3RhcmdldC5yZW1vdmUoKTsKCQl9CgkJaWYgKG15Y291bnQgPCAyKSB7CgkJCWNvbnN0IGNyZWF0ZVZhbGlkYXRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJwIik7CgkJCWNyZWF0ZVZhbGlkYXRpb24uY2xhc3NMaXN0LmFkZCgiZmlsZXVwX3ZhbGlkYXRpb24iKTsKCQkJY3JlYXRlVmFsaWRhdGlvbi5pbm5lckhUTUwgPSAiQXQgbGVhc3Qgb25lIG90aGVyIGRvY3VtZW50IHJlcXVpcmVkIjsKCQkJbXlFbGVbaV0uYXBwZW5kKGNyZWF0ZVZhbGlkYXRpb24pOwoJCQlzZXRUaW1lb3V0KCgpID0+IHsKCQkJCWNyZWF0ZVZhbGlkYXRpb24ucmVtb3ZlKCk7CgkJCX0sIDUwMDApOwoJCQlpc1ZhbGlkID0gZmFsc2U7CgkJfQoJfQoJcmV0dXJuIGlzVmFsaWQ7Cn0KCmZ1bmN0aW9uIHNhbWVhc1ByaW1hcnkoY2hlY2tlZCwgbXlpZCkgewoJY29uc3QgYWRkcmVzc1ZhbHVlID0ge307Cgljb25zdCBhcHBsaWNhbnRfZGV0YWlsc2NvbHMgPSBzY2hlbWFbImFwcGxpY2FudC1kZXRhaWxzIl1bInN1Yi1zZWN0aW9ucyJdOwoKCWlmIChjaGVja2VkKSB7CgkJZm9yIChsZXQgaSA9IDA7IGkgPCBhcHBsaWNhbnRfZGV0YWlsc2NvbHMubGVuZ3RoOyBpKyspIHsKCQkJaWYgKGFwcGxpY2FudF9kZXRhaWxzY29sc1tpXS5BcHBsaWNhbnRfUG9zaXRpb24gPT09ICJBMSIpIHsKCQkJCWNvbnN0IGZvcm1lbCA9IGFwcGxpY2FudF9kZXRhaWxzY29sc1tpXQoJCQkJCT8gYXBwbGljYW50X2RldGFpbHNjb2xzW2ldLmZvcm0KCQkJCQk6IFtdOwoKCQkJCWZvcm1lbC5mb3JFYWNoKChmbCkgPT4gewoJCQkJCWlmIChmbC5pZCkgewoJCQkJCQlpZiAoIWZsLmlkLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoInNoaXBwaW5nIikpIHsKCQkJCQkJCWlmIChhZGRyZXNzRmllbGQoZmwubGFiZWwpKSB7CgkJCQkJCQkJY29uc3QgZWx2YWx1ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGZsLmlkKS52YWx1ZTsKCQkJCQkJCQljb25zdCBrZXkgPSBmbC5sYWJlbC5yZXBsYWNlQWxsKCIgIiwgIiIpLnRvTG93ZXJDYXNlKCk7CgkJCQkJCQkJYWRkcmVzc1ZhbHVlW2tleV0gPSBlbHZhbHVlOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfQoJCQkJfSk7CgkJCX0KCQl9Cgl9CgoJZm9yIChsZXQgaSA9IDA7IGkgPCBhcHBsaWNhbnRfZGV0YWlsc2NvbHMubGVuZ3RoOyBpKyspIHsKCQlpZiAoYXBwbGljYW50X2RldGFpbHNjb2xzW2ldLkFwcGxpY2FudF9Qb3NpdGlvbiA9PSBhYXBwbGljYXRuRmllbGQobXlpZCkpIHsKCQkJY29uc3QgZm9ybWVsID0gYXBwbGljYW50X2RldGFpbHNjb2xzW2ldCgkJCQk/IGFwcGxpY2FudF9kZXRhaWxzY29sc1tpXS5mb3JtCgkJCQk6IFtdOwoKCQkJZm9ybWVsLmZvckVhY2goKGZsKSA9PiB7CgkJCQlpZiAoZmwuaWQgJiYgZmwuZGlzYWJsZWQgIT0gInRydWUiKSB7CgkJCQkJY29uc3QgcG9zdFZhbCA9IGZsLmxhYmVsID8gZmwubGFiZWwgOiBmbC50ZXh0OwoJCQkJCWlmIChhZGRyZXNzRmllbGQocG9zdFZhbCkpIHsKCQkJCQkJY29uc3QgdGdlbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChmbC5pZCk7CgkJCQkJCWNvbnN0IHBydGFyZ2V0ID0gaGFzU29tZVBhcmVudFRoZUNsYXNzKHRnZWxlLCAiaW5wdXRDdG4iKTsKCQkJCQkJaWYgKGNoZWNrZWQpIHsKCQkJCQkJCWlmICghZmwuaWQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygic2hpcHBpbmciKSkgewoJCQkJCQkJCWlmIChhZGRyZXNzRmllbGQoZmwubGFiZWwpKSB7CgkJCQkJCQkJCWNvbnN0IGtleSA9IGZsLmxhYmVsLnJlcGxhY2VBbGwoIiAiLCAiIikudG9Mb3dlckNhc2UoKTsKCQkJCQkJCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZmwuaWQpLnZhbHVlID0gYWRkcmVzc1ZhbHVlW2tleV07CgkJCQkJCQkJfQoJCQkJCQkJfQoKCQkJCQkJCXRnZWxlLnNldEF0dHJpYnV0ZSgiZGlzYWJsZWQiLCB0cnVlKTsKCQkJCQkJCXRnZWxlLmNsYXNzTGlzdC5hZGQoIm5vbmFwX2Rpc2FibGVkIik7CgkJCQkJCQlpZiAocHJ0YXJnZXQpIHsKCQkJCQkJCQlwcnRhcmdldC5jbGFzc0xpc3QuYWRkKCJoaWRkZW4iKTsKCQkJCQkJCX0KCQkJCQkJfSBlbHNlIHsKCQkJCQkJCWlmICghZmwuaWQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygic2hpcHBpbmciKSkgewoJCQkJCQkJCWlmIChhZGRyZXNzRmllbGQoZmwubGFiZWwpKSB7CgkJCQkJCQkJCWNvbnN0IGlucEVsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGZsLmlkKTsKCQkJCQkJCQkJaW5wRWxlLnZhbHVlID0gIiI7CgkJCQkJCQkJCWNvbnN0IHBhcmVudEVsZSA9IGhhc1NvbWVQYXJlbnRUaGVDbGFzcyhpbnBFbGUsICJpbnB1dEN0biIpOwoJCQkJCQkJCQlpZiAocGFyZW50RWxlKSB7CgkJCQkJCQkJCQlwYXJlbnRFbGUucXVlcnlTZWxlY3RvcigibGFiZWwiKS5jbGFzc0xpc3QuYWRkKCJoaWRkZW4iKTsKCQkJCQkJCQkJfQoJCQkJCQkJCX0KCQkJCQkJCX0KCQkJCQkJCWlmICh0Z2VsZS5jaGVja2VkKSB7CgkJCQkJCQkJdGdlbGUuY2hlY2tlZCA9IGZhbHNlOwoJCQkJCQkJfQoJCQkJCQkJdGdlbGUucmVtb3ZlQXR0cmlidXRlKCJkaXNhYmxlZCIpOwoJCQkJCQkJdGdlbGUuY2xhc3NMaXN0LnJlbW92ZSgibm9uYXBfZGlzYWJsZWQiKTsKCQkJCQkJCWlmIChwcnRhcmdldCkgewoJCQkJCQkJCXBydGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoImhpZGRlbiIpOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfQoJCQkJfQoJCQl9KTsKCQl9Cgl9Cn0KCmZ1bmN0aW9uIGZpbmFsU3VibWl0KCkgewoJY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKHNjaGVtYSk7Cgl2YXIgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoZm9ybSk7Cglmb3IgKGNvbnN0IGtleSBvZiBrZXlzKSB7CgkJaWYgKGtleSA9PT0gImlkZW50aWZpY2F0aW9uIikgewoJCQljb25zdCBteWNvbHMgPSBzY2hlbWFba2V5XVsiY29scyJdOwoJCQlteWNvbHMuZm9yRWFjaCgoY29scykgPT4gewoJCQkJY29uc3QgeyBwaG90b1BpY2tlciB9ID0gY29sczsKCgkJCQlpZiAocGhvdG9QaWNrZXIpIHsKCQkJCQljb25zdCB7IGlkLCBrZXkgfSA9IHBob3RvUGlja2VyOwoJCQkJCWNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7CgkJCQkJZm9ybURhdGEuYXBwZW5kKGtleSwgZWxlbWVudC5maWxlc1swXSk7CgkJCQl9CgkJCX0pOwoKCQkJY29uc3QgZmlsZXVwbG9hZEVsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIi5maWxlLXVwbG9hZCIpOwoJCQlmaWxldXBsb2FkRWxlLmZvckVhY2goKGNvbHMpID0+IHsKCQkJCWNvbnN0IHRnZWxlID0gY29scy5xdWVyeVNlbGVjdG9yKCJpbnB1dCIpOwoJCQkJZm9ybURhdGEuYXBwZW5kKHRnZWxlLmlkLCB0Z2VsZS5maWxlc1swXSk7CgkJCX0pOwoJCX0gZWxzZSB7CgkJCWNvbnN0IHBhZ2VTY2hlbWEgPSBzY2hlbWFba2V5XTsKCgkJCWlmIChwYWdlU2NoZW1hKSB7CgkJCQlpZiAocGFnZVNjaGVtYVsic3ViLXNlY3Rpb25zIl0pIHsKCQkJCQljb25zdCBteXN1YnNlYyA9IHBhZ2VTY2hlbWFbInN1Yi1zZWN0aW9ucyJdOwoJCQkJCW15c3Vic2VjLmZvckVhY2goKHN1YmMpID0+IHsKCQkJCQkJaWYgKHN1YmNbImZvcm0iXSkgewoJCQkJCQkJY29uc3Qgc3ViZm9ybSA9IHN1YmNbImZvcm0iXTsKCQkJCQkJCWZvcm1EYXRhID0gYWRkRm9ybVZhbHVlcyhzdWJmb3JtLCBmb3JtRGF0YSk7CgkJCQkJCX0KCQkJCQl9KTsKCQkJCX0KCgkJCQlpZiAocGFnZVNjaGVtYVsiZm9ybSJdKSB7CgkJCQkJY29uc3QgbWFpbmZvcm0gPSBwYWdlU2NoZW1hWyJmb3JtIl07CgkJCQkJZm9ybURhdGEgPSBhZGRGb3JtVmFsdWVzKG1haW5mb3JtLCBmb3JtRGF0YSk7CgkJCQl9CgkJCX0KCQl9Cgl9CgoJY29uc3QgZXNnRWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiLmVzaWduX21haW5jb250YWluZXIgc2VsZWN0Iik7CglpZiAoZXNnRWxlKSB7CgkJZXNnRWxlLmZvckVhY2goKGVnZCkgPT4gewoJCQlmb3JtRGF0YS5hcHBlbmQoZWdkLmlkLCBlZ2QudmFsdWUpOwoJCX0pOwoJfQoKCWlmIChpZ25vcmVEb2MubGVuZ3RoID4gMCkgewoJCWlnbm9yZURvYy5mb3JFYWNoKChpZykgPT4gewoJCQlmb3JtRGF0YS5hcHBlbmQoaWcubmFtZSwgaWcudmFsdWUpOwoJCX0pOwoJfQoKCXJldHVybiBmb3JtRGF0YTsKfQoKZnVuY3Rpb24gZmFjdG9yQ2RBZGRyZXNzKHR5cGUsIGNoZWNrZWQpIHsKCWNvbnN0IGFwcGxpY2FudF9kZXRhaWxzY29scyA9IHNjaGVtYVsiYXBwbGljYW50LWRldGFpbHMiXVsic3ViLXNlY3Rpb25zIl07Cgljb25zdCBhZGRyZXNzVmFsdWUgPSB7fTsKCglpZiAoY2hlY2tlZCkgewoJCWZvciAobGV0IGkgPSAwOyBpIDwgYXBwbGljYW50X2RldGFpbHNjb2xzLmxlbmd0aDsgaSsrKSB7CgkJCWlmIChhcHBsaWNhbnRfZGV0YWlsc2NvbHNbaV0uQXBwbGljYW50X1Bvc2l0aW9uID09PSAiQTEiKSB7CgkJCQljb25zdCBmb3JtZWwgPSBhcHBsaWNhbnRfZGV0YWlsc2NvbHNbaV0KCQkJCQk/IGFwcGxpY2FudF9kZXRhaWxzY29sc1tpXS5mb3JtCgkJCQkJOiBbXTsKCgkJCQlmb3JtZWwuZm9yRWFjaCgoZmwpID0+IHsKCQkJCQlpZiAoZmwuaWQpIHsKCQkJCQkJaWYgKCFmbC5pZC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCJzaGlwcGluZyIpKSB7CgkJCQkJCQlpZiAoYWRkcmVzc0ZpZWxkKGZsLmxhYmVsKSkgewoJCQkJCQkJCWNvbnN0IGVsdmFsdWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChmbC5pZCkudmFsdWU7CgkJCQkJCQkJY29uc3Qga2V5ID0gZmwubGFiZWwucmVwbGFjZUFsbCgiICIsICIiKS50b0xvd2VyQ2FzZSgpOwoJCQkJCQkJCWFkZHJlc3NWYWx1ZVtrZXldID0gZWx2YWx1ZTsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0KCQkJCX0pOwoJCQl9CgkJfQoJfQoKCWZvciAobGV0IGkgPSAwOyBpIDwgYXBwbGljYW50X2RldGFpbHNjb2xzLmxlbmd0aDsgaSsrKSB7CgkJaWYgKGFwcGxpY2FudF9kZXRhaWxzY29sc1tpXS5BcHBsaWNhbnRfUG9zaXRpb24gPT0gdHlwZSkgewoJCQljb25zdCBmb3JtZWwgPSBhcHBsaWNhbnRfZGV0YWlsc2NvbHNbaV0KCQkJCT8gYXBwbGljYW50X2RldGFpbHNjb2xzW2ldLmZvcm0KCQkJCTogW107CgoJCQlmb3JtZWwuZm9yRWFjaCgoZmwpID0+IHsKCQkJCWlmIChmbC5pZCAmJiBmbC5kaXNhYmxlZCAhPSAidHJ1ZSIpIHsKCQkJCQlpZiAoZmwuaWQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygic2hpcHBpbmciKSkgewoJCQkJCQlpZiAoYWRkcmVzc0ZpZWxkKGZsLmxhYmVsKSkgewoJCQkJCQkJY29uc3QgbXllbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChmbC5pZCk7CgkJCQkJCQljb25zdCBteXBhcmVudCA9IGhhc1NvbWVQYXJlbnRUaGVDbGFzcyhteWVsZSwgImlucHV0Q3RuIik7CgkJCQkJCQlpZiAoY2hlY2tlZCkgewoJCQkJCQkJCWlmIChmbC5pZC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCJzaGlwcGluZyIpKSB7CgkJCQkJCQkJCWlmIChhZGRyZXNzRmllbGQoZmwubGFiZWwpKSB7CgkJCQkJCQkJCQljb25zdCBrZXkgPSBmbC5sYWJlbC5yZXBsYWNlQWxsKCIgIiwgIiIpLnRvTG93ZXJDYXNlKCk7CgkJCQkJCQkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZChmbC5pZCkudmFsdWUgPSBhZGRyZXNzVmFsdWVba2V5XTsKCQkJCQkJCQkJfQoJCQkJCQkJCX0KCgkJCQkJCQkJbXllbGUuc2V0QXR0cmlidXRlKCJkaXNhYmxlZCIsIHRydWUpOwoJCQkJCQkJCW15ZWxlLmNsYXNzTGlzdC5hZGQoIm5vbmFwX2Rpc2FibGVkIik7CgkJCQkJCQkJbXlwYXJlbnQuY2xhc3NMaXN0LmFkZCgiaGlkZGVuIik7CgkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCWlmIChmbC5pZC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCJzaGlwcGluZyIpKSB7CgkJCQkJCQkJCWlmIChhZGRyZXNzRmllbGQoZmwubGFiZWwpKSB7CgkJCQkJCQkJCQljb25zdCBpbnBFbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChmbC5pZCk7CgkJCQkJCQkJCQlpbnBFbGUudmFsdWUgPSAiIjsKCQkJCQkJCQkJCWNvbnN0IHBhcmVudEVsZSA9IGhhc1NvbWVQYXJlbnRUaGVDbGFzcyhpbnBFbGUsICJpbnB1dEN0biIpOwoJCQkJCQkJCQkJaWYgKHBhcmVudEVsZSkgewoJCQkJCQkJCQkJCXBhcmVudEVsZS5xdWVyeVNlbGVjdG9yKCJsYWJlbCIpLmNsYXNzTGlzdC5hZGQoImhpZGRlbiIpOwoJCQkJCQkJCQkJfQoJCQkJCQkJCQl9CgkJCQkJCQkJfQoKCQkJCQkJCQlteWVsZS5yZW1vdmVBdHRyaWJ1dGUoImRpc2FibGVkIik7CgkJCQkJCQkJbXllbGUuY2xhc3NMaXN0LnJlbW92ZSgibm9uYXBfZGlzYWJsZWQiKTsKCQkJCQkJCQlteXBhcmVudC5jbGFzc0xpc3QucmVtb3ZlKCJoaWRkZW4iKTsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJfSk7CgkJfQoJfQp9CgpmdW5jdGlvbiBhZGRGb3JtVmFsdWVzKGZvcm0sIHZhbHVlKSB7Cgljb25zdCBhcHJpdmFsID0gdmFsdWU7Cglmb3JtLmZvckVhY2goKGZ2KSA9PiB7CgkJaWYgKGZ2LmRpc2FibGVkICE9ICJ0cnVlIikgewoJCQlpZiAoZnYua2V5IHx8IGZ2LmlkKSB7CgkJCQlpZiAoZnYudHlwZSA9PT0gImNoZWNrYm94IikgewoJCQkJCWNvbnN0IG15dmFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoZnYua2V5KTsKCQkJCQlpZiAobXl2YWwubGVuZ3RoKSB7CgkJCQkJCWFwcml2YWwuYXBwZW5kKGZ2LmtleSwgbXl2YWxbMF0uY2hlY2tlZCk7CgkJCQkJfQoJCQkJfSBlbHNlIGlmIChmdi50eXBlID09PSAicmFkaW8iKSB7CgkJCQkJY29uc3QgbXl2YWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChmdi5pZCk7CgkJCQkJaWYgKG15dmFsLmxlbmd0aCkgewoJCQkJCQljb25zdCByYWRpb0J0biA9IG15dmFsLnF1ZXJ5U2VsZWN0b3JBbGwoImlucHV0Iik7CgkJCQkJCXJhZGlvQnRuLmZvckVhY2goKHJiKSA9PiB7CgkJCQkJCQlpZiAocmIuY2hlY2tlZCkgewoJCQkJCQkJCWFwcml2YWwuYXBwZW5kKGZ2LmtleSwgcmIuY2hlY2tlZCk7CgkJCQkJCQl9CgkJCQkJCX0pOwoJCQkJCX0KCQkJCX0gZWxzZSB7CgkJCQkJaWYgKGZ2LnR5cGUgIT09ICJ0ZXh0IikgewoJCQkJCQljb25zdCBteXZhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKGZ2LmtleSk7CgkJCQkJCWlmIChteXZhbC5sZW5ndGgpIHsKCQkJCQkJCWFwcml2YWwuYXBwZW5kKGZ2LmtleSwgbXl2YWxbMF0udmFsdWUpOwoJCQkJCQl9CgkJCQkJfQoJCQkJfQoJCQl9CgkJfQoJfSk7CglyZXR1cm4gdmFsdWU7Cn0KCmZ1bmN0aW9uIHNibWl0RGF0YShpc1NpZ25lZCkgewoJY29uc3QgdGdFbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZXNpZ25zdGF1cyIpOwoJdGdFbGUudmFsdWUgPSBpc1NpZ25lZCA/ICJ0cnVlIiA6ICJmYWxzZSI7Cn0KCmZ1bmN0aW9uIGZpbmFsU2F2ZSgpIHsKCXNpZ25Nb2RhbC5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwoJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRlcicpLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGVMb2FkZXInKTsKCWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoImlucHV0LCB0ZXh0YXJlYSwgc2VsZWN0IikuZm9yRWFjaCgoZSkgPT4gewoJCWUucmVtb3ZlQXR0cmlidXRlKCJkaXNhYmxlZCIpOwoJfSk7CglmaWxscGRmQ29udGVudChmYWxzZSkudGhlbigocmVzKSA9PiB7CgkJLy8gZG8gbm90aGluZwoJfSkKCQkuY2F0Y2goZXJyID0+IHsKCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRlcicpLmNsYXNzTGlzdC5hZGQoJ2hpZGVMb2FkZXInKTsKCQkJYWxlcnQoZXJyKTsKCQkJcmV0dXJuOwoJCX0pCn0KCmZ1bmN0aW9uIG9ubG9hZHdpbigpIHsKCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJGaWVsZF8xbzF1Zm9wIikudmFsdWUgPQoJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJBMV9JbmRpdmlkdWFsX1BhcnR5X2ZpcnN0bmFtZV8xIikudmFsdWUgKwoJCSIgIiArCgkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIkExX0luZGl2aWR1YWxfUGFydHlfbGFzdG5hbWVfMSIpLnZhbHVlOwoJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIkZpZWxkXzE4djh2ZHoiKS52YWx1ZSA9CgkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIkExX0luZGl2aWR1YWxfSG91c2VfTnVtYmVyX19jIikudmFsdWUgKwoJCSIgIiArCgkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIkExX0J1aWxkaW5nX05hbWVfX2MiKS52YWx1ZSArCgkJIiAiICsKCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiQTFfUGVybWFuZW50X0xvY2FsaXR5X19jIikudmFsdWUgKwoJCSIgIiArCgkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIkExX0JpbGxpbmdTdHJlZXQiKS52YWx1ZSArCgkJIiAiICsKCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiQTFfQmlsbGluZ0NpdHkiKS52YWx1ZSArCgkJIiAiICsKCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiQTFfQmlsbGluZ1Bvc3RhbENvZGUiKS52YWx1ZSArCgkJIiAiICsKCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiQTFfQmlsbGluZ1N0YXRlIikudmFsdWUgKwoJCSIgIiArCgkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIkExX0JpbGxpbmdDb3VudHJ5IikudmFsdWU7Cn0KCmZ1bmN0aW9uIHZlcmlmeU15VmFsdWVzKHZhbCkgewoJY29uc3QgbXlIZWFkZXJzID0gbmV3IEhlYWRlcnMoKTsKCW15SGVhZGVycy5hcHBlbmQoIkNvbnRlbnQtVHlwZSIsICJhcHBsaWNhdGlvbi9qc29uIik7CgoJY29uc3Qgc2VjRGF0YSA9IEpTT04uc3RyaW5naWZ5KHsKCQlxdWVyeTogewoJCQlib29sOiB7CgkJCQlzaG91bGQ6IFt7IG1hdGNoOiB7ICJ1c2VyLm5hbWUiOiB2YWwgPyB2YWwudHJpbSgpIDogIiIgfSB9XSwKCQkJfSwKCQl9LAoJfSk7CgoJY29uc3QgcmVxdWVzdE9wdGlvbnMyID0gewoJCW1ldGhvZDogIlBPU1QiLAoJCWJvZHk6IHNlY0RhdGEsCgkJaGVhZGVyczogbXlIZWFkZXJzLAoJCXJlZGlyZWN0OiAiZm9sbG93IiwKCX07CgoJcmV0dXJuIGZldGNoKG5hbWVBcGksIHJlcXVlc3RPcHRpb25zMikKCQkudGhlbigocmVzcG8pID0+IHJlc3BvLmpzb24oKSkKCQkudGhlbigocmVzcG8pID0+IHsKCQkJaWYgKHJlc3BvKSB7CgkJCQljb25zdCBteWhpdHMgPSByZXNwby5oaXRzOwoJCQkJY29uc3QgU2NvcmUgPSBteWhpdHMubWF4X3Njb3JlOwoJCQkJaWYgKFNjb3JlICYmIFNjb3JlICogMTAwID49IFRocmVzaG9sZFNjb3JlKSB7CgkJCQkJY29uc3QgbXlUb3RhbE1hdGNoZWQgPSBteWhpdHMudG90YWw7CgkJCQkJaWYgKG15VG90YWxNYXRjaGVkICYmIG15VG90YWxNYXRjaGVkLnZhbHVlID4gMCkgewoJCQkJCQlyZXR1cm4gdHJ1ZTsKCQkJCQl9CgkJCQl9CgkJCX0KCQkJcmV0dXJuIGZhbHNlOwoJCX0pCgkJLmNhdGNoKCgpID0+IHsKCQkJcmV0dXJuIGZhbHNlOwoJCX0pOwp9CgpmdW5jdGlvbiBzZWFyY2hVcGxvYWQoaW1nTmFtZSkgewoJY29uc3QgbXlIZWFkZXJzID0gbmV3IEhlYWRlcnMoKTsKCW15SGVhZGVycy5hcHBlbmQoIkNvbnRlbnQtVHlwZSIsICJhcHBsaWNhdGlvbi9qc29uIik7CgoJY29uc3QgZmlyRGF0YSA9IEpTT04uc3RyaW5naWZ5KHsKCQlncm91cDogInVzZXJzIiwKCQl1c2VyOiBbCgkJCXsKCQkJCW5hbWU6IGltZ05hbWUsCgkJCX0sCgkJXSwKCX0pOwoKCWNvbnN0IHJlcXVlc3RPcHRpb25zMSA9IHsKCQltZXRob2Q6ICJQT1NUIiwKCQlib2R5OiBmaXJEYXRhLAoJCWhlYWRlcnM6IG15SGVhZGVycywKCQlyZWRpcmVjdDogImZvbGxvdyIsCgl9OwoKCXJldHVybiBmZXRjaChzZWFyY2hBcGksIHJlcXVlc3RPcHRpb25zMSkKCQkudGhlbigocmVzcCkgPT4gcmVzcC5qc29uKCkpCgkJLnRoZW4oKHJlc3ApID0+IHsKCQkJcmV0dXJuIHRydWU7CgkJfSkKCQkuY2F0Y2goKGVycikgPT4gewoJCQlyZXR1cm4gZmFsc2U7CgkJfSk7Cn0KCmZ1bmN0aW9uIGNhbGN1bGF0ZVNpemUoaW1nLCBtYXhXaWR0aCwgbWF4SGVpZ2h0KSB7CglsZXQgd2lkdGggPSBpbWcud2lkdGg7CglsZXQgaGVpZ2h0ID0gaW1nLmhlaWdodDsKCglpZiAod2lkdGggPiBoZWlnaHQpIHsKCQlpZiAod2lkdGggPiBtYXhXaWR0aCkgewoJCQloZWlnaHQgPSBNYXRoLnJvdW5kKChoZWlnaHQgKiBtYXhXaWR0aCkgLyB3aWR0aCk7CgkJCXdpZHRoID0gbWF4V2lkdGg7CgkJfQoJfSBlbHNlIHsKCQlpZiAoaGVpZ2h0ID4gbWF4SGVpZ2h0KSB7CgkJCXdpZHRoID0gTWF0aC5yb3VuZCgod2lkdGggKiBtYXhIZWlnaHQpIC8gaGVpZ2h0KTsKCQkJaGVpZ2h0ID0gbWF4SGVpZ2h0OwoJCX0KCX0KCXJldHVybiBbd2lkdGgsIGhlaWdodF07Cn0KCgoKZnVuY3Rpb24gY29tcHJlc3NJbWFnZShteUZpbGVVUkwsIGV2ZW50LCBpbWFnZUJsb2IgPSAnJywgaGFzRXZlbnQgPSB0cnVlLCBkYXRhRmlsZSA9ICcnKSB7CgoKCS8vIGNvbnN0IE1BWF9XSURUSCA9IDk2MDsKCS8vIGNvbnN0IE1BWF9IRUlHSFQgPSA1NDA7CgoJY29uc3QgTUFYX1dJRFRIID0gMTkwMDsKCWNvbnN0IE1BWF9IRUlHSFQgPSAxMDY4OwoJLy8gY29uc3QgTUlNRV9UWVBFID0gImltYWdlL2pwZWciOwoJLy8gY29uc3QgUVVBTElUWSA9IDEuMDsKCgljb25zdCBteVByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CgoJCS8vIC8vIE9sZCBjb21wcmVzc2lvbiBMb2dpYwoJCS8vIGNvbnN0IGltZyA9IG5ldyBJbWFnZSgpOwoJCS8vIGltZy5zcmMgPSBteUZpbGVVUkw7CgkJLy8gaW1nLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7CgkJLy8gCVVSTC5yZXZva2VPYmplY3RVUkwodGhpcy5zcmMpOwoJCS8vIAlyZWplY3QoZmFsc2UpOwoJCS8vIH07CgoJCS8vIGltZy5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7CgkJLy8gCVVSTC5yZXZva2VPYmplY3RVUkwodGhpcy5zcmMpOwoKCQkvLyAJY29uc3QgW25ld1dpZHRoLCBuZXdIZWlnaHRdID0gY2FsY3VsYXRlU2l6ZShpbWcsIGltZy53aWR0aCwgaW1nLmhlaWdodCk7CgkJLy8gY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIik7CgkJLy8gY2FudmFzLndpZHRoID0gbmV3V2lkdGg7CgkJLy8gY2FudmFzLmhlaWdodCA9IG5ld0hlaWdodDsKCQkvLyBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgiMmQiKTsKCQkvLyAJY3R4LmRyYXdJbWFnZShpbWcsIDAsIDAsIG5ld1dpZHRoLCBuZXdIZWlnaHQpOwoJCS8vIAljYW52YXMudG9CbG9iKAoJCS8vIAkJKGJsb2IpID0+IHsKCQkvLyAJCQljb25zb2xlLmxvZyhibG9iKTsKCQkvLyAJCQlyZXNvbHZlKGJsb2IpOwoKCQkvLyAJCX0sCgkJLy8gCQlNSU1FX1RZUEUsCgkJLy8gCQlRVUFMSVRZCgkJLy8gCSk7CgoJCS8vIH07CgoJCS8vIC8vIE9sZCBjb21wcmVzc2lvbiBMb2dpYyBFbmRzIGhlcmUKCgoKCQkvLyBOZXcgQ29tcHJlc3Npb24gTG9naWMKCgkJY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIik7CgkJY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoIjJkIik7CgkJbGV0IGZpbGUgPSAnJzsKCgkJaWYgKGhhc0V2ZW50KSB7CgkJCWZpbGUgPSBldmVudC50YXJnZXQuZmlsZXNbMF07CgkJfQoJCWVsc2UgewoJCQlmaWxlID0gZGF0YUZpbGU7CgkJfQoKCQljb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwoKCgkJLy8gaW1hZ2Uuc3JjID0gbXlGaWxlVVJMOwoJCS8vIGltYWdlLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7CgkJLy8gCVVSTC5yZXZva2VPYmplY3RVUkwodGhpcy5zcmMpOwoJCS8vIAlyZWplY3QoZmFsc2UpOwoJCS8vIH07CgkJdHJ5IHsKCQkJcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uIChldmVudCkgewoJCQkJY29uc3QgaW1hZ2UgPSBuZXcgSW1hZ2UoKTsKCgoJCQkJaW1hZ2Uub25sb2FkID0gZnVuY3Rpb24gKCkgewoKCQkJCQljb25zdCB7IHdpZHRoLCBoZWlnaHQgfSA9IGNhbGN1bGF0ZU5ld1NpemUoaW1hZ2UsIE1BWF9XSURUSCwgTUFYX0hFSUdIVCk7IC8vIERlc2lyZWQgd2lkdGggYW5kIGhlaWdodAoJCQkJCWNhbnZhcy53aWR0aCA9IHdpZHRoOwoJCQkJCWNhbnZhcy5oZWlnaHQgPSBoZWlnaHQ7CgkJCQkJY3R4LmRyYXdJbWFnZShpbWFnZSwgMCwgMCwgd2lkdGgsIGhlaWdodCk7CgoJCQkJCXJlc2l6ZWRJbWFnZUJsb2IgPSBkYXRhVVJMVG9CbG9iKGNhbnZhcy50b0RhdGFVUkwoZmlsZS50eXBlKSk7CgkJCQkJLy8gY29uc29sZS5sb2coY2FudmFzLnRvRGF0YVVSTChmaWxlLnR5cGUpKTsKCQkJCQlyZXNvbHZlKHJlc2l6ZWRJbWFnZUJsb2IpOwoKCQkJCX07CgkJCQlpbWFnZS5zcmMgPSBldmVudC50YXJnZXQucmVzdWx0OwoJCQl9OwoKCQkJaWYgKGltYWdlQmxvYiAhPSAnJykgewoJCQkJcmVhZGVyLnJlYWRBc0RhdGFVUkwoaW1hZ2VCbG9iKTsKCQkJfQoJCQllbHNlIHsKCQkJCXJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpOwoJCQl9CgkJfQoJCWNhdGNoIChlcnIpIHsKCQkJY29uc29sZS5sb2coZXJyKTsKCQl9Cgl9KTsKCglyZXR1cm4gbXlQcm9taXNlOwp9CgpmdW5jdGlvbiBjYWxjdWxhdGVOZXdTaXplKGltYWdlLCBtYXhXaWR0aCwgbWF4SGVpZ2h0KSB7CglsZXQgd2lkdGggPSBpbWFnZS53aWR0aDsKCWxldCBoZWlnaHQgPSBpbWFnZS5oZWlnaHQ7CgoJaWYgKHdpZHRoID4gbWF4V2lkdGggfHwgaGVpZ2h0ID4gbWF4SGVpZ2h0KSB7CgkJY29uc3QgYXNwZWN0UmF0aW8gPSB3aWR0aCAvIGhlaWdodDsKCgkJaWYgKHdpZHRoID4gaGVpZ2h0KSB7CgkJCXdpZHRoID0gbWF4V2lkdGg7CgkJCWhlaWdodCA9IHdpZHRoIC8gYXNwZWN0UmF0aW87CgkJfSBlbHNlIHsKCQkJaGVpZ2h0ID0gbWF4SGVpZ2h0OwoJCQl3aWR0aCA9IGhlaWdodCAqIGFzcGVjdFJhdGlvOwoJCX0KCgoJCXJldHVybiB7IHdpZHRoLCBoZWlnaHQgfTsKCX0KCgkvLyBSZXR1cm4gZGVmYXVsdCB2YWx1ZXMgaWYgdGhlIGNvbmRpdGlvbnMgYXJlIG5vdCBtZXQKCXJldHVybiB7IHdpZHRoLCBoZWlnaHQgfTsKfQpmdW5jdGlvbiBkYXRhVVJMVG9CbG9iKGRhdGFVUkwpIHsKCWNvbnN0IGJ5dGVTdHJpbmcgPSBhdG9iKGRhdGFVUkwuc3BsaXQoJywnKVsxXSk7Cgljb25zdCBtaW1lU3RyaW5nID0gZGF0YVVSTC5zcGxpdCgnLCcpWzBdLnNwbGl0KCc6JylbMV0uc3BsaXQoJzsnKVswXTsKCWNvbnN0IGFycmF5QnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKGJ5dGVTdHJpbmcubGVuZ3RoKTsKCWNvbnN0IHVpbnQ4QXJyYXkgPSBuZXcgVWludDhBcnJheShhcnJheUJ1ZmZlcik7CgoJZm9yIChsZXQgaSA9IDA7IGkgPCBieXRlU3RyaW5nLmxlbmd0aDsgaSsrKSB7CgkJdWludDhBcnJheVtpXSA9IGJ5dGVTdHJpbmcuY2hhckNvZGVBdChpKTsKCX0KCglyZXR1cm4gbmV3IEJsb2IoW2FycmF5QnVmZmVyXSwgeyB0eXBlOiBtaW1lU3RyaW5nIH0pOwp9CgpmdW5jdGlvbiBjcmVhdGVGdW5jdGlvbkRhdGEoKSB7Cgl2YXIgUHJldmlld0RhdGEgPSB7CgkJYXBwbGljYW50czogW10sCgkJYm9va2luZ3NvdXJjZToge30sCgkJdW5pdGRldGFpbHM6IHt9LAoJCWJvb2tpbmdhbW91bnQ6IHt9LAoJCWFsbGFib3V0eW91OiB7fSwKCQlzZWxmZGVjbGFyYXRpb246ICIiLAoJCWd0bmNkZXRhaWw6IG51bGwsCgkJZmlyX2xvdDoge30sCgl9OwoKCWNvbnN0IHNjaEFyciA9IHNjaGVtYVsiYXBwbGljYW50LWRldGFpbHMiXVsic3ViLXNlY3Rpb25zIl07Cgljb25zdCBib29raW5nc291cmNlQXJyID0gc2NoZW1hWyJib29raW5nLXNvdXJjZSJdOwoJY29uc3QgYW5leHVyZUFyciA9IHNjaGVtYVsiYW5leHVyZS1hIl1bInN1Yi1zZWN0aW9ucyJdOwoJY29uc3QgZmlyX2xvdCA9IHNjaGVtYVsiZmlyc3QtcGFnZSJdWyJmb3JtIl07Cgljb25zdCBpb19hcHBpY2FudHMgPSBQcmV2aWV3RGF0YS5hcHBsaWNhbnRzOwoJY29uc3QgaW9fYm9va2luZ3NyYyA9IFByZXZpZXdEYXRhLmJvb2tpbmdzb3VyY2U7Cgljb25zdCBpb191bml0ZGV0YWlscyA9IFByZXZpZXdEYXRhLnVuaXRkZXRhaWxzOwoJY29uc3QgaW9fYm9va2luZ2Ftb3VudCA9IFByZXZpZXdEYXRhLmJvb2tpbmdhbW91bnQ7Cgljb25zdCBpb19hbGxhYm91dHlvdSA9IFByZXZpZXdEYXRhLmFsbGFib3V0eW91OwoJY29uc3QgZmlyX2xvdGRhdGEgPSBQcmV2aWV3RGF0YS5maXJfbG90OwoKCWZ1bmN0aW9uIHN1bmNyZWF0ZShmZGF0YSwgc2NkLCBpbmRleCkgewoJCWNvbnN0IG15c2NobWEgPSBteVByZXZpZXdEYXRhW2ZkYXRhXTsKCQlsZXQgc3VidmFsdWUgPSBbXTsKCQl2YXIgbXlhcnJheSA9IHsKCQkJcGFkZHJlc3M6IFtdLAoJCQljYWRkcmVzczogW10sCgkJfTsKCQlmb3IgKGxldCB4ID0gMDsgeCA8IG15c2NobWEubGVuZ3RoOyB4KyspIHsKCQkJY29uc3QgZm9ybSA9IHNjZFtpbmRleF0uZm9ybTsKCQkJaWYgKGZkYXRhID09PSAiYWRkcmVzcyIpIHsKCQkJCWZvcm0uZm9yRWFjaCgoZWxlbWVudCkgPT4gewoJCQkJCWlmIChteXNjaG1hW3hdID09PSBlbGVtZW50LmxhYmVsKSB7CgkJCQkJCWNvbnN0IG15ZWxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxlbWVudC5pZCk7CgkJCQkJCWlmIChteWVsZSkgewoJCQkJCQkJY29uc3QgZml2YWx1ZSA9IG15ZWxlLnZhbHVlOwoJCQkJCQkJaWYgKGZpdmFsdWUpIHsKCQkJCQkJCQlpZiAoIWVsZW1lbnQuaWQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygic2hpcHBpbmciKSkgewoJCQkJCQkJCQlteWFycmF5LnBhZGRyZXNzLnB1c2goZml2YWx1ZSk7CgkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJbXlhcnJheS5jYWRkcmVzcy5wdXNoKGZpdmFsdWUpOwoJCQkJCQkJCX0KCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0KCQkJCX0pOwoJCQl9IGVsc2UgewoJCQkJZm9ybS5mb3JFYWNoKChlbGVtZW50KSA9PiB7CgkJCQkJaWYgKG15c2NobWFbeF0gPT09IGVsZW1lbnQubGFiZWwpIHsKCQkJCQkJY29uc3QgbXllbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGVtZW50LmlkKTsKCQkJCQkJY29uc3QgZml2YWx1ZSA9IG15ZWxlLmNoZWNrZWQgPyBteWVsZS5jaGVja2VkIDogbXllbGUudmFsdWU7CgkJCQkJCWlmIChmaXZhbHVlICE9ICIiICYmIGZpdmFsdWUgIT0gdW5kZWZpbmVkKSB7CgkJCQkJCQlzdWJ2YWx1ZS5wdXNoKGZpdmFsdWUpOwoJCQkJCQl9CgkJCQkJfQoJCQkJfSk7CgkJCX0KCQl9CgkJaWYgKGZkYXRhID09PSAiYWRkcmVzcyIpIHsKCQkJcmV0dXJuIG15YXJyYXk7CgkJfQoJCXJldHVybiBzdWJ2YWx1ZTsKCX0KCglmb3IgKGxldCBpID0gMDsgaSA8IHNjaEFyci5sZW5ndGg7IGkrKykgewoJCWlmIChpID09PSBzY2hBcnIubGVuZ3RoIC0gMSkgewoJCQljb25zdCBhbGxhYm91dEZvcm0gPSBzY2hBcnJbaV0uZm9ybTsKCQkJYWxsYWJvdXRGb3JtLmZvckVhY2goKGVsZW1lbnQpID0+IHsKCQkJCWNvbnN0IG15ZWxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxlbWVudC5pZCk7CgkJCQlpZiAobXllbGUpIHsKCQkJCQlpZiAoZWxlbWVudC50eXBlID09PSAicmFkaW8iKSB7CgkJCQkJCWNvbnN0IHRnRWxlID0gbXllbGUucXVlcnlTZWxlY3RvckFsbCgiLmNoZWNrYm94LXJvdyBpbnB1dCIpOwoJCQkJCQl0Z0VsZS5mb3JFYWNoKCh0bCkgPT4gewoJCQkJCQkJaWYgKHRsLmNoZWNrZWQpIHsKCQkJCQkJCQlpb19hbGxhYm91dHlvdVsKCQkJCQkJCQkJZWxlbWVudC5sYWJlbC50cmltKCkudG9Mb3dlckNhc2UoKS5yZXBsYWNlQWxsKCIgIiwgIl8iKQoJCQkJCQkJCV0gPSB0bC52YWx1ZTsKCQkJCQkJCX0KCQkJCQkJfSk7CgkJCQkJfSBlbHNlIHsKCQkJCQkJaW9fYWxsYWJvdXR5b3VbCgkJCQkJCQllbGVtZW50LmxhYmVsLnRyaW0oKS50b0xvd2VyQ2FzZSgpLnJlcGxhY2VBbGwoIiAiLCAiXyIpCgkJCQkJCV0gPSBteWVsZS52YWx1ZTsKCQkJCQl9CgkJCQl9CgkJCX0pOwoJCX0gZWxzZSB7CgkJCWNvbnN0IGRldGlhbHMgPSB7CgkJCQl0eXBlOiBzY2hBcnJbaV0uQXBwbGljYW50X1Bvc2l0aW9uLAoJCQkJZGF0YToge30sCgkJCX07CgkJCWNvbnN0IGZpYXJyID0gT2JqZWN0LmtleXMobXlQcmV2aWV3RGF0YSk7CgkJCWZpYXJyLmZvckVhY2goKGZpYSkgPT4gewoJCQkJY29uc3QgZGF0YSA9IHN1bmNyZWF0ZShmaWEsIHNjaEFyciwgaSk7CgkJCQlpZiAoZmlhID09PSAibmFtZSIgfHwgZmlhID09PSAiYWRkaGFyX251bWJlciIgfHwgZmlhID09PSAicGFuX251bWJlciIpIHsKCQkJCQlkZXRpYWxzLmRhdGFbZmlhXSA9IGRhdGEuam9pbigiICIpOwoJCQkJfSBlbHNlIGlmIChmaWEgPT09ICJhZGRyZXNzIiB8fCBmaWEgPT09ICJlbWFpbCIgfHwgZmlhID09PSAicGhvbmUiKSB7CgkJCQkJaWYgKGZpYSA9PT0gImFkZHJlc3MiKSB7CgkJCQkJCWRldGlhbHMuZGF0YVsicGVybWFuZW50X2FkZHJlc3MiXSA9IGRhdGFbInBhZGRyZXNzIl0uam9pbigiLCAiKTsKCQkJCQkJZGV0aWFscy5kYXRhWyJjb3JyZXNwb25kZW5jZV9hZGRyZXNzIl0gPQoJCQkJCQkJZGF0YVsiY2FkZHJlc3MiXS5qb2luKCIsICIpOwoJCQkJCX0gZWxzZSB7CgkJCQkJCWRldGlhbHMuZGF0YVtmaWFdID0gZGF0YS5qb2luKCIsICIpOwoJCQkJCX0KCQkJCX0KCQkJfSk7CgkJCWNvbnN0IHBhbnN0YXR1cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBwYW5Ob3RhdmFpbGFibGUke2kgKyAxfWApOwoJCQlpZiAocGFuc3RhdHVzKSB7CgkJCQlkZXRpYWxzLmlzUGFuID0gIXBhbnN0YXR1cy5jaGVja2VkOwoJCQl9CgkJCWlvX2FwcGljYW50cy5wdXNoKGRldGlhbHMpOwoJCX0KCX0KCgljb25zdCBib29rU3JjRm9ybSA9IGJvb2tpbmdzb3VyY2VBcnIuZm9ybTsKCWZvciAobGV0IGkgPSAwOyBpIDwgYm9va1NyY0Zvcm0ubGVuZ3RoOyBpKyspIHsKCQlpb19ib29raW5nc3JjW2Jvb2tTcmNGb3JtW2ldLmxhYmVsLnRvTG93ZXJDYXNlKCkucmVwbGFjZUFsbCgiICIsICJfIildID0KCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYm9va1NyY0Zvcm1baV0uaWQpCgkJCQk/IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGJvb2tTcmNGb3JtW2ldLmlkKS52YWx1ZQoJCQkJOiAiIjsKCX0KCgljb25zdCB1ZEZvcm0gPSBhbmV4dXJlQXJyWzBdLmZvcm07Cgljb25zdCBib29raW5nRm9ybSA9IGFuZXh1cmVBcnJbMV0uZm9ybTsKCWZvciAobGV0IGkgPSAwOyBpIDwgdWRGb3JtLmxlbmd0aDsgaSsrKSB7CgkJaWYgKHVkRm9ybVtpXS50eXBlICE9PSAidGV4dCIpIHsKCQkJaW9fdW5pdGRldGFpbHNbCgkJCQl1ZEZvcm1baV0ubGFiZWwudHJpbSgpLnRvTG93ZXJDYXNlKCkucmVwbGFjZUFsbCgiICIsICJfIikKCQkJXSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHVkRm9ybVtpXS5pZCkKCQkJCQk/IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHVkRm9ybVtpXS5pZCkudmFsdWUKCQkJCQk6ICIiOwoJCX0KCX0KCglsZXQgYXJyeV9ib29raW5nYW1vdW50ID0gJyc7Cglmb3IgKGxldCBrID0gMDsgayA8IHBheW1lbnRTb3VyY2VDb3VudDsgaysrKSB7CgkJY29uc3QgaWRzID0gayArIDE7CgkJbGV0IGFtb3VudCA9ICcnOwoJCWxldCBhbW91bnRfd29yZCA9ICcnOwoJCWxldCBwYXltZW50X3R5cGUgPSAnJzsKCQlsZXQgYmFua190eXBlID0gJyc7CgkJbGV0IHBheW1lbnRfZGF0ZSA9ICcnOwoJCWxldCBjaGVxdWVfZmF2b3JpbmdfZGV0YWlscyA9ICcnOwoJCWxldCBpbWdTcmMgPSAnJzsKCQkvLyBjb25zdCBiYW5rX2NoZXF1ZV9pbWcgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdteWRvY3VtZW50JykpCgkJY29uc3QgYmFua19jaGVxdWVfaW1nID0gSlNPTi5wYXJzZShteWRvY3VtZW50KQoJCWlmIChiYW5rX2NoZXF1ZV9pbWdbJ2JhY2tfY2hlY2tfcG9zdF8nICsgaWRzXSkgewoJCQlpbWdTcmMgPSBiYW5rX2NoZXF1ZV9pbWdbJ2JhY2tfY2hlY2tfcG9zdF8nICsgaWRzXQoJCX0KCQlmb3IgKGxldCBpID0gMDsgaSA8IGJvb2tpbmdGb3JtLmxlbmd0aDsgaSsrKSB7CgkJCWlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChib29raW5nRm9ybVtpXS5pZCArICctJyArIGlkcyk/LnBsYWNlaG9sZGVyKSB7CgkJCQlpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYm9va2luZ0Zvcm1baV0uaWQgKyAnLScgKyBpZHMpLnBsYWNlaG9sZGVyLnRyaW0oKS50b0xvd2VyQ2FzZSgpLnJlcGxhY2VBbGwoIiAiLCAiXyIpID09ICdib29raW5nX2Ftb3VudF8oaW5faW5yKScpIHsKCQkJCQlhbW91bnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChib29raW5nRm9ybVtpXS5pZCArICctJyArIGlkcykudmFsdWU7CgkJCQl9CgkJCQlpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYm9va2luZ0Zvcm1baV0uaWQgKyAnLScgKyBpZHMpLnBsYWNlaG9sZGVyLnRyaW0oKS50b0xvd2VyQ2FzZSgpLnJlcGxhY2VBbGwoIiAiLCAiXyIpID09ICdib29raW5nX2Ftb3VudF9pbl93b3Jkc18oaW5faW5yKScpIHsKCQkJCQlhbW91bnRfd29yZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGJvb2tpbmdGb3JtW2ldLmlkICsgJy0nICsgaWRzKS52YWx1ZTsKCQkJCX0KCQkJCWlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChib29raW5nRm9ybVtpXS5pZCArICctJyArIGlkcykucGxhY2Vob2xkZXIudHJpbSgpLnRvTG93ZXJDYXNlKCkucmVwbGFjZUFsbCgiICIsICJfIikgPT0gJ2RkL3BvL2NoZXF1ZV9uby9ydGdzL25lZnQnKSB7CgkJCQkJcGF5bWVudF90eXBlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYm9va2luZ0Zvcm1baV0uaWQgKyAnLScgKyBpZHMpLnZhbHVlOwoJCQkJfQoJCQkJaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGJvb2tpbmdGb3JtW2ldLmlkICsgJy0nICsgaWRzKS5wbGFjZWhvbGRlci50cmltKCkudG9Mb3dlckNhc2UoKS5yZXBsYWNlQWxsKCIgIiwgIl8iKSA9PSAnYmFuaycpIHsKCQkJCQliYW5rX3R5cGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChib29raW5nRm9ybVtpXS5pZCArICctJyArIGlkcykudmFsdWU7CgkJCQl9CgkJCQlpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYm9va2luZ0Zvcm1baV0uaWQgKyAnLScgKyBpZHMpLnBsYWNlaG9sZGVyLnRyaW0oKS50b0xvd2VyQ2FzZSgpLnJlcGxhY2VBbGwoIiAiLCAiXyIpID09ICdjaGVxdWVfZmF2b3JpbmdfZGV0YWlscycpIHsKCQkJCQljaGVxdWVfZmF2b3JpbmdfZGV0YWlscyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGJvb2tpbmdGb3JtW2ldLmlkICsgJy0nICsgaWRzKS52YWx1ZTsKCQkJCX0KCQkJCWlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChib29raW5nRm9ybVtpXS5pZCArICctJyArIGlkcykucGxhY2Vob2xkZXIudHJpbSgpLnRvTG93ZXJDYXNlKCkucmVwbGFjZUFsbCgiICIsICJfIikgPT0gJ2RhdGUnKSB7CgkJCQkJcGF5bWVudF9kYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYm9va2luZ0Zvcm1baV0uaWQgKyAnLScgKyBpZHMpLnZhbHVlOwoJCQkJfQoJCQl9CgkJfQoJCWFycnlfYm9va2luZ2Ftb3VudCArPSBgPGRpdiBjbGFzcz0ibWFpbl9mb3JtZGV0YWlsIj4KICA8ZGl2IGNsYXNzPSJtYWluX2Jsb2NrIHRhYmxlX2Jvb2tpbmdhbW91bnQiPgogIDxoMz5CT09LSU5HIEFNT1VOVCAke2lkc308L2gzPgogIDx0YWJsZT4KICAgIDx0Ym9keT4KICAgICAgPHRyPgogICAgICAgIDx0ZD5CYW5rOjwvdGQ+CiAgICAgICAgPHRkIGlkPSIiPiR7YmFua190eXBlfTwvdGQ+CiAgICAgICAgPHRkPkRhdGU6PC90ZD4KICAgICAgICA8dGQgaWQ9IiIgY29sc3Bhbj0iMyI+JHtwYXltZW50X2RhdGV9PC90ZD4KICAgICAgPC90cj4KICAgICAgPHRyPgogICAgICAgIDx0ZD5SZWZlcmVuY2UgTm8uOjwvdGQ+CiAgICAgICAgPHRkIGlkPSIiPiR7cGF5bWVudF90eXBlfTwvdGQ+CiAgICAgICAgPHRkPkluIEZhdm91ciBvZjo8L3RkPgogICAgICAgIDx0ZCBpZD0iIj4ke2NoZXF1ZV9mYXZvcmluZ19kZXRhaWxzfTwvdGQ+CiAgICAgIDwvdHI+CiAgICAgIDx0cj4KICAgICAgICA8dGQ+Qm9va2luZyBBbW91bnQgKElOUik6PC90ZD4KICAgICAgICA8dGQgaWQ9IiI+JHthbW91bnR9PC90ZD4KICAgICAgPC90cj4KICAgICAgPHRyPgogICAgICAgIDx0ZD5BbXQuIGluIFdvcmRzIChJTlIpOjwvdGQ+CiAgICAgICAgPHRkIGlkPSIiPiR7YW1vdW50X3dvcmR9PC90ZD4KICAgICAgPC90cj4gCiAgICA8L3Rib2R5PgogICAgICA8L3RhYmxlPgogICAgPC9kaXY+CiAgICA8ZGl2IGNsYXNzPSJtYWluX2Jsb2NrIHRhYmxlX2Jvb2tpbmdhbW91bnQiPgogICAgPGgzPlVwbG9hZCBpbWFnZTwvaDM+CiAgICA8dGFibGU+CiAgICAgIDx0Ym9keT4KICAgICAgICA8dHI+CiAgICAgICAgICA8dGQ+PC90ZD4KICAgICAgICAgIDx0ZCBjbGFzcz0iIj48aW1nIGNsYXNzPSJiYWNrX2NoZWNrX2ltYWdlICR7cGF5bWVudF90eXBlfSIgc3JjPSIke2ltZ1NyY30iPjwvdGQ+CiAgICAgICAgPC90cj4KICAgICAgICA8dHI+CiAgICAgIDwvdGJvZHk+CiAgICA8L3RhYmxlPgogIDwvZGl2PgogIDwvZGl2PmA7Cgl9CgkvLyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFnZV9ib29raW5nYW1vdW50JykuaW5zZXJ0QWRqYWNlbnRIVE1MKCJhZnRlcmVuZCIsIGFycnlfYm9va2luZ2Ftb3VudCk7CgoJLy8gY29uc3QgYmFua19jaGVxdWVfaW1nID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbXlkb2N1bWVudCcpKQoJY29uc3QgYmFua19jaGVxdWVfaW1nID0gSlNPTi5wYXJzZShteWRvY3VtZW50KQoJaWYgKGJhbmtfY2hlcXVlX2ltZ1snYmFja19jaGVja19pbWFnZSddKSB7CgkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JhY2tfY2hlY2tfaW1hZ2UnKS5zcmMgPSBiYW5rX2NoZXF1ZV9pbWdbJ2JhY2tfY2hlY2tfaW1hZ2UnXTsKCX0KCWZvciAobGV0IGkgPSAwOyBpIDwgZmlyX2xvdC5sZW5ndGg7IGkrKykgewoJCWlmIChmaXJfbG90W2ldLnR5cGUgIT09ICJ0ZXh0IikgewoJCQlmaXJfbG90ZGF0YVtmaXJfbG90W2ldLmxhYmVsLnRyaW0oKS50b0xvd2VyQ2FzZSgpLnJlcGxhY2VBbGwoIiAiLCAiXyIpXSA9CgkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZChmaXJfbG90W2ldLmlkKQoJCQkJCT8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZmlyX2xvdFtpXS5pZCkudmFsdWUKCQkJCQk6ICIiOwoJCX0KCX0KCglQcmV2aWV3RGF0YS5hcHBsaWNhbnRzID0gaW9fYXBwaWNhbnRzOwoJUHJldmlld0RhdGEuYm9va2luZ3NvdXJjZSA9IGlvX2Jvb2tpbmdzcmM7CglQcmV2aWV3RGF0YS51bml0ZGV0YWlscyA9IGlvX3VuaXRkZXRhaWxzOwoJUHJldmlld0RhdGEuYm9va2luZ2Ftb3VudCA9IGlvX2Jvb2tpbmdhbW91bnQ7CglQcmV2aWV3RGF0YS5hbGxhYm91dHlvdSA9IGlvX2FsbGFib3V0eW91OwoJUHJldmlld0RhdGEuZmlyX2xvdCA9IGZpcl9sb3RkYXRhOwoJUHJldmlld0RhdGEuc2VsZmRlY2xhcmF0aW9uID0gc2NoZW1hWyJzZWxmLWRlY2xhcmF0aW9uIl1bImlubmVySFRNTCJdOwoKCWZvciAobGV0IGkgPSAwOyBpIDwgaW9fYXBwaWNhbnRzLmxlbmd0aDsgaSsrKSB7CgkJaW9fYXBwaWNhbnRzW2ldLnVzZXIgPSBzaGFyZURvY3VlbWVudChgYXBwbGljYW50LXBob3RvLXBpY2tlciR7aSArIDF9YCk7CgoJCWNvbnN0IGRvY3VtZW50cyA9IFtdOwoJCWNvbnN0IGZpbGVVcGxvYWRFTGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCIuZmlsZXVwbG9hZF9jb250aWFuZXIiKVtpXTsKCQlpZiAoZmlsZVVwbG9hZEVMZSkgewoJCQljb25zdCBkb2N1bWVudEZpbGVzID0KCQkJCWZpbGVVcGxvYWRFTGUucXVlcnlTZWxlY3RvckFsbCgiLmZpbGUtdXBsb2FkIikgfHwgW107CgkJCWZvciAobGV0IHggPSAwOyB4IDwgZG9jdW1lbnRGaWxlcy5sZW5ndGg7IHgrKykgewoJCQkJY29uc3QgZGV0aWFscyA9IHsKCQkJCQlsYWJlbDogZG9jdW1lbnRGaWxlc1t4XS5xdWVyeVNlbGVjdG9yKCJsYWJlbCIpCgkJCQkJCT8gZG9jdW1lbnRGaWxlc1t4XS5xdWVyeVNlbGVjdG9yKCJsYWJlbCIpLmlubmVyVGV4dAoJCQkJCQk6ICIiLAoJCQkJCXVybDogIiIsCgkJCQl9OwoJCQkJY29uc3QgaW5wdXRFbGUgPSBkb2N1bWVudEZpbGVzW3hdLnF1ZXJ5U2VsZWN0b3IoImlucHV0Iik7CgkJCQlpZiAoaW5wdXRFbGUpIHsKCQkJCQlkZXRpYWxzLnVybCA9IHNoYXJlRG9jdWVtZW50KGlucHV0RWxlLmlkKTsKCQkJCX0KCQkJCWlmIChkZXRpYWxzLnVybCkgewoJCQkJCWRvY3VtZW50cy5wdXNoKGRldGlhbHMpOwoJCQkJfQoJCQl9CgkJfQoKCQlpb19hcHBpY2FudHNbaV0uZG9jdW1lbnRzID0gZG9jdW1lbnRzOwoJfQoJcmV0dXJuIFByZXZpZXdEYXRhOwp9CgpmdW5jdGlvbiBzdG9yZURvY3VlbWVudChpZCwgYmxvYikgewoJLy8gY29uc3QgbXlKc29uID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgibXlkb2N1bWVudCIpKSB8fCBbXTsKCWNvbnN0IG15SnNvbiA9IEpTT04ucGFyc2UobXlkb2N1bWVudCkgfHwgW107CgoJaWYgKGJsb2IpIHsKCQljb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwoJCXJlYWRlci5yZWFkQXNEYXRhVVJMKGJsb2IpOwoJCXJlYWRlci5hZGRFdmVudExpc3RlbmVyKCJsb2FkIiwgKCkgPT4gewoJCQlteUpzb25baWRdID0gcmVhZGVyLnJlc3VsdDsKCQkJLy8gbG9jYWxTdG9yYWdlLnNldEl0ZW0oIm15ZG9jdW1lbnQiLCBKU09OLnN0cmluZ2lmeShteUpzb24pKTsKCQkJbXlkb2N1bWVudCA9IEpTT04uc3RyaW5naWZ5KG15SnNvbik7CgkJfSk7Cgl9Cn0KCmZ1bmN0aW9uIFN0b3JlRG9jdW1lbnROYW1lKGlkLCBuYW1lKSB7Cgljb25zdCBteUpzb24gPSBKU09OLnBhcnNlKG15ZG9jdW1lbnQpIHx8IFtdOwoKCWlmIChuYW1lKSB7CgkJbXlKc29uW2lkXSA9IG5hbWU7CgkJbXlkb2N1bWVudCA9IEpTT04uc3RyaW5naWZ5KG15SnNvbik7Cgl9Cn0KCmZ1bmN0aW9uIHN0b3JlRG9jdWVtZW50V2l0aE91dEJhc2UoaWQsIGJsb2IpIHsKCS8vIGNvbnN0IG15SnNvbiA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oIm15ZG9jdW1lbnQiKSkgfHwgW107Cgljb25zdCBteUpzb24gPSBKU09OLnBhcnNlKG15ZG9jdW1lbnQpIHx8IFtdOwoKCWlmIChibG9iKSB7CgkJY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKCQlyZWFkZXIucmVhZEFzRGF0YVVSTChibG9iKTsKCQlyZWFkZXIuYWRkRXZlbnRMaXN0ZW5lcigibG9hZCIsICgpID0+IHsKCQkJbXlKc29uW2lkXSA9IHJlYWRlci5yZXN1bHQuc3BsaXQoJywnKVsxXTsKCQkJLy8gbG9jYWxTdG9yYWdlLnNldEl0ZW0oIm15ZG9jdW1lbnQiLCBKU09OLnN0cmluZ2lmeShteUpzb24pKTsKCQkJbXlkb2N1bWVudCA9IEpTT04uc3RyaW5naWZ5KG15SnNvbik7CgkJfSk7Cgl9Cn0KCmZ1bmN0aW9uIHNoYXJlRG9jdWVtZW50KGlkKSB7CgkvLyBjb25zdCBteUpzb24gPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJteWRvY3VtZW50IikpIHx8IFtdOwoJY29uc3QgbXlKc29uID0gSlNPTi5wYXJzZShteWRvY3VtZW50KSB8fCBbXTsKCglyZXR1cm4gbXlKc29uW2lkXSA/IG15SnNvbltpZF0gOiBudWxsOwp9CgpmdW5jdGlvbiBmaWxscGRmQ29udGVudChpc1ByZXZpZXcpIHsKCglkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZGVyJykuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZUxvYWRlcicpOwoKCWNvbnN0IG15cHJvbWlzZSA9IG5ldyBQcm9taXNlKChwcmVyZXMsIHByZXJlaikgPT4gewoJCS8vIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkZXInKS5jbGFzc0xpc3QucmVtb3ZlKCdoaWRlTG9hZGVyJyk7CgkJZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLmNhbnZhc19kaXZfcGRmIikuY2xhc3NMaXN0LnJlbW92ZSgiaGlkZGVuIik7CgkJY29uc3QgbXlwcmV2aWV3RGV0YWlscyA9IGNyZWF0ZUZ1bmN0aW9uRGF0YSgpOwoJCWxldCBhbGxvdGVlcyA9IG15cHJldmlld0RldGFpbHMuYXBwbGljYW50czsKCgkJbGV0IG5hbWVzID0gJyc7CgkJbGV0IHNpZ25MaW5lcyA9ICcnOwoJCWxldCBjb3VudCA9IDE7CgkJbGV0IGNvdW50U3RyID0gJyc7CgkJY29uc3QgdW5pdE5vID0gc2NoZW1hWydmaXJzdC1wYWdlJ11bJ2Zvcm0nXVsyXVsnZGVmYXVsdFZhbHVlJ107CgkJbGV0IHVuaXROb1N0ciA9ICcnOwoKCQlmb3IgKGxldCBhbGxvdGVlIG9mIGFsbG90ZWVzKSB7CgkJCW5hbWVzICs9IGA8cD4ke2FsbG90ZWUuZGF0YS5uYW1lfTwvcD5gOwoJCQl1bml0Tm9TdHIgKz0gYDxwPiR7dW5pdE5vfTwvcD5gOwoJCQlzaWduTGluZXMgKz0gYDxwPiR7Y291bnR9PC9wPmA7CgkJCWNvdW50U3RyICs9IGA8cD4ke2NvdW50fTwvcD5gOwoJCQljb3VudCsrOwoJCX0KCgoJCS8vCgoJCWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIi5QYWdlX2t5YyIpLmZvckVhY2goKGVsZSkgPT4gewoJCQllbGUucmVtb3ZlKCk7CgkJfSk7CgkJZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiLnBhZ2VfYXBjZGV0YWlscyIpLmZvckVhY2goKGVsZSkgPT4gewoJCQllbGUucmVtb3ZlKCk7CgkJfSk7CgoJCWxldCBpc0NvbmNlbnQgPSB0cnVlOwoJCWNvbnN0IGZpcl9wRGF0YSA9IHNjaGVtYVsiZmlyc3QtcGFnZSJdOwoKCQl2YXIgbXlxdW90YXRpb25QRGYgPSAiIjsKCQlpZiAoZmlyX3BEYXRhKSB7CgkJCWNvbnN0IGZvcm1EYXRhID0gZmlyX3BEYXRhWyJjb25zZW50Zm9ybSJdOyAgICAgLy8gVG8gYmUgdW5jb21tZW50ZWQKCQkJLy8gY29uc3QgZm9ybURhdGEgPSB0cnVlOyAgICAgLy8gVG8gYmUgY29tbWVudGVkCgoJCQlpZiAoIWZvcm1EYXRhIHx8IGZvcm1EYXRhID09PSAiZmFsc2UiKSB7CgkJCQlpc0NvbmNlbnQgPSBmYWxzZTsKCQkJfQoKCQl9CgoJCWpzb25EYXRhWydpc0NvbmNlbnQnXSA9IGlzQ29uY2VudDsKCQlqc29uRGF0YVsndW5pdE5vJ10gPSB1bml0Tm87CgkJLy8ganNvbkRhdGFbJ3Byb2plY3RMb2dvJ10gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGVhZF9sb2dvMicpLmlubmVyVGV4dDsKCQlqc29uRGF0YVsncHJvamVjdExvZ28nXSA9ICcnOwoKCQlteXF1b3RhdGlvblBEZiA9IGZpcl9wRGF0YVsicXVvdGF0aW9ucGRmIl07CgkJY29uc3QgY29uc2Zvcm0xID0gZmlyX3BEYXRhWyJmb3JtIl1bMV1bImRlZmF1bHRWYWx1ZSJdOwoJCWpzb25EYXRhWydjb25zZW50Rm9ybVR5cGUnXSA9IGNvbnNmb3JtMS50b1VwcGVyQ2FzZSgpOwoKCQlpZiAobXlwcmV2aWV3RGV0YWlscykgewoJCQlteXByZXZpZXdEZXRhaWxzLmlzQ29uY2VudCA9IGlzQ29uY2VudDsKCQkJLy8gbG9jYWxTdG9yYWdlLnNldEl0ZW0oIm15aW9qc29uIiwgSlNPTi5zdHJpbmdpZnkobXlwcmV2aWV3RGV0YWlscykpOwoJCQlteWlvanNvbiA9IEpTT04uc3RyaW5naWZ5KG15cHJldmlld0RldGFpbHMpOwoKCQkJY29uc3QgZmlyX2xvdERhdGEgPSBteXByZXZpZXdEZXRhaWxzLmZpcl9sb3Q7CgkJCWlmIChmaXJfbG90RGF0YSkgewoJCQkJY29uc3QgbXlOYW1lRWxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImZpcnN0X3BuYW1lIik7CgkJCQlteU5hbWVFbGUuaW5uZXJUZXh0ID0gbXlwcmV2aWV3RGV0YWlscy5hcHBsaWNhbnRzWzBdWydkYXRhJ10ubmFtZTsKCgkJCQljb25zdCBteXROYW1lRWxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImZpcnN0X3RuYW1lIik7CgkJCQlsZXQgbXl2YWx1ZSA9IFtdOwoJCQkJbXl2YWx1ZS5wdXNoKG15cHJldmlld0RldGFpbHMudW5pdGRldGFpbHMucHJvamVjdF9uYW1lKQoJCQkJY29uc3QgZml0TG90RGF0YSA9IE9iamVjdC5rZXlzKGZpcl9sb3REYXRhKTsKCQkJCWZvciAobGV0IGkgPSAxOyBpIDwgZml0TG90RGF0YS5sZW5ndGg7IGkrKykgewoJCQkJCWlmIChmaXJfbG90RGF0YVtmaXRMb3REYXRhW2ldXSkgewoJCQkJCQlteXZhbHVlLnB1c2goZmlyX2xvdERhdGFbZml0TG90RGF0YVtpXV0pOwoJCQkJCX0KCQkJCX0KCQkJCW15dE5hbWVFbGUuaW5uZXJUZXh0ID0gbXl2YWx1ZS5qb2luKCIsICIpOwoKCQkJCWpzb25EYXRhWydmaXJzdFBhZ2UnXSA9IHsKCQkJCQlmaXJzdF9wbmFtZTogbXlwcmV2aWV3RGV0YWlscy5hcHBsaWNhbnRzWzBdWydkYXRhJ10ubmFtZSwKCQkJCQlmaXJzdF90bmFtZTogbXl2YWx1ZS5qb2luKCIsICIpLAoJCQkJfQoKCQkJfQoKCQkJY29uc3QgYXBwbGljYW50cyA9IG15cHJldmlld0RldGFpbHMuYXBwbGljYW50czsKCQkJaWYgKGFwcGxpY2FudHMpIHsKCQkJCWNvbnN0IHRnRWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLm1haW4td3JhcHBlci5wYWdlX2ZpcnN0aW50cm8iKTsKCgkJCQljb25zdCBwYWdlTm8gPQoJCQkJCWFwcGxpY2FudHMubGVuZ3RoICUgMyA9PSAwCgkJCQkJCT8gYXBwbGljYW50cy5sZW5ndGggLyAzCgkJCQkJCTogTWF0aC5mbG9vcihhcHBsaWNhbnRzLmxlbmd0aCAvIDMpICsgMTsKCgkJCQlsZXQgbWFpbkRhdGEgPSAiIjsKCQkJCWZvciAoZGwgPSAwOyBkbCA8IHBhZ2VObzsgZGwrKykgewoJCQkJCWxldCBteURhdGEgPSAiIjsKCQkJCQlmb3IgKGxldCBpeCA9IGRsICogMzsgaXggPCBhcHBsaWNhbnRzLmxlbmd0aDsgaXgrKykgewoJCQkJCQljb25zdCBjaGVja2JveElkID0gaXggPT0gMCA/IGAke2FwcGxpY2FudHNbaXhdLnR5cGV9X1NhbWVfYXNfcGVybWFuZW50X2FkZHJlc3NgIDogYCR7YXBwbGljYW50c1tpeF0udHlwZX1fU2FtZV9hc19wcmltYXJ5YDsKCQkJCQkJY29uc3QgaXNDaGVja2VkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY2hlY2tib3hJZCkuY2hlY2tlZDsKCQkJCQkJaWYgKGlzQ2hlY2tlZCkgewoKCQkJCQkJCWlmIChpeCAhPSAwKSB7CgkJCQkJCQkJYXBwbGljYW50c1tpeF1bJ2RhdGEnXVsnY29ycmVzcG9uZGVuY2VfYWRkcmVzcyddID0gYXBwbGljYW50c1swXVsnZGF0YSddWydwZXJtYW5lbnRfYWRkcmVzcyddOwoJCQkJCQkJCWFwcGxpY2FudHNbaXhdWydkYXRhJ11bJ3Blcm1hbmVudF9hZGRyZXNzJ10gPSBhcHBsaWNhbnRzWzBdWydkYXRhJ11bJ3Blcm1hbmVudF9hZGRyZXNzJ107CgkJCQkJCQl9CgkJCQkJCQllbHNlIHsKCQkJCQkJCQlhcHBsaWNhbnRzW2l4XVsnZGF0YSddWydjb3JyZXNwb25kZW5jZV9hZGRyZXNzJ10gPSBhcHBsaWNhbnRzW2l4XVsnZGF0YSddWydwZXJtYW5lbnRfYWRkcmVzcyddOwoJCQkJCQkJCWFwcGxpY2FudHNbaXhdWydzYW1lQXNQcmltYXJ5J10gPSB0cnVlOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJCWVsc2UgewoJCQkJCQkJYXBwbGljYW50c1tpeF1bJ3NhbWVBc1ByaW1hcnknXSA9IGZhbHNlOwoJCQkJCQl9CgkJCQkJCW15RGF0YSA9IG15RGF0YSArIGFwY2FyZChhcHBsaWNhbnRzW2l4XSwgaXgpOwoJCQkJCX0KCQkJCQltYWluRGF0YSA9CgkJCQkJCW1haW5EYXRhICsKCQkJCQkJYDxkaXYgY2xhc3M9Im1haW4td3JhcHBlciBwYWdlX2FwY2RldGFpbHMiPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImlubmVyX3dyYXBwZXIiPgogICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0icm93IGp1c3RpZnktY29udGVudC1iZXR3ZWVuIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29sIGhlYWRlci1sb2dvIGhlYWRfbG9nbzEiPiAKICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbCBoZWFkZXItbG9nbyBoZWFkX2xvZ28yIj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im1haW5fZm9ybWRldGFpbCI+JHtteURhdGF9PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJkYXRlX3dyYXBwZXIiPgogICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PmA7CgkJCQl9CgkJCQl0Z0VsZS5pbnNlcnRBZGphY2VudEhUTUwoImFmdGVyZW5kIiwgbWFpbkRhdGEpOwoKCQkJCWNvbnN0IGFueHVyZUVsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoCgkJCQkJIi5tYWluLXdyYXBwZXIucGFnZV9Bbm5leHVyZXMiCgkJCQkpOwoJCQkJbGV0IG10ZG9jbWFpbkRhdGEgPSAiIjsKCQkJCWZvciAobGV0IGl4ID0gMDsgaXggPCBhcHBsaWNhbnRzLmxlbmd0aDsgaXgrKykgewoJCQkJCWNvbnN0IG10RG9jTGVuID0gYXBwbGljYW50c1tpeF0uZG9jdW1lbnRzIHx8IFtdOwoJCQkJCWlmIChtdERvY0xlbi5sZW5ndGggPiAwKSB7CgkJCQkJCWxldCBkb2NzQXJyID0gW107CgkJCQkJCWxldCBtdGRvY0RhdGEgPSAiIjsKCQkJCQkJZm9yIChsZXQgZGwgPSAwOyBkbCA8IG10RG9jTGVuLmxlbmd0aDsgZGwrKykgewoJCQkJCQkJZG9jc0Fyci5wdXNoKHsKCQkJCQkJCQkndHlwZSc6IGAke2RsICsgMX0uICR7bXREb2NMZW5bZGxdLmxhYmVsfWAsCgkJCQkJCQkJJ3NyYyc6IGAke210RG9jTGVuW2RsXS51cmx9YCwKCQkJCQkJCQknc3VidHlwZSc6IGAke210RG9jTGVuW2RsXS5sYWJlbH1gCgkJCQkJCQl9KTsKCQkJCQkJCW10ZG9jRGF0YSA9CgkJCQkJCQkJbXRkb2NEYXRhICsKCQkJCQkJCQlgPGRpdiBjbGFzcz0iQXBwbGljYW50X2Jsb2NrIj4KICAgICAgICAgICAgICAgICAgICA8cD4ke2RsICsgMX0uICR7bXREb2NMZW5bZGxdLmxhYmVsfTwvcD4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJpbWdfYmxvY2siPgogICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9IiR7bXREb2NMZW5bZGxdLnVybH0iIGFsdD0iIj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgPC9kaXY+IGA7CgkJCQkJCX0KCgkJCQkJCWpzb25EYXRhWydhcHBsaWNhbnRzS3ljJ10ucHVzaCh7CgkJCQkJCQknYXBwVHlwZSc6IGFwcGxpY2FudE51bVthcHBsaWNhbnRzW2l4XS50eXBlXSwKCQkJCQkJCSdkb2NzJzogZG9jc0FycgoJCQkJCQl9KQoKCQkJCQkJbXRkb2NtYWluRGF0YSA9CgkJCQkJCQltdGRvY21haW5EYXRhICsKCQkJCQkJCWA8ZGl2IGNsYXNzPSJtYWluLXdyYXBwZXIgUGFnZV9reWMiPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iaW5uZXJfd3JhcHBlciI+CiAgICAgICAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InJvdyBqdXN0aWZ5LWNvbnRlbnQtYmV0d2VlbiI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iY29sIGhlYWRlci1sb2dvIGhlYWRfbG9nbzEiPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbCBoZWFkZXItbG9nbyBoZWFkX2xvZ28yIj4gICAKICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im1haW5fZm9ybWRldGFpbCI+CiAgICAgICAgICAgICAgICAgICAgJHtpeCA9PSAwID8gIjxoMj5VcGxvYWRlZCBLWUMgRG9jdW1lbnQ8L2gyPiIgOiAiIn0KICAgICAgICAgICAgICAgICAgICA8aDM+JHthcHBsaWNhbnROdW1bYXBwbGljYW50c1tpeF0udHlwZV19PC9oMz4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJBcHBsaWNhbnRfd3JhcHBlciI+CiAgICAgICAgICAgICAgICAgICAgICAke210ZG9jRGF0YX0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImNvbW1vbl9mb290ZXIgc2lnbl9ibG9ja3Nfd3JhcHBlciI+IAogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgIDwvZGl2PmA7CgkJCQkJfQoJCQkJfQoJCQkJYW54dXJlRWxlLmluc2VydEFkamFjZW50SFRNTCgiYWZ0ZXJlbmQiLCBtdGRvY21haW5EYXRhKTsKCgkJCQljb25zdCBzaWduRWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiLnNpZ25fYmxvY2tzX3dyYXBwZXIiKTsKCQkJCWlmIChzaWduRWxlKSB7CgkJCQkJc2lnbkVsZS5mb3JFYWNoKChzaWVsKSA9PiB7CgkJCQkJCWxldCBkYXRhID0gIiI7CgkJCQkJCWZvciAobGV0IGlkID0gMDsgaWQgPCBhcHBsaWNhbnRzLmxlbmd0aDsgaWQrKykgewoJCQkJCQkJZGF0YSA9CgkJCQkJCQkJZGF0YSArCgkJCQkJCQkJYDxkaXYgY2xhc3M9InNpZ25fYmxvY2tfd3JhcHBlciI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InNpZ25fYmxvY2siPjwvZGl2PgogICAgICAgICAgPC9kaXY+YDsKCQkJCQkJfQoJCQkJCQlzaWVsLmlubmVySFRNTCA9IGRhdGE7CgkJCQkJfSk7CgkJCQl9CgkJCX0KCgkJCWNvbnN0IGJvb2tpbmdzcmMgPSBteXByZXZpZXdEZXRhaWxzLmJvb2tpbmdzb3VyY2U7CgoJCQlpZiAoYm9va2luZ3NyYykgewoJCQkJY29uc3QgbXlib29rc3JjID0gcHJlb2JqLmJvb2tpbmdzb3VyY2U7CgkJCQljb25zdCBib29rZXkgPSBPYmplY3Qua2V5cyhteWJvb2tzcmMpOwoJCQkJanNvbkRhdGFbJ2Jvb2tpbmdTcmMnXSA9IHt9OwoJCQkJdHJ5IHsJCQkJLy8gSGFuZGxpbmcgc3BlY2lhbCBjYXNlIGZvciBib29raW5nIHNvdXJjZSB0eXBlIHJlZmVycmFsCgkJCQkJaWYgKGJvb2tpbmdzcmNbJ2Jvb2tpbmdfc291cmNlJ10gPT0gJ1JlZmVycmFsJykgewoJCQkJCQlib29raW5nc3JjWydjaGFubmVsX3BhcnRuZXJfbW9iaWxlX25vJ10gPSBib29raW5nc3JjWydfbW9iaWxlX25vX29mX3JlZmVyZWUnXTsKCQkJCQkJYm9va2luZ3NyY1snY2hhbm5lbF9wYXJ0bmVyX25hbWUnXSA9IGJvb2tpbmdzcmNbJ25hbWVfb2ZfcmVmZXJlZSddOwoJCQkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHJfaW9fcmVyYV9ubycpLnJlbW92ZSgpOwoJCQkJCX0gZWxzZSBpZiAoYm9va2luZ3NyY1snYm9va2luZ19zb3VyY2UnXSA9PSAnRGlyZWN0JykgewoJCQkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHJfaW9fbmFtJykucmVtb3ZlKCk7CgkJCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0cl9pb19yZXJhX25vJykucmVtb3ZlKCk7CgkJCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0cl9pb19jcF9tb2JpbGUnKS5yZW1vdmUoKTsKCQkJCQl9IGVsc2UgaWYgKGJvb2tpbmdzcmNbJ2Jvb2tpbmdfc291cmNlJ10gPT0gJ0NoYW5uZWwgUGFydG5lcicpIHsKCgkJCQkJfSBlbHNlIHsKCQkJCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RyX2lvX25hbScpLnJlbW92ZSgpOwoJCQkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHJfaW9fcmVyYV9ubycpLnJlbW92ZSgpOwoJCQkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHJfaW9fY3BfbW9iaWxlJykucmVtb3ZlKCk7CgkJCQkJfQoJCQkJfSBjYXRjaCAoZXJyb3IpIHsKCgkJCQl9CgkJCQlib29rZXkuZm9yRWFjaCgoZWxldCkgPT4gewoKCQkJCQljb25zdCB0Z0VsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZXQpOwoKCQkJCQlpZiAodGdFbGUgJiYgbXlib29rc3JjW2VsZXRdKSB7CgkJCQkJCWxldCB2YWwgPSBib29raW5nc3JjWwoJCQkJCQkJbXlib29rc3JjW2VsZXRdLnRvTG93ZXJDYXNlKCkucmVwbGFjZUFsbCgiICIsICJfIikKCQkJCQkJXQoJCQkJCQkJPyBib29raW5nc3JjW215Ym9va3NyY1tlbGV0XS50b0xvd2VyQ2FzZSgpLnJlcGxhY2VBbGwoIiAiLCAiXyIpXQoJCQkJCQkJOiAiTkEiOwoJCQkJCQl0Z0VsZS5pbm5lclRleHQgPSB2YWw7CgkJCQkJCWpzb25EYXRhWydib29raW5nU3JjJ11bZWxldF0gPSB2YWw7CgkJCQkJfSBlbHNlIHsKCQkJCQkJaWYgKHRnRWxlKSB7CgkJCQkJCQl0Z0VsZS5pbm5lclRleHQgPSAiTkEiOwoJCQkJCQkJanNvbkRhdGFbJ2Jvb2tpbmdTcmMnXVtlbGV0XSA9ICJOQSI7CgoJCQkJCQl9CgkJCQkJfQoJCQkJfSk7CgkJCX0KCgkJCWNvbnN0IHVuaXRkZXRhaWxzID0gbXlwcmV2aWV3RGV0YWlscy51bml0ZGV0YWlsczsKCQkJaWYgKHVuaXRkZXRhaWxzKSB7CgkJCQljb25zdCBteXVuaXRzcmMgPSBwcmVvYmoudW5pdGRldGFpbHM7CgkJCQljb25zdCBib29rZXkgPSBPYmplY3Qua2V5cyhteXVuaXRzcmMpOwoJCQkJanNvbkRhdGFbJ3VuaXREZXRhaWxzJ10gPSB7fTsKCQkJCWJvb2tleS5mb3JFYWNoKChlbGV0KSA9PiB7CgkJCQkJY29uc3QgdGdFbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGV0KTsKCQkJCQlpZiAodGdFbGUgJiYgbXl1bml0c3JjW2VsZXRdKSB7CgoJCQkJCQlsZXQgdmFsID0gdW5pdGRldGFpbHNbCgkJCQkJCQlteXVuaXRzcmNbZWxldF0udG9Mb3dlckNhc2UoKS5yZXBsYWNlQWxsKCIgIiwgIl8iKQoJCQkJCQldCgkJCQkJCQk/IHVuaXRkZXRhaWxzW215dW5pdHNyY1tlbGV0XS50b0xvd2VyQ2FzZSgpLnJlcGxhY2VBbGwoIiAiLCAiXyIpXQoJCQkJCQkJOiAiTkEiOwoJCQkJCQl0Z0VsZS5pbm5lclRleHQgPSB2YWw7CgkJCQkJCWpzb25EYXRhWyd1bml0RGV0YWlscyddW2VsZXRdID0gdmFsOwoJCQkJCX0gZWxzZSB7CgkJCQkJCWlmICh0Z0VsZSkgewoJCQkJCQkJdGdFbGUuaW5uZXJUZXh0ID0gIk5BIjsKCQkJCQkJCWpzb25EYXRhWyd1bml0RGV0YWlscyddW2VsZXRdID0gIk5BIjsKCQkJCQkJfQoJCQkJCX0KCQkJCX0pOwoJCQl9CgoJCQlmdW5jdGlvbiBmb3JtYXREYXRlKGRhdGUpIHsKCQkJCXZhciBkID0gbmV3IERhdGUoZGF0ZSksCgkJCQkJbW9udGggPSAnJyArIChkLmdldE1vbnRoKCkgKyAxKSwKCQkJCQlkYXkgPSAnJyArIGQuZ2V0RGF0ZSgpLAoJCQkJCXllYXIgPSBkLmdldEZ1bGxZZWFyKCk7CgoJCQkJaWYgKG1vbnRoLmxlbmd0aCA8IDIpCgkJCQkJbW9udGggPSAnMCcgKyBtb250aDsKCQkJCWlmIChkYXkubGVuZ3RoIDwgMikKCQkJCQlkYXkgPSAnMCcgKyBkYXk7CgoJCQkJcmV0dXJuIFtkYXksIG1vbnRoLCB5ZWFyXS5qb2luKCctJyk7CgkJCX0KCQkJY29uc3QgYWJvdXREZXRhaWxzID0gbXlwcmV2aWV3RGV0YWlscy5hbGxhYm91dHlvdTsKCQkJaWYgKGFib3V0RGV0YWlscykgewoJCQkJY29uc3QgYWJvdXRzcmMgPSBwcmVvYmouYWxsYWJvdXR5b3U7CgkJCQljb25zdCBib29rZXkgPSBPYmplY3Qua2V5cyhhYm91dHNyYyk7CgkJCQlqc29uRGF0YVsnYWJvdXQnXSA9IHt9OwoJCQkJYWJvdXREZXRhaWxzLmRhdGVfb2ZfYmlydGggPSBmb3JtYXREYXRlKGFib3V0RGV0YWlscy5kYXRlX29mX2JpcnRoKTsKCQkJCWJvb2tleS5mb3JFYWNoKChlbGV0KSA9PiB7CgkJCQkJY29uc3QgdGdFbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGV0KTsKCQkJCQlpZiAodGdFbGUgJiYgYWJvdXRzcmNbZWxldF0pIHsKCQkJCQkJbGV0IHZhbCA9IGFib3V0RGV0YWlsc1sKCQkJCQkJCWFib3V0c3JjW2VsZXRdLnRvTG93ZXJDYXNlKCkucmVwbGFjZUFsbCgiICIsICJfIikKCQkJCQkJXQoJCQkJCQkJPyBhYm91dERldGFpbHNbYWJvdXRzcmNbZWxldF0udG9Mb3dlckNhc2UoKS5yZXBsYWNlQWxsKCIgIiwgIl8iKV0KCQkJCQkJCTogIk5BIjsKCQkJCQkJdGdFbGUuaW5uZXJUZXh0ID0gdmFsOwoJCQkJCQlqc29uRGF0YVsnYWJvdXQnXVtlbGV0XSA9IHZhbDsKCQkJCQl9IGVsc2UgewoJCQkJCQlpZiAodGdFbGUpIHsKCQkJCQkJCXRnRWxlLmlubmVyVGV4dCA9ICJOQSI7CgkJCQkJCQlqc29uRGF0YVsnYWJvdXQnXVtlbGV0XSA9ICJOQSI7CgkJCQkJCX0KCQkJCQl9CgkJCQl9KTsKCQkJfQoKCQkJY29uc3QgYmFkZXRhaWxzID0gbXlwcmV2aWV3RGV0YWlscy5ib29raW5nYW1vdW50OwoJCQlpZiAoYmFkZXRhaWxzKSB7CgkJCQljb25zdCBiYXNyYyA9IHByZW9iai5ib29raW5nYW1vdW50OwoJCQkJY29uc3QgYm9va2V5ID0gT2JqZWN0LmtleXMoYmFzcmMpOwoJCQkJanNvbkRhdGFbJ2JhRGV0YWlscyddID0ge307CgkJCQlib29rZXkuZm9yRWFjaCgoZWxldCkgPT4gewoKCQkJCQljb25zdCB0Z0VsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZXQpOwoJCQkJCWlmICh0Z0VsZSAmJiBiYXNyY1tlbGV0XSkgewoJCQkJCQlsZXQgdmFsID0gYmFkZXRhaWxzWwoJCQkJCQkJYmFzcmNbZWxldF0udG9Mb3dlckNhc2UoKS5yZXBsYWNlQWxsKCIgIiwgIl8iKQoJCQkJCQldCgkJCQkJCQk/IGJhZGV0YWlsc1tiYXNyY1tlbGV0XS50b0xvd2VyQ2FzZSgpLnJlcGxhY2VBbGwoIiAiLCAiXyIpXQoJCQkJCQkJOiAiTkEiOwoJCQkJCQl0Z0VsZS5pbm5lclRleHQgPSB2YWw7CgkJCQkJCWpzb25EYXRhWydiYURldGFpbHMnXVtlbGV0XSA9IHZhbDsKCQkJCQl9IGVsc2UgewoJCQkJCQlpZiAodGdFbGUpIHsKCQkJCQkJCXRnRWxlLmlubmVyVGV4dCA9ICJOQSI7CgkJCQkJCQlqc29uRGF0YVsnYmFEZXRhaWxzJ11bZWxldF0gPSAiTkEiOwoJCQkJCQl9CgkJCQkJfQoJCQkJfSk7CgkJCX0KCgkJCWNvbnN0IGRlY2xhcmVFbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKAoJCQkJIi5wYWdlX3NlbGZkZWNsYXJhdGlvbiAubWFpbl9mb3JtZGV0YWlsIgoJCQkpOwoKCQkJZGVjbGFyZUVsZS5pbm5lckhUTUwgPSBteXByZXZpZXdEZXRhaWxzLnNlbGZkZWNsYXJhdGlvbjsKCQl9CgoKCgoJCWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIi5kYXRlX3dyYXBwZXIiKS5mb3JFYWNoKChkYXcpID0+IHsKCQkJZGF3LmlubmVySFRNTCA9IGA8cD48c3Ryb25nPkRhdGU6PC9zdHJvbmc+ICR7bmV3IERhdGUoKS5nZXREYXRlKCl9LiR7bmV3IERhdGUoKS5nZXRNb250aCgpICsgMQoJCQkJfS4ke25ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKX08L3A+YDsKCQl9KTsKCgoJCWxldCBudW1CbmsgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZSgiZmllbGRfMDc2MnozdCIpLmxlbmd0aAoJCWlmIChudW1CbmsgPiAwKSB7CgoJCQlmb3IgKGxldCBpID0gMTsgaSA8PSBudW1Cbms7IGkrKykgewoKCQkJCS8vIENoZWNrIGlmIGF0IGxlYXN0IG9uZSBpbnB1dCBleGlzdHMKCQkJCWlmICghZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYEZpZWxkXzBqcHlidWctJHtpfWApKSB7CgkJCQkJYnJlYWs7CgkJCQl9CgkJCQlpZiAoanNvbkRhdGFbJ3BheW1lbnRTb3VyY2VzJ10ubGVuZ3RoID09IG51bUJuaykgewoJCQkJCWpzb25EYXRhWydwYXltZW50U291cmNlcyddW2kgLSAxXVsnQW1vdW50X19jJ10gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgRmllbGRfMGpweWJ1Zy0ke2l9YCkudmFsdWU7CgkJCQkJanNvbkRhdGFbJ3BheW1lbnRTb3VyY2VzJ11baSAtIDFdWydCYW5rX05hbWVfX2MnXSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBGaWVsZF8wbDk4cG43LSR7aX1gKS52YWx1ZTsKCQkJCQlqc29uRGF0YVsncGF5bWVudFNvdXJjZXMnXVtpIC0gMV1bJ01vZGVfT2ZfUGF5bWVudF9fYyddID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYHBheW1lbnRfc291cmNlXyR7aX1gKS52YWx1ZTsKCQkJCQlqc29uRGF0YVsncGF5bWVudFNvdXJjZXMnXVtpIC0gMV1bJ0RhdGVfb2ZfcGF5bWVudF9fYyddID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYEZpZWxkXzFiMGlmcGxkYXRlX2NoZWNrLSR7aX1gKS52YWx1ZTsKCQkJCX0gZWxzZSB7CgkJCQkJaWYgKGpzb25EYXRhWydwYXltZW50U291cmNlcyddLmxlbmd0aCAhPSBpIC0gMSkgewoJCQkJCQlqc29uRGF0YVsncGF5bWVudFNvdXJjZXMnXVtpIC0gMV1bJ0Ftb3VudF9fYyddID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYEZpZWxkXzBqcHlidWctJHtpfWApLnZhbHVlOwoJCQkJCQlqc29uRGF0YVsncGF5bWVudFNvdXJjZXMnXVtpIC0gMV1bJ0JhbmtfTmFtZV9fYyddID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYEZpZWxkXzBsOThwbjctJHtpfWApLnZhbHVlOwoJCQkJCQlqc29uRGF0YVsncGF5bWVudFNvdXJjZXMnXVtpIC0gMV1bJ01vZGVfT2ZfUGF5bWVudF9fYyddID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYHBheW1lbnRfc291cmNlXyR7aX1gKS52YWx1ZTsKCQkJCQkJanNvbkRhdGFbJ3BheW1lbnRTb3VyY2VzJ11baSAtIDFdWydEYXRlX29mX3BheW1lbnRfX2MnXSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBGaWVsZF8xYjBpZnBsZGF0ZV9jaGVjay0ke2l9YCkudmFsdWU7CgkJCQkJfSBlbHNlIHsKCQkJCQkJanNvbkRhdGFbJ3BheW1lbnRTb3VyY2VzJ10ucHVzaCh7CgkJCQkJCQkiQW1vdW50X19jIjogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYEZpZWxkXzBqcHlidWctJHtpfWApLnZhbHVlLAoJCQkJCQkJIkJhbmtfTmFtZV9fYyI6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBGaWVsZF8wbDk4cG43LSR7aX1gKS52YWx1ZSwKCQkJCQkJCSJNb2RlX09mX1BheW1lbnRfX2MiOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgcGF5bWVudF9zb3VyY2VfJHtpfWApLnZhbHVlLAoJCQkJCQkJIkRhdGVfb2ZfcGF5bWVudF9fYyI6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBGaWVsZF8xYjBpZnBsZGF0ZV9jaGVjay0ke2l9YCkudmFsdWUsCgkJCQkJCQkiaW1hZ2VTcmMiOiAiIiwKCQkJCQkJCSJyb3dJZCI6IGkKCQkJCQkJfSkKCQkJCQl9CgkJCQl9CgoKCQkJfQoKCQl9CgoKCQl2YXIgSFRNTF9XaWR0aCA9ICQoIi5tYWluLXdyYXBwZXIiKS53aWR0aCgpOwoJCXZhciBIVE1MX0hlaWdodCA9ICQoIi5tYWluLXdyYXBwZXIiKS5oZWlnaHQoKTsKCQl2YXIgUERGX1dpZHRoID0gODAyOwoJCXZhciBQREZfSGVpZ2h0ID0gMTE1MTsKCQl2YXIgY2FudmFzX2ltYWdlX3dpZHRoID0gSFRNTF9XaWR0aDsKCQl2YXIgY2FudmFzX2ltYWdlX2hlaWdodCA9IEhUTUxfSGVpZ2h0OwoKCQl2YXIgbXlwZkZpbGUgPSBbXTsKCQljb25zdCBteUVsZXMgPSAkKCIubWFpbi13cmFwcGVyIikubm90KCIuaGlkZGVuIik7CgkJbGV0IHRleHRQYXlsb2FkID0gJyc7CgoKCQkvLyBmb3IgKGxldCBpZ3QgPSAwOyBpZ3QgPCBteUVsZXMubGVuZ3RoOyBpZ3QrKykgewoJCS8vIAl0ZXh0UGF5bG9hZCArPSBteUVsZXNbaWd0XS5pbm5lckhUTUw7CgkJLy8gCS8vIGxldCBjYW52YXMgPSBuZXcgUHJvbWlzZSgocmVzbywgcmVqZSkgPT4gewoKCQkvLyAJLy8gCS8vIGNvbnNvbGUubG9nKG15RWxlc1tpZ3RdKTsKCgkJLy8gCS8vIAkvLyBVc2UgeyBhbGxvd1RhaW50OiB0cnVlLCBzY2FsZTogdHJ1ZSB9IHRvIHJlZHVjZSBwZGYgc2l6ZQoJCS8vIAkvLyAJaHRtbDJjYW52YXMobXlFbGVzW2lndF0sIHsgYWxsb3dUYWludDogdHJ1ZSB9KS50aGVuKGFzeW5jIGZ1bmN0aW9uICgKCQkvLyAJLy8gCQljYW52YXMKCQkvLyAJLy8gCSkgewoJCS8vIAkvLyAJCWNhbnZhcy5nZXRDb250ZXh0KCIyZCIpOwoJCS8vIAkvLyAJCWxldCBpbWdEYXRhID0gY2FudmFzLnRvRGF0YVVSTCgiaW1hZ2UvanBlZyIsIDAuNzUpOwoKCQkvLyAJLy8gCQlsZXQgcGRmID0gbmV3IGpzUERGKCJwIiwgInB0IiwgW1BERl9XaWR0aCwgUERGX0hlaWdodF0pOwoJCS8vIAkvLyAJCXBkZi5hZGRJbWFnZSgKCQkvLyAJLy8gCQkJaW1nRGF0YSwKCQkvLyAJLy8gCQkJIkpQRyIsCgkJLy8gCS8vIAkJCTAsCgkJLy8gCS8vIAkJCTAsCgkJLy8gCS8vIAkJCWNhbnZhc19pbWFnZV93aWR0aCwKCQkvLyAJLy8gCQkJY2FudmFzX2ltYWdlX2hlaWdodCwKCQkvLyAJLy8gCQkpOwoKCQkvLyAJLy8gCQljb25zdCBGaWxlUERGID0gbmV3IEZpbGUoCgkJLy8gCS8vIAkJCVtwZGYub3V0cHV0KCJibG9iIildLAoJCS8vIAkvLyAJCQlgbXlwZGYke2lndCArIDF9LnBkZmAsCgkJLy8gCS8vIAkJCXsKCQkvLyAJLy8gCQkJCXR5cGU6ICJhcHBsaWNhdGlvbi9wZGYiLAoJCS8vIAkvLyAJCQl9CgkJLy8gCS8vIAkJKTsKCgkJLy8gCS8vIAkJcmVzbyhGaWxlUERGKTsKCQkvLyAJLy8gCX0pOwoJCS8vIAkvLyB9KTsKCQkvLyAJLy8gbXlwZkZpbGUucHVzaChjYW52YXMpOwoJCS8vIH0KCQkvLyB2YXIgZ2VuZXJhdGVkUGRmRmlsZU5hbWUgPSAnJzsKCgkJLy8gZnVuY3Rpb24gZ2VuZXJhdGVQZGYoKSB7CgkJLy8gCWNvbnN0IHJlcXVlc3RPcHRpb25zID0gewoJCS8vIAkJbWV0aG9kOiAnUE9TVCcsCgkJLy8gCQloZWFkZXJzOgoJCS8vIAkJCXsgJ2NvbnRlbnQtdHlwZSc6ICd0ZXh0L3BsYWluJyB9LAoKCQkvLyAJCWJvZHk6IHRleHRQYXlsb2FkCgkJLy8gCX07CgkJLy8gCWZldGNoKG5vZGVqc3BkZmFwaWxpbmssIHJlcXVlc3RPcHRpb25zKS50aGVuKChyZXNwKSA9PiB7CgkJLy8gCQlyZXR1cm4gcmVzcC5qc29uKCk7CgkJLy8gCX0pLnRoZW4oCgkJLy8gCQkocmVzKSA9PiB7CgkJLy8gCQkJZ2VuZXJhdGVkUGRmRmlsZU5hbWUgPSByZXNbJ2ZpbGVOYW1lJ107CgkJLy8gCQkJaWYoZ2VuZXJhdGVkUGRmRmlsZU5hbWU9PScnKXsKCQkvLyAJCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRlcicpLmNsYXNzTGlzdC5hZGQoJ2hpZGVMb2FkZXInKTsKCQkvLyAJCQkJYWxlcnQoYFBERiBmaWxlIGNvdWxkbid0IGJlIGdlbmVyYXRlZC5gKTsKCQkvLyAJCQl9CgkJLy8gCQkJZWxzZXsKCQkvLyAJCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dlbmVyYXRlZGZvcm1QREYnKS52YWx1ZSA9IGdlbmVyYXRlZFBkZkZpbGVOYW1lOwoJCS8vIAkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZm9ybSIpLnN1Ym1pdCgpOwoJCS8vIAkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZGVyJykuY2xhc3NMaXN0LmFkZCgnaGlkZUxvYWRlcicpOwoKCQkvLyAJCQl9CgkJLy8gCQl9KS5jYXRjaChlcnIgPT4gewoJCS8vIAkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkZXInKS5jbGFzc0xpc3QuYWRkKCdoaWRlTG9hZGVyJyk7CgkJLy8gCQl9KQoJCS8vIH0KCgkJLy8gZ2VuZXJhdGVQZGYoKQoKCQljb25zdCBnZXRGaWVsZFZhbHVlQnlJZCA9IChpZCkgPT4gewoJCQlpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aWR9YCkpIHsKCQkJCXJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjJHtpZH1gKS52YWx1ZTsKCQkJfSBlbHNlIHsKCQkJCXJldHVybiAnJzsKCQkJfQoJCX0KCgkJY29uc3Qga2V5X3ZhbF9tYXAgPSB7CgkJCXBhc3Nwb3J0OiAnUGFzc3BvcnQnLAoJCQlyZWxXaXRoUHJpbWFyeUFwcGxpY2FudDogJ1JlbGF0aW9uU2hpcCcKCQl9CgkJCgkJanNvbkRhdGEuYXBwbGljYW50cy5mb3JFYWNoKChhcHBsaWNhbnQsIGkpID0+IHsKCQkJZm9yIChsZXQga2V5IG9mIE9iamVjdC5rZXlzKGtleV92YWxfbWFwKSkgewoJCQkJYXBwbGljYW50W2tleV0gPSBnZXRGaWVsZFZhbHVlQnlJZChgQSR7aSsxfV8ke2tleV92YWxfbWFwW2tleV19YCk7CgkJCX0KCQkJaWYoaT09MCl7CgkJCQlhcHBsaWNhbnRbJ3JlbFdpdGhQcmltYXJ5QXBwbGljYW50J10gPSAnRG9ub3RJbmNsdWRlJzsKCQkJfQoJCX0pOwoJCWpzb25EYXRhWyd1c2VyQWdlbnQnXSA9IG5hdmlnYXRvci51c2VyQWdlbnQ7CgkJLy8gU3RvcmUgcGF5bG9hZCBpbiB0ZXh0YXJlYQoJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwZGZDb250ZW50JykudGV4dENvbnRlbnQgPSBKU09OLnN0cmluZ2lmeShqc29uRGF0YSk7CgkJbGV0IGZpbGVJbnB1dHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPSJmaWxlIl0nKTsKCQlmb3IgKGxldCBmaWxlIG9mIGZpbGVJbnB1dHMpIHsKCQkJZmlsZS52YWx1ZSA9ICcnOwoJCX0KCQkKCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZm9ybSIpLnN1Ym1pdCgpOwoKCX0pLmNhdGNoKChlcnIpID0+IHsKCQljb25zb2xlLmxvZyhlcnIpOwoJfSk7CgoJcmV0dXJuIG15cHJvbWlzZTsKfQoKCmZ1bmN0aW9uIGFwY2FyZChkYXRhLCBpeCkgewoJY29uc3QgbXlkYXRhID0gZGF0YS5kYXRhOwoJanNvbkRhdGFbJ2FwcGxpY2FudHMnXS5wdXNoKHsKCQl0eXBlOiBhcHBsaWNhbnROdW1bZGF0YS50eXBlXSwKCQlpbWFnZVNyYzogZGF0YS51c2VyLAoJCXBhbk51bWJlcjogbXlkYXRhLnBhbl9udW1iZXIKCQkJPyBteWRhdGEucGFuX251bWJlcgoJCQk6ICJOQSIsCgkJcGFuVmFsaWRhdGVkOiBteWRhdGEucGFuX251bWJlciA/ICJjaGVjayIgOiAieE1hcmsiLAoJCWFhZGhhck51bWJlcjogbXlkYXRhLmFkZGhhcl9udW1iZXIKCQkJPyBteWRhdGEuYWRkaGFyX251bWJlcgoJCQk6ICJOQSIsCgkJbmFtZTogbXlkYXRhLm5hbWUgPyBteWRhdGEubmFtZSA6ICJOQSIsCgkJcGhvbmU6IG15ZGF0YS5waG9uZSA/IG15ZGF0YS5waG9uZSA6ICJOQSIsCgkJZW1haWw6IG15ZGF0YS5lbWFpbCA/IG15ZGF0YS5lbWFpbCA6ICJOQSIsCgkJcGVybUFkZDogbXlkYXRhLnBlcm1hbmVudF9hZGRyZXNzCgkJCT8gbXlkYXRhLnBlcm1hbmVudF9hZGRyZXNzCgkJCTogIk5BIiwKCQljb3JzcEFkZDogZGF0YS5zYW1lQXNQcmltYXJ5CgkJCT8gbXlkYXRhLnBlcm1hbmVudF9hZGRyZXNzCgkJCTogbXlkYXRhLmNvcnJlc3BvbmRlbmNlX2FkZHJlc3MsCgl9KQoJY29uc3QgbXlIdG1sID0gYDxkaXYgY2xhc3M9ImFwcGxpY2FudC1jYXJkLXdyYXBwZXIiPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFwcGxpY2FudC1kZXRhaWwtd3JhcHBlciI+CiAgICAgICAgICAgICAgICAgICAgPGgzPiR7YXBwbGljYW50TnVtW2RhdGEudHlwZV19PC9oMz4KICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFwcGxpY2FudC1jYXJkIj4KICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJhcHBsaWNhbnQtaW1nIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9IiR7ZGF0YS51c2VyCgkJfSIgY2xhc3M9ImltZy1mbHVpZCIgYWx0PSJ1c2VyIiAvPgogICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFwcGxpY2FudC1zaWciPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFwcGxpY2FudC1pbmZvIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPSR7bXlkYXRhLnBhbl9udW1iZXIgPyAiY2hlY2siIDogInhNYXJrIn0+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlBBTjo8L2xhYmVsPjxwPiR7bXlkYXRhLnBhbl9udW1iZXIKCQkJPyBteWRhdGEucGFuX251bWJlcgoJCQk6ICJOQSIKCQl9PC9wPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaSBjbGFzcz0iY2hlY2siPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5BQURIQVI6PC9sYWJlbD48cD4ke215ZGF0YS5hZGRoYXJfbnVtYmVyCgkJCT8gbXlkYXRhLmFkZGhhcl9udW1iZXIKCQkJOiAiTkEiCgkJfTwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFwcGxpY2FudC1kZXRhaWwiPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxoMz4ke2FwcGxpY2FudE51bVtkYXRhLnR5cGVdfTwvaDM+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPHVsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3M9ImFwcGxpY2FudC1saXN0Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5OYW1lPC9sYWJlbD48cD4ke215ZGF0YS5uYW1lID8gbXlkYXRhLm5hbWUgOiAiTkEiCgkJfTwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzPSJhcHBsaWNhbnQtbGlzdCI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+UGhvbmU8L2xhYmVsPjxwPiR7bXlkYXRhLnBob25lID8gbXlkYXRhLnBob25lIDogIk5BIgoJCX08L3A+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaSBjbGFzcz0iYXBwbGljYW50LWxpc3QiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPkVtYWlsPC9sYWJlbD48cD4ke215ZGF0YS5lbWFpbCA/IG15ZGF0YS5lbWFpbCA6ICJOQSIKCQl9PC9wPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3M9ImFwcGxpY2FudC1saXN0Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5QZXJtYW5lbnQgQWRkcmVzczwvbGFiZWw+PHA+JHtteWRhdGEucGVybWFuZW50X2FkZHJlc3MKCQkJPyBteWRhdGEucGVybWFuZW50X2FkZHJlc3MKCQkJOiAiTkEiCgkJfTwvcD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtpeCA9PSAwCgkJCT8gYDxsaSBjbGFzcz0iYXBwbGljYW50LWxpc3QiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPkNvcnJlc3BvbmRhbmNlIEFkZHJlc3M8L2xhYmVsPjxwPiR7ZGF0YS5zYW1lQXNQcmltYXJ5CgkJCQk/IG15ZGF0YS5wZXJtYW5lbnRfYWRkcmVzcwoJCQkJOiBteWRhdGEuY29ycmVzcG9uZGVuY2VfYWRkcmVzcwoJCQl9PC9wPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xpPmAKCQkJOiAiIgoJCX0KICAgICAgICAgICAgICAgICAgICAgICAgICA8L3VsPgogICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+YDsKCgoJcmV0dXJuIG15SHRtbDsKfQoKZnVuY3Rpb24gbXlFc2lnbkZ1bmN0aW9uKCkgewoJc2JtaXREYXRhKHRydWUpOwoKCXNpZ25Nb2RhbC5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsKCWNvbnN0IG1haW5fY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgltYWluX2NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCJlc2lnbl9tYWluY29udGFpbmVyIik7CgoJY29uc3QgZGF0YSA9IGNyZWF0ZUVzaWduRGF0YSgpOwoJZGF0YS5mb3JFYWNoKChhcCwgaSkgPT4gewoJCWNvbnN0IGFwbGNfcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgkJYXBsY19yb3cuY2xhc3NMaXN0LmFkZCgiYXBsY19yb3djb250YWluZXIiKTsKCgkJbWFpbl9jb250YWluZXIuYXBwZW5kQ2hpbGQoYXBsY19yb3cpOwoKCQljb25zdCBhcGxjX3Jvd3NwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIik7CgkJYXBsY19yb3dzcGFuLmlubmVySFRNTCA9IGkgKyAxOwoJCWFwbGNfcm93LmFwcGVuZENoaWxkKGFwbGNfcm93c3Bhbik7CgoJCWNvbnN0IGFwbGNfcm93cHJhZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInAiKTsKCQlhcGxjX3Jvd3ByYWcuaW5uZXJIVE1MID0gYXAudmFsdWU7CgoJCWFwbGNfcm93LmFwcGVuZENoaWxkKGFwbGNfcm93cHJhZyk7CgoJCWNvbnN0IGlucHV0Q3RuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CgkJaW5wdXRDdG4uY2xhc3NMaXN0LmFkZCgiaW5wdXRDdG4iKTsKCQljb25zdCBzZWxlY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzZWxlY3QiKTsKCQlzZWxlY3Quc2V0QXR0cmlidXRlKCJpZCIsIGBBJHtpICsgMX1fJHthcC50eXBlfV9TaWduYXR1cmVfUHJvY2Vzc2ApOwoJCXNlbGVjdC5zZXRBdHRyaWJ1dGUoIm5hbWUiLCBgQSR7aSArIDF9XyR7YXAudHlwZX1fU2lnbmF0dXJlX1Byb2Nlc3NgKTsKCgkJZm9yIChjb25zdCBvcHRpb25WYWwgb2Ygc2lnbmluZ09wdGlvbikgewoJCQljb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJvcHRpb24iKTsKCQkJb3B0aW9uLnNldEF0dHJpYnV0ZSgidmFsdWUiLCBvcHRpb25WYWwudmFsdWUpOwoJCQlvcHRpb24uaW5uZXJUZXh0ID0gb3B0aW9uVmFsLmxhYmVsOwoJCQlzZWxlY3QuYXBwZW5kKG9wdGlvbik7CgkJfQoKCQlpbnB1dEN0bi5hcHBlbmQoc2VsZWN0KTsKCQlhcGxjX3Jvdy5hcHBlbmRDaGlsZChpbnB1dEN0bik7CgoJCW1haW5fY29udGFpbmVyLmFwcGVuZENoaWxkKGFwbGNfcm93KTsKCX0pOwoKCWNvbnN0IG1vZGVsQ29udGVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzaWduSWRDb250ZW50Iik7Cgltb2RlbENvbnRlbnQuaW5uZXJIVE1MID0gIiI7Cgltb2RlbENvbnRlbnQuYXBwZW5kQ2hpbGQobWFpbl9jb250YWluZXIpOwp9Cgo=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPBody>
        <HTTPPropertySet>
          <HTTPProperty name="StreamID">11</HTTPProperty>
          <HTTPProperty name="TotalHeadersSize">194</HTTPProperty>
        </HTTPPropertySet>
      </HTTPResponse>
    </HTTPTask>
    <HTTPTask id="14" hostname="dev.bluealgo.com" path="/smartformup/ui/script.js" url="https://dev.bluealgo.com/smartformup/ui/script.js" ip="144.126.253.3" port="443" client_ip="192.168.0.112" client_port="64262" connectionId="2220" origin="HTML" encodingType="ANSI" ordinal="10" startDateTime="2024-02-16T16:37:19.911+05:30" startTime="2782" endTime="2963" blockedTime="-1" dnsTime="-1" connectTime="-2" sendTime="4294967295" waitTime="4294967295" receiveTime="44" sslNegotiateTime="-1" responseBodySize="26327">
      <HTTPRequest method="GET">
        <HTTPHeaders>
          <HTTPHeaderEntity name=":method" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0VU</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name=":scheme" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cHM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name=":path" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>L3NtYXJ0Zm9ybXVwL3VpL3NjcmlwdC5qcw==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name=":authority" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZGV2LmJsdWVhbGdvLmNvbQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Referer" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cHM6Ly9kZXYuYmx1ZWFsZ28uY29tL3NtYXJ0Zm9ybXVwL2xvYWRpbmRleD9vcHBvcnR1bml0eUlkPTAwNjBvMDAwMDFlU0lKMEFBTyZjdXN0b21lcmlkPWN1c3QxMDA1JmFjY2Vzc3Rva2VuPVJGcFNRVlVJZ2Q0WV9vWU5MODFuYUV4VkxBWWdLUXQ3</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Language" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZW4tVVMsZW47cT0wLjk=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="User-Agent" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEyMS4wLjAuMCBTYWZhcmkvNTM3LjM2</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Encoding" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ki8q</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="cookie" index="9">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SlNFU1NJT05JRD1COEI5REUyNDA1ODE3RDYwMjlFQzM0QzA3NDlEQjJFRg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Om1ldGhvZDogR0VUDQo6c2NoZW1lOiBodHRwcw0KOnBhdGg6IC9zbWFydGZvcm11cC91aS9zY3JpcHQuanMNCjphdXRob3JpdHk6IGRldi5ibHVlYWxnby5jb20NClJlZmVyZXI6IGh0dHBzOi8vZGV2LmJsdWVhbGdvLmNvbS9zbWFydGZvcm11cC9sb2FkaW5kZXg/b3Bwb3J0dW5pdHlJZD0wMDYwbzAwMDAxZVNJSjBBQU8mY3VzdG9tZXJpZD1jdXN0MTAwNSZhY2Nlc3N0b2tlbj1SRnBTUVZVSWdkNFlfb1lOTDgxbmFFeFZMQVlnS1F0Nw0KQWNjZXB0LUxhbmd1YWdlOiBlbi1VUyxlbjtxPTAuOQ0KVXNlci1BZ2VudDogTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEyMS4wLjAuMCBTYWZhcmkvNTM3LjM2DQpBY2NlcHQtRW5jb2Rpbmc6IGd6aXAsIGRlZmxhdGUNCkFjY2VwdDogKi8qDQpjb29raWU6IEpTRVNTSU9OSUQ9QjhCOURFMjQwNTgxN0Q2MDI5RUMzNEMwNzQ5REIyRUYNCg0K</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
          <HTTPCookies>
            <HTTPHeaderEntity name="JSESSIONID" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>QjhCOURFMjQwNTgxN0Q2MDI5RUMzNEMwNzQ5REIyRUY=</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
          </HTTPCookies>
        </HTTPHeaders>
        <HTTPPropertySet>
          <HTTPProperty name="StreamID">13</HTTPProperty>
          <HTTPProperty name="TotalHeadersSize">34</HTTPProperty>
        </HTTPPropertySet>
      </HTTPRequest>
      <HTTPResponse>
        <contentLenght>29516</contentLenght>
        <HTTPHeaders>
          <HTTPHeaderEntity name="Status" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MjAw</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="date" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>RnJpLCAxNiBGZWIgMjAyNCAxMTowNzoxOSBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="content-type" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>YXBwbGljYXRpb24vamF2YXNjcmlwdA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="content-length" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Mjk1MTY=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="access-control-allow-origin" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Kg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="accept-ranges" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ynl0ZXM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="etag" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Vy8iMjk1MTYtMTcwNTI2NDUyNDAwMCI=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="last-modified" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>U3VuLCAxNCBKYW4gMjAyNCAyMDozNToyNCBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="strict-transport-security" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bWF4LWFnZT0xNTcyNDgwMDsgaW5jbHVkZVN1YkRvbWFpbnM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SFRUUC8yLjAgMjAwDQpTdGF0dXM6IDIwMA0KZGF0ZTogRnJpLCAxNiBGZWIgMjAyNCAxMTowNzoxOSBHTVQNCmNvbnRlbnQtdHlwZTogYXBwbGljYXRpb24vamF2YXNjcmlwdA0KY29udGVudC1sZW5ndGg6IDI5NTE2DQphY2Nlc3MtY29udHJvbC1hbGxvdy1vcmlnaW46ICoNCmFjY2VwdC1yYW5nZXM6IGJ5dGVzDQpldGFnOiBXLyIyOTUxNi0xNzA1MjY0NTI0MDAwIg0KbGFzdC1tb2RpZmllZDogU3VuLCAxNCBKYW4gMjAyNCAyMDozNToyNCBHTVQNCnN0cmljdC10cmFuc3BvcnQtc2VjdXJpdHk6IG1heC1hZ2U9MTU3MjQ4MDA7IGluY2x1ZGVTdWJEb21haW5zDQoNCg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPBody>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>KGZ1bmN0aW9uKCkgewoJcmVuZGVyQWxsKCkKCQkudGhlbigocmVzKSA9PiB7CgkJCWlmIChyZXMpIHsKCQkJCWNvbnN0IFBBR0VfQ09VTlQgPSByZXM7CgoJCQkJdmFyIHNpZ25hdHVyZVBhZHMgPSB7fTsKCgkJCQlkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJpbnB1dFtudW1MZW5ndGhdIikuZm9yRWFjaCgoZWwpID0+IHsKCQkJCQlhbGVydCgnZXhlY3V0aW5nJyk7CgkJCQkJY29uc3QgbnVtTGVuZ3RoID0gZWwuZ2V0QXR0cmlidXRlKCJudW1MZW5ndGgiKTsKCQkJCQllbC5zZXRBdHRyaWJ1dGUoCgkJCQkJCSJvbmludmFsaWQiLAoJCQkJCQlgdGhpcy5zZXRDdXN0b21WYWxpZGl0eSgnRW50ZXIgYSAke251bUxlbmd0aH0gZGlnaXQgbnVtYmVyJyk7YAoJCQkJCSk7CgkJCQkJZWwuc2V0QXR0cmlidXRlKCJvbmlucHV0IiwgInRoaXMuc2V0Q3VzdG9tVmFsaWRpdHkoJycpOyIpOwoJCQkJCWVsLnNldEF0dHJpYnV0ZSgib252YWxpZCIsICJ0aGlzLnNldEN1c3RvbVZhbGlkaXR5KCcnKTsiKTsKCQkJCQllbC5zZXRBdHRyaWJ1dGUoIm9uY2hhbmdlIiwgInRoaXMuc2V0Q3VzdG9tVmFsaWRpdHkoJycpOyIpOwoKCQkJCQllbC5zZXRBdHRyaWJ1dGUoIm1pbiIsICIxIiArICIwIi5yZXBlYXQobnVtTGVuZ3RoIC0gMSkpOwoJCQkJCWVsLnNldEF0dHJpYnV0ZSgibWF4IiwgIjkiLnJlcGVhdChudW1MZW5ndGgpKTsKCQkJCX0pOwoKCQkJCWxldCBjdXJyZW50UGFnZSA9IDE7CgkJCQlsZXQgY3VycmVudFN1YlBhZ2UgPSAxOwoJCQkJbGV0IGlkcGNvdW50ID0gMDsKCQkJCWxldCBjdXJyZW50SWRuU3ViUGFnZSA9IDE7CgkJCQlsZXQgaWRwaWRjb3VudCA9IDA7CgkJCQljb25zdCBmb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImZvcm0iKTsKCgkJCQljb25zdCBwcmV2QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInByZXYtYnRuIik7CgkJCQljb25zdCBzYXZlQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInNhdmUtYnRuIik7CgkJCQljb25zdCBlc2lnbkJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzaWduLWJ1dHRvbiIpOwoJCQkJY29uc3QgbW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibXlNb2RhbCIpOwoJCQkJY29uc3Qgc2lnbk1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInNpZ25Nb2RhbCIpOwoJCQkJY29uc3QgY2xvc2VCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCIjbXlNb2RhbCAuY2xvc2UiKVswXTsKCQkJCWNvbnN0IGNsb3NlQnRuU2lnbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIiNzaWduTW9kYWwgLmNsb3NlIilbMF07CgkJCQljb25zdCBlc25CdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZXNpZ24tc2F2ZSIpOwoJCQkJY29uc3QgcHJldmlld2J0bmdyZWVuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInByZXZpZXctYnRuIik7CgkJCQljb25zdCBwcmV3ZXNuQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImluZGl2aWR1YWwtc2lnbi1idXR0b24iKTsKCQkJCWNvbnN0IHByZXZpZXdmYUljb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicHJldmlldy1idG4taWNvbiIpOwoKCgoJCQkJcHJld2VzbkJ0bi5vbmNsaWNrID0gZnVuY3Rpb24oKSB7CgkJCQkJbW9kYWwuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKCQkJCQlteUVzaWduRnVuY3Rpb24oKQoJCQkJfTsKCgkJCQlwcmV2QnRuLm9uY2xpY2sgPSAoZSkgPT4gewoJCQkJCWUucHJldmVudERlZmF1bHQoKTsKCQkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZm9ybS1idG4iKS5pbm5lclRleHQgPSAiTmV4dCI7CgkJCQkJLy9wcmV2aWV3ZmFJY29uLmNsYXNzTGlzdC5hZGQoImhpZGRlbiIpOwoJCQkJCWVzaWduQnRuLmNsYXNzTGlzdC5hZGQoImhpZGRlbiIpOwoKCQkJCQkvLyBoYXJkZWRkIHZhbHVlIGZvciBza2lwIHBhZmUgc2VsZiBkZXNjYXJ0aW9uIGZvcgoJCQkJCWNvbnN0IHByb05hbWUgPSBzY2hlbWFbImZpcnN0LXBhZ2UiXVsicHJvamVjdE5hbWUiXTsKCQkJCQlpZiAoY3VycmVudFBhZ2UgPT0gOSAmJiBwcm9OYW1lID09ICJSYWludHJlZSBCb3VsZXZhcmQiKSB7CgkJCQkJCWNsb3NlUGFnZShjdXJyZW50UGFnZSk7CgkJCQkJCWN1cnJlbnRQYWdlID0gODsKCQkJCQkJcmVuZGVyUGFnZShjdXJyZW50UGFnZSk7CgkJCQkJfQoKCQkJCQkvLyBpZiAoY3VycmVudFBhZ2UgLSAxID09PSAyKSB7CgkJCQkJaWYgKGN1cnJlbnRQYWdlIC0gMSA9PT0gMykgewoJCQkJCQljbG9zZVBhZ2UoY3VycmVudFBhZ2UpOwoJCQkJCQljdXJyZW50UGFnZS0tOwoJCQkJCQlyZW5kZXJQYWdlKGN1cnJlbnRQYWdlKTsKCQkJCQkJY2xvc2VTdWJQYWdlKGN1cnJlbnRQYWdlLCBjdXJyZW50U3ViUGFnZSwgaWRwY291bnQpOwoJCQkJCQkvLyB9IGVsc2UgaWYgKGN1cnJlbnRQYWdlID09PSAyKSB7CgkJCQkJfSBlbHNlIGlmIChjdXJyZW50UGFnZSA9PT0gMykgewoJCQkJCQlpZiAoY3VycmVudFN1YlBhZ2UgLSAxID49IDEpIHsKCQkJCQkJCWN1cnJlbnRTdWJQYWdlLS07CgkJCQkJCQl3aW5kb3cuc2Nyb2xsVG8oeyB0b3A6IDAsIGJlaGF2aW9yOiAic21vb3RoIiB9KTsKCQkJCQkJCWNsb3NlU3ViUGFnZShjdXJyZW50UGFnZSwgY3VycmVudFN1YlBhZ2UsIGlkcGNvdW50KTsKCQkJCQkJfSBlbHNlIHsKCQkJCQkJCWNsb3NlUGFnZShjdXJyZW50UGFnZSk7CgkJCQkJCQljdXJyZW50UGFnZS0tOwoJCQkJCQkJcmVuZGVyUGFnZShjdXJyZW50UGFnZSk7CgkJCQkJCX0KCQkJCQkJLy8gfSBlbHNlIGlmIChjdXJyZW50UGFnZSAtIDEgPT09IDQpIHsKCQkJCQl9IGVsc2UgaWYgKGN1cnJlbnRQYWdlIC0gMSA9PT0gMikgewoJCQkJCQljbG9zZVBhZ2UoY3VycmVudFBhZ2UpOwoJCQkJCQljdXJyZW50UGFnZS0tOwoJCQkJCQlyZW5kZXJQYWdlKGN1cnJlbnRQYWdlKTsKCQkJCQkJY2xvc2VTdWJQYWdlKGN1cnJlbnRQYWdlLCBjdXJyZW50SWRuU3ViUGFnZSwgaWRwaWRjb3VudCk7CgkJCQkJCS8vIH0gZWxzZSBpZiAoY3VycmVudFBhZ2UgPT09IDQpIHsKCQkJCQl9IGVsc2UgaWYgKGN1cnJlbnRQYWdlID09PSAyKSB7CgkJCQkJCWlmIChjdXJyZW50SWRuU3ViUGFnZSAtIDEgPj0gMSkgewoJCQkJCQkJY3VycmVudElkblN1YlBhZ2UtLTsKCQkJCQkJCXdpbmRvdy5zY3JvbGxUbyh7IHRvcDogMCwgYmVoYXZpb3I6ICJzbW9vdGgiIH0pOwoJCQkJCQkJY2xvc2VTdWJQYWdlKGN1cnJlbnRQYWdlLCBjdXJyZW50SWRuU3ViUGFnZSwgaWRwaWRjb3VudCk7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQljbG9zZVBhZ2UoY3VycmVudFBhZ2UpOwoJCQkJCQkJY3VycmVudFBhZ2UtLTsKCQkJCQkJCXJlbmRlclBhZ2UoY3VycmVudFBhZ2UpOwoJCQkJCQl9CgkJCQkJfSBlbHNlIHsKCQkJCQkJY2xvc2VQYWdlKGN1cnJlbnRQYWdlKTsKCQkJCQkJY3VycmVudFBhZ2UtLTsKCQkJCQkJcmVuZGVyUGFnZShjdXJyZW50UGFnZSk7CgkJCQkJfQoJCQkJfTsKCgkJCQljbG9zZUJ0bi5vbmNsaWNrID0gKCkgPT4gewoJCQkJCW1vZGFsLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CgkJCQl9OwoKCQkJCWNsb3NlQnRuU2lnbi5vbmNsaWNrID0gKCkgPT4gewoJCQkJCXNpZ25Nb2RhbC5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwoJCQkJfTsKCgkJCQlzYXZlQnRuLm9uY2xpY2sgPSAoZSkgPT4gewoJCQkJCWUucHJldmVudERlZmF1bHQoKTsKCgkJCQl9OwoKCQkJCWVzaWduQnRuLm9uY2xpY2sgPSBmdW5jdGlvbihlKSB7CgkJCQkJbXlFc2lnbkZ1bmN0aW9uKCkKCQkJCX07CgoJCQkJZXNuQnRuLm9uY2xpY2sgPSBmdW5jdGlvbihlKSB7CgkJCQkJZmluYWxTYXZlKCk7CgkJCQl9OwoKCQkJCWZ1bmN0aW9uIGNsb3NlUGFnZShwYWdlKSB7CgkJCQkJY29uc3QgcGdDdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgcGFnZS0ke3BhZ2V9YCk7CgkJCQkJaWYgKHBnQ3RuKSB7CgkJCQkJCWNvbnN0IGVsZW1lbnRzID0gcGdDdG4ucXVlcnlTZWxlY3RvckFsbCgiaW5wdXQsIHRleHRhcmVhLCBzZWxlY3QiKTsKCgkJCQkJCXBnQ3RuLmNsYXNzTGlzdC5hZGQoImhpZGRlbiIpOwoKCQkJCQkJZWxlbWVudHMuZm9yRWFjaCgoZWwpID0+IHsKCQkJCQkJCWVsLmRpc2FibGVkID0gdHJ1ZTsKCQkJCQkJfSk7CgkJCQkJfQoJCQkJfQoKCQkJCWZ1bmN0aW9uIGNsb3NlU3ViUGFnZShwYWdlLCBzdWJwYWdlLCBjb3VudCkgewoJCQkJCWZvciAobGV0IGkgPSAxOyBpIDw9IGNvdW50OyBpKyspIHsKCgkJCQkJCWxldCBwZ0N0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBwYWdlJHtwYWdlfSR7aX1gKTsKCQkJCQkJLy8gY29uc29sZS5sb2coYHBhZ2Uke3BhZ2V9JHtpfWApOwoJCQkJCQlsZXQgZWxlbWVudHMgPSBwZ0N0bi5xdWVyeVNlbGVjdG9yQWxsKCJpbnB1dCwgdGV4dGFyZWEsIHNlbGVjdCIpOwoJCQkJCQlpZiAoaSAhPSBzdWJwYWdlKSB7CgkJCQkJCQlwZ0N0bi5jbGFzc0xpc3QuYWRkKCJoaWRkZW4iKTsKCQkJCQkJCWVsZW1lbnRzLmZvckVhY2goKGVsKSA9PiB7CgkJCQkJCQkJZWwuZGlzYWJsZWQgPSB0cnVlOwoJCQkJCQkJfSk7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQlwZ0N0bi5jbGFzc0xpc3QucmVtb3ZlKCJoaWRkZW4iKTsKCQkJCQkJCWVsZW1lbnRzLmZvckVhY2goKGVsKSA9PiB7CgkJCQkJCQkJaWYgKAoJCQkJCQkJCQkhZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCJub3RfZWRpdGFibGUiKSAmJgoJCQkJCQkJCQkhZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCJub25hcF9kaXNhYmxlZCIpCgkJCQkJCQkJKSB7CgkJCQkJCQkJCWVsLnJlbW92ZUF0dHJpYnV0ZSgiZGlzYWJsZWQiKTsKCQkJCQkJCQl9CgkJCQkJCQl9KTsKCQkJCQkJfQoJCQkJCX0KCQkJCX0KCgkJCQlmdW5jdGlvbiB2ZXJpZnlDYW52YXMocGFnZUVsZSkgewoJCQkJCWNvbnN0IGNhbnZhcyA9IHBhZ2VFbGUucXVlcnlTZWxlY3RvckFsbCgnY2FudmFzW2Zvcj0ic2lnbiJdJyk7CgkJCQkJZm9yIChjb25zdCBbc2lnUGFkLCBjYW52YXNFbF0gb2YgQXJyYXkuZnJvbShjYW52YXMudmFsdWVzKCkpLm1hcCgKCQkJCQkJKGMpID0+IFtzaWduYXR1cmVQYWRzW2MuaWRdLCBjXQoJCQkJCSkpIHsKCQkJCQkJaWYgKGNhbnZhc0VsLmhhc0F0dHJpYnV0ZSgicmVxdWlyZWQiKSAmJiBzaWdQYWQuaXNFbXB0eSgpKSB7CgkJCQkJCQlyZXR1cm4gZmFsc2U7CgkJCQkJCX0KCQkJCQl9CgkJCQkJcmV0dXJuIHRydWU7CgkJCQl9CgoJCQkJZnVuY3Rpb24gcmVuZGVyUGFnZShwYWdlKSB7CgkJCQkJY29uc3QgbGVmdFBhbm5lbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJsZWZ0LXBhbm5lbCIpOwoKCgkJCQkJaWYgKHBhZ2UgPT09IFBBR0VfQ09VTlQpIHsKCQkJCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImZvcm0tYnRuIikuaW5uZXJUZXh0ID0gIlN1Ym1pdCB3aXRob3V0IEUtc2lnbiI7CgkJCQkJCWlmIChzY2hlbWFbJ2ZpcnN0LXBhZ2UnXVsncXVvdGF0aW9ucGRmJ10gIT0gJycpIHsKCQkJCQkJCWxldCBxdW90YXRpb25CdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcXVvdGF0aW9uLWJ0bicpOwoJCQkJCQkJaWYgKHF1b3RhdGlvbkJ0bikgewoJCQkJCQkJCXF1b3RhdGlvbkJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTsKCQkJCQkJCQlxdW90YXRpb25CdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHsKCQkJCQkJCQkJc2hvd1F1b3RhdGlvbigpOwoJCQkJCQkJCX0pOwoJCQkJCQkJfQoKCQkJCQkJfQoJCQkJCQllc2lnbkJ0bi5jbGFzc0xpc3QucmVtb3ZlKCJoaWRkZW4iKTsKCgkJCQkJCWxldCBpc0NvbmNlbnQgPSB0cnVlOwoJCQkJCQljb25zdCBmaXJfcERhdGEgPSBzY2hlbWFbImZpcnN0LXBhZ2UiXTsKCgkJCQkJCWlmIChmaXJfcERhdGEpIHsKCQkJCQkJCWNvbnN0IGZvcm1EYXRhID0gZmlyX3BEYXRhWyJjb25zZW50Zm9ybSJdOyAgICAgLy8gVG8gYmUgdW5jb21tZW50ZWQKCQkJCQkJCS8vIGNvbnN0IGZvcm1EYXRhID0gdHJ1ZTsgICAgIC8vIFRvIGJlIGNvbW1lbnRlZAoKCQkJCQkJCWlmICghZm9ybURhdGEgfHwgZm9ybURhdGEgPT09ICJmYWxzZSIpIHsKCQkJCQkJCQlpc0NvbmNlbnQgPSBmYWxzZTsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCQlpZiAoaXNDb25jZW50IHx8IGZpcl9wRGF0YVsncXVvdGF0aW9ucGRmJ10gIT0gJycpIHsKCQkJCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJmb3JtLWJ0biIpLnNldEF0dHJpYnV0ZSgiZGlzYWJsZWQiLCB0cnVlKTsKCQkJCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzaWduLWJ1dHRvbiIpLnNldEF0dHJpYnV0ZSgiZGlzYWJsZWQiLCB0cnVlKTsKCQkJCQkJfQoJCQkJCQllbHNlIHsKCQkJCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJmb3JtLWJ0biIpLnJlbW92ZUF0dHJpYnV0ZSgiZGlzYWJsZWQiKTsKCQkJCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzaWduLWJ1dHRvbiIpLnJlbW92ZUF0dHJpYnV0ZSgiZGlzYWJsZWQiKTsKCQkJCQkJfQoKCQkJCQl9IGVsc2UgewoJCQkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZm9ybS1idG4iKS5yZW1vdmVBdHRyaWJ1dGUoImRpc2FibGVkIik7CgkJCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzaWduLWJ1dHRvbiIpLnJlbW92ZUF0dHJpYnV0ZSgiZGlzYWJsZWQiKTsKCgkJCQkJfQoKCQkJCQlpZiAocGFnZSA9PSAxKSB7CgkJCQkJCWxlZnRQYW5uZWwuY2xhc3NMaXN0LmFkZCgiaGlkZGVuIik7CgkJCQkJfSBlbHNlIHsKCQkJCQkJbGVmdFBhbm5lbC5jbGFzc0xpc3QucmVtb3ZlKCJoaWRkZW4iKTsKCQkJCQl9CgoJCQkJCWlmIChwYWdlID4gMSkgewoJCQkJCQlwcmV2QnRuLmNsYXNzTGlzdC5yZW1vdmUoImhpZGRlbiIpOwoJCQkJCX0gZWxzZSB7CgkJCQkJCXByZXZCdG4uY2xhc3NMaXN0LmFkZCgiaGlkZGVuIik7CgkJCQkJfQoKCQkJCQljb25zdCBuZXdQZ0N0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBwYWdlLSR7cGFnZX1gKTsKCQkJCQlpZiAocGFnZSA9PT0gMSkgewoJCQkJCQljb25zdCBvbGRQZ0N0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBwYWdlLSR7cGFnZSArIDF9YCk7CgkJCQkJCW9sZFBnQ3RuLmlubmVySFRNTCA9ICcnOwoJCQkJCX0KCQkJCQluZXdQZ0N0bi5jbGFzc0xpc3QucmVtb3ZlKCJoaWRkZW4iKTsKCgkJCQkJbmV3UGdDdG4ucXVlcnlTZWxlY3RvckFsbCgiaW5wdXQsIHRleHRhcmVhLCBzZWxlY3QiKS5mb3JFYWNoKChlbCkgPT4gewoJCQkJCQlpZiAoCgkJCQkJCQkhZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCJub3RfZWRpdGFibGUiKSAmJgoJCQkJCQkJIWVsLmNsYXNzTGlzdC5jb250YWlucygibm9uYXBfZGlzYWJsZWQiKQoJCQkJCQkpIHsKCQkJCQkJCWVsLnJlbW92ZUF0dHJpYnV0ZSgiZGlzYWJsZWQiKTsKCQkJCQkJfQoKCQkJCQkJaWYgKGVsLmNsYXNzTGlzdC5jb250YWlucygibm9uYXBfZGlzYWJsZWQiKSkgewoJCQkJCQkJZWwuc2V0QXR0cmlidXRlKCJkaXNhYmxlZCIsIHRydWUpOwoJCQkJCQl9CgkJCQkJfSk7CgoJCQkJCXdpbmRvdy5zY3JvbGxUbyh7IHRvcDogMCwgYmVoYXZpb3I6ICJzbW9vdGgiIH0pOwoJCQkJfQoKCgoJCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImZvcm0tYnRuIikub25jbGljayA9IChlKSA9PiB7CgkJCQkJY29uc3QgcHJvTmFtZSA9IHNjaGVtYVsiZmlyc3QtcGFnZSJdWyJwcm9qZWN0TmFtZSJdOwoJCQkJCS8vaGFyZGNvZGUgc2tpcCBmb3IgcGFydGljdWxhciBwcm9qZWN0CQoJCQkJCWlmIChjdXJyZW50UGFnZSA9PSA3ICYmIHByb05hbWUgPT0gIlJhaW50cmVlIEJvdWxldmFyZCIpIHsKCQkJCQkJY2xvc2VQYWdlKDcpOwoJCQkJCQljdXJyZW50UGFnZSA9IDk7CgkJCQkJCXJlbmRlclBhZ2UoY3VycmVudFBhZ2UpOwoJCQkJCQlyZXR1cm47CgkJCQkJfQoKCQkJCQkvLyBTdG9wIHVzZXIgY2xpY2tpbmcgbmV4dCBidXR0b24gaWYgaW1hZ2UgaXMgYmVpbmcgdXBsb2FkZWQKCQkJCQlpZiAoY3VycmVudFBhZ2UgPT0gMikgewoJCQkJCQlpZiAoaW1hZ2VVcGxvYWRpbmcubGVuZ3RoID4gMCkgewoJCQkJCQkJYWxlcnQoJ1BsZWFzZSB3YWl0ISBVcGxvYWRpbmcgaW1hZ2UgdG8gc2VydmVyJyk7CgkJCQkJCQlyZXR1cm47CgkJCQkJCX0KCQkJCQl9CgoJCQkJCWlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZm9ybS1idG4nKS5pbm5lclRleHQgPT0gJ1N1Ym1pdCB3aXRob3V0IEUtc2lnbicpIHsKCQkJCQkJY29uc3QgcGdDdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgcGFnZS0ke2N1cnJlbnRQYWdlfWApOwoJCQkJCQljb25zdCBteWNoZWNrRWxlID0gcGdDdG4ucXVlcnlTZWxlY3RvcigiLnRuY19hZ3JlZSIpOwoJCQkJCQlpZiAobXljaGVja0VsZSkgewoJCQkJCQkJaWYgKCFteWNoZWNrRWxlLmNoZWNrZWQpIHsKCQkJCQkJCQljb25zdCBpbnZUZXh0ID0gaGFzU29tZU5leHRTaWJsaW5nVGhlQ2xhc3MoCgkJCQkJCQkJCW15Y2hlY2tFbGUsCgkJCQkJCQkJCSJ0bmNfYWdyZWVUZXh0IgoJCQkJCQkJCSk7CgkJCQkJCQkJaW52VGV4dC5zdHlsZS5jb2xvciA9ICJyZWQiOwoJCQkJCQkJCXJldHVybjsKCQkJCQkJCX0gZWxzZSB7CgoJCQkJCQkJCWZpbmFsU2F2ZSgpOwoJCQkJCQkJCXJldHVybjsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0KCQkJCQkvLyBpZiAoY3VycmVudFBhZ2UgIT0gMiAmJiBjdXJyZW50UGFnZSAhPSA0KSB7CgkJCQkJaWYgKGN1cnJlbnRQYWdlICE9IDIgJiYgY3VycmVudFBhZ2UgIT0gMykgewoJCQkJCQljb25zdCBwZ0N0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBwYWdlLSR7Y3VycmVudFBhZ2V9YCk7CgkJCQkJCWNvbnN0IG15Y2hlY2tFbGUgPSBwZ0N0bi5xdWVyeVNlbGVjdG9yKCIudG5jX2FncmVlIik7CgkJCQkJCWlmIChteWNoZWNrRWxlKSB7CgkJCQkJCQlpZiAoIW15Y2hlY2tFbGUuY2hlY2tlZCkgewoJCQkJCQkJCWNvbnN0IGludlRleHQgPSBoYXNTb21lTmV4dFNpYmxpbmdUaGVDbGFzcygKCQkJCQkJCQkJbXljaGVja0VsZSwKCQkJCQkJCQkJInRuY19hZ3JlZVRleHQiCgkJCQkJCQkJKTsKCQkJCQkJCQlpbnZUZXh0LnN0eWxlLmNvbG9yID0gInJlZCI7CgkJCQkJCQkJcmV0dXJuOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfSBlbHNlIHsKCQkJCQkJaWYgKGN1cnJlbnRQYWdlID09PSAyKSB7CgkJCQkJCQkvLyBIYW5kbGluZyBwYWdlIDMgc3BlY2lhbCBidWcKCQkJCQkJCWNvbnN0IHBhZ2UzQ2hpbGRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BhZ2UtMycpLmNoaWxkcmVuOwoKCQkJCQkJCWxldCBhbGxWaXNpYmxlID0gdHJ1ZTsKCQkJCQkJCWZvciAobGV0IGkgPSAxOyBpIDwgcGFnZTNDaGlsZHMubGVuZ3RoOyBpKyspIHsKCQkJCQkJCQlpZiAocGFnZTNDaGlsZHNbaV0uY2xhc3NMaXN0LmNvbnRhaW5zKCdoaWRkZW4nKSkgewoJCQkJCQkJCQlhbGxWaXNpYmxlID0gZmFsc2U7CgkJCQkJCQkJCWJyZWFrOwoJCQkJCQkJCX0KCQkJCQkJCX0KCQkJCQkJCWlmIChhbGxWaXNpYmxlKSB7CgkJCQkJCQkJZm9yIChsZXQgaSA9IDI7IGkgPCBwYWdlM0NoaWxkcy5sZW5ndGg7IGkrKykgewoJCQkJCQkJCQlwYWdlM0NoaWxkc1tpXS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTsKCQkJCQkJCQl9CgkJCQkJCQl9CgoJCQkJCQkJLy8gQnVnIGZpeCBlbmRzIGhlcmUKCQkJCQkJfQoKCQkJCQkJLy8gaWYgKGN1cnJlbnRQYWdlID09PSAyKSB7CgkJCQkJCWlmIChjdXJyZW50UGFnZSA9PT0gMykgewoJCQkJCQkJLy8gTWFrZSBQQU4gY2FyZCBmaWVsZCBub24tbWFuZGF0b3J5IGlmIAoJCQkJCQkJLy8gSSBkbyBub3QgaGF2ZSBhIHBhbiBjYXJkIGNoZWNrYm94IGlzIGNoZWNrZWQKCQkJCQkJCWlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFuTm90YXZhaWxhYmxlMicpKSB7CgkJCQkJCQkJaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYW5Ob3RhdmFpbGFibGUyJykuY2hlY2tlZCkgewoJCQkJCQkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnQTJfSW5kaXZpZHVhbF9QQU5fTm9fMScpLnJlbW92ZUF0dHJpYnV0ZSgncmVxdWlyZWQnKTsKCQkJCQkJCQl9CgkJCQkJCQkJZWxzZSB7CgkJCQkJCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdBMl9JbmRpdmlkdWFsX1BBTl9Ob18xJykuc2V0QXR0cmlidXRlKCdyZXF1aXJlZCcsIHRydWUpOwoJCQkJCQkJCX0KCQkJCQkJCX0KCgkJCQkJCQlpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Bhbk5vdGF2YWlsYWJsZTMnKSkgewoJCQkJCQkJCWlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFuTm90YXZhaWxhYmxlMycpLmNoZWNrZWQpIHsKCQkJCQkJCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ0EzX0luZGl2aWR1YWxfUEFOX05vXzEnKS5yZW1vdmVBdHRyaWJ1dGUoJ3JlcXVpcmVkJyk7CgkJCQkJCQkJfQoJCQkJCQkJCWVsc2UgewoJCQkJCQkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnQTNfSW5kaXZpZHVhbF9QQU5fTm9fMScpLnNldEF0dHJpYnV0ZSgncmVxdWlyZWQnLCB0cnVlKTsKCQkJCQkJCQl9CgkJCQkJCQl9CgoJCQkJCQkJY29uc3QgdG90YWxBcHBsaWNhbnRzID0gc2NoZW1hWyJhcHBsaWNhbnQtZGV0YWlscyJdLmFwcGxpY2FudENvdW50OwoKCQkJCQkJCS8vIGFsZXJ0KHRvdGFsQXBwbGljYW50cyk7CgkJCQkJCQkvLyBjb25zb2xlLmxvZyhjdXJyZW50U3ViUGFnZSk7CgkJCQkJCQkvLyBmb3IobGV0IGk9KGN1cnJlbnRTdWJQYWdlKjIgLSAxKTtpPD1NYXRoLm1pbih0b3RhbEFwcGxpY2FudHMsIGN1cnJlbnRTdWJQYWdlKjIpO2krKyl7CgkJCQkJCQkvLyAgIGNvbnNvbGUubG9nKGkpOwoJCQkJCQkJLy8gfQoJCQkJCQkJY29uc3QgcGdzdWJDdG5jaGVjayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKAoJCQkJCQkJCWBwYWdlJHtjdXJyZW50UGFnZX0ke2N1cnJlbnRTdWJQYWdlfWAKCQkJCQkJCSk7CgoJCQkJCQkJLy8gVXNpbmcgcXVlcnlTZWxlY3RvckFsbCgpIGFzIHBhZ2UgMyBjYW4gaGF2ZSBtb3JlCgkJCQkJCQkvLyB0aGFuIG9uZSB0JmMgY2hlY2tib3hlcwoKCQkJCQkJCWNvbnN0IG15Y2hlY2tFbGVzID0gcGdzdWJDdG5jaGVjay5xdWVyeVNlbGVjdG9yQWxsKCIudG5jX2FncmVlIik7CgkJCQkJCQlmb3IgKGNvbnN0IG15Y2hlY2tFbGUgb2YgbXljaGVja0VsZXMpIHsgICAvLyBtYW5vagoJCQkJCQkJCWlmIChteWNoZWNrRWxlLmlkID09PSAncGFnZTNfbGFzdF9jdXN0b21faWQnKSB7CgkJCQkJCQkJCWNvbnRpbnVlOwoJCQkJCQkJCX0KCQkJCQkJCQlpZiAobXljaGVja0VsZSkgewoJCQkJCQkJCQlpZiAoIW15Y2hlY2tFbGUuY2hlY2tlZCkgewoJCQkJCQkJCQkJY29uc3QgaW52VGV4dCA9IGhhc1NvbWVOZXh0U2libGluZ1RoZUNsYXNzKAoJCQkJCQkJCQkJCW15Y2hlY2tFbGUsCgkJCQkJCQkJCQkJInRuY19hZ3JlZVRleHQiCgkJCQkJCQkJCQkpOwoJCQkJCQkJCQkJaW52VGV4dC5zdHlsZS5jb2xvciA9ICJyZWQiOwoJCQkJCQkJCQkJcmV0dXJuOwoJCQkJCQkJCQl9CgkJCQkJCQkJfQoJCQkJCQkJfQoJCQkJCQkJLy8gfSBlbHNlIGlmIChjdXJyZW50UGFnZSA9PT0gNCkgewoJCQkJCQl9IGVsc2UgaWYgKGN1cnJlbnRQYWdlID09PSAyKSB7CgkJCQkJCQljb25zdCBwZ3N1YkN0bmNoZWNrID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoCgkJCQkJCQkJYHBhZ2Uke2N1cnJlbnRQYWdlfSR7Y3VycmVudElkblN1YlBhZ2V9YAoJCQkJCQkJKTsKCQkJCQkJCWNvbnN0IG15Y2hlY2tFbGUgPSBwZ3N1YkN0bmNoZWNrLnF1ZXJ5U2VsZWN0b3IoIi50bmNfYWdyZWUiKTsKCQkJCQkJCWlmIChteWNoZWNrRWxlKSB7CgkJCQkJCQkJaWYgKCFteWNoZWNrRWxlLmNoZWNrZWQpIHsKCQkJCQkJCQkJY29uc3QgaW52VGV4dCA9IGhhc1NvbWVOZXh0U2libGluZ1RoZUNsYXNzKAoJCQkJCQkJCQkJbXljaGVja0VsZSwKCQkJCQkJCQkJCSJ0bmNfYWdyZWVUZXh0IgoJCQkJCQkJCQkpOwoJCQkJCQkJCQlpbnZUZXh0LnN0eWxlLmNvbG9yID0gInJlZCI7CgkJCQkJCQkJCXJldHVybjsKCQkJCQkJCQl9CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQl9CgoJCQkJCS8vIFZhbGlkYXRpbmcgd2hldGhlciBPVFAgaXMgdmVyaWZpZWQgc3VjY2Vzc2Z1bGx5IG9yIG5vdAoJCQkJCWlmIChjdXJyZW50UGFnZSA9PT0gNSkgewoJCQkJCQlpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI0NQQUdSRUUnKSkgewoJCQkJCQkJaWYgKCFkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjQ1BBR1JFRScpLmNoZWNrZWQpIHsKCQkJCQkJCQlhbGVydCgnUGxlYXNlIHByb3ZpZGUgY29uc2VudCcpOwoJCQkJCQkJCXJldHVybjsKCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJaWYgKCFib29raW5nVmVyaWZpZWQpIHsKCQkJCQkJCQkJYWxlcnQoJ09UUCBub3QgdmVyaWZpZWQnKTsKCQkJCQkJCQkJcmV0dXJuOwoJCQkJCQkJCX0KCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0KCgoJCQkJCWlmIChlLnRhcmdldC5pbm5lclRleHQgPT09ICJTdWJtaXQiKSB7CgkJCQkJCXNibWl0RGF0YShmYWxzZSk7CgkJCQkJCWZpbmFsU2F2ZSgpOwoJCQkJCX0KCgkJCQkJZnVuY3Rpb24gc2F2ZWRhdGEoY3JwKSB7CgkJCQkJCS8vIGlmIChjcnAgPiAxKSB7CgkJCQkJCWlmIChjcnAgPiAyKSB7CgkJCQkJCQljb25zdCBmaW5hbERhdGEgPSBmaW5hbFN1Ym1pdCgpOwoKCQkJCQkJCWZpbmFsRGF0YS5hcHBlbmQoCgkJCQkJCQkJImFwcGxpY2FudENvdW50IiwKCQkJCQkJCQlzY2hlbWFbImFwcGxpY2FudC1kZXRhaWxzIl0uYXBwbGljYW50Q291bnQKCQkJCQkJCSk7CgoJCQkJCQkJY29uc3QgcmVxdWVzdE9wdGlvbnMgPSB7CgkJCQkJCQkJbWV0aG9kOiAiUE9TVCIsCgkJCQkJCQkJYm9keTogZmluYWxEYXRhLAoJCQkJCQkJCXJlZGlyZWN0OiAiZm9sbG93IiwKCQkJCQkJCX07CgoJCQkJCQkJZmV0Y2godXBkYXRlRm9ybURhdGFBUEksIHJlcXVlc3RPcHRpb25zKTsKCQkJCQkJfQoJCQkJCX0KCQkJCQlzYXZlZGF0YShjdXJyZW50UGFnZSk7CgoJCQkJCWlmIChjdXJyZW50UGFnZSA8IFBBR0VfQ09VTlQpIHsKCQkJCQkJZS5wcmV2ZW50RGVmYXVsdCgpOwoKCQkJCQkJbGV0IHBhZ2VDdG4gPSAnJzsKCQkJCQkJaWYgKGN1cnJlbnRQYWdlICE9IDMpIHsKCQkJCQkJCXBnQ3RuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYHBhZ2UtJHtjdXJyZW50UGFnZX1gKTsKCQkJCQkJfQoJCQkJCQllbHNlIHsKCQkJCQkJCXBnQ3RuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYHBhZ2Uke2N1cnJlbnRQYWdlfSR7Y3VycmVudFN1YlBhZ2V9YCk7CgkJCQkJCX0KCgkJCQkJCWNvbnN0IGVsZW1lbnRzID0gcGdDdG4ucXVlcnlTZWxlY3RvckFsbCgiaW5wdXQsIHRleHRhcmVhLCBzZWxlY3QiKTsKCgkJCQkJCS8vIGlmIChjdXJyZW50UGFnZSA9PT0gNCkgewoJCQkJCQlpZiAoY3VycmVudFBhZ2UgPT09IDIpIHsKCQkJCQkJCWNvbnN0IHBnc3ViQ3RuY2hlY2sgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgKCQkJCQkJCQlgcGFnZSR7Y3VycmVudFBhZ2V9JHtjdXJyZW50SWRuU3ViUGFnZX1gCgkJCQkJCQkpOwoJCQkJCQkJLy8gaWYgKCF2ZXJpZnlNaW5SZXEocGdzdWJDdG5jaGVjaykpIHsKCQkJCQkJCS8vICAgcmV0dXJuOwoJCQkJCQkJLy8gfQoJCQkJCQl9CgoJCQkJCQlmb3IgKGNvbnN0IGVsIG9mIGVsZW1lbnRzKSB7CgkJCQkJCQlpZiAoIWVsLmNoZWNrVmFsaWRpdHkoKSkgewoJCQkJCQkJCWVsLnJlcG9ydFZhbGlkaXR5KCk7CgkJCQkJCQkJcmV0dXJuOwoJCQkJCQkJfQoJCQkJCQl9CgoJCQkJCQlpZiAoY3VycmVudFBhZ2UgKyAxID09PSA3KSB7CgkJCQkJCQlvbmxvYWR3aW4oKTsKCQkJCQkJfQoKCQkJCQkJaWYgKGN1cnJlbnRQYWdlICsgMSA9PT0gMikgewoJCQkJCQkJY29uc3QgbXlFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIi5hcGN0X3R5cGVfZGl2Iik7CgoJCQkJCQkJbGV0IHJlcV90eXBlID0gW107CgkJCQkJCQlmb3IgKGxldCBpID0gMTsgaSA8PSBteUVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7CgkJCQkJCQkJbGV0IHRhcmdldEVsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBhcHBsaWNhbnRfJHtpfWApLnZhbHVlOwoKCQkJCQkJCQljb25zdCBhcHBfZGV0aWFscyA9IHNjaGVtYVsiZmlyc3QtcGFnZSJdWyJhcHBsaWNhbnRfZGV0YWlscyJdOwoJCQkJCQkJCWNvbnN0IGN1c3RvbWVyRGV0YWlscyA9IHsKCQkJCQkJCQkJY3VzdG9tZXJpZDogYXBwX2RldGlhbHNbMF0uY3VzdG9tZXJpZCwKCQkJCQkJCQkJaWQ6IGFwcF9kZXRpYWxzWzBdLmlkLAoJCQkJCQkJCX07CgoJCQkJCQkJCWNvbnN0IGRldGFpbHMgPSB7CgkJCQkJCQkJCUFwcGxpY2FudF9UeXBlOiB0YXJnZXRFbGUsCgkJCQkJCQkJCUFwcGxpY2FudF9Qb3NpdGlvbjogYEEke2l9YCwKCQkJCQkJCQkJY3VzdG9tZXJpZDogY3VzdG9tZXJEZXRhaWxzLmN1c3RvbWVyaWQsCgkJCQkJCQkJCWlkOiBjdXN0b21lckRldGFpbHMuaWQsCgkJCQkJCQkJfTsKCQkJCQkJCQlyZXFfdHlwZS5wdXNoKGRldGFpbHMpOwoJCQkJCQkJfQoJCQkJCQkJaWYgKAoJCQkJCQkJCSFkb2N1bWVudAoJCQkJCQkJCQkuZ2V0RWxlbWVudEJ5SWQoYHBhZ2UtJHtjdXJyZW50UGFnZSArIDF9YCkKCQkJCQkJCQkJLmhhc0NoaWxkTm9kZXMoKQoJCQkJCQkJKSB7CgkJCQkJCQkJdmFyIG15SGVhZGVycyA9IG5ldyBIZWFkZXJzKCk7CgkJCQkJCQkJbXlIZWFkZXJzLmFwcGVuZCgiQ29udGVudC1UeXBlIiwgImFwcGxpY2F0aW9uL2pzb24iKTsKCgkJCQkJCQkJdmFyIHJhdyA9IEpTT04uc3RyaW5naWZ5KHsKCQkJCQkJCQkJYXBwbGljYW50X2RldGFpbHM6IHJlcV90eXBlLAoJCQkJCQkJCX0pOwoKCQkJCQkJCQljb25zdCByZXF1ZXN0T3B0aW9ucyA9IHsKCQkJCQkJCQkJbWV0aG9kOiAiUE9TVCIsCgkJCQkJCQkJCWhlYWRlcnM6IG15SGVhZGVycywKCQkJCQkJCQkJYm9keTogcmF3LAoJCQkJCQkJCQlyZWRpcmVjdDogImZvbGxvdyIsCgkJCQkJCQkJfTsKCgkJCQkJCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Zvcm0tYnRuJykuZGlzYWJsZWQgPSB0cnVlOwoJCQkJCQkJCWZldGNoKGdlbmVyaWNBUEksIHJlcXVlc3RPcHRpb25zKQoJCQkJCQkJCQkudGhlbigocmVzcG9uc2UpID0+IHJlc3BvbnNlLmpzb24oKSkKCQkJCQkJCQkJLnRoZW4oKHJlc3BvbnNlKSA9PiB7CgkJCQkJCQkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZm9ybS1idG4nKS5kaXNhYmxlZCA9IGZhbHNlOwoJCQkJCQkJCQkJY29uc3QgYXBwbGljYW50X2RldGFpbHNjb2xzID0gcmVzcG9uc2UuYXBwbGljYW50X2RldGFpbHM7CgkJCQkJCQkJCQljb25zdCBpZGVudGlmaWNhdGlvbmNvbHMgPSByZXNwb25zZS5jb2xzOwoKCQkJCQkJCQkJCWNvbnN0IGF2YWlsc2VjID0KCQkJCQkJCQkJCQlzY2hlbWFbImFwcGxpY2FudC1kZXRhaWxzIl1bInN1Yi1zZWN0aW9ucyJdWwoJCQkJCQkJCQkJCXNjaGVtYVsiYXBwbGljYW50LWRldGFpbHMiXVsic3ViLXNlY3Rpb25zIl0ubGVuZ3RoIC0gMQoJCQkJCQkJCQkJCV07CgoJCQkJCQkJCQkJY29uc3Qgc2NoZW1hQXJyID0gYXBwbGljYW50X2RldGFpbHNjb2xzLmNvbmNhdChhdmFpbHNlYyk7CgkJCQkJCQkJCQlzY2hlbWFbImFwcGxpY2FudC1kZXRhaWxzIl1bInN1Yi1zZWN0aW9ucyJdID0gc2NoZW1hQXJyOwoJCQkJCQkJCQkJc2NoZW1hWyJhcHBsaWNhbnQtZGV0YWlscyJdLmFwcGxpY2FudENvdW50ID0KCQkJCQkJCQkJCQlyZXNwb25zZS5hcHBsaWNhbnRDb3VudDsKCQkJCQkJCQkJCXNjaGVtYVsiaWRlbnRpZmljYXRpb24iXVsiY29scyJdID0gcmVzcG9uc2UuY29sczsKCgkJCQkJCQkJCQljb25zdCBhcGN0Q3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYXBwbGljYW50Q291bnQiKTsKCQkJCQkJCQkJCWFwY3RDdC52YWx1ZSA9IHJlc3BvbnNlLmFwcGxpY2FudENvdW50OwoKCQkJCQkJCQkJCWNvbnN0IHBlclBhZ2UgPSBzY2hlbWFbImFwcGxpY2FudC1kZXRhaWxzIl1bInBlci1wYWdlIl07CgoJCQkJCQkJCQkJbGV0IGNvdW50ID0gYXBwbGljYW50X2RldGFpbHNjb2xzLmxlbmd0aCAlIHBlclBhZ2U7CgoJCQkJCQkJCQkJaWRwY291bnQgPQoJCQkJCQkJCQkJCWNvdW50ID4gMAoJCQkJCQkJCQkJCQk/IChhcHBsaWNhbnRfZGV0YWlsc2NvbHMubGVuZ3RoIC0gY291bnQpIC8gcGVyUGFnZSArIDEKCQkJCQkJCQkJCQkJOiBhcHBsaWNhbnRfZGV0YWlsc2NvbHMubGVuZ3RoIC8gcGVyUGFnZTsKCgkJCQkJCQkJCQlsZXQgaWRjb3VudCA9IGlkZW50aWZpY2F0aW9uY29scy5sZW5ndGggJSAzOwoJCQkJCQkJCQkJaWRwaWRjb3VudCA9CgkJCQkJCQkJCQkJaWRjb3VudCA+IDAKCQkJCQkJCQkJCQkJPyAoaWRlbnRpZmljYXRpb25jb2xzLmxlbmd0aCAtIGlkY291bnQpIC8gMyArIDEKCQkJCQkJCQkJCQkJOiBpZGVudGlmaWNhdGlvbmNvbHMubGVuZ3RoIC8gMzsKCgkJCQkJCQkJCQljb25zdCBwYWdlZGV0ID0gcmVuZGVyYXBwbGljYW50U2VjdGlvbigKCQkJCQkJCQkJCQlhcHBsaWNhbnRfZGV0YWlsc2NvbHMsCgkJCQkJCQkJCQkJaWRwY291bnQsCgkJCQkJCQkJCQkJcGVyUGFnZQoJCQkJCQkJCQkJKTsKCgkJCQkJCQkJCQkvL2FwcGVuZAoJCQkJCQkJCQkJLy8gY29uc3QgZnJtZ3JwID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoCgkJCQkJCQkJCQkvLyAgIGBwYWdlLSR7Y3VycmVudFBhZ2UgKyAxfWAKCQkJCQkJCQkJCS8vICk7CgkJCQkJCQkJCQljb25zdCBmcm1ncnAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgKCQkJCQkJCQkJCQlgcGFnZS0ke2N1cnJlbnRQYWdlICsgMn1gCgkJCQkJCQkJCQkpOwoJCQkJCQkJCQkJZnJtZ3JwLmlubmVySFRNTCA9ICcnOwoJCQkJCQkJCQkJZnJtZ3JwLmFwcGVuZChwYWdlZGV0KTsKCgkJCQkJCQkJCQlmcm1ncnAKCQkJCQkJCQkJCQkucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT0iY2hlY2tib3giXScpCgkJCQkJCQkJCQkJLmZvckVhY2goKGVsZSkgPT4gewoJCQkJCQkJCQkJCQlpZiAoZWxlLmlkKSB7CgkJCQkJCQkJCQkJCQlpZiAoCgkJCQkJCQkJCQkJCQkJZWxlLmlkLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoInNhbWVfYXNfcHJpbWFyeSIpCgkJCQkJCQkJCQkJCQkpIHsKCQkJCQkJCQkJCQkJCQllbGUub25jbGljayA9IGZ1bmN0aW9uKGUpIHsKCQkJCQkJCQkJCQkJCQkJc2FtZWFzUHJpbWFyeShlLnRhcmdldC5jaGVja2VkLCBlLnRhcmdldC5pZCk7CgkJCQkJCQkJCQkJCQkJfTsKCgkJCQkJCQkJCQkJCQkJc2FtZWFzUHJpbWFyeShlbGUuY2hlY2tlZCwgZWxlLmlkKTsKCQkJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCQkJCWlmICgKCQkJCQkJCQkJCQkJCQllbGUuaWQKCQkJCQkJCQkJCQkJCQkJLnRvTG93ZXJDYXNlKCkKCQkJCQkJCQkJCQkJCQkJLmluY2x1ZGVzKCJzYW1lX2FzX3Blcm1hbmVudF9hZGRyZXNzIikKCQkJCQkJCQkJCQkJCSkgewoJCQkJCQkJCQkJCQkJCWVsZS5vbmNsaWNrID0gZnVuY3Rpb24oZSkgewoJCQkJCQkJCQkJCQkJCQljb25zdCBjcnR5cGUgPSBhYXBwbGljYXRuRmllbGQoZS50YXJnZXQuaWQpOwoJCQkJCQkJCQkJCQkJCQlmYWN0b3JDZEFkZHJlc3MoY3J0eXBlLCBlLnRhcmdldC5jaGVja2VkKTsKCQkJCQkJCQkJCQkJCQl9OwoJCQkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJCQl9CgkJCQkJCQkJCQkJfSk7CgoJCQkJCQkJCQkJY29uc3QgZnJtZ3JwMSA9IHJlbmRlcklkZW50aWZpY2F0aW9uKGlkZW50aWZpY2F0aW9uY29scyk7CgoJCQkJCQkJCQkJY29uc3QgYXBsaSA9IHVwZGF0ZUFjdGlvbihmcm1ncnApOwoJCQkJCQkJCQkJY29uc3QgaWRudCA9IHVwZGF0ZUFjdGlvbihmcm1ncnAxKTsKCgkJCQkJCQkJCQlzaWduYXR1cmVQYWRzID0gewoJCQkJCQkJCQkJCS4uLmlkbnQsCgkJCQkJCQkJCQkJLi4uYXBsaSwKCQkJCQkJCQkJCQkuLi5zaWduYXR1cmVQYWRzLAoJCQkJCQkJCQkJfTsKCgkJCQkJCQkJCQljbG9zZVBhZ2UoY3VycmVudFBhZ2UpOwoJCQkJCQkJCQkJLy8gY2xvc2VQYWdlKDQpOwoJCQkJCQkJCQkJY2xvc2VQYWdlKDMpOwoKCQkJCQkJCQkJCWlmICghdmVyaWZ5Q2FudmFzKHBnQ3RuKSkgewoJCQkJCQkJCQkJCXJldHVybjsKCQkJCQkJCQkJCX0KCgkJCQkJCQkJCQljdXJyZW50UGFnZSsrOwoJCQkJCQkJCQkJcmVuZGVyUGFnZShjdXJyZW50UGFnZSwgY3VycmVudFN1YlBhZ2UpOwoJCQkJCQkJCQkJY2xvc2VTdWJQYWdlKGN1cnJlbnRQYWdlLCBjdXJyZW50U3ViUGFnZSwgaWRwY291bnQpOwoJCQkJCQkJCQl9KQoJCQkJCQkJCQkuY2F0Y2goZXJyID0+IHsKCQkJCQkJCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmb3JtLWJ0bicpLmRpc2FibGVkID0gZmFsc2U7CgkJCQkJCQkJCX0pOwoJCQkJCQkJfSBlbHNlIHsKCgkJCQkJCQkJaWYgKCF2ZXJpZnlDYW52YXMocGdDdG4pKSB7CgkJCQkJCQkJCXJldHVybjsKCQkJCQkJCQl9CgkJCQkJCQkJY2xvc2VQYWdlKGN1cnJlbnRQYWdlKTsKCQkJCQkJCQljdXJyZW50UGFnZSsrOwoJCQkJCQkJCXJlbmRlclBhZ2UoY3VycmVudFBhZ2UpOwoJCQkJCQkJCWNsb3NlU3ViUGFnZShjdXJyZW50UGFnZSwgY3VycmVudFN1YlBhZ2UsIGlkcGNvdW50KTsKCQkJCQkJCX0KCQkJCQkJCS8vIH0gZWxzZSBpZiAoY3VycmVudFBhZ2UgPT09IDIpIHsKCQkJCQkJfSBlbHNlIGlmIChjdXJyZW50UGFnZSA9PT0gMykgewoKCQkJCQkJCWlmIChjdXJyZW50U3ViUGFnZSArIDEgPD0gaWRwY291bnQpIHsKCQkJCQkJCQlsZXQgcGdzdWJDdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgKCQkJCQkJCQkJYHBhZ2Uke2N1cnJlbnRQYWdlfSR7Y3VycmVudElkblN1YlBhZ2V9YAoJCQkJCQkJCSk7CgoJCQkJCQkJCWlmICghdmVyaWZ5Q2FudmFzKHBnc3ViQ3RuKSkgewoJCQkJCQkJCQlyZXR1cm47CgkJCQkJCQkJfQoKCQkJCQkJCQljdXJyZW50U3ViUGFnZSsrOwoJCQkJCQkJCXdpbmRvdy5zY3JvbGxUbyh7IHRvcDogMCwgYmVoYXZpb3I6ICJzbW9vdGgiIH0pOwoJCQkJCQkJCWNsb3NlU3ViUGFnZShjdXJyZW50UGFnZSwgY3VycmVudFN1YlBhZ2UsIGlkcGNvdW50KTsKCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJaWYgKCF2ZXJpZnlDYW52YXMocGdDdG4pKSB7CgkJCQkJCQkJCXJldHVybjsKCQkJCQkJCQl9CgkJCQkJCQkJY2xvc2VQYWdlKGN1cnJlbnRQYWdlKTsKCQkJCQkJCQljdXJyZW50UGFnZSsrOwoJCQkJCQkJCXJlbmRlclBhZ2UoY3VycmVudFBhZ2UpOwoJCQkJCQkJfQoJCQkJCQkJLy8gfSBlbHNlIGlmIChjdXJyZW50UGFnZSArIDEgPT09IDQpIHsKCQkJCQkJfSBlbHNlIGlmIChjdXJyZW50UGFnZSArIDEgPT09IDIpIHsKCQkJCQkJCWlmICghdmVyaWZ5Q2FudmFzKHBnQ3RuKSkgewoJCQkJCQkJCXJldHVybjsKCQkJCQkJCX0KCQkJCQkJCWNsb3NlUGFnZShjdXJyZW50UGFnZSk7CgkJCQkJCQljdXJyZW50UGFnZSsrOwoJCQkJCQkJcmVuZGVyUGFnZShjdXJyZW50UGFnZSk7CgkJCQkJCQljbG9zZVN1YlBhZ2UoY3VycmVudFBhZ2UsIGN1cnJlbnRJZG5TdWJQYWdlLCBpZHBpZGNvdW50KTsKCQkJCQkJCS8vIH0gZWxzZSBpZiAoY3VycmVudFBhZ2UgPT09IDQpIHsKCQkJCQkJfSBlbHNlIGlmIChjdXJyZW50UGFnZSA9PT0gMikgewoJCQkJCQkJaWYgKGN1cnJlbnRJZG5TdWJQYWdlICsgMSA8PSBpZHBpZGNvdW50KSB7CgkJCQkJCQkJY29uc3QgcGdzdWJDdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgKCQkJCQkJCQkJYHBhZ2Uke2N1cnJlbnRQYWdlfSR7Y3VycmVudElkblN1YlBhZ2V9YAoJCQkJCQkJCSk7CgkJCQkJCQkJaWYgKCF2ZXJpZnlDYW52YXMocGdzdWJDdG4pKSB7CgkJCQkJCQkJCXJldHVybjsKCQkJCQkJCQl9CgoJCQkJCQkJCWN1cnJlbnRJZG5TdWJQYWdlKys7CgkJCQkJCQkJd2luZG93LnNjcm9sbFRvKHsgdG9wOiAwLCBiZWhhdmlvcjogInNtb290aCIgfSk7CgkJCQkJCQkJY2xvc2VTdWJQYWdlKGN1cnJlbnRQYWdlLCBjdXJyZW50SWRuU3ViUGFnZSwgaWRwaWRjb3VudCk7CgkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCWlmICghdmVyaWZ5Q2FudmFzKHBnQ3RuKSkgewoJCQkJCQkJCQlyZXR1cm47CgkJCQkJCQkJfQoKCQkJCQkJCQljbG9zZVBhZ2UoY3VycmVudFBhZ2UpOwoJCQkJCQkJCWN1cnJlbnRQYWdlKys7CgkJCQkJCQkJcmVuZGVyUGFnZShjdXJyZW50UGFnZSk7CgoJCQkJCQkJCXNldFRpbWVvdXQoKCkgPT4gewoJCQkJCQkJCQkvLyBsZXQgZ2V0SXRlbXNBMSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2lkRGV0YWlsc0ExJykpOwoJCQkJCQkJCQlsZXQgZ2V0SXRlbXNBMSA9IEpTT04ucGFyc2UoaWREZXRhaWxzQTEpOwoJCQkJCQkJCQlpZiAoZ2V0SXRlbXNBMSkgewoJCQkJCQkJCQkJZm9yIChjb25zdCBrZXkgb2YgZ2V0SXRlbXNBMSkgewoJCQkJCQkJCQkJCWZvciAoY29uc3QgbmV3X3ZhbCBvZiBrZXkuZm9ybSkgewoJCQkJCQkJCQkJCQlpZiAobmV3X3ZhbC5kZWZhdWx0VmFsdWUgJiYgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobmV3X3ZhbC5pZCkpIHsKCQkJCQkJCQkJCQkJCWlmIChuZXdfdmFsLmlkLmluY2x1ZGVzKCdBQURIQVInKSkgewoJCQkJCQkJCQkJCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG5ld192YWwuaWQpLnZhbHVlID0gbmV3X3ZhbC5kZWZhdWx0VmFsdWUgPyBwYXJzZUludChuZXdfdmFsLmRlZmF1bHRWYWx1ZS5yZXBsYWNlKC9ccy9nLCAnJykpIDogJycKCQkJCQkJCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJCQkJCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobmV3X3ZhbC5pZCkudmFsdWUgPSBuZXdfdmFsLmRlZmF1bHRWYWx1ZSA/IG5ld192YWwuZGVmYXVsdFZhbHVlIDogJycKCQkJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCX0KCQkJCQkJCQkJfQoJCQkJCQkJCQkvLyBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnaWREZXRhaWxzQTEnKTsKCQkJCQkJCQkJaWREZXRhaWxzQTEgPSAnJzsKCQkJCQkJCQl9LCA1MDApOwoJCQkJCQkJfQoJCQkJCQl9IGVsc2UgewoJCQkJCQkJaWYgKCF2ZXJpZnlDYW52YXMocGdDdG4pKSB7CgkJCQkJCQkJcmV0dXJuOwoJCQkJCQkJfQoKCQkJCQkJCWNsb3NlUGFnZShjdXJyZW50UGFnZSk7CgkJCQkJCQljdXJyZW50UGFnZSsrOwoJCQkJCQkJcmVuZGVyUGFnZShjdXJyZW50UGFnZSk7CgkJCQkJCX0KCQkJCQl9IGVsc2UgewoJCQkJCQlkb2N1bWVudAoJCQkJCQkJLnF1ZXJ5U2VsZWN0b3JBbGwoImlucHV0LCB0ZXh0YXJlYSwgc2VsZWN0IikKCQkJCQkJCS5mb3JFYWNoKChlKSA9PiB7CgkJCQkJCQkJZS5yZW1vdmVBdHRyaWJ1dGUoImRpc2FibGVkIik7CgkJCQkJCQl9KTsKCgkJCQkJCWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2NhbnZhc1tmb3I9InNpZ24iXScpLmZvckVhY2goKGUpID0+IHsKCQkJCQkJCWNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKTsKCQkJCQkJCWlucHV0LnNldEF0dHJpYnV0ZSgidHlwZSIsICJoaWRkZW4iKTsKCgkJCQkJCQljb25zdCBzaWdQYWQgPSBzaWduYXR1cmVQYWRzW2UuaWRdOwoKCQkJCQkJCWNvbnN0IGRhdGFVUkkgPSBzaWdQYWQudG9EYXRhVVJMKCk7CgoJCQkJCQkJaW5wdXQuc2V0QXR0cmlidXRlKCJ2YWx1ZSIsIGRhdGFVUkkpOwoJCQkJCQkJaW5wdXQuc2V0QXR0cmlidXRlKCJuYW1lIiwgZS5nZXRBdHRyaWJ1dGUoIm5hbWUiKSk7CgoJCQkJCQkJZm9ybS5hcHBlbmRDaGlsZChpbnB1dCk7CgkJCQkJCX0pOwoJCQkJCX0KCQkJCX07CgoJCQkJZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnY2FudmFzW2Zvcj0ic2lnbiJdJykuZm9yRWFjaCgoZSkgPT4gewoJCQkJCXNpZ25hdHVyZVBhZHNbZS5pZF0gPSBuZXcgU2lnbmF0dXJlUGFkKGUpOwoJCQkJCWUud2lkdGggPSAyMjA7CgkJCQkJZS5oZWlnaHQgPSA4MDsKCQkJCX0pOwoKCQkJCWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2J1dHRvbltmb3I9ImNsZWFyLXNpZ24iXScpLmZvckVhY2goKGUpID0+IHsKCQkJCQllLm9uY2xpY2sgPSAoZXYpID0+IHsKCQkJCQkJZXYucHJldmVudERlZmF1bHQoKTsKCQkJCQkJc2lnbmF0dXJlUGFkc1tlLmdldEF0dHJpYnV0ZSgiY29udHJvbCIpXS5jbGVhcigpOwoJCQkJCX07CgkJCQl9KTsKCgkJCQljb25zdCBwaWNrZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbcm9sZT0icGhvdG8tcGlja2VyIl0nKTsKCgkJCQlpZiAocGlja2VycykgewoJCQkJCXBpY2tlcnMuZm9yRWFjaCgocGlja2VyKSA9PiB7CgkJCQkJCWNvbnN0IHByZXZpZXcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgKCQkJCQkJCXBpY2tlci5nZXRBdHRyaWJ1dGUoInByZXZpZXctaWQiKQoJCQkJCQkpOwoJCQkJCQlwaWNrZXIuYWRkRXZlbnRMaXN0ZW5lcigiY2hhbmdlIiwgZnVuY3Rpb24oZSkgewoJCQkJCQkJY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKCQkJCQkJCWNvbnN0IGZpbGUgPSBlLnRhcmdldC5maWxlc1swXTsKCQkJCQkJCXJlYWRlci5vbmxvYWQgPSAoZSkgPT4gewoJCQkJCQkJCXByZXZpZXcuc3JjID0gZS50YXJnZXQucmVzdWx0OwoJCQkJCQkJfTsKCgkJCQkJCQlyZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTsKCQkJCQkJfSk7CgkJCQkJfSk7CgkJCQl9CgoKCgkJCQlkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCIuaW5wdXRDdG4iKS5mb3JFYWNoKChjdG4pID0+IHsKCQkJCQljdG4uYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCAoKSA9PiB7CgkJCQkJCWN0bi5xdWVyeVNlbGVjdG9yKCJpbnB1dCxzZWxlY3QsIHRleHRhcmVhIikuZm9jdXMoKTsKCQkJCQl9KTsKCQkJCQljb25zdCBsYWJlbCA9IGN0bi5xdWVyeVNlbGVjdG9yKCJsYWJlbCIpOwoJCQkJCWNvbnN0IGlucHV0ID0gY3RuLnF1ZXJ5U2VsZWN0b3IoCgkJCQkJCSdpbnB1dFt0eXBlPSJ0ZXh0Il0saW5wdXRbdHlwZT0ibnVtYmVyIl0saW5wdXRbdHlwZT0iZW1haWwiXSx0ZXh0YXJlYScKCQkJCQkpOwoKCQkJCQkvLyBpZiAoaW5wdXQgJiYgaW5wdXQudGFnTmFtZSA9PT0gIlRFWFRBUkVBIikgewoJCQkJCS8vICAgY3RuLmNsYXNzTGlzdC5hZGQoInctMTAwIik7CgkJCQkJLy8gfQoKCQkJCQlpZiAobGFiZWwgJiYgaW5wdXQpIHsKCQkJCQkJY29uc3QgdHlwZSA9IGlucHV0LmdldEF0dHJpYnV0ZSgidHlwZSIpOwoJCQkJCQlpZiAodHlwZSA9PT0gImNoZWNrYm94IikgewoJCQkJCQkJbGFiZWwuY2xhc3NMaXN0LmFkZCgiZmxleCIpOwoJCQkJCQl9CgoJCQkJCQlpbnB1dC5zZXRBdHRyaWJ1dGUoInBsYWNlaG9sZGVyIiwgbGFiZWwuaW5uZXJUZXh0KTsKCgkJCQkJCWlmIChpbnB1dC52YWx1ZSA9PT0gIiIpIGxhYmVsLmNsYXNzTGlzdC5hZGQoImhpZGRlbiIpOwoKCQkJCQkJaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigiZm9jdXMiLCBmdW5jdGlvbigpIHsKCQkJCQkJCWlucHV0LnJlbW92ZUF0dHJpYnV0ZSgicGxhY2Vob2xkZXIiKTsKCQkJCQkJCWxhYmVsLmNsYXNzTGlzdC5yZW1vdmUoImhpZGRlbiIpOwoJCQkJCQl9KTsKCQkJCQkJaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigiYmx1ciIsIGZ1bmN0aW9uKCkgewoJCQkJCQkJaWYgKGlucHV0LnZhbHVlID09ICIiKSBsYWJlbC5jbGFzc0xpc3QuYWRkKCJoaWRkZW4iKTsKCQkJCQkJCWlucHV0LnNldEF0dHJpYnV0ZSgicGxhY2Vob2xkZXIiLCBsYWJlbC5pbm5lclRleHQpOwoJCQkJCQl9KTsKCQkJCQl9CgkJCQl9KTsKCgkJCQlmdW5jdGlvbiBzZW5kT1RQKCkgewoJCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZW5kaW5nX290cCcpLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGUnKTsKCQkJCQljb25zdCBwaG9uZU51bTEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKAoJCQkJCQkiI0ExX0luZGl2aWR1YWxfTW9iaWxlXzEiCgkJCQkJKS52YWx1ZTsKCQkJCQljb25zdCBwaG9uZU51bTIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKAoJCQkJCQkiI0ExX0luZGl2aWR1YWxfQWRkaXRpb25hbE1vYmlsZSIKCQkJCQkpLnZhbHVlOwoKCQkJCQlpZiAocGhvbmVOdW0xIHx8IHBob25lTnVtMikgewoJCQkJCQlwb3BPVFBFbGUuY2xhc3NMaXN0LmFkZCgic2hvdy1tb2RhbCIpOwoJCQkJCQlsZXQgZmluYWxQaG9uZSA9IHBob25lTnVtMSA/IHBob25lTnVtMSA6IHBob25lTnVtMjsKCQkJCQkJLy8gZmluYWxQaG9uZSA9ICI5MSIgKyBmaW5hbFBob25lOwoJCQkJCQlmaW5hbFBob25lID0gJysnICsgaXRpLmdldFNlbGVjdGVkQ291bnRyeURhdGEoKS5kaWFsQ29kZSArIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwaG9uZV93aXRoX2NvdW50cnljb2RlIikudmFsdWU7CgkJCQkJCWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNteU9UUFBvcHVwIC5vdHBfcGhvbmUiKS5pbm5lclRleHQgPQoJCQkJCQkJZmluYWxQaG9uZTsKCgkJCQkJCWNvbnN0IG90cEhlYWRlciA9IG5ldyBIZWFkZXJzKCk7CgkJCQkJCW90cEhlYWRlci5hcHBlbmQoIkNvbnRlbnQtVHlwZSIsICJhcHBsaWNhdGlvbi9qc29uIik7CgoJCQkJCQljb25zdCB1cmxzID0gbmV3IFVSTCh3aW5kb3cubG9jYXRpb24uaHJlZik7CgkJCQkJCWNvbnN0IHNlYXJjaFBhcmFtcyA9IHVybHMuc2VhcmNoUGFyYW1zOwoKCQkJCQkJY29uc3QgY3VzSWQgPSBzZWFyY2hQYXJhbXMuZ2V0KCJjdXN0b21lcmlkIik7CgkJCQkJCWNvbnN0IG9wcnRJZCA9IHNlYXJjaFBhcmFtcy5nZXQoIm9wcG9ydHVuaXR5SWQiKTsKCQkJCQkJY29uc3QgcHJpbWFyeUVtYWlsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIkExX0luZGl2aWR1YWxfRW1haWxfMSIpLnZhbHVlOwoJCQkJCQljb25zdCBwcm9OYW1lID0gc2NoZW1hWyJmaXJzdC1wYWdlIl1bInByb2plY3ROYW1lIl07CgkJCQkJCS8vbGV0IG15ZXh1cmwgPSBgP21vYmlsZW5vPSR7ZmluYWxQaG9uZX0mYWN0aW9uPWdlbmVyYXRlb3RwJmN1c3RvbWVyaWQ9JHtjdXNJZH0mb3Bwb3J0dW5pdHlpZD0ke29wcnRJZH1gOwoJCQkJCQlsZXQgbXlleHVybCA9IGA/bW9iaWxlbm89JHtmaW5hbFBob25lfSZhY3Rpb249Z2VuZXJhdGVvdHAmY3VzdG9tZXJpZD0ke2N1c0lkfSZvcHBvcnR1bml0eWlkPSR7b3BydElkfSZlbWFpbD0ke3ByaW1hcnlFbWFpbH0mcHJvamVjdE5hbWU9JHtwcm9OYW1lfWA7CgkJCQkJCWxldCBteVVSTCA9IG90cFZlcmlmeUFQSSArIG15ZXh1cmw7CgoJCQkJCQljb25zdCByZXF1ZXN0T3B0aW9ucyA9IHsKCQkJCQkJCW1ldGhvZDogIlBPU1QiLAoJCQkJCQkJaGVhZGVyczogb3RwSGVhZGVyLAoJCQkJCQkJYm9keToge30sCgkJCQkJCQlyZWRpcmVjdDogImZvbGxvdyIsCgkJCQkJCX07CgoJCQkJCQlmZXRjaChteVVSTCwgcmVxdWVzdE9wdGlvbnMpCgkJCQkJCQkudGhlbihyZXMgPT4gewoJCQkJCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZW5kaW5nX290cCcpLmNsYXNzTGlzdC5hZGQoJ2hpZGUnKTsKCQkJCQkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VudF9vdHAnKS5jbGFzc0xpc3QucmVtb3ZlKCdoaWRlJyk7CgkJCQkJCQkJaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3RwX2Vycm9yJykuY2xhc3NMaXN0LmNvbnRhaW5zKCdoaWRlJykpCgkJCQkJCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvdHBfZXJyb3InKS5jbGFzc0xpc3QuYWRkKCdoaWRlJyk7CgkJCQkJCQl9KQoJCQkJCQkJLmNhdGNoKGVyciA9PiB7CgkJCQkJCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlbmRpbmdfb3RwJykuY2xhc3NMaXN0LmFkZCgnaGlkZScpOwoJCQkJCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvdHBfZXJyb3InKS5jbGFzc0xpc3QucmVtb3ZlKCdoaWRlJyk7CgkJCQkJCQkJaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VudF9vdHAnKS5jbGFzc0xpc3QuY29udGFpbnMoJ2hpZGUnKSkKCQkJCQkJCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlbnRfb3RwJykuY2xhc3NMaXN0LmFkZCgnaGlkZScpOwoJCQkJCQkJfSkKCQkJCQl9CgkJCQl9CgoJCQkJY29uc3QgcG9wT1RQRWxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm15T1RQUG9wdXAiKTsKCQkJCWNvbnN0IHZlcmlFbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiQ1BBR1JFRSIpOwoJCQkJY29uc3QgZ2V0T1RQID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dldF9vdHAnKTsKCQkJCXZhciBzZWxlY3RlZENvdW50cnlDb2RlID0gJzkxJzsKCgoJCQkJLy8gSW5pdGlhbGl6ZSB0aGUgaW50bFRlbElucHV0IHBsdWdpbiBvbiB0aGUgcGhvbmUgaW5wdXQgZmllbGQKCQkJCXZhciBwaG9uZUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInBob25lX3dpdGhfY291bnRyeWNvZGUiKTsKCQkJCXZhciBpdGkgPSB3aW5kb3cuaW50bFRlbElucHV0KHBob25lSW5wdXQsIHsKCQkJCQlzZXBhcmF0ZURpYWxDb2RlOiB0cnVlLAoJCQkJCWluaXRpYWxDb3VudHJ5OiAiaW4iLAoJCQkJfSk7CgoJCQkJLy8gVXBkYXRlIHRoZSBjb3VudHJ5IGNvZGUgd2hlbmV2ZXIgdGhlIHVzZXIgc2VsZWN0cyBhIGRpZmZlcmVudCBjb3VudHJ5CgkJCQlpdGkucHJvbWlzZS50aGVuKGZ1bmN0aW9uKCkgewoJCQkJCWl0aS5nZXRTZWxlY3RlZENvdW50cnlEYXRhUHJvbWlzZSgpLnRoZW4oZnVuY3Rpb24oY291bnRyeURhdGEpIHsKCQkJCQkJc2VsZWN0ZWRDb3VudHJ5Q29kZSA9IGNvdW50cnlEYXRhLmRpYWxDb2RlOwoJCQkJCQlwaG9uZUlucHV0LnZhbHVlID0gJysnICsgc2VsZWN0ZWRDb3VudHJ5Q29kZSArIGlucHV0UGhvbmVOdW1iZXI7CgkJCQkJfSk7CgkJCQl9KTsKCgkJCQl2ZXJpRWxlLm9uY2hhbmdlID0gZnVuY3Rpb24oZSkgewoJCQkJCWlmIChlLnRhcmdldC5jaGVja2VkKSB7CgoJCQkJCQkvLyBIaWRlIE9UUCBzZW50L2Vycm9yIGJsb2NrcyBpbml0aWFsbHkKCQkJCQkJaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VudF9vdHAnKS5jbGFzc0xpc3QuY29udGFpbnMoJ2hpZGUnKSkKCQkJCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZW50X290cCcpLmNsYXNzTGlzdC5hZGQoJ2hpZGUnKTsKCQkJCQkJaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3RwX2Vycm9yJykuY2xhc3NMaXN0LmNvbnRhaW5zKCdoaWRlJykpCgkJCQkJCQlkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3RwX2Vycm9yJykuY2xhc3NMaXN0LmFkZCgnaGlkZScpOwoKCQkJCQkJLy8gU2V0IHRoZSBpbml0aWFsIGNvdW50cnkgY29kZQoJCQkJCQlzZWxlY3RlZENvdW50cnlDb2RlID0gaXRpLmdldFNlbGVjdGVkQ291bnRyeURhdGEoKS5kaWFsQ29kZTsKCQkJCQkJY29uc3QgaW5wdXRQaG9uZU51bWJlcgoJCQkJCQkJPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKAoJCQkJCQkJCSIjQTFfSW5kaXZpZHVhbF9Nb2JpbGVfMSIKCQkJCQkJCSkudmFsdWUgfHwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigKCQkJCQkJCQkiI0ExX0luZGl2aWR1YWxfQWRkaXRpb25hbE1vYmlsZSIKCQkJCQkJCSkudmFsdWUKCQkJCQkJcGhvbmVJbnB1dC52YWx1ZSA9IGlucHV0UGhvbmVOdW1iZXI7CgkJCQkJCXBvcE9UUEVsZS5jbGFzc0xpc3QuYWRkKCJzaG93LW1vZGFsIik7CgkJCQkJfQoJCQkJfTsKCgkJCQlnZXRPVFAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHsKCQkJCQlzZW5kT1RQKCk7CgkJCQl9KTsKCgkJCQlwb3BPVFBFbGUucXVlcnlTZWxlY3RvcigiLmNhbmNlbF9CdG4iKS5vbmNsaWNrID0gZnVuY3Rpb24oKSB7CgkJCQkJdmVyaUVsZS5jaGVja2VkID0gZmFsc2U7CgkJCQkJcG9wT1RQRWxlLmNsYXNzTGlzdC5yZW1vdmUoInNob3ctbW9kYWwiKTsKCQkJCX07CgoJCQkJcG9wT1RQRWxlLnF1ZXJ5U2VsZWN0b3IoIi5vdHByZXNlbmRfQnRuIikub25jbGljayA9IGZ1bmN0aW9uKCkgewoJCQkJCXNlbmRPVFAoKTsKCQkJCX07CgoJCQkJcG9wT1RQRWxlLnF1ZXJ5U2VsZWN0b3IoIi52ZXJpZnlfQnRuIikub25jbGljayA9IGZ1bmN0aW9uKCkgewoJCQkJCWNvbnN0IHVybHMgPSBuZXcgVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmKTsKCQkJCQljb25zdCBzZWFyY2hQYXJhbXMgPSB1cmxzLnNlYXJjaFBhcmFtczsKCQkJCQljb25zdCBwaG9uZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoCgkJCQkJCSIjbXlPVFBQb3B1cCAub3RwX3Bob25lIgoJCQkJCSkuaW5uZXJUZXh0OwoKCQkJCQljb25zdCBvdHBWYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjbXlPVFBQb3B1cCAjdmVyaWZ5T3RwIikudmFsdWU7CgkJCQkJaWYgKG90cFZhbCkgewoJCQkJCQkvLyBpZiAodHJ1ZSkgewoJCQkJCQljb25zdCBjdXNJZCA9IHNlYXJjaFBhcmFtcy5nZXQoImN1c3RvbWVyaWQiKTsKCQkJCQkJY29uc3Qgb3BydElkID0gc2VhcmNoUGFyYW1zLmdldCgib3Bwb3J0dW5pdHlJZCIpOwoJCQkJCQlsZXQgbXlleHVybCA9IGA/bW9iaWxlbm89JHtwaG9uZX0mYWN0aW9uPXZlcmlmeW90cCZjdXN0b21lcmlkPSR7Y3VzSWR9Jm9wcG9ydHVuaXR5aWQ9JHtvcHJ0SWR9JmVudGVyZWRPdHA9JHtvdHBWYWx9YDsKCQkJCQkJbGV0IG15VVJMID0gb3RwVmVyaWZ5QVBJICsgbXlleHVybDsKCgkJCQkJCWNvbnN0IG90cEhlYWRlciA9IG5ldyBIZWFkZXJzKCk7CgkJCQkJCW90cEhlYWRlci5hcHBlbmQoIkNvbnRlbnQtVHlwZSIsICJhcHBsaWNhdGlvbi9qc29uIik7CgoJCQkJCQljb25zdCByZXF1ZXN0T3B0aW9ucyA9IHsKCQkJCQkJCW1ldGhvZDogIlBPU1QiLAoJCQkJCQkJaGVhZGVyczogb3RwSGVhZGVyLAoJCQkJCQkJYm9keToge30sCgkJCQkJCQlyZWRpcmVjdDogImZvbGxvdyIsCgkJCQkJCX07CgoJCQkJCQlmZXRjaChteVVSTCwgcmVxdWVzdE9wdGlvbnMpCgkJCQkJCQkudGhlbigocmVzcG9uc2UpID0+IHJlc3BvbnNlLnRleHQoKSkKCQkJCQkJCS50aGVuKChyZXN1bHQpID0+IHsKCQkJCQkJCQlpZiAocmVzdWx0ID09PSAidmVyaWZpZWQiKSB7CgkJCQkJCQkJCS8vaWYgKCkgewoKCQkJCQkJCQkJcG9wT1RQRWxlLnF1ZXJ5U2VsZWN0b3IoIi53YXJuaWctdGV4dCIpLmlubmVyVGV4dCA9ICIiOwoJCQkJCQkJCQlwb3BPVFBFbGUuY2xhc3NMaXN0LnJlbW92ZSgic2hvdy1tb2RhbCIpOwoJCQkJCQkJCQl2ZXJpRWxlLnNldEF0dHJpYnV0ZSgiZGlzYWJsZWQiLCB0cnVlKTsKCQkJCQkJCQkJdmVyaUVsZS5jbGFzc0xpc3QuYWRkKCJub3RfZWRpdGFibGUiKTsKCQkJCQkJCQkJYm9va2luZ1ZlcmlmaWVkID0gdHJ1ZTsKCQkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCQkvLyBwb3BPVFBFbGUucXVlcnlTZWxlY3RvcigiLndhcm5pZy10ZXh0IikuaW5uZXJUZXh0ID0gIiI7CgkJCQkJCQkJCS8vIHBvcE9UUEVsZS5jbGFzc0xpc3QucmVtb3ZlKCJzaG93LW1vZGFsIik7CgkJCQkJCQkJCS8vIHZlcmlFbGUuc2V0QXR0cmlidXRlKCJkaXNhYmxlZCIsIHRydWUpOwoJCQkJCQkJCQkvLyB2ZXJpRWxlLmNsYXNzTGlzdC5hZGQoIm5vdF9lZGl0YWJsZSIpOwoJCQkJCQkJCQkvLyBib29raW5nVmVyaWZpZWQgPSB0cnVlOwoJCQkJCQkJCQlwb3BPVFBFbGUucXVlcnlTZWxlY3RvcigiLndhcm5pZy10ZXh0IikuaW5uZXJUZXh0ID0KCQkJCQkJCQkJCSJPVFAgaW52YWxpZCBvciBleHBpcmVkISI7CgkJCQkJCQkJfQoJCQkJCQkJfSk7CgkJCQkJfSBlbHNlIHsKCQkJCQkJcG9wT1RQRWxlLnF1ZXJ5U2VsZWN0b3IoIi53YXJuaWctdGV4dCIpLmlubmVyVGV4dCA9CgkJCQkJCQkiUGxlYXNlIGVudGVyIE9UUCI7CgkJCQkJfQoJCQkJfTsKCQkJfQoJCX0pCgkJLmNhdGNoKChlcnIpID0+IHsKCgkJCWNvbnNvbGUubG9nKGVycik7CgoJCX0pOwp9KSgpOwo=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPBody>
        <HTTPPropertySet>
          <HTTPProperty name="StreamID">13</HTTPProperty>
          <HTTPProperty name="TotalHeadersSize">193</HTTPProperty>
        </HTTPPropertySet>
      </HTTPResponse>
    </HTTPTask>
  </HTTPTask>
  <HTTPTask id="8" hostname="cdn.jsdelivr.net" path="/npm/intl-tel-input@18.2.1/build/img/flags.png?1" url="https://cdn.jsdelivr.net/npm/intl-tel-input@18.2.1/build/img/flags.png?1" ip="151.101.153.229" port="443" client_ip="192.168.0.112" client_port="64267" connectionId="2420" origin="ExtraRes" encodingType="ANSI" ordinal="1" startDateTime="2024-02-16T16:37:20.008+05:30" startTime="2879" endTime="3126" blockedTime="-1" dnsTime="23" connectTime="109" sendTime="4294967295" waitTime="4294967295" receiveTime="50" sslNegotiateTime="83" responseBodySize="65969">
    <QueryString>
      <HTTPDataSet>
        <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
          <ActualData>MQ==</ActualData>
        </HTTPData>
      </HTTPDataSet>
      <IsExternalData>false</IsExternalData>
    </QueryString>
    <HTTPSplittedQueryStrings>
      <HTTPHeaderEntity name="" index="0">
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>MQ==</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </HTTPHeaderEntity>
    </HTTPSplittedQueryStrings>
    <HTTPRequest method="GET">
      <HTTPHeaders>
        <HTTPHeaderEntity name=":method" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>R0VU</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name=":scheme" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aHR0cHM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name=":path" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>L25wbS9pbnRsLXRlbC1pbnB1dEAxOC4yLjEvYnVpbGQvaW1nL2ZsYWdzLnBuZz8x</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name=":authority" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Y2RuLmpzZGVsaXZyLm5ldA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Referer" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L25wbS9pbnRsLXRlbC1pbnB1dEAxOC4yLjEvYnVpbGQvY3NzL2ludGxUZWxJbnB1dC5taW4uY3Nz</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Language" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>ZW4tVVMsZW47cT0wLjk=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="User-Agent" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEyMS4wLjAuMCBTYWZhcmkvNTM3LjM2</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Encoding" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept" index="8">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ki8q</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Om1ldGhvZDogR0VUDQo6c2NoZW1lOiBodHRwcw0KOnBhdGg6IC9ucG0vaW50bC10ZWwtaW5wdXRAMTguMi4xL2J1aWxkL2ltZy9mbGFncy5wbmc/MQ0KOmF1dGhvcml0eTogY2RuLmpzZGVsaXZyLm5ldA0KUmVmZXJlcjogaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L25wbS9pbnRsLXRlbC1pbnB1dEAxOC4yLjEvYnVpbGQvY3NzL2ludGxUZWxJbnB1dC5taW4uY3NzDQpBY2NlcHQtTGFuZ3VhZ2U6IGVuLVVTLGVuO3E9MC45DQpVc2VyLUFnZW50OiBNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvMTIxLjAuMC4wIFNhZmFyaS81MzcuMzYNCkFjY2VwdC1FbmNvZGluZzogZ3ppcCwgZGVmbGF0ZQ0KQWNjZXB0OiAqLyoNCg0K</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
      <HTTPPropertySet>
        <HTTPProperty name="StreamID">1</HTTPProperty>
        <HTTPProperty name="TotalHeadersSize">226</HTTPProperty>
      </HTTPPropertySet>
    </HTTPRequest>
    <HTTPResponse>
      <contentLenght>70325</contentLenght>
      <HTTPHeaders>
        <HTTPHeaderEntity name="Status" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MjAw</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="access-control-allow-origin" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Kg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="access-control-expose-headers" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Kg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="timing-allow-origin" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Kg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="cache-control" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>cHVibGljLCBtYXgtYWdlPTMxNTM2MDAwLCBzLW1heGFnZT0zMTUzNjAwMCwgaW1tdXRhYmxl</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="cross-origin-resource-policy" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Y3Jvc3Mtb3JpZ2lu</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="x-content-type-options" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bm9zbmlmZg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="strict-transport-security" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bWF4LWFnZT0zMTUzNjAwMDsgaW5jbHVkZVN1YkRvbWFpbnM7IHByZWxvYWQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="content-type" index="8">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aW1hZ2UvcG5n</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="x-jsd-version" index="9">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MTguMi4x</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="x-jsd-version-type" index="10">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>dmVyc2lvbg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="etag" index="11">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Vy8iMTEyYjUtdEZHMDIwTVhTY3hBekNwZkp4K1lCOG9oOGRNIg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="accept-ranges" index="12">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ynl0ZXM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="date" index="13">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>RnJpLCAxNiBGZWIgMjAyNCAxMTowNzoyMCBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="age" index="14">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>NjMzMDA1NA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="x-served-by" index="15">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Y2FjaGUtZnJhLWVkZGY4MjMwMTA1LUZSQSwgY2FjaGUtYm9tNDc0My1CT00=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="x-cache" index="16">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SElULCBISVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="vary" index="17">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>QWNjZXB0LUVuY29kaW5n</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="alt-svc" index="18">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aDM9Ijo0NDMiO21hPTg2NDAwLGgzLTI5PSI6NDQzIjttYT04NjQwMCxoMy0yNz0iOjQ0MyI7bWE9ODY0MDA=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="content-length" index="19">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>NzAzMjU=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SFRUUC8yLjAgMjAwDQpTdGF0dXM6IDIwMA0KYWNjZXNzLWNvbnRyb2wtYWxsb3ctb3JpZ2luOiAqDQphY2Nlc3MtY29udHJvbC1leHBvc2UtaGVhZGVyczogKg0KdGltaW5nLWFsbG93LW9yaWdpbjogKg0KY2FjaGUtY29udHJvbDogcHVibGljLCBtYXgtYWdlPTMxNTM2MDAwLCBzLW1heGFnZT0zMTUzNjAwMCwgaW1tdXRhYmxlDQpjcm9zcy1vcmlnaW4tcmVzb3VyY2UtcG9saWN5OiBjcm9zcy1vcmlnaW4NCngtY29udGVudC10eXBlLW9wdGlvbnM6IG5vc25pZmYNCnN0cmljdC10cmFuc3BvcnQtc2VjdXJpdHk6IG1heC1hZ2U9MzE1MzYwMDA7IGluY2x1ZGVTdWJEb21haW5zOyBwcmVsb2FkDQpjb250ZW50LXR5cGU6IGltYWdlL3BuZw0KeC1qc2QtdmVyc2lvbjogMTguMi4xDQp4LWpzZC12ZXJzaW9uLXR5cGU6IHZlcnNpb24NCmV0YWc6IFcvIjExMmI1LXRGRzAyME1YU2N4QXpDcGZKeCtZQjhvaDhkTSINCmFjY2VwdC1yYW5nZXM6IGJ5dGVzDQpkYXRlOiBGcmksIDE2IEZlYiAyMDI0IDExOjA3OjIwIEdNVA0KYWdlOiA2MzMwMDU0DQp4LXNlcnZlZC1ieTogY2FjaGUtZnJhLWVkZGY4MjMwMTA1LUZSQSwgY2FjaGUtYm9tNDc0My1CT00NCngtY2FjaGU6IEhJVCwgSElUDQp2YXJ5OiBBY2NlcHQtRW5jb2RpbmcNCmFsdC1zdmM6IGgzPSI6NDQzIjttYT04NjQwMCxoMy0yOT0iOjQ0MyI7bWE9ODY0MDAsaDMtMjc9Ijo0NDMiO21hPTg2NDAwDQpjb250ZW50LWxlbmd0aDogNzAzMjUNCg0K</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
      <HTTPBody>
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>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</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </HTTPBody>
      <HTTPPropertySet>
        <HTTPProperty name="StreamID">1</HTTPProperty>
        <HTTPProperty name="TotalHeadersSize">434</HTTPProperty>
      </HTTPPropertySet>
    </HTTPResponse>
  </HTTPTask>
  <HTTPTask id="9" hostname="dev.bluealgo.com" path="/smartformup/ui/lock-ic.png" url="https://dev.bluealgo.com/smartformup/ui/lock-ic.png" ip="144.126.253.3" port="443" client_ip="192.168.0.112" client_port="64262" connectionId="2220" origin="ExtraRes" encodingType="ANSI" ordinal="2" startDateTime="2024-02-16T16:37:19.905+05:30" startTime="2776" endTime="2916" blockedTime="-1" dnsTime="-1" connectTime="-2" sendTime="4294967295" waitTime="4294967295" receiveTime="2" sslNegotiateTime="-1" responseBodySize="4047">
    <HTTPRequest method="GET">
      <HTTPHeaders>
        <HTTPHeaderEntity name=":method" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>R0VU</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name=":scheme" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aHR0cHM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name=":path" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>L3NtYXJ0Zm9ybXVwL3VpL2xvY2staWMucG5n</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name=":authority" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>ZGV2LmJsdWVhbGdvLmNvbQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Referer" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aHR0cHM6Ly9kZXYuYmx1ZWFsZ28uY29tL3NtYXJ0Zm9ybXVwL3VpL3N0eWxlcy5jc3M=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Language" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>ZW4tVVMsZW47cT0wLjk=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="User-Agent" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEyMS4wLjAuMCBTYWZhcmkvNTM3LjM2</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Encoding" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept" index="8">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ki8q</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="cookie" index="9">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SlNFU1NJT05JRD1COEI5REUyNDA1ODE3RDYwMjlFQzM0QzA3NDlEQjJFRg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Om1ldGhvZDogR0VUDQo6c2NoZW1lOiBodHRwcw0KOnBhdGg6IC9zbWFydGZvcm11cC91aS9sb2NrLWljLnBuZw0KOmF1dGhvcml0eTogZGV2LmJsdWVhbGdvLmNvbQ0KUmVmZXJlcjogaHR0cHM6Ly9kZXYuYmx1ZWFsZ28uY29tL3NtYXJ0Zm9ybXVwL3VpL3N0eWxlcy5jc3MNCkFjY2VwdC1MYW5ndWFnZTogZW4tVVMsZW47cT0wLjkNClVzZXItQWdlbnQ6IE1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS8xMjEuMC4wLjAgU2FmYXJpLzUzNy4zNg0KQWNjZXB0LUVuY29kaW5nOiBnemlwLCBkZWZsYXRlDQpBY2NlcHQ6ICovKg0KY29va2llOiBKU0VTU0lPTklEPUI4QjlERTI0MDU4MTdENjAyOUVDMzRDMDc0OURCMkVGDQoNCg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
        <HTTPCookies>
          <HTTPHeaderEntity name="JSESSIONID" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>QjhCOURFMjQwNTgxN0Q2MDI5RUMzNEMwNzQ5REIyRUY=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
        </HTTPCookies>
      </HTTPHeaders>
      <HTTPPropertySet>
        <HTTPProperty name="StreamID">7</HTTPProperty>
        <HTTPProperty name="TotalHeadersSize">73</HTTPProperty>
      </HTTPPropertySet>
    </HTTPRequest>
    <HTTPResponse>
      <contentLenght>5593</contentLenght>
      <HTTPHeaders>
        <HTTPHeaderEntity name="Status" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MjAw</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="date" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>RnJpLCAxNiBGZWIgMjAyNCAxMTowNzoxOSBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="content-type" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aW1hZ2UvcG5n</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="content-length" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>NTU5Mw==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="access-control-allow-origin" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Kg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="accept-ranges" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ynl0ZXM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="etag" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Vy8iNTU5My0xNzAzNTg5MDUyMDAwIg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="last-modified" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VHVlLCAyNiBEZWMgMjAyMyAxMToxMDo1MiBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="strict-transport-security" index="8">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bWF4LWFnZT0xNTcyNDgwMDsgaW5jbHVkZVN1YkRvbWFpbnM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SFRUUC8yLjAgMjAwDQpTdGF0dXM6IDIwMA0KZGF0ZTogRnJpLCAxNiBGZWIgMjAyNCAxMTowNzoxOSBHTVQNCmNvbnRlbnQtdHlwZTogaW1hZ2UvcG5nDQpjb250ZW50LWxlbmd0aDogNTU5Mw0KYWNjZXNzLWNvbnRyb2wtYWxsb3ctb3JpZ2luOiAqDQphY2NlcHQtcmFuZ2VzOiBieXRlcw0KZXRhZzogVy8iNTU5My0xNzAzNTg5MDUyMDAwIg0KbGFzdC1tb2RpZmllZDogVHVlLCAyNiBEZWMgMjAyMyAxMToxMDo1MiBHTVQNCnN0cmljdC10cmFuc3BvcnQtc2VjdXJpdHk6IG1heC1hZ2U9MTU3MjQ4MDA7IGluY2x1ZGVTdWJEb21haW5zDQoNCg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
      <HTTPBody>
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>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</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </HTTPBody>
      <HTTPPropertySet>
        <HTTPProperty name="StreamID">7</HTTPProperty>
        <HTTPProperty name="TotalHeadersSize">182</HTTPProperty>
      </HTTPPropertySet>
    </HTTPResponse>
  </HTTPTask>
  <HTTPTask id="10" hostname="dev.bluealgo.com" path="/smartformup/ui/marked.png" url="https://dev.bluealgo.com/smartformup/ui/marked.png" ip="144.126.253.3" port="443" client_ip="192.168.0.112" client_port="64262" connectionId="2220" origin="ExtraRes" encodingType="ANSI" ordinal="3" startDateTime="2024-02-16T16:37:19.906+05:30" startTime="2777" endTime="2971" blockedTime="-1" dnsTime="-1" connectTime="-2" sendTime="4294967295" waitTime="4294967295" receiveTime="3" sslNegotiateTime="-1" responseBodySize="180">
    <HTTPRequest method="GET">
      <HTTPHeaders>
        <HTTPHeaderEntity name=":method" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>R0VU</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name=":scheme" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aHR0cHM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name=":path" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>L3NtYXJ0Zm9ybXVwL3VpL21hcmtlZC5wbmc=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name=":authority" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>ZGV2LmJsdWVhbGdvLmNvbQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Referer" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aHR0cHM6Ly9kZXYuYmx1ZWFsZ28uY29tL3NtYXJ0Zm9ybXVwL3VpL3N0eWxlcy5jc3M=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Language" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>ZW4tVVMsZW47cT0wLjk=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="User-Agent" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEyMS4wLjAuMCBTYWZhcmkvNTM3LjM2</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Encoding" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept" index="8">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ki8q</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="cookie" index="9">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SlNFU1NJT05JRD1COEI5REUyNDA1ODE3RDYwMjlFQzM0QzA3NDlEQjJFRg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Om1ldGhvZDogR0VUDQo6c2NoZW1lOiBodHRwcw0KOnBhdGg6IC9zbWFydGZvcm11cC91aS9tYXJrZWQucG5nDQo6YXV0aG9yaXR5OiBkZXYuYmx1ZWFsZ28uY29tDQpSZWZlcmVyOiBodHRwczovL2Rldi5ibHVlYWxnby5jb20vc21hcnRmb3JtdXAvdWkvc3R5bGVzLmNzcw0KQWNjZXB0LUxhbmd1YWdlOiBlbi1VUyxlbjtxPTAuOQ0KVXNlci1BZ2VudDogTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEyMS4wLjAuMCBTYWZhcmkvNTM3LjM2DQpBY2NlcHQtRW5jb2Rpbmc6IGd6aXAsIGRlZmxhdGUNCkFjY2VwdDogKi8qDQpjb29raWU6IEpTRVNTSU9OSUQ9QjhCOURFMjQwNTgxN0Q2MDI5RUMzNEMwNzQ5REIyRUYNCg0K</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
        <HTTPCookies>
          <HTTPHeaderEntity name="JSESSIONID" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>QjhCOURFMjQwNTgxN0Q2MDI5RUMzNEMwNzQ5REIyRUY=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
        </HTTPCookies>
      </HTTPHeaders>
      <HTTPPropertySet>
        <HTTPProperty name="StreamID">9</HTTPProperty>
        <HTTPProperty name="TotalHeadersSize">35</HTTPProperty>
      </HTTPPropertySet>
    </HTTPRequest>
    <HTTPResponse>
      <contentLenght>841</contentLenght>
      <HTTPHeaders>
        <HTTPHeaderEntity name="Status" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MjAw</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="date" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>RnJpLCAxNiBGZWIgMjAyNCAxMTowNzoxOSBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="content-type" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aW1hZ2UvcG5n</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="content-length" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>ODQx</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="access-control-allow-origin" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Kg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="accept-ranges" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ynl0ZXM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="etag" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Vy8iODQxLTE3MDM1ODkwNTIwMDAi</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="last-modified" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VHVlLCAyNiBEZWMgMjAyMyAxMToxMDo1MiBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="strict-transport-security" index="8">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bWF4LWFnZT0xNTcyNDgwMDsgaW5jbHVkZVN1YkRvbWFpbnM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SFRUUC8yLjAgMjAwDQpTdGF0dXM6IDIwMA0KZGF0ZTogRnJpLCAxNiBGZWIgMjAyNCAxMTowNzoxOSBHTVQNCmNvbnRlbnQtdHlwZTogaW1hZ2UvcG5nDQpjb250ZW50LWxlbmd0aDogODQxDQphY2Nlc3MtY29udHJvbC1hbGxvdy1vcmlnaW46ICoNCmFjY2VwdC1yYW5nZXM6IGJ5dGVzDQpldGFnOiBXLyI4NDEtMTcwMzU4OTA1MjAwMCINCmxhc3QtbW9kaWZpZWQ6IFR1ZSwgMjYgRGVjIDIwMjMgMTE6MTA6NTIgR01UDQpzdHJpY3QtdHJhbnNwb3J0LXNlY3VyaXR5OiBtYXgtYWdlPTE1NzI0ODAwOyBpbmNsdWRlU3ViRG9tYWlucw0KDQo=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
      <HTTPBody>
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC+0lEQVR4nO1ZTW/TQBC1gHLgyMeJwr8Alf/QQouEQPBDQPyA8iFugFpU+gHHIkigLRcOkThk36QWEom5wYHEu62g5ZxwWTROU4ni1Lv2xg5SRhopkWPve5PZmbdjzxvZyEaW2Vb16lEK6RIk7kLitZD0BYp+CYnf7HufA74W/WYbE1rrI17RVgtr56BwH4pCKNI2LhS1oHAPLYznDvyj+nQGip4JhY4t8H+JoCMk5nzpn84FPEm6CUW7WYHHENkRobgxMOC+9segsOAaOA4SkTTPa7kFL/0TkHg/aPDouaQNXtNd5PMEr3qOD0EQHM9MII+0Qd90wlwm8FVJt4oCjx6JsHY9FXgK6ZRQ+Fk0ASjaTVViuc7nCXTt23r/6xJP7cC3MO6iSZn6UuOFvly+qmfxID6NFDq+9M9bRD+SB7mAXw664CdL05H3I8Gywwg8i6yuTskBfGPlL/Ds/P3d19h0Clk0JhKIVGUBkZ8sTeup8ox+Xl/qe091a/Nicvqw3B1C8OjKjDuJBITCmyLAL9QXE+8Vkl4lE+CDxxCCB7ukenIKWUjlPpvNeMNOlWf0YmPZ+BncWE1SyKj+P9x8ZBy9zJFXPUfbCQEGbwqEwV956wI8mRFISiFOG9NU6HXYLGkD6xQy2MQmKbESvHQYeTLfxKZl9LDUGAh4ZVhGbRpZv8oS26QahzcpmBG4nUxgGxM2D437J1xHHnteU7ULhmIOTZsHx6WMa/BC4bvxNC+amFkucJCES/DoTvJmjcBnOdD0SLgGD4V2tVk969kYTwTSLMZ7IklVpoj+Y8/Wqs3qyWE41AuFndRzU55VFk2AtuhaKvD7JCTNFxZ9SU+8rMbnUKGoVAD49YquHPPcDXdpIz/wWHM23N0nof2xtJXJNm0qriIfZzyrHEh1kviRecPazE153McNJjt4tLnOc9n28jbujiw7bLVTlCoKTZYH1h12EMYii4dOPLdhzc4HDz7ZRS/wupKET3mf+RpLYlaVQ/GadWQj8/5/+wO4yRM6vdI5mQAAAABJRU5ErkJggg==</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </HTTPBody>
      <HTTPPropertySet>
        <HTTPProperty name="StreamID">9</HTTPProperty>
        <HTTPProperty name="TotalHeadersSize">180</HTTPProperty>
      </HTTPPropertySet>
    </HTTPResponse>
  </HTTPTask>
</HTTPSnapshot>